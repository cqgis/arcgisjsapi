//>>built
(function(q,z){"object"===typeof exports&&"undefined"!==typeof module?z(exports):"function"===typeof define&&define.amd?define(["exports"],z):(q=q||self,z(q.maquette={}))})(this,function(q){var z=[],x=function(b,a){var d={};Object.keys(b).forEach(function(a){d[a]=b[a]});a&&Object.keys(a).forEach(function(b){d[b]=a[b]});return d},D=function(b,a){return b.vnodeSelector!==a.vnodeSelector?!1:b.properties&&a.properties?b.properties.key!==a.properties.key?!1:b.properties.bind===a.properties.bind:!b.properties&&
!a.properties},I=function(b){if("string"!==typeof b)throw Error("Style values must be strings");},E=function(b,a,d,e){var f=b[a];if(""!==f.vnodeSelector){var c=f.properties;if(!(c&&(void 0===c.key?c.bind:c.key)))for(c=0;c<b.length;c++)if(c!==a&&D(b[c],f))throw Error(d.vnodeSelector+" had a "+f.vnodeSelector+" child "+("added"===e?e:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},F=[],G=!1,J=function(b){(b.children||[]).forEach(J);
b.properties&&b.properties.afterRemoved&&b.properties.afterRemoved.apply(b.properties.bind||b.properties,[b.domNode])},K=function(){G=!1;F.forEach(J);F.length=0},L=function(b){F.push(b);G||(G=!0,"undefined"!==typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(K,{timeout:16}):setTimeout(K,16))},M=function(b){var a=b.domNode;if(b.properties){var d=b.properties.exitAnimation;if(d){a.style.pointerEvents="none";d(a,function(){a.parentNode&&(a.parentNode.removeChild(a),L(b))},b.properties);
return}}a.parentNode&&(a.parentNode.removeChild(a),L(b))},Q=function(b,a,d){if(a)for(var e=d.eventHandlerInterceptor,f=Object.keys(a),c=f.length,n=function(c){c=f[c];var g=a[c];if("className"===c)throw Error('Property "className" is not supported, use "class".');if("class"===c)H(b,g,!0);else if("classes"===c){var k=Object.keys(g),n=k.length;for(c=0;c<n;c++){var r=k[c];g[r]&&b.classList.add(r)}}else if("styles"===c)for(k=Object.keys(g),n=k.length,c=0;c<n;c++){var r=k[c],h=g[r];h&&(I(h),d.styleApplyer(b,
r,h))}else"key"!==c&&null!==g&&void 0!==g&&(k=typeof g,"function"===k?0===c.lastIndexOf("on",0)&&(e&&(g=e(c,g,b,a)),"oninput"===c&&function(){var a=g;g=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),b[c]=g):"http://www.w3.org/2000/svg"===d.namespace?"href"===c?b.setAttributeNS("http://www.w3.org/1999/xlink",c,g):b.setAttribute(c,g):"string"===k&&"value"!==c&&"innerHTML"!==c?b.setAttribute(c,g):b[c]=g)},p=0;p<c;p++)n(p)},N=function(b,a,d){var e=a.children;if(e)for(var f=
0;f<e.length;f++)A(e[f],b,void 0,d);a.text&&(b.textContent=a.text);Q(b,a.properties,d);a.properties&&a.properties.afterCreate&&a.properties.afterCreate.apply(a.properties.bind||a.properties,[b,d,a.vnodeSelector,a.properties,a.children])},A=function(b,a,d,e){var f,c=0,n=b.vnodeSelector,p=a.ownerDocument;if(""===n)f=b.domNode=p.createTextNode(b.text),void 0!==d?a.insertBefore(f,d):a.appendChild(f);else{for(var m=0;m<=n.length;++m){var g=n.charAt(m);if(m===n.length||"."===g||"#"===g)g=n.charAt(c-1),
c=n.slice(c,m),"."===g?f.classList.add(c):"#"===g?f.id=c:("svg"===c&&(e=x(e,{namespace:"http://www.w3.org/2000/svg"})),void 0!==e.namespace?f=b.domNode=p.createElementNS(e.namespace,c):(f=b.domNode=b.domNode||p.createElement(c),"input"===c&&b.properties&&void 0!==b.properties.type&&f.setAttribute("type",b.properties.type)),void 0!==d?a.insertBefore(f,d):f.parentNode!==a&&a.appendChild(f)),c=m+1}N(f,b,e)}},C,H=function(b,a,d){a&&a.split(" ").forEach(function(a){a&&b.classList.toggle(a,d)})};C=function(b,
a,d){var e=b.domNode;if(b===a)return!1;var f=!1;if(""===a.vnodeSelector){if(a.text!==b.text)return b=e.ownerDocument.createTextNode(a.text),e.parentNode.replaceChild(b,e),a.domNode=b,!0;a.domNode=e}else{0===a.vnodeSelector.lastIndexOf("svg",0)&&(d=x(d,{namespace:"http://www.w3.org/2000/svg"}));b.text!==a.text&&(f=!0,void 0===a.text?e.removeChild(e.firstChild):e.textContent=a.text);a.domNode=e;var c;c=b.children;var n=a.children,p=d;if(c===n)c=!1;else{c=c||z;for(var n=n||z,m=c.length,g=n.length,k=
0,v=0,r=!1;v<g;){var h=k<m?c[k]:void 0,l=n[v];if(void 0!==h&&D(h,l))r=C(h,l,p)||r,k++;else{b:{var h=c,u=l;if(""!==u.vnodeSelector)for(var q=k+1;q<h.length;q++)if(D(h[q],u)){h=q;break b}h=-1}if(0<=h){for(;k<h;k++)M(c[k]),E(c,k,a,"removed");r=C(c[h],l,p)||r;k=h+1}else A(l,e,k<m?c[k].domNode:void 0,p),l.properties&&(h=l.properties.enterAnimation)&&h(l.domNode,l.properties),E(n,v,a,"added")}v++}if(m>k)for(;k<m;k++)M(c[k]),E(c,k,a,"removed");c=r}f=c||f;c=b.properties;n=a.properties;p=d;if(n){m=!1;g=Object.keys(n);
v=g.length;for(r=0;r<v;r++)if(h=g[r],l=n[h],k=c[h],"class"===h)k!==l&&(H(e,k,!1),H(e,l,!0));else if("classes"===h)for(var u=e.classList,q=Object.keys(l),t=q.length,h=0;h<t;h++){var w=q[h],y=!!l[w];y!==!!k[w]&&(m=!0,y?u.add(w):u.remove(w))}else if("styles"===h)for(u=Object.keys(l),q=u.length,h=0;h<q;h++)t=u[h],w=l[t],w!==k[t]&&(m=!0,w?(I(w),p.styleApplyer(e,t,w)):p.styleApplyer(e,t,""));else l||"string"!==typeof k||(l=""),"value"===h?(u=e[h],u!==l&&(e["oninput-value"]?u===e["oninput-value"]:l!==k)&&
(e[h]=l,e["oninput-value"]=void 0),l!==k&&(m=!0)):l!==k&&(k=typeof l,"function"===k&&p.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===p.namespace?"href"===h?e.setAttributeNS("http://www.w3.org/1999/xlink",h,l):e.setAttribute(h,l):"string"===k&&"innerHTML"!==h?"role"===h&&""===l?e.removeAttribute(h):e.setAttribute(h,l):e[h]!==l&&(e[h]=l),m=!0));c=m}else c=void 0;f=c||f;a.properties&&a.properties.afterUpdate&&a.properties.afterUpdate.apply(a.properties.bind||a.properties,[e,d,a.vnodeSelector,
a.properties,a.children])}f&&a.properties&&a.properties.updateAnimation&&a.properties.updateAnimation(e,a.properties,b.properties);return!1};var y=function(b,a){return{getLastRender:function(){return b},update:function(d){if(b.vnodeSelector!==d.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var e=b;b=d;C(e,d,a)},domNode:b.domNode}},t={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,
styleApplyer:function(b,a,d){b.style[a]=d}},B={create:function(b,a){a=x(t,a);A(b,document.createElement("div"),void 0,a);return y(b,a)},append:function(b,a,d){d=x(t,d);A(a,b,void 0,d);return y(a,d)},insertBefore:function(b,a,d){d=x(t,d);A(a,b.parentNode,b,d);return y(a,d)},merge:function(b,a,d){d=x(t,d);a.domNode=b;N(b,a,d);return y(a,d)},replace:function(b,a,d){d=x(t,d);A(a,b.parentNode,b,d);b.parentNode.removeChild(b);return y(a,d)}},O=function(b,a,d){for(var e=0,f=a.length;e<f;e++){var c=a[e];
Array.isArray(c)?O(b,c,d):null!==c&&void 0!==c&&!1!==c&&("string"===typeof c&&(c={vnodeSelector:"",properties:void 0,children:void 0,text:c.toString(),domNode:null}),d.push(c))}},P;P=Array.prototype.find?function(b,a){return b.find(a)}:function(b,a){return b.filter(a)[0]};var R=function(b,a){var d=b;a.forEach(function(a){d=d&&d.children?P(d.children,function(b){return b.domNode===a}):void 0});return d},S=function(b,a,d){var e=function(e){d("domEvent",e);var c=a(),f;f=e.currentTarget;for(var p=c.domNode,
m=[];f!==p;)m.push(f),f=f.parentNode;f=m;f.reverse();c=R(c.getLastRender(),f);b.scheduleRender();var g;c&&(g=c.properties["on"+e.type].apply(c.properties.bind||this,arguments));d("domEventProcessed",e);return g};return function(a,b,d,p){return e}};q.createCache=function(){var b,a;return{invalidate:function(){b=a=void 0},result:function(d,e){if(b)for(var f=0;f<d.length;f++)b[f]!==d[f]&&(a=void 0);a||(a=e(),b=d);return a}}};q.createMapping=function(b,a,d){var e=[],f=[];return{results:f,map:function(c){for(var n=
c.map(b),p=f.slice(),m=0,g=0;g<c.length;g++){var k=c[g],v=n[g];if(v===e[m])f[g]=p[m],d(k,p[m],g),m++;else{for(var r=!1,h=1;h<e.length+1;h++){var l=(m+h)%e.length;if(e[l]===v){f[g]=p[l];d(c[g],p[l],g);m=l+1;r=!0;break}}r||(f[g]=a(k,g))}}f.length=c.length;e=n}}};q.createProjector=function(b){var a,d=x(t,b),e=d.performanceLogger,f=!0,c,n=!1,p=[],m=[],g=function(b,c,f){var g;d.eventHandlerInterceptor=S(a,function(){return g},e);g=b(c,f(),d);p.push(g);m.push(f)},k=function(){c=void 0;if(f){f=!1;e("renderStart",
void 0);for(var a=0;a<p.length;a++){var b=m[a]();e("rendered",void 0);p[a].update(b);e("patched",void 0)}e("renderDone",void 0);f=!0}};return a={renderNow:k,scheduleRender:function(){c||n||(c=requestAnimationFrame(k))},stop:function(){c&&(cancelAnimationFrame(c),c=void 0);n=!0},resume:function(){n=!1;f=!0;a.scheduleRender()},append:function(a,b){g(B.append,a,b)},insertBefore:function(a,b){g(B.insertBefore,a,b)},merge:function(a,b){g(B.merge,a,b)},replace:function(a,b){g(B.replace,a,b)},detach:function(a){for(var b=
0;b<m.length;b++)if(m[b]===a)return m.splice(b,1),p.splice(b,1)[0];throw Error("renderFunction was not found");}}};q.dom=B;q.h=function(b,a,d){if(Array.isArray(a))d=a,a=void 0;else if(a&&("string"===typeof a||a.hasOwnProperty("vnodeSelector"))||d&&("string"===typeof d||d.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var e,f;d&&1===d.length&&"string"===typeof d[0]?e=d[0]:d&&(f=[],O(b,d,f),0===f.length&&(f=void 0));return{vnodeSelector:b,properties:a,children:f,text:""===
e?void 0:e,domNode:null}};Object.defineProperty(q,"__esModule",{value:!0})});