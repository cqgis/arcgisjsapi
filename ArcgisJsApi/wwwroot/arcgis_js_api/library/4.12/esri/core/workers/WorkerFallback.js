// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ../has ../promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(f,u,q,p,g,v,r,h){var t=function(){return function(){var a=this,d=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return d[c].apply(d,b)}})}}(),k=g.MutationObserver||g.WebKitMutationObserver,l=
function(){var a;if(g.process&&g.process.nextTick)a=function(b){g.process.nextTick(b)};else if(g.Promise)a=function(b){g.Promise.resolve().then(b)};else if(k){var d=[],c=document.createElement("div");(new k(function(){for(;0<d.length;)d.shift()()})).observe(c,{attributes:!0});a=function(b){d.push(b);c.setAttribute("queueStatus","1")}}return a}(),m=function(){var a=g.MessageEvent;try{new a("message",{data:null})}catch(d){return function(d,b){void 0===b&&(b={});var a=b.data,c=b.bubbles,c=void 0===c?
!1:c;b=b.cancelable;b=void 0===b?!1:b;var e=document.createEvent("Event");e.initEvent(d,c,b);e.data=a;return e}}return function(d,c){return new a(d,c)}}();return function(){function a(){this._dispatcher=new t;this._isInitialized=!1;this._workerPostMessage({type:h.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(d){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);
(this._onmessageHandler=d)&&this.addEventListener("message",d)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(d){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=d)&&this.addEventListener("error",d)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(d,a){var b=this;l(function(){b._workerMessageHandler(m("message",{data:d}))})};a.prototype.dispatchEvent=
function(d){return this._dispatcher.dispatchEvent(d)};a.prototype.addEventListener=function(d,a,b){this._dispatcher.addEventListener(d,a,b)};a.prototype.removeEventListener=function(a,c,b){this._dispatcher.removeEventListener(a,c,b)};a.prototype._workerPostMessage=function(a,c){var b=this;l(function(){b.dispatchEvent(m("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){return p(this,void 0,void 0,function(){var d,b,g,n,e,k,l,m,p=this;return q(this,function(c){switch(c.label){case 0:d=
h.receiveMessage(a);if(!d)return[2];b=d.jobId;g=d.type;switch(g){case h.MessageType.CONFIGURE:return[3,1];case h.MessageType.OPEN:return[3,2]}return[3,27];case 1:return this._isInitialized||this._workerPostMessage({type:h.MessageType.CONFIGURED}),[3,27];case 2:return n=d.modulePath,[3,25];case 3:k=c.sent();l=n;switch(l){case "esri/tasks/operations/PBFWorker":return[3,4];case "esri/views/2d/engine/vectorTiles/WorkerTileHandler":return[3,6];case "esri/views/2d/layers/features/Pipeline":return[3,8];
case "esri/views/3d/layers/PointCloudWorker":return[3,10];case "esri/views/3d/layers/SceneLayerWorker":return[3,12];case "esri/layers/graphics/sources/support/CSVSourceWorker":return[3,14];case "esri/layers/support/LercWorker":return[3,16];case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":return[3,18];case "esri/geometry/support/meshUtils/ElevationSamplerWorker":return[3,20]}return[3,22];case 4:return[4,new Promise(function(a,b){f(["esri/tasks/operations/PBFWorker"],a,b)})];
case 5:return e=c.sent(),[3,24];case 6:return[4,new Promise(function(a,b){f(["esri/views/2d/engine/vectorTiles/WorkerTileHandler"],a,b)})];case 7:return e=c.sent(),[3,24];case 8:return[4,new Promise(function(a,b){f(["esri/views/2d/layers/features/Pipeline"],a,b)})];case 9:return e=c.sent(),[3,24];case 10:return[4,new Promise(function(a,b){f(["esri/views/3d/layers/PointCloudWorker"],a,b)})];case 11:return e=c.sent(),[3,24];case 12:return[4,new Promise(function(a,b){f(["esri/views/3d/layers/SceneLayerWorker"],
a,b)})];case 13:return e=c.sent(),[3,24];case 14:return[4,new Promise(function(a,b){f(["esri/layers/graphics/sources/support/CSVSourceWorker"],a,b)})];case 15:return e=c.sent(),[3,24];case 16:return[4,new Promise(function(a,b){f(["esri/layers/support/LercWorker"],a,b)})];case 17:return e=c.sent(),[3,24];case 18:return[4,new Promise(function(a,b){f(["esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],a,b)})];case 19:return e=c.sent(),[3,24];case 20:return[4,new Promise(function(a,
b){f(["esri/geometry/support/meshUtils/ElevationSamplerWorker"],a,b)})];case 21:return e=c.sent(),[3,24];case 22:return[4,r.create(function(a){return f([n],a)})];case 23:e=c.sent(),c.label=24;case 24:return m=k.connect(e),this._workerPostMessage({type:h.MessageType.OPENED,jobId:b,data:m}),[3,26];case 25:f(["esri/core/workers/RemoteClient",n],function(a,c){a=a.connect(c);p._workerPostMessage({type:h.MessageType.OPENED,jobId:b,data:a})}),c.label=26;case 26:return[3,27];case 27:return[2]}})})};return a}()});