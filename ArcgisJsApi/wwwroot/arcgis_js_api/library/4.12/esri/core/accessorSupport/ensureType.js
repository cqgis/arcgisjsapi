// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define(["require","exports","../Logger"],function(L,c,I){function v(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function w(a){return null==a?a:new Date(a)}function x(a){return null==a?a:!!a}function y(a){return null==a?a:a.toString()}function z(a){return null==a?a:"number"===typeof a&&isNaN(a)?0:parseFloat(a)}function A(a){return null==a?a:Math.round(parseFloat(a))}function q(a){return a&&a.constructor&&void 0!==a.constructor._meta}function l(a,b){return null!=b&&a&&!v(a,b)}function B(a){return a&&
("isCollection"in a||a._meta&&a._meta.bases&&a._meta.bases.some(function(a){return"isCollection"in a}))}function C(a){return a&&a.Type?"function"===typeof a.Type?a.Type:a.Type.base:null}function J(a,b){if(!b||!b.constructor||!B(b.constructor))return r(a,b)?b:new a(b);var d=C(a.prototype.itemType),c=C(b.constructor.prototype.itemType);if(!d)return b;if(!c)return new a(b);if(d===c)return b;if((c=c._meta&&c._meta.bases)&&-1!==c.indexOf(d))return new a(b);r(a,b);return b}function r(a,b){return q(b)?(m.error("Accessor#set",
"Assigning an instance of '"+(b.declaredClass||"unknown")+"' which is not a subclass of '"+t(a)+"'"),!0):!1}function D(a,b){return null==b?b:B(a)?J(a,b):l(a,b)?r(a,b)?b:new a(b):b}function t(a){return a&&a.prototype&&a.prototype.declaredClass||"unknown"}function K(a){switch(a){case Number:return z;case E:return A;case Boolean:return x;case String:return y;case Date:return w;default:return D.bind(null,a)}}function e(a,b){var c=K(a);return 1===arguments.length?c:c(b)}function h(a,b){return 1===arguments.length?
h.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function F(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return F(a,b-1,c)}):a(c)}function p(a,b,c){if(2===arguments.length)return p.bind(null,a,b);if(!c)return c;c=F(a,b,c);for(var d=b,f=c;0<d&&Array.isArray(f);)d--,f=f[0];if(void 0!==f)for(f=0;f<d;f++)c=[c];return c}function G(a,b){if(2===arguments.length)return G(a).call(null,b);for(var c=new Set,e=a.filter(function(a){return"function"!==typeof a}),f=a.filter(function(a){return"function"===
typeof a}),g=0;g<a.length;g++){var k=a[g];"string"!==typeof k&&"number"!==typeof k||c.add(k)}var n=null,u=null;return function(a,b){if(null==a)return a;var d=typeof a,g="string"===d||"number"===d;if(g&&(c.has(a)||f.some(function(a){return"string"===d&&a===String||"number"===d&&a===Number}))||"object"===d&&f.some(function(b){return!l(a,b)}))return a;g&&e.length?(n||(n=e.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),m.error("Accessor#set","'"+a+"' is not a valid value for this property, only the following values are valid: "+
n)):"object"===typeof a&&f.length?(u||(u=f.map(function(a){return t(a)}).join(", ")),m.error("Accessor#set","'"+a+"' is not a valid value for this property, value must be one of "+u)):m.error("Accessor#set","'"+a+"' is not a valid value for this property");b&&(b.valid=!1);return null}}function H(a,b){if(2===arguments.length)return H(a).call(null,b);var c={},h=[],f=[],g;for(g in a.typeMap){var k=a.typeMap[g];c[g]=e(k);h.push(t(k));f.push(g)}var n="string"===typeof a.key?function(b){return b[a.key]}:
a.key;return function(b){if(a.base&&!l(a.base,b))return b;var d=n(b)||a.defaultKeyValue,g=c[d];if(!g)return m.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+h.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+f.join("', '")+"'")+")"),null;if(!l(a.typeMap[d],b))return b;if("string"===typeof a.key&&!q(b)){var d={},e;for(e in b)e!==a.key&&(d[e]=b[e]);return g(d)}return g(b)}}Object.defineProperty(c,"__esModule",{value:!0});var m=I.getLogger("esri.core.Accessor");
c.isInstanceOf=v;c.ensureDate=w;c.ensureBoolean=x;c.ensureString=y;c.ensureNumber=z;c.ensureInteger=A;c.isClassedType=q;c.requiresType=l;c.ensureClass=D;c.ensureType=e;c.ensureArrayTyped=h;c.ensureArray=function(a,b){return 1===arguments.length?h(e.bind(null,a)):h(e.bind(null,a),b)};c.ensureNArrayTyped=p;c.ensureNArray=function(a,b,c){return 2===arguments.length?p(e.bind(null,a),b):p(e.bind(null,a),b,c)};c.isOneOf=function(a){return Array.isArray(a)?!a.some(function(b){b=typeof b;return!("string"===
b||"number"===b||"function"===b&&1<a.length)}):!1};c.ensureOneOf=G;c.ensureOneOfType=H;var E=function(){return function(){}}();c.Integer=E;c.default=e});