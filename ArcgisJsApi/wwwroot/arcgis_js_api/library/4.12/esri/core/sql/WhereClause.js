// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(C,d){function u(k){for(var d=0,m=0;m<k.length;m++)d+=k[m];return d/k.length}function g(k){for(var d=u(k),m=k.length,r=0,g=0;g<k.length;g++)r+=Math.pow(k[g]-d,2);return 1<m?r/(m-1):0}Object.defineProperty(d,"__esModule",{value:!0});d.aggregateFunction=function(d,g){var m=k[d.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(g.length<m.minParams||g.length>m.maxParams)throw Error("Invalid Parameter count for call to "+
d.toUpperCase());return m.evaluate(g)};d.isAggregate=function(d,g){d=k[d.toLowerCase()];return null!=d&&g>=d.minParams&&g<=d.maxParams};var k={min:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.min.apply(Math,d[0])}},max:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.max.apply(Math,d[0])}},avg:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:u(d[0])}},sum:{minParams:1,maxParams:1,evaluate:function(d){if(null==d[0])d=null;else{d=
d[0];for(var k=0,m=0;m<d.length;m++)k+=d[m];d=k}return d}},stddev:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sqrt(g(d[0]))}},count:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].length}},var:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:g(d[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(C,d,u){Object.defineProperty(d,"__esModule",{value:!0});C=function(){function d(){this.op=
"+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}d.fixDefaults=function(d){if(null!==d.precision||null!==d.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};d.createFromMilliseconds=function(k){var g=new d;g.second=k/1E3;return g};d.createFromValueAndQualifer=function(k,g,m){var z=null,r=new d;r.op="-"===m?"-":"+";if("interval-period"===g.type){d.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");
if(/^[0-9]{1,}$/.test(k))r[g.period]=parseFloat(k);else throw Error("Illegal Interval");}else{d.fixDefaults(g.start);d.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":z=/^[0-9]{1,} [0-9]{1,}$/;if(z.test(k))r[g.start.period]=parseFloat(k.split(" ")[0]),r[g.end.period]=
parseFloat(k.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":z=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(z.test(k))r[g.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),r.hour=parseFloat(k[0]),r.minute=parseFloat(k[1]);else throw Error("Illegal Interval");break;case "second":z=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(z.test(k))r[g.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),r.hour=parseFloat(k[0]),r.minute=
parseFloat(k[1]),r.second=parseFloat(k[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":z=/^[0-9]{1,}:[0-9]{1,}$/;if(z.test(k))r.hour=parseFloat(k.split(":")[0]),r.minute=parseFloat(k.split(":")[1]);else throw Error("Illegal Interval");break;case "second":z=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(z.test(k))k=k.split(":"),r.hour=parseFloat(k[0]),r.minute=parseFloat(k[1]),r.second=parseFloat(k[2]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(g.end.period){case "second":z=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(z.test(k))k=k.split(":"),r.minute=parseFloat(k[0]),r.second=parseFloat(k[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};d.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+
864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return d}();d.SqlInterval=C;d.evaluateFunction=function(d,r){var k=g[d.toLowerCase()];if(null==k)throw Error("Function Not Recognised");if(r.length<k.minParams||r.length>k.maxParams)throw Error("Invalid Parameter count for call to "+d.toUpperCase());return k.evaluate(r)};d.isStandardized=function(d,r){d=g[d.toLowerCase()];return null!=d&&r>=d.minParams&&r<=d.maxParams};var g={extract:{minParams:2,maxParams:2,evaluate:function(d){var k=d[0];
d=d[1];if(null==d)return null;if(d instanceof Date)switch(k.toUpperCase()){case "SECOND":return d.getSeconds();case "MINUTE":return d.getMinutes();case "HOUR":return d.getHours();case "DAY":return d.getDate();case "MONTH":return d.getMonth()+1;case "YEAR":return d.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(d){if(2===d.length){var k=d[0],g=d[1];return null==k||null==g?null:k.toString().substring(g-1)}if(3===d.length)return k=
d[0],g=d[1],d=d[2],null==k||null==g||null==d?null:0>=d?"":k.toString().substring(g-1,g+d-1)}},position:{minParams:2,maxParams:2,evaluate:function(d){var k=d[0];d=d[1];return null==k||null==d?null:d.indexOf(k)+1}},trim:{minParams:2,maxParams:3,evaluate:function(d){var k=3===d.length,g=k?d[1]:" ",k=k?d[2]:d[1];if(null==g||null==k)return null;g="("+u.escapeString(g)+")";switch(d[0]){case "BOTH":return k.replace(new RegExp("^"+g+"*|"+g+"*$","g"),"");case "LEADING":return k.replace(new RegExp("^"+g+"*",
"g"),"");case "TRAILING":return k.replace(new RegExp(g+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.abs(d[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.ceil(d[0])}},floor:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.floor(d[0])}},log:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])}},log10:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sin(d[0])}},cos:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.cos(d[0])}},tan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.tan(d[0])}},asin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.asin(d[0])}},acos:{minParams:1,maxParams:1,evaluate:function(d){return null==
d[0]?null:Math.acos(d[0])}},atan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.atan(d[0])}},sign:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:0<d[0]?1:0>d[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:Math.pow(d[0],d[1])}},mod:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:d[0]%d[1]}},round:{minParams:1,maxParams:2,evaluate:function(d){var g=d[0];d=2===d.length?
Math.pow(10,d[1]):1;return null==g?null:Math.round(g*d)/d}},truncate:{minParams:1,maxParams:2,evaluate:function(d){return null==d[0]?null:1===d.length?parseInt(d[0].toFixed(0),10):parseFloat(d[0].toFixed(d[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(d){return"string"===typeof d[0]||d[0]instanceof String?d[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(d){for(var g="",k=0;k<d.length;k++){if(null==d[k])return null;g+=d[k].toString()}return g}},lower:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toUpperCase()}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(C,d){var u={};d.setObject("dojo.regexp",u);u.escapeString=function(d,k){return d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(d){return k&&-1!=k.indexOf(d)?d:"\\"+d})};u.buildGroupRE=function(d,k,r){if(!(d instanceof Array))return k(d);
for(var g=[],m=0;m<d.length;m++)g.push(k(d[m]));return u.group(g.join("|"),r)};u.group=function(d,k){return"("+(k?"?:":"")+d+")"};return u})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(C,d,u){Object.defineProperty(d,"__esModule",{value:!0});C=function(){function d(){}d.parse=function(d){return u.parse(d)};return d}();d.WhereGrammar=C})},"esri/core/sql/sql92grammar":function(){define([],function(){function C(d,u,g,k){this.message=d;this.expected=
u;this.found=g;this.location=k;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,C)}(function(d,u){function g(){this.constructor=d}g.prototype=u.prototype;d.prototype=new g})(C,Error);C.buildMessage=function(d,u){function g(d){return d.charCodeAt(0).toString(16).toUpperCase()}function k(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}function r(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}var C={literal:function(d){return'"'+k(d.text)+'"'},"class":function(d){var g="",m;for(m=0;m<d.parts.length;m++)g+=d.parts[m]instanceof
Array?r(d.parts[m][0])+"-"+r(d.parts[m][1]):r(d.parts[m]);return"["+(d.inverted?"^":"")+g+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};return"Expected "+function(d){var g=Array(d.length),m;for(m=0;m<d.length;m++){var k=m,r;r=d[m];r=C[r.type](r);g[k]=r}g.sort();if(0<g.length){for(d=m=1;m<g.length;m++)g[m-1]!==g[m]&&(g[d]=g[m],d++);g.length=d}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,
-1).join(", ")+", or "+g[g.length-1]}}(d)+" but "+(u?'"'+k(u)+'"':"end of input")+" found."};return{SyntaxError:C,parse:function(d,u){function g(a,b){return{type:"literal",text:a,ignoreCase:b}}function k(a,b,h){return{type:"class",parts:a,inverted:b,ignoreCase:h}}function r(a){var b=ra[a],f;if(!b){for(f=a-1;!ra[f];)f--;b=ra[f];for(b={line:b.line,column:b.column};f<a;)10===d.charCodeAt(f)?(b.line++,b.column=1):b.column++,f++;ra[a]=b}return b}function H(a,b){var f=r(a),q=r(b);return{start:{offset:a,
line:f.line,column:f.column},end:{offset:b,line:q.line,column:q.column}}}function m(a){b<I||(b>I&&(I=b,Ea=[]),Ea.push(a))}function z(){var f,q,h;f=b;q=n();q!==a?(q=F(),q!==a?(h=n(),h!==a?f=q:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function la(){var f,q,h,d,c,e,g,l;f=b;q=F();if(q!==a){h=[];d=b;c=n();c!==a?(e=ma(),e!==a?(g=n(),g!==a?(l=F(),l!==a?d=c=[c,e,g,l]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(e=ma(),e!==a?(g=n(),g!==a?(l=F(),l!==a?d=c=[c,e,g,l]:(b=d,
d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);if(h!==a){f={type:"expr_list"};q=[q];for(d=0;d<h.length;d++)q.push(h[d][3]);f.value=q}else b=f,f=a}else b=f,f=a;return f}function F(){var f,q,h,d,c,e,g,l;f=b;q=fa();if(q!==a){h=[];d=b;c=n();c!==a?(e=Qa(),e!==a?(g=n(),g!==a?(l=fa(),l!==a?d=c=[c,e,g,l]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(e=Qa(),e!==a?(g=n(),g!==a?(l=fa(),l!==a?d=c=[c,e,g,l]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);h!==a?f=q=ca(q,h):(b=f,f=a)}else b=
f,f=a;return f}function fa(){var f,d,h,c,e,g,l,p;f=b;d=J();if(d!==a){h=[];c=b;e=n();e!==a?(g=ga(),g!==a?(l=n(),l!==a?(p=J(),p!==a?c=e=[e,g,l,p]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);for(;c!==a;)h.push(c),c=b,e=n(),e!==a?(g=ga(),g!==a?(l=n(),l!==a?(p=J(),p!==a?c=e=[e,g,l,p]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);h!==a?f=d=ca(d,h):(b=f,f=a)}else b=f,f=a;return f}function J(){var f,q,h,c,g;f=b;q=ba();q===a&&(q=b,33===d.charCodeAt(b)?(h=ad,b++):(h=a,0===l&&m(bd)),h!==a?(c=b,l++,61===d.charCodeAt(b)?
(g=Ra,b++):(g=a,0===l&&m(Sa)),l--,g===a?c=void 0:(b=c,c=a),c!==a?q=h=[h,c]:(b=q,q=a)):(b=q,q=a));q!==a?(h=n(),h!==a?(c=J(),c!==a?f=q={type:"unary_expr",operator:"NOT",expr:c}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);if(f===a)if(f=b,q=G(),q!==a)if(h=n(),h!==a){var p,k,U;h=[];c=b;g=n();g!==a?(p=N(),p!==a?(k=n(),k!==a?(U=G(),U!==a?c=g=[g,p,k,U]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);if(c!==a)for(;c!==a;)h.push(c),c=b,g=n(),g!==a?(p=N(),p!==a?(k=n(),k!==a?(U=G(),U!==a?c=g=[g,p,k,U]:(b=c,c=a)):(b=c,c=a)):(b=
c,c=a)):(b=c,c=a);else h=a;h!==a&&(h={type:"arithmetic",tail:h});h===a&&(h=b,c=V(),c!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=la(),g!==a?(p=n(),p!==a?(p=P(),p!==a?h=c={op:c,right:g}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=V(),c!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=P(),g!==a?h=c={op:c,right:{type:"expr_list",value:[]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=V(),c!==a?(g=n(),g!==a?(g=Ta(),g!==a?h=c={op:c,right:g}:
(b=h,h=a)):(b=h,h=a)):(b=h,h=a))),h===a&&(h=b,g=ba(),g!==a?(c=n(),c!==a?(c=Ua(),c!==a?(p=n(),p!==a?(p=G(),p!==a?(k=n(),k!==a?(k=ga(),k!==a?(g=n(),g!==a?(g=G(),g!==a?h=g={op:"NOT"+c,right:{type:"expr_list",value:[p,g]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g=Ua(),g!==a?(c=n(),c!==a?(c=G(),c!==a?(p=n(),p!==a?(p=ga(),p!==a?(k=n(),k!==a?(k=G(),k!==a?h=g={op:g,right:{type:"expr_list",value:[c,k]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):
(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=Va(),c!==a?(g=n(),g!==a?(g=ba(),g!==a?(g=n(),g!==a?(g=G(),g!==a?h=c={op:c+"NOT",right:g}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=Va(),c!==a?(g=n(),g!==a?(g=G(),g!==a?h=c={op:c,right:g}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=na(),c!==a?(g=n(),g!==a?(g=e(),g!==a?(p=n(),p!==a?(p=b,d.substr(b,6).toLowerCase()===cd?(k=d.substr(b,6),b+=6):(k=a,0===l&&m(dd)),k!==a?(k=b,l++,U=v(),l--,U===a?k=void 0:(b=k,k=a),k!==
a?p="ESCAPE":(b=p,p=a)):(b=p,p=a),p!==a?(p=n(),p!==a?(p=sa(),p!==a?h=c={op:c,right:g,escape:p.value}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=na(),c!==a?(g=n(),g!==a?(g=e(),g!==a?h=c={op:c,right:g,escape:""}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a))))));h===a&&(h=null);h!==a?(f=q,q=h,""==q||void 0==q||null==q?q=f:(h=null,q=h="arithmetic"==q.type?ca(f,q.tail):Wa(q.op,f,q.right,q.escape)),f=q):(b=f,f=a)}else b=f,f=a;else b=f,f=a;return f}function N(){var f;d.substr(b,
2)===Xa?(f=Xa,b+=2):(f=a,0===l&&m(ed));f===a&&(62===d.charCodeAt(b)?(f=fd,b++):(f=a,0===l&&m(gd)),f===a&&(d.substr(b,2)===Ya?(f=Ya,b+=2):(f=a,0===l&&m(hd)),f===a&&(d.substr(b,2)===Za?(f=Za,b+=2):(f=a,0===l&&m(id)),f===a&&(60===d.charCodeAt(b)?(f=jd,b++):(f=a,0===l&&m(kd)),f===a&&(61===d.charCodeAt(b)?(f=Ra,b++):(f=a,0===l&&m(Sa)),f===a&&(d.substr(b,2)===$a?(f=$a,b+=2):(f=a,0===l&&m(ld))))))));return f}function na(){var f,c,d,e;f=f=b;c=ba();c!==a?(d=n(),d!==a?(e=ab(),e!==a?f=c=[c,d,e]:(b=f,f=a)):(b=
f,f=a)):(b=f,f=a);f!==a&&(f=f[0]+" "+f[2]);f===a&&(f=ab());return f}function V(){var f,c,d,e;f=f=b;c=ba();c!==a?(d=n(),d!==a?(e=dc(),e!==a?f=c=[c,d,e]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);f!==a&&(f=f[0]+" "+f[2]);f===a&&(f=dc());return f}function G(){var f,c,d,e,g,l,p,k;f=b;c=K();if(c!==a){d=[];e=b;g=n();g!==a?(l=S(),l!==a?(p=n(),p!==a?(k=K(),k!==a?e=g=[g,l,p,k]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);for(;e!==a;)d.push(e),e=b,g=n(),g!==a?(l=S(),l!==a?(p=n(),p!==a?(k=K(),k!==a?e=g=[g,l,p,k]:(b=e,e=
a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);d!==a?f=c=ca(c,d):(b=f,f=a)}else b=f,f=a;return f}function S(){var f;43===d.charCodeAt(b)?(f=ec,b++):(f=a,0===l&&m(fc));f===a&&(45===d.charCodeAt(b)?(f=gc,b++):(f=a,0===l&&m(hc)));return f}function K(){var f,c,d,e,g,l,p,k;f=b;c=T();if(c!==a){d=[];e=b;g=n();g!==a?(l=ha(),l!==a?(p=n(),p!==a?(k=T(),k!==a?e=g=[g,l,p,k]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);for(;e!==a;)d.push(e),e=b,g=n(),g!==a?(l=ha(),l!==a?(p=n(),p!==a?(k=T(),k!==a?e=g=[g,l,p,k]:(b=e,e=a)):(b=
e,e=a)):(b=e,e=a)):(b=e,e=a);d!==a?f=c=ca(c,d):(b=f,f=a)}else b=f,f=a;return f}function ha(){var f;42===d.charCodeAt(b)?(f=md,b++):(f=a,0===l&&m(nd));f===a&&(47===d.charCodeAt(b)?(f=od,b++):(f=a,0===l&&m(pd)));return f}function T(){var f,c,h,g,p,k,r;r=sa();if(r===a){var u,z,C,H;u=b;var B,L,G,K;B=b;L=Bb();L!==a?(G=xc(),G!==a?(K=yc(),K!==a?B=L=parseFloat(L+G+K):(b=B,B=a)):(b=B,B=a)):(b=B,B=a);B===a&&(B=b,L=Bb(),L!==a?(G=xc(),G!==a?B=L=parseFloat(L+G):(b=B,B=a)):(b=B,B=a),B===a&&(B=b,L=Bb(),L!==a?(G=
yc(),G!==a?B=L=parseFloat(L+G):(b=B,B=a)):(b=B,B=a),B===a&&(B=b,L=Bb(),L!==a&&(L=parseFloat(L)),B=L)));z=B;z!==a?(C=b,l++,H=Fa(),l--,H===a?C=void 0:(b=C,C=a),C!==a?u=z={type:"number",value:z}:(b=u,u=a)):(b=u,u=a);r=u;if(r===a){var I,J;I=b;var N,T,R,fa;N=b;d.substr(b,4).toLowerCase()===qd?(T=d.substr(b,4),b+=4):(T=a,0===l&&m(rd));T!==a?(R=b,l++,fa=v(),l--,fa===a?R=void 0:(b=R,R=a),R!==a?N=T=[T,R]:(b=N,N=a)):(b=N,N=a);J=N;J!==a&&(J={type:"bool",value:!0});I=J;if(I===a){I=b;var ta,V,S,ka;ta=b;d.substr(b,
5).toLowerCase()===sd?(V=d.substr(b,5),b+=5):(V=a,0===l&&m(td));V!==a?(S=b,l++,ka=v(),l--,ka===a?S=void 0:(b=S,S=a),S!==a?ta=V=[V,S]:(b=ta,ta=a)):(b=ta,ta=a);J=ta;J!==a&&(J={type:"bool",value:!1});I=J}r=I;if(r===a){var ca,ua,ba,Ga,na;ua=b;d.substr(b,4).toLowerCase()===ud?(ba=d.substr(b,4),b+=4):(ba=a,0===l&&m(vd));ba!==a?(Ga=b,l++,na=v(),l--,na===a?Ga=void 0:(b=Ga,Ga=a),Ga!==a?ua=ba=[ba,Ga]:(b=ua,ua=a)):(b=ua,ua=a);ca=ua;ca!==a&&(ca={type:"null",value:null});r=ca;if(r===a){var ia,ha,ra,ma;ia=b;var va,
ga,bb,Da;va=b;d.substr(b,4).toLowerCase()===wd?(ga=d.substr(b,4),b+=4):(ga=a,0===l&&m(xd));ga!==a?(bb=b,l++,Da=v(),l--,Da===a?bb=void 0:(b=bb,bb=a),bb!==a?va=ga="DATE":(b=va,va=a)):(b=va,va=a);ha=va;ha!==a?(ra=n(),ra!==a?(ma=e(),ma!==a?ia=ha={type:"date",value:ma.value}:(b=ia,ia=a)):(b=ia,ia=a)):(b=ia,ia=a);r=ia;if(r===a){var ja,qa,Ea,ic;ja=b;var wa,Cb,cb,Qa;wa=b;d.substr(b,9).toLowerCase()===yd?(Cb=d.substr(b,9),b+=9):(Cb=a,0===l&&m(zd));Cb!==a?(cb=b,l++,Qa=v(),l--,Qa===a?cb=void 0:(b=cb,cb=a),cb!==
a?wa=Cb="TIMESTAMP":(b=wa,wa=a)):(b=wa,wa=a);qa=wa;qa!==a?(Ea=n(),Ea!==a?(ic=e(),ic!==a?ja=qa={type:"timestamp",value:ic.value}:(b=ja,ja=a)):(b=ja,ja=a)):(b=ja,ja=a);r=ja;if(r===a){var x,Ha,Db,da,Eb,Ia,Ra,jc;x=b;Ha=zc();Ha!==a?(Db=n(),Db!==a?(45===d.charCodeAt(b)?(da=gc,b++):(da=a,0===l&&m(hc)),da===a&&(43===d.charCodeAt(b)?(da=ec,b++):(da=a,0===l&&m(fc))),da!==a?(Eb=n(),Eb!==a?(Ia=e(),Ia!==a?(Ra=n(),Ra!==a?(jc=Fb(),jc!==a?x=Ha={type:"interval",value:Ia,qualifier:jc,op:da}:(b=x,x=a)):(b=x,x=a)):(b=
x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a);x===a&&(x=b,Ha=zc(),Ha!==a?(Db=n(),Db!==a?(da=e(),da!==a?(Eb=n(),Eb!==a?(Ia=Fb(),Ia!==a?x=Ha={type:"interval",value:da,qualifier:Ia,op:""}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a));r=x}}}}}}f=r;if(f===a){var D,kc,Sa,Ua,Va,lc,Wa,Xa,Ya,mc,Za,$a;D=b;var xa,Gb,db,ab;xa=b;d.substr(b,7).toLowerCase()===Ad?(Gb=d.substr(b,7),b+=7):(Gb=a,0===l&&m(Bd));Gb!==a?(db=b,l++,ab=v(),l--,ab===a?db=void 0:(b=db,db=a),db!==a?xa=Gb="EXTRACT":(b=xa,xa=a)):
(b=xa,xa=a);kc=xa;if(kc!==a)if(Sa=n(),Sa!==a)if(Ua=O(),Ua!==a)if(Va=n(),Va!==a){var W;W=Ac();W===a&&(W=Bc(),W===a&&(W=Cc(),W===a&&(W=Dc(),W===a&&(W=Ec(),W===a&&(W=ya())))));lc=W;lc!==a?(Wa=n(),Wa!==a?(Xa=nc(),Xa!==a?(Ya=n(),Ya!==a?(mc=F(),mc!==a?(Za=n(),Za!==a?($a=P(),$a!==a?D=kc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:lc},mc]}}:(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)}else b=D,D=a;else b=D,D=a;else b=D,D=a;else b=D,D=a;
f=D;if(f===a){var A,oc,nb,ob,pb,Hb,qb,rb,sb,Ib,tb,Q,Ja,pc,qc,rc;A=b;var za,Jb,eb,ub;za=b;d.substr(b,9).toLowerCase()===Cd?(Jb=d.substr(b,9),b+=9):(Jb=a,0===l&&m(Dd));Jb!==a?(eb=b,l++,ub=v(),l--,ub===a?eb=void 0:(b=eb,eb=a),eb!==a?za=Jb="SUBSTRING":(b=za,za=a)):(b=za,za=a);oc=za;if(oc!==a)if(nb=n(),nb!==a)if(ob=O(),ob!==a)if(pb=n(),pb!==a)if(Hb=F(),Hb!==a)if(qb=n(),qb!==a)if(rb=nc(),rb!==a)if(sb=n(),sb!==a)if(Ib=F(),Ib!==a)if(tb=n(),tb!==a){Q=b;var Aa,Kb,fb,vb;Aa=b;d.substr(b,3).toLowerCase()===Ed?
(Kb=d.substr(b,3),b+=3):(Kb=a,0===l&&m(Fd));Kb!==a?(fb=b,l++,vb=v(),l--,vb===a?fb=void 0:(b=fb,fb=a),fb!==a?Aa=Kb="FOR":(b=Aa,Aa=a)):(b=Aa,Aa=a);Ja=Aa;Ja!==a?(pc=n(),pc!==a?(qc=F(),qc!==a?(rc=n(),rc!==a?Q=Ja=[Ja,pc,qc,rc]:(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a);Q===a&&(Q=null);Q!==a?(Ja=P(),Ja!==a?A=oc={type:"function",name:"substring",args:{type:"expr_list",value:Q?[Hb,Ib,Q[2]]:[Hb,Ib]}}:(b=A,A=a)):(b=A,A=a)}else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=
A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;f=A;if(f===a){var t,Ka,Lb,Mb,Nb,X,Ob,La,Pb,Qb,wb,sc,xb,yb;t=b;Ka=Fc();Ka!==a?(Lb=n(),Lb!==a?(Mb=O(),Mb!==a?(Nb=n(),Nb!==a?(X=Rb(),X===a&&(X=null),X!==a?(Ob=n(),Ob!==a?(La=F(),La!==a?(Pb=n(),Pb!==a?(Qb=nc(),Qb!==a?(wb=n(),wb!==a?(sc=F(),sc!==a?(xb=n(),xb!==a?(yb=P(),yb!==a?t=Ka={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},La,sc]}}:(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,
t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a);t===a&&(t=b,Ka=Fc(),Ka!==a?(Lb=n(),Lb!==a?(Mb=O(),Mb!==a?(Nb=n(),Nb!==a?(X=Rb(),X===a&&(X=null),X!==a?(Ob=n(),Ob!==a?(La=F(),La!==a?(Pb=n(),Pb!==a?(Qb=P(),Qb!==a?t=Ka={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},La]}}:(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a));f=t;if(f===a){var E,tc,zb,Ab,Gc,uc,Hc,Ic,Jc,vc,Kc,Lc;E=b;var Ba,
Sb,gb,Mc;Ba=b;d.substr(b,8).toLowerCase()===Gd?(Sb=d.substr(b,8),b+=8):(Sb=a,0===l&&m(Hd));Sb!==a?(gb=b,l++,Mc=v(),l--,Mc===a?gb=void 0:(b=gb,gb=a),gb!==a?Ba=Sb="POSITION":(b=Ba,Ba=a)):(b=Ba,Ba=a);tc=Ba;tc!==a?(zb=n(),zb!==a?(Ab=O(),Ab!==a?(Gc=n(),Gc!==a?(uc=F(),uc!==a?(Hc=n(),Hc!==a?(Ic=dc(),Ic!==a?(Jc=n(),Jc!==a?(vc=F(),vc!==a?(Kc=n(),Kc!==a?(Lc=P(),Lc!==a?E=tc={type:"function",name:"position",args:{type:"expr_list",value:[uc,vc]}}:(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):
(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a);f=E;if(f===a){var M,Tb,Nc,Oc,Pc,Ma,Qc,Rc;M=b;var Y,hb,ib,ea;Y=b;Y=hb=jb();if(Y===a)if(Y=b,96===d.charCodeAt(b)?(hb=Sc,b++):(hb=a,0===l&&m(Tc)),hb!==a){ib=[];Uc.test(d.charAt(b))?(ea=d.charAt(b),b++):(ea=a,0===l&&m(Vc));if(ea!==a)for(;ea!==a;)ib.push(ea),Uc.test(d.charAt(b))?(ea=d.charAt(b),b++):(ea=a,0===l&&m(Vc));else ib=a;ib!==a?(96===d.charCodeAt(b)?(ea=Sc,b++):(ea=a,0===l&&m(Tc)),ea!==a?Y=hb=ib.join(""):(b=Y,Y=a)):(b=Y,Y=a)}else b=Y,Y=a;Tb=
Y;Tb!==a?(Nc=n(),Nc!==a?(Oc=O(),Oc!==a?(Pc=n(),Pc!==a?(Ma=la(),Ma===a&&(Ma=null),Ma!==a?(Qc=n(),Qc!==a?(Rc=P(),Rc!==a?M=Tb={type:"function",name:Tb,args:Ma?Ma:{type:"expr_list",value:[]}}:(b=M,M=a)):(b=M,M=a)):(b=M,M=a)):(b=M,M=a)):(b=M,M=a)):(b=M,M=a)):(b=M,M=a);f=M;if(f===a){var Ub,w,Na,Vb,Oa,Wb,oa,Z,kb,Wc,Xc;w=b;Na=Xb();if(Na!==a)if(Vb=n(),Vb!==a)if(Oa=F(),Oa!==a)if(Wb=n(),Wb!==a){oa=[];for(Z=Yb();Z!==a;)oa.push(Z),Z=Yb();oa!==a?(Z=n(),Z!==a?(kb=Zb(),kb!==a?w=Na={type:"case_expression",format:"simple",
operand:Oa,clauses:oa,else:null}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=a;else b=w,w=a;else b=w,w=a;else b=w,w=a;if(w===a)if(w=b,Na=Xb(),Na!==a)if(Vb=n(),Vb!==a)if(Oa=F(),Oa!==a)if(Wb=n(),Wb!==a){oa=[];for(Z=Yb();Z!==a;)oa.push(Z),Z=Yb();oa!==a?(Z=n(),Z!==a?(kb=Yc(),kb!==a?(Wc=n(),Wc!==a?(Xc=Zb(),Xc!==a?w=Na={type:"case_expression",format:"simple",operand:Oa,clauses:oa,else:kb.value}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=a;else b=w,w=a;else b=w,w=a;else b=w,w=a;Ub=w;
if(Ub===a){var y,Pa,$b,pa,aa,lb,Zc,$c;y=b;Pa=Xb();if(Pa!==a)if($b=n(),$b!==a){pa=[];for(aa=U();aa!==a;)pa.push(aa),aa=U();pa!==a?(aa=n(),aa!==a?(lb=Zb(),lb!==a?y=Pa={type:"case_expression",format:"searched",clauses:pa,else:null}:(b=y,y=a)):(b=y,y=a)):(b=y,y=a)}else b=y,y=a;else b=y,y=a;if(y===a)if(y=b,Pa=Xb(),Pa!==a)if($b=n(),$b!==a){pa=[];for(aa=U();aa!==a;)pa.push(aa),aa=U();pa!==a?(aa=n(),aa!==a?(lb=Yc(),lb!==a?(Zc=n(),Zc!==a?($c=Zb(),$c!==a?y=Pa={type:"case_expression",format:"searched",clauses:pa,
else:lb.value}:(b=y,y=a)):(b=y,y=a)):(b=y,y=a)):(b=y,y=a)):(b=y,y=a)}else b=y,y=a;else b=y,y=a;Ub=y}f=Ub;if(f===a){var mb,Ca,wc,ac,bc;Ca=b;wc=Fa();if(wc!==a){ac=[];for(bc=cc();bc!==a;)ac.push(bc),bc=cc();ac!==a?Ca=wc+=ac.join(""):(b=Ca,Ca=a)}else b=Ca,Ca=a;mb=Ca;mb!==a&&(mb={type:"column_ref",table:"",column:mb});f=mb;f===a&&(f=Ta(),f===a&&(f=b,c=O(),c!==a?(h=n(),h!==a?(g=F(),g!==a?(p=n(),p!==a?(k=P(),k!==a?(g.paren=!0,f=c=g):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)))}}}}}}}return f}
function jb(){var f,c,d,e;f=b;c=Fa();if(c!==a){d=[];for(e=v();e!==a;)d.push(e),e=v();d!==a?f=c+=d.join(""):(b=f,f=a)}else b=f,f=a;return f}function Fa(){var f;Id.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Jd));return f}function v(){var f;Kd.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Ld));return f}function cc(){var f;Md.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Nd));return f}function Ta(){var f,c,h;f=b;64===d.charCodeAt(b)?(c=Od,b++):(c=a,0===l&&m(Pd));c!==a?(h=jb(),h!==
a?f=c=[c,h]:(b=f,f=a)):(b=f,f=a);f!==a&&(f={type:"param",value:f[1]});return f}function Rb(){var f,c,h;f=b;d.substr(b,7).toLowerCase()===Qd?(c=d.substr(b,7),b+=7):(c=a,0===l&&m(Rd));c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="LEADING":(b=f,f=a)):(b=f,f=a);f===a&&(f=b,d.substr(b,8).toLowerCase()===Sd?(c=d.substr(b,8),b+=8):(c=a,0===l&&m(Td)),c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="TRAILING":(b=f,f=a)):(b=f,f=a),f===a&&(f=b,d.substr(b,4).toLowerCase()===Ud?(c=d.substr(b,
4),b+=4):(c=a,0===l&&m(Vd)),c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="BOTH":(b=f,f=a)):(b=f,f=a)));return f}function Fb(){var f,q,h;f=b;var e,g;q=b;h=R();h!==a?(e=n(),e!==a?(e=O(),e!==a?(e=n(),e!==a?(e=c(),e!==a?(g=n(),g!==a?(g=P(),g!==a?q=h={type:"interval-period",period:h.value,precision:e,secondary:null}:(b=q,q=a)):(b=q,q=a)):(b=q,q=a)):(b=q,q=a)):(b=q,q=a)):(b=q,q=a)):(b=q,q=a);q===a&&(q=b,h=R(),h!==a&&(h=nb(h)),q=h);if(q!==a)if(h=n(),h!==a)if(h=b,d.substr(b,2).toLowerCase()===
Wd?(e=d.substr(b,2),b+=2):(e=a,0===l&&m(Xd)),e!==a?(e=b,l++,g=v(),l--,g===a?e=void 0:(b=e,e=a),e!==a?h="TO":(b=h,h=a)):(b=h,h=a),h!==a)if(h=n(),h!==a){var k;h=b;e=R();e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null});h=e;h===a&&(h=b,e=ya(),e!==a?(e=n(),e!==a?(e=O(),e!==a?(e=n(),e!==a?(e=c(),e!==a?(g=n(),g!==a?(g=ma(),g!==a?(g=n(),g!==a?(g=p(),g!==a?(k=n(),k!==a?(k=P(),k!==a?h=e=ob(e,g):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,
h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,e=ya(),e!==a?(e=n(),e!==a?(e=O(),e!==a?(e=n(),e!==a?(e=c(),e!==a?(g=n(),g!==a?(g=P(),g!==a?h=e={type:"interval-period",period:"second",precision:e,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,e=ya(),e!==a&&(e={type:"interval-period",period:"second",precision:null,secondary:null}),h=e)));h!==a?f=q={type:"interval-qualifier",start:q,end:h}:(b=f,f=a)}else b=f,f=a;else b=f,f=a;else b=f,f=a;else b=
f,f=a;f===a&&(f=b,h=R(),h!==a?(q=n(),q!==a?(q=O(),q!==a?(q=n(),q!==a?(q=p(),q!==a?(e=n(),e!==a?(e=P(),e!==a?f=h={type:"interval-period",period:h.value,precision:q,secondary:null}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=R(),h!==a&&(h=nb(h)),f=h,f===a&&(f=b,h=ya(),h!==a?(q=n(),q!==a?(q=O(),q!==a?(q=n(),q!==a?(q=c(),q!==a?(e=n(),e!==a?(e=ma(),e!==a?(h=n(),h!==a?(h=p(),h!==a?(e=n(),e!==a?(e=P(),e!==a?f=h=ob(q,h):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=
a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=ya(),h!==a?(q=n(),q!==a?(q=O(),q!==a?(q=n(),q!==a?(q=p(),q!==a?(e=n(),e!==a?(e=P(),e!==a?f=h={type:"interval-period",period:"second",precision:q,secondary:null}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=ya(),h!==a&&(h={type:"interval-period",period:"second",precision:null,secondary:null}),f=h)))));return f}function R(){var f;f=b;f=Cc();f!==a&&(f={type:"string",
value:"day"});f===a&&(f=b,f=Dc(),f!==a&&(f={type:"string",value:"hour"}),f===a&&(f=b,f=Ec(),f!==a&&(f={type:"string",value:"minute"}),f===a&&(f=b,f=Bc(),f!==a&&(f={type:"string",value:"month"}),f===a&&(f=b,f=Ac(),f!==a&&(f={type:"string",value:"year"})))));return f}function p(){var b;b=ka();b!==a&&(b=parseFloat(b));return b}function c(){var b;b=ka();b!==a&&(b=parseFloat(b));return b}function e(){var b;b=sa();b===a&&(b=Ta());return b}function sa(){var f,c,h;f=b;39===d.charCodeAt(b)?(c=pb,b++):(c=a,
0===l&&m(qb));c===a&&(d.substr(b,2)===rb?(c=rb,b+=2):(c=a,0===l&&m(Yd)));if(c!==a){c=[];h=b;d.substr(b,2)===Da?(h=Da,b+=2):(h=a,0===l&&m(sb));h!==a&&(h="'");h===a&&(tb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(ub)));for(;h!==a;)c.push(h),h=b,d.substr(b,2)===Da?(h=Da,b+=2):(h=a,0===l&&m(sb)),h!==a&&(h="'"),h===a&&(tb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(ub)));c!==a?(39===d.charCodeAt(b)?(h=pb,b++):(h=a,0===l&&m(qb)),h!==a?f=c={type:"string",value:c.join("")}:(b=f,f=a)):(b=
f,f=a)}else b=f,f=a;return f}function U(){var f,c,d;f=b;c=vb();c!==a?(c=n(),c!==a?(c=F(),c!==a?(d=n(),d!==a?(d=wb(),d!==a?(d=n(),d!==a?(d=F(),d!==a?f=c={type:"when_clause",operand:c,value:d}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function Yb(){var f,c,d;f=b;c=vb();c!==a?(c=n(),c!==a?(c=F(),c!==a?(d=n(),d!==a?(d=wb(),d!==a?(d=n(),d!==a?(d=F(),d!==a?f=c={type:"when_clause",operand:c,value:d}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=
a)):(b=f,f=a);return f}function Yc(){var f,c;f=b;var h,e;c=b;d.substr(b,4).toLowerCase()===Zd?(h=d.substr(b,4),b+=4):(h=a,0===l&&m($d));h!==a?(h=b,l++,e=v(),l--,e===a?h=void 0:(b=h,h=a),h!==a?c="ELSE":(b=c,c=a)):(b=c,c=a);c!==a?(c=n(),c!==a?(c=F(),c!==a?f={type:"else_clause",value:c}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function Bb(){var f,c,h;f=ka();f===a&&(f=b,45===d.charCodeAt(b)?(c=gc,b++):(c=a,0===l&&m(hc)),c===a&&(43===d.charCodeAt(b)?(c=ec,b++):(c=a,0===l&&m(fc))),c!==a?(h=ka(),h!==a?f=
c=c[0]+h:(b=f,f=a)):(b=f,f=a));return f}function xc(){var f,c;f=b;46===d.charCodeAt(b)?(c=ae,b++):(c=a,0===l&&m(be));c!==a?(c=ka(),c===a&&(c=null),c!==a?f="."+(null!=c?c:""):(b=f,f=a)):(b=f,f=a);return f}function yc(){var f,c,h;c=f=b;ce.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(de));h!==a?(ee.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(fe)),h===a&&(h=null),h!==a?c="e"+(null===h?"":h):(b=c,c=a)):(b=c,c=a);c!==a?(h=ka(),h!==a?f=c+h:(b=f,f=a)):(b=f,f=a);return f}function ka(){var b,
c;b=[];c=xb();if(c!==a)for(;c!==a;)b.push(c),c=xb();else b=a;b!==a&&(b=b.join(""));return b}function xb(){var f;ge.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(he));return f}function dc(){var f,c,h;f=b;d.substr(b,2).toLowerCase()===ie?(c=d.substr(b,2),b+=2):(c=a,0===l&&m(je));c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="IN":(b=f,f=a)):(b=f,f=a);return f}function Va(){var f,c,h;f=b;d.substr(b,2).toLowerCase()===ke?(c=d.substr(b,2),b+=2):(c=a,0===l&&m(le));c!==a?(c=b,l++,h=v(),
l--,h===a?c=void 0:(b=c,c=a),c!==a?f="IS":(b=f,f=a)):(b=f,f=a);return f}function ab(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===me?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(ne));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="LIKE":(b=c,c=a)):(b=c,c=a);return c}function ba(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===oe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(pe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="NOT":(b=c,c=a)):(b=c,c=a);return c}function ga(){var c,e,h;c=b;d.substr(b,
3).toLowerCase()===qe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(re));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="AND":(b=c,c=a)):(b=c,c=a);return c}function Qa(){var c,e,h;c=b;d.substr(b,2).toLowerCase()===se?(e=d.substr(b,2),b+=2):(e=a,0===l&&m(te));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="OR":(b=c,c=a)):(b=c,c=a);return c}function Ua(){var c,e,h;c=b;d.substr(b,7).toLowerCase()===ue?(e=d.substr(b,7),b+=7):(e=a,0===l&&m(ve));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,
e=a),e!==a?c="BETWEEN":(b=c,c=a)):(b=c,c=a);return c}function nc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===we?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(xe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="FROM":(b=c,c=a)):(b=c,c=a);return c}function Fc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===ye?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(ze));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="TRIM":(b=c,c=a)):(b=c,c=a);return c}function zc(){var c,e,h;c=b;d.substr(b,8).toLowerCase()===
Ae?(e=d.substr(b,8),b+=8):(e=a,0===l&&m(Be));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="INTERVAL":(b=c,c=a)):(b=c,c=a);return c}function Ac(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ce?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(De));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="YEAR":(b=c,c=a)):(b=c,c=a);return c}function Bc(){var c,e,h;c=b;d.substr(b,5).toLowerCase()===Ee?(e=d.substr(b,5),b+=5):(e=a,0===l&&m(Fe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?
c="MONTH":(b=c,c=a)):(b=c,c=a);return c}function Cc(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===Ge?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(He));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="DAY":(b=c,c=a)):(b=c,c=a);return c}function Dc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ie?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Je));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="HOUR":(b=c,c=a)):(b=c,c=a);return c}function Ec(){var c,e,h;c=b;d.substr(b,6).toLowerCase()===Ke?(e=d.substr(b,
6),b+=6):(e=a,0===l&&m(Le));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="MINUTE":(b=c,c=a)):(b=c,c=a);return c}function ya(){var c,e,h;c=b;d.substr(b,6).toLowerCase()===Me?(e=d.substr(b,6),b+=6):(e=a,0===l&&m(Ne));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="SECOND":(b=c,c=a)):(b=c,c=a);return c}function Xb(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Oe?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Pe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="CASE":(b=c,c=a)):
(b=c,c=a);return c}function Zb(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===Qe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(Re));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="END":(b=c,c=a)):(b=c,c=a);return c}function vb(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Se?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Te));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="WHEN":(b=c,c=a)):(b=c,c=a);return c}function wb(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ue?(e=d.substr(b,4),b+=4):(e=
a,0===l&&m(Ve));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="THEN":(b=c,c=a)):(b=c,c=a);return c}function ma(){var c;44===d.charCodeAt(b)?(c=We,b++):(c=a,0===l&&m(Xe));return c}function O(){var c;40===d.charCodeAt(b)?(c=Ye,b++):(c=a,0===l&&m(Ze));return c}function P(){var c;41===d.charCodeAt(b)?(c=$e,b++):(c=a,0===l&&m(af));return c}function n(){var b,c;b=[];for(c=yb();c!==a;)b.push(c),c=yb();return b}function yb(){var c;bf.test(d.charAt(b))?(c=d.charAt(b),b++):(c=a,0===l&&m(cf));return c}
function Wa(a,b,c,e){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==e&&(a.escape=e);return a}function ca(a,b){for(var c=0;c<b.length;c++)a=Wa(b[c][1],a,b[c][3]);return a}u=void 0!==u?u:{};var a={},zb={start:z},Ab=z,ad="!",bd=g("!",!1),Ra="\x3d",Sa=g("\x3d",!1),Xa="\x3e\x3d",ed=g("\x3e\x3d",!1),fd="\x3e",gd=g("\x3e",!1),Ya="\x3c\x3d",hd=g("\x3c\x3d",!1),Za="\x3c\x3e",id=g("\x3c\x3e",!1),jd="\x3c",kd=g("\x3c",!1),$a="!\x3d",ld=g("!\x3d",!1),ec="+",fc=g("+",!1),gc="-",hc=g("-",!1),md="*",
nd=g("*",!1),od="/",pd=g("/",!1),Id=/^[A-Za-z_\x80-\uFFFF]/,Jd=k([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Kd=/^[A-Za-z0-9_]/,Ld=k([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Md=/^[A-Za-z0-9_.\x80-\uFFFF]/,Nd=k([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Od="@",Pd=g("@",!1),nb=function(a){return{type:"interval-period",period:a.value,precision:null,secondary:null}},ob=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},pb="'",qb=g("'",
!1),rb="N'",Yd=g("N'",!1),Da="''",sb=g("''",!1),tb=/^[^']/,ub=k(["'"],!0,!1),ae=".",be=g(".",!1),ge=/^[0-9]/,he=k([["0","9"]],!1,!1),ce=/^[eE]/,de=k(["e","E"],!1,!1),ee=/^[+\-]/,fe=k(["+","-"],!1,!1),ud="null",vd=g("NULL",!0),qd="true",rd=g("TRUE",!0),sd="false",td=g("FALSE",!0),ie="in",je=g("IN",!0),ke="is",le=g("IS",!0),me="like",ne=g("LIKE",!0),cd="escape",dd=g("ESCAPE",!0),oe="not",pe=g("NOT",!0),qe="and",re=g("AND",!0),se="or",te=g("OR",!0),ue="between",ve=g("BETWEEN",!0),we="from",xe=g("FROM",
!0),Ed="for",Fd=g("FOR",!0),Cd="substring",Dd=g("SUBSTRING",!0),Ad="extract",Bd=g("EXTRACT",!0),ye="trim",ze=g("TRIM",!0),Gd="position",Hd=g("POSITION",!0),yd="timestamp",zd=g("TIMESTAMP",!0),wd="date",xd=g("DATE",!0),Qd="leading",Rd=g("LEADING",!0),Sd="trailing",Td=g("TRAILING",!0),Ud="both",Vd=g("BOTH",!0),Wd="to",Xd=g("TO",!0),Ae="interval",Be=g("INTERVAL",!0),Ce="year",De=g("YEAR",!0),Ee="month",Fe=g("MONTH",!0),Ge="day",He=g("DAY",!0),Ie="hour",Je=g("HOUR",!0),Ke="minute",Le=g("MINUTE",!0),Me=
"second",Ne=g("SECOND",!0),Oe="case",Pe=g("CASE",!0),Qe="end",Re=g("END",!0),Se="when",Te=g("WHEN",!0),Ue="then",Ve=g("THEN",!0),Zd="else",$d=g("ELSE",!0),We=",",Xe=g(",",!1),Ye="(",Ze=g("(",!1),$e=")",af=g(")",!1),bf=/^[ \t\n\r]/,cf=k([" ","\t","\n","\r"],!1,!1),Sc="`",Tc=g("`",!1),Uc=/^[^`]/,Vc=k(["`"],!0,!1),b=0,ra=[{line:1,column:1}],I=0,Ea=[],l=0,qa;if("startRule"in u){if(!(u.startRule in zb))throw Error("Can't start parsing from rule \""+u.startRule+'".');Ab=zb[u.startRule]}qa=Ab();if(qa!==
a&&b===d.length)return qa;qa!==a&&b<d.length&&m({type:"end"});throw function(a,b,c){return new C(C.buildMessage(a,b),a,b,c)}(Ea,I<d.length?d.charAt(I):null,I<d.length?H(I,I+1):H(I,I));}}})},"*noref":1}});
define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(C,d,u,g,k,r,H,m){function z(d,c){d+="";return d.length>=c?d:Array(c-d.length+1).join("0")+d}function la(d,c,e,g,k,m,r,v,u){void 0===e&&(e="0");void 0===g&&(g="0");void 0===k&&(k="0");void 0===m&&(m="0");void 0===r&&(r="");void 0===v&&(v="0");void 0===u&&(u="0");return"+"===r||"-"===r?(d=z(parseInt(d,10),4)+"-"+z(parseInt(c,10),2)+"-"+z(parseInt(e,
10),2),c="",10>parseFloat(m)&&(c="0"),g=z(parseInt(g,10),2)+":"+z(parseInt(k,10),2)+":"+(c+parseFloat(m).toString()),r=""+r+z(parseInt(v,10),2)+":"+z(parseInt(u,10),2),new Date(d+"T"+g+r)):new Date(parseInt(d,10),parseInt(c,10),parseInt(e,10),parseInt(g,10),parseInt(k,10),parseFloat(m))}function F(d){var c=cc.exec(d);if(null!==c){d=c[1];var e=c[2],g=c[3],k=c[4],p=c[5],m=c[6];return la(d,e,g,k,p,m)}c=Ta.exec(d);if(null!==c){d=c[1];var e=c[2],g=c[3],k=c[4],p=c[5],m=c[6],r=c[7],u=c[8],c=c[9];return la(d,
e,g,k,p,m,r,u,c)}c=Rb.exec(d);if(null!==c)return d=c[1],e=c[2],g=c[3],k=c[4],p=c[5],r=c[6],u=c[7],c=c[8],la(d,e,g,k,p,"0",r,u,c);c=Fb.exec(d);if(null!==c)return d=c[1],e=c[2],g=c[3],k=c[4],p=c[5],la(d,e,g,k,p);c=v.exec(d);if(null!==c)return d=c[1],e=c[2],g=c[3],la(d,e,g);throw Error("SQL Invalid Timestamp");}function fa(d){d=v.exec(d);if(null===d)throw Error("SQL Invalid Date");var c=d[2],e=d[3];return new Date(parseInt(d[1],10),parseInt(c,10)-1,parseInt(e,10))}function J(d){return Array.isArray(d)?
d:[d]}function N(d){return null!==d?!0!==d:null}function na(d,c){return null!=d&&null!=c?!0===d&&!0===c:!1===d||!1===c?!1:null}function V(d,c){return null!=d&&null!=c?!0===d||!0===c:!0===d||!0===c?!0:null}function G(d,c){if(null==d)return null;for(var e=!1,g=0;g<c.length;g++){var k=c[g];if(null==k)e=null;else if(d===k){e=!0;break}}return e}function S(d,c,e){if(null==d)return null;for(var g="",k=0,p=0;p<c.length;p++){var m=c.charAt(p);switch(k){case 0:m===e?k=1:g=0<="-[]/{}()*+?.\\^$|".indexOf(m)?
g+("\\"+m):"%"===m?g+".*":"_"===m?g+".":g+m;break;case 1:g=0<="-[]/{}()*+?.\\^$|".indexOf(m)?g+("\\"+m):g+m,k=0}}return(new RegExp("^"+g+"$")).test(d)}function K(d){return d instanceof Date?d.valueOf():d}function ha(d,c,e){if(null==c||null==e)return null;c=K(c);e=K(e);switch(d){case "\x3c\x3e":return c!==e;case "\x3d":return c===e;case "\x3e":return c>e;case "\x3c":return c<e;case "\x3e\x3d":return c>=e;case "\x3c\x3d":return c<=e}}function T(d){for(var c=[],e={},g=0;g<d.length;g++){var k=d[g],m=
k.toLowerCase();void 0===e[m]&&(c.push(k),e[m]=1)}return c}function jb(d,c,e){if(c instanceof H.SqlInterval)if(e instanceof Date)switch(d){case "+":return new Date(c.valueInMilliseconds()+e.getTime());case "-":return c.valueInMilliseconds()-e.getTime();case "*":return c.valueInMilliseconds()*e.getTime();case "/":return c.valueInMilliseconds()/e.getTime()}else if(e instanceof H.SqlInterval)switch(d){case "+":return H.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()+e.valueInMilliseconds());
case "-":return H.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()-e.valueInMilliseconds());case "*":return c.valueInMilliseconds()*e.valueInMilliseconds();case "/":return c.valueInMilliseconds()/e.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(e instanceof H.SqlInterval)if(c instanceof Date)switch(d){case "+":return new Date(e.valueInMilliseconds()+c.getTime());case "-":return new Date(c.getTime()-e.valueInMilliseconds());case "*":return c.getTime()*e.valueInMilliseconds();
case "/":return c.getTime()/e.valueInMilliseconds()}else e=e.valueInMilliseconds();else if(c instanceof Date&&"number"===typeof e)switch(e*=864E5,c=c.getTime(),d){case "+":return new Date(c+e);case "-":return new Date(c-e);case "*":return new Date(c*e);case "/":return new Date(c/e)}else if(e instanceof Date&&"number"===typeof c)switch(c*=864E5,e=e.getTime(),d){case "+":return new Date(c+e);case "-":return new Date(c-e);case "*":return new Date(c*e);case "/":return new Date(c/e)}switch(d){case "+":return c+
e;case "-":return c-e;case "*":return c*e;case "/":return c/e}}function Fa(d,c,e,g){d=g.getAttribute(d,c);return null!=d&&1===e[c]?new Date(d):d}Object.defineProperty(d,"__esModule",{value:!0});var v=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,cc=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Ta=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Rb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,Fb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
R=function(){function d(){}d.makeBool=function(c){return!0===c};d.featureValue=function(c,d,g,k){return Fa(c,d,g,k)};d.equalsNull=function(c){return null===c};d.applyLike=function(c,d,g){return S(c,d,g)};d.ensureArray=function(c){return J(c)};d.applyIn=function(c,d){return G(c,d)};d.currentDate=function(){var c=new Date;c.setHours(0,0,0,0);return c};d.makeSqlInterval=function(c,d,g){return H.SqlInterval.createFromValueAndQualifer(c,d,g)};d.convertInterval=function(c){return c instanceof H.SqlInterval?
c.valueInMilliseconds():c};d.currentTimestamp=function(){return new Date};d.compare=function(c,d,g){return ha(c,d,g)};d.calculate=function(c,d,g){return jb(c,d,g)};d.makeComparable=function(c){return K(c)};d.evaluateFunction=function(c,d){return H.evaluateFunction(c,d)};d.lookup=function(c,d){c=d[c];return void 0===c?null:c};d.between=function(c,d){return null==c||null==d[0]||null==d[1]?null:c>=d[0]&&c<=d[1]};d.notbetween=function(c,d){return null==c||null==d[0]||null==d[1]?null:c<d[0]||c>d[1]};d.ternaryNot=
function(c){return N(c)};d.ternaryAnd=function(c,d){return na(c,d)};d.ternaryOr=function(c,d){return V(c,d)};return d}();C=function(){function p(c,d){this.fieldsIndex=d;this.datefields={};this.parameters={};this.parseTree=m.WhereGrammar.parse(c);c=this.extractExpressionInfo(d);d=c.isStandardized;var e=c.isAggregate;this.referencedFieldNames=c.referencedFieldNames;this.isStandardized=d;this.isAggregate=e}p.create=function(c,d){return new p(c,d)};Object.defineProperty(p.prototype,"fieldNames",{get:function(){return this.referencedFieldNames},
enumerable:!0,configurable:!0});p.prototype.testSet=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);for(var g={},k=function(d){g[d]=c.map(function(c){return e.getAttribute(c,d)})},m=0,p=this.fieldNames;m<p.length;m++)k(p[m]);return!!this.evaluateNode(this.parseTree,{attributes:g},d.defaultAttributeAdapter)};p.prototype.calculateValue=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);c=this.evaluateNode(this.parseTree,c,e);return c instanceof H.SqlInterval?c.valueInMilliseconds()/864E5:
c};p.prototype.calculateValueCompiled=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(c,this.parameters,e,this.datefields);if(k("csp-restrictions"))return this.calculateValue(c,e);this.compileMe();return this.parseTree._compiledVersion(c,this.parameters,e,this.datefields)};p.prototype.testFeature=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);return!!this.evaluateNode(this.parseTree,c,e)};p.prototype.testFeatureCompiled=
function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);if(void 0===this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(c,this.parameters,e,this.datefields);if(k("csp-restrictions"))return this.testFeature(c,e);this.compileMe();return!!this.parseTree._compiledVersion(c,this.parameters,e,this.datefields)};p.prototype.getFunctions=function(){var c=[];this.visitAll(this.parseTree,function(d){"function"===d.type&&c.push(d.name.toLowerCase())});return T(c)};p.prototype.getExpressions=
function(){var c=new g.default;this.visitAll(this.parseTree,function(d){if("function"===d.type){var e=d.name.toLowerCase();d=d.args.value[0];if("column_ref"===d.type){d=d.column;var g=e+"-"+d;c.has(g)||c.set(g,{aggregateType:e,field:d})}}});return u.from(c.values())};p.prototype.getVariables=function(){var c=[];this.visitAll(this.parseTree,function(d){"param"===d.type&&c.push(d.value.toLowerCase())});return T(c)};p.prototype.compileMe=function(){var c="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",c)).bind(R)};p.prototype.extractExpressionInfo=function(c){var d=this,g=[],k=!0,m=!0;this.visitAll(this.parseTree,function(e){switch(e.type){case "column_ref":var p=e.column.toUpperCase();if("CURRENT_DATE"!==p&&"CURRENT_TIMESTAMP"!==p){var sa=(p=c.get(e.column))&&p.name;!p||"date"!==p.type&&"esriFieldTypeDate"!==p.type||(d.datefields[p.name]=1);void 0!==sa?(g.push(sa),e.column=sa):g.push(e.column)}break;
case "function":p=e.name,e=e.args.value.length,k&&(k=H.isStandardized(p,e)),m&&(m=r.isAggregate(p,e))}});return{referencedFieldNames:T(g),isStandardized:k,isAggregate:m}};p.prototype.visitAll=function(c,d){if(null!=c)switch(d(c),c.type){case "when_clause":this.visitAll(c.operand,d);this.visitAll(c.value,d);break;case "case_expression":for(var e=0,g=c.clauses;e<g.length;e++){var k=g[e];this.visitAll(k,d)}"simple"===c.format&&this.visitAll(c.operand,d);null!==c.else&&this.visitAll(c.else,d);break;case "expr_list":e=
0;for(c=c.value;e<c.length;e++)k=c[e],this.visitAll(k,d);break;case "unary_expr":this.visitAll(c.expr,d);break;case "binary_expr":this.visitAll(c.left,d);this.visitAll(c.right,d);break;case "function":this.visitAll(c.args,d)}};p.prototype.evaluateNodeToJavaScript=function(c){switch(c.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(c.value)+", "+JSON.stringify(c.qualifier)+","+JSON.stringify(c.op)+")";case "case_expression":var d="";if("simple"===c.format)for(var g=
"this.makeComparable("+this.evaluateNodeToJavaScript(c.operand)+")",d="( ",k=0;k<c.clauses.length;k++)d+=" ("+g+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(c.clauses[k].operand)+")) ? ("+this.evaluateNodeToJavaScript(c.clauses[k].value)+") : ";else for(d="( ",k=0;k<c.clauses.length;k++)d+=" this.makeBool("+this.evaluateNodeToJavaScript(c.clauses[k].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(c.clauses[k].value)+") : ";d=null!==c.else?d+this.evaluateNodeToJavaScript(c.else):
d+"null";return d+" )";case "param":return"this.lookup("+JSON.stringify(c.value.toLowerCase())+",lookups)";case "expr_list":d="[";g=0;for(c=c.value;g<c.length;g++)k=c[g],"["!==d&&(d+=","),d+=this.evaluateNodeToJavaScript(k);return d+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(c.expr)+")";case "binary_expr":switch(c.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")";case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+
","+JSON.stringify(c.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(c.operator)+
","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")"}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(c.value);case "date":return"(new Date("+fa(c.value).getTime().toString()+"))";case "timestamp":return"(new Date("+F(c.value).getTime().toString()+"))";case "column_ref":return"CURRENT_DATE"===c.column.toUpperCase()?"this.currentDate()":"CURRENT_TIMESTAMP"===c.column.toUpperCase()?"this.currentTimestamp()":
"this.featureValue(feature,"+JSON.stringify(c.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(c.name)+","+this.evaluateNodeToJavaScript(c.args)+")"}throw Error("Unsupported sql syntax "+c.type);};p.prototype.evaluateNode=function(c,d,g){switch(c.type){case "interval":return d=this.evaluateNode(c.value,d,g),H.SqlInterval.createFromValueAndQualifer(d,c.qualifier,c.op);case "case_expression":if("simple"===c.format)for(var e=K(this.evaluateNode(c.operand,
d,g)),k=0;k<c.clauses.length;k++){if(e===K(this.evaluateNode(c.clauses[k].operand,d,g)))return this.evaluateNode(c.clauses[k].value,d,g)}else for(k=0;k<c.clauses.length;k++)if(!0===this.evaluateNode(c.clauses[k].operand,d,g))return this.evaluateNode(c.clauses[k].value,d,g);return null!==c.else?this.evaluateNode(c.else,d,g):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":e=[];k=0;for(c=c.value;k<c.length;k++){var m=c[k];e.push(this.evaluateNode(m,d,g))}return e;case "unary_expr":return N(this.evaluateNode(c.expr,
d,g));case "binary_expr":switch(c.operator){case "AND":return na(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "OR":return V(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(c.left,d,g);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(c.left,d,g);case "IN":return e=J(this.evaluateNode(c.right,d,g)),G(this.evaluateNode(c.left,
d,g),e);case "NOT IN":return e=J(this.evaluateNode(c.right,d,g)),N(G(this.evaluateNode(c.left,d,g),e));case "BETWEEN":return e=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==e||null==c[0]||null==c[1]?null:e>=K(c[0])&&e<=K(c[1]);case "NOTBETWEEN":return e=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==e||null==c[0]||null==c[1]?null:e<K(c[0])||e>K(c[1]);case "LIKE":return S(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g),c.escape);case "NOT LIKE":return N(S(this.evaluateNode(c.left,
d,g),this.evaluateNode(c.right,d,g),c.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return ha(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "-":case "+":case "*":case "/":return jb(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g))}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return c.value;case "date":return fa(c.value);case "timestamp":return F(c.value);
case "column_ref":return"CURRENT_DATE"===c.column.toUpperCase()?(m=new Date,m.setHours(0,0,0,0),m):"CURRENT_TIMESTAMP"===c.column.toUpperCase()?new Date:Fa(d,c.column,this.datefields,g);case "function":return d=this.evaluateNode(c.args,d,g),this.isAggregate?r.aggregateFunction(c.name,d):H.evaluateFunction(c.name,d)}throw Error("Unsupported sql syntax "+c.type);};return p}();d.WhereClause=C;d.defaultAttributeAdapter={getAttribute:function(d,c){return(d&&"object"===typeof d.attributes?d.attributes:
d)[c]}}});