// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Slider/nls/Slider ../intl ../core/Evented ../core/events ../core/maybe ../core/accessorSupport/decorators ../core/libs/pep/pep ./Widget ./Slider/SliderViewModel ./support/widget".split(" "),function(C,D,p,y,k,q,v,z,t,m,g,u,A,B,l){return function(w){function b(a){a=w.call(this)||this;a._activeLabelInputIndex=null;a._anchorElements=null;a._dragged=!1;a._dragStartInfo=
null;a._focusedAnchorIndex=null;a._isMinInputActive=!1;a._isMaxInputActive=!1;a._labelElements=[];a._segmentDragStartInfo=null;a._segmentElements=null;a._thumbElements=[];a._tickElements=[];a._trackHeight=null;a._trackWidth=null;a.extraNodes=[];a.draggableSegmentsEnabled=!0;a.label=q.widgetLabel;a.labelFormatFunction=null;a.labelInputsEnabled=!1;a.labels=null;a.labelsVisible=!1;a.max=null;a.min=null;a.precision=4;a.rangeLabelInputsEnabled=!1;a.rangeLabelsVisible=!1;a.snapOnClickEnabled=!0;a.steps=
null;a.thumbCreatedFunction=null;a.tickConfigs=null;a.trackElement=null;a.values=null;a.viewModel=new B;a._onAnchorPointerDown=a._onAnchorPointerDown.bind(a);a._onAnchorPointerMove=a._onAnchorPointerMove.bind(a);a._onAnchorPointerUp=a._onAnchorPointerUp.bind(a);a._onLabelPointerDown=a._onLabelPointerDown.bind(a);a._onLabelPointerUp=a._onLabelPointerUp.bind(a);a._onSegmentPointerDown=a._onSegmentPointerDown.bind(a);a._onSegmentPointerMove=a._onSegmentPointerMove.bind(a);a._onSegmentPointerUp=a._onSegmentPointerUp.bind(a);
a._onTrackPointerDown=a._onTrackPointerDown.bind(a);return a}y(b,w);Object.defineProperty(b.prototype,"layout",{set:function(a){"vertical"!==a&&(a="horizontal");this._set("layout",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){var a=this._activeLabelInputIndex,c=this._isMaxInputActive,d=this._isMinInputActive,e=this._segmentDragStartInfo,f=this.viewModel,e=m.isSome(this._dragStartInfo)||m.isSome(e);return null!==a||c||d?"editing":e?"dragging":f.state},
enumerable:!0,configurable:!0});b.prototype.render=function(){var a=this.label,c=this.state,d=this.trackElement,e=this.classes("esri-slider","esri-widget","horizontal"===this.layout?"esri-slider--horizontal":"esri-slider--vertical","disabled"===c?"esri-disabled":null);d&&(this._trackHeight=d.offsetHeight,this._trackWidth=d.offsetWidth);return l.tsx("div",{"aria-label":a,class:e,"touch-action":"none"},"disabled"!==c?this.renderContent():null)};b.prototype.renderContent=function(){return this.rangeLabelsVisible?
[this.renderMin(),this.renderSliderContainer(),this.renderMax()]:this.renderSliderContainer()};b.prototype.renderSliderContainer=function(){return l.tsx("div",{bind:this,class:"esri-slider__content"},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())};b.prototype.renderTrackElement=function(){return l.tsx("div",{afterCreate:this._afterTrackCreate,bind:this,class:"esri-slider__track","data-node-ref":"trackElement","touch-action":"none"},this.renderSegmentElements(),
this.renderAnchorElements())};b.prototype.renderSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){this._segmentElements=[];for(var a=this.values.length+1,c=[],d=0;d<a;d++)c.push(this.renderSegmentElement(d));return c}};b.prototype.renderSegmentElement=function(a){var c=this._trackHeight,d=this._trackWidth,e=this.draggableSegmentsEnabled,f=this.values,b="horizontal"===this.layout,h=b?d:c,c=a===f.length?null:a,r=m.isSome(c),d=0===a?null:a-1,x=m.isSome(d),g=r?this._calculatePositionFromValue(f[c]):
b?h:0,k=x?this._calculatePositionFromValue(f[d]):b?0:h,f=parseFloat((100*k/h).toFixed(5)),h=(g-k)/h,b=b?"transform: translate("+f+"%, 0px) scale("+h+", 1);":"transform: translate(0px, "+f+"%) scale(1, "+h+");",e=this.classes("esri-slider__segment","esri-slider__segment-"+a,e&&r&&x?"esri-slider__segment--interactive":null);return l.tsx("div",{afterCreate:this._afterSegmentCreate,bind:this,class:e,"data-max-thumb-index":c,"data-min-thumb-index":d,"data-segment-index":a,style:b,"touch-action":"none"})};
b.prototype.renderAnchorElements=function(){var a=this,c=this.trackElement,d=this.values;this._anchorElements=[];this._thumbElements=[];this._labelElements=[];return c&&d&&d.length?d.map(function(c,d){return a.renderAnchorElement(c,d)}):null};b.prototype.renderAnchorElement=function(a,c){var d=this._calculatePositionFromValue(a),d=this._calculateValueFromPosition(d);if(m.isSome(d)&&!isNaN(d)){var e=this._dragStartInfo,d=this.id,b=this.labelsVisible,n=this.layout,h=this.values,e=this.classes("esri-slider__anchor",
"esri-slider__anchor-"+c,e&&e.index===c?"esri-slider__anchor--moving":null),r=this.labels.values[c],k=this._calculatePositionStyleForElement(a),g=this._calculateValueBoundsForAnchor(c),p=g[0],g=g[1],r=2===h.length?0===c?v.substitute(q.rangeMinimum,{value:a}):v.substitute(q.rangeMaximum,{value:a}):r;return l.tsx("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,"aria-controls":1===h.length?null:0===c?d+"-handle-"+(c+1):c===h.length-1?d+"-handle-"+(c-1):d+"-handle-"+(c-
1)+" "+d+"-handle-"+(c+1),"aria-label":q.sliderValue,"aria-labelledby":b?d+"-label-"+c:null,"aria-orientation":n,"aria-valuemax":p.toString(),"aria-valuemin":g.toString(),"aria-valuenow":a.toString(),"aria-valuetext":r,bind:this,class:e,"data-thumb-index":c,"data-value":a,id:d+"-handle-"+c,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:k,tabIndex:0},l.tsx("span",{afterCreate:this._afterThumbCreate,bind:this,class:"esri-slider__thumb","data-thumb-index":c,"touch-action":"none"}),
b?this.renderThumbLabel(c):null)}};b.prototype.renderThumbLabel=function(a){var c=this.id,d=this.labels.values[a],e=this.classes("esri-slider__label",this.labelInputsEnabled?"esri-slider__label--interactive":null);return l.tsx("span",{afterCreate:this._afterLabelCreate,bind:this,class:e,"data-thumb-index":a,id:c+"-label-"+a,role:this.labelInputsEnabled?"button":null,"touch-action":"none"},this._activeLabelInputIndex===a?this.renderValueInput(a):d)};b.prototype.renderValueInput=function(a){return l.tsx("input",
{afterCreate:this._afterInputCreate,"aria-label":q.sliderValue,bind:this,class:"esri-slider__label-input",required:!0,tabIndex:0,type:"text",value:this.values[a].toString(),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})};b.prototype.renderMax=function(){var a=this._isMaxInputActive,c=this.labels,d=this.classes("esri-slider__max",this.rangeLabelInputsEnabled?"esri-slider__max--interactive":null);return l.tsx("div",{bind:this,class:d,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,
role:this.rangeLabelInputsEnabled?"button":null,tabIndex:this.rangeLabelInputsEnabled?0:null},a?this.renderMaxInput():c.max)};b.prototype.renderMin=function(){var a=this._isMinInputActive,c=this.labels,d=this.classes("esri-slider__min",this.rangeLabelInputsEnabled?"esri-slider__min--interactive":null);return l.tsx("div",{bind:this,class:d,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:this.rangeLabelInputsEnabled?"button":null,tabIndex:this.rangeLabelInputsEnabled?0:null},a?
this.renderMinInput():c.min)};b.prototype.renderMaxInput=function(){return l.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":q.maximumValue,bind:this,class:"esri-slider__range-input",required:!0,tabIndex:0,type:"text",value:this.max.toString(),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})};b.prototype.renderMinInput=function(){return l.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":q.minimumValue,bind:this,class:"esri-slider__range-input",required:!0,tabIndex:0,
type:"text",value:this.min.toString(),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})};b.prototype.renderExtraContentElements=function(){return l.tsx("div",{bind:this,class:"esri-slider__extra-content"},this.extraNodes)};b.prototype.renderTicksContainer=function(){var a=this;if(this.tickConfigs&&this.trackElement)return this.tickConfigs.map(function(c,d){return l.tsx("div",{key:"ticks-container",class:a.classes("esri-slider__ticks")},a.renderTicks(c,d))})};b.prototype.renderTicks=function(a,
c){var d=this,e=a.mode,b=a.values;this._tickElements[c]=[];if("position"===e)return e=Array.isArray(b)?b:[b],this._calculateTickPositions(e).map(function(b,e){return d.renderTickGroup(a,e,c,b)});if("percent"===e&&Array.isArray(b)){var n=this.min,h=this.max-n,e=b.map(function(a){return parseFloat((a/100*h+n).toFixed(5))});return this._calculateTickPositions(e).map(function(b,e){return d.renderTickGroup(a,e,c,b)})}e=Array.isArray(b)&&b.length?b[0]:isNaN(b)?null:b;e=this._getTickCounts(e,a);return this._calculateEquidistantTickPositions(e).map(function(b,
e){return d.renderTickGroup(a,e,c,b)})};b.prototype.renderTickGroup=function(a,c,d,b){var e="position"===a.mode?Array.isArray(a.values)?a.values[c]:a.values:this._calculateValueFromPosition(b);if(m.isSome(e)&&!isNaN(e))return l.tsx("div",{afterCreate:this._afterTickGroupCreate,bind:this,"data-config":a,"data-position":b,"data-tick-config-index":d,"data-tick-group-index":c,"data-value":e,key:"tick-group-"+c},this.renderTickLine(a,c,d,e,b),a.labelsVisible?this.renderTickLabel(a,c,d,e,b):null)};b.prototype.renderTickLine=
function(a,c,d,b,f){return l.tsx("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":b.toString(),bind:this,class:"esri-slider__tick","data-tick-config-index":d,"data-tick-group-index":c,"data-value":b,key:"tick-label-"+c,style:this._calculatePositionStyleForElement(b)})};b.prototype.renderTickLabel=function(a,c,d,b,f){a=a.labelFormatFunction?a.labelFormatFunction(b,"tick",c):this.viewModel.getLabelForValue(b,"tick",c);return l.tsx("div",{afterCreate:this._afterTickLabelCreate,"aria-label":a,
"aria-valuenow":b.toString(),"aria-valuetext":a,bind:this,class:"esri-slider__tick-label","data-tick-config-index":d,"data-tick-group-index":c,"data-value":b,key:"tick-label-"+c,style:"transform: translate(-50%); "+this._calculatePositionStyleForElement(b)},a)};b.prototype._afterTrackCreate=function(a){l.storeNode.call(this,a);u.applyLocal(a);a.addEventListener("pointerdown",this._onTrackPointerDown);this.scheduleRender()};b.prototype._afterSegmentCreate=function(a){this._segmentElements.push(a);
u.applyLocal(a);a.addEventListener("pointerdown",this._onSegmentPointerDown)};b.prototype._afterAnchorCreate=function(a){this._anchorElements.push(a);u.applyLocal(a);a.addEventListener("pointerdown",this._onAnchorPointerDown);if(this.thumbCreatedFunction){var c=a["data-thumb-index"];this.thumbCreatedFunction(c,a["data-value"],this._thumbElements[c]||null,this._labelElements[c]||null)}};b.prototype._afterAnchorUpdate=function(a){this._anchorElements.push(a);m.isSome(this._focusedAnchorIndex)&&a["data-thumb-index"]===
this._focusedAnchorIndex&&(a.focus(),this._focusedAnchorIndex=null)};b.prototype._afterThumbCreate=function(a){this._thumbElements.push(a)};b.prototype._afterLabelCreate=function(a){this._labelElements.push(a);u.applyLocal(a);a.addEventListener("pointerdown",this._onLabelPointerDown);a.addEventListener("pointerup",this._onLabelPointerUp)};b.prototype._afterInputCreate=function(a){a.focus();a.select()};b.prototype._afterTickLineCreate=function(a){var c=a["data-tick-group-index"],d=this._tickElements[a["data-tick-config-index"]];
d[c]?d[c].line=a:d[c]={line:a,label:null}};b.prototype._afterTickLabelCreate=function(a){var c=a["data-tick-group-index"],d=this._tickElements[a["data-tick-config-index"]];d[c]?d[c].label=a:d[c]={label:a,line:null}};b.prototype._afterTickGroupCreate=function(a){var c=a["data-config"];if(c&&c.tickCreatedFunction){var d=a["data-value"];(a=this._tickElements[a["data-tick-config-index"]][a["data-tick-group-index"]])&&c.tickCreatedFunction(d,a.line||null,a.label||null)}};b.prototype._onAnchorKeyDown=function(a){if("editing"!==
this.state){var c=a.target,d=t.eventKey(a),b=this.values,c=c["data-thumb-index"],f=this._anchorElements[c],n=b[c],h="horizontal"===this.layout,g=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];if("Enter"===d&&this.labelInputsEnabled)this._activeLabelInputIndex=c,this.notifyChange("state");else if(-1<g.indexOf(d))a.preventDefault(),d=this._calculatePositionAfterMovementKeyPress(c,h?f.offsetLeft:f.offsetTop,"ArrowUp"===d||"ArrowRight"===d?1:-1),this._setAnchorPosition(c,d),b=b[c],this._emitThumbChangeEvent({index:c,
oldValue:n,value:b});else if("End"===d||"Home"===d)a.preventDefault(),f=this._calculatePixelBoundsForAnchor(c),a=f[0],f=f[1],this._setAnchorPosition(c,h?"End"===d?a:f:"Home"===d?a:f),b=b[c],this._emitThumbChangeEvent({index:c,oldValue:n,value:b})}};b.prototype._onTrackPointerDown=function(a){var c=this._dragStartInfo,d=this.values;if("editing"!==this.state&&!c&&this.snapOnClickEnabled&&d.length){var b=this.layout,f=this.steps,c=a.clientX,n=a.clientY,h=this.trackElement.getBoundingClientRect(),g=a.clientX-
h.left;a=a.clientY-h.top;a="horizontal"===b?g:a;b=this._calculateValueFromPosition(a);b=this._getIndexOfNearestValue(b);m.isSome(b)&&(d=d[b],f=m.isSome(f)?this._calculateNearestStepPosition(a):a,this._setAnchorPosition(b,f),this._dragged=!0,this._dragStartInfo={clientX:c,clientY:n,index:b,position:f},this._focusedAnchorIndex=b,this.notifyChange("state"),this._emitThumbDragEvent({index:b,state:"start",value:d}),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",
this._onAnchorPointerMove))}};b.prototype._onSegmentPointerDown=function(a){var c=this._anchorElements,d=a.target,b=d["data-segment-index"],f=d["data-max-thumb-index"],d=d["data-min-thumb-index"];if(this.draggableSegmentsEnabled&&m.isSome(d)&&m.isSome(f)){a.stopPropagation();var n=[d,f];this._segmentDragStartInfo={index:b,thumbIndices:n,clientX:a.x,clientY:a.y,maxPosition:this._getAnchorPosition(c[f]),minPosition:this._getAnchorPosition(c[d])};this.notifyChange("state");this._emitSegmentDragEvent({index:b,
state:"start",thumbIndices:n});document.addEventListener("pointerup",this._onSegmentPointerUp);document.addEventListener("pointermove",this._onSegmentPointerMove)}};b.prototype._onSegmentPointerMove=function(a){if(this._segmentDragStartInfo){a.preventDefault();var c=this.layout,b=this._segmentDragStartInfo,e=b.clientX,f=b.clientY,n=b.index,h=b.thumbIndices,g=h[0],h=h[1],k=b.maxPosition,b=b.minPosition;this._dragged=!0;c="horizontal"===c?a.clientX-e:a.clientY-f;a=k+c;c=b+c;e=this._calculatePixelBoundsForAnchor(h);
f=this._calculatePixelBoundsForAnchor(g);if(c<f[1])this._setAnchorPositions([g,h],[f[1],k-(b-f[1])]);else if(a>e[0])this._setAnchorPositions([g,h],[b-(k-e[0]),e[0]]);else if(b=this._anchorElements,k=b[g],b=this._getAnchorPosition(b[h]),k=this._getAnchorPosition(k),b!==a&&k!==c){var k=this.values,l=[k[g],k[h]];this._setAnchorPositions([g,h],[c,a]);[k[g],k[h]].every(function(a,c){return a===l[c]})||this._emitSegmentDragEvent({index:n,state:"drag",thumbIndices:[g,h]})}}};b.prototype._onSegmentPointerUp=
function(a){document.removeEventListener("pointerup",this._onSegmentPointerUp);document.removeEventListener("pointermove",this._onSegmentPointerMove);if(this._segmentDragStartInfo){var c=this._segmentDragStartInfo;a=c.index;c=c.thumbIndices;this._dragged=!1;this._segmentDragStartInfo=null;this.notifyChange("state");this.scheduleRender();this._emitSegmentDragEvent({index:a,state:"stop",thumbIndices:c})}};b.prototype._onAnchorPointerDown=function(a){var c=a.target["data-thumb-index"];if(void 0!==c){var b=
this._anchorElements[c],e=b.offsetTop,b=b.offsetLeft;this._dragStartInfo={clientX:a.clientX,clientY:a.clientY,index:c,position:"horizontal"===this.layout?b:e};this.notifyChange("state");document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)}};b.prototype._onAnchorPointerMove=function(a){if("editing"!==this.state&&this._dragStartInfo){var c=this.layout,b=this.values,e=this._dragged,f=this._dragStartInfo,g=this._dragStartInfo,
h=g.index,g=g.position,k=a.clientX,l=a.clientY;a=e?"drag":"start";var m=this._getAnchorPosition(this._anchorElements[h]),c="horizontal"===c?g+k-f.clientX:g+l-f.clientY;m!==c&&(b=b[h],this._dragged=!0,this._setAnchorPosition(h,c),c=this.values[h],e?b!==c&&this._emitThumbDragEvent({index:h,state:a,value:c}):this._emitThumbDragEvent({index:h,state:a,value:b}))}};b.prototype._onAnchorPointerUp=function(a){document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",
this._onAnchorPointerMove);if(this._dragStartInfo){a=this._dragStartInfo.index;var c=this._dragged;this._dragged=!1;this._dragStartInfo=null;c?(this.notifyChange("state"),this.scheduleRender(),this._emitThumbDragEvent({index:a,state:"stop",value:this.values[a]})):this.scheduleRender()}};b.prototype._onLabelPointerDown=function(a){document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)};b.prototype._onLabelPointerMove=function(a){this._dragged=
!0};b.prototype._onLabelPointerUp=function(a){a=a.target["data-thumb-index"];this.labelInputsEnabled&&!this._dragged&&m.isSome(a)&&(this._activeLabelInputIndex=a,this.notifyChange("state"));document.removeEventListener("pointerup",this._onLabelPointerUp);document.removeEventListener("pointermove",this._onLabelPointerMove)};b.prototype._onLabelInputBlur=function(a){var c=this._activeLabelInputIndex,b=this.values,e=this.viewModel;a=a.target.value;this._activeLabelInputIndex=null;this.notifyChange("state");
if(a){a=this._applyPrecisionToValue(parseFloat(a));var b=b[c],f=this._calculateValueBoundsForAnchor(c),g=f[0],f=f[1];!isNaN(a)&&a<=g&&a>=f&&b!==a&&(e.setValue(c,a),this._emitValueChangeEvent({index:c,oldValue:b,value:a}),this._emitThumbChangeEvent({index:c,oldValue:b,value:a}))}};b.prototype._onMaxLabelClick=function(a){this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state"))};b.prototype._onMaxLabelKeyDown=function(a){"Enter"===t.eventKey(a)&&(this._isMaxInputActive=!0,
this.notifyChange("state"))};b.prototype._onMaxInputBlur=function(a){a=a.target.value;this._isMaxInputActive=!1;this.notifyChange("state");if(a){var c=this.max;this.viewModel.set("max",this._applyPrecisionToValue(parseFloat(a)));this.max!==c&&this._emitMaxChangeEvent({oldValue:c,value:this.max})}};b.prototype._onMinLabelClick=function(a){this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state"))};b.prototype._onMinLabelKeyDown=function(a){"Enter"===t.eventKey(a)&&(this._isMinInputActive=
!0,this.notifyChange("state"))};b.prototype._onMinInputBlur=function(){var a=event.target.value;this._isMinInputActive=!1;this.notifyChange("state");if(a){var c=this.min;this.viewModel.set("min",this._applyPrecisionToValue(parseFloat(a)));this.min!==c&&this._emitMinChangeEvent({oldValue:c,value:this.min})}};b.prototype._onInputKeyDown=function(a){var c=a.target,b=t.eventKey(a),e=this._activeLabelInputIndex,f=this._anchorElements;if("Enter"===b||"Escape"===b||"Tab"===b)a.stopPropagation(),c.blur(),
m.isSome(e)?f[e].focus():c.parentElement.focus()};b.prototype._applyPrecisionToValue=function(a){return parseFloat(a.toFixed(this.precision))};b.prototype._calculatePositionFromValue=function(a){var c=this._trackHeight,b=this._trackWidth,e=this.max,f=this.min,g=e-f;return"horizontal"===this.layout?parseFloat((b*(a-f)/g).toFixed(2)):parseFloat((c*(e-a)/g).toFixed(2))};b.prototype._calculateValueFromPosition=function(a){var c=this._trackHeight,b=this._trackWidth,e=this.min,f=this.max-e;return parseFloat(("horizontal"===
this.layout?a*f/b+e:f*(1E3-a/c*1E3)/1E3+e).toFixed(this.precision))};b.prototype._getAnchorPosition=function(a){return"horizontal"===this.layout?a.offsetLeft:a.offsetTop};b.prototype._setAnchorPositions=function(a,c){var b=this,e=this.values;if(a&&0!==a.length)if(1===a.length){a=a[0];var f=e[a];this._setAnchorPosition(a,c[0]);c=e[a];c!==f&&this._emitValueChangeEvent({index:a,oldValue:f,value:c})}else{for(var g=a.map(function(a){return e[a]}),f=0;f<a.length;f++)this._setAnchorPosition(a[f],c[f],!0);
c=a.map(function(a){return b.values[a]});c.every(function(a,c){return a===g[c]})||this._emitValuesChangeEvent({indices:a,oldValues:g,values:c})}};b.prototype._setAnchorPosition=function(a,c,b){var d=this.values[a];m.isSome(this.steps)&&(c=this._calculateNearestStepPosition(c));var f=this._calculateValueBoundsForAnchor(a),g=f[0],f=f[1],h=this._calculatePixelBoundsForAnchor(a);c=this._calculateValueFromPosition(Math.max(Math.min(c,h[0]),h[1]));g=Math.max(Math.min(c,g),f);c=this._calculatePositionStyleForElement(g);
f=this.viewModel;h=this._anchorElements[a];"horizontal"===this.layout?h.style.left=""+c:h.style.top=""+c;f.setValue(a,g);g=this.values[a];d===g||b||this._emitValueChangeEvent({index:a,oldValue:d,value:g})};b.prototype._calculateValueBoundsForAnchor=function(a){var c=this.max,b=this.min,e=this.values,c=m.isSome(e[a+1])?e[a+1]:c;a=m.isSome(e[a-1])?e[a-1]:b;return[c,a]};b.prototype._calculatePixelBoundsForAnchor=function(a){var c=this._anchorElements,b=this._trackHeight,e=this._trackWidth,f=c[a-1];a=
c[a+1];"horizontal"===this.layout?(b=a?a.offsetLeft:e,f=f?f.offsetLeft:0):(b=f?f.offsetTop:b,f=a?a.offsetTop:0);return[b,f]};b.prototype._getIndexOfNearestValue=function(a){var b=this.values,d=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b});return b.indexOf(d)};b.prototype._getIndexOfNearestStepValue=function(a){if(!m.isSome(this.steps))return null;var b=this._getStepValues(),d=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b});return b.indexOf(d)};b.prototype._calculateNearestStepPosition=
function(a){a=this._calculateValueFromPosition(a);a=this._getIndexOfNearestStepValue(a);var b=this._getStepValues();return this._calculatePositionFromValue(b[a])};b.prototype._getStepValues=function(){var a=this.steps;if(Array.isArray(a))return a;for(var b=this.max,d=this.min,e=Math.ceil((b-d)/a),f=[],g=0;g<=e;g++){var h=d+a*g;f.push(h>b?b:h)}return f};b.prototype._calculatePositionAfterMovementKeyPress=function(a,b,d){a=this.values[a];if(m.isSome(this.steps))return this._calculateStepPositionAfterMovementKeyPress(a,
d);d="horizontal"===this.layout?d:-1*d;b+=d;return 0===this.precision?this._calculatePositionFromValue(this._calculateValueFromPosition(b)+d):b};b.prototype._calculateStepPositionAfterMovementKeyPress=function(a,b){var c=this._getStepValues(),e=c.indexOf(a);if(-1<e)return this._calculatePositionFromValue(m.isSome(c[e+b])?c[e+b]:c[e]);a=this._getIndexOfNearestStepValue(a+1E-4*b);return this._calculatePositionFromValue(c[a+b])};b.prototype._getTickCounts=function(a,b){b=b.mode;return"count"===b||"position"===
b?a||0:"percent"===b?100/a||0:0};b.prototype._calculateTickPositions=function(a){var b=this;return a.map(function(a){return b._calculatePositionFromValue(a)})};b.prototype._calculateEquidistantTickPositions=function(a){var b=this._trackWidth,d=this._trackHeight,b="horizontal"===this.layout?b:d,d=b/(a-1),e=[];if(1===a)return[b/2];for(var f=0;f<a;f++){var g=f*d;g<=b&&e.push(g)}return e};b.prototype._calculatePositionStyleForElement=function(a){a=this._calculatePositionForElement(a);return("horizontal"===
this.layout?"left":"top")+": "+a};b.prototype._calculatePositionForElement=function(a){var b=this.min;a=(a-b)/(this.max-b)*100;return("horizontal"===this.layout?a:100-a)+"%"};b.prototype._emitMaxChangeEvent=function(a){this.emit("max-change",p({},a,{type:"max-change"}))};b.prototype._emitMinChangeEvent=function(a){this.emit("min-change",p({},a,{type:"min-change"}))};b.prototype._emitValueChangeEvent=function(a){this.emit("value-change",p({},a,{type:"value-change"}))};b.prototype._emitValuesChangeEvent=
function(a){this.emit("values-change",p({},a,{type:"values-change"}))};b.prototype._emitThumbChangeEvent=function(a){this.emit("thumb-change",p({},a,{type:"thumb-change"}))};b.prototype._emitThumbDragEvent=function(a){this.emit("thumb-drag",p({},a,{type:"thumb-drag"}))};b.prototype._emitSegmentDragEvent=function(a){this.emit("segment-drag",p({},a,{type:"segment-drag"}))};k([g.property()],b.prototype,"extraNodes",void 0);k([g.property(),l.renderable()],b.prototype,"draggableSegmentsEnabled",void 0);
k([g.property()],b.prototype,"label",void 0);k([g.aliasOf("viewModel.labelFormatFunction")],b.prototype,"labelFormatFunction",void 0);k([g.property()],b.prototype,"labelInputsEnabled",void 0);k([g.aliasOf("viewModel.labels")],b.prototype,"labels",void 0);k([g.property(),l.renderable()],b.prototype,"labelsVisible",void 0);k([g.property({value:"horizontal"}),l.renderable()],b.prototype,"layout",null);k([g.aliasOf("viewModel.max")],b.prototype,"max",void 0);k([g.aliasOf("viewModel.min")],b.prototype,
"min",void 0);k([g.aliasOf("viewModel.precision")],b.prototype,"precision",void 0);k([g.property()],b.prototype,"rangeLabelInputsEnabled",void 0);k([g.property(),l.renderable()],b.prototype,"rangeLabelsVisible",void 0);k([g.property()],b.prototype,"snapOnClickEnabled",void 0);k([g.property({dependsOn:["viewModel.state"],readOnly:!0})],b.prototype,"state",null);k([g.property()],b.prototype,"steps",void 0);k([g.property()],b.prototype,"thumbCreatedFunction",void 0);k([g.property()],b.prototype,"tickConfigs",
void 0);k([g.property()],b.prototype,"trackElement",void 0);k([g.aliasOf("viewModel.values")],b.prototype,"values",void 0);k([g.property(),l.renderable("viewModel.max viewModel.min viewModel.precision viewModel.labelFormatFunction viewModel.labels viewModel.values".split(" "))],b.prototype,"viewModel",void 0);return b=k([g.subclass("esri.widgets.Slider")],b)}(g.declared(A,z))});