// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(q,g){var p={};g.setObject("dojo.regexp",p);p.escapeString=function(e,g){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(c){return g&&-1!=g.indexOf(c)?c:"\\"+c})};p.buildGroupRE=function(e,g,c){if(!(e instanceof Array))return g(e);for(var f=[],k=0;k<e.length;k++)f.push(g(e[k]));return p.group(f.join("|"),c)};p.group=function(e,g){return"("+(g?"?:":"")+e+")"};return p})},"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),
function(q,g,p,e,n,c,f,k,r){return function(b){function a(a){a=b.call(this)||this;a.showMoreResultsOpen=!1;a.viewModel=null;return a}p(a,b);a.prototype.render=function(){var a=this,b,l=this.get("viewModel.selectedResult"),c=this.get("viewModel.results"),l=l&&l.name||"",f=1<this._countResults(c),m=f&&c.map(function(b){return a._moreResultsList(b)}),c=f?r.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},r.tsx("a",{class:"esri-widget__anchor",
href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?n.hideMoreResults:n.showMoreResults)):null,f=f?r.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},m):null,m=(b={},b["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,b);return r.tsx("div",{class:"esri-search-result-renderer esri-widget"},r.tsx("div",{key:"esri-search-renderer__container",
class:this.classes("esri-search-result-renderer__more-results",m)},r.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},l),r.tsx("div",{key:"esri-search-renderer__more-results"},c,f)))};a.prototype._showMoreResultsClick=function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};a.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];
this.viewModel&&this.viewModel.select(a)};a.prototype._moreResultsList=function(a){var b=this,d=a.results,c=d.length,f=!!c,m=this.get("viewModel.selectedResult"),c=1===c&&d[0]===m,m=this._getSourceName(a.source,a.sourceIndex),m=1<this.get("viewModel.results").length&&!c?r.tsx("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},m):null,d=f&&d.map(function(a,d){return b._moreResultsListItem(a,d)}),d=f&&!c?r.tsx("ul",{key:"esri-search-result-renderer__list-"+
a.sourceIndex},d):null;return f?r.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},m,d):null};a.prototype._moreResultsListItem=function(a,b){var d=this.get("viewModel.selectedResult");return a!==d?r.tsx("li",{key:"esri-search-result-renderer__list-item-"+b},r.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};a.prototype._getSourceName=function(a,b){return b===k.ALL_INDEX?
n.all:a.name};a.prototype._countResults=function(a){return a?a.reduce(function(a,b){return a+b.results.length},0):0};e([r.renderable(),c.property()],a.prototype,"showMoreResultsOpen",void 0);e([c.property(),r.renderable(["viewModel.results","viewModel.selectedResult"])],a.prototype,"viewModel",void 0);e([r.accessibleHandler()],a.prototype,"_showMoreResultsClick",null);e([r.accessibleHandler()],a.prototype,"_selectResultClick",null);return a=e([c.subclass("esri.widgets.Search.SearchResultRenderer")],
a)}(c.declared(f))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w,y,z,D,A,B,H,C,E,I,F,R,U,P,O,N,L,Q,M){function S(a,b){return a.hasOwnProperty(b)&&null!=a[b]&&""!==a[b]}var K=G.getLogger("esri.widgets.Search.SearchViewModel"),T=d.ofType({key:function(a){return a.layer?"layer":"locator"},base:N,typeMap:{layer:P,locator:O}}),X=A.WGS84,W=/<(?:.|\s)*?>/g;return function(b){function d(a){a=b.call(this)||this;a._handles=new m;a._gotoController=null;a._searching=null;a._loadingDefaultSources=null;a.allPlaceholder=f.allPlaceholder;
a.autoNavigate=!0;a.autoSelect=!0;a.defaultSources=new T;a.defaultSymbol=new C({url:q.toUrl(x("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=new r({title:f.searchResult,content:"{Match_addr}"});a.portal=B.getDefault();a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;
a.selectedSuggestion=null;a.searchAllEnabled=!0;a.selectedResult=null;a.sources=new T;a.suggestionDelay=150;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}p(d,b);d.prototype.initialize=function(){var a=this;this._handles.add([y.init(this,"portal",function(a){a&&!a.loaded&&a.load()}),y.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()}),y.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")})])};d.prototype.destroy=
function(){this._abortGoTo();this.clearGraphics();this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();this._handles=null};Object.defineProperty(d.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):
this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"allSources",{get:function(){var a=this.sources,b=this.defaultSources,d=this.includeDefaultSources,a="function"===typeof d?d.call(null,{sources:a,defaultSources:b}):d?b.concat(a):a,b=this._get("allSources")||new T;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||
u.supported()},set:function(a){if(void 0===a)this._clearOverride("locationEnabled");else{var b=u.supported();if(a&&!b){var d=new l("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(d)}this._override("locationEnabled",a&&b)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder,b=void 0===b?f.allPlaceholder:b;return-1===a?b:(a=this.allSources.getItemAt(a))?
a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===
this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});d.prototype.clear=function(){this.searchTerm=""};d.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};d.prototype.search=function(a){var b=this;this.emit("search-start");this.clearGraphics();var d=this._createSuggestionForSearch(a);this._searching=a=this._whenViewAndPortalLoaded().then(function(){return b._getResultsFromSources(d).then(function(a){var h=
{activeSourceIndex:b.activeSourceIndex,searchTerm:d.text,numResults:0,numErrors:0,errors:[],results:[]};b._formatResponse(h,a,d);a=b._getFirstResult(h.results);var l=(d.location&&a?a.name:d.text).replace(W,"");b._set("searchTerm",l);(d.key&&"number"===typeof d.sourceIndex||d.location)&&b._set("selectedSuggestion",d);b._set("results",h.results);b.emit("search-complete",h);return b._selectFirstResult(a).then(function(){return h})})});this.notifyChange("state");a.catch(function(){}).then(function(){return b._clearSearching()});
return a};d.prototype.searchNearby=function(){var a=this;if(!this.locationEnabled){var b=new l("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(b);return w.reject(b)}this._searching=b=u.getCurrentPosition().then(function(b){return u.positionToPoint({position:b,view:a.view})}).then(function(b){return a.search(b)});this.notifyChange("state");b.catch(function(){}).then(function(){return a._clearSearching()});return b};d.prototype.select=
function(b){var d=this;this.clearGraphics();if(!b){var h=new l("select:missing-parameter","Cannot select without a searchResult.",{searchResult:b});K.error(h);return w.reject(h)}var c=this.view,f=S(b,"sourceIndex")?b.sourceIndex:this._getSourceIndexOfResult(b),m=this.allSources.getItemAt(f);if(!m)return h=new l("select:missing-source","Cannot select without a source.",{source:m}),K.error(h),w.reject(h);var h=m instanceof P?this._getLayerSourcePopupTemplate(m):m.popupTemplate,e=m.resultSymbol||this._getDefaultSymbol(b),
t=S(m,"resultGraphicEnabled")?m.resultGraphicEnabled:this.resultGraphicEnabled,u=S(m,"autoNavigate")?m.autoNavigate:this.autoNavigate,x=S(m,"popupEnabled")?m.popupEnabled:this.popupEnabled,r=x?h||this.popupTemplate:null,C=b.feature;if(!C)return h=new l("select:missing-feature","Cannot select without a feature.",{feature:C}),K.error(h),w.reject(h);var J=C.attributes,G=C.geometry,g=C.layer,E=C.sourceLayer,y=L.getPointFromGeometry(G),h={layerViewQuery:this._getLayerView(C),elevationQuery:c&&v.isSome(y)?
L.getPointWithElevation(y,c).catch(function(){return y}):w.resolve(y)};return w.eachAlways(h).then(function(h){var l=h.layerViewQuery.value,y=h.elevationQuery.value;e instanceof R&&(e.text=b.name);h=c&&u?d._getGoToTarget(b,m):null;return(v.isSome(h)?a.safeCast(d._goToSearchResult(h)):w.resolve()).then(function(){var a=l?C:new k({geometry:G,symbol:e,attributes:J,layer:g,sourceLayer:E,popupTemplate:r}),h=x&&d.get("view.popup");(h=h&&a.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled))&&c.popup.open({features:[a],
location:y});l&&U.hasHighlight(l)&&!h&&d._highlightFeature({graphic:a,layerView:l});!l&&t&&c&&c.graphics.push(a);d._set("selectedResult",b);d._set("resultGraphic",a);d.emit("select-result",{result:b,source:m,sourceIndex:f});return b})})};d.prototype.suggest=function(a,b){var d=this,h=a||this.searchTerm;this.emit("suggest-start",{searchTerm:h});return this._suggestTimer(b).then(function(){return d._suggestImmediate(h).then(function(a){d._set("suggestions",a.results);d.emit("suggest-complete",a);return a})})};
d.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};d.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};d.prototype._convertHelperServices=function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=O.fromJSON(a),Q.isArcGISWorldGeocoder(a.get("locator.url"))&&a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],
placeholder:f.placeholder}),a.singleLineFieldName))return a}).filter(Boolean):[]};d.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),d=this.get("view.map");if(!d||!b)return[];var h=b.hintText;return b.enabled?b.layers.map(function(b){var l=d.findLayerById(b.id);if(l){b=a._getLayerJSON(b);var c=P.fromJSON(b);c.placeholder=h;a._getLayer(l,b).then(function(a){c.layer=a});return c}}).filter(Boolean):[]};d.prototype._getSubLayer=
function(b,d){return b&&b.allSublayers?(b=b.allSublayers.find(function(a){return a.id===d.subLayer}))?a.safeCast(b.createFeatureLayer()):w.reject():w.reject()};d.prototype._getLayer=function(a,b){var d=this;if("feature"===a.type||"scene"===a.type)return w.resolve(a);if("map-image"===a.type)return a.load().then(function(){return d._getSubLayer(a,b).catch(function(){var b=new l("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});K.error(b);return null})})};
d.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};d.prototype._updateDefaultSources=function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));this.notifyChange("allSources")};d.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};d.prototype._clear=function(){this._abortGoTo();this._set("results",
null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};d.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var d=a.selectedFeature;d&&d===b&&a.close()}};d.prototype._suggestTimer=function(a){return w.after(null!=a?a:this.suggestionDelay)};d.prototype._createLocationForSearch=function(a){return a instanceof k?L.getPointFromGeometry(a.geometry):a instanceof D?a:Array.isArray(a)&&2===
a.length?new D({longitude:a[0],latitude:a[1]}):null};d.prototype._createSuggestionForSearch=function(a){if(a&&S(a,"key")&&S(a,"text")&&S(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),d="string"===typeof a?a:this.searchTerm,h=this.selectedSuggestion,l=this.selectedResult,c=(a=!a&&h&&l)&&h.location;return a&&h.key===l.key&&h.sourceIndex===l.sourceIndex||c?h:{location:v.unwrap(b),text:b?"":d,sourceIndex:null,key:null}};d.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=
a.results[0];var d=!!a;d&&(b=a);return d});return b};d.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):w.resolve()};d.prototype._suggestImmediate=function(a){var b=this;return this._whenViewAndPortalLoaded().then(function(){return b._getSuggestionsFromSources(a)}).then(function(d){var h={activeSourceIndex:b.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};b._formatResponse(h,d);return h})};d.prototype._formatSourceResponse=function(a,
b,d){var h=b&&b.value||[];b=b&&b.error;var l=this.allSources.getItemAt(d);b?(a.errors.push({sourceIndex:d,source:l,error:b}),a.numErrors++):(a.results.push({sourceIndex:d,source:l,results:h}),a.numResults+=h.length)};d.prototype._formatResponse=function(a,b,d){var h=this;if(b)if(-1===a.activeSourceIndex){var l=d&&S(d,"sourceIndex")&&-1!==d.sourceIndex?d.sourceIndex:void 0;b.forEach(function(b,d){h._formatSourceResponse(a,b,void 0!==l?l:d)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};
d.prototype._getResultsFromSources=function(a){var b=this,d=this.allSources,h=!a.location&&S(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,c=[];if(!d.length)return d=new l("search:no-sources-defined","At least one source is required.",{allSources:d}),K.error(d),w.reject(d);-1===h?d.forEach(function(d,h){c.push(b._getResultsFromSource(a,h))}):c.push(this._getResultsFromSource(a,h));return w.eachAlways(c)};d.prototype._getSuggestionsFromSources=function(a){var b=this,d=this.allSources,h=this.activeSourceIndex,
c=[];if(!d.length)return d=new l("suggest:no-sources-defined","At least one source is required.",{allSources:d}),K.error(d),w.reject(d);-1===h?d.forEach(function(d,h){c.push(b._getSuggestionsFromSource(a,h))}):c.push(this._getSuggestionsFromSource(a,h));return w.eachAlways(c)};d.prototype._getResultsFromSource=function(a,b){var d=this.allSources.getItemAt(b),h=a.location,h=void 0===h?null:h,l=this.get("view.spatialReference")||X,c=S(d,"maxResults")?d.maxResults:this.maxResults,f=d instanceof P&&S(d,
"exactMatch")?d.exactMatch:!1;return d.getResults({view:this.view,sourceIndex:b,location:h,suggestResult:a,spatialReference:l,exactMatch:f,maxResults:c})};d.prototype._getSuggestionsFromSource=function(a,b){var d=this.allSources.getItemAt(b),h=S(d,"suggestionsEnabled")?d.suggestionsEnabled:this.suggestionsEnabled,l=a.trim().length,c=S(d,"minSuggestCharacters")?d.minSuggestCharacters:this.minSuggestCharacters;return h&&l>=c?(h=this.get("view.spatialReference")||X,l=S(d,"maxSuggestions")?d.maxSuggestions:
this.maxSuggestions,d.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:h,maxSuggestions:l})):w.resolve()};d.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new F({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===b)return new I({color:a.color,width:a.width});if("polygon"===b)return new E({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};d.prototype._getLayerSourcePopupTemplate=function(a){var b=
a.layer;if(b)return S(a,"popupTemplate")?a.popupTemplate:b.popupTemplate};d.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(d){return d.results.some(function(h){if(h===a)return b=d.sourceIndex,!0})});return b};d.prototype._getGoToTarget=function(a,b){var d=a.extent;a=a.feature;return b instanceof P?a||d:d||a};d.prototype._goToSearchResult=function(a){return c(this,void 0,void 0,function(){var b,d,h;return n(this,function(l){switch(l.label){case 0:b=!!a,this._abortGoTo(),
this._gotoController=d=w.createAbortController(),h={target:{target:a},options:{animate:b,signal:d.signal}},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.callGoTo(h)];case 2:return l.sent(),[3,4];case 3:return l.sent(),[3,4];case 4:return this._gotoController=null,[2]}})})};d.prototype._whenViewAndPortalLoaded=function(){var a=this.portal,b=this.view,b=b?b.when():w.resolve(),a=a?a.when():w.resolve();return w.eachAlways([b,a]).then(function(){})};d.prototype._loadDefaultSources=function(){return c(this,
void 0,void 0,function(){var a,b,d=this;return n(this,function(h){switch(h.label){case 0:return this._loadingDefaultSources=b=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():w.resolve(),this.notifyChange("state"),[4,b.catch(function(){}).then(function(){d._loadingDefaultSources===b&&(d._clearLoadingDefaultSources(),d._updateDefaultSources())})];case 1:return h.sent(),[2]}})})};d.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");a=v.get(a,"feature","geometry",
"type");return v.isSome(a)&&(b=(b=H.getSchemes({theme:"default",basemap:b,geometryType:a})||H.getSchemes({theme:"default",basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&S(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};d.prototype._removeHighlight=function(){this._handles.remove("highlight")};d.prototype._getLayerView=function(a){var b=this.view;if(!a||!b)return w.resolve(null);var d=a.layer;return b.when().then(function(){return h.typeCast(b)().whenLayerView(d)})};
d.prototype._highlightFeature=function(a){var b=a.graphic,d=b.attributes,h=b.layer.objectIdField;a=a.layerView.highlight(d&&d[h]||b);this._handles.add(a,"highlight")};d.ALL_INDEX=-1;e([z.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],d.prototype,"activeSource",null);e([z.property({dependsOn:["allSources.length","searchAllEnabled"]})],d.prototype,"activeSourceIndex",null);e([z.property()],d.prototype,"allPlaceholder",void 0);e([z.property({dependsOn:["defaultSources.length",
"sources.length","includeDefaultSources"],readOnly:!0})],d.prototype,"allSources",null);e([z.property()],d.prototype,"autoNavigate",void 0);e([z.property()],d.prototype,"autoSelect",void 0);e([z.property({readOnly:!0})],d.prototype,"defaultSources",void 0);e([z.property()],d.prototype,"defaultSymbol",void 0);e([z.property()],d.prototype,"includeDefaultSources",void 0);e([z.property()],d.prototype,"locationEnabled",null);e([z.property()],d.prototype,"maxInputLength",void 0);e([z.property()],d.prototype,
"maxResults",void 0);e([z.property()],d.prototype,"maxSuggestions",void 0);e([z.property()],d.prototype,"minSuggestCharacters",void 0);e([z.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],d.prototype,"placeholder",null);e([z.property()],d.prototype,"popupEnabled",void 0);e([z.property({type:r})],d.prototype,"popupTemplate",void 0);e([z.property({type:B})],d.prototype,"portal",void 0);e([z.property()],d.prototype,"resultGraphicEnabled",
void 0);e([z.property({readOnly:!0})],d.prototype,"resultGraphic",void 0);e([z.property({readOnly:!0})],d.prototype,"results",void 0);e([z.property({readOnly:!0})],d.prototype,"selectedSuggestion",void 0);e([z.property()],d.prototype,"searchAllEnabled",void 0);e([z.property({readOnly:!0})],d.prototype,"selectedResult",void 0);e([z.property()],d.prototype,"searchTerm",null);e([z.property({type:T})],d.prototype,"sources",void 0);e([z.property({readOnly:!0,dependsOn:["allSources.length"]})],d.prototype,
"state",null);e([z.property()],d.prototype,"suggestionDelay",void 0);e([z.property({readOnly:!0})],d.prototype,"suggestions",void 0);e([z.property()],d.prototype,"suggestionsEnabled",void 0);e([z.property()],d.prototype,"view",void 0);e([z.property()],d.prototype,"clear",null);return d=e([z.subclass("esri.widgets.Search.SearchViewModel")],d)}(z.declared(b,t,M))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h){function l(a,l,c){if(!l)return k.resolve(a);var f=l.spatialReference;return f.isWGS84?k.resolve(a):f.isWebMercator?k.resolve(b.geographicToWebMercator(a)):t(c).then(function(b){if(!b)return k.reject(new n("geometry-service:missing-url","Geometry service URL is missing"));b=new d({url:b});var l=new h({geometries:[a],outSR:f});return b.project(l,c).then(function(a){return a[0]})})}function t(b){if(e.geometryServiceUrl)return k.resolve(e.geometryServiceUrl);var d=
a.getDefault();return d.load(b).catch(function(){}).then(function(){return d.get("helperServices.geometry.url")})}Object.defineProperty(g,"__esModule",{value:!0});var u=f.getLogger("esri.core.geolocationUtils"),m={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};g.supported=function(){var a=c("esri-geolocation");a||u.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=c("esri-secure-context"))||u.warn("insecure-context","Geolocation requires a secure origin."));return a};g.getCurrentPosition=
function(a){a||(a=m);return k.create(function(b,d){setTimeout(d,15E3);navigator.geolocation.getCurrentPosition(b,d,a)})};g.positionToPoint=function(a,b){var d=a.position;a=a.view;var h=d&&d.coords||{},h={accuracy:h.accuracy,altitude:h.altitude,altitudeAccuracy:h.altitudeAccuracy,heading:h.heading,latitude:h.latitude,longitude:h.longitude,speed:h.speed},d=d?{coords:h,timestamp:d.timestamp}:d;d=(d=d&&d.coords)?new r({longitude:d.longitude,latitude:d.latitude,z:d.altitude||null,spatialReference:{wkid:4326}}):
null;return l(d,a,b)}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/jsonMap ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(q,g,p,e,n,c,f,k,r,b,a){var d=new g.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),h=p.ensureType(a);g=b.createSubclass({declaredClass:"esri.tasks.GeometryService",
areasAndLengths:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,d){var h=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};
if(this.requestOptions||d)a=q.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new f({spatialReference:h,rings:a.rings})})})},buffer:function(a,b){var d=q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||
[]).map(function(a){return new f({spatialReference:h,rings:a.rings})})})},cut:function(a,b,d){var h=a[0].spatialReference,l=a.map(function(a){return a.toJSON()});a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(a[0]),geometries:l}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=q.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,
geometries:(a.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})}})},convexHull:function(a,b){var d=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/convexHull",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",d)})},densify:function(a,b){var d=
q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},difference:function(a,b,d){var h=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:k.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=q.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},distance:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},
fromGeoCoordinateString:function(a,b){var h={};h.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;h.strings=JSON.stringify(a.strings);h.conversionType=d.toJSON(a.conversionType||"mgrs");h.conversionMode=a.conversionMode;a={query:q.mixin({},this.parsedUrl.query,{f:"json"},h)};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var d=
q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},intersect:function(a,b,d){var h=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:k.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=q.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},lengths:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},
labelPoints:function(a,b){var d=a.map(function(a){return a.toJSON()}),h=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h.toJSON()),polygons:JSON.stringify(d)})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},offset:function(a,b){var d=q.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},project:function(a,b){a=h(a);var d=q.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),c=a.outSpatialReference,l=k.getJsonType(a.geometries[0]),f=this._decodeGeometries;a={query:d};if(this.requestOptions||b)a=
q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/project",a).then(function(a){return f(a.data,l,c)})},relation:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},reshape:function(a,b,d){var h=a.spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(a),
geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=q.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/reshape",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",h)})},simplify:function(a,b){var d=a[0].spatialReference,h=q.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),c=k.getJsonType(a[0]),l=this._decodeGeometries;a={query:h};
if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/simplify",a).then(function(a){return l(a.data,c,d)})},toGeoCoordinateString:function(a,b){var h={};h.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;h.coordinates=JSON.stringify(a.coordinates);h.conversionType=d.toJSON(a.conversionType||"mgrs");h.conversionMode=a.conversionMode;h.numOfDigits=a.numOfDigits;h.rounding=a.rounding;h.addSpaces=a.addSpaces;a={query:q.mixin({},this.parsedUrl.query,
{f:"json"},h)};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var d=q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.sr;a={query:d};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:h,paths:a.paths})})})},
union:function(a,b){var d=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/union",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",d)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},
_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],d,h=a.length;for(d=0;d<h;d++)b.push(a[d].toJSON());return{geometryType:k.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,d){var h=k.getGeometryType(b);a=a.geometries;var c=[],f={spatialReference:d.toJSON()},l=q.mixin;a.forEach(function(a,b){c[b]=new h(l(a,f))});return c},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof e?new f({rings:[[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new c({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,d){return"extent"===b?(a=a.rings[0],new e(a[0][0],a[0][1],a[2][0],a[2][1],d)):new n({points:a.paths[0],spatialReference:d.toJSON()})}});q.mixin(g,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return g})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(q,g,p,e,n,c,f,k){var r=c.getLogger("esri.tasks.support.ProjectParameters");return function(b){function a(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}p(a,b);Object.defineProperty(a.prototype,"outSR",{get:function(){r.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){r.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});a.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:k.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};e([f.property()],a.prototype,"geometries",void 0);e([f.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);e([f.property({json:{read:!1}})],a.prototype,"outSR",null);e([f.property()],a.prototype,"transformation",void 0);e([f.property()],a.prototype,"transformForward",void 0);return a=e([f.subclass("esri.tasks.support.ProjectParameters")],a)}(f.declared(n))})},"esri/styles/basic":function(){define(["../core/lang",
"../Color"],function(q,g){function p(c,f){var e;if(c)switch(e={},e.color=new g(c.color),f){case "point":e.outline={color:new g(c.outline.color),width:c.outline.width};e.size=c.size;break;case "polyline":e.width=c.width;break;case "polygon":e.outline={color:new g(c.outline.color),width:c.outline.width}}return e}var e={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},n={};(function(){var c,f,k,r,b,a,d,h;for(c in e)for(r in f=e[c],k=f.basemapGroups,b=n[c]={basemaps:[].concat(k.light).concat(k.dark),point:{},polyline:{},polygon:{}},k)for(a=k[r],d=0;d<a.length;d++)h=a[d],f.pointSchemes&&(b.point[h]=f.pointSchemes[r]),
f.lineSchemes&&(b.polyline[h]=f.lineSchemes[r]),f.polygonSchemes&&(b.polygon[h]=f.polygonSchemes[r])})();return{getAvailableThemes:function(c){var f=[],k,r,b;for(k in e)r=e[k],b=n[k],c&&b.basemaps&&-1===b.basemaps.indexOf(c)||f.push({name:r.name,label:r.label,description:r.description,basemaps:b.basemaps.slice(0)});return f},getSchemes:function(c){var f=c.basemap,e=c.geometryType;c=n[c.theme];var r;(c=(c=c&&c[e])&&c[f])&&(r={primaryScheme:p(c.primary,e),secondarySchemes:c.secondary.map(function(b){return p(b,
e)})});return r},cloneScheme:function(c){var f;c&&(f=q.mixin({},c),f.color&&(f.color=new g(f.color)),f.outline&&(f.outline={color:f.outline.color&&new g(f.outline.color),width:f.outline.width}));return f}}})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.hasHighlight=function(e){return e&&"function"===typeof e.highlight};g.scaleBoundsPredicate=function(e,g,c){return p.isNone(e)||e>c&&
(0===g||e<g)};g.extractSafeScaleBounds=function(e){return{minScale:e.minScale||0,maxScale:e.maxScale||0}}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(q,g,p,e,n,c,f,k,r){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||
this;a.displayField=null;a.exactMatch=null;a.searchFields=null;a.searchQueryParams=null;a.searchTemplate=null;a.suggestionTemplate=null;a.suggestQueryParams=null;a.getResults=function(b){return r.getResults(n({source:a},b))};a.getSuggestions=function(b){return r.getSuggestions(n({source:a},b))};return a}p(a,b);d=a;Object.defineProperty(a.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this._getLayerTitle()||
""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new d({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?
this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):
null,zoomScale:this.zoomScale})};a.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){if("string"===a.type)return b=a.name,!0});return b};a.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};a.prototype._getSearchFieldsString=function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var d=a.getField(b);return d&&d.alias||b}).join(", "):
""};a.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var d;e([f.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],a.prototype,"displayField",void 0);e([f.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],a.prototype,"exactMatch",void 0);e([f.property({value:null})],a.prototype,"layer",null);e([f.property({dependsOn:["layer.title","layer.loaded"]})],a.prototype,"name",null);
e([f.property()],a.prototype,"searchFields",void 0);e([f.property()],a.prototype,"searchQueryParams",void 0);e([f.property()],a.prototype,"searchTemplate",void 0);e([f.property()],a.prototype,"suggestionTemplate",void 0);e([f.property()],a.prototype,"suggestQueryParams",void 0);return a=d=e([f.subclass("esri.widgets.Search.LayerSearchSource")],a)}(f.declared(k))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(q,g,p,e,n,c,f){return function(c){function k(b){b=c.call(this)||this;b.autoNavigate=null;b.filter=null;b.getResults=null;b.getSuggestions=null;b.maxResults=null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.outFields=null;b.placeholder="";b.popupEnabled=null;b.popupTemplate=null;b.prefix="";b.resultGraphicEnabled=null;b.resultSymbol=null;b.searchExtent=null;b.suggestionsEnabled=null;b.suffix="";b.withinViewEnabled=!1;b.zoomScale=null;return b}p(k,c);e([f.property()],k.prototype,"autoNavigate",
void 0);e([f.property()],k.prototype,"filter",void 0);e([f.property()],k.prototype,"getResults",void 0);e([f.property()],k.prototype,"getSuggestions",void 0);e([f.property()],k.prototype,"maxResults",void 0);e([f.property()],k.prototype,"maxSuggestions",void 0);e([f.property()],k.prototype,"minSuggestCharacters",void 0);e([f.property()],k.prototype,"outFields",void 0);e([f.property()],k.prototype,"placeholder",void 0);e([f.property()],k.prototype,"popupEnabled",void 0);e([f.property()],k.prototype,
"popupTemplate",void 0);e([f.property()],k.prototype,"prefix",void 0);e([f.property()],k.prototype,"resultGraphicEnabled",void 0);e([f.property()],k.prototype,"resultSymbol",void 0);e([f.property()],k.prototype,"searchExtent",void 0);e([f.property()],k.prototype,"suggestionsEnabled",void 0);e([f.property()],k.prototype,"suffix",void 0);e([f.property()],k.prototype,"withinViewEnabled",void 0);e([f.property()],k.prototype,"zoomScale",void 0);return k=e([f.subclass("esri.widgets.Search.SearchSource")],
k)}(f.declared(c,n.Identifiable))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports dojo/date/locale ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),function(q,g,p,e,n,c,f,k,r,b){function a(a,b){var d=a.filter,h=a.searchExtent;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return d&&d.geometry||h||a}function d(a){return a?a.load().then(k.resolve).catch(k.reject):
k.resolve()}function h(a){return a&&!!a.get("capabilities.query.supportsPagination")}function l(a){var b="";a&&(a=a.fields)&&a.some(function(a){if("string"===a.type)return b=a.name,!0});return b}function t(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function u(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function m(a,b,d){var h=null;(a=a.codedValues)&&a.some(function(a){var c=a.name,c=d?c:c.toLowerCase();if((d?b:b.toLowerCase())===c)return h=a.code.toString(),
!0});return h}function x(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function G(a,b,d,h,c){var f=b.definitionExpression,l="";if(a){var e=D.test(b.url)&&u(a)?"N":"";d&&d.forEach(function(d){var f=b.getField(d);d=((d="function"===typeof b.getFieldDomain&&b.getFieldDomain(d))&&"coded-value"===d.type?m(d,a,c):null)||a||null;if(null!==d){var k=f.type,f=f.name;"string"===k||"date"===k?c?f=x(f+" \x3d "+e+"'"+d+"'",h):(d=d.toUpperCase(),f=x("UPPER("+f+") LIKE "+e+"'%"+d+"%'",h)):"oid"===k||"small-integer"===
k||"integer"===k||"single"===k||"double"===k?(d=Number(d),f=isNaN(d)?null:x(f+" \x3d "+d,h)):f=x(f+" \x3d "+d,h);f&&(l+=l?" OR ("+f+")":"("+f+")")}})}return f?"("+f+") AND ("+l+")":l}function v(a,b){var d=null;(a=a.codedValues)&&a.length&&a.some(function(a){if(a.code===b)return d=a.name,!0});return d}function w(a,b,d){var h=a.layer,c=a.attributes,f="function"===typeof h.getFieldDomain&&h.getFieldDomain(d);return b?e.substitute(b,c):d&&a.hasOwnProperty("attributes")&&c.hasOwnProperty(d)?(a=c[d],d=
h.getField(d),f&&"coded-value"===f.type?v(f,a):d&&"date"===d.type?p.format(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function y(a,b,d,h){return a.features.map(function(a){var c=a.attributes[a.layer.objectIdField];return{text:w(a,b.suggestionTemplate,h),key:c,sourceIndex:d}})}function z(a,d,h,f,l,e,m){return a.features.map(function(a){var k=a.clone(),t=a.layer,t=(t=t&&t.objectIdField)&&a.attributes[t];a=w(a,h.searchTemplate,l);var u=b.createExtentFromGeometry(k.geometry,
d,e);return{extent:m?b.scaleExtent(c.clone(u),d,m):u,feature:k,key:t,name:a,sourceIndex:f}})}Object.defineProperty(g,"__esModule",{value:!0});var D=/https?:\/\/services.*\.arcgis\.com/i,A=/(?:\{([^}]+)\})/g,B=f.getLogger("esri.widgets.Search.support.layerSearchUtils");g.getResults=function(b){var c=b.exactMatch,f=void 0===c?!1:c,e=b.location,m=b.maxResults,u=b.spatialReference,x=b.source,v=b.sourceIndex,g=b.suggestResult,w=b.view,y=x.layer,p=x.filter,D=x.zoomScale,H=w&&w.scale,K=a(x,w);return d(y).then(function(){return k.create(function(a,
b){var d=y.popupTemplate;if(d)return d.getRequiredFields(y.fields).then(function(b){return a(b)},b);a(null)})}).then(function(a){var b=y.objectIdField,d=y.returnZ,c=x.displayField||x.layer.displayField||l(x.layer);if(!y.getField(c))return B.error("invalid-field: displayField is invalid."),k.reject(new n("getResults():invalid-field","displayField is invalid."));a=a&&a.length?a:[c];var J=(a=x.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||J||a.push(b);if(!J&&!t(y,a))return B.error("invalid-field: outField is invalid."),
k.reject(new n("getResults():invalid-field","outField is invalid."));b=y.createQuery();(J=x.searchQueryParams)&&b.set(J);u&&(b.outSpatialReference=u,J=1/r.getMetersPerUnitForSR(u))&&(b.maxAllowableOffset=J);J=!!y.get("capabilities.data.supportsZ");b.returnZ=J&&!1!==d;b.returnGeometry=!0;a&&(b.outFields=a);if(e)b.geometry=e;else if(g.key)b.objectIds=[parseInt(g.key,10)];else{d=x.searchFields||[c];if(!t(y,d))return B.error("invalid-field: search field is invalid."),k.reject(new n("getResults():invalid-field",
"search field is invalid."));h(y)&&(b.num=m);K&&(b.geometry=K);a=g.text.trim();if(!a)return k.resolve();var J=x.prefix,C=x.suffix;a=(""+(void 0===J?"":J)+a+(void 0===C?"":C)).replace(/\'/g,"''");d=G(a,y,d,p,f);if(!d)return k.resolve();b.where=d}return y.queryFeatures(b).then(function(a){return z(a,w,x,v,c,H,D)})})};g.getSuggestions=function(b){var c=b.source,f=b.spatialReference,e=b.suggestTerm,m=b.maxSuggestions,u=b.sourceIndex,x=c.layer,v=c.filter,r=a(c,b.view);return d(x).then(function(){if(!h(x))return k.resolve();
var a=c.displayField||c.layer.displayField||l(c.layer),b=c.searchFields||[a],d=[];c.suggestionTemplate?c.suggestionTemplate.replace(A,function(a,b){d.push(b);return a}):d.push(a);var g=d&&-1!==d.indexOf("*");-1!==d.indexOf(x.objectIdField)||g||d.push(x.objectIdField);var C=!!x.getField(a),g=g||t(x,d),w=t(x,b);if(!C)return B.error("invalid-field: displayField is invalid."),k.reject(new n("getSuggestions():invalid-field","displayField is invalid."));if(!g)return B.error("invalid-field: outField is invalid."),
k.reject(new n("getSuggestions():invalid-field","outField is invalid."));if(!w)return B.error("invalid-field: search field is invalid."),k.reject(new n("getSuggestions():invalid-field","search field is invalid."));C=x.createQuery();(g=c.suggestQueryParams)&&C.set(g);C.outSpatialReference=f;C.returnGeometry=!1;C.num=m;C.outFields=d;r&&(C.geometry=r);g=e.trim();if(!g)return k.resolve();var w=c.prefix,E=c.suffix,g=(""+(void 0===w?"":w)+g+(void 0===E?"":E)).replace(/\'/g,"''"),b=G(g,x,b,v,!1);if(!b)return k.resolve();
C.where=b;return x.queryFeatures(C).then(function(b){return y(b,c,u,a)})})}})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(q,g,p,e,n,c,f,k,r){function b(a,b,d,c){return c.replace(/([a-z])\1*/ig,function(l){var m,k,t=l.charAt(0);l=l.length;var u=["abbr","wide","narrow"];switch(t){case "G":m=b[4>l?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":m=a.getFullYear();
switch(l){case 1:break;case 2:if(!d.fullYear){m=String(m);m=m.substr(m.length-2);break}default:k=!0}break;case "Q":case "q":m=Math.ceil((a.getMonth()+1)/3);k=!0;break;case "M":case "L":m=a.getMonth();3>l?(m+=1,k=!0):(t=["months","L"==t?"standAlone":"format",u[l-3]].join("-"),m=b[t][m]);break;case "w":m=h._getWeekOfYear(a,0);k=!0;break;case "d":m=a.getDate();k=!0;break;case "D":m=h._getDayOfYear(a);k=!0;break;case "e":case "c":if(m=a.getDay(),2>l){m=(m-e.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":m=
a.getDay();3>l?(m+=1,k=!0):(t=["days","c"==t?"standAlone":"format",u[l-3]].join("-"),m=b[t][m]);break;case "a":t=12>a.getHours()?"am":"pm";m=d[t]||b["dayPeriods-format-wide-"+t];break;case "h":case "H":case "K":case "k":k=a.getHours();switch(t){case "h":m=k%12||12;break;case "H":m=k;break;case "K":m=k%12;break;case "k":m=k||24}k=!0;break;case "m":m=a.getMinutes();k=!0;break;case "s":m=a.getSeconds();k=!0;break;case "S":m=Math.round(a.getMilliseconds()*Math.pow(10,l-3));k=!0;break;case "v":case "z":if(m=
h._getZone(a,!0,d))break;l=4;case "Z":t=h._getZone(a,!1,d);t=[0>=t?"+":"-",f.pad(Math.floor(Math.abs(t)/60),2),f.pad(Math.abs(t)%60,2)];4==l&&(t.splice(0,0,"GMT"),t.splice(3,0,":"));m=t.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+c);}k&&(m=f.pad(m,l));return m})}function a(a,b,d,h){var c=function(a){return a};b=b||c;d=d||c;h=h||c;var f=a.match(/(''|[^'])+/g),l="'"==a.charAt(0);g.forEach(f,function(a,h){a?(f[h]=(l?d:b)(a.replace(/''/g,"'")),l=!l):f[h]=""});
return h(f.join(""))}function d(a,b,d,h){h=c.escapeString(h);d.strict||(h=h.replace(" a"," ?a"));return h.replace(/([a-z])\1*/ig,function(h){var c;c=h.charAt(0);var f=h.length,m="",e="";d.strict?(1<f&&(m="0{"+(f-1)+"}"),2<f&&(e="0{"+(f-2)+"}")):(m="0?",e="0{0,2}");switch(c){case "y":c="\\d{2,4}";break;case "M":case "L":2<f?(c=b["months-"+("L"==c?"standAlone":"format")+"-"+l[f-3]].slice(0).join("|"),d.strict||(c=c.replace(/\./g,""),c="(?:"+c+")\\.?")):c="1[0-2]|"+m+"[1-9]";break;case "D":c="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+
m+"[1-9][0-9]|"+e+"[1-9]";break;case "d":c="3[01]|[12]\\d|"+m+"[1-9]";break;case "w":c="[1-4][0-9]|5[0-3]|"+m+"[1-9]";break;case "E":case "e":case "c":c=".+?";break;case "h":c="1[0-2]|"+m+"[1-9]";break;case "k":c="1[01]|"+m+"\\d";break;case "H":c="1\\d|2[0-3]|"+m+"\\d";break;case "K":c="1\\d|2[0-4]|"+m+"[1-9]";break;case "m":case "s":c="[0-5]\\d";break;case "S":c="\\d{"+f+"}";break;case "a":f=d.am||b["dayPeriods-format-wide-am"];m=d.pm||b["dayPeriods-format-wide-pm"];c=f+"|"+m;d.strict||(f!=f.toLowerCase()&&
(c+="|"+f.toLowerCase()),m!=m.toLowerCase()&&(c+="|"+m.toLowerCase()),-1!=c.indexOf(".")&&(c+="|"+c.replace(/\./g,"")));c=c.replace(/\./g,"\\.");break;default:c=".*"}a&&a.push(h);return"("+c+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var h={};q.setObject(r.id.replace(/\//g,"."),h);h._getZone=function(a,b,d){return b?p.getTimezoneName(a):a.getTimezoneOffset()};h.format=function(d,c){c=c||{};var f=n.normalizeLocale(c.locale),l=c.formatLength||"short",f=h._getGregorianBundle(f),m=[];d=q.hitch(this,b,d,f,
c);if("year"==c.selector)return a(f["dateFormatItem-yyyy"]||"yyyy",d);var e;"date"!=c.selector&&(e=c.timePattern||f["timeFormat-"+l])&&m.push(a(e,d));"time"!=c.selector&&(e=c.datePattern||f["dateFormat-"+l])&&m.push(a(e,d));return 1==m.length?m[0]:f["dateTimeFormat-"+l].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return m[b]})};h.regexp=function(a){return h._parseInfo(a).regexp};h._parseInfo=function(b){b=b||{};var c=n.normalizeLocale(b.locale),c=h._getGregorianBundle(c),f=b.formatLength||
"short",l=b.datePattern||c["dateFormat-"+f],e=b.timePattern||c["timeFormat-"+f],f="date"==b.selector?l:"time"==b.selector?e:c["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[e,l][b]}),m=[];return{regexp:a(f,q.hitch(this,d,m,c,b)),tokens:m,bundle:c}};h.parse=function(a,b){var d=/[\u200E\u200F\u202A\u202E]/g,c=h._parseInfo(b),f=c.tokens,l=c.bundle;a=(new RegExp("^"+c.regexp.replace(d,"")+"$",c.strict?"":"i")).exec(a&&a.replace(d,""));if(!a)return null;var e=["abbr","wide","narrow"],m=
[1970,0,1,0,0,0,0],k="";a=g.every(a,function(a,d){if(!d)return!0;var h=f[d-1];d=h.length;h=h.charAt(0);switch(h){case "y":if(2!=d&&b.strict)m[0]=a;else if(100>a)a=Number(a),h=""+(new Date).getFullYear(),d=100*h.substring(0,2),h=Math.min(Number(h.substring(2,4))+20,99),m[0]=a<h?d+a:d-100+a;else{if(b.strict)return!1;m[0]=a}break;case "M":case "L":if(2<d){if(d=l["months-"+("L"==h?"standAlone":"format")+"-"+e[d-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),d=g.map(d,function(a){return a.replace(".",
"").toLowerCase()})),a=g.indexOf(d,a),-1==a)return!1}else a--;m[1]=a;break;case "E":case "e":case "c":d=l["days-"+("c"==h?"standAlone":"format")+"-"+e[d-3]].concat();b.strict||(a=a.toLowerCase(),d=g.map(d,function(a){return a.toLowerCase()}));a=g.indexOf(d,a);if(-1==a)return!1;break;case "D":m[1]=0;case "d":m[2]=a;break;case "a":d=b.am||l["dayPeriods-format-wide-am"];h=b.pm||l["dayPeriods-format-wide-pm"];if(!b.strict){var c=/\./g;a=a.replace(c,"").toLowerCase();d=d.replace(c,"").toLowerCase();h=
h.replace(c,"").toLowerCase()}if(b.strict&&a!=d&&a!=h)return!1;k=a==h?"p":a==d?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;m[3]=a;break;case "m":m[4]=a;break;case "s":m[5]=a;break;case "S":m[6]=a}return!0});d=+m[3];"p"===k&&12>d?m[3]=d+12:"a"===k&&12==d&&(m[3]=0);d=new Date(m[0],m[1],m[2],m[3],m[4],m[5],m[6]);b.strict&&d.setFullYear(m[0]);var t=f.join(""),c=-1!=t.indexOf("d"),t=-1!=t.indexOf("M");if(!a||t&&d.getMonth()>m[1]||c&&d.getDate()>m[2])return null;if(t&&
d.getMonth()<m[1]||c&&d.getDate()<m[2])d=p.add(d,"hour",1);return d};var l=["abbr","wide","narrow"],t=[],u={};h.addCustomFormats=function(a,b){t.push({pkg:a,name:b});u={}};h._getGregorianBundle=function(a){if(u[a])return u[a];var b={};g.forEach(t,function(d){d=n.getLocalization(d.pkg,d.name,a);b=q.mixin(b,d)},this);return u[a]=b};h.addCustomFormats(r.id.replace(/\/date\/locale$/,".cldr"),"gregorian");h.getNames=function(a,b,d,c){var f;c=h._getGregorianBundle(c);a=[a,d,b];"standAlone"==d&&(d=a.join("-"),
f=c[d],1==f[0]&&(f=void 0));a[1]="format";return(f||c[a.join("-")]).concat()};h.isWeekend=function(a,b){b=e.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};h._getDayOfYear=function(a){return p.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};h._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var d=(new Date(a.getFullYear(),0,1)).getDay(),c=(d-b+7)%7,c=Math.floor((h._getDayOfYear(a)+c-1)/7);d==b&&c++;return c};return h})},
"dojo/date":function(){define(["./has","./_base/lang"],function(q,g){var p={getDaysInMonth:function(e){var g=e.getMonth();return 1==g&&p.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][g]},isLeapYear:function(e){e=e.getFullYear();return!(e%400)||!(e%4)&&!!(e%100)},getTimezoneName:function(e){var g=e.toString(),c="",f=g.indexOf("(");if(-1<f)c=g.substring(++f,g.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,g=g.match(f))c=g[1];else if(g=e.toLocaleString(),f=/ ([A-Z\/]+)$/,g=g.match(f))c=g[1];return"AM"==
c||"PM"==c?"":c},compare:function(e,g,c){e=new Date(+e);g=new Date(+(g||new Date));"date"==c?(e.setHours(0,0,0,0),g.setHours(0,0,0,0)):"time"==c&&(e.setFullYear(0,0,0),g.setFullYear(0,0,0));return e>g?1:e<g?-1:0},add:function(e,g,c){var f=new Date(+e),k=!1,r="Date";switch(g){case "day":break;case "weekday":var b;(g=c%5)?b=parseInt(c/5):(g=0<c?5:-5,b=0<c?(c-5)/5:(c+5)/5);var a=e.getDay(),d=0;6==a&&0<c?d=1:0==a&&0>c&&(d=-1);a+=g;if(0==a||6==a)d=0<c?2:-2;c=7*b+g+d;break;case "year":r="FullYear";k=!0;
break;case "week":c*=7;break;case "quarter":c*=3;case "month":k=!0;r="Month";break;default:r="UTC"+g.charAt(0).toUpperCase()+g.substring(1)+"s"}if(r)f["set"+r](f["get"+r]()+c);k&&f.getDate()<e.getDate()&&f.setDate(0);return f},difference:function(e,g,c){g=g||new Date;c=c||"day";var f=g.getFullYear()-e.getFullYear(),k=1;switch(c){case "quarter":e=e.getMonth();g=g.getMonth();k=Math.floor(g/3)+1+4*f-(Math.floor(e/3)+1);break;case "weekday":f=Math.round(p.difference(e,g,"day"));c=parseInt(p.difference(e,
g,"week"));if(0==f%7)f=5*c;else{var k=0,r=e.getDay(),b=g.getDay();c=parseInt(f/7);g=f%7;e=new Date(e);e.setDate(e.getDate()+7*c);e=e.getDay();if(0<f)switch(!0){case 6==r:k=-1;break;case 0==r:k=0;break;case 6==b:k=-1;break;case 0==b:k=-2;break;case 5<e+g:k=-2}else if(0>f)switch(!0){case 6==r:k=0;break;case 0==r:k=1;break;case 6==b:k=2;break;case 0==b:k=1;break;case 0>e+g:k=2}f=f+k-2*c}k=f;break;case "year":k=f;break;case "month":k=g.getMonth()-e.getMonth()+12*f;break;case "week":k=parseInt(p.difference(e,
g,"day")/7);break;case "day":k/=24;case "hour":k/=60;case "minute":k/=60;case "second":k/=1E3;case "millisecond":k*=g.getTime()-e.getTime()}return Math.round(k)}};g.mixin(g.getObject("dojo.date",!0),p);return p})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(q,g){var p={};q.setObject("dojo.cldr.supplemental",p);p.getFirstDayOfWeek=function(e){e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,
br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[p._region(e)];return void 0===e?1:e};p._region=function(e){e=g.normalizeLocale(e);e=e.split("-");var n=e[1];n?4==n.length&&(n=e[2]):n={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",
bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",
kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",
sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",
bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",
hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",
mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",
ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[e[0]];return n};p.getWeekend=
function(e){var g=p._region(e);e={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[g];g={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[g];void 0===e&&(e=6);void 0===g&&(g=0);return{start:e,end:g}};return p})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(q,g){var p=/[&<>'"\/]/g,e={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},
n={};g.setObject("dojo.string",n);n.escape=function(c){return c?c.replace(p,function(c){return e[c]}):""};n.rep=function(c,f){if(0>=f||!c)return"";for(var e=[];;){f&1&&e.push(c);if(!(f>>=1))break;c+=c}return e.join("")};n.pad=function(c,f,e,g){e||(e="0");c=String(c);f=n.rep(e,Math.ceil((f-c.length)/e.length));return g?c+f:f+c};n.substitute=function(c,f,e,r){r=r||q.global;e=e?g.hitch(r,e):function(b){return b};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,a,d){if(""==a)return"$";
b=g.getObject(a,!1,f);d&&(b=g.getObject(d,!1,r).call(r,b,a));d=e(b,a);if("undefined"===typeof d)throw Error('string.substitute could not find key "'+a+'" in template');return d.toString()})};n.trim=String.prototype.trim?g.trim:function(c){c=c.replace(/^\s+/,"");for(var f=c.length-1;0<=f;f--)if(/\S/.test(c.charAt(f))){c=c.substring(0,f+1);break}return c};return n})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(q,g,p,e,n,c,f,k,r){function b(a,b,c){var d=a.hasZ?a.z:void 0;return b&&b.map?(c?k.getExtentForScale(b,c):b.extent).clone().centerAt(a).set({zmax:d,zmin:d}):new p.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:d,zmax:d})}Object.defineProperty(g,"__esModule",{value:!0});var a=n.getLogger("esri.widgets.Search.support.geometryUtils");g.getPointWithElevation=function(b,h){return h?b?b.hasZ||h instanceof r?f.resolve(b):(h=h.get("map.ground"))&&
h.layers.length?h.queryElevation(b).then(function(a){return a.geometry}):f.resolve(b):(a.error("missing-parameter: point is missing."),f.reject(new e("searchgeometryutils:missing-parameter","point is missing."))):(a.error("missing-parameter: view is missing."),f.reject(new e("searchgeometryutils:missing-parameter","view is missing.")))};g.getPointFromGeometry=function(a){return a instanceof p.Point?a:a instanceof p.Extent?a.center:a instanceof p.Polygon?a.centroid:a instanceof p.Multipoint?a.getPoint(0):
a instanceof p.Polyline?a.getPoint(0,0):null};g.createExtentFromGeometry=function(a,h,f){if(c.isNone(a))return null;if(a instanceof p.Extent)return a;if(a instanceof p.Multipoint||a instanceof p.Polygon||a instanceof p.Polyline)return a.extent;if(a instanceof p.Point)return b(a,h,f)};g.scaleExtent=function(a,h,f){return c.isNone(a)||c.isNone(h)?null:b(a.center,h,f)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/unitUtils"],function(q,g,p,e){function n(c,
f){f=e.getMetersPerUnitForSR(f);return c/(f*e.inchesPerMeter*p.screenDPI)}Object.defineProperty(g,"__esModule",{value:!0});g.getScale=function(c,f){f=f||c.extent;c=c.width;var k=e.getMetersPerUnitForSR(f&&f.spatialReference);return f&&c?f.width/c*k*e.inchesPerMeter*p.screenDPI:0};g.getResolutionForScale=n;g.getScaleForResolution=function(c,f){f=e.getMetersPerUnitForSR(f);return c*f*e.inchesPerMeter*p.screenDPI};g.getExtentForScale=function(c,f){var e=c.extent;c=c.width;f=n(f,e.spatialReference);return e.clone().expand(f*
c/e.width)}})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/Error ../core/Handles ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w,y,z,D){function A(){return c(this,void 0,void 0,function(){var a,b,d,h,c,f,l;return n(this,function(e){switch(e.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=e.sent(),b=a[1],d=b.GraphicsView2D,h=b.LabelManager,c=b.MapViewNavigation,f=b.MagnifierView2D,l=a[2].Stage,C=d,E=h,I=c,F=f,H=l,[2]}})})}
var B=a.getLogger("esri.views.MapView"),H,C,E,I,F;return function(a){function c(b){b=a.call(this,b)||this;b._magnifierView=null;b._mapViewHandles=new r;b._stage=null;b._resolveWhenReady=[];b.highlightOptions=new w;b.magnifier=new x;b.inputManager=new v({view:b});b.mapViewNavigation=null;b.supersampleScreenhotsEnabled=!0;b.ui=new D;b.rendering=!1;t.initialize();return b}p(c,a);Object.defineProperty(c.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});c.prototype.toMap=function(a){if(h.isSupportedScreenPointEvent(a)){var b=h.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[b])}return this.inherited(arguments)};c.prototype.hitTest=function(a){var b=h.isSupportedScreenPointEvent(a)?h.createScreenPointFromSupportedEvent(this,
a):a;if(!this.internallyReady||isNaN(b.x)||isNaN(b.y))return d.resolve({screenPoint:b,results:[]});var c=this.toMap(b);a=[this.graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());return d.all(a.map(function(a){return a&&a.hitTest?a.hitTest(b.x,b.y):null})).then(function(a){return{screenPoint:b,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:c,graphic:a}})}})};c.prototype.takeScreenshot=function(a){return this.internallyReady?this._stage.takeScreenshot(y.toRenderSettings(a,
this),this.allLayerViews):d.reject("Map view cannot be used before it is ready")};c.prototype.on=function(a,b,d){var h=this.inputManager&&this.inputManager.viewEvents.register(a,b,d);return h?h:this.inherited(arguments)};c.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};c.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};c.prototype.whenReady=function(){var a=this;
return d.create(function(b){a.internallyReady?b(a):a._resolveWhenReady.push(b)})};c.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};c.prototype.validate=function(){var a=z.check({supportsMajorWebPerformanceCaveat:!0});b("safari")&&9>b("safari")&&(a=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:b("safari")}));return a?(B.warn("#validate()",a.message),d.reject(a)):f.safeCast(A())};c.prototype._startup=
function(){var a=this;if(!this.internallyReady){this.inherited(arguments);this.graphics.owner=this;var b=new H(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions}}),d=new C({view:this,graphics:this.graphics}),h=new I({view:this,animationManager:this.animationManager}),c=new E({view:this});this._magnifierView=new F;this._magnifierView.magnifier=
this.magnifier;this._stage=b;this._frameTask.graphicsView=d;this._set("graphicsView",d);this._set("mapViewNavigation",h);this._set("labelManager",c);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",
function(d){return b.state=a.state},!0),this.watch("background",function(a){return b.background=a},!0),this.watch("magnifier",function(b){return a._magnifierView.magnifier=b},!0),l.init(this,"highlightOptions.color,highlightOptions.haloOpacity,highlightOptions.fillOpacity",function(){a._stage.setHighlightOptions(a.highlightOptions);a._stage.requestRender()})]);b.state=this.state;b.background=this.background;this._updateStageChildren();d=this._resolveWhenReady;this._resolveWhenReady=[];d.forEach(function(b){return b(a)})}};
c.prototype._tearDown=function(){this.internallyReady&&(this._mapViewHandles.removeAll(),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.inherited(arguments))};c.prototype._updateStageChildren=function(){var a=
this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,d){a._stage.addChildAt(b.container,d)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};e([u.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],c.prototype,"background",null);e([u.property({type:w})],c.prototype,"highlightOptions",void 0);e([u.property({type:x})],c.prototype,"magnifier",void 0);e([u.property({readOnly:!0})],
c.prototype,"inputManager",void 0);e([u.property({readOnly:!0})],c.prototype,"mapViewNavigation",void 0);e([u.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],c.prototype,"interacting",null);e([u.property({type:Boolean,constructOnly:!0})],c.prototype,"supersampleScreenhotsEnabled",void 0);e([u.property({type:D})],c.prototype,"ui",void 0);e([u.property({readOnly:!0})],c.prototype,"rendering",void 0);e([u.property({constructOnly:!0})],c.prototype,"renderCanvas",void 0);e([u.property({constructOnly:!0})],
c.prototype,"deactivatedWebGLExtensions",void 0);e([u.property({constructOnly:!0})],c.prototype,"debugWebGLExtensions",void 0);return c=e([u.subclass("esri.views.MapView")],c)}(u.declared(G,m))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(q,
g,p,e,n,c,f,k,r,b,a){function d(a,b){return b?h[a].valueToClassName[b].split(" "):[]}var h={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l={xsmall:544,small:768,medium:992,large:1200};return function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b._breakpointsHandles=new k;b.breakpoints=l;b.orientation=null;b.widthBreakpoint=null;b.heightBreakpoint=null;return b}p(c,a);c.prototype.initialize=function(){this._breakpointsHandles.add(r.init(this,["breakpoints","size"],this._updateClassNames))};c.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};c.prototype._updateClassNames=function(){if(this.container){var a=
f.acquire(),b=f.acquire(),c=!1,l,e,k;for(l in h)e=this[l],k=h[l].getValue({viewSize:this.size,breakpoints:this.breakpoints}),e!==k&&(c=!0,this[l]=k,d(l,e).forEach(function(a){return b.push(a)}),d(l,k).forEach(function(b){return a.push(b)}));c&&(this._applyClassNameChanges(a,b),f.release(a),f.release(b))}};c.prototype._applyClassNameChanges=function(a,b){var d=this.container;d&&(b.forEach(function(a){return d.classList.remove(a)}),a.forEach(function(a){return d.classList.add(a)}))};c.prototype._removeActiveClassNames=
function(){var a=this.container;if(a)for(var b in h)d(b,this[b]).forEach(function(b){return a.classList.remove(b)})};e([b.property({set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var d=JSON.stringify(l,null,2);console.warn("provided breakpoints are not valid, using defaults:"+d)}a=b?a:l;this._set("breakpoints",n({},a))}}})],c.prototype,"breakpoints",void 0);e([b.property()],c.prototype,"orientation",void 0);e([b.property()],
c.prototype,"widthBreakpoint",void 0);e([b.property()],c.prototype,"heightBreakpoint",void 0);return c=e([b.subclass("esri.views.BreakpointsOwner")],c)}(b.declared(c,a))})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/domUtils ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(q,
g,p,e,n,c,f,k,r,b,a,d,h){function l(a){a&&(c.empty(a),a.parentNode&&a.parentNode.removeChild(a))}var t=[0,0];return function(f){function m(){var a=f.call(this)||this;a._domHandles=new k;a._freqInfo={freq:16,time:750};a._overlayRenderTaskHandle=null;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.ui=null;a.userContent=null;a.width=0;a.watch("cursor",function(b){var d=a.surface;d&&d.setAttribute("data-cursor",b)});a.watch("interacting",function(b){var d=a.surface;
d&&d.setAttribute("data-interacting",b.toString())});return a}p(m,f);m.prototype.initialize=function(){var a=this;this.watch("ui",this._handleUIChange);this._wireUI(this.ui);this._focusHandle=this.on("focus",function(){return a.notifyChange("focused")});this._blurHandle=this.on("blur",function(){return a.notifyChange("focused")})};m.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null,this._domHandles.destroy(),
this._focusHandle&&(this._focusHandle.remove(),this._focusHandle=null),this._blurHandle&&(this._blurHandle.remove(),this._blurHandle=null))};Object.defineProperty(m.prototype,"container",{set:function(a){var h=this,f=this._get("container");if(f!==a)if(this._domHandles.remove("dom-size"),this._stopMeasuring(),f&&(f.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
l(this.root),this._set("root",null),c.reparent(this.userContent,f),l(this.userContent),this._set("userContent",null)),a){a.classList.add("esri-view");f=document.createElement("div");f.className="esri-view-user-storage";c.reparent(a,f);a.appendChild(f);this._set("userContent",f);f=document.createElement("div");f.className="esri-view-root";a.insertBefore(f,a.firstChild);this._set("root",f);var e=document.createElement("div");e.className="esri-view-surface";e.setAttribute("role","application");e.tabIndex=
0;f.appendChild(e);this._set("surface",e);var m=new d;f.appendChild(m.surface);this._set("overlay",m);m.watch("needsRender",function(a){a&&!h._overlayRenderTaskHandle?h._overlayRenderTaskHandle=r.addFrameTask({render:function(){h.overlay.render()}}):h._overlayRenderTaskHandle&&(h._overlayRenderTaskHandle.remove(),h._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this._domHandles.add(b.init(this,"size",function(a){var b=a[1];e.classList.toggle("esri-view-surface--inset-outline",a[0]>=document.body.clientWidth||
b>=document.body.clientHeight)}),"dom-size");this._set("container",a);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"focused",{get:function(){var a=document.activeElement===this.surface;return document.hasFocus()&&a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"popup",{get:function(){return this._get("popup")||
new h({view:this})},set:function(a){var b=this._get("popup");b&&b!==a&&b.destroy();this._set("popup",a)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});m.prototype.blur=function(){this.surface&&this.surface.blur()};m.prototype.focus=function(){this.surface&&this.surface.focus()};m.prototype.pageToContainer=function(a,b,d){var h=this.position;a-=h[0];b-=h[1];d?(d[0]=a,d[1]=b):d=[a,b];return d};
m.prototype.containerToPage=function(a,b,d){var h=this.position;a+=h[0];b+=h[1];d?(d[0]=a,d[1]=b):d=[a,b];return d};m.prototype._handleUIChange=function(a,b){b&&(this._domHandles.remove("ui"),b.destroy());a&&this._wireUI(a);this._set("ui",a)};m.prototype._wireUI=function(a){this._domHandles.remove("ui");a&&(a.view=this,this._domHandles.add([b.init(this,"root",function(b){if(b){var d=document.createElement("div");b.appendChild(d);b=d}else b=null;a.container=b}),b.init(this,"popup",function(b,d){d&&
a.remove(d,"popup");b&&(b.view=a.view,a.add(b,{key:"popup",position:"manual"}))})],"ui"))};m.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};m.prototype._startMeasuring=function(){var a=this,b=this._freqInfo;b.freq=16;b.time=750;this._domHandles.add([function(){var a=function(){b.freq=16;b.time=750};window.addEventListener("resize",a);return{remove:function(){window.removeEventListener("resize",a)}}}(),r.addFrameTask({prepare:function(b){var d=
a._measure(),h=a._freqInfo;h.time+=b.deltaTime;d&&(h.freq=16,a._get("resizing")||a._set("resizing",!0));h.time<h.freq||(h.time=0,a._position()||d?h.freq=16:h.freq=Math.min(750,2*h.freq),!d&&512<=h.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};m.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,d=a?a.clientHeight:0;if(0===b||0===d||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",
!0),!1;var a=this.width,h=this.height;if(b===a&&d===h)return this.suspended&&this._set("suspended",!1),!1;this._set("width",b);this._set("height",d);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:a,oldHeight:h,width:b,height:d});return!0};m.prototype._position=function(){var a=this.container,b=this.position,d=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();t[0]=a.left+d.pageXOffset;t[1]=a.top+d.pageYOffset;return b&&t[0]===b[0]&&t[1]===b[1]?!1:(this._set("position",
[t[0],t[1]]),!0)};m.prototype.forceDOMReadyCycle=function(){};e([a.property({value:null,cast:function(a){return c.byId(a)}})],m.prototype,"container",null);e([a.property({readOnly:!0,dependsOn:["surface"]})],m.prototype,"focused",null);e([a.property({readOnly:!0})],m.prototype,"height",void 0);e([a.property({type:h})],m.prototype,"popup",null);e([a.property({type:d})],m.prototype,"overlay",void 0);e([a.property({readOnly:!0})],m.prototype,"position",void 0);e([a.property({readOnly:!0})],m.prototype,
"resizing",void 0);e([a.property({readOnly:!0})],m.prototype,"root",void 0);e([a.property({value:null,dependsOn:["width","height"],readOnly:!0})],m.prototype,"size",null);e([a.property({readOnly:!0})],m.prototype,"surface",void 0);e([a.property({readOnly:!0})],m.prototype,"suspended",void 0);e([a.property()],m.prototype,"ui",void 0);e([a.property({readOnly:!0})],m.prototype,"userContent",void 0);e([a.property({readOnly:!0})],m.prototype,"width",void 0);return m=e([a.subclass("esri.views.DOMContainer")],
m)}(a.declared(n,f))})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),function(q,g,p,e,n,c,f,k){return function(g){function b(){var a=null!==g&&g.apply(this,arguments)||this;a.items=new c;a._callbacks=new Map;a._projector=k.createProjector();a._hiddenProjector=k.createProjector();return a}p(b,g);Object.defineProperty(b.prototype,
"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});b.prototype.initialize=function(){var a=this,b=document.createElement("div");b.className="esri-overlay-surface";this._set("surface",b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");b.appendChild(this._hiddenSurface);this._itemsChangeHandle=this.items.on("change",function(b){b.added.map(function(b){var d=function(){return b.render()};a._callbacks.set(b,
d);a._projector.append(a.surface,d)});b.removed.map(function(b){var d=a._projector.detach(a._callbacks.get(b));a.surface.removeChild(d.domNode);a._callbacks.delete(b)})})};b.prototype.addItem=function(a){this.items.add(a)};b.prototype.removeItem=function(a){this.items.remove(a)};b.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=null};b.prototype.render=function(){this._projector.renderNow()};b.prototype.computeBoundingRect=function(a){var b=
this._hiddenSurface,h=this._hiddenProjector,c=null,f=function(){return c=a.render()};h.append(b,f);h.renderNow();var e={left:0,top:0,right:0,bottom:0};if(c&&c.domNode){var m=c.domNode.getBoundingClientRect();e.left=m.left;e.top=m.top;e.right=m.right;e.bottom=m.bottom}for(h.detach(f);b.firstChild;)b.removeChild(b.firstChild);return e};b.prototype.overlaps=function(a,b){a=this.computeBoundingRect(a);b=this.computeBoundingRect(b);return Math.max(a.left,b.left)<=Math.min(a.right,b.right)&&Math.max(a.top,
b.top)<=Math.min(a.bottom,b.bottom)};Object.defineProperty(b.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(a){return a.visible})},enumerable:!0,configurable:!0});b.prototype.renderCanvas=function(a){if(this.items.some(function(a){return a.visible})){var b=a.getContext("2d");b.save();b.font="10px "+getComputedStyle(this.surface).fontFamily;this.items.forEach(function(a){b.save();a.renderCanvas(b);b.restore()});b.restore()}};e([f.property({readOnly:!0})],b.prototype,"surface",
void 0);e([f.property({readOnly:!0})],b.prototype,"items",void 0);e([f.property({readOnly:!0,dependsOn:["items.length"]})],b.prototype,"needsRender",null);return b=e([f.subclass("esri.views.overlay.ViewOverlay")],b)}(f.declared(n))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w){function y(a,b){return void 0===b?"esri-popup__"+a:"esri-popup__"+a+"-"+b}function z(){return f(this,void 0,void 0,function(){return c(this,function(a){return[2,l.create(function(a){q(["./Feature"],function(b){a(b)})})]})})}var D={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},A=h.getLogger("esri.widgets.Popup");return function(h){function l(a){var b=h.call(this)||this;b._blurContainer=!1;b._containerNode=null;b._mainContainerNode=null;
b._featureMenuNode=null;b._actionsMenuNode=null;b._focusContainer=!1;b._focusDockButton=!1;b._focusFeatureMenuButton=!1;b._focusActionsMenuButton=!1;b._focusFirstFeature=!1;b._focusFirstAction=!1;b._handles=new d;b._pointerOffsetInPx=16;b._spinner=null;b.actions=null;b.alignment="auto";b.autoCloseEnabled=null;b.autoOpenEnabled=null;b.defaultPopupTemplateEnabled=null;b.content=null;b.collapsed=!1;b.collapseEnabled=!0;b.dockEnabled=!1;b.featureCount=null;b.features=null;b.featureNavigationEnabled=!0;
b.goToOverride=null;b.highlightEnabled=null;b.location=null;b.featureWidgets=[];b.promises=null;b.selectedFeature=null;b.selectedFeatureIndex=null;b.selectedFeatureWidget=null;b.spinnerEnabled=!0;b.title=null;b.updateLocationEnabled=null;b.view=null;b.viewModel=new G;b.visible=null;b._addSelectedFeatureIndexHandle();b.own([t.watch(b,"viewModel.screenLocation",function(){return b._positionContainer()}),t.watch(b,["viewModel.visible","dockEnabled"],function(){return b._toggleScreenLocationEnabled()}),
t.watch(b,"viewModel.screenLocation",function(a,d){!!a!==!!d&&b.reposition()}),t.watch(b,"viewModel.features",function(){return b._updateFeatureWidgets()}),t.watch(b,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return b.reposition()}),t.watch(b,"spinnerEnabled",function(a){return b._spinnerEnabledChange(a)}),t.watch(b,"viewModel.view.size",function(a,d){return b._updateDockEnabledForViewSize(a,d)}),t.watch(b,
"viewModel.view",function(a,d){return b._viewChange(a,d)}),t.watch(b,"viewModel.view.ready",function(a,d){return b._viewReadyChange(a,d)}),t.watch(b,["viewModel.waitingForResult","viewModel.location"],function(){return b._displaySpinner()}),t.watch(b,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return b._updateFeatureWidget()}),t.watch(b,"selectedFeatureWidget.viewModel.title",function(a){return b._setTitleFromFeatureWidget(a)}),t.watch(b,["selectedFeatureWidget.viewModel.content",
"selectedFeatureWidget.viewModel.waitingForContent"],function(){return b._setContentFromFeatureWidget()}),t.whenFalse(b,"collapsed",function(){"xsmall"===b.get("viewModel.view.widthBreakpoint")&&b.visible&&b.collapseEnabled&&b.viewModel.centerAtLocation()})]);return b}p(l,h);l.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(l.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible?
this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||D},set:function(a){var b=
n({},D),d=this.get("viewModel.view.breakpoints"),h={};d&&(h.width=d.xsmall,h.height=d.xsmall);a=n({},b,a);b=n({},b.breakpoint,h);h=a.breakpoint;!0===h?a.breakpoint=b:"object"===typeof h&&(a.breakpoint=n({},b,h));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",!!a)},
enumerable:!0,configurable:!0});l.prototype.blur=function(){this.visible||A.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};l.prototype.clear=function(){};l.prototype.close=function(){this.visible=!1};l.prototype.focus=function(){this.visible||A.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};l.prototype.next=function(){return null};l.prototype.open=function(a){this._handles.remove("selected-index");
var b={collapsed:a?!!a.collapsed:!1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(b.collapsed=!0);this.set(b);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};l.prototype.previous=function(){return null};l.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};l.prototype.triggerAction=function(a){return null};l.prototype.render=function(){var a=
this,d,h,c,f,l,e,m,t=this.actionsMenuOpen,u=this.collapsed,g=this.collapseEnabled,x=this.dockEnabled,n=this.featureMenuOpen,K=this.featureNavigationEnabled,G=this.featureWidgets,p=this.visible,z=this.viewModel,D=z.content,J=z.featureCount,ga=z.pendingPromisesCount,Z=z.selectedFeatureIndex,q=z.title,A=1<J&&K,H=A?2:3,K=this._divideActions(H),B=K.inlineActions,aa=K.menuActions,K=A&&n,z=1<aa.length&&t,ca=A&&this._getPageText(J,Z),da=this._renderContent(),Y=w.isRTL(),ea=!!(this.get("selectedFeatureWidget")?
this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):da),ha=(g=!!(g&&q&&ea))&&!K&&u,ba=this.get("viewModel.view.widthBreakpoint"),fa=x?r.undock:r.dock,u=this.currentAlignment,J=this.currentDockPosition,ga=ga?v.tsx("div",{key:y("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":k.loading,title:k.loading},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
"esri-rotating")})):null,ia=(d={},d["esri-icon-right-triangle-arrow"]=Y,d["esri-popup__pagination-previous-icon--rtl"]=Y,d["esri-icon-left-triangle-arrow"]=!Y,d["esri-popup__pagination-previous-icon"]=!Y,d);d=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",ia)});ia=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":r.previous,title:r.previous},
d);d=(h={},h["esri-icon-left-triangle-arrow"]=Y,h["esri-popup__pagination-next-icon--rtl"]=Y,h["esri-icon-right-triangle-arrow"]=!Y,h["esri-popup__pagination-next-icon"]=!Y,h);h=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",d)});Y=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":r.next,title:r.next},h);d=w.cssTransition("enter","esri-popup--feature-updated");
h=this.id+"-feature-menu";n=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":h,"aria-expanded":n,"aria-label":k.menu,title:k.menu},ca);ca=A?[ia,ga||n,Y]:null;n=this._wouldDockTo();n=(c={},c["esri-icon-minimize"]=x,c["esri-popup__icon--dock-icon"]=
!x,c["esri-icon-dock-right"]=!x&&("top-right"===n||"bottom-right"===n),c["esri-icon-dock-left"]=!x&&("top-left"===n||"bottom-left"===n),c["esri-icon-maximize"]=!x&&"top-center"===n,c["esri-icon-dock-bottom"]=!x&&"bottom-center"===n,c);c=v.tsx("span",{"aria-hidden":"true",class:this.classes(n,"esri-popup__icon")});c="xsmall"!==ba&&this.get("dockOptions.buttonEnabled")?v.tsx("div",{role:"button","aria-label":fa,title:fa,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},c):null;n=(f={},f["esri-popup__header-container--button"]=g,f);ba=g?"button":"heading";fa=g?ha?k.expand:k.collapse:"";f=this.id+"-popup-title";q=q?v.tsx("div",{class:this.classes("esri-popup__header-container",n),key:q,enterAnimation:d,id:f,role:ba,"aria-label":fa,title:fa,tabIndex:g?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
v.tsx("h2",{class:"esri-popup__header-title",innerHTML:q})):null;n=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});n=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":k.close,title:k.close},n);c=v.tsx("header",{class:"esri-popup__header"},q,v.tsx("div",{class:"esri-popup__header-buttons"},c,n));n=this.id+"-popup-content";D=!ea||g&&ha?null:v.tsx("article",{key:D,enterAnimation:d,
id:n,class:"esri-popup__content"},da);ea="bottom-left"===u||"bottom-center"===u||"bottom-right"===u||"top-left"===J||"top-center"===J||"top-right"===J;da="top-left"===u||"top-center"===u||"top-right"===u||"bottom-left"===J||"bottom-center"===J||"bottom-right"===J;d=t?k.close:k.open;d=aa.length?v.tsx("div",{key:y("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":t?
this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":d,title:d},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;ba=B.length&&B.toArray().map(function(b,d){return a._renderAction({action:b,index:d,key:"actions",type:"inline"})});t=aa.length&&t?v.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+
"-actions-menu-button",key:y("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},aa.toArray().map(function(b,d){return a._renderAction({action:b,index:d+H,key:"actions",type:"menu-item"})})):null;t=ba?v.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},ba,d,t):null;ca=A?v.tsx("section",{key:y("navigation"),class:this.classes("esri-popup__navigation")},
ca):null;aa=(l={},l["esri-popup__footer--has-pagination"]=A,l["esri-popup__footer--has-actions"]=!!B.length,l["esri-popup__footer--has-actions-menu"]=!!aa.length,l);l=A||B.length?v.tsx("div",{key:y("feature-buttons"),class:this.classes("esri-popup__footer",aa)},t,ca):null;Z=this._renderFeatureMenuNode(G,Z,h);G=b.substitute(r.selectedFeatures,{total:G.length});B=v.tsx("section",{key:y("menu"),class:"esri-popup__feature-menu"},v.tsx("h2",{class:"esri-popup__feature-menu-header"},G),v.tsx("nav",{class:"esri-popup__feature-menu-viewport",
afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},Z));G=x?null:v.tsx("div",{key:y("pointer"),class:"esri-popup__pointer",role:"presentation"},v.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}));Z=this.get("selectedFeature.layer.title");A=this.get("selectedFeature.layer.id");g=(e={},e["esri-popup--shadow"]=x,e["esri-popup--is-collapsible"]=g,e["esri-popup--is-collapsed"]=ha,e);e=(m={},m["esri-popup--aligned-top-center"]=
p&&"top-center"===u,m["esri-popup--aligned-bottom-center"]=p&&"bottom-center"===u,m["esri-popup--aligned-top-left"]=p&&"top-left"===u,m["esri-popup--aligned-bottom-left"]=p&&"bottom-left"===u,m["esri-popup--aligned-top-right"]=p&&"top-right"===u,m["esri-popup--aligned-bottom-right"]="bottom-right"===u,m["esri-popup--is-docked"]=p&&x,m["esri-popup--shadow"]=p&&!x,m["esri-popup--is-docked-top-left"]=p&&"top-left"===J,m["esri-popup--is-docked-top-center"]=p&&"top-center"===J,m["esri-popup--is-docked-top-right"]=
p&&"top-right"===J,m["esri-popup--is-docked-bottom-left"]=p&&"bottom-left"===J,m["esri-popup--is-docked-bottom-center"]=p&&"bottom-center"===J,m["esri-popup--is-docked-bottom-right"]=p&&"bottom-right"===J,m["esri-popup--feature-menu-open"]=p&&K,m["esri-popup--actions-menu-open"]=p&&z,m);m=ea?B:null;x=da?B:null;K=ea?l:null;z=da?l:null;m=v.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",g),tabIndex:-1,role:"dialog","aria-labelledby":q?f:"","aria-describedby":D?n:"",bind:this,
onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},K,m,c,D,z,x);return v.tsx("div",{key:y("base"),class:this.classes("esri-popup",e),role:"presentation","data-layer-title":Z,"data-layer-id":A,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},p?[m,G]:null)};l.prototype._divideActions=function(a){var b=this.viewModel.allActions;return{inlineActions:b.slice(0,a),menuActions:b.slice(a)}};l.prototype._featureMenuOpenChanged=
function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};l.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};l.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||"")};l.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};l.prototype._handleFeatureMenuKeyup=function(b){"Escape"===a.eventKey(b)&&(b.stopPropagation(),
this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};l.prototype._handleActionMenuKeyup=function(b){"Escape"===a.eventKey(b)&&(b.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};l.prototype._handleFeatureMenuItemKeyup=function(b){var d=a.eventKey(b),h=this._featureMenuNode,c=b.currentTarget["data-feature-index"];if(h){var h=h.querySelectorAll("li"),f=h.length;"ArrowUp"===d?(b.stopPropagation(),h[(c-1+f)%f].focus()):"ArrowDown"===
d?(b.stopPropagation(),h[(c+1+f)%f].focus()):"Home"===d?(b.stopPropagation(),h[0].focus()):"End"===d&&(b.stopPropagation(),h[h.length-1].focus())}};l.prototype._handleActionMenuItemKeyup=function(b){var d=a.eventKey(b),h=this._actionsMenuNode,c=b.currentTarget["data-action-index"];if(h){var h=h.querySelectorAll("li"),f=h.length;"ArrowUp"===d?(b.stopPropagation(),h[(c-1+f)%f].focus()):"ArrowDown"===d?(b.stopPropagation(),h[(c+1+f)%f].focus()):"Home"===d?(b.stopPropagation(),h[0].focus()):"End"===d&&
(b.stopPropagation(),h[h.length-1].focus())}};l.prototype._handleMainKeyup=function(b){var d=a.eventKey(b);"ArrowLeft"===d&&(b.stopPropagation(),this.previous());"ArrowRight"===d&&(b.stopPropagation(),this.next())};l.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};l.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,d=b.location;b.waitingForResult?a.show({location:d}):a.hide()}};l.prototype._getIconStyles=
function(a){return{"background-image":a?"url("+a+")":""}};l.prototype._renderAction=function(a){var d=this,h,c,f=a.action,l=a.index,e=a.key;a=a.type;var m=t.watch(f,"active className disabled id title image visible".split(" "),function(){return d.scheduleRender()});this._handles.add(m,e);var m=this.get("selectedFeature.attributes"),e=f.title,k=f.className,u=f.image,k=u||k?k:"esri-icon-default-action",e=e&&m?b.substitute(e,m):e,g=k&&m?b.substitute(k,m):k,m=u&&m?b.substitute(u,m):u,u=(h={},h["esri-icon-loading-indicator"]=
f.active,h["esri-rotating"]=f.active,h["esri-popup__icon"]=!!k,h["esri-popup__action-image"]=!f.active&&!!m,h);g&&(u[g]=!f.active);h=(c={},c["esri-popup__action"]="toggle"!==f.type,c["esri-popup__action-toggle"]="toggle"===f.type,c["esri-popup__action-toggle--on"]="toggle"===f.type&&f.value,c["esri-popup__button--disabled"]=f.disabled,c);c=v.tsx("span",{key:"text",class:"esri-popup__action-text"},e);c=[v.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",u),styles:this._getIconStyles(m)}),
c];l="menu-item"===a?v.tsx("li",{key:f,role:"menuitem",tabIndex:0,title:e,"aria-label":e,class:this.classes("esri-popup__button",h),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":l,onclick:this._triggerAction,onkeydown:this._triggerAction},c):v.tsx("div",{key:f,role:"button",tabIndex:0,title:e,"aria-label":e,class:this.classes("esri-popup__button",h),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":l,onclick:this._triggerAction,onkeydown:this._triggerAction},
c);return f.visible?l:null};l.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=t.watch(this,"viewModel.selectedFeatureIndex",function(b,d){return a._selectedFeatureIndexUpdated(b,d)});this._handles.add(b,"selected-index")};l.prototype._selectedFeatureIndexUpdated=function(a,b){this.featureCount&&a!==b&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};l.prototype._updateFeatureWidget=function(){this._set("selectedFeatureWidget",this.featureWidgets[this.viewModel.selectedFeatureIndex]||
null)};l.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};l.prototype._updateFeatureWidgets=function(){return f(this,void 0,void 0,function(){var a,b,d,h,f,l,e=this;return c(this,function(c){switch(c.label){case 0:return a=this,b=a.features,d=a.featureWidgets,b&&b.length?[4,z()]:(this._destroyFeatureWidgets(),[2]);case 1:return h=c.sent(),f=d.slice(0),l=[],b.forEach(function(a,b){if(a){var d=null;f.some(function(b,
h){b&&b.graphic===a&&(d=b,f.splice(h,1));return!!d});if(d)l[b]=d;else{var c=new h({defaultPopupTemplateEnabled:e.defaultPopupTemplateEnabled,graphic:a,spatialReference:e.get("view.spatialReference"),map:e.get("view.map")});c.visibleElements=n({},c.visibleElements,{title:!1});l[b]=c}}}),f.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",l),[2]}})})};l.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height};l.prototype._isOutsideView=
function(a){var b=a.popupHeight,d=a.popupWidth,h=a.screenLocation,c=a.side;a=a.view;if(isNaN(d)||isNaN(b)||!a||!h)return!1;var f=a.padding;return"right"===c&&h.x+d/2>a.width-f.right||"left"===c&&h.x-d/2<f.left||"top"===c&&h.y-b<f.top||"bottom"===c&&h.y+b>a.height-f.bottom?!0:!1};l.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,b=this._containerNode,d=this._mainContainerNode,h=this.viewModel,c=h.screenLocation,h=h.view;if(!c||!h||!b)return"top-center";if(!this._isScreenLocationWithinView(c,
h))return this._get("currentAlignment")||"top-center";var f=d?window.getComputedStyle(d,null):null,d=f?parseInt(f.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,f=f?parseInt(f.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,l=b.getBoundingClientRect(),b=l.width+a,l=Math.max(l.height,d,f)+a,a=this._isOutsideView({popupHeight:l,popupWidth:b,screenLocation:c,side:"right",view:h}),d=this._isOutsideView({popupHeight:l,popupWidth:b,screenLocation:c,side:"left",view:h}),f=this._isOutsideView({popupHeight:l,
popupWidth:b,screenLocation:c,side:"top",view:h}),c=this._isOutsideView({popupHeight:l,popupWidth:b,screenLocation:c,side:"bottom",view:h});return d?f?"bottom-right":"top-right":a?f?"bottom-left":"top-left":f?c?"top-center":"bottom-center":"top-center"};l.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};l.prototype._setCurrentAlignment=function(){this._set("currentAlignment",
this._getCurrentAlignment())};l.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};l.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};l.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};l.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};
l.prototype._renderFeatureMenuItemNode=function(a,b,d){var h,c=b===d,f=(h={},h["esri-popup__feature-menu-item--selected"]=c,h);h=c?v.tsx("span",{key:y("feature-menu-selected-feature-"+d),title:r.selectedFeature,"aria-label":r.selectedFeature,class:"esri-icon-check-mark"}):null;a=v.tsx("span",{innerHTML:a.title||k.untitled});return v.tsx("li",{role:"menuitem",tabIndex:-1,key:y("feature-menu-feature-"+d),class:this.classes(f,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},v.tsx("span",{class:"esri-popup__feature-menu-title"},a,h))};l.prototype._renderFeatureMenuNode=function(a,b,d){var h=this;return 1<a.length?v.tsx("ol",{class:"esri-popup__feature-menu-list",id:d,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},a.map(function(a,d){return h._renderFeatureMenuItemNode(a,d,b)})):null};l.prototype._determineCurrentDockPosition=
function(){var a=this.get("viewModel.view"),b=w.isRTL()?"top-left":"top-right";if(!a)return b;var d=a.padding||{left:0,right:0,top:0,bottom:0},d=a.width-d.left-d.right;return(a=a.get("breakpoints"))&&d<=a.xsmall?"bottom-center":b};l.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===typeof a)return v.tsx("div",{key:a,innerHTML:a});if(v.isWidget(a)&&!a.destroyed)return v.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return v.tsx("div",
{key:a,bind:a,afterCreate:this._attachToNode});if(v.isWidgetBase(a))return v.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};l.prototype._attachToNode=function(a){a.appendChild(this)};l.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,d=a.getBoundingClientRect().width;if(b=this._calculatePositionStyle(b,d))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};
l.prototype._calculateFullWidth=function(a){var b=this.currentAlignment,d=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+d:a};l.prototype._calculateAlignmentPosition=function(a,b,d,h){var c=this.currentAlignment,f=this._pointerOffsetInPx;h/=2;var l=d.height-b;d=d.width-a;var e=this.view.padding;if("bottom-center"===c)return{top:b+f-e.top,left:a-h-e.left};if("top-left"===c)return{bottom:l+f-e.bottom,right:d+f-e.right};if("bottom-left"===c)return{top:b+
f-e.top,right:d+f-e.right};if("top-right"===c)return{bottom:l+f-e.bottom,left:a+f-e.left};if("bottom-right"===c)return{top:b+f-e.top,left:a+f-e.left};if("top-center"===c)return{bottom:l+f-e.bottom,left:a-h-e.left}};l.prototype._calculatePositionStyle=function(a,b){var d=this.view;if(d){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&b&&(b=this._calculateFullWidth(b),a=this._calculateAlignmentPosition(a.x,a.y,d,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?
a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};l.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};l.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};l.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};l.prototype._dockingThresholdCrossed=
function(a,b,d){var h=a[0];a=a[1];var c=b[0];b=b[1];var f=d.width;d=d.height;return h<=f&&c>f||h>f&&c<=f||a<=d&&b>d||a>d&&b<=d};l.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var d=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},h=d.left+d.right,c=d.top+d.bottom,d=[],f=[];d[0]=a[0]-h;d[1]=a[1]-c;f[0]=b[0]-h;f[1]=b[1]-c;a=this.dockOptions;this._dockingThresholdCrossed(d,f,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};l.prototype._focusDockButtonNode=
function(a){this._focusDockButton&&(this._focusDockButton=!1,a.focus())};l.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};l.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};l.prototype._actionsMenuNodeUpdated=function(a){(this._actionsMenuNode=
a)&&this._focusFirstAction&&(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};l.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};l.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};l.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};l.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,
b=this.viewModel;b&&(b.screenLocationEnabled=this.visible&&!a)};l.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),d=b.width,b=b.height;if(isNaN(d)||isNaN(b))return!1;d=a.hasOwnProperty("width")&&d<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return d||a};l.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};l.prototype._getPageText=function(a,d){return b.substitute(r.pageText,
{index:d+1,total:a})};l.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};l.prototype._createSpinner=function(a){a&&(this._spinner=new m({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};l.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};l.prototype._close=function(){this.close();this.view&&this.view.focus()};l.prototype._toggleDockEnabled=function(){this.dockEnabled=
!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};l.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};l.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=!1;this.actionsMenuOpen=a};l.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var b=this.viewModel.allActions.getItemAt(a);b&&"toggle"===
b.type&&(b.value=!b.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};l.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};l.prototype._next=function(){this.next()};l.prototype._previous=function(){this.previous()};e([u.aliasOf("viewModel.actions"),v.renderable()],l.prototype,"actions",void 0);e([u.property({dependsOn:["viewModel.visible"]}),
v.renderable()],l.prototype,"actionsMenuOpen",null);e([u.property()],l.prototype,"alignment",void 0);e([u.aliasOf("viewModel.autoCloseEnabled")],l.prototype,"autoCloseEnabled",void 0);e([u.aliasOf("viewModel.autoOpenEnabled")],l.prototype,"autoOpenEnabled",void 0);e([u.aliasOf("viewModel.defaultPopupTemplateEnabled")],l.prototype,"defaultPopupTemplateEnabled",void 0);e([u.aliasOf("viewModel.content"),v.renderable()],l.prototype,"content",void 0);e([u.property(),v.renderable()],l.prototype,"collapsed",
void 0);e([u.property(),v.renderable()],l.prototype,"collapseEnabled",void 0);e([u.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),v.renderable()],l.prototype,"currentAlignment",null);e([u.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),v.renderable()],l.prototype,"currentDockPosition",null);e([u.property(),v.renderable()],l.prototype,"dockOptions",null);e([u.property(),v.renderable()],l.prototype,"dockEnabled",void 0);e([u.aliasOf("viewModel.featureCount"),
v.renderable()],l.prototype,"featureCount",void 0);e([u.property({dependsOn:["viewModel.visible"]}),v.renderable()],l.prototype,"featureMenuOpen",null);e([u.aliasOf("viewModel.features"),v.renderable()],l.prototype,"features",void 0);e([u.property(),v.renderable()],l.prototype,"featureNavigationEnabled",void 0);e([u.aliasOf("viewModel.goToOverride")],l.prototype,"goToOverride",void 0);e([u.aliasOf("viewModel.highlightEnabled")],l.prototype,"highlightEnabled",void 0);e([u.aliasOf("viewModel.location"),
v.renderable()],l.prototype,"location",void 0);e([u.property({readOnly:!0}),v.renderable()],l.prototype,"featureWidgets",void 0);e([u.aliasOf("viewModel.promises")],l.prototype,"promises",void 0);e([u.aliasOf("viewModel.selectedFeature"),v.renderable()],l.prototype,"selectedFeature",void 0);e([u.aliasOf("viewModel.selectedFeatureIndex"),v.renderable()],l.prototype,"selectedFeatureIndex",void 0);e([u.property({readOnly:!0}),v.renderable()],l.prototype,"selectedFeatureWidget",void 0);e([u.property()],
l.prototype,"spinnerEnabled",void 0);e([u.aliasOf("viewModel.title"),v.renderable()],l.prototype,"title",void 0);e([u.aliasOf("viewModel.updateLocationEnabled")],l.prototype,"updateLocationEnabled",void 0);e([u.aliasOf("viewModel.view")],l.prototype,"view",void 0);e([u.property({type:G}),v.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
v.vmEvent(["triggerAction","trigger-action"])],l.prototype,"viewModel",void 0);e([u.aliasOf("viewModel.visible"),v.renderable()],l.prototype,"visible",void 0);e([u.aliasOf("viewModel.clear")],l.prototype,"clear",null);e([u.aliasOf("viewModel.next")],l.prototype,"next",null);e([u.aliasOf("viewModel.previous")],l.prototype,"previous",null);e([u.aliasOf("viewModel.triggerAction")],l.prototype,"triggerAction",null);e([v.accessibleHandler()],l.prototype,"_toggleCollapsed",null);e([v.accessibleHandler()],
l.prototype,"_close",null);e([v.accessibleHandler()],l.prototype,"_toggleDockEnabled",null);e([v.accessibleHandler()],l.prototype,"_toggleFeatureMenu",null);e([v.accessibleHandler()],l.prototype,"_toggleActionsMenu",null);e([v.accessibleHandler()],l.prototype,"_triggerAction",null);e([v.accessibleHandler()],l.prototype,"_selectFeature",null);e([v.accessibleHandler()],l.prototype,"_next",null);e([v.accessibleHandler()],l.prototype,"_previous",null);return l=e([u.subclass("esri.widgets.Popup")],l)}(u.declared(x))})},
"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(b){b=a.call(this)||this;b._animationDelay=500;b._animationPromise=null;b.location=null;b.view=null;b.viewModel=new r;b.visible=!1;return b}p(d,a);d.prototype.postInitialize=
function(){var a=this;this.own([c.watch(this,"visible",function(b){return a._visibleChange(b)})])};d.prototype.destroy=function(){this._animationPromise=null};d.prototype.show=function(a){var b=this,d=a.location;a=a.promise;d&&(this.viewModel.location=d);this.visible=!0;d=function(){return b.hide()};a&&a.catch(function(){}).then(d)};d.prototype.hide=function(){this.visible=!1};d.prototype.render=function(){var a,d=this.visible,c=!!this.viewModel.screenLocation,d=(a={},a["esri-spinner--start"]=d&&
c,a["esri-spinner--finish"]=!d&&c,a);a=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",d),styles:a})};d.prototype._visibleChange=function(a){var b=this;if(a)this.viewModel.screenLocationEnabled=!0;else{var d=n.after(this._animationDelay);this._animationPromise=d;d.catch(function(){}).then(function(){b._animationPromise===d&&(b.viewModel.screenLocationEnabled=!1,b._animationPromise=null)})}};d.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,
a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};e([f.aliasOf("viewModel.location")],d.prototype,"location",void 0);e([f.aliasOf("viewModel.view")],d.prototype,"view",void 0);e([f.property({type:r}),b.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],d.prototype,"viewModel",void 0);e([f.aliasOf("viewModel.visible")],d.prototype,"visible",void 0);return d=e([f.subclass("esri.widgets.Spinner")],d)}(f.declared(k))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),
function(q,g,p,e,n,c){return function(c){function f(f){f=c.call(this,f)||this;f.visible=!1;return f}p(f,c);e([n.property()],f.prototype,"visible",void 0);return f=e([n.subclass("esri.widgets.CompassViewModel")],f)}(n.declared(c))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(b){var d=a.call(this)||this;d._anchorHandles=new f;d.location=null;d.screenLocation=null;d.screenLocationEnabled=!1;d.view=null;d._anchorHandles.add([r.watch(d,["screenLocationEnabled","location","view.size","view.stationary"],function(){return d._updateScreenPointAndHandle()}),r.watch(d,["view","view.ready"],function(){return d._wireUpView()})]);return d}p(d,a);d.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();
this._viewpointHandle=this._anchorHandles=null};d.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=k.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};d.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};d.prototype._updateScreenPointAndHandle=
function(){this._setScreenLocation();this._toggleWatchingViewpoint()};d.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};d.prototype._setScreenLocation=function(){var a=this.location,b=this.view,d=this.screenLocationEnabled,c=this.get("view.ready"),a=d&&a&&c?b.toScreen(a):null;this._set("screenLocation",a)};e([b.property()],d.prototype,"location",void 0);e([b.property({readOnly:!0})],d.prototype,"screenLocation",
void 0);e([b.property()],d.prototype,"screenLocationEnabled",void 0);e([b.property()],d.prototype,"view",void 0);return d=e([b.subclass("esri.widgets.support.AnchorElementViewModel")],d)}(b.declared(n,c))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../geometry ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w,y,z){var D=f.ofType({key:"type",defaultKeyValue:"button",base:m,typeMap:{button:x,toggle:G}}),A=a.getLogger("esri.widgets.Popup.PopupViewModel");return function(a){function f(d){d=a.call(this)||this;d._handles=new b;d._pendingPromises=new Set;d._zoomToLocation=null;d._fetchFeaturesController=null;d.actions=new D([w.zoomToFeature.clone()]);d.defaultPopupTemplateEnabled=!1;d.autoCloseEnabled=!1;d.autoOpenEnabled=!0;d.content=null;d.highlightEnabled=
!0;d.title=null;d.updateLocationEnabled=!1;d.view=null;d.visible=!1;d.zoomFactor=4;return d}p(f,a);f.prototype.initialize=function(){var a=this;this._handles.add([l.init(this,"autoOpenEnabled",this._autoOpenEnabledChange),this.on("view-change",this._autoClose),l.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),l.watch(this,"view.animation.state",function(b){a._zoomToLocation||(w.zoomToFeature.disabled="waiting-for-target"===b)}),l.watch(this,"location",function(b){var d=
a.selectedFeature;a.updateLocationEnabled&&b&&(!d||d.geometry)&&a.centerAtLocation()}),l.watch(this,"selectedFeature",function(b){if(b){var h=a.location,c=a.updateLocationEnabled,f=a.view;!c&&h||!b.geometry?c&&!b.geometry&&a.centerAtLocation().then(function(){a.location=f.center.clone()}):a.location=d.unwrap(a._getPointFromGeometry(b.geometry))}}),this.on("trigger-action",function(b){return w.triggerAction({event:b,view:a.view})})])};f.prototype.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();
this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(f.prototype,"allActions",{get:function(){var a=this._get("allActions")||new D;a.removeAll();var b=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),d=b&&b.actions;(b=b&&b.overwriteActions?d:d?d.concat(this.actions):this.actions)&&b.filter(Boolean).forEach(function(b){return a.add(b)});
return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,d=this.selectedFeatureIndex,h=this.promiseCount&&a.length;h&&b&&-1===d?this.selectedFeatureIndex=0:h&&-1!==d||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var b=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=u.geographicToWebMercator(a));this._set("location",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"waitingForResult",
{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=this;this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){b._pendingPromises.add(a);
a.then(function(d){b._pendingPromises.has(a)&&b._updateFeatures(d);b._updatePendingPromises(a)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;return-1===a?null:this.features[a]||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");
return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});f.prototype.centerAtLocation=function(){var a=this.view,b=this._getSelectedTarget();return b?this.callGoTo({target:{target:b,scale:a.scale}}):(a=new r("center-at-location:invalid-target-or-view",
"Cannot center at a location without a target and view.",{target:b,view:a}),A.error(a),h.reject(a))};f.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};f.prototype.open=function(a){var b=this;a=n({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},a);var d=a.fetchFeatures;delete a.fetchFeatures;d=d?this._fetchFeatures(a.location||this.location):h.resolve();this.set(a);d.then(function(){b._setVisibleWhenContentExists()})};f.prototype.triggerAction=
function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};f.prototype.next=function(){this.selectedFeatureIndex+=1;return this};f.prototype.previous=function(){--this.selectedFeatureIndex;return this};f.prototype.zoomToLocation=function(){var a=this,b=this.location,d=this.selectedFeature,c=this.view,f=this.zoomFactor,l=this._getSelectedTarget();if(!l)return b=new r("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:c}),
A.error(b),h.reject(b);var c=c.scale/f,e=this.get("selectedFeature.geometry")||b,m=e&&"point"===e.type&&this._isScreenSize(d);w.zoomToFeature.active=!0;w.zoomToFeature.disabled=!0;return this._zoomToLocation=b=this.callGoTo({target:{target:l,scale:m?c:void 0}}).then(function(){m&&(a.location=e);w.zoomToFeature.active=!1;w.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){w.zoomToFeature.active=!1;w.zoomToFeature.disabled=!1;a._zoomToLocation=null})};f.prototype._getSelectedTarget=
function(){var a=this.selectedFeature,b=this.location,d=this.view;if(!d)return null;var d="3d"===d.type,h=this.get("selectedFeature.geometry");return d?a||b:h||b};f.prototype._fetchPopupFeatures=function(a){var b=this.view;this._cancelFetchingFeatures();if(!b||!a)return a=new r("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:b}),A.error(a),h.reject(a);var d=h.createAbortController();this._fetchFeaturesController=d;return b.fetchPopupFeatures(a,
{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:d.signal})};f.prototype._autoOpenEnabledChange=function(){var a=this,b=this._handles,d=this.autoOpenEnabled;b.remove("auto-fetch-features");d&&(d=l.on(this,"view","click",function(b){a.view.toolViewManager.handlesClickEvent(b)||"mouse"===b.pointerType&&0!==b.button||a._fetchFeaturesAndOpen(b)}),b.add(d,"auto-fetch-features"))};f.prototype._cancelFetchingFeatures=function(){var a=this._fetchFeaturesController;a&&a.abort();this._fetchFeaturesController=
null};f.prototype._fetchFeatures=function(a){var b=this,d=this.view;if(!a||!d)return a=new r("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:a,view:d}),A.error(a),h.reject(a);a="function"===typeof d.toScreen?d.toScreen(a):null;return this._fetchPopupFeatures(a).then(function(a){b.promises=a.promises})};f.prototype._fetchFeaturesAndOpen=function(a){var b=a.mapPoint,d=this.view;this._fetchPopupFeatures(a.screenPoint).then(function(a){d.popup.open({location:a.location||
b,promises:a.promises});return a})};f.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};f.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,d=this.promiseCount;b.remove("pendingVisible");d?(d=l.init(this,"pendingPromisesCount",function(d){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));d||b.remove("pendingVisible")}),b.add(d,"pendingVisible")):this.set("visible",
!0)};f.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};f.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||!a||"esri.Graphic"!==a.declaredClass)return!0;if((b=b.getViewForGraphic(a))&&"whenGraphicBounds"in b){var d=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){d=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return d}return!0};f.prototype._getPointFromGeometry=
function(a){return d.isNone(a)?null:"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null};f.prototype._highlightFeature=function(){var a=this;this._handles.remove("highlight");var b=this.selectedFeature,d=this.highlightEnabled,h=this.view,c=this.visible;if(b&&h&&d&&c){var f=b.layer;f&&h.when().then(function(){k.typeCast(h)().whenLayerView(f).then(function(d){if(d&&v.hasHighlight(d)){var h=f.objectIdField,c=b.attributes;
d=d.highlight(c&&c[h]||b);a._handles.add(d,"highlight")}})})}};f.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};e([t.property({type:D})],f.prototype,"actions",void 0);e([t.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length",
"selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],f.prototype,"allActions",null);e([t.property({type:Boolean})],f.prototype,"defaultPopupTemplateEnabled",void 0);e([t.property()],f.prototype,"autoCloseEnabled",void 0);e([t.property()],f.prototype,"autoOpenEnabled",void 0);e([t.property()],f.prototype,"content",void 0);e([t.property({readOnly:!0,dependsOn:["features"]})],f.prototype,"featureCount",null);e([t.property()],f.prototype,"features",null);e([t.property()],f.prototype,"highlightEnabled",
void 0);e([t.property({type:c.Point})],f.prototype,"location",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],f.prototype,"pendingPromisesCount",null);e([t.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],f.prototype,"waitingForResult",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],f.prototype,"promiseCount",null);e([t.property()],f.prototype,"promises",null);e([t.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],
f.prototype,"selectedFeature",null);e([t.property({value:-1})],f.prototype,"selectedFeatureIndex",null);e([t.property({readOnly:!0,dependsOn:["view.ready"]})],f.prototype,"state",null);e([t.property()],f.prototype,"title",void 0);e([t.property()],f.prototype,"updateLocationEnabled",void 0);e([t.property()],f.prototype,"view",void 0);e([t.property()],f.prototype,"visible",void 0);e([t.property()],f.prototype,"zoomFactor",void 0);e([t.property()],f.prototype,"centerAtLocation",null);e([t.property()],
f.prototype,"clear",null);e([t.property()],f.prototype,"triggerAction",null);e([t.property()],f.prototype,"next",null);e([t.property()],f.prototype,"previous",null);e([t.property()],f.prototype,"zoomToLocation",null);return f=e([t.subclass("esri.widgets.Popup.PopupViewModel")],f)}(t.declared(y,z))})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),
function(q,g,p,e,n,c,f){Object.defineProperty(g,"__esModule",{value:!0});g.zoomToFeature=new f({id:"zoom-to-feature",title:e.zoom,className:"esri-icon-zoom-in-magnifying-glass"});g.removeSelectedFeature=new f({id:"remove-selected-feature",title:p.remove,className:"esri-icon-trash"});g.all=[g.zoomToFeature,g.removeSelectedFeature];g.triggerAction=function(f){var e=f.view;f=f.event.action;var b=e&&e.popup;if(!f)return c.reject(new n("trigger-action:missing-arguments","Event has no action"));if(!b)return c.reject(new n("trigger-action:missing-arguments",
"view.popup is missing"));var a=f.disabled,d=f.id;if(!d)return c.reject(new n("trigger-action:invalid-action","action.id is missing"));if(a)return c.reject(new n("trigger-action:invalid-action","Action is disabled"));if(d===g.zoomToFeature.id)return b.viewModel.zoomToLocation();if(d===g.removeSelectedFeature.id){b.close();f=b.selectedFeature;if(!f)return c.reject(new n("trigger-action:"+g.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:f}));(b=f.sourceLayer)?b.remove(f):e.graphics.remove(f);
return c.resolve()}return c.reject(new n("trigger-action:unknown-action","Unable to identify action to perform",{action:f,popup:b}))}})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,g,p,e,n,c){return function(f){function k(){var c=null!==f&&f.apply(this,arguments)||this;c.goToOverride=null;c.view=null;return c}p(k,f);k.prototype.callGoTo=
function(c){var b=this.view;return this.goToOverride?this.goToOverride(b,c):b.goTo(c.target,c.options)};e([c.property()],k.prototype,"goToOverride",void 0);e([c.property()],k.prototype,"view",void 0);return k=e([c.subclass("esri.widgets.support.GoTo")],k)}(c.declared(n))})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(q,g,p,e,n,c){return function(f){function k(c){c=
f.call(this)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=!1;return c}p(k,f);Object.defineProperty(k.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});e([c.property({type:Number})],k.prototype,"factor",void 0);e([c.property({type:Number})],k.prototype,"offsetX",void 0);e([c.property({type:Number})],k.prototype,"offsetY",void 0);e([c.property()],k.prototype,"position",void 0);e([c.property({readOnly:!0,dependsOn:["factor",
"offsetX","offsetY","position","visible"]})],k.prototype,"version",null);e([c.property({type:Boolean})],k.prototype,"visible",void 0);return k=e([c.subclass("esri.views.Magnifier")],k)}(c.declared(n))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w,y,z,D,A){var B=b.getLogger("esri.views.MapView");return function(b){function m(a){var d=b.call(this,a)||this;d._frameTask=new w.default(d);d._mapViewBaseHandles=new r;d.featuresTilingScheme=null;d.fullOpacity=1;d.interacting=!1;d.initialExtent=null;d.labelManager=null;d.resizeAlign="center";d.type="2d";d.constraints=new y;d.padding={top:0,right:0,bottom:0,left:0};var h=function(){d._set("updating",!0===d.get("layerViewManager.updating")||!0===d.get("labelManager.updating")||
!0===d.get("graphicsView.updating")||d.allLayerViews.some(function(a){return!0===a.updating}))},c=d._mapViewBaseHandles;c.add([d.watch("viewpoint",function(a){return d._flipStationary()},!0),d.on("resize",function(a){return d._resizeHandler(a)}),d.watch("animationManager.animation",function(a){d.animation=a}),d.watch(["layerViewManager.updating","labelManager.updating","graphicsView.updating"],h),d.allLayerViews.on("change",function(){h();c.remove("layerViewsUpdating");c.add(d.allLayerViews.map(function(a){return a.watch("updating",
h)}).toArray(),"layerViewsUpdating")})]);h();d.watch("ready",function(a){a?(d._startup(),d._frameTask&&d._frameTask.start()):(d._frameTask&&d._frameTask.stop(),d._tearDown())},!0);return d}e(m,b);m.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(m.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");
a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),d=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())},a.when(d,d)))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"center",{get:function(){if(!this.internallyReady)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.internallyReady){var b=
this.viewpoint;A.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else B.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this._mapViewBaseHandles.remove("constraints"),d.destroy());this._set("constraints",
a);a&&(a.view=this,this.internallyReady&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b.internallyReady&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"extent",{get:function(){return this.internallyReady?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.internallyReady?
(a=this.viewpoint,A.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):B.error("#extent","invalid extent size"):B.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,
"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,h=this.viewpoint,c=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==d||-1!==c)||h?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"padding",{get:function(){return this.internallyReady?this.state.padding:this._get("padding")},set:function(a){this.internallyReady?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,
configurable:!0});Object.defineProperty(m.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"rotation",{get:function(){return this.internallyReady?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.internallyReady){var b=this.viewpoint;A.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"scale",
{get:function(){return this.internallyReady?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.internallyReady){var b=this.viewpoint;A.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&
!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"viewpoint",{get:function(){if(!this.internallyReady)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.internallyReady?(a=new f({targetGeometry:new c.Point,scale:0,rotation:0}),A.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),
this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?B.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?B.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):B.error("#viewpoint","geometry not defined")}},
enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"zoom",{get:function(){return this.internallyReady?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.internallyReady){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,A.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=
b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});m.prototype.goTo=function(a,b){var d=this;if(a)return h.whenTrueOnce(this,"ready",b&&b.signal).then(function(){d.animation&&(d.animation=null);var h=p({animate:!0},b),c=A.createAsync(a,d);d._gotoTask={};return h.animate?d._gotoAnimated(c,h):d._gotoImmediate(c,h)});B.error("#goTo()","target cannot be null or undefined")};m.prototype.hitTest=function(b){return a.reject("Should be implemented by subclasses")};
m.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(d){return p({},d,{mapPoint:b.toMap(a)})})};m.prototype.toMap=function(a){if(!this.internallyReady)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};m.prototype.isTileInfoRequired=function(){return!0};m.prototype.toScreen=function(a){if(!this.internallyReady)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return d.createScreenPoint(a[0],
a[1])};m.prototype.pixelSizeAt=function(a,b){if(!this.internallyReady)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};m.prototype.requestLayerViewUpdate=function(a){this.internallyReady&&this._frameTask.requestLayerViewUpdate(a)};m.prototype.requestUpdate=function(a){this.internallyReady&&this._frameTask.requestUpdate(a)};m.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||
null};m.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};m.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new G;this.animation.update(a);return this.animation};m.prototype._cancellableGoTo=function(b,d,h,c){var f=this,l=h.then(function(){b===f._gotoTask&&(f.animation=null)}).catch(function(a){b===f._gotoTask&&(f.animation=null,d.done||d.stop());throw a;}),e=a.create(function(a){return a(l)},
function(){b!==f._gotoTask||d.done||d.stop()});d.when().catch(function(){b===f._gotoTask&&e.cancel&&e.cancel()});return e};m.prototype._gotoImmediate=function(b,d){var h=this,c=this._gotoTask,f=this._createOrReplaceAnimation(b);b=b.then(function(b){a.throwIfAborted(d);if(c!==h._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");h.viewpoint=f.target=b;f.finish()});return this._cancellableGoTo(c,f,b,d)};m.prototype._gotoAnimated=function(a,b){var d=this,h=this._gotoTask,c=this._createOrReplaceAnimation(a);
a=a.then(function(a){if(h!==d._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");c.update(a);d.animationManager.animate(c,d.viewpoint,b);return c.when().then(function(){},function(){})});return this._cancellableGoTo(h,c,a,b)};m.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=this.content.viewpoint,h=this.content.size.concat();b.size=[a.width,a.height];A.resize(d,d,h,this.content.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};
m.prototype._startup=function(){if(!this.internallyReady){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new v({view:this}));this._set("state",new z({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new D.TileInfoView(u.create({spatialReference:this.spatialReference,size:512})));this.internallyReady=!0}};m.prototype._tearDown=function(){if(this.internallyReady){this.internallyReady=
!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,d=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:d});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",d);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",
null);this._set("state",null);this._set("content",null);this.animation=null}};m.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};m.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var d=a&&a.targetGeometry||a;return b?d?b.equals(d.spatialReference)?a:t.canProject(d,b)?a&&"esri.Viewpoint"===
a.declaredClass?(a.targetGeometry=t.project(d,b),a):t.project(d,b):null:null:a};m.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),d=this._get("scale"),h=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),l=this._get("rotation"),e=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var m=null,k=null,b=0,a=e&&e.rotation,t=e&&e.targetGeometry;t&&("extent"===t.type?m=t:"point"===t.type&&
(k=t,b=e.scale));e=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));t=this._normalizeInput(this.initialExtent);c=c||m||e||t;h=h||k||c&&c.center;d=d||b||c&&A.extentToScale(c,this.size);return h&&d?new f({targetGeometry:h,scale:d,rotation:l||a||0}):null};n([l.property()],m.prototype,"animation",null);n([l.property({readOnly:!0})],m.prototype,"animationManager",void 0);n([l.property({value:null,type:c.Point,dependsOn:["content.viewpoint"]})],m.prototype,"center",
null);n([l.property({type:y})],m.prototype,"constraints",null);n([l.property({readOnly:!0})],m.prototype,"content",void 0);n([l.property({value:null,type:c.Extent,dependsOn:["content.viewpoint"]})],m.prototype,"extent",null);n([l.property({readOnly:!0})],m.prototype,"featuresTilingScheme",void 0);n([l.property()],m.prototype,"fullOpacity",void 0);n([l.property({readOnly:!0})],m.prototype,"interacting",void 0);n([l.property({type:c.Extent})],m.prototype,"initialExtent",void 0);n([l.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],
m.prototype,"initialExtentRequired",null);n([l.property()],m.prototype,"labelManager",void 0);n([l.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return p({top:0,right:0,bottom:0,left:0},a)}})],m.prototype,"padding",null);n([l.property()],m.prototype,"resizeAlign",void 0);n([l.property({readOnly:!0,dependsOn:["content.viewpoint"]})],m.prototype,"resolution",null);n([l.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],m.prototype,"rotation",null);n([l.property({value:0,
type:Number,dependsOn:["content.viewpoint"]})],m.prototype,"scale",null);n([l.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],m.prototype,"spatialReference",void 0);n([l.property({readOnly:!0})],m.prototype,"state",void 0);n([l.property()],m.prototype,"stationary",null);n([l.property({readOnly:!0})],m.prototype,"type",void 0);n([l.property({value:null,type:f,dependsOn:["content.viewpoint"]})],m.prototype,"viewpoint",
null);n([l.property({value:-1,dependsOn:["scale"]})],m.prototype,"zoom",null);return m=n([l.subclass("esri.views.MapViewBase")],m)}(l.declared(x,m))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/Accessor ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/Promise ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l){return function(d){function k(){return null!==d&&d.apply(this,arguments)||this}e(k,d);k.prototype.when=function(a,b){return this.inherited(arguments)};k.prototype.fetchPopupFeatures=function(a,d){return b.safeCast(this._fetchPopupFeaturesAsync(a,d))};k.prototype._fetchPopupFeaturesAsync=function(a,b){return c(this,void 0,void 0,function(){var d,c,l,e,m,k;return f(this,function(f){switch(f.label){case 0:return[4,this.when()];case 1:return f.sent(),[4,this._prepareFetchPopupFeatures(a,
b)];case 2:return d=f.sent(),c=d.location,l=this._queryLayerPopupFeatures(d,b),e=h.resolve(d.clientOnlyGraphics),m=[e].concat(l),k=h.eachAlwaysValues(m).then(r.flatten),[2,{promise:k,location:c,promises:m}]}})})};k.prototype._queryLayerPopupFeatures=function(b,d){var h=b.queryArea;return b.layerViewsAndGraphics.map(function(b){var c=b.layerView;b={clientGraphics:b.graphics,signal:a.isSome(d)?d.signal:null,defaultPopupTemplateEnabled:a.isSome(d)?!!d.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(h,
b)})};k.prototype._isValidPopupGraphic=function(b,d){return b&&!!b.getEffectivePopupTemplate(a.isSome(d)&&d.defaultPopupTemplateEnabled)};k.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var d,h,c,l,e,m,k,t;return f(this,function(f){switch(f.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return d=f.sent(),h=d.clientGraphics,c=d.queryArea,l=d.location,e=this._getFetchPopupLayerViews(),m=this._graphicsPerFetchPopupLayerView(h,e),k=m.layerViewsAndGraphics,
t=m.clientOnlyGraphics,[2,{clientOnlyGraphics:t,layerViewsAndGraphics:k,queryArea:c,location:l}]}})})};k.prototype._popupHitTestGraphics=function(a,b){return c(this,void 0,void 0,function(){var d,h,c,l,e,m,k=this;return f(this,function(f){switch(f.label){case 0:return[4,this.popupHitTest(a)];case 1:return d=f.sent(),h=d.results,c=d.mapPoint,l=h.filter(function(a){return k._isValidPopupGraphic(a.graphic,b)}),e=l.length?l[0].mapPoint:null,m=l.map(function(a){return a.graphic}),[2,{clientGraphics:m,
queryArea:c,location:c||e}]}})})};k.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(d){a._isValidPopupLayerView(d)&&b.push(d)});this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};k.prototype._isValidPopupLayerView=function(b){return a.isSome(b)&&(!("layer"in b)||!b.suspended)&&"function"===typeof b.fetchPopupFeatures};k.prototype._graphicsPerFetchPopupLayerView=function(a,b){var d=[],h=new Map;b=b.map(function(a){var b=
[];"layer"in a?h.set(a.layer,b):h.set(a.graphics,b);return{layerView:a,graphics:b}});for(var c=0;c<a.length;c++){var f=a[c],l=h.get(f.layer)||null;l?l.push(f):d.push(f)}return{layerViewsAndGraphics:b,clientOnlyGraphics:d}};return k=n([l.subclass("esri.views.PopupView")],k)}(l.declared(k,d))})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,
g,p,e,n,c,f,k){var r=function(b,a,d,h){var c=b.targetGeometry,e=a.targetGeometry;h?"string"===typeof h&&(h=f.parse(h)||f.ease):h=f.ease;this.easing=h;this.duration=d;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=e.x;this.tCenterY=e.y;this.tScale=a.scale;this.tRotation=a.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?
this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};r.prototype.applyRatio=function(b,a){var d=this.easing(a),h,c;1<=a?(a=this.tCenterX,h=this.tCenterY,c=this.tRotation,d=this.tScale):(a=this.sCenterX+d*this.dCenterX,h=this.sCenterY+d*this.dCenterY,c=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);b.targetGeometry.x=a;b.targetGeometry.y=h;b.scale=d;b.rotation=c};return g.createSubclass({constructor:function(){this.viewpoint=new q({targetGeometry:new n,scale:0,rotation:0});
this._updateTask=p.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:f.ease},view:null,viewpoint:null},animate:function(b,a,d){this.stop();k.copy(this.viewpoint,a);this.transition=new r(this.viewpoint,b.target,d&&d.duration||this.duration,d&&d.easing||this.easing);a=function(){this.animation===b&&this._updateTask&&("finished"===b.state&&(this.transition.applyRatio(this.viewpoint,1),
this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);b.when(a,a);this._startTime=e();this._updateTask.resume();return this.animation=b},animateContinous:function(b,a){this.stop();this.updateFunction=a;this.viewpoint=b;var d=new c({target:b.clone()});b=function(){this.animation===d&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);d.when(b,b);this._startTime=
e();this._updateTask.resume();return this.animation=d},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(b){var a=this.animation;a&&a.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(e()-this._startTime)/this.transition.duration,a=1<=b,this.transition.applyRatio(this.viewpoint,b),a&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var q=function(g,e,n,c){function f(a,d){var h,c,f,l;d=null==d?1E-6:d;f=a;for(c=0;8>c;c++){l=((b*f+r)*f+k)*f-a;if(Math.abs(l)<d)return f;h=(3*b*f+2*r)*f+k;if(1E-6>Math.abs(h))break;f-=l/h}h=0;c=1;f=a;if(f<h)return h;if(f>c)return c;for(;h<c;){l=((b*f+r)*f+k)*f;if(Math.abs(l-a)<d)break;a>l?h=f:c=f;f=.5*(c-h)+h}return f}var k=3*g,r=3*(n-g)-k,b=1-k-r,a=3*e,d=3*(c-e)-a,h=1-a-d;return function(b,c){b=f(b,c);return((h*b+d)*b+a)*b}},g=/^cubic-bezier\((.*)\)/;
q.parse=function(p){var e=q[p]||null;!e&&(p=g.exec(p))&&(p=p[1].split(",").map(function(e){return parseFloat(e.trim())}),4!==p.length||p.some(function(e){return isNaN(e)})||(e=q.apply(q,p)));return e};q.ease=q(.25,.1,.25,1);q.linear=q(0,0,1,1);q.easeIn=q["ease-in"]=q(.42,0,1,1);q.easeOut=q["ease-out"]=q(0,0,.58,1);q.easeInOut=q["ease-in-out"]=q(.42,0,.58,1);return q})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w,y,z){function D(a,b,h,c){return c&&h&&!c.equals(h)&&y.canProject(c,h)&&c.isWebMercator?(c.isWebMercator?(h=b[1],89.99999<h?h=89.99999:-89.99999>h&&(h=-89.99999),h=Math.sin(d.common.toRadian(h)),a=t.vec2.set(a,d.common.toRadian(b[0])*M,.5*M*Math.log((1+h)/(1-h)))):(h=d.common.toDegree(b[0]/M),a=t.vec2.set(a,h-360*Math.floor((h+180)/360),d.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/M))))),a):t.vec2.copy(a,b)}function A(a){return a.wkid?
a:a.spatialReference||v.WGS84}function B(a,b){return b.type?t.vec2.set(a,b.x,b.y):t.vec2.copy(a,b)}function H(a,b){return Math.max(a.width/b[0],a.height/b[1])*L(a.spatialReference)}function C(a,b,d,h){return e(this,void 0,void 0,function(){var c,l,e,t,g,u,v,K,n,w,z,T,D,X,q,W,A,B,H,E,F,I,O,M,P,N,L,R;return p(this,function(J){switch(J.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];f.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
l=a.every(function(a){return"attributes"in a});e=a.some(function(a){return!a.geometry});t=a;if(!(l&&e&&b&&b.allLayerViews))return[3,2];g=new Map;u=0;for(v=a;u<v.length;u++)K=v[u],n=K.layer,w=g.get(n)||[],z=K.attributes[n.objectIdField],null!=z&&w.push(z),g.set(n,w);T=[];g.forEach(function(a,d){var h=b.allLayerViews.find(function(a){return a.layer.id===d.id});if("queryFeatures"in h){var c=d.createQuery();c.objectIds=a;c.returnGeometry=!0;T.push(h.queryFeatures(c))}});return[4,r.all(T)];case 1:D=J.sent();
X=[];q=0;for(W=D;q<W.length;q++)if((A=W[q])&&A.features&&A.features.length)for(B=0,H=A.features;B<H.length;B++)K=H[B],k.isSome(K.geometry)&&X.push(K.geometry);t=X;J.label=2;case 2:E=0,F=t,J.label=3;case 3:if(!(E<F.length))return[3,6];I=F[E];return[4,C(I,b,d,h)];case 4:h=J.sent(),J.label=5;case 5:return E++,[3,3];case 6:return[2,h];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];c=new G(a);return[3,12];case 8:if(!(a instanceof x))return[3,9];c=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];c=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];O=a.layer;M=b.allLayerViews.find(function(a){return a.layer.id===O.id});if(!("queryFeatures"in M))return[3,12];P=O.createQuery();P.objectIds=[a.attributes[O.objectIdField]];P.returnGeometry=!0;return[4,M.queryFeatures(P)];case 11:N=J.sent(),c=k.get(N,"features",0,"geometry"),J.label=12;case 12:if(k.isNone(c))return[2,null];L="point"===c.type?new m({xmin:c.x,
ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent;if(!L)return[2,null];R=y.canProject(L,d);if(!L.spatialReference.equals(d)&&R)L=y.project(L,d);else if(!R)return[2,null];h=h?h.union(L):L.clone();return[2,h]}})})}function E(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var d=0,h=0,c=0;c<a.length;c++)(b=a[c].layer)&&b.minScale&&b.maxScale&&(d=b.minScale<d?b.minScale:d,h=b.maxScale>h?b.maxScale:h);return d&&h?{min:d,max:h}:null}}}function I(a,b){return e(this,void 0,void 0,function(){var d,h,c,f,l,e,k,t,g,r,v,x,w,K,T,q;return p(this,function(J){switch(J.label){case 0:if(!a)return[2,new n({targetGeometry:new G,scale:0,rotation:0})];d=b.spatialReference;h=b.size;c=b.viewpoint;f=b.constraints;l=null;"esri.Viewpoint"===a.declaredClass?
l=a:a.viewpoint?l=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(l=a.target);e=null;if(!l||!l.targetGeometry)return[3,1];e=l.targetGeometry;return[3,10];case 1:if(!(a instanceof m))return[3,2];e=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,C(a.center,b,d)]:[3,10];case 3:return(g=J.sent())?[3,5]:[4,C(a.extent,b,d)];case 4:g=J.sent(),J.label=5;case 5:return(t=g)?[3,7]:[4,C(a.target,b,d)];case 6:t=J.sent(),
J.label=7;case 7:return(k=t)?[3,9]:[4,C(a,b,d)];case 8:k=J.sent(),J.label=9;case 9:e=k,J.label=10;case 10:!e&&c&&c.targetGeometry?e=c.targetGeometry:!e&&b.extent&&(e=b.extent);r=A(e);d||(d=A(b.spatialReference||b.extent||e));if(!z.canProject(e,d)&&r&&!r.equals(d))return[2,null];v=B(u.vec2f64.create(),e.center?e.center:e);x=new G(D(v,v,r,d),d);w=null;w=l&&l.targetGeometry&&"point"===l.targetGeometry.type?l.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&f&&f.effectiveLODs?
f.zoomToScale(a.zoom):Array.isArray(e)||"point"===e.type||"extent"===e.type&&0===e.width&&0===e.height?b.extent&&y.canProject(b.extent,d)?H(y.project(b.extent,d),h):b.extent?H(b.extent,h):c.scale:y.canProject(e.extent,d)?H(y.project(e.extent,d),h):H(e.extent,h);if(K=E(a))K.min&&K.min>w?w=K.min:K.max&&K.max<w&&(w=K.max);T=0;l?T=l.rotation:a.hasOwnProperty("rotation")?T=a.rotation:c&&(T=c.rotation);q=new n({targetGeometry:x,scale:w,rotation:T});f&&(q=f.fit(q),f.rotationEnabled||(q.rotation=T));return[2,
q]}})})}function F(a,b){var d=a.targetGeometry,h=b.targetGeometry;d.x=h.x;d.y=h.y;d.spatialReference=h.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function R(a,b,d){return d?t.vec2.set(a,.5*(b[0]-d.right+d.left),.5*(b[1]-d.bottom+d.top)):t.vec2.scale(a,b,.5)}function U(a,b,d,c){g.getTransform(a,b,d,c);return h.mat2d.invert(a,a)}function P(a,b,d){var h=N(b);b=Math.abs(Math.cos(h));h=Math.abs(Math.sin(h));return t.vec2.set(a,Math.round(d[1]*h+d[0]*b),Math.round(d[1]*b+d[0]*h))}function O(a){var d=
a.scale;a=a.targetGeometry.spatialReference;a=w.isValid(a)?1/(39.37*b.getMetersPerUnitForSR(a)*96):1;return d*a}function N(a){return d.common.toRadian(a.rotation)||0}function L(a){return w.isValid(a)?39.37*b.getMetersPerUnitForSR(a)*96:1}function Q(a){return a.isWrappable?(a=w.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(g,"__esModule",{value:!0});var M=a.wgs84Radius,S=180/Math.PI;g.extentToScale=H;g.create=I;g.copy=F;g.getAnchor=R;g.getExtent=function(){var a=u.vec2f64.create();return function(b,
d,h){var c=d.targetGeometry;B(a,c);d=.5*O(d);b.xmin=a[0]-d*h[0];b.ymin=a[1]-d*h[1];b.xmax=a[0]+d*h[0];b.ymax=a[1]+d*h[1];b.spatialReference=c.spatialReference;return b}}();g.setExtent=function(a,b,d,h,c){g.centerAt(a,b,d.center);a.scale=H(d,h);c&&c.constraints&&c.constraints.constrain(a);return a};g.getOuterExtent=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(d,h,c){B(a,h.targetGeometry);P(b,h,c);c=.5*O(h);d.set({xmin:a[0]-c*b[0],ymin:a[1]-c*b[1],xmax:a[0]+c*b[0],ymax:a[1]+
c*b[1],spatialReference:h.targetGeometry.spatialReference});return d}}();g.getOuterSize=P;g.getPaddingScreenTranslation=function(){var a=u.vec2f64.create();return function(b,d,h){return t.vec2.sub(b,t.vec2.scale(b,d,.5),R(a,d,h))}}();g.getPaddingMapTranslation=function(){var a=l.mat2df64.create(),b=u.vec2f64.create();return function(d,c,f,l){var e=O(c);c=N(c);t.vec2.set(b,e,e);h.mat2d.fromScaling(a,b);h.mat2d.rotate(a,a,c);h.mat2d.translate(a,a,g.getPaddingScreenTranslation(b,f,l));h.mat2d.translate(a,
a,[0,l.top-l.bottom]);return t.vec2.set(d,a[4],a[5])}}();g.getResolution=O;g.getResolutionToScaleFactor=L;g.getMatrix=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),d=u.vec2f64.create();return function(c,f,l,e,m,k){t.vec2.negate(a,f);t.vec2.scale(b,l,.5*k);t.vec2.set(d,1/e*k,-1/e*k);h.mat2d.identity(c);h.mat2d.translate(c,c,b);m&&h.mat2d.rotate(c,c,m);h.mat2d.scale(c,c,d);h.mat2d.translate(c,c,a);return c}}();g.getTransform=function(){var a=u.vec2f64.create();return function(b,d,h,c){var f=
O(d),l=N(d);B(a,d.targetGeometry);return g.getMatrix(b,a,h,f,l,c)}}();g.getTransformNoRotation=function(){var a=u.vec2f64.create();return function(b,d,h,c){var f=O(d);B(a,d.targetGeometry);return g.getMatrix(b,a,h,f,0,c)}}();g.getWorldWidth=Q;g.getWorldScreenWidth=function(a,b){return Math.round(Q(a)/b)};g.createAsync=function(a,b){return c.safeCast(I(a,b))};g.angleBetween=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),d=[0,0,0];return function(h,c,f){t.vec2.subtract(a,h,c);t.vec2.normalize(a,
a);t.vec2.subtract(b,h,f);t.vec2.normalize(b,b);t.vec2.cross(d,a,b);h=Math.acos(t.vec2.dot(a,b)/(t.vec2.length(a)*t.vec2.length(b)))*S;0>d[2]&&(h=-h);isNaN(h)&&(h=0);return h}}();g.addPadding=function(){var a=u.vec2f64.create();return function(b,d,h,c){var f=b.targetGeometry;F(b,d);g.getPaddingMapTranslation(a,d,h,c);f.x+=a[0];f.y+=a[1];return b}}();g.removePadding=function(){var a=u.vec2f64.create();return function(b,d,h,c){var f=b.targetGeometry;F(b,d);g.getPaddingMapTranslation(a,d,h,c);f.x-=a[0];
f.y-=a[1];return b}}();g.centerAt=function(){var a=u.vec2f64.create();return function(b,d,h){F(b,d);d=b.targetGeometry;var c=A(h),f=A(d);B(a,h);D(a,a,c,f);d.x=a[0];d.y=a[1];return b}}();g.pixelSizeAt=function(a,b,d){return O(b)};g.resize=function(){var a=u.vec2f64.create();return function(b,d,h,c,f){f||(f="center");t.vec2.sub(a,h,c);t.vec2.scale(a,a,.5);h=a[0];c=a[1];switch(f){case "center":t.vec2.set(a,0,0);break;case "left":t.vec2.set(a,-h,0);break;case "top":t.vec2.set(a,0,c);break;case "right":t.vec2.set(a,
h,0);break;case "bottom":t.vec2.set(a,0,-c);break;case "top-left":t.vec2.set(a,-h,c);break;case "bottom-left":t.vec2.set(a,-h,-c);break;case "top-right":t.vec2.set(a,h,c);break;case "bottom-right":t.vec2.set(a,h,-c)}g.translateBy(b,d,a);return b}}();g.rotateBy=function(a,b,d){F(a,b);a.rotation+=d;return a};g.rotateTo=function(a,b,d){F(a,b);a.rotation=d;return a};g.scaleBy=function(){var a=u.vec2f64.create();return function(b,d,h,c,f){F(b,d);isNaN(h)||0===h||(g.toMap(a,c,d,f),b.scale=d.scale*h,g.toScreen(a,
a,b,f),g.translateBy(b,b,t.vec2.set(a,a[0]-c[0],c[1]-a[1])));return b}}();g.scaleTo=function(a,b,d){F(a,b);a.scale=d;return a};g.scaleAndRotateBy=function(){var a=u.vec2f64.create();return function(b,d,h,c,f,l){F(b,d);isNaN(h)||0===h||(g.toMap(a,f,d,l),b.scale=d.scale*h,b.rotation+=c,g.toScreen(a,a,b,l),g.translateBy(b,b,t.vec2.set(a,a[0]-f[0],f[1]-a[1])));return b}}();g.padAndScaleAndRotateBy=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(d,h,c,f,l,e,m){g.getPaddingScreenTranslation(b,
e,m);t.vec2.add(a,l,b);return f?g.scaleAndRotateBy(d,h,c,f,a,e):g.scaleBy(d,h,c,a,e)}}();g.toMap=function(){var a=l.mat2df64.create();return function(b,d,h,c){return t.vec2.transformMat2d(b,d,U(a,h,c,1))}}();g.toScreen=function(){var a=l.mat2df64.create();return function(b,d,h,c){return t.vec2.transformMat2d(b,d,g.getTransform(a,h,c,1))}}();g.translateBy=function(){var a=u.vec2f64.create(),b=l.mat2df64.create();return function(d,c,f){F(d,c);var l=O(c),e=d.targetGeometry;h.mat2d.fromRotation(b,N(c));
h.mat2d.scale(b,b,u.vec2f64.fromValues(l,l));t.vec2.transformMat2d(a,f,b);e.x+=a[0];e.y+=a[1];return d}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.common=p})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2d=p})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require",
"exports","./common"],function(q,g,p){function e(c,f,e){var k=f[0],b=f[1],a=f[2],d=f[3],h=f[4];f=f[5];var l=e[0],t=e[1],g=e[2],m=e[3],x=e[4];e=e[5];c[0]=k*l+a*t;c[1]=b*l+d*t;c[2]=k*g+a*m;c[3]=b*g+d*m;c[4]=k*x+a*e+h;c[5]=b*x+d*e+f;return c}function n(c,f,e){c[0]=f[0]-e[0];c[1]=f[1]-e[1];c[2]=f[2]-e[2];c[3]=f[3]-e[3];c[4]=f[4]-e[4];c[5]=f[5]-e[5];return c}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];return c};g.identity=
function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};g.set=function(c,f,e,g,b,a,d){c[0]=f;c[1]=e;c[2]=g;c[3]=b;c[4]=a;c[5]=d;return c};g.invert=function(c,f){var e=f[0],g=f[1],b=f[2],a=f[3],d=f[4];f=f[5];var h=e*a-g*b;if(!h)return null;h=1/h;c[0]=a*h;c[1]=-g*h;c[2]=-b*h;c[3]=e*h;c[4]=(b*f-a*d)*h;c[5]=(g*d-e*f)*h;return c};g.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};g.multiply=e;g.rotate=function(c,f,e){var k=f[0],b=f[1],a=f[2],d=f[3],h=f[4];f=f[5];var l=Math.sin(e);e=Math.cos(e);
c[0]=k*e+a*l;c[1]=b*e+d*l;c[2]=k*-l+a*e;c[3]=b*-l+d*e;c[4]=h;c[5]=f;return c};g.scale=function(c,f,e){var k=f[1],b=f[2],a=f[3],d=f[4],h=f[5],l=e[0];e=e[1];c[0]=f[0]*l;c[1]=k*l;c[2]=b*e;c[3]=a*e;c[4]=d;c[5]=h;return c};g.translate=function(c,f,e){var k=f[0],b=f[1],a=f[2],d=f[3],h=f[4];f=f[5];var l=e[0];e=e[1];c[0]=k;c[1]=b;c[2]=a;c[3]=d;c[4]=k*l+a*e+h;c[5]=b*l+d*e+f;return c};g.fromRotation=function(c,f){var e=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=e;c[2]=-e;c[3]=f;c[4]=0;c[5]=0;return c};g.fromScaling=
function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=f[1];c[4]=0;c[5]=0;return c};g.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=f[0];c[5]=f[1];return c};g.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};g.add=function(c,f,e){c[0]=f[0]+e[0];c[1]=f[1]+e[1];c[2]=f[2]+e[2];c[3]=f[3]+e[3];c[4]=f[4]+e[4];c[5]=f[5]+
e[5];return c};g.subtract=n;g.multiplyScalar=function(c,f,e){c[0]=f[0]*e;c[1]=f[1]*e;c[2]=f[2]*e;c[3]=f[3]*e;c[4]=f[4]*e;c[5]=f[5]*e;return c};g.multiplyScalarAndAdd=function(c,f,e,g){c[0]=f[0]+e[0]*g;c[1]=f[1]+e[1]*g;c[2]=f[2]+e[2]*g;c[3]=f[3]+e[3]*g;c[4]=f[4]+e[4]*g;c[5]=f[5]+e[5]*g;return c};g.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]};g.equals=function(c,f){var e=c[0],g=c[1],b=c[2],a=c[3],d=c[4];c=c[5];var h=f[0],l=f[1],t=f[2],
u=f[3],m=f[4];f=f[5];return Math.abs(e-h)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(g-l)<=p.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(b-t)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(a-u)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(d-m)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};g.mul=e;g.sub=n})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],
function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df64=p})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[1,0,0,1,0,0]};g.clone=function(g){return[g[0],g[1],g[2],g[3],g[4],g[5]]};g.fromValues=function(g,e,n,c,f,k){return[g,e,n,c,f,k]};g.createView=function(g,e){return new Float64Array(g,e,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2=p})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,g,p){function e(a,b,h){a[0]=b[0]-h[0];a[1]=b[1]-h[1];return a}function n(a,b,h){a[0]=b[0]*h[0];a[1]=b[1]*h[1];return a}function c(a,b,h){a[0]=b[0]/h[0];a[1]=b[1]/h[1];return a}function f(a,b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*d+a*a)}function k(a,b){var d=b[0]-a[0];a=b[1]-a[1];return d*
d+a*a}function r(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};g.set=function(a,b,h){a[0]=b;a[1]=h;return a};g.add=function(a,b,h){a[0]=b[0]+h[0];a[1]=b[1]+h[1];return a};g.subtract=e;g.multiply=n;g.divide=c;g.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};g.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};
g.min=function(a,b,h){a[0]=Math.min(b[0],h[0]);a[1]=Math.min(b[1],h[1]);return a};g.max=function(a,b,h){a[0]=Math.max(b[0],h[0]);a[1]=Math.max(b[1],h[1]);return a};g.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};g.scale=function(a,b,h){a[0]=b[0]*h;a[1]=b[1]*h;return a};g.scaleAndAdd=function(a,b,h,c){a[0]=b[0]+h[0]*c;a[1]=b[1]+h[1]*c;return a};g.distance=f;g.squaredDistance=k;g.length=r;g.squaredLength=b;g.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};g.inverse=
function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};g.normalize=function(a,b){var d=b[0],c=b[1],d=d*d+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};g.cross=function(a,b,h){b=b[0]*h[1]-b[1]*h[0];a[0]=a[1]=0;a[2]=b;return a};g.lerp=function(a,b,h,c){var d=b[0];b=b[1];a[0]=d+c*(h[0]-d);a[1]=b+c*(h[1]-b);return a};g.random=function(a,b){b=b||1;var d=2*p.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};g.transformMat2=function(a,
b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[2]*b;a[1]=h[1]*d+h[3]*b;return a};g.transformMat2d=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[2]*b+h[4];a[1]=h[1]*d+h[3]*b+h[5];return a};g.transformMat3=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[3]*b+h[6];a[1]=h[1]*d+h[4]*b+h[7];return a};g.transformMat4=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[4]*b+h[12];a[1]=h[1]*d+h[5]*b+h[13];return a};g.rotate=function(a,b,h,c){var d=b[0]-h[0];b=b[1]-h[1];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c-b*f+h[0];
a[1]=d*f+b*c+h[1];return a};g.angle=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];var f=d*d+a*a;0<f&&(f=1/Math.sqrt(f));var e=c*c+b*b;0<e&&(e=1/Math.sqrt(e));d=(d*c+a*b)*f*e;return 1<d?0:-1>d?Math.PI:Math.acos(d)};g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};g.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};g.equals=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];return Math.abs(d-c)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))&&Math.abs(a-b)<=p.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};g.len=r;g.sub=e;g.mul=n;g.div=c;g.dist=f;g.sqrDist=k;g.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f64=p})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[0,0]};g.clone=function(g){return[g[0],g[1]]};g.fromValues=function(g,
e){return[g,e]};g.fromArray=function(g){for(var e=[0,0],n=Math.min(2,g.length),c=0;c<n;++c)e[c]=g[c];return e};g.createView=function(g,e){return new Float64Array(g,e,2)};g.zeros=function(){return[0,0]};g.ones=function(){return[1,1]};g.unitX=function(){return[1,0]};g.unitY=function(){return[0,1]};g.ZEROS=[0,0];g.ONES=[1,1];g.UNIT_X=[1,0];g.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});
q=function(){function e(e){var c=this;this.view=e;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(c.updateEnabled){for(var f=c.view,e=f.labelManager,g=c.graphicsView,b=f.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),a=b.length,d=f.state,h=0;h<b.length;h++)if(f=
b[h],f.attached){var l=f.lastUpdateId;if(null==l||!c.stationary&&!f.moving)f.moving=!0,f.moveStart();l!==d.id&&f.viewChange();c.stationary&&f.moving&&(f.moving=!1,f.moveEnd());f.lastUpdateId=d.id}e&&e.lastUpdateId!==d.id&&(e.viewChange(),e.lastUpdateId=d.id);g&&g.lastUpdateId!==d.id&&(g.viewChange(),g.lastUpdateId=d.id);e=c._layerViewsTrash;for(g=0;g<e.length;g++)f=e[g],c._detachLayerView(f);for(g=e.length=0;g<a;g++)f=b[g],f.isFulfilled()&&!f.attached&&c._attachLayerView(f);b=c._updateParameters;
a=c._layerViewsToUpdate;f=a.slice();g=a.length=0;for(d=f;g<d.length;g++)f=d[g],!("attached"in f)||"attached"in f&&f.attached?f.processUpdate(b):a.push(f);a=c._updatablesToUpdate;f=a.slice();for(a=a.length=0;a<f.length;a++)f[a].processUpdate(b);0===c._layerViewsToUpdate.length&&0===c._updatablesToUpdate.length&&0===e.length&&c._frameTaskHandle.pause()}}}e.prototype.destroy=function(){this.stop()};e.prototype.start=function(){var e=this;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,
stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(e._layerViewsTrash,c.removed);e.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){e.stationary=c;e.requestFrame()});this._frameTaskHandle=p.addFrameTask(this)};e.prototype.stop=function(){var e=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){return e._detachLayerView(c)}),
this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};e.prototype.requestLayerViewUpdate=function(e){this._layerViewsToUpdate.push(e);this.requestFrame()};e.prototype.requestUpdate=function(e){this._updatablesToUpdate.push(e);this.requestFrame()};e.prototype.requestFrame=function(){this._frameTaskHandle&&
this._frameTaskHandle.resume()};e.prototype._attachLayerView=function(e){e.attached||(e.attached=!0,e.attach(),this._updateParameters.stationary?e.moving=!1:(e.moving=!0,e.moveStart()))};e.prototype._detachLayerView=function(e){e.attached&&(e.detach(),e.attached=!1,e.moving=!1)};return e}();g.default=q})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}p(d,a);d.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};d.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(d.prototype,"_rotation",{get:function(){return new r({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_zoom",{get:function(){return new b({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});d.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};d.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};d.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};d.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};d.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};d.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};d.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};d.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};d.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};e([f.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],d.prototype,"effectiveLODs",void 0);e([f.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],d.prototype,"effectiveMinScale",void 0);e([f.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],d.prototype,"effectiveMaxScale",void 0);e([f.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],d.prototype,"effectiveMinZoom",void 0);e([f.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],d.prototype,"effectiveMaxZoom",void 0);e([f.property()],d.prototype,"enabled",void 0);e([f.property({type:[k]})],d.prototype,"lods",void 0);e([f.property()],d.prototype,"minScale",void 0);e([f.property()],d.prototype,"maxScale",void 0);e([f.property()],d.prototype,
"minZoom",void 0);e([f.property()],d.prototype,"maxZoom",void 0);e([f.property()],d.prototype,"rotationEnabled",void 0);e([f.property()],d.prototype,"snapToZoom",void 0);e([f.property()],d.prototype,"view",void 0);e([f.property({type:r,dependsOn:["rotationEnabled"]})],d.prototype,"_rotation",null);e([f.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],d.prototype,"_defaultLODs",null);e([f.property({readOnly:!0,type:b,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
d.prototype,"_zoom",null);return d=e([f.subclass("esri.views.2d.MapViewConstraints")],d)}(f.declared(n,c))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,g,p,e,n,c){return function(f){function k(){var b=null!==f&&f.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}p(k,f);
g=k;k.prototype.constrain=function(b,a){if(!this.enabled||!a)return b;this.rotationEnabled||(b.rotation=a.rotation);return b};k.prototype.clone=function(){return new g({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var g;e([c.property()],k.prototype,"enabled",void 0);e([c.property()],k.prototype,"rotationEnabled",void 0);return k=g=e([c.subclass("esri.views.2d.constraints.RotationConstraint")],k)}(c.declared(n))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(q,g,p,e,n,c,f){return function(k){function g(a){a=k.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}p(g,k);b=g;g.prototype.initialize=function(){var a=this,b,c,f=this.lods;c=this.minScale;b=this.maxScale;var e=this.minZoom,k=this.maxZoom,m=-1,g=-1,r=!1,v=!1;0!==c&&0!==b&&c<b&&(b=[b,c],c=b[0],
b=b[1]);if(f&&f.length){f=f.map(function(a){return a.clone()});f.sort(function(a,b){return b.scale-a.scale});f.forEach(function(a,b){return a.level=b});for(var w,n=0,p=f;n<p.length;n++){var D=p[n];!r&&0<c&&c>=D.scale&&(m=D.level,r=!0);!v&&0<b&&b>=D.scale&&(g=w?w.level:-1,v=!0);w=D}-1===e&&(e=0===c?0:m);-1===k&&(k=0===b?f.length-1:g);e=Math.max(e,0);e=Math.min(e,f.length-1);k=Math.max(k,0);k=Math.min(k,f.length-1);e>k&&(c=[k,e],e=c[0],k=c[1]);c=f[e].scale;b=f[k].scale;f.splice(0,e);f.splice(k-e+1,
f.length);f.forEach(function(b,d){a._lodByScale[b.scale]=b;a._scales[d]=b.scale});this._set("effectiveLODs",f);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",k)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",b)};g.prototype.constrain=function(a,b){if(b&&a.scale===b.scale)return a;var d=this.effectiveMinScale,c=this.effectiveMaxScale,f=a.targetGeometry,e=b&&b.targetGeometry,m=0!==d&&a.scale>d;if(0!==c&&a.scale<c||m)d=m?d:c,e&&(b=(d-b.scale)/(a.scale-b.scale),f.x=e.x+(f.x-
e.x)*b,f.y=e.y+(f.y-e.y)*b),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};g.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};g.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-
1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};g.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,f;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var e=0;e<b.length-1;e++){c=b[e];f=b[e+1];if(f===a)return b=e+this.effectiveMinZoom,b+1;if(c>a&&f<a)return b=e+this.effectiveMinZoom,b+1-(a-f)/(c-f)}};g.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);
return this.zoomToScale(Math.round(a))};g.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};g.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};g.prototype.clone=function(){return new b({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};
g.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,f,e){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var b;e([c.property({readOnly:!0})],g.prototype,"effectiveLODs",void 0);e([c.property({readOnly:!0})],g.prototype,"effectiveMinZoom",void 0);e([c.property({readOnly:!0})],g.prototype,"effectiveMaxZoom",void 0);e([c.property({readOnly:!0})],g.prototype,"effectiveMinScale",
void 0);e([c.property({readOnly:!0})],g.prototype,"effectiveMaxScale",void 0);e([c.property({type:[f]})],g.prototype,"lods",void 0);e([c.property()],g.prototype,"minZoom",void 0);e([c.property()],g.prototype,"maxZoom",void 0);e([c.property()],g.prototype,"minScale",void 0);e([c.property()],g.prototype,"maxScale",void 0);e([c.property()],g.prototype,"snapToZoom",void 0);return g=b=e([c.subclass("esri.views.2d.constraints.ZoomConstraint")],g)}(c.declared(n))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,g,p,e,n,c,f,k,r,b){var a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}p(b,a);e([c.property()],b.prototype,"left",void 0);e([c.property()],b.prototype,"top",void 0);e([c.property()],b.prototype,"right",void 0);e([c.property()],b.prototype,"bottom",void 0);return b=e([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(n));return function(d){function h(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];
var e=d.apply(this,c)||this;e.content=new b;e._updateContent=function(){var a=k.vec2f64.create();return function(){var b=e._get("size"),d=e._get("padding");if(b&&d){var c=e.content;f.vec2.set(a,d.left+d.right,d.top+d.bottom);f.vec2.subtract(a,b,a);f.vec2.copy(c.size,a);if(b=c.viewpoint)e.viewpoint=b}}}();e.watch(["size","padding"],e._updateContent,!0);e.padding=new a;e.size=[0,0];return e}p(h,d);Object.defineProperty(h.prototype,"padding",{set:function(b){this._set("padding",b||new a)},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;r.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var d=b.targetGeometry;a.center[0]=d.x;a.center[1]=d.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=d.spatialReference;this._update()}},enumerable:!0,configurable:!0});e([c.property()],h.prototype,"content",void 0);e([c.property({type:a})],h.prototype,"padding",null);e([c.property()],
h.prototype,"viewpoint",null);return h=e([c.subclass("esri.views.2d.PaddedViewState")],h)}(c.declared(b))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G){var v=[0,0];return function(f){function g(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=f.apply(this,b)||this;b._viewpoint2D={center:m.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new n.Extent;b.id=0;b.inverseTransform=d.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=d.mat2df64.create();b.transformNoRotation=d.mat2df64.create();b.displayMat3=l.mat3f32.create();b.displayViewMat3=
l.mat3f32.create();b.viewMat3=l.mat3f32.create();b.viewMat2d=a.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}p(g,f);w=g;Object.defineProperty(g.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,d=a.targetGeometry;
b.center[0]=d.x;b.center[1]=d.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=d.spatialReference}this._update()},enumerable:!0,configurable:!0});g.prototype.copy=function(a){var b=this.size,d=this.viewpoint;d&&b?(this.viewpoint=G.copy(d,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};g.prototype.clone=function(){return new w({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};g.prototype.toMap=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);v[0]=b;v[1]=d;return t.vec2.transformMat2d(a,v,this.inverseTransform)};g.prototype.toScreen=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);v[0]=b;v[1]=d;return t.vec2.transformMat2d(a,v,this.transform)};g.prototype.toScreenNoRotation=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);v[0]=b;v[1]=
d;return t.vec2.transformMat2d(a,v,this.transformNoRotation)};g.prototype.pixelSizeAt=function(a){return G.pixelSizeAt(a,this.viewpoint,this.size)};g.prototype.getScreenTransform=function(a,b){var d=this._viewpoint2D.center,c=this._get("pixelRatio")||1,h=this._get("size");G.getMatrix(a,d,h,b,0,c);return a};g.prototype._update=function(){var a=this._viewpoint2D,d=a.center,f=a.spatialReference,e=a.scale,l=a.rotation,a=this._get("pixelRatio")||1,m=this._get("size");this._set("id",this.id+1);var g=new c({targetGeometry:new n.Point(d[0],
d[1],f),scale:e,rotation:l});this._set("viewpoint",g);if(m&&f&&e)return this.resolution=G.getResolution(g),this.rotation=l,this.scale=e,this.spatialReference=f,t.vec2.copy(this.center,d),h.mat3.set(this.displayMat3,0!==m[0]?2/m[0]:0,0,0,0,0!==m[1]?-2/m[1]:0,0,-1,1,1),e=h.mat3.identity(this.viewMat3),d=u.vec2f32.fromValues(m[0]/2,m[1]/2),f=u.vec2f32.fromValues(-m[0]/2,-m[1]/2),l=r.common.toRadian(l),h.mat3.translate(e,e,d),h.mat3.rotate(e,e,l),h.mat3.translate(e,e,f),h.mat3.multiply(this.displayViewMat3,
this.displayMat3,e),e=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(e,e,d),b.mat2d.rotate(e,e,l),b.mat2d.translate(e,e,f),G.getExtent(this.extent,g,m),G.getTransform(this.transform,g,m,a),b.mat2d.invert(this.inverseTransform,this.transform),G.getTransformNoRotation(this.transformNoRotation,g,m,a),this.worldScreenWidth=G.getWorldScreenWidth(this.spatialReference,this.resolution),this};var w;e([k.property({readOnly:!0})],g.prototype,"id",void 0);e([k.property({value:1,json:{write:!0}})],g.prototype,
"pixelRatio",null);e([k.property({json:{write:!0}})],g.prototype,"size",null);e([k.property({type:c,json:{write:!0}})],g.prototype,"viewpoint",null);return g=w=e([k.subclass("esri.views.2d.ViewState")],g)}(k.declared(f))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df32=p})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(q,
g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(6);g[0]=1;g[3]=1;return g};g.clone=function(g){var e=new Float32Array(6);e[0]=g[0];e[1]=g[1];e[2]=g[2];e[3]=g[3];e[4]=g[4];e[5]=g[5];return e};g.fromValues=function(g,e,n,c,f,k){var r=new Float32Array(6);r[0]=g;r[1]=e;r[2]=n;r[3]=c;r[4]=f;r[5]=k;return r};g.createView=function(g,e){return new Float32Array(g,e,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3=p})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,g,p){function e(c,f,e){var g=f[0],b=f[1],a=f[2],d=f[3],h=f[4],l=f[5],k=f[6],u=f[7];f=f[8];var m=e[0],x=e[1],n=e[2],v=e[3],w=e[4],y=e[5],p=e[6],q=e[7];e=e[8];c[0]=m*g+x*d+n*k;c[1]=m*b+x*h+n*u;c[2]=m*a+x*l+n*f;c[3]=v*g+w*d+y*k;c[4]=v*b+w*h+y*u;c[5]=v*a+w*l+y*f;c[6]=p*g+q*d+e*k;c[7]=p*b+q*h+e*u;c[8]=p*a+q*l+e*f;return c}function n(c,
f,e){c[0]=f[0]-e[0];c[1]=f[1]-e[1];c[2]=f[2]-e[2];c[3]=f[3]-e[3];c[4]=f[4]-e[4];c[5]=f[5]-e[5];c[6]=f[6]-e[6];c[7]=f[7]-e[7];c[8]=f[8]-e[8];return c}Object.defineProperty(g,"__esModule",{value:!0});g.fromMat4=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[4];c[4]=f[5];c[5]=f[6];c[6]=f[8];c[7]=f[9];c[8]=f[10];return c};g.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];return c};g.set=function(c,f,e,g,b,a,d,h,l,t){c[0]=f;c[1]=e;c[2]=g;
c[3]=b;c[4]=a;c[5]=d;c[6]=h;c[7]=l;c[8]=t;return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.transpose=function(c,f){if(c===f){var e=f[1],g=f[2],b=f[5];c[1]=f[3];c[2]=f[6];c[3]=e;c[5]=f[7];c[6]=g;c[7]=b}else c[0]=f[0],c[1]=f[3],c[2]=f[6],c[3]=f[1],c[4]=f[4],c[5]=f[7],c[6]=f[2],c[7]=f[5],c[8]=f[8];return c};g.invert=function(c,f){var e=f[0],g=f[1],b=f[2],a=f[3],d=f[4],h=f[5],l=f[6],t=f[7];f=f[8];var u=f*d-h*t,m=-f*a+h*l,x=t*a-d*l,n=e*u+g*m+b*
x;if(!n)return null;n=1/n;c[0]=u*n;c[1]=(-f*g+b*t)*n;c[2]=(h*g-b*d)*n;c[3]=m*n;c[4]=(f*e-b*l)*n;c[5]=(-h*e+b*a)*n;c[6]=x*n;c[7]=(-t*e+g*l)*n;c[8]=(d*e-g*a)*n;return c};g.adjoint=function(c,f){var e=f[0],g=f[1],b=f[2],a=f[3],d=f[4],h=f[5],l=f[6],t=f[7];f=f[8];c[0]=d*f-h*t;c[1]=b*t-g*f;c[2]=g*h-b*d;c[3]=h*l-a*f;c[4]=e*f-b*l;c[5]=b*a-e*h;c[6]=a*t-d*l;c[7]=g*l-e*t;c[8]=e*d-g*a;return c};g.determinant=function(c){var f=c[3],e=c[4],g=c[5],b=c[6],a=c[7],d=c[8];return c[0]*(d*e-g*a)+c[1]*(-d*f+g*b)+c[2]*
(a*f-e*b)};g.multiply=e;g.translate=function(c,f,e){var g=f[0],b=f[1],a=f[2],d=f[3],h=f[4],l=f[5],k=f[6],u=f[7];f=f[8];var m=e[0];e=e[1];c[0]=g;c[1]=b;c[2]=a;c[3]=d;c[4]=h;c[5]=l;c[6]=m*g+e*d+k;c[7]=m*b+e*h+u;c[8]=m*a+e*l+f;return c};g.rotate=function(c,f,e){var g=f[0],b=f[1],a=f[2],d=f[3],h=f[4],l=f[5],k=f[6],u=f[7];f=f[8];var m=Math.sin(e);e=Math.cos(e);c[0]=e*g+m*d;c[1]=e*b+m*h;c[2]=e*a+m*l;c[3]=e*d-m*g;c[4]=e*h-m*b;c[5]=e*l-m*a;c[6]=k;c[7]=u;c[8]=f;return c};g.scale=function(c,f,e){var g=e[0],
b=e[1];e=e[2];c[0]=g*f[0];c[1]=g*f[1];c[2]=g*f[2];c[3]=b*f[3];c[4]=b*f[4];c[5]=b*f[5];c[6]=e*f[6];c[7]=e*f[7];c[8]=e*f[8];return c};g.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=f[0];c[7]=f[1];c[8]=1;return c};g.fromRotation=function(c,f){var e=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=e;c[2]=0;c[3]=-e;c[4]=f;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromScaling=function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=0;c[4]=f[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromMat2d=function(c,
f){c[0]=f[0];c[1]=f[1];c[2]=0;c[3]=f[2];c[4]=f[3];c[5]=0;c[6]=f[4];c[7]=f[5];c[8]=1;return c};g.fromQuat=function(c,f){var e=f[0],g=f[1],b=f[2];f=f[3];var a=e+e,d=g+g,h=b+b,e=e*a,l=g*a,g=g*d,t=b*a,u=b*d,b=b*h,a=f*a,d=f*d;f*=h;c[0]=1-g-b;c[3]=l-f;c[6]=t+d;c[1]=l+f;c[4]=1-e-b;c[7]=u-a;c[2]=t-d;c[5]=u+a;c[8]=1-e-g;return c};g.normalFromMat4Legacy=function(c,f){var e=f[0],g=f[1],b=f[2],a=f[4],d=f[5],h=f[6],l=f[8],t=f[9];f=f[10];var u=f*d-h*t,m=-f*a+h*l,x=t*a-d*l,n=e*u+g*m+b*x;if(!n)return null;n=1/n;
c[0]=u*n;c[1]=(-f*g+b*t)*n;c[2]=(h*g-b*d)*n;c[3]=m*n;c[4]=(f*e-b*l)*n;c[5]=(-h*e+b*a)*n;c[6]=x*n;c[7]=(-t*e+g*l)*n;c[8]=(d*e-g*a)*n;return c};g.normalFromMat4=function(c,f){var e=f[0],g=f[1],b=f[2],a=f[3],d=f[4],h=f[5],l=f[6],t=f[7],u=f[8],m=f[9],x=f[10],n=f[11],v=f[12],w=f[13],y=f[14];f=f[15];var p=e*h-g*d,q=e*l-b*d,A=e*t-a*d,B=g*l-b*h,H=g*t-a*h,C=b*t-a*l,E=u*w-m*v,I=u*y-x*v,u=u*f-n*v,F=m*y-x*w,m=m*f-n*w,x=x*f-n*y,n=p*x-q*m+A*F+B*u-H*I+C*E;if(!n)return null;n=1/n;c[0]=(h*x-l*m+t*F)*n;c[1]=(l*u-d*
x-t*I)*n;c[2]=(d*m-h*u+t*E)*n;c[3]=(b*m-g*x-a*F)*n;c[4]=(e*x-b*u+a*I)*n;c[5]=(g*u-e*m-a*E)*n;c[6]=(w*C-y*H+f*B)*n;c[7]=(y*A-v*C-f*q)*n;c[8]=(v*H-w*A+f*p)*n;return c};g.projection=function(c,f,e){c[0]=2/f;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/e;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};g.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],
2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};g.add=function(c,f,e){c[0]=f[0]+e[0];c[1]=f[1]+e[1];c[2]=f[2]+e[2];c[3]=f[3]+e[3];c[4]=f[4]+e[4];c[5]=f[5]+e[5];c[6]=f[6]+e[6];c[7]=f[7]+e[7];c[8]=f[8]+e[8];return c};g.subtract=n;g.multiplyScalar=function(c,f,e){c[0]=f[0]*e;c[1]=f[1]*e;c[2]=f[2]*e;c[3]=f[3]*e;c[4]=f[4]*e;c[5]=f[5]*e;c[6]=f[6]*e;c[7]=f[7]*e;c[8]=f[8]*e;return c};g.multiplyScalarAndAdd=function(c,f,e,g){c[0]=f[0]+e[0]*g;c[1]=f[1]+e[1]*g;c[2]=f[2]+e[2]*g;c[3]=
f[3]+e[3]*g;c[4]=f[4]+e[4]*g;c[5]=f[5]+e[5]*g;c[6]=f[6]+e[6]*g;c[7]=f[7]+e[7]*g;c[8]=f[8]+e[8]*g;return c};g.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]&&c[6]===f[6]&&c[7]===f[7]&&c[8]===f[8]};g.equals=function(c,f){var e=c[0],g=c[1],b=c[2],a=c[3],d=c[4],h=c[5],l=c[6],t=c[7];c=c[8];var u=f[0],m=f[1],x=f[2],n=f[3],v=f[4],w=f[5],y=f[6],z=f[7];f=f[8];return Math.abs(e-u)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(g-m)<=p.EPSILON*
Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(b-x)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(x))&&Math.abs(a-n)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))&&Math.abs(d-v)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(h-w)<=p.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(l-y)<=p.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-z)<=p.EPSILON*Math.max(1,Math.abs(t),Math.abs(z))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};g.mul=e;g.sub=n})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require",
"exports","./factories/mat3f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3f32=p})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(9);g[0]=1;g[4]=1;g[8]=1;return g};g.clone=function(g){var e=new Float32Array(9);e[0]=g[0];e[1]=g[1];e[2]=g[2];e[3]=g[3];e[4]=g[4];e[5]=g[5];e[6]=g[6];e[7]=g[7];e[8]=g[8];return e};g.fromValues=function(g,
e,n,c,f,k,r,b,a){var d=new Float32Array(9);d[0]=g;d[1]=e;d[2]=n;d[3]=c;d[4]=f;d[5]=k;d[6]=r;d[7]=b;d[8]=a;return d};g.createView=function(g,e){return new Float32Array(g,e,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f32=p})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,g){function p(){return new Float32Array(2)}function e(c,
f){var b=new Float32Array(2);b[0]=c;b[1]=f;return b}function n(){return e(1,1)}function c(){return e(1,0)}function f(){return e(0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var f=new Float32Array(2);f[0]=c[0];f[1]=c[1];return f};g.fromValues=e;g.createView=function(c,f){return new Float32Array(c,f,2)};g.zeros=function(){return p()};g.ones=n;g.unitX=c;g.unitY=f;g.ZEROS=p();g.ONES=n();g.UNIT_X=c();g.UNIT_Y=f()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require",
"exports"],function(q,g){function p(e){return e instanceof Float32Array&&2<=e.length}function e(e){return Array.isArray(e)&&2<=e.length}Object.defineProperty(g,"__esModule",{value:!0});g.isVec2f32=p;g.isVec2f64=e;g.isVec2=function(g){return p(g)||e(g)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(q,g,p,e,n,c){Object.defineProperty(g,"__esModule",{value:!0});g.TileInfoView=p;g.TileKey=
e;g.TileQueue=n;g.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(q,g,p,e,n,c,f){var k=new c("0/0/0/0"),r=function(){function a(a,b,c,f,e,m,g,k){this.x=a;this.ymin=b;this.ymax=c;this.invM=f;this.leftAdjust=e;this.rightAdjust=m;this.leftBound=g;this.rightBound=k}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var h=
c[0];c=c[1];var f=h-d,e=c-b,e=0!==e?f/e:0,g=(Math.ceil(b)-b)*e,k=(Math.floor(b)-b)*e;return new a(d,Math.floor(b),Math.ceil(c),e,0>f?g:k,0>f?k:g,0>f?h:d,0>f?d:h)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var d=this;this.tileInfo=a;this.fullExtent=
b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var h=this._lodInfos=c.map(function(d){return e.create(a,d,b)});c.forEach(function(a,b){d._infoByLevel[a.level]=h[b];d._infoByScale[a.scale]=h[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=
function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);k.set(b);return(b=this._infoByLevel[k.level])?b.getTileBounds(a,k,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);k.set(b);return(b=this._infoByLevel[k.level])?b.getTileCoords(a,k,c):a};a.prototype.getTileCoverage=function(a,c,e){void 0===c&&(c=192);void 0===e&&(e="closest");e="closest"===e?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);
var d=n.pool.acquire(e),h=this._wrap,l;l=Infinity;var g=-Infinity,k,v,w=d.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<b.length;c++){var y=b[c];a.toMap(y,y);y[0]=e.getColumnForX(y[0]);y[1]=e.getRowForY(y[1])}a=[];y=3;for(c=0;4>c;c++){if(b[c][1]!==b[y][1]){var p=r.create(b[c],b[y]);l=Math.min(p.ymin,l);g=Math.max(p.ymax,g);void 0===a[p.ymin]&&(a[p.ymin]=[]);a[p.ymin].push(p)}y=c}if(null==l||null==g||100<g-l)return null;for(y=[];l<g;){null!=
a[l]&&(y=y.concat(a[l]));k=Infinity;v=-Infinity;for(c=y.length-1;0<=c;c--)p=y[c],k=Math.min(k,p.getLeftCol()),v=Math.max(v,p.getRightCol());k=Math.floor(k);v=Math.floor(v);if(l>=e.first[1]&&l<=e.last[1])if(h)if(e.size[0]<e.worldSize[0])for(p=Math.floor(v/e.worldSize[0]),c=Math.floor(k/e.worldSize[0]);c<=p;c++)w.push(new f(l,Math.max(e.getFirstColumnForWorld(c),k),Math.min(e.getLastColumnForWorld(c),v)));else w.push(new f(l,k,v));else k>e.last[0]||v<e.first[0]||(k=Math.max(k,e.first[0]),v=Math.min(v,
e.last[0]),w.push(new f(l,k,v)));l+=1;for(c=y.length-1;0<=c;c--)p=y[c],p.ymax>=l?p.incrRow():y.splice(c,1)}return d};a.prototype.getTileParentId=function(a){k.set(a);a=this._lodInfos.indexOf(this._infoByLevel[k.level])-1;if(0>a)return null;this._getTileIdAtLOD(k,this._lodInfos[a],k);return k.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};
a.prototype.intersects=function(a,b){k.set(b);b=this._infoByLevel[k.level];var d=a.lodInfo;if(d.resolution>b.resolution){this._getTileIdAtLOD(k,d,k);for(var c=d.denormalizeCol(k.col,k.world),h=0,f=a.spans;h<f.length;h++){var e=f[h];if(e.row===k.row&&e.colFrom<=c&&e.colTo>=c)return!0}}if(d.resolution<b.resolution){f=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);
a=f[0];var c=f[1],h=f[2],f=f[3],g=b.denormalizeCol(k.col,k.world),e=d.getColumnForX(b.getXForColumn(g)),v=d.getRowForY(b.getYForRow(k.row)),g=d.getColumnForX(b.getXForColumn(g+1))-1;b=d.getRowForY(b.getYForRow(k.row+1))-1;return!(e>f||g<h||v>c||b<a)}var n=d.denormalizeCol(k.col,k.world);return a.spans.some(function(a){return a.row===k.row&&a.colFrom<=n&&a.colTo>=n})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=p.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,d,c,h){return Math.abs(d-a)<Math.abs(b-
a)?d:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);
if(b.resolution<d.resolution)return null;if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,g,p,e){function n(c,e,g){c[0]=e;c[1]=g;return c}var c=new e("0/0/0/0");return function(){function f(c,f,b,a,d,h,e,g,u,m,n,p){this.level=
c;this.resolution=f;this.scale=b;this.origin=a;this.first=d;this.last=h;this.size=e;this.norm=g;this.worldStart=u;this.worldEnd=m;this.worldSize=n;this.wrap=p}f.create=function(c,e,b){var a=p.getInfo(c.spatialReference),d=[c.origin.x,c.origin.y],h=[c.size[0]*e.resolution,c.size[1]*e.resolution],l=[-Infinity,-Infinity],g=[Infinity,Infinity],k=[Infinity,Infinity];b&&(n(l,Math.max(0,Math.floor((b.xmin-d[0])/h[0])),Math.max(0,Math.floor((d[1]-b.ymax)/h[1]))),n(g,Math.max(0,Math.floor((b.xmax-d[0])/h[0])),
Math.max(0,Math.floor((d[1]-b.ymin)/h[1]))),n(k,g[0]-l[0]+1,g[1]-l[1]+1));var m;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/e.resolution)/c.size[0]),k[1]],a=[Math.floor((a.origin[0]-d[0])/h[0]),l[1]],b=[c[0]+a[0]-1,g[1]],m=!0):(a=l,b=g,c=k,m=!1);return new f(e.level,e.resolution,e.scale,d,l,g,k,h,a,b,c,m)};f.prototype.normalizeCol=function(c){if(!this.wrap)return c;var f=this.worldSize[0];return 0>c?f-1-Math.abs((c+1)%f):c%f};f.prototype.denormalizeCol=function(c,f){return this.wrap?this.worldSize[0]*
f+c:c};f.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};f.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};f.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};f.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};f.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};f.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};f.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};f.prototype.getTileBounds=function(f,e,b){void 0===b&&(b=!1);c.set(e);var a=b?c.col:this.denormalizeCol(c.col,c.world),d=c.row;e=this.getXForColumn(a);b=this.getYForRow(d+1);a=this.getXForColumn(a+1);d=this.getYForRow(d);f[0]=e;f[1]=b;f[2]=a;f[3]=d;return f};f.prototype.getTileCoords=function(f,e,b){void 0===b&&(b=!1);c.set(e);e=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(f)?n(f,this.getXForColumn(e),
this.getYForRow(c.row)):(f.x=this.getXForColumn(e),f.y=this.getYForRow(c.row));return f};return f}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,g,p){return function(){function e(e,c,f,g){this.set(e,c,f,g)}e.from=function(g,c,f,k){return e.pool.acquire(g,c,f,k)};e.getId=function(e,c,f,g){return"object"===typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+c+"/"+f+"/"+g};Object.defineProperty(e.prototype,"key",{get:function(){return this},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});e.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world};e.prototype.release=function(){this.world=this.col=this.row=this.level=0};e.prototype.set=function(e,c,f,g){null==e?this.world=this.col=this.row=this.level=0:"object"===typeof e?(this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=
e.world||0):"string"===typeof e?(e=e.split("/"),c=e[1],f=e[2],g=e[3],this.level=parseFloat(e[0]),this.row=parseFloat(c),this.col=parseFloat(f),this.world=parseFloat(g)):(this.level=+e,this.row=+c,this.col=+f,this.world=+g||0);return this};e.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};e.prototype.getChildKeys=function(){var g=this.level+1,c=this.row<<1,f=this.col<<1,k=this.world;return[e.pool.acquire(g,c,f,k),e.pool.acquire(g,c,f+1,k),e.pool.acquire(g,
c+1,f,k),e.pool.acquire(g,c+1,f+1,k)]};e.prototype.compareRowMajor=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0};e.sort=function(g){return g.map(function(c){return e.from(c)}).sort(function(c,e){return c.compareRowMajor(e)}).map(function(c){return c.id})};e.pool=new p(e,!0,null,25,50);return e}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(q,g,
p,e,n){return function(){function c(c){this.lodInfo=c;this.spans=p.acquire()}c.prototype.release=function(){for(var c=0,e=this.spans;c<e.length;c++)n.pool.release(e[c]);p.release(this.spans)};c.prototype.forEach=function(c,e){var f=this.spans,b=this.lodInfo,a=b.level;if(0!==f.length)for(var d=0;d<f.length;d++)for(var h=f[d],g=h.row,t=h.colTo,h=h.colFrom;h<=t;h++)c.call(e,a,g,b.normalizeCol(h),b.getWorldForColumn(h))};c.pool=new e(c,!0);return c}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports","../../../core/ObjectPool"],function(q,g,p){return function(){function e(e,c,f){this.row=e;this.colFrom=c;this.colTo=f}e.pool=new p(e,!0);return e}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(q,g,p,e,n,c,f,k,r,b){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var d=new Set,h=[],l=new Map,t=[0,0];return function(f){function g(a){a=f.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}p(g,f);g.prototype.initialize=function(){var a=this,d=this.concurrency,c=this.process,e="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new b.QueueProcessor({concurrency:d,
process:function(b,d){b=a._keyToItem.get(b);return c(b,{signal:d})},peeker:e})};g.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(g.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});g.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};g.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};g.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};g.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};g.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};g.prototype.pause=function(){this._queue.pause()};g.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,d,c,e=this;return n(this,function(f){b=a.key.id;if(this.has(b))return[2,this.get(b)];d=this._queue.push(b);c=function(){e._keyToItem.delete(b);e.notifyChange("updating")};this._keyToItem.set(b,a);d.then(c,c);this.notifyChange("updating");return[2,d]})})};g.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};g.prototype.resume=
function(){this._queue.resume()};g.prototype._peekByScaleFirst=function(b){if(!this.state)return b[0];for(var c=this.tileInfoView,e=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=0;g<b.length;g++){var m=this._keyToItem.get(b[g]),t=this.tileInfoView.getTileScale(m.key);l.has(t)||(l.set(t,[]),e=Math.max(t,e),f=Math.min(t,f));l.get(t).push(m.key);d.add(t)}var k=this.state.scale;l.has(k)||(a(h,d),h.sort(),k=h.reduce(function(a,b,d,c){return Math.abs(b-k)<Math.abs(a-k)?b:a},h[0]));k=Math.min(k,
e);k=Math.max(k,f);b=l.get(k);var u=c.getClosestInfoForScale(k),n=u.getColumnForX(this.state.center[0]),x=u.getRowForY(this.state.center[1]);b.sort(function(a,b){var d=u.denormalizeCol(a.col,a.world),c=u.denormalizeCol(b.col,b.world);return Math.sqrt((n-d)*(n-d)+(x-a.row)*(x-a.row))-Math.sqrt((n-c)*(n-c)+(x-b.row)*(x-b.row))});d.clear();l.clear();return b[0].id};g.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,d=this.state.center,c=Number.POSITIVE_INFINITY,
e=null,f=0;f<a.length;f++){var h=this._keyToItem.get(a[f]);b.getTileCoords(t,h.key);var g=r.vec2.distance(t,d);g<c&&(c=g,e=h.key)}return e.id};e([k.property({constructOnly:!0})],g.prototype,"concurrency",void 0);e([k.property({constructOnly:!0})],g.prototype,"process",void 0);e([k.property()],g.prototype,"state",void 0);e([k.property({constructOnly:!0})],g.prototype,"strategy",void 0);e([k.property({constructOnly:!0})],g.prototype,"tileInfoView",void 0);e([k.property({readOnly:!0})],g.prototype,"updating",
null);return g=e([k.subclass("esri.views.2d.tiling.TileQueue")],g)}(k.declared(f))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(q,g,p,e,n,c,f,k){Object.defineProperty(g,"__esModule",{value:!0});var r=function(){return function(b,a){this.item=b;this.controller=a;this.promise=null}}();q=function(){function b(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new f({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.priority&&c&&(this._task=c.registerTask(a.priority,function(a){return b.update(a)},function(){return b.needsUpdate()}))}b.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};b.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
b.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};b.prototype.isOngoing=function(a){return this._processingItems.has(a)};b.prototype.has=function(a){return this._deferreds.has(a)};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(a){return e(this,void 0,void 0,function(){var b,e,f,g,k,m,n=this;return p(this,function(d){if(b=this.get(a))return[2,b];f=c.createAbortController();g=function(){var b=n._processingItems.get(a);
b&&b.controller.abort();k();e.reject(c.createAbortError())};k=function(){m.remove();n._deferreds.delete(a);n._controllers.delete(a);n._queue.remove(a);n._processingItems.delete(a);n._scheduleNext()};m=c.onAbortOrThrow(f.signal,g);e=c.createDeferred();this._deferreds.set(a,e);this._controllers.set(a,f);e.promise.then(k,k);this._queue.push(a);this._scheduleNext();return[2,e.promise]})})};b.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};b.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=k.schedule(function(){a._schedule=null;a._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};b.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};
b.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(b))};b.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};b.prototype._process=function(a){var b=this;if(!n.isNone(a)){var e,f=c.createAbortController(),g=new r(a,f);this._processingItems.set(a,g);try{e=this.process(a,f.signal)}catch(u){this._processError(g,u)}e&&"function"===typeof e.then?(g.promise=
e,e.then(function(a){return b._processResult(g,a)},function(a){return b._processError(g,a)})):this._processResult(g,e)}};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return b}();g.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports"],function(q,g){return function(){function g(e){this._items=[];this._itemSet=new Set;this._peeker=function(e){return e[0]};this._length=0;e&&e.peeker&&
(this._peeker=e.peeker)}Object.defineProperty(g.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});g.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};g.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};g.prototype.push=function(e){this.contains(e)||this._add(e)};g.prototype.contains=function(e){return 0<this._length&&this._itemSet.has(e)};g.prototype.pop=function(){if(0!==this._length){var e=this.peek();
this._remove(e);return e}};g.prototype.remove=function(e){this.contains(e)&&this._remove(e)};g.prototype._add=function(e){this._items.push(e);this._itemSet.add(e);this._length++};g.prototype._remove=function(e){this._itemSet.delete(e);this._items.splice(this._items.indexOf(e),1);this._length--};return g}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(q,g,p,e){var n=new e(0,0,0,0),c=new Map,f=[],k=[];return function(){function e(b){this._previousScale=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;this.resampling=null==b.resampling||!!b.resampling;b.cachePolicy&&(this.cachePolicy=b.cachePolicy);b.coveragePolicy&&(this.coveragePolicy=b.coveragePolicy);null!=b.buffer&&(this.buffer=b.buffer)}e.prototype.destroy=function(){this.tileIndex.clear()};e.prototype.update=
function(b){var a=this,d=this.resampling,e=this.tileIndex,g=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);k.length=0;f.length=0;c.clear();if(g){var t=this.tileInfoView.tileInfo,u=t.minScale,m=t.maxScale,t=g.spans,x=g.lodInfo,r=x.level,v=b.state.scale,w=!b.stationary&&v>this._previousScale;this._previousScale=v;this.tiles.length=0;if(!d&&(v>u||v<m))return this.tiles.length=0,c.clear(),e.forEach(function(b){a.releaseTile(b)}),e.clear(),k.length=0,f.length=0,c.clear(),!0;
e.forEach(function(a){return a.visible=!0});m=u=0;if(0<t.length)for(v=0;v<t.length;v++){b=t[v];for(var y=b.row,p=b.colTo,q=b.colFrom;q<=p;q++)u++,b=n.set(r,y,x.normalizeCol(q),x.getWorldForColumn(q)).id,e.has(b)?(d=e.get(b),d.isReady?(c.set(b,d),m++):w||this._addParentTile(b,c)):(d=this.acquireTile(n),this.tileIndex.set(b,d),w||this._addParentTile(b,c))}var A=m===u;e.forEach(function(b,d){n.set(d);if(!c.has(d)){var e=a.tileInfoView.intersects(g,n);!e||!w&&A?"purge"===a.cachePolicy?n.level===r&&e||
f.push(d):(n.level>r||!e)&&f.push(d):b.isReady?k.push(d):n.level>r&&f.push(d)}});for(t=0;t<k.length;t++)b=k[t],(d=e.get(b))&&d.isReady&&c.set(b,d);for(t=0;t<f.length;t++)b=f[t],d=e.get(b),this.releaseTile(d),e["delete"](b);c.forEach(function(b){return a.tiles.push(b)});e.forEach(function(a){c.has(a.key.id)||(a.visible=!1)});return A}};e.prototype.clear=function(){var b=this,a=this.tileIndex;a.forEach(function(a){b.releaseTile(a)});a.clear()};e.prototype._addParentTile=function(b,a){for(var d=null;;){b=
this.tileInfoView.getTileParentId(b);if(!b)break;if(this.tileIndex.has(b)&&(d=this.tileIndex.get(b))&&d.isReady){a.has(d.key.id)||a.set(d.key.id,d);break}}};return e}()})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m,x,G,v,w){var y={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},z={zoomIn:["\x3d","+"],zoomOut:["-","_"]},D={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(g){function n(){var a=null!==g&&g.apply(this,arguments)||this;a._handles=new c;return a}p(n,g);n.prototype.initialize=function(){var a=this;this.viewEvents=new v.ViewEvents(this.view);
this._handles.add([f.whenNot(this.view,"ready",function(){return a._disconnect()}),f.when(this.view,"ready",function(){return a._connect()})])};n.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};n.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};n.prototype._connect=
function(){var c=new x.BrowserEventSource(this.view.surface,this.view.input),e=new G.InputManager(c);e.installHandlers("prevent-context-menu",[new w.PreventContextMenu]);e.installHandlers("navigation",[new m.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new b.DragPan(this.view,"primary"),new h.KeyPan(this.view,y),new t.KeyZoom(this.view,z),new l.KeyRotate(this.view,D),new a.DragRotate(this.view,"secondary"),new r.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(e);this._source=c;this._inputManager=e};Object.defineProperty(n.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});e([k.property()],n.prototype,"view",void 0);return n=e([k.subclass("esri.views.2d.input.MapViewInputManager")],n)}(k.declared(n))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],
function(q,g,p,e,n){Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function e(e,f){var b=c.call(this,!0)||this;b.view=e;b.registerIncoming("double-click",f,function(a){return b._handleDoubleClick(a,f)});return b}p(e,c);e.prototype._handleDoubleClick=function(c,e){n.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return e}(e.InputHandler);g.DoubleClickZoom=
q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.eventMatchesPointerAction=function(g,e){switch(e){case "primary":return"touch"===g.pointerType||0===g.button;case "secondary":return"touch"!==g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}};g.eventMatchesMousePointerAction=function(g,e){if("touch"===g.pointerType)return!1;switch(e){case "primary":return 0===g.button;
case "secondary":return 2===g.button;case "tertiary":return 1===g.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,g,p,e,n,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(f){function g(g,b,a){var d=f.call(this,!0)||this;d.view=g;d.pointerAction=b;d.registerIncoming("drag",a,function(a){return d._handleDrag(a)});
d.registerIncoming("pointer-down",function(a){return d.stopMomentumNavigation()});var h=d.view.mapViewNavigation;d.dragEventSeparator=new e.DragEventSeparator({start:function(a,b){h.pan.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){h.pan.update(d.view,b.data);b.stopPropagation()},end:function(a,b){h.pan.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});return d}p(g,f);g.prototype._handleDrag=function(c){var b=
this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};g.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return g}(n.InputHandler);g.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function g(e){this.callbacks=e;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}g.prototype.handle=function(e){var g=e.data,c=g.pointers.size;switch(g.action){case "start":this.currentCount=c;this.emitStart(e);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(e);break;case "update":this.emitUpdate(e);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(e);break;case "end":this.emitEnd(e),this.currentCount=0}this.previousEvent=e};g.prototype.emitStart=
function(e){this.startEvent=e;this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)};g.prototype.emitUpdate=function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)};g.prototype.emitEnd=function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent);this.startEvent=null};return g}();g.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,g,p,e,n,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(f){function g(g,b,a){var d=f.call(this,!0)||this;d.view=g;d.pointerAction=b;var h=d.view.mapViewNavigation;d.dragEventSeparator=new e.DragEventSeparator({start:function(a,b){h.rotate.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){h.rotate.update(d.view,b.data);b.stopPropagation()},end:function(a,b){h.rotate.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
d.pointerAction)}});d.registerIncoming("drag",a,function(a){return d.dragEventSeparator.handle(a)});return d}p(g,f);return g}(n.InputHandler);g.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,g,p,e,n,c,f,k,r){Object.defineProperty(g,
"__esModule",{value:!0});q=function(h){function g(a){var b=h.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new e;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}p(g,h);g.prototype.onInstall=function(a){var b=this;h.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=n.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};g.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);h.prototype.onUninstall.call(this)};g.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,r.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,r.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};g.prototype.frameUpdate=function(c){var e=this.transformation;if(!r.isZeroTransformation(e)){var h=this.view.viewpoint.clone(),g=a*this.view.navigation.gamepad.velocityFactor*c;f.translateBy(h,h,[e.translation[0]*g,-e.translation[1]*g]);g=this.view.size;f.scaleAndRotateBy(h,h,1+e.translation[2]*d*c,this.view.constraints.rotationEnabled?
-e.heading*b*c:0,[g[0]/2,g[1]],g);c=this.view.constraints.constrain(h,this.view.viewpoint);this.view.viewpoint=c}};return g}(k.InputHandler);g.GamepadNavigation=q;var b=.06,a=.7,d=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,g,p){function e(e){var c=e*e;0>e&&(c*=-1);return c}Object.defineProperty(g,"__esModule",{value:!0});g.quadraticAccentuation=e;g.resetTransformation=function(e){e.translation[0]=0;
e.translation[1]=0;e.translation[2]=0;e.heading=0;e.tilt=0;return e};g.extractTransformation=function(g,c,f){var k=g.state;g=g.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===g.deviceType?(f.translation[0]=e(k.axes[0]),f.translation[1]=e(k.axes[1]),f.translation[2]=e(k.buttons[7])-e(k.buttons[6]),f.heading=e(k.axes[2]),f.tilt=e(k.axes[3])):"spacemouse"===g.deviceType&&(f.translation[0]=1.2*e(k.axes[0]),f.translation[1]=1.2*e(k.axes[1]),f.translation[2]=2*-e(k.axes[2]),f.heading=1.2*e(k.axes[5]),
f.tilt=1.2*e(k.axes[3]));f.tilt*=c;p.vec3.scale(f.translation,f.translation,1);return f};g.extractTransformationKeyboard=function(e,c){c.translation[0]=e[1]-e[0];c.translation[1]=e[3]-e[2];c.translation[2]=e[4]-e[5];c.heading=e[7]-e[6];c.tilt=e[8]-e[9];return c};g.isZeroTransformation=function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(c,g,n){var b,a=e.call(this,!0)||this;a.view=c;a.keys=g;a._pressed=!1;a._keyMap=(b={},b[g.left]="left",b[g.right]="right",b[g.up]="up",b[g.down]="down",b);a.registerIncoming("key-down",n,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",n,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",n,function(){return a._handleBlur()});return a}p(c,e);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,e){var f=this._keyMap[c.data.key];if(this._pressed=null!=f){if(e)switch(f){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(e.InputHandler);g.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(c,g,n){var b,a=e.call(this,!0)||this;a.view=c;a.keys=g;a._pressed=!1;a._keyToDirection=
(b={},b[g.clockwiseOption1]="clockwise",b[g.clockwiseOption2]="clockwise",b[g.counterClockwiseOption1]="counterClockwise",b[g.counterClockwiseOption2]="counterClockwise",b[g.resetOption1]="reset",b[g.resetOption2]="reset",b);a.registerIncoming("key-down",n,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",n,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",n,function(){return a._handleBlur()});return a}p(c,e);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,e){var f=c.modifiers;if(!(0<f.size&&!f.has("Shift")||!this.view.constraints.rotationEnabled)&&(f=this._keyToDirection[c.data.key],this._pressed=null!=f)){if(e)switch(f){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();
break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(e.InputHandler);g.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(c,g,n){var b=e.call(this,!0)||this;b.view=c;b.keys=g;b._keysToZoomAction=
{};b.registerIncoming("key-down",n,function(a){return b._handleKeyDown(a)});g.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});g.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}p(c,e);c.prototype._handleKeyDown=function(c){this._handleKey(c)};c.prototype._handleKey=function(c){var e=c.modifiers;0<e.size&&!e.has("Shift")||(e=this._keysToZoomAction[c.data.key],0===e?(this.view.mapViewNavigation.zoomIn(),c.stopPropagation()):1===e&&(this.view.mapViewNavigation.zoomOut(),
c.stopPropagation()))};return c}(e.InputHandler);g.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(c,g){var f=e.call(this,!0)||this;f.view=c;f._canZoom=!0;f.registerIncoming("mouse-wheel",g,function(b){return f._handleMouseWheel(b)});return f}p(c,e);c.prototype._handleMouseWheel=function(c){var e=
this;if(this._canZoom){var f=this.view.mapViewNavigation,b=c.data;if(b=f.zoom(1/Math.pow(.6,1/60*b.deltaY),[b.x,b.y]))this._canZoom=!1,b.catch(function(a){}).then(function(){e._canZoom=!0;f.end()});c.stopPropagation()}};return c}(e.InputHandler);g.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,g,p,e,n){Object.defineProperty(g,
"__esModule",{value:!0});q=function(c){function f(f){var g=c.call(this,!0)||this;g.view=f;g.registerIncoming("drag",function(a){return g._handleDrag(a)});g.registerIncoming("pointer-down",function(a){return g.stopMomentumNavigation()});var b=g.view.mapViewNavigation;g.dragEventSeparator=new e.DragEventSeparator({start:function(a,d){b.pinch.begin(g.view,d.data);d.stopPropagation()},update:function(a,d){b.pinch.update(g.view,d.data);d.stopPropagation()},end:function(a,d){b.pinch.end(g.view,d.data);
d.stopPropagation()},condition:function(a){return 2<=a}});return g}p(f,c);f.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return f}(n.InputHandler);g.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,g,p,e,n,c,
f){Object.defineProperty(g,"__esModule",{value:!0});var k=p("trident"),r=p("edge"),b=p("chrome"),a=p("ff"),d=p("safari");q=function(){function g(a,b){var d=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;n.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new f.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",
a)}}g.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(g.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"activeEvents",{set:function(a){var b=this,d;for(d in this._active)a&&a.has(d)||(this._element.removeEventListener(h[d],this._active[d]),delete this._active[d]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var d=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],d);b._active[a]=d}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});g.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};g.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(u){}};g.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=e.createScreenPointFromNativeEvent(this._element,a);g.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};g.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};g.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};g.prototype._handlePointerPreventDefault=function(a,b){var d=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,d)};g.prototype._handleMouseWheel=function(c,e){e.preventDefault();var f=e.deltaY;switch(e.deltaMode){case 0:if(k||r)f=f/document.documentElement.clientHeight*600;break;case 1:f*=30;break;case 2:f*=900}k||r?f*=.7:b||d?f*=.6:a&&(f*=1.375);var h=Math.abs(f);
100<h&&(f=f/h*200/(1+Math.exp(-.02*(h-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:f});this._callback(c,e)};g.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};g.prototype._handleDefault=function(a,b){var d={native:b};b.preventDefault();this._callback(a,d)};g.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};g.test={disableSubpixelCoordinates:!1};return g}();g.BrowserEventSource=
q;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(d,c){c=c||Object.create(null);var e=document.createEvent("Event");
e.initEvent(d,c.bubbles||!1,c.cancelable||!1);d=2;for(var f;d<b.length;d++)f=b[d],e[f]=c[f]||a[d];e.buttons=c.buttons||0;d=0;d=c.pressure&&e.buttons?c.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=c.pointerId||0;e.width=c.width||0;e.height=c.height||0;e.pressure=d;e.tiltX=c.tiltX||0;e.tiltY=c.tiltY||0;e.twist=c.twist||0;e.tangentialPressure=c.tangentialPressure||0;e.pointerType=c.pointerType||"";e.hwTimestamp=c.hwTimestamp||0;e.isPrimary=c.isPrimary||!1;return e}function g(){this.array=
[];this.size=0}function p(a,b,d,c){this.addCallback=a.bind(c);this.removeCallback=b.bind(c);this.changedCallback=d.bind(c);z&&(this.observer=new z(this.mutationWatcher.bind(this)))}function e(a){return"body /shadow-deep/ "+n(a)}function n(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function f(){if(H){A.forEach(function(a){String(a)===a?(B+=n(a)+c(a)+"\n",C&&(B+=e(a)+c(a)+"\n")):(B+=a.selectors.map(n)+c(a.rule)+"\n",C&&(B+=a.selectors.map(e)+
c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=B;document.head.appendChild(a)}}function k(a){if(!m.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function r(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:g;g.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(d,c){a.call(b,d,c,this)},this)}};var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
l=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],t={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!==typeof SVGElementInstance,m={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var d=b.events;d&&(d.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.register.call(c,a)},unregister:function(a){for(var b=this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.unregister.call(c,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),d,c=0;c<h.length;c++)d=h[c],b[d]=a[d]||l[c],u&&("target"===d||"relatedTarget"===d)&&b[d]instanceof SVGElementInstance&&(b[d]=b[d].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in t))return b},propagate:function(a,
b,d){for(var c=a.target,e=[];null!=c&&c!==document&&!c.contains(a.relatedTarget);)if(e.push(c),c=c.parentNode,!c)return;d&&e.reverse();e.forEach(function(d){a.target=d;b.call(this,a)},this)},setCapture:function(a,b,d){this.captureInfo[a]&&this.releaseCapture(a,d);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,d);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var c=new q("gotpointercapture");c.pointerId=
a;c._target=b;d||this.asyncDispatchEvent(c)},releaseCapture:function(a,b){var d=this.captureInfo[a];if(d){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var c=new q("lostpointercapture");c.pointerId=a;c._target=d;b||this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};m.boundHandler=m.eventHandler.bind(m);var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,d){if(a){var c=a.elementFromPoint(b,
d),e;for(e=this.targetingShadow(c);e;){if(a=e.elementFromPoint(b,d))return c=this.targetingShadow(a),this.searchRoot(c,b,d)||a;e=this.olderShadow(e)}return c}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,d=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,d)||(a=document);return this.searchRoot(a,b,d)}},G=Array.prototype.forEach.call.bind(Array.prototype.forEach),
v=Array.prototype.map.call.bind(Array.prototype.map),w=Array.prototype.slice.call.bind(Array.prototype.slice),y=Array.prototype.filter.call.bind(Array.prototype.filter),z=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};p.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){G(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(w(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=v(a,this.findElements,this);b.push(y(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var A=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],B="",H=window.PointerEvent||window.MSPointerEvent,C=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,E=m.pointermap,I=[1,4,2,8,16],F=!1;try{F=1===(new MouseEvent("test",{buttons:1})).buttons}catch(J){}var R={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){m.listen(a,
this.events)},unregister:function(a){m.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,d=a.clientX;a=a.clientY;for(var c=0,e=b.length,f;c<e&&(f=b[c]);c++){var h=Math.abs(a-f.y);if(25>=Math.abs(d-f.x)&&25>=h)return!0}},prepareEvent:function(a){var b=m.cloneEvent(a),d=b.preventDefault;b.preventDefault=function(){a.preventDefault();d()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var d=E.get(this.POINTER_ID);a.buttons=0!==b.which&&d?d.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),d=this.prepareEvent(a);F||(d.buttons=I[d.button],b&&(d.buttons|=b.buttons),a.buttons=d.buttons);E.set(this.POINTER_ID,a);b&&0!==b.buttons?m.move(d):m.down(d)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);m.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),d=this.prepareEvent(a);if(!F){var c=I[d.button];d.buttons=b?b.buttons&~c:0;a.buttons=d.buttons}E.set(this.POINTER_ID,a);d.buttons&=~I[d.button];0===d.buttons?m.up(d):m.move(d)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);m.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;m.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);m.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},U=m.captureInfo,P=x.findTarget.bind(x),O=x.allShadows.bind(x),N=m.pointermap,L,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){L.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),d=this.touchActionToScrollType(b);
d&&(a._scrollType=d,m.listen(a,this.events),O(a).forEach(function(a){a._scrollType=d;m.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;m.unlisten(a,this.events);O(a).forEach(function(a){a._scrollType=void 0;m.unlisten(a,this.events)},this)},elementChanged:function(a,b){var d=a.getAttribute("touch-action"),c=this.touchActionToScrollType(d);b=this.touchActionToScrollType(b);c&&b?(a._scrollType=c,O(a).forEach(function(a){a._scrollType=c},this)):b?this.elementRemoved(a):
c&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===N.size||1===N.size&&N.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,d=m.cloneEvent(a),c=d.pointerId=a.identifier+2;d.target=U[c]||P(d);d.bubbles=!0;d.cancelable=!0;d.detail=this.clickCount;d.button=0;d.buttons=this.typeToButtons(b.type);d.width=2*(a.radiusX||a.webkitRadiusX||0);d.height=2*(a.radiusY||a.webkitRadiusY||0);d.pressure=a.force||a.webkitForce||.5;d.isPrimary=this.isPrimaryTouch(a);d.pointerType=this.POINTER_TYPE;d.altKey=b.altKey;d.ctrlKey=b.ctrlKey;d.metaKey=b.metaKey;d.shiftKey=b.shiftKey;
var e=this;d.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return d},processTouches:function(a,b){var d=a.changedTouches;this.currentTouchEvent=a;a=0;for(var c;a<d.length;a++)c=d[a],b.call(this,this.touchToPointer(c))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var d="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+d]-this.firstXY[d])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var d=0,c=a.length,e;d<c&&(e=a[d]);d++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(N.size>=b.length){var d=[];N.forEach(function(a,c){1===c||this.findTouch(b,c-2)||d.push(a.out)},this);d.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){N.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});m.enterOver(a);m.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=N.get(a.pointerId);if(b){var d=b.out,c=b.outTarget;m.move(a);d&&c!==a.target&&(d.relatedTarget=a.target,a.relatedTarget=c,d.target=c,a.target?(m.leaveOut(d),m.enterOver(a)):(a.target=c,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(m.up(a),m.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){m.cancel(a);m.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){N.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=R.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};L=new p(Q.elementAdded,Q.elementRemoved,Q.elementChanged,Q);var M=m.pointermap,S=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,K={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){m.listen(a,this.events)},unregister:function(a){m.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;S&&(b=m.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){M.delete(a)},MSPointerDown:function(a){M.set(a.pointerId,a);a=this.prepareEvent(a);m.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);m.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);m.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);m.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);m.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);m.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=m.makeEvent("lostpointercapture",a);m.dispatchEvent(a)},MSGotPointerCapture:function(a){a=m.makeEvent("gotpointercapture",a);m.dispatchEvent(a)}},T,X,W;window.navigator.msPointerEnabled?(T=function(a){k(a);r(this);0!==m.pointermap.get(a).buttons&&(m.setCapture(a,this,!0),this.msSetPointerCapture(a))},X=function(a){k(a);m.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(T=function(a){k(a);r(this);0!==m.pointermap.get(a).buttons&&m.setCapture(a,this)},X=function(a){k(a);m.releaseCapture(a)});W=function(a){return!!m.captureInfo[a]};var V=window.PointerEvent||window.MSPointerEvent;return{dispatcher:m,Installer:p,PointerEvent:q,PointerMap:d,targetFinding:x,applyGlobal:function(){f();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),m.registerSource("ms",K)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),m.registerSource("mouse",R),void 0!==window.ontouchstart&&m.registerSource("touch",Q)),m.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:T},releasePointerCapture:{value:X},hasPointerCapture:{value:W}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?
m.registerSource("ms",K):(m.registerSource("mouse",R),void 0!==window.ontouchstart&&m.registerSource("touch",Q)),m.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=T.bind(a),a.releasePointerCapture=X.bind(a),a.hasPointerCapture=W.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(q,g,p,e){Object.defineProperty(g,
"__esModule",{value:!0});g.primaryKey=e("mac")?"Meta":"Ctrl";var n={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(q=48;58>q;q++)n[q]=String.fromCharCode(q);for(q=1;25>q;q++)n[111+q]="F"+q;for(q=65;91>q;q++)n[q]=[String.fromCharCode(q+32),String.fromCharCode(q)];g.eventKey=function(c){if(void 0!==c.key)return p.eventKey(c);var e=n[c.keyCode];return Array.isArray(e)?c.shiftKey?
e[1]:e[0]:e};g.isSystemModifier=function(c){switch(c){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,g,p,e,n,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function f(e,f){var b=this;this.element=e;this.input=f;this.handleGamepadConnectedEvent=function(a){b.handleGamepadConnected(a.gamepad)};
this.handleGamepadDisconnectedEvent=function(a){a=a.gamepad;var d=b.inputDevices[a.index];d&&(b.emitGamepadEvent(a,c.extractState(d),!1),b.inputDevices[a.index]=void 0,b.latestUpdate[a.index]=void 0,b.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return b.handleGamepadConnected(a)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}f.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(f.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"pollingEnabled",{set:function(c){this.supported&&
(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});f.prototype.handleGamepadConnected=function(c){var e=new n(c);"unknown"!==e.deviceType&&(this.inputDevices[c.index]=e,this.input.gamepad.devices.add(e))};f.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=e.addFrameTask({update:function(){return c.readGamepadState()}}))};f.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};f.prototype.readGamepadState=function(){var e=this,f=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!b;this.forEachGamepad(function(b){var d=e.inputDevices[b.index];if(d){var f=e.latestUpdate[b.index],d=c.extractState(d),g=a||c.stateIdle(d);f&&(f.timestamp===b.timestamp||!f.active&&g||c.stateEqual(f.state,d))||e.emitGamepadEvent(b,d,!g)}})};f.prototype.forEachGamepad=function(c){for(var e=
window.navigator.getGamepads(),b=0;b<e.length;b++){var a=e[b];this.validate(a)&&c(a)}};f.prototype.emitGamepadEvent=function(c,e,b){var a=this.latestUpdate[c.index];if((a=a&&a.active)||b)this.latestUpdate[c.index]={timestamp:c.timestamp,state:e,active:b},this.callback&&this.callback({device:this.inputDevices[c.index],state:e,action:!a&&b?"start":a&&b?"update":"end"})};f.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var e=0;e<c.axes.length;e++)if(isNaN(c.axes[e]))return!1;return!0};
return f}();g.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../3d/support/mathUtils"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.extractState=function(e){var g=e.native;return{buttons:g.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:g.axes.map(function(c){var f=e.axisThreshold,g=Math.abs(c);c=g<f?0:p.sign(c)*(g-f)/(1-f);return c})}};g.stateEqual=function(e,g){if(e.axes.length!==g.axes.length||e.buttons.length!==
g.buttons.length)return!1;for(var c=0;c<e.axes.length;c++)if(e.axes[c]!==g.axes[c])return!1;for(c=0;c<e.buttons.length;c++)if(e.buttons[c]!==g.buttons[c])return!1;return!0};g.stateIdle=function(e){for(var g=0;g<e.axes.length;g++)if(0!==e.axes[g])return!1;for(g=0;g<e.buttons.length;g++)if(0!==e.buttons[g])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a){Object.defineProperty(g,"__esModule",{value:!0});var d=c.getLogger("esri.views.input.InputManager");q=function(c){function g(a,b){a=c.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=r.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}p(g,c);g.prototype.normalizeCtorArgs=function(a,d){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=d;this._recognizers||(this._recognizers=b.defaults.map(function(a){return new a}));return{}};g.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(g.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});
g.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])d.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)d.error("Can't register a group of zero handlers");else{var e={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=e;a=function(a){var b=e.handlers[a];f._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},
emit:function(a,d,e,f){c._emitInputEvent(b.priorityIndex,a,d,e,f)},setPointerCapture:function(a,d){c._setPointerCapture(e,b,a,d)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){c.notifyChange("hasPendingInputs")}})};var f=this;for(b=e.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};g.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;
a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):d.error("There is no InputHandler group registered under the name `"+a+"`")};g.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};g.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var d=this._handlers.length-1;0<=d;d--){var c=this._handlers[d];c.priorityIndex=d;this._handlersPriority.push(c)}this._handlersPriority=
this._sortHandlersPriority(this._handlersPriority);for(d=this._handlersPriority.length-1;0<=d;d--){c=this._handlersPriority[d];c.priorityIndex=d;var e=c.handler.hasSideEffects;if(!e)for(var f=0,h=c.handler.outgoingEventTypes;f<h.length;f++)if(a.has(h[f])){e=!0;break}if(e)for(f=0,h=c.handler.incomingEventMatches;f<h.length;f++){var g=h[f];a.add(g.eventType);for(var l=0,g=g.keyModifiers;l<g.length;l++){var k=g[l];r.isSystemModifier(k)||b.add(k)}}c.active=e}this._sourceEvents=a;this._keyModifiers=b;
0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};g.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};g.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
b,b.native?b.native.timestamp:void 0)};g.prototype._updateKeyModifiers=function(a,b){var d=this;if(b){var c=!1,e=function(){if(!c){var a=new Set;d._activeKeyModifiers.forEach(function(b){a.add(b)});d._activeKeyModifiers=a;c=!0}},f=function(a,b){b&&!d._activeKeyModifiers.has(a)?(e(),d._activeKeyModifiers.add(a)):!b&&d._activeKeyModifiers.has(a)&&(e(),d._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var h=b.key;this._keyModifiers.has(h)&&f(h,"key-down"===a)}a=b.native;f("Alt",!(!a||
!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}};g.prototype._installRecognizers=function(){var b=this;this._latestPointerTypeHandler=new a.LatestPointerType(function(a){return b._setLatestPointerType(a)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};g.prototype._setPointerCapture=
function(a,b,d,c){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(d.pointerId)||new Set;this._pointerCaptures.set(d.pointerId,b);c?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(d,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(d.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(d,!1)))};g.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};
g.prototype._emitInputEventFromSource=function(a,b,d){this._emitInputEvent(0,a,b,d)};g.prototype._emitInputEvent=function(a,b,d,c,e){c=void 0!==c?c:this._currentPropagation?this._currentPropagation.timestamp:f();b=new h(b,d,c,e||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};g.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,
timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var d=[];a.addedEvents=[];for(var c=0;c<b.length;c++){var e=b[c];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||d.push(e)}a.events=d.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};g.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var d=0,c=a.handler.incomingEventMatches;d<c.length;d++)for(var e=c[d],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},h=0,g=b.handler.incomingEventMatches;h<g.length;h++){var l=
f(g[h]);if("object"===typeof l)return l.value}return a.priorityIndex>b.priorityIndex?-1:1};g.prototype._sortHandlersPriority=function(a){for(var b=[],d=0;d<a.length;d++){for(var c=a[d],e=0;e<b.length&&0<=this._compareHandlerPriority(c,b[e]);)e++;b.splice(e,0,c)}return b};Object.defineProperty(g.prototype,"debug",{get:function(){var a=this,b=function(b){var d=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=d};return{injectEvent:function(d,c){b(function(){a._onEventReceived(d,
c)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});e([k.property({readOnly:!0})],g.prototype,"hasPendingInputs",null);e([k.property({readOnly:!0})],g.prototype,"latestPointerType",void 0);return g=e([k.subclass("esri.views.input.InputManager")],g)}(k.declared(n));g.InputManager=q;var h=function(){function a(a,b,d,c){this.type=a;this.data=b;this.timestamp=d;this.modifiers=c;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=
function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(q,g,p,e,n,c){Object.defineProperty(g,"__esModule",{value:!0});g.defaults=[e.PointerClickHoldAndDrag,n.SingleAndDoubleClick,p.Drag,c.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),
function(q,g,p,e,n,c){function f(a){var b=[];a.forEach(function(a){b.push(e.createScreenPoint(a.event.x,a.event.y))});return c.fitCircleLSQ(b)}function k(a){var d=f(a),c=0;a.forEach(function(a){for(var e=b(a,d),e=e-a.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=a.lastAngle+e;a.lastAngle=e;c+=e-a.initialAngle});c/=a.size||1;return{angle:c,radius:d.radius,center:d.center}}function r(a){var b=new Map;a.forEach(function(a,d){return b.set(d,a.event)});return b}function b(a,b){a=a.event;
return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(g,"__esModule",{value:!0});q=function(a){function d(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-cancel",
b.handlePointerUpAndPointerLost.bind(b));return b}p(d,a);d.prototype.createPayload=function(a,b,d,c){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:c,pointers:r(this.activePointerMap),pointer:b,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(a){var d=a.native.pointerId,c=k(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,a);d=b(a,f(this.activePointerMap));a.initialAngle=
d;a.lastAngle=d;this.updatePointerAngles(c)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=k(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(a){var d=k(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=b(c,d)-a;c.lastAngle=b(c,d)-a})};d.prototype.emitEvent=
function(a,b,d){var c=k(this.activePointerMap);this.drag.emit(this.createPayload(a,b,c,d),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,d=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,d),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};d.prototype.handlePointerDrag=function(a){var b=
a.data,d=b.currentEvent,c=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(d.native.pointerId)?(this.updatePointer(d),this.emitEvent("update",d,c)):(this.addPointer(d),this.emitEvent("added",d,c)):(this.updatePointer(d),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",d,c))}};return d}(n.InputHandler);g.Drag=q;(function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(g.Button||(g.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.manhattanDistance=function(e,g){return Math.abs(g.x-e.x)+Math.abs(g.y-e.y)};g.euclideanDistance=function(e,g){var c=g.x-e.x;e=g.y-e.y;return Math.sqrt(c*c+e*e)};g.fitCircleLSQ=
function(e,g){g?(g.radius=0,g.center.x=0,g.center.y=0):g={radius:0,center:p.createScreenPoint()};if(0===e.length)return g;if(1===e.length)return g.center.x=e[0].x,g.center.y=e[0].y,g;if(2===e.length){var c=e[0];e=e[1];var f=[e.x-c.x,e.y-c.y],k=f[0],f=f[1];g.radius=Math.sqrt(k*k+f*f)/2;g.center.x=(c.x+e.x)/2;g.center.y=(c.y+e.y)/2;return g}for(var n=0,b=0,a=0;a<e.length;a++)n+=e[a].x,b+=e[a].y;for(var n=n/e.length,b=b/e.length,d=e.map(function(a){return a.x-n}),h=e.map(function(a){return a.y-b}),l=
c=g=0,t=0,u=k=0,a=f=0;a<d.length;a++){var m=d[a],x=h[a],G=m*m,v=x*x;g+=G;c+=v;l+=m*x;t+=G*m;k+=v*x;u+=m*v;f+=x*G}a=g;d=l;h=c;t=.5*(t+u);k=.5*(k+f);f=a*h-l*d;u=(t*h-k*d)/f;k=(a*k-l*t)/f;f=p.createScreenPoint(u+n,k+b);return{radius:Math.sqrt(u*u+k*k+(g+c)/e.length),center:f}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,g,p,e,n,c){Object.defineProperty(g,
"__esModule",{value:!0});g.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};q=function(f){function k(c,b,a,d,h){void 0===c&&(c=g.DefaultParameters.maximumClickDelay);void 0===b&&(b=g.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=g.DefaultParameters.movementUntilTouchDrag);void 0===d&&(d=g.DefaultParameters.holdDelay);void 0===h&&(h=e.default);var l=f.call(this,!1)||this;l.maximumClickDelay=c;l.movementUntilMouseDrag=b;l.movementUntilTouchDrag=
a;l.holdDelay=d;l._clock=h;l._pointerState=new Map;l._pointerDrag=l.registerOutgoing("pointer-drag");l._immediateClick=l.registerOutgoing("immediate-click");l._pointerHold=l.registerOutgoing("hold");l.registerIncoming("pointer-down",l._handlePointerDown.bind(l));l.registerIncoming("pointer-up",function(a){l._handlePointerLoss(a,"pointer-up")});l.registerIncoming("pointer-capture-lost",function(a){l._handlePointerLoss(a,"pointer-capture-lost")});l.registerIncoming("pointer-cancel",function(a){l._handlePointerLoss(a,
"pointer-cancel")});l._moveHandle=l.registerIncoming("pointer-move",l._handlePointerMove.bind(l));l._moveHandle.pause();return l}p(k,f);k.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});f.prototype.onUninstall.call(this)};k.prototype._handlePointerDown=function(c){var b=this,a=c.data,d=a.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&
(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));e={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};k.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,
currentEvent:a}};k.prototype._handlePointerMove=function(e){var b=e.data,a=this._pointerState.get(b.native.pointerId);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers):c.euclideanDistance(b,a.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(e),a.previousEvent=b)};k.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(e){null!=
e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=c.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",e,a)):b._pointerDrag.emit(b._createPointerDragData("start",e,e.previousEvent),c.timestamp))})};k.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
e,"pointer-up"===b?a:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===a.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return k}(n.InputHandler);g.PointerClickHoldAndDrag=q})},"esri/core/clock":function(){define(["require","exports","./global"],function(q,g,p){function e(e){return{setTimeout:function(c,
f){var g=e.setTimeout(c,f);return{remove:function(){return e.clearTimeout(g)}}}}}Object.defineProperty(g,"__esModule",{value:!0});g.wrap=e;g.default=e(p)})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(q,g,p,e,n,c,f){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};q=function(c){function k(b,a,d,f,l){void 0===b&&(b=g.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=g.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=g.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=g.DefaultParameters.maximumDoubleTouchDistance);void 0===l&&(l=e.default);var h=c.call(this,!1)||this;h.maximumDoubleClickDelay=b;h.maximumDoubleClickDistance=a;h.maximumDoubleTouchDelay=d;h.maximumDoubleTouchDistance=
f;h._clock=l;h._pointerState=new Map;h._click=h.registerOutgoing("click");h._doubleClick=h.registerOutgoing("double-click");h.registerIncoming("immediate-click",h._handleImmediateClick.bind(h));h.registerIncoming("pointer-drag",h._handlePointerDrag.bind(h));h.registerIncoming("drag",h._handleDrag.bind(h));return h}p(k,c);k.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(k.prototype,
"hasPendingInputs",{get:function(){return!n.everyMap(this._pointerState,function(b){return null==b.doubleClickTimeout})},enumerable:!0,configurable:!0});k.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};k.prototype._handleImmediateClick=function(b){var a=b.data,d=this._pointerId(a),c=this._pointerState.get(d);if(c){var e="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;f.manhattanDistance(c.event.data,
a)>e?(this._clearDoubleClickTimeout(d,!0),this._startClick(b)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(a,void 0,c.event.modifiers))}else this._startClick(b)};k.prototype._startClick=function(b){var a=this,d=this._pointerId(b.data);this._pointerState.set(d,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(d)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
k.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};k.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};k.prototype._clearDoubleClickTimeout=function(b,a){var d=this._pointerState.get(b);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};k.prototype._doubleClickTimeoutExceeded=
function(b){var a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return k}(c.InputHandler);g.SingleAndDoubleClick=q})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.everyMap=Map.prototype.entries?function(g,e){g=g.entries();for(var n=g.next();!n.done;n=g.next())if(!1===e(n.value[1],n.value[0]))return!1;
return!0}:function(g,e){var n=!0;g.forEach(function(c,f){n&&(n=!1!==e(c,f))});return n}})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(q,g,p,e,n){Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function f(f,g){void 0===f&&(f=20);void 0===g&&(g=40);var b=c.call(this,!1)||this;b._threshold=f;b._maxDelta=g;b.state="ready";b.emittedArtificalEnd2=!1;
b._vertical=b.registerOutgoing("vertical-two-finger-drag");b._artificalDrag=b.registerOutgoing("drag");b.dragEventSeparator=new e.DragEventSeparator({start:function(a,d){return b.observeStart(a,d)},update:function(a,d,c){return b.observeUpdate(a,d,c)},end:function(a,d){return b.observeEnd(a,d)}});b.registerIncoming("drag",function(a){return b.dragEventSeparator.handle(a)});return b}p(f,c);Object.defineProperty(f.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});
f.prototype.observeStart=function(c,e){1===c&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),e.stopPropagation());this.state=2===c?"ready":"failed"};f.prototype.observeUpdate=function(c,e,b){"failed"!==this.state&&2===c&&("active"===
this.state?(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"update"}),e.stopPropagation()):this.checkMovementWithinLimits(e.data,b.data)?this.checkVerticalThresholdReached(e.data,b.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=e.data.center,this._artificalDrag.emit({action:"end",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,
angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),e.stopPropagation()):this.state="failed")};f.prototype.observeEnd=function(c,e){"active"===this.state&&(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",e.stopPropagation())};f.prototype.checkMovementWithinLimits=function(c,e){var b=-Infinity,a=Infinity,d=-Infinity,f=Infinity;
e.pointers.forEach(function(c){b=Math.max(b,c.x);a=Math.min(a,c.x);d=Math.max(d,c.y);f=Math.min(f,c.y)});var g=-Infinity,k=Infinity,u=-Infinity,m=Infinity;c.pointers.forEach(function(a){g=Math.max(g,a.x);k=Math.min(k,a.x);u=Math.max(u,a.y);m=Math.min(m,a.y)});return Math.abs(c.center.x-e.center.x)<this._threshold&&Math.abs(g-k-(b-a))<=this._maxDelta&&Math.abs(u-m-(d-f))<=this._maxDelta};f.prototype.checkVerticalThresholdReached=function(c,e){var b=Math.abs(c.center.y-e.center.y);c.pointers.forEach(function(a,
d){d=e.pointers.get(d);b=Math.min(b,Math.abs(a.y-d.y))});return b>=this._threshold};return f}(n.InputHandler);g.VerticalTwoFingerDrag=q})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(c){var f=e.call(this,!0)||this;f._onChange=c;f._value="mouse";f.registerIncoming("pointer-down",function(c){f._setValue("touch"===
c.data.native.pointerType?"touch":"mouse")});f._moveHandler=f.registerIncoming("pointer-move",function(c){f._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});f._moveHandler.pause();return f}p(c,e);c.prototype._setValue=function(c){c!==this._value&&("touch"===c?this._moveHandler.resume():this._moveHandler.pause(),this._value=c,this._onChange(c))};return c}(e.InputHandler);g.LatestPointerType=q})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(q,g,p,e){Object.defineProperty(g,"__esModule",{value:!0});q=function(e){function c(){var c=e.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}p(c,e);return c}(e.InputHandler);g.PreventContextMenu=q;g.default=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,g,p,e,n,c,f){return function(c){function g(){var b=null!==c&&c.apply(this,arguments)||this;b.color=new n([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}p(g,c);e([f.property({type:n})],g.prototype,"color",void 0);e([f.property()],g.prototype,"haloOpacity",void 0);e([f.property()],g.prototype,"fillOpacity",void 0);return g=e([f.subclass("esri.views.2d.support.HighlightOptions")],g)}(f.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/compilerUtils","../../core/mathUtils"],function(q,g,p,e,n){function c(a,d){var c=a||{},f=c.format,h=c.quality,g=c.rotation,c=c.disableSlice,m=!a.ignorePadding&&d.padding||u,k;k=d.width-m.left-m.right;d=d.height-m.top-m.bottom;var x=m=0,p=k,q=d;if(a&&a.area){var m=Math.floor(a.area.x)||0,x=Math.floor(a.area.y)||0,C=null!=a.area.width?Math.floor(a.area.width):null,E=null!=a.area.height?Math.floor(a.area.height):null,p=p-m,q=q-x;null!=C&&null!=E?(p=Math.min(p,C),q=Math.min(q,E)):null==C&&
null!=E?(C=Math.min(p,C),q*=C/p,p=C):null!=C&&null==E&&(C=Math.min(q,E),p*=C/q,q=C)}m=b({x:m,y:x,width:p,height:q},a);x=Math.floor(Math.max(m.x,0));p=Math.floor(Math.max(m.y,0));k={x:x,y:p,width:Math.floor(Math.min(m.width,k-x)),height:Math.floor(Math.min(m.height,d-p))};d=k.width/k.height;m=m.width/m.height;m!==d&&(m>d?(d=Math.floor(k.width/m),k={x:k.x,y:Math.floor(k.y+(k.height-d)/2),width:k.width,height:d}):(d=Math.floor(k.height*m),k={x:Math.floor(k.x+(k.width-d)/2),y:k.y,width:d,height:k.height}));
d=r(a,k);a=d.width;d=d.height;a:switch(f){case "png":case "jpg":case "jpeg":break a;case null:case void 0:f=l;break a;default:e.neverReached(f),f=l}m=t[f];h=n.clamp(null!=h?h:m,0,100);return{format:f,quality:h,area:k,width:a,height:d,rotation:g,disableSlice:c||!1}}function f(a,b){return a.toDataURL(h[b.format],b.quality/100)}function k(b,d,c){c||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),c=a);return c.getContext("2d").createImageData(b,d)}function r(a,b){if(!a)return b;var d=a.width;
a=a.height;if(null!=d&&null!=a)return{width:Math.floor(d),height:Math.floor(a)};if(null==d&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(d),height:Math.floor(d/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var d=a.width/a.height;if(d===b)return a;if(d<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(g,"__esModule",
{value:!0});g.completeUserSettings=c;g.toRenderSettings=function(a,b){var d=c(a,b),e=d.area,f=d.width/e.width,h=!a.ignorePadding&&b.padding||u,g=h.left+h.right,l=h.top+h.bottom;return{framebufferWidth:Math.floor((b.width-g)*f+g),framebufferHeight:Math.floor((b.height-l)*f+l),region:{x:Math.floor(e.x*f)+h.left,y:Math.floor(e.y*f)+h.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice}};g.encodeResult=
function(a,b,d,c){if(c.premultipliedAlpha)for(var e=a.data,h=e.length,g=0;g<h;g+=4){var l=e[g+3];0<l&&(l/=255,e[g+0]/=l,e[g+1]/=l,e[g+2]/=l)}d.width=a.width;d.height=a.height;e=d.getContext("2d");e.putImageData(a,0,0);c.flipY&&(e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore());a=e.getImageData(0,0,a.width,a.height);b=f(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};g.toDataUrl=f;g.createEmptyImageData=function(a,b,
c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,b)}catch(v){d=!1}return k(a,b,c)};g.wrapImageData=function(a,b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,b,c)}catch(w){d=!1}b=k(b,c,e);b.data.set(a,0);return b};g.resampleHermite=function(a,b,d,c,e,f,h,g){void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=a.width-c);void 0===h&&(h=a.height-e);void 0===g&&(g=!1);var l=a.data,m=
b.width,k=b.height,v=b.data;f/=m;h/=k;var t=Math.ceil(f/2),u=Math.ceil(h/2);a=a.width;for(var w=0;w<k;w++)for(var n=0;n<m;n++){for(var p=4*(n+(g?k-w-1:w)*m),y=0,x=0,q=0,r=0,z=0,G=0,D=(w+.5)*h,K=Math.floor(w*h);K<(w+1)*h;K++)for(var T=Math.abs(D-(K+.5))/u,X=(n+.5)*f,T=T*T,W=Math.floor(n*f);W<(n+1)*f;W++){var V=Math.abs(X-(W+.5))/t,V=Math.sqrt(T+V*V);if(!(1<=V)){var V=2*V*V*V-3*V*V+1,J=4*(c+W+(e+K)*a),G=G+V*l[J+3],x=x+V;!d&&255>l[J+3]&&(V=V*l[J+3]/255);q+=V*l[J];r+=V*l[J+1];z+=V*l[J+2];y+=V}}v[p]=q/
y;v[p+1]=r/y;v[p+2]=z/y;v[p+3]=G/x}return b};g.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;var d=a.framebufferHeight,c=a.region,e=Math.min(8,2048/Math.max(b,d));return 1.5>e?a:p({},a,{framebufferWidth:Math.round(b*e),framebufferHeight:Math.round(d*e),pixelRatio:a.pixelRatio*e,resample:{region:{x:Math.round(c.x*e),y:Math.round(c.y*e),width:Math.round(c.width*e),height:Math.round(c.height*e)},width:b,height:d}})};var a=null,d=!0,h={png:"image/png",jpg:"image/jpeg",
jpeg:"image/jpeg"},l="jpg",t={png:100,jpg:98,jpeg:98},u={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,g,p,e,n){Object.defineProperty(g,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};g.check=function(f){f=p({},c,f);return n("esri-webgl")?!f.supportsMajorWebPerformanceCaveat&&n("esri-webgl-major-performance-caveat")?new e("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):n("esri-webgl-high-precision-fragment")?n("esri-webgl-vertex-shader-samplers")?n("esri-webgl-element-index-uint")?n("esri-webgl-standard-derivatives")?n("esri-webgl-instanced-arrays")?null:new e("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new e("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new e("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new e("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new e("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new e("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(q,g,p,e,n,c){return function(c){function f(e){e=c.call(this)||this;e.components=["attribution","zoom"];return e}p(f,c);e([n.property()],f.prototype,"components",void 0);return f=e([n.subclass("esri.views.ui.2d.DefaultUI2D")],f)}(n.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(q,g,p,e,n,c,f,k,r,b,a,d){return function(h){function g(a){a=h.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}p(g,h);g.prototype.initialize=function(){this._handles.add([n.init(this,"components",this._componentsWatcher.bind(this)),n.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(d){(d=(d=b.find(d))&&d.widget)&&void 0!==d.view&&d.set("view",a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new f({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new r({view:this.view})};g.prototype._createCompass=function(){return new b({view:this.view})};
g.prototype._createNavigationToggle=function(){return new a({view:this.view})};g.prototype._createZoom=function(){return new d({view:this.view})};e([c.property()],g.prototype,"components",void 0);return g=e([c.subclass("esri.views.ui.DefaultUI")],g)}(c.declared(k))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(q,
g,p,e,n,c,f){return function(g){function k(){var b=null!==g&&g.apply(this,arguments)||this;b.widget=null;return b}p(k,g);k.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(k.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(b){this._set("id",b)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});k.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),c.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};e([f.property()],k.prototype,"id",null);e([f.property()],k.prototype,"node",null);e([f.cast("node")],k.prototype,"castNode",null);e([f.property({readOnly:!0})],
k.prototype,"widget",void 0);return k=e([f.subclass("esri.views.ui.Component")],k)}(f.declared(n))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,g,p,e,n,c,f,k,r,b,a,d,h){function l(a){return"object"!==
typeof a||a&&a.isInstanceOf&&a.isInstanceOf(d)||!("component"in a||"index"in a||"position"in a)?null:a}function t(a,b){var d=b.bottom,c=b.left,e=b.right;a.style.top=b.top;a.style.bottom=d;a.style.left=c;a.style.right=e}var u={left:0,top:0,bottom:0,right:0},m={bottom:30,top:15,right:15,left:15};return function(c){function g(a){a=c.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new r;a._componentToKey=new Map;a.view=null;a._initContainers();
return a}e(g,c);g.prototype.initialize=function(){this._handles.add([b.init(this,"view.padding, container",this._applyViewPadding.bind(this)),b.init(this,"padding",this._applyUIPadding.bind(this))])};g.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(g.prototype,"container",{set:function(a){var b=this._get("container");a!==
b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),t(b,{top:"",bottom:"",left:"",right:""}),f.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});g.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:p({},m,a)};Object.defineProperty(g.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});g.prototype.add=function(a,b){var c=this,e,f;if(Array.isArray(a))a.forEach(function(a){return c.add(a,
b)});else{var h=l(a);h&&(e=h.index,b=h.position,a=h.component,f=h.key);b&&"object"===typeof b&&(e=b.index,f=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(d)||(a=new d({node:a})),this._place({component:a,position:b,index:e}),this._components.push(a),f&&this._componentToKey.set(a,f))}};g.prototype.remove=function(a,b){var d=this;if(a){if(Array.isArray(a))return a.map(function(a){return d.remove(a,b)});var c=this.find(a);if(c){var e=this._componentToKey;if(!e.has(a)||
e.get(a)===b)return e=this._components.indexOf(c),c.node.parentNode&&c.node.parentNode.removeChild(c.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};g.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};g.prototype.move=function(a,b){var d=this;Array.isArray(a)&&a.forEach(function(a){return d.move(a,b)});if(a){var c,e=l(a)||l(b);e&&(c=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:c})}};g.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(d)?this._findByComponent(a):"string"===
typeof a?this._findById(a):this._findByNode(a.domNode||a):null};g.prototype._getViewPadding=function(){return this.get("view.padding")||u};g.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};g.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var d=document.createElement("div");d.classList.add("esri-ui-top-left");d.classList.add("esri-ui-corner");a.appendChild(d);var c=document.createElement("div");c.classList.add("esri-ui-top-right");c.classList.add("esri-ui-corner");a.appendChild(c);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");a.appendChild(f);this._innerContainer=
a;this._manualContainer=b;a=h.isRTL();this._cornerNameToContainerLookup={"top-left":d,"top-right":c,"bottom-left":e,"bottom-right":f,"top-leading":a?c:d,"top-trailing":a?d:c,"bottom-leading":a?f:e,"bottom-trailing":a?e:f};this._positionNameToContainerLookup=p({manual:b},this._cornerNameToContainerLookup)};g.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};g.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var c=-1<d,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();c?(c=Array.prototype.slice.call(a.children),0===d?a.firstChild?f.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=c.length?a.appendChild(b.node):f.insertBefore(b.node,c[d])):a.appendChild(b.node)};g.prototype._applyViewPadding=function(){var a=this.container;a&&t(a,this._toPxPosition(this._getViewPadding()))};
g.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&t(a,this._toPxPosition(this.padding))};g.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};g.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};g.prototype._findByComponent=function(a){var b=null,d;this._components.some(function(c){(d=c===a)&&(b=c);return d});return b};g.prototype._findById=function(a){var b=null,
d;this._components.some(function(c){(d=c.id===a)&&(b=c);return d});return b};g.prototype._findByNode=function(a){var b=null,d;this._components.some(function(c){(d=c.node===a)&&(b=c);return d});return b};n([a.property()],g.prototype,"container",null);n([a.property({dependsOn:["view.height"]})],g.prototype,"height",null);n([a.property({value:m})],g.prototype,"padding",null);n([a.cast("padding")],g.prototype,"castPadding",null);n([a.property()],g.prototype,"view",void 0);n([a.property({dependsOn:["view.width"]})],
g.prototype,"width",null);return g=n([a.subclass("esri.views.ui.UI")],g)}(a.declared(c,k))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(b){b=a.call(this)||this;b._isOpen=!1;b._attributionTextOverflowed=
!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=n.widgetLabel;b.view=null;b.viewModel=new r;return b}p(d,a);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,
configurable:!0});d.prototype.render=function(){var a,d=(a={},a["esri-attribution--open"]=this._isOpen,a);return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",d),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:this.classes("esri-attribution__link","esri-widget__anchor")},"Esri")))};d.prototype._renderSourcesNode=
function(){var a,d=this._isOpen,c=this._isInteractive(),e=c?0:-1,f=this.attributionText,g=c?"button":void 0,d=(a={},a["esri-attribution__sources--open"]=d,a["esri-interactive"]=c,a);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",d),innerHTML:f,role:g,tabIndex:e})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,d=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var c=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;c&&(b=!0);this._isOpen&&(a=d<this._prevSourceNodeHeight,this._prevSourceNodeHeight=d,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};e([f.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),b.renderable()],d.prototype,"attributionText",null);e([f.property()],d.prototype,"iconClass",void 0);e([f.property(),b.renderable()],d.prototype,"itemDelimiter",void 0);e([f.property()],d.prototype,"label",void 0);e([f.aliasOf("viewModel.view")],d.prototype,"view",void 0);e([f.property({type:r}),b.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);e([b.accessibleHandler()],d.prototype,"_toggleState",null);return d=e([f.subclass("esri.widgets.Attribution")],
d)}(f.declared(k))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(q,g,p,e,n,c,
f,k,r,b,a,d,h,l){function t(a,b){return a.length!==b.length||a.some(function(a,d){return a.text!==b[d].text})}function u(a,b,d){d&&b&&(k.find(a,function(a){return a.layerView===b&&a.text===d})||a.push({text:d,layerView:b}))}var m=[];return function(b){function g(d){var c=b.call(this,d)||this;c.clear=function(){c._fetchedAttributionData.clear();c._pendingAttributions.clear();c.handles.remove("suspension")};c._pendingAttributions=new Set;c._fetchedAttributionData=new Map;c.items=new r;c.view=null;c._allLayerViewsChange=
function(a){c.handles.remove("suspension");var b=c.get("view.allLayerViews");b&&c.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],c._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){c._pendingAttributions.delete(a);c._fetchedAttributionData.delete(a)});c._updateAttributionItems()};c._updateAttributionItems=function(){var a=c.get("view.allLayerViews");m.length=0;a?(a.forEach(function(a){if(!a.suspended&&a.get("layer.attributionVisible")){var b=
a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))u(m,a,b.copyright);else if(b.hasAttributionData)if(c._fetchedAttributionData.has(a)){var d=c._fetchedAttributionData.get(a);d&&u(m,a,c._getDynamicAttribution(d,c.view,b))}else c._fetchAttributionData(a);else(d=b.get("portalItem.accessInformation"))?u(m,a,d):u(m,a,b.copyright)}}),t(c.items,m)&&(c.items.removeAll(),c.items.addMany(m))):c.clear()};c.handles.add([a.on(c,"view.allLayerViews","change",c._allLayerViewsChange,
c._allLayerViewsChange,c.clear),a.whenTrue(c,"view.stationary",function(){return c._updateAttributionItems()})]);return c}p(g,b);g.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});g.prototype._fetchAttributionData=function(a){return n(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];
this._pendingAttributions.add(a);b=null;c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return d=c.sent(),b=this._createContributionIndex(d,"bing-maps"===a.layer.type),[3,4];case 3:return c.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,b)),this._updateAttributionItems(),[2]}})})};g.prototype._createContributionIndex=function(a,b){a=a.contributors;var d={};if(!a)return d;for(var c=
0;c<a.length;c++){var e=a[c],g=e.coverageAreas;if(!g)return;for(var h=0;h<g.length;h++)for(var m=g[h],k=m.bbox,t=m.zoomMin-(b&&m.zoomMin?1:0),n=m.zoomMax-(b&&m.zoomMax?1:0),m={extent:l.geographicToWebMercator({xmin:k[1],ymin:k[0],xmax:k[3],ymax:k[2],spatialReference:f.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=m.score?m.score:100,id:c};t<=n;t++)d[t]=d[t]||[],d[t].push(m)}d.maxKey=Math.max.apply(null,Object.keys(d));return d};g.prototype._getDynamicAttribution=function(a,b,
d){var c=b.extent;d=d.tileInfo.scaleToZoom(b.scale);d=Math.min(a.maxKey,Math.round(d));if(!c||null==d||-1>=d)return"";a=a[d];var e=l.project(c.center.clone().normalize(),b.spatialReference),f={};return a?a.filter(function(a){var b=!f[a.id]&&e&&h.extentContainsPoint(a.extent,e);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};e([d.property({readOnly:!0,type:r})],g.prototype,"items",void 0);e([d.property({dependsOn:["view.ready"],
readOnly:!0})],g.prototype,"state",null);e([d.property()],g.prototype,"view",void 0);return g=e([d.subclass("esri.widgets.Attribution.AttributionViewModel")],g)}(d.declared(b))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),function(q,g,p,e,n,c,f,k,r){return function(b){function a(a){a=
b.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=n.widgetLabel;a.view=null;a.viewModel=new k;return a}p(a,b);a.prototype.reset=function(){};a.prototype.render=function(){var a,b,c=this.viewModel,e=c.orientation,c=c.state,f="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=!g,b);return r.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",
f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":n.reset,title:n.reset},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(e)}),r.tsx("span",{class:"esri-icon-font-fallback-text"},n.reset))};a.prototype._reset=function(){this.viewModel.reset()};a.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};e([c.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);e([c.property()],
a.prototype,"iconClass",void 0);e([c.property()],a.prototype,"label",void 0);e([c.aliasOf("viewModel.view")],a.prototype,"view",void 0);e([c.property({type:k}),r.renderable(["viewModel.orientation","viewModel.state"])],a.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.reset")],a.prototype,"reset",null);e([r.accessibleHandler()],a.prototype,"_reset",null);return a=e([c.subclass("esri.widgets.Compass")],a)}(c.declared(f))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(q,g,p,e,n,c,f,k,r){return function(b){function a(a){a=b.call(this,a)||this;a._handles=new c;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);return a}p(a,b);a.prototype.initialize=function(){this._handles.add(f.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};a.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(f.init(this,"view.rotation",this._updateForRotation)):this._handles.add(f.init(this,"view.camera",this._updateForCamera)))};e([k.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,"canShowNorth",null);
e([k.property()],a.prototype,"orientation",void 0);e([k.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);e([k.property()],a.prototype,"view",void 0);e([k.property()],a.prototype,"reset",null);return a=e([k.subclass("esri.widgets.CompassViewModel")],a)}(k.declared(n,r))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(q,g,p,e,n,c,f,k,r){return function(b){function a(a){a=b.call(this)||this;a.iconClass="esri-icon-pan2";a.label=n.widgetLabel;a.view=null;a.viewModel=new k;return a}p(a,b);Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.toggle=function(){};a.prototype.render=function(){var a,b,c,e="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=
e,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=f,b);b=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=e?-1:0;return r.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":n.toggle,title:n.toggle},r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},r.tsx("span",{class:"esri-icon-pan"})),r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},r.tsx("span",{class:"esri-icon-rotate"})))};a.prototype._toggle=function(){this.toggle()};e([c.property()],a.prototype,"iconClass",void 0);e([c.property()],a.prototype,"label",void 0);e([c.property({value:"vertical"}),r.renderable()],a.prototype,"layout",null);e([c.aliasOf("viewModel.view"),r.renderable()],a.prototype,"view",void 0);
e([c.property({type:k}),r.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.toggle")],a.prototype,"toggle",null);e([r.accessibleHandler()],a.prototype,"_toggle",null);return a=e([c.subclass("esri.widgets.NavigationToggle")],a)}(c.declared(f))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(q,g,p,e,n,c,f,k){return function(g){function b(a){a=g.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}p(b,g);b.prototype.initialize=function(){this._handles.add(f.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});b.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};e([k.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);e([k.property()],b.prototype,"navigationMode",void 0);e([k.property()],b.prototype,"view",void 0);
e([k.property()],b.prototype,"toggle",null);return b=e([k.subclass("esri.widgets.NavigationToggleViewModel")],b)}(k.declared(n))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(b){b=a.call(this)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";
b.label=n.widgetLabel;b.view=null;b.viewModel=new r;return b}p(d,a);d.prototype.postInitialize=function(){this._zoomInButton=new k({action:this.zoomIn,iconClass:"esri-icon-plus",title:n.zoomIn});this._zoomOutButton=new k({action:this.zoomOut,iconClass:"esri-icon-minus",title:n.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var a,d=this.viewModel,c=(a={},a["esri-zoom--horizontal"]=
"horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===d.state&&d.canZoomIn;this._zoomOutButton.enabled="ready"===d.state&&d.canZoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",c)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};e([c.property()],d.prototype,"iconClass",void 0);e([c.property()],d.prototype,"label",void 0);e([c.property({value:"vertical"}),b.renderable()],d.prototype,"layout",
null);e([c.aliasOf("viewModel.view"),b.renderable()],d.prototype,"view",void 0);e([c.property({type:r}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);e([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=e([c.subclass("esri.widgets.Zoom")],d)}(c.declared(f))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,g,p,e,n,c,f){return function(c){function g(){var b=null!==c&&c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}p(g,c);g.prototype.render=function(){var b,a,d=this.enabled?0:-1,c=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(a={},a[this.iconClass]=!!this.iconClass,a);return f.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",c),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:d,
title:this.title},f.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),f.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};g.prototype._triggerAction=function(){this.action.call(this)};e([n.property()],g.prototype,"action",void 0);e([n.property(),f.renderable()],g.prototype,"enabled",void 0);e([n.property(),f.renderable()],g.prototype,"iconClass",void 0);e([n.property(),f.renderable()],g.prototype,"title",void 0);e([f.accessibleHandler()],g.prototype,
"_triggerAction",null);return g=e([n.subclass("esri.widgets.IconButton")],g)}(n.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,g,p,e,n,c,f,k){return function(g){function b(a){a=g.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}p(b,g);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new f({view:a}):"3d"===a.type&&(this._zoomConditions=new k({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};e([c.property()],b.prototype,"_zoomConditions",void 0);e([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);e([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",void 0);e([c.property({dependsOn:["view.ready"],
readOnly:!0})],b.prototype,"state",null);e([c.property()],b.prototype,"view",null);e([c.property()],b.prototype,"zoomIn",null);e([c.property()],b.prototype,"zoomOut",null);return b=e([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(c.declared(n))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,g,p,e,n,c){return function(f){function g(){return null!==
f&&f.apply(this,arguments)||this}p(g,f);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||c>b},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||c<b},enumerable:!0,configurable:!0});e([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],g.prototype,"canZoomIn",null);e([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],g.prototype,"canZoomOut",null);e([c.property()],g.prototype,"view",void 0);return g=e([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)}(c.declared(n))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,g,p,e,n,c){return function(f){function g(){return null!==f&&f.apply(this,arguments)||this}p(g,f);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});e([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);e([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);e([c.property()],g.prototype,"view",void 0);return g=e([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(c.declared(n))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4=p})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,g,p,e){function n(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,d){var c=a[0],e=a[1],f=a[2],g=a[3],m=a[4],k=a[5],n=a[6],p=a[7],w=a[8],y=a[9],q=a[10],r=a[11],A=a[12],B=a[13],H=a[14];a=a[15];var C=d[0],E=d[1],I=d[2],F=d[3];b[0]=C*c+E*m+I*w+F*A;
b[1]=C*e+E*k+I*y+F*B;b[2]=C*f+E*n+I*q+F*H;b[3]=C*g+E*p+I*r+F*a;C=d[4];E=d[5];I=d[6];F=d[7];b[4]=C*c+E*m+I*w+F*A;b[5]=C*e+E*k+I*y+F*B;b[6]=C*f+E*n+I*q+F*H;b[7]=C*g+E*p+I*r+F*a;C=d[8];E=d[9];I=d[10];F=d[11];b[8]=C*c+E*m+I*w+F*A;b[9]=C*e+E*k+I*y+F*B;b[10]=C*f+E*n+I*q+F*H;b[11]=C*g+E*p+I*r+F*a;C=d[12];E=d[13];I=d[14];F=d[15];b[12]=C*c+E*m+I*w+F*A;b[13]=C*e+E*k+I*y+F*B;b[14]=C*f+E*n+I*q+F*H;b[15]=C*g+E*p+I*r+F*a;return b}function f(b,a,d){var c=a[0],e=a[1],f=a[2],g=a[3],m=c+c,k=e+e,n=f+f;a=c*m;var p=c*
k,c=c*n,w=e*k,e=e*n,f=f*n,m=g*m,k=g*k,g=g*n;b[0]=1-(w+f);b[1]=p+g;b[2]=c-k;b[3]=0;b[4]=p-g;b[5]=1-(a+f);b[6]=e+m;b[7]=0;b[8]=c+k;b[9]=e-m;b[10]=1-(a+w);b[11]=0;b[12]=d[0];b[13]=d[1];b[14]=d[2];b[15]=1;return b}function k(b,a,d){b[0]=a[0]-d[0];b[1]=a[1]-d[1];b[2]=a[2]-d[2];b[3]=a[3]-d[3];b[4]=a[4]-d[4];b[5]=a[5]-d[5];b[6]=a[6]-d[6];b[7]=a[7]-d[7];b[8]=a[8]-d[8];b[9]=a[9]-d[9];b[10]=a[10]-d[10];b[11]=a[11]-d[11];b[12]=a[12]-d[12];b[13]=a[13]-d[13];b[14]=a[14]-d[14];b[15]=a[15]-d[15];return b}Object.defineProperty(g,
"__esModule",{value:!0});g.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.set=function(b,a,d,c,e,f,g,m,k,n,p,w,y,q,r,A,B){b[0]=a;b[1]=d;b[2]=c;b[3]=e;b[4]=f;b[5]=g;b[6]=m;b[7]=k;b[8]=n;b[9]=p;b[10]=w;b[11]=y;b[12]=q;b[13]=r;b[14]=A;b[15]=B;return b};g.identity=n;g.transpose=function(b,a){if(b===a){var d=a[1],c=a[2],e=a[3],f=a[6],g=a[7],m=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=d;b[6]=a[9];b[7]=a[13];b[8]=c;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=m}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};g.invert=function(b,a){var d=a[0],c=a[1],e=a[2],f=a[3],g=a[4],m=a[5],k=a[6],n=a[7],p=a[8],w=a[9],y=a[10],q=a[11],r=a[12],A=a[13],B=a[14];a=a[15];var H=d*m-c*g,C=d*k-e*g,E=d*n-f*g,I=c*k-e*m,F=c*n-f*m,R=e*n-
f*k,U=p*A-w*r,P=p*B-y*r,O=p*a-q*r,N=w*B-y*A,L=w*a-q*A,Q=y*a-q*B,M=H*Q-C*L+E*N+I*O-F*P+R*U;if(!M)return null;M=1/M;b[0]=(m*Q-k*L+n*N)*M;b[1]=(e*L-c*Q-f*N)*M;b[2]=(A*R-B*F+a*I)*M;b[3]=(y*F-w*R-q*I)*M;b[4]=(k*O-g*Q-n*P)*M;b[5]=(d*Q-e*O+f*P)*M;b[6]=(B*E-r*R-a*C)*M;b[7]=(p*R-y*E+q*C)*M;b[8]=(g*L-m*O+n*U)*M;b[9]=(c*O-d*L-f*U)*M;b[10]=(r*F-A*E+a*H)*M;b[11]=(w*E-p*F-q*H)*M;b[12]=(m*P-g*N-k*U)*M;b[13]=(d*N-c*P+e*U)*M;b[14]=(A*C-r*I-B*H)*M;b[15]=(p*I-w*C+y*H)*M;return b};g.adjoint=function(b,a){var d=a[0],
c=a[1],e=a[2],f=a[3],g=a[4],m=a[5],k=a[6],n=a[7],p=a[8],w=a[9],q=a[10],r=a[11],D=a[12],A=a[13],B=a[14];a=a[15];b[0]=m*(q*a-r*B)-w*(k*a-n*B)+A*(k*r-n*q);b[1]=-(c*(q*a-r*B)-w*(e*a-f*B)+A*(e*r-f*q));b[2]=c*(k*a-n*B)-m*(e*a-f*B)+A*(e*n-f*k);b[3]=-(c*(k*r-n*q)-m*(e*r-f*q)+w*(e*n-f*k));b[4]=-(g*(q*a-r*B)-p*(k*a-n*B)+D*(k*r-n*q));b[5]=d*(q*a-r*B)-p*(e*a-f*B)+D*(e*r-f*q);b[6]=-(d*(k*a-n*B)-g*(e*a-f*B)+D*(e*n-f*k));b[7]=d*(k*r-n*q)-g*(e*r-f*q)+p*(e*n-f*k);b[8]=g*(w*a-r*A)-p*(m*a-n*A)+D*(m*r-n*w);b[9]=-(d*
(w*a-r*A)-p*(c*a-f*A)+D*(c*r-f*w));b[10]=d*(m*a-n*A)-g*(c*a-f*A)+D*(c*n-f*m);b[11]=-(d*(m*r-n*w)-g*(c*r-f*w)+p*(c*n-f*m));b[12]=-(g*(w*B-q*A)-p*(m*B-k*A)+D*(m*q-k*w));b[13]=d*(w*B-q*A)-p*(c*B-e*A)+D*(c*q-e*w);b[14]=-(d*(m*B-k*A)-g*(c*B-e*A)+D*(c*k-e*m));b[15]=d*(m*q-k*w)-g*(c*q-e*w)+p*(c*k-e*m);return b};g.determinant=function(b){var a=b[0],d=b[1],c=b[2],e=b[3],f=b[4],g=b[5],m=b[6],k=b[7],n=b[8],p=b[9],q=b[10],y=b[11],r=b[12],D=b[13],A=b[14];b=b[15];return(a*g-d*f)*(q*b-y*A)-(a*m-c*f)*(p*b-y*D)+(a*
k-e*f)*(p*A-q*D)+(d*m-c*g)*(n*b-y*r)-(d*k-e*g)*(n*A-q*r)+(c*k-e*m)*(n*D-p*r)};g.multiply=c;g.translate=function(b,a,d){var c=d[0],e=d[1];d=d[2];var f=void 0,g=void 0,m=void 0,k=void 0,n=void 0,p=void 0,q=void 0,r=void 0,z=void 0,D=void 0,A=void 0,B=void 0;a===b?(b[12]=a[0]*c+a[4]*e+a[8]*d+a[12],b[13]=a[1]*c+a[5]*e+a[9]*d+a[13],b[14]=a[2]*c+a[6]*e+a[10]*d+a[14],b[15]=a[3]*c+a[7]*e+a[11]*d+a[15]):(f=a[0],g=a[1],m=a[2],k=a[3],n=a[4],p=a[5],q=a[6],r=a[7],z=a[8],D=a[9],A=a[10],B=a[11],b[0]=f,b[1]=g,b[2]=
m,b[3]=k,b[4]=n,b[5]=p,b[6]=q,b[7]=r,b[8]=z,b[9]=D,b[10]=A,b[11]=B,b[12]=f*c+n*e+z*d+a[12],b[13]=g*c+p*e+D*d+a[13],b[14]=m*c+q*e+A*d+a[14],b[15]=k*c+r*e+B*d+a[15]);return b};g.scale=function(b,a,d){var c=d[0],e=d[1];d=d[2];b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*d;b[9]=a[9]*d;b[10]=a[10]*d;b[11]=a[11]*d;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.rotate=function(b,a,d,c){var f=c[0],g=c[1];c=c[2];var h=Math.sqrt(f*f+
g*g+c*c),m=void 0,k=void 0,n=void 0,p=void 0,q=void 0,r=void 0,z=void 0,D=void 0,A=void 0,B=void 0,H=void 0,C=void 0,E=void 0,I=void 0,F=void 0,R=void 0,U=void 0,P=void 0,O=void 0,N=void 0,L=void 0,Q=void 0,k=m=void 0;if(h<e.EPSILON)return null;h=1/h;f*=h;g*=h;c*=h;m=Math.sin(d);k=Math.cos(d);n=1-k;p=a[0];q=a[1];r=a[2];z=a[3];D=a[4];A=a[5];B=a[6];H=a[7];C=a[8];E=a[9];I=a[10];F=a[11];R=f*f*n+k;U=g*f*n+c*m;P=c*f*n-g*m;O=f*g*n-c*m;N=g*g*n+k;L=c*g*n+f*m;Q=f*c*n+g*m;m=g*c*n-f*m;k=c*c*n+k;b[0]=p*R+D*U+
C*P;b[1]=q*R+A*U+E*P;b[2]=r*R+B*U+I*P;b[3]=z*R+H*U+F*P;b[4]=p*O+D*N+C*L;b[5]=q*O+A*N+E*L;b[6]=r*O+B*N+I*L;b[7]=z*O+H*N+F*L;b[8]=p*Q+D*m+C*k;b[9]=q*Q+A*m+E*k;b[10]=r*Q+B*m+I*k;b[11]=z*Q+H*m+F*k;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};g.rotateX=function(b,a,d){var c=Math.sin(d);d=Math.cos(d);var e=a[4],f=a[5],g=a[6],m=a[7],k=a[8],n=a[9],p=a[10],q=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*d+k*c;b[5]=f*d+n*
c;b[6]=g*d+p*c;b[7]=m*d+q*c;b[8]=k*d-e*c;b[9]=n*d-f*c;b[10]=p*d-g*c;b[11]=q*d-m*c;return b};g.rotateY=function(b,a,d){var c=Math.sin(d);d=Math.cos(d);var e=a[0],f=a[1],g=a[2],m=a[3],k=a[8],n=a[9],p=a[10],q=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*d-k*c;b[1]=f*d-n*c;b[2]=g*d-p*c;b[3]=m*d-q*c;b[8]=e*c+k*d;b[9]=f*c+n*d;b[10]=g*c+p*d;b[11]=m*c+q*d;return b};g.rotateZ=function(b,a,d){var c=Math.sin(d);d=Math.cos(d);var e=a[0],f=a[1],
g=a[2],m=a[3],k=a[4],n=a[5],p=a[6],q=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*d+k*c;b[1]=f*d+n*c;b[2]=g*d+p*c;b[3]=m*d+q*c;b[4]=k*d-e*c;b[5]=n*d-f*c;b[6]=p*d-g*c;b[7]=q*d-m*c;return b};g.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};g.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromRotation=function(b,a,c){var d=c[0],f=c[1];c=c[2];var g=Math.sqrt(d*d+f*f+c*c),k=void 0,m=void 0,n=void 0;if(g<e.EPSILON)return null;g=1/g;d*=g;f*=g;c*=g;k=Math.sin(a);m=Math.cos(a);n=1-m;b[0]=d*d*n+m;b[1]=f*d*n+c*k;b[2]=c*d*n-f*k;b[3]=0;b[4]=d*f*n-c*k;b[5]=f*f*n+m;b[6]=c*f*n+d*k;b[7]=0;b[8]=d*c*n+f*k;b[9]=f*c*n-d*k;b[10]=c*c*n+m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromRotationTranslation=f;g.fromQuat2=function(b,a){var c=r,e=-a[0],g=-a[1],k=-a[2],n=a[3],m=a[4],p=a[5],q=a[6],v=a[7],w=e*e+g*g+k*k+n*n;0<w?(c[0]=2*(m*n+v*e+p*k-q*g)/w,c[1]=2*(p*n+v*g+q*e-m*k)/w,c[2]=2*(q*n+v*k+m*g-p*e)/w):(c[0]=2*(m*n+v*e+p*k-q*g),c[1]=2*(p*n+v*g+q*e-m*k),c[2]=2*(q*n+v*k+m*g-p*e));f(b,a,c);return b};var r=p.create();g.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};g.getScaling=function(b,a){var c=a[0],e=a[1],
f=a[2],g=a[4],k=a[5],m=a[6],n=a[8],p=a[9];a=a[10];b[0]=Math.sqrt(c*c+e*e+f*f);b[1]=Math.sqrt(g*g+k*k+m*m);b[2]=Math.sqrt(n*n+p*p+a*a);return b};g.getRotation=function(b,a){var c=a[0]+a[5]+a[10],e=0;0<c?(e=2*Math.sqrt(c+1),b[3]=.25*e,b[0]=(a[6]-a[9])/e,b[1]=(a[8]-a[2])/e,b[2]=(a[1]-a[4])/e):a[0]>a[5]&&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/e,b[0]=.25*e,b[1]=(a[1]+a[4])/e,b[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/e,b[0]=(a[1]+a[4])/e,b[1]=
.25*e,b[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/e,b[0]=(a[8]+a[2])/e,b[1]=(a[6]+a[9])/e,b[2]=.25*e);return b};g.fromRotationTranslationScale=function(b,a,c,e){var d=a[0],f=a[1],g=a[2],h=a[3],k=d+d,n=f+f,p=g+g;a=d*k;var q=d*n,d=d*p,r=f*n,f=f*p,g=g*p,k=h*k,n=h*n,h=h*p,p=e[0],z=e[1];e=e[2];b[0]=(1-(r+g))*p;b[1]=(q+h)*p;b[2]=(d-n)*p;b[3]=0;b[4]=(q-h)*z;b[5]=(1-(a+g))*z;b[6]=(f+k)*z;b[7]=0;b[8]=(d+n)*e;b[9]=(f-k)*e;b[10]=(1-(a+r))*e;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};g.fromRotationTranslationScaleOrigin=function(b,a,c,e,f){var d=a[0],g=a[1],h=a[2],l=a[3],k=d+d,n=g+g,p=h+h;a=d*k;var q=d*n,r=d*p,d=g*n,g=g*p,D=h*p,h=l*k,n=l*n,A=l*p,B=e[0],H=e[1],p=e[2];e=f[0];l=f[1];f=f[2];var k=(1-(d+D))*B,C=(q+A)*B,B=(r-n)*B,q=(q-A)*H,D=(1-(a+D))*H,H=(g+h)*H,r=(r+n)*p,g=(g-h)*p;a=(1-(a+d))*p;b[0]=k;b[1]=C;b[2]=B;b[3]=0;b[4]=q;b[5]=D;b[6]=H;b[7]=0;b[8]=r;b[9]=g;b[10]=a;b[11]=0;b[12]=c[0]+e-(k*e+q*l+r*f);b[13]=c[1]+l-(C*e+D*l+g*f);b[14]=c[2]+f-(B*e+H*l+a*f);b[15]=
1;return b};g.fromQuat=function(b,a){var c=a[0],e=a[1],f=a[2];a=a[3];var g=c+c,k=e+e,m=f+f,c=c*g,n=e*g,e=e*k,p=f*g,q=f*k,f=f*m,g=a*g,k=a*k;a*=m;b[0]=1-e-f;b[1]=n+a;b[2]=p-k;b[3]=0;b[4]=n-a;b[5]=1-c-f;b[6]=q+g;b[7]=0;b[8]=p+k;b[9]=q-g;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.frustum=function(b,a,c,e,f,g,k){var d=1/(c-a),h=1/(f-e),l=1/(g-k);b[0]=2*g*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*h;b[6]=0;b[7]=0;b[8]=(c+a)*d;b[9]=(f+e)*h;b[10]=(k+g)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=k*
g*2*l;b[15]=0;return b};g.perspective=function(b,a,c,e,f){a=1/Math.tan(a/2);var d=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),b[10]=(f+e)*d,b[14]=2*f*e*d):(b[10]=-1,b[14]=-2*e);return b};g.perspectiveFromFieldOfView=function(b,a,c,e){var d=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),g=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var h=2/(g+
a),k=2/(d+f);b[0]=h;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=-((g-a)*h*.5);b[9]=(d-f)*k*.5;b[10]=e/(c-e);b[11]=-1;b[12]=0;b[13]=0;b[14]=e*c/(c-e);b[15]=0;return b};g.ortho=function(b,a,c,e,f,g,k){var d=1/(a-c),h=1/(e-f),l=1/(g-k);b[0]=-2*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*h;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+c)*d;b[13]=(f+e)*h;b[14]=(k+g)*l;b[15]=1;return b};g.lookAt=function(b,a,c,f){var d=void 0,g=void 0,h=void 0,k=void 0,p=void 0,q=void 0,r=void 0,w=void 0,y=
void 0,z=void 0,D=a[0],A=a[1];a=a[2];h=f[0];k=f[1];f=f[2];r=c[0];w=c[1];c=c[2];if(Math.abs(D-r)<e.EPSILON&&Math.abs(A-w)<e.EPSILON&&Math.abs(a-c)<e.EPSILON)return n(b);r=D-r;w=A-w;y=a-c;z=1/Math.sqrt(r*r+w*w+y*y);r*=z;w*=z;y*=z;d=k*y-f*w;g=f*r-h*y;h=h*w-k*r;(z=Math.sqrt(d*d+g*g+h*h))?(z=1/z,d*=z,g*=z,h*=z):h=g=d=0;k=w*h-y*g;p=y*d-r*h;q=r*g-w*d;(z=Math.sqrt(k*k+p*p+q*q))?(z=1/z,k*=z,p*=z,q*=z):q=p=k=0;b[0]=d;b[1]=k;b[2]=r;b[3]=0;b[4]=g;b[5]=p;b[6]=w;b[7]=0;b[8]=h;b[9]=q;b[10]=y;b[11]=0;b[12]=-(d*D+
g*A+h*a);b[13]=-(k*D+p*A+q*a);b[14]=-(r*D+w*A+y*a);b[15]=1;return b};g.targetTo=function(b,a,c,e){var d=a[0],f=a[1];a=a[2];var g=e[0],h=e[1],k=e[2];e=d-c[0];var n=f-c[1];c=a-c[2];var p=e*e+n*n+c*c;0<p&&(p=1/Math.sqrt(p),e*=p,n*=p,c*=p);var q=h*c-k*n,k=k*e-g*c,g=g*n-h*e,p=q*q+k*k+g*g;0<p&&(p=1/Math.sqrt(p),q*=p,k*=p,g*=p);b[0]=q;b[1]=k;b[2]=g;b[3]=0;b[4]=n*g-c*k;b[5]=c*q-e*g;b[6]=e*k-n*q;b[7]=0;b[8]=e;b[9]=n;b[10]=c;b[11]=0;b[12]=d;b[13]=f;b[14]=a;b[15]=1;return b};g.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};g.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};g.subtract=k;g.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};g.multiplyScalarAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;b[3]=a[3]+c[3]*e;b[4]=a[4]+c[4]*e;b[5]=a[5]+c[5]*e;b[6]=a[6]+c[6]*e;b[7]=a[7]+c[7]*e;b[8]=a[8]+c[8]*e;b[9]=a[9]+c[9]*e;b[10]=a[10]+c[10]*e;b[11]=a[11]+c[11]*e;b[12]=a[12]+c[12]*e;b[13]=a[13]+c[13]*e;b[14]=a[14]+c[14]*e;b[15]=a[15]+c[15]*e;return b};g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};g.equals=function(b,a){var c=b[0],f=b[1],g=b[2],k=b[3],n=b[4],m=b[5],p=b[6],q=b[7],r=b[8],w=b[9],y=b[10],z=b[11],D=b[12],A=b[13],B=b[14];b=b[15];var H=a[0],C=a[1],E=a[2],I=a[3],F=a[4],R=a[5],U=a[6],P=a[7],O=a[8],N=a[9],L=a[10],Q=a[11],M=a[12],S=a[13],K=a[14];a=a[15];return Math.abs(c-H)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(f-C)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&
Math.abs(g-E)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(k-I)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(I))&&Math.abs(n-F)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(F))&&Math.abs(m-R)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(p-U)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(q-P)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(P))&&Math.abs(r-O)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(w-N)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(N))&&Math.abs(y-
L)<=e.EPSILON*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(z-Q)<=e.EPSILON*Math.max(1,Math.abs(z),Math.abs(Q))&&Math.abs(D-M)<=e.EPSILON*Math.max(1,Math.abs(D),Math.abs(M))&&Math.abs(A-S)<=e.EPSILON*Math.max(1,Math.abs(A),Math.abs(S))&&Math.abs(B-K)<=e.EPSILON*Math.max(1,Math.abs(B),Math.abs(K))&&Math.abs(b-a)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};g.mul=c;g.sub=k})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4f32=p})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(16);g[0]=1;g[5]=1;g[10]=1;g[15]=1;return g};g.clone=function(g){var e=new Float32Array(16);e[0]=g[0];e[1]=g[1];e[2]=g[2];e[3]=g[3];e[4]=g[4];e[5]=g[5];e[6]=g[6];e[7]=g[7];e[8]=g[8];e[9]=g[9];e[10]=g[10];e[11]=g[11];e[12]=g[12];e[13]=g[13];e[14]=g[14];e[15]=g[15];return e};
g.fromValues=function(g,e,n,c,f,k,q,b,a,d,h,l,t,u,m,x){var p=new Float32Array(16);p[0]=g;p[1]=e;p[2]=n;p[3]=c;p[4]=f;p[5]=k;p[6]=q;p[7]=b;p[8]=a;p[9]=d;p[10]=h;p[11]=l;p[12]=t;p[13]=u;p[14]=m;p[15]=x;return p};g.createView=function(g,e){return new Float32Array(g,e,16)}})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec3f32=p})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,g){function p(){return new Float32Array(3)}function e(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function n(){return e(1,1,1)}function c(){return e(1,0,0)}function f(){return e(0,1,0)}function k(){return e(0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};g.fromValues=e;g.createView=function(c,b){return new Float32Array(c,b,3)};g.zeros=function(){return p()};
g.ones=n;g.unitX=c;g.unitY=f;g.unitZ=k;g.ZEROS=p();g.ONES=n();g.UNIT_X=c();g.UNIT_Y=f();g.UNIT_Z=k()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec4f32=p})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,g){function p(){return new Float32Array(4)}function e(b,a,c,e){var d=new Float32Array(4);d[0]=b;d[1]=a;d[2]=c;d[3]=e;return d}
function n(){return e(1,1,1,1)}function c(){return e(1,0,0,0)}function f(){return e(0,1,0,0)}function k(){return e(0,0,1,0)}function r(){return e(0,0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};g.fromValues=e;g.createView=function(b,a){return new Float32Array(b,a,4)};g.zeros=function(){return p()};g.ones=n;g.unitX=c;g.unitY=f;g.unitZ=k;g.unitW=r;g.ZEROS=p();g.ONES=n();g.UNIT_X=c();
g.UNIT_Y=f();g.UNIT_Z=k();g.UNIT_W=r()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(q,g,p,e,n,c,f,k){function r(a,b){return a?b?4:3:b?3:2}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function a(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function d(a,b){return b*a.scale[0]+a.translate[0]}
function h(a,b){return a.translate[1]-b*a.scale[1]}function l(a){a=a.coords;return{x:a[0],y:a[1]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function u(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function m(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function G(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function v(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function w(a,b){a.coords[0]=b.x;
a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function y(a,b){return a&&b?w:a?m:b?G:t}function z(a,b,c){if(!a)return null;for(var d=r(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function D(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=b[f],h=0;h<c;h++)d[e++]=g[h];return a}
function A(a,b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],m=[],l=0;l<k;l++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);m.push(n)}f.push(m)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function B(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,m=h;k<m.length;k++)for(var l=m[k],n=0;n<c;n++)e[f++]=l[n];d.push(h.length)}return a}function H(a,
b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],m=[],l=0;l<k;l++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);m.push(n)}f.push(m)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function C(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);c=r(c,d);d=a.lengths;var e=a.coords,f=0,g=d.length=e.length=0;for(b=b.rings;g<b.length;g++){for(var h=b[g],k=0,m=h;k<m.length;k++)for(var l=m[k],n=0;n<c;n++)e[f++]=l[n];
d.push(h.length)}return a}function E(a,b,d,e,f,g){a.length=0;if(!d){for(e=0;e<b.length;e++)f=b[e],a.push(new c.default(null,f.attributes,null,f.attributes[g]));return a}switch(d){case "esriGeometryPoint":e=y(e,f);for(f=0;f<b.length;f++){var h=b[f];d=h.geometry;var h=h.attributes,m=void 0;d&&(m=e(new k.default,d));a.push(new c.default(m,h,null,h[g]))}break;case "esriGeometryMultipoint":e=r(e,f);for(f=0;f<b.length;f++)h=b[f],d=h.geometry,h=h.attributes,m=void 0,d&&(m=D(new k.default,d,e)),a.push(new c.default(m,
h,null,h[g]));break;case "esriGeometryPolyline":e=r(e,f);for(f=0;f<b.length;f++)h=b[f],d=h.geometry,h=h.attributes,m=void 0,d&&(m=B(new k.default,d,e)),a.push(new c.default(m,h,null,h[g]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var l=b[d],h=l.geometry,m=l.centroid,l=l.attributes,n=void 0;h&&(n=C(new k.default,h,e,f));m?a.push(new c.default(n,l,t(new k.default,m),l[g])):a.push(new c.default(n,l,null,l[g]))}break;default:P.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+
d+"'")),a.length=0}return a}function I(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=l;d&&e?c=v:d?c=u:e&&(c=x);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=z(f,d,e));a.push({attributes:g,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],f=g.geometry,g=g.attributes,h=void 0,f&&(h=A(f,
d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=H(g,d,e));k?(g=l(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:P.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+c+"'"))}return a}function F(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;
g=O[g];var k=d.coords;d=d.lengths;var m=r(e,f);e=e?f?Q:L:f?L:N;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=m,c;for(var l,n,p,q=0,t,w=0,u=0;u<d.length;u++){var y=d[u];if(!(y<g)){var v=0;t=w;n=f=b(h,k[q]);p=l=a(h,k[q+1]);e(c.coords,k,t,q,n,p);v++;q+=m;t+=m;for(var K=1;K<y;K++,q+=m)if(n=b(h,k[q]),p=a(h,k[q+1]),n!==f||p!==l)e(c.coords,k,t,q,n-f,p-l),t+=m,v++,f=n,l=p;v>=g&&(c.lengths.push(v),w=t)}}c.coords.length=w;return c.coords.length?
c:null}function R(a,b,c,d,e,f,g){for(var h=g-c,k=0,m=0,l,n=f+c;n<g-c;n+=c){l=b[n];var p=b[n+1],q=b[f],t=b[f+1],r=b[h],w=b[h+1];q===r?l=Math.abs(l-q):(r=(w-t)/(r-q),l=Math.abs(r*l-p+(t-r*q))/Math.sqrt(r*r+1));l>k&&(m=n,k=l)}k>d?(R(a,b,c,d,e,f,m+c),R(a,b,c,d,e,m,g)):(e(a,b,a.length,f,b[f],b[f+1]),e(a,b,a.length,h,b[h],b[h+1]))}function U(a,b,c,e,f){var g=b.coords,k=b.lengths,m=c?e?Q:L:e?L:N;c=r(c,e);if(!g.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!k.length)return m(a.coords,g,
0,0,d(f,g[0]),h(f,g[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var l=f.scale;e=l[0];for(var l=l[1],n=0,p=0;p<k.length;p++){var q=k[p];a.lengths[p]=q;var t=d(f,g[n]),w=h(f,g[n+1]);m(a.coords,g,n,n,t,w);for(var n=n+c,u=1;u<q;u++,n+=c)t+=g[n]*e,w-=g[n+1]*l,m(a.coords,g,n,n,t,w)}a!==b&&(a.lengths.length=k.length,a.coords.length=g.length);return a}Object.defineProperty(g,"__esModule",{value:!0});var P=e.getLogger("esri.tasks.support.optimizedFeatureSet"),O={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0},N=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},L=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},Q=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};g.quantizeX=b;g.quantizeY=a;g.hydrateX=d;g.hydrateY=h;g.convertToPoint=function(a,b,c){return a?b?c?v(a):u(a):c?x(a):l(a):null};g.convertFromPoint=function(a,b,c){void 0===c&&(c=y(null!=b.z,null!=b.m));return c(a,b)};g.convertToMultipoint=z;g.convertFromMultipoint=D;g.convertToPolyline=A;
g.convertToPolygon=H;g.convertFromPolygon=C;var M=[],S=[];g.convertFromFeature=function(a,b,c,d,e){M[0]=a;a=E(S,M,b,c,d,e)[0];M.length=S.length=0;return a};g.convertFromFeatures=E;g.convertToFeature=function(a,b,c,d){S[0]=a;I(M,S,b,c,d);a=M[0];M.length=S.length=0;return a};g.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new k.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(n.isPoint(a))return y(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(n.isPolygon(a))return C(d,
a,b,c);if(n.isPolyline(a))return B(d,a,r(b,c));if(n.isMultipoint(a))return D(d,a,r(b,c));P.error("convertFromGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+a+"'"))};g.convertToGeometry=function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=l,c&&d?b=v:c?b=u:d&&(b=x),b(a);case "esriGeometryMultipoint":return z(a,c,d);case "esriGeometryPolyline":return A(a,c,d);case "esriGeometryPolygon":return H(a,c,d);default:P.error("convertToGeometry:unknown-geometry",
new p("Unable to parse unknown geometry type '"+b+"'"))}};g.convertToFeatures=I;g.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:I([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};g.convertFromFeatureSet=function(a,b){var c=new f.default,d=a.hasM,
e=a.hasZ,g=a.features,h=a.objectIdFieldName,k=a.spatialReference,m=a.geometryType,l=a.exceededTransferLimit,n=a.transform;c.fields=a.fields;c.geometryType=m;c.objectIdFieldName=h||b;c.spatialReference=k;if(!c.objectIdFieldName)return P.error(new p("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&E(c.features,g,m,e,d,c.objectIdFieldName);l&&(c.exceededTransferLimit=l);d&&(c.hasM=d);e&&(c.hasZ=e);n&&(c.transform=n);return c};g.hydrateOptimizedFeatureSet=function(a){var b=
a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&U(g.geometry,g.geometry,c,d,b);g.centroid&&U(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};g.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,f=b.hasM,g=b.hasZ;if(!a)return b;for(var h=0;h<e.length;h++){var m=e[h],l=new c.default(new k.default,m.attributes);F(l.geometry,m.geometry,f,g,d,a);m.centroid&&(l.centroid=new k.default,F(l.centroid,m.centroid,f,
g,"esriGeometryPoint",a));e[h]=l}b.transform=a;return b};g.quantizeOptimizedGeometry=F;g.quantizeOptimizedGeometryRemoveCollinear=function(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;g=O[g];var k=d.coords;d=d.lengths;var m=r(e,f);e=e?f?Q:L:f?L:N;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=m,c;for(var l,n,p,q=0,t,w=0,u=0;u<d.length;u++){var y=d[u];if(!(y<
g)){var v=0;t=w;f=l=b(h,k[q]);p=n=a(h,k[q+1]);e(c.coords,k,t,q,f,p);v++;for(var q=q+m,x=!1,z=0,D=0,A=1;A<y;A++,q+=m)if(f=b(h,k[q]),p=a(h,k[q+1]),f!==l||p!==n)l=f-l,n=p-n,x&&(0===z&&0===l||0===D&&0===n)?(z+=l,D+=n):(x=!0,z=l,D=n,t+=m,v++),e(c.coords,k,t,q,z,D),l=f,n=p;x&&(t+=m,e(c.coords,k,t,q,z,D));v>=g&&(c.lengths.push(v),w=t)}}c.coords.length!==w&&(c.coords.length=w);return c.coords.length?c:null};g.generalizeOptimizedGeometry=function(a,b,c,d,e,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&
(a.coords.length=0);if(!b||!b.coords.length)return null;e=O[e];var g=b.coords;b=b.lengths;var h=r(c,d);c=c?d?Q:L:d?L:N;if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=d=0;k<b.length;k++){var m=b[k];if(!(m<e)){var l=a.coords.length/h;R(a.coords,g,h,f,c,d,d+m*h);var n=a.coords.length/h-l;n>=e?a.lengths.push(n):a.coords.length=l*h}d+=m*h}return a.coords.length?a:null};g.getBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);var e=d=
Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],m=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,m);g=Math.max(g,m)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};g.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,m=0;for(b=b.lengths;m<b.length;m++)for(var l=b[m],n=
d[k],p=d[k+1],e=Math.min(n,e),f=Math.min(p,f),g=Math.max(n,g),h=Math.max(p,h),k=k+c,q=1;q<l;q++,k+=c){var t=d[k],w=d[k+1],n=n+t,p=p+w;0>t&&(e=Math.min(e,n));0<t&&(g=Math.max(g,n));0>w?f=Math.min(f,p):0<w&&(h=Math.max(h,p))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};g.hydrateOptimizedGeometry=U})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(q,g,p,e,n,c,f,k){function r(a,c,e,f){var g=f.transform,h=f.hasZ;f=f.hasM;d.has(a)||d.set(a,b(e));a=d.get(a)(c.geometry,g,h,f);return p({},c,{geometry:a})}function b(b){var c={};switch(b){case "esriGeometryPoint":return function(a,b,d,e){return f.hydratePoint(b,c,a,d,e)};case "esriGeometryPolygon":return function(a,b,d,e){return f.hydratePolygon(b,c,a,d,e)};case "esriGeometryPolyline":return function(a,b,d,e){return f.hydratePolyline(b,c,a,d,e)};case "esriGeometryMultipoint":return function(a,
b,d,e){return f.hydrateMultipoint(b,c,a,d,e)};default:return a.error(new n("mapview-arcade","Unable to handle geometryType: "+b)),function(a,b,c,d){return a}}}Object.defineProperty(g,"__esModule",{value:!0});var a=c.getLogger("esri.views.2d.support.arcadeOnDemand");g.callWithOptimizedFeature=function(b,c,d,e,f){var g=e.geometryType,h=e.hasZ;e=e.hasM;c=b.referencesGeometry()?f?r(b,k.convertToFeature(c,g,h,e),g,f):k.convertToFeature(c,g,h,e):c;c=b.repurposeFeature(c);try{return b.evaluate(p({},d,{$feature:c}))}catch(v){return a.warn("Feature arcade evaluation failed:",
v),null}};g.callWithFeature=function(b,c,d,e,f){c=b.referencesGeometry()&&f?r(b,c,e,f):c;c=b.repurposeFeature(c);try{return b.evaluate(p({},d,{$feature:c}))}catch(x){return a.warn("Feature arcade evaluation failed:",x),null}};var d=new e.default;g.createHydrateFactory=b})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;c.categories=null;c.countryCode=null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(a){return b.getResults(n({source:c},a))};c.getSuggestions=function(a){return b.getSuggestions(n({source:c},a))};return c}p(d,a);g=d;d.prototype.readLocator=function(a,b){return(a=b.url)?
new k({url:a}):null};d.prototype.writeLocator=function(a,b){b.url=a?a.url:null};d.prototype.clone=function(){return new g({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():
null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var g;e([f.property()],d.prototype,"categories",void 0);e([f.property()],d.prototype,
"countryCode",void 0);e([f.property({type:k})],d.prototype,"locator",void 0);e([f.reader("locator",["url"])],d.prototype,"readLocator",null);e([f.writer("locator")],d.prototype,"writeLocator",null);e([f.property()],d.prototype,"locationType",void 0);e([f.property({json:{write:!0}})],d.prototype,"name",void 0);e([f.property({json:{write:!0}})],d.prototype,"placeholder",void 0);e([f.property()],d.prototype,"searchTemplate",void 0);e([f.property({json:{write:!0}})],d.prototype,"singleLineFieldName",
void 0);e([f.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",void 0);e([f.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=g=e([f.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(f.declared(r))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(q,g,p,e,n,c,f,k,r,b){return function(a){function d(b){b=a.call(this,b)||this;b.outSpatialReference=null;b.url=null;return b}p(d,a);d.prototype.addressToLocations=function(a,b){var d=a.address,e=a.categories,f=a.countryCode,g=a.forStorage,h=a.location,k=a.locationType,l=a.magicKey,p=a.maxLocations,q=a.outFields;a=a.searchExtent;var r=h?h.clone().normalize():null,A=a?a.shiftCentralMeridian():null,B=this.outSpatialReference,h=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:B?JSON.stringify(B.toJSON()):
null,outFields:q?q.join(","):null,searchExtent:A?JSON.stringify(A.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:l||null,location:r,locationType:k||null,maxLocations:p||null,forStorage:g||null};d={query:this._encode(n({},h.query,d,e))};b=n({},a,b,d);return c(h.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(a,b){var d=this.parsedUrl,e=this.requestOptions,f=a.location,g=a.searchExtent,f=f?f.clone().normalize():
null,g=g?g.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:g?JSON.stringify(g.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:f};a={query:this._encode(n({},d.query,a))};b=n({},e,b,a);return c(d.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=function(a,b){var d=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,g=a.addresses,h=a.categories,
k=a.locationType;a=a.countryCode;var l=[];Array.isArray(g)&&g.forEach(function(a){l.push({attributes:a})});d={category:h?h.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:l}),locationType:k||null,f:"json",outSR:d?JSON.stringify(d):null};d={query:this._encode(n({},e.query,d))};b=n({},f,b,d);return c(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(a,b){var d=a.locationType,e=(a=a.location)?a.clone().normalize():
null,f="undefined"!==typeof e,g=this.outSpatialReference;a=this.parsedUrl;var h=this.requestOptions,d={outSR:g?JSON.stringify(g.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:d||null,f:"json"},d={query:this._encode(n({},a.query,d))};b=n({},h,b,d);return c(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.candidates,d=a.spatialReference;return c?c.map(function(a){if(a){var c=
a.extent,e=a.location,f=c?c&&"number"===typeof c.xmin&&"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&f)return c&&(c.spatialReference=d),e.spatialReference=d,b.fromJSON(a)}}):[]};d.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.locations,d=a.spatialReference;return c?c.map(function(a){var c=
a.location;c&&(c.spatialReference=d);return b.fromJSON(a)}):[]};d.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var c=a.address;return b.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:a.location,score:100})}};e([f.property({type:k})],d.prototype,"outSpatialReference",void 0);e([f.property()],d.prototype,"url",void 0);return d=e([f.subclass("esri.tasks.Locator")],d)}(f.declared(r))})},"esri/tasks/support/AddressCandidate":function(){define(["../../core/JSONSupport",
"../../geometry/Extent","../../geometry/Point"],function(q,g,p){return q.createSubclass({declaredClass:"esri.tasks.support.AddressCandidate",properties:{address:{value:null,json:{write:!0}},attributes:{value:null,json:{write:!0}},extent:{value:null,type:g,json:{write:!0}},location:{value:null,type:p,json:{write:!0}},score:{value:null,json:{write:!0}}}})})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),
function(q,g,p,e,n,c){function f(b){var c=b.source,d=b.spatialReference,e=b.location,f=b.sourceIndex,g=b.view;b=c.locator;var k=c.zoomScale,n=g&&g.scale;d&&(b.outSpatialReference=d);return b.locationToAddress({location:e}).then(function(b){return a([b],{sourceIndex:f,scale:n,view:g,zoomScale:k})})}function k(a,b){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=c.createExtentFromGeometry(d&&d.geometry,b,b&&b.scale))||e||(a&&f?f:void 0)}function r(b){var c=b.source,
d=b.suggestResult,f=b.spatialReference,g=b.view,m=b.maxResults,p=b.sourceIndex,q=c&&c.zoomScale;b=d.text.trim();if(!b)return n.resolve();b=""+(!d.key&&c.prefix?c.prefix:"")+b+(!d.key&&c.suffix?c.suffix:"");var r={},w=c.locator,y=g&&g.scale,z=k(c,g);if(!w)return n.resolve();c.categories&&(r.categories=c.categories);c.locationType&&(r.locationType=c.locationType);f&&(w.outSpatialReference=f);if(f=g&&g.get("extent.center"))r.location=f;r.maxLocations=m;z&&(r.searchExtent=e.unwrap(z));c.countryCode&&
(r.countryCode=c.countryCode);var D=d.key;D&&(r.magicKey=D);r.address={};r.address[c.singleLineFieldName||"Single Line Input"]=b;c.outFields&&(r.outFields=c.outFields);return w.addressToLocations(r).then(function(b){return a(b,{key:D,scale:y,sourceIndex:p,view:g,zoomScale:q})})}function b(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function a(a,b){return a.map(function(a){var d=b.key,e=b.scale,f=b.sourceIndex,g=b.view,h=b.zoomScale,k=a.extent,l=a.location,n=a.address;
a=new p({geometry:l,attributes:a.attributes});e=c.createExtentFromGeometry(k||l,g,e);g=h?c.scaleExtent(e,g,h):e;l=l?l.x+","+l.y:"";return{extent:g,feature:a,key:d,name:n||l,sourceIndex:f}})}Object.defineProperty(g,"__esModule",{value:!0});g.getResults=function(a){return a.location?f(a):r(a)};g.getSuggestions=function(a){var c=a.source,d=a.spatialReference,f=a.view,g=a.suggestTerm,m=a.maxSuggestions,p=a.sourceIndex;a={};var q=c.locator,r=k(c,f);if(!q)return n.resolve();c.categories&&(a.categories=
c.categories);q.outSpatialReference=d;if(d=f&&f.get("extent.center"))a.location=d;g=g.trim();if(!g)return n.resolve();d=c.prefix;f=c.suffix;a.text=""+(void 0===d?"":d)+g+(void 0===f?"":f);r&&(a.searchExtent=e.unwrap(r));a.maxSuggestions=m;c.countryCode&&(a.countryCode=c.countryCode);return q.suggestLocations(a).then(function(a){return b(a,p)})};g.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):
!1}})},"*now":function(q){q(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search dojo/regexp ../intl ../core/events ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(q,g,p,e,n,c,f,k,r,b,a,d,h,l,t,u,m){var x=/<[a-z/][\s\S]*>/i;return function(g){function l(b){var c=g.call(this)||this;
c._handles=new a;c._inputNode=null;c._sourceMenuButtonNode=null;c._sourceListNode=null;c._suggestionListNode=null;c._searchResultRenderer=new t;c._suggestPromise=null;c._relatedTarget=null;c.activeMenu="none";c.activeSource=null;c.activeSourceIndex=null;c.allPlaceholder=null;c.allSources=null;c.autoNavigate=null;c.autoSelect=null;c.defaultSources=null;c.goToOverride=null;c.iconClass="esri-icon-search";c.includeDefaultSources=null;c.label=f.widgetLabel;c.locationEnabled=null;c.maxResults=null;c.maxSuggestions=
null;c.minSuggestCharacters=null;c.popupEnabled=null;c.popupTemplate=null;c.portal=null;c.resultGraphic=null;c.resultGraphicEnabled=null;c.results=null;c.searchAllEnabled=null;c.searchTerm=null;c.selectedResult=null;c.sources=null;c.suggestions=null;c.suggestionsEnabled=null;c.view=null;c.viewModel=new u;c.own(d.watch(c,"searchTerm",function(a){if(a&&"warning"===c.activeMenu||!a&&!c.get("viewModel.selectedSuggestion.location"))c.activeMenu="none"}),d.on(c,"viewModel.allSources","change",function(){return c._watchSourceChanges()}),
d.init(c,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===c.get("viewModel.popupTemplate.content")&&(c.viewModel.popupTemplate.content=c._renderSearchResultsContent.bind(c))}));return c}p(l,g);l.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};l.prototype.clear=function(){};
l.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};l.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};l.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();return this.viewModel.search(a).catch(function(a){b.activeMenu="none";return a}).then(function(a){b.activeMenu=a.numResults?"none":"warning";return a})};l.prototype.suggest=
function(a){var b=this;this._cancelSuggest();var c=this.viewModel.suggest(a).then(function(a){if(b._suggestPromise===c)return b._suggestPromise=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestPromise===c)return b._suggestPromise=null});return this._suggestPromise=c};l.prototype.render=function(){var a=this,b,d,e=this.viewModel,g=e.activeSourceIndex,h=e.suggestions,k=e.maxInputLength,l=e.placeholder,n=e.searchTerm,p=e.searchAllEnabled,q=e.allSources,
t=this._getSourceName(g),v=(""+n).trim(),x=this.activeMenu,G=this.id,N=this.viewModel.state,L=this.id+"-suggest-menu",k=m.tsx("input",{bind:this,placeholder:l,"aria-label":f.searchButtonTitle,maxlength:k,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:n,"aria-haspopup":"true","aria-owns":L,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:m.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:n?"":l}),k=m.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},k),l=n?m.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:f.clearButtonTitle,onfocus:this._clearButtonFocus,
onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,Q=this.locationEnabled&&!v?m.tsx("ul",{key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},m.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,
role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",f.useCurrentLocation)):null,M=1<q.length&&g===u.ALL_INDEX,g=h?h.map(function(b,c){var d=b.sourceIndex,e=b.results.length;c=e&&M?a._getSuggestionHeaderNode(d):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c,d)});b=e?m.tsx("ul",{key:"esri-search__suggestion-list-"+d,class:a.classes("esri-menu__list","esri-search__suggestions-list")},
b):null;return[c,b]}):null,L=m.tsx("div",{id:L,"aria-expanded":"suggestion"===x,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:m.storeNode,"data-node-ref":"_suggestionListNode"},Q,g),L=m.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},k,L,l),g=m.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:f.searchButtonTitle,class:this.classes("esri-search__submit-button",
"esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),m.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle)),n=v?r.substitute(f.noResultsFoundForValue,{value:'"'+n+'"'}):f.noResultsFound,n=e.get("selectedSuggestion.location")||v?m.tsx("div",{key:"esri-search__no_results"},m.tsx("div",{class:"esri-search__warning-header"},f.noResults),m.tsx("div",
{class:"esri-search__warning-text"},n)):null,e=e.get("selectedSuggestion.location")||v?null:m.tsx("div",{key:"esri-search__empty-search"},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),m.tsx("span",{class:"esri-search__no-value-text"},f.emptyValue)),e=m.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},m.tsx("div",{class:"esri-search__warning-body"},n,e)),v=1<q.length,q=q&&q.toArray(),p=p?this._getSourceNode(u.ALL_INDEX):
null,G=G+"-source-menu",t=v?m.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:f.searchIn,"aria-haspopup":"true","aria-expanded":"source"===x,"aria-controls":G,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:m.storeNode,"data-node-ref":"_sourceMenuButtonNode"},
m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),m.tsx("span",{class:"esri-search__source-name"},t)):null,p=v?m.tsx("ul",{bind:this,afterCreate:m.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},p,q.map(function(b,c){return a._getSourceNode(c)})):null,G=m.tsx("div",{id:G,key:"esri-search__source-menu",
class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},p),x=(b={},b["esri-search--multiple-sources"]=v,b["esri-search--loading"]="loading"===N,b["esri-search--searching"]="searching"===N,b["esri-search--warning"]="warning"===x,b["esri-search--sources"]="source"===x,b["esri-search--show-suggestions"]="suggestion"===x,b);b=(d={},d["esri-disabled"]="disabled"===N,d);d="loading"===N?m.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},m.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),m.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle),m.tsx("span",{class:"esri-widget__loader-text"},c.loading)):m.tsx("div",{role:"presentation",class:this.classes(x,"esri-search__container"),key:"base-container"},t,G,L,g,e);return m.tsx("div",{class:this.classes("esri-search esri-widget",b)},d)};l.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(d.watch(c,
"name",function(){return a.scheduleRender()}),"sources")})};l.prototype._handleSourceMenuButtonKeydown=function(a){var c=b.eventKey(a);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(a.preventDefault(),a.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(a)};l.prototype._handleSourcesMenuToggleClick=function(a){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(a="End"===b.eventKey(a)?c[c.length-1]:c[0])&&a.focus()};l.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};l.prototype._handleSearchButtonClick=function(){this.search()};l.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};l.prototype._handleUseCurrentLocationClick=function(){this._focus("none");this.viewModel.searchNearby()};l.prototype._handleSourceClick=
function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};l.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};l.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};l.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};l.prototype._clearButtonFocus=function(){this.activeMenu="none"};l.prototype._removeActiveMenu=
function(a,b){a&&b&&b.contains(a)||(this.activeMenu="none")};l.prototype._cancelSuggest=function(){this._suggestPromise=null};l.prototype._handleInputKeydown=function(a){var c=b.eventKey(a);("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c)&&this._cancelSuggest()};l.prototype._handleInputKeyup=function(a){var c=b.eventKey(a),d=a.ctrlKey||a.metaKey||"Copy"===c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,e=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;
d||("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==c&&"ArrowDown"!==c||!e?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),(a=e["ArrowUp"===c?e.length-1:0])&&a.focus()))};l.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};l.prototype._handleInputClick=function(a){this.activeMenu="suggestion"};
l.prototype._handleInputPaste=function(a){var b=this.get("viewModel.searchTerm");a=a.target;b!==a.value&&(this.viewModel.searchTerm=a.value);b&&this.suggest()};l.prototype._handleSourceMenuButtonKeyup=function(a){var c=b.eventKey(a);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(c=a["ArrowUp"===c||"End"===c?a.length-1:0])&&c.focus()};l.prototype._handleSourceKeyup=function(a){var c=
a.target,d=this._sourceListNode?n.from(this._sourceListNode.getElementsByTagName("li")):null,e=b.eventKey(a);if("Escape"===e)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(d){c=d.indexOf(c);if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)a.stopPropagation(),a.preventDefault();"Home"===e?(d=d[0])&&d.focus():"End"===e?(d=d[d.length-1])&&d.focus():"ArrowUp"===e?(a=c-1,(d=0>a?this._sourceMenuButtonNode:d[a])&&d.focus()):"ArrowDown"===e&&(a=c+1,(d=a>=
d.length?this._sourceMenuButtonNode:d[a])&&d.focus())}};l.prototype._handleSuggestionKeyup=function(a){var c=a.target,d=this._suggestionListNode?n.from(this._suggestionListNode.getElementsByTagName("li")):null,c=d.indexOf(c),e=b.eventKey(a);this._cancelSuggest();if("Backspace"===e||"Delete"===e)this._focus();else if("Escape"===e)this._focus("none");else if(d){if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)a.stopPropagation(),a.preventDefault();"Home"===e&&(a=d[0])&&a.focus();"End"===e&&
(a=d[d.length-1])&&a.focus();"ArrowUp"===e?(--c,(d=0>c?d[d.length-1]:d[c])&&d.focus()):"ArrowDown"===e&&(c+=1,(d=c>=d.length?d[0]:d[c])&&d.focus())}};l.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};l.prototype._formSubmit=function(a){a.preventDefault();this.search()};l.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);return a===u.ALL_INDEX?f.all:b?b.name||f.untitledSource:f.untitledSource};l.prototype._getSuggestionHeaderNode=function(a){var b=
this._getSourceName(a);return m.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},b)};l.prototype._splitResult=function(a,b){b=k.escapeString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};l.prototype._getSuggestionNode=function(a,b,c){if(c=this.viewModel.searchTerm){var d=a.text||f.untitledResult,e=[];if(x.test(d))e.push(m.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&
(a.toLowerCase()===g?e.push(m.tsx("strong",{key:b},a)):e.push(a))})}return m.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},e)}};l.prototype._getSourceNode=function(a){var b,c=(b={},b["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,b);return m.tsx("li",{bind:this,key:"esri-search__source-"+
a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};l.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};e([h.property(),m.renderable()],l.prototype,"activeMenu",void 0);e([h.aliasOf("viewModel.activeSource"),
m.renderable()],l.prototype,"activeSource",void 0);e([h.aliasOf("viewModel.activeSourceIndex"),m.renderable()],l.prototype,"activeSourceIndex",void 0);e([h.aliasOf("viewModel.allPlaceholder"),m.renderable()],l.prototype,"allPlaceholder",void 0);e([h.aliasOf("viewModel.allSources")],l.prototype,"allSources",void 0);e([h.aliasOf("viewModel.autoNavigate")],l.prototype,"autoNavigate",void 0);e([h.aliasOf("viewModel.autoSelect")],l.prototype,"autoSelect",void 0);e([h.aliasOf("viewModel.defaultSources")],
l.prototype,"defaultSources",void 0);e([h.aliasOf("viewModel.goToOverride")],l.prototype,"goToOverride",void 0);e([h.property()],l.prototype,"iconClass",void 0);e([h.aliasOf("viewModel.includeDefaultSources")],l.prototype,"includeDefaultSources",void 0);e([h.property()],l.prototype,"label",void 0);e([m.renderable(),h.aliasOf("viewModel.locationEnabled")],l.prototype,"locationEnabled",void 0);e([h.aliasOf("viewModel.maxResults")],l.prototype,"maxResults",void 0);e([h.aliasOf("viewModel.maxSuggestions")],
l.prototype,"maxSuggestions",void 0);e([h.aliasOf("viewModel.minSuggestCharacters")],l.prototype,"minSuggestCharacters",void 0);e([h.aliasOf("viewModel.popupEnabled")],l.prototype,"popupEnabled",void 0);e([h.aliasOf("viewModel.popupTemplate")],l.prototype,"popupTemplate",void 0);e([h.aliasOf("viewModel.portal")],l.prototype,"portal",void 0);e([h.aliasOf("viewModel.resultGraphic")],l.prototype,"resultGraphic",void 0);e([h.aliasOf("viewModel.resultGraphicEnabled")],l.prototype,"resultGraphicEnabled",
void 0);e([h.aliasOf("viewModel.results"),m.renderable()],l.prototype,"results",void 0);e([h.aliasOf("viewModel.searchAllEnabled"),m.renderable()],l.prototype,"searchAllEnabled",void 0);e([h.aliasOf("viewModel.searchTerm"),m.renderable()],l.prototype,"searchTerm",void 0);e([h.aliasOf("viewModel.selectedResult")],l.prototype,"selectedResult",void 0);e([h.aliasOf("viewModel.sources")],l.prototype,"sources",void 0);e([h.aliasOf("viewModel.suggestions"),m.renderable()],l.prototype,"suggestions",void 0);
e([h.aliasOf("viewModel.suggestionsEnabled")],l.prototype,"suggestionsEnabled",void 0);e([h.aliasOf("viewModel.view"),m.renderable()],l.prototype,"view",void 0);e([m.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),h.property({type:u}),m.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],l.prototype,"viewModel",void 0);e([h.aliasOf("viewModel.clear")],l.prototype,"clear",
null);e([m.accessibleHandler()],l.prototype,"_handleSourcesMenuToggleClick",null);e([m.accessibleHandler()],l.prototype,"_handleClearButtonClick",null);e([m.accessibleHandler()],l.prototype,"_handleSearchButtonClick",null);e([m.accessibleHandler()],l.prototype,"_handleSuggestionClick",null);e([m.accessibleHandler()],l.prototype,"_handleUseCurrentLocationClick",null);e([m.accessibleHandler()],l.prototype,"_handleSourceClick",null);return l=e([h.subclass("esri.widgets.Search")],l)}(h.declared(l))});