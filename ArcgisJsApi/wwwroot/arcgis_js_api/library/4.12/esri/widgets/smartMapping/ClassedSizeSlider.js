// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./ClassedSizeSlider/nls/ClassedSizeSlider ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/support/ClassBreakInfo ./SmartMappingSliderBase ./ClassedSizeSlider/ClassedSizeSliderViewModel ./../support/widget".split(" "),function(v,w,x,p,f,q,n,d,r,t,u,e){return function(h){function b(a){a=h.call(this)||this;a._backgroundFillColor="#e0e0e0";
a._fillColor="#959595";a._rampNode=null;a.breaks=null;a.label=q.widgetLabel;a.viewModel=new u;return a}p(b,h);g=b;b.fromRendererResult=function(a,c){a=a.renderer.classBreakInfos.map(function(a){var c=a.symbol,k;switch(c.type){case "simple-line":k=c.width;break;case "simple-marker":k=c.size;break;case "picture-marker":k=c.size}return{min:a.minValue,max:a.maxValue,size:k}});return new g({breaks:a,histogramConfig:{bins:c?c.bins:[]}})};b.prototype.updateClassBreakInfos=function(a){var c=this.breaks;if(c.length!==
a.length)console.error("Number of input breakInfos must match number of slider breaks: "+c.length);else return a.map(function(a,b){a=a.symbol;switch(a.type){case "simple-line":a.width=c[b].size;break;case "simple-marker":a.size=c[b].size;break;case "picture-marker":a.size=c[b].size}return new r.default({minValue:c[b].min,maxValue:c[b].max,symbol:a})})};b.prototype.updateFromRendererResult=function(a,c){a=a.renderer.classBreakInfos.map(function(a){var c=a.symbol,b;switch(c.type){case "simple-line":b=
c.width;break;case "simple-marker":b=c.size;break;case "picture-marker":b=c.size}return{min:a.minValue,max:a.maxValue,size:b}});this.set({breaks:a,histogramConfig:{bins:c?c.bins:[]}})};b.prototype.render=function(){var a=this.state,c=this.label,b=this.classes("esri-classed-size-slider","esri-widget","esri-widget--panel","disabled"===a?"esri-disabled":null);return e.tsx("div",{"aria-label":c,class:b},"disabled"!==a?this.renderContent():null)};b.prototype.renderContent=function(){this.slider.extraNodes=
[this.renderRamp(),this.renderHistogram()];return e.tsx("div",{class:"esri-classed-size-slider__slider-container"},this.slider.render())};b.prototype.renderRamp=function(){return e.tsx("div",{afterCreate:e.storeNode,bind:this,class:"esri-classed-size-slider__ramp","data-node-ref":"_rampNode"},this.renderSVG())};b.prototype.renderSVG=function(){if(this._rampNode)return e.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},e.tsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,height:"100%",width:"100%"}),
this.renderPath())};b.prototype.renderPath=function(){var a=this._rampNode,c=a.offsetHeight,b=void 0===c?0:c,a=a.offsetWidth,d=void 0===a?0:a;if(n.isSome(b)&&n.isSome(d)){var f=this.min,c=this.breaks,a=this._fillColor,g=this.max-f,h=d/c.length,c=c.map(function(a){return[b-Math.round((a.min-f)/g*b),b-Math.round((a.max-f)/g*b)]});c.reverse();var l=d,m="M"+l+" 0";c.forEach(function(a,b){m+="L"+l+" "+a[0];l=d-h*(b+1);m+="L"+l+" "+a[0]});m+="L1 "+b+" L0 "+b+" L0 0 Z";return e.tsx("path",{d:m,fill:a})}};
b.prototype.renderHistogram=function(){return this.histogramConfig?e.tsx("div",{class:"esri-classed-size-slider__histogram-container"},this.histogram.render()):null};var g;f([d.aliasOf("viewModel.breaks")],b.prototype,"breaks",void 0);f([d.property()],b.prototype,"label",void 0);f([d.property(),e.renderable(["viewModel.hasTimeData","viewModel.labelFormatFunction","viewModel.max","viewModel.min","viewModel.values"])],b.prototype,"viewModel",void 0);return b=g=f([d.subclass("esri.widgets.smartMapping.ClassedSizeSlider")],
b)}(d.declared(t.SmartMappingSliderBase))});