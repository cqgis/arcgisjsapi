// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/maybe ../../../core/accessorSupport/decorators ../../../renderers/support/utils ../../Slider/SliderViewModel ../support/utils".split(" "),function(r,t,k,l,e,f,d,n,p,q){return function(h){function b(a){var c=h.call(this)||this;c.hasTimeData=!1;c.labelFormatFunction=function(a,b,d){return c.hasTimeData?q.formatDateLabel(a):c.defaultLabelFormatFunction(a)};
return c}l(b,h);Object.defineProperty(b.prototype,"state",{get:function(){var a=this.min,c=this.values;return f.isSome(this.max)&&f.isSome(a)&&1<c.length?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stops",{set:function(a){if(a&&a.length){var c=a.map(function(a){return a.value}),b=this.max,m=this.min,d={};f.isSome(m)&&c.some(function(a){return a<m})&&(d.min=Math.min.apply(Math,c));f.isSome(b)&&c.some(function(a){return a>b})&&(d.max=Math.max.apply(Math,c));
this.set(k({},d))}this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"values",{get:function(){var a=this.stops;if(!a||!a.length||2>a.length)return[];a=a.map(function(a){return a.value});return[a[0],a[a.length-1]]},enumerable:!0,configurable:!0});b.prototype.setValue=function(a,c){var b=this.min;c>this.max||c<b||(a=this._getColorStopChanges(a,c),this._updateColorStops(a),this.notifyChange("values"),this.notifyChange("labels"))};b.prototype.getColorStopInfo=function(){var a=
this.min,b=this.max,d=this.stops;return d&&d.length?d.map(function(c){return{color:c.color,offset:(b-c.value)/(b-a)}}):[]};b.prototype._getColorStopChanges=function(a,b){var c=this.max,d=this.min,e=this.stops,f=this.values,h=0===a?0:this.stops.length-1,d=0===a?d:f[a-1];a=a===f.length-1?c:f[a+1];var g=e.map(function(a){return a.value});g[h]=Math.max(Math.min(b,a),d);var k=g[g.length-1]-g[0],l=e.length-1;return g.map(function(a,b){return{index:b,value:g[0]+b*k/l}})};b.prototype._updateColorStops=function(a){n.updateColorStops({changes:a,
stops:this.stops,isDate:this.hasTimeData})};e([d.property()],b.prototype,"hasTimeData",void 0);e([d.property()],b.prototype,"labelFormatFunction",void 0);e([d.property({dependsOn:["max","min","values"],readOnly:!0})],b.prototype,"state",null);e([d.property()],b.prototype,"stops",null);e([d.property({dependsOn:["stops"],readOnly:!0})],b.prototype,"values",null);return b=e([d.subclass("esri.widgets.smartMapping.ColorSizeSlider.ColorSizeSliderViewModel")],b)}(d.declared(p))});