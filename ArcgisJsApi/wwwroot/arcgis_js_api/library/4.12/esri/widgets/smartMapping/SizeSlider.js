// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./SizeSlider/nls/SizeSlider ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/visualVariables/SizeVariable ../../renderers/visualVariables/support/SizeStop ./SmartMappingSliderBase ./SizeSlider/SizeSliderViewModel ./support/utils ./../support/widget".split(" "),function(y,z,A,u,k,v,p,l,q,r,w,x,m,e){return function(t){function b(a){a=
t.call(this)||this;a._backgroundFillColor="#e0e0e0";a._fillColor="#959595";a._maxRampFillWidth=1;a._minRampFillWidth=.2;a._rampNode=null;a.label=v.widgetLabel;a.stops=null;a.viewModel=new x;return a}u(b,t);n=b;b.fromRendererResult=function(a,f){var c=a.statistics,b=c.avg,g=c.max,d=c.min,c=c.stddev;a=a.visualVariables[0];var h=m.getSizesFromVariable(a);return new n({max:g,min:d,stops:[{value:a.minDataValue,size:h[1]},{value:a.maxDataValue,size:h[0]}],histogramConfig:{average:b,standardDeviation:c,
bins:f?f.bins:[]}})};b.prototype.updateFromRendererResult=function(a,f){var c=a.statistics,b=c.avg,g=c.max,d=c.min,c=c.stddev;a=a.visualVariables[0];var h=m.getSizesFromVariable(a);this.set({max:g,min:d,stops:[{value:a.minDataValue,size:h[1]},{value:a.maxDataValue,size:h[0]}],histogramConfig:{average:b,standardDeviation:c,bins:f?f.bins:[]}})};b.prototype.updateVisualVariable=function(a){var f=a.clone(),c=this.stops;if(!a||!c)return null;if(f.stops)return f.stops=c,f;a=c[0];var c=c[c.length-1],b=f.maxSize,
g=f.minSize;if(b instanceof q){var d=b.stops,h=c.size/d[0].size,d=d.map(function(a){a.size*=h;return a});b.stops=d}else b=c.size;if(g instanceof q){var d=g.stops,e=a.size/d[0].size,d=d.map(function(a){a.size*=e;return a});g.stops=d}else g=a.size;f.set({maxDataValue:c.value,minDataValue:a.value,maxSize:b,minSize:g});return f};b.prototype.updateFromVisualVariable=function(a){if(a){var b=a.maxDataValue,c=a.minDataValue,e=a.stops;e?this.stops=e:(a=m.getSizesFromVariable(a),e=a[0],this.stops=[new r({value:c,
size:a[1]}),new r({value:b,size:e})])}};b.prototype.render=function(){var a=this.viewModel.state,b=this.label,c=this.classes("esri-size-slider","esri-widget","esri-widget--panel","disabled"===a?"esri-disabled":null);return e.tsx("div",{"aria-label":b,class:c},"disabled"===a?null:this.renderContent())};b.prototype.renderContent=function(){this.slider.extraNodes=[this.renderRamp(),this.renderHistogram()];return e.tsx("div",{class:"esri-size-slider__slider-container"},this.slider.render())};b.prototype.renderRamp=
function(){return e.tsx("div",{afterCreate:e.storeNode,bind:this,class:"esri-size-slider__ramp","data-node-ref":"_rampNode"},this.renderSVG())};b.prototype.renderSVG=function(){if(this._rampNode)return e.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},e.tsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,height:"100%",width:"100%"}),this.renderPath())};b.prototype.renderPath=function(){var a=this._rampNode,b=a.offsetHeight,b=void 0===b?0:b,a=a.offsetWidth,c=void 0===a?0:a;if(p.isSome(b)&&p.isSome(c)){var l=
this.max,g=this.min,d=this.stops,h=this.values,a=this._fillColor,k=[this._maxRampFillWidth,this._minRampFillWidth];d[0].size<d[d.length-1].size&&k.reverse();b=m.getPathForSizeStops({bottomValue:h[0],bottomWidth:k[0],max:l,min:g,pathHeight:b,pathWidth:c,topValue:h[1],topWidth:k[1]});return e.tsx("path",{d:b,fill:a})}};b.prototype.renderHistogram=function(){return this.histogramConfig?e.tsx("div",{class:"esri-size-slider__histogram-container"},this.histogram.render()):null};var n;k([l.property()],b.prototype,
"label",void 0);k([l.aliasOf("viewModel.stops")],b.prototype,"stops",void 0);k([l.property(),e.renderable("viewModel.hasTimeData viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values".split(" "))],b.prototype,"viewModel",void 0);return b=n=k([l.subclass("esri.widgets.smartMapping.SizeSlider")],b)}(l.declared(w.SmartMappingSliderBase))});