// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./ColorSizeSlider/nls/ColorSizeSlider ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/visualVariables/support/ColorSizeStop ../../renderers/visualVariables/support/ColorStop ../../renderers/visualVariables/support/SizeStop ./SmartMappingSliderBase ./ColorSizeSlider/ColorSizeSliderViewModel ./support/utils ./../support/widget".split(" "),
function(z,A,B,r,g,t,n,h,p,u,v,w,x,y,c){return function(q){function b(a){a=q.call(this)||this;a._bgFillId=null;a._backgroundFillColor="#e0e0e0";a._minRampFillWidth=.2;a._rampFillId=null;a._rampNode=null;a._maxRampFillWidth=1;a.label=t.widgetLabel;a.stops=null;a.viewModel=new x;a._bgFillId=a.id+"-bg-fill";a._rampFillId=a.id+"-linear-gradient";return a}r(b,q);k=b;b.fromRendererResult=function(a,e){var f=a.color.visualVariable.stops,d=a.statistics,b=d.avg,c=d.max,m=d.min,d=d.stddev,l=a.size.visualVariables[0];
a=f.map(function(a,e){return new p({color:a.color,label:a.label,value:a.value,size:0===e?l.minSize:e===f.length-1?l.maxSize:null})});return new k({max:c,min:m,stops:a,histogramConfig:{average:b,standardDeviation:d,bins:e?e.bins:[]}})};b.prototype.updateFromRendererResult=function(a,e){var f=a.color.visualVariable.stops,d=a.statistics,b=d.avg,c=d.max,m=d.min,d=d.stddev,l=a.size.visualVariables[0];a=f.map(function(a,e){return new p({color:a.color,label:a.label,value:a.value,size:0===e?l.minSize:e===
f.length-1?l.maxSize:null})});this.set({max:c,min:m,stops:a,histogramConfig:{average:b,standardDeviation:d,bins:e?e.bins:[]}})};b.prototype.updateVisualVariables=function(a){var e=this;return a.map(function(a,b){b=a.clone();if("size"===a.type)if(n.isSome(a.minSize)&&n.isSome(a.maxSize)){var c=e.stops;a=c[0];c=c[c.length-1];b.set({maxDataValue:c.value,minDataValue:a.value,maxSize:c.size,minSize:a.size})}else a.stops&&b.set({stops:e.stops.map(function(a){return new v({label:a.label,size:a.size,value:a.value})})});
else"color"===a.type&&b.set({stops:e.stops.map(function(a){return new u({color:a.color,label:a.label,value:a.value})})});return b})};b.prototype.render=function(){var a,b=this.label,f="disabled"===this.state,d=this.classes("esri-color-size-slider","esri-widget",(a={},a["esri-disabled"]=f,a));return c.tsx("div",{"aria-label":b,class:d},f?null:this.renderContent())};b.prototype.renderContent=function(){this.slider.extraNodes=[this.renderRamp(),this.renderHistogram()];return c.tsx("div",{class:"esri-color-size-slider__slider-container"},
this.slider.render())};b.prototype.renderRamp=function(){return c.tsx("div",{afterCreate:c.storeNode,bind:this,class:"esri-color-size-slider__ramp","data-node-ref":"_rampNode"},this.renderSVG())};b.prototype.renderSVG=function(){if(this._rampNode)return c.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},c.tsx("defs",null,this.renderRampFillDefinition(),this.renderBackgroundFillDefinition()),c.tsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,height:"100%",width:"100%"}),this.renderPaths())};b.prototype.renderPaths=
function(){var a=this._rampNode,b=a.offsetHeight,b=void 0===b?0:b,a=a.offsetWidth,f=void 0===a?0:a;if(n.isSome(b)&&n.isSome(f)){var d=this.max,h=this.min,g=this.stops,m=this.values,a=this._bgFillId,l=this._rampFillId,k=[this._maxRampFillWidth,this._minRampFillWidth];g[0].size<g[g.length-1].size&&k.reverse();b=y.getPathForSizeStops({bottomValue:m[0],bottomWidth:k[0],max:d,min:h,pathHeight:b,pathWidth:f,topValue:m[1],topWidth:k[1]});return[c.tsx("path",{d:b,fill:"url(#"+a+")"}),c.tsx("path",{d:b,fill:"url(#"+
l+")"})]}};b.prototype.renderHistogram=function(){return this.histogramConfig?c.tsx("div",{class:"esri-color-size-slider__histogram-container"},this.histogram.render()):null};b.prototype.renderRampFillDefinition=function(){return c.tsx("linearGradient",{id:this._rampFillId,x1:"0",x2:"0",y1:"0",y2:"1"},this.renderRampFillStops())};b.prototype.renderBackgroundFillDefinition=function(){return c.tsx("pattern",{id:this._bgFillId,patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},c.tsx("image",
{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))};
b.prototype.renderRampFillStops=function(){var a=this;return this.viewModel.getColorStopInfo().reverse().map(function(b,c){return a.renderStop(b,c)})};b.prototype.renderStop=function(a,b){a=this.getPropsForStop(a);return c.tsx("stop",{key:b+"-stop",offset:a.offset,"stop-color":a.color})};var k;g([h.property()],b.prototype,"label",void 0);g([h.aliasOf("viewModel.stops")],b.prototype,"stops",void 0);g([h.property(),c.renderable("viewModel.hasTimeData viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values".split(" "))],
b.prototype,"viewModel",void 0);return b=k=g([h.subclass("esri.widgets.smartMapping.ColorSizeSlider")],b)}(h.declared(w.SmartMappingSliderBase))});