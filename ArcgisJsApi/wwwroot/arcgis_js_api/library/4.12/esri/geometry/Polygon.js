// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(d,F,u,h,m,v,f,w,x,g,y,z,A,B,C,D,n,r){d=function(d){function b(){for(var a=0;a<arguments.length;a++);a=d.call(this)||this;
a.rings=[];a.type="polygon";return a}u(b,d);k=b;b.createEllipse=function(a){var c=a.center.x,e=a.center.y,b=a.center.z,q=a.center.m,t=a.center.hasZ,f=a.center.hasM,E=a.longAxis,h=a.shortAxis,g=a.numberOfPoints;a=a.view;for(var d=[],m=2*Math.PI/g,n=t?3:2,p=0;p<g;p++){var l=a.toMap(v.createScreenPoint(E*Math.cos(p*m)+c,h*Math.sin(p*m)+e)),l=[l.x,l.y];t&&(l[2]=b);f&&(l[n]=q);d.push(l)}d.push(d[0]);return new k({rings:[d],spatialReference:a.spatialReference})};b.createCircle=function(a){return k.createEllipse({center:a.center,
longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};b.fromExtent=function(a){var c=a.clone().normalize();a=a.spatialReference;var e=!1,b=!1;c.map(function(a){a.hasZ&&(e=!0);a.hasM&&(b=!0)});c={rings:c.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(e&&a.hasZ)for(var q=a.zmin+.5*(a.zmax-a.zmin),d=0;d<c.length;d++)c[d].push(q);if(b&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),d=0;d<c.length;d++)c[d].push(a);return c}),spatialReference:a};
e&&(c.hasZ=!0);b&&(c.hasM=!0);return new k(c)};b.prototype.normalizeCtorArgs=function(a,c){var e=null,b,d,f=null;a&&!Array.isArray(a)?(e=a.rings?a.rings:null,c||(a.spatialReference?c=a.spatialReference:a.rings||(c=a)),b=a.hasZ,d=a.hasM):e=a;e=e||[];c=c||y.WGS84;e.length&&e[0]&&null!=e[0][0]&&"number"===typeof e[0][0]&&(e=[e]);if(f=e[0]&&e[0][0])void 0===b&&void 0===d?(b=2<f.length,d=!1):void 0===b?b=!d&&3<f.length:void 0===d&&(d=!b&&3<f.length);return{rings:e,spatialReference:c,hasZ:b,hasM:d}};Object.defineProperty(b.prototype,
"centroid",{get:function(){var a=z.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var c=new g;c.x=a[0];c.y=a[1];c.spatialReference=this.spatialReference;this.hasZ&&(c.z=a[2]);return c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.spatialReference,c=C.getPolygonExtent(this);if(!c)return null;c=new w(c);c.spatialReference=a;return c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isSelfIntersecting",
{get:function(){return D.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});b.prototype.writePaths=function(a,c,e,b){c.rings=m.clone(this.rings)};b.prototype.addRing=function(a){if(a){this.clearCache();var c=this.rings,e=c.length;if(Array.isArray(a[0]))c[e]=a.concat();else{for(var b=[],d=0,f=a.length;d<f;d++)b[d]=a[d].toArray();c[e]=b}return this}};b.prototype.clone=function(){var a=new k;a.spatialReference=this.spatialReference;a.rings=m.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};b.prototype.contains=function(a){if(!a)return!1;n.canProject(a,this.spatialReference)&&(a=n.project(a,this.spatialReference));return A.polygonContainsPoint(this,a)};b.prototype.isClockwise=function(a){var c=this;a=Array.isArray(a[0])?a:a.map(function(a){return c.hasZ?c.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return B.isClockwise(a,this.hasM,this.hasZ)};b.prototype.getPoint=function(a,c){if(!this._validateInputs(a,c))return null;a=this.rings[a][c];c=this.hasZ;var b=this.hasM;return c&&
!b?new g(a[0],a[1],a[2],void 0,this.spatialReference):b&&!c?new g(a[0],a[1],void 0,a[2],this.spatialReference):c&&b?new g(a[0],a[1],a[2],a[3],this.spatialReference):new g(a[0],a[1],this.spatialReference)};b.prototype.insertPoint=function(a,c,b){if(!this._validateInputs(a,c,!0))return this;this.clearCache();r.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.rings[a].splice(c,0,b);return this};b.prototype.removePoint=function(a,c){if(!this._validateInputs(a,c))return null;this.clearCache();
return new g(this.rings[a].splice(c,1)[0],this.spatialReference)};b.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var c=this.spatialReference;return a.map(function(a){return new g(a,c)})};b.prototype.setPoint=function(a,c,b){if(!this._validateInputs(a,c))return this;this.clearCache();r.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.rings[a][c]=b;return this};b.prototype._validateInputs=function(a,
c,b){void 0===b&&(b=!1);return null==a||0>a||a>=this.rings.length||null!=c&&(a=this.rings[a],b&&(0>c||c>a.length)||!b&&(0>c||c>=a.length))?!1:!0};b.prototype.toJSON=function(a){return this.write(null,a)};var k;h([f.property({dependsOn:["hasM","hasZ","rings"]})],b.prototype,"cache",void 0);h([f.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"centroid",null);h([f.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);h([f.property({dependsOn:["cache"],readOnly:!0})],b.prototype,
"isSelfIntersecting",null);h([f.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"rings",void 0);h([f.writer("rings")],b.prototype,"writePaths",null);return b=k=h([f.subclass("esri.geometry.Polygon")],b)}(f.declared(x));d.prototype.toJSON.isDefaultToJSON=!0;return d});