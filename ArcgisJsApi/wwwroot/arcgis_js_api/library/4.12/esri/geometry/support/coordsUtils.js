// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define(["require","exports","./spatialReferenceUtils"],function(t,h,r){function n(a,b){var e=b[0]-a[0],c=b[1]-a[1];return 2<a.length&&2<b.length?(a=a[2]-b[2],Math.sqrt(e*e+c*c+a*a)):Math.sqrt(e*e+c*c)}function p(a,b,e){var c=a[0]+e*(b[0]-a[0]),f=a[1]+e*(b[1]-a[1]);return 2<a.length&&2<b.length?[c,f,a[2]+e*(b[2]-a[2])]:[c,f]}function q(a,b){if(b=r.getInfo(b)){var e=b.valid[0],c=b.valid[1],f=c-e;b=function(a){var g=Infinity,b=-Infinity;a.forEach(function(a){for(var d=a[0];d<e;)d+=f;for(;d>c;)d-=f;g=
Math.min(g,d);b=Math.max(b,d);a[0]=d});var h=b-g;f-h<h&&a.forEach(function(a){0>a[0]&&(a[0]+=f)})};for(var g=0;g<a.length;g++)b(a[g])}}Object.defineProperty(h,"__esModule",{value:!0});h.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var b=a.hasZ,e=a.hasM;if("point"===a.type)return e&&b?[a.x,a.y,a.z,a.m]:b?[a.x,a.y,a.z]:e?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);
if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var c=!1,f=!1;a.forEach(function(a){a.hasZ&&(c=!0);a.hasM&&(f=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var e=.5*(a.zmax-a.zmin),d=0;d<b.length;d++)b[d].push(e);if(f&&a.hasM)for(a=.5*(a.mmax-a.mmin),d=0;d<b.length;d++)b[d].push(a);return b})}return null};h.getLength=n;h.getMidpoint=function(a,b){return p(a,b,.5)};h.getPathLength=function(a){for(var b=
a.length,e=0,c=0;c<b-1;++c)e+=n(a[c],a[c+1]);return e};h.getPointOnPath=function(a,b){if(0>=b)return a[0];for(var e=a.length,c=0,f=0;f<e-1;++f){var g=n(a[f],a[f+1]);if(b-c<g)return p(a[f],a[f+1],(b-c)/g);c+=g}return a[e-1]};h.isClockwise=function(a,b,e){for(var c=a.length,f=0,g=0,h=0,m=0;m<c;m++){var d=a[m],k=a[(m+1)%c],l=2,f=f+(d[0]*k[1]-k[0]*d[1]);2<d.length&&2<k.length&&e&&(g+=d[0]*k[2]-k[0]*d[2],l=3);d.length>l&&k.length>l&&b&&(h+=d[0]*k[l]-k[0]*d[l])}return 0>=f&&0>=g&&0>=h};h.getRingArea=function(a){for(var b=
a.length,e=0,c=0;c<b;c++)var f=a[c],g=a[(c+1)%b],e=e+(f[0]*g[1]-g[0]*f[1]);return e};h.unnormalizeGeometryOnDatelineCrossing=function(a){if("polygon"!==a.type&&"polyline"!==a.type)return a;q("polygon"===a.type?a.rings:a.paths,a.spatialReference);return a};h.unnormalizeVerticesOnDatelineCrossing=q;h.computeUnnormalizedVertexPositionsOnDateLineCrossing=function(a,b,e,c){var f=Infinity,g=-Infinity;a.forEach(function(a){for(var d=a.pos[0];d<b;)d+=c;for(;d>e;)d-=c;f=Math.min(f,d);g=Math.max(g,d);a.unnormalizedPos[0]=
d;a.unnormalizedPos[1]=a.pos[1]});var h=g-f;c-h<h&&a.forEach(function(a){0>a.unnormalizedPos[0]&&(a.unnormalizedPos[0]+=c)})}});