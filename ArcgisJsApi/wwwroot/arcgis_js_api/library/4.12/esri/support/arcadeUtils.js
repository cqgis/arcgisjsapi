// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),function(H,f,t,n,l,h,q,d){function b(a,b){if(null===c)throw Error("Async Arcade must be enabled for this script");return q("csp-restrictions")||!1===B?function(b){return c.executeScript(a,b)}:t.compileScript(a,b,!0)}function e(a,c){void 0===c&&(c=[]);return l.parseScript(a,c)}function C(a,b){if(!0===b.useAsync||!0===a.isAsync){if(null===
c)throw Error("Async Arcade must be enabled for this script");return c.executeScript(a,b)}return n.executeScript(a,b)}function g(a,c){return n.referencesMember(a,c)}function p(a,c){void 0===c&&(c=[]);void 0===a.usesGeometry&&h.findScriptDependencies(a,c);return!0===a.usesGeometry}function z(){return K?K:K=d.create(function(a,c){H(["../geometry/geometryEngine","./functions/geomsync"],function(c,b){m=!0;b.setGeometryEngine(c);a(!0)},function(a){c(a)})})}function A(){return null!==v?v:v=t.enableAsyncSupport().then(function(){return d.create(function(a,
b){H(["./arcadeAsyncRuntime"],function(m){try{c=m;m=0;for(var d=w;m<d.length;m++){var e=d[m];c.extend(e);t.extend(e,"async")}w=null;a(!0)}catch(F){b(F)}},b)})})}function x(){return c?!0:!1}function P(){return R?R:R=A().then(function(){return d.create(function(b,m){H(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(d,e,p,g,h){try{S=d,c.extend([e,p,g,h]),t.extend([e,p,g,h],"async"),a=!0,b(!0)}catch(I){m(I)}},
m)})})}function Z(a,c){void 0===c&&(c=[]);void 0===a.usesFeatureSet&&h.findScriptDependencies(a,c);return!0===a.usesFeatureSet}function ga(a,c){if(c)for(var b=0;b<c.length;b++)if(g(a,c[b]))return!0;return!1}Object.defineProperty(f,"__esModule",{value:!0});var B=function(){if(q("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(N){return!1}}(),a=!1,m=!1,c=null,w=[];f.compileScript=function(a,c){return!0===c.useAsync||!0===a.isAsync?b(a,c):q("csp-restrictions")?
function(c){return n.executeScript(a,c)}:t.compileScript(a,c)};f.extend=function(a){n.extend(a);t.extend(a,"sync");null===c?w.push(a):(t.extend(a,"async"),c.extend(a))};f.parseScript=e;f.validateScript=function(a,c,b){void 0===b&&(b="");return l.validateScript(a,c,b)};f.scriptCheck=function(a,c,b,m){void 0===m&&(m="");return l.scriptCheck(a,c,b,m)};f.parseAndExecuteScript=function(a,c,b){void 0===b&&(b=[]);a=l.parseScript(a,b);return C(a,c)};f.executeScript=C;f.referencesMember=g;f.referencesFunction=
function(a,c){return n.referencesFunction(a,c)};f.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return l.extractFieldLiterals(a,c)};f.scriptUsesGeometryEngine=p;var K=null;f.enableGeometrySupport=z;var v=null;f.enableAsyncSupport=A;f.isFeatureSetSupportEnabled=function(){return a};f.isAsyncEnabled=x;f.isGeometryEnabled=function(){return m};var R=null;f.enableFeatureSetSupport=P;f.scriptUsesFeatureSet=Z;f.scriptIsAsync=function(a,c){void 0===c&&(c=[]);void 0===a.isAsync&&h.findScriptDependencies(a,
c);return!0===a.isAsync};f.loadScriptDependencies=function(c,b,g,h){void 0===g&&(g=[]);void 0===h&&(h=!1);return d.create(function(l,C){var n="string"===typeof c?e(c):c,w=[];n&&(!1===m&&(p(n)||h)&&w.push(z()),!1===x()&&(!0===n.isAsync||b)&&w.push(A()),!1===a&&(Z(n)||ga(n,g))&&w.push(P()));w?d.all(w).then(function(){l(!0)},C):l(!0)})};f.scriptTouchesGeometry=function(a){if(p(a))return!0;a=h.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var S=null;f.featureSetUtils=
function(){return S}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(H,
f,t,n,l,h,q,d,b,e,C,g,p,z,A,x,P,Z,ga,B,a,m,c){function w(a,c,k){try{return k(a,null,c)}catch(va){throw va;}}function K(a){return a instanceof Error?x.reject(a):x.reject(Error(a))}function v(a,c){try{switch(c.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Y(a,c);case "VariableDeclaration":for(var m=[],d=0;d<c.declarations.length;d++)m.push(v(a,c.declarations[d]));return m.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return ha(a,
c);case "FunctionDeclaration":var e=c.id.name.toLowerCase(),p={isAsync:a.isAsync,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<p.depthCounter)throw Error("Exceeded maximum function depth");for(var m="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
g=0;g<c.params.length;g++){var la=c.params[g].name.toLowerCase(),ia=V(la,a);p.localScope._SymbolsMap[la]=ia;p.mangleMap[la]=ia;m+="lscope['"+ia+"']\x3darguments["+g.toString()+"];\n"}!0===a.isAsync?(m=m+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(ha(p,c.body)+"\n return lastStatement; "),m+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(m+=ha(p,c.body)+"\n return lastStatement; }, runtimeCtx))",m+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[e]?
d="gscope['"+e+"']\x3d"+m:void 0!==a.globalScope._SymbolsMap[e]?d="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+m:(ia=V(e,a),a.globalScope._SymbolsMap[e]=ia,a.mangleMap[e]=ia,d="gscope['"+ia+"']\x3d"+m);return d;case "ReturnStatement":var ka;ka=null===c.argument?"return lc.voidOperation":"return "+v(a,c.argument)+"";return ka;case "IfStatement":if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(b.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var ea=v(a,c.test),ya=k(a),h="var "+ya+" \x3d "+ea+";\n if ("+ya+" \x3d\x3d\x3d true) {\n"+N(a,c.consequent)+"\n }\n",h=null!==c.alternate?h+("else if ("+ya+"\x3d\x3d\x3dfalse)   { \n"+N(a,c.alternate)+"}\n"):h+("else if ("+ya+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return h+="else { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var l;l="AssignmentExpression"===c.expression.type?"lastStatement \x3d lc.voidOperation; "+
v(a,c.expression)+"; \n ":"lastStatement \x3d "+v(a,c.expression)+"; ";return l;case "AssignmentExpression":return S(a,c);case "UpdateExpression":return R(a,c);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":m="lastStatement \x3d lc.voidOperation; \n";null!==c.init&&(m+=v(a,c.init)+"; ");var C=k(a),n=k(a),m=m+("var "+C+" \x3d true; ")+"\n do { ";null!==c.update&&(m+=" if ("+C+"\x3d\x3d\x3dfalse) {\n "+v(a,c.update)+"  \n}\n "+C+"\x3dfalse; \n");null!==
c.test&&(m+="var "+n+" \x3d "+v(a,c.test)+"; ",m+="if ("+n+"\x3d\x3d\x3dfalse) { break; } else if ("+n+"!\x3d\x3dtrue) { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");m+=v(a,c.body);null!==c.update&&(m+="\n "+v(a,c.update));return m+("\n"+C+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var ca=k(a),w=k(a),z=k(a),f="var "+ca+" \x3d "+v(a,c.right)+";\n";"VariableDeclaration"===c.left.type&&(f+=v(a,c.left));var q=
"VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name,q=q.toLowerCase(),m="";null!==a.localScope&&(void 0!==a.localScope[q]?m="lscope['"+q+"']":void 0!==a.localScope._SymbolsMap[q]&&(m="lscope['"+a.localScope._SymbolsMap[q]+"']"));""===m&&(void 0!==a.globalScope[q]?m="gscope['"+q+"']":void 0!==a.globalScope._SymbolsMap[q]&&(m="gscope['"+a.globalScope._SymbolsMap[q]+"']"));f=f+("if ("+ca+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
ca+") || lc.isString("+ca+")) {")+("var "+w+"\x3d"+ca+".length; \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+"; "+z+"++) {\n");f+=m+"\x3d"+z+";\n";f+=v(a,c.body);f+="\n}\n";f+=" lastStatement \x3d lc.voidOperation; \n";f+=" \n}\n";f+="else if (lc.isImmutableArray("+ca+")) {";f=f+("var "+w+"\x3d"+ca+".length(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+"; "+z+"++) {\n");f+=m+"\x3d"+z+";\n";f+=v(a,c.body);f+="\n}\n";f+=" lastStatement \x3d lc.voidOperation; \n";f+=" \n}\n";f+="else if (( "+ca+" instanceof lang.Dictionary) || ( "+
ca+" instanceof lang.Feature)) {";f=f+("var "+w+"\x3d"+ca+".keys(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+w+".length; "+z+"++) {\n");f+=m+"\x3d"+w+"["+z+"];\n";f+=v(a,c.body);f+="\n}\n";f+=" lastStatement \x3d lc.voidOperation; \n";f+=" \n}\n";a.isAsync&&(f+="else if (lc.isFeatureSet("+ca+")) {",f=f+("var "+w+"\x3d"+ca+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+z+"\x3dlang. graphicToFeature( yield "+w+".next(),"+ca+"); "+z+"!\x3dnull; "+z+"\x3dlang. graphicToFeature( yield "+w+".next(),"+
ca+")) {\n")+(m+"\x3d"+z+";\n"),f+=v(a,c.body),f+="\n}\n",f+=" lastStatement \x3d lc.voidOperation; \n",f+=" \n}\n");return f+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return na(a,c);case "MemberExpression":var A;try{m=void 0,m=!0===c.computed?v(a,c.property):"'"+c.property.name+"'",A="lang.member("+v(a,c.object)+","+m+")"}catch(O){throw O;}return A;case "Literal":return null===c.value||void 0===c.value?"null":JSON.stringify(c.value);case "ThisExpression":throw Error(b.nodeErrorMessage(c,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==c.callee.type)throw Error(b.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));var pa=c.callee.name.toLowerCase(),d="";null!==a.localScope&&(void 0!==a.localScope[pa]?d="lscope['"+pa+"']":void 0!==a.localScope._SymbolsMap[pa]&&(d="lscope['"+a.localScope._SymbolsMap[pa]+"']"));""===d&&(void 0!==a.globalScope[pa]?d="gscope['"+pa+"']":void 0!==a.globalScope._SymbolsMap[pa]&&(d="gscope['"+a.globalScope._SymbolsMap[pa]+"']"));if(""!==
d){e="[";for(p=0;p<c.arguments.length;p++)0<p&&(e+=", "),e+=v(a,c.arguments[p]);e+="]";m=a.isAsync?"(yield lang.callfunc("+d+","+e+",runtimeCtx) )":"lang.callfunc("+d+","+e+",runtimeCtx)"}else throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(O){throw O;}return m;case "UnaryExpression":var qa;try{qa="lang.unary("+v(a,c.argument)+",'"+c.operator+"')"}catch(O){throw O;}return qa;case "BinaryExpression":var x;try{x="lang.binary("+v(a,c.left)+","+v(a,c.right)+",'"+c.operator+"')"}catch(O){throw O;
}return x;case "LogicalExpression":var B;try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(b.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(b.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===c.operator||"||"===c.operator)B="(lang.logicalCheck("+v(a,c.left)+") "+c.operator+" lang.logicalCheck("+v(a,c.right)+
"))";else throw Error(b.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}catch(O){throw O;}return B;case "ConditionalExpression":throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{m=[];for(d=0;d<c.elements.length;d++)"Literal"===c.elements[d].type?m.push(v(a,c.elements[d])):m.push("lang.aCheck("+v(a,c.elements[d])+",'ArrayExpression')");g="["+m.join(",")+"]"}catch(O){throw O;}return g;case "ObjectExpression":m="lang.dictionary([";for(d=0;d<c.properties.length;d++){var r=
c.properties[d],oa="Identifier"===r.key.type?"'"+r.key.name+"'":v(a,r.key),X=v(a,r.value);0<d&&(m+=",");m+="lang.strCheck("+oa+",'ObjectExpression'),lang.aCheck("+X+", 'ObjectExpression')"}return m+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(b.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(b.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(O){throw O;}}function R(a,c){var k=null,b="";if("MemberExpression"===c.argument.type)return k=v(a,c.argument.object),
b=!0===c.argument.computed?v(a,c.argument.property):"'"+c.argument.property.name+"'","lang.memberupdate("+k+","+b+",'"+c.operator+"',"+c.prefix+")";k=c.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[k])return"lang.update(lscope, '"+k+"','"+c.operator+"',"+c.prefix+")";if(void 0!==a.localScope._SymbolsMap[k])return"lang.update(lscope, '"+a.localScope._SymbolsMap[k]+"','"+c.operator+"',"+c.prefix+")"}if(void 0!==a.globalScope[k])return"lang.update(gscope, '"+k+"','"+c.operator+
"',"+c.prefix+")";if(void 0!==a.globalScope._SymbolsMap[k])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[k]+"','"+c.operator+"',"+c.prefix+")";throw Error("Variable not recognised");}function S(a,c){var k=v(a,c.right),b=null,m="";if("MemberExpression"===c.left.type)return b=v(a,c.left.object),m=!0===c.left.computed?v(a,c.left.property):"'"+c.left.property.name+"'","lang.assignmember("+b+","+m+",'"+c.operator+"',"+k+")";b=c.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+
b+"']\x3dlang.assign("+k+",'"+c.operator+"', lscope['"+b+"'])";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3dlang.assign("+k+",'"+c.operator+"', lscope['"+a.localScope._SymbolsMap[b]+"'])"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3dlang.assign("+k+",'"+c.operator+"', gscope['"+b+"'])";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3dlang.assign("+k+",'"+c.operator+"', gscope['"+a.globalScope._SymbolsMap[b]+
"'])";throw Error("Variable not recognised");}function N(a,c){return"BlockStatement"===c.type?v(a,c):"ReturnStatement"===c.type||"BreakStatement"===c.type||"ContinueStatement"===c.type?v(a,c)+"; ":"UpdateExpression"===c.type?"lastStatement \x3d "+v(a,c)+"; ":"ExpressionStatement"===c.type?v(a,c):"ObjectExpression"===c.type?"lastStatement \x3d "+v(a,c)+"; ":v(a,c)+"; "}function ha(a,c){for(var k="",b=0;b<c.body.length;b++)k="ReturnStatement"===c.body[b].type?k+(v(a,c.body[b])+"; \n"):"BreakStatement"===
c.body[b].type?k+(v(a,c.body[b])+"; \n"):"ContinueStatement"===c.body[b].type?k+(v(a,c.body[b])+"; \n"):"UpdateExpression"===c.body[b].type?k+("lastStatement \x3d "+v(a,c.body[b])+"; \n"):"ObjectExpression"===c.body[b].type?k+("lastStatement \x3d "+v(a,c.body[b])+"; \n"):k+(v(a,c.body[b])+" \n");return k}function Y(a,c){var k=null===c.init?null:v(a,c.init);k===d.voidOperation&&(k=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']\x3d"+k+"; ";
if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+k+"; ";var b=V(c,a);a.localScope._SymbolsMap[c]=b;a.mangleMap[c]=b;return"lscope['"+b+"']\x3d"+k+"; "}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+k+"; ";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']\x3d"+k+"; ";b=V(c,a);a.globalScope._SymbolsMap[c]=b;a.mangleMap[c]=b;return"gscope['"+b+"']\x3d"+k+"; "}function fa(a,c,k){c=c.toLowerCase();switch(c){case "hasz":return a=
a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(k=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(k=!1),k&&(sa++,c=a.spatialReference._arcadeCacheId=sa)),a=new n({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(sa++,c=sa,a.cache._arcadeCacheId=c),a=new h(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(sa++,c=sa,a.cache._arcadeCacheId=
c),a=new h(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===c&&(sa++,c=sa,a.cache._arcadeCacheId=c),a=new q(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(b.nodeErrorMessage(k,"RUNTIME","PROPERTYNOTFOUND"));}function na(a,c){try{var k=c.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[k])return"lscope['"+
k+"']";if(void 0!==a.localScope._SymbolsMap[k])return"lscope['"+a.localScope._SymbolsMap[k]+"']"}if(void 0!==a.globalScope[k])return"gscope['"+k+"']";if(void 0!==a.globalScope._SymbolsMap[k])return"gscope['"+a.globalScope._SymbolsMap[k]+"']";throw Error(b.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(va){throw va;}}function F(c){return null===c?"":d.isArray(c)||d.isImmutableArray(c)?"Array":d.isDate(c)?"Date":d.isString(c)?"String":d.isBoolean(c)?"Boolean":d.isNumber(c)?"Number":c instanceof
t?"Attachment":c instanceof n?"Dictionary":c instanceof l?"Feature":c instanceof B?"Point":c instanceof a?"Polygon":c instanceof m?"Polyline":c instanceof ga?"Multipoint":c instanceof P?"Extent":d.isFunctionParameter(c)?"Function":d.isFeatureSet(c)?"FeatureSet":d.isFeatureSetCollection(c)?"FeatureSetCollection":c===d.voidOperation?"":"number"===typeof c&&isNaN(c)?"Number":"Unrecognised Type"}function da(a,c,k,b){try{if(d.equalityTest(c[k],b))return c[k+1];var m=c.length-k;return 1===m?c[k]:2===m?
null:3===m?c[k+2]:da(a,c,k+2,b)}catch(ja){throw ja;}}function I(a,c,k,b){try{if(!0===b)return c[k+1];if(3===c.length-k)return c[k+2];var m=c[k+2];if(!1===d.isBoolean(m))throw Error("WHEN needs boolean test conditions");return I(a,c,k+2,m)}catch(ja){throw ja;}}function W(a,c){var k=a.length,b=Math.floor(k/2);if(0===k)return[];if(1===k)return[a[0]];var m=W(a.slice(0,b),c);a=W(a.slice(b,k),c);for(k=[];0<m.length||0<a.length;)0<m.length&&0<a.length?(b=c(m[0],a[0]),isNaN(b)&&(b=0),0>=b?(k.push(m[0]),m=
m.slice(1)):(k.push(a[0]),a=a.slice(1))):0<m.length?(k.push(m[0]),m=m.slice(1)):0<a.length&&(k.push(a[0]),a=a.slice(1));return k}function ba(a,c){try{var k=a.length,b=Math.floor(k/2);if(0===k)return x.resolve([]);if(1===k)return x.resolve([a[0]]);var m=[ba(a.slice(0,b),c),ba(a.slice(b,k),c)];return x.all(m).then(function(a){return u(a[0],a[1],c,[])})}catch(ja){return x.reject(ja)}}function u(a,c,k,b){return x.create(function(m,d){0<a.length||0<c.length?0<a.length&&0<c.length?k(a[0],c[0]).then(function(e){try{isNaN(e)&&
(e=1),0>=e?(b.push(a[0]),a=a.slice(1)):(b.push(c[0]),c=c.slice(1)),u(a,c,k,b).then(function(a){m(a)},d)}catch(Fa){d(Fa)}},d):0<a.length?(b.push(a[0]),a=a.slice(1),u(a,c,k,b).then(function(a){m(a)},d)):0<c.length&&(b.push(c[0]),c=c.slice(1),u(a,c,k,b).then(function(a){m(a)},d)):m(b)})}function V(a,c){c.symbols.symbolCounter++;return"_T"+c.symbols.symbolCounter.toString()}function k(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function la(a,c,k){var b={};a||(a={});k||
(k={});b._SymbolsMap={};b.textformatting=1;b.infinity=1;b.pi=1;for(var m in c)b[m]=1;for(m in k)b[m]=1;for(m in a)b[m]=1;return b}function ca(a,c){for(var k={mode:c,compiled:!0,functions:{},signatures:[],failDefferred:K,standardFunction:w,standardFunctionAsync:w,evaluateIdentifier:oa},m=0;m<a.length;m++)a[m].registerFunctions(k);if("sync"===c){for(var e in k.functions)T[e]=new d.NativeFunction(k.functions[e]),pa.prototype[e]=T[e];for(m=0;m<k.signatures.length;m++)b.addFunctionDeclaration(k.signatures[m],
"sync")}else{for(e in k.functions)ka[e]=new d.NativeFunction(k.functions[e]),ma.prototype[e]=ka[e];for(m=0;m<k.signatures.length;m++)b.addFunctionDeclaration(k.signatures[m],"async")}}function oa(a,c){c=c.name;if("_SymbolsMap"===c)throw"Illegal";if(0<a.localStack.length){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c];var k=a.mangleMap[c];if(void 0!==k&&void 0!==a.localStack[a.localStack.length-1][k])return a.localStack[a.localStack.length-
1][k]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.globalScope[c]||1===a.globalScope._SymbolsMap[c])return a.globalScope[c];c=a.mangleMap[c];if(void 0!==c)return a.globalScope[c]}function X(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var sa=0,T={};e.registerFunctions(T,w);A.registerFunctions(T,w);p.registerFunctions(T,w);C.registerFunctions(T,w);z.registerFunctions(T,w);T["typeof"]=function(a,c){return w(a,c,function(a,c,k){d.pcCheck(k,1,1);a=F(k[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};T.iif=function(a,c){try{return w(a,c,function(a,c,k){d.pcCheck(k,3,3);if(!1===d.isBoolean(k[0]))throw Error("IF Function must have a boolean test condition");return k[0]?k[1]:k[2]})}catch(za){throw za;}};T.decode=function(a,c){try{return w(a,c,function(c,k,b){if(2>b.length)throw Error("Missing Parameters");if(2===b.length)return b[1];if(0===(b.length-1)%2)throw Error("Must have a default value result.");return da(a,b,1,b[0])})}catch(za){throw za;}};T.when=
function(a,c){try{return w(a,c,function(c,k,b){if(3>b.length)throw Error("Missing Parameters");if(0===b.length%2)throw Error("Must have a default value result.");c=b[0];if(!1===d.isBoolean(c))throw Error("WHEN needs boolean test conditions");return I(a,b,0,c)})}catch(za){throw za;}};T.top=function(a,c){return w(a,c,function(a,c,k){d.pcCheck(k,2,2);if(d.isArray(k[0]))return d.toNumber(k[1])>=k[0].length?k[0].slice(0):k[0].slice(0,d.toNumber(k[1]));if(d.isImmutableArray(k[0]))return d.toNumber(k[1])>=
k[0].length()?k[0].slice(0):k[0].slice(0,d.toNumber(k[1]));throw Error("Top cannot accept this parameter type");})};T.first=function(a,c){return w(a,c,function(a,c,k){d.pcCheck(k,1,1);return d.isArray(k[0])?0===k[0].length?null:k[0][0]:d.isImmutableArray(k[0])?0===k[0].length()?null:k[0].get(0):null})};T.sort=function(a,c){return w(a,c,function(c,k,b){d.pcCheck(b,1,2);k=b[0];d.isImmutableArray(k)&&(k=k.toArray());if(!1===d.isArray(k))throw Error("Illegal Argument");if(1<b.length){if(!1===d.isFunctionParameter(b[1]))throw Error("Illegal Argument");
var m=function(a,k){return ua.callfunc(b[1],[a,k],c)};return a.isAsync?ba(k,m):k=W(k,function(a,c){return m(a,c)})}if(0===k.length)return[];for(var e={},p=0;p<k.length;p++){var g=F(k[p]);""!==g&&(e[g]=!0)}if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return k.slice(0);var p=0,g="",la;for(la in e)p++,g=la;return k=1<p||"String"===g?W(k,function(a,c){if(null===a||void 0===a||a===d.voidOperation)return null===
c||void 0===c||c===d.voidOperation?0:1;if(null===c||void 0===c||c===d.voidOperation)return-1;a=d.toString(a);c=d.toString(c);return a<c?-1:a===c?0:1}):"Number"===g?W(k,function(a,c){return a-c}):"Boolean"===g?W(k,function(a,c){return a===c?0:c?-1:1}):"Date"===g?W(k,function(a,c){return c-a}):k.slice(0)})};var ka={},ea;for(ea in T)ka[ea]=new d.NativeFunction(T[ea]);g.registerFunctions(T,w);for(ea in T)T[ea]=new d.NativeFunction(T[ea]);var pa=function(){};pa.prototype=T;var ma=function(){};ma.prototype=
ka;f.functionHelper={fixSpatialReference:d.fixSpatialReference,parseArguments:function(a,c){for(var k=[],b=0;b<c.arguments.length;b++)k.push(v(a,c.arguments[b]));return k},standardFunction:w};f.extend=ca;f.executeScript=function(a,c){return a(c)};f.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return b.findFieldLiterals(a,c)};f.validateScript=function(a,c){return b.validateScript(a,c,"sync")};f.referencesMember=function(a,c){return b.referencesMember(a,c)};f.referencesFunction=function(a,
c){return b.referencesFunction(a,c)};var qa=0,ua={error:function(a,c,k){throw Error(b.nodeErrorMessage(a,c,k));},__awaiter:function(a,c,k,b){return x.create(function(k,m){function d(a){try{p(b.next(a))}catch(wa){m(wa)}}function e(a){try{p(b["throw"](a))}catch(wa){m(wa)}}function p(a){a.done?k(a.value):a.value&&a.value.then?a.value.then(d,e):(qa++,0===qa%100?setTimeout(function(){qa=0;d(a.value)},0):d(a.value))}p((b=b.apply(a,c||[])).next())})},functionDepthchecker:function(a,c){return function(){c.depthCounter++;
c.localStack.push([]);if(64<c.depthCounter)throw Error("Exceeded maximum function depth");var k=a.apply(this,arguments);if(x.isThenable(k))return k.then(function(a){c.depthCounter--;--c.localStack.length;return a});c.depthCounter--;--c.localStack.length;return k}},aCheck:function(a,c){if(d.isFunctionParameter(a))throw Error(b.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===d.voidOperation?null:a},Dictionary:n,Feature:l,dictionary:function(a){for(var c={},k=0;k<a.length;k+=
2){if(d.isFunctionParameter(a[k+1]))throw Error("Illegal Argument");if(!1===d.isString(a[k]))throw Error("Illegal Argument");c[a[k].toString()]=a[k+1]===d.voidOperation?null:a[k+1]}a=new n(c);a.immutable=!1;return a},strCheck:function(a,c){if(!1===d.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(d.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*d.toNumber(a);if("+"===c)return 1*d.toNumber(a);throw Error(b.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,
argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*d.toNumber(a);if("+"===c)return 1*d.toNumber(a);throw Error(b.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===d.isBoolean(a))throw Error(b.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,c,k){if(d.isBoolean(a)&&d.isBoolean(c))switch(k){case "||":return a||
c;case "\x26\x26":return a&&c}throw Error(b.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,c,k){switch(k){case "\x3d\x3d":return d.equalityTest(a,c);case "\x3d":return d.equalityTest(a,c);case "!\x3d":return!d.equalityTest(a,c);case "\x3c":return d.greaterThanLessThan(a,c,k);case "\x3e":return d.greaterThanLessThan(a,c,k);case "\x3c\x3d":return d.greaterThanLessThan(a,c,k);case "\x3e\x3d":return d.greaterThanLessThan(a,
c,k);case "+":return d.isString(a)||d.isString(c)?d.toString(a)+d.toString(c):d.toNumber(a)+d.toNumber(c);case "-":return d.toNumber(a)-d.toNumber(c);case "*":return d.toNumber(a)*d.toNumber(c);case "/":return d.toNumber(a)/d.toNumber(c);case "%":return d.toNumber(a)%d.toNumber(c);default:throw Error(b.nodeErrorMessage({type:"BinaryExpression",operator:k,left:a,right:c},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,k){switch(c){case "\x3d":return a===d.voidOperation?null:a;case "/\x3d":return d.toNumber(k)/
d.toNumber(a);case "*\x3d":return d.toNumber(k)*d.toNumber(a);case "-\x3d":return d.toNumber(k)-d.toNumber(a);case "+\x3d":return d.isString(k)||d.isString(a)?d.toString(k)+d.toString(a):d.toNumber(k)+d.toNumber(a);case "%\x3d":return d.toNumber(k)%d.toNumber(a);default:throw Error(b.nodeErrorMessage({type:"AssignmentExpression",operator:c,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,k,b){var m=d.toNumber(a[c]);a[c]="++"===k?m+1:m-1;return!1===b?m:"++"===k?m+1:
m-1},graphicToFeature:function(a,c){return null===a?null:l.createFromGraphicLikeObject(a.geometry,a.attributes,c)},memberupdate:function(a,c,k,b){var m;if(d.isArray(a))if(d.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");m=d.toNumber(a[c]);a[c]="++"===k?m+1:m-1}else throw Error("Invalid Parameter");else if(a instanceof n){if(!1===d.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))m=d.toNumber(a.field(c)),a.setField(c,
"++"===k?m+1:m-1);else throw Error("Invalid Parameter");}else if(a instanceof l){if(!1===d.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))m=d.toNumber(a.field(c)),a.setField(c,"++"===k?m+1:m-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===b?m:"++"===k?m+1:m-1},assignmember:function(a,c,k,b){if(d.isArray(a))if(d.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");
if(c===a.length&&"\x3d"!==k)throw Error("Invalid Parameter");a[c]=this.assign(b,k,a[c])}else throw Error("Invalid Parameter");else if(a instanceof n){if(!1===d.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(b,k,a.field(c)));else{if("\x3d"!==k)throw Error("Invalid Parameter");a.setField(c,this.assign(b,k,null))}}else if(a instanceof l){if(!1===d.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))a.setField(c,
this.assign(b,k,a.field(c)));else{if("\x3d"!==k)throw Error("Invalid Parameter");a.setField(c,this.assign(b,k,null))}}else{if(d.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof n||a instanceof l){if(d.isString(c))return a.field(c);throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof Z){if(d.isString(c))return fa(a,c,"MemberExpression");throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isArray(a)){if(d.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(b.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isString(a)){if(d.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isImmutableArray(a)&&d.isNumber(c)&&isFinite(c)&&Math.floor(c)===
c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(b.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,k){return a instanceof d.NativeFunction?a.fn(k,c):a instanceof d.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};f.compileScript=function(a,k,b){void 0===k&&(k=null);
void 0===b&&(b=!1);null===k&&(k={vars:{},customfunctions:{}});k={isAsync:b,globalScope:la(k.vars,b?ka:T,k.customfunctions),localScope:null,mangleMap:{},console:X,lrucache:k.lrucache,services:k.services,symbols:{symbolCounter:0}};a=v(k,a.body[0].body);""===a&&(a="lc.voidOperation; ");k={lc:d,lang:ua,mangles:k.mangleMap,postProcess:function(a){a instanceof d.ReturnResult&&(a=a.value);a instanceof d.ImplicitResult&&(a=a.value);a===d.voidOperation&&(a=null);if(a===d.breakResult)throw Error("Cannot return BREAK");
if(a===d.continueResult)throw Error("Cannot return CONTINUE");if(d.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,k){var b=a.spatialReference;if(null===b||void 0===b)b=new c({wkid:102100});var m=a.vars,d=a.customfunctions,e=k?new ma:new pa;m||(m={});d||(d={});var p=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=p;e.infinity=
Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var g in d)e[g]=d[g],e._SymbolsMap[g]=1;for(g in m)e._SymbolsMap[g]=1,e[g]=m[g]&&"esri.Graphic"===m[g].declaredClass?l.createFromGraphic(m[g]):m[g];return{localStack:[],isAsync:k,mangleMap:this.mangles,spatialReference:b,globalScope:e,abortSignal:void 0===a.abortSignal||null===a.abortSignal?{aborted:!1}:a.abortSignal,localScope:null,services:a.services,console:a.console?a.console:X,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context",
"spatialReference",b?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(k)};f.enableAsyncSupport=function(){return x.create(function(a,c){H(["./functions/geomasync"],function(c){ca([c],"async");a(!0)},function(a){c(a)})})}})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(H,f,t,n){return function(l){function h(h,d,b,e,C){var g=l.call(this)||this;g.attachmentUrl=C;g.immutable=!1;g.setField("id",h);g.setField("name",
d);g.setField("contenttype",b);g.setField("size",e);g.immutable=!0;return g}t(h,l);return h}(n)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(H,f,t,n,l){return function(){function h(l){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=l instanceof h?l.attributes:void 0===l?{}:null===l?{}:l}h.prototype.field=function(h){var d=h.toLowerCase();h=this.attributes[h];
if(void 0!==h)return h;for(var b in this.attributes)if(b.toLowerCase()===d)return this.attributes[b];throw Error("Field not Found");};h.prototype.setField=function(h,d){if(this.immutable)throw Error("Dictionary is Immutable");var b=h.toLowerCase();if(void 0===this.attributes[h])for(var e in this.attributes)if(e.toLowerCase()===b){this.attributes[e]=d;return}this.attributes[h]=d};h.prototype.hasField=function(h){var d=h.toLowerCase();if(void 0!==this.attributes[h])return!0;for(var b in this.attributes)if(b.toLowerCase()===
d)return!0;return!1};h.prototype.keys=function(){var h=[],d;for(d in this.attributes)h.push(d);return h=h.sort()};h.prototype.castToText=function(){var h="",d;for(d in this.attributes){""!==h&&(h+=",");var b=this.attributes[d];null==b?h+=JSON.stringify(d)+":null":n.isBoolean(b)||n.isNumber(b)||n.isString(b)?h+=JSON.stringify(d)+":"+JSON.stringify(b):b instanceof l?h+=JSON.stringify(d)+":"+n.toStringExplicit(b):b instanceof t?h+=JSON.stringify(d)+":"+n.toStringExplicit(b):b instanceof Array?h+=JSON.stringify(d)+
":"+n.toStringExplicit(b):b instanceof Date?h+=JSON.stringify(d)+":"+JSON.stringify(b):null!==b&&"object"===typeof b&&void 0!==b.castToText&&(h+=JSON.stringify(d)+":"+b.castToText())}return"{"+h+"}"};return h}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(H,f){return function(){function f(n){void 0===n&&(n=[]);this._elements=n}f.prototype.length=function(){return this._elements.length};f.prototype.get=function(n){return this._elements[n]};f.prototype.toArray=function(){for(var n=
[],l=0;l<this.length();l++)n.push(this.get(l));return n};return f}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/support/coordsUtils ../core/maybe".split(" "),function(H,f,t,n,l,h,q,d,b,e,C,g,p,z,A,x){function P(a,c,b){return""===c||null===c||void 0===
c||c===b||c===b?a:a=a.split(c).join(b)}function Z(a){return a instanceof u||a instanceof l||a instanceof V}function ga(c){return B(c)||m(c)||K(c)||a(c)||null===c||c===f.voidOperation||"number"===typeof c?!0:!1}function B(a){return"string"===typeof a||a instanceof String}function a(a){return"boolean"===typeof a}function m(a){return"number"===typeof a}function c(a){return a instanceof Array}function w(a){return a instanceof h}function K(a){return a instanceof Date}function v(a,c){if(!1===isNaN(a)){if(void 0===
c||null===c||""===c)return a.toString();c=P(c,"\u2030","");c=P(c,"\u00a4","");return t.format(a,{pattern:c})}return a.toString()}function R(a,c){a=n(a);return void 0===c||null===c||""===c?a.format():a.format(S(c))}function S(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function N(a,c,b){switch(b){case "\x3e":return a>c;case "\x3c":return a<c;case "\x3e\x3d":return a>=c;case "\x3c\x3d":return a<=c}return!1}function ha(a,c){if(a===c||null===a&&c===f.voidOperation||null===c&&a===f.voidOperation)return!0;
if(K(a)&&K(c))return a.getTime()===c.getTime();if(a instanceof q||a instanceof d)return a.equalityTest(c);if(a instanceof g&&c instanceof g){var k=void 0,b=void 0,k=a.cache._arcadeCacheId,b=c.cache._arcadeCacheId;if(void 0!==k&&null!==k)return k===b}return void 0!==a&&void 0!==c&&null!==a&&null!==c&&"object"===typeof a&&"object"===typeof c&&(a._arcadeCacheId===c._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===c._underlyingGraphic&&void 0!==a._underlyingGraphic&&
null!==a._underlyingGraphic)?!0:!1}function Y(k,b){if(B(k))return k;if(null===k)return"";if(m(k))return v(k,b);if(a(k))return k.toString();if(K(k))return R(k,b);if(k instanceof e)return JSON.stringify(k.toJSON());if(c(k)){b=[];for(var d=0;d<k.length;d++)b[d]=na(k[d]);return"["+b.join(",")+"]"}if(k instanceof h){b=[];for(d=0;d<k.length();d++)b[d]=na(k.get(d));return"["+b.join(",")+"]"}return null!==k&&"object"===typeof k&&void 0!==k.castToText?k.castToText():Z(k)?"object, Function":""}function fa(k,
d){if(B(k))return k;if(null===k)return"";if(m(k))return v(k,d);if(a(k))return k.toString();if(K(k))return R(k,d);if(k instanceof e)return k instanceof b?'{"xmin":'+k.xmin.toString()+',"ymin":'+k.ymin.toString()+","+(k.hasZ?'"zmin":'+k.zmin.toString()+",":"")+(k.hasM?'"mmin":'+k.mmin.toString()+",":"")+'"xmax":'+k.xmax.toString()+',"ymax":'+k.ymax.toString()+","+(k.hasZ?'"zmax":'+k.zmax.toString()+",":"")+(k.hasM?'"mmax":'+k.mmax.toString()+",":"")+'"spatialReference":'+I(k.spatialReference)+"}":I(k.toJSON(),
function(a,c){return a.key===c.key?0:"spatialReference"===a.key?1:"spatialReference"===c.key||a.key<c.key?-1:a.key>c.key?1:0});if(c(k)){d=[];for(var p=0;p<k.length;p++)d[p]=na(k[p]);return"["+d.join(",")+"]"}if(k instanceof h){d=[];for(p=0;p<k.length();p++)d[p]=na(k.get(p));return"["+d.join(",")+"]"}return null!==k&&"object"===typeof k&&void 0!==k.castToText?k.castToText():Z(k)?"object, Function":""}function na(c){return null===c?"null":a(c)||m(c)||B(c)?JSON.stringify(c):c instanceof e||c instanceof
h||c instanceof Array?fa(c):c instanceof Date?JSON.stringify(R(c,"")):null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():"null"}function F(k,b){return m(k)?k:null===k||""===k?0:K(k)?NaN:a(k)?k?1:0:c(k)||""===k||void 0===k?NaN:void 0!==b&&B(k)?(b=P(b,"\u2030",""),b=P(b,"\u00a4",""),t.parse(k,{pattern:b})):k===f.voidOperation?0:Number(k)}function da(a,c){var k;c.fields.some(function(c){c.name===a&&(k=c.domain);return!!k});return k}function I(a,c){c||(c={});"function"===typeof c&&(c=
{cmp:c});var k="boolean"===typeof c.cycles?c.cycles:!1,b=c.cmp&&function(a){return function(c){return function(k,b){return a({key:k,value:c[k]},{key:b,value:c[b]})}}}(c.cmp),m=[];return function T(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var c,d;if(Array.isArray(a)){d="[";for(c=0;c<a.length;c++)c&&(d+=","),d+=T(a[c])||"null";return d+"]"}if(null===a)return"null";
if(-1!==m.indexOf(a)){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var e=m.push(a)-1,p=Object.keys(a).sort(b&&b(a));d="";for(c=0;c<p.length;c++){var g=p[c],h=T(a[g]);h&&(d&&(d+=","),d+=JSON.stringify(g)+":"+h)}m.splice(e,1);return"{"+d+"}"}}(a)}function W(a,c){if(c instanceof g)a.push(c.hasZ?c.hasM?[c.x,c.y,c.z,c.m]:[c.x,c.y,c.z]:[c.x,c.y]);else throw Error("Invalid Argument");}Object.defineProperty(f,"__esModule",{value:!0});H=function(){return function(a){this.value=
a}}();f.ReturnResultE=H;var ba=function(){return function(a){this.value=a}}();f.ImplicitResultE=ba;var u=function(){return function(a){this.fn=a}}();f.NativeFunctionE=u;var V=function(){return function(a){this.fn=a}}();f.SizzleFunctionE=V;f.NativeFunction=u;f.ImplicitResult=ba;f.ReturnResult=H;f.SizzleFunction=V;f.voidOperation={type:"VOID"};f.breakResult={type:"BREAK"};f.continueResult={type:"CONTINUE"};f.multiReplace=P;f.isFunctionParameter=Z;f.isSimpleType=ga;f.defaultUndefined=function(a,c){return void 0===
a?c:a};f.isString=B;f.isBoolean=a;f.isNumber=m;f.isArray=c;f.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};f.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};f.isImmutableArray=w;f.isDate=K;f.pcCheck=function(a,c,b){if(a.length<c||a.length>b)throw Error("Function called with wrong number of Parameters");};f.generateUUID=function(){var a=
(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var k=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===c?k:k&3|8).toString(16)})};f.formatNumber=v;f.formatDate=R;f.standardiseDateFormat=S;f.greaterThanLessThan=function(c,b,d){if(null===c){if(null===b||b===f.voidOperation)return N(null,null,d);if(m(b))return N(0,b,d);if(B(b)||a(b))return N(0,F(b),d);if(K(b))return N(0,b.getTime(),d)}if(c===f.voidOperation){if(null===b||b===f.voidOperation)return N(null,
null,d);if(m(b))return N(0,b,d);if(B(b)||a(b))return N(0,F(b),d);if(K(b))return N(0,b.getTime(),d)}else if(m(c)){if(m(b))return N(c,b,d);if(a(b))return N(c,F(b),d);if(null===b||b===f.voidOperation)return N(c,0,d);if(B(b))return N(c,F(b),d);if(K(b))return N(c,b.getTime(),d)}else if(B(c)){if(B(b))return N(Y(c),Y(b),d);if(K(b))return N(F(c),b.getTime(),d);if(m(b))return N(F(c),b,d);if(null===b||b===f.voidOperation)return N(F(c),0,d);if(a(b))return N(F(c),F(b),d)}else if(K(c)){if(K(b))return N(c,b,d);
if(null===b||b===f.voidOperation)return N(c.getTime(),0,d);if(m(b))return N(c.getTime(),b,d);if(a(b)||B(b))return N(c.getTime(),F(b),d)}else if(a(c)){if(a(b))return N(c,b,d);if(m(b))return N(F(c),F(b),d);if(K(b))return N(F(c),b.getTime(),d);if(null===b||b===f.voidOperation)return N(F(c),0,d);if(B(b))return N(F(c),F(b),d)}return!ha(c,b)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};f.equalityTest=ha;f.toString=Y;f.toNumberArray=function(a){var b=[];if(!1===c(a))return null;if(a instanceof h){for(var k=0;k<
a.length();k++)b[k]=F(a.get(k));return b}for(k=0;k<a.length;k++)b[k]=F(a[k]);return b};f.toStringExplicit=fa;f.toNumber=F;f.toDate=function(a,c){return K(a)?a:B(a)&&(a=n(a,[void 0===c||null===c||""===c?n.ISO_8601:c]),a.isValid())?a.toDate():null};f.toDateM=function(a,c){return K(a)?n(a):B(a)&&(a=n(a,[void 0===c||null===c||""===c?n.ISO_8601:c]),a.isValid())?a:null};f.toBoolean=function(c){return a(c)?c:B(c)?(c=c.toLowerCase(),"true"===c?!0:!1):m(c)?0===c||isNaN(c)?!1:!0:!1};f.fixSpatialReference=function(a,
c){if(x.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=c;return a};f.fixNullGeometry=function(a){return null===a?null:a instanceof g?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof p?0===a.rings.length?null:a:a instanceof z?0===a.paths.length?null:a:a instanceof C?0===a.points.length?null:a:a instanceof b?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};f.getDomainValue=function(a,c){if(!a||!a.domain)return c;var b=null;c="string"===
a.field.type||"esriFieldTypeString"===a.field.type?Y(c):F(c);for(var k=0;k<a.domain.codedValues.length;k++){var m=a.domain.codedValues[k];m.code===c&&(b=m)}return null===b?c:b.name};f.getDomainCode=function(a,c){if(!a||!a.domain)return c;var b=null;c=Y(c);for(var k=0;k<a.domain.codedValues.length;k++){var m=a.domain.codedValues[k];m.name===c&&(b=m)}return null===b?c:b.code};f.getDomain=function(a,c,b,m){void 0===b&&(b=null);if(!c||!c.fields)return null;for(var k=null,d=0;d<c.fields.length;d++){var e=
c.fields[d];e.name.toLowerCase()===a.toString().toLowerCase()&&(k=e)}if(null===k)throw Error("Field not found");var p,g;m||(m=b&&c.typeIdField&&b._field(c.typeIdField));null!=m&&c.types.some(function(a){return a.id===m?((p=a.domains&&a.domains[k.name])&&"inherited"===p.type&&(p=da(k.name,c),g=!0),!0):!1});g||p||(p=da(a,c));return{field:k,domain:p}};f.stableStringify=I;f.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var c=[],b=0;b<a.length;b++){var k=a[b];k&&k.declaredClass&&"esri.arcade.Feature"===
k.declaredClass?c.push(k.geometry()):c.push(k)}return c};f.autoCastArrayOfPointsToPolygon=function(a,b){if(c(a)||w(a)){var k=!1,m=!1,e=[];if(c(a)){for(var g=0;g<a.length;g++){var h=a[g];W(e,h)}0<e.length&&(b=a[0].spatialReference,k=a[0].hasZ,m=a[0].hasM)}else if(a instanceof d)e=a._elements,0<e.length&&(k=a._hasZ,m=a._hasM,b=a.get(0).spatialReference);else if(w(a)){for(var g=0,ka=a.toArray();g<ka.length;g++)h=ka[g],W(e,h);0<e.length&&(b=a.get(0).spatialReference,k=!0===a.get(0).hasZ,m=!0===a.get(0).hasM)}else throw Error("Invalid Argument");
if(0===e.length)return null;!1===A.isClockwise(e,m,k)&&(e=e.slice(0).reverse());return new p({rings:[e],spatialReference:b,hasZ:k,hasM:m})}return a};f.autoCastArrayOfPointsToPolyline=function(a,b){if(c(a)||w(a)){var m=!1,k=!1,e=[];if(c(a)){for(var p=0;p<a.length;p++){var g=a[p];W(e,g)}0<e.length&&(b=a[0].spatialReference,m=!0===a[0].hasZ,k=!0===a[0].hasM)}else if(a instanceof d)e=a._elements,0<e.length&&(m=a._hasZ,k=a._hasM,b=a.get(0).spatialReference);else if(w(a)){for(var p=0,h=a.toArray();p<h.length;p++)g=
h[p],W(e,g);0<e.length&&(b=a.get(0).spatialReference,m=!0===a.get(0).hasZ,k=!0===a.get(0).hasM)}return 0===e.length?null:new z({paths:[e],spatialReference:b,hasZ:m,hasM:k})}return a};f.autoCastArrayOfPointsToMultiPoint=function(a,b){if(c(a)||w(a)){var m=!1,k=!1,e=[];if(c(a)){for(var p=0;p<a.length;p++){var g=a[p];W(e,g)}0<e.length&&(b=a[0].spatialReference,m=!0===a[0].hasZ,k=!0===a[0].hasM)}else if(a instanceof d)e=a._elements,0<e.length&&(m=a._hasZ,k=a._hasM,b=a.get(0).spatialReference);else if(w(a)){for(var p=
0,h=a.toArray();p<h.length;p++)g=h[p],W(e,g);0<e.length&&(b=a.get(0).spatialReference,m=!0===a.get(0).hasZ,k=!0===a.get(0).hasM)}return 0===e.length?null:new C({points:e,spatialReference:b,hasZ:m,hasM:k})}return a};f.toStringArray=function(a,b){void 0===b&&(b=!1);var m=[];if(null===a)return m;if(!0===c(a)){for(var k=0;k<a.length;k++){var d=Y(a[k]);""===d&&!0!==b||m.push(d)}return m}if(a instanceof h){for(k=0;k<a.length();k++)d=Y(a.get(k)),""===d&&!0!==b||m.push(d);return m}return ga(a)?(d=Y(a),""===
d&&!0!==b||m.push(d),m):[]}})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(H,f,t,n,l){var h={};H.setObject("dojo.number",h);h.format=function(d,b){b=H.mixin({},b||{});var e=f.normalizeLocale(b.locale),e=f.getLocalization("dojo.cldr","number",e);b.customs=e;e=b.pattern||e[(b.type||"decimal")+"Format"];return isNaN(d)||Infinity==Math.abs(d)?null:h._applyPattern(d,e,b)};h._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;h._applyPattern=
function(d,b,e){e=e||{};var l=e.customs.group,g=e.customs.decimal;b=b.split(";");var p=b[0];b=b[0>d?1:0]||"-"+p;if(-1!=b.indexOf("%"))d*=100;else if(-1!=b.indexOf("\u2030"))d*=1E3;else if(-1!=b.indexOf("\u00a4"))l=e.customs.currencyGroup||l,g=e.customs.currencyDecimal||g,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(b,d,p,g){return(b=e[["symbol","currency","displayName"][p.length-1]]||e.currency||"")?d+b+g:""});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");
var n=h._numberPatternRE,p=p.match(n);if(!p)throw Error("unable to find a number expression in pattern: "+b);!1===e.fractional&&(e.places=0);return b.replace(n,h._formatAbsolute(d,p[0],{decimal:g,group:l,places:e.places,round:e.round}))};h.round=function(d,b,e){e=10/(e||10);return(e*+d).toFixed(b)/e};if(0==(.9).toFixed()){var q=h.round;h.round=function(d,b,e){var h=Math.pow(10,-b||0),g=Math.abs(d);if(!d||g>=h)h=0;else if(g/=h,.5>g||.95<=g)h=0;return q(d,b,e)+(0<d?h:-h)}}h._formatAbsolute=function(d,
b,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);b=b.split(".");var l="string"==typeof e.places&&e.places.indexOf(","),g=e.places;l?g=e.places.substring(l+1):0<=g||(g=(b[1]||[]).length);0>e.round||(d=h.round(d,g,e.round));d=String(Math.abs(d)).split(".");var p=d[1]||"";b[1]||e.places?(l&&(e.places=e.places.substring(0,l)),l=void 0!==e.places?e.places:b[1]&&b[1].lastIndexOf("0")+1,l>p.length&&(d[1]=n.pad(p,l,"0",!0)),g<p.length&&(d[1]=p.substr(0,g))):d[1]&&d.pop();g=b[0].replace(",",
"");l=g.indexOf("0");-1!=l&&(l=g.length-l,l>d[0].length&&(d[0]=n.pad(d[0],l)),-1==g.indexOf("#")&&(d[0]=d[0].substr(d[0].length-l)));var g=b[0].lastIndexOf(","),f,A;-1!=g&&(f=b[0].length-g-1,b=b[0].substr(0,g),g=b.lastIndexOf(","),-1!=g&&(A=b.length-g-1));b=[];for(g=d[0];g;)l=g.length-f,b.push(0<l?g.substr(l):g),g=0<l?g.slice(0,l):"",A&&(f=A,A=void 0);d[0]=b.reverse().join(e.group||",");return d.join(e.decimal||".")};h.regexp=function(d){return h._parseInfo(d).regexp};h._parseInfo=function(d){d=d||
{};var b=f.normalizeLocale(d.locale),b=f.getLocalization("dojo.cldr","number",b),e=d.pattern||b[(d.type||"decimal")+"Format"],n=b.group,g=b.decimal,p=1;if(-1!=e.indexOf("%"))p/=100;else if(-1!=e.indexOf("\u2030"))p/=1E3;else{var z=-1!=e.indexOf("\u00a4");z&&(n=b.currencyGroup||n,g=b.currencyDecimal||g)}b=e.split(";");1==b.length&&b.push("-"+b[0]);b=l.buildGroupRE(b,function(b){b="(?:"+l.escapeString(b,".")+")";return b.replace(h._numberPatternRE,function(b){var e={signed:!1,separator:d.strict?n:[n,
""],fractional:d.fractional,decimal:g,exponent:!1};b=b.split(".");var l=d.places;1==b.length&&1!=p&&(b[1]="###");1==b.length||0===l?e.fractional=!1:(void 0===l&&(l=d.pattern?b[1].lastIndexOf("0")+1:Infinity),l&&void 0==d.fractional&&(e.fractional=!0),!d.places&&l<b[1].length&&(l+=","+b[1].length),e.places=l);b=b[0].split(",");1<b.length&&(e.groupSize=b.pop().length,1<b.length&&(e.groupSize2=b.pop().length));return"("+h._realNumberRegexp(e)+")"})},!0);z&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,
function(b,e,p,g){b=l.escapeString(d[["symbol","currency","displayName"][p.length-1]]||d.currency||"");if(!b)return"";e=e?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return d.strict?e+b+g:(e&&(e+="*"),g&&(g+="*"),"(?:"+e+b+g+")?")}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:g,factor:p}};h.parse=function(d,b){b=h._parseInfo(b);d=(new RegExp("^"+b.regexp+"$")).exec(d);if(!d)return NaN;var e=d[1];if(!d[1]){if(!d[2])return NaN;e=d[2];b.factor*=-1}e=e.replace(new RegExp("["+b.group+"\\s\\xa0]",
"g"),"").replace(b.decimal,".");return e*b.factor};h._realNumberRegexp=function(d){d=d||{};"places"in d||(d.places=Infinity);"string"!=typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(d.places)||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var b=h._integerRegexp(d),e=l.buildGroupRE(d.fractional,function(b){var e="";b&&0!==d.places&&(e="\\"+d.decimal,e=Infinity==d.places?"(?:"+e+"\\d+)?":e+("\\d{"+d.places+"}"));return e},!0),n=l.buildGroupRE(d.exponent,
function(b){return b?"([eE]"+h._integerRegexp({signed:d.eSigned})+")":""}),b=b+e;e&&(b="(?:(?:"+b+")|(?:"+e+"))");return b+n};h._integerRegexp=function(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";var b=l.buildGroupRE(d.signed,function(b){return b?"[-+]":""},!0),e=l.buildGroupRE(d.separator,function(b){if(!b)return"(?:\\d+)";b=l.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var e=d.groupSize,p=d.groupSize2;return p?(b="(?:0|[1-9]\\d{0,"+
(p-1)+"}(?:["+b+"]\\d{"+p+"})*["+b+"]\\d{"+e+"})",0<e-p?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+b+"]\\d{"+e+"})*)"},!0);return b+e};return h})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(H,f){var t=/[&<>'"\/]/g,n={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},l={};f.setObject("dojo.string",l);l.escape=function(h){return h?h.replace(t,function(h){return n[h]}):""};l.rep=function(h,
l){if(0>=l||!h)return"";for(var d=[];;){l&1&&d.push(h);if(!(l>>=1))break;h+=h}return d.join("")};l.pad=function(h,n,d,b){d||(d="0");h=String(h);n=l.rep(d,Math.ceil((n-h.length)/d.length));return b?h+n:n+h};l.substitute=function(h,l,d,b){b=b||H.global;d=d?f.hitch(b,d):function(b){return b};return h.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,h,g){if(""==h)return"$";e=f.getObject(h,!1,l);g&&(e=f.getObject(g,!1,b).call(b,e,h));g=d(e,h);if("undefined"===typeof g)throw Error('string.substitute could not find key "'+
h+'" in template');return g.toString()})};l.trim=String.prototype.trim?f.trim:function(h){h=h.replace(/^\s+/,"");for(var l=h.length-1;0<=l;l--)if(/\S/.test(h.charAt(l))){h=h.substring(0,l+1);break}return h};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(H,f){var t={};f.setObject("dojo.regexp",t);t.escapeString=function(n,l){return n.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(h){return l&&-1!=l.indexOf(h)?h:"\\"+h})};t.buildGroupRE=function(n,l,h){if(!(n instanceof
Array))return l(n);for(var f=[],d=0;d<n.length;d++)f.push(l(n[d]));return t.group(f.join("|"),h)};t.group=function(n,l){return"("+(l?"?:":"")+n+")"};return t})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(H,f,t){return t})},"esri/plugins/moment":function(){define(["require","exports","../intl/moment"],function(H,f,t){Object.defineProperty(f,"__esModule",{value:!0});f.load=function(n,l,h){t.loadMoment().then(function(l){h(l)})}})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper @dojo/framework/shim/Set ./locale @dojo/framework/shim/Promise".split(" "),
function(H,f,t,n,l,h){Object.defineProperty(f,"__esModule",{value:!0});var q=new l.default("ar ar-dz ar-kw ar-ly ar-ma ar-sa ar-tn bs ca cs da de de-at de-ch el en-au en-ca en-gb en-ie en-il en-nz es es-do es-us et fi fr fr-ca fr-ch he hi hr hu id it it-ch ja ko lt lv nb nl nl-be pl pt pt-br ro ru sl sr sr-cyrl sv th tr uk vi zh-cn zh-hk zh-tw".split(" "));f.loadMoment=function(d){void 0===d&&(d=h.getLocale());return t(this,void 0,void 0,function(){var b,e,h;return n(this,function(g){switch(g.label){case 0:return[4,
new Promise(function(b,d){H(["moment/moment"],b,d)})];case 1:return b=g.sent(),e=q.has(d),e||(h=d.split("-"),1<h.length&&q.has(h[0])&&(d=h[0],e=!0)),e?[4,new Promise(function(b,e){H(["moment/locale/"+d],b,e)})]:[3,3];case 2:return g.sent(),[3,4];case 3:d="en",g.label=4;case 4:return d!==b.locale()&&b.locale(d),[2,b]}})})}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(H,f){return function(){return function(f,n){this.context=this.definition=null;this.definition=f;
this.context=n}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(H,f,t,n,l){return function(h){function n(d,b,e,l,g){d=h.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=e;d._hasM=l;d._spRef=b;d._cacheId=g;return d}t(n,h);n.prototype.get=function(d){if(void 0===this._lazyPath[d]){var b=this._elements[d];if(void 0===b)return;this._lazyPath[d]=new l(b,this._spRef,this._hasZ,
this._hasM,this._cacheId,d)}return this._lazyPath[d]};n.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof n?!1:d.getUniqueHash()===this.getUniqueHash()};n.prototype.getUniqueHash=function(){return this._cacheId.toString()};return n}(n)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(H,f,t,n,l){return function(h){function n(d,b,e,l,g,p){d=h.call(this,d)||this;
d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=b;d._hasZ=e;d._hasM=l;d._cacheId=g;d._partId=p;return d}t(n,h);n.prototype.get=function(d){if(void 0===this._lazyPt[d]){var b=this._elements[d];if(void 0===b)return;var e=this._hasZ,h=this._hasM,g=null,g=e&&!h?new l(b[0],b[1],b[2],void 0,this._spRef):h&&e?new l(b[0],b[1],void 0,b[2],this._spRef):e&&h?new l(b[0],b[1],b[2],b[3],this._spRef):new l(b[0],b[1],this._spRef);g.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString();
this._lazyPt[d]=g}return this._lazyPt[d]};n.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof n?!1:d.getUniqueHash()===this.getUniqueHash()};n.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return n}(n)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),
function(H,f,t,n,l,h,q,d,b,e,C){return function(){function g(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}g.createFromGraphic=function(b){var d=new g;d._geometry=C.isSome(b.geometry)?b.geometry:null;d.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(d._layer=b._sourceLayer,d._datesfixed=!1):b._layer?(d._layer=
b._layer,d._datesfixed=!1):b.layer&&(d._layer=b.layer,d._datesfixed=!1);return d};g.createFromArcadeFeature=function(b){var d=new g;d._datesfixed=b._datesfixed;d.attributes=b.attributes;d._geometry=b._geometry;d._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(d._layer=b._layer);return d};g.createFromOptimisedFeature=function(b,d,e){var p=new g;p._geometry=b.geometry?{geometry:b.geometry}:null;p._optimizedGeomDefinition=e;p.attributes=b.attributes||{};p._layer=d;p._datesfixed=!1;return p};
g.createFromArcadeDictionary=function(b){var d=new g;d.attributes=b.field("attributes");null!==d.attributes?d.attributes instanceof n?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=b.field("geometry");null!==d._geometry&&(d._geometry instanceof n?d._geometry=g.parseGeometryFromDictionary(d._geometry):d._geometry instanceof q||(d._geometry=null));return d};g.createFromGraphicLikeObject=function(b,d,e){void 0===e&&(e=null);var p=
new g;null===d&&(d={});p.attributes=d;p._geometry=C.isSome(b)?b:null;p._layer=e;p._layer&&(p._datesfixed=!1);return p};g.prototype.repurposeFromGraphicLikeObject=function(b,d,e){void 0===e&&(e=null);null===d&&(d={});this.attributes=d;this._geometry=b?b:null;this._datesfixed=(this._layer=e)?!1:!0};g.prototype.castToText=function(){var b="",d;for(d in this.attributes){""!==b&&(b+=",");var e=this.attributes[d];null==e?b+=JSON.stringify(d)+":null":h.isBoolean(e)||h.isNumber(e)||h.isString(e)?b+=JSON.stringify(d)+
":"+JSON.stringify(e):e instanceof q?b+=JSON.stringify(d)+":"+h.toStringExplicit(e):e instanceof l?b+=JSON.stringify(d)+":"+h.toStringExplicit(e):e instanceof Array?b+=JSON.stringify(d)+":"+h.toStringExplicit(e):e instanceof Date?b+=JSON.stringify(d)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(b+=JSON.stringify(d)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":h.toStringExplicit(this.geometry()))+',"attributes":{'+b+"}}"};g.prototype._fixDates=
function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],d=0;d<this._layer.fields.length;d++){var e=this._layer.fields[d];"date"!==e.type&&"esriFieldTypeDate"!==e.type||b.push(e.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};g.prototype._fixDateFields=function(b){this.attributes=t({},this.attributes);for(var d=0;d<b.length;d++){var e=this.attributes[b[d]];if(null!==e)if(void 0===e)for(var g in this.attributes){if(g.toLowerCase()===
b[d].toLowerCase()){e=this.attributes[g];null===e||e instanceof Date||(this.attributes[g]=new Date(e));break}}else e instanceof Date||(this.attributes[b[d]]=new Date(e))}};g.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof q)return this._geometry;this._optimizedGeomDefinition?(this._geometry=C.unwrap(b.fromJSON(e.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=
this._optimizedGeomDefinition.spatialReference):this._geometry=C.unwrap(b.fromJSON(this._geometry));return this._geometry};g.prototype.field=function(b){!1===this._datesfixed&&this._fixDates();var d=this.attributes[b];if(void 0!==d)return d;b=b.toLowerCase();for(var e in this.attributes)if(e.toLowerCase()===b)return this.attributes[e];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};g.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var d=0;d<
this._layer.fields.length;d++)if(this._layer.fields[d].name.toLowerCase()===b)return!0;return!1};g.prototype._field=function(b){!1===this._datesfixed&&this._fixDates();var d=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var e in this.attributes)if(e.toLowerCase()===d)return this.attributes[e];return null};g.prototype.setField=function(b,d){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(d))throw Error("Illegal Value Assignment to Feature");var e=b.toLowerCase();
if(void 0===this.attributes[b])for(var g in this.attributes)if(g.toLowerCase()===e){this.attributes[g]=d;return}this.attributes[b]=d};g.prototype.hasField=function(b){var d=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var e in this.attributes)if(e.toLowerCase()===d)return!0;return this._hasFieldDefinition(d)?!0:!1};g.prototype.keys=function(){var b=[],d={},e;for(e in this.attributes)b.push(e),d[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){var g=
this._layer.fields[e];1!==d[g.name.toLowerCase()]&&b.push(g.name)}return b=b.sort()};g.parseGeometryFromDictionary=function(d){d=g.convertDictionaryToJson(d,!0);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);void 0!==d.rings&&(d.rings=this.fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasM));void 0!==d.paths&&(d.paths=this.fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));void 0!==d.points&&(d.points=this.fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return b.fromJSON(d)};
g.fixPathArrays=function(b,d,e){var g=[];if(b instanceof Array)for(var p=0;p<b.length;p++)g.push(this.fixPointArrays(b[p],d,e));else if(b instanceof l)for(p=0;p<b.length();p++)g.push(this.fixPointArrays(b.get(p),d,e));return g};g.fixPointArrays=function(b,e,g){var p=[];if(b instanceof Array)for(var h=0;h<b.length;h++){var n=b[h];n instanceof d?e&&g?p.push([n.x,n.y,n.z,n.m]):e?p.push([n.x,n.y,n.z]):g?p.push([n.x,n.y,n.m]):p.push([n.x,n.y]):n instanceof l?p.push(n.toArray()):p.push(n)}else if(b instanceof
l)for(h=0;h<b.length();h++)n=b.get(h),n instanceof d?e&&g?p.push([n.x,n.y,n.z,n.m]):e?p.push([n.x,n.y,n.z]):g?p.push([n.x,n.y,n.m]):p.push([n.x,n.y]):n instanceof l?p.push(n.toArray()):p.push(n);return p};g.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var e={},p;for(p in b.attributes){var h=b.attributes[p];h instanceof n&&(h=g.convertDictionaryToJson(h));d?e[p.toLowerCase()]=h:e[p]=h}return e};g.parseAttributesFromDictionary=function(b){var d={},e;for(e in b.attributes){var g=b.attributes[e];
if(h.isSimpleType(g))d[e]=g;else throw Error("Illegal Argument");}return d};g.fromJson=function(d){var e=null;null!==d.geometry&&void 0!==d.geometry&&(e=b.fromJSON(d.geometry));var p={};if(null!==d.attributes&&void 0!==d.attributes)for(var l in d.attributes){var n=d.attributes[l];if(null===n)p[l]=n;else if(h.isString(n)||h.isNumber(n)||h.isBoolean(n)||h.isDate(n))p[l]=n;else throw Error("Illegal Argument");}return g.createFromGraphicLikeObject(e,p,null)};g.prototype.domainValueLookup=function(b,d,
e){if(null===this._layer||!this._layer.fields)return null;e=h.getDomain(b,this._layer,this,e);if(void 0===d)try{d=this.field(b)}catch(x){return null}return h.getDomainValue(e,d)};g.prototype.domainCodeLookup=function(b,d,e){if(null===this._layer||!this._layer.fields)return null;if(void 0===d){try{d=this.field(b)}catch(x){return null}return d}b=h.getDomain(b,this._layer,this,e);return h.getDomainCode(b,d)};return g}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(H,f,t,n,l,h,q,d){function b(a,c){return a?c?4:3:c?3:2}function e(a,c){return Math.round((c-a.translate[0])/a.scale[0])}function C(a,c){return Math.round((a.translate[1]-c)/a.scale[1])}function g(a,c){return c*a.scale[0]+a.translate[0]}function p(a,c){return a.translate[1]-c*a.scale[1]}function z(a){a=a.coords;return{x:a[0],y:a[1]}}function A(a,c){a.coords[0]=c.x;a.coords[1]=c.y;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function P(a,c){a.coords[0]=c.x;a.coords[1]=c.y;
a.coords[2]=c.z;return a}function Z(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function ga(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.m;return a}function B(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function a(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.z;a.coords[3]=c.m;return a}function m(c,b){return c&&b?a:c?P:b?ga:A}function c(a,c,d){if(!a)return null;for(var m=b(c,d),e=[],k=0;k<a.coords.length;k+=m){for(var g=[],p=0;p<m;p++)g.push(a.coords[k+p]);e.push(g)}return c?d?{points:e,
hasZ:c,hasM:d}:{points:e,hasZ:c}:d?{points:e,hasM:d}:{points:e}}function w(a,c,d){void 0===d&&(d=b(c.hasZ,c.hasM));a.lengths[0]=c.points.length;var m=a.coords,e=0,k=0;for(c=c.points;k<c.length;k++)for(var g=c[k],p=0;p<d;p++)m[e++]=g[p];return a}function K(a,c,d){if(!a)return null;var m=b(c,d),e=a.coords,k=[],g=0,p=0;for(a=a.lengths;p<a.length;p++){for(var h=a[p],l=[],n=0;n<h;n++){for(var f=[],w=0;w<m;w++)f.push(e[g++]);l.push(f)}k.push(l)}return c?d?{paths:k,hasZ:c,hasM:d}:{paths:k,hasZ:c}:d?{paths:k,
hasM:d}:{paths:k}}function v(a,c,d){void 0===d&&(d=b(c.hasZ,c.hasM));var m=a.lengths,e=a.coords,k=0,g=0;for(c=c.paths;g<c.length;g++){for(var p=c[g],h=0,l=p;h<l.length;h++)for(var n=l[h],f=0;f<d;f++)e[k++]=n[f];m.push(p.length)}return a}function R(a,c,d){if(!a)return null;var m=b(c,d),e=a.coords,k=[],g=0,p=0;for(a=a.lengths;p<a.length;p++){for(var h=a[p],l=[],n=0;n<h;n++){for(var f=[],w=0;w<m;w++)f.push(e[g++]);l.push(f)}k.push(l)}return c?d?{rings:k,hasZ:c,hasM:d}:{rings:k,hasZ:c}:d?{rings:k,hasM:d}:
{rings:k}}function S(a,c,d,m){void 0===d&&(d=c.hasZ);void 0===m&&(m=c.hasM);d=b(d,m);m=a.lengths;var e=a.coords,k=0,g=m.length=e.length=0;for(c=c.rings;g<c.length;g++){for(var p=c[g],h=0,l=p;h<l.length;h++)for(var n=l[h],f=0;f<d;f++)e[k++]=n[f];m.push(p.length)}return a}function N(a,c,e,g,p,l){a.length=0;if(!e){for(g=0;g<c.length;g++)p=c[g],a.push(new h.default(null,p.attributes,null,p.attributes[l]));return a}switch(e){case "esriGeometryPoint":g=m(g,p);for(p=0;p<c.length;p++){var k=c[p];e=k.geometry;
var k=k.attributes,n=void 0;e&&(n=g(new d.default,e));a.push(new h.default(n,k,null,k[l]))}break;case "esriGeometryMultipoint":g=b(g,p);for(p=0;p<c.length;p++)k=c[p],e=k.geometry,k=k.attributes,n=void 0,e&&(n=w(new d.default,e,g)),a.push(new h.default(n,k,null,k[l]));break;case "esriGeometryPolyline":g=b(g,p);for(p=0;p<c.length;p++)k=c[p],e=k.geometry,k=k.attributes,n=void 0,e&&(n=v(new d.default,e,g)),a.push(new h.default(n,k,null,k[l]));break;case "esriGeometryPolygon":for(e=0;e<c.length;e++){var ea=
c[e],k=ea.geometry,n=ea.centroid,ea=ea.attributes,f=void 0;k&&(f=S(new d.default,k,g,p));n?a.push(new h.default(f,ea,A(new d.default,n),ea[l])):a.push(new h.default(f,ea,null,ea[l]))}break;default:F.error("convertToFeatureSet:unknown-geometry",new t("Unable to parse unknown geometry type '"+e+"'")),a.length=0}return a}function ha(a,b,d,m,e){a.length=0;switch(d){case "esriGeometryPoint":d=z;m&&e?d=B:m?d=x:e&&(d=Z);for(m=0;m<b.length;m++){var k=b[m];e=k.geometry;k=k.attributes;e=e?d(e):null;a.push({attributes:k,
geometry:e})}break;case "esriGeometryMultipoint":for(d=0;d<b.length;d++){var g=b[d],k=g.geometry,g=g.attributes,p=void 0;k&&(p=c(k,m,e));a.push({attributes:g,geometry:p})}break;case "esriGeometryPolyline":for(d=0;d<b.length;d++)g=b[d],k=g.geometry,g=g.attributes,p=void 0,k&&(p=K(k,m,e)),a.push({attributes:g,geometry:p});break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var p=b[d],g=p.geometry,k=p.attributes,h=p.centroid,p=void 0;g&&(p=R(g,m,e));h?(g=z(h),a.push({attributes:k,centroid:g,geometry:p})):
a.push({attributes:k,geometry:p})}break;default:F.error("convertToFeatureSet:unknown-geometry",new t("Unable to parse unknown geometry type '"+d+"'"))}return a}function Y(a,c,d,m,g,p){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;g=da[g];var k=c.coords;c=c.lengths;var h=b(d,m);d=d?m?ba:W:m?W:I;if(!c.length)return d(a.coords,k,0,0,e(p,k[0]),C(p,k[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var l,n,f,w=0,q,B=0,
z=0;z<c.length;z++){var v=c[z];if(!(v<g)){var A=0;q=B;n=m=e(p,k[w]);f=l=C(p,k[w+1]);d(a.coords,k,q,w,n,f);A++;w+=h;q+=h;for(var x=1;x<v;x++,w+=h)if(n=e(p,k[w]),f=C(p,k[w+1]),n!==m||f!==l)d(a.coords,k,q,w,n-m,f-l),q+=h,A++,m=n,l=f;A>=g&&(a.lengths.push(A),B=q)}}a.coords.length=B;return a.coords.length?a:null}function fa(a,c,b,d,m,e,g){for(var k=g-b,p=0,h=0,l,n=e+b;n<g-b;n+=b){l=c[n];var f=c[n+1],w=c[e],C=c[e+1],q=c[k],B=c[k+1];w===q?l=Math.abs(l-w):(q=(B-C)/(q-w),l=Math.abs(q*l-f+(C-q*w))/Math.sqrt(q*
q+1));l>p&&(h=n,p=l)}p>d?(fa(a,c,b,d,m,e,h+b),fa(a,c,b,d,m,h,g)):(m(a,c,a.length,e,c[e],c[e+1]),m(a,c,a.length,k,c[k],c[k+1]))}function na(a,c,d,m,e){var k=c.coords,h=c.lengths,l=d?m?ba:W:m?W:I;d=b(d,m);if(!k.length)return a!==c&&(a.lengths.length=0,a.coords.length=0),a;if(!h.length)return l(a.coords,k,0,0,g(e,k[0]),p(e,k[1])),a!==c&&(a.lengths.length=0,a.coords.length=d),a;var n=e.scale;m=n[0];for(var n=n[1],f=0,w=0;w<h.length;w++){var C=h[w];a.lengths[w]=C;var q=g(e,k[f]),B=p(e,k[f+1]);l(a.coords,
k,f,f,q,B);for(var f=f+d,z=1;z<C;z++,f+=d)q+=k[f]*m,B-=k[f+1]*n,l(a.coords,k,f,f,q,B)}a!==c&&(a.lengths.length=h.length,a.coords.length=k.length);return a}Object.defineProperty(f,"__esModule",{value:!0});var F=n.getLogger("esri.tasks.support.optimizedFeatureSet"),da={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},I=function(a,c,b,d,m,e){a[b]=m;a[b+1]=e},W=function(a,c,b,d,m,e){a[b]=m;a[b+1]=e;a[b+2]=c[d+2]},ba=function(a,c,b,d,m,e){a[b]=m;a[b+1]=e;a[b+2]=
c[d+2];a[b+3]=c[d+3]};f.quantizeX=e;f.quantizeY=C;f.hydrateX=g;f.hydrateY=p;f.convertToPoint=function(a,c,b){return a?c?b?B(a):x(a):b?Z(a):z(a):null};f.convertFromPoint=function(a,c,b){void 0===b&&(b=m(null!=c.z,null!=c.m));return b(a,c)};f.convertToMultipoint=c;f.convertFromMultipoint=w;f.convertToPolyline=K;f.convertToPolygon=R;f.convertFromPolygon=S;var u=[],V=[];f.convertFromFeature=function(a,c,b,d,m){u[0]=a;a=N(V,u,c,b,d,m)[0];u.length=V.length=0;return a};f.convertFromFeatures=N;f.convertToFeature=
function(a,c,b,d){V[0]=a;ha(u,V,c,b,d);a=u[0];u.length=V.length=0;return a};f.convertFromGeometry=function(a,c,e){if(!a)return null;var g=new d.default;"hasZ"in a&&null==c&&(c=a.hasZ);"hasM"in a&&null==e&&(e=a.hasM);if(l.isPoint(a))return m(null!=c?c:null!=a.z,null!=e?e:null!=a.m)(g,a);if(l.isPolygon(a))return S(g,a,c,e);if(l.isPolyline(a))return v(g,a,b(c,e));if(l.isMultipoint(a))return w(g,a,b(c,e));F.error("convertFromGeometry:unknown-geometry",new t("Unable to parse unknown geometry type '"+a+
"'"))};f.convertToGeometry=function(a,b,d,m){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=z,d&&m?b=B:d?b=x:m&&(b=Z),b(a);case "esriGeometryMultipoint":return c(a,d,m);case "esriGeometryPolyline":return K(a,d,m);case "esriGeometryPolygon":return R(a,d,m);default:F.error("convertToGeometry:unknown-geometry",new t("Unable to parse unknown geometry type '"+b+"'"))}};f.convertToFeatures=ha;f.convertToFeatureSet=function(a){var c=a.objectIdFieldName,b=a.spatialReference,
d=a.transform,m=a.fields,e=a.hasM,g=a.hasZ,k=a.geometryType,p=a.exceededTransferLimit;a={features:ha([],a.features,k,g,e),fields:m,geometryType:k,objectIdFieldName:c,spatialReference:b};d&&(a.transform=d);p&&(a.exceededTransferLimit=p);e&&(a.hasM=e);g&&(a.hasZ=g);return a};f.convertFromFeatureSet=function(a,c){var b=new q.default,d=a.hasM,m=a.hasZ,e=a.features,g=a.objectIdFieldName,k=a.spatialReference,p=a.geometryType,h=a.exceededTransferLimit,l=a.transform;b.fields=a.fields;b.geometryType=p;b.objectIdFieldName=
g||c;b.spatialReference=k;if(!b.objectIdFieldName)return F.error(new t("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),b;e&&N(b.features,e,p,m,d,b.objectIdFieldName);h&&(b.exceededTransferLimit=h);d&&(b.hasM=d);m&&(b.hasZ=m);l&&(b.transform=l);return b};f.hydrateOptimizedFeatureSet=function(a){var c=a.transform,b=a.hasM,d=a.hasZ;if(!c)return a;for(var m=0,e=a.features;m<e.length;m++){var g=e[m];g.geometry&&na(g.geometry,g.geometry,b,d,c);g.centroid&&na(g.centroid,g.centroid,
b,d,c)}a.transform=null;return a};f.quantizeOptimizedFeatureSet=function(a,c){var b=c.geometryType,m=c.features,e=c.hasM,g=c.hasZ;if(!a)return c;for(var k=0;k<m.length;k++){var p=m[k],l=new h.default(new d.default,p.attributes);Y(l.geometry,p.geometry,e,g,b,a);p.centroid&&(l.centroid=new d.default,Y(l.centroid,p.centroid,e,g,"esriGeometryPoint",a));m[k]=l}c.transform=a;return c};f.quantizeOptimizedGeometry=Y;f.quantizeOptimizedGeometryRemoveCollinear=function(a,c,d,m,g,p){a.lengths.length&&(a.lengths.length=
0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;g=da[g];var k=c.coords;c=c.lengths;var h=b(d,m);d=d?m?ba:W:m?W:I;if(!c.length)return d(a.coords,k,0,0,e(p,k[0]),C(p,k[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var l,n,f,w=0,q,B=0,z=0;z<c.length;z++){var v=c[z];if(!(v<g)){var A=0;q=B;m=l=e(p,k[w]);f=n=C(p,k[w+1]);d(a.coords,k,q,w,m,f);A++;for(var w=w+h,x=!1,K=0,t=0,ga=1;ga<v;ga++,w+=h)if(m=e(p,k[w]),f=C(p,k[w+1]),m!==l||f!==n)l=m-l,n=f-n,x&&(0===
K&&0===l||0===t&&0===n)?(K+=l,t+=n):(x=!0,K=l,t=n,q+=h,A++),d(a.coords,k,q,w,K,t),l=m,n=f;x&&(q+=h,d(a.coords,k,q,w,K,t));A>=g&&(a.lengths.push(A),B=q)}}a.coords.length!==B&&(a.coords.length=B);return a.coords.length?a:null};f.generalizeOptimizedGeometry=function(a,c,d,m,e,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;e=da[e];var p=c.coords;c=c.lengths;var k=b(d,m);d=d?m?ba:W:m?W:I;if(!c.length)return d(a.coords,p,0,0,p[0],p[1]),
a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var h=m=0;h<c.length;h++){var l=c[h];if(!(l<e)){var n=a.coords.length/k;fa(a.coords,p,k,g,d,m,m+l*k);var f=a.coords.length/k-n;f>=e?a.lengths.push(f):a.coords.length=n*k}m+=l*k}return a.coords.length?a:null};f.getBoundsOptimizedGeometry=function(a,c,d,m){d=b(d,m);var e=m=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(c&&c.coords){c=c.coords;for(var k=0;k<c.length;k+=d){var h=c[k],l=c[k+1];m=Math.min(m,
h);g=Math.max(g,h);e=Math.min(e,l);p=Math.max(p,l)}}a[0]=m;a[1]=e;a[2]=g;a[3]=p;return a};f.getQuantizedBoundsOptimizedGeometry=function(a,c,d,m){d=b(d,m);m=c.coords;var e=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY,h=0,l=0;for(c=c.lengths;l<c.length;l++)for(var n=c[l],f=m[h],w=m[h+1],e=Math.min(f,e),g=Math.min(w,g),p=Math.max(f,p),k=Math.max(w,k),h=h+d,C=1;C<n;C++,h+=d){var q=m[h],B=m[h+1],f=f+q,w=w+B;0>q&&(e=Math.min(e,f));0<q&&(p=Math.max(p,
f));0>B?g=Math.min(g,w):0<B&&(k=Math.max(k,w))}a[0]=e;a[1]=g;a[2]=p;a[3]=k;return a};f.hydrateOptimizedGeometry=na})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(H,f){function t(a,b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function n(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature=
{min:"0",max:"*"}),t(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),t(d.signature,a,b,c)):-1}function l(a,b){if(a)for(var c=0;c<a.length;c++)h(a[c],b)}function h(a,b){if(a&&!1!==b(a))switch(a.type){case "ArrayExpression":l(a.elements,b);break;case "AssignmentExpression":case "BinaryExpression":h(a.left,b);h(a.right,b);break;case "BlockStatement":l(a.body,
b);break;case "CallExpression":h(a.callee,b);l(a.arguments,b);break;case "ConditionalExpression":h(a.test,b);h(a.alternate,b);h(a.consequent,b);break;case "DoWhileStatement":h(a.test,b);h(a.body,b);break;case "ExpressionStatement":h(a.expression,b);break;case "ForInStatement":h(a.left,b);h(a.right,b);h(a.body,b);break;case "ForStatement":h(a.init,b);h(a.test,b);h(a.update,b);h(a.body,b);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":h(a.id,b);l(a.params,b);h(a.body,
b);break;case "IfStatement":h(a.test,b);h(a.consequent,b);h(a.alternate,b);break;case "LogicalExpression":h(a.left,b);h(a.right,b);break;case "MemberExpression":h(a.object,b);h(a.property,b);break;case "NewExpression":h(a.callee,b);l(a.arguments,b);break;case "ObjectExpression":l(a.properties,b);break;case "Program":l(a.body,b);break;case "Property":h(a.key,b);h(a.value,b);break;case "ReturnStatement":h(a.argument,b);break;case "UnaryExpression":h(a.argument,b);break;case "UpdateExpression":h(a.argument,
b);break;case "VariableDeclaration":l(a.declarations,b);break;case "VariableDeclarator":h(a.id,b),h(a.init,b)}}function q(a,b){void 0===b&&(b=!0);var c=p(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?p(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?q(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=q(a.declarations[d],
b),""!==c)return c;return"";case "ForInStatement":c=q(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,"SYNTAX","LEFTNOTVAR");c=q(a.right,b);if(""!==c)break;c=q(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=q(a.test,b),""!==c))break;if(null!==a.init&&(c=q(a.init,b),
""!==c))break;if(null!==a.update&&(c=q(a.update,b),""!==c))break;if(null!==a.body&&(c=q(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=q(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=q(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=q(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var e=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&e.push(a.body[d]);
a.body=e;for(d=0;d<a.body.length;d++)if(c=q(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?p(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?p(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):q(a.body,!1);case "ReturnStatement":return null!==a.argument?q(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?p(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):q(a.argument,b);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=q(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return q(a.right,!1);case "ExpressionStatement":return q(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=q(a.object,b);if(""!==c)break;return!0===a.computed?q(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==
a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=q(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=q(a.argument,b);break;case "BinaryExpression":c=q(a.left,b);if(""!==c)break;c=q(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
q(a.left,b);if(""!==c)break;c=q(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=q(a.elements[d],b),""===c);d++);break;case "ObjectExpression":c="";for(d=0;d<a.properties.length;d++){c="";if(null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&
(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type)){var e=a.properties[d].key,m="value"in e?e.value:null;"string"===typeof m||m instanceof String||(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=q(a.properties[d],b));if(""!==c)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=q(a.key,b),""!==c))break;c=q(a.value,b)}return c}catch(R){throw R;}}function d(a,
b){var c=p(a,"SYNTAX","UNREOGNISED"),m=null,g="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var h=null===a.init?"":d(a.init,b);if(""!==h)return h;"Identifier"===a.id.type&&(null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":m=e(a.id.name.toLowerCase(),a,b);g=C(a,b);if(""!==g)return g;if(null!==
b.localScope)return p(a,"SYNTAX","GLOBALFUNCTIONSONLY");m.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[m]};return"";case "VariableDeclaration":for(var c="",l=0;l<a.declarations.length&&(c=d(a.declarations[l],b),""===c);l++);break;case "IfStatement":c=d(a.test,b);if(""!==c)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return p(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(c=d(a.consequent,b),
""!==c))break;if(null!==a.alternate&&(c=d(a.alternate,b),""!==c))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(l=0;l<a.body.length;l++)if(c=d(a.body[l],b),""!==c)return c;return"";case "ReturnStatement":return null!==a.argument?d(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,
"SYNTAX","LEFTNOTVAR");c=d(a.left,b);if(""!==c)break;c=d(a.right,b);if(""!==c)break;c=d(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.init&&(c=d(a.init,b),""!==c))break;if(null!==a.test&&(c=d(a.test,b),""!==c))break;if(null!==a.body&&(c=d(a.body,b),""!==c))break;if(null!==a.update&&(c=d(a.update,b),""!==c))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return p(a,
"SYNTAX","ASSIGNMENTTOVARSONLY");var f=!1;if("MemberExpression"===a.argument.type)return d(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(f=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(f=!0);return!1===f?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=d(a.right,b);if(""!==q)return q;f=!1;if("MemberExpression"===
a.left.type)return q=d(a.left,b),""!==q?q:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(f=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(f=!0);return!1===f?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return d(a.expression,b);case "Identifier":var B=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[B])return"";c=void 0!==b.globalScope[B]?"":p(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":c=d(a.object,
b);if(""!==c)break;return!0===a.computed?d(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(l=0;l<a.arguments.length;l++)if(c=d(a.arguments[l],b),""!==c)return c;var z=n(a.callee.name,a.arguments,b);-1===z&&(c=p(a,"SYNTAX","NOTFOUND"));-2===z&&(c=p(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":c=d(a.argument,b);break;case "BinaryExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right,b);if(""!==
c)break;return"";case "LogicalExpression":c=d(a.left,b);if(""!==c)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return p(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");c=d(a.right,b);if(""!==c)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?p(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(l=0;l<a.elements.length&&
(c=d(a.elements[l],b),""===c);l++);break;case "ObjectExpression":c="";for(l=0;l<a.properties.length;l++){c="";if(null!==a.properties[l].key&&("Literal"!==a.properties[l].key.type&&"Identifier"!==a.properties[l].key.type&&(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[l].key.type)){var A=a.properties[l].key,x="value"in A?A.value:null;"string"===typeof x||x instanceof String||(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=d(a.properties[l],b));if(""!==c)break}break;
case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=d(a.key,b),""!==c))break;c=d(a.value,b)}return c}catch(F){throw F;}}function b(a,b){var c=!1,d=b.toLowerCase();h(a,function(a){if(c)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===d&&(c=!0);return!0});return c}function e(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}
function C(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return d(a.body,b)}function g(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var m in b)"sync"===d&&void 0!==b[m].min?e[m]={type:"FormulaFunction",signature:{min:b[m].min,max:b[m].max}}:"sync"!==d&&void 0!==b[m].fmin&&(e[m]={type:"FormulaFunction",
signature:{min:b[m].fmin,max:b[m].fmax}});for(b=0;b<c.length;b++)m=c[b],e[m.name]={type:"FormulaFunction",signature:m};for(m in a)e[m]=a[m],e[m].type="any";return e}function p(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+=
"Cannot find member property. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:
"":""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":d+="Not a Function: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":d+=
"Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+=
"Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;default:d+="Expression contains unrecognised code structures."}}catch(K){throw K;}return d}function z(a,b,c){return{line:a.loc.start.line,
character:a.loc.start.column,reason:p(a,b,c)}}function A(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};x(a.body,b,c,d,!1)}function x(a,b,c,d,g){void 0===g&&(g=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var m=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){d.push(z(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==
a.id.type?d.push(z(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null!==a.init&&x(a.init,b,c,d,g);break;case "FunctionDeclaration":!1===g&&d.push(z(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&d.push(z(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));m=e("",a,b);A(a,b,c,d,g);null!==b.localScope&&d.push(z(a,"SYNTAX","GLOBALFUNCTIONSONLY"));m.isnative=
!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[m]});break;case "VariableDeclaration":for(var p=0;p<a.declarations.length;p++)x(a.declarations[p],b,c,d,g);break;case "IfStatement":null!==a.test&&(x(a.test,b,c,d,g),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||d.push(z(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&x(a.consequent,b,c,d,g);null!==a.alternate&&x(a.alternate,b,c,d,g);break;
case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(p=0;p<a.body.length;p++)x(a.body[p],b,c,d,g);break;case "ReturnStatement":null!==a.argument&&x(a.argument,b,c,d,g);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&d.push(z(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&d.push(z(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&d.push(z(a,"SYNTAX","LEFTNOTVAR"));x(a.left,b,c,d,g);x(a.right,b,c,d,g);x(a.body,
b,c,d,g);break;case "ForStatement":null!==a.init&&x(a.init,b,c,d,g);null!==a.test&&x(a.test,b,c,d,g);null!==a.body&&x(a.body,b,c,d,g);null!==a.update&&x(a.update,b,c,d,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?d.push(z(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(m=!1,!1===c&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(m=!0),
void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(m=!0),!1===m&&d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&x(a.argument,b,c,d,g));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&d.push(z(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:d.push(z(a,"SYNTAX","OPERATORNOTRECOGNISED"))}x(a.right,b,c,d,g);m=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(m=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(m=!0),!1===c&&!1===m&&d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&x(a.left,b,c,d,g);break;case "ExpressionStatement":x(a.expression,
b,c,d,g);break;case "Identifier":var h=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[h])break;if(void 0!==b.globalScope[h])break;!1===c&&d.push(z(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":x(a.object,b,c,d,g);!0===a.computed&&x(a.property,b,c,d,g);break;case "Literal":return"";case "CallExpression":"Identifier"!==a.callee.type&&d.push(z(a,"SYNTAX","ONLYNODESSUPPORTED"));for(p=0;p<a.arguments.length;p++)x(a.arguments[p],b,c,d,g);if("Identifier"===a.callee.type){var l=
n(a.callee.name,a.arguments,b);!1===c&&-1===l&&d.push(z(a,"SYNTAX","NOTFOUND"));-2===l&&d.push(z(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":x(a.argument,b,c,d,g);break;case "BinaryExpression":x(a.left,b,c,d,g);x(a.right,b,c,d,g);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:d.push(z(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:d.push(z(a,"SYNTAX","OPERATORNOTRECOGNISED"))}x(a.left,b,c,d,g);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||d.push(z(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));x(a.right,b,c,d,g);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||d.push(z(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":d.push(z(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(p=0;p<a.elements.length;p++)x(a.elements[p],
b,c,d,g);break;case "ObjectExpression":for(p=0;p<a.properties.length;p++)x(a.properties[p],b,c,d,g);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&d.push(z(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&x(a.key,b,c,d,g);x(a.value,b,c,d,g);break;default:d.push(z(a,"SYNTAX","UNRECOGNISED"))}}catch(ha){d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function P(a,b){var c=[];h(a,function(a){"CallExpression"===
a.type&&"Identifier"===a.callee.type&&c.push(a.callee.name.toLowerCase());return!0});return c}Object.defineProperty(f,"__esModule",{value:!0});f.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},
millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",
max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var Z in f.functionDecls)f.functionDecls[Z].fmin=f.functionDecls[Z].min,f.functionDecls[Z].fmax=f.functionDecls[Z].max;var ga="featureset featuresetbyid featuresetbyname featuresetbyurl attachments featuresetbyportalitem".split(" "),B="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
f.addFunctionDeclaration=function(a,b){var c=f.functionDecls[a.name.toLowerCase()];void 0===c?"sync"===b?f.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:f.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===b?(c.min=a.min,c.max=a.max):(c.fmin=a.min,c.fmax=a.max)};f.checkFunctionSignature=t;f.findFunction=n;f.walk=h;f.validateLanguageNode=q;f.testValidityOfExpression=d;f.referencesMember=b;f.referencesFunction=function(a,b){var c=!1,d=b.toLowerCase();h(a,function(a){return c?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===d?(c=!0,!1):!0});return c};f.findFieldLiterals=function(a,b){var c=[];h(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return c};f.extractFunctionDeclaration=e;f.validateFunction=C;f.constructGlobalScope=g;f.validateScript=function(a,b,c,e){void 0===c&&(c="async");void 0===e&&(e=f.functionDecls);b={globalScope:g(b.vars,e,b.customFunctions,c),localScope:null};return d(a.body[0].body,b)};f.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":q(a.body[0].body)};
f.nodeErrorMessage=p;f.makeError=z;f.extractAllIssuesInFunction=A;f.extractAllIssues=x;f.checkScript=function(a,b,c,d,e){void 0===d&&(d="async");void 0===e&&(e=f.functionDecls);var m=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:g(b.vars,e,b.customFunctions,d),localScope:null};try{x(a.body[0].body,b,c,m)}catch(R){}return m};f.findFunctionCalls=P;f.findScriptDependencies=function(a,
d){void 0===d&&(d=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=P(a,!1));a.usesFeatureSet=!1;for(var e=0;e<c.length;e++)-1<ga.indexOf(c[e])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&d&&0<d.length)for(e=0;e<d.length;e++)if(b(a,d[e])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=P(a,!1)),e=0;e<c.length;e++)-1<B.indexOf(c[e])&&(a.usesGeometry=!0)};f.scriptUsesFeatureSet=function(a){a=
P(a,!1);for(var b=0;b<a.length;b++)if(-1<ga.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(H,f,t,n){function l(h){return null===h?h:isNaN(h.getTime())?null:h}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(h,f){h.today=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,0,0);b=new Date;b.setHours(0,0,0,0);return b})};h.now=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,
0,0);return new Date})};h.timestamp=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};h.toutc=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};h.tolocal=
function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?null:t.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};h.day=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getDate()})};h.month=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getMonth()})};h.year=function(d,b){return f(d,b,function(b,
d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getFullYear()})};h.hour=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getHours()})};h.second=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getSeconds()})};h.millisecond=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getMilliseconds()})};h.minute=function(d,b){return f(d,b,function(b,
d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getMinutes()})};h.weekday=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,1,1);b=n.toDate(g[0]);return null===b?NaN:b.getDay()})};h.date=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,0,7);if(3===g.length)return l(new Date(n.toNumber(g[0]),n.toNumber(g[1]),n.toNumber(g[2]),0,0,0,0));if(4===g.length)return l(new Date(n.toNumber(g[0]),n.toNumber(g[1]),n.toNumber(g[2]),n.toNumber(g[3]),0,0,0));if(5===g.length)return l(new Date(n.toNumber(g[0]),
n.toNumber(g[1]),n.toNumber(g[2]),n.toNumber(g[3]),n.toNumber(g[4]),0,0));if(6===g.length)return l(new Date(n.toNumber(g[0]),n.toNumber(g[1]),n.toNumber(g[2]),n.toNumber(g[3]),n.toNumber(g[4]),n.toNumber(g[5]),0));if(7===g.length)return l(new Date(n.toNumber(g[0]),n.toNumber(g[1]),n.toNumber(g[2]),n.toNumber(g[3]),n.toNumber(g[4]),n.toNumber(g[5]),n.toNumber(g[6])));if(2===g.length){b=n.toString(g[1]);if(""===b)return null;b=n.standardiseDateFormat(b);g=t(n.toString(g[0]),b,!0);return!0===g.isValid()?
g.toDate():null}if(1===g.length){if(n.isString(g[0])&&""===g[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=n.toNumber(g[0]);return!1===isNaN(b)?l(new Date(b)):n.toDate(g[0])}if(0===g.length)return new Date})};h.datediff=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,2,3);b=n.toDateM(g[0]);d=n.toDateM(g[1]);if(null===b||null===d)return NaN;switch(n.toString(g[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(d,"days",!0);case "months":case "month":return b.diff(d,
"months",!0);case "minutes":case "minute":case "m":return"M"===g[2]?b.diff(d,"months",!0):b.diff(d,"minutes",!0);case "seconds":case "second":case "s":return b.diff(d,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(d);case "hours":case "hour":case "h":return b.diff(d,"hours",!0);case "years":case "year":case "y":return b.diff(d,"years",!0);default:return b.diff(d)}})};h.dateadd=function(d,b){return f(d,b,function(b,d,g){n.pcCheck(g,2,3);b=n.toDateM(g[0]);if(null===b)return null;
d="milliseconds";switch(n.toString(g[2]).toLowerCase()){case "days":case "day":case "d":d="days";break;case "months":case "month":d="months";break;case "minutes":case "minute":case "m":d="M"===g[2]?"months":"minutes";break;case "seconds":case "second":case "s":d="seconds";break;case "milliseconds":case "millisecond":case "ms":d="milliseconds";break;case "hours":case "hour":case "h":d="hours";break;case "years":case "year":case "y":d="years"}b.add(n.toNumber(g[1]),d);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(H,f,t,n,l,h,q,d,b,e,C,g,p,z,A){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,P){f.ringisclockwise=function(b,d){return P(b,d,function(b,a,d){h.pcCheck(d,1,1);b=[];var c=a=!1;if(null===d[0])return!1;if(h.isArray(d[0])){for(var g=0,m=d[0];g<m.length;g++){var p=m[g];if(p instanceof e)b.push(p.hasZ?p.hasM?[p.x,p.y,p.z,p.m]:[p.x,p.y,p.z]:[p.x,p.y]);else throw Error("Invalid Argument");}0<b.length&&(a=d[0][0].hasZ,c=d[0][0].hasM)}else if(d[0]instanceof l)b=d[0]._elements,
0<b.length&&(a=d[0]._hasZ,c=d[0]._hasM);else if(h.isImmutableArray(d[0])){g=0;for(m=d[0].toArray();g<m.length;g++)if(p=m[g],p instanceof e)b.push(p.hasZ?p.hasM?[p.x,p.y,p.z,p.m]:[p.x,p.y,p.z]:[p.x,p.y]);else throw Error("Invalid Argument");0<b.length&&(a=d[0].get(0).hasZ,c=d[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>b.length?!1:A.isClockwise(b,c,a)})};f.polygon=function(b,d){return P(b,d,function(d,a,e){h.pcCheck(e,1,1);d=null;if(e[0]instanceof t){if(d=h.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference),!1===d instanceof C)throw Error("Illegal Parameter");}else d=e[0]instanceof C?z.fromJSON(e[0].toJSON()):h.fixSpatialReference(new C(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(d)})};f.polyline=function(b,d){return P(b,d,function(d,a,e){h.pcCheck(e,1,1);d=null;if(e[0]instanceof t){if(d=h.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference),!1===d instanceof g)throw Error("Illegal Parameter");}else d=e[0]instanceof g?z.fromJSON(e[0].toJSON()):h.fixSpatialReference(new g(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(d)})};f.point=function(b,d){return P(b,d,function(d,a,g){h.pcCheck(g,1,1);d=null;if(g[0]instanceof t){if(d=h.fixSpatialReference(n.parseGeometryFromDictionary(g[0]),
b.spatialReference),!1===d instanceof e)throw Error("Illegal Parameter");}else d=g[0]instanceof e?z.fromJSON(g[0].toJSON()):h.fixSpatialReference(new e(JSON.parse(g[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(d)})};f.multipoint=function(d,e){return P(d,e,function(e,a,g){h.pcCheck(g,1,1);e=null;if(g[0]instanceof t){if(e=
h.fixSpatialReference(n.parseGeometryFromDictionary(g[0]),d.spatialReference),!1===e instanceof b)throw Error("Illegal Parameter");}else e=g[0]instanceof b?z.fromJSON(g[0].toJSON()):h.fixSpatialReference(new b(JSON.parse(g[0])),d.spatialReference);if(null!==e&&!1===e.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(e)})};f.extent=function(d,p){return P(d,p,function(p,
a,m){m=h.autoCastFeatureToGeometry(m);h.pcCheck(m,1,1);p=null;m[0]instanceof t?p=h.fixSpatialReference(n.parseGeometryFromDictionary(m[0]),d.spatialReference):m[0]instanceof e?(p={xmin:m[0].x,ymin:m[0].y,xmax:m[0].x,ymax:m[0].y,spatialReference:m[0].spatialReference.toJSON()},m[0].hasZ?(p.zmin=m[0].z,p.zmax=m[0].z):m[0].hasM&&(p.mmin=m[0].m,p.mmax=m[0].m),p=z.fromJSON(p)):p=m[0]instanceof C?z.fromJSON(m[0].extent.toJSON()):m[0]instanceof g?z.fromJSON(m[0].extent.toJSON()):m[0]instanceof b?z.fromJSON(m[0].extent.toJSON()):
m[0]instanceof q?z.fromJSON(m[0].toJSON()):h.fixSpatialReference(new q(JSON.parse(m[0])),d.spatialReference);if(null!==p&&!1===p.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(p)})};f.geometry=function(b,d){return P(b,d,function(d,a,e){h.pcCheck(e,1,1);d=null;d=e[0]instanceof n?h.fixSpatialReference(e[0].geometry(),b.spatialReference):e[0]instanceof t?h.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference):h.fixSpatialReference(z.fromJSON(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(d)})};f.setgeometry=function(b,e){return P(b,e,function(b,a,e){h.pcCheck(e,2,2);if(e[0]instanceof n){if(!0===e[0].immutable)throw Error("Feature is Immutable");if(e[1]instanceof d||null===e[1])e[0]._geometry=e[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return h.voidOperation})};f.feature=function(b,e){return P(b,e,function(e,a,g){if(0===g.length)throw Error("Missing Parameters");e=null;if(1===g.length)if(h.isString(g[0]))e=n.fromJson(JSON.parse(g[0]));else if(g[0]instanceof n)e=n.createFromArcadeFeature(g[0]);else if(g[0]instanceof d)e=n.createFromGraphicLikeObject(g[0],null,null);else if(g[0]instanceof t)e=g[0].hasField("geometry")?g[0].field("geometry"):null,a=g[0].hasField("attributes")?
g[0].field("attributes"):null,null!==e&&e instanceof t&&(e=n.parseGeometryFromDictionary(e)),null!==a&&(a=n.parseAttributesFromDictionary(a)),e=n.createFromGraphicLikeObject(e,a,null);else throw Error("Illegal Argument");else{if(2===g.length){a=e=null;if(null!==g[0])if(g[0]instanceof d)e=g[0];else if(e instanceof t)e=n.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");if(null!==g[1])if(g[1]instanceof t)a=n.parseAttributesFromDictionary(g[1]);else throw Error("Illegal Argument");
}else{e=null;a={};if(null!==g[0])if(g[0]instanceof d)e=g[0];else if(e instanceof t)e=n.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");for(var c=1;c<g.length;c+=2){var p=h.toString(g[c]),m=g[c+1];if(null===m||void 0===m||h.isString(m)||isNaN(m)||h.isDate(m)||h.isNumber(m)||h.isBoolean(m)){if(h.isFunctionParameter(m)||!1===h.isSimpleType(m))throw Error("Illegal Argument");a[p]=m===h.voidOperation?null:m}else throw Error("Illegal Argument");}}e=n.createFromGraphicLikeObject(e,
a,null)}e._geometry=h.fixSpatialReference(e.geometry(),b.spatialReference);e.immutable=!1;return e})};f.dictionary=function(b,d){return P(b,d,function(b,a,d){if(0===d.length)throw Error("Missing Parameters");if(0!==d.length%2)throw Error("Missing Parameters");b={};for(a=0;a<d.length;a+=2){var c=h.toString(d[a]),e=d[a+1];if(null===e||void 0===e||h.isString(e)||isNaN(e)||h.isDate(e)||h.isNumber(e)||h.isBoolean(e)||h.isArray(e)||h.isImmutableArray(e)){if(h.isFunctionParameter(e))throw Error("Illegal Argument");
b[c]=e===h.voidOperation?null:e}else throw Error("Illegal Argument");}d=new t(b);d.immutable=!1;return d})};f.haskey=function(b,d){return P(b,d,function(b,a,d){h.pcCheck(d,2,2);b=h.toString(d[1]);if(d[0]instanceof n||d[0]instanceof t)return d[0].hasField(b);throw Error("Illegal Argument");})};f.indexof=function(b,d){return P(b,d,function(b,a,d){h.pcCheck(d,2,2);b=d[1];if(h.isArray(d[0])){for(a=0;a<d[0].length;a++)if(h.equalityTest(b,d[0][a]))return a;return-1}if(h.isImmutableArray(d[0])){var c=d[0].length();
for(a=0;a<c;a++)if(h.equalityTest(b,d[0].get(a)))return a;return-1}throw Error("Illegal Argument");})};f.angle=function(b,d){return P(b,d,function(b,a,d){d=h.autoCastFeatureToGeometry(d);h.pcCheck(d,2,3);if(!(d[0]instanceof e))throw Error("Illegal Argument");if(!(d[1]instanceof e))throw Error("Illegal Argument");if(2<d.length&&!(d[2]instanceof e))throw Error("Illegal Argument");return 2===d.length?p.angle2D(d[0],d[1]):p.angleBetween2D(d[0],d[1],d[2])})};f.bearing=function(b,d){return P(b,d,function(b,
a,d){d=h.autoCastFeatureToGeometry(d);h.pcCheck(d,2,3);if(!(d[0]instanceof e))throw Error("Illegal Argument");if(!(d[1]instanceof e))throw Error("Illegal Argument");if(2<d.length&&!(d[2]instanceof e))throw Error("Illegal Argument");return 2===d.length?p.bearing2D(d[0],d[1]):p.bearingBetween2D(d[0],d[1],d[2])})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(H,f,t){function n(b,d,h){var e={x:0,y:0};d&&(e.z=0);h&&(e.m=0);for(var p=0,n=b[0],
f=0;f<b.length;f++){var C=b[f],q;a:if(C.length!==n.length)q=!1;else{for(q=0;q<C.length;q++)if(C[q]!==n[q]){q=!1;break a}q=!0}if(!1===q){q=l(n,C,d);var t=C,ga=d,B=h,a={x:(n[0]+t[0])/2,y:(n[1]+t[1])/2};ga&&(a.z=(n[2]+t[2])/2);ga&&B?a.m=(n[3]+t[3])/2:B&&(a.m=(n[2]+t[2])/2);n=a;n.x*=q;n.y*=q;e.x+=n.x;e.y+=n.y;d&&(n.z*=q,e.z+=n.z);h&&(n.m*=q,e.m+=n.m);p+=q;n=C}}0<p?(e.x/=p,e.y/=p,d&&(e.z/=p),h&&(e.m/=p)):(e.x=b[0][0],e.y=b[0][1],d&&(e.z=b[0][2]),h&&d?e.m=b[0][3]:h&&(e.m=b[0][2]));return e}function l(b,
d,h){var e=d[0]-b[0];b=d[1]-b[1];return h?(d=d[2]-d[2],Math.sqrt(e*e+b*b+d*d)):Math.sqrt(e*e+b*b)}function h(b,d,h){for(void 0===h&&(h=0);b<h;)b+=d;for(h+=d;b>=h;)b-=d;return b}function q(b,d){return Math.atan2(d.y-b.y,d.x-b.x)}function d(b,d,h){var e=b.x-d.x;b=b.y-d.y;var p=h.x-d.x;d=h.y-d.y;return Math.atan2(p*b-e*d,p*e+d*b)}Object.defineProperty(f,"__esModule",{value:!0});f.centroidPolyline=function(b){for(var d={x:0,y:0,spatialReference:b.spatialReference.toJSON()},h={x:0,y:0,spatialReference:b.spatialReference.toJSON()},
g=0,p=0,f=0;f<b.paths.length;f++)if(0!==b.paths[f].length){var q;q=b.paths[f];var x=!0===b.hasZ;if(1>=q.length)q=0;else{for(var P=0,H=1;H<q.length;H++)P+=l(q[H-1],q[H],x);q=P}0===q?(x=n(b.paths[f],!0===b.hasZ,!0===b.hasM),d.x+=x.x,d.y+=x.y,!0===b.hasZ&&(d.z+=x.z),!0===b.hasM&&(d.m+=x.m),++g):(x=n(b.paths[f],!0===b.hasZ,!0===b.hasM),h.x+=x.x*q,h.y+=x.y*q,!0===b.hasZ&&(h.z+=x.z*q),!0===b.hasM&&(h.m+=x.m*q),p+=q)}return 0<p?(h.x/=p,h.y/=p,!0===b.hasZ&&(h.z/=p),!0===b.hasM&&(h.m/=p),new t(h)):0<g?(d.x/=
g,d.y/=g,!0===b.hasZ&&(h.z/=g),!0===b.hasM&&(d.m/=g),new t(d)):null};f.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var d=0,h=0,g=0,p=0,l=0;l<b.points.length;l++){var n=b.getPoint(l);!0===n.hasZ&&(g+=n.z);!0===n.hasM&&(p+=n.m);d+=n.x;h+=n.y;p+=n.m}d={x:d/b.points.length,y:h/b.points.length,spatialReference:null};d.spatialReference=b.spatialReference.toJSON();!0===b.hasZ&&(d.z=g/b.points.length);!0===b.hasM&&(d.m=p/b.points.length);return new t(d)};f.angleRad=q;f.angle2D=function(b,
d){return h(q(b,d),2*Math.PI)*(180/Math.PI)};f.bearing2D=function(b,d){return h(Math.PI/2-q(b,d),2*Math.PI)*(180/Math.PI)};f.angleBetweenRad=d;f.angleBetween2D=function(b,e,l){return h(d(b,e,l),2*Math.PI)*(180/Math.PI)};f.bearingBetween2D=function(b,e,l){return h(-1*d(b,e,l),2*Math.PI)*(180/Math.PI)}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(H,f,t,n,l,h,q,d,b,e,C,g,p){function z(b){return 0===t.version.indexOf("4.")?C.fromExtent(b):new C({spatialReference:b.spatialReference,rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(f,"__esModule",{value:!0});var A=null;f.setGeometryEngine=function(b){A=b};f.registerFunctions=function(f,t){function x(b){l.pcCheck(b,2,2);if(!(b[0]instanceof d&&b[1]instanceof d||b[0]instanceof d&&null===b[1]||b[1]instanceof d&&null===b[0]||
null===b[0]&&null===b[1]))throw Error("Illegal Argument");}f.disjoint=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!0:A.disjoint(c[0],c[1])})};f.intersects=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.intersects(c[0],c[1])})};f.touches=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.touches(c[0],
c[1])})};f.crosses=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.crosses(c[0],c[1])})};f.within=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.within(c[0],c[1])})};f.contains=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.contains(c[0],c[1])})};f.overlaps=function(b,d){return t(b,d,function(a,
b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?!1:A.overlaps(c[0],c[1])})};f.equals=function(b,e){return t(b,e,function(a,b,c){l.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof d&&c[1]instanceof d?A.equals(c[0],c[1]):l.isDate(c[0])&&l.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};f.relate=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,3,3);if(c[0]instanceof d&&c[1]instanceof d)return A.relate(c[0],c[1],l.toString(c[2]));
if(c[0]instanceof d&&null===c[1]||c[1]instanceof d&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};f.intersection=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]||null===c[1]?null:A.intersect(c[0],c[1])})};f.union=function(b,e){return t(b,e,function(a,e,c){c=l.autoCastFeatureToGeometry(c);a=[];if(0===c.length)throw Error("Function called with wrong number of Parameters");if(1===c.length)if(l.isArray(c[0]))for(c=
l.autoCastFeatureToGeometry(c[0]),e=0;e<c.length;e++){if(null!==c[e]){if(!(c[e]instanceof d))throw Error("Illegal Argument");a.push(c[e])}}else if(l.isImmutableArray(c[0]))for(c=l.autoCastFeatureToGeometry(c[0].toArray()),e=0;e<c.length;e++){if(null!==c[e]){if(!(c[e]instanceof d))throw Error("Illegal Argument");a.push(c[e])}}else{if(c[0]instanceof d)return l.fixSpatialReference(n.cloneGeometry(c[0]),b.spatialReference);if(null===c[0])return null;throw Error("Illegal Argument");}else for(e=0;e<c.length;e++)if(null!==
c[e]){if(!(c[e]instanceof d))throw Error("Illegal Argument");a.push(c[e])}return 0===a.length?null:A.union(a)})};f.difference=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null!==c[0]&&null===c[1]?n.cloneGeometry(c[0]):null===c[0]?null:A.difference(c[0],c[1])})};f.symmetricdifference=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);x(c);return null===c[0]&&null===c[1]?null:null===c[0]?n.cloneGeometry(c[1]):null===c[1]?n.cloneGeometry(c[0]):
A.symmetricDifference(c[0],c[1])})};f.clip=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2);if(!(c[1]instanceof q)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?null:A.clip(c[0],c[1])})};f.cut=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2);if(!(c[1]instanceof g)&&null!==c[1])throw Error("Illegal Argument");if(null===
c[0])return[];if(!(c[0]instanceof d))throw Error("Illegal Argument");return null===c[1]?[n.cloneGeometry(c[0])]:A.cut(c[0],c[1])})};f.area=function(b,e){return t(b,e,function(a,e,c){l.pcCheck(c,1,2);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolygon(c[0],b.spatialReference),null===a?0:A.planarArea(a,n.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof d))throw Error("Illegal Argument");
return A.planarArea(c[0],n.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.areageodetic=function(b,e){return t(b,e,function(a,e,c){l.pcCheck(c,1,2);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolygon(c[0],b.spatialReference),null===a?0:A.geodesicArea(a,n.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof d))throw Error("Illegal Argument");return A.geodesicArea(c[0],n.convertSquareUnitsToCode(l.defaultUndefined(c[1],
-1)))})};f.length=function(b,e){return t(b,e,function(a,e,c){l.pcCheck(c,1,2);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolyline(c[0],b.spatialReference),null===a?0:A.planarLength(a,n.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof d))throw Error("Illegal Argument");return A.planarLength(c[0],n.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.lengthgeodetic=function(b,
e){return t(b,e,function(a,e,c){l.pcCheck(c,1,2);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolyline(c[0],b.spatialReference),null===a?0:A.geodesicLength(a,n.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof d))throw Error("Illegal Argument");return A.geodesicLength(c[0],n.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.distance=function(b,e){return t(b,e,function(a,e,
c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToMultiPoint(c[0],b.spatialReference);e=c[1];if(l.isArray(c[1])||l.isImmutableArray(c[1]))e=l.autoCastArrayOfPointsToMultiPoint(c[1],b.spatialReference);if(!(a instanceof d))throw Error("Illegal Argument");if(!(e instanceof d))throw Error("Illegal Argument");return A.distance(a,e,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.densify=function(b,e){return t(b,
e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof C||c[0]instanceof g?A.densify(c[0],a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]instanceof q?A.densify(z(c[0]),a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]})};f.densifygeodetic=function(b,e){return t(b,
e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof C||c[0]instanceof g?A.geodesicDensify(c[0],a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]instanceof q?A.geodesicDensify(z(c[0]),a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]})};f.generalize=function(b,
e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return A.generalize(c[0],a,l.toBoolean(l.defaultUndefined(c[2],!0)),n.convertLinearUnitsToCode(l.defaultUndefined(c[3],-1)))})};f.buffer=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
d))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?n.cloneGeometry(c[0]):A.buffer(c[0],a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.buffergeodetic=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?n.cloneGeometry(c[0]):A.geodesicBuffer(c[0],
a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.offset=function(b,d){return t(b,d,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof C||c[0]instanceof g))throw Error("Illegal Argument");a=l.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");b=l.toNumber(l.defaultUndefined(c[4],10));if(isNaN(b))throw Error("Illegal Argument");var d=l.toNumber(l.defaultUndefined(c[5],0));if(isNaN(d))throw Error("Illegal Argument");
return A.offset(c[0],a,n.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)),l.toString(l.defaultUndefined(c[3],"round")).toLowerCase(),b,d)})};f.rotate=function(b,g){return t(b,g,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof d))throw Error("Illegal Argument");a instanceof q&&(a=C.fromExtent(a));b=l.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");c=l.defaultUndefined(c[2],null);if(null===c)return A.rotate(a,b);if(c instanceof
e)return A.rotate(a,b,c);throw Error("Illegal Argument");})};f.centroid=function(p,f){return t(p,f,function(a,f,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);if(null===c[0])return null;a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToMultiPoint(c[0],p.spatialReference);if(null===a)return null;if(!(a instanceof d))throw Error("Illegal Argument");return a instanceof e?l.fixSpatialReference(n.cloneGeometry(c[0]),p.spatialReference):a instanceof C?a.centroid:a instanceof
g?h.centroidPolyline(a):a instanceof b?h.centroidMultiPoint(a):a instanceof q?a.center:null})};f.multiparttosinglepart=function(h,f){return t(h,f,function(a,f,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);f=[];if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");if(c[0]instanceof e||c[0]instanceof q)return[l.fixSpatialReference(n.cloneGeometry(c[0]),h.spatialReference)];a=A.simplify(c[0]);if(a instanceof C){f=[];var m=[];for(c=0;c<a.rings.length;c++)if(a.isClockwise(a.rings[c])){var t=
p.fromJSON({rings:[a.rings[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});f.push(t)}else m.push({ring:a.rings[c],pt:a.getPoint(c,0)});for(a=0;a<m.length;a++)for(c=0;c<f.length;c++)if(f[c].contains(m[a].pt)){f[c].addRing(m[a].ring);break}return f}if(a instanceof g){f=[];for(c=0;c<a.paths.length;c++)m=p.fromJSON({paths:[a.paths[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()}),f.push(m);return f}if(c[0]instanceof b){a=l.fixSpatialReference(n.cloneGeometry(c[0]),
h.spatialReference);for(c=0;c<a.points.length;c++)f.push(a.getPoint(c));return f}return null})};f.issimple=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);if(null===c[0])return!0;if(!(c[0]instanceof d))throw Error("Illegal Argument");return A.isSimple(c[0])})};f.simplify=function(b,e){return t(b,e,function(a,b,c){c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof d))throw Error("Illegal Argument");return A.simplify(c[0])})}}})},
"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],function(H,f,t){Object.defineProperty(f,"__esModule",{value:!0});f.convertSquareUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
f.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.extent;case "point":return new t({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};f.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
f.sameGeomType=function(f,l){return f===l||"point"===f&&"esriGeometryPoint"===l||"polyline"===f&&"esriGeometryPolyline"===l||"polygon"===f&&"esriGeometryPolygon"===l||"extent"===f&&"esriGeometryEnvelope"===l||"multipoint"===f&&"esriGeometryMultipoint"===l||"point"===l&&"esriGeometryPoint"===f||"polyline"===l&&"esriGeometryPolyline"===f||"polygon"===l&&"esriGeometryPolygon"===f||"extent"===l&&"esriGeometryEnvelope"===f||"multipoint"===l&&"esriGeometryMultipoint"===f?!0:!1};f.cloneGeometry=function(f){if(null===
f)return null;var l=f.clone();void 0!==f.cache._geVersion&&(l.cache._geVersion=f.cache._geVersion);return l}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(H,f,t,n){function l(h,f,d){if("undefined"===typeof d||0===+d)return Math[h](f);f=+f;d=+d;if(isNaN(f)||"number"!==typeof d||0!==d%1)return NaN;f=f.toString().split("e");f=Math[h](+(f[0]+"e"+(f[1]?+f[1]-d:-d)));f=f.toString().split("e");return+(f[0]+"e"+(f[1]?+f[1]+d:d))}Object.defineProperty(f,
"__esModule",{value:!0});f.registerFunctions=function(h,f){function d(b,d,f){b=n.toNumber(b);return isNaN(b)?b:isNaN(d)||isNaN(f)||d>f?NaN:b<d?d:b>f?f:b}h.number=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,2);b=e[0];return n.isNumber(b)?b:null===b?0:n.isDate(b)||n.isBoolean(b)?Number(b):n.isArray(b)?NaN:""===b||void 0===b?Number(b):n.isString(b)?void 0!==e[1]?(e=n.multiReplace(e[1],"\u2030",""),e=n.multiReplace(e,"\u00a4",""),t.parse(b,{pattern:e})):Number(b.trim()):Number(b)})};h.abs=
function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.abs(n.toNumber(e[0]))})};h.acos=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.acos(n.toNumber(e[0]))})};h.asin=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.asin(n.toNumber(e[0]))})};h.atan=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.atan(n.toNumber(e[0]))})};h.atan2=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,2,2);return Math.atan2(n.toNumber(e[0]),
n.toNumber(e[1]))})};h.ceil=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,2);return 2===e.length?(b=n.toNumber(e[1]),isNaN(b)&&(b=0),l("ceil",n.toNumber(e[0]),-1*b)):Math.ceil(n.toNumber(e[0]))})};h.round=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,2);return 2===e.length?(b=n.toNumber(e[1]),isNaN(b)&&(b=0),l("round",n.toNumber(e[0]),-1*b)):Math.round(n.toNumber(e[0]))})};h.floor=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,2);return 2===e.length?(b=n.toNumber(e[1]),
isNaN(b)&&(b=0),l("floor",n.toNumber(e[0]),-1*b)):Math.floor(n.toNumber(e[0]))})};h.cos=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.cos(n.toNumber(e[0]))})};h.isnan=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return"number"===typeof e[0]&&isNaN(e[0])})};h.exp=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.exp(n.toNumber(e[0]))})};h.log=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.log(n.toNumber(e[0]))})};
h.pow=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,2,2);return Math.pow(n.toNumber(e[0]),n.toNumber(e[1]))})};h.random=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,0,0);return Math.random()})};h.sin=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.sin(n.toNumber(e[0]))})};h.sqrt=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.sqrt(n.toNumber(e[0]))})};h.tan=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return Math.tan(n.toNumber(e[0]))})};
h.defaultvalue=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,2,2);return null===e[0]||""===e[0]||void 0===e[0]?e[1]:e[0]})};h.isempty=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return null===e[0]||""===e[0]||void 0===e[0]?!0:!1})};h["boolean"]=function(b,d){return f(b,d,function(b,d,e){n.pcCheck(e,1,1);return n.toBoolean(e[0])})};h.constrain=function(b,e){return f(b,e,function(b,e,f){n.pcCheck(f,3,3);b=n.toNumber(f[1]);e=n.toNumber(f[2]);if(n.isArray(f[0])){var g=[],h=0;
for(f=f[0];h<f.length;h++)g.push(d(f[h],b,e));return g}if(n.isImmutableArray(f[0])){g=[];for(h=0;h<f[0].length();h++)g.push(d(f[0].get(h),b,e));return g}return d(f[0],b,e)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(H,f,t,n){function l(f,l,d,b){if(1===b.length){if(t.isArray(b[0]))return n.calculateStat(f,b[0],-1);if(t.isImmutableArray(b[0]))return n.calculateStat(f,b[0].toArray(),-1)}return n.calculateStat(f,b,-1)}Object.defineProperty(f,
"__esModule",{value:!0});f.registerFunctions=function(f,n){f.stdev=function(d,b){return n(d,b,function(b,d,g){return l("stdev",b,d,g)})};f.variance=function(d,b){return n(d,b,function(b,d,g){return l("variance",b,d,g)})};f.average=function(d,b){return n(d,b,function(b,d,g){return l("mean",b,d,g)})};f.mean=function(d,b){return n(d,b,function(b,d,g){return l("mean",b,d,g)})};f.sum=function(d,b){return n(d,b,function(b,d,g){return l("sum",b,d,g)})};f.min=function(d,b){return n(d,b,function(b,d,g){return l("min",
b,d,g)})};f.max=function(d,b){return n(d,b,function(b,d,g){return l("max",b,d,g)})};f.distinct=function(d,b){return n(d,b,function(b,d,g){return l("distinct",b,d,g)})};f.count=function(d,b){return n(d,b,function(b,d,g){t.pcCheck(g,1,1);if(t.isArray(g[0])||t.isString(g[0]))return g[0].length;if(t.isImmutableArray(g[0]))return g[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(H,f,t){function n(f){for(var h=
0,d=0;d<f.length;d++)h+=f[d];return h/f.length}function l(f){for(var h=n(f),d=0,b=0;b<f.length;b++)d+=Math.pow(h-f[b],2);return d/f.length}Object.defineProperty(f,"__esModule",{value:!0});f.decodeStatType=function(f){switch(f.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};f.calculateStat=
function(f,q,d){void 0===d&&(d=1E3);switch(f.toLowerCase()){case "distinct":a:{f=d;d=[];for(var b={},e=[],h=0;h<q.length;h++){if(void 0!==q[h]&&null!==q[h]&&q[h]!==t.voidOperation){var g=q[h];if(t.isNumber(g)||t.isString(g))void 0===b[g]&&(d.push(g),b[g]=1);else{for(var p=!1,z=0;z<e.length;z++)!0===t.equalityTest(e[z],g)&&(p=!0);!1===p&&(e.push(g),d.push(g))}}if(d.length>=f&&-1!==f){q=d;break a}}q=d}return q;case "avg":case "mean":return n(t.toNumberArray(q));case "min":return Math.min.apply(Math,
t.toNumberArray(q));case "sum":q=t.toNumberArray(q);for(d=f=0;d<q.length;d++)f+=q[d];return f;case "max":return Math.max.apply(Math,t.toNumberArray(q));case "stdev":case "stddev":return Math.sqrt(l(t.toNumberArray(q)));case "var":case "variance":return l(t.toNumberArray(q));case "count":return q.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Dictionary","../Feature","../languageUtils"],function(H,f,t,n,l){Object.defineProperty(f,"__esModule",{value:!0});
f.registerFunctions=function(f,q){f.trim=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,1);return l.toString(g[0]).trim()})};f.upper=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,1);return l.toString(g[0]).toUpperCase()})};f.proper=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,2);b=1;2===g.length&&"firstword"===l.toString(g[1]).toLowerCase()&&(b=2);d=/\s/;g=l.toString(g[0]);for(var e="",f=!0,h=0;h<g.length;h++){var n=g[h];d.test(n)?1===b&&(f=!0):n.toUpperCase()!==n.toLowerCase()&&
(f?(n=n.toUpperCase(),f=!1):n=n.toLowerCase());e+=n}return e})};f.lower=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,1);return l.toString(g[0]).toLowerCase()})};f.guid=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,0,1);if(0<g.length)switch(l.toString(g[0]).toLowerCase()){case "digits":return l.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return l.generateUUID();case "digits-hyphen-parentheses":return"("+l.generateUUID()+")"}return"{"+
l.generateUUID()+"}"})};f.console=function(d,b){return q(d,b,function(b,f,g){0!==g.length&&(1===g.length?d.console(l.toString(g[0])):d.console(l.toString(g)));return l.voidOperation})};f.mid=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,2,3);b=l.toNumber(g[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===g.length)return l.toString(g[0]).substr(b);d=l.toNumber(g[2]);if(isNaN(d))return"";0>d&&(d=0);return l.toString(g[0]).substr(b,d)})};f.find=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,
2,3);b=0;if(2<g.length){b=l.toNumber(l.defaultUndefined(g[2],0));if(isNaN(b))return-1;0>b&&(b=0)}return l.toString(g[1]).indexOf(l.toString(g[0]),b)})};f.left=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,2,2);b=l.toNumber(g[1]);if(isNaN(b))return"";0>b&&(b=0);return l.toString(g[0]).substr(0,b)})};f.right=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,2,2);b=l.toNumber(g[1]);if(isNaN(b))return"";0>b&&(b=0);return l.toString(g[0]).substr(-1*b,b)})};f.split=function(d,b){return q(d,
b,function(b,d,g){l.pcCheck(g,2,4);b=l.toNumber(l.defaultUndefined(g[2],-1));d=l.toBoolean(l.defaultUndefined(g[3],!1));-1===b||null===b||!0===d?g=l.toString(g[0]).split(l.toString(g[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),g=l.toString(g[0]).split(l.toString(g[1]),b));if(!1===d)return g;d=[];for(var e=0;e<g.length&&!(-1!==b&&d.length>=b);e++)""!==g[e]&&void 0!==g[e]&&d.push(g[e]);return d})};f.text=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,2);return l.toStringExplicit(g[0],g[1])})};f.concatenate=
function(d,b){return q(d,b,function(b,d,g){b=[];if(1>g.length)return"";if(l.isArray(g[0])){d=l.defaultUndefined(g[2],"");for(var e=0;e<g[0].length;e++)b[e]=l.toStringExplicit(g[0][e],d);return 1<g.length?b.join(g[1]):b.join("")}if(l.isImmutableArray(g[0])){d=l.defaultUndefined(g[2],"");for(e=0;e<g[0].length();e++)b[e]=l.toStringExplicit(g[0].get(e),d);return 1<g.length?b.join(g[1]):b.join("")}for(e=0;e<g.length;e++)b[e]=l.toStringExplicit(g[e]);return b.join("")})};f.reverse=function(d,b){return q(d,
b,function(b,d,g){l.pcCheck(g,1,1);if(l.isArray(g[0]))return b=g[0].slice(0),b.reverse(),b;if(l.isImmutableArray(g[0]))return b=g[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};f.replace=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,3,4);b=l.toString(g[0]);d=l.toString(g[1]);var e=l.toString(g[2]);return(4===g.length?l.toBoolean(g[3]):1)?l.multiReplace(b,d,e):b.replace(d,e)})};f.domainname=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,2,4);if(g[0]instanceof
n)return g[0].domainValueLookup(l.toString(g[1]),g[2],void 0===g[3]?void 0:l.toNumber(g[3]));throw Error("Invalid Parameter");})};f.domaincode=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,2,4);if(g[0]instanceof n)return g[0].domainCodeLookup(l.toString(g[1]),g[2],void 0===g[3]?void 0:l.toNumber(g[3]));throw Error("Invalid Parameter");})};f.urlencode=function(d,b){return q(d,b,function(b,d,g){l.pcCheck(g,1,1);if(null===g[0])return"";if(g[0]instanceof t){b="";d=0;for(var e=g[0].keys();d<e.length;d++){var f=
e[d],h=g[0].field(f);""!==b&&(b+="\x26");b=null===h?b+(encodeURIComponent(f)+"\x3d"):b+(encodeURIComponent(f)+"\x3d"+encodeURIComponent(h))}return b}return encodeURIComponent(l.toString(g[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(H,f,t,n,l,h,q,d,b,e,C,g,p,z,A,x,P,Z,ga,B,a,m,c){function w(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(v(a,b.arguments[d]));return c}function K(a,b,c){try{return c(a,b,w(a,b))}catch(ma){throw ma;}}function v(a,c){try{switch(c.type){case "EmptyStatement":return b.voidOperation;case "VariableDeclarator":var d=null===c.init?null:v(a,c.init);d===b.voidOperation&&(d=null);if("Identifier"!==c.id.type)throw Error("Can only assign a regular variable");var g=c.id.name.toLowerCase();null!==
a.localScope?a.localScope[g]={value:d,valueset:!0,node:c.init}:a.globalScope[g]={value:d,valueset:!0,node:c.init};return b.voidOperation;case "VariableDeclaration":for(var f=0;f<c.declarations.length;f++)v(a,c.declarations[f]);return b.voidOperation;case "BlockStatement":var k;a:{for(var p=b.voidOperation,f=0;f<c.body.length;f++)if(p=v(a,c.body[f]),p instanceof b.ReturnResult||p===b.breakResult||p===b.continueResult){k=p;break a}k=p}return k;case "FunctionDeclaration":var m=c.id.name.toLowerCase();
a.globalScope[m]={valueset:!0,node:null,value:new h(c,a)};return b.voidOperation;case "ReturnStatement":var ka;if(null===c.argument)ka=new b.ReturnResult(b.voidOperation);else{var ea=v(a,c.argument);ka=new b.ReturnResult(ea)}return ka;case "IfStatement":var q;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(e.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var t=v(a,c.test);if(!0===t)q=v(a,c.consequent);else if(!1===t)q=null!==c.alternate?
v(a,c.alternate):b.voidOperation;else throw Error(e.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return q;case "ExpressionStatement":var z;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)z=v(a,c.expression);else{var A=v(a,c.expression);z=A===b.voidOperation?b.voidOperation:new b.ImplicitResult(A)}return z;case "AssignmentExpression":var x;var w=v(a,c.right),f=null,u="";if("MemberExpression"===c.left.type){f=v(a,c.left.object);!0===c.left.computed?
u=v(a,c.left.property):"Identifier"===c.left.property.type&&(u=c.left.property.name);if(b.isArray(f))if(b.isNumber(u)){0>u&&(u=f.length+u);if(0>u||u>f.length)throw Error("Assignment outside of array bounds");if(u===f.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");f[u]=S(w,c.operator,f[u],c)}else throw Error("Invalid Parameter");else if(f instanceof n){if(!1===b.isString(u))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(u))f.setField(u,S(w,c.operator,f.field(u),
c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");f.setField(u,S(w,c.operator,null,c))}}else if(f instanceof l){if(!1===b.isString(u))throw Error("Feature accessor must be a string");if(!0===f.hasField(u))f.setField(u,S(w,c.operator,f.field(u),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");f.setField(u,S(w,c.operator,null,c))}}else{if(b.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}x=b.voidOperation}else if(f=c.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[f])a.localScope[f]={value:S(w,c.operator,a.localScope[f].value,c),valueset:!0,node:c.right},x=b.voidOperation;else if(void 0!==a.globalScope[f])a.globalScope[f]={value:S(w,c.operator,a.globalScope[f].value,c),valueset:!0,node:c.right},x=b.voidOperation;else throw Error("Variable not recognised");return x;case "UpdateExpression":var C;var B,f=null,u="";if("MemberExpression"===c.argument.type){f=v(a,c.argument.object);!0===c.argument.computed?u=v(a,c.argument.property):
"Identifier"===c.argument.property.type&&(u=c.argument.property.name);if(b.isArray(f))if(b.isNumber(u)){0>u&&(u=f.length+u);if(0>u||u>=f.length)throw Error("Assignment outside of array bounds");B=b.toNumber(f[u]);f[u]="++"===c.operator?B+1:B-1}else throw Error("Invalid Parameter");else if(f instanceof n){if(!1===b.isString(u))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(u))B=b.toNumber(f.field(u)),f.setField(u,"++"===c.operator?B+1:B-1);else throw Error("Invalid Parameter");
}else if(f instanceof l){if(!1===b.isString(u))throw Error("Feature accessor must be a string");if(!0===f.hasField(u))B=b.toNumber(f.field(u)),f.setField(u,"++"===c.operator?B+1:B-1);else throw Error("Invalid Parameter");}else{if(b.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}C=!1===c.prefix?B:"++"===c.operator?B+1:B-1}else{f="Identifier"===c.argument.type?c.argument.name.toLowerCase():"";if(!f)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[f])B=b.toNumber(a.localScope[f].value),a.localScope[f]={value:"++"===c.operator?B+1:B-1,valueset:!0,node:c},C=!1===c.prefix?B:"++"===c.operator?B+1:B-1;else if(void 0!==a.globalScope[f])B=b.toNumber(a.globalScope[f].value),a.globalScope[f]={value:"++"===c.operator?B+1:B-1,valueset:!0,node:c},C=!1===c.prefix?B:"++"===c.operator?B+1:B-1;else throw Error("Variable not recognised");}return C;case "BreakStatement":return b.breakResult;case "ContinueStatement":return b.continueResult;case "ForStatement":null!==
c.init&&v(a,c.init);u={testResult:!0,lastAction:b.voidOperation};do b:{x=a;w=c;C=u;if(null!==w.test){C.testResult=v(x,w.test);if(!1===C.testResult)break b;if(!0!==C.testResult)throw Error(e.nodeErrorMessage(w,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}C.lastAction=v(x,w.body);C.lastAction===b.breakResult?C.testResult=!1:C.lastAction instanceof b.ReturnResult?C.testResult=!1:null!==w.update&&v(x,w.update)}while(!0===u.testResult);f=u.lastAction instanceof b.ReturnResult?u.lastAction:b.voidOperation;
return f;case "ForInStatement":return R(a,c);case "Identifier":return F(a,c);case "MemberExpression":return ha(a,c);case "Literal":return c.value;case "CallExpression":return da(a,c);case "UnaryExpression":return Y(a,c);case "BinaryExpression":return fa(a,c);case "LogicalExpression":return na(a,c);case "ConditionalExpression":throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(f=[],u=0;u<c.elements.length;u++){var H=v(a,c.elements[u]);if(b.isFunctionParameter(H))throw Error(e.nodeErrorMessage(c,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));H===b.voidOperation?f.push(null):f.push(H)}}catch(D){throw D;}return f;case "ObjectExpression":f={};for(u=0;u<c.properties.length;u++){var I=v(a,c.properties[u]);if(b.isFunctionParameter(I.value))throw Error("Illegal Argument");if(!1===b.isString(I.key))throw Error("Illegal Argument");f[I.key.toString()]=I.value===b.voidOperation?null:I.value}var K=new n(f);K.immutable=!1;return K;case "Property":return{key:"Identifier"===c.key.type?c.key.name:v(a,c.key),value:v(a,
c.value)};default:throw Error(e.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(D){throw D;}}function R(a,c){var d=v(a,c.right);"VariableDeclaration"===c.left.type&&v(a,c.left);var f=null,g="";if("VariableDeclaration"===c.left.type){var h=c.left.declarations[0].id;"Identifier"===h.type&&(g=h.name)}else"Identifier"===c.left.type&&(g=c.left.name);if(!g)throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDVARIABLE"));g=g.toLowerCase();null!==a.localScope&&void 0!==a.localScope[g]&&(f=a.localScope[g]);
null===f&&void 0!==a.globalScope[g]&&(f=a.globalScope[g]);if(null===f)throw Error(e.nodeErrorMessage(c,"RUNTIME","VARIABLENOTDECLARED"));if(b.isArray(d)||b.isString(d)){d=d.length;for(h=0;h<d;h++){f.value=h;g=v(a,c.body);if(g===b.breakResult)break;if(g instanceof b.ReturnResult)return g}return b.voidOperation}if(b.isImmutableArray(d)){for(h=0;h<d.length();h++){f.value=h;g=v(a,c.body);if(g===b.breakResult)break;if(g instanceof b.ReturnResult)return g}return b.voidOperation}if(d instanceof n||d instanceof
l)for(d=d.keys(),h=0;h<d.length;h++){f.value=d[h];g=v(a,c.body);if(g===b.breakResult)break;if(g instanceof b.ReturnResult)return g}else return b.voidOperation}function S(a,c,d,f){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(d)/b.toNumber(a);case "*\x3d":return b.toNumber(d)*b.toNumber(a);case "-\x3d":return b.toNumber(d)-b.toNumber(a);case "+\x3d":return b.isString(d)||b.isString(a)?b.toString(d)+b.toString(a):b.toNumber(d)+b.toNumber(a);case "%\x3d":return b.toNumber(d)%
b.toNumber(a);default:throw Error(e.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}function N(a,b,c,f){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(oa++,b=a.spatialReference._arcadeCacheId=oa)),a=new n({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&
(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(oa++,b=oa,a.cache._arcadeCacheId=b),a=new q(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==
a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(oa++,b=oa,a.cache._arcadeCacheId=b),a=new q(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(oa++,b=oa,a.cache._arcadeCacheId=b),a=new d(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(f,
"RUNTIME","PROPERTYNOTFOUND"));}function ha(a,c){try{var d=v(a,c.object);if(null===d)throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));if(!1===c.computed){if("Identifier"===c.property.type){if(d instanceof n||d instanceof l)return d.field(c.property.name);if(d instanceof Z)return N(d,c.property.name,a,c)}throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}var f=v(a,c.property);if(d instanceof n||d instanceof l){if(b.isString(f))return d.field(f);throw Error(e.nodeErrorMessage(c,"RUNTIME",
"INVALIDTYPE"));}if(d instanceof Z){if(b.isString(f))return N(d,f,a,c);throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isArray(d)){if(b.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=d.length+f);if(f>=d.length||0>f)throw Error(e.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[f]}throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isString(d)){if(b.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=d.length+f);if(f>=d.length||0>f)throw Error(e.nodeErrorMessage(c,
"RUNTIME","OUTOFBOUNDS"));return d[f]}throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isImmutableArray(d)&&b.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){0>f&&(f=d.length()+f);if(f>=d.length()||0>f)throw Error(e.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d.get(f)}throw Error(e.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}catch(qa){throw qa;}}function Y(a,c){try{var d=v(a,c.argument);if(b.isBoolean(d)){if("!"===c.operator)return!d;if("-"===c.operator)return-1*b.toNumber(d);
if("+"===c.operator)return 1*b.toNumber(d);throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c.operator)return-1*b.toNumber(d);if("+"===c.operator)return 1*b.toNumber(d);throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ma){throw ma;}}function fa(a,c){try{var d=[v(a,c.left),v(a,c.right)],f=d[0],g=d[1];switch(c.operator){case "\x3d\x3d":return b.equalityTest(f,g);case "!\x3d":return!b.equalityTest(f,g);case "\x3c":return b.greaterThanLessThan(f,
g,c.operator);case "\x3e":return b.greaterThanLessThan(f,g,c.operator);case "\x3c\x3d":return b.greaterThanLessThan(f,g,c.operator);case "\x3e\x3d":return b.greaterThanLessThan(f,g,c.operator);case "+":return b.isString(f)||b.isString(g)?b.toString(f)+b.toString(g):b.toNumber(f)+b.toNumber(g);case "-":return b.toNumber(f)-b.toNumber(g);case "*":return b.toNumber(f)*b.toNumber(g);case "/":return b.toNumber(f)/b.toNumber(g);case "%":return b.toNumber(f)%b.toNumber(g);default:throw Error(e.nodeErrorMessage(c,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ua){throw ua;}}function na(a,c){try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(e.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(e.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var d=v(a,c.left);if(b.isBoolean(d))switch(c.operator){case "||":if(!0===d)return d;var f=v(a,c.right);
if(b.isBoolean(f))return f;throw Error(e.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===d)return d;f=v(a,c.right);if(b.isBoolean(f))return f;throw Error(e.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));default:throw Error(e.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}throw Error(e.nodeErrorMessage(c,"RUNTIME","ONLYBOOLEAN"));}catch(qa){throw qa;}}function F(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d]){c=a.localScope[d];if(!0===c.valueset)return c.value;
c.value=v(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[d]){c=a.globalScope[d];if(!0===c.valueset)return c.value;c.value=v(a,c.node);c.valueset=!0;return c.value}throw Error(e.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(qa){throw qa;}}function da(a,c){try{if("Identifier"!==c.callee.type)throw Error(e.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[c.callee.name.toLowerCase()]){var d=a.localScope[c.callee.name.toLowerCase()];
if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof h)return k(a,c,d.value.definition);throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[c.callee.name.toLowerCase()]){d=a.globalScope[c.callee.name.toLowerCase()];if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof h)return k(a,c,d.value.definition);throw Error(e.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(e.nodeErrorMessage(c,"RUNTIME",
"NOTFOUND"));}catch(ma){throw ma;}}function I(c){return null==c?"":b.isArray(c)||b.isImmutableArray(c)?"Array":b.isDate(c)?"Date":b.isString(c)?"String":b.isBoolean(c)?"Boolean":b.isNumber(c)?"Number":c instanceof t?"Attachment":c instanceof n?"Dictionary":c instanceof l?"Feature":c instanceof B?"Point":c instanceof a?"Polygon":c instanceof m?"Polyline":c instanceof ga?"Multipoint":c instanceof P?"Extent":b.isFunctionParameter(c)?"Function":b.isFeatureSet(c)?"FeatureSet":b.isFeatureSetCollection(c)?
"FeatureSetCollection":c===b.voidOperation?"":"number"===typeof c&&isNaN(c)?"Number":"Unrecognised Type"}function W(a,c,d,e){try{var f=v(a,c.arguments[d]);if(b.equalityTest(f,e))return v(a,c.arguments[d+1]);var g=c.arguments.length-d;return 1===g?v(a,c.arguments[d]):2===g?null:3===g?v(a,c.arguments[d+2]):W(a,c,d+2,e)}catch(ia){throw ia;}}function ba(a,c,d,e){try{if(!0===e)return v(a,c.arguments[d+1]);if(3===c.arguments.length-d)return v(a,c.arguments[d+2]);var f=v(a,c.arguments[d+2]);if(!1===b.isBoolean(f))throw Error("WHEN needs boolean test conditions");
return ba(a,c,d+2,f)}catch(ua){throw ua;}}function u(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=u(a.slice(0,d),b);a=u(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function V(a,c,d){try{var e=a.body;if(d.length!==a.params.length)throw Error("Invalid Parameter calls to function.");
for(var f=0;f<d.length;f++)c.localScope[a.params[f].name.toLowerCase()]={value:d[f],valueset:!0,node:null};var g=v(c,e);if(g instanceof b.ReturnResult)return g.value;if(g===b.breakResult)throw Error("Cannot Break from a Function");if(g===b.continueResult)throw Error("Cannot Continue from a Function");return g instanceof b.ImplicitResult?g.value:g}catch(ia){throw ia;}}function k(a,b,c){return K(a,b,function(b,d,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return V(c,b,e)})}function la(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return V(a.definition,b,arguments)}}function ca(a){console.log(a)}Object.defineProperty(f,
"__esModule",{value:!0});var oa=0,X={};C.registerFunctions(X,K);x.registerFunctions(X,K);z.registerFunctions(X,K);g.registerFunctions(X,K);A.registerFunctions(X,K);p.registerFunctions(X,K);X["typeof"]=function(a,c){return K(a,c,function(a,c,d){b.pcCheck(d,1,1);a=I(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};X.iif=function(a,c){try{b.pcCheck(null===c.arguments?[]:c.arguments,3,3);var d=v(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("IF Function must have a boolean test condition");
var e=v(a,c.arguments[1]),f=v(a,c.arguments[2]);return!0===d?e:f}catch(ua){throw ua;}};X.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return v(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=v(a,b.arguments[0]);return W(a,b,1,c)}catch(ma){throw ma;}};X.when=function(a,c){try{if(3>c.arguments.length)throw Error("Missing Parameters");if(0===c.arguments.length%2)throw Error("Must have a default value result.");
var d=v(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("WHEN needs boolean test conditions");return ba(a,c,0,d)}catch(ma){throw ma;}};X.top=function(a,c){return K(a,c,function(a,c,d){b.pcCheck(d,2,2);if(b.isArray(d[0]))return b.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));if(b.isImmutableArray(d[0]))return b.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};X.first=function(a,c){return K(a,
c,function(a,c,d){b.pcCheck(d,1,1);return b.isArray(d[0])?0===d[0].length?null:d[0][0]:b.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};X.sort=function(a,c){return K(a,c,function(a,c,d){b.pcCheck(d,1,2);a=d[0];b.isImmutableArray(a)&&(a=a.toArray());if(!1===b.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");var e=la(d[1]);return a=u(a,function(a,b){return e(a,b)})}if(0===a.length)return[];d={};for(c=0;c<
a.length;c++){var f=I(a[c]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);c=0;var f="",g;for(g in d)c++,f=g;return a=1<c||"String"===f?u(a,function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return a<c?-1:a===c?0:1}):
"Number"===f?u(a,function(a,c){return a-c}):"Boolean"===f?u(a,function(a,c){return a===c?0:c?-1:1}):"Date"===f?u(a,function(a,c){return c-a}):a.slice(0)})};for(var sa in X)X[sa]={value:new b.NativeFunction(X[sa]),valueset:!0,node:null};var T=function(){};T.prototype=X;T.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};T.prototype.pi={value:Math.PI,valueset:!0,node:null};f.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:w,standardFunction:K};f.extend=
function(a){for(var c={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:K,evaluateIdentifier:F,arcadeCustomFunctionHandler:la},d=0;d<a.length;d++)a[d].registerFunctions(c);for(var f in c.functions)X[f]={value:new b.NativeFunction(c.functions[f]),valueset:!0,node:null},T.prototype[f]=X[f];for(d=0;d<c.signatures.length;d++)e.addFunctionDeclaration(c.signatures[d],"async")};f.executeScript=function(a,d){var e=d.spatialReference;if(null===e||void 0===e)e=new c({wkid:102100});var f=
d.vars,g=d.customfunctions,k=new T;f||(f={});g||(g={});var p=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;k.textformatting={value:p,valueset:!0,node:null};for(var m in g)k[m]={value:new b.NativeFunction(g[m]),native:!0,valueset:!0,node:null};for(m in f)k[m]=f[m]&&"esri.Graphic"===f[m].declaredClass?{value:l.createFromGraphic(f[m]),valueset:!0,node:null}:{value:f[m],valueset:!0,node:null};a=v({spatialReference:e,globalScope:k,localScope:null,
console:d.console?d.console:ca,lrucache:d.lrucache,depthCounter:1},a.body[0].body);a instanceof b.ReturnResult&&(a=a.value);a instanceof b.ImplicitResult&&(a=a.value);a===b.voidOperation&&(a=null);if(a===b.breakResult)throw Error("Cannot return BREAK");if(a===b.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof h)throw Error("Cannot return FUNCTION");if(a instanceof b.NativeFunction)throw Error("Cannot return FUNCTION");return a};f.extractFieldLiterals=function(a,c){void 0===c&&
(c=!1);return e.findFieldLiterals(a,c)};f.validateScript=function(a,c){return e.validateScript(a,c,"simple")};f.referencesMember=function(a,c){return e.referencesMember(a,c)};f.referencesFunction=function(a,c){return e.referencesFunction(a,c)};f.findFunctionCalls=function(a){return e.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(H,f,t,n){Object.defineProperty(f,"__esModule",{value:!0});f.parseScript=function(f,h){void 0===
h&&(h=[]);f=n.parse("function _() { "+f+"\n}");if(null===f.body||void 0===f.body)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if("BlockStatement"!==f.body[0].body.type)throw Error("Invalid formula content.");var l=t.validateLanguage(f);if(""!==l)throw Error(l);t.findScriptDependencies(f,h);return f};f.scriptCheck=function(f,h,q,d,b){var e=[];try{var l=n.parse("function _() { "+f+"\n}",{tolerant:!0,
loc:!0}),g=l.errors;if(0<g.length)for(var p=0;p<g.length;p++)e.push({line:g[p].lineNumber,character:g[p].column,reason:g[p].description});var z=t.checkScript(l,h,q,d,b);for(h=0;h<z.length;h++)e.push(z[h])}catch(A){try{"Unexpected token }"===A.description?(A.index=("function _() { "+f+"\n}").length-1,e.push({line:A.lineNumber,character:A.column,reason:"Unexpected end of script"})):e.push({line:A.lineNumber,character:A.column,reason:A.description})}catch(x){}}return e};f.extractFieldLiterals=function(f,
h){void 0===h&&(h=!1);return t.findFieldLiterals(f,h)};f.validateScript=function(f,h,n){return t.validateScript(f,h,n)};f.referencesMember=function(f,h){return t.referencesMember(f,h)};f.referencesFunction=function(f,h){return t.referencesFunction(f,h)}})},"esri/arcade/lib/esprima":function(){(function(H,f){"function"===typeof define&&define.amd?define(["exports"],f):"undefined"!==typeof exports?f(exports):f(H.esprima={})})(this,function(H){function f(a,c){if(!a)throw Error("ASSERT: "+c);}function t(a){return 48<=
a&&57>=a}function n(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function l(a){return 0<="01234567".indexOf(a)}function h(a){return 10===a||13===a||8232===a||8233===a}function q(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ia.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function d(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ia.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function b(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===
a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function e(a,c,b,d,e){f("number"===typeof b,"Comment must have valid position");J.lastCommentStart>=b||(J.lastCommentStart=b,a={type:a,value:c},y.range&&(a.range=[b,d]),y.loc&&(a.loc=e),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}function C(a){var c,b,d;c=
r-a;for(b={start:{line:M,column:r-Q-a}};r<O;)if(d=E.charCodeAt(r),++r,h(d)){y.comments&&(a=E.slice(c+a,r-1),b.end={line:M,column:r-Q-1},e("Line",a,c,r-1,b));13===d&&10===E.charCodeAt(r)&&++r;++M;Q=r;return}y.comments&&(a=E.slice(c+a,r),b.end={line:M,column:r-Q},e("Line",a,c,r,b))}function g(){var a,c;for(c=0===r;r<O;)if(a=E.charCodeAt(r),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++r;else if(h(a))++r,
13===a&&10===E.charCodeAt(r)&&++r,++M,Q=r,c=!0;else if(47===a)if(a=E.charCodeAt(r+1),47===a)++r,++r,C(2),c=!0;else if(42===a){++r;++r;a:{var b=a=void 0,d=void 0,d=void 0;y.comments&&(a=r-2,b={start:{line:M,column:r-Q-2}});for(;r<O;)if(d=E.charCodeAt(r),h(d))13===d&&10===E.charCodeAt(r+1)&&++r,++M,++r,Q=r,r>=O&&F();else{if(42===d&&47===E.charCodeAt(r+1)){++r;++r;y.comments&&(d=E.slice(a+2,r-2),b.end={line:M,column:r-Q},e("Block",d,a,r,b));break a}++r}F()}}else break;else if(c&&45===a)if(45===E.charCodeAt(r+
1)&&62===E.charCodeAt(r+2))r+=3,C(3);else break;else if(60===a)if("!--"===E.slice(r+1,r+4))++r,++r,++r,++r,C(4);else break;else break}function p(a){var c,b,d=0;c="u"===a?4:2;for(a=0;a<c;++a)if(r<O&&n(E[r]))b=E[r++],d=16*d+"0123456789abcdef".indexOf(b.toLowerCase());else return"";return String.fromCharCode(d)}function z(){var a,c;a=E.charCodeAt(r++);c=String.fromCharCode(a);92===a&&(117!==E.charCodeAt(r)&&F(),++r,(a=p("u"))&&"\\"!==a&&q(a.charCodeAt(0))||F(),c=a);for(;r<O;){a=E.charCodeAt(r);if(!d(a))break;
++r;c+=String.fromCharCode(a);92===a&&(c=c.substr(0,c.length-1),117!==E.charCodeAt(r)&&F(),++r,(a=p("u"))&&"\\"!==a&&d(a.charCodeAt(0))||F(),c+=a)}return c}function A(){var a=r,c=E.charCodeAt(r),b,d=E[r];switch(c){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++r,y.tokenize&&(40===c?y.openParenToken=y.tokens.length:123===c&&(y.openCurlyToken=y.tokens.length)),{type:D.Punctuator,value:String.fromCharCode(c),lineNumber:M,lineStart:Q,start:a,
end:r};default:if(b=E.charCodeAt(r+1),61===b)switch(c){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return r+=2,{type:D.Punctuator,value:String.fromCharCode(c)+String.fromCharCode(b),lineNumber:M,lineStart:Q,start:a,end:r};case 33:case 61:return r+=2,61===E.charCodeAt(r)&&++r,{type:D.Punctuator,value:E.slice(a,r),lineNumber:M,lineStart:Q,start:a,end:r}}}c=E.substr(r,4);if("\x3e\x3e\x3e\x3d"===c)return r+=4,{type:D.Punctuator,value:c,lineNumber:M,lineStart:Q,start:a,
end:r};c=c.substr(0,3);if("\x3e\x3e\x3e"===c||"\x3c\x3c\x3d"===c||"\x3e\x3e\x3d"===c)return r+=3,{type:D.Punctuator,value:c,lineNumber:M,lineStart:Q,start:a,end:r};c=c.substr(0,2);if(d===c[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===c)return r+=2,{type:D.Punctuator,value:c,lineNumber:M,lineStart:Q,start:a,end:r};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++r,{type:D.Punctuator,value:d,lineNumber:M,lineStart:Q,start:a,end:r};F()}function x(){var a,c,b;b=E[r];f(t(b.charCodeAt(0))||"."===
b,"Numeric literal must start with a decimal digit or a decimal point");c=r;a="";if("."!==b){a=E[r++];b=E[r];if("0"===a){if("x"===b||"X"===b){++r;for(a="";r<O&&n(E[r]);)a+=E[r++];0===a.length&&F();q(E.charCodeAt(r))&&F();return{type:D.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:M,lineStart:Q,start:c,end:r}}if("b"===b||"B"===b){++r;for(b="";r<O;){a=E[r];if("0"!==a&&"1"!==a)break;b+=E[r++]}0===b.length&&F();r<O&&(a=E.charCodeAt(r),(q(a)||t(a))&&F());return{type:D.NumericLiteral,value:parseInt(b,
2),lineNumber:M,lineStart:Q,start:c,end:r}}if("o"===b||"O"===b){l(b)?(b=!0,a="0"+E[r++]):(b=!1,++r,a="");for(;r<O&&l(E[r]);)a+=E[r++];b||0!==a.length||F();(q(E.charCodeAt(r))||t(E.charCodeAt(r)))&&F();return{type:D.NumericLiteral,value:parseInt(a,8),octal:b,lineNumber:M,lineStart:Q,start:c,end:r}}}for(;t(E.charCodeAt(r));)a+=E[r++];b=E[r]}if("."===b){for(a+=E[r++];t(E.charCodeAt(r));)a+=E[r++];b=E[r]}if("e"===b||"E"===b){a+=E[r++];b=E[r];if("+"===b||"-"===b)a+=E[r++];if(t(E.charCodeAt(r)))for(;t(E.charCodeAt(r));)a+=
E[r++];else F()}q(E.charCodeAt(r))&&F();return{type:D.NumericLiteral,value:parseFloat(a),lineNumber:M,lineStart:Q,start:c,end:r}}function P(){G=null;g();Y("Regular Expression language structures not supported")}function Z(){g();P()}function ga(){var a;a=y.tokens[y.tokens.length-1];if(!a)return Z();if("Punctuator"===a.type){if("]"===a.value)return A();if(")"===a.value)return a=y.tokens[y.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==
a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?A():Z();if("}"===a.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(a=y.tokens[y.openCurlyToken-4],!a)return A()}else if(y.tokens[y.openCurlyToken-4]&&"Keyword"===y.tokens[y.openCurlyToken-4].type){if(a=y.tokens[y.openCurlyToken-5],!a)return Z()}else return A();if(0<=Ma.indexOf(a.value))return A()}return Z()}return"Keyword"===a.type&&"this"!==a.value?Z():A()}function B(){var a;g();if(r>=O)return{type:D.EOF,
lineNumber:M,lineStart:Q,start:r,end:r};a=E.charCodeAt(r);if(q(a)){var c;a=r;if(92===E.charCodeAt(r))c=z();else a:{var e;for(c=r++;r<O;){e=E.charCodeAt(r);if(92===e){r=c;c=z();break a}if(d(e))++r;else break}c=E.slice(c,r)}return{type:1===c.length?D.Identifier:b(c)?D.Keyword:"null"===c.toLowerCase()?D.NullLiteral:"true"===c.toLowerCase()||"false"===c.toLowerCase()?D.BooleanLiteral:D.Identifier,value:c,lineNumber:M,lineStart:Q,start:a,end:r}}if(40===a||41===a||59===a)return A();if(39===a||34===a){var k=
"",m,u,v;e=!1;var w,B;w=M;B=Q;a=E[r];f("'"===a||'"'===a,"String literal must starts with a quote");c=r;for(++r;r<O;)if(m=E[r++],m===a){a="";break}else if("\\"===m)if((m=E[r++])&&h(m.charCodeAt(0)))++M,"\r"===m&&"\n"===E[r]&&++r,Q=r;else switch(m){case "u":case "x":if("{"===E[r]){++r;u=m=void 0;m=E[r];u=0;for("}"===m&&F();r<O;){m=E[r++];if(!n(m))break;u=16*u+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<u||"}"!==m)&&F();m=65535>=u?String.fromCharCode(u):String.fromCharCode((u-65536>>10)+55296,
(u-65536&1023)+56320);k+=m}else v=r,(u=p(m))?k+=u:(r=v,k+=m);break;case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\x0B";break;default:l(m)?(u="01234567".indexOf(m),0!==u&&(e=!0),r<O&&l(E[r])&&(e=!0,u=8*u+"01234567".indexOf(E[r++]),0<="0123".indexOf(m)&&r<O&&l(E[r])&&(u=8*u+"01234567".indexOf(E[r++]))),k+=String.fromCharCode(u)):k+=m}else if(h(m.charCodeAt(0)))break;else k+=m;""!==a&&F();return{type:D.StringLiteral,value:k,
octal:e,startLineNumber:w,startLineStart:B,lineNumber:M,lineStart:Q,start:c,end:r}}return 46===a?t(E.charCodeAt(r+1))?x():A():t(a)?x():y.tokenize&&47===a?ga():A()}function a(){var a,c,b;g();a={start:{line:M,column:r-Q}};c=B();a.end={line:M,column:r-Q};c.type!==D.EOF&&(b=E.slice(c.start,c.end),a={type:ta[c.type],value:b,range:[c.start,c.end],loc:a},c.regex&&(a.regex={pattern:c.regex.pattern,flags:c.regex.flags}),y.tokens.push(a));return c}function m(){var c;c=G;r=c.end;M=c.lineNumber;Q=c.lineStart;
G="undefined"!==typeof y.tokens?a():B();r=c.end;M=c.lineNumber;Q=c.lineStart;return c}function c(){var c,b,d;c=r;b=M;d=Q;G="undefined"!==typeof y.tokens?a():B();r=c;M=b;Q=d}function w(){this.line=M;this.column=r-Q}function K(){this.start=new w;this.end=null}function v(a){this.start=a.type===D.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function R(){r=G.start;G.type===D.StringLiteral?(M=G.startLineNumber,Q=G.startLineStart):
(M=G.lineNumber,Q=G.lineStart);y.range&&(this.range=[r,0]);y.loc&&(this.loc=new K)}function S(a){y.range&&(this.range=[a.start,0]);y.loc&&(this.loc=new v(a))}function N(){var a,c,b,d;a=r;c=M;b=Q;g();d=M!==c;r=a;M=c;Q=b;return d}function ha(a,c,b){var d=Error("Line "+a+": "+b);d.index=c;d.lineNumber=a;d.column=c-Q+1;d.description=b;return d}function Y(a){var c,b;c=Array.prototype.slice.call(arguments,1);b=a.replace(/%(\d)/g,function(a,b){f(b<c.length,"Message reference must be in range");return c[b]});
throw ha(M,r,b);}function fa(a){var c,b;c=Array.prototype.slice.call(arguments,1);b=a.replace(/%(\d)/g,function(a,b){f(b<c.length,"Message reference must be in range");return c[b]});b=ha(M,r,b);if(y.errors)y.errors.push(b);else throw b;}function na(a,c){var b=U.UnexpectedToken;a&&(b=c?c:a.type===D.EOF?U.UnexpectedEOS:a.type===D.Identifier?U.UnexpectedIdentifier:a.type===D.NumericLiteral?U.UnexpectedNumber:a.type===D.StringLiteral?U.UnexpectedString:U.UnexpectedToken);b=b.replace("%0",a?a.value:"ILLEGAL");
return a&&"number"===typeof a.lineNumber?ha(a.lineNumber,a.start,b):ha(M,r,b)}function F(a,c){throw na(a,c);}function da(a,c){a=na(a,c);if(y.errors)y.errors.push(a);else throw a;}function I(a){var c=m();c.type===D.Punctuator&&c.value===a||F(c)}function W(){var a;y.errors?(a=G,a.type===D.Punctuator&&","===a.value?m():a.type===D.Punctuator&&";"===a.value?(m(),da(a)):da(a,U.UnexpectedToken)):I(",")}function ba(a){var c=m();c.type===D.Keyword&&c.value.toLowerCase()===a.toLowerCase()||F(c)}function u(a){return G.type===
D.Punctuator&&G.value===a}function V(a){return G.type===D.Keyword&&G.value.toLowerCase()===a.toLowerCase()}function k(){var a;59===E.charCodeAt(r)||u(";")?m():(a=M,g(),M===a&&(G.type===D.EOF||u("}")||F(G)))}function la(a){return a.type===L.Identifier||a.type===L.MemberExpression}function ca(a,c){var b,d=new R;c=aa;b=wa();aa=c;return d.finishFunctionExpression(null,a,[],b)}function oa(){var a,c;a=aa;aa=!0;c=Ha();c=ca(c.params);aa=a;return c}function X(){var a,c=new R;a=m();return a.type===D.StringLiteral||
a.type===D.NumericLiteral?(aa&&a.octal&&da(a,U.StrictOctalLiteral),c.finishLiteral(a)):c.finishIdentifier(a.value)}function sa(){var a,c,b,d=new R;a=G;if(a.type===D.Identifier)return c=X(),"get"!==a.value||u(":")||u("(")?"set"!==a.value||u(":")||u("(")?u(":")?(m(),a=ra(),d.finishProperty("init",c,a,!1,!1)):u("(")?(a=oa(),d.finishProperty("init",c,a,!0,!1)):d.finishProperty("init",c,c,!1,!0):(c=X(),I("("),a=G,a.type!==D.Identifier?(I(")"),da(a),a=ca([])):(b=[Aa()],I(")"),a=ca(b,a)),d.finishProperty("set",
c,a,!1,!1)):(c=X(),I("("),I(")"),a=ca([]),d.finishProperty("get",c,a,!1,!1));if(a.type===D.EOF||a.type===D.Punctuator)F(a);else{c=X();if(u(":"))return m(),a=ra(),d.finishProperty("init",c,a,!1,!1);if(u("("))return a=oa(),d.finishProperty("init",c,a,!0,!1);F(m())}}function T(a){var c=[],b,d,e={},f=String,g=new R;for(!0!==a&&I("{");!u("}");)a=sa(),b=a.key.type===L.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?xa.Data:"get"===a.kind?xa.Get:xa.Set,b="$"+b,Object.prototype.hasOwnProperty.call(e,
b)?(e[b]===xa.Data?aa&&d===xa.Data?fa(U.StrictDuplicateProperty):d!==xa.Data&&fa(U.AccessorDataProperty):d===xa.Data?fa(U.AccessorDataProperty):e[b]&d&&fa(U.AccessorGetSet),e[b]|=d):e[b]=d,c.push(a),u("}")||W();I("}");return g.finishObjectExpression(c)}function ka(){var a,b,d,e;if(u("("))return I("("),u(")")?(m(),b=Ca.ArrowParameterPlaceHolder):(++J.parenthesisCount,b=ja(),I(")")),b;if(u("[")){b=[];var f=new R;for(I("[");!u("]");)u(",")?(m(),b.push(null)):(b.push(ra()),u("]")||I(","));m();return f.finishArrayExpression(b)}if(u("{"))return T();
a=G.type;e=new R;if(a===D.Identifier)d=e.finishIdentifier(m().value);else if(a===D.StringLiteral||a===D.NumericLiteral)aa&&G.octal&&da(G,U.StrictOctalLiteral),d=e.finishLiteral(m());else if(a===D.Keyword){if(V("function")){e=null;var g;d=[];var h=[],k,p=new R;ba("function");u("(")||(e=Aa());g=Ha(b);d=g.params;h=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(f=g.message);k=aa;g=wa();aa&&b&&F(b,f);aa&&a&&da(a,f);aa=k;return p.finishFunctionExpression(e,d,h,g)}V("this")?(m(),d=e.finishThisExpression()):
F(m())}else a===D.BooleanLiteral?(b=m(),b.value="true"===b.value.toLowerCase(),d=e.finishLiteral(b)):a===D.NullLiteral?(b=m(),b.value=null,d=e.finishLiteral(b)):u("/")||u("/\x3d")?(d="undefined"!==typeof y.tokens?e.finishLiteral(Z()):e.finishLiteral(P()),c()):F(m());return d}function ea(){var a=[];I("(");if(!u(")"))for(;r<O;){a.push(ra());if(u(")"))break;W()}I(")");return a}function pa(){I(".");var a,c=new R;a=m();a.type===D.Identifier||a.type===D.Keyword||a.type===D.BooleanLiteral||a.type===D.NullLiteral||
F(a);return c.finishIdentifier(a.value)}function ma(){var a;I("[");a=ja();I("]");return a}function qa(){var a,c,b=new R;ba("new");var d;f(J.allowIn,"callee of new expression always allow in keyword.");d=G;for(a=V("new")?qa():ka();;)if(u("["))c=ma(),a=(new S(d)).finishMemberExpression("[",a,c);else if(u("."))c=pa(),a=(new S(d)).finishMemberExpression(".",a,c);else break;c=u("(")?ea():[];return b.finishNewExpression(a,c)}function ua(){var a,c,b=G,d,e=J.allowIn;c=G;J.allowIn=!0;for(a=V("new")?qa():ka();;)if(u("."))d=
pa(),a=(new S(c)).finishMemberExpression(".",a,d);else if(u("("))d=ea(),a=(new S(c)).finishCallExpression(a,d);else if(u("["))d=ma(),a=(new S(c)).finishMemberExpression("[",a,d);else break;J.allowIn=e;G.type!==D.Punctuator||!u("++")&&!u("--")||N()||(la(a)||fa(U.InvalidLHSInAssignment),c=m(),a=(new S(b)).finishPostfixExpression(c.value,a));return a}function ia(){var a,c,b;G.type!==D.Punctuator&&G.type!==D.Keyword?c=ua():u("++")||u("--")?(b=G,a=m(),c=ia(),la(c)||fa(U.InvalidLHSInAssignment),c=(new S(b)).finishUnaryExpression(a.value,
c)):u("+")||u("-")||u("~")||u("!")?(b=G,a=m(),c=ia(),c=(new S(b)).finishUnaryExpression(a.value,c)):V("delete")||V("void")||V("typeof")?(b=G,a=m(),c=ia(),c=(new S(b)).finishUnaryExpression(a.value,c),aa&&"delete"===c.operator&&c.argument.type===L.Identifier&&fa(U.StrictDelete)):c=ua();return c}function ya(a,c){var b=0;if(a.type!==D.Punctuator&&a.type!==D.Keyword)return 0;switch(a.value){case "||":b=1;break;case "\x26\x26":b=2;break;case "|":b=3;break;case "^":b=4;break;case "\x26":b=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":b=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":b=7;break;case "in":b=c?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":b=8;break;case "+":case "-":b=9;break;case "*":case "/":case "%":b=11}return b}function za(){var a,c,b,d,e,f;a=G;c=ia();if(c===Ca.ArrowParameterPlaceHolder)return c;b=G;d=ya(b,J.allowIn);if(0===d)return c;b.prec=d;m();a=[a,G];f=ia();for(e=[c,b,f];0<(d=ya(G,J.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),b=e.pop().value,
c=e.pop(),a.pop(),c=(new S(a[a.length-1])).finishBinaryExpression(b,c,f),e.push(c);b=m();b.prec=d;e.push(b);a.push(G);c=ia();e.push(c)}d=e.length-1;c=e[d];for(a.pop();1<d;)c=(new S(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],c),d-=2;return c}function va(a){var c,b,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};c=0;for(b=a.length;c<b;c+=1)if(d=a[c],d.type===L.Identifier)e.push(d),f.push(null),Ga(h,d,d.name);else if(d.type===L.AssignmentExpression)e.push(d.left),f.push(d.right),++g,Ga(h,d.left,d.left.name);
else return null;h.message===U.StrictParamDupe&&(a=aa?h.stricted:h.firstRestricted,F(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function ra(){var a,c,b,d,e;a=J.parenthesisCount;c=e=G;var f,g;g=G;b=za();b!==Ca.ArrowParameterPlaceHolder&&u("?")&&(m(),f=J.allowIn,J.allowIn=!0,c=ra(),J.allowIn=f,I(":"),f=ra(),b=(new S(g)).finishConditionalExpression(b,c,f));if(b===Ca.ArrowParameterPlaceHolder||u("\x3d\x3e"))if(J.parenthesisCount===
a||J.parenthesisCount===a+1)if(b.type===L.Identifier?d=va([b]):b.type===L.AssignmentExpression?d=va([b]):b.type===L.SequenceExpression?d=va(b.expressions):b===Ca.ArrowParameterPlaceHolder&&(d=va([])),d)return a=d,e=new S(e),I("\x3d\x3e"),d=aa,b=u("{")?wa():ra(),aa&&a.firstRestricted&&F(a.firstRestricted,a.message),aa&&a.stricted&&da(a.stricted,a.message),aa=d,e.finishArrowFunctionExpression(a.params,a.defaults,b,b.type!==L.BlockStatement);G.type!==D.Punctuator?a=!1:(a=G.value,a="\x3d"===a||"*\x3d"===
a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(la(b)||fa(U.InvalidLHSInAssignment),c=m(),a=ra(),b=(new S(e)).finishAssignmentExpression(c.value,b,a));return b}function ja(){var a,c=G;a=ra();if(u(",")){for(a=[a];r<O&&u(",");)m(),a.push(ra());a=(new S(c)).finishSequenceExpression(a)}return a}function Aa(){var a,c=new R;a=m();a.type!==D.Identifier&&F(a);return c.finishIdentifier(a.value)}
function Fa(a){var c=null,b,d=new R;b=Aa();"const"===a?(I("\x3d"),c=ra()):u("\x3d")&&(m(),c=ra());return d.finishVariableDeclarator(b,c)}function Ja(a){var c=[];do{c.push(Fa(a));if(!u(","))break;m()}while(r<O);return c}function Ba(a){var c=G.type,b,d;c===D.EOF&&F(G);if(c===D.Punctuator&&"{"===G.value){if(a){I("{");var e=G;a=r;b=M;d=Q;m();c=u(":");G=e;r=a;M=b;Q=d;if((G.type===D.Identifier||G.type===D.StringLiteral)&&c)return T(!0);a=new R;for(b=[];r<O&&!u("}");){d=Da();if("undefined"===typeof d)break;
b.push(d)}I("}");return a.finishBlockStatement(b)}return T()}a=new R;if(c===D.Punctuator)switch(G.value){case ";":return a=new R,I(";"),a.finishEmptyStatement();case "(":return b=ja(),k(),a.finishExpressionStatement(b)}else if(c===D.Keyword)switch(G.value.toLowerCase()){case "break":return b=null,ba("break"),59===E.charCodeAt(r)?(m(),J.inIteration||J.inSwitch||Y(U.IllegalBreak),a=a.finishBreakStatement(null)):N()?(J.inIteration||J.inSwitch||Y(U.IllegalBreak),a=a.finishBreakStatement(null)):(G.type===
D.Identifier&&(b=Aa(),d="$"+b.name,Object.prototype.hasOwnProperty.call(J.labelSet,d)||Y(U.UnknownLabel,b.name)),k(),null!==b||J.inIteration||J.inSwitch||Y(U.IllegalBreak),a=a.finishBreakStatement(b)),a;case "continue":return b=null,ba("continue"),59===E.charCodeAt(r)?(m(),J.inIteration||Y(U.IllegalContinue),a=a.finishContinueStatement(null)):N()?(J.inIteration||Y(U.IllegalContinue),a=a.finishContinueStatement(null)):(G.type===D.Identifier&&(b=Aa(),d="$"+b.name,Object.prototype.hasOwnProperty.call(J.labelSet,
d)||Y(U.UnknownLabel,b.name)),k(),null!==b||J.inIteration||Y(U.IllegalContinue),a=a.finishContinueStatement(b)),a;case "for":var f,g,h;g=J.allowIn;f=c=e=null;ba("for");I("(");if(u(";"))m();else{if(V("var")){J.allowIn=!1;var p=new R;f=m();h=Ja();f=p.finishVariableDeclaration(h,f.value);J.allowIn=g;1===f.declarations.length&&V("in")&&(m(),b=f,d=ja(),f=null)}else J.allowIn=!1,f=ja(),J.allowIn=g,V("in")&&(la(f)||fa(U.InvalidLHSInForIn),m(),b=f,d=ja(),f=null);"undefined"===typeof b&&I(";")}"undefined"===
typeof b&&(u(";")||(c=ja()),I(";"),u(")")||(e=ja()));I(")");h=J.inIteration;J.inIteration=!0;g=Ba(!0);J.inIteration=h;return"undefined"===typeof b?a.finishForStatement(f,c,e,g):a.finishForInStatement(b,d,g);case "function":return Ka(a);case "if":return ba("if"),I("("),b=ja(),I(")"),d=Ba(!0),V("else")?(m(),c=Ba(!0)):c=null,a.finishIfStatement(b,d,c);case "return":return b=null,ba("return"),J.inFunctionBody||fa(U.IllegalReturn),32===E.charCodeAt(r)&&q(E.charCodeAt(r+1))?(b=ja(),k(),a=a.finishReturnStatement(b)):
N()?a=a.finishReturnStatement(null):(u(";")||u("}")||G.type===D.EOF||(b=ja()),k(),a=a.finishReturnStatement(b)),a;case "var":return ba("var"),b=Ja(),k(),a.finishVariableDeclaration(b,"var")}b=ja();if(b.type===L.Identifier&&u(":"))return m(),c="$"+b.name,Object.prototype.hasOwnProperty.call(J.labelSet,c)&&Y(U.Redeclaration,"Label",b.name),J.labelSet[c]=!0,d=Ba(!1),delete J.labelSet[c],a.finishLabeledStatement(b,d);k();return a.finishExpressionStatement(b)}function wa(){var a,c=[],b,d,e,f,g,h=new R;
for(I("{");r<O&&G.type===D.StringLiteral;){b=G;a=Da();c.push(a);if(a.expression.type!==L.Literal)break;a=E.slice(b.start+1,b.end-1);"use strict"===a?(aa=!0,d&&da(d,U.StrictOctalLiteral)):!d&&b.octal&&(d=b)}b=J.labelSet;d=J.inIteration;e=J.inSwitch;f=J.inFunctionBody;g=J.parenthesizedCount;J.labelSet={};J.inIteration=!1;J.inSwitch=!1;J.inFunctionBody=!0;for(J.parenthesizedCount=0;r<O&&!u("}");){a=Da();if("undefined"===typeof a)break;c.push(a)}I("}");J.labelSet=b;J.inIteration=d;J.inSwitch=e;J.inFunctionBody=
f;J.parenthesizedCount=g;return h.finishBlockStatement(c)}function Ga(a,c,b){b="$"+b;aa?Object.prototype.hasOwnProperty.call(a.paramSet,b)&&(a.stricted=c,a.message=U.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,b)&&(a.firstRestricted=c,a.message=U.StrictParamDupe);a.paramSet[b]=!0}function Ha(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};I("(");if(!u(")"))for(a.paramSet={};r<O;){var c=a,b=void 0,d=void 0,e=void 0,b=G,d=Aa();Ga(c,b,b.value);u("\x3d")&&
(m(),e=ra(),++c.defaultCount);c.params.push(d);c.defaults.push(e);if(u(")"))break;I(",")}I(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ka(){var a,c=[],b=[],d,e,f,g,h,k=new R;ba("function");a=Aa();d=Ha(f);c=d.params;b=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=aa;d=wa();aa&&f&&F(f,g);aa&&e&&da(e,g);aa=h;return k.finishFunctionDeclaration(a,c,b,d)}function Da(){if(G.type===
D.Keyword)return"function"===G.value.toLowerCase()?Ka():Ba(!1);if(G.type!==D.EOF)return Ba(!1)}function La(){var a,c,b,d=[];for(a=0;a<y.tokens.length;++a)c=y.tokens[a],b={type:c.type,value:c.value},c.regex&&(b.regex={pattern:c.regex.pattern,flags:c.regex.flags}),y.range&&(b.range=c.range),y.loc&&(b.loc=c.loc),d.push(b);y.tokens=d}var D,ta,Ma,L,Ca,xa,U,Ia,E,aa,r,M,Q,O,G,J,y;D={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};
ta={};ta[D.BooleanLiteral]="Boolean";ta[D.EOF]="\x3cend\x3e";ta[D.Identifier]="Identifier";ta[D.Keyword]="Keyword";ta[D.NullLiteral]="Null";ta[D.NumericLiteral]="Numeric";ta[D.Punctuator]="Punctuator";ta[D.StringLiteral]="String";ta[D.RegularExpression]="RegularExpression";Ma="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
L={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ca={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
xa={Data:1,Get:2,Set:4};U={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ia={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
S.prototype=R.prototype={processComment:function(){var a,c,b,d=y.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===L.Program&&0<this.body.length)){if(0<y.trailingComments.length){b=[];for(e=y.trailingComments.length-1;0<=e;--e)f=y.trailingComments[e],f.range[0]>=this.range[1]&&(b.unshift(f),y.trailingComments.splice(e,1));y.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(b=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<y.leadingComments.length)for(c=[],e=y.leadingComments.length-1;0<=e;--e)f=y.leadingComments[e],f.range[1]<=this.range[0]&&(c.unshift(f),y.leadingComments.splice(e,1));c&&0<c.length&&(this.leadingComments=c);b&&0<b.length&&(this.trailingComments=b);d.push(this)}},finish:function(){y.range&&(this.range[1]=r);y.loc&&(this.loc.end=
new w,y.source&&(this.loc.source=y.source));y.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=L.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,c,b){this.type=L.AssignmentExpression;this.operator=a;this.left=c;this.right=b;this.finish();return this},finishBinaryExpression:function(a,c,b){this.type="||"===a||"\x26\x26"===a?L.LogicalExpression:L.BinaryExpression;this.operator=a;this.left=c;this.right=b;this.finish();
return this},finishBlockStatement:function(a){this.type=L.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=L.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,c){this.type=L.CallExpression;this.callee=a;this.arguments=c;this.finish();return this},finishConditionalExpression:function(a,c,b){this.type=L.ConditionalExpression;this.test=a;this.consequent=c;this.alternate=b;this.finish();return this},finishContinueStatement:function(a){this.type=
L.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=L.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=L.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,c,b,d){this.type=L.ForStatement;this.init=a;this.test=c;this.update=b;this.body=d;this.finish();return this},finishForInStatement:function(a,c,b){this.type=L.ForInStatement;this.left=a;this.right=c;this.body=b;
this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,c,b,d){this.type=L.FunctionDeclaration;this.id=a;this.params=c;this.defaults=b;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,c,b,d){this.type=L.FunctionExpression;this.id=a;this.params=c;this.defaults=b;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=L.Identifier;this.name=
a;this.finish();return this},finishIfStatement:function(a,c,b){this.type=L.IfStatement;this.test=a;this.consequent=c;this.alternate=b;this.finish();return this},finishLiteral:function(a){this.type=L.Literal;this.value=a.value;this.raw=E.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,c,b){this.type=L.MemberExpression;this.computed="["===a;this.object=c;this.property=b;this.finish();return this},finishObjectExpression:function(a){this.type=
L.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,c){this.type=L.UpdateExpression;this.operator=a;this.argument=c;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=L.Program;this.body=a;this.finish();return this},finishProperty:function(a,c,b,d,e){this.type=L.Property;this.key=c;this.value=b;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=L.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,c){this.type="++"===a||"--"===a?L.UpdateExpression:L.UnaryExpression;this.operator=a;this.argument=c;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,c){this.type=L.VariableDeclaration;this.declarations=a;this.kind=c;this.finish();return this},finishVariableDeclarator:function(a,c){this.type=L.VariableDeclarator;this.id=a;this.init=c;this.finish();return this}};H.version="2.0.0-dev";H.tokenize=
function(a,b){var d,e;d=String;"string"===typeof a||a instanceof String||(a=d(a));E=a;r=0;M=0<E.length?1:0;Q=0;O=E.length;G=null;J={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};y={};b=b||{};b.tokens=!0;y.tokens=[];y.tokenize=!0;y.openParenToken=-1;y.openCurlyToken=-1;y.range="boolean"===typeof b.range&&b.range;y.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(y.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(y.errors=
[]);try{c();if(G.type===D.EOF)return y.tokens;for(m();G.type!==D.EOF;)try{m()}catch(Ea){if(y.errors){y.errors.push(Ea);break}else throw Ea;}La();e=y.tokens;"undefined"!==typeof y.comments&&(e.comments=y.comments);"undefined"!==typeof y.errors&&(e.errors=y.errors)}catch(Ea){throw Ea;}finally{y={}}return e};H.parse=function(a,b){var d,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));E=a;r=0;M=0<E.length?1:0;Q=0;O=E.length;G=null;J={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};y={};"undefined"!==typeof b&&(y.range="boolean"===typeof b.range&&b.range,y.loc="boolean"===typeof b.loc&&b.loc,y.attachComment="boolean"===typeof b.attachComment&&b.attachComment,y.loc&&null!==b.source&&void 0!==b.source&&(y.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(y.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(y.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=
[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{var f;g();c();f=new R;aa=!1;var h;a=[];for(var k,p,l;r<O;){k=G;if(k.type!==D.StringLiteral)break;h=Da();a.push(h);if(h.expression.type!==L.Literal)break;p=E.slice(k.start+1,k.end-1);"use strict"===p?(aa=!0,l&&da(l,U.StrictOctalLiteral)):!l&&k.octal&&(l=k)}for(;r<O;){h=Da();if("undefined"===typeof h)break;a.push(h)}d=f.finishProgram(a);"undefined"!==typeof y.comments&&(d.comments=y.comments);"undefined"!==typeof y.tokens&&(La(),
d.tokens=y.tokens);"undefined"!==typeof y.errors&&(d.errors=y.errors)}catch(Na){throw Na;}finally{y={}}return d};H.Syntax=function(){var a,c={};"function"===typeof Object.create&&(c=Object.create(null));for(a in L)L.hasOwnProperty(a)&&(c[a]=L[a]);"function"===typeof Object.freeze&&Object.freeze(c);return c}()})},"*now":function(H){H(['dojo/i18n!*preload*esri/support/nls/arcadeUtils*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(H,f,t,n,l,h,q,d){function b(b){var d;try{d=b?t.parseScript(b):null}catch(A){d=null}return d}function e(d){d=b(d);return!!d&&t.scriptUsesGeometryEngine(d)}Object.defineProperty(f,"__esModule",{value:!0});f.arcade=t;f.Dictionary=n;f.arcadeFeature=l;var C=/^\$feature\./i,g={vars:{$feature:"any",$view:"any"},spatialReference:null};
f.createSyntaxTree=b;f.createFunction=function(d,e){e=e||h.clone(g);d="string"===typeof d?b(d):d;if(!d)return null;var f;try{f=d?t.compileScript(d,e):null}catch(x){f=null}return f};f.createExecContext=function(b,d){return{vars:{$feature:null==b?new l:l.createFromGraphic(b),$view:d&&d.view},spatialReference:d&&d.sr}};f.createFeature=function(b,d,e){return l.createFromGraphicLikeObject(d,b,e)};f.updateExecContext=function(b,d){b.vars.$feature=d};f.evalSyntaxTree=function(b,d){var e;try{e=t.executeScript(b,
d)}catch(x){e=null}return e};f.executeFunction=function(b,d){var e;try{e=b?b(d):null}catch(x){e=null}return e};f.executeAsyncFunction=function(b,d){try{return b?b(d):q.resolve(null)}catch(A){return q.resolve(null)}};f.extractFieldNames=function(d){if(!d)return[];d="string"===typeof d?b(d):d;if(!d)return[];var e=[];t.extractFieldLiterals(d).forEach(function(b){C.test(b)&&(b=b.replace(C,""),e.push(b))});e.sort();return e.filter(function(b,d){return 0===d||e[d-1]!==b})};f.dependsOnView=function(b){return t.referencesMember(b,
"$view")};f.hasVariable=function(b,d){return b?t.referencesMember(b,d):!1};f.getViewInfo=function(b){if(b&&(null!=b.spatialReference||null!=b.scale&&null!=b.viewingMode))return{view:b.viewingMode&&null!=b.scale?new n({viewingMode:b.viewingMode,scale:b.scale}):null,sr:b.spatialReference}};f.convertServiceUrlToWorkspace=function(b,d){var e=t.featureSetUtils();return e?e.createFeatureSetCollectionFromService(b,d):null};f.convertFeatureLayerToFeatureSet=function(b,d){if(null===b)return null;var e=t.featureSetUtils();
return e?e.constructFeatureSet(b,d):null};f.convertMapToFeatureSetCollection=function(b){if(null===b||null===b.map)return null;var d=t.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(b.map,b.spatialReference):null};f.loadScriptDependencies=function(b,d,e){void 0===e&&(e=[]);return t.loadScriptDependencies(b,d,e)};f.enableGeometryOperations=function(){return t.enableGeometrySupport()};f.enableFeatureSetOperations=function(){return t.enableFeatureSetSupport()};f.applyTextFormattingHTML=
function(b){var d=/(\n)/gi;return"string"===typeof b?b.replace(d,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):b};f.hasGeometryOperations=function(b){if(!b)return!1;if("string"===typeof b)return e(b);if("simple"===b.type||"class-breaks"===b.type||"unique-value"===b.type||"dot-density"===b.type||"dictionary"===b.type){if("dot-density"===b.type){var f=b.attributes.some(function(b){return e(b.valueExpression)});if(f)return f}f=b.visualVariables;f=!!f&&f.some(function(b){var f=e(b.valueExpression);"size"===
b.type&&(d.isSizeVariable(b.minSize)&&(f=f||e(b.minSize.valueExpression)),d.isSizeVariable(b.maxSize)&&(f=f||e(b.maxSize.valueExpression)));return f});return"valueExpression"in b&&e(b.valueExpression)?!0:f}return"esri.layers.support.LabelClass"===b.declaredClass?(b=b.labelExpressionInfo&&b.labelExpressionInfo.expression,!(!b||!e(b))||!1):"esri.PopupTemplate"===b.declaredClass?!!b.expressionInfos&&b.expressionInfos.some(function(b){return e(b.expression)}):!1}});