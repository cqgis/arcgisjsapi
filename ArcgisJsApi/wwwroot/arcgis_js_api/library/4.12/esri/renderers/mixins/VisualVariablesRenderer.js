// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),function(y,z,l,
e,m,n,p,f,h,q,r,t,u,v,w){var x={base:v,key:"type",typeMap:{opacity:r,color:q,rotation:t,size:u}};return function(k){function a(){var c=null!==k&&k.apply(this,arguments)||this;c._vvFactory=new w;return c}l(a,k);Object.defineProperty(a.prototype,"visualVariables",{set:function(c){this._vvFactory.visualVariables=c;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});a.prototype.readVisualVariables=function(c,d,b){return this._vvFactory.readVariables(c,d,b)};a.prototype.writeVisualVariables=
function(c,d,b,a){d[b]=this._vvFactory.writeVariables(c,a)};a.prototype.hasVisualVariables=function(c,d){return c?!!this.getVisualVariablesForType(c,d):!!(this.getVisualVariablesForType("size",d)||this.getVisualVariablesForType("color",d)||this.getVisualVariablesForType("opacity",d)||this.getVisualVariablesForType("rotation",d))};a.prototype.getVisualVariablesForType=function(c,d){var b=this.visualVariables;if(b&&(b=b.filter(function(b){return b.type===c&&("string"===typeof d?b.target===d:!1===d?
!b.target:!0)}),!b||0!==b.length))return b};a.prototype.collectVVRequiredFields=function(c,d){return n(this,void 0,void 0,function(){var b,a,f,g;return m(this,function(e){switch(e.label){case 0:b=[],this.visualVariables&&(b=b.concat(this.visualVariables)),a=0,f=b,e.label=1;case 1:if(!(a<f.length))return[3,4];g=f[a];if(!g)return[3,3];g.field&&h.collectField(c,d,g.field);g.normalizationField&&h.collectField(c,d,g.normalizationField);return g.valueExpression?[4,h.collectArcadeFieldNames(c,d,g.valueExpression)]:
[3,3];case 2:e.sent(),e.label=3;case 3:return a++,[3,1];case 4:return[2]}})})};e([f.property({types:[x],value:null,json:{write:!0}})],a.prototype,"visualVariables",null);e([f.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],a.prototype,"readVisualVariables",null);e([f.writer("visualVariables")],a.prototype,"writeVisualVariables",null);return a=e([f.subclass("esri.renderers.mixins.VisualVariablesRenderer")],a)}(f.declared(p))});