// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper dojo/string ./adapters/CSVLayerAdapter ./adapters/FeatureLayerAdapter ./adapters/LayerAdapter ./adapters/PointCloudLayerAdapter ./adapters/SceneLayerAdapter ../../../support/arcadeUtils".split(" "),function(w,e,x,y,p,q,m,r,t,u,v){function h(a){return p.pad(a,2,"0")}function n(a,b,c){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=c?a.getFullYear():a.getUTCFullYear();var d=h((c?a.getMonth():
a.getUTCMonth())+1),g=h(c?a.getDate():a.getUTCDate()),e=h(c?a.getHours():a.getUTCHours()),f=h(c?a.getMinutes():a.getUTCMinutes());a=h(c?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+b+"-"+d+"-"+g+" "+e+":"+f+":"+a+"'"}return a}function k(a,b){if(b instanceof Date)return"date";if("number"===typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}Object.defineProperty(e,"__esModule",{value:!0});var f,l=(f={},f[0]={adapter:q,
type:"csv",label:"CSVLayer"},f[2]={adapter:m,type:"feature",label:"FeatureLayer"},f[1]={adapter:m,type:"geojson",label:"GeoJSONLayer"},f[3]={adapter:u,type:"scene",label:"SceneLayer"},f[4]={adapter:t,type:"point-cloud",label:"PointCloudLayer"},f);e.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};e.getLayerTypeLabels=function(a){return a.map(function(a){return l[a].label})};e.createLayerAdapter=function(a,b){if(a instanceof r)return a;var c=
null;b.some(function(b){var d=a.type===l[b].type;d&&(c=new l[b].adapter({layer:a}));return d});return c};e.getFieldsList=function(a){var b=a.field,c=a.normalizationField;a=a.valueExpression;var d=[];a&&(d=v.extractFieldNames(a));b&&d.push(b);c&&d.push(c);return d};e.getNormalizationType=function(a){var b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};e.getDateDiffSQL=function(a,b,c,d){var g=a.hasQueryEngine;c=n(c,k(a,c),g);a=n(b,
k(a,b),g);a="("+c+" - "+a+")";g&&(a="("+a+" * "+e.unitValueInDays.milliseconds+")");d=e.unitValueInDays[d];g="/";1>d&&(d=1/d,g="*");return{sqlExpression:1===d?a:"("+a+" "+g+" "+d+")",sqlWhere:null}};e.getDateType=k;e.pickRandomItems=function(a,b){var c=a.length,d=new Set,e=[],f;if(b>=c)e=a.slice(0);else for(;e.length<b;)f=Math.floor(Math.random()*(c-0))+0,d.has(f)||(d.add(f),e.push(a[f]));return e}});