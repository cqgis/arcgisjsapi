// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/Collection ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/accessorSupport/decorators ../../../../draw/support/drawUtils ../../../../interactive/GraphicManipulator ../../../../interactive/InteractiveToolBase".split(" "),function(g,e,f,m,n,p,q,r,d,t,u,v){Object.defineProperty(e,"__esModule",{value:!0});var h=
function(){return function(c){this.allGraphics=c;this.type="graphic-move-start"}}();e.GraphicMoveStartEvent=h;var k=function(){return function(c,a,b){this.dx=c;this.dy=a;this.allGraphics=b;this.type="graphic-move"}}();e.GraphicMoveEvent=k;var l=function(){return function(c){this.allGraphics=c;this.type="graphic-move-stop"}}();e.GraphicMoveStopEvent=l;g=function(c){function a(b){b=c.call(this,b)||this;b.graphics=new n;b.type="move-3d";b._handles=new q;return b}m(a,c);a.prototype.initialize=function(){var b=
this;this._handles.add(this.graphics.on("change",function(){b._refreshGraphicManipulators()}));this._refreshGraphicManipulators()};a.prototype.destroy=function(){this._handles.destroy();this._handles=null;this.graphics.removeAll();this._set("view",null)};a.prototype.reset=function(){this.graphics.removeAll()};a.prototype._refreshGraphicManipulators=function(){var b=this;this._handles.remove("graphics");this.manipulators.removeAll();var a=this.graphics.toArray().map(function(a){a=new u.GraphicManipulator({graphic:a,
view:b.view,selectable:!0});b.manipulators.add(a);return a}),c=0;a.forEach(function(d){d.on("drag",function(c){a.forEach(function(a){var b=r.expect(a.graphic.geometry);if("mesh"===b.type)return!1;a!==d&&(a.graphic.geometry=t.move(b.clone(),c.dxMap,c.dyMap))});b.emit("graphic-move",new k(c.dx,c.dy,b.graphics.toArray()))});d.on("click",function(){return b.emit("click")});var e=d.watch("dragging",function(e){e?(c++,1===c&&(b.emit("graphic-move-start",new h(b.graphics.toArray())),a.forEach(function(a){a!==
d&&(a.interactive=!1)}))):(c--,0===c&&(b.emit("graphic-move-stop",new l(b.graphics.toArray())),a.forEach(function(a){a.interactive=!0})))},!0),f=d.watch("hovering",function(a){b.cursor=a?"move":null},!0);b._handles.add(e,"graphics");b._handles.add(f,"graphics")})};f([d.property({constructOnly:!0,nonNullable:!0})],a.prototype,"view",void 0);f([d.property({readOnly:!0})],a.prototype,"graphics",void 0);f([d.property({value:null})],a.prototype,"cursor",void 0);f([d.property({readOnly:!0})],a.prototype,
"type",void 0);return a=f([d.subclass("esri.views.3d.interactive.editingTools.graphicMove3D.GraphicMove3DTool")],a)}(d.declared(v.InteractiveToolBase,p));e.GraphicMove3DTool=g});