// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ./BoundingInfo ./ComponentUtils ./geometryDataUtils ./IdGen ./Util ./Util".split(" "),function(z,A,l,m,n,x,y,k){return function(){function a(c,d,b){this.singleUse=!1;this._componentAABBs=this._boundingInfo=null;this._id=a.__idGen.gen(d);this._data=c;this._boundingInfo=b}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});
a.prototype.getIndices=function(c){return this.data.getIndices(c)};Object.defineProperty(a.prototype,"indexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});a.prototype.getAttribute=function(c){return this.data.getAttribute(c)};Object.defineProperty(a.prototype,"componentCount",{get:function(){return m.componentCount(this.data.componentOffsets)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"componentOffsets",{get:function(){return this.data.componentOffsets},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"faceCount",{get:function(){return this.data.indexCount/3},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"boundingInfo",{get:function(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo},enumerable:!0,configurable:!0});a.prototype.invalidateBoundingInfo=
function(){this._componentAABBs=this._boundingInfo=null};a.prototype.getComponentAABB=function(c,a){null==this._componentAABBs&&(this._componentAABBs=this._computeComponentAABBs());for(var b=0;6>b;b++)a[b]=this._componentAABBs[6*c+b];return a};a.prototype._computeComponentAABBs=function(){for(var c=this.componentCount,a=new Float32Array(6*c),b=0;b<c;b++)this._calculateAABB(b,a,6*b);return a};a.prototype._calculateAABB=function(a,d,b){void 0===b&&(b=0);var c=this.data.getIndices(k.VertexAttrConstants.POSITION),
h=this.data.getAttribute(k.VertexAttrConstants.POSITION),f=this.data.componentOffsets,l=f.length?f[a+1]:c.length,p=Infinity,q=Infinity,r=Infinity,t=-Infinity,u=-Infinity,v=-Infinity,m=h.offsetIdx,n=h.strideIdx;for(a=f.length?f[a]:0;a<l;a++)var g=m+n*c[a],f=h.data[g],w=h.data[g+1],g=h.data[g+2],p=Math.min(p,f),q=Math.min(q,w),r=Math.min(r,g),t=Math.max(t,f),u=Math.max(u,w),v=Math.max(v,g);d[b]=p;d[b+1]=q;d[b+2]=r;d[b+3]=t;d[b+4]=u;d[b+5]=v};a.prototype._calculateBoundingInfo=function(){var a=this.data.getIndices(k.VertexAttrConstants.POSITION),
d=this.data.getAttribute(k.VertexAttrConstants.POSITION),b="triangle"===this.data.primitiveType?3:1;if(0===a.length)for(var a=new Uint32Array(b),e=0;e<b;++e)a[e]=e;e=a.length;y.assert(0===e%b,"Indexing error: "+e.toFixed(0)+" not divisible by "+b.toFixed(0));e=n.generateDefaultIndexArray(e/b);return new l(e,b,a,d)};a.__idGen=new x;return a}()});