// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/watchUtils ../../state/controllers/GamepadKeyboardController ../../../input/InputHandler".split(" "),function(f,g,k,l,m,h,n){Object.defineProperty(g,"__esModule",{value:!0});f=function(e){function d(c,a){var b=e.call(this,!0)||this;b.view=c;b.watchHandles=new l;b.handle=b.registerIncoming("gamepad",function(a){return b.handleEventGamepad(a)});b.handle.pause();return b}k(d,e);d.prototype.onInstall=
function(c){var a=this;e.prototype.onInstall.call(this,c);this.watchHandles.add([m.init(this.view.navigation.gamepad,"enabled",function(b){b?a.handle.resume():(a.handle.pause(),a.cameraControllerGamepad&&(a.cameraControllerGamepad.finishController(),a.cameraControllerGamepad=null))}),this.view.navigation.gamepad.watch("device",function(b){a.cameraControllerGamepad&&b&&a.cameraControllerGamepad.gamepadDevice!==b&&(a.cameraControllerGamepad.finishController(),a.cameraControllerGamepad=null)})])};d.prototype.onUninstall=
function(){this.watchHandles.removeAll();e.prototype.onUninstall.call(this)};d.prototype.handleEventGamepad=function(c){var a=this.view.navigation.gamepad.device;if(!a||c.data.device===a)if((a=this.cameraControllerGamepad&&this.cameraControllerGamepad.active)||h.GamepadKeyboardController.activatesFor(this.view,c.data))a||(a=new h.GamepadKeyboardController(this.view,c.data.device),this.view.state.switchCameraController(a)&&(this.cameraControllerGamepad=a)),this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&
this.cameraControllerGamepad.gamepadDevice===c.data.device&&this.cameraControllerGamepad.handleEventGamepad(c.data)};return d}(n.InputHandler);g.GamepadNavigation=f});