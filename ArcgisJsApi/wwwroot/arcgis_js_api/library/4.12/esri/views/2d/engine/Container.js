// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(f,g,h,k){Object.defineProperty(g,"__esModule",{value:!0});f=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a._childrenSet=new Set;a._childrenToAttach=[];a._childrenToDetach=[];a._renderPhase=3;a.children=[];return a}h(b,d);Object.defineProperty(b.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});b.prototype.detach=function(){for(var a=
0,e=this.children.concat(this._childrenToDetach);a<e.length;a++){var c=e[a];c.attached&&(this.detachChild(c),c.attached=!1,c.parent=null)}};b.prototype.doRender=function(a){var e=a.globalOpacity;a.globalOpacity*=this.opacity;this._renderPhase=0;this.attachChildren();this._renderPhase=1;for(var c=this._childrenToDetach;0<c.length;){var b=c.shift();this.detachChild(b);b.attached=!1;b.parent=null;b.stage=null}this._renderPhase=2;this.renderChildren(a);this._renderPhase=3;a.globalOpacity=e};b.prototype.addChild=
function(a){return this.addChildAt(a,this.children.length)};b.prototype.addChildAt=function(a,b){void 0===b&&(b=this.numChildren);if(!a||this.contains(a))return a;var c=a.parent;c&&c!==this&&c.removeChild(a);b>=this.numChildren?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);b=this._childrenToDetach.indexOf(a);-1<b&&this._childrenToDetach.splice(b,1);this._childrenToAttach.push(a);2<=this._renderPhase&&this.requestRender();return a};b.prototype.contains=function(a){return this._childrenSet.has(a)};
b.prototype.getChildIndex=function(a){return this.children.indexOf(a)};b.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};b.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};b.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};b.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);
if(a.attached)this._childrenToDetach.push(a),2<=this._renderPhase&&this.requestRender();else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};b.prototype.requestChildRender=function(a){a&&a.parent===this&&2<=this._renderPhase&&this.requestRender()};b.prototype.setChildIndex=function(a,b){var c=this.getChildIndex(a);-1<c&&(this.children.splice(c,1),this.children.splice(b,0,a),2<=this._renderPhase&&this.requestRender())};b.prototype.sortChildren=function(a){2<
this._renderPhase&&this.requestRender();return this.children.sort(a)};b.prototype.attachChildren=function(){var a=this._childrenToAttach;if(0!==a.length)for(var b=0,c=!1;!c;)c=a[b],c.parent=this,c.stage=this.stage,this.attachChild(c)?(c.attached=!0,a.splice(b,1)):++b,c=a.length===b};b.prototype.renderChildren=function(a){for(var b=this.children,c=b.length,d=0;d<c;d++)b[d].processRender(a)};b.prototype.attachChild=function(a){return a.attach()};b.prototype.detachChild=function(a){a.detach()};return b}(k.DisplayObject);
g.Container=f});