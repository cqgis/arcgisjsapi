// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../fontUtils ../../materialKey/MaterialKey ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(d,k,l,g,m,f,t,q,n,p,h){Object.defineProperty(k,"__esModule",{value:!0});d=function(d){function e(b,a,e,f,k,h,r,l,n,p,u,v){var c=d.call(this)||this;c._xOffset=g.pt2px(p);c._yOffset=g.pt2px(u);c._decorationTop=t.getFontDecorationTop(l);c._color=
f;c._haloColor=k;c._haloSize=Math.min(Math.floor(5*g.pt2px(g.toPt(e))),127);c._size=Math.min(Math.round(g.pt2px(a)),127);c._scale=c._size/24;c._angle=n;c._justify=m.getJustification(h||"center");c._xAlignD=m.getXAnchorDirection(h||"center");c._yAlignD=-m.getYAnchorDirection(r||"baseline");c._baseline="baseline"===(r||"baseline");c._bitset=0;b=q.MaterialKeyBase.load(q.createMaterialKey(c.geometryType,b,!1));b.sdf=!0;c._materialKey=b.data;c.symbolId=v;return c}l(e,d);e.fromText=function(b,a,d){b=new e(b,
a.font.size,a.haloSize||0,a.color&&f.premultiplyAlphaRGBA(a.color)||0,a.haloColor&&f.premultiplyAlphaRGBA(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,a.font.decoration,a.angle||0,a.xoffset,a.yoffset,a.id);a=h.bidiText(a.text);b.bindTextInfo(d,a[0],a[1]);b._computeGlyphs(b._shapedGlyphs,b._shapedBox);return b};e.fromCIMText=function(b,a,d){b=new e(b,a.size*a.sizeRatio,a.outlineSize*a.sizeRatio,f.premultiplyAlphaRGBA(a.color),f.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,
a.verticalAlignment,a.decoration,a.angle,a.offsetX*a.sizeRatio,a.offsetY*a.sizeRatio,a.materialHash);a=h.bidiText(a.text);b.bindTextInfo(d,a[0],a[1]);b._computeGlyphs(b._shapedGlyphs,b._shapedBox);return b};return e}(n.default(p.default));k.default=d});