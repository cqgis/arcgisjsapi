// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Handles ../../../core/Logger ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../engine ./LayerView2D ./support/ExportStrategy ../../layers/RefreshableLayerView".split(" "),function(u,v,e,f,g,h,k,l,m,c,n,p,q,r){var t=l.getLogger("esri.views.2d.layers.BaseDynamicLayerView2D");return function(b){function a(){var a=
null!==b&&b.apply(this,arguments)||this;a._handles=new k;a.container=new n.BitmapContainer;return a}e(a,b);a.prototype.hitTest=function(a,b){return null};a.prototype.update=function(a){this._strategy.update(a);this.notifyChange("updating")};a.prototype.attach=function(){this._strategy=new q({container:this.container,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})};a.prototype.detach=function(){this._strategy.destroy();this._handles.removeAll();this._strategy=
null;this.container.removeAllChildren()};a.prototype.moveStart=function(){};a.prototype.viewChange=function(){};a.prototype.moveEnd=function(){this.requestUpdate()};a.prototype.fetchBitmapData=function(a,b,c){var d=this;return this.layer.fetchImage(a,b,c,{timestamp:this.refreshTimestamp}).then(function(a){d.notifyChange("updating");return a}).catch(function(a){m.isAbortError(a)||t.error("Error while loading image",{error:a});d.notifyChange("updating");throw a;})};a.prototype.doRefresh=function(a){return h(this,
void 0,void 0,function(){return g(this,function(a){this.requestUpdate();return[2]})})};a.prototype.isUpdating=function(){return this.attached&&(this._strategy.updating||this.updateRequested)};return a=f([c.subclass("esri.views.2d.layers.BaseDynamicLayerView2D")],a)}(c.declared(p,r))});