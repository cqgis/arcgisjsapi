// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(d,a){return function(a,d){a.__bases__=d.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(d,a,l,g){var k=arguments.length,e=3>k?a:null===g?g=Object.getOwnPropertyDescriptor(a,l):g,c;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(d,a,l,g);else for(var h=d.length-1;0<=h;h--)if(c=d[h])e=(3>k?c(e):3<k?c(a,l,
e):c(a,l))||e;return 3<k&&e&&Object.defineProperty(a,l,e),e}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch ./accessorSupport/testSupport".split(" "),function(d,a,l,g,k,e,c){a=a.default;d.before(function(a,b){d.hasMixin(a,h)&&g.processPrototype(b)});d.after(function(a){d.hasMixin(a,h)&&(g.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&
this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=d(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",
{value:new a(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var e=[],b=0;b<arguments.length;b++)e.push(arguments[b]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}if(c.interceptor)c.interceptor.onInstanceConstruct(this)},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(m){console.warn(m.stack)}else if(e.removeTarget(this),this.__accessor__.destroy(),c.interceptor)c.interceptor.onInstanceDestroy(this)},get:function(a){return l.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){k.set(this,a,b);return this},watch:function(a,b,f){return e.watch(this,a,b,f)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},
_override:function(a,b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return h})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(d,a,l){function g(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);
a=a||[];c=c||{};return k([this].concat(a),c)}function k(a,m){a&&!Array.isArray(a)&&"function"!==typeof a&&(m=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);m=m||{};var b,f;b=0;for(f=e.length;b<f;b++)e[b](a,m);a=l(a,m);a.createSubclass=g;b=0;for(f=c.length;b<f;b++)c[b](a);return a}var e=[],c=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(b,a){return a._meta?b.concat(a._meta.bases):b},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var f=a.length-
1;0<=f;f--)if(a[f].prototype.declaredClass===b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,b){return l.safeMixin(a,b)};a.before=function(a){e.push(a)};a.after=function(a){c.push(a)}})(k||(k={}));return k})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../lang ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});k.getLogger("esri.core.accessorSupport.Properties");
d=function(){function a(b){this.host=b;this._origin=h.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new m.default;b=this.host.constructor.__accessorMetadata__;this.metadatas=b.properties;this.autoDestroy=b.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;c.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var b=
this.cursors;if(b)for(var a=0,f=Object.getOwnPropertyNames(b);a<f.length;a++){var c=f[a],e=b[c];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,c);b[c]=null}}if(this.autoDestroy)for(c in this.metadatas)(b=this.internalGet(c))&&b&&"function"===typeof b.destroy&&(b.destroy(),this.metadatas[c].nonNullable||this.internalSet(c,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(b){this.isOverridden(b)&&
(this.overridden[b]=!1,this.propertyInvalidated(b))};a.prototype.get=function(b){var a=this.metadatas[b];if(this.store.has(b)&&!this.dirties[b])return this.store.get(b);var f=a.get;return f?(a=f.call(this.host),this.store.set(b,a,h.OriginId.COMPUTED),this.propertyCommitted(b),a):a.value};a.prototype.getterStatic=function(b,a){return this.store.has(b)?this.store.get(b):a.value};a.prototype.getterComputed=function(b,a){if(this.store.has(b)&&!this.dirties[b])return this.store.get(b);a=a.get.call(this.host);
this.store.set(b,a,h.OriginId.COMPUTED);this.propertyCommitted(b);return a};a.prototype.originOf=function(b){var a=this.store.originOf(b);return void 0===a&&(b=this.metadatas[b])&&b.hasOwnProperty("value")?"defaults":h.idToName(a)};a.prototype.has=function(b){return this.metadatas[b]?this.store.has(b):!1};a.prototype.internalGet=function(b){if(this.metadatas[b]){var a=this.store;return a.has(b)?a.get(b):this.metadatas[b].value}};a.prototype.internalSet=function(b,a){if(this.metadatas[b]){var f=this.initialized?
this._origin:h.OriginId.DEFAULTS,c=this.store.get(b);g.equals(a,c)&&f===this.store.originOf(b)&&this.store.has(b,f)&&!this.isOverridden(b)||(this.propertyInvalidated(b),this.store.set(b,a,f),this.propertyCommitted(b))}};a.prototype.isOverridden=function(b){return null!=this.overridden&&!0===this.overridden[b]};a.prototype.keys=function(){return Object.keys(this.metadatas)};a.prototype.override=function(a,f){if(this.metadatas[a]){this.overridden||(this.overridden={});var c=this.metadatas[a];if(!c.nonNullable||
null!=f){if(c=c.cast){f=this.cast(c,f);var c=f.valid,e=f.value;b.release(f);if(!c)return;f=e}this.overridden[a]=!0;this.internalSet(a,f)}}};a.prototype.set=function(a,f){if(this.metadatas[a]){var c=this.metadatas[a];if(!c.nonNullable||null!=f){var e=c.set;if(c=c.cast){f=this.cast(c,f);var c=f.valid,p=f.value;b.release(f);if(!c)return;f=p}e?e.call(this.host,f):this.internalSet(a,f)}}};a.prototype.setDefaultOrigin=function(b){this._origin=h.nameToId(b)};a.prototype.propertyInvalidated=function(b){var a=
this.dirties,f=this.isOverridden(b),c=this.cursors&&this.cursors[b],e=this.metadatas[b].computes;if(c)for(var p=0;p<c.length;p++)c[p].propertyInvalidated(this,b);f||(a[b]=!0);if(e)for(b=0;b<e.length;b++)this.propertyInvalidated(e[b])};a.prototype.propertyCommitted=function(b){var a=this.cursors&&this.cursors[b];this.dirties[b]=!1;if(a)for(var f=0;f<a.length;f++)a[f].propertyCommitted(this,b)};a.prototype.addCursor=function(b,a){this.cursors||(this.cursors={});var f=this.cursors[b];f||(this.cursors[b]=
f=[]);f.push(a)};a.prototype.removeCursor=function(b,a){var f=this.cursors[b];this.cursors[b]&&(f.splice(f.indexOf(a),1),0===f.length&&(this.cursors[b]=null))};a.prototype.cast=function(a,f){var c=b.acquire();c.valid=!0;c.value=f;a&&(c.value=a.call(this.host,f,c));return c};return a}();l=function(){function b(){this.value=null;this.valid=!0}b.prototype.acquire=function(){this.valid=!0};b.prototype.release=function(){this.value=null};return b}();var b=new e(l);a.default=d})},"esri/core/accessorSupport/extensions":function(){define(["require",
"exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e=[l.default,g.default,k.default];a.processPrototypeMetadatas=function(a,h){for(var c=0;c<e.length;c++){var b=e[c];if(b.processPrototypePropertyMetadata)for(var f in a)b.processPrototypePropertyMetadata(f,a[f],a,h)}};a.processClassMetadatas=function(a,h){for(var c=0;c<e.length;c++){var b=e[c];if(b.processClassPropertyMetadata)for(var f in a)b.processClassPropertyMetadata(f,
a[f],a,h)}};a.instanceCreated=function(a,h){for(var c=Object.getOwnPropertyNames(h),b=0;b<e.length;b++){var f=e[b];f.instanceCreated&&f.instanceCreated(a,h,c)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(d,a,l,g,k,e,c){function h(a,b,f){var p=e.getProperties(a);return c.wire(a,f.aliasOf,function(){p.propertyInvalidated(b)})}Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension=
{processClassPropertyMetadata:function(a,b,f,c){var e=b.aliasOf;if(e&&(a=e.split(".")[0],null!=f[a]&&!b.set&&!b.get)){var p;b.get=function(){var b=g.default(this,e);if("function"===typeof b){p||(p=e.split(".").slice(0,-1).join("."));var a=g.default(this,p);a&&(b=b.bind(a))}return b};b.readOnly||(b.set=function(b){return k.default(this,e,b)})}},instanceCreated:function(a,b,f){for(var c=0;c<f.length;c++){var e=f[c],n=b[e];n.aliasOf&&h(a,e,n)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require",
"exports","./utils"],function(d,a,l){function g(a,c,b){a="?"===a[a.length-1]?a.slice(0,-1):a;if(null!=b.getItemAt||Array.isArray(b)){var f=parseInt(a,10);if(!isNaN(f))return Array.isArray(b)?b[f]:b.getItemAt(f)}f=l.getProperties(b);return c?l.isPropertyDeclared(f,a)?f.get(a):b[a]:l.isPropertyDeclared(f,a)?f.internalGet(a):b[a]}function k(a,c,b,f){if(null==a)return a;if((a=g(c[f],b,a))||!(f<c.length-1))return f===c.length-1?a:k(a,c,b,f+1)}function e(a,c,b,f){void 0===b&&(b=!1);void 0===f&&(f=0);return"string"===
typeof c&&-1===c.indexOf(".")?g(c,b,a):k(a,l.pathToArray(c),b,f)}function c(a,c){return e(a,c,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=e;a.get=c;a.exists=function(a,c){return void 0!==e(c,a,!0)};a.default=c})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(d,a,l){function g(a,c,b){return c?Object.keys(c).reduce(function(a,e){var f=null,p="merge";b&&(f=b.path?b.path+"."+e:e,p=b.policy(f));if("replace"===p)return a[e]=c[e],a;if(void 0===
a[e])return a[e]=l.clone(c[e]),a;var h=a[e],p=c[e];if(h===p)return a;if(Array.isArray(p)||Array.isArray(a))h=h?Array.isArray(h)?a[e]=h.concat():a[e]=[h]:a[e]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(function(b){-1===h.indexOf(b)&&h.push(b)}));else if(p&&"object"===typeof p)if(b){var m=b.path;b.path=f;a[e]=g(h,p,b);b.path=m}else a[e]=g(h,p,null);else if(!a.hasOwnProperty(e)||c.hasOwnProperty(e))a[e]=p;return a},a||{}):a}function k(a){return Array.isArray(a)?a:a.split(".")}function e(a){if(Array.isArray(a)||
-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var c=0;c<a.length;c++)a[c]=a[c].trim();return 1===a.length?a[0]:a}return a.trim()}function c(a){var c=!1;return function(){c||(c=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,c){return a&&a.metadatas&&null!=a.metadatas[c]};a.merge=function(a,c,b){return b?g(a,c,{policy:b,path:""}):g(a,c,null)};a.pathToStringOrArray=
function(a){return!a||"string"===typeof a&&-1===a.indexOf(".")?a:k(a)};a.pathToArray=k;a.splitPath=e;a.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=k(a);for(var c=Array(a.length),b=0;b<a.length;b++){var f=a[b];c[b]="?"===f[f.length-1];c[b]&&(a[b]=f.slice(0,-1))}return{fullPath:a.join("."),conditional:c}};a.parse=function(a,m,b,f){m=e(m);if(Array.isArray(m)){var p=m.map(function(c){return f(a,c.trim(),b)});return{remove:c(function(){return p.forEach(function(a){return a.remove()})})}}return f(a,
m.trim(),b)};a.once=c})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(d,a,l,g,k){function e(a,h,m){if(a&&h)if("object"===typeof h){m=0;for(var b=Object.getOwnPropertyNames(h);m<b.length;m++){var f=b[m];e(a,f,h[f])}}else"_"!==h[0]&&(-1!==h.indexOf(".")?(h=h.split("."),f=h.splice(h.length-1,1)[0],e(k.default(a,h),f,m)):a[h]=m)}Object.defineProperty(a,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.set");a.set=e;a.default=
e})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(d,a,l){function g(a,f,c){f=l.splitPath(f);if(Array.isArray(f)){for(var b=[],e=0;e<f.length;e++)b.push((new k(f[e],c)).install(a));return new h(b)}a=(new k(f,c)).install(a);return new m(a)}Object.defineProperty(a,"__esModule",{value:!0});var k=function(){function a(a,b){this.path=a;this.callback=b;this.conditional=this.chain=null;if(-1<a.indexOf(".")){if(a=l.parseConditionalPath(a))this.path=a.fullPath,
this.conditional=a.conditional;this.chain=l.pathToArray(this.path)}else"?"===a[a.length-1]&&(this.path=a.slice(0,a.length-1),this.conditional=[!0],this.chain=[this.path]);this.callback=b;return this}a.prototype.install=function(a){a=this.chain?new c(this,a):new e(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),e=function(){function a(a,b){this.binding=a;this.target=b;l.getProperties(b).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&
(l.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,b){l.getProperties(this.target).removeCursor(b,this)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return a}(),c=function(){function a(a,b){this.binding=a;this.target=b;this.stack=[];this.properties=l.getProperties(b);this.stack.push({properties:this.properties,
propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),
this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=function(a,b){for(var f=this.stack,c=f[f.length-1];c.properties!==a&&c.propertyName!==b;)c.properties.removeCursor(c.propertyName,this),f.pop(),c=f[f.length-1]};a.prototype.moveForward=function(){var a=this.stack,b=a[a.length-1];if(1!==a.length||!this.binding.conditional||!this.binding.conditional[a.length-1]||b.properties.metadatas[b.propertyName])if(b=b.properties.internalGet(b.propertyName),(b=l.getProperties(b))&&a.length<
this.binding.chain.length){var c=this.binding.chain[a.length];this.binding.conditional&&this.binding.conditional[a.length]&&!b.metadatas[c]||(this.stack.push({properties:b,propertyName:c}),b.addCursor(c,this),this.moveForward())}};return a}(),h=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),m=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=
null};return a}();a.create=function(a,f){a=l.splitPath(a);if(Array.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(new k(a[c],f));return function(a){for(var f=[],c=0;c<b.length;c++)f[c]=b[c].install(a);return new h(f)}}var e=new k(a,f);return function(a){return new m(e.install(a))}};a.wire=g;a.default=g})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",
{value:!0});g.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,h,m,b){h.dependsOn&&(m=void 0,m=h.dependsOn.slice())&&(h.wire=e.create(m,function(b){return k.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,e,m){for(var b=0;b<m.length;b++){var f=e[m[b]];f.wire&&f.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(d,a,l,g,k,e,c){function h(a,b,f){var c=a&&a.json;a&&a.json&&a.json.origins&&f&&(a=a.json.origins[f.origin])&&("any"===b||b in a)&&(c=a);return c}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,b){return h(a,"read",b)};a.originSpecificWritePropertyDefinition=function(a,b){return h(a,"write",b)};a.originSpecificPropertyDefinition=h;a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,b,f,p){if(e.process(b)){g.process(b);
f=b.type;for(p=0;Array.isArray(f)&&!l.isOneOf(f);)f=f[0],p++;if(b.json.origins)for(var h in b.json.origins){var n=b.json.origins[h];k.create(f,p,a,n);c.create(f,p,a,n)}k.create(f,p,a,b.json);c.create(f,p,a,b.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var d=a.json.origins,
k={"web-document":["web-scene","web-map"]};a=function(a){if(d[a]){var c=d[a];k[a].forEach(function(a){d[a]=c});delete d[a]}};for(var e in k)a(e)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(d,a,l,g){function k(a,f,c,d){if(1<f)return h(a,f);if(1===f)return m(a);if(b(a)){var p=m(a.prototype.itemType.Type);return function(b,f,c){return(b=p(b,f,c))?new a(b):b}}return e(a)}function e(a){return a.prototype.read?
function(b,f,c){if(null==b)return b;f=new a;f.read(b,c);return f}:a.fromJSON}function c(a,b,f,e){return 0!==e&&Array.isArray(b)?b.map(function(b){return c(a,b,f,e-1)}):a(b,null,f)}function h(a,b){a=e(a);var f=c.bind(null,a);return function(a,c,e){if(null==a)return a;a=f(a,e,b);c=b;for(e=a;0<c&&Array.isArray(e);)c--,e=e[0];if(void 0!==e)for(e=0;e<c;e++)a=[a];return a}}function m(a){var b=e(a);return function(a,f,c){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,c)}):[b(a,null,
c)]}}function b(a){return g.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?f(a.Type):!1:!1}function f(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||b(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,b,c,e){(!e.read||!e.read.reader&&!1!==e.read.enabled)&&f(a)&&l.setDeepValue("read.reader",k(a,b,c,e),e)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],
function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&a.prototype&&a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(d,a){function l(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&
(a.read.enabled=!0)}function g(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});l(a.json);g(a.json);if(a.json.origins)for(var e in a.json.origins)l(a.json.origins[e]),g(a.json.origins[e]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
"exports","../../../object","./type"],function(d,a,l,g){function k(a,f,c,h){l.setDeepValue(c,e(a,h),f)}function e(a,f){return a&&"function"===typeof a.write?a.write({},f):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function c(a,f,c,h){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return e(a,h)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[e(a,h)];l.setDeepValue(c,a,f)}function h(a,
f,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return h(a,f,c-1)}):e(a,f)}function m(a){return function(b,c,e,n){if(null===b)b=null;else{b=h(b,n,a);n=a;for(var f=b;0<n&&Array.isArray(f);)n--,f=f[0];if(void 0!==f)for(f=0;f<n;f++)b=[b]}l.setDeepValue(e,b,c)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,f,e,h){!h.write||h.write.writer||!1===h.write.enabled&&!h.write.overridePolicy||(1===f||g.isCollection(a)?h.write.writer=c:h.write.writer=1<f?m(f):k)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
"exports"],function(d,a){function l(a){switch(a){case "defaults":return k.DEFAULTS;case "service":return k.SERVICE;case "portal-item":return k.PORTAL_ITEM;case "web-scene":return k.WEB_SCENE;case "web-map":return k.WEB_MAP;case "user":return k.USER}}function g(a){switch(a){case k.DEFAULTS:return"defaults";case k.SERVICE:return"service";case k.PORTAL_ITEM:return"portal-item";case k.WEB_SCENE:return"web-scene";case k.WEB_MAP:return"web-map";case k.USER:return"user"}}Object.defineProperty(a,"__esModule",
{value:!0});var k;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(k=a.OriginId||(a.OriginId={}));a.nameToId=l;a.idToName=g;a.readableNameToId=function(a){return l(a)};a.idToReadableName=function(a){return g(a)};a.writableNameToId=function(a){return l(a)};a.idToWritableName=function(a){return g(a)}})},"esri/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return l.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,e){this._values[a]=e};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=d})},"esri/core/accessorSupport/introspection":function(){define("require exports ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(d,a,l,g,k,e,c){function h(a,f){return function(b){b=+a(b);null!=f.min&&(b=Math.max(f.min,b));null!=f.max&&(b=Math.min(f.max,b));return b}}function m(a,f){return null==f.get?function(){return this.__accessor__?this.__accessor__.getterStatic(a,f):f.value}:function(){return this.__accessor__?this.__accessor__.getterComputed(a,f):f.value}}Object.defineProperty(a,"__esModule",{value:!0});a.processPrototype=function(a){var b=a.declaredClass,c=a.properties||{},m;for(m in c){var n=c[m],d=typeof n;
null==n?k.setPropertyMetadata(a,m,{value:n}):Array.isArray(n)?k.setPropertyMetadata(a,m,{type:[n[0]],value:null}):"object"===d?e.getProperties(n)||n instanceof Date?k.setPropertyMetadata(a,m,{type:n.constructor,value:n}):k.setPropertyMetadata(a,m,n):"boolean"===d?k.setPropertyMetadata(a,m,{type:Boolean,value:n}):"string"===d?k.setPropertyMetadata(a,m,{type:String,value:n}):"number"===d?k.setPropertyMetadata(a,m,{type:Number,value:n}):"function"===d&&k.setPropertyMetadata(a,m,{type:n,value:null})}a=
k.getPropertiesMetadata(a);for(m in a){c=a[m];d=c.type;n=c.types;if(!c.cast)if(d){for(var n=c,w=0,t=d;Array.isArray(t)&&1===t.length&&"string"!==typeof t[0]&&"number"!==typeof t[0];)t=t[0],w++;d=l.isOneOf(t)?0===w?l.ensureOneOf(t):l.ensureNArrayTyped(l.ensureOneOf(t),w):1===w?l.ensureArray(t):1<w?l.ensureNArray(t,w):l.ensureType(d);n.cast=d}else n&&(Array.isArray(n)?c.cast=l.ensureArrayTyped(l.ensureOneOfType(n[0])):c.cast=l.ensureOneOfType(n));c.range&&(c.cast=h(c.cast,c.range))}g.processPrototypeMetadatas(a,
b);return a};a.processClass=function(a){for(var b=a.prototype,e=b.declaredClass,h=a._meta.bases,n={},d=h.length-1;0<=d;d--)k.merge(n,k.getMetadata(h[d].prototype));var w=n.properties;g.processClassMetadatas(w,e);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:w,autoDestroy:!!n.autoDestroy}});for(var t={},e=function(a){var b=w[a];t[a]={enumerable:!0,configurable:!0,get:m(a,b),set:function(f){var c=this.__accessor__;if(!c)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,
writable:!0,value:f});else if(!Object.isFrozen(this)){if(c.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===c.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);c.set(a,f)}}}},h=0,d=Object.getOwnPropertyNames(w);h<d.length;h++)e(d[h]);Object.defineProperties(a.prototype,t);if(n.parameters)for(a=0,e=Object.getOwnPropertyNames(n.parameters);a<
e.length;a++)h=e[a],d=Object.getOwnPropertyDescriptor(b,h)||{value:b[h]},(d=c.autocastMethod(b,h,d))&&Object.defineProperty(b,h,d);return n}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports","./utils"],function(d,a,l){function g(a){return null!=a.__accessorMetadata__}function k(a){return g(a)&&null!=e(a).properties}function e(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}
function c(a){a=e(a);var b=a.properties;b||(b=a.properties={});return b}function h(a,b){var f=e(a);a=f.parameters;a||(a=f.parameters={});f=a[b];f||(f=[],a[b]=f);return f}function m(a){return f.test(a)?"replace":"merge"}function b(a){return p.test(a)?m(a.slice(11)):"merge"}Object.defineProperty(a,"__esModule",{value:!0});a.hasMetadata=g;a.hasPropertiesMetadata=k;a.hasPropertyMetadata=function(a,b){return k(a)&&null!=c(a)[b]};a.hasParametersMetadata=function(a,b){return g(a)&&null!=e(a).parameters&&
null!=e(a).parameters[b]};a.getMetadata=e;a.getPropertiesMetadata=c;a.getPropertyMetadata=function(a,b){a=c(a);var f=a[b];f||(f=a[b]={});return f};a.setPropertyMetadata=function(a,b,f){c(a)[b]=f};a.getParametersMetadata=h;a.getParameterMetadata=function(a,b,f){var c=h(a,b)[f];c||(h(a,b)[f]=c={index:f});return c};a.merge=function(a,f){return l.merge(a,f,b)};a.mergeProperty=function(a,b){return l.merge(a,b,m)};var f=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,p=/^properties\./})},
"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(d,a,l,g){function k(a){var b="_meta"in a?l.ensureType(a):a;return function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];a.push(b);return"number"===typeof a[2]?c.apply(this,a):e.apply(this,a)}}function e(a,f,c,e){g.getPropertyMetadata(a,f).cast=e}function c(a,f,c,e){g.getParameterMetadata(a,f,c).cast=e}function h(a){return function(b,c,e){g.getPropertyMetadata(b,
a).cast=b[c]}}Object.defineProperty(a,"__esModule",{value:!0});var m=Object.prototype.toString;a.autocastMethod=function(a,f,c){if(g.hasParametersMetadata(a,f)){var b=g.getParametersMetadata(a,f).filter(function(a){return null!=a.cast});if(b.length){var e=c.value;c.value=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];for(f=0;f<b.length;f++){var c=b[f];a[c.index]=c.cast(a[c.index])}return e.apply(this,a)};return c}console.warn("Method "+a.declaredClass+"::"+f+" is decorated with @cast but no parameters are decorated")}};
a.cast=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===m.call(a[0]))return k(a[0]);if(1===a.length&&"string"===typeof a[0])return h(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ReentrantObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(d,a,l,g,k,e,c,h,m){function b(a){y.has(a)?x.splice(x.indexOf(a),1):y.add(a);x.push(a);A||
(A=e.schedule(p))}function f(a){if(!a.removed){var b=a.callback,f=a.path,e=a.oldValue,h=a.target,p=c.valueOf(h,a.propertyPath,!0);g.equals(e,p)||(a.oldValue=p,b.call(h,p,e,f,h))}}function p(){for(var a=10;A&&a--;){A=null;var b=x;x=t.acquire();y.clear();for(var c=t.acquire(),e=0,h=b;e<h.length;e++){var p=h[e];f(p);p.removed&&c.push(p)}for(e=0;e<x.length;e++)p=x[e],p.removed&&(c.push(p),y.delete(p),x.splice(e,1),--e);for(e=0;e<c.length;e++)w.pool.release(c[e]);t.release(b);t.release(c);z.forEach(function(a){return a()})}}
function u(a,f,e){var p=h.parse(a,f,e,function(a,f,e){var n=c.valueOf(a,f,!0),d,g,r=m.wire(a,f,function(a,f){a.__accessor__.destroyed||d&&d.uid!==g?p.remove():(d||(d=w.pool.acquire(a,f,n,e),g=d.uid,n=null),b(d))});return{remove:h.once(function(){r.remove();d&&(d.uid!==g||d.removed||(d.removed=!0,b(d)),d=null);p=r=n=null})}});return p}function n(a,b,f){var e=h.parse(a,b,f,function(a,b,f){var h=c.valueOf(a,b,!0),p=!1;return m.wire(a,b,function(a,b){if(a.__accessor__.destroyed)e.remove();else if(!p){p=
!0;var n=c.valueOf(a,b,!0);g.equals(h,n)||f.call(a,n,h,b,a);h=c.valueOf(a,b,!0);p=!1}})});return e}function r(a,b,f,c){void 0===c&&(c=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:c?n(a,b,f):u(a,b,f)}Object.defineProperty(a,"__esModule",{value:!0});var w=function(){function a(b,f,c,e){this.target=b;this.path=f;this.oldValue=c;this.callback=e;this.uid=0;this.removed=!1;this.propertyPath=h.pathToStringOrArray(f);this.uid=++a.uid}a.prototype.release=function(){this.target=
this.path=this.propertyPath=this.callback=this.oldValue=null;this.uid=++a.uid;this.removed=!0};a.pool=new k.ReentrantObjectPool(a,!0);a.uid=0;return a}(),t=new l,y=new Set,x=t.acquire(),A;a.dispatchTarget=function(a){for(var b=t.copy(x),c=0;c<b.length;c++){var e=b[c];e.target===a&&(f(e),y.delete(e),x.splice(x.indexOf(e),1))}};a.removeTarget=function(a){for(var b=0;b<x.length;b++){var f=x[b];f.target===a&&(f.removed=!0)}};a.dispatch=p;var z=new Set;a.afterDispatch=function(a){z.add(a);return{remove:function(){z.delete(a)}}};
a.watch=r;a.isValueInUse=function(a){return x.some(function(b){return b.oldValue===a})};a.default=r})},"esri/core/ReentrantObjectPool":function(){define(["require","exports","./tsSupport/extendsHelper","./ObjectPool"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c._set=new Set;return c}l(e,a);e.prototype.destroy=function(){a.prototype.destroy.call(this);this._set=null};e.prototype.acquire=function(){for(var c=
[],e=0;e<arguments.length;e++)c[e]=arguments[e];c=a.prototype.acquire.apply(this,c);this._set.delete(c);return c};e.prototype.release=function(c){c&&!this._set.has(c)&&(a.prototype.release.call(this,c),this._set.add(c))};e.prototype._dispose=function(c){this._set.delete(c);a.prototype._dispose.call(this,c)};return e}(g);a.ReentrantObjectPool=d})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(d,a,l,g,k){function e(b){void 0===
b&&(b=a.now());a.debug.rafId=null;0<x.length&&(a.debug.rafId=c());0<u&&(r=Math.min(b-u,r));a.debug.executeFrameTasks(b)}function c(){return a.debug.requestNextFrame?a.debug.requestNextFrame(b):b()}function h(){for(var a=0;a<x.length;){var b=x[a];a++;if(b.removed){x.splice(a-1,1);for(var f=0;f<t.length;f++){var c=t[f];if(b.phases[c]){var c=A[c],e=c.indexOf(b);-1!==e&&c.splice(e,1)}}}}}function m(){for(;y.length;){var b=y.shift();b.isActive&&(b.isActive=!1,b.callback())}a.debug.willDispatch=!1}function b(){return k(e)}
Object.defineProperty(a,"__esModule",{value:!0});a.now=g;var f=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),p=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),u=-1,n=0,r=Number.POSITIVE_INFINITY,w={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},t=["prepare","preRender","render","postRender","update"],y=[],x=[],A={prepare:[],
preRender:[],render:[],postRender:[],update:[]},z=function(){function b(a){this._task=a}b.prototype.remove=function(){this._task.removed=!0};b.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=a.now())};b.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return b}();a.FrameTaskHandle=z;a.debug={frameTasks:x,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===
a&&(a=!1);for(var b=0;b<x.length;b++)x[b].removed=!0;a&&h()},dispatch:m,executeFrameTasks:function(b){void 0===b&&(b=a.now());0>u&&(u=b);var f=b-u,c=0<n?n:r,e=Math.max(0,f-c);u=b;for(var p=0;p<x.length;p++){var m=x[p];-1!==m.epoch&&(m.dt=f)}for(p=0;p<t.length;p++)for(var f=t[p],d=A[f],g=0;g<d.length;g++)m=d[(g+C)%d.length],m.paused||m.removed||(0===p&&m.ticks++,-1===m.epoch&&(m.epoch=b),w.time=b,w.deltaTime=m.dt,w.elapsedFrameTime=a.now()-b,w.frameDuration=c-e,w.spendInTask=b-m.epoch,m.phases[f].call(m,
w));h();++C}};a.schedule=function(b){b=new p(b);y.push(b);a.debug.willDispatch||(a.debug.willDispatch=!0,l(m));return b};a.addFrameTask=function(b){var e=new f(b);x.push(e);for(var h=0,p=t;h<p.length;h++){var n=p[h];b[n]&&A[n].push(e)}a.debug.rafId||(u=-1,a.debug.rafId=c());return new z(e)};a.setFrameDuration=function(a){n=Math.max(0,a)};var C=0;a.requestNextFrame=c})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(d,a,l,g){var k=g();d=l.requestAnimationFrame;
if(!d){a=["ms","moz","webkit","o"];for(var e=0;e<a.length&&!d;++e)d=l[a[e]+"RequestAnimationFrame"];d||(d=function(a){var c=g(),e=Math.max(0,16-(c-k)),b=l.setTimeout(function(){a(g())},e);k=c+e;return b})}return d})},"esri/core/accessorSupport/testSupport":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.interceptor=null})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(b){for(var f in b)a.hasOwnProperty(f)||(a[f]=b[f])}Object.defineProperty(a,"__esModule",{value:!0});u(l);u(g);u(k);u(e);u(c);u(h);u(m);u(b);u(f);u(p)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(d,e){l.getPropertyMetadata(d,e).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,d,e){l.getMetadata(a).autoDestroy=!0;return a[d]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var d=[],k=1;k<arguments.length;k++)d[k-1]=arguments[k];k=function(){return this||{}};k.__bases__=[a].concat(d);return k}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
"exports","../../jsonMap","./property"],function(d,a,l,g){function k(a){return g.property({type:a})}Object.defineProperty(a,"__esModule",{value:!0});a.enumeration=k;(function(a){a.serializable=function(){return function(a,e){void 0===e&&(e={ignoreUnknown:!0});a=a instanceof l.JSONMap?a:new l.JSONMap(a,e);return g.property({type:e&&e.ignoreUnknown?a.apiValues:String,json:{type:a.jsonValues,read:{reader:a.read},write:{writer:a.write}}})}}})(k=a.enumeration||(a.enumeration={}))})},"esri/core/jsonMap":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function a(a,e){void 0===e&&(e={ignoreUnknown:!1});this.jsonToAPI=a;this.options=e;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(a);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(a){return this.fromJSON(a)}.bind(this);this.write=function(a,e,m){a=this.toJSON(a);void 0!==a&&(e[m]=a)}.bind(this)}a.prototype.toJSON=function(a){return this.apiToJSON.hasOwnProperty(a)?
this.apiToJSON[a]:this.options.ignoreUnknown?void 0:a};a.prototype.fromJSON=function(a){return this.jsonToAPI.hasOwnProperty(a)?this.jsonToAPI[a]:this.options.ignoreUnknown?void 0:a};a.prototype.invertMap=function(a){var e={},c;for(c in a)e[a[c]]=c;return e};a.prototype.getKeysSorted=function(a){var e=[],c;for(c in a)e.push(c);e.sort();return e};return a}();a.JSONMap=l;a.strict=function(){return function(a){return new l(a,{ignoreUnknown:!0})}};a.default=l})},"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),
function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});k.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(c,m){var b=c.constructor.prototype;b!==Function.prototype&&((c=Object.getOwnPropertyDescriptor(c,m))&&(c.get||c.set)?(a=g.clone(a),c.set&&(a.set=c.set),c.get&&(a.get=c.get)):c&&c.hasOwnProperty("value")&&(a=g.clone(a),a.value=c.value),m=e.getPropertyMetadata(b,m),e.mergeProperty(m,a))}};a.propertyJSONMeta=function(a,
h,m){a=e.getPropertyMetadata(a.constructor.prototype,m);a.json||(a.json={});a=a.json;void 0!==h&&(a.origins||(a.origins={}),a.origins[h]||(a.origins[h]={}),a=a.origins[h]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,e,c){var h,m;void 0===e||Array.isArray(e)?(m=a,c=e,h=[void 0]):(m=e,h=Array.isArray(a)?a:[a]);return function(a,f,e){var b=
a.constructor.prototype;h.forEach(function(e){e=g.propertyJSONMeta(a,e,m);e.read&&"object"!==typeof e.read&&(e.read={});l.setDeepValue("read.reader",b[f],e);c&&(e.read.source=(e.read.source||[]).concat(c))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.shared=function(a){return function(d,k){d[k]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports",
"../../declare","../metadata"],function(d,a,l,g){function k(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function e(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function c(a){var b=[];a=g.getPropertiesMetadata(a.prototype);if(!a)return b;for(var f in a){var c=a[f];c.cast&&b.push(c.cast);c.copy&&b.push(c.copy);if(c=c.json)if(k(c,b),e(c,b),c=c.origins)for(var h in c){var m=
c[h];k(m,b);e(m,b)}}return b}function h(a){var f={values:{},descriptors:{}},e=["__bases__"],h=g.getPropertiesMetadata(a.prototype),m=c(a);Object.getOwnPropertyNames(a.prototype).filter(function(f){return-1!==e.indexOf(f)||h&&h.hasOwnProperty(f)||!b(Object.getOwnPropertyDescriptor(a.prototype,f))&&-1!==m.indexOf(a.prototype[f])?!1:!0}).forEach(function(c){var e=Object.getOwnPropertyDescriptor(a.prototype,c);b(e)?f.descriptors[c]=e:f.values[c]=a.prototype[c]});return f}function m(a){var f=Object.getOwnPropertyNames(a),
c=Object.getPrototypeOf(a.prototype).constructor,e=Object.getOwnPropertyNames(Function);e.push("__bases__");var h=Object.getOwnPropertyNames(c),m={values:{},descriptors:{}};f.filter(function(b){return-1!==e.indexOf(b)?!1:-1===h.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(f){var c=Object.getOwnPropertyDescriptor(a,f);b(c)?m.descriptors[f]=c:m.values[f]=a[f]});return m}function b(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",{value:!0});a.subclass=function(a){return function(b){var f=
h(b),c=m(b);null!=a&&(f.values.declaredClass=a);b=l(b.__bases__,f.values);Object.defineProperties(b.prototype,f.descriptors);for(var e in c.values)b[e]=c.values[e];Object.defineProperties(b,c.descriptors);return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,e,c){var h,m;void 0===e?(m=a,h=[void 0]):"string"!==typeof e?(m=a,h=[void 0],c=e):
(m=e,h=Array.isArray(a)?a:[a]);return function(a,f,e){var b=a.constructor.prototype;h.forEach(function(e){e=g.propertyJSONMeta(a,e,m);e.write&&"object"!==typeof e.write&&(e.write={});c&&l.setDeepValue("write.target",c,e);l.setDeepValue("write.writer",b[f],e)})}}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){var w=new c.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",pbf:"pbf"});return function(a){function c(b){b=a.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}g(c,a);h=c;c.create=function(a){void 0===a&&(a={size:256,spatialReference:e.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,f=a.scales,c=a.size||256;a=a.spatialReference||e.SpatialReference.WebMercator;if(!u.isValid(a)){b=[];if(f)for(var p=0;p<f.length;p++){var n=f[p];b.push({level:p,scale:n,resolution:n})}else for(var d=5E-4,p=23;0<=p;p--)b.unshift({level:p,scale:d,resolution:d}),d*=2;return new h({dpi:96,lods:b,origin:new e.Point(0,0,a),size:[c,c],spatialReference:a})}var g=(p=u.getInfo(a))?new e.Point(p.origin[0],p.origin[1],a):new e.Point(0,0,a),r=1/(39.37*m.getMetersPerUnitForSR(a)*96),
t=[];if(f)for(p=0;p<f.length;p++)n=f[p],d=n*r,t.push({level:p,scale:n,resolution:d});else for(n=u.isGeographic(a)?512/c*5.916575275917094E8:256/c*5.91657527591555E8,f=Math.ceil(24/b),t.push({level:0,scale:n,resolution:n*r}),p=1;p<f;p++)n/=Math.pow(2,b),d=n*r,t.push({level:p,scale:n,resolution:d});return new h({dpi:96,lods:t,origin:g,size:[c,c],spatialReference:a})};Object.defineProperty(c.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var f=u.getInfo(a);
return a.isWrappable&&Math.abs(f.origin[0]-b.x)<=f.dx}return!1},enumerable:!0,configurable:!0});c.prototype.readOrigin=function(a,b){return e.Point.fromJSON(l({spatialReference:b.spatialReference},a))};Object.defineProperty(c.prototype,"lods",{set:function(a){var b=this,f=0,c=0,e=[];this._levelToLOD={};a&&(f=-Infinity,c=Infinity,a.forEach(function(a){e.push(a.scale);f=a.scale>f?a.scale:f;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",f);this._set("maxScale",
c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});c.prototype.readSize=function(a,b){return[b.cols,b.rows]};c.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};c.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var f=Math.round(a);return b[f]+(f-a)*(b[Math.round(a-.5)]-b[f])};c.prototype.scaleToZoom=function(a){for(var b=this.scales,f=b.length-1,c=0;c<f;c++){var e=b[c],h=b[c+1];if(e<=a)break;
if(h===a)return c+1;if(e>a&&h<a)return c+1-(a-h)/(e-h)}return c};c.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};c.prototype.tileAt=function(a,b,f,c){var e=this.lodAt(a);if(!e)return null;var h;if("number"===typeof b)h=b,b=f;else{if(u.equals(b.spatialReference,this.spatialReference))h=b.x,b=b.y;else{c=n.project(b,this.spatialReference);if(!c)return null;h=c.x;b=c.y}c=f}f=e.resolution*
this.size[0];e=e.resolution*this.size[1];c||(c={id:null,level:0,row:0,col:0,extent:p.create()});c.level=a;c.row=Math.floor((this.origin.y-b)/e+.001);c.col=Math.floor((h-this.origin.x)/f+.001);this.updateTileInfo(c);return c};c.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var f=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=p.create());a.extent[0]=this.origin.x+a.col*f;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=
a.extent[0]+f;a.extent[3]=a.extent[1]+b}};c.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};c.prototype.getTileBounds=function(a,b){var f=this.lodAt(b.level).resolution,c=f*this.size[0],f=f*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*f;a[2]=a[0]+c;a[3]=a[1]+f;return a};c.prototype.lodAt=
function(a){return this._levelToLOD&&this._levelToLOD[a]||null};c.prototype.clone=function(){return h.fromJSON(this.write({}))};c.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,f=0;f<a.length;f++){var c=a[f];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var h;k([b.property({type:Number,json:{write:!0}})],c.prototype,"compressionQuality",void 0);k([b.property({type:Number,json:{write:!0}})],
c.prototype,"dpi",void 0);k([b.property({type:String,json:{read:w.read,write:w.write,origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"format",void 0);k([b.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],c.prototype,"isWrappable",null);k([b.property({type:e.Point,json:{write:!0}})],c.prototype,"origin",void 0);k([b.reader("origin")],c.prototype,"readOrigin",null);k([b.property({type:[r],value:null,json:{write:!0}})],c.prototype,"lods",null);k([b.property({readOnly:!0})],c.prototype,
"minScale",void 0);k([b.property({readOnly:!0})],c.prototype,"maxScale",void 0);k([b.property({readOnly:!0})],c.prototype,"scales",void 0);k([b.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],c.prototype,"size",void 0);k([b.reader("size",["rows","cols"])],c.prototype,"readSize",null);k([b.writer("size",{cols:{type:f.Integer},rows:{type:f.Integer}})],c.prototype,"writeSize",null);k([b.property({type:e.SpatialReference,json:{write:!0}})],c.prototype,"spatialReference",
void 0);return c=h=k([b.subclass("esri.layers.support.TileInfo")],c)}(b.declared(h))})},"esri/geometry":function(){define("require exports ./core/jsonMap ./core/accessorSupport/ensureType ./geometry/Extent ./geometry/Geometry ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=k;a.BaseGeometry=e;a.Multipoint=c;a.Point=
h;a.Polygon=m;a.Polyline=b;a.SpatialReference=f;a.isGeometry=function(b){return b instanceof a.BaseGeometry};a.fromJSON=p.fromJSON;a.typeKebabDictionary=l.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});a.isFeatureGeometryType=function(a){return"point"===a||"multipoint"===a||"polyline"===a||"polygon"===a};a.featureGeometryTypeKebabDictionary=l.strict()({esriGeometryPoint:"point",
esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"});a.geometryTypes={base:a.BaseGeometry,key:"type",typeMap:{extent:a.Extent,multipoint:a.Multipoint,point:a.Point,polyline:a.Polyline,polygon:a.Polygon}};a.ensureType=g.ensureOneOfType(a.geometryTypes)})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/string ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n){function r(a,b,f){return null==b?f:null==f?b:a(b,f)}d=function(a){function h(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}l(h,a);d=h;h.prototype.normalizeCtorArgs=function(a,f,c,e,h){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?b.WGS84:a.spatialReference,
a):{xmin:a,ymin:f,xmax:c,ymax:e,spatialReference:null==h?b.WGS84:h}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};h.fromBounds=function(a,b){return new d({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};Object.defineProperty(h.prototype,"center",{get:function(){var a=new m({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});
Object.defineProperty(h.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});
Object.defineProperty(h.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});h.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};h.prototype.clone=function(){var a=new d;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=
this.mmin,a.mmax=this.mmax);return a};h.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&n.canProject(b,c)&&(a=b.isWebMercator?n.geographicToWebMercator(a):n.webMercatorToGeographic(a,!0));return"point"===a.type?f.extentContainsPoint(this,a):"extent"===a.type?f.extentContainsExtent(this,a):!1};h.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,f=a.spatialReference;b&&f&&!b.equals(f)&&n.canProject(b,f)&&(a=b.isWebMercator?
n.geographicToWebMercator(a):n.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};h.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,f=this.height*a;this.xmin+=b;this.ymin+=f;this.xmax-=b;this.ymax-=f;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};h.prototype.intersects=
function(a){if(k.isNone(a))return!1;var b=this.spatialReference,f=a.spatialReference;b&&f&&!b.equals(f)&&n.canProject(b,f)&&(a=b.isWebMercator?n.geographicToWebMercator(a):n.webMercatorToGeographic(a,!0));b=p.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};h.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};h.prototype.offset=function(a,b,f){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=f&&(this.zmin+=f,this.zmax+=
f);return this};h.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};h.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=r(Math.min,this.zmin,a.zmin),this.zmax=r(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=r(Math.min,this.mmin,a.mmin),this.mmax=r(Math.max,this.mmax,a.mmax);return this};h.prototype.intersection=
function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=r(Math.max,this.zmin,a.zmin),this.zmax=r(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=r(Math.max,this.mmin,a.mmin),this.mmax=r(Math.min,this.mmax,a.mmax);return this};h.prototype.toJSON=function(a){return this.write(null,a)};h.prototype._shiftCM=function(a){void 0===
a&&(a=u.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var f=this.spatialReference,c=this._getCM(a);if(c){var h=f.isWebMercator?n.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;f.isWebMercator||(h.x=this._normalizeX(h.x,a).x);this.spatialReference=new b(e.replace(f.isWGS84?a.altTemplate:a.wkTemplate,{Central_Meridian:h.x}))}return this};h.prototype._getCM=function(a){var b=null,f=a.valid;a=f[0];var f=f[1],c=this.xmin,e=this.xmax;c>=a&&c<=f&&e>=a&&e<=f||(b=this.center);
return b};h.prototype._normalize=function(a,b,f){var c=this.spatialReference;if(!c)return this;f=f||u.getInfo(c);if(!f)return this;var e=this._getParts(f).map(function(a){return a.extent});if(2>e.length)return e[0]||this;if(2<e.length)return a?this._shiftCM(f):this.set({xmin:f.valid[0],xmax:f.valid[1]});if(a)return this._shiftCM(f);if(b)return e;var h=!0,p=!0;e.forEach(function(a){a.hasZ||(h=!1);a.hasM||(p=!1)});return{rings:e.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],
[a.xmax,a.ymin],[a.xmin,a.ymin]];if(h)for(var f=(a.zmax-a.zmin)/2,c=0;c<b.length;c++)b[c].push(f);if(p)for(a=(a.mmax-a.mmin)/2,c=0;c<b.length;c++)b[c].push(a);return b}),hasZ:h,hasM:p,spatialReference:c}};h.prototype._getParts=function(a){var b=this.cache._parts;if(!b){var b=[],f=this.ymin,c=this.ymax,e=this.spatialReference,h=this.width,p=this.xmin,m=this.xmax,n=void 0;a=a||u.getInfo(e);var g=a.valid,r=g[0],t=g[1],n=this._normalizeX(this.xmin,a),k=n.x,g=n.frameId,n=this._normalizeX(this.xmax,a),
y=n.x;a=n.frameId;n=k===y&&0<h;if(h>2*t){h=new d(p<m?k:y,f,t,c,e);p=new d(r,f,p<m?y:k,c,e);m=new d(0,f,t,c,e);f=new d(r,f,0,c,e);c=[];e=[];h.contains(m)&&c.push(g);h.contains(f)&&e.push(g);p.contains(m)&&c.push(a);p.contains(f)&&e.push(a);for(r=g+1;r<a;r++)c.push(r),e.push(r);b.push({extent:h,frameIds:[g]},{extent:p,frameIds:[a]},{extent:m,frameIds:c},{extent:f,frameIds:e})}else k>y||n?b.push({extent:new d(k,f,t,c,e),frameIds:[g]},{extent:new d(r,f,y,c,e),frameIds:[a]}):b.push({extent:new d(k,f,y,
c,e),frameIds:[g]});this.cache._parts=b}a=this.hasZ;f=this.hasM;if(a||f)for(g={},a&&(g.zmin=this.zmin,g.zmax=this.zmax),f&&(g.mmin=this.mmin,g.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(g);return b};h.prototype._normalizeX=function(a,b){var f=b.valid;b=f[0];var c=f[1],f=2*c,e=0;a>c?(b=Math.ceil(Math.abs(a-c)/f),a-=b*f,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/f),a+=b*f,e=-b);return{x:a,frameId:e}};var d;g([c.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],
h.prototype,"cache",void 0);g([c.property({readOnly:!0,dependsOn:["cache"]})],h.prototype,"center",null);g([c.property({readOnly:!0,dependsOn:["cache"]})],h.prototype,"extent",null);g([c.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasM",null);g([c.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasZ",null);g([c.property({readOnly:!0,dependsOn:["ymin","ymax"]})],h.prototype,
"height",null);g([c.property({readOnly:!0,dependsOn:["xmin","xmax"]})],h.prototype,"width",null);g([c.property({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],h.prototype,"xmin",void 0);g([c.property({type:Number,json:{write:!0}})],h.prototype,"ymin",void 0);g([c.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],h.prototype,"mmin",void 0);g([c.property({type:Number,json:{origins:{"web-scene":{write:!1}},
write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],h.prototype,"zmin",void 0);g([c.property({type:Number,json:{write:!0}})],h.prototype,"xmax",void 0);g([c.property({type:Number,json:{write:!0}})],h.prototype,"ymax",void 0);g([c.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],h.prototype,"mmax",void 0);g([c.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],
h.prototype,"zmax",void 0);return h=d=g([c.subclass("esri.geometry.Extent")],h)}(c.declared(h));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/core/string":function(){define(["require","exports","./object","@dojo/framework/shim/string"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});var k=/\{([^\}]+)\}/g;a.replace=function(a,c){return a.replace(k,"object"===typeof c?function(a,e){return l.getDeepValue(e,c)}:function(a,e){return c(e)})};a.startsWith=g.startsWith;a.endsWith=
g.endsWith})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(d,a,l,g,k,e,c){return function(a){function h(){var b=a.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=c.WGS84;return b}l(h,a);Object.defineProperty(h.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});
h.prototype.readSpatialReference=function(a,f){if(a instanceof c)return a;if(null!=a){var b=new c;b.read(a,f);return b}return a};h.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};h.prototype.clearCache=function(){this.notifyChange("cache")};h.prototype.getCacheValue=function(a){return this.cache[a]};h.prototype.setCacheValue=function(a,f){this.cache[a]=f};g([e.property()],h.prototype,"type",void 0);g([e.property({readOnly:!0,dependsOn:["spatialReference"]})],
h.prototype,"cache",null);g([e.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"extent",void 0);g([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],h.prototype,"hasM",void 0);g([e.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],h.prototype,"hasZ",void 0);g([e.property({type:c,json:{write:!0}})],h.prototype,"spatialReference",void 0);g([e.reader("spatialReference")],h.prototype,"readSpatialReference",
null);return h=g([e.subclass("esri.geometry.Geometry")],h)}(e.declared(k))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(d,a,l,g,k,e,c,h,m){function b(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var f=new this;f.read(a,b);return f}var f=function(a){function f(){return null!==
a&&a.apply(this,arguments)||this}l(f,a);f.prototype.read=function(a,b){h.default(this,a,b)};f.prototype.write=function(a,b){return m.default(this,a||{},b)};f.prototype.toJSON=function(a){return this.write(null,a)};f.fromJSON=function(a,f){return b.call(this,a,f)};return f=g([c.subclass("esri.core.JSONSupport")],f)}(c.declared(k));f.prototype.toJSON.isDefaultToJSON=!0;e.after(function(a){e.hasMixin(a,f)&&(a.fromJSON=b.bind(a))});return f})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),
function(d,a,l,g,k,e){function c(a,b,f){void 0===f&&(f=h);if(b&&"object"===typeof b){for(var c=k.getProperties(a),m=c.metadatas,n={},d=0,w=Object.getOwnPropertyNames(b);d<w.length;d++){var t=n,y=m,x=w[d],l=b,z=f,C=e.originSpecificReadPropertyDefinition(y[x],z);C&&(!C.read||!1!==C.read.enabled&&!C.read.source)&&(t[x]=!0);for(var D=0,B=Object.getOwnPropertyNames(y);D<B.length;D++){var E=B[D],C=e.originSpecificReadPropertyDefinition(y[E],z),F;a:{F=x;var H=l;if(C&&C.read&&!1!==C.read.enabled&&C.read.source)if(C=
C.read.source,"string"===typeof C){if(C===F||-1<C.indexOf(".")&&0===C.indexOf(F)&&g.exists(C,H)){F=!0;break a}}else for(var G=0;G<C.length;G++){var J=C[G];if(J===F||-1<J.indexOf(".")&&0===J.indexOf(F)&&g.exists(J,H)){F=!0;break a}}F=!1}F&&(t[E]=!0)}}c.setDefaultOrigin(f.origin);w=0;for(t=Object.getOwnPropertyNames(n);w<t.length;w++)d=t[w],x=(y=e.originSpecificReadPropertyDefinition(m[d],f).read)&&y.source,l=void 0,l=x&&"string"===typeof x?g.valueOf(b,x):b[d],y&&y.reader&&(l=y.reader.call(a,l,b,f)),
void 0!==l&&c.set(d,l);if(!f||!f.ignoreDefaults)for(b=0,m=Object.getOwnPropertyNames(m);b<m.length;b++)d=m[b],n[d]||(w=a,t=c,y=f,x=(x=e.originSpecificPropertyDefinition(t.metadatas[d],"any",y))&&x.default,void 0!==x&&(w="function"===typeof x?x.call(w,d,y):x,void 0!==w&&t.set(d,w)));c.setDefaultOrigin("user")}}Object.defineProperty(a,"__esModule",{value:!0});var h={origin:"service"};a.read=c;a.readLoadable=function(a,b,f,c){void 0===c&&(c=h);b=l({},c,{messages:[]});f(b);b.messages.forEach(function(b){"warning"!==
b.type||a.loaded?c&&c.messages.push(b):a.loadWarnings.push(b)})};a.default=c})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(d,a,l,g,k,e,c,h){function m(a,b,c,h,m,d){if(!h||!h.write)return!1;var p=a.get(c);if(!m&&h.write.overridePolicy){var n=h.write.overridePolicy.call(a,p,c,d);void 0!==n&&(m=n)}m||(m=h.write);if(!m||!1===m.enabled)return!1;if((null===p&&!m.allowNull||
void 0===p)&&m.isRequired)return(b=new g("web-document-write:property-required","Missing value for required property '"+c+"' on '"+a.declaredClass+"'",{propertyName:c,target:a}),d)&&d.messages?d.messages.push(b):b&&!d&&f.error(b.name,b.message),!1;if(void 0===p||null===p&&!m.allowNull)return!1;n=h.default;void 0===n?p=!1:"function"===typeof n?Array.isArray(p)?(a=n.call(a,c,d),p=l.equals(a,p)):p=!1:p=n===p;return p?!1:void 0!==h.default?!0:!m.ignoreOrigin&&d&&d.origin&&b.store.originOf(c)<e.nameToId(d.origin)?
!1:!0}function b(a,b,f){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return c.merge(b,a.toJSON());var p=c.getProperties(a),n=p.metadatas,d;for(d in n){var g=h.originSpecificWritePropertyDefinition(n[d],f);if(m(a,p,d,g,null,f)){var u=a.get(d),k={};g.write.writer.call(a,u,k,"string"===typeof g.write.target?g.write.target:d,f);g=k;0<Object.keys(g).length&&(b=c.merge(b,g),f&&f.writtenProperties&&f.writtenProperties.push({target:a,propName:d,oldOrigin:e.idToReadableName(p.store.originOf(d)),
newOrigin:f.origin}))}}return b}Object.defineProperty(a,"__esModule",{value:!0});var f=k.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,b,f,e){var p=c.getProperties(a),n=h.originSpecificWritePropertyDefinition(p.metadatas[b],e);return n?m(a,p,b,n,f,e):!1};a.write=b;a.default=b})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(d,a,l,g){function k(a,b){return-1===a.indexOf(b)}function e(a,b,c){return!a.some(b.bind(null,
c))}function c(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.find=l.find;a.findIndex=l.findIndex;a.unique=function(a){return a.filter(function(a,b,f){return f.indexOf(a)===b})};a.equals=function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;if(c)for(var f=0;f<a.length;f++){if(!c(a[f],b[f]))return!1}else for(f=0;f<a.length;f++)if(a[f]!==b[f])return!1;return!0};a.difference=function(a,b,c){var f;c?(f=b.filter(e.bind(null,a,c)),a=a.filter(e.bind(null,b,c))):(f=b.filter(k.bind(null,
a)),a=a.filter(k.bind(null,b)));return{added:f,removed:a}};a.intersect=function(a,b,c){return a&&b?c?a.filter(function(a){return-1<l.findIndex(b,function(b){return c(a,b)})}):a.filter(function(a){return-1<b.indexOf(a)}):[]};a.constant=function(a,b){for(var f=Array(a),c=0;c<a;c++)f[c]=b;return f};a.range=function(a,b){void 0===b&&(b=a,a=0);for(var f=Array(b-a),c=a;c<b;c++)f[c-a]=c;return f};a.binaryIndexOf=function(a,b,c){for(var f=a.length,e=0,h=f-1;e<h;){var m=e+Math.floor((h-e)/2);b>a[m]?e=m+1:
h=m}h=a[e];return c?b>=a[f-1]?-1:h===b?e:e-1:h===b?e:-1};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b||[])},[])};d=function(){return function(){this.last=0}}();a.RemoveHint=d;var h=new d;a.removeUnordered=function(a,b,c,e){e=e||h;for(var f=null==c?a.length:c,m=Math.max(0,e.last-10),p=-1,n=m;n<f;++n)if(a[n]===b){p=n;break}if(-1===p){for(n=0;n<m;++n)if(a[n]===b){p=n;break}if(-1===p)return}a[p]=a[f-1];null==c&&a.pop();e.last=p;return b};var m=new Set;a.removeUnorderedMany=function(a,
b,c,e,d,g){void 0===c&&(c=a.length);void 0===e&&(e=b.length);if(0===e||0===c)return c;m.clear();for(var f=0;f<e;++f)m.add(b[f]);d=d||h;for(f=b=Math.max(0,d.last-10);f<c;++f)if(m.has(a[f])&&(g&&g.push(a[f]),m.delete(a[f]),a[f]=a[c-1],--c,--f,0===m.size||0===c))return m.clear(),c;for(f=0;f<b;++f)if(m.has(a[f])&&(g&&g.push(a[f]),m.delete(a[f]),a[f]=a[c-1],--c,--f,0===m.size||0===c))return m.clear(),c;m.clear();return c};a.shuffle=function(a,c){c=(b.seed=c)?function(){return b.getFloat()}:Math.random;
for(var f=a.length-1;0<f;f--){var e=Math.floor(c()*(f+1)),h=a[f];a[f]=a[e];a[e]=h}return a};var b=new g;a.keysOfMap=function(a){var b=[];a.forEach(function(a,f){return b.push(f)});return b};a.keysOfSet=function(a,b){void 0===b&&(b=c);var f=[];a.forEach(function(a){return f.push(b(a))});return f};a.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),f=0;a.forEach(function(a){b[f++]=a});return b};a.remove=function(a,b){var f=a.indexOf(b);return-1!==f?(a.splice(f,
1),b):null}})},"esri/core/RandomLCG":function(){define(["require","exports"],function(d,a){return function(){function a(a){void 0===a&&(a=1);this._seed=a}Object.defineProperty(a.prototype,"seed",{set:function(d){this._seed=null==d?Math.random()*a._m:d},enumerable:!0,configurable:!0});a.prototype.getInt=function(){return this._seed=(a._a*this._seed+a._c)%a._m};a.prototype.getFloat=function(){return this.getInt()/(a._m-1)};a.prototype.getIntRange=function(a,d){return Math.round(this.getFloatRange(a,
d))};a.prototype.getFloatRange=function(d,k){k-=d;var e=this.getInt()/a._m;return d+Math.floor(e*k)};a._m=2147483647;a._a=48271;a._c=0;return a}()})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(d,a,l,g,k,e,c){d=function(a){function h(b){b=a.call(this)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;
return b}l(h,a);b=h;h.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return b.WebMercator;if(4326===a.wkid)return b.WGS84}var c=new b;c.read(a);return c};h.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(h.prototype,"isWGS84",{get:function(){return c.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"isWebMercator",{get:function(){return c.isWebMercator(this)},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"isGeographic",{get:function(){return c.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"isWrappable",{get:function(){return c.isWrappable(this)},enumerable:!0,configurable:!0});h.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};h.prototype.clone=function(){if(this===b.WGS84)return b.WGS84;if(this===b.WebMercator)return b.WebMercator;var a=new b;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&
(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};h.prototype.equals=function(a){return c.equals(this,a)};h.prototype.toJSON=function(a){return this.write(null,a)};var b;h.GCS_NAD_1927=null;h.WGS84=null;h.WebMercator=null;g([e.property({dependsOn:["wkid"],readOnly:!0})],h.prototype,"isWGS84",null);g([e.property({dependsOn:["wkid"],readOnly:!0})],h.prototype,"isWebMercator",
null);g([e.property({dependsOn:["wkid","wkt"],readOnly:!0})],h.prototype,"isGeographic",null);g([e.property({dependsOn:["wkid"],readOnly:!0})],h.prototype,"isWrappable",null);g([e.property({type:Number,json:{write:!0}})],h.prototype,"latestWkid",void 0);g([e.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],h.prototype,"wkid",void 0);g([e.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],h.prototype,"wkt",void 0);g([e.writer("wkt"),e.writer("web-scene","wkt")],h.prototype,"writeWkt",null);g([e.property({type:Number,json:{write:!0}})],h.prototype,"vcsWkid",void 0);g([e.property({type:Number,json:{write:!0}})],h.prototype,"latestVcsWkid",void 0);return h=b=g([e.subclass("esri.geometry.SpatialReference")],h)}(e.declared(k));d.prototype.toJSON.isDefaultToJSON=!0;d.GCS_NAD_1927=new d({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
d.WGS84=new d(c.WGS84);d.WebMercator=new d(c.WebMercator);Object.freeze&&(Object.freeze(d.GCS_NAD_1927),Object.freeze(d.WGS84),Object.freeze(d.WebMercator));return d})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","../../core/string","./WKIDUnitConversion"],function(d,a,l,g){function k(a){return c(a)&&a.wkid?f[a.wkid]:null}function e(a){return c(a)&&!0===h[a.wkid]}function c(a){return null!=a&&(null!=a.wkid&&2E3<=a.wkid||null!=a.wkt)}Object.defineProperty(a,
"__esModule",{value:!0});var h={102113:!0,102100:!0,3857:!0,3785:!0},m={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};d=[-2.0037508342788905E7,2.0037508342788905E7];var b=[-2.0037508342787E7,2.0037508342787E7],f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:d,origin:b,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:d,origin:b,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:d,origin:b,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:d,origin:b,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,b){return a&&b?a===b?!0:null!=a.wkid||null!=b.wkid?a.wkid===b.wkid||e(a)&&e(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid:a.wkt&&b.wkt?a.wkt.toUpperCase()===b.wkt.toUpperCase():!1:!1};a.getInfo=k;a.isGeographic=function(a){return c(a)?a.wkid?null==g[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1:!1};a.isWGS84=function(a){return c(a)&&4326===a.wkid};a.isWebMercator=e;a.isWrappable=function(a){return c(a)&&
!0===m[a.wkid]};a.isValid=c;a.WGS84={wkid:4326,wkt:l.replace(k({wkid:4326}).wkTemplate,{Central_Meridian:"0.0"})};a.WebMercator={wkid:102100,latestWkid:3857}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var d,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8082:0,8083:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,
8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,
8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,
8387:2,8391:0,8682:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,
27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,
102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,
103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,
103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,
103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,
103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(d=2E3;2045>=d;d++)a[d]=0;for(d=2056;2065>=d;d++)a[d]=0;for(d=2067;2135>=d;d++)a[d]=0;for(d=2137;2154>=d;d++)a[d]=0;for(d=2161;2170>=d;d++)a[d]=0;for(d=2172;2193>=d;d++)a[d]=0;for(d=2195;2198>=d;d++)a[d]=0;for(d=2200;2203>=d;d++)a[d]=0;for(d=2205;2217>=d;d++)a[d]=0;for(d=2222;2224>=d;d++)a[d]=1;for(d=2225;2250>=d;d++)a[d]=2;
for(d=2251;2253>=d;d++)a[d]=1;for(d=2257;2264>=d;d++)a[d]=2;for(d=2274;2279>=d;d++)a[d]=2;for(d=2280;2282>=d;d++)a[d]=1;for(d=2283;2289>=d;d++)a[d]=2;for(d=2290;2292>=d;d++)a[d]=0;for(d=2308;2313>=d;d++)a[d]=0;for(d=2315;2491>=d;d++)a[d]=0;for(d=2494;2866>=d;d++)a[d]=0;for(d=2867;2869>=d;d++)a[d]=1;for(d=2870;2888>=d;d++)a[d]=2;for(d=2891;2895>=d;d++)a[d]=2;for(d=2896;2898>=d;d++)a[d]=1;for(d=2902;2908>=d;d++)a[d]=2;for(d=2915;2920>=d;d++)a[d]=2;for(d=2921;2923>=d;d++)a[d]=1;for(d=2924;2930>=d;d++)a[d]=
2;for(d=2931;2962>=d;d++)a[d]=0;for(d=2964;2968>=d;d++)a[d]=2;for(d=2969;2973>=d;d++)a[d]=0;for(d=2975;2991>=d;d++)a[d]=0;for(d=2995;3051>=d;d++)a[d]=0;for(d=3054;3079>=d;d++)a[d]=0;for(d=3081;3088>=d;d++)a[d]=0;for(d=3092;3101>=d;d++)a[d]=0;for(d=3106;3138>=d;d++)a[d]=0;for(d=3146;3151>=d;d++)a[d]=0;for(d=3153;3166>=d;d++)a[d]=0;for(d=3168;3172>=d;d++)a[d]=0;for(d=3174;3203>=d;d++)a[d]=0;for(d=3294;3358>=d;d++)a[d]=0;for(d=3367;3403>=d;d++)a[d]=0;for(d=3408;3416>=d;d++)a[d]=0;for(d=3417;3438>=d;d++)a[d]=
2;for(d=3441;3446>=d;d++)a[d]=2;for(d=3447;3450>=d;d++)a[d]=0;for(d=3451;3459>=d;d++)a[d]=2;for(d=3460;3478>=d;d++)a[d]=0;for(d=3554;3559>=d;d++)a[d]=0;for(d=3560;3570>=d;d++)a[d]=2;for(d=3571;3581>=d;d++)a[d]=0;for(d=3594;3597>=d;d++)a[d]=0;for(d=3601;3604>=d;d++)a[d]=0;for(d=3637;3639>=d;d++)a[d]=0;for(d=3665;3667>=d;d++)a[d]=0;for(d=3693;3695>=d;d++)a[d]=0;for(d=3701;3727>=d;d++)a[d]=0;for(d=3728;3739>=d;d++)a[d]=2;for(d=3740;3751>=d;d++)a[d]=0;for(d=3753;3760>=d;d++)a[d]=2;for(d=3761;3773>=d;d++)a[d]=
0;for(d=3775;3777>=d;d++)a[d]=0;for(d=3779;3781>=d;d++)a[d]=0;for(d=3783;3785>=d;d++)a[d]=0;for(d=3788;3791>=d;d++)a[d]=0;for(d=3797;3802>=d;d++)a[d]=0;for(d=3814;3816>=d;d++)a[d]=0;for(d=3825;3829>=d;d++)a[d]=0;for(d=3832;3841>=d;d++)a[d]=0;for(d=3844;3852>=d;d++)a[d]=0;for(d=3873;3885>=d;d++)a[d]=0;for(d=3890;3893>=d;d++)a[d]=0;for(d=3907;3912>=d;d++)a[d]=0;for(d=3942;3950>=d;d++)a[d]=0;for(d=3968;3970>=d;d++)a[d]=0;for(d=3973;3976>=d;d++)a[d]=0;for(d=3986;3989>=d;d++)a[d]=0;for(d=3994;3997>=d;d++)a[d]=
0;for(d=4048;4051>=d;d++)a[d]=0;for(d=4056;4063>=d;d++)a[d]=0;for(d=4093;4096>=d;d++)a[d]=0;for(d=4390;4398>=d;d++)a[d]=0;for(d=4399;4413>=d;d++)a[d]=2;for(d=4418;4433>=d;d++)a[d]=2;for(d=4455;4457>=d;d++)a[d]=2;for(d=4484;4489>=d;d++)a[d]=0;for(d=4491;4554>=d;d++)a[d]=0;for(d=4568;4589>=d;d++)a[d]=0;for(d=4652;4656>=d;d++)a[d]=0;for(d=4766;4800>=d;d++)a[d]=0;for(d=5014;5016>=d;d++)a[d]=0;for(d=5069;5072>=d;d++)a[d]=0;for(d=5105;5130>=d;d++)a[d]=0;for(d=5173;5188>=d;d++)a[d]=0;for(d=5253;5259>=d;d++)a[d]=
0;for(d=5269;5275>=d;d++)a[d]=0;for(d=5292;5311>=d;d++)a[d]=0;for(d=5329;5331>=d;d++)a[d]=0;for(d=5343;5349>=d;d++)a[d]=0;for(d=5355;5357>=d;d++)a[d]=0;for(d=5387;5389>=d;d++)a[d]=0;for(d=5459;5463>=d;d++)a[d]=0;for(d=5479;5482>=d;d++)a[d]=0;for(d=5518;5520>=d;d++)a[d]=0;for(d=5530;5539>=d;d++)a[d]=0;for(d=5550;5552>=d;d++)a[d]=0;for(d=5562;5583>=d;d++)a[d]=0;for(d=5623;5625>=d;d++)a[d]=2;for(d=5631;5639>=d;d++)a[d]=0;for(d=5649;5653>=d;d++)a[d]=0;for(d=5663;5680>=d;d++)a[d]=0;for(d=5682;5685>=d;d++)a[d]=
0;for(d=5875;5877>=d;d++)a[d]=0;for(d=5921;5940>=d;d++)a[d]=0;for(d=6050;6125>=d;d++)a[d]=0;for(d=6244;6275>=d;d++)a[d]=0;for(d=6328;6348>=d;d++)a[d]=0;for(d=6350;6356>=d;d++)a[d]=0;for(d=6366;6372>=d;d++)a[d]=0;for(d=6381;6387>=d;d++)a[d]=0;for(d=6393;6404>=d;d++)a[d]=0;for(d=6480;6483>=d;d++)a[d]=0;for(d=6511;6514>=d;d++)a[d]=0;for(d=6579;6581>=d;d++)a[d]=0;for(d=6619;6624>=d;d++)a[d]=0;for(d=6625;6627>=d;d++)a[d]=2;for(d=6628;6632>=d;d++)a[d]=0;for(d=6634;6637>=d;d++)a[d]=0;for(d=6669;6692>=d;d++)a[d]=
0;for(d=6707;6709>=d;d++)a[d]=0;for(d=6720;6723>=d;d++)a[d]=0;for(d=6732;6738>=d;d++)a[d]=0;for(d=6931;6933>=d;d++)a[d]=0;for(d=6956;6959>=d;d++)a[d]=0;for(d=7005;7007>=d;d++)a[d]=0;for(d=7057;7070>=d;d++)a[d]=2;for(d=7074;7082>=d;d++)a[d]=0;for(d=7109;7118>=d;d++)a[d]=0;for(d=7119;7127>=d;d++)a[d]=1;for(d=7374;7376>=d;d++)a[d]=0;for(d=7528;7586>=d;d++)a[d]=0;for(d=7587;7645>=d;d++)a[d]=2;for(d=7755;7787>=d;d++)a[d]=0;for(d=7791;7795>=d;d++)a[d]=0;for(d=7799;7801>=d;d++)a[d]=0;for(d=7803;7805>=d;d++)a[d]=
0;for(d=7825;7831>=d;d++)a[d]=0;for(d=7845;7859>=d;d++)a[d]=0;for(d=8013;8032>=d;d++)a[d]=0;for(d=8065;8068>=d;d++)a[d]=1;for(d=8836;8840>=d;d++)a[d]=0;for(d=8857;8859>=d;d++)a[d]=0;for(d=20002;20032>=d;d++)a[d]=0;for(d=20062;20092>=d;d++)a[d]=0;for(d=20135;20138>=d;d++)a[d]=0;for(d=20248;20258>=d;d++)a[d]=0;for(d=20348;20358>=d;d++)a[d]=0;for(d=20436;20440>=d;d++)a[d]=0;for(d=20822;20824>=d;d++)a[d]=0;for(d=20934;20936>=d;d++)a[d]=0;for(d=21035;21037>=d;d++)a[d]=0;for(d=21095;21097>=d;d++)a[d]=0;
for(d=21148;21150>=d;d++)a[d]=0;for(d=21413;21423>=d;d++)a[d]=0;for(d=21473;21483>=d;d++)a[d]=0;for(d=21780;21782>=d;d++)a[d]=0;for(d=21891;21894>=d;d++)a[d]=0;for(d=21896;21899>=d;d++)a[d]=0;for(d=22171;22177>=d;d++)a[d]=0;for(d=22181;22187>=d;d++)a[d]=0;for(d=22191;22197>=d;d++)a[d]=0;for(d=22234;22236>=d;d++)a[d]=0;for(d=22521;22525>=d;d++)a[d]=0;for(d=22991;22994>=d;d++)a[d]=0;for(d=23028;23038>=d;d++)a[d]=0;for(d=23830;23853>=d;d++)a[d]=0;for(d=23866;23872>=d;d++)a[d]=0;for(d=23877;23884>=d;d++)a[d]=
0;for(d=23886;23894>=d;d++)a[d]=0;for(d=23946;23948>=d;d++)a[d]=0;for(d=24311;24313>=d;d++)a[d]=0;for(d=24342;24347>=d;d++)a[d]=0;for(d=24370;24374>=d;d++)a[d]=10;for(d=24375;24381>=d;d++)a[d]=0;for(d=24718;24721>=d;d++)a[d]=0;for(d=24817;24821>=d;d++)a[d]=0;for(d=24877;24882>=d;d++)a[d]=0;for(d=24891;24893>=d;d++)a[d]=0;for(d=25391;25395>=d;d++)a[d]=0;for(d=25828;25838>=d;d++)a[d]=0;for(d=26191;26195>=d;d++)a[d]=0;for(d=26391;26393>=d;d++)a[d]=0;for(d=26701;26722>=d;d++)a[d]=0;for(d=26729;26799>=
d;d++)a[d]=2;for(d=26801;26803>=d;d++)a[d]=2;for(d=26811;26813>=d;d++)a[d]=2;for(d=26847;26870>=d;d++)a[d]=2;for(d=26891;26899>=d;d++)a[d]=0;for(d=26901;26923>=d;d++)a[d]=0;for(d=26929;26946>=d;d++)a[d]=0;for(d=26948;26998>=d;d++)a[d]=0;for(d=27037;27040>=d;d++)a[d]=0;for(d=27205;27232>=d;d++)a[d]=0;for(d=27258;27260>=d;d++)a[d]=0;for(d=27391;27398>=d;d++)a[d]=0;for(d=27561;27564>=d;d++)a[d]=0;for(d=27571;27574>=d;d++)a[d]=0;for(d=27581;27584>=d;d++)a[d]=0;for(d=27591;27594>=d;d++)a[d]=0;for(d=28191;28193>=
d;d++)a[d]=0;for(d=28348;28358>=d;d++)a[d]=0;for(d=28402;28432>=d;d++)a[d]=0;for(d=28462;28492>=d;d++)a[d]=0;for(d=29118;29122>=d;d++)a[d]=0;for(d=29168;29172>=d;d++)a[d]=0;for(d=29177;29185>=d;d++)a[d]=0;for(d=29187;29195>=d;d++)a[d]=0;for(d=29900;29903>=d;d++)a[d]=0;for(d=30161;30179>=d;d++)a[d]=0;for(d=30491;30494>=d;d++)a[d]=0;for(d=30729;30732>=d;d++)a[d]=0;for(d=31251;31259>=d;d++)a[d]=0;for(d=31265;31268>=d;d++)a[d]=0;for(d=31275;31279>=d;d++)a[d]=0;for(d=31281;31297>=d;d++)a[d]=0;for(d=31461;31469>=
d;d++)a[d]=0;for(d=31491;31495>=d;d++)a[d]=0;for(d=31917;31922>=d;d++)a[d]=0;for(d=31965;32E3>=d;d++)a[d]=0;for(d=32001;32003>=d;d++)a[d]=2;for(d=32005;32031>=d;d++)a[d]=2;for(d=32033;32060>=d;d++)a[d]=2;for(d=32064;32067>=d;d++)a[d]=2;for(d=32074;32077>=d;d++)a[d]=2;for(d=32081;32086>=d;d++)a[d]=0;for(d=32107;32130>=d;d++)a[d]=0;for(d=32133;32158>=d;d++)a[d]=0;for(d=32164;32167>=d;d++)a[d]=2;for(d=32180;32199>=d;d++)a[d]=0;for(d=32201;32260>=d;d++)a[d]=0;for(d=32301;32360>=d;d++)a[d]=0;for(d=32601;32662>=
d;d++)a[d]=0;for(d=32664;32667>=d;d++)a[d]=2;for(d=32701;32761>=d;d++)a[d]=0;for(d=53001;53004>=d;d++)a[d]=0;for(d=53008;53019>=d;d++)a[d]=0;for(d=53021;53032>=d;d++)a[d]=0;for(d=53034;53037>=d;d++)a[d]=0;for(d=53042;53046>=d;d++)a[d]=0;for(d=53074;53080>=d;d++)a[d]=0;for(d=54001;54004>=d;d++)a[d]=0;for(d=54008;54019>=d;d++)a[d]=0;for(d=54021;54032>=d;d++)a[d]=0;for(d=54034;54037>=d;d++)a[d]=0;for(d=54042;54046>=d;d++)a[d]=0;for(d=54048;54053>=d;d++)a[d]=0;for(d=54074;54080>=d;d++)a[d]=0;for(d=102001;102040>=
d;d++)a[d]=0;for(d=102042;102063>=d;d++)a[d]=0;for(d=102065;102067>=d;d++)a[d]=0;for(d=102070;102117>=d;d++)a[d]=0;for(d=102122;102216>=d;d++)a[d]=0;for(d=102221;102377>=d;d++)a[d]=0;for(d=102382;102388>=d;d++)a[d]=0;for(d=102389;102398>=d;d++)a[d]=2;for(d=102399;102444>=d;d++)a[d]=0;for(d=102445;102447>=d;d++)a[d]=2;for(d=102448;102458>=d;d++)a[d]=0;for(d=102459;102468>=d;d++)a[d]=2;for(d=102469;102499>=d;d++)a[d]=0;for(d=102500;102519>=d;d++)a[d]=1;for(d=102520;102524>=d;d++)a[d]=0;for(d=102525;102529>=
d;d++)a[d]=2;for(d=102530;102588>=d;d++)a[d]=0;for(d=102590;102598>=d;d++)a[d]=0;for(d=102601;102603>=d;d++)a[d]=0;for(d=102605;102628>=d;d++)a[d]=0;for(d=102629;102646>=d;d++)a[d]=2;for(d=102648;102700>=d;d++)a[d]=2;for(d=102701;102703>=d;d++)a[d]=0;for(d=102707;102730>=d;d++)a[d]=2;for(d=102733;102758>=d;d++)a[d]=2;for(d=102767;102900>=d;d++)a[d]=0;for(d=102965;102969>=d;d++)a[d]=0;for(d=102971;102973>=d;d++)a[d]=0;for(d=102975;102989>=d;d++)a[d]=0;for(d=102990;102992>=d;d++)a[d]=1;for(d=102997;103002>=
d;d++)a[d]=0;for(d=103003;103008>=d;d++)a[d]=2;for(d=103009;103011>=d;d++)a[d]=0;for(d=103012;103014>=d;d++)a[d]=2;for(d=103019;103021>=d;d++)a[d]=0;for(d=103022;103024>=d;d++)a[d]=2;for(d=103029;103031>=d;d++)a[d]=0;for(d=103032;103034>=d;d++)a[d]=2;for(d=103065;103068>=d;d++)a[d]=0;for(d=103074;103076>=d;d++)a[d]=0;for(d=103077;103079>=d;d++)a[d]=1;for(d=103080;103082>=d;d++)a[d]=0;for(d=103083;103085>=d;d++)a[d]=2;for(d=103090;103093>=d;d++)a[d]=0;for(d=103097;103099>=d;d++)a[d]=0;for(d=103100;103102>=
d;d++)a[d]=2;for(d=103107;103109>=d;d++)a[d]=0;for(d=103110;103112>=d;d++)a[d]=2;for(d=103113;103116>=d;d++)a[d]=0;for(d=103117;103120>=d;d++)a[d]=2;for(d=103153;103157>=d;d++)a[d]=0;for(d=103158;103162>=d;d++)a[d]=2;for(d=103163;103165>=d;d++)a[d]=0;for(d=103166;103168>=d;d++)a[d]=1;for(d=103169;103171>=d;d++)a[d]=2;for(d=103186;103188>=d;d++)a[d]=0;for(d=103189;103191>=d;d++)a[d]=2;for(d=103192;103195>=d;d++)a[d]=0;for(d=103196;103199>=d;d++)a[d]=2;for(d=103200;103224>=d;d++)a[d]=0;for(d=103225;103227>=
d;d++)a[d]=1;for(d=103232;103237>=d;d++)a[d]=0;for(d=103238;103243>=d;d++)a[d]=2;for(d=103244;103246>=d;d++)a[d]=0;for(d=103247;103249>=d;d++)a[d]=2;for(d=103254;103256>=d;d++)a[d]=0;for(d=103257;103259>=d;d++)a[d]=2;for(d=103264;103266>=d;d++)a[d]=0;for(d=103267;103269>=d;d++)a[d]=2;for(d=103300;103375>=d;d++)a[d]=0;for(d=103381;103383>=d;d++)a[d]=0;for(d=103384;103386>=d;d++)a[d]=1;for(d=103387;103389>=d;d++)a[d]=0;for(d=103390;103392>=d;d++)a[d]=2;for(d=103397;103399>=d;d++)a[d]=0;for(d=103400;103471>=
d;d++)a[d]=2;for(d=103476;103478>=d;d++)a[d]=0;for(d=103479;103481>=d;d++)a[d]=2;for(d=103486;103488>=d;d++)a[d]=0;for(d=103489;103491>=d;d++)a[d]=2;for(d=103492;103495>=d;d++)a[d]=0;for(d=103496;103499>=d;d++)a[d]=2;for(d=103528;103543>=d;d++)a[d]=0;for(d=103544;103548>=d;d++)a[d]=2;for(d=103549;103551>=d;d++)a[d]=0;for(d=103552;103554>=d;d++)a[d]=1;for(d=103555;103557>=d;d++)a[d]=2;for(d=103558;103560>=d;d++)a[d]=0;for(d=103571;103573>=d;d++)a[d]=0;for(d=103574;103576>=d;d++)a[d]=2;for(d=103577;103580>=
d;d++)a[d]=0;for(d=103581;103583>=d;d++)a[d]=2;for(d=103595;103597>=d;d++)a[d]=0;for(d=103600;103694>=d;d++)a[d]=0;for(d=103696;103698>=d;d++)a[d]=0;for(d=103700;103793>=d;d++)a[d]=2;for(d=103794;103871>=d;d++)a[d]=0;for(d=103900;103971>=d;d++)a[d]=2;return a})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Geometry ./SpatialReference ./support/offset ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var n=[0,0],r=k.getLogger("esri.geometry.Point");d=function(a){function h(b,c,f,e,h){b=a.call(this)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}l(h,a);d=h;h.copy=function(a,b){b._set("x",a._get("x"));b._set("y",a._get("y"));b._set("z",a._get("z"));b._set("m",a._get("m"));a=a._get("spatialReference");b._set("spatialReference",Object.isFrozen(a)?a:a.clone())};
h.distance=function(a,b){var c=a.x-b.x,f=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+f*f+a*a)};h.prototype.normalizeCtorArgs=function(a,b,c,f,e){var h;if(Array.isArray(a))h=a,e=b,a=h[0],b=h[1],c=h[2],f=h[3];else if(a&&"object"===typeof a){if(h=a,a=null!=h.x?h.x:h.longitude,b=null!=h.y?h.y:h.latitude,c=null!=h.z?h.z:h.altitude,f=h.m,(e=h.spatialReference)&&"esri.geometry.SpatialReference"!==e.declaredClass&&(e=new m(e)),null!=h.longitude||null!=h.latitude)null==h.longitude?r.warn(".longitude\x3d",
"Latitude was defined without longitude"):null==h.latitude?r.warn(".latitude\x3d","Longitude was defined without latitude"):!h.declaredClass&&e&&e.isWebMercator&&(b=p.lngLatToXY(h.longitude,h.latitude,n),a=b[0],b=b[1])}else u(c)?(e=c,c=null):u(f)&&(e=f,f=null);a={x:a,y:b};null==a.x&&null!=a.y?r.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&r.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=e&&(a.spatialReference=e);null!=c&&(a.z=c);null!=
f&&(a.m=f);return a};Object.defineProperty(h.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){a!==this.hasM&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){a!==this.hasZ&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"latitude",{get:function(){var a=this._get("spatialReference");
if(a){if(a.isWebMercator)return p.xyToLngLat(this.x,this.y,n)[1];if(a.isGeographic)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",p.lngLatToXY(this.x,a,n)[1]):b.isGeographic&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return p.xyToLngLat(this._get("x"),this._get("y"),n)[0];
if(a.isGeographic)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",p.lngLatToXY(a,this._get("y"),n)[0]):b.isGeographic&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});h.prototype.writeX=function(a,b,c){b[c]=isNaN(a)?"NaN":a};h.prototype.readX=function(a){return"string"===typeof a?NaN:a};h.prototype.clone=function(){var a=new d;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;
return a};h.prototype.copy=function(a){d.copy(a,this);return this};h.prototype.equals=function(a){var b;if(!a)return!1;var c=this.x,f=this.y,e=this.z,h=this.m,m=this.spatialReference,n=a.z,d=a.m,g=a.x;b=a.y;a=a.spatialReference;if(!m.equals(a))if(m.isWebMercator&&a.isWGS84)b=p.lngLatToXY(g,b),g=b[0],b=b[1],a=m;else if(m.isWGS84&&a.isWebMercator)b=p.xyToLngLat(g,b),g=b[0],b=b[1],a=m;else return!1;return c===g&&f===b&&e===n&&h===d&&m.wkid===a.wkid};h.prototype.offset=function(a,c,f){return b.offsetPoint(this,
a,c,f)};h.prototype.normalize=function(){if(!this.spatialReference)return this;var a=f.getInfo(this.spatialReference);if(!a)return this;var b=this.x,c=a.valid,a=c[0],e=c[1],c=2*e;b>e?(a=Math.ceil(Math.abs(b-e)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};h.prototype.distance=function(a){return d.distance(this,a)};h.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:
[this.x,this.y]};h.prototype.toJSON=function(a){return this.write(null,a)};var d;g([e.property({dependsOn:["x","y","z","m","spatialReference"]})],h.prototype,"cache",void 0);g([e.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasM",null);g([e.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasZ",null);g([e.property({type:Number,dependsOn:["y"]})],h.prototype,"latitude",null);
g([e.property({type:Number,dependsOn:["x"]})],h.prototype,"longitude",null);g([e.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),e.cast(function(a){return isNaN(a)?a:c.ensureNumber(a)})],h.prototype,"x",void 0);g([e.writer("x")],h.prototype,"writeX",null);g([e.reader("x")],h.prototype,"readX",null);g([e.property({type:Number,json:{write:!0}})],h.prototype,"y",void 0);g([e.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],
h.prototype,"z",void 0);g([e.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],h.prototype,"m",void 0);return h=d=g([e.subclass("esri.geometry.Point")],h)}(e.declared(h));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/support/offset":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.offsetPoint=function(a,d,k,e){a.x+=d;a.y+=k;null!=e&&null!=a.z&&(a.z+=e);return a};a.offsetCoordsX=function(a,
d){a[0]+=d;return a}})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(d,a,l,g,k,e){function c(a,b,c,f,e){var h;if("x"in a&&"x"in e)b=b(a.x,a.y,u,f),e.x=b[0],e.y=b[1];else if("xmin"in a&&"xmin"in e)h=b(a.xmin,a.ymin,u,f),e.xmin=h[0],e.ymin=h[1],b=b(a.xmax,a.ymax,u,f),e.xmax=b[0],e.ymax=b[1];else if("paths"in a&&"paths"in e||"rings"in a&&"rings"in e){h="paths"in a?
a.paths:a.rings;var m=[],d=void 0;for(a=0;a<h.length;a++){var p=h[a],d=[];m.push(d);for(var n=0;n<p.length;n++)d.push(b(p[n][0],p[n][1],[0,0],f)),2<p[n].length&&d[n].push(p[n][2]),3<p[n].length&&d[n].push(p[n][3])}"paths"in e?e.paths=m:e.rings=m}else if("points"in a&&"points"in e){h=a.points;m=[];for(a=0;a<h.length;a++)m[a]=b(h[a][0],h[a][1],[0,0],f),2<h[a].length&&m[a].push(h[a][2]),3<h[a].length&&m[a].push(h[a][3]);e.points=m}else if("type"in a&&"mesh"===a.type&&"type"in e&&"mesh"===e.type&&(h=
a.vertexAttributes&&a.vertexAttributes.position,m=e.vertexAttributes&&e.vertexAttributes.position,h))for(d=[0,0],a=0;a<h.length;a+=3)b(h[a],h[a+1],d,f),m[a]=d[0],m[a+1]=d[1];e.spatialReference=c;return e}function h(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?e.equals(b,a)?!0:e.isWebMercator(b)&&e.isWGS84(a)||e.isWebMercator(a)&&e.isWGS84(b):!1}function m(a,b,c){void 0===c&&(c=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&
(b=-89.99999);b*=.017453292519943;c[0]=.017453292519943*a*f;c[1]=p*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function b(a,b,c,e){void 0===c&&(c=[0,0]);void 0===e&&(e=!1);a=a/f*57.29577951308232;c[0]=e?a:a-360*Math.floor((a+180)/360);c[1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*b/f)));return c}Object.defineProperty(a,"__esModule",{value:!0});var f=g.wgs84Radius,p=f/2,u=[0,0];a.canProject=h;a.project=function(a,f){var d=a&&a.spatialReference;f=f&&(null!=f.wkid||null!=f.wkt?f:f.spatialReference);
return h(d,f)?e.equals(d,f)?l.clone(a):e.isWebMercator(f)?c(a,m,k.WebMercator,!1,l.clone(a)):e.isWGS84(f)?c(a,b,k.WGS84,!1,l.clone(a)):null:null};a.lngLatToXY=m;a.xyToLngLat=b;a.geographicToWebMercator=function(a,b,f){void 0===b&&(b=!1);void 0===f&&(f=l.clone(a));return c(a,m,k.WebMercator,b,f)};a.webMercatorToGeographic=function(a,f,e){void 0===f&&(f=!1);void 0===e&&(e=l.clone(a));return c(a,b,k.WGS84,f,e)}})},"esri/core/wgs84Constants":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,
"__esModule",{value:!0});a.wgs84Radius=6378137;a.wgs84InverseFlattening=298.257223563;a.wgs84Flattening=1/a.wgs84InverseFlattening;a.wgs84PolarRadius=a.wgs84Radius*(1-a.wgs84Flattening);a.wgs84Eccentricity=.0818191908426215})},"esri/geometry/support/contains":function(){define(["require","exports"],function(d,a){function l(a,c){return g(a,c[0],c[1])}function g(a,c,b,f){return c>=a.xmin&&c<=a.xmax&&b>=a.ymin&&b<=a.ymax?null!=f&&a.hasZ?f>=a.zmin&&f<=a.zmax:!0:!1}function k(a,c){if(a=a.rings)if(Array.isArray(a[0][0])){for(var b=
!1,f=0,h=a.length;f<h;f++)b=e(b,a[f],c);c=b}else c=e(!1,a,c);else c=!1;return c}function e(a,c,b){var f=b[0];b=b[1];for(var e=0,h=0,m=c.length;h<m;h++){e++;e===m&&(e=0);var d=c[h],g=d[0],d=d[1],k=c[e],y=k[0],k=k[1];(d<b&&k>=b||k<b&&d>=b)&&g+(b-d)/(k-d)*(y-g)<f&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});var c=[0,0];a.extentContainsPoint=function(a,c){return g(a,c.x,c.y,c.z)};a.extentContainsMultipoint=function(a,c){if(!c.points||c.points.length)return!1;var b=0;for(c=c.points;b<
c.length;b++)if(!l(a,c[b]))return!1;return!0};a.extentContainsExtent=function(a,c){var b=c.xmin,f=c.ymin,e=c.zmin,h=c.xmax,d=c.ymax,m=c.zmax;return a.hasZ&&c.hasZ?g(a,b,f,e)&&g(a,b,d,e)&&g(a,h,d,e)&&g(a,h,f,e)&&g(a,b,f,m)&&g(a,b,d,m)&&g(a,h,d,m)&&g(a,h,f,m):g(a,b,f)&&g(a,b,d)&&g(a,h,d)&&g(a,h,f)};a.extentContainsCoords2D=l;a.extentContainsCoords3D=function(a,c){return g(a,c[0],c[1],c[2])};a.polygonContainsPoint=function(a,e){c[1]=e.y;c[0]=e.x;return k(a,c)};a.polygonContainsCoords=k})},"esri/geometry/support/intersects":function(){define(["require",
"exports","./contains"],function(d,a,l){function g(a,b){return l.extentContainsPoint(a,b)}function k(a,b){var c=a.hasZ&&b.hasZ,f;if(a.xmin<=b.xmin){if(f=b.xmin,a.xmax<f)return!1}else if(f=a.xmin,b.xmax<f)return!1;if(a.ymin<=b.ymin){if(f=b.ymin,a.ymax<f)return!1}else if(f=a.ymin,b.ymax<f)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function e(a,b){var c=b.hasZ?l.extentContainsCoords3D:l.extentContainsCoords2D,f=0;for(b=b.points;f<
b.length;f++)if(c(a,b[f]))return!0;return!1}function c(a,b){f[0]=a.xmin;f[1]=a.ymax;p[0]=a.xmax;p[1]=a.ymax;u[0]=a.xmin;u[1]=a.ymin;n[0]=a.xmax;n[1]=a.ymin;for(var c=0,e=r;c<e.length;c++)if(l.polygonContainsCoords(b,e[c]))return!0;c=0;for(b=b.rings;c<b.length;c++)if(e=b[c],e.length){var h=e[0];if(l.extentContainsCoords2D(a,h))return!0;for(var d=1;d<e.length;d++){var g=e[d];if(l.extentContainsCoords2D(a,g)||m(h,g,w))return!0;h=g}}return!1}function h(a,b){f[0]=a.xmin;f[1]=a.ymax;p[0]=a.xmax;p[1]=a.ymax;
u[0]=a.xmin;u[1]=a.ymin;n[0]=a.xmax;n[1]=a.ymin;b=b.paths;for(var c=0;c<b.length;c++){var e=b[c];if(b.length){var h=e[0];if(l.extentContainsCoords2D(a,h))return!0;for(var d=1;d<e.length;d++){var g=e[d];if(l.extentContainsCoords2D(a,g)||m(h,g,w))return!0;h=g}}}return!1}function m(a,c,f){for(var e=0;e<f.length;e++)if(b(a,c,f[e][0],f[e][1]))return!0;return!1}function b(a,b,c,f,e){var h=a[0];a=a[1];var d=b[0];b=b[1];var m=c[0],p=c[1];c=f[0]-m;var m=h-m,n=d-h;f=f[1]-p;var p=a-p,g=b-a,r=f*n-c*g;if(0===
r)return!1;c=(c*p-f*m)/r;m=(n*p-g*m)/r;return 0<=c&&1>=c&&0<=m&&1>=m?(e&&(e[0]=h+c*(d-h),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=g;a.extentIntersectsExtent=k;a.extentIntersectsMultipoint=e;var f=[0,0],p=[0,0],u=[0,0],n=[0,0],r=[f,p,u,n],w=[[u,f],[f,p],[p,n],[n,u]];a.extentIntersectsPolygon=c;a.extentIntersectsPolyline=h;var t=[0,0];a.isSelfIntersecting=function(a){for(var c=0;c<a.length;c++){for(var f=a[c],e=0;e<f.length-1;e++)for(var h=f[e],
d=f[e+1],m=c+1;m<a.length;m++)for(var p=0;p<a[m].length-1;p++){var n=a[m][p],g=a[m][p+1],r=b(h,d,n,g,t);if(r&&!(t[0]===h[0]&&t[1]===h[1]||t[0]===n[0]&&t[1]===n[1]||t[0]===d[0]&&t[1]===d[1]||t[0]===g[0]&&t[1]===g[1]))return!0}p=f.length;if(!(4>=p))for(e=0;e<p-3;e++){var k=p-1;0===e&&(k=p-2);h=f[e];d=f[e+1];for(m=e+2;m<k;m++)if(n=f[m],g=f[m+1],(r=b(h,d,n,g,t))&&!(t[0]===h[0]&&t[1]===h[1]||t[0]===n[0]&&t[1]===n[1]||t[0]===d[0]&&t[1]===d[1]||t[0]===g[0]&&t[1]===g[1]))return!0}}return!1};a.segmentIntersects=
b;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return k;case "esriGeometryMultipoint":case "multipoint":return e;case "esriGeometryPoint":case "point":return g;case "esriGeometryPolygon":case "polygon":return c;case "esriGeometryPolyline":case "polyline":return h;case "mesh":return k}}})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b){function f(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}d=function(a){function h(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}l(h,a);d=h;h.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(h.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new c,e=this.hasZ,h=this.hasM,d=e?3:2,m=a[0],p=f(Math.min),n=f(Math.max),g=m[0],k=m[1],u=m[0],m=m[1],l,H,G,J,K=0,I=a.length;K<I;K++){var M=
a[K],O=M[0],Q=M[1],g=p(g,O),k=p(k,Q),u=n(u,O),m=n(m,Q);e&&2<M.length&&(O=M[2],l=p(l,O),G=n(G,O));h&&M.length>d&&(M=M[d],H=p(H,M),J=n(J,M))}b.xmin=g;b.ymin=k;b.xmax=u;b.ymax=m;b.spatialReference=this.spatialReference;e?(b.zmin=l,b.zmax=G):(b.zmin=null,b.zmax=null);h?(b.mmin=H,b.mmax=J):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});h.prototype.writePoints=function(a,b,c,f){b.points=k.clone(this.points)};h.prototype.addPoint=function(a){this.clearCache();b.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};h.prototype.clone=function(){var a={points:k.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new d(a)};h.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new m(b)};h.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new m(this.points.splice(a,1)[0],this.spatialReference)};h.prototype.setPoint=function(a,c){if(!this._validateInputs(a))return this;this.clearCache();b.updateSupportFromPoint(c);this.points[a]=c.toArray();return this};h.prototype.toJSON=function(a){return this.write(null,a)};h.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var d;g([e.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],h.prototype,"cache",void 0);g([e.property({dependsOn:["cache"]})],
h.prototype,"extent",null);g([e.property({type:[[Number]],json:{write:{isRequired:!0}}})],h.prototype,"points",void 0);g([e.writer("points")],h.prototype,"writePoints",null);return h=d=g([e.subclass("esri.geometry.Multipoint")],h)}(e.declared(h));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,d,k){void 0===k&&(k=!1);var e=a.hasM,
c=a.hasZ;Array.isArray(d)?4!==d.length||e||c?3===d.length&&k&&!e?(c=!0,e=!1):3===d.length&&e&&c&&(c=e=!1):c=e=!0:(c=!c&&d.hasZ&&(!e||d.hasM),e=!e&&d.hasM&&(!c||d.hasZ));a.hasZ=c;a.hasM=e}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y){d=function(a){function d(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}l(d,a);m=d;d.createEllipse=function(a){var b=a.center.x,c=a.center.y,f=a.center.z,h=a.center.m,d=a.center.hasZ,p=a.center.hasM,n=a.longAxis,g=a.shortAxis,r=a.numberOfPoints;a=a.view;for(var k=[],u=2*Math.PI/r,t=d?3:2,y=0;y<r;y++){var w=a.toMap(e.createScreenPoint(n*Math.cos(y*u)+b,g*Math.sin(y*u)+c)),w=[w.x,w.y];d&&(w[2]=f);p&&(w[t]=
h);k.push(w)}k.push(k[0]);return new m({rings:[k],spatialReference:a.spatialReference})};d.createCircle=function(a){return m.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};d.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,f=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(f=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var e=
a.zmin+.5*(a.zmax-a.zmin),h=0;h<b.length;h++)b[h].push(e);if(f&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),h=0;h<b.length;h++)b[h].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);f&&(b.hasM=!0);return new m(b)};d.prototype.normalizeCtorArgs=function(a,b){var c=null,e,h,d=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),e=a.hasZ,h=a.hasM):c=a;c=c||[];b=b||f.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(d=c[0]&&
c[0][0])void 0===e&&void 0===h?(e=2<d.length,h=!1):void 0===e?e=!h&&3<d.length:void 0===h&&(h=!e&&3<d.length);return{rings:c,spatialReference:b,hasZ:e,hasM:h}};Object.defineProperty(d.prototype,"centroid",{get:function(){var a=p.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var c=new b;c.x=a[0];c.y=a[1];c.spatialReference=this.spatialReference;this.hasZ&&(c.z=a[2]);return c},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){var a=
this.spatialReference,b=r.getPolygonExtent(this);if(!b)return null;b=new h(b);b.spatialReference=a;return b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isSelfIntersecting",{get:function(){return w.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});d.prototype.writePaths=function(a,b,c,f){b.rings=k.clone(this.rings)};d.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var f=[],e=0,h=
a.length;e<h;e++)f[e]=a[e].toArray();b[c]=f}return this}};d.prototype.clone=function(){var a=new m;a.spatialReference=this.spatialReference;a.rings=k.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};d.prototype.contains=function(a){if(!a)return!1;t.canProject(a,this.spatialReference)&&(a=t.project(a,this.spatialReference));return u.polygonContainsPoint(this,a)};d.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:
[a.x,a.y,a.z]:[a.x,a.y]});return n.isClockwise(a,this.hasM,this.hasZ)};d.prototype.getPoint=function(a,c){if(!this._validateInputs(a,c))return null;a=this.rings[a][c];c=this.hasZ;var f=this.hasM;return c&&!f?new b(a[0],a[1],a[2],void 0,this.spatialReference):f&&!c?new b(a[0],a[1],void 0,a[2],this.spatialReference):c&&f?new b(a[0],a[1],a[2],a[3],this.spatialReference):new b(a[0],a[1],this.spatialReference)};d.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();
y.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};d.prototype.removePoint=function(a,c){if(!this._validateInputs(a,c))return null;this.clearCache();return new b(this.rings[a].splice(c,1)[0],this.spatialReference)};d.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var c=this.spatialReference;return a.map(function(a){return new b(a,c)})};d.prototype.setPoint=function(a,
b,c){if(!this._validateInputs(a,b))return this;this.clearCache();y.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};d.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};d.prototype.toJSON=function(a){return this.write(null,a)};var m;g([c.property({dependsOn:["hasM","hasZ","rings"]})],d.prototype,"cache",void 0);g([c.property({readOnly:!0,
dependsOn:["cache"]})],d.prototype,"centroid",null);g([c.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"extent",null);g([c.property({dependsOn:["cache"],readOnly:!0})],d.prototype,"isSelfIntersecting",null);g([c.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"rings",void 0);g([c.writer("rings")],d.prototype,"writePaths",null);return d=m=g([c.subclass("esri.geometry.Polygon")],d)}(c.declared(m));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/core/screenUtils":function(){define(["require",
"exports","./compilerUtils"],function(d,a,l){function g(b){return b?72*b/a.DPI:0}function k(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return{x:a,y:b}}function e(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return[a,b]}function c(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return{x:a,y:b}}function h(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return[a,b]}function m(a,b){return b?(b[0]=a.x,b[1]=a.y,2<b.length&&(b[2]=0),b):[a.x,a.y]}function b(a){return k(a.x,a.y)}function f(a,b){a=(a instanceof HTMLElement?a:
a.surface).getBoundingClientRect();return k(b.clientX-a.left,b.clientY-a.top)}Object.defineProperty(a,"__esModule",{value:!0});var p=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(b){return b?b/72*a.DPI:0};a.px2pt=g;a.toPt=function(a){if("string"===typeof a){if(p.test(a)){var b=a.match(p),c=Number(b[1]),b=b[3]&&b[3].toLowerCase();a="-"===a.charAt(0);c="px"===b?g(c):c;return a?-c:c}console.warn("screenUtils.toPt: input not recognized!");return null}return a};a.createScreenPoint=k;a.createScreenPointArray=
e;a.createRenderScreenPoint=c;a.createRenderScreenPointArray=h;a.createRenderScreenPointArray3=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return[a,b,c]};a.castRenderScreenPointArray=function(a){return a};a.castRenderScreenPointArray3=function(a){return a};a.castScreenPointArray=function(a){return a};a.screenToRender=function(a,b,f){var e,h;switch(a.type){case "2d":a=window.devicePixelRatio||1;e=b.x*a;h=b.y*a;break;case "3d":m(b,n),a.state.camera.screenToRender(n,u),e=u[0],
h=u[1]}return f?(f.x=e,f.y=h,f):c(e,h)};a.renderToScreen=function(a,b,c){var f,e;switch(a.type){case "2d":a=window.devicePixelRatio||1;f=b.x/a;e=b.y/a;break;case "3d":m(b,u),a.state.camera.renderToScreen(u,n),f=n[0],e=n[1]}return c?(c.x=f,c.y=e,c):k(f,e)};a.screenArrayToRender=function(a,b,c){var f,e;switch(a.type){case "2d":a=window.devicePixelRatio||1;f=b[0]*a;e=b[1]*a;break;case "3d":a.state.camera.screenToRender(b,u),f=u[0],e=u[1]}return c?(c[0]=f,c[1]=e,2<c.length&&(c[2]=0),c):h(f,e)};a.renderArrayToScreen=
function(a,b,c){var f,h;switch(a.type){case "2d":a=window.devicePixelRatio||1;f=b[0]/a;h=b[0]/a;break;case "3d":a.state.camera.renderToScreen(b,n),f=n[0],h=n[1]}return c?(c[0]=f,c[1]=h,c):e(f,h)};a.screenPointArrayToObject=function(a,b){return b?(b.x=a[0],b.y=a[1],b):{x:a[0],y:a[1]}};a.screenPointObjectToArray=m;a.createScreenPointFromEvent=b;a.createScreenPointFromNativeEvent=f;a.createScreenPointFromSupportedEvent=function(a,c){return c instanceof Event?f(a,c):b(c)};a.isSupportedScreenPointEvent=
function(a){if(a instanceof Event)return!0;if("object"===typeof a&&"type"in a)switch(a=a.type,a){case "click":case "double-click":case "pointer-down":case "pointer-drag":case "pointer-enter":case "pointer-leave":case "pointer-up":case "pointer-move":case "immediate-click":case "hold":case "drag":case "mouse-wheel":return!0;case "key-down":case "key-up":case "gamepad":case "focus":case "blur":break;default:l.neverReachedSilent(a)}return!1};var u=h(),n=e()})},"esri/core/compilerUtils":function(){define(["require",
"exports","./has"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.neverReached=function(a){};a.neverReachedSilent=function(a){};a.typeCast=function(a){return function(){return a}};a.tuple=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return a}})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(d,a,l){function g(a,h){if(!a||!a.length)return null;for(var c=[],b=[],f=h?[Infinity,-Infinity,Infinity,-Infinity,
Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],d=0,g=a.length;d<g;d++){var n=k(a[d],h,f);n&&b.push(n)}b.sort(function(a,b){var c=a[2]-b[2];0===c&&h&&(c=a[4]-b[4]);return c});b.length&&(d=6*b[0][2],c[0]=b[0][0]/d,c[1]=b[0][1]/d,h&&(d=6*b[0][4],c[2]=0!==d?b[0][3]/d:0),c[0]<f[0]||c[0]>f[1]||c[1]<f[2]||c[1]>f[3]||h&&(c[2]<f[4]||c[2]>f[5]))&&(c.length=0);if(!c.length)if(a=a[0]&&a[0].length?e(a[0],h):null)c[0]=a[0],c[1]=a[1],h&&2<a.length&&(c[2]=a[2]);else return null;return c}function k(a,
e,d){for(var b=0,c=0,h=0,m=0,n=0,g=0,k=a.length-1;g<k;g++){var t=a[g],y=t[0],x=t[1],l=t[2],z=a[g+1],C=z[0],D=z[1],B=z[2],E=y*D-C*x,m=m+E,b=b+(y+C)*E,c=c+(x+D)*E;e&&2<t.length&&2<z.length&&(E=y*B-C*l,h+=(l+B)*E,n+=E);y<d[0]&&(d[0]=y);y>d[1]&&(d[1]=y);x<d[2]&&(d[2]=x);x>d[3]&&(d[3]=x);e&&(l<d[4]&&(d[4]=l),l>d[5]&&(d[5]=l))}0<m&&(m*=-1);0<n&&(n*=-1);if(!m)return null;a=[b,c,.5*m];e&&(a[3]=h,a[4]=.5*n);return a}function e(a,e){for(var c=e?[0,0,0]:[0,0],b=e?[0,0,0]:[0,0],f=0,h=0,d=0,n=0,g=0,k=a.length;g<
k-1;g++){var t=a[g],y=a[g+1];if(t&&y){c[0]=t[0];c[1]=t[1];b[0]=y[0];b[1]=y[1];e&&2<t.length&&2<y.length&&(c[2]=t[2],b[2]=y[2]);var x=l.getLength(c,b);x&&(f+=x,t=l.getMidpoint(t,y),h+=x*t[0],d+=x*t[1],e&&2<t.length&&(n+=x*t[2]))}}return 0<f?e?[h/f,d/f,n/f]:[h/f,d/f]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?
g(a.rings,a.hasZ):null};a.ringsCentroid=g;a.lineCentroid=e})},"esri/geometry/support/coordsUtils":function(){define(["require","exports","./spatialReferenceUtils"],function(d,a,l){function g(a,e){var c=e[0]-a[0],b=e[1]-a[1];return 2<a.length&&2<e.length?(a=a[2]-e[2],Math.sqrt(c*c+b*b+a*a)):Math.sqrt(c*c+b*b)}function k(a,e,d){var b=a[0]+d*(e[0]-a[0]),c=a[1]+d*(e[1]-a[1]);return 2<a.length&&2<e.length?[b,c,a[2]+d*(e[2]-a[2])]:[b,c]}function e(a,e){if(e=l.getInfo(e)){var c=e.valid[0],b=e.valid[1],f=
b-c;e=function(a){var e=Infinity,h=-Infinity;a.forEach(function(a){for(var d=a[0];d<c;)d+=f;for(;d>b;)d-=f;e=Math.min(e,d);h=Math.max(h,d);a[0]=d});var d=h-e;f-d<d&&a.forEach(function(a){0>a[0]&&(a[0]+=f)})};for(var h=0;h<a.length;h++)e(a[h])}}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var c=a.hasZ,e=a.hasM;if("point"===a.type)return e&&c?[a.x,a.y,a.z,a.m]:c?[a.x,a.y,a.z]:e?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===
a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var b=!1,f=!1;a.forEach(function(a){a.hasZ&&(b=!0);a.hasM&&(f=!0)});return a.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(b&&a.hasZ)for(var e=.5*(a.zmax-a.zmin),h=0;h<c.length;h++)c[h].push(e);if(f&&a.hasM)for(a=.5*(a.mmax-a.mmin),h=0;h<c.length;h++)c[h].push(a);
return c})}return null};a.getLength=g;a.getMidpoint=function(a,e){return k(a,e,.5)};a.getPathLength=function(a){for(var c=a.length,e=0,b=0;b<c-1;++b)e+=g(a[b],a[b+1]);return e};a.getPointOnPath=function(a,e){if(0>=e)return a[0];for(var c=a.length,b=0,f=0;f<c-1;++f){var h=g(a[f],a[f+1]);if(e-b<h)return k(a[f],a[f+1],(e-b)/h);b+=h}return a[c-1]};a.isClockwise=function(a,e,d){for(var b=a.length,c=0,h=0,m=0,n=0;n<b;n++){var g=a[n],k=a[(n+1)%b],t=2,c=c+(g[0]*k[1]-k[0]*g[1]);2<g.length&&2<k.length&&d&&
(h+=g[0]*k[2]-k[0]*g[2],t=3);g.length>t&&k.length>t&&e&&(m+=g[0]*k[t]-k[0]*g[t])}return 0>=c&&0>=h&&0>=m};a.getRingArea=function(a){for(var c=a.length,e=0,b=0;b<c;b++)var f=a[b],d=a[(b+1)%c],e=e+(f[0]*d[1]-d[0]*f[1]);return e};a.unnormalizeGeometryOnDatelineCrossing=function(a){if("polygon"!==a.type&&"polyline"!==a.type)return a;e("polygon"===a.type?a.rings:a.paths,a.spatialReference);return a};a.unnormalizeVerticesOnDatelineCrossing=e;a.computeUnnormalizedVertexPositionsOnDateLineCrossing=function(a,
e,d,b){var c=Infinity,h=-Infinity;a.forEach(function(a){for(var f=a.pos[0];f<e;)f+=b;for(;f>d;)f-=b;c=Math.min(c,f);h=Math.max(h,f);a.unnormalizedPos[0]=f;a.unnormalizedPos[1]=a.pos[1]});var m=h-c;b-m<m&&a.forEach(function(a){0>a.unnormalizedPos[0]&&(a.unnormalizedPos[0]+=b)})}})},"esri/geometry/support/extentUtils":function(){define(["require","exports","./boundsUtils"],function(d,a,l){function g(a,c,e){void 0===c&&(c=!1);void 0===e&&(e=!1);return c?e?{xmin:a[0],ymin:a[1],zmin:a[2],mmin:a[3],xmax:a[4],
ymax:a[5],zmax:a[6],mmax:a[7]}:{xmin:a[0],ymin:a[1],zmin:a[2],xmax:a[3],ymax:a[4],zmax:a[5]}:e?{xmin:a[0],ymin:a[1],mmin:a[2],xmax:a[3],ymax:a[4],mmax:a[5]}:{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3]}}function k(a){var b=a.hasZ,c=a.hasM;return g(l.getPointsBounds(m,a.points,b,c),b,c)}function e(a){var b=a.x,c=a.y,e=a.z;a=a.m;var h=null!=a;return null!=e?h?{xmin:b,ymin:c,zmin:e,mmin:a,xmax:b,ymax:c,zmax:e,mmax:a}:{xmin:b,ymin:c,zmin:e,xmax:b,ymax:c,zmax:e}:h?{xmin:b,ymin:c,mmin:a,xmax:b,ymax:c,mmax:a}:
{xmin:b,ymin:c,xmax:b,ymax:c}}function c(a){var b=a.hasZ,c=a.hasM;return(a=l.getRingsOrPathsBounds(m,a.rings,b,c))?g(a,b,c):null}function h(a){var b=a.hasZ,c=a.hasM;return(a=l.getRingsOrPathsBounds(m,a.paths,b,c))?g(a,b,c):null}Object.defineProperty(a,"__esModule",{value:!0});var m=[];a.getGeometryExtent=function(a){return a?void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax?a:void 0!==a.x&&void 0!==a.y?e(a):void 0!==a.rings?c(a):void 0!==a.paths?h(a):void 0!==a.points?k(a):null:null};
a.getMultipointExtent=k;a.getPointExtent=e;a.getPolygonExtent=c;a.getPolylineExtent=h})},"esri/geometry/support/boundsUtils":function(){define(["require","exports"],function(d,a){function l(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}function g(a,b,f,e){var d=f?3:2;if(!b.length||!b[0].length)return null;for(var m=b[0][0],p=m[0],m=m[1],g=b[0][0],k=g[0],g=g[1],y=void 0,x=void 0,l=void 0,z=void 0,C=0;C<b.length;C++)for(var D=b[C],B=0;B<D.length;B++){var E=D[B],F=E[0],H=E[1],p=c(p,F),m=
c(m,H),k=h(k,F),g=h(g,H);f&&2<E.length&&(F=E[2],y=c(y,F),x=h(x,F));e&&E.length>d&&(z=E[d],l=c(y,z),z=h(x,z))}if(f){if(e)return a[0]=p,a[1]=m,a[2]=y,a[3]=l,a[4]=k,a[5]=g,a[6]=x,a[7]=z,a.length=8,a;a[0]=p;a[1]=m;a[2]=y;a[3]=k;a[4]=g;a[5]=x;a.length=6;return a}if(e)return a[0]=p,a[1]=m,a[2]=l,a[3]=k,a[4]=g,a[5]=z,a.length=6,a;a[0]=p;a[1]=m;a[2]=k;a[3]=g;a.length=4;return a}function k(a,b,c,e,h,d){c=b.xmin;e=b.xmax;var f=b.ymin,m=b.ymax,n=b.zmin,p=b.zmax,g=b.mmin;b=b.mmax;if(h){n=n||0;p=p||0;if(d)return a[0]=
c,a[1]=f,a[2]=n,a[3]=g||0,a[4]=e,a[5]=m,a[6]=p,a[7]=b||0,a;a[0]=c;a[1]=f;a[2]=n;a[3]=e;a[4]=m;a[5]=p;return a}if(d)return a[0]=c,a[1]=f,a[2]=g||0,a[3]=e,a[4]=m,a[5]=b||0,a;a[0]=c;a[1]=f;a[2]=e;a[3]=m;return a}function e(a,b,f,e,d,n){var m=f?3:2;e=e&&n;f=f&&d;if(!b.length||!b[0].length)return null;for(var p=b[0],g=p[0],p=p[1],k=b[0],u=k[0],k=k[1],l=void 0,z=void 0,C=void 0,D=void 0,B=0;B<b.length;B++){var E=b[B],F=E[0],H=E[1],g=c(g,F),p=c(p,H),u=h(u,F),k=h(k,H);f&&2<E.length&&(F=E[2],l=c(l,F),z=h(z,
F));e&&E.length>m&&(D=E[m],C=c(l,D),D=h(z,D))}if(d){l=l||0;z=z||0;if(n)return a[0]=g,a[1]=p,a[2]=l,a[3]=C||0,a[4]=u,a[5]=k,a[6]=z,a[7]=D||0,a;a[0]=g;a[1]=p;a[2]=l;a[3]=u;a[4]=k;a[5]=z;return a}if(n)return a[0]=g,a[1]=p,a[2]=C||0,a[3]=u,a[4]=k,a[5]=D||0,a;a[0]=g;a[1]=p;a[2]=u;a[3]=k;return a}Object.defineProperty(a,"__esModule",{value:!0});var c=l(Math.min),h=l(Math.max);a.getBoundsXY=function(a,b){if(void 0!==b.paths)return g(a,b.paths,!1,!1);if(void 0!==b.rings)return g(a,b.rings,!1,!1);if(void 0!==
b.points)return e(a,b.points,!1,!1,!1,!1);if(void 0!==b.xmin&&void 0!==b.ymin&&void 0!==b.xmax&&void 0!==b.ymax)return k(a,b);void 0!==b.x&&void 0!==b.y&&(a[0]=b.x,a[1]=b.y,a[2]=b.x,a[3]=b.y);return a};a.getRingsOrPathsBounds=g;a.getExtentBounds=k;a.getPointsBounds=e;a.getPointsBoundsWidth=function(a){if(!a.length||!a[0].length)return null;for(var b=a[0][0],f=a[0][0],e=0;e<a.length;e++)var d=a[e][0],b=c(b,d),f=h(f,d);return f-b};a.getPointsBoundsCenterX=function(a){if(!a.length||!a[0].length)return null;
for(var b=a[0][0],f=a[0][0],e=0;e<a.length;e++)var d=a[e][0],b=c(b,d),f=h(f,d);return b+.5*(f-b)}})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/extentUtils ./support/zmUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p){d=function(a){function h(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.paths=
[];b.type="polyline";return b}l(h,a);d=h;h.prototype.normalizeCtorArgs=function(a,c){var f=null,e,h,d=null;a&&!Array.isArray(a)?(f=a.paths?a.paths:null,c||(a.spatialReference?c=a.spatialReference:a.paths||(c=a)),e=a.hasZ,h=a.hasM):f=a;f=f||[];c=c||b.WGS84;f.length&&f[0]&&null!=f[0][0]&&"number"===typeof f[0][0]&&(f=[f]);if(d=f[0]&&f[0][0])void 0===e&&void 0===h?(e=2<d.length,h=!1):void 0===e?e=!h&&3<d.length:void 0===h&&(h=!e&&3<d.length);return{paths:f,spatialReference:c,hasZ:e,hasM:h}};Object.defineProperty(h.prototype,
"extent",{get:function(){var a=this.spatialReference,b=f.getPolylineExtent(this);if(!b)return null;b=new c(b);b.spatialReference=a;return b},enumerable:!0,configurable:!0});h.prototype.writePaths=function(a,b,c,f){b.paths=k.clone(this.paths)};h.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var f=[],e=0,h=a.length;e<h;e++)f[e]=a[e].toArray();b[c]=f}return this}};h.prototype.clone=function(){var a=new d;a.spatialReference=
this.spatialReference;a.paths=k.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};h.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new m(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new m(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new m(a[0],a[1],a[2],a[3],this.spatialReference):new m(a[0],a[1],this.spatialReference)};h.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,
!0))return this;this.clearCache();p.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};h.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new m(a,b)})};h.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new m(this.paths[a].splice(b,1)[0],this.spatialReference)};
h.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();p.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};h.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};h.prototype.toJSON=function(a){return this.write(null,a)};var d;g([e.property({dependsOn:["hasM","hasZ","paths"]})],h.prototype,
"cache",void 0);g([e.property({dependsOn:["cache"],readOnly:!0})],h.prototype,"extent",null);g([e.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],h.prototype,"paths",void 0);g([e.writer("paths")],h.prototype,"writePaths",null);return h=d=g([e.subclass("esri.geometry.Polyline")],h)}(e.declared(h));d.prototype.toJSON.isDefaultToJSON=!0;return d})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Geometry ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(d,a,l,g,k,e,c,h){function m(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function b(a){return void 0!==a.points}function f(a){return void 0!==a.x&&void 0!==a.y}function p(a){return void 0!==a.paths}function u(a){return void 0!==a.rings}function n(a){return a?a instanceof g?a:f(a)?e.fromJSON(a):p(a)?h.fromJSON(a):u(a)?c.fromJSON(a):b(a)?k.fromJSON(a):m(a)?l.fromJSON(a):null:null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");
}catch(t){console.warn(t.stack)}return n(a)};a.isExtent=m;a.isMultipoint=b;a.isPoint=f;a.isPolyline=p;a.isPolygon=u;a.isMesh=function(a){return void 0!==a.vertexAttributes};a.fromJSON=n;a.getJsonType=function(a){return a?f(a)?"esriGeometryPoint":p(a)?"esriGeometryPolyline":u(a)?"esriGeometryPolygon":m(a)?"esriGeometryEnvelope":b(a)?"esriGeometryMultipoint":null:null};var r={esriGeometryPoint:e,esriGeometryPolyline:h,esriGeometryPolygon:c,esriGeometryEnvelope:l,esriGeometryMultipoint:k};a.getGeometryType=
function(a){return a&&r[a]||null}})},"esri/core/unitUtils":function(){define("require exports @dojo/framework/shim/Set ./compilerUtils ./jsonMap ./wgs84Constants ../geometry/support/WKIDUnitConversion".split(" "),function(d,a,l,g,k,e,c){function h(a){if(a=D[a])return a;throw Error("unknown measure");}function m(a){return C[a].baseUnit}function b(a,b){void 0===b&&(b=null);b=b||h(a);return C[b].baseUnit===a}function f(a,c,f){if(c===f)return a;var e=h(c);if(e!==h(f))throw Error("incompatible units");
a=b(c,e)?a:a*C[e].units[c].inBaseUnits;return b(f,e)?a:a/C[e].units[f].inBaseUnits}function p(a){return z.fromJSON(a.toLowerCase())||null}function u(a,b){void 0===b&&(b=w);return n(a,!0)||b}function n(a,b){void 0===b&&(b=!1);var c,f,e;null!=a&&("object"===typeof a?(c=a.wkid,f=a.wkt):"number"===typeof a?c=a:"string"===typeof a&&(f=a));c?(e=x.values[x[c]],!e&&b&&A.has(c)&&(e=t)):f&&-1!==f.search(/^PROJCS/i)&&(a=y.exec(f))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e}function r(a){var b,c,f;null!=
a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?f=x.units[x[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=y.exec(c))&&a[1]&&(f=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return f?p(f):null}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;var w=e.wgs84Radius*Math.PI/180,t=e.wgs84Radius*Math.PI/200,y=/UNIT\[([^\]]+)\]\]$/i,x=c,A=new l.default([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),z=k.strict()({meter:"meters",
foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},
decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};l={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},
"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(a){return a*a}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};var C={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:l},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},
"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},D=function(){var a={},b;for(b in C)for(var c in C[b].units)a[c]=b;return a}();a.measureForUnit=h;a.baseUnitForMeasure=m;a.baseUnitForUnit=function(a){return m(h(a))};a.isBaseUnit=b;a.convertUnit=
f;a.preferredMetricLengthUnit=function(a,b){return 3E3>f(a,b,"meters")?"meters":"kilometers"};a.preferredMetricVerticalLengthUnit=function(a,b){return 1E5>f(a,b,"meters")?"meters":"kilometers"};a.preferredImperialLengthUnit=function(a,b){return 1E3>f(a,b,"feet")?"feet":"miles"};a.preferredImperialVerticalLengthUnit=function(a,b){return 1E5>f(a,b,"feet")?"feet":"miles"};a.preferredMetricAreaUnit=function(a,b){return 3E6>f(a,b,"square-meters")?"square-meters":"square-kilometers"};a.preferredImperialAreaUnit=
function(a,b){return 1E6>f(a,b,"square-feet")?"square-feet":"square-miles"};a.lengthToDegrees=function(a,b,c){void 0===c&&(c=e.wgs84Radius);return f(a,b,"meters")/(c*Math.PI/180)};a.unitFromRESTJSON=p;a.unitToRESTJSON=function(a){return z.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=u(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<u(a)?"meters":r(a)};a.getMetersPerUnitForSR=u;a.getMetersPerUnit=n;a.getUnitString=r;a.getDefaultUnitSystem=function(a){if(!a)return null;
a=r(a);switch(a){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric";case null:case void 0:break;default:g.neverReached(a)}return null}})},"@dojo/framework/shim/Set":function(){(function(d){"object"===
typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ../has/has ./Symbol".split(" "),d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("tslib"),g=d("./global"),k=d("./iterator"),e=d("../has/has");d("./Symbol");a.Set=g.default.Set;e.default("es6-set")||(a.Set=(c=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";if(a)if(k.isArrayLike(a))for(var b=
0;b<a.length;b++)this.add(a[b]);else try{for(var b=l.__values(a),c=b.next();!c.done;c=b.next())this.add(c.value)}catch(n){e={error:n}}finally{try{c&&!c.done&&(h=b.return)&&h.call(b)}finally{if(e)throw e.error;}}var e,h}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};a.prototype.entries=function(){return new k.ShimIterator(this._setData.map(function(a){return[a,
a]}))};a.prototype.forEach=function(a,b){for(var c=this.values(),e=c.next();!e.done;)a.call(b,e.value,e.value,this),e=c.next()};a.prototype.has=function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new k.ShimIterator(this._setData)};Object.defineProperty(a.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new k.ShimIterator(this._setData)};a.prototype[Symbol.iterator]=function(){return new k.ShimIterator(this._setData)};
return a}(),c[Symbol.species]=c,c));a.default=a.Set;var c})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(d,a,l,g){function k(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function e(a){return a[0]>=a[2]?0:a[2]-a[0]}function c(a){return a[1]>=a[3]?0:a[3]-a[1]}function h(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function m(a){return 4===a.length}function b(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,
"__esModule",{value:!0});a.create=k;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,c,e,h){void 0===h&&(h=k());h[0]=a;h[1]=b;h[2]=c;h[3]=e;return h};a.fromExtent=function(a,b){void 0===b&&(b=k());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,b){return new g({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=
b[1])};a.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(m(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x);c[1]=Math.min(a[1],
b.y);c[2]=Math.max(a[2],b.x);c[3]=Math.max(a[3],b.y);break;default:l.neverReached(b)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var e=b.length,f=a[0],h=a[1],d=a[2];a=a[3];for(var g=0;g<e;g++){var m=b[g],f=Math.min(f,m[0]),h=Math.min(h,m[1]),d=Math.max(d,m[0]);a=Math.max(a,m[1])}c[0]=f;c[1]=h;c[2]=d;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=e;a.height=c;a.diameter=function(a){var b=e(a);a=c(a);return Math.sqrt(b*
b+a*a)};a.area=function(a){return e(a)*c(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+e(a)/2;b[1]=a[1]+c(a)/2;return b};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=
a[1]&&b[3]<=a[3]};a.intersection=function(a,c,e){void 0===e&&(e=a);var f=c[0],h=c[1],d=c[2];c=c[3];e[0]=b(a[0],f,d);e[1]=b(a[1],h,c);e[2]=b(a[2],f,d);e[3]=b(a[3],h,c);return e};a.distance=function(a,b){var f=(a[1]+a[3])/2,h=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-e(a)/2,0);a=Math.max(Math.abs(b[1]-f)-c(a)/2,0);return Math.sqrt(h*h+a*a)};a.size=function(a,b){b[0]=a[2]-a[0];b[1]=a[3]-a[1]};a.offset=function(a,b,c,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+b;e[3]=a[3]+c;return e};a.pad=function(a,
b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=h;a.empty=function(b){return b?h(b,a.NEGATIVE_INFINITY):k(a.NEGATIVE_INFINITY)};a.is=m;a.isPoint=function(a){return(0===e(a)||!isFinite(a[0]))&&(0===c(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||
null==b)return a===b;if(!m(a)||!m(b))return!1;if(c)for(var e=0;e<a.length;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==b[e])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0];a.UNIT=[0,0,1,1]})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(d,a,l,g,k,e,c){return function(a){function h(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}l(h,a);b=h;h.prototype.clone=function(){return new b({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var b;g([e.property({type:c.Integer,json:{write:!0}})],h.prototype,"level",void 0);g([e.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);g([e.property({type:Number,json:{write:!0}})],h.prototype,
"resolution",void 0);g([e.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=b=g([e.subclass("esri.layers.support.LOD")],h)}(e.declared(k))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x){var A=[0,0];return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b._viewpoint2D={center:t.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new k.Extent;b.id=0;b.inverseTransform=p.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=p.mat2df64.create();b.transformNoRotation=p.mat2df64.create();b.displayMat3=n.mat3f32.create();b.displayViewMat3=
n.mat3f32.create();b.viewMat3=n.mat3f32.create();b.viewMat2d=f.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}l(c,a);d=c;Object.defineProperty(c.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});c.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=x.copy(c,a.viewpoint),this._set("size",r.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};c.prototype.clone=function(){return new d({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};c.prototype.toMap=function(a,b,c){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.inverseTransform);A[0]=b;A[1]=c;return r.vec2.transformMat2d(a,A,this.inverseTransform)};c.prototype.toScreen=function(a,b,c){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.transform);A[0]=b;A[1]=c;return r.vec2.transformMat2d(a,A,this.transform)};c.prototype.toScreenNoRotation=function(a,b,c){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.transformNoRotation);A[0]=b;A[1]=
c;return r.vec2.transformMat2d(a,A,this.transformNoRotation)};c.prototype.pixelSizeAt=function(a){return x.pixelSizeAt(a,this.viewpoint,this.size)};c.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,e=this._get("pixelRatio")||1,f=this._get("size");x.getMatrix(a,c,f,b,0,e);return a};c.prototype._update=function(){var a=this._viewpoint2D,c=a.center,f=a.spatialReference,h=a.scale,d=a.rotation,a=this._get("pixelRatio")||1,g=this._get("size");this._set("id",this.id+1);var n=new e({targetGeometry:new k.Point(c[0],
c[1],f),scale:h,rotation:d});this._set("viewpoint",n);if(g&&f&&h)return this.resolution=x.getResolution(n),this.rotation=d,this.scale=h,this.spatialReference=f,r.vec2.copy(this.center,c),u.mat3.set(this.displayMat3,0!==g[0]?2/g[0]:0,0,0,0,0!==g[1]?-2/g[1]:0,0,-1,1,1),h=u.mat3.identity(this.viewMat3),c=w.vec2f32.fromValues(g[0]/2,g[1]/2),f=w.vec2f32.fromValues(-g[0]/2,-g[1]/2),d=m.common.toRadian(d),u.mat3.translate(h,h,c),u.mat3.rotate(h,h,d),u.mat3.translate(h,h,f),u.mat3.multiply(this.displayViewMat3,
this.displayMat3,h),h=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(h,h,c),b.mat2d.rotate(h,h,d),b.mat2d.translate(h,h,f),x.getExtent(this.extent,n,g),x.getTransform(this.transform,n,g,a),b.mat2d.invert(this.inverseTransform,this.transform),x.getTransformNoRotation(this.transformNoRotation,n,g,a),this.worldScreenWidth=x.getWorldScreenWidth(this.spatialReference,this.resolution),this};var d;g([h.property({readOnly:!0})],c.prototype,"id",void 0);g([h.property({value:1,json:{write:!0}})],c.prototype,
"pixelRatio",null);g([h.property({json:{write:!0}})],c.prototype,"size",null);g([h.property({type:e,json:{write:!0}})],c.prototype,"viewpoint",null);return c=d=g([h.subclass("esri.views.2d.ViewState")],c)}(h.declared(c))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./geometry ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils".split(" "),function(d,a,l,g,k,e,c,h,m){function b(){return{enabled:!this.camera}}
return function(a){function c(b){b=a.call(this)||this;b.rotation=0;b.scale=0;b.targetGeometry=null;b.camera=null;return b}l(c,a);f=c;c.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};c.prototype.clone=function(){return new f({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var f;g([h.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],c.prototype,
"rotation",void 0);g([h.cast("rotation")],c.prototype,"castRotation",null);g([h.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],c.prototype,"scale",void 0);g([h.property({types:e.geometryTypes,json:{read:m.fromJSON,write:!0,origins:{"web-scene":{read:m.fromJSON,write:{overridePolicy:b}}}}})],c.prototype,"targetGeometry",void 0);g([h.property({type:k,json:{write:!0}})],c.prototype,"camera",void 0);return c=f=g([h.subclass("esri.Viewpoint")],c)}(h.declared(c))})},
"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/mathUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b){return function(a){function f(b,c,e,f){b=a.call(this)||this;b.position=new m([0,0,0]);b.heading=0;b.tilt=0;b.fov=55;return b}l(f,a);d=f;f.prototype.normalizeCtorArgs=function(a,b,c,e){a&&"object"===
typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=e&&(a.fov=e));return a};f.prototype.writePosition=function(a,b,c,e){var f=a.clone();f.x=h.ensureNumber(a.x||0);f.y=h.ensureNumber(a.y||0);f.z=a.hasZ?h.ensureNumber(a.z||0):a.z;b[c]=f.write(null,e)};f.prototype.readPosition=function(a,b){var c=new m;c.read(a,b);c.x=h.ensureNumber(c.x||0);c.y=h.ensureNumber(c.y||0);c.z=c.hasZ?h.ensureNumber(c.z||0):c.z;return c};f.prototype.equals=function(a){return a?
this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};f.prototype.clone=function(){return new d({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var d;g([c.property({type:m,json:{write:{isRequired:!0}}})],f.prototype,"position",void 0);g([c.writer("position")],f.prototype,"writePosition",null);g([c.reader("position")],f.prototype,"readPosition",null);g([c.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),
c.cast(function(a){return b.cyclicalDeg.normalize(h.ensureNumber(a))})],f.prototype,"heading",void 0);g([c.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),c.cast(function(a){return e.clamp(h.ensureNumber(a),-180,180)})],f.prototype,"tilt",void 0);g([c.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],f.prototype,"fov",void 0);return f=d=g([c.subclass("esri.Camera")],f)}(c.declared(k))})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/mathUtils",
"../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(d,a,l,g,k){function e(a){return Math.asin(1<a?1:-1>a?-1:a)}function c(a){return Math.acos(1<a?1:-1>a?-1:a)}function h(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=e;a.acos=c;a.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};
a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.maxScale=function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*
a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};a.scaleFromMatrix=function(a,b){g.vec3.set(a,Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]));return a};a.makeOrthonormal=function(a,b,c){c=c||a;var e=g.vec3.dot(a,b);g.vec3.set(c,a[0]-e*b[0],a[1]-e*b[1],a[2]-e*b[2]);g.vec3.normalize(c,c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?g.vec3.set(b,0,1,0):g.vec3.set(b,1,0,0);g.vec3.cross(c,a,b);g.vec3.normalize(b,
b);g.vec3.cross(b,c,a);g.vec3.normalize(c,c)};a.moduloPositive=function(a,b){return(a%b+b)%b};a.cartesianToSpherical=function(a,b){var c=g.vec3.length(a),f=e(a[2]/c);g.vec3.set(b,c,f,Math.atan2(a[1]/c,a[0]/c));return b};a.sphericalToCartesian=function(a,b){var c=a[0],e=a[1];a=a[2];var f=Math.cos(e);g.vec3.set(b,c*f*Math.cos(a),c*f*Math.sin(a),c*Math.sin(e))};a.directionFromTo=function(a,b,c){var e=c[0]-b[0],f=c[1]-b[1];b=c[2]-b[2];c=e*e+f*f+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);
a[0]=e*c;a[1]=f*c;a[2]=b*c;return a};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,e,f,h){a+=(b-a)*f;return a+(c+(e-c)*f-a)*h};a.slerp=function(a,b,c,e){void 0===e&&(e=k.vec3f64.create());var f=g.vec3.length(a),h=g.vec3.length(b),d=g.vec3.dot(a,b)/(f*h);if(.9999999999999999>d){var d=Math.acos(d),m=((1-c)*f+c*h)/Math.sin(d),h=m/h*Math.sin(c*d);g.vec3.scale(p,a,m/f*Math.sin((1-c)*d));g.vec3.scale(u,b,h);return g.vec3.add(e,p,u)}return g.vec3.lerp(e,a,b,c)};a.angle=function(a,b,e){a=
g.vec3.normalize(p,a);b=g.vec3.normalize(u,b);var h=c(g.vec3.dot(a,b));return e&&(a=g.vec3.cross(f,a,b),0>g.vec3.dot(a,e))?-h:h};a.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var e=1;c>a[e][0];)e++;var f=a[e][0];c=(f-c)/(f-a[e-1][0]);return c*a[e-1][1]+(1-c)*a[e][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;
return!0};a.floatEqualRelative=function(a,b,c){void 0===c&&(c=1E-6);if(isNaN(a)||isNaN(b))return!1;if(a===b)return!0;var e=Math.abs(a-b),f=Math.abs(a),h=Math.abs(b);if(0===a||0===b||1E-12>f&&1E-12>h){if(e>.01*c)return!1}else if(e/(f+h)>c)return!1;return!0};a.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return isNaN(a)||isNaN(b)?!1:(a>b?a-b:b-a)<=c};d=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/
this.range)*this.range+b};a.prototype._normalize=function(a,b,c,e){void 0===e&&(e=0);c-=e;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+e};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return l.clamp(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=
function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.shortestSignedDiff=function(a,b){a=this.normalize(a);b=this.normalize(b);var c=b-a;a=b<a?this.minimalMonotonic(a,b)-a:b-this.minimalMonotonic(b,a);return Math.abs(c)<Math.abs(a)?c:a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=d;a.planeFromPoints=function(a,c,
e,f){g.vec3.subtract(m,c,a);g.vec3.subtract(b,e,a);g.vec3.cross(f,m,b);g.vec3.normalize(f,f);f[3]=-g.vec3.dot(a,f)};var m=k.vec3f64.create(),b=k.vec3f64.create();a.cyclical2PI=h(new d(0,2*Math.PI));a.cyclicalPI=h(new d(-Math.PI,Math.PI));a.cyclicalDeg=h(new d(0,360));var f=k.vec3f64.create(),p=k.vec3f64.create(),u=k.vec3f64.create()})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["require","exports","./math/vec3"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec3=l})},
"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require","exports","../factories/vec3f64","./common"],function(d,a,l,g){function k(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function e(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function c(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function h(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function m(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function b(a,b){var c=b[0]-a[0],
e=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+e*e+a*a)}function f(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return c*c+e*e+a*a}function p(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function u(a,b){var c=b[0],e=b[1],f=b[2],c=c*c+e*e+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function n(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(a,"__esModule",{value:!0});a.length=k;a.copy=e;a.set=function(a,b,c,e){a[0]=b;a[1]=c;a[2]=e;return a};a.add=function(a,
b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};a.subtract=c;a.multiply=h;a.divide=m;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};
a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};a.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;return a};a.distance=b;a.squaredDistance=f;a.squaredLength=p;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};a.normalize=u;a.dot=n;a.cross=function(a,b,c){var e=b[0],
f=b[1];b=b[2];var h=c[0],d=c[1];c=c[2];a[0]=f*c-b*d;a[1]=b*h-e*c;a[2]=e*d-f*h;return a};a.lerp=function(a,b,c,e){var f=b[0],h=b[1];b=b[2];a[0]=f+e*(c[0]-f);a[1]=h+e*(c[1]-h);a[2]=b+e*(c[2]-b);return a};a.hermite=function(a,b,c,e,f,h){var d=h*h,g=d*(2*h-3)+1,m=d*(h-2)+h,p=d*(h-1);h=d*(3-2*h);a[0]=b[0]*g+c[0]*m+e[0]*p+f[0]*h;a[1]=b[1]*g+c[1]*m+e[1]*p+f[1]*h;a[2]=b[2]*g+c[2]*m+e[2]*p+f[2]*h;return a};a.bezier=function(a,b,c,e,f,h){var d=1-h,g=d*d,m=h*h,p=g*d,g=3*h*g,d=3*m*d;h*=m;a[0]=b[0]*p+c[0]*g+e[0]*
d+f[0]*h;a[1]=b[1]*p+c[1]*g+e[1]*d+f[1]*h;a[2]=b[2]*p+c[2]*g+e[2]*d+f[2]*h;return a};a.random=function(a,b){b=b||1;var c=2*g.RANDOM()*Math.PI,e=2*g.RANDOM()-1,f=Math.sqrt(1-e*e)*b;a[0]=Math.cos(c)*f;a[1]=Math.sin(c)*f;a[2]=e*b;return a};a.transformMat4=function(a,b,c){var e=b[0],f=b[1];b=b[2];a[0]=c[0]*e+c[4]*f+c[8]*b+c[12];a[1]=c[1]*e+c[5]*f+c[9]*b+c[13];a[2]=c[2]*e+c[6]*f+c[10]*b+c[14];return a};a.transformMat3=function(a,b,c){var e=b[0],f=b[1];b=b[2];a[0]=e*c[0]+f*c[3]+b*c[6];a[1]=e*c[1]+f*c[4]+
b*c[7];a[2]=e*c[2]+f*c[5]+b*c[8];return a};a.transformQuat=function(a,b,c){var e=c[0],f=c[1],h=c[2],d=b[0],g=b[1];b=b[2];var m=f*b-h*g,p=h*d-e*b,n=e*g-f*d;c=2*c[3];a[0]=d+m*c+2*(f*n-h*p);a[1]=g+p*c+2*(h*m-e*n);a[2]=b+n*c+2*(e*p-f*m);return a};a.rotateX=function(a,b,c,e){var f=[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[0];h[1]=f[1]*Math.cos(e)-f[2]*Math.sin(e);h[2]=f[1]*Math.sin(e)+f[2]*Math.cos(e);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};a.rotateY=function(a,b,c,e){var f=
[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[2]*Math.sin(e)+f[0]*Math.cos(e);h[1]=f[1];h[2]=f[2]*Math.cos(e)-f[0]*Math.sin(e);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};a.rotateZ=function(a,b,c,e){var f=[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[0]*Math.cos(e)-f[1]*Math.sin(e);h[1]=f[0]*Math.sin(e)+f[1]*Math.cos(e);h[2]=f[2];a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};a.angle=function(a,b){e(r,a);e(w,b);u(r,r);u(w,w);a=n(r,w);return 1<a?0:-1>
a?Math.PI:Math.acos(a)};var r=l.create(),w=l.create();a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};a.equals=function(a,b){var c=a[0],e=a[1];a=a[2];var f=b[0],h=b[1];b=b[2];return Math.abs(c-f)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-h)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=c;a.mul=h;a.div=m;a.dist=b;a.sqrDist=f;
a.len=k;a.sqrLen=p})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(d,a){function l(){return[0,0,0]}function g(){return[1,1,1]}function k(){return[1,0,0]}function e(){return[0,1,0]}function c(){return[0,0,1]}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2]]};a.fromValues=function(a,c,b){return[a,c,b]};a.fromArray=function(a){for(var c=l(),b=Math.min(3,a.length),e=0;e<b;++e)c[e]=a[e];return c};a.createView=
function(a,c){return new Float64Array(a,c,3)};a.zeros=function(){return l()};a.ones=g;a.unitX=k;a.unitY=e;a.unitZ=c;a.ZEROS=l();a.ONES=g();a.UNIT_X=k();a.UNIT_Y=e();a.UNIT_Z=c()})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.EPSILON=1E-6;a.RANDOM=Math.random;var l=Math.PI/180,g=180/Math.PI;a.toRadian=function(a){return a*l};a.toDegree=function(a){return a*g};a.equals=function(d,e){return Math.abs(d-
e)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))}})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["require","exports","./factories/vec3f64"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec3f64=l})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.common=l})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(d,
a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2d=l})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(d,a,l){function g(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4];c=c[5];var n=h[0],k=h[1],l=h[2],t=h[3],y=h[4];h=h[5];a[0]=e*n+f*k;a[1]=b*n+d*k;a[2]=e*l+f*t;a[3]=b*l+d*t;a[4]=e*y+f*h+g;a[5]=b*y+d*h+c;return a}function k(a,c,h){a[0]=c[0]-h[0];a[1]=c[1]-h[1];a[2]=c[2]-h[2];a[3]=c[3]-h[3];a[4]=c[4]-h[4];a[5]=c[5]-h[5];return a}Object.defineProperty(a,
"__esModule",{value:!0});a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.set=function(a,c,h,d,b,f,g){a[0]=c;a[1]=h;a[2]=d;a[3]=b;a[4]=f;a[5]=g;return a};a.invert=function(a,c){var e=c[0],d=c[1],b=c[2],f=c[3],g=c[4];c=c[5];var k=e*f-d*b;if(!k)return null;k=1/k;a[0]=f*k;a[1]=-d*k;a[2]=-b*k;a[3]=e*k;a[4]=(b*c-f*g)*k;a[5]=(d*g-e*c)*k;return a};a.determinant=function(a){return a[0]*a[3]-
a[1]*a[2]};a.multiply=g;a.rotate=function(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4];c=c[5];var n=Math.sin(h);h=Math.cos(h);a[0]=e*h+f*n;a[1]=b*h+d*n;a[2]=e*-n+f*h;a[3]=b*-n+d*h;a[4]=g;a[5]=c;return a};a.scale=function(a,c,h){var e=c[1],b=c[2],f=c[3],d=c[4],g=c[5],n=h[0];h=h[1];a[0]=c[0]*n;a[1]=e*n;a[2]=b*h;a[3]=f*h;a[4]=d;a[5]=g;return a};a.translate=function(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4];c=c[5];var n=h[0];h=h[1];a[0]=e;a[1]=b;a[2]=f;a[3]=d;a[4]=e*n+f*h+g;a[5]=b*n+d*h+c;return a};
a.fromRotation=function(a,c){var e=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=e;a[2]=-e;a[3]=c;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],
2)+Math.pow(a[5],2)+1)};a.add=function(a,c,h){a[0]=c[0]+h[0];a[1]=c[1]+h[1];a[2]=c[2]+h[2];a[3]=c[3]+h[3];a[4]=c[4]+h[4];a[5]=c[5]+h[5];return a};a.subtract=k;a.multiplyScalar=function(a,c,h){a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=c[3]*h;a[4]=c[4]*h;a[5]=c[5]*h;return a};a.multiplyScalarAndAdd=function(a,c,h,d){a[0]=c[0]+h[0]*d;a[1]=c[1]+h[1]*d;a[2]=c[2]+h[2]*d;a[3]=c[3]+h[3]*d;a[4]=c[4]+h[4]*d;a[5]=c[5]+h[5]*d;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&
a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};a.equals=function(a,c){var e=a[0],d=a[1],b=a[2],f=a[3],g=a[4];a=a[5];var k=c[0],n=c[1],r=c[2],w=c[3],t=c[4];c=c[5];return Math.abs(e-k)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(d-n)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(b-r)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(r))&&Math.abs(f-w)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(g-t)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(t))&&Math.abs(a-c)<=l.EPSILON*Math.max(1,
Math.abs(a),Math.abs(c))};a.mul=g;a.sub=k})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df32=l})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(6);a[0]=1;a[3]=1;return a};a.clone=function(a){var d=new Float32Array(6);d[0]=a[0];
d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];return d};a.fromValues=function(a,d,k,e,c,h){var g=new Float32Array(6);g[0]=a;g[1]=d;g[2]=k;g[3]=e;g[4]=c;g[5]=h;return g};a.createView=function(a,d){return new Float32Array(a,d,6)}})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df64=l})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],
function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,1,0,0]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5]]};a.fromValues=function(a,d,k,e,c,h){return[a,d,k,e,c,h]};a.createView=function(a,d){return new Float64Array(a,d,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat3=l})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require",
"exports","./common"],function(d,a,l){function g(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4],n=c[5],k=c[6],l=c[7];c=c[8];var t=h[0],y=h[1],x=h[2],A=h[3],z=h[4],C=h[5],D=h[6],B=h[7];h=h[8];a[0]=t*e+y*d+x*k;a[1]=t*b+y*g+x*l;a[2]=t*f+y*n+x*c;a[3]=A*e+z*d+C*k;a[4]=A*b+z*g+C*l;a[5]=A*f+z*n+C*c;a[6]=D*e+B*d+h*k;a[7]=D*b+B*g+h*l;a[8]=D*f+B*n+h*c;return a}function k(a,c,h){a[0]=c[0]-h[0];a[1]=c[1]-h[1];a[2]=c[2]-h[2];a[3]=c[3]-h[3];a[4]=c[4]-h[4];a[5]=c[5]-h[5];a[6]=c[6]-h[6];a[7]=c[7]-h[7];a[8]=c[8]-h[8];
return a}Object.defineProperty(a,"__esModule",{value:!0});a.fromMat4=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a};a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a};a.set=function(a,c,h,d,b,f,g,k,n,r){a[0]=c;a[1]=h;a[2]=d;a[3]=b;a[4]=f;a[5]=g;a[6]=k;a[7]=n;a[8]=r;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};
a.transpose=function(a,c){if(a===c){var e=c[1],d=c[2],b=c[5];a[1]=c[3];a[2]=c[6];a[3]=e;a[5]=c[7];a[6]=d;a[7]=b}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a};a.invert=function(a,c){var e=c[0],d=c[1],b=c[2],f=c[3],g=c[4],k=c[5],n=c[6],r=c[7];c=c[8];var l=c*g-k*r,t=-c*f+k*n,y=r*f-g*n,x=e*l+d*t+b*y;if(!x)return null;x=1/x;a[0]=l*x;a[1]=(-c*d+b*r)*x;a[2]=(k*d-b*g)*x;a[3]=t*x;a[4]=(c*e-b*n)*x;a[5]=(-k*e+b*f)*x;a[6]=y*x;a[7]=(-r*e+d*n)*x;a[8]=(g*
e-d*f)*x;return a};a.adjoint=function(a,c){var e=c[0],d=c[1],b=c[2],f=c[3],g=c[4],k=c[5],n=c[6],r=c[7];c=c[8];a[0]=g*c-k*r;a[1]=b*r-d*c;a[2]=d*k-b*g;a[3]=k*n-f*c;a[4]=e*c-b*n;a[5]=b*f-e*k;a[6]=f*r-g*n;a[7]=d*n-e*r;a[8]=e*g-d*f;return a};a.determinant=function(a){var c=a[3],e=a[4],d=a[5],b=a[6],f=a[7],g=a[8];return a[0]*(g*e-d*f)+a[1]*(-g*c+d*b)+a[2]*(f*c-e*b)};a.multiply=g;a.translate=function(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4],n=c[5],k=c[6],l=c[7];c=c[8];var t=h[0];h=h[1];a[0]=e;a[1]=
b;a[2]=f;a[3]=d;a[4]=g;a[5]=n;a[6]=t*e+h*d+k;a[7]=t*b+h*g+l;a[8]=t*f+h*n+c;return a};a.rotate=function(a,c,h){var e=c[0],b=c[1],f=c[2],d=c[3],g=c[4],n=c[5],k=c[6],l=c[7];c=c[8];var t=Math.sin(h);h=Math.cos(h);a[0]=h*e+t*d;a[1]=h*b+t*g;a[2]=h*f+t*n;a[3]=h*d-t*e;a[4]=h*g-t*b;a[5]=h*n-t*f;a[6]=k;a[7]=l;a[8]=c;return a};a.scale=function(a,c,h){var e=h[0],b=h[1];h=h[2];a[0]=e*c[0];a[1]=e*c[1];a[2]=e*c[2];a[3]=b*c[3];a[4]=b*c[4];a[5]=b*c[5];a[6]=h*c[6];a[7]=h*c[7];a[8]=h*c[8];return a};a.fromTranslation=
function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=c[0];a[7]=c[1];a[8]=1;return a};a.fromRotation=function(a,c){var e=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=e;a[2]=0;a[3]=-e;a[4]=c;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=c[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a};a.fromQuat=function(a,c){var e=c[0],d=c[1],b=c[2];
c=c[3];var f=e+e,g=d+d,k=b+b,e=e*f,n=d*f,d=d*g,r=b*f,l=b*g,b=b*k,f=c*f,g=c*g;c*=k;a[0]=1-d-b;a[3]=n-c;a[6]=r+g;a[1]=n+c;a[4]=1-e-b;a[7]=l-f;a[2]=r-g;a[5]=l+f;a[8]=1-e-d;return a};a.normalFromMat4Legacy=function(a,c){var e=c[0],d=c[1],b=c[2],f=c[4],g=c[5],k=c[6],n=c[8],r=c[9];c=c[10];var l=c*g-k*r,t=-c*f+k*n,y=r*f-g*n,x=e*l+d*t+b*y;if(!x)return null;x=1/x;a[0]=l*x;a[1]=(-c*d+b*r)*x;a[2]=(k*d-b*g)*x;a[3]=t*x;a[4]=(c*e-b*n)*x;a[5]=(-k*e+b*f)*x;a[6]=y*x;a[7]=(-r*e+d*n)*x;a[8]=(g*e-d*f)*x;return a};a.normalFromMat4=
function(a,c){var e=c[0],d=c[1],b=c[2],f=c[3],g=c[4],k=c[5],n=c[6],r=c[7],l=c[8],t=c[9],y=c[10],x=c[11],A=c[12],z=c[13],C=c[14];c=c[15];var D=e*k-d*g,B=e*n-b*g,E=e*r-f*g,F=d*n-b*k,H=d*r-f*k,G=b*r-f*n,J=l*z-t*A,K=l*C-y*A,l=l*c-x*A,I=t*C-y*z,t=t*c-x*z,y=y*c-x*C,x=D*y-B*t+E*I+F*l-H*K+G*J;if(!x)return null;x=1/x;a[0]=(k*y-n*t+r*I)*x;a[1]=(n*l-g*y-r*K)*x;a[2]=(g*t-k*l+r*J)*x;a[3]=(b*t-d*y-f*I)*x;a[4]=(e*y-b*l+f*K)*x;a[5]=(d*l-e*t-f*J)*x;a[6]=(z*G-C*H+c*F)*x;a[7]=(C*E-A*G-c*B)*x;a[8]=(A*H-z*E+c*D)*x;return a};
a.projection=function(a,c,h){a[0]=2/c;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/h;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,c,h){a[0]=c[0]+h[0];a[1]=c[1]+h[1];a[2]=c[2]+h[2];a[3]=c[3]+h[3];
a[4]=c[4]+h[4];a[5]=c[5]+h[5];a[6]=c[6]+h[6];a[7]=c[7]+h[7];a[8]=c[8]+h[8];return a};a.subtract=k;a.multiplyScalar=function(a,c,h){a[0]=c[0]*h;a[1]=c[1]*h;a[2]=c[2]*h;a[3]=c[3]*h;a[4]=c[4]*h;a[5]=c[5]*h;a[6]=c[6]*h;a[7]=c[7]*h;a[8]=c[8]*h;return a};a.multiplyScalarAndAdd=function(a,c,h,d){a[0]=c[0]+h[0]*d;a[1]=c[1]+h[1]*d;a[2]=c[2]+h[2]*d;a[3]=c[3]+h[3]*d;a[4]=c[4]+h[4]*d;a[5]=c[5]+h[5]*d;a[6]=c[6]+h[6]*d;a[7]=c[7]+h[7]*d;a[8]=c[8]+h[8]*d;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&
a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};a.equals=function(a,c){var e=a[0],d=a[1],b=a[2],f=a[3],g=a[4],k=a[5],n=a[6],r=a[7];a=a[8];var w=c[0],t=c[1],y=c[2],x=c[3],A=c[4],z=c[5],C=c[6],D=c[7];c=c[8];return Math.abs(e-w)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(d-t)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(b-y)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(f-x)<=l.EPSILON*Math.max(1,Math.abs(f),
Math.abs(x))&&Math.abs(g-A)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(k-z)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(n-C)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(r-D)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(a-c)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.mul=g;a.sub=k})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});
a.mat3f32=l})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(9);a[0]=1;a[4]=1;a[8]=1;return a};a.clone=function(a){var d=new Float32Array(9);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];return d};a.fromValues=function(a,d,k,e,c,h,m,b,f){var g=new Float32Array(9);g[0]=a;g[1]=d;g[2]=k;g[3]=e;g[4]=c;g[5]=h;g[6]=
m;g[7]=b;g[8]=f;return g};a.createView=function(a,d){return new Float32Array(a,d,9)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2=l})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(d,a,l){function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function k(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function e(a,b,c){a[0]=b[0]/
c[0];a[1]=b[1]/c[1];return a}function c(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function h(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a}function m(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};a.set=function(a,b,c){a[0]=b;a[1]=c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};a.subtract=g;a.multiply=k;a.divide=
e;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};a.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=
b[1]+c[1]*e;return a};a.distance=c;a.squaredDistance=h;a.length=m;a.squaredLength=b;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],f=b[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,c,e){var f=b[0];b=b[1];a[0]=f+e*(c[0]-f);a[1]=b+e*
(c[1]-b);return a};a.random=function(a,b){b=b||1;var c=2*l.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};a.transformMat2=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[2]*b;a[1]=c[1]*f+c[3]*b;return a};a.transformMat2d=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[2]*b+c[4];a[1]=c[1]*f+c[3]*b+c[5];return a};a.transformMat3=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+c[3]*b+c[6];a[1]=c[1]*f+c[4]*b+c[7];return a};a.transformMat4=function(a,b,c){var f=b[0];b=b[1];a[0]=c[0]*f+
c[4]*b+c[12];a[1]=c[1]*f+c[5]*b+c[13];return a};a.rotate=function(a,b,c,e){var f=b[0]-c[0];b=b[1]-c[1];var h=Math.sin(e);e=Math.cos(e);a[0]=f*e-b*h+c[0];a[1]=f*h+b*e+c[1];return a};a.angle=function(a,b){var c=a[0];a=a[1];var f=b[0];b=b[1];var e=c*c+a*a;0<e&&(e=1/Math.sqrt(e));var h=f*f+b*b;0<h&&(h=1/Math.sqrt(h));c=(c*f+a*b)*e*h;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,
b){var c=a[0];a=a[1];var f=b[0];b=b[1];return Math.abs(c-f)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.len=m;a.sub=g;a.mul=k;a.div=e;a.dist=c;a.sqrDist=h;a.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f32=l})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],
function(d,a){function l(){return new Float32Array(2)}function g(a,c){var b=new Float32Array(2);b[0]=a;b[1]=c;return b}function k(){return g(1,1)}function e(){return g(1,0)}function c(){return g(0,1)}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){var c=new Float32Array(2);c[0]=a[0];c[1]=a[1];return c};a.fromValues=g;a.createView=function(a,c){return new Float32Array(a,c,2)};a.zeros=function(){return l()};a.ones=k;a.unitX=e;a.unitY=c;a.ZEROS=l();a.ONES=k();a.UNIT_X=
e();a.UNIT_Y=c()})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f64=l})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[0,0]};a.clone=function(a){return[a[0],a[1]]};a.fromValues=function(a,d){return[a,d]};a.fromArray=function(a){for(var d=[0,0],
k=Math.min(2,a.length),e=0;e<k;++e)d[e]=a[e];return d};a.createView=function(a,d){return new Float64Array(a,d,2)};a.zeros=function(){return[0,0]};a.ones=function(){return[1,1]};a.unitX=function(){return[1,0]};a.unitY=function(){return[0,1]};a.ZEROS=[0,0];a.ONES=[1,1];a.UNIT_X=[1,0];a.UNIT_Y=[0,1]})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(d,a){function l(a){return a instanceof Float32Array&&2<=a.length}function g(a){return Array.isArray(a)&&2<=a.length}
Object.defineProperty(a,"__esModule",{value:!0});a.isVec2f32=l;a.isVec2f64=g;a.isVec2=function(a){return l(a)||g(a)}})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D){function B(a,b,c,f){return f&&c&&!f.equals(c)&&C.canProject(f,c)&&f.isWebMercator?(f.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(p.common.toRadian(c)),a=r.vec2.set(a,p.common.toRadian(b[0])*R,.5*R*Math.log((1+c)/(1-c)))):(c=p.common.toDegree(b[0]/R),a=r.vec2.set(a,c-360*Math.floor((c+180)/360),p.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/R))))),a):r.vec2.copy(a,b)}function E(a){return a.wkid?
a:a.spatialReference||A.WGS84}function F(a,b){return b.type?r.vec2.set(a,b.x,b.y):r.vec2.copy(a,b)}function H(a,b){return Math.max(a.width/b[0],a.height/b[1])*U(a.spatialReference)}function G(a,b,f,e){return g(this,void 0,void 0,function(){var d,g,k,n,p,r,u,w,I,A,M,z,K,D,J,H,E,F,O,B,Q,X,T,P,q,R,S,Z;return l(this,function(l){switch(l.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
g=a.every(function(a){return"attributes"in a});k=a.some(function(a){return!a.geometry});n=a;if(!(g&&k&&b&&b.allLayerViews))return[3,2];p=new Map;r=0;for(u=a;r<u.length;r++)w=u[r],I=w.layer,A=p.get(I)||[],M=w.attributes[I.objectIdField],null!=M&&A.push(M),p.set(I,A);z=[];p.forEach(function(a,c){var f=b.allLayerViews.find(function(a){return a.layer.id===c.id});if("queryFeatures"in f){var e=c.createQuery();e.objectIds=a;e.returnGeometry=!0;z.push(f.queryFeatures(e))}});return[4,m.all(z)];case 1:K=l.sent();
D=[];J=0;for(H=K;J<H.length;J++)if((E=H[J])&&E.features&&E.features.length)for(F=0,O=E.features;F<O.length;F++)w=O[F],h.isSome(w.geometry)&&D.push(w.geometry);n=D;l.label=2;case 2:B=0,Q=n,l.label=3;case 3:if(!(B<Q.length))return[3,6];X=Q[B];return[4,G(X,b,f,e)];case 4:e=l.sent(),l.label=5;case 5:return B++,[3,3];case 6:return[2,e];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];d=new x(a);return[3,12];case 8:if(!(a instanceof y))return[3,9];d=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];d=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];T=a.layer;P=b.allLayerViews.find(function(a){return a.layer.id===T.id});if(!("queryFeatures"in P))return[3,12];q=T.createQuery();q.objectIds=[a.attributes[T.objectIdField]];q.returnGeometry=!0;return[4,P.queryFeatures(q)];case 11:R=l.sent(),d=h.get(R,"features",0,"geometry"),l.label=12;case 12:if(h.isNone(d))return[2,null];S="point"===d.type?new t({xmin:d.x,
ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference}):d.extent;if(!S)return[2,null];Z=C.canProject(S,f);if(!S.spatialReference.equals(f)&&Z)S=C.project(S,f);else if(!Z)return[2,null];e=e?e.union(S):S.clone();return[2,e]}})})}function J(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var c=0,f=0,e=0;e<a.length;e++)(b=a[e].layer)&&b.minScale&&b.maxScale&&(c=b.minScale<c?b.minScale:c,f=b.maxScale>f?b.maxScale:f);return c&&f?{min:c,max:f}:null}}}function K(a,b){return g(this,void 0,void 0,function(){var c,f,e,h,d,g,m,n,p,r,u,y,I,A,M,z;return l(this,function(l){switch(l.label){case 0:if(!a)return[2,new k({targetGeometry:new x,scale:0,rotation:0})];c=b.spatialReference;f=b.size;e=b.viewpoint;h=b.constraints;d=null;"esri.Viewpoint"===a.declaredClass?
d=a:a.viewpoint?d=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(d=a.target);g=null;if(!d||!d.targetGeometry)return[3,1];g=d.targetGeometry;return[3,10];case 1:if(!(a instanceof t))return[3,2];g=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,G(a.center,b,c)]:[3,10];case 3:return(p=l.sent())?[3,5]:[4,G(a.extent,b,c)];case 4:p=l.sent(),l.label=5;case 5:return(n=p)?[3,7]:[4,G(a.target,b,c)];case 6:n=l.sent(),
l.label=7;case 7:return(m=n)?[3,9]:[4,G(a,b,c)];case 8:m=l.sent(),l.label=9;case 9:g=m,l.label=10;case 10:!g&&e&&e.targetGeometry?g=e.targetGeometry:!g&&b.extent&&(g=b.extent);r=E(g);c||(c=E(b.spatialReference||b.extent||g));if(!D.canProject(g,c)&&r&&!r.equals(c))return[2,null];u=F(w.vec2f64.create(),g.center?g.center:g);y=new x(B(u,u,r,c),c);I=null;I=d&&d.targetGeometry&&"point"===d.targetGeometry.type?d.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&h&&h.effectiveLODs?
h.zoomToScale(a.zoom):Array.isArray(g)||"point"===g.type||"extent"===g.type&&0===g.width&&0===g.height?b.extent&&C.canProject(b.extent,c)?H(C.project(b.extent,c),f):b.extent?H(b.extent,f):e.scale:C.canProject(g.extent,c)?H(C.project(g.extent,c),f):H(g.extent,f);if(A=J(a))A.min&&A.min>I?I=A.min:A.max&&A.max<I&&(I=A.max);M=0;d?M=d.rotation:a.hasOwnProperty("rotation")?M=a.rotation:e&&(M=e.rotation);z=new k({targetGeometry:y,scale:I,rotation:M});h&&(z=h.fit(z),h.rotationEnabled||(z.rotation=M));return[2,
z]}})})}function I(a,b){var c=a.targetGeometry,f=b.targetGeometry;c.x=f.x;c.y=f.y;c.spatialReference=f.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function M(a,b,c){return c?r.vec2.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):r.vec2.scale(a,b,.5)}function O(b,c,f,e){a.getTransform(b,c,f,e);return u.mat2d.invert(b,b)}function Q(a,b,c){var f=S(b);b=Math.abs(Math.cos(f));f=Math.abs(Math.sin(f));return r.vec2.set(a,Math.round(c[1]*f+c[0]*b),Math.round(c[1]*b+c[0]*f))}function P(a){var c=
a.scale;a=a.targetGeometry.spatialReference;a=z.isValid(a)?1/(39.37*b.getMetersPerUnitForSR(a)*96):1;return c*a}function S(a){return p.common.toRadian(a.rotation)||0}function U(a){return z.isValid(a)?39.37*b.getMetersPerUnitForSR(a)*96:1}function T(a){return a.isWrappable?(a=z.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(a,"__esModule",{value:!0});var R=f.wgs84Radius,W=180/Math.PI;a.extentToScale=H;a.create=K;a.copy=I;a.getAnchor=M;a.getExtent=function(){var a=w.vec2f64.create();return function(b,
c,f){var e=c.targetGeometry;F(a,e);c=.5*P(c);b.xmin=a[0]-c*f[0];b.ymin=a[1]-c*f[1];b.xmax=a[0]+c*f[0];b.ymax=a[1]+c*f[1];b.spatialReference=e.spatialReference;return b}}();a.setExtent=function(b,c,f,e,h){a.centerAt(b,c,f.center);b.scale=H(f,e);h&&h.constraints&&h.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=w.vec2f64.create(),b=w.vec2f64.create();return function(c,f,e){F(a,f.targetGeometry);Q(b,f,e);e=.5*P(f);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+
e*b[1],spatialReference:f.targetGeometry.spatialReference});return c}}();a.getOuterSize=Q;a.getPaddingScreenTranslation=function(){var a=w.vec2f64.create();return function(b,c,f){return r.vec2.sub(b,r.vec2.scale(b,c,.5),M(a,c,f))}}();a.getPaddingMapTranslation=function(){var b=n.mat2df64.create(),c=w.vec2f64.create();return function(f,e,h,d){var g=P(e);e=S(e);r.vec2.set(c,g,g);u.mat2d.fromScaling(b,c);u.mat2d.rotate(b,b,e);u.mat2d.translate(b,b,a.getPaddingScreenTranslation(c,h,d));u.mat2d.translate(b,
b,[0,d.top-d.bottom]);return r.vec2.set(f,b[4],b[5])}}();a.getResolution=P;a.getResolutionToScaleFactor=U;a.getMatrix=function(){var a=w.vec2f64.create(),b=w.vec2f64.create(),c=w.vec2f64.create();return function(f,e,h,d,g,m){r.vec2.negate(a,e);r.vec2.scale(b,h,.5*m);r.vec2.set(c,1/d*m,-1/d*m);u.mat2d.identity(f);u.mat2d.translate(f,f,b);g&&u.mat2d.rotate(f,f,g);u.mat2d.scale(f,f,c);u.mat2d.translate(f,f,a);return f}}();a.getTransform=function(){var b=w.vec2f64.create();return function(c,f,e,h){var d=
P(f),g=S(f);F(b,f.targetGeometry);return a.getMatrix(c,b,e,d,g,h)}}();a.getTransformNoRotation=function(){var b=w.vec2f64.create();return function(c,f,e,h){var d=P(f);F(b,f.targetGeometry);return a.getMatrix(c,b,e,d,0,h)}}();a.getWorldWidth=T;a.getWorldScreenWidth=function(a,b){return Math.round(T(a)/b)};a.createAsync=function(a,b){return e.safeCast(K(a,b))};a.angleBetween=function(){var a=w.vec2f64.create(),b=w.vec2f64.create(),c=[0,0,0];return function(f,e,h){r.vec2.subtract(a,f,e);r.vec2.normalize(a,
a);r.vec2.subtract(b,f,h);r.vec2.normalize(b,b);r.vec2.cross(c,a,b);f=Math.acos(r.vec2.dot(a,b)/(r.vec2.length(a)*r.vec2.length(b)))*W;0>c[2]&&(f=-f);isNaN(f)&&(f=0);return f}}();a.addPadding=function(){var b=w.vec2f64.create();return function(c,f,e,h){var d=c.targetGeometry;I(c,f);a.getPaddingMapTranslation(b,f,e,h);d.x+=b[0];d.y+=b[1];return c}}();a.removePadding=function(){var b=w.vec2f64.create();return function(c,f,e,h){var d=c.targetGeometry;I(c,f);a.getPaddingMapTranslation(b,f,e,h);d.x-=b[0];
d.y-=b[1];return c}}();a.centerAt=function(){var a=w.vec2f64.create();return function(b,c,f){I(b,c);c=b.targetGeometry;var e=E(f),h=E(c);F(a,f);B(a,a,e,h);c.x=a[0];c.y=a[1];return b}}();a.pixelSizeAt=function(a,b,c){return P(b)};a.resize=function(){var b=w.vec2f64.create();return function(c,f,e,h,d){d||(d="center");r.vec2.sub(b,e,h);r.vec2.scale(b,b,.5);e=b[0];h=b[1];switch(d){case "center":r.vec2.set(b,0,0);break;case "left":r.vec2.set(b,-e,0);break;case "top":r.vec2.set(b,0,h);break;case "right":r.vec2.set(b,
e,0);break;case "bottom":r.vec2.set(b,0,-h);break;case "top-left":r.vec2.set(b,-e,h);break;case "bottom-left":r.vec2.set(b,-e,-h);break;case "top-right":r.vec2.set(b,e,h);break;case "bottom-right":r.vec2.set(b,e,-h)}a.translateBy(c,f,b);return c}}();a.rotateBy=function(a,b,c){I(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){I(a,b);a.rotation=c;return a};a.scaleBy=function(){var b=w.vec2f64.create();return function(c,f,e,h,d){I(c,f);isNaN(e)||0===e||(a.toMap(b,h,f,d),c.scale=f.scale*e,a.toScreen(b,
b,c,d),a.translateBy(c,c,r.vec2.set(b,b[0]-h[0],h[1]-b[1])));return c}}();a.scaleTo=function(a,b,c){I(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var b=w.vec2f64.create();return function(c,f,e,h,d,g){I(c,f);isNaN(e)||0===e||(a.toMap(b,d,f,g),c.scale=f.scale*e,c.rotation+=h,a.toScreen(b,b,c,g),a.translateBy(c,c,r.vec2.set(b,b[0]-d[0],d[1]-b[1])));return c}}();a.padAndScaleAndRotateBy=function(){var b=w.vec2f64.create(),c=w.vec2f64.create();return function(f,e,h,d,g,m,k){a.getPaddingScreenTranslation(c,
m,k);r.vec2.add(b,g,c);return d?a.scaleAndRotateBy(f,e,h,d,b,m):a.scaleBy(f,e,h,b,m)}}();a.toMap=function(){var a=n.mat2df64.create();return function(b,c,f,e){return r.vec2.transformMat2d(b,c,O(a,f,e,1))}}();a.toScreen=function(){var b=n.mat2df64.create();return function(c,f,e,h){return r.vec2.transformMat2d(c,f,a.getTransform(b,e,h,1))}}();a.translateBy=function(){var a=w.vec2f64.create(),b=n.mat2df64.create();return function(c,f,e){I(c,f);var h=P(f),d=c.targetGeometry;u.mat2d.fromRotation(b,S(f));
u.mat2d.scale(b,b,w.vec2f64.fromValues(h,h));r.vec2.transformMat2d(a,e,b);d.x+=a[0];d.y+=a[1];return c}}()})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./ArrayPool ./arrayUtils ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u){function n(a){return a?a.isInstanceOf&&a.isInstanceOf(E):!1}function r(a){return a?n(a)?
a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function w(a){if(a&&a.length)return a[0]}function t(a,b,c,f){b&&b.forEach(function(b,e,h){a.push(b);t(a,c.call(f,b,e,h),c,f)})}d=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var y=function(){},x=new b(d,!0,function(a){a.item=null;a.target=null}),
A=new Set,z=new Set,C=new Set,D=new Map,B=0,E=function(a){function b(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:B++});return b}l(b,a);h=b;b.ofType=function(a){if(!a)return h;if(D.has(a))return D.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var f=a.typeMap[c].prototype.declaredClass;
b=b?b+(" | "+f):f}b=h.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});b.isCollection=n;c={Type:a,ensureType:"function"===typeof a?u.ensureType(a):u.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});D.set(a,b);return b};b.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||n(a)?{items:a}:a:{}};Object.defineProperty(b.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,
[0,this.length].concat(r(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});b.prototype.on=function(a,b){if("change"===a){var c=this._chgListeners,f={removed:!1,callback:b};c.push(f);this._notifications&&this._notifications.push({listeners:c.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=y;f.removed=!0;c.splice(c.indexOf(f),1)}}}return this._emitter.on(a,b)};b.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this._emitter.hasEventListener(a)};
b.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};b.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(r(a)));this._emitAfterChanges();return this};b.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||
[];this._emitAfterChanges();return a};b.prototype.clone=function(){return this._createNewInstance({items:this._items.map(m.clone)})};b.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(r);return this._createNewInstance({items:(c=this._items).concat.apply(c,a)})};b.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),f=c.length,e=0;e<f;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};b.prototype.every=
function(a,b){return this._items.every(a,b)};b.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};b.prototype.find=function(a,b){return c.find(this._items,a,b)};b.prototype.findIndex=function(a,b){return c.findIndex(this._items,a,b)};b.prototype.flatten=function(a,b){var c=[];t(c,this,a,b);return new h(c)};b.prototype.forEach=function(a,b){return this._items.forEach(a,b)};b.prototype.getItemAt=function(a){return this._items[a]};
b.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};b.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};b.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};b.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};b.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};b.prototype.map=function(a,
b){a=this._items.map(a,b);return new h({items:a})};b.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};b.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=w(this._splice(this.length-1,1));this._emitAfterChanges();return a}};b.prototype.push=function(){for(var a=[],b=
0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};b.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};b.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};b.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};b.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=w(this._splice(a,1)),this._emitAfterChanges(),a};b.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=n(a)?a.toArray():a;for(var b=this._items,c=[],f=a.length,e=0;e<f;e++){var h=b.indexOf(a[e]);if(-1<h){for(var d=e+1,g=h+1,m=Math.min(a.length-d,b.length-g),k=0;k<m&&a[d+k]===b[g+k];)k++;d=1+k;(h=this._splice(h,d))&&0<h.length&&c.push.apply(c,h);e+=d-1}}this._emitAfterChanges();return c};b.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};b.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=w(this._splice(0,1));this._emitAfterChanges();return a}};b.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};b.prototype.some=function(a,b){return this._items.some(a,
b)};b.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};b.prototype.splice=function(a,b){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};b.prototype.toArray=function(){return this._items.slice()};b.prototype.toJSON=
function(){return this.toArray()};b.prototype.toLocaleString=function(){return this._items.toLocaleString()};b.prototype.toString=function(){return this._items.toString()};b.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};b.prototype._createNewInstance=function(a){return new this.constructor(a)};b.prototype._splice=function(a,
b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];var e=this._items,h=this.constructor.prototype.itemType,d,g;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=f.schedule(this._boundDispatch));if(b){g=e.splice(a,b);if(this.hasEventListener("before-remove")){var m=x.acquire();m.target=this;m.cancellable=!0;for(var k=0,n=g.length;k<n;k++)d=
g[k],m.reset(d),this.emit("before-remove",m),m.defaultPrevented&&(g.splice(k,1),e.splice(a,0,d),a+=1,--k,--n);x.release(m)}this.length=this._items.length;if(this.hasEventListener("after-remove")){d=x.acquire();d.target=this;d.cancellable=!1;n=g.length;for(k=0;k<n;k++)d.reset(g[k]),this.emit("after-remove",d);x.release(d)}}if(c&&c.length){if(h){k=[];for(n=0;n<c.length;n++)d=c[n],m=h.ensureType(d),null==m&&null!=d||k.push(m);c=k}h=this.hasEventListener("before-add");k=this.hasEventListener("after-add");
n=a===this.length;if(h||k){d=x.acquire();d.target=this;d.cancellable=!0;m=x.acquire();m.target=this;m.cancellable=!1;for(var p=0,r=c;p<r.length;p++){var u=r[p];h?(d.reset(u),this.emit("before-add",d),d.defaultPrevented||(n?e.push(u):e.splice(a++,0,u),this._set("length",e.length),k&&(m.reset(u),this.emit("after-add",m)))):(n?e.push(u):e.splice(a++,0,u),this._set("length",e.length),m.reset(u),this.emit("after-add",m))}x.release(m);x.release(d)}else n?e.push.apply(e,c):e.splice.apply(e,[a,0].concat(c)),
this._set("length",e.length)}(c&&c.length||g&&g.length)&&this._notifyChangeEvent(c,g);return g};b.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=x.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;x.release(b)}return a};b.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=x.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);x.release(a)}};b.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};b.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;A.clear();z.clear();C.clear();for(var f=0;f<b.length;f++){var h=b[f],d=h.added,h=h.removed;if(d)if(0===C.size&&0===z.size)for(var g=0,m=d;g<m.length;g++)d=m[g],A.add(d);
else for(g=0,m=d;g<m.length;g++)d=m[g],z.has(d)?(C.add(d),z.delete(d)):C.has(d)||A.add(d);if(h)if(0===C.size&&0===A.size)for(g=0;g<h.length;g++)d=h[g],z.add(d);else for(g=0;g<h.length;g++)d=h[g],A.has(d)?A.delete(d):(C.delete(d),z.add(d))}var k=e.acquire();A.forEach(function(a){k.push(a)});var n=e.acquire();z.forEach(function(a){n.push(a)});var p=c._items,r=a.items,u=e.acquire();C.forEach(function(a){r.indexOf(a)!==p.indexOf(a)&&u.push(a)});if(a.listeners&&(k.length||n.length||u.length))for(b={target:c,
added:k,removed:n,moved:u},f=a.listeners.length,d=0;d<f;d++)h=a.listeners[d],h.removed||h.callback.call(c,b);e.release(k);e.release(n);e.release(u)},c=this,f=0;f<a.length;f++)b(a[f]);A.clear();z.clear();C.clear()}};var h;b.isCollection=n;g([p.property()],b.prototype,"length",void 0);g([p.property()],b.prototype,"items",null);return b=h=g([p.subclass("esri.core.Collection")],b)}(p.declared(k,h));return E})},"esri/core/Evented":function(){define(["require","exports","./tsSupport/extendsHelper","@dojo/framework/shim/Map"],
function(d,a,l,g){var k=function(){function a(a){this.target=a}a.prototype.clear=function(){this._listenersMap&&this._listenersMap.clear()};a.prototype.emit=function(a,e){var c=this;a=this._listenersMap&&this._listenersMap.get(a);if(!a)return!1;e=e||{};e.target||(e.target=this.target);a.slice().forEach(function(a){a.call(c.target,e)});return 0<a.length};a.prototype.on=function(a,e){var c=this;if(Array.isArray(a)){var b=a.map(function(a){return c.on(a,e)});return{remove:function(){return b.forEach(function(a){return a.remove()})}}}if(-1<
a.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new g.default);var f=this._listenersMap.get(a)||[];f.push(e);this._listenersMap.set(a,f);return{remove:function(){var b=c._listenersMap&&c._listenersMap.get(a)||[];0<=b.indexOf(e)&&b.splice(b.indexOf(e),1)}}};a.prototype.once=function(a,e){var c=this,b;return b=this.on(a,function(a){b.remove();e.call(c.target,a)})};a.prototype.hasEventListener=function(a){a=
this._listenersMap&&this._listenersMap.get(a);return null!=a&&0<a.length};return a}();d=function(){function a(){this._emitter=new k(this)}a.prototype.emit=function(a,e){return this._emitter.emit(a,e)};a.prototype.on=function(a,e){return this._emitter.on(a,e)};a.prototype.once=function(a,e){return this._emitter.once(a,e)};a.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return a}();(function(a){a.EventedMixin=function(a){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}l(c,a);c.prototype.emit=function(a,c){return this._emitter.emit(a,c)};c.prototype.on=function(a,c){return this._emitter.on(a,c)};c.prototype.once=function(a,c){return this._emitter.once(a,c)};c.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return c}(a)}})(d||(d={}));return d})},"@dojo/framework/shim/Map":function(){(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=
d)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ../has/has ./Symbol".split(" "),d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("tslib"),g=d("./iterator"),k=d("./global"),e=d("./object"),c=d("../has/has");d("./Symbol");a.Map=k.default.Map;c.default("es6-map")||(a.Map=(h=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(g.isArrayLike(a))for(var b=0;b<a.length;b++){var c=a[b];
this.set(c[0],c[1])}else try{for(var b=l.__values(a),e=b.next();!e.done;e=b.next())c=e.value,this.set(c[0],c[1])}catch(w){h={error:w}}finally{try{e&&!e.done&&(d=b.return)&&d.call(b)}finally{if(h)throw h.error;}}var h,d}a.prototype._indexOfKey=function(a,c){for(var b=0,f=a.length;b<f;b++)if(e.is(a[b],c))return b;return-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=
0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=function(){var a=this,c=this._keys.map(function(b,c){return[b,a._values[c]]});return new g.ShimIterator(c)};a.prototype.forEach=function(a,c){for(var b=this._keys,f=this._values,e=0,h=b.length;e<h;e++)a.call(c,f[e],b[e],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<
this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new g.ShimIterator(this._keys)};a.prototype.set=function(a,c){var b=this._indexOfKey(this._keys,a),b=0>b?this._keys.length:b;this._keys[b]=a;this._values[b]=c;return this};a.prototype.values=function(){return new g.ShimIterator(this._values)};a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),h[Symbol.species]=h,h));a.default=a.Map;var h})},"@dojo/framework/shim/object":function(){(function(d){"object"===typeof module&&
"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define(["require","exports","./global","../has/has","./Symbol"],d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("./global"),g=d("../has/has"),k=d("./Symbol");g.default("es6-object")?(d=l.default.Object,a.assign=d.assign,a.getOwnPropertyDescriptor=d.getOwnPropertyDescriptor,a.getOwnPropertyNames=d.getOwnPropertyNames,a.getOwnPropertySymbols=d.getOwnPropertySymbols,
a.is=d.is,a.keys=d.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(e){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];if(null==e)throw new TypeError("Cannot convert undefined or null to object");var d=Object(e);c.forEach(function(b){b&&a.keys(b).forEach(function(a){d[a]=b[a]})});return d},a.getOwnPropertyDescriptor=function(a,c){k.isSymbol(c);return Object.getOwnPropertyDescriptor(a,c)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},
a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},a.is=function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c});g.default("es2017-object")?(d=l.default.Object,a.getOwnPropertyDescriptors=d.getOwnPropertyDescriptors,a.entries=d.entries,a.values=d.values):(a.getOwnPropertyDescriptors=function(e){return a.getOwnPropertyNames(e).reduce(function(c,h){c[h]=a.getOwnPropertyDescriptor(e,
h);return c},{})},a.entries=function(e){return a.keys(e).map(function(a){return[a,e[a]]})},a.values=function(e){return a.keys(e).map(function(a){return e[a]})})})},"esri/views/2d/layers/features/controllers":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/promiseUtils".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});
a.loadControllerModule=function(a){switch(a){case "on-demand":return c.create(function(a){return d(["./controllers/OnDemandController"],a)});case "memory":return c.create(function(a){return d(["./controllers/MemoryController"],a)});case "stream":return c.create(function(a){return d(["./controllers/StreamController"],a)});default:return c.reject(new e("mapview-controller:bad-type","Unable to create controller for unknown type: "+a))}}})},"esri/views/2d/layers/features/processors":function(){define(["require",
"exports","../../../../core/tsSupport/assignHelper","../../../../core/promiseUtils"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});a.loadProcessorModule=function(a){return"heatmap"===a?g.create(function(a){return d(["./processors/HeatmapProcessor"],a)}):g.create(function(a){return d(["./processors/SymbolProcessor"],a)})}})},"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper @dojo/framework/shim/Set ../../../../../core/Evented ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../tiling/TileKey".split(" "),
function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});var f={added:[],removed:[]},p=new k.default,u=new b(0,0,0,0);d=function(a){function b(b){var f=a.call(this)||this;f._tiles=new Map;f._index=h(9,c("csp-restrictions")?function(a){return{minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);f.tiles=[];f.tileScheme=b;return f}l(b,a);b.prototype.destroy=function(){this._tiles.clear()};b.prototype.has=function(a){return this._tiles.has(a)};
b.prototype.get=function(a){return this._tiles.get(a)};b.prototype.findByKey=function(a){return this._tiles.get(a.id)};b.prototype.intersections=function(a,b){var c="string"===typeof a?this.get(a):a;if(!c)return[];var f=b*c.resolution;b=c.bounds[0]-f;a=c.bounds[1]-f;for(var e=c.bounds[2]+f,c=c.bounds[3]+f,f=[],h=0,d=this._index.search({minX:b,minY:a,maxX:e,maxY:c});h<d.length;h++){var g=d[h],m=g.bounds.slice();m[0]=Math.max(m[0],b);m[1]=Math.max(m[1],a);m[2]=Math.min(m[2],e);m[3]=Math.min(m[3],c);
0<m[2]-m[0]&&0<m[3]-m[1]&&f.push({bounds:m,tile:g})}return f};b.prototype.boundsIntersections=function(a){return this._index.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]})};b.prototype.setViewState=function(a){var b=this.tileScheme.getTileCoverage(a,0);if(b){a=b.spans;var b=b.lodInfo,c=b.level;if(0<a.length)for(var e=0;e<a.length;e++)for(var h=a[e],d=h.row,g=h.colTo,k=h.colFrom;k<=g;k++){var n=u.set(c,d,b.normalizeCol(k),b.getWorldForColumn(k)).id;p.add(n);this.has(n)||(h=new m.default(this.tileScheme,
n),this._tiles.set(n,h),this._index.insert(h),this.tiles.push(h),f.added.push(h))}for(a=this.tiles.length-1;0<=a;a--)h=this.tiles[a],p.has(h.id)||(this._tiles.delete(h.id),this.tiles.splice(a,1),this._index.remove(h),f.removed.push(h));(f.added.length||f.removed.length)&&this.emit("update",f);p.clear();f.added.length=0;f.removed.length=0}};return b}(e);a.default=d})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(d){function a(b,c){if(!(this instanceof a))return new a(b,
c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));c&&("function"===typeof c?this.toBBox=c:this._initFormat(c));this.clear()}function l(a,b){g(a,0,a.children.length,b,a)}function g(a,b,c,f,e){e||(e=p(null));e.minX=Infinity;e.minY=Infinity;e.maxX=-Infinity;e.maxY=-Infinity;for(var h;b<c;b++)h=a.children[b],k(e,a.leaf?f(h):h);return e}function k(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,
b.maxY);return a}function e(a,b){return a.minX-b.minX}function c(a,b){return a.minY-b.minY}function h(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function m(a){return a.maxX-a.minX+(a.maxY-a.minY)}function b(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function f(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function p(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function u(a,b,c,f,e){for(var h=
[b,c],g;h.length;)c=h.pop(),b=h.pop(),c-b<=f||(g=b+Math.ceil((c-b)/f/2)*f,d(a,g,b,c,e),h.push(b,g,g,c))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var c=this.data,e=[],h=this.toBBox;if(!f(a,c))return e;for(var d=[],g,m,k,n;c;){g=0;for(m=c.children.length;g<m;g++)k=c.children[g],n=c.leaf?h(k):k,f(a,n)&&(c.leaf?e.push(k):b(a,n)?this._all(k,e):d.push(k));c=d.pop()}return e},collides:function(a){var c=this.data,e=this.toBBox;if(!f(a,c))return!1;for(var h=[],d,g,m,k;c;){d=
0;for(g=c.children.length;d<g;d++)if(m=c.children[d],k=c.leaf?e(m):m,f(a,k)){if(c.leaf||b(a,k))return!0;h.push(m)}c=h.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=
a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(a,c){if(!a)return this;for(var f=this.data,e=this.toBBox(a),h=[],d=[],g,m,k,n;f||h.length;){f||(f=h.pop(),m=h[h.length-1],g=d.pop(),n=!0);if(f.leaf){a:{k=a;var p=f.children,u=c;if(u){for(var r=0;r<p.length;r++)if(u(k,p[r])){k=r;break a}k=-1}else k=p.indexOf(k)}if(-1!==k){f.children.splice(k,1);h.push(f);this._condense(h);break}}n||f.leaf||!b(f,e)?m?(g++,
f=m.children[g],n=!1):f=null:(h.push(f),d.push(g),g=0,m=f,f=f.children[0])}return this},toBBox:function(a){return a},compareMinX:e,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,c,f){var e=c-b+1,h=this._maxEntries,d;if(e<=h)return d=p(a.slice(b,c+1)),l(d,this.toBBox),d;f||(f=Math.ceil(Math.log(e)/Math.log(h)),h=Math.ceil(e/
Math.pow(h,f-1)));d=p([]);d.leaf=!1;d.height=f;var e=Math.ceil(e/h),h=e*Math.ceil(Math.sqrt(h)),g,m,k;for(u(a,b,c,h,this.compareMinX);b<=c;b+=h)for(m=Math.min(b+h-1,c),u(a,b,m,e,this.compareMinY),g=b;g<=m;g+=e)k=Math.min(g+e-1,m),d.children.push(this._build(a,g,k,f-1));l(d,this.toBBox);return d},_chooseSubtree:function(a,b,c,f){for(var e,d,g,m,k,n,p,u;;){f.push(b);if(b.leaf||f.length-1===c)break;p=u=Infinity;e=0;for(d=b.children.length;e<d;e++)g=b.children[e],k=h(g),n=(Math.max(g.maxX,a.maxX)-Math.min(g.minX,
a.minX))*(Math.max(g.maxY,a.maxY)-Math.min(g.minY,a.minY))-k,n<u?(u=n,p=k<p?k:p,m=g):n===u&&k<p&&(p=k,m=g);b=m||b.children[0]}return b},_insert:function(a,b,c){var f=this.toBBox;c=c?a:f(a);var f=[],e=this._chooseSubtree(c,this.data,b,f);e.children.push(a);for(k(e,c);0<=b;)if(f[b].children.length>this._maxEntries)this._split(f,b),b--;else break;this._adjustParentBBoxes(c,f,b)},_split:function(a,b){var c=a[b],f=c.children.length,e=this._minEntries;this._chooseSplitAxis(c,e,f);f=this._chooseSplitIndex(c,
e,f);f=p(c.children.splice(f,c.children.length-f));f.height=c.height;f.leaf=c.leaf;l(c,this.toBBox);l(f,this.toBBox);b?a[b-1].children.push(f):this._splitRoot(c,f)},_splitRoot:function(a,b){this.data=p([a,b]);this.data.height=a.height+1;this.data.leaf=!1;l(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var f,e,d,m,k,p,n;k=p=Infinity;for(f=b;f<=c-b;f++)e=g(a,0,f,this.toBBox),d=g(a,f,c,this.toBBox),m=Math.max(0,Math.min(e.maxX,d.maxX)-Math.max(e.minX,d.minX))*Math.max(0,Math.min(e.maxY,d.maxY)-
Math.max(e.minY,d.minY)),e=h(e)+h(d),m<k?(k=m,n=f,p=e<p?e:p):m===k&&e<p&&(p=e,n=f);return n},_chooseSplitAxis:function(a,b,f){var h=a.leaf?this.compareMinX:e,d=a.leaf?this.compareMinY:c,g=this._allDistMargin(a,b,f,h);b=this._allDistMargin(a,b,f,d);g<b&&a.children.sort(h)},_allDistMargin:function(a,b,c,f){a.children.sort(f);f=this.toBBox;var e=g(a,0,b,f),h=g(a,c-b,c,f),d=m(e)+m(h),p,n;for(p=b;p<c-b;p++)n=a.children[p],k(e,a.leaf?f(n):n),d+=m(e);for(p=c-b-1;p>=b;p--)n=a.children[p],k(h,a.leaf?f(n):
n),d+=m(h);return d},_adjustParentBBoxes:function(a,b,c){for(;0<=c;c--)k(b[c],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():l(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+
a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function d(g,k,e,c,h){for(;c>e;){if(600<c-e){var m=c-e+1,b=k-e+1,f=Math.log(m),p=.5*Math.exp(2*f/3),f=.5*Math.sqrt(f*p*(m-p)/m)*(0>b-m/2?-1:1);d(g,k,Math.max(e,Math.floor(k-b*p/m+f)),Math.min(c,Math.floor(k+(m-b)*p/m+f)),h)}m=g[k];b=e;p=c;a(g,e,k);for(0<h(g[c],m)&&a(g,e,c);b<p;){a(g,b,p);b++;for(p--;0>h(g[b],m);)b++;for(;0<h(g[p],m);)p--}0===h(g[e],m)?a(g,e,p):(p++,a(g,p,c));p<=k&&(e=p+1);k<=p&&(c=p-
1)}}function a(a,d,e){var c=a[d];a[d]=a[e];a[e]=c}function l(a,d){return a<d?-1:a>d?1:0}return function(a,k,e,c,h){d(a,k,e||0,c||a.length-1,h||l)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports @dojo/framework/shim/Set ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(d,a,l,g,k,e,c,h){function m(a,c){var b=a.bounds,
f=c.bounds;return a.key.id!==c.key.id&&a.key.world===c.key.world&&b[0]<=f[0]&&b[1]<=f[1]&&b[2]>=f[2]&&b[3]>=f[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=m;a.isChildOf=function(a,c){return m(c,a)};d=function(){function a(a,b){this.bounds=e.create();this.key=new h(0,0,0,0);this.objectIds=new l.default;this.key.set(b);b=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=b.resolution;this.scale=b.scale;this.level=
b.level;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extent",{get:function(){return k.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}},enumerable:!0,configurable:!0});
a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var b=this.key.getChildKeys(),c=g.acquire(),e=0;e<b.length;e++)c[e]=new a(this.tileInfoView,b[e]);return c};a.prototype.getQuantizationParameters=function(){return c.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};
return a}();a.Tile=d;a.default=d})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});var b=new e.default({upperLeft:"upper-left",lowerLeft:"lower-left"});d=function(a){function c(b){b=a.call(this,
b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}l(c,a);f=c;c.prototype.clone=function(){return new f(h.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var f;g([m.property({type:k.Extent,json:{write:!0}})],c.prototype,"extent",void 0);g([m.property({type:["view","edit"],json:{write:!0}})],c.prototype,"mode",void 0);g([m.property({type:String,json:{read:b.read,write:b.write}})],c.prototype,"originPosition",
void 0);g([m.property({type:Number,json:{write:!0}})],c.prototype,"tolerance",void 0);return c=f=g([m.subclass("esri.tasks.support.QuantizationParameters")],c)}(m.declared(c));a.default=d})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(d,a,l){return function(){function a(a,e,c,h){this.set(a,e,c,h)}a.from=function(d,e,c,h){return a.pool.acquire(d,e,c,h)};a.getId=function(a,e,c,h){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+
a.world:a+"/"+e+"/"+c+"/"+h};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,e,c,h){null==a?this.world=this.col=this.row=
this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),e=a[1],c=a[2],h=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(e),this.col=parseFloat(c),this.world=parseFloat(h)):(this.level=+a,this.row=+e,this.col=+c,this.world=+h||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var d=this.level+1,e=this.row<<
1,c=this.col<<1,h=this.world;return[a.pool.acquire(d,e,c,h),a.pool.acquire(d,e,c+1,h),a.pool.acquire(d,e+1,c,h),a.pool.acquire(d,e+1,c+1,h)]};a.prototype.compareRowMajor=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(d){return d.map(function(e){return a.from(e)}).sort(function(a,c){return a.compareRowMajor(c)}).map(function(a){return a.id})};a.pool=new l(a,!0,null,25,50);return a}()})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(d,a,l,g,k,e,c){var h=new e("0/0/0/0"),m=function(){function a(a,b,c,f,e,h,d,g){this.x=a;this.ymin=b;this.ymax=c;this.invM=f;this.leftAdjust=e;this.rightAdjust=h;this.leftBound=d;this.rightBound=g}a.create=function(b,c){var f;b[1]>c[1]&&(f=[c,b],b=f[0],c=f[1]);f=b[0];b=b[1];var e=c[0];c=c[1];var h=e-f,d=c-b,d=0!==d?h/d:0,g=(Math.ceil(b)-b)*d,m=(Math.floor(b)-b)*d;return new a(f,Math.floor(b),Math.ceil(c),d,0>h?g:m,0>h?m:g,0>h?e:f,0>h?f:e)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var f=a.lods.slice();f.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=f.map(function(c){return g.create(a,
c,b)});f.forEach(function(a,b){c._infoByLevel[a.level]=e[b];c._infoByScale[a.scale]=e[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,
c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};a.prototype.getTileCoverage=function(a,f,e){void 0===f&&(f=192);void 0===e&&(e="closest");e="closest"===e?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var h=k.pool.acquire(e),d=this._wrap,g;g=Infinity;var p=-Infinity,n,u,l=h.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-f;b[1][0]=b[2][0]=a.size[0]+f;b[2][1]=b[3][1]=a.size[1]+f;for(f=0;f<
b.length;f++){var C=b[f];a.toMap(C,C);C[0]=e.getColumnForX(C[0]);C[1]=e.getRowForY(C[1])}a=[];C=3;for(f=0;4>f;f++){if(b[f][1]!==b[C][1]){var D=m.create(b[f],b[C]);g=Math.min(D.ymin,g);p=Math.max(D.ymax,p);void 0===a[D.ymin]&&(a[D.ymin]=[]);a[D.ymin].push(D)}C=f}if(null==g||null==p||100<p-g)return null;for(C=[];g<p;){null!=a[g]&&(C=C.concat(a[g]));n=Infinity;u=-Infinity;for(f=C.length-1;0<=f;f--)D=C[f],n=Math.min(n,D.getLeftCol()),u=Math.max(u,D.getRightCol());n=Math.floor(n);u=Math.floor(u);if(g>=
e.first[1]&&g<=e.last[1])if(d)if(e.size[0]<e.worldSize[0])for(D=Math.floor(u/e.worldSize[0]),f=Math.floor(n/e.worldSize[0]);f<=D;f++)l.push(new c(g,Math.max(e.getFirstColumnForWorld(f),n),Math.min(e.getLastColumnForWorld(f),u)));else l.push(new c(g,n,u));else n>e.last[0]||u<e.first[0]||(n=Math.max(n,e.first[0]),u=Math.min(u,e.last[0]),l.push(new c(g,n,u)));g+=1;for(f=C.length-1;0<=f;f--)D=C[f],D.ymax>=g?D.incrRow():C.splice(f,1)}return h};a.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-
1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(h,c,h);for(var f=c.denormalizeCol(h.col,h.world),e=0,d=a.spans;e<d.length;e++){var g=
d[e];if(g.row===h.row&&g.colFrom<=f&&g.colTo>=f)return!0}}if(c.resolution<b.resolution){d=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=d[0];var f=d[1],e=d[2],d=d[3],m=b.denormalizeCol(h.col,h.world),g=c.getColumnForX(b.getXForColumn(m)),k=c.getRowForY(b.getYForRow(h.row)),m=c.getColumnForX(b.getXForColumn(m+1))-1;b=c.getRowForY(b.getYForRow(h.row+1))-1;
return!(g>d||m<e||k>f||b<a)}var p=c.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=p&&a.colTo>=p})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=l.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];
for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c,f,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===
b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var f=this._infoByLevel[c.level];a.set(c);if(b.resolution<f.resolution)return null;if(b.resolution===f.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*f.resolution/b.resolution+.01);a.row=Math.floor(c.row*f.resolution/b.resolution+.01);
return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(d,a,l,g){function k(a,e,d){a[0]=e;a[1]=d;return a}var e=new g("0/0/0/0");return function(){function a(a,c,b,f,e,d,g,k,l,t,y,x){this.level=a;this.resolution=c;this.scale=b;this.origin=f;this.first=e;this.last=d;this.size=g;this.norm=k;this.worldStart=l;this.worldEnd=t;this.worldSize=y;this.wrap=x}a.create=function(c,e,b){var f=l.getInfo(c.spatialReference),
h=[c.origin.x,c.origin.y],d=[c.size[0]*e.resolution,c.size[1]*e.resolution],g=[-Infinity,-Infinity],m=[Infinity,Infinity],w=[Infinity,Infinity];b&&(k(g,Math.max(0,Math.floor((b.xmin-h[0])/d[0])),Math.max(0,Math.floor((h[1]-b.ymax)/d[1]))),k(m,Math.max(0,Math.floor((b.xmax-h[0])/d[0])),Math.max(0,Math.floor((h[1]-b.ymin)/d[1]))),k(w,m[0]-g[0]+1,m[1]-g[1]+1));var t;c.isWrappable?(c=[Math.ceil(Math.round(2*f.origin[1]/e.resolution)/c.size[0]),w[1]],f=[Math.floor((f.origin[0]-h[0])/d[0]),g[1]],b=[c[0]+
f[0]-1,m[1]],t=!0):(f=g,b=m,c=w,t=!1);return new a(e.level,e.resolution,e.scale,h,g,m,w,d,f,b,c,t)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var c=this.worldSize[0];return 0>a?c-1-Math.abs((a+1)%c):a%c};a.prototype.denormalizeCol=function(a,c){return this.wrap?this.worldSize[0]*c+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=
function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,c,b){void 0===b&&(b=!1);e.set(c);var f=b?e.col:this.denormalizeCol(e.col,e.world),d=e.row;c=this.getXForColumn(f);
b=this.getYForRow(d+1);f=this.getXForColumn(f+1);d=this.getYForRow(d);a[0]=c;a[1]=b;a[2]=f;a[3]=d;return a};a.prototype.getTileCoords=function(a,c,b){void 0===b&&(b=!1);e.set(c);c=b?e.col:this.denormalizeCol(e.col,e.world);Array.isArray(a)?k(a,this.getXForColumn(c),this.getYForRow(e.row)):(a.x=this.getXForColumn(c),a.y=this.getYForRow(e.row));return a};return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],
function(d,a,l,g,k){return function(){function a(a){this.lodInfo=a;this.spans=l.acquire()}a.prototype.release=function(){for(var a=0,e=this.spans;a<e.length;a++)k.pool.release(e[a]);l.release(this.spans)};a.prototype.forEach=function(a,e){var c=this.spans,b=this.lodInfo,f=b.level;if(0!==c.length)for(var d=0;d<c.length;d++)for(var h=c[d],g=h.row,k=h.colTo,h=h.colFrom;h<=k;h++)a.call(e,f,g,b.normalizeCol(h),b.getWorldForColumn(h))};a.pool=new g(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports","../../../core/ObjectPool"],function(d,a,l){return function(){function a(a,e,c){this.row=a;this.colFrom=e;this.colTo=c}a.pool=new l(a,!0);return a}()})},"esri/views/2d/layers/features/controllers/OnDemandController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../../../../../core/asyncUtils ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/Extent ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/executeTileQuery ../../../../../tasks/operations/query ../../../engine ./BaseController ../support/DataTile ../support/DataTileFeaturesIndex ../support/Tile ../support/TileUpdateQueue ../../../tiling/TileQueue ../../../../support/OrderedQueueProcessor".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F){Object.defineProperty(a,"__esModule",{value:!0});var H=p.getLogger("esri.views.2d.layers.features.controllers.OnDemandController");d=f("esri-featurelayer-webgl");f=f("esri-mobile");var G=d&&"object"===typeof d&&null!=d.maxDrillLevel?d.maxDrillLevel:f?1:4,J=d&&"object"===typeof d&&null!=d.maxRecordCountFactor?d.maxRecordCountFactor:f?1:3,K=d&&"object"===typeof d&&null!=d.enablePBFQuery?d.enablePBFQuery:!0,I=new h.default,M=[];h=function(a){function f(){var b=
null!==a&&a.apply(this,arguments)||this;b.type="on-demand";b._queryInfoHash=null;b._dataTileIndex=new C.default;b._editsQueue=new F.OrderedQueueProcessor({concurrency:1,process:function(a,c){return b._processEditsEvent(a,c)}});b._featuresInFlight=new Map;return b}l(f,a);f.prototype.initialize=function(){var a=this;this._set("queryEngine",this._createQueryEngine());this._set("featureStore",this.queryEngine.featureStore);this._dataTileIndex.featureStore=this.featureStore;this._dataTileIndex.forEach(function(a){return a.done=
!1});this._fetchQueue=new E({concurrency:10,strategy:"center-first",tileInfoView:this.tileStore.tileScheme,process:function(b,c){return a._fetchTile(b,a.queryInfo,c)}});this._patchQueue=new E({concurrency:10,strategy:"center-first",tileInfoView:this.tileStore.tileScheme,process:function(b,c){return a._fetchTile(b.dataTile,b.queryInfo,c)}});this._updateQueue=new B.default({tileInfoView:this.tileStore.tileScheme,process:function(b,c,f){return a._updateTile(b,c,f)}})};f.prototype.destroy=function(){this._fetchQueue.clear();
this._patchQueue.clear();this._updateQueue.clear();this._editsQueue.destroy();this.queryEngine.destroy()};Object.defineProperty(f.prototype,"updating",{get:function(){return this._fetchQueue.updating||this._updateQueue.updating},enumerable:!0,configurable:!0});f.prototype.update=function(a,b){return c(this,void 0,void 0,function(){var c,f,d=this;return e(this,function(e){switch(e.label){case 0:return this.validateConfig(a,b),c=this.renderer.getAttributeHash(),f=a.availableFields.filter(function(a){return-1===
d.availableFields.indexOf(a)}),this._set("config",a),[4,this.updatePixelBuffer()];case 1:return e.sent(),b?c===this.renderer.getAttributeHash()?[3,3]:[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)]:[3,5];case 2:e.sent(),e.label=3;case 3:return[4,this.attributeStore.updateFilters(this)];case 4:return e.sent(),this.refresh(),[2];case 5:return f.length?[4,this._handleAttributeChange(f)]:[3,7];case 6:e.sent(),e.label=7;case 7:return"heatmap"===this.renderer.type?[2]:c===this.renderer.getAttributeHash()?
[3,9]:[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)];case 8:e.sent(),this.featureStore.forEach(function(a){return d.attributeStore.setAttributeData(a.localId,a,d.geometryInfo,d.viewParams)}),e.label=9;case 9:return[4,this.attributeStore.updateFilters(this)];case 10:return e.sent(),[4,this.attributeStore.sendUpdates()];case 11:return e.sent(),[2]}})})};f.prototype.invalidate=function(){for(var a=0,b=this.tileStore.tiles;a<b.length;a++)this._updateQueue.push(b[a].id,Date.now())};
f.prototype.onEdits=function(a){var b=this;this._fetchQueue.pause();this._fetchQueue.reset();this._editsQueue.push(a).then(function(){0===b._editsQueue.length&&b._fetchQueue.resume()})};f.prototype.queryFeatures=function(a){return m.safeCast(this.queryEngine.executeQuery(a))};f.prototype.queryFeatureCount=function(a){return m.safeCast(this.queryEngine.executeQueryForCount(a))};f.prototype.queryObjectIds=function(a){return m.safeCast(this.queryEngine.executeQueryForIds(a))};f.prototype.queryExtent=
function(a){return m.safeCast(this.queryEngine.executeQueryForExtent(a))};f.prototype.redraw=function(){this._updateQueue.pause();this._manageTiles(this.tileStore.tiles);this._updateQueue.resume()};f.prototype.refresh=function(){this._queryInfoHash=Math.random().toString();this.queryEngine&&this.queryEngine.destroy();this.featureStore&&this.featureStore.clear();this._set("queryEngine",this._createQueryEngine());this._set("featureStore",this.queryEngine.featureStore);this._dataTileIndex.featureStore=
this.featureStore;this._dataTileIndex.forEach(function(a){return a.done=!1});this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();this._fetchQueue.clear();this._updateQueue.clear();this._manageTiles(this.tileStore.tiles);this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume()};f.prototype.setViewState=function(a){var b=this,c=this.viewState&&this.viewState.scale;this.inherited(arguments);this._fetchQueue.state=a;this._updateQueue.state=
a;c!==this.viewState.scale&&this.attributeStore.hasScaleExpr&&(this.featureStore.forEach(function(a){return b.attributeStore.setAttributeData(a.localId,a,b.geometryInfo,b.viewParams)}),this.attributeStore.sendUpdates())};f.prototype.onTileUpdate=function(a){this._manageTiles(a.added,a.removed)};f.prototype.onFeatureAdd=function(a){if(this._featuresInFlight.has(a.objectId)){var b=this._featuresInFlight.get(a.objectId).attributes;a.attributes=k({},b,a.attributes);this._featuresInFlight.delete(a.objectId)}a.localId=
this.attributeStore.createLocalId(a.objectId);this.attributeStore.setAttributeData(a.localId,a,this.geometryInfo,this.viewParams)};f.prototype._handleAttributeChange=function(a){return c(this,void 0,void 0,function(){return e(this,function(b){switch(b.label){case 0:return[4,this._fetchChangedFields(a)];case 1:return b.sent(),[2]}})})};f.prototype._fetchChangedTileFields=function(a,b){return c(this,void 0,void 0,function(){var c;return e(this,function(f){return(c=this._dataTileIndex.get(a.id))?[2,
this._fetchChangedTileFieldsDrill(c,b)]:[2]})})};f.prototype._fetchChangedTileFieldsDrill=function(a,b,f){void 0===f&&(f=0);return c(this,void 0,void 0,function(){var c,d,h,g,m,n,p,r,l,t,y=this;return e(this,function(e){switch(e.label){case 0:return c=k({},this.queryInfo,{returnGeometry:!1,returnCentroid:!1,outFields:b.concat([this.service.objectIdField])}),a.returnExceeded=a.returnExceeded||f>=G,d=a.key,h={key:d,dataTile:a,queryInfo:c},[4,this._patchQueue.push(h)];case 1:g=e.sent();if(!(g.exceededTransferLimit&&
f<G))return[3,3];m=a.tile.createChildTiles();n=m.map(function(b){var c=new z.default;c.tile=b;c.displayTile=a.displayTile;return c});return[4,u.all(n.map(function(a){return y._fetchChangedTileFieldsDrill(a,b,f+1)}))];case 2:return e.sent(),[2];case 3:p=0;for(r=g.features;p<r.length;p++)l=r[p],this.featureStore.has(l.objectId)?(t=this.featureStore.getFeature(l.objectId),t.attributes=k({},t.attributes,l.attributes)):this._featuresInFlight.set(l.objectId,l);return[2]}})})};f.prototype._fetchChangedTileFieldsPaged=
function(a,b,f){void 0===f&&(f=0);return c(this,void 0,void 0,function(){var c,d,h,g,m,n,p,u,r,l,t;return e(this,function(e){switch(e.label){case 0:return c=this.service.capabilities.query.supportsMaxRecordCountFactor,d=this.service.tileMaxRecordCount,h=d*(c?1:J),g=k({},this.queryInfo,{returnGeometry:!1,returnCentroid:!1,outFields:b.concat([this.service.objectIdField]),resultOffset:f*h,num:h}),a.returnExceeded=!0,m=a.key,n={key:m,dataTile:a,queryInfo:g},[4,this._patchQueue.push(n)];case 1:p=e.sent();
u=0;for(r=p.features;u<r.length;u++)l=r[u],this.featureStore.has(l.objectId)?(t=this.featureStore.getFeature(l.objectId),t.attributes=k({},t.attributes,l.attributes)):this._featuresInFlight.set(l.objectId,l);return p.exceededTransferLimit?[2,this._fetchChangedTileFieldsPaged(a,b,f+1)]:[2]}})})};f.prototype._fetchChangedFields=function(a){return c(this,void 0,void 0,function(){var b,c,f=this;return e(this,function(e){switch(e.label){case 0:return b=this.tileStore.tiles,c=b.map(function(b){return f._fetchChangedTileFields(b,
a)}),[4,u.all(c)];case 1:return e.sent(),[2]}})})};f.prototype._manageTiles=function(a,b){void 0===b&&(b=null);for(var c=this._dataTileIndex,f=this._fetchQueue,e=this._updateQueue,d="esriGeometryPoint"===this.service.geometryType,h=function(a){var b=c.get(a.id);b?(b.displayTile=a,d?c.forEach(function(c){D.isChildOf(c,b)&&(c.displayTile=a)}):b.done=!1):(b=new z.default,b.tile=a.clone(),b.displayTile=a,c.add(b));g._processDataTile(b)},g=this,m=0;m<a.length;m++){var k=a[m];h(k)}if(b)for(a=0;a<b.length;a++)k=
b[a],I.add(k),e.abort(k.id);c.forEach(function(a){I.has(a.displayTile)&&M.push(a)});for(e=0;e<M.length;e++)k=M[e],f.abort(k.id),c.delete(k);M.length=0;I.clear()};f.prototype._processDataTile=function(a){var c=this,f=a.key,e=this._fetchQueue,d=f.id,h=this._queryInfoHash,f=f.level-a.displayTile.key.level>=G;this._dataTileIndex.add(a);if(a.done||e.has(d)){if(a.queryInfoHash!==h||a.returnExceeded!==f)if(a.done)a.done=!1;else if(e.isOngoing(d))e.abort(d);else{a.queryInfoHash=h;a.returnExceeded=f;return}}else a.queryInfoHash=
h,a.returnExceeded=f;a.done?this._invalidateTile(a.displayTile):e.has(d)||e.push(a).then(function(b){return c._handleResponse(a,b)}).catch(function(c){u.isAbortError(c)||H.error(new b("featurelayer-controller:tile-error","Encountered an error when handling tile response",c));a.done=!0})};f.prototype._handleResponse=function(a,b){a.done=!0;w.hydrateOptimizedFeatureSet(b);if(b.exceededTransferLimit)if(a.returnExceeded)this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);
else{b=0;for(var c=a.tile.createChildTiles();b<c.length;b++){var f=c[b],e=new z.default;e.tile=f;e.displayTile=a.displayTile;this._processDataTile(e)}}else this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);this._invalidateTile(a.tile);this.attributeStore.sendUpdates()};f.prototype._deleteChildrenDataTiles=function(a){this._dataTileIndex.forEach(function(b){D.isChildOf(b,a)&&M.push(b)});for(var b=0;b<M.length;b++){var c=M[b];this._fetchQueue.abort(c.id);this._dataTileIndex.delete(c)}M.length=
0};f.prototype._fetchTile=function(a,b,f){return c(this,void 0,void 0,function(){var c,d,h,g,m,k,n,p,u,l=this;return e(this,function(e){c=new r({xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference});d="esriGeometryPoint"===this.service.geometryType?a.tile:a.displayTile;h=d.extent;g=d.resolution;m=a.returnExceeded;k=this._createQuery(c,h,g,b,J,m);n=this.service.source;p=K&&this.service.capabilities.query.supportsFormatPBF;u=f.signal;return[2,p?
y.executeQueryPBF(n,k,{type:"optimized"},{signal:u}).then(function(a){return a.data}):y.executeQuery(n,k,{signal:u}).then(function(a){return w.convertFromFeatureSet(a.data,l.service.objectIdField)})]})})};f.prototype._invalidateTile=function(a){var b=this._updateQueue,c=0;for(a=this.tileStore.intersections(a,this._pixelBuffer);c<a.length;c++){var f=a[c].tile;b.push(f.id,f.updateTimestamp)}};f.prototype._updateTile=function(a,b,c){var f=this,e=this.tileStore.get(a);a=this.queryInfo;a=t.executeTileQuery(this.queryEngine,
e,{pixelBuffer:this._pixelBuffer,returnGeometry:a.returnGeometry,returnCentroid:a.returnCentroid});var d=a.objectIds;return this._applyProcessing({geometryType:this.service.geometryType,features:a.features,fields:this.service.fields,objectIdFieldName:this.service.objectIdField,transform:e.transform},c).then(function(a){var h=[],g=!0;f._dataTileIndex.forEach(function(a){e.id!==a.id&&D.isChildOf(a,e)&&g&&!a.done&&(g=!1)});g&&e&&e.objectIds.forEach(function(a){d.has(a)||(a=f.attributeStore.getLocalId(a),
h.push(a))});d.forEach(function(a){e.objectIds.add(a)});e.updateTimestamp=b;f.attributeStore.sendUpdates();return f.processor.onTileData(e,{clear:!0,addOrUpdate:a.features,remove:h,transformParams:x.Utils.getTransformParams(a)},c).catch(function(a){u.isAbortError(a)||H.error("update-tile",a)})})};f.prototype._processEditsEvent=function(a,b){return c(this,void 0,void 0,function(){var c,f,d,h,g,m,n,p=this;return e(this,function(e){switch(e.label){case 0:return c=function(a){return a.objectId},f=a.addedFeatures.concat(a.updatedFeatures).map(c),
d=a.deletedFeatures.map(c),h=this._createTempQueryEngine(),g=this._createObjectIdsQuery(f),f.length?[4,y.executeQuery(this.service.source,g)]:[3,2];case 1:m=e.sent().data,n=w.convertFromFeatureSet(m,this.service.objectIdField).features,this._dataTileIndex.addOrUpdateFeatures(n),h.featureStore.addMany(n),e.label=2;case 2:return this._dataTileIndex.deleteFeaturesById(d),this.attributeStore.sendUpdates(),this.tileStore.tiles.map(function(a){var c=t.executeTileQuery(h,a,k({},p.queryInfo,{pixelBuffer:p._pixelBuffer})).features,
e=d.concat(f).map(function(a){return p.attributeStore.getLocalId(a)});return p.processor.onTileData(a,{addOrUpdate:c,remove:e,transformParams:{transform:a.transform,hasZ:!1,hasM:!1}},{signal:b}).catch(function(a){u.isAbortError(a)||H.error("update-tile",a)})}),h.destroy(),[2]}})})};f.prototype._createObjectIdsQuery=function(a){var b=this._createDefaultQuery(this.queryInfo);b.objectIds=a;return b};g([n.property()],f.prototype,"_fetchQueue",void 0);g([n.property()],f.prototype,"_patchQueue",void 0);
g([n.property()],f.prototype,"_updateQueue",void 0);g([n.property({readOnly:!0})],f.prototype,"queryEngine",void 0);g([n.property({readOnly:!0})],f.prototype,"featureStore",void 0);g([n.property({dependsOn:["_fetchQueue.updating","_updateQueue.updating"]})],f.prototype,"updating",null);return f=g([n.subclass("esri.views.2d.layers.features.controllers.OnDemandController")],f)}(n.declared(A.default));a.default=h})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(d,a,l,g,k,e,c,h){function m(a,b){return a?b?4:3:b?3:2}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function f(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function p(a,b){return b*a.scale[0]+a.translate[0]}function u(a,b){return a.translate[1]-b*a.scale[1]}function n(a){a=a.coords;return{x:a[0],y:a[1]}}function r(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function w(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;
a.coords[2]=b.z;return a}function y(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function x(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function A(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function z(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function C(a,b){return a&&b?z:a?t:b?x:r}function D(a,b,c){if(!a)return null;for(var f=m(b,c),e=[],d=0;d<a.coords.length;d+=f){for(var h=[],g=0;g<f;g++)h.push(a.coords[d+g]);e.push(h)}return b?c?{points:e,
hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){void 0===c&&(c=m(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var f=a.coords,e=0,d=0;for(b=b.points;d<b.length;d++)for(var h=b[d],g=0;g<c;g++)f[e++]=h[g];return a}function E(a,b,c){if(!a)return null;var f=m(b,c),e=a.coords,d=[],h=0,g=0;for(a=a.lengths;g<a.length;g++){for(var k=a[g],n=[],p=0;p<k;p++){for(var u=[],r=0;r<f;r++)u.push(e[h++]);n.push(u)}d.push(n)}return b?c?{paths:d,hasZ:b,hasM:c}:{paths:d,hasZ:b}:c?{paths:d,
hasM:c}:{paths:d}}function F(a,b,c){void 0===c&&(c=m(b.hasZ,b.hasM));var f=a.lengths,e=a.coords,d=0,h=0;for(b=b.paths;h<b.length;h++){for(var g=b[h],k=0,n=g;k<n.length;k++)for(var p=n[k],u=0;u<c;u++)e[d++]=p[u];f.push(g.length)}return a}function H(a,b,c){if(!a)return null;var f=m(b,c),e=a.coords,d=[],h=0,g=0;for(a=a.lengths;g<a.length;g++){for(var k=a[g],n=[],p=0;p<k;p++){for(var u=[],r=0;r<f;r++)u.push(e[h++]);n.push(u)}d.push(n)}return b?c?{rings:d,hasZ:b,hasM:c}:{rings:d,hasZ:b}:c?{rings:d,hasM:c}:
{rings:d}}function G(a,b,c,f){void 0===c&&(c=b.hasZ);void 0===f&&(f=b.hasM);c=m(c,f);f=a.lengths;var e=a.coords,d=0,h=f.length=e.length=0;for(b=b.rings;h<b.length;h++){for(var g=b[h],k=0,n=g;k<n.length;k++)for(var p=n[k],u=0;u<c;u++)e[d++]=p[u];f.push(g.length)}return a}function J(a,b,c,f,d,g){a.length=0;if(!c){for(f=0;f<b.length;f++)d=b[f],a.push(new e.default(null,d.attributes,null,d.attributes[g]));return a}switch(c){case "esriGeometryPoint":f=C(f,d);for(d=0;d<b.length;d++){var k=b[d];c=k.geometry;
var k=k.attributes,n=void 0;c&&(n=f(new h.default,c));a.push(new e.default(n,k,null,k[g]))}break;case "esriGeometryMultipoint":f=m(f,d);for(d=0;d<b.length;d++)k=b[d],c=k.geometry,k=k.attributes,n=void 0,c&&(n=B(new h.default,c,f)),a.push(new e.default(n,k,null,k[g]));break;case "esriGeometryPolyline":f=m(f,d);for(d=0;d<b.length;d++)k=b[d],c=k.geometry,k=k.attributes,n=void 0,c&&(n=F(new h.default,c,f)),a.push(new e.default(n,k,null,k[g]));break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var p=
b[c],k=p.geometry,n=p.centroid,p=p.attributes,u=void 0;k&&(u=G(new h.default,k,f,d));n?a.push(new e.default(u,p,r(new h.default,n),p[g])):a.push(new e.default(u,p,null,p[g]))}break;default:Q.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'")),a.length=0}return a}function K(a,b,c,f,e){a.length=0;switch(c){case "esriGeometryPoint":c=n;f&&e?c=A:f?c=w:e&&(c=y);for(f=0;f<b.length;f++){var d=b[f];e=d.geometry;d=d.attributes;e=e?c(e):null;a.push({attributes:d,
geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var h=b[c],d=h.geometry,h=h.attributes,g=void 0;d&&(g=D(d,f,e));a.push({attributes:h,geometry:g})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)h=b[c],d=h.geometry,h=h.attributes,g=void 0,d&&(g=E(d,f,e)),a.push({attributes:h,geometry:g});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var g=b[c],h=g.geometry,d=g.attributes,m=g.centroid,g=void 0;h&&(g=H(h,f,e));m?(h=n(m),a.push({attributes:d,centroid:h,geometry:g})):
a.push({attributes:d,geometry:g})}break;default:Q.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'"))}return a}function I(a,c,e,d,h,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;h=P[h];var k=c.coords;c=c.lengths;var n=m(e,d);e=e?d?T:U:d?U:S;if(!c.length)return e(a.coords,k,0,0,b(g,k[0]),f(g,k[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=n,a;for(var p,u,r,l=0,t,y=0,x=
0;x<c.length;x++){var w=c[x];if(!(w<h)){var I=0;t=y;u=d=b(g,k[l]);r=p=f(g,k[l+1]);e(a.coords,k,t,l,u,r);I++;l+=n;t+=n;for(var A=1;A<w;A++,l+=n)if(u=b(g,k[l]),r=f(g,k[l+1]),u!==d||r!==p)e(a.coords,k,t,l,u-d,r-p),t+=n,I++,d=u,p=r;I>=h&&(a.lengths.push(I),y=t)}}a.coords.length=y;return a.coords.length?a:null}function M(a,b,c,f,e,d,h){for(var g=h-c,m=0,k=0,n,p=d+c;p<h-c;p+=c){n=b[p];var u=b[p+1],r=b[d],l=b[d+1],t=b[g],y=b[g+1];r===t?n=Math.abs(n-r):(t=(y-l)/(t-r),n=Math.abs(t*n-u+(l-t*r))/Math.sqrt(t*
t+1));n>m&&(k=p,m=n)}m>f?(M(a,b,c,f,e,d,k+c),M(a,b,c,f,e,k,h)):(e(a,b,a.length,d,b[d],b[d+1]),e(a,b,a.length,g,b[g],b[g+1]))}function O(a,b,c,f,e){var d=b.coords,h=b.lengths,g=c?f?T:U:f?U:S;c=m(c,f);if(!d.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!h.length)return g(a.coords,d,0,0,p(e,d[0]),u(e,d[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var k=e.scale;f=k[0];for(var k=k[1],n=0,r=0;r<h.length;r++){var l=h[r];a.lengths[r]=l;var t=p(e,d[n]),y=u(e,d[n+1]);g(a.coords,d,
n,n,t,y);for(var n=n+c,x=1;x<l;x++,n+=c)t+=d[n]*f,y-=d[n+1]*k,g(a.coords,d,n,n,t,y)}a!==b&&(a.lengths.length=h.length,a.coords.length=d.length);return a}Object.defineProperty(a,"__esModule",{value:!0});var Q=g.getLogger("esri.tasks.support.optimizedFeatureSet"),P={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},S=function(a,b,c,f,e,d){a[c]=e;a[c+1]=d},U=function(a,b,c,f,e,d){a[c]=e;a[c+1]=d;a[c+2]=b[f+2]},T=function(a,b,c,f,e,d){a[c]=e;a[c+1]=d;a[c+2]=b[f+
2];a[c+3]=b[f+3]};a.quantizeX=b;a.quantizeY=f;a.hydrateX=p;a.hydrateY=u;a.convertToPoint=function(a,b,c){return a?b?c?A(a):w(a):c?y(a):n(a):null};a.convertFromPoint=function(a,b,c){void 0===c&&(c=C(null!=b.z,null!=b.m));return c(a,b)};a.convertToMultipoint=D;a.convertFromMultipoint=B;a.convertToPolyline=E;a.convertToPolygon=H;a.convertFromPolygon=G;var R=[],W=[];a.convertFromFeature=function(a,b,c,f,e){R[0]=a;a=J(W,R,b,c,f,e)[0];R.length=W.length=0;return a};a.convertFromFeatures=J;a.convertToFeature=
function(a,b,c,f){W[0]=a;K(R,W,b,c,f);a=R[0];R.length=W.length=0;return a};a.convertFromGeometry=function(a,b,c){if(!a)return null;var f=new h.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(k.isPoint(a))return C(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(f,a);if(k.isPolygon(a))return G(f,a,b,c);if(k.isPolyline(a))return F(f,a,m(b,c));if(k.isMultipoint(a))return B(f,a,m(b,c));Q.error("convertFromGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+
"'"))};a.convertToGeometry=function(a,b,c,f){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=n,c&&f?b=A:c?b=w:f&&(b=y),b(a);case "esriGeometryMultipoint":return D(a,c,f);case "esriGeometryPolyline":return E(a,c,f);case "esriGeometryPolygon":return H(a,c,f);default:Q.error("convertToGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+b+"'"))}};a.convertToFeatures=K;a.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,
f=a.transform,e=a.fields,d=a.hasM,h=a.hasZ,g=a.geometryType,m=a.exceededTransferLimit;a={features:K([],a.features,g,h,d),fields:e,geometryType:g,objectIdFieldName:b,spatialReference:c};f&&(a.transform=f);m&&(a.exceededTransferLimit=m);d&&(a.hasM=d);h&&(a.hasZ=h);return a};a.convertFromFeatureSet=function(a,b){var f=new c.default,e=a.hasM,d=a.hasZ,h=a.features,g=a.objectIdFieldName,m=a.spatialReference,k=a.geometryType,n=a.exceededTransferLimit,p=a.transform;f.fields=a.fields;f.geometryType=k;f.objectIdFieldName=
g||b;f.spatialReference=m;if(!f.objectIdFieldName)return Q.error(new l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),f;h&&J(f.features,h,k,d,e,f.objectIdFieldName);n&&(f.exceededTransferLimit=n);e&&(f.hasM=e);d&&(f.hasZ=d);p&&(f.transform=p);return f};a.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,f=a.hasZ;if(!b)return a;for(var e=0,d=a.features;e<d.length;e++){var h=d[e];h.geometry&&O(h.geometry,h.geometry,c,f,b);h.centroid&&O(h.centroid,h.centroid,
c,f,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,f=b.features,d=b.hasM,g=b.hasZ;if(!a)return b;for(var m=0;m<f.length;m++){var k=f[m],n=new e.default(new h.default,k.attributes);I(n.geometry,k.geometry,d,g,c,a);k.centroid&&(n.centroid=new h.default,I(n.centroid,k.centroid,d,g,"esriGeometryPoint",a));f[m]=n}b.transform=a;return b};a.quantizeOptimizedGeometry=I;a.quantizeOptimizedGeometryRemoveCollinear=function(a,c,e,d,h,g){a.lengths.length&&(a.lengths.length=
0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;h=P[h];var k=c.coords;c=c.lengths;var n=m(e,d);e=e?d?T:U:d?U:S;if(!c.length)return e(a.coords,k,0,0,b(g,k[0]),f(g,k[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=n,a;for(var p,u,r,l=0,t,y=0,x=0;x<c.length;x++){var w=c[x];if(!(w<h)){var I=0;t=y;d=p=b(g,k[l]);r=u=f(g,k[l+1]);e(a.coords,k,t,l,d,r);I++;for(var l=l+n,A=!1,M=0,z=0,C=1;C<w;C++,l+=n)if(d=b(g,k[l]),r=f(g,k[l+1]),d!==p||r!==u)p=d-p,u=r-u,A&&(0===M&&0===
p||0===z&&0===u)?(M+=p,z+=u):(A=!0,M=p,z=u,t+=n,I++),e(a.coords,k,t,l,M,z),p=d,u=r;A&&(t+=n,e(a.coords,k,t,l,M,z));I>=h&&(a.lengths.push(I),y=t)}}a.coords.length!==y&&(a.coords.length=y);return a.coords.length?a:null};a.generalizeOptimizedGeometry=function(a,b,c,f,e,d){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=P[e];var h=b.coords;b=b.lengths;var g=m(c,f);c=c?f?T:U:f?U:S;if(!b.length)return c(a.coords,h,0,0,h[0],h[1]),a.lengths.length&&
(a.lengths.length=0),a.coords.length=g,a;for(var k=f=0;k<b.length;k++){var n=b[k];if(!(n<e)){var p=a.coords.length/g;M(a.coords,h,g,d,c,f,f+n*g);var u=a.coords.length/g-p;u>=e?a.lengths.push(u):a.coords.length=p*g}f+=n*g}return a.coords.length?a:null};a.getBoundsOptimizedGeometry=function(a,b,c,f){c=m(c,f);var e=f=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var g=0;g<b.length;g+=c){var k=b[g],n=b[g+1];f=Math.min(f,k);d=Math.max(d,k);
e=Math.min(e,n);h=Math.max(h,n)}}a[0]=f;a[1]=e;a[2]=d;a[3]=h;return a};a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,f){c=m(c,f);f=b.coords;var e=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,k=0,n=0;for(b=b.lengths;n<b.length;n++)for(var p=b[n],u=f[k],r=f[k+1],e=Math.min(u,e),d=Math.min(r,d),h=Math.max(u,h),g=Math.max(r,g),k=k+c,l=1;l<p;l++,k+=c){var t=f[k],y=f[k+1],u=u+t,r=r+y;0>t&&(e=Math.min(e,u));0<t&&(h=Math.max(h,u));0>y?d=
Math.min(d,r):0<y&&(g=Math.max(g,r))}a[0]=e;a[1]=d;a[2]=h;a[3]=g;return a};a.hydrateOptimizedGeometry=O})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(a,d,k,e){void 0===a&&(a=null);void 0===d&&(d={});this.geometry=a;d&&(this.attributes=d);k&&(this.centroid=k);null!=e&&(this.objectId=e)}}();a.default=d})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();a.default=d})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
d=function(){return function(a,d){void 0===a&&(a=[]);void 0===d&&(d=[]);this.lengths=a;this.coords=d}}();a.default=d})},"esri/layers/graphics/data/executeTileQuery":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ./QueryEngine ./utils".split(" "),function(d,a,l,g,k,e,c,h,m,b){function f(a,
c,f,e,d,h,g,k){g&&!h?e.forEachInBounds(d,function(e){if(!c.has(e.objectId)){var d=b.getCentroid(f,e,k),h=e.attributes;d&&(c.add(e.objectId),a.push(new m.Feature(h,e.localId,null,d)))}}):h&&!g?e.forEachInBounds(d,function(e){if(!c.has(e.objectId)){var d=e.attributes,h=b.getGeometry(f,e,0,k);h&&(c.add(e.objectId),a.push(new m.Feature(d,e.localId,h,null)))}}):e.forEachInBounds(d,function(e){if(!c.has(e.objectId)){var d=e.attributes,h=b.getGeometry(f,e,0,k),g=b.getCentroid(f,e,k);h&&g&&(c.add(e.objectId),
a.push(new m.Feature(d,e.localId,h,g)))}})}Object.defineProperty(a,"__esModule",{value:!0});a.executeTileQueryForIds=function(a,b,f){b=c.pad(b.bounds,f.pixelBuffer*b.resolution,c.create());var e=[];a.featureStore.forEachInBounds(b,function(b){return e.push(a.featureAdapter.getObjectId(b))});return e};a.executeTileQuery=function(a,b,d){var g=d.returnGeometry,m=d.returnCentroid,k=d.pixelBuffer;d=new e.default;var n=[],k=k*b.resolution,p=c.pad(b.bounds,k,c.create());f(n,d,a,a.featureStore,p,g,m,{originPosition:"upperLeft",
scale:[b.resolution,b.resolution],translate:[b.bounds[0],b.bounds[3]]});if("esriGeometryPoint"===a.geometryType||m){var u=h.getInfo(a.spatialReference);if(u){var l=u.valid,u=l[0],l=l[1];if(p[0]<u){var C=c.fromValues(l-k,p[1],l,p[3]);f(n,d,a,a.featureStore,C,g,m,{originPosition:"upperLeft",scale:[b.resolution,b.resolution],translate:[l,b.bounds[3]]})}p[2]>l&&(k=c.fromValues(u,p[1],u+k,p[3]),f(n,d,a,a.featureStore,k,g,m,{originPosition:"upperLeft",scale:[b.resolution,b.resolution],translate:[u-l+b.bounds[0],
b.bounds[3]]}))}}n.sort(function(b,c){return b.attributes[a.objectIdField]-c.attributes[a.objectIdField]});return{features:n,objectIds:d}}})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F,H,G){Object.defineProperty(a,"__esModule",{value:!0});var J=f.getLogger("esri.layers.graphics.data.QueryEngine");d=function(){return function(a,b,c,f,e){this.attributes=a;this.localId=b;this.geometry=c;this.centroid=f;this.filterFlags=e}}();a.Feature=d;var K=new h.default,I=new p.MemCacheStorage(2E6),M=0;d=function(){function a(a){var b=this;this.capabilities={query:C.queryCapabilities};this.geometryType=a.geometryType;this.hasM=a.hasM;
this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.featureStore=a.featureStore;this._changeHandle=this.featureStore.events.on("changed",function(){return b.clearCache()});this.timeInfo=a.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new p.MemCache(M++ +"$$",I));this.fieldsIndex=
new H(a.fields);a.scheduler&&a.priority&&(this._frameQueue=new G.PromiseQueue,this._frameTask=a.scheduler.registerTask(a.priority,function(a){return b._update(a)},function(){return 0<b._frameQueue.length}))}a.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=
null);this.fieldsIndex.destroy()};Object.defineProperty(a.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullExtent",{get:function(){var a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"timeExtent",{get:function(){return this.timeInfo?
this._timeExtent?this._timeExtent:this._timeExtent=E.getTimeExtent(this.timeInfo,this.featureStore):null},enumerable:!0,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};a.prototype.executeQuery=function(a,c){void 0===a&&(a={});return k(this,void 0,void 0,function(){var c,f,e;return g(this,function(d){switch(d.label){case 0:c=b.clone(a),d.label=1;case 1:return d.trys.push([1,13,,14]),[4,F.normalizeQuery(c,
this.definitionExpression,this.spatialReference)];case 2:return c=d.sent(),[4,this._reschedule()];case 3:return d.sent(),[4,this._checkQuerySupport(c)];case 4:return c=d.sent(),[4,this._reschedule()];case 5:return d.sent(),[4,this._executeGeometryQuery(c)];case 6:return f=d.sent(),[4,this._reschedule()];case 7:return d.sent(),[4,f.executeObjectIdsQuery(c)];case 8:return f=d.sent(),[4,this._reschedule()];case 9:return d.sent(),[4,f.executeTimeQuery(c)];case 10:return f=d.sent(),[4,this._reschedule()];
case 11:return d.sent(),[4,f.executeAttributesQuery(c)];case 12:return f=d.sent(),[3,14];case 13:e=d.sent();if(e!==F.QUERY_ENGINE_EMPTY_RESULT)throw e;f=new D.default([],null,this);return[3,14];case 14:return[2,f.createQueryResponse(c)]}})})};a.prototype.executeQueryForCount=function(a,c){void 0===a&&(a={});return k(this,void 0,void 0,function(){var c,f,e;return g(this,function(d){switch(d.label){case 0:c=b.clone(a),c.returnGeometry=!1,c.returnCentroid=!1,c.outSR=null,d.label=1;case 1:return d.trys.push([1,
13,,14]),[4,F.normalizeQuery(c,this.definitionExpression,this.spatialReference)];case 2:return c=d.sent(),[4,this._reschedule()];case 3:return d.sent(),[4,this._checkQuerySupport(c)];case 4:return c=d.sent(),[4,this._reschedule()];case 5:return d.sent(),[4,this._executeGeometryQuery(c)];case 6:return f=d.sent(),[4,this._reschedule()];case 7:return d.sent(),[4,f.executeObjectIdsQuery(c)];case 8:return f=d.sent(),[4,this._reschedule()];case 9:return d.sent(),[4,f.executeTimeQuery(c)];case 10:return f=
d.sent(),[4,this._reschedule()];case 11:return d.sent(),[4,f.executeAttributesQuery(c)];case 12:return f=d.sent(),[2,f.size];case 13:e=d.sent();if(e!==F.QUERY_ENGINE_EMPTY_RESULT)throw e;return[2,0];case 14:return[2]}})})};a.prototype.executeQueryForExtent=function(a,c){void 0===a&&(a={});return k(this,void 0,void 0,function(){var c,f,e,d,h,m,k,p;return g(this,function(g){switch(g.label){case 0:c=b.clone(a),e=c.outSR,g.label=1;case 1:return g.trys.push([1,13,,14]),[4,F.normalizeQuery(c,this.definitionExpression,
this.spatialReference)];case 2:return c=g.sent(),[4,this._reschedule()];case 3:return g.sent(),[4,this._checkQuerySupport(c)];case 4:return c=g.sent(),c.returnGeometry=!0,c.returnCentroid=!1,c.outSR=null,[4,this._reschedule()];case 5:return g.sent(),[4,this._executeGeometryQuery(c)];case 6:return f=g.sent(),[4,this._reschedule()];case 7:return g.sent(),[4,f.executeObjectIdsQuery(c)];case 8:return f=g.sent(),[4,this._reschedule()];case 9:return g.sent(),[4,f.executeTimeQuery(c)];case 10:return f=g.sent(),
[4,this._reschedule()];case 11:return g.sent(),[4,f.executeAttributesQuery(c)];case 12:f=g.sent();d=f.size;if(!d)return[2,{count:d,extent:null}];r.set(Q,r.NEGATIVE_INFINITY);this.featureStore.forEachBounds(f.items,function(a){return r.expand(Q,a)},O);h={xmin:Q[0],ymin:Q[1],xmax:Q[3],ymax:Q[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(Q[2])&&isFinite(Q[5])&&(h.zmin=Q[2],h.zmax=Q[5]);m=z.project(h,f.spatialReference,e);m.spatialReference=F.cleanFromGeometryEngine(e||
this.spatialReference);0===m.xmax-m.xmin&&(k=n.getMetersPerUnitForSR(m.spatialReference),m.xmin-=k,m.xmax+=k);0===m.ymax-m.ymin&&(k=n.getMetersPerUnitForSR(m.spatialReference),m.ymin-=k,m.ymax+=k);this.hasZ&&null!=m.zmin&&null!=m.zmax&&0===m.zmax-m.zmin&&(k=n.getMetersPerUnitForSR(m.spatialReference),m.zmin-=k,m.zmax+=k);return[2,{count:d,extent:m}];case 13:p=g.sent();if(p===F.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw p;case 14:return[2]}})})};a.prototype.executeQueryForIds=
function(a,b){void 0===a&&(a={});return k(this,void 0,void 0,function(){return g(this,function(c){return[2,this.executeQueryForIdSet(a,b).then(function(a){return e.from(a)})]})})};a.prototype.executeQueryForIdSet=function(a,c){void 0===a&&(a={});return k(this,void 0,void 0,function(){var c,f,e,d,m,k,n,p;return g(this,function(g){switch(g.label){case 0:c=b.clone(a),c.returnGeometry=!1,c.returnCentroid=!1,c.outSR=null,g.label=1;case 1:return g.trys.push([1,12,,13]),[4,F.normalizeQuery(c,this.definitionExpression,
this.spatialReference)];case 2:return c=g.sent(),[4,this._reschedule()];case 3:return g.sent(),[4,this._executeGeometryQuery(c)];case 4:return f=g.sent(),[4,this._reschedule()];case 5:return g.sent(),[4,f.executeObjectIdsQuery(c)];case 6:return f=g.sent(),[4,this._reschedule()];case 7:return g.sent(),[4,f.executeTimeQuery(c)];case 8:return f=g.sent(),[4,this._reschedule()];case 9:return g.sent(),[4,f.executeAttributesQuery(c)];case 10:return f=g.sent(),[4,this._reschedule()];case 11:g.sent();e=f.items;
d=new h.default;m=0;for(k=e;m<k.length;m++)n=k[m],d.add(f.featureAdapter.getObjectId(n));return[2,d];case 12:p=g.sent();if(p===F.QUERY_ENGINE_EMPTY_RESULT)return[2,new h.default];throw p;case 13:return[2]}})})};a.prototype.executeQueryForLatestObservations=function(a,b){var c=this;if(this.timeInfo)return this.executeQuery(a,b).then(function(a){return c._filterLatest(a,c.timeInfo)});J.error(new m("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};a.prototype._reschedule=
function(a){return k(this,void 0,void 0,function(){return g(this,function(b){return this._frameQueue?[2,this._frameQueue.push(a).then(function(a){return a})]:[2,a]})})};a.prototype._update=function(a){for(this._budget=a;!a.done&&this._frameQueue&&this._frameQueue.process();)a.madeProgress();this._budget=null};a.prototype._filterLatest=function(a,b){var f=b.trackIdField,e=b.startTimeField;b=b.endTimeField||e;for(var e=new c.default,d=[],h=0,g=a.features;h<g.length;h++){var m=g[h],k=m.attributes[f],
n=m.attributes[b];(!e.has(k)||e.get(k).attributes[b]<n)&&e.set(k,m)}e.forEach(function(a){return d.push(a)});return l({},a,{features:d})};a.prototype._getAll=function(){if(!this._allItems){var a=[];this.featureStore.forEach(function(b){return a.push(b)});this._allItems=new D.default(a,null,this)}return this._allItems};a.prototype._executeGeometryQuery=function(a){return k(this,void 0,void 0,function(){var b,c,f,e,d,m,n,p,u,r,l,t,y,w,I,A,M,z,C,K,E,H,F,J,G=this;return g(this,function(O){switch(O.label){case 0:b=
a.geometry;c=a.outSR;f=a.spatialRel;e=x.isValid(c)&&!x.equals(this.spatialReference,c);if(d=this.cacheSpatialQueries?e?JSON.stringify({geometry:b,spatialRelationship:f,outSpatialReference:c}):JSON.stringify({geometry:b,spatialRelationship:f}):null)if(m=this._geometryQueryCache.get(d),void 0!==m)return[2,m];n=function(b){return k(G,void 0,void 0,function(){var f;return g(this,function(h){switch(h.label){case 0:return e&&(a.returnGeometry||a.returnCentroid)?[4,b.project(c)]:[3,2];case 1:return f=h.sent(),
d&&this._geometryQueryCache.put(d,f,f.size||1),[2,f];case 2:return d&&this._geometryQueryCache.put(d,b,b.size||1),[2,b]}})})};if(!b)return[2,n(this._getAll())];p=this.featureAdapter;if("esriSpatialRelDisjoint"!==f)return[3,5];u=this._searchFeatures(this._getQueryBBoxes(b));if(!u.length)return[2,n(this._getAll())];t=new h.default;y=0;for(w=u;y<w.length;y++)I=w[y],t.add(p.getObjectId(I));return[4,this._reschedule(t)];case 1:return t=O.sent(),A=0,r=Array(t.size),this.featureStore.forEach(function(a){return r[A++]=
a}),l=t,[4,this._reschedule()];case 2:return O.sent(),[4,B.getSpatialQueryOperator(f,b,this)];case 3:return M=O.sent(),z=function(a){return!l.has(p.getObjectId(a))||M(p.getGeometry(a))},K=D.default.bind,[4,this._runSpatialFilter(r,z)];case 4:return C=new (K.apply(D.default,[void 0,O.sent(),b,this])),[2,n(C)];case 5:return E=this._searchFeatures(this._getQueryBBoxes(b)),E.length?(H=this._canExecuteSoloPass(b,a))?[2,n(new D.default(E,b,this))]:[4,B.getSpatialQueryOperator(f,b,this)]:(C=new D.default([],
b,this),d&&this._geometryQueryCache.put(d,C,C.size||1),[2,C]);case 6:return F=O.sent(),[4,this._runSpatialFilter(E,function(a){return F(p.getGeometry(a))})];case 7:return J=O.sent(),[2,n(new D.default(J,b,this))]}})})};a.prototype._runSpatialFilter=function(a,b){return k(this,void 0,void 0,function(){var c,f,e,d=this;return g(this,function(h){if(!b)return[2,a];if(!this._budget)return[2,a.filter(function(a){return b(a)})];c=0;f=[];e=function(){return k(d,void 0,void 0,function(){var d;return g(this,
function(h){switch(h.label){case 0:if(!(c<a.length))return[3,3];d=a[c];b(d)&&f.push(d);return this._budget.done?[4,this._reschedule()]:[3,2];case 1:return h.sent(),[2,e()];case 2:return++c,[3,0];case 3:return[2]}})})};return[2,this._reschedule().then(function(){return e()}).then(function(){return f})]})})};a.prototype._canExecuteSoloPass=function(a,b){var c=this.geometryType;b=b.spatialRel;return B.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===b||"esriGeometryPoint"===c&&("esriSpatialRelIntersects"===
b||"esriSpatialRelContains"===b||"esriSpatialRelWithin"===b))};a.prototype._getQueryBBoxes=function(a){if(B.canQueryWithRBush(a)){if(y.isExtent(a))return[w.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(y.isPolygon(a))return a.rings.map(function(a){return w.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}return[t.getBoundsXY(w.create(),a)]};a.prototype._searchFeatures=function(a){for(var b=0;b<a.length;b++)this.featureStore.forEachInBounds(a[b],function(a){K.add(a)});var c=Array(K.size),f=0;K.forEach(function(a){return c[f++]=
a});K.clear();return c};a.prototype._checkQuerySupport=function(a){return k(this,void 0,void 0,function(){return g(this,function(b){if(0>a.distance||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text)throw new m("feature-store:unsupported-query","Unsupported query options",{query:a});return[2,u.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),B.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),z.checkProjectionSupport(this.spatialReference,
a.outSR)]).then(function(){return a})]})})};a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,f=a.returnDistinctValues;c&&0<c.length&&(c=c.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),A.validateFields(this.fieldsIndex,c,"orderByFields contains missing fields"));if(b&&0<b.length)A.validateFields(this.fieldsIndex,b,"outFields contains missing fields");else if(f)throw new m("feature-store:unsupported-query",
"outFields should be specified for returnDistinctValues",{query:a});A.validateWhere(this.fieldsIndex,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){return k(this,void 0,void 0,function(){var b,c,f,e,d,h,k,n,p,u,r,l;return g(this,function(g){b=a.outStatistics;c=a.groupByFieldsForStatistics;f=a.having;e=c&&c.length;d=b&&b.length;if(f){if(!e||!d)throw new m("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a});A.validateHaving(this.fieldsIndex,
f,b)}if(d){if(h=b.some(function(a){return"exceedslimit"===a.statisticType}))return[2];k=b.map(function(a){return a.onStatisticField});A.validateFields(this.fieldsIndex,k,"onStatisticFields contains missing fields");e&&A.validateFields(this.fieldsIndex,c,"groupByFieldsForStatistics contains missing fields");n=0;for(p=b;n<p.length;n++){u=p[n];r=u.onStatisticField;l=u.statisticType;if("exceedslimit"===l)throw new m("feature-store:unsupported-query","statistic type exceedslimit is not supported",{definition:u,
query:a});if((!e||"count"!==l)&&r&&A.hasInvalidFieldType(r,this.fieldsIndex))throw new m("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:u,query:a});}}return[2]})})};return a}();a.default=d;var O=r.create(),Q=r.create()})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./PooledArray","./string"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,e,d){this._namespace=a;this._storage=
e;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";d&&(this._storage.registerRemoveFunc(this._namespace,d),this._removeFunc=!0)}Object.defineProperty(a.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._storage.size},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0});a.prototype.resetHitRate=function(){this._hit=this._miss=0};a.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};a.prototype.put=function(a,e,d,b){void 0===b&&(b=1);this._storage.put(this._namespace+a,e,d,b)};a.prototype.get=function(a){a=
this._storage.get(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.pop=function(a){a=this._storage.pop(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.clear=function(){this._storage.clear(this._namespace)};a.prototype.clearAll=function(){this._storage.clearAll()};a.prototype.getStats=function(){return this._storage.getStats()};a.prototype.resetStats=function(){this._storage.resetStats()};return a}();a.MemCache=d;d=function(){function a(a){void 0===
a&&(a=10485760);this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new g}a.prototype.register=function(a){this._users.push(a)};a.prototype.deregister=function(a){this._users.removeUnordered(a)};a.prototype.registerRemoveFunc=function(a,e){this._removeFuncs.push([a,e])};a.prototype.deregisterRemoveFunc=function(a){this._removeFuncs=this._removeFuncs.filter(function(c){return c[0]!==a})};Object.defineProperty(a.prototype,"size",{get:function(){return this._size},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._maxSize},set:function(a){this._maxSize=Math.max(a,0);this._size>this._maxSize&&this._removeEntries()},enumerable:!0,configurable:!0});a.prototype.put=function(a,e,d,b){if(this._db.has(a)){var c=this._db.get(a);this._size-=c.size;this._db.delete(a);this._notifyRemoved(a,c.entry)}d>this._maxSize?this._notifyRemoved(a,e):void 0===e?console.warn("Refusing to cache undefined entry "):!d||0>d?console.warn("Refusing to cache entry with invalid size "+
d):(this._db.set(a,{entry:e,size:d,lifetime:b,lives:b}),this._size+=d,this._size>this._maxSize&&this._removeEntries())};a.prototype.pop=function(a){if(this._db.has(a)){var c=this._db.get(a);this._size-=c.size;this._db.delete(a);++this._hit;return c.entry}++this._miss};a.prototype.get=function(a){var c=this._db.get(a);if(void 0===c)++this._miss;else return this._db.delete(a),c.lives=c.lifetime,this._db.set(a,c),++this._hit,c.entry};a.prototype.getStats=function(){var a=this,e={Size:Math.round(this._size/
1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},d={},b=[];this._db.forEach(function(c,f){var e=c.lifetime;b[e]=(b[e]||0)+1;a._users.forEach(function(a){a=a.namespace;if(k.startsWith(f,a))return d[a]=(d[a]||0)+c.size,!1})});var f={};this._users.forEach(function(a){var b=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(d[b]=d[b]||0,f[b]=Math.round(100*a.hitRate)+"%"):f[b]="0%"});var g=Object.keys(d);g.forEach(function(b){return d[b]=
d[b]/a._size*100});g.sort(function(a,b){return d[b]-d[a]});g.forEach(function(a){return e[a]=Math.round(d[a])+"% / "+f[a]});for(g=0;g<b.length;++g){var u=b[g];u&&(e["Lifetime "+g]=Math.round(u/this._db.size*100)+"%")}return e};a.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(a){return a.resetHitRate()})};a.prototype.clear=function(a){var c=this;this._db.forEach(function(e,b){k.startsWith(b,a)&&(c._size-=e.size,c._db.delete(b),c._notifyRemoved(b,e.entry))})};a.prototype.clearAll=
function(){var a=this;this._db.forEach(function(c,e){a._notifyRemoved(e,c.entry)});this._size=0;this._db.clear()};a.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)};a.prototype._notifyRemoved=function(a,e){this._removeFuncs.forEach(function(c){if(k.startsWith(a,c[0]))c[1](e)})};a.prototype._removeEntries=function(){var a=this;l.everyMap(this._db,function(c,e){a._db.delete(e);1>=c.lives?(a._size-=c.size,a._notifyRemoved(e,c.entry)):(--c.lives,a._db.set(e,c));return a._size>
.9*a.maxSize})};return a}();a.MemCacheStorage=d})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.everyMap=Map.prototype.entries?function(a,d){a=a.entries();for(var g=a.next();!g.done;g=a.next())if(!1===d(g.value[1],g.value[0]))return!1;return!0}:function(a,d){var g=!0;a.forEach(function(a,c){g&&(g=!1!==d(a,c))});return g}})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper",
"./arrayUtils","./HeapSort"],function(d,a,l,g,k){return function(){function a(a){var c=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=new g.RemoveHint;a&&(a.initialSize&&(this.data=Array(a.initialSize)),a.allocator?(this._allocator=a.allocator,this._deallocator=a.deallocator):"deallocator"in a&&(this._deallocator=a.deallocator),a.shrink&&(this._shrink=function(){c.data.length>1.5*c.length&&(c.data.length=Math.floor(1.1*c.length))}))}
a.prototype.toArray=function(){return this.data.slice(0,this.length)};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)if(this._allocator)for(;this._length<a;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=a;else{if(this._deallocator)for(var c=a;c<this._length;++c)this.data[c]=this._deallocator(this.data[c]);this._length=a;this._shrink()}},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.length=
0};a.prototype.prune=function(){this.clear();this.data=[]};a.prototype.equal=function(a){return g.equals(this.data,a.data)};a.prototype.push=function(a){return this.data[this._length++]=a};a.prototype.pushArray=function(a,e){void 0===e&&(e=a.length);for(var c=0;c<e;c++)this.data[this._length++]=a[c];return this.back()};a.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};a.prototype.pop=function(){if(0!==
this.length){var a=this.data[this.length-1];--this.length;this._shrink();return a}};a.prototype.removeMany=function(a){var c=this,e=[];this.data=this.data.filter(function(b,f){if(f>=c.length)return!1;if(0>a.indexOf(b))return!0;e.push(b);return!1});this._length=this.data.length;return e};a.prototype.iterableRemoveMany=function(a,e){var c,b;return l(this,function(f){switch(f.label){case 0:c=[],b=0,f.label=1;case 1:if(!(b<this.length)||b>=this.length)return[3,4];0>a.indexOf(this.data[b])&&c.push(this.data[b]);
return e()?[4]:[3,3];case 2:f.sent(),f.label=3;case 3:return++b,[3,1];case 4:return this.data=c,this._length=this.data.length,[2]}})};a.prototype.removeUnordered=function(a){a=g.removeUnordered(this.data,a,this.length,this._hint);void 0!==a&&--this.length;return a};a.prototype.removeUnorderedIndex=function(a){if(!(a>=this.length||0>a))return this.swapElements(a,this.length-1),this.pop()};a.prototype.removeUnorderedMany=function(a,e,d){void 0===e&&(e=a.length);this.length=g.removeUnorderedMany(this.data,
a,this.length,e,this._hint,d)};a.prototype.front=function(){if(0!==this.length)return this.data[0]};a.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};a.prototype.swapElements=function(a,e){var c;a>=this.length||e>=this.length||a===e||(c=[this.data[e],this.data[a]],this.data[a]=c[0],this.data[e]=c[1])};a.prototype.sort=function(a){k.sort(this.data,0,this.length,a)};a.prototype.iterableSort=function(a,e){return k.iterableSort(this.data,0,this.length,a,e)};a.prototype.some=
function(a,e){for(var c=0;c<this.length;++c)if(a.call(e,this.data[c],c,this.data))return!0;return!1};a.prototype.find=function(a,e){for(var c=0;c<this.length;++c){var b=this.data[c];if(a.call(e,b,c,this.data))return b}};a.prototype.filterInPlace=function(a,e){for(var c=0,b=0;b<this._length;++b){var f=this.data[b];a.call(e,f,b,this.data)&&(this.data[b]=this.data[c],this.data[c]=f,c++)}if(this._deallocator)for(b=c;b<this._length;b++)this.data[b]=this._deallocator(this.data[b]);this._length=c;return this};
a.prototype.forEach=function(a,e){for(var c=this.length,b=0;b<Math.min(this.length,c);++b)a.call(e,this.data[b],b,this.data)};a.prototype.iterableForEach=function(){var a;return l(this,function(c){switch(c.label){case 0:a=0,c.label=1;case 1:return a<this.length?[4,this.data[a]]:[3,4];case 2:c.sent(),c.label=3;case 3:return++a,[3,1];case 4:return[2]}})};a.prototype.map=function(a,e){for(var c=Array(this.length),b=0;b<this.length;++b)c[b]=a.call(e,this.data[b],b,this.data);return c};return a}()})},
"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(d,a,l){var g;(function(a){function e(a,c,b,f){for(var e=c,d=b>>>1,h=a[e-1];c<=d;){c=e<<1;c<b&&0>f(a[c-1],a[c])&&++c;var g=a[c-1];if(0>=f(g,h))break;a[e-1]=g;e=c}a[e-1]=h}function c(a,c){return a<c?-1:a>c?1:0}a.sort=function(a,d,b,f){void 0===d&&(d=0);void 0===b&&(b=a.length);void 0===f&&(f=c);for(var h=b>>>1;h>d;h--)e(a,h,b,f);for(var g=d+1,h=b-1;h>d;h--)b=a[d],a[d]=a[h],a[h]=b,e(a,g,h,f)};a.iterableSort=
function(a,d,b,f,g){var h,k,m;return l(this,function(n){switch(n.label){case 0:void 0===d&&(d=0),void 0===b&&(b=a.length),void 0===f&&(f=c),h=b>>>1,n.label=1;case 1:if(!(h>d))return[3,4];e(a,h,b,f);return g&&g()?[4]:[3,3];case 2:n.sent(),n.label=3;case 3:return h--,[3,1];case 4:k=d+1,h=b-1,n.label=5;case 5:if(!(h>d))return[3,8];m=a[d];a[d]=a[h];a[h]=m;e(a,k,h,f);return g&&g()?[4]:[3,7];case 6:n.sent(),n.label=7;case 7:return h--,[3,5];case 8:return[2]}})}})(g||(g={}));return g})},"esri/geometry/support/aaBoundingBox":function(){define(["require",
"exports","../Extent","./aaBoundingRect"],function(d,a,l,g){function k(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3],b[4],b[5]]}function e(a,b,c,f,e,d,h){void 0===h&&(h=k());h[0]=a;h[1]=b;h[2]=c;h[3]=f;h[4]=e;h[5]=d;return h}function c(a){return a[0]>=a[3]?0:a[3]-a[0]}function h(a){return a[1]>=a[4]?0:a[4]-a[1]}function m(a){return a[2]>=a[5]?0:a[5]-a[2]}function b(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function f(a){return 6===a.length}Object.defineProperty(a,
"__esModule",{value:!0});a.create=k;a.fromValues=e;a.fromExtent=function(a,b){void 0===b&&(b=k());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};a.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new l({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new l({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};a.fromMinMax=function(a,b,c){void 0===c&&(c=k());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=
b[2];return c};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};a.expand=function(a,b,c){void 0===c&&(c=a);f(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[3]),c[4]=Math.max(a[4],b[4]),c[5]=Math.max(a[5],b[5])):g.is(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[2]),c[4]=Math.max(a[4],b[3])):2===
b.length?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1])):3===b.length&&(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1]),c[5]=Math.max(a[5],b[2]));return c};a.expandWithBuffer=function(a,b,c,f,e){void 0===e&&(e=a);var d=a[0],h=a[1],g=a[2],k=a[3],m=a[4];a=a[5];for(var p=0;p<f;p++)d=Math.min(d,b[c+3*p]),h=Math.min(h,b[c+3*p+1]),g=Math.min(g,b[c+3*p+2]),k=Math.max(k,b[c+3*
p]),m=Math.max(m,b[c+3*p+1]),a=Math.max(a,b[c+3*p+2]);e[0]=d;e[1]=h;e[2]=g;e[3]=k;e[4]=m;e[5]=a;return e};a.expandWithNestedArray=function(a,b,c,f){void 0===f&&(f=a);var e=b.length,d=a[0],h=a[1],g=a[2],k=a[3],m=a[4];a=a[5];if(c)for(c=0;c<e;c++){var p=b[c],d=Math.min(d,p[0]),h=Math.min(h,p[1]),g=Math.min(g,p[2]),k=Math.max(k,p[0]),m=Math.max(m,p[1]);a=Math.max(a,p[2])}else for(c=0;c<e;c++)p=b[c],d=Math.min(d,p[0]),h=Math.min(h,p[1]),k=Math.max(k,p[0]),m=Math.max(m,p[1]);f[0]=d;f[1]=h;f[2]=g;f[3]=k;
f[4]=m;f[5]=a;return f};a.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=c;a.depth=h;a.height=m;a.diameter=function(a){var b=c(a),f=m(a);a=h(a);return Math.sqrt(b*b+f*f+a*a)};a.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+c(a)/2;b[1]=a[1]+h(a)/2;b[2]=a[2]+m(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=c(a);b[1]=h(a);b[2]=m(a);return b};a.maximumDimension=function(a){return Math.max(c(a),m(a),h(a))};a.containsPoint=function(a,b){return b[0]>=
a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};a.offset=function(a,b,c,f,e){void 0===
e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+f;e[3]=a[3]+b;e[4]=a[4]+c;e[5]=a[5]+f;return e};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=b;a.empty=function(c){return c?b(c,a.NEGATIVE_INFINITY):k(a.NEGATIVE_INFINITY)};a.toRect=function(a,b){b||(b=g.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];
return b};a.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=b[2];a[4]=b[3];a[5]=Number.POSITIVE_INFINITY;return a};a.is=f;a.isPoint=function(a){return 0===c(a)&&0===h(a)&&0===m(a)};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!f(a)||!f(b))return!1;if(c)for(var e=0;e<a.length;e++){if(!c(a[e],b[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==b[e])return!1;return!0};a.wrap=function(a,b,c,f,d,h){return e(a,b,c,f,d,h,p)};a.POSITIVE_INFINITY=[-Infinity,-Infinity,
-Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0];var p=k()})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../core/Error ../../../core/sql/WhereClauseCache".split(" "),function(d,a,l,g,k,e){function c(a,c){return a?b.get(a,c):null}function h(a,b,f,e){void 0===e&&(e=!0);for(var d=[],g=0;g<b.length;g++){var p=
b[g];if("*"!==p&&!a.has(p))if(e){var n=m(p);try{var l=c(n,a);if(!l)throw new k("feature-store:unsupported-query","invalid SQL expression",{where:n});if(!l.isStandardized)throw new k("feature-store:unsupported-query","expression is not standard",{clause:l});h(a,l.fieldNames,"expression contains missing fields")}catch(z){if((n=z&&z.details)&&(n.clause||n.where))throw z;n&&n.missingFields?d.push.apply(d,n.missingFields):d.push(p)}}else d.push(p)}if(d.length)throw new k("feature-store:unsupported-query",
f,{missingFields:d});}function m(a){return a.split(" as ")[0]}Object.defineProperty(a,"__esModule",{value:!0});var b=new e.WhereClauseCache(50,500),f=new g.default("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));a.validateWhere=function(a,c){if(!c)return!0;var f=b.get(c,a);if(!f)throw new k("feature-store:unsupported-query","invalid SQL expression",{where:c});if(!f.isStandardized)throw new k("feature-store:unsupported-query",
"where clause is not standard",{where:c});h(a,f.fieldNames,"where clause contains missing fields");return!0};a.validateHaving=function(a,c,f){if(!c)return!0;var e=b.get(c,a);if(!e)throw new k("feature-store:unsupported-query","invalid SQL expression",{having:c});if(!e.isAggregate)throw new k("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:c});h(a,e.fieldNames,"having contains missing fields");if(!e.getExpressions().every(function(b){var c=b.aggregateType;
b=b.field;var e=a.has(b)&&a.get(b).name;return f.some(function(b){var f=b.onStatisticField;b=b.statisticType;return(a.has(f)&&a.get(f).name)===e&&b.toLowerCase().trim()===c})}))throw new k("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:c});return!0};a.getWhereClause=c;a.validateFields=h;a.getExpressionFromFieldName=m;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};a.hasInvalidFieldType=function(a,b){return(a=b.get(a))?!f.has(a.type):
!1}})},"esri/core/sql/WhereClauseCache":function(){define(["require","exports","../ItemCache","./WhereClause"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,c){this._cache=new l(a);this._invalidCache=new l(c)}a.prototype.get=function(a,c){var e=c.uid+":"+a,d=this._cache.get(e);if(d)return d;if(void 0!==this._invalidCache.get(e))return null;try{var b=g.WhereClause.create(a,c);this._cache.put(e,b);return b}catch(f){return this._invalidCache.put(e,null),
null}};return a}();a.WhereClauseCache=d})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(d,a,l){return function(){function a(a,e){this._storage=new l.MemCacheStorage;this._storage.maxSize=a;e&&this._storage.registerRemoveFunc("",e)}a.prototype.put=function(a,e){this._storage.put(a,e,1,1)};a.prototype.pop=function(a){return this._storage.pop(a)};a.prototype.get=function(a){return this._storage.get(a)};a.prototype.clear=function(){this._storage.clearAll()};a.prototype.destroy=
function(){this._storage.clearAll()};return a}()})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(d,a,l,g,k,e,c,h){function m(a,b){a+="";return a.length>=b?a:Array(b-a.length+1).join("0")+a}function b(a,b,c,f,e,d,h,g,k){void 0===c&&(c="0");void 0===f&&(f="0");void 0===e&&(e="0");void 0===d&&(d="0");void 0===h&&(h="");void 0===g&&(g="0");void 0===
k&&(k="0");return"+"===h||"-"===h?(a=m(parseInt(a,10),4)+"-"+m(parseInt(b,10),2)+"-"+m(parseInt(c,10),2),b="",10>parseFloat(d)&&(b="0"),f=m(parseInt(f,10),2)+":"+m(parseInt(e,10),2)+":"+(b+parseFloat(d).toString()),h=""+h+m(parseInt(g,10),2)+":"+m(parseInt(k,10),2),new Date(a+"T"+f+h)):new Date(parseInt(a,10),parseInt(b,10),parseInt(c,10),parseInt(f,10),parseInt(e,10),parseFloat(d))}function f(a){var c=E.exec(a);if(null!==c){a=c[1];var f=c[2],e=c[3],d=c[4],h=c[5],g=c[6];return b(a,f,e,d,h,g)}c=F.exec(a);
if(null!==c){a=c[1];var f=c[2],e=c[3],d=c[4],h=c[5],g=c[6],k=c[7],m=c[8],c=c[9];return b(a,f,e,d,h,g,k,m,c)}c=H.exec(a);if(null!==c)return a=c[1],f=c[2],e=c[3],d=c[4],h=c[5],k=c[6],m=c[7],c=c[8],b(a,f,e,d,h,"0",k,m,c);c=G.exec(a);if(null!==c)return a=c[1],f=c[2],e=c[3],d=c[4],h=c[5],b(a,f,e,d,h);c=B.exec(a);if(null!==c)return a=c[1],f=c[2],e=c[3],b(a,f,e);throw Error("SQL Invalid Timestamp");}function p(a){a=B.exec(a);if(null===a)throw Error("SQL Invalid Date");var b=a[2],c=a[3];return new Date(parseInt(a[1],
10),parseInt(b,10)-1,parseInt(c,10))}function u(a){return Array.isArray(a)?a:[a]}function n(a){return null!==a?!0!==a:null}function r(a,b){return null!=a&&null!=b?!0===a&&!0===b:!1===a||!1===b?!1:null}function w(a,b){return null!=a&&null!=b?!0===a||!0===b:!0===a||!0===b?!0:null}function t(a,b){if(null==a)return null;for(var c=!1,f=0;f<b.length;f++){var e=b[f];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function y(a,b,c){if(null==a)return null;for(var f="",e=0,d=0;d<b.length;d++){var h=b.charAt(d);
switch(e){case 0:h===c?e=1:f=0<="-[]/{}()*+?.\\^$|".indexOf(h)?f+("\\"+h):"%"===h?f+".*":"_"===h?f+".":f+h;break;case 1:f=0<="-[]/{}()*+?.\\^$|".indexOf(h)?f+("\\"+h):f+h,e=0}}return(new RegExp("^"+f+"$")).test(a)}function x(a){return a instanceof Date?a.valueOf():a}function A(a,b,c){if(null==b||null==c)return null;b=x(b);c=x(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function z(a){for(var b=
[],c={},f=0;f<a.length;f++){var e=a[f],d=e.toLowerCase();void 0===c[d]&&(b.push(e),c[d]=1)}return b}function C(a,b,f){if(b instanceof c.SqlInterval)if(f instanceof Date)switch(a){case "+":return new Date(b.valueInMilliseconds()+f.getTime());case "-":return b.valueInMilliseconds()-f.getTime();case "*":return b.valueInMilliseconds()*f.getTime();case "/":return b.valueInMilliseconds()/f.getTime()}else if(f instanceof c.SqlInterval)switch(a){case "+":return c.SqlInterval.createFromMilliseconds(b.valueInMilliseconds()+
f.valueInMilliseconds());case "-":return c.SqlInterval.createFromMilliseconds(b.valueInMilliseconds()-f.valueInMilliseconds());case "*":return b.valueInMilliseconds()*f.valueInMilliseconds();case "/":return b.valueInMilliseconds()/f.valueInMilliseconds()}else b=b.valueInMilliseconds();else if(f instanceof c.SqlInterval)if(b instanceof Date)switch(a){case "+":return new Date(f.valueInMilliseconds()+b.getTime());case "-":return new Date(b.getTime()-f.valueInMilliseconds());case "*":return b.getTime()*
f.valueInMilliseconds();case "/":return b.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(b instanceof Date&&"number"===typeof f)switch(f*=864E5,b=b.getTime(),a){case "+":return new Date(b+f);case "-":return new Date(b-f);case "*":return new Date(b*f);case "/":return new Date(b/f)}else if(f instanceof Date&&"number"===typeof b)switch(b*=864E5,f=f.getTime(),a){case "+":return new Date(b+f);case "-":return new Date(b-f);case "*":return new Date(b*f);case "/":return new Date(b/
f)}switch(a){case "+":return b+f;case "-":return b-f;case "*":return b*f;case "/":return b/f}}function D(a,b,c,f){a=f.getAttribute(a,b);return null!=a&&1===c[b]?new Date(a):a}Object.defineProperty(a,"__esModule",{value:!0});var B=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,
G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,J=function(){function a(){}a.makeBool=function(a){return!0===a};a.featureValue=function(a,b,c,f){return D(a,b,c,f)};a.equalsNull=function(a){return null===a};a.applyLike=function(a,b,c){return y(a,b,c)};a.ensureArray=function(a){return u(a)};a.applyIn=function(a,b){return t(a,b)};a.currentDate=function(){var a=new Date;a.setHours(0,0,0,0);return a};a.makeSqlInterval=function(a,b,f){return c.SqlInterval.createFromValueAndQualifer(a,b,f)};a.convertInterval=
function(a){return a instanceof c.SqlInterval?a.valueInMilliseconds():a};a.currentTimestamp=function(){return new Date};a.compare=function(a,b,c){return A(a,b,c)};a.calculate=function(a,b,c){return C(a,b,c)};a.makeComparable=function(a){return x(a)};a.evaluateFunction=function(a,b){return c.evaluateFunction(a,b)};a.lookup=function(a,b){a=b[a];return void 0===a?null:a};a.between=function(a,b){return null==a||null==b[0]||null==b[1]?null:a>=b[0]&&a<=b[1]};a.notbetween=function(a,b){return null==a||null==
b[0]||null==b[1]?null:a<b[0]||a>b[1]};a.ternaryNot=function(a){return n(a)};a.ternaryAnd=function(a,b){return r(a,b)};a.ternaryOr=function(a,b){return w(a,b)};return a}();d=function(){function b(a,b){this.fieldsIndex=b;this.datefields={};this.parameters={};this.parseTree=h.WhereGrammar.parse(a);a=this.extractExpressionInfo(b);b=a.isStandardized;var c=a.isAggregate;this.referencedFieldNames=a.referencedFieldNames;this.isStandardized=b;this.isAggregate=c}b.create=function(a,c){return new b(a,c)};Object.defineProperty(b.prototype,
"fieldNames",{get:function(){return this.referencedFieldNames},enumerable:!0,configurable:!0});b.prototype.testSet=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);for(var f={},e=function(a){f[a]=b.map(function(b){return c.getAttribute(b,a)})},d=0,h=this.fieldNames;d<h.length;d++)e(h[d]);return!!this.evaluateNode(this.parseTree,{attributes:f},a.defaultAttributeAdapter)};b.prototype.calculateValue=function(b,f){void 0===f&&(f=a.defaultAttributeAdapter);b=this.evaluateNode(this.parseTree,b,f);
return b instanceof c.SqlInterval?b.valueInMilliseconds()/864E5:b};b.prototype.calculateValueCompiled=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(b,this.parameters,c,this.datefields);if(k("csp-restrictions"))return this.calculateValue(b,c);this.compileMe();return this.parseTree._compiledVersion(b,this.parameters,c,this.datefields)};b.prototype.testFeature=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);
return!!this.evaluateNode(this.parseTree,b,c)};b.prototype.testFeatureCompiled=function(b,c){void 0===c&&(c=a.defaultAttributeAdapter);if(void 0===this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(b,this.parameters,c,this.datefields);if(k("csp-restrictions"))return this.testFeature(b,c);this.compileMe();return!!this.parseTree._compiledVersion(b,this.parameters,c,this.datefields)};b.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===
b.type&&a.push(b.name.toLowerCase())});return z(a)};b.prototype.getExpressions=function(){var a=new g.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var f=c+"-"+b;a.has(f)||a.set(f,{aggregateType:c,field:b})}}});return l.from(a.values())};b.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return z(a)};b.prototype.compileMe=
function(){var a="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",a)).bind(J)};b.prototype.extractExpressionInfo=function(a){var b=this,f=[],d=!0,h=!0;this.visitAll(this.parseTree,function(g){switch(g.type){case "column_ref":var k=g.column.toUpperCase();if("CURRENT_DATE"!==k&&"CURRENT_TIMESTAMP"!==k){var m=(k=a.get(g.column))&&k.name;!k||"date"!==k.type&&"esriFieldTypeDate"!==
k.type||(b.datefields[k.name]=1);void 0!==m?(f.push(m),g.column=m):f.push(g.column)}break;case "function":k=g.name,g=g.args.value.length,d&&(d=c.isStandardized(k,g)),h&&(h=e.isAggregate(k,g))}});return{referencedFieldNames:z(f),isStandardized:d,isAggregate:h}};b.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,f=a.clauses;c<f.length;c++){var e=f[c];this.visitAll(e,b)}"simple"===
a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};b.prototype.evaluateNodeToJavaScript=function(a){switch(a.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(a.value)+", "+JSON.stringify(a.qualifier)+
","+JSON.stringify(a.op)+")";case "case_expression":var b="";if("simple"===a.format)for(var c="this.makeComparable("+this.evaluateNodeToJavaScript(a.operand)+")",b="( ",e=0;e<a.clauses.length;e++)b+=" ("+c+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(a.clauses[e].operand)+")) ? ("+this.evaluateNodeToJavaScript(a.clauses[e].value)+") : ";else for(b="( ",e=0;e<a.clauses.length;e++)b+=" this.makeBool("+this.evaluateNodeToJavaScript(a.clauses[e].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(a.clauses[e].value)+") : ";b=null!==a.else?b+this.evaluateNodeToJavaScript(a.else):b+"null";return b+" )";case "param":return"this.lookup("+JSON.stringify(a.value.toLowerCase())+",lookups)";case "expr_list":b="[";c=0;for(a=a.value;c<a.length;c++)e=a[c],"["!==b&&(b+=","),b+=this.evaluateNodeToJavaScript(e);return b+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(a.expr)+")";case "binary_expr":switch(a.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")";case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+
this.evaluateNodeToJavaScript(a.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")"}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(a.value);case "date":return"(new Date("+p(a.value).getTime().toString()+"))";case "timestamp":return"(new Date("+f(a.value).getTime().toString()+"))";case "column_ref":return"CURRENT_DATE"===
a.column.toUpperCase()?"this.currentDate()":"CURRENT_TIMESTAMP"===a.column.toUpperCase()?"this.currentTimestamp()":"this.featureValue(feature,"+JSON.stringify(a.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(a.name)+","+this.evaluateNodeToJavaScript(a.args)+")"}throw Error("Unsupported sql syntax "+a.type);};b.prototype.evaluateNode=function(a,b,d){switch(a.type){case "interval":return b=this.evaluateNode(a.value,b,d),c.SqlInterval.createFromValueAndQualifer(b,
a.qualifier,a.op);case "case_expression":if("simple"===a.format)for(var h=x(this.evaluateNode(a.operand,b,d)),g=0;g<a.clauses.length;g++){if(h===x(this.evaluateNode(a.clauses[g].operand,b,d)))return this.evaluateNode(a.clauses[g].value,b,d)}else for(g=0;g<a.clauses.length;g++)if(!0===this.evaluateNode(a.clauses[g].operand,b,d))return this.evaluateNode(a.clauses[g].value,b,d);return null!==a.else?this.evaluateNode(a.else,b,d):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":h=
[];g=0;for(a=a.value;g<a.length;g++){var k=a[g];h.push(this.evaluateNode(k,b,d))}return h;case "unary_expr":return n(this.evaluateNode(a.expr,b,d));case "binary_expr":switch(a.operator){case "AND":return r(this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d));case "OR":return w(this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d));case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,b,d);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");
return null!==this.evaluateNode(a.left,b,d);case "IN":return h=u(this.evaluateNode(a.right,b,d)),t(this.evaluateNode(a.left,b,d),h);case "NOT IN":return h=u(this.evaluateNode(a.right,b,d)),n(t(this.evaluateNode(a.left,b,d),h));case "BETWEEN":return h=this.evaluateNode(a.left,b,d),a=this.evaluateNode(a.right,b,d),null==h||null==a[0]||null==a[1]?null:h>=x(a[0])&&h<=x(a[1]);case "NOTBETWEEN":return h=this.evaluateNode(a.left,b,d),a=this.evaluateNode(a.right,b,d),null==h||null==a[0]||null==a[1]?null:
h<x(a[0])||h>x(a[1]);case "LIKE":return y(this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d),a.escape);case "NOT LIKE":return n(y(this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return A(a.operator,this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d));case "-":case "+":case "*":case "/":return C(a.operator,this.evaluateNode(a.left,b,d),this.evaluateNode(a.right,b,d))}throw Error("Not Supported Operator "+
a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return p(a.value);case "timestamp":return f(a.value);case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(k=new Date,k.setHours(0,0,0,0),k):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?new Date:D(b,a.column,this.datefields,d);case "function":return b=this.evaluateNode(a.args,b,d),this.isAggregate?e.aggregateFunction(a.name,b):c.evaluateFunction(a.name,b)}throw Error("Unsupported sql syntax "+a.type);
};return b}();a.WhereClause=d;a.defaultAttributeAdapter={getAttribute:function(a,b){return(a&&"object"===typeof a.attributes?a.attributes:a)[b]}}})},"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(d,a){function l(a){for(var c=0,e=0;e<a.length;e++)c+=a[e];return c/a.length}function g(a){for(var c=l(a),e=a.length,d=0,b=0;b<a.length;b++)d+=Math.pow(a[b]-c,2);return 1<e?d/(e-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.aggregateFunction=function(a,c){var e=
k[a.toLowerCase()];if(null==e)throw Error("Function Not Recognised");if(c.length<e.minParams||c.length>e.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return e.evaluate(c)};a.isAggregate=function(a,c){a=k[a.toLowerCase()];return null!=a&&c>=a.minParams&&c<=a.maxParams};var k={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,
a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:l(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var c=0,e=0;e<a.length;e++)c+=a[e];a=c}return a}},stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sqrt(g(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:g(a[0])}}}})},
"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}a.fixDefaults=function(a){if(null!==a.precision||null!==a.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};a.createFromMilliseconds=function(e){var c=new a;c.second=e/1E3;return c};a.createFromValueAndQualifer=
function(e,c,d){var h=null,b=new a;b.op="-"===d?"-":"+";if("interval-period"===c.type){a.fixDefaults(c);if("year"===c.period||"month"===c.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(e))b[c.period]=parseFloat(e);else throw Error("Illegal Interval");}else{a.fixDefaults(c.start);a.fixDefaults(c.end);if("year"===c.start.period||"month"===c.start.period)throw Error("Year-Month Intervals not supported");if("year"===c.end.period||"month"===c.end.period)throw Error("Year-Month Intervals not supported");
switch(c.start.period){case "day":switch(c.end.period){case "hour":h=/^[0-9]{1,} [0-9]{1,}$/;if(h.test(e))b[c.start.period]=parseFloat(e.split(" ")[0]),b[c.end.period]=parseFloat(e.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":h=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(h.test(e))b[c.start.period]=parseFloat(e.split(" ")[0]),e=e.split(" ")[1].split(":"),b.hour=parseFloat(e[0]),b.minute=parseFloat(e[1]);else throw Error("Illegal Interval");break;case "second":h=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(h.test(e))b[c.start.period]=parseFloat(e.split(" ")[0]),e=e.split(" ")[1].split(":"),b.hour=parseFloat(e[0]),b.minute=parseFloat(e[1]),b.second=parseFloat(e[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(c.end.period){case "minute":h=/^[0-9]{1,}:[0-9]{1,}$/;if(h.test(e))b.hour=parseFloat(e.split(":")[0]),b.minute=parseFloat(e.split(":")[1]);else throw Error("Illegal Interval");break;case "second":h=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(h.test(e))e=e.split(":"),b.hour=parseFloat(e[0]),b.minute=parseFloat(e[1]),b.second=parseFloat(e[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(c.end.period){case "second":h=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(h.test(e))e=e.split(":"),b.minute=parseFloat(e[0]),b.second=parseFloat(e[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return b};a.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return a}();a.SqlInterval=d;a.evaluateFunction=function(a,e){var c=g[a.toLowerCase()];if(null==c)throw Error("Function Not Recognised");if(e.length<c.minParams||e.length>c.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return c.evaluate(e)};a.isStandardized=function(a,e){a=g[a.toLowerCase()];return null!=a&&e>=a.minParams&&
e<=a.maxParams};var g={extract:{minParams:2,maxParams:2,evaluate:function(a){var e=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(e.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();case "MONTH":return a.getMonth()+1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var e=
a[0],c=a[1];return null==e||null==c?null:e.toString().substring(c-1)}if(3===a.length)return e=a[0],c=a[1],a=a[2],null==e||null==c||null==a?null:0>=a?"":e.toString().substring(c-1,c+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var e=a[0];a=a[1];return null==e||null==a?null:a.indexOf(e)+1}},trim:{minParams:2,maxParams:3,evaluate:function(a){var e=3===a.length,c=e?a[1]:" ",e=e?a[2]:a[1];if(null==c||null==e)return null;c="("+l.escapeString(c)+")";switch(a[0]){case "BOTH":return e.replace(new RegExp("^"+
c+"*|"+c+"*$","g"),"");case "LEADING":return e.replace(new RegExp("^"+c+"*","g"),"");case "TRAILING":return e.replace(new RegExp(c+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?
null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%
a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var e=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==e?null:Math.round(e*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var e="",c=0;c<
a.length;c++){if(null==a[c])return null;e+=a[c].toString()}return e}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(d,a){var l={};a.setObject("dojo.regexp",l);l.escapeString=function(a,d){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return d&&
-1!=d.indexOf(a)?a:"\\"+a})};l.buildGroupRE=function(a,d,e){if(!(a instanceof Array))return d(a);for(var c=[],h=0;h<a.length;h++)c.push(d(a[h]));return l.group(c.join("|"),e)};l.group=function(a,d){return"("+(d?"?:":"")+a+")"};return l})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){}a.parse=function(a){return l.parse(a)};return a}();a.WhereGrammar=d})},"esri/core/sql/sql92grammar":function(){define([],
function(){function d(a,l,g,k){this.message=a;this.expected=l;this.found=g;this.location=k;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,d)}(function(a,d){function g(){this.constructor=a}g.prototype=d.prototype;a.prototype=new g})(d,Error);d.buildMessage=function(a,d){function g(a){return a.charCodeAt(0).toString(16).toUpperCase()}function k(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,
"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+g(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+g(a)})}function e(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+g(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+g(a)})}var c={literal:function(a){return'"'+k(a.text)+
'"'},"class":function(a){var c="",b;for(b=0;b<a.parts.length;b++)c+=a.parts[b]instanceof Array?e(a.parts[b][0])+"-"+e(a.parts[b][1]):e(a.parts[b]);return"["+(a.inverted?"^":"")+c+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var e=Array(a.length),b;for(b=0;b<a.length;b++){var f=b,d;d=a[b];d=c[d.type](d);e[f]=d}e.sort();if(0<e.length){for(a=b=1;b<e.length;b++)e[b-1]!==e[b]&&(e[a]=e[b],a++);e.length=
a}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(a)+" but "+(d?'"'+k(d)+'"':"end of input")+" found."};return{SyntaxError:d,parse:function(a,l){function g(a,b){return{type:"literal",text:a,ignoreCase:b}}function k(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function e(b){var c=Wa[b],f;if(!c){for(f=b-1;!Wa[f];)f--;c=Wa[f];for(c={line:c.line,column:c.column};f<b;)10===a.charCodeAt(f)?(c.line++,c.column=
1):c.column++,f++;Wa[b]=c}return c}function c(a,b){var c=e(a),f=e(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:f.line,column:f.column}}}function h(a){v<Aa||(v>Aa&&(Aa=v,Za=[]),Za.push(a))}function m(){var a,b,c;a=v;b=N();b!==q?(b=f(),b!==q?(c=N(),c!==q?a=b:(v=a,a=q)):(v=a,a=q)):(v=a,a=q);return a}function b(){var a,b,c,e,d,h,g,m;a=v;b=f();if(b!==q){c=[];e=v;d=N();d!==q?(h=oa(),h!==q?(g=N(),g!==q?(m=f(),m!==q?e=d=[d,h,g,m]:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q);for(;e!==
q;)c.push(e),e=v,d=N(),d!==q?(h=oa(),h!==q?(g=N(),g!==q?(m=f(),m!==q?e=d=[d,h,g,m]:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q);if(c!==q){a={type:"expr_list"};b=[b];for(e=0;e<c.length;e++)b.push(c[e][3]);a.value=b}else v=a,a=q}else v=a,a=q;return a}function f(){var a,b,c,f,e,d,h,g;a=v;b=p();if(b!==q){c=[];f=v;e=N();e!==q?(d=ca(),d!==q?(h=N(),h!==q?(g=p(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);for(;f!==q;)c.push(f),f=v,e=N(),e!==q?(d=ca(),d!==q?(h=N(),h!==q?(g=p(),g!==q?f=e=[e,
d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);c!==q?a=b=Ua(b,c):(v=a,a=q)}else v=a,a=q;return a}function p(){var a,b,c,f,e,d,h,g;a=v;b=u();if(b!==q){c=[];f=v;e=N();e!==q?(d=ea(),d!==q?(h=N(),h!==q?(g=u(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);for(;f!==q;)c.push(f),f=v,e=N(),e!==q?(d=ea(),d!==q?(h=N(),h!==q?(g=u(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);c!==q?a=b=Ua(b,c):(v=a,a=q)}else v=a,a=q;return a}function u(){var c,f,e,d,g;c=v;f=V();f===q&&(f=
v,33===a.charCodeAt(v)?(e=jb,v++):(e=q,0===L&&h(kb)),e!==q?(d=v,L++,61===a.charCodeAt(v)?(g=Va,v++):(g=q,0===L&&h(wb)),L--,g===q?d=void 0:(v=d,d=q),d!==q?f=e=[e,d]:(v=f,f=q)):(v=f,f=q));f!==q?(e=N(),e!==q?(d=u(),d!==q?c=f={type:"unary_expr",operator:"NOT",expr:d}:(v=c,c=q)):(v=c,c=q)):(v=c,c=q);if(c===q)if(c=v,f=t(),f!==q)if(e=N(),e!==q){var m,k,p;e=[];d=v;g=N();g!==q?(m=n(),m!==q?(k=N(),k!==q?(p=t(),p!==q?d=g=[g,m,k,p]:(v=d,d=q)):(v=d,d=q)):(v=d,d=q)):(v=d,d=q);if(d!==q)for(;d!==q;)e.push(d),d=v,
g=N(),g!==q?(m=n(),m!==q?(k=N(),k!==q?(p=t(),p!==q?d=g=[g,m,k,p]:(v=d,d=q)):(v=d,d=q)):(v=d,d=q)):(v=d,d=q);else e=q;e!==q&&(e={type:"arithmetic",tail:e});e===q&&(e=v,d=w(),d!==q?(g=N(),g!==q?(g=ia(),g!==q?(g=N(),g!==q?(g=b(),g!==q?(m=N(),m!==q?(m=ka(),m!==q?e=d={op:d,right:g}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q),e===q&&(e=v,d=w(),d!==q?(g=N(),g!==q?(g=ia(),g!==q?(g=N(),g!==q?(g=ka(),g!==q?e=d={op:d,right:{type:"expr_list",value:[]}}:(v=e,e=q)):(v=e,e=q)):(v=
e,e=q)):(v=e,e=q)):(v=e,e=q),e===q&&(e=v,d=w(),d!==q?(g=N(),g!==q?(g=F(),g!==q?e=d={op:d,right:g}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q))),e===q&&(e=v,g=V(),g!==q?(d=N(),d!==q?(d=da(),d!==q?(m=N(),m!==q?(m=t(),m!==q?(k=N(),k!==q?(k=ea(),k!==q?(g=N(),g!==q?(g=t(),g!==q?e=g={op:"NOT"+d,right:{type:"expr_list",value:[m,g]}}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q),e===q&&(e=v,g=da(),g!==q?(d=N(),d!==q?(d=t(),d!==q?(m=N(),m!==q?(m=ea(),m!==q?(k=N(),k!==
q?(k=t(),k!==q?e=g={op:g,right:{type:"expr_list",value:[d,k]}}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)),e===q&&(e=v,d=ba(),d!==q?(g=N(),g!==q?(g=V(),g!==q?(g=N(),g!==q?(g=t(),g!==q?e=d={op:d+"NOT",right:g}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q),e===q&&(e=v,d=ba(),d!==q?(g=N(),g!==q?(g=t(),g!==q?e=d={op:d,right:g}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)),e===q&&(e=v,d=r(),d!==q?(g=N(),g!==q?(g=M(),g!==q?(m=N(),m!==q?(m=v,a.substr(v,6).toLowerCase()===$c?(k=
a.substr(v,6),v+=6):(k=q,0===L&&h(ad)),k!==q?(k=v,L++,p=B(),L--,p===q?k=void 0:(v=k,k=q),k!==q?m="ESCAPE":(v=m,m=q)):(v=m,m=q),m!==q?(m=N(),m!==q?(m=O(),m!==q?e=d={op:d,right:g,escape:m.value}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q)):(v=e,e=q),e===q&&(e=v,d=r(),d!==q?(g=N(),g!==q?(g=M(),g!==q?e=d={op:d,right:g,escape:""}:(v=e,e=q)):(v=e,e=q)):(v=e,e=q))))));e===q&&(e=null);e!==q?(c=f,f=e,""==f||void 0==f||null==f?f=c:(e=null,f=e="arithmetic"==f.type?Ua(c,f.tail):Ca(f.op,c,
f.right,f.escape)),c=f):(v=c,c=q)}else v=c,c=q;else v=c,c=q;return c}function n(){var b;a.substr(v,2)===lb?(b=lb,v+=2):(b=q,0===L&&h(Sb));b===q&&(62===a.charCodeAt(v)?(b=Rb,v++):(b=q,0===L&&h(Qa)),b===q&&(a.substr(v,2)===Ra?(b=Ra,v+=2):(b=q,0===L&&h(Tb)),b===q&&(a.substr(v,2)===xb?(b=xb,v+=2):(b=q,0===L&&h($a)),b===q&&(60===a.charCodeAt(v)?(b=Ub,v++):(b=q,0===L&&h(yb)),b===q&&(61===a.charCodeAt(v)?(b=Va,v++):(b=q,0===L&&h(wb)),b===q&&(a.substr(v,2)===Sa?(b=Sa,v+=2):(b=q,0===L&&h(Ja))))))));return b}
function r(){var a,b,c,f;a=a=v;b=V();b!==q?(c=N(),c!==q?(f=fa(),f!==q?a=b=[b,c,f]:(v=a,a=q)):(v=a,a=q)):(v=a,a=q);a!==q&&(a=a[0]+" "+a[2]);a===q&&(a=fa());return a}function w(){var a,b,c,f;a=a=v;b=V();b!==q?(c=N(),c!==q?(f=Z(),f!==q?a=b=[b,c,f]:(v=a,a=q)):(v=a,a=q)):(v=a,a=q);a!==q&&(a=a[0]+" "+a[2]);a===q&&(a=Z());return a}function t(){var a,b,c,f,e,d,h,g;a=v;b=x();if(b!==q){c=[];f=v;e=N();e!==q?(d=y(),d!==q?(h=N(),h!==q?(g=x(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);for(;f!==
q;)c.push(f),f=v,e=N(),e!==q?(d=y(),d!==q?(h=N(),h!==q?(g=x(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);c!==q?a=b=Ua(b,c):(v=a,a=q)}else v=a,a=q;return a}function y(){var b;43===a.charCodeAt(v)?(b=mb,v++):(b=q,0===L&&h(nb));b===q&&(45===a.charCodeAt(v)?(b=la,v++):(b=q,0===L&&h(ab)));return b}function x(){var a,b,c,f,e,d,h,g;a=v;b=z();if(b!==q){c=[];f=v;e=N();e!==q?(d=A(),d!==q?(h=N(),h!==q?(g=z(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);for(;f!==q;)c.push(f),
f=v,e=N(),e!==q?(d=A(),d!==q?(h=N(),h!==q?(g=z(),g!==q?f=e=[e,d,h,g]:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q);c!==q?a=b=Ua(b,c):(v=a,a=q)}else v=a,a=q;return a}function A(){var b;42===a.charCodeAt(v)?(b=zb,v++):(b=q,0===L&&h(Vb));b===q&&(47===a.charCodeAt(v)?(b=Wb,v++):(b=q,0===L&&h(Xb)));return b}function z(){var c,e,d,g,m,k,p;p=O();if(p===q){var n,l,r,t;n=v;var u,y,x,w;u=v;y=U();y!==q?(x=T(),x!==q?(w=R(),w!==q?u=y=parseFloat(y+x+w):(v=u,u=q)):(v=u,u=q)):(v=u,u=q);u===q&&(u=v,y=U(),y!==q?(x=T(),
x!==q?u=y=parseFloat(y+x):(v=u,u=q)):(v=u,u=q),u===q&&(u=v,y=U(),y!==q?(x=R(),x!==q?u=y=parseFloat(y+x):(v=u,u=q)):(v=u,u=q),u===q&&(u=v,y=U(),y!==q&&(y=parseFloat(y)),u=y)));l=u;l!==q?(r=v,L++,t=D(),L--,t===q?r=void 0:(v=r,r=q),r!==q?n=l={type:"number",value:l}:(v=n,n=q)):(v=n,n=q);p=n;if(p===q){var A,z;A=v;var I,K,J,W;I=v;a.substr(v,4).toLowerCase()===bd?(K=a.substr(v,4),v+=4):(K=q,0===L&&h(cd));K!==q?(J=v,L++,W=B(),L--,W===q?J=void 0:(v=J,J=q),J!==q?I=K=[K,J]:(v=I,I=q)):(v=I,I=q);z=I;z!==q&&(z=
{type:"bool",value:!0});A=z;if(A===q){A=v;var X,ca,da,ba;X=v;a.substr(v,5).toLowerCase()===dd?(ca=a.substr(v,5),v+=5):(ca=q,0===L&&h(ed));ca!==q?(da=v,L++,ba=B(),L--,ba===q?da=void 0:(v=da,da=q),da!==q?X=ca=[ca,da]:(v=X,X=q)):(v=X,X=q);z=X;z!==q&&(z={type:"bool",value:!1});A=z}p=A;if(p===q){var V,fa,ea,ua,sa;fa=v;a.substr(v,4).toLowerCase()===fd?(ea=a.substr(v,4),v+=4):(ea=q,0===L&&h(gd));ea!==q?(ua=v,L++,sa=B(),L--,sa===q?ua=void 0:(v=ua,ua=q),ua!==q?fa=ea=[ea,ua]:(v=fa,fa=q)):(v=fa,fa=q);V=fa;V!==
q&&(V={type:"null",value:null});p=V;if(p===q){var oa,Ia,Ua,zb;oa=v;var Qa,Ca,Va,Aa;Qa=v;a.substr(v,4).toLowerCase()===hd?(Ca=a.substr(v,4),v+=4):(Ca=q,0===L&&h(id));Ca!==q?(Va=v,L++,Aa=B(),L--,Aa===q?Va=void 0:(v=Va,Va=q),Va!==q?Qa=Ca="DATE":(v=Qa,Qa=q)):(v=Qa,Qa=q);Ia=Qa;Ia!==q?(Ua=N(),Ua!==q?(zb=M(),zb!==q?oa=Ia={type:"date",value:zb.value}:(v=oa,oa=q)):(v=oa,oa=q)):(v=oa,oa=q);p=oa;if(p===q){var Ta,lb,xb,ib;Ta=v;var Ma,jb,$a,wb;Ma=v;a.substr(v,9).toLowerCase()===jd?(jb=a.substr(v,9),v+=9):(jb=
q,0===L&&h(kd));jb!==q?($a=v,L++,wb=B(),L--,wb===q?$a=void 0:(v=$a,$a=q),$a!==q?Ma=jb="TIMESTAMP":(v=Ma,Ma=q)):(v=Ma,Ma=q);lb=Ma;lb!==q?(xb=N(),xb!==q?(ib=M(),ib!==q?Ta=lb={type:"timestamp",value:ib.value}:(v=Ta,Ta=q)):(v=Ta,Ta=q)):(v=Ta,Ta=q);p=Ta;if(p===q){var ga,Ra,Ja,Na,kb,ob,Tb,yb;ga=v;Ra=ra();Ra!==q?(Ja=N(),Ja!==q?(45===a.charCodeAt(v)?(Na=la,v++):(Na=q,0===L&&h(ab)),Na===q&&(43===a.charCodeAt(v)?(Na=mb,v++):(Na=q,0===L&&h(nb))),Na!==q?(kb=N(),kb!==q?(ob=M(),ob!==q?(Tb=N(),Tb!==q?(yb=G(),yb!==
q?ga=Ra={type:"interval",value:ob,qualifier:yb,op:Na}:(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q);ga===q&&(ga=v,Ra=ra(),Ra!==q?(Ja=N(),Ja!==q?(Na=M(),Na!==q?(kb=N(),kb!==q?(ob=G(),ob!==q?ga=Ra={type:"interval",value:Na,qualifier:ob,op:""}:(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q)):(v=ga,ga=q));p=ga}}}}}}c=p;if(c===q){var ma,Sa,Vb,Rb,Sb,Wa,Ub,gb,hb,Za,Wb,Xb;ma=v;var bb,Yb,Ab,Jb;bb=v;a.substr(v,7).toLowerCase()===ld?(Yb=a.substr(v,7),v+=7):(Yb=
q,0===L&&h(md));Yb!==q?(Ab=v,L++,Jb=B(),L--,Jb===q?Ab=void 0:(v=Ab,Ab=q),Ab!==q?bb=Yb="EXTRACT":(v=bb,bb=q)):(v=bb,bb=q);Sa=bb;if(Sa!==q)if(Vb=N(),Vb!==q)if(Rb=ia(),Rb!==q)if(Sb=N(),Sb!==q){var Da;Da=pa();Da===q&&(Da=wa(),Da===q&&(Da=ya(),Da===q&&(Da=Ba(),Da===q&&(Da=Ka(),Da===q&&(Da=za())))));Wa=Da;Wa!==q?(Ub=N(),Ub!==q?(gb=qa(),gb!==q?(hb=N(),hb!==q?(Za=f(),Za!==q?(Wb=N(),Wb!==q?(Xb=ka(),Xb!==q?ma=Sa={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Wa},Za]}}:(v=
ma,ma=q)):(v=ma,ma=q)):(v=ma,ma=q)):(v=ma,ma=q)):(v=ma,ma=q)):(v=ma,ma=q)):(v=ma,ma=q)}else v=ma,ma=q;else v=ma,ma=q;else v=ma,ma=q;else v=ma,ma=q;c=ma;if(c===q){var ja,qc,Kb,Lb,Mb,Zb,Nb,Ob,Pb,$b,Qb,xa,pb,rc,sc,tc;ja=v;var cb,ac,Bb,zc;cb=v;a.substr(v,9).toLowerCase()===nd?(ac=a.substr(v,9),v+=9):(ac=q,0===L&&h(od));ac!==q?(Bb=v,L++,zc=B(),L--,zc===q?Bb=void 0:(v=Bb,Bb=q),Bb!==q?cb=ac="SUBSTRING":(v=cb,cb=q)):(v=cb,cb=q);qc=cb;if(qc!==q)if(Kb=N(),Kb!==q)if(Lb=ia(),Lb!==q)if(Mb=N(),Mb!==q)if(Zb=f(),
Zb!==q)if(Nb=N(),Nb!==q)if(Ob=qa(),Ob!==q)if(Pb=N(),Pb!==q)if($b=f(),$b!==q)if(Qb=N(),Qb!==q){xa=v;var db,bc,Cb,Ac;db=v;a.substr(v,3).toLowerCase()===pd?(bc=a.substr(v,3),v+=3):(bc=q,0===L&&h(qd));bc!==q?(Cb=v,L++,Ac=B(),L--,Ac===q?Cb=void 0:(v=Cb,Cb=q),Cb!==q?db=bc="FOR":(v=db,db=q)):(v=db,db=q);pb=db;pb!==q?(rc=N(),rc!==q?(sc=f(),sc!==q?(tc=N(),tc!==q?xa=pb=[pb,rc,sc,tc]:(v=xa,xa=q)):(v=xa,xa=q)):(v=xa,xa=q)):(v=xa,xa=q);xa===q&&(xa=null);xa!==q?(pb=ka(),pb!==q?ja=qc={type:"function",name:"substring",
args:{type:"expr_list",value:xa?[Zb,$b,xa[2]]:[Zb,$b]}}:(v=ja,ja=q)):(v=ja,ja=q)}else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;else v=ja,ja=q;c=ja;if(c===q){var Y,qb,cc,dc,ec,Ea,fc,rb,gc,hc,Bc,uc,Cc,Dc;Y=v;qb=ta();qb!==q?(cc=N(),cc!==q?(dc=ia(),dc!==q?(ec=N(),ec!==q?(Ea=H(),Ea===q&&(Ea=null),Ea!==q?(fc=N(),fc!==q?(rb=f(),rb!==q?(gc=N(),gc!==q?(hc=qa(),hc!==q?(Bc=N(),Bc!==q?(uc=f(),uc!==q?(Cc=N(),Cc!==q?(Dc=ka(),
Dc!==q?Y=qb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==Ea?"BOTH":Ea},rb,uc]}}:(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q);Y===q&&(Y=v,qb=ta(),qb!==q?(cc=N(),cc!==q?(dc=ia(),dc!==q?(ec=N(),ec!==q?(Ea=H(),Ea===q&&(Ea=null),Ea!==q?(fc=N(),fc!==q?(rb=f(),rb!==q?(gc=N(),gc!==q?(hc=ka(),hc!==q?Y=qb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",
value:null==Ea?"BOTH":Ea},rb]}}:(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q)):(v=Y,Y=q));c=Y;if(c===q){var na,vc,Ec,Fc,Gc,wc,Hc,Ic,Jc,xc,Kc,Lc;na=v;var eb,ic,Db,Mc;eb=v;a.substr(v,8).toLowerCase()===rd?(ic=a.substr(v,8),v+=8):(ic=q,0===L&&h(sd));ic!==q?(Db=v,L++,Mc=B(),L--,Mc===q?Db=void 0:(v=Db,Db=q),Db!==q?eb=ic="POSITION":(v=eb,eb=q)):(v=eb,eb=q);vc=eb;vc!==q?(Ec=N(),Ec!==q?(Fc=ia(),Fc!==q?(Gc=N(),Gc!==q?(wc=f(),wc!==q?(Hc=N(),Hc!==q?(Ic=Z(),Ic!==q?(Jc=
N(),Jc!==q?(xc=f(),xc!==q?(Kc=N(),Kc!==q?(Lc=ka(),Lc!==q?na=vc={type:"function",name:"position",args:{type:"expr_list",value:[wc,xc]}}:(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q)):(v=na,na=q);c=na;if(c===q){var va,jc,Nc,Oc,Pc,sb,Qc,Rc;va=v;var Fa,Eb,Fb,Oa;Fa=v;Fa=Eb=C();if(Fa===q)if(Fa=v,96===a.charCodeAt(v)?(Eb=Sc,v++):(Eb=q,0===L&&h(Tc)),Eb!==q){Fb=[];Uc.test(a.charAt(v))?(Oa=a.charAt(v),v++):(Oa=q,0===L&&h(Vc));
if(Oa!==q)for(;Oa!==q;)Fb.push(Oa),Uc.test(a.charAt(v))?(Oa=a.charAt(v),v++):(Oa=q,0===L&&h(Vc));else Fb=q;Fb!==q?(96===a.charCodeAt(v)?(Oa=Sc,v++):(Oa=q,0===L&&h(Tc)),Oa!==q?Fa=Eb=Fb.join(""):(v=Fa,Fa=q)):(v=Fa,Fa=q)}else v=Fa,Fa=q;jc=Fa;jc!==q?(Nc=N(),Nc!==q?(Oc=ia(),Oc!==q?(Pc=N(),Pc!==q?(sb=b(),sb===q&&(sb=null),sb!==q?(Qc=N(),Qc!==q?(Rc=ka(),Rc!==q?va=jc={type:"function",name:jc,args:sb?sb:{type:"expr_list",value:[]}}:(v=va,va=q)):(v=va,va=q)):(v=va,va=q)):(v=va,va=q)):(v=va,va=q)):(v=va,va=
q)):(v=va,va=q);c=va;if(c===q){var kc,aa,tb,lc,ub,mc,Xa,Ga,Gb,Wc,Xc;aa=v;tb=La();if(tb!==q)if(lc=N(),lc!==q)if(ub=f(),ub!==q)if(mc=N(),mc!==q){Xa=[];for(Ga=P();Ga!==q;)Xa.push(Ga),Ga=P();Xa!==q?(Ga=N(),Ga!==q?(Gb=Pa(),Gb!==q?aa=tb={type:"case_expression",format:"simple",operand:ub,clauses:Xa,else:null}:(v=aa,aa=q)):(v=aa,aa=q)):(v=aa,aa=q)}else v=aa,aa=q;else v=aa,aa=q;else v=aa,aa=q;else v=aa,aa=q;if(aa===q)if(aa=v,tb=La(),tb!==q)if(lc=N(),lc!==q)if(ub=f(),ub!==q)if(mc=N(),mc!==q){Xa=[];for(Ga=P();Ga!==
q;)Xa.push(Ga),Ga=P();Xa!==q?(Ga=N(),Ga!==q?(Gb=S(),Gb!==q?(Wc=N(),Wc!==q?(Xc=Pa(),Xc!==q?aa=tb={type:"case_expression",format:"simple",operand:ub,clauses:Xa,else:Gb.value}:(v=aa,aa=q)):(v=aa,aa=q)):(v=aa,aa=q)):(v=aa,aa=q)):(v=aa,aa=q)}else v=aa,aa=q;else v=aa,aa=q;else v=aa,aa=q;else v=aa,aa=q;kc=aa;if(kc===q){var ha,vb,nc,Ya,Ha,Hb,Yc,Zc;ha=v;vb=La();if(vb!==q)if(nc=N(),nc!==q){Ya=[];for(Ha=Q();Ha!==q;)Ya.push(Ha),Ha=Q();Ya!==q?(Ha=N(),Ha!==q?(Hb=Pa(),Hb!==q?ha=vb={type:"case_expression",format:"searched",
clauses:Ya,else:null}:(v=ha,ha=q)):(v=ha,ha=q)):(v=ha,ha=q)}else v=ha,ha=q;else v=ha,ha=q;if(ha===q)if(ha=v,vb=La(),vb!==q)if(nc=N(),nc!==q){Ya=[];for(Ha=Q();Ha!==q;)Ya.push(Ha),Ha=Q();Ya!==q?(Ha=N(),Ha!==q?(Hb=S(),Hb!==q?(Yc=N(),Yc!==q?(Zc=Pa(),Zc!==q?ha=vb={type:"case_expression",format:"searched",clauses:Ya,else:Hb.value}:(v=ha,ha=q)):(v=ha,ha=q)):(v=ha,ha=q)):(v=ha,ha=q)):(v=ha,ha=q)}else v=ha,ha=q;else v=ha,ha=q;kc=ha}c=kc;if(c===q){var Ib,fb,yc,oc,pc;fb=v;yc=D();if(yc!==q){oc=[];for(pc=E();pc!==
q;)oc.push(pc),pc=E();oc!==q?fb=yc+=oc.join(""):(v=fb,fb=q)}else v=fb,fb=q;Ib=fb;Ib!==q&&(Ib={type:"column_ref",table:"",column:Ib});c=Ib;c===q&&(c=F(),c===q&&(c=v,e=ia(),e!==q?(d=N(),d!==q?(g=f(),g!==q?(m=N(),m!==q?(k=ka(),k!==q?(g.paren=!0,c=e=g):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)))}}}}}}}return c}function C(){var a,b,c,f;a=v;b=D();if(b!==q){c=[];for(f=B();f!==q;)c.push(f),f=B();c!==q?a=b+=c.join(""):(v=a,a=q)}else v=a,a=q;return a}function D(){var b;td.test(a.charAt(v))?(b=a.charAt(v),
v++):(b=q,0===L&&h(ud));return b}function B(){var b;vd.test(a.charAt(v))?(b=a.charAt(v),v++):(b=q,0===L&&h(wd));return b}function E(){var b;xd.test(a.charAt(v))?(b=a.charAt(v),v++):(b=q,0===L&&h(yd));return b}function F(){var b,c,f;b=v;64===a.charCodeAt(v)?(c=zd,v++):(c=q,0===L&&h(Ad));c!==q?(f=C(),f!==q?b=c=[c,f]:(v=b,b=q)):(v=b,b=q);b!==q&&(b={type:"param",value:b[1]});return b}function H(){var b,c,f;b=v;a.substr(v,7).toLowerCase()===Bd?(c=a.substr(v,7),v+=7):(c=q,0===L&&h(Cd));c!==q?(c=v,L++,f=
B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="LEADING":(v=b,b=q)):(v=b,b=q);b===q&&(b=v,a.substr(v,8).toLowerCase()===Dd?(c=a.substr(v,8),v+=8):(c=q,0===L&&h(Ed)),c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="TRAILING":(v=b,b=q)):(v=b,b=q),b===q&&(b=v,a.substr(v,4).toLowerCase()===Fd?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(Gd)),c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="BOTH":(v=b,b=q)):(v=b,b=q)));return b}function G(){var b,c,f;b=v;var e,d;c=v;f=J();f!==q?(e=N(),e!==q?(e=ia(),
e!==q?(e=N(),e!==q?(e=I(),e!==q?(d=N(),d!==q?(d=ka(),d!==q?c=f={type:"interval-period",period:f.value,precision:e,secondary:null}:(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q)):(v=c,c=q);c===q&&(c=v,f=J(),f!==q&&(f=Jb(f)),c=f);if(c!==q)if(f=N(),f!==q)if(f=v,a.substr(v,2).toLowerCase()===Hd?(e=a.substr(v,2),v+=2):(e=q,0===L&&h(Id)),e!==q?(e=v,L++,d=B(),L--,d===q?e=void 0:(v=e,e=q),e!==q?f="TO":(v=f,f=q)):(v=f,f=q),f!==q)if(f=N(),f!==q){var g;f=v;e=J();e!==q&&(e={type:"interval-period",
period:e.value,precision:null,secondary:null});f=e;f===q&&(f=v,e=za(),e!==q?(e=N(),e!==q?(e=ia(),e!==q?(e=N(),e!==q?(e=I(),e!==q?(d=N(),d!==q?(d=oa(),d!==q?(d=N(),d!==q?(d=K(),d!==q?(g=N(),g!==q?(g=ka(),g!==q?f=e=Kb(e,d):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q),f===q&&(f=v,e=za(),e!==q?(e=N(),e!==q?(e=ia(),e!==q?(e=N(),e!==q?(e=I(),e!==q?(d=N(),d!==q?(d=ka(),d!==q?f=e={type:"interval-period",period:"second",precision:e,
secondary:null}:(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q)):(v=f,f=q),f===q&&(f=v,e=za(),e!==q&&(e={type:"interval-period",period:"second",precision:null,secondary:null}),f=e)));f!==q?b=c={type:"interval-qualifier",start:c,end:f}:(v=b,b=q)}else v=b,b=q;else v=b,b=q;else v=b,b=q;else v=b,b=q;b===q&&(b=v,f=J(),f!==q?(c=N(),c!==q?(c=ia(),c!==q?(c=N(),c!==q?(c=K(),c!==q?(e=N(),e!==q?(e=ka(),e!==q?b=f={type:"interval-period",period:f.value,precision:c,secondary:null}:(v=b,b=q)):(v=
b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q),b===q&&(b=v,f=J(),f!==q&&(f=Jb(f)),b=f,b===q&&(b=v,f=za(),f!==q?(c=N(),c!==q?(c=ia(),c!==q?(c=N(),c!==q?(c=I(),c!==q?(e=N(),e!==q?(e=oa(),e!==q?(f=N(),f!==q?(f=K(),f!==q?(e=N(),e!==q?(e=ka(),e!==q?b=f=Kb(c,f):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q),b===q&&(b=v,f=za(),f!==q?(c=N(),c!==q?(c=ia(),c!==q?(c=N(),c!==q?(c=K(),c!==q?(e=N(),e!==q?(e=ka(),e!==q?b=f={type:"interval-period",
period:"second",precision:c,secondary:null}:(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q)):(v=b,b=q),b===q&&(b=v,f=za(),f!==q&&(f={type:"interval-period",period:"second",precision:null,secondary:null}),b=f)))));return b}function J(){var a;a=v;a=ya();a!==q&&(a={type:"string",value:"day"});a===q&&(a=v,a=Ba(),a!==q&&(a={type:"string",value:"hour"}),a===q&&(a=v,a=Ka(),a!==q&&(a={type:"string",value:"minute"}),a===q&&(a=v,a=wa(),a!==q&&(a={type:"string",value:"month"}),a===q&&(a=v,a=
pa(),a!==q&&(a={type:"string",value:"year"})))));return a}function K(){var a;a=W();a!==q&&(a=parseFloat(a));return a}function I(){var a;a=W();a!==q&&(a=parseFloat(a));return a}function M(){var a;a=O();a===q&&(a=F());return a}function O(){var b,c,f;b=v;39===a.charCodeAt(v)?(c=Lb,v++):(c=q,0===L&&h(Mb));c===q&&(a.substr(v,2)===Nb?(c=Nb,v+=2):(c=q,0===L&&h(Jd)));if(c!==q){c=[];f=v;a.substr(v,2)===gb?(f=gb,v+=2):(f=q,0===L&&h(Ob));f!==q&&(f="'");f===q&&(Pb.test(a.charAt(v))?(f=a.charAt(v),v++):(f=q,0===
L&&h(Qb)));for(;f!==q;)c.push(f),f=v,a.substr(v,2)===gb?(f=gb,v+=2):(f=q,0===L&&h(Ob)),f!==q&&(f="'"),f===q&&(Pb.test(a.charAt(v))?(f=a.charAt(v),v++):(f=q,0===L&&h(Qb)));c!==q?(39===a.charCodeAt(v)?(f=Lb,v++):(f=q,0===L&&h(Mb)),f!==q?b=c={type:"string",value:c.join("")}:(v=b,b=q)):(v=b,b=q)}else v=b,b=q;return b}function Q(){var a,b,c;a=v;b=ua();b!==q?(b=N(),b!==q?(b=f(),b!==q?(c=N(),c!==q?(c=sa(),c!==q?(c=N(),c!==q?(c=f(),c!==q?a=b={type:"when_clause",operand:b,value:c}:(v=a,a=q)):(v=a,a=q)):(v=
a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q);return a}function P(){var a,b,c;a=v;b=ua();b!==q?(b=N(),b!==q?(b=f(),b!==q?(c=N(),c!==q?(c=sa(),c!==q?(c=N(),c!==q?(c=f(),c!==q?a=b={type:"when_clause",operand:b,value:c}:(v=a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q)):(v=a,a=q);return a}function S(){var b,c;b=v;var e,d;c=v;a.substr(v,4).toLowerCase()===Kd?(e=a.substr(v,4),v+=4):(e=q,0===L&&h(Ld));e!==q?(e=v,L++,d=B(),L--,d===q?e=void 0:(v=e,e=q),e!==q?c="ELSE":(v=c,c=q)):(v=c,c=
q);c!==q?(c=N(),c!==q?(c=f(),c!==q?b={type:"else_clause",value:c}:(v=b,b=q)):(v=b,b=q)):(v=b,b=q);return b}function U(){var b,c,f;b=W();b===q&&(b=v,45===a.charCodeAt(v)?(c=la,v++):(c=q,0===L&&h(ab)),c===q&&(43===a.charCodeAt(v)?(c=mb,v++):(c=q,0===L&&h(nb))),c!==q?(f=W(),f!==q?b=c=c[0]+f:(v=b,b=q)):(v=b,b=q));return b}function T(){var b,c;b=v;46===a.charCodeAt(v)?(c=Md,v++):(c=q,0===L&&h(Nd));c!==q?(c=W(),c===q&&(c=null),c!==q?b="."+(null!=c?c:""):(v=b,b=q)):(v=b,b=q);return b}function R(){var b,
c,f;c=b=v;Od.test(a.charAt(v))?(f=a.charAt(v),v++):(f=q,0===L&&h(Pd));f!==q?(Qd.test(a.charAt(v))?(f=a.charAt(v),v++):(f=q,0===L&&h(Rd)),f===q&&(f=null),f!==q?c="e"+(null===f?"":f):(v=c,c=q)):(v=c,c=q);c!==q?(f=W(),f!==q?b=c+f:(v=b,b=q)):(v=b,b=q);return b}function W(){var a,b;a=[];b=X();if(b!==q)for(;b!==q;)a.push(b),b=X();else a=q;a!==q&&(a=a.join(""));return a}function X(){var b;Sd.test(a.charAt(v))?(b=a.charAt(v),v++):(b=q,0===L&&h(Td));return b}function Z(){var b,c,f;b=v;a.substr(v,2).toLowerCase()===
Ud?(c=a.substr(v,2),v+=2):(c=q,0===L&&h(Vd));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="IN":(v=b,b=q)):(v=b,b=q);return b}function ba(){var b,c,f;b=v;a.substr(v,2).toLowerCase()===Wd?(c=a.substr(v,2),v+=2):(c=q,0===L&&h(Xd));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="IS":(v=b,b=q)):(v=b,b=q);return b}function fa(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===Yd?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(Zd));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="LIKE":
(v=b,b=q)):(v=b,b=q);return b}function V(){var b,c,f;b=v;a.substr(v,3).toLowerCase()===$d?(c=a.substr(v,3),v+=3):(c=q,0===L&&h(ae));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="NOT":(v=b,b=q)):(v=b,b=q);return b}function ea(){var b,c,f;b=v;a.substr(v,3).toLowerCase()===be?(c=a.substr(v,3),v+=3):(c=q,0===L&&h(ce));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="AND":(v=b,b=q)):(v=b,b=q);return b}function ca(){var b,c,f;b=v;a.substr(v,2).toLowerCase()===de?(c=a.substr(v,2),
v+=2):(c=q,0===L&&h(ee));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="OR":(v=b,b=q)):(v=b,b=q);return b}function da(){var b,c,f;b=v;a.substr(v,7).toLowerCase()===fe?(c=a.substr(v,7),v+=7):(c=q,0===L&&h(ge));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="BETWEEN":(v=b,b=q)):(v=b,b=q);return b}function qa(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===he?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(ie));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="FROM":(v=b,b=q)):(v=
b,b=q);return b}function ta(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===je?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(ke));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="TRIM":(v=b,b=q)):(v=b,b=q);return b}function ra(){var b,c,f;b=v;a.substr(v,8).toLowerCase()===le?(c=a.substr(v,8),v+=8):(c=q,0===L&&h(me));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="INTERVAL":(v=b,b=q)):(v=b,b=q);return b}function pa(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===ne?(c=a.substr(v,4),v+=4):(c=
q,0===L&&h(oe));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="YEAR":(v=b,b=q)):(v=b,b=q);return b}function wa(){var b,c,f;b=v;a.substr(v,5).toLowerCase()===pe?(c=a.substr(v,5),v+=5):(c=q,0===L&&h(qe));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="MONTH":(v=b,b=q)):(v=b,b=q);return b}function ya(){var b,c,f;b=v;a.substr(v,3).toLowerCase()===re?(c=a.substr(v,3),v+=3):(c=q,0===L&&h(se));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="DAY":(v=b,b=q)):(v=b,b=q);return b}
function Ba(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===te?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(ue));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="HOUR":(v=b,b=q)):(v=b,b=q);return b}function Ka(){var b,c,f;b=v;a.substr(v,6).toLowerCase()===ve?(c=a.substr(v,6),v+=6):(c=q,0===L&&h(we));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="MINUTE":(v=b,b=q)):(v=b,b=q);return b}function za(){var b,c,f;b=v;a.substr(v,6).toLowerCase()===xe?(c=a.substr(v,6),v+=6):(c=q,0===L&&h(ye));
c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="SECOND":(v=b,b=q)):(v=b,b=q);return b}function La(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===ze?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(Ae));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="CASE":(v=b,b=q)):(v=b,b=q);return b}function Pa(){var b,c,f;b=v;a.substr(v,3).toLowerCase()===Be?(c=a.substr(v,3),v+=3):(c=q,0===L&&h(Ce));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="END":(v=b,b=q)):(v=b,b=q);return b}function ua(){var b,
c,f;b=v;a.substr(v,4).toLowerCase()===De?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(Ee));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="WHEN":(v=b,b=q)):(v=b,b=q);return b}function sa(){var b,c,f;b=v;a.substr(v,4).toLowerCase()===Fe?(c=a.substr(v,4),v+=4):(c=q,0===L&&h(Ge));c!==q?(c=v,L++,f=B(),L--,f===q?c=void 0:(v=c,c=q),c!==q?b="THEN":(v=b,b=q)):(v=b,b=q);return b}function oa(){var b;44===a.charCodeAt(v)?(b=He,v++):(b=q,0===L&&h(Ie));return b}function ia(){var b;40===a.charCodeAt(v)?(b=Je,
v++):(b=q,0===L&&h(Ke));return b}function ka(){var b;41===a.charCodeAt(v)?(b=Le,v++):(b=q,0===L&&h(Me));return b}function N(){var a,b;a=[];for(b=Ia();b!==q;)a.push(b),b=Ia();return a}function Ia(){var b;Ne.test(a.charAt(v))?(b=a.charAt(v),v++):(b=q,0===L&&h(Oe));return b}function Ca(a,b,c,f){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==f&&(a.escape=f);return a}function Ua(a,b){for(var c=0;c<b.length;c++)a=Ca(b[c][1],a,b[c][3]);return a}l=void 0!==l?l:{};var q={},ib={start:m},Ma=m,jb=
"!",kb=g("!",!1),Va="\x3d",wb=g("\x3d",!1),lb="\x3e\x3d",Sb=g("\x3e\x3d",!1),Rb="\x3e",Qa=g("\x3e",!1),Ra="\x3c\x3d",Tb=g("\x3c\x3d",!1),xb="\x3c\x3e",$a=g("\x3c\x3e",!1),Ub="\x3c",yb=g("\x3c",!1),Sa="!\x3d",Ja=g("!\x3d",!1),mb="+",nb=g("+",!1),la="-",ab=g("-",!1),zb="*",Vb=g("*",!1),Wb="/",Xb=g("/",!1),td=/^[A-Za-z_\x80-\uFFFF]/,ud=k([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),vd=/^[A-Za-z0-9_]/,wd=k([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),xd=/^[A-Za-z0-9_.\x80-\uFFFF]/,yd=k([["A","Z"],
["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),zd="@",Ad=g("@",!1),Jb=function(a){return{type:"interval-period",period:a.value,precision:null,secondary:null}},Kb=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},Lb="'",Mb=g("'",!1),Nb="N'",Jd=g("N'",!1),gb="''",Ob=g("''",!1),Pb=/^[^']/,Qb=k(["'"],!0,!1),Md=".",Nd=g(".",!1),Sd=/^[0-9]/,Td=k([["0","9"]],!1,!1),Od=/^[eE]/,Pd=k(["e","E"],!1,!1),Qd=/^[+\-]/,Rd=k(["+","-"],!1,!1),fd="null",gd=g("NULL",!0),bd=
"true",cd=g("TRUE",!0),dd="false",ed=g("FALSE",!0),Ud="in",Vd=g("IN",!0),Wd="is",Xd=g("IS",!0),Yd="like",Zd=g("LIKE",!0),$c="escape",ad=g("ESCAPE",!0),$d="not",ae=g("NOT",!0),be="and",ce=g("AND",!0),de="or",ee=g("OR",!0),fe="between",ge=g("BETWEEN",!0),he="from",ie=g("FROM",!0),pd="for",qd=g("FOR",!0),nd="substring",od=g("SUBSTRING",!0),ld="extract",md=g("EXTRACT",!0),je="trim",ke=g("TRIM",!0),rd="position",sd=g("POSITION",!0),jd="timestamp",kd=g("TIMESTAMP",!0),hd="date",id=g("DATE",!0),Bd="leading",
Cd=g("LEADING",!0),Dd="trailing",Ed=g("TRAILING",!0),Fd="both",Gd=g("BOTH",!0),Hd="to",Id=g("TO",!0),le="interval",me=g("INTERVAL",!0),ne="year",oe=g("YEAR",!0),pe="month",qe=g("MONTH",!0),re="day",se=g("DAY",!0),te="hour",ue=g("HOUR",!0),ve="minute",we=g("MINUTE",!0),xe="second",ye=g("SECOND",!0),ze="case",Ae=g("CASE",!0),Be="end",Ce=g("END",!0),De="when",Ee=g("WHEN",!0),Fe="then",Ge=g("THEN",!0),Kd="else",Ld=g("ELSE",!0),He=",",Ie=g(",",!1),Je="(",Ke=g("(",!1),Le=")",Me=g(")",!1),Ne=/^[ \t\n\r]/,
Oe=k([" ","\t","\n","\r"],!1,!1),Sc="`",Tc=g("`",!1),Uc=/^[^`]/,Vc=k(["`"],!0,!1),v=0,Wa=[{line:1,column:1}],Aa=0,Za=[],L=0,hb;if("startRule"in l){if(!(l.startRule in ib))throw Error("Can't start parsing from rule \""+l.startRule+'".');Ma=ib[l.startRule]}hb=Ma();if(hb!==q&&v===a.length)return hb;hb!==q&&v<a.length&&h({type:"end"});throw function(a,b,c){return new d(d.buildMessage(a,b),a,b,c)}(Za,Aa<a.length?a.charAt(Aa):null,Aa<a.length?c(Aa,Aa+1):c(Aa,Aa));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){function b(a,b){var c;if(!b)return null;if("x"in b){var e={x:0,y:0};a=a(b.x,b.y,n);e.x=a[0];e.y=a[1];null!=b.z&&(e.z=b.z);null!=b.m&&(e.m=b.m);return e}if("xmin"in b)return e={xmin:0,ymin:0,xmax:0,ymax:0},c=a(b.xmin,b.ymin,n),e.xmin=c[0],e.ymin=c[1],a=a(b.xmax,b.ymax,n),e.xmax=a[0],e.ymax=a[1],b.hasZ&&(e.zmin=b.zmin,e.zmax=b.zmax,e.hasZ=!0),b.hasM&&(e.mmin=b.mmin,e.mmax=b.mmax,e.hasM=!0),e;if("rings"in b)return{rings:f(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:f(b.paths,
a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:p(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function f(a,b){for(var c=[],f=0;f<a.length;f++)c.push(p(a[f],b));return c}function p(a,b){for(var c=[],f=0;f<a.length;f++){var e=a[f],d=b(e[0],e[1],[0,0]);c.push(d);2<e.length&&d.push(e[2]);3<e.length&&d.push(e[3])}return c}function u(a,b){return!h.isValid(a)||!h.isValid(b)||h.equals(a,b)||m.canProject(a,b)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var n=[0,0];a.checkProjectionSupport=function(a,
b){return g(this,void 0,void 0,function(){var f,e,d;return l(this,function(h){if(!b)return[2];if(Array.isArray(a)){f=0;for(e=a;f<e.length;f++)if(d=e[f],u(d.geometry&&d.geometry.spatialReference,b)){if(c.isSupported())return[2,c.load()];throw new k("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b});}return[2]}if(!u(a,b))return[2];if(c.isSupported())return[2,c.load()];throw new k("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,
outSpatialReference:b});})})};var r=b.bind(null,m.lngLatToXY),w=b.bind(null,m.xyToLngLat);a.project=function(a,b,f){f||(f=b,b=a.spatialReference);return h.isValid(b)&&h.isValid(f)&&!h.equals(b,f)?m.canProject(b,f)?h.isWebMercator(f)?r(a):w(a):c.projectMany([a],b,f,null,!0)[0]:a};var t=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,b,c){return g(this,void 0,void 0,function(){var f,d=this;return l(this,function(g){a&&a.length&&
b&&c&&!h.equals(b,c)||e.resolve(a);f={geometries:a,inSpatialReference:b,outSpatialReference:c,resolve:null};this._jobs.push(f);return[2,e.create(function(a){f.resolve=a;null===d._timer&&(d._timer=setTimeout(d._process,10))},function(){var a=d._jobs.indexOf(f);-1<a&&d._jobs.splice(a,1)})]})})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,f=a.inSpatialReference,e=a.outSpatialReference,a=a.resolve;m.canProject(f,e)?h.isWebMercator(e)?a(b.map(r)):
a(b.map(w)):a(c.projectMany(b,f,e,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,b,c){return g(this,void 0,void 0,function(){return l(this,function(f){return[2,t.push(a,b,c)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(d,a,l,g,k,e){function c(a,b,c,d,g){void 0===d&&(d=null);void 0===g&&(g=!1);if(null===d){var p=
e.cacheKey(b,c);void 0!==f[p]?d=f[p]:(d=h(b,c,null),null===d&&(d=new e),f[p]=d)}return m._project(a,b,c instanceof k||!1===g?c:new k(c),d,g)}function h(a,b,c){void 0===c&&(c=null);a=m._getTransformation(a,b,c);return null!==a?e.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var m=null;a.isLoaded=function(){return!!m&&g.isLoaded()};a.isSupported=function(){return g.isSupported()};var b=null;a.load=function(){return b?b:b=l.create(function(a,b){var c=g.load();d(["./geometryEngine"],
function(f){m=f;c.then(function(){m._enableProjection(g);a()},function(a){b(a)})})})};a.project=function(a,b,f){void 0===f&&(f=null);return a instanceof Array?0===a.length?[]:c(a,a[0].spatialReference,b,f):c([a],a.spatialReference,b,f)[0]};var f={};a.projectMany=c;a.getTransformation=h;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=m._getTransformationBySuitability(a,b,c);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(e.fromGE(a[c]));return b}return[]}})},"esri/geometry/pe":function(){define(["require",
"exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(d,a,l,g,k){function e(c){function f(a,b,c){a[b]=c(a[b])}a._pe=c;p.init();u.init();n.init();r.init();w.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}l(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var e=0,d=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,
a._pe.PeUnit];e<d.length;e++)c=d[e],f(c.prototype,"getName",function(a){return function(){return a.call(this,Array(p.PE_NAME_MAX))}});e=0;for(d=[a._pe.PeGeogtran,a._pe.PeProjcs];e<d.length;e++)c=d[e],f(c.prototype,"getParameters",function(b){return function(){for(var c=Array(p.PE_PARM_MAX),f=b.call(this),e=0;e<c.length;e++){var d=a._pe.getValue(f,"*");c[e]=d?a._pe.wrapPointer(d,a._pe.PeParameter):null;f+=Int32Array.BYTES_PER_ELEMENT}return c}});f(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var c=
this.getSize();if(!c)return null;var f=[],e=a.call(this);b(f,c,e);return f}});f(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var f=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var f=[e],d=this.getSteps();if(1<d)for(var e=a._pe.getPointer(e),h=1;h<d;h++)f.push(a._pe.wrapPointer(e+c*h,a._pe.PeGTlistExtendedGTs))}return f}});var h=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=this._cache;c||
(this._cache=c=new Map);if(c.has(b))return c.get(b);var f=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var f=[e],d=e.getNump();if(1<d)for(var e=a._pe.getPointer(e),g=1;g<d;g++)f.push(a._pe.wrapPointer(e+h*g,a._pe.PeHorizon))}c.set(b,f);return f}};f(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);f(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=p.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),f=a._pe.ensureInt8(Array(p.PE_BUFFER_MAX));
return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,f))}}function c(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function h(b,c){var f=[];c=Array(c);for(var e=0;e<b;e++)f.push(a._pe.ensureInt8(c));return f}function m(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function b(b,c,f,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*c;e++)b[e]=a._pe.getValue(f+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var d=
0===b.length;for(e=0;e<c;e++)d&&(b[e]=Array(2)),b[e][0]=a._pe.getValue(f,"double"),b[e][1]=a._pe.getValue(f+Float64Array.BYTES_PER_ELEMENT,"double"),f+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var f;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!g("esri-wasm")};a.load=function(){return f?f:f=k.create(function(a,b){d(["./support/pe-wasm"],function(c){c({locateFile:function(a){return d.toUrl("./support/"+a)},onAbort:function(a){b(Error(a))}}).then(function(b){e(b);
a()})})})};(function(c){function f(c,f,e){a._pe.ensureCache.prepare();var d=m(e),h=e===d,d=a._pe.ensureFloat64(d);(c=a._pe._pe_geog_to_proj(a._pe.getPointer(c),f,d))&&b(e,f,d,h);return c}function e(a,b,c){return d(a,b,c,0)}function d(c,f,e,d){a._pe.ensureCache.prepare();var h=m(e),g=e===h,h=a._pe.ensureFloat64(h);(c=a._pe._pe_proj_to_geog_center(a._pe.getPointer(c),f,h,d))&&b(e,f,h,g);return c}c.geogToProj=f;c.projGeog=function(a,b,c,d){switch(d){case p.PE_TRANSFORM_P_TO_G:return e(a,b,c);case p.PE_TRANSFORM_G_TO_P:return f(a,
b,c)}return 0};c.projToGeog=e;c.projToGeogCenter=d})(a.PeCSTransformations||(a.PeCSTransformations={}));var p;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;
b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=
a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;
b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(p=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var d=null,h=e[b];h||(h={},e[b]=h);h.hasOwnProperty(String(c))?d=h[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,h[c]=d));return d=f(d)}function f(b){if(b){var c=b.getType();switch(c){case p.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);
break;case p.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case p.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&p.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var e={},d={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return c(p.PE_TYPE_COORDSYS,a)};b.factoryByType=c;b.fromString=function(b,c){var e=null,h=d[b];h||(h={},d[b]=h);h.hasOwnProperty(c)?e=h[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),
a._pe.compare(b,a._pe.NULL)||(e=b,h[c]=e));return e=f(e)};b.geogcs=function(a){return c(p.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return c(p.PE_TYPE_GEOGTRAN,a)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return c(p.PE_TYPE_PROJCS,a)};b.unit=function(a){return c(p.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var u;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,f,e,d,h,g){var m=null,k=new a._pe.PeInteger(g);try{var p=a._pe.PeGTlistExtended.prototype.getGTlist(b,f,e,d,h,k);if(g=k.val)if(m=[p],1<g){var n=a._pe.getPointer(p);for(b=1;b<g;b++)m.push(a._pe.wrapPointer(n+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(k)}return m}})(u=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var f=0;f<b.length;f++){var e=b[f];c(e);e.getEntries().forEach(function(a){c(a);
a=a.getGeogtran();c(a);a.getParameters().forEach(c);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){c(a);var b=a.getDatum();c(b);c(b.getSpheroid());c(a.getPrimem());c(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(c,f,e,d,h){a._pe.ensureCache.prepare();var g=m(e),k=e===g,g=a._pe.ensureFloat64(g),p=0;d&&(p=a._pe.ensureFloat64(d));(c=a._pe._pe_geog_to_geog(a._pe.getPointer(c),f,g,p,
h))&&b(e,f,g,k);return c}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(c){function f(b,c,f,e,d,g){a._pe.ensureCache.prepare();var k,n;switch(b){case "dd":k=a._pe._pe_geog_to_dd;n=p.PE_DD_MAX;break;case "ddm":k=a._pe._pe_geog_to_ddm;n=p.PE_DDM_MAX;break;case "dms":k=a._pe._pe_geog_to_dms,n=p.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=m(e);c=a._pe.ensureFloat64(c);n=h(f,n);e=a._pe.ensureInt32(n);if(d=k(b,f,c,d,e))for(k=0;k<f;k++)g[k]=a._pe.UTF8ToString(n[k]);return d}function e(c,
f,e,d,h){a._pe.ensureCache.prepare();var g;switch(c){case "dd":g=a._pe._pe_dd_to_geog;break;case "ddm":g=a._pe._pe_ddm_to_geog;break;case "dms":g=a._pe._pe_dms_to_geog}c=0;f&&(c=a._pe.getPointer(f));f=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(f);f=a._pe.ensureFloat64(Array(2*e));(g=g(c,e,d,f))&&b(h,e,f);return g}c.geog_to_dms=function(a,b,c,e,d){return f("dms",a,b,c,e,d)};c.dms_to_geog=function(a,b,c,f){return e("dms",a,b,c,f)};c.geog_to_ddm=function(a,b,c,e,d){return f("ddm",
a,b,c,e,d)};c.ddm_to_geog=function(a,b,c,f){return e("ddm",a,b,c,f)};c.geog_to_dd=function(a,b,c,e,d){return f("dd",a,b,c,e,d)};c.dd_to_geog=function(a,b,c,f){return e("dd",a,b,c,f)}})(a.PeNotationDms||(a.PeNotationDms={}));var n;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
c.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(b,c,f,e,d,g,k){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=m(f);f=a._pe.ensureFloat64(b);b=h(c,p.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_mgrs_extended(n,c,f,e,d,g,l))for(d=0;d<c;d++)k[d]=a._pe.UTF8ToString(b[d]);return e};c.mgrs_to_geog_extended=function(c,f,e,d,h){a._pe.ensureCache.prepare();var g=0;c&&(g=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});
e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*f));(d=a._pe._pe_mgrs_to_geog_extended(g,f,e,d,c))&&b(h,f,c);return d}})(n=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(c){c.geog_to_usng=function(b,c,f,e,d,g,k){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=m(f);f=a._pe.ensureFloat64(b);b=h(c,p.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_usng(n,c,f,e,d,g,l))for(d=0;d<c;d++)k[d]=a._pe.UTF8ToString(b[d]);return e};c.usng_to_geog=function(c,f,e,d){a._pe.ensureCache.prepare();
var h=0;c&&(h=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*f));(h=a._pe._pe_usng_to_geog(h,f,e,c))&&b(d,f,c);return h}})(a.PeNotationUsng||(a.PeNotationUsng={}));var r;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(b,
c,f,e,d){a._pe.ensureCache.prepare();var g=0;b&&(g=a._pe.getPointer(b));b=m(f);f=a._pe.ensureFloat64(b);b=h(c,p.PE_UTM_MAX);var k=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_utm(g,c,f,e,k))for(g=0;g<c;g++)d[g]=a._pe.UTF8ToString(b[g]);return e};c.utm_to_geog=function(c,f,e,d,h){a._pe.ensureCache.prepare();var g=0;c&&(g=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*f));(d=a._pe._pe_utm_to_geog(g,f,e,d,c))&&b(h,f,c);return d}})(r=
a.PeNotationUtm||(a.PeNotationUtm={}));var w;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(f,e){void 0===e&&(e=b.PE_PCSINFO_OPTION_DOMAIN);var d,h;c.has(f)&&(h=c.get(f),h[e]&&(d=h[e]));d||(d=a._pe.PePCSInfo.prototype.generate(f,
e),h||(h=[],c.set(f,h)),h[e]=d);return d}})(w=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=e})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(d,a,l){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var e=0;for(a=a.steps;e<
a.length;e++){var c=a[e];c instanceof l?this.steps.push(c):this.steps.push(new l({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse}))}}}a.cacheKey=function(a,e){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():""].join()};a.fromGE=function(d){var e=new a,c="",h=0;for(d=d.steps;h<d.length;h++){var g=l.fromGE(d[h]);e.steps.push(g);c+=g.uid.toString()+
","}e._cached_projection={};e._gtlistentry=null;e._chain=c;return e};a.prototype.getInverse=function(){var d=new a;d.steps=[];for(var e=this.steps.length-1;0<=e;e--)d.steps.push(this.steps[e].getInverse());return d};a.prototype.getGTListEntry=function(){for(var a="",e=0,c=this.steps;e<c.length;e++)a+=c[e].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(d,e,c){this._cached_projection[a.cacheKey(d,
e)]=c};a.prototype.getCachedGeTransformation=function(d,e){for(var c="",h=0,g=this.steps;h<g.length;h++)c+=g[h].uid.toString()+",";c!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=c);d=this._cached_projection[a.cacheKey(d,e)];return void 0===d?null:d};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(d,a){var l=0;return function(){function a(a){void 0===a&&(a=null);this.uid=l++;a?(this._wkt=void 0!==
a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(d){var e=new a;e._wkt=d.wkt;e._wkid=d.wkid;e._isInverse=d.isInverse;return e};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=l++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=
a;this.uid=l++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=l++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var d=new a;d._wkt=this.wkt;d._wkid=this._wkid;d._isInverse=!this.isInverse;return d};return a}()})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});
a.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,
supportsDisjointSpatialRelationship:!0}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,b,c){this.items=a;this.queryGeometry=b;this.definitionExpression=c.definitionExpression;this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.fieldsIndex=c.fieldsIndex;this.timeInfo=c.timeInfo;this.featureAdapter=c.featureAdapter}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},
enumerable:!0,configurable:!0});a.prototype.createQueryResponse=function(a){var c;c=a.outStatistics?a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a);a.returnQueryGeometry&&(b.isValid(a.outSR)&&!b.equals(this.queryGeometry.spatialReference,a.outSR)?c.queryGeometry=w.cleanFromGeometryEngine(l({spatialReference:a.outSR},n.project(this.queryGeometry,this.queryGeometry.spatialReference,
a.outSR))):c.queryGeometry=w.cleanFromGeometryEngine(l({spatialReference:a.outSR},this.queryGeometry)));return c};a.prototype.executeAttributesQuery=function(b){var c=u.getWhereClause(b.where,this.fieldsIndex);if(!c)return h.resolve(this);if(c.isStandardized){for(var f=0,e=[],d=0,g=this.items;d<g.length;d++){var m=g[d];c.testFeature(m,this.featureAdapter)&&(e[f++]=m)}c=new a(e,this.queryGeometry,this);c.definitionExpression=b.where;return h.resolve(c)}return h.reject(new TypeError("Where clause is not standardized"))};
a.prototype.executeObjectIdsQuery=function(b){if(!b.objectIds||!b.objectIds.length)return h.resolve(this);var c=new e.default(b.objectIds),f=this.featureAdapter.getObjectId;return h.resolve(new a(this.items.filter(function(a){return c.has(f(a))}),this.queryGeometry,this))};a.prototype.executeTimeQuery=function(b){b=r.getTimeOperator(this.timeInfo,b.timeExtent,this.featureAdapter);if(!c.isSome(b))return h.resolve(this);b=this.items.filter(b);return h.resolve(new a(b,this.queryGeometry,this))};a.prototype.project=
function(c){return k(this,void 0,void 0,function(){var e,d,h,m=this;return g(this,function(g){switch(g.label){case 0:if(!c||b.equals(this.spatialReference,c))return[2,this];e=this.featureAdapter;return[4,n.projectMany(this.items.map(function(a){return w.getGeometry(m,e.getGeometry(a))}),this.spatialReference,c)];case 1:return d=g.sent(),h=d.map(function(a,b){return e.cloneWithGeometry(m.items[b],f.convertFromGeometry(a,m.hasZ,m.hasM))}),[2,new a(h,this.queryGeometry,{definitionExpression:this.definitionExpression,
geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:c,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}})})};a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,f=this.geometryType,e=this.hasM,d=this.hasZ,h=this.objectIdField,g=this.spatialReference,k=a.outFields,p=a.outSR,n=a.quantizationParameters,l=a.resultRecordCount,r=a.resultOffset,u=!1;null!=l&&null!=r&&(l=r+l,u=c.length>
l,c=c.slice(r,Math.min(c.length,l)));return{exceededTransferLimit:u,features:this._createFeatures(a,c),fields:k&&k.map(function(a){return b.fieldsIndex.get(a)}),geometryType:f,hasM:e,hasZ:d,objectIdFieldName:h,spatialReference:w.cleanFromGeometryEngine(p?p:g),transform:n&&m.toQuantizationTransform(n)||null}};a.prototype._createFeatures=function(a,b){var c=new p.default(a,this.featureAdapter,this.fieldsIndex),f=a.quantizationParameters,e=a.returnGeometry,d=a.returnCentroid,h=a.maxAllowableOffset,g=
a.orderByFields;a=[];var k=0;if(b.length&&g&&g.length){var g=g[0].split(" "),n=g[0],l=this.fieldsIndex.get(n),r="DESC"===g[1];b.sort(function(a,b){a=c.getFieldValue(a,n,l);b=c.getFieldValue(b,n,l);if("number"===typeof a&&"number"===typeof b)return r?b-a:a-b;if("string"===typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(r?a>b:a<b)?-1:(r?a<b:a>b)?1:0})}if(e||d)if(f=m.toQuantizationTransform(f),e&&!d)for(d=0;d<b.length;d++)e=b[d],a[k++]={attributes:c.getAttributes(e),geometry:w.getGeometry(this,
this.featureAdapter.getGeometry(e),h,f)};else if(!e&&d)for(h=0;h<b.length;h++)e=b[h],a[k++]={attributes:c.getAttributes(e),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(e,this),f)};else for(d=0;d<b.length;d++)e=b[d],a[k++]={attributes:c.getAttributes(e),centroid:w.transformCentroid(this,this.featureAdapter.getCentroid(e,this),f),geometry:w.getGeometry(this,this.featureAdapter.getGeometry(e),h,f)};else for(h=0;h<b.length;h++)e=b[h],(e=c.getAttributes(e))&&(a[k++]={attributes:e});
return a};a.prototype._createExceedsLimitQueryResponse=function(a){var b=!1,c=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=0;for(a=a.outStatistics;e<a.length;e++){var d=a[e];if("exceedslimit"===d.statisticType){c=null!=d.maxPointCount?d.maxPointCount:Number.POSITIVE_INFINITY;f=null!=d.maxRecordCount?d.maxRecordCount:Number.POSITIVE_INFINITY;b=null!=d.maxVertexCount?d.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)b=this.items.length>
c;else if(this.items.length>f)b=!0;else var c=this.hasZ?this.hasM?4:3:this.hasM?3:2,h=this.featureAdapter,b=this.items.reduce(function(a,b){b=h.getGeometry(b);return a+(b&&b.coords.length||0)},0)/c>b;return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(b)}}]}};a.prototype._createStatisticsQueryResponse=function(a){var b=new p.default(a,this.featureAdapter,this.fieldsIndex),
c=a.outStatistics,f=[],e=[],d=a.groupByFieldsForStatistics;a=a.having;for(var h=d&&d.length,d=h&&d[0],g=this.fieldsIndex.get(d),m=!g,k={},n={},l={},r={attributes:{}},u=0;u<c.length;u++){var t=c[u],y=t.outStatisticFieldName,w=t.statisticType,t="exceedslimit"!==w?t.onStatisticField:void 0,P=this.fieldsIndex.get(t),S=h&&(t===d||m)&&"count"===w;if(h){k[t]||(k[t]=this._calculateUniqueValues(b,d,g));var U=k[t],T;for(T in U){var R=U[T],W=R.count,X=R.data,Z=R.items;if(!a||b.validateItems(Z,a)){var R=n[X]||
{attributes:{}},ba=null;S?ba=W:(W=this._calculateStatistics(Z,b,t,P),Z="var"===w?"variance":w,ba=W[Z]);R.attributes[y]=ba;R.attributes[m?"EXPR_1":d]=X;n[X]=R}}}else l[t]||(l[t]=this._calculateStatistics(this.items,b,t,P)),W=l[t],Z="var"===w?"variance":w,r.attributes[y]=W[Z];e.push({name:y,alias:y,type:"esriFieldTypeDouble"})}if(h)for(var fa in n)f.push(n[fa]);else f.push(r);return{fields:e,features:f}};a.prototype._calculateStatistics=function(a,b,c,f){for(var e=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,
h=null,g=null,m=null,k=null,p=[],n=0,l=0;l<a.length;l++){var r=b.getFieldValue(a[l],c,f);"string"===typeof r?n++:null==r||isNaN(r)||(h+=r,e=Math.min(e,r),d=Math.max(d,r),p.push(r),n++)}if(n){g=h/n;for(b=a=0;b<p.length;b++)r=p[b],a+=Math.pow(r-g,2);k=1<n?a/(n-1):0;m=Math.sqrt(k)}else d=e=null;return{avg:g,count:n,max:d,min:e,stddev:m,sum:h,variance:k}};a.prototype._calculateUniqueValues=function(a,b,c){for(var f={},e=0,d=this.items;e<d.length;e++){var h=d[e],g=a.getFieldValue(h,b,c);if(null==g||"string"===
typeof g&&""===g.trim())g=null;null==f[g]?f[g]={count:1,data:g,items:[h]}:(f[g].count++,f[g].items.push(h))}return f};return a}();a.default=d})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports","./jsonUtils"],function(d,a,l){function g(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function k(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function e(a,b,c){for(var f=[],e,d,h,m,p=0;p<c.length;p++){var n=c[p];if(0<p){if(h=g(a,n[0]),m=k(a,n[1]),h!==e||m!==
d)f.push(b(n,h-e,m-d)),e=h,d=m}else e=g(a,n[0]),d=k(a,n[1]),f.push(b(n,e,d))}return 0<f.length?f:null}function c(a,b,c,f){return e(a,c?f?F:E:f?E:B,b)}function h(a,b,c,f){var d=[];c=c?f?F:E:f?E:B;for(f=0;f<b.length;f++){var h=e(a,c,b[f]);h&&3<=h.length&&d.push(h)}return d.length?d:null}function m(a,b,c,f){var d=[];c=c?f?F:E:f?E:B;for(f=0;f<b.length;f++){var h=e(a,c,b[f]);h&&2<=h.length&&d.push(h)}return d.length?d:null}function b(a,b){return b*a.scale[0]+a.translate[0]}function f(a,b){return a.translate[1]-
b*a.scale[1]}function p(a,c,e){var d=Array(e.length);if(!e.length)return d;var h=a.scale,g=h[0],h=h[1],m=b(a,e[0][0]);a=f(a,e[0][1]);d[0]=c(e[0],m,a);for(var k=1;k<e.length;k++){var p=e[k],m=m+p[0]*g;a-=p[1]*h;d[k]=c(p,m,a)}return d}function u(a,b,c){for(var f=Array(c.length),e=0;e<c.length;e++)f[e]=p(a,b,c[e]);return f}function n(a,b,c,f){return p(a,c?f?F:E:f?E:B,b)}function r(a,b,c,f){return u(a,c?f?F:E:f?E:B,b)}function w(a,b,c,f){return u(a,c?f?F:E:f?E:B,b)}function t(a,b,c){var f=c[0],e=f[0],
f=f[1],d=Math.min(e,b[0]),h=Math.min(f,b[1]),g=Math.max(e,b[2]);b=Math.max(f,b[3]);for(var m=1;m<c.length;m++){var k=c[m],p=k[0],k=k[1],e=e+p,f=f+k;0>p&&(d=Math.min(d,e));0<p&&(g=Math.max(g,e));0>k?h=Math.min(h,f):0<k&&(b=Math.max(b,f))}a[0]=d;a[1]=h;a[2]=g;a[3]=b;return a}function y(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)t(a,a,b[c]);return a}function x(a,b,c,f,e){b.xmin=g(a,c.xmin);b.ymin=k(a,c.ymin);b.xmax=g(a,
c.xmax);b.ymax=k(a,c.ymax);b!==c&&(f&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=c.mmin,b.mmax=c.mmax));return b}function A(a,b,f,e,d){b.points=c(a,f.points,e,d);return b}function z(a,b,c,f,e){b.x=g(a,c.x);b.y=k(a,c.y);b!==c&&(f&&(b.z=c.z),e&&(b.m=c.m));return b}function C(a,b,c,f,e){a=h(a,c.rings,f,e);if(!a)return null;b.rings=a;return b}function D(a,b,c,f,e){a=m(a,c.paths,f,e);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});var B=function(a,b,c){return[b,c]},
E=function(a,b,c){return[b,c,a[2]]},F=function(a,b,c){return[b,c,a[2],a[3]]};a.toQuantizationTransform=function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,f,e,d;a&&"upperLeft"===a.originPosition?(c=a.translate[0],f=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,f=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(e=b.translate[0],
d=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,d=b.extent.ymax,b=b.tolerance);return c===e&&f===d&&a===b};a.quantizeX=g;a.quantizeY=k;a.quantizeBounds=function(a,b,c){b[0]=g(a,c[0]);b[3]=k(a,c[1]);b[2]=g(a,c[2]);b[1]=k(a,c[3]);return b};a.quantizePoints=c;a.quantizeRings=h;a.quantizePaths=m;a.hydrateX=b;a.hydrateY=f;a.hydrateCoordsArray=p;a.hydrateCoordsArrayArray=u;a.hydrateBounds=function(a,c,e){return e?(c[0]=b(a,e[0]),c[1]=f(a,e[3]),c[2]=b(a,e[2]),c[3]=f(a,e[1]),c):[b(a,c[0]),f(a,c[3]),b(a,c[2]),
f(a,c[1])]};a.hydratePoints=n;a.hydratePaths=r;a.hydrateRings=w;a.getQuantizedBoundsCoordsArray=t;a.getQuantizedBoundsCoordsArrayArray=y;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return t(b,b,a)};a.getQuantizedBoundsPaths=function(a){return y([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return y([0,0,0,0],a)};a.quantizeExtent=x;a.quantizeMultipoint=A;a.quantizePoint=z;a.quantizePolygon=
C;a.quantizePolyline=D;a.quantizeGeometry=function(a,b){return a&&b?l.isPoint(b)?z(a,{},b,!1,!1):l.isPolyline(b)?D(a,{},b,!1,!1):l.isPolygon(b)?C(a,{},b,!1,!1):l.isMultipoint(b)?A(a,{},b,!1,!1):l.isExtent(b)?x(a,{},b,!1,!1):null:null};a.hydrateExtent=function(a,c,e,d,h){c.xmin=b(a,e.xmin);c.ymin=f(a,e.ymin);c.xmax=b(a,e.xmax);c.ymax=f(a,e.ymax);c!==e&&(d&&(c.zmin=e.zmin,c.zmax=e.zmax),h&&(c.mmin=e.mmin,c.mmax=e.mmax));return c};a.hydrateMultipoint=function(a,b,c,f,e){b.points=n(a,c.points,f,e);return b};
a.hydratePoint=function(a,c,e,d,h){c.x=b(a,e.x);c.y=f(a,e.y);c!==e&&(d&&(c.z=e.z),h&&(c.m=e.m));return c};a.hydratePolygon=function(a,b,c,f,e){b.rings=w(a,c.rings,f,e);return b};a.hydratePolyline=function(a,b,c,f,e){b.paths=r(a,c.paths,f,e);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","../../../core/maybe","./attributeSupport"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,
e,d){this._fieldDataCache=new l.default;this._returnDistinctMap=new l.default;this.returnDistinctValues=a.returnDistinctValues;this.fieldsIndex=d;this.featureAdapter=e;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var b=e=0;b<a.length;b++){var c=a[b],h=k.getExpressionFromFieldName(c),g=this.fieldsIndex.get(h),h=g?null:k.getWhereClause(h,d),g=g?g.name:k.getAliasFromFieldName(c)||"FIELD_EXP_"+e++;this._fieldDataCache.set(c,{alias:g,clause:h})}}}a.prototype.getAttributes=function(a){a=
this._processAttributesForOutFields(a);return this._processAttributesForDistinctValues(a)};a.prototype.getFieldValue=function(a,e,d){var b=d?d.name:e,c=null;this._fieldDataCache.has(b)?c=this._fieldDataCache.get(b).clause:d||(c=k.getWhereClause(e,this.fieldsIndex),this._fieldDataCache.set(b,{alias:b,clause:c}));return d?this.featureAdapter.getAttribute(a,b):c.calculateValue(a,this.featureAdapter)};a.prototype.validateItem=function(a,e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,
clause:k.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e).clause.testFeature(a,this.featureAdapter)};a.prototype.validateItems=function(a,e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:k.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e).clause.testSet(a,this.featureAdapter)};a.prototype._processAttributesForOutFields=function(a){var c=this.outFields;if(!c||!c.length)return this.featureAdapter.getAttributes(a);for(var e={},b=
0;b<c.length;b++){var f=this._fieldDataCache.get(c[b]),d=f.alias,f=f.clause;e[d]=f?f.calculateValue(a,this.featureAdapter):this.featureAdapter.getAttribute(a,d)}return e};a.prototype._processAttributesForDistinctValues=function(a){if(g.isNone(a)||!this.returnDistinctValues)return a;var c=this.outFields,e=[];if(c)for(var b=0;b<c.length;b++){var f=this._fieldDataCache.get(c[b]).alias;e.push(a[f])}else for(f in a)e.push(a[f]);c=(c||["*"]).join(",")+"\x3d"+e.join(",");e=this._returnDistinctMap.get(c)||
0;this._returnDistinctMap.set(c,++e);return 1<e?null:a};return a}();a.default=d})},"esri/layers/graphics/data/timeSupport":function(){define(["require","exports"],function(d,a){function l(a,e,c,d,g){if(null!=d&&null!=g&&d===g)return function(b){return d>=a.getAttribute(b,e)&&d<=a.getAttribute(b,c)};if(null!=d&&null!=g)return function(b){var f=a.getAttribute(b,e);b=a.getAttribute(b,c);return!(f>g||b<d)};if(null!=d)return function(b){return!(a.getAttribute(b,c)<d)};if(null!=g)return function(b){return!(a.getAttribute(b,
e)>g)}}function g(a,e,c,d){if(null!=c&&null!=d&&c===d)return function(d){return a.getAttribute(d,e)===c};if(null!=c&&null!=d)return function(h){return a.getAttribute(h,e)>=c&&a.getAttribute(h,e)<=d};if(null!=c)return function(d){return a.getAttribute(d,e)>=c};if(null!=d)return function(c){return a.getAttribute(c,e)<=d}}Object.defineProperty(a,"__esModule",{value:!0});a.getTimeExtent=function(a,e){if(!a)return null;var c=e.featureAdapter,d=a.startTimeField,g=a.endTimeField,b=Number.POSITIVE_INFINITY,
f=Number.NEGATIVE_INFINITY;if(d&&g)e.forEach(function(a){var e=c.getAttribute(a,d);a=c.getAttribute(a,g);null==e||isNaN(e)||(b=Math.min(b,e));null==a||isNaN(a)||(f=Math.max(f,a))});else{var k=d||g;e.forEach(function(a){a=c.getAttribute(a,k);null==a||isNaN(a)||(b=Math.min(b,a),f=Math.max(f,a))})}return{start:b,end:f}};a.getTimeOperator=function(a,e,c){if(!e||!a)return null;var d=a.startTimeField;a=a.endTimeField;if(!d&&!a)return null;var m=e.start;e=e.end;return null==m&&null==e?null:d&&a?l(c,d,a,
m,e):g(c,d||a,m,e)}})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/jsonMap ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./spatialQuerySupport".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){function y(a,b,c){c&&(b=n.quantizeOptimizedGeometry(D,b,a.hasZ,a.hasM,"esriGeometryPoint",c));return n.convertToPoint(b,a.hasZ,a.hasM)}function x(c,d,h){return g(this,void 0,void 0,function(){var g,k,p,n,r,u;return l(this,function(l){switch(l.label){case 0:if(!c)return[2,null];g=c.where;c.where=g=g&&g.trim();if(!g||/^1 *= *1$/.test(g)||d&&d===g)c.where=null;return c.geometry?[4,A(c)]:[2,c];case 1:return k=l.sent(),c.distance=0,c.units=null,"esriSpatialRelEnvelopeIntersects"===
c.spatialRel&&(p=c.geometry.spatialReference,k=m.getGeometryExtent(k),k.spatialReference=p),c.geometry=k,[4,w.checkProjectionSupport(k.spatialReference,h)];case 2:return l.sent(),[4,f.normalizeCentralMeridian(b.fromJSON(k))];case 3:n=l.sent()[0];if(e.isNone(n))throw a.QUERY_ENGINE_EMPTY_RESULT;r=n.toJSON();return[4,w.project(r,r.spatialReference,h)];case 4:u=l.sent();if(!u)throw a.QUERY_ENGINE_EMPTY_RESULT;u.spatialReference=h;c.geometry=u;return[2,c]}})})}function A(a){return g(this,void 0,void 0,
function(){var b,f,e,d,g,m,k,n,r,u;return l(this,function(l){switch(l.label){case 0:b=a.geometry;f=a.distance;e=a.units;if(null==f)return[2,c.resolve(b)];d=b.spatialReference;g=e&&z.fromJSON(e)||h.getUnitString(d);m=d&&(p.isGeographic(d)||p.isWebMercator(d));if(!m)return[3,1];n=b;return[3,3];case 1:return[4,w.checkProjectionSupport(d,p.WGS84).then(function(){return w.project(b,p.WGS84)})];case 2:n=l.sent(),l.label=3;case 3:return k=n,[4,t.getGeodesicBufferOperator()];case 4:return r=l.sent(),u=r(k,
f,g),[2,u?u.toJSON():null]}})})}Object.defineProperty(a,"__esModule",{value:!0});var z=new k.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});a.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var C=new r.default,D=new r.default,B={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,
esriGeometryMultipoint:n.convertToMultipoint};a.transformCentroid=y;a.getCentroid=function(a,b,c){if("esriGeometryPolygon"!==a.geometryType||!b||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=u.getCentroidOptimizedGeometry(new r.default,b.geometry,a.hasZ,a.hasM));return y(a,b.centroid,c)};a.getGeometry=function(a,b,c,f){b=b?"coords"in b?b:b.geometry:null;return b?c?(c=n.generalizeOptimizedGeometry(C,b,a.hasZ,a.hasM,a.geometryType,c),f&&(c=n.quantizeOptimizedGeometry(D,c,a.hasZ,a.hasM,
a.geometryType,f)),B[a.geometryType](c,a.hasZ,a.hasM)):f?(c=n.quantizeOptimizedGeometry(D,b,a.hasZ,a.hasM,a.geometryType,f),B[a.geometryType](c,a.hasZ,a.hasM)):B[a.geometryType](b,a.hasZ,a.hasM):null};a.normalizeQuery=function(a,b,c){return g(this,void 0,void 0,function(){var f,e,d,h,g;return l(this,function(m){f=a.outFields;e=a.orderByFields;d=a.groupByFieldsForStatistics;h=a.outStatistics;if(f)for(g=0;g<f.length;g++)f[g]=f[g].trim();if(e)for(g=0;g<e.length;g++)e[g]=e[g].trim();if(d)for(g=0;g<d.length;g++)d[g]=
d[g].trim();if(h)for(g=0;g<h.length;g++)h[g].onStatisticField&&(h[g].onStatisticField=h[g].onStatisticField.trim());a.geometry&&!a.outSR&&(a.outSR=a.geometry.spatialReference);return[2,x(a,b,c)]})})};a.normalizeFilter=function(a,b,c){return g(this,void 0,void 0,function(){return l(this,function(f){return[2,x(a,b,c)]})})};a.normalizeQueryLike=x;a.cleanFromGeometryEngine=function(a){return a&&E in a?JSON.parse(JSON.stringify(a,F)):a};var E="_geVersion",F=function(a,b){return a!==E?b:void 0}})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w){function t(a){return"polygon"===a.type?a.rings:a.paths}function y(a,b){return Math.ceil((a-b)/(2*b))}function x(a,b){for(var c=0,f=t(a);c<f.length;c++)for(var e=0,d=f[c];e<d.length;e++)d[e][0]+=b;return a}function A(a){for(var b=[],c=0,f=0,e=0;e<a.length;e++){for(var d=a[e],h=null,g=0;g<d.length;g++)h=d[g],b.push(h),0===g?f=c=h[0]:(c=Math.min(c,h[0]),f=Math.max(f,h[0]));h&&b.push([(c+f)/2,0])}return b}function z(a,c){if(!(a instanceof f||a instanceof b))throw F.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new e("straightLineDensify: the input geometry is neither polyline nor polygon");for(var d=[],h=0,g=t(a);h<g.length;h++){var m=g[h],k=[];d.push(k);k.push([m[0][0],m[0][1]]);for(var p=0;p<m.length-1;p++){var n=m[p][0],l=m[p][1],r=m[p+1][0],u=m[p+1][1],y=Math.sqrt((r-n)*(r-n)+(u-l)*(u-l)),w=(u-l)/y,x=(r-n)/y,A=y/c;if(1<A){for(var z=1;z<=A-1;z++){var C=z*c;k.push([x*C+n,w*C+l])}y=(y+Math.floor(A-1)*c)/2;k.push([x*y+n,w*y+l])}k.push([r,u])}}return"polygon"===a.type?new b({rings:d,spatialReference:a.spatialReference}):
new f({paths:d,spatialReference:a.spatialReference})}function C(a,b,c){b&&(a=z(a,1E6),a=n.webMercatorToGeographic(a,!0));c&&(a=x(a,c));return a}function D(a,b,c){if(Array.isArray(a)){var f=a[0];if(f>b){var e=y(f,b);a[0]=f+-2*e*b}else f<c&&(e=y(f,c),a[0]=f+-2*e*c)}else f=a.x,f>b?(e=y(f,b),a=a.clone().offset(-2*e*b,0)):f<c&&(e=y(f,c),a=a.clone().offset(-2*e*c,0));return a}function B(a,b){for(var c=-1,f=function(f){var e=b.cutIndexes[f],d=b.geometries[f],h=t(d);f=function(a){var b=h[a];b.some(function(c){if(180>
c[0])return!0;for(var f=c=0;f<b.length;f++){var e=b[f][0];c=e>c?e:c}c=Number(c.toFixed(9));c=-360*y(c,180);for(f=0;f<b.length;f++)e=d.getPoint(a,f),d.setPoint(a,f,e.clone().offset(c,0));return!0})};for(var g=0;g<h.length;g++)f(g);if(e===c)if("polygon"===a[0].type)for(f=0,g=t(d);f<g.length;f++)a[e]=a[e].addRing(g[f]);else{if("polyline"===a[0].type)for(f=0,g=t(d);f<g.length;f++)a[e]=a[e].addPath(g[f])}else c=e,a[e]=d},e=0;e<b.cutIndexes.length;e++)f(e);return a}function E(a,c,e){return g(this,void 0,
void 0,function(){var d,g,p,t,A,z,F,K,J,G,X,Z,ba,fa,V,ea,ca,da,qa,ta,ra,pa,wa,ya,Ba,Ka,za,La,Pa,ua,sa,oa,ia,ka,N,Ia,Ca;return l(this,function(l){switch(l.label){case 0:if(!Array.isArray(a))return[2,E([a],c)];d=c?c.url:k.geometryServiceUrl;G=0;X=[];Z=[];ba=0;for(fa=a;ba<fa.length;ba++)V=fa[ba],h.isNone(V)?Z.push(V):(g||(g=V.spatialReference,p=u.getInfo(g),F=(t=g.isWebMercator)?102100:4326,A=H[F].maxX,z=H[F].minX,K=H[F].plus180Line,J=H[F].minus180Line),p?"mesh"===V.type?Z.push(V):"point"===V.type?Z.push(D(V.clone(),
A,z)):"multipoint"===V.type?(ea=V.clone(),ea.points=ea.points.map(function(a){return D(a,A,z)}),Z.push(ea)):"extent"===V.type?(ca=V.clone(),da=ca._normalize(!1,!1,p),Z.push(da.rings?new b(da):da)):V.extent?(ca=V.extent,qa=y(ca.xmin,z),ta=2*qa*A,ra=0===ta?V.clone():x(V.clone(),ta),ca.offset(ta,0),ca.intersects(K)&&ca.xmax!==A?(G=ca.xmax>G?ca.xmax:G,ra=C(ra,t),X.push(ra),Z.push("cut")):ca.intersects(J)&&ca.xmin!==z?(G=2*ca.xmax*A>G?2*ca.xmax*A:G,ra=C(ra,t,360),X.push(ra),Z.push("cut")):Z.push(ra)):
Z.push(V.clone()):Z.push(V));pa=y(G,A);wa=-90;ya=pa;for(Ba=new f;0<pa;)Ka=-180+360*pa,Ba.addPath([[Ka,wa],[Ka,-1*wa]]),wa*=-1,pa--;return 0<X.length&&0<ya?[4,r.cut(d,X,Ba,e)]:[3,3];case 1:za=l.sent();La=B(X,za);Pa=[];ua=[];for(sa=0;sa<Z.length;sa++)oa=Z[sa],"cut"!==oa?ua.push(oa):(ia=La.shift(),ka=a[sa],h.isSome(ka)&&"polygon"===ka.type&&ka.rings&&1<ka.rings.length&&ia.rings.length>=ka.rings.length?(Pa.push(ia),ua.push("simplify")):ua.push(t?n.geographicToWebMercator(ia):ia));return Pa.length?[4,
w.simplify(d,Pa,e)]:[2,ua];case 2:N=l.sent();Ia=[];for(sa=0;sa<ua.length;sa++)oa=ua[sa],"simplify"!==oa?Ia.push(oa):Ia.push(t?n.geographicToWebMercator(N.shift()):N.shift());return[2,Ia];case 3:Ca=[];for(sa=0;sa<Z.length;sa++)oa=Z[sa],"cut"!==oa?Ca.push(oa):(ia=X.shift(),Ca.push(!0===t?n.geographicToWebMercator(ia):ia));return[2,m.resolve(Ca)]}})})}Object.defineProperty(a,"__esModule",{value:!0});var F=c.getLogger("esri.geometry.support.normalizeUtils"),H={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,
plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:p.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:p.WebMercator}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WebMercator})}};
a.straightLineDensify=z;a.normalizeCentralMeridian=E;a.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var f=a.spatialReference&&u.getInfo(a.spatialReference);if(!f)return c;var f=f.valid,e=f[0],f=f[1],d=c.width,h=c.xmin;b=c.xmax;b=[b,h];h=b[0];b=b[1];if("extent"===a.type||0===d||d<=f||d>2*f||h<e||b>f)return c;var g;switch(a.type){case "polygon":if(1<a.rings.length)g=A(a.rings);else return c;break;case "polyline":if(1<a.paths.length)g=A(a.paths);else return c;
break;case "multipoint":g=a.points}a=c.clone();for(e=0;e<g.length;e++){var m=g[e][0];0>m?(m+=f,b=Math.max(m,b)):(m-=f,h=Math.min(m,h))}a.xmin=h;a.xmax=b;return a.width<d?(a.xmin-=f,a.xmax-=f,a):c};a.normalizeMapX=function(a,b){if(b=u.getInfo(b)){var c=b.valid;b=c[0];var c=c[1],f=c-b;if(a<b)for(;a<b;)a+=f;if(a>c)for(;a>c;)a-=f}return a}})},"esri/tasks/geometry/cut":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});a.cut=function(a,f,d,u){return g(this,void 0,void 0,function(){var b,g,p,t,y,x,A,z;return k(this,function(k){switch(k.label){case 0:return b="string"===typeof a?h.urlToObject(a):a,g=f[0].spatialReference,p=l({},u,{query:l({},b.query,{f:"json",sr:JSON.stringify(g),target:JSON.stringify({geometryType:m.getJsonType(f[0]),geometries:f}),cutter:JSON.stringify(d)})}),[4,c(b.path+"/cut",p)];case 1:return t=k.sent(),y=t.data,x=y.cutIndexes,
A=y.geometries,z=void 0===A?[]:A,[2,{cutIndexes:x,geometries:z.map(function(a){return e.fromJSON(a).set(g)})}]}})})}})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/awaiterHelper ./core/tsSupport/generatorHelper @dojo/framework/shim/global ./config ./kernel ./core/Error ./core/has ./core/lang ./core/promiseUtils ./core/string ./core/urlUtils @dojo/framework/shim/Promise".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n){function r(a,b){var c=p.createAbortController();
return p.create(function(f,e){w(c.signal,a,b).then(f).catch(e)},function(){c.abort()})}function w(a,f,e){return g(this,void 0,void 0,function(){var d,h,g,m,r,u,t,y;return k(this,function(k){switch(k.label){case 0:return d=n.isDataProtocol(f),(h=n.isBlobProtocol(f))||d||(f=n.normalize(f)),g={url:f,requestOptions:l({},e)},(m=n.getInterceptor(f))?[4,F(m,g)]:[3,2];case 1:r=k.sent();if(null!=r)return[2,{data:r,getHeader:T,requestOptions:g.requestOptions,url:g.url}];m.after||m.error||(m=null);k.label=2;
case 2:f=g.url;e=g.requestOptions;if("image"===e.responseType){if(b("host-webworker"))throw A("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),g);}else if(d)throw A("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+e.responseType),g);if("head"===e.method){if(e.body)throw A("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),g);if(d||h)throw A("request:invalid-parameters",
Error("data and blob URLs are not supported for method 'head'"),g);}return[4,z()];case 3:k.sent();if(O)return[2,O.execute(f,e)];u=p.createAbortController();p.onAbort(a,function(){return u.abort()});p.onAbort(e,function(){return u.abort()});t={controller:u,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:m,params:g,redoRequest:!1,useIdentity:c.request.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1};return[4,J(t)];case 4:return y=k.sent(),m&&m.after&&m.after(y),[2,
y]}})})}function t(a){n.isBlobProtocol(a)||n.isDataProtocol(a)||(a=n.getOrigin(a))&&-1===r._corsServers.indexOf(a)&&r._corsServers.push(a)}function y(a){a=n.getOrigin(a);return!a||u.endsWith(a,".arcgis.com")||n.hasSameOrigin(a,n.appUrl)||-1!==r._corsServers.indexOf(a)||n.isTrustedServer(a)}function x(){var a;try{a=new DOMException("Aborted","AbortError")}catch(W){a=Error("Aborted"),a.name="AbortError"}return a}function A(a,b,c,e){var d="Error",h={url:c.url,requestOptions:c.requestOptions,getHeader:T,
ssl:!1};if(b instanceof m)return b.details?(b.details=f.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=h,b;if(b){c=e&&function(a){return e.headers.get(a)};var g=e&&e.status,k=b.message;k&&(d=k);c&&(h.getHeader=c);h.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||g||0;h.subCode=b.subcode;h.messageCode=b.messageCode;h.messages="string"===typeof b.details?[b.details]:b.details}a=new m(a,d,h);b&&"cancel"===b.dojoType&&(a.dojoType="cancel");return a}function z(){return g(this,
void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:return b("host-webworker")?O?[3,2]:[4,new Promise(function(a,b){d(["./core/workers/request"],a,b)})]:[3,3];case 1:O=a.sent(),a.label=2;case 2:return[3,6];case 3:if(M)return[3,6];if(!b("esri-abortable-fetch"))return[3,4];M=e.default.fetch;return[3,6];case 4:return[4,new Promise(function(a,b){d(["whatwg-fetch"],a,b)})];case 5:M=a.sent().fetch,a.label=6;case 6:return[2]}})})}function C(){return g(this,void 0,void 0,function(){return k(this,
function(a){switch(a.label){case 0:return h.id?[3,2]:[4,new Promise(function(a,b){d(["./identity/IdentityManager"],a,b)})];case 1:a.sent(),a.label=2;case 2:return[2]}})})}function D(a){return g(this,void 0,void 0,function(){var c,f,d,g,m,n,l,r;return k(this,function(k){switch(k.label){case 0:c=a.params.url;f=a.params.requestOptions;d=a.controller.signal;g=f.body;l=n=m=null;Q&&"HTMLFormElement"in e.default&&(g instanceof FormData?m=g:g instanceof HTMLFormElement&&(n=g,m=new FormData(n)));"string"===
typeof g&&(l=g);a.fetchOptions={cache:f.cacheBust&&b("esri-abortable-fetch")?"reload":"default",credentials:"same-origin",headers:f.headers||{},method:"head"===f.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:d};if(m||l)a.fetchOptions.body=m||l;"anonymous"===f.authMode&&(a.useIdentity=!1);a.hasToken=!!(/token=/i.test(c)||f.query&&f.query.token||m&&m.get&&m.get("token")||n&&n.elements.token);if(!a.useIdentity||a.hasToken||a.credentialToken||B(c)||p.isAborted(d))return[3,11];r=void 0;return"immediate"!==
f.authMode?[3,3]:[4,C()];case 1:return k.sent(),[4,h.id.getCredential(c,{signal:d})];case 2:return r=k.sent(),a.credential=r,[3,10];case 3:return"no-prompt"!==f.authMode?[3,9]:[4,C()];case 4:k.sent(),k.label=5;case 5:return k.trys.push([5,7,,8]),[4,h.id.checkSignInStatus(c)];case 6:return r=k.sent(),[3,8];case 7:return k.sent(),[3,8];case 8:return[3,10];case 9:h.id&&(r=h.id.findCredential(c)),k.label=10;case 10:r&&(a.credentialToken=r.token,a.useSSL=!!r.ssl),k.label=11;case 11:return[2]}})})}function B(a){return U.some(function(b){return b.test(a)})}
function E(a){return g(this,void 0,void 0,function(){var f,e,d,g,m,r,u,w,x,z,C,E,D,F,K,B,O,J,T,R,P,S,U,ia,ka,N;return k(this,function(k){switch(k.label){case 0:f=a.params.url;e=a.params.requestOptions;d=a.fetchOptions;g=n.isBlobProtocol(f)||n.isDataProtocol(f);m=e.responseType||"json";r=g?0:null!=e.timeout?e.timeout:c.request.timeout;u=!1;if(!g){a.useSSL&&(f=n.toHTTPS(f));e.cacheBust&&"default"===d.cache&&(f=n.addQueryParameter(f,"request.preventCache",Date.now()));w=l({},e.query);a.credentialToken&&
(w.token=a.credentialToken);x=n.objectToQuery(w);b("esri-url-encodes-apostrophe")&&(x=x.replace(/'/g,"%27"));z=f.length+1+x.length;C=void 0;u="post"===e.method||!!e.body||z>c.request.maxUrlLength;if(E=e.useProxy||!!n.getProxyRule(f))D=n.getProxyUrl(f),C=D.path,!u&&C.length+1+z>c.request.maxUrlLength&&(u=!0),D.query&&(w=l({},D.query,w));if("HEAD"===d.method&&(u||E)){if(u){if(z>c.request.maxUrlLength)throw A("request:invalid-parameters",Error("URL exceeds maximum length"),a.params);throw A("request:invalid-parameters",
Error("cannot use POST request when method is 'head'"),a.params);}if(E)throw A("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),a.params);}u?(d.method="POST",e.body?f=n.addQueryParameters(f,w):(d.body=n.objectToQuery(w),d.headers["Content-Type"]="application/x-www-form-urlencoded")):f=n.addQueryParameters(f,w);E&&(a.useProxy=!0,f=C+"?"+f);w.token&&Q&&d.body instanceof FormData&&(F=d.body,F.set?F.set("token",w.token):F.append("token",w.token));e.hasOwnProperty("withCredentials")?
a.withCredentials=e.withCredentials:n.isTrustedServer(f)?a.withCredentials=!0:h.id&&(K=h.id.findServerInfo(f))&&K.webTierAuth&&(a.withCredentials=!0);a.withCredentials&&(d.credentials="include")}B=0;O=!1;0<r&&(B=setTimeout(function(){O=!0;a.controller.abort()},r));k.label=1;case 1:return k.trys.push([1,24,25,26]),"image"!==e.responseType||"default"!==d.cache||"GET"!==d.method||u||H(e.headers)||!g&&!a.useProxy&&c.request.proxyUrl&&!y(f)?[3,3]:[4,I(f,a)];case 2:return T=k.sent(),[3,23];case 3:return[4,
M(f,d)];case 4:J=k.sent();a.useProxy||t(f);if(!J.ok||"HEAD"===d.method)return[3,23];R=m;switch(R){case "array-buffer":return[3,5];case "blob":return[3,7];case "image":return[3,7];case "document":return[3,9];case "json":return[3,11];case "xml":return[3,13]}return[3,15];case 5:return[4,J.arrayBuffer()];case 6:return T=k.sent(),[3,17];case 7:return[4,J.blob()];case 8:return T=k.sent(),[3,17];case 9:return P=G,[4,J.text()];case 10:return T=P.apply(void 0,[k.sent(),"text/html"]),[3,17];case 11:return[4,
J.text()];case 12:return S=k.sent(),T=JSON.parse(S||null),[3,17];case 13:return U=G,[4,J.text()];case 14:return T=U.apply(void 0,[k.sent(),"application/xml"]),[3,17];case 15:return[4,J.text()];case 16:return T=k.sent(),[3,17];case 17:B&&(clearTimeout(B),B=0);ia=J.headers.get("Content-Type");if(!/application\/json|text\/plain/i.test(ia)||!(T instanceof ArrayBuffer&&750>=T.byteLength||T instanceof Blob&&750>=T.size))return[3,21];k.label=18;case 18:return k.trys.push([18,20,,21]),[4,(new Response(T)).json()];
case 19:return ka=k.sent(),ka.error&&(T=ka),[3,21];case 20:return k.sent(),[3,21];case 21:return"image"===m&&T instanceof Blob?[4,I(URL.createObjectURL(T),a,!0)]:[3,23];case 22:T=k.sent(),k.label=23;case 23:return[3,26];case 24:N=k.sent();if("AbortError"===N.name){if(O)throw Error("Timeout exceeded");throw p.createAbortError("Request canceled");}if(!J&&N instanceof TypeError&&c.request.proxyUrl&&!e.body&&"post"!==e.method&&"head"!==e.method&&!a.useProxy)a.redoRequest=!0,n.addProxyRule({proxyUrl:c.request.proxyUrl,
urlPrefix:n.removeFile(n.urlToObject(f).path)});else throw N;return[3,26];case 25:return B&&clearTimeout(B),[7];case 26:return[2,[J,T]]}})})}function F(a,b){return g(this,void 0,void 0,function(){var c,f,e;return k(this,function(d){switch(d.label){case 0:if(null!=a.responseData)return[2,a.responseData];a.headers&&(b.requestOptions.headers=l({},b.requestOptions.headers,a.headers));a.query&&(b.requestOptions.query=l({},b.requestOptions.query,a.query));if(!a.before)return[3,5];f=c=void 0;d.label=1;case 1:return d.trys.push([1,
3,,4]),[4,a.before(b)];case 2:return f=d.sent(),[3,4];case 3:return e=d.sent(),c=A("request:interceptor",e,b),[3,4];case 4:if(f instanceof Error||f instanceof m)c=A("request:interceptor",f,b);if(c)throw a.error&&a.error(c),c;return[2,f];case 5:return[2]}})})}function H(a){if(a)for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++)if(a[c[b]])return!0;return!1}function G(a,b){var c;try{c=(new DOMParser).parseFromString(a,b)}catch(Z){}if(!c||c.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");
return c}function J(a){return g(this,void 0,void 0,function(){var b,f,e,d,g,m,p,l,r,u,t;return k(this,function(k){switch(k.label){case 0:return[4,D(a)];case 1:k.sent(),k.label=2;case 2:k.trys.push([2,8,,9]),k.label=3;case 3:return[4,E(a)];case 4:b=k.sent(),f=b[0],e=b[1],k.label=5;case 5:return[4,K(a,f,e)];case 6:if(!k.sent())return[3,3];k.label=7;case 7:return[3,9];case 8:throw d=k.sent(),g=A("request:server",d,a.params,f),g.details.ssl=a.useSSL,a.interceptor&&a.interceptor.error&&a.interceptor.error(g),
g;case 9:return m=a.params.url,/\/sharing\/rest\/(accounts|portals)\/self/i.test(m)&&!a.hasToken&&!a.credentialToken&&e&&e.user&&e.user.username&&!n.isTrustedServer(m)&&(p=n.getOrigin(m,!0))&&c.request.trustedServers.push(p),(l=a.credential)&&h.id&&(u=(r=h.id.findServerInfo(l.server))&&r.owningSystemUrl)&&(u=u.replace(/\/?$/,"/sharing"),(t=h.id.findCredential(u,l.userId))&&-1===h.id._getIdenticalSvcIdx(u,t)&&t.resources.unshift(u)),[2,{data:e,getHeader:f?function(a){return f.headers.get(a)}:T,requestOptions:a.params.requestOptions,
ssl:a.useSSL,url:a.params.url}]}})})}function K(a,b,c){return g(this,void 0,void 0,function(){var e,d,g,m,p;return k(this,function(k){switch(k.label){case 0:if(a.redoRequest)return a.redoRequest=!1,[2,!1];if(!b)return[2,!0];if(!b.ok)throw Error("Unable to load "+b.url+" status: "+b.status);c&&c.error&&(e=f.mixin(Error(),c.error));e&&(d=Number(e.code),g=e.hasOwnProperty("subcode")?Number(e.subcode):null,m=(m=e.messageCode)&&m.toUpperCase());return 403===d&&(4===g||e.message&&-1<e.message.toLowerCase().indexOf("ssl")&&
-1===e.message.toLowerCase().indexOf("permission"))?a.useSSL?[3,4]:(a.useSSL=!0,[2,!1]):[3,1];case 1:return a.useIdentity&&"no-prompt"!==a.params.requestOptions.authMode&&-1!==P.indexOf(d)&&!B(a.params.url)&&(403!==d||-1===S.indexOf(m)&&(null==g||2===g&&a.credentialToken))?[4,C()]:[3,4];case 2:return k.sent(),[4,h.id.getCredential(a.params.url,{error:A("request:server",e,a.params),signal:a.controller.signal,token:a.credentialToken})];case 3:return p=k.sent(),a.credential=p,a.credentialToken=p.token,
a.useSSL=a.useSSL||p.ssl,[2,!1];case 4:if(e)throw e;return[2,!0]}})})}function I(a,c,f){void 0===f&&(f=!1);return p.create(function(e,d){var h=c.controller.signal;if(p.isAborted(h))return d(x());var g=new Image;g.crossOrigin=c.withCredentials?"use-credentials":"anonymous";var m=function(){l();d(Error("Unable to load "+a))},k=function(){l();e(g)},n=function(){l();g.src="";d(x())},l=function(){b("esri-image-decode")||(g.removeEventListener("error",m),g.removeEventListener("load",k));h.removeEventListener("abort",
n);f&&URL.revokeObjectURL(a)};g.alt="";g.src=a;b("esri-image-decode")?g.decode().then(k,m):(g.addEventListener("error",m),g.addEventListener("load",k));h.addEventListener("abort",n)})}var M,O,Q="FormData"in e.default,P=[499,498,403,401],S=["COM_0056","COM_0057"],U=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],T=function(){return null};r._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return r})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper ../config ../kernel ./Error ./global ./Logger ./string".split(" "),
function(d,a,l,g,k,e,c,h,m){function b(a){var b={path:null,query:null},c=new pa(a),e=a.indexOf("?");null===c.query?b.path=a:(b.path=a.substring(0,e),b.query=f(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b}function f(a){var b={},c=0;for(a=a.split("\x26");c<a.length;c++){var f=a[c];if(f){var e=f.indexOf("\x3d"),d=void 0,h=void 0;0>e?(d=decodeURIComponent(f),h=""):(d=decodeURIComponent(f.slice(0,e)),h=decodeURIComponent(f.slice(e+
1)));f=b[d];"string"===typeof f&&(f=b[d]=[f]);Array.isArray(f)?f.push(h):b[d]=h}}return b}function p(a){return a&&"object"===typeof a&&"toJSON"in a&&"function"===typeof a.toJSON}function u(a,b){return a?b&&"function"===typeof b?Object.keys(a).map(function(c){return encodeURIComponent(c)+"\x3d"+encodeURIComponent(b(c,a[c]))}).join("\x26"):Object.keys(a).map(function(c){var f=a[c];if(null==f)return"";var e=encodeURIComponent(c)+"\x3d";return(c=b&&b[c])?e+encodeURIComponent(c(f)):Array.isArray(f)?f.map(function(a){return p(a)?
e+encodeURIComponent(JSON.stringify(a)):e+encodeURIComponent(a)}).join("\x26"):p(f)?e+encodeURIComponent(JSON.stringify(f)):e+encodeURIComponent(f)}).filter(function(a){return a}).join("\x26"):""}function n(a){var b=a.indexOf("?");-1!==b?(wa.path=a.slice(0,b),wa.query=a.slice(b+1)):(wa.path=a,wa.query=null);return wa}function r(a){a=n(a).path;a&&"/"===a[a.length-1]||(a+="/");a=P(a,!0);return a=a.toLowerCase()}function w(a){var b=ba.proxyRules;a=r(a);for(var c=0;c<b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}
function t(a){a=z(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function y(a,b,c){void 0===c&&(c=!1);a=T(a);b=T(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function x(b,c,f){void 0===c&&(c=a.appBaseUrl);if(K(b))return f&&f.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===D(b).slice(2)?"http:"+b:"https:"+b;if(!I(b)){f=C;if("/"===b[0]){var e=c.indexOf("//"),e=c.indexOf("/",e+2);c=-1===e?c:
c.slice(0,e)}return f(c,b)}return b}function A(b,c,f){void 0===c&&(c=a.appBaseUrl);if(!B(b))return b;var e=z(b),d=e.toLowerCase();c=z(c).toLowerCase().replace(/\/+$/,"");if((f=f?z(f).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(f))return b;for(var h=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},g=h(d,"/",d.indexOf("//")+2),m=-1;d.slice(0,g+1)===c.slice(0,g)+"/";){m=g+1;if(g===d.length)break;g=h(d,"/",g+1)}if(-1===m||f&&m<f.length)return b;b=e.slice(m);e=c.slice(m-1).replace(/[^/]+/g,
"").length;if(0<e)for(d=0;d<e;d++)b="../"+b;else b="./"+b;return b}function z(a){a=a.trim();a=x(a);if(/^https?:\/\//i.test(a)){var b=n(a);a=b.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");b.query&&(a+="?"+b.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=S(a)}function C(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(B(a[0])){var c=a[0],f=c.indexOf("//");b.push(c.slice(0,f+1));ca.test(a[0])&&(b[0]+="/");a[0]=c.slice(f+2)}else"/"===a[0][0]&&
b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)f=a[c],".."===f&&0<b.length&&".."!==b[b.length-1]?b.pop():!f||"."===f&&0!==b.length||b.push(f);return b.join("/")}}function D(a,b){void 0===b&&(b=!1);if(E(a)||F(a))return null;var c=a.indexOf("://");if(-1===c&&K(a))c=2;else if(-1!==c)c+=3;else return null;c=a.indexOf("/",c);-1!==c&&(a=a.slice(0,c));b&&(a=P(a,!0));return a}function B(a){return K(a)||I(a)}function E(a){return"blob:"===a.slice(0,5)}function F(a){return"data:"===
a.slice(0,5)}function H(a){a=G(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function G(a){return(a=a.match(ya))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function J(a){var b=H(a);if(!b)return null;a=G(a);return new Blob([b],{type:a.mediaType})}function K(a){return a&&"/"===a[0]&&"/"===a[1]}function I(a){return fa.test(a)}function M(b){return V.test(b)||"http"===a.appUrl.scheme&&K(b)}function O(a){return K(a)?
"https:"+a:a.replace(V,"https:")}function Q(){return"https"===a.appUrl.scheme}function P(a,b){void 0===b&&(b=!1);if(K(a))return a.slice(2);a=a.replace(fa,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function S(b){var c=ba.httpsDomains;if(!M(b))return b;var f=b.indexOf("/",7),e;e=-1===f?b:b.slice(0,f);e=e.toLowerCase().slice(7);if(da.test(e))if(m.endsWith(e,":80"))e=e.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&e===a.appUrl.authority&&!qa.test(b))return b;
if(Q()&&e===a.appUrl.authority||c&&c.some(function(a){return e===a||m.endsWith(e,"."+a)})||Q()&&!w(b))b=O(b);return b}function U(a,b,c){if(!(b&&c&&a&&B(a)))return a;var f=a.indexOf("//"),e=a.indexOf("/",f+2),d=a.indexOf(":",f+2),e=Math.min(0>e?a.length:e,0>d?a.length:d);if(a.slice(f+2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,f+2);a=a.slice(e);return""+b+c+a}function T(b){if("string"===typeof b)return new pa(x(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}function R(b,c){var f=c&&
c.url&&c.url.path;b&&f&&(b=x(b,f,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(f=c.urlKey+"."+c.customBaseUrl,c=y(a.appUrl,a.appUrl.scheme+"://"+f)?U(b,c.portalHostname,f):U(b,f,c.portalHostname)):c=b;return c}function W(a,b){if(!a)return a;!B(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=x(a);if(b){var f=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;f&&(c=A(c,f,f),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=
c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?U(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;B(c)&&(c=z(c));return c}function X(a,c,f){a=b(a);var e=a.query||{};e[c]=String(f);return a.path+"?"+u(e)}Object.defineProperty(a,"__esModule",{value:!0});var Z=h.getLogger("esri.core.urlUtils"),ba=g.request,fa=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,V=/^\s*http:/i,ea=/^\s*https:/i,ca=/^\s*file:/i,da=/:\d+$/,qa=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ta=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,
ra=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,pa=function(){function a(a){void 0===a&&(a="");this.uri=a;this.port=this.host=this.password=this.user=this.fragment=this.query=this.path=this.authority=this.scheme=null;a=this.uri.match(ta);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(ra),this.user=a[3]||null,this.password=a[4]||null,
this.host=a[6]||a[7],this.port=a[9]||null)}a.prototype.toString=function(){return this.uri};return a}();a.Url=pa;a.appUrl=new pa(g.applicationUrl);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=b;a.queryToObject=f;a.objectToQuery=u;a.getProxyUrl=function(c){void 0===c&&(c=!1);var f,d=ba.proxyUrl;if("string"===
typeof c){if(f=c,f=ea.test(f)||"https"===a.appUrl.scheme&&K(f),c=w(c))d=c.proxyUrl}else f=!!c;if(!d)throw Z.warn("esri/config: esriConfig.request.proxyUrl is not set."),new e("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");f&&Q()&&(d=O(d));return b(d)};a.addProxy=function(a){var c=w(a),e,d;c&&(d=n(c.proxyUrl),e=d.path,d=d.query?f(d.query):null);e&&(c=b(a),a=e+"?"+c.path,(e=u(l({},d,c.query)))&&(a=a+"?"+e));return a};var wa={path:"",query:""};a.addProxyRule=function(a){a=
{proxyUrl:a.proxyUrl,urlPrefix:r(a.urlPrefix)};for(var b=ba.proxyRules,c=a.urlPrefix,f=b.length,e=0;e<b.length;e++){var d=b[e].urlPrefix;if(0===c.indexOf(d)){if(c.length===d.length)return-1;f=e;break}0===d.indexOf(c)&&(f=e+1)}b.splice(f,0,a);return f};a.getProxyRule=w;a.hasSamePortal=function(a,b){a=t(a);b=t(b);return P(a)===P(b)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&m.startsWith(a,b)},c=ba.interceptors;if(c)for(var f=
0;f<c.length;f++){var e=c[f];if(Array.isArray(e.urls)){if(e.urls.some(b))return e}else if(b(e.urls))return e}return null};a.hasSameOrigin=y;a.isTrustedServer=function(b){if("string"===typeof b)if(B(b))b=T(b);else return!0;for(var c=ba.trustedServers||[],f=0;f<c.length;f++){var e;e=c[f];a.trustedServersUrlCache[e]||(I(e)||K(e)?a.trustedServersUrlCache[e]=[new pa(x(e))]:a.trustedServersUrlCache[e]=[new pa("http://"+e),new pa("https://"+e)]);e=a.trustedServersUrlCache[e];for(var d=0;d<e.length;d++)if(y(b,
e[d]))return!0}return!1};a.makeAbsolute=x;a.makeRelative=A;a.normalize=z;a.join=C;a.getOrigin=D;a.isAbsolute=B;a.isBlobProtocol=E;a.isDataProtocol=F;a.dataToArrayBuffer=H;var ya=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=G;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.dataToBlob=J;a.downloadDataAsFile=function(a,b){var f;a:if(f=document.createElement("a"),"download"in f){var e=null;if(c.URL&&c.URL.createObjectURL){e=J(a);if(!e){f=
!1;break a}e=c.URL.createObjectURL(e)}f.download=b;f.href=e||a;f.style.display="none";document.body.appendChild(f);f.click();document.body.removeChild(f);e&&c.URL.revokeObjectURL(e);f=void 0}else f=!1;f||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(J(a),b)};a.isProtocolRelative=K;a.hasProtocol=I;a.toHTTP=function(a){return K(a)?"http:"+a:a.replace(ea,"http:")};a.toHTTPS=O;a.isAppHTTPS=Q;a.removeFile=function(a){var b=0;if(B(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");
return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=U;a.fromJSON=R;a.read=function(a,b,c){return R(a,c)};a.toJSON=W;a.write=function(a,b,c,f){(a=W(a,f))&&(b[c]=a)};a.isSVG=function(a){return Ba.test(a)};a.removeQueryParameters=function(a,c){a=b(a);var f=Object.keys(a.query||{});0<f.length&&c&&c.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+f.join(", ")+".");return a.path};
a.addQueryParameter=X;a.addQueryParameters=function(a,c){a=b(a);var f=a.query||{},e;for(e in c)f[e]=c[e];return(c=u(f))?a.path+"?"+c:a.path};a.removeQueryParameter=function(a,c){var f=b(a),e=f.path,f=f.query;if(!f)return a;delete f[c];return(a=u(f))?e+"?"+a:e};a.addTokenParameter=function(a){var b=k.id&&k.id.findCredential(a);return b&&b.token?X(a,"token",b.token):a};var Ba=/(^data:image\/svg|\.svg$)/i})},"esri/tasks/geometry/simplify":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h){function m(a){return{geometryType:h.getJsonType(a[0]),geometries:a.map(function(a){return a.toJSON()})}}function b(a,b,c){var f=h.getGeometryType(b);return a.map(function(a){a=f.fromJSON(a);a.spatialReference=c;return a})}Object.defineProperty(a,"__esModule",{value:!0});a.simplify=function(a,d,u){return g(this,void 0,void 0,function(){var f,g,p,t,y;return k(this,function(k){switch(k.label){case 0:return f="string"===typeof a?c.urlToObject(a):a,g=d[0].spatialReference,p=h.getJsonType(d[0]),
t=l({},u,{query:l({},f.query,{f:"json",sr:g.wkid?g.wkid:JSON.stringify(g),geometries:JSON.stringify(m(d))})}),[4,e(f.path+"/simplify",t)];case 1:return y=k.sent(),[2,b(y.data,p,g)]}})})}})},"esri/layers/graphics/centroid":function(){define(["require","exports"],function(d,a){function l(a,e,c,d,g,b){b=g?b?4:3:b?3:2;var f=c,h=c+b,m=0,k=0,l=c=0,w=0,t=0;for(--d;t<d;t++,f+=b,h+=b){var y=e[f],x=e[f+1],A=e[f+2],z=e[h],C=e[h+1],D=e[h+2],B=y*C-z*x,l=l+B,m=m+(y+z)*B,k=k+(x+C)*B;g&&(B=y*D-z*A,c+=(A+D)*B,w+=
B);y<a[0]&&(a[0]=y);y>a[1]&&(a[1]=y);x<a[2]&&(a[2]=x);x>a[3]&&(a[3]=x);g&&(A<a[4]&&(a[4]=A),A>a[5]&&(a[5]=A))}0<l&&(l*=-1);0<w&&(w*=-1);if(!l)return null;a=[m,k,.5*l];g&&(a[3]=c,a[4]=.5*w);return a}function g(a,e,c,d,g){g=d?g?4:3:g?3:2;for(var b=e,f=e+g,h=0,m=0,k=0,l=0,w=0,t=c-1;w<t;w++,b+=g,f+=g){var y=a[b],x=a[b+1],A=a[b+2],z=a[f],C=a[f+1],D=a[f+2],B;if(d){B=z-y;var E=C-x,F=D-A;B=Math.sqrt(B*B+E*E+F*F)}else B=z-y,E=C-x,B=Math.sqrt(B*B+E*E);B&&(h+=B,d?(y=[y+.5*(z-y),x+.5*(C-x),A+.5*(D-A)],m+=B*y[0],
k+=B*y[1],l+=B*y[2]):(y=[y+.5*(z-y),x+.5*(C-x)],m+=B*y[0],k+=B*y[1]))}return 0<h?d?[m/h,k/h,l/h]:[m/h,k/h]:0<c?d?[a[e],a[e+1],a[e+2]]:[a[e],a[e+1]]:null}Object.defineProperty(a,"__esModule",{value:!0});a.getCentroidOptimizedGeometry=function(a,e,c,d){if(!e||!e.lengths.length)return null;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);for(var h=a.coords,b=[],f=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],k=e.lengths,u=e.coords,n=c?d?4:3:d?3:2,r=0,w=0;w<k.length;w++){var t=k[w],y=l(f,u,r,t,c,d);y&&b.push(y);r+=t*n}b.sort(function(a,b){var f=a[2]-b[2];0===f&&c&&(f=a[4]-b[4]);return f});b.length&&(n=6*b[0][2],h[0]=b[0][0]/n,h[1]=b[0][1]/n,c&&(n=6*b[0][4],h[2]=0!==n?b[0][3]/n:0),h[0]<f[0]||h[0]>f[1]||h[1]<f[2]||h[1]>f[3]||c&&(h[2]<f[4]||h[2]>f[5]))&&(h.length=0);if(!h.length)if(e=
e.lengths[0]?g(u,0,k[0],c,d):null)h[0]=e[0],h[1]=e[1],c&&2<e.length&&(h[2]=e[2]);else return null;return a};a.lineCentroid=g})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){function w(){return e.create(function(a){return d(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var t={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",
esriSpatialRelRelation:null},y={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},x={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},A={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1};a.importGeometryEngine=w;a.getGeodesicBufferOperator=function(){return w().then(function(a){return a.geodesicBuffer})};a.getSpatialQueryOperator=function(a,b,d){if(m.isPolygon(b)&&"esriGeometryPoint"===d.geometryType&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a)){var g=p.convertFromPolygon(new u.default,b,!1,!1);return e.resolve(function(a){return f.polygonContainsPoint(g,!1,!1,a)})}if(m.isPolygon(b)&&"esriGeometryMultipoint"===d.geometryType){var k=
p.convertFromPolygon(new u.default,b,!1,!1);if("esriSpatialRelContains"===a)return e.resolve(function(a){return f.polygonContainsMultipoint(k,!1,!1,a,d.hasZ,d.hasM)})}if(m.isExtent(b)&&"esriGeometryPoint"===d.geometryType&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a))return e.resolve(function(a){return c.extentContainsPoint(b,r.getGeometry(d,a))});if(m.isExtent(b)&&"esriGeometryMultipoint"===d.geometryType&&"esriSpatialRelContains"===a)return e.resolve(function(a){return c.extentContainsMultipoint(b,
r.getGeometry(d,a))});if(m.isExtent(b)&&"esriSpatialRelIntersects"===a){var n=h.getExtentIntersector(d.geometryType);return e.resolve(function(a){return n(b,r.getGeometry(d,a))})}return w().then(function(c){var f=c[t[a]].bind(null,b);return function(a){return f(r.getGeometry(d,a))}})};a.checkSpatialQuerySupport=function(a,c,f){return g(this,void 0,void 0,function(){var e,d;return l(this,function(h){e=a.spatialRel;d=a.geometry;if(!d)return[2];if(!0!==y[e])throw new k("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:a});if(!b.isValid(d.spatialReference)||!b.isValid(f))return[2];if(!0!==x[m.getJsonType(d)])throw new k("feature-store:unsupported-query","Unsupported query geometry type",{query:a});if(!0!==A[c])throw new k("feature-store:unsupported-query","Unsupported layer geometry type",{query:a});return a.outSR?[2,n.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSR)]:[2]})})};a.canQueryWithRBush=function(a){if(m.isExtent(a))return!0;if(m.isPolygon(a)){var b=
0;for(a=a.rings;b<a.length;b++){var c=a[b];if(5!==c.length||c[0][0]!==c[1][0]||c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1}return!0}return!1}})},"esri/layers/graphics/contains":function(){define(["require","exports"],function(d,a){function l(a,d,e,c,h){if(!a)return!1;d=d?e?4:3:e?3:2;e=a.coords;var g=!1,b=0,f=0;for(a=a.lengths;f<a.length;f++){for(var k=a[f],l=b,n=b,r=b+k*d;n<r;n+=d){l=n+d;l===r&&(l=b);var w=e[n],t=e[n+1],y=e[l],l=e[l+1];(t<
h&&l>=h||l<h&&t>=h)&&w+(h-t)/(l-t)*(y-w)<c&&(g=!g)}b+=k*d}return g}Object.defineProperty(a,"__esModule",{value:!0});a.polygonContainsPoint=function(a,d,e,c){return l(a,d,e,c.coords[0],c.coords[1])};a.polygonContainsMultipoint=function(a,d,e,c,h,m){h=h?m?4:3:m?3:2;m=c.coords;c=c.lengths;if(!c)return!1;for(var b=0,f=0;b<c.length;b++,f+=h)if(!l(a,d,e,m[f],m[f+1]))return!1;return!0};a.polygonContainsCoords=l})},"esri/layers/support/FieldsIndex":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],
function(d,a,l){return function(){function a(a){this.fields=a;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(a){for(var e=[],c=0;c<a.length;c++){var d=a[c],g=d&&d.name;if(g){var b=g.toLowerCase().trim();this._fieldsMap.set(g,d);this._fieldsMap.set(b,d);e.push(b);if("date"===d.type||"esriFieldTypeDate"===d.type)this.dateFields.push(d),this._dateFieldsSet.add(d)}}e.sort();this.uid=e.join(",")}}a.prototype.destroy=function(){this._fieldsMap.clear()};a.prototype.has=function(a){return null!=
this.get(a)};a.prototype.get=function(a){return null!=a?this._fieldsMap.get(a)||this._fieldsMap.get(a.toLowerCase().trim()):void 0};a.prototype.isDateField=function(a){return this._dateFieldsSet.has(this.get(a))};return a}()})},"esri/layers/support/PromiseQueue":function(){define(["require","exports","../../core/promiseUtils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._deferreds=[];this._values=[]}a.prototype.push=function(a){var e=this;return l.create(function(c,
d){e._deferreds.push({resolve:c,reject:d});e._values.push(a)})};a.prototype.unshift=function(a){var e=this;return l.create(function(c,d){e._deferreds.unshift({resolve:c,reject:d});e._values.unshift(a)})};Object.defineProperty(a.prototype,"length",{get:function(){return this._deferreds.length},enumerable:!0,configurable:!0});a.prototype.process=function(){if(0===this.length)return!1;this._deferreds.shift().resolve(this._values.shift());return!0};a.prototype.cancelAll=function(){for(var a=l.createAbortError(),
e=0,c=this._deferreds;e<c.length;e++)c[e].reject(a);this._deferreds.length=0;this._values.length=0};return a}();a.PromiseQueue=d})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/asyncUtils ../../core/maybe ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils @dojo/framework/shim/Promise".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a,
b){var c=a.geometry;a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=h.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:-1!==a.outFields.indexOf("*")?a.outFields=
"*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),delete a.source);if(a.timeExtent){c=a.timeExtent;
b=c.start;c=c.end;if(null!=b||null!=c)a.time=b===c?b:(null==b?"null":b)+","+(null==c?"null":c);delete a.timeExtent}return a}function n(a,b,f,d,h){void 0===d&&(d={});var n="string"===typeof a?c.urlToObject(a):a;a=b.geometry?[b.geometry]:[];d.responseType="pbf"===f?"array-buffer":"json";return k.safeCast(m.normalizeCentralMeridian(a,null,d)).then(function(a){a=a&&a[0];e.isSome(a)&&(b=b.clone(),b.geometry=a);a=p.mapParameters(l({},n.query,{f:f},h,u(b,h)));return g(n.path+"/query",l({},d,{query:a}))})}
Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=u;a.executeQuery=function(a,b,c){return n(a,b,"json",c)};a.executeQueryPBF=function(a,c,e,d){return n(a,c,"pbf",d).then(function(a){var c=function(b){a.data=b;return a};return e.useWorker?(null==r&&(r=new f.PBFWorker),r.parseFeatureQuery(a.data,e).then(function(a){return c(a)})):c(b.parsePBFFeatureQuery(a.data,e))})};a.executeQueryForIds=function(a,b,c){return n(a,b,"json",c,{returnIdsOnly:!0})};a.executeQueryForCount=
function(a,b,c){return n(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,c){return n(a,b,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(b.hasOwnProperty("extent"))return a;if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return a})};var r})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports",
"./pbfFeatureServiceParser"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.parsePBFFeatureQuery=function(a,d){if((a=l.parseFeatureQuery(a,d).queryResult.featureResult)&&a.features&&a.features.length&&a.objectIdFieldName){d=a.objectIdFieldName;for(var e=0,c=a.features;e<c.length;e++){var h=c[e];h.attributes&&(h.objectId=h.attributes[d])}}return a}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),
function(d,a,l,g,k,e,c){function h(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function m(a){for(var b={type:0>=p.length?null:p[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var c=a.getEnum();b.type=
c>=p.length?null:p[c];break;case 3:b.alias=a.getString();break;case 4:c=a.getEnum();c=c>=u.length?null:u[c];b.sqlType=c;break;default:a.skip()}return b}function b(a,b,c,f){for(var e=a.createFeature(b),d=0;c.next();)switch(c.tag()){case 1:var g=f[d++].name;e.attributes[g]=h(c.getMessage());break;case 2:for(var g=a,m=b,k=c.getMessage(),p=g.createGeometry(m),m=2+(m.hasZ?1:0)+(m.hasM?1:0);k.next();)switch(k.tag()){case 2:for(var n=k.getUInt32(),n=k.pos()+n,l=0;k.pos()<n;)g.addLength(p,k.getUInt32(),l++);
break;case 3:for(var n=k.getUInt32(),n=k.pos()+n,r=l=0;k.pos()<n;)g.addCoordinate(p,k.getSInt64(),r,l),l++,l===m&&(r++,l=0);break;default:k.skip()}e.geometry=p;break;case 4:g=a;k=c.getMessage();for(p=g.createPointGeometry(b);k.next();)switch(k.tag()){case 3:m=k.getUInt32();m=k.pos()+m;for(n=0;k.pos()<m;)g.addCoordinatePoint(p,k.getSInt64(),0,n++);break;default:k.skip()}e.centroid=p;break;default:c.skip()}return e}Object.defineProperty(a,"__esModule",{value:!0});var f=g.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
p="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),u="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
n=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(a,d){d=d&&"dehydrated"===d.type?new e.Context(d):new c.Context(d);try{var h=new k(new Uint8Array(a),new DataView(a));for(a={};h.next();)switch(h.tag()){case 2:for(var g=a,p=d,r=h.getMessage(),u={};r.next();)switch(r.tag()){case 1:var w=p,D=r.getMessage(),B=w.createFeatureResult();B.geometryType=0>=w.geometryTypes.length?null:w.geometryTypes[0];for(var E=!1;D.next();)switch(D.tag()){case 1:B.objectIdFieldName=D.getString();break;case 3:B.globalIdFieldName=
D.getString();break;case 4:B.geohashFieldName=D.getString();break;case 5:for(var F=D.getMessage(),H={};F.next();)switch(F.tag()){case 1:H.shapeAreaFieldName=F.getString();break;case 2:H.shapeLengthFieldName=F.getString();break;case 3:H.units=F.getString();break;default:F.skip()}B.geometryProperties=H;break;case 7:var G=D.getEnum();B.geometryType=G>=w.geometryTypes.length?null:w.geometryTypes[G];break;case 8:for(var J=D.getMessage(),K=w.createSpatialReference();J.next();)switch(J.tag()){case 1:K.wkid=
J.getUInt32();break;case 5:K.wkt=J.getString();break;default:J.skip()}B.spatialReference=K;break;case 10:B.hasZ=D.getBool();break;case 11:B.hasM=D.getBool();break;case 12:for(var I=D.getMessage(),M={originPosition:0>=n.length?null:n[0]};I.next();)switch(I.tag()){case 1:var O=I.getEnum();M.originPosition=O>=n.length?null:n[O];break;case 2:for(var Q=I.getMessage(),H=[0,0,0,0];Q.next();)switch(Q.tag()){case 1:H[0]=Q.getDouble();break;case 2:H[1]=Q.getDouble();break;case 4:H[2]=Q.getDouble();break;case 3:H[3]=
Q.getDouble();break;default:Q.skip()}M.scale=H;break;case 3:for(var P=I.getMessage(),H=[0,0,0,0];P.next();)switch(P.tag()){case 1:H[0]=P.getDouble();break;case 2:H[1]=P.getDouble();break;case 4:H[2]=P.getDouble();break;case 3:H[3]=P.getDouble();break;default:P.skip()}M.translate=H;break;default:I.skip()}B.transform=M;break;case 9:var S=D.getBool();B.exceededTransferLimit=S;break;case 13:w.addField(B,m(D.getMessage()));break;case 15:E||(w.prepareFeatures(B),E=!0);w.addFeature(B,b(w,B,D.getMessage(),
B.fields));break;default:D.skip()}w.finishFeatureResult(B);u.featureResult=B;break;default:r.skip()}g.queryResult=u;break;default:h.skip()}return a}catch(U){return h=new l("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:U}),f.error(h),{queryResult:{featureResult:d.createFeatureResult()}}}}})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/graphics/dehydratedFeatures ../../layers/support/Field".split(" "),
function(d,a,l,g,k,e,c){function h(a,b,c,f){return b}function m(a,b,c,f){switch(c){case 0:return u(a,b+f,0);case 1:return a.translate[1]-(b+f)*a.scale[1]}}function b(a,b,c,f){switch(c){case 0:return u(a,b+f,0);case 1:return a.translate[1]-(b+f)*a.scale[1];case 2:return u(a,b,2)}}function f(a,b,c,f){switch(c){case 0:return u(a,b+f,0);case 1:return a.translate[1]-(b+f)*a.scale[1];case 2:return u(a,b,3)}}function p(a,b,c,f){switch(c){case 0:return u(a,b+f,0);case 1:return a.translate[1]-(b+f)*a.scale[1];
case 2:return u(a,b,3);case 3:return u(a,b,3)}}function u(a,b,c){return a.translate[c]+b*a.scale[c]}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.options=a;this.geometryTypes=["point","multipoint","polyline","polygon"];this.previousCoordinate=[0,0];this.transform=null;this.applyTransform=h;this.lengths=[];this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;this.AttributesConstructor=function(){}}
a.prototype.createFeatureResult=function(){return new e.DehydratedFeatureSetClass};a.prototype.finishFeatureResult=function(a){this.options.applyTransform&&(a.transform=null);this.AttributesConstructor=function(){};this.coordinateBuffer=null;this.lengths.length=0};a.prototype.createSpatialReference=function(){return new k};a.prototype.addField=function(a,b){a.fields.push(c.fromJSON(b));var f=a.fields.map(function(a){return a.name});this.AttributesConstructor=function(){for(var a=0;a<f.length;a++)this[f[a]]=
null}};a.prototype.addFeature=function(a,b){var c=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(0<c)for(var f in b.attributes){var e=b.attributes[f];"string"===typeof e&&e.length>c&&(b.attributes[f]="")}a.features.push(b)};a.prototype.prepareFeatures=function(a){this.options.applyTransform&&a.transform&&(this.transform=a.transform,this.applyTransform=this.deriveApplyTransform(a));this.vertexDimension=2;a.hasZ&&this.vertexDimension++;a.hasM&&this.vertexDimension++;
switch(a.geometryType){case "point":this.addCoordinate=this.addCoordinatePoint.bind(this);this.createGeometry=this.createPointGeometry.bind(this);break;case "polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this);this.createGeometry=this.createPolygonGeometry.bind(this);break;case "polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this);this.createGeometry=this.createPolylineGeometry.bind(this);break;case "multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this);
this.createGeometry=this.createMultipointGeometry.bind(this);break;default:g.neverReached(a.geometryType)}};a.prototype.createFeature=function(a){this.currentLengthIndex=this.lengths.length=0;this.previousCoordinate[0]=0;this.previousCoordinate[1]=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;return new e.DehydratedFeatureClass(l.generateUID(),null,new this.AttributesConstructor)};a.prototype.addLength=function(a,b,c){0===this.lengths.length&&(this.toAddInCurrentPath=b);this.lengths.push(b)};
a.prototype.createPointGeometry=function(a){a={type:"point",x:0,y:0,spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM};a.hasZ&&(a.z=0);a.hasM&&(a.m=0);return a};a.prototype.addCoordinatePoint=function(a,b,c,f){b=this.applyTransform(this.transform,b,f,0);switch(f){case 0:a.x=b;break;case 1:a.y=b;break;case 2:a.hasZ?a.z=b:a.m=b;break;case 3:a.m=b}};a.prototype.transformPathLikeValue=function(a,b){var c=0;1>=b&&(c=this.previousCoordinate[b],this.previousCoordinate[b]+=a);return this.applyTransform(this.transform,
a,b,c)};a.prototype.addCoordinatePolyline=function(a,b,c,f){this.dehydratedAddPointsCoordinate(a.paths,b,c,f)};a.prototype.addCoordinatePolygon=function(a,b,c,f){this.dehydratedAddPointsCoordinate(a.rings,b,c,f)};a.prototype.addCoordinateMultipoint=function(a,b,c){0===c&&a.points.push([]);b=this.transformPathLikeValue(b,c);a.points[a.points.length-1].push(b)};a.prototype.createPolygonGeometry=function(a){return{type:"polygon",rings:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};
a.prototype.createPolylineGeometry=function(a){return{type:"polyline",paths:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createMultipointGeometry=function(a){return{type:"multipoint",points:[],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.dehydratedAddPointsCoordinate=function(a,b,c,f){null===this.coordinateBuffer&&(c=this.lengths.reduce(function(a,b){return a+b},0),this.coordinateBuffer=new Float64Array(c*this.vertexDimension));
0===f&&0===this.toAddInCurrentPath--&&(a.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);b=this.transformPathLikeValue(b,f);a=a[a.length-1];0===f&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension));this.coordinateBuffer[this.coordinateBufferPtr++]=b};a.prototype.deriveApplyTransform=function(a){var c=a.hasZ;a=a.hasM;return c&&a?p:c?
b:a?f:m};return a}();a.Context=d})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n){d=function(a){function d(b,c,f,e){b=a.call(this,b,c,f,e)||this;b.layer=null;b.popupTemplate=null;
b.sourceLayer=null;Object.defineProperty(b,"uid",{value:m.generateUID()});return b}g(d,a);m=d;d.prototype.normalizeCtorArgs=function(a,b,c,f){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:f}};Object.defineProperty(d.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"geometry",{set:function(a){var b=this._get("geometry");
b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});d.prototype.getEffectivePopupTemplate=
function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:this.sourceLayer?this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:a&&f.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null};d.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};d.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c=
{},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a))};d.prototype.toJSON=function(){return{geometry:f.isSome(this.geometry)?this.geometry.toJSON():null,symbol:f.isSome(this.symbol)?this.symbol.toJSON():null,attributes:l({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};d.prototype.clone=function(){return new m({attributes:b.clone(this.attributes),geometry:b.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,
symbol:b.clone(this.symbol),visible:this.visible})};d.prototype._notifyLayer=function(a,b,c,f){this.layer&&this.layer.graphicChanged&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=f),this.layer.graphicChanged(b))};var m;k([p.property({value:null})],d.prototype,"attributes",null);k([p.property({value:null,types:e.geometryTypes,json:{read:u.fromJSON}})],d.prototype,"geometry",null);k([p.property()],d.prototype,"layer",void 0);k([p.property({type:c})],d.prototype,
"popupTemplate",void 0);k([p.property()],d.prototype,"sourceLayer",void 0);k([p.property({value:null,types:h.symbolTypes,json:{read:n.read}})],d.prototype,"symbol",null);k([p.property({type:Boolean,value:!0,set:function(a){}})],d.prototype,"visible",null);return d=m=k([p.subclass("esri.Graphic")],d)}(p.declared(m));var r=0;(function(a){a.generateUID=function(){return r++}})(d||(d={}));return d})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/tsSupport/generatorHelper ./core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F,H,G,J,K,I){var M=b.ofType({key:"type",defaultKeyValue:"button",base:J,typeMap:{button:K,toggle:I}}),O={base:B,key:"type",typeMap:{media:F,text:H,attachments:D,fields:E}},Q=u.getLogger("esri.PopupTemplate");return function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.lastEditInfoEnabled=!0;b.outFields=null;b.overwriteActions=!1;b.title=
"";b.relatedRecordsInfo=null;return b}g(f,a);d=f;f.prototype.castContent=function(a){if(Array.isArray(a))return a.map(function(a){return w.ensureOneOfType(O,a)});if("string"===typeof a||"function"===typeof a||a instanceof HTMLElement||n.isThenable(a))return a;Q.error("content error","unsupported content value",{value:a});return null};f.prototype.readContent=function(a,b){var c=b.description,f=b.mediaInfos;a=b.popupElements;b=b.showAttachments;if(Array.isArray(a)&&0<a.length)return a.map(function(a){if("media"===
a.type)return!a.mediaInfos&&f&&(a.mediaInfos=f),F.fromJSON(a);if("text"===a.type)return!a.text&&c&&(a.text=c),H.fromJSON(a);if("attachments"===a.type)return D.fromJSON(a);if("fields"===a.type)return E.fromJSON(a)}).filter(Boolean);a=[];c?a.push(new H({text:c})):a.push(new E);Array.isArray(f)&&f.length&&a.push(F.fromJSON({mediaInfos:f}));b&&a.push(D.fromJSON({displayType:"list"}));return a.length?a:c};f.prototype.writeContent=function(a,b){"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=
a.map(function(a){return a&&a.toJSON()}),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description||(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=p.clone(a.mediaInfos)),delete a.mediaInfos):b.showAttachments=!0}))};f.prototype.writeLayerOptions=function(a,b){b.layerOptions=!a||null===a.showNoDataRecords&&null===a.returnTopmostRaster?null:a.toJSON()};f.prototype.writeTitle=function(a,b){b.title=
a||""};f.prototype.clone=function(){var a=this.actions,a=a?p.clone(a.toArray()):[];return new d({actions:a,content:Array.isArray(this.content)?p.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?p.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?p.clone(this.fieldInfos):null,layerOptions:this.layerOptions?p.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?p.clone(this.outFields):
null,overwriteActions:this.overwriteActions,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?p.clone(this.relatedRecordsInfo):null})};f.prototype.collectRequiredFields=function(a,b){return c(this,void 0,void 0,function(){return e(this,function(c){switch(c.label){case 0:return[4,this._collectExpressionInfoFields(a,b,this.expressionInfos)];case 1:return c.sent(),t.collectFields(a,b,(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content))),
[2]}})})};f.prototype.getRequiredFields=function(a){return c(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:return b=new m.default,[4,this.collectRequiredFields(b,a)];case 1:return c.sent(),[2,h.from(b).sort()]}})})};f.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,
c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};f.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},f=c.fields,e=void 0===f?[]:f,f=c.normalizeField,d=c.tooltipField,h=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(h),this._extractFieldNames(c),e);f&&a.push(f);d&&a.push(d);return a};f.prototype._getContentFields=function(a){var b=this;return"string"===
typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};f.prototype._collectExpressionInfoFields=function(a,b,f){return c(this,void 0,void 0,function(){return e(this,function(c){switch(c.label){case 0:return f?[4,n.all(f.map(function(c){return t.collectArcadeFieldNames(a,b,c.expression)}))]:[2];case 1:return c.sent(),[2]}})})};f.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?
!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};f.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};f.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};
f.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):[]};f.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var d;k([r.property({type:M})],f.prototype,"actions",void 0);k([r.property()],
f.prototype,"content",void 0);k([r.cast("content")],f.prototype,"castContent",null);k([r.reader("content",["description","popupElements","mediaInfos","showAttachments"])],f.prototype,"readContent",null);k([r.writer("content",{popupElements:{type:b.ofType(y.types)},showAttachments:{type:Boolean},mediaInfos:{type:b.ofType(G.types)},description:{type:String}})],f.prototype,"writeContent",null);k([r.property({type:[x],json:{write:!0}})],f.prototype,"expressionInfos",void 0);k([r.property({type:[A],json:{write:!0}})],
f.prototype,"fieldInfos",void 0);k([r.property({type:z})],f.prototype,"layerOptions",void 0);k([r.writer("layerOptions")],f.prototype,"writeLayerOptions",null);k([r.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],f.prototype,"lastEditInfoEnabled",void 0);k([r.property()],f.prototype,"outFields",void 0);k([r.property()],f.prototype,"overwriteActions",void 0);k([r.property({json:{type:String}})],f.prototype,"title",void 0);k([r.writer("title")],
f.prototype,"writeTitle",null);k([r.property({type:C,json:{write:!0}})],f.prototype,"relatedRecordsInfo",void 0);return f=d=k([r.subclass("esri.PopupTemplate")],f)}(r.declared(f))})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../core/Error ../../core/object ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a,b,c){if(a)for(var f=0;f<a.length;f++){var e=a[f],d=m.getDeepValue(e,b);(d=d&&"function"!==typeof d&&t(c,d))&&m.setDeepValue(e,d.name,b)}}function n(a,b){if(!a||!b)return[];O.clear();r(O,a,b);return e.from(O).sort()}function r(a,b,c){if(c)if(b&&b.length)if(e.includes(c,"*"))for(c=0;c<b.length;c++)a.add(b[c].name);else for(var f=0;f<c.length;f++)d=c[f],w(a,b,d);else if(e.includes(c,"*"))a.clear(),a.add("*");else for(b=0;b<c.length;b++){var d=c[b];a.add(d)}}
function w(a,b,c){b&&b.length?(b=t(b,c))&&a.add(b.name):"string"===typeof c&&a.add(c)}function t(a,b){if("string"!==typeof b)return null;if(null!=a){b=b.toLowerCase();for(var c=0;c<a.length;c++){var f=a[c];if(f&&f.name.toLowerCase()===b)return f}}return null}function y(a,b,c){return k(this,void 0,void 0,function(){var f,e,d,h,m;return g(this,function(g){switch(g.label){case 0:return c?[4,p.loadArcade()]:[2];case 1:f=g.sent().arcadeUtils;e=f.extractFieldNames(c);d=0;for(h=e;d<h.length;d++)m=h[d],w(a,
b,m);return[2]}})})}function x(a,b){return k(this,void 0,void 0,function(){var c,f;return g(this,function(e){if(!b)return[2];c=b.fields;return(f=m.getDeepValue("elevationInfo.featureExpressionInfo",b))?[2,f.collectRequiredFields(a,c)]:[2]})})}function A(a,c){return k(this,void 0,void 0,function(){var f,e;return g(this,function(d){switch(d.label){case 0:return f=c.labelingInfo,e=c.fields,f&&f.length?[4,b.all(f.map(function(b){return z(a,e,b)}))]:[2];case 1:return d.sent(),[2]}})})}function z(a,b,c){return k(this,
void 0,void 0,function(){var f,e,d,h,m;return g(this,function(g){switch(g.label){case 0:if(!c)return[2];f=c.getLabelExpression();e=c.where;return"arcade"!==f.type?[3,2]:[4,y(a,b,f.expression)];case 1:return g.sent(),[3,3];case 2:(d=f.expression.match(/{[^}]*}/g))&&d.forEach(function(c){w(a,b,c.slice(1,-1))}),g.label=3;case 3:return h=/['"]+/g,e&&(m=e.split(" "),3===m.length&&w(a,b,m[0].replace(h,"")),7===m.length&&(w(a,b,m[0].replace(h,"")),w(a,b,m[4].replace(h,"")))),[2]}})})}function C(a){return"number"===
typeof a&&!isNaN(a)&&isFinite(a)}function D(a){return null===a||C(a)}function B(a){return null===a||Q(a)}function E(a){return null!=a&&"string"===typeof a}function F(a){return null===a||E(a)}function H(a){return!0}function G(a,b){var c;switch(a.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":c=a.nullable?B:Q;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":c=
a.nullable?D:C;break;case "string":case "esriFieldTypeString":c=a.nullable?F:E;break;default:c=H}return 1===arguments.length?c:c(b)}function J(a){return null!=a&&P.has(a.type)}function K(a,b){return a.nullable&&null===b?null:J(a)&&!I(a.type,b)?S.OUT_OF_RANGE:G(a,b)?a.domain?f.validateDomainValue(a.domain,b):null:U.INVALID_TYPE}function I(a,b){return(a="string"===typeof a?M(a):a)?a.isInteger?Q(b)&&b>=a.min&&b<=a.max:b>=a.min&&b<=a.max:!1}function M(b){switch(b){case "esriFieldTypeSmallInteger":case "small-integer":return a.smallIntegerRange;
case "esriFieldTypeInteger":case "integer":return a.integerRange;case "esriFieldTypeSingle":case "single":return a.singleRange;case "esriFieldTypeDouble":case "double":return a.doubleRange}}Object.defineProperty(a,"__esModule",{value:!0});a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");a.visualVariableFields=["field","normalizationField"];a.fixRendererFields=
function(b,c){if(null!=b&&null!=c){var f=0;for(b=Array.isArray(b)?b:[b];f<b.length;f++){var e=b[f];u(a.rendererFields,e,c);if("visualVariables"in e&&e.visualVariables)for(var d=0,e=e.visualVariables;d<e.length;d++)u(a.visualVariableFields,e[d],c)}}};a.fixTimeInfoFields=function(a,b){if(null!=a&&null!=b)if("startField"in a){var c=t(b,a.startField);b=t(b,a.endField);a.startField=c&&c.name||null;a.endField=b&&b.name||null}else c=t(b,a.startTimeField),b=t(b,a.endTimeField),a.startTimeField=c&&c.name||
null,a.endTimeField=b&&b.name||null};var O=new c.default;a.fixFields=n;a.collectFields=r;a.collectField=w;a.unpackFieldNames=function(a,b){return b&&a?e.includes(b,"*")?a.map(function(a){return a.name}):b:[]};a.packFields=function(a,b,c){void 0===c&&(c=1);if(!b||!a)return[];if(e.includes(b,"*"))return["*"];b=n(a,b);return b.length/a.length>=c?["*"]:b};a.getField=t;a.hasField=function(a,b){if(!a||!b||"string"!==typeof b)return!1;b=b.toLowerCase();for(var c=0;c<a.length;c++){var f=a[c];if(f&&f.name.toLowerCase()===
b)return!0}return!1};a.collectArcadeFieldNames=y;a.getElevationFields=function(a){return k(this,void 0,void 0,function(){var b;return g(this,function(f){switch(f.label){case 0:if(!a)return[2,[]];b=new c.default;return[4,x(b,a)];case 1:return f.sent(),[2,e.from(b).sort()]}})})};a.collectElevationFields=x;a.collectFilterFields=function(a,c,f){return k(this,void 0,void 0,function(){var e,m;return g(this,function(g){switch(g.label){case 0:if(!c||!f||!(f.where&&"1\x3d1"!==f.where||f.timeExtent))return[2];
c.timeInfo&&f.timeExtent&&r(a,c.fields,[c.timeInfo.startField,c.timeInfo.endField]);return f.where?[4,b.create(function(a){d(["../../core/sql/WhereClause"],a)})]:[3,2];case 1:e=g.sent();m=e.WhereClause.create(f.where,c.fieldsIndex);if(!m.isStandardized)return[2,b.reject(new h("fieldUtils:collectFilterFields","Where clause is not standardized"))];r(a,c.fields,m.fieldNames);g.label=2;case 2:return[2]}})})};a.getTimeFields=function(a){return k(this,void 0,void 0,function(){var b;return g(this,function(c){return a?
(b="timeInfo"in a&&a.timeInfo)?[2,n(a.fields,[a.trackIdField,b.startField,b.endField])]:[2,[]]:[2,[]]})})};a.getFeatureEditFields=function(a){if(!a)return[];var b="editFieldsInfo"in a&&a.editFieldsInfo;return b?n(a.fields,[b&&b.creatorField,b&&b.creationDateField,b&&b.editorField,b&&b.editDateField]):[]};a.getFeatureGeometryFields=function(a){if(!a)return[];var b="geometryProperties"in a&&a.geometryProperties;return b?n(a.fields,[b&&b.shapeAreaFieldName,b&&b.shapeLengthFieldName]):[]};a.getLabelingFields=
function(a){return k(this,void 0,void 0,function(){var b;return g(this,function(f){switch(f.label){case 0:if(!a)return[2,[]];b=new c.default;return[4,A(b,a)];case 1:return f.sent(),[2,e.from(b).sort()]}})})};a.collectLabelingFields=A;a.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&G(a,b))return b;if(a.nullable)return null};var Q=function(){return"isInteger"in Number?Number.isInteger:function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}}();a.isValueMatchingFieldType=
G;a.numericTypes=["integer","small-integer","single","double"];var P=new c.default(a.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));a.isNumericField=J;a.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};a.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};a.isValidFieldValue=function(a,b){return null===K(a,b)};var S;(S=a.NumericRangeValidationError||
(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var U;(U=a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";a.sanitizeNullFieldValue=function(a){return null==a||"number"===typeof a&&isNaN(a)?null:a};a.validateFieldValue=K;a.isNumberInRange=I;a.getFieldRange=function(a){var b=f.getDomainRange(a.domain);if(b)return b;if(J(a))return M(a.type)};a.getNumericTypeForValue=function(b){if(!C(b))return null;if(Q(b)){if(b>=
a.smallIntegerRange.min&&b<=a.smallIntegerRange.max)return"esriFieldTypeSmallInteger";if(b>=a.integerRange.min&&b<=a.integerRange.max)return"esriFieldTypeInteger"}return b>=a.singleRange.min&&b<=a.singleRange.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.smallIntegerRange={min:-32768,max:32767,isInteger:!0};a.integerRange={min:-2147483648,max:2147483647,isInteger:!0};a.singleRange={min:-3.4E38,max:1.2E38,isInteger:!1};a.doubleRange={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.validationErrorToString=
function(a,b,c){switch(a){case f.DomainValidationError.INVALID_CODED_VALUE:return"Value "+c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case f.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+b.name+", domain: "+JSON.stringify(b.domain);case U.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+b.name+", type: "+b.type+", nullable: "+b.nullable;case S.OUT_OF_RANGE:return a=
M(b.type),"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+b.type+", value range is "+a.min+" to "+a.max}};a.featureHasFields=function(a,b){if(!b||!b.attributes||!a)return!1;b=b.attributes;for(var c=0;c<a.length;c++)if(!(a[c]in b))return!1;return!0}})},"esri/layers/support/domains":function(){define("require exports ../../core/compilerUtils ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(d,a,l,g,k,e,c){function h(a,c){switch(a.type){case "range":var b=
"range"in a?a.range[1]:a.maxValue;if(+c<("range"in a?a.range[0]:a.minValue)||+c>b)return m.VALUE_OUT_OF_RANGE;break;case "coded-value":case "codedValue":if(null==a.codedValues||a.codedValues.every(function(a){return null==a||a.code!==c}))return m.INVALID_CODED_VALUE}return null}Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=g;a.DomainBase=k;a.InheritedDomain=e;a.RangeDomain=c;var m;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(m=a.DomainValidationError||(a.DomainValidationError={}));a.isValidDomainValue=function(a,c){return null===h(a,c)};a.validateDomainValue=h;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain,inherited:a.InheritedDomain}};a.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};a.fromJSON=function(b){if(!b||!b.type)return null;
switch(b.type){case "range":return a.RangeDomain.fromJSON(b);case "codedValue":return a.CodedValueDomain.fromJSON(b);case "inherited":return a.InheritedDomain.fromJSON(b);default:l.neverReached(b)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./CodedValue ./Domain".split(" "),function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=
a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}l(b,a);f=b;b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};b.prototype.clone=function(){return new f({codedValues:k.clone(this.codedValues),name:this.name})};var f;g([e.property({type:[c.default],json:{write:!0}})],b.prototype,"codedValues",void 0);g([e.enumeration.serializable()({codedValue:"coded-value"})],b.prototype,
"type",void 0);return b=f=g([e.subclass("esri.layers.support.CodedValueDomain")],b)}(e.declared(h))})},"esri/layers/support/CodedValue":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(b){b=a.call(this,b)||this;b.name=null;b.code=null;return b}g(c,a);d=c;c.prototype.clone=
function(){return new d({name:this.name,code:this.code})};var d;l([e.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);l([e.property({type:[String,Number],json:{write:!0}})],c.prototype,"code",void 0);return c=d=l([e.subclass("esri.layers.support.CodedValue")],c)}(e.declared(k));a.CodedValue=d;a.default=d})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c){var h=new k.default({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function b(b){b=a.call(this,b)||this;b.name=null;b.type=null;return b}l(b,a);g([c.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);g([c.enumeration.serializable()(h)],b.prototype,"type",void 0);return b=g([c.subclass("esri.layers.support.Domain")],b)}(c.declared(e))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this,b)||this;b.type="inherited";return b}l(c,a);e=c;c.prototype.clone=function(){return new e};var e;g([k.enumeration.serializable()({inherited:"inherited"})],c.prototype,"type",void 0);return c=e=g([k.subclass("esri.layers.support.InheritedDomain")],c)}(k.declared(e))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}l(c,a);e=c;c.prototype.clone=function(){return new e({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var e;g([k.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(a,c){return c.range&&c.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(a,
c,e){c[e]=[this.minValue||0,a]}}}})],c.prototype,"maxValue",void 0);g([k.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(a,c){return c.range&&c.range[0]}},write:{target:"range",writer:function(a,c,e){c[e]=[a,this.maxValue||0]}}}})],c.prototype,"minValue",void 0);g([k.enumeration.serializable()({range:"range"})],c.prototype,"type",void 0);return c=e=g([k.subclass("esri.layers.support.RangeDomain")],c)}(k.declared(e))})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../geometry ../core/promiseUtils".split(" "),
function(d,a,l,g,k,e,c){function h(){return g(this,void 0,void 0,function(){return l(this,function(a){m||(m=c.all([c.create(function(a){return d(["./arcadeUtils"],a)})]).then(function(a){a=a[0];return{arcade:a.arcade,arcadeUtils:a,Dictionary:a.Dictionary,Feature:a.arcadeFeature}}));return[2,m]})})}Object.defineProperty(a,"__esModule",{value:!0});var m;a.loadArcade=h;a.createLabelExpression=function(a,c,e){return b.create(a,c,e,["$feature"])};a.createVVExpression=function(a,c,e){return b.create(a,
c,e,["$feature","$view"])};a.createRendererExpression=function(a,c,e){return b.create(a,c,e,["$feature","$view"])};var b=function(){function a(a,b,c,f,e,d,h){this.evaluate=f;this._syntaxTree=c;this._arcade=a;this._arcadeDictionary=b;this._arcadeFeature=e;this._fields=d;this._spatialReference=h;this._referencesGeometry=a.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"$view.scale")}a.create=function(b,f,d,m,w){return g(this,void 0,void 0,
function(){var g,p,n,u,r,C,D,B,E,F,H,G,J,K;return l(this,function(l){switch(l.label){case 0:return[4,h()];case 1:return g=l.sent(),p=g.arcade,n=g.Feature,u=g.Dictionary,r=e.SpatialReference.fromJSON(f),C=p.parseScript(b,w),D=m.reduce(function(a,b){var c;return k({},a,(c={},c[b]=null,c))},{}),B=p.scriptUsesGeometryEngine(C)&&p.enableGeometrySupport(),E=p.scriptUsesFeatureSet(C)&&p.enableFeatureSetSupport(),F=p.scriptIsAsync(C)&&p.enableAsyncSupport(),H={vars:D,spatialReference:r,useAsync:!!F},G=new u,
G.immutable=!1,G.setField("scale",0),J=p.compileScript(C,H),K=function(a){"$view"in a&&a.$view&&(G.setField("scale",a.$view.scale),a.$view=G);return J({vars:a,spatialReference:r})},[4,c.all([B,E,F])];case 2:return l.sent(),[2,new a(p,u,C,K,new n,d,r)]}})})};a.prototype.repurposeFeature=function(a){a.geometry.spatialReference||(a.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(a.geometry,a.attributes,{fields:this._fields});return this._arcadeFeature};
a.prototype.createDictionary=function(){return new this._arcadeDictionary};a.prototype.referencesMember=function(a){return this._arcade.referencesMember(this._syntaxTree,a)};a.prototype.referencesFunction=function(a){return this._arcade.referencesFunction(this._syntaxTree,a)};a.prototype.referencesGeometry=function(){return this._referencesGeometry};a.prototype.referencesScale=function(){return this._referencesScale};a.prototype.extractFieldLiterals=function(a){return this._arcade.extractFieldLiterals(this._syntaxTree,
a)};return a}();a.default=b})},"esri/popup/content":function(){define("require exports ./content/AttachmentsContent ./content/Content ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});a.AttachmentsContent=l;a.BaseContent=g;a.FieldsContent=k;a.MediaContent=e;a.TextContent=c;a.isContent=function(c){return c instanceof a.BaseContent};a.types={base:null,key:"type",typeMap:{attachment:a.AttachmentsContent,
fields:a.FieldsContent,media:a.MediaContent,text:a.TextContent}}})},"esri/popup/content/AttachmentsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./Content".split(" "),function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.attachmentInfos=null;b.displayType=null;b.type="attachments";return b}l(b,a);f=b;b.prototype.clone=
function(){return new f({displayType:this.displayType,attachmentInfos:this.attachmentInfos?k.clone(this.attachmentInfos):null})};var f;g([e.property({type:[c]})],b.prototype,"attachmentInfos",void 0);g([e.property({type:["preview","list"],json:{write:!0}})],b.prototype,"displayType",void 0);g([e.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=f=g([e.subclass("esri.popup.content.AttachmentsContent")],b)}(e.declared(h))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./exifUtils".split(" "),
function(d,a,l,g,k,e,c,h){var m={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};return function(a){function b(b){b=a.call(this)||this;b.contentType=null;b.exifInfo=null;b.id=null;b.keywords=null;b.name=null;b.parentObjectId=null;b.size=null;b.url=null;return b}l(b,a);d=b;Object.defineProperty(b.prototype,
"orientationInfo",{get:function(){var a=h.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return m[a]||null},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,keywords:this.keywords,name:this.name,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var d;g([e.property({type:String})],b.prototype,"contentType",void 0);g([e.property()],b.prototype,"exifInfo",void 0);
g([e.property({readOnly:!0,dependsOn:["exifInfo"]})],b.prototype,"orientationInfo",null);g([e.property({type:c.Integer})],b.prototype,"id",void 0);g([e.property({type:String})],b.prototype,"keywords",void 0);g([e.property({type:String})],b.prototype,"name",void 0);g([e.property({json:{read:!1}})],b.prototype,"parentObjectId",void 0);g([e.property({type:c.Integer})],b.prototype,"size",void 0);g([e.property({json:{read:!1}})],b.prototype,"url",void 0);return b=d=g([e.subclass("esri.layers.support.AttachmentInfo")],
b)}(e.declared(k))})},"esri/layers/support/exifUtils":function(){define(["require","exports","../../core/arrayUtils"],function(d,a,l){function g(a){var e=a.tagName;a=a.tags;return a&&e?(a=l.find(a,function(a){return a.name===e}))&&a.value||null:null}Object.defineProperty(a,"__esModule",{value:!0});a.getExifValue=function(a){var e=a.exifInfo,c=a.exifName;a=a.tagName;return e&&c&&a?(e=l.find(e,function(a){return a.name===c}))?g({tagName:a,tags:e.tags}):null:null}})},"esri/popup/content/Content":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(c){c=a.call(this)||this;c.type=null;return c}l(c,a);g([e.property({type:["attachments","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=g([e.subclass("esri.popup.content.Content")],c)}(e.declared(k))})},"esri/popup/content/FieldsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../FieldInfo ./Content".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.fieldInfos=null;b.type="fields";return b}l(b,a);f=b;b.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a&&a.map(function(a){return a.toJSON()})};b.prototype.clone=function(){return new f({fieldInfos:Array.isArray(this.fieldInfos)?k.clone(this.fieldInfos):null})};var f;g([e.property({type:[c]})],b.prototype,"fieldInfos",void 0);g([e.writer("fieldInfos")],b.prototype,"writeFieldInfos",null);g([e.property({type:["fields"],
readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=f=g([e.subclass("esri.popup.content.FieldsContent")],b)}(e.declared(h))})},"esri/popup/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/FieldInfoFormat".split(" "),function(d,a,l,g,k,e,c,h,m){var b=new k.default({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});
return function(a){function f(b){b=a.call(this)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}l(f,a);e=f;f.prototype.writeStringFieldOption=function(a,c){c.stringFieldOption=b.toJSON(a)};f.prototype.readStringFieldOption=function(a){if(a)return b.fromJSON(a)};f.prototype.clone=function(){return new e({fieldName:this.fieldName,format:this.format?c.clone(this.format):null,isEditable:this.isEditable,
label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})};var e;g([h.property({type:String,json:{write:!0}})],f.prototype,"fieldName",void 0);g([h.property({type:m,json:{write:!0}})],f.prototype,"format",void 0);g([h.property({type:Boolean,json:{write:!0,default:!1}})],f.prototype,"isEditable",void 0);g([h.property({type:String,json:{write:!0}})],f.prototype,"label",void 0);g([h.property({type:b.apiValues,json:{write:!0,
default:"text-box",type:b.jsonValues}})],f.prototype,"stringFieldOption",void 0);g([h.writer("stringFieldOption")],f.prototype,"writeStringFieldOption",null);g([h.reader("stringFieldOption")],f.prototype,"readStringFieldOption",null);g([h.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],f.prototype,"statisticType",void 0);g([h.property({type:String,json:{write:!0}})],f.prototype,"tooltip",void 0);g([h.property({type:Boolean,json:{write:!0}})],f.prototype,"visible",void 0);
return f=e=g([h.subclass("esri.popup.FieldInfo")],f)}(h.declared(e))})},"esri/popup/support/FieldInfoFormat":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../intl/date ../../intl/number".split(" "),function(d,a,l,g,k,e,c,h,m,b){return function(a){function f(b){b=a.call(this)||this;b.dateFormat=null;b.digitSeparator=
!1;b.places=null;return b}l(f,a);e=f;f.prototype.clone=function(){return new e({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};f.prototype.format=function(a){return this.dateFormat?m.formatDate(a,m.convertDateFormatToIntlOptions(this.dateFormat)):b.formatNumber(a,b.convertNumberFormatToIntlOptions(this))};var e;g([c.enumeration.serializable()(k.dictionary)],f.prototype,"dateFormat",void 0);g([c.property({type:Boolean,json:{write:!0}})],f.prototype,"digitSeparator",
void 0);g([c.property({type:h.Integer,json:{write:!0}})],f.prototype,"places",void 0);return f=e=g([c.subclass("esri.popup.support.FieldInfoFormat")],f)}(c.declared(e))})},"esri/core/date":function(){define(["require","exports","./jsonMap"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.formats={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",
"short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')","day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};a.dictionary=l.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",
shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);a.getFormat=function(d){return a.formats[d]}})},"esri/intl/date":function(){define("require exports ../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../core/jsonMap ./locale".split(" "),function(d,a,l,g,k,e){function c(a){a=a||w;if(!r.has(a)){var b=e.getLocale(),b=n[e.getLocale()]||b;r.set(a,new Intl.DateTimeFormat(b,a))}return r.get(a)}Object.defineProperty(a,
"__esModule",{value:!0});d={year:"numeric",month:"numeric",day:"numeric"};var h={year:"numeric",month:"long",day:"numeric"},m={year:"numeric",month:"short",day:"numeric"},b={year:"numeric",month:"long",weekday:"long",day:"numeric"},f={hour:"numeric",minute:"numeric"},p=l({},f,{second:"numeric"}),u={"short-date":d,"short-date-short-time":l({},d,f),"short-date-short-time-24":l({},d,f,{hour12:!1}),"short-date-long-time":l({},d,p),"short-date-long-time-24":l({},d,p,{hour12:!1}),"short-date-le":d,"short-date-le-short-time":l({},
d,f),"short-date-le-short-time-24":l({},d,f,{hour12:!1}),"short-date-le-long-time":l({},d,p),"short-date-le-long-time-24":l({},d,p,{hour12:!1}),"long-month-day-year":h,"long-month-day-year-short-time":l({},h,f),"long-month-day-year-short-time-24":l({},h,f,{hour12:!1}),"long-month-day-year-long-time":l({},h,p),"long-month-day-year-long-time-24":l({},h,p,{hour12:!1}),"day-short-month-year":m,"day-short-month-year-short-time":l({},m,f),"day-short-month-year-short-time-24":l({},m,f,{hour12:!1}),"day-short-month-year-long-time":l({},
m,p),"day-short-month-year-long-time-24":l({},m,p,{hour12:!1}),"long-date":b,"long-date-short-time":l({},b,f),"long-date-short-time-24":l({},b,f,{hour12:!1}),"long-date-long-time":l({},b,p),"long-date-long-time-24":l({},b,p,{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":f,"long-time":p};a.dictionary=k.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",
shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",
longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a.dateFormats=a.dictionary.apiValues;a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);var n={ar:"ar-u-nu-latn-ca-gregory"},r=new g.default,w=u["short-date-short-time"];e.onLocaleChange(function(){r=new g.default;w=u["short-date-short-time"]});a.getDateTimeFormatter=c;a.convertDateFormatToIntlOptions=function(a){return u[a]||null};a.formatDate=function(a,b){return c(b).format(a)}})},
"@dojo/framework/shim/WeakMap":function(){(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ../has/has ./Symbol".split(" "),d)})(function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=d("tslib"),g=d("./global"),k=d("./iterator"),e=d("../has/has");d("./Symbol");a.WeakMap=g.default.WeakMap;if(!e.default("es6-weakmap")){var c=
{},h=function(){var a=Math.floor(Date.now()%1E8);return function(){return"__wm"+Math.floor(1E8*Math.random())+(a++ +"__")}}();a.WeakMap=function(){function a(a){this[Symbol.toStringTag]="WeakMap";this._name=h();this._frozenEntries=[];if(a)if(k.isArrayLike(a))for(var b=0;b<a.length;b++){var c=a[b];this.set(c[0],c[1])}else try{for(b=l.__values(a),c=b.next();!c.done;c=b.next()){var e=l.__read(c.value,2);this.set(e[0],e[1])}}catch(w){d={error:w}}finally{try{c&&!c.done&&(g=b.return)&&g.call(b)}finally{if(d)throw d.error;
}}var d,g}a.prototype._getFrozenEntryIndex=function(a){for(var b=0;b<this._frozenEntries.length;b++)if(this._frozenEntries[b].key===a)return b;return-1};a.prototype.delete=function(a){if(void 0===a||null===a)return!1;var b=a[this._name];if(b&&b.key===a&&b.value!==c)return b.value=c,!0;a=this._getFrozenEntryIndex(a);return 0<=a?(this._frozenEntries.splice(a,1),!0):!1};a.prototype.get=function(a){if(void 0!==a&&null!==a){var b=a[this._name];if(b&&b.key===a&&b.value!==c)return b.value;a=this._getFrozenEntryIndex(a);
if(0<=a)return this._frozenEntries[a].value}};a.prototype.has=function(a){if(void 0===a||null===a)return!1;var b=a[this._name];return b&&b.key===a&&b.value!==c||0<=this._getFrozenEntryIndex(a)?!0:!1};a.prototype.set=function(a,c){if(!a||"object"!==typeof a&&"function"!==typeof a)throw new TypeError("Invalid value used as weak map key");var b=a[this._name];b&&b.key===a||(b=Object.create(null,{key:{value:a}}),Object.isFrozen(a)?this._frozenEntries.push(b):Object.defineProperty(a,this._name,{value:b}));
b.value=c;return this};return a}()}a.default=a.WeakMap})},"esri/intl/locale":function(){define(["require","exports","dojo/_base/kernel"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var g=l.locale;a.getLocale=function(){return g};a.setLocale=function(a){g=a;k.slice().forEach(function(c){c.call(null,a)})};var k=[];a.onLocaleChange=function(a){k.push(a);return{remove:function(){k.splice(k.indexOf(a),1)}}}})},"esri/intl/number":function(){define(["require","exports","../core/tsSupport/assignHelper",
"@dojo/framework/shim/WeakMap","./locale"],function(d,a,l,g,k){function e(a){var b=a||m;if(!h.has(b)){var e=k.getLocale(),e=c[k.getLocale()]||e;h.set(b,new Intl.NumberFormat(e,a))}return h.get(b)}Object.defineProperty(a,"__esModule",{value:!0});var c={ar:"ar-u-nu-arab"},h=new g.default,m={};k.onLocaleChange(function(){h=new g.default;m={}});a.getFormatter=e;a.convertNumberFormatToIntlOptions=function(a){void 0===a&&(a={});var b={};null!=a.digitSeparator&&(b.useGrouping=a.digitSeparator);null!=a.places&&
(b.minimumFractionDigits=b.maximumFractionDigits=a.places);return b};a.formatNumber=function(a,c){return e(c).format(a)}})},"esri/popup/content/MediaContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),function(d,a,l,g,k,e,c,h,m,b,
f,p,u){return function(a){function d(b){b=a.call(this)||this;b.mediaInfos=null;b.type="media";return b}l(d,a);m=d;d.prototype.readMediaInfos=function(a){return a&&a.map(function(a){if("image"===a.type)return b.fromJSON(a);if("barchart"===a.type)return c.fromJSON(a);if("columnchart"===a.type)return h.fromJSON(a);if("linechart"===a.type)return f.fromJSON(a);if("piechart"===a.type)return p.fromJSON(a)}).filter(Boolean)};d.prototype.writeMediaInfos=function(a,b){b.mediaInfos=a&&a.map(function(a){return a.toJSON()})};
d.prototype.clone=function(){return new m({mediaInfos:this.mediaInfos?k.clone(this.mediaInfos):null})};var m;g([e.property({types:[u.types]})],d.prototype,"mediaInfos",void 0);g([e.reader("mediaInfos")],d.prototype,"readMediaInfos",null);g([e.writer("mediaInfos")],d.prototype,"writeMediaInfos",null);g([e.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);return d=m=g([e.subclass("esri.popup.content.MediaContent")],d)}(e.declared(m))})},"esri/popup/content/BarChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.type="bar-chart";return b}l(e,a);b=e;e.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;g([k.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:c.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=b=g([k.subclass("esri.popup.content.BarChartMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./MediaInfo ../support/ChartMediaInfoValue".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.type=null;b.value=null;return b}l(e,a);g([k.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);g([k.property({type:c,json:{write:!0}})],e.prototype,"value",void 0);return e=g([k.subclass("esri.popup.content.mixins.ChartMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/mixins/MediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(c){c=a.call(this)||this;c.caption="";c.title="";c.type=null;return c}l(c,a);g([e.property({type:String,json:{write:!0}})],c.prototype,"caption",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);g([e.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=g([e.subclass("esri.popup.content.mixins.MediaInfo")],c)}(e.declared(k))})},
"esri/popup/content/support/ChartMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ./ChartMediaInfoValueSeries".split(" "),function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.fields=[];b.normalizeField=null;b.series=[];b.tooltipField=null;return b}l(b,a);f=b;b.prototype.clone=function(){return new f({fields:e.clone(this.fields),
normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var f;g([c.property({type:[String],json:{write:!0}})],b.prototype,"fields",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"normalizeField",void 0);g([c.property({type:[h],json:{read:!1}})],b.prototype,"series",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"tooltipField",void 0);return b=f=g([c.subclass("esri.popup.content.support.ChartMediaInfoValue")],b)}(c.declared(k))})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.tooltip=null;b.x=null;b.y=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({tooltip:this.tooltip,x:this.x,y:this.y})};var d;g([e.property()],c.prototype,"tooltip",void 0);g([e.property()],c.prototype,"x",void 0);g([e.property()],c.prototype,"y",void 0);return c=d=g([e.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],c)}(e.declared(k))})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["require",
"exports","../../../core/jsonMap"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.chartTypeKebabDict=l.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(d,a,
l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.type="column-chart";return b}l(e,a);b=e;e.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;g([k.property({type:["column-chart"],readOnly:!0,json:{read:!1,write:c.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=b=g([k.subclass("esri.popup.content.ColumnChartMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/ImageMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.refreshInterval=null;b.type="image";b.value=null;return b}l(e,a);b=e;e.prototype.clone=function(){return new b({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var b;g([k.property({type:Number,json:{write:!0}})],e.prototype,"refreshInterval",void 0);g([k.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);g([k.property({type:c,
json:{write:!0}})],e.prototype,"value",void 0);return e=b=g([k.subclass("esri.popup.content.ImageMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.linkURL=null;b.sourceURL=null;return b}l(c,a);
d=c;c.prototype.clone=function(){return new d({linkURL:this.linkURL,sourceURL:this.sourceURL})};var d;g([e.property({type:String,json:{write:!0}})],c.prototype,"linkURL",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"sourceURL",void 0);return c=d=g([e.subclass("esri.popup.content.support.ImageMediaInfoValue")],c)}(e.declared(k))})},"esri/popup/content/LineChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.type="line-chart";return b}l(e,a);b=e;e.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;g([k.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:c.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=b=g([k.subclass("esri.popup.content.LineChartMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/PieChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.type="pie-chart";return b}l(e,a);b=e;e.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;g([k.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:c.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=b=g([k.subclass("esri.popup.content.PieChartMediaInfo")],e)}(k.declared(e))})},"esri/popup/content/support/mediaInfoTypes":function(){define("require exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:h,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":l,"column-chart":g,"line-chart":e,"pie-chart":c,image:k}};a.default=a.types})},"esri/popup/content/TextContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Content".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||
this;b.text=null;b.type="text";return b}l(c,a);e=c;c.prototype.clone=function(){return new e({text:this.text})};var e;g([k.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);g([k.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e=g([k.subclass("esri.popup.content.TextContent")],c)}(k.declared(e))})},"esri/popup/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.name=null;b.title=null;b.expression=null;b.returnType=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var d;g([e.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"expression",
void 0);g([e.property({type:["string","number"],json:{write:!0}})],c.prototype,"returnType",void 0);return c=d=g([e.subclass("esri.popup.ExpressionInfo")],c)}(e.declared(k))})},"esri/popup/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.returnTopmostRaster=null;b.showNoDataRecords=null;
return b}l(c,a);d=c;c.prototype.clone=function(){return new d({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};var d;g([e.property({type:Boolean,json:{write:!0}})],c.prototype,"returnTopmostRaster",void 0);g([e.property({type:Boolean,json:{write:!0}})],c.prototype,"showNoDataRecords",void 0);return c=d=g([e.subclass("esri.popup.LayerOptions")],c)}(e.declared(k))})},"esri/popup/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/RelatedRecordsInfoFieldOrder".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.showRelatedRecords=null;b.orderByFields=null;return b}l(b,a);f=b;b.prototype.clone=function(){return new f({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?e.clone(this.orderByFields):null})};var f;g([c.property({type:Boolean,json:{write:!0}})],b.prototype,"showRelatedRecords",void 0);g([c.property({type:[h],json:{write:!0}})],b.prototype,"orderByFields",void 0);return b=f=g([c.subclass("esri.popup.RelatedRecordsInfo")],
b)}(c.declared(k))})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.field=null;b.order=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({field:this.field,order:this.order})};var d;g([e.property({type:String,json:{write:!0}})],
c.prototype,"field",void 0);g([e.property({type:["asc","desc"],json:{write:!0}})],c.prototype,"order",void 0);return c=d=g([e.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],c)}(e.declared(k))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){return function(a){function e(b){b=
a.call(this)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}l(e,a);b=e;e.prototype.clone=function(){return new b({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var b;g([c.property()],e.prototype,"active",void 0);g([c.property()],e.prototype,"className",void 0);g([c.property()],e.prototype,"disabled",void 0);g([c.property()],e.prototype,
"id",void 0);g([c.property()],e.prototype,"indicator",void 0);g([c.property()],e.prototype,"title",void 0);g([c.property()],e.prototype,"type",void 0);g([c.property()],e.prototype,"visible",void 0);return e=b=g([c.subclass("esri.support.actions.ActionBase")],e)}(c.declared(k,e.Identifiable))})},"esri/core/Identifiable":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=0;d=function(){return function(){Object.defineProperty(this,"uid",{writable:!1,
configurable:!1,value:Date.now().toString(16)+"-object-"+l++})}}();a.Identifiable=d})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.image=null;b.type="button";return b}l(c,a);e=c;c.prototype.clone=function(){return new e({active:this.active,className:this.className,
disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var e;g([k.property()],c.prototype,"image",void 0);return c=e=g([k.subclass("esri.support.Action.ActionButton")],c)}(k.declared(e))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=
a.call(this)||this;b.image=null;b.type="toggle";b.value=!1;return b}l(c,a);e=c;c.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var e;g([k.property()],c.prototype,"image",void 0);g([k.property()],c.prototype,"value",void 0);return c=e=g([k.subclass("esri.support.Action.ActionToggle")],c)}(k.declared(e))})},"esri/symbols":function(){define("require exports ./core/accessorSupport/ensureType ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F,H,G,J,K,I,M,O,Q){Object.defineProperty(a,"__esModule",{value:!0});a.CIMSymbol=g;a.ExtrudeSymbol3DLayer=k;a.BaseFillSymbol=e;a.FillSymbol3DLayer=c;a.Font=h;a.IconSymbol3DLayer=m;a.LabelSymbol3D=b;a.LineSymbol3D=f;a.LineSymbol3DLayer=p;a.BaseMarkerSymbol=u;a.MeshSymbol3D=n;a.ObjectSymbol3DLayer=r;a.PathSymbol3DLayer=w;a.PictureFillSymbol=t;a.PictureMarkerSymbol=y;a.PointSymbol3D=x;a.PolygonSymbol3D=A;a.SimpleFillSymbol=z;a.SimpleLineSymbol=
C;a.SimpleMarkerSymbol=D;a.BaseSymbol=B;a.BaseSymbol3D=E;a.BaseSymbol3DLayer=F;a.TextSymbol=H;a.TextSymbol3DLayer=G;a.WaterSymbol3DLayer=J;a.WebStyleSymbol=K;a.LineCallout3D=I;a.LineCallout3DBorder=M;a.Symbol3DVerticalOffset=O.Symbol3DVerticalOffset;a.fromJSON=Q.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;
default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};a.symbolTypes={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,
"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};a.symbolTypesRenderer={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};
a.symbolTypesLabel={base:a.BaseSymbol,key:"type",typeMap:{text:a.TextSymbol,"label-3d":a.LabelSymbol3D}};a.symbolTypes3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};a.symbolTypesRenderer3D={base:a.BaseSymbol,key:"type",typeMap:{"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};
a.symbolTypesLabel3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D}};a.ensureType=l.ensureOneOfType(a.symbolTypes)})},"esri/symbols/CIMSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ../portal/Portal ./Symbol ./support/cimSymbolUtils".split(" "),function(d,
a,l,g,k,e,c,h,m,b,f,p,u){return function(a){function d(b){b=a.call(this,b)||this;b.data=null;b.portal=null;b.styleName="";b.styleUrl="";b.type="cim";return b}l(d,a);p=d;d.prototype.readData=function(a,b){return b.symbol};d.prototype.writeData=function(a,b){a&&(b.symbol=a)};d.prototype.readStyleUrl=function(a,b){return b.symbolUrl?b.symbolUrl:a};d.prototype.writeStyleUrl=function(a,b){a&&(b.symbolUrl=a)};d.prototype.collectRequiredFields=function(a,c){return e(this,void 0,void 0,function(){var f,e,
d,g,m,p,n;return k(this,function(k){switch(k.label){case 0:return[4,u.expandSymbol(this,u.constructUrlFn)];case 1:k.sent(),e=(f="object"===typeof this.data&&this.data.length)?this.data:[this.data],d=0,g=e,k.label=2;case 2:if(!(d<g.length))return[3,5];m=g[d];p=m.primitiveOverrides;if(!p)return[3,4];n=p.map(function(f){return b.collectArcadeFieldNames(a,c,f.valueExpressionInfo.expression)});return[4,h.all(n)];case 3:k.sent(),k.label=4;case 4:return d++,[3,2];case 5:return[2]}})})};d.prototype.clone=
function(){return new p({color:this.color.clone(),data:c.clone(this.data),portal:this.portal,styleName:this.styleName,styleUrl:this.styleUrl})};var p;g([m.property({json:{write:!1}})],d.prototype,"color",void 0);g([m.property({json:{write:!0}})],d.prototype,"data",void 0);g([m.reader("data",["data","symbol"])],d.prototype,"readData",null);g([m.writer("data")],d.prototype,"writeData",null);g([m.property({type:f,json:{write:!1}})],d.prototype,"portal",void 0);g([m.property({json:{write:!0}})],d.prototype,
"styleName",void 0);g([m.property({type:String,json:{write:!0}})],d.prototype,"styleUrl",void 0);g([m.reader("styleUrl",["styleUrl","symbolUrl"])],d.prototype,"readStyleUrl",null);g([m.writer("styleUrl")],d.prototype,"writeStyleUrl",null);g([m.enumeration.serializable()({CIMSymbolReference:"cim"})],d.prototype,"type",void 0);return d=p=g([m.subclass("esri.symbols.CIMSymbol")],d)}(m.declared(p))})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/paramHelper dojo/_base/kernel ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser @dojo/framework/shim/Promise".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D){var B,E={PortalGroup:function(){return y.create(function(a){return d(["./PortalGroup"],a)})},PortalItem:function(){return y.create(function(a){return d(["./PortalItem"],a)})},PortalUser:function(){return y.create(function(a){return d(["./PortalUser"],a)})}};return function(a){function n(c){c=a.call(this)||this;c.access=null;c.allSSL=!1;c.authMode="auto";c.authorizedCrossOriginDomains=null;c.basemapGalleryGroupQuery=null;c.bingKey=null;c.canListApps=
!1;c.canListData=!1;c.canListPreProvisionedItems=!1;c.canProvisionDirectPurchase=!1;c.canSearchPublic=!0;c.canShareBingPublic=!1;c.canSharePublic=!1;c.canSignInArcGIS=!1;c.canSignInIDP=!1;c.colorSetsGroupQuery=null;c.commentsEnabled=!1;c.created=null;c.culture=null;c.customBaseUrl=null;c.defaultBasemap=null;c.defaultExtent=null;c.defaultVectorBasemap=null;c.description=null;c.eueiEnabled=!1;c.featuredGroups=null;c.featuredItemsGroupQuery=null;c.galleryTemplatesGroupQuery=null;c.livingAtlasGroupQuery=
null;c.hasCategorySchema=!1;c.helperServices=null;c.homePageFeaturedContent=null;c.homePageFeaturedContentCount=null;c.httpPort=null;c.httpsPort=null;c.id=null;c.ipCntryCode=null;c.isPortal=!1;c.layerTemplatesGroupQuery=null;c.maxTokenExpirationMinutes=null;c.modified=null;c.name=null;c.portalHostname=null;c.portalMode=null;c.portalProperties=null;c.region=null;c.rotatorPanels=null;c.showHomePageDescription=!1;c.supportsHostedServices=!1;c.symbolSetsGroupQuery=null;c.templatesGroupQuery=null;c.units=
null;c.url=b.portalUrl;c.urlKey=null;c.user=null;c.useStandardizedQuery=!1;c.useVectorBasemaps=!1;c.vectorBasemapGalleryGroupQuery=null;return c}k(n,a);w=n;n.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};n.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};n.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var c=0;c<a.length;c++){var f=a[c];-1===b.request.trustedServers.indexOf(f)&&
b.request.trustedServers.push(f)}return a};n.prototype.readDefaultBasemap=function(a){return a?(a=B.fromJSON(a),a.portalItem={portal:this},a):null};n.prototype.readDefaultVectorBasemap=function(a){return a?(a=B.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(n.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"isOrganization",
{get:function(){return!!this.access},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});n.prototype.readUrlKey=
function(a){return a?a.toLowerCase():a};n.prototype.readUser=function(a){var b=null;a&&(b=D.fromJSON(a),b.portal=this);return b};n.prototype.load=function(a){var b=this,c=y.create(function(a){return d(["../Basemap"],a)}).then(function(b){y.throwIfAborted(a);B=b}).then(function(){return b._fetchSelf(b.authMode,!1,a)}).then(function(a){if(f.id){var c=f.id;b.credential=c.findCredential(b.restUrl);b.credential||b.authMode!==w.AUTH_MODE_AUTO||(b._esriId_credentialCreateHandle=c.on("credential-create",
function(){c.findCredential(b.restUrl)&&b._signIn()}))}b.read(a)});this.addResolvingPromise(c);return this.when()};n.prototype.createClosestFacilityTask=function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),a=this._getHelperServiceUrl("closestFacility"),[4,new Promise(function(a,b){d(["../tasks/ClosestFacilityTask"],a,b)})];case 2:return b=c.sent(),[2,new b(a)]}})})};n.prototype.createElevationLayers=
function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),a=this._getHelperService("defaultElevationLayers"),[4,new Promise(function(a,b){d(["../layers/ElevationLayer"],a,b)})];case 2:return b=c.sent(),[2,a?a.map(function(a){return new b({id:a.id,url:a.url})}):[]]}})})};n.prototype.createGeometryService=function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,
this.load()];case 1:return c.sent(),a=this._getHelperServiceUrl("geometry"),[4,new Promise(function(a,b){d(["../tasks/GeometryService"],a,b)})];case 2:return b=c.sent(),[2,new b(a)]}})})};n.prototype.createPrintTask=function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),a=this._getHelperServiceUrl("printTask"),[4,new Promise(function(a,b){d(["../tasks/PrintTask"],a,b)})];case 2:return b=c.sent(),[2,new b(a)]}})})};
n.prototype.createRouteTask=function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),a=this._getHelperServiceUrl("route"),[4,new Promise(function(a,b){d(["../tasks/RouteTask"],a,b)})];case 2:return b=c.sent(),[2,new b(a)]}})})};n.prototype.createServiceAreaTask=function(){return g(this,void 0,void 0,function(){var a,b;return c(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),
a=this._getHelperServiceUrl("serviceArea"),[4,new Promise(function(a,b){d(["../tasks/ServiceAreaTask"],a,b)})];case 2:return b=c.sent(),[2,new b(a)]}})})};n.prototype.fetchBasemaps=function(a,b){var c=new z;c.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);c.disableExtraQuery=!0;return this.queryGroups(c,b).then(function(a){c.num=100;c.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],c.sortField=a.sortField||"name",c.sortOrder=
a.sortOrder||"desc",a.queryItems(c,b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new B({portalItem:a})}):[]})};n.prototype.fetchCategorySchema=function(a){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",a).then(function(a){return a.categorySchema}):y.isAborted(a)?y.reject(y.createAbortError()):y.resolve([])};n.prototype.fetchFeaturedGroups=function(a){var b=this.featuredGroups,c=
new z;c.num=100;c.sortField="title";if(b&&b.length){for(var f=[],e=0;e<b.length;e++){var d=b[e];f.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}c.query=f.join(" OR ");return this.queryGroups(c,a).then(function(a){return a.results})}return y.isAborted(a)?y.reject(y.createAbortError()):y.resolve([])};n.prototype.fetchRegions=function(a){return this._request(this.restUrl+"/portals/regions",l({},a,{query:{culture:this.user&&this.user.culture||this.culture||m.locale}}))};n.getDefault=function(){w._default||
(w._default=new w);return w._default};n.prototype.queryGroups=function(a,b){return this._queryPortal("/community/groups",a,"PortalGroup",b)};n.prototype.queryItems=function(a,b){return this._queryPortal("/search",a,"PortalItem",b)};n.prototype.queryUsers=function(a,b){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser",b)};n.prototype.toJSON=function(){throw new u("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};n.prototype._getHelperService=
function(a){var b=this.helperServices&&this.helperServices[a];if(!b)throw new u("portal:service-not-found",'The `helperServices` do not include an entry named "'+a+'"');return b};n.prototype._getHelperServiceUrl=function(a){var b=this._getHelperService(a);if(!b.url)throw new u("portal:service-url-not-found",'The `helperServices` entry "'+a+'" does not include a `url` value');return b.url};n.prototype._fetchSelf=function(a,b,c){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var f=this.restUrl+"/portals/self";
a=l({authMode:a,query:{culture:m.locale}},c);"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(f,a)};n.prototype._queryPortal=function(a,b,c,f){var e=this,d=function(c){return e._request(e.restUrl+a,l({},b.toRequestOptions(e),f)).then(function(a){var d=b.clone();d.start=a.nextStart;return new C({nextQueryParams:d,queryParams:b,total:a.total,results:w._resultsToTypedArray(c,{portal:e},a,f)})}).then(function(a){return y.all(a.results.map(function(b){return"function"===
typeof b.when?b.when():a})).then(function(){return a},function(b){y.throwIfAbortError(b);return a})})};return c&&E[c]?E[c]().then(function(a){y.throwIfAborted(f);return d(a)}):d()};n.prototype._signIn=function(){var a=this;if(this.authMode===w.AUTH_MODE_ANONYMOUS)return y.reject(new u("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+'"'));if("failed"===this.loadStatus)return y.reject(this.loadError);var b=function(b){return y.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||
(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};return f.id?f.id.getCredential(this.restUrl).then(function(a){return b(a)}):b(this.credential)};n.prototype._normalizeSSL=function(a){return a.replace(/^http:/i,"https:").replace(":7080",
":7443")};n.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};n.prototype._requestToTypedArray=function(a,b,c){var f=this,e=function(c){return f._request(a,b).then(function(a){var b=w._resultsToTypedArray(c,{portal:f},a);return y.all(b.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return b},function(){return b})})};return c?y.create(function(a){return d(["./"+
c],a)}).then(function(a){return e(a)}):e()};n.prototype._request=function(a,b){void 0===b&&(b={});var c=l({f:"json"},b.query),f=b.authMode,e=b.body,d=b.cacheBust,h=b.method,g=b.responseType;b={authMode:void 0===f?this.authMode===w.AUTH_MODE_ANONYMOUS?"anonymous":"auto":f,body:void 0===e?null:e,cacheBust:void 0===d?!1:d,method:void 0===h?"auto":h,query:c,responseType:void 0===g?"json":g,timeout:0,signal:b.signal};return p(this._normalizeSSL(a),b).then(function(a){return a.data})};n._resultsToTypedArray=
function(a,b,c,f){if(c){var e=t.isSome(f)?f.signal:null;c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c;if(a||b)c=c.map(function(c){c=r.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load(e);return c})}else c=[];return c};var w;n.AUTH_MODE_ANONYMOUS="anonymous";n.AUTH_MODE_AUTO="auto";n.AUTH_MODE_IMMEDIATE="immediate";e([x.property()],n.prototype,"access",void 0);e([x.property()],n.prototype,"allSSL",void 0);
e([x.property()],n.prototype,"authMode",void 0);e([x.property()],n.prototype,"authorizedCrossOriginDomains",void 0);e([x.reader("authorizedCrossOriginDomains")],n.prototype,"readAuthorizedCrossOriginDomains",null);e([x.property()],n.prototype,"basemapGalleryGroupQuery",void 0);e([x.property()],n.prototype,"bingKey",void 0);e([x.property()],n.prototype,"canListApps",void 0);e([x.property()],n.prototype,"canListData",void 0);e([x.property()],n.prototype,"canListPreProvisionedItems",void 0);e([x.property()],
n.prototype,"canProvisionDirectPurchase",void 0);e([x.property()],n.prototype,"canSearchPublic",void 0);e([x.property()],n.prototype,"canShareBingPublic",void 0);e([x.property()],n.prototype,"canSharePublic",void 0);e([x.property()],n.prototype,"canSignInArcGIS",void 0);e([x.property()],n.prototype,"canSignInIDP",void 0);e([x.property()],n.prototype,"colorSetsGroupQuery",void 0);e([x.property()],n.prototype,"commentsEnabled",void 0);e([x.property({type:Date})],n.prototype,"created",void 0);e([x.property()],
n.prototype,"credential",void 0);e([x.property()],n.prototype,"culture",void 0);e([x.property()],n.prototype,"currentVersion",void 0);e([x.property()],n.prototype,"customBaseUrl",void 0);e([x.property()],n.prototype,"defaultBasemap",void 0);e([x.reader("defaultBasemap")],n.prototype,"readDefaultBasemap",null);e([x.property({type:A})],n.prototype,"defaultExtent",void 0);e([x.property()],n.prototype,"defaultVectorBasemap",void 0);e([x.reader("defaultVectorBasemap")],n.prototype,"readDefaultVectorBasemap",
null);e([x.property()],n.prototype,"description",void 0);e([x.property()],n.prototype,"eueiEnabled",void 0);e([x.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],n.prototype,"extraQuery",null);e([x.property()],n.prototype,"featuredGroups",void 0);e([x.property()],n.prototype,"featuredItemsGroupQuery",void 0);e([x.property()],n.prototype,"galleryTemplatesGroupQuery",void 0);e([x.property()],n.prototype,"livingAtlasGroupQuery",void 0);e([x.property()],n.prototype,"hasCategorySchema",
void 0);e([x.property()],n.prototype,"helpBase",void 0);e([x.property()],n.prototype,"helperServices",void 0);e([x.property()],n.prototype,"helpMap",void 0);e([x.property()],n.prototype,"homePageFeaturedContent",void 0);e([x.property()],n.prototype,"homePageFeaturedContentCount",void 0);e([x.property()],n.prototype,"httpPort",void 0);e([x.property()],n.prototype,"httpsPort",void 0);e([x.property()],n.prototype,"id",void 0);e([x.property()],n.prototype,"ipCntryCode",void 0);e([x.property({dependsOn:["access"],
readOnly:!0})],n.prototype,"isOrganization",null);e([x.property()],n.prototype,"isPortal",void 0);e([x.property()],n.prototype,"layerTemplatesGroupQuery",void 0);e([x.property()],n.prototype,"maxTokenExpirationMinutes",void 0);e([x.property({type:Date})],n.prototype,"modified",void 0);e([x.property()],n.prototype,"name",void 0);e([x.property()],n.prototype,"portalHostname",void 0);e([x.property()],n.prototype,"portalMode",void 0);e([x.property()],n.prototype,"portalProperties",void 0);e([x.property()],
n.prototype,"region",void 0);e([x.property({dependsOn:["url"],readOnly:!0})],n.prototype,"restUrl",null);e([x.property()],n.prototype,"rotatorPanels",void 0);e([x.property()],n.prototype,"showHomePageDescription",void 0);e([x.property()],n.prototype,"staticImagesUrl",void 0);e([x.property()],n.prototype,"stylesGroupQuery",void 0);e([x.property()],n.prototype,"supportsHostedServices",void 0);e([x.property()],n.prototype,"symbolSetsGroupQuery",void 0);e([x.property()],n.prototype,"templatesGroupQuery",
void 0);e([x.property()],n.prototype,"thumbnail",void 0);e([x.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],n.prototype,"thumbnailUrl",null);e([x.property()],n.prototype,"units",void 0);e([x.property()],n.prototype,"url",void 0);e([x.property()],n.prototype,"urlKey",void 0);e([x.reader("urlKey")],n.prototype,"readUrlKey",null);e([x.property()],n.prototype,"user",void 0);e([x.reader("user")],n.prototype,"readUser",null);e([x.property()],n.prototype,"useStandardizedQuery",void 0);e([x.property()],
n.prototype,"useVectorBasemaps",void 0);e([x.property()],n.prototype,"vectorBasemapGalleryGroupQuery",void 0);e([h(1,x.cast(z))],n.prototype,"_queryPortal",null);return n=w=e([x.subclass("esri.portal.Portal")],n)}(x.declared(n,w))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(d,a){return function(l,g){a(l,g,d)}}})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){d=function(a){function c(){var b=a.call(this)||this;b.loadError=null;b.loadStatus="not-loaded";b.loadWarnings=null;b._set("loadWarnings",[]);b.addResolvingPromise(m.create(function(a){var c=b.load.bind(b);b.load=function(f){var e=m.create(function(a,c){m.onAbort(f,c);b._promiseProps.when(a,c)});if("not-loaded"===b.loadStatus){b._set("loadStatus","loading");var d=b._loadController=m.createAbortController();c({signal:d.signal});m.onAbort(d.signal,function(){b._promiseProps.abort()})}a();
return e}}));b.when(function(){b._set("loadStatus","loaded");b._loadController=null},function(a){b._set("loadStatus","failed");b._set("loadError",a);b._loadController=null});return b}l(c,a);Object.defineProperty(c.prototype,"loaded",{get:function(){return"loaded"===this.loadStatus},enumerable:!0,configurable:!0});c.prototype.load=function(a){return null};c.prototype.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new e("load:cancelled","Cancelled"));this._loadController.abort();
return this};g([f.property({readOnly:!0,dependsOn:["loadStatus"]})],c.prototype,"loaded",null);g([f.property({readOnly:!0})],c.prototype,"loadError",void 0);g([f.property()],c.prototype,"loadStatus",void 0);g([f.property({type:[b],readOnly:!0})],c.prototype,"loadWarnings",void 0);return c=g([f.subclass("esri.core.Loadable")],c)}(f.declared(k,h));d.prototype["-chains-"]=c.mixin({},k._meta.chains,{load:"after"});return d})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c,h){var m=function(){function a(a){var b=this;this.instance=a;this._resolver=e.createDeferred();this._status=void 0;this._resolvingPromises=[];this._resolver.promise.then(function(){b._status=0;b._cleanUp()},function(){b._status=1;b._cleanUp()})}a.prototype.addResolvingPromise=function(a){this._resolvingPromises.push(a);this._tryResolve()};a.prototype.isResolved=function(){return 0===this._status};a.prototype.isRejected=function(){return 1===this._status};a.prototype.isFulfilled=
function(){return null!=this._status};a.prototype.abort=function(){this._resolver.reject(e.createAbortError())};a.prototype.when=function(a,b){return this._resolver.promise.then(a,b)};a.prototype._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};a.prototype._tryResolve=function(){var a=this;if(!this.isFulfilled()){var b=e.createDeferred(),d=this._resolvingPromises.concat([b.promise]),h=this._allPromise=e.all(d);h.then(function(){a.isFulfilled()||a._allPromise!==h||
a._resolver.resolve(a.instance)},function(b){a.isFulfilled()||a._allPromise!==h||e.isAbortError(b)||a._resolver.reject(b)});c.schedule(function(){b.resolve()})}};return a}();return function(a){function b(){var b=a.call(this)||this;b._promiseProps=new m(b);b.addResolvingPromise(e.create(function(a){c.schedule(a)}));return b}l(b,a);b.prototype.isResolved=function(){return this._promiseProps.isResolved()};b.prototype.isRejected=function(){return this._promiseProps.isRejected()};b.prototype.isFulfilled=
function(){return this._promiseProps.isFulfilled()};b.prototype.when=function(a,b){var c=this;return e.create(function(a,b){c._promiseProps.when(a,b)}).then(a,b)};b.prototype.catch=function(a){return this.when(null,a)};b.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in a?a.when():a)};return b=g([h.subclass("esri.core.Promise")],b)}(h.declared(k))})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper",
"./tsSupport/decorateHelper","./Message"],function(d,a,l,g,k){d=function(a){function c(e,d,b){var f=a.call(this,e,d,b)||this;return f instanceof c?f:new c(e,d,b)}l(c,a);return c}(k);d.prototype.type="warning";return d})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){var u=new c.default({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function c(b){b=a.call(this)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}g(c,a);e=c;Object.defineProperty(c.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,
configurable:!0});c.prototype.clone=function(){return new e({categories:this.categories?h.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};c.prototype.toRequestOptions=function(a,b){var c;this.categories&&(c=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var e;if(this.extent){var d=p.project(this.extent,
f.WGS84);d&&(e=d.xmin+","+d.ymin+","+d.xmax+","+d.ymax)}d=this.query;!this.disableExtraQuery&&a.extraQuery&&(d="("+d+")"+a.extraQuery);a={categories:c,bbox:e,q:d,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=u.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:l({},b,a)}};var e;k([m.property()],c.prototype,"categories",void 0);k([m.property()],c.prototype,"disableExtraQuery",void 0);k([m.property({type:b})],c.prototype,"extent",void 0);k([m.property()],
c.prototype,"num",void 0);k([m.property()],c.prototype,"query",void 0);k([m.property()],c.prototype,"sortField",void 0);k([m.property()],c.prototype,"sortOrder",null);k([m.property()],c.prototype,"start",void 0);return c=e=k([m.subclass("esri.portal.PortalQueryParams")],c)}(m.declared(e))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(d,
a,l,g,k,e){return function(a){function c(c){c=a.call(this)||this;c.nextQueryParams=null;c.queryParams=null;c.results=null;c.total=null;return c}l(c,a);g([e.property()],c.prototype,"nextQueryParams",void 0);g([e.property()],c.prototype,"queryParams",void 0);g([e.property()],c.prototype,"results",void 0);g([e.property()],c.prototype,"total",void 0);return c=g([e.subclass("esri.portal.PortalQueryResult")],c)}(e.declared(k))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(d,a,l,g,k,e,c,h,m,b){return function(a){function f(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}l(f,a);Object.defineProperty(f.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+
b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});f.prototype.addItem=function(a){var b=this,c=a&&a.item,f=a&&a.data;a=a&&a.folder;var e={method:"post"};
c&&(e.query=c._getPostQuery(),null!=f&&("string"===typeof f?e.query.text=f:"object"===typeof f&&(e.query.text=JSON.stringify(f))));f=this.userContentUrl;a&&(f+="/"+("string"===typeof a?a:a.id));return this.portal._request(f+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};f.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})};f.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",f=a.map(function(a){return a.id});return f.length?(f={method:"post",query:{items:f.join(",")}},this.portal._request(b,f).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):c.resolve(void 0)};f.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=m.fromJSON(b);b.portal=
a.portal;return b}):[]})};f.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(c){return c&&c.groups?c.groups.map(function(c){c=b.fromJSON(c);c.portal=a.portal;return c}):[]})};f.prototype.fetchItems=function(a){var b=this;a||(a={});var f=this.userContentUrl;a.folder&&(f+="/"+a.folder.id);var e;return c.create(function(a){return d(["./PortalItem"],a)}).then(function(c){e=c;return b.portal._request(f,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var f;
return a&&a.items?(f=a.items.map(function(a){a=e.fromJSON(a);a.portal=b.portal;return a}),c.all(f.map(function(a){return a.load()})).catch(function(a){return a}).then(function(){return{items:f,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};f.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};f.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new b({id:this.favGroupId,portal:this.portal})),
this._favGroup.queryItems(a)):c.reject(new k("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};f.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};g([h.property()],f.prototype,"access",void 0);g([h.property({type:Date})],f.prototype,"created",void 0);g([h.property()],f.prototype,"culture",void 0);g([h.property()],f.prototype,"description",void 0);g([h.property()],f.prototype,"email",void 0);g([h.property()],
f.prototype,"favGroupId",void 0);g([h.property()],f.prototype,"fullName",void 0);g([h.property({type:Date})],f.prototype,"modified",void 0);g([h.property()],f.prototype,"orgId",void 0);g([h.property()],f.prototype,"portal",void 0);g([h.property()],f.prototype,"preferredView",void 0);g([h.property()],f.prototype,"privileges",void 0);g([h.property()],f.prototype,"region",void 0);g([h.property()],f.prototype,"role",void 0);g([h.property()],f.prototype,"roleId",void 0);g([h.property()],f.prototype,"thumbnail",
void 0);g([h.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],f.prototype,"thumbnailUrl",null);g([h.property()],f.prototype,"units",void 0);g([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],f.prototype,"userContentUrl",null);g([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],f.prototype,"url",null);g([h.property()],f.prototype,"username",void 0);g([h.property()],f.prototype,"userType",void 0);return f=g([h.subclass("esri.portal.PortalUser")],f)}(h.declared(e))})},
"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}l(e,a);Object.defineProperty(e.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+
"/"+this.id:null},enumerable:!0,configurable:!0});e.prototype.toJSON=function(){throw new k("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};g([c.property({type:Date})],e.prototype,"created",void 0);g([c.property()],e.prototype,"id",void 0);g([c.property()],e.prototype,"portal",void 0);g([c.property()],e.prototype,"title",void 0);g([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],e.prototype,"url",null);g([c.property()],e.prototype,"username",void 0);return e=
g([c.subclass("esri.portal.PortalFolder")],e)}(c.declared(e))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),function(d,a,l,g,k,e,c,h,m){return function(a){function b(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=
null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}l(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchCategorySchema=
function(a){var b=this;return this.portal._request(this.url+"/categorySchema",a).then(function(c){c=c.categorySchema||[];return c.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?b._fetchCategorySchemaSet("LivingAtlas",a):c})};b.prototype.fetchMembers=function(a){return this.portal._request(this.url+"/users",a)};b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.toJSON=function(){throw new e("internal:not-yet-implemented",
"PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a,b){if(5<parseFloat(this.portal.currentVersion))return a=a||new m,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem",b);a=a?a.clone():new m;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a,b)};b.prototype._fetchCategorySchemaSet=function(a,b){var c=this;return this.portal._fetchSelf(this.portal.authMode,!0,b).then(function(a){if(a=a.contentCategorySetsGroupQuery){var f=
new m;f.disableExtraQuery=!0;f.num=1;f.query=a;return c.portal.queryGroups(f,b)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(c){if(c.total){c=c.results[0];var f=new m;f.num=1;f.query='typekeywords:"'+a+'"';return c.queryItems(f,b)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(function(a){return a.total?a.results[0].fetchData("json",b).then(function(a){return(a=a&&a.categorySchema)&&
a.length?a:[]}):[]})};g([h.property()],b.prototype,"access",void 0);g([h.property({type:Date})],b.prototype,"created",void 0);g([h.property()],b.prototype,"description",void 0);g([h.property()],b.prototype,"id",void 0);g([h.property()],b.prototype,"isInvitationOnly",void 0);g([h.property({type:Date})],b.prototype,"modified",void 0);g([h.property()],b.prototype,"owner",void 0);g([h.property()],b.prototype,"portal",void 0);g([h.property()],b.prototype,"snippet",void 0);g([h.property()],b.prototype,
"sortField",void 0);g([h.property()],b.prototype,"sortOrder",void 0);g([h.property()],b.prototype,"tags",void 0);g([h.property()],b.prototype,"thumbnail",void 0);g([h.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],b.prototype,"thumbnailUrl",null);g([h.property()],b.prototype,"title",void 0);g([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);g([k(0,h.cast(m))],b.prototype,"queryItems",null);return b=g([h.subclass("esri.portal.PortalGroup")],
b)}(h.declared(c))})},"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c,h,m,b){var f=new h.default({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",
PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),p=0;return function(a){function d(b){b=a.call(this,b)||this;b.id="sym"+p++;b.type=null;return b}l(d,a);Object.defineProperty(d.prototype,"color",{set:function(a){this._set("color",a)},enumerable:!0,configurable:!0});d.prototype.readColor=function(a,b,c){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};d.prototype.collectRequiredFields=function(a,
b){return e(this,void 0,void 0,function(){return k(this,function(a){return[2]})})};d.prototype.clone=function(){};g([b.property({type:f.apiValues,json:{read:f.read,write:{ignoreOrigin:!0,writer:f.write}}})],d.prototype,"type",void 0);g([b.property({type:c,value:new c([0,0,0,1]),json:{write:{allowNull:!0}}})],d.prototype,"color",null);g([b.reader("color")],d.prototype,"readColor",null);return d=g([b.subclass("esri.symbols.Symbol")],d)}(b.declared(m))})},"esri/symbols/support/cimSymbolUtils":function(){define("require exports ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/assignHelper ../../request ../../core/asyncUtils ../../core/Logger ../../core/promiseUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){function b(a,b,e){return l(this,void 0,void 0,function(){var d,h,k,n;return g(this,function(g){switch(g.label){case 0:if(a.data||!a.styleUrl||!a.styleName)return[2,a];d=a.styleName;if(!Array.isArray(d))return[3,2];h=d.map(function(d){return c.safeCast(f(d,a.styleUrl,b,e))});k=a;return[4,m.all(h)];case 1:return k.data=g.sent(),[3,4];case 2:return n=a,[4,f(d,a.styleUrl,b,e)];case 3:n.data=g.sent(),g.label=4;case 4:return[2,a]}})})}function f(a,b,c,f){return l(this,void 0,
void 0,function(){var d,h;return g(this,function(g){if(r.has(a))return[2,r.get(a).then(function(a){return n(a.data)})];try{return d=c(b,a),h=e(d,k({responseType:"json",query:{f:"json"}},f)),r.set(a,h),[2,h.then(function(a){return n(a.data)})]}catch(D){return u.error("error requesting "+a+", reason is "+D.message),r.has(a)&&r.delete(a),[2,null]}})})}var p=this;Object.defineProperty(a,"__esModule",{value:!0});var u=h.getLogger("esri/symbols/support/cimSymbolUtils");a.constructUrlFn=function(a,b){return a+
"/resources/styles/cim/"+b+".json"};a.expandSymbols=function(b,c,f){return l(p,void 0,void 0,function(){return g(this,function(e){return[2,m.all(b.map(function(b){return a.expandSymbol(b,c,f)}))]})})};a.expandSymbol=function(a,c,f){return l(p,void 0,void 0,function(){return g(this,function(e){return a?"cim"===a.type?[2,b(a,c,f)]:"web-style"===a.type?[2,a.fetchCIMSymbol(f)]:[2,a]:[2,null]})})};var n=function(a){return null===a?null:"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a}},
r=new Map})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),function(d,a,l,g,k,e,c,h,m){return function(a){function b(b){b=a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;b.castShadows=!0;b.edges=null;return b}l(b,a);c=b;b.prototype.clone=function(){return new c({edges:this.edges&&
this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:k.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};var c;g([e.enumeration.serializable()({Extrude:"extrude"})],b.prototype,"type",void 0);g([e.property({type:Number,json:{write:!0}})],b.prototype,"size",void 0);g([e.property({type:m.default,json:{write:!0}})],b.prototype,"material",void 0);g([e.property({type:Boolean,nonNullable:!0,json:{write:!0,
default:!0}})],b.prototype,"castShadows",void 0);g([e.property(h.symbol3dEdgesProperty)],b.prototype,"edges",void 0);return b=c=g([e.subclass("esri.symbols.ExtrudeSymbol3DLayer")],b)}(e.declared(c))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators ./support/ElevationInfo".split(" "),function(d,a,l,g,k,e,c,h){var m=k.strict()({Icon:"icon",
Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text",Water:"water"});d=function(a){function b(b){b=a.call(this)||this;b.enabled=!0;b.type=null;return b}l(b,a);b.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};g([c.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);g([c.writer("enabled")],b.prototype,"writeEnabled",null);g([c.property({type:h,json:{read:!1,write:!1}})],b.prototype,"elevationInfo",void 0);g([c.property({type:m.apiValues,
readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:m.write}}})],b.prototype,"type",void 0);return b=g([c.subclass("esri.symbols.Symbol3DLayer")],b)}(c.declared(e));(d||(d={})).typeJSONDictionary=m;return d})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ./FeatureExpressionInfo ./unitConversionUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){var p=c.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),u=new c.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);e=c;c.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};
c.prototype.writeFeatureExpressionInfo=function(a,b,c,f){b[c]=a.write(null,f);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(c.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});
c.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};c.prototype.clone=function(){return new e({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var e;g([m.property({type:b,json:{write:!0}})],c.prototype,"featureExpressionInfo",void 0);g([m.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c.prototype,
"readFeatureExpressionInfo",null);g([m.writer("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],c.prototype,"writeFeatureExpressionInfo",null);g([m.property({type:p.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:p.jsonValues,read:p.read,write:{writer:p.write,isRequired:!0}}})],c.prototype,"mode",null);g([m.property({type:Number,json:{write:!0}})],c.prototype,"offset",void 0);g([m.property({type:f.supportedUnits,json:{type:String,
read:u.read,write:u.write}})],c.prototype,"unit",null);return c=e=g([m.subclass("esri.layers.support.ElevationInfo")],c)}(m.declared(h))})},"esri/symbols/support/FeatureExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../layers/support/fieldUtils".split(" "),function(d,a,l,g,k,e,c,h,m){return function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}l(b,a);c=b;b.prototype.collectRequiredFields=function(a,b){return e(this,void 0,void 0,function(){return k(this,function(c){return[2,m.collectArcadeFieldNames(a,b,this.expression)]})})};b.prototype.clone=function(){return new c({expression:this.expression,title:this.title})};var c;g([h.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);g([h.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=c=g([h.subclass("esri.layers.support.FeatureExpressionInfo")],
b)}(h.declared(c))})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.supportsUnit=function(a){return null!=l.meterIn[a]};a.getMetersPerUnit=function(a){return 1/(l.meterIn[a]||1)};a.supportedUnits=function(){var a=Object.keys(l.meterIn);a.sort();return a}()})},"esri/renderers/support/utils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/Logger ../../core/unitUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop".split(" "),
function(d,a,l,g,k,e,c,h){function m(a,b,c){var f="";0===b?f=p.lt+" ":b===c&&(f=p.gt+" ");return f+a}function b(a){var b=a.minValue,f=a.maxValue,e=a.isFirstBreak?"":p.gt+" ";a="percent-of-total"===a.normalizationType?p.pct:"";b=null==b?"":c.format(b);f=null==f?"":c.format(f);return e+b+a+" "+p.ld+" "+f+a}Object.defineProperty(a,"__esModule",{value:!0});var f=g.getLogger("esri.renderers.support.utils"),p={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},u={millisecond:0,second:1,
minute:2,hour:3,day:4,month:5,year:6},n={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};a.meterIn={inches:k.convertUnit(1,"meters","inches"),feet:k.convertUnit(1,"meters","feet"),"us-feet":k.convertUnit(1,"meters","us-feet"),yards:k.convertUnit(1,"meters","yards"),miles:k.convertUnit(1,"meters","miles"),"nautical-miles":k.convertUnit(1,
"meters","nautical-miles"),millimeters:k.convertUnit(1,"meters","millimeters"),centimeters:k.convertUnit(1,"meters","centimeters"),decimeters:k.convertUnit(1,"meters","decimeters"),meters:k.convertUnit(1,"meters","meters"),kilometers:k.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/k.lengthToDegrees(1,"meters")};a.timelineDateFormatOptions=e.convertDateFormatToIntlOptions("short-date");a.createColorStops=function(a){var b=a.values,f=a.colors,d=a.labelIndexes,g=a.isDate,k=a.dateFormatOptions;
return b.map(function(a,n){var p=null;if(!d||-1<d.indexOf(n)){var l=void 0;(l=g?e.formatDate(a,k):c.format(a))&&(p=m(l,n,b.length-1))}return new h({value:a,color:f[n],label:p})})};a.updateColorStops=function(a){var b=a.stops,f=a.changes,d=a.isDate,h=a.dateFormatOptions,g=b.map(function(a){return a.value});a=[];for(var k=0;k<f.length;k++){var n=f[k];a.push(n.index);g[n.index]=n.value}var p=c.round(g,{indexes:a});b.forEach(function(a,f){a.value=g[f];if(null!=a.label){var k=void 0,n=null;(k=d?e.formatDate(p[f],
h):c.format(p[f]))&&(n=m(k,f,b.length-1));a.label=n}})};a.createClassBreakLabel=b;a.setLabelsForClassBreaks=function(a){var e=a.classBreakInfos,d=a.normalizationType,h=[];if(e&&e.length)if("standard-deviation"===a.classificationMethod)f.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(a.round){h.push(e[0].minValue);for(a=0;a<e.length;a++)h.push(e[a].maxValue);h=c.round(h);e.forEach(function(a,c){a.label=b({minValue:0===c?h[0]:
h[c],maxValue:h[c+1],isFirstBreak:0===c,normalizationType:d})})}else e.forEach(function(a,c){a.label=b({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===c,normalizationType:d})})};a.updateClassBreak=function(a){if("standard-deviation"===a.classificationMethod)f.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");else{var c=a.classBreaks,e=a.change,d=e.index,e=e.value,h=c.length,g=-1,k=-1;0===d?g=d:d===h?k=d-1:(k=d-1,g=d);a=a.normalizationType;
d=null;-1<g&&g<h&&(d=c[g],d.minValue=e,d.label=b({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===g,normalizationType:a}));-1<k&&k<h&&(d=c[k],d.maxValue=e,d.label=b({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===k,normalizationType:a}))}};a.calculateDateFormatInterval=function(a){a=a.map(function(a){return new Date(a)});for(var b=a.length,c=Infinity,f=null,e=0;e<b-1;e++){for(var d=a[e],h=[],g=Infinity,k="",m=e+1;m<b;m++){var n=a[m],n=d.getFullYear()!==n.getFullYear()&&"year"||
d.getMonth()!==n.getMonth()&&"month"||d.getDate()!==n.getDate()&&"day"||d.getHours()!==n.getHours()&&"hour"||d.getMinutes()!==n.getMinutes()&&"minute"||d.getSeconds()!==n.getSeconds()&&"second"||"millisecond",p=u[n];p<g&&(g=p,k=n);h.push(n)}g<c&&(c=g,f=k)}return f};a.createUniqueValueLabel=function(a){var b=a.value,f=a.domain,d=a.fieldInfo;a=a.dateFormatInterval;var h=String(b);(f=f&&"codedValues"in f&&f.codedValues?f.getName(b):null)?h=f:"number"===typeof b&&(h=d&&"date"===d.type?e.formatDate(b,
a&&n[a]):c.format(b));return h}})},"esri/renderers/support/numberUtils":function(){define(["require","exports","../../intl"],function(d,a,l){function g(a,b){return a-b}function k(a,b){var c;c=Number(a.toFixed(b));c<a?a=c+1/Math.pow(10,b):(a=c,c-=1/Math.pow(10,b));c=Number(c.toFixed(b));a=Number(a.toFixed(b));return[c,a]}function e(a,b,c,e,d){a=h(a,b,c,e);b=null==a.next||a.next<=d;return(null==a.previous||a.previous<=d)&&b||a.previous+a.next<=2*d}function c(a){a=String(a);var b=a.match(m);if(b&&b[1])return{integer:b[1].split("").length,
fractional:b[3]?b[3].split("").length:0};if(-1<a.toLowerCase().indexOf("e")&&(b=a.split("e"),a=b[0],b=b[1],a&&b)){a=Number(a);var b=Number(b),f=0<b;f||(b=Math.abs(b));a=c(a);f?(a.integer+=b,a.fractional=b>a.fractional?0:a.fractional-b):(a.fractional+=b,a.integer=b>a.integer?1:a.integer-b);return a}return{integer:0,fractional:0}}function h(a,b,c,e){var f={previous:null,next:null};if(null!=c){var d=a-c;f.previous=Math.floor(Math.abs(100*(b-c-d)/d))}null!=e&&(d=e-a,f.next=Math.floor(Math.abs(100*(e-
b-d)/d)));return f}Object.defineProperty(a,"__esModule",{value:!0});var m=/^-?(\d+)(\.(\d+))?$/i;a.numDigits=c;a.percentChange=h;a.round=function(a,b){void 0===b&&(b={});a=a.slice(0);var f=b.tolerance,f=void 0===f?2:f,d=b.strictBounds,d=void 0===d?!1:d;b=b.indexes;b=void 0===b?a.map(function(a,b){return b}):b;b.sort(g);for(var h=0;h<b.length;h++){var m=b[h],p=a[m],l=0===m?null:a[m-1],x=m===a.length-1?null:a[m+1],A=c(p).fractional;if(A){for(var z=0,C=!1,D=void 0;z<=A&&!C;)C=k(p,z),D=d&&0===h?C[1]:
C[0],C=e(p,D,l,x,f),z++;C&&(a[m]=D)}}return a};var b={maximumFractionDigits:20};a.format=function(a){return l.formatNumber(a,b)}})},"esri/intl":function(){define(["require","exports","./intl/date","./intl/number","./intl/substitute"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.formatDate=l.formatDate;a.convertDateFormatToIntlOptions=l.convertDateFormatToIntlOptions;a.formatNumber=g.formatNumber;a.convertNumberFormatToIntlOptions=g.convertNumberFormatToIntlOptions;a.substitute=
k.substitute})},"esri/intl/substitute":function(){define("require exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(d,a,l,g,k,e,c){function h(a){switch(typeof a){case "string":return a;case "number":return c.formatNumber(a);case "boolean":return""+a;default:return a instanceof Date?e.formatDate(a):""}}Object.defineProperty(a,"__esModule",{value:!0});var m=l.getLogger("esri.intl");a.substitute=function(a,f,d){void 0===d&&(d={});d=d.format;var b=void 0===d?{}:
d;return k.replace(a,function(a){var d;var k,n=a.indexOf(":");-1===n?k=a.trim():(k=a.slice(0,n).trim(),d=a.slice(n+1).trim());if(k)if(a=g.getDeepValue(k,f),null==a)d="";else if(k=b[d]||b[k])b:switch(k.type){case "date":d=e.formatDate(a,k.intlOptions);break b;case "number":d=c.formatNumber(a,k.intlOptions);break b;default:m.warn("missing format descriptor for key {key}"),d=h(a)}else if(d)b:switch(d.toLowerCase()){case "dateformat":d=e.formatDate(a);break b;case "numberformat":d=c.formatNumber(a);break b;
default:m.warn("inline format is unsupported since 4.12: "+d),d=/^(dateformat|datestring)/i.test(d)?e.formatDate(a):/^numberformat/i.test(d)?c.formatNumber(a):h(a)}else d=h(a);else d="";return d})}})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this,b)||this;b.color=null;b.label=null;b.value=null;return b}l(b,a);f=b;b.prototype.writeValue=function(a,b,c){b[c]=null==a?0:a};b.prototype.clone=function(){return new f({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var f;g([c.property({type:k,json:{type:[h.Integer],write:!0}})],b.prototype,"color",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);g([c.property({type:Number,
json:{write:{allowNull:!0}}})],b.prototype,"value",void 0);g([c.writer("value")],b.prototype,"writeValue",null);return b=f=g([c.subclass("esri.renderers.visualVariables.support.ColorStop")],b)}(c.declared(e))})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(d,a,l,g,k){function e(a,e,d){if(!a)return a;switch(a.type){case "solid":return e=new k,e.read(a,d),e;case "sketch":return e=new g,e.read(a,d),e}}Object.defineProperty(a,
"__esModule",{value:!0});a.read=e;a.symbol3dEdgesProperty={types:{key:"type",base:l,typeMap:{solid:k,sketch:g}},json:{read:e,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f){return function(a){function c(b){b=
a.call(this)||this;b.color=new e([0,0,0,1]);b.extensionLength=0;b.size=m.px2pt(1);return b}l(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=k({},a),delete a.type);return a};c.prototype.clone=function(){};c.prototype.cloneProperties=function(){return{color:h.clone(this.color),size:this.size,extensionLength:this.extensionLength}};g([b.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);g([b.property(f.colorAndTransparencyProperty)],
c.prototype,"color",void 0);g([b.property(k({},f.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],c.prototype,"extensionLength",void 0);g([b.property(f.screenSizeProperty)],c.prototype,"size",void 0);return c=g([b.subclass("esri.symbols.edges.Edges3D")],c)}(b.declared(c))})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(d,a,l,g,k,e){function c(a,b){a=null!=b.transparency?e.transparencyToOpacity(b.transparency):1;return(b=b.color)&&Array.isArray(b)?new l([b[0]||0,b[1]||0,b[2]||0,a]):null}function h(a,b){b.color=a.toJSON().slice(0,3);a=e.opacityToTransparency(a.a);0!==a&&(b.transparency=a)}Object.defineProperty(a,"__esModule",{value:!0});a.readColorAndTransparency=c;a.writeColorAndTransparency=h;a.colorAndTransparencyProperty={type:l,json:{type:[k.Integer],default:null,read:{source:["color","transparency"],
reader:c},write:{target:{color:{type:[k.Integer]},transparency:{type:k.Integer}},writer:h}}};a.screenSizeProperty={type:Number,cast:g.toPt,json:{write:!0}}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=l.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-
a/100,1))}})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.type="sketch";return b}l(c,a);e=c;c.prototype.clone=function(){return new e(this.cloneProperties())};var e;g([k.property({type:["sketch"]})],c.prototype,"type",void 0);return c=e=g([k.subclass("esri.symbols.edges.SketchEdges3D")],
c)}(k.declared(e))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.type="solid";return b}l(c,a);e=c;c.prototype.clone=function(){return new e(this.cloneProperties())};var e;g([k.property({type:["solid"]})],c.prototype,"type",void 0);return c=e=g([k.subclass("esri.symbols.support.SolidEdges3D")],
c)}(k.declared(e))})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=null;return b}l(b,a);f=b;b.prototype.clone=function(){return new f({color:e.isSome(this.color)?
this.color.clone():null})};var f;g([c.property(h.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=f=g([c.subclass("esri.symbols.support.Symbol3DMaterial")],b)}(c.declared(k));a.Symbol3DMaterial=d;a.default=d})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),function(d,a,l,g,k,e,c,h){var m=new k.default({esriSFS:"simple-fill",
esriPFS:"picture-fill"});return function(a){function b(b){b=a.call(this,b)||this;b.outline=null;b.type=null;return b}l(b,a);g([e.property({type:c,json:{default:null,write:!0}})],b.prototype,"outline",void 0);g([e.property({type:m.apiValues,readOnly:!0,json:{type:m.jsonValues}})],b.prototype,"type",void 0);return b=g([e.subclass("esri.symbols.FillSymbol")],b)}(e.declared(h))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),
function(d,a,l,g,k,e,c,h,m){var b=new k.default({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(a){function f(b,c,f,e,d,h){b=a.call(this,b)||this;b.type="simple-line";
b.style="solid";b.cap="round";b.join="round";b.miterLimit=2;return b}l(f,a);d=f;f.prototype.normalizeCtorArgs=function(a,b,f,e,d,h){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.style=a);null!=b&&(g.color=b);null!=f&&(g.width=c.toPt(f));null!=e&&(g.cap=e);null!=d&&(g.join=d);null!=h&&(g.miterLimit=c.toPt(h));return g};f.prototype.clone=function(){return new d({color:e.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var d;g([h.enumeration.serializable()({esriSLS:"simple-line"})],
f.prototype,"type",void 0);g([h.property({type:b.apiValues,json:{read:b.read,write:b.write}})],f.prototype,"style",void 0);g([h.property({type:["butt","round","square"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],f.prototype,"cap",void 0);g([h.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],f.prototype,"join",void 0);g([h.property({type:Number,
json:{read:!1,write:!1}})],f.prototype,"miterLimit",void 0);return f=d=g([h.subclass("esri.symbols.SimpleLineSymbol")],f)}(h.declared(m))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(d,a,l,g,k,e,c){return function(a){function c(b){b=a.call(this,b)||this;b.type="simple-line";b.width=.75;return b}l(c,a);g([e.enumeration.serializable()({esriSLS:"simple-line"})],
c.prototype,"type",void 0);g([e.property({type:Number,cast:k.toPt,json:{write:!0}})],c.prototype,"width",void 0);return c=g([e.subclass("esri.symbols.LineSymbol")],c)}(e.declared(c))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),function(d,
a,l,g,k,e,c,h,m,b,f){return function(a){function c(b){b=a.call(this)||this;b.type="fill";b.material=null;b.castShadows=!0;b.outline=null;b.edges=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({edges:k.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:k.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,outline:k.isSome(this.outline)?this.outline.clone():null})};c.fromSimpleFillSymbol=
function(a){return new d({material:{color:(a.color||m.transparentWhite).clone()},outline:a.outline?new f.default({size:a.outline.width||0,color:(a.outline.color||m.white).clone()}):null})};var d;g([e.enumeration.serializable()({Fill:"fill"})],c.prototype,"type",void 0);g([e.property({type:b.default,json:{write:!0}})],c.prototype,"material",void 0);g([e.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);g([e.property({type:f.default,json:{write:!0}})],
c.prototype,"outline",void 0);g([e.property(h.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=d=g([e.subclass("esri.symbols.FillSymbol3DLayer")],c)}(e.declared(c))})},"esri/symbols/support/colors":function(){define(["require","exports","../../Color"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.white=new l("white");a.black=new l("black");a.transparentWhite=new l([255,255,255,0]);a.isBlack=function(a){return 0===a.r&&0===a.g&&0===a.b}})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/maybe ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),
function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);b=c;c.prototype.clone=function(){return new b({color:k.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};var b;g([e.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],c.prototype,"colorMixMode",void 0);return c=b=g([e.subclass("esri.symbols.support.Symbol3DFillMaterial")],c)}(e.declared(c.default));
a.Symbol3DFillMaterial=d;a.default=d})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new k([0,
0,0,1]);b.size=h.px2pt(1);return b}l(f,a);e=f;f.prototype.clone=function(){return new e({color:c.isSome(this.color)?this.color.clone():null,size:this.size})};var e;g([m.property(b.colorAndTransparencyProperty)],f.prototype,"color",void 0);g([m.property(b.screenSizeProperty)],f.prototype,"size",void 0);return f=e=g([m.subclass("esri.symbols.support.Symbol3DOutline")],f)}(m.declared(e));a.Symbol3DOutline=d;a.default=d})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}l(d,a);b=d;d.prototype.castSize=function(a){return e.toPt(a)};d.prototype.clone=function(){return new b({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var b;g([c.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],d.prototype,"decoration",void 0);
g([c.property({type:String,json:{write:!0}})],d.prototype,"family",void 0);g([c.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],d.prototype,"size",void 0);g([c.cast("size")],d.prototype,"castSize",null);g([c.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],d.prototype,"style",void 0);g([c.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],d.prototype,"weight",void 0);return d=
b=g([c.subclass("esri.symbols.Font")],d)}(c.declared(k))})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DMaterial ./support/Symbol3DOutline".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n){function r(a){var b=
"width"in a?a.width:a.size,c="height"in a?a.height:a.size,f=w(a.xoffset);a=w(a.yoffset);return(f||a)&&b&&c?{x:-f/b,y:a/c}:null}function w(a){return isFinite(a)?a:0}var t=k.getLogger("esri.symbols.IconSymbol3DLayer"),y={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return function(a){function d(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="icon";b.size=12;b.anchor="center";b.anchorPosition=void 0;b.outline=void 0;return b}l(d,a);
h=d;d.prototype.clone=function(){return new h({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:e.isSome(this.material)?this.material.clone():null,outline:e.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};d.fromSimpleMarkerSymbol=function(a){var b=a.color||m.white,c=r(a),f=a.outline&&0<a.outline.width?{size:a.outline.width,
color:(a.outline.color||m.white).clone()}:null,e=h,d=a.size;a=a.style;var g=y[a];g?a=g:(t.warn(a+' cannot be mapped to Icon symbol. Fallback to "circle"'),a="circle");return new e({size:d,resource:{primitive:a},material:{color:b},outline:f,anchor:c?"relative":void 0,anchorPosition:c})};d.fromPictureMarkerSymbol=function(a){var b=!a.color||m.isBlack(a.color)?m.white:a.color,c=r(a);return new h({size:a.width<=a.height?a.height:a.width,resource:{href:a.url},material:{color:b.clone()},anchor:c?"relative":
void 0,anchorPosition:c})};var h;g([c.property({type:u.default,json:{write:!0}})],d.prototype,"material",void 0);g([c.property({type:b.default,json:{write:!0}})],d.prototype,"resource",void 0);g([c.enumeration.serializable()({Icon:"icon"})],d.prototype,"type",void 0);g([c.property(f.screenSizeProperty)],d.prototype,"size",void 0);g([c.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",
relative:"relative"}),c.property({json:{default:"center"}})],d.prototype,"anchor",void 0);g([c.property({type:p.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:function(a){return new p.Symbol3DAnchorPosition2D({x:a[0],y:a[1]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],d.prototype,"anchorPosition",void 0);g([c.property({type:n.default,json:{write:!0}})],d.prototype,"outline",void 0);return d=h=g([c.subclass("esri.symbols.IconSymbol3DLayer")],
d)}(c.declared(h))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});var m=k.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});d=function(a){function b(b){return a.call(this,
b)||this}l(b,a);e=b;b.prototype.readHref=function(a,b,f){return a?c.fromJSON(a,f):b.dataURI};b.prototype.writeHref=function(a,b,f,e){a&&(c.isDataProtocol(a)?b.dataURI=a:(b.href=c.toJSON(a,e),c.isAbsolute(b.href)&&(b.href=c.normalize(b.href))))};b.prototype.clone=function(){return new e({href:this.href,primitive:this.primitive})};var e;g([h.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],b.prototype,"href",void 0);g([h.reader("href")],b.prototype,"readHref",null);g([h.writer("href",
{href:{type:String},dataURI:{type:String}})],b.prototype,"writeHref",null);g([h.enumeration.serializable()(m)],b.prototype,"primitive",void 0);return b=e=g([h.subclass("esri.symbols.support.IconSymbol3DLayerResource")],b)}(h.declared(e));a.IconSymbol3DLayerResource=d;a.defaultPrimitive="circle";a.default=d})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.x=0;b.y=0;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({x:this.x,y:this.y})};var d;g([e.property({type:Number})],c.prototype,"x",void 0);g([e.property({type:Number})],c.prototype,"y",void 0);return c=d=g([e.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],c)}(e.declared(k));a.Symbol3DAnchorPosition2D=d;a.default=d})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){var p=k.ofType({base:null,key:"type",typeMap:{text:m}});return function(a){function d(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new p;b.type="label-3d";return b}l(d,a);h=d;d.prototype.supportsCallout=function(){return!0};d.prototype.hasVisibleCallout=function(){return b.hasVisibleCallout(this)};d.prototype.hasVisibleVerticalOffset=function(){return b.hasVisibleVerticalOffset(this)};d.prototype.clone=function(){return new h({styleOrigin:e.clone(this.styleOrigin),
symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail),callout:e.clone(this.callout),verticalOffset:e.clone(this.verticalOffset)})};d.fromTextSymbol=function(a){return new h({symbolLayers:[m.fromTextSymbol(a)]})};var h;g([c.property({type:f.default,json:{write:!0}})],d.prototype,"verticalOffset",void 0);g([c.property(b.calloutProperty)],d.prototype,"callout",void 0);g([c.property({json:{read:!1,write:!1}})],d.prototype,"styleOrigin",void 0);g([c.property({type:p})],d.prototype,
"symbolLayers",void 0);g([c.enumeration.serializable()({LabelSymbol3D:"label-3d"})],d.prototype,"type",void 0);return d=h=g([c.subclass("esri.symbols.LabelSymbol3D")],d)}(c.declared(h))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/jsonMap ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B){var E={icon:r,object:t,line:w,path:y,fill:n,extrude:u,text:z,water:C},F=k.ofType({base:A,key:"type",typeMap:E}),H=c.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),G=h.getLogger("esri.symbols.Symbol3D");return function(a){function c(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;
b._set("symbolLayers",new (c&&c.type||k));return b}l(c,a);Object.defineProperty(c.prototype,"color",{get:function(){return null},set:function(a){G.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"symbolLayers",{set:function(a){e.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});c.prototype.readSymbolLayers=function(a,c,f){c=[];
for(var e=0;e<a.length;e++){var d=a[e],h=A.typeJSONDictionary.read(d.type),g=h&&E[h];g?(d=new g,d.read(a[e],f),c.push(d)):(G.warn("Unknown symbol layer type: "+h),f&&f.messages&&f.messages.push(new b("symbol-layer:unsupported","Symbol layers of type '"+(h||d.type||"unknown")+"' are not supported",{definition:d,context:f})))}return c};c.prototype.readStyleOrigin=function(a,c,f){if(a.styleUrl&&a.name)return c=m.fromJSON(a.styleUrl,f),new D({styleUrl:c,name:a.name});if(a.styleName&&a.name)return new D({portal:f&&
f.portal||p.getDefault(),styleName:a.styleName,name:a.name});f&&f.messages&&f.messages.push(new b("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:f,definition:a}))};c.prototype.writeStyleOrigin=function(a,c,f,e){a.styleUrl&&a.name?(f=m.toJSON(a.styleUrl,e),m.isAbsolute(f)&&(f=m.normalize(f)),c.styleOrigin={styleUrl:f,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!m.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?
e&&e.messages&&e.messages.push(new b("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):c.styleOrigin={styleName:a.styleName,name:a.name})};c.prototype.normalizeCtorArgs=function(a){return a instanceof A||a&&E[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};g([f.property({json:{read:!1,write:!1}})],c.prototype,"color",null);g([f.property({type:F,nonNullable:!0,json:{write:!0}}),
f.cast(e.castForReferenceSetter)],c.prototype,"symbolLayers",null);g([f.reader("symbolLayers")],c.prototype,"readSymbolLayers",null);g([f.property({type:D})],c.prototype,"styleOrigin",void 0);g([f.reader("styleOrigin")],c.prototype,"readStyleOrigin",null);g([f.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],c.prototype,"writeStyleOrigin",null);g([f.property({type:B.default,json:{read:!1}})],c.prototype,"thumbnail",
void 0);g([f.property({type:H.apiValues,readOnly:!0,json:{type:H.jsonValues,read:!1}})],c.prototype,"type",void 0);return c=g([f.subclass("esri.symbols.Symbol3D")],c)}(f.declared(x))})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,d,e){void 0===e&&(e=l);d||(d=new e);if(d===a)return d;d.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(l))?d.addMany(a):
a&&d.add(a);return d};a.castForReferenceSetter=function(a){return a}})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/materialUtils ./support/Symbol3DMaterial".split(" "),function(d,a,l,g,k,e,c,h,m,b,f){return function(a){function d(b){b=a.call(this)||this;b.material=null;b.type="line";b.join="miter";
b.cap="butt";b.size=e.px2pt(1);return b}l(d,a);h=d;d.prototype.clone=function(){return new h({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:k.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap})};d.fromSimpleLineSymbol=function(a){return new h({size:a.width||1,cap:a.cap||"butt",join:a.join||"miter",material:{color:(a.color||m.white).clone()}})};var h;g([c.property({type:f.default,json:{write:!0}})],d.prototype,"material",
void 0);g([c.enumeration.serializable()({Line:"line"})],d.prototype,"type",void 0);g([c.property({type:String,json:{write:!0,default:"miter"}})],d.prototype,"join",void 0);g([c.property({type:String,json:{write:!0,default:"butt"}})],d.prototype,"cap",void 0);g([c.property(b.screenSizeProperty)],d.prototype,"size",void 0);return d=h=g([c.subclass("esri.symbols.LineSymbol3DLayer")],d)}(c.declared(h))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
function(d,a,l,g,k,e,c,h,m,b){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.castShadows=!0;b.resource=null;b.type="object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.anchorPosition=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}l(c,a);f=c;c.prototype.clone=function(){return new f({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,
elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:k.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(c.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var f;g([e.property({type:b.default,json:{write:!0}})],c.prototype,"material",void 0);g([e.property({type:Boolean,
nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);g([e.property({type:h.default,json:{write:!0}})],c.prototype,"resource",void 0);g([e.enumeration.serializable()({Object:"object"})],c.prototype,"type",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"width",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"height",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"depth",void 0);g([e.enumeration.serializable()({center:"center",
top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),e.property({json:{default:"origin"}})],c.prototype,"anchor",void 0);g([e.property({type:m.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:function(a){return new m.Symbol3DAnchorPosition3D({x:a[0],y:a[1],z:a[2]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y,a.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],c.prototype,"anchorPosition",void 0);g([e.property({type:Number,json:{write:!0}})],
c.prototype,"heading",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"tilt",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"roll",void 0);g([e.property({readOnly:!0,dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);return c=f=g([e.subclass("esri.symbols.ObjectSymbol3DLayer")],c)}(e.declared(c))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});var m=k.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);e=b;b.prototype.clone=function(){return new e({href:this.href,primitive:this.primitive})};var e;g([h.property({type:String,json:{read:c.read,write:c.write}})],b.prototype,"href",void 0);g([h.enumeration.serializable()(m)],
b.prototype,"primitive",void 0);return b=e=g([h.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],b)}(h.declared(e));a.ObjectSymbol3DLayerResource=d;a.defaultPrimitive="sphere";a.default=d})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});
d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.x=0;b.y=0;b.z=0;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};var d;g([e.property({type:Number})],c.prototype,"x",void 0);g([e.property({type:Number})],c.prototype,"y",void 0);g([e.property({type:Number})],c.prototype,"z",void 0);return c=d=g([e.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],c)}(e.declared(k));a.Symbol3DAnchorPosition3D=d;a.default=d})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.castShadows=!0;b.type="path";b.profile="circle";b.join="miter";b.cap="butt";b.width=void 0;b.height=void 0;b.anchor="center";b.profileRotation="all";return b}l(b,a);c=b;Object.defineProperty(b.prototype,"size",{get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(a){this.height=this.width=
a},enumerable:!0,configurable:!0});b.prototype.readSize=function(a,b){return b.height||b.width?a:b.size};b.prototype.clone=function(){return new c({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:k.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};var c;g([e.property({type:h.default,
json:{write:!0}})],b.prototype,"material",void 0);g([e.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],b.prototype,"castShadows",void 0);g([e.enumeration.serializable()({Path:"path"})],b.prototype,"type",void 0);g([e.property({type:Number})],b.prototype,"size",null);g([e.reader("size")],b.prototype,"readSize",null);g([e.property({type:String,json:{write:!0,default:"circle"}})],b.prototype,"profile",void 0);g([e.property({type:String,json:{write:!0,default:"miter"}})],b.prototype,
"join",void 0);g([e.property({type:String,json:{write:!0,default:"butt"}})],b.prototype,"cap",void 0);g([e.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);g([e.property({type:Number,json:{write:!0}})],b.prototype,"height",void 0);g([e.property({type:String,json:{write:!0,default:"center"}})],b.prototype,"anchor",void 0);g([e.property({type:String,json:{write:!0,default:"all"}})],b.prototype,"profileRotation",void 0);return b=c=g([e.subclass("esri.symbols.PathSymbol3DLayer")],
b)}(e.declared(c))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/maybe ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u){return function(a){function b(b){b=a.call(this)||this;b._userSize=void 0;b.halo=null;b.material=null;
b.text=void 0;b.type="text";return b}l(b,a);d=b;Object.defineProperty(b.prototype,"font",{get:function(){return this._get("font")||null},set:function(a){a&&this._userSize&&(a.size=this._userSize);this._set("font",a)},enumerable:!0,configurable:!0});b.prototype.writeFont=function(a,b,c,f){c=k({},f,{textSymbol3D:!0});b.font=a.write({},c);delete b.font.size};Object.defineProperty(b.prototype,"size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:
9},set:function(a){this._userSize=a;this.font&&(this.font.size=this._userSize);this.notifyChange("size")},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&e.clone(this.font),halo:this.halo&&e.clone(this.halo),material:c.isSome(this.material)?this.material.clone():null,size:this.size,text:this.text})};b.fromTextSymbol=function(a){var b;b=a.haloColor;var c=a.haloSize;b=b&&0<c?
{color:e.clone(b),size:c}:null;c=a.font?a.font.clone():new m;return new d({size:c.size,font:c,halo:b,material:a.color?{color:a.color.clone()}:null,text:a.text})};var d;g([h.property({type:m,json:{write:!0}})],b.prototype,"font",null);g([h.writer("font")],b.prototype,"writeFont",null);g([h.property({type:p.default,json:{write:!0}})],b.prototype,"halo",void 0);g([h.property({type:u.default,json:{write:!0}})],b.prototype,"material",void 0);g([h.property(f.screenSizeProperty),h.property({dependsOn:["font.size"]})],
b.prototype,"size",null);g([h.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);g([h.enumeration.serializable()({Text:"text"})],b.prototype,"type",void 0);return b=d=g([h.subclass("esri.symbols.TextSymbol3DLayer")],b)}(h.declared(b))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new k([0,0,0,1]);b.size=0;return b}l(b,a);e=b;b.prototype.clone=function(){return new e({color:c.clone(this.color),size:this.size})};var e;g([h.property(m.colorAndTransparencyProperty)],b.prototype,"color",void 0);g([h.property(m.screenSizeProperty)],b.prototype,"size",void 0);return b=e=g([h.subclass("esri.symbols.support.Symbol3DHalo")],b)}(h.declared(e));
a.Symbol3DHalo=d;a.default=d})},"esri/symbols/WaterSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Symbol3DLayer".split(" "),function(d,a,l,g,k,e,c,h,m){return function(a){function b(b){b=a.call(this)||this;b.color=new k("#0077BE");b.type="water";b.waterbodySize="medium";b.waveDirection=null;b.waveStrength="moderate";return b}l(b,a);
d=b;b.prototype.clone=function(){return new d({color:e.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};var d;g([c.property({type:k,json:{type:[h.Integer],write:!0,default:null}})],b.prototype,"color",void 0);g([c.enumeration.serializable()({Water:"water"})],b.prototype,"type",void 0);g([c.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],b.prototype,"waterbodySize",void 0);g([c.property({type:Number,
json:{write:!0,default:null}})],b.prototype,"waveDirection",void 0);g([c.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],b.prototype,"waveStrength",void 0);return b=d=g([c.subclass("esri.symbols.WaterSymbol3DLayer")],b)}(c.declared(m))})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var b;g([e.property({type:String})],d.prototype,"name",void 0);g([e.property({type:String})],d.prototype,"styleUrl",void 0);g([e.property({type:String})],d.prototype,"styleName",void 0);g([e.property({type:c})],d.prototype,"portal",void 0);
return d=b=g([e.subclass("esri.symbols.support.StyleOrigin")],d)}(e.declared(k))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);d=c;c.prototype.clone=function(){return new d({url:this.url})};
var d;g([e.property({type:String})],c.prototype,"url",void 0);return c=d=g([e.subclass("esri.symbols.support.Thumbnail")],c)}(e.declared(k));a.Thumbnail=d;a.default=d})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(d,a,l,g){function k(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function e(a,e,d){if(!a)return a;switch(a.type){case "line":return e=new g,e.read(a,d),e}}Object.defineProperty(a,
"__esModule",{value:!0});a.hasVisibleVerticalOffset=k;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var c=a.callout;return c&&c.visible?k(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=e;a.calloutProperty={types:{key:"type",base:l,typeMap:{line:g}},json:{read:e,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c){return function(a){function e(b){b=a.call(this)||this;b.visible=!0;return b}g(e,a);e.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l({},a),delete a.type);return a};e.prototype.clone=function(){};k([c.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],e.prototype,"type",void 0);k([c.property({readOnly:!0})],e.prototype,"visible",void 0);return e=k([c.subclass("esri.symbols.callouts.Callout3D")],e)}(c.declared(e))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){return function(a){function b(b){b=a.call(this)||this;b.type="line";b.color=new k([0,0,0,1]);b.size=h.px2pt(1);b.border=null;return b}l(b,a);d=b;Object.defineProperty(b.prototype,"visible",{get:function(){return 0<this.size&&c.isSome(this.color)&&0<this.color.a},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({color:e.clone(this.color),size:this.size,border:e.clone(this.border)})};var d;g([m.property({type:["line"]})],b.prototype,"type",
void 0);g([m.property(p.colorAndTransparencyProperty)],b.prototype,"color",void 0);g([m.property(p.screenSizeProperty)],b.prototype,"size",void 0);g([m.property({type:f.default,json:{write:!0}})],b.prototype,"border",void 0);g([m.property({dependsOn:["size","color"],readOnly:!0})],b.prototype,"visible",null);return b=d=g([m.subclass("esri.symbols.callouts.LineCallout3D")],b)}(m.declared(b))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new k("white");return b}l(b,a);e=b;b.prototype.clone=function(){return new e({color:c.clone(this.color)})};var e;g([h.property(m.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=e=g([h.subclass("esri.symbols.callouts.LineCallout3DBorder")],b)}(h.declared(e));a.LineCallout3DBorder=d;a.default=d})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var b;g([e.property(c.screenSizeProperty)],d.prototype,"screenLength",void 0);g([e.property({type:Number,json:{write:!0,default:0}})],d.prototype,"minWorldLength",
void 0);g([e.property({type:Number,json:{write:!0}})],d.prototype,"maxWorldLength",void 0);return d=b=g([e.subclass("esri.symbols.support.Symbol3DVerticalOffset")],d)}(e.declared(k));a.Symbol3DVerticalOffset=d;a.default=d})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),function(d,
a,l,g,k,e,c,h,m,b){var f=k.ofType({base:null,key:"type",typeMap:{line:h,path:m}}),p=k.ofType({base:null,key:"type",typeMap:{line:h,path:m}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new f;b.type="line-3d";return b}l(b,a);d=b;b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};b.fromSimpleLineSymbol=function(a){return new d({symbolLayers:[h.fromSimpleLineSymbol(a)]})};
var d;g([c.property({type:f,json:{type:p}})],b.prototype,"symbolLayers",void 0);g([c.enumeration.serializable()({LineSymbol3D:"line-3d"})],b.prototype,"type",void 0);return b=d=g([c.subclass("esri.symbols.LineSymbol3D")],b)}(c.declared(b))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(d,a,l,g,k,e,c,h){var m=
new k.default({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(a){function b(b){b=a.call(this,b)||this;b.angle=0;b.type=null;b.xoffset=0;b.yoffset=0;b.size=9;return b}l(b,a);g([c.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);g([c.property({type:m.apiValues,readOnly:!0,json:{type:m.jsonValues}})],b.prototype,"type",void 0);g([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,
"xoffset",void 0);g([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);g([c.property({type:Number,cast:function(a){return"auto"===a?a:e.toPt(a)},json:{write:!0}})],b.prototype,"size",void 0);return b=g([c.subclass("esri.symbols.MarkerSymbol")],b)}(c.declared(h))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(d,a,l,g,k,e,c,h,m){var b=k.ofType({base:null,key:"type",typeMap:{fill:h}});return function(a){function f(c){c=a.call(this)||this;c.symbolLayers=new b;c.type="mesh-3d";return c}l(f,a);d=f;f.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};var d;g([c.property({type:b})],f.prototype,"symbolLayers",void 0);g([c.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],f.prototype,"type",void 0);
return f=d=g([c.subclass("esri.symbols.MeshSymbol3D")],f)}(c.declared(m))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b){return function(a){function f(b,c,e,f){b=a.call(this,b)||this;b.type="picture-fill";b.url=null;b.xscale=1;b.yscale=
1;b.width=12;b.height=12;b.xoffset=0;b.yoffset=0;b.source=null;return b}l(f,a);d=f;f.prototype.normalizeCtorArgs=function(a,b,e,f){if(a&&"string"!==typeof a&&null==a.imageData)return a;var d={};a&&(d.url=a);b&&(d.outline=b);null!=e&&(d.width=c.toPt(e));null!=f&&(d.height=c.toPt(f));return d};f.prototype.clone=function(){var a=new d({color:e.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,
yscale:this.yscale});a._set("source",e.clone(this.source));return a};var d;g([h.enumeration.serializable()({esriPFS:"picture-fill"})],f.prototype,"type",void 0);g([h.property(b.urlPropertyDefinition)],f.prototype,"url",void 0);g([h.property({type:Number,json:{write:!0}})],f.prototype,"xscale",void 0);g([h.property({type:Number,json:{write:!0}})],f.prototype,"yscale",void 0);g([h.property({type:Number,cast:c.toPt,json:{write:!0}})],f.prototype,"width",void 0);g([h.property({type:Number,cast:c.toPt,
json:{write:!0}})],f.prototype,"height",void 0);g([h.property({type:Number,cast:c.toPt,json:{write:!0}})],f.prototype,"xoffset",void 0);g([h.property({type:Number,cast:c.toPt,json:{write:!0}})],f.prototype,"yoffset",void 0);g([h.property(b.sourcePropertyDefinition)],f.prototype,"source",void 0);return f=d=g([h.subclass("esri.symbols.PictureFillSymbol")],f)}(h.declared(m))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(d,a,l){function g(a,
e,d){return e.imageData?l.makeData({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):k(e.url,d)}function k(a,e){return!e||"service"!==e.origin&&"portal-item"!==e.origin||!e.layer||"feature"!==e.layer.type&&"stream"!==e.layer.type||l.isAbsolute(a)||!e.layer.parsedUrl?l.fromJSON(a,e):l.join(e.layer.parsedUrl.path,"images",a)}function e(a,e,d,b){l.isDataProtocol(a)?(a=l.dataComponents(a),e.contentType=a.mediaType,e.imageData=a.data,d&&d.imageData===e.imageData&&d.url&&l.write(d.url,
e,"url",b)):l.write(a,e,"url",b)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=g;a.read=k;a.writeImageDataAndUrl=e;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:g},write:{writer:function(a,d,g,b){e(a,d,this.source,b)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,e,d){a={};e.imageData&&(a.imageData=e.imageData);e.contentType&&(a.contentType=e.contentType);e.url&&(a.url=k(e.url,d));return a}}}}})},
"esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),function(d,a,l,g,k,e,c,h,m){return function(a){function b(b,c,e){b=a.call(this,b)||this;b.color=null;b.type="picture-marker";b.url=null;b.source=null;b.height=12;b.width=12;b.size=null;return b}l(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,
b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);null!=b&&(f.width=e.toPt(b));null!=c&&(f.height=e.toPt(c));return f};b.prototype.readHeight=function(a,b){return b.size||a};b.prototype.readWidth=function(a,b){return b.size||a};b.prototype.clone=function(){var a=new d({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",k.clone(this.source));return a};var d;g([c.property({json:{write:!1}})],b.prototype,
"color",void 0);g([c.enumeration.serializable()({esriPMS:"picture-marker"})],b.prototype,"type",void 0);g([c.property(m.urlPropertyDefinition)],b.prototype,"url",void 0);g([c.property(m.sourcePropertyDefinition)],b.prototype,"source",void 0);g([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,"height",void 0);g([c.reader("height",["height","size"])],b.prototype,"readHeight",null);g([c.property({type:Number,cast:e.toPt,json:{write:!0}})],b.prototype,"width",void 0);g([c.property({json:{write:!1}})],
b.prototype,"size",void 0);return b=d=g([c.subclass("esri.symbols.PictureMarkerSymbol")],b)}(c.declared(h))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,
p,u,n){var r=k.ofType({base:null,key:"type",typeMap:{icon:m,object:b,text:p}}),w=k.ofType({base:null,key:"type",typeMap:{icon:m,object:b}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new r;b.type="point-3d";return b}l(b,a);f=b;b.prototype.writeSymbolLayers=function(a,b,c,f){var d=a.filter(function(a){return"text"!==a.type});f&&f.messages&&d.length<a.length&&(a=a.find(function(a){return"text"===a.type}),f.messages.push(new e("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));b[c]=d.map(function(a){return a.write({},f)}).toArray()};b.prototype.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(var a=0,b=this.symbolLayers.items;a<b.length;a++)switch(b[a].type){case "icon":case "text":case "object":continue;default:return!1}return!0};b.prototype.hasVisibleCallout=function(){return u.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=
function(){return u.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new f({verticalOffset:c.clone(this.verticalOffset),callout:c.clone(this.callout),styleOrigin:c.clone(this.styleOrigin),symbolLayers:c.clone(this.symbolLayers),thumbnail:c.clone(this.thumbnail)})};b.fromSimpleMarkerSymbol=function(a){return new f({symbolLayers:[m.fromSimpleMarkerSymbol(a)]})};b.fromPictureMarkerSymbol=function(a){return new f({symbolLayers:[m.fromPictureMarkerSymbol(a)]})};b.fromTextSymbol=function(a){return new f({symbolLayers:[p.fromTextSymbol(a)]})};
var f;g([h.property({type:n.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);g([h.property(u.calloutProperty)],b.prototype,"callout",void 0);g([h.property({type:r,json:{type:w,origins:{"web-scene":{type:w}}}})],b.prototype,"symbolLayers",void 0);g([h.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);g([h.enumeration.serializable()({PointSymbol3D:"point-3d"})],b.prototype,"type",void 0);return b=f=g([h.subclass("esri.symbols.PointSymbol3D")],b)}(h.declared(f))})},
"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/maybe ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){var y=k.ofType({base:null,key:"type",typeMap:{extrude:b,
fill:f,icon:p,line:u,object:n,text:w,water:t}}),x=k.ofType({base:null,key:"type",typeMap:{extrude:b,fill:f,icon:p,line:u,object:n,water:t}});return function(a){function b(b){b=a.call(this)||this;b.type="polygon-3d";return b}l(b,a);d=b;b.prototype.writeSymbolLayers=function(a,b,c,f){var d=a.filter(function(a){return"text"!==a.type});f&&f.messages&&d.length<a.length&&(a=a.find(function(a){return"text"===a.type}),f.messages.push(new e("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",
{symbolLayer:a})));b[c]=d.map(function(a){return a.write({},f)}).toArray()};b.prototype.clone=function(){return new d({styleOrigin:c.clone(this.styleOrigin),symbolLayers:c.clone(this.symbolLayers),thumbnail:c.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),e=b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&
!1===a.symbolLayers[1].enable||(c.outline={size:e.size,color:h.isSome(e.material)?e.material.color:null});b.symbolLayers.removeAt(1)}return b};b.fromSimpleFillSymbol=function(a){return new d({symbolLayers:[f.fromSimpleFillSymbol(a)]})};var d;g([m.property({type:y,json:{type:x}})],b.prototype,"symbolLayers",void 0);g([m.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);g([m.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],b.prototype,"type",void 0);return b=d=g([m.subclass("esri.symbols.PolygonSymbol3D")],
b)}(m.declared(r))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ./FillSymbol ./SimpleLineSymbol".split(" "),function(d,a,l,g,k,e,c,h,m,b,f){var p=new c.default({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",
esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});return function(a){function b(b,c,d){b=a.call(this,b)||this;b.color=new e([0,0,0,.25]);b.outline=new f;b.type="simple-fill";b.style="solid";return b}l(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var e={};a&&(e.style=a);b&&(e.outline=b);c&&(e.color=c);return e};b.prototype.clone=function(){return new c({color:h.clone(this.color),outline:this.outline&&
this.outline.clone(),style:this.style})};var c;g([m.property()],b.prototype,"color",void 0);g([m.property()],b.prototype,"outline",void 0);g([m.enumeration.serializable()({esriSFS:"simple-fill"})],b.prototype,"type",void 0);g([m.property({type:p.apiValues,json:{read:p.read,write:p.write}})],b.prototype,"style",void 0);return b=c=g([m.subclass("esri.symbols.SimpleFillSymbol")],b)}(m.declared(b))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){var p=new e.default({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(a){function b(b,c,e,d){b=a.call(this,b)||this;b.color=new k([255,255,255,.25]);b.type="simple-marker";b.size=12;b.style="circle";b.outline=new f;return b}l(b,a);e=b;b.prototype.normalizeCtorArgs=function(a,b,c,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&
(f.size=h.toPt(b));c&&(f.outline=c);e&&(f.color=e);return f};b.prototype.writeColor=function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())};Object.defineProperty(b.prototype,"path",{set:function(a){this.style="path";this._set("path",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new e({angle:this.angle,color:c.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};
var e;g([m.property()],b.prototype,"color",void 0);g([m.writer("color")],b.prototype,"writeColor",null);g([m.enumeration.serializable()({esriSMS:"simple-marker"})],b.prototype,"type",void 0);g([m.property()],b.prototype,"size",void 0);g([m.property({type:p.apiValues,json:{read:p.read,write:p.write}})],b.prototype,"style",void 0);g([m.property({type:String,json:{write:!0}})],b.prototype,"path",null);g([m.property({type:f,json:{default:null,write:!0}})],b.prototype,"outline",void 0);return b=e=g([m.subclass("esri.symbols.SimpleMarkerSymbol")],
b)}(m.declared(b))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(d,a,l,g,k,e,c,h,m,b){return function(a){function b(b,c,e){b=a.call(this,b)||this;b.backgroundColor=null;b.borderLineColor=null;b.borderLineSize=null;b.font=new m;b.horizontalAlignment="center";b.kerning=!0;b.haloColor=null;b.haloSize=
null;b.rightToLeft=null;b.rotated=!1;b.text="";b.type="text";b.verticalAlignment=null;b.xoffset=0;b.yoffset=0;b.angle=0;b.width=null;return b}l(b,a);f=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var e={};a&&(e.text=a);b&&(e.font=b);c&&(e.color=c);return e};b.prototype.clone=function(){return new f({angle:this.angle,backgroundColor:e.clone(this.backgroundColor),borderLineColor:e.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:e.clone(this.color),
font:this.font&&this.font.clone(),haloColor:e.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var f;g([h.property({type:k,json:{write:!0}})],b.prototype,"backgroundColor",void 0);g([h.property({type:k,json:{write:!0}})],b.prototype,"borderLineColor",void 0);g([h.property({type:Number,
json:{write:!0}})],b.prototype,"borderLineSize",void 0);g([h.property({type:m,json:{write:!0}})],b.prototype,"font",void 0);g([h.property({type:["left","right","center","justify"],json:{write:!0}})],b.prototype,"horizontalAlignment",void 0);g([h.property({type:Boolean,json:{write:!0}})],b.prototype,"kerning",void 0);g([h.property({type:k,json:{write:!0}})],b.prototype,"haloColor",void 0);g([h.property({type:Number,cast:c.toPt,json:{write:!0}})],b.prototype,"haloSize",void 0);g([h.property({type:Boolean,
json:{write:!0}})],b.prototype,"rightToLeft",void 0);g([h.property({type:Boolean,json:{write:!0}})],b.prototype,"rotated",void 0);g([h.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);g([h.property({type:String,readOnly:!0})],b.prototype,"type",void 0);g([h.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],b.prototype,"verticalAlignment",void 0);g([h.property({type:Number,cast:c.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);g([h.property({type:Number,
cast:c.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);g([h.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);g([h.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);return b=f=g([h.subclass("esri.symbols.TextSymbol")],b)}(h.declared(b))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/jsonMap ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){function w(){return e(this,void 0,void 0,function(){return k(this,function(a){return[2,b.create(function(a){return d(["./support/styleUtils"],a)})]})})}var t=m.getLogger("esri.symbols.WebStyleSymbol"),y=h.strict()({styleSymbolReference:"web-style"});return function(a){function d(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}l(d,a);h=d;d.prototype.read=function(a,b){this.portal=
b?b.portal:void 0;this.inherited(arguments,[a,b])};d.prototype.clone=function(){return new h({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};d.prototype.fetchSymbol=function(a){return c.safeCast(this._fetchSymbol("webRef",a))};d.prototype.fetchCIMSymbol=function(a){return c.safeCast(this._fetchSymbol("cimRef",a))};d.prototype._fetchSymbol=function(a,c){return e(this,void 0,void 0,function(){var e,f;return k(this,function(d){switch(d.label){case 0:return[4,w()];
case 1:return e=d.sent(),b.throwIfAborted(c),f=e.resolveWebStyleSymbol(this,{portal:this.portal},a,c),f.catch(function(a){t.error("#fetchSymbol()","Failed to create symbol from style",a)}),[2,f]}})})};var h;g([p.property({json:{write:!1}})],d.prototype,"color",void 0);g([p.property({type:String,json:{write:!0}})],d.prototype,"styleName",void 0);g([p.property({type:u,json:{write:!1}})],d.prototype,"portal",void 0);g([p.property({type:String,json:{read:f.read,write:f.write}})],d.prototype,"styleUrl",
void 0);g([p.property({type:r.default,json:{read:!1}})],d.prototype,"thumbnail",void 0);g([p.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);g([p.property({type:y.apiValues,readOnly:!0,json:{type:y.jsonValues,read:!1,write:y.write}})],d.prototype,"type",void 0);return d=h=g([p.subclass("esri.symbols.WebStyleSymbol")],d)}(p.declared(n))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../CIMSymbol ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A){function z(a,b,c){b=a?D[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new g("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function C(a,b,c){if(!a)return null;if(c&&"web-scene"===c.origin&&!a.isInstanceOf(w)&&!a.isInstanceOf(y)){var e=A.to3D(a);if(e.symbol)return e.symbol.write(b,c);c.messages&&c.messages.push(new l("symbol:unsupported",
"Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:e.error}));return null}return a.write(b,c)}Object.defineProperty(a,"__esModule",{value:!0});var D={esriSMS:r,esriPMS:b,esriTS:t,esriSLS:n,esriSFS:u,esriPFS:m,PointSymbol3D:f,LineSymbol3D:c,PolygonSymbol3D:p,MeshSymbol3D:h,LabelSymbol3D:e,styleSymbolReference:y,CIMSymbolReference:k};a.read=z;a.writeTarget=function(a,b,c,e){(a=C(a,{},e))&&(b[c]=
a)};a.write=C;a.fromJSON=function(a,b){return z(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new x}c&&c.read(a,b);return c}})},"esri/symbols/support/symbolConversion":function(){define(["require","exports","../../symbols","../../core/Error"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});a.to3D=function(a,e,c,d){void 0===e&&(e=!1);void 0===c&&(c=!1);void 0===d&&(d=!0);if(!a)return{symbol:null};if(l.isSymbol3D(a)||a instanceof
l.WebStyleSymbol)d=a.clone();else if(a instanceof l.SimpleLineSymbol)d=l.LineSymbol3D.fromSimpleLineSymbol(a);else if(a instanceof l.SimpleMarkerSymbol)d=l.PointSymbol3D.fromSimpleMarkerSymbol(a);else if(a instanceof l.PictureMarkerSymbol)d=l.PointSymbol3D.fromPictureMarkerSymbol(a);else if(a instanceof l.SimpleFillSymbol)d=l.PolygonSymbol3D.fromSimpleFillSymbol(a);else if(a instanceof l.TextSymbol)d=d?l.LabelSymbol3D.fromTextSymbol(a):l.PointSymbol3D.fromTextSymbol(a);else return{error:new g("symbol-conversion:unsupported-2d-symbol",
"2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};e&&(d.id=a.id);if(c&&l.isSymbol3D(d))for(a=0;a<d.symbolLayers.length;++a)d.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:d}}})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../geometry ../../Graphic ../../core/compilerUtils ../../core/lang ../../core/maybe ../../core/typedArrayUtil ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ../../geometry/support/quantizationUtils ../support/Field ./dehydratedFeatureComparison".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){function w(a,b,c){if(!a)return null;switch(b){case "point":return a={x:a.x,y:a.y,z:a.z,m:a.m,hasZ:null!=a.z,hasM:null!=a.m,type:"point",spatialReference:c};case "polyline":return a={paths:a.paths,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polyline",spatialReference:c};case "polygon":return a={rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polygon",spatialReference:c};case "multipoint":return a={points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"multipoint",spatialReference:c}}}
function t(a,b,c,e){return{x:a,y:b,z:c,hasZ:null!=c,hasM:!1,spatialReference:e,type:"point"}}function y(a){return"declaredClass"in a}function x(a){return"declaredClass"in a}function A(a){return"declaredClass"in a}function z(a){return c.isNone(a)?null:y(a)?a:p.fromJSON(D(a))}function C(a){if(c.isNone(a))return 0;switch(a.type){case "point":return 1;case "polyline":var b=0,e=0;for(a=a.paths;e<a.length;e++)b+=a[e].length;return b;case "polygon":e=b=0;for(a=a.rings;e<a.length;e++)b+=a[e].length;return b;
case "multipoint":return a.points.length;case "extent":return 2;case "mesh":return(b=a.vertexAttributes&&a.vertexAttributes.position)?b.length/3:0;default:k.neverReached(a)}}function D(a){var b=a.spatialReference.toJSON();switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m,spatialReference:b};case "polygon":var c=a.hasZ,e=a.hasM;return{rings:B(a.rings),hasZ:c,hasM:e,spatialReference:b};case "polyline":var f=a.paths,c=a.hasZ,e=a.hasM;return{paths:B(f),hasZ:c,hasM:e,spatialReference:b};case "extent":var f=
a.xmin,d=a.xmax,g=a.ymin,h=a.ymax,m=a.zmin,l=a.zmax,n=a.mmin,p=a.mmax,c=a.hasZ,e=a.hasM;return{xmin:f,xmax:d,ymin:g,ymax:h,zmin:m,zmax:l,mmin:n,mmax:p,hasZ:c,hasM:e,spatialReference:b};case "multipoint":return f=a.points,c=a.hasZ,e=a.hasM,{points:H(f)?E(f):f,hasZ:c,hasM:e,spatialReference:b};default:k.neverReached(a)}}function B(a){return F(a)?a.map(function(a){return E(a)}):a}function E(a){return a.map(function(a){return h.toArray(a)})}function F(a){for(var b=0;b<a.length;b++){var c=a[b];if(0!==
c.length)return H(c)}return!1}function H(a){return a.length&&(h.isFloat32Array(a[0])||h.isFloat64Array(a[0]))}function G(a,c){b.empty(c);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":c[0]=c[3]=a.x;c[1]=c[4]=a.y;a.hasZ&&(c[2]=c[5]=a.z);break;case "polyline":for(var e=0;e<a.paths.length;e++)b.expandWithNestedArray(c,a.paths[e],a.hasZ);break;case "polygon":for(e=0;e<a.rings.length;e++)b.expandWithNestedArray(c,a.rings[e],a.hasZ);break;case "multipoint":b.expandWithNestedArray(c,a.points,
a.hasZ);break;case "extent":c[0]=a.xmin;c[1]=a.ymin;c[3]=a.xmax;c[4]=a.ymax;null!=a.zmin&&(c[2]=a.zmin);null!=a.zmax&&(c[5]=a.zmax);break;default:k.neverReached(a)}}function J(a,b){f.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)f.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)f.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":f.expandWithNestedArray(b,
a.points);break;case "extent":b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;break;default:k.neverReached(a)}}Object.defineProperty(a,"__esModule",{value:!0});a.equals=r.equals;d=function(){return function(a,b,c){this.uid=a;this.geometry=b;this.attributes=c;this.visible=!0;this.centroid=this.objectId=null}}();a.DehydratedFeatureClass=d;a.hasGeometry=function(a){return c.isSome(a.geometry)};a.isFeatureGeometry=function(a){return l.isFeatureGeometryType(a.type)};d=function(){return function(){this.exceededTransferLimit=
!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null}}();a.DehydratedFeatureSetClass=d;a.isPoint=function(a){return"point"===a.type};a.fromFeatureSetJSON=function(a){var b=l.featureGeometryTypeKebabDictionary.fromJSON(a.geometryType),c=m.fromJSON(a.spatialReference),e=a.transform,f=a.features.map(function(f){var d=a.objectIdFieldName;f={uid:g.generateUID(),
objectId:d&&f.attributes?f.attributes[d]:null,attributes:f.attributes,geometry:w(f.geometry,b,c),visible:!0};if((d=f.geometry)&&e)switch(d.type){case "point":f.geometry=u.hydratePoint(e,d,d,d.hasZ,d.hasM);break;case "multipoint":f.geometry=u.hydrateMultipoint(e,d,d,d.hasZ,d.hasM);break;case "polygon":f.geometry=u.hydratePolygon(e,d,d,d.hasZ,d.hasM);break;case "polyline":f.geometry=u.hydratePolyline(e,d,d,d.hasZ,d.hasM);break;default:k.neverReached(d)}return f});return{geometryType:b,features:f,spatialReference:c,
fields:a.fields?a.fields.map(function(a){return n.fromJSON(a)}):null,objectIdFieldName:a.objectIdFieldName,globalIdFieldName:a.globalIdFieldName,geohashFieldName:a.geohashFieldName,geometryProperties:a.geometryProperties,hasZ:a.hasZ,hasM:a.hasM,exceededTransferLimit:a.exceededTransferLimit,transform:null}};a.fromJSONGeometry=w;a.makeDehydratedPoint=t;a.isHydratedGeometry=y;a.isHydratedPoint=x;a.isHydratedGraphic=A;a.hydrateGraphic=function(a,b){if(!a||A(a))return a;b=new g({layer:b,sourceLayer:b});
b.visible=a.visible;b.symbol=e.clone(a.symbol);b.attributes=e.clone(a.attributes);b.geometry=z(a.geometry);return b};a.hydrateGeometry=z;a.clonePoint=function(a,b){if(!a)return null;if(x(a)){if(null==b)return a.clone();if(x(b))return b.copy(a)}null!=b?(b.x=a.x,b.y=a.y,b.spatialReference=a.spatialReference,a.hasZ?(b.z=a.z,b.hasZ=a.hasZ):(b.z=null,b.hasZ=!1),a.hasM?(b.m=a.m,b.hasM=!0):(b.m=null,b.hasM=!1)):(b=t(a.x,a.y,a.z,a.spatialReference),a.hasM&&(b.m=a.m,b.hasM=!0));return b};a.estimateSize=function(a){for(var b=
32,e=0,f=Object.keys(a.attributes);e<f.length;e++){var d=f[e],b=b+d.length,d=a.attributes[d];switch(typeof d){case "string":b+=d.length;break;default:case "number":b+=8}}a=c.isSome(a.geometry)?"mesh"===a.geometry.type?0:C(a.geometry):0;return b+12*a};a.numVertices=C;a.hasVertices=function(a){if(!a)return!1;switch(a.type){case "extent":case "point":return!0;case "polyline":var b=0;for(a=a.paths;b<a.length;b++)if(0<a[b].length)return!0;return!1;case "polygon":b=0;for(a=a.rings;b<a.length;b++)if(0<a[b].length)return!0;
return!1;case "multipoint":return 0<a.points.length;case "mesh":return a.vertexAttributes&&a.vertexAttributes.position&&0<a.vertexAttributes.position.length;default:k.neverReached(a)}};a.computeAABB=G;a.expandAABB=function(a,c){G(a,K);b.expand(c,K)};a.computeAABR=J;a.expandAABR=function(a,b){J(a,I);f.expand(b,I)};a.getObjectId=function(a,b){return null!=a.objectId?a.objectId:a.attributes&&b?a.attributes[b]:null};var K=b.create(),I=f.create()})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./domains ./fieldType".split(" "),
function(d,a,l,g,k,e,c,h,m,b){var f=new k.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(a){function e(b){b=a.call(this)||this;b.alias=null;
b.defaultValue=void 0;b.description=null;b.domain=null;b.editable=!0;b.length=-1;b.name=null;b.nullable=!0;b.type=null;b.valueType=null;return b}l(e,a);d=e;e.prototype.readDescription=function(a,b){a=b.description;var c;try{c=JSON.parse(a)}catch(y){}return c?c.value:null};e.prototype.readValueType=function(a,b){a=b.description;var c;try{c=JSON.parse(a)}catch(y){}return c?f.fromJSON(c.fieldValueType):null};e.prototype.clone=function(){return new d({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};var d;g([c.property({type:String,json:{write:!0}})],e.prototype,"alias",void 0);g([c.property({type:[String,Number],json:{write:{allowNull:!0}}})],e.prototype,"defaultValue",void 0);g([c.property()],e.prototype,"description",void 0);g([c.reader("description")],e.prototype,"readDescription",null);g([c.property({types:m.types,json:{read:{reader:m.fromJSON},
write:!0}})],e.prototype,"domain",void 0);g([c.property({type:Boolean,json:{write:!0}})],e.prototype,"editable",void 0);g([c.property({type:h.Integer,json:{write:!0}})],e.prototype,"length",void 0);g([c.property({type:String,json:{write:!0}})],e.prototype,"name",void 0);g([c.property({type:Boolean,json:{write:!0}})],e.prototype,"nullable",void 0);g([c.enumeration.serializable()(b.kebabDict)],e.prototype,"type",void 0);g([c.property()],e.prototype,"valueType",void 0);g([c.reader("valueType",["description"])],
e.prototype,"readValueType",null);return e=d=g([c.subclass("esri.layers.support.Field")],e)}(c.declared(e))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/jsonMap"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=new l.default({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",
esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports","../../core/compilerUtils","../../core/maybe"],function(d,a,l,g){function k(a,c){if(a===c)return!0;if(null==a||null==c||a.length!==c.length)return!1;for(var b=0;b<a.length;b++){var e=a[b],f=c[b];if(e.length!==f.length)return!1;
for(var d=0;d<e.length;d++)if(e[d]!==f[d])return!1}return!0}function e(a,c){if(a===c)return!0;if(null==a||null==c||a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(!k(a[b],c[b]))return!1;return!0}function c(a,c){return a===c||a&&c&&a.equals(c)}function h(a,f){if(a===f)return!0;if(g.isNone(a)||g.isNone(f)||a.type!==f.type)return!1;switch(a.type){case "point":return a=c(a.spatialReference,f.spatialReference)?a.x===f.x&&a.y===f.y&&a.z===f.z&&a.m===f.m:!1,a;case "extent":return a=a.hasZ!==f.hasZ||
a.hasM!==f.hasM?!1:c(a.spatialReference,f.spatialReference)?a.xmin===f.xmin&&a.ymin===f.ymin&&a.zmin===f.zmin&&a.xmax===f.xmax&&a.ymax===f.ymax&&a.zmax===f.zmax:!1,a;case "polyline":return a=a.hasZ!==f.hasZ||a.hasM!==f.hasM?!1:c(a.spatialReference,f.spatialReference)?e(a.paths,f.paths):!1,a;case "polygon":return a=a.hasZ!==f.hasZ||a.hasM!==f.hasM?!1:c(a.spatialReference,f.spatialReference)?e(a.rings,f.rings):!1,a;case "multipoint":return a=a.hasZ!==f.hasZ||a.hasM!==f.hasM?!1:c(a.spatialReference,
f.spatialReference)?k(a.points,f.points):!1,a;case "mesh":return!1;default:l.neverReached(a)}}function m(a,c){if(a===c)return!0;if(!a||!c)return!1;var b=Object.keys(a),e=Object.keys(c);if(b.length!==e.length)return!1;for(e=0;e<b.length;e++){var f=b[e];if(a[f]!==c[f])return!1}return!0}Object.defineProperty(a,"__esModule",{value:!0});a.equals=function(a,c){return a===c?!0:null!=a&&null!=c&&a.objectId===c.objectId&&h(a.geometry,c.geometry)&&m(a.attributes,c.attributes)?!0:!1}})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require",
"exports","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}a.prototype.createFeatureResult=function(){return new g.default};a.prototype.prepareFeatures=function(){};a.prototype.finishFeatureResult=function(){};a.prototype.addFeature=
function(a,e){a.features.push(e)};a.prototype.createFeature=function(){return new l.default};a.prototype.createSpatialReference=function(){return{wkid:0}};a.prototype.createGeometry=function(){return new k.default};a.prototype.addField=function(a,e){a.fields.push(e)};a.prototype.addCoordinate=function(a,e){a.coords.push(e)};a.prototype.addCoordinatePoint=function(a,e){a.coords.push(e)};a.prototype.addLength=function(a,e){a.lengths.push(e)};a.prototype.createPointGeometry=function(){return new k.default};
return a}();a.Context=d})},"esri/tasks/operations/PBFWorker":function(){define("require exports ../../core/tsSupport/extendsHelper ../../Graphic ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../../geometry/SpatialReference ../../layers/support/Field ./pbfQueryUtils module".split(" "),function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});var p=function(){function a(){}a.prototype._parseFeatureQuery=function(a){var c=b.parsePBFFeatureQuery(a.buffer,a.options);
if(a.options&&"dehydrated"===a.options.type&&(c.spatialReference=c.spatialReference.toJSON(),c.fields))for(a=0;a<c.fields.length;a++)c.fields[a]=c.fields[a].toJSON();return k.resolve(c)};return a}(),u=function(a){function n(){var b=a.call(this)||this;b._thread=void 0;c.open(e.getAbsMid("./PBFWorker",d,f),{strategy:"dedicated"}).then(function(a){void 0===b._thread?b._thread=a:a.close()});return b}l(n,a);n.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};n.prototype.parseFeatureQuery=
function(a,c){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:a,options:c},{transferList:[a]}).then(function(a){if(c&&"dehydrated"===c.type){a.spatialReference=h.fromJSON(a.spatialReference);if(a.fields)for(var b=0;b<a.fields.length;b++)a.fields[b]=m.fromJSON(a.fields[b]);for(var b=a.spatialReference,e=0,f=a.features;e<f.length;e++){var d=f[e];d.uid=g.generateUID();d.geometry&&(d.geometry.spatialReference=b)}}return a}):k.resolve(b.parsePBFFeatureQuery(a,c)):
k.resolve(null)};return n}(p);a.PBFWorker=u;a.default=function(){return new p}})},"esri/core/requireUtils":function(){define(["require","exports","./promiseUtils"],function(d,a,l){function g(a,e){return Array.isArray(e)?l.create(function(c){a(e,function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];c(a)})}):g(a,[e]).then(function(a){return a[0]})}Object.defineProperty(a,"__esModule",{value:!0});a.when=g;a.getAbsMid=function(a,e,c){return e.toAbsMid?e.toAbsMid(a):c.id.replace(/\/[^\/]*$/gi,
"/")+a}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});for(var g in l)a.hasOwnProperty(g)||(a[g]=l[g])})},"esri/core/workers/workers":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(d,a,l,g,k,e,c,h,m,b){function f(){return g(this,void 0,void 0,function(){var a,e,
f,d;return l(this,function(g){if(w)return[2,w];t=c.createAbortController();a=p+u;e=[];f=function(a){var c=b.create(a).then(function(b){return r[a]=b});e.push(c)};for(d=0;d<a;d++)f(d);w=c.all(e);return[2,w]})})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=h;a.RemoteClient=m;(h=e("host-browser")?navigator.hardwareConcurrency:0)||(h=e("safari")&&e("mac")||e("trident")?8:2);var p=e("esri-workers-debug")?1:Math.max(1,Math.ceil(h/2)),u=e("esri-workers-debug")?1:Math.max(1,Math.floor(h/
2)),n=0,r=[];a.initialize=function(){f()};a.openWithPorts=function(b,c){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,c,{})}))};a.open=function(b,h){void 0===h&&(h={});return g(this,void 0,void 0,function(){var g,m,t,y,x,w,F;return l(this,function(l){switch(l.label){case 0:if("string"!==typeof b)throw new k("workers:undefined-module","modulePath is missing");g=h.signal;m=h.strategy||"distributed";e("host-webworker")&&!e("esri-workers")&&(m="local");return"local"!==m?[3,2]:
[4,c.create(function(a){return d([b],a)})];case 1:return t=l.sent(),c.throwIfAborted(g),y=h.client||t,x=a.RemoteClient.connect(t),[2,new a.Connection([new a.RemoteClient(x,y,h)])];case 2:return[4,f()];case 3:l.sent();c.throwIfAborted(g);if("dedicated"!==m)return[3,5];w=p+n++;n%=u;return[4,r[w].open(b,h)];case 4:return x=l.sent(),[2,new a.Connection([new a.RemoteClient(x,h.client,h)])];case 5:return[4,c.all(r.map(function(a){return a.open(b,h)}))];case 6:return F=l.sent(),[2,new a.Connection(F.map(function(b){return new a.RemoteClient(b,
h.client,h)}))]}})})};a.terminate=function(){w&&(t.abort(),w=null);for(var a=0;a<r.length;a++)r[a]&&r[a].terminate();r.length=0};var w=null,t})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils"],function(d,a,l,g){var k=l.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,e,d){for(var b=[],c=0,g=this._clients;c<g.length;c++)b.push(g[c].invoke(a,e,d));return b};
a.prototype.close=function(){for(var a=0,e=this._clients;a<e.length;a++)e[a].close();this._clients=[]};a.prototype.getAvailableClient=function(){var a;this._clients.some(function(c){return c.isBusy()?!1:(a=c,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,e,d){var b=null;Array.isArray(d)?(k.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),b={transferList:d}):b=d;return this._clients&&
this._clients.length?this.getAvailableClient().invoke(a,e,b):g.reject(Error("Connection closed"))};a.prototype.openPorts=function(){return g.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(d,a,l,g,k,e,c,h,m,b){var f=c.getLogger("esri.core.workers"),p=m.MessageType.ABORT,
u=m.MessageType.INVOKE,n=m.MessageType.OPEN,r=m.MessageType.OPENED,w=m.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();f.error(a)})}a.create=function(c){return g(this,void 0,void 0,function(){var e;return l(this,function(f){switch(f.label){case 0:return[4,b.createWorker()];case 1:return e=f.sent(),[2,new a(e,c)]}})})};
a.prototype.terminate=function(){this.worker.terminate()};a.prototype.open=function(a,b){void 0===b&&(b={});return g(this,void 0,void 0,function(){var c,e,f=this;return l(this,function(d){c=b.signal;e=m.newJobId();return[2,h.create(function(b,d){b={resolve:b,reject:d};h.onAbortOrThrow(c,function(){f._outJobs["delete"](e);f._post({type:p,jobId:e})});f._outJobs.set(e,b);f._post({type:n,jobId:e,modulePath:a})})]})})};a.prototype._onMessage=function(a){if(a=m.receiveMessage(a))switch(a.type){case r:case w:this._onResponse(a);
break;case p:this._onCancel(a);break;case u:this._onInvoke(a)}};a.prototype._onCancel=function(a){var b=this._inJobs;a=a.jobId;var c=b.get(a);c&&(c.controller&&c.controller.abort(),b["delete"](a))};a.prototype._onInvoke=function(a){var b=this,c=a.methodName,e=a.jobId,f=a.data;a=a.abortable?h.createAbortController():null;var d=this._inJobs,g=k.workerMessages[c],l;try{if("function"!==typeof g)throw new TypeError(c+" is not a function");l=g.call(null,f,{signal:a?a.signal:null})}catch(F){this._post({type:w,
jobId:e,error:m.toInvokeError(F)});return}if(h.isThenable(l)){d.set(e,{controller:a,promise:l});if(a&&"cancel"in l)h.onAbort(a.signal,function(){return l.cancel()});l.then(function(a){d.has(e)&&(d["delete"](e),b._post({type:w,jobId:e},a))}).catch(function(a){d.has(e)&&(d["delete"](e),a||(a={message:"Error encountered at method"+c}),h.isAbortError(a)||b._post({type:w,jobId:e,error:m.toInvokeError(a||{message:"Error encountered at method "+c})}))})}else this._post({type:w,jobId:e},l)};a.prototype._onResponse=
function(a){var b=a.jobId,c=a.error;a=a.data;var f=this._outJobs.get(b);f&&(this._outJobs["delete"](b),c?f.reject(e.fromJSON(JSON.parse(c))):f.resolve(a))};a.prototype._post=function(a,b,c){return m.postMessage(this.worker,a,b,c)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper ../tsSupport/generatorHelper ../tsSupport/awaiterHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u){function n(a){return k(this,void 0,void 0,function(){return g(this,function(d){return[2,b.create(function(b){function d(k){if(k=p.receiveMessage(k))switch(k.type){case y:k=a;var m=c.workers.loaderUrl||f.DEFAULT_LOADER_URL,n;null!=c["default"]?(n=l({},c),delete n["default"],n=JSON.parse(JSON.stringify(n))):n=JSON.parse(JSON.stringify(c));var u=c.workers.loaderConfig,u=f.default({baseUrl:u.baseUrl,locale:e.locale,has:l({"config-deferredInstrumentation":0,"dojo-test-sniff":0,
"esri-native-promise":h("esri-native-promise"),"esri-secure-context":h("esri-secure-context"),"esri-workers-arraybuffer-transfer":h("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1,"esri-webgl-texture-float":h("esri-webgl-texture-float"),"esri-shared-array-buffer":h("esri-shared-array-buffer"),"esri-2d-debug":0,"esri-webgl-max-texture-size":h("esri-webgl-max-texture-size")},u.has),map:l({},u.map),paths:l({},u.paths),packages:u.packages||[]});k.postMessage({type:t,
configure:{esriConfig:n,loaderUrl:m,loaderConfig:u}});break;case w:a.removeEventListener("message",d),a.removeEventListener("error",g),b(a)}}function g(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",g);r.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new u;a.addEventListener("message",d);a.addEventListener("error",g)}a.addEventListener("message",d);a.addEventListener("error",g)})]})})}Object.defineProperty(a,"__esModule",{value:!0});
var r=m.getLogger("esri.core.workers");h.add("esri-workers-arraybuffer-transfer",!h("safari")||12<=h("safari"));var w=p.MessageType.CONFIGURED,t=p.MessageType.CONFIGURE,y=p.MessageType.HANDSHAKE,x;try{x=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var ABORT\x3d7;function mapDelete(map,key){map["delete"](key)}function createAbortError(){var error\x3dnew Error("AbortError");error.dojoType\x3d"cancel";return error}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abort\x3dfunction(){var outJob\x3doutgoing.get(jobId);if(!outJob){return}mapDelete(outgoing,jobId);self.postMessage({type:ABORT,jobId:jobId});outJob.reject(createAbortError())};var deferred\x3dnew Deferred(abort);if(signal){if(signal.aborted){return deferred.reject(createAbortError())}signal.addEventListener("abort",function(){abort();deferred.reject(createAbortError())})}outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,jobId:jobId,methodName:methodName,abortable:true,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(A){}a.createWorker=function(){return k(this,void 0,void 0,function(){var a;return g(this,function(b){if(!h("esri-workers"))return[2,n(new u)];if(x)try{a=new Worker(x)}catch(C){r.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new u}else r.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new u;return[2,n(a)]})})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper",
"../has","../urlUtils"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});g=g("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=k.makeAbsolute(k.removeQueryParameters(d.toUrl(g)));a.DEFAULT_CONFIG={baseUrl:function(){var a=k.removeQueryParameters(d.toUrl("dojo/x.js"));return k.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},
{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(e){var c={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,
has:l({},e.has),map:l({},e.map),packages:e.packages&&e.packages.concat()||[],paths:l({},e.paths)};e.hasOwnProperty("async")||(c.async=!0);e.hasOwnProperty("isDebug")||(c.isDebug=!1);e.baseUrl||(c.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var b=c.packages,e=0;e<b.length;e++)if(b[e].name===a.name)break a;a=l({},a);e=k.removeQueryParameters(d.toUrl(a.name+"/x.js"));e=e.slice(0,e.length-5);a.location=k.makeAbsolute(e);b.push(a)}});e=c.map=c.map||{};for(var g=
0,m=Object.keys(a.DEFAULT_CONFIG.map);g<m.length;g++){var b=m[g];e[b]||(e[b]=a.DEFAULT_CONFIG.map[b])}return c}})},"esri/core/workers/WorkerFallback":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ../has ../promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(d,a,l,g,k,e,c,h){var m=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=
function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return b[c].apply(b,a)}})}}(),b=k.MutationObserver||k.WebKitMutationObserver,f=function(){var a;if(k.process&&k.process.nextTick)a=function(a){k.process.nextTick(a)};else if(k.Promise)a=function(a){k.Promise.resolve().then(a)};else if(b){var c=[],e=document.createElement("div");(new b(function(){for(;0<c.length;)c.shift()()})).observe(e,{attributes:!0});a=function(a){c.push(a);e.setAttribute("queueStatus","1")}}return a}(),p=function(){var a=
k.MessageEvent;try{new a("message",{data:null})}catch(n){return function(a,b){void 0===b&&(b={});var c=b.data,e=b.bubbles,e=void 0===e?!1:e;b=b.cancelable;b=void 0===b?!1:b;var f=document.createEvent("Event");f.initEvent(a,e,b);f.data=c;return f}}return function(b,c){return new a(b,c)}}();return function(){function a(){this._dispatcher=new m;this._isInitialized=!1;this._workerPostMessage({type:h.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",
{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});
a.prototype.postMessage=function(a,b){var c=this;f(function(){c._workerMessageHandler(p("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a,b){var c=this;f(function(){c.dispatchEvent(p("message",{data:a}))})};a.prototype._workerMessageHandler=
function(a){return g(this,void 0,void 0,function(){var b,e,f,g,k,m,n,p,u=this;return l(this,function(l){switch(l.label){case 0:b=h.receiveMessage(a);if(!b)return[2];e=b.jobId;f=b.type;switch(f){case h.MessageType.CONFIGURE:return[3,1];case h.MessageType.OPEN:return[3,2]}return[3,27];case 1:return this._isInitialized||this._workerPostMessage({type:h.MessageType.CONFIGURED}),[3,27];case 2:return g=b.modulePath,[3,25];case 3:m=l.sent();n=g;switch(n){case "esri/tasks/operations/PBFWorker":return[3,4];
case "esri/views/2d/engine/vectorTiles/WorkerTileHandler":return[3,6];case "esri/views/2d/layers/features/Pipeline":return[3,8];case "esri/views/3d/layers/PointCloudWorker":return[3,10];case "esri/views/3d/layers/SceneLayerWorker":return[3,12];case "esri/layers/graphics/sources/support/CSVSourceWorker":return[3,14];case "esri/layers/support/LercWorker":return[3,16];case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":return[3,18];case "esri/geometry/support/meshUtils/ElevationSamplerWorker":return[3,
20]}return[3,22];case 4:return[4,new Promise(function(a,b){d(["esri/tasks/operations/PBFWorker"],a,b)})];case 5:return k=l.sent(),[3,24];case 6:return[4,new Promise(function(a,b){d(["esri/views/2d/engine/vectorTiles/WorkerTileHandler"],a,b)})];case 7:return k=l.sent(),[3,24];case 8:return[4,new Promise(function(a,b){d(["esri/views/2d/layers/features/Pipeline"],a,b)})];case 9:return k=l.sent(),[3,24];case 10:return[4,new Promise(function(a,b){d(["esri/views/3d/layers/PointCloudWorker"],a,b)})];case 11:return k=
l.sent(),[3,24];case 12:return[4,new Promise(function(a,b){d(["esri/views/3d/layers/SceneLayerWorker"],a,b)})];case 13:return k=l.sent(),[3,24];case 14:return[4,new Promise(function(a,b){d(["esri/layers/graphics/sources/support/CSVSourceWorker"],a,b)})];case 15:return k=l.sent(),[3,24];case 16:return[4,new Promise(function(a,b){d(["esri/layers/support/LercWorker"],a,b)})];case 17:return k=l.sent(),[3,24];case 18:return[4,new Promise(function(a,b){d(["esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],
a,b)})];case 19:return k=l.sent(),[3,24];case 20:return[4,new Promise(function(a,b){d(["esri/geometry/support/meshUtils/ElevationSamplerWorker"],a,b)})];case 21:return k=l.sent(),[3,24];case 22:return[4,c.create(function(a){return d([g],a)})];case 23:k=l.sent(),l.label=24;case 24:return p=m.connect(k),this._workerPostMessage({type:h.MessageType.OPENED,jobId:e,data:p}),[3,26];case 25:d(["esri/core/workers/RemoteClient",g],function(a,b){a=a.connect(b);u._workerPostMessage({type:h.MessageType.OPENED,
jobId:e,data:a})}),l.label=26;case 26:return[3,27];case 27:return[2]}})})};return a}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(d,a){function l(a){var d={},e;for(e in a)if("declaredClass"!==e){var c=a[e];if(null!=c&&"function"!==typeof c)if(Array.isArray(c)){d[e]=[];for(var g=0;g<c.length;g++)d[e][g]=l(c[g])}else"object"===typeof c?c.toJSON&&(d[e]=JSON.stringify(c)):d[e]=c}return d}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=l})},"esri/views/2d/engine":function(){define("require exports ./engine/Bitmap ./engine/BitmapContainer ./engine/BitmapTile ./engine/Container ./engine/DisplayObject ./engine/Stage ./engine/webgl/AttributeStoreView ./engine/webgl/collisions/CollisionGrid ./engine/webgl/collisions/CollisionEngine ./engine/webgl/collisions/LayerViewSorter ./engine/webgl/Geometry ./engine/webgl/alignmentUtils ./engine/webgl/color ./engine/webgl/definitions ./engine/webgl/enums ./engine/webgl/fontUtils ./engine/webgl/Utils ./engine/webgl/util/debug ./engine/webgl/TileClipper ./engine/webgl/TurboLine ./engine/webgl/mesh/factories/matcherUtils ./engine/webgl/mesh/factories/WGLMeshFactory ./engine/webgl/mesh/MeshData ./engine/webgl/mesh/templates/WGLTemplateStore ./engine/webgl/Painter ./engine/webgl/TextShaping ./engine/webgl/TextShapingNew ./engine/webgl/TileData ./engine/webgl/util/BidiText ./engine/webgl/util/Matcher ./engine/webgl/util/vvFlagUtils ./engine/webgl/visualVariablesUtils ./engine/webgl/WGLRendererInfo ./engine/webgl/WGLTile ./engine/webgl/BitBlitRenderer ./engine/webgl/shaders/MagnifierPrograms ../../symbols/cim/CIMSymbolHelper ./engine/webgl/Rect ./engine/webgl/mesh/templates/util".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F,H,G,J,K,I,M,O,Q,P,S,U,T,R,W,X){Object.defineProperty(a,"__esModule",{value:!0});a.Bitmap=l.Bitmap;a.BitmapContainer=g.BitmapContainer;a.BitmapTile=k.BitmapTile;a.Container=e.Container;a.DisplayObject=c.DisplayObject;a.Stage=h.Stage;a.AttributeStoreView=m.AttributeStoreView;a.CollisionGrid=b.CollisionGrid;a.CollisionEngine=f.CollisionEngine;a.LayerViewSorter=p.LayerViewSorter;a.Point=u.Point;a.alignmentUtils=n;a.color=r;a.definitions=w;a.enums=
t;a.fontUtils=y;a.Utils=x;a.debug=A;a.TileClipper=z.TileClipper;a.SimpleBuilder=z.SimpleBuilder;a.tessellate=C.tessellate;a.TessellationState=C.TessellationState;a.splitVertex=C.splitVertex;a.createMatcher=D.createMatcher;a.WGLMeshFactory=B.WGLMeshFactory;a.MeshData=E.MeshData;a.WGLTemplateStore=F.WGLTemplateStore;a.PainterOptions=H.PainterOptions;a.TextShaping=G.TextShaping;a.TextShapingNew=J.TextShaping;a.TileData=K.TileData;a.bidiText=I.bidiText;a.FeatureMatcher=M.FeatureMatcher;a.getVVFlags=O.getVVFlags;
a.getTypeOfSizeVisualVariable=Q.getTypeOfSizeVisualVariable;a.WGLRendererInfo=P.WGLRendererInfo;a.WGLTile=S.WGLTile;a.BitBlitRenderer=U.BitBlitRenderer;a.createMagnifierProgram=T.createMagnifierProgram;a.magnifier=T.magnifier;a.CIMSymbolHelper=R.CIMSymbolHelper;a.Rect=W.default;a.getLimitCosine=X.getLimitCosine})},"esri/views/2d/engine/Bitmap":function(){define("require exports ../../../core/tsSupport/extendsHelper @dojo/framework/shim/Set ../../webgl ./DisplayObject".split(" "),function(d,a,l,g,
k,e){function c(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;a.render(b.getContext("2d"));return b}function h(a,b,c){var e={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,flipped:!0};b&&c&&(e.width=b,e.height=c);return new k.Texture(a,e)}function m(a){f.has(a)&&(b.splice(b.indexOf(a),1),f.delete(a))}Object.defineProperty(a,"__esModule",{value:!0});var b=[],f=new g.default;d=function(a){function b(b){void 0===b&&(b=null);var c=a.call(this)||
this;c._height=void 0;c.pixelRatio=1;c.resolution=0;c.rotation=0;c._source=null;c._width=void 0;c.x=0;c.y=0;c.source=b;c.requestRender=c.requestRender.bind(c);return c}l(b,a);Object.defineProperty(b.prototype,"height",{get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(a){this._height=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"source",{get:function(){return this._source},set:function(a){this._source=a;this.invalidateTexture()},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"sourceHeight",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sourceWidth",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return void 0!==this._width?this._width:this.sourceWidth},
set:function(a){this._width=a},enumerable:!0,configurable:!0});b.prototype.attach=function(){this.updateTexture();a.prototype.attach.call(this);return!0};b.prototype.detach=function(){this._texture.dispose();this._texture=null;m(this)};b.prototype.invalidateTexture=function(){this.attached?this.updateTexture():m(this)};b.prototype.updateTexture=function(){this._texture||(this._texture=this.source?h(this.stage.context,this.sourceWidth,this.sourceHeight):h(this.stage.context));var a=this.source;a?(this._texture.resize(this.sourceWidth,
this.sourceHeight),a&&"render"in a?this._texture.setData(c(a)):!a||"render"in a||this._texture.setData(a),this.ready(),this.requestRender()):this._texture.setData(null)};b.prototype.setSamplingMode=function(a){if(this._texture){var b=a;if(this._texture.descriptor.hasMipmap)b=9728===a?9985:9729===a?9987:a;else if(this.width!==this.sourceHeight||this.height!==this.sourceHeight)b=9729;this._texture.setSamplingMode(b)}};b.prototype.bind=function(a){this._texture&&this.stage.context.bindTexture(this._texture,
a)};b.prototype.doRender=function(a){if(this.source&&0<this.width&&this.isReady){var b=this.resolution/this.pixelRatio/a.state.resolution;.05>b||this.stage.painter.drawBitmap(a,this,b)}};return b}(e.DisplayObject);a.Bitmap=d})},"esri/views/webgl":function(){define("require exports ./webgl/BufferObject ./webgl/enums ./webgl/FramebufferObject ./webgl/Program ./webgl/RenderingContext ./webgl/ShaderCompiler ./webgl/Texture ./webgl/VertexArrayObject ./webgl/ProgramCache ./webgl/programUtils ./webgl/context-util".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u){Object.defineProperty(a,"__esModule",{value:!0});a.BufferObject=l;a.enums=g;a.FramebufferObject=k;a.Program=e;a.RenderingContext=c;a.ShaderCompiler=h;a.Texture=m;a.VertexArrayObject=b;a.ProgramCache=f.ProgramCache;a.createProgram=p.createProgram;a.glslifyDefineMap=p.glslifyDefineMap;a.createContextOrErrorHTML=u.createContextOrErrorHTML})},"esri/views/webgl/BufferObject":function(){define(["require","exports","../../core/has","../../core/typedArrayUtil"],function(d,
a,l,g){return function(){function a(e,c,d,g,b){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=e;this._bufferType=c;this._usage=d;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();g&&this.setData(g,b)}a.createIndex=function(e,c,d,g){return new a(e,34963,c,d,g)};a.createVertex=function(e,c,d){return new a(e,34962,c,d)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)};a.prototype.setData=function(a,c){if(a){if("number"===typeof a){if(0>a&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&
c)switch(this._indexType=c,this._size=a,c){case 5123:a*=2;break;case 5125:a*=4}}else c=a.byteLength,g.isUint16Array(a)&&(c/=2,this._indexType=5123),g.isUint32Array(a)&&(c/=4,this._indexType=5125),this._size=c;c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(c)}};a.prototype.setSubData=function(a,c,d,k){void 0===c&&(c=0);void 0===d&&(d=0);if(a){(0>c||c>=this._size)&&console.error("offset is out of range!");
var b=c,e=d,h=k,m=a.byteLength;g.isUint16Array(a)&&(m/=2,b*=2,e*=2,h*=2);g.isUint32Array(a)&&(m/=4,b*=4,e*=4,h*=4);void 0===k&&(k=m-1);d>=k&&console.error("end must be bigger than start!");c+d-k>this._size&&console.error("An attempt to write beyond the end of the buffer!");c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);d=this._context.gl;a=ArrayBuffer.isView(a)?a.buffer:a;d.bufferSubData(this._bufferType,b,a.slice(e,h));this._context.bindVAO(c)}};a._nextId=
0;return a}()})},"esri/views/webgl/enums":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","../../core/has","./Renderbuffer","./Texture"],function(d,a,l,g,k){return function(){function a(c,e,d,b){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=c;this._desc=
{colorTarget:e.colorTarget,depthStencilTarget:e.depthStencilTarget,width:e.width,height:e.height,multisampled:e.multisampled};this._id=a._nextId++;d&&(c=void 0,d instanceof k?(this._colorAttachment=d,c=d.descriptor):(c=d,this._colorAttachment=new k(this._context,c)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(c,this._desc));b instanceof g?(2===e.depthStencilTarget?
this._stencilAttachment=b:1===e.depthStencilTarget||3===e.depthStencilTarget?this._depthAttachment=b:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),a._validateBufferDimensions(b.descriptor,this._desc)):b&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),e=
void 0,b instanceof k?(this._depthStencilTexture=b,e=this._depthStencilTexture.descriptor):(e=b,this._depthStencilTexture=new k(this._context,e)),a._validateTextureDimensions(e,this._desc))}a.create=function(c,e){return new a(c,e)};a.createWithAttachments=function(c,e,d,b){return new a(c,d,e,b)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof k?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorAttachment",{get:function(){return this._colorAttachment},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthStencilAttachment",{get:function(){return this._depthStencilTexture||
this._depthAttachment||this._stencilAttachment},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});a.prototype.dispose=function(){if(this._context){var a=
this._context,e=a.getBoundFramebufferObject();this._disposeColorAttachment();this._disposeDepthStencilAttachments();this._glName&&(a.gl.deleteFramebuffer(this._glName),this._glName=null);a.bindFramebuffer(e);this._context=null}};a.prototype.attachColorTexture=function(c){if(c){a._validateTextureDimensions(c.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,
e.TEXTURE_2D,c.glName,0)}this._colorAttachment=c}};a.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof k){a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}this._colorAttachment=null}return a};a.prototype.attachDepthStencilTexture=function(c){if(c){var e=c.descriptor;34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");a._validateTextureDimensions(e,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferTexture2D(e.FRAMEBUFFER,
e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,c.glName,0));this._depthStencilTexture=c}};a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};a.prototype.attachDepthStencilBuffer=function(c){if(c){var e=c.descriptor;34041!==e.internalFormat&&33189!==e.internalFormat&&
console.error("Depth/Stencil buffer must have correct internalFormat");a._validateBufferDimensions(e,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===e.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,c.glName));this._depthAttachment=c}};a.prototype.detachDepthStencilBuffer=function(){var a=
this._context.gl,e=this._depthAttachment;e&&this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,null));this._depthAttachment=null;return e};a.prototype.copyToTexture=function(a,e,d,b,f,g,k){(0>a||0>e||0>f||0>g)&&console.error("Offsets cannot be negative!");(0>=d||0>=b)&&console.error("Copy width and height must be greater than zero!");var c=this._desc,h=k.descriptor;
3553!==k.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+d>c.width||e+b>c.height||f+d>h.width||g+b>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");c=this._context;c.bindTexture(k);c.bindFramebuffer(this);c.gl.copyTexSubImage2D(3553,0,f,g,a,e,d,b)};a.prototype.readPixels=function(a,e,d,b,f,g,k){(0>=d||0>=b)&&console.error("Copy width and height must be greater than zero!");k||console.error("Target memory is not initialized!");
this._context.bindFramebuffer(this);this._context.gl.readPixels(a,e,d,b,f,g,k)};a.prototype.resize=function(c,e){var d=this._desc;if(d.width!==c||d.height!==e)if(this._initialized)d.width=c,d.height=e,this._colorAttachment instanceof k?(b=this._colorAttachment,d=b.descriptor,d.width=c,d.height=e,this._colorAttachment.dispose(),this._colorAttachment=new k(this._context,d),a._validateTextureDimensions(b.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?
(d=this._depthStencilTexture.descriptor,d.width=c,d.height=e,this._depthStencilTexture.dispose(),this._depthStencilTexture=new k(this._context,d)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{d.width=c;d.height=e;if(this._colorAttachment instanceof k){var b=this._colorAttachment;b.resize(c,e)}this._depthStencilTexture&&this._depthStencilTexture.resize(c,
e)}};a.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var e=a.createFramebuffer(),d=this._desc;a.bindFramebuffer(a.FRAMEBUFFER,e);if(!this._colorAttachment)if(0===d.colorTarget)this._colorAttachment=new k(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height});else{var b=new g(this._context,{internalFormat:32854,width:d.width,height:d.height});a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.COLOR_ATTACHMENT0,a.RENDERBUFFER,b.glName);this._colorAttachment=b}this._colorAttachment instanceof k&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(d.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new g(this._context,{internalFormat:1===d.depthStencilTarget?33189:34041,width:d.width,height:d.height}));a.framebufferRenderbuffer(a.FRAMEBUFFER,1===d.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,
a.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new g(this._context,{internalFormat:36168,width:d.width,height:d.height}));a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new k(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d.width,height:d.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,this._depthStencilTexture.glName,0)}a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=e;return this._initialized=!0};a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof
k){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(a=this._colorAttachment,e=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=
null};a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,
a.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};a._validateBufferDimensions=function(a,e){console.assert(0<=a.width&&0<=a.height);void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height?e.width===a.width&&e.height===a.height||
console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=a.width,e.height=a.height)};a._validateTextureDimensions=function(a,e){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height?e.width===a.width&&e.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=a.width,e.height=a.height)};a._nextId=0;return a}()})},"esri/views/webgl/Renderbuffer":function(){define(["require",
"exports","../../core/has"],function(d,a,l){return function(){function a(d,e){this._context=d;this._desc=e;this._glName=null;this._id=-1;d=this._context.gl;this._id=++a._nextId;this._glName=d.createRenderbuffer();this._context.bindRenderbuffer(this);d.renderbufferStorage(d.RENDERBUFFER,e.internalFormat,e.width,e.height)}Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});a.prototype.resize=function(a,e){var c=this._context.gl,d=this._desc;if(d.width!==a||d.height!==e)d.width=a,d.height=e,this._context.bindRenderbuffer(this),c.renderbufferStorage(c.RENDERBUFFER,d.internalFormat,d.width,d.height)};a.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);this._context=
null};a._nextId=0;return a}()})},"esri/views/webgl/Texture":function(){define(["require","exports","../../core/has"],function(d,a,l){return function(){function a(d,e,c){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=d;this._desc={pixelFormat:e.pixelFormat,internalFormat:e.internalFormat,dataType:e.dataType,target:e.target?e.target:3553,samplingMode:e.samplingMode?e.samplingMode:9729,wrapMode:e.wrapMode?
e.wrapMode:10497,maxAnisotropy:e.maxAnisotropy,flipped:void 0!==e.flipped?e.flipped:!1,hasMipmap:void 0!==e.hasMipmap?e.hasMipmap:!1,unpackAlignment:e.unpackAlignment?e.unpackAlignment:4,width:e.width,height:e.height,preMultiplyAlpha:void 0!==e.preMultiplyAlpha?e.preMultiplyAlpha:!1,textureCoordinateScaleFactor:e.textureCoordinateScaleFactor||null};this._id=++a._nextId;this.setData(c)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context&&this._context.gl){if(this._glName){var e=this._context.gl;this._boundToUnits.forEach(function(c){a._context.bindTexture(null,c)});e.deleteTexture(this._glName);this._glName=null}this._context=null}};a.prototype.resize=function(a,e){var c=this._desc;
if(c.width!==a||c.height!==e)c.width=a,c.height=e,this.setData(null)};a.prototype.setData=function(d){var e=this._context.gl;this._glName||(this._glName=e.createTexture());void 0===d&&(d=null);null===d&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;a._validateTexture(g);e.pixelStorei(e.UNPACK_ALIGNMENT,g.unpackAlignment);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
g.preMultiplyAlpha?1:0);var k=g.pixelFormat,b=g.internalFormat?g.internalFormat:k;if(d instanceof ImageData||d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement)g.width&&g.height&&console.assert(d.width===g.width&&d.height===g.height),e.texImage2D(e.TEXTURE_2D,0,b,k,g.dataType,d),g.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=d.width),void 0===this._desc.height&&(this._desc.height=d.height);else{null!=g.width&&null!=g.height||
console.error("Width and height must be specified!");e.DEPTH24_STENCIL8&&b===e.DEPTH_STENCIL&&(b=e.DEPTH24_STENCIL8);var f=g.width,l=g.height;if(null!=d&&"type"in d&&"compressed"===d.type){k=Math.round(Math.log(Math.max(f,l))/Math.LN2)+1;g.hasMipmap=g.hasMipmap&&k===d.levels.length;for(var u=0;;++u){e.compressedTexImage2D(e.TEXTURE_2D,u,b,f,l,0,d.levels[Math.min(u,d.levels.length-1)]);if(1===f&&1===l||!g.hasMipmap)break;f=Math.max(1,f>>1);l=Math.max(1,l>>1)}}else if(d)e.texImage2D(e.TEXTURE_2D,0,
b,f,l,0,k,g.dataType,d),g.hasMipmap&&this.generateMipmap();else for(u=0;;++u){e.texImage2D(e.TEXTURE_2D,u,b,f,l,0,k,g.dataType,null);if(1===f&&1===l||!g.hasMipmap)break;f=Math.max(1,f>>1);l=Math.max(1,l>>1)}}a._applySamplingMode(e,this._desc);a._applyWrapMode(e,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(c,0)};a.prototype.updateData=function(a,e,c,d,g,b){b||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
var f=this._context.gl,h=this._desc,k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>e||0>c||d>h.width||g>h.height||e+d>h.width||c+g>h.height)&&console.error("An attempt to update out of bounds of the texture!");f.pixelStorei(f.UNPACK_ALIGNMENT,h.unpackAlignment);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0);b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof
HTMLVideoElement?(console.assert(b.width===d&&b.height===g),f.texSubImage2D(f.TEXTURE_2D,a,e,c,h.pixelFormat,h.dataType,b)):f.texSubImage2D(f.TEXTURE_2D,a,e,c,d,g,h.pixelFormat,h.dataType,b);this._context.bindTexture(k,0)};a.prototype.generateMipmap=function(){var d=this._desc;d.hasMipmap||(d.hasMipmap=!0,a._validateTexture(d));9729===d.samplingMode?(this._samplingModeDirty=!0,d.samplingMode=9985):9728===d.samplingMode&&(this._samplingModeDirty=!0,d.samplingMode=9984);d=this._context.getBoundTexture(0);
this._context.bindTexture(this,0);var e=this._context.gl;e.generateMipmap(e.TEXTURE_2D);this._context.bindTexture(d,0)};a.prototype.setSamplingMode=function(d){d!==this._desc.samplingMode&&(this._desc.samplingMode=d,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(d){d!==this._desc.wrapMode&&(this._desc.wrapMode=d,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var d=this._context.gl,e=this._desc;this._samplingModeDirty&&
(a._applySamplingMode(d,e),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(d,e),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,e){e?this._boundToUnits.add(a):this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(d){(0>d.width||0>d.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(d.width)&&a._isPowerOfTwo(d.height)||("number"===typeof d.wrapMode?33071!==d.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):
33071===d.wrapMode.s&&33071===d.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),d.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(a,e){var c=e.samplingMode,d=e.samplingMode;if(9985===c||9987===c)c=9729,e.hasMipmap||(d=9729);else if(9984===c||9986===c)c=9728,e.hasMipmap||(d=9728);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d)};a._applyWrapMode=
function(a,e){"number"===typeof e.wrapMode?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e.wrapMode),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e.wrapMode)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e.wrapMode.s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e.wrapMode.t))};a._applyAnisotropicFilteringParameters=function(a,e){if(null!=e.maxAnisotropy){var c=a.capabilities.textureFilterAnisotropic;c&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy))}};a._nextId=
0;return a}()})},"esri/views/webgl/Program":function(){define(["require","exports","../../core/has","./ShaderTranspiler"],function(d,a,l,g){return function(){function a(e,c,d,g,b){void 0===b&&(b={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4=
{};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};e||console.error("RenderingContext isn't initialized!");0===c.length&&console.error("Shaders source should not be empty!");this._context=e;this._vertexShaderSource=c;this._fragmentShaderSource=d;if(Array.isArray(b))for(e=0;e<b.length;e++)this._defines[b[e]]="1";else this._defines=b;this._id=a._nextId++;this._locations=g}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.getDefine=function(a){return this._defines[a]};a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),
this._glName=null);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var a=this._context.gl,c=a.createProgram();a.attachShader(c,this._vShader);a.attachShader(c,this._fShader);for(var d in this._locations)a.bindAttribLocation(c,this._locations[d],d);a.linkProgram(c);a.getProgramParameter(c,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+
a.getProgramParameter(c,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(c));this._glName=c;this._initialized=!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();
void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};a.prototype.setUniform1i=function(a,c){var e=this._nameToUniform1[a];if(void 0===e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),c),this._nameToUniform1[a]=c};a.prototype.setUniform1iv=function(e,c){var d=this._nameToUniform1v[e];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),
this._context.gl.uniform1iv(this.getUniformLocation(e),c),void 0===d?this._nameToUniform1v[e]=a._arrayCopy(c):a._arrayAssign(c,d))};a.prototype.setUniform1f=function(a,c){var e=this._nameToUniform1[a];if(void 0===e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),c),this._nameToUniform1[a]=c};a.prototype.setUniform1fv=function(e,c){var d=this._nameToUniform1v[e];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(e),
c),void 0===d?this._nameToUniform1v[e]=a._arrayCopy(c):a._arrayAssign(c,d))};a.prototype.setUniform2f=function(a,c,d){var e=this._nameToUniform2[a];if(void 0===e||c!==e[0]||d!==e[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),c,d),void 0===e?this._nameToUniform2[a]=[c,d]:(e[0]=c,e[1]=d)};a.prototype.setUniform2fv=function(e,c){var d=this._nameToUniform2[e];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(e),
c),void 0===d?this._nameToUniform2[e]=a._arrayCopy(c):a._arrayAssign(c,d))};a.prototype.setUniform3f=function(a,c,d,g){var b=this._nameToUniform3[a];if(void 0===b||c!==b[0]||d!==b[1]||g!==b[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),c,d,g),void 0===b?this._nameToUniform3[a]=[c,d,g]:(b[0]=c,b[1]=d,b[2]=g)};a.prototype.setUniform3fv=function(e,c){var d=this._nameToUniform3[e];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(e),
c),void 0===d?this._nameToUniform3[e]=a._arrayCopy(c):a._arrayAssign(c,d))};a.prototype.setUniform4f=function(a,c,d,g,b){var e=this._nameToUniform4[a];if(void 0===e||c!==e[0]||d!==e[1]||g!==e[2]||b!==e[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),c,d,g,b),void 0===e?this._nameToUniform4[a]=[c,d,g,b]:(e[0]=c,e[1]=d,e[2]=g,e[3]=b)};a.prototype.setUniform4fv=function(e,c){var d=this._nameToUniform4[e];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(e),c),void 0===d?this._nameToUniform4[e]=a._arrayCopy(c):a._arrayAssign(c,d))};a.prototype.setUniformMatrix3fv=function(e,c,d){void 0===d&&(d=!1);var g=this._nameToUniformMatrix3[e];void 0!==g&&(9===g.length?a._matrix3Equal(g,c):a._arraysEqual(c,g))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(e),d,c),void 0===g?this._nameToUniformMatrix3[e]=a._arrayCopy(c):a._arrayAssign(c,g))};a.prototype.setUniformMatrix4fv=
function(e,c,d){void 0===d&&(d=!1);var g=this._nameToUniformMatrix4[e];void 0!==g&&(16===g.length?a._matrix4Equal(g,c):a._arraysEqual(c,g))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(e),d,c),void 0===g?this._nameToUniformMatrix4[e]=a._arrayCopy(c):a._arrayAssign(c,g))};a._padToThree=function(a){var c=a.toString();1E3>a&&(c=("  "+a).slice(-3));return c};a.prototype._addLineNumbers=function(e){var c=2;return e.replace(/\n/g,function(){return"\n"+a._padToThree(c++)+
":"})};a.prototype._loadShader=function(a){var c=35633===a,e=c?this._vertexShaderSource:this._fragmentShaderSource,d;d="";for(var b in this._defines)d+="#define "+b+" "+this._defines[b]+"\n";d+=e;"webgl2"===this._context.contextVersion&&(d=g.transpileShader(d,c?"vertex":"fragment"));c=this._context.gl;a=c.createShader(a);c.shaderSource(a,d);c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(console.error(c.getShaderInfoLog(a)),console.error(this._addLineNumbers(d)),"webgl2"===this._context.contextVersion&&
(console.log("Shader source before transpilation:"),console.log(e)));return a};a._matrix4Equal=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};a._matrix3Equal=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};a._arraysEqual=
function(a,c){if(a.length!==c.length)return!1;for(var e=0;e<a.length;++e)if(a[e]!==c[e])return!1;return!0};a._arrayCopy=function(a){for(var c=[],e=0;e<a.length;++e)c.push(a[e]);return c};a._arrayAssign=function(a,c){for(var e=0;e<a.length;++e)c[e]=a[e]};a._nextId=0;return a}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(d,a,l,g){function k(a){return a.map(function(a){return"eof"!==a.type?a.data:""}).join("")}
function e(a,b,c,d){d=d||c;for(var f=0;f<a.length;f++){var g=a[f];if("ident"===g.type&&g.data===c)return d in b?b[d]++:b[d]=0,e(a,b,d+"_"+b[d],d)}return c}function c(a,b,c){void 0===c&&(c="afterVersion");var e={data:"\n",type:"whitespace"},d=function(b){return b<a.length?/[^\r\n]$/.test(a[b].data):!1},f=function(a){for(var b=-1,e=0,d=-1,f=0;f<a.length;f++){var g=a[f];"preprocessor"===g.type&&(g.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++e:g.data.match(/\#endif\s*.*/)&&--e);("afterVersion"===c||"afterPrecision"===
c)&&"preprocessor"===g.type&&/^#version/.test(g.data)&&(d=Math.max(d,f));if("afterPrecision"===c&&"keyword"===g.type&&"precision"===g.data){a:{for(g=f;g<a.length;g++){var h=a[g];if("operator"===h.type&&";"===h.data)break a}g=null}if(null===g)throw Error("precision statement not followed by any semicolons!");d=Math.max(d,g)}b<d&&0===e&&(b=f)}return b+1}(a);d(f-1)&&a.splice(f++,0,e);for(var g=0;g<b.length;g++){var h=b[g];a.splice(f++,0,h)}d(f-1)&&d(f)&&a.splice(f,0,e)}Object.defineProperty(a,"__esModule",
{value:!0});var h=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];a.transpileShader=function(a,b){a=g(a);var d;a:{d="100";var m="300 es";void 0===d&&(d="100");void 0===m&&(m="300 es");for(var u=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,n=0;n<a.length;n++){var r=a[n];if("preprocessor"===r.type){var w=u.exec(r.data);if(w){u=w[1].replace(/\s\s+/g," ");if(u===m){d=u;break a}if(u===d){r.data="#version "+m;break a}throw Error("unknown glsl version: "+
u);}}}a.splice(0,0,{type:"preprocessor",data:"#version "+m},{type:"whitespace",data:"\n"});d=null}if("300 es"===d)throw Error("shader is already glsl 300 es");u=r=null;n={};w={};for(d=0;d<a.length;++d)switch(m=a[d],m.type){case "keyword":"vertex"===b&&"attribute"===m.data?m.data="in":"varying"===m.data&&(m.data="vertex"===b?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(m.data.trim())&&(m.data=m.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===b&&"gl_FragColor"===
m.data){if(!r){var r=e(a,n,"fragColor"),t=void 0;void 0===t&&(t="lowp");c(a,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:t},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:r},{type:"operator",data:";"}],"afterPrecision")}m.data=r}else"fragment"===b&&"gl_FragDepthEXT"===m.data&&(u||(u=e(a,n,"gl_FragDepth")),m.data=u);break;case "ident":if(0<=l.indexOf(m.data)){if(t="vertex"===b)a:{for(t=d-1;0<=t;t--){var y=
a[t];if("whitespace"!==y.type&&"block-comment"!==y.type)if("keyword"===y.type){if("attribute"===y.data||"in"===y.data){t=!0;break a}}else break}t=!1}if(t)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");m.data in w||(w[m.data]=e(a,n,m.data));m.data=w[m.data]}}for(d=a.length-1;0<=d;--d)m=a[d],"preprocessor"===m.type&&((b=m.data.match(/\#extension\s+(.*)\:/))&&b[1]&&0<=h.indexOf(b[1].trim())&&(b=a[d+1],a.splice(d,b&&"whitespace"===b.type?2:1)),(b=m.data.match(/\#ifdef\s+(.*)/))&&
b[1]&&0<=h.indexOf(b[1].trim())&&(m.data="#if 1"),(b=m.data.match(/\#ifndef\s+(.*)/))&&b[1]&&0<=h.indexOf(b[1].trim())&&(m.data="#if 0"));return k(a)}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(d,a){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(d){"use strict;";return function(a){var l=d(),g=[],g=g.concat(l(a));return g=g.concat(l(null))}})},"esri/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(d,a,l){"use strict;";var g="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function k(a){a.length&&y.push({type:g[n],
data:a,position:z,line:x,column:A})}function e(){t=t.length?[]:t;if("/"===w&&"*"===r)return z=u+p-1,n=0,w=r,p+1;if("/"===w&&"/"===r)return z=u+p-1,n=1,w=r,p+1;if("#"===r)return n=2,z=u+p,p;if(/\s/.test(r))return n=9,z=u+p,p;C=/\d/.test(r);D=/[^\w_]/.test(r);z=u+p;n=C?4:D?3:9999;return p}function c(){if(("\r"===r||"\n"===r)&&"\\"!==w)return k(t.join("")),n=999,p;t.push(r);w=r;return p+1}function h(){if("."===w&&/\d/.test(r))return n=5,p;if("/"===w&&"*"===r)return n=0,p;if("/"===w&&"/"===r)return n=
1,p;if("."===r&&t.length){for(;m(t););n=5;return p}if(";"===r||")"===r||"("===r){if(t.length)for(;m(t););k(r);n=999;return p+1}var a=2===t.length&&"\x3d"!==r;if(/[\w_\d\s]/.test(r)||a){for(;m(t););n=999;return p}t.push(r);w=r;return p+1}function m(b){var c=0,e,d;do{e=a.indexOf(b.slice(0,b.length+c).join(""));d=a[e];if(-1===e){if(0<c--+b.length)continue;d=b.slice(0,1).join("")}k(d);z+=d.length;t=t.slice(d.length);return t.length}while(1)}function b(){if("."===r||/[eE]/.test(r))return t.push(r),n=5,
w=r,p+1;if("x"===r&&1===t.length&&"0"===t[0])return n=11,t.push(r),w=r,p+1;if(/[^\d]/.test(r))return k(t.join("")),n=999,p;t.push(r);w=r;return p+1}function f(){"f"===r&&(t.push(r),w=r,p+=1);if(/[eE]/.test(r)||"-"===r&&/[eE]/.test(w))return t.push(r),w=r,p+1;if(/[^\d]/.test(r))return k(t.join("")),n=999,p;t.push(r);w=r;return p+1}var p=0,u=0,n=999,r,w,t=[],y=[],x=1,A=0,z=0,C=!1,D=!1,B="",E;return function(a){y=[];if(null!==a){a=a.replace?a.replace(/\r\n/g,"\n"):a;p=0;B+=a;for(E=B.length;r=B[p],p<
E;){a=p;switch(n){case 0:"/"===r&&"*"===w?(t.push(r),k(t.join("")),n=999):(t.push(r),w=r);p+=1;break;case 1:p=c();break;case 2:p=c();break;case 3:p=h();break;case 4:p=b();break;case 11:/[^a-fA-F0-9]/.test(r)?(k(t.join("")),n=999):(t.push(r),w=r,p+=1);break;case 5:p=f();break;case 9999:if(/[^\d\w_]/.test(r)){var g=t.join("");n=-1<d.indexOf(g)?8:-1<l.indexOf(g)?7:6;k(t.join(""));n=999}else t.push(r),w=r,p+=1;break;case 9:/[^\s]/g.test(r)?(k(t.join("")),n=999):(t.push(r),w=r,p+=1);break;case 999:p=e()}if(a!==
p)switch(B[a]){case "\n":A=0;++x;break;default:++A}}u+=p;B=B.slice(p);return y}t.length&&k(t.join(""));n=10;k("(eof)");return y}}})},"esri/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/views/webgl/RenderingContext":function(){define("require exports ../../core/has ./enums ./InstanceCounter ./renderState ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(d,a,l,g,k,e,c,h){return function(){function a(a,d){var b=this;this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=
!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=c.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=h.loadCapabilities(a,d);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport=
{x:a[0],y:a[1],width:a[2],height:a[3]};a=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};this._stateTracker=new e.StateTracker({setBlending:function(a){a?
(b.setBlendingEnabled(!0),b.setBlendEquationSeparate(a.opRgb,a.opAlpha),b.setBlendFunctionSeparate(a.srcRgb,a.dstRgb,a.srcAlpha,a.dstAlpha),a=a.color,b.setBlendColor(a.r,a.g,a.b,a.a)):b.setBlendingEnabled(!1)},setCulling:function(a){a?(b.setFaceCullingEnabled(!0),b.setCullFace(a.face),b.setFrontFace(a.mode)):b.setFaceCullingEnabled(!1)},setPolygonOffset:function(a){a?(b.setPolygonOffsetFillEnabled(!0),b.setPolygonOffset(a.factor,a.units)):b.setPolygonOffsetFillEnabled(!1)},setDepthTest:function(a){a?
(b.setDepthTestEnabled(!0),b.setDepthFunction(a.func)):b.setDepthTestEnabled(!1)},setStencilTest:function(a){if(a){b.setStencilTestEnabled(!0);var c=a.function;b.setStencilFunction(c.func,c.ref,c.mask);a=a.operation;b.setStencilOp(a.fail,a.zFail,a.zPass)}else b.setStencilTestEnabled(!1)},setDepthWrite:function(a){a?(b.setDepthWriteEnabled(!0),b.setDepthRange(a.zNear,a.zFar)):b.setDepthWriteEnabled(!1)},setColorWrite:function(a){a?b.setColorMask(a.r,a.g,a.b,a.a):b.setColorMask(!1,!1,!1,!1)},setStencilWrite:function(a){a?
b.setStencilWriteMask(a.mask):b.setStencilWriteMask(0)}});this.enforceState()}Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};a.prototype.setPipelineState=
function(a){this._stateTracker.setPipeline(a)};a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a,this._stateTracker.invalidateBlending())};a.prototype.setBlendColor=function(a,c,e,d){if(a!==this._blendColorState.r||c!==this._blendColorState.g||e!==this._blendColorState.b||d!==this._blendColorState.a)this.gl.blendColor(a,c,e,d),this._blendColorState.r=a,this._blendColorState.g=c,this._blendColorState.b=
e,this._blendColorState.a=d,this._stateTracker.invalidateBlending()};a.prototype.setBlendFunction=function(a,c){if(a!==this._blendFunctionState.srcRGB||c!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,c),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=c,this._blendFunctionState.dstAlpha=c,this._stateTracker.invalidateBlending()};a.prototype.setBlendFunctionSeparate=function(a,c,e,d){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==
e||this._blendFunctionState.dstRGB!==c||this._blendFunctionState.dstAlpha!==d)this.gl.blendFuncSeparate(a,c,e,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=c,this._blendFunctionState.dstAlpha=d,this._stateTracker.invalidateBlending()};a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a,this._stateTracker.invalidateBlending())};
a.prototype.setBlendEquationSeparate=function(a,c){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==c)this.gl.blendEquationSeparate(a,c),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=c,this._stateTracker.invalidateBlending()};a.prototype.setColorMask=function(a,c,e,d){if(this._colorMaskState.r!==a||this._colorMaskState.g!==c||this._colorMaskState.b!==e||this._colorMaskState.a!==d)this.gl.colorMask(a,c,e,d),this._colorMaskState.r=a,this._colorMaskState.g=
c,this._colorMaskState.b=e,this._colorMaskState.a=d,this._stateTracker.invalidateColorWrite()};a.prototype.setClearColor=function(a,c,e,d){if(this._clearColor.r!==a||this._clearColor.g!==c||this._clearColor.b!==e||this._clearColor.a!==d)this.gl.clearColor(a,c,e,d),this._clearColor.r=a,this._clearColor.g=c,this._clearColor.b=e,this._clearColor.a=d};a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),
this._polygonCullingEnabled=a,this._stateTracker.invalidateCulling())};a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a,this._stateTracker.invalidatePolygonOffset())};a.prototype.setPolygonOffset=function(a,c){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==c)this._polygonOffset[0]=a,this._polygonOffset[1]=c,this.gl.polygonOffset(a,
c),this._stateTracker.invalidatePolygonOffset()};a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a,this._stateTracker.invalidateCulling())};a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a,this._stateTracker.invalidateCulling())};a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=
a)};a.prototype.setScissorRect=function(a,c,e,d){if(this._scissorRect.x!==a||this._scissorRect.y!==c||this._scissorRect.width!==e||this._scissorRect.height!==d)this.gl.scissor(a,c,e,d),this._scissorRect.x=a,this._scissorRect.y=c,this._scissorRect.width=e,this._scissorRect.height=d};a.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a,this._stateTracker.invalidateDepthTest())};
a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a,this._stateTracker.invalidateDepthTest())};a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a,this._stateTracker.invalidateDepthWrite())};a.prototype.setDepthRange=function(a,c){if(this._depthRange.zNear!==a||this._depthRange.zFar!==
c)this.gl.depthRange(a,c),this._depthRange.zNear=a,this._depthRange.zFar=c,this._stateTracker.invalidateDepthWrite()};a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a,this._stateTracker.invalidateStencilTest())};a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};a.prototype.setStencilFunction=function(a,
c,e){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==c||this._stencilFunction.mask!==e)this.gl.stencilFunc(a,c,e),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=c,this._stencilFunction.mask=e,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilFunctionSeparate=function(a,c,e,d){if(this._stencilFunction.face!==a||this._stencilFunction.func!==c||this._stencilFunction.ref!==e||this._stencilFunction.mask!==d)this.gl.stencilFuncSeparate(a,
c,e,d),this._stencilFunction.face=a,this._stencilFunction.func=c,this._stencilFunction.ref=e,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a,this._stateTracker.invalidateStencilWrite())};a.prototype.setStencilOp=function(a,c,e){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==e)this.gl.stencilOp(a,c,e),
this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=c,this._stencilOperation.zPass=e,this._stateTracker.invalidateStencilTest()};a.prototype.setStencilOpSeparate=function(a,c,e,d){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==c||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==d)this.gl.stencilOpSeparate(a,c,e,d),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=c,this._stencilOperation.zFail=
e,this._stencilOperation.zPass=d,this._stateTracker.invalidateStencilTest()};a.prototype.setActiveTexture=function(a){var b=this._activeTextureUnit;0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(g.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return b};a.prototype.clear=function(a){a&&this.gl.clear(a)};a.prototype.clearSafe=function(a){a&&(a&16384&&this.setColorMask(!0,!0,!0,!0),a&256&&this.setDepthWriteEnabled(!0),a&1024&&this.setStencilWriteMask(255),this.gl.clear(a))};a.prototype.drawArrays=
function(a,c,e){this.gl.drawArrays(a,c,e)};a.prototype.drawElements=function(a,c,e,d){5123===e?this.gl.drawElements(a,c,e,d):5125===e&&this.gl.drawElements(a,c,e,d)};a.prototype.logIno=function(){};Object.defineProperty(a.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});a.prototype.setViewport=function(a,c,e,d){var b=this._viewport;if(b.x!==a||b.y!==c||b.width!==e||b.height!==d)b.x=a,b.y=c,b.width=e,b.height=d,this.gl.viewport(a,c,e,d)};a.prototype.getViewport=
function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};a.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,c){void 0===c&&(c=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=a._MAX_TEXTURE_IMAGE_UNITS||
0>c)&&console.error("Input texture unit is out of range of available units!");var e=this._textureUnitMap[c];this.setActiveTexture(c);null==b||null==b.glName?(null!=e&&(this.gl.bindTexture(e.descriptor.target,null),e.setBoundToUnit(c,!1)),this._textureUnitMap[c]=null):e&&e.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.setBoundToUnit(c,!0),b.applyChanges(),this._textureUnitMap[c]=b)};a.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||
this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.bindRenderbuffer=function(a){var b=this.gl;a||(b.bindRenderbuffer(b.RENDERBUFFER,null),this._activeRenderbuffer=
null);this._activeRenderbuffer!==a&&(b.bindRenderbuffer(b.RENDERBUFFER,a.glName),this._activeRenderbuffer=a)};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};a.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null)};a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=function(){var a=this.gl,c=this._capabilities.vao;c&&c.bindVertexArray(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)a.disableVertexAttribArray(e);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(c&&this._activeVertexArrayObject){if(c=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(c)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);a.bindRenderbuffer(a.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(1);
!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(c=0;c<this.parameters.maxTextureImageUnits;c++)a.activeTexture(g.BASE_TEXTURE_UNIT+c),a.bindTexture(3553,null),(e=this._textureUnitMap[c])&&a.bindTexture(e.descriptor.target,e.glName);a.activeTexture(g.BASE_TEXTURE_UNIT+this._activeTextureUnit);
a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._bindBuffer=function(a,c,e,d){if(!c)return a.bindBuffer(e,null),null;if(d===c)return d;a.bindBuffer(e,c.glName);return c};a._MAX_TEXTURE_IMAGE_UNITS=-1;return a}()})},"esri/views/webgl/InstanceCounter":function(){define(["require","exports"],function(d,a){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=
function(a){switch(a){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};a.prototype.decrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;
break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount);console.log("Renderbuffers: "+
this._instanceCount.renderBufferCount)};return a}()})},"esri/views/webgl/renderState":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(d,a,l){function g(a){return z.intern(a)}function k(a){return C.intern(a)}function e(a){return D.intern(a)}function c(a){return B.intern(a)}function h(a){return E.intern(a)}function m(a){return F.intern(a)}function b(a){return H.intern(a)}function f(a){return G.intern(a)}function p(a){return"["+a.join(",")+"]"}function u(a){return a?
p([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,a.color.r,a.color.g,a.color.b,a.color.a]):null}function n(a){return a?p([a.face,a.mode]):null}function r(a){return a?p([a.factor,a.units]):null}function w(a){return a?p([a.func]):null}function t(a){return a?p([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}function y(a){return a?p([a.zNear,a.zFar]):null}function x(a){return a?p([a.r,a.g,a.b,a.a]):null}function A(a){return a?p([a.mask]):
null}Object.defineProperty(a,"__esModule",{value:!0});a.simpleBlendingParams=function(a,b,c,e){void 0===c&&(c=32774);void 0===e&&(e=[0,0,0,0]);return{srcRgb:a,srcAlpha:a,dstRgb:b,dstAlpha:b,opRgb:c,opAlpha:c,color:{r:e[0],g:e[1],b:e[2],a:e[3]}}};a.separateBlendingParams=function(a,b,c,e,d,f,g){void 0===d&&(d=32774);void 0===f&&(f=32774);void 0===g&&(g=[0,0,0,0]);return{srcRgb:a,srcAlpha:b,dstRgb:c,dstAlpha:e,opRgb:d,opAlpha:f,color:{r:g[0],g:g[1],b:g[2],a:g[3]}}};a.backFaceCullingParams={face:1029,
mode:2305};a.defaultDepthWriteParams={zNear:0,zFar:1};a.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};a.makeBlending=g;a.makeCulling=k;a.makePolygonOffset=e;a.makeDepthTest=c;a.makeStencilTest=h;a.makeDepthWrite=m;a.makeColorWrite=b;a.makeStencilWrite=f;a.makePipelineState=function(a){return J.intern(a)};d=function(){function a(a,b){this.makeKey=a;this.makeRef=b;this.interns=new Map}a.prototype.intern=function(a){if(!a)return null;var b=this.makeKey(a),c=this.interns;c.has(b)||c.set(b,this.makeRef(a));
return c.get(b)};return a}();var z=new d(u,function(a){return l({__tag:"Blending"},a)}),C=new d(n,function(a){return l({__tag:"Culling"},a)}),D=new d(r,function(a){return l({__tag:"PolygonOffset"},a)}),B=new d(w,function(a){return l({__tag:"DepthTest"},a)}),E=new d(t,function(a){return l({__tag:"StencilTest"},a)}),F=new d(y,function(a){return l({__tag:"DepthWrite"},a)}),H=new d(x,function(a){return l({__tag:"ColorWrite"},a)}),G=new d(A,function(a){return l({__tag:"StencilWrite"},a)}),J=new d(function(a){return a?
p([u(a.blending),n(a.culling),r(a.polygonOffset),w(a.depthTest),t(a.stencilTest),y(a.depthWrite),x(a.colorWrite),A(a.stencilWrite)]):null},function(a){return{blending:g(a.blending),culling:k(a.culling),polygonOffset:e(a.polygonOffset),depthTest:c(a.depthTest),stencilTest:h(a.stencilTest),depthWrite:m(a.depthWrite),colorWrite:b(a.colorWrite),stencilWrite:f(a.stencilWrite)}});d=function(){function a(a){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=
this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=a}a.prototype.setPipeline=function(a){if(this._pipelineInvalid||a!==this._pipeline)this.setBlending(a.blending),this.setCulling(a.culling),this.setPolygonOffset(a.polygonOffset),this.setDepthTest(a.depthTest),this.setStencilTest(a.stencilTest),this.setDepthWrite(a.depthWrite),this.setColorWrite(a.colorWrite),this.setStencilWrite(a.stencilWrite),this._pipeline=a;
this._pipelineInvalid=!1};a.prototype.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};a.prototype.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};a.prototype.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};a.prototype.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};a.prototype.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.invalidateDepthWrite=
function(){this._pipelineInvalid=this._depthWriteInvalid=!0};a.prototype.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};a.prototype.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.setBlending=function(a){this._blending=this.setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};a.prototype.setCulling=function(a){this._culling=this.setSubState(a,this._culling,this._cullingInvalid,
this._stateSetters.setCulling);this._cullingInvalid=!1};a.prototype.setPolygonOffset=function(a){this._polygonOffset=this.setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};a.prototype.setDepthTest=function(a){this._depthTest=this.setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};a.prototype.setStencilTest=function(a){this._stencilTest=this.setSubState(a,this._stencilTest,
this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};a.prototype.setDepthWrite=function(a){this._depthWrite=this.setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};a.prototype.setColorWrite=function(a){this._colorWrite=this.setSubState(a,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};a.prototype.setStencilWrite=function(a){this._stencilWrite=
this.setSubState(a,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};a.prototype.setSubState=function(a,b,c,e){if(c||a!==b)e(a),this._pipelineInvalid=!0;return a};return a}();a.StateTracker=d})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},
"esri/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./LoseContext ./VertexArrayObjects".split(" "),function(d,a,l,g,k,e,c){function h(a,b,c,e,d){if(e&&k.default(a))return!0;if(b[c])return!1;for(b=0;b<d.length;b++)if(a.getExtension(d[b]))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0});a.loadCapabilities=function(a,b){var d=b&&b.disabledExtensions||{};b=b&&b.debugWebGLExtensions||{};h(a,d,"standardDerivatives",
!0,["OES_standard_derivatives"]);var m=g.load(a),u=c.load(a,d),n;n=d.compressedTextureS3TC?null:(n=a.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:n.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:n.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var r;r=d.textureFilterAnisotropic?null:(r=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||
a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null;var w=l.load(a,d),t;k.default(a)?t={textureFloat:!0,textureFloatLinear:!d.textureFloatLinear&&!!a.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!d.textureHalfFloatLinear&&!!a.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:a.HALF_FLOAT}:a instanceof WebGLRenderingContext?(t=!d.textureHalfFloat&&
a.getExtension("OES_texture_half_float"),t={textureFloat:!d.textureFloat&&!!a.getExtension("OES_texture_float"),textureFloatLinear:!d.textureFloatLinear&&!!a.getExtension("OES_texture_float_linear"),textureHalfFloat:!!t,textureHalfFloatLinear:!d.textureHalfFloatLinear&&!!a.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t?t.HALF_FLOAT_OES:void 0}):t=void 0;var y;if(k.default(a)){y=!d.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float");var x=!d.colorBufferFloat&&a.getExtension("EXT_color_buffer_float");
y=y||x?{textureFloat:!!x,textureHalfFloat:!!y,R16F:a.R16F,RG16F:a.RG16F,RGBA16F:a.RGBA16F,R32F:a.R32F,RG32F:a.RG32F,RGBA32F:a.RGBA32F,R11F_G11F_B10F:a.R11F_G11F_B10F,RGB16F:a.RGB16F}:null}else a instanceof WebGLRenderingContext?(y=!d.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float"),x=!d.colorBufferFloat&&a.getExtension("WEBGL_color_buffer_float"),y=y||x?{textureFloat:!!x,textureHalfFloat:!!y,RGBA16F:y?y.RGBA16F_EXT:void 0,RGB16F:y?y.RGB16F_EXT:void 0,RGBA32F:x?x.RGBA32F_EXT:void 0}:
null):y=void 0;x=k.default(a)?{MIN:a.MIN,MAX:a.MAX}:d.blendMinMax?null:(x=a.getExtension("EXT_blend_minmax"))?{MIN:x.MIN_EXT,MAX:x.MAX_EXT}:null;return{instancing:m,vao:u,compressedTextureS3TC:n,textureFilterAnisotropic:r,disjointTimerQuery:w,textureFloat:t,colorBufferFloat:y,blendMinMax:x,depthTexture:h(a,d,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:!0,shaderTextureLOD:h(a,d,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),
fragDepth:h(a,d,"fragDepth",!0,["EXT_frag_depth"]),loseContext:e.load(a,b)}}})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a,d){if(d.disjointTimerQuery)return null;var e=a.getExtension("EXT_disjoint_timer_query")||a.getExtension("EXT_disjoint_timer_query_webgl2");return e?l.default(a)?{createQuery:function(){return a.createQuery()},resultAvailable:function(c){return a.getQueryParameter(c,
a.QUERY_RESULT_AVAILABLE)},getResult:function(c){return a.getQueryParameter(c,a.QUERY_RESULT)},disjoint:function(){return a.getParameter(e.GPU_DISJOINT_EXT)},beginTimeElapsed:function(c){return a.beginQuery(e.TIME_ELAPSED_EXT,c)},endTimeElapsed:function(){return a.endQuery(e.TIME_ELAPSED_EXT)},createTimestamp:function(a){return e.queryCounterEXT(a,e.TIMESTAMP_EXT)},timestampBits:function(){return a.getQuery(e.TIMESTAMP_EXT,e.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return e.createQueryEXT()},
resultAvailable:function(a){return e.getQueryObjectEXT(a,e.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return e.getQueryObjectEXT(a,e.QUERY_RESULT_EXT)},disjoint:function(){return a.getParameter(e.GPU_DISJOINT_EXT)},beginTimeElapsed:function(a){return e.beginQueryEXT(e.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return e.endQueryEXT(e.TIME_ELAPSED_EXT)},createTimestamp:function(a){return e.queryCounterEXT(a,e.TIMESTAMP_EXT)},timestampBits:function(){return e.getQueryEXT(e.TIMESTAMP_EXT,
e.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a){return l.default(a)?{drawArraysInstanced:a.drawArraysInstanced.bind(a),drawElementsInstanced:a.drawElementsInstanced.bind(a),vertexAttribDivisor:a.vertexAttribDivisor.bind(a)}:(a=a.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:a.drawArraysInstancedANGLE.bind(a),
drawElementsInstanced:a.drawElementsInstancedANGLE.bind(a),vertexAttribDivisor:a.vertexAttribDivisorANGLE.bind(a)}:null}})},"esri/views/webgl/capabilities/LoseContext":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a,d){var g=d.loseContext&&a.getExtension("WEBGL_lose_context");return g?{loseRenderingContext:function(){return g.loseContext()}}:null}})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["require",
"exports","./isWebGL2Context"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a,d){return l.default(a)?{createVertexArray:a.createVertexArray.bind(a),deleteVertexArray:a.deleteVertexArray.bind(a),bindVertexArray:a.bindVertexArray.bind(a)}:d.vao?null:(a=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:a.createVertexArrayOES.bind(a),deleteVertexArray:a.deleteVertexArrayOES.bind(a),
bindVertexArray:a.bindVertexArrayOES.bind(a)}:null}})},"esri/views/webgl/ShaderCompiler":function(){define(["require","exports"],function(d,a){return function(){function a(a){this.readFile=a}a.prototype.resolveIncludes=function(a){return this.resolve(a)};a.prototype.resolve=function(a,d){var e=this;void 0===d&&(d=new Map);if(d.has(a))return d.get(a);var c=this.read(a);if(!c)throw Error("cannot find shader file "+a);for(var g=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,k=g.exec(c),b=[];null!=k;)b.push({path:k[1],
start:k.index,length:k[0].length}),k=g.exec(c);var f=0,l="";b.forEach(function(a){l+=c.slice(f,a.start);l+=d.has(a.path)?"":e.resolve(a.path,d);f=a.start+a.length});l+=c.slice(f);d.set(a,l);return l};a.prototype.read=function(a){return this.readFile(a)};return a}()})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports","../../core/has","./Util"],function(d,a,l,g){return function(){function a(e,c,d,g,b){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=
this._buffers=void 0;this._initialized=!1;this._context=e;this._layout=d;this._buffers=g;this._locations=c;b&&(this._indexBuffer=b);this._id=a._nextId++}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var a=this;return Object.keys(this._buffers).reduce(function(c,e){return c+a._buffers[e].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},
enumerable:!0,configurable:!0});a.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var c=this._context.capabilities.vao;c&&this._glName&&(c.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(a){for(var e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};a.prototype.initialize=function(){if(!this._initialized){var a=
this._context.capabilities.vao;if(a){var c=a.createVertexArray();a.bindVertexArray(c);this._bindLayout();a.bindVertexArray(null);this._glName=c}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var a=this._buffers,c=!!this._context.capabilities.vao,d=this._layout,k=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");
var b=this._context.gl,f;for(f in a){var l=a[f];l||console.error("Vertex buffer is uninitialized!");var u=d[f];u||console.error("Vertex element descriptor is empty!");g.bindVertexBufferLayout(this._context,this._locations,l,u)}k&&(c?b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k.glName):this._context.bindBuffer(k))};a.prototype.unbind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(null):this._unbindLayout()};a.prototype._unbindLayout=function(){var a=this._buffers,c=
this._layout;a||console.error("Vertex buffer dictionary is empty!");for(var d in a){var k=a[d];k||console.error("Vertex buffer is uninitialized!");g.unbindVertexBufferLayout(this._context,this._locations,k,c[d])}(a=this._indexBuffer)&&this._context.unbindBuffer(a.bufferType)};a._nextId=0;return a}()})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils"],function(d,a,l,g){function k(a){return a[0].stride}function e(a){switch(a){case 5126:return 4;
case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function c(a){switch(a){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:return 4;case 34041:return 4;case 33325:return 2;case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1;
default:g.neverReached(a)}return 0}function h(a){if(!a)return 0;if("colorAttachment"in a)return a.glName?h(a.colorAttachment)+h(a.depthStencilAttachment):0;if("descriptor"in a)return a.glName?h(a.descriptor):0;var b=a.internalFormat||"pixelFormat"in a&&a.pixelFormat;if(!b)return 0;var e="hasMipmap"in a&&a.hasMipmap?1.3:1;a=a.width*a.height;return c(b)*a*e}Object.defineProperty(a,"__esModule",{value:!0});a.vertexCount=function(a,b){return a.vertexBuffers[b].size/k(a.layout[b])};a.getStride=k;a.getBytesPerElement=
e;a.addDescriptor=function(a,b,c,d,g,h){var f=e(d);if(0<a.length){var k=a[0].stride,m=k+f*c;a.forEach(function(a){return a.stride=m});a.push({name:b,count:c,type:d,offset:k,stride:m,normalized:g,divisor:h})}else a.push({name:b,count:c,type:d,offset:0,stride:f*c,normalized:g,divisor:h})};a.assertCompatibleVertexAttributeLocations=function(a,b){(a=a.locations===b.locations)||console.error("VertexAttributeLocations are incompatible");return a};a.hasAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===
b)return!0;return!1};a.findAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return a[c];return null};a.copyFramebufferToTexture=function(a,b,c,e,d){void 0===d&&(d=0);var f=a.getBoundFramebufferObject(),g=a.getBoundTexture(0);a.bindFramebuffer(b);a.bindTexture(c,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,d,c.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);a.gl.flush();a.bindFramebuffer(f);a.bindTexture(g,0)};a.setBaseInstanceOffset=function(a,b){var c={},e;for(e in a)c[e]=a[e].map(function(a){return a.divisor?
l({},a,{baseInstance:b}):a});return c};a.bindVertexBufferLayout=function(a,b,c,e,d){var f=a.gl,g=a.capabilities.instancing;a.bindBuffer(c);for(a=0;a<e.length;a++){c=e[a];var h=b[c.name],k=(d?d:0+c.baseInstance?c.baseInstance:0)*c.stride;void 0===h&&console.error("There is no location for vertex attribute '"+c.name+"' defined.");c.baseInstance&&!c.divisor&&console.error("Vertex attribute '"+c.name+"' uses baseInstanceOffset without divisor.");if(4>=c.count)f.vertexAttribPointer(h,c.count,c.type,c.normalized,
c.stride,c.offset+k),f.enableVertexAttribArray(h),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h,c.divisor);else if(9===c.count)for(var m=0;3>m;m++)f.vertexAttribPointer(h+m,3,c.type,c.normalized,c.stride,c.offset+12*m+k),f.enableVertexAttribArray(h+m),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h+m,c.divisor);else if(16===c.count)for(m=0;4>m;m++)f.vertexAttribPointer(h+m,4,c.type,c.normalized,c.stride,c.offset+16*m+k),f.enableVertexAttribArray(h+m),c.divisor&&0<c.divisor&&g&&g.vertexAttribDivisor(h+
m,c.divisor);else console.error("Unsupported vertex attribute element count: "+c.count)}};a.unbindVertexBufferLayout=function(a,b,c,e){var d=a.gl,f=a.capabilities.instancing;a.bindBuffer(c);for(c=0;c<e.length;c++){var g=e[c],h=b[g.name];if(4>=g.count)d.disableVertexAttribArray(h),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h,0);else if(9===g.count)for(var k=0;3>k;k++)d.disableVertexAttribArray(h+k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else if(16===g.count)for(k=0;4>k;k++)d.disableVertexAttribArray(h+
k),g.divisor&&0<g.divisor&&f&&f.vertexAttribDivisor(h+k,0);else console.error("Unsupported vertex attribute element count: "+g.count)}a.unbindBuffer(34962)};a.getBytesPerElementFormat=c;a.getGpuMemoryUsage=h})},"esri/views/webgl/ProgramCache":function(){define(["require","exports","./programUtils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this._programCacheByTemplate=new Map;this._rctx=a}a.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(a){a.programs.forEach(function(a){a.dispose()})});
this._programCacheByTemplate=null};a.prototype.getProgram=function(a,e){var c=this;this._programCacheByTemplate.has(a)||this.addProgramTemplate(a,function(e){return l.createProgram(c._rctx,a,e)});return this.getProgramTemplateInstance(a,e)};a.prototype.addProgramTemplate=function(a,e){this._programCacheByTemplate.set(a,{constructor:e,programs:new Map})};a.prototype.getProgramTemplateInstance=function(a,e){if(a=this._programCacheByTemplate.get(a)){var c=e?JSON.stringify(e):"default";a.programs.has(c)||
(e=a.constructor(e),a.programs.set(c,e));return a.programs.get(c)}return null};return a}();a.ProgramCache=d})},"esri/views/webgl/programUtils":function(){define(["require","exports","./Program"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.glslifyDefineMap=function(a){var d="",e;for(e in a){var c=a[e];if("boolean"===typeof c)c&&(d+="#define "+e+"\n");else if("number"===typeof c)d+="#define "+e+" "+c.toFixed()+"\n";else if("object"===typeof c){var g=c.options,m=0,b;for(b in g)d+=
"#define "+g[b]+" "+(m++).toFixed()+"\n";d+="#define "+e+" "+g[c.value]+"\n"}}return d};a.createProgram=function(a,d,e,c){e=e||{};c=c||"";e="function"===typeof d.shaders?d.shaders(e):d.shaders;return new l(a,c+e.vertexShader,c+e.fragmentShader,d.attributes)}})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../../../core/Evented"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var c=
null!==a&&a.apply(this,arguments)||this;c._renderRequestedCalled=!1;c._attached=!1;c._isReady=!1;c._opacity=1;c.renderRequested=!1;c._visible=!0;return c}l(d,a);Object.defineProperty(d.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isReady",{get:function(){return this._attached&&
this._isReady},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});d.prototype.attach=function(){this.ready();return!0};d.prototype.detach=function(){};
d.prototype.processRender=function(a){this.visible&&this.attached&&(this._renderRequestedCalled=!1,this.doRender(a),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render"))};d.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};d.prototype.dispose=
function(){};d.prototype.ready=function(){this._isReady=!0;this.emit("isReady")};return d}(g);a.DisplayObject=d})},"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ./webgl/enums".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);c.prototype.doRender=function(c){this.visible&&
c.drawPhase===e.WGLDrawPhase.MAP&&a.prototype.doRender.call(this,c)};c.prototype.renderChildren=function(a){var b=this.stage.painter,c=this.children,d=a.drawPhase;this.sortChildren(function(a,b){return b.resolution-a.resolution});a.drawPhase=e.WGLDrawPhase.CLIP;b.startStencilBurn();for(var g=0,h=c.length;g<h;g++){var k=c[g];k.attached&&k.visible&&(b.stencilRef=g,k.processRender(a))}a.drawPhase=d;b.startStencilDraw();g=0;for(h=c.length;g<h;g++)k=c[g],k.attached&&k.visible&&(b.stencilRef=g,k.processRender(a));
b.endStencilDraw()};return c}(k.Container);a.BitmapContainer=d})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;c._childrenSet=new Set;c._childrenToAttach=[];c._childrenToDetach=[];c._renderPhase=3;c.children=[];return c}l(d,a);Object.defineProperty(d.prototype,"numChildren",
{get:function(){return this.children.length},enumerable:!0,configurable:!0});d.prototype.detach=function(){for(var a=0,d=this.children.concat(this._childrenToDetach);a<d.length;a++){var e=d[a];e.attached&&(this.detachChild(e),e.attached=!1,e.parent=null)}};d.prototype.doRender=function(a){var c=a.globalOpacity;a.globalOpacity*=this.opacity;this._renderPhase=0;this.attachChildren();this._renderPhase=1;for(var d=this._childrenToDetach;0<d.length;){var b=d.shift();this.detachChild(b);b.attached=!1;b.parent=
null;b.stage=null}this._renderPhase=2;this.renderChildren(a);this._renderPhase=3;a.globalOpacity=c};d.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};d.prototype.addChildAt=function(a,d){void 0===d&&(d=this.numChildren);if(!a||this.contains(a))return a;var c=a.parent;c&&c!==this&&c.removeChild(a);d>=this.numChildren?this.children.push(a):this.children.splice(d,0,a);this._childrenSet.add(a);d=this._childrenToDetach.indexOf(a);-1<d&&this._childrenToDetach.splice(d,1);
this._childrenToAttach.push(a);2<=this._renderPhase&&this.requestRender();return a};d.prototype.contains=function(a){return this._childrenSet.has(a)};d.prototype.getChildIndex=function(a){return this.children.indexOf(a)};d.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};d.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};d.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):
a};d.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),2<=this._renderPhase&&this.requestRender();else{var c=this._childrenToAttach.indexOf(a);-1<c&&this._childrenToAttach.splice(c,1)}return a};d.prototype.requestChildRender=function(a){a&&a.parent===this&&2<=this._renderPhase&&this.requestRender()};d.prototype.setChildIndex=function(a,d){var c=this.getChildIndex(a);
-1<c&&(this.children.splice(c,1),this.children.splice(d,0,a),2<=this._renderPhase&&this.requestRender())};d.prototype.sortChildren=function(a){2<this._renderPhase&&this.requestRender();return this.children.sort(a)};d.prototype.attachChildren=function(){var a=this._childrenToAttach;if(0!==a.length)for(var d=0,e=!1;!e;)e=a[d],e.parent=this,e.stage=this.stage,this.attachChild(e)?(e.attached=!0,a.splice(d,1)):++d,e=a.length===d};d.prototype.renderChildren=function(a){for(var c=this.children,d=c.length,
b=0;b<d;b++)c[b].processRender(a)};d.prototype.attachChild=function(a){return a.attach()};d.prototype.detachChild=function(a){a.detach()};return d}(g.DisplayObject);a.Container=d})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=
0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||(a.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=
3]="ROTATION"})(a.VVType||(a.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||(a.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=
512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||(a.WGLVVTarget={}));(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(a.MosaicType||(a.MosaicType={}))})},"esri/views/2d/engine/BitmapTile":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/ObjectPool ../tiling ./Bitmap".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(b){b=
a.call(this,b)||this;b.key=new e.TileKey(0,0,0,0);return b}l(c,a);c.prototype.acquire=function(a){};c.prototype.release=function(){this.key.set(0,0,0,0);this.source=null};c.pool=new k(c,!0);return c}(c.Bitmap);a.BitmapTile=d})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});a.TileInfoView=l;a.TileKey=g;a.TileQueue=k;a.TileStrategy=
e})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),function(d,a,l,g,k,e,c,h,m,b){function f(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var p=new Set,u=[],
n=new Map,r=[0,0];return function(a){function c(b){b=a.call(this,b)||this;b._keyToItem=new Map;b.concurrency=6;b.strategy="scale-first";b.tileInfoView=null;return b}l(c,a);c.prototype.initialize=function(){var a=this,c=this.concurrency,d=this.process,e="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new b.QueueProcessor({concurrency:c,process:function(b,c){b=a._keyToItem.get(b);return d(b,{signal:c})},peeker:e})};c.prototype.destroy=function(){this.clear();
this._queue.destroy();this._queue=null};Object.defineProperty(c.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});c.prototype.abort=function(a){this._queue.abort("string"===typeof a?
a:a.id)};c.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};c.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};c.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};c.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};c.prototype.pause=function(){this._queue.pause()};c.prototype.push=function(a){return e(this,void 0,
void 0,function(){var b,c,d,e=this;return k(this,function(f){b=a.key.id;if(this.has(b))return[2,this.get(b)];c=this._queue.push(b);d=function(){e._keyToItem.delete(b);e.notifyChange("updating")};this._keyToItem.set(b,a);c.then(d,d);this.notifyChange("updating");return[2,c]})})};c.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};c.prototype.resume=function(){this._queue.resume()};c.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,
c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,e=0;e<a.length;e++){var g=this._keyToItem.get(a[e]),h=this.tileInfoView.getTileScale(g.key);n.has(h)||(n.set(h,[]),c=Math.max(h,c),d=Math.min(h,d));n.get(h).push(g.key);p.add(h)}var k=this.state.scale;n.has(k)||(f(u,p),u.sort(),k=u.reduce(function(a,b,c,d){return Math.abs(b-k)<Math.abs(a-k)?b:a},u[0]));k=Math.min(k,c);k=Math.max(k,d);a=n.get(k);var m=b.getClosestInfoForScale(k),l=m.getColumnForX(this.state.center[0]),t=m.getRowForY(this.state.center[1]);
a.sort(function(a,b){var c=m.denormalizeCol(a.col,a.world),d=m.denormalizeCol(b.col,b.world);return Math.sqrt((l-c)*(l-c)+(t-a.row)*(t-a.row))-Math.sqrt((l-d)*(l-d)+(t-b.row)*(t-b.row))});p.clear();n.clear();return a[0].id};c.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,d=Number.POSITIVE_INFINITY,e=null,f=0;f<a.length;f++){var g=this._keyToItem.get(a[f]);b.getTileCoords(r,g.key);var h=m.vec2.distance(r,c);h<d&&(d=h,e=g.key)}return e.id};
g([h.property({constructOnly:!0})],c.prototype,"concurrency",void 0);g([h.property({constructOnly:!0})],c.prototype,"process",void 0);g([h.property()],c.prototype,"state",void 0);g([h.property({constructOnly:!0})],c.prototype,"strategy",void 0);g([h.property({constructOnly:!0})],c.prototype,"tileInfoView",void 0);g([h.property({readOnly:!0})],c.prototype,"updating",null);return c=g([h.subclass("esri.views.2d.tiling.TileQueue")],c)}(h.declared(c))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});var m=function(){return function(a,c){this.item=a;this.controller=c;this.promise=null}}();d=function(){function a(a){var b=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new c({peeker:a.peeker});this.process=a.process;var d=a.scheduler;a.priority&&d&&(this._task=
d.registerTask(a.priority,function(a){return b.update(a)},function(){return b.needsUpdate()}))}a.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};a.prototype.clear=function(){this._queue.clear();
var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};a.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._deferreds.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){return g(this,
void 0,void 0,function(){var b,c,d,f,g,h,k=this;return l(this,function(m){if(b=this.get(a))return[2,b];d=e.createAbortController();f=function(){var b=k._processingItems.get(a);b&&b.controller.abort();g();c.reject(e.createAbortError())};g=function(){h.remove();k._deferreds.delete(a);k._controllers.delete(a);k._queue.remove(a);k._processingItems.delete(a);k._scheduleNext()};h=e.onAbortOrThrow(d.signal,f);c=e.createDeferred();this._deferreds.set(a,c);this._controllers.set(a,d);c.promise.then(g,g);this._queue.push(a);
this._scheduleNext();return[2,c.promise]})})};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};a.prototype.update=
function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};a.prototype._scheduleNext=function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=h.schedule(function(){a._schedule=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};a.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};a.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(b))};a.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};a.prototype._process=function(a){var b=this;if(!k.isNone(a)){var c,d=e.createAbortController(),
f=new m(a,d);this._processingItems.set(a,f);try{c=this.process(a,d.signal)}catch(w){this._processError(f,w)}c&&"function"===typeof c.then?(f.promise=c,c.then(function(a){return b._processResult(f,a)},function(a){return b._processError(f,a)})):this._processResult(f,c)}};Object.defineProperty(a.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return a}();a.QueueProcessor=d})},"esri/core/Queue":function(){define(["require","exports"],
function(d,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};
a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};return a}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(d,a,l,g){var k=new g(0,0,0,0),e=new Map,c=[],h=[];return function(){function a(a){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=
a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,d=this.resampling,g=this.tileIndex,m=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);h.length=0;c.length=0;e.clear();if(m){var l=this.tileInfoView.tileInfo,w=l.minScale,t=l.maxScale,l=m.spans,y=m.lodInfo,x=y.level,A=a.state.scale,z=!a.stationary&&A>this._previousScale;
this._previousScale=A;this.tiles.length=0;if(!d&&(A>w||A<t))return this.tiles.length=0,e.clear(),g.forEach(function(a){b.releaseTile(a)}),g.clear(),h.length=0,c.length=0,e.clear(),!0;g.forEach(function(a){return a.visible=!0});t=w=0;if(0<l.length)for(A=0;A<l.length;A++){a=l[A];for(var C=a.row,D=a.colTo,B=a.colFrom;B<=D;B++)w++,a=k.set(x,C,y.normalizeCol(B),y.getWorldForColumn(B)).id,g.has(a)?(d=g.get(a),d.isReady?(e.set(a,d),t++):z||this._addParentTile(a,e)):(d=this.acquireTile(k),this.tileIndex.set(a,
d),z||this._addParentTile(a,e))}var E=t===w;g.forEach(function(a,d){k.set(d);if(!e.has(d)){var f=b.tileInfoView.intersects(m,k);!f||!z&&E?"purge"===b.cachePolicy?k.level===x&&f||c.push(d):(k.level>x||!f)&&c.push(d):a.isReady?h.push(d):k.level>x&&c.push(d)}});for(l=0;l<h.length;l++)a=h[l],(d=g.get(a))&&d.isReady&&e.set(a,d);for(l=0;l<c.length;l++)a=c[l],d=g.get(a),this.releaseTile(d),g["delete"](a);e.forEach(function(a){return b.tiles.push(a)});g.forEach(function(a){e.has(a.key.id)||(a.visible=!1)});
return E}};a.prototype.clear=function(){var a=this,c=this.tileIndex;c.forEach(function(b){a.releaseTile(b)});c.clear()};a.prototype._addParentTile=function(a,c){for(var b=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(b=this.tileIndex.get(a))&&b.isReady){c.has(b.key.id)||c.set(b.key.id,b);break}}};return a}()})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../core/Error ../../../core/events ../../../core/promiseUtils ../../../core/scheduling ../../../core/libs/gl-matrix-2/common ../../../core/libs/gl-matrix-2/mat2d ../../../core/libs/gl-matrix-2/mat2df64 ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../webgl ./Container ./webgl/BitBlitRenderer ./webgl/enums ./webgl/Painter ./webgl/shaders/StencilPrograms ../../support/screenshotUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(b,c){void 0===c&&(c={});var d=a.call(this)||this;d._renderParameters={drawPhase:0,state:d.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1};d._renderRequested=!1;d._clipData=new Float32Array(8);d._upperLeft=u.vec2f64.create();d._upperRight=u.vec2f64.create();d._lowerLeft=u.vec2f64.create();d._lowerRight=u.vec2f64.create();d._mat2=f.mat2df64.create();d._clipRendererInitialized=
!1;d._supersampleScreenshots=!0;d.stage=d;d._stationary=!0;d.attached=!0;var g=c.canvas,g=void 0===g?document.createElement("canvas"):g,m=c.alpha,m=void 0===m?!0:m,l=c.stencil,l=void 0===l?!0:l,p=c.renderContext,p=void 0===p?"webgl":p,t=c.supersampleScreenshots,t=void 0===t?!0:t;c=c.contextOptions;c=void 0===c?{}:c;d._canvas=g;g.setAttribute("style","width: 100%; height:100%; display:block;");b.appendChild(g);b=n.createContextOrErrorHTML(g,{alpha:m,antialias:!1,depth:!0,stencil:l},p);d.context=new n.RenderingContext(b,
c);d.painter=new y.default(d.context);d._taskHandle=h.addFrameTask({render:function(){return d.renderFrame()}});d._taskHandle.pause();d._supersampleScreenshots=t;d._lostWebGLContextHandle=e.on(g,"webglcontextlost",function(){d.emit("webgl-error",{error:new k("webgl-context-lost")})});return d}l(d,a);d.prototype.destroy=function(){this.removeAllChildren();this.renderFrame();this._taskHandle.remove();this._boundFBO=this._taskHandle=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&
(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=null);this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null);this.painter.dispose();this.context.dispose();
this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas);this._canvas=null};Object.defineProperty(d.prototype,"background",{get:function(){return this._background},set:function(a){this._background=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stationary",{get:function(){return this._stationary},
set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});d.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.resume()};d.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this.processRender(this._renderParameters));
this._renderRequested||this._taskHandle.pause()};d.prototype.setHighlightOptions=function(a){this.painter.setHighlightOptions(a)};d.prototype.renderChildren=function(a){var b=this.context,c=this.children;this.beforeRenderChildren(a);a.drawPhase=t.WGLDrawPhase.MAP;for(var c=a.children?a.children:c,d=c.length,e=0;e<d;e++){var f=c[e];f.attached&&f.processRender(a)}var g=b.getBoundFramebufferObject();b.bindFramebuffer(this._labelsFBO2);e=a.stationary;b.setClearColor(0,0,0,e?0:1);b.clear(b.gl.COLOR_BUFFER_BIT);
if(e)for(a.drawPhase=t.WGLDrawPhase.LABEL_ALPHA,a.labelFBO=this._labelsFBO1,e=0;e<d;e++)f=c[e],f.attached&&f.processRender(a);b.bindFramebuffer(g);a.labelFBO=this._labelsFBO2;a.drawPhase=t.WGLDrawPhase.LABEL;for(e=0;e<d;e++)f=c[e],f.attached&&f.processRender(a);a=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=a;this.afterRenderChildren()};d.prototype.beforeRenderChildren=function(a){var c=this.context,d=a.state,e=a.pixelRatio;if(this.painter){c.enforceState();var f=d.size;a=d.rotation;
var g=Math.round(f[0]*e),f=Math.round(f[1]*e);this._boundFBO=c.getBoundFramebufferObject();this._labelsFBO1&&this._labelsFBO1.width===g&&this._labelsFBO1.height===f||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=n.FramebufferObject.createWithAttachments(c,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:g,height:f},{colorTarget:0,depthStencilTarget:0}),c.bindFramebuffer(this._labelsFBO1),c.setDepthWriteEnabled(!0),
c.setStencilWriteMask(255),c.setClearColor(0,0,0,0),c.setClearDepth(1),c.setClearStencil(0),c.clear(c.gl.COLOR_BUFFER_BIT|c.gl.DEPTH_BUFFER_BIT|c.gl.STENCIL_BUFFER_BIT),c.setDepthWriteEnabled(!1),c.bindFramebuffer(this._boundFBO),this._labelsFBO2=n.FramebufferObject.createWithAttachments(c,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:g,height:f},{colorTarget:0,depthStencilTarget:0}));if(d.spatialReference&&(d.spatialReference._isWrappable?
d.spatialReference._isWrappable():d.spatialReference.isWrappable)){var h=m.common.toRadian(a),k=Math.abs(Math.cos(h)),l=Math.abs(Math.sin(h)),t=Math.round(d.worldScreenWidth);if(Math.round(g*k+f*l)<=t)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===g&&this._clipFBO.height===f||(this._clipFBO=new n.FramebufferObject(c,{colorTarget:0,depthStencilTarget:3,width:g,height:f}));var r=.5*g,u=.5*f,d=1/g,y=1/f,e=.5*t*e,x=.5*(g*l+f*k),g=this._upperLeft,k=this._upperRight,l=this._lowerLeft,t=this._lowerRight;
p.vec2.set(g,-e,-x);p.vec2.set(k,e,-x);p.vec2.set(l,-e,x);p.vec2.set(t,e,x);b.mat2d.identity(this._mat2);b.mat2d.translate(this._mat2,this._mat2,[r,u]);0!==a&&b.mat2d.rotate(this._mat2,this._mat2,h);p.vec2.transformMat2d(g,g,this._mat2);p.vec2.transformMat2d(k,k,this._mat2);p.vec2.transformMat2d(l,l,this._mat2);p.vec2.transformMat2d(t,t,this._mat2);a=this._clipData;a.set([2*l[0]*d-1,2*(f-l[1])*y-1,2*t[0]*d-1,2*(f-t[1])*y-1,2*g[0]*d-1,2*(f-g[1])*y-1,2*k[0]*d-1,2*(f-k[1])*y-1]);this._clipRendererInitialized||
this._initializeClipRenderer(c);this._clipVBO.setData(a);this._boundFBO=c.getBoundFramebufferObject();c.bindFramebuffer(this._clipFBO);c.setDepthWriteEnabled(!0);c.setStencilWriteMask(255);c.setClearColor(0,0,0,0);c.setClearDepth(1);c.setClearStencil(0);c.clear(c.gl.COLOR_BUFFER_BIT|c.gl.DEPTH_BUFFER_BIT|c.gl.STENCIL_BUFFER_BIT);c.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};d.prototype.afterRenderChildren=function(){var a=this.context;a.logIno();this._clipFrame&&this._clipRendererInitialized&&
(a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,
9728,1),a.setStencilTestEnabled(!1))};d.prototype.doRender=function(b){var c=this.context,d=b.state,e=b.pixelRatio;this._resizeCanvas(b);this.context.enforceState();c.setViewport(0,0,e*d.size[0],e*d.size[1]);c.setDepthWriteEnabled(!0);c.setStencilWriteMask(255);this.background&&this.background.color?(d=this.background.color,c.setClearColor(d.r/255,d.g/255,d.b/255,d.a)):c.setClearColor(0,0,0,0);c.setClearDepth(1);c.setClearStencil(0);c.clear(c.gl.COLOR_BUFFER_BIT|c.gl.DEPTH_BUFFER_BIT|c.gl.STENCIL_BUFFER_BIT);
c.setDepthWriteEnabled(!1);a.prototype.doRender.call(this,b)};d.prototype.takeScreenshot=function(a,b){var d=A.screenshotSuperSampleSettings(a,this._supersampleScreenshots),e=d.framebufferWidth,f=d.framebufferHeight,g=this.context,h=a.layers,k={drawPhase:null,globalOpacity:1,stationary:!0,state:this._renderParameters.state.clone(),pixelRatio:d.pixelRatio};if(null!=a.rotation){var m=k.state.viewpoint;m.rotation=a.rotation;k.state.viewpoint=m}0<h.length&&(k.children=[],h.forEach(function(a){var c=b.find(function(b){return b.layer.id===
a.id});c&&c.container&&c.attached&&k.children.push(c.container)}));var l=n.FramebufferObject.create(g,{colorTarget:0,depthStencilTarget:3,width:e,height:f}),h=g.getBoundFramebufferObject(),m=g.getViewport();g.bindFramebuffer(l);g.setViewport(0,0,e,f);e=g.gl;g.setClearColor(0,0,0,0);g.setClearDepth(1);g.setClearStencil(0);g.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);this.renderChildren(k);d=this._readbackScreenshot(d);g.bindFramebuffer(h);g.setViewport(m.x,m.y,m.width,m.height);
this.requestRender();g=this._ensureScreenshotEncodeCanvas();a=A.encodeResult(d,a,g,{flipY:!0,premultipliedAlpha:!0});return c.resolve(a)};d.prototype._ensureScreenshotEncodeCanvas=function(){this._screenshotEncodeCanvas||(this._screenshotEncodeCanvas=document.createElement("canvas"));return this._screenshotEncodeCanvas};d.prototype._readbackScreenshot=function(a){var b=a.framebufferWidth,c=a.framebufferHeight,d=a.region;a=a.resample;var e=this.context.gl;if(a){var f=A.createEmptyImageData(b,c,this._ensureScreenshotEncodeCanvas());
e.readPixels(0,0,b,c,6408,5121,new Uint8Array(f.data.buffer));b=A.createEmptyImageData(d.width,d.height,this._ensureScreenshotEncodeCanvas());return A.resampleHermite(f,b,!0,a.region.x,c-(a.region.y+a.region.height),a.region.width,a.region.height)}f=A.createEmptyImageData(d.width,d.height,this._ensureScreenshotEncodeCanvas());e.readPixels(d.x,c-(d.y+d.height),d.width,d.height,6408,5121,new Uint8Array(f.data.buffer));return f};d.prototype._resizeCanvas=function(a){var b=this._canvas,c=b.style,d=a.state.size,
e=a.pixelRatio;a=d[0];var d=d[1],f=Math.round(a*e),e=Math.round(d*e);if(b.width!==f||b.height!==e)b.width=f,b.height=e;c.width=a+"px";c.height=d+"px"};d.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new w.BitBlitRenderer;var b=x.stencil.attributes,c=n.createProgram(a,x.stencil);if(!c)return!1;var d=n.BufferObject.createVertex(a,35040,32),e=new Uint16Array([0,1,2,2,1,3]),e=n.BufferObject.createIndex(a,35044,e);a=new n.VertexArrayObject(a,
b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:d},e);this._clipStencilProgram=c;this._clipVBO=d;this._clipVAO=a;return this._clipRendererInitialized=!0};return d}(r.Container);a.Stage=d})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define(["require","exports","../../../webgl","./shaders/BitBlitPrograms"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._initialized=!1}a.prototype.dispose=
function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};a.prototype.render=function(a,c,d,g){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),c.setSamplingMode(d),a.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",g),a.drawArrays(5,0,4),a.bindVAO())};a.prototype._initialize=
function(a){if(this._initialized)return!0;var c=g.bitBlit.attributes,d=l.createProgram(a,g.bitBlit);if(!d)return!1;var e=new Int8Array(16);e[0]=-1;e[1]=-1;e[2]=0;e[3]=0;e[4]=1;e[5]=-1;e[6]=1;e[7]=0;e[8]=-1;e[9]=1;e[10]=0;e[11]=1;e[12]=1;e[13]=1;e[14]=1;e[15]=1;a=new l.VertexArrayObject(a,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:l.BufferObject.createVertex(a,35044,e)});
this._program=d;this._vertexArrayObject=a;return this._initialized=!0};return a}();a.BitBlitRenderer=d})},"esri/views/2d/engine/webgl/shaders/BitBlitPrograms":function(){define(["require","exports","./sources/resolver"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.bitBlit={name:"bitBlit",shaders:{vertexShader:l.resolveIncludes("bitBlit/bitBlit.vert"),fragmentShader:l.resolveIncludes("bitBlit/bitBlit.frag")},attributes:{a_pos:0,a_tex:1}}})},"esri/views/2d/engine/webgl/shaders/sources/resolver":function(){define(["require",
"exports","../../../../../webgl","./shaderRepository"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});var k=new l.ShaderCompiler(function(a){var c=g;a.split("/").forEach(function(a){c&&(c=c[a])});return c});a.resolveIncludes=function(a){return k.resolveIncludes(a)}})},"esri/views/2d/engine/webgl/shaders/sources/shaderRepository":function(){define(["require","exports"],function(d,a){return{background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\n  gl_FragColor \x3d u_color;\n}",
"background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\n  vec3 v_pos \x3d u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\n  gl_Position \x3d vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\n  lowp vec4 color \x3d texture2D(u_tex, v_uv);\n  gl_FragColor \x3d color *  u_opacity;\n}","bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n  v_uv \x3d a_tex;\n}"},
highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump vec4 u_sigmas;\nuniform sampler2D u_texture;\nmediump vec4 gauss4(mediump vec2 dir) {\n  return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\n}\nmediump float gauss1(mediump vec2 dir) {\n  return exp(-dot(dir, dir) / (2.0 * u_sigmas[3] * u_sigmas[3]));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\n  return u_channelSelector * sample;\n}\nvoid accumGauss4(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\n  mediump vec4 w \x3d gauss4(i * u_direction.xy);\n  tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\n  weight +\x3d w;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\n  mediump float w \x3d gauss1(i * u_direction.xy);\n  tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\n  weight +\x3d w;\n}\nvoid main(void) {\n  mediump float tot \x3d 0.0;\n  mediump float weight \x3d 0.0;\n  accumGauss1(-4.0, tot, weight);\n  accumGauss1(-3.0, tot, weight);\n  accumGauss1(-2.0, tot, weight);\n  accumGauss1(-1.0, tot, weight);\n  accumGauss1(0.0, tot, weight);\n  accumGauss1(1.0, tot, weight);\n  accumGauss1(2.0, tot, weight);\n  accumGauss1(3.0, tot, weight);\n  accumGauss1(4.0, tot, weight);\n  gl_FragColor \x3d vec4(0.0, 0.0, 0.0, tot / weight);\n}",
"highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump vec4 u_sigmas;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\n  mediump float sigma \x3d u_sigmas[3];\n  mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\n  const mediump float y0 \x3d 0.5;\n  mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);\n  mediump float d \x3d (y - y0) / m0;\n  return d;\n}\nmediump vec4 shade(mediump float d) {\n  mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\n  mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\n  return texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\n  mediump float d \x3d estimateDistance();\n  gl_FragColor \x3d shade(d);\n}",
"textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\n  gl_Position \x3d vec4(a_position, 0.0, 1.0);\n  v_texcoord \x3d a_texcoord;\n}"},magnifier:{"magnifier.frag":"uniform lowp vec4 u_background;\nuniform mediump sampler2D u_readbackTexture;\nuniform mediump sampler2D u_maskTexture;\nuniform mediump sampler2D u_overlyTexture;\nvarying mediump vec2 v_texCoord;\nvoid main(void)\n{\n  lowp vec4 color \x3d texture2D(u_readbackTexture, v_texCoord);\n  color \x3d color + (1.0 - color.a) * u_background;\n  lowp vec4 mask_color \x3d texture2D(u_maskTexture, v_texCoord);\n  lowp float gray \x3d 1.0 - dot(mask_color, vec4(0.3, 0.59, 0.11, 0));\n  color *\x3d gray;\n  lowp vec4 overley_color \x3d texture2D(u_overlyTexture, v_texCoord);\n  overley_color.rgb *\x3d overley_color.a;\n  gl_FragColor \x3d overley_color + (1.0 - overley_color.a) * color;\n}",
"magnifier.vert":"precision mediump float;\nattribute mediump vec2 a_pos;\nuniform mediump vec2 u_drawPos;\nuniform mediump float u_width;\nuniform mediump float u_height;\nvarying mediump vec2 v_texCoord;\nvoid main(void)\n{\n  v_texCoord \x3d a_pos;\n  vec2 coord \x3d u_drawPos + vec2(a_pos - 0.5) * vec2(u_width, u_height);\n  gl_Position \x3d vec4(coord, 0.0, 1.0);\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D u_attributeData0;\nuniform highp sampler2D u_attributeData1;\nuniform highp sampler2D u_attributeData2;\nuniform int u_attributeTextureSize;\nvec2 getAttributeDataCoords(in highp vec4 id) {\n  float size \x3d float(u_attributeTextureSize);\n  highp float u32 \x3d float(int(id.r) + int(id.g) * 256 + int(id.b) * 256 * 256 + int(id.a) * 256 * 256 * 256);\n  highp float col \x3d mod(u32, size);\n  highp float row \x3d (u32 - col) / size;\n  highp float u \x3d col / size;\n  highp float v \x3d row / size;\n  return vec2(u, v);\n}\nvec4 getAttributeData0(in vec4 id) {\n  vec2 coords \x3d getAttributeDataCoords(id);\n  return texture2D(u_attributeData0, coords);\n}\nvec4 getAttributeData1(in vec4 id) {\n  vec2 coords \x3d getAttributeDataCoords(id);\n  return texture2D(u_attributeData1, coords);\n}\nvec4 getAttributeData2(in vec4 id) {\n  vec2 coords \x3d getAttributeDataCoords(id);\n  return texture2D(u_attributeData2, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\n  bool isMagic \x3d v.x \x3d\x3d 255.0 \x26\x26 v.y \x3d\x3d 255.0;\n  if (isMagic) {\n    return NAN_MAGIC_NUMBER;\n  }\n  return (v.x + v.y * float(0x100)) - 32768.0;\n}",
"constants.glsl":"const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float SIGNED_BYTE_TO_UNSIGNED \x3d 128.0;\nconst float SOFT_EDGE_RATIO \x3d 1.0;\nconst float THIN_LINE_WIDTH_FACTOR \x3d 1.1;\nconst float THIN_LINE_HALF_WIDTH \x3d 1.0;\nconst float OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float OUTLINE_SCALE \x3d 1.0 / 5.0;\nconst float SDF_FONT_SIZE \x3d 24.0;\nconst float MAX_SDF_DISTANCE \x3d 8.0;\nconst float PLACEMENT_PADDING \x3d 8.0;\nconst float EPSILON \x3d 0.0000001;\nconst int MAX_FILTER_COUNT \x3d 2;\nconst int ATTR_DATA_FILTER \x3d 0;\nconst int ATTR_DATA_VV \x3d 1;\nconst int ATTR_DATA_DD0 \x3d 1;\nconst int ATTR_DATA_DD1 \x3d 2;\nconst int ATTR_VV_SIZE \x3d 0;\nconst int ATTR_VV_COLOR \x3d 1;\nconst int ATTR_VV_OPACITY \x3d 2;\nconst int ATTR_VV_ROTATION \x3d 3;\nconst highp float NAN_MAGIC_NUMBER \x3d 1e-30;",
"effects.glsl":"uniform mat4 u_insideEffectMat4[ MAX_FILTER_COUNT ];\nuniform mat4 u_outsideEffectMat4[ MAX_FILTER_COUNT ];\nuniform float u_insideOpacities[ MAX_FILTER_COUNT ];\nuniform float u_outsideOpacities[ MAX_FILTER_COUNT ];\nvec4 getEffectColor(in vec4 color, in float filterFlags) {\n  vec4 rgbw \x3d vec4(color.a \x3e 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\n  float a \x3d color.a;\n  for (int i \x3d 1; i \x3c EFFECT_COUNT + 1; i++) {\n    float bit \x3d getBit(filterFlags, i);\n    rgbw \x3d u_insideEffectMat4[ i ] * (bit  * rgbw) + u_outsideEffectMat4[ i ] * ((1.0 - bit) * rgbw);\n    a    \x3d u_insideOpacities[ i ]  * (bit  * a)    + u_outsideOpacities[ i ]  * ((1.0 - bit) * a);\n  }\n  return vec4(rgbw.rgb * a, a);\n}\nvec3 applyFilter(inout vec4 color, inout vec3 pos, in float filterFlags) {\n  vec4 rgbw \x3d vec4(color.a \x3e 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\n  float a \x3d color.a;\n  for (int i \x3d 0; i \x3c EFFECT_COUNT + 1; i++) {\n    float bit \x3d getBit(filterFlags, i);\n    rgbw \x3d u_insideEffectMat4[ i ] * (bit  * rgbw) + u_outsideEffectMat4[ i ] * ((1.0 - bit) * rgbw);\n    a    \x3d u_insideOpacities[ i ]  * (bit  * a)    + u_outsideOpacities[ i ]  * ((1.0 - bit) * a);\n  }\n  color.rgb \x3d rgbw.rgb * a;\n  color.a \x3d a;\n  pos.z +\x3d 2.0 * (1.0 - getBit(filterFlags, 0));\n  return pos;\n}\nvec3 applyFilterLabels(inout vec4 color, inout vec3 pos, in float filterFlags) {\n  float bit \x3d getBit(filterFlags, 0);\n  pos.z +\x3d 2.0 * (1.0 - bit);\n#ifndef OUTSIDE_LABELS_VISIBLE\n  for (int i \x3d 1; i \x3c EFFECT_COUNT + 1; i++) {\n    float bit \x3d getBit(filterFlags, i);\n    pos.z +\x3d 2.0 * (1.0 - bit);\n  }\n#endif\n  return pos;\n}",
fill:{"common.glsl":"#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\n#endif\n#ifdef DOT_DENSITY\nuniform float u_dotValue;\nuniform float u_tileDotsOverArea;\nuniform vec4 u_isActive[ 2 ];\nuniform float u_dotTextureDotCount;\nuniform float u_tileZoomFactor;\n#endif\nvarying vec3 v_pos;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying highp vec4 v_id;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef DOT_DENSITY\nvarying vec4 v_dotThresholds[ 2 ];\nvarying vec2 v_dotTextureCoords;\n#endif",
"fill.frag":"precision highp float;\n#include \x3cmaterials/constants.glsl\x3e\nvarying highp vec4 v_id;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\nvarying highp vec4 v_dotThresholds[ 2 ];\nvarying vec2 v_dotTextureCoords;\n#endif\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nfloat max4(vec4 target) {\n  return max(max(max(target.x, target.y), target.z), target.w);\n}\nvoid main() {\n#ifdef ID\n  gl_FragColor \x3d v_id;\n#elif defined(PATTERN)\n  mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\n  mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\n  lowp vec4 color \x3d texture2D(u_texture, samplePos);\n  gl_FragColor \x3d v_opacity * v_color * color;\n#elif defined(DOT_DENSITY) \x26\x26 !defined(HIGHLIGHT)\n  vec4 textureThresholds0 \x3d texture2D(u_dotTextures[0], v_dotTextureCoords);\n  vec4 textureThresholds1 \x3d texture2D(u_dotTextures[1], v_dotTextureCoords);\n  vec4 difference0 \x3d v_dotThresholds[0] - textureThresholds0;\n  vec4 difference1 \x3d v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\n  vec4 isPositive0 \x3d step(0.0, difference0);\n  vec4 isPositive1 \x3d step(0.0, difference1);\n  float weightSum \x3d dot(isPositive0, difference0) + dot(isPositive1, difference1);\n  float lessThanEqZero \x3d step(weightSum, 0.0);\n  float greaterThanZero \x3d 1.0 - lessThanEqZero ;\n  float divisor \x3d (weightSum + lessThanEqZero);\n  vec4 weights0 \x3d difference0 * isPositive0 / divisor;\n  vec4 weights1 \x3d difference1 * isPositive1 / divisor;\n  vec4 dotColor \x3d u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\n  gl_FragColor \x3d greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\n  float diffMax \x3d max(max4(difference0), max4(difference1));\n  float lessThanZero \x3d step(diffMax, 0.0);\n  float greaterOrEqZero \x3d 1.0 - lessThanZero;\n  vec4 isMax0 \x3d step(diffMax, difference0);\n  vec4 isMax1 \x3d step(diffMax, difference1);\n  vec4 dotColor \x3d u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\n  gl_FragColor \x3d greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\n#else\n  gl_FragColor \x3d v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\n  gl_FragColor.a \x3d 1.0;\n#endif\n}",
"fill.vert":"precision mediump float;\n#ifdef DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color \x3d vec4(0.0, 0.0, 0.0, 1.0);\nvec4 a_aux3 \x3d vec4(0.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_tlbr;\nattribute vec4 a_aux1;\nattribute vec2 a_aux2;\nattribute vec4 a_aux3;\n#endif\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/fill/common.glsl\x3e\n#ifdef DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\n  return featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\n#ifdef PATTERN\nmat3 getPatternMatrix() {\n  mat3 patternMatrix \x3d mat3(1.0);\n  vec2 aux2 \x3d (1.0 / SIGNED_BYTE_TO_UNSIGNED) * a_aux2;\n  patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux1.x * aux2.x);\n  patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux1.y * aux2.y);\n  return patternMatrix;\n}\n#endif\nvoid main()\n{\n  INIT;\n  float a_bitSet \x3d a_aux3.a;\n  v_color   \x3d getColor(a_color, a_bitSet, 0);\n  v_opacity \x3d getOpacity(a_bitSet, 1);\n  v_id      \x3d norm(a_id);\n  v_pos     \x3d u_dvsMat3 * vec3(a_pos, 1.);\n#ifdef PATTERN\n  vec2 symbolOffset \x3d u_zoomFactor * (a_aux1.zw - SIGNED_BYTE_TO_UNSIGNED);\n  v_tileTextureCoord \x3d (getPatternMatrix() * vec3(a_pos + symbolOffset, 1.0)).xy;\n  v_tlbr \x3d a_tlbr / u_mosaicSize.xyxy;\n#elif defined(DOT_DENSITY)\n  vec4 ddAttributeData0 \x3d getAttributeData1(a_id) * u_isActive[0] * a_inverseArea;\n  vec4 ddAttributeData1 \x3d getAttributeData2(a_id) * u_isActive[1] * a_inverseArea;\n  float size \x3d u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\n  v_dotThresholds[0] \x3d dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\n  v_dotThresholds[1] \x3d dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\n  v_dotTextureCoords \x3d (a_pos + 0.5) / size;\n#endif\n  gl_Position \x3d vec4(applyFilter(v_color, v_pos, getFilterFlags()), 1.0);\n}"},
icon:{"common.glsl":"uniform vec2 u_mosaicSize;\nvarying vec3 v_pos;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying highp vec4 v_id;\nvarying vec2 v_tex;\nvarying vec2 v_size;\nvarying float v_filters;\n#ifdef SDF\nvarying float v_isThin;\nvarying float v_overridingOutlineColor;\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\n#endif","icon.frag":"precision mediump float;\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cmaterials/effects.glsl\x3e\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\nuniform lowp sampler2D u_texture;\nvoid main()\n{\n#ifdef SDF\n  lowp vec4 fillPixelColor \x3d v_color;\n  float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\n  float size \x3d max(v_size.x, v_size.y);\n  float dist \x3d d * size * SOFT_EDGE_RATIO * v_distRatio;\n  fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\n  float outlineWidth \x3d v_outlineWidth;\n  #ifdef HIGHLIGHT\n    outlineWidth \x3d max(outlineWidth, 4.0 * v_isThin);\n  #endif\n  if (outlineWidth \x3e 0.25) {\n    lowp vec4 outlinePixelColor \x3d v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\n    float clampedOutlineSize \x3d min(outlineWidth, size);\n    outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\n    gl_FragColor \x3d v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n  }\n  else {\n    gl_FragColor \x3d v_opacity * fillPixelColor;\n  }\n#else\n   lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\n   gl_FragColor \x3d v_opacity * getEffectColor(texColor, v_filters);\n#endif\n#ifdef HIGHLIGHT\n  gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\n#endif\n#ifdef ID\n  if (gl_FragColor.a \x3c 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"precision mediump float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAndBitSet;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/icon/common.glsl\x3e\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float referenceSize, in float bitSet) {\n#ifdef VV_SIZE\n  float r \x3d getSize(baseSize.y) / referenceSize;\n  baseSize.xy *\x3d r;\n  offset.xy *\x3d r;\n  float scaleSymbolProportionally \x3d getBit(bitSet, 3);\n  outlineSize *\x3d scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\n  return baseSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\n  float isMapAligned \x3d getBit(a_bitSet, 0);\n  vec3  offset       \x3d getRotation() * vec3(in_offset, 0.0);\n  return getMatrix(isMapAligned) * offset;\n}\nvoid main()\n{\n  INIT;\n  vec2  a_size   \x3d a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 256.0;\n  vec2  a_offset \x3d a_vertexOffset / 16.0;\n  vec2  a_tex    \x3d a_texAndBitSet.xy;\n  float a_outlineSize \x3d a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 256.0;\n  float a_bitSet \x3d a_texAndBitSet.z;\n  v_color    \x3d getColor(a_color, a_bitSet, 1);\n  v_opacity  \x3d getOpacity(a_bitSet, 1);\n  v_size     \x3d getMarkerSize(a_offset, a_size, a_outlineSize, a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 256.0, a_bitSet);\n  v_id       \x3d norm(a_id);\n  v_filters  \x3d getFilterFlags();\n  v_tex      \x3d a_tex / u_mosaicSize;\n  v_pos      \x3d u_dvsMat3 * vec3(a_pos, 1.0) + getOffset(a_offset, a_bitSet);\n#ifdef SDF\n  v_isThin   \x3d getBit(a_bitSet, 2);\n  #ifdef VV_COLOR\n    v_overridingOutlineColor \x3d v_isThin;\n  #else\n    v_overridingOutlineColor \x3d 0.0;\n  #endif\n  v_outlineWidth \x3d min(a_outlineSize, max(max(v_size.x, v_size.y) - 0.99, 0.0));\n  v_outlineColor \x3d getEffectColor(a_outlineColor, v_filters);\n  v_distRatio \x3d a_texAndBitSet.w / 126.0;\n#endif\n  gl_Position \x3d vec4(applyFilter(v_color, v_pos, v_filters), 1.0);\n}"},
label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nuniform vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\n#ifdef ID\nuniform mediump float u_fadeStep;\nvarying mediump float v_fadeStep;\n#endif","label.frag":"precision mediump float;\n#include \x3cmaterials/label/common.glsl\x3e\nuniform mediump sampler2D u_referenceTex;\nuniform mediump vec2 u_screenSize;\nuniform highp float u_pixelRatio;\nuniform lowp sampler2D u_texture;\nvoid main()\n{\n  mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\n  mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\n#ifdef ID\n  mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\n  gl_FragColor \x3d vec4(alpha);\n#else\n  lowp float fadeAlpha \x3d referenceFragment.a;\n  lowp float dist \x3d texture2D(u_texture, v_tex).a;\n  float glyphEdgeDistance \x3d max(0.75 - v_edgeDistanceOffset, 0.25);\n  lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist);\n  gl_FragColor \x3d fadeAlpha * sdfAlpha * v_color;\n#endif\n}",
"label.vert":"precision mediump float;\nattribute vec4 a_color;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_zoomRangeAndEmpty;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/label/common.glsl\x3e\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\n  float glyphAngle \x3d angle * 360.0 / 254.0;\n  float mapAngle \x3d u_mapRotation * 360.0 / 254.0;\n  float diffAngle \x3d min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\n  float z \x3d 0.0;\n  z +\x3d 2.0 * (1.0 - step(minZoom, u_zoomLevel));\n  z +\x3d 2.0 * (1.0 - step(u_zoomLevel, maxZoom));\n  z +\x3d 2.0 * u_mapAligned * step(90.0, diffAngle);\n  return z;\n}\nvoid main()\n{\n  INIT;\n  float groupMinZoom    \x3d getMinZoom();\n  float glyphMinZoom    \x3d a_zoomRangeAndEmpty.x;\n  float a_minZoom       \x3d max(groupMinZoom, glyphMinZoom);\n  float a_maxZoom       \x3d a_zoomRangeAndEmpty.y;\n  vec2  a_placementDir  \x3d a_refSymbolAndPlacementOffset.zw - 1.0;\n  float a_refSymbolSize \x3d a_refSymbolAndPlacementOffset.y;\n  float fontSize        \x3d a_texAndSize.z;\n  float isHalo          \x3d mod(a_pos, 2.0).x;\n  vec2  vertexOffset \x3d a_vertexOffset * OFFSET_PRECISION;\n  vec3  pos          \x3d vec3(floor(a_pos * 0.5), 1.0);\n  float z            \x3d getZ(a_minZoom, a_maxZoom, a_refSymbolAndPlacementOffset.x);\n  float fontScale    \x3d fontSize / SDF_FONT_SIZE;\n  float halfSize     \x3d getSize(a_refSymbolSize) / 2.0;\n  v_color \x3d a_color;\n  v_tex   \x3d a_texAndSize.xy / u_mosaicSize;\n#ifdef ID\n  v_fadeStep \x3d u_fadeStep;\n#endif\n  v_edgeDistanceOffset \x3d isHalo * OUTLINE_SCALE * a_texAndSize.w / fontScale / MAX_SDF_DISTANCE;\n  v_antialiasingWidth  \x3d 0.106 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n  vec2 placementOffset \x3d a_placementDir * (halfSize + PLACEMENT_PADDING);\n  vec3 glyphOffset     \x3d u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\n  vec3 v_pos           \x3d vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\n  gl_Position \x3d vec4(applyFilterLabels(v_color, v_pos, getFilterFlags()), 1.0);\n#ifdef DEBUG\n  v_color \x3d vec4(a_color.rgb, z \x3d\x3d 0.0 ? 1.0 : 0.645);\n#endif\n}"},
line:{"common.glsl":"varying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying highp vec4 v_id;\nvarying vec3 v_pos;\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif","line.frag":"precision lowp float;\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/line/common.glsl\x3e\nuniform lowp float u_blur;\nuniform mediump float u_zoomFactor;\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\n#endif\n#ifdef SDF\nconst float sdfPatternHalfWidth \x3d 15.5;\nconst float widthFactor \x3d 2.0;\n#endif\nvoid main()\n{\n  mediump float thinLineFactor \x3d max(THIN_LINE_WIDTH_FACTOR * step(v_lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\n  mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\n  lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\n#if defined(SDF) \x26\x26 !defined(HIGHLIGHT)\n  mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\n  mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\n  mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\n  mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\n  mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\n  mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\n  float dist \x3d d * lineHalfWidth;\n  lowp vec4 fillPixelColor \x3d v_opacity * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n  gl_FragColor \x3d fillPixelColor;\n#elif defined(PATTERN) \x26\x26 !defined(HIGHLIGHT)\n  mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\n  mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\n  mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\n  lowp vec4 color \x3d texture2D(u_texture, texCoord);\n  gl_FragColor \x3d v_opacity * alpha * v_color * color;\n#else\n  gl_FragColor \x3d v_opacity * alpha * v_color;\n#endif\n#ifdef HIGHLIGHT\n  gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\n#endif\n#ifdef ID\n  if (gl_FragColor.a \x3c 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/line/common.glsl\x3e\nconst float SCALE \x3d 1.0 / 31.0;\nfloat getBaseLineHalfWidth(in float in_lineHalfWidth) {\n#ifdef VV_SIZE\n  float referenceHalfWidth \x3d a_aux.x * SCALE;\n  float lineWidth \x3d 2.0 * in_lineHalfWidth;\n  return 0.5 * (in_lineHalfWidth / referenceHalfWidth) * getSize(lineWidth);\n#else\n  return in_lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\n  float halfWidth \x3d max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\n  halfWidth \x3d max(halfWidth, 2.0);\n#endif\n  return halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\n  float thinLineFactor \x3d max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\n#if defined(SDF) \x26\x26 !defined(HIGHLIGHT)\n  thinLineFactor *\x3d 2.0;\n#endif\n  return thinLineFactor * halfWidth * offset * SCALE;\n}\nvoid main()\n{\n  INIT;\n  float a_bitSet          \x3d a_segmentDirection.w;\n  float a_accumulatedDist \x3d a_accumulatedDistanceAndHalfWidth.x;\n  float a_lineHalfWidth   \x3d a_accumulatedDistanceAndHalfWidth.y * SCALE;\n  float aa                \x3d 0.5 * u_antialiasing;\n  vec2  a_offset          \x3d a_offsetAndNormal.xy;\n  float baseWidth \x3d getBaseLineHalfWidth(a_lineHalfWidth);\n  float halfWidth \x3d getLineHalfWidth(baseWidth, aa);\n  float z         \x3d 2.0 * step(baseWidth, 0.0);\n  vec2  dist      \x3d getDist(a_offset, halfWidth);\n  vec3  offset    \x3d u_displayViewMat3 * vec3(dist, 0.0);\n  vec3  pos       \x3d u_dvsMat3 * vec3(a_pos.xy, 1.0) + offset;\n  v_color         \x3d getColor(a_color, a_bitSet, 0);\n  v_opacity       \x3d getOpacity(a_bitSet, 0);\n  v_lineHalfWidth \x3d halfWidth;\n  v_id            \x3d norm(a_id);\n  v_normal        \x3d a_offsetAndNormal.zw * SCALE;\n  v_pos           \x3d vec3(pos.xy, z);\n#ifdef PATTERN\n  v_tlbr          \x3d a_tlbr / u_mosaicSize.xyxy;\n  v_patternSize   \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\n#endif\n#if defined(PATTERN) || defined(SDF)\n  v_accumulatedDistance \x3d a_accumulatedDist + dot(SCALE * a_segmentDirection.xy, dist / u_zoomFactor);\n#endif\n  gl_Position \x3d vec4(applyFilter(v_color, v_pos, getFilterFlags()), 1.0);\n}"},
text:{"common.glsl":"uniform vec2 u_mosaicSize;\nvarying highp vec4 v_id;\nvarying vec3 v_pos;\nvarying vec4 v_color;\nvarying vec2 v_tex;\nvarying float v_opacity;\nvarying float v_antialiasingWidth;\nvarying float v_edgeDistanceOffset;\nvarying lowp float v_transparency;","text.frag":"precision mediump float;\n#include \x3cmaterials/text/common.glsl\x3e\nuniform lowp sampler2D u_texture;\nvoid main()\n{\n  lowp float dist \x3d texture2D(u_texture, v_tex).a;\n  float glyphEdgeDistance \x3d max(0.75 - v_edgeDistanceOffset, 0.25);\n  #ifdef HIGHLIGHT\n    glyphEdgeDistance /\x3d 2.0;\n  #endif\n  lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_opacity;\n  gl_FragColor \x3d alpha * v_color;\n#ifdef ID\n  if (gl_FragColor.a \x3c 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"precision mediump float;\n#include \x3cmaterials/vcommon.glsl\x3e\n#include \x3cmaterials/text/common.glsl\x3e\nattribute vec4 a_color;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nvoid main()\n{\n  INIT;\n  float a_bitSet    \x3d a_aux.w;\n  float a_fontSize  \x3d a_texFontSize.z;\n  vec2  a_offset    \x3d a_vertexOffset * OFFSET_PRECISION;\n  float a_isHalo    \x3d getBit(a_pos.x, 0);\n  vec3  in_pos      \x3d vec3(floor(a_pos * 0.5), 1.0);\n  float fontSize    \x3d getSize(a_fontSize);\n  float scaleFactor \x3d fontSize / a_fontSize;\n  float fontScale   \x3d fontSize / SDF_FONT_SIZE;\n  vec3  offset      \x3d getRotation() * vec3(scaleFactor * a_offset, 0.0);\n  v_color   \x3d a_isHalo * a_color + (1.0 - a_isHalo) * getColor(a_color, a_bitSet, 0);\n  v_opacity \x3d getOpacity(a_bitSet, 0);\n  v_id      \x3d norm(a_id);\n  v_tex     \x3d a_texFontSize.xy / u_mosaicSize;\n  v_pos     \x3d u_dvsMat3 * in_pos + u_displayMat3 * offset;\n  v_edgeDistanceOffset \x3d a_isHalo * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\n  v_antialiasingWidth  \x3d 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n  gl_Position \x3d  vec4(applyFilter(v_color, v_pos, getFilterFlags()), 1.0);\n}"},
"utils.glsl":"float rshift(in float u32, in int amount) {\n  return floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\n  float offset \x3d pow(2.0, float(bitIndex));\n  return mod(floor(bitset / offset), 2.0);\n}\nvec4 unpack(in float u32) {\n  float r \x3d mod(rshift(u32, 0), 255.0);\n  float g \x3d mod(rshift(u32, 8), 255.0);\n  float b \x3d mod(rshift(u32, 16), 255.0);\n  float a \x3d mod(rshift(u32, 24), 255.0);\n  return vec4(r, g, b, a);\n}\nvec4 norm(in vec4 v) {\n  return v /\x3d 255.0;\n}",
"vcommon.glsl":"#include \x3cmaterials/constants.glsl\x3e\n#include \x3cmaterials/utils.glsl\x3e\n#include \x3cmaterials/attributeData.glsl\x3e\n#include \x3cmaterials/vv.glsl\x3e\n#include \x3cmaterials/effects.glsl\x3e\nattribute vec2 a_pos;\nattribute highp vec4 a_id;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform highp float u_pixelRatio;\nuniform mediump float u_zoomFactor;\nuniform mediump float u_antialiasing;\nvec4 VV_ADATA \x3d vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target, int index) {\n#ifdef OES_TEXTURE_FLOAT\n  target.rgba \x3d getAttributeData1(a_id);\n#else\n  vec4 data0 \x3d getAttributeData1(a_id);\n  vec4 data1 \x3d getAttributeData2(a_id);\n  target.r \x3d u88VVToFloat(data0.rg * 255.0);\n  target.g \x3d u88VVToFloat(data0.ba * 255.0);\n  target.b \x3d u88VVToFloat(data1.rg * 255.0);\n  target.a \x3d u88VVToFloat(data1.ba * 255.0);\n#endif\n}\n#ifdef VV\n  #define INIT loadVisualVariableData(VV_ADATA, ATTR_DATA_VV)\n#else\n  #define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\n  float isColorLocked   \x3d getBit(a_bitSet, index);\n  return getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\n  return a_color;\n#endif\n}\nfloat getOpacity(in float a_bitSet, in int index) {\n#ifdef VV_OPACITY\n  float isOpacityLocked \x3d getBit(a_bitSet, index);\n  return getVVOpacity(VV_ADATA[ATTR_VV_OPACITY], isOpacityLocked);\n#else\n  return 1.0;\n#endif\n}\nfloat getSize(in float in_size) {\n#ifdef VV_SIZE\n  return getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE]);\n#else\n  return in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\n  return getVVRotationMat3(VV_ADATA[ATTR_VV_ROTATION]);\n#else\n  return mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n  return getAttributeData0(a_id).x * 255.0;\n}\nfloat getMinZoom() {\n  vec4 data0 \x3d getAttributeData0(a_id) * 255.0;\n  return data0.g;\n}\nmat3 getMatrix(float isMapAligned) {\n  return isMapAligned * u_displayViewMat3 + (1.0 - isMapAligned) * u_displayMat3;\n}",
"vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n  #define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n  #define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float u_vvColorValues[8];\nuniform vec4 u_vvColors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 u_vvSizeMinMaxValue;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float u_vvSizeScaleStopsValue;\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float u_vvSizeFieldStopsValues[6];\nuniform float u_vvSizeFieldStopsSizes[6];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float u_vvSizeUnitValueWorldToPixelsRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float u_vvOpacityValues[8];\nuniform float u_vvOpacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float u_vvRotationType;\n#endif\nbool isNan(float val) {\n  return (val \x3d\x3d NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\n  if (isNan(sizeValue)) {\n    return fallback;\n  }\n  float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\n  interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\n  return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N \x3d 6;\nfloat getVVStopsSize(float sizeValue, float fallback) {\n  if (isNan(sizeValue)) {\n    return fallback;\n  }\n  if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\n    return u_vvSizeFieldStopsSizes[0];\n  }\n  for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\n    if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\n      float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\n      return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n    }\n  }\n  return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\n  if (isNan(sizeValue)) {\n    return fallback;\n  }\n  return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N \x3d 8;\nfloat getVVOpacity(float opacityValue, float isOpacityLocked) {\n  if (isNan(opacityValue) || isOpacityLocked \x3d\x3d 1.0) {\n    return 1.0;\n  }\n  if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\n    return u_vvOpacities[0];\n  }\n  for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n    if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\n      float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\n      return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n    }\n  }\n  return u_vvOpacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\n  if (isNan(rotationValue)) {\n    return mat4(1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1);\n  }\n  float rotation \x3d rotationValue;\n  if (u_vvRotationType \x3d\x3d 1.0) {\n    rotation \x3d 90.0 - rotation;\n  }\n  float angle \x3d C_DEG_TO_RAD * rotation;\n  float sinA \x3d sin(angle);\n  float cosA \x3d cos(angle);\n  return mat4(cosA, sinA, 0, 0,\n              -sinA,  cosA, 0, 0,\n              0,     0, 1, 0,\n              0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\n  if (isNan(rotationValue)) {\n    return mat3(1, 0, 0,\n                0, 1, 0,\n                0, 0, 1);\n  }\n  float rotation \x3d rotationValue;\n  if (u_vvRotationType \x3d\x3d 1.0) {\n    rotation \x3d 90.0 - rotation;\n  }\n  float angle \x3d C_DEG_TO_RAD * -rotation;\n  float sinA \x3d sin(angle);\n  float cosA \x3d cos(angle);\n  return mat3(cosA, -sinA, 0,\n             sinA, cosA, 0,\n              0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N \x3d 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\n  if (isNan(colorValue) || isColorLocked \x3d\x3d 1.0) {\n    return fallback;\n  }\n  if (colorValue \x3c\x3d u_vvColorValues[0]) {\n    return u_vvColors[0];\n  }\n  for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n    if (u_vvColorValues[i] \x3e\x3d colorValue) {\n      float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\n      return mix(u_vvColors[i-1], u_vvColors[i], f);\n    }\n  }\n  return u_vvColors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\n  return getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\n  return u_vvSizeScaleStopsValue;\n#elif defined(VV_SIZE_FIELD_STOPS)\n  return getVVStopsSize(vvSize, size);\n#elif defined(VV_SIZE_UNIT_VALUE)\n  return getVVUnitValue(vvSize, size);\n#else\n  return size;\n#endif\n}"},
raster:{"solid.frag":"precision mediump float;\nvoid main(void) {\n  gl_FragColor \x3d vec4(1.0, 0.0, 0.0, 1.0);\n}","texture.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform float u_opacity;\nvoid main(void) {\n  vec4 color \x3d texture2D(u_texture, v_texcoord);\n  color.a *\x3d u_opacity;\n  gl_FragColor \x3d vec4(color.rgb * color.a, color.a);\n}","transform.vert":"precision mediump float;\nattribute vec2 a_position;\nuniform highp mat4 u_transform;\nvarying highp vec2 v_texcoord;\nvoid main(void) {\n  gl_Position \x3d u_transform * vec4((2.0 * a_position - 1.0), 0.0, 1.0);\n  v_texcoord \x3d a_position;\n}"},
stencil:{"stencil.frag":"void main() {\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nvoid main() {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\n  gl_FragColor \x3d 0.75 * color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump float u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\n  mediump vec2 offset \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\n  vec3 v_pos \x3d u_dvsMat3 * vec3(offset, 1.0);\n  gl_Position \x3d vec4(v_pos.xy, 0.0, 1.0);\n  v_tex \x3d a_pos;\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n    255.0 / (256.0),\n    255.0 / (256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n  );\nfloat rgba2float(vec4 rgba) {\n  return dot(rgba, rgba2float_factors);\n}"}}})},"esri/views/2d/engine/webgl/Painter":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f32 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../webgl ./BitBlitRenderer ./enums ./MaterialManager ./TextureManager ./Utils ./VertexStream ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./shaders/RasterPrograms".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._initialized=!1}a.prototype.registerPass=function(a,b){this._initialize();for(var c=0;c<f.WGLDrawPhase.NUM_DRAW_PHASES-2;c++){var d=1<<c;d&b&&this._passMap.set(d,a)}return this};a.prototype.getPaintPassTs=function(a){this._initialize();return this._passMap.has(a)?[this._passMap.get(a)]:[]};a.prototype._initialize=function(){this._initialized||(this._passMap=new Map,
this._initialized=!0)};return a}();a.PainterOptions=d;var E=new Uint8Array(4*n.C_HITTEST_SEARCH_SIZE*n.C_HITTEST_SEARCH_SIZE),F=new Uint32Array(E.buffer),H=h.vec3f32.create(),G=[0,0];h=function(){function a(a){this.context=a;this._hlPainter=new D.default;this._blitRenderer=new b.BitBlitRenderer;this._boundFBO=this._globalOpacityFBO=null;this.textureManager=new u;this.stencilRef=-1;this.materialManager=new p(a);this._quadVertexStream=new r(a,[0,0,1,0,0,1,1,1]);this._transformTextureProgram=m.createProgram(a,
B.transformTexture);this._transformSolidProgram=m.createProgram(a,B.transformSolid);this._transform=e.mat4f32.create()}a.prototype.dispose=function(){this.materialManager.dispose();this.textureManager.dispose();this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._globalOpacityFBO&&(this._globalOpacityFBO.dispose(),this._globalOpacityFBO=null);this._boundFBO=null;this._hittestFBO&&(this._hittestFBO.dispose(),
this._hittestFBO=null);this._passes&&(this._passes.forEach(function(a){return a.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(a){return a.forEach(function(a){return a.dispose()})}),this._brushes.clear());this._geometryBrushes&&(this._geometryBrushes.forEach(function(a){return a.dispose()}),this._geometryBrushes.clear());this._quadVertexStream.dispose()};a.prototype.getBrushes=function(a){if(a===f.WGLDrawPhase.MAP)throw Error("Painter: Tried to get brush for the MAP phase; use a specific geometry type and call getMapBrush() instead.");
if(!this._brushes){var b=[this.getGeometryBrush(f.WGLGeometryType.FILL),this.getGeometryBrush(f.WGLGeometryType.LINE),this.getGeometryBrush(f.WGLGeometryType.MARKER),this.getGeometryBrush(f.WGLGeometryType.TEXT)],c=new x.default,d=new w.default,e=new t.default;this._brushes=new Map;this._brushes.set(f.WGLDrawPhase.LABEL,[c]);this._brushes.set(f.WGLDrawPhase.LABEL_ALPHA,[c]);this._brushes.set(f.WGLDrawPhase.HITTEST,b);this._brushes.set(f.WGLDrawPhase.HIGHLIGHT,b);this._brushes.set(f.WGLDrawPhase.CLIP,
[e]);this._brushes.set(f.WGLDrawPhase.DEBUG,[d])}if(!this._brushes.has(a))throw Error("Painter: Tried to get brush for unknown phase: "+a);return this._brushes.get(a)};a.prototype.getGeometryBrush=function(a){if(!this._geometryBrushes){var b=new y.default,c=new A.default,d=new z.default,e=new C.default,g=new x.default;this._geometryBrushes=new Map;this._geometryBrushes.set(f.WGLGeometryType.FILL,b);this._geometryBrushes.set(f.WGLGeometryType.LINE,c);this._geometryBrushes.set(f.WGLGeometryType.MARKER,
d);this._geometryBrushes.set(f.WGLGeometryType.TEXT,e);this._geometryBrushes.set(f.WGLGeometryType.LABEL,g)}return this._geometryBrushes.get(a)};a.prototype.draw=function(a,b,c,d){this._setGlobalOpacity(a,c);0===(c&(f.WGLDrawPhase.LABEL_ALPHA|f.WGLDrawPhase.LABEL))&&this._drawClippingRects(a,b);var e=this.context;e.setBlendingEnabled(!0);e.setStencilWriteMask(0);e.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,b,c,d);this._applyGlobalOpacity(a,c);this._debugTiles(a,b)};a.prototype.highlight=
function(a,b){var c=this.context,d=c.getViewport();this._hlPainter.setup(c,d.width,d.height);this._hlPainter.startMaskDraw(c);this._drawClippingRects(a,b);c.setBlendingEnabled(!0);c.setStencilWriteMask(0);c.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,b,f.WGLDrawPhase.HIGHLIGHT);this._hlPainter.draw(c)};a.prototype.setHighlightOptions=function(a){this._hlPainter.setHighlightOptions(a)};a.prototype.hitTest=function(a,b){var c=this.context,d=n.C_HITTEST_SEARCH_SIZE,e=[0,0],g=[0,0],h=a.state;
h.toMap(e,[0,0]);h.toMap(g,[d,d]);if(0===b.filter(function(a){return!(e[0]>a.bounds[2]||g[0]<a.bounds[0]||e[1]<a.bounds[1]||g[1]>a.bounds[3])}).length)return[];this._hittestFBO||(this._hittestFBO=m.FramebufferObject.create(c,{colorTarget:0,depthStencilTarget:3,width:d,height:d}));var h=c.getViewport(),k=c.getBoundFramebufferObject();c.bindFramebuffer(this._hittestFBO);c.setViewport(0,0,d,d);this._drawClippingRects(a,b);var l=c.gl;c.setClearColor(1,1,1,1);c.clear(l.COLOR_BUFFER_BIT);c.setBlendingEnabled(!1);
c.setStencilWriteMask(0);this._drawPhases(a,b,f.WGLDrawPhase.HITTEST);c.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,d,d,6408,5121,E);a=d*d;b=new Set;for(d=0;d<a;d++)l=F[d],4294967295!==l&&b.add(l);c.bindFramebuffer(k);c.setViewport(h.x,h.y,h.width,h.height);var p=[];b.forEach(function(a){p.push(a)});return p};a.prototype.startStencilBurn=function(){this.context.setStencilTestEnabled(!0);this.context.setStencilWriteMask(255);this.context.setClearStencil(0);this.context.clear(this.context.gl.STENCIL_BUFFER_BIT);
this.context.setStencilOp(7680,7680,7681);this.context.setColorMask(!1,!1,!1,!1);this.context.setBlendingEnabled(!1);this._quadVertexStream.bind();this.context.bindProgram(this._transformSolidProgram)};a.prototype.startStencilDraw=function(){this.context.setStencilWriteMask(0);this.context.setStencilOp(7680,7680,7680);this.context.setColorMask(!0,!0,!0,!0);this.context.setBlendingEnabled(!0);this.context.setBlendFunction(1,771);this._quadVertexStream.bind();this.context.bindProgram(this._transformTextureProgram)};
a.prototype.endStencilDraw=function(){this.context.setStencilTestEnabled(!1);this._quadVertexStream.unbind();this.context.bindProgram()};a.prototype.drawBitmap=function(a,b,d){var e=this.context,g=a.state,h=-Math.PI*g.rotation/180,m=-Math.PI*b.rotation/180;!(h+b.rotation)&&1.05>d&&.95<d?b.setSamplingMode(9728):b.setSamplingMode(9729);var l=g.toScreen(G,b.x,b.y),g=l[0],l=l[1],n=a.state.size[0],p=a.state.size[1],t=d*b.width;d*=b.height;var r=a.globalOpacity*b.opacity,u=this._transform,y=this._quadVertexStream;
a=a.drawPhase;a===f.WGLDrawPhase.CLIP?(e.setStencilFunction(519,this.stencilRef,255),e=this._transformSolidProgram):(e.setStencilFunction(514,this.stencilRef,255),e=this._transformTextureProgram);k.mat4.identity(u);k.mat4.scale(u,u,c.vec3.set(H,2/n,2/p,1));k.mat4.translate(u,u,c.vec3.set(H,g-n/2,-l+p/2,0));k.mat4.rotateZ(u,u,h);k.mat4.translate(u,u,c.vec3.set(H,t/2,-d/2,0));k.mat4.rotateZ(u,u,-m);k.mat4.scale(u,u,c.vec3.set(H,t/2,d/2,1));e.setUniformMatrix4fv("u_transform",u);a!==f.WGLDrawPhase.CLIP&&
(b.bind(0),e.setUniform1i("u_texture",0));e.setUniform1f("u_opacity",r);y.draw()};a.prototype._getPaintPass=function(a){this._passes||(this._passes=new Map);if(!this._passes.has(a))try{this._passes.set(a,new a)}catch(I){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+a+",\n"+I);}return this._passes.get(a)};a.prototype._getPaintPasses=function(a,b){var c=this;return b.getPaintPassTs(a).map(function(a){return c._getPaintPass(a)})};a.prototype._drawPhases=function(a,b,c,d){var e=
this.context;e.setStencilTestEnabled(!0);for(var g=0;g<f.WGLDrawPhase.NUM_DRAW_PHASES-2;g++){var h=1<<g;if(h&c){var k=d?this._getPaintPasses(h,d):[],h=l({},a,{drawPhase:h});k.forEach(function(b){return b.preRender(a,a.rendererInfo)});for(var m=0,n=b;m<n.length;m++)n[m].doRender(h);k.reverse().forEach(function(b){return b.postRender(a,a.rendererInfo)})}}e.setStencilTestEnabled(!1)};a.prototype._debugTiles=function(a,b){};a.prototype._drawClippingRects=function(a,b){if(0!==b.length){var c=this.context;
c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setClearStencil(0);c.clear(c.gl.STENCIL_BUFFER_BIT);c.setStencilWriteMask(255);for(var d=0,e=b.length;d<b.length;d++,e--){var g=b[d];g.attached&&(g.stencilRef=e)}this._drawPhases(a,b,f.WGLDrawPhase.CLIP);c.setColorMask(!0,!0,!0,!0)}};a.prototype._setGlobalOpacity=function(a,b){if(b===f.WGLDrawPhase.MAP&&1!==a.globalOpacity){b=a.context;
var c=a.pixelRatio,d=a.state.size;a=Math.round(d[0]*c);c=Math.round(d[1]*c);if(null===this._globalOpacityFBO||this._globalOpacityFBO.width!==a||this._globalOpacityFBO.height!==c)null!==this._globalOpacityFBO&&this._globalOpacityFBO.dispose(),this._globalOpacityFBO=m.FramebufferObject.create(b,{colorTarget:0,depthStencilTarget:3,width:a,height:c});this._boundFBO=b.getBoundFramebufferObject();b.bindFramebuffer(this._globalOpacityFBO);b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,
0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT|b.gl.STENCIL_BUFFER_BIT);b.setDepthWriteEnabled(!1)}};a.prototype._applyGlobalOpacity=function(a,b){b===f.WGLDrawPhase.MAP&&1!==a.globalOpacity&&(b=a.context,b.bindFramebuffer(this._boundFBO),this._blitRenderer.render(b,this._globalOpacityFBO.colorTexture,9728,a.globalOpacity),this._boundFBO=null)};return a}();a.default=h})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],
function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat4=l})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(d,a,l,g){function k(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function e(a,c,d){var b=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],l=c[7],p=c[8],C=c[9],D=c[10],B=c[11],E=c[12],F=c[13],H=c[14];c=c[15];var G=d[0],J=
d[1],K=d[2],I=d[3];a[0]=G*b+J*h+K*p+I*E;a[1]=G*e+J*k+K*C+I*F;a[2]=G*f+J*m+K*D+I*H;a[3]=G*g+J*l+K*B+I*c;G=d[4];J=d[5];K=d[6];I=d[7];a[4]=G*b+J*h+K*p+I*E;a[5]=G*e+J*k+K*C+I*F;a[6]=G*f+J*m+K*D+I*H;a[7]=G*g+J*l+K*B+I*c;G=d[8];J=d[9];K=d[10];I=d[11];a[8]=G*b+J*h+K*p+I*E;a[9]=G*e+J*k+K*C+I*F;a[10]=G*f+J*m+K*D+I*H;a[11]=G*g+J*l+K*B+I*c;G=d[12];J=d[13];K=d[14];I=d[15];a[12]=G*b+J*h+K*p+I*E;a[13]=G*e+J*k+K*C+I*F;a[14]=G*f+J*m+K*D+I*H;a[15]=G*g+J*l+K*B+I*c;return a}function c(a,c,d){var b=c[0],e=c[1],f=c[2],
g=c[3],h=b+b,k=e+e,m=f+f;c=b*h;var l=b*k,b=b*m,p=e*k,e=e*m,f=f*m,h=g*h,k=g*k,g=g*m;a[0]=1-(p+f);a[1]=l+g;a[2]=b-k;a[3]=0;a[4]=l-g;a[5]=1-(c+f);a[6]=e+h;a[7]=0;a[8]=b+k;a[9]=e-h;a[10]=1-(c+p);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}function h(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];a[9]=c[9]-d[9];a[10]=c[10]-d[10];a[11]=c[11]-d[11];a[12]=c[12]-d[12];a[13]=c[13]-d[13];a[14]=c[14]-
d[14];a[15]=c[15]-d[15];return a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};a.set=function(a,c,d,e,g,h,k,m,l,x,A,z,C,D,B,E,F){a[0]=c;a[1]=d;a[2]=e;a[3]=g;a[4]=h;a[5]=k;a[6]=m;a[7]=l;a[8]=x;a[9]=A;a[10]=z;a[11]=C;a[12]=D;a[13]=B;a[14]=E;a[15]=F;return a};a.identity=k;a.transpose=function(a,c){if(a===
c){var b=c[1],d=c[2],e=c[3],f=c[6],g=c[7],h=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=d;a[9]=f;a[11]=c[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};a.invert=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],l=c[8],z=c[9],C=c[10],D=c[11],B=c[12],E=c[13],F=c[14];c=c[15];var H=b*h-
d*g,G=b*k-e*g,J=b*m-f*g,K=d*k-e*h,I=d*m-f*h,M=e*m-f*k,O=l*E-z*B,Q=l*F-C*B,P=l*c-D*B,S=z*F-C*E,U=z*c-D*E,T=C*c-D*F,R=H*T-G*U+J*S+K*P-I*Q+M*O;if(!R)return null;R=1/R;a[0]=(h*T-k*U+m*S)*R;a[1]=(e*U-d*T-f*S)*R;a[2]=(E*M-F*I+c*K)*R;a[3]=(C*I-z*M-D*K)*R;a[4]=(k*P-g*T-m*Q)*R;a[5]=(b*T-e*P+f*Q)*R;a[6]=(F*J-B*M-c*G)*R;a[7]=(l*M-C*J+D*G)*R;a[8]=(g*U-h*P+m*O)*R;a[9]=(d*P-b*U-f*O)*R;a[10]=(B*I-E*J+c*H)*R;a[11]=(z*J-l*I-D*H)*R;a[12]=(h*Q-g*S-k*O)*R;a[13]=(b*S-d*Q+e*O)*R;a[14]=(E*G-B*K-F*H)*R;a[15]=(l*K-z*G+C*
H)*R;return a};a.adjoint=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],l=c[8],z=c[9],C=c[10],D=c[11],B=c[12],E=c[13],F=c[14];c=c[15];a[0]=h*(C*c-D*F)-z*(k*c-m*F)+E*(k*D-m*C);a[1]=-(d*(C*c-D*F)-z*(e*c-f*F)+E*(e*D-f*C));a[2]=d*(k*c-m*F)-h*(e*c-f*F)+E*(e*m-f*k);a[3]=-(d*(k*D-m*C)-h*(e*D-f*C)+z*(e*m-f*k));a[4]=-(g*(C*c-D*F)-l*(k*c-m*F)+B*(k*D-m*C));a[5]=b*(C*c-D*F)-l*(e*c-f*F)+B*(e*D-f*C);a[6]=-(b*(k*c-m*F)-g*(e*c-f*F)+B*(e*m-f*k));a[7]=b*(k*D-m*C)-g*(e*D-f*C)+l*(e*m-f*k);
a[8]=g*(z*c-D*E)-l*(h*c-m*E)+B*(h*D-m*z);a[9]=-(b*(z*c-D*E)-l*(d*c-f*E)+B*(d*D-f*z));a[10]=b*(h*c-m*E)-g*(d*c-f*E)+B*(d*m-f*h);a[11]=-(b*(h*D-m*z)-g*(d*D-f*z)+l*(d*m-f*h));a[12]=-(g*(z*F-C*E)-l*(h*F-k*E)+B*(h*C-k*z));a[13]=b*(z*F-C*E)-l*(d*F-e*E)+B*(d*C-e*z);a[14]=-(b*(h*F-k*E)-g*(d*F-e*E)+B*(d*k-e*h));a[15]=b*(h*C-k*z)-g*(d*C-e*z)+l*(d*k-e*h);return a};a.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],m=a[7],l=a[8],A=a[9],z=a[10],C=a[11],D=a[12],B=a[13],E=a[14];a=a[15];
return(b*h-c*g)*(z*a-C*E)-(b*k-d*g)*(A*a-C*B)+(b*m-e*g)*(A*E-z*B)+(c*k-d*h)*(l*a-C*D)-(c*m-e*h)*(l*E-z*D)+(d*m-e*k)*(l*B-A*D)};a.multiply=e;a.translate=function(a,c,d){var b=d[0],e=d[1];d=d[2];var f=void 0,g=void 0,h=void 0,k=void 0,m=void 0,l=void 0,p=void 0,C=void 0,D=void 0,B=void 0,E=void 0,F=void 0;c===a?(a[12]=c[0]*b+c[4]*e+c[8]*d+c[12],a[13]=c[1]*b+c[5]*e+c[9]*d+c[13],a[14]=c[2]*b+c[6]*e+c[10]*d+c[14],a[15]=c[3]*b+c[7]*e+c[11]*d+c[15]):(f=c[0],g=c[1],h=c[2],k=c[3],m=c[4],l=c[5],p=c[6],C=c[7],
D=c[8],B=c[9],E=c[10],F=c[11],a[0]=f,a[1]=g,a[2]=h,a[3]=k,a[4]=m,a[5]=l,a[6]=p,a[7]=C,a[8]=D,a[9]=B,a[10]=E,a[11]=F,a[12]=f*b+m*e+D*d+c[12],a[13]=g*b+l*e+B*d+c[13],a[14]=h*b+p*e+E*d+c[14],a[15]=k*b+C*e+F*d+c[15]);return a};a.scale=function(a,c,d){var b=d[0],e=d[1];d=d[2];a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*e;a[5]=c[5]*e;a[6]=c[6]*e;a[7]=c[7]*e;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};a.rotate=function(a,c,d,
e){var b=e[0],f=e[1];e=e[2];var h=Math.sqrt(b*b+f*f+e*e),k=void 0,m=void 0,l=void 0,p=void 0,u=void 0,C=void 0,D=void 0,B=void 0,E=void 0,F=void 0,H=void 0,G=void 0,J=void 0,K=void 0,I=void 0,M=void 0,O=void 0,Q=void 0,P=void 0,S=void 0,U=void 0,T=void 0,m=k=void 0;if(h<g.EPSILON)return null;h=1/h;b*=h;f*=h;e*=h;k=Math.sin(d);m=Math.cos(d);l=1-m;p=c[0];u=c[1];C=c[2];D=c[3];B=c[4];E=c[5];F=c[6];H=c[7];G=c[8];J=c[9];K=c[10];I=c[11];M=b*b*l+m;O=f*b*l+e*k;Q=e*b*l-f*k;P=b*f*l-e*k;S=f*f*l+m;U=e*f*l+b*k;
T=b*e*l+f*k;k=f*e*l-b*k;m=e*e*l+m;a[0]=p*M+B*O+G*Q;a[1]=u*M+E*O+J*Q;a[2]=C*M+F*O+K*Q;a[3]=D*M+H*O+I*Q;a[4]=p*P+B*S+G*U;a[5]=u*P+E*S+J*U;a[6]=C*P+F*S+K*U;a[7]=D*P+H*S+I*U;a[8]=p*T+B*k+G*m;a[9]=u*T+E*k+J*m;a[10]=C*T+F*k+K*m;a[11]=D*T+H*k+I*m;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};a.rotateX=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var e=c[4],f=c[5],g=c[6],h=c[7],k=c[8],m=c[9],l=c[10],p=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=
c[14],a[15]=c[15]);a[4]=e*d+k*b;a[5]=f*d+m*b;a[6]=g*d+l*b;a[7]=h*d+p*b;a[8]=k*d-e*b;a[9]=m*d-f*b;a[10]=l*d-g*b;a[11]=p*d-h*b;return a};a.rotateY=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var e=c[0],f=c[1],g=c[2],h=c[3],k=c[8],m=c[9],l=c[10],p=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*d-k*b;a[1]=f*d-m*b;a[2]=g*d-l*b;a[3]=h*d-p*b;a[8]=e*b+k*d;a[9]=f*b+m*d;a[10]=g*b+l*d;a[11]=h*b+p*d;return a};a.rotateZ=function(a,c,d){var b=Math.sin(d);
d=Math.cos(d);var e=c[0],f=c[1],g=c[2],h=c[3],k=c[4],m=c[5],l=c[6],p=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*d+k*b;a[1]=f*d+m*b;a[2]=g*d+l*b;a[3]=h*d+p*b;a[4]=k*d-e*b;a[5]=m*d-f*b;a[6]=l*d-g*b;a[7]=p*d-h*b;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotation=function(a,c,d){var b=d[0],e=d[1];d=d[2];var f=Math.sqrt(b*b+e*e+d*d),h=void 0,k=void 0,m=void 0;if(f<g.EPSILON)return null;f=1/f;b*=f;e*=f;d*=f;h=Math.sin(c);k=Math.cos(c);m=1-k;a[0]=b*b*m+k;a[1]=e*b*m+d*h;a[2]=d*b*m-e*h;a[3]=0;a[4]=b*e*m-d*h;a[5]=e*e*m+k;a[6]=d*e*m+b*h;a[7]=0;a[8]=b*d*m+e*h;a[9]=e*d*m-b*h;a[10]=d*d*m+k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
a.fromXRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromYRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromZRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=c;a[6]=0;a[7]=0;
a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotationTranslation=c;a.fromQuat2=function(a,d){var b=m,e=-d[0],f=-d[1],g=-d[2],h=d[3],k=d[4],l=d[5],x=d[6],A=d[7],z=e*e+f*f+g*g+h*h;0<z?(b[0]=2*(k*h+A*e+l*g-x*f)/z,b[1]=2*(l*h+A*f+x*e-k*g)/z,b[2]=2*(x*h+A*g+k*f-l*e)/z):(b[0]=2*(k*h+A*e+l*g-x*f),b[1]=2*(l*h+A*f+x*e-k*g),b[2]=2*(x*h+A*g+k*f-l*e));c(a,d,b);return a};var m=l.create();a.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};a.getScaling=function(a,
c){var b=c[0],d=c[1],e=c[2],f=c[4],g=c[5],h=c[6],k=c[8],m=c[9];c=c[10];a[0]=Math.sqrt(b*b+d*d+e*e);a[1]=Math.sqrt(f*f+g*g+h*h);a[2]=Math.sqrt(k*k+m*m+c*c);return a};a.getRotation=function(a,c){var b=c[0]+c[5]+c[10],d=0;0<b?(d=2*Math.sqrt(b+1),a[3]=.25*d,a[0]=(c[6]-c[9])/d,a[1]=(c[8]-c[2])/d,a[2]=(c[1]-c[4])/d):c[0]>c[5]&&c[0]>c[10]?(d=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/d,a[0]=.25*d,a[1]=(c[1]+c[4])/d,a[2]=(c[8]+c[2])/d):c[5]>c[10]?(d=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/d,
a[0]=(c[1]+c[4])/d,a[1]=.25*d,a[2]=(c[6]+c[9])/d):(d=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/d,a[0]=(c[8]+c[2])/d,a[1]=(c[6]+c[9])/d,a[2]=.25*d);return a};a.fromRotationTranslationScale=function(a,c,d,e){var b=c[0],f=c[1],g=c[2],h=c[3],k=b+b,m=f+f,l=g+g;c=b*k;var p=b*m,b=b*l,u=f*m,f=f*l,g=g*l,k=h*k,m=h*m,h=h*l,l=e[0],D=e[1];e=e[2];a[0]=(1-(u+g))*l;a[1]=(p+h)*l;a[2]=(b-m)*l;a[3]=0;a[4]=(p-h)*D;a[5]=(1-(c+g))*D;a[6]=(f+k)*D;a[7]=0;a[8]=(b+m)*e;a[9]=(f-k)*e;a[10]=(1-(c+u))*e;a[11]=0;a[12]=d[0];
a[13]=d[1];a[14]=d[2];a[15]=1;return a};a.fromRotationTranslationScaleOrigin=function(a,c,d,e,g){var b=c[0],f=c[1],h=c[2],k=c[3],m=b+b,l=f+f,n=h+h;c=b*m;var p=b*l,u=b*n,b=f*l,f=f*n,B=h*n,h=k*m,l=k*l,E=k*n,F=e[0],H=e[1],n=e[2];e=g[0];k=g[1];g=g[2];var m=(1-(b+B))*F,G=(p+E)*F,F=(u-l)*F,p=(p-E)*H,B=(1-(c+B))*H,H=(f+h)*H,u=(u+l)*n,f=(f-h)*n;c=(1-(c+b))*n;a[0]=m;a[1]=G;a[2]=F;a[3]=0;a[4]=p;a[5]=B;a[6]=H;a[7]=0;a[8]=u;a[9]=f;a[10]=c;a[11]=0;a[12]=d[0]+e-(m*e+p*k+u*g);a[13]=d[1]+k-(G*e+B*k+f*g);a[14]=d[2]+
g-(F*e+H*k+c*g);a[15]=1;return a};a.fromQuat=function(a,c){var b=c[0],d=c[1],e=c[2];c=c[3];var f=b+b,g=d+d,h=e+e,b=b*f,k=d*f,d=d*g,m=e*f,l=e*g,e=e*h,f=c*f,g=c*g;c*=h;a[0]=1-d-e;a[1]=k+c;a[2]=m-g;a[3]=0;a[4]=k-c;a[5]=1-b-e;a[6]=l+f;a[7]=0;a[8]=m+g;a[9]=l-f;a[10]=1-b-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.frustum=function(a,c,d,e,g,h,k){var b=1/(d-c),f=1/(g-e),m=1/(h-k);a[0]=2*h*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*f;a[6]=0;a[7]=0;a[8]=(d+c)*b;a[9]=(g+e)*f;a[10]=(k+h)*m;a[11]=-1;a[12]=
0;a[13]=0;a[14]=k*h*2*m;a[15]=0;return a};a.perspective=function(a,c,d,e,g){c=1/Math.tan(c/2);var b=void 0;a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=g&&Infinity!==g?(b=1/(e-g),a[10]=(g+e)*b,a[14]=2*g*e*b):(a[10]=-1,a[14]=-2*e);return a};a.perspectiveFromFieldOfView=function(a,c,d,e){var b=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),g=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/
180);var h=2/(g+c),k=2/(b+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((g-c)*h*.5);a[9]=(b-f)*k*.5;a[10]=e/(d-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*d/(d-e);a[15]=0;return a};a.ortho=function(a,c,d,e,g,h,k){var b=1/(c-d),f=1/(e-g),m=1/(h-k);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(c+d)*b;a[13]=(g+e)*f;a[14]=(k+h)*m;a[15]=1;return a};a.lookAt=function(a,c,d,e){var b=void 0,f=void 0,h=void 0,m=void 0,l=void 0,p=void 0,u=void 0,
z=void 0,C=void 0,D=void 0,B=c[0],E=c[1];c=c[2];h=e[0];m=e[1];e=e[2];u=d[0];z=d[1];d=d[2];if(Math.abs(B-u)<g.EPSILON&&Math.abs(E-z)<g.EPSILON&&Math.abs(c-d)<g.EPSILON)return k(a);u=B-u;z=E-z;C=c-d;D=1/Math.sqrt(u*u+z*z+C*C);u*=D;z*=D;C*=D;b=m*C-e*z;f=e*u-h*C;h=h*z-m*u;(D=Math.sqrt(b*b+f*f+h*h))?(D=1/D,b*=D,f*=D,h*=D):h=f=b=0;m=z*h-C*f;l=C*b-u*h;p=u*f-z*b;(D=Math.sqrt(m*m+l*l+p*p))?(D=1/D,m*=D,l*=D,p*=D):p=l=m=0;a[0]=b;a[1]=m;a[2]=u;a[3]=0;a[4]=f;a[5]=l;a[6]=z;a[7]=0;a[8]=h;a[9]=p;a[10]=C;a[11]=0;
a[12]=-(b*B+f*E+h*c);a[13]=-(m*B+l*E+p*c);a[14]=-(u*B+z*E+C*c);a[15]=1;return a};a.targetTo=function(a,c,d,e){var b=c[0],f=c[1];c=c[2];var g=e[0],h=e[1],k=e[2];e=b-d[0];var m=f-d[1];d=c-d[2];var l=e*e+m*m+d*d;0<l&&(l=1/Math.sqrt(l),e*=l,m*=l,d*=l);var p=h*d-k*m,k=k*e-g*d,g=g*m-h*e,l=p*p+k*k+g*g;0<l&&(l=1/Math.sqrt(l),p*=l,k*=l,g*=l);a[0]=p;a[1]=k;a[2]=g;a[3]=0;a[4]=m*g-d*k;a[5]=d*p-e*g;a[6]=e*k-m*p;a[7]=0;a[8]=e;a[9]=m;a[10]=d;a[11]=0;a[12]=b;a[13]=f;a[14]=c;a[15]=1;return a};a.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,c,
d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=c[6]+d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];a[9]=c[9]+d[9];a[10]=c[10]+d[10];a[11]=c[11]+d[11];a[12]=c[12]+d[12];a[13]=c[13]+d[13];a[14]=c[14]+d[14];a[15]=c[15]+d[15];return a};a.subtract=h;a.multiplyScalar=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12]*d;a[13]=c[13]*d;a[14]=c[14]*
d;a[15]=c[15]*d;return a};a.multiplyScalarAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;a[4]=c[4]+d[4]*e;a[5]=c[5]+d[5]*e;a[6]=c[6]+d[6]*e;a[7]=c[7]+d[7]*e;a[8]=c[8]+d[8]*e;a[9]=c[9]+d[9]*e;a[10]=c[10]+d[10]*e;a[11]=c[11]+d[11]*e;a[12]=c[12]+d[12]*e;a[13]=c[13]+d[13]*e;a[14]=c[14]+d[14]*e;a[15]=c[15]+d[15]*e;return a};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&
a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};a.equals=function(a,c){var b=a[0],d=a[1],e=a[2],f=a[3],h=a[4],k=a[5],m=a[6],l=a[7],A=a[8],z=a[9],C=a[10],D=a[11],B=a[12],E=a[13],F=a[14];a=a[15];var H=c[0],G=c[1],J=c[2],K=c[3],I=c[4],M=c[5],O=c[6],Q=c[7],P=c[8],S=c[9],U=c[10],T=c[11],R=c[12],W=c[13],X=c[14];c=c[15];return Math.abs(b-H)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(H))&&Math.abs(d-G)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(G))&&
Math.abs(e-J)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(J))&&Math.abs(f-K)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(K))&&Math.abs(h-I)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(k-M)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(M))&&Math.abs(m-O)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(l-Q)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(Q))&&Math.abs(A-P)<=g.EPSILON*Math.max(1,Math.abs(A),Math.abs(P))&&Math.abs(z-S)<=g.EPSILON*Math.max(1,Math.abs(z),Math.abs(S))&&Math.abs(C-
U)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(U))&&Math.abs(D-T)<=g.EPSILON*Math.max(1,Math.abs(D),Math.abs(T))&&Math.abs(B-R)<=g.EPSILON*Math.max(1,Math.abs(B),Math.abs(R))&&Math.abs(E-W)<=g.EPSILON*Math.max(1,Math.abs(E),Math.abs(W))&&Math.abs(F-X)<=g.EPSILON*Math.max(1,Math.abs(F),Math.abs(X))&&Math.abs(a-c)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.mul=e;a.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(d,a,l){Object.defineProperty(a,
"__esModule",{value:!0});a.mat4f32=l})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(16);a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};a.clone=function(a){var d=new Float32Array(16);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};
a.fromValues=function(a,d,k,e,c,h,m,b,f,p,u,n,r,w,t,y){var g=new Float32Array(16);g[0]=a;g[1]=d;g[2]=k;g[3]=e;g[4]=c;g[5]=h;g[6]=m;g[7]=b;g[8]=f;g[9]=p;g[10]=u;g[11]=n;g[12]=r;g[13]=w;g[14]=t;g[15]=y;return g};a.createView=function(a,d){return new Float32Array(a,d,16)}})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec3f32=l})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(d,a){function l(){return new Float32Array(3)}function g(a,b,c){var d=new Float32Array(3);d[0]=a;d[1]=b;d[2]=c;return d}function k(){return g(1,1,1)}function e(){return g(1,0,0)}function c(){return g(0,1,0)}function h(){return g(0,0,1)}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){var b=new Float32Array(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=g;a.createView=function(a,b){return new Float32Array(a,b,3)};a.zeros=function(){return l()};
a.ones=k;a.unitX=e;a.unitY=c;a.unitZ=h;a.ZEROS=l();a.ONES=k();a.UNIT_X=e();a.UNIT_Y=c();a.UNIT_Z=h()})},"esri/views/2d/engine/webgl/MaterialManager":function(){define("require exports ../../../../core/tsSupport/assignHelper @dojo/framework/shim/Map ../../../webgl ./enums ./shaders/MaterialPrograms".split(" "),function(d,a,l,g,k,e,c){return function(){function a(a){this._programByKey=new g.default;this._programCache=new k.ProgramCache(a)}a.prototype.dispose=function(){this._programCache&&this._programCache.dispose()};
a.prototype.getProgram=function(a,b,d,g,h){var f;f=a.getVariationHash()+"-"+((b===e.WGLDrawPhase.HITTEST||b===e.WGLDrawPhase.LABEL_ALPHA?1:0)|(b===e.WGLDrawPhase.HIGHLIGHT?2:0))+"-"+d.getVariationHash();if(this._programByKey.has(f))return this._programByKey.get(f);a=l({},a.getVariation(),d.getVariation(),{highlight:b===e.WGLDrawPhase.HIGHLIGHT,id:b===e.WGLDrawPhase.HITTEST||b===e.WGLDrawPhase.LABEL_ALPHA});g=this._programCache.getProgram(c.createProgramTemplate(g,h),a);if(!g)throw Error("Unable to get program for key: ${key}");
this._programByKey.set(f,g);return g};return a}()})},"esri/views/2d/engine/webgl/shaders/MaterialPrograms":function(){define(["require","exports","../../../../webgl","./sources/resolver"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});var k=function(a){var c={},d;for(d in a){for(var e=d,b=void 0,b=""+e[0].toUpperCase(),f=1;f<e.length;f++){var g=e[f];g===g.toUpperCase()?(b+="_",b+=g):b+=g.toUpperCase()}c[b]=a[d]}return l.glslifyDefineMap(c)};a.createProgramTemplate=function(a,c){return{name:a,
attributes:c,shaders:function(c){return{vertexShader:k(c)+g.resolveIncludes("materials/"+a+"/"+a+".vert"),fragmentShader:k(c)+g.resolveIncludes("materials/"+a+"/"+a+".frag")}}}}})},"esri/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../config ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../symbols/cim/CIMSymbolHelper ../../../../symbols/cim/SDFHelper ./definitions ./enums ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFConverter ./SpriteMosaic ./Utils ./util/Result".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B){function E(a){if(a.type){switch(D.normalizeSymbolType(a.type)){case "simple-marker":return a.path?"simple-marker"+a.style+a.path:"simple-marker"+a.style;case "simple-line":return"simple-line"+a.style+a.cap;case "simple-fill":return"simple-fill"+a.style}if(a.mosaicHash)return a.mosaicHash;if(D.isPictureSymbol(a))return a.imageData?a.imageData:a.url+(""+a.width+a.height)}return JSON.stringify(a)}var F=u.vec2f32.create(),H=b.getLogger("esri.views.2d.engine.webgl.TextureManager"),
G=function(){function a(a,b,c){this.mosaicType=a;this.page=b;this.sdf=c}a.fromMosaic=function(b,c){return new a(b,c.page,c.sdf)};return a}();return function(){function a(){this._invalidFontsMap=new Map;this._sdfConverter=new z.default(126);this._bindingInfos=[];this._hashToBindingIndex=new Map;this._spriteMosaic=new C(1024,1024,300);this._glyphSource=new A(e.fontsUrl+"/{fontstack}/{range}.pbf");this._glyphMosaic=new x(1024,1024,this._glyphSource)}Object.defineProperty(a.prototype,"sprites",{get:function(){return this._spriteMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=this._glyphMosaic=this._spriteMosaic=null};a.prototype._hashMosaic=function(a,b){return 1|a<<1|(b.sdf?1:0)<<2|b.page<<3};a.prototype._setTextureBinding=function(a,b){var c=this._hashMosaic(a,b);this._hashToBindingIndex.has(c)||(a=G.fromMosaic(a,
b),this._hashToBindingIndex.set(c,this._bindingInfos.length+1),this._bindingInfos.push(a));b.textureBinding=this._hashToBindingIndex.get(c)};a.prototype.rasterizeItem=function(a,b,c){var d=this;void 0===b&&(b=null);return a?a.type&&-1!==a.type.toLowerCase().indexOf("3d")?(H.error(new m("mapview-invalid-type","MapView does not support 3d symbol type: "+a.type,a)),f.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!a.type||"text"!==a.type&&"esriTS"!==a.type&&"CIMTextSymbol"!==a.type?h.safeCast(this._rasterizeSpriteSymbol(a,
c)).then(function(a){B.ok(a)&&a&&d._setTextureBinding(t.MosaicType.SPRITE,a);return{spriteMosaicItem:a}}):this._rasterizeTextSymbol(a,b,c).then(function(a){a.forEach(function(a){return d._setTextureBinding(t.MosaicType.GLYPH,a)});return{glyphMosaicItems:a}}):(H.error(new m("mapview-null-resource","Unable to rasterize null resource")),f.resolve(null))};a.prototype.bindTextures=function(a,b,c,d){void 0===d&&(d=1);if(0!==c.textureBinding){var e=this._bindingInfos[c.textureBinding-1];c=e.page;switch(e.mosaicType){case t.MosaicType.SPRITE:e=
this.sprites.getWidth(c)/d;d=this.sprites.getHeight(c)/d;d=p.vec2.set(F,e,d);this._bindSpritePage(a,c,w.TEXTURE_BINDING_SPRITE_ATLAS,9729);b.setUniform1i("u_texture",w.TEXTURE_BINDING_SPRITE_ATLAS);b.setUniform2fv("u_mosaicSize",d);break;case t.MosaicType.GLYPH:e=this.glyphs.width/d;d=this.glyphs.height/d;d=p.vec2.set(F,e,d);this._bindGlyphsPage(a,c,w.TEXTURE_BINDING_GLYPH_ATLAS);b.setUniform1i("u_texture",w.TEXTURE_BINDING_GLYPH_ATLAS);b.setUniform2fv("u_mosaicSize",d);break;default:H.error("mapview-texture-manager",
"Cannot handle unknown type "+e.mosaicType)}}};a.prototype._bindSpritePage=function(a,b,c,d){d||(d=9729);this._spriteMosaic.bind(a,d,b,c)};a.prototype._bindGlyphsPage=function(a,b,c){this._glyphMosaic.bind(a,9729,b,c)};a.prototype._rasterizeTextSymbol=function(a,b,c){var d=this,e=y.getFullyQualifiedFontName(a.font);a=this._invalidFontsMap.has(e);return this._glyphMosaic.getGlyphItems(a?"arial-unicode-ms-regular":e,b,c).catch(function(a){H.error(new m("mapview-invalid-resource","Couldn't find font "+
e+". Falling back to Arial Unicode MS Regular"));d._invalidFontsMap.set(e,!0);return d._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",b,c)})};a.prototype._rasterizeSpriteSymbol=function(a,b){return g(this,void 0,void 0,function(){var c,d,e,f,g,h;return k(this,function(k){k="CIMSolidStroke"===a.type||"CIMSolidFill"===a.type?!0:a&&(D.isFillSymbol(a)||D.isLineSymbol(a))&&"style"in a&&("solid"===a.style||"esriSFSSolid"===a.style||"esriSLSSolid"===a.style||"none"===a.style||"esriSFSNull"===a.style||
"esriSLSNull"===a.style);if(k)return[2,null];c=E(a);return this._spriteMosaic.has(c)?[2,this._spriteMosaic.getSpriteItem(c)]:"simple-marker"!==a.type&&"esriSMS"!==a.type||!a.path?a.url||a.imageData?[2,this._handleImage(a,c,b)]:(d=this._rasterizeJSON(a))?(e=d.size,f=d.image,g=d.sdf,h=d.simplePattern,[2,this._addItemToMosaic(c,e,f,!D.isMarkerSymbol(a),g,h)]):[2,new m("TextureManager","unrecognized or null rasterized image")]:[2,this._handleSVG(a,c,b)]})})};a.prototype._handleSVG=function(a,b,c){return g(this,
void 0,void 0,function(){var d,e;return k(this,function(f){switch(f.label){case 0:return d=[126,126],[4,this._sdfConverter.draw(a.path,c)];case 1:return e=f.sent(),[2,this._addItemToMosaic(b,d,new Uint32Array(e.buffer),!1,!0,!0)]}})})};a.prototype._handleImage=function(a,b,d){return g(this,void 0,void 0,function(){var e,g,h,n,p,t,r;return k(this,function(k){switch(k.label){case 0:e=a.imageData?"data:"+a.contentType+";base64,"+a.imageData:a.url,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,c(e,
l({responseType:"image"},d))];case 2:return g=k.sent().data,h=this._rasterizeImageResource(g,a.colorSubstitutions),n=h.size,p=h.sdf,t=h.image,[2,this._addItemToMosaic(b,n,t,!D.isMarkerSymbol(a),p,!1)];case 3:return r=k.sent(),f.isAbortError(r)?[3,4]:[2,new m("mapview-invalid-resource","Could not fetch requested resource at "+e)];case 4:return[2]}})})};a.prototype._rasterizeImageResource=function(a,b){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=
a.width;this._rasterizationCanvas.height=a.height;var c=this._rasterizationCanvas.getContext("2d");c.drawImage(a,0,0,a.width,a.height);c=c.getImageData(0,0,a.width,a.height);c=new Uint8Array(c.data);if(b)for(var d=0;d<b.length;d++){var e=b[d];if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){var f=e.oldColor,g=f[0],h=f[1],k=f[2],f=f[3],m=e.newColor,e=m[0],l=m[1],n=m[2],p=m[3];if(g!==e||h!==l||k!==n||f!==p)for(m=0;m<c.length;m+=4)g===c[m]&&h===c[m+1]&&k===c[m+2]&&f===c[m+
3]&&(c[m]=e,c[m+1]=l,c[m+2]=n,c[m+3]=p)}}for(m=0;m<c.length;m+=4)b=c[m+3]/255,c[m]*=b,c[m+1]*=b,c[m+2]*=b;b=a.width;d=a.height;g=c;if(512<=b||512<=d)g=a.width/a.height,1<g?(b=512,d=Math.round(512/g)):(d=512,b=Math.round(512*g)),g=new Uint8Array(4*b*d),D.resampleHermite(c,a.width,a.height,new Uint8ClampedArray(g.buffer),b,d,!1);return{size:[b,d],image:new Uint32Array(g.buffer),sdf:!1,simplePattern:!1}};a.prototype._addItemToMosaic=function(a,b,c,d,e,f){return this._spriteMosaic.addSpriteItem(a,b,c,
d,e,f)};a.prototype._rasterizeJSON=function(a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===a.type||"esriSFS"===a.type)return a=n.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,a.style),{size:[a[1],a[2]],image:new Uint32Array(a[0].buffer),sdf:!1,simplePattern:!0};if("simple-line"===a.type||"esriSLS"===a.type)return a=n.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,a.style,a.cap),{size:[a[1],a[2]],image:new Uint32Array(a[0].buffer),
sdf:!0,simplePattern:!0};var b;a="simple-marker"===a.type||"esriSMS"===a.type?n.CIMSymbolHelper.fromSimpleMarker(a):a;if(b=r.getSDFInfo(a))return a=r.buildSDF(b),(b=a[0])?{size:[a[1],a[2]],image:new Uint32Array(b.buffer),sdf:!0,simplePattern:!0}:null;a=n.CIMSymbolHelper.rasterize(this._rasterizationCanvas,a);return(b=a[0])?{size:[a[1],a[2]],image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1}:null};return a}()})},"esri/symbols/cim/CIMSymbolHelper":function(){define("require exports ../../Color ../../core/Logger ../../geometry/support/jsonUtils ../cim/CIMCursor ../cim/CIMEffects ../cim/CIMOperators ../cim/CIMPlacements ./CIMSymbolDrawHelper ./packingUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){function p(a,b){switch(b.type){case "CIMSymbolReference":var c={type:"point",x:0,y:0};a.drawSymbol(b.symbol,c);break;case "CIMPointSymbol":c={type:"point",x:0,y:0};a.drawSymbol(b,c);break;case "CIMVectorMarker":c=new m.Placement,a.drawMarker(b,c)}return a.envelope()}Object.defineProperty(a,"__esModule",{value:!0});var u=Math.PI,n=u/2,r=g.getLogger("esri.symbols.cim.CIMSymbolHelper");d=function(){function a(){}a.getEnvelope=function(a){var c=new b.EnvDrawHelper;if(Array.isArray(a)){for(var d=
void 0,e=0;e<a.length;e++){var f=a[e];d?d.union(p(c,f)):d=p(c,f)}return d}return p(c,a)};a.getTextureAnchor=function(a){a=this.getEnvelope(a);if(!a||0>=a.width||0>=a.height)return[0,0];var b=96/72;return[(a.x+.5*a.width)*b/(a.width*b+2),-(a.y+.5*a.height)*b/(a.height*b+2)]};a.rasterize=function(a,c){var d=this.getEnvelope(c);if(!d||0>=d.width||0>=d.height)return[null,0,0];var e=96/72,f=(d.x+.5*d.width)*e,g=-(d.y+.5*d.height)*e;a.width=d.width*e+2;a.height=d.height*e+2;d=a.getContext("2d");e=b.Transformation.createScale(e,
-e);e.translate(.5*a.width-f,.5*a.height-g);f=new b.CanvasDrawHelper(d,e);switch(c.type){case "CIMPointSymbol":f.drawSymbol(c,{type:"point",x:0,y:0});break;case "CIMVectorMarker":g=new m.Placement,f.drawMarker(c,g)}c=d.getImageData(0,0,a.width,a.height);c=new Uint8Array(c.data);for(f=0;f<c.length;f+=4)d=c[f+3]/255,c[f]*=d,c[f+1]*=d,c[f+2]*=d;return[c,a.width,a.height]};a.fromSimpleMarker=function(a){var b,c,d=a.style;if("circle"===d||"esriSMSCircle"===d){b=Math.acos(.995);c=Math.ceil(u/b/4);0===c&&
(c=1);b=n/c;c*=4;d=[];d.push([50,0]);for(var e=1;e<c;e++)d.push([50*Math.cos(e*b),-50*Math.sin(e*b)]);d.push([50,0]);b={rings:[d]};c={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===d||"esriSMSCross"===d)b=0,b={rings:[[[b,50],[b,b],[50,b],[50,-b],[b,-b],[b,-50],[-b,-50],[-b,-b],[-50,-b],[-50,b],[-b,b],[-b,50],[b,50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===d||"esriSMSDiamond"===d)b={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===
d||"esriSMSSquare"===d)b={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===d||"esriSMSX"===d)b=0,b={rings:[[[0,b],[50-b,50],[50,50-b],[b,0],[50,b-50],[50-b,-50],[0,-b],[b-50,-50],[-50,b-50],[-b,0],[-50,50-b],[b-50,50],[0,b]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===d||"esriSMSTriangle"===d)c=2/3*100,d=c-100,b={rings:[[[-57.735026918962575,d],[0,c],[57.735026918962575,d],[-57.735026918962575,d]]]},c={xmin:-57.735026918962575,
ymin:d,xmax:57.735026918962575,ymax:c};var f;b&&c&&(f=[{type:"CIMSolidFill",enable:!0,color:a.color}],a.outline&&f.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color}),f={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:c,markerGraphics:[{type:"CIMMarkerGraphic",geometry:b,symbol:{type:"CIMPolygonSymbol",symbolLayers:f}}]}]});return f};a.getFillColor=function(b){if(!b)return null;
switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers){var c=0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getFillColor(b[c]);if(null!=d)return d}}break;case "CIMTextSymbol":return a.getFillColor(b.symbol);case "CIMSolidFill":return b.color}};a.getStrokeColor=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers){var c=0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getStrokeColor(b[c]);if(void 0!==d)return d}}break;case "CIMTextSymbol":return a.getStrokeColor(b.symbol);
case "CIMSolidStroke":return b.color}};a.getStrokeWidth=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers){var c=0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getStrokeWidth(b[c]);if(void 0!==d)return d}}break;case "CIMTextSymbol":return a.getStrokeWidth(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}};a.getSize=function(b){if(b)switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":var c=
0;if(b.symbolLayers){var d=0;for(b=b.symbolLayers;d<b.length;d++){var e=a.getSize(b[d]);e>c&&(c=e)}}return c;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return b.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return b.size}};a.getMarkerScaleRatio=function(a){if(a)switch(a.type){case "CIMVectorMarker":if(!1!==a.scaleSymbolsProportionally&&a.frame)return a.size/(a.frame.ymax-a.frame.ymin)}return 1};a.executeEffects=function(a,b,c){void 0===
c&&(c=!1);var d=96/72,e=a?a.length:0;e&&c&&--e;for(c=0;c<e;++c){var f=a[c];if(f){var g=h.getEffectOperator(f);g&&(b=g.execute(b,f,d))}}return b};a.processEffects=function(b,d,f){var g;b.effects&&0<b.effects.length&&(g=e.deltaEncodeGeometry(f),g=new c.SimpleGeometryCursor(g),g=a.executeEffects(b.effects,g));b=b.symbolLayers[d];b.effects&&0<b.effects.length&&(d=!1,"CIMGeometricEffectDashes"===b.effects[b.effects.length-1].type&&(d=!0),g||(g=e.deltaEncodeGeometry(f),g=new c.SimpleGeometryCursor(g)),
g=a.executeEffects(b.effects,g,d));if(!g)return f;f=[];for(b=g.next();b;)f.push(b),b=g.next();g=f.length;switch(g){case 0:return null;case 1:return e.deltaEncodeGeometry(f[0]);default:b=f[0];for(d=1;d<g;++d){var h=f[d];k.isPolygon(b)&&k.isPolygon(h)&&Array.prototype.push.apply(b.rings,h.rings);k.isPolyline(b)&&k.isPolyline(h)&&Array.prototype.push.apply(b.paths,h.paths)}return e.deltaEncodeGeometry(b)}};return a}();a.CIMSymbolHelper=d;d=function(){function a(){}a.rasterizeSimpleFill=function(a,b){"solid"!==
b&&"none"!==b&&"esriSFSSolid"!==b&&"esriSFSNull"!==b||console.error("Unexpected: style does not require rasterization");a.width=8;a.height=8;var c=a.getContext("2d");c.strokeStyle="#FFFFFF";c.lineWidth=1;c.beginPath();if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)c.moveTo(0,0),c.lineTo(0,8);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===b)c.moveTo(0,0),c.lineTo(8,0);if("forward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||
"esriSFSForwardDiagonal"===b)c.moveTo(0,0),c.lineTo(8,8);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSBackwardDiagonal"===b||"esriSFSDiagonalCross"===b)c.moveTo(8,0),c.lineTo(0,8);c.stroke();b=c.getImageData(0,0,a.width,a.height);b=new Uint8Array(b.data);for(var d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;return[b,a.width,a.height]};a.rasterizeSimpleLine=function(a,b,c){switch(c){case "butt":c="Butt";break;case "square":c="Square";break;default:c="Round"}var d="Butt"===
c;switch(b){case "dash":case "esriSLSDash":b=d?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":b=d?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":b=d?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":b=d?[8,3]:[7,4];break;case "long-dash-dot":case "esriSLSLongDashDot":b=d?[8,3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":b=d?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":b=d?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":b=
d?[4,1,1,1]:[3,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":b=d?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":b=d?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":r.error("Unexpected: style does not require rasterization");b=[0,0];break;default:r.error("Tried to rasterize SLS, but found an unexpected style: "+b+"!"),b=[0,0]}return this.rasterizeDash(a,b,c)};a.rasterizeDash=function(a,b,c){a="Butt"===c;var d="Square"===c;c=!a&&!d;for(var e=
0,g=0;g<b.length;g++)var h=b[g],e=e+h;for(var e=15*e,k=31*e,g=new Float32Array(k),m=c?225:15,h=0;h<k;++h)g[h]=m;for(var m=k=0,l=!0,n=0;n<b.length;n++){for(var h=b[n],k=m,m=m+15*h,p=k;p<m;){for(var r=0;31>r;){var h=r*e+p,t=c?(r-15)*(r-15):Math.abs(r-15);g[h]=l?a?Math.max(Math.max(k+7.5-p,t),Math.max(p-m+7.5,t)):t:c?Math.min((p-k)*(p-k)+t,(p-m)*(p-m)+t):d?Math.min(Math.max(p-k,t),Math.max(m-p,t)):Math.min(Math.max(p-k+7.5,t),Math.max(m+7.5-p,t));r++}p++}l=!l}b=g.length;a=new Uint8Array(4*b);for(h=0;h<
b;++h)f.packFloatRGBA((c?Math.sqrt(g[h]):g[h])/15,a,4*h);return[a,e,31]};return a}();a.SymbolHelper=d;d=function(){function a(){}a.findApplicableOverrides=function(b,c,d){if(c){if(b.primitiveName){for(var e=!1,f=0;f<d.length;f++){var g=d[f];if(g.primitiveName===b.primitiveName){e=!0;break}}if(!e)for(e=0;e<c.length;e++)g=c[e],g.primitiveName===b.primitiveName&&d.push(g)}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(e=0,f=b.effects;e<f.length;e++)g=
f[e],a.findApplicableOverrides(g,c,d);if(b.symbolLayers)for(g=0,b=b.symbolLayers;g<b.length;g++)a.findApplicableOverrides(b[g],c,d);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(b.effects)for(e=0,f=b.effects;e<f.length;e++)g=f[e],a.findApplicableOverrides(g,c,d);b.markerPlacement&&a.findApplicableOverrides(b.markerPlacement,
c,d);if("CIMVectorMarker"===b.type){if(b.markerGraphics)for(g=0,b=b.markerGraphics;g<b.length;g++)e=b[g],a.findApplicableOverrides(e,c,d),a.findApplicableOverrides(e.symbol,c,d)}else"CIMCharacterMarker"===b.type?a.findApplicableOverrides(b.symbol,c,d):"CIMHatchFill"===b.type&&a.findApplicableOverrides(b.lineSymbol,c,d)}}};a.applyOverrides=function(b,c,d,e){if(c){if(b.primitiveName)for(var f=0;f<c.length;f++){var g=c[f];if(g.primitiveName===b.primitiveName){e&&e.push({cim:b,propertyName:g.propertyName,
value:b[g.propertyName]});g.expression&&(g.value=a.toValue(g.propertyName,g.expression));if(d){for(var h=!1,k=0,m=d;k<m.length;k++)m[k].primitiveName===b.primitiveName&&(h=!0);h||d.push(g)}b[g.propertyName]=g.value}}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(g=0,h=b.effects;g<h.length;g++)f=h[g],a.applyOverrides(f,c,d,e);if(b.symbolLayers)for(f=0,b=b.symbolLayers;f<b.length;f++)a.applyOverrides(b[f],c,d,e);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(g=
0,h=b.effects;g<h.length;g++)f=h[g],a.applyOverrides(f,c,d,e);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(f=0,b=b.markerGraphics;f<b.length;f++)g=b[f],a.applyOverrides(g,c,d,e),a.applyOverrides(g.symbol,c,d,e)}}};a.restoreOverrides=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.cim[c.propertyName]=c.value}};a.getOverride=function(b,c,d){if(c&&0!==c.length)for(var e=0;e<b.length;e++){var f=b[e];if(f.primitiveName===c&&f.propertyName===d)return a.toValue(d,f.value)}};a.buildOverrideKey=
function(a){for(var b="",c=0;c<a.length;c++){var d=a[c];void 0!==d.value&&(b+=""+d.primitiveName+d.propertyName+JSON.stringify(d.value))}return b};a.toValue=function(a,b){return"dashTemplate"===a?b.split(" ").map(function(a){return Number(a)}):"color"===a?(a=(new l(b)).toRgba(),a[3]*=255,a):b};return a}();a.OverrideHelper=d})},"esri/symbols/cim/CIMCursor":function(){define(["require","exports","../../geometry/support/jsonUtils","./CIMPlacements"],function(d,a,l,g){function k(a){if(a)for(var b=a.length-
1;0<b;--b)a[b][0]-=a[b-1][0],a[b][1]-=a[b-1][1]}function e(a){if(a)for(var b=0;b<a.length;b++)k(a[b])}function c(a){if(a)for(var b=a.length,c=1;c<b;++c)a[c][0]+=a[c-1][0],a[c][1]+=a[c-1][1]}function h(a){if(a)for(var b=0;b<a.length;b++)c(a[b])}function m(a){a&&a.reverse()}function b(a){return{rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]}}Object.defineProperty(a,"__esModule",{value:!0});a.deltaEncodePath=k;a.deltaEncodeMultipath=e;a.deltaDecodeGeometry=
function(a){l.isPolygon(a)?h(a.rings):l.isPolyline(a)?h(a.paths):l.isMultipoint(a)&&c(a.points);return a};a.deltaEncodeGeometry=function(a){l.isPolygon(a)?e(a.rings):l.isPolyline(a)?e(a.paths):l.isMultipoint(a)&&k(a.points);return a};a.reverseMultipath=function(a){if(a)for(var b=0;b<a.length;b++)m(a[b])};a.reversePath=m;a.getCoord2D=function(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c]};a.isClosedPath=function(a){return a&&0!==a.length?a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]:
!1};a.getId=function(a){return a[4]};a.setId=function(a,b){a[4]=b};d=function(){function a(a,c,d,e){this.acceptPolygon=c;this.acceptPolyline=d;this.geomUnitsPerPoint=e;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;a&&(l.isPolygon(a)?c&&(this.multiPath=a.rings,this.isClosed=!0):l.isPolyline(a)?d&&(this.multiPath=a.paths,this.isClosed=!1):l.isExtent(a)&&c&&(this.multiPath=b(a).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new g.Placement}
a.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var a=this.processPath(this.multiPath[this.pathIndex]);if(a)return a}this.pathIndex=this.pathCount=-1;return this.multiPath=null};a.prototype.processPath=function(a){return null};return a}();a.PathTransformationCursor=d;d=function(){function a(a,b,c,d){this.inputGeometries=a;this.acceptPolygon=b;this.acceptPolyline=c;this.geomUnitsPerPoint=d;this.pathIndex=
this.pathCount=-1;this.iteratePath=!1}a.prototype.next=function(){for(;;){if(!this.multiPath){for(var a=this.inputGeometries.next();a;)if(l.isPolygon(a)?this.acceptPolygon&&(this.multiPath=a.rings,this.isClosed=!0):l.isPolyline(a)?this.acceptPolyline&&(this.multiPath=a.paths,this.isClosed=!1):l.isExtent(a)&&this.acceptPolygon&&(this.multiPath=b(a).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else a=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||
this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,a=this.processPath(this.multiPath[this.pathIndex]))return a;this.pathIndex=this.pathCount=-1;this.multiPath=null}};a.prototype.processPath=function(a){return null};return a}();a.PathGeometryCursor=d})},"esri/symbols/cim/CIMPlacements":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.setIdentity()}a.prototype.setIdentity=function(){this.tz=this.ty=
this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};a.prototype.setTranslate=function(a,d){this.tx=a;this.ty=d};a.prototype.setTranslateZ=function(a){this.tz=a};a.prototype.setRotateCS=function(a,d){this.rz=void 0;this.rz_c=a;this.rz_s=d};a.prototype.setRotate=function(a){this.rz=a;this.rz_s=this.rz_c=void 0};a.prototype.setRotateY=function(a){this.ry=a};a.prototype.setScale=function(a){this.s=a};a.prototype.setMeasure=function(a){this.m=a};return a}();a.Placement=d;d=function(){function a(a){}
a.prototype.next=function(){return null};return a}();a.EmptyPlacementCursor=d})},"esri/symbols/cim/CIMEffects":function(){define(["require","exports","../../core/lang"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this._geometry=a}a.prototype.next=function(){var a=this._geometry;this._geometry=null;return a};return a}();a.SimpleGeometryCursor=d;a.clone=function(a){return l.clone(a)}})},"esri/symbols/cim/CIMOperators":function(){define(["require","exports"],
function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.getEffectOperator=function(a){return null};a.getPlacementOperator=function(a){return null}})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../geometry/support/jsonUtils ../cim/CIMEffects ../cim/CIMOperators ../cim/CIMPlacements ./Rect".split(" "),function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});
a.C_DEG_TO_RAD=Math.PI/180;var f=k.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),p=function(){function a(a){this._t=a}a.createIdentity=function(){return new a([1,0,0,0,1,0])};a.prototype.clone=function(){return new a(this._t.slice())};a.prototype.transform=function(a){var b=this._t;return[b[0]*a[0]+b[1]*a[1]+b[2],b[3]*a[0]+b[4]*a[1]+b[5]]};a.createScale=function(b,c){return new a([b,0,0,0,c,0])};a.prototype.scale=function(a,b){var c=this._t;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b;return this};
a.prototype.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(b,c){return new a([0,0,b,0,0,c])};a.prototype.translate=function(a,b){var c=this._t;c[2]+=a;c[5]+=b;return this};a.createRotate=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,-b,0,b,c,0])};a.prototype.rotate=function(b){return this.multiply(a.createRotate(b))};a.prototype.multiply=function(a){var b=this._t;a=a._t;var c=b[1]*a[0]+b[4]*a[1],d=b[2]*a[0]+b[5]*a[1]+a[2],
e=b[0]*a[3]+b[3]*a[4],f=b[1]*a[3]+b[4]*a[4],g=b[2]*a[3]+b[5]*a[4]+a[5];b[0]=b[0]*a[0]+b[3]*a[1];b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=g;return this};return a}();a.Transformation=p;d=function(){function b(a){this._transfos=[];this._sizeTransfos=[];this._transfos.push(a||p.createIdentity());this._sizeTransfos.push(a?a.scaleRatio():1)}b.prototype.transformPt=function(a){return this._transfos[this._transfos.length-1].transform(a)};b.prototype.transformSize=function(a){return a*this._sizeTransfos[this._sizeTransfos.length-
1]};b.prototype.back=function(){return this._transfos[this._transfos.length-1]};b.prototype.push=function(a){var b=a.scaleRatio();a.multiply(this.back());this._transfos.push(a);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*b)};b.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};b.prototype.drawSymbol=function(a,b){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(a,b)}};b.prototype.drawMultiLayerSymbol=
function(a,b){if(a){var c=a.symbolLayers;if(c)if(a=a.effects){if(b=this.executeEffects(a,b))for(a=b.next();a;)this.drawSymbolLayers(c,a),a=b.next()}else this.drawSymbolLayers(c,b)}};b.prototype.executeEffects=function(a,b){var d=96/72;b=new c.SimpleGeometryCursor(b);for(var e=a?a.length:0,f=0;f<e;++f){var g=a[f];if(g){var k=h.getEffectOperator(g);k&&(b=k.execute(b,g,d))}}return b};b.prototype.drawSymbolLayers=function(a,b){for(var c=a.length;c--;){var d=a[c];if(d&&!1!==d.enable){var e=d.effects;if(e){if(e=
this.executeEffects(e,b))for(var f=e.next();f;)this.drawSymbolLayer(d,f),f=e.next()}else this.drawSymbolLayer(d,b)}}};b.prototype.drawSymbolLayer=function(a,b){switch(a.type){case "CIMSolidFill":this.drawSolidFill(b,a.color);break;case "CIMSolidStroke":this.drawSolidStroke(b,a.color,a.width);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(a,b)}};b.prototype.drawMarkerLayer=function(a,b){var c=a.markerPlacement;if(c){var d=96/72,e=h.getPlacementOperator(c);
if(e&&(b=e.execute(b,c,d)))for(c=b.next();c;)this.drawMarker(a,c),c=b.next()}else c=new m.Placement,c.tx=b.x,c.ty=b.y,this.drawMarker(a,c)};b.prototype.drawMarker=function(a,b){switch(a.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(a,b);break;case "CIMVectorMarker":this.drawVectorMarker(a,b)}};b.prototype.drawPictureMarker=function(a,b){};b.prototype.drawVectorMarker=function(b,c){if(b){var d=b.markerGraphics;if(d){var e=b.size,g=b.frame,h=g?g.ymax-g.ymin:0,e=e&&h?
e/h:1,h=p.createIdentity();g&&h.translate(.5*-(g.xmax+g.xmin),.5*-(g.ymax+g.ymin));var k=b.anchorPoint;if(k){var m=k.x,k=k.y;"Absolute"!==b.anchorPointUnits&&g&&(m*=g.xmax-g.xmin,k*=g.ymax-g.ymin);h.translate(-m,-k)}1!==e&&h.scale(e,e);b.rotation&&h.rotate(b.rotation*a.C_DEG_TO_RAD);h.translate(b.offsetX||0,b.offsetY||0);h.translate(c.tx,c.ty);this.push(h);for(b=0;b<d.length;b++)(c=d[b])&&c.symbol&&c.geometry||f.error("Invalid marker graphic",c),this.drawSymbol(c.symbol,c.geometry);this.pop()}}};
b.prototype.drawSolidFill=function(a,b){};b.prototype.drawSolidStroke=function(a,b,c){};return b}();a.CIMSymbolDrawHelper=d;g=function(a){function c(){var b=a.call(this)||this;b.reset();return b}l(c,a);c.prototype.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity};c.prototype.envelope=function(){return new b.default(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};c.prototype._merge=function(a,b){a[0]-b<this._xmin&&(this._xmin=a[0]-b);a[0]+b>this._xmax&&
(this._xmax=a[0]+b);a[1]-b<this._ymin&&(this._ymin=a[1]-b);a[1]+b>this._ymax&&(this._ymax=a[1]+b)};c.prototype.drawSolidFill=function(a,b){if(a&&a.rings)for(b=0,a=a.rings;b<a.length;b++){var c=a[b],d=c?c.length:0;if(2<d){this._merge(this.transformPt(c[0]),0);for(var e=1;e<d;++e)this._merge(this.transformPt(c[e]),0)}}};c.prototype.drawSolidStroke=function(a,b,c){b=.5*this.transformSize(c);if(a=e.isPolygon(a)?a.rings:a.paths)for(c=0;c<a.length;c++){var d=a[c],f=d?d.length:0;if(1<f){this._merge(this.transformPt(d[0]),
b);for(var g=1;g<f;++g)this._merge(this.transformPt(d[g]),b)}}};return c}(d);a.EnvDrawHelper=g;d=function(a){function b(b,c){c=a.call(this,c)||this;c._ctx=b;return c}l(b,a);b.prototype.drawSolidFill=function(a,b){if(a&&a.rings){var c=this._ctx;c.fillStyle="string"===typeof b?b:"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";c.beginPath();b=0;for(a=a.rings;b<a.length;b++){var d=a[b],e=d?d.length:0;if(2<e){var f=this.transformPt(d[0]);c.moveTo(f[0],f[1]);for(var g=
1;g<e;++g)f=this.transformPt(d[g]),c.lineTo(f[0],f[1]);c.closePath()}}c.fill("evenodd")}};b.prototype.drawSolidStroke=function(a,b,c){var d=this._ctx;d.strokeStyle="string"===typeof b?b:"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";d.lineWidth=this.transformSize(c)+.5;d.beginPath();b=!1;e.isPolygon(a)?(c=a.rings,b=!0):c=a.paths;for(a=0;a<c.length;a++){var f=c[a],g=f?f.length:0;if(1<g){var h=this.transformPt(f[0]);d.moveTo(h[0],h[1]);for(var k=1;k<g;++k)h=this.transformPt(f[k]),
d.lineTo(h[0],h[1]);b&&d.closePath()}}d.stroke()};return b}(d);a.CanvasDrawHelper=d})},"esri/symbols/cim/Rect":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,d,e,c){void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===c&&(c=0);this.x=a;this.y=d;this.width=e;this.height=c}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});a.prototype.union=
function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.width=Math.max(this.width,a.width);this.height=Math.max(this.height,a.height)};return a}();a.default=d})},"esri/symbols/cim/packingUtils":function(){define(["require","exports"],function(d,a){function l(a){return a-Math.floor(a)}Object.defineProperty(a,"__esModule",{value:!0});var g=[1,256,65536,16777216],k=[1/256,1/65536,1/16777216,1/4294967296],e=function(a,d){void 0===d&&(d=0);for(var c=0,b=0;4>b;b++)c+=a[d+b]*k[b];return c}(new Uint8ClampedArray([255,
255,255,255]));a.packFloatRGBA=function(a,d,k){void 0===k&&(k=0);a=0>a?0:a>e?e:a;for(var b=0;4>b;b++)d[k+b]=Math.floor(256*l(a*g[b]))}})},"esri/symbols/cim/SDFHelper":function(){define(["require","exports","../../geometry/support/jsonUtils","./packingUtils","./Rect"],function(d,a,l,g,k){function e(a){if(!a)return null;switch(a.type){case "CIMPointSymbol":a=a.symbolLayers;if(!a||1!==a.length)break;return e(a[0]);case "CIMVectorMarker":a=a.markerGraphics;if(!a||1!==a.length)break;var c=a[0];if(!c)break;
a=c.geometry;if(!a)break;c=c.symbol;if(!c||"CIMPolygonSymbol"!==c.type&&"CIMLineSymbol"!==c.type)break;return{geom:a,asFill:"CIMPolygonSymbol"===c.type};case "sdf":return{geom:a.geom,asFill:a.asFill}}return null}function c(a){for(var c=Infinity,b=-Infinity,d=Infinity,e=-Infinity,g=0;g<a.length;g++)for(var h=0,k=a[g];h<k.length;h++){var l=k[h];l[0]<c&&(c=l[0]);l[0]>b&&(b=l[0]);l[1]<d&&(d=l[1]);l[1]>e&&(e=l[1])}return[c,d,b,e]}Object.defineProperty(a,"__esModule",{value:!0});a.getSDFInfo=e;a.getSDFSymbol=
function(a){a=a.markerGraphics;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;a=a.symbol;return!a||"CIMPolygonSymbol"!==a.type&&"CIMLineSymbol"!==a.type?null:a};a.getExtent=function(a){return a?a.rings?c(a.rings):a.paths?c(a.paths):l.isExtent(a)?[a.xmin,a.ymin,a.xmax,a.ymax]:null:null};a.getSDFMetrics=function(a,c,b,d,e){var f=a[0],g=a[1],h=a[2];a=a[3];if(h<f||a<g)return[0,0,0];var k=h-f,m=a-g,h=Math.floor(31.5);a=(128-2*(h+1))/Math.max(k,m);var k=Math.round(k*a),m=Math.round(m*a)+2*h,l=
1;c&&(l=m/a/(c.ymax-c.ymin));var p=0,A=0;d&&(e?c&&b&&0<c.ymax-c.ymin&&(p=d.x/((c.xmax-c.xmin)/(c.ymax-c.ymin)*b),A=d.y/b):(p=d.x,A=d.y));p=.5*(c.xmax+c.xmin)+p*(c.xmax-c.xmin);A=.5*(c.ymax+c.ymin)+A*(c.ymax-c.ymin);p=(p-f)*a+h;A=(A-g)*a+h;return[l,p/(k+2*h)-.5,-(A/m-.5)]};a.buildSDF=function(a){var c,b=a.geom;c=b?b.rings?b.rings:b.paths?b.paths:void 0!==b.xmin&&void 0!==b.ymin&&void 0!==b.xmax&&void 0!==b.ymax?[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]:null:
null;var d,b=Infinity,e=-Infinity,h=Infinity,l=-Infinity;for(d=0;d<c.length;d++)for(var r=0,w=c[d];r<w.length;r++){var t=w[r];t[0]<b&&(b=t[0]);t[0]>e&&(e=t[0]);t[1]<h&&(h=t[1]);t[1]>l&&(l=t[1])}d=new k.default(b,h,e-b,l-h);h=Math.floor(31.5);r=(128-2*(h+1))/Math.max(d.width,d.height);b=Math.round(d.width*r)+2*h;e=Math.round(d.height*r)+2*h;l=[];for(w=0;w<c.length;w++){var y=c[w];if(y&&1<y.length){for(var t=[],x=0;x<y.length;x++){var A=y[x],z=A[0],A=A[1],z=z-d.x,A=A-d.y,z=z*r,A=A*r,z=z+(h-.5),A=A+
(h-.5);t.push([z,A])}a.asFill&&(x=t.length-1,t[0][0]===t[x][0]&&t[0][1]===t[x][1]||t.push(t[0]));l.push(t)}}d=b*e;c=Array(d);w=h*h+1;for(r=0;r<d;++r)c[r]=w;for(w=0;w<l.length;w++)for(t=l[w],x=t.length,r=1;r<x;++r){var y=t[r-1],z=t[r],C=void 0,A=void 0;y[0]<z[0]?(C=y[0],A=z[0]):(C=z[0],A=y[0]);var D=void 0,B=void 0;y[1]<z[1]?(D=y[1],B=z[1]):(D=z[1],B=y[1]);var E=Math.floor(C)-h,A=Math.floor(A)+h,D=Math.floor(D)-h,B=Math.floor(B)+h;0>E&&(E=0);A>b&&(A=b);0>D&&(D=0);B>e&&(B=e);for(var C=z[0]-y[0],F=z[1]-
y[1],H=C*C+F*F;E<A;E++)for(var G=D;G<B;G++){var J=(E-y[0])*C+(G-y[1])*F,K=void 0,I=void 0;0>J?(K=y[0],I=y[1]):J>H?(K=z[0],I=z[1]):(J/=H,K=y[0]+J*C,I=y[1]+J*F);J=(E-K)*(E-K)+(G-I)*(G-I);K=(e-G-1)*b+E;J<c[K]&&(c[K]=J)}}for(r=0;r<d;++r)c[r]=Math.sqrt(c[r]);if(a.asFill)for(a=0;a<l.length;a++)for(d=l[a],r=d.length,w=1;w<r;++w)for(t=d[w-1],x=d[w],z=y=void 0,t[0]<x[0]?(y=t[0],z=x[0]):(y=x[0],z=t[0]),A=D=void 0,t[1]<x[1]?(D=t[1],A=x[1]):(D=x[1],A=t[1]),y=Math.floor(y),z=Math.floor(z)+1,D=Math.floor(D),A=
Math.floor(A)+1,y<h&&(y=h),z>b-h&&(z=b-h),D<h&&(D=h),A>e-h&&(A=e-h);D<A;++D)if(t[1]>D!==x[1]>D){B=(e-D-1)*b;for(C=y;C<z;++C)C<(x[0]-t[0])*(D-t[1])/(x[1]-t[1])+t[0]&&(c[B+C]=-c[B+C]);for(C=h;C<y;++C)c[B+C]=-c[B+C]}h*=2;l=c.length;a=new Uint8Array(4*l);for(d=0;d<l;++d)g.packFloatRGBA(.5-c[d]/h,a,4*d);return[a,b,e]}})},"esri/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(d,a){function l(a){a=a.toLowerCase().split(" ").join("-");switch(a){case "serif":return"noto-serif";
case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return a}}Object.defineProperty(a,"__esModule",{value:!0});a.getFullyQualifiedFontName=function(a){var d;a:{if(a.weight)switch(a.weight.toLowerCase()){case "bold":case "bolder":d="-bold";break a}d=""}var e;a:{if(a.style)switch(a.style.toLowerCase()){case "italic":case "oblic":e="-italic";break a}e=""}d+=e;return l(a.family)+(0<d.length?d:"-regular")};
a.getFontDecorationTop=function(a){switch(a){case "underline":return-26;case "line-through":return-18}return NaN}})},"esri/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports ../../../../core/has ../../../../core/promiseUtils ../../../webgl ./Rect ./RectangleBinPack".split(" "),function(d,a,l,g,k,e,c){return function(){function a(a,b,d){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;
this.width=a;this.height=b;this._glyphSource=d;this._binPack=new c(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0);this._addDecorationGlyph()}a.prototype.getGlyphItems=function(a,b,c){for(var d=this,e=[],f=this._glyphSource,h=new Set,k=1/256,m=0;m<b.length;m++)h.add(Math.floor(b[m]*k));var l=[];h.forEach(function(b){if(256>=b){var e=a+b;d._rangePromises.has(e)?l.push(d._rangePromises.get(e)):(b=f.getRange(a,b,c).then(function(){d._rangePromises["delete"](e)}).catch(function(a){d._rangePromises["delete"](e);
if(!g.isAbortError(a))throw Error("Unable to query resource");}),d._rangePromises.set(e,b),l.push(b))}});return g.all(l).then(function(c){var g=d._glyphIndex[a];g||(g={},d._glyphIndex[a]=g);for(var h=0;h<b.length;h++){c=b[h];var k=g[c];if(k)e[c]={sdf:!0,rect:k.rect,metrics:k.metrics,page:k.page};else if((k=f.getGlyph(a,c))&&k.metrics){var m=d._recordGlyph(k,c);g[c]={rect:m,metrics:k.metrics,tileIDs:null,page:d._currentPage};e[c]={sdf:!0,rect:m,metrics:k.metrics,page:d._currentPage};d._dirties[d._currentPage]=
!0}}return e})};a.prototype._recordGlyph=function(a,b){var d=a.metrics;if(0===d.width)d=new e.default(0,0,0,0);else{b=d.width+6;var g=d.height+6,h=b%4?4-b%4:4,k=g%4?4-g%4:4;1===h&&(h=5);1===k&&(k=5);d=this._binPack.allocate(b+h,g+k);d.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new c(this.width-
4,this.height-4),d=this._binPack.allocate(b+h,g+k));h=this._glyphData[this._currentPage];a=a.bitmap;var m=k=void 0;if(a)for(var l=0;l<g;l++)for(var k=b*l,m=this.width*(d.y+l+1)+d.x,t=0;t<b;t++)h[m+t+1]=a[k+t]}return d};a.prototype._addDecorationGlyph=function(){for(var a=[117,149,181,207,207,181,149,117],b=[],c=0;c<a.length;c++)for(var d=a[c],e=0;11>e;e++)b.push(d);a={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(b)};this._recordGlyph(a,0)};a.prototype.bind=function(a,b,
c,d){this._textures[c]||(this._textures[c]=new k.Texture(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&e.setData(this._glyphData[c]);a.bindTexture(e,d);this._dirties[c]=!1};a.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0;this._glyphData.length=0};return a}()})},"esri/views/2d/engine/webgl/RectangleBinPack":function(){define(["require",
"exports","./Rect"],function(d,a,l){return function(){function a(a,d){this._height=this._width=0;this._free=[];this._width=a;this._height=d;this._free.push(new l.default(0,0,a,d))}Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});a.prototype.allocate=function(a,d){if(a>this._width||d>this._height)return new l.default;for(var c=
null,e=-1,g=0;g<this._free.length;++g){var b=this._free[g];a<=b.width&&d<=b.height&&(null===c||b.y<=c.y&&b.x<=c.x)&&(c=b,e=g)}if(null===c)return new l.default;this._free.splice(e,1);c.width<c.height?(c.width>a&&this._free.push(new l.default(c.x+a,c.y,c.width-a,d)),c.height>d&&this._free.push(new l.default(c.x,c.y+d,c.width,c.height-d))):(c.width>a&&this._free.push(new l.default(c.x+a,c.y,c.width-a,c.height)),c.height>d&&this._free.push(new l.default(c.x,c.y+d,a,c.height-d)));return new l.default(c.x,
c.y,a,d)};a.prototype.release=function(a){for(var d=0;d<this._free.length;++d){var c=this._free[d];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else if(a.x===c.x&&a.width===c.width&&a.y+a.height===c.y)c.y=a.y,c.height+=a.height;else continue;this._free.splice(d,1);this.release(a)}this._free.push(a)};return a}()})},"esri/views/2d/engine/webgl/GlyphSource":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../request ../../../../core/pbf ../../../../core/promiseUtils".split(" "),
function(d,a,l,g,k,e){var c=function(){function a(a){this._metrics=[];for(this._bitmaps=[];a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=void 0,e=void 0,g=void 0,h=void 0,k=void 0,m=void 0,l=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();break;case 2:e=c.getBytes();break;case 3:g=c.getUInt32();break;case 4:h=c.getUInt32();break;case 5:k=c.getSInt32();break;case 6:m=c.getSInt32();break;case 7:l=c.getUInt32();break;default:c.skip()}d&&
(this._metrics[d]={width:g,height:h,left:k,top:m,advance:l},this._bitmaps[d]=e);break;default:b.skip()}break;default:a.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),h=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,c){this._ranges[a]=c};return a}();return function(){function a(a){this._glyphInfo={};this._baseURL=a}a.prototype.getRange=
function(a,d,h){var b=this._getFontStack(a);if(b.getRange(d))return e.resolve();var f=256*d,m=f+255;a=this._baseURL.replace("{fontstack}",a).replace("{range}",f+"-"+m);return g(a,l({responseType:"array-buffer"},h)).then(function(a){b.addRange(d,new c(new k(new Uint8Array(a.data),new DataView(a.data))))})};a.prototype.getGlyph=function(a,c){if(a=this._getFontStack(a)){var b=Math.floor(c/256);if(!(256<b)&&(a=a.getRange(b)))return{metrics:a.getMetrics(c),bitmap:a.getBitmap(c)}}};a.prototype._getFontStack=
function(a){var b=this._glyphInfo[a];b||(b=this._glyphInfo[a]=new h);return b};return a}()})},"esri/views/2d/engine/webgl/SDFConverter":function(){define(["require","exports","../../../../core/promiseUtils","../../../../core/promiseUtils","./packingUtils"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.size=a;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=a;this.context=this.canvas.getContext("2d");this._gridOuter=
new Float64Array(a*a);this._gridInner=new Float64Array(a*a);this._f=new Float64Array(a);this._d=new Float64Array(a);this._z=new Float64Array(a+1);this._v=new Int16Array(a);a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("style","position: absolute;");a.setAttribute("width","0");a.setAttribute("height","0");document.body.appendChild(a);this._svg=a}a.prototype.draw=function(a,d,e){var b=this;void 0===e&&(e=31);var c=this._createSVGString(a);return l.create(function(a,f){var h=
new Image;h.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(c);h.onload=function(){b.context.clearRect(0,0,b.size,b.size);b.context.drawImage(h,0,0,b.size,b.size);for(var c=b.context.getImageData(0,0,b.size,b.size),d=new Uint8Array(b.size*b.size*4),f=0;f<b.size*b.size;f++){var g=c.data[4*f+3]/255;b._gridOuter[f]=1===g?0:0===g?1E20:Math.pow(Math.max(0,.5-g),2);b._gridInner[f]=1===g?1E20:0===g?0:Math.pow(Math.max(0,g-.5),2)}b._edt(b._gridOuter,b.size,b.size);b._edt(b._gridInner,b.size,
b.size);for(f=0;f<b.size*b.size;f++)k.packFloatRGBA(.5-(b._gridOuter[f]-b._gridInner[f])/(2*e),d,4*f);a(d)};var m=d&&d.signal;if(m)g.onAbort(m,function(){return f(g.createAbortError())})})};a.prototype._createSVGString=function(a){var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",a);this._svg.appendChild(c);a=c.getBBox();var d=a.width/a.height,b=this.size/2,e,g,k;1<d?(g=e=b/a.width,k=this.size/4,d=b-1/d*b/2):(e=g=b/a.height,k=b-b*d/2,d=this.size/4);c.setAttribute("style",
"transform: matrix("+e+", 0, 0, "+g+", "+(-a.x*e+k)+", "+(-a.y*g+d)+")");a='\x3csvg style\x3d"fill:red;" height\x3d"'+this.size+'" width\x3d"'+this.size+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e'+this._svg.innerHTML+"\x3c/svg\x3e";this._svg.removeChild(c);return a};a.prototype._edt=function(a,d,e){for(var b=this._f,c=this._d,g=this._v,h=this._z,k=0;k<d;k++){for(var m=0;m<e;m++)b[m]=a[m*d+k];this._edt1d(b,c,g,h,e);for(m=0;m<e;m++)a[m*d+k]=c[m]}for(m=0;m<e;m++){for(k=0;k<d;k++)b[k]=a[m*d+k];this._edt1d(b,
c,g,h,d);for(k=0;k<d;k++)a[m*d+k]=Math.sqrt(c[k])}};a.prototype._edt1d=function(a,d,e,b,f){e[0]=0;b[0]=-1E20;b[1]=1E20;for(var c=1,g=0;c<f;c++){for(var h=(a[c]+c*c-(a[e[g]]+e[g]*e[g]))/(2*c-2*e[g]);h<=b[g];)g--,h=(a[c]+c*c-(a[e[g]]+e[g]*e[g]))/(2*c-2*e[g]);g++;e[g]=c;b[g]=h;b[g+1]=1E20}for(g=c=0;c<f;c++){for(;b[g+1]<c;)g++;d[c]=(c-e[g])*(c-e[g])+a[e[g]]}};return a}();a.default=d})},"esri/views/2d/engine/webgl/packingUtils":function(){define(["require","exports"],function(d,a){function l(a){return a-
Math.floor(a)}Object.defineProperty(a,"__esModule",{value:!0});var g=[1,256,65536,16777216],k=[1/256,1/65536,1/16777216,1/4294967296],e=function(a,d){void 0===d&&(d=0);for(var c=0,b=0;4>b;b++)c+=a[d+b]*k[b];return c}(new Uint8ClampedArray([255,255,255,255]));a.packFloatRGBA=function(a,d,k){void 0===k&&(k=0);a=0>a?0:a>e?e:a;for(var b=0;4>b;b++)d[k+b]=Math.floor(256*l(a*g[b]))}})},"esri/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ../../../../core/has ../../../webgl ./GeometryUtils ./Rect ./RectangleBinPack".split(" "),
function(d,a,l,g,k,e,c){return function(){function a(a,b,d){void 0===d&&(d=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._currentPage=this._maxItemSize=0;this._fixSpriteLocationsTable=l("fix-sprite-locations");this._pageHeight=this._pageWidth=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=a||0>=b)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=b;0<d&&(this._maxItemSize=
d);this.pixelRatio=window.devicePixelRatio||1;if(this._fixSpriteLocationsTable){a=[];for(var e in this._fixSpriteLocationsTable)b=this._fixSpriteLocationsTable[e],a[b.page]=b.pageSize;for(e=0;e<a.length;e++)b=a[e],this._mosaicsData.push(new Uint32Array(b[0]*b[1])),this._dirties.push(!0),this._size.push([b[0],b[1]]),this._textures.push(void 0)}this._binPack=new c(this._pageWidth-4,this._pageHeight-4);this._mosaicsData.push(new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight)));
this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}a.prototype.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};a.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};a.prototype.getPage=function(a){return a<this._textures.length?this._textures[a]:null};a.prototype.has=function(a){return this._mosaicRects.has(a)};Object.defineProperty(a.prototype,"itemCount",{get:function(){return this._mosaicRects.size},
enumerable:!0,configurable:!0});a.prototype.getSpriteItem=function(a){return this._mosaicRects.get(a)};a.prototype.addSpriteItem=function(a,b,c,d,e,g){var f;if(this._mosaicRects.has(a))return this._mosaicRects.get(a);var h,k;this._fixSpriteLocationsTable&&this._fixSpriteLocationsTable[a]?(f=this._fixSpriteLocationsTable[a],h=f.rect,k=f.page,f=f.pageSize):(f=this._allocateImage(b[0],b[1]),h=f[0],k=f[1],f=f[2]);if(0>=h.width||0>=h.height)return null;g={rect:h,width:b[0],height:b[1],sdf:e,simplePattern:g,
pixelRatio:1,page:k};this._mosaicRects.set(a,g);this._copy({rect:h,spriteSize:b,spriteData:c,page:k,pageSize:f,repeat:d,sdf:e});return g};a.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};a.prototype.processNextItem=function(){var a=this._spriteCopyQueue.pop();a&&this._copy(a)};a.prototype.getSpriteItems=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b};a.prototype.getMosaicItemPosition=function(a,b){b=(a=this.getSpriteItem(a))&&
a.rect;if(!b)return null;b.width=a.width;b.height=a.height;return{size:[a.width,a.height],tl:[(b.x+1)/this._size[a.page][0],(b.y+1)/this._size[a.page][1]],br:[(b.x+1+a.width)/this._size[a.page][0],(b.y+1+a.height)/this._size[a.page][1]],page:a.page}};a.prototype.bind=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this._textures[c]||(this._textures[c]=new g.Texture(a,{pixelFormat:6408,dataType:5121,width:this._size[c][0],height:this._size[c][1]},new Uint8Array(this._mosaicsData[c].buffer)));
var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&(e.setData(new Uint8Array(this._mosaicsData[c].buffer)),e.generateMipmap());a.bindTexture(e,d);this._dirties[c]=!1};a._copyBits=function(a,b,c,d,e,g,h,k,l,y,x){var f=d*b+c;h=k*g+h;if(x)for(h-=g,x=-1;x<=y;x++,f=((x+y)%y+d)*b+c,h+=g)for(k=-1;k<=l;k++)e[h+k]=a[f+(k+l)%l];else for(x=0;x<y;x++){for(k=0;k<l;k++)e[h+k]=a[f+k];f+=b;h+=g}};a.prototype._copy=function(c){if(!(c.page>=this._mosaicsData.length)){var b=c.spriteData,d=this._mosaicsData[c.page];
d&&b||console.error("Source or target images are uninitialized!");a._copyBits(b,c.spriteSize[0],0,0,d,c.pageSize[0],c.rect.x+1,c.rect.y+1,c.spriteSize[0],c.spriteSize[1],c.repeat);this._dirties[c.page]=!0}};a.prototype._allocateImage=function(a,b){a+=2;b+=2;var d=Math.max(a,b);if(this._maxItemSize&&this._maxItemSize<d){var d=Math.pow(2,Math.ceil(k.log2(a))),g=Math.pow(2,Math.ceil(k.log2(b)));a=new e.default(0,0,a,b);this._mosaicsData.push(new Uint32Array(d*g));this._dirties.push(!0);this._size.push([d,
g]);this._textures.push(void 0);return[a,this._mosaicsData.length-1,[d,g]]}d=this._binPack.allocate(a+(a%4?4-a%4:0),b+(b%4?4-b%4:0));return 0>=d.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new c(this._pageWidth-4,this._pageHeight-
4),this._allocateImage(a,b)):[d,this._currentPage,[this._pageWidth,this._pageHeight]]};a.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return a}()})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/Error ../../../../core/Logger ../../../../core/screenUtils ../../../../symbols/cim/enums ../../../webgl ./color ./enums ./SymbolProperties ../../support/mathUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function n(a){switch(a){case b.WGLGeometryType.MARKER:return C;case b.WGLGeometryType.FILL:return D;case b.WGLGeometryType.LINE:return B;case b.WGLGeometryType.TEXT:return E;case b.WGLGeometryType.LABEL:return F}return null}function r(a){switch(a%4){case 0:case 2:return 4;case 1:case 3:return 1}}function w(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function t(a){return"string"===typeof a}function y(a){switch(a){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function x(a){var b={},c=function(c){var d=0;b[c]=a[c].map(function(a){var b=l({},a,{normalized:a.normalized||!1,divisor:a.divisor||0,offset:d,stride:0});d+=a.count*
y(a.type);return b});b[c].forEach(function(a){return a.stride=d})},d;for(d in a)c(d);return b}Object.defineProperty(a,"__esModule",{value:!0});var A,z=k.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV="per_instance_vv";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];a.C_FILL_VERTEX_DEF_DD=[{name:a.C_VBO_GEOMETRY,
strideInBytes:12,divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];a.C_LABEL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];a.C_ICON_STRIDE_SPEC=u(a.C_ICON_VERTEX_DEF);a.C_FILL_STRIDE_SPEC=u(a.C_FILL_VERTEX_DEF);a.C_FILL_STRIDE_SPEC_DD=u(a.C_FILL_VERTEX_DEF_DD);a.C_LINE_STRIDE_SPEC=u(a.C_LINE_VERTEX_DEF);a.C_TEXT_STRIDE_SPEC=u(a.C_TEXT_VERTEX_DEF);a.C_LABEL_STRIDE_SPEC=u(a.C_LABEL_VERTEX_DEF);
a.getStrides=function(c,d){switch(c){case b.WGLGeometryType.MARKER:return a.C_ICON_STRIDE_SPEC;case b.WGLGeometryType.FILL:return d?a.C_FILL_STRIDE_SPEC_DD:a.C_FILL_STRIDE_SPEC;case b.WGLGeometryType.LINE:return a.C_LINE_STRIDE_SPEC;case b.WGLGeometryType.TEXT:return a.C_TEXT_STRIDE_SPEC;case b.WGLGeometryType.LABEL:return a.C_LABEL_STRIDE_SPEC}return null};var C=[a.C_VBO_GEOMETRY],D=[a.C_VBO_GEOMETRY],B=[a.C_VBO_GEOMETRY],E=[a.C_VBO_GEOMETRY],F=[a.C_VBO_GEOMETRY];a.getNamedBuffers=n;a.strideToPackingFactor=
r;a.allocateTypedArrayBuffer=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(Math.floor(a*b/4));case 1:case 3:return new Uint8Array(a*b)}};a.allocateTypedArrayBufferwithData=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(a);case 1:case 3:return new Uint8Array(a)}};a.normalizeSymbolType=w;a.isMarkerSymbol=function(a){if(a=w(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0;case "CIMVectorMarker":case "CIMPictureMarker":case "CIMCharacterMarker":return!0}return!1}};
a.isFillSymbol=function(a){if(a=w(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}};a.isLineSymbol=function(a){if(a=w(a.type)){switch(a){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}};a.isPictureSymbol=function(a){if(a=w(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0;case "CIMPictureMarker":return!0}return!1};a.isTextSymbol=function(a){if(a=w(a.type)){switch(a){case "text":return!0;
case "CIMTextSymbol":return!0}return!1}};a.getTextProperties=function(a){return f.TextProperties.pool.acquire(a.color?m.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?m.copyAndPremultiply(a.haloColor):[255,255,255,255],e.pt2px(a.haloSize),e.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};a.isDefined=function(a){return null!=
a};a.isNumber=function(a){return"number"===typeof a};a.isString=t;a.isStringOrNull=function(a){return null==a||t(a)};a.lerp=function(a,b,c){return a+(b-a)*c};d=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.KeysGetter=d;d=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,
b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.ValuesGetter=d;a.getCapType=function(a,b){switch(a){case "butt":return c.CapType.BUTT;case "round":return b?c.CapType.SQUARE:c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return z.error(new g("mapview-invalid-type","Cap type "+a+" is not a valid option. Defaulting to round")),c.CapType.ROUND}};a.getJoinType=function(a){switch(a){case "miter":return c.JoinType.MITER;
case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return z.error(new g("mapview-invalid-type","Join type "+a+" is not a valid option. Defaulting to round")),c.JoinType.ROUND}};a.getVVType=function(a){switch(a){case "opacity":return b.VVType.OPACITY;case "color":return b.VVType.COLOR;case "rotation":return b.VVType.ROTATION;case "size":return b.VVType.SIZE;default:return z.error("Cannot interpret unknown vv: "+a),null}};a.getTransformParams=function(a){return{transform:a.transform,
hasZ:a.hasZ,hasM:a.hasM}};a.copyMeshData=function(a,b,c,d,e,f,g){for(var h in f)for(var k=f[h].stride,l=r(k),m=f[h].data,n=c[h].data,p=k*e.vertexCount/l,t=k*a/l,l=k*e.vertexFrom/l,k=0;k<p;++k)n[k+t]=m[k+l];c=e.indexCount;for(k=0;k<c;++k)d[k+b]=g[k+e.indexFrom]-e.vertexFrom+a};a.C_VBO_INFO=(A={},A[a.C_VBO_GEOMETRY]=35044,A);a.createGeometryData=function(a,b){for(var c=[],d=0;5>d;++d){for(var e={},f=0,g=n(d);f<g.length;f++){var h=g[f];e[h]={data:b(d,h)}}c.push({data:a(d),buffers:e})}return c};a.resampleHermite=
function(a,b,c,d,e,f,g){void 0===g&&(g=!0);var h=b/e;c/=f;for(var k=Math.ceil(h/2),l=Math.ceil(c/2),m=0;m<f;m++)for(var n=0;n<e;n++){for(var p=4*(n+(g?f-m-1:m)*e),t=0,r=0,u=0,x=0,y=0,w=0,z=0,F=(m+.5)*c,E=Math.floor(m*c);E<(m+1)*c;E++)for(var A=Math.abs(F-(E+.5))/l,D=(n+.5)*h,A=A*A,I=Math.floor(n*h);I<(n+1)*h;I++){var C=Math.abs(D-(I+.5))/k,t=Math.sqrt(A+C*C);-1<=t&&1>=t&&(t=2*t*t*t-3*t*t+1,0<t&&(C=4*(I+E*b),z+=t*a[C+3],u+=t,255>a[C+3]&&(t=t*a[C+3]/250),x+=t*a[C],y+=t*a[C+1],w+=t*a[C+2],r+=t))}d[p]=
x/r;d[p+1]=y/r;d[p+2]=w/r;d[p+3]=z/u}};a.createTextureFromTexelData=function(a,b){var c,d;p.isPowerOfTwo(b.width)&&p.isPowerOfTwo(b.height)?(c=!0,d=9987):(c=!1,d=9729);return new h.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:c,samplingMode:d,wrapMode:33071,flipped:!0},b)};a.geometryToMappedGeometry=function(a){return{vertexFrom:void 0,vertexTo:void 0,geometry:a}};a.getBytes=y;a.getPixelBytes=function(a){switch(a){case 5121:return 1;case 32819:return 2;case 5126:return 4;
default:z.error(new g("webgl-utils","Unable to handle type "+a))}};a.getPixelArrayCtor=function(a){switch(a){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:z.error(new g("webgl-utils","Unable to handle type "+a))}};var H=new Map;a.createProgramDescriptor=function(a,b){if(!H.has(a)){var c=x(b),d={},e;for(e in c){var f=c[e];d[e]=f.length?f[0].stride:0}e={};for(var g in b)for(var f=0,h=b[g];f<h.length;f++){var k=h[f];e[k.name]=k.location}H.set(a,{strides:d,
bufferLayouts:c,attributes:e})}return H.get(a)}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(d,a,l){function g(a,d){Array.isArray(d)?(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3]):(a[0]=d.r,a[1]=d.g,a[2]=d.b,a[3]=d.a);return a}function k(a,d,e){void 0===d&&(d=0);void 0===e&&(e=!1);var b=a[d+3];a[d+0]*=b;a[d+1]*=b;a[d+2]*=b;e||(a[d+3]*=255);return a}Object.defineProperty(a,"__esModule",{value:!0});a.white=[255,255,255,1];var e=[0,0,0,0];a.premultiplyAlpha=
k;a.copyAndPremultiply=function(a){return k(g([],a))};a.premultiplyAlphaUint32=function(a){k(g(e,a));return l.i8888to32(e[0],e[1],e[2],e[3])};a.premultiplyAlphaRGBA=function(a){var c=a.a;return l.i8888to32(a.r*c,a.g*c,a.b*c,255*c)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports"],function(d,a){function l(a,c,d){return Math.round(Math.max(Math.min(a,d),c))}Object.defineProperty(a,"__esModule",{value:!0});var g=new Float32Array(1),k=new Uint32Array(g.buffer);a.i8=function(a){return l(a,
-128,127)};a.i16=function(a){return l(a,-32768,32767)};a.i32=function(a){return l(a,-2147483648,2147483647)};a.u8=function(a){return l(a,0,255)};a.u16=function(a){return l(a,0,65535)};a.u32=function(a){return l(a,0,4294967295)};a.nextHighestPowerOfTwo=function(a){var c=a;c--;c|=c>>1;c|=c>>2;c|=c>>4;c|=c>>8;c|=c>>16;c++;var d=c>>1;return c-a>a-d?d:c};a.toUint32=function(a){g[0]=a;return k[0]};a.toFloat32=function(a){k[0]=a;return g[0]};a.i1616to32=function(a,c){return 65535&a|c<<16};a.i8888to32=function(a,
c,d,g){return a&255|(c&255)<<8|(d&255)<<16|g<<24};a.i8816to32=function(a,c,d){return a&255|(c&255)<<8|d<<16};a.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=
function(a,d,c,g,l,b,f,p,u){this.color=a;this.haloColor=d;this.haloSize=c;this.size=g;this.angle=l;this.offsetX=b;this.offsetY=f;this.hAnchor=p;this.vAnchor=u};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new l(a);return a}();a.TextProperties=d})},"esri/views/2d/support/mathUtils":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2}})},"esri/views/2d/engine/webgl/util/Result":function(){define(["require","exports","../../../../../core/Error"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.ok=function(a,d){return a&&"name"in a?(d&&d.error(new l(a.name,a.message,a.details)),!1):
!0}})},"esri/views/2d/engine/webgl/VertexStream":function(){define(["require","exports","../../../../core/tsSupport/declareExtendsHelper","../../../webgl"],function(d,a,l,g){return function(){function a(a,c){this.rctx=a;this._vertexBuffer=g.BufferObject.createVertex(a,35044,new Uint16Array(c));this._vao=new g.VertexArrayObject(a,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:this._vertexBuffer})}a.prototype.bind=function(){this._vao.bind()};
a.prototype.unbind=function(){this._vao.unbind()};a.prototype.dispose=function(){this._vao.dispose(!1);this._vertexBuffer.dispose()};a.prototype.draw=function(){this.rctx.drawArrays(5,0,4)};return a}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec4f32 ../../../../webgl ../definitions ../GeometryUtils ./WGLBrush ../shaders/BackgroundPrograms ../shaders/TileInfoPrograms".split(" "),
function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(){var b=a.call(this)||this;b._initialized=!1;b._color=g.vec4f32.fromValues(1,0,0,1);b._maxWidth=0;return b}l(d,a);d.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};d.prototype.draw=function(a,b){a=a.context;if(b.isReady){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",b.dvsMat3);this._outlineProgram.setUniform1f("u_coord_range",e.TILE_SIZE);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",b.dvsMat3),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),
a.bindVAO())}};d.prototype._initialize=function(a){if(this._initialized)return!0;var c=k.createProgram(a,m.background),d=k.createProgram(a,b.tileInfo),e={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},f=new Int8Array([0,0,1,0,1,1,0,1]),f=k.BufferObject.createVertex(a,35044,f),f=new k.VertexArrayObject(a,m.background.attributes,e,{geometry:f}),g=new Int8Array([0,0,1,0,0,1,1,1]),g=k.BufferObject.createVertex(a,35044,g);a=new k.VertexArrayObject(a,b.tileInfo.attributes,
e,{geometry:g});this._outlineProgram=c;this._tileInfoProgram=d;this._outlineVertexArrayObject=f;this._tileInfoVertexArrayObject=a;return this._initialized=!0};d.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var d=b.key.id,e=this._canvas.getContext("2d");
e.font="24px sans-serif";e.textAlign="left";e.textBaseline="middle";var f=e.measureText(d),f=Math.pow(2,Math.ceil(c.log2(f.width+2)));f>this._maxWidth&&(this._maxWidth=f);e.clearRect(0,0,this._maxWidth,32);e.fillStyle="blue";e.fillText(d,0,16);b.texture=new k.Texture(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return b.texture};return d}(h.default);a.default=d})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(d,
a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec4f32=l})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(d,a){function l(){return new Float32Array(4)}function g(a,c,d,e){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=d;b[3]=e;return b}function k(){return g(1,1,1,1)}function e(){return g(1,0,0,0)}function c(){return g(0,1,0,0)}function h(){return g(0,0,1,0)}function m(){return g(0,0,0,1)}Object.defineProperty(a,"__esModule",{value:!0});a.create=
l;a.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=g;a.createView=function(a,c){return new Float32Array(a,c,4)};a.zeros=function(){return l()};a.ones=k;a.unitX=e;a.unitY=c;a.unitZ=h;a.unitW=m;a.ZEROS=l();a.ONES=k();a.UNIT_X=e();a.UNIT_Y=c();a.UNIT_Z=h();a.UNIT_W=m()})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){return function(){}}();
a.default=d})},"esri/views/2d/engine/webgl/shaders/BackgroundPrograms":function(){define(["require","exports","./sources/resolver"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.background={name:"background",shaders:{vertexShader:l.resolveIncludes("background/background.vert"),fragmentShader:l.resolveIncludes("background/background.frag")},attributes:{a_pos:0}}})},"esri/views/2d/engine/webgl/shaders/TileInfoPrograms":function(){define(["require","exports","./sources/resolver"],
function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.tileInfo={name:"tileInfo",shaders:{vertexShader:l.resolveIncludes("tileInfo/tileInfo.vert"),fragmentShader:l.resolveIncludes("tileInfo/tileInfo.frag")},attributes:{a_pos:0}}})},"esri/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec4f32 ../../../../webgl ../definitions ./WGLBrush ../shaders/BackgroundPrograms".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=a.call(this)||this;b._color=g.vec4f32.fromValues(1,0,0,1);b._initialized=!1;return b}l(b,a);b.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};b.prototype.draw=function(a,b){a=a.context;this._initialized||this._initialize(a);a.setStencilFunctionSeparate(1032,
519,b.stencilRef,255);a.bindVAO(this._solidVertexArrayObject);a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix3fv("u_dvsMat3",b.dvsMat3);this._solidProgram.setUniform1f("u_coord_range",e.TILE_SIZE);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()};b.prototype._initialize=function(a){if(this._initialized)return!0;var b=k.createProgram(a,h.background);if(!b)return!1;var c=new Int8Array([0,0,1,0,
0,1,1,1]),c=k.BufferObject.createVertex(a,35044,c);a=new k.VertexArrayObject(a,h.background.attributes,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:c});this._solidProgram=b;this._solidVertexArrayObject=a;return this._initialized=!0};return b}(c.default);a.default=d})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/RandomLCG ../../../../webgl ../definitions ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._dotTextureSize=0;b._dotTextures=null;b._dotSamplers=new Int32Array([c.TEXTURE_BINDING_RENDERER_0,c.TEXTURE_BINDING_RENDERER_1]);return b}l(b,a);b.prototype.dispose=function(){this._disposeTextures()};b.prototype.getGeometryType=function(){return h.WGLGeometryType.FILL};b.prototype.drawGeometry=function(a,b,d,e){var g=a.context,h=a.painter,k=a.rendererInfo,
l=a.requiredLevel,n=a.drawPhase,p=d.indexCount,t=d.indexFrom;d=f.FillMaterialKey.load(d.materialKey);var r=m.createProgramDescriptor(d.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121}].concat(d.dotDensity?[]:[{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_tlbr",count:4,type:5123},{location:4,name:"a_aux1",count:4,type:5121},{location:5,name:"a_aux2",count:2,type:5123},{location:6,name:"a_aux3",count:4,type:5121}],
d.dotDensity?[{location:2,name:"a_inverseArea",count:1,type:5126}]:[])}),n=h.materialManager.getProgram(d,n,k,"fill",r.attributes);g.bindProgram(n);e=this._getVAO(g,r.bufferLayouts,r.attributes,e);g.bindVAO(e);this._setSharedUniforms(n,a,b);d.textureBinding&&(h.textureManager.bindTextures(g,n,d),h=1/Math.pow(2,l-b.key.level)/a.pixelRatio,n.setUniform1f("u_zoomFactor",h));d.vvColor&&(n.setUniform1fv("u_vvColorValues",k.vvColorValues),n.setUniform4fv("u_vvColors",k.vvColors));d.vvOpacity&&(n.setUniform1fv("u_vvOpacityValues",
k.vvOpacityValues),n.setUniform1fv("u_vvOpacities",k.vvOpacities));d.dotDensity&&(d=c.TILE_SIZE/k.ddDotSize,e=d*window.devicePixelRatio*d*window.devicePixelRatio,h=1/Math.pow(2,l-b.key.level),b=1/h*(1/h),a=k.ddDotScale?a.state.scale/k.ddDotScale:1,n.setUniform1f("u_tileZoomFactor",h),n.setUniform1f("u_tileDotsOverArea",e/(c.TILE_SIZE*window.devicePixelRatio*c.TILE_SIZE*window.devicePixelRatio)),n.setUniformMatrix4fv("u_dotColors",k.ddColors),n.setUniform4fv("u_isActive",k.ddActiveDots),n.setUniform4fv("u_dotBackgroundColor",
k.ddBackgroundColor),n.setUniform1f("u_dotValue",Math.max(1,k.ddDotValue*a*b)),this._bindDotDensityTextures(g,n,k,d));g.drawElements(4,p,5125,4*t);g.bindVAO(null)};b.prototype._disposeTextures=function(){if(this._dotTextures){for(var a=0;a<this._dotTextures.length;a++)this._dotTextures[a].dispose();this._dotTextures=null}};b.prototype._bindDotDensityTextures=function(a,b,c,d){c=this._createDotDensityTextures(a,d,c.ddSeed);b.setUniform1iv("u_dotTextures",this._dotSamplers);for(b=0;b<c.length;b++)a.bindTexture(c[b],
this._dotSamplers[b])};b.prototype._createDotDensityTextures=function(a,b,c){if(this._dotTextureSize!==b||this._seed!==c)this._disposeTextures(),this._dotTextureSize=b,this._seed=c;null===this._dotTextures&&(c=new k(c),this._dotTextures=[this._allocDotDensityTexture(a,b,c),this._allocDotDensityTexture(a,b,c)]);return this._dotTextures};b.prototype._allocDotDensityTexture=function(a,b,c){for(var d=new Float32Array(b*b*4),f=0;f<d.length;f++)d[f]=c.getFloat();return new e.Texture(a,{wrapMode:10497,pixelFormat:6408,
dataType:5126,samplingMode:9728,width:b,height:b},d)};return b}(b.default);a.default=d})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../webgl ../definitions ./WGLBrush".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);c.prototype.draw=function(a,b){var c=this;if(b.canDisplay){var d=this.getGeometryType(),
e=b.getDisplayList(a.drawPhase);if(e){var g=b.getGeometry(d);g&&e.byType(d,function(d){c.drawGeometry(a,b,d,g)})}}};c.prototype._getVAO=function(a,b,c,d){d.vao||(d.vao=new g.VertexArrayObject(a,c,b,d.vertexBufferMap,d.indexBuffer));return d.vao};c.prototype._setSharedUniforms=function(a,b,c){a.setUniform1f("u_pixelRatio",b.pixelRatio);a.setUniformMatrix3fv("u_dvsMat3",c.dvsMat3);a.setUniformMatrix3fv("u_displayViewMat3",b.state.displayViewMat3);a.setUniformMatrix4fv("u_insideEffectMat4",b.rendererInfo.insideEffect);
a.setUniformMatrix4fv("u_outsideEffectMat4",b.rendererInfo.outsideEffect);a.setUniform1fv("u_insideOpacities",b.rendererInfo.insideOpacities);a.setUniform1fv("u_outsideOpacities",b.rendererInfo.outsideOpacities);a.setUniform1i("u_attributeTextureSize",b.attributeView.size);a.setUniform1i("u_attributeData0",k.TEXTURE_BINDING_ATTRIBUTE_DATA_0);a.setUniform1i("u_attributeData1",k.TEXTURE_BINDING_ATTRIBUTE_DATA_1);a.setUniform1i("u_attributeData2",k.TEXTURE_BINDING_ATTRIBUTE_DATA_2)};return c}(e.default);
a.default=d})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../renderers ../../../../../core/Error ../../../../../core/maybe ../enums ../mesh/templates/WGLLabelTemplate ../util/vvFlagUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});a.createMaterialKey=function(a,b,d,e){if(c.isSome(b)){a:{if("heatmap"===b.type)throw Error("Symbol processor does not support heatmap renderer");
switch(a){case h.WGLGeometryType.FILL:a=n.from(b);break a;case h.WGLGeometryType.LINE:a=w.from(b,d);break a;case h.WGLGeometryType.MARKER:if("dot-density"===b.type)throw Error("Dot Density renderer does not support Marker GeometryTypes");a=r.from(b);break a;case h.WGLGeometryType.TEXT:if("dot-density"===b.type)throw Error("Dot Density renderer does not support Text GeometryTypes");a=t.from(b);break a;case h.WGLGeometryType.LABEL:if("dot-density"===b.type)throw Error("Dot Density renderer does not support Label GeometryTypes");
a=y.from(b,e);break a;default:throw Error("Unable to createMaterialKey for unknown geometryType "+a);}}return a}switch(a){case h.WGLGeometryType.FILL:return n.from(null);case h.WGLGeometryType.LINE:return w.from(null,d);case h.WGLGeometryType.MARKER:return r.from(null);case h.WGLGeometryType.TEXT:return t.from(null);case h.WGLGeometryType.LABEL:return y.from(null,e);default:throw Error("Unable to createMaterialKey for unknown geometryType "+a);}};d=function(){function a(a){this._data=0;this._data=
a}a.load=function(a){var b=this.shared;b.data=a;return b};Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"geometryType",{get:function(){return this.bits(5,8)},set:function(a){this.setBits(a,5,8)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mapAligned",{get:function(){return!!this.bit(17)},set:function(a){this.setBit(17,a)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"sdf",{get:function(){return!!this.bit(8)},set:function(a){this.setBit(8,a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pattern",{get:function(){return!!this.bit(9)},set:function(a){this.setBit(9,a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureBinding",{get:function(){return this.bits(0,5)},set:function(a){this.setBits(a,0,5)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"geometryTypeString",
{get:function(){switch(this.geometryType){case h.WGLGeometryType.FILL:return"fill";case h.WGLGeometryType.MARKER:return"marker";case h.WGLGeometryType.LINE:return"line";case h.WGLGeometryType.TEXT:return"text";case h.WGLGeometryType.LABEL:return"label";default:throw new e("Unable to handle unknown geometryType: "+this.geometryType);}},enumerable:!0,configurable:!0});a.prototype.setBit=function(a,b){a=1<<a;this._data=b?this._data|a:this._data&~a};a.prototype.bit=function(a){return(this._data&1<<a)>>
a};a.prototype.setBits=function(a,b,c){for(var d=0;b<c;b++,d++)this.setBit(b,0!==(a&1<<d))};a.prototype.bits=function(a,b){for(var c=0,d=0;a<b;a++,d++)c|=this.bit(a)<<d;return c};a.prototype.hasVV=function(){return!1};a.prototype.setVV=function(a,b){};a.prototype.getVariation=function(){var a={},b;for(b in this)"boolean"===typeof this[b]&&(a[b]=this[b]);return a};a.prototype.getVariationHash=function(){return this._data&~(4&this.textureBinding)};a.shared=new a(0);return a}();a.MaterialKeyBase=d;g=
function(a){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);Object.defineProperty(c.prototype,"vvSizeMinMaxValue",{get:function(){return 0!==this.bit(13)},set:function(a){this.setBit(13,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"vvSizeScaleStops",{get:function(){return 0!==this.bit(14)},set:function(a){this.setBit(14,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"vvSizeFieldStops",{get:function(){return 0!==
this.bit(15)},set:function(a){this.setBit(15,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"vvSizeUnitValue",{get:function(){return 0!==this.bit(16)},set:function(a){this.setBit(16,a)},enumerable:!0,configurable:!0});c.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};c.prototype.setVV=function(c,d){a.prototype.setVV.call(this,c,d);c&=b.getSizeFlagsMask(c,d);this.vvSizeMinMaxValue=
!!(c&h.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(c&h.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(c&h.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(c&h.WGLVVFlag.SIZE_SCALE_STOPS)};return c}(a)};var f=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvRotation",{get:function(){return 0!==this.bit(12)},set:function(a){this.setBit(12,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||
this.vvRotation};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvRotation=!c&&!!(b&h.WGLVVFlag.ROTATION)};return b}(a)},p=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvColor",{get:function(){return 0!==this.bit(10)},set:function(a){this.setBit(10,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvColor};b.prototype.setVV=function(b,
c){a.prototype.setVV.call(this,b,c);this.vvColor=!c&&!!(b&h.WGLVVFlag.COLOR)};return b}(a)},u=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvOpacity",{get:function(){return 0!==this.bit(11)},set:function(a){this.setBit(11,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvOpacity};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvOpacity=
!c&&!!(b&h.WGLVVFlag.OPACITY)};return b}(a)},n=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);d.load=function(a){var b=this.shared;b.data=a;return b};d.from=function(a){var d=this.load(0);d.geometryType=h.WGLGeometryType.FILL;c.isSome(a)&&(a instanceof k.DotDensityRenderer?d.dotDensity=!0:(a=b.getVVFlags(a.visualVariables),d.setVV(a,!1)));return d.data};d.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};Object.defineProperty(d.prototype,
"dotDensity",{get:function(){return!!this.bit(12)},set:function(a){this.setBit(12,a)},enumerable:!0,configurable:!0});d.shared=new d(0);return d}(p(u(d)));a.FillMaterialKey=n;var r=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);d.load=function(a){var b=this.shared;b.data=a;return b};d.from=function(a){var d=this.load(0);d.geometryType=h.WGLGeometryType.MARKER;c.isSome(a)&&(a=b.getVVFlags(a.visualVariables),d.setVV(a,!1));return d.data};d.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};
d.shared=new d(0);return d}(p(u(f(g(d)))));a.MarkerMaterialKey=r;var w=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);d.load=function(a){var b=this.shared;b.data=a;return b};d.from=function(a,d){var e=this.load(0);e.geometryType=h.WGLGeometryType.LINE;c.isSome(a)&&(a=b.getVVFlags(a.visualVariables),e.setVV(a,d));return e.data};d.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};d.shared=new d(0);return d}(p(u(g(d))));a.LineMaterialKey=w;
var t=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);d.load=function(a){var b=this.shared;b.data=a;return b};d.from=function(a){var d=this.load(0);d.geometryType=h.WGLGeometryType.TEXT;c.isSome(a)&&(a=b.getVVFlags(a.visualVariables),d.setVV(a,!1));return d.data};d.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};d.shared=new d(0);return d}(p(u(f(g(d)))));a.TextMaterialKey=t;var y=function(a){function d(){return null!==a&&a.apply(this,arguments)||
this}l(d,a);d.load=function(a){var b=this.shared;b.data=a;return b};d.from=function(a,d){var e=this.load(0);e.geometryType=h.WGLGeometryType.LABEL;c.isSome(a)&&(a=b.getVVFlags(a.visualVariables),e.setVV(a,!1));e.mapAligned=!!m.isMapAligned(d.labelPlacement);return e.data};d.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};d.shared=new d(0);return d}(g(d));a.LabelMaterialKey=y})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/DictionaryRenderer ./renderers/DotDensityRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/StretchRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});a.ClassBreaksRenderer=l;a.DictionaryRenderer=g;a.DotDensityRenderer=k;a.HeatmapRenderer=e;a.BaseRenderer=c;a.SimpleRenderer=h;a.StretchRenderer=m;a.UniqueValueRenderer=b;a.isRenderer=function(b){return b instanceof a.BaseRenderer};a.read=f.read;a.write=f.write;a.fromJSON=f.fromJSON;a.rendererTypes={key:"type",base:a.BaseRenderer,typeMap:{heatmap:a.HeatmapRenderer,simple:a.SimpleRenderer,"unique-value":a.UniqueValueRenderer,
"class-breaks":a.ClassBreaksRenderer,"dot-density":a.DotDensityRenderer,dictionary:a.DictionaryRenderer}};a.webSceneRendererTypes={key:"type",base:a.BaseRenderer,typeMap:{simple:a.SimpleRenderer,"unique-value":a.UniqueValueRenderer,"class-breaks":a.ClassBreaksRenderer}};a.rasterRendererTypes={key:"type",base:a.BaseRenderer,typeMap:{"unique-value":a.UniqueValueRenderer,"class-breaks":a.ClassBreaksRenderer,"raster-stretch":a.StretchRenderer}}})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/jsonMap ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesRenderer ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeOnDemand ../symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C){var D=u.getLogger("esri.renderers.ClassBreaksRenderer"),B=new f.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),E=r.ensureType(x.ClassBreakInfo);return function(a){function d(b){b=a.call(this)||this;b.backgroundFillSymbol=null;b.classBreakInfos=null;b.defaultLabel=null;b.defaultSymbol=null;b.field=null;b.isMaxInclusive=!0;b.legendOptions=null;b.normalizationField=null;b.normalizationTotal=
null;b.type="class-breaks";b.valueExpression=null;b.valueExpressionTitle=null;b._set("classBreakInfos",[]);return b}l(d,a);f=d;Object.defineProperty(d.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0});d.prototype.readClassBreakInfos=function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new x.ClassBreakInfo;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}};d.prototype.writeClassBreakInfos=
function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){return delete a.classMinValue});b[c]=a};d.prototype.readDefaultSymbol=function(a,b,c){return C.read(a,b,c)};d.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){C.writeTarget(a,b,c,d)};d.prototype.writeDefaultSymbol=function(a,b,c,d){C.writeTarget(a,b,c,d)};d.prototype.castField=function(a){return null==a?a:"function"===typeof a?(D.error(".field: field must be a string value"),
null):r.ensureString(a)};Object.defineProperty(d.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"normalizationType",{get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total"||null,b&&c&&D.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},set:function(a){this._set("normalizationType",a)},enumerable:!0,configurable:!0});d.prototype.addClassBreakInfo=function(a,b,c){var d=null,d="number"===typeof a?new x.ClassBreakInfo({minValue:a,maxValue:b,symbol:c}):E(p.clone(a));this.classBreakInfos.push(d);1===this.classBreakInfos.length&&this.notifyChange("minValue")};d.prototype.removeClassBreakInfo=function(a,b){for(var c=this.classBreakInfos.length,d=0;d<c;d++){var e=[this.classBreakInfos[d].minValue,
this.classBreakInfos[d].maxValue];if(e[0]===a&&e[1]===b){this.classBreakInfos.splice(d,1);break}}};d.prototype.getBreakIndex=function(a,b){return this.valueExpression?this._getBreakIndexForExpression(a,b):this._getBreakIndexForField(a)};d.prototype.getClassBreakInfo=function(a,b){return c(this,void 0,void 0,function(){var c,d,f;return e(this,function(e){switch(e.label){case 0:return c=b,this.valueExpression?[4,z.loadArcade()]:[3,2];case 1:d=e.sent().arcadeUtils,c=h({},c,{arcadeUtils:d}),e.label=2;
case 2:return f=this.getBreakIndex(a,c),[2,-1!==f?this.classBreakInfos[f]:null]}})})};d.prototype.getSymbol=function(a,b){if(!this.valueExpression||b&&b.arcadeUtils)return a=this.getBreakIndex(a,b),-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol;D.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")};d.prototype.getSymbolAsync=function(a,b){return c(this,void 0,void 0,function(){var c,d,f;return e(this,function(e){switch(e.label){case 0:return c=b,this.valueExpression?
[4,z.loadArcade()]:[3,2];case 1:d=e.sent().arcadeUtils,c=h({},c,{arcadeUtils:d}),e.label=2;case 2:return f=this.getBreakIndex(a,c),[2,-1<f?this.classBreakInfos[f].symbol:this.defaultSymbol]}})})};d.prototype.getSymbols=function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a};d.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},
"")};d.prototype.getMeshHash=function(){var a=JSON.stringify(this.backgroundFillSymbol),b=JSON.stringify(this.defaultSymbol),c=this.normalizationField+"."+this.normalizationType+"."+this.normalizationTotal,d=this.classBreakInfos.reduce(function(a,b){return a+b.getMeshHash()},"");return a+"."+b+"."+d+"."+c+"."+this.field+"."+this.valueExpression};d.prototype.clone=function(){return new f({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,
defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:p.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:p.clone(this.visualVariables),legendOptions:p.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};
d.prototype.collectRequiredFields=function(a,b){return c(this,void 0,void 0,function(){return e(this,function(c){switch(c.label){case 0:return this.getSymbols().forEach(function(c){return c.collectRequiredFields(a,b)}),[4,this.collectVVRequiredFields(a,b)];case 1:return c.sent(),w.collectField(a,b,this.field),w.collectField(a,b,this.normalizationField),[4,w.collectArcadeFieldNames(a,b,this.valueExpression)];case 2:return c.sent(),[2]}})})};d.prototype._getBreakIndexForExpression=function(a,b){var c=
b.arcadeUtils,d=b.viewingMode,e=b.scale;b=b.spatialReference;var f=this._cache.compiledFunc;f||(f=c.createSyntaxTree(this.valueExpression),f=c.createFunction(f),this._cache.compiledFunc=f);a=c.executeFunction(f,c.createExecContext(a,c.getViewInfo({viewingMode:d,scale:e,spatialReference:b})));return this._getBreakIndexfromInfos(a)};d.prototype._getBreakIndexForField=function(a){var b=a.attributes;a=this.normalizationType;var c=parseFloat(b[this.field]);if(a){var d=this.normalizationTotal,b=parseFloat(b[this.normalizationField]);
if("log"===a)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(d))c=c/d*100;else if("field"===a&&!isNaN(b)){if(isNaN(c)||isNaN(b))return-1;c/=b}}return this._getBreakIndexfromInfos(c)};d.prototype._getBreakIndexfromInfos=function(a){var b=this.isMaxInclusive;if(null!=a&&"number"===typeof a&&!isNaN(a))for(var c=0;c<this.classBreakInfos.length;c++){var d=[this.classBreakInfos[c].minValue,this.classBreakInfos[c].maxValue];if(d[0]<=a&&(b?a<=d[1]:a<d[1]))return c}return-1};d.prototype._areClassBreaksConsecutive=
function(){for(var a=this.classBreakInfos,b=a.length,c=1;c<b;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;return!0};var f;g([n.property({readOnly:!0,dependsOn:["valueExpression"]})],d.prototype,"_cache",null);g([n.property({types:{base:m.BaseSymbol,key:"type",typeMap:{"simple-fill":b.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":b.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":b.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{type:m.PolygonSymbol3D,
read:C.read,write:C.writeTarget}},read:C.read,write:C.writeTarget}})],d.prototype,"backgroundFillSymbol",void 0);g([n.property({type:[x.ClassBreakInfo]})],d.prototype,"classBreakInfos",void 0);g([n.reader("classBreakInfos")],d.prototype,"readClassBreakInfos",null);g([n.writer("classBreakInfos")],d.prototype,"writeClassBreakInfos",null);g([n.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);g([n.property({types:b.symbolTypesRenderer})],d.prototype,"defaultSymbol",void 0);
g([n.reader("defaultSymbol")],d.prototype,"readDefaultSymbol",null);g([n.writer("web-scene","defaultSymbol",{defaultSymbol:{types:b.symbolTypesRenderer3D}})],d.prototype,"writeDefaultSymbolWebScene",null);g([n.writer("defaultSymbol")],d.prototype,"writeDefaultSymbol",null);g([n.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);g([n.cast("field")],d.prototype,"castField",null);g([n.property({type:Boolean})],d.prototype,"isMaxInclusive",void 0);g([n.property({type:A.default,json:{write:!0}})],
d.prototype,"legendOptions",void 0);g([n.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],d.prototype,"minValue",null);g([n.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);g([n.property({type:Number,cast:function(a){return r.ensureNumber(a)},json:{write:!0}})],d.prototype,"normalizationTotal",
void 0);g([n.property({type:B.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:B.jsonValues,read:B.read,write:B.write}})],d.prototype,"normalizationType",null);g([n.enumeration.serializable()({classBreaks:"class-breaks"})],d.prototype,"type",void 0);g([n.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);g([n.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);g([k(2,n.cast(b.ensureType))],d.prototype,
"addClassBreakInfo",null);return d=f=g([n.subclass("esri.renderers.ClassBreaksRenderer")],d)}(n.declared(t,y))})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),function(d,a,l,g,k,e,c,h,m,b,
f,p){var u=new m.default({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",rasterStretch:"raster-stretch",dictionary:"dictionary"},{ignoreUnknown:!0});return function(a){function b(b){b=a.call(this,b)||this;b.authoringInfo=null;b.type=null;return b}l(b,a);b.prototype.getRequiredFields=function(a){return e(this,void 0,void 0,function(){var b;return k(this,function(d){switch(d.label){case 0:if(!this.collectRequiredFields)return[2,[]];b=
new h.default;return[4,this.collectRequiredFields(b,a)];case 1:return d.sent(),[2,c.from(b).sort()]}})})};b.prototype.getSymbol=function(a,b){};b.prototype.getSymbolAsync=function(a,b){return e(this,void 0,void 0,function(){return k(this,function(a){return[2]})})};b.prototype.getSymbols=function(){return[]};b.prototype.getAttributeHash=function(){return JSON.stringify(this)};b.prototype.getMeshHash=function(){return JSON.stringify(this)};g([f.property({type:p,json:{write:!0}})],b.prototype,"authoringInfo",
void 0);g([f.property({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:{writer:u.write,ignoreOrigin:!0}}})],b.prototype,"type",void 0);return b=g([f.subclass("esri.renderers.Renderer")],b)}(f.declared(b))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../tasks/support/colorRamps".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){var u=new k.default({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),n=new k.default({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),
r="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");return function(a){function d(b){b=a.call(this)||this;b.colorRamp=null;b.lengthUnit=null;b.maxSliderValue=null;b.minSliderValue=null;b.visualVariables=null;return b}l(d,a);e=d;Object.defineProperty(d.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===
b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});d.prototype.readColorRamp=function(a,b){if(a)return p.fromJSON(a)};Object.defineProperty(d.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},
set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"standardDeviationInterval",{get:function(){var a=this.type;return a&&"relationship"!==a&&"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",
a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new e({classificationMethod:this.classificationMethod,colorRamp:c.clone(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:c.clone(this.field1),field2:c.clone(this.field2),
focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var e;g([h.property({type:u.apiValues,value:null,dependsOn:["type"],json:{type:u.jsonValues,read:u.read,write:u.write,origins:{"web-document":{default:"manual",type:u.jsonValues,read:u.read,write:u.write}}}})],
d.prototype,"classificationMethod",null);g([h.property({types:p.types,json:{write:!0}})],d.prototype,"colorRamp",void 0);g([h.reader("colorRamp")],d.prototype,"readColorRamp",null);g([h.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"fields",null);g([h.property({type:b.default,value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"field1",null);g([h.property({type:b.default,value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"field2",null);g([h.property({type:["HH",
"HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],d.prototype,"focus",null);g([h.property({type:Number,value:null,dependsOn:["type"],json:{type:m.Integer,write:!0}})],d.prototype,"numClasses",null);g([h.property({type:r,json:{type:r,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"lengthUnit",void 0);g([h.property({type:Number,json:{write:!0}})],d.prototype,"maxSliderValue",void 0);g([h.property({type:Number,json:{write:!0}})],d.prototype,"minSliderValue",
void 0);g([h.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],d.prototype,"standardDeviationInterval",null);g([h.property({type:String,value:null,json:{type:n.jsonValues,read:n.read,write:n.write,origins:{"web-scene":{type:n.jsonValues.filter(function(a){return"dotDensity"!==a}),read:n.read,write:n.write}}}})],d.prototype,"type",null);g([h.property({type:[f],json:{write:!0}})],d.prototype,"visualVariables",void 0);return d=e=
g([h.subclass("esri.renderers.support.AuthoringInfo")],d)}(h.declared(e))})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoClassBreakInfo".split(" "),function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b){b=a.call(this)||this;
b.field="";b.normalizationField="";b.classBreakInfos=[];return b}l(b,a);d=b;b.prototype.clone=function(){return new d({field:this.field,normalizationField:this.normalizationField,classBreakInfos:c.clone(this.classBreakInfos)})};var d;g([h.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);g([h.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);g([h.property({type:[m.default],json:{write:!0}})],b.prototype,"classBreakInfos",void 0);return b=d=g([h.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],
b)}(h.declared(k,e));a.AuthoringInfoFieldInfo=d;a.default=d})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(b){b=a.call(this)||this;b.minValue=0;b.maxValue=0;return b}l(d,a);b=d;d.prototype.clone=
function(){return new b({minValue:this.minValue,maxValue:this.maxValue})};var b;g([c.property({type:Number,json:{write:!0}})],d.prototype,"minValue",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"maxValue",void 0);return d=b=g([c.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],d)}(c.declared(k,e));a.AuthoringInfoClassBreakInfo=d;a.default=d})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(d,a,l,g,k,e,c,h){var m=new k.default({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),b=new k.default({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),f={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},p=["high-to-low","above-and-below","centered-on","extremes"],u="seconds minutes hours days months years".split(" ");return function(a){function d(b){b=a.call(this)||this;b.endTime=
null;b.field=null;b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}l(d,a);e=d;d.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};d.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(d.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new e({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var e;g([c.property({types:f,json:{write:!0}})],d.prototype,"endTime",void 0);g([h.cast("endTime")],
d.prototype,"castEndTime",null);g([c.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"maxSliderValue",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"minSliderValue",void 0);g([c.property({types:f,json:{write:!0}})],d.prototype,"startTime",void 0);g([h.cast("startTime")],d.prototype,"castStartTime",null);g([c.property({type:m.apiValues,value:null,dependsOn:["type"],json:{type:m.jsonValues,read:m.read,
write:m.write}})],d.prototype,"style",null);g([c.property({type:p,value:null,dependsOn:["type"],json:{type:p,write:!0}})],d.prototype,"theme",null);g([c.property({type:b.apiValues,json:{type:b.jsonValues,read:b.read,write:b.write}})],d.prototype,"type",void 0);g([c.property({type:u,json:{type:u,write:!0}})],d.prototype,"units",void 0);return d=e=g([c.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],d)}(c.declared(e))})},"esri/tasks/support/colorRamps":function(){define(["require","exports",
"./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.types={key:"type",base:g,typeMap:{algorithmic:l,multipart:k}};a.fromJSON=function(a){return a&&a.type?"algorithmic"===a.type?l.fromJSON(a):"multipart"===a.type?k.fromJSON(a):null:null}})},"esri/tasks/support/AlgorithmicColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ColorRamp".split(" "),
function(d,a,l,g,k,e,c,h,m){return function(a){function b(b){b=a.call(this)||this;b.algorithm=null;b.fromColor=null;b.toColor=null;b.type="algorithmic";return b}g(b,a);d=b;b.prototype.clone=function(){return new d({fromColor:e.clone(this.fromColor),toColor:e.clone(this.toColor),algorithm:this.algorithm})};var d;l([c.enumeration.serializable()({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],b.prototype,"algorithm",void 0);l([c.property({type:k,json:{type:[h.Integer],
write:!0}})],b.prototype,"fromColor",void 0);l([c.property({type:k,json:{type:[h.Integer],write:!0}})],b.prototype,"toColor",void 0);l([c.property({type:["algorithmic"]})],b.prototype,"type",void 0);return b=d=l([c.subclass("esri.tasks.support.AlgorithmicColorRamp")],b)}(c.declared(m))})},"esri/tasks/support/ColorRamp":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(c){c=a.call(this)||this;c.type=null;return c}l(c,a);g([e.property({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=g([e.subclass("esri.tasks.support.ColorRamp")],c)}(e.declared(k))})},"esri/tasks/support/MultipartColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/lang ../../core/accessorSupport/decorators ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this)||this;b.colorRamps=null;b.type="multipart";return b}g(b,a);d=b;b.prototype.clone=function(){return new d({colorRamps:k.clone(this.colorRamps)})};var d;l([e.property({type:[c],json:{write:!0}})],b.prototype,"colorRamps",void 0);l([e.property({type:["multipart"]})],b.prototype,"type",void 0);return b=d=l([e.subclass("esri.tasks.support.MultipartColorRamp")],b)}(e.declared(h))})},"esri/renderers/mixins/VisualVariablesRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){var w={base:n,key:"type",typeMap:{opacity:f,color:b,rotation:p,size:u}};return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._vvFactory=new r;return b}l(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});b.prototype.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,
b,c)};b.prototype.writeVisualVariables=function(a,b,c,d){b[c]=this._vvFactory.writeVariables(a,d)};b.prototype.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};b.prototype.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(function(c){return c.type===a&&("string"===
typeof b?c.target===b:!1===b?!c.target:!0)}),!c||0!==c.length))return c};b.prototype.collectVVRequiredFields=function(a,b){return e(this,void 0,void 0,function(){var c,d,e,f;return k(this,function(g){switch(g.label){case 0:c=[],this.visualVariables&&(c=c.concat(this.visualVariables)),d=0,e=c,g.label=1;case 1:if(!(d<e.length))return[3,4];f=e[d];if(!f)return[3,3];f.field&&m.collectField(a,b,f.field);f.normalizationField&&m.collectField(a,b,f.normalizationField);return f.valueExpression?[4,m.collectArcadeFieldNames(a,
b,f.valueExpression)]:[3,3];case 2:g.sent(),g.label=3;case 3:return d++,[3,1];case 4:return[2]}})})};g([h.property({types:[w],value:null,json:{write:!0}})],b.prototype,"visualVariables",null);g([h.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],b.prototype,"readVisualVariables",null);g([h.writer("visualVariables")],b.prototype,"writeVisualVariables",null);return b=g([h.subclass("esri.renderers.mixins.VisualVariablesRenderer")],b)}(h.declared(c))})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this,b)||this;b.type="color";b.normalizationField=null;return b}l(d,a);b=d;Object.defineProperty(d.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value}));this._set("stops",
a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};d.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField};d.prototype._interpolateData=function(){return this.stops&&
this.stops.map(function(a){return a.value||0})};var b;g([k.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],d.prototype,"cache",null);g([k.property({type:["color"],json:{type:["colorInfo"]}})],d.prototype,"type",void 0);g([k.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);g([k.property({type:[c],json:{write:!0}})],d.prototype,"stops",null);return d=b=g([k.subclass("esri.renderers.visualVariables.ColorVariable")],d)}(k.declared(e))})},"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),
function(d,a,l,g,k,e,c,h,m,b){var f=c.getLogger("esri.renderers.visualVariables.VisualVariable"),p=new k.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return function(a){function c(b){b=a.call(this,b)||this;b.index=null;b.type=null;b.field=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;return b}l(c,a);c.prototype.castField=function(a){return null==a?a:"function"===typeof a?(f.error(".field: field must be a string value"),
null):m.ensureString(a)};c.prototype.clone=function(){};c.prototype.getAttributeHash=function(){return this.type+"-"+this.field+"-"+this.valueExpression};g([h.property()],c.prototype,"index",void 0);g([h.property({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],c.prototype,"type",void 0);g([h.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);g([h.cast("field")],c.prototype,"castField",null);g([h.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",
void 0);g([h.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);g([h.property({type:b,json:{write:!0}})],c.prototype,"legendOptions",void 0);return c=g([h.subclass("esri.renderers.visualVariables.VisualVariable")],c)}(h.declared(e))})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),
function(d,a,l,g,k,e){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.showLegend=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend})};var d;g([k.property({type:Boolean,json:{write:!0}})],c.prototype,"showLegend",void 0);return c=d=g([k.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],c)}(k.declared(e.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({title:this.title})};var d;g([e.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=d=g([e.subclass("esri.renderers.support.LegendOptions")],c)}(e.declared(k));a.LegendOptions=d;a.default=d})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this,b)||this;b.type="opacity";b.normalizationField=null;return b}l(d,a);b=d;Object.defineProperty(d.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value}));this._set("stops",
a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};d.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField};d.prototype._interpolateData=function(){return this.stops&&
this.stops.map(function(a){return a.value||0})};var b;g([k.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],d.prototype,"cache",null);g([k.property({type:["opacity"],json:{type:["transparencyInfo"]}})],d.prototype,"type",void 0);g([k.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);g([k.property({type:[c],json:{write:!0}})],d.prototype,"stops",null);return d=b=g([k.subclass("esri.renderers.visualVariables.OpacityVariable")],d)}(k.declared(e))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),
function(d,a,l,g,k,e,c,h){return function(a){function b(b){b=a.call(this,b)||this;b.label=null;b.opacity=null;b.value=null;return b}l(b,a);d=b;b.prototype.readOpacity=function(a,b){return h.transparencyToOpacity(b.transparency)};b.prototype.writeOpacity=function(a,b,c){b[c]=h.opacityToTransparency(a)};b.prototype.clone=function(){return new d({label:this.label,opacity:this.opacity,value:this.value})};var d;g([e.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);g([e.property({type:Number,
json:{type:c.Integer,write:{target:"transparency"}}})],b.prototype,"opacity",void 0);g([e.reader("opacity",["transparency"])],b.prototype,"readOpacity",null);g([e.writer("opacity")],b.prototype,"writeOpacity",null);g([e.property({type:Number,json:{write:!0}})],b.prototype,"value",void 0);return b=d=g([e.subclass("esri.renderers.visualVariables.support.OpacityStop")],b)}(e.declared(k))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable".split(" "),
function(d,a,l,g,k,e,c){return function(a){function c(b){b=a.call(this,b)||this;b.axis=null;b.type="rotation";b.rotationType="geographic";b.valueExpressionTitle=null;return b}l(c,a);b=c;Object.defineProperty(c.prototype,"cache",{get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});c.prototype.writeValueExpressionTitleWebScene=function(a,b,c,d){d&&d.messages&&d.messages.push(new k("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:d}))};c.prototype.clone=function(){return new b({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var b;g([e.property({readOnly:!0,dependsOn:["valueExpression"]})],c.prototype,"cache",null);g([e.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",
write:!0}}}})],c.prototype,"axis",void 0);g([e.property({type:["rotation"],json:{type:["rotationInfo"]}})],c.prototype,"type",void 0);g([e.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],c.prototype,"rotationType",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);g([e.writer("web-scene","valueExpressionTitle")],c.prototype,"writeValueExpressionTitleWebScene",null);return c=b=g([e.subclass("esri.renderers.visualVariables.RotationVariable")],
c)}(e.declared(c))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/Error ../../core/jsonMap ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n){function r(a){if(null!=
a){if("string"===typeof a||"number"===typeof a)return m.toPt(a);if("size"===a.type){if(n.isSizeVariable(a))return a;a=k({},a);delete a.type;return new z(a)}}}function w(a,b,c){if("object"!==typeof a)return a;b=new z;b.read(a,c);return b}var t=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,y=h.getLogger("esri.renderers.visualVariables.SizeVariable"),x=new c.default({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),A=new c.default({unknown:"unknown",inch:"inches",
foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),z=function(a){function c(b){b=a.call(this,b)||this;b.axis=null;b.legendOptions=null;b.normalizationField=null;b.scaleBy=null;b.target=null;b.type="size";b.useSymbolValue=null;b.valueExpression=null;b.valueRepresentation=null;b.valueUnit=null;return b}l(c,a);d=c;Object.defineProperty(c.prototype,
"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:t.test(this.valueExpression)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"expression",{set:function(a){y.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");"view.scale"===a?(this.valueExpression="$view.scale",this._set("expression",a)):this._set("expression",null)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"index",{set:function(a){n.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+a+"].maxSize");n.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+a+"].minSize");this._set("index",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"inputValueType",{get:function(){return n.getInputValueType(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxDataValue",{set:function(a){a&&
this.stops&&(y.warn("cannot set maxDataValue when stops is not null."),a=null);this._set("maxDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxSize",{set:function(a){a&&this.stops&&(y.warn("cannot set maxSize when stops is not null."),a=null);this._set("maxSize",a)},enumerable:!0,configurable:!0});c.prototype.castMaxSize=function(a){return r(a)};c.prototype.readMaxSize=function(a,b,c){return w(a,b,c)};Object.defineProperty(c.prototype,"minDataValue",{set:function(a){a&&
this.stops&&(y.warn("cannot set minDataValue when stops is not null."),a=null);this._set("minDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minSize",{set:function(a){a&&this.stops&&(y.warn("cannot set minSize when stops is not null."),a=null);this._set("minSize",a)},enumerable:!0,configurable:!0});c.prototype.castMinSize=function(a){return r(a)};c.prototype.readMinSize=function(a,b,c){return w(a,b,c)};Object.defineProperty(c.prototype,"stops",{set:function(a){null==
this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value})):a&&(y.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),a=null);this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transformationType",{get:function(){return n.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0});
c.prototype.readValueExpression=function(a,b){return a||b.expression&&"$view.scale"};c.prototype.writeValueExpressionWebScene=function(a,b,c,d){"$view.scale"===a?d&&d.messages&&(a=this.index,d.messages.push(new e("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"===typeof a?a:"visualVariables["+a+"]")+".valueExpression",context:d}))):b[c]=a};c.prototype.readValueUnit=
function(a,b,c){return a?A.read(a):null};c.prototype.clone=function(){return new d({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:n.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:n.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(function(a){return a.clone()}),
target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.target+"-"+this.normalizationField};c.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var d;g([b.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"cache",
null);g([b.property({type:x.apiValues,json:{type:x.jsonValues,origins:{"web-map":{read:!1}},read:x.read,write:x.write}})],c.prototype,"axis",void 0);g([b.property({type:String,value:null,json:{read:!1}})],c.prototype,"expression",null);g([b.property()],c.prototype,"index",null);g([b.property({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],c.prototype,"inputValueType",null);g([b.property({type:u,json:{write:!0}})],c.prototype,"legendOptions",void 0);g([b.property({type:Number,value:null,
json:{write:!0}})],c.prototype,"maxDataValue",null);g([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxSize",null);g([b.cast("maxSize")],c.prototype,"castMaxSize",null);g([b.reader("maxSize")],c.prototype,"readMaxSize",null);g([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minDataValue",null);g([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minSize",null);g([b.cast("minSize")],c.prototype,"castMinSize",null);g([b.reader("minSize")],c.prototype,
"readMinSize",null);g([b.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);g([b.property({type:String})],c.prototype,"scaleBy",void 0);g([b.property({type:[p],value:null,json:{write:!0}})],c.prototype,"stops",null);g([b.property({type:["outline"],json:{write:!0}})],c.prototype,"target",void 0);g([b.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],c.prototype,"transformationType",null);
g([b.property({type:["size"],json:{type:["sizeInfo"]}})],c.prototype,"type",void 0);g([b.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],c.prototype,"useSymbolValue",void 0);g([b.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);g([b.reader("valueExpression",["valueExpression","expression"])],c.prototype,"readValueExpression",null);g([b.writer("web-scene","valueExpression")],c.prototype,"writeValueExpressionWebScene",null);g([b.property({type:["radius",
"diameter","area","width","distance"],json:{write:!0}})],c.prototype,"valueRepresentation",void 0);g([b.property({type:A.apiValues,json:{write:A.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],c.prototype,"valueUnit",void 0);g([b.reader("valueUnit")],c.prototype,"readValueUnit",null);return c=d=g([b.subclass("esri.renderers.visualVariables.SizeVariable")],c)}(b.declared(f));return z})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this,b)||this;b.label=null;b.size=null;b.value=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({label:this.label,size:this.size,value:this.value})};var b;g([c.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);g([c.property({type:Number,cast:e.toPt,json:{write:!0}})],d.prototype,"size",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"value",void 0);return d=b=g([c.subclass("esri.renderers.visualVariables.support.SizeStop")],
d)}(c.declared(k))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),function(d,a,l,g,k,e){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.customValues=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend,
customValues:this.customValues&&this.customValues.slice(0)})};var d;g([k.property({type:[Number],json:{write:!0}})],c.prototype,"customValues",void 0);return c=d=g([k.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],c)}(k.declared(e))})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports"],function(d,a){function l(a){return a.valueExpression?"expression":a.field&&"string"===typeof a.field?"field":"unknown"}Object.defineProperty(a,
"__esModule",{value:!0});a.isSizeVariable=function(a){return a&&"esri.renderers.visualVariables.SizeVariable"===a.declaredClass};a.isValidNumber=function(a){return null!=a&&!isNaN(a)&&isFinite(a)};a.getInputValueType=l;a.getTransformationType=function(a,d){return"unknown"===(d||l(a))?"constant":a.stops?"stops":null!=a.minSize&&null!=a.maxSize&&null!=a.minDataValue&&null!=a.maxDataValue?"clamped-linear":"unknown"===(a.valueUnit||"unknown")?null!=a.minSize&&null!=a.minDataValue?a.minSize&&a.minDataValue?
"proportional":"additive":"identity":"real-world-size"}})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u){var n=c.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),
r={color:b,size:u,opacity:f,rotation:p},w=new e.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),t=/^\[([^\]]+)\]$/i;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.colorVariables=null;b.opacityVariables=null;b.rotationVariables=null;b.sizeVariables=null;return b}l(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._resetVariables();if((a=a&&a.filter(function(a){return!!a}))&&a.length){for(var b=
0,c=a;b<c.length;b++){var d=c[b];switch(d.type){case "color":this.colorVariables.push(d);break;case "opacity":this.opacityVariables.push(d);break;case "rotation":this.rotationVariables.push(d);break;case "size":this.sizeVariables.push(d)}}this.sizeVariables.length&&this.sizeVariables.some(function(a){return!!a.target})&&a.sort(function(a,b){var c=null;return c=a.target===b.target?0:a.target?1:-1});for(b=0;b<a.length;b++)d=a[b],d.index=b}this._set("visualVariables",a)},enumerable:!0,configurable:!0});
b.prototype.readVariables=function(a,b,c){var d=b.rotationExpression;b=b.rotationType;if(d=(d=d&&d.match(t))&&d[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:b,field:d});if(a)return a.map(function(a){var b=w.read(a.type),d=r[b];d||(n.warn("Unknown variable type: "+b),c&&c.messages&&c.messages.push(new h("visual-variable:unsupported","visualVariable of type '"+b+"' is not supported",{definition:a,context:c})));b=new d;b.read(a,c);return b})};b.prototype.writeVariables=function(a,b){for(var c=
[],d=0;d<a.length;d++){var e=a[d].toJSON(b);e&&c.push(e)}return c};b.prototype._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};g([m.property()],b.prototype,"visualVariables",null);return b=g([m.subclass("esri.renderers.visualVariables.VisualVariableFactory")],b)}(m.declared(k))})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b){b=a.call(this,b)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};b.prototype.getMeshHash=function(){var a=JSON.stringify(this.symbol);return this.minValue+"."+this.maxValue+
"."+a};var d;g([c.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);g([c.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],b.prototype,"minValue",void 0);g([c.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],b.prototype,"maxValue",void 0);g([c.property({types:k.symbolTypesRenderer,json:{origins:{"web-scene":{types:k.symbolTypesRenderer3D,
read:h.read,write:h.writeTarget}},read:h.read,write:h.writeTarget}})],b.prototype,"symbol",void 0);return b=d=g([c.subclass("esri.renderers.support.ClassBreakInfo")],b)}(c.declared(e));a.ClassBreakInfo=d;a.default=d})},"esri/renderers/DictionaryRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../Color ../request ../core/Error ../core/lang ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ../support/arcadeOnDemand ../symbols/CIMSymbol ../symbols/support/cimSymbolUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A){var z=u.getLogger("esri.renderers.DictionaryRenderer"),C=function(a,b){return a.replace(/\{itemName\}/gi,b)};return function(a){function d(b){b=a.call(this)||this;b._arcadeUtils=null;b.config=null;b.description=null;b.label=null;b.type="dictionary";return b}l(d,a);t=d;d.prototype.clone=function(){return new t({config:p.clone(this.config),description:p.clone(this.description),fieldMap:p.clone(this.fieldMap),label:p.clone(this.label),url:p.clone(this.url),
visualVariables:p.clone(this.visualVariables)})};d.prototype.collectRequiredFields=function(a,b){return c(this,void 0,void 0,function(){var c;return e(this,function(d){switch(d.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:d.sent();for(c in this.fieldMap)a.add(this.fieldMap[c]);return[2]}})})};d.prototype.fetchResources=function(a){return c(this,void 0,void 0,function(){var c,d,g,l,m,p,t,r,u,x,w;return e(this,function(e){switch(e.label){case 0:if(!this.url)return z.error("no valid URL!"),
[2];this._dictionaryPromise=b(this.url+"/resources/styles/dictionary-info.json",k({responseType:"json",query:{f:"json"}},a));return[4,n.all([this._dictionaryPromise,y.loadArcade()])];case 1:c=e.sent();d=c[0].data;g=c[1].arcadeUtils;if(!d)throw new f("esri.renderers.DictionaryRenderer","Bad dictionary data!");l=d.expression;m=d.authoringInfo;p=m.configuration;this._refSymbolUrlTemplate=d.cimRefTemplateUrl;this._itemNames=new h.default(d.itemsNames);t=new Map;this._symbolAttributes=m.symbol;this._syntaxTree=
g.createSyntaxTree(l);r=0;for(u=p;r<u.length;r++)x=u[r],t.set("$"+x.name,x.value);if(w=this.config)for(x in w)t.set("$"+x,w[x]);this._configurationAttributes=t;this._arcadeUtils=g;return[2]}})})};d.prototype.fetchSymbol=function(a,b){return c(this,void 0,void 0,function(){var c,d,f,g,h,k,l,n,p,t,r,u,y,w,F,E,D,B,H,ca,da,qa;return e(this,function(e){switch(e.label){case 0:return this._dictionaryPromise||this.fetchResources(b),[4,this._dictionaryPromise];case 1:e.sent();c={};this._configurationAttributes.forEach(function(a,
b){c[b]=a});d=0;for(f=this._symbolAttributes;d<f.length;d++)g=f[d],(h=this.fieldMap[g])&&null!==a.attributes[h]&&void 0!==a.attributes[h]?(k=""+a.attributes[h],c["$"+g]=k):c["$"+g]="";l=this._arcadeUtils;n=l.evalSyntaxTree(this._syntaxTree,{vars:c,spatialReference:null});if(!n||"string"!==typeof n)return[2,null];p=n.split(";");t=[];r=[];u=0;for(y=p;u<y.length;u++)if((w=y[u])&&0!==w.length)if(-1!==w.indexOf("po:"))F=w.substr(3).split("|"),3===F.length&&(E=F[0],D=F[1],B=F[2],"DashTemplate"===D?B=B.split(" ").map(function(a){return Number(a)}):
"Color"===D?(H=(new m(B)).toRgba(),B={r:H[0],g:H[1],b:H[2],a:H[3]}):B=Number(B),r.push({primitiveName:E,propertyName:D,value:B}));else if(-1!==w.indexOf("|"))for(ca=0,da=w.split("|");ca<da.length;ca++)qa=da[ca],this._itemNames.has(qa)&&t.push(qa);else this._itemNames.has(w)&&t.push(w);return[2,A.expandSymbol(new x({styleUrl:this.url+"/"+this._refSymbolUrlTemplate,styleName:t}),C).then(function(a){var b=function(a){if(!a)return z.error("CIM Symbol has no data!"),null;a.primitiveOverrides=r};a&&a.data&&
0<r.length&&(Array.isArray(a.data)?a.data.forEach(function(a){return b(a)}):a.data&&b(a.data));return a})]}})})};d.prototype.getSymbol=function(a,b){return null};d.prototype.getSymbolAsync=function(a,b){return c(this,void 0,void 0,function(){return e(this,function(a){return[2,null]})})};d.prototype.getSymbols=function(){return[]};d.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};d.prototype.getMeshHash=
function(){return this.url+"-"+JSON.stringify(this.fieldMap)};var t;g([r.property({type:Object,json:{write:!0}})],d.prototype,"config",void 0);g([r.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);g([r.property({type:Object,json:{write:!0}})],d.prototype,"fieldMap",void 0);g([r.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);g([r.property({type:String,json:{write:!0}})],d.prototype,"url",void 0);return d=t=g([r.subclass("esri.renderers.DictionaryRenderer")],
d)}(r.declared(w,t))})},"esri/renderers/DotDensityRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesRenderer ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){return function(a){function d(b){b=a.call(this,b)||this;b.attributes=null;b.backgroundColor=new h([0,0,0,0]);b.blendDots=!0;b.dotBlendingEnabled=!0;b.dotShape="square";b.dotSize=1;b.legendOptions=null;b.outline=new t;b.dotValue=null;b.referenceDotValue=null;b.referenceScale=null;b.seed=1;b.type="dot-density";return b}l(d,a);k=d;d.prototype.calculateDotValue=function(a){if(null==this.referenceScale)return this.dotValue;a=a/this.referenceScale*this.dotValue;
return 1>a?1:a};d.prototype.getSymbol=function(a,b){return new w({outline:this.outline})};d.prototype.getSymbolAsync=function(a,b){return c(this,void 0,void 0,function(){return e(this,function(a){return[2,this.getSymbol(null)]})})};d.prototype.getSymbols=function(){return[this.getSymbol(null)]};d.prototype.getAttributeHash=function(){return this.attributes&&this.attributes.reduce(function(a,b){return a+b.getAttributeHash()},"")};d.prototype.getMeshHash=function(){return JSON.stringify(this.outline)};
d.prototype.clone=function(){return new k({attributes:m.clone(this.attributes),backgroundColor:m.clone(this.backgroundColor),dotBlendingEnabled:m.clone(this.dotBlendingEnabled),dotShape:m.clone(this.dotShape),dotSize:m.clone(this.dotSize),dotValue:m.clone(this.dotValue),legendOptions:m.clone(this.legendOptions),outline:m.clone(this.outline),referenceScale:m.clone(this.referenceScale),visualVariables:m.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};d.prototype.getControllerHash=
function(){var a=this.attributes.map(function(a){return a.field||a.valueExpression||""}),b=this.outline&&JSON.stringify(this.outline.toJSON())||"";return a+"-"+b};d.prototype.collectRequiredFields=function(a,b){return c(this,void 0,void 0,function(){var c,d,g;return e(this,function(e){switch(e.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:e.sent(),c=0,d=this.attributes,e.label=2;case 2:if(!(c<d.length))return[3,6];g=d[c];return g.valueExpression?[4,f.collectArcadeFieldNames(a,b,
g.valueExpression)]:[3,4];case 3:e.sent(),e.label=4;case 4:g.field&&a.add(g.field),e.label=5;case 5:return c++,[3,2];case 6:return[2]}})})};var k;g([b.property({type:[n],json:{write:!0}})],d.prototype,"attributes",void 0);g([b.property({type:h,json:{write:!0}})],d.prototype,"backgroundColor",void 0);g([b.property({type:Boolean}),b.aliasOf("dotBlendingEnabled")],d.prototype,"blendDots",void 0);g([b.property({type:Boolean,json:{write:!0}})],d.prototype,"dotBlendingEnabled",void 0);g([b.property({type:String,
json:{write:!0}})],d.prototype,"dotShape",void 0);g([b.property({type:Number,json:{write:!0}})],d.prototype,"dotSize",void 0);g([b.property({type:r,json:{write:!0}})],d.prototype,"legendOptions",void 0);g([b.property({type:t,json:{default:null,write:!0}})],d.prototype,"outline",void 0);g([b.property({type:Number,json:{write:!0}})],d.prototype,"dotValue",void 0);g([b.property({type:Number}),b.aliasOf("dotValue")],d.prototype,"referenceDotValue",void 0);g([b.property({type:Number,json:{write:!0}})],
d.prototype,"referenceScale",void 0);g([b.property({type:Number,json:{write:!0}})],d.prototype,"seed",void 0);g([b.enumeration.serializable()({dotDensity:"dot-density"})],d.prototype,"type",void 0);return d=k=g([b.subclass("esri.renderers.DotDensityRenderer")],d)}(b.declared(p,u))})},"esri/renderers/support/AttributeColorInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(d,a,l,g,k,e,c,h,m){var b=c.getLogger("esri.renderers.support.AttributeColorInfo");return function(a){function c(b){b=a.call(this,b)||this;b.color=null;b.field=null;b.label=null;b.valueExpression=null;b.valueExpressionTitle=null;return b}l(c,a);d=c;c.prototype.castField=function(a){return null==a?a:"function"===typeof a?(b.error(".field: field must be a string value"),null):m.ensureString(a)};c.prototype.getAttributeHash=function(){return this.field+"-"+this.valueExpression};c.prototype.clone=
function(){return new d({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};var d;g([h.property({type:k,json:{type:[Number],write:!0}})],c.prototype,"color",void 0);g([h.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);g([h.cast("field")],c.prototype,"castField",null);g([h.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);g([h.property({type:String,json:{write:!0}})],
c.prototype,"valueExpression",void 0);g([h.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);return c=d=g([h.subclass("esri.renderers.support.AttributeColorInfo")],c)}(h.declared(e))})},"esri/renderers/support/DotDensityLegendOptions":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e){return function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.unit=null;return b}g(c,a);d=c;c.prototype.clone=function(){return new d({unit:this.unit})};var d;l([e.property({type:String,json:{write:!0}})],c.prototype,"unit",void 0);return c=d=l([e.subclass("esri.renderers.support.DotDensityLegendOptions")],c)}(e.declared(k))})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){return function(a){function d(b){b=a.call(this)||this;b.blurRadius=10;b.colorStops=[new p.HeatmapColorStop({ratio:0,color:new c("rgba(255, 140, 0, 0)")}),new p.HeatmapColorStop({ratio:.75,color:new c("rgba(255, 140, 0, 1)")}),new p.HeatmapColorStop({ratio:.9,color:new c("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}l(d,a);f=d;d.prototype.collectRequiredFields=function(a,c){return e(this,
void 0,void 0,function(){var d;return k(this,function(e){(d=this.field)&&"string"===typeof d&&b.collectField(a,c,d);return[2]})})};d.prototype.getAttributeHash=function(){return null};d.prototype.getMeshHash=function(){return JSON.stringify(this.colorStops)+"."+this.blurRadius};d.prototype.clone=function(){return new f({blurRadius:this.blurRadius,colorStops:h.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};var f;g([m.property({type:Number,
json:{write:!0}})],d.prototype,"blurRadius",void 0);g([m.property({type:[p.HeatmapColorStop],json:{write:!0}})],d.prototype,"colorStops",void 0);g([m.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);g([m.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],d.prototype,"fieldOffset",void 0);g([m.property({type:Number,json:{write:!0}})],d.prototype,"maxPixelIntensity",void 0);g([m.property({type:Number,json:{write:!0}})],d.prototype,"minPixelIntensity",
void 0);g([m.enumeration.serializable()({heatmap:"heatmap"})],d.prototype,"type",void 0);return d=f=g([m.subclass("esri.renderers.HeatmapRenderer")],d)}(m.declared(f))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function d(b){b=
a.call(this)||this;b.color=null;b.ratio=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({color:this.color,ratio:this.ratio})};var b;g([c.property({type:k,json:{write:!0}})],d.prototype,"color",void 0);g([c.property({type:Number,json:{write:!0}})],d.prototype,"ratio",void 0);return d=b=g([c.subclass("esri.renderers.support.HeatmapColorStop")],d)}(c.declared(e));a.HeatmapColorStop=d;a.default=d})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../core/lang ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ../symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){return function(a){function b(b){b=a.call(this)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}l(b,a);d=b;b.prototype.writeSymbolWebScene=function(a,b,c,d){p.writeTarget(a,b,c,d)};b.prototype.writeSymbol=function(a,b,c,d){p.writeTarget(a,b,c,d)};b.prototype.readSymbol=function(a,b,c){return p.read(a,b,c)};b.prototype.collectRequiredFields=function(a,b){return e(this,void 0,void 0,function(){return k(this,function(c){this.getSymbols().forEach(function(c){return c.collectRequiredFields(a,
b)});return[2,this.collectVVRequiredFields(a,b)]})})};b.prototype.getSymbol=function(a,b){return this.symbol};b.prototype.getSymbolAsync=function(a,b){return e(this,void 0,void 0,function(){return k(this,function(a){return[2,this.symbol]})})};b.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};b.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};b.prototype.getMeshHash=function(){return this.getSymbols().reduce(function(a,
b){return a+=JSON.stringify(b)},"")};b.prototype.clone=function(){return new d({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:h.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};var d;g([m.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);g([m.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);g([m.property({types:c.symbolTypesRenderer})],b.prototype,"symbol",
void 0);g([m.writer("web-scene","symbol",{symbol:{types:c.symbolTypesRenderer3D}})],b.prototype,"writeSymbolWebScene",null);g([m.writer("symbol")],b.prototype,"writeSymbol",null);g([m.reader("symbol")],b.prototype,"readSymbol",null);g([m.enumeration.serializable()({simple:"simple"})],b.prototype,"type",void 0);return b=d=g([m.subclass("esri.renderers.SimpleRenderer")],b)}(m.declared(b,f))})},"esri/renderers/StretchRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/stretchRendererUtils ../tasks/support/ColorRamp ../tasks/support/colorRamps".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.colorRamp=null;b.computeGamma=!1;b.dynamicRangeAdjustment=!0;b.gamma=[];b.maxPercent=null;b.minPercent=null;b.numberOfStandardDeviations=null;b.outputMax=null;b.outputMin=null;b.sigmoidStrengthLevel=null;b.statistics=[];b.useGamma=!1;b.stretchType="none";b.type="raster-stretch";return b}l(d,a);h=d;d.prototype.readColorRamp=function(a,b){if(a)return f.fromJSON(a)};d.prototype.writeStatistics=
function(a,b,c){null==a||0===a.length?a=null:a[0]instanceof Array||(a=a.map(function(a){return[a.min,a.max,a.avg,a.stddev]}));b[c]=a};d.prototype.clone=function(){return new h({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:e.clone(this.statistics),gamma:e.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,
maxPercent:this.maxPercent,colorRamp:e.clone(this.colorRamp),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};var h;g([c.property({type:b,json:{write:!0}})],d.prototype,"colorRamp",void 0);g([c.reader("colorRamp")],d.prototype,"readColorRamp",null);g([c.property({type:Boolean,json:{write:!0}})],d.prototype,"computeGamma",void 0);g([c.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],d.prototype,"dynamicRangeAdjustment",void 0);g([c.property({type:[Number],json:{write:{allowNull:!0}}})],
d.prototype,"gamma",void 0);g([c.property({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"maxPercent",void 0);g([c.property({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"minPercent",void 0);g([c.property({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"numberOfStandardDeviations",void 0);g([c.property({type:Number,json:{read:{source:"max"},write:{target:"max",allowNull:!0}}})],d.prototype,"outputMax",void 0);g([c.property({type:Number,json:{read:{source:"min"},write:{target:"min",
allowNull:!0}}})],d.prototype,"outputMin",void 0);g([c.property({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"sigmoidStrengthLevel",void 0);g([c.property({json:{write:{allowNull:!0}}})],d.prototype,"statistics",void 0);g([c.writer("statistics")],d.prototype,"writeStatistics",null);g([c.property({type:Boolean,json:{write:!0}})],d.prototype,"useGamma",void 0);g([c.property({type:m.stretchTypeJSONDict.apiValues,json:{type:m.stretchTypeJSONDict.jsonValues,read:m.stretchTypeJSONDict.read,write:m.stretchTypeJSONDict.write}})],
d.prototype,"stretchType",void 0);g([c.enumeration.serializable()({rasterStretch:"raster-stretch"})],d.prototype,"type",void 0);return d=h=g([c.subclass("esri.renderers.StretchRenderer")],d)}(c.declared(h))})},"esri/renderers/support/stretchRendererUtils":function(){define(["require","exports","../../core/jsonMap"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.stretchTypeJSONDict=new l.default({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",
minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"})})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesRenderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeOnDemand ../symbols/support/jsonUtils ../symbols/support/styleUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F,H){var G=n.getLogger("esri.renderers.UniqueValueRenderer"),J=t.ensureType(B.default);return function(a){function d(b){b=a.call(this)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var g=f.find(a,function(a){return a.value===b[e].value});g?C.diff(g,b[e])?(d.changed.push({type:"complete",oldValue:g,newValue:b[e]}),c=!0):d.unchanged.push({oldValue:g,newValue:b[e]}):(d.added.push(b[e]),c=!0)},g=0;g<b.length;g++)e(g);e=function(e){f.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(g=0;g<
a.length;g++)e(g);return c?d:void 0}}};b._set("uniqueValueInfos",[]);return b}l(d,a);n=d;Object.defineProperty(d.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0});d.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){F.writeTarget(a,b,c,d)};d.prototype.castField=function(a){return null==a||"function"===typeof a?a:t.ensureString(a)};d.prototype.writeField=function(a,b,c,d){"string"===typeof a?b[c]=a:d&&d.messages?d.messages.push(new p("property:unsupported",
"UniqueValueRenderer.field set to a function cannot be written to JSON")):G.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});d.prototype.readDefaultSymbol=function(a,b,c){return F.read(a,b,c)};d.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};d.prototype.writeDefaultSymbol=
function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};d.prototype.readPortal=function(a,b,c){return c.portal||x.getDefault()};d.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=r.fromJSON(b.styleUrl,c),Object.freeze({styleUrl:a})};d.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=r.toJSON(a.styleUrl,d))};Object.defineProperty(d.prototype,"uniqueValueInfos",
{set:function(a){this.styleOrigin?G.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});d.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?G.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?J(a):new B.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),
this._valueInfoMap[a.value]=a)};d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)G.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};d.prototype.getUniqueValueInfo=function(a,b){return c(this,void 0,void 0,function(){var c,d;return e(this,function(e){switch(e.label){case 0:return c=
b,this.valueExpression?[4,E.loadArcade()]:[3,2];case 1:d=e.sent().arcadeUtils,c=h({},c,{arcadeUtils:d}),e.label=2;case 2:return[2,this._getUniqueValueInfo(a,c)]}})})};d.prototype.getSymbol=function(a,b){if(!this.valueExpression||b&&b.arcadeUtils)return(a=this._getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol;G.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")};d.prototype.getSymbolAsync=function(a,b){return c(this,void 0,void 0,function(){var c,d,f;return e(this,function(e){switch(e.label){case 0:return c=
b,this.valueExpression?[4,E.loadArcade()]:[3,2];case 1:d=e.sent().arcadeUtils,c=h({},c,{arcadeUtils:d}),e.label=2;case 2:return f=this._getUniqueValueInfo(a,c),[2,f&&f.symbol||this.defaultSymbol]}})})};d.prototype.getSymbols=function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};d.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+
b.getAttributeHash()},"")};d.prototype.getMeshHash=function(){var a=JSON.stringify(this.backgroundFillSymbol),b=JSON.stringify(this.defaultSymbol),c=this.uniqueValueInfos.reduce(function(a,b){return a+b.getMeshHash()},"");return a+"."+b+"."+c+"."+(this.field+"."+this.field2+"."+this.field3+"."+this.fieldDelimiter)+"."+this.valueExpression};d.prototype.clone=function(){var a=new n({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:u.clone(this.defaultSymbol),
valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:u.clone(this.visualVariables),legendOptions:u.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:u.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=u.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(u.clone(this.styleOrigin))),
Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};d.prototype.collectRequiredFields=function(a,b){return c(this,void 0,void 0,function(){return e(this,function(c){switch(c.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:return c.sent(),this.getSymbols().forEach(function(c){return c.collectRequiredFields(a,b)}),y.collectField(a,b,this.field),y.collectField(a,b,this.field2),y.collectField(a,b,this.field3),[4,y.collectArcadeFieldNames(a,b,this.valueExpression)];
case 2:return c.sent(),[2]}})})};d.prototype.populateFromStyle=function(){var a=this;return H.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new m.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new B.default({value:d.name,symbol:e});c.push(e);
a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};d.prototype._getUniqueValueInfo=function(a,b){return this.valueExpression?this._getUnqiueValueInfoForExpression(a,b):this._getUnqiueValueInfoForFields(a)};
d.prototype._getUnqiueValueInfoForExpression=function(a,b){var c=b.arcadeUtils,d=b.viewingMode,e=b.scale;b=b.spatialReference;var f=this._cache.compiledFunc;f||(f=c.createSyntaxTree(this.valueExpression),f=c.createFunction(f),this._cache.compiledFunc=f);a=c.executeFunction(f,c.createExecContext(a,c.getViewInfo({viewingMode:d,scale:e,spatialReference:b})));return this._valueInfoMap[a+""]};d.prototype._getUnqiueValueInfoForFields=function(a){var b=this.field,c=a.attributes,d;if("function"!==typeof b&&
this.field2){a=this.field2;d=this.field3;var e=[];b&&e.push(c[b]);a&&e.push(c[a]);d&&e.push(c[d]);d=e.join(this.fieldDelimiter||"")}else"function"===typeof b?d=b(a):b&&(d=c[b]);return this._valueInfoMap[d+""]};d.fromPortalStyle=function(a,b){var c=new n(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||x.getDefault());b=c.populateFromStyle();b.catch(function(b){G.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",
b)});return b};d.fromStyleUrl=function(a,b){b=new n(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){G.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)});return b};var n;g([w.property({readOnly:!0,dependsOn:["valueExpression"]})],d.prototype,"_cache",null);g([w.enumeration.serializable()({uniqueValue:"unique-value"})],d.prototype,"type",void 0);g([w.property({types:{base:m.BaseSymbol,key:"type",
typeMap:{"simple-fill":b.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":b.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":b.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{read:F.read,write:F.writeTarget}})],d.prototype,"backgroundFillSymbol",void 0);g([w.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:m.PolygonSymbol3D}})],d.prototype,"writeBackgroundFillSymbolWebScene",null);g([w.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],
d.prototype,"field",void 0);g([w.cast("field")],d.prototype,"castField",null);g([w.writer("field")],d.prototype,"writeField",null);g([w.property({type:String,json:{write:!0}})],d.prototype,"field2",void 0);g([w.property({type:String,json:{write:!0}})],d.prototype,"field3",void 0);g([w.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);g([w.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);g([w.property({type:D.default,json:{write:!0}})],
d.prototype,"legendOptions",void 0);g([w.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);g([w.property({types:b.symbolTypesRenderer})],d.prototype,"defaultSymbol",null);g([w.reader("defaultSymbol")],d.prototype,"readDefaultSymbol",null);g([w.writer("web-scene","defaultSymbol",{defaultSymbol:{types:b.symbolTypesRenderer3D}})],d.prototype,"writeDefaultSymbolWebScene",null);g([w.writer("defaultSymbol")],d.prototype,"writeDefaultSymbol",null);g([w.property({type:String,json:{write:!0}})],
d.prototype,"fieldDelimiter",void 0);g([w.property({type:x,readOnly:!0})],d.prototype,"portal",void 0);g([w.reader("portal",["styleName"])],d.prototype,"readPortal",null);g([w.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],d.prototype,"styleOrigin",void 0);g([w.reader("styleOrigin",["styleName","styleUrl"])],d.prototype,"readStyleOrigin",null);g([w.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],d.prototype,"writeStyleOrigin",
null);g([w.property({type:[B.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],d.prototype,"uniqueValueInfos",null);g([k(1,w.cast(b.ensureType))],d.prototype,"addUniqueValueInfo",null);return d=n=g([w.subclass("esri.renderers.UniqueValueRenderer")],d)}(w.declared(A,z))})},"esri/renderers/support/diffUtils":function(){define("require exports ../../core/Accessor ../../core/Collection ../../core/maybe ../../core/accessorSupport/utils".split(" "),
function(d,a,l,g,k,e){function c(a){return a instanceof g?Object.keys(a.items):a instanceof l?e.getProperties(a).keys():a?Object.keys(a):[]}function h(a,b){return a instanceof g?a.items[b]:a[b]}function m(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function b(a){return a?a.declaredClass:null}function f(a,d){var e,g=a.diff;if(g&&"function"===typeof g)return g(a,d);var n=c(a),p=c(d);if(0!==n.length||0!==p.length){if(!n.length||!p.length||m(a,d))return{type:"complete",oldValue:a,
newValue:d};var r=p.filter(function(a){return-1===n.indexOf(a)}),z=n.filter(function(a){return-1===p.indexOf(a)}),r=n.filter(function(b){return-1<p.indexOf(b)&&h(a,b)!==h(d,b)}).concat(r,z).sort();if((z=b(a))&&-1<u.indexOf(z)&&r.length)return{type:"complete",oldValue:a,newValue:d};var C,z=a instanceof l&&d instanceof l,D;for(D in r){var B=r[D],E=h(a,B),F=h(d,B),H=void 0;!(z||"function"!==typeof E&&"function"!==typeof F)||E===F||null==E&&null==F||(H=g&&g[B]&&"function"===typeof g[B]?g[B](E,F):"object"===
typeof E&&"object"===typeof F&&b(E)===b(F)?f(E,F):{type:"complete",oldValue:E,newValue:F},k.isSome(H)&&(k.isSome(C)?C.diff[B]=H:C={type:"partial",diff:(e={},e[B]=H,e)}))}return C}}function p(a){if(k.isNone(a))return!0;switch(a.type){case "complete":return!1;case "collection":for(var b=0,c=a.added;b<c.length;b++){var d=c[b];if(!p(d))return!1}b=0;for(c=a.removed;b<c.length;b++)if(d=c[b],!p(d))return!1;b=0;for(a=a.changed;b<a.length;b++)if(d=a[b],!p(d))return!1;return!0;case "partial":for(b in a.diff)if(d=
a.diff[b],!p(d))return!1;return!0}}Object.defineProperty(a,"__esModule",{value:!0});var u=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];a.diff=function(a,c){if("function"!==typeof a&&"function"!==typeof c&&(a||c))return!a||!c||"object"===typeof a&&"object"===typeof c&&b(a)!==b(c)?{type:"complete",oldValue:a,newValue:c}:f(a,c)};a.isEmpty=p})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b){b=a.call(this,b)||this;b.description=null;b.label=null;b.symbol=null;b.value=null;return b}l(b,a);d=b;b.prototype.clone=function(){return new d({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};b.prototype.getMeshHash=function(){var a=JSON.stringify(this.symbol&&this.symbol.toJSON());return this.value+"."+a};var d;g([c.property({type:String,
json:{write:!0}})],b.prototype,"description",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);g([c.property({types:k.symbolTypesRenderer,json:{origins:{"web-scene":{types:k.symbolTypesRenderer3D,read:h.read,write:h.writeTarget}},read:h.read,write:h.writeTarget}})],b.prototype,"symbol",void 0);g([c.property({type:String,json:{write:!0}})],b.prototype,"value",void 0);return b=d=g([c.subclass("esri.renderers.support.UniqueValueInfo")],b)}(c.declared(e));a.UniqueValueInfo=
d;a.default=d})},"esri/symbols/support/styleUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/has ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){function w(a,c,d){return B(a,d).then(function(c){return{data:c.data,baseUrl:b.removeFile(a),styleUrl:a}})}
function t(a,b,c){b=b.portal||f.getDefault();var d,e=b.url+" - "+(b.user&&b.user.username)+" - "+a;E[e]||(E[e]=y(a,b,c).then(function(a){d=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:d.itemUrl,styleName:a}}));return E[e]}function y(a,b,d){return b.load(d).then(function(){var c=new p({disableExtraQuery:!0,query:"owner:"+F+" AND type:"+H+' AND typekeywords:"'+a+'"'});return b.queryItems(c,d)}).then(function(b){b=b.results;var e=null,f=a.toLowerCase();if(b&&Array.isArray(b))for(var g=
0;g<b.length;g++){var h=b[g];if(h.typeKeywords.some(function(a){return a.toLowerCase()===f})&&h.type===H&&h.owner===F){e=h;break}}if(!e)throw new c("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});return e.load(d)})}function x(a,b,d){return a.styleUrl?w(a.styleUrl,b,d):a.styleName?t(a.styleName,b,d):m.reject(new c("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function A(a,d,f,g,h){for(var l=a.data,
p={portal:f.portal,url:b.urlToObject(a.baseUrl),origin:"portal-item"},t=function(c){if(c.name!==d)return"continue";var l=b.fromJSON(C(c,g),p),m=c.thumbnail&&c.thumbnail.href,t=c.thumbnail&&c.thumbnail.imageData;e.isDevEnvironment()&&(l=e.adjustStaticAGOUrl(l),m=e.adjustStaticAGOUrl(m));var y={portal:f.portal,url:b.urlToObject(b.removeFile(l)),origin:"portal-item"};return{value:B(l,h).then(function(c){c="cimRef"===g?z(c.data):c.data;if((c=u.fromJSON(c,y))&&k.isSymbol3D(c)){if(m){var e=b.fromJSON(m,
p);c.thumbnail=new r.default({url:e})}else t&&(c.thumbnail=new r.default({url:"data:image/png;base64,"+t}));a.styleUrl?c.styleOrigin=new n({portal:f.portal,styleUrl:a.styleUrl,name:d}):a.styleName&&(c.styleOrigin=new n({portal:f.portal,styleName:a.styleName,name:d}))}return c})}},y=0,l=l.items;y<l.length;y++){var x=t(l[y]);if("object"===typeof x)return x.value}return m.reject(new c("symbolstyleutils:symbol-name-not-found","The symbol name '"+d+"' could not be found",{symbolName:d}))}function z(a){return null===
a||"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a}}function C(a,b){if("cimRef"===b)return a.cimRef;if(a.formatInfos&&!h("enable-feature:jschmid/force-wosr")){b=0;for(var c=a.formatInfos;b<c.length;b++){var d=c[b];if("gltf"===d.type)return d.href}}return a.webRef}function D(a,c,d){var e=G.replace(/\{SymbolName\}/gi,a.name);return B(e,d).then(function(a){a=z(a.data);return u.fromJSON(a,{portal:c.portal,url:b.urlToObject(b.removeFile(e)),origin:"portal-item"})})}function B(a,c){c=
l({responseType:"json",query:{f:"json"}},c);return g(b.normalize(a),c)}Object.defineProperty(a,"__esModule",{value:!0});var E={};a.fetchStyle=x;a.resolveWebStyleSymbol=function(a,b,d,e){return a.name?a.styleName&&"Esri2DPointSymbolsStyle"===a.styleName?D(a,b,e):x(a,b,e).then(function(c){return A(c,a.name,b,d,e)}):m.reject(new c("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};a.fetchSymbolFromStyle=A;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<
a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var F="esri_en",H="Style",G="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports","./global"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.isDevEnvironment=function(a){a=a||l.location.hostname;return h.some(function(b){return null!=a.match(b)})};
a.adjustStaticAGOUrl=function(a,b){if(!a)return a;b=b||l.location.hostname;return null!=b.match(g)||null!=b.match(e)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=b.match(k)||null!=b.match(c)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a};a.isTelemetryDevEnvironment=function(a){a=a||l.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(h).some(function(b){return null!=a.match(b)})};var g=/^devext.arcgis.com$/,k=/^qaext.arcgis.com$/,e=/^[\w-]*\.mapsdevext.arcgis.com$/,c=
/^[\w-]*\.mapsqa.arcgis.com$/,h=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,g,k,/^jsapps.esri.com$/,e,c]})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../SimpleRenderer ../StretchRenderer ../UniqueValueRenderer".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==
a.type)return c&&c.messages&&c.messages.push(new k("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:c})),null;b=a?r[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new k("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function n(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&
c.messages.push(new l("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(a,"__esModule",{value:!0});var r={simple:b,uniqueValue:p,classBreaks:e,heatmap:m,dotDensity:h,rasterStretch:f,dictionary:c};a.read=u;a.writeTarget=function(a,b,c,d){(a=n(a,{},d))&&g.setDeepValue(c,a,b)};a.write=n;a.fromJSON=function(a,b){return u(a,null,b)}})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/mathUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../../vectorTiles/GeometryUtils ../../color ../../definitions ../../enums ../../number ../../TextShaping ../../collisions/Metric ../../materialKey/MaterialKey ./GlyphGroup ./util ./WGLTextTemplate ../../../../support/mathUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C){function D(a){switch(a){case "above-left":return[-1,-1];case "above-center":case "above-along":return[0,-1];case "above-right":return[1,-1];case "center-left":return[-1,0];case "center-center":case "center-along":return[0,0];case "center-right":return[1,0];case "below-left":return[-1,1];case "below-center":case "below-along":return[0,1];case "below-right":return[1,1];case "always-horizontal":return[0,0];default:G("Found invalid placement type "+
a)}}Object.defineProperty(a,"__esModule",{value:!0});var B=k.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),E=b.vec2f32.create(),F=h.mat2df32.create(),H={xOffset:0,yOffset:0,width:0,height:0},G=function(a,b){void 0===b&&(b="mapview-labeling");return B.error(new g(b,a))};a.isMapAligned=function(a){switch(a){case "above-along":case "below-along":case "center-along":return 1;default:return 0}};d=function(a){function b(b,c,d,f){d=a.call(this,b,d.font.size,d.haloSize||0,d.color&&p.premultiplyAlphaRGBA(d.color)||
0,d.haloColor&&p.premultiplyAlphaRGBA(d.haloColor)||0,d.horizontalAlignment,d.verticalAlignment,d.font.decoration,d.angle||0,d.xoffset,d.yoffset,d.id)||this;d._refTemplate=H;d.geometryType=n.WGLGeometryType.LABEL;var g=c.symbol,h;h=!!c.minScale&&f.scaleToZoom(c.minScale)||0;h=e.clamp(h,0,25.5);f=!!c.maxScale&&f.scaleToZoom(c.maxScale)||255;f=e.clamp(f,0,25.5);var k=D(c.labelPlacement),l=k[0],k=k[1];d._justify=(-1*l+1)/2;d._xAlignD=l;d._yAlignD=k;d._xPlacementD=l;d._yPlacementD=k;d._minZoom=h;d._maxZoom=
f;b=y.LabelMaterialKey.load(y.createMaterialKey(d.geometryType,b,!1,c));b.sdf=!0;d._materialKey=b.data;b=g.font.decoration.toLowerCase();"underline"===b?d._decorationTop=6:"line-through"===b&&(d._decorationTop=-5);return d}l(b,a);b.fromLabelClass=function(a,c,d){return new b(a,c,c.symbol,d)};b.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);isNaN(this._decorationTop)||w.TextShaping.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=
w.TextShaping.getBox(a)};b.prototype._computeShaping=function(a,b){return new w.TextShaping([a],u.TEXT_MAX_WIDTH,u.TEXT_LINE_HEIGHT,u.TEXT_SPACING,[0,0],.5,.5,b)};Object.defineProperty(b.prototype,"bounds",{get:function(){return this._bounds},enumerable:!0,configurable:!0});b.prototype.bindReferenceTemplate=function(a){this._refTemplate=a||H};b.prototype._placeGlyphs=function(a,b,c,d){var e=this._size,f=this._haloSize,g=this._shapedBox,h=this._shapedGlyphs,k=this._computeGlyphTransform(g);if("esriGeometryPolyline"!==
a)for(var l=0;l<c.length;l++)for(var m=c[l],n=0,p=h;n<p.length;n++){var t=p[n];m.place(t,a,b,k,this._materialKey,e,f,g,d,this._minZoom,this._maxZoom)}else for(l=0;l<c.length;l++)for(var m=c[l],n=t=m.order,p=n-(n-1)/2-1,r=p-(p-1)/2-1,u=r-(r-1)/2-1,t=-1===t?0:n%2?p%2?r%2?u%2?0:d-3.1:d-2.1:d-1.1:d-.1,n=Math.max(d+C.log2((this._shapedBox.width*this._scale+48)/m.pathLen),Math.max(t,this._minZoom)),p=0,r=h;p<r.length;p++)t=r[p],m.place(t,a,b,k,this._materialKey,e,f,g,d,n,this._maxZoom)};b.prototype.writeMesh=
function(a,b,c,d,e,f,g){var h=this,k=this._computeAnchors(c,e),l=r.i8888to32(0,0,0,this._bitset);if(k.length&&this._shapedGlyphs.length){this._placeGlyphs(c,e,k,f);var m=y.LabelMaterialKey.load(this._materialKey);if("esriGeometryPolyline"!==c){c=k[0];e=this._computeGlyphTransform(this._shapedBox);e=this._createBounds(this._shapedBox,e);f=c.glyphs.get(0);var n=f[0],p=n.anchorX,x=n.anchorY,F=Math.floor(10*n.minZoom),n=Math.floor(10*n.maxZoom),w=a.length;f.forEach(function(a){a.minZoom=25.5;a.maxZoom=
25.5});w=new t.default(d,{from:w,count:a.length-w},p,x,F);p=Math.floor(p/u.COLLISION_BUCKET_SIZE);x=Math.floor(x/u.COLLISION_BUCKET_SIZE);p>=u.COLLISION_TILE_BOX_SIZE||x>=u.COLLISION_TILE_BOX_SIZE||0>p||0>x||(this._writeVertices(a,b,d,f,m,l,F,n),f=Math.max(this._refTemplate.height,this._refTemplate.width),m.vvSizeFieldStops||m.vvSizeMinMaxValue||m.vvSizeScaleStops||m.vvSizeUnitValue?w.setVV(f,this._xPlacementD,this._yPlacementD):(w.offsetX=(f/2+u.COLLISION_PLACEMENT_PADDING)*this._xPlacementD,w.offsetY=
(f/2+u.COLLISION_PLACEMENT_PADDING)*this._yPlacementD),w.bounds=e,g.push(w),c.clear())}else{c=function(c){var e=k[c],f=e.x,n=e.y;c=a.length;var p=new t.default(d,{from:c,count:-1},f,n,25.5);e.glyphs.forEach(function(c){for(var g=0;g<c.length;g++){var k=c[g];k.minZoom=Math.max(e.minZoom,k.minZoom);if(k.bounds){var t=k.anchorY-n;k.bounds.center[0]+=k.anchorX-f;k.bounds.center[1]+=t;p.add(k.bounds)}}p.bounds&&h._writeHalos(a,b,d,c,m,l)});e.glyphs.forEach(function(c){p.bounds&&h._writeText(a,b,d,c,m,
l)});p.range.count=a.length-c;p.bounds&&g.push(p);e.clear()};for(e=0;e<k.length;e++)c(e);this._computedGlyphs=[]}}};b.prototype._outsideTile=function(a,b){return 0>a||512<=a||0>b||512<=b};b.prototype._smoothVertices=function(a,b){if(!(0>=b)){var c=a.length;if(!(3>c)){var d=[],e=0;d.push(0);for(var f=1;f<c;f++)e+=A.dist(a[f],a[f-1]),d.push(e);b=Math.min(b,.2*e);e=[];e.push(a[0][0]);e.push(a[0][1]);var g=a[c-1][0],h=a[c-1][1],f=A.sub([0,0],a[0],a[1]);A.normalize(f);a[0][0]+=b*f[0];a[0][1]+=b*f[1];A.sub(f,
a[c-1],a[c-2]);A.normalize(f);a[c-1][0]+=b*f[0];a[c-1][1]+=b*f[1];for(f=1;f<c;f++)d[f]+=b;d[c-1]+=b;for(var k=.5*b,f=1;f<c-1;f++){for(var l=0,m=0,n=0,p=f-1;0<=p&&!(d[p+1]<d[f]-k);p--){var t=k+d[p+1]-d[f],r=d[p+1]-d[p],u=d[f]-d[p]<k?1:t/r;if(1E-6>Math.abs(u))break;var y=u*u,x=u*t-.5*y*r,F=u*r/b,w=a[p+1],E=a[p][0]-w[0],z=a[p][1]-w[1],l=l+F/x*(w[0]*u*t+.5*y*(t*E-r*w[0])-y*u*r*E/3),m=m+F/x*(w[1]*u*t+.5*y*(t*z-r*w[1])-y*u*r*z/3),n=n+F}for(p=f+1;p<c&&!(d[p-1]>d[f]+k);p++){t=k-d[p-1]+d[f];r=d[p]-d[p-1];
u=d[p]-d[f]<k?1:t/r;if(1E-6>Math.abs(u))break;y=u*u;x=u*t-.5*y*r;F=u*r/b;w=a[p-1];E=a[p][0]-w[0];z=a[p][1]-w[1];l+=F/x*(w[0]*u*t+.5*y*(t*E-r*w[0])-y*u*r*E/3);m+=F/x*(w[1]*u*t+.5*y*(t*z-r*w[1])-y*u*r*z/3);n+=F}e.push(l/n);e.push(m/n)}e.push(g);e.push(h);for(p=f=0;f<c;f++)a[f][0]=e[p++],a[f][1]=e[p++]}}};b.prototype._computeLineAnchors=function(a,b,c){b=b.paths;var d=this._scale*this._shapedBox.width;c=d/2+c;for(var d=d/2+16,e=this._shapedBox.width*this._scale,f=0;f<b.length;f++){var g=b[f],h=[];h.push(g[0]);
for(var k=1;k<g.length;k++){var l=h[k-1],m=l[0],l=l[1],m=m+g[k][0],l=l+g[k][1];h.push([m,l])}this._smoothVertices(h,e);g=[];g.push(h[0]);for(k=1;k<h.length;k++){var l=h[k-1],n=h[k],m=Math.round(n[0]-l[0]),l=Math.round(n[1]-l[1]);g.push([m,l])}b[f]=g;h=this._getPathLength(g);if(!(h<2*d))for(var k=h/2,p=0,n=g[0][0],t=g[0][1],r=1;r<g.length;r++){var m=g[r][0],l=g[r][1],u=Math.sqrt(m*m+l*l),p=p+u;if(0<=p-k){var y=p-k,F=u-y,w=F/u,E=n+m*w,z=t+l*w;this._outsideTile(E,z)||(p=new x.default(E,z,w,f,r,n,t,u,
h,-1),a.push(p));for(var D=-1,z=0,z=F-c;0<=z;z-=c){var w=z/u,E=n+m*w,B=t+l*w;D++;this._outsideTile(E,B)||(p=new x.default(E,B,w,f,r,n,t,u,h,D),a.push(p))}p=z+c;z=u-y;w=n;E=t;for(B=r-1;0!==B;B--){var C=g[B][0],A=g[B][1],H=Math.sqrt(C*C+A*A);if(p+H>=c){for(var I=p=c-p;I<H;I+=c){var M=I/H,G=w-C*M,J=E-A*M;D++;(p=I+z+d<k)&&!this._outsideTile(G,J)&&(p=new x.default(G,J,1-M,f,B,w-C,E-A,H,h,D),a.push(p))}p=H-(I-c)}else p+=H;z+=H;w-=C;E-=A}D=-1;for(z=F+c;z<=u;z+=c)w=z/u,E=n+m*w,F=t+l*w,D++,this._outsideTile(E,
F)||(p=new x.default(E,F,w,f,r,n,t,u,h,D),a.push(p));w=n+m;E=t+l;p=u-(z-c);z=y;for(B=r+1;B<g.length;B++){m=g[B][0];l=g[B][1];n=Math.sqrt(m*m+l*l);if(p+n>=c){for(t=p=c-p;t<n;t+=c)r=t/n,u=w+m*r,y=E+l*r,D++,(p=t+z+d<k)&&!this._outsideTile(u,y)&&(p=new x.default(u,y,r,f,B,w,E,n,h,D),a.push(p));p=n-(t-c)}else p+=n;z+=n;w+=m;E+=l}break}n+=m;t+=l}}return a};b.prototype._computeAnchors=function(a,b){var c=[];switch(a){case "esriGeometryPoint":return b=b.geometry,a=b.x,b=b.y,a=new x.default(a,b),c.push(a),
c;case "esriGeometryPolygon":if(b.centroid)return b=b.centroid,a=b.x,b=b.y,a=new x.default(a,b),c.push(a),c;G("Non-centroid polygon anchor placement not supported");break;case "esriGeometryPolyline":return this._computeLineAnchors(c,b.geometry,376);default:return G("Unable to handle geometryType: "+a),c}};b.prototype._getPathLength=function(a){for(var b=0,c=1;c<a.length;c++)var d=a[c][0],e=a[c][1],b=b+Math.sqrt(d*d+e*e);return b};b.prototype._computeGlyphTransform=function(a){var b=this._scale,d=
this._angle*f.C_DEG_TO_RAD,e=a.width/2,g=a.height/2,e=this._xAlignD*e*b+(this._xOffset+this._refTemplate.xOffset)+(a.x+e);a=this._yAlignD*g*b-(this._yOffset+this._refTemplate.yOffset)-(a.y+g);g=c.mat2d.identity(F);c.mat2d.translate(g,g,m.vec2.set(E,e,a));c.mat2d.scale(g,g,m.vec2.set(E,b,b));c.mat2d.rotate(g,g,d);return g};b.prototype._writeVertex=function(a,b,c,d,e,f,g,h,k){b=b.get("geometry");g=Math.min(Math.floor(Math.max(this._refTemplate.width,this._refTemplate.height)),255);var l=this._xPlacementD+
1,m=this._yPlacementD+1;h=r.i8888to32(h,k,0,0);this._refSymbolAndPlacementOffset=r.i8888to32(f.angle,g,l,m);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetUpperLeft);b.push(f.texFontSizeUpperLeft);b.push(this._refSymbolAndPlacementOffset);b.push(h);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetUpperRight);b.push(f.texFontSizeUpperRight);b.push(this._refSymbolAndPlacementOffset);b.push(h);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetLowerLeft);b.push(f.texFontSizeLowerLeft);b.push(this._refSymbolAndPlacementOffset);
b.push(h);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetLowerRight);b.push(f.texFontSizeLowerRight);b.push(this._refSymbolAndPlacementOffset);b.push(h);a.vertexCount+=4};return b}(z.default);a.default=d})},"esri/views/2d/engine/webgl/collisions/Metric":function(){define("require exports ../../../../../core/Logger ../../../../../core/libs/gl-matrix-2/vec2f32 ../definitions ./BoundingBox ../util/serializationUtils".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});
var h=l.getLogger("esri/views/2d/engine/webgl/collisions/Metric");d=function(){function a(a,c,d,e,h){this.id=a;this.range=c;this.boxes=null;this.minZoom=-1;this.offsetY=this.offsetX=this.directionY=this.directionX=this.size=0;this.anchor=g.vec2f32.fromValues(d,e);this.baseZoom=h}a.prototype.add=function(a){this.bounds?(this.boxes?this.boxes.push(a):(this.boxes=[this.bounds,a],this.bounds=this.bounds.clone()),this.bounds.extend(a)):this.bounds=a};a.prototype.computeIndex=function(){var a=this.bounds,
c=this.anchor[0],d=this.anchor[1],e=Math.floor(c/k.COLLISION_BUCKET_SIZE),g=Math.floor(d/k.COLLISION_BUCKET_SIZE),h=0;if(e>k.COLLISION_TILE_BOX_SIZE||g>k.COLLISION_TILE_BOX_SIZE)g=e=k.COLLISION_TILE_BOX_SIZE,h=1;if(0>e||0>g)g=e=0,h=1;a=2*Math.max(a.halfWidth+Math.abs(a.center[0]),a.halfHeight+Math.abs(a.center[1]));c%=k.COLLISION_BUCKET_SIZE;d%=k.COLLISION_BUCKET_SIZE;this.xBucket=e;this.yBucket=g;this.xOverflow=Math.ceil(Math.abs((a-c)/k.COLLISION_BUCKET_SIZE))+h;this.yOverflow=Math.ceil(Math.abs((a-
d)/k.COLLISION_BUCKET_SIZE))+h};a.prototype.findCollisionDelta=function(a){var b=this.bounds.findCollisionDelta(a.bounds),c=this.boxes&&this.boxes.length,d=a.boxes&&a.boxes.length;return Math.abs(b)>k.COLLISION_MAX_ZOOM_DELTA||!c&&!d?b:c&&d?this._boxesToBoxes(a):c?this._boxesToBox(a):this._boxToBoxes(a)};a.prototype.computeOffset=function(a,c){c||h.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+c);var b=this.size;this.hasVV&&(a=c(a),b=isNaN(a)||
null==a||Infinity===a?this.size:a);this.offsetX=this.directionX*(b/2+k.COLLISION_PLACEMENT_PADDING);this.offsetY=this.directionY*(b/2+k.COLLISION_PLACEMENT_PADDING)};a.prototype.setVV=function(a,c,d){this.hasVV=!0;this.size=a;this.directionX=c;this.directionY=d};a.prototype.clone=function(){var b=new a(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);b.minZoom=this.minZoom;this.bounds&&(b.bounds=this.bounds.clone());this.boxes&&(b.boxes=this.boxes.map(function(a){return a.clone()}));
b.xBucket=this.xBucket;b.yBucket=this.yBucket;b.xOverflow=this.xOverflow;b.yOverflow=this.yOverflow;b.hasVV=this.hasVV;b.size=this.size;b.directionX=this.directionX;b.directionY=this.directionY;b.offsetX=this.offsetX;b.offsetY=this.offsetY;return b};a.prototype._boxToBoxes=function(a){var b=-Infinity,c=0;for(a=a.boxes;c<a.length;c++)var d=this.bounds.findCollisionDelta(a[c]),b=Math.max(d,b);return b};a.prototype._boxesToBox=function(a){for(var b=this.boxes[0].findCollisionDelta(a.bounds),c=1;c<this.boxes.length;c++)var d=
this.boxes[c].findCollisionDelta(a.bounds),b=Math.max(d,b);return b};a.prototype._boxesToBoxes=function(a){for(var b=-Infinity,c=0;c<this.boxes.length;c++)for(var d=this.boxes[c],e=0,g=a.boxes;e<g.length;e++)var h=d.findCollisionDelta(g[e]),b=Math.max(h,b);return b};a.prototype.serialize=function(a){a.push(this.id);this.bounds.serialize(a);a.push(this.range.from);a.push(this.range.count);a.push(this.anchor[0]);a.push(this.anchor[1]);a.push(this.baseZoom);a.push(this.hasVV?1:0);a.push(this.size);a.push(this.directionX);
a.push(this.directionY);a.push(this.offsetX);a.push(this.offsetY);c.serializeList(a,this.boxes);return a};a.deserialize=function(b){var d=b.readInt32(),g=e.default.deserialize(b),h=b.readInt32(),k=b.readInt32(),l={from:h,count:k},m=b.readInt32(),t=b.readInt32(),y=b.readInt32(),h=b.readInt32(),k=b.readInt32(),x=b.readInt32(),A=b.readInt32(),z=b.readInt32(),C=b.readInt32();b=c.deserializeList(b,e.default);d=new a(d,l,m,t,y);d.bounds=g;d.boxes=b;d.computeIndex();h&&d.setVV(k,x,A);d.offsetX=z;d.offsetY=
C;return d};return a}();a.default=d})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2f32","../../../support/mathUtils"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,c,d,g){this.center=l.vec2f32.fromValues(a,c);this.centerT=l.vec2f32.create();this.halfWidth=d/2;this.halfHeight=g/2;this.width=d;this.height=g}Object.defineProperty(a.prototype,"x",{get:function(){return this.center[0]},
set:function(a){this.center[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this.center[1]},set:function(a){this.center[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blX",{get:function(){return this.center[0]-this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blY",{get:function(){return this.center[1]-this.halfHeight},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"trX",
{get:function(){return this.center[0]+this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"trY",{get:function(){return this.center[1]+this.halfHeight},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.serialize=function(a){a.writeF32(this.center[0]);a.writeF32(this.center[1]);a.push(this.width);a.push(this.height);return a};a.prototype.findCollisionDelta=function(a){return g.log2(Math.min((a.halfWidth+
this.halfWidth)/Math.abs(a.centerT[0]-this.centerT[0]),(a.halfHeight+this.halfHeight)/Math.abs(a.centerT[1]-this.centerT[1])))};a.prototype.extend=function(a){var c=Math.min(this.blX,a.blX),d=Math.min(this.blY,a.blY),e=Math.max(this.trY,a.trY);this.width=Math.max(this.trX,a.trX)-c;this.height=e-d;this.halfWidth=this.width/2;this.halfHeight=this.height/2;this.x=c+this.halfWidth;this.y=d+this.halfHeight};a.deserialize=function(d){var c=d.readF32(),e=d.readF32(),g=d.readInt32();d=d.readInt32();return new a(c,
e,g,d)};return a}();a.default=d})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.serializeList=function(a,d){if(null===d)a.push(0);else{a.push(d.length);for(var g=0;g<d.length;g++)d[g].serialize(a);return a}};a.deserializeList=function(a,d,k){for(var e=a.readInt32(),e=Array(e),c=0;c<e.length;c++)e[c]=d.deserialize(a,k);return e}})},"esri/views/2d/engine/webgl/mesh/templates/GlyphGroup":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../definitions ../../materialKey/MaterialKey ./ComputedGlyph ./util ../../../../support/mathUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});var p=g.getLogger("esri.views.2d.engine.webgl.GlyphGroup");d=function(){function a(a,b,c,d,e,f,g,h,k,l){void 0===c&&(c=0);void 0===d&&(d=-1);void 0===e&&(e=-1);void 0===f&&(f=-1);void 0===g&&(g=-1);void 0===h&&(h=-1);void 0===k&&(k=0);void 0===l&&(l=-1);this.x=a;this.y=b;this.t=c;this.i=d;this.j=e;this.segmentPosX=f;this.segmentPosY=g;this.segmentLen=h;this.pathLen=k;this.order=l;this._glyphs=new Map;this.minZoom=0}Object.defineProperty(a.prototype,
"glyphs",{get:function(){return this._glyphs},enumerable:!0,configurable:!0});a.prototype.add=function(a,b){var c=this._glyphs.get(b);c?c.push(a):this._glyphs.set(b,[a])};a.prototype.clear=function(){this._glyphs.clear()};a.prototype.place=function(a,b,c,d,e,f,g,k,u,D,B){var n=a.x,t=a.y,r=a.codePoint,y=a.glyphMosaicItem;e=h.MaterialKeyBase.load(e);e.textureBinding=a.glyphMosaicItem.textureBinding;switch(b){case "esriGeometryPoint":case "esriGeometryPolygon":a=m.default.from(n,t,this.x,this.y,-1,D,
B,y,r,e.data,d,f,g);this.add(a,0);break;case "esriGeometryPolyline":b=c.geometry;this._placeGlyphAlongLine(a,e.data,b,d,k,f,g,u,D,B,-1);this._placeGlyphAlongLine(a,e.data,b,d,k,f,g,u,D,B,1);break;case "esriGeometryMultipoint":case "esriGeometryEnvelope":a=void 0,void 0===a&&(a="mapview-labeling"),p.error(new l(a,"Cannot place for unsupported geometryType: "+b))}};a.prototype._findLabelTheta=function(a,b,c,d){b*=d;a=Math.acos((0*b+-1*d*-a)/(1*c));0<b&&(a=2*Math.PI-a);return a};a.prototype._placeGlyphAlongLine=
function(a,d,g,h,l,p,u,z,C,D,B){g=g.paths[this.i];var n=g[this.j],t=n[0],r=n[1],n=a.x,y=a.y,x=a.glyphMosaicItem,w=a.codePoint,A=a.glyphMosaicItem.metrics,A=(a.x+A.left+A.width/2)*p/24;a=B*f.sign(A)||1;var A=Math.abs(A),M=b.len(t,r),O=this._findLabelTheta(t,r,M,B),Q=(a+1)/2,M=-a*(-1*Q+this.t)*M,P=k.mat2d.rotate(e.mat2df32.create(),h,-O),S=48<l.height;l=0===M?D:Math.max(Math.max(z+f.log2(Math.abs(A/M)),0),C);S&&(l=C);D=m.default.from(n,y,this.x,this.y,O,l,D,x,w,d,P,p,u,S||l<=z&&D>=z&&1===B);this.add(D,
this.j);if(!S)for(D=this.segmentPosX+Q*t,t=this.segmentPosY+Q*r,P=l,r=this.j+a;0<r&&r<g.length;r+=a){var U=D,T=t,Q=g[r];l=Q[0];var Q=Q[1],R=b.len(l,Q),S=this._findLabelTheta(l,Q,R,B),S=k.mat2d.rotate(e.mat2df32.create(),h,-S),U=U+-a*l/R*M,T=T+-a*Q/R*M,M=M+R,R=P-.1,P=0===M?R:Math.max(Math.max(z+f.log2(Math.abs(A/M)),0),C),S=m.default.from(n,y,U,T,O,P,R,x,w,d,S,p,u,P<=z&&R>=z&&1===B);this.add(S,r);if(P<z-c.COLLISION_MAX_ZOOM_DELTA){this.minZoom=Math.max(P,this.minZoom);break}D+=a*l;t+=a*Q}};return a}();
a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/ComputedGlyph":function(){define("require exports ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../definitions ../../number ../../collisions/BoundingBox".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});var h=g.vec2f32.create();d=function(){function a(a,c,d,e,g,h,k,l,m,x,A,z,C,D,B){this.anchorX=a;this.anchorY=c;this.angle=d;this.bounds=e;this.minZoom=g;this.maxZoom=
h;this.materialKey=k;this.vertexOffsetUpperLeft=l;this.vertexOffsetUpperRight=m;this.vertexOffsetLowerLeft=x;this.vertexOffsetLowerRight=A;this.texFontSizeUpperLeft=z;this.texFontSizeUpperRight=C;this.texFontSizeLowerLeft=D;this.texFontSizeLowerRight=B}a.from=function(b,d,g,m,n,r,w,t,y,x,A,z,C,D,B){void 0===D&&(D=!1);void 0===B&&(B=!1);var f=t.rect,p=t.metrics;n=-1===n?255:Math.floor(180*n/Math.PI/360*254);var u=Math.round(f.x/4),G=Math.round(f.y/4);t=u+Math.round(f.width/4);var J=G+Math.round(f.height/
4),K=-24-p.top,I=p.left,M=-p.top,O=f.width,f=f.height;y||(B||(K=0),I=4,O=p.width);b+=I;y=B?d+M:d+K;O=b+O;K=y;d=b;M=y+f;f=O;B=M;var I=d+p.width,Q=M-p.height,P=p.width*z/24,p=p.height*z/24;A&&(l.vec2.transformMat2d(h,l.vec2.set(h,b,y),A),b=h[0],y=h[1],l.vec2.transformMat2d(h,l.vec2.set(h,O,K),A),O=h[0],K=h[1],l.vec2.transformMat2d(h,l.vec2.set(h,d,M),A),d=h[0],M=h[1],l.vec2.transformMat2d(h,l.vec2.set(h,f,B),A),f=h[0],B=h[1],l.vec2.transformMat2d(h,l.vec2.set(h,I,Q),A),I=h[0],Q=h[1]);A=D?new c.default(I,
Q,P+k.COLLISION_BOX_PADDING,p+k.COLLISION_BOX_PADDING):null;D=e.i1616to32(8*b,8*y);p=e.i1616to32(8*O,8*K);b=e.i1616to32(8*d,8*M);d=e.i1616to32(8*f,8*B);f=e.i8888to32(u,G,z,C);G=e.i8888to32(t,G,z,C);u=e.i8888to32(u,J,z,C);z=e.i8888to32(t,J,z,C);return new a(g|0,m|0,n,A,r,w,x,D,p,b,d,f,G,u,z)};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../fontUtils ../../materialKey/MaterialKey ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b,d,e,f,l,m,p,u,C,D,B,E){var n=a.call(this)||this;n._xOffset=g.pt2px(D);n._yOffset=g.pt2px(B);n._decorationTop=c.getFontDecorationTop(u);n._color=f;n._haloColor=l;n._haloSize=Math.min(Math.floor(5*g.pt2px(g.toPt(e))),127);n._size=Math.min(Math.round(g.pt2px(d)),127);n._scale=n._size/24;n._angle=C;n._justify=k.getJustification(m||"center");n._xAlignD=k.getXAnchorDirection(m||"center");n._yAlignD=
-k.getYAnchorDirection(p||"baseline");n._baseline="baseline"===(p||"baseline");n._bitset=0;b=h.MaterialKeyBase.load(h.createMaterialKey(n.geometryType,b,!1));b.sdf=!0;n._materialKey=b.data;n.symbolId=E;return n}l(b,a);b.fromText=function(a,c,d){a=new b(a,c.font.size,c.haloSize||0,c.color&&e.premultiplyAlphaRGBA(c.color)||0,c.haloColor&&e.premultiplyAlphaRGBA(c.haloColor)||0,c.horizontalAlignment,c.verticalAlignment,c.font.decoration,c.angle||0,c.xoffset,c.yoffset,c.id);c=f.bidiText(c.text);a.bindTextInfo(d,
c[0],c[1]);a._computeGlyphs(a._shapedGlyphs,a._shapedBox);return a};b.fromCIMText=function(a,c,d){a=new b(a,c.size*c.sizeRatio,c.outlineSize*c.sizeRatio,e.premultiplyAlphaRGBA(c.color),e.premultiplyAlphaRGBA(c.outlineColor),c.horizontalAlignment,c.verticalAlignment,c.decoration,c.angle,c.offsetX*c.sizeRatio,c.offsetY*c.sizeRatio,c.materialHash);c=f.bidiText(c.text);a.bindTextInfo(d,c[0],c[1]);a._computeGlyphs(a._shapedGlyphs,a._shapedBox);return a};return b}(m.default(b.default));a.default=d})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["require",
"exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.getXAnchorDirection=function(a){switch(a){case "left":return 1;case "right":return-1;case "center":case "justify":return 0}};a.getYAnchorDirection=function(a){switch(a){case "top":return-1;case "middle":return 0;case "baseline":case "bottom":return 1}};a.getJustification=function(a){switch(a){case "left":return 0;case "right":return 1;case "center":case "justify":return.5}}})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../definitions ../../enums ../../number ../../TextShapingNew ../../WGLDisplayRecord ../../collisions/BoundingBox ../../materialKey/MaterialKey ./ComputedGlyph".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){Object.defineProperty(a,"__esModule",{value:!0});var y=k.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),x=Math.PI/180,A=c.mat2df32.create(),z=m.vec2f32.create();a.default=function(a){return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.geometryType=f.WGLGeometryType.TEXT;return b}l(c,a);c.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);
isNaN(this._decorationTop)||u.TextShaping.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=u.TextShaping.getBox(a)};c.prototype.writeMesh=function(a,b,c,d,e){var f=this._computedGlyphs;if(f){var h=w.TextMaterialKey.load(this._materialKey),k=p.i8888to32(0,0,0,this._bitset);switch(c){case "esriGeometryPoint":e=e.geometry;c=e.x;e=e.y;for(var l=0;l<f.length;l++){var m=f[l];m.anchorX=c;m.anchorY=e}this._writeVertices(a,b,d,f,h,k,0,0);break;case "esriGeometryPolygon":if(e.centroid){e=
e.centroid;c=e.x;e=e.y;for(l=0;l<f.length;l++)m=f[l],m.anchorX=c,m.anchorY=e;this._writeVertices(a,b,d,f,h,k,0,0);break}case "esriGeometryMultipoint":for(var l=e.geometry.points,n=e=c=0;n<l.length;n++){m=l[n];c+=m[0];e+=m[1];for(var t=0,r=f;t<r.length;t++)m=r[t],m.anchorX=c,m.anchorY=e;this._writeVertices(a,b,d,f,h,k,0,0)}break;default:a=void 0,void 0===a&&(a="mapview-processing"),y.error(new g(a,"Unable to handle geometryType: "+c))}}};c.prototype._computeGlyphs=function(a,b){if(a&&0!==a.length){var c=
Array(a.length);b=this._computeGlyphTransform(b);for(var d=w.MaterialKeyBase.load(this._materialKey),e=0;e<a.length;e++){var f=a[e],g=f.x,h=f.y,k=f.codePoint,f=f.glyphMosaicItem;d.textureBinding=f.textureBinding;c[e]=t.default.from(g,h,0,0,-1,0,25,f,k,d.data,b,this._size,this._haloSize,!1,!0)}this._computedGlyphs=c}};c.prototype._createBounds=function(a,c){var d=a.width/2,e=a.height/2,f=c[4],g=c[5],k;if(this._angle){a=m.vec2f32.fromValues(-d,-e);k=m.vec2f32.fromValues(d,-e);var l=m.vec2f32.fromValues(-d,
e),n=m.vec2f32.fromValues(d,e);h.vec2.transformMat2d(a,a,c);h.vec2.transformMat2d(k,k,c);h.vec2.transformMat2d(l,l,c);h.vec2.transformMat2d(n,n,c);c=e=Infinity;var p=0,t=d=0;for(a=[a,k,l,n];t<a.length;t++)k=a[t],e=Math.min(k[0],e),p=Math.max(k[0],p),c=Math.min(k[1],c),d=Math.max(k[1],d);k=p-e;a=d-c}else k=a.width*this._scale,a=a.height*this._scale;return new r.default(f,g,k+b.COLLISION_BOX_PADDING,a+b.COLLISION_BOX_PADDING)};c.prototype._computeShaping=function(a,c){return new u.TextShaping([a],512,
b.TEXT_LINE_HEIGHT,b.TEXT_SPACING,[0,.5*-b.TEXT_LINE_HEIGHT],.5*(1-this._xAlignD),0,c)};c.prototype._computeGlyphTransform=function(a){var b=this._scale,c=this._angle*x,d=e.mat2d.identity(A);e.mat2d.rotate(d,d,c);e.mat2d.translate(d,d,h.vec2.set(z,this._xOffset,-this._yOffset));e.mat2d.scale(d,d,h.vec2.set(z,b,b));e.mat2d.translate(d,d,h.vec2.set(z,-4,-4-(this._baseline?25:a.y+(1-this._yAlignD)*a.height*.5)));return d};c.prototype._writeVertices=function(a,b,c,d,e,f,g,h){this._writeHalos(a,b,c,d,
e,f,g,h);this._writeText(a,b,c,d,e,f,g,h)};c.prototype._writeHalos=function(a,b,c,d,e,f,g,h){e=b.indexVector;var k=b.getVector("geometry").vertexCount,l=0;if(this._haloSize)for(var m=0;m<d.length;m++,l+=4){var t=d[m],r=p.i1616to32(2*t.anchorX+1,2*t.anchorY),u=null==g?Math.floor(10*t.minZoom):g,y=null==h?Math.floor(10*t.maxZoom):h,x=new n(c,this.geometryType,t.materialKey,u,y);x.vertexFrom=k+l;x.indexFrom=e.length;this._writeVertex(x,b,c,r,this._haloColor,t,f,u,y);this._writeIndices(x,e,k+l);a.push(x)}};
c.prototype._writeText=function(a,b,c,d,e,f,g,h){e=b.indexVector;for(var k=b.getVector("geometry").vertexCount,l=0,m=0;m<d.length;m++,l+=4){var t=d[m],r=p.i1616to32(2*t.anchorX,2*t.anchorY),u=null==g?Math.floor(10*t.minZoom):g,y=null==h?Math.floor(10*t.maxZoom):h,x=new n(c,this.geometryType,t.materialKey,u,y);x.vertexFrom=k+l;x.indexFrom=e.length;this._writeVertex(x,b,c,r,this._color,t,f,u,y);this._writeIndices(x,e,k+l);a.push(x)}};c.prototype._writeVertex=function(a,b,c,d,e,f,g,h,k){b=b.get("geometry");
b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetUpperLeft);b.push(f.texFontSizeUpperLeft);b.push(g);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetUpperRight);b.push(f.texFontSizeUpperRight);b.push(g);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetLowerLeft);b.push(f.texFontSizeLowerLeft);b.push(g);b.push(d);b.push(c);b.push(e);b.push(f.vertexOffsetLowerRight);b.push(f.texFontSizeLowerRight);b.push(g);a.vertexCount+=4};c.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+
2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return c}(a)}})},"esri/views/2d/engine/webgl/TextShapingNew":function(){define(["require","exports","./Rect"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,d,c,g,l,b,f,p){this._glyphItems=a;this._maxWidth=d;this._lineHeight=c;this._letterSpacing=g;this._offset=l;this._hAnchor=b;this._vAnchor=f;this._justify=p}a.prototype.getShaping=function(a,d){for(var c=this._letterSpacing,e=this._lineHeight,g=this._justify,
b=this._maxWidth,f=[],k=0,l=0,n=0,r=0,w=-1,t=0,y=-1,x=a.length,A=0;A<x;A++){var z=a.charCodeAt(A);if(10===z){if(A!==x-1){if(w>=r){var k=f[w],C=k.x+k.glyphMosaicItem.metrics.advance,t=Math.max(C,t);g&&this._applyJustification(f,r,w);r=f.length}l=d?l-e:l+e;k=0;++n}}else{for(var C=void 0,D=0,B=this._glyphItems;D<B.length&&!(C=B[D][z]);D++);if(C){f.push({codePoint:z,x:k,y:l,glyphMosaicItem:C});k+=C.metrics.advance+c;if(0<b&&k>b&&0<=y){D=y+1;C=f[D].x;t=Math.max(C,t);for(B=D;B<f.length;B++)f[B].y=d?f[B].y-
e:f[B].y+e,f[B].x-=C;g&&this._applyJustification(f,r,y);l=d?l-e:l+e;k-=C;++n;r=D;y=-1}++w;32===z&&(y=f.length-1)}}}w>=r&&(k=f[w],t=Math.max(t,k.x+k.glyphMosaicItem.metrics.advance),g&&this._applyJustification(f,r,w));if(0<f.length)for(a=(g-this._hAnchor)*t,c=(-this._vAnchor*(n+1)+.5)*e,d&&n&&(c+=n*e),a+=this._offset[0],c+=this._offset[1],d=0;d<f.length;d++)e=f[d],e.x+=a,e.y+=c;return f};a.prototype.getEstimatedShaping=function(a,d,c){for(var e=this._letterSpacing,g=this._lineHeight,b=this._justify,
f=this._maxWidth,k=[],l=0,n=0,r=0,w=0,t=-1,y=0,x=-1,A=a.length,z=0;z<A;z++){var C=a.charCodeAt(z);if(10===C){if(z!==A-1){if(t>=w){var l=k[t],D=l.x+l.glyphMosaicItem.metrics.advance,y=Math.max(D,y);b&&this._applyJustification(k,w,t);w=k.length}n=d?n-g:n+g;l=0;++r}}else{D=c;k.push({codePoint:C,x:l,y:n,glyphMosaicItem:D});l+=D.metrics.advance+e;if(0<f&&l>f&&0<=x){for(var B=x+1,D=k[B].x,y=Math.max(D,y),E=B;E<k.length;E++)k[E].y=d?k[E].y-g:k[E].y+g,k[E].x-=D;b&&this._applyJustification(k,w,x);n=d?n-g:
n+g;l-=D;++r;w=B;x=-1}++t;32===C&&(x=k.length-1)}}t>=w&&(l=k[t],y=Math.max(y,l.x+l.glyphMosaicItem.metrics.advance),b&&this._applyJustification(k,w,t));if(0<k.length)for(a=(b-this._hAnchor)*y,c=(-this._vAnchor*(r+1)+.5)*g,d&&r&&(c+=r*g),a+=this._offset[0],c+=this._offset[1],d=0;d<k.length;d++)g=k[d],g.x+=a,g.y+=c;return k};a.getBox=function(a){if(!a.length)return null;for(var d=Infinity,c=Infinity,g=-Infinity,k=-Infinity,b=0;b<a.length;b++)var f=a[b],l=f.glyphMosaicItem.metrics,u=f.x+l.left,f=f.y-
l.top,n=u+l.width,l=f+l.height,d=Math.min(d,u),g=Math.max(g,n),c=Math.min(c,f),k=Math.max(k,l);return{x:d,y:c,width:g-d,height:k-c}};a.addDecoration=function(a,d){var c=a.length;if(0!==c){for(var e=a[0].x+a[0].glyphMosaicItem.metrics.left,g=a[0].y,b=1;b<c;b++){var f=a[b];if(f.y!==g){var k=a[b-1].x+a[b-1].glyphMosaicItem.metrics.left+a[b-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:e,y:g,glyphMosaicItem:{sdf:!0,rect:new l.default(4,0,4,8),metrics:{width:k-e,height:2,left:0,top:d,advance:0},
page:0}});g=f.y;e=f.x+f.glyphMosaicItem.metrics.left}}c=a[c-1].x+a[c-1].glyphMosaicItem.metrics.left+a[c-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:e,y:g,glyphMosaicItem:{sdf:!0,rect:new l.default(4,0,4,8),metrics:{width:c-e,height:2,left:0,top:d,advance:0},page:0}})}};a.prototype._applyJustification=function(a,d,c){for(var e=a[c],e=(e.x+e.glyphMosaicItem.metrics.advance)*this._justify;d<=c;d++)a[d].x-=e};return a}();a.TextShaping=d})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require",
"exports","./MeshData","./Utils"],function(d,a,l,g){return function(){function a(a,c,d,g,b){void 0===g&&(g=0);void 0===b&&(b=0);this.id=a;this.geometryType=c;this.materialKey=d;this.minZoom=g;this.maxZoom=b;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});a.prototype.clone=function(){return this.copy()};
a.prototype.copy=function(){var d=new a(this.id,this.geometryType,this.materialKey);d.vertexFrom=this.vertexFrom;d.vertexCount=this.vertexCount;d.indexFrom=this.indexFrom;d.indexCount=this.indexCount;d.zOrder=this.zOrder;d.symbolLevel=this.symbolLevel;d.meshData=this.meshData;d.minZoom=this.minZoom;d.maxZoom=this.maxZoom;return d};a.prototype.setMeshDataFromBuffers=function(a,c,d){var e=new l,b;for(b in c){for(var f=c[b].stride,h=c[b].data,k=[],n=g.strideToPackingFactor(f),r=0;r<f*a.vertexCount/n;++r)k[r]=
h[r+f*a.vertexFrom/n];e.vertexData.set(b,k)}for(r=e.indexData.length=0;r<a.indexCount;++r)e.indexData[r]=d[r+a.indexFrom]-a.vertexFrom;e.vertexCount=a.vertexCount;this.meshData=e};a.prototype.readMeshDataFromBuffers=function(a,c){this.meshData?this.meshData.clear():this.meshData=new l;for(var d in a){for(var e=a[d].stride,b=a[d].data,f=[],k=g.strideToPackingFactor(e),u=0;u<e*this.vertexCount/k;++u)f[u]=b[u+e*this.vertexFrom/k];this.meshData.vertexData.set(d,f)}for(u=this.meshData.indexData.length=
0;u<this.indexCount;++u)this.meshData.indexData[u]=c[u+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,c,d,k){for(var b in c)for(var e=c[b].stride,h=this.meshData.vertexData.get(b),l=c[b].data,m=g.strideToPackingFactor(e),r=0;r<e*this.meshData.vertexCount/m;++r)l[r+e*a/m]=h[r];for(r=0;r<this.meshData.indexData.length;++r)k[r+d]=this.meshData.indexData[r]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=
d;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,c,d){for(var e=0,b=0,f=0;f<a.length;f++){var g=a[f];g.writeMeshDataToBuffers(e,c,b,d);e+=g.vertexCount;b+=g.indexCount}};a.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.push(this.geometryType);a.push(this.materialKey);a.push(this.symbolLevel);a.push(this.zOrder);a.push(this.vertexFrom);a.push(this.vertexCount);
a.push(this.indexFrom);a.push(this.indexCount);a.push(this.minZoom);a.push(this.maxZoom);return a};a.deserialize=function(d,c){var e=d.readInt32(),g=d.readInt32();c=new a(c.id,e,g);c.symbolLevel=d.readInt32();c.zOrder=d.readInt32();c.vertexFrom=d.readInt32();c.vertexCount=d.readInt32();c.indexFrom=d.readInt32();c.indexCount=d.readInt32();c.minZoom=d.readInt32();c.maxZoom=d.readInt32();return c};return a}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(d,
a){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,d,e){for(var c in a)this.vertexData.set(c,a[c]);for(c in this.vertexData)null===a[c]&&this.vertexData.delete(c);this.vertexCount=d;this.indexData=e};return a}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],
function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){}a.prototype.writeMesh=function(a,d,c,g,l){};a.prototype.bindFeature=function(a,d,c){};return a}();a.default=d})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var g=new l;a.bidiText=function(a){if(!g.hasBidiChar(a))return[a,!1];var d;d="rtl"===g.checkContextual(a)?"IDNNN":"ICNNN";
return[g.bidiTransform(a,d,"VLYSN"),!0]}})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(d,a,l,g){function k(a,d){void 0===d&&(d=!1);var c=l.WGLVVFlag.SIZE_FIELD_STOPS|l.WGLVVFlag.SIZE_MINMAX_VALUE|l.WGLVVFlag.SIZE_SCALE_STOPS|l.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(l.WGLVVTarget.FIELD_TARGETS_OUTLINE|l.WGLVVTarget.MINMAX_TARGETS_OUTLINE|l.WGLVVTarget.SCALE_TARGETS_OUTLINE|l.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return d?
c&a:c&~a}function e(a){var c=k(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|l.WGLVVFlag.ROTATION|c)}Object.defineProperty(a,"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return l.WGLVVFlag.NONE;for(var c=0,d=0;d<a.length;d++){var b=a[d];if("size"===b.type){var e=g.getTypeOfSizeVisualVariable(b),c=c|e;"outline"===b.target&&(c|=e<<4)}else"color"===b.type?c|=l.WGLVVFlag.COLOR:"opacity"===b.type?c|=l.WGLVVFlag.OPACITY:"rotation"===b.type&&(c|=l.WGLVVFlag.ROTATION)}return c};a.getSizeFlagsMask=
k;a.getMarkerVVFlags=e;a.getFillVVFlags=function(a){return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,d){if(d)return d=k(a,!0),a&d;d=k(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|d)};a.getTextVVFlags=function(a){return e(a)};a.getLabelVVFlags=function(a){var c=k(a,!1);return a&c}})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/Error ../../../../core/Logger ./enums ./Utils".split(" "),function(d,a,l,g,k,
e){Object.defineProperty(a,"__esModule",{value:!0});var c=g.getLogger("esri.views.2d.engine.webgl");a.getTypeOfSizeVisualVariable=function(a){if(e.isNumber(a.minDataValue)&&e.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize)return k.WGLVVFlag.SIZE_MINMAX_VALUE;if((a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops))return k.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&
"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops))return k.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit)return k.WGLVVFlag.SIZE_UNIT_VALUE;c.error(new l("mapview-bad-type","Found invalid size VisualVariable",a));return k.WGLVVFlag.NONE}})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../webgl ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.dispose=function(){};b.prototype.getGeometryType=function(){return k.WGLGeometryType.LABEL};b.prototype.drawGeometry=function(a,b,c,d){var f=a.context,g=a.painter,l=a.drawPhase,m=a.state,n=a.rendererInfo,p=c.indexCount,u=c.indexFrom;c=h.LabelMaterialKey.load(c.materialKey);var C=c.mapAligned?1:0;if(a.requiredLevel===b.key.level||C){var D=
e.createProgramDescriptor(c.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_vertexOffset",count:2,type:5122},{location:4,name:"a_texAndSize",count:4,type:5121},{location:5,name:"a_refSymbolAndPlacementOffset",count:4,type:5121},{location:6,name:"a_zoomRangeAndEmpty",count:4,type:5121}]}),B=g.materialManager.getProgram(c,l,n,"label",D.attributes);d=this._getVAO(f,D.bufferLayouts,
D.attributes,d);f.setStencilTestEnabled(!1);f.bindProgram(B);f.bindVAO(d);this._setSharedUniforms(B,a,b);l===k.WGLDrawPhase.LABEL_ALPHA?(f.setBlendingEnabled(!1),B.setUniform1f("u_fadeStep",b.fader.value)):g.textureManager.bindTextures(f,B,c,4);b=1===C?m.displayViewMat3:m.displayMat3;c.vvSizeMinMaxValue&&B.setUniform4fv("u_vvSizeMinMaxValue",n.vvSizeMinMaxValue);c.vvSizeScaleStops&&B.setUniform1f("u_vvSizeScaleStopsValue",n.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(B.setUniform1fv("u_vvSizeFieldStopsValues",
n.vvSizeFieldStopsValues),B.setUniform1fv("u_vvSizeFieldStopsSizes",n.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&B.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",n.vvSizeUnitValueToPixelsRatio);f.bindTexture(a.labelFBO.colorTexture,3);B.setUniform1i("u_referenceTex",3);B.setUniform1f("u_mapRotation",Math.floor(m.rotation/360*254));B.setUniform1f("u_mapAligned",C);B.setUniformMatrix3fv("u_displayMat3",b);B.setUniform1f("u_opacity",1);B.setUniform1f("u_zoomLevel",Math.round(10*a.displayLevel));
B.setUniform2fv("u_screenSize",a.state.size);f.drawElements(4,p,5125,4*u);f.bindVAO(null);f.setStencilTestEnabled(!0);f.setBlendingEnabled(!0)}};return b}(c.default);a.default=d})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../webgl ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey".split(" "),function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}l(b,a);b.prototype.dispose=function(){};b.prototype.getGeometryType=function(){return k.WGLGeometryType.LINE};b.prototype.drawGeometry=function(a,b,c,d){var f=a.context,g=a.painter,k=a.rendererInfo,l=a.requiredLevel,m=a.drawPhase,n=c.indexFrom,p=c.indexCount;c=h.LineMaterialKey.load(c.materialKey);var u=e.createProgramDescriptor(c.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,
type:5121,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:5120},{location:4,name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123},{location:5,name:"a_tlbr",count:4,type:5123},{location:6,name:"a_segmentDirection",count:4,type:5120},{location:7,name:"a_aux",count:2,type:5123}]}),m=g.materialManager.getProgram(c,m,k,"line",u.attributes);d=this._getVAO(f,u.bufferLayouts,u.attributes,d);u=1/a.pixelRatio;f.bindProgram(m);f.bindVAO(d);this._setSharedUniforms(m,a,b);c.textureBinding&&
g.textureManager.bindTextures(f,m,c);m.setUniform1f("u_zoomFactor",Math.pow(2,l-b.key.level)/a.pixelRatio);m.setUniform1f("u_blur",0+u);m.setUniform1f("u_antialiasing",u);c.vvSizeMinMaxValue&&m.setUniform4fv("u_vvSizeMinMaxValue",k.vvSizeMinMaxValue);c.vvSizeScaleStops&&m.setUniform1f("u_vvSizeScaleStopsValue",k.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(m.setUniform1fv("u_vvSizeFieldStopsValues",k.vvSizeFieldStopsValues),m.setUniform1fv("u_vvSizeFieldStopsSizes",k.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&
m.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",k.vvSizeUnitValueToPixelsRatio);c.vvColor&&(m.setUniform1fv("u_vvColorValues",k.vvColorValues),m.setUniform4fv("u_vvColors",k.vvColors));c.vvOpacity&&(m.setUniform1fv("u_vvOpacityValues",k.vvOpacityValues),m.setUniform1fv("u_vvOpacities",k.vvOpacities));f.setFaceCullingEnabled(!0);f.setFrontFace(2305);f.setCullFace(1029);f.drawElements(4,p,5125,4*n);f.setFaceCullingEnabled(!1);f.bindVAO(null)};return b}(c.default);a.default=d})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../webgl ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey".split(" "),
function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.dispose=function(){};b.prototype.getGeometryType=function(){return e.WGLGeometryType.MARKER};b.prototype.drawGeometry=function(a,b,d,e){var f=a.context,g=a.painter,h=a.rendererInfo,k=a.drawPhase,l=a.state,n=d.indexCount,p=d.indexFrom;d=m.MarkerMaterialKey.load(d.materialKey);var r=c.createProgramDescriptor(d.data,{geometry:[{location:0,
name:"a_pos",count:2,type:5122},{location:1,name:"a_vertexOffset",count:2,type:5122},{location:2,name:"a_texAndBitSet",count:4,type:5121},{location:3,name:"a_id",count:4,type:5121},{location:4,name:"a_color",count:4,type:5121,normalized:!0},{location:5,name:"a_outlineColor",count:4,type:5121,normalized:!0},{location:6,name:"a_sizeAndOutlineWidth",count:4,type:5121}]}),k=g.materialManager.getProgram(d,k,h,"icon",r.attributes);e=this._getVAO(f,r.bufferLayouts,r.attributes,e);f.bindProgram(k);f.bindVAO(e);
d.textureBinding&&g.textureManager.bindTextures(f,k,d,4);this._setSharedUniforms(k,a,b);k.setUniformMatrix3fv("u_displayMat3",d.vvRotation?l.displayViewMat3:l.displayMat3);d.vvSizeMinMaxValue&&k.setUniform4fv("u_vvSizeMinMaxValue",h.vvSizeMinMaxValue);d.vvSizeScaleStops&&k.setUniform1f("u_vvSizeScaleStopsValue",h.vvSizeScaleStopsValue);d.vvSizeFieldStops&&(k.setUniform1fv("u_vvSizeFieldStopsValues",h.vvSizeFieldStopsValues),k.setUniform1fv("u_vvSizeFieldStopsSizes",h.vvSizeFieldStopsSizes));d.vvSizeUnitValue&&
k.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",h.vvSizeUnitValueToPixelsRatio);d.vvColor&&(k.setUniform1fv("u_vvColorValues",h.vvColorValues),k.setUniform4fv("u_vvColors",h.vvColors));d.vvOpacity&&(k.setUniform1fv("u_vvOpacityValues",h.vvOpacityValues),k.setUniform1fv("u_vvOpacities",h.vvOpacities));d.vvRotation&&k.setUniform1f("u_vvRotationType","geographic"===h.vvMaterialParameters.vvRotationType?0:1);f.drawElements(4,n,5125,4*p);f.bindVAO(null)};return b}(h.default);a.default=d})},"esri/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../webgl ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey".split(" "),
function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.dispose=function(){};b.prototype.getGeometryType=function(){return k.WGLGeometryType.TEXT};b.prototype.drawGeometry=function(a,b,c,d){var f=a.context,g=a.painter,k=a.rendererInfo,l=a.drawPhase,m=a.state,n=c.indexCount,p=c.indexFrom;c=h.TextMaterialKey.load(c.materialKey);var u=e.createProgramDescriptor(c.data,{geometry:[{location:0,
name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_vertexOffset",count:2,type:5122},{location:4,name:"a_texFontSize",count:4,type:5120},{location:5,name:"a_aux",count:4,type:5120}]}),l=g.materialManager.getProgram(c,l,k,"text",u.attributes);d=this._getVAO(f,u.bufferLayouts,u.attributes,d);f.bindProgram(l);f.bindVAO(d);this._setSharedUniforms(l,a,b);g.textureManager.bindTextures(f,l,c,4);l.setUniformMatrix3fv("u_displayMat3",
m.displayMat3);c.vvSizeMinMaxValue&&l.setUniform4fv("u_vvSizeMinMaxValue",k.vvSizeMinMaxValue);c.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",k.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",k.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",k.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",k.vvSizeUnitValueToPixelsRatio);c.vvColor&&(l.setUniform1fv("u_vvColorValues",k.vvColorValues),
l.setUniform4fv("u_vvColors",k.vvColors));c.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",k.vvOpacityValues),l.setUniform1fv("u_vvOpacities",k.vvOpacities));c.vvRotation&&l.setUniform1f("u_vvRotationType","geographic"===k.vvMaterialParameters.vvRotationType?0:1);f.drawElements(4,n,5125,4*p);f.bindVAO(null)};return b}(c.default);a.default=d})},"esri/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define("require exports ../../../../../core/has ./highlight/HighlightGradient ./highlight/HighlightRenderer ./highlight/HighlightSurfaces".split(" "),
function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._hlRenderer=new k.default;this._hlSurfaces=new e.default;this._hlGradient=new g.default;this._adjustedHeight=this._adjustedWidth=this._height=this._width=void 0}a.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._hlGradient&&this._hlGradient.destroy();this._boundFBO=null};a.prototype.setup=function(a,c,b){this._width=c;this._height=
b;var d=c%4,e=b%4;c+=2>d?-d:4-d;b+=2>e?-e:4-e;this._adjustedWidth=c;this._adjustedHeight=b;this._boundFBO=a.getBoundFramebufferObject();c=Math.round(.75*c);b=Math.round(.75*b);this._hlRenderer.setup(a,c,b);this._hlSurfaces.setup(a,c,b)};a.prototype.startMaskDraw=function(a){a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setViewport(0,0,.75*this._adjustedWidth,.75*this._adjustedHeight)};a.prototype.draw=
function(a){a.setStencilTestEnabled(!1);a.setBlendingEnabled(!1);a.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(a,this._hlSurfaces.sharedBlur1Tex);a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex);a.bindFramebuffer(this._boundFBO);a.setBlendingEnabled(!0);a.setViewport(0,0,this._width,this._height);
this._hlRenderer.renderHighlight(a,this._hlSurfaces.sharedBlur1Tex,this._hlGradient);this._boundFBO=null};a.prototype.setHighlightOptions=function(a){this._hlGradient.setHighlightOptions(a)};return a}();a.default=d})},"esri/views/2d/engine/webgl/painter/highlight/HighlightGradient":function(){define("require exports ../../../../../../core/Logger ../../../../../webgl ../../definitions ./parameters".split(" "),function(d,a,l,g,k,e){function c(a,c){c.outlineColor[0]=c.fillColor[0]=a.color.r/255;c.outlineColor[1]=
c.fillColor[1]=a.color.g/255;c.outlineColor[2]=c.fillColor[2]=a.color.b/255;c.outlineColor[3]=c.fillColor[3]=a.color.a;c.fillColor[3]*=a.fillOpacity;c.outlineColor[3]*=a.haloOpacity;c.fillColor[0]*=c.fillColor[3];c.fillColor[1]*=c.fillColor[3];c.fillColor[2]*=c.fillColor[3];c.outlineColor[0]*=c.outlineColor[3];c.outlineColor[1]*=c.outlineColor[3];c.outlineColor[2]*=c.outlineColor[3];c.outlineWidth=e.HIGHLIGHT_SIZING.outlineWidth;c.outerHaloWidth=e.HIGHLIGHT_SIZING.outerHaloWidth;c.innerHaloWidth=
e.HIGHLIGHT_SIZING.innerHaloWidth;c.outlinePosition=e.HIGHLIGHT_SIZING.outlinePosition}Object.defineProperty(a,"__esModule",{value:!0});var h=l.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),m=[0,0,0,0];d=function(){function a(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:e.HIGHLIGHT_SIZING.outlinePosition,outlineWidth:e.HIGHLIGHT_SIZING.outlineWidth,innerHaloWidth:e.HIGHLIGHT_SIZING.innerHaloWidth,
outerHaloWidth:e.HIGHLIGHT_SIZING.outerHaloWidth};this.shadeTexChanged=!0;this.texelData=new Uint8Array(4*e.SHADE_TEXTURE_SIZE);this.minMaxDistance=[0,0]}a.prototype.setHighlightOptions=function(a){function b(a,b,c){x[0]=(1-c)*a[0]+c*b[0];x[1]=(1-c)*a[1]+c*b[1];x[2]=(1-c)*a[2]+c*b[2];x[3]=(1-c)*a[3]+c*b[3]}var d;c(a,this._convertedHighlightOptions);a=this._convertedHighlightOptions.outlinePosition-this._convertedHighlightOptions.outlineWidth/2-this._convertedHighlightOptions.outerHaloWidth;var f=
this._convertedHighlightOptions.outlinePosition-this._convertedHighlightOptions.outlineWidth/2,g=this._convertedHighlightOptions.outlinePosition+this._convertedHighlightOptions.outlineWidth/2,k=this._convertedHighlightOptions.outlinePosition+this._convertedHighlightOptions.outlineWidth/2+this._convertedHighlightOptions.innerHaloWidth,l=Math.sqrt(Math.PI/2)*e.SIGMAS[3],y=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0,l=Math.abs(k)>l?Math.round(10*(Math.abs(k)-l))/10:0;y&&!l?h.error("The outer rim of the highlight is "+
y+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!y&&l?h.error("The inner rim of the highlight is "+l+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):y&&l&&h.error("The highlight is "+Math.max(y,l)+"px away from the edge of the feature; consider reducing some width values.");for(var x=[void 0,void 0,void 0,
void 0],y=this.texelData,l=0;l<e.SHADE_TEXTURE_SIZE;++l)d=a+l/(e.SHADE_TEXTURE_SIZE-1)*(k-a),d<a?(x[4*l+0]=0,x[4*l+1]=0,x[4*l+2]=0,x[4*l+3]=0):d<f?b(m,this._convertedHighlightOptions.outlineColor,(d-a)/(f-a)):d<g?(d=this._convertedHighlightOptions.outlineColor,x[0]=d[0],x[1]=d[1],x[2]=d[2],x[3]=d[3]):d<k?b(this._convertedHighlightOptions.outlineColor,this._convertedHighlightOptions.fillColor,(d-g)/(k-g)):(d=this._convertedHighlightOptions.fillColor,x[4*l+0]=d[0],x[4*l+1]=d[1],x[4*l+2]=d[2],x[4*l+
3]=d[3]),y[4*l+0]=255*x[0],y[4*l+1]=255*x[1],y[4*l+2]=255*x[2],y[4*l+3]=255*x[3];this.minMaxDistance[0]=a;this.minMaxDistance[1]=k;this.shadeTexChanged=!0};a.prototype.applyHighlightOptions=function(a,b){this.shadeTex||(this.shadeTex=new g.Texture(a,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:e.SHADE_TEXTURE_SIZE,height:1,samplingMode:9729}));this.shadeTexChanged&&(this.shadeTex.updateData(0,0,0,e.SHADE_TEXTURE_SIZE,1,this.texelData),this.shadeTexChanged=!1);a.bindTexture(this.shadeTex,
k.TEXTURE_BINDING_HIGHLIGHT_1);b.setUniform2fv("u_minMaxDistance",this.minMaxDistance)};a.prototype.destroy=function(){this.shadeTex&&(this.shadeTex.dispose(),this.shadeTex=null)};return a}();a.default=d})},"esri/views/2d/engine/webgl/painter/highlight/parameters":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.SIGMAS=[void 0,void 0,void 0,1];a.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1];a.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX=
[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.SHADE_TEXTURE_SIZE=256;a.HIGHLIGHT_SIZING={outlineWidth:.7,outerHaloWidth:.7,innerHaloWidth:.7,outlinePosition:0}})},"esri/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../../../../webgl ../../definitions ./parameters ../../shaders/HighlightPrograms".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype.dispose=
function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)};a.prototype.preBlur=function(a,c){a.bindTexture(c,g.TEXTURE_BINDING_HIGHLIGHT_0);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);
a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};a.prototype.finalBlur=function(a,c){a.bindTexture(c,g.TEXTURE_BINDING_HIGHLIGHT_0);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};a.prototype.renderHighlight=function(a,c,b){a.bindTexture(c,
g.TEXTURE_BINDING_HIGHLIGHT_0);a.bindProgram(this._resources.highlightProgram);b.applyHighlightOptions(a,this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.setBlendingEnabled(!0);a.setBlendFunction(1,771);a.drawArrays(5,0,4);a.bindVAO()};a.prototype._initialize=function(a,c,b){this._width=c;this._height=b;c=new l.BufferObject(a,34962,35044,(new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1])).buffer);b=new l.VertexArrayObject(a,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",
count:2,type:5120,offset:0,stride:4,normalized:!1},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:c});var d=l.createProgram(a,e.highlight);a=l.createProgram(a,e.blur);d.setUniform1i("u_texture",g.TEXTURE_BINDING_HIGHLIGHT_0);d.setUniform1i("u_shade",g.TEXTURE_BINDING_HIGHLIGHT_1);d.setUniform4fv("u_sigmas",k.SIGMAS);a.setUniform1i("u_texture",g.TEXTURE_BINDING_HIGHLIGHT_0);a.setUniform4fv("u_sigmas",k.SIGMAS);this._resources={quadGeometry:c,quadVAO:b,highlightProgram:d,
blurProgram:a}};a.prototype.setup=function(a,c,b){this._resources?(this._width=c,this._height=b):this._initialize(a,c,b)};return a}();a.default=d})},"esri/views/2d/engine/webgl/shaders/HighlightPrograms":function(){define(["require","exports","./sources/resolver"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.highlight={name:"highlight",shaders:{vertexShader:l.resolveIncludes("highlight/textured.vert"),fragmentShader:l.resolveIncludes("highlight/highlight.frag")},attributes:{a_position:0,
a_texcoord:1}};a.blur={name:"blur",shaders:{vertexShader:l.resolveIncludes("highlight/textured.vert"),fragmentShader:l.resolveIncludes("highlight/blur.frag")},attributes:{a_position:0,a_texcoord:1}}})},"esri/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl"],function(d,a,l){function g(a,d,c){d=new l.Texture(a,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:d,height:c,samplingMode:9729});a=l.FramebufferObject.createWithAttachments(a,
d,{colorTarget:0,depthStencilTarget:2});return[d,a]}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};a.prototype._initialize=function(a,c,d){this._width=c;this._height=d;var e=g(a,c,d),b=
e[0],e=e[1];a=g(a,c,d);this._resources={sharedBlur1Tex:b,sharedBlur1Fbo:e,sharedBlur2Tex:a[0],sharedBlur2Fbo:a[1]}};a.prototype.setup=function(a,c,d){!this._resources||this._width===c&&this._height===d||this.dispose();this._resources||this._initialize(a,c,d)};Object.defineProperty(a.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return a}();a.default=d})},"esri/views/2d/engine/webgl/shaders/RasterPrograms":function(){define(["require","exports","./sources/resolver"],function(d,a,l){Object.defineProperty(a,"__esModule",
{value:!0});a.transformTexture={name:"transform-texture",shaders:{vertexShader:l.resolveIncludes("raster/transform.vert"),fragmentShader:l.resolveIncludes("raster/texture.frag")},attributes:{a_position:0,a_texcoord:1}};a.transformSolid={name:"transform-solid",shaders:{vertexShader:l.resolveIncludes("raster/transform.vert"),fragmentShader:l.resolveIncludes("raster/solid.frag")},attributes:{a_position:0}}})},"esri/views/2d/engine/webgl/shaders/StencilPrograms":function(){define(["require","exports",
"./sources/resolver"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.stencil={name:"stencil",shaders:{vertexShader:l.resolveIncludes("stencil/stencil.vert"),fragmentShader:l.resolveIncludes("stencil/stencil.frag")},attributes:{a_pos:0}}})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(d,a,l,g,k){function e(a,c){var d=a||{},e=d.format,f=d.quality,h=d.rotation,
d=d.disableSlice,l=!a.ignorePadding&&c.padding||w,p;p=c.width-l.left-l.right;c=c.height-l.top-l.bottom;var t=l=0,u=p,y=c;if(a&&a.area){var l=Math.floor(a.area.x)||0,t=Math.floor(a.area.y)||0,G=null!=a.area.width?Math.floor(a.area.width):null,J=null!=a.area.height?Math.floor(a.area.height):null,u=u-l,y=y-t;null!=G&&null!=J?(u=Math.min(u,G),y=Math.min(y,J)):null==G&&null!=J?(G=Math.min(u,G),y*=G/u,u=G):null!=G&&null==J&&(G=Math.min(y,J),u*=G/y,y=G)}l=b({x:l,y:t,width:u,height:y},a);t=Math.floor(Math.max(l.x,
0));u=Math.floor(Math.max(l.y,0));p={x:t,y:u,width:Math.floor(Math.min(l.width,p-t)),height:Math.floor(Math.min(l.height,c-u))};c=p.width/p.height;l=l.width/l.height;l!==c&&(l>c?(c=Math.floor(p.width/l),p={x:p.x,y:Math.floor(p.y+(p.height-c)/2),width:p.width,height:c}):(c=Math.floor(p.height*l),p={x:Math.floor(p.x+(p.width-c)/2),y:p.y,width:c,height:p.height}));c=m(a,p);a=c.width;c=c.height;a:switch(e){case "png":case "jpg":case "jpeg":break a;case null:case void 0:e=n;break a;default:g.neverReached(e),
e=n}l=r[e];f=k.clamp(null!=f?f:l,0,100);return{format:e,quality:f,area:p,width:a,height:c,rotation:h,disableSlice:d||!1}}function c(a,b){return a.toDataURL(u[b.format],b.quality/100)}function h(a,b,c){c||(f||(f=document.createElement("canvas"),f.width=1,f.height=1),c=f);return c.getContext("2d").createImageData(a,b)}function m(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==
a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(a,"__esModule",{value:!0});a.completeUserSettings=e;a.toRenderSettings=function(a,b){var c=e(a,b),d=c.area,f=c.width/d.width,g=!a.ignorePadding&&
b.padding||w,h=g.left+g.right,k=g.top+g.bottom;return{framebufferWidth:Math.floor((b.width-h)*f+h),framebufferHeight:Math.floor((b.height-k)*f+k),region:{x:Math.floor(d.x*f)+g.left,y:Math.floor(d.y*f)+g.top,width:c.width,height:c.height},format:c.format,quality:c.quality,rotation:c.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:c.disableSlice}};a.encodeResult=function(a,b,d,e){if(e.premultipliedAlpha)for(var f=a.data,g=f.length,h=0;h<g;h+=4){var k=f[h+3];0<k&&(k/=255,f[h+0]/=k,
f[h+1]/=k,f[h+2]/=k)}d.width=a.width;d.height=a.height;f=d.getContext("2d");f.putImageData(a,0,0);e.flipY&&(f.save(),f.globalCompositeOperation="copy",f.scale(1,-1),f.translate(0,-f.canvas.height),f.drawImage(f.canvas,0,0),f.restore());a=f.getImageData(0,0,a.width,a.height);b=c(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};a.toDataUrl=c;a.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(p)try{return new ImageData(a,b)}catch(A){p=
!1}return h(a,b,c)};a.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(p)try{return new ImageData(a,b,c)}catch(z){p=!1}b=h(b,c,d);b.data.set(a,0);return b};a.resampleHermite=function(a,b,c,d,e,f,g,h){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=a.width-d);void 0===g&&(g=a.height-e);void 0===h&&(h=!1);var k=a.data,l=b.width,m=b.height,n=b.data;f/=l;g/=m;var p=Math.ceil(f/2),t=Math.ceil(g/2);a=a.width;for(var r=0;r<m;r++)for(var u=0;u<
l;u++){for(var y=4*(u+(h?m-r-1:r)*l),x=0,w=0,z=0,D=0,B=0,C=0,A=(r+.5)*g,X=Math.floor(r*g);X<(r+1)*g;X++)for(var Z=Math.abs(A-(X+.5))/t,ba=(u+.5)*f,Z=Z*Z,fa=Math.floor(u*f);fa<(u+1)*f;fa++){var V=Math.abs(ba-(fa+.5))/p,V=Math.sqrt(Z+V*V);if(!(1<=V)){var V=2*V*V*V-3*V*V+1,ea=4*(d+fa+(e+X)*a),C=C+V*k[ea+3],w=w+V;!c&&255>k[ea+3]&&(V=V*k[ea+3]/255);z+=V*k[ea];D+=V*k[ea+1];B+=V*k[ea+2];x+=V}}n[y]=z/x;n[y+1]=D/x;n[y+2]=B/x;n[y+3]=C/w}return b};a.screenshotSuperSampleSettings=function(a,b){if(!b)return a;
b=a.framebufferWidth;var c=a.framebufferHeight,d=a.region,e=Math.min(8,2048/Math.max(b,c));return 1.5>e?a:l({},a,{framebufferWidth:Math.round(b*e),framebufferHeight:Math.round(c*e),pixelRatio:a.pixelRatio*e,resample:{region:{x:Math.round(d.x*e),y:Math.round(d.y*e),width:Math.round(d.width*e),height:Math.round(d.height*e)},width:b,height:c}})};var f=null,p=!0,u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},n="jpg",r={png:100,jpg:98,jpeg:98},w={top:0,right:0,bottom:0,left:0}})},"esri/views/2d/engine/webgl/AttributeStoreView":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../webgl ./definitions ./Utils ./util/debug".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});var u=e.getLogger("esri.views.2d.engine.webgl.AttributeStoreView"),n=p.createDebugLogger(p.DEBUG_ATTR_UPDATES,u),r=function(){function a(a,b,c){this.texelSize=4;var d=f.getPixelArrayCtor(b);this.pixelType=b;this.size=c;this.data=new d(a);this._resetRange()}a.prototype.destroy=function(){c.andThen(this._texture,function(a){return a.dispose()})};a.prototype.setData=function(a,b,c){this.data[a*this.texelSize+b]=c;this.dirtyStart=
Math.min(this.dirtyStart,a);this.dirtyEnd=Math.max(this.dirtyEnd,a)};a.prototype.getData=function(a,b){return this.data[a*this.texelSize+b]};a.prototype.getTexture=function(a){var b=this;return c.unwrapOr(this._texture,function(){return b._initTexture(a)})};a.prototype.updateTexture=function(a){var b=this.dirtyStart,c=this.dirtyEnd;if(!(b>c)){this._resetRange();a=this.getTexture(a);var b=(b-b%this.size)/this.size,c=(c-c%this.size)/this.size,d=b*this.size*4,e=4*(this.size+c*this.size)-d,g=f.getPixelArrayCtor(this.pixelType),
d=new g(this.data.buffer,d*g.BYTES_PER_ELEMENT,e),e=this.size,c=c-b+1;c>this.size?u.error(new k("mapview-webgl","Out-of-bounds index when updating AttributeData")):a.updateData(0,0,b,e,c,d)}};a.prototype.update=function(a,b){a=b.data;var d=b.start,e=b.end;if(c.isSome(a))for(var f=this.data,g=d*this.texelSize,h=0;h<a.length;h++)b.layout&1<<h%this.texelSize&&(f[g+h]=a[h]);this.dirtyStart=Math.min(this.dirtyStart,d);this.dirtyEnd=Math.max(this.dirtyEnd,e)};a.prototype._resetRange=function(){this.dirtyStart=
this.data.length/4;this.dirtyEnd=0};a.prototype._initTexture=function(a){return this._texture=new m.Texture(a,{wrapMode:33071,pixelFormat:6408,dataType:this.pixelType,samplingMode:9728,width:this.size,height:this.size},this.data)};return a}();d=function(){function a(){this._initialized=!1}a.prototype.initialize=function(a){var b=a.blocks,d=a.size;this.shared=a.shared;this.size=d;c.andThen(this._data,function(a){return c.mapMany(a,function(a){return a.destroy()})});this._data=c.mapMany(b,function(a){return new r(a.buffer,
a.pixelType,d)});this._initialized=!0};a.prototype.destroy=function(){c.andThen(this._data,function(a){return c.mapMany(a,function(a){return a.destroy()})});c.andThen(this._defaultTexture,function(a){return a.dispose()})};a.prototype.setLabelMinZoom=function(a,b){this.setData(a,0,1,b)};a.prototype.getLabelMinZoom=function(a){return this.getData(a,0,1)};a.prototype.getFilterFlags=function(a){return this.getData(a,0,0)};a.prototype.getVVSize=function(a){return this.getData(a,1,0)};a.prototype.getData=
function(a,b,d){b=c.expect(this._data)[b];return c.isNone(b)?0:b.getData(a,d)};a.prototype.setData=function(a,b,d,e){b=c.expect(this._data)[b];c.expect(b).setData(a,d,e)};a.prototype.requestUpdate=function(a){return g(this,void 0,void 0,function(){var b;return l(this,function(c){if(this._pendingAttributeUpdate)return u.error(new k("mapview-webgl","Tried to update attribute data with a pending update")),[2];b=h.createResolver();this._pendingAttributeUpdate={data:a,resolver:b};return[2,b.promise]})})};
a.prototype.update=function(a){if(this._initialized&&c.isSome(this._pendingAttributeUpdate)){for(var b=this._pendingAttributeUpdate,d=b.data,b=b.resolver,e=c.expect(this._data),f=function(b){var f=d.blocks[b];c.andThen(e[b],function(d){return c.andThen(f,function(c){n("Updating block "+b,c);d.update(a,c)})})},g=0;g<d.blocks.length;g++)f(g);this._pendingAttributeUpdate=null;b()}};a.prototype.bindTextures=function(a){var d=this._getDefaultTexture(a);if(this._initialized){var e=c.expect(this._data);
c.forEachSome(e,function(b){return b.updateTexture(a)});a.bindTexture(c.mapOr(e[0],d,function(b){return b.getTexture(a)}),b.TEXTURE_BINDING_ATTRIBUTE_DATA_0);a.bindTexture(c.mapOr(e[1],d,function(b){return b.getTexture(a)}),b.TEXTURE_BINDING_ATTRIBUTE_DATA_1);a.bindTexture(c.mapOr(e[2],d,function(b){return b.getTexture(a)}),b.TEXTURE_BINDING_ATTRIBUTE_DATA_2)}else a.bindTexture(d,b.TEXTURE_BINDING_ATTRIBUTE_DATA_0),a.bindTexture(d,b.TEXTURE_BINDING_ATTRIBUTE_DATA_1),a.bindTexture(d,b.TEXTURE_BINDING_ATTRIBUTE_DATA_2)};
a.prototype._getDefaultTexture=function(a){c.isNone(this._defaultTexture)&&(this._defaultTexture=new m.Texture(a,{wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array(4)));return this._defaultTexture};return a}();a.AttributeStoreView=d})},"esri/views/2d/engine/webgl/util/debug":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.createDebugLogger=function(a,d){return a&&function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=
arguments[e];return d.warn.apply(d,["DEBUG:"].concat(a))}||function(){return null}};a.DEBUG_ATTR_UPDATES=!1})},"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["require","exports","../definitions"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this._bucketSize=a;this._rowsLength=l.TILE_SIZE/a;this._colsLength=l.TILE_SIZE/a;this._grid=this._initGrid()}a.prototype.checkOverlap=function(a,d){a=Math.floor(a/this._bucketSize);d=Math.floor(d/
this._bucketSize);if(0>a||a>=this._rowsLength||0>d||d>=this._colsLength||this._grid[d][a])return!0;this._grid[d][a]=!0;return!1};a.prototype.reset=function(){this._grid=this._initGrid()};a.prototype._initGrid=function(){for(var a=[],d=0;d<this._rowsLength;d++)a.push(Array(this._colsLength));return a};return a}();a.CollisionGrid=d})},"esri/views/2d/engine/webgl/collisions/CollisionEngine":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/iterator @dojo/framework/shim/Map ../../../../../core/mathUtils ../definitions ./CollisionBucket ./LayerCollisionInfo ../../../support/mathUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});var f=c.TILE_SIZE/c.COLLISION_BUCKET_SIZE;d=function(){function a(a){this._layers=new k.default;this._collisionBuckets=new k.default;this._tilingScheme=a}Object.defineProperty(a.prototype,"collisionInfos",{get:function(){var a=[];g.forOf(this._layers.values(),function(b){return a.push(b)});return a},enumerable:!0,configurable:!0});a.prototype.registerLayerView=function(a,b){if(!this._layers.has(a)){var c=m.default.create(a,
b,this.collisionInfos,this._tilingScheme);this._layers.set(a,c);this._collisionBuckets.forEach(function(a){return a.onRegisterLayer(c.index)})}};a.prototype.unregisterLayerView=function(a){var b=this;if(this._layers.has(a)){var c=this._layers.get(a);m.default.delete(c.index,this.collisionInfos);this._layers.delete(a);this._collisionBuckets.forEach(function(a,d){var e=a.getTile(c.index);e&&(a.onUnregisterLayer(c.index),a.canDelete()&&b._collisionBuckets.delete(d),e.reference&&(e.reference.isDirty=
!1))})}};a.prototype.addTile=function(a,b){var c=b.key.id;this._layers.has(a)&&(this._collisionBuckets.has(c)||this._collisionBuckets.set(c,new h.default(b.key,this._layers.size)),this._collisionBuckets.get(c).getTile(this._getIndex(a)).reference=b)};a.prototype.removeTile=function(a,b){this._layers.has(a)&&this._collisionBuckets.has(b)&&(a=this._collisionBuckets.get(b).getTile(this._getIndex(a)),a.dirty=!1,a.reference=null)};a.prototype.run=function(a,b){for(var c=l.from(this._collisionBuckets.values()).filter(function(a){return a.key.level===
b}).sort(function(a,b){return a.key.compareRowMajor(b.key)}),d=this._checkRotation(a.rotation),e=0;e<c.length;e++)for(var f=c[e],d=d||f.isDirty,g=0;g<this._layers.size;g++){var h=m.default.find(g,this.collisionInfos);f.computeNeighbors(this._collisionBuckets);f.reset(a,d,h)}for(a=0;a<this._layers.size;a++)for(h=m.default.find(a,this.collisionInfos),d=0,e=c;d<e.length;d++)f=e[d],this._run(f,h,b);for(h=0;h<c.length;h++)f=c[h],f.ready()};a.prototype._run=function(a,b,c){var d=a.getReference(b.index);
d&&d.isDirty&&d.hasData&&this._runVisibility(a,d,b,c)};a.prototype._checkLabelsVisible=function(a,b){var d=!b.effect||b.effect.excludedLabelsVisible||!!(a&c.EFFECT_FLAG_0);return(!b.filter||!!(a&c.FILTER_FLAG_0))&&d};a.prototype._runVisibility=function(a,b,c,d){for(var e=c.layerView.tileRenderer.featuresView.attributeView,f=0,g=b.displayObjects;f<g.length;f++){var h=g[f];if(h.metrics.length){for(var k=0,l=e.getFilterFlags(h.id),m=this._checkLabelsVisible(l,c.layerView),n=0;n<h.metrics.length;n++)l=
h.metrics[n],l=m?this._computeLabelVisibility(h,l,c.index,a,b,l.baseZoom,d):255,k=Math.max(l,k);e.setLabelMinZoom(h.id,k);m=0;for(h=h.metrics;m<h.length;m++)l=h[m],l.minZoom=k}}};a.prototype._computeLabelVisibility=function(a,b,c,d,e,g,h){for(var k=b.xBucket,l=b.yBucket,m=b.xOverflow,n=b.yOverflow,p=k-m,k=k+m+1,m=l+n+1,l=l-n;l<m;l++)for(n=p;n<k;n++)if(!(n<-f||l<-f||n>f||l>f))for(var r=0;r<=c;r++){var t=this._getRelativeSubBucket(r,d,e,n,l);if(t)for(var u=0;u<t.length;u++){var y=t[u];y.id!==a.id&&
(y=this._compareLabels(b,y,g,h),g=Math.max(y,g))}}return g};a.prototype._compareLabels=function(a,b,d,f){var g=10*(f+c.COLLISION_MAX_ZOOM_DELTA);if(-1===b.minZoom||b.minZoom>g||b.minZoom>Math.floor(10*f))return d;a=a.findCollisionDelta(b);f=e.clamp(Math.floor(10*(a+f)),0,255);return b.minZoom>=f?d:Math.max(d,f)};a.prototype._getNeighboringTile=function(a,b,c,d,e){return(b=b.neighbors[3*(1+e)+(1+d)])&&b.getTile(a)};a.prototype._getRelativeSubBucket=function(a,c,d,e,f){var g=b.sign(Math.floor(e/4)),
h=b.sign(Math.floor(f/4));return(a=this._getNeighboringTile(a,c,d,g,h))&&a.reference&&a.index&&a.reference.hasData?a.index[f-4*h][e-4*g]:null};a.prototype._checkRotation=function(a){if(!this._lastRotation)return this._lastRotation=a,!1;var b=a!==this._lastRotation;this._lastRotation=a;return b};a.prototype._getIndex=function(a){return this._layers.get(a).index};return a}();a.CollisionEngine=d})},"esri/views/2d/engine/webgl/collisions/CollisionBucket":function(){define(["require","exports","../../../tiling",
"./CollisionBucketEntry"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,c){this.neighbors=Array(9);this._tiles=Array(c);for(var d=0;d<c;d++)this._tiles[d]=new g.default;this.key=a}Object.defineProperty(a.prototype,"isDirty",{get:function(){for(var a=0,c=this._tiles;a<c.length;a++)if(c[a].dirty)return!0;return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._tiles.length},enumerable:!0,configurable:!0});
a.prototype.getTile=function(a){return this._tiles[a]};a.prototype.getReference=function(a){return(a=this._tiles[a])&&a.reference};a.prototype.onRegisterLayer=function(a){this.invalidateRange(a);this._add(a)};a.prototype.onUnregisterLayer=function(a){this.invalidateRange(a);this._remove(a)};a.prototype.onLabelsRendered=function(){};a.prototype.invalidateRange=function(a){for(;a<this._tiles.length;a++)this._tiles[a].dirty=!0};a.prototype.add=function(a){this._add(a)};a.prototype.remove=function(a){this._remove(a)};
a.prototype.canDelete=function(){return 0===this._tiles.length};a.prototype.ready=function(){for(var a=0,c=this._tiles;a<c.length;a++)c[a].dirty=!1};a.prototype.computeNeighbors=function(a){this.neighbors[0]=this._getNeighbor(a,-1,-1);this.neighbors[1]=this._getNeighbor(a,0,-1);this.neighbors[2]=this._getNeighbor(a,1,-1);this.neighbors[3]=this._getNeighbor(a,-1,0);this.neighbors[4]=this;this.neighbors[5]=this._getNeighbor(a,1,0);this.neighbors[6]=this._getNeighbor(a,-1,1);this.neighbors[7]=this._getNeighbor(a,
0,1);this.neighbors[8]=this._getNeighbor(a,1,1)};a.prototype.reset=function(a,c,d){for(var e=0,b=this._tiles;e<b.length;e++){var f=b[e];f&&f.reset(a,c,d)}};a.prototype._add=function(a){var c=[];if(a>=this._tiles.length)this._tiles.push(new g.default);else{for(var d=0;d<this._tiles.length;d++)d===a&&c.push(new g.default),c.push(this._tiles[d]);this._tiles=c}};a.prototype._remove=function(a){for(var c=[],d=0;d<this._tiles.length;d++)d!==a&&c.push(this._tiles[d]);this._tiles=c};a.prototype._getNeighbor=
function(a,c,d){var e=this.key;c=l.TileKey.getId(e.level,e.row+d,e.col+c,e.world);return a.has(c)?a.get(c):null};return a}();a.default=d})},"esri/views/2d/engine/webgl/collisions/CollisionBucketEntry":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._reference=null}Object.defineProperty(a.prototype,"dirty",{get:function(){return this.reference&&this.reference.isDirty},
set:function(a){this.reference&&this.reference.hasData&&(this.reference.isDirty=a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return this._reference&&this._reference.labelIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"reference",{get:function(){return this._reference},set:function(a){this._reference=a},enumerable:!0,configurable:!0});a.prototype.reset=function(a,d,c){var e=c.layerView.tileRenderer,g=this.reference;if(!g||!g.hasData)return!1;
d&&(g.isDirty=!0);d=g.labelMat2d;for(var b=g.labelMat2d[4],f=g.labelMat2d[5],k=0,u=g.displayObjects;k<u.length;k++)for(var n=u[k],r=e.featuresView.attributeView.getVVSize(n.id),w=0,n=n.metrics;w<n.length;w++){var t=n[w];c.hasVV()&&t.computeOffset(r,c.vvEval);var y=t.bounds.center,x=t.bounds.centerT;g.isDirty&&(t.minZoom=-1);var A=l.vec2.copy(x,t.anchor);a.rotation?l.vec2.transformMat2d(A,A,d):(x[0]=A[0]+b,x[1]=A[1]+f);l.vec2.add(x,A,y);x[0]+=t.offsetX;x[1]+=t.offsetY;if(t.boxes)for(y=0,x=t.boxes;y<
x.length;y++){var A=x[y],z=A.centerT;l.vec2.add(z,t.anchor,A.center);a.rotation?l.vec2.transformMat2d(z,z,d):(z[0]+=b,z[1]+=f)}}return!0};return a}();a.default=d})},"esri/views/2d/engine/webgl/collisions/LayerCollisionInfo":function(){define("require exports ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/screenUtils ./visualVariableSimpleUtils".split(" "),function(d,a,l,g,k,e){function c(a){return function(b){return k.pt2px(e.getSizeForValueSimple(b,a))}}function h(a){if(!a)return null;
for(var b=0;b<a.length;b++){var d=a[b];if("size"===d.type)return c(d)}return null}Object.defineProperty(a,"__esModule",{value:!0});var m=function(a,b){return a.order-b.order},b=function(a,b){return a.index-b.index},f=l.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");a.createLabelVVEvaluator=h;d=function(){function a(a,b,c,d){var e=this;this._vvHandle=null;var f=a.layer,k=f.geometryType,l=f.labelingInfo,m=f.renderer;this.vvEval=h("visualVariables"in m&&m.visualVariables);this._vvHandle=
f.watch("visualVariables",function(a){e.vvEval=h(a)});f=l.map(function(a){var b=!!a.maxScale,c=!!a.minScale&&d.scaleToZoom(a.minScale)||0;a=b&&d.scaleToZoom(a.maxScale)||255;return{minZoom:g.clamp(Math.floor(10*c),0,255),maxZoom:g.clamp(Math.floor(10*a),0,255)}});this.layerView=a;this.geometryType=k;this.index=b;this.order=c;this.zoomRanges=f;this.layerView=a}a.prototype.hasVV=function(){return!!this.vvEval};a.prototype.allOrNothing=function(){return"polyline"!==this.geometryType};a.prototype.destroy=
function(){this._vvHandle.remove()};a.create=function(b,c,d,e){d=d.sort(m);for(var f=!1,g=-1,h=0;h<d.length;h++){var k=d[h];!f&&k.order>c&&(g=k.index,f=!0);f&&k.index++}f||(g=d.length);return new a(b,g,c,e)};a.delete=function(a,c){for(var d=c.sort(b),e=a+1;e<d.length;e++)c[e].index--;c[a].destroy();c.splice(a,1)};a.find=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.index===a)return d}f.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!");return null};return a}();
a.default=d})},"esri/views/2d/engine/webgl/collisions/visualVariableSimpleUtils":function(){define(["require","exports","../../../../../core/mathUtils","../../../../../renderers/support/utils"],function(d,a,l,g){function k(a,b){switch(b.transformationType){case "additive":var d=e(b.minSize,a);return a+(d||b.minDataValue);case "constant":return d=(d=b.stops)&&d.length&&d[0].size,null==d&&(d=b.minSize),e(d,a);case "clamped-linear":var d=(a-b.minDataValue)/(b.maxDataValue-b.minDataValue),k=e(b.minSize,
a),m=e(b.maxSize,a);a=a<=b.minDataValue?k:a>=b.maxDataValue?m:k+d*(m-k);return a;case "proportional":return d=a/b.minDataValue,k=e(b.minSize,a),a=e(b.maxSize,a),l.clamp(d*k,k,a);case "stops":return k=c(a,b.cache.ipData),m=k[0],d=k[1],k=k[2],m===d?a=e(b.stops[m].size,a):(m=e(b.stops[m].size,a),a=e(b.stops[d].size,a),a=m+(a-m)*k),a;case "real-world-size":d=g.meterIn[b.valueUnit];k=e(b.minSize,a);m=e(b.maxSize,a);b=b.valueRepresentation;var n=null,n="area"===b?2*Math.sqrt(a/h)/d:"radius"===b||"distance"===
b?2*a/d:a/d;return l.clamp(n,k,m);case "identity":return a;case "unknown":return null}}function e(a,b){return"number"===typeof a?a:k(b,a)}function c(a,b){if(b){var c=0,d=b.length-1;b.some(function(b,e){if(a<b)return d=e,!0;c=e;return!1});return[c,d,(a-b[c])/(b[d]-b[c])]}}Object.defineProperty(a,"__esModule",{value:!0});var h=Math.PI;a.getSizeForValueSimple=k})},"esri/views/2d/engine/webgl/collisions/LayerViewSorter":function(){define(["require","exports","@dojo/framework/shim/Map"],function(d,a,l){function g(a){return"esri.views.2d.layers.FeatureLayerView2D"===
a.declaredClass||"esri.views.2d.layers.StreamLayerView2D"===a.declaredClass}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,c){this.registerLayer=a;this.unregisterLayer=c;this._layerViewState=new l.default}a.prototype.findIndex=function(a){return a.view.allLayerViews.findIndex(function(c){return c.uid===a.uid})};a.prototype.update=function(a){for(var c=a.added,d=0,e=a.removed;d<e.length;d++)a=e[d],g(a)&&this._layerViewState.has(a)&&this._deleteState(a);for(d=0;d<c.length;d++){a=
c[d];if(e=g(a))a:switch(a.get("layer.renderer.type")){case "class-breaks":case "simple":case "unique-value":e=!0;break a;default:e=!1}e&&!this._layerViewState.has(a)&&this._createState(a)}this._recomputeOrder()};a.prototype.destroy=function(){this._layerViewState.forEach(function(a,c){return a.handle.remove()})};a.prototype._createState=function(a){var c={priority:-1,handle:null};c.handle=a.watch("labelsVisible",this._recomputeOrder.bind(this));this._layerViewState.set(a,c);return c};a.prototype._deleteState=
function(a){if(this._layerViewState.has(a)){var c=this._layerViewState.get(a);c.handle.remove();-1!==c.priority&&this.unregisterLayer(a);this._layerViewState.delete(a)}};a.prototype._recomputeOrder=function(){var a=this;this._layerViewState.forEach(function(c,d){var e=d.view.map.allLayers.findIndex(function(a){return a.uid===d.layer.uid}),b=d.layer,e=b.visible&&b.labelsVisible&&b.labelingInfo?4294967295-e:-1;e!==c.priority&&(c.priority=e,a.unregisterLayer(d),-1!==e&&a.registerLayer(d,e))})};return a}();
a.LayerViewSorter=d})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define("require exports ../../../../../../core/tsSupport/generatorHelper ../../../../../../core/tsSupport/awaiterHelper ../../../../../../core/Error ../../../../../../core/Logger ../../util/Matcher".split(" "),function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});var h=e.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");a.createMatcher=function(a,b,d){return g(this,void 0,
void 0,function(){return l(this,function(e){switch(a.type){case "simple":case "dot-density":return[2,c.FeatureMatcher.fromBasicRenderer(a,b,d)];case "unique-value":return[2,c.MapMatcher.fromUVRenderer(a,b,d)];case "class-breaks":return[2,c.IntervalMatcher.fromCBRenderer(a,b,d)];case "dictionary":return[2,c.DictionaryMatcher.fromDictionaryRenderer(a,b,d)];default:return h.error(new k("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),[2,null]}})})}})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/asyncUtils ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../support/arcadeOnDemand ../../../../../symbols/support/cimSymbolUtils ../../../arcade/utils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f){Object.defineProperty(a,"__esModule",{value:!0});var p=c.getLogger("esri/views/2d/engine/webgl/util/Matcher");d=function(){function a(){this._defaultResult=null}a.fromBasicRenderer=function(c,d,e){return k(this,void 0,void 0,function(){var f,h,k;return g(this,function(g){switch(g.label){case 0:return[4,b.expandSymbols(c.getSymbols(),b.constructUrlFn)];case 1:return f=g.sent(),h=new a,f.length&&(k=d.createTemplateGroup(f[0],null,c,e),h.setDefault(k)),[2,h]}})})};a.prototype.size=
function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=a};a.prototype.match=function(a,b,c,d,e){return this.getDefault()};a.prototype.analyze=function(a,b,c,d,e){return k(this,void 0,void 0,function(){return g(this,function(a){return[2]})})};return a}();a.FeatureMatcher=d;c=function(a){function c(b,c,d,e){var g=a.call(this)||this;g._intervals=[];g._isMaxInclusive=c;e?g._getValue=f.callWithFeature.bind(null,e):b&&b.length?
"function"===typeof b?(g._field=null,g._getValue=b):(g._field=b,g._normalizationInfo=d,g._getValue=g._getValueFromField.bind(g)):g._field=null;return g}l(c,a);c.fromCBRenderer=function(a,d,e){return k(this,void 0,void 0,function(){var f,h,k,l,n,p,r,t,u,w,G,J,K,I,M,O,Q,P,S;return g(this,function(g){switch(g.label){case 0:return f=a.isMaxInclusive,h=a.normalizationField,k=a.normalizationTotal,l=a.normalizationType,n=a.field,p={normalizationField:h,normalizationTotal:k,normalizationType:l},(u=r=a.valueExpression)?
[4,m.createRendererExpression(r,e.spatialReference,e.fields)]:[3,2];case 1:u=g.sent(),g.label=2;case 2:return t=u,w=new c(n,f,p,t),[4,b.expandSymbol(a.backgroundFillSymbol,b.constructUrlFn)];case 3:G=g.sent(),J=0,K=a.classBreakInfos,g.label=4;case 4:if(!(J<K.length))return[3,7];I=K[J];return[4,b.expandSymbol(I.symbol,b.constructUrlFn)];case 5:M=g.sent(),O=d.createTemplateGroup(M,G,a,e),Q={min:I.minValue,max:I.maxValue},w.add(Q,O),g.label=6;case 6:return J++,[3,4];case 7:return[4,b.expandSymbol(a.defaultSymbol,
b.constructUrlFn)];case 8:if(P=g.sent())S=d.createTemplateGroup(P,G,a,e),w.setDefault(S);return[2,w]}})})};c.prototype.add=function(a,b){this._intervals.push({interval:a,result:b});this._intervals.sort(function(a,b){return a.interval.min-b.interval.min})};c.prototype.size=function(){return a.prototype.size.call(this)+this._intervals.length};c.prototype.match=function(a,b,c,d,e){if(!this._getValue)return this.getDefault();a=this._getValue(b,{$view:e},c,d);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();
for(b=0;b<this._intervals.length;b++)if(d=this._intervals[b],c=d.interval,d=d.result,e=this._isMaxInclusive?a<=c.max:a<c.max,a>=c.min&&e)return d;return this.getDefault()};c.prototype._needsNormalization=function(){var a=this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};c.prototype._getValueFromField=function(a){var b=a.attributes[this._field];if(!this._needsNormalization())return b;var c=this._normalizationInfo,d=c.normalizationField,e=c.normalizationTotal,
c=c.normalizationType;a=!!d&&a.attributes[d];if(c)switch(c){case "field":return(a||void 0)&&b/a;case "log":return Math.log(b)*Math.LOG10E;case "percent-of-total":return b/e*100;default:p.error("Found unknown normalization type: "+c)}else p.error("Normalization is required, but no type was set!")};return c}(d);a.IntervalMatcher=c;c=function(a){function c(b,c,d){var e=a.call(this)||this;e._resultsMap=new Map;d?e._getValue=f.callWithFeature.bind(null,d):b&&b.length?"function"===typeof b[0]?(e._fields=
null,e._getValue=b[0]):(e._fields=b,e._seperator=c||"",e._getValue=e._getValueFromFields.bind(e)):e._fields=null;return e}l(c,a);c.fromUVRenderer=function(a,d,e){return k(this,void 0,void 0,function(){var f,h,k,l,n,p,t,r,u,w,G,J,K,I,M;return g(this,function(g){switch(g.label){case 0:return f=a.uniqueValueInfos,h=a.fieldDelimiter,k=[a.field],l=a.valueExpression,a.field2&&k.push(a.field2),a.field3&&k.push(a.field3),[4,b.expandSymbol(a.backgroundFillSymbol,b.constructUrlFn)];case 1:return n=g.sent(),
(t=l)?[4,m.createRendererExpression(l,e.spatialReference,e.fields)]:[3,3];case 2:t=g.sent(),g.label=3;case 3:p=t,r=new c(k,h,p),u=0,w=f,g.label=4;case 4:if(!(u<w.length))return[3,7];G=w[u];return[4,b.expandSymbol(G.symbol,b.constructUrlFn)];case 5:J=g.sent(),K=d.createTemplateGroup(J,n,a,e),r.add(G.value,K),g.label=6;case 6:return u++,[3,4];case 7:return[4,b.expandSymbol(a.defaultSymbol,b.constructUrlFn)];case 8:if(I=g.sent())M=d.createTemplateGroup(a.defaultSymbol,n,a,e),r.setDefault(M);return[2,
r]}})})};c.prototype.add=function(a,b){this._resultsMap.set(a.toString(),b)};c.prototype.size=function(){return a.prototype.size.call(this)+this._resultsMap.size};c.prototype.match=function(a,b,c,d,e){if(!this._getValue)return this.getDefault();a=this._getValue(b,{$view:e},c,d);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?this._resultsMap.get(a):this.getDefault()};c.prototype._getValueFromFields=function(a){for(var b=[],c=0,d=this._fields;c<
d.length;c++)b.push(a.attributes[d[c]]);return b.join(this._seperator)};return c}(d);a.MapMatcher=c;d=function(a){function b(b,c,d){var e=a.call(this)||this;e._fidToAttributeHash=new Map;e._attributeHashToGroup=new Map;e._renderer=b;e._fieldMap=b.fieldMap;e._templates=c;e._info=d;return e}l(b,a);b.fromDictionaryRenderer=function(a,c,d){return k(this,void 0,void 0,function(){return g(this,function(e){a.fetchResources();return[2,new b(a,c,d)]})})};b.prototype.analyze=function(a,b,c,d,f){return k(this,
void 0,void 0,function(){var c,d,k,l,m,n,p=this;return g(this,function(g){switch(g.label){case 0:c=[];d=function(b){var d=b.attributes[a],g=k._fidToAttributeHash.get(d),h=k._hashAttributes(b);if(g===h)return"continue";k._fidToAttributeHash.set(d,h);k._attributeHashToGroup.has(h)||(b=e.safeCast(k._renderer.fetchSymbol(b,f)).then(function(a){a=p._templates.createTemplateGroup(a,null,p._renderer,p._info);p._attributeHashToGroup.set(h,a)}),c.push(b))};k=this;l=0;for(m=b;l<m.length;l++)n=m[l],d(n);return[4,
h.all(c)];case 1:return g.sent(),[2]}})})};b.prototype.match=function(a,b,c,d,e){a=this._fidToAttributeHash.get(b.attributes[a]);return this._attributeHashToGroup.get(a)};b.prototype._hashAttributes=function(a){var b="",c;for(c in this._fieldMap)b+=". "+a.attributes[this._fieldMap[c]];return b};return b}(d);a.DictionaryMatcher=d})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(d,a,l,g,k,e,c,h){function m(a,c,d,e){var f=e.transform,g=e.hasZ;e=e.hasM;p.has(a)||p.set(a,b(d));a=p.get(a)(c.geometry,f,g,e);return l({},c,{geometry:a})}function b(a){var b={};switch(a){case "esriGeometryPoint":return function(a,d,e,f){return c.hydratePoint(d,b,a,e,f)};case "esriGeometryPolygon":return function(a,d,e,f){return c.hydratePolygon(d,b,a,e,f)};case "esriGeometryPolyline":return function(a,d,e,f){return c.hydratePolyline(d,b,a,e,f)};case "esriGeometryMultipoint":return function(a,
d,e,f){return c.hydrateMultipoint(d,b,a,e,f)};default:return f.error(new k("mapview-arcade","Unable to handle geometryType: "+a)),function(a,b,c,d){return a}}}Object.defineProperty(a,"__esModule",{value:!0});var f=e.getLogger("esri.views.2d.support.arcadeOnDemand");a.callWithOptimizedFeature=function(a,b,c,d,e){var g=d.geometryType,k=d.hasZ;d=d.hasM;b=a.referencesGeometry()?e?m(a,h.convertToFeature(b,g,k,d),g,e):h.convertToFeature(b,g,k,d):b;b=a.repurposeFeature(b);try{return a.evaluate(l({},c,{$feature:b}))}catch(A){return f.warn("Feature arcade evaluation failed:",
A),null}};a.callWithFeature=function(a,b,c,d,e){b=a.referencesGeometry()&&e?m(a,b,d,e):b;b=a.repurposeFeature(b);try{return a.evaluate(l({},c,{$feature:b}))}catch(y){return f.warn("Feature arcade evaluation failed:",y),null}};var p=new g.default;a.createHydrateFactory=b})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/tsSupport/generatorHelper ../../../../../../core/tsSupport/awaiterHelper ../../../../../../core/Error ../../../../../../core/has ../../../../../../core/Logger ../../../../../../core/maybe ../../../../../../core/promiseUtils ../../../../../../geometry/SpatialReference ../../../../../../geometry/support/jsonUtils ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../WGLDisplayObject ../MeshData ../VertexVector ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C){function D(a){var b=(a.attributes?Object.keys(a.attributes):[]).map(function(b){return{name:b,alias:b,type:"string"===typeof a.attributes[b]?"esriFieldTypeString":"esriFieldTypeDouble"}});return{geometryType:null!=a.centroid?"esriGeometryPolygon":p.getJsonType(a.geometry),spatialReference:f.fromJSON(a.geometry.spatialReference),fields:b}}Object.defineProperty(a,"__esModule",{value:!0});var B=h.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),
E={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};d=function(){function a(a,b,c,d,e,f){this._isDD=!1;this._labelsDebugTemplate=null;this._isDD=m.isSome(c)&&"dot-density"===c.type;this._geometryType=a;this._idField=b;this._templateStore=d;e&&this._validateLabelingInfo(e)&&
(this._labelTemplates=e.map(function(a){return x.default.fromLabelClass(c,a,f)}))}Object.defineProperty(a.prototype,"templates",{get:function(){return this._templateStore},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(5),c=this._labelTemplates&&0<this._labelTemplates.length,d="esriGeometryPolyline"===this._geometryType?n.HEURISTIC_GLYPHS_PER_LINE:n.HEURISTIC_GLYPHS_PER_FEATURE;b[r.WGLGeometryType.MARKER]=new y.VertexVectors(r.WGLGeometryType.MARKER,a);b[r.WGLGeometryType.FILL]=
new y.VertexVectors(r.WGLGeometryType.FILL,a,this._isDD);b[r.WGLGeometryType.LINE]=new y.VertexVectors(r.WGLGeometryType.LINE,a);b[r.WGLGeometryType.TEXT]=new y.VertexVectors(r.WGLGeometryType.TEXT,a);b[r.WGLGeometryType.LABEL]=new y.VertexVectors(r.WGLGeometryType.LABEL,c?d:0);return new t.MeshData([],b)};a.prototype.analyze=function(a,c,d,e,f){return k(this,void 0,void 0,function(){var h,k,l,n,p,t,r,u,x,y;return g(this,function(g){switch(g.label){case 0:return h=a,b.isAborted(f)?[2,[]]:m.isSome(c)?
[4,c.analyze(this._idField,a,d,e,f)]:[3,2];case 1:g.sent(),g.label=2;case 2:k=0;for(l=h;k<l.length;k++){n=l[k];p=-1;"symbol"in n?null!=n.symbol?(t=null,"cim"===n.symbol.type&&(t=D(n)),p=this._templateStore.createTemplateGroup(n.symbol,null,null,t)):m.isSome(c)&&(p=c.match(this._idField,n,null,null,e)):m.isSome(c)&&(p=c.match(this._idField,n,this._geometryType,d,e));if(C.isDynamicId(p))for(r=this._templateStore.getDynamicTemplateGroup(p),u=0,x=r;u<x.length;u++)(y=x[u])&&y.analyze&&y.analyze(this._templateStore,
n,d,e);n.groupId=p}return[2,this._templateStore.finalize(f).then(function(){return h})]}})})};a.prototype.write=function(a,b,c,d,e,f,g){var h=this._templateStore.getTemplateGroup(b.groupId),k=b.localId;if(null!=k){var l=new w(k),m=!!f&&!!this._labelTemplates&&f.has(k);if(C.isDynamicId(b.groupId))for(var n=0;n<h.length;n++){var t=h[n];t.bindFeature(b,c,d)}if(h&&(b.geometry||b.centroid)){d=l.displayRecords;t=b.insertAfter;void 0!==t&&(l.insertAfter=t);(c=this._geometryType)||(c=null!=b.centroid?"esriGeometryPolygon":
p.getJsonType(b.geometry));for(n=0;n<h.length;n++){var t=h[n],r=a.get(t.geometryType);t.writeMesh(d,r,c,k,b)}m&&(h=this._getLabelReference(h),f=f.get(k),this._writeLabelMesh(l,a,k,b,g,f,h,e,c));a.pushDisplayObject(l)}}};a.prototype._hasBadLabelClass=function(a,b){var c=a.labelPlacement,d=E[b];if(!a.symbol)return B.warn("No LabelClass symbol specified."),!0;if(!d)return B.error(new e("mapview-labeling:unsupported-geometry-type","Unable to create labels for Feature Layer, "+b+" is not supported")),
!0;d.some(function(a){return a===c})||(d=d[0],c&&B.warn("Found invalid label placement type "+c+" for "+b+". Defaulting to "+d),a.labelPlacement=d);return!1};a.prototype._validateLabelingInfo=function(a){var b=this;return!a.some(function(a){return b._hasBadLabelClass(a,b._geometryType)})};a.prototype._getLabelReference=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof z.default)return c}return null};a.prototype._writeLabelMesh=function(a,b,c,d,e,f,g,h,k){for(var l=a.displayRecords,
m=[],p=0;p<f.length;p++){var t=f[p],r=t.text,u=t.rtl,t=this._labelTemplates[t.id],x=b.get(t.geometryType),y=e.get(t.symbolId).glyphMosaicItems;t.bindReferenceTemplate(g);t.bindTextInfo(y,r,u);t.writeMesh(l,x,k,c,d,h,m)}a.metrics=m;n.DEBUG_LABELS&&this._debugLabels(a,b)};a.prototype._debugLabels=function(a,b){var c=a.displayRecords,d=a.id,e=0;for(a=a.metrics;e<a.length;e++)for(var f=a[e],g=0,h=f.boxes?f.boxes.concat([f.bounds]):[f.bounds];g<h.length;g++){var k=h[g],k={geometry:{paths:[[[f.anchor[0]+
f.offsetX+k.center[0]-k.width/2,f.anchor[1]+f.offsetY+k.center[1]+k.height/2],[0,-k.height],[k.width,0],[0,k.height],[-k.width,0]]]},attributes:{}},l=this._getLabelDebugTemplate(),m=b.get(l.geometryType);l.writeMesh(c,m,"esriGeometryPolyline",d,k)}};a.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};a.prototype._createLabelsDebugTemplate=function(){var a=new u({style:"solid",width:1,
color:[255,0,0,1]});return A.default.fromSimpleLine(null,!1,a,null)};return a}();a.WGLMeshFactory=d})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define(["require","exports","./WGLDisplayRecord","./collisions/Metric","./util/serializationUtils"],function(d,a,l,g,k){return function(){function a(a){this.insertAfter=null;this.id=a;this.displayRecords=[];this.metrics=[]}a.prototype.copy=function(){var c=new a(this.id);c.set(this);return c};a.prototype.clone=function(){var c=new a(this.id);
c.displayRecords=this.displayRecords.map(function(a){return a.clone()});c.metrics=this.metrics.map(function(a){return a.clone()});c.insertAfter=this.insertAfter;return c};a.prototype.set=function(a){this.id=a.id;this.displayRecords=a.displayRecords;this.metrics=a.metrics;this.insertAfter=a.insertAfter};a.prototype.serialize=function(a){a.push(this.id);k.serializeList(a,this.metrics);k.serializeList(a,this.displayRecords);return a};a.deserialize=function(c){var d=c.readInt32(),e=new a(d),d={id:d},
b=k.deserializeList(c,g.default);b.length&&(e.metrics=b);e.displayRecords=k.deserializeList(c,l,d);return e};return a}()})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define(["require","exports","../util/serializationUtils","../util/Writer"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a,c){this.displayObjects=a;this.vertexVectorsMap=c}Object.defineProperty(a.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap=
{};for(var a=0;a<this.vertexVectorsMap.length;a++)this._vertexBuffersMap[a]=this.vertexVectorsMap[a].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap},enumerable:!0,configurable:!0});a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};a.prototype.encode=function(a,c){var d=l.serializeList(new g.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),e={};c.push(d);for(var b=0;b<this.vertexVectorsMap.length;b++){var f=
this.vertexVectorsMap[b];e[b]={};f.transfer(e[b],c)}a.displayObjects=d;a.vertexBuffersMap=e;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};a.prototype._guessSize=function(){for(var a=this.displayObjects,c=Math.min(a.length,4),d=0,g=0;g<c;g++)d=Math.max(d,a[g].displayRecords.length);return 2*(12*a.length+a.length*d*40)};return a}();a.MeshData=d})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,
"__esModule",{value:!0});d=function(){function a(a,d){this._pos=0;d=d?this._roundToNearest(d,a.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(d);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest=function(a,d){a=Math.round(a);return a+(d-a%d)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=this._roundToNearest(1.5*(this._array.byteLength+
a*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);a=new ArrayBuffer(a);var d=new this._ctor(a);d.set(this._buffer,0);this._array=a;this._buffer=d}};a.prototype.writeF32=function(a){this._ensureSize(1);var d=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=a;this._pos++;return d};a.prototype.push=function(a){this._ensureSize(1);var d=this._pos;this._buffer[this._pos++]=a;return d};a.prototype.writeRegion=function(a){this._ensureSize(a.length);var d=this._pos;this._buffer.set(a,
this._pos);this._pos+=a.length;return d};a.prototype.buffer=function(){var a=this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.seek=function(a){this._pos=a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=d})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","./VertexBuffer","../util/Writer"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(a,c){this.data=
a;this.stride=c}Object.defineProperty(a.prototype,"vertexCount",{get:function(){return this.data.length/(this.stride/4)},enumerable:!0,configurable:!0});a.prototype.transfer=function(a,c){var b=this.data.buffer();a.vertexCount=this.vertexCount;a.data=b;a.stride=this.stride;c.push(b)};return a}();a.default=e;d=function(){function a(a,c,b){void 0===b&&(b=!1);this.geometryType=a;this.indexVector=new k.default(Uint32Array,c);this.namedVectors={};a=l.getStrides(a,b);for(var d in a){b=a[d];var g=void 0;
switch(b%4){case 0:case 2:g=new k.default(Uint32Array,b/4*c);break;case 1:case 3:g=new k.default(Uint8Array,b*c)}this.namedVectors[d]=new e(g,b)}}a.prototype.get=function(a){return this.namedVectors[a].data};a.prototype.getVector=function(a){return this.namedVectors[a]};a.prototype.transfer=function(a,c){var b=this.indexVector.buffer(),d={};c.push(b);for(var e in this.namedVectors){var g=this.namedVectors[e];d[e]={};g.transfer(d[e],c)}a.geometryType=this.geometryType;a.indexBuffer=b;a.namedBuffers=
d;this.destroy()};a.prototype.intoBuffers=function(){var a=g.VertexBuffers.fromVertexVectors(this);this.destroy();return a};a.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=d})},"esri/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports","../Utils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var g=function(){function a(a,c,d){this.data=a;this.stride=c;this.vertexCount=d}a.decode=function(d){var c=l.allocateTypedArrayBufferwithData(d.data,
d.stride);return new a(c,d.stride,d.vertexCount)};a.fromVertexVector=function(d){var c=l.allocateTypedArrayBufferwithData(d.data.buffer(),d.stride);return new a(c,d.stride,d.vertexCount)};return a}();a.default=g;d=function(){function a(a,c,d){this.geometryType=a;this.indexBuffer=new Uint32Array(c);this.namedBuffers=d}a.decode=function(d){var c=d.geometryType,e=d.indexBuffer,k={},b;for(b in d.namedBuffers)k[b]=g.decode(d.namedBuffers[b]);return new a(c,e,k)};a.fromVertexVectors=function(d){var c=d.geometryType,
e=d.indexVector.buffer(),k={},b;for(b in d.namedVectors)k[b]=g.fromVertexVector(d.namedVectors[b]);return new a(c,e,k)};return a}();a.VertexBuffers=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../color ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u){Object.defineProperty(a,"__esModule",{value:!0});var n=g.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");d=function(a){function d(c,d,e,g,h,k,l,m,n,p,r,u,w,K,I){var t=a.call(this)||this;c=b.LineMaterialKey.load(b.createMaterialKey(t.geometryType,c,w));d&&(c.sdf=d.sdf,c.pattern=!0,c.textureBinding=d.textureBinding);t._capType=g;t._joinType=h;t._miterLimitCosine=f.getLimitCosine(k);t._fillColor=l;t._tl=m;t._br=n;t._hasPattern=p;t._isDashed=r;t._isColorLocked=
u;t._isOutline=w;t._zOrder=I;t._materialKey=c.data;t._bitset=u?1:0;t._halfWidth=.5*e;t._halfReferenceWidth=.5*K;t._initializeTessellator(!1);return t}l(d,a);d.fromCIMLine=function(a,b,f,g){var l=b.color,m=b.isDashed,n=b.cap;m&&n===e.CapType.ROUND&&(n=e.CapType.SQUARE);var p=b.join,t=k.pt2px(b.width),r=k.pt2px(b.referenceWidth),u=k.pt2px(b.miterLimit),l=l&&c.premultiplyAlphaRGBA(l)||0;if(!f)return new d(a,f,t,n,p,u,l,0,0,!1,m,b.colorLocked,g,r,b.zOrder);var x=f.rect,y=x.x+1+f.width,w=x.y+1+f.height,
x=h.i1616to32(x.x+1,x.y+1),y=h.i1616to32(y,w);return new d(a,f,t,n,p,u,l,x,y,!0,m,b.colorLocked,g,r,b.zOrder)};d.fromSimpleLine=function(a,b,e,f){var g=e.color,l="solid"!==e.style&&"none"!==e.style,n=m.getCapType(e.cap||"round",l),p=m.getJoinType(e.join||"round"),g=g&&"none"!==e.style&&c.premultiplyAlphaRGBA(g)||0;"none"===e.style&&(g=0);var t=k.pt2px(e.width);e=e.miterLimit;if(!f)return new d(a,f,t,n,p,e,g,0,0,!1,l,!1,b,t,0);var r=f.rect,u=r.x+1+f.width,x=r.y+1+f.height,r=h.i1616to32(r.x+1,r.y+1),
u=h.i1616to32(u,x);return new d(a,f,t,n,p,e,g,r,u,!0,l,!1,b,t,0)};d.fromPictureLineSymbol=function(a,b,c,d){n.error("PictureLineSymbol support does not exist!");return null};return d}(p.default(u.default));a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/has ../../../../../../core/Logger ../../definitions ../../enums ../../number ../../TileClipper ../../TurboLine ../../WGLDisplayRecord ../../materialKey/MaterialKey".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});var u=k.getLogger("esri.views.2d.engine.webgl.WGLLineTemplateBase"),n=e.TILE_SIZE+8,r=1/3.8,w=new m.TileClipper(0,0,0,1,8);w.setExtent(e.TILE_SIZE);var t=new Uint32Array(9),y=new Uint32Array(36),x=new Uint32Array(3),A=new Uint32Array(6);a.default=function(a){return function(a){function d(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];b=a.apply(this,b)||this;b._tessellationOptions={};b.geometryType=c.WGLGeometryType.LINE;
return b}l(d,a);d.prototype.writeMesh=function(a,b,c,d,e){var g=b.indexVector,h=b.get("geometry"),k=new f(d,this.geometryType,this._materialKey);b=b.getVector("geometry").vertexCount;k.vertexFrom=b;k.indexFrom=g.length;switch(c){case "esriGeometryPolyline":c=this._clipLines(e.geometry.paths);if(0===c.length)break;this._write(k,g,h,b,d,c);a.push(k);break;case "esriGeometryPolygon":c=this._clipLines(e.geometry.rings);if(0===c.length)break;this._write(k,g,h,b,d,c);a.push(k);break;default:u.error("Unable to handle geometryType: "+
c)}};d.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var e=[],f=a[d];w.reset(2);var g=f[0],h=g[0],g=g[1];if(c)w.moveTo(h,g);else{if(-8>h||h>n||-8>g||g>n){c=!0;continue}e.push({x:h,y:g})}for(var k=!1,l=f.length,m=1;m<l;++m)if(h+=f[m][0],g+=f[m][1],c)w.lineTo(h,g);else{if(-8>h||h>n||-8>g||g>n){k=!0;break}e.push({x:h,y:g})}if(k)c=!0;else{if(c){if(e=w.resultWithStarts())for(c=0;c<e.length;c++)b.push(e[c])}else b.push({line:e,start:0});d++;c=!1}}return b};d.prototype._write=function(a,
c,d,e,f,g){this.id=f;this.indexBuf=c;this.indexCount=0;this.geometryBuf=d;this.vertexCount=0;this.offset=e;for(c=0;c<g.length;c++)d=g[c],e=d.line,2>e.length||(this._tessellationOptions.initialDistance=d.start%65535,this._tessellationCallbacks instanceof b.StandardTessellationCallbacks&&(this._tessellationCallbacks.capType=this._capType,this._tessellationCallbacks.joinType=this._joinType),b.tessellate(e,this._tessellationOptions,this._tessellationCallbacks));a.vertexCount=this.vertexCount;a.indexCount=
this.indexCount;a.zOrder=this._zOrder};d.prototype._initializeTessellator=function(a){var c=p.LineMaterialKey.load(this._materialKey);this._tessellationOptions.trackDistance=this._isDashed||this._hasPattern;this._tessellationOptions.thin=!a&&this._halfWidth<e.THIN_LINE_THRESHOLD/2&&!(c.vvSizeFieldStops||c.vvSizeMinMaxValue||c.vvSizeScaleStops||c.vvSizeUnitValue);this._tessellationOptions.wrapDistance=65535;this._tessellationOptions.outerBisectorAutoSplitThreshold=r;this._tessellationOptions.enableOuterBisectorSplit=
this._isDashed||this._hasPattern;this._tessellationOptions.innerBisectorAutoSplitThreshold=r;this._tessellationOptions.enableInnerBisectorSplit=this._isDashed||this._hasPattern;this._tessellationOptions.thin?this._tessellationCallbacks={vertex:this._thinVertex.bind(this),bridge:this._thinBridge.bind(this)}:(a=new b.StandardTessellationCallbacks(this._thickWriteVertex.bind(this),this._thickWriteTriangle.bind(this)),a.miterLimitCosine=this._miterLimitCosine,a.textured=this._isDashed||this._hasPattern,
this._tessellationCallbacks=a)};d.prototype._thinVertex=function(a){a.entry0=this.offset+this.vertexCount++;var b=h.i1616to32(a.distance,31*this._halfWidth),c=h.i8888to32(Math.round(31*a.prevNormal.x),Math.round(31*a.prevNormal.y),Math.round(0),Math.round(-31)),d=h.i8888to32(0,0,0,this._bitset);y[0]=h.i1616to32(a.currentVertex.x,a.currentVertex.y);y[1]=this.id;y[2]=this._fillColor;y[3]=c;y[4]=b;y[5]=this._tl;y[6]=this._br;y[7]=d;y[8]=h.i1616to32(31*this._halfReferenceWidth,0);a.entry2=this.offset+
this.vertexCount++;b=h.i1616to32(a.distance,31*this._halfWidth);c=h.i8888to32(Math.round(31*-a.prevNormal.x),Math.round(31*-a.prevNormal.y),Math.round(0),Math.round(31));d=h.i8888to32(0,0,0,this._bitset);y[9]=h.i1616to32(a.currentVertex.x,a.currentVertex.y);y[10]=this.id;y[11]=this._fillColor;y[12]=c;y[13]=b;y[14]=this._tl;y[15]=this._br;y[16]=d;y[17]=h.i1616to32(31*this._halfReferenceWidth,0);a.exit0=this.offset+this.vertexCount++;b=h.i1616to32(a.distance,31*this._halfWidth);c=h.i8888to32(Math.round(31*
a.nextNormal.x),Math.round(31*a.nextNormal.y),Math.round(0),Math.round(-31));d=h.i8888to32(0,0,0,this._bitset);y[18]=h.i1616to32(a.currentVertex.x,a.currentVertex.y);y[19]=this.id;y[20]=this._fillColor;y[21]=c;y[22]=b;y[23]=this._tl;y[24]=this._br;y[25]=d;y[26]=h.i1616to32(31*this._halfReferenceWidth,0);a.exit2=this.offset+this.vertexCount++;b=h.i1616to32(a.distance,31*this._halfWidth);c=h.i8888to32(Math.round(31*-a.nextNormal.x),Math.round(31*-a.nextNormal.y),Math.round(0),Math.round(31));d=h.i8888to32(0,
0,0,this._bitset);y[27]=h.i1616to32(a.currentVertex.x,a.currentVertex.y);y[28]=this.id;y[29]=this._fillColor;y[30]=c;y[31]=b;y[32]=this._tl;y[33]=this._br;y[34]=d;y[35]=h.i1616to32(31*this._halfReferenceWidth,0);this.geometryBuf.writeRegion(y)};d.prototype._thinBridge=function(a){A[0]=a.leftExit0;A[1]=a.rightEntry0;A[2]=a.leftExit2;A[3]=a.rightEntry0;A[4]=a.rightEntry2;A[5]=a.leftExit2;this.indexCount+=6;this.indexBuf.writeRegion(A)};d.prototype._thickWriteVertex=function(a,b,c,d,e,f,g,k,l){l=h.i1616to32(l,
31*this._halfWidth);e=h.i8888to32(Math.round(31*e),Math.round(31*f),Math.round(31*g),Math.round(31*k));c=h.i8888to32(31*c,31*d,0,this._bitset);t[0]=h.i1616to32(a,b);t[1]=this.id;t[2]=this._fillColor;t[3]=e;t[4]=l;t[5]=this._tl;t[6]=this._br;t[7]=c;t[8]=h.i1616to32(31*this._halfReferenceWidth,0);this.geometryBuf.writeRegion(t);return this.offset+this.vertexCount++};d.prototype._thickWriteTriangle=function(a,b,c){x[0]=a;x[1]=b;x[2]=c;this.indexCount+=3;this.indexBuf.writeRegion(x)};return d}(a)}})},
"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../../../../../symbols/cim/enums ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./WGLBaseMarkerTemplate ./WGLMeshTemplate".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){Object.defineProperty(a,"__esModule",{value:!0});var y=k.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");d=function(a){function d(d,e,k,l,p,t,u,x,w,A,I,M,O,Q,P,S,U,T){var z=a.call(this)||this;if(200<t||200<u)y.error(new g("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels")),t>u?(u*=200/t,t=200):(t*=200/u,u=200);z.height=u;z.width=t;z.xOffset=e;z.yOffset=k;var E=b.vec2f32.create(),F=h.mat2df32.create();
I=(Q===f.Alignment.MAP?1:0)|(I?1:0)<<1|(O?1:0)<<2|(M?1:0)<<3;M=P&&P.sdf;c.mat2d.translate(F,F,b.vec2f32.fromValues(e,-k));l&&c.mat2d.rotate(F,F,3.14159265359/180*l);d=r.MarkerMaterialKey.load(r.createMaterialKey(z.geometryType,d,!1));d.sdf=M;d.pattern=!0;d.textureBinding=P.textureBinding;z._materialKey=d.data;z._fillColor=p;z._outlineColor=w;z._sizeOutlineWidth=n.i8888to32(Math.round(Math.sqrt(256*t)),Math.round(Math.sqrt(256*u)),Math.round(Math.sqrt(256*A)),Math.round(Math.sqrt(256*x)));p=P.rect.x/
4;x=P.rect.y/4;w=p+P.rect.width/4;A=x+P.rect.height/4;S=.5-((.5+S)*P.width+1)/P.rect.width;U=.5-((.5+U)*P.height+1)/P.rect.height;d=Math.round(Math.min(64*T,255));t*=P.rect.width/P.width*T;u*=P.rect.height/P.height*T;P=(S-.5)*t;U=(U-.5)*u;m.vec2.set(E,P,U);m.vec2.transformMat2d(E,E,F);z._offsetUpperLeft=n.i1616to32(16*E[0],16*E[1]);z._texUpperLeft=n.i8888to32(p,x,I,d);m.vec2.set(E,P+t,U);m.vec2.transformMat2d(E,E,F);z._offsetUpperRight=n.i1616to32(16*E[0],16*E[1]);z._texUpperRight=n.i8888to32(w,x,
I,d);m.vec2.set(E,P,U+u);m.vec2.transformMat2d(E,E,F);z._offsetBottomLeft=n.i1616to32(16*E[0],16*E[1]);z._texBottomLeft=n.i8888to32(p,A,I,d);m.vec2.set(E,P+t,U+u);m.vec2.transformMat2d(E,E,F);z._offsetBottomRight=n.i1616to32(16*E[0],16*E[1]);z._texBottomRight=n.i8888to32(w,A,I,d);return z}l(d,a);d.fromCIMMarker=function(a,b,c){var g=b.size,h=(c&&c.width||1)/(c&&c.height||1)*b.scaleX,k=b.scaleSymbolsProportionally&&b.frameHeight?g/b.frameHeight:1,l=p.premultiplyAlphaRGBA(b.color),m=p.premultiplyAlphaRGBA(b.outlineColor),
n=e.pt2px(g),t=n*h,r=e.pt2px(b.offsetX||0),u=e.pt2px(b.offsetY||0),k=e.pt2px(b.outlineWidth||0)*k,x=b.alignment||f.Alignment.SCREEN,y=e.pt2px(b.referenceSize),w=b.rotation||0;b.rotateClockwise||(w=-w);var z=0,D=0,C=b.anchorPoint;C&&(b.isAbsoluteAnchorPoint?g&&(z=-C.x/(g*h),D=C.y/g):(z=C.x,D=C.y));return new d(a,r,u,w,l,t,n,y,m,k,b.colorLocked,b.scaleSymbolsProportionally,!1,x,c,z,D,b.sizeRatio)};d.fromPictureMarker=function(a,b,c){var g=Math.round(e.pt2px(b.width)),h=Math.round(e.pt2px(b.height)),
k=u.PICTURE_FILL_COLOR,l=Math.round(e.pt2px(b.xoffset||0)),m=Math.round(e.pt2px(b.yoffset||0));return new d(a,l,m,b.angle,k,g,h,h,0,0,!1,!1,!1,f.Alignment.SCREEN,c,0,0,1)};d.fromSimpleMarker=function(a,b,c){var g=p.premultiplyAlphaRGBA(b.color),h=Math.round(e.pt2px(b.size)),k=Math.round(e.pt2px(b.xoffset||0)),l=Math.round(e.pt2px(b.yoffset||0)),m=b.style,n=b.outline,t=(n&&n.color&&p.premultiplyAlphaRGBA(n.color))|0,n=(n&&n.width&&Math.round(e.pt2px(n.width)))|0;return new d(a,k,l,b.angle,g,h,h,h,
t,n,!1,!1,"cross"===m||"x"===m,f.Alignment.SCREEN,c,0,0,1.96875)};return d}(w.default(t.default));a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../enums ../../number ../../WGLDisplayRecord ../../materialKey/MaterialKey".split(" "),function(d,a,l,g,k,e,c,h){Object.defineProperty(a,"__esModule",{value:!0});var m=g.getLogger("esri.views.2d.engine.webgl.WGLMarkerTemplateBase");
a.default=function(a){return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.xOffset=0;b.yOffset=0;b.width=0;b.height=0;b.geometryType=k.WGLGeometryType.MARKER;return b}l(b,a);b.prototype.writeMesh=function(a,b,d,e,f){var g=h.MarkerMaterialKey.load(this._materialKey),k=b.indexVector,l=b.get("geometry"),n=new c(e,this.geometryType,this._materialKey);b=b.getVector("geometry").vertexCount;a.push(n);n.vertexFrom=b;n.indexFrom=k.length;switch(d){case "esriGeometryPoint":d=
f.geometry;a=d.x;d=d.y;this._writeVertices(n,l,e,this._getPos(a,d),g);this._writeIndices(n,k,b);break;case "esriGeometryPolyline":this._writeMany(n,k,l,b,e,f.geometry.paths[0],g);break;case "esriGeometryPolygon":(d=f.centroid)?(a=d.x,d=d.y,this._writeVertices(n,l,e,this._getPos(a,d),g),this._writeIndices(n,k,b)):m.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(n,k,l,b,e,f.geometry.points,g);break;default:m.error("Unable to handle geometryType: "+
d)}};b.prototype._getPos=function(a,b){return e.i1616to32(a,b)};b.prototype._writeMany=function(a,b,c,d,e,f,g){for(var h=0,k=0,l=0,m=0;m<f.length;m++){var n=f[m],p=n[0],n=n[1],t=this._getPos(p+h,n+k);this._writeVertices(a,c,e,t,g);this._writeIndices(a,b,d+l);h+=p;k+=n;l+=4}};b.prototype._writeVertices=function(a,b,c,d,e){b.push(d);b.push(this._offsetUpperLeft);b.push(this._texUpperLeft);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);b.push(d);b.push(this._offsetUpperRight);
b.push(this._texUpperRight);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);b.push(d);b.push(this._offsetBottomLeft);b.push(this._texBottomLeft);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);b.push(d);b.push(this._offsetBottomRight);b.push(this._texBottomRight);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);a.vertexCount+=4};b.prototype._writeIndices=function(a,b,
c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(a)}})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("require exports ../../../../../../core/tsSupport/awaiterHelper ../../../../../../core/tsSupport/generatorHelper ../../../../../../core/asyncUtils ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/cim/cimAnalyzer ../../../../../../symbols/support/defaults ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/BidiText ../../util/Lock ../../util/Result".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A){function z(a,b){var c=a.length;a.push(null);b.then(function(b){return a[c]=b});return a}function C(a){return!!(a&1)}Object.defineProperty(a,"__esModule",{value:!0});var D=c.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),B=[];a.isDynamicId=C;d=function(){function a(a){this._templateIdCounter=this._idCounter=0;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=
new Map;this._cimAnalyses=[];this._lock=new x.default;this._fetchResource=a}Object.defineProperty(a.prototype,"_markerError",{get:function(){return this._errorTemplates.marker[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_fillError",{get:function(){return this._errorTemplates.fill[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_lineError",{get:function(){return this._errorTemplates.line[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"_textError",{get:function(){return this._errorTemplates.line[0]},enumerable:!0,configurable:!0});a.prototype.createTemplateGroup=function(a,b,c,d){this._initErrorTemplates();var e=this._hashSymbol(a);if(!this._symbolToTemplate.has(e)){var f=[];b&&this._createMeshTemplates(f,b,c,d,!0);this._createMeshTemplates(f,a,c,d,!1);a=this._createGroupId("cim"===a.type);this._idToTemplateGroup.set(a,f);this._symbolToTemplate.set(e,a)}return this._symbolToTemplate.get(e)};a.prototype.getCIMMosaicItem=function(a,
b){var c=this,d=this._createTemplateId(),e=h.create(function(a){return c._idToResolver.set(d,a)});this._fetchQueue.push({symbol:a,id:d,glyphIds:b});return e};a.prototype.getTemplateGroup=function(a){return this._idToTemplateGroup.has(a)?this._idToTemplateGroup.get(a):B};a.prototype.getDynamicTemplateGroup=function(a){if(!this._idToTemplateGroup.has(a))return B;C(a)||D.error("mapview-template-store","Id "+a+" does not refer to a dynamic template");return this._idToTemplateGroup.get(a)};a.prototype.finalize=
function(a){return this._fetchQueue.length||this._lock.isHeld()?x.withLock(this._lock,this._fetchAllQueuedResources.bind(this),a):h.resolve()};a.prototype._initErrorTemplates=function(){if(!this._errorTemplates){var a=this._createMeshTemplates([],b.errorPolygonSymbol2D,null,null,!1),c=this._createMeshTemplates([],b.errorPointSymbol2D,null,null,!1),d=this._createMeshTemplates([],b.errorPolylineSymbol2D,null,null,!1);this._errorTemplates={fill:a,marker:c,line:d}}};a.prototype._fetchAllQueuedResources=
function(a){var b=this;if(!this._fetchQueue.length)return h.resolve();var c=this._fetchQueue,d=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=[];return h.all(d).then(function(){return b._fetchResource(c,a).then(function(a){for(var c=0;c<a.length;c++){var d=a[c],e=d.id,d=d.mosaicItem;b._idToResolver.get(e)(d);b._idToResolver.delete(e)}})}).catch(function(a){h.isAbortError(a)?b._fetchQueue=b._fetchQueue.concat(c):D.error(new e("mapview-template-store","Unable to fetch requested texture resources",
a))})};a.prototype._createGroupId=function(a){return this._idCounter++<<1|(a?1:0)};a.prototype._createTemplateId=function(){return this._templateIdCounter++};a.prototype._getCodepoints=function(a){a=y.bidiText(a.text)[0];for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b};a.prototype._getMosaicItem=function(a){var b=this,c=this._createTemplateId(),d="text"===a.type&&this._getCodepoints(a),e=h.create(function(a){return b._idToResolver.set(c,a)});this._fetchQueue.push({symbol:a.toJSON(),
id:c,glyphIds:d});return e};a.prototype._hashSymbol=function(a){return a.id?a.id:JSON.stringify(a)};a.prototype._createSMS=function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,function(d){switch(d.label){case 0:return[4,this._getMosaicItem(a)];case 1:return c=d.sent().spriteMosaicItem,A.ok(c,D)?[2,w.default.fromSimpleMarker(b,a,c)]:[2,this._markerError]}})})};a.prototype._createPMS=function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,function(d){switch(d.label){case 0:return[4,
this._getMosaicItem(a)];case 1:return c=d.sent().spriteMosaicItem,A.ok(c,D)?[2,w.default.fromPictureMarker(b,a,c)]:[2,this._markerError]}})})};a.prototype._createSFS=function(a,b,c){return l(this,void 0,void 0,function(){var d,e;return g(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return d=f.sent().spriteMosaicItem,e=a,A.ok(d,D)?[2,n.default.fromSimpleFill(b,e,d,c)]:[2,this._fillError]}})})};a.prototype._createPFS=function(a,b,c){return l(this,void 0,void 0,function(){var d,
e;return g(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return d=f.sent().spriteMosaicItem,e=a,A.ok(d,D)?[2,n.default.fromPictureFill(b,e,d,c)]:[2,this._fillError]}})})};a.prototype._createSLS=function(a,b,c){return l(this,void 0,void 0,function(){var d,e;return g(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return d=f.sent().spriteMosaicItem,e=a,A.ok(d,D)?[2,r.default.fromSimpleLine(b,c,e,d)]:[2,this._lineError]}})})};a.prototype._createTS=
function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,function(d){switch(d.label){case 0:return[4,this._getMosaicItem(a)];case 1:return c=d.sent().glyphMosaicItems,[2,t.default.fromText(b,a,c)]}})})};a.prototype._createCIMText=function(a,b){return l(this,void 0,void 0,function(){var c,d,e,f,k,l;return g(this,function(g){switch(g.label){case 0:if("function"===typeof a.materialHash)return[2,h.resolve(u.default.fromCIMText(b,a))];c=[];if(d=a.text)for(e=d.length,f=0;f<e;f++)k=d.charCodeAt(f),
c.push(k);a.cim.mosaicHash=a.materialHash;return[4,this.getCIMMosaicItem(a.cim,c)];case 1:return l=g.sent().glyphMosaicItems,A.ok(l,D)?[2,t.default.fromCIMText(b,a,l)]:[2,this._textError]}})})};a.prototype._createCIMFill=function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,function(d){switch(d.label){case 0:return a.cim.mosaicHash=a.materialHash,[4,this.getCIMMosaicItem(a.cim)];case 1:return c=d.sent().spriteMosaicItem,A.ok(c,D)?[2,n.default.fromCIMFill(b,a,c,!1)]:[2,this._fillError]}})})};
a.prototype._createCIMLine=function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,function(d){switch(d.label){case 0:if("function"===typeof a.materialHash)return[2,h.resolve(f.default.fromCIMLine(b,a))];a.cim.mosaicHash=a.materialHash;return[4,this.getCIMMosaicItem(a.cim)];case 1:return c=d.sent().spriteMosaicItem,A.ok(c,D)?[2,r.default.fromCIMLine(b,a,c,!1)]:[2,this._lineError]}})})};a.prototype._createCIMMarker=function(a,b){return l(this,void 0,void 0,function(){var c;return g(this,
function(d){switch(d.label){case 0:if("function"===typeof a.materialHash)return[2,h.resolve(p.default.fromCIMMarker(b,a))];a.cim.mosaicHash=a.materialHash;return[4,this.getCIMMosaicItem(a.cim)];case 1:return c=d.sent().spriteMosaicItem,A.ok(c,D)?[2,w.default.fromCIMMarker(b,a,c)]:[2,this._markerError]}})})};a.prototype._createCIM=function(a,b){return l(this,void 0,void 0,function(){var c,d,e=this;return g(this,function(f){c=a.templateHash;if(this._cimTemplateCache.has(c))return[2,this._cimTemplateCache.get(c)];
switch(a.type){case "marker":d=this._createCIMMarker(a,b);break;case "line":d=this._createCIMLine(a,b);break;case "fill":d=this._createCIMFill(a,b);break;case "text":d=this._createCIMText(a,b)}d.then(function(a){return e._cimTemplateCache.set(c,a)});return[2,d]})})};a.prototype._getCIMSymbolLayers=function(a,b,c){return l(this,void 0,void 0,function(){var d,e,f,k,l;return g(this,function(g){switch(g.label){case 0:d=[];e=[];if(Array.isArray(a.data))for(f=0,k=a.data;f<k.length;f++)l=k[f],d.push(m.analyzeCIMSymbol(l,
b,c,e));else d.push(m.analyzeCIMSymbol(a.data,b,c,e));return[4,h.all(d)];case 1:return g.sent(),[2,e]}})})};a.prototype._createCIMMeshTemplates=function(a,b,c,d){var e=this;b=this._getCIMSymbolLayers(b,c?c.fieldMap:null,d);this._cimAnalyses.push(k.safeCast(b.then(function(b){for(var d=0;d<b.length;d++)z(a,e._createCIM(b[d],c))})))};a.prototype._createMeshTemplates=function(a,b,c,d,e){if(-1!==b.type.indexOf("3d"))return D.error("3D symbols are not supported with MapView"),a;switch(b.type){case "cim":return this._createCIMMeshTemplates(a,
b,c,d),a;case "simple-marker":return z(a,this._createSMS(b,c));case "picture-marker":return z(a,this._createPMS(b,c));case "simple-fill":return z(a,this._createSFS(b,c,e)),b.outline&&z(a,this._createSLS(b.outline,c,!0)),a;case "picture-fill":return z(a,this._createPFS(b,c,e)),b.outline&&z(a,this._createSLS(b.outline,c,!0)),a;case "simple-line":return z(a,this._createSLS(b,c,!1));case "text":return z(a,this._createTS(b,c));default:return D.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),
a}};return a}();a.WGLTemplateStore=d})},"esri/symbols/cim/cimAnalyzer":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Color ../../core/Logger ../../core/promiseUtils ../../support/arcadeOnDemand ./CIMSymbolHelper ./enums ./SDFHelper ./utils ../../views/2d/arcade/utils".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p,u){function n(a){return a?{r:a[0],g:a[1],b:a[2],a:a[3]/255}:{r:0,g:0,b:0,a:0}}function r(a){switch(a){case "Butt":return b.CapType.BUTT;
case "Square":return b.CapType.SQUARE;default:return b.CapType.ROUND}}function w(a){switch(a){case "Bevel":return b.JoinType.BEVEL;case "Miter":return b.JoinType.MITER;default:return b.JoinType.ROUND}}function t(a){switch(a){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"justify"}}function y(a){switch(a){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function x(a,c,d,e,f){return g(this,
void 0,void 0,function(){var g,h,k,n,p,t,r;return l(this,function(l){switch(l.label){case 0:if(!a)return[2];g=a.symbolLayers;if(!g)return[2];k=m.CIMSymbolHelper.getSize(a);"CIMPointSymbol"===a.type&&"Map"===a.angleAlignment&&(h=b.Alignment.MAP);n=g.length;l.label=1;case 1:if(!n--)return[3,23];p=g[n];if(!p||!1===p.enable)return[3,1];t=[];m.OverrideHelper.findApplicableOverrides(p,c,t);r=p.type;switch(r){case "CIMSolidFill":return[3,2];case "CIMPictureFill":return[3,4];case "CIMHatchFill":return[3,
6];case "CIMGradientFill":return[3,8];case "CIMSolidStroke":return[3,10];case "CIMPictureStroke":return[3,12];case "CIMGradientStroke":return[3,14];case "CIMCharacterMarker":return[3,16];case "CIMPictureMarker":return[3,17];case "CIMVectorMarker":return[3,19]}return[3,21];case 2:return[4,A(p,t,e,f)];case 3:return l.sent(),[3,22];case 4:return[4,z(p,t,e,f)];case 5:return l.sent(),[3,22];case 6:return[4,C(p,t,e,f)];case 7:return l.sent(),[3,22];case 8:return[4,D(p,t,e,f)];case 9:return l.sent(),[3,
22];case 10:return[4,B(p,t,e,f,"CIMPolygonSymbol"===a.type,k)];case 11:return l.sent(),[3,22];case 12:return[4,E(p,t,e,f,"CIMPolygonSymbol"===a.type,k)];case 13:return l.sent(),[3,22];case 14:return[4,F(p,t,e,f,"CIMPolygonSymbol"===a.type,k)];case 15:return l.sent(),[3,22];case 16:return[3,22];case 17:return[4,H(p,t,e,f,h,k)];case 18:return l.sent(),[3,22];case 19:return[4,G(p,t,d,e,f,h,k)];case 20:return l.sent(),[3,22];case 21:U.error("Cannot analyze CIM layer",p.type),l.label=22;case 22:return[3,
1];case 23:return[2]}})})}function A(a,b,c,d){return g(this,void 0,void 0,function(){var e,f,g,h,k,m;return l(this,function(l){switch(l.label){case 0:return e=a.primitiveName,f=n(a.color),g=p.hashString(JSON.stringify(a)).toString(),k=(h=d).push,m={type:"fill",templateHash:g,materialHash:0===b.length?g:function(a,b,c){return g},cim:a,materialOverrides:null,colorLocked:a.colorLocked},[4,O(e,"Color",b,c,f,M)];case 1:return k.apply(h,[(m.color=l.sent(),m.height=0,m.angle=0,m.offsetX=0,m.offsetY=0,m.scaleX=
1,m)]),[2]}})})}function z(a,b,c,d){return g(this,void 0,void 0,function(){var e,f,g,h,k,m,t;return l(this,function(l){switch(l.label){case 0:return e=a.primitiveName,f=n(a.tintColor),g=p.hashString(JSON.stringify(a)).toString(),h=p.hashString(""+a.url+JSON.stringify(a.colorSubstitutions)).toString(),m=(k=d).push,t={type:"fill",templateHash:g,materialHash:0===b.length?h:function(a,b,c){return h},cim:a,materialOverrides:null,colorLocked:a.colorLocked},[4,O(e,"TintColor",b,c,f,M)];case 1:return t.color=
l.sent(),[4,O(e,"Height",b,c,a.height)];case 2:return t.height=l.sent(),[4,O(e,"ScaleX",b,c,a.scaleX)];case 3:return t.scaleX=l.sent(),[4,O(e,"Rotation",b,c,a.rotation)];case 4:return t.angle=l.sent(),[4,O(e,"OffsetX",b,c,a.offsetX)];case 5:return t.offsetX=l.sent(),[4,O(e,"OffsetY",b,c,a.offsetY)];case 6:return m.apply(k,[(t.offsetY=l.sent(),t)]),[2]}})})}function C(a,b,c,d){return g(this,void 0,void 0,function(){var e,f,g,h,k,m,n,t;return l(this,function(l){switch(l.label){case 0:e=["Rotation",
"OffsetX","OffsetY"];f=b.filter(function(b){return b.primitiveName!==a.primitiveName&&-1===e.indexOf(b.propertyName)});g=a.primitiveName;h=p.hashString(JSON.stringify(a)).toString();m=(k=d).push;n={type:"fill",templateHash:h};if(0!==b.length)return[3,1];t=h;return[3,3];case 1:return[4,S(h,f,c)];case 2:t=l.sent(),l.label=3;case 3:return n.materialHash=t,n.cim=a,n.materialOverrides=f,n.colorLocked=a.colorLocked,n.color={r:128,g:128,b:128,a:1},n.height=0,n.scaleX=1,[4,O(g,"Rotation",b,c,a.rotation)];
case 4:return n.angle=l.sent(),[4,O(g,"OffsetX",b,c,a.offsetX)];case 5:return n.offsetX=l.sent(),[4,O(g,"OffsetY",b,c,a.offsetY)];case 6:return m.apply(k,[(n.offsetY=l.sent(),n)]),[2]}})})}function D(a,b,c,d){return g(this,void 0,void 0,function(){var e,f,g,h,k;return l(this,function(l){switch(l.label){case 0:e=p.hashString(JSON.stringify(a)).toString();g=(f=d).push;h={type:"fill",templateHash:e};if(0!==b.length)return[3,1];k=e;return[3,3];case 1:return[4,S(e,b,c)];case 2:k=l.sent(),l.label=3;case 3:return g.apply(f,
[(h.materialHash=k,h.cim=a,h.materialOverrides=null,h.colorLocked=a.colorLocked,h.color={r:128,g:128,b:128,a:1},h.height=0,h.angle=0,h.offsetX=0,h.offsetY=0,h.scaleX=1,h)]),[2]}})})}function B(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,h,k,m,t,u,x,y,z,E;return l(this,function(l){switch(l.label){case 0:return g=p.hashString(JSON.stringify(a)).toString(),h=a.primitiveName,k=n(a.color),m=void 0!==a.width?a.width:4,t=r(a.capStyle),u=w(a.joinStyle),x=a.miterLimit,z=(y=d).push,E={type:"line",
templateHash:g,materialHash:0===b.length?g:function(a,b,c){return g},cim:a,materialOverrides:null,isOutline:e,colorLocked:a.colorLocked},[4,O(h,"Color",b,c,k,M)];case 1:return E.color=l.sent(),[4,O(h,"Width",b,c,m)];case 2:return E.width=l.sent(),[4,O(h,"CapStyle",b,c,t)];case 3:return E.cap=l.sent(),[4,O(h,"JoinStyle",b,c,u)];case 4:return E.join=l.sent(),[4,O(h,"MiterLimit",b,c,x)];case 5:return z.apply(y,[(E.miterLimit=l.sent(),E.referenceWidth=f,E.zOrder=I(a.name),E.isDashed=!1,E)]),[2]}})})}
function E(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,h,k,m,t,u,x,y,z,E,D;return l(this,function(l){switch(l.label){case 0:return g=p.hashString(""+a.url+JSON.stringify(a.colorSubstitutions)).toString(),h=a.primitiveName,k=n(a.tintColor),m=void 0!==a.width?a.width:4,t=r(a.capStyle),u=w(a.joinStyle),x=a.miterLimit,y=p.hashString(JSON.stringify(a)).toString(),E=(z=d).push,D={type:"line",templateHash:y,materialHash:0===b.length?g:function(a,b,c){return g},cim:a,materialOverrides:null,
isOutline:e,colorLocked:a.colorLocked},[4,O(h,"TintColor",b,c,k,M)];case 1:return D.color=l.sent(),[4,O(h,"Width",b,c,m)];case 2:return D.width=l.sent(),[4,O(h,"CapStyle",b,c,t)];case 3:return D.cap=l.sent(),[4,O(h,"JoinStyle",b,c,u)];case 4:return D.join=l.sent(),[4,O(h,"MiterLimit",b,c,x)];case 5:return E.apply(z,[(D.miterLimit=l.sent(),D.referenceWidth=f,D.zOrder=I(a.name),D.isDashed=!1,D)]),[2]}})})}function F(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,h,k,m,n,t,u,x,y,z;return l(this,
function(l){switch(l.label){case 0:g=a.primitiveName;h=void 0!==a.width?a.width:4;k=r(a.capStyle);m=w(a.joinStyle);n=a.miterLimit;t=p.hashString(JSON.stringify(a)).toString();x=(u=d).push;y={type:"line",templateHash:t};if(0!==b.length)return[3,1];z=t;return[3,3];case 1:return[4,S(t,b,c)];case 2:z=l.sent(),l.label=3;case 3:return y.materialHash=z,y.cim=a,y.materialOverrides=null,y.isOutline=e,y.colorLocked=a.colorLocked,y.color={r:128,g:128,b:128,a:1},[4,O(g,"Width",b,c,h)];case 4:return y.width=l.sent(),
[4,O(g,"CapStyle",b,c,k)];case 5:return y.cap=l.sent(),[4,O(g,"JoinStyle",b,c,m)];case 6:return y.join=l.sent(),[4,O(g,"MiterLimit",b,c,n)];case 7:return x.apply(u,[(y.miterLimit=l.sent(),y.referenceWidth=f,y.zOrder=I(a.name),y.isDashed=!1,y)]),[2]}})})}function H(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,h,k,m,t,r,u,x,y,w,z;return l(this,function(l){switch(l.label){case 0:return g=a.primitiveName,h=a.size,k=a.scaleX,m=a.rotation,t=a.offsetX,r=a.offsetY,u=n(a.tintColor),x=p.hashString(""+
a.url+JSON.stringify(a.colorSubstitutions)).toString(),w=(y=d).push,z={type:"marker",templateHash:p.hashString(JSON.stringify(a)).toString(),materialHash:0===b.length?x:function(a,b,c){return x},cim:a,materialOverrides:null,colorLocked:a.colorLocked,scaleSymbolsProportionally:!1,alignment:e,anchorPoint:a.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==a.anchorPointUnits},[4,O(g,"Size",b,c,h)];case 1:return z.size=l.sent(),[4,O(g,"ScaleX",b,c,k)];case 2:return z.scaleX=l.sent(),[4,O(g,"Rotation",b,
c,m)];case 3:return z.rotation=l.sent(),[4,O(g,"OffsetX",b,c,t)];case 4:return z.offsetX=l.sent(),[4,O(g,"OffsetY",b,c,r)];case 5:return z.offsetY=l.sent(),[4,O(g,"TintColor",b,c,u,M)];case 6:return w.apply(y,[(z.color=l.sent(),z.outlineColor={r:0,g:0,b:0,a:0},z.outlineWidth=0,z.frameHeight=0,z.rotateClockwise=a.rotateClockwise,z.referenceSize=f,z.sizeRatio=1,z)]),[2]}})})}function G(a,b,d,e,f,h,k){return g(this,void 0,void 0,function(){var g,m,n,p,t,r,u,x;return l(this,function(l){switch(l.label){case 0:g=
a.markerGraphics;if(!g)return[2];m=0;a.scaleSymbolsProportionally&&(n=a.frame)&&(m=n.ymax-n.ymin);p=[];t=0;for(r=g;t<r.length;t++)if(u=r[t])if(x=u.symbol)switch(x.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":p.push(K(a,u,b,e,f,h,k,m));break;case "CIMTextSymbol":p.push(J(a,u,b,d,e,f,h,k,m))}return[4,c.all(p)];case 1:return l.sent(),[2]}})})}function J(a,b,c,d,e,f,h,k,r){return g(this,void 0,void 0,function(){var g,u,x,w,z,E,D,B,C,A,F,I,M,H,G,J,K,Q,T,S,U,R;return l(this,
function(l){switch(l.label){case 0:g=[];m.OverrideHelper.findApplicableOverrides(b,c,g);u=b.geometry;if(void 0===u.x||void 0===u.y)return[2];x=b.symbol;x.font={family:x.fontFamilyName};w=a.frame;z=u.x-.5*(w.xmin+w.xmax);E=u.y-.5*(w.ymin+w.ymax);D=a.size/r;B=a.primitiveName;C=(x.height||0)*D;A=x.angle||0;F=((x.offsetX||0)+z)*D;I=((x.offsetY||0)+E)*D;M=n(m.CIMSymbolHelper.getFillColor(x));H=n(m.CIMSymbolHelper.getStrokeColor(x));G=m.CIMSymbolHelper.getStrokeWidth(x);G||(H=n(m.CIMSymbolHelper.getFillColor(x.haloSymbol)),
G=x.haloSize*D);J="";K=0;for(Q=c;K<Q.length;K++)T=Q[K],T.primitiveName===B&&void 0!==T.value&&(J+="|"+T.primitiveName+"|"+T.propertyName+"|"+JSON.stringify(T.value));U=(S=f).push;R={type:"text",templateHash:p.hashString(JSON.stringify(b)+J).toString(),materialHash:function(a,b,c){return x.fontFamilyName},cim:x,materialOverrides:null,colorLocked:a.colorLocked,alignment:h,anchorPoint:{x:a.anchorPoint?a.anchorPoint.x:0,y:a.anchorPoint?a.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==a.anchorPointUnits,
fontName:x.fontFamilyName,decoration:"none"};return[4,O(B,"Height",c,e,C)];case 1:return R.size=l.sent(),[4,O(B,"Rotation",c,e,A)];case 2:return R.angle=l.sent(),[4,O(B,"OffsetX",c,e,F)];case 3:return R.offsetX=l.sent(),[4,O(B,"OffsetY",c,e,I)];case 4:return U.apply(S,[(R.offsetY=l.sent(),R.horizontalAlignment=t(x.horizontalAlignment),R.verticalAlignment=y(x.verticalAlignment),R.text=P(d,e,b.textString,x.textCase),R.color=M,R.outlineColor=H,R.outlineSize=G,R.referenceSize=k,R.sizeRatio=1,R)]),[2]}})})}
function K(a,b,c,d,e,h,k,t){return g(this,void 0,void 0,function(){var g,r,u,x,y,w;return l(this,function(z){switch(z.label){case 0:g=b.symbol;r=b.geometry;if(!r)return[2];u=f.getExtent(r);x=g.symbolLayers;if(!x)return[2];y=x.length;w=function(){var g,w,z,E,D,B,C,A,F,I,H,G,J,K,Q,P,q,ca,T,ta,qa,da,U,R,ra,pa,W,X,Z,V,ba,fa,ea,Sa,Ja,mb,nb,la,ab;return l(this,function(l){switch(l.label){case 0:g=x[y];if(!g||!1===g.enable)return[2,"continue"];w=g.type;switch(w){case "CIMSolidFill":return[3,1];case "CIMSolidStroke":return[3,
1]}return[3,13];case 1:z=f.getSDFMetrics(u,a.frame,a.size,a.anchorPoint,"Relative"!==a.anchorPointUnits);E=z[0];D=z[1];B=z[2];C="CIMSolidFill"===g.type;A={type:"sdf",geom:r,asFill:C};F=a.primitiveName;I=a.size;H=a.rotation;G=a.offsetX;J=a.offsetY;K=g.primitiveName;Q=C?n(m.CIMSymbolHelper.getFillColor(g)):n(m.CIMSymbolHelper.getStrokeColor(g));P=C?{r:0,g:0,b:0,a:0}:n(m.CIMSymbolHelper.getStrokeColor(g));q=m.CIMSymbolHelper.getStrokeWidth(g);if(!C&&!q)return[3,20];ca=!1;T="";ta=0;for(qa=c;ta<qa.length;ta++)if(da=
qa[ta],da.primitiveName===K||da.primitiveName===F)void 0!==da.value?T+="|"+da.primitiveName+"|"+da.propertyName+"|"+JSON.stringify(da.value):da.valueExpressionInfo&&(ca=!0);U=p.hashString(JSON.stringify(A)).toString();R=p.hashString(JSON.stringify(g)+JSON.stringify(b)+T).toString();pa=(ra=e).push;W={type:"marker",templateHash:R,materialHash:ca?function(a,b,c){return U}:U,cim:A,materialOverrides:null,colorLocked:a.colorLocked,scaleSymbolsProportionally:a.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:D,
y:B},isAbsoluteAnchorPoint:!1};return[4,O(F,"Size",c,d,I)];case 2:return W.size=l.sent(),W.scaleX=1,[4,O(F,"Rotation",c,d,H)];case 3:return W.rotation=l.sent(),[4,O(F,"OffsetX",c,d,G)];case 4:return W.offsetX=l.sent(),[4,O(F,"OffsetY",c,d,J)];case 5:return W.offsetY=l.sent(),[4,O(K,"Color",c,d,Q,M)];case 6:W.color=l.sent();if(!C)return[3,7];X={r:0,g:0,b:0,a:0};return[3,9];case 7:return[4,O(K,"Color",c,d,P,M)];case 8:X=l.sent(),l.label=9;case 9:W.outlineColor=X;if(!C)return[3,10];Z=0;return[3,12];
case 10:return[4,O(K,"Width",c,d,q)];case 11:Z=l.sent(),l.label=12;case 12:return pa.apply(ra,[(W.outlineWidth=Z,W.frameHeight=t,W.rotateClockwise=a.rotateClockwise,W.referenceSize=k,W.sizeRatio=E,W)]),[3,20];case 13:V={type:a.type,enable:!0,name:a.name,colorLocked:a.colorLocked,primitiveName:a.primitiveName,anchorPoint:a.anchorPoint,anchorPointUnits:a.anchorPointUnits,offsetX:a.offsetX,offsetY:a.offsetY,rotateClockwise:a.rotateClockwise,rotation:a.rotation,size:a.size,billboardMode3D:a.billboardMode3D,
depth3D:a.depth3D,frame:a.frame,markerGraphics:[b],scaleSymbolsProportionally:a.scaleSymbolsProportionally,respectFrame:a.respectFrame,clippingPath:a.clippingPath};ba=[];fa=["Color","Size","Rotation","OffsetX","OffsetY"];ba=c.filter(function(b){return b.primitiveName!==a.primitiveName&&-1===fa.indexOf(b.propertyName)});ea=m.CIMSymbolHelper.getTextureAnchor(V);D=ea[0];B=ea[1];Sa=JSON.stringify(V);Ja=a.primitiveName;H=a.rotation;G=a.offsetX;J=a.offsetY;R=p.hashString(JSON.stringify(V)).toString();nb=
(mb=e).push;la={type:"marker",templateHash:R};if(0!==ba.length)return[3,14];ab=R;return[3,16];case 14:return[4,S(Sa,ba,d)];case 15:ab=l.sent(),l.label=16;case 16:return la.materialHash=ab,la.cim=V,la.materialOverrides=ba,la.colorLocked=a.colorLocked,la.scaleSymbolsProportionally=a.scaleSymbolsProportionally,la.alignment=h,la.anchorPoint={x:D,y:B},la.isAbsoluteAnchorPoint=!1,la.size=a.size,la.scaleX=1,[4,O(Ja,"Rotation",c,d,H)];case 17:return la.rotation=l.sent(),[4,O(Ja,"OffsetX",c,d,G)];case 18:return la.offsetX=
l.sent(),[4,O(Ja,"OffsetY",c,d,J)];case 19:return nb.apply(mb,[(la.offsetY=l.sent(),la.color={r:0,g:0,b:0,a:0},la.outlineColor={r:0,g:0,b:0,a:0},la.outlineWidth=0,la.frameHeight=t,la.rotateClockwise=a.rotateClockwise,la.referenceSize=k,la.sizeRatio=1,la)]),[3,20];case 20:return[2]}})};z.label=1;case 1:return y--?[5,w()]:[3,3];case 2:return z.sent(),[3,1];case 3:return[2]}})})}function I(a){return a&&0===a.indexOf("Level_")?parseInt(a.substr(6),10):0}function M(a){if(!a||0===a.length)return null;a=
(new k(a)).toRgba();return{r:a[0],g:a[1],b:a[2],a:a[3]}}function O(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,k,m,n,p;return l(this,function(t){switch(t.label){case 0:if(!a)return[3,4];g=function(c){var g,k,m;return l(this,function(l){switch(l.label){case 0:if(c.primitiveName!==a||c.propertyName!==b)return[3,2];if(void 0!==c.value)return[2,{value:c.value}];g=c.valueExpressionInfo;if(!g)return[3,2];k=g.expression;return[4,h.createRendererExpression(k,d.spatialReference,d.fields)];case 1:return m=
l.sent(),[2,{value:function(a,b,c){a=u.callWithFeature(m,a,{$view:c},d.geometryType,b);null!==a&&f&&(a=f(a));return null!==a?a:e}}];case 2:return[2]}})};k=0;m=c;t.label=1;case 1:if(!(k<m.length))return[3,4];n=m[k];return[5,g(n)];case 2:p=t.sent();if("object"===typeof p)return[2,p.value];t.label=3;case 3:return k++,[3,1];case 4:return[2,e]}})})}function Q(a,b){switch(b){case "LowerCase":return a.toLowerCase();case "Allcaps":return a.toUpperCase();default:return a}}function P(a,b,c,d){if(!a||-1===c.indexOf("["))return Q(c,
d);b=function(a){for(var b=a.length;b--;)if(-1===" /-,\n".indexOf(a.charAt(b)))return!1;return!0};var e=[],f=0,g=-1;do g=c.indexOf("[",f),g>=f&&(g>f&&(f=c.substr(f,g-f),e.push([f,null,b(f)])),f=g+1,g=c.indexOf("]",f),g>=f&&(g>f&&(f=c.substr(f,g-f),(f=a[f])&&e.push([null,f,!1])),f=g+1));while(-1!==g);f<c.length-1&&(f=c.substr(f),e.push([f,null,b(f)]));return function(a,b,c){b="";c=null;for(var f=0;f<e.length;f++){var g=e[f],h=g[0],k=g[1],g=g[2];if(h)g?c=h:(c&&(b+=c,c=null),b+=h);else if(h=a.attributes[k])c&&
(b+=c,c=null),b+=h}return Q(b,d)}}function S(a,b,c){return g(this,void 0,void 0,function(){var d,e,f,g;return l(this,function(k){switch(k.label){case 0:d=function(a){var b,d,e;return l(this,function(f){switch(f.label){case 0:b=a.valueExpressionInfo;if(!b)return[3,2];d=b.expression;return[4,h.createRendererExpression(d,c.spatialReference,c.fields)];case 1:e=f.sent(),a.fn=function(a,b,d){return u.callWithFeature(e,a,{$view:d},c.geometryType,b)},f.label=2;case 2:return[2]}})},e=0,f=b,k.label=1;case 1:if(!(e<
f.length))return[3,4];g=f[e];return[5,d(g)];case 2:k.sent(),k.label=3;case 3:return e++,[3,1];case 4:return[2,function(c,d,e){for(var f=0;f<b.length;f++){var g=b[f];g.value=g.fn?g.fn(c,d,e):void 0}return p.hashString(a+m.OverrideHelper.buildOverrideKey(b)).toString()}]}})})}Object.defineProperty(a,"__esModule",{value:!0});var U=e.getLogger("esri.symbols.cim.cimAnalyzer");a.analyzeCIMSymbol=function(a,b,c,d){return g(this,void 0,void 0,function(){var e,f,g,h;return l(this,function(k){switch(k.label){case 0:e=
d?d:[];if(!a)return[2,e];"CIMSymbolReference"===a.type?(f=a.symbol,g=a.primitiveOverrides):(f=a,g=null);h=f.type;switch(h){case "CIMPointSymbol":return[3,1];case "CIMLineSymbol":return[3,1];case "CIMPolygonSymbol":return[3,1];case "CIMTextSymbol":return[3,3]}return[3,4];case 1:return[4,x(f,g,b,c,e)];case 2:return k.sent(),[3,4];case 3:return[3,4];case 4:return[2,e]}})})};a.analyzeCIMResource=function(a,b,c){if(!c||0===c.length)return b;a=JSON.parse(JSON.stringify(b));m.OverrideHelper.applyOverrides(a,
c);return a}})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateValueOrFunction=function(a,d,k,e){return"function"===typeof a?a(d,k,e):a};a.hashString=function(a){for(var d=0,k=0;k<a.length;k++)d=(d<<5)-d+a.charCodeAt(k),d|=0;return d}})},"esri/symbols/support/defaults":function(){define("require exports ../../core/compilerUtils ../../core/maybe ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),
function(d,a,l,g,k,e,c,h,m){Object.defineProperty(a,"__esModule",{value:!0});a.defaultPointSymbol2D=c.fromJSON(m.defaultPointSymbolJSON);a.defaultPolylineSymbol2D=e.fromJSON(m.defaultPolylineSymbolJSON);a.defaultPolygonSymbol2D=k.fromJSON(m.defaultPolygonSymbolJSON);a.defaultTextSymbol2D=h.fromJSON(m.defaultTextSymbolJSON);a.getDefaultSymbol2D=function(b){if(g.isNone(b))return null;switch(b.type){case "mesh":break;case "point":case "multipoint":return a.defaultPointSymbol2D;case "polyline":return a.defaultPolylineSymbol2D;
case "polygon":case "extent":return a.defaultPolygonSymbol2D;default:l.neverReached(b)}return null};a.errorPointSymbol2D=c.fromJSON(m.errorPointSymbolJSON);a.errorPolylineSymbol2D=e.fromJSON(m.errorPolylineSymbolJSON);a.errorPolygonSymbol2D=k.fromJSON(m.errorPolygonSymbolJSON)})},"esri/symbols/support/defaultsJSON":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.defaultColor=[252,146,31,255];a.defaultOutlineColor=[153,153,153,255];a.defaultPointSymbolJSON=
{type:"esriSMS",style:"esriSMSCircle",size:6,color:a.defaultColor,outline:{width:.75,color:[153,153,153,255]}};a.defaultPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",width:.75,color:a.defaultColor};a.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}};a.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,
0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};a.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};a.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};a.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../../../../../symbols/cim/enums ../../color ../../number ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function b(b,c){var d=a.call(this,c)||this;d._cimLineLayer=c;var f=0;m.isFunction(c.width)||(f=.5*g.pt2px(c.width));d._dynamicPropertyMap.set("_halfWidth",function(a,b,d){return m.isFunction(c.width)?.5*g.pt2px(c.width(a,b,d)):f});var l=k.CapType.ROUND;m.isFunction(c.cap)||(l=c.cap);d._dynamicPropertyMap.set("_capType",function(a,b,d){return m.isFunction(c.cap)?c.cap(a,b,d):l});var n;m.isFunction(c.join)||
(n=c.join);d._dynamicPropertyMap.set("_joinType",function(a,b,d){return m.isFunction(c.join)?c.join(a,b,d):n});var p;if(!m.isFunction(c.color)){var r=c.color;p=r&&e.premultiplyAlphaRGBA(r)||0}d._dynamicPropertyMap.set("_fillColor",function(a,b,d){return m.isFunction(c.color)?(a=c.color(a,b,d))&&e.premultiplyAlphaRGBA(a)||0:p});var u;m.isFunction(c.miterLimit)||(u=m.getLimitCosine(c.miterLimit));d._dynamicPropertyMap.set("_miterLimitCosine",function(a,b,d){return m.isFunction(c.miterLimit)?m.getLimitCosine(c.miterLimit(a,
b,d)):u});d._isDashed=c.isDashed;d._bitset=c.colorLocked?1:0;d._materialKey=h.createMaterialKey(d.geometryType,b,c.isOutline);d._initializeTessellator(!0);return d}l(b,a);b.fromCIMLine=function(a,c){return new b(a,c)};b.prototype.bindFeature=function(a,b,d){var e=this,f=this._dynamicPropertyMap;f&&f.forEach(function(c,f){e[f]=c(a,b,d)});var f=this._materialCache,g=this._cimLineLayer.materialHash,g=g(a,b,d),g=f.get(g),f=null;g&&p.ok(g.spriteMosaicItem)&&(f=g.spriteMosaicItem);if(f){this._hasPattern=
!0;var g=f.rect,k=g.x+1+f.width,l=g.y+1+f.height;this._tl=c.i1616to32(g.x+1,g.y+1);this._br=c.i1616to32(k,l)}else this._hasPattern=!1,this._br=this._tl=0;this._halfReferenceWidth=this._halfWidth;g=h.LineMaterialKey.load(this._materialKey);f&&(g.sdf=f.sdf,g.pattern=!0,g.textureBinding=f.textureBinding);this._materialKey=g.data};return b}(b.default(f.default));a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/cim/cimAnalyzer ./WGLMeshTemplate".split(" "),
function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});var h=g.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");d=function(a){function b(b){var c=a.call(this)||this;c._materialCache=new Map;c._dynamicPropertyMap=new Map;c._cimLayer=b;return c}l(b,a);b.prototype.analyze=function(a,b,c,d){var f=this._materialCache,g=this._cimLayer.materialHash;if(!g)return h.error("A Dynamic mesh template must have a material hash function!"),k.reject(null);var l=g(b,c,d);if(f.has(l))return a=
f.get(l),k.resolve(a);b=e.analyzeCIMResource(b,this._cimLayer.cim,this._cimLayer.materialOverrides);b.mosaicHash=l;return a.getCIMMosaicItem(b).then(function(a){f.set(l,a);return a})};return b}(c.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../../../../../symbols/cim/enums ../../color ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y){Object.defineProperty(a,"__esModule",{value:!0});var x=3.14159265359/180,A=b.vec2f32.create(),z=h.mat2df32.create(),C=k.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");d=function(a){function d(b,c){var d=a.call(this,c)||this;d._cimMarkerLayer=c;var g=0;r.isFunction(c.color)||(g=p.premultiplyAlphaRGBA(c.color));d._dynamicPropertyMap.set("_fillColor",function(a,b,d){return r.isFunction(c.color)?p.premultiplyAlphaRGBA(c.color(a,b,d)):g});
var h=0;r.isFunction(c.outlineColor)||(h=p.premultiplyAlphaRGBA(c.outlineColor));d._dynamicPropertyMap.set("_outlineColor",function(a,b,d){return r.isFunction(c.outlineColor)?p.premultiplyAlphaRGBA(c.outlineColor(a,b,d)):h});var k;r.isFunction(c.size)||(k=e.pt2px(c.size));d._dynamicPropertyMap.set("_size",function(a,b,d){return r.isFunction(c.size)?e.pt2px(c.size(a,b,d)):k});var l;r.isFunction(c.scaleX)||(l=c.scaleX);d._dynamicPropertyMap.set("_scaleX",function(a,b,d){return r.isFunction(c.scaleX)?
c.scaleX(a,b,d):l});var m;r.isFunction(c.offsetX)||(m=e.pt2px(c.offsetX));d._dynamicPropertyMap.set("xOffset",function(a,b,d){return r.isFunction(c.offsetX)?e.pt2px(c.offsetX(a,b,d)):m});var t;r.isFunction(c.offsetY)||(t=e.pt2px(c.offsetY));d._dynamicPropertyMap.set("yOffset",function(a,b,d){return r.isFunction(c.offsetY)?e.pt2px(c.offsetY(a,b,d)):t});var u;r.isFunction(c.outlineWidth)||(u=e.pt2px(c.outlineWidth));d._dynamicPropertyMap.set("_outlineWidth",function(a,b,d){return r.isFunction(c.outlineWidth)?
e.pt2px(c.outlineWidth(a,b,d)):u});var x;r.isFunction(c.rotation)||(x=c.rotation);d._dynamicPropertyMap.set("_angle",function(a,b,d){return r.isFunction(c.rotation)?c.rotation(a,b,d):x});d._bitSet=(c.alignment===f.Alignment.MAP?1:0)|(c.colorLocked?1:0)<<1|(c.scaleSymbolsProportionally?1:0)<<3;d._materialKey=n.createMaterialKey(d.geometryType,b,!1);return d}l(d,a);d.fromCIMMarker=function(a,b){return new d(a,b)};d.prototype.bindFeature=function(a,d,f){var h=this,k=this._dynamicPropertyMap;k&&k.forEach(function(b,
c){h[c]=b(a,d,f)});k=this._cimMarkerLayer.materialHash;k=k(a,d,f);if((k=this._materialCache.get(k))&&y.ok(k.spriteMosaicItem)&&k.spriteMosaicItem){var k=k.spriteMosaicItem,l=this._cimMarkerLayer.sizeRatio,p=k.width/k.height*this._scaleX,t=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,r=this._size,w=r*p,E=this.xOffset,D=this.yOffset,B=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/e.pt2px(this._cimMarkerLayer.frameHeight):1,F=this._outlineWidth*
B,H=e.pt2px(this._cimMarkerLayer.referenceSize),W=0,B=0,X=this._cimMarkerLayer.anchorPoint;X&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(W=-X.x/(this._size*p),B=X.y/this._size):(W=X.x,B=X.y));this._sizeOutlineWidth=u.i8888to32(Math.round(Math.sqrt(256*w)),Math.round(Math.sqrt(256*r)),Math.round(Math.sqrt(256*F)),Math.round(Math.sqrt(256*H)));c.mat2d.identity(z);c.mat2d.translate(z,z,b.vec2f32.fromValues(E,-D));t&&c.mat2d.rotate(z,z,x*t);p=k.rect.x/4;t=k.rect.y/4;E=p+k.rect.width/4;D=
t+k.rect.height/4;W=.5-((.5+W)*k.width+1)/k.rect.width;B=.5-((.5+B)*k.height+1)/k.rect.height;F=Math.round(64*l);w*=k.rect.width/k.width*l;r*=k.rect.height/k.height*l;l=(W-.5)*w;B=(B-.5)*r;m.vec2.set(A,l,B);m.vec2.transformMat2d(A,A,z);this._offsetUpperLeft=u.i1616to32(16*A[0],16*A[1]);this._texUpperLeft=u.i8888to32(p,t,this._bitSet,F);m.vec2.set(A,l+w,B);m.vec2.transformMat2d(A,A,z);this._offsetUpperRight=u.i1616to32(16*A[0],16*A[1]);this._texUpperRight=u.i8888to32(E,t,this._bitSet,F);m.vec2.set(A,
l,B+r);m.vec2.transformMat2d(A,A,z);this._offsetBottomLeft=u.i1616to32(16*A[0],16*A[1]);this._texBottomLeft=u.i8888to32(p,D,this._bitSet,F);m.vec2.set(A,l+w,B+r);m.vec2.transformMat2d(A,A,z);this._offsetBottomRight=u.i1616to32(16*A[0],16*A[1]);this._texBottomRight=u.i8888to32(E,D,this._bitSet,F);r=n.MarkerMaterialKey.load(this._materialKey);r.sdf=k.sdf;r.pattern=!0;r.textureBinding=k.textureBinding;this._materialKey=r.data}else C.error(new g("mapview-cim","Encountered an error when binding feature"))};
return d}(w.default(t.default));a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../fontUtils ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../util/BidiText".split(" "),function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});var u=new Set;d=function(a){function b(b,
d){var f=a.call(this,d)||this;f._horizontalAlignment="center";f._verticalAlignment="middle";f._glyphs=[];f._cimTextLayer=d;var k=f._bitset=0;m.isFunction(d.color)||(k=e.premultiplyAlphaRGBA(d.color));f._dynamicPropertyMap.set("_color",function(a,b,c){return m.isFunction(d.color)?e.premultiplyAlphaRGBA(d.color(a,b,c)):k});var l=0;m.isFunction(d.color)||(l=e.premultiplyAlphaRGBA(d.outlineColor));f._dynamicPropertyMap.set("_haloColor",function(a,b,c){return m.isFunction(d.outlineColor)?e.premultiplyAlphaRGBA(d.outlineColor(a,
b,c)):l});var n;m.isFunction(d.size)||(n=Math.min(Math.round(g.pt2px(d.size*d.sizeRatio)),127));f._dynamicPropertyMap.set("_size",function(a,b,c){return m.isFunction(d.size)?Math.min(Math.round(g.pt2px(d.size(a,b,c)*d.sizeRatio)),127):n});var p;m.isFunction(d.outlineSize)||(p=Math.min(Math.floor(5*g.pt2px(d.outlineSize*d.sizeRatio)),127));f._dynamicPropertyMap.set("_haloSize",function(a,b,c){return m.isFunction(d.outlineSize)?Math.min(Math.floor(5*g.pt2px(d.outlineSize(a,b,c)*d.sizeRatio)),127):p});
var t;m.isFunction(d.offsetX)||(t=Math.round(g.pt2px(d.offsetX*d.sizeRatio)));f._dynamicPropertyMap.set("_xOffset",function(a,b,c){return m.isFunction(d.offsetX)?Math.round(g.pt2px(d.offsetX(a,b,c)*d.sizeRatio)):t});var r;m.isFunction(d.offsetY)||(r=Math.round(g.pt2px(d.offsetY*d.sizeRatio)));f._dynamicPropertyMap.set("_yOffset",function(a,b,c){return m.isFunction(d.offsetY)?Math.round(g.pt2px(d.offsetY(a,b,c)*d.sizeRatio)):r});var u;m.isFunction(d.decoration)||(u=c.getFontDecorationTop(d.decoration));
f._dynamicPropertyMap.set("_decorationTop",function(a,b,e){return m.isFunction(d.decoration)?c.getFontDecorationTop(d.decoration(a,b,e)):u});var w;m.isFunction(d.angle)||(w=d.angle);f._dynamicPropertyMap.set("_angle",function(a,b,c){return m.isFunction(d.angle)?d.angle(a,b,c):w});var H;m.isFunction(d.horizontalAlignment)||(H=d.horizontalAlignment);f._dynamicPropertyMap.set("_horizontalAlignment",function(a,b,c){return m.isFunction(d.horizontalAlignment)?d.horizontalAlignment(a,b,c):H});var G;m.isFunction(d.verticalAlignment)||
(G=d.verticalAlignment);f._dynamicPropertyMap.set("_verticalAlignment",function(a,b,c){return m.isFunction(d.verticalAlignment)?d.verticalAlignment(a,b,c):G});var J;m.isFunction(d.text)||(J=d.text);f._dynamicPropertyMap.set("_text",function(a,b,c){return m.isFunction(d.text)?d.text(a,b,c):J});f._materialKey=h.createMaterialKey(f.geometryType,b,!1);b=h.TextMaterialKey.load(f._materialKey);b.sdf=!0;f._materialKey=b.data;return f}l(b,a);b.fromCIMText=function(a,c){return new b(a,c)};b.prototype.analyze=
function(a,b,c,d){var e=this._cimTextLayer;b="string"===typeof e.text?e.text:"function"===typeof e.text?e.text(b,c,d):"";var f=this._glyphs;u.clear();for(c=0;c<b.length;c++)u.add(b.charCodeAt(c));var g=[];u.forEach(function(a){if(f.length<a||void 0===f[a])g[a]=a});return a.getCIMMosaicItem(e.cim,g).then(function(a){if(a.glyphMosaicItems&&0<a.glyphMosaicItems.length)for(var b=a.glyphMosaicItems,c=0;c<b.length;c++)void 0!==b[c]&&(f[c]=b[c]);return a})};b.prototype.bindFeature=function(a,b,c){var d=
this,e=this._dynamicPropertyMap;e&&e.forEach(function(e,f){d[f]=e(a,b,c)});if(this._text&&0!==this._text.length){this._scale=this._size/24;this._justify=k.getJustification(this._horizontalAlignment||"center");this._xAlignD=k.getXAnchorDirection(this._horizontalAlignment||"center");this._yAlignD=-k.getYAnchorDirection(this._verticalAlignment||"baseline");this._baseline="baseline"===(this._verticalAlignment||"baseline");for(var e=this._glyphs,f=p.bidiText(this._text),g=f[0],f=f[1],h=[],l=0;l<g.length;l++)h[g.charCodeAt(l)]=
e[g.charCodeAt(l)];this.bindTextInfo(h,g,f);this._computeGlyphs(this._shapedGlyphs,this._shapedBox)}else this._shapedBox=this._shapedGlyphs=this._computedGlyphs=null};return b}(b.default(f.default));a.default=d})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../../materialKey/MaterialKey ../Tesselator ./WGLMeshTemplate".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r){Object.defineProperty(a,"__esModule",{value:!0});var w=g.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),t=[],y=[];d=function(a){function d(b,c,d,e,g,k,l,p,t){var r=a.call(this)||this;r.fillColor=d;r.tl=e;r.br=g;r.aux1=k;r.aux2=l;r.aux3=p;r.isBFS=t;r.geometryType=m.WGLGeometryType.FILL;r.forceLibtess=!1;b=u.FillMaterialKey.load(u.createMaterialKey(r.geometryType,b,!1));c&&(b.sdf=c.sdf,b.pattern=!0,b.textureBinding=c.textureBinding);r._materialKey=
b.data;r._tesselator=new n.default;r._tileClipper=new f.TileClipper(0,0,0,1,8);r._tileClipper.setExtent(h.TILE_SIZE);return r}l(d,a);d.fromCIMFill=function(a,e,f,g){void 0===g&&(g=!1);var h=e.color,h=h&&c.premultiplyAlphaRGBA(h)||0,l=b.i8888to32(0,0,0,e.colorLocked?1:0);if(!f)return new d(a,null,h,0,0,0,0,l,g);var l=f.rect,m=f.width,n=f.height,p=l.x+1,t=l.y+1,r=p+m,u=t+n,l=b.nextHighestPowerOfTwo(k.pt2px(e.height||0));255<l?l=255:0>=l&&(l=b.nextHighestPowerOfTwo(u-t));m=b.nextHighestPowerOfTwo(k.pt2px(e.height/
n*m||0));255<m?m=255:0>=m&&(m=b.nextHighestPowerOfTwo(r-p));n=k.pt2px(e.offsetX||0)+128;255<n&&(n=255);var x=k.pt2px(-e.offsetY||0)+128;255<x&&(x=255);e=e.scaleX||1;p=b.i1616to32(p,t);r=b.i1616to32(r,u);l=b.i8888to32(m,l,n,x);e=b.i1616to32(128*e,128);return new d(a,f,h,p,r,l,e,0,g)};d.fromSimpleFill=function(a,e,f,g){void 0===g&&(g=!1);var h=e.color;e=h&&"none"!==e.style&&c.premultiplyAlphaRGBA(h)||0;h=b.i8888to32(0,0,0,g?255:0);if(!f)return new d(a,null,e,0,0,0,0,h,g);var k=f.rect,l=k.x+1,m=k.y+
1,n=k.x+1+f.width,p=k.y+1+f.height,k=b.i1616to32(l,m),t=b.i1616to32(n,p),l=b.i8888to32(b.nextHighestPowerOfTwo(n-l),b.nextHighestPowerOfTwo(p-m),0,0),m=b.i1616to32(128,128);return new d(a,f,e,k,t,l,m,h,g)};d.fromPictureFill=function(a,c,e,f){void 0===f&&(f=!1);var g=h.PICTURE_FILL_COLOR,l=e.rect,m=l.x+1,n=l.y+1,l=m+e.width,p=n+e.height,m=b.i1616to32(m,n),l=b.i1616to32(l,p),p=b.nextHighestPowerOfTwo(k.pt2px(c.width));255<p&&(p=255);n=b.nextHighestPowerOfTwo(k.pt2px(c.height));255<n&&(n=255);var t=
k.pt2px(c.xoffset)+128;255<t&&(t=255);var r=k.pt2px(-c.yoffset)+128;255<r&&(r=255);p=b.i8888to32(p,n,t,r);c=b.i1616to32(128*c.xscale,128*c.yscale);n=b.i8888to32(0,0,0,f?255:0);return new d(a,e,g,m,l,p,c,n,f)};d.prototype.writeMesh=function(a,b,c,d,e){t.length=0;if("esriGeometryPolygon"!==c)w.error("Unable to handle geometryType: "+c);else{var f=e.geometry;c=u.FillMaterialKey.load(this._materialKey);var g=(e=this._isClippingRequired(f))?this._clip(f,!1):f.rings;if(c.dotDensity){for(var f=f.rings,h=
0,k=0;k<f.length;k++)for(var l=f[k],m=l[0],n=m[0],m=m[1],p=1;p<l.length;p++)var r=l[p],x=n+r[0],r=m+r[1],h=h-(x-n)*(r+m)/2,n=x,m=r;f=h}else f=0;this.forceLibtess?this._writeMeshLibtess(a,b,d,g,e,c,f):this._writeMeshEarcut(a,b,d,g,e,c,f)||this._writeMeshLibtess(a,b,d,g,e,c,f)}};d.prototype._isClippingRequired=function(a){var b=h.TILE_SIZE+8,c=0;for(a=a.rings;c<a.length;c++){var d=a[c],e=d.length;if(!(3>e)){var f=d[0][0],g=d[0][1];if(-8>f||f>b||-8>g||g>b)return!0;for(var k=1;k<e;++k)if(f+=d[k][0],g+=
d[k][1],-8>f||f>b||-8>g||g>b)return!0}}return!1};d.prototype._clip=function(a,b){var c;this._tileClipper.reset(3);for(var d=0,e=a.rings;d<e.length;d++){var f=e[d],g=f.length;if(!(3>g)){a=f[0][0];c=f[0][1];this._tileClipper.moveTo(a,c);for(var h=1;h<g;++h)a+=f[h][0],c+=f[h][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};d.prototype._writeMeshLibtess=function(a,b,c,d,e,f,g){if(d&&d.length){var h=[],k=b.indexVector;b=b.getVector("geometry");var l=new p(c,
this.geometryType,this._materialKey),m=b.vertexCount;l.vertexFrom=m;l.indexFrom=k.length;this._tesselator.beginPolygon(t,h);for(var n=0;n<d.length;n++){var r=d[n];if(!(3>r.length)){this._tesselator.beginContour();var u=void 0,x=void 0;e?(u=r[0].x,x=r[0].y):(u=r[0][0],x=r[0][1]);var y=[u,x,0];this._tesselator.addVertex(y,y);for(y=1;y<r.length-1;y++){var w=void 0,z=void 0;e?(u=r[y].x,x=r[y].y):(w=r[y][0],z=r[y][1],u+=w,x+=z);w=[u,x,0];this._tesselator.addVertex(w,w)}this._tesselator.endContour()}}this._tesselator.endPolygon();
this._writeVerticesLibTess(l,b,c,t,f,g);this._writeIndicesLibTess(l,k,m,h);0<l.indexCount&&a.push(l)}};d.prototype._writeMeshEarcut=function(a,b,c,d,e,f,g){if(d&&d.length){var h=b.indexVector;b=b.getVector("geometry");var k=new p(c,this.geometryType,this._materialKey),l=h.length,m=b.data.length;k.vertexFrom=b.vertexCount;k.indexFrom=h.length;for(var n=0,r=0,u=0;u<d.length;u++){var x=d[u],w=r,z=void 0,E=void 0;e?(z=x[0].x,E=x[0].y):(z=x[0][0],E=x[0][1]);t[r++]=z;t[r++]=E;for(var D=0,B=1;B<x.length;++B){var A=
void 0,C=void 0;e?(A=z,C=E,z=x[B].x,E=x[B].y,A=z-A,C=E-C):(A=x[B][0],C=x[B][1],z+=A,E+=C);D-=A*(E+E-C);t[r++]=z;t[r++]=E}if(0<D){if(0<w-n){if(!this._write(k,h,b,c,t,y,n,w,f,g))return h.seek(l),b.data.seek(m),t.length=y.length=0,!1;n=w}y.length=0}else 0>D?0<w-n?y.push(.5*(w-n)):r=w:r=w}if(0<r-n&&!this._write(k,h,b,c,t,y,n,r,f,g))return h.seek(l),b.data.seek(m),t.length=y.length=0,!1;t.length=y.length=0;a.push(k);return!0}};d.prototype._write=function(a,b,c,d,f,g,h,k,l,m){f=f.slice(h,k);h=e(f,g,2);
if(e.deviation(f,g,2,h))return!1;if(h.length)return g=c.vertexCount,this._writeVertices(a,c,d,f,l,m),this._writeIndices(a,b,g,h),!0};d.prototype._writeVertices=function(a,c,d,e,f,g){for(var h=0;h<e.length;h+=2){var k=b.i1616to32(e[h],e[h+1]);c.data.push(k);c.data.push(d);f.dotDensity?c.data.writeF32(1/g):(c.data.push(this.fillColor),c.data.push(this.tl),c.data.push(this.br),c.data.push(this.aux1),c.data.push(this.aux2),c.data.push(this.aux3));a.vertexCount++}};d.prototype._writeIndices=function(a,
b,c,d){for(var e=0;e<d.length;e+=3)b.push(c+d[e]),b.push(c+d[e+1]),b.push(c+d[e+2]),a.indexCount+=3};d.prototype._writeVerticesLibTess=function(a,c,d,e,f,g){for(var h=0;h<e.length;h+=2){var k=b.i1616to32(e[h],e[h+1]);c.data.push(k);c.data.push(d);f.dotDensity?c.data.writeF32(1/g):(c.data.push(this.fillColor),c.data.push(this.tl),c.data.push(this.br),c.data.push(this.aux1),c.data.push(this.aux2),c.data.push(this.aux3));a.vertexCount++}};d.prototype._writeIndicesLibTess=function(a,b,c,d){for(var e=
0;e<d.length;e++)b.push(c+d[e]),a.indexCount++};return d}(r.default);a.default=d})},"esri/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});var k=l.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");d=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new g.GluTesselator;
this.glu.gluTessCallback(g.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(g.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));
this.glu.gluTessProperty(g.gluEnum.GLU_TESS_WINDING_RULE,g.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,d){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=d};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};
a.prototype.addVertex=function(a,d){this.glu.gluTessVertex(a,d)};a.prototype._vertexCallback=function(a,d){d[d.length]=a[0];d[d.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){k.error("Encountered error during tesselation: "+a)};a.prototype._combinecallback=function(a,d,e){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=d})},"esri/core/libs/libtess/libtess":function(){define([],function(){var d={DEBUG:!1,assert:function(a,l){if(d.DEBUG&&!a)throw Error("Assertion failed"+
(l?": "+l:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,
GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,
GLU_INVALID_VALUE:100901},geom:{}};d.geom.vertEq=function(a,d){return a.s===d.s&&a.t===d.t};d.geom.vertLeq=function(a,d){return a.s<d.s||a.s===d.s&&a.t<=d.t};d.geom.edgeEval=function(a,l,g){d.assert(d.geom.vertLeq(a,l)&&d.geom.vertLeq(l,g));var k=l.s-a.s,e=g.s-l.s;return 0<k+e?k<e?l.t-a.t+k/(k+e)*(a.t-g.t):l.t-g.t+e/(k+e)*(g.t-a.t):0};d.geom.edgeSign=function(a,l,g){d.assert(d.geom.vertLeq(a,l)&&d.geom.vertLeq(l,g));var k=l.s-a.s,e=g.s-l.s;return 0<k+e?(l.t-g.t)*k+(l.t-a.t)*e:0};d.geom.transLeq=function(a,
d){return a.t<d.t||a.t===d.t&&a.s<=d.s};d.geom.transEval=function(a,l,g){d.assert(d.geom.transLeq(a,l)&&d.geom.transLeq(l,g));var k=l.t-a.t,e=g.t-l.t;return 0<k+e?k<e?l.s-a.s+k/(k+e)*(a.s-g.s):l.s-g.s+e/(k+e)*(g.s-a.s):0};d.geom.transSign=function(a,l,g){d.assert(d.geom.transLeq(a,l)&&d.geom.transLeq(l,g));var k=l.t-a.t,e=g.t-l.t;return 0<k+e?(l.s-g.s)*k+(l.s-a.s)*e:0};d.geom.edgeGoesLeft=function(a){return d.geom.vertLeq(a.dst(),a.org)};d.geom.edgeGoesRight=function(a){return d.geom.vertLeq(a.org,
a.dst())};d.geom.vertL1dist=function(a,d){return Math.abs(a.s-d.s)+Math.abs(a.t-d.t)};d.geom.vertCCW=function(a,d,g){return 0<=a.s*(d.t-g.t)+d.s*(g.t-a.t)+g.s*(a.t-d.t)};d.geom.interpolate_=function(a,d,g,k){a=0>a?0:a;g=0>g?0:g;return a<=g?0===g?(d+k)/2:d+a/(a+g)*(k-d):k+g/(a+g)*(d-k)};d.geom.edgeIntersect=function(a,l,g,k,e){var c,h;d.geom.vertLeq(a,l)||(c=a,a=l,l=c);d.geom.vertLeq(g,k)||(c=g,g=k,k=c);d.geom.vertLeq(a,g)||(c=a,a=g,g=c,c=l,l=k,k=c);d.geom.vertLeq(g,l)?d.geom.vertLeq(l,k)?(c=d.geom.edgeEval(a,
g,l),h=d.geom.edgeEval(g,l,k),0>c+h&&(c=-c,h=-h),e.s=d.geom.interpolate_(c,g.s,h,l.s)):(c=d.geom.edgeSign(a,g,l),h=-d.geom.edgeSign(a,k,l),0>c+h&&(c=-c,h=-h),e.s=d.geom.interpolate_(c,g.s,h,k.s)):e.s=(g.s+l.s)/2;d.geom.transLeq(a,l)||(c=a,a=l,l=c);d.geom.transLeq(g,k)||(c=g,g=k,k=c);d.geom.transLeq(a,g)||(c=a,a=g,g=c,c=l,l=k,k=c);d.geom.transLeq(g,l)?d.geom.transLeq(l,k)?(c=d.geom.transEval(a,g,l),h=d.geom.transEval(g,l,k),0>c+h&&(c=-c,h=-h),e.t=d.geom.interpolate_(c,g.t,h,l.t)):(c=d.geom.transSign(a,
g,l),h=-d.geom.transSign(a,k,l),0>c+h&&(c=-c,h=-h),e.t=d.geom.interpolate_(c,g.t,h,k.t)):e.t=(g.t+l.t)/2};d.mesh={};d.mesh.makeEdge=function(a){var l=d.mesh.makeEdgePair_(a.eHead);d.mesh.makeVertex_(l,a.vHead);d.mesh.makeVertex_(l.sym,a.vHead);d.mesh.makeFace_(l,a.fHead);return l};d.mesh.meshSplice=function(a,l){var g=!1,k=!1;a!==l&&(l.org!==a.org&&(k=!0,d.mesh.killVertex_(l.org,a.org)),l.lFace!==a.lFace&&(g=!0,d.mesh.killFace_(l.lFace,a.lFace)),d.mesh.splice_(l,a),k||(d.mesh.makeVertex_(l,a.org),
a.org.anEdge=a),g||(d.mesh.makeFace_(l,a.lFace),a.lFace.anEdge=a))};d.mesh.deleteEdge=function(a){var l=a.sym,g=!1;a.lFace!==a.rFace()&&(g=!0,d.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?d.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=a.oNext,d.mesh.splice_(a,a.oPrev()),g||d.mesh.makeFace_(a,a.lFace));l.oNext===l?(d.mesh.killVertex_(l.org,null),d.mesh.killFace_(l.lFace,null)):(a.lFace.anEdge=l.oPrev(),l.org.anEdge=l.oNext,d.mesh.splice_(l,l.oPrev()));d.mesh.killEdge_(a)};
d.mesh.addEdgeVertex=function(a){var l=d.mesh.makeEdgePair_(a),g=l.sym;d.mesh.splice_(l,a.lNext);l.org=a.dst();d.mesh.makeVertex_(g,l.org);l.lFace=g.lFace=a.lFace;return l};d.mesh.splitEdge=function(a){var l=d.mesh.addEdgeVertex(a).sym;d.mesh.splice_(a.sym,a.sym.oPrev());d.mesh.splice_(a.sym,l);a.sym.org=l.org;l.dst().anEdge=l.sym;l.sym.lFace=a.rFace();l.winding=a.winding;l.sym.winding=a.sym.winding;return l};d.mesh.connect=function(a,l){var g=!1,k=d.mesh.makeEdgePair_(a),e=k.sym;l.lFace!==a.lFace&&
(g=!0,d.mesh.killFace_(l.lFace,a.lFace));d.mesh.splice_(k,a.lNext);d.mesh.splice_(e,l);k.org=a.dst();e.org=l.org;k.lFace=e.lFace=a.lFace;a.lFace.anEdge=e;g||d.mesh.makeFace_(k,a.lFace);return k};d.mesh.zapFace=function(a){var l=a.anEdge,g=l.lNext,k;do if(k=g,g=k.lNext,k.lFace=null,null===k.rFace()){k.oNext===k?d.mesh.killVertex_(k.org,null):(k.org.anEdge=k.oNext,d.mesh.splice_(k,k.oPrev()));var e=k.sym;e.oNext===e?d.mesh.killVertex_(e.org,null):(e.org.anEdge=e.oNext,d.mesh.splice_(e,e.oPrev()));d.mesh.killEdge_(k)}while(k!==
l);l=a.prev;a=a.next;a.prev=l;l.next=a};d.mesh.meshUnion=function(a,d){var g=a.fHead,k=a.vHead,e=a.eHead,c=d.fHead,h=d.vHead;d=d.eHead;c.next!==c&&(g.prev.next=c.next,c.next.prev=g.prev,c.prev.next=g,g.prev=c.prev);h.next!==h&&(k.prev.next=h.next,h.next.prev=k.prev,h.prev.next=k,k.prev=h.prev);d.next!==d&&(e.sym.next.sym.next=d.next,d.next.sym.next=e.sym.next,d.sym.next.sym.next=e,e.sym.next=d.sym.next);return a};d.mesh.deleteMesh=function(a){};d.mesh.makeEdgePair_=function(a){var l=new d.GluHalfEdge,
g=new d.GluHalfEdge,k=a.sym.next;g.next=k;k.sym.next=l;l.next=a;a.sym.next=g;l.sym=g;l.oNext=l;l.lNext=g;g.sym=l;g.oNext=g;return g.lNext=l};d.mesh.splice_=function(a,d){var g=a.oNext,k=d.oNext;g.sym.lNext=d;k.sym.lNext=a;a.oNext=k;d.oNext=g};d.mesh.makeVertex_=function(a,l){var g=l.prev,k=new d.GluVertex(l,g);g.next=k;l.prev=k;l=k.anEdge=a;do l.org=k,l=l.oNext;while(l!==a)};d.mesh.makeFace_=function(a,l){var g=l.prev,k=new d.GluFace(l,g);g.next=k;l.prev=k;k.anEdge=a;k.inside=l.inside;l=a;do l.lFace=
k,l=l.lNext;while(l!==a)};d.mesh.killEdge_=function(a){var d=a.next;a=a.sym.next;d.sym.next=a;a.sym.next=d};d.mesh.killVertex_=function(a,d){var g=a.anEdge,k=g;do k.org=d,k=k.oNext;while(k!==g);d=a.prev;a=a.next;a.prev=d;d.next=a};d.mesh.killFace_=function(a,d){var g=a.anEdge,k=g;do k.lFace=d,k=k.lNext;while(k!==g);d=a.prev;a=a.next;a.prev=d;d.next=a};d.normal={};d.normal.S_UNIT_X_=1;d.normal.S_UNIT_Y_=0;d.normal.projectPolygon=function(a,l,g,k){var e=!1,c=[l,g,k];0===l&&0===g&&0===k&&(d.normal.computeNormal_(a,
c),e=!0);g=d.normal.longAxis_(c);l=a.mesh.vHead;if(d.TRUE_PROJECT){d.normal.normalize_(c);k=[0,0,0];var h=[0,0,0];k[g]=0;k[(g+1)%3]=d.normal.S_UNIT_X_;k[(g+2)%3]=d.normal.S_UNIT_Y_;g=d.normal.dot_(k,c);k[0]-=g*c[0];k[1]-=g*c[1];k[2]-=g*c[2];d.normal.normalize_(k);h[0]=c[1]*k[2]-c[2]*k[1];h[1]=c[2]*k[0]-c[0]*k[2];h[2]=c[0]*k[1]-c[1]*k[0];d.normal.normalize_(h);for(c=l.next;c!==l;c=c.next)c.s=d.normal.dot_(c.coords,k),c.t=d.normal.dot_(c.coords,h)}else for(k=(g+1)%3,h=(g+2)%3,g=0<c[g]?1:-1,c=l.next;c!==
l;c=c.next)c.s=c.coords[k],c.t=g*c.coords[h];e&&d.normal.checkOrientation_(a)};d.normal.dot_=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};d.normal.normalize_=function(a){var l=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];d.assert(0<l);l=Math.sqrt(l);a[0]/=l;a[1]/=l;a[2]/=l};d.normal.longAxis_=function(a){var d=0;Math.abs(a[1])>Math.abs(a[0])&&(d=1);Math.abs(a[2])>Math.abs(a[d])&&(d=2);return d};d.normal.computeNormal_=function(a,l){var g=[-2*d.GLU_TESS_MAX_COORD,-2*d.GLU_TESS_MAX_COORD,-2*d.GLU_TESS_MAX_COORD],
k=[2*d.GLU_TESS_MAX_COORD,2*d.GLU_TESS_MAX_COORD,2*d.GLU_TESS_MAX_COORD],e=[],c=[],h;a=a.mesh.vHead;for(h=a.next;h!==a;h=h.next)for(var m=0;3>m;++m){var b=h.coords[m];b<k[m]&&(k[m]=b,c[m]=h);b>g[m]&&(g[m]=b,e[m]=h)}h=0;g[1]-k[1]>g[0]-k[0]&&(h=1);g[2]-k[2]>g[h]-k[h]&&(h=2);if(k[h]>=g[h])l[0]=0,l[1]=0,l[2]=1;else{g=0;k=c[h];e=e[h];c=[0,0,0];k=[k.coords[0]-e.coords[0],k.coords[1]-e.coords[1],k.coords[2]-e.coords[2]];m=[0,0,0];for(h=a.next;h!==a;h=h.next)m[0]=h.coords[0]-e.coords[0],m[1]=h.coords[1]-
e.coords[1],m[2]=h.coords[2]-e.coords[2],c[0]=k[1]*m[2]-k[2]*m[1],c[1]=k[2]*m[0]-k[0]*m[2],c[2]=k[0]*m[1]-k[1]*m[0],b=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],b>g&&(g=b,l[0]=c[0],l[1]=c[1],l[2]=c[2]);0>=g&&(l[0]=l[1]=l[2]=0,l[d.normal.longAxis_(k)]=1)}};d.normal.checkOrientation_=function(a){for(var d=0,g=a.mesh.fHead,k=g.next;k!==g;k=k.next){var e=k.anEdge;if(!(0>=e.winding)){do d+=(e.org.s-e.dst().s)*(e.org.t+e.dst().t),e=e.lNext;while(e!==k.anEdge)}}if(0>d)for(a=a.mesh.vHead,d=a.next;d!==a;d=d.next)d.t=-d.t};
d.render={};d.render.renderMesh=function(a,l,g){for(var k=!1,e=-1,c=l.fHead.prev;c!==l.fHead;c=c.prev)if(c.inside){k||(a.callBeginCallback(d.primitiveType.GL_TRIANGLES),k=!0);var h=c.anEdge;d.assert(h.lNext.lNext.lNext===h,"renderMesh called with non-triangulated mesh");do{if(g){var m=h.rFace().inside?0:1;e!==m&&(e=m,a.callEdgeFlagCallback(!!e))}a.callVertexCallback(h.org.data);h=h.lNext}while(h!==c.anEdge)}k&&a.callEndCallback()};d.render.renderBoundary=function(a,l){for(var g=l.fHead.next;g!==l.fHead;g=
g.next)if(g.inside){a.callBeginCallback(d.primitiveType.GL_LINE_LOOP);var k=g.anEdge;do a.callVertexCallback(k.org.data),k=k.lNext;while(k!==g.anEdge);a.callEndCallback()}};d.sweep={};d.sweep.SENTINEL_COORD_=4*d.GLU_TESS_MAX_COORD;d.sweep.TOLERANCE_NONZERO_=!1;d.sweep.computeInterior=function(a){a.fatalError=!1;d.sweep.removeDegenerateEdges_(a);d.sweep.initPriorityQ_(a);d.sweep.initEdgeDict_(a);for(var l;null!==(l=a.pq.extractMin());){for(;;){var g=a.pq.minimum();if(null===g||!d.geom.vertEq(g,l))break;
g=a.pq.extractMin();d.sweep.spliceMergeVertices_(a,l.anEdge,g.anEdge)}d.sweep.sweepEvent_(a,l)}l=a.dict.getMin().getKey();a.event=l.eUp.org;d.sweep.doneEdgeDict_(a);d.sweep.donePriorityQ_(a);d.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};d.sweep.addWinding_=function(a,d){a.winding+=d.winding;a.sym.winding+=d.sym.winding};d.sweep.edgeLeq_=function(a,l,g){a=a.event;l=l.eUp;g=g.eUp;if(l.dst()===a)return g.dst()===a?d.geom.vertLeq(l.org,g.org)?0>=d.geom.edgeSign(g.dst(),l.org,g.org):0<=d.geom.edgeSign(l.dst(),
g.org,l.org):0>=d.geom.edgeSign(g.dst(),a,g.org);if(g.dst()===a)return 0<=d.geom.edgeSign(l.dst(),a,l.org);l=d.geom.edgeEval(l.dst(),a,l.org);a=d.geom.edgeEval(g.dst(),a,g.org);return l>=a};d.sweep.deleteRegion_=function(a,l){l.fixUpperEdge&&d.assert(0===l.eUp.winding);l.eUp.activeRegion=null;a.dict.deleteNode(l.nodeUp);l.nodeUp=null};d.sweep.fixUpperEdge_=function(a,l){d.assert(a.fixUpperEdge);d.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=l;l.activeRegion=a};d.sweep.topLeftRegion_=function(a){var l=
a.eUp.org;do a=a.regionAbove();while(a.eUp.org===l);a.fixUpperEdge&&(l=d.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),d.sweep.fixUpperEdge_(a,l),a=a.regionAbove());return a};d.sweep.topRightRegion_=function(a){var d=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===d);return a};d.sweep.addRegionBelow_=function(a,l,g){var k=new d.ActiveRegion;k.eUp=g;k.nodeUp=a.dict.insertBefore(l.nodeUp,k);return g.activeRegion=k};d.sweep.isWindingInside_=function(a,l){switch(a.windingRule){case d.windingRule.GLU_TESS_WINDING_ODD:return 0!==
(l&1);case d.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==l;case d.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<l;case d.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>l;case d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=l||-2>=l}d.assert(!1);return!1};d.sweep.computeWinding_=function(a,l){l.windingNumber=l.regionAbove().windingNumber+l.eUp.winding;l.inside=d.sweep.isWindingInside_(a,l.windingNumber)};d.sweep.finishRegion_=function(a,l){var g=l.eUp,k=g.lFace;k.inside=l.inside;k.anEdge=
g;d.sweep.deleteRegion_(a,l)};d.sweep.finishLeftRegions_=function(a,l,g){var k=l;for(l=l.eUp;k!==g;){k.fixUpperEdge=!1;var e=k.regionBelow(),c=e.eUp;if(c.org!==l.org){if(!e.fixUpperEdge){d.sweep.finishRegion_(a,k);break}c=d.mesh.connect(l.lPrev(),c.sym);d.sweep.fixUpperEdge_(e,c)}l.oNext!==c&&(d.mesh.meshSplice(c.oPrev(),c),d.mesh.meshSplice(l,c));d.sweep.finishRegion_(a,k);l=e.eUp;k=e}return l};d.sweep.addRightEdges_=function(a,l,g,k,e,c){var h=!0;do d.assert(d.geom.vertLeq(g.org,g.dst())),d.sweep.addRegionBelow_(a,
l,g.sym),g=g.oNext;while(g!==k);for(null===e&&(e=l.regionBelow().eUp.rPrev());;){k=l.regionBelow();g=k.eUp.sym;if(g.org!==e.org)break;g.oNext!==e&&(d.mesh.meshSplice(g.oPrev(),g),d.mesh.meshSplice(e.oPrev(),g));k.windingNumber=l.windingNumber-g.winding;k.inside=d.sweep.isWindingInside_(a,k.windingNumber);l.dirty=!0;!h&&d.sweep.checkForRightSplice_(a,l)&&(d.sweep.addWinding_(g,e),d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(e));h=!1;l=k;e=g}l.dirty=!0;d.assert(l.windingNumber-g.winding===k.windingNumber);
c&&d.sweep.walkDirtyRegions_(a,l)};d.sweep.callCombine_=function(a,l,g,k,e){var c=[l.coords[0],l.coords[1],l.coords[2]];l.data=null;l.data=a.callCombineCallback(c,g,k);null===l.data&&(e?a.fatalError||(a.callErrorCallback(d.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),a.fatalError=!0):l.data=g[0])};d.sweep.spliceMergeVertices_=function(a,l,g){var k=[null,null,null,null];k[0]=l.org.data;k[1]=g.org.data;d.sweep.callCombine_(a,l.org,k,[.5,.5,0,0],!1);d.mesh.meshSplice(l,g)};d.sweep.vertexWeights_=function(a,
l,g,k,e){var c=d.geom.vertL1dist(l,a),h=d.geom.vertL1dist(g,a),m=e+1;k[e]=.5*h/(c+h);k[m]=.5*c/(c+h);a.coords[0]+=k[e]*l.coords[0]+k[m]*g.coords[0];a.coords[1]+=k[e]*l.coords[1]+k[m]*g.coords[1];a.coords[2]+=k[e]*l.coords[2]+k[m]*g.coords[2]};d.sweep.getIntersectData_=function(a,l,g,k,e,c){var h=[0,0,0,0],m=[g.data,k.data,e.data,c.data];l.coords[0]=l.coords[1]=l.coords[2]=0;d.sweep.vertexWeights_(l,g,k,h,0);d.sweep.vertexWeights_(l,e,c,h,2);d.sweep.callCombine_(a,l,m,h,!0)};d.sweep.checkForRightSplice_=
function(a,l){var g=l.regionBelow(),k=l.eUp,e=g.eUp;if(d.geom.vertLeq(k.org,e.org)){if(0<d.geom.edgeSign(e.dst(),k.org,e.org))return!1;d.geom.vertEq(k.org,e.org)?k.org!==e.org&&(a.pq.remove(k.org.pqHandle),d.sweep.spliceMergeVertices_(a,e.oPrev(),k)):(d.mesh.splitEdge(e.sym),d.mesh.meshSplice(k,e.oPrev()),l.dirty=g.dirty=!0)}else{if(0>d.geom.edgeSign(k.dst(),e.org,k.org))return!1;l.regionAbove().dirty=l.dirty=!0;d.mesh.splitEdge(k.sym);d.mesh.meshSplice(e.oPrev(),k)}return!0};d.sweep.checkForLeftSplice_=
function(a,l){var g=l.regionBelow();a=l.eUp;var k=g.eUp;d.assert(!d.geom.vertEq(a.dst(),k.dst()));if(d.geom.vertLeq(a.dst(),k.dst())){if(0>d.geom.edgeSign(a.dst(),k.dst(),a.org))return!1;l.regionAbove().dirty=l.dirty=!0;g=d.mesh.splitEdge(a);d.mesh.meshSplice(k.sym,g);g.lFace.inside=l.inside}else{if(0<d.geom.edgeSign(k.dst(),a.dst(),k.org))return!1;l.dirty=g.dirty=!0;g=d.mesh.splitEdge(k);d.mesh.meshSplice(a.lNext,k.sym);g.rFace().inside=l.inside}return!0};d.sweep.checkForIntersect_=function(a,l){var g=
l.regionBelow(),k=l.eUp,e=g.eUp,c=k.org,h=e.org,m=k.dst(),b=e.dst(),f=new d.GluVertex;d.assert(!d.geom.vertEq(b,m));d.assert(0>=d.geom.edgeSign(m,a.event,c));d.assert(0<=d.geom.edgeSign(b,a.event,h));d.assert(c!==a.event&&h!==a.event);d.assert(!l.fixUpperEdge&&!g.fixUpperEdge);if(c===h||Math.min(c.t,m.t)>Math.max(h.t,b.t))return!1;if(d.geom.vertLeq(c,h)){if(0<d.geom.edgeSign(b,c,h))return!1}else if(0>d.geom.edgeSign(m,h,c))return!1;d.geom.edgeIntersect(m,c,b,h,f);d.assert(Math.min(c.t,m.t)<=f.t);
d.assert(f.t<=Math.max(h.t,b.t));d.assert(Math.min(b.s,m.s)<=f.s);d.assert(f.s<=Math.max(h.s,c.s));d.geom.vertLeq(f,a.event)&&(f.s=a.event.s,f.t=a.event.t);var p=d.geom.vertLeq(c,h)?c:h;d.geom.vertLeq(p,f)&&(f.s=p.s,f.t=p.t);if(d.geom.vertEq(f,c)||d.geom.vertEq(f,h))return d.sweep.checkForRightSplice_(a,l),!1;if(!d.geom.vertEq(m,a.event)&&0<=d.geom.edgeSign(m,a.event,f)||!d.geom.vertEq(b,a.event)&&0>=d.geom.edgeSign(b,a.event,f)){if(b===a.event)return d.mesh.splitEdge(k.sym),d.mesh.meshSplice(e.sym,
k),l=d.sweep.topLeftRegion_(l),k=l.regionBelow().eUp,d.sweep.finishLeftRegions_(a,l.regionBelow(),g),d.sweep.addRightEdges_(a,l,k.oPrev(),k,k,!0),!0;if(m===a.event)return d.mesh.splitEdge(e.sym),d.mesh.meshSplice(k.lNext,e.oPrev()),g=l,l=d.sweep.topRightRegion_(l),c=l.regionBelow().eUp.rPrev(),g.eUp=e.oPrev(),e=d.sweep.finishLeftRegions_(a,g,null),d.sweep.addRightEdges_(a,l,e.oNext,k.rPrev(),c,!0),!0;0<=d.geom.edgeSign(m,a.event,f)&&(l.regionAbove().dirty=l.dirty=!0,d.mesh.splitEdge(k.sym),k.org.s=
a.event.s,k.org.t=a.event.t);0>=d.geom.edgeSign(b,a.event,f)&&(l.dirty=g.dirty=!0,d.mesh.splitEdge(e.sym),e.org.s=a.event.s,e.org.t=a.event.t);return!1}d.mesh.splitEdge(k.sym);d.mesh.splitEdge(e.sym);d.mesh.meshSplice(e.oPrev(),k);k.org.s=f.s;k.org.t=f.t;k.org.pqHandle=a.pq.insert(k.org);d.sweep.getIntersectData_(a,k.org,c,m,h,b);l.regionAbove().dirty=l.dirty=g.dirty=!0;return!1};d.sweep.walkDirtyRegions_=function(a,l){for(var g=l.regionBelow();;){for(;g.dirty;)l=g,g=g.regionBelow();if(!l.dirty&&
(g=l,l=l.regionAbove(),null===l||!l.dirty))break;l.dirty=!1;var k=l.eUp,e=g.eUp;k.dst()!==e.dst()&&d.sweep.checkForLeftSplice_(a,l)&&(g.fixUpperEdge?(d.sweep.deleteRegion_(a,g),d.mesh.deleteEdge(e),g=l.regionBelow(),e=g.eUp):l.fixUpperEdge&&(d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(k),l=g.regionAbove(),k=l.eUp));if(k.org!==e.org)if(k.dst()===e.dst()||l.fixUpperEdge||g.fixUpperEdge||k.dst()!==a.event&&e.dst()!==a.event)d.sweep.checkForRightSplice_(a,l);else if(d.sweep.checkForIntersect_(a,l))break;
k.org===e.org&&k.dst()===e.dst()&&(d.sweep.addWinding_(e,k),d.sweep.deleteRegion_(a,l),d.mesh.deleteEdge(k),l=g.regionAbove())}};d.sweep.connectRightVertex_=function(a,l,g){var k=g.oNext,e=l.regionBelow(),c=l.eUp,h=e.eUp,m=!1;c.dst()!==h.dst()&&d.sweep.checkForIntersect_(a,l);d.geom.vertEq(c.org,a.event)&&(d.mesh.meshSplice(k.oPrev(),c),l=d.sweep.topLeftRegion_(l),k=l.regionBelow().eUp,d.sweep.finishLeftRegions_(a,l.regionBelow(),e),m=!0);d.geom.vertEq(h.org,a.event)&&(d.mesh.meshSplice(g,h.oPrev()),
g=d.sweep.finishLeftRegions_(a,e,null),m=!0);m?d.sweep.addRightEdges_(a,l,g.oNext,k,k,!0):(k=d.geom.vertLeq(h.org,c.org)?h.oPrev():c,k=d.mesh.connect(g.lPrev(),k),d.sweep.addRightEdges_(a,l,k,k.oNext,k.oNext,!1),k.sym.activeRegion.fixUpperEdge=!0,d.sweep.walkDirtyRegions_(a,l))};d.sweep.connectLeftDegenerate_=function(a,l,g){var k=l.eUp;if(d.geom.vertEq(k.org,g))d.assert(d.sweep.TOLERANCE_NONZERO_),d.sweep.TOLERANCE_NONZERO_&&d.sweep.spliceMergeVertices_(a,k,g.anEdge);else if(d.geom.vertEq(k.dst(),
g)){if(d.assert(d.sweep.TOLERANCE_NONZERO_),d.sweep.TOLERANCE_NONZERO_){l=d.sweep.topRightRegion_(l);var k=l.regionBelow(),e=k.eUp.sym,c=e.oNext,h=c;k.fixUpperEdge&&(d.assert(c!==e),d.sweep.deleteRegion_(a,k),d.mesh.deleteEdge(e),e=c.oPrev());d.mesh.meshSplice(g.anEdge,e);d.geom.edgeGoesLeft(c)||(c=null);d.sweep.addRightEdges_(a,l,e.oNext,h,c,!0)}}else d.mesh.splitEdge(k.sym),l.fixUpperEdge&&(d.mesh.deleteEdge(k.oNext),l.fixUpperEdge=!1),d.mesh.meshSplice(g.anEdge,k),d.sweep.sweepEvent_(a,g)};d.sweep.connectLeftVertex_=
function(a,l){var g=new d.ActiveRegion;g.eUp=l.anEdge.sym;var g=a.dict.search(g).getKey(),k=g.regionBelow(),e=g.eUp,c=k.eUp;0===d.geom.edgeSign(e.dst(),l,e.org)?d.sweep.connectLeftDegenerate_(a,g,l):(k=d.geom.vertLeq(c.dst(),e.dst())?g:k,g.inside||k.fixUpperEdge?(e=k===g?d.mesh.connect(l.anEdge.sym,e.lNext):d.mesh.connect(c.dNext(),l.anEdge).sym,k.fixUpperEdge?d.sweep.fixUpperEdge_(k,e):d.sweep.computeWinding_(a,d.sweep.addRegionBelow_(a,g,e)),d.sweep.sweepEvent_(a,l)):d.sweep.addRightEdges_(a,g,
l.anEdge,l.anEdge,null,!0))};d.sweep.sweepEvent_=function(a,l){a.event=l;for(var g=l.anEdge;null===g.activeRegion;)if(g=g.oNext,g===l.anEdge){d.sweep.connectLeftVertex_(a,l);return}l=d.sweep.topLeftRegion_(g.activeRegion);var k=l.regionBelow(),g=k.eUp,k=d.sweep.finishLeftRegions_(a,k,null);k.oNext===g?d.sweep.connectRightVertex_(a,l,k):d.sweep.addRightEdges_(a,l,k.oNext,g,g,!0)};d.sweep.addSentinel_=function(a,l){var g=new d.ActiveRegion,k=d.mesh.makeEdge(a.mesh);k.org.s=d.sweep.SENTINEL_COORD_;k.org.t=
l;k.dst().s=-d.sweep.SENTINEL_COORD_;k.dst().t=l;a.event=k.dst();g.eUp=k;g.windingNumber=0;g.inside=!1;g.fixUpperEdge=!1;g.sentinel=!0;g.dirty=!1;g.nodeUp=a.dict.insert(g)};d.sweep.initEdgeDict_=function(a){a.dict=new d.Dict(a,d.sweep.edgeLeq_);d.sweep.addSentinel_(a,-d.sweep.SENTINEL_COORD_);d.sweep.addSentinel_(a,d.sweep.SENTINEL_COORD_)};d.sweep.doneEdgeDict_=function(a){for(var l=0,g;null!==(g=a.dict.getMin().getKey());)g.sentinel||(d.assert(g.fixUpperEdge),d.assert(1===++l)),d.assert(0===g.windingNumber),
d.sweep.deleteRegion_(a,g);a.dict=null};d.sweep.removeDegenerateEdges_=function(a){for(var l=a.mesh.eHead,g,k=l.next;k!==l;k=g){g=k.next;var e=k.lNext;d.geom.vertEq(k.org,k.dst())&&k.lNext.lNext!==k&&(d.sweep.spliceMergeVertices_(a,e,k),d.mesh.deleteEdge(k),k=e,e=k.lNext);if(e.lNext===k){if(e!==k){if(e===g||e===g.sym)g=g.next;d.mesh.deleteEdge(e)}if(k===g||k===g.sym)g=g.next;d.mesh.deleteEdge(k)}}};d.sweep.initPriorityQ_=function(a){var l=new d.PriorityQ;a.pq=l;a=a.mesh.vHead;var g;for(g=a.next;g!==
a;g=g.next)g.pqHandle=l.insert(g);l.init()};d.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};d.sweep.removeDegenerateFaces_=function(a){for(var l,g=a.fHead.next;g!==a.fHead;g=l)l=g.next,g=g.anEdge,d.assert(g.lNext!==g),g.lNext.lNext===g&&(d.sweep.addWinding_(g.oNext,g),d.mesh.deleteEdge(g))};d.tessmono={};d.tessmono.tessellateMonoRegion_=function(a){a=a.anEdge;for(d.assert(a.lNext!==a&&a.lNext.lNext!==a);d.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;d.geom.vertLeq(a.org,a.dst());a=a.lNext);
for(var l=a.lPrev(),g;a.lNext!==l;)if(d.geom.vertLeq(a.dst(),l.org)){for(;l.lNext!==a&&(d.geom.edgeGoesLeft(l.lNext)||0>=d.geom.edgeSign(l.org,l.dst(),l.lNext.dst()));)g=d.mesh.connect(l.lNext,l),l=g.sym;l=l.lPrev()}else{for(;l.lNext!==a&&(d.geom.edgeGoesRight(a.lPrev())||0<=d.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)g=d.mesh.connect(a,a.lPrev()),a=g.sym;a=a.lNext}for(d.assert(l.lNext!==a);l.lNext.lNext!==a;)g=d.mesh.connect(l.lNext,l),l=g.sym};d.tessmono.tessellateInterior=function(a){for(var l,
g=a.fHead.next;g!==a.fHead;g=l)l=g.next,g.inside&&d.tessmono.tessellateMonoRegion_(g)};d.tessmono.discardExterior=function(a){for(var l,g=a.fHead.next;g!==a.fHead;g=l)l=g.next,g.inside||d.mesh.zapFace(g)};d.tessmono.setWindingNumber=function(a,l,g){for(var k,e=a.eHead.next;e!==a.eHead;e=k)k=e.next,e.rFace().inside!==e.lFace.inside?e.winding=e.lFace.inside?l:-l:g?d.mesh.deleteEdge(e):e.winding=0};d.Dict=function(a,l){this.head_=new d.DictNode;this.frame_=a;this.leq_=l};d.Dict.prototype.deleteDict_=
function(){};d.Dict.prototype.insertBefore=function(a,l){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,l));l=new d.DictNode(l,a.next,a);a.next.prev=l;return a.next=l};d.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};d.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};d.Dict.prototype.search=function(a){var d=this.head_;do d=d.next;while(null!==d.key&&!this.leq_(this.frame_,a,d.key));return d};d.Dict.prototype.getMin=function(){return this.head_.next};
d.Dict.prototype.getMax=function(){return this.head_.prev};d.DictNode=function(a,d,g){this.key=a||null;this.next=d||this;this.prev=g||this};d.DictNode.prototype.getKey=function(){return this.key};d.DictNode.prototype.getSuccessor=function(){return this.next};d.DictNode.prototype.getPredecessor=function(){return this.prev};d.GluTesselator=function(){this.state_=d.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=d.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};d.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};d.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(d.GluTesselator.tessState_.T_DORMANT)};d.GluTesselator.prototype.gluTessProperty=function(a,l){switch(a){case d.gluEnum.GLU_TESS_TOLERANCE:return;
case d.gluEnum.GLU_TESS_WINDING_RULE:switch(l){case d.windingRule.GLU_TESS_WINDING_ODD:case d.windingRule.GLU_TESS_WINDING_NONZERO:case d.windingRule.GLU_TESS_WINDING_POSITIVE:case d.windingRule.GLU_TESS_WINDING_NEGATIVE:case d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=l;return}break;case d.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!l;return;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(d.gluEnum.GLU_INVALID_VALUE)};d.GluTesselator.prototype.gluGetTessProperty=
function(a){switch(a){case d.gluEnum.GLU_TESS_TOLERANCE:return 0;case d.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,d.assert(a===d.windingRule.GLU_TESS_WINDING_ODD||a===d.windingRule.GLU_TESS_WINDING_NONZERO||a===d.windingRule.GLU_TESS_WINDING_POSITIVE||a===d.windingRule.GLU_TESS_WINDING_NEGATIVE||a===d.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),a;case d.gluEnum.GLU_TESS_BOUNDARY_ONLY:return d.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM)}return!1};
d.GluTesselator.prototype.gluTessNormal=function(a,d,g){this.normal_[0]=a;this.normal_[1]=d;this.normal_[2]=g};d.GluTesselator.prototype.gluTessCallback=function(a,l){l=l?l:null;switch(a){case d.gluEnum.GLU_TESS_BEGIN:case d.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=l;break;case d.gluEnum.GLU_TESS_EDGE_FLAG:case d.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=l;break;case d.gluEnum.GLU_TESS_VERTEX:case d.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=l;break;case d.gluEnum.GLU_TESS_END:case d.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
l;break;case d.gluEnum.GLU_TESS_ERROR:case d.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=l;break;case d.gluEnum.GLU_TESS_COMBINE:case d.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=l;break;case d.gluEnum.GLU_TESS_MESH:this.meshCallback_=l;break;default:this.callErrorCallback(d.gluEnum.GLU_INVALID_ENUM)}};d.GluTesselator.prototype.gluTessVertex=function(a,l){var g=!1,k=[0,0,0];this.requireState_(d.GluTesselator.tessState_.T_IN_CONTOUR);for(var e=0;3>e;++e){var c=a[e];c<-d.GLU_TESS_MAX_COORD&&
(c=-d.GLU_TESS_MAX_COORD,g=!0);c>d.GLU_TESS_MAX_COORD&&(c=d.GLU_TESS_MAX_COORD,g=!0);k[e]=c}g&&this.callErrorCallback(d.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(k,l)};d.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(d.GluTesselator.tessState_.T_DORMANT);this.state_=d.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new d.GluMesh;this.polygonData_=a};d.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=d.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};d.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=d.GluTesselator.tessState_.T_IN_POLYGON};d.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(d.GluTesselator.tessState_.T_IN_POLYGON);this.state_=d.GluTesselator.tessState_.T_DORMANT;d.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);d.sweep.computeInterior(this);
if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?d.tessmono.setWindingNumber(a,1,!0):d.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?d.render.renderBoundary(this,this.mesh):d.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){d.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}d.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};d.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};d.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case d.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case d.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case d.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case d.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(d.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};d.GluTesselator.prototype.addVertex_=function(a,l){var g=this.lastEdge_;null===g?(g=d.mesh.makeEdge(this.mesh),d.mesh.meshSplice(g,g.sym)):(d.mesh.splitEdge(g),g=g.lNext);g.org.data=l;g.org.coords[0]=a[0];g.org.coords[1]=a[1];g.org.coords[2]=a[2];g.winding=1;g.sym.winding=-1;this.lastEdge_=g};d.GluTesselator.prototype.callBeginCallback=
function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callEdgeFlagCallback=function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};d.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};d.GluTesselator.prototype.callCombineCallback=function(a,d,g){return this.combineCallback_?
this.combineCallback_(a,d,g,this.polygonData_)||null:null};d.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};d.GluFace=function(a,d){this.next=a||this;this.prev=d||this;this.anEdge=null;this.inside=!1};d.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};d.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};d.GluHalfEdge.prototype.dst=function(){return this.sym.org};
d.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};d.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};d.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};d.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};d.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};d.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};d.GluMesh=function(){this.vHead=new d.GluVertex;this.fHead=new d.GluFace;this.eHead=new d.GluHalfEdge;this.eHeadSym=
new d.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};d.GluMesh.prototype.checkMesh=function(){if(d.DEBUG){var a=this.fHead,l=this.vHead,g=this.eHead,k,e;for(k=k=a;(e=k.next)!==a;k=e){d.assert(e.prev===k);k=e.anEdge;do d.assert(k.sym!==k),d.assert(k.sym.sym===k),d.assert(k.lNext.oNext.sym===k),d.assert(k.oNext.sym.lNext===k),d.assert(k.lFace===e),k=k.lNext;while(k!==e.anEdge)}d.assert(e.prev===k&&null===e.anEdge);for(k=k=l;(a=k.next)!==l;k=a){d.assert(a.prev===k);k=a.anEdge;
do d.assert(k.sym!==k),d.assert(k.sym.sym===k),d.assert(k.lNext.oNext.sym===k),d.assert(k.oNext.sym.lNext===k),d.assert(k.org===a),k=k.oNext;while(k!==a.anEdge)}d.assert(a.prev===k&&null===a.anEdge&&null===a.data);for(l=l=g;(k=l.next)!==g;l=k)d.assert(k.sym.next===l.sym),d.assert(k.sym!==k),d.assert(k.sym.sym===k),d.assert(null!==k.org),d.assert(null!==k.dst()),d.assert(k.lNext.oNext.sym===k),d.assert(k.oNext.sym.lNext===k);d.assert(k.sym.next===l.sym&&k.sym===this.eHeadSym&&k.sym.sym===k&&null===
k.org&&null===k.dst()&&null===k.lFace&&null===k.rFace())}};d.GluVertex=function(a,d){this.next=a||this;this.prev=d||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};d.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new d.PriorityQHeap};d.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};d.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;
a=function(a){return function(g,e){return d.geom.vertLeq(a[g],a[e])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(d.DEBUG)for(var l=0+this.size_-1,a=0;a<l;++a)d.assert(d.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};d.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var d=this.size_++;this.verts_[d]=a;return-(d+1)};d.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(d.geom.vertLeq(l,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return a};d.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(d.geom.vertLeq(l,a))return l}return a};d.PriorityQ.prototype.remove=function(a){if(0<=
a)this.heap_.remove(a);else for(a=-(a+1),d.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};d.PriorityQHeap=function(){this.heap_=d.PriorityQHeap.reallocNumeric_([0],d.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=d.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};d.PriorityQHeap.INIT_SIZE_=32;d.PriorityQHeap.reallocNumeric_=
function(a,d){for(var g=Array(d),k=0;k<a.length;k++)g[k]=a[k];for(;k<d;k++)g[k]=0;return g};d.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);this.initialized_=!0};d.PriorityQHeap.prototype.insert=function(a){var l=++this.size_;2*l>this.max_&&(this.max_*=2,this.handles_=d.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var g;0===this.freeList_?g=l:(g=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[g]=a;this.handles_[g]=l;
this.heap_[l]=g;this.initialized_&&this.floatUp_(l);return g};d.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};d.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};d.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,d=this.verts_,g=this.handles_,k=a[1],e=d[k];0<this.size_&&(a[1]=a[this.size_],g[a[1]]=1,d[k]=null,g[k]=this.freeList_,this.freeList_=k,0<--this.size_&&this.floatDown_(1));return e};d.PriorityQHeap.prototype.remove=function(a){var l=
this.heap_,g=this.verts_,k=this.handles_;d.assert(1<=a&&a<=this.max_&&null!==g[a]);var e=k[a];l[e]=l[this.size_];k[l[e]]=e;e<=--this.size_&&(1>=e?this.floatDown_(e):d.geom.vertLeq(g[l[e>>1]],g[l[e]])?this.floatDown_(e):this.floatUp_(e));g[a]=null;k[a]=this.freeList_;this.freeList_=a};d.PriorityQHeap.prototype.floatDown_=function(a){for(var l=this.heap_,g=this.verts_,k=this.handles_,e=l[a];;){var c=a<<1;c<this.size_&&d.geom.vertLeq(g[l[c+1]],g[l[c]])&&(c+=1);d.assert(c<=this.max_);var h=l[c];if(c>
this.size_||d.geom.vertLeq(g[e],g[h])){l[a]=e;k[e]=a;break}l[a]=h;k[h]=a;a=c}};d.PriorityQHeap.prototype.floatUp_=function(a){for(var l=this.heap_,g=this.verts_,k=this.handles_,e=l[a];;){var c=a>>1,h=l[c];if(0===c||d.geom.vertLeq(g[h],g[e])){l[a]=e;k[e]=a;break}l[a]=h;k[h]=a;a=c}};d.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};d.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
d.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return d})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["require","exports","../../../../../core/promiseUtils"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._resolver=null}a.prototype.isHeld=function(){return!!this._resolver};a.prototype.acquire=function(){var a=this;return this._resolver?this._resolver.promise.then(function(){return a.acquire()}):
(this._resolver=l.createResolver(),l.resolve())};a.prototype.release=function(){var a=this._resolver;this._resolver=null;a.resolve()};return a}();a.default=d;a.withLock=function(a,d,e){return a.acquire().then(function(){return d(e)}).then(function(){return a.release()}).catch(function(c){a.release();throw c;})}})},"esri/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./Utils ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u){Object.defineProperty(a,"__esModule",{value:!0});var n=new l.default,r=new l.default;d=function(){function a(){this.tileBufferData=this.tileDisplayData=null}a.prototype.reshuffle=function(){n.reset();for(var b=k.groupRecordsByGeometryType(this.tileDisplayData.displayObjects),d=0;d<b.length;d++)for(var f=b[d],h=0,l=f;h<l.length;h++){var m=l[h];m&&n.needMore(m.geometryType,m.meshData?m.meshData.vertexCount:m.vertexCount,m.meshData?m.meshData.indexData.length:m.indexCount)}h=
b.length;d=new g;for(l=0;l<h;++l){d.geometries[l].indexBuffer=new Uint32Array(Math.round(1.15*n.indicesFor(l)));var m=[],p;for(p in this.tileBufferData.geometries[l].vertexBuffer)m.push(this.tileBufferData.geometries[l].vertexBuffer[p].stride);var m=a._computeVertexAlignment(m),f=Math.round(1.15*n.verticesFor(l)),m=a._align(f,m),u;for(u in this.tileBufferData.geometries[l].vertexBuffer)f=this.tileBufferData.geometries[l].vertexBuffer[u].stride,d.geometries[l].vertexBuffer[u]={stride:f,data:c.allocateTypedArrayBuffer(m,
f)}}r.reset();this.tileDisplayData.displayList.clear();for(l=0;l<h;++l){f=b[l];p=0;for(u=f;p<u.length;p++){m=u[p];if(m.meshData)m.writeMeshDataToBuffers(r.verticesFor(l),d.geometries[l].vertexBuffer,r.indicesFor(l),d.geometries[l].indexBuffer),m.meshData=null;else{var w=this.tileBufferData.geometries[l].vertexBuffer,F=this.tileBufferData.geometries[l].indexBuffer,H=d.geometries[l].vertexBuffer,G=d.geometries[l].indexBuffer,J=r.verticesFor(l),K=r.indicesFor(l);e.copyMeshData(J,K,H,G,m,w,F);m.vertexFrom=
J;m.indexFrom=K}r.needMore(l,m.vertexCount,m.indexCount)}this.tileDisplayData.displayList.unified||this.tileDisplayData.displayList.addToList(f)}if(this.tileDisplayData.displayList.unified)for(b=0,h=this.tileDisplayData.displayObjects;b<h.length;b++)this.tileDisplayData.displayList.addToList(h[b].displayRecords);this.tileBufferData=d};a.prototype.getStrides=function(){for(var a=[],b=0;b<this.tileBufferData.geometries.length;++b){var c=this.tileBufferData.geometries[b];a[b]={};for(var d in c.vertexBuffer)a[b][d]=
c.vertexBuffer[d].stride}return a};a.prototype.clone=function(){var b=new a;b.tileBufferData=this.tileBufferData.clone();b.tileDisplayData=this.tileDisplayData.clone();return b};a.prototype._guessSize=function(){for(var a=this.tileDisplayData.displayObjects,b=Math.min(a.length,4),c=0,d=0;d<b;d++)c=Math.max(c,a[d].displayRecords.length);return 2*(12*a.length+a.length*c*40)};a.prototype.serialize=function(){var a=this.tileBufferData.serialize(),b=this.tileBufferData.getBuffers(),c=this.tileDisplayData.serialize(new u.default(Int32Array,
this._guessSize())).buffer();b.push(c);return{result:{displayData:c,bufferData:a},transferList:b}};a.decode=function(c){var d=p.deserializeList(new f.default(c.displayObjects),h),e={},g;for(g in c.vertexBuffersMap)e[g]=b.VertexBuffers.decode(c.vertexBuffersMap[g]);return a.fromMeshData({displayObjects:d,vertexBuffersMap:e})};a.fromMeshData=function(b){var c=new a,d=new k.default,e=new g;d.displayObjects=b.displayObjects;for(var f in b.vertexBuffersMap){var h=b.vertexBuffersMap[f];e.geometries[f].indexBuffer=
h.indexBuffer;e.geometries[f].vertexBuffer=h.namedBuffers}c.tileDisplayData=d;c.tileBufferData=e;return c};a.bind=function(b,c){var d=new a;d.tileDisplayData=b;d.tileBufferData=c;return d};a.create=function(b,d){var e=new a;e.tileDisplayData=new k.default;e.tileDisplayData.displayObjects=b;for(var f=[0,0,0,0,0],h=[0,0,0,0,0],l=[[],[],[],[],[]],n=0;n<b.length;n++)for(var p=0,r=b[n].displayRecords;p<r.length;p++){var t=r[p];l[t.geometryType].push(t);f[t.geometryType]+=t.meshData.vertexCount;h[t.geometryType]+=
t.meshData.indexData.length}b=new g;d=[d.fill||{},d.line||{},d.icon||{},d.text||{},d.label||{}];for(n=0;5>n;n++){var p=new Uint32Array(h[n]),r=d[n],t=f[n],u={},w=void 0;for(w in r){var y={data:c.allocateTypedArrayBuffer(t,r[w]),stride:r[w]};u[w]=y}r=u;m.writeAllMeshDataToBuffers(l[n],r,p);b.geometries[n]={indexBuffer:p,vertexBuffer:r}}e.tileBufferData=b;return e};a._align=function(a,b){var c=a%b;return 0===c?a:a+(b-c)};a._computeVertexAlignment=function(a){for(var b=!1,c=!1,d=0;d<a.length;d++){var e=
a[d];2===e%4?b=!0:0!==e%4&&(c=!0)}return c?4:b?2:1};return a}();a.TileData=d})},"esri/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._byGeometryType=null}Object.defineProperty(a.prototype,"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._byGeometryType=null};a.prototype.verticesFor=function(a){return this._byGeometryType?
this._byGeometryType[a].vertices:0};a.prototype.indicesFor=function(a){return this._byGeometryType?this._byGeometryType[a].indices:0};a.prototype.needMore=function(a,d,e){if(d||e)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),a=this._byGeometryType[a],a.vertices+=d,a.indices+=e};return a}();a.default=d})},"esri/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports",
"./Utils"],function(d,a,l){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}a.prototype.clone=function(){for(var d=new a,e=0;e<this.geometries.length;e++){var c=this.geometries[e],g=d.geometries[e];g.indexBuffer=c.indexBuffer.slice();g.vertexBuffer={};for(var l in c.vertexBuffer){var b=c.vertexBuffer[l],f=b.stride;
g.vertexBuffer[l]={data:b.data.slice(),stride:f}}}return d};a.deserialize=function(d){for(var e=new a,c=0;5>c;++c){e.geometries[c].indexBuffer=new Uint32Array(d.geometries[c].indexBuffer);e.geometries[c].vertexBuffer={};for(var g in d.geometries[c].vertexBuffer)e.geometries[c].vertexBuffer[g]={data:l.allocateTypedArrayBufferwithData(d.geometries[c].vertexBuffer[g].data,d.geometries[c].vertexBuffer[g].stride),stride:d.geometries[c].vertexBuffer[g].stride}}return e};a.prototype.serialize=function(){for(var a=
{geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},d=0;5>d;++d)for(var c in this.geometries[d].vertexBuffer)a.geometries[d].vertexBuffer[c]={data:this.geometries[d].vertexBuffer[c].data.buffer,stride:this.geometries[d].vertexBuffer[c].stride};
return a};a.prototype.getBuffers=function(){for(var a=[],d=0;5>d;++d){a.push(this.geometries[d].indexBuffer.buffer);for(var c in this.geometries[d].vertexBuffer)a.push(this.geometries[d].vertexBuffer[c].data.buffer)}return a};return a}()})},"esri/views/2d/engine/webgl/TileDisplayData":function(){define(["require","exports","./WGLDisplayList","./WGLDisplayObject","./util/serializationUtils"],function(d,a,l,g,k){function e(a){for(var c=[[],[],[],[],[]],d=0;d<a.length;d++)for(var b=0,e=a[d].displayRecords;b<
e.length;b++){var g=e[b];c[g.geometryType].push(g)}return c}Object.defineProperty(a,"__esModule",{value:!0});a.groupRecordsByGeometryType=e;d=function(){function a(){}Object.defineProperty(a.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(var a=0,c=this.displayObjects;a<c.length;a++){var b=c[a];this._displayObjectRegistry.set(b.id,b)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"displayList",{get:function(){return this._displayList},enumerable:!0,configurable:!0});a.prototype.computeDisplayList=function(a){this._displayList=new l(a);if(a){a=0;for(var c=this.displayObjects;a<c.length;a++)for(var b=0,d=c[a].displayRecords;b<d.length;b++)this._displayList.addToList(d[b])}else for(a=e(this.displayObjects),c=a.length,b=0;b<c;++b)this._displayList.addToList(a[b])};a.prototype.clone=function(){var c=new a;this.displayObjects&&(c.displayObjects=this.displayObjects.map(function(a){return a.clone()}));
return c};a.prototype.serialize=function(a){k.serializeList(a,this.displayObjects);return a};a.prototype._deserializeObjects=function(a){for(var c=a.readInt32(),c=Array(c),b=new Map,d=0;d<c.length;++d){var e=g.deserialize(a);c[d]=e;b.set(e.id,e)}this.displayObjects=c;this._displayList=null;this._displayObjectRegistry=b};a.deserialize=function(c){var d=new a;d._deserializeObjects(c);return d};return a}();a.default=d})},"esri/views/2d/engine/webgl/WGLDisplayList":function(){define(["require","exports",
"../../../../core/tsSupport/generatorHelper","../../../../core/Logger","./enums"],function(d,a,l,g,k){function e(a,b,c){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];b<a.length?a.splice.apply(a,[b,c].concat(d)):a.push.apply(a,d)}var c=g.getLogger("esri.views.2d.engine.webgl.WGLDisplayList"),h=new Map;h.set(k.WGLDrawPhase.MAP,[k.WGLGeometryType.FILL,k.WGLGeometryType.LINE,k.WGLGeometryType.MARKER,k.WGLGeometryType.TEXT]);h.set(k.WGLDrawPhase.LABEL,[k.WGLGeometryType.LABEL]);h.set(k.WGLDrawPhase.LABEL_ALPHA,
[k.WGLGeometryType.LABEL]);d=function(){function a(a){void 0===a&&(a=!1);this.symbolLevels=[];this.unified=a}a.prototype.replay=function(a,b){if(this.unified)for(var c=0,d=this.symbolLevels;c<d.length;c++)for(var e=0,f=d[c].zLevels;e<f.length;e++){var g=f[e].geometryDPInfo,k;for(k in g)if(g[k])for(var l=0,m=g[k];l<m.length;l++){var n=m[l],p=a.painter.getGeometryBrush(n.geometryType),r=b.getGeometry(n.geometryType);p.drawGeometry(a,b,n,r)}}else for(var c=function(c){var d=a.painter.getGeometryBrush(c),
e=b.getGeometry(c);u.byType(c,function(c){d.drawGeometry(a,b,c,e)})},u=this,d=0,e=h.get(a.drawPhase);d<e.length;d++)c(e[d])};Object.defineProperty(a.prototype,"empty",{get:function(){return!this.symbolLevels||0===this.symbolLevels.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.symbolLevels.length=0};a.prototype.addToList=function(a,b){if(Array.isArray(a))for(var c=0;c<a.length;c++)this._addToList(a[c],b);else this._addToList(a,b)};a.prototype.removeFromList=function(a){Array.isArray(a)||
(a=[a]);for(var b=null,c=0;c<a.length;c++)b=this._removeFromList(a[c]);return b};a.prototype.byType=function(a,b){for(var c=0,d=this.symbolLevels;c<d.length;c++)for(var e=0,f=d[c].zLevels;e<f.length;e++){var g=f[e].geometryDPInfo,h=this.getDPInfoType(a);if(g[h])for(var k=0,g=g[h];k<g.length;k++)b(g[k])}};a.prototype.clone=function(){for(var b=new a(this.unified),c=0,d=this.symbolLevels;c<d.length;c++)b.symbolLevels.push(d[c].clone());return b};a.prototype.splitAfter=function(a){for(var b=this._getDisplayList(a.symbolLevel,
a.zOrder,a.geometryType),c=b.length,d=a.indexFrom+a.indexCount,e=0;e<c;++e){var f=b[e];if(f.geometryType===a.geometryType&&d>f.indexFrom&&d<=f.indexFrom+f.indexCount)return d<f.indexFrom+f.indexCount&&(a=new m,a.geometryType=f.geometryType,a.materialKey=f.materialKey,a.indexFrom=d,a.indexCount=f.indexFrom+f.indexCount-d,b.splice(e+1,0,a),f.indexCount=d-f.indexFrom),e}};a.prototype._addToList=function(a,b){var c=this._getDisplayList(a.symbolLevel,a.zOrder,a.geometryType);b=null!=b?b:c.length-1;var d=
0<=b&&b<c.length?c[b]:null;null===d||d.materialKey!==a.materialKey||d.indexFrom+d.indexCount!==a.indexFrom||this.unified&&d.geometryType!==a.geometryType?(d=new m,d.indexFrom=a.indexFrom,d.indexCount=a.indexCount,d.materialKey=a.materialKey,d.geometryType=a.geometryType,e(c,b+1,0,d)):d.indexCount+=a.indexCount};a.prototype._removeFromList=function(a){for(var b=this._getDisplayList(a.symbolLevel,a.zOrder,a.geometryType),c=b.length,d=void 0,f=0;f<c;++f){var g=b[f];if(a.indexFrom+a.indexCount>g.indexFrom&&
a.indexFrom<g.indexFrom+g.indexCount&&(!this.unified||g.geometryType===a.geometryType)){d=f;break}}if(void 0!==d){g=b[d];if(a.indexFrom===g.indexFrom)return g.indexCount-=a.indexCount,g.indexFrom+=a.indexCount,0===g.indexCount&&e(b,d,1),d-1;if(a.indexFrom+a.indexCount===g.indexFrom+g.indexCount)return g.indexCount-=a.indexCount,0===g.indexCount?(e(b,d,1),d-1):d;var c=g.indexFrom,f=a.indexFrom-g.indexFrom,h=a.indexCount;a=g.indexFrom+g.indexCount-(a.indexFrom+a.indexCount);g.indexCount=f;var k=new m;
k.geometryType=g.geometryType;k.materialKey=g.materialKey;k.indexFrom=c+f+h;k.indexCount=a;e(b,d+1,0,k);return d}return null};a.prototype._getDisplayList=function(a,c,d){for(var e,g=this.symbolLevels.length,h=0;h<g;h++)if(this.symbolLevels[h].symbolLevel===a){e=this.symbolLevels[h];break}e||(e=new p,e.symbolLevel=a,this.symbolLevels.push(e));var l;a=e.zLevels.length;for(g=0;g<a;g++)if(e.zLevels[g].zLevel===c){l=e.zLevels[g];break}l||(l=new f,l.geometryDPInfo=new b,l.zLevel=c,e.zLevels.push(l));var m;
if(this.unified)l.geometryDPInfo.unified||(l.geometryDPInfo.unified=[]),m=l.geometryDPInfo.unified;else switch(d){case k.WGLGeometryType.FILL:l.geometryDPInfo.fill||(l.geometryDPInfo.fill=[]);m=l.geometryDPInfo.fill;break;case k.WGLGeometryType.LINE:l.geometryDPInfo.line||(l.geometryDPInfo.line=[]);m=l.geometryDPInfo.line;break;case k.WGLGeometryType.MARKER:l.geometryDPInfo.marker||(l.geometryDPInfo.marker=[]);m=l.geometryDPInfo.marker;break;case k.WGLGeometryType.TEXT:l.geometryDPInfo.text||(l.geometryDPInfo.text=
[]);m=l.geometryDPInfo.text;break;case k.WGLGeometryType.LABEL:l.geometryDPInfo.label||(l.geometryDPInfo.label=[]);m=l.geometryDPInfo.label;break;default:console.error("Trying to add a record with geometry type '"+d+"'.")}return m};a.prototype.getDPInfoType=function(a){if(this.unified)return"unified";switch(a){case k.WGLGeometryType.FILL:return"fill";case k.WGLGeometryType.LINE:return"line";case k.WGLGeometryType.MARKER:return"marker";case k.WGLGeometryType.TEXT:return"text";case k.WGLGeometryType.LABEL:return"label";
default:c.error("DisplayList: Tried to convert unknown geometryType: "+a)}};return a}();var m=function(){function a(){this.materialKey=null;this.indexCount=this.indexFrom=0}a.prototype.clone=function(){var b=new a;b.geometryType=this.geometryType;b.materialKey=this.materialKey;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;return b};return a}(),b=function(){function a(){this.unified=this.label=this.text=this.marker=this.line=this.fill=null}a.prototype.clone=function(){var b=new a;b.fill=
this.fill&&this.fill.map(function(a){return a.clone()});b.line=this.line&&this.line.map(function(a){return a.clone()});b.marker=this.marker&&this.marker.map(function(a){return a.clone()});b.text=this.text&&this.text.map(function(a){return a.clone()});b.label=this.label&&this.label.map(function(a){return a.clone()});b.unified=this.unified&&this.unified.map(function(a){return a.clone()});return b};return a}(),f=function(){function a(){this.geometryDPInfo=new b}a.prototype.clone=function(){var b=new a;
b.zLevel=this.zLevel;b.geometryDPInfo=this.geometryDPInfo.clone();return b};return a}(),p=function(){function a(){this.zLevels=[]}a.prototype.clone=function(){var b=new a;b.symbolLevel=this.symbolLevel;for(var c=0,d=this.zLevels;c<d.length;c++)b.zLevels.push(d[c].clone());return b};return a}();return d})},"esri/views/2d/engine/webgl/util/Reader":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this._pos=0;this._buffer=
a;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}a.prototype.readInt32=function(){return this._i32View[this._pos++]};a.prototype.readF32=function(){return this._f32View[this._pos++]};return a}();a.default=d})},"esri/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Color ../../../../core/has ../../../../core/maybe ../../../../core/screenUtils ../../../../core/unitUtils ../../../../core/libs/gl-matrix-2/mat4f32 ../../../../renderers/support/utils ./definitions ./Utils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a,b){var c=b.length;if(a<b[0].value||1===c)return b[0].size;for(var d=1;d<c;d++)if(a<b[d].value)return b[d-1].size+(a-b[d-1].value)/(b[d].value-b[d-1].value)*(b[d].size-b[d-1].size);return b[c-1].size}function n(a,b,c){void 0===c&&(c=0);var d=b.g,e=b.b,f=b.a;a[c+0]=b.r*f/255;a[c+1]=d*f/255;a[c+2]=e*f/255;a[c+3]=f}Object.defineProperty(a,"__esModule",{value:!0});var r=function(a,b,c){for(var d=c*=16,e=0;d<Math.min(c+16,a.length);d++,e++)a[d]=b[e]},w=m.mat4f32.create();
d=function(){function a(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);this.ddColors=new Float32Array(32);this.ddBackgroundColor=new Float32Array(4);this.ddActiveDots=new Float32Array(8);this.insideEffect=new Float32Array(16*f.MAX_FILTERS);
this.insideOpacity=1;this.outsideEffect=new Float32Array(16*f.MAX_FILTERS);this.outsideOpacity=1;this.effectCount=0;this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};this._buf0=new Float32Array(2);this._buf1=new Float32Array(2);this.symbolLevels.push(0);for(var a=0;a<f.MAX_FILTERS;a++)r(this.insideEffect,w,a),r(this.outsideEffect,w,a)}Object.defineProperty(a.prototype,"insideOpacities",{get:function(){this._buf0[0]=
1;this._buf0[1]=this.insideOpacity;return this._buf0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"outsideOpacities",{get:function(){this._buf1[0]=0;this._buf1[1]=this.outsideOpacity;return this._buf1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});a.prototype.update=function(a,b,c,d){var f=this;e.isSome(d)?(d.forEach(function(a,b){return f._updateEffects(b,
a)}),this.effectCount=d.length):this.effectCount=0;c&&this._updateVisualVariables(c,a);switch(b.type){case "dot-density":this._updateDotDensityInfo(b)}};a.prototype.getVariation=function(){return{ddDotBlending:this.ddDotBlending,outsideLabelsVisible:this.outsideLabelsVisible,effectCount:this.effectCount,oesTextureFloat:k("esri-webgl-texture-float")}};a.prototype.getVariationHash=function(){return(this.ddDotBlending?1:0)|(this.outsideLabelsVisible?1:0)<<1|this.effectCount<<2};a.prototype._updateEffects=
function(a,b){a+=1;if(e.isSome(b)&&b.filter&&b.filter.enabled){this.outsideLabelsVisible=b.excludedLabelsVisible;var c=b.parsedIncludedEffect;b=b.parsedExcludedEffect;e.isSome(c)?(r(this.insideEffect,c.getColorMatrix(),a),this.insideOpacity=c.getOpacity()):(r(this.insideEffect,w,a),this.insideOpacity=1);e.isSome(b)?(r(this.outsideEffect,b.getColorMatrix(),a),this.outsideOpacity=b.getOpacity()):(r(this.outsideEffect,w,a),this.outsideOpacity=1)}else r(this.insideEffect,w,a),r(this.outsideEffect,w,a),
this.outsideOpacity=this.insideOpacity=1};a.prototype._updateVisualVariables=function(a,d){var e=this._vvMaterialParameters;e.vvOpacityEnabled=!1;e.vvSizeEnabled=!1;e.vvColorEnabled=!1;e.vvRotationEnabled=!1;if(a){var f=a.size;if(f){e.vvSizeEnabled=!0;if(f.minMaxValue){var g=f.minMaxValue,k=void 0,l=void 0;p.isDefined(g.minSize)&&p.isDefined(g.maxSize)&&(p.isNumber(g.minSize)&&p.isNumber(g.maxSize)?(k=c.pt2px(g.minSize),l=c.pt2px(g.maxSize)):(l=d.scale,k=c.pt2px(u(l,g.minSize.stops)),l=c.pt2px(u(l,
g.maxSize.stops))));this.vvSizeMinMaxValue.set([g.minDataValue,g.maxDataValue,k,l])}f.scaleStops&&(this.vvSizeScaleStopsValue=c.pt2px(u(d.scale,f.scaleStops.stops)));f.unitValue&&(this.vvSizeUnitValueToPixelsRatio=h.getMetersPerUnitForSR(d.spatialReference)/b.meterIn[f.unitValue.unit]/d.resolution);f.fieldStops&&(this.vvSizeFieldStopsValues.set(f.fieldStops.values),this.vvSizeFieldStopsSizes.set(f.fieldStops.sizes))}if(d=a.color)e.vvColorEnabled=!0,this.vvColorValues.set(d.values),this.vvColors.set(d.colors);
if(d=a.opacity)e.vvOpacityEnabled=!0,this.vvOpacityValues.set(d.values),this.vvOpacities.set(d.opacities);if(a=a.rotation)e.vvRotationEnabled=!0,e.vvRotationType=a.type}};a.prototype._updateDotDensityInfo=function(a){var b=a.attributes;this.ddDotValue=a.dotValue;this.ddDotScale=a.referenceScale;this.ddDotSize=a.dotSize;this.ddDotBlending=a.dotBlendingEnabled;this.ddSeed=a.seed;for(var c=0;c<f.DOT_DENSITY_MAX_FIELDS;c++){var d=c>=b.length?new g([0,0,0,0]):b[c].color;n(this.ddColors,d,4*c)}for(c=0;8>
c;c++)this.ddActiveDots[c]=c<a.attributes.length?1:0;n(this.ddBackgroundColor,a.backgroundColor)};return a}();a.WGLRendererInfo=d})},"esri/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./Fader ./WGLBuffers ./WGLDisplayList ../../tiling/TileKey".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y){function x(a,b){return a.sortKey-b.sortKey}Object.defineProperty(a,"__esModule",{value:!0});var A=new Set;d=function(a){function b(b,d,e){void 0===e&&(e=!1);var f=a.call(this)||this;f._data=null;f.hlDisplayList=null;f._displayList=null;f._wglBuffers=null;f._dirtyMap=new p.default;f.coords=[0,0];f.bounds=[0,0,0,0];f.dvsMat3=c.mat3f32.create();f.tileMat3=c.mat3f32.create();f.labelMat2d=k.mat2df32.create();f._labelIndex=null;f._dirty=!0;f.fader=new r.default;
f.key=y.pool.acquire(b);f.coords[0]=d[0];f.coords[1]=d[3];f.bounds=d;f._ensureCorrectZOrder=e;return f}l(b,a);Object.defineProperty(b.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canDisplay",{get:function(){return!!this.attached},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isDirty",{get:function(){return this._dirty},set:function(a){(this._dirty=a)||this.isReady||
this.ready();this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasData",{get:function(){return!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});b.prototype.getGeometry=function(a){return this._wglBuffers&&this._wglBuffers.has(a)?this._wglBuffers.get(a):null};b.prototype.getDisplayList=function(a){switch(a){case n.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;
default:return this._data&&this._displayList}};Object.defineProperty(b.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});b.prototype.setData=function(a,b,c){var d=a.addOrUpdate,e=a.remove;this.fader.reset();!a.clear&&this.hasData||a.addOrUpdate?!a.clear&&this.hasData||!a.addOrUpdate?this.hasData&&this._doPatchData({addOrUpdate:d,remove:e},b,c):(d.tileDisplayData.computeDisplayList(this._ensureCorrectZOrder),this._dirtyMap=new p.default,this._dispRecStore=u.default.fromTileData(d,
this._dirtyMap),this._data=d,this._readyTileIfNoLabels(b,c),this._dirtyMap.markAllDirty(),this._displayList||(this._displayList=d.tileDisplayData.displayList.clone())):(this.clear(),this.ready());this.emit("change")};b.prototype.commitChanges=function(a){this.isDirty&&this._wglBuffers||(this._wglBuffers||(this._wglBuffers=new w.default(this.stage.context)),this._displayList=this._data.tileDisplayData.displayList.clone(),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};
b.prototype.setTransform=function(a,b){var c=this.tileMat3,d=a.toScreenNoRotation([0,0],this.coords);e.mat3.set(this.tileMat3,b,0,0,0,b,0,d[0],d[1],1);e.mat3.multiply(this.dvsMat3,a.displayViewMat3,c)};b.prototype.setLabelTransform=function(a,b){var c=this.labelMat2d;b=a.getScreenTransform(c,b);var d=m.vec2f32.create();h.vec2.transformMat2d(d,this.coords,b);g.mat2d.identity(c);g.mat2d.translate(c,c,d);g.mat2d.multiply(c,a.viewMat2d,c)};b.prototype.clear=function(){this._dispRecStore=this._displayList=
this._data=null;this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};b.prototype.attach=function(){return!0};b.prototype.dispose=function(){this.clear()};b.prototype.doRender=function(a){if(this.isReady&&this.hasData){this.commitChanges(a);this.stage.context.setStencilFunction(514,this.stencilRef,255);if(a.drawPhase===n.WGLDrawPhase.MAP||a.drawPhase===n.WGLDrawPhase.LABEL||a.drawPhase===n.WGLDrawPhase.LABEL_ALPHA)this._displayList.replay(a,
this);else for(var b=0,c=this.stage.painter.getBrushes(a.drawPhase);b<c.length;b++)c[b].draw(a,this);this.fader.step()||this.requestRender()}};b.prototype.buildHLList=function(a){if(this.data&&(this.hlDisplayList&&this.hlDisplayList.clear(),!a.isEmpty)){this.hlDisplayList||(this.hlDisplayList=new t);for(var b=0,c=this.data.tileDisplayData.displayObjects;b<c.length;b++){var d=c[b];if(a.has(d.id)){for(var e=[],f=0,d=d.displayRecords;f<d.length;f++){var g=d[f].copy();g.meshData=null;g.symbolLevel=0;
g.zOrder=0;e.push(g)}e.sort(x);this.hlDisplayList.addToList(e)}}}this.requestRender()};b.prototype._readyTileIfNoLabels=function(a,b){a&&b?(this._rebuildLabelIndex(),this.isDirty=!0):this.isDirty=!1};b.prototype._doPatchData=function(a,b,c){this._patchData(a)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=u.default.fromTileData(this._data,this._dirtyMap));this._readyTileIfNoLabels(b,c);this.requestRender()};b.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var a=0,b=this.displayObjects;a<b.length;a++)for(var c=0,d=b[a].metrics;c<d.length;c++)this._insertIntoLabelIndex(d[c])};b.prototype._insertIntoLabelIndex=function(a){-1!==a.xBucket&&this.labelIndex[a.yBucket][a.xBucket].push(a)};b.prototype._initLabelIndex=function(){for(var a=[],b=0;b<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;b++){a.push([]);for(var c=0;c<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;c++)a[b].push([])}return a};b.prototype._patchData=function(a){for(var b=!0,c=a.addOrUpdate&&a.addOrUpdate.tileDisplayData&&
a.addOrUpdate.tileDisplayData.displayObjects||[],d=(a.remove||[]).slice(),e=0;e<c.length;e++){var f=c[e];null!=f.insertAfter&&d.push(f.id)}for(f=0;f<d.length;f++){var g=d[f];if(e=this._data.tileDisplayData.displayObjectRegistry.get(g)){this._data.tileDisplayData.displayList.removeFromList(e.displayRecords);for(var h=0,k=e.displayRecords;h<k.length;h++)this._dispRecStore.delete(k[h]);this._data.tileDisplayData.displayObjectRegistry.delete(g);e=this._data.tileDisplayData.displayObjects.indexOf(e);this._data.tileDisplayData.displayObjects.splice(e,
1)}}for(d=0;d<c.length;d++){f=c[d];e=this._data.tileDisplayData.displayObjectRegistry.get(f.id);g=void 0;if(e){h=e.displayRecords;e.set(f);e.displayRecords=h;h=e.displayRecords.length;for(k=0;k<h;++k){var l=e.displayRecords[k],m=f.displayRecords[k];if(k>=f.displayRecords.length||l.geometryType!==m.geometryType||l.symbolLevel!==m.symbolLevel||l.zOrder!==m.zOrder||l.materialKey!==m.materialKey)this._dispRecStore.delete(e.displayRecords[k]),k<f.displayRecords.length&&(e.displayRecords[k]=void 0)}e.displayRecords.length=
f.displayRecords.length;e.metrics=f.metrics}else if(e=f.copy(),e.displayRecords=[],this._data.tileDisplayData.displayObjectRegistry.set(f.id,e),k=void 0,l=this._data.tileDisplayData.displayObjects,null!=e.insertAfter?(g={},0<=e.insertAfter?(h=this._data.tileDisplayData.displayObjectRegistry.get(e.insertAfter))?(k=l.indexOf(h)+1,k<l.length?l.splice(k,0,e):(l.push(e),k=l.length)):(l.push(e),k=l.length):(l.unshift(e),k=0)):(l.push(e),k=l.length),g){m=void 0;if(this._data.tileDisplayData.displayList.unified)m=
0<f.displayRecords.length?1:0;else{A.clear();for(var m=0,n=f.displayRecords;m<n.length;m++)h=this._data.tileDisplayData.displayList.getDPInfoType(n[m].geometryType),A.add(h);m=A.size}n=0;for(--k;0<=k&&n<m;--k)for(var p=l[k].displayRecords.length-1;0<=p&&n<m;--p){var r=l[k].displayRecords[p],h=this._data.tileDisplayData.displayList.getDPInfoType(r.geometryType);g[h]||(g[h]=r,++n)}}n=f.displayRecords.length;for(k=0;k<n;++k){m=f.displayRecords[k];(l=e.displayRecords[k])?(l.meshData=m.meshData,l.materialKey=
m.materialKey):(l=m.copy(),l.vertexFrom=void 0,l.indexFrom=void 0,e.displayRecords[k]=l);var p=m.geometryType,h=this._data.tileDisplayData.displayList.getDPInfoType(p),r=a.addOrUpdate.tileBufferData.geometries[p],p=r.vertexBuffer,r=r.indexBuffer,u=void 0;g&&(u=g[h]?this._data.tileDisplayData.displayList.splitAfter(g[h]):-1);b=this._dispRecStore.setMeshData(l,m,p,r,u)&&b;g&&null!=l.indexFrom&&null!=l.indexFrom&&(g[h]=l)}}return b};return b}(b.DisplayObject);a.WGLTile=d})},"esri/views/2d/engine/webgl/DirtyMap":function(){define(["require",
"exports","./Utils"],function(d,a,l){function g(a,d,c){if(!a.allDirty)if(null!=a.from&&null!=a.count){var e=Math.min(a.from,d);d=Math.max(a.from+a.count,d+c)-e;a.from=e;a.count=d}else a.from=d,a.count=c}Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._dirties=l.createGeometryData(function(a){return{indices:{from:null,count:null,allDirty:!1}}},function(a,c){return{vertices:{from:null,count:null,allDirty:!1}}})}a.prototype.markAllClean=function(){for(var a=0,c=this._dirties;a<
c.length;a++){var d=c[a];d.data.indices.from=null;d.data.indices.count=null;d.data.indices.allDirty=!1;for(var g in d.buffers)d.buffers[g].data.vertices.from=null,d.buffers[g].data.vertices.count=null,d.buffers[g].data.vertices.allDirty=!1}};a.prototype.markAllDirty=function(){for(var a=0,c=this._dirties;a<c.length;a++){var d=c[a];d.data.indices.allDirty=!0;for(var g in d.buffers)d.buffers[g].data.vertices.allDirty=!0}};a.prototype.forEach=function(a){for(var c=0;c<this._dirties.length;++c){var d=
this._dirties[c],e={},b;for(b in d.buffers){var f=d.buffers[b].data.vertices;if(f.allDirty||null!=f.from&&null!=f.count&&0<f.count)e[b]=f}d=d.data.indices;f=void 0;f=d.allDirty||null!=d.from&&null!=d.count&&0<d.count?{indices:d,vertices:e}:{indices:null,vertices:e};(f.indices||0<Object.keys(f).length)&&a(f,c)}};a.prototype.markDirtyIndices=function(a,c,d){g(this._dirties[a].data.indices,c,d)};a.prototype.markDirtyVertices=function(a,c,d,k){g(this._dirties[a].buffers[c].data.vertices,d,k)};return a}();
a.default=d})},"esri/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","../../../../core/has","./FreeList","./Utils"],function(d,a,l,g,k){function e(a){a=a.getStrides();var d={},b;for(b in a)d[c[b]]=a[b];return d}Object.defineProperty(a,"__esModule",{value:!0});var c=["FILL","LINE","MARKER","TEXT","LABEL"];d=function(){function a(a,b,c,d){this._strides=a;this._displayList=b;this._freeListsAndStorage={};this._dirtyMap=null;this._dirtyMap=c;for(var e in a){this._freeListsAndStorage[e]=
{vtxFreeList:d?new g.FreeList(d):null,idxFreeList:d?new g.FreeList(d):null,vertexBuffers:{},indexBuffer:d?new Uint32Array(d):null};for(var f in a[e])this._freeListsAndStorage[e].vertexBuffers[f]={data:d?k.allocateTypedArrayBuffer(d,a[e][f]):null,stride:a[e][f]}}}a.fromTileData=function(d,b){var f=e(d),h=[0,0,0,0,0],l=[0,0,0,0,0],m=[];d.tileDisplayData.displayObjectRegistry.forEach(function(a){m.push(a)});for(var r=0;r<m.length;r++)for(var w=0,t=m[r].displayRecords;w<t.length;w++){var y=t[w];h[y.geometryType]=
Math.max(h[y.geometryType],y.vertexFrom+y.vertexCount);l[y.geometryType]=Math.max(l[y.geometryType],y.indexFrom+y.indexCount)}b=new a(f,d.tileDisplayData.displayList,b,null);for(f=0;f<d.tileBufferData.geometries.length;++f){var r=h[f],t=l[f],y=d.tileBufferData.geometries[f],w=b._storageFor(c[f]),x=d.tileBufferData.geometries[f].indexBuffer;w.indexBuffer=x;w.idxFreeList=new g.FreeList(x.length);w.idxFreeList.allocate(t);var t=void 0,A;for(A in y.vertexBuffer)y=d.tileBufferData.geometries[f].vertexBuffer[A],
w.vertexBuffers[A].data=y.data,w.vertexBuffers[A].stride=y.stride,x=k.strideToPackingFactor(y.stride),y=y.data.length*x/y.stride,t||(t=y);w.vtxFreeList=new g.FreeList(t);w.vtxFreeList.allocate(r)}return b};a.prototype.delete=function(a){var b=c[a.geometryType];this._freeVertices(b,a.vertexFrom,a.vertexCount);this._freeIndices(b,a.indexFrom,a.indexCount);this._displayList.removeFromList(a);a.vertexFrom=void 0;a.indexFrom=void 0};a.prototype.setMeshData=function(a,b,d,e,g){var f=c[a.geometryType];a.meshData=
null;var h=void 0,l=void 0;void 0===a.vertexFrom?(l=b.vertexCount,h=this._allocateVertices(f,l)):b.vertexCount>a.vertexCount?(this._freeVertices(f,a.vertexFrom,a.vertexCount),l=b.vertexCount,h=this._allocateVertices(f,l)):b.vertexCount===a.vertexCount?(h=a.vertexFrom,l=a.vertexCount):(this._freeVertices(f,a.vertexFrom+b.vertexCount,a.vertexCount-b.vertexCount),h=a.vertexFrom,l=b.vertexCount);var m=!0,p=void 0,u=void 0,A=void 0;void 0===a.indexFrom?(p=g,A=b.indexCount,u=this._allocateIndices(f,A)):
b.indexCount>a.indexCount?(p=this._displayList.removeFromList(a),this._freeIndices(f,a.indexFrom,a.indexCount),A=b.indexCount,u=this._allocateIndices(f,A)):b.indexCount===a.indexCount?(m=!1,u=a.indexFrom,A=a.indexCount):(p=this._displayList.removeFromList(a),this._freeIndices(f,a.indexFrom+b.indexCount,a.indexCount-b.indexCount),u=a.indexFrom,A=b.indexCount);if(-1!==h&&-1!==u){g=this._storageFor(f);k.copyMeshData(h,u,g.vertexBuffers,g.indexBuffer,b,d,e);a.vertexFrom=h;a.indexFrom=u;a.vertexCount=
b.vertexCount;a.indexCount=b.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(a.geometryType,a.indexFrom,a.indexCount);for(var z in d)this._dirtyMap.markDirtyVertices(a.geometryType,z,a.vertexFrom,a.vertexCount)}m&&this._displayList.addToList(a,p);return!0}-1!==h&&this._freeVertices(f,h,l);-1!==u&&this._freeIndices(f,u,A);a.setMeshDataFromBuffers(b,d,e);a.vertexFrom=void 0;a.vertexCount=0;a.indexFrom=void 0;a.indexCount=0;return!1};a.prototype._allocateVertices=function(a,b){a=this._storageFor(a);
b=a.vtxFreeList.allocate(b);return-1===b||.5<a.vtxFreeList.fragmentation?-1:b};a.prototype._freeVertices=function(a,b,c){this._storageFor(a).vtxFreeList.free(b,c)};a.prototype._freeIndices=function(a,b,c){this._storageFor(a).idxFreeList.free(b,c)};a.prototype._allocateIndices=function(a,b){a=this._storageFor(a);b=a.idxFreeList.allocate(b);return-1===b||.5<a.idxFreeList.fragmentation?-1:b};a.prototype._storageFor=function(a){return this._freeListsAndStorage[a]};a.prototype._stridesFor=function(a,b){return this._strides[a][b]};
return a}();a.default=d})},"esri/views/2d/engine/webgl/FreeList":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function a(a){this._largestRange=null;this._parent=a;this._updateLargestRange()}Object.defineProperty(a.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});a.prototype.rangeCreated=function(a){if(!this._largestRange||a.count>this._largestRange.count)this._largestRange=
a};a.prototype.rangeResized=function(a,d,c){if(a===this._largestRange)a.count<c&&this._updateLargestRange();else if(!this._largestRange||a.count>this._largestRange.count)this._largestRange=a};a.prototype.findBestRange=function(a){for(var d=this._parent._freeHead,c=null;null!==d;)d.count>=a&&(!c||d.count-a<c.count-a)&&(c=d),d=d.next;return c};a.prototype.findAdjacentRanges=function(a,d){for(var c=!0,e=!1,g=null,b=this._parent._freeHead;c&&!e;){var f=null!==b?b.from:this._parent._size;a>=(null!==g?
g.from+g.count:0)&&a+d<=f?(c=!1,e=!0):null!==b?(g=b,b=b.next):c=!1}return[g,b]};a.prototype._updateLargestRange=function(){for(var a=null,d=this._parent._freeHead;null!==d;){if(!a||d.count>a.count)a=d;d=d.next}this._largestRange=a};return a}();d=function(){function a(a,d){this._allocated=0;this._size=a;this._freeHead=0<a?{from:0,count:a,prev:null,next:null}:null;this._bookKeeper=d||new l(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}a.prototype.allocate=function(d){var e=this._bookKeeper.findBestRange(d);
if(null===e)return-1;var c=e.from,g=e.count;e.from+=d;e.count-=d;this._bookKeeper.rangeResized(e,c,g);this._allocated+=d;0===e.count&&(d=null!==e.prev?this._freeHead:e.next,a._removeRange(e),this._freeHead=d);return c};a.prototype.free=function(d,e){var c=this._bookKeeper.findAdjacentRanges(d,e),g=c[0],c=c[1];d={from:d,count:e,prev:g,next:c};null!==g&&(g.next=d);null!==c&&(c.prev=d);this._bookKeeper.rangeCreated(d);this._allocated-=e;if(null!==c&&d.from+d.count===c.from){e=d.from;var k=d.count;a._fuse(d,
c);a._removeRange(c);this._bookKeeper.rangeResized(d,e,k);this._bookKeeper.rangeResized(c,void 0,0)}null!==g&&g.from+g.count===d.from&&(e=g.from,k=g.count,a._fuse(g,d),a._removeRange(d),this._bookKeeper.rangeResized(g,e,k),this._bookKeeper.rangeResized(d,void 0,0));this._freeHead=null!==d.prev?this._freeHead:d};Object.defineProperty(a.prototype,"fragmentation",{get:function(){var a=this._size-this._allocated;return 0===a?0:1-this._bookKeeper.largestRange.count/a},enumerable:!0,configurable:!0});a._removeRange=
function(a){null!==a.prev?null!==a.next?(a.prev.next=a.next,a.next.prev=a.prev):a.prev.next=null:null!==a.next&&(a.next.prev=null)};a._fuse=function(a,d){a.count+=d.count;a.next=d.next;d.from+=d.count;d.count=0;null!==d.next&&(d.next.prev=a)};return a}();a.FreeList=d})},"esri/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){void 0===a&&(a=400);this.duration=a;this._value=this._elapsed=this._lastTime=
0;this._finished=!1}Object.defineProperty(a.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._value=this._elapsed=this._lastTime=0};a.prototype.step=function(){var a=performance.now();if(0===this._lastTime)return this._lastTime=a,this._value=0,!0;if(this._elapsed>=this.duration)return!0;this._elapsed+=a-this._lastTime;this._lastTime=a;this._value=Math.min(this._elapsed/this.duration,1);return!1};return a}();a.default=d})},"esri/views/2d/engine/webgl/WGLBuffers":function(){define(["require",
"exports","../../../webgl","./Utils"],function(d,a,l,g){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(a){this.geometryMap=g.createGeometryData(function(c){return{indexBuffer:l.BufferObject.createIndex(a,35044),vao:null}},function(c,d){return{vertexBuffer:l.BufferObject.createVertex(a,g.C_VBO_INFO[d])}})}a.prototype.dispose=function(){for(var a=0;5>a;a++){var c=this.geometryMap[a];if(c){c.data.vao&&c.data.vao.dispose(!1);c.data.indexBuffer&&c.data.indexBuffer.dispose();for(var d in c.buffers)c.buffers[d]&&
c.buffers[d].data.vertexBuffer.dispose()}}};a.prototype.get=function(a){var c=this.geometryMap[a];a={};for(var d in c.buffers)a[d]=c.buffers[d].data.vertexBuffer;return{indexBuffer:c.data.indexBuffer,get vao(){return c.data.vao},set vao(a){c.data.vao=a},vertexBufferMap:a}};a.prototype.has=function(a){return null!=this.geometryMap[a]};a.prototype.upload=function(a,c){var d=this;c.forEach(function(c,b){d._upload(c,b,a)})};a.prototype._upload=function(a,c,d){a.indices&&(a.indices.allDirty?this._uploadIndices(d,
c):null!=a.indices.from&&null!=a.indices.count&&this._uploadIndices(d,c,a.indices.from,a.indices.count));if(a.vertices){a=a.vertices;for(var e in a){var b=a[e];b.allDirty?this._uploadVertices(d,c,e):null!=b.from&&null!=b.count&&this._uploadVertices(d,c,e,b.from,b.count)}}};a.prototype._uploadVertices=function(a,c,d,g,b){var e=this.geometryMap[c];e&&(c=a.geometries[c].vertexBuffer[d])&&(a=c.stride,c=c.data.buffer,e.buffers[d]&&0<c.byteLength&&(null!=g&&null!=b?e.buffers[d].data.vertexBuffer.setSubData(c,
g*a,g*a,(g+b)*a):e.buffers[d].data.vertexBuffer.setData(c)))};a.prototype._uploadIndices=function(a,c,d,g){var b=this.geometryMap[c];b&&(a=a.geometries[c].indexBuffer.buffer,b.data.indexBuffer&&0<a.byteLength&&(null!=d&&null!=g?b.data.indexBuffer.setSubData(a,4*d,4*d,4*(d+g)):b.data.indexBuffer.setData(a)))};return a}();a.default=d})},"esri/views/2d/engine/webgl/shaders/MagnifierPrograms":function(){define(["require","exports","../../../../webgl","./sources/resolver"],function(d,a,l,g){Object.defineProperty(a,
"__esModule",{value:!0});a.magnifier={name:"magnifier",shaders:{vertexShader:g.resolveIncludes("magnifier/magnifier.vert"),fragmentShader:g.resolveIncludes("magnifier/magnifier.frag")},attributes:{a_pos:0}};a.createMagnifierProgram=function(d){return l.createProgram(d,a.magnifier)}})},"esri/views/2d/layers/features/controllers/BaseController":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/Accessor ../../../../../core/Error ../../../../../core/HandleOwner ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../layers/graphics/data/attributeSupport ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FeatureProcessing ../../../../../layers/support/FieldsIndex ../../../../../renderers/support/jsonUtils ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../engine ../support/AttributeStore ../support/pixelBuffering".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C,D,B,E,F){function H(a){var b=a&&a.getSymbols();return"backgroundFillSymbol"in a&&null!=a.backgroundFillSymbol||b.some(function(a){return"simple-fill"===a.type||"picture-fill"===a.type})}function G(a,b,c){function d(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a||"web-style"===a}if("esriGeometryPolygon"===b&&a.labelingInfo)return!0;if("esriGeometryPolygon"!==b)return!1;switch(c.type){case "simple":return d(c.symbol);
case "unique-value":return d(c.defaultSymbol)||c.uniqueValueInfos.some(function(a){return d(a.symbol)});case "class-breaks":return d(c.defaultSymbol)||c.classBreakInfos.some(function(a){return d(a.symbol)});default:return!0}}Object.defineProperty(a,"__esModule",{value:!0});var J=p.getLogger("esri.views.2d.layers.features.controllers.BaseController");a.needsGeometry=function(a,b){switch(a){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryMultipoint":return!0;case "esriGeometryPolygon":return H(b);
default:return J.error(new m("mapview-invalid-type",a+" is not supported")),!1}};d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._processingInMainThread=!1;b._availableFields=[];b._pixelBuffer=0;b.config=null;b.processor=null;b.remoteClient=null;b.service=null;b.tileStore=null;b.filters=Array(B.definitions.MAX_FILTERS);return b}e(b,a);b.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};b.prototype.startup=function(){return k(this,
void 0,void 0,function(){return g(this,function(a){switch(a.label){case 0:return this._initAttributeStore(),[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)];case 1:return a.sent(),[4,n.all([this.attributeStore.updateFilters(this),this.updatePixelBuffer()])];case 2:return a.sent(),[2]}})})};b.prototype.destroy=function(){this.attributeStore.destroy()};Object.defineProperty(b.prototype,"arcadeInfo",{get:function(){return{geometryType:this.service.geometryType,fields:this.service.fields,
spatialReference:this.spatialReference}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fieldsIndex",{get:function(){return new A(this.service.fields)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometryInfo",{get:function(){return{geometryType:this.service.geometryType,hasZ:!1,hasM:!1}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"returnCentroid",{get:function(){return this._get("returnCentroid")||G(this.config,this.service.geometryType,
this.renderer)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"queryInfo",{get:function(){var a=null;if("heatmap"!==this.renderer.type){var b=this.renderer.visualVariables;b&&b.some(function(b){if("size"===b.type&&b.field&&!b.normalizationField)return a=[b.field+" DESC"],!0})}return{returnCentroid:this.returnCentroid,returnGeometry:!0,outFields:this.availableFields,orderByFields:a,definitionExpression:this.config.definitionExpression,gdbVersion:this.config.gdbVersion,historicMoment:this.config.historicMoment}},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderer",{get:function(){return this.config?z.fromJSON(this.config.renderer):(J.error("mapview-controller","Unable to create renderer for undefined configuration"),null)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"processing",{get:function(){return x.fromWorker(this.config.processing)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"availableFields",{get:function(){var a=this,b=this.config.availableFields.filter(function(b){return-1===
a._availableFields.indexOf(b)});return this._availableFields=this._availableFields.concat(b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileStore.tileScheme.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"viewParams",{get:function(){return{viewingMode:"",scale:this.viewState&&this.viewState.scale||1}},enumerable:!0,configurable:!0});b.prototype.getObjectId=function(a){return this.attributeStore.getFeatureId(a)};
b.prototype.getLocalId=function(a){return this.attributeStore.getLocalId(a)};b.prototype.mapValidLocalIds=function(a){var b=this;return a.map(function(a){return b.attributeStore.getLocalId(a)}).filter(function(a){return null!=a})};b.prototype.setViewState=function(a){this._set("viewState",a)};b.prototype.updatePixelBuffer=function(){return k(this,void 0,void 0,function(){var a;return g(this,function(b){switch(b.label){case 0:return[4,F.computePxBuffer(this.renderer,this.service.geometryType)];case 1:return a=
b.sent(),this._pixelBuffer=Math.max(this._pixelBuffer,a),[2]}})})};b.prototype.validateConfig=function(a,b){b=0;for(a=a.filters;b<a.length;b++){var c=a[b];if(u.isSome(c)&&c.where)try{w.validateWhere(this.fieldsIndex,c.where)}catch(P){throw new m("mapview-bad-filter",P.message,{filter:c,missingFields:P.details});}}};b.prototype.onFeatureAdd=function(a){a.localId=this.attributeStore.createLocalId(a.objectId);this.attributeStore.setAttributeData(a.localId,a,this.geometryInfo,this.viewParams)};b.prototype.onFeatureRemove=
function(a){this.attributeStore.freeLocalId(a.objectId)};b.prototype.enableEvent=function(a){};b.prototype._initAttributeStore=function(){var a=this;this.attributeStore=new E.default(c({type:"remote"},"heatmap"===this.renderer.type?{initialize:function(a,b){return n.resolve()},update:function(a,b){return n.resolve()},render:function(){return n.resolve()}}:{initialize:function(b,c){return a.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",b,{signal:c})},update:function(b,c){return a.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",
b,{signal:c})},render:function(){return a.remoteClient.invoke("tileRenderer.featuresView.requestRender")}}))};b.prototype._createQueryEngine=function(a){void 0===a&&(a=this._createFeatureStore());var b=this.queryInfo,c=b.gdbVersion,d=b.historicMoment;return new y.default({definitionExpression:b.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,
gdbVersion:c,historicMoment:null!=d&&new Date(d),featureStore:a,timeInfo:this.service.timeInfo})};b.prototype._createTempQueryEngine=function(a){void 0===a&&(a=this._createFeatureStore(!1));return this._createQueryEngine(a)};b.prototype._createFeatureStore=function(a){void 0===a&&(a=!0);var b={geometryType:this.service.geometryType,hasM:!1,hasZ:!1};if(a){a=this.onFeatureAdd.bind(this);var c=this.onFeatureRemove.bind(this);return new t.default(b,a,c)}return new t.default(b)};b.prototype._createDefaultQuery=
function(a){var b=this,c=new D;c.outSpatialReference=this.spatialReference;var d=a.outFields,e=a.orderByFields,f=this.config,g=f.gdbVersion,h=f.historicMoment,f=f.definitionExpression;this.processing&&(d=d&&d.filter(function(a){return!b.processing.getField(a)}),e=e&&e.filter(function(a){return!b.processing.getField(a)}));d=.75<=d.length/this.service.fields.length?["*"]:d;c.gdbVersion=g;c.historicMoment=null!=h?new Date(h):null;c.outFields=d;c.where=f||"1\x3d1";c.returnGeometry=a.returnGeometry;c.returnCentroid=
a.returnCentroid;c.orderByFields=e;c.start=a.resultOffset;c.num=a.num;return c};b.prototype._createQuery=function(a,b,c,d,e,f){var g=this.service.geometryType;d=this._createDefaultQuery(d);d.maxRecordCountFactor=e;d.returnExceededLimitFeatures=f;d.resultType="tile";d.geometry=a;if(this.service.capabilities.query.supportsQuantization)d.quantizationParameters=new C.default({mode:"view",originPosition:"upper-left",tolerance:c,extent:b}),"esriGeometryPolyline"===g&&(d.maxAllowableOffset=c);else if("esriGeometryPolyline"===
g||"esriGeometryPolygon"===g)d.maxAllowableOffset=c;return d};b.prototype._applyProcessing=function(a,b){var c=this.processing;if(!c)return n.resolve(a);if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:a},b);try{var d=c.process(a,c.options);return d?"then"in d?d:n.resolve(d):n.reject(new m("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(S){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",
{featureSet:a},b)}};b.prototype.hasGeometryFilter=function(){return this.filters.some(function(a){return u.isSome(a)&&!!a.geometry})};l([r.property({readOnly:!0,dependsOn:["config","service","spatialReference"]})],b.prototype,"arcadeInfo",null);l([r.property()],b.prototype,"config",void 0);l([r.property({readOnly:!0,dependsOn:["service"]})],b.prototype,"fieldsIndex",null);l([r.property({readOnly:!0,dependsOn:["service"]})],b.prototype,"geometryInfo",null);l([r.property({readOnly:!0,dependsOn:["config"]})],
b.prototype,"returnCentroid",null);l([r.property({readOnly:!0,dependsOn:["config","availableFields"]})],b.prototype,"queryInfo",null);l([r.property({dependsOn:["config"],readOnly:!0})],b.prototype,"renderer",null);l([r.property()],b.prototype,"processor",void 0);l([r.property({readOnly:!0,dependsOn:["config"]})],b.prototype,"processing",null);l([r.property({readOnly:!0,dependsOn:["config"]})],b.prototype,"availableFields",null);l([r.property({constructOnly:!0})],b.prototype,"remoteClient",void 0);
l([r.property({constructOnly:!0})],b.prototype,"service",void 0);l([r.property({dependsOn:["tileStore"]})],b.prototype,"spatialReference",null);l([r.property({constructOnly:!0})],b.prototype,"tileInfo",void 0);l([r.property({constructOnly:!0})],b.prototype,"tileStore",void 0);l([r.property()],b.prototype,"filters",void 0);l([r.property({readOnly:!0})],b.prototype,"viewState",void 0);l([r.property({readOnly:!0,dependsOn:["viewState"]})],b.prototype,"viewParams",null);return b=l([r.subclass("esri.views.2d.layers.features.controllers.BaseController")],
b)}(r.declared(h,b));a.default=d})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){return function(a){function d(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.handles=new e;return b}l(d,a);d.prototype.destroy=function(){this.destroyed||this.handles.destroy()};g([c.property({readOnly:!0})],d.prototype,"handles",void 0);
return d=g([c.subclass("esri.core.HandleOwner")],d)}(c.declared(k))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this)||this;b._groups=new Map;return b}l(d,a);d.prototype.destroy=function(){this.removeAll()};Object.defineProperty(d.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=
b.length});return a},enumerable:!0,configurable:!0});d.prototype.add=function(a,c){var b=this;if(!this._isHandle(a)&&!Array.isArray(a)&&!e.isCollection(a))return this;var d=this._getOrCreateGroup(c);Array.isArray(a)||e.isCollection(a)?a.forEach(function(a){return b._isHandle(a)&&d.push(a)}):d.push(a);this.notifyChange("size");return this};d.prototype.forEach=function(a,c){if("function"===typeof a)this._groups.forEach(function(b){return b.forEach(a)});else{var b=this._getGroup(a);b&&b.forEach(c)}};
d.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};d.prototype.remove=function(a){if(Array.isArray(a)||e.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};
d.prototype._isHandle=function(a){return a&&!!a.remove};d.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};d.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};d.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};d.prototype._ensureGroupKey=function(a){return a||"_default_"};g([c.property({readOnly:!0})],d.prototype,"size",null);return d=
g([c.subclass("esri.core.Handles")],d)}(c.declared(k))})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/extendsHelper @dojo/framework/shim/Map ../../../core/Error ../../../core/Evented ../../../core/has ../../../core/Logger ../../../core/maybe ../../../core/libs/rbush/rbush ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w){Object.defineProperty(a,"__esModule",{value:!0});var t=[],y=b.getLogger("esri.layers.graphics.data.FeatureStore"),x={minX:0,minY:0,maxX:0,maxY:0};d=function(){function a(a,b,c){this._geometryInfo=a;this._onFeatureAdd=b;this._onFeatureRemove=c;this._featuresById=new e.default;this._boundsByFeature=new e.default;this._featuresByBounds=new e.default;this._index=p(9,m("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]",
"[2]","[3]"]);this.events=new h;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}Object.defineProperty(a.prototype,"geometryType",{get:function(){return this._geometryInfo.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this._geometryInfo.hasM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasZ",{get:function(){return this._geometryInfo.hasZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",{get:function(){if(!this.numFeatures)return null;var a=n.create(n.NEGATIVE_INFINITY);this._boundsByFeature.forEach(function(b){b&&(a[0]=Math.min(b[0],a[0]),a[1]=Math.min(b[1],a[1]),a[2]=Math.max(b[2],a[2]),a[3]=Math.max(b[3],a[3]))});return a},enumerable:!0,configurable:!0});a.prototype.add=function(a){this._add(a,t);this._index.load(t);this._emitChanged();t.length=
0};a.prototype.addMany=function(a){for(var b=0;b<a.length;b++)this._add(a[b],t);this._index.load(t);this._emitChanged();t.length=0};a.prototype.clear=function(){this._featuresById.clear();this._boundsByFeature.clear();this._featuresByBounds.clear();this._index.clear();this._emitChanged()};a.prototype.removeById=function(a){var b=this._featuresById.get(a);if(!b)return null;var c=this._boundsByFeature.get(b);c&&(this._index.remove(c),this._featuresByBounds.delete(c));this._boundsByFeature.delete(b);
this._featuresById.delete(a);this._emitChanged();return b};a.prototype.removeIf=function(a,b){var c=this;this._featuresById.forEach(function(d,e){b(d)&&(c._remove(d),a.push(d))});this._emitChanged()};a.prototype.removeManyById=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this._featuresById.get(c);if(d){var e=this._boundsByFeature.get(d);e&&(this._index.remove(e),this._featuresByBounds.delete(e));this._boundsByFeature.delete(d)}this._featuresById.delete(c)}this._emitChanged()};a.prototype.forEachBounds=
function(a,b,c){for(var d=0;d<a.length;d++){var e=this._boundsByFeature.get(a[d]);e&&b(u.fromRect(c,e))}};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.has=function(a){return this._featuresById.has(a)};a.prototype.forEach=function(a){this._featuresById.forEach(function(b){return a(b)})};a.prototype.forEachInBounds=function(a,b){var c=0,d=this._index;x.minX=a[0];x.minY=a[1];x.maxX=a[2];x.maxY=a[3];for(a=d.search(x);c<a.length;c++)b(this._featuresByBounds.get(a[c]))};
a.prototype.transferById=function(a,b){if(b=this._featuresById.get(b))this._remove(b),a.add(b),this._emitChanged()};a.prototype.transferByIds=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=this._featuresById.get(b[d]);e&&(this._remove(e),c.push(e))}a.addMany(c);this._emitChanged()};a.prototype.transferIdRange=function(a,b,c){for(var d=[];b<c;b++){var e=this._featuresById.get(b);e&&(this._remove(e),d.push(e))}a.addMany(d);this._emitChanged()};a.prototype.transferIf=function(a,b){var c=this,d=
[];this._featuresById.forEach(function(a,e){b(a)&&(c._remove(a),d.push(a))});a.addMany(d);this._emitChanged()};a.prototype.transferAll=function(a){var b=this,c=[];this._featuresById.forEach(function(a,d){b._remove(a);c.push(a)});a.addMany(c);this._emitChanged()};a.prototype._emitChanged=function(){this.events.emit("changed",void 0)};a.prototype._add=function(a,b){if(a){var d=a.objectId;if(null==d)y.error(new c("featurestore:invalid-feature","feature id is missing",{feature:a}));else{var e=this._featuresById.get(d),
g;e?(g=this._boundsByFeature.get(e),a.localId=e.localId,g&&(this._index.remove(g),this._boundsByFeature.delete(e),this._featuresByBounds.delete(g))):f.isSome(this._onFeatureAdd)&&this._onFeatureAdd(a);a.geometry?(g=r.getBoundsOptimizedGeometry(g||n.create(),a.geometry,this._geometryInfo.hasZ,this._geometryInfo.hasM),this._boundsByFeature.set(a,g),this._featuresByBounds.set(g,a),this._featuresById.set(d,a),b.push(g)):(this._boundsByFeature.set(a,null),this._featuresById.set(d,a))}}};a.prototype._remove=
function(a){var b;if(a){f.isSome(this._onFeatureRemove)&&this._onFeatureRemove(a);if(b=this._boundsByFeature.get(a))this._index.remove(b),this._boundsByFeature.delete(a),this._featuresByBounds.delete(b);this._featuresById.delete(a.objectId)}};return a}();a.default=d})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["require","exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});
a.optimizedFeatureQueryEngineAdapter={getObjectId:function(a){return a.objectId},getAttributes:function(a){return a.attributes},getAttribute:function(a,c){return a.attributes[c]},cloneWithGeometry:function(a,c){return new g.default(c,a.attributes,null,a.objectId)},getGeometry:function(a){return a.geometry},getCentroid:function(a,c){a.centroid||(a.centroid=l.getCentroidOptimizedGeometry(new k.default,a.geometry,c.hasZ,c.hasM));return a.centroid}};a.default=a.optimizedFeatureQueryEngineAdapter})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),
function(d,a,l,g,k,e,c,h,m){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);d=b;b.fromWorker=function(a){if(!a)return null;a=JSON.parse(a);var b=new d;b.fields=a.fields&&a.fields.map(function(a){return h.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});
b.prototype.clone=function(){return new d(e.clone({fields:this.fields,options:this.options,process:this.process}))};b.prototype.getField=function(a){return m.getField(this.fields,a)};b.prototype.refresh=function(){this.notifyChange("version")};b.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};
var d;g([c.property({type:[h]})],b.prototype,"fields",void 0);g([c.property()],b.prototype,"options",void 0);g([c.property()],b.prototype,"process",void 0);g([c.property({readOnly:!0,dependsOn:["process","options","fields"]})],b.prototype,"version",null);return b=d=g([c.subclass("esri.layers.support.FeatureProcessing")],b)}(c.declared(k))})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../geometry ../../symbols ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../symbols/support/jsonUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){var y=new m.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=new m.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});d=function(a){function b(b){b=a.call(this,b)||this;b.cacheHint=!1;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=
null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnCentroid=!1;b.returnDistinctValues=!1;b.returnExceededLimitFeatures=!0;b.returnGeometry=!1;b.returnQueryGeometry=!1;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units=null;b.where=null;return b}
l(b,a);d=b;b.prototype.castDatumTransformation=function(a){return"number"===typeof a||"object"===typeof a?a:null};b.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};b.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};b.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=
this.num||10;b.where="1\x3d1"};b.prototype.writeWhere=function(a,b,c){b.where=a||"1\x3d1"};b.prototype.clone=function(){return new d(f.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,
maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,
returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var d;b.MAX_MAX_RECORD_COUNT_FACTOR=5;g([p.property({type:Boolean,json:{write:!0,default:!1}})],b.prototype,
"cacheHint",void 0);g([p.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);g([p.cast("datumTransformation")],b.prototype,"castDatumTransformation",null);g([p.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],b.prototype,"distance",void 0);g([p.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);g([p.property({types:e.geometryTypes,json:{read:n.fromJSON,write:!0}})],b.prototype,"geometry",void 0);g([p.property({type:Number,
json:{write:!0}})],b.prototype,"geometryPrecision",void 0);g([p.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);g([p.property({type:String,json:{write:!0}})],b.prototype,"having",void 0);g([p.property({type:Date})],b.prototype,"historicMoment",void 0);g([p.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);g([p.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);g([p.property({type:Number,cast:function(a){return 1>
a?1:a>d.MAX_MAX_RECORD_COUNT_FACTOR?d.MAX_MAX_RECORD_COUNT_FACTOR:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],b.prototype,"maxRecordCountFactor",void 0);g([p.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",void 0);g([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);g([p.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);g([p.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",
void 0);g([p.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);g([p.property({type:k.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);g([p.property({type:[t],json:{write:!0}})],b.prototype,"outStatistics",void 0);g([p.property({json:{write:!0}})],b.prototype,"parameterValues",void 0);g([p.writer("parameterValues")],b.prototype,"writeParameterValues",null);g([p.property({types:c.symbolTypes,json:{read:r.read,
write:!0}})],b.prototype,"pixelSize",void 0);g([p.property({type:w.default,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);g([p.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);g([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);g([p.property({type:String,json:{write:!0}})],b.prototype,"resultType",
void 0);g([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnCentroid",void 0);g([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnDistinctValues",void 0);g([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);g([p.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",void 0);g([p.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnQueryGeometry",void 0);g([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnM",void 0);g([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnZ",void 0);g([p.property({json:{write:!0}})],b.prototype,"source",void 0);g([p.property({type:String,json:{read:{source:"spatialRel",reader:y.read},write:{target:"spatialRel",
writer:y.write}}})],b.prototype,"spatialRelationship",void 0);g([p.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);g([p.writer("start"),p.writer("num")],b.prototype,"writeStart",null);g([p.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);g([p.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);g([p.property({type:h,json:{write:!0}})],b.prototype,"timeExtent",void 0);g([p.property({type:String,json:{read:x.read,write:{writer:x.write,
overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],b.prototype,"units",void 0);g([p.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],b.prototype,"where",void 0);g([p.writer("where")],b.prototype,"writeWhere",null);return b=d=g([p.subclass("esri.tasks.support.Query")],b)}(p.declared(b));d.from=u.default(d);return d})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./layers/support/timeUtils".split(" "),
function(d,a,l,g,k,e,c){return function(a){function d(b){b=a.call(this)||this;b.end=null;b.start=null;return b}l(d,a);b=d;d.prototype.readEnd=function(a,b){return null!=b.end?new Date(b.end):null};d.prototype.writeEnd=function(a,b,c){b.end=a?a.getTime():null};d.prototype.readStart=function(a,b){return null!=b.start?new Date(b.start):null};d.prototype.writeStart=function(a,b,c){b.start=a?a.getTime():null};d.prototype.clone=function(){return new b({end:this.end,start:this.start})};d.prototype.intersection=
function(a){if(!a)return null;var c=this.start?this.start.getTime():-Infinity,d=this.end?this.end.getTime():Infinity,e=a.start?a.start.getTime():-Infinity;a=a.end?a.end.getTime():Infinity;var f,g;e>=c&&e<=d?f=e:c>=e&&c<=a&&(f=c);d>=e&&d<=a?g=d:a>=c&&a<=d&&(g=a);return isNaN(f)||isNaN(g)?null:(c=new b,c.start=-Infinity===f?null:new Date(f),c.end=Infinity===g?null:new Date(g),c)};d.prototype.offset=function(a,d){var e=new b,f=this.start,g=this.end;f&&(e.start=c.offsetDate(f,a,d));g&&(e.end=c.offsetDate(g,
a,d));return e};d.prototype.equals=function(a){return a?this.start.getTime()===a.start.getTime()&&this.end.getTime()===a.end.getTime():!1};var b;g([e.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0);g([e.reader("end")],d.prototype,"readEnd",null);g([e.writer("end")],d.prototype,"writeEnd",null);g([e.property({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0);g([e.reader("start")],d.prototype,"readStart",null);g([e.writer("start")],d.prototype,"writeStart",
null);return d=b=g([e.subclass("esri.TimeExtent")],d)}(e.declared(k))})},"esri/layers/support/timeUtils":function(){define(["require","exports","../../TimeExtent","../../core/compilerUtils","../../core/jsonMap"],function(d,a,l,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},
hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};a.timeUnitKebabDictionary=k.strict()({esriTimeUnitsMilliseconds:"milliseconds",
esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});a.offsetDate=function(a,d,g){a=new Date(a.getTime());d&&g&&(g=e[g],a[g.setter](a[g.getter]()+d*g.multiplier));return a};a.combinedViewLayerTimeExtentProperty={type:l,dependsOn:["view?.timeExtent","layer?.timeInfo",
"layer?.timeExtent","layer?.useViewTime"],readOnly:!0,get:function(){if(!this.layer||!this.layer.timeInfo)return null;var a=this.view?this.view.timeExtent:null,a=this.layer.useViewTime?a:this.layer.timeExtent,d=this._get("timeExtent");return a&&a.equals(d)?d:a}};a.millisecondsPerTimeUnit={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};a.truncateDate=function(c,d){switch(d){case "milliseconds":return new Date(c.getTime());
case "seconds":return new Date(c.getTime()-c.getTime()%a.millisecondsPerTimeUnit.seconds);case "minutes":return new Date(c.getTime()-c.getTime()%a.millisecondsPerTimeUnit.minutes);case "hours":return new Date(c.getTime()-c.getTime()%a.millisecondsPerTimeUnit.hours);case "days":return new Date(c.getUTCFullYear(),c.getMonth(),c.getDate());case "weeks":return new Date(c.getUTCFullYear(),c.getMonth(),c.getDate()-c.getDay());case "months":return new Date(c.getUTCFullYear(),c.getMonth(),1);case "years":return new Date(c.getUTCFullYear(),
0,1);case "decades":return new Date(c.getUTCFullYear()-c.getUTCFullYear()%10,0,1);case "centuries":return new Date(c.getUTCFullYear()-c.getUTCFullYear()%100,0,1);default:return g.neverReached(d),null}};a.appendDate=function(a,d){a=new Date(a.getTime());switch(d.unit){case "milliseconds":a.setUTCMilliseconds(a.getUTCMilliseconds()+d.value);break;case "seconds":a.setSeconds(a.getSeconds()+d.value);break;case "minutes":a.setMinutes(a.getMinutes()+d.value);break;case "hours":a.setHours(a.getHours()+d.value);
break;case "days":a.setDate(a.getDate()+d.value);break;case "weeks":a.setDate(a.getDate()+7*d.value);break;case "months":a.setMonth(a.getMonth()+d.value);break;case "years":a.setFullYear(a.getFullYear()+d.value);break;case "decades":a.setFullYear(a.getFullYear()+10*d.value);break;case "centuries":a.setFullYear(a.getFullYear()+100*d.value);break;default:g.neverReached(d.unit)}return a}})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e){return function(a){function c(b){b=a.call(this)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}l(c,a);d=c;c.prototype.clone=function(){return new d({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
var d;g([e.property({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"maxRecordCount",void 0);g([e.property({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0);g([e.property({type:String,json:{write:!0}})],c.prototype,"statisticType",
void 0);return c=d=g([e.subclass("esri.tasks.support.StatisticDefinition")],c)}(e.declared(k))})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../layers/support/FieldsIndex ../../../../../support/arcadeOnDemand ../../../../webgl ../../../engine ../../../arcade/utils ../tileRenderers/support/visualVariablesUtils @dojo/framework/shim/Map @dojo/framework/shim/Promise".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w){Object.defineProperty(a,"__esModule",{value:!0});var t=c.getLogger("esri.views.layers.2d.features.support.AttributeStore"),y=n.debug.createDebugLogger(n.debug.DEBUG_ATTR_UPDATES,t),x=function(a,b){return function(c,d,e){var f;try{f=b(c,d,e)}catch(K){f=NaN}return(null===f||isNaN(f)||Infinity===f)&&a||f}},A=e("esri-shared-array-buffer"),z=e("esri-webgl-texture-float"),C=e("esri-webgl-max-texture-size"),D=function(){function a(a,b,c,d){this.texelSize=4;this.descriptors=
[];var e=d.pixelType;d=d.layout;this.data=this._initData(e,c,a,b);this.pixelType=e;this.layout=d;this._resetRange();this._shared=a;this._ctype=b}Object.defineProperty(a.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});a.prototype.getData=function(a,b){return this.data[a*this.texelSize+b]};a.prototype.setData=function(a,b,c){0===(this.layout&1<<b)?t.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[a*this.texelSize+
b]=c,this.dirtyStart=Math.min(this.dirtyStart,a),this.dirtyEnd=Math.max(this.dirtyEnd,a))};a.prototype.expand=function(a){a=this._initData(this.pixelType,a,this._shared,this._ctype);a.set(this.data);this.data=a};a.prototype.toMessage=function(){var a=this.dirtyStart,b=this.dirtyEnd,c=this.texelSize;if(a>b)return null;this._resetRange();var d=!this._shared&&"local"!==this._ctype,e=this.pixelType,f=this.layout;if(!this.data.slice){if(!d)return{start:a,end:b,data:null,pixelType:e,layout:f};c=new (n.Utils.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,
a*c,(b+1)*c));return{start:a,end:b,data:c,pixelType:e,layout:f}}c=d&&this.data.slice(a*c,(b+1)*c)||null;return{start:a,end:b,data:c,pixelType:e,layout:f}};a.prototype._initData=function(a,b,c,d){c=c&&"local"!==d?SharedArrayBuffer:ArrayBuffer;a=n.Utils.getPixelArrayCtor(a);b=new a(new c(b*b*4*a.BYTES_PER_ELEMENT));for(a=0;a<b.length;a+=4)b[a+1]=255;return b};a.prototype._resetRange=function(){this.dirtyStart=this.data.length/4;this.dirtyEnd=0};return a}();e=function(){function a(a){this._attributeComputeMap=
new Map;this._blocks=[];this._idMap=new Map;this._localToObjectId=new Map;this._filters=Array(n.definitions.MAX_FILTERS);this._freeList=[];this._abortController=b.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idCounter=0;var c=z?5126:5121;y("Creating AttributeStore "+(A?"with":"without")+" shared memory");this._client=a;this._blockDescriptors=[{pixelType:5121,layout:7},{pixelType:c,layout:15},{pixelType:c,layout:15}];this._blocks=this._blockDescriptors.map(function(a){return null})}
a.prototype.destroy=function(){this._abortController.abort()};Object.defineProperty(a.prototype,"hasScaleExpr",{get:function(){return this._hasScaleExpr},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_signal",{get:function(){return this._abortController.signal},enumerable:!0,configurable:!0});a.prototype.createLocalId=function(a){if(!this._idMap.has(a)){var b=this._getFreeId();this._idMap.set(a,-1===b?0:b);this._localToObjectId.set(b,a)}return this._idMap.get(a)};a.prototype.freeLocalId=
function(a){var b=this._idMap.get(a);this._idMap.delete(a);this._localToObjectId.delete(b);this._freeList.push(b)};a.prototype.getFeatureId=function(a){return this._localToObjectId.get(a)};a.prototype.getLocalId=function(a){return this._idMap.has(a)?this._idMap.get(a):null};a.prototype.updateFilters=function(a){return g(this,void 0,void 0,function(){var c,d,e,f,g,h,k=this;return l(this,function(l){switch(l.label){case 0:return c=a.config,d=a.service,e=a.spatialReference,f=c.filters,g=c.definitionExpression,
h=f.map(function(b,c){return k._updateFilter(a,b,c,d,g,e)}),[4,b.all(h)];case 1:return l.sent(),[2]}})})};a.prototype.setAttributeBindings=function(a,b){return g(this,void 0,void 0,function(){return l(this,function(c){this._hasScaleExpr=!1;switch(a.type){case "simple":case "class-breaks":case "unique-value":case "dictionary":return[2,this._bindVVEvaluators(a.visualVariables,b)];case "dot-density":return[2,this._bindDDEvaluators(a.attributes,b)];case "heatmap":break;default:t.error(new k("attribute-store",
"Found invalid renderer type: "+a))}return[2]})})};a.prototype.setData=function(a,b,c,d){this._getBlock(b).setData(a,c,d)};a.prototype.setAttributeData=function(a,b,c,d){var e=this;this._getBlock(0).setData(a,0,this._getFilterFlags(b));var f=z?1:2;this._attributeComputeMap.forEach(function(g,k){var l=k*f%4;k=e._getBlock(Math.floor(k*f/4)+1);g=g(b,{$view:d},c);if(z)k.setData(a,l,g);else if(g===n.definitions.NAN_MAGIC_NUMBER)k.setData(a,l,255),k.setData(a,l+1,255);else{g=h.clamp(Math.round(g),-32767,
32766)+32768;var m=(g&65280)>>8;k.setData(a,l,g&255);k.setData(a,l+1,m)}})};a.prototype.sendUpdates=function(){var a=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=b.createResolver(),this._nextUpdate.promise;var c={blocks:this._blocks.map(function(a){return m.isSome(a)?a.toMessage():null})};return this._currUpdate=this._createResources().then(function(){var b=a._client.update(c,a._signal).then(function(){a._currUpdate=null;if(a._nextUpdate){var b=
a._nextUpdate;a._nextUpdate=null;a.sendUpdates().then(function(){return b.resolve()})}});a._client.render();return b})};a.prototype._createResources=function(){var a=this;if(m.isSome(this._createResourcesPromise))return this._createResourcesPromise;y("Initializing AttributeStore");var b={shared:A||"local"===this._client.type,size:this._size,blocks:m.mapMany(this._blocks,function(a){return{buffer:a.buffer,pixelType:a.pixelType}})};this._createResourcesPromise=b=this._client.initialize(b,this._signal);
b.then(function(){if(m.isNone(a._createResourcesPromise))return a._createResources()});return b};a.prototype._getBlock=function(a){var b=this._blocks[a];if(m.isSome(b))return b;y("Initializing AttributeBlock at index "+a);b=new D(A,this._client.type,this._size,this._blockDescriptors[a]);this._blocks[a]=b;this._createResourcesPromise=null;return b};a.prototype._expand=function(){if(this._size<C){var a=this._size<<=1;y("Expanding block size to",a,this._blocks);m.forEachSome(this._blocks,function(b){return b.expand(a)});
this._createResourcesPromise=null;this._size=a;return 0}t.error(new k("mapview-limitations","Maximum number of onscreen features exceeded."));return-1};a.prototype._getFreeId=function(){return this._freeList.length?this._freeList.pop():this._idCounter>=this._size*this._size&&this._expand()?-1:this._idCounter++};a.prototype._updateFilter=function(a,b,c,d,e,f){return g(this,void 0,void 0,function(){var g,h,k,n,p,r,u,t,x,w=this;return l(this,function(l){switch(l.label){case 0:g=this._filters[c];h=m.isSome(g)&&
g.hash;if(h===JSON.stringify(b))return[2];k=1<<c;return m.isNone(b)?(this._filters[c]=null,this._idMap.forEach(function(a){var b=w._getBlock(0).getData(a,0);w._getBlock(0).setData(a,0,b|k)}),[2]):[4,a.queryObjectIds(b)];case 1:return n=l.sent(),b.hiddenIds&&b.hiddenIds.length&&(n=n.filter(function(a){return-1===b.hiddenIds.indexOf(a)})),p=n.map(function(a){return w._idMap.get(a)}),[4,this._getFilter(c,d)];case 2:r=l.sent();r.update(b,e,f);this._idMap.forEach(function(a){var b=w._getBlock(0).getData(a,
0);w._getBlock(0).setData(a,0,b&~k)});for(u=0;u<p.length;u++)t=p[u],null!=t&&(x=this._getBlock(0).getData(t,0),this._getBlock(0).setData(t,0,x|k));return[2]}})})};a.prototype._getFilter=function(a,b){return g(this,void 0,void 0,function(){var c,e,g;return l(this,function(h){switch(h.label){case 0:return c=this._filters[a],m.isSome(c)?[2,c]:[4,new Promise(function(a,b){d(["../../../../../layers/graphics/data/FeatureFilter"],a,b)})];case 1:return e=h.sent().default,g=new e({geometryType:b.geometryType,
hasM:!1,hasZ:!1,timeInfo:b.timeInfo,fieldsIndex:new f(b.fields)}),this._filters[a]=g,[2,g]}})})};a.prototype._getFilterFlags=function(a){for(var b=0,c=0;c<this._filters.length;c++)var d=this._filters[c],d=m.isNone(d)||d.check(a),b=b|(d?1:0)<<c;return b};a.prototype._bindVVEvaluators=function(a,c){return g(this,void 0,void 0,function(){var d,e=this;return l(this,function(f){switch(f.label){case 0:this._attributeComputeMap.clear();if(!m.isSome(a))return[3,2];d=b.all(a.map(function(a){return g(e,void 0,
void 0,function(){var b,d;return l(this,function(e){switch(e.label){case 0:return b=n.Utils.getVVType(a.type),[4,this._createGetValueFunction(a,c)];case 1:return d=e.sent(),m.isSome(d)&&this._attributeComputeMap.set(b,d),[2]}})})}));return[4,d];case 1:f.sent(),f.label=2;case 2:return[2]}})})};a.prototype._bindDDEvaluators=function(a,c){return g(this,void 0,void 0,function(){var d,e,f,g=this;return l(this,function(h){switch(h.label){case 0:return this._attributeComputeMap.clear(),a.length>n.definitions.DOT_DENSITY_MAX_FIELDS&&
t.warn("mapview-invalid-value","DotDensityRenderer supports a maximum of "+n.definitions.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+a.length),[4,b.all(a.map(function(a){return g._createNormalizedFunction(a,c)}))];case 1:d=h.sent().map(function(a){return x(0,a)});for(e=0;e<n.definitions.DOT_DENSITY_MAX_FIELDS;e++)(f=e<a.length&&d[e])?this._attributeComputeMap.set(e,f):this._attributeComputeMap.has(e)&&this._attributeComputeMap.delete(e);return[2]}})})};a.prototype._createGetValueFunction=function(a,
b){return g(this,void 0,void 0,function(){var c,d,e,f,g,h,k;return l(this,function(l){switch(l.label){case 0:if("size"!==a.type)return[3,2];c=n.getTypeOfSizeVisualVariable(a);if(c===n.enums.WGLVVFlag.SIZE_SCALE_STOPS)return[2,null];e=(d=c===n.enums.WGLVVFlag.SIZE_UNIT_VALUE)&&function(b){return w.getVisualVariableSizeValueRepresentationRatio(b,a.valueRepresentation)};f=x;g=[n.definitions.NAN_MAGIC_NUMBER];return[4,this._createNormalizedFunction(a,b,e)];case 1:return[2,f.apply(void 0,g.concat([l.sent()]))];
case 2:return h=x,k=[n.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(a,b)];case 3:return[2,h.apply(void 0,k.concat([l.sent()]))]}})})};a.prototype._createNormalizedFunction=function(a,b,c){return g(this,void 0,void 0,function(){var d,e,f;return l(this,function(g){switch(g.label){case 0:if(d=a.field){if("string"===typeof d)return(e=a.normalizationField)?[2,function(a){if(a.attributes[d]&&a.attributes[e])return a=a.attributes[d]/a.attributes[e],c?c(a):a}]:[2,c?function(a){return c(a.attributes[d])}:
function(a){return a.attributes[d]}];t.error(new k("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof d));return[2,function(a){}]}if(!a.valueExpression)return[3,2];this._hasScaleExpr=this._hasScaleExpr||-1!==a.valueExpression.indexOf("scale");return[4,p.createVVExpression(a.valueExpression,b.spatialReference,b.fields)];case 1:return f=g.sent(),[2,r.callWithOptimizedFeature.bind(null,f)];case 2:return t.error("Unable to create a normalized function for visual variable: "+
a),[2,function(a){}]}})})};return a}();a.default=e})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define(["require","exports","../../../../../../core/screenUtils","../../../../engine","../../../../../3d/layers/support/FastSymbolUpdates"],function(d,a,l,g,k){function e(a){return{value:a.value,size:l.toPt(a.size)}}function c(a){return a.map(function(a){return e(a)})}function h(a){return"string"===typeof a||"number"===typeof a?l.toPt(a):{type:"size",expression:a.expression,
stops:c(a.stops)}}function m(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(g.Utils.isString(a.field))if(a.stops){if(8<a.stops.length)return null;var c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.values[a]=d.value;b.opacities[a]=d.opacity}}else return null;else if(a.stops&&0<=a.stops.length)for(c=a.stops&&0<=a.stops.length&&a.stops[0].opacity,a=0;8>a;a++)b.values[a]=Infinity,b.opacities[a]=c;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});
var b=g.enums.WGLVVFlag;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=e;a.normalizeSizeStops=c;a.normalizeSizeElement=h;a.getVisualVariablesFields=function(a){var b=a&&0<a.length?{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var d=a&&0<a.length?{}:null,e=d?{}:null;if(!d)return{vvFields:d,
vvRanges:e};for(var f=0;f<a.length;f++){var r=a[f],w=r.type;r.field&&(d[w]=r.field);if("size"===w){e.size||(e.size={});var t=r;switch(g.getTypeOfSizeVisualVariable(t)){case b.SIZE_MINMAX_VALUE:e.size.minMaxValue={minDataValue:t.minDataValue,maxDataValue:t.maxDataValue,minSize:h(t.minSize),maxSize:h(t.maxSize)};break;case b.SIZE_SCALE_STOPS:e.size.scaleStops={stops:c(t.stops)};break;case b.SIZE_FIELD_STOPS:for(var r=[],w=[],t=c(t.stops),y=t.length,x=0;6>x;x++){var A=t[Math.min(x,y-1)];r.push(A.value);
w.push(l.pt2px(A.size))}e.size.fieldStops={values:r,sizes:w};break;case b.SIZE_UNIT_VALUE:e.size.unitValue={unit:t.valueUnit,valueRepresentation:t.valueRepresentation}}}else if("color"===w)for(r=k.convertVisualVariables([r],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),e.color=r.color,x=0;32>x;x+=4)g.color.premultiplyAlpha(e.color.colors,x,!0);else"opacity"===w?e.opacity=m(r):"rotation"===w&&(e.rotation={type:r.rotationType})}return{vvFields:d,vvRanges:e}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){function u(a){return null!==a&&void 0!==a}function n(a){return"number"===typeof a}function r(a){return"string"===typeof a}function w(a,b){a&&a.push(b)}function t(a,b,c,d,e){var g=a.minSize,h=a.maxSize;if(a.expression)return w(e,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=d.symbolSize[c],b.minSize[c]=a,b.maxSize[c]=a,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(u(a.field)){if(u(a.stops)){if(2===a.stops.length&&
n(a.stops[0].size)&&n(a.stops[1].size))return y(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,b,c),b.type[c]=1,!0;w(e,"Could not convert size info: stops only supported with 2 elements");return!1}if(n(g)&&n(h)&&u(a.minDataValue)&&u(a.maxDataValue))return y(g,h,a.minDataValue,a.maxDataValue,b,c),b.type[c]=1,!0;if(null!=f.meterIn[a.valueUnit])return b.minSize[c]=-Infinity,b.maxSize[c]=Infinity,b.offset[c]=0,b.factor[c]=1/f.meterIn[a.valueUnit],b.type[c]=1,!0;if("unknown"===a.valueUnit)return w(e,
"Could not convert size info: proportional size not supported"),!1;w(e,"Could not convert size info: scale-dependent size not supported");return!1}if(!u(a.field)){if(a.stops&&a.stops[0]&&n(a.stops[0].size))return b.minSize[c]=a.stops[0].size,b.maxSize[c]=a.stops[0].size,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(n(g))return b.minSize[c]=g,b.maxSize[c]=g,b.offset[c]=g,b.factor[c]=0,b.type[c]=1,!0}w(e,"Could not convert size info: unsupported variant of sizeInfo");return!1}function y(a,
b,c,d,e,f){d=0<Math.abs(d-c)?(b-a)/(d-c):0;e.minSize[f]=0<d?a:b;e.maxSize[f]=0<d?b:a;e.offset[f]=a-c*d;e.factor[f]=d}function x(a,b,c,d){if(a.normalizationField||a.valueRepresentation)return w(d,"Could not convert size info: unsupported property"),null;var e=a.field;if(null!=e&&!r(e))return w(d,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=
a.field;else if(a.field!==b.size.field)return w(d,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(e=t(a,b.size,0,c,d))?b:null;case "height":return(e=t(a,b.size,2,c,d))?b:null;case "depth":return(e=t(a,b.size,1,c,d))?b:null;case "width-and-depth":return(e=t(a,b.size,0,c,d))&&t(a,b.size,1,c,d),e?b:null;case null:case void 0:case "all":return(e=(e=(e=t(a,b.size,0,c,d))&&t(a,b.size,1,c,d))&&t(a,b.size,2,c,d))?b:null;default:return w(d,'Could not convert size info: unknown axis "'+
a.axis+'""'),null}}function A(a,b,c){for(var d=0;3>d;++d){var e=b.unitInMeters;1===a.type[d]&&(e*=b.modelSize[d],a.type[d]=2);a.minSize[d]/=e;a.maxSize[d]/=e;a.offset[d]/=e;a.factor[d]/=e}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==a.type[2])b=2;else return w(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===a.type[d]&&(a.minSize[d]=a.minSize[b],a.maxSize[d]=a.maxSize[b],a.offset[d]=a.offset[b],a.factor[d]=a.factor[b],a.type[d]=a.type[b]);return!0}function z(a,
b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function C(a,b,c){if(a.normalizationField)return w(c,"Could not convert color info: unsupported property"),null;if(r(a.field))if(a.stops){if(8<a.stops.length)return w(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.color.values[a]=d.value;
z(b.color.colors,a,d.color)}}else return w(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length)for(c=a.stops&&0<=a.stops.length&&a.stops[0].color,b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.color.values[a]=Infinity,z(b.color.colors,a,c);else return w(c,"Could not convert color info: no field and no colors/stops"),null;return b}function D(a,b,c){if(a.normalizationField)return w(c,
"Could not convert opacity info: unsupported property"),null;if(r(a.field))if(a.stops){if(8<a.stops.length)return w(c,"Could not convert opacity info: too many opacity stops"),null;b.opacity={field:a.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.opacity.values[a]=d.value;b.opacity.opacityValues[a]=d.opacity}}else return w(c,"Could not convert opacity info: missing stops or opacities"),null;else if(a.stops&&0<=a.stops.length)for(c=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,b.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.opacity.values[a]=Infinity,b.opacity.opacityValues[a]=c;else return w(c,"Could not convert opacity info: no field and no opacities/stops"),null;return b}function B(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function E(a,b,c){if(!r(a.field))return w(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return w(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return B(a,b.rotation,0,c),b;case "roll":return B(a,b.rotation,1,c),b;case null:case void 0:case "heading":return B(a,b.rotation,2,c),b;default:return w(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function F(a,b,c){if(!a)return null;var d=!b.supportedTypes||!!b.supportedTypes.size,e=!b.supportedTypes||!!b.supportedTypes.color,f=!b.supportedTypes||!!b.supportedTypes.rotation,g=!!b.supportedTypes&&!!b.supportedTypes.opacity,h=a.reduce(function(a,h){if(!a)return a;if(h.valueExpression)return w(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(h.type){case "size":return d?x(h,a,b,c):a;case "color":return e?C(h,a,c):a;case "opacity":return g?D(h,a,
c):a;case "rotation":return f?E(h,a,c):a;default:return l.neverReached(h),null}},{size:null,color:null,opacity:null,rotation:null});return 0<a.length&&h&&!h.size&&!h.color&&!h.opacity&&!h.rotation||h&&h.size&&!A(h.size,b,c)?null:h}function H(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function G(a,b){var d={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,
vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},f=a&&null!=a.size;a&&a.size?(d.vvSizeEnabled=!0,d.vvSizeMinSize=a.size.minSize,d.vvSizeMaxSize=a.size.maxSize,d.vvSizeOffset=a.size.offset,d.vvSizeFactor=a.size.factor):a&&f&&(d.vvSizeValue=b.transformation.scale);if(a&&f){d.vvSymbolAnchor=b.transformation.anchor;d.vvSymbolRotationMatrix=
e.mat3f64.create();c.mat4.identity(K);var g=b.transformation.rotation[2],f=b.transformation.rotation[0],l=b.transformation.rotation[1];b=K;void 0===b&&(b=h.mat4f64.create());g=g||0;f=f||0;l=l||0;0!==g&&c.mat4.rotateZ(b,b,-g/180*Math.PI);0!==f&&c.mat4.rotateX(b,b,f/180*Math.PI);0!==l&&c.mat4.rotateY(b,b,l/180*Math.PI);k.mat3.fromMat4(d.vvSymbolRotationMatrix,K)}a&&a.color&&(d.vvColorEnabled=!0,d.vvColorValues=a.color.values,d.vvColorColors=a.color.colors);a&&a.opacity&&(d.vvOpacityEnabled=!0,d.vvOpacityValues=
a.opacity.values,d.vvOpacityOpacities=a.opacity.opacityValues);return d}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=F;a.initFastSymbolUpdatesState=function(a,b){return!a||p.DISABLE_FAST_UPDATES?{enabled:!1}:(a=F(a.visualVariables,b))?{enabled:!0,visualVariables:a,materialParameters:G(a,b),requiresShaderTransformation:a&&null!=a.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=F(b.visualVariables,c);
if(!(b&&H(d.size,b.size,"size")&&H(d.color,b.color,"color")&&H(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=G(b,c);a.requiresShaderTransformation=b&&null!=b.size;return!0};a.getMaterialParams=G;var J;(function(a){var d=h.mat4f64.create(),e=b.vec3f64.create();a.evaluateModelTransform=function(a,b,f){if(!a.vvSizeEnabled)return f;c.mat4.copy(d,f);f=a.vvSymbolRotationMatrix;c.mat4.set(K,f[0],f[1],f[2],0,f[3],f[4],f[5],0,f[6],f[7],f[8],0,0,0,0,1);c.mat4.multiply(d,
d,K);for(f=0;3>f;++f)e[f]=g.clamp(a.vvSizeOffset[f]+b[0]*a.vvSizeFactor[f],a.vvSizeMinSize[f],a.vvSizeMaxSize[f]);c.mat4.scale(d,d,e);c.mat4.translate(d,d,a.vvSymbolAnchor);return d};a.evaluateModelTransformScale=function(a,b,c){if(!b.vvSizeEnabled)return m.vec3.set(a,1,1,1);for(var d=0;3>d;++d)a[d]=g.clamp(b.vvSizeOffset[d]+c[0]*b.vvSizeFactor[d],b.vvSizeMinSize[d],b.vvSizeMaxSize[d]);return a}})(J||(J={}));var K=h.mat4f64.create();a.evaluateModelTransform=J.evaluateModelTransform;a.evaluateModelTransformScale=
J.evaluateModelTransformScale})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f64=l})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]};a.fromValues=function(a,
d,k,e,c,h,m,b,f){return[a,d,k,e,c,h,m,b,f]};a.createView=function(a,d){return new Float64Array(a,d,9)}})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat4f64=l})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};a.clone=
function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,d,k,e,c,h,m,b,f,p,u,n,r,w,t,y){return[a,d,k,e,c,h,m,b,f,p,u,n,r,w,t,y]};a.createView=function(a,d){return new Float64Array(a,d,16)}})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(d,
a,l,g,k,e){return new (function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;c.SCENEVIEW_LOCKING_LOG=!1;c.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;c.HIGHLIGHTS_VISUALIZE_BLOCKS=!1;c.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;c.DECONFLICTOR_SHOW_OUTLINES=!1;c.DECONFLICTOR_SHOW_GRID=!1;c.LABELS_SHOW_BORDER=!1;c.OVERLAY_DRAW_TEST_TEXTURE=!1;c.OVERLAY_SHOW_CENTER=!1;c.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS=!1;c.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=
!1;c.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;c.DRAW_MESH_GEOMETRY_NORMALS=!1;c.FEATURE_TILE_FETCH_SHOW_TILES=!1;c.FEATURE_TILE_TREE_SHOW_TILES=!1;c.ENABLE_PROFILE_DEPTH_RANGE=!1;c.DISABLE_FAST_UPDATES=!1;c.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;c.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;return c}l(c,a);g([e.property()],c.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);g([e.property()],c.prototype,"SCENEVIEW_LOCKING_LOG",void 0);g([e.property()],c.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",
void 0);g([e.property()],c.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0);g([e.property()],c.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);g([e.property()],c.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);g([e.property()],c.prototype,"DECONFLICTOR_SHOW_GRID",void 0);g([e.property()],c.prototype,"LABELS_SHOW_BORDER",void 0);g([e.property()],c.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0);g([e.property()],c.prototype,"OVERLAY_SHOW_CENTER",void 0);g([e.property()],c.prototype,"TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS",
void 0);g([e.property()],c.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);g([e.property()],c.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);g([e.property()],c.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);g([e.property()],c.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);g([e.property()],c.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);g([e.property()],c.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);g([e.property()],c.prototype,"DISABLE_FAST_UPDATES",void 0);g([e.property()],
c.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);g([e.property()],c.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);return c=g([e.subclass("esri.views.3d.support.DebugFlags")],c)}(e.declared(k)))})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/promiseUtils ../../../../../core/screenUtils ../../../engine ../../graphics/graphicsUtils".split(" "),
function(d,a,l,g,k,e,c,h){function m(a){if(!("visualVariables"in a&&a.hasVisualVariables("size")))return 0;a=a.getVisualVariablesForType("size");if(!a[0])return 0;a=a[0];if("stops"===a.transformationType)return a.stops.map(function(a){return a.size}).reduce(n,0);if("clamped-linear"===a.transformationType)return"number"===typeof a.maxSize?a.maxSize:a.maxSize.stops.map(function(a){return a.size}).reduce(n,0);if("real-world-size"===a.transformationType)return 30}function b(a,b){return null==a?b:a}function f(a,
d){return g(this,void 0,void 0,function(){var e,g,k,m,n,p,r,x,A,K,I;return l(this,function(l){switch(l.label){case 0:if("simple-marker"===a.type)return e=Math.max(b(a.size,12),d),[2,u(a)+.707*e];if("picture-marker"===a.type)return g=Math.max(b(a.height,12),d),k=b(a.width,12)*(g/b(a.height,12)),m=k/2,n=g/2,[2,u(a)+Math.sqrt(m*m+n*n)];if("text"===a.type)return h.getTextSymbolEstimatedSize(w,a,c.definitions.AVERAGE_GLYPH_MOSAIC_ITEM),p=w[2]*(b(a.horizontalAlignment,"top")in t?1:.5),r=w[3]*(b(a.horizontalAlignment,
"center")in y?1:.5),x=null==a.font?9:b(a.font.size,9),A=Math.max(x,d)/x,[2,u(a)+Math.sqrt(p*p+r*r)*A];if("simple-line"===a.type)return[2,Math.max(b(a.width,.75),d)/2];if("simple-fill"===a.type||"picture-fill"===a.type)return[2,Math.max(null==a.outline?.75:b(a.outline.width,.75),d)/2];if("cim"===a.type)return(K=c.CIMSymbolHelper.getEnvelope(a.data))?[2,Math.sqrt(K.width*K.width+K.height*K.height)]:[2,0];if("web-style"!==a.type)return[3,2];I=f;return[4,a.fetchCIMSymbol()];case 1:return[2,I.apply(void 0,
[l.sent(),d])];case 2:return[2]}})})}function p(a,b){return g(this,void 0,void 0,function(){var c,d,e,g,h;return l(this,function(k){switch(k.label){case 0:if(!(a.type in r))return[2,0];d=(c=Math).min;g=(e=Math).max;h=[5];return[4,f(a,b)];case 1:return[2,d.apply(c,[g.apply(e,h.concat([k.sent()])),75])]}})})}function u(a){var c=b(a.xoffset,0);a=b(a.yoffset,0);return Math.sqrt(c*c+a*a)}function n(a,b){return Math.max(a,b)}Object.defineProperty(a,"__esModule",{value:!0});var r={"simple-marker":1,"picture-marker":1,
text:1,"simple-line":1,"simple-fill":1,"picture-fill":1,cim:1,"web-style":1};a.computePxBuffer=function(a,b){return g(this,void 0,void 0,function(){var c,d,f,g,h,r,t;return l(this,function(l){switch(l.label){case 0:if("heatmap"===a.type)return[2,Math.round(3*a.blurRadius)];if("dot-density"===a.type)return[2,0];if("dictionary"===a.type)return"esriGeometryPoint"===b||"esriGeometryMultipoint"===b?[2,100]:[2,50];c=a.getSymbols();d=m(a);f=[];g=0;for(h=c;g<h.length;g++)r=h[g],f.push(p(r,d));return[4,k.all(f)];
case 1:return t=l.sent(),[2,e.pt2px(t.reduce(n,0))]}})})};var w=[0,0,0,0],t={left:1,right:1},y={top:1,bottom:1,baseline:1}})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/intersects ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){function y(a,b,d,e,f){var h,l,m=g.pt2px(d.xoffset),n=g.pt2px(d.yoffset),p=K*d.angle;f*=K;switch(d.type){case "simple-marker":h=l=g.pt2px(d.size);break;case "picture-marker":h=g.pt2px(d.width),l=g.pt2px(d.height)}d=k.mat2d.identity(Q);k.mat2d.translate(d,d,c.vec2.set(P,a,b));k.mat2d.rotate(d,d,f-p);k.mat2d.scale(d,d,c.vec2.set(P,e,-e));k.mat2d.translate(d,d,c.vec2.set(P,m,-n));a=[0,0];c.vec2.transformMat2d(a,c.vec2.set(P,-.5*h,-.5*l),d);b=[0,0];c.vec2.transformMat2d(b,
c.vec2.set(P,-.5*h,.5*l),d);e=[0,0];c.vec2.transformMat2d(e,c.vec2.set(P,.5*h,-.5*l),d);m=[0,0];c.vec2.transformMat2d(m,c.vec2.set(P,.5*h,.5*l),d);return{rings:[[a,e,m,b,a]]}}function x(a,b,d,e,f){var h=t.CIMSymbolHelper.getEnvelope(d.data);if(!h)return null;d=g.pt2px(h.width);var l=g.pt2px(h.height),m=g.pt2px(h.x),h=g.pt2px(h.y),n=0*K,p=K*f;f=k.mat2d.identity(Q);k.mat2d.translate(f,f,c.vec2.set(P,a,b));k.mat2d.rotate(f,f,p-n);k.mat2d.scale(f,f,c.vec2.set(P,e,-e));k.mat2d.translate(f,f,c.vec2.set(P,
m,-h));a=[0,0];c.vec2.transformMat2d(a,c.vec2.set(P,-.5*d,-.5*l),f);b=[0,0];c.vec2.transformMat2d(b,c.vec2.set(P,-.5*d,.5*l),f);e=[0,0];c.vec2.transformMat2d(e,c.vec2.set(P,.5*d,-.5*l),f);m=[0,0];c.vec2.transformMat2d(m,c.vec2.set(P,.5*d,.5*l),f);return{rings:[[a,e,m,b,a]]}}function A(a,b,d,e,f,h){var l=t.alignmentUtils.getYAnchorDirection(d.verticalAlignment||"baseline"),m="baseline"===(d.verticalAlignment||"baseline"),n=g.pt2px(d.xoffset),p=g.pt2px(d.yoffset),r=g.pt2px(d.font.size)/24,u=4*r,l=m?
25*r:e[1]+(1+l)*e[3]*.5;d=K*d.angle;m=K*h;h=k.mat2d.identity(Q);k.mat2d.translate(h,h,c.vec2.set(P,a,b));k.mat2d.rotate(h,h,m-d);k.mat2d.scale(h,h,c.vec2.set(P,f,-f));k.mat2d.translate(h,h,c.vec2.set(P,n,-p));k.mat2d.translate(h,h,c.vec2.set(P,-u,-u-l));a=[0,0];c.vec2.transformMat2d(a,c.vec2.set(P,e[0],e[1]),h);b=[0,0];c.vec2.transformMat2d(b,c.vec2.set(P,e[0],e[1]+e[3]),h);f=[0,0];c.vec2.transformMat2d(f,c.vec2.set(P,e[0]+e[2],e[1]),h);n=[0,0];c.vec2.transformMat2d(n,c.vec2.set(P,e[0]+e[2],e[1]+
e[3]),h);return{rings:[[a,f,n,b,a]]}}function z(a,b,c){if(!c||0===c.glyphMosaicItems.length)return a;var d=t.bidiText(b.text),e=d[0],d=d[1],f=t.alignmentUtils.getJustification(b.horizontalAlignment||"center"),h=t.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");c=(new t.TextShapingNew([c.glyphMosaicItems],t.definitions.TEXT_MAX_WIDTH,t.definitions.TEXT_LINE_HEIGHT,t.definitions.TEXT_SPACING,[0,.5*-M],.5*(1-h),0,f)).getShaping(e,d);e=t.fontUtils.getFontDecorationTop(b.font.decoration);
isNaN(e)||t.TextShapingNew.addDecoration(c,e);c=t.TextShapingNew.getBox(c);b=g.pt2px(b.font.size)/fa;a[0]=b*c.x;a[1]=b*c.y;a[2]=b*c.width;a[3]=b*c.height;return a}function C(a,b){return Math.ceil((a-b)/(2*b))}function D(a,b){var c;c=u.isPolygon(a)?a.rings:a.paths;for(var d=0;d<c.length;d++)for(var e=0,f=c[d];e<f.length;e++)f[e][0]+=b;return a}function B(a,b){if(!b)return a;var c=E(a,b).map(function(a){return a.extent});return 2>c.length?c[0]||a:2<c.length?(a.xmin=b.valid[0],a.xmax=b.valid[1],a):{rings:c.map(function(a){return[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]})}}function E(a,b){var c=[],d=a.ymin,e=a.ymax,f=a.xmax-a.xmin,g=a.xmin,h=a.xmax,k,l=b.valid,m=l[0],n=l[1];k=F(a.xmin,b);var p=k.x,l=k.frameId;k=F(a.xmax,b);b=k.x;a=k.frameId;k=p===b&&0<f;if(f>2*n){f={xmin:g<h?p:b,ymin:d,xmax:n,ymax:e};g={xmin:m,ymin:d,xmax:g<h?b:p,ymax:e};h={xmin:0,ymin:d,xmax:n,ymax:e};d={xmin:m,ymin:d,xmax:0,ymax:e};e=[];m=[];H(f,h)&&e.push(l);H(f,d)&&m.push(l);H(g,h)&&e.push(a);H(g,d)&&m.push(a);for(n=l+1;n<
a;n++)e.push(n),m.push(n);c.push({extent:f,frameIds:[l]},{extent:g,frameIds:[a]},{extent:h,frameIds:e},{extent:d,frameIds:m})}else p>b||k?c.push({extent:{xmin:p,ymin:d,xmax:n,ymax:e},frameIds:[l]},{extent:{xmin:m,ymin:d,xmax:b,ymax:e},frameIds:[a]}):c.push({extent:{xmin:p,ymin:d,xmax:b,ymax:e},frameIds:[l]});return c}function F(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}}function H(a,
b){var c=b.xmin,d=b.ymin,e=b.xmax;b=b.ymax;return G(a,c,d)&&G(a,c,b)&&G(a,e,b)&&G(a,e,d)}function G(a,b,c){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?!0:!1}function J(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=C(d,b);a[0]=d+-2*e*b}else d<c&&(e=C(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=C(d,b),a.x+=-2*e*b):d<c&&(e=C(d,c),a.x+=-2*e*c);return a}Object.defineProperty(a,"__esModule",{value:!0});var K=Math.PI/180,I=t.definitions.TEXT_MAX_WIDTH,M=t.definitions.TEXT_LINE_HEIGHT,O=t.definitions.TEXT_SPACING,
Q=e.mat2df32.create(),P=h.vec2f32.create(),S=b.create();a.ensureClosedRings=function(a){if(u.isPolygon(a)){var b=0;for(a=a.rings;b<a.length;b++){var c=a[b];3>c.length||c[0][0]===c[c.length-1][0]&&c[0][1]===c[c.length-1][1]||c.push(c[0])}}};a.getBounds=function(a,b,c,d,e,g,h,k){if(!d||!c)return a[0]=a[1]=a[2]=a[3]=0,b[0]=b[1]=b[2]=b[3]=0,a;if(u.isPoint(d)){h=d.x;d=d.y;"text"===c.type&&0===b[2]&&0===b[3]&&z(b,c,e);var l;switch(c.type){case "simple-marker":case "picture-marker":l=y(h,d,c,g,0);break;
case "text":l=A(h,d,c,b,g,0);break;case "cim":l=x(h,d,c,g,0)}for(g=b=0;g<l.rings[0].length-1;g++)c=l.rings[0][g],c=(h-c[0])*(h-c[0])+(d-c[1])*(d-c[1]),b=Math.max(b,c);b=Math.sqrt(b);g=n.normalizeMapX(h-b,k);h=n.normalizeMapX(h+b,k);g>h&&(k=w.getInfo(k))&&(g=k.valid,k=g[1],g=g[0],h=k);a[0]=g;a[1]=d-b;a[2]=h;a[3]=d+b}else{f.getBoundsXY(a,d);d=b[0];if(0===d){a:switch(d=0,c.type){case "simple-fill":case "picture-fill":d=c.outline;if(!d){d=0;break a}d=d.width;break;case "simple-line":d=c.width;break;case "simple-marker":d=
c.size;break;case "picture-marker":d=Math.max(c.width,c.height);break;case "text":d=[0,0,0,0];z(d,c,e);d=Math.max(d[0],d[1]);break;case "cim":d=t.CIMSymbolHelper.getEnvelope(c.data),d=Math.sqrt(d.width*d.width+d.height*d.height)}b[0]=d}d=g*d/2;a[0]-=d;a[1]-=d;a[2]+=d;a[3]+=d}return a};a.isMarkerSymbol=function(a){return"simple-marker"===a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(l.expect(a.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};
var U=h.vec2f32.create(),T=h.vec2f32.create(),R=h.vec2f32.create(),W=h.vec2f32.create(),X=h.vec2f32.create(),Z=h.vec2f32.create(),ba=h.vec2f32.create();a.isPointOnPolyline=function(a,b,d,e){c.vec2.set(R,b,d);a=a.paths;for(var f,g,h,k,l,m,n,p,r=Infinity,t=0;t<a.length;t++){var u=a[t];if(!(2>u.length))for(var w=1;w<u.length;w++)f=u[w-1][0],h=u[w-1][1],g=u[w][0],k=u[w][1],l=Math.min(f,g)-e,m=Math.min(h,k)-e,n=Math.max(f,g)+e,p=Math.max(h,k)+e,b<l||b>n||d<m||d>p||(c.vec2.set(U,f,h),c.vec2.set(T,g,k),
c.vec2.subtract(W,T,U),c.vec2.subtract(X,U,R),c.vec2.scale(Z,W,c.vec2.dot(W,X)/c.vec2.dot(W,W)),c.vec2.subtract(ba,X,Z),f=c.vec2.dot(ba,ba),r>f&&(r=f))}return Math.sqrt(r)<=e};a.getMarkerSymbolBounds=y;a.getCIMMarkerBounds=x;a.getTextSymbolBounds=A;a.normalizeCentralMeridian=function(a){var b,c,d,e,g,h=null;if(!a)return null;b=a.spatialReference;c=r.getInfo(b);g=b.isWebMercator?102100:4326;d=V[g].maxX;e=V[g].minX;b=V[g].plus180Line;g=V[g].minus180Line;var k,l=a.toJSON();if(!c)return l;"mesh"===a.type?
k=l:u.isPoint(l)?k=J(l,d,e):u.isMultipoint(l)?(l.points=l.points.map(function(a){return J(a,d,e)}),k=l):u.isExtent(l)?k=B(l,c):u.isPolygon(l)||u.isPolyline(l)?(f.getBoundsXY(S,l),a={xmin:S[0],ymin:S[1],xmax:S[2],ymax:S[3]},c=2*C(a.xmin,e)*d,l=0===c?l:D(l,c),a.xmin+=c,a.xmax+=c,p.extentIntersectsPolyline(a,b)&&a.xmax!==d?h=l:p.extentIntersectsPolyline(a,g)&&a.xmin!==e?h=l:k=l):k=a.clone();return null!==h?(new ea).cut(h,d):k};var fa=24;a.getTextSymbolSize=z;a.getTextSymbolEstimatedSize=function(a,b,
c){var d=t.bidiText(b.text),e=d[0],d=d[1],f=t.alignmentUtils.getJustification(b.horizontalAlignment||"center"),h=t.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");c=(new t.TextShapingNew([],I,M,O,[0,.5*-M],.5*(1-h),0,f)).getEstimatedShaping(e,d,c);c=t.TextShapingNew.getBox(c);b=g.pt2px(b.font.size)/fa;a[0]=b*c.x;a[1]=b*c.y;a[2]=b*c.width;a[3]=b*c.height;return a};var V={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:{paths:[[[2.0037508342788905E7,-2.0037508342788905E7],
[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:m.WebMercator},minus180Line:{paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:m.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:m.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:m.WGS84}}},ea=function(){function a(){}a.prototype.cut=function(a,b){var c;if(a.rings)this.closed=!0,c=a.rings,this.minPts=
4;else if(a.paths)this.closed=!1,c=a.paths,this.minPts=2;else return null;var d=c.length;b*=-2;for(var e=0;e<d;e++){var f=c[e];if(f&&f.length>=this.minPts){for(var g=[],h=0;h<f.length;h++){var k=f[h];g.push([k[0]+b,k[1]])}c.push(g)}}this.closed?a.rings=c:a.paths=c;return a};return a}()})},"esri/views/2d/layers/features/support/DataTile":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this.tile=this.displayTile=null;this.done=
!1;this.queryInfoHash=null;this.returnExceeded=!1}Object.defineProperty(a.prototype,"key",{get:function(){return this.tile.key},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.tile.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bounds",{get:function(){return this.tile.bounds},enumerable:!0,configurable:!0});return a}();a.default=d})},"esri/views/2d/layers/features/support/DataTileFeaturesIndex":function(){define("require exports @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../../../core/SetPool ../../../../../layers/graphics/data/FeatureStore ./Tile".split(" "),
function(d,a,l,g,k,e,c){Object.defineProperty(a,"__esModule",{value:!0});var h=[],m=new g.default;d=function(){function a(){this._tileById=new l.default;this._tilesToFeatures=new l.default;this._featureToTiles=new l.default}a.prototype.destroy=function(){this.clear()};a.prototype.add=function(a){var b=this;this.has(a.id)||(this._tileById.set(a.id,a),this._tilesToFeatures.set(a,k.default.acquire()),this._tilesToFeatures.forEach(function(d,e){a!==e&&(c.isParentOf(a,e)?d.forEach(function(c){b._link(a,
c)}):c.isChildOf(a,e)&&b.featureStore.forEachInBounds(a.bounds,function(c){d.has(c.objectId)&&b._link(a,c.objectId)}))}))};a.prototype.clear=function(){this._tilesToFeatures.forEach(function(a){return k.default.release(a)});this._tilesToFeatures.clear();this._featureToTiles.forEach(function(a){return k.default.release(a)});this._featureToTiles.clear();this._tileById.clear()};a.prototype.delete=function(a){var b=this,c=this.get(a.id);h.length=0;this._tilesToFeatures.get(c).forEach(function(a){var d=
b._featureToTiles.get(a);d.has(c)&&1===d.size?h.push(a):b._unlink(c,a)});for(a=0;a<h.length;a++)this._unlink(c,h[a]);this.featureStore.removeManyById(h);this._tilesToFeatures.delete(c);this._tileById.delete(c.id);h.length=0};a.prototype.forEach=function(a,b){return this._tileById.forEach(a,b)};a.prototype.get=function(a){return this._tileById.get(a)};a.prototype.has=function(a){return this._tileById.has(a)};a.prototype.setTileFeatures=function(a,b){var c=this,d=this.get(a.id);this._tilesToFeatures.has(d)||
(this._tileById.set(d.id,d),this._tilesToFeatures.set(d,k.default.acquire()));for(a=0;a<b.length;a++)m.add(b[a].objectId);h.length=0;this._tilesToFeatures.get(d).forEach(function(a){if(!m.has(a)){var b=c._featureToTiles.get(a);b.has(d)&&1===b.size?h.push(a):c._unlink(d,a)}});for(a=0;a<h.length;a++)this._unlink(d,h[a]);this.featureStore.removeManyById(h);this.featureStore.addMany(b);m.forEach(function(a){c._link(d,a)});m.clear();h.length=0};a.prototype.addOrUpdateFeatures=function(a){for(var b=this,
c=new g.default,d=new e.default({geometryType:this.featureStore.geometryType,hasM:this.featureStore.hasM,hasZ:this.featureStore.hasZ},null),f=0,h=this.deleteFeaturesById(a.map(function(a){return a.objectId}));f<h.length;f++)c.add(h[f]);d.addMany(a);this._tileById.forEach(function(a){d.forEachInBounds(a.bounds,function(d){b._link(a,d.objectId);c.add(a)})});this.featureStore.addMany(a);var k=[];c.forEach(function(a){return k.push(a)});return k};a.prototype.deleteFeaturesById=function(a){for(var b=this,
c=new g.default,d=function(a){var d=e._featureToTiles.get(a);d&&(d.forEach(function(d){c.add(d);b._tilesToFeatures.get(d).delete(a)}),k.default.release(d),e._featureToTiles.delete(a))},e=this,f=0;f<a.length;f++)d(a[f]);this.featureStore.removeManyById(a);var h=[];c.forEach(function(a){return h.push(a)});return h};a.prototype._link=function(a,b){this._featureToTiles.get(b)||this._featureToTiles.set(b,k.default.acquire());this._featureToTiles.get(b).add(a);this._tilesToFeatures.get(a).add(b)};a.prototype._unlink=
function(a,b){this._featureToTiles.get(b).delete(a);this._tilesToFeatures.get(a).delete(b);0===this._featureToTiles.get(b).size&&(k.default.release(this._featureToTiles.get(b)),this._featureToTiles.delete(b))};return a}();a.default=d})},"esri/core/SetPool":function(){define(["require","exports","@dojo/framework/shim/Set"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});d=function(){function a(){this._pool=[];this._set=new l.default}a.prototype.acquire=function(){if(0===this._pool.length)return new l.default;
var a=this._pool.pop();this._set.delete(a);return a};a.prototype.release=function(a){a&&!this._set.has(a)&&(a.clear(),5E4>this._pool.length&&(this._pool.push(a),this._set.add(a)))};a.acquire=function(){return g.acquire()};a.release=function(a){return g.release(a)};return a}();a.default=d;var g=new d})},"esri/views/2d/layers/features/support/TileUpdateQueue":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Accessor ../../../../../core/promiseUtils ../../../../../core/scheduling ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/vec2 ../../../tiling".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p){Object.defineProperty(a,"__esModule",{value:!0});var u=[0,0];d=function(a){function c(b){b=a.call(this,b)||this;b._queue=new Map;b._isPaused=!1;b._scheduledNextHandle=null;b._timestamp=Date.now();b.tileInfoView=null;b._next=b._next.bind(b);b._finalize=b._finalize.bind(b);return b}l(c,a);Object.defineProperty(c.prototype,"length",{get:function(){return this._queue.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return 0<
this._queue.size||null!=this._onGoingTile},enumerable:!0,configurable:!0});c.prototype.abort=function(a){this._onGoingTile&&this._onGoingTile.tileId===a&&(this._onGoingTile.abortController.abort(),this._onGoingTile=null);this._queue.delete(a);this._scheduleNext();this.notifyChange("updating")};c.prototype.clear=function(){this._queue.clear();this._onGoingTile&&(this._onGoingTile.abortController.abort(),this._onGoingTile=null);this._cancelNext();this.notifyChange("updating")};c.prototype.has=function(a){return this._queue.has(a)};
c.prototype.isOngoing=function(a){return this._onGoingTile&&this._onGoingTile.tileId===a};c.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};c.prototype.push=function(a,b){if(!this._queue.has(a)){var c=h.createAbortController();this._queue.set(a,{tileId:a,key:p.TileKey.pool.acquire(a),timestamp:b||this._timestamp,abortController:c});this._scheduleNext();this.notifyChange("updating")}};c.prototype.refresh=function(){this._timestamp=Date.now();this.reset()};c.prototype.reset=
function(){var a=this._onGoingTile;a&&this.push(a.tileId,this._timestamp);this.notifyChange("updating")};c.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());this.notifyChange("updating")};c.prototype._finalize=function(){this._onGoingTile=null;this.notifyChange("updating");this._scheduleNext()};c.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};c.prototype._scheduleNext=function(){this._isPaused||
this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingTile||(this._scheduledNextHandle=m.schedule(this._next))};c.prototype._next=function(){return e(this,void 0,void 0,function(){var a,b,c,d,e;return k(this,function(f){switch(f.label){case 0:if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingTile)return this._scheduledNextHandle=null,[2];this._scheduledNextHandle=null;a=this._peek();b=a.abortController.signal;c=a.tileId;d=a.key;p.TileKey.pool.release(d);this._queue.delete(c);
this._onGoingTile=a;e=this.process(c,this._timestamp,{signal:b});this.notifyChange("updating");if(!e||"function"!==typeof e.then)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e];case 2:return f.sent(),[3,4];case 3:return f.sent(),[3,4];case 4:return this._finalize(),[2]}})})};c.prototype._peek=function(){var a=this;if(!this.state)throw Error("state not set");var b=this.tileInfoView,c=this.state.center,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,g=null;this._queue.forEach(function(h,
k){b.getTileCoords(u,h.key);k=a._timestamp-h.timestamp;isNaN(k)?(k=f.vec2.distance(u,c),k<e&&(e=k,g=h)):k===d?(k=f.vec2.distance(u,c),k<e&&(e=k,g=h)):k>d&&(d=k,e=Number.POSITIVE_INFINITY,g=h)});return g};g([b.property({readOnly:!0})],c.prototype,"length",null);g([b.property({constructOnly:!0})],c.prototype,"process",void 0);g([b.property()],c.prototype,"state",void 0);g([b.property({constructOnly:!0})],c.prototype,"tileInfoView",void 0);g([b.property({readOnly:!0})],c.prototype,"updating",null);return c=
g([b.subclass("esri.views.2d.layers.features.support.TileUpdateQueue")],c)}(b.declared(c));a.default=d})},"esri/views/support/OrderedQueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ./QueueProcessor".split(" "),function(d,a,l,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});var c=function(){return function(a,c){this.item=a;this.promise=c;this.deferred=k.createDeferred();this.status=0;this.error=
this.value=null}}();d=function(){function a(a){this._queue=[];this._queueMap=new Map;this._processor=new e.QueueProcessor(a)}a.prototype.destroy=function(){this.clear();this._processor.destroy()};Object.defineProperty(a.prototype,"length",{get:function(){return this._queue.length},enumerable:!0,configurable:!0});a.prototype.abort=function(a){var b=this._queueMap.get(a);b&&(0===b.status?this._processor.abort(a):(b.status=1,b.error=k.createAbortError()))};a.prototype.clear=function(){this._queue.length=
0;this._queueMap.clear();this._processor.clear()};a.prototype.get=function(a){return g(this,void 0,void 0,function(){var b;return l(this,function(c){b=this._queueMap.get(a);return[2,b?b.promise:void 0]})})};a.prototype.isOngoing=function(a){return this._processor.isOngoing(a)};a.prototype.has=function(a){return this._queueMap.has(a)};a.prototype.pause=function(){this._processor.pause()};a.prototype.resume=function(){this._processor.resume()};a.prototype.reset=function(){this._processor.reset()};a.prototype.push=
function(a){return g(this,void 0,void 0,function(){var b,d,e=this;return l(this,function(f){b=this._processor.push(a);d=new c(a,b);this._queue.push(d);this._queueMap.set(a,d);b.then(function(a){return e._success(d,a)},function(a){return e._error(d,a)});return[2,d.deferred.promise]})})};a.prototype._success=function(a,b){a.status=2;a.value=b;this._drain()};a.prototype._error=function(a,b){a.status=1;a.error=b;this._drain()};a.prototype._drain=function(){for(;;){var a=this._queue[0];if(!a||0===a.status)break;
this._queue.shift();this._queueMap.delete(a.item);2===a.status?a.deferred.resolve(a.value):a.deferred.reject(a.error)}};return a}();a.OrderedQueueProcessor=d})},"esri/views/2d/layers/features/controllers/MemoryController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../geometry ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/workers ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../engine ./BaseController ../support/TileUpdateQueue".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t){Object.defineProperty(a,"__esModule",{value:!0});var y=m.getLogger("esri.views.2d.layers.features.controllers.MemoryController");d=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.type="memory";return b}l(d,a);d.prototype.initialize=function(){var a=this;this._tileQueue=new t.default({tileInfoView:this.tileStore.tileScheme,process:function(b,c,d){return a._fetchFeatureSet(b,c,d)}});this._memorySource=f.openWithPorts(this.service.source,
{client:this});this.refresh();this._tileQueue.resume()};d.prototype.destroy=function(){this._memorySource.close();this._memorySource=null;this._tileQueue.clear();this._tileQueue.pause()};Object.defineProperty(d.prototype,"updating",{get:function(){return this._tileQueue.updating},enumerable:!0,configurable:!0});d.prototype.update=function(a,d){return c(this,void 0,void 0,function(){var c,f=this;return e(this,function(e){switch(e.label){case 0:return this.validateConfig(a,d),c=this.renderer.getAttributeHash(),
this._set("config",a),[4,this.updatePixelBuffer()];case 1:return e.sent(),d?c===this.renderer.getAttributeHash()?[3,3]:[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)]:[3,5];case 2:e.sent(),e.label=3;case 3:return[4,this.attributeStore.updateFilters(this)];case 4:return e.sent(),this.refresh(),[2];case 5:return"heatmap"===this.renderer.type?[2]:c===this.renderer.getAttributeHash()?[3,8]:[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)];case 6:return e.sent(),
[4,b.all(this.tileStore.tiles.map(function(a){return f._updateTileAttrData(a)}))];case 7:e.sent(),e.label=8;case 8:return[4,this.attributeStore.updateFilters(this)];case 9:return e.sent(),[4,this.attributeStore.sendUpdates()];case 10:return e.sent(),[2]}})})};d.prototype.invalidate=function(){this.refresh()};d.prototype.onEdits=function(a){this.refresh()};d.prototype.queryFeatures=function(a){return this._memorySource.invoke("queryFeatures",a)};d.prototype.queryFeatureCount=function(a){return this._memorySource.invoke("queryFeatureCount",
a)};d.prototype.queryObjectIds=function(a){return this._memorySource.invoke("queryObjectIds",a)};d.prototype.queryExtent=function(a){return this._memorySource.invoke("queryExtent",a)};d.prototype.redraw=function(){this.refresh()};d.prototype.refresh=function(){this._tileQueue.refresh();for(var a=0,b=this.tileStore.tiles;a<b.length;a++){var c=b[a];this._tileQueue.push(c.id,c.updateTimestamp)}};d.prototype.setViewState=function(a){this.inherited(arguments);this._tileQueue.state=a};d.prototype.onTileUpdate=
function(a){this._tileQueue.pause();for(var b=0,c=a.removed;b<c.length;b++){var d=c[b];this._tileQueue.abort(d.id)}b=0;for(a=a.added;b<a.length;b++)d=a[b],this._tileQueue.push(d.id,d.updateTimestamp);this.processor&&this._tileQueue.resume()};d.prototype._updateTileAttrData=function(a){return c(this,void 0,void 0,function(){var b,c,d,f,g,h;return e(this,function(e){switch(e.label){case 0:return[4,this._query(a,this.queryInfo)];case 1:b=e.sent();c=n.convertFromFeatureSet(b,this.service.objectIdField);
c=n.hydrateOptimizedFeatureSet(c);d=0;for(f=c.features;d<f.length;d++)g=f[d],h=this.attributeStore.createLocalId(g.objectId),this.attributeStore.setAttributeData(h,g,this.geometryInfo,this.viewParams);return[2]}})})};d.prototype._fetchFeatureSet=function(a,c,d){var e=this,f=this.tileStore.get(a),g=this.queryInfo;return this._query(f,g,d).then(function(a){return e._wrapPoints(a,g)}).then(function(a){return e._sortFeatures(a,g)}).then(function(a){return a.features.length?a:null}).then(function(a){f.updateTimestamp=
c;return e.processor.onTileData(f,{addOrUpdate:a&&a.features,clear:!0,transformParams:a&&r.Utils.getTransformParams(a)},d)}).catch(function(a){f.updateTimestamp=c;b.isAbortError(a)||(e.processor.onTileError(f,a.message,d),y.error("query-error",{error:a}));return b.reject(a)})};d.prototype._query=function(a,b,c){var d=this,e=this._pixelBuffer*a.resolution,f=a.bounds.slice();f[0]-=e;f[1]-=e;f[2]+=e;f[3]+=e;e=h.Extent.fromBounds(f,this.spatialReference);a=this._createQuery(e,a.extent,a.resolution,this.queryInfo);
return this.queryFeatures(a.toJSON()).then(function(a){a.features=b.returnCentroid?a.features.filter(function(a){return null!=a.geometry&&null!=a.centroid}):a.features.filter(function(a){return null!=a.geometry});return a}).then(function(a){return d._applyProcessing(a,c)}).then(function(a){for(var b=n.convertFromFeatureSet(a,d.service.objectIdField),b=n.hydrateOptimizedFeatureSet(b),c=0;c<a.features.length;c++){var e=a.features[c],f=b.features[c],g=d.attributeStore.getLocalId(f.objectId);null==g&&
(g=d.attributeStore.createLocalId(f.objectId));e.localId=g;d.attributeStore.setAttributeData(g,f,d.geometryInfo,d.viewParams)}d.attributeStore.sendUpdates();return a})};d.prototype._wrapPoints=function(a,b){if(0===a.features.length)return a;var c=b.returnCentroid;b=this._pixelBuffer;var d=a.geometryType,e=a.spatialReference,f=a.transform;if("esriGeometryPoint"!==d&&"esriGeometryMultipoint"!==d&&!c||!u.isWrappable(e))return a;c=a.features;e=u.getInfo(e);f=Math.round((e.valid[1]-e.valid[0])/f.scale[0]);
if(f===r.definitions.TILE_SIZE){e=[];for(d=0;d<c.length;d++){var g=c[d],h=g.geometry,g=g.attributes;h&&(h.x<b?(h={geometry:k({},h),attributes:g},h.geometry.x+=f,e.push(h)):h.x>r.definitions.TILE_SIZE-b&&(h={geometry:k({},h),attributes:g},h.geometry.x-=f,e.push(h)))}c.push.apply(c,e)}else for(e=0;e<c.length;e++)if(h=c[e].geometry)h.x<-b?h.x+=f:h.x>r.definitions.TILE_SIZE+b&&(h.x-=f);return a};d.prototype._sortFeatures=function(a,b){if(b=b.orderByFields){b=b[0].split(" ");var c=b[0];"DESC"===b[1]&&
a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a};g([p.property()],d.prototype,"_tileQueue",void 0);g([p.property({dependsOn:["_tileQueue.updating"]})],d.prototype,"updating",null);return d=g([p.subclass("esri.views.2d.layers.features.controllers.MemoryController")],d)}(p.declared(w.default));a.default=d})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/asyncUtils ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/MapPool ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../layers/support/LabelClass ../../../../../layers/support/labelFormatUtils ../../../../../renderers/support/jsonUtils ../../../engine ../../../arcade/utils ./BaseProcessor".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A,z,C){Object.defineProperty(a,"__esModule",{value:!0});var D=f.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._symbolToMosaicItemMap=new Map;b._visualSetPromises=new Map;b.type="symbol";return b}l(b,a);b.prototype.destroy=function(){this._visualSetPromises.clear();this._symbolToMosaicItemMap.clear();this.notifyChange("updating")};Object.defineProperty(b.prototype,
"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelingInfo",{get:function(){return!this.config||u.isNone(this.config.labelingInfo)?null:this.config.labelingInfo.map(function(a){return t.fromJSON(a)})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelClassInfos",{get:function(){var a=this;return this.labelingInfo?n.all(this.labelingInfo.map(function(b,d){return c(a,void 0,void 0,function(){var a;return e(this,
function(c){switch(c.label){case 0:return a={index:d,minScale:b.minScale,maxScale:b.maxScale},[4,y.createLabelFunction(b,this.fields,this.spatialReference)];case 1:return[2,(a.builder=c.sent(),a.symbol=b.symbol,a)]}})})})):n.resolve()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hydrate",{get:function(){return z.createHydrateFactory(this.service.geometryType)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"factory",{get:function(){var a=this;if(!this.config)return D.error(new m("mapview-processor",
"Unable to create factory without a configuration")),null;var b=this.service,c=b.geometryType,d=b.objectIdField,b=b.fields,e=w.fromJSON(this.spatialReference),b={geometryType:c,fields:b,spatialReference:e},e=new A.WGLTemplateStore(function(b,c){return a.remoteClient.invoke("tileRenderer.getMaterialItems",b,c)}),f=this.tileStore.tileScheme.tileInfo;this._matcher=A.createMatcher(this.renderer,e,b);return new A.WGLMeshFactory(c,d,this.renderer,e,this.labelingInfo,f)},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"renderer",{get:function(){return this.config?x.fromJSON(this.config.renderer):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return 0<this._visualSetPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fields",{get:function(){return this.service.fields},enumerable:!0,configurable:!0});b.prototype.update=function(a){return c(this,void 0,void 0,function(){return e(this,function(b){this._set("config",
a);return[2]})})};b.prototype.onTileData=function(a,b,c){var d=this,e=b.addOrUpdate,f=b.remove,g=b.clear;b=e&&e.length?this._processFeatures(a,e,b.transformParams):n.resolve();var h=c.signal;b=b.then(function(b){return d.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:{addOrUpdate:b&&b.message||null,remove:f,clear:g}},{transferList:b&&b.transferList||null,signal:h})}).catch(function(b){return d._handleError(a,b,c)});this._visualSetPromises.set(a,b);n.always(b,function(){return d._cleanPromise(a)});
this.notifyChange("updating");return b};b.prototype.onTileError=function(a,b,c){var d=this;b=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b},{signal:c.signal});this._visualSetPromises.set(a,b);n.always(b,function(){return d._cleanPromise(a)});this.notifyChange("updating");return b};b.prototype._cleanPromise=function(a){this._visualSetPromises.delete(a);this.notifyChange("updating")};b.prototype._processFeatures=function(a,b,c){var d=this;if(!b||!b.length)return n.resolve(null);
var e=this.factory,f={viewingMode:"",scale:a.scale};return h.safeCast(this._matcher.then(function(a){return e.analyze(b,a,c,f)})).then(function(b){return h.safeCast(d._getLabelMosaicItems(a,b,c)).then(function(f){return d._writeFeatures(a,b,c,f,e)})})};b.prototype._writeFeatures=function(a,b,c,d,e){for(var f=e.createMeshData(b.length),g={viewingMode:"",scale:a.scale},h=this._symbolToMosaicItemMap,k=0;k<b.length;k++)e.write(f,b[k],c,g,a.level,d,h);return this._encodeDisplayData(f)};b.prototype._encodeDisplayData=
function(a){var b={},c=[];a.encode(b,c);return{message:b,transferList:c}};b.prototype._handleError=function(a,b,c){c=c.signal;if(!n.isAbortError(b))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b.message},{signal:c})};b.prototype._getLabelMosaicItems=function(a,b,d){return c(this,void 0,void 0,function(){var c,f,g,h,k,l;return e(this,function(e){switch(e.label){case 0:return c=p.acquire(),[4,this._createLabelFeatures(a.scale,b,c,d)];case 1:f=e.sent();g=this._symbolToMosaicItemMap;
h=p.acquire();k=[];l=0;c.forEach(function(a,b){if(g.has(b.id)){var c=g.get(b.id).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(h.set(l,b),k.push({symbol:b.toJSON(),id:l,glyphIds:d}),l++)}else{h.set(l,b);var e=[];a.forEach(function(a){return e.push(a)});k.push({symbol:b.toJSON(),id:l,glyphIds:e});l++}});if(0<k.length)return[2,this.remoteClient.invoke("tileRenderer.getMaterialItems",k).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],d=h.get(c.id);
if(d)if(A.Utils.isTextSymbol(d))if(g.has(d.id)){if(d=g.get(d.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var e=0;e<c.length;e++)null!=c[e]&&(d[e]=c[e])}else g.set(d.id,c.mosaicItem);else g.set(d.id,c.mosaicItem)}p.release(h);return f})];p.release(c);return[2,n.resolve(f)]}})})};b.prototype._getLabelClassInfosForScale=function(a){return c(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:return[4,this.labelClassInfos];case 1:return b=c.sent(),[2,b.filter(function(b){var c=
b.minScale;b=b.maxScale;return(!c||c>=a||0===c)&&(!b||b<=a||0===b)})]}})})};b.prototype._createLabelFeatures=function(a,b,d,f){return c(this,void 0,void 0,function(){var c,g,h,l,m,n,r,t,x,y,z,B,E,C,F,G,H,J,da,qa,ta,ra,pa,wa,ya,Ba,Ka,za,La;return e(this,function(e){switch(e.label){case 0:return this.labelingInfo&&b&&0!==b.length?[4,this._getLabelClassInfosForScale(a)]:[2,null];case 1:c=e.sent();if(0===c.length)return[2,null];g=p.acquire();h=new A.CollisionGrid(A.definitions.COLLISION_EARLY_REJECT_BUCKET_SIZE);
l=0;for(m=b;l<m.length;l++){n=m[l];r=this.service.geometryType;x=t=0;if("esriGeometryPoint"===r||"esriGeometryPolygon"===r)if("esriGeometryPoint"===r?(y=n.geometry,t=y.x,x=y.y):(t=n.centroid.x,x=n.centroid.y),z=h.checkOverlap(t,x))continue;B=n.localId;E=[];for(C=0;C<c.length;C++){F=c[C];G=F.index;H=F.builder;J=F.symbol;da=n;if(!f)return D.error("mapview-labeling","Tried to evaluate geometry expression but no transformation found"),[2];qa=f.transform;ta=f.hasZ;ra=f.hasM;pa=this.hydrate(n.geometry,
qa,ta,ra);wa=k({},n,{geometry:pa});pa.spatialReference=w.fromJSON(this.spatialReference);da=wa;ya=H.evaluate(da);if(!u.isNone(ya)){A.definitions.DEBUG_LABELS&&(Ba="-"+B,ya=ya.substring(0,ya.length-Ba.length)+Ba);Ka=A.bidiText(ya);za=Ka[0];La=Ka[1];var I=J;e=za;var K=d;K.has(I)||K.set(I,new Set);for(var I=K.get(I),K=e.length,M=0;M<K;M++){var O=e.charCodeAt(M);I.add(O)}E.push({text:za,rtl:La,id:G})}}g.set(B,E)}return[2,g]}})})};g([r.property({readOnly:!0})],b.prototype,"supportsTileUpdates",null);g([r.property()],
b.prototype,"config",void 0);g([r.property({dependsOn:["config"]})],b.prototype,"labelingInfo",null);g([r.property({dependsOn:["labelingInfo","fields","spatialReference"]})],b.prototype,"labelClassInfos",null);g([r.property({dependsOn:["service"]})],b.prototype,"hydrate",null);g([r.property({dependsOn:["config","service","renderer","fields","tileStore"]})],b.prototype,"factory",null);g([r.property({dependsOn:["config"],readOnly:!0})],b.prototype,"renderer",null);g([r.property({readOnly:!0})],b.prototype,
"updating",null);g([r.property({dependsOn:["service"]})],b.prototype,"fields",null);return b=g([r.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],b)}(r.declared(C.default));a.default=d})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(d,a,l){d=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new l(Map,!1,function(a){return a.clear()},c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=
function(a){this._pool.release(a)};a.acquire=function(){return g.acquire()};a.release=function(a){return g.release(a)};return a}();var g=new d(100);return d})},"esri/layers/support/LabelClass":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ./types ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),
function(d,a,l,g,k,e,c,h,m,b,f,p,u,n,r,w){function t(a){return a?"service"===a.origin?!1:!a.layer||!n.isOfType(a.layer,"map-image"):!0}function y(a){return a?(a=z.exec(a))&&(a[1]||a[3])||null:null}var x=new h.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",
esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",
esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),A=/^\s*\{([^}]+)\}\s*$/i,z=
/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]))\s*$/i;return function(a){function d(b){b=a.call(this,b)||this;b.name=null;b.labelExpression=null;b.labelExpressionInfo=null;b.labelPlacement=null;b.maxScale=0;b.minScale=0;b.symbol=r.defaultTextSymbol2D;b.useCodedValues=void 0;b.where=null;return b}g(d,a);e=d;d.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=
c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],g=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&g;case "OR":return e||g}}return!1}catch(M){console.log("Error.: can't parse \x3d "+a)}};d.prototype.readLabelExpression=function(a,b){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a};d.prototype.writeLabelExpression=
function(a,b,c,d){this.labelExpressionInfo&&t(d)&&(null!=this.labelExpressionInfo.value?a=this.labelExpressionInfo.value.replace(/\{/g,"[").replace(/\}/g,"]"):null!=this.labelExpressionInfo.expression&&(d=y(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)};d.prototype.writeLabelExpressionInfo=function(a,b,c,d){if(null==a&&null!=this.labelExpression&&t(d))a=new p({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)};d.prototype.writeMaxScale=
function(a,b){if(a||this.minScale)b.maxScale=a};d.prototype.writeMinScale=function(a,b){if(a||this.maxScale)b.minScale=a};d.prototype.getLabelExpression=function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this.labelExpression.replace(/\[/g,
"{").replace(/\]/g,"}"),a.type="conventional");return a};d.prototype.getLabelExpressionArcade=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return u.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null};d.prototype.getLabelExpressionSingleField=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(A))&&a[1].trim()||null;case "arcade":return y(a.expression)}return null};
d.prototype.clone=function(){return new e({labelExpression:this.labelExpression,labelExpressionInfo:b.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:b.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};var e;l([f.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);l([f.property({type:String,json:{write:{allowNull:!0}}})],d.prototype,"labelExpression",void 0);l([f.reader("labelExpression")],
d.prototype,"readLabelExpression",null);l([f.writer("labelExpression")],d.prototype,"writeLabelExpression",null);l([f.property({type:p,json:{write:{overridePolicy:function(a,b,c){return t(c)?{allowNull:!0}:{enabled:!1}}}}})],d.prototype,"labelExpressionInfo",void 0);l([f.writer("labelExpressionInfo")],d.prototype,"writeLabelExpressionInfo",null);l([f.property({type:x.apiValues,json:{type:x.jsonValues,read:x.read,write:x.write}})],d.prototype,"labelPlacement",void 0);l([f.property({type:Number})],
d.prototype,"maxScale",void 0);l([f.writer("maxScale")],d.prototype,"writeMaxScale",null);l([f.property({type:Number})],d.prototype,"minScale",void 0);l([f.writer("minScale")],d.prototype,"writeMinScale",null);l([f.property({types:c.symbolTypesLabel,json:{origins:{"web-scene":{types:c.symbolTypesLabel3D,read:w.read,write:w.writeTarget,default:null}},read:w.read,write:w.writeTarget,default:null}})],d.prototype,"symbol",void 0);l([f.property({type:Boolean,json:{write:!0}})],d.prototype,"useCodedValues",
void 0);l([f.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=e=l([f.subclass("esri.layers.support.LabelClass")],d)}(f.declared(m))})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(d,a,l,g,k,e,c){return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||
this;b.value=null;b.expression=null;return b}l(d,a);b=d;d.prototype.readExpression=function(a,b){return b.value?c.convertTemplatedStringToArcade(b.value):a};d.prototype.writeExpression=function(a,b,d){null!=this.value&&(a=c.convertTemplatedStringToArcade(this.value));b[d]=a};d.prototype.clone=function(){return new b({value:this.value,expression:this.expression})};var b;g([e.property({json:{read:!1,write:!1}})],d.prototype,"value",void 0);g([e.property({type:String,json:{write:{allowNull:!0}}})],d.prototype,
"expression",void 0);g([e.reader("expression",["expression","value"])],d.prototype,"readExpression",null);g([e.writer("expression")],d.prototype,"writeExpression",null);return d=b=g([e.subclass("esri.layers.support.LabelExpressionInfo")],d)}(e.declared(k))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(d,a,l){Object.defineProperty(a,"__esModule",{value:!0});var g=/__begin__/ig,k=/__end__/ig,e=/^__begin__/i,c=/__end__$/i;a.convertTemplatedStringToArcade=
function(a){a?(a=l.replace(a,function(a){return'__begin__$feature["'+a+'"]__end__'}),a=e.test(a)?a.replace(e,""):'"'+a,a=c.test(a)?a.replace(c,""):a+'"',a=a.replace(g,'" + ').replace(k,' + "')):a='""';return a}})},"esri/layers/support/types":function(){define(["require","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.isOfType=function(a,d){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var g=Array.isArray(d);return a.some(function(a){a=a.__accessorMetadata__;
if(!a)return!1;a=a.properties;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return g?-1!==d.indexOf(a):a===d})}})},"esri/layers/support/labelFormatUtils":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ../../intl/date ../../intl/number ./FieldsIndex ./fieldUtils ../../support/arcadeOnDemand".split(" "),function(d,a,l,g,k,e,c,h,m,b,
f,p){function u(){return e(this,void 0,void 0,function(){return k(this,function(a){return[2,c.create(function(a){d(["../../core/sql/WhereClause"],a)})]})})}function n(a,b,c,d){a=f.getField(d,a);if(!a)return b;if(null==c[a.name])return"";if(b=a.domain)if("codedValue"===b.type||"coded-value"===b.type){d=c[a.name];var e=0;for(b=b.codedValues;e<b.length;e++){var g=b[e];if(g.code===d)return g.name}}else if("range"===b.type&&(d=+c[a.name],e="range"in b?b.range[1]:b.maxValue,("range"in b?b.range[0]:b.minValue)<=
d&&d<=e))return b.name;c=c[a.name];"date"===a.type||"esriFieldTypeDate"===a.type?c=h.formatDate(c,h.convertDateFormatToIntlOptions("short-date")):f.isNumericField(a)&&(c=m.formatNumber(+c));return c?c:""}Object.defineProperty(a,"__esModule",{value:!0});var r={type:"simple",evaluate:function(a){return null}};a.createLabelFunction=function(a,c,d){return e(this,void 0,void 0,function(){var e,f,g,h,l,m,t,w;return k(this,function(k){switch(k.label){case 0:if(!a||!a.symbol)return[2,r];e=a.where;f=a.getLabelExpression();
return e?[4,u()]:[3,2];case 1:return h=k.sent(),[3,3];case 2:h=null,k.label=3;case 3:return g=h,"arcade"!==f.type?[3,5]:[4,p.createLabelExpression(f.expression,d,c)];case 4:return m=k.sent(),l={type:"arcade",evaluate:function(a){a=m.evaluate({$feature:m.repurposeFeature(a)});return null!=a?a.toString():null}},[3,6];case 5:l={type:"simple",evaluate:function(a){var b=a&&a.attributes;return b?f.expression.replace(/{[^}]*}/g,function(a){return n(a.slice(1,-1),a,b,c)}):null}},k.label=6;case 6:if(e){try{t=
g.WhereClause.create(e,new b(c))}catch(G){return[2,r]}w=l.evaluate;l.evaluate=function(a){return t.testFeature(a)?w(a):null}}return[2,l]}})})};a.formatField=n})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Accessor ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators".split(" "),
function(d,a,l,g,k,e,c,h,m,b){Object.defineProperty(a,"__esModule",{value:!0});d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}l(c,a);c.prototype.initialize=function(){};c.prototype.destroy=function(){};Object.defineProperty(c.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.tileScheme.spatialReference");return a&&a.toJSON()||null},enumerable:!0,
configurable:!0});g([b.property({readOnly:!0})],c.prototype,"supportsTileUpdates",null);g([b.property({constructOnly:!0})],c.prototype,"remoteClient",void 0);g([b.property({constructOnly:!0})],c.prototype,"service",void 0);g([b.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],c.prototype,"spatialReference",null);g([b.property({constructOnly:!0})],c.prototype,"tileInfo",void 0);g([b.property({constructOnly:!0})],c.prototype,"tileStore",void 0);return c=g([b.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],
c)}(b.declared(c,m,h));a.default=d})},"*noref":1}});
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/assignHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/TileInfo ../../ViewState ./controllers ./processors ./support/TileStore ../../tiling/TileInfoView".split(" "),function(d,
a,l,g,k,e,c,h,m,b,f,p,u,n,r,w,t,y,x,A){Object.defineProperty(a,"__esModule",{value:!0});var z=p.getLogger("esri.views.2d.layers.features.Pipeline"),C=new Set;a.getInstances=function(){return C};d=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.controller=null;b.processor=null;b.remoteClient=null;b.tileStore=null;b.service=null;b.viewState=null;return b}l(c,a);c.prototype.initialize=function(){var a=this;this.watch("updating",function(b){a.remoteClient.invoke("setUpdating",
b)});f("esri-performance-tests")&&!f("esri-workers")&&C.add(this)};c.prototype.destroy=function(){f("esri-performance-tests")&&!f("esri-workers")&&C.delete(this);this.controller&&this.controller.destroy();this.processor&&this.processor.destroy()};Object.defineProperty(c.prototype,"updating",{get:function(){var a=this.controller,b=this.processor;return!a||!b||a.updating||b.updating||!1},enumerable:!0,configurable:!0});c.prototype.startup=function(a){var b=a.service,c=a.config,d=a.tileInfo;return k(this,
void 0,void 0,function(){var a;return e(this,function(e){a=new A(r.fromJSON(d));this.service=b;this.tileStore=new x.default(a);return[2,this._configure(c)]})})};c.prototype.update=function(a){var c=a.config,d=a.options;return k(this,void 0,void 0,function(){return e(this,function(a){switch(a.label){case 0:return this.processor&&this.controller?d.layerFilterChanged||d.invalidateFeatureData||d.invalidateMesh?[4,this.controller.update(c,d.layerFilterChanged)]:[3,2]:(z.error(new b("mapview-pipeline",
"Tried to update an unconfigured pipeline.")),[2]);case 1:a.sent(),a.label=2;case 2:return d.invalidateMesh?[4,this.processor.update(c)]:[3,4];case 3:a.sent(),this.controller.invalidate(),a.label=4;case 4:return[4,this.remoteClient.invoke("setUpdating",this.updating)];case 5:return a.sent(),[2]}})})};c.prototype.setViewState=function(a){a=w.fromJSON(a);this._set("viewState",a);this.tileStore&&this.tileStore.setViewState(a);this.controller&&this.controller.setViewState(a)};c.prototype._configure=function(a){return k(this,
void 0,void 0,function(){return e(this,function(b){switch(b.label){case 0:return[4,u.all([m.safeCast(this._handleControllerConfig(a)),m.safeCast(this._handleProcessorConfig(a))])];case 1:return b.sent(),this.controller.processor=this.processor,this.viewState&&this.controller.setViewState(this.viewState),[2]}})})};c.prototype._handleControllerConfig=function(a){return k(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:return[4,this._createController(this.service,
a)];case 1:return b=c.sent(),[4,b.startup()];case 2:return c.sent(),[2,b]}})})};c.prototype._handleProcessorConfig=function(a){return k(this,void 0,void 0,function(){return e(this,function(b){return[2,this._createProcessor(this.service,a)]})})};c.prototype._createController=function(a,b){return k(this,void 0,void 0,function(){var c,d,f,g,h;return e(this,function(e){switch(e.label){case 0:return[4,t.loadControllerModule(a.type)];case 1:return c=e.sent().default,d=this,f=d.tileStore,g=d.remoteClient,
h=new c({service:a,config:b,tileStore:f,remoteClient:g}),this.controller&&this.controller.destroy(),this.controller=h,[2,h]}})})};c.prototype._createProcessor=function(a,b){return k(this,void 0,void 0,function(){var c,d,f,g,h;return e(this,function(e){switch(e.label){case 0:return[4,y.loadProcessorModule(b.renderer.type)];case 1:return c=e.sent().default,d=this,f=d.remoteClient,g=d.tileStore,h=new c({service:a,config:b,tileStore:g,remoteClient:f}),this.processor&&this.processor.destroy(),this.processor=
h,[2,h]}})})};g([n.property()],c.prototype,"controller",void 0);g([n.property()],c.prototype,"processor",void 0);g([n.property({dependsOn:["controller.updating","processor.updating"]})],c.prototype,"updating",null);g([n.property()],c.prototype,"viewState",void 0);return c=g([n.subclass("esri.views.2d.layers.features.Pipeline")],c)}(n.declared(h));a.default=d});