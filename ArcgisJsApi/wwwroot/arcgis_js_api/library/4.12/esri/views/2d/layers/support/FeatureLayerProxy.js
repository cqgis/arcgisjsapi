// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/requireUtils ../../../../core/workers ../../../../core/accessorSupport/decorators module".split(" "),function(h,c,k,f,g,l,m,n,p,q,r,t,e,u){Object.defineProperty(c,"__esModule",
{value:!0});g=function(c){function a(b){return c.call(this,b)||this}k(a,c);a.prototype.initialize=function(){this._controller=q.createAbortController();this.addResolvingPromise(this._startWorker(this._controller.signal))};a.prototype.destroy=function(){this._connection.close();this._controller.abort()};Object.defineProperty(a.prototype,"tileRenderer",{set:function(b){this.client.tileRenderer=b},enumerable:!0,configurable:!0});a.prototype.startup=function(b,a,c){var d=this._controller.signal,d=Array.isArray(c.source)?
{transferList:c.source,signal:d}:void 0;b=b.tileInfo.toJSON();return this._connection.invoke("startup",{service:c,config:a,tileInfo:b},d)};a.prototype.update=function(b,a){return this._connection.invoke("update",{config:b,options:a})};a.prototype.refresh=function(){return this._connection.invoke("controller.refresh")};a.prototype.redraw=function(){return this._connection.invoke("controller.redraw")};a.prototype.setViewState=function(b){return this._connection.invoke("setViewState",b.toJSON())};a.prototype.queryFeatures=
function(b,a){return this._connection.invoke("controller.queryFeatures",b.toJSON(),a)};a.prototype.queryObjectIds=function(b,a){return this._connection.invoke("controller.queryObjectIds",b.toJSON(),a)};a.prototype.queryFeatureCount=function(b,a){return this._connection.invoke("controller.queryFeatureCount",b.toJSON(),a)};a.prototype.queryExtent=function(b,a){return this._connection.invoke("controller.queryExtent",b.toJSON(),a)};a.prototype.queryLatestObservations=function(a,d){return this._connection.invoke("controller.queryLatestObservations",
a.toJSON(),d)};a.prototype.getObjectId=function(a){return this._connection.invoke("controller.getObjectId",a)};a.prototype.getLocalId=function(a){return this._connection.invoke("controller.getLocalId",a)};a.prototype.mapValidLocalIds=function(a){return this._connection.invoke("controller.mapValidLocalIds",a)};a.prototype.onEdits=function(a){return this._connection.invoke("controller.onEdits",{addedFeatures:a.addedFeatures,deletedFeatures:a.deletedFeatures,updatedFeatures:a.updatedFeatures})};a.prototype.enableEvent=
function(a,d){return this._connection.invoke("controller.enableEvent",{name:a,value:d})};a.prototype._startWorker=function(a){return m(this,void 0,void 0,function(){var b,c;return l(this,function(d){switch(d.label){case 0:return b=r.getAbsMid("../features/Pipeline",h,u),[4,t.open(b,{client:this.client,strategy:"dedicated",signal:a})];case 1:return this._connection=c=d.sent(),[2]}})})};f([e.property()],a.prototype,"client",void 0);f([e.property()],a.prototype,"tileRenderer",null);return a=f([e.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],
a)}(e.declared(n,p));c.default=g});