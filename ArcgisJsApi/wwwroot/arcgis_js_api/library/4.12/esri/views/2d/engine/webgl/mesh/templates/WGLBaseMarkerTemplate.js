// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../enums ../../number ../../WGLDisplayRecord ../../materialKey/MaterialKey".split(" "),function(y,d,n,t,u,v,w,x){Object.defineProperty(d,"__esModule",{value:!0});var k=t.getLogger("esri.views.2d.engine.webgl.WGLMarkerTemplateBase");d.default=function(d){return function(d){function e(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];b=d.apply(this,b)||this;b.xOffset=0;b.yOffset=0;b.width=
0;b.height=0;b.geometryType=u.WGLGeometryType.MARKER;return b}n(e,d);e.prototype.writeMesh=function(b,a,c,g,d){var e=x.MarkerMaterialKey.load(this._materialKey),h=a.indexVector,m=a.get("geometry"),f=new w(g,this.geometryType,this._materialKey);a=a.getVector("geometry").vertexCount;b.push(f);f.vertexFrom=a;f.indexFrom=h.length;switch(c){case "esriGeometryPoint":c=d.geometry;b=c.x;c=c.y;this._writeVertices(f,m,g,this._getPos(b,c),e);this._writeIndices(f,h,a);break;case "esriGeometryPolyline":this._writeMany(f,
h,m,a,g,d.geometry.paths[0],e);break;case "esriGeometryPolygon":(c=d.centroid)?(b=c.x,c=c.y,this._writeVertices(f,m,g,this._getPos(b,c),e),this._writeIndices(f,h,a)):k.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(f,h,m,a,g,d.geometry.points,e);break;default:k.error("Unable to handle geometryType: "+c)}};e.prototype._getPos=function(b,a){return v.i1616to32(b,a)};e.prototype._writeMany=function(b,a,c,d,e,k,h){for(var g=
0,f=0,q=0,p=0;p<k.length;p++){var l=k[p],r=l[0],l=l[1],n=this._getPos(r+g,l+f);this._writeVertices(b,c,e,n,h);this._writeIndices(b,a,d+q);g+=r;f+=l;q+=4}};e.prototype._writeVertices=function(b,a,c,d,e){a.push(d);a.push(this._offsetUpperLeft);a.push(this._texUpperLeft);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);a.push(d);a.push(this._offsetUpperRight);a.push(this._texUpperRight);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);
a.push(d);a.push(this._offsetBottomLeft);a.push(this._texBottomLeft);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);a.push(d);a.push(this._offsetBottomRight);a.push(this._texBottomRight);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);b.vertexCount+=4};e.prototype._writeIndices=function(b,a,c){a.push(c+0);a.push(c+1);a.push(c+2);a.push(c+1);a.push(c+3);a.push(c+2);b.indexCount+=6};return e}(d)}});