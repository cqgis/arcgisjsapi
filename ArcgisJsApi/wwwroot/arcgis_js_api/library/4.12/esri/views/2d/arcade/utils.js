// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),function(w,f,h,r,t,u,g,n){function p(a,b,k,c){var e=c.transform,d=c.hasZ;c=c.hasM;l.has(a)||l.set(a,q(k));a=l.get(a)(b.geometry,e,d,c);return h({},b,{geometry:a})}function q(a){var b={};switch(a){case "esriGeometryPoint":return function(a,c,e,d){return g.hydratePoint(c,
b,a,e,d)};case "esriGeometryPolygon":return function(a,c,e,d){return g.hydratePolygon(c,b,a,e,d)};case "esriGeometryPolyline":return function(a,c,e,d){return g.hydratePolyline(c,b,a,e,d)};case "esriGeometryMultipoint":return function(a,c,e,d){return g.hydrateMultipoint(c,b,a,e,d)};default:return m.error(new t("mapview-arcade","Unable to handle geometryType: "+a)),function(a,c,b,d){return a}}}Object.defineProperty(f,"__esModule",{value:!0});var m=u.getLogger("esri.views.2d.support.arcadeOnDemand");
f.callWithOptimizedFeature=function(a,b,k,c,e){var d=c.geometryType,f=c.hasZ;c=c.hasM;b=a.referencesGeometry()?e?p(a,n.convertToFeature(b,d,f,c),d,e):n.convertToFeature(b,d,f,c):b;b=a.repurposeFeature(b);try{return a.evaluate(h({},k,{$feature:b}))}catch(v){return m.warn("Feature arcade evaluation failed:",v),null}};f.callWithFeature=function(a,b,f,c,e){b=a.referencesGeometry()&&e?p(a,b,c,e):b;b=a.repurposeFeature(b);try{return a.evaluate(h({},f,{$feature:b}))}catch(d){return m.warn("Feature arcade evaluation failed:",
d),null}};var l=new r.default;f.createHydrateFactory=q});