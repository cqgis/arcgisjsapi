// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Viewpoint ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),function(f,m,q,e,r,t,c,u,g,v,w,x,y){Object.defineProperty(m,"__esModule",{value:!0});var p=new r({targetGeometry:new u}),n=[0,0];f=function(f){function a(b){b=f.call(this)||this;b._endTimer=null;b.animationManager=
null;return b}q(a,f);a.prototype.initialize=function(){this.pan=new w({navigation:this});this.rotate=new y({navigation:this});this.pinch=new x({navigation:this});this.zoomBox=new v({view:this.view,navigation:this})};a.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null};Object.defineProperty(a.prototype,"momentumEnabled",{get:function(){return!0},enumerable:!0,configurable:!0});a.prototype.begin=function(){this._set("interacting",!0)};a.prototype.end=function(){var b=
this;this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=0);this._endTimer=setTimeout(function(){b._set("interacting",!1)},0)};a.prototype.zoom=function(b,d){void 0===d&&(d=this._getDefaultAnchor());this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>b?this.zoomIn(d):this.zoomOut(d);this.setViewpoint(d,b,0,[0,0])};a.prototype.zoomIn=function(b){void 0===b&&(b=this._getDefaultAnchor());var d=this.view,a=d.scale,c=d.constraints.snapToNextScale(a);
return d.goTo(this._scaleAndRotateViewpoint(p,b,c/a,0),{animate:this.momentumEnabled})};a.prototype.zoomOut=function(b){void 0===b&&(b=this._getDefaultAnchor());var d=this.view,a=d.scale,c=d.constraints.snapToPreviousScale(a);return d.goTo(this._scaleAndRotateViewpoint(p,b,c/a,0),{animate:this.momentumEnabled})};a.prototype.setViewpoint=function(b,d,a,c){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,b,d,a,c);this.end()};a.prototype.continousRotateClockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.rotateBy(a,a,-1)})};a.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.rotateBy(a,a,1)})};a.prototype.resetRotation=function(){this.view.rotation=0};a.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[-10,0])})};a.prototype.continousPanRight=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[10,0])})};a.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[0,10])})};a.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[0,-10])})};a.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();
this.end();this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=0,this._set("interacting",!1))};a.prototype._getDefaultAnchor=function(){var a=this.view.size;n[0]=.5*a[0];n[1]=.5*a[1];return n};a.prototype._scaleAndRotateViewpoint=function(a,d,c,e){var b=this.view,z=b.size,f=b.padding,k=b.constraints,h=b.viewpoint,l=b.scale*c,b=k.canZoomInTo(l),k=k.canZoomOutTo(l);return 1>c&&!b||1<c&&!k?h:g.padAndScaleAndRotateBy(a,h,c,e,d,z,f)};a.prototype._scaleRotateTranslateViewpoint=function(a,c,e,f,
n){var b=this.view,d=b.size,k=b.padding,h=b.constraints,l=b.viewpoint,m=b.scale*e,b=h.canZoomInTo(m),h=h.canZoomOutTo(m);if(1>e&&!b||1<e&&!h)e=1;g.translateBy(l,l,n);return g.padAndScaleAndRotateBy(a,l,e,f,c,d,k)};e([c.property()],a.prototype,"animationManager",void 0);e([c.property({type:Boolean,readOnly:!0})],a.prototype,"interacting",void 0);e([c.property()],a.prototype,"pan",void 0);e([c.property()],a.prototype,"pinch",void 0);e([c.property()],a.prototype,"rotate",void 0);e([c.property()],a.prototype,
"view",void 0);e([c.property()],a.prototype,"zoomBox",void 0);return a=e([c.subclass("esri.views.2d.navigation.MapViewNavigation")],a)}(c.declared(t));m.default=f});