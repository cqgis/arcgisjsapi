// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/unitUtils"],function(r,d,n,l){function k(b,h){h=l.getMetersPerUnitForSR(h);return b/(h*l.inchesPerMeter*n.screenDPI)}Object.defineProperty(d,"__esModule",{value:!0});d.getScale=function(b,h){h=h||b.extent;b=b.width;var g=l.getMetersPerUnitForSR(h&&h.spatialReference);return h&&b?h.width/b*g*l.inchesPerMeter*n.screenDPI:0};d.getResolutionForScale=k;d.getScaleForResolution=function(b,
h){h=l.getMetersPerUnitForSR(h);return b*h*l.inchesPerMeter*n.screenDPI};d.getExtentForScale=function(b,h){var g=b.extent;b=b.width;h=k(h,g.spatialReference);return g.clone().expand(h*b/g.width)}})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(r,
d,n,l,k,b,h,g,e,c,f){function a(c,a){return a?p[c].valueToClassName[a].split(" "):[]}var p={widthBreakpoint:{getValue:function(a){var c=a.viewSize[0];a=a.breakpoints;var f=this.values;return c<=a.xsmall?f.xsmall:c<=a.small?f.small:c<=a.medium?f.medium:c<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var c=a.viewSize[1];a=a.breakpoints;var f=this.values;return c<=a.xsmall?f.xsmall:c<=a.small?f.small:c<=a.medium?f.medium:c<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var c=this.values;return a[1]>=a[0]?c.portrait:c.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},q={xsmall:544,small:768,medium:992,large:1200};return function(f){function b(){var a=
null!==f&&f.apply(this,arguments)||this;a._breakpointsHandles=new g;a.breakpoints=q;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;return a}n(b,f);b.prototype.initialize=function(){this._breakpointsHandles.add(e.init(this,["breakpoints","size"],this._updateClassNames))};b.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};b.prototype._updateClassNames=function(){if(this.container){var c=
h.acquire(),f=h.acquire(),b=!1,e,g,q;for(e in p)g=this[e],q=p[e].getValue({viewSize:this.size,breakpoints:this.breakpoints}),g!==q&&(b=!0,this[e]=q,a(e,g).forEach(function(a){return f.push(a)}),a(e,q).forEach(function(a){return c.push(a)}));b&&(this._applyClassNameChanges(c,f),h.release(c),h.release(f))}};b.prototype._applyClassNameChanges=function(a,c){var f=this.container;f&&(c.forEach(function(a){return f.classList.remove(a)}),a.forEach(function(a){return f.classList.add(a)}))};b.prototype._removeActiveClassNames=
function(){var c=this.container;if(c)for(var f in p)a(f,this[f]).forEach(function(a){return c.classList.remove(a)})};l([c.property({set:function(a){var c=this._get("breakpoints");if(a!==c){c=(c=a)&&c.xsmall<c.small&&c.small<c.medium&&c.medium<c.large;if(!c){var f=JSON.stringify(q,null,2);console.warn("provided breakpoints are not valid, using defaults:"+f)}a=c?a:q;this._set("breakpoints",k({},a))}}})],b.prototype,"breakpoints",void 0);l([c.property()],b.prototype,"orientation",void 0);l([c.property()],
b.prototype,"widthBreakpoint",void 0);l([c.property()],b.prototype,"heightBreakpoint",void 0);return b=l([c.subclass("esri.views.BreakpointsOwner")],b)}(c.declared(b,f))})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/domUtils ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(r,
d,n,l,k,b,h,g,e,c,f,a,p){function q(a){a&&(b.empty(a),a.parentNode&&a.parentNode.removeChild(a))}var v=[0,0];return function(h){function k(){var a=h.call(this)||this;a._domHandles=new g;a._freqInfo={freq:16,time:750};a._overlayRenderTaskHandle=null;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.ui=null;a.userContent=null;a.width=0;a.watch("cursor",function(c){var f=a.surface;f&&f.setAttribute("data-cursor",c)});a.watch("interacting",function(c){var f=a.surface;
f&&f.setAttribute("data-interacting",c.toString())});return a}n(k,h);k.prototype.initialize=function(){var a=this;this.watch("ui",this._handleUIChange);this._wireUI(this.ui);this._focusHandle=this.on("focus",function(){return a.notifyChange("focused")});this._blurHandle=this.on("blur",function(){return a.notifyChange("focused")})};k.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null,this._domHandles.destroy(),
this._focusHandle&&(this._focusHandle.remove(),this._focusHandle=null),this._blurHandle&&(this._blurHandle.remove(),this._blurHandle=null))};Object.defineProperty(k.prototype,"container",{set:function(f){var p=this,g=this._get("container");if(g!==f)if(this._domHandles.remove("dom-size"),this._stopMeasuring(),g&&(g.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
q(this.root),this._set("root",null),b.reparent(this.userContent,g),q(this.userContent),this._set("userContent",null)),f){f.classList.add("esri-view");g=document.createElement("div");g.className="esri-view-user-storage";b.reparent(f,g);f.appendChild(g);this._set("userContent",g);g=document.createElement("div");g.className="esri-view-root";f.insertBefore(g,f.firstChild);this._set("root",g);var h=document.createElement("div");h.className="esri-view-surface";h.setAttribute("role","application");h.tabIndex=
0;g.appendChild(h);this._set("surface",h);var l=new a;g.appendChild(l.surface);this._set("overlay",l);l.watch("needsRender",function(a){a&&!p._overlayRenderTaskHandle?p._overlayRenderTaskHandle=e.addFrameTask({render:function(){p.overlay.render()}}):p._overlayRenderTaskHandle&&(p._overlayRenderTaskHandle.remove(),p._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this._domHandles.add(c.init(this,"size",function(a){var c=a[1];h.classList.toggle("esri-view-surface--inset-outline",a[0]>=document.body.clientWidth||
c>=document.body.clientHeight)}),"dom-size");this._set("container",f);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"focused",{get:function(){var a=document.activeElement===this.surface;return document.hasFocus()&&a},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"popup",{get:function(){return this._get("popup")||
new p({view:this})},set:function(a){var c=this._get("popup");c&&c!==a&&c.destroy();this._set("popup",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});k.prototype.blur=function(){this.surface&&this.surface.blur()};k.prototype.focus=function(){this.surface&&this.surface.focus()};k.prototype.pageToContainer=function(a,c,f){var b=this.position;a-=b[0];c-=b[1];f?(f[0]=a,f[1]=c):f=[a,c];return f};
k.prototype.containerToPage=function(a,c,f){var b=this.position;a+=b[0];c+=b[1];f?(f[0]=a,f[1]=c):f=[a,c];return f};k.prototype._handleUIChange=function(a,c){c&&(this._domHandles.remove("ui"),c.destroy());a&&this._wireUI(a);this._set("ui",a)};k.prototype._wireUI=function(a){this._domHandles.remove("ui");a&&(a.view=this,this._domHandles.add([c.init(this,"root",function(c){if(c){var f=document.createElement("div");c.appendChild(f);c=f}else c=null;a.container=c}),c.init(this,"popup",function(c,f){f&&
a.remove(f,"popup");c&&(c.view=a.view,a.add(c,{key:"popup",position:"manual"}))})],"ui"))};k.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};k.prototype._startMeasuring=function(){var a=this,c=this._freqInfo;c.freq=16;c.time=750;this._domHandles.add([function(){var a=function(){c.freq=16;c.time=750};window.addEventListener("resize",a);return{remove:function(){window.removeEventListener("resize",a)}}}(),e.addFrameTask({prepare:function(c){var f=
a._measure(),b=a._freqInfo;b.time+=c.deltaTime;f&&(b.freq=16,a._get("resizing")||a._set("resizing",!0));b.time<b.freq||(b.time=0,a._position()||f?b.freq=16:b.freq=Math.min(750,2*b.freq),!f&&512<=b.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};k.prototype._measure=function(){var a=this.container,c=a?a.clientWidth:0,f=a?a.clientHeight:0;if(0===c||0===f||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",
!0),!1;var a=this.width,b=this.height;if(c===a&&f===b)return this.suspended&&this._set("suspended",!1),!1;this._set("width",c);this._set("height",f);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:a,oldHeight:b,width:c,height:f});return!0};k.prototype._position=function(){var a=this.container,c=this.position,f=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();v[0]=a.left+f.pageXOffset;v[1]=a.top+f.pageYOffset;return c&&v[0]===c[0]&&v[1]===c[1]?!1:(this._set("position",
[v[0],v[1]]),!0)};k.prototype.forceDOMReadyCycle=function(){};l([f.property({value:null,cast:function(a){return b.byId(a)}})],k.prototype,"container",null);l([f.property({readOnly:!0,dependsOn:["surface"]})],k.prototype,"focused",null);l([f.property({readOnly:!0})],k.prototype,"height",void 0);l([f.property({type:p})],k.prototype,"popup",null);l([f.property({type:a})],k.prototype,"overlay",void 0);l([f.property({readOnly:!0})],k.prototype,"position",void 0);l([f.property({readOnly:!0})],k.prototype,
"resizing",void 0);l([f.property({readOnly:!0})],k.prototype,"root",void 0);l([f.property({value:null,dependsOn:["width","height"],readOnly:!0})],k.prototype,"size",null);l([f.property({readOnly:!0})],k.prototype,"surface",void 0);l([f.property({readOnly:!0})],k.prototype,"suspended",void 0);l([f.property()],k.prototype,"ui",void 0);l([f.property({readOnly:!0})],k.prototype,"userContent",void 0);l([f.property({readOnly:!0})],k.prototype,"width",void 0);return k=l([f.subclass("esri.views.DOMContainer")],
k)}(f.declared(k,h))})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),function(r,d,n,l,k,b,h,g){return function(e){function c(){var c=null!==e&&e.apply(this,arguments)||this;c.items=new b;c._callbacks=new Map;c._projector=g.createProjector();c._hiddenProjector=g.createProjector();return c}n(c,e);Object.defineProperty(c.prototype,
"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});c.prototype.initialize=function(){var c=this,a=document.createElement("div");a.className="esri-overlay-surface";this._set("surface",a);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");a.appendChild(this._hiddenSurface);this._itemsChangeHandle=this.items.on("change",function(a){a.added.map(function(a){var f=function(){return a.render()};c._callbacks.set(a,
f);c._projector.append(c.surface,f)});a.removed.map(function(a){var f=c._projector.detach(c._callbacks.get(a));c.surface.removeChild(f.domNode);c._callbacks.delete(a)})})};c.prototype.addItem=function(c){this.items.add(c)};c.prototype.removeItem=function(c){this.items.remove(c)};c.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=null};c.prototype.render=function(){this._projector.renderNow()};c.prototype.computeBoundingRect=function(c){var a=
this._hiddenSurface,f=this._hiddenProjector,b=null,e=function(){return b=c.render()};f.append(a,e);f.renderNow();var g={left:0,top:0,right:0,bottom:0};if(b&&b.domNode){var h=b.domNode.getBoundingClientRect();g.left=h.left;g.top=h.top;g.right=h.right;g.bottom=h.bottom}for(f.detach(e);a.firstChild;)a.removeChild(a.firstChild);return g};c.prototype.overlaps=function(c,a){c=this.computeBoundingRect(c);a=this.computeBoundingRect(a);return Math.max(c.left,a.left)<=Math.min(c.right,a.right)&&Math.max(c.top,
a.top)<=Math.min(c.bottom,a.bottom)};Object.defineProperty(c.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(c){return c.visible})},enumerable:!0,configurable:!0});c.prototype.renderCanvas=function(c){if(this.items.some(function(a){return a.visible})){var a=c.getContext("2d");a.save();a.font="10px "+getComputedStyle(this.surface).fontFamily;this.items.forEach(function(c){a.save();c.renderCanvas(a);a.restore()});a.restore()}};l([h.property({readOnly:!0})],c.prototype,"surface",
void 0);l([h.property({readOnly:!0})],c.prototype,"items",void 0);l([h.property({readOnly:!0,dependsOn:["items.length"]})],c.prototype,"needsRender",null);return c=l([h.subclass("esri.views.overlay.ViewOverlay")],c)}(h.declared(k))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){function z(a,c){return void 0===c?"esri-popup__"+a:"esri-popup__"+a+"-"+c}function B(){return h(this,void 0,void 0,function(){return b(this,function(a){return[2,q.create(function(a){r(["./Feature"],function(c){a(c)})})]})})}var C={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},F=p.getLogger("esri.widgets.Popup");return function(p){function q(c){var f=p.call(this)||this;f._blurContainer=!1;f._containerNode=null;f._mainContainerNode=null;
f._featureMenuNode=null;f._actionsMenuNode=null;f._focusContainer=!1;f._focusDockButton=!1;f._focusFeatureMenuButton=!1;f._focusActionsMenuButton=!1;f._focusFirstFeature=!1;f._focusFirstAction=!1;f._handles=new a;f._pointerOffsetInPx=16;f._spinner=null;f.actions=null;f.alignment="auto";f.autoCloseEnabled=null;f.autoOpenEnabled=null;f.defaultPopupTemplateEnabled=null;f.content=null;f.collapsed=!1;f.collapseEnabled=!0;f.dockEnabled=!1;f.featureCount=null;f.features=null;f.featureNavigationEnabled=!0;
f.goToOverride=null;f.highlightEnabled=null;f.location=null;f.featureWidgets=[];f.promises=null;f.selectedFeature=null;f.selectedFeatureIndex=null;f.selectedFeatureWidget=null;f.spinnerEnabled=!0;f.title=null;f.updateLocationEnabled=null;f.view=null;f.viewModel=new w;f.visible=null;f._addSelectedFeatureIndexHandle();f.own([v.watch(f,"viewModel.screenLocation",function(){return f._positionContainer()}),v.watch(f,["viewModel.visible","dockEnabled"],function(){return f._toggleScreenLocationEnabled()}),
v.watch(f,"viewModel.screenLocation",function(a,c){!!a!==!!c&&f.reposition()}),v.watch(f,"viewModel.features",function(){return f._updateFeatureWidgets()}),v.watch(f,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return f.reposition()}),v.watch(f,"spinnerEnabled",function(a){return f._spinnerEnabledChange(a)}),v.watch(f,"viewModel.view.size",function(a,c){return f._updateDockEnabledForViewSize(a,c)}),v.watch(f,
"viewModel.view",function(a,c){return f._viewChange(a,c)}),v.watch(f,"viewModel.view.ready",function(a,c){return f._viewReadyChange(a,c)}),v.watch(f,["viewModel.waitingForResult","viewModel.location"],function(){return f._displaySpinner()}),v.watch(f,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return f._updateFeatureWidget()}),v.watch(f,"selectedFeatureWidget.viewModel.title",function(a){return f._setTitleFromFeatureWidget(a)}),v.watch(f,["selectedFeatureWidget.viewModel.content",
"selectedFeatureWidget.viewModel.waitingForContent"],function(){return f._setContentFromFeatureWidget()}),v.whenFalse(f,"collapsed",function(){"xsmall"===f.get("viewModel.view.widthBreakpoint")&&f.visible&&f.collapseEnabled&&f.viewModel.centerAtLocation()})]);return f}n(q,p);q.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(q.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible?
this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||C},set:function(a){var c=
k({},C),f=this.get("viewModel.view.breakpoints"),b={};f&&(b.width=f.xsmall,b.height=f.xsmall);a=k({},c,a);c=k({},c.breakpoint,b);b=a.breakpoint;!0===b?a.breakpoint=c:"object"===typeof b&&(a.breakpoint=k({},c,b));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",!!a)},
enumerable:!0,configurable:!0});q.prototype.blur=function(){this.visible||F.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};q.prototype.clear=function(){};q.prototype.close=function(){this.visible=!1};q.prototype.focus=function(){this.visible||F.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};q.prototype.next=function(){return null};q.prototype.open=function(a){this._handles.remove("selected-index");
var c={collapsed:a?!!a.collapsed:!1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(c.collapsed=!0);this.set(c);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};q.prototype.previous=function(){return null};q.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};q.prototype.triggerAction=function(a){return null};q.prototype.render=function(){var a=
this,f,b,p,h,q,l,k,t=this.actionsMenuOpen,d=this.collapsed,x=this.collapseEnabled,v=this.dockEnabled,B=this.featureMenuOpen,y=this.featureNavigationEnabled,w=this.featureWidgets,C=this.visible,F=this.viewModel,n=F.content,E=F.featureCount,N=F.pendingPromisesCount,na=F.selectedFeatureIndex,pa=F.title,r=1<E&&y,aa=r?2:3,y=this._divideActions(aa),ga=y.inlineActions,ia=y.menuActions,y=r&&B,F=1<ia.length&&t,sa=r&&this._getPageText(E,na),Aa=this._renderContent(),Ba=u.isRTL(),Ca=!!(this.get("selectedFeatureWidget")?
this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):Aa),Ia=(x=!!(x&&pa&&Ca))&&!y&&d,ra=this.get("viewModel.view.widthBreakpoint"),wa=v?e.undock:e.dock,d=this.currentAlignment,E=this.currentDockPosition,N=N?m.tsx("div",{key:z("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":g.loading,title:g.loading},m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
"esri-rotating")})):null,xa=(f={},f["esri-icon-right-triangle-arrow"]=Ba,f["esri-popup__pagination-previous-icon--rtl"]=Ba,f["esri-icon-left-triangle-arrow"]=!Ba,f["esri-popup__pagination-previous-icon"]=!Ba,f);f=m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",xa)});xa=m.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":e.previous,title:e.previous},
f);f=(b={},b["esri-icon-left-triangle-arrow"]=Ba,b["esri-popup__pagination-next-icon--rtl"]=Ba,b["esri-icon-right-triangle-arrow"]=!Ba,b["esri-popup__pagination-next-icon"]=!Ba,b);b=m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",f)});Ba=m.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":e.next,title:e.next},b);f=u.cssTransition("enter","esri-popup--feature-updated");
b=this.id+"-feature-menu";B=m.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":b,"aria-expanded":B,"aria-label":g.menu,title:g.menu},sa);sa=r?[xa,N||B,Ba]:null;B=this._wouldDockTo();B=(p={},p["esri-icon-minimize"]=v,p["esri-popup__icon--dock-icon"]=
!v,p["esri-icon-dock-right"]=!v&&("top-right"===B||"bottom-right"===B),p["esri-icon-dock-left"]=!v&&("top-left"===B||"bottom-left"===B),p["esri-icon-maximize"]=!v&&"top-center"===B,p["esri-icon-dock-bottom"]=!v&&"bottom-center"===B,p);p=m.tsx("span",{"aria-hidden":"true",class:this.classes(B,"esri-popup__icon")});p="xsmall"!==ra&&this.get("dockOptions.buttonEnabled")?m.tsx("div",{role:"button","aria-label":wa,title:wa,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},p):null;B=(h={},h["esri-popup__header-container--button"]=x,h);ra=x?"button":"heading";wa=x?Ia?g.expand:g.collapse:"";h=this.id+"-popup-title";pa=pa?m.tsx("div",{class:this.classes("esri-popup__header-container",B),key:pa,enterAnimation:f,id:h,role:ra,"aria-label":wa,title:wa,tabIndex:x?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
m.tsx("h2",{class:"esri-popup__header-title",innerHTML:pa})):null;B=m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});B=m.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":g.close,title:g.close},B);p=m.tsx("header",{class:"esri-popup__header"},pa,m.tsx("div",{class:"esri-popup__header-buttons"},p,B));B=this.id+"-popup-content";n=!Ca||x&&Ia?null:m.tsx("article",{key:n,enterAnimation:f,
id:B,class:"esri-popup__content"},Aa);Ca="bottom-left"===d||"bottom-center"===d||"bottom-right"===d||"top-left"===E||"top-center"===E||"top-right"===E;Aa="top-left"===d||"top-center"===d||"top-right"===d||"bottom-left"===E||"bottom-center"===E||"bottom-right"===E;f=t?g.close:g.open;f=ia.length?m.tsx("div",{key:z("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":t?
this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":f,title:f},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;ra=ga.length&&ga.toArray().map(function(c,f){return a._renderAction({action:c,index:f,key:"actions",type:"inline"})});t=ia.length&&t?m.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+
"-actions-menu-button",key:z("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ia.toArray().map(function(c,f){return a._renderAction({action:c,index:f+aa,key:"actions",type:"menu-item"})})):null;t=ra?m.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},ra,f,t):null;sa=r?m.tsx("section",{key:z("navigation"),class:this.classes("esri-popup__navigation")},
sa):null;ia=(q={},q["esri-popup__footer--has-pagination"]=r,q["esri-popup__footer--has-actions"]=!!ga.length,q["esri-popup__footer--has-actions-menu"]=!!ia.length,q);q=r||ga.length?m.tsx("div",{key:z("feature-buttons"),class:this.classes("esri-popup__footer",ia)},t,sa):null;na=this._renderFeatureMenuNode(w,na,b);w=c.substitute(e.selectedFeatures,{total:w.length});ga=m.tsx("section",{key:z("menu"),class:"esri-popup__feature-menu"},m.tsx("h2",{class:"esri-popup__feature-menu-header"},w),m.tsx("nav",
{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},na));w=v?null:m.tsx("div",{key:z("pointer"),class:"esri-popup__pointer",role:"presentation"},m.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}));na=this.get("selectedFeature.layer.title");r=this.get("selectedFeature.layer.id");x=(l={},l["esri-popup--shadow"]=v,l["esri-popup--is-collapsible"]=x,l["esri-popup--is-collapsed"]=
Ia,l);l=(k={},k["esri-popup--aligned-top-center"]=C&&"top-center"===d,k["esri-popup--aligned-bottom-center"]=C&&"bottom-center"===d,k["esri-popup--aligned-top-left"]=C&&"top-left"===d,k["esri-popup--aligned-bottom-left"]=C&&"bottom-left"===d,k["esri-popup--aligned-top-right"]=C&&"top-right"===d,k["esri-popup--aligned-bottom-right"]="bottom-right"===d,k["esri-popup--is-docked"]=C&&v,k["esri-popup--shadow"]=C&&!v,k["esri-popup--is-docked-top-left"]=C&&"top-left"===E,k["esri-popup--is-docked-top-center"]=
C&&"top-center"===E,k["esri-popup--is-docked-top-right"]=C&&"top-right"===E,k["esri-popup--is-docked-bottom-left"]=C&&"bottom-left"===E,k["esri-popup--is-docked-bottom-center"]=C&&"bottom-center"===E,k["esri-popup--is-docked-bottom-right"]=C&&"bottom-right"===E,k["esri-popup--feature-menu-open"]=C&&y,k["esri-popup--actions-menu-open"]=C&&F,k);k=Ca?ga:null;v=Aa?ga:null;y=Ca?q:null;F=Aa?q:null;k=m.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",x),tabIndex:-1,role:"dialog",
"aria-labelledby":pa?h:"","aria-describedby":n?B:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},y,k,p,n,F,v);return m.tsx("div",{key:z("base"),class:this.classes("esri-popup",l),role:"presentation","data-layer-title":na,"data-layer-id":r,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},C?[k,w]:null)};q.prototype._divideActions=function(a){var c=this.viewModel.allActions;return{inlineActions:c.slice(0,
a),menuActions:c.slice(a)}};q.prototype._featureMenuOpenChanged=function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};q.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};q.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||"")};q.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};q.prototype._handleFeatureMenuKeyup=
function(a){"Escape"===f.eventKey(a)&&(a.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};q.prototype._handleActionMenuKeyup=function(a){"Escape"===f.eventKey(a)&&(a.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};q.prototype._handleFeatureMenuItemKeyup=function(a){var c=f.eventKey(a),b=this._featureMenuNode,e=a.currentTarget["data-feature-index"];if(b){var b=b.querySelectorAll("li"),g=b.length;"ArrowUp"===
c?(a.stopPropagation(),b[(e-1+g)%g].focus()):"ArrowDown"===c?(a.stopPropagation(),b[(e+1+g)%g].focus()):"Home"===c?(a.stopPropagation(),b[0].focus()):"End"===c&&(a.stopPropagation(),b[b.length-1].focus())}};q.prototype._handleActionMenuItemKeyup=function(a){var c=f.eventKey(a),b=this._actionsMenuNode,e=a.currentTarget["data-action-index"];if(b){var b=b.querySelectorAll("li"),g=b.length;"ArrowUp"===c?(a.stopPropagation(),b[(e-1+g)%g].focus()):"ArrowDown"===c?(a.stopPropagation(),b[(e+1+g)%g].focus()):
"Home"===c?(a.stopPropagation(),b[0].focus()):"End"===c&&(a.stopPropagation(),b[b.length-1].focus())}};q.prototype._handleMainKeyup=function(a){var c=f.eventKey(a);"ArrowLeft"===c&&(a.stopPropagation(),this.previous());"ArrowRight"===c&&(a.stopPropagation(),this.next())};q.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};q.prototype._displaySpinner=function(){var a=this._spinner;if(a){var c=this.viewModel,f=c.location;c.waitingForResult?
a.show({location:f}):a.hide()}};q.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};q.prototype._renderAction=function(a){var f=this,b,e,g=a.action,p=a.index,h=a.key;a=a.type;var u=v.watch(g,"active className disabled id title image visible".split(" "),function(){return f.scheduleRender()});this._handles.add(u,h);var u=this.get("selectedFeature.attributes"),h=g.title,q=g.className,k=g.image,q=k||q?q:"esri-icon-default-action",h=h&&u?c.substitute(h,u):h,l=q&&u?c.substitute(q,
u):q,u=k&&u?c.substitute(k,u):k,k=(b={},b["esri-icon-loading-indicator"]=g.active,b["esri-rotating"]=g.active,b["esri-popup__icon"]=!!q,b["esri-popup__action-image"]=!g.active&&!!u,b);l&&(k[l]=!g.active);b=(e={},e["esri-popup__action"]="toggle"!==g.type,e["esri-popup__action-toggle"]="toggle"===g.type,e["esri-popup__action-toggle--on"]="toggle"===g.type&&g.value,e["esri-popup__button--disabled"]=g.disabled,e);e=m.tsx("span",{key:"text",class:"esri-popup__action-text"},h);e=[m.tsx("span",{key:"icon",
"aria-hidden":"true",class:this.classes("esri-popup__icon",k),styles:this._getIconStyles(u)}),e];p="menu-item"===a?m.tsx("li",{key:g,role:"menuitem",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",b),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":p,onclick:this._triggerAction,onkeydown:this._triggerAction},e):m.tsx("div",{key:g,role:"button",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",b),onkeyup:this._handleActionMenuItemKeyup,
bind:this,"data-action-index":p,onclick:this._triggerAction,onkeydown:this._triggerAction},e);return g.visible?p:null};q.prototype._addSelectedFeatureIndexHandle=function(){var a=this,c=v.watch(this,"viewModel.selectedFeatureIndex",function(c,f){return a._selectedFeatureIndexUpdated(c,f)});this._handles.add(c,"selected-index")};q.prototype._selectedFeatureIndexUpdated=function(a,c){this.featureCount&&a!==c&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};q.prototype._updateFeatureWidget=function(){this._set("selectedFeatureWidget",
this.featureWidgets[this.viewModel.selectedFeatureIndex]||null)};q.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};q.prototype._updateFeatureWidgets=function(){return h(this,void 0,void 0,function(){var a,c,f,e,g,p,h=this;return b(this,function(b){switch(b.label){case 0:return a=this,c=a.features,f=a.featureWidgets,c&&c.length?[4,B()]:(this._destroyFeatureWidgets(),[2]);case 1:return e=b.sent(),g=f.slice(0),p=
[],c.forEach(function(a,c){if(a){var f=null;g.some(function(c,b){c&&c.graphic===a&&(f=c,g.splice(b,1));return!!f});if(f)p[c]=f;else{var b=new e({defaultPopupTemplateEnabled:h.defaultPopupTemplateEnabled,graphic:a,spatialReference:h.get("view.spatialReference"),map:h.get("view.map")});b.visibleElements=k({},b.visibleElements,{title:!1});p[c]=b}}}),g.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",p),[2]}})})};q.prototype._isScreenLocationWithinView=function(a,c){return-1<a.x&&
-1<a.y&&a.x<=c.width&&a.y<=c.height};q.prototype._isOutsideView=function(a){var c=a.popupHeight,f=a.popupWidth,b=a.screenLocation,e=a.side;a=a.view;if(isNaN(f)||isNaN(c)||!a||!b)return!1;var g=a.padding;return"right"===e&&b.x+f/2>a.width-g.right||"left"===e&&b.x-f/2<g.left||"top"===e&&b.y-c<g.top||"bottom"===e&&b.y+c>a.height-g.bottom?!0:!1};q.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,c=this._containerNode,f=this._mainContainerNode,b=this.viewModel,e=b.screenLocation,
b=b.view;if(!e||!b||!c)return"top-center";if(!this._isScreenLocationWithinView(e,b))return this._get("currentAlignment")||"top-center";var g=f?window.getComputedStyle(f,null):null,f=g?parseInt(g.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,g=g?parseInt(g.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,p=c.getBoundingClientRect(),c=p.width+a,p=Math.max(p.height,f,g)+a,a=this._isOutsideView({popupHeight:p,popupWidth:c,screenLocation:e,side:"right",view:b}),f=this._isOutsideView({popupHeight:p,
popupWidth:c,screenLocation:e,side:"left",view:b}),g=this._isOutsideView({popupHeight:p,popupWidth:c,screenLocation:e,side:"top",view:b}),e=this._isOutsideView({popupHeight:p,popupWidth:c,screenLocation:e,side:"bottom",view:b});return f?g?"bottom-right":"top-right":a?g?"bottom-left":"top-left":g?e?"top-center":"bottom-center":"top-center"};q.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?
a.call(this):a};q.prototype._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};q.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};q.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};q.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};
q.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};q.prototype._renderFeatureMenuItemNode=function(a,c,f){var b,p=c===f,h=(b={},b["esri-popup__feature-menu-item--selected"]=p,b);b=p?m.tsx("span",{key:z("feature-menu-selected-feature-"+f),title:e.selectedFeature,"aria-label":e.selectedFeature,class:"esri-icon-check-mark"}):null;a=m.tsx("span",{innerHTML:a.title||g.untitled});return m.tsx("li",{role:"menuitem",tabIndex:-1,key:z("feature-menu-feature-"+f),class:this.classes(h,
"esri-popup__feature-menu-item"),bind:this,"data-feature-index":c,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},m.tsx("span",{class:"esri-popup__feature-menu-title"},a,b))};q.prototype._renderFeatureMenuNode=function(a,c,f){var b=this;return 1<a.length?m.tsx("ol",{class:"esri-popup__feature-menu-list",id:f,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},
a.map(function(a,f){return b._renderFeatureMenuItemNode(a,f,c)})):null};q.prototype._determineCurrentDockPosition=function(){var a=this.get("viewModel.view"),c=u.isRTL()?"top-left":"top-right";if(!a)return c;var f=a.padding||{left:0,right:0,top:0,bottom:0},f=a.width-f.left-f.right;return(a=a.get("breakpoints"))&&f<=a.xsmall?"bottom-center":c};q.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===typeof a)return m.tsx("div",{key:a,innerHTML:a});if(m.isWidget(a)&&
!a.destroyed)return m.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return m.tsx("div",{key:a,bind:a,afterCreate:this._attachToNode});if(m.isWidgetBase(a))return m.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};q.prototype._attachToNode=function(a){a.appendChild(this)};q.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var c=this.viewModel.screenLocation,f=a.getBoundingClientRect().width;if(c=this._calculatePositionStyle(c,
f))a.style.top=c.top,a.style.left=c.left,a.style.bottom=c.bottom,a.style.right=c.right}};q.prototype._calculateFullWidth=function(a){var c=this.currentAlignment,f=this._pointerOffsetInPx;return"top-left"===c||"bottom-left"===c||"top-right"===c||"bottom-right"===c?a+f:a};q.prototype._calculateAlignmentPosition=function(a,c,f,b){var e=this.currentAlignment,g=this._pointerOffsetInPx;b/=2;var p=f.height-c;f=f.width-a;var h=this.view.padding;if("bottom-center"===e)return{top:c+g-h.top,left:a-b-h.left};
if("top-left"===e)return{bottom:p+g-h.bottom,right:f+g-h.right};if("bottom-left"===e)return{top:c+g-h.top,right:f+g-h.right};if("top-right"===e)return{bottom:p+g-h.bottom,left:a+g-h.left};if("bottom-right"===e)return{top:c+g-h.top,left:a+g-h.left};if("top-center"===e)return{bottom:p+g-h.bottom,left:a-b-h.left}};q.prototype._calculatePositionStyle=function(a,c){var f=this.view;if(f){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&c&&(c=this._calculateFullWidth(c),a=this._calculateAlignmentPosition(a.x,
a.y,f,c)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};q.prototype._viewChange=function(a,c){a&&c&&(this.close(),this.clear())};q.prototype._viewReadyChange=function(a,c){a?(a=this.get("viewModel.view"),this._wireUpView(a)):c&&(this.close(),this.clear())};q.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};
q.prototype._dockingThresholdCrossed=function(a,c,f){var b=a[0];a=a[1];var e=c[0];c=c[1];var g=f.width;f=f.height;return b<=g&&e>g||b>g&&e<=g||a<=f&&c>f||a>f&&c<=f};q.prototype._updateDockEnabledForViewSize=function(a,c){if(a&&c){var f=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},b=f.left+f.right,e=f.top+f.bottom,f=[],g=[];f[0]=a[0]-b;f[1]=a[1]-e;g[0]=c[0]-b;g[1]=c[1]-e;a=this.dockOptions;this._dockingThresholdCrossed(f,g,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};
q.prototype._focusDockButtonNode=function(a){this._focusDockButton&&(this._focusDockButton=!1,a.focus())};q.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};q.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};q.prototype._actionsMenuNodeUpdated=
function(a){(this._actionsMenuNode=a)&&this._focusFirstAction&&(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};q.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};q.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};q.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};q.prototype._toggleScreenLocationEnabled=
function(){var a=this.dockEnabled,c=this.viewModel;c&&(c.screenLocationEnabled=this.visible&&!a)};q.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var c=this.get("viewModel.view.ui"),f=c.width,c=c.height;if(isNaN(f)||isNaN(c))return!1;f=a.hasOwnProperty("width")&&f<=a.width;a=a.hasOwnProperty("height")&&c<=a.height;return f||a};q.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};q.prototype._getPageText=function(a,
f){return c.substitute(e.pageText,{index:f+1,total:a})};q.prototype._destroySpinner=function(){var a=this._spinner,c=this.view;a&&(c&&c.ui&&c.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};q.prototype._createSpinner=function(a){a&&(this._spinner=new y({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};q.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};q.prototype._close=function(){this.close();this.view&&this.view.focus()};q.prototype._toggleDockEnabled=
function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};q.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};q.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=!1;this.actionsMenuOpen=a};q.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var c=this.viewModel.allActions.getItemAt(a);
c&&"toggle"===c.type&&(c.value=!c.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};q.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};q.prototype._next=function(){this.next()};q.prototype._previous=function(){this.previous()};l([t.aliasOf("viewModel.actions"),m.renderable()],q.prototype,"actions",void 0);l([t.property({dependsOn:["viewModel.visible"]}),
m.renderable()],q.prototype,"actionsMenuOpen",null);l([t.property()],q.prototype,"alignment",void 0);l([t.aliasOf("viewModel.autoCloseEnabled")],q.prototype,"autoCloseEnabled",void 0);l([t.aliasOf("viewModel.autoOpenEnabled")],q.prototype,"autoOpenEnabled",void 0);l([t.aliasOf("viewModel.defaultPopupTemplateEnabled")],q.prototype,"defaultPopupTemplateEnabled",void 0);l([t.aliasOf("viewModel.content"),m.renderable()],q.prototype,"content",void 0);l([t.property(),m.renderable()],q.prototype,"collapsed",
void 0);l([t.property(),m.renderable()],q.prototype,"collapseEnabled",void 0);l([t.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),m.renderable()],q.prototype,"currentAlignment",null);l([t.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),m.renderable()],q.prototype,"currentDockPosition",null);l([t.property(),m.renderable()],q.prototype,"dockOptions",null);l([t.property(),m.renderable()],q.prototype,"dockEnabled",void 0);l([t.aliasOf("viewModel.featureCount"),
m.renderable()],q.prototype,"featureCount",void 0);l([t.property({dependsOn:["viewModel.visible"]}),m.renderable()],q.prototype,"featureMenuOpen",null);l([t.aliasOf("viewModel.features"),m.renderable()],q.prototype,"features",void 0);l([t.property(),m.renderable()],q.prototype,"featureNavigationEnabled",void 0);l([t.aliasOf("viewModel.goToOverride")],q.prototype,"goToOverride",void 0);l([t.aliasOf("viewModel.highlightEnabled")],q.prototype,"highlightEnabled",void 0);l([t.aliasOf("viewModel.location"),
m.renderable()],q.prototype,"location",void 0);l([t.property({readOnly:!0}),m.renderable()],q.prototype,"featureWidgets",void 0);l([t.aliasOf("viewModel.promises")],q.prototype,"promises",void 0);l([t.aliasOf("viewModel.selectedFeature"),m.renderable()],q.prototype,"selectedFeature",void 0);l([t.aliasOf("viewModel.selectedFeatureIndex"),m.renderable()],q.prototype,"selectedFeatureIndex",void 0);l([t.property({readOnly:!0}),m.renderable()],q.prototype,"selectedFeatureWidget",void 0);l([t.property()],
q.prototype,"spinnerEnabled",void 0);l([t.aliasOf("viewModel.title"),m.renderable()],q.prototype,"title",void 0);l([t.aliasOf("viewModel.updateLocationEnabled")],q.prototype,"updateLocationEnabled",void 0);l([t.aliasOf("viewModel.view")],q.prototype,"view",void 0);l([t.property({type:w}),m.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
m.vmEvent(["triggerAction","trigger-action"])],q.prototype,"viewModel",void 0);l([t.aliasOf("viewModel.visible"),m.renderable()],q.prototype,"visible",void 0);l([t.aliasOf("viewModel.clear")],q.prototype,"clear",null);l([t.aliasOf("viewModel.next")],q.prototype,"next",null);l([t.aliasOf("viewModel.previous")],q.prototype,"previous",null);l([t.aliasOf("viewModel.triggerAction")],q.prototype,"triggerAction",null);l([m.accessibleHandler()],q.prototype,"_toggleCollapsed",null);l([m.accessibleHandler()],
q.prototype,"_close",null);l([m.accessibleHandler()],q.prototype,"_toggleDockEnabled",null);l([m.accessibleHandler()],q.prototype,"_toggleFeatureMenu",null);l([m.accessibleHandler()],q.prototype,"_toggleActionsMenu",null);l([m.accessibleHandler()],q.prototype,"_triggerAction",null);l([m.accessibleHandler()],q.prototype,"_selectFeature",null);l([m.accessibleHandler()],q.prototype,"_next",null);l([m.accessibleHandler()],q.prototype,"_previous",null);return q=l([t.subclass("esri.widgets.Popup")],q)}(t.declared(x))})},
"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(f){function a(a){a=f.call(this)||this;a._animationDelay=500;a._animationPromise=null;a.location=null;a.view=null;a.viewModel=new e;a.visible=!1;return a}n(a,f);a.prototype.postInitialize=
function(){var a=this;this.own([b.watch(this,"visible",function(c){return a._visibleChange(c)})])};a.prototype.destroy=function(){this._animationPromise=null};a.prototype.show=function(a){var c=this,f=a.location;a=a.promise;f&&(this.viewModel.location=f);this.visible=!0;f=function(){return c.hide()};a&&a.catch(function(){}).then(f)};a.prototype.hide=function(){this.visible=!1};a.prototype.render=function(){var a,f=this.visible,b=!!this.viewModel.screenLocation,f=(a={},a["esri-spinner--start"]=f&&
b,a["esri-spinner--finish"]=!f&&b,a);a=this._getPositionStyles();return c.tsx("div",{class:this.classes("esri-spinner",f),styles:a})};a.prototype._visibleChange=function(a){var c=this;if(a)this.viewModel.screenLocationEnabled=!0;else{var f=k.after(this._animationDelay);this._animationPromise=f;f.catch(function(){}).then(function(){c._animationPromise===f&&(c.viewModel.screenLocationEnabled=!1,c._animationPromise=null)})}};a.prototype._getPositionStyles=function(){var a=this.viewModel,c=a.screenLocation,
a=a.view;if(!a||!c)return{};a=a.padding;return{left:c.x-a.left+"px",top:c.y-a.top+"px"}};l([h.aliasOf("viewModel.location")],a.prototype,"location",void 0);l([h.aliasOf("viewModel.view")],a.prototype,"view",void 0);l([h.property({type:e}),c.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],a.prototype,"viewModel",void 0);l([h.aliasOf("viewModel.visible")],a.prototype,"visible",void 0);return a=l([h.subclass("esri.widgets.Spinner")],a)}(h.declared(g))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),
function(r,d,n,l,k,b){return function(b){function g(e){e=b.call(this,e)||this;e.visible=!1;return e}n(g,b);l([k.property()],g.prototype,"visible",void 0);return g=l([k.subclass("esri.widgets.CompassViewModel")],g)}(k.declared(b))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(f){function a(a){var c=f.call(this)||this;c._anchorHandles=new h;c.location=null;c.screenLocation=null;c.screenLocationEnabled=!1;c.view=null;c._anchorHandles.add([e.watch(c,["screenLocationEnabled","location","view.size","view.stationary"],function(){return c._updateScreenPointAndHandle()}),e.watch(c,["view","view.ready"],function(){return c._wireUpView()})]);return c}n(a,f);a.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();
this._viewpointHandle=this._anchorHandles=null};a.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var c=this.view,c=g.pausable(c,"3d"===c.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(c,"view");this._viewpointHandle=c;this._toggleWatchingViewpoint()}};a.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};a.prototype._updateScreenPointAndHandle=
function(){this._setScreenLocation();this._toggleWatchingViewpoint()};a.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,c=this.screenLocationEnabled;a&&(this.location&&c?a.resume():a.pause())};a.prototype._setScreenLocation=function(){var a=this.location,c=this.view,f=this.screenLocationEnabled,b=this.get("view.ready"),a=f&&a&&b?c.toScreen(a):null;this._set("screenLocation",a)};l([c.property()],a.prototype,"location",void 0);l([c.property({readOnly:!0})],a.prototype,"screenLocation",
void 0);l([c.property()],a.prototype,"screenLocationEnabled",void 0);l([c.property()],a.prototype,"view",void 0);return a=l([c.subclass("esri.widgets.support.AnchorElementViewModel")],a)}(c.declared(k,b))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../geometry ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){var C=h.ofType({key:"type",defaultKeyValue:"button",base:y,typeMap:{button:x,toggle:w}}),F=f.getLogger("esri.widgets.Popup.PopupViewModel");return function(f){function h(a){a=f.call(this)||this;a._handles=new c;a._pendingPromises=new Set;a._zoomToLocation=null;a._fetchFeaturesController=null;a.actions=new C([u.zoomToFeature.clone()]);a.defaultPopupTemplateEnabled=!1;a.autoCloseEnabled=!1;a.autoOpenEnabled=!0;a.content=null;a.highlightEnabled=
!0;a.title=null;a.updateLocationEnabled=!1;a.view=null;a.visible=!1;a.zoomFactor=4;return a}n(h,f);h.prototype.initialize=function(){var c=this;this._handles.add([q.init(this,"autoOpenEnabled",this._autoOpenEnabledChange),this.on("view-change",this._autoClose),q.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),q.watch(this,"view.animation.state",function(a){c._zoomToLocation||(u.zoomToFeature.disabled="waiting-for-target"===a)}),q.watch(this,"location",function(a){var f=
c.selectedFeature;c.updateLocationEnabled&&a&&(!f||f.geometry)&&c.centerAtLocation()}),q.watch(this,"selectedFeature",function(f){if(f){var b=c.location,e=c.updateLocationEnabled,g=c.view;!e&&b||!f.geometry?e&&!f.geometry&&c.centerAtLocation().then(function(){c.location=g.center.clone()}):c.location=a.unwrap(c._getPointFromGeometry(f.geometry))}}),this.on("trigger-action",function(a){return u.triggerAction({event:a,view:c.view})})])};h.prototype.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();
this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(h.prototype,"allActions",{get:function(){var a=this._get("allActions")||new C;a.removeAll();var c=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),f=c&&c.actions;(c=c&&c.overwriteActions?f:f?f.concat(this.actions):this.actions)&&c.filter(Boolean).forEach(function(c){return a.add(c)});
return a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var c=this.pendingPromisesCount,f=this.selectedFeatureIndex,b=this.promiseCount&&a.length;b&&c&&-1===f?this.selectedFeatureIndex=0:b&&-1!==f||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var c=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&c&&(a=t.geographicToWebMercator(a));this._set("location",a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"waitingForResult",
{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var c=this;this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){c._pendingPromises.add(a);
a.then(function(f){c._pendingPromises.has(a)&&c._updateFeatures(f);c._updatePendingPromises(a)},function(){return c._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;return-1===a?null:this.features[a]||null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");
return"number"===typeof a?a:-1},set:function(a){var c=this.featureCount;a=isNaN(a)||-1>a||!c?-1:(a+c)%c;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});h.prototype.centerAtLocation=function(){var a=this.view,c=this._getSelectedTarget();return c?this.callGoTo({target:{target:c,scale:a.scale}}):(a=new e("center-at-location:invalid-target-or-view",
"Cannot center at a location without a target and view.",{target:c,view:a}),F.error(a),p.reject(a))};h.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};h.prototype.open=function(a){var c=this;a=k({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},a);var f=a.fetchFeatures;delete a.fetchFeatures;f=f?this._fetchFeatures(a.location||this.location):p.resolve();this.set(a);f.then(function(){c._setVisibleWhenContentExists()})};h.prototype.triggerAction=
function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};h.prototype.next=function(){this.selectedFeatureIndex+=1;return this};h.prototype.previous=function(){--this.selectedFeatureIndex;return this};h.prototype.zoomToLocation=function(){var a=this,c=this.location,f=this.selectedFeature,b=this.view,g=this.zoomFactor,h=this._getSelectedTarget();if(!h)return c=new e("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:h,view:b}),
F.error(c),p.reject(c);var b=b.scale/g,m=this.get("selectedFeature.geometry")||c,q=m&&"point"===m.type&&this._isScreenSize(f);u.zoomToFeature.active=!0;u.zoomToFeature.disabled=!0;return this._zoomToLocation=c=this.callGoTo({target:{target:h,scale:q?b:void 0}}).then(function(){q&&(a.location=m);u.zoomToFeature.active=!1;u.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){u.zoomToFeature.active=!1;u.zoomToFeature.disabled=!1;a._zoomToLocation=null})};h.prototype._getSelectedTarget=
function(){var a=this.selectedFeature,c=this.location,f=this.view;if(!f)return null;var f="3d"===f.type,b=this.get("selectedFeature.geometry");return f?a||c:b||c};h.prototype._fetchPopupFeatures=function(a){var c=this.view;this._cancelFetchingFeatures();if(!c||!a)return a=new e("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:c}),F.error(a),p.reject(a);var f=p.createAbortController();this._fetchFeaturesController=f;return c.fetchPopupFeatures(a,
{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:f.signal})};h.prototype._autoOpenEnabledChange=function(){var a=this,c=this._handles,f=this.autoOpenEnabled;c.remove("auto-fetch-features");f&&(f=q.on(this,"view","click",function(c){a.view.toolViewManager.handlesClickEvent(c)||"mouse"===c.pointerType&&0!==c.button||a._fetchFeaturesAndOpen(c)}),c.add(f,"auto-fetch-features"))};h.prototype._cancelFetchingFeatures=function(){var a=this._fetchFeaturesController;a&&a.abort();this._fetchFeaturesController=
null};h.prototype._fetchFeatures=function(a){var c=this,f=this.view;if(!a||!f)return a=new e("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:a,view:f}),F.error(a),p.reject(a);a="function"===typeof f.toScreen?f.toScreen(a):null;return this._fetchPopupFeatures(a).then(function(a){c.promises=a.promises})};h.prototype._fetchFeaturesAndOpen=function(a){var c=a.mapPoint,f=this.view;this._fetchPopupFeatures(a.screenPoint).then(function(a){f.popup.open({location:a.location||
c,promises:a.promises});return a})};h.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};h.prototype._setVisibleWhenContentExists=function(){var a=this,c=this._handles,f=this.promiseCount;c.remove("pendingVisible");f?(f=q.init(this,"pendingPromisesCount",function(f){a.featureCount&&(a.set("visible",!0),c.remove("pendingVisible"));f||c.remove("pendingVisible")}),c.add(f,"pendingVisible")):this.set("visible",
!0)};h.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};h.prototype._isScreenSize=function(a){var c=this.view;if("3d"!==c.type||!a||"esri.Graphic"!==a.declaredClass)return!0;if((c=c.getViewForGraphic(a))&&"whenGraphicBounds"in c){var f=!1;c.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){f=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return f}return!0};h.prototype._getPointFromGeometry=
function(c){return a.isNone(c)?null:"point"===c.type?c:"extent"===c.type?c.center:"polygon"===c.type?c.centroid:"multipoint"===c.type||"polyline"===c.type?c.extent.center:null};h.prototype._highlightFeature=function(){var a=this;this._handles.remove("highlight");var c=this.selectedFeature,f=this.highlightEnabled,b=this.view,e=this.visible;if(c&&b&&f&&e){var p=c.layer;p&&b.when().then(function(){g.typeCast(b)().whenLayerView(p).then(function(f){if(f&&m.hasHighlight(f)){var b=p.objectIdField,e=c.attributes;
f=f.highlight(e&&e[b]||c);a._handles.add(f,"highlight")}})})}};h.prototype._updateFeatures=function(a){var c=this.features;a&&a.length&&(c.length?(a=a.filter(function(a){return-1===c.indexOf(a)}),this.features=c.concat(a)):this.features=a)};l([v.property({type:C})],h.prototype,"actions",void 0);l([v.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length",
"selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],h.prototype,"allActions",null);l([v.property({type:Boolean})],h.prototype,"defaultPopupTemplateEnabled",void 0);l([v.property()],h.prototype,"autoCloseEnabled",void 0);l([v.property()],h.prototype,"autoOpenEnabled",void 0);l([v.property()],h.prototype,"content",void 0);l([v.property({readOnly:!0,dependsOn:["features"]})],h.prototype,"featureCount",null);l([v.property()],h.prototype,"features",null);l([v.property()],h.prototype,"highlightEnabled",
void 0);l([v.property({type:b.Point})],h.prototype,"location",null);l([v.property({readOnly:!0,dependsOn:["promises"]})],h.prototype,"pendingPromisesCount",null);l([v.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],h.prototype,"waitingForResult",null);l([v.property({readOnly:!0,dependsOn:["promises"]})],h.prototype,"promiseCount",null);l([v.property()],h.prototype,"promises",null);l([v.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],
h.prototype,"selectedFeature",null);l([v.property({value:-1})],h.prototype,"selectedFeatureIndex",null);l([v.property({readOnly:!0,dependsOn:["view.ready"]})],h.prototype,"state",null);l([v.property()],h.prototype,"title",void 0);l([v.property()],h.prototype,"updateLocationEnabled",void 0);l([v.property()],h.prototype,"view",void 0);l([v.property()],h.prototype,"visible",void 0);l([v.property()],h.prototype,"zoomFactor",void 0);l([v.property()],h.prototype,"centerAtLocation",null);l([v.property()],
h.prototype,"clear",null);l([v.property()],h.prototype,"triggerAction",null);l([v.property()],h.prototype,"next",null);l([v.property()],h.prototype,"previous",null);l([v.property()],h.prototype,"zoomToLocation",null);return h=l([v.subclass("esri.widgets.Popup.PopupViewModel")],h)}(v.declared(z,B))})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.hasHighlight=function(l){return l&&"function"===
typeof l.highlight};d.scaleBoundsPredicate=function(l,k,b){return n.isNone(l)||l>b&&(0===k||l<k)};d.extractSafeScaleBounds=function(l){return{minScale:l.minScale||0,maxScale:l.maxScale||0}}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.zoomToFeature=new h({id:"zoom-to-feature",
title:l.zoom,className:"esri-icon-zoom-in-magnifying-glass"});d.removeSelectedFeature=new h({id:"remove-selected-feature",title:n.remove,className:"esri-icon-trash"});d.all=[d.zoomToFeature,d.removeSelectedFeature];d.triggerAction=function(g){var e=g.view;g=g.event.action;var c=e&&e.popup;if(!g)return b.reject(new k("trigger-action:missing-arguments","Event has no action"));if(!c)return b.reject(new k("trigger-action:missing-arguments","view.popup is missing"));var f=g.disabled,a=g.id;if(!a)return b.reject(new k("trigger-action:invalid-action",
"action.id is missing"));if(f)return b.reject(new k("trigger-action:invalid-action","Action is disabled"));if(a===d.zoomToFeature.id)return c.viewModel.zoomToLocation();if(a===d.removeSelectedFeature.id){c.close();g=c.selectedFeature;if(!g)return b.reject(new k("trigger-action:"+d.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:g}));(c=g.sourceLayer)?c.remove(g):e.graphics.remove(g);return b.resolve()}return b.reject(new k("trigger-action:unknown-action","Unable to identify action to perform",
{action:g,popup:c}))}})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){return function(h){function g(){var b=null!==h&&h.apply(this,arguments)||this;b.goToOverride=null;b.view=null;return b}n(g,h);g.prototype.callGoTo=function(b){var c=this.view;return this.goToOverride?this.goToOverride(c,b):c.goTo(b.target,b.options)};
l([b.property()],g.prototype,"goToOverride",void 0);l([b.property()],g.prototype,"view",void 0);return g=l([b.subclass("esri.widgets.support.GoTo")],g)}(b.declared(k))})},"esri/views/GroundView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./support/GroundViewElevationSampler".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(f){function a(a){a=
f.call(this)||this;a.handles=new h;a.view=null;a.layerViews=new b;return a}n(a,f);a.prototype.initialize=function(){var a=this;this.handles.add(g.when(this,"view.map.ground",function(a){return a.load()}));this.handles.add(this.layerViews.on("after-changes",function(){return a.layerViewsAfterChangesHandler()}))};a.prototype.destroy=function(){this._set("view",null);this.handles&&(this.handles.destroy(),this.handles=null)};Object.defineProperty(a.prototype,"elevationSampler",{get:function(){return this.view&&
"2d"!==this.view.type&&this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new c({view:this.view}):null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"updating",{get:function(){return this.suspended?!1:this.layerViews.some(function(a){return a.updating})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0});a.prototype.layerViewsAfterChangesHandler=
function(){var a=this;this.handles.remove("updating");this.handles.add(this.layerViews.map(function(c){return c.watch("updating",function(){return a.updateUpdating()},!0)}).toArray(),"updating");this.updateUpdating()};a.prototype.updateUpdating=function(){this.notifyChange("updating")};l([e.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain?.ready"]})],a.prototype,"elevationSampler",null);l([e.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],a.prototype,"updating",null);
l([e.property({constructOnly:!0})],a.prototype,"view",void 0);l([e.property({type:b,readOnly:!0})],a.prototype,"layerViews",void 0);l([e.property({readOnly:!0,dependsOn:["view.suspended"]})],a.prototype,"suspended",null);return a=l([e.subclass("esri.views.GroundView")],a)}(e.declared(k))})},"esri/views/support/GroundViewElevationSampler":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../layers/support/ElevationSampler ../3d/terrain/TerrainConst".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){var q=h.getLogger("esri.views.support.GroundViewElevationSampler");return function(b){function h(a){a=b.call(this,a)||this;a.demResolution={min:-1,max:-1};a.noDataValue=p.ELEVATION_NODATA_VALUE;return a}n(h,b);h.prototype.initialize=function(){var a=this;this.view.basemapTerrain.on("elevation-change",function(){return a.emit("changed",{})})};Object.defineProperty(h.prototype,"extent",{get:function(){var a=this.view.basemapTerrain;return a.extent&&a.spatialReference?
e.toExtent(a.extent,a.spatialReference):null},enumerable:!0,configurable:!0});h.prototype.elevationAt=function(a){var b=a.spatialReference,e=this.spatialReference;if(!f.canProject(b,e))return q.error("Cannot sample elevation at a location with spatial reference ("+(b?b.wkid:"unknown")+") different from the view ("+e.wkid+")"),null;c.extentContainsPoint(this.extent,a)||(b=this.extent,q.warn("#elevationAt()","Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler extent ("+(b.xmin+
", "+b.ymin+", "+b.xmax+", "+b.ymax)+")"));return this.view.basemapTerrain.getElevation(a)};h.prototype.queryElevation=function(c){return a.updateGeometryElevation(c.clone(),this)};l([g.property({readOnly:!0})],h.prototype,"demResolution",void 0);l([g.property({readOnly:!0,dependsOn:["view.basemapTerrain.extent","view.basemapTerrain.spatialReference"]})],h.prototype,"extent",null);l([g.property({readOnly:!0})],h.prototype,"noDataValue",void 0);l([g.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],
h.prototype,"spatialReference",void 0);l([g.property({constructOnly:!0})],h.prototype,"view",void 0);return h=l([g.subclass("esri.views.support.GroundViewElevationSampler")],h)}(g.declared(k,b))})},"esri/layers/support/ElevationSampler":function(){define("require exports ../../core/tsSupport/extendsHelper ../../geometry ../../core/compilerUtils ../../core/Logger ../../core/unitUtils ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){function f(c,f){var b=a(c,f.spatialReference);if(!b)return null;switch(c.type){case "point":c.z=f.elevationAt(b)||0;break;case "polyline":v.spatialReference=b.spatialReference;for(var e=c.hasM&&!c.hasZ,g=0;g<c.paths.length;g++)for(var p=c.paths[g],h=b.paths[g],q=0;q<p.length;q++){var l=p[q],t=h[q];v.x=t[0];v.y=t[1];t=f.elevationAt(v)||0;e&&(l[3]=l[2]);l[2]=t}c.hasZ=!0;break;case "multipoint":v.spatialReference=b.spatialReference;e=c.hasM&&!c.hasZ;for(g=0;g<c.points.length;g++)p=
c.points[g],h=b.points[g],v.x=h[0],v.y=h[1],h=f.elevationAt(v)||0,e&&(p[3]=p[2]),p[2]=h;c.hasZ=!0;break;default:k.neverReached(c)}return c}function a(a,f){var b=a.spatialReference;return b.equals(f)?a:c.canProject(b,f)?c.project(a,f):(p.error("Cannot project geometry spatial reference (wkid:"+b.wkid+") to elevation sampler spatial reference (wkid:"+f.wkid+")"),null)}Object.defineProperty(d,"__esModule",{value:!0});var p=b.getLogger("esri.layers.support.ElevationSampler");r=function(){function c(){}
c.prototype.queryElevation=function(a){return f(a.clone(),this)};c.prototype.on=function(a,c){return t};c.prototype.projectIfRequired=function(c,f){return a(c,f)};return c}();d.ElevationSamplerBase=r;var q=function(a){function c(c,f,b){var e=a.call(this)||this;e.tile=c;e.noDataValue=b;e.extent=g.toExtent(c.tile.extent,f.spatialReference);b=h.getMetersPerUnitForSR(f.spatialReference);c=f.lodAt(c.tile.level).resolution*b;e.demResolution={min:c,max:c};return e}n(c,a);Object.defineProperty(c.prototype,
"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});c.prototype.contains=function(a){a=this.projectIfRequired(a,this.spatialReference);return e.extentContainsPoint(this.extent,a)};c.prototype.elevationAt=function(a){var c=this.projectIfRequired(a,this.spatialReference);if(!c)return null;if(!this.contains(a)){var f=this.extent;p.warn("#elevationAt()","Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler extent ("+(f.xmin+", "+
f.ymin+", "+f.xmax+", "+f.ymax)+")")}return this.tile.sample(c.x,c.y)};return c}(r);d.TileElevationSampler=q;r=function(a){function c(c,f,b){var e=a.call(this)||this,p;"number"===typeof f?(e.noDataValue=f,p=null):(p=f,e.noDataValue=b);e.samplers=p?c.map(function(a){return new q(a,p,e.noDataValue)}):c;if(c=e.samplers[0])for(e.extent=c.extent.clone(),c=c.demResolution,e.demResolution={min:c.min,max:c.max},c=1;c<e.samplers.length;c++)f=e.samplers[c],e.extent.union(f.extent),e.demResolution.min=Math.min(e.demResolution.min,
f.demResolution.min),e.demResolution.max=Math.max(e.demResolution.max,f.demResolution.max);else e.extent=g.toExtent(g.create(),p.spatialReference),e.demResolution={min:0,max:0};return e}n(c,a);Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});c.prototype.elevationAt=function(a){var c=this.projectIfRequired(a,this.spatialReference);if(!c)return null;for(var f=0,b=this.samplers;f<b.length;f++){var e=b[f];if(e.contains(c))return e.elevationAt(c)}p.warn("#elevationAt()",
"Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler");return null};return c}(r);d.MultiTileElevationSampler=r;d.updateGeometryElevation=f;var v=new l.Point,t={remove:function(){}}})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","../../../geometry/support/aaBoundingRect","./TilingScheme"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});(function(k){k[k.ELEVATION=0]="ELEVATION";k[k.MAP=1]="MAP";k[k.COUNT=2]="COUNT"})(d.LayerClass||
(d.LayerClass={}));(function(k){k[k.NONE=0]="NONE";k[k.SPLIT=1]="SPLIT";k[k.VSPLITMERGE=2]="VSPLITMERGE";k[k.MERGE=4]="MERGE";k[k.GEOMETRY=8]="GEOMETRY";k[k.TEXTURE=16]="TEXTURE"})(d.TileUpdate||(d.TileUpdate={}));(function(k){k[k.BACK_TO_FRONT=-1]="BACK_TO_FRONT";k[k.NONE=0]="NONE";k[k.FRONT_TO_BACK=1]="FRONT_TO_BACK"})(d.RenderOrder||(d.RenderOrder={}));d.TILE_LOADING_DEBUGLOG=!1;d.MAX_ROOT_TILES=64;d.MAX_PATCH_TESSELATION=512;d.MAX_MEMORY_LOD_BIAS=2.5;d.ELEVATION_NODATA_VALUE=3.40282347E38/10;
d.START_LOADING_LEVEL_DELTA=8;d.LOADING_LEVEL_MODULO=2;d.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;d.TILEMAP_SIZE_EXP=5;d.TILEMAP_SIZE=1<<d.TILEMAP_SIZE_EXP;d.WEBMERCATOR_WORLD_EXTENT=n.create();l.WebMercatorAuxiliarySphere.getExtent(0,0,0,d.WEBMERCATOR_WORLD_EXTENT);d.GEOGRAPHIC_WORLD_EXTENT=n.create([-180,-90,180,90]);d.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.";d.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.";
d.DEFAULT_TILE_BACKGROUND="data:image/png;base64,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";
d.GEOMETRY_VERTEX_STRIDE=5})},"esri/views/3d/terrain/TilingScheme":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/unitUtils ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../layers/support/TileInfo ../support/mathUtils ../support/projectionUtils".split(" "),function(r,d,n,l,k,b,h,g,e,c){var f=c.webMercator.x2lon,a=c.webMercator.y2lat;r=function(){function q(a){var f=q._checkUnsupported(a);if(f)throw f;this.spatialReference=
a.spatialReference;this._isWebMercator=this.spatialReference.isWebMercator;this._isWGS84Comparable=c.canProjectToWGS84ComparableLonLat(this.spatialReference);this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];this.dpi=a.dpi;var b=a.lods.reduce(function(a,c,f){c.level<a.min&&(a.min=c.level,a.minIndex=f);a.max=Math.max(a.max,c.level);return a},{min:Infinity,minIndex:0,max:-Infinity}),e=a.lods[b.minIndex],g=Math.pow(2,e.level),f=e.resolution*g,e=e.scale*g;this.levels=Array(b.max+
1);for(b=0;b<this.levels.length;b++)this.levels[b]={resolution:f,scale:e,tileSize:[f*a.size[0],f*a.size[1]]},f/=2,e/=2}q.prototype.clone=function(){return new q(this.toTileInfo())};q.prototype.toTileInfo=function(){return new g({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize[0],this.pixelSize[1]],spatialReference:this.spatialReference,lods:this.levels.map(function(a,c){return{level:c,scale:a.scale,resolution:a.resolution}})})};q.prototype.getExtent=
function(c,b,g,p,q){void 0===p&&(p=h.create());var m=this.levels[c];c=m.tileSize[0];m=m.tileSize[1];p[0]=this.origin[0]+g*c;p[2]=p[0]+c;p[3]=this.origin[1]-b*m;p[1]=p[3]-m;q&&(this._isWebMercator?(q[0]=f(p[0]),q[1]=a(p[1]),q[2]=f(p[2]),q[3]=a(p[3])):this._isWGS84Comparable&&(q[0]=e.deg2rad(p[0]),q[1]=e.deg2rad(p[1]),q[2]=e.deg2rad(p[2]),q[3]=e.deg2rad(p[3])));return p};q.prototype.getExtentGeometry=function(a,c,f,b){void 0===b&&(b=new n.Extent);this.getExtent(a,c,f,p);b.spatialReference=this.spatialReference;
b.xmin=p[0];b.ymin=p[1];b.xmax=p[2];b.ymax=p[3];b.zmin=void 0;b.zmax=void 0;return b};q.prototype.ensureMaxLod=function(a){if(null==a)return!1;for(var c=!1;this.levels.length<=a;){var c=this.levels[this.levels.length-1],f=c.resolution/2;this.levels.push({resolution:f,scale:c.scale/2,tileSize:[f*this.pixelSize[0],f*this.pixelSize[1]]});c=!0}return c};q.prototype.capMaxLod=function(a){this.levels.length>a+1&&(this.levels.length=a+1)};q.prototype.getMaxLod=function(){return this.levels.length-1};q.prototype.scaleAtLevel=
function(a){return this.levels[0].scale/Math.pow(2,a)};q.prototype.levelAtScale=function(a){var c=this.levels[0].scale;return a>=c?0:Math.log(c/a)*Math.LOG2E};q.prototype.resolutionAtLevel=function(a){return this.levels[0].resolution/Math.pow(2,a)};q.prototype.compatibleWith=function(a){if(!(a instanceof q)){if(q._checkUnsupported(a))return!1;a=new q(a)}if(!a.spatialReference.equals(this.spatialReference)||a.pixelSize[0]!==this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var c=Math.min(this.levels.length,
a.levels.length)-1,f=this.levels[c].resolution,b=.5*f;if(!e.floatEqualAbsolute(a.origin[0],this.origin[0],b)||!e.floatEqualAbsolute(a.origin[1],this.origin[1],b))return!1;b=.5*f/Math.pow(2,c)/Math.max(this.pixelSize[0],this.pixelSize[1])*12;return e.floatEqualAbsolute(f,a.levels[c].resolution,b)};q.prototype.rootTilesInExtent=function(a,c,f){var b=this.levels[0].tileSize;if(0===b[0]||0===b[1])return[];q.computeRowColExtent(a,b,this.origin,p);a=p[1];var e=p[3],g=p[0],h=p[2],k=h-g,l=e-a;k*l>f&&(f=Math.floor(Math.sqrt(f)),
l>f&&(a=a+Math.floor(.5*l)-Math.floor(.5*f),e=a+f),k>f&&(g=g+Math.floor(.5*k)-Math.floor(.5*f),h=g+f));f=Array((h-g)*(e-a));k=0;for(l=a;l<e;l++)for(var d=g;d<h;d++)f[k++]=[0,l,d];c&&(c[0]=this.origin[0]+g*b[0],c[1]=this.origin[1]-e*b[1],c[2]=this.origin[0]+h*b[0],c[3]=this.origin[1]-a*b[1]);return f};q.computeRowColExtent=function(a,c,f,b){var e=.001*(a[2]-a[0]+(a[3]-a[1]));b[0]=Math.floor((a[0]+e-f[0])/c[0]);b[2]=Math.ceil((a[2]-e-f[0])/c[0]);b[1]=Math.floor((f[1]-a[3]+e)/c[1]);b[3]=Math.ceil((f[1]-
a[1]-e)/c[1])};q.isPowerOfTwo=function(a){a=a.lods;var c=a[0].resolution*Math.pow(2,a[0].level);return!a.some(function(a){return!e.floatEqualRelative(a.resolution,c/Math.pow(2,a.level))})};q.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,c){return a-c});for(var c=1;c<a.length;c++)if(a[c]!==a[0]+c)return!0;return!1};q.tileSizeSupported=function(a){var c=a.size[1];return c===a.size[0]&&0===(c&c-1)&&128<=c&&512>=c};q._checkUnsupported=function(a){return a?1>a.lods.length?
new l("tilingscheme:generic","Tiling scheme must have at least one level"):q.isPowerOfTwo(a)?null:new l("tilingscheme:power-of-two","Tiling scheme must be power of two"):new l("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")};q.checkUnsupported=function(a){var c=q._checkUnsupported(a);return c?c:q.hasGapInLevels(a)?new l("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):q.tileSizeSupported(a)?null:new l("tilingscheme:tile-size",
"Tiles must be square and size must be one of [128, 256, 512]")};q.fromExtent=function(a,c){var f=a[2]-a[0],b=a[3]-a[1],e=k.getMetersPerUnitForSR(c),p=1.2*Math.max(f,b);a=new q(new g({size:[256,256],origin:{x:a[0]-.5*(p-f),y:a[3]+.5*(p-b)},lods:[{level:0,resolution:p/256,scale:1/(256/96*.0254/(p*e))}],spatialReference:c}));a.ensureMaxLod(20);return a};q.makeWebMercatorAuxiliarySphere=function(a){void 0===a&&(a=19);var c=new q(q.WebMercatorAuxiliarySphereTileInfo);c.ensureMaxLod(a);return c};q.makeGCSWithTileSize=
function(a,c,f){void 0===c&&(c=256);void 0===f&&(f=16);var b=256/c;a=new q(new g({size:[c,c],origin:{x:-180,y:90,spatialReference:a},spatialReference:a,lods:[{level:0,resolution:.703125*b,scale:2.95497598570834E8*b}]}));a.ensureMaxLod(f);return a};q.WebMercatorAuxiliarySphereTileInfo=new g({size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7,spatialReference:b.WebMercator},spatialReference:b.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]});q.WebMercatorAuxiliarySphere=
q.makeWebMercatorAuxiliarySphere(19);return q}();var p=h.create();return r})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../core/mathUtils ../../../core/maybe ../../../core/unitUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../layers/graphics/dehydratedFeatures ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(a,c,f,b){2===a.length?(Y[0]=a[0],Y[1]=a[1],Y[2]=0,a=Y):a===f&&(h.vec3.copy(Y,a),a=Y);return y(a,c,0,f,b,0,1)}function y(a,c,f,b,e,g,p){void 0===p&&(p=1);c=L(c,e,R).projector;if(l.isNone(c))return!1;if(c===w){if(a===b&&f===g)return!0;for(c=f+3*p;f<c;f++,g++)b[g]=a[f];return!0}for(p=f+3*p;f<p;f+=3,g+=3)c(a,f,b,g);return!0}function x(a,c){if(c.spatialReference===a)return c.spatialReferenceId;c.spatialReference=a;"metersPerUnit"in c&&(c.metersPerUnit=
k.getMetersPerUnitForSR(a,1));return a.wkt===d.SphericalECEFSpatialReference.wkt?c.spatialReferenceId=1:a.isWGS84?c.spatialReferenceId=2:a.isWebMercator?c.spatialReferenceId=3:a.wkt===d.WGS84ECEFSpatialReference.wkt?c.spatialReferenceId=4:4490===a.wkid?c.spatialReferenceId=5:c.spatialReferenceId=0}function w(a,c,f,b){f[b++]=a[c++];f[b++]=a[c++];f[b]=a[c]}function m(a,c,f,b){f[b++]=ca*(a[c++]/p.earthRadius);f[b++]=ca*(Math.PI/2-2*Math.atan(Math.exp(-1*a[c++]/p.earthRadius)));f[b]=a[c]}function u(a,
c,f,b){var e=.4999999*Math.PI,e=n.clamp(X*a[c+1],-e,e),e=Math.sin(e);f[b++]=X*a[c]*p.earthRadius;f[b++]=p.halfEarthRadius*Math.log((1+e)/(1-e));f[b]=a[c+2]}function z(a,c,f){c=x(c,Q);c=Z[c][6];if(l.isNone(c))return!1;c(a,0,Y,0);f!==Y&&(f[0]=Y[0],f[1]=Y[1],2<f.length&&(f[2]=Y[2]));return!0}function B(a,c){Y[0]=a.x;Y[1]=a.y;Y[2]=a.hasZ?a.z:0;return z(Y,a.spatialReference,c)}function C(a,c,f,b){var e=p.earthRadius+a[c+2],g=X*a[c+1];a=X*a[c];c=Math.cos(g);f[b++]=Math.cos(a)*c*e;f[b++]=Math.sin(a)*c*e;
f[b]=Math.sin(g)*e}function F(a,c,f,b){var e=v.Vec3Compact.length(a,c),g=q.asin(a[c+2]/(0===e?1:e)),h=Math.cos(g)*e;a=(0<a[c+1]?1:-1)*q.acos(a[c]/(0===h?1:h));f[b++]=ca*a;f[b++]=ca*g;f[b]=e-p.earthRadius}function E(a,c,f,b){var e=G,g=X*a[c],p=X*a[c+1];a=a[c+2];c=Math.sin(p);var p=Math.cos(p),h=e.a/Math.sqrt(1-e.e2*c*c);f[b++]=(h+a)*p*Math.cos(g);f[b++]=(h+a)*p*Math.sin(g);f[b++]=(h*(1-e.e2)+a)*c}function N(a,c,f,b){var e=G,g=a[c],p=a[c+1];a=a[c+2];var h,m,u,q,l,k;c=Math.abs(a);h=g*g+p*p;m=Math.sqrt(h);
u=h+a*a;q=Math.sqrt(u);g=Math.atan2(p,g);l=a*a/u;u=h/u;p=e.a2/q;h=e.a3-e.a4/q;.3<u?(l=c/q*(1+u*(e.a1+p+l*h)/q),q=Math.asin(l),p=l*l,u=Math.sqrt(1-p)):(u=m/q*(1-l*(e.a5-p-u*h)/q),q=Math.acos(u),p=1-u*u,l=Math.sqrt(p));k=1-e.e2*p;p=e.a/Math.sqrt(k);e=e.a6*p;p=m-p*u;h=c-e*l;c=u*p+l*h;m=u*h-l*p;e=m/(e/k+c);q+=e;0>a&&(q=-q);f[b++]=ca*g;f[b++]=ca*q;f[b]=c+m*e/2}function L(a,c,f){if(f.source.spatialReference===a&&f.dest.spatialReference===c)return f;var b=x(a,f.source),e=x(c,f.dest);0===b&&0===e?a.equals(c)?
f.projector=w:f.projector=null:f.projector=Z[b][e];return f}Object.defineProperty(d,"__esModule",{value:!0});var K,O,I,H,S,P,V,T;d.SphericalECEFSpatialReference=new c({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});d.WGS84ECEFSpatialReference=new c({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
d.canProject=function(a,c){return!!L(a,c,R).projector};d.vectorToVector=t;d.pointToPoint=function(a,c,f,b){void 0===f&&(f=c.spatialReference);void 0===b&&(b=0);Y[0]=a.x;Y[1]=a.y;var e=a.z;Y[2]=void 0!==e?e:b;if(!y(Y,a.spatialReference,0,Y,f,0,1))return!1;c.x=Y[0];c.y=Y[1];c.spatialReference=f;void 0!==e?(c.z=Y[2],c.hasZ=!0):(c.z=void 0,c.hasZ=!1);return!0};d.pointToVector=function(a,c,f,b){void 0===b&&(b=0);Y[0]=a.x;Y[1]=a.y;var e=a.z;Y[2]=void 0!==e?e:b;return y(Y,a.spatialReference,0,c,f,0,1)};
d.vectorToPoint=function(c,f,b,g){b instanceof e?g=g||b.spatialReference:a.isPoint(b)?(b.hasZ=!0,g=g||b.spatialReference):(g=b,b=new e({spatialReference:g}));return y(c,f,0,Y,g,0,1)?(b.x=Y[0],b.y=Y[1],b.z=Y[2],b.spatialReference=g,b):null};d.xyzToVector=function(a,c,f,b,e,g){Y[0]=a;Y[1]=c;Y[2]=f;return y(Y,b,0,e,g,0,1)};d.bufferToBuffer=y;d.computeLinearTransformation=function(a,c,f,e){var g=x(a,Q),p=x(e,J);if(g===p&&1!==p&&(0!==g||a.equals(e)))return b.mat4.identity(f),b.mat4.translate(f,f,c),!0;
if(1===p){a=Z[g][6];p=Z[6][p];if(l.isNone(a)||l.isNone(p))return!1;a(c,0,la,0);p(la,0,ja,0);a=X*la[0];p=X*la[1];c=Math.sin(a);a=Math.cos(a);e=Math.sin(p);p=Math.cos(p);f[0]=-c;f[4]=-e*a;f[8]=p*a;f[12]=ja[0];f[1]=a;f[5]=-e*c;f[9]=p*c;f[13]=ja[1];f[2]=0;f[6]=p;f[10]=e;f[14]=ja[2];f[3]=0;f[7]=0;f[11]=0;f[15]=1;return!0}if(3===p&&(2===g||1===g)){a=Z[g][6];p=Z[6][3];if(l.isNone(a)||l.isNone(p))return!1;a(c,0,la,0);c=X*la[1];p(la,0,ja,0);b.mat4.identity(f);b.mat4.translate(f,f,ja);c=1/Math.cos(c);b.mat4.scale(f,
f,[c,c,1]);return!0}return!1};d.transformDirection=function(a,c,f,b,e){h.vec3.copy(na,a);h.vec3.add(pa,a,c);t(na,f,na,e);t(pa,f,pa,e);h.vec3.subtract(b,pa,na);h.vec3.normalize(b,b)};d.mbsToMbs=function(a,c,f,b){c=L(c,b,U);if(c.projector===w)return f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],!0;if(l.isNone(c.projector))return!1;b=c.source;var e=c.dest;if(3===e.spatialReferenceId){c=Z[b.spatialReferenceId][2];if(l.isNone(c))return!1;c(a,0,la,0);c=Math.abs(X*la[1])+Math.asin(a[3]/(p.earthRadius+a[2]));u(la,
0,f,0);f[3]=c>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(c)*a[3];return!0}c.projector(a,0,f,0);f[3]=a[3]*b.metersPerUnit/e.metersPerUnit;return!0};d.extentToBoundingBox=function(a,c,f){if(null==a)return!1;var b;Y[0]=null!=a.xmin?a.xmin:0;Y[1]=null!=a.ymin?a.ymin:0;Y[2]=null!=a.zmin?a.zmin:0;b=y(Y,a.spatialReference,0,c,f,0,1);Y[0]=null!=a.xmax?a.xmax:0;Y[1]=null!=a.ymax?a.ymax:0;Y[2]=null!=a.zmax?a.zmax:0;b=b&&y(Y,a.spatialReference,0,c,f,3,1);null==a.xmin&&(c[0]=-Infinity);null==a.ymin&&(c[1]=-Infinity);
null==a.zmin&&(c[2]=-Infinity);null==a.xmax&&(c[3]=Infinity);null==a.ymax&&(c[4]=Infinity);null==a.zmax&&(c[5]=Infinity);return b};d.extentToBoundingRect=function(a,c,f){if(null==a)return!1;var b;Y[0]=null!=a.xmin?a.xmin:0;Y[1]=null!=a.ymin?a.ymin:0;Y[2]=null!=a.zmin?a.zmin:0;b=y(Y,a.spatialReference,0,Y,f,0,1);c[0]=Y[0];c[1]=Y[1];Y[0]=null!=a.xmax?a.xmax:0;Y[1]=null!=a.ymax?a.ymax:0;Y[2]=null!=a.zmax?a.zmax:0;b=b&&y(Y,a.spatialReference,0,Y,f,0,1);c[2]=Y[0];c[3]=Y[1];null==a.xmin&&(c[0]=-Infinity);
null==a.ymin&&(c[1]=-Infinity);null==a.xmax&&(c[2]=Infinity);null==a.ymax&&(c[3]=Infinity);return b};d.boundingRectToBoundingRect=function(a,c,b,e){if(null==a)return!1;if(c.equals(e))return f.set(b,a),!0;var g;Y[0]=a[0];Y[1]=a[1];Y[2]=0;g=y(Y,c,0,Y,e,0,1);b[0]=Y[0];b[1]=Y[1];Y[0]=a[2];Y[1]=a[3];Y[2]=0;g=g&&y(Y,c,0,Y,e,0,1);b[2]=Y[0];b[3]=Y[1];return g};(function(a){a.x2lon=function(a){return a/p.earthRadius};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/p.earthRadius))};a.lon2x=function(a){return a*
p.earthRadius};a.lat2y=function(a){a=Math.sin(a);return p.earthRadius/2*Math.log((1+a)/(1-a))}})(d.webMercator||(d.webMercator={}));d.canProjectToWGS84ComparableLonLat=function(a){a=x(a,Q);return!!Z[a][6]};d.vectorToWGS84ComparableLonLat=z;d.pointToWGS84ComparableLonLat=B;d.pointToWGS84ComparableLonLatPoint=function(a,c){var f=x(c.spatialReference,J);return l.isNone(Z[6][f])?!1:B(a,Y)?(c.x=Y[0],c.y=Y[1],c.z=Y[2],!0):!1};d.wgs84ComparableLonLatToECEF=function(a,c,f,b){void 0===b&&(b=0);b=p.earthRadius+
b;var e=Math.cos(f);a[0]=Math.cos(c)*e*b;a[1]=Math.sin(c)*e*b;a[2]=Math.sin(f)*b};var Z=(K={},K[2]=(O={},O[5]=null,O[6]=w,O[1]=C,O[0]=null,O[3]=u,O[2]=w,O[4]=E,O),K[5]=(I={},I[5]=w,I[6]=w,I[1]=C,I[0]=null,I[3]=null,I[2]=null,I[4]=E,I),K[3]=(H={},H[5]=null,H[6]=m,H[1]=function(a,c,f,b){m(a,c,f,b);C(f,b,f,b)},H[0]=null,H[3]=w,H[2]=m,H[4]=function(a,c,f,b){m(a,c,f,b);E(f,b,f,b)},H),K[4]=(S={},S[5]=N,S[6]=N,S[1]=function(a,c,f,b){N(a,c,f,b);C(f,b,f,b)},S[0]=null,S[3]=function(a,c,f,b){N(a,c,f,b);u(f,
b,f,b)},S[2]=N,S[4]=w,S),K[1]=(P={},P[5]=F,P[6]=F,P[1]=w,P[0]=null,P[3]=function(a,c,f,b){F(a,c,f,b);u(f,b,f,b)},P[2]=F,P[4]=function(a,c,f,b){F(a,c,f,b);E(f,b,f,b)},P),K[0]=(V={},V[5]=null,V[6]=null,V[1]=null,V[0]=w,V[3]=null,V[2]=null,V[4]=null,V),K[6]=(T={},T[5]=null,T[6]=w,T[1]=C,T[0]=null,T[3]=null,T[2]=w,T[4]=E,T),K),Q={spatialReference:null,spatialReferenceId:0},J={spatialReference:null,spatialReferenceId:0},R={source:{spatialReference:null,spatialReferenceId:0},dest:{spatialReference:null,
spatialReferenceId:0},projector:w},U={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:w},X=q.deg2rad(1),ca=q.rad2deg(1),G={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},Y=g.vec3f64.create(),la=g.vec3f64.create(),ja=g.vec3f64.create(),na=g.vec3f64.create(),pa=g.vec3f64.create()})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require",
"exports","./math/mat4"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat4=n})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(r,d,n,l){function k(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function b(c,f,a){var b=f[0],e=f[1],g=f[2],h=f[3],l=f[4],k=f[5],d=f[6],m=f[7],u=f[8],z=f[9],B=f[10],C=f[11],F=f[12],n=f[13],N=f[14];
f=f[15];var L=a[0],K=a[1],O=a[2],I=a[3];c[0]=L*b+K*l+O*u+I*F;c[1]=L*e+K*k+O*z+I*n;c[2]=L*g+K*d+O*B+I*N;c[3]=L*h+K*m+O*C+I*f;L=a[4];K=a[5];O=a[6];I=a[7];c[4]=L*b+K*l+O*u+I*F;c[5]=L*e+K*k+O*z+I*n;c[6]=L*g+K*d+O*B+I*N;c[7]=L*h+K*m+O*C+I*f;L=a[8];K=a[9];O=a[10];I=a[11];c[8]=L*b+K*l+O*u+I*F;c[9]=L*e+K*k+O*z+I*n;c[10]=L*g+K*d+O*B+I*N;c[11]=L*h+K*m+O*C+I*f;L=a[12];K=a[13];O=a[14];I=a[15];c[12]=L*b+K*l+O*u+I*F;c[13]=L*e+K*k+O*z+I*n;c[14]=L*g+K*d+O*B+I*N;c[15]=L*h+K*m+O*C+I*f;return c}function h(c,f,a){var b=
f[0],e=f[1],g=f[2],h=f[3],l=b+b,k=e+e,d=g+g;f=b*l;var m=b*k,b=b*d,u=e*k,e=e*d,g=g*d,l=h*l,k=h*k,h=h*d;c[0]=1-(u+g);c[1]=m+h;c[2]=b-k;c[3]=0;c[4]=m-h;c[5]=1-(f+g);c[6]=e+l;c[7]=0;c[8]=b+k;c[9]=e-l;c[10]=1-(f+u);c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c}function g(c,f,a){c[0]=f[0]-a[0];c[1]=f[1]-a[1];c[2]=f[2]-a[2];c[3]=f[3]-a[3];c[4]=f[4]-a[4];c[5]=f[5]-a[5];c[6]=f[6]-a[6];c[7]=f[7]-a[7];c[8]=f[8]-a[8];c[9]=f[9]-a[9];c[10]=f[10]-a[10];c[11]=f[11]-a[11];c[12]=f[12]-a[12];c[13]=f[13]-
a[13];c[14]=f[14]-a[14];c[15]=f[15]-a[15];return c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];c[9]=f[9];c[10]=f[10];c[11]=f[11];c[12]=f[12];c[13]=f[13];c[14]=f[14];c[15]=f[15];return c};d.set=function(c,f,a,b,e,g,h,l,k,d,m,u,z,B,C,F,n){c[0]=f;c[1]=a;c[2]=b;c[3]=e;c[4]=g;c[5]=h;c[6]=l;c[7]=k;c[8]=d;c[9]=m;c[10]=u;c[11]=z;c[12]=B;c[13]=C;c[14]=F;c[15]=n;return c};d.identity=k;d.transpose=
function(c,f){if(c===f){var a=f[1],b=f[2],e=f[3],g=f[6],h=f[7],l=f[11];c[1]=f[4];c[2]=f[8];c[3]=f[12];c[4]=a;c[6]=f[9];c[7]=f[13];c[8]=b;c[9]=g;c[11]=f[14];c[12]=e;c[13]=h;c[14]=l}else c[0]=f[0],c[1]=f[4],c[2]=f[8],c[3]=f[12],c[4]=f[1],c[5]=f[5],c[6]=f[9],c[7]=f[13],c[8]=f[2],c[9]=f[6],c[10]=f[10],c[11]=f[14],c[12]=f[3],c[13]=f[7],c[14]=f[11],c[15]=f[15];return c};d.invert=function(c,f){var a=f[0],b=f[1],e=f[2],g=f[3],h=f[4],l=f[5],k=f[6],d=f[7],m=f[8],u=f[9],z=f[10],B=f[11],C=f[12],F=f[13],n=f[14];
f=f[15];var N=a*l-b*h,L=a*k-e*h,K=a*d-g*h,O=b*k-e*l,I=b*d-g*l,H=e*d-g*k,S=m*F-u*C,P=m*n-z*C,r=m*f-B*C,T=u*n-z*F,Z=u*f-B*F,Q=z*f-B*n,J=N*Q-L*Z+K*T+O*r-I*P+H*S;if(!J)return null;J=1/J;c[0]=(l*Q-k*Z+d*T)*J;c[1]=(e*Z-b*Q-g*T)*J;c[2]=(F*H-n*I+f*O)*J;c[3]=(z*I-u*H-B*O)*J;c[4]=(k*r-h*Q-d*P)*J;c[5]=(a*Q-e*r+g*P)*J;c[6]=(n*K-C*H-f*L)*J;c[7]=(m*H-z*K+B*L)*J;c[8]=(h*Z-l*r+d*S)*J;c[9]=(b*r-a*Z-g*S)*J;c[10]=(C*I-F*K+f*N)*J;c[11]=(u*K-m*I-B*N)*J;c[12]=(l*P-h*T-k*S)*J;c[13]=(a*T-b*P+e*S)*J;c[14]=(F*L-C*O-n*N)*J;
c[15]=(m*O-u*L+z*N)*J;return c};d.adjoint=function(c,f){var a=f[0],b=f[1],e=f[2],g=f[3],h=f[4],l=f[5],k=f[6],d=f[7],m=f[8],u=f[9],z=f[10],B=f[11],C=f[12],F=f[13],n=f[14];f=f[15];c[0]=l*(z*f-B*n)-u*(k*f-d*n)+F*(k*B-d*z);c[1]=-(b*(z*f-B*n)-u*(e*f-g*n)+F*(e*B-g*z));c[2]=b*(k*f-d*n)-l*(e*f-g*n)+F*(e*d-g*k);c[3]=-(b*(k*B-d*z)-l*(e*B-g*z)+u*(e*d-g*k));c[4]=-(h*(z*f-B*n)-m*(k*f-d*n)+C*(k*B-d*z));c[5]=a*(z*f-B*n)-m*(e*f-g*n)+C*(e*B-g*z);c[6]=-(a*(k*f-d*n)-h*(e*f-g*n)+C*(e*d-g*k));c[7]=a*(k*B-d*z)-h*(e*B-
g*z)+m*(e*d-g*k);c[8]=h*(u*f-B*F)-m*(l*f-d*F)+C*(l*B-d*u);c[9]=-(a*(u*f-B*F)-m*(b*f-g*F)+C*(b*B-g*u));c[10]=a*(l*f-d*F)-h*(b*f-g*F)+C*(b*d-g*l);c[11]=-(a*(l*B-d*u)-h*(b*B-g*u)+m*(b*d-g*l));c[12]=-(h*(u*n-z*F)-m*(l*n-k*F)+C*(l*z-k*u));c[13]=a*(u*n-z*F)-m*(b*n-e*F)+C*(b*z-e*u);c[14]=-(a*(l*n-k*F)-h*(b*n-e*F)+C*(b*k-e*l));c[15]=a*(l*z-k*u)-h*(b*z-e*u)+m*(b*k-e*l);return c};d.determinant=function(c){var f=c[0],a=c[1],b=c[2],e=c[3],g=c[4],h=c[5],l=c[6],k=c[7],d=c[8],m=c[9],u=c[10],z=c[11],B=c[12],C=c[13],
n=c[14];c=c[15];return(f*h-a*g)*(u*c-z*n)-(f*l-b*g)*(m*c-z*C)+(f*k-e*g)*(m*n-u*C)+(a*l-b*h)*(d*c-z*B)-(a*k-e*h)*(d*n-u*B)+(b*k-e*l)*(d*C-m*B)};d.multiply=b;d.translate=function(c,f,a){var b=a[0],e=a[1];a=a[2];var g=void 0,h=void 0,l=void 0,k=void 0,d=void 0,m=void 0,u=void 0,z=void 0,B=void 0,C=void 0,n=void 0,E=void 0;f===c?(c[12]=f[0]*b+f[4]*e+f[8]*a+f[12],c[13]=f[1]*b+f[5]*e+f[9]*a+f[13],c[14]=f[2]*b+f[6]*e+f[10]*a+f[14],c[15]=f[3]*b+f[7]*e+f[11]*a+f[15]):(g=f[0],h=f[1],l=f[2],k=f[3],d=f[4],m=
f[5],u=f[6],z=f[7],B=f[8],C=f[9],n=f[10],E=f[11],c[0]=g,c[1]=h,c[2]=l,c[3]=k,c[4]=d,c[5]=m,c[6]=u,c[7]=z,c[8]=B,c[9]=C,c[10]=n,c[11]=E,c[12]=g*b+d*e+B*a+f[12],c[13]=h*b+m*e+C*a+f[13],c[14]=l*b+u*e+n*a+f[14],c[15]=k*b+z*e+E*a+f[15]);return c};d.scale=function(c,f,a){var b=a[0],e=a[1];a=a[2];c[0]=f[0]*b;c[1]=f[1]*b;c[2]=f[2]*b;c[3]=f[3]*b;c[4]=f[4]*e;c[5]=f[5]*e;c[6]=f[6]*e;c[7]=f[7]*e;c[8]=f[8]*a;c[9]=f[9]*a;c[10]=f[10]*a;c[11]=f[11]*a;c[12]=f[12];c[13]=f[13];c[14]=f[14];c[15]=f[15];return c};d.rotate=
function(c,f,a,b){var e=b[0],g=b[1];b=b[2];var h=Math.sqrt(e*e+g*g+b*b),p=void 0,k=void 0,d=void 0,m=void 0,u=void 0,z=void 0,B=void 0,C=void 0,n=void 0,E=void 0,N=void 0,L=void 0,K=void 0,O=void 0,I=void 0,H=void 0,S=void 0,P=void 0,r=void 0,T=void 0,Z=void 0,Q=void 0,k=p=void 0;if(h<l.EPSILON)return null;h=1/h;e*=h;g*=h;b*=h;p=Math.sin(a);k=Math.cos(a);d=1-k;m=f[0];u=f[1];z=f[2];B=f[3];C=f[4];n=f[5];E=f[6];N=f[7];L=f[8];K=f[9];O=f[10];I=f[11];H=e*e*d+k;S=g*e*d+b*p;P=b*e*d-g*p;r=e*g*d-b*p;T=g*g*
d+k;Z=b*g*d+e*p;Q=e*b*d+g*p;p=g*b*d-e*p;k=b*b*d+k;c[0]=m*H+C*S+L*P;c[1]=u*H+n*S+K*P;c[2]=z*H+E*S+O*P;c[3]=B*H+N*S+I*P;c[4]=m*r+C*T+L*Z;c[5]=u*r+n*T+K*Z;c[6]=z*r+E*T+O*Z;c[7]=B*r+N*T+I*Z;c[8]=m*Q+C*p+L*k;c[9]=u*Q+n*p+K*k;c[10]=z*Q+E*p+O*k;c[11]=B*Q+N*p+I*k;f!==c&&(c[12]=f[12],c[13]=f[13],c[14]=f[14],c[15]=f[15]);return c};d.rotateX=function(c,f,a){var b=Math.sin(a);a=Math.cos(a);var e=f[4],g=f[5],h=f[6],k=f[7],l=f[8],d=f[9],m=f[10],u=f[11];f!==c&&(c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[12]=f[12],
c[13]=f[13],c[14]=f[14],c[15]=f[15]);c[4]=e*a+l*b;c[5]=g*a+d*b;c[6]=h*a+m*b;c[7]=k*a+u*b;c[8]=l*a-e*b;c[9]=d*a-g*b;c[10]=m*a-h*b;c[11]=u*a-k*b;return c};d.rotateY=function(c,f,a){var b=Math.sin(a);a=Math.cos(a);var e=f[0],g=f[1],h=f[2],k=f[3],l=f[8],d=f[9],m=f[10],u=f[11];f!==c&&(c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[12]=f[12],c[13]=f[13],c[14]=f[14],c[15]=f[15]);c[0]=e*a-l*b;c[1]=g*a-d*b;c[2]=h*a-m*b;c[3]=k*a-u*b;c[8]=e*b+l*a;c[9]=g*b+d*a;c[10]=h*b+m*a;c[11]=k*b+u*a;return c};d.rotateZ=function(c,
f,a){var b=Math.sin(a);a=Math.cos(a);var e=f[0],g=f[1],h=f[2],k=f[3],l=f[4],d=f[5],m=f[6],u=f[7];f!==c&&(c[8]=f[8],c[9]=f[9],c[10]=f[10],c[11]=f[11],c[12]=f[12],c[13]=f[13],c[14]=f[14],c[15]=f[15]);c[0]=e*a+l*b;c[1]=g*a+d*b;c[2]=h*a+m*b;c[3]=k*a+u*b;c[4]=l*a-e*b;c[5]=d*a-g*b;c[6]=m*a-h*b;c[7]=u*a-k*b;return c};d.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=f[0];c[13]=f[1];c[14]=f[2];c[15]=1;return c};d.fromScaling=function(c,
f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=f[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=f[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromRotation=function(c,f,a){var b=a[0],e=a[1];a=a[2];var g=Math.sqrt(b*b+e*e+a*a),h=void 0,k=void 0,d=void 0;if(g<l.EPSILON)return null;g=1/g;b*=g;e*=g;a*=g;h=Math.sin(f);k=Math.cos(f);d=1-k;c[0]=b*b*d+k;c[1]=e*b*d+a*h;c[2]=a*b*d-e*h;c[3]=0;c[4]=b*e*d-a*h;c[5]=e*e*d+k;c[6]=a*e*d+b*h;c[7]=0;c[8]=b*a*d+e*h;c[9]=e*a*d-b*h;c[10]=a*a*d+k;c[11]=0;c[12]=0;c[13]=0;
c[14]=0;c[15]=1;return c};d.fromXRotation=function(c,f){var a=Math.sin(f);f=Math.cos(f);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=f;c[6]=a;c[7]=0;c[8]=0;c[9]=-a;c[10]=f;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromYRotation=function(c,f){var a=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=0;c[2]=-a;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=a;c[9]=0;c[10]=f;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromZRotation=function(c,f){var a=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=a;c[2]=0;c[3]=0;c[4]=
-a;c[5]=f;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromRotationTranslation=h;d.fromQuat2=function(c,f){var a=e,b=-f[0],g=-f[1],k=-f[2],l=f[3],d=f[4],x=f[5],w=f[6],m=f[7],u=b*b+g*g+k*k+l*l;0<u?(a[0]=2*(d*l+m*b+x*k-w*g)/u,a[1]=2*(x*l+m*g+w*b-d*k)/u,a[2]=2*(w*l+m*k+d*g-x*b)/u):(a[0]=2*(d*l+m*b+x*k-w*g),a[1]=2*(x*l+m*g+w*b-d*k),a[2]=2*(w*l+m*k+d*g-x*b));h(c,f,a);return c};var e=n.create();d.getTranslation=function(c,f){c[0]=f[12];c[1]=f[13];c[2]=f[14];return c};
d.getScaling=function(c,f){var a=f[0],b=f[1],e=f[2],g=f[4],h=f[5],k=f[6],l=f[8],d=f[9];f=f[10];c[0]=Math.sqrt(a*a+b*b+e*e);c[1]=Math.sqrt(g*g+h*h+k*k);c[2]=Math.sqrt(l*l+d*d+f*f);return c};d.getRotation=function(c,f){var a=f[0]+f[5]+f[10],b=0;0<a?(b=2*Math.sqrt(a+1),c[3]=.25*b,c[0]=(f[6]-f[9])/b,c[1]=(f[8]-f[2])/b,c[2]=(f[1]-f[4])/b):f[0]>f[5]&&f[0]>f[10]?(b=2*Math.sqrt(1+f[0]-f[5]-f[10]),c[3]=(f[6]-f[9])/b,c[0]=.25*b,c[1]=(f[1]+f[4])/b,c[2]=(f[8]+f[2])/b):f[5]>f[10]?(b=2*Math.sqrt(1+f[5]-f[0]-f[10]),
c[3]=(f[8]-f[2])/b,c[0]=(f[1]+f[4])/b,c[1]=.25*b,c[2]=(f[6]+f[9])/b):(b=2*Math.sqrt(1+f[10]-f[0]-f[5]),c[3]=(f[1]-f[4])/b,c[0]=(f[8]+f[2])/b,c[1]=(f[6]+f[9])/b,c[2]=.25*b);return c};d.fromRotationTranslationScale=function(c,f,a,b){var e=f[0],g=f[1],h=f[2],p=f[3],k=e+e,l=g+g,m=h+h;f=e*k;var u=e*l,e=e*m,z=g*l,g=g*m,h=h*m,k=p*k,l=p*l,p=p*m,m=b[0],d=b[1];b=b[2];c[0]=(1-(z+h))*m;c[1]=(u+p)*m;c[2]=(e-l)*m;c[3]=0;c[4]=(u-p)*d;c[5]=(1-(f+h))*d;c[6]=(g+k)*d;c[7]=0;c[8]=(e+l)*b;c[9]=(g-k)*b;c[10]=(1-(f+z))*
b;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};d.fromRotationTranslationScaleOrigin=function(c,f,a,b,e){var g=f[0],h=f[1],p=f[2],k=f[3],l=g+g,m=h+h,u=p+p;f=g*l;var q=g*m,d=g*u,g=h*m,h=h*u,C=p*u,p=k*l,m=k*m,n=k*u,E=b[0],N=b[1],u=b[2];b=e[0];k=e[1];e=e[2];var l=(1-(g+C))*E,L=(q+n)*E,E=(d-m)*E,q=(q-n)*N,C=(1-(f+C))*N,N=(h+p)*N,d=(d+m)*u,h=(h-p)*u;f=(1-(f+g))*u;c[0]=l;c[1]=L;c[2]=E;c[3]=0;c[4]=q;c[5]=C;c[6]=N;c[7]=0;c[8]=d;c[9]=h;c[10]=f;c[11]=0;c[12]=a[0]+b-(l*b+q*k+d*e);c[13]=a[1]+k-(L*
b+C*k+h*e);c[14]=a[2]+e-(E*b+N*k+f*e);c[15]=1;return c};d.fromQuat=function(c,f){var a=f[0],b=f[1],e=f[2];f=f[3];var g=a+a,h=b+b,k=e+e,a=a*g,l=b*g,b=b*h,d=e*g,m=e*h,e=e*k,g=f*g,h=f*h;f*=k;c[0]=1-b-e;c[1]=l+f;c[2]=d-h;c[3]=0;c[4]=l-f;c[5]=1-a-e;c[6]=m+g;c[7]=0;c[8]=d+h;c[9]=m-g;c[10]=1-a-b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.frustum=function(c,f,a,b,e,g,h){var p=1/(a-f),k=1/(e-b),l=1/(g-h);c[0]=2*g*p;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*g*k;c[6]=0;c[7]=0;c[8]=(a+f)*p;c[9]=(e+b)*k;c[10]=
(h+g)*l;c[11]=-1;c[12]=0;c[13]=0;c[14]=h*g*2*l;c[15]=0;return c};d.perspective=function(c,f,a,b,e){f=1/Math.tan(f/2);var g=void 0;c[0]=f/a;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=f;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=e&&Infinity!==e?(g=1/(b-e),c[10]=(e+b)*g,c[14]=2*e*b*g):(c[10]=-1,c[14]=-2*b);return c};d.perspectiveFromFieldOfView=function(c,f,a,b){var e=Math.tan(f.upDegrees*Math.PI/180),g=Math.tan(f.downDegrees*Math.PI/180),h=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*
Math.PI/180);var p=2/(h+f),k=2/(e+g);c[0]=p;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=0;c[7]=0;c[8]=-((h-f)*p*.5);c[9]=(e-g)*k*.5;c[10]=b/(a-b);c[11]=-1;c[12]=0;c[13]=0;c[14]=b*a/(a-b);c[15]=0;return c};d.ortho=function(c,f,a,b,e,g,h){var p=1/(f-a),k=1/(b-e),l=1/(g-h);c[0]=-2*p;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*l;c[11]=0;c[12]=(f+a)*p;c[13]=(e+b)*k;c[14]=(h+g)*l;c[15]=1;return c};d.lookAt=function(c,f,a,b){var e=void 0,g=void 0,h=void 0,p=void 0,d=void 0,w=void 0,
m=void 0,u=void 0,z=void 0,B=void 0,C=f[0],n=f[1];f=f[2];h=b[0];p=b[1];b=b[2];m=a[0];u=a[1];a=a[2];if(Math.abs(C-m)<l.EPSILON&&Math.abs(n-u)<l.EPSILON&&Math.abs(f-a)<l.EPSILON)return k(c);m=C-m;u=n-u;z=f-a;B=1/Math.sqrt(m*m+u*u+z*z);m*=B;u*=B;z*=B;e=p*z-b*u;g=b*m-h*z;h=h*u-p*m;(B=Math.sqrt(e*e+g*g+h*h))?(B=1/B,e*=B,g*=B,h*=B):h=g=e=0;p=u*h-z*g;d=z*e-m*h;w=m*g-u*e;(B=Math.sqrt(p*p+d*d+w*w))?(B=1/B,p*=B,d*=B,w*=B):w=d=p=0;c[0]=e;c[1]=p;c[2]=m;c[3]=0;c[4]=g;c[5]=d;c[6]=u;c[7]=0;c[8]=h;c[9]=w;c[10]=z;
c[11]=0;c[12]=-(e*C+g*n+h*f);c[13]=-(p*C+d*n+w*f);c[14]=-(m*C+u*n+z*f);c[15]=1;return c};d.targetTo=function(c,b,a,e){var f=b[0],g=b[1];b=b[2];var h=e[0],p=e[1],k=e[2];e=f-a[0];var l=g-a[1];a=b-a[2];var m=e*e+l*l+a*a;0<m&&(m=1/Math.sqrt(m),e*=m,l*=m,a*=m);var u=p*a-k*l,k=k*e-h*a,h=h*l-p*e,m=u*u+k*k+h*h;0<m&&(m=1/Math.sqrt(m),u*=m,k*=m,h*=m);c[0]=u;c[1]=k;c[2]=h;c[3]=0;c[4]=l*h-a*k;c[5]=a*u-e*h;c[6]=e*k-l*u;c[7]=0;c[8]=e;c[9]=l;c[10]=a;c[11]=0;c[12]=f;c[13]=g;c[14]=b;c[15]=1;return c};d.str=function(c){return"mat4("+
c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2)+Math.pow(c[9],2)+Math.pow(c[10],2)+Math.pow(c[11],2)+Math.pow(c[12],2)+Math.pow(c[13],2)+Math.pow(c[14],2)+Math.pow(c[15],2))};d.add=function(c,b,
a){c[0]=b[0]+a[0];c[1]=b[1]+a[1];c[2]=b[2]+a[2];c[3]=b[3]+a[3];c[4]=b[4]+a[4];c[5]=b[5]+a[5];c[6]=b[6]+a[6];c[7]=b[7]+a[7];c[8]=b[8]+a[8];c[9]=b[9]+a[9];c[10]=b[10]+a[10];c[11]=b[11]+a[11];c[12]=b[12]+a[12];c[13]=b[13]+a[13];c[14]=b[14]+a[14];c[15]=b[15]+a[15];return c};d.subtract=g;d.multiplyScalar=function(c,b,a){c[0]=b[0]*a;c[1]=b[1]*a;c[2]=b[2]*a;c[3]=b[3]*a;c[4]=b[4]*a;c[5]=b[5]*a;c[6]=b[6]*a;c[7]=b[7]*a;c[8]=b[8]*a;c[9]=b[9]*a;c[10]=b[10]*a;c[11]=b[11]*a;c[12]=b[12]*a;c[13]=b[13]*a;c[14]=b[14]*
a;c[15]=b[15]*a;return c};d.multiplyScalarAndAdd=function(c,b,a,e){c[0]=b[0]+a[0]*e;c[1]=b[1]+a[1]*e;c[2]=b[2]+a[2]*e;c[3]=b[3]+a[3]*e;c[4]=b[4]+a[4]*e;c[5]=b[5]+a[5]*e;c[6]=b[6]+a[6]*e;c[7]=b[7]+a[7]*e;c[8]=b[8]+a[8]*e;c[9]=b[9]+a[9]*e;c[10]=b[10]+a[10]*e;c[11]=b[11]+a[11]*e;c[12]=b[12]+a[12]*e;c[13]=b[13]+a[13]*e;c[14]=b[14]+a[14]*e;c[15]=b[15]+a[15]*e;return c};d.exactEquals=function(c,b){return c[0]===b[0]&&c[1]===b[1]&&c[2]===b[2]&&c[3]===b[3]&&c[4]===b[4]&&c[5]===b[5]&&c[6]===b[6]&&c[7]===b[7]&&
c[8]===b[8]&&c[9]===b[9]&&c[10]===b[10]&&c[11]===b[11]&&c[12]===b[12]&&c[13]===b[13]&&c[14]===b[14]&&c[15]===b[15]};d.equals=function(c,b){var a=c[0],f=c[1],e=c[2],g=c[3],h=c[4],k=c[5],d=c[6],w=c[7],m=c[8],u=c[9],z=c[10],B=c[11],C=c[12],n=c[13],E=c[14];c=c[15];var N=b[0],L=b[1],K=b[2],O=b[3],I=b[4],H=b[5],S=b[6],P=b[7],r=b[8],T=b[9],Z=b[10],Q=b[11],J=b[12],R=b[13],U=b[14];b=b[15];return Math.abs(a-N)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(f-L)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(L))&&
Math.abs(e-K)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(K))&&Math.abs(g-O)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(h-I)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(k-H)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(H))&&Math.abs(d-S)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(w-P)<=l.EPSILON*Math.max(1,Math.abs(w),Math.abs(P))&&Math.abs(m-r)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(r))&&Math.abs(u-T)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(z-
Z)<=l.EPSILON*Math.max(1,Math.abs(z),Math.abs(Z))&&Math.abs(B-Q)<=l.EPSILON*Math.max(1,Math.abs(B),Math.abs(Q))&&Math.abs(C-J)<=l.EPSILON*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(n-R)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(E-U)<=l.EPSILON*Math.max(1,Math.abs(E),Math.abs(U))&&Math.abs(c-b)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))};d.mul=b;d.sub=g})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ./mathUtils ./projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g){function e(a,c,f,e){var g,p;a instanceof b&&c instanceof b&&(f=c.longitude,e=c.latitude,p=a.latitude,g=a.longitude);a=h.deg2rad(p);e=h.deg2rad(e);g=h.deg2rad(g);c=h.deg2rad(f);f=Math.sin((a-e)/2);g=Math.sin((g-c)/2);f=2*h.asin(Math.sqrt(f*f+Math.cos(a)*Math.cos(e)*g*g))*d.earthRadius;return Math.round(1E4*f)/1E4}function c(a,c,b){a=b/d.earthRadius;c=h.deg2rad(c);a=Math.sin(a/2);c=Math.cos(c);c=2*h.asin(Math.sqrt(a*a/(c*c)));return h.rad2deg(c)}function f(a,c,b){return h.rad2deg(b/
d.earthRadius)}function a(a,c){a/=15;c||(a=Math.round(a));return a}Object.defineProperty(d,"__esModule",{value:!0});d.earthRadius=n.wgs84Radius;d.halfEarthRadius=d.earthRadius/2;d.halfEarthCircumference=Math.PI*d.earthRadius;d.earthCircumference=2*d.halfEarthCircumference;d.metersPerDegree=d.halfEarthCircumference/180;d.getGreatCircleDistance=e;d.getGreatCircleSpanAt=function(a,c,f){var g=c.spatialReference,h=new b(c.x,a.y,g),p=new b(f.x,a.y,g);c=new b(a.x,c.y,g);a=new b(a.x,f.y,g);return{lon:e(h,
p),lat:e(c,a)}};d.getLonDeltaForDistance=c;d.getLatDeltaForDistance=f;d.getLatLonDeltaForDistance=function(a,b,e){return{lat:f(a,b,e),lon:c(a,b,e)}};d.getMaxCameraAltitude=function(a){a=h.deg2rad(a/2);return(1-Math.sin(a))*d.earthRadius/Math.sin(a)};d.getViewExtentDistance=function(a,c){c=h.deg2rad(c/2);return 2*h.acos((Math.pow(a+d.earthRadius,2)+Math.pow(d.earthRadius,2)-Math.pow((a+d.earthRadius)*Math.cos(c)-Math.sqrt(Math.pow(Math.cos(c)*(a+d.earthRadius),2)-a*a-2*a*d.earthRadius),2))/(2*(a+d.earthRadius)*
d.earthRadius))*d.earthRadius};d.computeCartesianDistance=function(a,c){a=g.wgs84ComparableLonLatToECEF(p,a.longitude,a.latitude,a.z||0);c=g.wgs84ComparableLonLatToECEF(q,c.longitude,c.latitude,c.z||0);c=[c[0]-a[0],c[1]-a[1],c[2]-a[2]];return Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])};d.longitudeToTimezone=a;d.positionToTimezone=function(c,b){b||(b={hours:0,minutes:0,seconds:0});b.hours=a(c[0],!0);c=b.hours%1;b.hours-=c;b.minutes=60*c;c=b.minutes%1;b.minutes-=c;b.seconds=Math.round(60*c);return b};
d.distanceToIdealHorizon=function(a,c){c=c||d.earthRadius;a=l.vec3.dot(a,a);return Math.sqrt(Math.abs(a-c*c))};var p=k.vec3f64.create(),q=k.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});(function(d){d.length=function(l,k){var b=l[k],h=l[k+1];l=l[k+2];return Math.sqrt(b*b+h*h+l*l)};d.normalize=function(l,k){var b=l[k],h=l[k+1],g=l[k+2],b=1/Math.sqrt(b*b+h*h+g*g);l[k]*=b;l[k+
1]*=b;l[k+2]*=b};d.scale=function(l,k,b){l[k]*=b;l[k+1]*=b;l[k+2]*=b};d.add=function(l,k,b,h,g,e){void 0===e&&(e=k);g=g||l;g[e]=l[k]+b[h];g[e+1]=l[k+1]+b[h+1];g[e+2]=l[k+2]+b[h+2]};d.subtract=function(l,k,b,h,g,e){void 0===e&&(e=k);g=g||l;g[e]=l[k]-b[h];g[e+1]=l[k+1]-b[h+1];g[e+2]=l[k+2]-b[h+2]}})(d.Vec3Compact||(d.Vec3Compact={}))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/Accessor ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/Promise ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){return function(a){function g(){return null!==a&&a.apply(this,arguments)||this}l(g,a);g.prototype.when=function(a,c){return this.inherited(arguments)};g.prototype.fetchPopupFeatures=function(a,b){return c.safeCast(this._fetchPopupFeaturesAsync(a,b))};g.prototype._fetchPopupFeaturesAsync=function(a,c){return b(this,void 0,void 0,function(){var b,f,g,k,l,q;return h(this,function(h){switch(h.label){case 0:return[4,this.when()];case 1:return h.sent(),[4,this._prepareFetchPopupFeatures(a,
c)];case 2:return b=h.sent(),f=b.location,g=this._queryLayerPopupFeatures(b,c),k=p.resolve(b.clientOnlyGraphics),l=[k].concat(g),q=p.eachAlwaysValues(l).then(e.flatten),[2,{promise:q,location:f,promises:l}]}})})};g.prototype._queryLayerPopupFeatures=function(a,c){var b=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var e=a.layerView;a={clientGraphics:a.graphics,signal:f.isSome(c)?c.signal:null,defaultPopupTemplateEnabled:f.isSome(c)?!!c.defaultPopupTemplateEnabled:!1};return e.fetchPopupFeatures(b,
a)})};g.prototype._isValidPopupGraphic=function(a,c){return a&&!!a.getEffectivePopupTemplate(f.isSome(c)&&c.defaultPopupTemplateEnabled)};g.prototype._prepareFetchPopupFeatures=function(a,c){return b(this,void 0,void 0,function(){var b,f,e,g,p,k,l,q;return h(this,function(h){switch(h.label){case 0:return[4,this._popupHitTestGraphics(a,c)];case 1:return b=h.sent(),f=b.clientGraphics,e=b.queryArea,g=b.location,p=this._getFetchPopupLayerViews(),k=this._graphicsPerFetchPopupLayerView(f,p),l=k.layerViewsAndGraphics,
q=k.clientOnlyGraphics,[2,{clientOnlyGraphics:q,layerViewsAndGraphics:l,queryArea:e,location:g}]}})})};g.prototype._popupHitTestGraphics=function(a,c){return b(this,void 0,void 0,function(){var b,f,e,g,p,k,l=this;return h(this,function(h){switch(h.label){case 0:return[4,this.popupHitTest(a)];case 1:return b=h.sent(),f=b.results,e=b.mapPoint,g=f.filter(function(a){return l._isValidPopupGraphic(a.graphic,c)}),p=g.length?g[0].mapPoint:null,k=g.map(function(a){return a.graphic}),[2,{clientGraphics:k,
queryArea:e,location:e||p}]}})})};g.prototype._getFetchPopupLayerViews=function(){var a=this,c=[];this.allLayerViews.forEach(function(b){a._isValidPopupLayerView(b)&&c.push(b)});this._isValidPopupLayerView(this.graphicsView)&&c.push(this.graphicsView);return c.reverse()};g.prototype._isValidPopupLayerView=function(a){return f.isSome(a)&&(!("layer"in a)||!a.suspended)&&"function"===typeof a.fetchPopupFeatures};g.prototype._graphicsPerFetchPopupLayerView=function(a,c){var b=[],f=new Map;c=c.map(function(a){var c=
[];"layer"in a?f.set(a.layer,c):f.set(a.graphics,c);return{layerView:a,graphics:c}});for(var e=0;e<a.length;e++){var g=a[e],h=f.get(g.layer)||null;h?h.push(g):b.push(g)}return{layerViewsAndGraphics:c,clientOnlyGraphics:b}};return g=k([q.subclass("esri.views.PopupView")],g)}(q.declared(g,a))})},"esri/views/3d/constraints/Constraints":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ./AltitudeConstraint ./ClipDistanceConstraint ./CollisionConstraint ./TiltConstraint".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.tilt=new c.default;a.altitude=new h.default;a.clipDistance=new g.default;a.collision=new e.default;return a}n(a,f);l([b.property({type:c.default})],a.prototype,"tilt",void 0);l([b.property({type:h.default})],a.prototype,"altitude",void 0);l([b.property({type:g.default})],a.prototype,"clipDistance",void 0);l([b.property({type:e.default})],a.prototype,
"collision",void 0);return a=l([b.subclass("esri.views.3d.constraints.Constraints")],a)}(b.declared(k));d.Constraints=r;d.default=r})},"esri/views/3d/constraints/AltitudeConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/_base/kernel ../../../core/Accessor ../../../core/accessorSupport/decorators ../state/Constraints".split(" "),function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(){var c=
null!==b&&b.apply(this,arguments)||this;c.min=g.AltitudeDefault.min;c.max=g.AltitudeDefault.max;return c}n(c,b);Object.defineProperty(c.prototype,"mode",{get:function(){k.deprecated("esri.views.SceneView.constraints.altitude.mode is deprecated. The altitude constraint no longer applies to local scenes and does not have an automatic mode anymore.","","4.6");return"manual"},set:function(c){k.deprecated("esri.views.SceneView.constraints.altitude.mode is deprecated. The altitude constraint no longer applies to local scenes and does not have an automatic mode anymore.",
"","4.6")},enumerable:!0,configurable:!0});l([h.property({type:Number})],c.prototype,"min",void 0);l([h.property({type:Number})],c.prototype,"max",void 0);return c=l([h.subclass("esri.views.3d.constraints.AltitudeConstraint")],c)}(h.declared(b));d.AltitudeConstraint=r;d.default=r})},"esri/views/3d/state/Constraints":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Logger ../../../core/mathUtils ../../../core/accessorSupport/decorators ../support/earthUtils ../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var f=b.getLogger("esri.views.3d.state.Constraints");r=function(b){function e(a){a=b.call(this)||this;a.collision=new p;a.distance=Infinity;a.minimumPoiDistance=4;return a}n(e,b);Object.defineProperty(e.prototype,"altitude",{get:function(){return"local"===this.mode?null:this._get("altitude")||null},set:function(a){"local"===this.mode?f.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",a)},enumerable:!0,
configurable:!0});e.prototype.clampAltitude=function(a){return this.altitude?h.clamp(a,this.altitude.min,this.altitude.max):a};e.prototype.clampTilt=function(a,c){if(!this.tilt)return c;a=this.tilt(a);return h.clamp(c,a.min,a.max)};e.prototype.clampDistance=function(a){return Math.min(a,this.distance)};e.prototype.createDefaultTilt=function(){return"local"===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};e.prototype.createConstantMaxTilt=function(c){return function(b,f){void 0===
f&&(f=a);f.min=d.TiltDefault.min;f.max=c;return f}};e.prototype.createDefaultTiltLocal=function(){var b=this.collision.enabled?c.makePiecewiseLinearFunction([[4E3,d.TiltDefault.max],[1E4,c.deg2rad(88)],[6E6,c.deg2rad(88)]]):function(){return d.TiltDefault.max};return function(c,f){void 0===f&&(f=a);f.min=d.TiltDefault.min;f.max=b(c);return f}};e.prototype.createDefaultTiltGlobal=function(){var b=this.collision.enabled?c.makePiecewiseLinearFunction([[4E3,d.TiltDefault.max],[5E4,c.deg2rad(88)],[6E6,
c.deg2rad(88)],[2E7,d.TiltDefault.min]]):c.makePiecewiseLinearFunction([[3E5,d.TiltDefault.max],[3E6,c.deg2rad(88)],[6E6,c.deg2rad(88)],[2E7,d.TiltDefault.min]]);return function(c,f){void 0===f&&(f=a);f.min=d.TiltDefault.min;f.max=b(c);return f}};l([g.property()],e.prototype,"altitude",null);l([g.property({readOnly:!0})],e.prototype,"collision",void 0);l([g.property()],e.prototype,"distance",void 0);l([g.property({readOnly:!0})],e.prototype,"minimumPoiDistance",void 0);l([g.property()],e.prototype,
"tilt",void 0);l([g.property({constructOnly:!0})],e.prototype,"mode",void 0);return e=l([g.subclass("esri.views.3d.state.Constraints")],e)}(g.declared(k));d.Constraints=r;d.AltitudeDefault={min:-2E5,max:4*e.earthRadius};d.TiltDefault={min:c.deg2rad(.5),max:c.deg2rad(179.5)};var a={min:0,max:0},p=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.enabled=!0;c.elevationMargin=5;return c}n(c,a);l([g.property({type:Boolean})],c.prototype,"enabled",void 0);l([g.property({type:Number})],
c.prototype,"elevationMargin",void 0);return c=l([g.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],c)}(g.declared(k));d.default=r})},"esri/views/3d/constraints/ClipDistanceConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(h){function g(){var b=
null!==h&&h.apply(this,arguments)||this;b.mode="auto";return b}n(g,h);Object.defineProperty(g.prototype,"near",{get:function(){return this._get("near")},set:function(b){this._set("near",b);b>=this._get("far")&&(this.far=b+1E-9);this.mode="manual"},enumerable:!0,configurable:!0});g.prototype.castNear=function(b){return Math.max(1E-8,b)};Object.defineProperty(g.prototype,"far",{get:function(){return this._get("far")},set:function(b){this._set("far",b);b<=this._get("near")&&(this.near=b-1E-9);this.mode=
"manual"},enumerable:!0,configurable:!0});g.prototype.castFar=function(b){return Math.max(1E-8,b)};g.prototype.autoUpdate=function(b,c){"auto"===this.mode&&(this._get("near")!==b&&this._set("near",b),this._get("far")!==c&&this._set("far",c))};l([b.property({type:Number,value:1E-8})],g.prototype,"near",null);l([b.cast("near")],g.prototype,"castNear",null);l([b.property({type:Number,value:1E-8})],g.prototype,"far",null);l([b.cast("far")],g.prototype,"castFar",null);l([b.property({type:["auto","manual"]})],
g.prototype,"mode",void 0);return g=l([b.subclass("esri.views.3d.constraints.ClipDistanceConstraint")],g)}(b.declared(k));d.ClipDistanceConstraint=r;d.default=r})},"esri/views/3d/constraints/CollisionConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/_base/kernel ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function e(){return null!==
b&&b.apply(this,arguments)||this}n(e,b);Object.defineProperty(e.prototype,"enabled",{set:function(c){k.deprecated("SceneView.constraint.collision.enabled","Use Map.ground.navigationConstraint instead","4.8");this._set("enabled",c)},enumerable:!0,configurable:!0});l([h.property({value:!0})],e.prototype,"enabled",null);return e=l([h.subclass("esri.views.3d.constraints.CollisionConstraint")],e)}(h.declared(b));d.CollisionConstraint=r;d.default=r})},"esri/views/3d/constraints/TiltConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/mathUtils ../../../core/accessorSupport/decorators ../state/Constraints ../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});var c=e.rad2deg(g.TiltDefault.min),f=e.rad2deg(g.TiltDefault.max);r=function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c.mode="auto";return c}n(e,a);Object.defineProperty(e.prototype,"max",{get:function(){return this._get("max")},set:function(a){this._set("max",a);this.mode="manual"},enumerable:!0,configurable:!0});e.prototype.castMax=function(a){return b.clamp(a,c,f)};e.prototype.autoUpdate=function(a){"auto"===
this.mode&&this._get("max")!==a&&this._set("max",a)};l([h.property({type:["auto","manual"]})],e.prototype,"mode",void 0);l([h.property({type:Number,value:f})],e.prototype,"max",null);l([h.cast("max")],e.prototype,"castMax",null);return e=l([h.subclass("esri.views.3d.constraints.TiltConstraint")],e)}(h.declared(k));d.TiltConstraint=r;d.default=r})},"esri/views/3d/environment/SceneViewEnvironment":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/lang ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ./SceneViewAtmosphere ./SceneViewLighting ../../../webscene/Environment ../../../webscene/Lighting".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){return function(f){function p(a){a=f.call(this,a)||this;a.atmosphere=new e.default;return a}n(p,f);d=p;p.fromWebsceneEnvironment=function(a){a=a.cloneConstructProperties();return new d(k({},a,{lighting:c.SceneViewLighting.fromWebsceneLighting(a.lighting)}))};p.prototype.castLighting=function(b){return b?b instanceof c.SceneViewLighting?b:b instanceof a?this.lighting?this.lighting.cloneWithWebsceneLighting(b):c.SceneViewLighting.fromWebsceneLighting(b):g.ensureType(c.SceneViewLighting,
b):new c.SceneViewLighting};p.prototype.clone=function(){return new d({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:b.clone(this.background)})};var d;l([h.property({type:e.default,json:{read:!1}})],p.prototype,"atmosphere",void 0);l([h.property()],p.prototype,"lighting",void 0);l([h.cast("lighting")],p.prototype,"castLighting",null);return p=d=l([h.subclass("esri.views.3d.environment.SceneViewEnvironment")],
p)}(h.declared(f))})},"esri/views/3d/environment/SceneViewAtmosphere":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(h){function g(){return null!==h&&h.apply(this,arguments)||this}n(g,h);e=g;Object.defineProperty(g.prototype,"quality",{set:function(c){-1!==["low","high"].indexOf(c)&&
this._set("quality",c)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new e({quality:this.quality})};var e;l([b.property({type:["low","high"],value:"low"})],g.prototype,"quality",null);return g=e=l([b.subclass("esri.views.3d.environment.SceneViewAtmosphere")],g)}(b.declared(k));d.SceneViewAtmosphere=r;d.default=r})},"esri/views/3d/environment/SceneViewLighting":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/Evented ../../../core/accessorSupport/decorators ../../../webscene/Lighting".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function b(a){a=c.call(this,a)||this;a.positionTimezoneInfo={hours:0,minutes:0,seconds:0,autoUpdated:!0};a.cameraTrackingEnabled=!0;a.ambientOcclusionEnabled=!1;var b=(new Date).getFullYear(),b=new Date("March 15, "+b+" 12:00:00 UTC");a._set("defaultDate",b);a._set("date",b);return a}n(b,c);a=b;b.fromWebsceneLighting=function(c){return new a(k({},c.cloneConstructProperties()))};Object.defineProperty(b.prototype,
"defaultDate",{get:function(){return new Date(this._get("defaultDate").getTime())},set:function(a){var c=this._get("date")===this._get("defaultDate");a=new Date(a.getTime());this._set("defaultDate",a);c&&this._set("date",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"date",{set:function(a){null!=a&&(this.positionTimezoneInfo.autoUpdated=!1,this._set("date",new Date(a.getTime())))},enumerable:!0,configurable:!0});b.prototype.autoUpdate=function(a,c){var b=this._calculateTimezoneOffset(this.positionTimezoneInfo);
this.positionTimezoneInfo.hours=c.hours;this.positionTimezoneInfo.minutes=c.minutes;this.positionTimezoneInfo.seconds=c.seconds;c=null;null!=a&&(this.positionTimezoneInfo.autoUpdated=!0,c=this.date&&this.date.getTime(),this._set("date",new Date(a.getTime())));var f=this._calculateTimezoneOffset(this.positionTimezoneInfo);b!==f&&(e.target=this,e.timezoneOffset=f,this.emit("timezone-will-change",e));if(null!=a)return c!==a.getTime()};b.prototype.clone=function(){var c=this._get("date")===this._get("defaultDate"),
b=new a(k({},this.cloneConstructProperties(),{defaultDate:this.defaultDate,cameraTrackingEnabled:this.cameraTrackingEnabled,ambientOcclusionEnabled:this.ambientOcclusionEnabled}));c&&b._set("date",b._get("defaultDate"));b.positionTimezoneInfo.autoUpdated=this.positionTimezoneInfo.autoUpdated;b.positionTimezoneInfo.hours=this.positionTimezoneInfo.hours;b.positionTimezoneInfo.minutes=this.positionTimezoneInfo.minutes;b.positionTimezoneInfo.seconds=this.positionTimezoneInfo.seconds;return b};b.prototype.cloneWithWebsceneLighting=
function(a){var c=this.clone();null!=a.date&&(c.date=a.date);c.directShadowsEnabled=a.directShadowsEnabled;c.displayUTCOffset=a.displayUTCOffset;return c};b.prototype._calculateTimezoneOffset=function(a){return Math.round(a.hours+a.minutes/60+a.seconds/3600)};var a;l([h.property({type:Boolean})],b.prototype,"cameraTrackingEnabled",void 0);l([h.property({type:Boolean})],b.prototype,"ambientOcclusionEnabled",void 0);l([h.property({type:Date})],b.prototype,"defaultDate",null);l([h.property({type:Date})],
b.prototype,"date",null);return b=a=l([h.subclass("esri.views.3d.environment.SceneViewLighting")],b)}(h.declared(g,b));d.SceneViewLighting=r;var e={target:null,timezoneOffset:0};d.default=r})},"esri/webscene/Lighting":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){return function(h){function g(c){c=h.call(this,c)||this;c.date=null;c.directShadowsEnabled=
!1;c.displayUTCOffset=null;return c}n(g,h);e=g;g.prototype.readDate=function(c,b){return null!=b.datetime&&new Date(b.datetime)||null};g.prototype.writeDate=function(c,b,a){b[a]=c.getTime()};g.prototype.readDirectShadowsEnabled=function(c,b){return!!b.directShadows};g.prototype.writedirectShadowsEnabled=function(c,b,a){c&&(b[a]=c)};g.prototype.writeDisplayUTCOffset=function(c,b){null!=c&&(b.displayUTCOffset=c)};g.prototype.clone=function(){return new e(this.cloneConstructProperties())};g.prototype.cloneConstructProperties=
function(){var c={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(c.date=new Date(this.date.getTime()));return c};var e;l([b.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],g.prototype,"date",void 0);l([b.reader("date",["datetime"])],g.prototype,"readDate",null);l([b.writer("date")],g.prototype,"writeDate",null);l([b.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],
g.prototype,"directShadowsEnabled",void 0);l([b.reader("directShadowsEnabled",["directShadows"])],g.prototype,"readDirectShadowsEnabled",null);l([b.writer("directShadowsEnabled")],g.prototype,"writedirectShadowsEnabled",null);l([b.property({type:Number,json:{write:!0}})],g.prototype,"displayUTCOffset",void 0);l([b.writer("displayUTCOffset")],g.prototype,"writeDisplayUTCOffset",null);return g=e=l([b.subclass("esri.webscene.Lighting")],g)}(b.declared(k))})},"esri/webscene/Environment":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./Lighting ./background/utils".split(" "),
function(r,d,n,l,k,b,h,g,e){var c=function(c,a,b){return{enabled:!b||!b.isPresentation}};return function(f){function a(a){a=f.call(this,a)||this;a.lighting=new g;a.background=null;a.atmosphereEnabled=!0;a.starsEnabled=!0;return a}n(a,f);p=a;a.prototype.clone=function(){return new p(this.cloneConstructProperties())};a.prototype.cloneConstructProperties=function(){return{lighting:g.prototype.clone.call(this.lighting),background:b.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};
var p;l([h.property({type:g,json:{write:!0}})],a.prototype,"lighting",void 0);l([h.property(e.backgroundProperty)],a.prototype,"background",void 0);l([h.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:c}}})],a.prototype,"atmosphereEnabled",void 0);l([h.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:c}}})],a.prototype,"starsEnabled",void 0);return a=p=l([h.subclass("esri.webscene.Environment")],a)}(h.declared(k))})},"esri/webscene/background/utils":function(){define(["require",
"exports","./Background","./ColorBackground"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r={base:n,key:"type",typeMap:{color:l}};d.backgroundProperty={types:r,json:{read:function(k){return function(b,h,g){if(!b)return b;for(var e in k.typeMap)if(b.type===e)return h=new k.typeMap[e],h.read(b,g),h}}(r),write:{overridePolicy:function(k,b,h){return{enabled:!h||!h.isPresentation}}}}}})},"esri/webscene/background/Background":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g){var e=b.strict()({color:"color"});return function(c){function b(a){return c.call(this)||this}n(b,c);b.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=k({},a),delete a.type);return a};b.prototype.clone=function(){};l([g.property({type:e.apiValues,readOnly:!0,json:{type:e.jsonValues,read:!1,write:e.write}})],b.prototype,"type",void 0);return b=l([g.subclass("esri.webscene.background.Background")],b)}(g.declared(h))})},"esri/webscene/background/ColorBackground":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/accessorSupport/decorators ../../symbols/support/materialUtils ./Background".split(" "),
function(r,d,n,l,k,b,h,g,e){var c=k({},g.colorAndTransparencyProperty,{nonNullable:!0});return function(f){function a(a){a=f.call(this)||this;a.type="color";a.color=new b([0,0,0,1]);return a}n(a,f);e=a;a.prototype.clone=function(){return new e(this.cloneProperties())};a.prototype.cloneProperties=function(){return{color:this.color.clone()}};var e;l([h.enumeration.serializable()({color:"color"})],a.prototype,"type",void 0);l([h.property(c)],a.prototype,"color",void 0);return a=e=l([h.subclass("esri.webscene.background.ColorBackground")],
a)}(h.declared(e))})},"esri/views/3d/environment/SceneViewEnvironmentManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/Evented ../../../core/Handles ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4f64 ./EnvironmentRenderer ../support/earthUtils ../support/projectionUtils ../support/sunUtils ../webgl-engine/lighting/Lightsources ../../../webscene/background/ColorBackground".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){Object.defineProperty(d,"__esModule",{value:!0});var z=q.vec3f64.fromValues(.5773502691896258,-.5773502691896258,.5773502691896258);r=function(b){function h(a){a=b.call(this)||this;a._referencePointUpdateDelay=200;a._referencePointUpdateInterval=3E3;a._referencePointUpdateDistThreshold=1E6;a._referencePosUpdateQuery=null;a._referencePosMapCoordsRequested=null;a._viewHandles=new g;a._preserveAbsoluteDateTime=!1;a._trackingEnabled=!1;a._viewConnected=
!1;a._referencePosResetPreserveAbsoluteTime=!1;a.referencePosUpdateTimer=null;a._referencePosWGS84Comparable=null;a._referencePosMapCoords=null;a._mainLight=new m.MainLight;a._ambientLight=new m.AmbientLight;a._moonLight=new m.FillLight;a._renderer=null;a._resetReferencePosition();return a}n(h,b);h.prototype.destroy=function(){this._viewHandles.destroy();this.disposeRendering()};Object.defineProperty(h.prototype,"updating",{get:function(){return this._viewConnected?!this.disableQueries&&(!!this._referencePosUpdateQuery||
!!this._referencePosMapCoordsRequested)||this._renderer.updating:!1},enumerable:!0,configurable:!0});h.prototype.updateReadyChange=function(a){a&&!this._viewConnected?(this._viewConnected=!0,this.connectView(this.view),this.notifyChange("updating")):!a&&this._viewConnected&&(this._viewConnected=!1,this.disconnectView(this.view),this.notifyChange("updating"))};h.prototype.disposeRendering=function(){this._renderer&&(this._renderer.destroy(),this._renderer=null);this._resetReferencePosition()};h.prototype.connectView=
function(a){var c=this;this._renderer=new t({view:a});this._viewHandles.add([this.view.watch("environment.lighting.date",function(a){return c._lightingDateHandler(a)},!0),this.view.watch("interacting,stationary",this._interactingStationaryHandler.bind(this)),this.view.watch(["environment.lighting.directShadowsEnabled","environment.lighting.ambientOcclusionEnabled","environment.background.color"],function(){return c._updateRenderParamsHandler()}),this.view.watch("spatialReference",function(){return c._resetReferencePosition()}),
f.init(this.view,"viewingMode",function(){return c._resetReferencePosition()}),f.init(this.view,"environment.lighting.cameraTrackingEnabled",function(a){return c._updateCameraTracking(a)},!0),f.init(this,"view.state.camera",function(){return c._cameraHandler(null)},!0),this.watch("disableQueries",function(){return c._cameraHandler(null)})]);this._updateRenderParamsHandler();this._updateLightParams();this._cameraHandler()};h.prototype._updateCameraTracking=function(a){if(this._trackingEnabled=a)this._cameraHandler();
else if(a=this.get("view.environment.lighting"))a.positionTimezoneInfo.autoUpdated=!1};h.prototype.disconnectView=function(a){this.disposeRendering();this._viewHandles.removeAll()};h.prototype._lightingDateHandler=function(a){if(a){var c=this.view.environment.lighting;if(!c.positionTimezoneInfo.autoUpdated){this._preserveAbsoluteDateTime=!0;if(!x.canProjectToWGS84ComparableLonLat(this.view.spatialReference)){var b=this.view.camera.position;if(!this._referencePosMapCoords||!this._referencePosMapCoords.equals(b)){this._requestReferencePositionUpdate(b);
return}}this._preupdateTracking(a);this._referencePosWGS84Comparable&&(b=y.positionToTimezone(this._referencePosWGS84Comparable,C),e.isSome(b)&&(c.autoUpdate(null,b),this._trackingEnabled&&(c.positionTimezoneInfo.autoUpdated=!0)))}this._updateLightParams(a)}};h.prototype._preupdateTracking=function(a){!this._trackingEnabled&&this.get("view.environment.lighting.cameraTrackingEnabled")&&this._cameraHandler(a)};h.prototype._cameraHandler=function(a){void 0===a&&(a=null);if(this.view.ready){var c=this.view.camera;
c&&(this._cameraHandlerClientSide(c,a)||this._cameraHandlerServerSide(c,a))}};h.prototype._cameraHandlerClientSide=function(a,c){if(!x.canProjectToWGS84ComparableLonLat(this.view.spatialReference))return!1;a=a.position;this._referencePosWGS84Comparable||(this._referencePosWGS84Comparable=q.vec3f64.create());x.pointToWGS84ComparableLonLat(a,this._referencePosWGS84Comparable);this._autoUpdateTimezone(this._referencePosWGS84Comparable,c)||this._updateLightParams(c);return!0};h.prototype._cameraHandlerServerSide=
function(a,c){a=a.position;(!this._referencePosMapCoords||this._referencePosMapCoordsRequested||this._exceedsReferencePosDistThreshold(a))&&this._requestReferencePositionUpdate(a,!0);this.view.mapCoordsHelper&&this._referencePosWGS84Comparable&&(this._referencePosWGS84Comparable[2]=a.z*this.view.mapCoordsHelper.unitInMeters,this._referencePosChanged())};h.prototype._interactingStationaryHandler=function(){!this.view.interacting&&this.view.stationary&&this._executePendingReferencePositionUpdate()};
h.prototype._updateLightParams=function(a){var c=this.view.environment.lighting;a=a||c.date;var c=this.view._stage,b;this._referencePosWGS84Comparable?(b=w.computeColorAndIntensity(a,this._referencePosWGS84Comparable),w.computeDirection(a,this._referencePosWGS84Comparable,this.view.viewingMode,b.diffuse.direction)):b={diffuse:{color:[1,1,1],intensity:.55,direction:z},ambient:{color:[1,1,1],intensity:.55},noonFactor:.5,globalFactor:0};p.vec3.scale(this._mainLight.intensity,b.diffuse.color,b.diffuse.intensity*
Math.PI);p.vec3.negate(this._mainLight.direction,b.diffuse.direction);p.vec3.scale(this._ambientLight.intensity,b.ambient.color,b.ambient.intensity);p.vec3.lerp(this._moonLight.intensity,F,E,b.globalFactor);p.vec3.scale(this._moonLight.intensity,this._moonLight.intensity,(1-.5*b.globalFactor)*(1-.4*b.noonFactor*(1-b.globalFactor)));p.vec3.copy(this._moonLight.direction,b.diffuse.direction);c.setLighting({lights:[this._mainLight,this._ambientLight,this._moonLight],globalFactor:b.globalFactor,groundLightingFactor:1-
b.noonFactor});this._updateRenderParamsHandler()};h.prototype._autoUpdateTimezone=function(a,c){void 0===c&&(c=null);if(!this.view.get("environment.lighting.cameraTrackingEnabled"))return!1;var b=B;b.setTime((c||this.view.environment.lighting.date).getTime());a=y.positionToTimezone(a,C);if(e.isNone(a))return!1;var f=this.view.environment.lighting.positionTimezoneInfo;if(!f.autoUpdated)f=a;else if(f.hours===a.hours&&f.minutes===a.minutes&&f.seconds===a.seconds)return!1;var g=b.getUTCHours()-(a.hours-
f.hours),h=b.getUTCMinutes()-(a.minutes-f.minutes),f=b.getUTCSeconds()-(a.seconds-f.seconds);b.setUTCHours(g);b.setUTCMinutes(h);b.setUTCSeconds(f);return c?!1:this.view.environment.lighting.autoUpdate(b,a)};h.prototype._updateRenderParamsHandler=function(){var a=this.view._stage;if(a){var c=this._referencePosWGS84Comparable?w.computeShadowsEnabled(this._referencePosWGS84Comparable,this.view.viewingMode):!0,b=this.view.environment.background,b=b instanceof u?{type:"color",color:v.vec4f64.fromArray(k.toUnitRGBA(b.color))}:
{type:"color",color:v.vec4f64.fromValues(0,0,0,1)};a.renderView.setRenderParameters({shadowMap:this.view.environment.lighting.directShadowsEnabled&&c,ssao:this.view.environment.lighting.ambientOcclusionEnabled,background:b})}};h.prototype._resetReferencePosition=function(){this._cancelReferencePosUpdates();this._referencePosWGS84Comparable=this._referencePosResetPreserveAbsoluteTime=this._referencePosMapCoordsRequested=this._referencePosMapCoords=null;this.notifyChange("updating")};h.prototype._requestReferencePositionUpdate=
function(a,b){var f=this;void 0===b&&(b=!1);if(this.view.mapCoordsHelper.canProject()&&!this.disableQueries&&(this._referencePosMapCoordsRequested?this._referencePosMapCoordsRequested.copy(a):this._referencePosMapCoordsRequested=a.clone(),this._referencePosResetPreserveAbsoluteTime=!!b,!this._referencePosUpdateQuery&&!this.referencePosUpdateTimer&&!this.view.interacting&&this.view.stationary)){var e=this._referencePosUpdateQuery=c.after(this._referencePointUpdateDelay).then(function(){if(f._referencePosUpdateQuery===
e)return f._doReferencePositionUpdateQuery(function(){return f._referencePosUpdateQuery!==e})}).catch(function(){}).then(function(){f._referencePosUpdateQuery===e&&(f._referencePosUpdateQuery=null,f.referencePosUpdateTimer||f._executePendingReferencePositionUpdate(),f.notifyChange("updating"))}),g=this.referencePosUpdateTimer=c.after(this._referencePointUpdateInterval).then(function(){f.referencePosUpdateTimer===g&&(f.referencePosUpdateTimer=null,f._referencePosUpdateQuery||f._executePendingReferencePositionUpdate())});
this.notifyChange("updating")}};h.prototype._doReferencePositionUpdateQuery=function(a){var c=this;this._referencePosResetPreserveAbsoluteTime&&(this._preserveAbsoluteDateTime=!1);this._referencePosMapCoords?this._referencePosMapCoords.copy(this._referencePosMapCoordsRequested):this._referencePosMapCoords=this._referencePosMapCoordsRequested.clone();this._referencePosMapCoordsRequested=this._referencePosResetPreserveAbsoluteTime=null;return this.view.mapCoordsHelper.toGeographic(this._referencePosMapCoords).then(function(b){if(!a()&&
!isNaN(b[0])&&!isNaN(b[1])){var f=c._referencePosMapCoords.z*c.view.mapCoordsHelper.unitInMeters;c._referencePosWGS84Comparable?(c._referencePosWGS84Comparable[0]=b[0],c._referencePosWGS84Comparable[1]=b[1],c._referencePosWGS84Comparable[2]=f):c._referencePosWGS84Comparable=[b[0],b[1],f];c._referencePosChanged()}})};h.prototype._executePendingReferencePositionUpdate=function(){var a=this._referencePosMapCoordsRequested;a&&this._requestReferencePositionUpdate(a,this._referencePosResetPreserveAbsoluteTime)};
h.prototype._referencePosChanged=function(){this._preserveAbsoluteDateTime?this._updateLightParams():this._autoUpdateTimezone(this._referencePosWGS84Comparable)||this._updateLightParams()};h.prototype._exceedsReferencePosDistThreshold=function(a){return this._referencePosMapCoords?(a=this._referencePosMapCoords.distance(a),this.view.mapCoordsHelper&&(a*=this.view.mapCoordsHelper.unitInMeters),a>this._referencePointUpdateDistThreshold):!0};h.prototype._cancelReferencePosUpdates=function(){this.referencePosUpdateTimer=
this._referencePosUpdateQuery=null};Object.defineProperty(h.prototype,"test",{get:function(){var a=this;return{renderer:this._renderer,set referencePointUpdateInterval(c){a._referencePointUpdateInterval=c},set referencePointUpdateDistThreshold(c){a._referencePointUpdateDistThreshold=c},set referencePosUpdateTimer(c){a.referencePosUpdateTimer=c},set referencePointUpdateDelay(c){a._referencePointUpdateDelay=c}}},enumerable:!0,configurable:!0});h.FIXED_LIGHT_DIRECTION=z;l([a.property({type:Boolean,dependsOn:["disableQueries",
"_renderer.updating"],readOnly:!0})],h.prototype,"updating",null);l([a.property()],h.prototype,"disableQueries",void 0);l([a.property({constructOnly:!0})],h.prototype,"view",void 0);l([a.property()],h.prototype,"_renderer",void 0);return h=l([a.subclass("esri.views.3d.environment.SceneViewEnvironmentManager")],h)}(a.declared(b,h));d.SceneViewEnvironmentManager=r;var B=new Date,C={hours:0,minutes:0,seconds:0},F=q.vec3f64.fromValues(.22,.22,.33),E=q.vec3f64.fromValues(.22,.22,.22);d.default=r})},"esri/core/libs/gl-matrix-2/vec4f64":function(){define(["require",
"exports","./factories/vec4f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f64=n})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["require","exports"],function(r,d){function n(){return[0,0,0,0]}function l(){return[1,1,1,1]}function k(){return[1,0,0,0]}function b(){return[0,1,0,0]}function h(){return[0,0,1,0]}function g(){return[0,0,0,1]}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(b){return[b[0],b[1],b[2],b[3]]};d.fromValues=
function(b,c,f,a){return[b,c,f,a]};d.fromArray=function(b){for(var c=n(),f=Math.min(4,b.length),a=0;a<f;++a)c[a]=b[a];return c};d.createView=function(b,c){return new Float64Array(b,c,4)};d.zeros=function(){return n()};d.ones=l;d.unitX=k;d.unitY=b;d.unitZ=h;d.unitW=g;d.ZEROS=n();d.ONES=l();d.UNIT_X=k();d.UNIT_Y=b();d.UNIT_Z=h();d.UNIT_W=g()})},"esri/views/3d/environment/EnvironmentRenderer":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/compilerUtils ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./PanoramicAtmosphere ./RealisticAtmosphere ./SimpleAtmosphere ./Stars".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){var q=[13,14];return function(k){function d(){var a=null!==k&&k.apply(this,arguments)||this;a.needsRender=!1;a.didRender=!0;a._handles=new h;a._initContext=null;a._pendingAtmosphere=null;a._atmosphere=null;a._stars=null;return a}n(d,k);Object.defineProperty(d.prototype,"updating",{get:function(){return null!=this._pendingAtmosphere},enumerable:!0,configurable:!0});d.prototype.initialize=function(){this.view._stage.addRenderPlugin(q,this)};d.prototype.destroy=function(){this._pendingAtmosphere&&
(this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null);this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=null);this._stars&&(this._stars.destroy(),this._stars=null);this._handles&&this._handles.removeAll();this.view&&(this.view._stage.removeRenderPlugin(this),this.view=null)};d.prototype.initializeRenderContext=function(a){this._initContext=a;this.setup()};d.prototype.setup=function(){var a=this;this._handles.add(g.when(this.view,"basemapTerrain",function(){return a._updateBasemapTerrain()}));
this._handles.add([g.init(this.view,["viewingMode","environment.atmosphereEnabled","environment.atmosphere.quality"],function(){return a._updateAtmosphere()}),g.init(this.view,"environment.starsEnabled",function(){return a._updateStars()})])};d.prototype.uninitializeRenderContext=function(a){this._stars&&(this._stars.uninitializeRenderContext(a),this._stars.destroy(),this._stars=null);this._atmosphere&&(this._atmosphere.uninitializeRenderContext(a),this._atmosphere.destroy(),this._atmosphere=null)};
d.prototype.render=function(a){var c=this.view.basemapTerrain;if(!(c&&c.loaded||"global"!==this.view.viewingMode))return!1;c=!0;this._stars&&(c=this._stars.render(a)&&c);this._atmosphere&&(c=this._atmosphere.render(a)&&c);c&&(this.needsRender=!1);return c};d.prototype._updateStars=function(){var a=this.view.get("environment.starsEnabled")||!1;a&&!this._stars?(this._stars=new p(this.view),this._stars.initializeRenderContext(this._initContext),this.needsRender=!0):!a&&this._stars&&(this._stars.destroy(),
this._stars=null,this.needsRender=!0)};d.prototype._updateAtmosphere=function(){var a=this,c=this._getAtmosphereType();this.atmosphereType!==c&&(this.atmosphereType=c,this._pendingAtmosphere&&(this._pendingAtmosphere!==this._atmosphere&&this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null),(c=this._getAtmosphereClass())?(c=new c(this.view),c.initializeRenderContext(this._initContext),null==this._atmosphere?(this._atmosphere=c,this.needsRender=!0):(this._pendingAtmosphere=c,c.when(function(){a._atmosphere.destroy();
a._atmosphere=a._pendingAtmosphere;a._pendingAtmosphere=null})),c.when(function(){a.needsRender=!0;a._updateBasemapTerrain()})):(this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=null,this.needsRender=!0),this._updateBasemapTerrain()))};d.prototype._getAtmosphereClass=function(){var e=this._getAtmosphereType();switch(e){case "none":return null;case "realistic":return f;case "panoramic":return c;case "simple":return a;default:b.neverReached(e)}};d.prototype._getAtmosphereType=function(){var a=
this.view.get("environment.atmosphereEnabled"),c=this.view.get("environment.atmosphere.quality");return a&&null!=c?"local"===this.view.viewingMode?"panoramic":"high"===c&&f.isSupported(this._initContext)?"realistic":"simple":"none"};d.prototype._updateBasemapTerrain=function(){var a=this.view.basemapTerrain;a&&(a.velvetOverground=null!=this._atmosphere&&"simple"===this.atmosphereType)};Object.defineProperty(d.prototype,"test",{get:function(){return{atmosphere:this._atmosphere}},enumerable:!0,configurable:!0});
l([e.property()],d.prototype,"view",void 0);l([e.property({dependsOn:["_pendingAtmosphere"]})],d.prototype,"updating",null);l([e.property()],d.prototype,"_pendingAtmosphere",void 0);return d=l([e.subclass("esri.views.3d.environment.EnvironmentRenderer")],d)}(e.declared(k))})},"esri/views/3d/environment/PanoramicAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ./resources/SimpleAtmosphereTexture ../support/imageUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Util ../webgl-engine/shaders/SimpleAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){r=function(){function f(a){this.needsRender=!1;this.didRender=!0;this.slot=13;this._readyResolver=k.createResolver();this._readyController=k.createAbortController();this.view=a}f.prototype.destroy=function(){this._readyResolver.reject();this._program&&(this._program.dispose(),this._program=null);this._texture&&(this._texture.dispose(),this._texture=null);this._readyController&&(this._readyController.abort(),this._readyController=null)};f.prototype.when=
function(a){return l(this,void 0,void 0,function(){return n(this,function(c){switch(c.label){case 0:return[4,this._readyResolver.promise];case 1:return c.sent(),a(),[2]}})})};f.prototype.initializeRenderContext=function(a){var c=this,b=a.rctx;this._program=t.createProgram(b,q.colorPass,{panoramic:!0});this._pipelineState=y.makePipelineState({blending:y.separateBlendingParams(770,1,771,771),culling:y.backFaceCullingParams,depthTest:{func:515},colorWrite:y.defaultColorWriteParams});this._vao=this._createVertexArrayObject(b);
this._vaoCount=m.vertexCount(this._vao,"geometry");e.requestImage(g,this._readyController).then(function(b){c._texture=new x(a.rctx,{pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!0},b);c.needsRender=!0;c._readyController=null;c._readyResolver.resolve()})};f.prototype.uninitializeRenderContext=function(a){this.destroy()};f.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||null==this._texture)return!1;var c=a.rctx,f=this._program;c.bindProgram(f);c.setPipelineState(this._pipelineState);
c.bindTexture(this._texture);f.setUniform1i("tex",0);f.setUniformMatrix4fv("proj",a.camera.projectionMatrix);var e=z;b.mat4.copy(e,a.camera.viewMatrix);e[12]=0;e[13]=0;e[14]=0;e[15]=1;f.setUniformMatrix4fv("view",z);f.setUniform4f("color",1,1,1,1);f.setUniform3fv("lightDirection",a.lightingData.direction);c.bindVAO(this._vao);w.assertCompatibleVertexAttributeLocations(this._vao,f);c.drawArrays(4,0,this._vaoCount);this.needsRender=!1;return!0};f.prototype._createVertexArrayObject=function(b){for(var f=
a.createPolySphereGeometry(1,2,!1),e=f.indices[p.VertexAttrConstants.POSITION],g=0;g<e.length;g+=3){var h=e[g];e[g]=e[g+2];e[g+2]=h}for(var f=f.vertexAttributes[p.VertexAttrConstants.POSITION].data,h=B.createBuffer(e.length),m=h.position,g=0;g<e.length;++g){var k=3*e[g];m.set(g,0,f[k]);m.set(g,1,f[k+1]);m.set(g,2,f[k+2])}return new u(b,q.colorPass.attributes,{geometry:c.glLayout(B)},{geometry:v.createVertex(b,35044,h.buffer)})};return f}();var z=h.mat4f64.create(),B=f.newLayout().vec3f("position");
return r})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat4f64=n})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],
d[14],d[15]]};d.fromValues=function(d,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x){return[d,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x]};d.createView=function(d,l){return new Float64Array(d,l,16)}})},"esri/views/3d/environment/resources/SimpleAtmosphereTexture":function(){define(["require","exports"],function(r,d){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAIACAYAAABD1gYFAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7AAAAOwAFq1okJAAAAB3RJTUUH4QkLDx4bnqU2+QAAAd1JREFUSMd9lkmWxDAIQ/Xluv+V0wuDjaeuhV+IGQUoJUnNwGfAVvx+lsBCWJIsCaMpQn8nuhgqyyEzbAX1Ih0oHaQZN5X5jul581diaDVbSgAdZv1YLoCLyn/RruCsOdcqR7RS/jXkLMa9UddcDn9O7G8gwprzs6xbQl/Fns3BE90r9veQ/wzNrTM5p1yDF1yokLCosDX5kik1lxeSWxfWsihN/lZcHuPIOuhccZ4Ovt74qQK3USkFzsQx7Ki5NgqoMI1J5ILztr9UrGoGHN2qnSEwOHiD97ByDghs/KIVYp9DfdIIoJPcBkWWnM2O2s5ru3su+8GdPLhM5048r/09UDsZmJ3HRwe5MT/aA9Ul4cG74+lIvICYlZcFY42B6vAzuz/HEVn5VbP3DDgQ7xuAGZtnI76cEkbPczDDgSMDR8iFkfBMTQV728mnsx84GopNWZxQsWJxbI9pD0hmNAzWB8bun41hRk+3mNlRFvbY86mcMEVCWWAX+xJbERJHWVPP3Wkq91uyDtuKDLrYNKLl7bww6rZulo3jnafyePJ64ZZi67aEl0MkbJtTbE1h+2vIzVOU3JwWISrNyNtfi+9xqECIXZk87ODcEMeBhjj41GN1Xf+DzP9c9UmPd39C1BID2rDpAwAAAABJRU5ErkJggg\x3d\x3d"})},
"esri/views/3d/support/imageUtils":function(){define(["require","exports","../../../core/tsSupport/assignHelper","../../../request"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.dataURItoBlob=function(k){var b=atob(k.split(",")[1]);k=k.split(",")[0].split(":")[1].split(";")[0];for(var h=new ArrayBuffer(b.length),g=new Uint8Array(h),e=0;e<b.length;e++)g[e]=b.charCodeAt(e);return new Blob([h],{type:k})};d.requestImage=function(k,b){return l(k,n({responseType:"image"},b)).then(function(b){return b.data})}})},
"esri/views/3d/support/buffer/glUtil":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});var l={divisor:0,prefixA:!1};d.glLayout=function(b,h){void 0===h&&(h={});h=n({},l,h);var g=b.stride;return b.fieldNames.filter(function(e){e=b.fields.get(e).optional;return!(e&&e.glPadding)}).map(function(e){var c=b.fields.get(e),f=c.constructor.ElementCount,a;a=k[c.constructor.ElementType];if(!a)throw Error("BufferType not supported in WebGL");
var p=c.offset,c=!(!c.optional||!c.optional.glNormalized);return{name:h.prefixA?"a"+e[0].toUpperCase()+e.substr(1):e,stride:g,count:f,type:a,offset:p,normalized:c,divisor:h.divisor}})};var k={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["require","exports","./BufferView","./types"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});var k=function(){function b(b,e){this.layout=b;this.buffer="number"===
typeof e?new ArrayBuffer(e*b.stride):e;e=0;for(var c=b.fieldNames;e<c.length;e++){var f=c[e],a=b.fields.get(f);this[f]=new a.constructor(this.buffer,a.offset,this.stride)}}Object.defineProperty(b.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"count",{get:function(){return this.buffer.byteLength/this.stride},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteLength",{get:function(){return this.buffer.byteLength},
enumerable:!0,configurable:!0});b.prototype.getField=function(b,e){return(b=this[b])&&b.elementCount===e.ElementCount&&b.elementType===e.ElementType?b:null};b.prototype.slice=function(g,e){return new b(this.layout,this.buffer.slice(g*this.stride,e*this.stride))};b.prototype.copyFrom=function(b,e,c,f){var a=this.stride;0===a%4?(b=new Uint32Array(b.buffer,e*a,f*a/4),c=new Uint32Array(this.buffer,c*a,f*a/4)):(b=new Uint8Array(b.buffer,e*a,f*a),c=new Uint8Array(this.buffer,c*a,f*a));c.set(b)};return b}();
d.InterleavedBuffer=k;var b=function(){function b(){this.stride=0;this.fields=new Map;this.fieldNames=[]}b.prototype.vec2f=function(b,e){this.appendField(b,n.BufferViewVec2f,e);return this};b.prototype.vec2f64=function(b,e){this.appendField(b,n.BufferViewVec2f64,e);return this};b.prototype.vec3f=function(b,e){this.appendField(b,n.BufferViewVec3f,e);return this};b.prototype.vec3f64=function(b,e){this.appendField(b,n.BufferViewVec3f64,e);return this};b.prototype.vec4f=function(b,e){this.appendField(b,
n.BufferViewVec4f,e);return this};b.prototype.vec4f64=function(b,e){this.appendField(b,n.BufferViewVec4f64,e);return this};b.prototype.mat3f=function(b,e){this.appendField(b,n.BufferViewMat3f,e);return this};b.prototype.mat3f64=function(b,e){this.appendField(b,n.BufferViewMat3f64,e);return this};b.prototype.mat4f=function(b,e){this.appendField(b,n.BufferViewMat4f,e);return this};b.prototype.mat4f64=function(b,e){this.appendField(b,n.BufferViewMat4f64,e);return this};b.prototype.vec4u8=function(b,
e){this.appendField(b,n.BufferViewVec4u8,e);return this};b.prototype.f32=function(b,e){this.appendField(b,n.BufferViewFloat,e);return this};b.prototype.f64=function(b,e){this.appendField(b,n.BufferViewFloat64,e);return this};b.prototype.u8=function(b,e){this.appendField(b,n.BufferViewUint8,e);return this};b.prototype.u16=function(b,e){this.appendField(b,n.BufferViewUint16,e);return this};b.prototype.i8=function(b,e){this.appendField(b,n.BufferViewInt8,e);return this};b.prototype.vec2i8=function(b,
e){this.appendField(b,n.BufferViewVec2i8,e);return this};b.prototype.vec2i16=function(b,e){this.appendField(b,n.BufferViewVec2i16,e);return this};b.prototype.vec2u8=function(b,e){this.appendField(b,n.BufferViewVec2u8,e);return this};b.prototype.vec4u16=function(b,e){this.appendField(b,n.BufferViewVec4u16,e);return this};b.prototype.u32=function(b,e){this.appendField(b,n.BufferViewUint32,e);return this};b.prototype.appendField=function(b,e,c){var f=e.ElementCount*l.elementTypeSize(e.ElementType);this.fields.set(b,
{size:f,constructor:e,offset:this.stride,optional:c});this.stride+=f;this.fieldNames.push(b)};b.prototype.alignTo=function(b){this.stride=Math.floor((this.stride+b-1)/b)*b;return this};b.prototype.hasField=function(b){return 0<=this.fieldNames.indexOf(b)};b.prototype.createBuffer=function(b){return new k(this,b)};b.prototype.createView=function(b){return new k(this,b)};b.prototype.clone=function(){var g=new b;g.stride=this.stride;g.fields=new Map;this.fields.forEach(function(b,c){return g.fields.set(c,
b)});g.fieldNames=this.fieldNames.slice();g.BufferType=this.BufferType;return g};return b}();d.InterleavedLayout=b;d.newLayout=function(){return new b}})},"esri/views/3d/support/buffer/BufferView":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function b(a,b,f,e){void 0===
b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType="f32";return b}(b.BufferViewScalarImpl);d.BufferViewFloat=r;r=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType="f32";return b}(h.BufferViewVec2Impl);d.BufferViewVec2f=r;r=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType=
"f32";return b}(g.BufferViewVec3Impl);d.BufferViewVec3f=r;r=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType="f32";return b}(e.BufferViewVec4Impl);d.BufferViewVec4f=r;r=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType="f32";return b}(l.BufferViewMat3Impl);d.BufferViewMat3f=r;l=function(c){function b(a,b,f,e){void 0===
b&&(b=0);a=c.call(this,Float64Array,a,b,f,e)||this;a.elementType="f64";return a}n(b,c);b.ElementType="f64";return b}(l.BufferViewMat3Impl);d.BufferViewMat3f64=l;l=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float32Array,a,b,f,e)||this;a.elementType="f32";return a}n(b,c);b.ElementType="f32";return b}(k.BufferViewMat4Impl);d.BufferViewMat4f=l;k=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Float64Array,a,b,f,e)||this;a.elementType="f64";return a}n(b,c);b.ElementType=
"f64";return b}(k.BufferViewMat4Impl);d.BufferViewMat4f64=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Float64Array,a,c,f,e)||this;a.elementType="f64";return a}n(c,b);c.ElementType="f64";return c}(b.BufferViewScalarImpl);d.BufferViewFloat64=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Float64Array,a,c,f,e)||this;a.elementType="f64";return a}n(c,b);c.ElementType="f64";return c}(h.BufferViewVec2Impl);d.BufferViewVec2f64=k;k=function(b){function c(a,c,f,
e){void 0===c&&(c=0);a=b.call(this,Float64Array,a,c,f,e)||this;a.elementType="f64";return a}n(c,b);c.ElementType="f64";return c}(g.BufferViewVec3Impl);d.BufferViewVec3f64=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Float64Array,a,c,f,e)||this;a.elementType="f64";return a}n(c,b);c.ElementType="f64";return c}(e.BufferViewVec4Impl);d.BufferViewVec4f64=k;k=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Uint8Array,a,b,f,e)||this;a.elementType="u8";return a}n(b,
c);b.ElementType="u8";return b}(b.BufferViewScalarImpl);d.BufferViewUint8=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint8Array,a,c,f,e)||this;a.elementType="u8";return a}n(c,b);c.ElementType="u8";return c}(h.BufferViewVec2Impl);d.BufferViewVec2u8=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint8Array,a,c,f,e)||this;a.elementType="u8";return a}n(c,b);c.ElementType="u8";return c}(g.BufferViewVec3Impl);d.BufferViewVec3u8=k;k=function(b){function c(a,
c,f,e){void 0===c&&(c=0);a=b.call(this,Uint8Array,a,c,f,e)||this;a.elementType="u8";return a}n(c,b);c.ElementType="u8";return c}(e.BufferViewVec4Impl);d.BufferViewVec4u8=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint16Array,a,c,f,e)||this;a.elementType="u16";return a}n(c,b);c.ElementType="u16";return c}(b.BufferViewScalarImpl);d.BufferViewUint16=k;k=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Uint16Array,a,b,f,e)||this;a.elementType="u16";return a}n(b,
c);b.ElementType="u16";return b}(h.BufferViewVec2Impl);d.BufferViewVec2u16=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint16Array,a,c,f,e)||this;a.elementType="u16";return a}n(c,b);c.ElementType="u16";return c}(g.BufferViewVec3Impl);d.BufferViewVec3u16=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint16Array,a,c,f,e)||this;a.elementType="u16";return a}n(c,b);c.ElementType="u16";return c}(e.BufferViewVec4Impl);d.BufferViewVec4u16=k;k=function(b){function c(a,
c,f,e){void 0===c&&(c=0);a=b.call(this,Uint32Array,a,c,f,e)||this;a.elementType="u32";return a}n(c,b);c.ElementType="u32";return c}(b.BufferViewScalarImpl);d.BufferViewUint32=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint32Array,a,c,f,e)||this;a.elementType="u32";return a}n(c,b);c.ElementType="u32";return c}(h.BufferViewVec2Impl);d.BufferViewVec2u32=k;k=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Uint32Array,a,b,f,e)||this;a.elementType="u32";return a}
n(b,c);b.ElementType="u32";return b}(g.BufferViewVec3Impl);d.BufferViewVec3u32=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Uint32Array,a,c,f,e)||this;a.elementType="u32";return a}n(c,b);c.ElementType="u32";return c}(e.BufferViewVec4Impl);d.BufferViewVec4u32=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int8Array,a,c,f,e)||this;a.elementType="i8";return a}n(c,b);c.ElementType="i8";return c}(b.BufferViewScalarImpl);d.BufferViewInt8=k;k=function(b){function c(a,
c,f,e){void 0===c&&(c=0);a=b.call(this,Int8Array,a,c,f,e)||this;a.elementType="i8";return a}n(c,b);c.ElementType="i8";return c}(h.BufferViewVec2Impl);d.BufferViewVec2i8=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int8Array,a,c,f,e)||this;a.elementType="i8";return a}n(c,b);c.ElementType="i8";return c}(g.BufferViewVec3Impl);d.BufferViewVec3i8=k;k=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Int8Array,a,b,f,e)||this;a.elementType="i8";return a}n(b,c);b.ElementType=
"i8";return b}(e.BufferViewVec4Impl);d.BufferViewVec4i8=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int16Array,a,c,f,e)||this;a.elementType="i16";return a}n(c,b);c.ElementType="i16";return c}(b.BufferViewScalarImpl);d.BufferViewInt16=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int16Array,a,c,f,e)||this;a.elementType="i16";return a}n(c,b);c.ElementType="i16";return c}(h.BufferViewVec2Impl);d.BufferViewVec2i16=k;k=function(b){function c(a,c,f,e){void 0===
c&&(c=0);a=b.call(this,Int16Array,a,c,f,e)||this;a.elementType="i16";return a}n(c,b);c.ElementType="i16";return c}(g.BufferViewVec3Impl);d.BufferViewVec3i16=k;k=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int16Array,a,c,f,e)||this;a.elementType="i16";return a}n(c,b);c.ElementType="i16";return c}(e.BufferViewVec4Impl);d.BufferViewVec4i16=k;b=function(c){function b(a,b,f,e){void 0===b&&(b=0);a=c.call(this,Int32Array,a,b,f,e)||this;a.elementType="i32";return a}n(b,c);b.ElementType=
"i32";return b}(b.BufferViewScalarImpl);d.BufferViewInt32=b;h=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int32Array,a,c,f,e)||this;a.elementType="i32";return a}n(c,b);c.ElementType="i32";return c}(h.BufferViewVec2Impl);d.BufferViewVec2i32=h;g=function(b){function c(a,c,f,e){void 0===c&&(c=0);a=b.call(this,Int32Array,a,c,f,e)||this;a.elementType="i32";return a}n(c,b);c.ElementType="i32";return c}(g.BufferViewVec3Impl);d.BufferViewVec3i32=g;e=function(b){function c(a,c,f,e){void 0===
c&&(c=0);a=b.call(this,Int32Array,a,c,f,e)||this;a.elementType="i32";return a}n(c,b);c.ElementType="i32";return c}(e.BufferViewVec4Impl);d.BufferViewVec4i32=e})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(l,k,b,h,g){void 0===b&&(b=0);this.TypedArrayConstructor=l;this.elementCount=9;l=this.TypedArrayConstructor;void 0===h&&(h=9*l.BYTES_PER_ELEMENT);var e=0===k.byteLength?
0:b;this.typedBuffer=null==g?new l(k,e):new l(k,e,(g-b)/l.BYTES_PER_ELEMENT);this.typedBufferStride=h/l.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}d.prototype.getMat=function(l,k){l*=this.typedBufferStride;for(var b=0;9>b;b++)k[b]=this.typedBuffer[l+b];return k};d.prototype.setMat=function(l,k){l*=this.typedBufferStride;for(var b=0;9>b;b++)this.typedBuffer[l+b]=k[b]};d.prototype.get=
function(l,k){return this.typedBuffer[l*this.typedBufferStride+k]};d.prototype.set=function(l,k,b){this.typedBuffer[l*this.typedBufferStride+k]=b};d.prototype.copyFrom=function(l,k,b){var h=this.typedBuffer,g=k.typedBuffer;l*=this.typedBufferStride;k=b*k.typedBufferStride;for(b=0;9>b;++b)h[l+b]=g[k+b]};Object.defineProperty(d.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});d.ElementCount=9;return d}();d.BufferViewMat3Impl=r})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(l,k,b,h,g){void 0===b&&(b=0);this.TypedArrayConstructor=l;this.elementCount=16;l=this.TypedArrayConstructor;void 0===h&&(h=16*l.BYTES_PER_ELEMENT);var e=0===k.byteLength?0:b;this.typedBuffer=null==g?new l(k,e):new l(k,e,(g-b)/l.BYTES_PER_ELEMENT);this.typedBufferStride=h/l.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
d.prototype.getMat=function(l,k){l*=this.typedBufferStride;for(var b=0;16>b;b++)k[b]=this.typedBuffer[l+b];return k};d.prototype.setMat=function(l,k){l*=this.typedBufferStride;for(var b=0;16>b;b++)this.typedBuffer[l+b]=k[b]};d.prototype.get=function(l,k){return this.typedBuffer[l*this.typedBufferStride+k]};d.prototype.set=function(l,k,b){this.typedBuffer[l*this.typedBufferStride+k]=b};d.prototype.copyFrom=function(l,k,b){var h=this.typedBuffer,g=k.typedBuffer;l*=this.typedBufferStride;k=b*k.typedBufferStride;
for(b=0;16>b;++b)h[l+b]=g[k+b]};Object.defineProperty(d.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});d.ElementCount=16;return d}();d.BufferViewMat4Impl=r})},"esri/views/3d/support/buffer/internals/Scalar":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(l,k,b,h,g){void 0===b&&(b=0);this.TypedArrayConstructor=l;this.elementCount=1;l=this.TypedArrayConstructor;void 0===
h&&(h=l.BYTES_PER_ELEMENT);var e=0===k.byteLength?0:b;this.typedBuffer=null==g?new l(k,e):new l(k,e,(g-b)/l.BYTES_PER_ELEMENT);this.typedBufferStride=h/l.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}d.prototype.get=function(l){return this.typedBuffer[l*this.typedBufferStride]};d.prototype.set=function(l,k){this.typedBuffer[l*this.typedBufferStride]=k};Object.defineProperty(d.prototype,
"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});d.ElementCount=1;return d}();d.BufferViewScalarImpl=r})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function l(k,b,h,g,e){void 0===h&&(h=0);this.TypedArrayConstructor=k;this.elementCount=2;k=this.TypedArrayConstructor;void 0===g&&(g=2*k.BYTES_PER_ELEMENT);
var c=0===b.byteLength?0:h;this.typedBuffer=null==e?new k(b,c):new k(b,c,(e-h)/k.BYTES_PER_ELEMENT);this.typedBufferStride=g/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}l.prototype.getVec=function(k,b){return n.vec2.set(b,this.typedBuffer[k*this.typedBufferStride],this.typedBuffer[k*this.typedBufferStride+1])};l.prototype.setVec=function(k,b){this.typedBuffer[k*this.typedBufferStride]=
b[0];this.typedBuffer[k*this.typedBufferStride+1]=b[1]};l.prototype.get=function(k,b){return this.typedBuffer[k*this.typedBufferStride+b]};l.prototype.set=function(k,b,h){this.typedBuffer[k*this.typedBufferStride+b]=h};l.prototype.copyFrom=function(k,b,h){var g=this.typedBuffer,e=b.typedBuffer;k*=this.typedBufferStride;b=h*b.typedBufferStride;g[k]=e[b];g[k+1]=e[b+1]};Object.defineProperty(l.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});l.ElementCount=
2;return l}();d.BufferViewVec2Impl=r})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=n})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(r,d,n){function l(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];return b}function k(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];return b}function b(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];return b}function h(b,a){var c=
a[0]-b[0];b=a[1]-b[1];return Math.sqrt(c*c+b*b)}function g(b,a){var c=a[0]-b[0];b=a[1]-b[1];return c*c+b*b}function e(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)}function c(b){var a=b[0];b=b[1];return a*a+b*b}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(b,a){b[0]=a[0];b[1]=a[1];return b};d.set=function(b,a,c){b[0]=a;b[1]=c;return b};d.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];return b};d.subtract=l;d.multiply=k;d.divide=b;d.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=
Math.ceil(a[1]);return b};d.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};d.min=function(b,a,c){b[0]=Math.min(a[0],c[0]);b[1]=Math.min(a[1],c[1]);return b};d.max=function(b,a,c){b[0]=Math.max(a[0],c[0]);b[1]=Math.max(a[1],c[1]);return b};d.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};d.scale=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;return b};d.scaleAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;return b};d.distance=h;d.squaredDistance=
g;d.length=e;d.squaredLength=c;d.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];return b};d.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];return b};d.normalize=function(b,a){var c=a[0],e=a[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c);return b};d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};d.cross=function(b,a,c){a=a[0]*c[1]-a[1]*c[0];b[0]=b[1]=0;b[2]=a;return b};d.lerp=function(b,a,c,e){var f=a[0];a=a[1];b[0]=f+e*(c[0]-f);b[1]=a+e*(c[1]-a);return b};d.random=function(b,a){a=a||1;var c=
2*n.RANDOM()*Math.PI;b[0]=Math.cos(c)*a;b[1]=Math.sin(c)*a;return b};d.transformMat2=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[2]*a;b[1]=c[1]*e+c[3]*a;return b};d.transformMat2d=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[2]*a+c[4];b[1]=c[1]*e+c[3]*a+c[5];return b};d.transformMat3=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[3]*a+c[6];b[1]=c[1]*e+c[4]*a+c[7];return b};d.transformMat4=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[4]*a+c[12];b[1]=c[1]*e+c[5]*a+c[13];return b};d.rotate=
function(b,a,c,e){var f=a[0]-c[0];a=a[1]-c[1];var g=Math.sin(e);e=Math.cos(e);b[0]=f*e-a*g+c[0];b[1]=f*g+a*e+c[1];return b};d.angle=function(b,a){var c=b[0];b=b[1];var e=a[0];a=a[1];var f=c*c+b*b;0<f&&(f=1/Math.sqrt(f));var g=e*e+a*a;0<g&&(g=1/Math.sqrt(g));c=(c*e+b*a)*f*g;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]};d.equals=function(b,a){var c=b[0];b=b[1];var e=a[0];a=a[1];return Math.abs(c-
e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};d.len=e;d.sub=l;d.mul=k;d.div=b;d.dist=h;d.sqrDist=g;d.sqrLen=c})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec3"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function l(k,b,h,g,e){void 0===h&&(h=0);this.TypedArrayConstructor=k;this.elementCount=3;k=this.TypedArrayConstructor;
void 0===g&&(g=3*k.BYTES_PER_ELEMENT);var c=0===b.byteLength?0:h;this.typedBuffer=null==e?new k(b,c):new k(b,c,(e-h)/k.BYTES_PER_ELEMENT);this.typedBufferStride=g/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}l.prototype.getVec=function(k,b){return n.vec3.set(b,this.typedBuffer[k*this.typedBufferStride],this.typedBuffer[k*this.typedBufferStride+1],this.typedBuffer[k*this.typedBufferStride+
2])};l.prototype.setVec=function(k,b){this.typedBuffer[k*this.typedBufferStride]=b[0];this.typedBuffer[k*this.typedBufferStride+1]=b[1];this.typedBuffer[k*this.typedBufferStride+2]=b[2]};l.prototype.get=function(k,b){return this.typedBuffer[k*this.typedBufferStride+b]};l.prototype.set=function(k,b,h){this.typedBuffer[k*this.typedBufferStride+b]=h};l.prototype.copyFrom=function(k,b,h){var g=this.typedBuffer,e=b.typedBuffer;k*=this.typedBufferStride;b=h*b.typedBufferStride;g[k]=e[b];g[k+1]=e[b+1];g[k+
2]=e[b+2]};Object.defineProperty(l.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});l.ElementCount=3;return l}();d.BufferViewVec3Impl=r})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec4"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function l(k,b,h,g,e){void 0===h&&(h=0);this.TypedArrayConstructor=k;this.elementCount=4;k=this.TypedArrayConstructor;
void 0===g&&(g=4*k.BYTES_PER_ELEMENT);var c=0===b.byteLength?0:h;this.typedBuffer=null==e?new k(b,c):new k(b,c,(e-h)/k.BYTES_PER_ELEMENT);this.typedBufferStride=g/k.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}l.prototype.getVec=function(k,b){return n.vec4.set(b,this.typedBuffer[k*this.typedBufferStride],this.typedBuffer[k*this.typedBufferStride+1],this.typedBuffer[k*this.typedBufferStride+
2],this.typedBuffer[k*this.typedBufferStride+3])};l.prototype.setVec=function(k,b){this.typedBuffer[k*this.typedBufferStride]=b[0];this.typedBuffer[k*this.typedBufferStride+1]=b[1];this.typedBuffer[k*this.typedBufferStride+2]=b[2];this.typedBuffer[k*this.typedBufferStride+3]=b[3]};l.prototype.get=function(k,b){return this.typedBuffer[k*this.typedBufferStride+b]};l.prototype.set=function(k,b,h){this.typedBuffer[k*this.typedBufferStride+b]=h};l.prototype.copyFrom=function(k,b,h){var g=this.typedBuffer,
e=b.typedBuffer;k*=this.typedBufferStride;b=h*b.typedBufferStride;g[k]=e[b];g[k+1]=e[b+1];g[k+2]=e[b+2];g[k+3]=e[b+3]};Object.defineProperty(l.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});l.ElementCount=4;return l}();d.BufferViewVec4Impl=r})},"esri/core/libs/gl-matrix-2/vec4":function(){define(["require","exports","./math/vec4"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec4=n})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require",
"exports","./common"],function(r,d,n){function l(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b}function k(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];b[2]=a[2]*c[2];b[3]=a[3]*c[3];return b}function b(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];b[2]=a[2]/c[2];b[3]=a[3]/c[3];return b}function h(b,a){var c=a[0]-b[0],e=a[1]-b[1],f=a[2]-b[2];b=a[3]-b[3];return Math.sqrt(c*c+e*e+f*f+b*b)}function g(b,a){var c=a[0]-b[0],e=a[1]-b[1],f=a[2]-b[2];b=a[3]-b[3];return c*c+e*e+f*f+b*b}function e(b){var a=
b[0],c=b[1],e=b[2];b=b[3];return Math.sqrt(a*a+c*c+e*e+b*b)}function c(b){var a=b[0],c=b[1],e=b[2];b=b[3];return a*a+c*c+e*e+b*b}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.set=function(b,a,c,e,g){b[0]=a;b[1]=c;b[2]=e;b[3]=g;return b};d.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];return b};d.subtract=l;d.multiply=k;d.divide=b;d.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);
b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};d.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};d.min=function(b,a,c){b[0]=Math.min(a[0],c[0]);b[1]=Math.min(a[1],c[1]);b[2]=Math.min(a[2],c[2]);b[3]=Math.min(a[3],c[3]);return b};d.max=function(b,a,c){b[0]=Math.max(a[0],c[0]);b[1]=Math.max(a[1],c[1]);b[2]=Math.max(a[2],c[2]);b[3]=Math.max(a[3],c[3]);return b};d.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);
b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};d.scale=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};d.scaleAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;b[3]=a[3]+c[3]*e;return b};d.distance=h;d.squaredDistance=g;d.length=e;d.squaredLength=c;d.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};d.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};d.normalize=function(b,a){var c=a[0],
e=a[1],f=a[2];a=a[3];var g=c*c+e*e+f*f+a*a;0<g&&(g=1/Math.sqrt(g),b[0]=c*g,b[1]=e*g,b[2]=f*g,b[3]=a*g);return b};d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};d.lerp=function(b,a,c,e){var f=a[0],g=a[1],h=a[2];a=a[3];b[0]=f+e*(c[0]-f);b[1]=g+e*(c[1]-g);b[2]=h+e*(c[2]-h);b[3]=a+e*(c[3]-a);return b};d.random=function(b,a){a=a||1;var c,e,f,g,h,k;do c=2*n.RANDOM()-1,e=2*n.RANDOM()-1,h=c*c+e*e;while(1<=h);do f=2*n.RANDOM()-1,g=2*n.RANDOM()-1,k=f*f+g*g;while(1<=k);h=Math.sqrt((1-h)/
k);b[0]=a*c;b[1]=a*e;b[2]=a*f*h;b[3]=a*g*h;return b};d.transformMat4=function(b,a,c){var e=a[0],g=a[1],f=a[2];a=a[3];b[0]=c[0]*e+c[4]*g+c[8]*f+c[12]*a;b[1]=c[1]*e+c[5]*g+c[9]*f+c[13]*a;b[2]=c[2]*e+c[6]*g+c[10]*f+c[14]*a;b[3]=c[3]*e+c[7]*g+c[11]*f+c[15]*a;return b};d.transformQuat=function(b,a,c){var e=a[0],g=a[1],f=a[2],h=c[0],p=c[1],k=c[2];c=c[3];var m=c*e+p*f-k*g,u=c*g+k*e-h*f,l=c*f+h*g-p*e,e=-h*e-p*g-k*f;b[0]=m*c+e*-h+u*-k-l*-p;b[1]=u*c+e*-p+l*-h-m*-k;b[2]=l*c+e*-k+m*-p-u*-h;b[3]=a[3];return b};
d.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};d.equals=function(b,a){var c=b[0],e=b[1],g=b[2];b=b[3];var f=a[0],h=a[1],k=a[2];a=a[3];return Math.abs(c-f)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-h)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(g-k)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};
d.sub=l;d.mul=k;d.div=b;d.dist=h;d.sqrDist=g;d.len=e;d.sqrLen=c})},"esri/views/3d/support/buffer/types":function(){define(["require","exports","../../../../core/compilerUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.elementTypeSize=function(l){switch(l){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8;default:n.neverReached(l)}};d.isSigned=function(l){switch(l){case "u8":case "u16":case "u32":return!1;
case "i8":case "i16":case "i32":case "f32":case "f64":return!0;default:n.neverReached(l)}};d.isInteger=function(l){switch(l){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1;default:n.neverReached(l)}};d.maximumValue=function(l){switch(l){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308;
default:n.neverReached(l)}}})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./BufferVectorMath ./GeometryData ./Util".split(" "),function(r,d,n,l,k,b,h,g,e){var c=h.Vec3Compact,f;(function(a){for(var b=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],c=[0,0,1,-1,
0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],f=[0,0,1,0,1,1,0,1],h=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],p=Array(36),k=0;6>k;k++)for(var l=0;6>l;l++)p[6*k+l]=k;for(var d=Array(36),k=0;6>k;k++)d[6*k+0]=0,d[6*k+1]=1,d[6*k+2]=2,d[6*k+3]=2,d[6*k+4]=3,d[6*k+5]=0;a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var m=new Float32Array(24),u=0;8>u;u++)m[3*u]=b[u][0]*a[0],m[3*u+1]=b[u][1]*a[1],m[3*u+2]=b[u][2]*a[2];a={};a[e.VertexAttrConstants.POSITION]=new Uint32Array(h);
a[e.VertexAttrConstants.NORMAL]=new Uint32Array(p);a[e.VertexAttrConstants.UV0]=new Uint32Array(d);u={};u[e.VertexAttrConstants.POSITION]={size:3,data:m};u[e.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(c)};u[e.VertexAttrConstants.UV0]={size:2,data:new Float32Array(f)};return new g(u,a)}})(f||(f={}));var a;(function(a){var b=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],c=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],f=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,
2,4,2,3,4,3,0],h=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var m=new Float32Array(18),u=0;6>u;u++)m[3*u]=b[u][0]*a[0],m[3*u+1]=b[u][1]*a[1],m[3*u+2]=b[u][2]*a[2];a={};a[e.VertexAttrConstants.POSITION]=new Uint32Array(f);a[e.VertexAttrConstants.NORMAL]=new Uint32Array(h);u={};u[e.VertexAttrConstants.POSITION]={size:3,data:m};u[e.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(c)};return new g(u,a)}})(a||(a={}));var p;
(function(a){var b=l.vec3f32.fromValues(-.5,0,-.5),c=l.vec3f32.fromValues(.5,0,-.5),f=l.vec3f32.fromValues(0,0,.5),h=l.vec3f32.fromValues(0,.5,0),p=l.vec3f32.create(),k=l.vec3f32.create(),d=l.vec3f32.create(),q=l.vec3f32.create(),t=l.vec3f32.create();n.vec3.subtract(p,b,h);n.vec3.subtract(k,b,c);n.vec3.cross(d,p,k);n.vec3.normalize(d,d);n.vec3.subtract(p,c,h);n.vec3.subtract(k,c,f);n.vec3.cross(q,p,k);n.vec3.normalize(q,q);n.vec3.subtract(p,f,h);n.vec3.subtract(k,f,b);n.vec3.cross(t,p,k);n.vec3.normalize(t,
t);var x=[b,c,f,h],v=[0,-1,0,d[0],d[1],d[2],q[0],q[1],q[2],t[0],t[1],t[2]],y=[0,1,2,3,1,0,3,2,1,3,0,2],I=[0,0,0,1,1,1,2,2,2,3,3,3];a.createGeometry=function(a){Array.isArray(a)||(a=[a,a,a]);for(var b=new Float32Array(12),c=0;4>c;c++)b[3*c]=x[c][0]*a[0],b[3*c+1]=x[c][1]*a[1],b[3*c+2]=x[c][2]*a[2];a={};a[e.VertexAttrConstants.POSITION]=new Uint32Array(y);a[e.VertexAttrConstants.NORMAL]=new Uint32Array(I);c={};c[e.VertexAttrConstants.POSITION]={size:3,data:b};c[e.VertexAttrConstants.NORMAL]={size:3,
data:new Float32Array(v)};return new g(c,a)}})(p||(p={}));var q;(function(d){function q(a,b,c,e,g){if(Math.abs(n.vec3.dot(b,a))>g)return!1;n.vec3.cross(c,a,b);n.vec3.normalize(c,c);n.vec3.cross(e,c,a);n.vec3.normalize(e,e);return!0}function m(a,b,c,e,g,f,h){return q(a,b,g,f,h)||q(a,c,g,f,h)||q(a,e,g,f,h)}d.createBoxGeometry=f.createGeometry;d.createDiamondGeometry=a.createGeometry;d.createTetrahedronGeometry=p.createGeometry;d.createSphereGeometry=function(a,b,c,f,h,m,p){a=a||50;f=void 0!==f?f:-Math.PI;
h=void 0!==h?h:2*Math.PI;m=void 0!==m?m:.5*-Math.PI;p=void 0!==p?p:Math.PI;var u=Math.max(3,Math.floor(b)||8),k=Math.max(2,Math.floor(c)||6),l=(u+1)*(k+1);c=new Float32Array(3*l);b=new Float32Array(3*l);for(var l=new Float32Array(2*l),d=[],z=0,q=0;q<=k;q++){for(var B=[],t=q/k,x=m+t*p,v=Math.cos(x),y=0;y<=u;y++){var w=y/u,C=f+w*h,n=Math.cos(C)*v,F=Math.sin(x),C=-Math.sin(C)*v;c[3*z]=n*a;c[3*z+1]=F*a;c[3*z+2]=C*a;b[3*z]=n;b[3*z+1]=F;b[3*z+2]=C;l[2*z]=w;l[2*z+1]=t;B.push(z);++z}d.push(B)}a=new Uint32Array(2*
u*(k-1)*3);for(q=z=0;q<k;q++)for(y=0;y<u;y++)f=d[q][y],h=d[q][y+1],m=d[q+1][y+1],p=d[q+1][y],0===q?(a[z++]=f,a[z++]=m,a[z++]=p):q===k-1?(a[z++]=f,a[z++]=h,a[z++]=m):(a[z++]=f,a[z++]=h,a[z++]=m,a[z++]=m,a[z++]=p,a[z++]=f);e.assert(z===a.length);u={};u[e.VertexAttrConstants.POSITION]=a;u[e.VertexAttrConstants.NORMAL]=a;u[e.VertexAttrConstants.UV0]=a;k={};k[e.VertexAttrConstants.POSITION]={size:3,data:c};k[e.VertexAttrConstants.NORMAL]={size:3,data:b};k[e.VertexAttrConstants.UV0]={size:2,data:l};return new g(k,
u)};d.createPolySphereGeometry=function(a,b,f){function h(b,e){b>e&&(e=[e,b],b=e[0],e=e[1]);var f=b.toString()+"."+e.toString();if(p[f])return p[f];var g=m.length;m.length+=3;c.add(m,3*b,m,3*e,m,g);c.scale(m,g,a/c.length(m,g));g/=3;return p[f]=g}var m;f?(m=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],f=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1])):(f=a*(1+Math.sqrt(5))/2,m=[-a,f,0,a,f,0,-a,-f,0,a,-f,0,0,-a,f,0,a,f,0,-a,-f,0,a,-f,f,0,-a,f,0,a,-f,0,-a,-f,0,a],f=new Uint32Array([0,
11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]));for(var u=0;u<m.length;u+=3)c.scale(m,u,a/c.length(m,u));for(var p={},u=0;u<b;u++){for(var k=f.length,l=new Uint32Array(4*k),d=0;d<k;d+=3){var z=f[d],q=f[d+1],B=f[d+2],t=h(z,q),x=h(q,B),v=h(B,z),y=4*d;l[y]=z;l[y+1]=t;l[y+2]=v;l[y+3]=q;l[y+4]=x;l[y+5]=t;l[y+6]=B;l[y+7]=v;l[y+8]=x;l[y+9]=t;l[y+10]=x;l[y+11]=v}f=l;p={}}b=new Float32Array(m);for(u=0;u<b.length;u+=3)c.normalize(b,
u);u={};u[e.VertexAttrConstants.POSITION]=f;u[e.VertexAttrConstants.NORMAL]=f;f={};f[e.VertexAttrConstants.POSITION]={size:3,data:new Float32Array(m)};f[e.VertexAttrConstants.NORMAL]={size:3,data:b};return new g(f,u)};d.createPointGeometry=function(a,b,c,f,h,m,p){b=b?new Float64Array([b[0],b[1],b[2]]):new Float32Array([0,0,0]);a=a?new Float32Array([a[0],a[1],a[2]]):new Float32Array([0,0,1]);m=m?new Float32Array(m):new Float32Array([0,0]);var u=c?new Uint8Array([255*c[0],255*c[1],255*c[2],3<c.length?
255*c[3]:255]):new Uint8Array([255,255,255,255]),k=null!=f&&2===f.length?new Float32Array(f):new Float32Array([1,1]);f=new Uint32Array([0]);c={};c[e.VertexAttrConstants.POSITION]=f;c[e.VertexAttrConstants.NORMAL]=f;c[e.VertexAttrConstants.UV0]=f;c[e.VertexAttrConstants.COLOR]=f;c[e.VertexAttrConstants.SIZE]=f;var l={};l[e.VertexAttrConstants.POSITION]={size:3,data:b};l[e.VertexAttrConstants.NORMAL]={size:3,data:a};l[e.VertexAttrConstants.UV0]={size:m.length,data:m};l[e.VertexAttrConstants.COLOR]=
{size:4,data:u};l[e.VertexAttrConstants.SIZE]={size:2,data:k};null!=h&&(h=new Float32Array([h[0],h[1],h[2],h[3]]),c[e.VertexAttrConstants.AUXPOS1]=f,l[e.VertexAttrConstants.AUXPOS1]={size:4,data:h});null!=p&&(p=new Float32Array([p[0],p[1],p[2],p[3]]),c[e.VertexAttrConstants.AUXPOS2]=f,l[e.VertexAttrConstants.AUXPOS2]={size:4,data:p});return new g(l,c,g.DefaultOffsets,"point")};d.createPointArrayGeometry=function(a,b){for(var c=new Float32Array(3*a.length),f=new Float32Array(b?3*a.length:3),h=new Uint32Array(a.length),
m=new Uint32Array(a.length),p=0;p<a.length;p++)c[3*p]=a[p][0],c[3*p+1]=a[p][1],c[3*p+2]=a[p][2],b&&(f[3*p]=b[p][0],f[3*p+1]=b[p][1],f[3*p+2]=b[p][2]),h[p]=p,m[p]=0;b||(f[0]=0,f[1]=1,f[2]=0);a=new Float32Array(2);a[0]=0;a[1]=0;p={};p[e.VertexAttrConstants.POSITION]=h;p[e.VertexAttrConstants.NORMAL]=b?h:m;p[e.VertexAttrConstants.UV0]=m;b={};b[e.VertexAttrConstants.POSITION]={size:3,data:c};b[e.VertexAttrConstants.NORMAL]={size:3,data:f};b[e.VertexAttrConstants.UV0]={size:2,data:a};return new g(b,p,
g.DefaultOffsets,"point")};d.createTriangleGeometry=function(){var a=new Float32Array([0,0,0,0,0,100,100,0,0]),b=new Uint32Array([0,1,2]),c=new Float32Array([0,1,0]),f=new Uint32Array([0,0,0]),h=new Float32Array([0,0]),m=new Uint32Array([0,0,0]),p={};p[e.VertexAttrConstants.POSITION]=b;p[e.VertexAttrConstants.NORMAL]=f;p[e.VertexAttrConstants.UV0]=m;b={};b[e.VertexAttrConstants.POSITION]={size:3,data:a};b[e.VertexAttrConstants.NORMAL]={size:3,data:c};b[e.VertexAttrConstants.UV0]={size:2,data:h};return new g(b,
p)};d.createSquareGeometry=function(a){var b=new Float32Array(12);if(a)for(var c=0;4>c;c++)for(var f=0;3>f;f++)b[3*c+f]=a[c][f];else b[0]=-1,b[1]=-1,b[2]=0,b[3]=1,b[4]=-1,b[5]=0,b[6]=1,b[7]=1,b[8]=0,b[9]=-1,b[10]=1,b[11]=0;var h=new Uint32Array([0,1,2,2,3,0]);a=new Float32Array([0,0,1]);var m=new Uint32Array([0,0,0,0,0,0]),c=new Float32Array([0,0,1,0,1,1,0,1]),f=new Uint8Array([255,255,255,255]),p={};p[e.VertexAttrConstants.POSITION]=h;p[e.VertexAttrConstants.NORMAL]=m;p[e.VertexAttrConstants.UV0]=
h;p[e.VertexAttrConstants.COLOR]=m;h={};h[e.VertexAttrConstants.POSITION]={size:3,data:b};h[e.VertexAttrConstants.NORMAL]={size:3,data:a};h[e.VertexAttrConstants.UV0]={size:2,data:c};h[e.VertexAttrConstants.COLOR]={size:4,data:f};return new g(h,p)};d.createConeGeometry=function(a,b,c,f,h,m){void 0===h&&(h=!0);void 0===m&&(m=!0);var p=0,u=l.vec3f32.fromValues(0,p,0),k=l.vec3f32.fromValues(0,p+a,0),d=l.vec3f32.fromValues(0,-1,0),z=l.vec3f32.fromValues(0,1,0);f&&(p=a,k=l.vec3f32.fromValues(0,0,0),u=
l.vec3f32.fromValues(0,p,0),d=l.vec3f32.fromValues(0,1,0),z=l.vec3f32.fromValues(0,-1,0));u=[k,u];d=[d,z];z=c+2;k=Math.sqrt(a*a+b*b);if(f)for(f=c-1;0<=f;f--)q=2*Math.PI/c*f,B=l.vec3f32.fromValues(Math.cos(q)*b,p,Math.sin(q)*b),u.push(B),q=l.vec3f32.fromValues(a*Math.cos(q)/k,-b/k,a*Math.sin(q)/k),d.push(q);else for(f=0;f<c;f++){var q=2*Math.PI/c*f,B=l.vec3f32.fromValues(Math.cos(q)*b,p,Math.sin(q)*b);u.push(B);q=l.vec3f32.fromValues(a*Math.cos(q)/k,b/k,a*Math.sin(q)/k);d.push(q)}a=new Uint32Array(6*
(c+2));c=new Uint32Array(6*(c+2));p=b=0;if(h){for(f=3;f<u.length;f++)a[b++]=1,a[b++]=f-1,a[b++]=f,c[p++]=0,c[p++]=0,c[p++]=0;a[b++]=u.length-1;a[b++]=2;a[b++]=1;c[p++]=0;c[p++]=0;c[p++]=0}if(m){for(f=3;f<u.length;f++)a[b++]=f,a[b++]=f-1,a[b++]=0,c[p++]=f,c[p++]=f-1,c[p++]=1;a[b++]=0;a[b++]=2;a[b++]=u.length-1;c[p++]=1;c[p++]=2;c[p++]=d.length-1}h=new Float32Array(3*z);for(f=0;f<z;f++)h[3*f]=u[f][0],h[3*f+1]=u[f][1],h[3*f+2]=u[f][2];m=new Float32Array(3*z);for(f=0;f<z;f++)m[3*f]=d[f][0],m[3*f+1]=d[f][1],
m[3*f+2]=d[f][2];u={};u[e.VertexAttrConstants.POSITION]=a;u[e.VertexAttrConstants.NORMAL]=c;d={};d[e.VertexAttrConstants.POSITION]={size:3,data:h};d[e.VertexAttrConstants.NORMAL]={size:3,data:m};return new g(d,u)};d.createCylinderGeometry=function(a,b,c,f,h,m){f=f?l.vec3f32.clone(f):l.vec3f32.fromValues(1,0,0);h=h?l.vec3f32.clone(h):l.vec3f32.fromValues(0,0,0);m=void 0===m?!0:m;var p=l.vec3f32.create();n.vec3.normalize(p,f);f=l.vec3f32.create();n.vec3.scale(f,p,Math.abs(a));var k=l.vec3f32.create();
n.vec3.scale(k,f,-.5);n.vec3.add(k,k,h);var u=l.vec3f32.fromValues(0,1,0);.2>Math.abs(1-n.vec3.dot(p,u))&&n.vec3.set(u,0,0,1);var d=l.vec3f32.create();n.vec3.cross(d,p,u);n.vec3.normalize(d,d);n.vec3.cross(u,d,p);var z=2*c+(m?2:0),q=c+(m?2:0);a=new Float32Array(3*z);h=new Float32Array(3*q);var t=new Float32Array(2*z),B=new Uint32Array(3*c*(m?4:2)),x=new Uint32Array(3*c*(m?4:2));m&&(a[3*(z-2)+0]=k[0],a[3*(z-2)+1]=k[1],a[3*(z-2)+2]=k[2],t[2*(z-2)]=0,t[2*(z-2)+1]=0,a[3*(z-1)+0]=a[3*(z-2)+0]+f[0],a[3*
(z-1)+1]=a[3*(z-2)+1]+f[1],a[3*(z-1)+2]=a[3*(z-2)+2]+f[2],t[2*(z-1)]=1,t[2*(z-1)+1]=1,h[3*(q-2)+0]=-p[0],h[3*(q-2)+1]=-p[1],h[3*(q-2)+2]=-p[2],h[3*(q-1)+0]=p[0],h[3*(q-1)+1]=p[1],h[3*(q-1)+2]=p[2]);for(var p=function(a,b,c){B[a]=b;x[a]=c},v=0,y=l.vec3f32.create(),w=l.vec3f32.create(),C=0;C<c;C++){var F=2*Math.PI/c*C;n.vec3.scale(y,u,Math.sin(F));n.vec3.scale(w,d,Math.cos(F));n.vec3.add(y,y,w);h[3*C+0]=y[0];h[3*C+1]=y[1];h[3*C+2]=y[2];n.vec3.scale(y,y,b);n.vec3.add(y,y,k);a[3*C+0]=y[0];a[3*C+1]=y[1];
a[3*C+2]=y[2];t[2*C+0]=C/c;t[2*C+1]=0;a[3*(C+c)+0]=a[3*C+0]+f[0];a[3*(C+c)+1]=a[3*C+1]+f[1];a[3*(C+c)+2]=a[3*C+2]+f[2];t[2*(C+c)+0]=C/c;t[2*C+1]=1;F=(C+1)%c;p(v++,C,C);p(v++,C+c,C);p(v++,F,F);p(v++,F,F);p(v++,C+c,C);p(v++,F+c,F)}if(m){for(C=0;C<c;C++)F=(C+1)%c,p(v++,z-2,q-2),p(v++,C,q-2),p(v++,F,q-2);for(C=0;C<c;C++)F=(C+1)%c,p(v++,C+c,q-1),p(v++,z-1,q-1),p(v++,F+c,q-1)}b={};b[e.VertexAttrConstants.POSITION]=B;b[e.VertexAttrConstants.NORMAL]=x;b[e.VertexAttrConstants.UV0]=B;c={};c[e.VertexAttrConstants.POSITION]=
{size:3,data:a};c[e.VertexAttrConstants.NORMAL]={size:3,data:h};c[e.VertexAttrConstants.UV0]={size:2,data:t};return new g(c,b)};d.createTubeGeometry=function(a,b,c,f,g){c=c||10;f=null!=f?f:!0;e.assert(1<a.length);for(var h=[],m=[],p=0;p<c;p++){h.push([0,-p-1,-((p+1)%c)-1]);var k=p/c*2*Math.PI;m.push([Math.cos(k)*b,Math.sin(k)*b])}return d.createPathExtrusionGeometry(m,a,[[0,0,0]],h,f,g)};d.createPathExtrusionGeometry=function(a,c,f,h,p,d){void 0===d&&(d=l.vec3f32.fromValues(0,0,0));var u=a.length,
q=new Float32Array(c.length*u*3+(6*f.length||0)),z=new Float32Array(c.length*u+(2*f.length||0)),t=new Float32Array(c.length*u*3+(f?6:0)),B=(c.length-1)*u*6+6*h.length,x=new Uint32Array(B),B=new Uint32Array(B),y=0,w=0,C=0,F=0,E=0,Q=l.vec3f32.create(),J=l.vec3f32.create(),R=l.vec3f32.create(),U=l.vec3f32.create(),X=l.vec3f32.create(),ca=l.vec3f32.create(),G=l.vec3f32.create(),r=k.vec3f64.create(),la=l.vec3f32.create(),ja=l.vec3f32.create(),na=l.vec3f32.create(),pa=l.vec3f32.create(),ta=l.vec3f32.create(),
aa=b.plane.create();n.vec3.set(la,0,1,0);n.vec3.subtract(J,c[1],c[0]);n.vec3.normalize(J,J);p?(n.vec3.add(r,c[0],d),n.vec3.normalize(R,r)):n.vec3.set(R,0,0,1);m(J,R,la,la,X,R,v);n.vec3.copy(U,R);n.vec3.copy(pa,X);for(var ga=0;ga<f.length;ga++)n.vec3.scale(ca,X,f[ga][0]),n.vec3.scale(r,R,f[ga][2]),n.vec3.add(ca,ca,r),n.vec3.add(ca,ca,c[0]),q[y++]=ca[0],q[y++]=ca[1],q[y++]=ca[2],z[C++]=0;t[w++]=-J[0];t[w++]=-J[1];t[w++]=-J[2];for(ga=0;ga<h.length;ga++)x[F++]=0<h[ga][0]?h[ga][0]:-h[ga][0]-1+f.length,
x[F++]=0<h[ga][1]?h[ga][1]:-h[ga][1]-1+f.length,x[F++]=0<h[ga][2]?h[ga][2]:-h[ga][2]-1+f.length,B[E++]=0,B[E++]=0,B[E++]=0;for(var ia=f.length,ga=f.length-1,sa=0;sa<c.length;sa++){var Aa=!1;0<sa&&(n.vec3.copy(Q,J),sa<c.length-1?(n.vec3.subtract(J,c[sa+1],c[sa]),n.vec3.normalize(J,J)):Aa=!0,n.vec3.add(ja,Q,J),n.vec3.normalize(ja,ja),n.vec3.add(na,c[sa-1],U),b.plane.fromPositionAndNormal(c[sa],ja,aa),b.plane.intersectRay(aa,b.ray.wrap(na,Q),r)?(n.vec3.subtract(r,r,c[sa]),n.vec3.normalize(R,r),n.vec3.cross(X,
ja,R),n.vec3.normalize(X,X)):m(ja,U,pa,la,X,R,v),n.vec3.copy(U,R),n.vec3.copy(pa,X));p&&(n.vec3.add(r,c[sa],d),n.vec3.normalize(ta,r));for(var Ba=0;Ba<u;Ba++)if(n.vec3.scale(ca,X,a[Ba][0]),n.vec3.scale(r,R,a[Ba][1]),n.vec3.add(ca,ca,r),n.vec3.normalize(G,ca),t[w++]=G[0],t[w++]=G[1],t[w++]=G[2],p?z[C++]=n.vec3.dot(ca,ta):z[C++]=ca[2],n.vec3.add(ca,ca,c[sa]),q[y++]=ca[0],q[y++]=ca[1],q[y++]=ca[2],!Aa){var Ca=(Ba+1)%u;x[F++]=ia+Ba;x[F++]=ia+u+Ba;x[F++]=ia+Ca;x[F++]=ia+Ca;x[F++]=ia+u+Ba;x[F++]=ia+u+Ca;
for(Ca=0;6>Ca;Ca++)B[E++]=x[F-6+Ca]-ga}ia+=u}a=c[c.length-1];for(ga=0;ga<f.length;ga++)n.vec3.scale(ca,X,f[ga][0]),n.vec3.scale(r,R,f[ga][1]),n.vec3.add(ca,ca,r),n.vec3.add(ca,ca,a),q[y++]=ca[0],q[y++]=ca[1],q[y++]=ca[2],z[C++]=0;f=w/3;t[w++]=J[0];t[w++]=J[1];t[w++]=J[2];u=ia-u;for(ga=0;ga<h.length;ga++)x[F++]=0<=h[ga][0]?ia+h[ga][0]:-h[ga][0]-1+u,x[F++]=0<=h[ga][2]?ia+h[ga][2]:-h[ga][2]-1+u,x[F++]=0<=h[ga][1]?ia+h[ga][1]:-h[ga][1]-1+u,B[E++]=f,B[E++]=f,B[E++]=f;h={};h[e.VertexAttrConstants.POSITION]=
x;h[e.VertexAttrConstants.NORMAL]=B;x={};x[e.VertexAttrConstants.POSITION]={size:3,data:q};x.zOffset={size:1,data:z};x[e.VertexAttrConstants.NORMAL]={size:3,data:t};return new g(x,h)};d.createPolylineGeometry=function(a,b){e.assert(1<a.length,"createPolylineGeometry(): polyline needs at least 2 points");e.assert(3===a[0].length,"createPolylineGeometry(): malformed vertex");e.assert(void 0===b||b.length===a.length,"createPolylineGeometry: need same number of points and normals");e.assert(void 0===
b||3===b[0].length,"createPolylineGeometry(): malformed normal");for(var c=new Float32Array(3*a.length),f=new Uint32Array(2*(a.length-1)),h=0,m=0,p=0;p<a.length;p++){for(var k=0;3>k;k++)c[h++]=a[p][k];0<p&&(f[m++]=p-1,f[m++]=p)}h={};m={};h[e.VertexAttrConstants.POSITION]=f;m[e.VertexAttrConstants.POSITION]={size:3,data:c};if(b){for(var c=new Float32Array(3*b.length),u=0,p=0;p<a.length;p++)for(k=0;3>k;k++)c[u++]=b[p][k];h[e.VertexAttrConstants.NORMAL]=f;m[e.VertexAttrConstants.NORMAL]={size:3,data:c}}return new g(m,
h,g.DefaultOffsets,"line")};d.createExtrudedTriangle=function(a,b,c,f){var h,p,m=new Float32Array(18);a=[[-b,0,f/2],[c,0,f/2],[0,a,f/2],[-b,0,-f/2],[c,0,-f/2],[0,a,-f/2]];for(b=0;6>b;b++)m[3*b]=a[b][0],m[3*b+1]=a[b][1],m[3*b+2]=a[b][2];a=(h={},h[e.VertexAttrConstants.POSITION]=new Uint32Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),h);h=(p={},p[e.VertexAttrConstants.POSITION]={size:3,data:m},p);return new g(h,a)};d.transformInPlace=function(a,b){a=a.vertexAttributes[e.VertexAttrConstants.POSITION].data;
for(var c=0;c<a.length;c+=3)n.vec3.set(t,a[c],a[c+1],a[c+2]),n.vec3.transformMat4(t,t,b),a[c]=t[0],a[c+1]=t[1],a[c+2]=t[2]};d.addVertexColors=function(a,b){var c=b||[1,1,1,1];b=new Uint8Array(4);b[0]=255*c[0];b[1]=255*c[1];b[2]=255*c[2];b[3]=255*(3<c.length?c[3]:1);var c={},f=a.getVertexAttr(),h;for(h in f)c[h]=f[h];c[e.VertexAttrConstants.COLOR]={size:4,data:b};b={};for(h in a.indices)b[h]=a.indices[h];b[e.VertexAttrConstants.COLOR]=new Uint32Array(b[e.VertexAttrConstants.POSITION].length);return a=
new g(c,b,a.componentOffsets,a.primitiveType)};d.addNormals=function(a){var b=a.getVertexAttr();a=a.indices;for(var c=h.Vec3Compact.subtract,f=new Float32Array(a.position.length/3*3),g=b.position.data,p=0,m=a.position,k=new Uint32Array(m.length),u=0;u<m.length;u+=3){c(g,3*m[u],g,3*m[u+2],y,0);c(g,3*m[u],g,3*m[u+1],t,0);n.vec3.cross(t,t,y);n.vec3.normalize(t,t);var l=p/3;f[p++]=t[0];f[p++]=t[1];f[p++]=t[2];k[u]=l;k[u+1]=l;k[u+2]=l}b[e.VertexAttrConstants.NORMAL]={size:3,data:f,offsetIdx:0,strideIdx:3};
a[e.VertexAttrConstants.NORMAL]=k};d.cgToGIS=function(a,b){void 0===b&&(b=a);var c=a.getVertexAttr();a=c.position.data;var c=c.normal.data,e=b.getVertexAttr(),f=e.position.data,e=e.normal.data;if(c)for(var g=0;g<c.length;g+=3){var h=c[g+1];e[g+1]=-c[g+2];e[g+2]=h}if(a)for(g=0;g<a.length;g+=3)h=a[g+1],f[g+1]=-a[g+2],f[g+2]=h;return b};d.makeOrthoBasisDirUp=q;d.makeOrthoBasisDirUpFallback=m})(q||(q={}));var v=.99619469809,t=l.vec3f32.create(),y=l.vec3f32.create();return q})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require",
"exports","./factories/vec3f32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=n})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require","exports"],function(r,d){function n(){return new Float32Array(3)}function l(b,c,f){var a=new Float32Array(3);a[0]=b;a[1]=c;a[2]=f;return a}function k(){return l(1,1,1)}function b(){return l(1,0,0)}function h(){return l(0,1,0)}function g(){return l(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=
n;d.clone=function(b){var c=new Float32Array(3);c[0]=b[0];c[1]=b[1];c[2]=b[2];return c};d.fromValues=l;d.createView=function(b,c){return new Float32Array(b,c,3)};d.zeros=function(){return n()};d.ones=k;d.unitX=b;d.unitY=h;d.unitZ=g;d.ZEROS=n();d.ONES=k();d.UNIT_X=b();d.UNIT_Y=h();d.UNIT_Z=g()})},"esri/views/3d/support/geometryUtils":function(){define("require exports ./geometryUtils/axisAngle ./geometryUtils/boundedPlane ./geometryUtils/frustum ./geometryUtils/lineSegment ./geometryUtils/plane ./geometryUtils/ray ./geometryUtils/sphere ./geometryUtils/triangle ./geometryUtils/vector".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});d.plane=h;d.boundedPlane=l;d.triangle=c;d.lineSegment=b;d.ray=g;d.sphere=e;d.frustum=k;d.vector=f;d.axisAngle=n})},"esri/views/3d/support/geometryUtils/axisAngle":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../stack","./vector"],function(r,d,n,l,k){function b(b){void 0===b&&(b=d.UP);return[b[0],b[1],b[2],b[3]]}function h(g,e,c,f,a){void 0===a&&(a=b());a[0]=g;a[1]=e;a[2]=c;a[3]=f;return a}
Object.defineProperty(d,"__esModule",{value:!0});d.create=b;d.wrap=function(b,e,c,f){return h(b,e,c,f,l.sv4d.get())};d.wrapAxisAngle=function(b,e){return h(b[0],b[1],b[2],e,l.sv4d.get())};d.copy=function(g,e){void 0===e&&(e=b());return h(g[0],g[1],g[2],g[3],e)};d.fromValues=h;d.fromAxisAndAngle=function(g,e,c){void 0===c&&(c=b());n.vec3.copy(c,g);c[3]=e;return c};d.fromPoints=function(g,e,c){void 0===c&&(c=b());n.vec3.cross(c,g,e);n.vec3.normalize(c,c);c[3]=k.angle(g,e);return c};d.UP=[0,0,1,0]})},
"esri/views/3d/support/stack":function(){define(["require","exports","../../../core/VectorStack"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.sv2d=n.VectorStack.createVec2f64();d.sv3d=n.VectorStack.createVec3f64();d.sv4d=n.VectorStack.createVec4f64();d.sm3d=n.VectorStack.createMat3f64();d.sm4d=n.VectorStack.createMat4f64();d.sq4d=n.VectorStack.createQuatf64()})},"esri/core/VectorStack":function(){define("require exports ./nextTick ./libs/gl-matrix-2/mat3f64 ./libs/gl-matrix-2/mat4f64 ./libs/gl-matrix-2/quatf64 ./libs/gl-matrix-2/vec2f64 ./libs/gl-matrix-2/vec3f64 ./libs/gl-matrix-2/vec4f64".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function f(a,b,c){var e=this;this.itemByteSize=a;this.itemCreate=b;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);this.tickHandle=n.before(function(){return e.reset()})}f.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null);this.itemsPtr=0;this.buffers=this.items=null};f.prototype.get=function(){0===
this.itemsPtr&&n(function(){});for(var a=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=a;){for(var b=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(b,c*this.itemByteSize));this.buffers.push(b)}return this.items[this.itemsPtr++]};f.prototype.reset=function(){for(var a=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>a;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;
this.itemsPtr=0};f.createVec2f64=function(a){void 0===a&&(a=c);return new f(16,h.vec2f64.createView,a)};f.createVec3f64=function(a){void 0===a&&(a=c);return new f(24,g.vec3f64.createView,a)};f.createVec4f64=function(a){void 0===a&&(a=c);return new f(32,e.vec4f64.createView,a)};f.createMat3f64=function(a){void 0===a&&(a=c);return new f(72,l.mat3f64.createView,a)};f.createMat4f64=function(a){void 0===a&&(a=c);return new f(128,k.mat4f64.createView,a)};f.createQuatf64=function(a){void 0===a&&(a=c);return new f(32,
b.quatf64.createView,a)};Object.defineProperty(f.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},enumerable:!0,configurable:!0});return f}();d.VectorStack=r;var c=4096})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f64=n})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(r,
d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,0,1,0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]]};d.fromValues=function(d,l,k,b,h,g,e,c,f){return[d,l,k,b,h,g,e,c,f]};d.createView=function(d,l){return new Float64Array(d,l,9)}})},"esri/core/libs/gl-matrix-2/quatf64":function(){define(["require","exports","./factories/quatf64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.quatf64=n})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0,0,1]};d.clone=function(d){return[d[0],d[1],d[2],d[3]]};d.fromValues=function(d,l,k,b){return[d,l,k,b]};d.createView=function(d,l){return new Float64Array(d,l,4)}})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=n})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,l){return[d,l]};d.fromArray=function(d){for(var l=[0,0],k=Math.min(2,d.length),b=0;b<k;++b)l[b]=d[b];return l};d.createView=function(d,l){return new Float64Array(d,l,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=
[1,0];d.UNIT_Y=[0,1]})},"esri/views/3d/support/geometryUtils/vector":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../mathUtils"],function(r,d,n,l){function k(b,h){return n.vec3.dot(b,h)/n.vec3.length(b)}Object.defineProperty(d,"__esModule",{value:!0});d.projectPoint=function(b,h,g){h=k(b,h);return n.vec3.scale(g,b,h)};d.projectPointSignedLength=k;d.angle=function(b,h){b=n.vec3.dot(b,h)/(n.vec3.length(b)*n.vec3.length(h));return-l.acos(b)}})},"esri/views/3d/support/geometryUtils/boundedPlane":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../mathUtils ../stack ./lineSegment ./plane ./ray ./vector".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(a){void 0===a&&(a=d.UP);return{plane:p.create(a.plane),origin:e.vec3f64.clone(a.origin),basis1:e.vec3f64.clone(a.basis1),basis2:e.vec3f64.clone(a.basis2)}}function y(a,b){void 0===b&&(b=t());return x(a.origin,a.basis1,a.basis2,b)}function x(a,b,c,e){void 0===e&&(e=t());g.vec3.copy(e.origin,a);g.vec3.copy(e.basis1,b);g.vec3.copy(e.basis2,c);p.fromVectorsAndPoint(c,b,a,e.plane);a=e;1E-6<Math.abs(g.vec3.dot(a.basis1,a.basis2)/(g.vec3.length(a.basis1)*
g.vec3.length(a.basis2)))&&I.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(g.vec3.dot(a.basis1,a.plane))&&I.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-g.vec3.dot(a.plane,a.origin)-a.plane[3])&&I.warn("fromValues()","Plane offset is not consistent with plane origin");return e}function w(a,b,c){a!==c&&y(a,c);a=g.vec3.scale(f.sv3d.get(),a.plane,b);g.vec3.add(c.origin,c.origin,a);c.plane[3]-=b;return c}function m(a,b){void 0===
b&&(b=t());var c=(a[2]-a[0])/2,e=(a[3]-a[1])/2;g.vec3.set(b.origin,a[0]+c,a[1]+e,0);g.vec3.set(b.basis1,c,0,0);g.vec3.set(b.basis2,0,e,0);p.fromValues(0,0,1,0,b.plane);return b}function u(a,b,c){return p.intersectRay(a.plane,b,c)?N(a,c):!1}function z(a,b,e){var h=H.get(),m=H.get();O(a,b,h,m);for(var m=Number.POSITIVE_INFINITY,k=0,u=T;k<u.length;k++){var l=K(a,u[k],S.get()),d=f.sv3d.get();p.intersectLineSegment(h,l,d)&&(l=c.directionFromTo(f.sv3d.get(),b.origin,d),l=Math.abs(c.acos(g.vec3.dot(b.direction,
l))),l<m&&(m=l,g.vec3.copy(e,d)))}return m===Number.POSITIVE_INFINITY?B(a,b,e):e}function B(a,b,c){if(u(a,b,c))return c;var e=H.get(),h=H.get();O(a,b,e,h);for(var m=Number.POSITIVE_INFINITY,k=0,l=T;k<l.length;k++){var d=K(a,l[k],S.get()),z=f.sv3d.get();p.intersectLineSegmentClamp(e,d,z)&&(d=q.distance2(b,z),p.isPointInside(h,z)&&d<m&&(m=d,g.vec3.copy(c,z)))}F(a,b.origin)<m&&g.vec3.copy(c,b.origin);return c}function C(a,b,c){var e=a.origin,h=a.basis1,m=a.basis2;b=g.vec3.subtract(f.sv3d.get(),b,e);
h=v.projectPointSignedLength(h,b)/g.vec3.length(h);m=v.projectPointSignedLength(m,b)/g.vec3.length(m);a=v.projectPointSignedLength(a.plane,b);return g.vec3.set(c,h,m,a)}function F(a,b){b=C(a,b,f.sv3d.get());var c=a.basis2;a=g.vec3.length(a.basis1);c=g.vec3.length(c);a=Math.max(Math.abs(b[0])-a,0);c=Math.max(Math.abs(b[1])-c,0);b=b[2];return a*a+c*c+b*b}function E(a,b){var c=-a.plane[3];return v.projectPointSignedLength(a.plane,b)-c}function N(a,b){var c=g.vec3.subtract(f.sv3d.get(),b,a.origin);b=
g.vec3.squaredLength(a.basis1);var e=g.vec3.squaredLength(a.basis2),h=g.vec3.dot(a.basis1,c);a=g.vec3.dot(a.basis2,c);return 0>-h-b&&0>h-b&&0>-a-e&&0>a-e}function L(a,b){var c=S.get();g.vec3.copy(c.origin,a.origin);g.vec3.copy(c.vector,b);return c}function K(a,b,c){var e=a.basis1,h=a.basis2;a=a.origin;var m=g.vec3.scale(f.sv3d.get(),e,b.origin[0]),p=g.vec3.scale(f.sv3d.get(),h,b.origin[1]);g.vec3.add(c.origin,m,p);g.vec3.add(c.origin,c.origin,a);e=g.vec3.scale(f.sv3d.get(),e,b.direction[0]);b=g.vec3.scale(f.sv3d.get(),
h,b.direction[1]);g.vec3.scale(c.vector,g.vec3.add(e,e,b),2);return c}function O(a,b,c,e){a=a.plane;p.fromVectorsAndPoint(a,b.direction,b.origin,c);p.fromVectorsAndPoint(c,a,b.origin,e)}Object.defineProperty(d,"__esModule",{value:!0});var I=l.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");r=function(){return function(){this.plane=p.create();this.origin=e.vec3f64.create();this.basis1=e.vec3f64.create();this.basis2=e.vec3f64.create()}}();d.BoundedPlaneClass=r;d.create=t;d.wrap=function(a,
b,c){var e=V.get();e.origin=a;e.basis1=b;e.basis2=c;e.plane=p.fromVectorsAndPoint(c,b,a,p.wrap(0,0,0,0));return e};d.copy=y;d.fromValues=x;d.elevate=w;d.setExtent=function(a,b,c){m(b,c);w(c,E(a,a.origin),c);return c};d.fromAABoundingRect=m;d.intersectRay=u;d.intersectRayClosestSilhouette=function(a,b,c){if(u(a,b,c))return c;a=z(a,b,f.sv3d.get());g.vec3.add(c,b.origin,g.vec3.scale(f.sv3d.get(),b.direction,g.vec3.distance(b.origin,a)/g.vec3.length(b.direction)));return c};d.closestPointOnSilhouette=
z;d.closestPoint=B;d.projectPoint=function(b,c,e){var h=p.projectPoint(b.plane,c,f.sv3d.get());c=a.projectPointClamp(L(b,b.basis1),h,-1,1,f.sv3d.get());h=a.projectPointClamp(L(b,b.basis2),h,-1,1,f.sv3d.get());g.vec3.subtract(e,g.vec3.add(f.sv3d.get(),c,h),b.origin);return e};d.projectPointLocal=C;d.distance2=F;d.distance=function(a,b){return Math.sqrt(F(a,b))};d.distanceToSilhouette=function(b,c){for(var e=Number.NEGATIVE_INFINITY,f=0,g=T;f<g.length;f++){var h=K(b,g[f],S.get()),h=a.distance2(h,c);
h>e&&(e=h)}return Math.sqrt(e)};d.extrusionContainsPoint=function(a,b){return p.isPointInside(a.plane,b)&&N(a,b)};d.axisAt=function(a,b,c,e){switch(c){case 0:g.vec3.copy(e,a.basis1);g.vec3.normalize(e,e);break;case 1:g.vec3.copy(e,a.basis2);g.vec3.normalize(e,e);break;case 2:g.vec3.copy(e,a.plane);break;default:n.neverReached(c)}return e};d.altitudeAt=E;d.setAltitudeAt=function(a,b,c,e){var f=E(a,b);a=g.vec3.scale(P,a.plane,c-f);g.vec3.add(e,b,a);return e};d.transform=function(a,c,e){a!==e&&y(a,e);
b.mat4.invert(Z,c);b.mat4.transpose(Z,Z);g.vec3.transformMat4(e.basis1,a.basis1,Z);g.vec3.transformMat4(e.basis2,a.basis2,Z);g.vec3.transformMat4(e.plane,a.plane,Z);g.vec3.transformMat4(e.origin,a.origin,c);p.setOffsetFromPoint(e.plane,e.origin,e.plane);return e};d.UP={plane:p.create(),origin:e.vec3f64.fromValues(0,0,0),basis1:e.vec3f64.fromValues(1,0,0),basis2:e.vec3f64.fromValues(0,1,0)};var H=new k.ObjectStack(p.create),S=new k.ObjectStack(a.create),P=e.vec3f64.create(),V=new k.ObjectStack(function(){return{origin:null,
basis1:null,basis2:null,plane:null}}),T=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Z=h.mat4f64.create()})},"esri/core/ObjectStack":function(){define(["require","exports","./nextTick"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function k(b){var h=this;this.allocator=b;this.items=[];this.itemsPtr=0;this.tickHandle=n.before(function(){return h.reset()});this.grow()}k.prototype.destroy=
function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null);this.items=null};k.prototype.get=function(){0===this.itemsPtr&&n(function(){});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};k.prototype.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*l),this.items.length);this.itemsPtr=0};k.prototype.grow=function(){for(var b=0;b<Math.max(8,Math.min(this.items.length,l));b++)this.items.push(this.allocator())};
return k}();d.ObjectStack=r;var l=1024;d.default=r})},"esri/views/3d/support/geometryUtils/lineSegment":function(){define("require exports ../../../../core/mathUtils ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(r,d,n,l,k,b,h){function g(a){return a?{origin:b.vec3f64.clone(a.origin),vector:b.vec3f64.clone(a.vector)}:{origin:b.vec3f64.create(),vector:b.vec3f64.create()}}function e(a,b){var c=v.get();c.origin=
a;c.vector=b;return c}function c(a,b,c){void 0===c&&(c=g());k.vec3.copy(c.origin,a);k.vec3.copy(c.vector,b);return c}function f(a,b){b=k.vec3.subtract(h.sv3d.get(),b,a.origin);var c=k.vec3.dot(a.vector,b),e=k.vec3.dot(a.vector,a.vector),c=n.clamp(c/e,0,1);a=k.vec3.subtract(h.sv3d.get(),k.vec3.scale(h.sv3d.get(),a.vector,c),b);return k.vec3.dot(a,a)}function a(a,b,c,e,f){var g=a.vector,m=a.origin;b=k.vec3.subtract(h.sv3d.get(),b,m);m=k.vec3.length(g);b=k.vec3.dot(g,b)/m;k.vec3.scale(f,g,n.clamp(b,
c,e));return k.vec3.add(f,f,a.origin)}function p(a,b,c,e){var f=a.origin,g=k.vec3.add(h.sv3d.get(),f,a.vector);a=b.origin;var p=k.vec3.add(h.sv3d.get(),a,b.vector),l=h.sv3d.get();b=h.sv3d.get();l[0]=f[0]-a[0];l[1]=f[1]-a[1];l[2]=f[2]-a[2];b[0]=p[0]-a[0];b[1]=p[1]-a[1];b[2]=p[2]-a[2];if(1E-6>Math.abs(b[0])&&1E-6>Math.abs(b[1])&&1E-6>Math.abs(b[2]))return!1;p=h.sv3d.get();p[0]=g[0]-f[0];p[1]=g[1]-f[1];p[2]=g[2]-f[2];if(1E-6>Math.abs(p[0])&&1E-6>Math.abs(p[1])&&1E-6>Math.abs(p[2]))return!1;var g=l[0]*
b[0]+l[1]*b[1]+l[2]*b[2],d=b[0]*p[0]+b[1]*p[1]+b[2]*p[2],q=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],t=(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*q-d*d;if(1E-6>Math.abs(t))return!1;l=(g*d-(l[0]*p[0]+l[1]*p[1]+l[2]*p[2])*q)/t;g=(g+d*l)/q;c&&(l=n.clamp(l,0,1),g=n.clamp(g,0,1));c=h.sv3d.get();d=h.sv3d.get();c[0]=f[0]+l*p[0];c[1]=f[1]+l*p[1];c[2]=f[2]+l*p[2];d[0]=a[0]+g*b[0];d[1]=a[1]+g*b[1];d[2]=a[2]+g*b[2];e.tA=l;e.tB=g;e.pA=c;e.pB=d;e.distance2=k.vec3.squaredDistance(c,d);return!0}Object.defineProperty(d,"__esModule",{value:!0});
d.create=g;d.wrap=e;d.copy=function(a,b){void 0===b&&(b=g());return c(a.origin,a.vector,b)};d.fromValues=c;d.fromPoints=function(a,b,c){void 0===c&&(c=g());k.vec3.copy(c.origin,a);k.vec3.subtract(c.vector,b,a);return c};d.distance2=f;d.distance=function(a,b){return Math.sqrt(f(a,b))};d.projectPoint=function(b,c,e){return a(b,c,0,1,e)};d.projectPointClamp=a;d.closestRayDistance2=function(a,b){if(p(a,e(b.origin,b.direction),!1,q)){b=q.tA;var c=q.pB,f=q.distance2;if(0<=b&&1>=b)return f;if(0>b)return k.vec3.squaredDistance(a.origin,
c);if(1<b)return k.vec3.squaredDistance(k.vec3.add(h.sv3d.get(),a.origin,a.vector),c)}return null};d.closestLineSegmentPoint=function(a,b,c){return p(a,b,!0,q)?(k.vec3.copy(c,q.pA),!0):!1};d.closestLineSegmentDistance2=function(a,b){return p(a,b,!0,q)?q.distance2:null};var q={tA:0,tB:0,pA:b.vec3f64.create(),pB:b.vec3f64.create(),distance2:0},v=new l.ObjectStack(function(){return{origin:null,vector:null}})})},"esri/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../../../core/mathUtils",
"../../../../core/libs/gl-matrix-2/vec3","../stack"],function(r,d,n,l,k){function b(a){void 0===a&&(a=d.UP);return[a[0],a[1],a[2],a[3]]}function h(a,c){void 0===c&&(c=b());return g(a[0],a[1],a[2],a[3],c)}function g(a,c,e,f,g){void 0===g&&(g=b());g[0]=a;g[1]=c;g[2]=e;g[3]=f;return g}function e(a,e,f){void 0===f&&(f=b());l.vec3.copy(f,e);e=l.vec3.dot(e,e);1E-5<Math.abs(e-1)&&1E-12<e&&l.vec3.scale(f,f,1/Math.sqrt(e));c(f,a,f);return f}function c(a,b,c){a!==c&&h(a,c);c[3]=-l.vec3.dot(c,b);return c}function f(a,
c,f,g){void 0===g&&(g=b());a=l.vec3.cross(k.sv3d.get(),c,a);return e(f,a,g)}function a(a,b,c){a=l.vec3.scale(k.sv3d.get(),a,l.vec3.dot(a,b));l.vec3.subtract(c,b,a);return c}function p(a,b){return l.vec3.dot(a,b)+a[3]}function q(a,b,c,e,f,g){var h=l.vec3.dot(a,c);if(0===h)return!1;a=-(l.vec3.dot(a,b)+a[3])/h;f&&(a=e?Math.max(0,a):n.clamp(a,0,1));if(0>a||!e&&1<a)return!1;l.vec3.add(g,b,l.vec3.scale(g,c,a));return!0}Object.defineProperty(d,"__esModule",{value:!0});d.create=b;d.wrap=function(a,b,c,e){return g(a,
b,c,e,k.sv4d.get())};d.copy=h;d.fromValues=g;d.fromNormalAndOffset=function(a,c,e){void 0===e&&(e=b());l.vec3.copy(e,a);e[3]=c;return e};d.fromPositionAndNormal=e;d.fromPoints=function(a,c,e,g){void 0===g&&(g=b());return f(l.vec3.subtract(k.sv3d.get(),a,c),l.vec3.subtract(k.sv3d.get(),e,c),a,g)};d.setOffsetFromPoint=c;d.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};d.fromVectorsAndPoint=f;d.intersectRay=function(a,b,c){return q(a,b.origin,b.direction,!0,!1,c)};d.intersectLineSegment=
function(a,b,c){return q(a,b.origin,b.vector,!1,!1,c)};d.intersectLineSegmentClamp=function(a,b,c){return q(a,b.origin,b.vector,!1,!0,c)};d.isSphereFullyInside=function(a,b){var c=b.radius;return 0<=p(a,b.center)-c};d.isSphereFullyOutside=function(a,b){var c=b.radius;return 0>p(a,b.center)+c};d.isPointInside=function(a,b){return 0<=p(a,b)};d.isPointOutside=function(a,b){return 0>p(a,b)};d.isAABBFullyInside=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];return 0<=a[0]*(0<a[0]?c:g)+a[1]*
(0<a[1]?e:h)+a[2]*(0<a[2]?f:b)+a[3]};d.clip=function(a,b){var c=l.vec3.dot(a,b.ray.direction);a=-p(a,b.ray.origin);if(0>a&&0<=c)return!1;if(-1E-6<c&&1E-6>c)return 0<a;if((0>a||0>c)&&!(0>a&&0>c))return!0;a/=c;0<c?a<b.c1&&(b.c1=a):a>b.c0&&(b.c0=a);return b.c0<=b.c1};d.projectPoint=function(b,c,e){var f=l.vec3.scale(k.sv3d.get(),b,-b[3]);c=l.vec3.subtract(k.sv3d.get(),c,f);b=a(b,c,k.sv3d.get());l.vec3.add(e,b,f);return e};d.projectVector=a;d.distance=function(a,b){return Math.abs(p(a,b))};d.signedDistance=
p;d.UP=[0,0,1,0]})},"esri/views/3d/support/geometryUtils/ray":function(){define("require exports ../../../../core/ObjectStack ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(r,d,n,l,k,b,h,g){function e(a){return a?{origin:h.vec3f64.clone(a.origin),direction:h.vec3f64.clone(a.direction)}:{origin:h.vec3f64.create(),direction:h.vec3f64.create()}}function c(a,c,f){void 0===
f&&(f=e());b.vec3.copy(f.origin,a);b.vec3.copy(f.direction,c);return f}function f(a,c,f){void 0===f&&(f=e());var h=l.castRenderScreenPointArray3(k.vec2.copy(g.sv3d.get(),c));h[2]=0;a.unprojectPoint(h,f.origin);c=l.castRenderScreenPointArray3(k.vec2.copy(g.sv3d.get(),c));c[2]=1;a=a.unprojectPoint(c,g.sv3d.get());b.vec3.subtract(f.direction,a,f.origin);return f}function a(a,c,f){void 0===f&&(f=e());b.vec3.copy(f.origin,a.eye);c=b.vec3.set(g.sv3d.get(),c[0],c[1],1);a=a.unprojectPoint(c,g.sv3d.get());
b.vec3.subtract(f.direction,a,f.origin);return f}function p(a,c){a=b.vec3.cross(g.sv3d.get(),b.vec3.normalize(g.sv3d.get(),a.direction),b.vec3.subtract(g.sv3d.get(),c,a.origin));return b.vec3.dot(a,a)}function q(){return{origin:null,direction:null}}Object.defineProperty(d,"__esModule",{value:!0});d.create=e;d.wrap=function(a,b){var c=v.get();c.origin=a;c.direction=b;return c};d.copy=function(a,b){void 0===b&&(b=e());return c(a.origin,a.direction,b)};d.fromPoints=function(a,c,f){void 0===f&&(f=e());
b.vec3.copy(f.origin,a);b.vec3.subtract(f.direction,c,a);return f};d.fromValues=c;d.fromScreen=function(a,b,c){void 0===c&&(c=e());return f(a,a.screenToRender(b,l.castRenderScreenPointArray3(g.sv3d.get())),c)};d.fromRender=f;d.fromScreenAtEye=function(b,c,f){void 0===f&&(f=e());return a(b,b.screenToRender(c,l.castRenderScreenPointArray3(g.sv3d.get())),f)};d.fromRenderAtEye=a;d.distance2=p;d.distance=function(a,b){return Math.sqrt(p(a,b))};d.closestPoint=function(a,c,e){c=b.vec3.dot(a.direction,b.vec3.subtract(e,
c,a.origin));b.vec3.add(e,a.origin,b.vec3.scale(e,a.direction,c));return e};d.createWrapper=q;var v=new n.ObjectStack(q)})},"esri/views/3d/support/geometryUtils/frustum":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../stack ./clipRay ./plane".split(" "),function(r,d,n,l,k,b,h,g,e,
c,f){function a(a){if(a){var c=a.planes;a=a.points;return{planes:[f.create(c[0]),f.create(c[1]),f.create(c[2]),f.create(c[3]),f.create(c[4]),f.create(c[5])],points:[b.vec3f64.clone(a[0]),b.vec3f64.clone(a[1]),b.vec3f64.clone(a[2]),b.vec3f64.clone(a[3]),b.vec3f64.clone(a[4]),b.vec3f64.clone(a[5]),b.vec3f64.clone(a[6]),b.vec3f64.clone(a[7])]}}return{planes:[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()],points:[b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),
b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create(),b.vec3f64.create()]}}function p(b,c,e){void 0===e&&(e=a());for(var g=0;6>g;g++)f.copy(b[g],e.planes[g]);for(g=0;8>g;g++)k.vec3.copy(e.points[g],c[g]);return e}function q(a){var b=a.planes;a=a.points;f.fromPoints(a[4],a[0],a[3],b[0]);f.fromPoints(a[1],a[5],a[6],b[1]);f.fromPoints(a[4],a[5],a[1],b[2]);f.fromPoints(a[3],a[2],a[6],b[3]);f.fromPoints(a[0],a[1],a[2],b[4]);f.fromPoints(a[5],a[4],a[7],b[5])}function v(a,b){for(var c=0;6>c;c++)if(!f.clip(a[c],
b))return!1;return!0}Object.defineProperty(d,"__esModule",{value:!0});d.create=a;d.copy=function(b,c){void 0===c&&(c=a());return p(b.planes,b.points,c)};d.fromValues=p;d.fromMatrix=function(b,c,f){void 0===f&&(f=a());var g=f.points;b=l.mat4.multiply(e.sm4d.get(),c,b);l.mat4.invert(b,b);for(c=0;8>c;++c){var p=h.vec4.transformMat4(e.sv4d.get(),t[c],b);k.vec3.set(g[c],p[0]/p[3],p[1]/p[3],p[2]/p[3])}q(f);return f};d.recomputePlanes=q;d.intersectsSphere=function(a,b){for(var c=0;6>c;c++)if(f.isSphereFullyInside(a[c],
b))return!1;return!0};d.intersectsRay=function(a,b){return v(a,c.fromRay(b,y.get()))};d.intersectsLineSegment=function(a,b,e){return v(a,c.fromLineSegmentAndDirection(b,e,y.get()))};d.intersectsPoint=function(a,b){for(var c=0;6>c;c++)if(0<f.signedDistance(a[c],b))return!1;return!0};d.intersectsAABB=function(a,b){for(var c=0;6>c;c++)if(f.isAABBFullyInside(a[c],b))return!1;return!0};d.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var t=
[g.vec4f64.fromValues(-1,-1,-1,1),g.vec4f64.fromValues(1,-1,-1,1),g.vec4f64.fromValues(1,1,-1,1),g.vec4f64.fromValues(-1,1,-1,1),g.vec4f64.fromValues(-1,-1,1,1),g.vec4f64.fromValues(1,-1,1,1),g.vec4f64.fromValues(1,1,1,1),g.vec4f64.fromValues(-1,1,1,1)],y=new n.ObjectStack(c.create)})},"esri/views/3d/support/geometryUtils/clipRay":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec3 ../stack ./ray".split(" "),function(r,d,n,l,k,b){function h(c){return c?
{ray:b.create(c.ray),c0:c.c0,c1:c.c1}:{ray:b.create(),c0:0,c1:Number.MAX_VALUE}}function g(c,a,e,g){void 0===g&&(g=h());b.copy(c,g.ray);g.c0=a;g.c1=e;return g}function e(c,a,e){void 0===e&&(e=h());var f=l.vec3.length(c.vector);b.fromValues(c.origin,a,e.ray);e.c0=0;e.c1=f;return e}Object.defineProperty(d,"__esModule",{value:!0});d.create=h;d.wrap=function(b,a,e){var f=c.get();f.ray=b;f.c0=a;f.c1=e;return f};d.copy=function(b,a){void 0===a&&(a=h());return g(b.ray,b.c0,b.c1,a)};d.fromValues=g;d.fromRay=
function(c,a){void 0===a&&(a=h());b.copy(c,a.ray);a.c0=0;a.c1=Number.MAX_VALUE;return a};d.fromLineSegment=function(b,a){void 0===a&&(a=h());var c=l.vec3.normalize(k.sv3d.get(),b.vector);return e(b,c,a)};d.fromLineSegmentAndDirection=e;var c=new n.ObjectStack(function(){return{c0:0,c1:0,ray:null}})})},"esri/views/3d/support/geometryUtils/sphere":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../geometryUtils ../mathUtils ../stack ./ray".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){function p(a){return a?{radius:a.radius,center:g.vec3f64.clone(a.center)}:{radius:1,center:g.vec3f64.create()}}function q(a,b){void 0===b&&(b=p());return v(a.radius,a.center,b)}function v(a,b,c){void 0===c&&(c=p());h.vec3.copy(c.center,b);c.radius=a;return c}function t(a,b,c){var e=h.vec3.subtract(f.sv3d.get(),b.origin,a.center),g=h.vec3.dot(b.direction,b.direction),p=2*h.vec3.dot(b.direction,e);a=h.vec3.dot(e,e)-a.radius*a.radius;a=p*p-4*g*a;if(0>a)return!1;e=Math.sqrt(a);
a=(-p-e)/(2*g);g=(-p+e)/(2*g);if(0>a||g<a&&0<g)a=g;if(0>a)return!1;c&&h.vec3.add(c,b.origin,h.vec3.scale(f.sv3d.get(),b.direction,a));return!0}function y(a,c,g){var p=f.sv3d.get(),m=f.sm4d.get();h.vec3.cross(p,c.origin,c.direction);h.vec3.cross(g,p,c.origin);h.vec3.scale(g,g,1/h.vec3.length(g)*a.radius);a=w(a,c.origin);c=e.vector.angle(c.origin,g);b.mat4.identity(m);b.mat4.rotate(m,m,c+a,p);h.vec3.transformMat4(g,g,m);return g}function x(a,b,c){b=h.vec3.subtract(f.sv3d.get(),b,a.center);b=h.vec3.scale(f.sv3d.get(),
b,a.radius/h.vec3.length(b));return h.vec3.add(c,b,a.center)}function w(a,b){b=h.vec3.subtract(f.sv3d.get(),b,a.center);b=h.vec3.length(b);return c.acos(a.radius/(a.radius+Math.abs(a.radius-b)))}function m(a,b,e,f){a=h.vec3.subtract(B,b,a.center);switch(e){case 0:return a=c.cartesianToSpherical(a,B),a=a[2],h.vec3.set(f,-Math.sin(a),Math.cos(a),0);case 1:return a=c.cartesianToSpherical(a,B),e=a[1],a=a[2],b=Math.sin(e),h.vec3.set(f,-b*Math.cos(a),-b*Math.sin(a),Math.cos(e));case 2:return h.vec3.normalize(f,
a);default:n.neverReached(e)}}function u(a,b){b=h.vec3.subtract(N,b,a.center);return h.vec3.length(b)-a.radius}Object.defineProperty(d,"__esModule",{value:!0});var z=l.getLogger("esri.views.3d.support.geometryUtils.sphere");d.create=p;d.wrap=function(a,b){var c=C.get();c.radius=a;c.center=b||E;return c};d.copy=q;d.fromValues=v;d.elevate=function(a,b,c){a!==c&&h.vec3.copy(c.center,a.center);c.radius=a.radius+b;return c};d.setExtent=function(a,b,c){z.error("sphere.setExtent is not yet supported");return a===
c?c:q(a,c)};d.intersectRay=t;d.intersectScreen=function(b,c,e,f){c=a.fromScreenAtEye(c,e,F);return t(b,c,f)};d.intersectsRay=function(a,b){return t(a,b,null)};d.intersectRayClosestSilhouette=function(a,b,c){if(t(a,b,c))return c;a=y(a,b,f.sv3d.get());h.vec3.add(c,b.origin,h.vec3.scale(f.sv3d.get(),b.direction,h.vec3.distance(b.origin,a)/h.vec3.length(b.direction)));return c};d.closestPointOnSilhouette=y;d.closestPoint=function(b,c,e){if(t(b,c,e))return e;a.closestPoint(c,b.center,e);return x(b,e,e)};
d.projectPoint=x;d.distanceToSilhouette=function(a,b){b=h.vec3.subtract(f.sv3d.get(),b,a.center);b=h.vec3.squaredLength(b);return Math.sqrt(Math.abs(b-a.radius*a.radius))};d.angleToSilhouette=w;var B=g.vec3f64.create();d.axisAt=m;d.altitudeAt=u;d.setAltitudeAt=function(a,b,c,e){var f=u(a,b);a=m(a,b,2,N);c=h.vec3.scale(N,a,c-f);h.vec3.add(e,b,c);return e};var C=new k.ObjectStack(function(){return{center:null,radius:0}}),F=a.create(),E=g.vec3f64.create(),N=g.vec3f64.create();Object.freeze(E)})},"esri/views/3d/support/geometryUtils/triangle":function(){define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack ./lineSegment".split(" "),
function(r,d,n,l,k,b,h,g){function e(a){return a?{p0:b.vec3f64.clone(a.p0),p1:b.vec3f64.clone(a.p1),p2:b.vec3f64.clone(a.p2)}:{p0:b.vec3f64.create(),p1:b.vec3f64.create(),p2:b.vec3f64.create()}}function c(a,b,c,f){void 0===f&&(f=e());k.vec3.copy(f.p0,a);k.vec3.copy(f.p1,b);k.vec3.copy(f.p2,c);return f}function f(a,b,c){var e=l.vec2.distance(a,b);b=l.vec2.distance(b,c);a=l.vec2.distance(c,a);c=(e+b+a)/2;e=c*(c-e)*(c-b)*(c-a);return 0>=e?0:Math.sqrt(e)}Object.defineProperty(d,"__esModule",{value:!0});
d.create=e;d.wrap=function(a,b,c){var e=p.get();e.p0=a;e.p1=b;e.p2=c;return e};d.copy=function(a,b){void 0===b&&(b=e());return c(a.p0,a.p1,a.p2,b)};d.fromValues=c;d.distance2=function(b,c){var e=b.p0,f=b.p1;b=b.p2;var p=k.vec3.subtract(h.sv3d.get(),f,e),l=k.vec3.subtract(h.sv3d.get(),b,f),m=k.vec3.subtract(h.sv3d.get(),e,b),u=k.vec3.subtract(h.sv3d.get(),c,e),d=k.vec3.subtract(h.sv3d.get(),c,f),q=k.vec3.subtract(h.sv3d.get(),c,b),v=k.vec3.cross(p,p,m),n=k.vec3.dot(k.vec3.cross(h.sv3d.get(),p,v),u),
d=k.vec3.dot(k.vec3.cross(h.sv3d.get(),l,v),d),q=k.vec3.dot(k.vec3.cross(h.sv3d.get(),m,v),q);if(0<n&&0<d&&0<q)return c=k.vec3.dot(v,u),c*c/k.vec3.dot(v,v);e=g.distance2(g.fromValues(e,p,a.get()),c);f=g.distance2(g.fromValues(f,l,a.get()),c);c=g.distance2(g.fromValues(b,m,a.get()),c);return Math.min(e,f,c)};d.intersectRay=function(a,b,c){var e=b.direction;b=b.origin;var f=a.p0,g=a.p1,h=a.p2,p=g[0]-f[0],l=g[1]-f[1],d=g[2]-f[2],g=h[0]-f[0];a=h[1]-f[1];var h=h[2]-f[2],q=e[1]*h-a*e[2],t=e[2]*g-h*e[0],
v=e[0]*a-g*e[1],n=p*q+l*t+d*v;if(-1E-5<n&&1E-5>n)return!1;var n=1/n,L=b[0]-f[0],K=b[1]-f[1],f=b[2]-f[2],q=n*(L*q+K*t+f*v);if(0>q||1<q)return!1;t=K*d-l*f;d=f*p-d*L;p=L*l-p*K;l=n*(e[0]*t+e[1]*d+e[2]*p);if(0>l||1<q+l)return!1;c&&(k.vec3.scale(c,e,n*(g*t+a*d+h*p)),k.vec3.add(c,b,c));return!0};d.areaPoints2d=f;d.area2d=function(a){return f(a.p0,a.p1,a.p2)};var a=new n.ObjectStack(g.create),p=new n.ObjectStack(function(){return{p0:null,p1:null,p2:null}})})},"esri/views/3d/webgl-engine/lib/GeometryData":function(){define(["require",
"exports","./ComponentUtils","./geometryDataUtils","./Util"],function(r,d,n,l,k){return function(){function b(h,g,e,c){void 0===g&&(g=b.DefaultIndices);void 0===e&&(e=b.DefaultOffsets);void 0===c&&(c="triangle");this.preinterleaved=!1;var f={},a;for(a in h){var p=h[a],d=p.size;f[a]={data:p.data,size:d,offsetIdx:0,strideIdx:d}}if(g===b.DefaultIndices){g=k.getFirstObjectValue(f);h=l.generateDefaultIndexArray(g.data.length/g.size);g={};for(var v in f)g[v]=h}this._id=l.getNewId();this._vertexAttributes=
f;this._indices=g;this._componentOffsets=n.createOffsets(e);this._primitiveType=c}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vertexAttributes",{get:function(){return this._vertexAttributes},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indices",{get:function(){return this._indices},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"componentOffsets",{get:function(){return this._componentOffsets},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexCount",{get:function(){return k.getFirstObjectValue(this._indices).length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"primitiveType",{get:function(){return this._primitiveType},enumerable:!0,configurable:!0});b.prototype.getVertexAttr=function(){return this.vertexAttributes};b.prototype.toRenderData=function(){return{id:this._id.toString(),preinterleaved:!1,indices:this._indices,vertexAttr:this._vertexAttributes}};
b.prototype.getIndices=function(b){return this._indices[b]};b.prototype.getAttribute=function(b){return this._vertexAttributes[b]};b.prototype.estimateGpuMemoryUsage=function(){var b=0;this._indices[k.VertexAttrConstants.POSITION]&&(b+=12*this._indices[k.VertexAttrConstants.POSITION].length);this._indices[k.VertexAttrConstants.NORMAL]&&(b+=12*this._indices[k.VertexAttrConstants.NORMAL].length);this._indices[k.VertexAttrConstants.UV0]&&(b+=8*this._indices[k.VertexAttrConstants.UV0].length);this._indices[k.VertexAttrConstants.COLOR]&&
(b+=4*this._indices[k.VertexAttrConstants.COLOR].length);return b};b.DefaultIndices={};b.DefaultOffsets=new Uint32Array(0);return b}()})},"esri/views/3d/webgl-engine/lib/ComponentUtils":function(){define(["require","exports","../../../../core/arrayUtils","../../../../core/maybe"],function(r,d,n,l){function k(a,b){if(null!=a){var c=a.isVisibleBit,e=a.data,f=8*e.BYTES_PER_ELEMENT;return b<e.length*f?q(c,e,b,f):!a.isVisibleBit}return!0}function b(a){return l.isSome(a.component)?a.component:-1}function h(a,
b,c,e,f){k(b,e)&&g(a,b,c,c[e],c[e+1]-1,f)}function g(a,b,c,e,f,g){c=(b=0<a.length?a[a.length-1]:null)?b.range[1]:-1;var h=b?b.options:null;c>=e||(c+1===e&&h===g?b.range[1]=f:a.push({range:[e,f],options:g}))}function e(a){void 0===a&&(a=!0);return{isVisibleBit:!a,data:new Uint32Array(0)}}function c(b,c){return a(b,c,!0)}function f(b,c){return a(b,c,!1)}function a(a,b,c){var e=!1;a=a||t;e=a.isVisibleBit;a=a.data;b=v(b);var f=8*a.BYTES_PER_ELEMENT,g=a.length*f;c=c===e;if(0===a.length||0===b)e=!c;else if(g<
b&&!c)e=!0;else{for(var h=y[f],g=y[0],p=0;p<a.length-1;p++)if(e=!c&&a[p]!==h||c&&a[p]!==g)return e;e=a.length-1;b=y[(b-1)%f+1];e=!c&&(a[e]&b)!==b||c&&(a[e]&b)!==g}return e}function p(a){return 0<a.length}function q(a,b,c,e){var f=c/e|0;return 0!==(b[f]&1<<c-f*e)===a}function v(a){return Math.max(0,a.length-1)}Object.defineProperty(d,"__esModule",{value:!0});d.updateVisibility=function(a,b,c,f){if(c<v(b)){null==a&&(a=e());var g=a.isVisibleBit,h=a.data,p=8*h.BYTES_PER_ELEMENT,m=c/p|0,k=c-p*m;b=(v(b)-
1)/p|0;var l=h;f=f===g;c<l.length*p||!f||(c=Math.max(m+1,Math.ceil(1.5*l.length)),c=Math.min(c,b+1),h=new Uint32Array(c),h.set(l));m<h.length&&(h[m]=h[m]&~(1<<k)|(f?1:0)<<k);a.data=h}return a};d.getVisibility=k;d.hideAllComponents=function(a){if(null==a)a=e(!1);else{a.isVisibleBit=!0;for(var b=0;b<a.data.length;b++)a.data[b]=0}return a};d.unhideAllComponents=function(a){var b;if(null!=a)for(b=a,b.isVisibleBit=!1,a=0;a<b.data.length;a++)b.data[a]=0;return b};d.generateVisibleIndexRanges=function(a,
b){var c;if(a)if(p(b))if(0===a.data.length)c=[],b=[[b[0],b[b.length-1]-1]],c=a.isVisibleBit?c:b;else{c=[];for(var e=a.isVisibleBit,f=a.data,g=8*f.BYTES_PER_ELEMENT,h=f.length*g,k=v(b),l=!1,d=0;d<h&&d<k;d++){var t=q(e,f,d,g);if(t!==l){var x=b[d];t?c.push([x,0]):(l=c[c.length-1],l[1]=x-1);l=t}}a=!a.isVisibleBit;k>h&&a&&!l?c.push([b[h],b[k]-1]):l&&(l=c[c.length-1],l[1]=b[a?k:Math.min(k,h)]-1)}else c=[],c=a.isVisibleBit?c:null;else c=null;return c};d.addHighlight=function(a,c,e,f){a=a||[];c={component:c,
options:e,id:f};a.push(c);e=b(c);for(f=a.length-1;0<f&&e<b(a[f-1]);)c=[a[f],a[f-1]],a[f-1]=c[0],a[f]=c[1],--f;return a};d.removeHighlight=function(a,b){if(!a)return a;a=a.filter(function(a){return a.id!==b});return 0===a.length?null:a};d.generateHighlightedIndexRanges=function(a,b,c){if(!b)return null;if(!p(c))return a&&a.isVisibleBit?null:b.map(function(a){return{range:null,options:a.options}});for(var e=c[0],m=c[c.length-1]-1,k=[],d=!f(a,c),q=0;q<b.length;++q){var t=b[q].options,x=b[q].component;
if(l.isSome(x))h(k,a,c,x,t);else if(d)g(k,a,c,e,m,t);else for(x=0;x<v(c);++x)h(k,a,c,x,t)}return 0<k.length?k:null};d.hasHighlights=function(a,b,c){if(!b)return!1;if(!p(c))return a&&a.isVisibleBit?!1:0<b.length;a=!f(a,c);for(var e=0;e<b.length;e++)if(l.isSome(b[e].component)||a||0<v(c))return!0;return!1};d.defaultVisibilities=e;d.isAllVisible=function(a,b){return!f(a,b)};d.isAllHidden=function(a,b){return!c(a,b)};d.hasVisible=c;d.hasHidden=f;var t=e();d.createOffsets=function(a){return Array.isArray(a)?
new Uint32Array(a):a};d.hasComponent=function(a,b){return b<v(a)};d.hasComponents=p;var y=[];for(r=0;65>r;r++)y.push(Math.pow(2,r)-1);d.componentCount=v;d.componentFind=function(a,b){a=n.binaryIndexOf(a,b,!0);return 0<=a?a:null}})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});var n=1,l=null;d.generateDefaultIndexArray=function(b){if(b>n||null==l){for(;b>n;)n*=2;l=new Uint32Array(n);for(var h=
0;h<n;h++)l[h]=h}return new Uint32Array(l.buffer,0,b)};var k=0;d.getNewId=function(){return k++}})},"esri/views/3d/webgl-engine/lib/Util":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64".split(" "),function(r,d,n,l,k,b,h,g,e){function c(a,b){if(!a)throw b=
b||"assert",a=Error(b),a.stack&&console.log(a.stack),new t(b);}function f(a){for(var b in a)return b}function a(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function p(a,b){void 0===b&&(b=0);for(var c=0,e=0;4>e;e++)c+=a[b+e]*x[e];return c}function q(a){return a-Math.floor(a)}Object.defineProperty(d,"__esModule",{value:!0});var v=e.vec4f64.create(),t=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+this.message};return a}();d.AssertException=t;d.VertexAttrConstants=
{POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"aTangent"};d.assert=c;d.verify=function(a,b){a||console.warn("Verify failed: "+(b||"")+"\n"+Error("verify").stack)};d.encodeInt16=function(a){return n.clamp(Math.round(32767*a),-32767,32767)};d.encodeNormal=function(a,b){var c=Math.abs(a[0]),e=Math.abs(a[1]),f=1/(c+e+Math.abs(a[2])),
g=Math.min(a[2]*f,0);b[0]=(0>a[0]?-1:1)*(c*f-g);b[1]=(0>a[1]?-1:1)*(e*f-g)};d.fallbackIfUndefined=function(a,b){return void 0===a?b:a};d.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};d.rgb2hex=function(a){var b=n.clamp(Math.round(255*a[0]),0,255),c=n.clamp(Math.round(255*a[1]),0,255);a=n.clamp(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)};d.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a};d.rayTriangle3D=
function(a,b,c,e,f,g,p,k,l){void 0===l&&(l=h.vec3f64.create());var m=e[p]-c[g],d=e[p+1]-c[g+1],u=e[p+2]-c[g+2];e=f[k]-c[g];p=f[k+1]-c[g+1];f=f[k+2]-c[g+2];var q=b[1]*f-p*b[2],z=b[2]*e-f*b[0],B=b[0]*p-e*b[1];k=m*q+d*z+u*B;if(-1E-5<k&&1E-5>k)return!1;k=1/k;var t=a[0]-c[g],x=a[1]-c[g+1];a=a[2]-c[g+2];l[1]=k*(t*q+x*z+a*B);if(0>l[1]||1<l[1])return!1;c=x*u-d*a;a=a*m-u*t;m=t*d-m*x;l[2]=k*(b[0]*c+b[1]*a+b[2]*m);if(0>l[2]||1<l[1]+l[2])return!1;l[0]=k*(e*c+p*a+f*m);return!0};d.rayBoxTest=function(a,b,c,e){var f,
g=(c[0]-a[0])/b[0],h=(e[0]-a[0])/b[0];g>h&&(f=g,g=h,h=f);var p=(c[1]-a[1])/b[1],k=(e[1]-a[1])/b[1];p>k&&(f=p,p=k,k=f);if(g>k||p>h)return!1;p>g&&(g=p);k<h&&(h=k);c=(c[2]-a[2])/b[2];a=(e[2]-a[2])/b[2];c>a&&(f=c,c=a,a=f);if(g>a||c>h)return!1;a<h&&(h=a);return 0>h?!1:!0};d.rayRay2D=function(a,c,e,f,g,h){void 0===h&&(h=b.vec2f64.create());var p=(f[g]-e[g])*(c[0]-a[0])-(f[0]-e[0])*(c[g]-a[g]);if(0===p)return!1;e=((f[0]-e[0])*(a[g]-e[g])-(f[g]-e[g])*(a[0]-e[0]))/p;h[0]=a[0]+e*(c[0]-a[0]);h[1]=a[g]+e*(c[g]-
a[g]);return!0};d.project=function(a,b,e,f,h){h||(h=a);v[0]=a[0];v[1]=a[1];v[2]=a[2];v[3]=1;g.vec4.transformMat4(v,v,b);2<h.length&&(h[2]=-v[2]);g.vec4.transformMat4(v,v,e);c(0!==v[3]);h[0]=v[0]/v[3];h[1]=v[1]/v[3];h[2]=v[2]/v[3];h[0]=(.5*h[0]+.5)*f[2]+f[0];h[1]=(.5*h[1]+.5)*f[3]+f[1]};d.getFirstObjectKey=f;d.getFirstObjectValue=function(a){return a[f(a)]};d.objectEmpty=function(a){for(var b in a)return!1;return!0};d.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};d.setMatrixTranslation=
a;d.setMatrixTranslation3=function(a,b,c,e){a[12]=b;a[13]=c;a[14]=e};d.getMatrixTranslation=function(a,b){void 0===b&&(b=h.vec3f64.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};d.createTranslationMatrix=function(b,c){b=l.mat4.identity(b);a(b,c);return b};d.isTranslationMatrix=function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&1===a[15]};d.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};
d.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};d.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};d.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};d.fovd2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};d.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};d.packFloatRGBA=function(a,b,c){void 0===c&&(c=0);a=n.clamp(a,0,w);for(var e=0;4>e;e++)b[c+e]=
Math.floor(256*q(a*y[e]))};d.unpackFloatRGBA=p;var y=[1,256,65536,16777216],x=[1/256,1/65536,1/16777216,1/4294967296],w=p(new Uint8ClampedArray([255,255,255,255]));d.inverseProjectionInfo=function(a,b,c,e,f){0===a[11]?(e[0]=2/(b*a[0]),e[1]=2/(c*a[5]),e[2]=(1+a[12])/a[0],e[3]=(1+a[13])/a[5],k.vec2.set(f,0,1)):(e[0]=-2/(b*a[0]),e[1]=-2/(c*a[5]),e[2]=(1-a[8])/a[0],e[3]=(1-a[9])/a[5],k.vec2.set(f,1,0))}})},"esri/views/3d/webgl-engine/shaders/SimpleAtmospherePrograms":function(){define(["require","exports",
"../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.colorPass={name:"simple-atmosphere-color",shaders:function(b){return{vertexShader:k.glslifyDefineMap({PANORAMIC:b.panoramic})+l.resolveIncludes("environment/simpleAtmosphere.vert"),fragmentShader:k.glslifyDefineMap({PANORAMIC:b.panoramic})+l.resolveIncludes("environment/simpleAtmosphere.frag")}},attributes:n.Default3D};d.fadePass={name:"simple-atmosphere-fade",
shaders:{vertexShader:l.resolveIncludes("environment/simpleAtmosphereFade.vert"),fragmentShader:l.resolveIncludes("environment/simpleAtmosphereFade.frag")},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.Default3D={position:0,normal:1,normalCompressed:1,uv0:2,color:3,instanceColor:3,size:4,aTangent:4,auxpos1:5,symbolColor:5,componentIndex:5,auxpos2:6,
featureAttribute:6,instanceFeatureAttribute:6,region:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}})},"esri/views/3d/webgl-engine/shaders/sources/resolver":function(){define(["require","exports","./shaderRepository","../../../../webgl/ShaderCompiler"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});var k=new l(function(b){var h=n;b.split("/").forEach(function(b){h&&(h=h[b])});return h});d.resolveIncludes=function(b){return k.resolveIncludes(b)}})},"esri/views/3d/webgl-engine/shaders/sources/shaderRepository":function(){define(["require",
"exports"],function(r,d){return{edgeRenderer:{"adjustProjectedPosition.glsl":"uniform vec2 uDepthBias;\nuniform vec2 uViewportDimInv;\nbool isNaN(float val) {\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\nvec2 calculateProjectedBiasXY(vec4 projPos, vec3 worldNormal) {\n  float offsetXY \x3d uDepthBias.x;\n  float offsetZ  \x3d uDepthBias.y;\n  vec4 projNormal \x3d uProj * uView * vec4(worldNormal, 0.0);\n  return offsetXY * projPos.w * 2.0 * uViewportDimInv * normalize(projNormal.xyz).xy;\n}\nfloat calculateProjectedBiasZ(vec4 projPos) {\n  float offsetZ \x3d uDepthBias.y;\n  return sqrt(projPos.z) * offsetZ;\n}\nvec4 adjustProjectedPosition(vec4 projPos, vec3 worldNormal, float lineWidth) {\n  vec2 offsetXY \x3d calculateProjectedBiasXY(projPos, worldNormal);\n  if (!isNaN(offsetXY.x) \x26\x26 !isNaN(offsetXY.y)) {\n    projPos.xy +\x3d offsetXY;\n  }\n  projPos.z +\x3d calculateProjectedBiasZ(projPos);\n  return projPos;\n}",
"edgeRenderer.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec4 vColor;\nvarying float vRadius;\nvarying vec3 vPosition;\nvarying vec3 vWorldPosition;\nvarying float vLineLengthPixels;\nvarying float vSizeFalloffFactor;\nvarying float vLineIndex;\n#define COVERAGE_TEST_THRESHOLD 0.01\n#include \x3cedgeRenderer/lineOffset.glsl\x3e\nvec2 lineWithCapsDistance(float radius, vec2 position, float lineLength) {\n  float lineOffset \x3d calculateLineOffset();\n  float positionX \x3d position.x - lineOffset;\n  if (radius \x3c 1.0) {\n    float coverageX \x3d clamp(min(radius, positionX + 0.5) - max(-radius, positionX - 0.5), 0.0, 1.0);\n    float coverageY \x3d clamp(min(lineLength, position.y + 0.5) - max(0.0, position.y - 0.5), 0.0, 1.0);\n    float coverage \x3d min(coverageX, coverageY);\n    return vec2(0.5 - coverage, 0.0);\n  }\n  else {\n    float positionOnCap \x3d position.y - clamp(position.y, 0.0, lineLength);\n    vec2 lineToPosition \x3d vec2(positionX, positionOnCap);\n    return vec2(length(lineToPosition) - radius, positionOnCap / radius);\n  }\n}\nvoid main() {\n  float radius \x3d vRadius * calculateLinePressure();\n  vec2 distance \x3d lineWithCapsDistance(radius, vPosition.xy, vLineLengthPixels);\n  float coverage \x3d clamp(0.5 - distance.x, 0.0, 1.0);\n#ifdef ANTIALIASING\n  const float coverageLimit \x3d COVERAGE_TEST_THRESHOLD;\n#else\n  float coverageLimit \x3d radius \x3c\x3d 0.5 ? COVERAGE_TEST_THRESHOLD : 0.75;\n#endif\n  if (coverage \x3c coverageLimit) {\n    discard;\n  }\n  discardBySlice(vWorldPosition);\n  float alpha \x3d vColor.a * coverage;\n  gl_FragColor \x3d vec4(vColor.rgb, alpha);\n}",
"edgeRenderer.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 uProj;\nuniform mat4 uView;\nuniform mat4 uModel;\nuniform vec3 uCameraPosition;\nuniform vec2 uPixelToNDC;\nuniform vec2 uNDCToPixel;\nuniform float uPixelRatio;\nattribute vec3 aPosition0;\nattribute vec3 aPosition1;\nattribute float aVariantOffset;\nattribute float aVariantStroke;\nattribute float aVariantExtension;\n#ifdef SILHOUETTE\nattribute vec3 aNormalA;\nattribute vec3 aNormalB;\n#else\nattribute vec3 aNormal;\n#endif\nattribute vec2 aSideness;\nattribute vec2 aPackedAttributes;\nstruct UnpackedAttributes {\nvec2 sideness;\nvec2 sidenessNorm;\nfloat lineWidthPixels;\nfloat extensionLengthPixels;\n#if (MODE \x3d\x3d MODE_UBER)\nfloat type;\n#endif\n};\nvarying vec4 vColor;\nvarying vec3 vPosition;\nvarying vec3 vWorldPosition;\nvarying float vRadius;\nvarying float vLineLengthPixels;\nvarying float vSizeFalloffFactor;\n#include \x3cedgeRenderer/adjustProjectedPosition.glsl\x3e\n#include \x3cedgeRenderer/styleOutputs.glsl\x3e\n#include \x3cedgeRenderer/lineAmplitude.glsl\x3e\n#include \x3cedgeRenderer/util.glsl\x3e\nvec4 calculateGeometricOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n  vec2 sideness \x3d unpackedAttributes.sideness;\n  vec2 sidenessNorm \x3d unpackedAttributes.sidenessNorm;\n  vWorldPosition \x3d mix(worldPosV0, worldPosV1, sidenessNorm.y).xyz;\n  vec4 viewPos \x3d mix(viewPosV0, viewPosV1, sidenessNorm.y);\n  vec4 projPosV0 \x3d uProj * viewPosV0;\n  vec4 projPosV1 \x3d uProj * viewPosV1;\n  vec4 projPos \x3d uProj * viewPos;\n  vec3 screenSpaceLineNDC \x3d (projPosV1.xyz / projPosV1.w - projPosV0.xyz / projPosV0.w);\n  vec2 screenSpaceLinePixels \x3d screenSpaceLineNDC.xy * uNDCToPixel;\n  float lineLengthPixels \x3d length(screenSpaceLinePixels);\n  float dzPerPixel \x3d screenSpaceLineNDC.z / lineLengthPixels;\n  vec2 screenSpaceDirection \x3d screenSpaceLinePixels / lineLengthPixels;\n  vec2 perpendicularScreenSpaceDirection \x3d vec2(screenSpaceDirection.y, -screenSpaceDirection.x) * sideness.x;\n  float falloffFactor \x3d distanceBasedPerspectiveFactor(-viewPos.z) * uPixelRatio;\n  float lineWidthPixels \x3d unpackedAttributes.lineWidthPixels * falloffFactor;\n  float extensionLengthPixels \x3d calculateExtensionLength(unpackedAttributes.extensionLengthPixels, lineLengthPixels) * falloffFactor;\n  float lineAmplitudePixels \x3d calculateLineAmplitude(unpackedAttributes) * uPixelRatio;\n  vSizeFalloffFactor \x3d falloffFactor;\n  float lineWidthAndAmplitudePixels \x3d lineWidthPixels + lineAmplitudePixels + lineAmplitudePixels;\n  float extendedLineLengthPixels \x3d lineLengthPixels + extensionLengthPixels + extensionLengthPixels;\n#ifdef ANTIALIASING\n  const float aaPaddingPixels \x3d 1.0;\n  float halfAAPaddedLineWidthAndAmplitudePixels \x3d lineWidthAndAmplitudePixels * 0.5 + aaPaddingPixels;\n  float aaPaddedRoundedCapSizePixels \x3d lineWidthPixels * 0.5 + aaPaddingPixels;\n  float aaPaddedLineLengthPixels \x3d extendedLineLengthPixels + aaPaddingPixels + aaPaddingPixels;\n  float halfAAPaddedLineLengthPixels \x3d aaPaddedLineLengthPixels * 0.5;\n#else\n  float halfAAPaddedLineWidthAndAmplitudePixels \x3d max(lineWidthAndAmplitudePixels, 1.0) * 0.5;\n  float aaPaddedRoundedCapSizePixels \x3d max(lineWidthPixels, 1.0) * 0.5;\n  float halfAAPaddedLineLengthPixels \x3d max(extendedLineLengthPixels, 1.0) * 0.5;\n#endif\n  vec2 halfAAPaddedLineWidthAndAmplitudeNDC \x3d halfAAPaddedLineWidthAndAmplitudePixels * uPixelToNDC;\n  vec2 aaPaddedRoundedCapSizeNDC \x3d aaPaddedRoundedCapSizePixels * uPixelToNDC;\n  vec2 extensionLengthNDC \x3d extensionLengthPixels * uPixelToNDC;\n  vec2 ndcOffset \x3d (\n      screenSpaceDirection * sideness.y * (aaPaddedRoundedCapSizeNDC + extensionLengthNDC)\n    + perpendicularScreenSpaceDirection * halfAAPaddedLineWidthAndAmplitudeNDC\n  );\n  projPos.xy +\x3d ndcOffset * projPos.w;\n  projPos.z +\x3d (dzPerPixel * (aaPaddedRoundedCapSizePixels + extensionLengthPixels)) * sideness.y * projPos.w;\n  projPos \x3d adjustProjectedPosition(projPos, worldNormal, 1.0 + max((lineWidthAndAmplitudePixels - 1.0) * 0.5, 0.0));\n  float aaPaddedLineWithCapsLengthPixels \x3d extendedLineLengthPixels + aaPaddedRoundedCapSizePixels + aaPaddedRoundedCapSizePixels;\n  float pixelPositionAlongLine \x3d aaPaddedLineWithCapsLengthPixels * sidenessNorm.y - aaPaddedRoundedCapSizePixels;\n  vPosition \x3d vec3(\n    halfAAPaddedLineWidthAndAmplitudePixels * sideness.x,\n    pixelPositionAlongLine,\n    pixelPositionAlongLine / extendedLineLengthPixels\n  );\n  vRadius \x3d lineWidthPixels * 0.5;\n  vLineLengthPixels \x3d extendedLineLengthPixels;\n#ifdef SILHOUETTE\n  gl_Position \x3d isSilhouetteEdge(viewPosV0, aNormalA, aNormalB) ? projPos : vec4(10.0, 10.0, 10.0, 1.0);\n#else\n  gl_Position \x3d projPos;\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  if (unpackedAttributes.type \x3c\x3d 0.0 \x26\x26 lineLengthPixels \x3c\x3d 3.0) {\n    gl_Position \x3d vec4(10.0, 10.0, 10.0, 1.0);\n  }\n#elif (MODE \x3d\x3d MODE_SKETCH)\n  if (lineLengthPixels \x3c\x3d 3.0) {\n    gl_Position \x3d vec4(10.0, 10.0, 10.0, 1.0);\n  }\n#endif\n  return projPos;\n}\n#if (MODE \x3d\x3d MODE_UBER)\nUnpackedAttributes unpackAttributes(ComponentData component) {\n  vec2 sidenessNorm \x3d aSideness;\n  vec2 sideness \x3d sidenessNorm * 2.0 - 1.0;\n  float fType \x3d component.type;\n  float extensionLengthPixels \x3d component.extensionLength;\n  float lineWidth \x3d component.lineWidth;\n  if (fType \x3c\x3d 0.0) {\n    extensionLengthPixels *\x3d aVariantExtension * 2.0 - 1.0;\n  }\n  return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels, fType);\n}\n#else\nUnpackedAttributes unpackAttributes(ComponentData component) {\n  vec2 sidenessNorm \x3d aSideness;\n  vec2 sideness \x3d sidenessNorm * 2.0 - 1.0;\n  float extensionLengthPixels \x3d component.extensionLength;\n#if (MODE \x3d\x3d MODE_SKETCH)\n  extensionLengthPixels *\x3d aVariantExtension * 2.0 - 1.0;\n#endif\n  float lineWidth \x3d component.lineWidth;\n  return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels);\n}\n#endif\nvoid main() {\n  ComponentData component \x3d readComponentData();\n  UnpackedAttributes unpackedAttributes \x3d unpackAttributes(component);\n  vec4 worldPosV0 \x3d uModel * vec4(aPosition0, 1.0);\n  vec4 worldPosV1 \x3d uModel * vec4(aPosition1, 1.0);\n  vec4 viewPosV0 \x3d uView * worldPosV0;\n  vec4 viewPosV1 \x3d uView * worldPosV1;\n#ifdef SILHOUETTE\n  vec3 worldNormal \x3d silhouetteWorldNormal(aNormalA, aNormalB);\n#else\n  vec3 worldNormal \x3d modelToWorldNormal(aNormal);\n#endif\n  vec4 projPos \x3d calculateGeometricOutputs(viewPosV0, viewPosV1, worldPosV0, worldPosV1, worldNormal, unpackedAttributes);\n  vColor \x3d component.color;\n  calculateStyleOutputs(viewPosV0, viewPosV1, worldPosV0, worldPosV1, projPos, worldNormal, unpackedAttributes);\n}",
"lineAmplitude.glsl":"#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SOLID)\n  float calculateLineAmplitudeSolid() {\n    return 0.0;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    return calculateLineAmplitudeSolid();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform float uStrokesAmplitude;\n  float calculateLineAmplitudeSketch() {\n    return uStrokesAmplitude;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SKETCH)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    return calculateLineAmplitudeSketch();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {\n    float type \x3d unpackedAttributes.type;\n    if (type \x3c\x3d 0.0) {\n      return calculateLineAmplitudeSketch();\n    }\n    else {\n      return calculateLineAmplitudeSolid();\n    }\n  }\n#endif",
"lineOffset.glsl":"#include \x3cutil/encoding.glsl\x3e\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform sampler2D uStrokesTexture;\n  uniform float uStrokesNormalizationScale;\n  varying vec2 vStrokeUV;\n  float calculateLineOffsetSketch() {\n    float offsetNorm \x3d rgba2float(texture2D(uStrokesTexture, vStrokeUV));\n    return (offsetNorm - 0.5) * uStrokesNormalizationScale;\n  }\n  float calculateLinePressureSketch() {\n    return rgba2float(texture2D(uStrokesTexture, vStrokeUV + vec2(0.0, 0.5)));\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SKETCH)\n  float calculateLineOffset() {\n    return calculateLineOffsetSketch();\n  }\n  float calculateLinePressure() {\n    return calculateLinePressureSketch();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SOLID)\n  float calculateLineOffsetSolid() {\n    return 0.0;\n  }\n  float calculateLinePressureSolid() {\n    return 1.0;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  float calculateLineOffset() {\n    return calculateLineOffsetSolid();\n  }\n  float calculateLinePressure() {\n    return calculateLinePressureSolid();\n  }\n#endif\n#if (MODE \x3d\x3d MODE_UBER)\n  varying float vType;\n  float calculateLineOffset() {\n    if (vType \x3c\x3d 0.0) {\n      return calculateLineOffsetSketch();\n    }\n    else {\n      return calculateLineOffsetSolid();\n    }\n  }\n  float calculateLinePressure() {\n    if (vType \x3c\x3d 0.0) {\n      return calculateLinePressureSketch();\n    }\n    else {\n      return calculateLinePressureSolid();\n    }\n  }\n#endif",
"styleOutputs.glsl":"#if (MODE \x3d\x3d MODE_UBER || MODE \x3d\x3d MODE_SKETCH)\n  uniform vec2 uStrokesTextureScale;\n  uniform float uStrokesLog2Resolution;\n  uniform float uStrokeVariants;\n  varying vec2 vStrokeUV;\n  varying float vLineIndex;\n  void calculateStyleOutputsSketch(float lineLength, UnpackedAttributes unpackedAttributes) {\n    vec2 sidenessNorm \x3d unpackedAttributes.sidenessNorm;\n    float lineIndex \x3d clamp(ceil(log2(lineLength)), 0.0, uStrokesLog2Resolution);\n    vStrokeUV \x3d vec2(exp2(lineIndex) * sidenessNorm.y, lineIndex * uStrokeVariants + aVariantStroke + 0.5) * uStrokesTextureScale;\n    vStrokeUV.x +\x3d aVariantOffset;\n    vLineIndex \x3d lineIndex;\n  }\n#endif\n#if (MODE \x3d\x3d MODE_SOLID)\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n  }\n#elif (MODE \x3d\x3d MODE_SKETCH)\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n    calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);\n  }\n#elif (MODE \x3d\x3d MODE_UBER)\n  varying float vType;\n  void calculateStyleOutputs(vec4 viewPosV0, vec4 viewPosV1, vec4 worldPosV0, vec4 worldPosV1, vec4 projPos, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {\n    vType \x3d unpackedAttributes.type;\n    if (unpackedAttributes.type \x3c\x3d 0.0) {\n      calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);\n    }\n  }\n#endif",
"util.glsl":"uniform float uDistanceFalloffFactor;\nfloat distanceBasedPerspectiveFactor(float distance) {\n  return clamp(sqrt(uDistanceFalloffFactor / distance), 0.0, 1.0);\n}\nuniform sampler2D uComponentDataTex;\nuniform vec2 uComponentDataTexInvDim;\nattribute float aComponentIndex;\n#define COMPONENT_COLOR_FIELD_OFFSET 0.0\n#define COMPONENT_OTHER_FIELDS_OFFSET 1.0\n#define COMPONENT_FIELD_COUNT 2.0\n#define LINE_WIDTH_FRACTION_FACTOR 8.0\n#define EXTENSION_LENGTH_OFFSET 128.0\n#define COMPONENT_TEX_WIDTH 4096.0\nvec2 componentTextureCoords(float componentIndex, float fieldOffset) {\n  float fieldIndex \x3d COMPONENT_FIELD_COUNT * componentIndex + fieldOffset;\n  float rowIndex \x3d floor(fieldIndex / COMPONENT_TEX_WIDTH);\n  float colIndex \x3d mod(fieldIndex, COMPONENT_TEX_WIDTH);\n  vec2 linearIndex \x3d vec2(\n    (colIndex + 0.5) / COMPONENT_TEX_WIDTH,\n    (rowIndex + 0.5) * uComponentDataTexInvDim.y\n  );\n  return linearIndex;\n}\nstruct ComponentData {\n  vec4 color;\n  float lineWidth;\n  float extensionLength;\n  float type;\n};\nComponentData readComponentData() {\n  vec2 colorIndex \x3d componentTextureCoords(aComponentIndex, COMPONENT_COLOR_FIELD_OFFSET);\n  vec2 otherIndex \x3d componentTextureCoords(aComponentIndex, COMPONENT_OTHER_FIELDS_OFFSET);\n  vec4 colorValue \x3d texture2D(uComponentDataTex, colorIndex);\n  vec4 otherValue \x3d texture2D(uComponentDataTex, otherIndex);\n  return ComponentData(\n    vec4(colorValue.rgb, colorValue.a * otherValue.w),\n    otherValue.x * (255.0 / LINE_WIDTH_FRACTION_FACTOR),\n    otherValue.y * 255.0 - EXTENSION_LENGTH_OFFSET,\n    -(otherValue.z * 255.0) + 0.5\n  );\n}\nvec3 modelToWorldNormal(vec3 normal) {\n  return (uModel * vec4(normal, 0.0)).xyz;\n}\nvec3 silhouetteWorldNormal(vec3 normalA, vec3 normalB) {\n  return modelToWorldNormal(normalize(normalA + normalB));\n}\nfloat calculateExtensionLength(float extensionLength, float lineLength) {\n  return extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);\n}\n#ifdef SILHOUETTE\nbool isSilhouetteEdge(vec4 viewPos, vec3 normalA, vec3 normalB) {\n  vec3 viewNormalA \x3d (uView * uModel * vec4(normalA, 0.0)).xyz;\n  vec3 viewNormalB \x3d (uView * uModel * vec4(normalB, 0.0)).xyz;\n  vec3 viewDir \x3d -viewPos.xyz;\n  float faceAVisible \x3d dot(viewDir, viewNormalA);\n  float faceBVisible \x3d dot(viewDir, viewNormalB);\n  return faceAVisible * faceBVisible \x3c 0.0;\n}\n#endif"},
environment:{"realisticAtmosphere.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nuniform vec3 v3LightDir;\nuniform vec3 v3InvWavelength;\nuniform vec3 v3InvWavelengthScaled;\nconst float fKrESun \x3d 0.075;\nconst float fKmESun \x3d 0.015;\nuniform vec4 v4Radii;\n#define fInnerRadius v4Radii[0]\n#define fInnerRadius2 v4Radii[1]\n#define fOuterRadius v4Radii[2]\n#define fOuterRadius2 v4Radii[3]\nuniform vec4 v4AtmosParams1;\nuniform vec4 v4AtmosParams2;\n#define fScale v4AtmosParams1.x\n#define v2ScaleDepth vec2(v4AtmosParams1.y,v4AtmosParams2.y)\n#define v2ScaleOverScaleDepth vec2(v4AtmosParams1.z,v4AtmosParams2.z)\n#define v2OneOverScaleDepth vec2(v4AtmosParams1.w,v4AtmosParams2.w)\n#ifndef HAZE\nuniform vec4 v4AtmosParams3;\nuniform float fInnerFadeDistance;\nuniform float fAltitudeFade;\n#define fg v4AtmosParams2.x\n#define fg2 v4AtmosParams3.x\n#define fMiePhaseCoefficients v4AtmosParams3.y\n#define fLowerAlphaBlendBound v4AtmosParams3.z\n#define fOneOverOuterRadiusMinusAlphaBlendBound v4AtmosParams3.w\n#endif\nuniform vec3 v3CameraPos;\nuniform vec2 nearFar;\nuniform vec4 v4SphereComp;\n#define fCameraHeight v4SphereComp[0]\n#define fCameraHeight2 v4SphereComp[1]\n#define fC v4SphereComp[2]\n#define fCSur v4SphereComp[3]\n#ifdef HAZE\nconst float fExposure \x3d 1.5;\n#else\nconst float fExposure \x3d 2.0;\n#endif\n#ifdef HAZE\nuniform sampler2D tDepth;\n#endif\nuniform float showTest;\nvarying vec3 v3EyeDir;\nvarying vec3 v3WorldRay;\nvarying vec2 vtc;\nconst float fSamples \x3d 5.0;\nconst int maxSamples \x3d 5;\n#ifdef HAZE\n  const float fOneOverGamma \x3d 1.0;\n#else\n  const float fOneOverGamma \x3d 0.454545;\n#endif\nconst vec3 v3OneOverGamma \x3d vec3(fOneOverGamma);\nvec3 expTM(vec3 inputColor,float exposure){\n    return pow(1.0 - exp(inputColor * -exposure), v3OneOverGamma);\n}\n#ifndef HAZE\nvec3 reinhardTM(vec3 inputColor, float exposure){\n  vec3 intermediate \x3d inputColor *exposure;\n  intermediate /\x3d (1.0+intermediate);\n  return pow(intermediate, v3OneOverGamma);\n}\n#endif\nfloat scale(float fCos){\n  float x \x3d 1.0 - fCos;\n  return exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid main() {\n  vec3 cameraPosition \x3d v3CameraPos;\n  vec3 test \x3d vec3(0.0,0.0,0.0);\n  vec3 worldSpaceRay \x3d normalize(v3WorldRay);\n  float B \x3d 2.0 * dot(cameraPosition, worldSpaceRay);\n  float det \x3d B*B - 4.0 * fC;\n  float detSur \x3d B*B - 4.0 * fCSur;\n  float fMinRayStart \x3d 0.0;\n#ifndef HAZE\n  float fSurfaceBlend \x3d 0.0;\n  vec4 surfaceColor \x3d vec4(0.0);\n  if (detSur \x3e\x3d 0.0) {\n    float nearSurfaceT \x3d max(0.0, 0.5 *(-B - sqrt(detSur)));\n    float farSurfaceT \x3d max(0.0, 0.5 *(-B + sqrt(detSur)));\n    if (nearSurfaceT \x3d\x3d 0.0) {\n      fMinRayStart \x3d farSurfaceT;\n    }\n    vec3 vPos \x3d cameraPosition + worldSpaceRay * nearSurfaceT;\n    float fLightAngle \x3d dot(v3LightDir, normalize(vPos));\n    float fBrightness \x3d max(0.0, (smoothstep(-1.0, 0.8, 2.0 * fLightAngle)));\n    surfaceColor \x3d vec4(fBrightness, fBrightness, fBrightness, 1.0 - fAltitudeFade);\n    float fRelDist \x3d (farSurfaceT - nearSurfaceT) / fInnerFadeDistance;\n    if (fRelDist \x3e 1.0) {\n      gl_FragColor \x3d surfaceColor;\n      return;\n    }\n    fSurfaceBlend \x3d smoothstep(0.0, 1.0, fRelDist * fRelDist);\n  }\n#endif\n  if (det \x3e\x3d 0.0) {\n#ifdef HAZE\n    float depthSample \x3d texture2D(tDepth, vtc).r;\n    float zNear \x3d nearFar[0];\n    float zFar \x3d nearFar[1];\n    float zNorm \x3d 2.0 * depthSample - 1.0;\n    float linDepth \x3d 2.0 * zNear * zFar /\n      (zFar + zNear - zNorm * (zFar - zNear));\n    float rayEndT;\n    float altitudeAlpha \x3d 1.0;\n    if (depthSample \x3c 1.0 \x26\x26 depthSample \x3e 0.0) {\n      vec3 cameraSpaceRay \x3d normalize(v3EyeDir);\n      cameraSpaceRay /\x3d cameraSpaceRay.z;\n      cameraSpaceRay *\x3d linDepth;\n      float cameraSpaceRayLength \x3d length(cameraSpaceRay);\n      vec3 v3World \x3d cameraPosition + worldSpaceRay * cameraSpaceRayLength;\n      float v3WorldRadius2 \x3d dot(v3World, v3World);\n      float transitionStart \x3d fInnerRadius + 20000.0;\n      float transitionHeight \x3d 25000.0;\n      float transitionEnd \x3d transitionStart + transitionHeight;\n      float edge0 \x3d transitionStart * transitionStart;\n      float edge1 \x3d transitionEnd * transitionEnd;\n      altitudeAlpha \x3d 1.0 - clamp((v3WorldRadius2 - edge0) / (edge1 - edge0), 0.0, 1.0);\n      rayEndT \x3d cameraSpaceRayLength;\n      if (altitudeAlpha \x3e 0.0 \x26\x26 detSur \x3e 0.0) {\n        float nearSurfaceT \x3d 0.5 *(-B - sqrt(detSur));\n        float interp \x3d clamp(((fCameraHeight - fInnerRadius) - 2000000.0) / 6000000.0, 0.0, 1.0);\n        rayEndT \x3d mix(cameraSpaceRayLength, nearSurfaceT, interp);\n      }\n    }\n#endif\n    float rayStartT \x3d 0.5 *(-B - sqrt(det));\n#ifdef HAZE\n    float nearT \x3d abs(rayStartT);\n    float farT \x3d abs(rayEndT);\n#else\n    float rayEndT \x3d 0.5 *(-B + sqrt(det));\n#endif\n    float fDistance;\n    if (rayStartT \x3c fMinRayStart)\n    {\n      rayStartT \x3d fMinRayStart;\n#ifndef HAZE\n      fDistance \x3d fScale * min(0.0, fInnerRadius - fCameraHeight);\n#endif\n    }\n#ifndef HAZE\n    else\n    {\n      fDistance \x3d -1.0;\n    }\n#endif\n    vec3 v3Start \x3d cameraPosition + worldSpaceRay * rayStartT;\n#ifdef HAZE\n    vec3 v3End \x3d cameraPosition + worldSpaceRay * rayEndT;\n    float fEndLength \x3d length(v3End);\n    float fAltitudeEnd \x3d fEndLength - fInnerRadius;\n    float fAltitudeStart \x3d length(v3Start) - fInnerRadius;\n    if (fAltitudeStart \x3c 0.0) {\n      fAltitudeStart \x3d -fAltitudeStart;\n      fAltitudeEnd \x3d -fAltitudeEnd;\n    }\n    float fLightAngle \x3d dot(v3LightDir, v3End) / fEndLength;\n    if (nearT \x3e farT)\n    {\n      if (fAltitudeStart \x3c fAltitudeEnd)\n      {\n        v3End \x3d cameraPosition + worldSpaceRay * rayStartT;\n        v3Start \x3d cameraPosition + worldSpaceRay * rayEndT;\n        worldSpaceRay *\x3d -1.0;\n        float fTmp \x3d fAltitudeStart;\n        fAltitudeStart \x3d fAltitudeEnd;\n        fAltitudeEnd \x3d fTmp;\n      }\n      else if (fAltitudeStart \x3d\x3d fAltitudeEnd)\n      {\n        fAltitudeStart +\x3d 1.0;\n      }\n    }\n    float fCameraDepth;\n    float fCameraDepthBlue;\n    if (fAltitudeStart \x3e fOuterRadius - fInnerRadius)\n    {\n      fDistance \x3d fInnerRadius - fOuterRadius;\n    } else\n    {\n      fDistance \x3d fAltitudeEnd - fAltitudeStart;\n    }\n#endif\n    vec2 v2OpticalStartDepth \x3d exp(fDistance * v2OneOverScaleDepth);\n    float fRayLength \x3d rayEndT - rayStartT;\n    float fSampleLength \x3d fRayLength / fSamples;\n    float fScaledLength \x3d fSampleLength * fScale;\n    vec3 v3SampleRay \x3d worldSpaceRay * fSampleLength;\n    vec3 v3SamplePoint \x3d v3Start + v3SampleRay * 0.5;\n#ifdef HAZE\n    float fCameraAngle \x3d dot(-worldSpaceRay, v3End) / length(v3End);\n    float fScaleCameraAngle \x3d scale(fCameraAngle);\n    vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth;\n    float scaledValues \x3d scale(fLightAngle) + fScaleCameraAngle;\n    vec2 v2ScaledValuesDepth \x3d scaledValues * v2ScaleDepth;\n#else\n    float fCameraAngle \x3d dot(worldSpaceRay, v3Start / length(v3Start));\n    float angleMultiplier \x3d fCameraAngle\x3e0.0?fCameraAngle:0.0;\n    float fScaleCameraAngle \x3d scale(fCameraAngle);\n    vec2 v2CameraOffset \x3d fScaleCameraAngle*v2OpticalStartDepth * v2ScaleDepth;\n#endif\n    vec3 v3FrontColor \x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3FrontColorBlue \x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3Attenuate\x3d vec3(0.0, 0.0, 0.0);\n    vec3 v3AttenuateBlue \x3d vec3(0.0, 0.0, 0.0);\n    for(int i\x3d0; i\x3cmaxSamples; i++) {\n      float fHeight \x3d length(v3SamplePoint);\n      float fAltitude \x3d abs(fHeight - fInnerRadius);\n      vec2 v2Depth \x3d exp(-fAltitude * v2ScaleOverScaleDepth);\n#ifdef HAZE\n      vec2 v2Scatter \x3d v2Depth*v2ScaledValuesDepth-v2CameraOffset;\n#else\n      float fLightAngle \x3d dot(v3LightDir, v3SamplePoint) / fHeight;\n      float fCameraAngle \x3d dot(worldSpaceRay, v3SamplePoint) / fHeight;\n      float fTempScaledValues \x3d scale(fLightAngle) - scale(fCameraAngle);\n      vec2 v2Scatter \x3d v2CameraOffset + fTempScaledValues*v2Depth* v2ScaleDepth;\n#endif\n      v3Attenuate \x3d exp(-v2Scatter.x * v3InvWavelengthScaled);\n      v3AttenuateBlue \x3d exp(-v2Scatter.y * v3InvWavelengthScaled);\n      v3FrontColor +\x3d v3Attenuate * v2Depth.x;\n      v3FrontColorBlue +\x3d v3AttenuateBlue * v2Depth.y;\n      v3SamplePoint +\x3d v3SampleRay;\n    }\n    float fCos \x3d clamp(dot(v3LightDir, -worldSpaceRay ),-0.9999999,1.0);\n    float fOnePlusCos2 \x3d fCos*fCos + 1.0;\n#ifdef HAZE\n    vec3 colorCoefficients \x3d (fScaledLength* 0.75 * fOnePlusCos2)*(fKrESun*v3InvWavelength+fKmESun);\n    vec3 v3Color \x3d colorCoefficients *v3FrontColor;\n    vec3 v3ColorBlue \x3d colorCoefficients *v3FrontColorBlue;\n#else\n    vec3 v3RayleighCoefficients \x3d (fScaledLength*0.75 * fOnePlusCos2*fKrESun)*v3InvWavelength;\n    float fMieCoefficients \x3d fScaledLength*fKmESun * fMiePhaseCoefficients * fOnePlusCos2 / pow(1.0 + fg2 - 2.0*fg*fCos, 1.5);\n    vec3 v3Color \x3d v3RayleighCoefficients * v3FrontColor + fMieCoefficients * v3FrontColor;\n    vec3 v3ColorBlue \x3d v3RayleighCoefficients * v3FrontColorBlue + fMieCoefficients * v3FrontColorBlue;\n#endif\n    vec3 ldrBlue \x3d expTM(v3ColorBlue,2.0*fExposure);\n    vec3 ldrRed \x3d expTM(v3Color,fExposure);\n    vec3 LDR \x3d mix(ldrBlue,ldrRed,0.2);\n#ifdef HAZE\n    LDR *\x3d (1.0-fCameraAngle);\n    vec3 hsv \x3d rgb2hsv(LDR);\n    hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);\n    LDR \x3d hsv2rgb(hsv);\n    vec3 finalColor \x3d LDR;\n#else\n    vec3 ldrReinhard \x3d reinhardTM(v3Color,fExposure);\n    LDR +\x3d angleMultiplier*ldrReinhard;\n    float side \x3d (rayEndT+rayStartT)*0.5;\n    float atmoHeight \x3d sqrt(fCameraHeight2 - side*side);\n    float h2 \x3d clamp(1.0-(atmoHeight-fLowerAlphaBlendBound)/(fOuterRadius-fLowerAlphaBlendBound),0.0,1.0);\n    vec3 finalColor \x3d LDR*h2;\n    vec3 hsv \x3d rgb2hsv(finalColor);\n    hsv.y \x3d clamp(hsv.y*1.5,0.0,1.0);\n    finalColor \x3d hsv2rgb(hsv);\n#endif\n#ifndef HAZE\n    float atmosStrength \x3d clamp((length(ldrRed)-0.05)*1.05,0.0,1.0);\n    gl_FragColor \x3d vec4(finalColor, atmosStrength*clamp(1.0-(atmoHeight-fInnerRadius)/(fOuterRadius-fInnerRadius),0.0,1.0));\n    if (fSurfaceBlend \x3e 0.0) {\n      gl_FragColor \x3d mix(gl_FragColor, surfaceColor, fSurfaceBlend);\n    }\n#else\n    gl_FragColor \x3d vec4(finalColor, 1.0) * altitudeAlpha;\n#endif\n    if(showTest\x3e0.0){\n      gl_FragColor \x3d vec4(test,1.0);\n    }\n  } else {\n    gl_FragColor \x3d vec4(0.0);\n  }\n}",
"realisticAtmosphere.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform vec2 halfSizeNearPlane;\nuniform vec3 v3CameraUp;\nuniform vec3 v3CameraRight;\nuniform vec3 v3CameraDir;\nuniform vec2 v2CameraCenterOffset;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 v3WorldRay;\nvarying vec2 vtc;\n#ifdef HAZE\nvarying vec3 v3EyeDir;\n#endif\nvoid main(void) {\n  vec3 v3Pos \x3d position;\n  vtc \x3d uv0;\n  vec2 rayvtc \x3d uv0 - v2CameraCenterOffset;\n#ifdef HAZE\n  v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\n#else\n  vec3 v3EyeDir \x3d vec3((2.0*halfSizeNearPlane *rayvtc)-halfSizeNearPlane,-1.0);\n#endif\n  v3WorldRay \x3d v3EyeDir.z*v3CameraDir + v3EyeDir.y*v3CameraUp + v3EyeDir.x*v3CameraRight;\n  gl_Position \x3d vec4(v3Pos, 1.0);\n}",
"simpleAtmosphere.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvarying float falloff;\n#ifndef PANORAMIC\nuniform float altitudeFade;\nvarying float innerFactor;\n#endif\nvoid main() {\n  vec4 texColor \x3d texture2D(tex, vtc);\n#ifdef PANORAMIC\n  gl_FragColor \x3d texColor * falloff;\n#else\n  vec4 atmosphereColor \x3d texColor * falloff;\n  vec4 innerColor \x3d vec4(texColor.rgb * falloff, 1.0 - altitudeFade);\n  gl_FragColor \x3d mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n#endif\n}",
"simpleAtmosphere.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\n#ifndef PANORAMIC\nconst float TWICEPI \x3d 2.0*3.14159265;\nconst float ATMOSPHERE_RIM_SEGMENTS \x3d 128.0;\nuniform vec3 silCircleCenter;\nuniform vec3 silCircleV1;\nuniform vec3 silCircleV2;\nuniform vec2 texV;\nuniform float innerScale;\nvarying float innerFactor;\n#endif\nuniform vec3 lightDirection;\nattribute vec3 position;\nvarying vec2 vtc;\nvarying float falloff;\nvoid main(void) {\n#ifdef PANORAMIC\n  vec3 pos \x3d position;\n  float ndotl \x3d lightDirection.z;\n  vtc \x3d vec2(0.0, position.z+0.05);\n#else\n  innerFactor \x3d clamp(-position.z, 0.0, 1.0);\n  float scale \x3d position.y * (1.0 + innerFactor * innerScale);\n  float phi \x3d position.x * (TWICEPI / ATMOSPHERE_RIM_SEGMENTS) + 1.0;\n  vec3 pos \x3d  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n  float ndotl \x3d dot(normalize(position.y \x3e 0.0 ? pos: silCircleCenter), lightDirection);\n  vtc.x \x3d position.x / ATMOSPHERE_RIM_SEGMENTS;\n  vtc.y \x3d texV.x * (1.0 - position.z) + texV.y * position.z;\n#endif\n  falloff \x3d max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n  gl_Position \x3d proj * view * vec4(pos, 1.0);\n  gl_Position.z \x3d gl_Position.w;\n}",
"simpleAtmosphereFade.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}","simpleAtmosphereFade.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nuniform vec3 lightDirection;\nuniform vec3 cameraPosition;\nuniform float undergroundFadeAlpha;\nvarying vec4 color;\nvoid main(void) {\n  float ndotl \x3d dot(normalize(cameraPosition), lightDirection);\n  float lighting \x3d max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n  color \x3d vec4(vec3(lighting), undergroundFadeAlpha);\n  gl_Position \x3d vec4(position.xy, 1.0, 1.0);\n}",
"stars.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec4 vcolor;\nvarying float vsize;\nvoid main() {\n  float cap \x3d 0.7;\n  float scale \x3d 1.0/cap;\n  float helper \x3d clamp(length(abs(gl_PointCoord-vec2(0.5))),0.0,cap);\n  float alpha \x3d clamp((cap-helper)*scale,0.0,1.0);\n  float intensity \x3d alpha*alpha*alpha;\n  if (vsize \x3c 3.0)\n    intensity *\x3d 0.5;\n  gl_FragColor \x3d vec4(1.0,1.0,1.0,intensity);\n  gl_FragColor.xyz *\x3d vcolor.xyz;\n}","stars.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec4 viewport;\nuniform float pixelRatio;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nvarying vec4 vcolor;\nvarying float vsize;\nvoid main(void) {\n  vec4 posProj \x3d proj * view * model*vec4(position*1.0e25,1.0);\n  gl_Position \x3d alignToPixelCenter(posProj, viewport.zw);\n  gl_Position.z \x3d gl_Position.w;\n  vcolor \x3d color / 1.2;\n  vsize \x3d size * 5.0 * pixelRatio;\n  gl_PointSize \x3d vsize;\n}"},
materials:{checkerBoard:{"checkerBoard.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec2 size;\nuniform vec4 color1;\nuniform vec4 color2;\nvarying vec2 vUV;\nvoid main() {\n  vec2 uvScaled \x3d vUV / (2.0 * size);\n  vec2 uv \x3d fract(uvScaled - 0.25);\n  vec2 ab \x3d clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n  float fade \x3d smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n  float t \x3d mix(abs(ab.x + ab.y), 0.5, fade);\n  gl_FragColor \x3d mix(color2, color1, t);\n}",
"checkerBoard.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vUV;\nvoid main(void) {\n  vUV \x3d uv0;\n  gl_Position \x3d proj * view * vec4((model * vec4(position, 1.0)).xyz, 1.0);\n}"},color:{"color.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 eColor;\n#ifdef VERTEX_COLORS\nvarying vec4 vColor;\n#endif\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n#ifdef VERTEX_COLORS\n  gl_FragColor \x3d vColor * eColor;\n#else\n  gl_FragColor \x3d eColor;\n#endif\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"color.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\n#ifdef VERTEX_COLORS\nattribute vec4 color;\nvarying vec4 vColor;\n#endif\nvarying vec3 vpos;\nvoid main(void) {\n#ifdef VERTEX_COLORS\n  vColor \x3d color * 0.003921568627451;\n#endif\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}"},defaultMaterial:{"colorMixMode.glsl":"#include \x3cutil/color.glsl\x3e\nvec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n  float symbolAlpha \x3d 0.0;\n  const float maxTint \x3d 85.0;\n  const float maxReplace \x3d 170.0;\n  const float scaleAlpha \x3d 3.0;\n  if (symbolColor.a \x3e maxReplace) {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxReplace);\n  } else if (symbolColor.a \x3e maxTint) {\n    colorMixMode \x3d 3;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxTint);\n  } else if (symbolColor.a \x3e 0.0) {\n    colorMixMode \x3d 0;\n    symbolAlpha \x3d scaleAlpha * symbolColor.a;\n  } else {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d 0.0;\n  }\n  return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n}\nvec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n  vec3 internalMixed \x3d internalColor * textureColor;\n  vec3 allMixed \x3d internalMixed * externalColor;\n  if (mode \x3d\x3d 1 ) {\n    return allMixed;\n  }\n  else if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalColor;\n  }\n  else {\n    vec3 hsvIn \x3d rgb2hsv(internalMixed);\n    vec3 hsvTint \x3d rgb2hsv(externalColor);\n    vec3 hsvOut \x3d vec3(hsvTint.x, hsvTint.y, hsvIn.z * hsvTint.z);\n    return hsv2rgb(hsvOut);\n  }\n}\nfloat mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n  float internalMixed \x3d internalOpacity * textureOpacity;\n  float allMixed \x3d internalMixed * externalOpacity;\n  if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalOpacity;\n  }\n  else {\n    return allMixed;\n  }\n}",
"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\n#include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n#define FRAGMENT_SHADER\n#include \x3cmaterials/defaultMaterial/vertexTangents.glsl\x3e\n#include \x3cmaterials/defaultMaterial/textureNormals.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float opacity;\nuniform float layerOpacity;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#else\nuniform int colorMixMode;\n#endif\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\n#endif\n#ifdef RECEIVE_SSAO\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\n#endif\nvarying vec3 vpos;\nvarying vec3 localvpos;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  varying vec3 vnormal;\n#endif\n#if defined(VERTEXCOLORS)\nvarying vec4 vcolor;\n#endif\nvarying vec4 vcolorExt;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#ifdef TREE_RENDERING\n  uniform mat4 view;\n#endif\n#ifdef USE_PBR\n    uniform float roughnessFactor;\n    uniform float metalnessFactor;\n    uniform vec3 emissionFactor;\n  #ifdef PBR_TEX_METALLNESS_ROUGHNESS\n    uniform sampler2D texMetallicRoughness;\n  #endif\n  #ifdef PBR_TEX_EMISSION\n    uniform sampler2D texEmission;\n  #endif\n  #ifdef PBR_TEX_OCCLUSION\n    uniform sampler2D texOcclusion;\n  #endif\n#endif\n#ifdef TEXTURING\n#include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\n#include \x3cmaterials/defaultMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  discardBySlice(vpos);\n#if defined(TEXTURING) \x26\x26 defined(TEXTURE_COLOR)\n  vec4 texColor \x3d textureLookup(tex, vtc);\n  #if defined(TEXTURE_ALPHA_PREMULTIPLIED)\n    texColor.rgb /\x3d texColor.a;\n  #endif\n  discardOrAdjustTextureAlpha(texColor);\n#else\n  vec4 texColor \x3d vec4(1.0);\n#endif\n  vec3 viewDir \x3d vpos - camPos;\n#ifdef GROUND_NORMAL_SHADING\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 normal \x3d normalize(vpos + localOrigin);\n  #else\n    vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n  #endif\n#else\n  #if (NORMALS \x3d\x3d NORMALS_SCREEN_DERIVATIVE)\n    vec3 normal \x3d normalize(cross(dFdx(localvpos),dFdy(localvpos)));\n  #else\n    #ifdef DOUBLESIDED\n      vec3 normal \x3d dot(vnormal, viewDir)\x3e0.0 ? -vnormal : vnormal;\n    #elif defined(WINDINGORDERDOUBLESIDED)\n      vec3 normal \x3d gl_FrontFacing ? vnormal : -vnormal;\n    #else\n      vec3 normal \x3d vnormal;\n    #endif\n    normal \x3d normalize(normal);\n  #endif\n#endif\n#ifdef USE_PBR\n    float roughness \x3d roughnessFactor;\n    float metalness \x3d metalnessFactor;\n  #ifdef PBR_TEX_METALLNESS_ROUGHNESS\n    vec3 metalicRoughness \x3d texture2D(texMetallicRoughness, vtc).rgb;\n    roughness *\x3d metalicRoughness.g ;\n    metalness *\x3d metalicRoughness.b ;\n  #endif\n    vec3 emission \x3d emissionFactor;\n  #ifdef PBR_TEX_EMISSION\n    emission *\x3d texture2D(texEmission, vtc).rgb;\n  #endif\n    float bakedOcclusion \x3d 1.0;\n  #ifdef PBR_TEX_OCCLUSION\n    bakedOcclusion *\x3d texture2D(texOcclusion, vtc).r;\n  #endif\n#endif\n#ifdef RECEIVE_SSAO\n  float ssao \x3d texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  ssao \x3d viewportPixelSz.z \x3c 0.0 ? 1.0 : ssao;\n#else\n  float ssao \x3d 1.0;\n#endif\n#ifdef USE_PBR\n  ssao *\x3d bakedOcclusion;\n#endif\n  float additionalAmbientScale;\n  vec3 additionalLight \x3d sceneLightingAdditionalLightGlobal(vpos + localOrigin, ssao, additionalAmbientScale);\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#elif VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  shadow \x3d lightingGlobalFactor * (1.0 - additionalAmbientScale);\n#endif\n  vec3 matColor \x3d max(ambient, diffuse);\n#if defined(VERTEXCOLORS)\n  vec3 albedo_ \x3d mixExternalColor(vcolor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(vcolor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n#else\n  vec3 albedo_ \x3d mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n#endif\n  #if defined(TEXTURE_NORMALS)\n    #ifdef VERTEX_TANGENTS\n      mat3 tangentSpace \x3d computeTangentSpace(normal);\n    #else\n      mat3 tangentSpace \x3d computeTangentSpace(normal, vpos, vtc);\n    #endif\n    vec3 shadingNormal \x3d computeTextureNormal(tangentSpace);\n  #else\n    vec3 shadingNormal \x3d normal;\n  #endif\n  #ifdef TREE_RENDERING\n    shadingNormal \x3d normalize(vnormal);\n    albedo_ *\x3d 1.2;\n    vec3 viewForward \x3d - vec3(view[0][2], view[1][2], view[2][2]);\n    float alignmentLightView \x3d clamp(dot(-viewForward, lightingMainDirection), 0.0, 1.0);\n    float transmittance \x3d 1.0 - clamp(dot(-viewForward, shadingNormal), 0.0, 1.0);\n    float treeRadialFalloff \x3d vcolor.r;\n    float backLightFactor \x3d 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n    additionalLight +\x3d backLightFactor * lightingMainIntensity;\n  #endif\n  #ifdef USE_PBR\n    vec3 normalGround \x3d normalize(vpos + localOrigin);\n    vec3 shadedColor \x3d evaluateSceneLightingPBR(shadingNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDir, normalGround, roughness, metalness, emission);\n  #else\n    vec3 shadedColor \x3d evaluateSceneLighting(shadingNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\n  #endif\n  gl_FragColor \x3d highlightSlice(vec4(shadedColor, opacity_), vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\n#define VERTEX_SHADER\n#include \x3cmaterials/defaultMaterial/vertexTangents.glsl\x3e\n#ifdef INSTANCEDCOLOR\nattribute vec4 instanceColor;\n#endif\nattribute vec3 position;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n  attribute vec2 normalCompressed;\n  varying vec3 vnormal;\n#elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  attribute vec3 normal;\n  varying vec3 vnormal;\n#endif\nvarying vec3 vpos;\nvarying vec3 localvpos;\n#ifdef TEXTURE_COORDINATES\n    attribute vec2 uv0;\n    varying vec2 vtc;\n  #ifdef TEXTURE_ATLAS\n    attribute vec4 region;\n    varying vec4 regionV;\n  #endif\n#endif\n#ifdef COMPONENTCOLORS\n#include \x3cmaterials/defaultMaterial/componentColors.glsl\x3e\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#ifdef VERTEXCOLORS\nattribute vec4 color;\n#endif\n#ifdef SYMBOLVERTEXCOLORS\nattribute vec4 symbolColor;\n#endif\n#if defined(VERTEXCOLORS)\nvarying vec4 vcolor;\n#endif\nuniform vec4 externalColor;\nvarying vec4 vcolorExt;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_SIZE) || defined(VV_COLOR)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/colorMixMode.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/constants.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localNormal.glsl\x3e\nvoid main() {\n#ifdef VERTEXCOLORS\n  vcolor \x3d color * 0.003921568627451;\n#endif\n  vcolorExt \x3d externalColor;\n#ifdef INSTANCEDCOLOR\n  vcolorExt *\x3d instanceColor;\n#endif\n#ifdef VV_COLOR\n  vcolorExt *\x3d vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n#endif\n#ifdef SYMBOLVERTEXCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n#ifdef COMPONENTCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(readComponentColor() * 255.0, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n  if (vcolorExt.a \x3c SYMBOL_ALPHA_CUTOFF) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n  }\n  else {\n    vpos \x3d calculateVPos();\n    localvpos \x3d vpos - view[3].xyz;\n#ifdef INSTANCED_DOUBLE_PRECISION\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize(modelNormal * localNormal().xyz);\n  #endif\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n  #ifdef IOS_SAFARI_FIX\n    originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n  #endif\n  vpos -\x3d originDelta;\n#else\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((modelNormal * localNormal()).xyz);\n  #endif\n#endif\n    #ifdef VERTICAL_OFFSET\n      vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n    #endif\n    #if defined(VERTEX_TANGENTS)\n      transformVertexTangent(mat3(modelNormal));\n    #endif\n    gl_Position \x3d proj * view * vec4(vpos, 1.0);\n  }\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n#ifdef TEXTURING\n  #ifndef FLIPV\n    vtc \x3d uv0;\n  #else\n    vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n  #endif\n  #ifdef TEXTURE_ATLAS\n    regionV \x3d region;\n  #endif\n#endif\n}",
"commonFunctions.glsl":"#include \x3cmaterials/defaultMaterial/localPosition.glsl\x3e\n#include \x3cutil/doublePrecision.glsl\x3e\nvec3 calculateVPos() {\n#ifdef INSTANCED_DOUBLE_PRECISION\n  return model * localPosition().xyz;\n#else\n  return (model * localPosition()).xyz;\n#endif\n}\n#ifdef VERTICAL_OFFSET\n#ifdef SCREEN_SIZE_PERSPECTIVE\n#include \x3cutil/screenSizePerspective.glsl\x3e\n#endif\nvec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n  float viewDistance \x3d length((view * vec4(worldPos, 1.0)).xyz);\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 worldNormal \x3d normalize(worldPos + localOrigin);\n#else\n  vec3 worldNormal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float cosAngle \x3d dot(worldNormal, normalize(worldPos - camPos));\n  float verticalOffsetScreenHeight \x3d screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);\n#else\n  float verticalOffsetScreenHeight \x3d verticalOffset.x;\n#endif\n  float worldOffset \x3d clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n  return worldNormal * worldOffset;\n}\n#endif",
"commonInputs.glsl":"uniform mat4 proj;\nuniform mat4 view;\n#ifdef INSTANCED_DOUBLE_PRECISION\nuniform vec3 viewOriginHi;\nuniform vec3 viewOriginLo;\n#endif\nuniform vec3 camPos;\nuniform vec3 localOrigin;\n#ifdef INSTANCED\n#ifdef INSTANCED_DOUBLE_PRECISION\nattribute vec3 modelOriginHi;\nattribute vec3 modelOriginLo;\nattribute mat3 model;\nattribute mat3 modelNormal;\n#else\nattribute mat4 model;\nattribute mat4 modelNormal;\n#endif\n#else\nuniform mat4 model;\nuniform mat4 modelNormal;\n#endif\n#ifdef VERTICAL_OFFSET\nuniform vec4 verticalOffset;\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspectiveAlignment;\n#endif\n#endif",
"componentColors.glsl":"uniform sampler2D uComponentColorTex;\nuniform vec2 uComponentColorTexInvDim;\nattribute float componentIndex;\nvec4 readComponentColor() {\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  vec4 componentColor \x3d texture2D(uComponentColorTex, indexCoord);\n  return vec4( componentColor.r, componentColor.g, componentColor.b - mod(componentColor.b*255.0, 2.0)/255.0, componentColor.a);\n}\nbool readComponentCastShadowsFlag(){\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  if( mod(texture2D(uComponentColorTex, indexCoord).b*255.0, 2.0) \x3c 1.0 )\n      return false;\n  return true;\n}",
"constants.glsl":"#define SYMBOL_ALPHA_CUTOFF 0.001","depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n  #ifndef BIAS_SHADOWMAP\n    gl_FragColor \x3d float2rgba(depth);\n  #else\n    gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n  #endif\n}",
"depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nuniform vec2 nearFar;\nattribute vec3 position;\nvarying float depth;\nvarying vec3 vpos;\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#if defined(COMPONENTCOLORS)\n#include \x3cmaterials/defaultMaterial/componentColors.glsl\x3e\n#endif\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#if defined(COMPONENTCOLORS)\n  if( !readComponentCastShadowsFlag() ){\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n  }else\n  {\n#endif\n#ifdef INSTANCED_DOUBLE_PRECISION\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n#ifdef IOS_SAFARI_FIX\n  originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n#endif\n  vpos -\x3d originDelta;\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n#if defined(COMPONENTCOLORS)\n  }\n#endif\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"highlightPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nattribute vec3 position;\nvarying vec3 vpos;\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#ifdef INSTANCED_DOUBLE_PRECISION\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n#ifdef IOS_SAFARI_FIX\n  originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n#endif\n  vpos -\x3d originDelta;\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"localCenter.glsl":"#ifdef VV_CUSTOM_MODEL_MATRIX\n# ifdef VERTICAL_OFFSET\nvec4 localCenter() { return vvTransformPosition(vec3(0.0), instanceFeatureAttribute); }\n# endif\n#else\n# ifdef VERTICAL_OFFSET\nvec4 localCenter() { return vec4(vec3(0.0), 1.0); }\n# endif\n#endif","localNormal.glsl":"#include \x3cutil/normalEncoding.glsl\x3e\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  # if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n    vec4 localNormal() { return vvTransformNormal(decodeNormal(normalCompressed), instanceFeatureAttribute); }\n  # elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vec4 localNormal() { return vvTransformNormal(normal, instanceFeatureAttribute); }\n  # endif\n#else\n  # if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n    vec4 localNormal() { return vec4(decodeNormal(normalCompressed), 1.0); }\n  # elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vec4 localNormal() { return vec4(normal, 1.0); }\n  # endif\n#endif",
"localPosition.glsl":"#ifdef VV_CUSTOM_MODEL_MATRIX\nvec4 localPosition() { return vvTransformPosition(position, instanceFeatureAttribute); }\n#else\nvec4 localPosition() { return vec4(position, 1.0); }\n#endif","normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  varying vec3 vnormal;\n#endif\nvarying vec3 vpos;\nvarying vec3 vPositionView;\n#if defined(TEXTURING)\n  #include \x3cmaterials/defaultMaterial/texturingInputs.glsl\x3e\n  #include \x3cmaterials/defaultMaterial/texturing.glsl\x3e\n#endif\nvoid main() {\n  discardBySlice(vpos);\n  #if defined(TEXTURING)\n    vec4 texColor \x3d textureLookup(tex, vtc);\n    discardOrAdjustTextureAlpha(texColor);\n  #endif\n#if (NORMALS \x3d\x3d NORMALS_SCREEN_DERIVATIVE)\n  vec3 normal \x3d normalize(cross(dFdx(vPositionView),dFdy(vPositionView)));\n#else\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#endif\n  #ifndef ALPHA_ZERO\n    gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n  #else\n    gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n  #endif\n}",
"normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/defaultMaterial/commonInputs.glsl\x3e\nuniform mat4 viewNormal;\nattribute vec3 position;\n#if (NORMALS \x3d\x3d NORMALS_COMPRESSED)\n  attribute vec2 normalCompressed;\n  varying vec3 vnormal;\n#elif (NORMALS \x3d\x3d NORMALS_DEFAULT)\n  attribute vec3 normal;\n  varying vec3 vnormal;\n#endif\n#ifdef TEXTURING\nattribute vec2 uv0;\nvarying vec2 vtc;\n#ifdef TEXTURE_ATLAS\nattribute vec4 region;\nvarying vec4 regionV;\n#endif\n#endif\nvarying vec3 vpos;\nvarying vec3 vPositionView;\n#include \x3cutil/visualVariables.glsl\x3e\n#if defined(VV_CUSTOM_MODEL_MATRIX)\nattribute vec4 instanceFeatureAttribute;\n#endif\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localCenter.glsl\x3e\n#include \x3cmaterials/defaultMaterial/localNormal.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n#ifdef INSTANCED_DOUBLE_PRECISION\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((viewNormal * vec4(modelNormal * localNormal().xyz, 1.0)).xyz);\n  #endif\n  vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n  #ifdef IOS_SAFARI_FIX\n    originDelta \x3d originDelta - fract(originDelta * 1000000.0) * (1.0 / 1000000.0);\n  #endif\n  vpos -\x3d originDelta;\n#else\n  #if (NORMALS \x3d\x3d NORMALS_COMPRESSED) || (NORMALS \x3d\x3d NORMALS_DEFAULT)\n    vnormal \x3d normalize((viewNormal * modelNormal * localNormal()).xyz);\n  #endif\n#endif\n  #ifdef VERTICAL_OFFSET\n    vpos +\x3d calculateVerticalOffset(vpos, localOrigin);\n  #endif\n  vPositionView \x3d (view * vec4(vpos, 1.0)).xyz;\n  gl_Position \x3d proj * vec4(vPositionView, 1.0);\n#ifdef TEXTURING\n#ifndef FLIPV\n  vtc \x3d uv0;\n#else\n  vtc \x3d vec2(uv0.x, 1.0-uv0.y);\n#endif\n#ifdef TEXTURE_ATLAS\n  regionV \x3d region;\n#endif\n#endif\n}",
"textureNormals.glsl":"#if defined(TEXTURE_NORMALS)\n  uniform sampler2D texNormal;\n  vec3 computeTextureNormal(mat3 tangentSpace) {\n    vec3 rawNormal \x3d texture2D(texNormal, vtc).rgb * 2.0 - 1.0;\n    return tangentSpace * rawNormal;\n  }\n#endif","texturing.glsl":"float calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\n  float deltaMaxSqr \x3d max(dot(ddx, ddx), dot(ddy, ddy));\n  return max(0.0, 0.5 * log2(deltaMaxSqr));\n}\nvec4 textureAtlasLookup(sampler2D tex, vec2 uv, vec4 region, vec2 texSize) {\n  vec2 atlasScale \x3d region.zw - region.xy;\n  vec2 uvAtlas \x3d fract(uv) * atlasScale + region.xy;\n  vec4 texColor;\n  vec2 dUVdx \x3d dFdx(uv) * atlasScale;\n  vec2 dUVdy \x3d dFdy(uv) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\n  return texture2DGradEXT(tex, uvAtlas, dUVdx, dUVdy);\n#else\n  vec2 dUVdxAuto \x3d dFdx(uvAtlas);\n  vec2 dUVdyAuto \x3d dFdy(uvAtlas);\n  float mipMapLevel \x3d calcMipMapLevel(dUVdx * texSize, dUVdy * texSize);\n  float autoMipMapLevel \x3d calcMipMapLevel(dUVdxAuto * texSize, dUVdyAuto * texSize);\n  return texture2D(tex, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}\nvec4 textureLookup(sampler2D tex, vec2 uv) {\n#ifdef TEXTURE_ATLAS\n  return textureAtlasLookup(tex, uv, regionV, texSize);\n#else\n  return texture2D(tex, uv);\n#endif\n}\nvoid discardOrAdjustTextureAlpha(inout vec4 texColor) {\n  #if defined(TEXTURE_ALPHA_MODE_MASK)\n    if (texColor.a \x3c textureAlphaCutoff) {\n      discard;\n    } else {\n      texColor.a \x3d 1.0;\n    }\n  #elif defined(TEXTURE_ALPHA_MODE_MASK_BLEND)\n    if (texColor.a \x3c textureAlphaCutoff) {\n      discard;\n    }\n  #elif defined(TEXTURE_ALPHA_MODE_OPAQUE)\n    texColor.a \x3d 1.0;\n  #else\n  #endif\n}",
"texturingInputs.glsl":"#ifdef TEXTURING\n  uniform sampler2D tex;\n  uniform vec2 texSize;\n  #if defined(TEXTURE_ALPHA_MODE_MASK) || defined(TEXTURE_ALPHA_MODE_MASK_BLEND)\n  uniform float textureAlphaCutoff;\n  #endif\n  #ifdef TEXTURE_ATLAS\n  varying vec4 regionV;\n  #endif\n#endif\n#if defined(TEXTURING) || defined(TEXTURE_COORDINATES)\nvarying vec2 vtc;\n#endif","vertexTangents.glsl":"#if defined(VERTEX_SHADER)\n  #if defined(VERTEX_TANGENTS)\n    attribute vec4 aTangent;\n    varying vec4 vTangent;\n    void transformVertexTangent(mat3 modelTransformForNormals) {\n      vTangent.xyz \x3d modelTransformForNormals * aTangent.xyz;\n      vTangent.w \x3d aTangent.w;\n    }\n  #endif\n#elif defined(FRAGMENT_SHADER)\n  #if defined(VERTEX_TANGENTS)\n    varying vec4 vTangent;\n    #if defined(WINDINGORDERDOUBLESIDED)\n      mat3 computeTangentSpace(vec3 normal) {\n        float tangentHeadedness \x3d gl_FrontFacing ? vTangent.w : -vTangent.w;\n        vec3 tangent \x3d normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\n        vec3 bitangent \x3d cross(normal, tangent) * tangentHeadedness;\n        return mat3(tangent, bitangent, normal);\n      }\n    #else\n      mat3 computeTangentSpace(vec3 normal) {\n        float tangentHeadedness \x3d vTangent.w;\n        vec3 tangent \x3d normalize(vTangent.xyz);\n        vec3 bitangent \x3d cross(normal, tangent) * tangentHeadedness;\n        return mat3(tangent, bitangent, normal);\n      }\n    #endif\n  #else\n    mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\n      vec3 Q1 \x3d dFdx(pos);\n      vec3 Q2 \x3d dFdy(pos);\n      vec2 stx \x3d dFdx(st);\n      vec2 sty \x3d dFdy(st);\n      vec3 T \x3d (sty.t * Q1 - stx.t * Q2) / (stx.s * sty.t - sty.s * stx.t);\n      T \x3d normalize(T - normal * dot(normal, T));\n      vec3 B \x3d normalize(cross(normal, T));\n      float det \x3d sty.t * stx.s - stx.t * sty.s;\n      if(det \x3e 0.0){\n        T *\x3d -1.0;\n      }\n      return mat3(T, B, normal);\n    }\n  #endif\n#endif"},
hud:{"colorPass.frag":"#include \x3cmaterials/hud/hudHeader.glsl\x3e\nvoid main() {\n#include \x3cmaterials/hud/hudMain.glsl\x3e\n}","highlightPass.frag":"#include \x3cmaterials/hud/hudHeader.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n#include \x3cmaterials/hud/hudMain.glsl\x3e\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\n  if (voccluded \x3d\x3d 1.0) {\n    gl_FragColor \x3d vec4(1.0, 1.0, 0.0, 1.0);\n  } else {\n    gl_FragColor \x3d vec4(1.0, 0.0, 1.0, 1.0);\n  }\n#else\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n#endif\n}",
"hud.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/visualVariables.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec2 screenOffset;\nuniform vec2 anchorPos;\nuniform vec2 textureCoordinateScaleFactor;\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\n#endif\n#ifdef DEBUG_DRAW_BORDER\nvarying vec4 debugBorderCoords;\n#endif\nattribute vec2 uv0;\nattribute vec4 color;\nattribute vec2 size;\nattribute vec4 auxpos2;\nvarying vec4 vcolor;\nvarying vec2 vtc;\nvarying vec2 vsize;\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvarying float voccluded;\n#endif\nvoid main(void) {\n  ProjectHUDAux projectAux;\n  vec4 posProj \x3d projectPositionHUD(projectAux);\n  if (rejectBySlice(projectAux.posModel)) {\n    gl_Position \x3d vec4(1e038, 1e038, 1e038, 1.0);\n    return;\n  }\n  vec2 inputSize;\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  inputSize \x3d screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n  vec2 screenOffsetScaled \x3d screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n#else\n  inputSize \x3d size;\n  vec2 screenOffsetScaled \x3d screenOffset;\n#endif\n#ifdef VV_SIZE\n  inputSize *\x3d vvGetScale(auxpos2).xx;\n#endif\n  vec2 combinedSize \x3d inputSize * pixelRatio;\n  vec4 quadOffset \x3d vec4(0.0);\n#if defined(OCCL_TEST) || defined(BINARY_HIGHLIGHT_OCCLUSION)\n  bool visible \x3d testVisibilityHUD(posProj);\n#endif\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvoccluded \x3d visible ? 0.0 : 1.0;\n#endif\n#ifdef OCCL_TEST\n  if (visible) {\n#endif\n    vec2 uv01 \x3d floor(uv0);\n    vec2 uv \x3d uv0 - uv01;\n    quadOffset.xy \x3d ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;\n#ifdef SIGNED_DISTANCE_FIELD\n    posProj \x3d alignToPixelOrigin(posProj, viewport.zw) + quadOffset;\n#else\n    posProj +\x3d quadOffset;\n    if (inputSize.x \x3d\x3d size.x) {\n      posProj \x3d alignToPixelOrigin(posProj, viewport.zw);\n    }\n#endif\n    gl_Position \x3d posProj;\n    vtc \x3d uv * textureCoordinateScaleFactor;\n#ifdef DEBUG_DRAW_BORDER\n    debugBorderCoords \x3d vec4(uv01, 1.5 / combinedSize);\n#endif\n    vsize \x3d inputSize;\n#ifdef OCCL_TEST\n  } else {\n    vtc \x3d vec2(.0);\n#ifdef DEBUG_DRAW_BORDER\n    debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);\n#endif\n  }\n#endif\n  gl_Position \x3d posProj;\n#ifdef VV_COLOR\n  vcolor \x3d vvGetColor(auxpos2, vvColorValues, vvColorColors);\n#else\n  vcolor \x3d color / 255.0;\n#endif\n}",
"hudHeader.glsl":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nuniform sampler2D tex;\nuniform vec4 overrideColor;\nuniform vec4 outlineColor;\nuniform float outlineSize;\nvarying vec4 vcolor;\nvarying vec2 vtc;\nvarying vec2 vsize;\n#ifdef BINARY_HIGHLIGHT_OCCLUSION\nvarying float voccluded;\n#endif\n#ifdef DEBUG_DRAW_BORDER\nvarying vec4 debugBorderCoords;\n#endif","hudMain.glsl":"#ifdef SIGNED_DISTANCE_FIELD\n  vec4 color \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 fillPixelColor \x3d overrideColor * vcolor;\n  const float txSize \x3d 128.0;\n  const float texelSize \x3d 1.0 / txSize;\n  vec2 scaleFactor \x3d (vsize - txSize) * texelSize;\n  vec2 samplePos \x3d vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n  float d \x3d rgba2float(texture2D(tex, samplePos)) - 0.5;\n  float dist \x3d d * vsize.x;\n  fillPixelColor.a *\x3d clamp(0.5 - dist, 0.0, 1.0);\n  if (outlineSize \x3e 0.25) {\n    vec4 outlinePixelColor \x3d outlineColor;\n    float clampedOutlineSize \x3d min(outlineSize, 0.5*vsize.x);\n    outlinePixelColor.a *\x3d clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n    float compositeAlpha \x3d outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n    vec3 compositeColor \x3d vec3(outlinePixelColor) * outlinePixelColor.a +\n      vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n    gl_FragColor \x3d vec4(compositeColor, compositeAlpha);\n  }\n  else {\n    gl_FragColor \x3d premultiplyAlpha(fillPixelColor);\n  }\n#else\n  gl_FragColor \x3d texture2D(tex, vtc, -0.5) * premultiplyAlpha(overrideColor * vcolor);\n#endif\n#ifdef DEBUG_DRAW_BORDER\n   float isBorder \x3d float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));\n   gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);\n#endif\n  if (gl_FragColor.a \x3c 0.1) {\n    discard;\n  }",
"occlusionTest.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}","occlusionTest.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvoid main(void) {\n  vec4 posProjCenter;\n  if (dot(position, position) \x3e 0.0) {\n    ProjectHUDAux projectAux;\n    vec4 posProj \x3d projectPositionHUD(projectAux);\n    posProjCenter \x3d alignToPixelCenter(posProj, viewport.zw);\n    vec3 vpos \x3d projectAux.posModel;\n    if (rejectBySlice(vpos)) {\n      posProjCenter \x3d vec4(1e038, 1e038, 1e038, 1.0);\n    }\n  }\n  else {\n    posProjCenter \x3d vec4(1e038, 1e038, 1e038, 1.0);\n  }\n  gl_Position \x3d posProjCenter;\n  gl_PointSize \x3d 1.0;\n}"},
lineCallout:{"lineCallout.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 color;\nuniform vec4 borderColor;\nvarying vec4 coverageSampling;\nvarying vec2 lineSizes;\nvoid main() {\n  vec2 coverage \x3d min(1.0 - clamp(abs(coverageSampling.xy) - coverageSampling.zw, 0.0, 1.0), lineSizes);\n  float borderAlpha \x3d color.a * borderColor.a * coverage.y;\n  float colorAlpha \x3d color.a * coverage.x;\n  float finalAlpha \x3d mix(borderAlpha, 1.0, colorAlpha);\n#ifdef DEPTH_HUD\n  if (finalAlpha \x3c 0.01) {\n    discard;\n  }\n#else\n  vec3 finalRgb \x3d mix(borderColor.rgb * borderAlpha, color.rgb, colorAlpha);\n  gl_FragColor \x3d vec4(finalRgb, finalAlpha);\n#endif\n}",
"lineCallout.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cutil/alignPixel.glsl\x3e\n#include \x3cutil/hud.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nattribute vec2 uv0;\nuniform float lineSize;\nuniform vec2 pixelToNDC;\nuniform float borderSize;\nuniform vec2 screenOffset;\nvarying vec4 coverageSampling;\nvarying vec2 lineSizes;\nvoid main(void) {\n  ProjectHUDAux projectAux;\n  vec4 endPoint \x3d projectPositionHUD(projectAux);\n  vec3 vpos \x3d projectAux.posModel;\n  if (rejectBySlice(vpos)) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n    return;\n  }\n#ifdef OCCL_TEST\n  if (!testVisibilityHUD(endPoint)) {\n    gl_Position \x3d vec4(1e38, 1e38, 1e38, 1.0);\n    return;\n  }\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n  vec2 screenOffsetScaled \x3d applyScreenSizePerspectiveScaleFactorVec2(screenOffset, perspectiveFactor);\n#else\n  vec2 screenOffsetScaled \x3d screenOffset;\n#endif\n  vec3 posView \x3d (view * (model * vec4(position, 1.0))).xyz;\n  applyHUDViewDependentPolygonOffset(auxpos1.w, projectAux.absCosAngle, posView);\n  vec4 startPoint \x3d proj * vec4(posView, 1.0);\n  vec2 screenOffsetNorm \x3d screenOffsetScaled * 2.0 / viewport.zw;\n  startPoint.xy +\x3d screenOffsetNorm * startPoint.w;\n  endPoint.xy +\x3d screenOffsetNorm * endPoint.w;\n  vec4 startAligned \x3d alignToPixelOrigin(startPoint, viewport.zw);\n  vec4 endAligned \x3d alignToPixelOrigin(endPoint, viewport.zw);\n#ifdef DEPTH_HUD\n#ifdef DEPTH_HUD_ALIGN_START\n  endAligned \x3d vec4(endAligned.xy / endAligned.w * startAligned.w, startAligned.zw);\n#else\n  startAligned \x3d vec4(startAligned.xy / startAligned.w * endAligned.w, endAligned.zw);\n#endif\n#endif\n  vec4 projectedPosition \x3d mix(startAligned, endAligned, uv0.y);\n  vec2 screenSpaceDirection \x3d normalize(endAligned.xy / endAligned.w - startAligned.xy / startAligned.w);\n  vec2 perpendicularScreenSpaceDirection \x3d vec2(screenSpaceDirection.y, -screenSpaceDirection.x);\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float lineSizeScaled \x3d applyScreenSizePerspectiveScaleFactorFloat(lineSize, perspectiveFactor);\n  float borderSizeScaled \x3d applyScreenSizePerspectiveScaleFactorFloat(borderSize, perspectiveFactor);\n#else\n  float lineSizeScaled \x3d lineSize;\n  float borderSizeScaled \x3d borderSize;\n#endif\n  float halfPixelSize \x3d lineSizeScaled * 0.5;\n  float halfWholePixelSize \x3d floor(lineSizeScaled) * 0.5;\n  float halfPixelSizeInt \x3d floor(halfWholePixelSize);\n  float subpixelOffset \x3d -fract(lineSizeScaled) * float(halfWholePixelSize \x3e 0.0);\n  float pixelOffset \x3d -halfPixelSizeInt + subpixelOffset;\n  float padding \x3d 1.0 + borderSizeScaled;\n  vec2 ndcOffset \x3d (pixelOffset - padding + uv0.x * (lineSizeScaled + padding + padding)) * pixelToNDC;\n  projectedPosition.xy +\x3d perpendicularScreenSpaceDirection * ndcOffset * projectedPosition.w;\n  float edgeDirection \x3d (uv0.x * 2.0 - 1.0);\n  float halfBorderSize \x3d 0.5 * borderSizeScaled;\n  float halfPixelSizeAndBorder \x3d halfPixelSize + halfBorderSize;\n  float outerEdgeCoverageSampler \x3d edgeDirection * (halfPixelSizeAndBorder + halfBorderSize + 1.0);\n  float isOneSided \x3d float(lineSizeScaled \x3c 2.0 \x26\x26 borderSize \x3c 2.0);\n  coverageSampling \x3d vec4(\n    outerEdgeCoverageSampler,\n    outerEdgeCoverageSampler - halfPixelSizeAndBorder * isOneSided,\n    halfPixelSize - 0.5,\n    halfBorderSize - 0.5 + halfPixelSizeAndBorder * (1.0 - isOneSided)\n  );\n  lineSizes \x3d vec2(lineSizeScaled, borderSizeScaled);\n  gl_Position \x3d projectedPosition;\n}"},
measurementArrow:{"measurementArrow.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform float outlineSize;\nuniform vec4 outlineColor;\nuniform float stripeLength;\nuniform vec4 stripeEvenColor;\nuniform vec4 stripeOddColor;\nvarying vec2 vtc;\nvarying float vlength;\nvarying float vradius;\n#define INV_SQRT2 (1.0 / sqrt(2.0))\nvec4 arrowColor(vec2 tc, float len) {\n  float d \x3d INV_SQRT2 * (tc.x - abs(tc.y));\n  d \x3d min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n  d \x3d min(d, 1.0 - abs(tc.y));\n  if (d \x3c 0.0) {\n    return vec4(0.0);\n  } else if (d \x3c outlineSize) {\n    return outlineColor;\n  } else {\n    return fract(0.5 / stripeLength * tc.x * vradius) \x3e\x3d 0.5 ? stripeOddColor : stripeEvenColor;\n  }\n}\nvoid main(void) {\n  vec2 ntc \x3d vec2(vtc.x / vradius, vtc.y);\n  vec4 color \x3d arrowColor(ntc, vlength / vradius);\n  if (color.a \x3d\x3d 0.0) {\n    discard;\n  }\n  gl_FragColor \x3d color;\n}",
"measurementArrow.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform float width;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv0;\nattribute float auxpos1;\nvarying vec2 vtc;\nvarying float vlength;\nvarying float vradius;\nvoid main(void) {\n  vec3 bitangent \x3d normal;\n  vtc \x3d uv0;\n  vlength \x3d auxpos1;\n  vradius \x3d 0.5 * width;\n  vec4 pos \x3d view * vec4((model * vec4(position + vradius * bitangent * uv0.y, 1.0)).xyz, 1.0);\n  gl_Position \x3d proj * pos;\n}"},
nativeLine:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 constantColor;\nvarying vec3 vpos;\n#ifdef VERTEXCOLORS\nvarying vec4 vcolor;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef VERTEXCOLORS\n  gl_FragColor \x3d highlightSlice(vcolor, vpos);\n#else\n  gl_FragColor \x3d highlightSlice(constantColor, vpos);\n#endif\n}","highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n  discardBySlice(vpos);\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"nativeLine.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\n#ifdef VERTEXCOLORS\nattribute vec4 color;\n#endif\nvarying vec3 vpos;\n#ifdef VERTEXCOLORS\nvarying vec4 vcolor;\n#endif\nvoid main(void) {\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  #ifdef VERTEXCOLORS\n    vcolor \x3d color * 0.003921568627451;\n  #endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}"},pathMaterial:{"colorMixMode.glsl":"#include \x3cutil/color.glsl\x3e\nvec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n  float symbolAlpha \x3d 0.0;\n  const float maxTint \x3d 85.0;\n  const float maxReplace \x3d 170.0;\n  const float scaleAlpha \x3d 3.0;\n  if (symbolColor.a \x3d\x3d 0.0) {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d 0.0;\n  }\n  else if (symbolColor.a \x3c\x3d maxTint) {\n    colorMixMode \x3d 0;\n    symbolAlpha \x3d scaleAlpha * symbolColor.a;\n  }\n  else if (symbolColor.a \x3c\x3d maxReplace) {\n    colorMixMode \x3d 3;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxTint);\n  }\n  else {\n    colorMixMode \x3d 1;\n    symbolAlpha \x3d scaleAlpha * (symbolColor.a - maxReplace);\n  }\n  return vec4(symbolColor.rgb, symbolAlpha);\n}\nvec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n  vec3 internalMixed \x3d internalColor * textureColor;\n  vec3 allMixed \x3d internalMixed * externalColor;\n  if (mode \x3d\x3d 1 ) {\n    return allMixed;\n  }\n  else if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalColor;\n  }\n  else {\n    vec3 hsvIn \x3d rgb2hsv(internalMixed);\n    vec3 hsvTint \x3d rgb2hsv(externalColor);\n    vec3 hsvOut \x3d vec3(hsvTint.x, hsvTint.y, hsvIn.z * hsvTint.z);\n    return hsv2rgb(hsvOut);\n  }\n}\nfloat mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n  float internalMixed \x3d internalOpacity * textureOpacity;\n  float allMixed \x3d internalMixed * externalOpacity;\n  if (mode \x3d\x3d 2  ) {\n    return internalMixed;\n  }\n  else if (mode \x3d\x3d 3  ) {\n    return externalOpacity;\n  }\n  else {\n    return allMixed;\n  }\n}",
"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float opacity;\nuniform float layerOpacity;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#else\nuniform int colorMixMode;\n#endif\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\n#endif\n#ifdef RECEIVE_SSAO\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\n#endif\nvarying vec3 vpos;\nvarying vec3 vnormal;\nvarying vec4 vcolor;\nvarying vec4 vcolorExt;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#include \x3cmaterials/pathMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  discardBySlice(vpos);\n  vec4 texColor \x3d vec4(1.0);\n  vec3 viewDir \x3d vpos - camPos;\n#ifdef GROUND_NORMAL_SHADING\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 normal \x3d normalize(vpos + localOrigin);\n#else\n  vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n#else\n#ifdef DOUBLESIDED\n  vec3 normal \x3d dot(vnormal, viewDir)\x3e0.0 ? -vnormal : vnormal;\n#elif defined(WINDINGORDERDOUBLESIDED)\n  vec3 normal \x3d gl_FrontFacing ? vnormal : -vnormal;\n#else\n  vec3 normal \x3d vnormal;\n#endif\n  normal \x3d normalize(normal);\n#endif\n#ifdef RECEIVE_SSAO\n  float ssao \x3d texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  ssao \x3d viewportPixelSz.z \x3c 0.0 ? 1.0 : ssao;\n#else\n  float ssao \x3d 1.0;\n#endif\n  float additionalAmbientScale;\n  vec3 additionalLight \x3d sceneLightingAdditionalLightGlobal(vpos + localOrigin, ssao, additionalAmbientScale);\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#elif VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  shadow \x3d lightingGlobalFactor * (1.0 - additionalAmbientScale);\n#endif\n  vec3 matColor \x3d max(ambient, diffuse);\n  vec3 albedo_ \x3d mixExternalColor(vcolor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n  float opacity_ \x3d layerOpacity * mixExternalOpacity(vcolor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n  albedo_+\x3d 0.25 * specular;\n#ifdef TRANSPARENCY_DISCARD\n  if (opacity_ \x3c 0.001) {\n    discard;\n  }\n#endif\n  vec3 shadedColor \x3d evaluateSceneLighting(normal, albedo_, shadow, 1.0 - ssao, additionalLight);\n  gl_FragColor \x3d vec4(shadedColor, opacity_);\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\n#ifdef COMPRESSED_NORMALS\nattribute vec2 normalCompressed;\n#else\nattribute vec3 normal;\n#endif\nvarying vec3 vpos;\nvarying vec3 vnormal;\n#ifdef COMPONENTCOLORS\nuniform sampler2D uComponentColorTex;\nuniform vec2 uComponentColorTexInvDim;\nattribute float componentIndex;\nvec4 readComponentColor() {\n  float normalizedIndex \x3d (componentIndex + 0.5) * uComponentColorTexInvDim.x;\n  vec2 indexCoord \x3d vec2(\n    mod(normalizedIndex, 1.0),\n    (floor(normalizedIndex) + 0.5) * uComponentColorTexInvDim.y\n  );\n  return texture2D(uComponentColorTex, indexCoord);\n}\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#ifdef SYMBOLVERTEXCOLORS\nattribute vec4 symbolColor;\n#endif\nuniform vec4 externalColor;\nvarying vec4 vcolor;\nvarying vec4 vcolorExt;\n#if defined(SYMBOLVERTEXCOLORS) || defined(COMPONENTCOLORS)\nvarying mediump float colorMixMode;\n#endif\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/pathMaterial/localNormal.glsl\x3e\n#include \x3cmaterials/pathMaterial/colorMixMode.glsl\x3e\nvoid main() {\n  vpos \x3d calculateVPos();\n  vnormal \x3d normalize((modelNormal * localNormal()).xyz);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n  vcolorExt \x3d externalColor;\n  vcolor \x3d getColor();\n#ifdef SYMBOLVERTEXCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n#ifdef COMPONENTCOLORS\n  int symbolColorMixMode;\n  vcolorExt *\x3d decodeSymbolColor(readComponentColor() * 255.0, symbolColorMixMode) * 0.003921568627451;\n  colorMixMode \x3d float(symbolColorMixMode) + 0.5;\n#endif\n}",
"commonFunctions.glsl":"#include \x3cutil/doublePrecision.glsl\x3e\nattribute vec4 featureValue;\nbool isCapVertex() {\n  return featureValue.w \x3d\x3d 1.0;\n}\nuniform vec3 size;\n#if defined(VV_SIZE)\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n  vec3 getSize() {\n    float value \x3d featureValue.x;\n    return size*clamp(vvSizeOffset + value * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).xzy;\n  }\n#else\n  vec3 getSize(){\n    return size;\n  }\n#endif\n#ifdef VV_OPACITY\n  #define VV_OPACITY_N 8\n  uniform float vvOpacityValues[VV_OPACITY_N];\n  uniform float vvOpacityOpacities[VV_OPACITY_N];\n  vec4 applyOpacity(vec4 color) {\n    float value \x3d featureValue.z;\n    if (value \x3c\x3d vvOpacityValues[0]) {\n      return vec4( color.xyz, vvOpacityOpacities[0]);\n    }\n    for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n      if (vvOpacityValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n        return vec4( color.xyz, mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f));\n      }\n    }\n    return vec4( color.xyz, vvOpacityOpacities[VV_OPACITY_N - 1]);\n  }\n#else\n  vec4 applyOpacity(vec4 color){\n    return color;\n  }\n#endif\n#ifdef VV_COLOR\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n  vec4 getColor() {\n    float value \x3d featureValue.y;\n    if (value \x3c\x3d vvColorValues[0]) {\n      return applyOpacity(vvColorColors[0]);\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (vvColorValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n        return applyOpacity(mix(vvColorColors[i-1], vvColorColors[i], f));\n      }\n    }\n    return applyOpacity(vvColorColors[VV_COLOR_N - 1]);\n  }\n#else\n  vec4 getColor(){\n    return applyOpacity(vec4(1, 1, 1, 1));\n  }\n#endif\nvec3 calculateVPos() {\n  vec3 size \x3d getSize();\n  vec3 origin \x3d position;\n  vec3 profileRightAxis \x3d pathGeometryInfo[0].xyz;\n  vec3 profileUpAxis \x3d pathGeometryInfo[1].xyz;\n  vec3 offset \x3d profileRightAxis * size.x + profileUpAxis * size.y;\n  if(!isCapVertex()) {\n    vec3 rotationRightAxis \x3d pathGeometryInfo[2].xyz;\n    float maxDistance \x3d length(rotationRightAxis);\n    rotationRightAxis \x3d normalize(rotationRightAxis);\n    float rx \x3d dot(offset, rotationRightAxis);\n    if( abs(rx) \x3e maxDistance ) {\n      vec3 rotationUpAxis \x3d offset - rx*rotationRightAxis;\n      offset \x3d rotationRightAxis * maxDistance * sign(rx) + rotationUpAxis;\n    }\n  } else {\n    vec3 profilePlaneOffset \x3d pathGeometryInfo[2].xyz*size.x;\n    offset +\x3d profilePlaneOffset;\n  }\n  vec4 localPosition \x3d vec4(origin + offset, 1.0);\n  return (model * localPosition).xyz;\n}",
"commonInputs.glsl":"uniform mat4 proj;\nuniform mat4 view;\nuniform vec3 camPos;\nuniform vec3 localOrigin;\nuniform mat4 model;\nuniform mat4 modelNormal;\nattribute vec3 position;\nattribute mat3 pathGeometryInfo;","depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n#ifndef BIAS_SHADOWMAP\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n#endif\n}",
"depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nuniform vec2 nearFar;\nvarying float depth;\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n}","highlightPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\nvarying vec3 vpos;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvoid main() {\n  discardBySlice(vpos);\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}","localNormal.glsl":"#include \x3cutil/normalEncoding.glsl\x3e\n# ifdef COMPRESSED_NORMALS\nvec4 localNormal() { return vec4(decodeNormal(normalCompressed), 1.0); }\n# else\nvec4 localNormal() { return vec4(normal, 1.0); }\n# endif",
"normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main() {\n  discardBySlice(vpos);\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#ifndef ALPHA_ZERO\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n#else\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n#endif\n}","normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/pathMaterial/commonInputs.glsl\x3e\nuniform mat4 viewNormal;\n#ifdef COMPRESSED_NORMALS\nattribute vec2 normalCompressed;\n#else\nattribute vec3 normal;\n#endif\nvarying vec3 vnormal;\nvarying vec3 vpos;\n#include \x3cmaterials/pathMaterial/commonFunctions.glsl\x3e\n#include \x3cmaterials/pathMaterial/localNormal.glsl\x3e\nvoid main(void) {\n  vpos \x3d calculateVPos();\n  vnormal \x3d normalize((viewNormal * modelNormal * localNormal()).xyz);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}",
"texturing.glsl":"float calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\n  float deltaMaxSqr \x3d max(dot(ddx, ddx), dot(ddy, ddy));\n  return max(0.0, 0.5 * log2(deltaMaxSqr));\n}\nvec4 textureAtlasLookup(sampler2D tex, vec2 uv, vec4 region, vec2 texSize) {\n  vec2 atlasScale \x3d region.zw - region.xy;\n  vec2 uvAtlas \x3d fract(uv) * atlasScale + region.xy;\n  vec2 dUVdx \x3d dFdx(uv) * atlasScale;\n  vec2 dUVdy \x3d dFdy(uv) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\n  return texture2DGradEXT(tex, uvAtlas, dUVdx, dUVdy);\n#else\n  vec2 dUVdxAuto \x3d dFdx(uvAtlas);\n  vec2 dUVdyAuto \x3d dFdy(uvAtlas);\n  float mipMapLevel \x3d calcMipMapLevel(dUVdx * texSize, dUVdy * texSize);\n  float autoMipMapLevel \x3d calcMipMapLevel(dUVdxAuto * texSize, dUVdyAuto * texSize);\n  return texture2D(tex, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}\nvec4 textureLookup(sampler2D tex, vec2 uv) {\n#ifdef TEXTURE_ATLAS\n  return textureAtlasLookup(tex, uv, regionV, texSize);\n#else\n  return texture2D(tex, uv);\n#endif\n}"},
ribbonLine:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform vec4 symbolColor;\nvarying vec4 vColor;\nvarying vec2 vtc;\nvarying vec3 vpos;\n#ifdef STIPPLE\nuniform float stippleLengthDoubleInv;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef STIPPLE\n  if (fract(vtc.x * stippleLengthDoubleInv) \x3e 0.5) {\n    discard;\n  }\n#endif\n  gl_FragColor \x3d highlightSlice(symbolColor * vColor, vpos);\n}",
"highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nvarying vec2 vtc;\nvarying vec3 vpos;\n#ifdef STIPPLE\nuniform float stippleLengthDoubleInv;\n#endif\nvoid main() {\n  discardBySlice(vpos);\n#ifdef STIPPLE\n  if (fract(vtc.x * stippleLengthDoubleInv) \x3e 0.5) {\n    discard;\n  }\n#endif\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}","inputs.glsl":"uniform float symbolLineWidth;\n#ifdef VV_SIZE\n  attribute float sizeFeatureAttribute;\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n  float getSize() {\n    float value \x3d sizeFeatureAttribute;\n    return symbolLineWidth * clamp(vvSizeOffset + value * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n  }\n#else\n  attribute float size;\n  float getSize(){\n    return symbolLineWidth * size;\n  }\n#endif\n#ifdef VV_OPACITY\n  attribute float opacityFeatureAttribute;\n  #define VV_OPACITY_N 8\n  uniform float vvOpacityValues[VV_OPACITY_N];\n  uniform float vvOpacityOpacities[VV_OPACITY_N];\n  float interpolateOpacity( float value ){\n    if (value \x3c\x3d vvOpacityValues[0]) {\n      return vvOpacityOpacities[0];\n    }\n    for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\n      if (vvOpacityValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n        return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n      }\n    }\n    return vvOpacityOpacities[VV_OPACITY_N - 1];\n  }\n  vec4 applyOpacity( vec4 color ){\n    return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n  }\n#else\n  vec4 applyOpacity( vec4 color ){\n    return color;\n  }\n#endif\n#ifdef VV_COLOR\n  attribute float colorFeatureAttribute;\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n  vec4 interpolateColor( float value ) {\n    if (value \x3c\x3d vvColorValues[0]) {\n      return vvColorColors[0];\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (vvColorValues[i] \x3e\x3d value) {\n        float f \x3d (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n        return mix(vvColorColors[i-1], vvColorColors[i], f);\n      }\n    }\n    return vvColorColors[VV_COLOR_N - 1];\n  }\n  vec4 getColor(){\n    return applyOpacity(interpolateColor(colorFeatureAttribute));\n  }\n#else\n  attribute vec4 color;\n  vec4 getColor(){\n    return applyOpacity(color);\n  }\n#endif",
"ribbonLine.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/ribbonLine/inputs.glsl\x3e\nconst float PI \x3d 3.1415926535897932384626433832795;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform float nearPlane;\nuniform float pixelRatio;\nattribute vec3 position;\nattribute float subdivisionFactor;\nattribute vec2 uv0;\nvarying vec2 vtc;\nvarying vec4 vColor;\nvarying vec3 vpos;\nuniform float miterLimit;\nattribute vec3 auxpos1;\nattribute vec3 auxpos2;\nuniform vec2 screenSize;\nvec4 toScreenCoords(vec3 vertex) {\n  vec4 vClipSpace \x3d proj * view * vec4((model * vec4(vertex, 1.0)).xyz, 1.0);\n  vClipSpace.xy *\x3d screenSize;\n  return vClipSpace/abs(vClipSpace.w);\n}\n#define PERPENDICULAR(v) vec2(v.y, -v.x);\n#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y \x3e 0.0\nfloat interp(float ncp, vec4 a, vec4 b) {\n  return (-ncp - a.z) / (b.z - a.z);\n}\nvec2 rotate(vec2 v, float a) {\n\tfloat s \x3d sin(a);\n\tfloat c \x3d cos(a);\n\tmat2 m \x3d mat2(c, -s, s, c);\n\treturn m * v;\n}\nvoid clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n  float vnp \x3d nearPlane*0.99;\n  if(pos.z \x3e -nearPlane) {\n    if (!isStartVertex) {\n      if(prev.z \x3c -nearPlane) {\n        pos \x3d mix(prev, pos, interp(vnp, prev, pos));\n        next \x3d pos;\n      } else {\n        pos \x3d vec4(0.0, 0.0, 0.0, 1.0);\n      }\n    }\n    if(isStartVertex) {\n      if(next.z \x3c -nearPlane) {\n        pos \x3d mix(pos, next, interp(vnp, pos, next));\n        prev \x3d pos;\n      } else {\n        pos \x3d vec4(0.0, 0.0, 0.0, 1.0);\n      }\n    }\n  } else {\n    if (prev.z \x3e -nearPlane) {\n      prev \x3d mix(pos, prev, interp(vnp, pos, prev));\n    }\n    if (next.z \x3e -nearPlane) {\n      next \x3d mix(next, pos, interp(vnp, next, pos));\n    }\n  }\n  pos\x3d proj * pos;\n  pos.xy *\x3d screenSize;\n  pos /\x3d pos.w;\n  next \x3d proj * next;\n  next.xy *\x3d screenSize;\n  next /\x3d next.w;\n  prev \x3d proj * prev;\n  prev.xy *\x3d screenSize;\n  prev /\x3d prev.w;\n}\nvoid main(void) {\n  vpos \x3d (model * vec4(position, 1.0)).xyz;\n  if (uv0.y \x3d\x3d 0.0) {\n    gl_Position \x3d vec4(1e038, 1e038, 1e038, 1.0);\n  }\n  else {\n    bool isStartVertex \x3d abs(abs(uv0.y)-3.0) \x3d\x3d 1.0;\n    bool isJoin \x3d abs(uv0.y)-3.0 \x3c 0.0;\n    float lineWidth \x3d getSize() * pixelRatio;\n    vec4 pos  \x3d view * vec4((model * vec4(position.xyz, 1.0)).xyz, 1.0);\n    vec4 prev \x3d view * vec4((model * vec4(auxpos1.xyz, 1.0)).xyz, 1.0);\n    vec4 next \x3d view * vec4((model * vec4(auxpos2.xyz, 1.0)).xyz, 1.0);\n    clipAndTransform(pos, prev, next, isStartVertex);\n    vec2 left \x3d (pos - prev).xy;\n    vec2 right \x3d (next - pos).xy;\n    float leftLen \x3d length(left);\n    left \x3d (leftLen \x3e 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    float rightLen \x3d length(right);\n    right \x3d (rightLen \x3e 0.001) ? right/rightLen : vec2(0.0, 0.0);\n    vec2 capDisplacementDir \x3d vec2(0, 0);\n    vec2 joinDisplacementDir \x3d vec2(0, 0);\n    float displacementLen \x3d lineWidth;\n    if( isJoin ){\n      bool isOutside \x3d ISOUTSIDE;\n      joinDisplacementDir \x3d normalize(left + right);\n      joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n      if (leftLen \x3e 0.001 \x26\x26 rightLen \x3e 0.001) {\n        float nDotSeg \x3d dot(joinDisplacementDir, left);\n        displacementLen /\x3d length(nDotSeg*left - joinDisplacementDir);\n        if (!isOutside) {\n          displacementLen \x3d min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n      if (isOutside \x26\x26 (displacementLen \x3e miterLimit*lineWidth)) {\n#ifdef JOIN_ROUND\n        vec2 startDir;\n        vec2 endDir;\n        if (leftLen \x3c 0.001) {\n          startDir \x3d right;\n        }\n        else{\n          startDir \x3d left;\n        }\n        startDir \x3d normalize(startDir);\n        startDir \x3d PERPENDICULAR(startDir);\n        if (rightLen \x3c 0.001) {\n          endDir \x3d left;\n        }\n        else{\n          endDir \x3d right;\n        }\n        endDir \x3d normalize(endDir);\n        endDir \x3d PERPENDICULAR(endDir);\n        float rotationAngle \x3d acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir \x3d rotate( startDir, -sign(uv0.y)*subdivisionFactor*rotationAngle );\n        displacementLen \x3d lineWidth;\n#else\n        if (leftLen \x3c 0.001) {\n          joinDisplacementDir \x3d right;\n        }\n        else if (rightLen \x3c 0.001) {\n          joinDisplacementDir \x3d left;\n        }\n        else {\n          joinDisplacementDir \x3d isStartVertex ? right : left;\n        }\n        joinDisplacementDir \x3d normalize(joinDisplacementDir);\n        joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n        displacementLen \x3d lineWidth;\n#endif\n      }\n    } else {\n      if (leftLen \x3c 0.001) {\n        joinDisplacementDir \x3d right;\n      }\n      else if (rightLen \x3c 0.001) {\n        joinDisplacementDir \x3d left;\n      }\n      else {\n        joinDisplacementDir \x3d isStartVertex ? right : left;\n      }\n      joinDisplacementDir \x3d normalize(joinDisplacementDir);\n      joinDisplacementDir \x3d PERPENDICULAR(joinDisplacementDir);\n      displacementLen \x3d lineWidth;\n      capDisplacementDir \x3d isStartVertex ? -right : left;\n  #ifdef CAP_ROUND\n      float angle \x3d subdivisionFactor*PI*0.5;\n      joinDisplacementDir *\x3d cos(angle);\n      capDisplacementDir *\x3d sin(angle);\n  #else\n      capDisplacementDir *\x3d subdivisionFactor;\n  #endif\n    }\n    pos.xy +\x3d joinDisplacementDir * sign(uv0.y) * displacementLen;\n    pos.xy +\x3d capDisplacementDir * displacementLen;\n    pos.xy /\x3d screenSize;\n    vtc \x3d uv0;\n    vColor \x3d getColor();\n    gl_Position \x3d pos;\n  }\n}"},
slicePlane:{"slicePlane.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 backgroundColor;\nuniform vec4 gridColor;\nuniform float ratio;\nuniform float gridWidth;\nvarying vec2 vUV;\nvoid main() {\n  const float LINE_WIDTH \x3d 1.0;\n  vec2 uvScaled \x3d vUV * gridWidth;\n  vec2 gridUV \x3d (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\n  vec2 grid \x3d (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\n  grid.x *\x3d step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\n  grid.y *\x3d step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\n  float gridFade \x3d max(grid.x, grid.y);\n  float gridAlpha \x3d gridColor.a * gridFade;\n  gl_FragColor \x3d\n    vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\n    vec4(gridColor.rgb, 1.0) * gridAlpha;\n}",
"slicePlane.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vUV;\nvoid main(void) {\n  vUV \x3d uv0;\n  gl_Position \x3d proj * view * vec4((model * vec4(position, 1.0)).xyz, 1.0);\n}"},water:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D texWaveNormal;\nuniform sampler2D texWavePerturbation;\n#include \x3cmaterials/water/waterDistortion.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#ifdef RECEIVE_SHADOWS\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\nvarying float linearDepth;\n#include \x3cutil/shadow.glsl\x3e\n#endif\n#include \x3cmaterials/water/waterSurface.glsl\x3e\nuniform vec4 waterColor;\nuniform vec3 lightingMainDirection;\nuniform int shadowsEnabled;\nuniform vec3 camPos;\nuniform float timeElapsed;\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvarying vec3 normalOut;\nvarying mat3 tbnMatrix;\nvoid main() {\n  discardBySlice(posOut);\n  vec3 localUp \x3d normalOut;\n  vec2 uv \x3d uvOut;\n  vec3 tangentNormal \x3d getSurfaceNormal(uv, timeElapsed);\n  vec3 n \x3d normalize(tbnMatrix * tangentNormal);\n  vec3 v \x3d -normalize(posOut - camPos);\n  vec3 l \x3d normalize(-lightingMainDirection);\n  float shadow \x3d 1.0;\n#ifdef RECEIVE_SHADOWS\n  if(shadowsEnabled \x3d\x3d 1) {\n    shadow \x3d 1.0 - evalShadow(posOut, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n  }\n#endif\n  vec4 final \x3d vec4(getSeaColor(n, v, l, waterColor.rgb, localUp, shadow), waterColor.w);\n  gl_FragColor \x3d vec4(pow(final.rgb, vec3( 1.0 / 2.2)), final.w);\n  gl_FragColor \x3d highlightSlice(gl_FragColor, posOut);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\nattribute vec2 uv0;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvarying vec3 normalOut;\nvarying mat3 tbnMatrix;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\nvoid main(void) {\n  uvOut \x3d uv0;\n  posOut \x3d calculateVPos();\n  normalOut \x3d getLocalUp(posOut, localOrigin);\n  tbnMatrix \x3d getTBNMatrix(normalOut);\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n  #ifdef RECEIVE_SHADOWS\n    linearDepth \x3d gl_Position.w;\n  #endif\n}",
"drapedColorPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform vec4 waterColor;\nvoid main() {\n  gl_FragColor \x3d waterColor;\n}","drapedColorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec3 posOut;\nvoid main(void) {\n  posOut \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n}",
"normalPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D texWaveNormal;\nuniform sampler2D texWavePerturbation;\n#include \x3cmaterials/water/waterDistortion.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\nuniform float timeElapsed;\nvarying vec2 uvOut;\nvarying vec3 posOut;\nvoid main() {\n  discardBySlice(posOut);\n  vec2 uv \x3d uvOut;\n  vec3 tangentNormal \x3d getSurfaceNormal(uv, timeElapsed);\n  tangentNormal \x3d normalize(tangentNormal);\n  gl_FragColor \x3d vec4((tangentNormal + vec3(1.0)) * 0.5, 0.0);\n}",
"normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 model;\nuniform vec3 localOrigin;\nattribute vec3 position;\nattribute vec2 uv0;\n#include \x3cmaterials/defaultMaterial/commonFunctions.glsl\x3e\nvarying vec3 posOut;\nvarying vec2 uvOut;\nvoid main(void) {\n  uvOut \x3d uv0;\n  posOut \x3d calculateVPos();\n  gl_Position \x3d proj * view * vec4(posOut.xyz, 1.0);\n}","normalsUtils.glsl":"vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    return normalize(pos + origin);\n  #else\n    return vec3(0.0, 0.0, 1.0);\n  #endif\n}\nmat3 getTBNMatrix(in vec3 n) {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 t \x3d normalize(cross(vec3(0.0, 0.0, 1.0), n));\n    vec3 b \x3d normalize(cross(n, t));\n    return mat3(t, b, n);\n  #else\n    vec3 t \x3d vec3(1.0, 0.0, 0.0);\n    vec3 b \x3d normalize(cross(n, t));\n    return mat3(t, b, n);\n  #endif\n}",
"waterDistortion.glsl":"uniform vec3 octaveTextureRepeat;\nuniform vec4 waveParams;\nuniform vec2 waveDirection;\nconst vec2  FLOW_JUMP \x3d vec2(6.0/25.0, 5.0/24.0);\nvec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\n  return 2.0 * texture2D(_tex, _uv).rg - 1.0;\n}\nfloat sampleNoiseTexture(vec2 _uv) {\n  return texture2D(texWavePerturbation, _uv).b;\n}\nvec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\n  return 2.0 * texture2D(_tex, _uv).rgb - 1.0;\n}\nfloat computeProgress(vec2 uv, float time) {\n  return fract(time);\n}\nfloat computeWeight(vec2 uv, float time) {\n  float progress \x3d computeProgress(uv, time);\n  return 1.0 - abs(1.0 - 2.0 * progress);\n}\nvec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, vec2 _waveDir, float time, float phaseOffset) {\n  float flowStrength \x3d waveParams[2];\n  float flowOffset \x3d waveParams[3];\n  vec2 flowVector \x3d textureDenormalized2D(texFlow, uv) * flowStrength;\n  float progress \x3d computeProgress(uv, time + phaseOffset);\n  float weight \x3d computeWeight(uv, time + phaseOffset);\n  vec2 result \x3d uv;\n  result -\x3d flowVector * (progress + flowOffset);\n  result +\x3d phaseOffset;\n  result +\x3d (time - progress) * FLOW_JUMP;\n  return vec3(result, weight);\n}\nconst float TIME_NOISE_TEXTURE_REPEAT \x3d 0.3737;\nconst float TIME_NOISE_STRENGTH \x3d 7.77;\nvec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\n  float waveStrength \x3d waveParams[0];\n  vec2 waveMovement \x3d time * waveDirection;\n  float timeNoise \x3d sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\n  vec3 uv_A \x3d computeUVPerturbedWeigth(_dudv, _uv + waveMovement, _waveDir, time + timeNoise, 0.0);\n  vec3 uv_B \x3d computeUVPerturbedWeigth(_dudv, _uv + waveMovement, _waveDir, time + timeNoise, 0.5);\n  vec3 normal_A \x3d textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\n  vec3 normal_B \x3d textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\n  vec3 mixNormal \x3d normalize(normal_A + normal_B);\n  mixNormal.xy *\x3d waveStrength;\n  mixNormal.z \x3d sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\n  return mixNormal;\n}\nvec3 getSurfaceNormal(vec2 _uv, float _time) {\n  float waveTextureRepeat \x3d waveParams[1];\n  return getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\n}",
"waterSurface.glsl":"#ifdef OVERLAY\n  const vec3 skyZenitColor \x3d vec3(0, 0.6, 0.9);\n  const vec3 skyColor \x3d vec3(0.72, 0.92, 1.0);\n  float f0Sky \x3d 0.02;\n  float f0maxSky \x3d 1.0;\n  float expSky \x3d 5.0;\n  float roughness \x3d 0.06;\n  float f0maxSpec \x3d 0.1;\n#else\n  uniform vec3 skyColor;\n  uniform vec3 skyZenitColor;\n  uniform float f0Sky;\n  uniform float f0maxSky;\n  uniform float expSky;\n  uniform float roughness;\n  uniform float f0maxSpec;\n#endif\nuniform vec3 lightIntensity;\n#include \x3cutil/pbrUtils.glsl\x3e\nPBRShading shadingInfo;\nvec3 getSkyColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\n  float exponent \x3d pow((1.0 - cosTheta), expSky);\n  return horizon * exponent + zenit * (1.0 -  exponent);\n}\nvec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color,  in vec3 localUp, in float shadow) {\n  vec3 seaWaterColor \x3d pow(color.rgb, vec3(2.2));\n  vec3 h \x3d normalize(l + v);\n  shadingInfo.NdotL \x3d clamp(dot(n, l), 0.0, 1.0);\n  shadingInfo.NdotV \x3d clamp(dot(n, v), 0.001, 1.0);\n  shadingInfo.VdotN \x3d clamp(dot(v, n), 0.001, 1.0);\n  shadingInfo.NdotH \x3d clamp(dot(n, h), 0.0, 1.0);\n  shadingInfo.VdotH \x3d clamp(dot(v, h), 0.0, 1.0);\n  shadingInfo.LdotH \x3d clamp(dot(l, h), 0.0, 1.0);\n  float upDotV \x3d max(dot(localUp,v), 0.0);\n  vec3 skyHorizon \x3d  pow(skyColor, vec3(2.2));\n  vec3 skyZenit \x3d  pow(skyZenitColor, vec3(2.2));\n  vec3 reflectedSkyColor \x3d getSkyColor(upDotV, skyHorizon, skyZenit );\n  float upDotL \x3d max(dot(localUp,l),0.0);\n  reflectedSkyColor *\x3d 0.1 + upDotL * 0.9;\n  float shadowModifier \x3d clamp(shadow, 0.8, 1.0);\n  vec3 reflSky \x3d fresnelReflection(shadingInfo.VdotN, vec3(f0Sky), f0maxSky) * reflectedSkyColor * shadowModifier;\n  vec3 reflSea \x3d seaWaterColor * mix(reflectedSkyColor, upDotL * lightIntensity, 2.0 / 3.0) * shadowModifier;\n  vec3 specular \x3d vec3(0.0);\n  if(upDotV \x3e 0.0 \x26\x26 upDotL \x3e 0.0) {\n    vec3 specularSun \x3d calculateSpecularReflectanceWater(shadingInfo, roughness, vec3(0.02), f0maxSpec);\n    vec3 incidentLight \x3d lightIntensity * shadow;\n    specular \x3d shadingInfo.NdotL * incidentLight * specularSun;\n  }\n  return tonemapACES(reflSky + reflSea + specular);\n}"}},
misc:{"blendLayers.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec2 uv;\nuniform sampler2D tex;\nuniform float opacity;\nvoid main() {\n  vec4 color \x3d texture2D(tex, uv);\n  gl_FragColor \x3d vec4(color.xyz, 1.0) * color.a * opacity;\n}","blendLayers.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 position;\nattribute vec2 uv0;\nuniform float scale;\nuniform vec2 offset;\nvarying vec2 uv;\nvoid main(void) {\n  gl_Position \x3d vec4(position, 1.0);\n  uv \x3d uv0 * scale + offset;;\n}",
"texOnly.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform vec4 color;\nvarying vec2 vtc;\nvoid main() {\n  vec4 texColor \x3d texture2D(tex, vtc);\n  gl_FragColor \x3d texColor * color;\n}","texOnly.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec2 vtc;\nvoid main(void) {\n  gl_Position \x3d vec4(position, 1.0);\n  vtc \x3d uv0;\n}"},pointRenderer:{"pointRenderer.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#ifdef DEPTH_PASS\nvarying float depth;\n#else\nvarying vec3 vColor;\n#endif\nvoid main(void) {\n  vec2 vOffset \x3d gl_PointCoord - vec2(0.5, 0.5);\n  float r2 \x3d dot(vOffset, vOffset);\n  if (r2 \x3e 0.25) {\n    discard;\n  }\n#ifdef DEPTH_PASS\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d vec4(vColor, 1.0);\n#endif\n}",
"pointRenderer.vert":"#include \x3cutil/slice.glsl\x3e\n#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec3 aPosition;\nattribute vec3 aColor;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uScreenMinMaxSize;\nuniform vec2 uPointScale;\nuniform vec3 uClipMin;\nuniform vec3 uClipMax;\n#ifdef DEPTH_PASS\nuniform vec2 nearFar;\nvarying float depth;\n#else\nvarying vec3 vColor;\n#endif\nvoid main(void) {\n  if (aPosition.x \x3c uClipMin.x || aPosition.y \x3c uClipMin.y || aPosition.z \x3c uClipMin.z ||\n      aPosition.x \x3e uClipMax.x || aPosition.y \x3e uClipMax.y || aPosition.z \x3e uClipMax.z) {\n    gl_Position \x3d vec4(0.0,0.0,0.0,2.0);\n    gl_PointSize \x3d 0.0;\n    return;\n  }\n  if (rejectBySlice(aPosition)) {\n    gl_Position \x3d vec4(0.0,0.0,0.0,2.0);\n    gl_PointSize \x3d 0.0;\n    return;\n  }\n  vec4 camera \x3d uModelViewMatrix * vec4(aPosition, 1.0);\n  float pointSize \x3d uPointScale.x;\n  vec4 position \x3d uProjectionMatrix * camera;\n#ifdef DRAW_SCREEN_SIZE\n    float clampedScreenSize \x3d pointSize;\n#else\n    float pointRadius \x3d 0.5 * pointSize;\n    vec4 cameraOffset \x3d camera + vec4(0.0, pointRadius, 0.0, 0.0);\n    vec4 positionOffset \x3d uProjectionMatrix * cameraOffset;\n    float radius \x3d abs(positionOffset.y - position.y);\n    float viewHeight \x3d uPointScale.y;\n    float screenPointSize \x3d (radius / position.w) * viewHeight;\n    float clampedScreenSize \x3d clamp(screenPointSize, uScreenMinMaxSize.x, uScreenMinMaxSize.y);\n    camera.xyz -\x3d normalize(camera.xyz) * pointRadius * clampedScreenSize / screenPointSize;\n    position \x3d uProjectionMatrix * camera;\n#endif\n  gl_PointSize \x3d clampedScreenSize;\n  gl_Position \x3d position;\n#ifdef DEPTH_PASS\n  depth \x3d (-camera.z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n#else\n  vColor \x3d aColor;\n#endif\n}"},
renderer:{highlight:{"apply.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform sampler2D origin;\nuniform vec4 color;\nuniform float outlineSize;\nuniform float blurSize;\nuniform vec4 opacities;\nvarying vec2 uv;\nvoid main() {\n  #if defined(GRID_OPTIMIZATION) \x26\x26 defined(GRID_DEBUG)\n    gl_FragColor \x3d vec4(uv, 0.0, 1.0);\n  #else\n    vec4 blurredHighlightValue \x3d texture2D(tex, uv);\n    float highlightIntensity \x3d blurredHighlightValue.a;\n    if (highlightIntensity \x3d\x3d 0.0) {\n      discard;\n    }\n    vec4 origin_color \x3d texture2D(origin, uv);\n    float outlineIntensity;\n    float fillIntensity;\n    if (blurredHighlightValue.g \x3e blurredHighlightValue.b) {\n      outlineIntensity \x3d color.w * opacities[1];\n      fillIntensity \x3d color.w * opacities[3];\n    }\n    else {\n      outlineIntensity \x3d color.w * opacities[0];\n      fillIntensity \x3d color.w * opacities[2];\n    }\n    float inner \x3d 1.0 - outlineSize / 9.0;\n    float outer \x3d 1.0 - (outlineSize + blurSize) / 9.0;\n    float outlineFactor \x3d smoothstep(outer, inner, highlightIntensity);\n    float fillFactor \x3d any(notEqual(origin_color, vec4(0.0, 0.0, 0.0, 0.0))) ? 1.0 : 0.0;\n    float intensity \x3d outlineIntensity * outlineFactor * (1.0 - fillFactor) + fillIntensity * fillFactor;\n    gl_FragColor \x3d vec4(color.xyz, intensity);\n  #endif\n}",
"apply.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 uv;\n#ifdef GRID_OPTIMIZATION\n  attribute vec2 uv0;\n  uniform sampler2D coverageTex;\n#endif\nvoid main() {\n  #ifdef GRID_OPTIMIZATION\n    #ifdef GRID_DEBUG\n      vec4 cov \x3d texture2D(coverageTex, uv0);\n      if (cov.r \x3d\x3d 0.0 || cov.g \x3d\x3d 1.0 || cov.b \x3d\x3d 1.0) {\n        gl_Position \x3d vec4(0.0);\n        return;\n      }\n      gl_Position \x3d vec4(position, .0, 1.0);\n      uv \x3d uv0;\n      return;\n    #else\n      vec4 cov \x3d texture2D(coverageTex, uv0);\n      if (cov.r \x3d\x3d 0.0) {\n        gl_Position \x3d vec4(0.0);\n        return;\n      }\n    #endif\n  #endif\n  gl_Position \x3d vec4(position, .0, 1.0);\n  uv \x3d position.xy * .5 + vec2(.5);\n}",
"blur.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\n#ifdef GRID_OPTIMIZATION\n  uniform vec2 blurSize;\n  varying vec3 blurCoordinate;\n#else\n  varying vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n#endif\nvoid main() {\n  #ifdef GRID_OPTIMIZATION\n    vec2 uv \x3d blurCoordinate.xy;\n    vec4 center \x3d texture2D(tex, uv);\n    if (blurCoordinate.z \x3d\x3d 1.0) {\n      gl_FragColor \x3d center;\n    }\n    else {\n      vec4 sum \x3d vec4(0.0);\n      #if GAUSSIAN_SAMPLES \x3d\x3d 3\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.294215) * 0.093913;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n        sum +\x3d center * 0.204164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.407333) * 0.304005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.294215) * 0.093913;\n        sum +\x3d texture2D(tex, uv + blurSize * 5.1) * 0.03;\n        sum +\x3d texture2D(tex, uv - blurSize * 5.1) * 0.03;\n      #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n        sum +\x3d center * 0.154164;\n        sum +\x3d texture2D(tex, uv + blurSize * 1.5) * 0.204005;\n        sum +\x3d texture2D(tex, uv - blurSize * 1.5) * 0.204005;\n        sum +\x3d texture2D(tex, uv + blurSize * 3.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv - blurSize * 3.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv + blurSize * 5.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv - blurSize * 5.5) * 0.123913;\n        sum +\x3d texture2D(tex, uv + blurSize * 7.5) * 0.05;\n        sum +\x3d texture2D(tex, uv - blurSize * 7.5) * 0.05;\n      #endif\n      gl_FragColor \x3d sum;\n    }\n  #else\n    vec4 sum \x3d vec4(0.0);\n    #if GAUSSIAN_SAMPLES \x3d\x3d 3\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.093913;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.204164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.304005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.093913;\n      sum +\x3d texture2D(tex, blurCoordinates[5]) * 0.03;\n      sum +\x3d texture2D(tex, blurCoordinates[6]) * 0.03;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n      sum +\x3d texture2D(tex, blurCoordinates[0]) * 0.154164;\n      sum +\x3d texture2D(tex, blurCoordinates[1]) * 0.204005;\n      sum +\x3d texture2D(tex, blurCoordinates[2]) * 0.204005;\n      sum +\x3d texture2D(tex, blurCoordinates[3]) * 0.123913;\n      sum +\x3d texture2D(tex, blurCoordinates[4]) * 0.123913;\n      sum +\x3d texture2D(tex, blurCoordinates[5]) * 0.09;\n      sum +\x3d texture2D(tex, blurCoordinates[6]) * 0.09;\n      sum +\x3d texture2D(tex, blurCoordinates[7]) * 0.05;\n      sum +\x3d texture2D(tex, blurCoordinates[8]) * 0.05;\n    #endif\n    gl_FragColor \x3d sum;\n  #endif\n}",
"blur.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nattribute vec2 uv0;\n#ifdef GRID_OPTIMIZATION\n  uniform sampler2D coverageTex;\n  varying vec3 blurCoordinate;\n#else\n  uniform vec2 blurSize;\n  varying vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n#endif\nvoid main() {\n  gl_Position \x3d vec4(position, 0.0, 1.0);\n  #ifdef GRID_OPTIMIZATION\n    vec4 cov \x3d texture2D(coverageTex, uv0);\n    if (cov.r \x3d\x3d 0.0) {\n      gl_Position \x3d vec4(0.0);\n    }\n    blurCoordinate \x3d vec3(gl_Position.xy * .5 + vec2(.5), max(cov.g, cov.b));\n  #else\n    vec2 uv \x3d position.xy * .5 + vec2(.5);\n    #if GAUSSIAN_SAMPLES \x3d\x3d 3\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 5\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 7\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n      blurCoordinates[5] \x3d uv + blurSize * 5.1;\n      blurCoordinates[6] \x3d uv - blurSize * 5.1;\n    #elif GAUSSIAN_SAMPLES \x3d\x3d 9\n      blurCoordinates[0] \x3d uv;\n      blurCoordinates[1] \x3d uv + blurSize * 1.407333;\n      blurCoordinates[2] \x3d uv - blurSize * 1.407333;\n      blurCoordinates[3] \x3d uv + blurSize * 3.294215;\n      blurCoordinates[4] \x3d uv - blurSize * 3.294215;\n      blurCoordinates[5] \x3d uv + blurSize * 5.1;\n      blurCoordinates[6] \x3d uv - blurSize * 5.1;\n      blurCoordinates[7] \x3d uv + blurSize * 7.1;\n      blurCoordinates[8] \x3d uv - blurSize * 7.1;\n    #endif\n  #endif\n}",
"downsample.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nuniform vec2 invFramebufferDim;\nvoid main() {\n  vec2 coord \x3d gl_FragCoord.xy * invFramebufferDim;\n  vec4 value \x3d texture2D(tex, coord);\n  float mx \x3d floor(max(value.g, value.b));\n  gl_FragColor \x3d vec4(ceil(value.r), mx, mx, 1.0);\n}","downsample.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvoid main() {\n  gl_Position \x3d vec4(vec2(1.0) - position * 2.0, .0, 1.0);\n}"},
laserLine:{"laserLine.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\nuniform sampler2D depthMap;\nuniform vec2 nearFar;\nuniform vec4 projInfo;\nuniform vec2 zScale;\nuniform float maxPixelDistance;\nuniform vec4 focusPlane;\nuniform vec4 focusSphere;\nuniform vec4 segmentPlane;\nuniform vec3 segmentStart;\nuniform vec3 segmentEnd;\nuniform vec3 glowColor;\nuniform float glowWidth;\nuniform vec3 innerColor;\nuniform float innerWidth;\nuniform float globalAlpha;\nvarying vec2 uv;\n#define INFINITY 100000.0\nvec3 reconstructPosition(vec2 fragCoord, float depth) {\n  return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}\nfloat planeDistancePixels(vec4 plane, vec3 pos) {\n  float dist \x3d dot(plane.xyz, pos) + plane.w;\n  float width \x3d fwidth(dist);\n  dist /\x3d min(width, maxPixelDistance);\n  return abs(dist);\n}\nfloat sphereDistancePixels(vec4 sphere, vec3 pos) {\n  float dist \x3d distance(sphere.xyz, pos) - sphere.w;\n  float width \x3d fwidth(dist);\n  dist /\x3d min(width, maxPixelDistance);\n  return abs(dist);\n}\nvec4 blendPremultiplied(vec4 source, vec4 dest) {\n  float oneMinusSourceAlpha \x3d 1.0 - source.a;\n  return vec4(\n    source.rgb + dest.rgb * oneMinusSourceAlpha,\n    source.a + dest.a * oneMinusSourceAlpha\n  );\n}\nvec4 premultipliedColor(vec3 rgb, float alpha) {\n  return vec4(rgb * alpha, alpha);\n}\nvec4 laserLineProfile(float dist) {\n  if (dist \x3e glowWidth) {\n    return vec4(0.0);\n  }\n  float innerAlpha \x3d (1.0 - smoothstep(0.0, innerWidth, dist));\n  float glowAlpha \x3d pow(max(0.0, 1.0 - dist / glowWidth), 8.0);\n  return blendPremultiplied(\n    premultipliedColor(innerColor, innerAlpha),\n    premultipliedColor(glowColor, glowAlpha)\n  );\n}\nvoid main() {\n  float depth \x3d linearDepth(depthMap, uv, nearFar);\n  if (-depth \x3d\x3d nearFar[0]) {\n    discard;\n  }\n  vec3 pos \x3d reconstructPosition(gl_FragCoord.xy, depth);\n  float ddepth \x3d fwidth(depth);\n  float depthDiscontinuityAlpha \x3d 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\n  vec3 normal \x3d normalize(cross(dFdx(pos), dFdy(pos)));\n  float focusPlaneDistance \x3d planeDistancePixels(focusPlane, pos);\n  float focusSphereDistance \x3d sphereDistancePixels(focusSphere, pos);\n  float segmentDistance \x3d INFINITY;\n  float segmentLength \x3d length(segmentEnd - segmentStart);\n  vec3 segmentDir \x3d (segmentEnd - segmentStart) / segmentLength;\n  float t \x3d dot(segmentDir, pos - segmentStart);\n  if (segmentLength \x3e 0.0 \x26\x26 t \x3e\x3d 0.0 \x26\x26 t \x3c\x3d segmentLength) {\n    segmentDistance \x3d planeDistancePixels(segmentPlane, pos);\n  }\n  vec4 focusPlaneColor \x3d laserLineProfile(focusPlaneDistance);\n  vec4 focusSphereColor \x3d laserLineProfile(focusSphereDistance);\n  vec4 segmentColor \x3d laserLineProfile(segmentDistance);\n  float focusPlaneAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, focusPlane.xyz)));\n  float focusSphereAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, normalize(pos - focusSphere.xyz))));\n  float segmentAlpha \x3d 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, segmentPlane.xyz)));\n  vec4 color \x3d max(\n    focusPlaneColor * focusPlaneAlpha,\n    max(\n      focusSphereColor * focusSphereAlpha,\n      segmentColor * segmentAlpha\n    )\n  );\n  gl_FragColor \x3d color * globalAlpha * depthDiscontinuityAlpha;\n}"},
offscreen:{"composite.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvoid main() {\n  gl_FragColor \x3d texture2D(tex, vtc);\n}","compositeOccluded.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D occludedColorMap;\nuniform float opacity;\nvarying vec2 vtc;\nvoid main() {\n  vec4 occludedColor \x3d texture2D(occludedColorMap, vtc);\n  gl_FragColor \x3d occludedColor * opacity;\n}","compositeTransparentToHUDVisibility.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nuniform sampler2D tex;\nvarying vec2 vtc;\nvoid main() {\n  gl_FragColor \x3d vec4(1.0 - texture2D(tex, vtc).a);\n}",
"offscreen.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 vtc;\nvoid main(void) {\n  gl_Position \x3d vec4(position.xy, 0.0, 1.0);\n  vtc \x3d position.xy * 0.5 + 0.5;\n}"},ssao:{"blur.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#ifndef RADIUS\n#define RADIUS 4\n#endif\nuniform sampler2D normalMap;\nuniform sampler2D depthMap;\nuniform sampler2D tex;\nuniform vec2 blurSize;\nuniform float g_BlurFalloff;\nuniform float projScale;\nuniform vec2 nearFar;\nuniform vec2 zScale;\nvarying vec2 uv;\nfloat BlurFunction(vec2 uv, float r, float center_d, inout float w_total, float sharpness) {\n  float c \x3d texture2D(tex, uv).r;\n  float d \x3d linearDepth(depthMap, uv, nearFar);\n  float ddiff \x3d d - center_d;\n  float w \x3d exp(-r*r*g_BlurFalloff - ddiff*ddiff*sharpness);\n  w_total +\x3d w;\n  return w*c;\n}\nvoid main(void) {\n  float b \x3d 0.0;\n  float w_total \x3d 0.0;\n  float center_d \x3d linearDepth(depthMap, uv, nearFar);\n  float sharpness \x3d -0.05 * projScale/(center_d*zScale.x+zScale.y);\n  for (int r \x3d -RADIUS; r \x3c\x3d RADIUS; ++r) {\n    float rf \x3d float(r);\n    vec2 uvOffset \x3d uv + rf*blurSize;\n    b +\x3d BlurFunction(uvOffset, rf, center_d, w_total, sharpness);\n  }\n  gl_FragColor \x3d vec4(b/w_total);\n}",
"ssao.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\n#ifndef SAMPLES\n#define SAMPLES 4\n#endif\nuniform mat4 projMatrixInv;\nuniform sampler2D normalMap;\nuniform sampler2D depthMap;\nuniform float intensity;\nuniform float projScale;\nuniform float radius;\nuniform vec2 nearFar;\nuniform vec4 projInfo;\nuniform vec2 screenDimensions;\nuniform vec3 pSphere[SAMPLES];\nuniform vec2 rnmScale;\nuniform sampler2D rnm;\nuniform vec2 zScale;\nvarying vec2  uv;\nvarying vec4  camPos;\nfloat fallOffFunction(float vv, float vn, float bias) {\n  float radius2 \x3d radius * radius;\n  float f \x3d max(radius2 - vv, 0.0); return f * f * f * max(vn-bias, 0.0);\n}\nfloat aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {\n  vec3 v \x3d Q - C;\n  float vv \x3d dot(v, v);\n  float vn \x3d dot(normalize(v), n_C);\n  return fallOffFunction(vv, vn, 0.1);\n}\nvec3 reconstructCSPosition(vec2 S, float z) {\n  return vec3(( (S.xy) * projInfo.xy + projInfo.zw)*(z*zScale.x+zScale.y), z);\n}\nvoid main(void) {\n  vec3 fres \x3d normalize((texture2D(rnm, uv * rnmScale).xyz * 2.0) - vec3(1.0));\n  float currentPixelDepth \x3d linearDepth(depthMap, uv, nearFar);\n  if (-currentPixelDepth\x3enearFar.y || -currentPixelDepth\x3cnearFar.x) {\n    gl_FragColor \x3d vec4(0.0);\n    return;\n  }\n  vec3 currentPixelPos \x3d reconstructCSPosition(gl_FragCoord.xy,currentPixelDepth);\n  vec4 norm4 \x3d texture2D(normalMap, uv);\n  vec3 norm \x3d vec3(-1.0) + 2.0 * norm4.xyz;\n  bool isTerrain \x3d norm4.w\x3c0.5;\n  float sum \x3d .0;\n  vec4 occluderFragment;\n  vec3 ray;\n  vec3 tapPixelPos;\n  float ps \x3d projScale/(2.0*currentPixelPos.z*zScale.x+zScale.y);\n  for(int i \x3d 0; i \x3c SAMPLES; ++i) {\n    vec2 unitOffset \x3d reflect(pSphere[i], fres).xy;\n    vec2 offset \x3d vec2(-unitOffset*radius*ps);\n    if ( abs(offset.x)\x3c2.0 || abs(offset.y)\x3c2.0) continue;\n    vec2 tc \x3d vec2(gl_FragCoord.xy + offset);\n    if (tc.x \x3c 0.0 || tc.y \x3c 0.0 || tc.x \x3e screenDimensions.x || tc.y \x3e screenDimensions.y) continue;\n    vec2 tcTap \x3d tc/screenDimensions;\n    float occluderFragmentDepth \x3d linearDepth(depthMap, tcTap, nearFar);\n    if (isTerrain) {\n      bool isTerrainTap \x3d texture2D(normalMap, tcTap).w\x3c0.5;\n      if (isTerrainTap) {\n        continue;\n      }\n    }\n    tapPixelPos \x3d reconstructCSPosition(tc, occluderFragmentDepth);\n    sum+\x3d aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);\n  }\n  float A \x3d max(1.0-sum*intensity/float(SAMPLES),0.0);\n  A \x3d (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;\n  gl_FragColor \x3d vec4(A);\n}"}},
terrainRenderer:{"colorPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/sceneLighting.glsl\x3e\n#include \x3cutil/screenSizePerspective.glsl\x3e\n#include \x3cutil/shadow.glsl\x3e\n#include \x3cutil/slice.glsl\x3e\n#include \x3cterrainRenderer/overlay.glsl\x3e\nuniform vec3 camPos;\nuniform vec3 lightDirection;\nuniform vec3 viewDirection;\nuniform sampler2D depthTex;\nuniform int shadowMapNum;\nuniform vec4 shadowMapDistance;\nuniform mat4 shadowMapMatrix[4];\nuniform float depthHalfPixelSz;\nuniform sampler2D ssaoTex;\nuniform vec4 viewportPixelSz;\nuniform sampler2D tex;\nuniform float opacity;\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nstruct WireframeSettings {\n  float width;\n  float falloff;\n  float subdivision;\n  vec4 color;\n  float wireOpacity;\n  float surfaceOpacity;\n};\nuniform WireframeSettings wireframe;\n#endif\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvarying vec2 vtc;\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nvarying vec2 vuv;\n#endif\n#ifdef ATMOSPHERE\nvarying vec3 wnormal;\nvarying vec3 wlight;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\nvarying float screenSizeDistanceToCamera;\nvarying float screenSizeCosAngle;\n#endif\nconst vec3 ambient \x3d vec3(0.2,0.2,0.2);\nconst vec3 diffuse \x3d vec3(0.8,0.8,0.8);\nconst float diffuseHardness \x3d 2.5;\nconst float sliceOpacity \x3d 0.2;\n#ifdef OVERLAY\nuniform sampler2D ovInnerColorTex;\nuniform sampler2D ovOuterColorTex;\nuniform sampler2D ovInnerWaterTex;\nuniform sampler2D ovOuterWaterTex;\nuniform float overlayOpacity;\nvarying vec4 vtcOverlay;\nvarying vec3 tbnTangent;\nvarying vec3 tbnBiTangent;\n#endif\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\nfloat lum(vec3 c) {\n  float max \x3d max(max(c.r, c.g), c.b);\n  float min \x3d min(min(c.r, c.g), c.b);\n  return (min + max) * 0.5;\n}\n#ifdef ATMOSPHERE\nvec3 atmosphere(vec3 lightPos, vec3 normal, vec3 view) {\n  vec3 surfaceColor   \x3d vec3(0.0);\n  vec3 fuzzySpecColor \x3d vec3(1.0);\n  vec3 subColor       \x3d vec3(0.0);\n  float rollOff       \x3d 1.0;\n  vec3 Ln \x3d normalize(lightPos);\n  vec3 Nn \x3d normalize(normal);\n  vec3 Hn \x3d normalize(view + Ln);\n  float ldn \x3d dot(Ln, Nn);\n  float diffComp \x3d max(0.0, ldn);\n  float vdn \x3d clamp(1.0 - dot(view, Nn), 0.0, 1.0);\n  float ndv \x3d dot(view, Ln);\n  vec3 diffContrib \x3d surfaceColor * diffComp;\n  float subLamb \x3d max(0.0, smoothstep(-rollOff, 1.0, ldn) - smoothstep(0.0, 1.0, ldn));\n  vec3 subContrib \x3d subLamb * subColor;\n  vec3 vecColor \x3d vec3(vdn);\n  vec3 diffuseContrib \x3d (subContrib + diffContrib);\n  vec3 specularContrib \x3d (vecColor * fuzzySpecColor);\n  return (diffContrib + specularContrib) * rollOff;\n}\n#endif\nconst float GAMMA_EXP \x3d 0.4545454545;\nvoid main() {\n  vec3 a \x3d ambient;\n  float shadow \x3d 0.0;\n#ifdef RECEIVE_SHADOWS\n  shadow \x3d evalShadow(vpos, linearDepth, depthTex, shadowMapNum, shadowMapDistance, shadowMapMatrix, depthHalfPixelSz);\n#endif\n  float vndl \x3d dot(normalize(vnormal), lightDirection);\n  float k \x3d smoothstep(0.0, 1.0, clamp(vndl*diffuseHardness, 0.0, 1.0));\n  vec3 d \x3d (1.0 - shadow/1.8) * diffuse * k;\n  float ssao \x3d viewportPixelSz.w \x3c .0 ? 1.0 : texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n  vec4 tileColor \x3d texture2D(tex, vtc) * opacity;\n#ifdef OVERLAY\n  vec4 overlayColor  \x3d overlayOpacity * getOverlayColor(ovInnerColorTex, ovOuterColorTex, vtcOverlay);\n  tileColor \x3d tileColor * (1.0 - overlayColor.a) + overlayColor;\n#endif\n  if (rejectBySlice(vpos)) {\n    tileColor *\x3d sliceOpacity;\n  }\n  vec3 atm \x3d vec3(0.0);\n#ifdef ATMOSPHERE\n  float ndotl \x3d max(0.0, min(1.0, vndl));\n  atm \x3d atmosphere(wlight, wnormal, -viewDirection);\n  atm *\x3d max(0.0, min(1.0, (1.0-lum(tileColor.rgb)*1.5)));\n  atm *\x3d max(0.0, min(1.0, ndotl*2.0));\n  atm *\x3d tileColor.a;\n#endif\n  vec3 albedo \x3d atm + tileColor.rgb;\n  vec3 normal \x3d normalize(vnormal);\n  float additionalAmbientScale \x3d smoothstep(0.0, 1.0, clamp(vndl*2.5, 0.0, 1.0));\n  vec3 additionalLight \x3d ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n  gl_FragColor \x3d vec4(evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight), tileColor.a);\n#ifdef OVERLAY\n  vec4 overlayWaterMask \x3d getOverlayColor(ovInnerWaterTex, ovOuterWaterTex, vtcOverlay);\n  float waterNormalLength \x3d length(overlayWaterMask);\n  if (waterNormalLength \x3e 0.95) {\n    mat3 tbnMatrix \x3d mat3(tbnTangent, tbnBiTangent, vnormal);\n    vec4 waterColor \x3d overlayOpacity * getOverlayWaterColor(tileColor, overlayWaterMask, overlayColor, vpos, shadow, vnormal, camPos, tbnMatrix);\n    vec4 groundColor \x3d vec4(pow(gl_FragColor.rgb, vec3(2.2)), gl_FragColor.w);\n    waterColor \x3d mix(groundColor, waterColor, waterColor.a);\n    gl_FragColor \x3d vec4(pow(waterColor.rgb, vec3( GAMMA_EXP )), waterColor.a);\n  }\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float perspectiveScale \x3d screenSizePerspectiveScaleFloat(1.0, screenSizeCosAngle, screenSizeDistanceToCamera, screenSizePerspective);\n  if (perspectiveScale \x3c\x3d 0.25) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), perspectiveScale * 4.0);\n  }\n  else if (perspectiveScale \x3c\x3d 0.5) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(0.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.25) * 4.0);\n  }\n  else if (perspectiveScale \x3e\x3d 0.99) {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(0.0, 1.0, 0.0, 1.0), 0.2);\n  }\n  else {\n    gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.5) * 2.0);\n  }\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\n  vec2 vuvScaled \x3d vuv * wireframe.subdivision;\n  vec2 vuvMod \x3d fract(vuvScaled);\n  vec2 dVuv \x3d fwidth(vuvScaled);\n  dVuv \x3d max(vec2(0.00001), dVuv);\n  vec2 edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\n                                wireframe.width * dVuv, min(vuvMod, 1.0 - vuvMod));\n  float edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\n#ifdef WIREFRAME_TEXTURE\n  vec3 wireframeColor \x3d mix(gl_FragColor.rgb, wireframe.color.rgb, edgeFactor * wireframe.color.a);\n  float wireframeAlpha \x3d mix(wireframe.surfaceOpacity, wireframe.wireOpacity, edgeFactor);\n  gl_FragColor \x3d vec4(wireframeColor * wireframeAlpha, wireframeAlpha * gl_FragColor.a);\n#endif\n#ifdef TILE_BORDERS\n  dVuv \x3d fwidth(vuv);\n  edgeFactors \x3d smoothstep((wireframe.width - wireframe.falloff) * dVuv,\n                            wireframe.width * dVuv, min(vuv, 1.0 - vuv));\n  edgeFactor \x3d 1.0 - min(edgeFactors.x, edgeFactors.y);\n  gl_FragColor \x3d mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), edgeFactor);\n#endif\n#endif\n  gl_FragColor \x3d highlightSlice(gl_FragColor, vpos);\n}",
"colorPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\n#include \x3cmaterials/water/normalsUtils.glsl\x3e\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec3 origin;\nuniform vec4 texOffsetAndScale;\nuniform mat4 viewNormal;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvarying vec2 vtc;\n#ifdef RECEIVE_SHADOWS\nvarying float linearDepth;\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\nvarying vec2 vuv;\n#endif\n#ifdef ATMOSPHERE\nuniform vec3 lightDirection;\nvarying vec3 wnormal;\nvarying vec3 wlight;\n#endif\n#ifdef OVERLAY\nuniform vec4 overlayTexOffset;\nuniform vec4 overlayTexScale;\nvarying vec4 vtcOverlay;\nvarying vec3 tbnTangent;\nvarying vec3 tbnBiTangent;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspective;\nvarying float screenSizeDistanceToCamera;\nvarying float screenSizeCosAngle;\n#endif\nvoid main(void) {\n  vpos \x3d position;\n  vnormal \x3d getLocalUp(vpos, origin);\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, vpos, vnormal, skirtScale);\n#ifdef ATMOSPHERE\n  wnormal \x3d (viewNormal * vec4(normalize(vpos+origin), 1.0)).xyz;\n  wlight \x3d (view  * vec4(lightDirection, 1.0)).xyz;\n#endif\n#if defined(WIREFRAME_TEXTURE) || defined(TILE_BORDERS)\n  vuv \x3d uv;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  vec3 viewPos \x3d (view * vec4(vpos, 1.0)).xyz;\n  screenSizeDistanceToCamera \x3d length(viewPos);\n  vec3 viewSpaceNormal \x3d (viewNormal * vec4(normalize(vpos + origin), 1.0)).xyz;\n  screenSizeCosAngle \x3d abs(viewSpaceNormal.z);\n#endif\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n#ifdef RECEIVE_SHADOWS\n  linearDepth \x3d gl_Position.w;\n#endif\n  vtc \x3d uv * texOffsetAndScale.zw + texOffsetAndScale.xy;\n#ifdef OVERLAY\n  vtcOverlay \x3d vec4(uv, uv) * overlayTexScale + overlayTexOffset;\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    tbnTangent \x3d normalize(cross(vec3(0.0, 0.0, 1.0), vnormal));\n    tbnBiTangent \x3d normalize(cross(vnormal, tbnTangent));\n  #else\n    tbnTangent \x3d vec3(1.0, 0.0, 0.0);\n    tbnBiTangent \x3d normalize(cross(vnormal, tbnTangent));\n  #endif\n#endif\n}",
"depthPass.frag":"#include \x3cutil/enableExtensions.glsl\x3e\n#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/encoding.glsl\x3e\n#include \x3cutil/depth.glsl\x3e\nvarying float depth;\nvarying vec3 vpos;\nvoid main() {\n#ifndef BIAS_SHADOWMAP\n  gl_FragColor \x3d float2rgba(depth);\n#else\n  gl_FragColor \x3d float2rgba(calcFragDepth(depth));\n#endif\n}","depthPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec2 nearFar;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying float depth;\nvarying vec3 vpos;\nvoid main(void) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec3 normal \x3d normalize(position + origin);\n#else\n  vec3 normal \x3d vec3(0.0, 0.0, 1.0);\n#endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, normal.xyz, skirtScale);\n  vec4 eye \x3d view * vec4(vpos, 1.0);\n  gl_Position \x3d proj * eye;\n  depth \x3d (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n}",
"highlightPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\n#include \x3cutil/highlight.glsl\x3e\n#include \x3cterrainRenderer/overlay.glsl\x3e\nuniform sampler2D ovInnerColorTex;\nuniform sampler2D ovOuterColorTex;\nuniform float overlayOpacity;\nuniform sampler2D depthTex;\nuniform vec4 highlightViewportPixelSz;\nvarying vec4 vtcOverlay;\nvoid main() {\n  vec4 overlayColor \x3d getOverlayColor(ovInnerColorTex, ovOuterColorTex, vtcOverlay) * overlayOpacity;\n  if (overlayColor.a \x3d\x3d 0.0) {\n    gl_FragColor \x3d vec4(0.0);\n    return;\n  }\n  gl_FragColor \x3d highlightData(gl_FragCoord, depthTex, highlightViewportPixelSz);\n}",
"highlightPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform vec4 overlayTexScale;\nuniform vec4 overlayTexOffset;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vpos;\nvarying vec4 vtcOverlay;\nvoid main() {\n  #if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    vec3 vnormal \x3d normalize(position + origin);\n  #else\n    vec3 vnormal \x3d vec3(0.0, 0.0, 1.0);\n  #endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, vnormal, skirtScale);\n  vtcOverlay \x3d vec4(uv, uv) * overlayTexScale + overlayTexOffset;\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n}",
"normalPass.frag":"#include \x3cutil/fsPrecision.glsl\x3e\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main() {\n  vec3 normal \x3d normalize(vnormal);\n  if (gl_FrontFacing \x3d\x3d false) normal \x3d -normal;\n#ifndef ALPHA_ZERO\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 1.0);\n#else\n  gl_FragColor \x3d vec4(vec3(.5) + .5 * normal, 0.0);\n#endif\n}","normalPass.vert":"#include \x3cutil/vsPrecision.glsl\x3e\n#include \x3cterrainRenderer/skirts.glsl\x3e\nuniform vec3 origin;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 viewNormal;\nuniform float skirtScale;\nattribute vec3 position;\nattribute vec2 uv0;\nvarying vec3 vnormal;\nvarying vec3 vpos;\nvoid main(void) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n  vec4 normal \x3d vec4(normalize(position + origin), 1.0);\n#else\n  vec4 normal \x3d vec4(0.0, 0.0, 1.0, 1.0);\n#endif\n  vec2 uv \x3d uv0;\n  vpos \x3d applySkirts(uv, position, normal.xyz, skirtScale);\n  gl_Position \x3d proj * view * vec4(vpos, 1.0);\n  vnormal \x3d normalize((viewNormal * normal).xyz);\n}",
"overlay.glsl":"#include \x3cmaterials/water/waterSurface.glsl\x3e\n#include \x3cutil/color.glsl\x3e\nvec4 getOverlayColor(sampler2D ov0Tex, sampler2D ov1Tex, vec4 texCoords) {\n  vec4 color \x3d vec4(0.0);\n  vec4 color0 \x3d texture2D(ov0Tex, texCoords.xy);\n  vec4 color1 \x3d texture2D(ov1Tex, texCoords.zw);\n  if ((texCoords.x \x3e 0.0) \x26\x26 (texCoords.x \x3c 1.0) \x26\x26 (texCoords.y \x3e 0.0) \x26\x26 (texCoords.y \x3c 1.0)) {\n    color \x3d color0;\n  } else if ((texCoords.z \x3e 0.0) \x26\x26 (texCoords.z \x3c 1.0) \x26\x26 (texCoords.w \x3e 0.0) \x26\x26 (texCoords.w \x3c 1.0)) {\n    color \x3d color1;\n  }\n  return color;\n}\n#ifdef OVERLAY\nvec4 getOverlayWaterColor( in vec4 tileColor, vec4 maskInput, vec4 colorInput,\n                     vec3 vpos, float shadow, vec3 localUp, vec3 eye, mat3 tbn) {\n  vec3 n \x3d normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));\n  vec3 v \x3d -normalize(vpos - eye);\n  vec3 l \x3d normalize(-lightingMainDirection);\n  vec3 final \x3d getSeaColor(n, v, l, colorInput.rgb, localUp, 1.0 - shadow);\n  return premultiplyAlpha(vec4(final, colorInput.w));\n}\n#endif",
"skirts.glsl":"vec3 applySkirts(inout vec2 uv, vec3 vpos, vec3 vnormal, float skirtScale) {\n  float skirtLength \x3d 0.0;\n  if (uv.x \x3e\x3d 2.0) {\n    skirtLength \x3d uv.y * skirtScale;\n    vec2 x \x3d vec2(uv.x) - vec2(3.5, 4.5);\n    uv \x3d clamp(vec2(1.5) - abs(x), vec2(0.0), vec2(1.0));\n  }\n  return vpos - vnormal * skirtLength;\n}"},util:{"alignPixel.glsl":"vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\n  vec2 xy \x3d vec2(.500123) + .5 * clipCoord.xy / clipCoord.w;\n  vec2 pixelSz \x3d vec2(1.0) / widthHeight;\n  vec2 ij \x3d (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\n  vec2 result \x3d (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n  return vec4(result, clipCoord.zw);\n}\nvec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\n  vec2 xy \x3d vec2(.5) + .5 * clipCoord.xy / clipCoord.w;\n  vec2 pixelSz \x3d vec2(1.0) / widthHeight;\n  vec2 ij \x3d floor((xy + .5 * pixelSz) * widthHeight) * pixelSz;\n  vec2 result \x3d (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n  return vec4(result, clipCoord.zw);\n}",
"color.glsl":"vec4 premultiplyAlpha(vec4 v) {\n  return vec4(v.rgb * v.a, v.a);\n}\nvec3 rgb2hsv(vec3 c) {\n  vec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p \x3d mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q \x3d mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n  float d \x3d q.x - min(q.w, q.y);\n  float e \x3d 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\n  vec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}",
"depth.glsl":"#include \x3cutil/encoding.glsl\x3e\nfloat linearDepth(sampler2D depthTex, vec2 uv, vec2 nearFar) {\n  return -(rgba2float(texture2D(depthTex, uv)) * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat calcFragDepth(const in float depth) {\n  const float SLOPE_SCALE \x3d 2.0;\n  const float BIAS \x3d 2.0 * .000015259;\n  float m \x3d max(abs(dFdx(depth)), abs(dFdy(depth)));\n  float result \x3d depth + SLOPE_SCALE * m + BIAS;\n  return clamp(result, .0, .999999);\n}","doublePrecision.glsl":"vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n  vec3 t1 \x3d hiA + hiB;\n  vec3 e \x3d t1 - hiA;\n  vec3 t2 \x3d ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\n  return t1 + t2;\n}",
"enableExtensions.glsl":"#define EXTENSIONS_ENABLED\n#extension GL_OES_standard_derivatives : enable\n#extension GL_EXT_shader_texture_lod : enable","encoding.glsl":"const float MAX_RGBA_FLOAT \x3d\n  255.0 / 256.0 +\n  255.0 / 256.0 / 256.0 +\n  255.0 / 256.0 / 256.0 / 256.0 +\n  255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 fixedPointFactors \x3d vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\n  float valueInValidDomain \x3d clamp(value, 0.0, MAX_RGBA_FLOAT);\n  vec4 fixedPointU8 \x3d floor(fract(valueInValidDomain * fixedPointFactors) * 256.0);\n  const float toU8AsFloat \x3d 1.0 / 255.0;\n  return fixedPointU8 * toU8AsFloat;\n}\nconst vec4 rgba2float_factors \x3d vec4(\n  255.0 / (256.0),\n  255.0 / (256.0 * 256.0),\n  255.0 / (256.0 * 256.0 * 256.0),\n  255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\n  return dot(rgba, rgba2float_factors);\n}",
"fsPrecision.glsl":"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\nprecision highp sampler2D;\n#else\nprecision mediump float;\nprecision mediump sampler2D;\n#endif","highlight.glsl":"vec4 highlightData(vec4 fragCoord, sampler2D depthTex, vec4 viewportPixelSize) {\n  float sceneDepth \x3d texture2D(depthTex, (fragCoord.xy - viewportPixelSize.xy) * viewportPixelSize.zw).r;\n  if (fragCoord.z \x3e sceneDepth + 5e-7) {\n    return vec4(1.0, 1.0, 0.0, 1.0);\n  }\n  else {\n    return vec4(1.0, 0.0, 1.0, 1.0);\n  }\n}",
"hud.glsl":"#include \x3cutil/screenSizePerspective.glsl\x3e\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec4 auxpos1;\nuniform mat4 proj;\nuniform mat4 view;\nuniform mat4 viewNormal;\nuniform mat4 model;\nuniform mat4 modelNormal;\nuniform vec4 viewport;\nuniform vec3 camPos;\nuniform float polygonOffset;\nuniform float cameraGroundRelative;\nuniform float pixelRatio;\nuniform float perDistancePixelRatio;\n#ifdef VERTICAL_OFFSET\nuniform vec4 verticalOffset;\n#endif\n#ifdef SCREEN_SIZE_PERSPECTIVE\nuniform vec4 screenSizePerspectiveAlignment;\n#endif\nuniform sampler2D hudVisibilityTexture;\nconst float SMALL_OFFSET_ANGLE \x3d 0.984807753012208;\nstruct ProjectHUDAux {\n  vec3 posModel;\n  vec3 posView;\n  vec3 vnormal;\n  float distanceToCamera;\n  float absCosAngle;\n};\nfloat applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n  float pointGroundSign \x3d sign(pointGroundDistance);\n  if (pointGroundSign \x3d\x3d 0.0) {\n    pointGroundSign \x3d cameraGroundRelative;\n  }\n  float groundRelative \x3d cameraGroundRelative * pointGroundSign;\n  if (polygonOffset \x3e .0) {\n    float cosAlpha \x3d clamp(absCosAngle, 0.01, 1.0);\n    float tanAlpha \x3d sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n    float factor \x3d (1.0 - tanAlpha / viewport[2]);\n    if (groundRelative \x3e 0.0) {\n      posView *\x3d factor;\n    }\n    else {\n      posView /\x3d factor;\n    }\n  }\n  return groundRelative;\n}\nvoid applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n  float distanceToCamera \x3d length(posView);\n  float pixelOffset \x3d distanceToCamera * perDistancePixelRatio * 0.5;\n  vec3 modelOffset \x3d normalModel * cameraGroundRelative * pixelOffset;\n  vec3 viewOffset \x3d (viewNormal * vec4(modelOffset, 1.0)).xyz;\n  posModel +\x3d modelOffset;\n  posView +\x3d viewOffset;\n}\nvec4 projectPositionHUD(out ProjectHUDAux aux) {\n  vec3 centerOffset \x3d auxpos1.xyz;\n  float pointGroundDistance \x3d auxpos1.w;\n  aux.posModel \x3d (model * vec4(position, 1.0)).xyz;\n  aux.posView \x3d (view * vec4(aux.posModel, 1.0)).xyz;\n  aux.vnormal \x3d (modelNormal * vec4(normal, 1.0)).xyz;\n  applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);\n  aux.distanceToCamera \x3d length(aux.posView);\n  vec3 viewDirObjSpace \x3d normalize(camPos - aux.posModel);\n  float cosAngle \x3d dot(aux.vnormal, viewDirObjSpace);\n  aux.absCosAngle \x3d abs(cosAngle);\n#ifdef SCREEN_SIZE_PERSPECTIVE\n#if defined(VERTICAL_OFFSET) || defined(CENTER_OFFSET_UNITS_SCREEN)\n  vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);\n#endif\n#endif\n#ifdef VERTICAL_OFFSET\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);\n#else\n  float verticalOffsetScreenHeight \x3d verticalOffset.x;\n#endif\n  float worldOffset \x3d clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n  vec3 modelOffset \x3d aux.vnormal * worldOffset;\n  aux.posModel +\x3d modelOffset;\n  vec3 viewOffset \x3d (viewNormal * vec4(modelOffset, 1.0)).xyz;\n  aux.posView +\x3d viewOffset;\n  pointGroundDistance +\x3d worldOffset;\n#endif\n  float groundRelative \x3d applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n#ifndef CENTER_OFFSET_UNITS_SCREEN\n  aux.posView +\x3d vec3(centerOffset.x, centerOffset.y, 0.0);\n  if (centerOffset.z !\x3d 0.0) {\n    aux.posView -\x3d normalize(aux.posView) * centerOffset.z;\n  }\n#endif\n  vec4 posProj \x3d proj * vec4(aux.posView, 1.0);\n#ifdef CENTER_OFFSET_UNITS_SCREEN\n#ifdef SCREEN_SIZE_PERSPECTIVE\n  float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);\n#else\n  float centerOffsetY \x3d centerOffset.y;\n#endif\n  posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;\n#endif\n  posProj.z -\x3d groundRelative * polygonOffset * posProj.w;\n  return posProj;\n}\nuniform float uRenderTransparentlyOccludedHUD;\nbool testVisibilityHUD(vec4 posProj) {\n  vec4 posProjCenter \x3d alignToPixelCenter(posProj, viewport.zw);\n  vec4 occlusionPixel \x3d texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\n  if (uRenderTransparentlyOccludedHUD \x3e 0.5) {\n    return occlusionPixel.r * occlusionPixel.g \x3e 0.0 \x26\x26 occlusionPixel.g * uRenderTransparentlyOccludedHUD \x3c 1.0;\n  }\n  else {\n    return occlusionPixel.r * occlusionPixel.g \x3e 0.0 \x26\x26 occlusionPixel.g \x3d\x3d 1.0;\n  }\n}",
"normalEncoding.glsl":"vec3 decodeNormal(vec2 f) {\n    float z \x3d 1.0 - abs(f.x) - abs(f.y);\n    return vec3(f + sign(f) * min(z, 0.0), z);\n}","pbrUtils.glsl":"struct PBRShading\n{\n    float NdotL;\n    float NdotV;\n    float NdotH;\n    float VdotH;\n    float LdotH;\n    float VdotN;\n};\nconst float PI_W \x3d 3.14159265;\n#ifdef OVERLAY\n  float dtrExponent \x3d 2.0;\n#else\n  uniform float dtrExponent;\n#endif\nvec3 fresnelReflection(float VdotH, vec3 f0, float f0Max) {\n    return f0 + (f0Max - f0) * pow(1.0 - VdotH, 5.0);\n}\nfloat normalDistributionWater(float NdotH, float roughness)\n{\n  float r2 \x3d roughness * roughness;\n  float NdotH2 \x3d NdotH * NdotH;\n  float denom \x3d pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI_W;\n  return r2 / denom;\n}\nfloat geometricOcclusionKelemen(float LoH)\n{\n    return 0.25 / (LoH * LoH);\n}\nvec3 calculateSpecularReflectanceWater(in PBRShading props, float roughness, vec3 F0, float F0Max)\n{\n  vec3  F \x3d fresnelReflection(props.VdotH, F0, F0Max);\n  float D \x3d normalDistributionWater(props.NdotH, roughness);\n  float V \x3d geometricOcclusionKelemen(props.LdotH);\n  return (D * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\n  return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}",
"quad.vert":"#include \x3cutil/vsPrecision.glsl\x3e\nattribute vec2 position;\nvarying vec2 uv;\nvoid main(void) {\n  gl_Position \x3d vec4(position.x, position.y, .0, 1.0);\n  uv \x3d position * .5 + vec2(.5);\n}","sceneLighting.glsl":"uniform vec3 lightingMainDirection;\nuniform vec3 lightingMainIntensity;\n#ifndef SH_ORDER\n  #ifdef USE_PBR\n    #define SH_ORDER 0\n  #else\n    #define SH_ORDER 2\n  #endif\n#endif\n#if SH_ORDER \x3d\x3d 0\n  uniform vec3 lightingAmbientSH0;\n#elif SH_ORDER \x3d\x3d 1\n  uniform vec4 lightingAmbientSH_R;\n  uniform vec4 lightingAmbientSH_G;\n  uniform vec4 lightingAmbientSH_B;\n#elif SH_ORDER \x3d\x3d 2\n  uniform vec3 lightingAmbientSH0;\n  uniform vec4 lightingAmbientSH_R1;\n  uniform vec4 lightingAmbientSH_G1;\n  uniform vec4 lightingAmbientSH_B1;\n  uniform vec4 lightingAmbientSH_R2;\n  uniform vec4 lightingAmbientSH_G2;\n  uniform vec4 lightingAmbientSH_B2;\n#endif\nuniform float lightingFixedFactor;\nuniform float lightingGlobalFactor;\nuniform float ambientBoostFactor;\nuniform vec3 groundColor;\nconst float GAMMA \x3d 2.1;\nconst float PI \x3d 3.14159;\nconst float halfPI \x3d 1.57079;\nconst float invPI \x3d 0.318309;\nconst float skyIlluminationAngle \x3d 1.57079;\n#ifdef USE_PBR\n  #ifdef USE_PBR_CLEAR_COATING\n    uniform float clearCoating;\n    uniform float clearCoatRoughness;\n  #endif\n#endif\nconst vec3 clearCoatingFresnel \x3d vec3(0.04);\nstruct PBRShadingInfo\n{\n    float NdotL;\n    float NdotV;\n    float NdotH;\n    float VdotH;\n    float LdotH;\n    float NdotNG;\n    float RdotNG;\n    vec3 diffuseColor;\n    vec3 ambientSky;\n    vec3 ambientGround;\n    float ssao;\n    vec3 groundColor;\n    vec3 albedoLinear;\n    vec3 f0;\n    vec3 f90;\n    vec3 f0_ClearCoating;\n    vec3 f90_ClearCoating;\n    float roughnessClearCoating;\n    float coating;\n    float metalness;\n    float roughness;\n    float refraction;\n};\nvec3 calculateAmbientComponent(vec3 normal, float ssao)\n{\n  #if SH_ORDER \x3d\x3d 0\n    vec3 ambientLight \x3d 0.282095 * lightingAmbientSH0;\n  #elif SH_ORDER \x3d\x3d 1\n    vec4 sh0 \x3d vec4(\n      0.282095,\n      0.488603 * normal.x,\n      0.488603 * normal.z,\n      0.488603 * normal.y\n    );\n    vec3 ambientLight \x3d vec3(\n      dot(lightingAmbientSH_R, sh0),\n      dot(lightingAmbientSH_G, sh0),\n      dot(lightingAmbientSH_B, sh0)\n    );\n  #elif SH_ORDER \x3d\x3d 2\n    vec3 ambientLight \x3d 0.282095 * lightingAmbientSH0;\n    vec4 sh1 \x3d vec4(\n      0.488603 * normal.x,\n      0.488603 * normal.z,\n      0.488603 * normal.y,\n      1.092548 * normal.x * normal.y\n    );\n    vec4 sh2 \x3d vec4(\n      1.092548 * normal.y * normal.z,\n      0.315392 * (3.0 * normal.z * normal.z - 1.0),\n      1.092548 * normal.x * normal.z,\n      0.546274 * (normal.x * normal.x - normal.y * normal.y)\n    );\n    ambientLight +\x3d vec3(\n      dot(lightingAmbientSH_R1, sh1),\n      dot(lightingAmbientSH_G1, sh1),\n      dot(lightingAmbientSH_B1, sh1)\n    );\n    ambientLight +\x3d vec3(\n      dot(lightingAmbientSH_R2, sh2),\n      dot(lightingAmbientSH_G2, sh2),\n      dot(lightingAmbientSH_B2, sh2)\n    );\n  #endif\n  ambientLight *\x3d (1.0 - ssao);\n  return ambientLight;\n}\nvec3 evaluateSceneLighting(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight) {\n  #if defined(TREE_RENDERING)\n    float minDot \x3d -0.5;\n    float dotRange \x3d 1.0 - minDot;\n    float dotNormalization \x3d 0.66;\n    float dotVal \x3d dotNormalization * (clamp(-dot(normal, lightingMainDirection), 1.0 - dotRange, 1.0) - minDot) * (1.0 / dotRange);\n  #else\n    float dotVal \x3d clamp(-dot(normal, lightingMainDirection), 0.0, 1.0);\n  #endif\n  dotVal \x3d mix(dotVal, 1.0, lightingFixedFactor);\n  vec3 mainLight \x3d (1.0 - shadow) * lightingMainIntensity * dotVal;\n  vec3 ambientLight \x3d calculateAmbientComponent(normal, ssao);\n  vec3 albedoGammaC \x3d pow(albedo, vec3(GAMMA));\n  vec3 totalLight \x3d mainLight + ambientLight + additionalLight;\n  totalLight \x3d min(totalLight, vec3(PI, PI, PI));\n  vec3 outColor \x3d vec3((albedoGammaC / PI) * (totalLight));\n  outColor \x3d pow(outColor, vec3(1.0/GAMMA));\n  return outColor;\n}\nvec3 sceneLightingAdditionalLightGlobal(vec3 worldPos, float ssao, out float additionalAmbientScale) {\n#if VIEWING_MODE \x3d\x3d VIEWING_MODE_GLOBAL\n    float vndl \x3d -dot(normalize(worldPos), lightingMainDirection);\n#else\n    float vndl \x3d -dot(vec3(0.0, 0.0, 1.0), lightingMainDirection);\n#endif\n  additionalAmbientScale \x3d smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n  return ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n}\n#ifdef USE_PBR\n  vec3 fresnelReflection(float angle, vec3 f0, vec3 f90) {\n      return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n  }\n  vec3 calculateDiffuseReflectanceFactor(PBRShadingInfo inputs)\n  {\n    return (1.0 - inputs.metalness) * inputs.albedoLinear * invPI;\n  }\n  float normalDistribution(float NdotH, float roughness)\n  {\n    float r2 \x3d roughness * roughness;\n    float NdotH2 \x3d NdotH * NdotH;\n    float denom \x3d (NdotH2 * (r2 - 1.0) + 1.0) * (NdotH2 * (r2 - 1.0) + 1.0) * PI;\n    return r2 / denom;\n  }\n  float geometricOcclusion(float NdotV, float NdotL, float roughness)\n  {\n      float a2 \x3d roughness * roughness;\n      float GGXL \x3d NdotV * sqrt((-NdotL * a2 + NdotL) * NdotL + a2);\n      float GGXV \x3d NdotL * sqrt((-NdotV * a2 + NdotV) * NdotV + a2);\n      return 0.5 / (GGXV + GGXL);\n  }\n  float geometricOcclusionKelemen(float LoH)\n  {\n      return 0.25 / (LoH * LoH);\n  }\n  vec3 calculateSpecularReflectanceFactor(PBRShadingInfo inputs, float roughness, vec3 f0, vec3 f90)\n  {\n    vec3  F \x3d fresnelReflection(inputs.VdotH, f0, f90);\n    float D \x3d normalDistribution(inputs.NdotH, roughness);\n    float V \x3d geometricOcclusion(inputs.NdotV, inputs.NdotL, roughness);\n    return (D * V) * F;\n  }\n  vec3 brdfPBR(PBRShadingInfo inputs)\n  {\n    vec3 diffuseComponent  \x3d calculateDiffuseReflectanceFactor(inputs);\n    vec3 specularComponent   \x3d calculateSpecularReflectanceFactor(inputs, inputs.roughness, inputs.f0, inputs.f90);\n    #ifdef USE_PBR_CLEAR_COATING\n      vec3  Fc \x3d fresnelReflection(inputs.LdotH, inputs.f0_ClearCoating, , inputs.f90_ClearCoating) * inputs.coating;\n      float Dc \x3d normalDistribution(inputs.NdotH, inputs.roughnessClearCoating);\n      float Vc \x3d geometricOcclusionKelemen(inputs.LdotH);\n      vec3 specularComponentCoating \x3d  (Dc * Vc) * Fc;\n      return (1.0 - inputs.ssao) * (diffuseComponent * (1.0-Fc) + specularComponent * (1.0-Fc) * (1.0-Fc) + specularComponentCoating);\n    #else\n      return (1.0 - inputs.ssao) * (diffuseComponent + specularComponent);\n    #endif\n  }\n  vec3 calculateGroundComponent(PBRShadingInfo inputs)\n  {\n    return inputs.groundColor * inputs.ambientSky;\n  }\n  vec2 prefilteredDFG_Analytical(PBRShadingInfo inputs) {\n      const vec4 c0 \x3d vec4(-1.0, -0.0275, -0.572,  0.022);\n      const vec4 c1 \x3d vec4( 1.0,  0.0425,  1.040, -0.040);\n      vec4 r \x3d inputs.roughness * c0 + c1;\n      float a004 \x3d min(r.x * r.x, exp2(-9.28 * inputs.NdotV)) * r.x + r.y;\n      return vec2(-1.04, 1.04) * a004 + r.zw;\n  }\n      vec3 evaluateIrradianceIntegral(float firstAngle, float secondAngle, PBRShadingInfo inputs)\n      {\n        float firstAngleClamped \x3d clamp(firstAngle, 0.0, halfPI);\n        float secondAngleClamped \x3d clamp(secondAngle, 0.0, halfPI);\n        float ground \x3d sin(firstAngleClamped) - sin(0.0) + sin(halfPI) - sin(secondAngleClamped);\n        float sky \x3d sin(secondAngleClamped) - sin(firstAngleClamped);\n        return ground * inputs.ambientGround + sky * inputs.ambientSky;\n      }\n      vec3 evaluateDiffuseIllumination_Analytical(PBRShadingInfo inputs)\n      {\n        float theta \x3d acos(max(min(inputs.NdotNG, 1.0), -1.0));\n        float firstAngle \x3d halfPI + theta - skyIlluminationAngle;\n        float secondAngle \x3d halfPI + theta + skyIlluminationAngle;\n        vec3 LeftIntegral \x3d evaluateIrradianceIntegral(halfPI - secondAngle, halfPI - firstAngle, inputs);\n        vec3 RightIntegral \x3d evaluateIrradianceIntegral(firstAngle - halfPI, secondAngle - halfPI, inputs);\n        vec3 ambientDiffuseLight \x3d (1.0 - inputs.ssao) * (LeftIntegral + RightIntegral) / 2.0;\n        return ambientDiffuseLight;\n      }\n      float integratedRadiance(float theta, float roughness)\n      {\n        float r4 \x3d pow(roughness, 4.0);\n        float r2 \x3d pow(roughness, 2.0);\n        float cosT2 \x3d cos(theta) * cos(theta);\n        float denom_1 \x3d (cosT2 * (2.0 * r4 - 4.0 * r2 + 2.0) + 2.0 * r2 - 2.0);\n        float denom_2 \x3d (2.0 * r4 - 2.0 * r2);\n        float integral \x3d 2.0 * r2 * (1.0 / denom_1 - 1.0 / denom_2);\n        return integral;\n      }\n      vec3 evaluateRadianceIntegral(float firstAngle, float secondAngle, PBRShadingInfo inputs, float roughness)\n      {\n        float firstAngleClamped \x3d clamp(firstAngle, 0.0, halfPI);\n        float secondAngleClamped \x3d clamp(secondAngle, 0.0, halfPI);\n        float ro \x3d roughness;\n        float ground \x3d integratedRadiance(firstAngleClamped, ro) - integratedRadiance(0.0, ro) + integratedRadiance(halfPI, ro) - integratedRadiance(secondAngleClamped, ro);\n        float sky \x3d integratedRadiance(secondAngleClamped, ro) - integratedRadiance(firstAngleClamped, ro);\n        return ground * inputs.ambientGround + sky * inputs.ambientSky;\n      }\n      vec3 evaluateSpecularIllumination_Analytical(PBRShadingInfo inputs, float RdotNG, float roughness)\n      {\n        float theta \x3d acos(max(min(RdotNG, 1.0), -1.0));\n        float firstPoint \x3d - halfPI + theta + skyIlluminationAngle;\n        float secondPoint \x3d - halfPI + theta - skyIlluminationAngle;\n        vec3 LeftIntegral \x3d evaluateRadianceIntegral(halfPI - firstPoint, halfPI - secondPoint, inputs, roughness);\n        vec3 RightIntegral \x3d evaluateRadianceIntegral(secondPoint - halfPI, firstPoint - halfPI, inputs, roughness);\n        vec3 enviromentSpecularLight \x3d (1.0 - inputs.ssao) * (LeftIntegral + RightIntegral) / 2.0;\n        return enviromentSpecularLight;\n      }\n  vec3 evaluateEnviromentIllumination(PBRShadingInfo inputs) {\n      vec3 indirectDiffuse \x3d evaluateDiffuseIllumination_Analytical(inputs);\n      vec3 indirectSpecular \x3d evaluateSpecularIllumination_Analytical(inputs, inputs.RdotNG, inputs.roughness);\n      vec3 diffuseComponent \x3d inputs.diffuseColor * indirectDiffuse * invPI;\n      vec2 dfg \x3d prefilteredDFG_Analytical(inputs);\n      vec3 specularColor \x3d inputs.f0 * dfg.x + 1.0 * dfg.y;\n      vec3 specularComponent \x3d specularColor * indirectSpecular;\n      #ifdef USE_PBR_CLEAR_COATING\n        vec3 Fc \x3d fresnelReflection(inputs.NdotV, inputs.f0_ClearCoating) * inputs.coating;\n        diffuseComponent  *\x3d 1.0 - Fc;\n        specularComponent *\x3d (1.0 - Fc) * (1.0 - Fc);\n        specularComponent +\x3d evaluateSpecularIllumination_Analytical(inputs, inputs.RdotNG, inputs.roughnessClearCoating) * Fc;\n      #endif\n      return (diffuseComponent + specularComponent);\n  }\n  vec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, float _roughness, float _metalness, vec3 _emission)\n  {\n    vec3 viewDirection \x3d - normalize(viewDir);\n    vec3 mainLightDirection \x3d -lightingMainDirection;\n    vec3 h \x3d normalize(viewDirection + mainLightDirection);\n    PBRShadingInfo inputs;\n    inputs.NdotL \x3d clamp(dot(normal, mainLightDirection), 0.001, 1.0);\n    inputs.NdotV \x3d clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\n    inputs.NdotH \x3d clamp(dot(normal, h), 0.0, 1.0);\n    inputs.VdotH \x3d clamp(dot(viewDirection, h), 0.0, 1.0);\n    inputs.LdotH \x3d clamp(dot(mainLightDirection, h), 0.0, 1.0);\n    inputs.NdotNG \x3d clamp(dot(normal, normalize(normalGround)), -1.0, 1.0);\n    vec3 reflectedView \x3d normalize(reflect(viewDirection, normal));\n    inputs.refraction \x3d dot(viewDirection, normal);\n    inputs.RdotNG \x3d clamp(dot(reflectedView, normalize(normalGround)), -1.0, 1.0);\n    inputs.albedoLinear \x3d pow(albedo, vec3(GAMMA));\n    inputs.groundColor \x3d pow(vec3(0.5, 0.5, 0.5), vec3(GAMMA));\n    inputs.ssao \x3d ssao;\n    inputs.roughness \x3d clamp(_roughness * _roughness, 0.001, 0.99);\n    inputs.metalness \x3d _metalness;\n    inputs.f0 \x3d vec3(0.04) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\n    inputs.f90 \x3d vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\n    inputs.diffuseColor \x3d inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);\n    #ifdef USE_PBR_CLEAR_COATING\n      inputs.f0_ClearCoating \x3d clearCoatingFresnel;\n      inputs.f90_ClearCoating \x3d vec3(clamp(dot(inputs.f0_ClearCoating, vec3(50.0 * 0.33)), 0.0, 1.0));\n      float clearCoatRoughnessLinear \x3d mix(0.089, 0.6, clearCoatRoughness);\n      inputs.roughnessClearCoating \x3d clearCoatRoughnessLinear * clearCoatRoughnessLinear;\n      inputs.coating \x3d clearCoating;\n    #endif\n    inputs.ambientSky    \x3d calculateAmbientComponent(normal, ssao) * 1.2 - 0.2;\n    inputs.ambientGround \x3d calculateGroundComponent(inputs);\n    inputs.NdotL \x3d mix(inputs.NdotL, 1.0, lightingFixedFactor);\n    vec3 enviromentComponent \x3d evaluateEnviromentIllumination(inputs);\n    vec3 additionalLightComponents \x3d inputs.albedoLinear * (additionalLight) * invPI;\n    vec3 reflectanceFactor \x3d brdfPBR(inputs);\n    vec3 incidentLight  \x3d  inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\n    vec3 outColorLinear \x3d  incidentLight * reflectanceFactor + enviromentComponent + additionalLightComponents + pow(_emission, vec3(GAMMA));\n    vec3 outColor \x3d pow(outColorLinear, vec3(1.0/GAMMA));\n    return outColor;\n  }\n#endif",
"screenSizePerspective.glsl":"float screenSizePerspectiveMinSize(float size, vec4 factor) {\n  float nonZeroSize \x3d 1.0 - step(size, 0.0);\n  return (\n    factor.z * (\n      1.0 +\n      nonZeroSize *\n      2.0 * factor.w / (\n        size + (1.0 - nonZeroSize)\n      )\n    )\n  );\n}\nfloat screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\n  return absCosAngle * absCosAngle * absCosAngle;\n}\nvec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\n  return vec4(min(params.x / (distanceToCamera - params.y), 1.0), screenSizePerspectiveViewAngleDependentFactor(absCosAngle), params.z, params.w);\n}\nfloat applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\n  return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}\nfloat screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\n  return applyScreenSizePerspectiveScaleFactorFloat(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}\nvec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\n  return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n}\nvec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\n  return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}",
"shadow.glsl":"#include \x3cutil/encoding.glsl\x3e\nfloat evalShadow(const in vec3 vpos, const in float depth, const in sampler2D depthTex, const int num, const in vec4 distance, in mat4 matrix[4], const in float halfPxSz) {\n  int i \x3d depth \x3c distance[1] ? 0 : depth \x3c distance[2] ? 1 : depth \x3c distance[3] ? 2 : 3;\n  if (i \x3e\x3d num) { return .0; }\n  mat4 mat \x3d i \x3d\x3d 0 ? matrix[0] : i \x3d\x3d 1 ? matrix[1] : i \x3d\x3d 2 ? matrix[2] : matrix[3];\n  vec4 lv \x3d mat * vec4(vpos, 1.0);\n  lv.xy /\x3d lv.w;\n  vec3 lvpos \x3d .5 * lv.xyz + vec3(.5);\n  if (lvpos.z \x3e\x3d 1.0) { return .0; }\n  if (lvpos.x \x3c .0 || lvpos.x \x3e 1.0 || lvpos.y \x3c .0 || lvpos.y \x3e 1.0) { return .0; }\n  vec2 uv \x3d vec2(float(i - 2 * (i / 2)) *.5, float(i / 2) * .5) + .5 * lvpos.xy;\n  float texSize \x3d .5 / halfPxSz;\n  vec2 st \x3d fract((vec2(halfPxSz) + uv) * texSize);\n  float s00 \x3d rgba2float(texture2D(depthTex, uv + vec2(-halfPxSz, -halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s10 \x3d rgba2float(texture2D(depthTex, uv + vec2(halfPxSz, -halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s11 \x3d rgba2float(texture2D(depthTex, uv + vec2(halfPxSz, halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  float s01 \x3d rgba2float(texture2D(depthTex, uv + vec2(-halfPxSz, halfPxSz))) \x3c lvpos.z ? 1.0 : .0;\n  return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}",
"slice.glsl":"#ifdef SLICE\nuniform vec3 slicePlaneOrigin;\nuniform vec3 slicePlaneBasis1;\nuniform vec3 slicePlaneBasis2;\nstruct SliceFactors {\n  float front;\n  float side0;\n  float side1;\n  float side2;\n  float side3;\n};\nSliceFactors calculateSliceFactors(vec3 pos) {\n  vec3 rel \x3d pos - slicePlaneOrigin;\n  vec3 slicePlaneNormal \x3d -cross(slicePlaneBasis1, slicePlaneBasis2);\n  float slicePlaneW \x3d -dot(slicePlaneNormal, slicePlaneOrigin);\n  float basis1Len2 \x3d dot(slicePlaneBasis1, slicePlaneBasis1);\n  float basis2Len2 \x3d dot(slicePlaneBasis2, slicePlaneBasis2);\n  float basis1Dot \x3d dot(slicePlaneBasis1, rel);\n  float basis2Dot \x3d dot(slicePlaneBasis2, rel);\n  return SliceFactors(\n    dot(slicePlaneNormal, pos) + slicePlaneW,\n    -basis1Dot - basis1Len2,\n    basis1Dot - basis1Len2,\n    -basis2Dot - basis2Len2,\n    basis2Dot - basis2Len2\n  );\n}\nbool sliceByFactors(SliceFactors factors) {\n  return factors.front \x3c 0.0\n    \x26\x26 factors.side0 \x3c 0.0\n    \x26\x26 factors.side1 \x3c 0.0\n    \x26\x26 factors.side2 \x3c 0.0\n    \x26\x26 factors.side3 \x3c 0.0;\n}\nbool sliceByPlane(vec3 pos) {\n  return sliceByFactors(calculateSliceFactors(pos));\n}\n#ifdef EXTENSIONS_ENABLED\nvec4 applySliceHighlight(vec4 color, vec3 pos) {\n  SliceFactors factors \x3d calculateSliceFactors(pos);\n  if (sliceByFactors(factors)) {\n    return color;\n  }\n  const float HIGHLIGHT_WIDTH \x3d 1.0;\n  const vec4 HIGHLIGHT_COLOR \x3d vec4(0.0, 0.0, 0.0, 0.3);\n  factors.front /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\n  factors.side0 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\n  factors.side1 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\n  factors.side2 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\n  factors.side3 /\x3d (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\n  float highlightFactor \x3d (1.0 - step(0.5, factors.front))\n    * (1.0 - step(0.5, factors.side0))\n    * (1.0 - step(0.5, factors.side1))\n    * (1.0 - step(0.5, factors.side2))\n    * (1.0 - step(0.5, factors.side3));\n  return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n}\n#else\n#endif\n#define rejectBySlice(_pos_) sliceByPlane(_pos_)\n#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }\n#ifdef SLICE_HIGHLIGHT_DISABLED\n#define highlightSlice(_color_, _pos_) (_color_)\n#else\n#define highlightSlice(_color_, _pos_) applySliceHighlight(_color_, _pos_)\n#endif\n#else\n#define rejectBySlice(_pos_) false\n#define discardBySlice(_pos_) {}\n#define highlightSlice(_color_, _pos_) (_color_)\n#endif",
"visualVariables.glsl":"#if defined(VV_SIZE)\n  #define VV_CUSTOM_MODEL_MATRIX\n#endif\n#if defined(VV_SIZE)\n  uniform vec3 vvSizeMinSize;\n  uniform vec3 vvSizeMaxSize;\n  uniform vec3 vvSizeOffset;\n  uniform vec3 vvSizeFactor;\n#elif defined(VV_CUSTOM_MODEL_MATRIX)\n  uniform vec3 vvSizeValue;\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  uniform mat3 vvSymbolRotationMatrix;\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  uniform vec3 vvSymbolAnchor;\n#endif\n#ifdef VV_COLOR\n  #define VV_COLOR_N 8\n  uniform float vvColorValues[VV_COLOR_N];\n  uniform vec4 vvColorColors[VV_COLOR_N];\n#endif\n#if defined(VV_SIZE)\n  vec3 vvGetScale(vec4 featureAttribute) {\n    return clamp(vvSizeOffset + featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n  }\n#elif defined(VV_CUSTOM_MODEL_MATRIX)\n  vec3 vvGetScale(vec4 featureAttribute) {\n    return vvSizeValue;\n  }\n#endif\n#ifdef VV_CUSTOM_MODEL_MATRIX\n  vec4 vvTransformPosition(vec3 position, vec4 featureAttribute) {\n    return vec4(vvSymbolRotationMatrix * (vvGetScale(featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n  }\n  vec4 vvTransformNormal(vec3 normal, vec4 featureAttribute) {\n    return vec4(vvSymbolRotationMatrix * normal / vvGetScale(featureAttribute), 1.0);\n  }\n#endif\n#ifdef VV_COLOR\n  vec4 vvGetColor(vec4 featureAttribute, float values[VV_COLOR_N], vec4 colors[VV_COLOR_N]) {\n    float value \x3d featureAttribute.y;\n    if (value \x3c\x3d values[0]) {\n      return colors[0];\n    }\n    for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\n      if (values[i] \x3e\x3d value) {\n        float f \x3d (value - values[i-1]) / (values[i] - values[i-1]);\n        return mix(colors[i-1], colors[i], f);\n      }\n    }\n    return colors[VV_COLOR_N - 1];\n  }\n#endif",
"vsPrecision.glsl":"precision highp float;\nprecision highp sampler2D;"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["require","exports"],function(r,d){return function(){function d(l){this.readFile=l}d.prototype.resolveIncludes=function(l){return this.resolve(l)};d.prototype.resolve=function(l,k){var b=this;void 0===k&&(k=new Map);if(k.has(l))return k.get(l);var h=this.read(l);if(!h)throw Error("cannot find shader file "+l);for(var g=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,e=g.exec(h),
c=[];null!=e;)c.push({path:e[1],start:e.index,length:e[0].length}),e=g.exec(h);var f=0,a="";c.forEach(function(c){a+=h.slice(f,c.start);a+=k.has(c.path)?"":b.resolve(c.path,k);f=c.start+c.length});a+=h.slice(f);k.set(l,a);return a};d.prototype.read=function(l){return this.readFile(l)};return d}()})},"esri/views/webgl/programUtils":function(){define(["require","exports","./Program"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.glslifyDefineMap=function(l){var k="",b;for(b in l){var h=
l[b];if("boolean"===typeof h)h&&(k+="#define "+b+"\n");else if("number"===typeof h)k+="#define "+b+" "+h.toFixed()+"\n";else if("object"===typeof h){var g=h.options,e=0,c;for(c in g)k+="#define "+g[c]+" "+(e++).toFixed()+"\n";k+="#define "+b+" "+g[h.value]+"\n"}}return k};d.createProgram=function(l,k,b,h){b=b||{};h=h||"";b="function"===typeof k.shaders?k.shaders(b):k.shaders;return new n(l,h+b.vertexShader,h+b.fragmentShader,k.attributes)}})},"esri/views/webgl/Program":function(){define(["require",
"exports","../../core/has","./ShaderTranspiler"],function(r,d,n,l){return function(){function k(b,h,g,e,c){void 0===c&&(c={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4=
{};b||console.error("RenderingContext isn't initialized!");0===h.length&&console.error("Shaders source should not be empty!");this._context=b;this._vertexShaderSource=h;this._fragmentShaderSource=g;if(Array.isArray(c))for(b=0;b<c.length;b++)this._defines[c[b]]="1";else this._defines=c;this._id=k._nextId++;this._locations=e}Object.defineProperty(k.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});k.prototype.getDefine=function(b){return this._defines[b]};k.prototype.dispose=function(){if(this._context){var b=this._context.gl;this._vShader&&(b.deleteShader(this._vShader),this._vShader=null);this._fShader&&(b.deleteShader(this._fShader),this._fShader=null);this._glName&&(b.deleteProgram(this._glName),this._glName=null);this._context=null}};k.prototype.initialize=
function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var b=this._context.gl,h=b.createProgram();b.attachShader(h,this._vShader);b.attachShader(h,this._fShader);for(var g in this._locations)b.bindAttribLocation(h,this._locations[g],g);b.linkProgram(h);b.getProgramParameter(h,b.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+b.getProgramParameter(h,
b.VALIDATE_STATUS)+", gl error ["+b.getError()+"]infoLog: "+b.getProgramInfoLog(h));this._glName=h;this._initialized=!0}};k.prototype.getUniformLocation=function(b){this.initialize();void 0===this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,b));return this._nameToUniformLocation[b]};k.prototype.hasUniform=function(b){return null!==this.getUniformLocation(b)};k.prototype.getAttribLocation=function(b){this.initialize();void 0===this._nameToAttribLocation[b]&&
(this._nameToAttribLocation[b]=this._context.gl.getAttribLocation(this._glName,b));return this._nameToAttribLocation[b]};k.prototype.setUniform1i=function(b,h){var g=this._nameToUniform1[b];if(void 0===g||h!==g)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(b),h),this._nameToUniform1[b]=h};k.prototype.setUniform1iv=function(b,h){var g=this._nameToUniform1v[b];void 0!==g&&k._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(b),
h),void 0===g?this._nameToUniform1v[b]=k._arrayCopy(h):k._arrayAssign(h,g))};k.prototype.setUniform1f=function(b,h){var g=this._nameToUniform1[b];if(void 0===g||h!==g)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(b),h),this._nameToUniform1[b]=h};k.prototype.setUniform1fv=function(b,h){var g=this._nameToUniform1v[b];void 0!==g&&k._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(b),h),void 0===g?this._nameToUniform1v[b]=
k._arrayCopy(h):k._arrayAssign(h,g))};k.prototype.setUniform2f=function(b,h,g){var e=this._nameToUniform2[b];if(void 0===e||h!==e[0]||g!==e[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(b),h,g),void 0===e?this._nameToUniform2[b]=[h,g]:(e[0]=h,e[1]=g)};k.prototype.setUniform2fv=function(b,h){var g=this._nameToUniform2[b];void 0!==g&&k._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(b),h),void 0===g?this._nameToUniform2[b]=
k._arrayCopy(h):k._arrayAssign(h,g))};k.prototype.setUniform3f=function(b,h,g,e){var c=this._nameToUniform3[b];if(void 0===c||h!==c[0]||g!==c[1]||e!==c[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(b),h,g,e),void 0===c?this._nameToUniform3[b]=[h,g,e]:(c[0]=h,c[1]=g,c[2]=e)};k.prototype.setUniform3fv=function(b,h){var g=this._nameToUniform3[b];void 0!==g&&k._arraysEqual(h,g)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(b),
h),void 0===g?this._nameToUniform3[b]=k._arrayCopy(h):k._arrayAssign(h,g))};k.prototype.setUniform4f=function(b,h,g,e,c){var f=this._nameToUniform4[b];if(void 0===f||h!==f[0]||g!==f[1]||e!==f[2]||c!==f[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(b),h,g,e,c),void 0===f?this._nameToUniform4[b]=[h,g,e,c]:(f[0]=h,f[1]=g,f[2]=e,f[3]=c)};k.prototype.setUniform4fv=function(b,h){var g=this._nameToUniform4[b];void 0!==g&&k._arraysEqual(h,g)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(b),h),void 0===g?this._nameToUniform4[b]=k._arrayCopy(h):k._arrayAssign(h,g))};k.prototype.setUniformMatrix3fv=function(b,h,g){void 0===g&&(g=!1);var e=this._nameToUniformMatrix3[b];void 0!==e&&(9===e.length?k._matrix3Equal(e,h):k._arraysEqual(h,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(b),g,h),void 0===e?this._nameToUniformMatrix3[b]=k._arrayCopy(h):k._arrayAssign(h,e))};k.prototype.setUniformMatrix4fv=
function(b,h,g){void 0===g&&(g=!1);var e=this._nameToUniformMatrix4[b];void 0!==e&&(16===e.length?k._matrix4Equal(e,h):k._arraysEqual(h,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(b),g,h),void 0===e?this._nameToUniformMatrix4[b]=k._arrayCopy(h):k._arrayAssign(h,e))};k._padToThree=function(b){var h=b.toString();1E3>b&&(h=("  "+b).slice(-3));return h};k.prototype._addLineNumbers=function(b){var h=2;return b.replace(/\n/g,function(){return"\n"+k._padToThree(h++)+
":"})};k.prototype._loadShader=function(b){var h=35633===b,g=h?this._vertexShaderSource:this._fragmentShaderSource,e;e="";for(var c in this._defines)e+="#define "+c+" "+this._defines[c]+"\n";e+=g;"webgl2"===this._context.contextVersion&&(e=l.transpileShader(e,h?"vertex":"fragment"));h=this._context.gl;b=h.createShader(b);h.shaderSource(b,e);h.compileShader(b);h.getShaderParameter(b,h.COMPILE_STATUS)||(console.error(h.getShaderInfoLog(b)),console.error(this._addLineNumbers(e)),"webgl2"===this._context.contextVersion&&
(console.log("Shader source before transpilation:"),console.log(g)));return b};k._matrix4Equal=function(b,h){return b[0]===h[0]&&b[1]===h[1]&&b[2]===h[2]&&b[3]===h[3]&&b[4]===h[4]&&b[5]===h[5]&&b[6]===h[6]&&b[7]===h[7]&&b[8]===h[8]&&b[9]===h[9]&&b[10]===h[10]&&b[11]===h[11]&&b[12]===h[12]&&b[13]===h[13]&&b[14]===h[14]&&b[15]===h[15]};k._matrix3Equal=function(b,h){return b[0]===h[0]&&b[1]===h[1]&&b[2]===h[2]&&b[3]===h[3]&&b[4]===h[4]&&b[5]===h[5]&&b[6]===h[6]&&b[7]===h[7]&&b[8]===h[8]};k._arraysEqual=
function(b,h){if(b.length!==h.length)return!1;for(var g=0;g<b.length;++g)if(b[g]!==h[g])return!1;return!0};k._arrayCopy=function(b){for(var h=[],g=0;g<b.length;++g)h.push(b[g]);return h};k._arrayAssign=function(b,h){for(var g=0;g<b.length;++g)h[g]=b[g]};k._nextId=0;return k}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(r,d,n,l){function k(b){return b.map(function(b){return"eof"!==b.type?b.data:""}).join("")}
function b(e,c,f,a){a=a||f;for(var g=0;g<e.length;g++){var h=e[g];if("ident"===h.type&&h.data===f)return a in c?c[a]++:c[a]=0,b(e,c,a+"_"+c[a],a)}return f}function h(b,c,f){void 0===f&&(f="afterVersion");var a={data:"\n",type:"whitespace"},e=function(a){return a<b.length?/[^\r\n]$/.test(b[a].data):!1},g=function(a){for(var b=-1,c=0,e=-1,g=0;g<a.length;g++){var h=a[g];"preprocessor"===h.type&&(h.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++c:h.data.match(/\#endif\s*.*/)&&--c);("afterVersion"===f||"afterPrecision"===
f)&&"preprocessor"===h.type&&/^#version/.test(h.data)&&(e=Math.max(e,g));if("afterPrecision"===f&&"keyword"===h.type&&"precision"===h.data){a:{for(h=g;h<a.length;h++){var p=a[h];if("operator"===p.type&&";"===p.data)break a}h=null}if(null===h)throw Error("precision statement not followed by any semicolons!");e=Math.max(e,h)}b<e&&0===c&&(b=g)}return b+1}(b);e(g-1)&&b.splice(g++,0,a);for(var h=0;h<c.length;h++){var k=c[h];b.splice(g++,0,k)}e(g-1)&&e(g)&&b.splice(g,0,a)}Object.defineProperty(d,"__esModule",
{value:!0});var g=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];d.transpileShader=function(e,c){e=l(e);var f;a:{f="100";var a="300 es";void 0===f&&(f="100");void 0===a&&(a="300 es");for(var p=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,d=0;d<e.length;d++){var v=e[d];if("preprocessor"===v.type){var t=p.exec(v.data);if(t){p=t[1].replace(/\s\s+/g," ");if(p===a){f=p;break a}if(p===f){v.data="#version "+a;break a}throw Error("unknown glsl version: "+
p);}}}e.splice(0,0,{type:"preprocessor",data:"#version "+a},{type:"whitespace",data:"\n"});f=null}if("300 es"===f)throw Error("shader is already glsl 300 es");p=v=null;d={};t={};for(f=0;f<e.length;++f)switch(a=e[f],a.type){case "keyword":"vertex"===c&&"attribute"===a.data?a.data="in":"varying"===a.data&&(a.data="vertex"===c?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(a.data.trim())&&(a.data=a.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===c&&"gl_FragColor"===
a.data){if(!v){var v=b(e,d,"fragColor"),y=void 0;void 0===y&&(y="lowp");h(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:v},{type:"operator",data:";"}],"afterPrecision")}a.data=v}else"fragment"===c&&"gl_FragDepthEXT"===a.data&&(p||(p=b(e,d,"gl_FragDepth")),a.data=p);break;case "ident":if(0<=n.indexOf(a.data)){if(y="vertex"===c)a:{for(y=f-1;0<=y;y--){var x=
e[y];if("whitespace"!==x.type&&"block-comment"!==x.type)if("keyword"===x.type){if("attribute"===x.data||"in"===x.data){y=!0;break a}}else break}y=!1}if(y)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");a.data in t||(t[a.data]=b(e,d,a.data));a.data=t[a.data]}}for(f=e.length-1;0<=f;--f)a=e[f],"preprocessor"===a.type&&((c=a.data.match(/\#extension\s+(.*)\:/))&&c[1]&&0<=g.indexOf(c[1].trim())&&(c=e[f+1],e.splice(f,c&&"whitespace"===c.type?2:1)),(c=a.data.match(/\#ifdef\s+(.*)/))&&
c[1]&&0<=g.indexOf(c[1].trim())&&(a.data="#if 1"),(c=a.data.match(/\#ifndef\s+(.*)/))&&c[1]&&0<=g.indexOf(c[1].trim())&&(a.data="#if 0"));return k(e)}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(r,d){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(r){"use strict;";return function(d){var n=r(),l=[],l=l.concat(n(d));return l=l.concat(n(null))}})},"esri/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(r,d,n){"use strict;";var l="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function k(a){a.length&&x.push({type:l[q],
data:a,position:u,line:w,column:m})}function b(){y=y.length?[]:y;if("/"===t&&"*"===v)return u=p+a-1,q=0,t=v,a+1;if("/"===t&&"/"===v)return u=p+a-1,q=1,t=v,a+1;if("#"===v)return q=2,u=p+a,a;if(/\s/.test(v))return q=9,u=p+a,a;z=/\d/.test(v);B=/[^\w_]/.test(v);u=p+a;q=z?4:B?3:9999;return a}function h(){if(("\r"===v||"\n"===v)&&"\\"!==t)return k(y.join("")),q=999,a;y.push(v);t=v;return a+1}function g(){if("."===t&&/\d/.test(v))return q=5,a;if("/"===t&&"*"===v)return q=0,a;if("/"===t&&"/"===v)return q=
1,a;if("."===v&&y.length){for(;e(y););q=5;return a}if(";"===v||")"===v||"("===v){if(y.length)for(;e(y););k(v);q=999;return a+1}var b=2===y.length&&"\x3d"!==v;if(/[\w_\d\s]/.test(v)||b){for(;e(y););q=999;return a}y.push(v);t=v;return a+1}function e(a){var b=0,c,e;do{c=d.indexOf(a.slice(0,a.length+b).join(""));e=d[c];if(-1===c){if(0<b--+a.length)continue;e=a.slice(0,1).join("")}k(e);u+=e.length;y=y.slice(e.length);return y.length}while(1)}function c(){if("."===v||/[eE]/.test(v))return y.push(v),q=5,
t=v,a+1;if("x"===v&&1===y.length&&"0"===y[0])return q=11,y.push(v),t=v,a+1;if(/[^\d]/.test(v))return k(y.join("")),q=999,a;y.push(v);t=v;return a+1}function f(){"f"===v&&(y.push(v),t=v,a+=1);if(/[eE]/.test(v)||"-"===v&&/[eE]/.test(t))return y.push(v),t=v,a+1;if(/[^\d]/.test(v))return k(y.join("")),q=999,a;y.push(v);t=v;return a+1}var a=0,p=0,q=999,v,t,y=[],x=[],w=1,m=0,u=0,z=!1,B=!1,C="",F;return function(e){x=[];if(null!==e){e=e.replace?e.replace(/\r\n/g,"\n"):e;a=0;C+=e;for(F=C.length;v=C[a],a<
F;){e=a;switch(q){case 0:"/"===v&&"*"===t?(y.push(v),k(y.join("")),q=999):(y.push(v),t=v);a+=1;break;case 1:a=h();break;case 2:a=h();break;case 3:a=g();break;case 4:a=c();break;case 11:/[^a-fA-F0-9]/.test(v)?(k(y.join("")),q=999):(y.push(v),t=v,a+=1);break;case 5:a=f();break;case 9999:if(/[^\d\w_]/.test(v)){var l=y.join("");q=-1<r.indexOf(l)?8:-1<n.indexOf(l)?7:6;k(y.join(""));q=999}else y.push(v),t=v,a+=1;break;case 9:/[^\s]/g.test(v)?(k(y.join("")),q=999):(y.push(v),t=v,a+=1);break;case 999:a=b()}if(e!==
a)switch(C[e]){case "\n":m=0;++w;break;default:++m}}p+=a;C=C.slice(a);return x}y.length&&k(y.join(""));q=10;k("(eof)");return x}}})},"esri/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/views/webgl/BufferObject":function(){define(["require","exports","../../core/has","../../core/typedArrayUtil"],function(r,d,n,l){return function(){function k(b,h,g,e,c){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=b;this._bufferType=h;this._usage=g;this._id=k._nextId++;this._glName=this._context.gl.createBuffer();e&&this.setData(e,c)}k.createIndex=function(b,h,g,e){return new k(b,34963,h,g,e)};k.createVertex=function(b,
h,g){return new k(b,34962,h,g)};Object.defineProperty(k.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"bufferType",
{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});k.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),
this._context=null)};k.prototype.setData=function(b,h){if(b){if("number"===typeof b){if(0>b&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&h)switch(this._indexType=h,this._size=b,h){case 5123:b*=2;break;case 5125:b*=4}}else h=b.byteLength,l.isUint16Array(b)&&(h/=2,this._indexType=5123),l.isUint32Array(b)&&(h/=4,this._indexType=5125),this._size=h;h=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
b,this._usage);this._context.bindVAO(h)}};k.prototype.setSubData=function(b,h,g,e){void 0===h&&(h=0);void 0===g&&(g=0);if(b){(0>h||h>=this._size)&&console.error("offset is out of range!");var c=h,f=g,a=e,p=b.byteLength;l.isUint16Array(b)&&(p/=2,c*=2,f*=2,a*=2);l.isUint32Array(b)&&(p/=4,c*=4,f*=4,a*=4);void 0===e&&(e=p-1);g>=e&&console.error("end must be bigger than start!");h+g-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");h=this._context.getBoundVAO();this._context.bindVAO(null);
this._context.bindBuffer(this);g=this._context.gl;b=ArrayBuffer.isView(b)?b.buffer:b;g.bufferSubData(this._bufferType,c,b.slice(f,a));this._context.bindVAO(h)}};k._nextId=0;return k}()})},"esri/views/webgl/renderState":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(r,d,n){function l(a){return u.intern(a)}function k(a){return z.intern(a)}function b(a){return B.intern(a)}function h(a){return C.intern(a)}function g(a){return F.intern(a)}function e(a){return E.intern(a)}
function c(a){return N.intern(a)}function f(a){return L.intern(a)}function a(a){return"["+a.join(",")+"]"}function p(b){return b?a([b.srcRgb,b.srcAlpha,b.dstRgb,b.dstAlpha,b.opRgb,b.opAlpha,b.color.r,b.color.g,b.color.b,b.color.a]):null}function q(b){return b?a([b.face,b.mode]):null}function v(b){return b?a([b.factor,b.units]):null}function t(b){return b?a([b.func]):null}function y(b){return b?a([b.function.func,b.function.ref,b.function.mask,b.operation.fail,b.operation.zFail,b.operation.zPass]):
null}function x(b){return b?a([b.zNear,b.zFar]):null}function w(b){return b?a([b.r,b.g,b.b,b.a]):null}function m(b){return b?a([b.mask]):null}Object.defineProperty(d,"__esModule",{value:!0});d.simpleBlendingParams=function(a,b,c,e){void 0===c&&(c=32774);void 0===e&&(e=[0,0,0,0]);return{srcRgb:a,srcAlpha:a,dstRgb:b,dstAlpha:b,opRgb:c,opAlpha:c,color:{r:e[0],g:e[1],b:e[2],a:e[3]}}};d.separateBlendingParams=function(a,b,c,e,f,g,h){void 0===f&&(f=32774);void 0===g&&(g=32774);void 0===h&&(h=[0,0,0,0]);
return{srcRgb:a,srcAlpha:b,dstRgb:c,dstAlpha:e,opRgb:f,opAlpha:g,color:{r:h[0],g:h[1],b:h[2],a:h[3]}}};d.backFaceCullingParams={face:1029,mode:2305};d.defaultDepthWriteParams={zNear:0,zFar:1};d.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};d.makeBlending=l;d.makeCulling=k;d.makePolygonOffset=b;d.makeDepthTest=h;d.makeStencilTest=g;d.makeDepthWrite=e;d.makeColorWrite=c;d.makeStencilWrite=f;d.makePipelineState=function(a){return K.intern(a)};r=function(){function a(a,b){this.makeKey=a;this.makeRef=
b;this.interns=new Map}a.prototype.intern=function(a){if(!a)return null;var b=this.makeKey(a),c=this.interns;c.has(b)||c.set(b,this.makeRef(a));return c.get(b)};return a}();var u=new r(p,function(a){return n({__tag:"Blending"},a)}),z=new r(q,function(a){return n({__tag:"Culling"},a)}),B=new r(v,function(a){return n({__tag:"PolygonOffset"},a)}),C=new r(t,function(a){return n({__tag:"DepthTest"},a)}),F=new r(y,function(a){return n({__tag:"StencilTest"},a)}),E=new r(x,function(a){return n({__tag:"DepthWrite"},
a)}),N=new r(w,function(a){return n({__tag:"ColorWrite"},a)}),L=new r(m,function(a){return n({__tag:"StencilWrite"},a)}),K=new r(function(b){return b?a([p(b.blending),q(b.culling),v(b.polygonOffset),t(b.depthTest),y(b.stencilTest),x(b.depthWrite),w(b.colorWrite),m(b.stencilWrite)]):null},function(a){return{blending:l(a.blending),culling:k(a.culling),polygonOffset:b(a.polygonOffset),depthTest:h(a.depthTest),stencilTest:g(a.stencilTest),depthWrite:e(a.depthWrite),colorWrite:c(a.colorWrite),stencilWrite:f(a.stencilWrite)}});
r=function(){function a(a){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=a}a.prototype.setPipeline=function(a){if(this._pipelineInvalid||a!==this._pipeline)this.setBlending(a.blending),this.setCulling(a.culling),this.setPolygonOffset(a.polygonOffset),this.setDepthTest(a.depthTest),this.setStencilTest(a.stencilTest),
this.setDepthWrite(a.depthWrite),this.setColorWrite(a.colorWrite),this.setStencilWrite(a.stencilWrite),this._pipeline=a;this._pipelineInvalid=!1};a.prototype.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};a.prototype.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};a.prototype.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};a.prototype.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=
!0};a.prototype.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};a.prototype.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};a.prototype.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};a.prototype.setBlending=function(a){this._blending=this.setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);
this._blendingInvalid=!1};a.prototype.setCulling=function(a){this._culling=this.setSubState(a,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};a.prototype.setPolygonOffset=function(a){this._polygonOffset=this.setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};a.prototype.setDepthTest=function(a){this._depthTest=this.setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);
this._depthTestInvalid=!1};a.prototype.setStencilTest=function(a){this._stencilTest=this.setSubState(a,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};a.prototype.setDepthWrite=function(a){this._depthWrite=this.setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};a.prototype.setColorWrite=function(a){this._colorWrite=this.setSubState(a,this._colorWrite,this._colorWriteInvalid,
this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};a.prototype.setStencilWrite=function(a){this._stencilWrite=this.setSubState(a,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};a.prototype.setSubState=function(a,b,c,e){if(c||a!==b)e(a),this._pipelineInvalid=!0;return a};return a}();d.StateTracker=r})},"esri/views/webgl/Texture":function(){define(["require","exports","../../core/has"],function(r,d,n){return function(){function l(k,
b,h){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=k;this._desc={pixelFormat:b.pixelFormat,internalFormat:b.internalFormat,dataType:b.dataType,target:b.target?b.target:3553,samplingMode:b.samplingMode?b.samplingMode:9729,wrapMode:b.wrapMode?b.wrapMode:10497,maxAnisotropy:b.maxAnisotropy,flipped:void 0!==b.flipped?b.flipped:!1,hasMipmap:void 0!==b.hasMipmap?b.hasMipmap:!1,unpackAlignment:b.unpackAlignment?
b.unpackAlignment:4,width:b.width,height:b.height,preMultiplyAlpha:void 0!==b.preMultiplyAlpha?b.preMultiplyAlpha:!1,textureCoordinateScaleFactor:b.textureCoordinateScaleFactor||null};this._id=++l._nextId;this.setData(h)}Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"descriptor",{get:function(){return this._desc},
enumerable:!0,configurable:!0});l.prototype.dispose=function(){var k=this;if(this._context&&this._context.gl){if(this._glName){var b=this._context.gl;this._boundToUnits.forEach(function(b){k._context.bindTexture(null,b)});b.deleteTexture(this._glName);this._glName=null}this._context=null}};l.prototype.resize=function(k,b){var h=this._desc;if(h.width!==k||h.height!==b)h.width=k,h.height=b,this.setData(null)};l.prototype.setData=function(k){var b=this._context.gl;this._glName||(this._glName=b.createTexture());
void 0===k&&(k=null);null===k&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;l._validateTexture(g);b.pixelStorei(b.UNPACK_ALIGNMENT,g.unpackAlignment);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.preMultiplyAlpha?1:0);var e=g.pixelFormat,c=g.internalFormat?g.internalFormat:e;if(k instanceof ImageData||k instanceof HTMLImageElement||
k instanceof HTMLCanvasElement||k instanceof HTMLVideoElement)g.width&&g.height&&console.assert(k.width===g.width&&k.height===g.height),b.texImage2D(b.TEXTURE_2D,0,c,e,g.dataType,k),g.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=k.width),void 0===this._desc.height&&(this._desc.height=k.height);else{null!=g.width&&null!=g.height||console.error("Width and height must be specified!");b.DEPTH24_STENCIL8&&c===b.DEPTH_STENCIL&&(c=b.DEPTH24_STENCIL8);var f=g.width,a=g.height;
if(null!=k&&"type"in k&&"compressed"===k.type){e=Math.round(Math.log(Math.max(f,a))/Math.LN2)+1;g.hasMipmap=g.hasMipmap&&e===k.levels.length;for(var p=0;;++p){b.compressedTexImage2D(b.TEXTURE_2D,p,c,f,a,0,k.levels[Math.min(p,k.levels.length-1)]);if(1===f&&1===a||!g.hasMipmap)break;f=Math.max(1,f>>1);a=Math.max(1,a>>1)}}else if(k)b.texImage2D(b.TEXTURE_2D,0,c,f,a,0,e,g.dataType,k),g.hasMipmap&&this.generateMipmap();else for(p=0;;++p){b.texImage2D(b.TEXTURE_2D,p,c,f,a,0,e,g.dataType,null);if(1===f&&
1===a||!g.hasMipmap)break;f=Math.max(1,f>>1);a=Math.max(1,a>>1)}}l._applySamplingMode(b,this._desc);l._applyWrapMode(b,this._desc);l._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};l.prototype.updateData=function(k,b,h,g,e,c){c||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var f=this._context.gl,a=this._desc,p=this._context.getBoundTexture(0);this._context.bindTexture(this,
0);(0>b||0>h||g>a.width||e>a.height||b+g>a.width||h+e>a.height)&&console.error("An attempt to update out of bounds of the texture!");f.pixelStorei(f.UNPACK_ALIGNMENT,a.unpackAlignment);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,a.flipped?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.preMultiplyAlpha?1:0);c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement?(console.assert(c.width===g&&c.height===e),f.texSubImage2D(f.TEXTURE_2D,k,b,h,
a.pixelFormat,a.dataType,c)):f.texSubImage2D(f.TEXTURE_2D,k,b,h,g,e,a.pixelFormat,a.dataType,c);this._context.bindTexture(p,0)};l.prototype.generateMipmap=function(){var k=this._desc;k.hasMipmap||(k.hasMipmap=!0,l._validateTexture(k));9729===k.samplingMode?(this._samplingModeDirty=!0,k.samplingMode=9985):9728===k.samplingMode&&(this._samplingModeDirty=!0,k.samplingMode=9984);k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var b=this._context.gl;b.generateMipmap(b.TEXTURE_2D);
this._context.bindTexture(k,0)};l.prototype.setSamplingMode=function(k){k!==this._desc.samplingMode&&(this._desc.samplingMode=k,l._validateTexture(this._desc),this._samplingModeDirty=!0)};l.prototype.setWrapMode=function(k){k!==this._desc.wrapMode&&(this._desc.wrapMode=k,l._validateTexture(this._desc),this._wrapModeDirty=!0)};l.prototype.applyChanges=function(){var k=this._context.gl,b=this._desc;this._samplingModeDirty&&(l._applySamplingMode(k,b),this._samplingModeDirty=!1);this._wrapModeDirty&&
(l._applyWrapMode(k,b),this._wrapModeDirty=!1)};l.prototype.setBoundToUnit=function(k,b){b?this._boundToUnits.add(k):this._boundToUnits.delete(k)};l._isPowerOfTwo=function(k){return 0===(k&k-1)};l._validateTexture=function(k){(0>k.width||0>k.height)&&console.error("Negative dimension parameters are not allowed!");l._isPowerOfTwo(k.width)&&l._isPowerOfTwo(k.height)||("number"===typeof k.wrapMode?33071!==k.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):
33071===k.wrapMode.s&&33071===k.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),k.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};l._applySamplingMode=function(k,b){var h=b.samplingMode,g=b.samplingMode;if(9985===h||9987===h)h=9729,b.hasMipmap||(g=9729);else if(9984===h||9986===h)h=9728,b.hasMipmap||(g=9728);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,h);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,g)};l._applyWrapMode=
function(k,b){"number"===typeof b.wrapMode?(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,b.wrapMode),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,b.wrapMode)):(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,b.wrapMode.s),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,b.wrapMode.t))};l._applyAnisotropicFilteringParameters=function(k,b){if(null!=b.maxAnisotropy){var h=k.capabilities.textureFilterAnisotropic;h&&(k=k.gl,k.texParameterf(k.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY,b.maxAnisotropy))}};l._nextId=
0;return l}()})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils"],function(r,d,n,l){function k(b){return b[0].stride}function b(b){switch(b){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function h(b){switch(b){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:return 4;
case 34041:return 4;case 33325:return 2;case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1;default:l.neverReached(b)}return 0}function g(b){if(!b)return 0;if("colorAttachment"in b)return b.glName?g(b.colorAttachment)+g(b.depthStencilAttachment):0;if("descriptor"in b)return b.glName?g(b.descriptor):0;var c=b.internalFormat||"pixelFormat"in b&&b.pixelFormat;
if(!c)return 0;var e="hasMipmap"in b&&b.hasMipmap?1.3:1;b=b.width*b.height;return h(c)*b*e}Object.defineProperty(d,"__esModule",{value:!0});d.vertexCount=function(b,c){return b.vertexBuffers[c].size/k(b.layout[c])};d.getStride=k;d.getBytesPerElement=b;d.addDescriptor=function(e,c,f,a,g,h){var p=b(a);if(0<e.length){var k=e[0].stride,l=k+p*f;e.forEach(function(a){return a.stride=l});e.push({name:c,count:f,type:a,offset:k,stride:l,normalized:g,divisor:h})}else e.push({name:c,count:f,type:a,offset:0,
stride:p*f,normalized:g,divisor:h})};d.assertCompatibleVertexAttributeLocations=function(b,c){(b=b.locations===c.locations)||console.error("VertexAttributeLocations are incompatible");return b};d.hasAttribute=function(b,c){for(var e=0;e<b.length;e++)if(b[e].name===c)return!0;return!1};d.findAttribute=function(b,c){for(var e=0;e<b.length;e++)if(b[e].name===c)return b[e];return null};d.copyFramebufferToTexture=function(b,c,f,a,g){void 0===g&&(g=0);var e=b.getBoundFramebufferObject(),h=b.getBoundTexture(0);
b.bindFramebuffer(c);b.bindTexture(f,0);b.gl.copyTexImage2D(b.gl.TEXTURE_2D,g,f.descriptor.pixelFormat,a[0],a[1],a[2],a[3],0);b.gl.flush();b.bindFramebuffer(e);b.bindTexture(h,0)};d.setBaseInstanceOffset=function(b,c){var e={},a;for(a in b)e[a]=b[a].map(function(a){return a.divisor?n({},a,{baseInstance:c}):a});return e};d.bindVertexBufferLayout=function(b,c,f,a,g){var e=b.gl,h=b.capabilities.instancing;b.bindBuffer(f);for(b=0;b<a.length;b++){f=a[b];var p=c[f.name],k=(g?g:0+f.baseInstance?f.baseInstance:
0)*f.stride;void 0===p&&console.error("There is no location for vertex attribute '"+f.name+"' defined.");f.baseInstance&&!f.divisor&&console.error("Vertex attribute '"+f.name+"' uses baseInstanceOffset without divisor.");if(4>=f.count)e.vertexAttribPointer(p,f.count,f.type,f.normalized,f.stride,f.offset+k),e.enableVertexAttribArray(p),f.divisor&&0<f.divisor&&h&&h.vertexAttribDivisor(p,f.divisor);else if(9===f.count)for(var l=0;3>l;l++)e.vertexAttribPointer(p+l,3,f.type,f.normalized,f.stride,f.offset+
12*l+k),e.enableVertexAttribArray(p+l),f.divisor&&0<f.divisor&&h&&h.vertexAttribDivisor(p+l,f.divisor);else if(16===f.count)for(l=0;4>l;l++)e.vertexAttribPointer(p+l,4,f.type,f.normalized,f.stride,f.offset+16*l+k),e.enableVertexAttribArray(p+l),f.divisor&&0<f.divisor&&h&&h.vertexAttribDivisor(p+l,f.divisor);else console.error("Unsupported vertex attribute element count: "+f.count)}};d.unbindVertexBufferLayout=function(b,c,f,a){var e=b.gl,g=b.capabilities.instancing;b.bindBuffer(f);for(f=0;f<a.length;f++){var h=
a[f],k=c[h.name];if(4>=h.count)e.disableVertexAttribArray(k),h.divisor&&0<h.divisor&&g&&g.vertexAttribDivisor(k,0);else if(9===h.count)for(var l=0;3>l;l++)e.disableVertexAttribArray(k+l),h.divisor&&0<h.divisor&&g&&g.vertexAttribDivisor(k+l,0);else if(16===h.count)for(l=0;4>l;l++)e.disableVertexAttribArray(k+l),h.divisor&&0<h.divisor&&g&&g.vertexAttribDivisor(k+l,0);else console.error("Unsupported vertex attribute element count: "+h.count)}b.unbindBuffer(34962)};d.getBytesPerElementFormat=h;d.getGpuMemoryUsage=
g})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports","../../core/has","./Util"],function(r,d,n,l){return function(){function k(b,h,g,e,c){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=b;this._layout=g;this._buffers=e;this._locations=h;c&&(this._indexBuffer=c);this._id=k._nextId++}Object.defineProperty(k.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{get:function(){var b=this;return Object.keys(this._buffers).reduce(function(h,g){return h+b._buffers[g].size},
this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});k.prototype.dispose=function(b){void 0===b&&(b=!0);if(this._context){var h=this._context.capabilities.vao;h&&this._glName&&(h.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===
this&&this._context.bindVAO(null);if(b){for(var g in this._buffers)this._buffers[g].dispose(),delete this._buffers[g];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};k.prototype.initialize=function(){if(!this._initialized){var b=this._context.capabilities.vao;if(b){var h=b.createVertexArray();b.bindVertexArray(h);this._bindLayout();b.bindVertexArray(null);this._glName=h}this._initialized=!0}};k.prototype.bind=function(){this.initialize();var b=this._context.capabilities.vao;
b?b.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};k.prototype._bindLayout=function(){var b=this._buffers,h=!!this._context.capabilities.vao,g=this._layout,e=this._indexBuffer;b||console.error("Vertex buffer dictionary is empty!");var c=this._context.gl,f;for(f in b){var a=b[f];a||console.error("Vertex buffer is uninitialized!");var p=g[f];p||console.error("Vertex element descriptor is empty!");l.bindVertexBufferLayout(this._context,this._locations,a,p)}e&&(h?c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
e.glName):this._context.bindBuffer(e))};k.prototype.unbind=function(){this.initialize();var b=this._context.capabilities.vao;b?b.bindVertexArray(null):this._unbindLayout()};k.prototype._unbindLayout=function(){var b=this._buffers,h=this._layout;b||console.error("Vertex buffer dictionary is empty!");for(var g in b){var e=b[g];e||console.error("Vertex buffer is uninitialized!");l.unbindVertexBufferLayout(this._context,this._locations,e,h[g])}(b=this._indexBuffer)&&this._context.unbindBuffer(b.bufferType)};
k._nextId=0;return k}()})},"esri/views/3d/environment/RealisticAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Handles ../../../core/watchUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ./atmosphereUtils ../support/earthUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/shaders/RealisticAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){r=function(){function d(b){this.needsRender=!1;this.didRender=!0;this.slot=13;this._hazeSlot=14;this._renderData={texDepth:g.vec2f64.create(),v3CameraPos:c.vec3f64.create(),v3CameraUp:c.vec3f64.create(),v3CameraRight:c.vec3f64.create(),v3CameraDir:c.vec3f64.create(),halfSizeNearPlane:g.vec2f64.create(),v2CameraCenterOffset:g.vec2f64.create(),v4SphereComp:a.vec4f64.create(),v4AtmosParams1:a.vec4f64.create(),v4AtmosParams2:a.vec4f64.create(),v4AtmosParams3:a.vec4f64.create(),
v3InvWavelength:C,v3InvWavelengthScaled:F,v4Radii:a.vec4f64.create(),fScale:0,fScaleDepth:E,fLowerAlphaBlendBound:0,fScaleOverScaleDepth:0,fOneOverScaleDepth:0,fScaleDepthBlue:N,fOneOverScaleDepthBlue:K,fScaleOverScaleDepthBlue:0,g:O,g2:O*O,fMiePhaseCoefficients:I,showTest:0,nearFar:g.vec2f64.create(),fCameraHeight:0,fCameraHeight2:0,fC:0,fCSur:0,fInnerFadeDistance:0,fAltitudeFade:0};this._lowerElevationBoundRadius=0;this._earthRadius=q.earthRadius;this.view=b;this._updateRadius(q.earthRadius)}d.prototype.destroy=
function(){this._handles&&(this._handles.destroy(),this._handles=null);this._hazeProgram&&(this._hazeProgram.dispose(),this._hazeProgram=null);this._skyProgram&&(this._skyProgram.dispose(),this._skyProgram=null);this._vao&&(this._vao.dispose(),this._vao=null)};d.prototype.when=function(a){return l(this,void 0,void 0,function(){return n(this,function(b){a();return[2]})})};d.prototype.initializeRenderContext=function(a){var c=this;a=a.rctx;this._handles=new k;this._updateElevation({spatialReference:this.view.basemapTerrain.spatialReference,
tile:this.view.basemapTerrain.rootTiles[0],extent:this.view.basemapTerrain.rootTiles[0].extent});this._handles.add(b.on(this.view,"basemapTerrain","elevation-change",function(a){return c._updateElevation(a)},function(){return c._updateElevation()}));this._handles.add(b.on(this.view,"basemapTerrain","elevation-bounds-change",function(){return c._updateVisibleElevationBounds()},function(){return c._updateVisibleElevationBounds()}));this._hazeProgram=w.createProgram(a,y.program,{haze:!0});this._skyProgram=
w.createProgram(a,y.program);this._hazePipelineState=m.makePipelineState({blending:m.separateBlendingParams(1,0,769,1),colorWrite:m.defaultColorWriteParams});this._skyPipelineState=m.makePipelineState({blending:m.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:m.defaultColorWriteParams});this._vao=this._createVertexArrayObject(a)};d.prototype.uninitializeRenderContext=function(a){this.destroy()};d.prototype.render=function(a){if(a.slot!==this._hazeSlot&&a.slot!==this.slot||0!==
a.pass)return!1;this._update(a.camera);a.slot===this.slot&&this._renderSky(a);a.slot===this._hazeSlot&&this._renderHaze(a);this.needsRender=!1;return!0};d.prototype._renderSky=function(a){var b=a.rctx,c=this._skyProgram;b.bindProgram(c);b.setPipelineState(this._skyPipelineState);c.setUniform4fv("v4AtmosParams3",this._renderData.v4AtmosParams3);this._renderCommon(c,a)};d.prototype._renderHaze=function(a){var b=this,c=a.rctx,e=a.offscreenRenderingHelper,f=this._hazeProgram;c.bindProgram(f);c.setPipelineState(this._hazePipelineState);
e.renderDepthDetached(function(){c.bindTexture(e.depthTexture,0);f.setUniform1i("tDepth",0);b._renderCommon(f,a)})};d.prototype._renderCommon=function(a,b){var c=b.rctx;a.setUniform3fv("v3InvWavelength",this._renderData.v3InvWavelength);a.setUniform3fv("v3InvWavelengthScaled",this._renderData.v3InvWavelengthScaled);a.setUniform3fv("v3LightDir",b.lightingData.direction);a.setUniform4fv("v4SphereComp",this._renderData.v4SphereComp);a.setUniform3fv("v3CameraPos",this._renderData.v3CameraPos);a.setUniform3fv("v3CameraUp",
this._renderData.v3CameraUp);a.setUniform3fv("v3CameraRight",this._renderData.v3CameraRight);a.setUniform3fv("v3CameraDir",this._renderData.v3CameraDir);a.setUniform2fv("nearFar",this._renderData.nearFar);a.setUniform2fv("halfSizeNearPlane",this._renderData.halfSizeNearPlane);a.setUniform2fv("v2CameraCenterOffset",this._renderData.v2CameraCenterOffset);a.setUniform4fv("v4Radii",this._renderData.v4Radii);a.setUniform4fv("v4AtmosParams1",this._renderData.v4AtmosParams1);a.setUniform4fv("v4AtmosParams2",
this._renderData.v4AtmosParams2);a.setUniform1f("showTest",this._renderData.showTest);a.setUniform1f("fInnerFadeDistance",this._renderData.fInnerFadeDistance);a.setUniform1f("fAltitudeFade",this._renderData.fAltitudeFade);c.bindVAO(this._vao);u.assertCompatibleVertexAttributeLocations(this._vao,a);c.drawArrays(5,0,4)};d.prototype._createVertexArrayObject=function(a){var b=H.createBuffer(4);b.position.setVec(0,[-1,-1,1]);b.position.setVec(1,[1,-1,1]);b.position.setVec(2,[-1,1,1]);b.position.setVec(3,
[1,1,1]);b.uv0.setVec(0,[0,0]);b.uv0.setVec(1,[1,0]);b.uv0.setVec(2,[0,1]);b.uv0.setVec(3,[1,1]);return new z(a,y.program.attributes,{geometry:v.glLayout(H)},{geometry:x.createVertex(a,35044,b.buffer)})};d.prototype._adjustRadiusForTesselation=function(a){return a*Math.cos(Math.PI/Math.pow(2,4)/16)};d.prototype._updateElevation=function(a){a=a?a.tile:this.view.basemapTerrain.rootTiles[0];0===a.lij[0]&&(a=this._adjustRadiusForTesselation(q.earthRadius+a.elevationBounds[0]),a!==this._lowerElevationBoundRadius&&
(this._lowerElevationBoundRadius=a,this._earthRadius=-1,this._updateVisibleElevationBounds()))};d.prototype._updateVisibleElevationBounds=function(){var a=this._adjustRadiusForTesselation(q.earthRadius+this.view.basemapTerrain.getElevationBounds()[0]);(0>this._earthRadius||a<this._earthRadius)&&this._updateRadius(a)};d.prototype._updateRadius=function(a){this._earthRadius=a;var b=a*a,c=a/10*10.25,e=c*c,g=1/(c-a),h=g/E,k=g/N,l=.3*(c-a)+a,d=1/(c-l),m=this._renderData;f.vec4.set(m.v4AtmosParams1,g,E,
h,L);f.vec4.set(m.v4AtmosParams2,O,N,k,K);f.vec4.set(m.v4AtmosParams3,O*O,I,l,d);f.vec4.set(m.v4Radii,a,b,c,e);m.fScale=g;m.fLowerAlphaBlendBound=l;m.fScaleOverScaleDepth=h;m.fScaleOverScaleDepthBlue=k;b=p.INNER_ATMOSPHERE_DEPTH;m.fInnerFadeDistance=2*Math.sqrt((2*a-b)*b)};d.prototype._update=function(b){b&&(e.vec3.negate(this._renderData.v3CameraDir,b.viewForward),e.vec3.copy(this._renderData.v3CameraUp,b.viewUp),e.vec3.copy(this._renderData.v3CameraRight,b.viewRight),this._renderData.fCameraHeight=
e.vec3.length(b.eye),this._renderData.fCameraHeight2=this._renderData.fCameraHeight*this._renderData.fCameraHeight,this._renderData.fC=this._renderData.fCameraHeight2-this._renderData.v4Radii[3],this._renderData.fCSur=this._renderData.fCameraHeight2-this._renderData.v4Radii[1],this._renderData.v4SphereComp=a.vec4f64.fromValues(this._renderData.fCameraHeight,this._renderData.fCameraHeight2,this._renderData.fC,this._renderData.fCSur),e.vec3.copy(this._renderData.v3CameraPos,b.eye),h.vec2.set(this._renderData.halfSizeNearPlane,
Math.tan(b.fovX/2)/(b.width/b.fullWidth),Math.tan(b.fovY/2)/(b.height/b.fullHeight)),h.vec2.set(this._renderData.v2CameraCenterOffset,(b.padding[3]+b.width/2)/b.fullWidth-.5,(b.padding[2]+b.height/2)/b.fullHeight-.5),h.vec2.set(this._renderData.nearFar,b.near,b.far),this._renderData.fAltitudeFade=p.computeInnerAltitudeFade(this._renderData.fCameraHeight-this._earthRadius))};d.isSupported=function(a){return a.rctx.capabilities.depthTexture};return d}();d=.02*Math.PI;var B=.004*Math.PI,C=c.vec3f64.fromValues(1/
Math.pow(.65,4),1/Math.pow(.57,4),1/Math.pow(.475,4)),F=c.vec3f64.clone(C);e.vec3.scale(F,F,d);e.vec3.add(F,F,c.vec3f64.fromValues(B,B,B));var E=.25,N=.05,L=1/E,K=1/N,O=-.99999,I=(1-O*O)/(2+O*O)*1.5,H=t.newLayout().vec3f("position").vec2f("uv0");return r})},"esri/views/3d/environment/atmosphereUtils":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.computeInnerAltitudeFade=function(d){return Math.min(1,Math.max(0,(d-1E5)/9E5))};d.INNER_ATMOSPHERE_DEPTH=
1E4})},"esri/views/3d/webgl-engine/shaders/RealisticAtmospherePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.program={name:"realistic-atmosphere-color",shaders:function(b){return{vertexShader:k.glslifyDefineMap({HAZE:b.haze})+l.resolveIncludes("environment/realisticAtmosphere.vert"),fragmentShader:k.glslifyDefineMap({HAZE:b.haze})+l.resolveIncludes("environment/realisticAtmosphere.frag")}},
attributes:n.Default3D}})},"esri/views/3d/environment/SimpleAtmosphere":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/mathUtils ../../../core/promiseUtils ../../../core/watchUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./atmosphereUtils ./resources/SimpleAtmosphereTexture ../support/earthUtils ../support/imageUtils ../support/mathUtils ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/Util ../webgl-engine/shaders/SimpleAtmospherePrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K){function O(b,c,e,f,g){var h=a.vec3.length(b),p=f*Math.sqrt(h*h-f*f)/h,k=g.silCircleV1,l=g.silCircleV2;a.vec3.scale(g.silCircleCenter,b,Math.sqrt(f*f-p*p)/h);a.vec3.cross(k,b,c);1>a.vec3.squaredLength(k)&&a.vec3.cross(k,b,e);a.vec3.scale(k,k,p/a.vec3.length(k));a.vec3.cross(l,k,b);a.vec3.scale(l,l,p/a.vec3.length(l));return p}function I(b,c,e,f){a.vec3.add(Q,f.silCircleCenter,f.silCircleV2);a.vec3.scale(J,Q,V);g.mat4.lookAt(Z,c,Q,
e);z.project(Q,Z,b.projectionMatrix,b.viewport);z.project(J,Z,b.projectionMatrix,b.viewport);return a.vec3.distance(Q,J)/b.height}var H=-q.INNER_ATMOSPHERE_DEPTH,S=(t.earthRadius+H)/t.earthRadius,P=(t.earthRadius+0)/t.earthRadius,V=(t.earthRadius+3E5)/t.earthRadius,T=x.makePiecewiseLinearFunction([[50,.1015625],[500,.21875],[5E3,.51171875],[5E4,.4140625]]);r=function(){function e(a){this.needsRender=!1;this.didRender=!0;this.slot=13;this._renderData={texV:f.vec2f64.create(),silCircleCenter:p.vec3f64.create(),
silCircleV1:p.vec3f64.create(),silCircleV2:p.vec3f64.create(),altitudeFade:0,innerScale:0,undergroundFadeAlpha:0};this._fadeVaoCount=0;this._readyResolver=b.createResolver();this._readyController=b.createAbortController();this.view=a}e.prototype.when=function(a){return l(this,void 0,void 0,function(){return n(this,function(b){switch(b.label){case 0:return[4,this._readyResolver.promise];case 1:return b.sent(),a(),[2]}})})};e.prototype.initializeRenderContext=function(a){var b=this,c=a.rctx;this._cameraChangeHandle=
h.init(this.view,"state.camera",function(){return b.needsRender=!0},!0);this._program=F.createProgram(c,B.colorPass);this._fadeProgram=F.createProgram(c,B.fadePass);this._vao=this._createRibbon(c);this._vaoCount=L.vertexCount(this._vao,"geometry");this._fadeVao=u.createQuadVAO(c);this._fadeVaoCount=L.vertexCount(this._fadeVao,"geometry");y.requestImage(v,this._readyController).then(function(a){b._texture=new N(c,{pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!0},a);b.needsRender=
!0;b._readyController=null;b._readyResolver.resolve()});this._pipelineState=E.makePipelineState({blending:E.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:E.defaultColorWriteParams})};e.prototype.uninitializeRenderContext=function(a){this.destroy()};e.prototype.destroy=function(){this._readyResolver.reject();this._cameraChangeHandle&&(this._cameraChangeHandle.remove(),this._cameraChangeHandle=null);this._texture&&(this._texture.dispose(),this._texture=null);this._program&&(this._program.dispose(),
this._program=null);this._fadeProgram&&(this._fadeProgram.dispose(),this._fadeProgram=null);this._fadeVao&&(this._fadeVao.dispose(),this._fadeVao=null);this._readyController&&(this._readyController.abort(),this._readyController=null)};e.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||null==this._texture)return!1;this._update(a.camera);var b=a.rctx;b.setPipelineState(this._pipelineState);if(1>this._renderData.undergroundFadeAlpha){var c=this._program;b.bindProgram(c);c.setUniformMatrix4fv("proj",
a.camera.projectionMatrix);c.setUniformMatrix4fv("view",a.camera.viewMatrix);c.setUniform3fv("silCircleCenter",this._renderData.silCircleCenter);c.setUniform3fv("silCircleV1",this._renderData.silCircleV1);c.setUniform3fv("silCircleV2",this._renderData.silCircleV2);c.setUniform2fv("texV",this._renderData.texV);b.bindTexture(this._texture,0);c.setUniform1i("tex",0);c.setUniform3fv("lightDirection",a.lightingData.direction);c.setUniform1f("altitudeFade",this._renderData.altitudeFade);c.setUniform1f("innerScale",
this._renderData.innerScale);b.bindVAO(this._vao);b.drawArrays(4,0,this._vaoCount)}0<this._renderData.undergroundFadeAlpha&&(c=this._fadeProgram,b.bindProgram(c),c.setUniform1f("undergroundFadeAlpha",this._renderData.undergroundFadeAlpha),c.setUniform3fv("lightDirection",a.lightingData.direction),c.setUniform3fv("cameraPosition",a.camera.eye),b.bindVAO(this._fadeVao),b.drawArrays(5,0,this._fadeVaoCount));this.needsRender=!1;return!0};e.prototype._update=function(b){var e=p.vec3f64.create(),f=t.earthRadius,
g=a.vec3.length(b.eye),h=g-f;this._renderData.undergroundFadeAlpha=0>h?Math.min(-h/5E3,1):0;var l=f+H,d=f+Math.max(50,h);this._renderData.innerScale=d*d/(Math.sqrt(d*d-f*f)*Math.sqrt(d*d-l*l)+f*l)-1;this._renderData.altitudeFade=q.computeInnerAltitudeFade(h);a.vec3.scale(e,b.eye,(f+50)/g);O(e,b.center,b.up,f,this._renderData);e=I(b,e,b.up,this._renderData);g=T(h);l=.001953125;d=0+e*g*1;50<h&&(O(b.eye,b.center,b.up,f,this._renderData),b=I(b,b.eye,b.up,this._renderData),b=k.clamp((b-1.5)/(e-1.5),0,
1),l=0+.001953125*b,d=0+1*x.lerp(1,e*g,b));c.vec2.set(this._renderData.texV,l,d)};e.prototype._createRibbon=function(a){var b=new Float32Array(1155),c=new Uint32Array(1920);b[0]=0;b[1]=0;b[2]=-1;for(var e=0;128>e;e++){var f=9*e+3;b[f+0]=e;b[f+1]=S;b[f+2]=-1;b[f+3]=e;b[f+4]=P;b[f+5]=0;b[f+6]=e;b[f+7]=V;b[f+8]=1;var f=3*e+1,g=127===e?1:f+3,h=15*e;c[h+0]=f;c[h+1]=f+1;c[h+2]=g+1;c[h+3]=g+1;c[h+4]=g;c[h+5]=f;c[h+6]=f+1;c[h+7]=f+2;c[h+8]=g+2;c[h+9]=g+2;c[h+10]=g+1;c[h+11]=f+1;c[h+12]=f;c[h+13]=g;c[h+14]=
0}f=R.createBuffer(c.length);g=f.position;for(e=0;e<c.length;++e)h=3*c[e],g.set(e,0,b[h]),g.set(e,1,b[h+1]),g.set(e,2,b[h+2]);return new K(a,B.colorPass.attributes,{geometry:w.glLayout(R)},{geometry:C.createVertex(a,35044,f.buffer)})};return e}();var Z=e.mat4f64.create(),Q=p.vec3f64.create(),J=p.vec3f64.create(),R=m.newLayout().vec3f("position");return r})},"esri/views/3d/webgl-engine/lib/glUtil3D":function(){define("require exports ./DefaultVertexAttributeLocations ./DefaultVertexBufferLayouts ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.createQuadVAO=function(b,e){void 0===e&&(e=l.Pos2);var c=null;switch(e){case l.Pos3Tex:c=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);break;case l.Pos3:c=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]);break;case l.Pos2Tex:c=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);break;default:c=new Float32Array([-1,-1,1,-1,-1,1,1,1])}return new h(b,n.Default3D,{geometry:e},{geometry:k.createVertex(b,35044,
c)})};d.createEmptyTexture=function(g,e){void 0===e&&(e=4);return new b(g,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:e,height:e})};d.createColorTexture=function(g,e,c){void 0===c&&(c=4);for(var f=new Uint8Array(c*c*4),a=0;a<f.length;a+=4)f[a+0]=255*e[0],f[a+1]=255*e[1],f[a+2]=255*e[2],f[a+3]=255*e[3];return new b(g,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:c,height:c},f)}})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];d.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];d.Pos3NormalTex=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:32,
normalized:!1}];d.Pos3Col=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:16,normalized:!1}];d.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];d.Pos2Tex=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}]})},"esri/views/3d/environment/Stars":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../request ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../core/watchUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../support/buffer/glUtil ../support/buffer/InterleavedLayout ../webgl-engine/shaders/StarsPrograms ../../webgl/BufferObject ../../webgl/programUtils ../../webgl/renderState ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m){var u=g.getLogger("esri.views.3d.environment.Stars");d=function(){function g(b){this.slot=13;this.numBinaryFloats=2;this.numBinaryUInt8=1;this.bytesPerStar=9;this.needsRender=!1;this.didRender=!0;this._loadDataController=e.createAbortController();this._numStars=0;this._modelMatrix=a.mat4f64.create();this.view=b;this._loadDataPromise=this._loadBrightStarCatalogue()}g.prototype.destroy=function(){this._loadDataController&&(this._loadDataController.abort(),
this._loadDataController=null);this._dateHandle&&(this._dateHandle.remove(),this._dateHandle=null);this._program&&(this._program.dispose(),this._program=null);this._vao&&(this._vao.dispose(),this._vao=null)};g.prototype.initializeRenderContext=function(a){var b=this,e=a.rctx;this._program=y.createProgram(e,v.program);this._pipelineState=x.makePipelineState({blending:x.separateBlendingParams(770,1,771,771),depthTest:{func:515},colorWrite:x.defaultColorWriteParams});this._dateHandle=c.init(this.view,
"environment.lighting.date",function(a){return b._update(a)});this._loadDataPromise.then(function(){b._numStars=b._starData.byteLength/b.bytesPerStar;var a=new Float32Array(b._starData,0,b._numStars*b.numBinaryFloats),c=new Uint8Array(b._starData,b._numStars*b.numBinaryFloats*4,b._numStars*b.numBinaryUInt8);b._vao=b._createVertexArrayObject(e,a,c);b.needsRender=!0})};g.prototype.uninitializeRenderContext=function(a){this.destroy()};g.prototype.render=function(a){if(a.slot!==this.slot||0!==a.pass||
null==this._starData)return!1;var b=a.rctx,c=this._program;b.bindProgram(c);a=a.camera;c.setUniformMatrix4fv("view",a.viewMatrix);c.setUniformMatrix4fv("proj",a.projectionMatrix);c.setUniform4fv("viewport",a.fullViewport);c.setUniformMatrix4fv("model",this._modelMatrix);c.setUniform1f("pixelRatio",a.pixelRatio);b.setPipelineState(this._pipelineState);b.bindVAO(this._vao);w.assertCompatibleVertexAttributeLocations(this._vao,c);b.drawArrays(0,0,this._numStars);this.needsRender=!1;return!0};g.prototype._computeDayDuration=
function(a){var b=new Date(a.getFullYear(),0,1,11,58,56),c=new Date(a.getFullYear()+1,0,1,11,58,55);return(+a-+b)/(+c-+b)};g.prototype._update=function(a){if(a){var b=a.getHours()/12,c=a.getMinutes()/60*(2/24),e=a.getSeconds()/60*(2/1440),b=(b+c+e-.9972222)%2;a=2*this._computeDayDuration(a);c=this._modelMatrix;f.mat4.copy(c,C);f.mat4.rotateZ(c,c,-a*Math.PI);f.mat4.multiply(c,B,c);f.mat4.rotateZ(c,c,-b*Math.PI);this.needsRender=!0}};g.prototype._hexToRGB=function(a){return[parseInt(a.substring(0,2),
16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]};g.prototype._unpackUint8Attributes=function(a){return 192<=a?[2.9,a-192]:160<=a?[2.5,a-160]:128<=a?[2,a-128]:96<=a?[1.5,a-96]:64<=a?[1,a-64]:32<=a?[.7,a-32]:[.4,a]};g.prototype._createVertexArrayObject=function(a,b,c){for(var e=F.createBuffer(this._numStars),f=e.position,g=e.color,h=e.size,k=0;k<this._numStars;k++){var l=b[2*k+0],d=b[2*k+1];f.set(k,0,-Math.cos(l)*Math.sin(d));f.set(k,1,-Math.sin(l)*Math.sin(d));f.set(k,2,-Math.cos(d));
l=this._unpackUint8Attributes(c[k]);d=this._hexToRGB(z[l[1]]);g.set(k,0,255*d[0]);g.set(k,1,255*d[1]);g.set(k,2,255*d[2]);g.set(k,3,255);h.set(k,l[0])}return new m(a,v.program.attributes,{geometry:p.glLayout(F)},{geometry:t.createVertex(a,35044,e.buffer)})};g.prototype._verifyStartData=function(a){if(!a)throw new h("stars:no-data-received","Failed to create stars because star catalogue is missing");a=a.byteLength/this.bytesPerStar;if(0!==a%1||5E4<a||5E3>a)throw new h("stars:invalid-data","Failed to create stars because star catalogue data is invalid");
};g.prototype._loadBrightStarCatalogue=function(){return l(this,void 0,void 0,function(){var a,c,f;return n(this,function(g){switch(g.label){case 0:return E?(this._starData=E,[2]):[4,b.result(k(r.toUrl("./resources/stars.wsv"),{responseType:"array-buffer",signal:this._loadDataController.signal}))];case 1:a=g.sent();this._loadDataController=null;if(!1===a.ok){if(e.isAbortError(a.error))throw a.error;u.error("loadBrightStarCatalogue",a.error.message);return[2]}c=a.value;f=c.data;try{this._verifyStartData(f)}catch(H){throw u.error("loadBrightStarCatalogue",
H),H;}this._starData=E=f;return[2]}})})};return g}();var z="9bb2ff;9eb5ff;aabfff;bbccff;ccd8ff ;dae2ff;e4e9ff;eeefff;f8f6ff;fff9fb;fff5ef;fff1e5;ffeddb;ffe9d2;ffe6ca;ffe3c3;ffe0bb;ffddb4;ffdaad;ffd6a5;ffd29c;ffcc8f;ffc178;ffa94b;ff7b00".split(";"),B=a.mat4f64.fromValues(1,0,0,0,0,.9174771405229186,.39778850739794974,0,0,-.39778850739794974,.9174771405229186,0,0,0,0,1),C=a.mat4f64.fromValues(1,0,0,0,0,.9174771405229186,-.39778850739794974,0,0,.39778850739794974,.9174771405229186,0,0,0,0,1),F=q.newLayout().vec3f("position").vec4u8("color").f32("size"),
E=null;return d})},"esri/views/3d/webgl-engine/shaders/StarsPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.program={name:"stars",shaders:{vertexShader:l.resolveIncludes("environment/stars.vert"),fragmentShader:l.resolveIncludes("environment/stars.frag")},attributes:n.Default3D}})},"esri/views/3d/support/sunUtils":function(){define("require exports ../../../core/mathUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../lib/SunCalc ./mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){function c(a,b,c,e){for(var f=[],g=0;g<c.length;g++)f[g]=(e[g]-c[g])*a/b+c[g];return f}Object.defineProperty(d,"__esModule",{value:!0});d.settings={local:{altitude:1500,ambientAtNight:.1,ambientAtNoon:.45,ambientAtTwilight:.2,diffuseAtNoon:.65,diffuseAtTwilight:.7},global:{altitude:8E5,ambient:.015,diffuse:.75},planarDirection:{localAltitude:1E4,globalAltitude:1E6,globalAngles:{azimuth:1.3*Math.PI,altitude:.6*Math.PI}}};d.computeColorAndIntensity=function(a,f){var k,l,
q,v,m=f[2],u=p;b.vec3.set(u.ambient.color,1,1,1);u.ambient.intensity=d.settings.global.ambient;b.vec3.set(u.diffuse.color,1,1,1);u.diffuse.intensity=d.settings.global.diffuse;m=(Math.abs(m)-d.settings.local.altitude)/(d.settings.global.altitude-d.settings.local.altitude);m=n.clamp(m,0,1);u.globalFactor=m;f=g.getTimes(a,f[1],f[0]);if(1>m){q=a.valueOf();var z,B;f.polarException===g.POLAR_EXCEPTION.MIDNIGHT_SUN?(z=q-36E5*(a.getHours()+48)-6E4*a.getMinutes(),B=z+432E6):f.polarException===g.POLAR_EXCEPTION.POLAR_NIGHT?
(z=q-2,B=q-1):(z=f.sunrise.valueOf(),B=f.sunset.valueOf());var C=B-z;v=z+C/2;l=C/4;k=v-l;l=v+l;var F=.06*C,C=z-F/2;z+=F/2;var E=B-F/2,N=B+F/2;B=d.settings.local;var L=[.01,B.ambientAtNight],K=[.8,.8,1],O=[.01,.01,.01],I=[B.diffuseAtTwilight,B.ambientAtTwilight],H=[1,.75,.75],S=[.8,.8,1],P=[.9*B.diffuseAtNoon,B.ambientAtNoon],r=[1,.98,.98],T=[.98,.98,1],Z=[B.diffuseAtNoon,B.ambientAtNoon],Q=[1,1,1],J=[1,1,1];B=[0,0];var R=[0,0,0],F=[0,0,0];q<C||q>N?(B=L,R=O,F=K):q<z?(F=z-C,B=c(q-C,F,L,I),R=c(q-C,F,
O,H),F=c(q-C,F,K,S)):q<k?(F=k-z,B=c(q-z,F,I,P),R=c(q-z,F,H,r),F=c(q-z,F,S,T)):q<v?(F=v-k,B=c(q-k,F,P,Z),R=c(q-k,F,r,Q),F=c(q-k,F,T,J)):q<l?(F=l-v,B=c(q-v,F,Z,P),R=c(q-v,F,Q,r),F=c(q-v,F,J,T)):q<E?(F=E-l,B=c(q-l,F,P,I),R=c(q-l,F,r,H),F=c(q-l,F,T,S)):q<N&&(F=N-E,B=c(q-E,F,I,L),R=c(q-E,F,H,O),F=c(q-E,F,S,K));q=B[0];v=h.vec3f64.fromValues(R[0],R[1],R[2]);k=B[1];l=h.vec3f64.fromValues(F[0],F[1],F[2]);b.vec3.lerp(u.ambient.color,l,u.ambient.color,m);u.ambient.intensity=e.lerp(k,u.ambient.intensity,m);b.vec3.lerp(u.diffuse.color,
v,u.diffuse.color,m);u.diffuse.intensity=e.lerp(q,u.diffuse.intensity,m)}m=a.valueOf();f.polarException===g.POLAR_EXCEPTION.MIDNIGHT_SUN?(a=m-36E5*(a.getHours()+48)-6E4*a.getMinutes(),f=a+432E6):f.polarException===g.POLAR_EXCEPTION.POLAR_NIGHT?(a=m-2,f=m-1):(a=f.sunrise.valueOf(),f=f.sunset.valueOf());a=1-n.clamp(Math.abs(m-(a+(f-a)/2))/432E5,0,1);u.noonFactor=a;return u};d.computeDirection=function(c,e,p,k){k||(k=h.vec3f64.create());var q=a,t=l.mat4.identity(f);if("global"===p)g.getPosition(c,0,
0,q),b.vec3.set(k,0,0,-1),l.mat4.rotateX(t,t,-q.azimuth),l.mat4.rotateY(t,t,-q.altitude);else{var m=d.settings.planarDirection;p=m.globalAngles;m=(Math.abs(e[2])-m.localAltitude)/(m.globalAltitude-m.localAltitude);m=n.clamp(m,0,1);1>m?(g.getPosition(c,e[1],e[0],q),q.azimuth=(1-m)*q.azimuth+m*p.azimuth,q.altitude=(1-m)*q.altitude+m*p.altitude):(q.azimuth=p.azimuth,q.altitude=p.altitude);b.vec3.set(k,0,-1,0);l.mat4.rotateZ(t,t,-q.azimuth);l.mat4.rotateX(t,t,-q.altitude)}b.vec3.transformMat4(k,k,t);
return k};d.computeShadowsEnabled=function(a,b){return"global"===b?!0:Math.abs(a[2])<d.settings.planarDirection.localAltitude};var f=k.mat4f64.create(),a={azimuth:0,altitude:0},p={ambient:{color:h.vec3f64.create(),intensity:0},diffuse:{color:h.vec3f64.create(),intensity:0,direction:h.vec3f64.create()},globalFactor:0,noonFactor:0}})},"esri/views/3d/lib/SunCalc":function(){define([],function(){function r(a){return new Date(864E5*(a+.5-2440588))}function d(b,c){return v(f(b)*a(w)-p(c)*f(w),a(b))}function n(b,
c){return q(f(c)*a(w)+a(c)*f(w)*f(b))}function l(b,c,e){return v(f(b),a(b)*f(c)-p(e)*a(c))}function k(b,c,e){return q(f(c)*f(e)+a(c)*a(e)*a(b))}function b(a){return y*(1.9148*f(a)+.02*f(2*a)+3E-4*f(3*a))}function h(a,e){a=y*(357.5291+.98560028*a);var f=b(a);a=a+f+102.9372*y+c;e||(e={dec:0,ra:0});e.dec=n(a,0);e.ra=d(a,0);return e}function g(a,b,c){return 2451545+a+.0053*f(b)-.0069*f(2*c)}function e(b){var c=y*(134.963+13.064993*b),e=y*(93.272+13.22935*b);b=y*(218.316+13.176396*b)+6.289*y*f(c);e=5.128*
y*f(e);c=385001-20905*a(c);return{ra:d(b,e),dec:n(b,e),dist:c}}var c=Math.PI,f=Math.sin,a=Math.cos,p=Math.tan,q=Math.asin,v=Math.atan2,t=Math.acos,y=c/180,x={dec:0,ra:0},w=23.4397*y,m={POLAR_EXCEPTION:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(a,b,c,e){c=y*-c;b*=y;var f=a.valueOf()/864E5-.5+2440588-2451545;a=h(f,x);c=y*(280.16+360.9856235*f)-c-a.ra;e||(e={azimuth:0,altitude:0});e.azimuth=l(c,b,a.dec);e.altitude=k(c,b,a.dec);return e}},u=[[-.83,"sunrise","sunset"]];m.addTime=function(a,
b,c){u.push([a,b,c])};m.getTimes=function(e,h,p){function k(b){var e=d,h=v;b=t((f(b)-f(e)*f(h))/(a(e)*a(h)));return g(9E-4+(b+l)/(2*c)+q,z,B)}var l=y*-p,d=y*h,q=Math.round(e.valueOf()/864E5-.5+2440588-2451545-9E-4-l/(2*c));e=9E-4+(0+l)/(2*c)+q;var z=y*(357.5291+.98560028*e);h=b(z);var B=z+h+102.9372*y+c,v=n(B,0);e=g(e,z,B);h={solarNoon:r(e),nadir:r(e-.5),polarException:m.POLAR_EXCEPTION.NORMAL};var x,w,C,V;p=0;for(x=u.length;p<x;p+=1)w=u[p],C=k(w[0]*y),V=e-(C-e),h[w[1]]=r(V),h[w[2]]=r(C);h.polarException=
function(b){b=(f(b)-f(d)*f(v))/(a(d)*a(v));return-1>b?m.POLAR_EXCEPTION.MIDNIGHT_SUN:1<b?m.POLAR_EXCEPTION.POLAR_NIGHT:m.POLAR_EXCEPTION.NORMAL}(u[0][0]*y);return h};m.getMoonPosition=function(a,b,c){c=y*-c;b*=y;var f=a.valueOf()/864E5-.5+2440588-2451545;a=e(f);c=y*(280.16+360.9856235*f)-c-a.ra;f=k(c,b,a.dec);f+=.017*y/p(f+10.26*y/(f+5.1*y));return{azimuth:l(c,b,a.dec),altitude:f,distance:a.dist}};m.getMoonFraction=function(b){var c=b.valueOf()/864E5-.5+2440588-2451545;b=h(c);c=e(c);b=t(f(b.dec)*
f(c.dec)+a(b.dec)*a(c.dec)*a(b.ra-c.ra));b=v(149598E3*f(b),c.dist-149598E3*a(b));return(1+a(b))/2};return m})},"esri/views/3d/webgl-engine/lighting/Lightsources":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){return function(l,k,b){void 0===l&&(l=n.vec3f64.create());void 0===k&&(k=n.vec3f64.fromValues(.57735,.57735,.57735));void 0===b&&(b=!0);this.intensity=l;this.direction=k;this.castShadows=
b}}();d.MainLight=r;r=function(){return function(l,k){void 0===l&&(l=n.vec3f64.create());void 0===k&&(k=n.vec3f64.fromValues(.57735,.57735,.57735));this.intensity=n.vec3f64.create();this.direction=n.vec3f64.create();this.intensity=l;this.direction=k}}();d.FillLight=r;r=function(){return function(l){void 0===l&&(l=n.vec3f64.create());this.intensity=l}}();d.AmbientLight=r;r=function(){return function(){this.sh={r:[0],g:[0],b:[0]}}}();d.SphericalHarmonicsLight=r})},"esri/views/3d/input/SceneInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragRotate ./handlers/DragZoom ./handlers/GamepadNavigation ./handlers/KeyboardNavigation ./handlers/MouseWheelZoom ./handlers/PinchAndPanNavigation ./handlers/PointerDownCancelAnimation ./handlers/SingleKeyResetHeading ./handlers/SingleKeyResetTilt ./handlers/TwoFingerTilt ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){r=function(k){function d(){var a=null!==k&&k.apply(this,arguments)||this;a._handles=new b;return a}n(d,k);d.prototype.initialize=function(){this.viewEvents=new u.ViewEvents(this.view)};d.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this.disconnect()};Object.defineProperty(d.prototype,"primaryDragAction",{get:function(){return this._get("primaryDragAction")},set:function(a){"pan"!==a&&"rotate"!==a||
a===this._get("primaryDragAction")||(this._set("primaryDragAction",a),this._updateMode())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"mode",{get:function(){return this._get("mode")},set:function(a){"default"!==a&&"pro"!==a||a===this._get("mode")||(this._set("mode",a),this._updateMode())},enumerable:!0,configurable:!0});d.prototype.disconnect=function(){this.viewEvents.disconnect();this._inputManager&&(this._inputManager.destroy(),this._inputManager=null);this._source&&(this._source.destroy(),
this._source=null)};d.prototype.connect=function(){var b=this.view;this._source=new w.BrowserEventSource(this.view.surface,b.input);var h=new m.InputManager(this._source);this._inputManager=h;h.installHandlers("prevent-context-menu",[new z.PreventContextMenu]);this._modeDragPan=new q.PinchAndPanNavigation(b,"primary");this._modeDragRotate=new e.DragRotate(b,"secondary","center");this._modeDragZoom=new c.DragZoom(b,"tertiary");h.installHandlers("navigation",[new v.PointerDownCancelAnimation(b),new g.DoubleClickZoom(b),
new f.GamepadNavigation(b),new a.KeyboardNavigation(b,{left:"ArrowLeft",right:"ArrowRight",forward:"ArrowUp",backward:"ArrowDown",up:"u",down:"j",headingLeft:"a",headingRight:"d",tiltUp:"w",tiltDown:"s"}),new p.MouseWheelZoom(b),new y.SingleKeyResetTilt(b,"p"),new t.SingleKeyResetHeading(b,"n"),new e.DragRotate(b,"primary","eye",["b"]),new e.DragRotate(b,"secondary","center",["b"]),new q.PinchAndPanNavigation(b,"tertiary",["b"]),this._modeDragRotate,this._modeDragZoom,this._modeDragPan,new x.TwoFingerTilt(b)]);
this.viewEvents.connect(h);this._updateMode()};d.prototype._updateMode=function(){var a=this.primaryDragAction,a=B.get(this.mode).get(a);this._modeDragPan&&(this._modeDragPan.pointerAction=a.pan);this._modeDragRotate&&(this._modeDragRotate.pointerAction=a.rotate);this._modeDragZoom&&(this._modeDragZoom.pointerAction=a.zoom)};Object.defineProperty(d.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});l([h.property()],d.prototype,"view",void 0);
l([h.property({value:"pan"})],d.prototype,"primaryDragAction",null);l([h.property({value:"default"})],d.prototype,"mode",null);l([h.property({readOnly:!0,aliasOf:"_inputManager.hasPendingInputs"})],d.prototype,"hasPendingInputs",void 0);l([h.property({readOnly:!0,aliasOf:"_inputManager.latestPointerType"})],d.prototype,"latestPointerType",void 0);l([h.property()],d.prototype,"_inputManager",void 0);return d=l([h.subclass("esri.views.3d.input.SceneInputManager")],d)}(h.declared(k));var B=new Map;d=
new Map;k=new Map;d.set("pan",{pan:"primary",rotate:"secondary",zoom:"tertiary"});d.set("rotate",{pan:"secondary",rotate:"primary",zoom:"tertiary"});k.set("pan",{pan:"primary",rotate:"tertiary",zoom:"secondary"});k.set("rotate",{pan:"tertiary",rotate:"primary",zoom:"secondary"});B.set("default",d);B.set("pro",k);return r})},"esri/views/3d/input/handlers/DoubleClickZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomStepController ../../state/controllers/local/ZoomStepController ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(e){function c(b,a){var c=e.call(this,!0)||this;c.view=b;c.registerIncoming("double-click",a,function(a){return c.handleDoubleClick(a)});return c}n(c,e);c.prototype.handleDoubleClick=function(c){var a=c.data;if(g.eventMatchesPointerAction(a,"primary")){var e=this.view.state.isGlobal?new k.ZoomStepController(this.view,"animation"):new b.ZoomStepController(this.view,"animation");this.view.state.switchCameraController(e);
e.zoomStep(Math.log(.5)/Math.log(.6),l.createScreenPointArray(a.x,a.y));c.stopPropagation()}};return c}(h.InputHandler);d.DoubleClickZoom=r})},"esri/views/3d/state/controllers/global/ZoomStepController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../PointToPointAnimationController ../../utils/navigationUtils ../../../support/geometryUtils ../../../webgl-engine/lib/Camera ../../../../animation/easing".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function h(b,f){var g=a.call(this,b.state,b.sceneIntersectionHelper,"interaction"===f?null:void 0)||this;g.view=b;g.mode=f;g.zoomLocation=k.vec3f64.create();g.tmpCamera=new c;g.tmpViewDir=k.vec3f64.create();g.targetOnSphere=k.vec3f64.create();g.tmpCenter=k.vec3f64.create();g.constraintOptions={selection:7,interactionType:1,interactionFactor:null,interactionStartCamera:new c,interactionDirection:null,tiltMode:0};
g.sphere=e.sphere.create();return g}n(h,a);Object.defineProperty(h.prototype,"isInteractive",{get:function(){return"interaction"===this.mode},enumerable:!0,configurable:!0});h.prototype.zoomStep=function(a,b){if(this.active){var c=this.view.state,e=this.constraintOptions.interactionStartCamera;this.animation.finished?e.copyFrom(c.camera):this.animation.cameraAt(1,e);e=!1;0<a&&this.intersectionHelper.intersectScreen(b,this.zoomLocation)&&(e=!0);this.tmpCamera.copyFrom(c.camera);e?this.intersectionHelper.intersectRay(this.tmpCamera.ray,
this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:l.vec3.copy(this.zoomLocation,this.tmpCamera.center);this.updateCamera(this.tmpCamera,Math.pow(.6,a),this.zoomLocation,b);this.begin(this.tmpCamera)}};h.prototype.animationSettings=function(){return{apex:null,duration:.6,easing:f.outExpo}};h.prototype.updateCamera=function(a,c,f,h){this.sphere.radius=l.vec3.length(f);l.vec3.subtract(this.tmpViewDir,
a.center,a.eye);var p=l.vec3.length(this.tmpViewDir),k=p*c;1>=c&&4>k&&(k=4,c=k/p);1E-6>Math.abs(p-k)||(p=l.vec3.length(a.center),this.sphere.radius!==p&&l.vec3.scale(a.center,a.center,(this.sphere.radius+c*(p-this.sphere.radius))/p),l.vec3.scale(this.tmpViewDir,this.tmpViewDir,-c),l.vec3.add(a.eye,a.center,this.tmpViewDir),b.applyAll(this.view,a,this.constraintOptions),1E-12<l.vec3.squaredDistance(f,a.center)&&e.sphere.intersectScreen(this.sphere,a,h,this.targetOnSphere)&&g.panToPosition(this.sphere,
a,f,this.targetOnSphere,this.view.camera.heading,this.view.camera.tilt,!0),b.applySurfaceCollision(this.view,a))};return h}(h.PointToPointAnimationController);d.ZoomStepController=r})},"esri/views/3d/camera/constraintUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/vec2 ./constraintUtils/altitude ./constraintUtils/common ./constraintUtils/distance ./constraintUtils/surfaceCollision ./constraintUtils/tilt ../../animation/easing ./constraintUtils/tilt ./constraintUtils/altitude ./constraintUtils/distance ./constraintUtils/surfaceCollision".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});d.applyTilt=c.apply;d.tiltError=c.error;d.applyAltitude=f.apply;d.altitudeError=f.error;d.applyDistance=a.apply;d.distanceError=a.error;d.applySurfaceCollision=p.apply;d.applyAll=function(a,b,c,e){void 0===c&&(c=v);void 0===e&&(e=b);var f=!1;e!==b&&e.copyFrom(b);e.markViewDirty();e.computeUp(a.state.mode);for(b=0;b<t;b++){for(var g=0,p=0,l=q;p<l.length;p++){var d=l[p];if(k.hasConstraintType(c.selection,d.type)){var m=
Math.abs(d.error(a,e,c));d.apply(a,e,c)&&(f=!0,g+=m)}}if(0===g)break}b=k.hasConstraintType(c.selection,8);a:switch(c.interactionType){case 4:c=1;break a;case 5:c=a.state.isGlobal?2:1;break a;default:c=0}b&&h.apply(a,e,c)&&(f=!0);f&&e.computeUp(a.state.mode);return f};d.pixelDistanceToInteractionFactor=function(a,b){a="number"===typeof a?a:n.vec2.distance(a,b);return e.inOutCubic(Math.min(1,a/150))};var q=[{type:1,error:function(a,b,c){return g.error(a,b,c)*b.distance},apply:g.apply},{type:2,error:l.error,
apply:l.apply},{type:4,error:b.error,apply:b.apply}],v={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:0},t=5})},"esri/views/3d/camera/constraintUtils/altitude":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../support/geometryUtils ../../support/intersectionUtils ../../support/mathUtils".split(" "),function(r,d,n,l,k,b,h,g,
e){function c(e,f,g){void 0===g&&(g=b.defaultApplyOptions);var h;h=e.state.constraints.altitude;h=e.state.isGlobal&&h?2===g.interactionType&&b.hasConstraintType(g.selection,1)?!1:!0:!1;if(!h)return 0;var p=e.state.constraints.altitude;h=a;h.min=p.min;h.max=p.max;var k=g.interactionType;if(0!==k){var p=h.min,l=h.max,d=g.interactionStartCamera;g=g.interactionFactor;var k=2===k||1===k,q=c(e,d),d=0===q?0:e.renderCoordsHelper.getAltitude(d.eye);h.min=p;h.max=l;b.adjustRangeForInteraction(q,d,k,g,.05*d,
h)}e=e.renderCoordsHelper.getAltitude(f.eye);e=n.clamp(e,h.min,h.max)-e;return 1E-6>=Math.abs(e)?0:e}function f(a,b,c,e){a.renderCoordsHelper.worldUpAtPosition(b.eye,e);l.vec3.scale(e,e,c);return e}Object.defineProperty(d,"__esModule",{value:!0});d.apply=function(a,k,d,w){void 0===d&&(d=b.defaultApplyOptions);void 0===w&&(w=k);w!==k&&w.copyFrom(k);var m=c(a,k,d);if(0===m)return!1;var u=a.renderCoordsHelper,z=u.getAltitude(k.eye)+m;a=b.interactionDirectionTowardsConstraintMinimization(a,k,d.interactionDirection,
f(a,k,e.sign(m),q),p);d=l.vec3.copy(v,k.viewForward);u.intersectInfiniteManifold(h.ray.wrap(k.eye,a),z,w.eye)||u.setAltitude(z,w.eye);g.closestPointOnRay(k.eye,d,k.center,k.center);w.markViewDirty();return!0};d.error=c;var a={min:0,max:0},p=k.vec3f64.create(),q=k.vec3f64.create(),v=k.vec3f64.create()})},"esri/views/3d/camera/constraintUtils/common":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../support/mathUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",
{value:!0});d.hasConstraintType=function(k,b){return 0!==(k&b)};d.adjustRangeForInteraction=function(k,b,h,g,e,c){0!==k&&(h?(c.min=Math.min(c.min,b),c.max=Math.max(c.max,b)):null!=g?(c.min-=Math.max(0,(b-c.min)*(1-g)),c.max+=Math.max(0,(b-c.max)*(1-g))):e&&(c.min-=Math.max(0,b-c.min-e),c.max+=Math.max(0,b-c.max-e)))};d.defaultApplyOptions={selection:0,interactionType:0,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:0};d.interactionDirectionTowardsConstraintMinimization=
function(k,b,h,g,e){h||(h=b.viewForward);n.vec3.copy(e,h);n.vec3.scale(e,e,l.sign(n.vec3.dot(h,g)));return e}})},"esri/views/3d/support/intersectionUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2f64","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(r,d,n,l,k){function b(b,f,a,g){var c=e;b?(a&&g&&(c.len=l.vec3.distance(f,a)),l.vec3.copy(c.dir,b)):g?(c.len=l.vec3.distance(f,a),l.vec3.subtract(c.dir,a,f),l.vec3.scale(c.dir,c.dir,
1/c.len)):(l.vec3.subtract(c.dir,a,f),l.vec3.normalize(c.dir,c.dir));return c}function h(b,e){return-l.vec3.dot(e,b)-b[3]}function g(b,e,a,g){g.clip[0]=0;g.clip[1]=a?g.len:Number.MAX_VALUE;for(a=0;a<b.length;a++){var c;var f=b[a],p=e;c=g;var k=l.vec3.dot(f,c.dir),f=h(f,p);0>f&&0<=k?c=!1:-1E-6<k&&1E-6>k?c=0<f:!(0>f||0>k)||0>f&&0>k?(f/=k,0<k?f<c.clip[1]&&(c.clip[1]=f):f>c.clip[0]&&(c.clip[0]=f),c=c.clip[0]<=c.clip[1]):c=!0;if(!c)return!1}return!0}Object.defineProperty(d,"__esModule",{value:!0});d.planeSphere=
function(b,e,a){return b[0]*e[0]+b[1]*e[1]+b[2]*e[2]+b[3]<a};d.frustumSphere=function(b,e,a){var c=e[0],f=e[1];e=e[2];return b[0][0]*c+b[0][1]*f+b[0][2]*e+b[0][3]>a||b[1][0]*c+b[1][1]*f+b[1][2]*e+b[1][3]>a||b[2][0]*c+b[2][1]*f+b[2][2]*e+b[2][3]>a||b[3][0]*c+b[3][1]*f+b[3][2]*e+b[3][3]>a||b[4][0]*c+b[4][1]*f+b[4][2]*e+b[4][3]>a||b[5][0]*c+b[5][1]*f+b[5][2]*e+b[5][3]>a?!1:!0};d.frustumRay=function(c,e,a,h){a=b(h,e,a,!1);return g(c,e,null,a)};d.frustumPoint=function(b,e){for(var a=0;6>a;a++)if(0>h(b[a],
e))return!1;return!0};d.frustumLineSegment=function(c,e,a,h){h=b(h,e,a,!0);return g(c,e,a,h)};d.closestPointOnRay=function(b,e,a,g){a=l.vec3.dot(e,l.vec3.subtract(g,a,b));l.vec3.add(g,b,l.vec3.scale(g,e,a));return g};var e={dir:k.vec3f64.create(),len:0,clip:n.vec2f64.create()}})},"esri/views/3d/camera/constraintUtils/distance":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../support/geometryUtils ../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h){function g(a,b,c){void 0===c&&(c=k.defaultApplyOptions);if(!a.state.isLocal)return 0;var f=a.state.constraints.distance;if(!a.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===f)return 0;e.min=0;e.max=f;var f=e,h=c.interactionType;if(0!==h){var p=f.min,l=f.max,d=c.interactionStartCamera;c=c.interactionFactor;var h=1===h||4===h,q=g(a,d),d=0===q?0:n.vec3.distance(d.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);f.min=p;f.max=l;k.adjustRangeForInteraction(q,d,h,
c,.05*d,f)}a=n.vec3.distance(b.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);a=e.max-a;return-1E-6<=a?0:a}Object.defineProperty(d,"__esModule",{value:!0});d.error=g;d.apply=function(e,l,d,y){void 0===d&&(d=k.defaultApplyOptions);void 0===y&&(y=l);y!==l&&y.copyFrom(l);var q=g(e,l,d);if(0===q)return!1;var t=e.pointsOfInterest.surfaceOrigin,q=n.vec3.distance(l.eye,e.pointsOfInterest.surfaceOrigin.renderLocation)+q,m=n.vec3.copy(c,l.eye);d=k.interactionDirectionTowardsConstraintMinimization(e,
l,d.interactionDirection,h.directionFromTo(p,l.eye,e.pointsOfInterest.surfaceOrigin.renderLocation),a);return b.sphere.intersectRay(b.sphere.wrap(q,t.renderLocation),b.ray.wrap(l.eye,d),y.eye)?(l=n.vec3.subtract(f,y.eye,m),n.vec3.add(y.center,y.center,l),y.markViewDirty(),l=e.renderCoordsHelper.getAltitude(y.center),e.renderCoordsHelper.intersectInfiniteManifold(y.ray,l,y.center),y.markViewDirty(),!0):!1};var e={min:0,max:0},c=l.vec3f64.create(),f=l.vec3f64.create(),a=l.vec3f64.create(),p=l.vec3f64.create()})},
"esri/views/3d/camera/constraintUtils/surfaceCollision":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64","../intersectionUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.apply=function(h,g,e,c){void 0===e&&(e=0);void 0===c&&(c=g);var f=h.state.constraints;g!==c&&c.copyFrom(g);if(!f.collision.enabled)return!1;var a=k.surfaceElevationBelowEye(h,g);g=h.renderCoordsHelper.getAltitude(g.eye);f=a+f.collision.elevationMargin;
if(g>=f)return!1;a=n.vec3.length(c.eye);n.vec3.subtract(b,c.center,c.eye);h.renderCoordsHelper.setAltitude(f,c.eye);1===e?n.vec3.add(c.center,c.eye,b):2===e&&n.vec3.scale(c.center,c.center,(a-g+f)/a);c.markViewDirty();return!0};var b=l.vec3f64.create()})},"esri/views/3d/camera/intersectionUtils":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/support/aaBoundingRect ../support/earthUtils ../webgl-engine/lib/Intersector".split(" "),
function(r,d,n,l,k,b,h,g){function e(a,b){return a.renderCoordsHelper.fromRenderCoords(b,v,a.basemapTerrain.spatialReference)?a.basemapTerrain.getElevation(v)||0:0}function c(a,b,c){if(!a.state.isGlobal)return!1;var f=e(a,b);a=a.stateManager.constraintsManager.nearFarHeuristic.compute(b,c,a.dataExtent,f,y).far;a*=a;return n.vec3.squaredDistance(b,c)>a}function f(b,e,f){void 0===f&&(f=l.vec3f64.create());var p=a[b.viewingMode];p||(p=new g(b.viewingMode),p.enable.backfacesTerrain=!b.state.isGlobal,
p.enable.invisibleTerrain=!0,a[b.viewingMode]=p);var k=b.state.isGlobal;return b.sceneIntersectionHelper.intersectRay(e,f,null,p)&&!c(b,e.origin,f)?!0:!b.renderCoordsHelper.intersectManifold(e,0,f)||c(b,e.origin,f)?k?(b=f,f=n.vec3.dot(e.origin,e.origin)-h.earthRadius*h.earthRadius,n.vec3.scale(b,e.direction,(0<f?Math.sqrt(f)/3:1)/n.vec3.length(e.direction)),n.vec3.add(b,b,e.origin),!0):!1:!0}Object.defineProperty(d,"__esModule",{value:!0});d.eyeWithinExtent=function(a,c,e,f){return a.renderCoordsHelper.fromRenderCoords(c.eye,
p,f)&&b.containsPoint(e,p)};d.surfaceElevationBelowEye=function(a,b){return e(a,b.eye)};d.cameraOnContentAlongViewDirection=function(a,b,c,e){var g=a.state.camera.clone();b&&(g.eye=b);c&&(g.center=c);e&&(g.up=e);f(a,g.ray,q)||n.vec3.copy(q,g.center);c=a.state.constraints;e=c.minimumPoiDistance;n.vec3.squaredDistance(g.eye,q)<e&&(b=c.collision.enabled,n.vec3.copy(t,g.viewForward),n.vec3.scale(t,t,e),b?n.vec3.subtract(g.eye,q,t):n.vec3.add(q,g.eye,t),a=a.renderCoordsHelper,e=a.getAltitude(g.eye),c=
c.collision.elevationMargin,b&&e<c&&(n.vec3.subtract(t,q,g.eye),a.setAltitude(c,g.eye),n.vec3.add(q,g.eye,t)));g.center=q;return g};var a={},p=l.vec3f64.create(),q=l.vec3f64.create(),v=new k,t=l.vec3f64.create(),y={near:0,far:0}})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("require exports ../../../../core/has ../../../../core/now ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./intersectorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){var c=k.mat4f64.create();return function(){function f(a){this.enable=new e.EnableIntersectorOptions;this.results=new e.IntersectorResults;this.transform=new e.IntersectorTransform;this.performanceInfo={queryDuration:0,numObjectsTested:0};this._ray={origin:h.vec3f64.create(),direction:h.vec3f64.create()};this._rayEndPoint=h.vec3f64.create();this._rayStartPointTransformed=h.vec3f64.create();this._rayEndPointTransformed=h.vec3f64.create();this.viewingMode=a||"global"}Object.defineProperty(f.prototype,
"ray",{get:function(){return this._ray},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"rayBeginPoint",{get:function(){return this._ray.origin},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"rayEndPoint",{get:function(){return this._rayEndPoint},enumerable:!0,configurable:!0});f.prototype.intersect=function(a,c,e,f,h,k,l,d,m){var p=this;if(void 0===m||!0===m)this._numObjectsTested=0,g.ray.fromPoints(c,e,this._ray),this.results.init(this._ray);this.point=f;this.camera=
h;this.enable.selectionMode=l;this.filterPredicate=d;this.tolerance=null==k?1E-5:k;b.vec3.add(this._rayEndPoint,this._ray.origin,this._ray.direction);if(a&&0<a.length)for(c=0;c<a.length;c++)if(e=a[c],f=e.getSpatialQueryAccelerator?e.getSpatialQueryAccelerator():void 0)e=function(a){p.intersectObject(a)},f.forEachAlongRay(this._ray.origin,this._ray.direction,e),l&&f.forEachDegenerateObject(e);else for(f=0,e=e.getObjects();f<e.length;f++)this.intersectObject(e[f]);this.sortResults()};f.prototype.intersectObject=
function(a){var f=this;this._numObjectsTested++;for(var g=a.id,h=a.getGeometryRecords(),k=a.objectTransformation,l,d=function(p){p=h[p];var d=p.geometry,m=p.material,u=p.instanceParameters;if(u.hidden)return"continue";l=d.id;w.transform.setAndInvalidateLazyTransforms(k,p.getShaderTransformation());b.vec3.transformMat4(w._rayStartPointTransformed,w._ray.origin,w.transform.inverse);b.vec3.transformMat4(w._rayEndPointTransformed,w._rayEndPoint,w.transform.inverse);var q=w.transform.transform;m.intersect(d,
u,w.transform.transform,w,w._rayStartPointTransformed,w._rayEndPointTransformed,function(b,h,p,k,d,m){0<=b&&(null==f.filterPredicate||f.filterPredicate(f._ray.origin,f._rayEndPoint,b))&&(d?(null==f.results.hud.dist||b<f.results.hud.dist)&&f.results.hud.set(a,g,b,h,c,k,m,l,p):(d=function(c){return c.set(a,g,b,h,q,k,null,l,p)},(null==f.results.min.drapedLayerOrder||k>=f.results.min.drapedLayerOrder)&&(null==f.results.min.dist||b<f.results.min.dist)&&d(f.results.min),(null==f.results.max.drapedLayerOrder||
k<f.results.max.drapedLayerOrder)&&(null==f.results.max.dist||b>f.results.max.dist)&&d(f.results.max),f.enable.storeAll&&(m=new e.IntersectorResult(f._ray),d(m),f.results.all.push(m))))},p.shaderTransformation)},w=this,m=0;m<h.length;m++)d(m)};f.prototype.sortResults=function(){this.results.all.sort(function(a,b){return a.dist!==b.dist?a.dist-b.dist:a.drapedLayerOrder!==b.drapedLayerOrder?(void 0!==a.drapedLayerOrder?a.drapedLayerOrder:Number.MAX_VALUE)-(void 0!==b.drapedLayerOrder?b.drapedLayerOrder:
Number.MAX_VALUE):(void 0!==b.drapedLayerGraphicOrder?b.drapedLayerGraphicOrder:Number.MIN_VALUE)-(void 0!==a.drapedLayerGraphicOrder?a.drapedLayerGraphicOrder:Number.MIN_VALUE)})};f.DEFAULT_TOLERANCE=1E-5;return f}()})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("require exports ../../../../Graphic ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/geometryUtils/boundedPlane ./Object3D".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(a,b){return l.isNone(a)||null==a.layerUid?null:l.isSome(b.graphicsView)&&a.layerUid===b.graphicsView.mockLayerId?b.graphics:b.map.findLayerByUid(a.layerUid)}function y(a,b,c){if(l.isNone(a))return null;var e=t(a,b);return l.isNone(e)?null:e===b.graphics?l.isSome(b.graphicsView)?l.expect(b.graphicsView.getGraphicFromGraphicUid(a.graphicUid)):null:(b=b.allLayerViews.find(function(a){return a.layer===e}))?x(b,a,c):null}function x(a,b,c){return!a||a.suspended?
null:l.isSome(c)&&"getGraphicFromStageObject"in a?a.getGraphicFromStageObject(c.obj,c.triangleNr):"getGraphicFromGraphicUid"in a&&null!=b.graphicUid?a.getGraphicFromGraphicUid(b.graphicUid):null}Object.defineProperty(d,"__esModule",{value:!0});d.sliceFilterPredicate=function(a){return function(b,c,f){e.vec3.lerp(u,b,c,f);return!q.extrusionContainsPoint(a,u)}};r=function(){return function(){this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.storeAll=this.storeTerrainResults=this.backfacesTerrain=
!0}}();d.EnableIntersectorOptions=r;r=function(){function a(){this._transform=g.mat4f64.create();this._transformInverse=new w({value:this._transform},h.mat4.invert,g.mat4f64.create);this._transformInverseTranspose=new w(this._transformInverse,h.mat4.transpose,g.mat4f64.create);this._transformTranspose=new w({value:this._transform},h.mat4.transpose,g.mat4f64.create);this._transformInverseRotation=new w({value:this._transform},k.mat3.normalFromMat4Legacy,b.mat3f64.create)}a.prototype.invalidateLazyTransforms=
function(){this._transformInverse.invalidate();this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};Object.defineProperty(a.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverse",{get:function(){return this._transformInverse.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverseTranspose",{get:function(){return this._transformInverseTranspose.value},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"inverseRotation",{get:function(){return this._transformInverseRotation.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transpose",{get:function(){return this._transformTranspose.value},enumerable:!0,configurable:!0});a.prototype.setTransformMatrix=function(a){h.mat4.copy(this._transform,a)};a.prototype.multiplyTransform=function(a){h.mat4.multiply(this._transform,this._transform,a)};a.prototype.set=function(a){h.mat4.copy(this._transform,
a);this.invalidateLazyTransforms()};a.prototype.setAndInvalidateLazyTransforms=function(a,b){this.setTransformMatrix(a);this.multiplyTransform(b);this.invalidateLazyTransforms()};return a}();d.IntersectorTransform=r;var w=function(){function a(a,b,c){this.original=a;this.update=b;this.dirty=!0;this.transform=c()}a.prototype.invalidate=function(){this.dirty=!0};Object.defineProperty(a.prototype,"value",{get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform},
enumerable:!0,configurable:!0});return a}();r=function(){function a(){this.min=new m;this.max=new m;this.hud=new m;this.terrain=new m}a.prototype.init=function(a){this.min.init(a);this.max.init(a);this.hud.init(a);this.terrain.init(a);this.all=[]};return a}();d.IntersectorResults=r;var m=function(){function a(a){this.normal=c.vec3f64.create();this.transformation=g.mat4f64.create();this._ray=p.ray.create();this.init(a)}Object.defineProperty(a.prototype,"ray",{get:function(){return this._ray},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"hasIntersectionPoint",{get:function(){return null!=this.dist},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"distanceInRenderSpace",{get:function(){if(null!=this.dist)return e.vec3.scale(z,this.ray.direction,this.dist),e.vec3.length(z)},enumerable:!0,configurable:!0});a.prototype.getIntersectionPoint=function(a){if(!this.hasIntersectionPoint)return!1;e.vec3.scale(z,this.ray.direction,this.dist);e.vec3.add(a,this.ray.origin,z);
return!0};a.prototype.getTransformedNormal=function(a){e.vec3.copy(B,this.normal);B[3]=0;f.vec4.transformMat4(B,B,this.transformation);e.vec3.copy(a,B);e.vec3.normalize(a,a);return a};a.prototype.set=function(a,b,f,g,k,p,l,d,m,u){a instanceof v&&(a={type:"stage",obj:a});this.dist=f;e.vec3.copy(this.normal,g);h.mat4.copy(this.transformation,k);this.target=a;this.name=b;this.drapedLayerOrder=p;this.center=l?c.vec3f64.clone(l):null;this.geometryId=d;this.triangleNr=m;this.drapedLayerGraphicOrder=u};
a.prototype.copyFrom=function(a){p.ray.copy(a._ray,this._ray);this.dist=a.dist;this.target=a.target;this.name=a.name;this.drapedLayerOrder=a.drapedLayerOrder;this.center=a.center?c.vec3f64.clone(a.center):null;this.geometryId=a.geometryId;this.triangleNr=a.triangleNr;this.intersector=a.intersector;this.drapedLayerGraphicOrder=a.drapedLayerGraphicOrder;e.vec3.copy(this.normal,a.normal);h.mat4.copy(this.transformation,a.transformation)};a.prototype.init=function(a){this.drapedLayerGraphicOrder=this.drapedLayerOrder=
this.name=this.target=this.dist=void 0;this.triangleNr=this.geometryId=this.center=null;this.intersector="Stage";a?p.ray.copy(a,this._ray):this._ray=p.ray.create()};a.prototype.toOwner=function(a){if(!this.target)return null;switch(this.target.type){case "stage":var b=this.target.obj.getMetadata();return t(b,a);case "external":switch(this.intersector){case "PointRenderer":return b=this.target.metadata.layerUid,null!=b?a.map.findLayerByUid(b):null;case "LodRenderer":case "DrapedRenderer":return t(this.target.metadata,
a);case "TerrainRenderer":return a.map&&a.map.ground}}return null};a.prototype.toGraphic=function(a){if(!this.target)return null;switch(this.target.type){case "stage":var b=this.target.obj,c=this.triangleNr,e=b.getMetadata();return y(e,a,{obj:b,triangleNr:c});case "external":switch(this.intersector){case "PointRenderer":return c=this.target,b=a.computeMapPointFromVec3d(c.point),b=new n(b),c=c.metadata.layerUid,null!=c&&(a=a.map.findLayerByUid(c),b.layer=a,b.sourceLayer=a),b;case "LodRenderer":case "DrapedRenderer":return y(this.target.metadata,
a,null)}}return null};return a}();d.IntersectorResult=m;d.TERRAIN_ID="terrain";var u=c.vec3f64.create(),z=c.vec3f64.create(),B=a.vec4f64.create()})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=n})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(r,d,n){function l(b,h,g){var e=h[0],c=h[1],f=h[2],a=h[3],k=h[4],l=h[5],d=h[6],t=h[7];h=h[8];
var y=g[0],x=g[1],w=g[2],m=g[3],u=g[4],z=g[5],B=g[6],C=g[7];g=g[8];b[0]=y*e+x*a+w*d;b[1]=y*c+x*k+w*t;b[2]=y*f+x*l+w*h;b[3]=m*e+u*a+z*d;b[4]=m*c+u*k+z*t;b[5]=m*f+u*l+z*h;b[6]=B*e+C*a+g*d;b[7]=B*c+C*k+g*t;b[8]=B*f+C*l+g*h;return b}function k(b,h,g){b[0]=h[0]-g[0];b[1]=h[1]-g[1];b[2]=h[2]-g[2];b[3]=h[3]-g[3];b[4]=h[4]-g[4];b[5]=h[5]-g[5];b[6]=h[6]-g[6];b[7]=h[7]-g[7];b[8]=h[8]-g[8];return b}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(b,h){b[0]=h[0];b[1]=h[1];b[2]=h[2];b[3]=h[4];
b[4]=h[5];b[5]=h[6];b[6]=h[8];b[7]=h[9];b[8]=h[10];return b};d.copy=function(b,h){b[0]=h[0];b[1]=h[1];b[2]=h[2];b[3]=h[3];b[4]=h[4];b[5]=h[5];b[6]=h[6];b[7]=h[7];b[8]=h[8];return b};d.set=function(b,h,g,e,c,f,a,k,l,d){b[0]=h;b[1]=g;b[2]=e;b[3]=c;b[4]=f;b[5]=a;b[6]=k;b[7]=l;b[8]=d;return b};d.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.transpose=function(b,h){if(b===h){var g=h[1],e=h[2],c=h[5];b[1]=h[3];b[2]=h[6];b[3]=g;b[5]=h[7];b[6]=e;b[7]=c}else b[0]=
h[0],b[1]=h[3],b[2]=h[6],b[3]=h[1],b[4]=h[4],b[5]=h[7],b[6]=h[2],b[7]=h[5],b[8]=h[8];return b};d.invert=function(b,h){var g=h[0],e=h[1],c=h[2],f=h[3],a=h[4],k=h[5],l=h[6],d=h[7];h=h[8];var t=h*a-k*d,y=-h*f+k*l,x=d*f-a*l,w=g*t+e*y+c*x;if(!w)return null;w=1/w;b[0]=t*w;b[1]=(-h*e+c*d)*w;b[2]=(k*e-c*a)*w;b[3]=y*w;b[4]=(h*g-c*l)*w;b[5]=(-k*g+c*f)*w;b[6]=x*w;b[7]=(-d*g+e*l)*w;b[8]=(a*g-e*f)*w;return b};d.adjoint=function(b,h){var g=h[0],e=h[1],c=h[2],f=h[3],a=h[4],k=h[5],l=h[6],d=h[7];h=h[8];b[0]=a*h-k*
d;b[1]=c*d-e*h;b[2]=e*k-c*a;b[3]=k*l-f*h;b[4]=g*h-c*l;b[5]=c*f-g*k;b[6]=f*d-a*l;b[7]=e*l-g*d;b[8]=g*a-e*f;return b};d.determinant=function(b){var h=b[3],g=b[4],e=b[5],c=b[6],f=b[7],a=b[8];return b[0]*(a*g-e*f)+b[1]*(-a*h+e*c)+b[2]*(f*h-g*c)};d.multiply=l;d.translate=function(b,h,g){var e=h[0],c=h[1],f=h[2],a=h[3],k=h[4],l=h[5],d=h[6],t=h[7];h=h[8];var y=g[0];g=g[1];b[0]=e;b[1]=c;b[2]=f;b[3]=a;b[4]=k;b[5]=l;b[6]=y*e+g*a+d;b[7]=y*c+g*k+t;b[8]=y*f+g*l+h;return b};d.rotate=function(b,h,g){var e=h[0],
c=h[1],f=h[2],a=h[3],k=h[4],l=h[5],d=h[6],t=h[7];h=h[8];var y=Math.sin(g);g=Math.cos(g);b[0]=g*e+y*a;b[1]=g*c+y*k;b[2]=g*f+y*l;b[3]=g*a-y*e;b[4]=g*k-y*c;b[5]=g*l-y*f;b[6]=d;b[7]=t;b[8]=h;return b};d.scale=function(b,h,g){var e=g[0],c=g[1];g=g[2];b[0]=e*h[0];b[1]=e*h[1];b[2]=e*h[2];b[3]=c*h[3];b[4]=c*h[4];b[5]=c*h[5];b[6]=g*h[6];b[7]=g*h[7];b[8]=g*h[8];return b};d.fromTranslation=function(b,h){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=h[0];b[7]=h[1];b[8]=1;return b};d.fromRotation=function(b,
h){var g=Math.sin(h);h=Math.cos(h);b[0]=h;b[1]=g;b[2]=0;b[3]=-g;b[4]=h;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromScaling=function(b,h){b[0]=h[0];b[1]=0;b[2]=0;b[3]=0;b[4]=h[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromMat2d=function(b,h){b[0]=h[0];b[1]=h[1];b[2]=0;b[3]=h[2];b[4]=h[3];b[5]=0;b[6]=h[4];b[7]=h[5];b[8]=1;return b};d.fromQuat=function(b,h){var g=h[0],e=h[1],c=h[2];h=h[3];var f=g+g,a=e+e,k=c+c,g=g*f,l=e*f,e=e*a,d=c*f,t=c*a,c=c*k,f=h*f,a=h*a;h*=k;b[0]=1-e-c;b[3]=l-h;b[6]=d+a;b[1]=l+
h;b[4]=1-g-c;b[7]=t-f;b[2]=d-a;b[5]=t+f;b[8]=1-g-e;return b};d.normalFromMat4Legacy=function(b,h){var g=h[0],e=h[1],c=h[2],f=h[4],a=h[5],k=h[6],l=h[8],d=h[9];h=h[10];var t=h*a-k*d,y=-h*f+k*l,x=d*f-a*l,w=g*t+e*y+c*x;if(!w)return null;w=1/w;b[0]=t*w;b[1]=(-h*e+c*d)*w;b[2]=(k*e-c*a)*w;b[3]=y*w;b[4]=(h*g-c*l)*w;b[5]=(-k*g+c*f)*w;b[6]=x*w;b[7]=(-d*g+e*l)*w;b[8]=(a*g-e*f)*w;return b};d.normalFromMat4=function(b,h){var g=h[0],e=h[1],c=h[2],f=h[3],a=h[4],k=h[5],l=h[6],d=h[7],t=h[8],y=h[9],x=h[10],w=h[11],
m=h[12],u=h[13],z=h[14];h=h[15];var B=g*k-e*a,C=g*l-c*a,n=g*d-f*a,E=e*l-c*k,N=e*d-f*k,L=c*d-f*l,K=t*u-y*m,O=t*z-x*m,t=t*h-w*m,I=y*z-x*u,y=y*h-w*u,x=x*h-w*z,w=B*x-C*y+n*I+E*t-N*O+L*K;if(!w)return null;w=1/w;b[0]=(k*x-l*y+d*I)*w;b[1]=(l*t-a*x-d*O)*w;b[2]=(a*y-k*t+d*K)*w;b[3]=(c*y-e*x-f*I)*w;b[4]=(g*x-c*t+f*O)*w;b[5]=(e*t-g*y-f*K)*w;b[6]=(u*L-z*N+h*E)*w;b[7]=(z*n-m*L-h*C)*w;b[8]=(m*N-u*n+h*B)*w;return b};d.projection=function(b,h,g){b[0]=2/h;b[1]=0;b[2]=0;b[3]=0;b[4]=-2/g;b[5]=0;b[6]=-1;b[7]=1;b[8]=
1;return b};d.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))};d.add=function(b,h,g){b[0]=h[0]+g[0];b[1]=h[1]+g[1];b[2]=h[2]+g[2];b[3]=h[3]+g[3];b[4]=h[4]+g[4];b[5]=h[5]+g[5];b[6]=h[6]+g[6];b[7]=h[7]+g[7];b[8]=h[8]+g[8];return b};d.subtract=
k;d.multiplyScalar=function(b,h,g){b[0]=h[0]*g;b[1]=h[1]*g;b[2]=h[2]*g;b[3]=h[3]*g;b[4]=h[4]*g;b[5]=h[5]*g;b[6]=h[6]*g;b[7]=h[7]*g;b[8]=h[8]*g;return b};d.multiplyScalarAndAdd=function(b,h,g,e){b[0]=h[0]+g[0]*e;b[1]=h[1]+g[1]*e;b[2]=h[2]+g[2]*e;b[3]=h[3]+g[3]*e;b[4]=h[4]+g[4]*e;b[5]=h[5]+g[5]*e;b[6]=h[6]+g[6]*e;b[7]=h[7]+g[7]*e;b[8]=h[8]+g[8]*e;return b};d.exactEquals=function(b,h){return b[0]===h[0]&&b[1]===h[1]&&b[2]===h[2]&&b[3]===h[3]&&b[4]===h[4]&&b[5]===h[5]&&b[6]===h[6]&&b[7]===h[7]&&b[8]===
h[8]};d.equals=function(b,h){var g=b[0],e=b[1],c=b[2],f=b[3],a=b[4],k=b[5],l=b[6],d=b[7];b=b[8];var t=h[0],y=h[1],x=h[2],w=h[3],m=h[4],u=h[5],z=h[6],B=h[7];h=h[8];return Math.abs(g-t)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(t))&&Math.abs(e-y)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(c-x)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-w)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(a-m)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(k-u)<=n.EPSILON*
Math.max(1,Math.abs(k),Math.abs(u))&&Math.abs(l-z)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(d-B)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(b-h)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))};d.mul=l;d.sub=k})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils ./ComponentUtils ./GeometryRecord ./HighlightUtils ./IdGen ./ModelContentType ./Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){var q=p.assert,v=l.mat4f64.create();r=function(){function p(a){void 0===a&&(a={});this._objectTransformation=l.mat4f64.create();this._bvObjectSpace=new t;this._bvWorldSpace=new t;this._bvDirty=!0;this._hasVolatileTransformation=!1;this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0;this.id=p._idGen.gen(a.idHint);this.name=a.name;this.castShadow=null!=a.castShadow?a.castShadow:!0;this.metadata=a.metadata;this.objectTransformation=l.mat4f64.create();
this._initializeGeometryRecords(a.geometries,a.materials,a.transformations,a.origins)}Object.defineProperty(p.prototype,"objectTransformation",{get:function(){return this._objectTransformation},set:function(a){n.mat4.copy(this._objectTransformation,a);this._invalidateBoundingVolume();this._notifyDirty("objTransformation")},enumerable:!0,configurable:!0});p.prototype._initializeGeometryRecords=function(a,b,c,f){if(Array.isArray(a)){q(b.length===a.length,"Object3D: materials don't match geometries");
q(c.length===a.length,"Object3D: transformations don't match geometries");this.geometryRecords=Array(a.length);this.geometries=a.slice();for(var g=0;g<a.length;g++)this.geometryRecords[g]=new e(a[g],b[g],l.mat4f64.clone(c[g]),{},f&&f[g]);this._hasVolatileTransformation=!1}else this.geometryRecords=[],this.geometries=[]};Object.defineProperty(p.prototype,"parentLayer",{get:function(){return this._parentLayer},set:function(a){q(null==this._parentLayer||null==a,"Object3D can only be added to a single Layer");
this._parentLayer=a},enumerable:!0,configurable:!0});p.prototype.getNumGeometryRecords=function(){return this.geometryRecords.length};p.prototype.getFirstGeometryIndex=function(a){a=this.geometries.indexOf(a);q(-1<a,"Object3D.getFirstGeometryIndex: geometry not found");return a};p.prototype.findGeometryRecords=function(a){for(var b=[],c=0;c<this.geometries.length;c++)this.geometries[c]===a&&b.push(this.geometryRecords[c]);return b};p.prototype.getGeometryRecord=function(a){q(0<=a&&a<this.geometryRecords.length,
"Object3d.getGeometryDataByIndex: index out of range");return this.geometryRecords[a]};p.prototype.getGeometryRecords=function(){return this.geometryRecords};p.prototype.addGeometry=function(a,b,c,f,g,h){void 0===c&&(c=v);this.geometries.push(a);a=new e(a,b,l.mat4f64.clone(c),f||{},g,h);this.geometryRecords.push(a);this._hasVolatileTransformation=this.geometryRecords.some(function(a){return!!a.shaderTransformation});this._notifyDirty("objGeometryAdded",a);this._invalidateBoundingVolume();this._allComponentsVisibleDirty=
this._allComponentsHiddenDirty=!0;return a};p.prototype.hasGeometry=function(a){return-1<this.geometries.indexOf(a)};p.prototype.removeGeometry=function(a){var b=this.geometryRecords.splice(a,1)[0];this._hasVolatileTransformation=this.geometryRecords.some(function(a){return!!a.shaderTransformation});this.geometries.splice(a,1);this._notifyDirty("objGeometryRemoved",b);this._invalidateBoundingVolume();this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0;return b};p.prototype.removeAllGeometries=
function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};p.prototype.geometryVertexAttrsUpdated=function(a){this._notifyDirty("vertexAttrsUpdated",this.geometryRecords[a]);this._invalidateBoundingVolume()};p.prototype.areAllComponentsHidden=function(){if(this._allComponentsHiddenDirty){this._allComponentsHiddenDirty=!1;this._allComponentsHidden=!0;for(var a=0,b=this.geometryRecords;a<b.length;a++){var c=b[a];if(!g.isAllHidden(c.instanceParameters.componentVisibilities,c.geometry.data.componentOffsets)){this._allComponentsHidden=
!1;break}}}return this._allComponentsHidden};p.prototype.areAllComponentsVisible=function(){if(this._allComponentsVisibleDirty){this._allComponentsVisibleDirty=!1;this._allComponentsVisible=!0;for(var a=0,b=this.geometryRecords;a<b.length;a++){var c=b[a];if(!g.isAllVisible(c.instanceParameters.componentVisibilities,c.geometry.data.componentOffsets)){this._allComponentsVisible=!1;break}}}return this._allComponentsVisible};p.prototype.hasComponents=function(){for(var a=!1,b=0;b<this.geometries.length&&
!(a=g.hasComponents(this.geometries[b].data.componentOffsets));b++);return a};p.prototype.setComponentVisibility=function(a,b,c){b=g.updateVisibility(a.instanceParameters.componentVisibilities,a.geometry.data.componentOffsets,b,c);a.instanceParameters.componentVisibilities=b;this._notifyDirty("visibilityChanged",a);this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=!0};p.prototype.setHidden=function(a,b){a.instanceParameters.hidden=!!b;this._notifyDirty("visibilityChanged",a)};p.prototype.isHidden=
function(a){return!!a.instanceParameters.hidden};p.prototype.getComponentVisibility=function(a,b){return g.getVisibility(a.instanceParameters.componentVisibilities,b)};p.prototype.hideAllComponents=function(){if(this._allComponentsHiddenDirty||!this._allComponentsHidden){for(var a=0,b=this.geometryRecords;a<b.length;a++){var c=b[a],e=g.hideAllComponents(c.instanceParameters.componentVisibilities);c.instanceParameters.componentVisibilities=e}this._notifyDirty("visibilityChanged");this._allComponentsVisibleDirty=
this._allComponentsHiddenDirty=!1;this._allComponentsHidden=!0;this._allComponentsVisible=!1}};p.prototype.unhideAllComponents=function(){if(this._allComponentsVisibleDirty||!this._allComponentsVisible){for(var a=0,b=this.geometryRecords;a<b.length;a++){var c=b[a],e=g.unhideAllComponents(c.instanceParameters.componentVisibilities);c.instanceParameters.componentVisibilities=e}this._notifyDirty("visibilityChanged");this._allComponentsHidden=this._allComponentsVisibleDirty=this._allComponentsHiddenDirty=
!1;this._allComponentsVisible=!0}};p.prototype._setComponentHighlight=function(a,b,c,e){b=g.addHighlight(a.instanceParameters.componentHighlights,b,c,e);a.instanceParameters.componentHighlights=b};p.prototype.setComponentHighlight=function(a,b,e){var f=c.generateHighlightId();this._setComponentHighlight(a,b,e,f);this._notifyDirty("componentHighlightChanged");return f};p.prototype.highlightAllComponents=function(a){for(var b=c.generateHighlightId(),e=0,f=this.geometryRecords;e<f.length;e++)this._setComponentHighlight(f[e],
null,a,b);this._notifyDirty("componentHighlightChanged");return b};p.prototype.removeHighlights=function(a){for(var b=0,c=this.geometryRecords;b<c.length;b++){var e=c[b].instanceParameters,f=g.removeHighlight(e.componentHighlights,a);e.componentHighlights=f}this._notifyDirty("componentHighlightChanged")};p.prototype.getComponentFromTriangleNr=function(a,b){q(0<=a&&a<this.geometryRecords.length,"Object3d.getComponentFromTriangleNr: index out of range");return g.componentFind(this.geometryRecords[a].geometry.data.componentOffsets,
3*b)};p.prototype.setGeometryTransformation=function(a,b){q(0<=a&&a<this.geometryRecords.length,"Object3d.setGeometryTransformation: index out of range");var c=this.geometryRecords[a];b=new e(c.geometry,c.material,l.mat4f64.clone(b),c.instanceParameters);this.geometryRecords[a]=b;this._notifyDirty("objGeometryReplaced",[c,b]);this._invalidateBoundingVolume()};p.prototype.getCombinedStaticTransformation=function(a,b){b=b||l.mat4f64.create();n.mat4.multiply(b,this.objectTransformation,a.getStaticTransformation());
return b};p.prototype.getCombinedShaderTransformation=function(a,b){b=b||l.mat4f64.create();n.mat4.multiply(b,this.objectTransformation,a.getShaderTransformation());return b};p.prototype.hasVolativeTransformation=function(){return this._hasVolatileTransformation};p.prototype.getCastShadow=function(){return this.castShadow};p.prototype.setCastShadow=function(a){this.castShadow=a};p.prototype.getMetadata=function(){return this.metadata};p.prototype.getName=function(){return this.name};p.prototype.getBBMin=
function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin};p.prototype.getBBMax=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax};p.prototype.getCenter=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.center:this._bvWorldSpace.center};p.prototype.getBSRadius=function(a){this._validateBoundingVolume();return a?this._bvObjectSpace.bsRadius:this._bvWorldSpace.bsRadius};p.prototype._validateBoundingVolume=
function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var a=0;a<this.geometryRecords.length;++a){var c=this.geometries[a],e=this.geometryRecords[a],c=c.boundingInfo;this._calculateTransformedBoundingVolume(c,this._bvObjectSpace,e.getShaderTransformation());this._calculateTransformedBoundingVolume(c,this._bvWorldSpace,this.getCombinedShaderTransformation(e))}k.vec3.lerp(this._bvObjectSpace.center,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,
.5);k.vec3.lerp(this._bvWorldSpace.center,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);for(var e=b.vec3f64.create(),f=b.vec3f64.create(),g=h.maxScale(this.objectTransformation),a=0;a<this.geometryRecords.length;++a){var c=this.geometries[a],p=this.geometryRecords[a].getShaderTransformation(),l=h.maxScale(p),c=c.boundingInfo;k.vec3.transformMat4(e,c.getCenter(),p);p=k.vec3.distance(e,this._bvObjectSpace.center);c=c.getBSRadius()*l;this._bvObjectSpace.bsRadius=Math.max(this._bvObjectSpace.bsRadius,
p+c);k.vec3.transformMat4(f,e,this.objectTransformation);l=k.vec3.distance(f,this._bvWorldSpace.center);this._bvWorldSpace.bsRadius=Math.max(this._bvWorldSpace.bsRadius,l+c*g)}this._bvDirty=!1}};p.prototype._calculateTransformedBoundingVolume=function(a,c,e){var f=a.getBBMin();a=a.getBBMax();var g=b.vec3f64.clone(f),h=b.vec3f64.clone(a);k.vec3.transformMat4(g,g,e);k.vec3.transformMat4(h,h,e);for(var p=0;3>p;++p)c.bbMin[p]=Math.min(c.bbMin[p],g[p],h[p]),c.bbMax[p]=Math.max(c.bbMax[p],g[p],h[p]);for(p=
0;3>p;++p){k.vec3.copy(g,f);k.vec3.copy(h,a);g[p]=a[p];h[p]=f[p];k.vec3.transformMat4(g,g,e);k.vec3.transformMat4(h,h,e);for(var l=0;3>l;++l)c.bbMin[l]=Math.min(c.bbMin[l],g[l],h[l]),c.bbMax[l]=Math.max(c.bbMax[l],g[l],h[l])}};p.prototype._invalidateBoundingVolume=function(){this._bvDirty=!0;this._parentLayer&&this._parentLayer.notifyObjectBBChanged(this,{center:this._bvWorldSpace.center,radius:this._bvWorldSpace.bsRadius})};p.prototype._notifyDirty=function(b,c,e,f){this._parentLayer&&(e=e||a.OBJECT,
this._parentLayer.notifyDirty(b,c,e,f||this))};p._idGen=new f;return p}();var t=function(){function a(){this.bbMin=b.vec3f64.create();this.bbMax=b.vec3f64.create();this.center=b.vec3f64.create();this.bsRadius=0}a.prototype.init=function(){k.vec3.set(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);k.vec3.set(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);k.vec3.set(this.center,0,0,0);this.bsRadius=0};a.prototype.getCenter=function(){return this.center};a.prototype.getBSRadius=
function(){return this.bsRadius};return a}();return r})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define(["require","exports","./IdGen"],function(r,d,n){return function(){function l(k,b,h,g,e,c){this.id=l._idGen.gen(k.id);this.geometry=k;this.material=b;this.transformation=h;this.instanceParameters=g;this.origin=e;this.shaderTransformation=c}l.prototype.getStaticTransformation=function(){return this.transformation};l.prototype.getShaderTransformation=function(){return this.shaderTransformation?
this.shaderTransformation(this.transformation):this.transformation};l._idGen=new n;return l}()})},"esri/views/3d/webgl-engine/lib/IdGen":function(){define(["require","exports"],function(r,d){return function(){function d(){this._count=0}d.prototype.gen=function(l){null==l&&(l="a");return l+"_"+this._count++};return d}()})},"esri/views/3d/webgl-engine/lib/HighlightUtils":function(){define(["require","exports","./IdGen"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});var l=new n;d.generateHighlightId=
function(){return l.gen("highlight")}})},"esri/views/3d/webgl-engine/lib/ModelContentType":function(){define(["require","exports"],function(r,d){return function(){function d(){}d.LAYER="layers";d.OBJECT="objects";d.GEOMETRY="geometries";d.MATERIAL="materials";d.TEXTURE="textures";return d}()})},"esri/views/3d/camera/constraintUtils/tilt":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../state/utils/viewUtils ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a,b,c,f,g){void 0===c&&(c=e.defaultApplyOptions);void 0===f&&(f=b);void 0===g&&(g=!0);b!==f&&f.copyFrom(b);C.eyeCenterDistance=0;C.requiresTwoSteps=!1;var p=v(a,b,c,void 0,C);if(0===p)return!1;k.mat4.identity(w);k.mat4.rotate(w,w,-p,b.viewRight);switch(c.tiltMode){case 1:h.vec3.transformMat4(x,b.viewForward,w);h.vec3.scale(x,x,C.eyeCenterDistance);h.vec3.add(f.center,b.eye,x);break;case 0:h.vec3.subtract(x,b.center,b.eye);h.vec3.transformMat4(x,x,w);
h.vec3.subtract(f.eye,b.center,x);break;default:n.neverReached(c.tiltMode)}h.vec3.transformMat4(f.up,f.up,w);f.markViewDirty();return C.requiresTwoSteps&&g?q(a,f,c,f,!1):!0}function v(b,g,k,d,q){void 0===k&&(k=e.defaultApplyOptions);void 0===d&&(d=e.defaultApplyOptions);if(!b.state.constraints.tilt)return 0;var x=b.state.constraints.tilt(g.distance,z);var w=k;if(0!==w.interactionType){var C=w.interactionStartCamera,F=w.interactionFactor,E=x.min,K=x.max,N=v(b,C,e.defaultApplyOptions,w),L=0===N?0:c.viewAngle(b.renderCoordsHelper,
C.center,C.eye);x.min=E;x.max=K;2===w.interactionType?(e.hasConstraintType(w.selection,2)&&y(b,C,x),e.adjustRangeForInteraction(N,L,!0,F,u,x)):e.adjustRangeForInteraction(N,L,!1,F,u,x)}2===d.interactionType&&e.hasConstraintType(d.selection,2)&&y(b,d.interactionStartCamera,x);if(1===k.tiltMode||1===d.tiltMode){a:{q&&(q.requiresTwoSteps=!1);switch(b.viewingMode){case "global":k=B;w=b.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude;d=w+f.earthRadius;w=b.renderCoordsHelper.intersectManifold(g.ray,
w,m);k.eyeCenterDistance=g.distance;w?(k.eyeCenterDistance=h.vec3.distance(g.eye,m),k.tiltAtCenter=c.viewAngle(b.renderCoordsHelper,m,g.eye)):b.state.isLocal?k.tiltAtCenter=c.viewAngle(b.renderCoordsHelper,g.center,g.eye):(a.sphere.closestPointOnSilhouette(a.sphere.wrap(d),g.ray,m),k.eyeCenterDistance=h.vec3.distance(g.eye,m),k.tiltAtCenter=p.acos(-h.vec3.dot(g.viewForward,h.vec3.normalize(m,m))));k.radius=d;k.eyeRadius=h.vec3.length(g.eye);k.constraints=b.state.constraints;k.centerIsOnSurface=w;
g=l.clamp(k.tiltAtCenter,x.min,x.max);if(1E-9<Math.abs(k.tiltAtCenter-g)){if(k.centerIsOnSurface){g=k.constraints;b=d=k.tiltAtCenter;x=g.clampTilt(k.eyeCenterDistance,d);w=t(k,x);if(g.clampTilt(w,d)!==x)for(d=0;10>d&&1E-9<Math.abs(x-b);)w=(b+x)/2,C=t(k,w),C=g.clampTilt(C,w),1E-9<Math.abs(C-w)?b=w:x=w,d++;g=x;x=g;b=p.asin(k.radius/k.eyeRadius*Math.sin(k.tiltAtCenter));x=p.asin(k.radius/k.eyeRadius*Math.sin(x));b=k.eyeRadius>k.radius?b-x:x-b}else g=k.constraints.clampTilt(k.eyeCenterDistance,k.tiltAtCenter),
q&&g<Math.PI/2&&(q.requiresTwoSteps=!0,g=Math.PI/2-1E-5),b=k.tiltAtCenter-Math.PI/2-(g-Math.PI/2);q&&(q.eyeCenterDistance=t(k,g));q=b}else q=0;break a;case "local":d=c.viewAngle(b.renderCoordsHelper,g.center,g.eye);k=l.clamp(d,x.min,x.max);x=d-k;1E-9<Math.abs(x)?(q&&(d=b.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,b=b.renderCoordsHelper.getAltitude(g.eye)-d,k=Math.cos(k),q.eyeCenterDistance=1E-4<Math.abs(k)?b/k:g.distance),q=x):q=0;break a;default:n.neverReached(b.viewingMode)}q=
void 0}return q}q=c.viewAngle(b.renderCoordsHelper,g.center,g.eye);g=l.clamp(q,x.min,x.max);q-=g;q=1E-9<Math.abs(q)?q:0;return q}function t(a,b){if(!a.centerIsOnSurface)return a.eyeCenterDistance;b=Math.PI-l.clamp(b,0,Math.PI);var c=p.asin(a.radius/a.eyeRadius*Math.sin(b)),e=Math.sin(Math.PI-b-c)/Math.sin(b);return a.eyeRadius<a.radius&&1<e?Math.sin(Math.PI-b-(Math.PI-c))/Math.sin(b)*a.eyeRadius:e*a.eyeRadius}function y(a,b,c){if(!a.state.isLocal){var e=a.state.constraints;if(e.altitude){a=h.vec3.squaredLength(b.center);
var g=Math.sqrt(a);b=b.distance;var k=e.altitude.min+f.earthRadius,e=e.altitude.max+f.earthRadius,k=(k*k-b*b-a)/(-2*g*b);c.min=Math.max(c.min,Math.min(Math.PI-p.acos((e*e-b*b-a)/(-2*g*b)),c.max));c.max=Math.min(c.max,Math.PI-p.acos(k))}}}Object.defineProperty(d,"__esModule",{value:!0});d.apply=q;d.error=v;var x=g.vec3f64.create(),w=b.mat4f64.create(),m=g.vec3f64.create(),u=p.deg2rad(5),z={min:0,max:0},B={constraints:null,radius:0,eyeRadius:0,centerIsOnSurface:!0,eyeCenterDistance:0,tiltAtCenter:0},
C={eyeCenterDistance:0,requiresTwoSteps:!1}})},"esri/views/3d/state/utils/viewUtils":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64","../../support/mathUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.viewAngle=function(g,e,c){g.worldUpAtPosition(e,b);n.vec3.subtract(h,c,e);g=n.vec3.length(h);return 0===g?0:k.acos(n.vec3.dot(h,b)/g)};var b=l.vec3f64.create(),h=l.vec3f64.create()})},"esri/views/animation/easing":function(){define(["require",
"exports"],function(r,d){function n(b){return b}function l(b){var h=2*(b-Math.sqrt((b-1)*b)),g=h/2/b;return function(e){return e<g?b*e*e:h*e-h+1}}function k(b,h){return function(g){return g<h?h*b(g/h):1-b((1-g)/(1-h))*(1-h)}}Object.defineProperty(d,"__esModule",{value:!0});d.linear=n;d.inQuad=function(b){return b*b};d.outQuad=function(b){return 1-d.inQuad(1-b)};d.inOutQuad=function(b){return.5>b?d.inQuad(2*b)/2:(d.outQuad(2*(b-.5))+1)/2};d.inCubic=function(b){return b*b*b};d.outCubic=function(b){return 1-
d.inCubic(1-b)};d.inOutCubic=function(b){return.5>b?d.inCubic(2*b)/2:(d.outCubic(2*(b-.5))+1)/2};d.inQuart=function(b){return b*b*b*b};d.outQuart=function(b){return 1-d.inQuart(1-b)};d.inOutQuart=function(b){return.5>b?d.inQuart(2*b)/2:(d.outQuart(2*(b-.5))+1)/2};d.inQuint=function(b){return b*b*b*b*b};d.outQuint=function(b){return 1-d.inQuint(1-b)};d.inOutQuint=function(b){return.5>b?d.inQuint(2*b)/2:(d.outQuint(2*(b-.5))+1)/2};d.inSine=function(b){return-Math.cos(b*Math.PI/2)+1};d.outSine=function(b){return 1-
d.inSine(1-b)};d.inOutSine=function(b){return.5>b?d.inSine(2*b)/2:(d.outSine(2*(b-.5))+1)/2};d.inExpo=function(b){return Math.pow(2,10*(b-1))};d.outExpo=function(b){return 1-d.inExpo(1-b)};d.inOutExpo=function(b){return.5>b?d.inExpo(2*b)/2:(d.outExpo(2*(b-.5))+1)/2};d.inCirc=function(b){return-(Math.sqrt(1-b*b)-1)};d.outCirc=function(b){return 1-d.inCirc(1-b)};d.inOutCirc=function(b){return.5>b?d.inCirc(2*b)/2:(d.outCirc(2*(b-.5))+1)/2};d.inCoastQuad=k(l(1),1);d.outCoastQuad=k(l(1),0);d.inOutCoastQuad=
k(l(1),.5);d.inCoastCubic=k(l(2),1);d.outCoastCubic=k(l(2),0);d.inOutCoastCubic=k(l(2),.5);d.inCoastQuart=k(l(3),1);d.outCoastQuart=k(l(3),0);d.inOutCoastQuart=k(l(3),.5);d.inCoastQuint=k(l(4),1);d.outCoastQuint=k(l(4),0);d.inOutCoastQuint=k(l(4),.5);d.named={linear:n,"in-quad":d.inQuad,"out-quad":d.outQuad,"in-out-quad":d.inOutQuad,"in-coast-quad":d.inCoastQuad,"out-coast-quad":d.outCoastQuad,"in-out-coast-quad":d.inOutCoastQuad,"in-cubic":d.inCubic,"out-cubic":d.outCubic,"in-out-cubic":d.inOutCubic,
"in-coast-cubic":d.inCoastCubic,"out-coast-cubic":d.outCoastCubic,"in-out-coast-cubic":d.inOutCoastCubic,"in-quart":d.inQuart,"out-quart":d.outQuart,"in-out-quart":d.inOutQuart,"in-coast-quart":d.inCoastQuart,"out-coast-quart":d.outCoastQuart,"in-out-coast-quart":d.inOutCoastQuart,"in-quint":d.inQuint,"out-quint":d.outQuint,"in-out-quint":d.inOutQuint,"in-coast-quint":d.inCoastQuint,"out-coast-quint":d.outCoastQuint,"in-out-coast-quint":d.inOutCoastQuint,"in-sine":d.inSine,"out-sine":d.outSine,"in-out-sine":d.inOutSine,
"in-expo":d.inExpo,"out-expo":d.outExpo,"in-out-expo":d.inOutExpo,"in-circ":d.inCirc,"out-circ":d.outCirc,"in-out-circ":d.inOutCirc}})},"esri/views/3d/state/controllers/PointToPointAnimationController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec3f64 ../../animation/pointToPoint/Animation ./AnimationController ../../webgl-engine/lib/Camera".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(a,
c,e){e=b.call(this,e)||this;e.viewState=a;e.intersectionHelper=c;e.hasTarget=!1;e.animation=new k.default(e.viewState.mode);return e}n(c,b);c.prototype.begin=function(a,b){this.hasTarget=!0;b=this.animationSettings(b);g.copyFrom(this.viewState.camera);this.intersectionHelper.intersectRay(g.ray,e)&&(g.center=e);this.animation.update(g,a,b);this.animation.finished&&this.finish()};c.prototype.finish=function(){this.animation.currentTime=this.animation.time;b.prototype.finish.call(this)};Object.defineProperty(c.prototype,
"steppingFinished",{get:function(){return this.hasTarget&&this.animation.finished},enumerable:!0,configurable:!0});c.prototype.stepController=function(a,c){b.prototype.stepController.call(this,a,c);this.hasTarget&&this.animation.step(a,c)};c.prototype.onControllerEnd=function(a){this.hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,a),this.animation.currentTime=this.animation.time);b.prototype.onControllerEnd.call(this,a)};c.prototype.animationSettings=function(a){void 0===
a&&(a={});return{apex:{maximumDistance:this.viewState.constraints.clampAltitude(Infinity)/6,ascensionFactor:void 0,descensionFactor:void 0},speedFactor:a.speedFactor,duration:a.duration,maxDuration:a.maxDuration,easing:a.easing}};return c}(b.AnimationController);d.PointToPointAnimationController=r;var g=new h,e=l.vec3f64.create()})},"esri/views/3d/animation/pointToPoint/Animation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./Camera ../../webgl-engine/lib/Camera ../../../animation/pointToPoint/Animation".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});var e=k.vec3f64.create();r=function(){function c(c){this.currentTime=0;this.animation=new g.Animation(function(){return new b.default(c)});this._current=new b.default(c)}Object.defineProperty(c.prototype,"finished",{get:function(){return this.currentTime>=this.animation.time},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"time",{get:function(){return this.animation.time},enumerable:!0,configurable:!0});
c.prototype.update=function(b,a,c){var f=this.animation.definition.source,g=this.animation.definition.target,h=l.vec3.subtract(e,a.center,b.center),k=l.vec3.length(h);1E-5<=k?(h[0]/=k,h[1]/=k,h[2]/=k):(h[0]=0,h[1]=1,h[0]=0);l.vec3.copy(f.lookAtDirection,h);l.vec3.copy(g.lookAtDirection,h);f.copyFromRenderCamera(b);g.copyFromRenderCamera(a);this._current.copyFrom(f);this.animation.update(f,g,c);this.currentTime=0;b.almostEquals(a,5E-4,!0)&&(this.currentTime=this.animation.time)};c.prototype.cameraAt=
function(b,a){this.animation.cameraAt(b,this._current);a=a||new h;this._current.copyToRenderCamera(a);return a};c.prototype.step=function(b,a){this.finished||(this.currentTime+=b,this.currentTime>=this.time&&(this.currentTime=this.time));return this.cameraAt(this.currentTime/this.time,a)};return c}();d.Animation=r;d.default=r})},"esri/views/3d/animation/pointToPoint/Camera":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});var g=h.angle,e=h.lerp,c=h.slerp,f=b.vec3f64.create(),a=b.vec3f64.create(),p=b.vec3f64.create(),q=b.vec3f64.create(),v=b.vec3f64.create(),t=b.vec3f64.create(),y=b.vec3f64.fromValues(0,0,1),x=b.vec3f64.fromValues(0,1,0),w=b.vec3f64.fromValues(1,0,0),m=l.mat3f64.create();r=function(){function h(a){void 0===a&&(a="global");this.viewingMode=a;this.center=b.vec3f64.create();this.distance=this.yaw=this.pitch=0;this.lookAtDirection=
b.vec3f64.clone(x)}h.prototype.pixelsPerPanAtZoom=function(a){return this.size/2/(this._zoomToPanScale*a)};h.prototype.zoomAtPixelsPerPan=function(a){return this.size/2/(this._zoomToPanScale*a)};h.prototype.pixelsPerRotateAtZoom=function(a){return this.size/2/Math.max(Math.cos(Math.abs(this.pitch)),.5)};h.prototype.compareTo=function(a,b){b||(b={pan:0,rotate:0,sourceZoom:0,targetZoom:0});if("global"===this.viewingMode){var c=k.vec3.length(this.center),e=k.vec3.length(a.center),c=(c+e)/2;b.pan=g(this.center,
a.center)*c}else b.pan=k.vec3.distance(this.center,a.center);c=Math.abs(a.yaw-this.yaw);c>=Math.PI&&(c=2*Math.PI-c);b.rotate=Math.max(c,Math.abs(a.pitch-this.pitch));b.sourceZoom=this.distance;b.targetZoom=a.distance;return b};h.prototype.interpolate=function(a,b,f){"global"===this.viewingMode?c(a.center,b.center,f.pan,this.center):k.vec3.lerp(this.center,a.center,b.center,f.pan);this.distance=e(a.distance,b.distance,f.zoom);this.pitch=e(a.pitch,b.pitch,f.rotate);a=a.yaw;b=b.yaw;Math.abs(b-a)>=Math.PI&&
(a+=2*(a<b?1:-1)*Math.PI);this.yaw=e(a,b,f.rotate)};h.prototype.copyFrom=function(a){k.vec3.copy(this.center,a.center);this.pitch=a.pitch;this.yaw=a.yaw;this.distance=a.distance;k.vec3.copy(this.lookAtDirection,a.lookAtDirection);this.size=a.size;this.copyFromCommon(a);this.viewingMode=a.viewingMode};h.prototype.copyFromRenderCamera=function(a){var b=this._lookAtOrientation(a.center,m);k.vec3.copy(this.center,a.center);k.vec3.subtract(q,a.center,a.eye);k.vec3.transformMat3(q,q,b);k.vec3.transformMat3(v,
a.up,b);this.distance=k.vec3.length(q);q[0]/=this.distance;q[1]/=this.distance;q[2]/=this.distance;this.pitch=this._eyeUpToPitch(q,v);this.yaw=this._eyeUpToYaw(q,v);this.size=Math.sqrt(a.width*a.width+a.height*a.height);this.copyFromCommon(a)};h.prototype.copyFromCommon=function(a){this.fov=a.fov;this._zoomToPanScale=Math.atan(.5*this.fov)};h.prototype.copyToRenderCamera=function(a){var b=this._lookAtOrientation(this.center,m);n.mat3.transpose(b,b);this._axisAngleVec3(w,this.pitch-Math.PI/2,x,q);
this._axisAngleVec3(y,this.yaw,q);this._axisAngleVec3(w,this.pitch-Math.PI/2,y,v);this._axisAngleVec3(y,this.yaw,v);k.vec3.scale(q,q,this.distance);k.vec3.transformMat3(q,q,b);k.vec3.transformMat3(v,v,b);a.center=this.center;a.eye=k.vec3.subtract(q,this.center,q);a.up=v};h.prototype._axisAngleVec3=function(b,c,e,g){void 0===g&&(g=e);var h=Math.cos(c);c=Math.sin(c);k.vec3.scale(f,e,h);k.vec3.cross(a,b,e);k.vec3.scale(a,a,c);k.vec3.scale(p,b,(1-h)*k.vec3.dot(b,e));return k.vec3.add(g,k.vec3.add(g,f,
a),p)};h.prototype._lookAtOrientation=function(b,c){this._upAtLookAt(b,p);k.vec3.cross(f,this.lookAtDirection,p);k.vec3.normalize(f,f);0===f[0]&&0===f[1]&&0===f[2]&&k.vec3.copy(f,w);k.vec3.cross(a,p,f);k.vec3.normalize(a,a);c||(c=l.mat3f64.create());c[0]=f[0];c[1]=a[0];c[2]=p[0];c[3]=f[1];c[4]=a[1];c[5]=p[1];c[6]=f[2];c[7]=a[2];c[8]=p[2];return c};h.prototype._upAtLookAt=function(a,b){return"local"===this.viewingMode?k.vec3.copy(b,y):k.vec3.normalize(b,a)};h.prototype._eyeUpToPitch=function(a,b){return Math.PI-
g(y,a)};h.prototype._eyeUpToYaw=function(b,c){.5>Math.abs(c[2])?(k.vec3.copy(t,c),0<b[2]&&k.vec3.scale(t,t,-1)):k.vec3.copy(t,b);k.vec3.cross(a,t,y);k.vec3.normalize(a,a);return g(w,a,y)};return h}();d.default=r})},"esri/views/3d/webgl-engine/lib/Camera":function(){define("require exports ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/mathUtils ../../support/geometryUtils/vector ./Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a,b){var c=b[0]-a[0],e=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return c*c+e*e+f*f+a*a}function v(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function t(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}r=function(){function d(a,b,f){void 0===a&&(a=h.vec3f64.create());void 0===b&&(b=h.vec3f64.create());void 0===f&&(f=h.vec3f64.fromValues(0,0,1));this._viewUp=h.vec3f64.create();this._viewForward=h.vec3f64.create();this._viewRight=h.vec3f64.create();
this._ray=c.ray.createWrapper();this._viewport=e.vec4f64.fromValues(0,0,1,1);this._padding=e.vec4f64.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._near=1;this._far=1E3;this._viewDirty=!0;this._viewMatrix=k.mat4f64.create();this._projectionDirty=!0;this._projectionMatrix=k.mat4f64.create();this._viewProjectionDirty=!0;this._viewProjectionMatrix=k.mat4f64.create();this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=k.mat4f64.create();this._frustumDirty=!0;this._frustum=c.frustum.create();
this._fullViewport=null;this.pixelRatio=1;this.relativeElevation=0;this._eye=h.vec3f64.clone(a);this._center=h.vec3f64.clone(b);this._up=h.vec3f64.clone(f);this._padding=e.vec4f64.create()}Object.defineProperty(d.prototype,"eye",{get:function(){return this._eye},set:function(a){this._compareAndSetView(a,this._eye)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"center",{get:function(){return this._center},set:function(a){this._compareAndSetView(a,this._center)},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"ray",{get:function(){this._ray.origin=this.eye;this._ray.direction||(this._ray.direction=h.vec3f64.create());b.vec3.subtract(this._ray.direction,this.center,this.eye);return this._ray},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"up",{get:function(){return this._up},set:function(a){this._compareAndSetView(a,this._up)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewMatrix",{get:function(){this._ensureViewClean();return this._viewMatrix},
set:function(a){l.mat4.copy(this._viewMatrix,a);this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._viewInverseTransposeMatrixDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewForward",{get:function(){this._ensureViewClean();return this._viewForward},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewUp",{get:function(){this._ensureViewClean();return this._viewUp},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"viewRight",{get:function(){this._ensureViewClean();return this._viewRight},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"near",{get:function(){return this._near},set:function(a){this._near!==a&&(this._near=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"far",{get:function(){return this._far},set:function(a){this._far!==a&&(this._far=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=
!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewport",{get:function(){return this._viewport},set:function(a){this.x=a[0];this.y=a[1];this.width=a[2];this.height=a[3]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"x",{get:function(){return this._viewport[0]},set:function(a){a+=this._padding[3];this._viewport[0]!==a&&(this._viewport[0]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"y",{get:function(){return this._viewport[1]},set:function(a){a+=this._padding[2];this._viewport[1]!==a&&(this._viewport[1]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return this._viewport[2]},set:function(a){this._viewport[2]!==a&&(this._viewport[2]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"height",{get:function(){return this._viewport[3]},set:function(a){this._viewport[3]!==a&&(this._viewport[3]=a,this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullWidth",{get:function(){return this._viewport[2]+this._padding[1]+this._padding[3]},set:function(a){this.width=a-(this._padding[1]+this._padding[3])},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullHeight",{get:function(){return this._viewport[3]+
this._padding[0]+this._padding[2]},set:function(a){this.height=a-(this._padding[0]+this._padding[2])},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullViewport",{get:function(){this._fullViewport||(this._fullViewport=e.vec4f64.create());this._fullViewport[0]=this._viewport[0]-this._padding[3];this._fullViewport[1]=this._viewport[1]-this._padding[2];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"aspect",{get:function(){return this.width/this.height},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"padding",{get:function(){return this._padding},set:function(a){if(this._padding[0]!==a[0]||this._padding[1]!==a[1]||this._padding[2]!==a[2]||this._padding[3]!==a[3])this._viewport[0]+=a[3]-this._padding[3],this._viewport[1]+=a[2]-this._padding[2],this._viewport[2]-=a[1]+a[3]-(this._padding[1]+this._padding[3]),this._viewport[3]-=a[0]+a[2]-(this._padding[0]+
this._padding[2]),g.vec4.copy(this._padding,a),this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewProjectionMatrix",{get:function(){this._viewProjectionDirty&&(l.mat4.multiply(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"projectionMatrix",{get:function(){if(this._projectionDirty){var a=
this.width,b=this.height,c=this.near*Math.tan(this.fovY/2),e=c*this.aspect;l.mat4.frustum(this._projectionMatrix,-e*(1+2*this._padding[3]/a),e*(1+2*this._padding[1]/a),-c*(1+2*this._padding[2]/b),c*(1+2*this._padding[0]/b),this.near,this.far);this._projectionDirty=!1}return this._projectionMatrix},set:function(a){l.mat4.copy(this._projectionMatrix,a);this._projectionDirty=!1;this._frustumDirty=this._viewProjectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fov",{get:function(){return this._fov},
set:function(a){this._fov=a;this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fovX",{get:function(){return p.fovd2fovx(this._fov,this.width,this.height)},set:function(a){this._fov=p.fovx2fovd(a,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fovY",{get:function(){return p.fovd2fovy(this._fov,this.width,
this.height)},set:function(a){this._fov=p.fovy2fovd(a,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=this._projectionDirty=!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"distance",{get:function(){return b.vec3.distance(this._center,this._eye)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"frustum",{get:function(){this._recomputeFrustum();return this._frustum},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewInverseTransposeMatrix",
{get:function(){if(this._viewInverseTransposeMatrixDirty||this._viewDirty)this._viewInverseTransposeMatrix||(this._viewInverseTransposeMatrix=k.mat4f64.create()),l.mat4.invert(this._viewInverseTransposeMatrix,this.viewMatrix),l.mat4.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1;return this._viewInverseTransposeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"perRenderPixelRatio",{get:function(){return Math.tan(this.fovX/
2)/(this.width/2)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"perScreenPixelRatio",{get:function(){return this.perRenderPixelRatio*this.pixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"aboveGround",{get:function(){return 0<=this.relativeElevation},enumerable:!0,configurable:!0});d.prototype.copyFrom=function(a){b.vec3.copy(this._eye,a._eye);b.vec3.copy(this._center,a._center);b.vec3.copy(this._up,a._up);g.vec4.copy(this._viewport,a._viewport);
g.vec4.copy(this._padding,a._padding);this._near=a._near;this._far=a._far;this._fov=a._fov;this.relativeElevation=a.relativeElevation;this._viewDirty=a._viewDirty;this._viewDirty||(l.mat4.copy(this._viewMatrix,a._viewMatrix),b.vec3.copy(this._viewRight,a._viewRight),b.vec3.copy(this._viewUp,a._viewUp),b.vec3.copy(this._viewForward,a._viewForward));a._projectionDirty?this._projectionDirty=!0:(l.mat4.copy(this._projectionMatrix,a._projectionMatrix),this._projectionDirty=!1);this._viewProjectionDirty=
!0;this._frustumDirty=a._frustumDirty;this._frustumDirty||(c.frustum.copy(a._frustum,this._frustum),this._frustumDirty=!1);a._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(this._viewInverseTransposeMatrix?l.mat4.copy(this._viewInverseTransposeMatrix,a._viewInverseTransposeMatrix):this._viewInverseTransposeMatrix=k.mat4f64.clone(a._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);a._fullViewport?this._fullViewport?g.vec4.copy(this._fullViewport,a._fullViewport):
this._fullViewport=e.vec4f64.clone(a._fullViewport):this._fullViewport=null;this.pixelRatio=a.pixelRatio;return this};d.prototype.copyViewFrom=function(a){this.eye=a.eye;this.center=a.center;this.up=a.up};d.prototype.clone=function(){var a=new d;a.copyFrom(this);return a};d.prototype.equals=function(a){return v(this._eye,a._eye)&&v(this._center,a._center)&&v(this._up,a._up)&&t(this._viewport,a._viewport)&&t(this._padding,a._padding)&&this._near===a._near&&this._far===a._far&&this._fov===a._fov&&this.pixelRatio===
a.pixelRatio};d.prototype.almostEquals=function(a,c,e){void 0===e&&(e=!1);c=b.vec3.distance(this._eye,this._center)*(c||5E-4);c*=c;e?(f.directionFromTo(w,a._eye,a._center),f.directionFromTo(m,this._eye,this._center),e=1E-10):(b.vec3.copy(w,a._center),b.vec3.copy(m,this._center),e=c);return b.vec3.squaredDistance(a._eye,this._eye)<c&&b.vec3.squaredDistance(w,m)<e&&.001>Math.abs(a._fov-this._fov)&&.5>q(a._padding,this._padding)&&.5>q(a._viewport,this._viewport)&&this.pixelRatio===a.pixelRatio};d.prototype.markViewDirty=
function(){this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0};d.prototype.computeRenderPixelSizeAt=function(a){return this.computeRenderPixelSizeAtDist(this.viewDirectionDistance(a))};d.prototype.computeRenderPixelSizeAtDist=function(a){return a*this.perRenderPixelRatio};d.prototype.computeScreenPixelSizeAt=function(a){return this.computeScreenPixelSizeAtDist(this.viewDirectionDistance(a))};d.prototype.viewDirectionDistance=function(c){return Math.abs(a.projectPointSignedLength(this.viewForward,
b.vec3.subtract(w,c,this._eye)))};d.prototype.computeScreenPixelSizeAtDist=function(a){return a*this.perScreenPixelRatio};d.prototype.computeDistanceFromRadius=function(a,b){return a/Math.tan(Math.min(this.fovX,this.fovY)/(2*(b||1)))};d.prototype.getScreenCenter=function(a){void 0===a&&(a=n.createScreenPointArray());a[0]=(this.padding[3]+this.width/2)/this.pixelRatio;a[1]=(this.padding[0]+this.height/2)/this.pixelRatio;return a};d.prototype.getRenderCenter=function(a){a||(a=n.createRenderScreenPointArray3());
a[0]=this.padding[3]+this.width/2;a[1]=this.padding[2]+this.height/2;2<a.length&&(a[2]=.5);return a};d.prototype.setGLViewport=function(a){var b=this.viewport,c=this.padding;a.setViewport(b[0]-c[3],b[1]-c[2],b[2]+c[1]+c[3],b[3]+c[0]+c[2])};d.prototype.applyProjection=function(a,c,e){void 0===e&&(e=!1);a!==y&&b.vec3.copy(y,a);y[3]=1;e&&(c[2]=-y[2]);g.vec4.transformMat4(y,y,this.projectionMatrix);b.vec3.scale(y,y,1/Math.abs(y[3]));a=this.fullViewport;c[0]=f.lerp(0,a[0]+a[2],.5+.5*y[0]);c[1]=f.lerp(0,
a[1]+a[3],.5+.5*y[1]);e||(c[2]=.5*(y[2]+1));return c};d.prototype.projectPoint=function(a,c){y[0]=a[0];y[1]=a[1];y[2]=a[2];y[3]=1;g.vec4.transformMat4(y,y,this.viewProjectionMatrix);if(0===y[3])return null;b.vec3.scale(y,y,1/Math.abs(y[3]));a=this.fullViewport;"x"in c?(c.x=f.lerp(0,a[0]+a[2],.5+.5*y[0]),c.y=f.lerp(0,a[1]+a[3],.5+.5*y[1])):(c[0]=f.lerp(0,a[0]+a[2],.5+.5*y[0]),c[1]=f.lerp(0,a[1]+a[3],.5+.5*y[1]),2<c.length&&(c[2]=.5*(y[2]+1)));return c};d.prototype.unprojectPoint=function(a,b){l.mat4.multiply(x,
this.projectionMatrix,this.viewMatrix);if(!l.mat4.invert(x,x))return null;var c=this.fullViewport;y[0]=2*(a[0]-c[0])/c[2]-1;y[1]=2*(a[1]-c[1])/c[3]-1;y[2]=2*a[2]-1;y[3]=1;g.vec4.transformMat4(y,y,x);if(0===y[3])return null;b[0]=y[0]/y[3];b[1]=y[1]/y[3];b[2]=y[2]/y[3];return b};d.prototype.computeUp=function(a){"global"===a?this.computeUpGlobal():this.computeUpLocal()};d.prototype.screenToRender=function(a,b){var c=this.fullHeight-a[1]*this.pixelRatio;b[0]=a[0]*this.pixelRatio;b[1]=c;return b};d.prototype.renderToScreen=
function(a,b){var c=(this.fullHeight-a[1])/this.pixelRatio;b[0]=a[0]/this.pixelRatio;b[1]=c;return b};d.prototype.computeUpGlobal=function(){b.vec3.subtract(w,this.center,this.eye);var a=b.vec3.length(this.center);1>a?(b.vec3.set(this.up,0,0,1),this.markViewDirty()):Math.abs(b.vec3.dot(w,this.center))>.9999*b.vec3.length(w)*a||(b.vec3.cross(this.up,w,this.center),b.vec3.cross(this.up,this.up,w),b.vec3.normalize(this.up,this.up),this.markViewDirty())};d.prototype.computeUpLocal=function(){f.directionFromTo(w,
this.eye,this.center);.9999>=Math.abs(w[2])&&(b.vec3.scale(w,w,w[2]),b.vec3.set(this.up,-w[0],-w[1],1-w[2]),b.vec3.normalize(this.up,this.up),this.markViewDirty())};d.prototype._compareAndSetView=function(a,c){v(a,c)||(b.vec3.copy(c,a),this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0)};d.prototype._recomputeFrustum=function(){this._frustumDirty&&(c.frustum.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)};d.prototype._ensureViewClean=function(){this._viewDirty&&
(l.mat4.lookAt(this._viewMatrix,this._eye,this._center,this._up),b.vec3.set(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),b.vec3.set(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),b.vec3.set(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)};return d}();var y=e.vec4f64.create(),x=k.mat4f64.create(),w=h.vec3f64.create(),m=h.vec3f64.create();return r})},
"esri/views/animation/pointToPoint/Animation":function(){define("require exports ../easing ./Definition ./Settings ./apex/Path".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h={zoom:0,pan:0,rotate:0};r=function(){function g(e){this.createCamera=e;this.time=0;this.definition=new l.Definition(e);this.path=new b.Path}g.prototype.update=function(b,c,f){this.definition.update(b,c,f);this.path.update(this.definition,f);this.time=this._applyTimeSettings(this.path.time,
f);this.settings=f};g.prototype.cameraAt=function(b,c){c=c||this.createCamera();b=Math.min(Math.max(0,b),1);b=this.settings.easing?this.normalizedEasing(this.settings.easing,b,1E3*this.time):1<=this.time?this.normalizedEasing(n.inOutCoastQuad,b):this.normalizedEasing(n.outExpo,b);b=this.path.interpolateComponentsAt(b,h);c.interpolate(this.definition.source,this.definition.target,b);return c};g.prototype.normalizedEasing=function(b,c,f){f=b(0);var a=b(1);return(b(c)-f)/(a-f)};g.prototype._applyTimeSettings=
function(b,c){var e=null!=c.speedFactor?c.speedFactor:1;null!=c.duration?b=c.duration:null!=c.speedFactor&&(b/=e);return b=Math.min(Math.max(null!=c.minDuration?c.minDuration:k.defaultSettings.minDuration/e,b),null!=c.maxDuration?c.maxDuration:k.defaultSettings.maxDuration/e)};return g}();d.Animation=r;d.default=r})},"esri/views/animation/pointToPoint/Definition":function(){define(["require","exports","./Settings"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(k){this.createCamera=
k;this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0};this.settings={desiredScreenFlow:n.defaultSettings.desiredScreenFlow};this.source=k();this.target=k()}d.prototype.clone=function(){var k=new d(this.createCamera);k.copyFrom(this);return k};d.prototype.copyFrom=function(k){this.update(k.source,k.target,k.settings)};d.prototype.update=function(k,b,h){this.source!==k&&this.source.copyFrom(k);this.target!==b&&this.target.copyFrom(b);this.compared=this.source.compareTo(this.target,this.compared);
this.settings.desiredScreenFlow=null!=h.desiredScreenFlow?h.desiredScreenFlow:n.defaultSettings.desiredScreenFlow;this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2};d.prototype.halfWindowPanAtZoom=function(k){k=this.target.pixelsPerPanAtZoom(k);return this.halfWindowSize/k};Object.defineProperty(d.prototype,"hasZoom",{get:function(){return 1E-5<Math.abs(this.compared.sourceZoom-this.compared.targetZoom)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"hasPan",{get:function(){return 1E-9<this.compared.pan},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasRotate",{get:function(){return 1E-9<this.compared.rotate},enumerable:!0,configurable:!0});return d}();d.Definition=r;d.default=r})},"esri/views/animation/pointToPoint/Settings":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.defaultSettings={desiredScreenFlow:2,minDuration:.5,maxDuration:8}})},"esri/views/animation/pointToPoint/apex/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../easing ../Path ../Segment ./planning".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(g){function e(c,e){var a=g.call(this)||this;a._preallocSegments=[new b.default,new b.default,new b.default];a.update(c,e);return a}n(e,g);e.prototype.update=function(b,e){if(b){this.definition?this.definition.copyFrom(b):this.definition=b.clone();var a=null;e&&e.apex&&(a=h.optimalDistance(b,e.apex));this.segments.length=0;this._descensionSegment=this._ascensionSegment=null;null==a?this._updateWithoutApex():this._updateWithApex(a,
e.apex)}};e.prototype.segmentInterpolateComponentsAt=function(b,e,a){a=b.interpolateComponentsAt(e,a);b===this._ascensionSegment?a.zoom=l.outQuad(a.zoom):b===this._descensionSegment&&(a.zoom=l.inQuad(a.zoom));return a};e.prototype._updateWithApex=function(b,e){var a=this._preallocSegments,c=a[0],f=a[1],a=a[2],g=null!=e.ascensionFactor?e.ascensionFactor:.5;e=Math.min(1-g,null!=e.ascensionFactor?e.descensionFactor:.5);var h=1-g-e;c.definition?c.definition.copyFrom(this.definition):c.definition=this.definition.clone();
c.definition.compared.targetZoom=b;c.definition.compared.pan=this.definition.compared.pan*g;c.definition.compared.rotate=this.definition.compared.rotate*g;c.update();this._ascensionSegment=c;this.segments.push(c);0<h&&(f.definition?f.definition.copyFrom(this.definition):f.definition=this.definition.clone(),f.definition.copyFrom(this.definition),f.definition.compared.sourceZoom=b,f.definition.compared.targetZoom=b,f.definition.compared.pan=this.definition.compared.pan*h,f.definition.compared.rotate=
this.definition.compared.rotate*h,f.update(),this.segments.push(f));a.definition?a.definition.copyFrom(this.definition):a.definition=this.definition.clone();a.definition.compared.sourceZoom=b;a.definition.compared.pan=this.definition.compared.pan*e;a.definition.compared.rotate=this.definition.compared.rotate*e;a.update();this._descensionSegment=a;this.segments.push(a)};e.prototype._updateWithoutApex=function(){var b=this._preallocSegments[0];b.update(this.definition);this.segments.push(b)};return e}(k.default);
d.Path=r;d.default=r})},"esri/views/animation/pointToPoint/Path":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this.segments=[]}Object.defineProperty(d.prototype,"time",{get:function(){return this.segments.reduce(function(d,k){return d+k.time},0)},enumerable:!0,configurable:!0});d.prototype.interpolateComponentsAt=function(d,k){d=Math.min(Math.max(d,0),1);d*=this.time;for(var b=0,h=0,g=this.definition,e=0;e<this.segments.length;e++){var c=
this.segments[e],f=c.definition;if(d<=c.time||e===this.segments.length-1)return k=this.segmentInterpolateComponentsAt(c,d/c.time,k),k.pan=g.hasPan?(b+f.compared.pan*k.pan)/g.compared.pan:1,k.rotate=g.hasRotate?(h+f.compared.rotate*k.rotate)/g.compared.rotate:1,d=k.zoom*(f.compared.targetZoom-f.compared.sourceZoom)+f.compared.sourceZoom,b=this.segments[0].definition.compared.sourceZoom,h=this.segments[this.segments.length-1].definition.compared.targetZoom,k.zoom=g.hasZoom?(d-b)/(h-b):1,k;d-=c.time;
b+=f.compared.pan;h+=f.compared.rotate}};d.prototype.segmentInterpolateComponentsAt=function(d,k,b){return d.interpolateComponentsAt(k,b)};return d}();d.Path=r;d.default=r})},"esri/views/animation/pointToPoint/Segment":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){d&&this.update(d)}d.prototype.update=function(d){d&&(this.definition?this.definition.copyFrom(d):this.definition=d.clone());this._updatePrecomputedVariables();
this._updatePixelFlow()};d.prototype._updatePrecomputedVariables=function(){var d=this.definition,k=d.compared,b=k.sourceZoom,h=k.targetZoom;this._zoomSign=b>h?1:-1;this._panPixelsAtSource=k.pan*d.source.pixelsPerPanAtZoom(b);d=(d.source.pixelsPerRotateAtZoom(b)+d.target.pixelsPerRotateAtZoom(h))/2;this._rotatePixels=k.rotate*d};d.prototype._updatePixelFlow=function(){var d=this.definition.compared.sourceZoom,k=this.definition.compared.targetZoom,b=this.definition,h=b.hasZoom,g=b.hasPan,b=b.hasRotate,
e=0,c=0;h&&(g&&(e=(k/d-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),b&&(c=Math.log(d/k)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._rotatePixels));this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;d=this.definition.desiredPixelFlow;h&&g&&b?(k=e+c+e*c,this._zoomPixelFlow=e*c/k*d,this._panPixelFlow=c/k*d,this._rotatePixelFlow=e/k*d):h&&g?(k=1+e,this._zoomPixelFlow=e/k*d,this._panPixelFlow=1/k*d):h&&b?(k=1+c,this._zoomPixelFlow=
c/k*d,this._rotatePixelFlow=1/k*d):g&&b?(e=this._panPixelsAtSource/this._rotatePixels,k=1+e,this._panPixelFlow=e/k*d,this._rotatePixelFlow=1/k*d):g?this._panPixelFlow=d:h?this._zoomPixelFlow=d:b&&(this._rotatePixelFlow=d);this.time=b?this.rotateTime:h?this.zoomTime:g?this.panTime:0};Object.defineProperty(d.prototype,"zoomTime",{get:function(){return this.definition.hasZoom?Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/
this._zoomPixelFlow:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"panTime",{get:function(){if(this.definition.hasPan){if(this.definition.hasZoom){var d=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return Math.log(this._zoomPixelFlow/this._panPixelFlow*this._panPixelsAtSource*d+1)/(d*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}return 0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rotateTime",{get:function(){return this.definition.hasRotate?
this._rotatePixels/this._rotatePixelFlow:0},enumerable:!0,configurable:!0});d.prototype._interpolateComponentsZoom=function(d){if(0===d||1===d)return d;if(this.definition.hasZoom){var k=this.definition.compared.sourceZoom,b=this.definition.compared.targetZoom;return(k*Math.pow(k/b,-d)-k)/(b-k)}return d};d.prototype._interpolateComponentsPan=function(d){if(0===d||1===d)return d;if(this.definition.hasPan&&this.definition.hasZoom){var k=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;
return 1/this._panPixelsAtSource*this._panPixelFlow*(Math.pow(2,k*d*this.time)-1)/(k*Math.LN2)}return d};d.prototype._interpolateComponentsRotate=function(d){return d};d.prototype.interpolateComponentsAt=function(d,k){d=Math.min(Math.max(d,0),1);var b=this._interpolateComponentsZoom(d),h=this._interpolateComponentsPan(d);d=this._interpolateComponentsRotate(d);k?(k.zoom=b,k.pan=h,k.rotate=d):k={zoom:b,pan:h,rotate:d};return k};return d}();d.Segment=r;d.default=r})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["require",
"exports","./functions"],function(r,d,n){function l(d,b){var h=Math.max(d.compared.sourceZoom,d.compared.targetZoom);d=d.source.zoomAtPixelsPerPan(d.desiredPixelFlow/d.compared.pan)/2;return d<h?null!=b.maximumDistance?h+(b.maximumDistance-h)/2:1.5*h:b.maximumDistance?Math.min(b.maximumDistance,d):d}Object.defineProperty(d,"__esModule",{value:!0});d.optimalDistance=function(d,b){var h=l(d,b),g={ascensionFactor:null!=b.ascensionFactor?b.ascensionFactor:.5,descensionFactor:null!=b.descensionFactor?
b.descensionFactor:.5},e=0===g.ascensionFactor,c=0===g.descensionFactor,f=e?n.tAscensionZoomOnly:n.tAscensionZoomPan,a=e?n.dtAscensionZoomOnly:n.dtAscensionZoomPan,k=e?n.ddtAscensionZoomOnly:n.ddtAscensionZoomPan,q=c?n.tDescensionZoomOnly:n.tDescensionZoomPan,v=c?n.dtDescensionZoomOnly:n.dtDescensionZoomPan,t=c?n.ddtDescensionZoomOnly:n.ddtDescensionZoomPan,e=function(a){return f(d,g,a)+n.tPanion(d,g,a)+q(d,g,a)},c=function(b){return a(d,g,b)+n.dtPanion(d,g,b)+v(d,g,b)},y=function(a){return k(d,g,
a)+n.ddtPanion(d,g,a)+t(d,g,a)},x=e(h),w=n.tBaseLine(d),m=b.maximumIterations||20,u=null!=b.maximumDistance?b.maximumDistance:Infinity;for(b=0;b<m;b++){var z=(c(h)+1E-6)/y(h);if(isNaN(z)||h>=u&&0>z){if(!isFinite(u))return null;h=u;x=e(h);break}h-=z;if(h<d.compared.sourceZoom||h<d.compared.targetZoom)return null;z=e(h);if(.005>=Math.abs(z-x)/x)break;x=z}return x>.7*w||h<d.compared.sourceZoom||h<d.compared.targetZoom?null:h}})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.tAscensionZoomPan=function(d,l,k){var b=d.halfWindowPanAtZoom(k-d.compared.sourceZoom);return-d.halfWindowSize*(l.ascensionFactor*Math.LN2*d.compared.pan+b)*Math.log(d.compared.sourceZoom/k)/(d.desiredPixelFlow*Math.LN2*b)};d.dtAscensionZoomPan=function(d,l,k){var b=1/k,h=Math.log(d.compared.sourceZoom*b),g=1/d.desiredPixelFlow,e=1/Math.LN2;k-=d.compared.sourceZoom;var c=1/k;l=(l.ascensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(k))/
d.halfWindowPanAtZoom(1);return d.halfWindowSize*b*g*e*c*l-d.halfWindowSize*h*g*e*c+d.halfWindowSize*h*g*e*l/(k*k)};d.ddtAscensionZoomPan=function(d,l,k){var b=k-d.compared.sourceZoom,h=1/b,g=1/k,e=Math.log(d.compared.sourceZoom*g);l=(l.ascensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(b))/d.halfWindowPanAtZoom(1);return d.halfWindowSize*h*(-2*h*g*l+2*h*e+2*g-2*e*l/(b*b)-l/(k*k))/(d.desiredPixelFlow*Math.LN2)};d.tAscensionZoomOnly=function(d,l,k){return-d.halfWindowSize*Math.log(d.compared.sourceZoom/
k)/(d.desiredPixelFlow*Math.LN2)};d.dtAscensionZoomOnly=function(d,l,k){return d.halfWindowSize/(k*d.desiredPixelFlow*Math.LN2)};d.ddtAscensionZoomOnly=function(d,l,k){return-d.halfWindowSize/(k*k*d.desiredPixelFlow*Math.LN2)};d.tPanion=function(d,l,k){return-d.compared.pan*d.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(d.desiredPixelFlow*d.halfWindowPanAtZoom(k))};d.dtPanion=function(d,l,k){return d.compared.pan*d.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(d.desiredPixelFlow*
d.halfWindowPanAtZoom(k*k))};d.ddtPanion=function(d,l,k){return-2*d.compared.pan*d.halfWindowSize*(l.ascensionFactor+l.descensionFactor-1)/(d.desiredPixelFlow*d.halfWindowPanAtZoom(k*k*k))};d.tDescensionZoomPan=function(d,l,k){return d.halfWindowSize*(-d.halfWindowPanAtZoom(k)-l.descensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(d.compared.targetZoom))*Math.log(k/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2*d.halfWindowPanAtZoom(-k+d.compared.targetZoom))};d.dtDescensionZoomPan=
function(d,l,k){var b=Math.log(k/d.compared.targetZoom),h=1/d.desiredPixelFlow,g=1/Math.LN2,e=-k+d.compared.targetZoom,c=1/e;l=(-d.halfWindowPanAtZoom(k)-l.descensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(d.compared.targetZoom))/d.halfWindowPanAtZoom(1);return-d.halfWindowSize*b*h*g*c+d.halfWindowSize*b*h*g*l/(e*e)+d.halfWindowSize*h*g*c*l/k};d.ddtDescensionZoomPan=function(d,l,k){var b=k-d.compared.targetZoom,h=1/b,g=1/k,e=Math.log(k/d.compared.targetZoom);l=(d.halfWindowPanAtZoom(k)+
l.descensionFactor*Math.LN2*d.compared.pan-d.halfWindowPanAtZoom(d.compared.targetZoom))/d.halfWindowPanAtZoom(1);return d.halfWindowSize*h*(-2*h*g*l-2*h*e+2*g+2*e*l/(b*b)-l/(k*k))/(d.desiredPixelFlow*Math.LN2)};d.tDescensionZoomOnly=function(d,l,k){return d.halfWindowSize*Math.log(k/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2)};d.dtDescensionZoomOnly=function(d,l,k){return d.halfWindowSize/(k*d.desiredPixelFlow*Math.LN2)};d.ddtDescensionZoomOnly=function(d,l,k){return-d.halfWindowSize/(k*
k*d.desiredPixelFlow*Math.LN2)};d.tBaseLine=function(d){var l=Math.LN2*d.compared.pan,k=d.halfWindowPanAtZoom(d.compared.sourceZoom-d.compared.targetZoom),b=d.halfWindowSize*Math.log(d.compared.sourceZoom/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2*k);return d.compared.sourceZoom<=d.compared.targetZoom?b*(l-k):b*(l+k)}})},"esri/views/3d/state/controllers/AnimationController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../ViewAnimation ./CameraController".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(h){function g(b){void 0===b&&(b=new k);var c=h.call(this)||this;c.viewAnimation=b;return c}n(g,h);Object.defineProperty(g.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"asyncResult",{get:function(){return this._asyncResult},set:function(e){this._asyncResult&&this._asyncResult.reject(l.createAbortError());this._asyncResult=e;if(this.state===b.State.Finished||
this.state===b.State.Stopped)this._asyncResult=null,this.state===b.State.Finished?e.resolve():e.reject(l.createAbortError())},enumerable:!0,configurable:!0});g.prototype.onControllerStart=function(b){var c=this;h.prototype.onControllerStart.call(this,b);this.viewAnimation&&this.viewAnimation.when().catch(function(){}).then(function(){c.updateStateFromViewAnimation()})};g.prototype.updateStateFromViewAnimation=function(){!this.viewAnimation||this.state!==b.State.Ready&&this.state!==b.State.Running||
(this.viewAnimation.state===k.State.FINISHED?this.finish():this.viewAnimation.state===k.State.STOPPED&&(this.state=b.State.Stopped))};g.prototype.onControllerEnd=function(e){this.viewAnimation&&(this.viewAnimation.done||(this.state===b.State.Finished?this.viewAnimation.finish():this.state===b.State.Stopped&&this.viewAnimation.stop()));this._asyncResult&&(this.state===b.State.Finished?this._asyncResult.resolve():this._asyncResult.reject(l.createAbortError()));h.prototype.onControllerEnd.call(this,
e)};g.prototype.finish=function(){this.finishController()};return g}(b.CameraController);d.AnimationController=r})},"esri/views/3d/state/controllers/CameraController":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h;(function(b){b.Ready="ready";b.Rejected="rejected";
b.Running="running";b.Stopped="stopped";b.Finished="finished"})(h=d.State||(d.State={}));r=function(g){function e(){var b=null!==g&&g.apply(this,arguments)||this;b.state=h.Ready;return b}n(e,g);Object.defineProperty(e.prototype,"active",{get:function(){return this.state===h.Running},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isInteractive",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canStop",{get:function(){return!1},enumerable:!0,
configurable:!0});e.prototype.stopController=function(){return this.canStop?(this.state=h.Stopped,!0):!1};e.prototype.finishController=function(){this.state=h.Finished};e.prototype.onControllerStart=function(b){this.state=h.Running};e.prototype.onControllerEnd=function(b){};e.prototype.stepController=function(b,e){};Object.defineProperty(e.prototype,"steppingFinished",{get:function(){return!1},enumerable:!0,configurable:!0});l([b.property({readOnly:!0,dependsOn:["state"]})],e.prototype,"active",null);
l([b.property()],e.prototype,"state",void 0);return e=l([b.subclass("esri.views.3d.state.controllers.CameraController")],e)}(b.declared(k));d.CameraController=r})},"esri/views/3d/state/utils/navigationUtils":function(){define("require exports ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/stack ../../support/geometryUtils/coordinateSystem ../../webgl-engine/lib/Camera".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){function y(a,b,c){var f=q.sm4d.get();k.mat4.identity(f);k.mat4.rotate(f,f,c[3],c);e.vec3.subtract(a.eye,a.eye,b);e.vec3.transformMat4(a.eye,a.eye,f);e.vec3.add(a.eye,a.eye,b);e.vec3.subtract(a.center,a.center,b);e.vec3.transformMat4(a.center,a.center,f);e.vec3.add(a.center,a.center,b);e.vec3.transformMat4(a.up,a.up,f);a.markViewDirty()}function x(a,b){e.vec3.set(b,0,0,0);for(var c=0;c<a.length;c++)e.vec3.add(b,b,a[c]);e.vec3.scale(b,b,1/a.length)}function w(a,
b,c){return Math.sin(a/e.vec3.length(b))*(c+f.earthRadius)}function m(b,c,f,g){f=a.ray.fromScreenAtEye(c,f,Ca);a.sphere.closestPointOnSilhouette(b,f,P);return a.sphere.intersectRay(b,f,g)?e.vec3.squaredDistance(P,f.origin)<e.vec3.squaredDistance(g,f.origin)?(e.vec3.copy(g,P),!1):!0:(e.vec3.subtract(V,c.eye,c.center),e.vec3.normalize(V,V),a.plane.fromNormalAndOffset(V,-e.vec3.dot(e.vec3.normalize(V,V),P),T),a.plane.intersectRay(T,f,g),!1)}function u(a,b,c,f,g,h){e.vec3.cross(Aa,a,b);e.vec3.subtract(ia,
a,b);e.vec3.length(a)<=g||!f.aboveGround?(e.vec3.cross(c,ia,f.eye),a=e.vec3.dot(a,b)/(e.vec3.length(a)*e.vec3.length(b)),h=Math.cos(n.clamp(p.cyclicalPI.normalize(p.deg2rad(h)),0,d.TiltThresholdPanningSpeed)),b=-p.acos(a)-Math.max(0,e.vec3.length(b)-g)/(h*g)):(e.vec3.subtract(Z,f.eye,f.center),e.vec3.cross(c,ia,Z),b=-e.vec3.length(ia)/g);e.vec3.normalize(c,c);e.vec3.scale(c,c,e.vec3.length(Aa));return b}function z(a,b,c,e){e=Math.cos(n.clamp(p.cyclicalPI.normalize(p.deg2rad(e)),0,d.TiltThresholdPanningSpeed));
b=b>c?-(b-c)/(e*c):b<-c?Math.PI-(b+c)/(e*c):p.acos(b/c);return((a>c?-(a-c)/(e*c):a<-c?Math.PI-(a+c)/(e*c):p.acos(a/c))-b)*c}function B(a,b,c,f,g,d,k,p,l,m){l=z(a[2],b[2],k.radius,l);b=m?z(a[0],b[0],k.radius,180):b[0]-a[0];a=Math.sin(p)*b-Math.cos(p)*l;p=Math.cos(p)*b+Math.sin(p)*l;e.vec3.normalize(ga,g);g=m?a/Math.sqrt(Math.abs(Math.pow(k.radius,2)-Math.pow(e.vec3.dot(c,ga),2))):a/k.radius;c=p/Math.sqrt(Math.abs(Math.pow(k.radius,2)-Math.pow(e.vec3.dot(c,f),2)));h.vec2.set(d,g,c)}function C(a,b,c,
f,g,h,d,k,p,l){e.vec3.cross(Aa,a,b);v.coordinateSystemFromOneAxisAndNormalVector(h.up,h.eye,U,X,ca);v.coordinateSystemFromOneAxisAndNormalVector([0,0,1],h.eye,Q,J,R);e.vec3.copy(c,J);e.vec3.copy(f,Q);e.vec3.normalize(c,c);e.vec3.scale(c,c,e.vec3.length(Aa));v.vectorCoordinates(a,e.vec3.normalize(X,X),e.vec3.normalize(ca,ca),e.vec3.normalize(U,U),G);v.vectorCoordinates(b,X,ca,U,Y);B(G,Y,a,Q,J,g,d,k,p,l)}function F(a,b,c,f,g,h,d){k.mat4.identity(na);k.mat4.identity(pa);k.mat4.identity(ta);k.mat4.rotate(na,
na,g,f);k.mat4.rotate(pa,pa,d,h);k.mat4.multiply(ta,na,pa);e.vec3.subtract(b,a,c);e.vec3.transformMat4(b,b,ta);e.vec3.add(b,b,c)}function E(a,b,c,f,g,h){k.mat4.identity(na);k.mat4.identity(pa);k.mat4.identity(ta);k.mat4.rotate(na,na,f,c);k.mat4.rotate(pa,pa,h,g);k.mat4.multiply(ta,na,pa);e.vec3.subtract(a.eye,a.eye,b);e.vec3.transformMat4(a.eye,a.eye,ta);e.vec3.add(a.eye,a.eye,b);e.vec3.subtract(a.center,a.center,b);e.vec3.transformMat4(a.center,a.center,ta);e.vec3.add(a.center,a.center,b);e.vec3.subtract(a.up,
a.up,b);e.vec3.transformMat4(a.up,a.up,ta);e.vec3.add(a.up,a.up,b);a.markViewDirty()}function N(a,b,c,e,f,g,h,k){void 0===h&&(h=d.PreservingHeadingThreshold.Pole);void 0===k&&(k=d.PreservingHeadingThreshold.Angle);a=Math.abs(a[2])<c*h||Math.abs(b)>c;return(Math.abs(e)>Math.PI-k||Math.abs(e)<k)&&a&&g.aboveGround&&f<d.PreservingHeadingThreshold.Tilt?!0:!1}function L(b,c,e,f,g,h){h?(a.axisAngle.fromPoints(e,f,ja),y(c,b.center,ja)):(e=u(e,f,Ba,c,b.radius,g),y(c,b.center,a.axisAngle.wrapAxisAngle(Ba,e)))}
function K(a,b,c,f,g,h,d){var k=d?20:1;e.vec3.copy(aa,f);sa.copyFrom(b);for(var p,l=0;l<k&&1E-12<e.vec3.squaredDistance(c,aa);l++)if(f=e.vec3.squaredDistance(c,aa),C(c,aa,J,Q,la,sa,a,g,h,d),E(sa,a.center,Q,la[1],J,la[0]),F(aa,aa,a.center,Q,la[1],J,la[0]),p=e.vec3.squaredDistance(c,aa),p<f||0===l)b.copyFrom(sa);else break}Object.defineProperty(d,"__esModule",{value:!0});d.Earth=a.sphere.fromValues(f.earthRadius,c.vec3f64.create());d.normalizeCoordinate=function(a,b,c){c[0]=b[0]/(a.fullWidth/a.pixelRatio);
c[1]=b[1]/(a.fullHeight/a.pixelRatio);return c};d.rotationFromPointsAroundAxis=function(a,b,c){var f=q.sv3d.get(),g=q.sv3d.get(),h=q.sv3d.get();e.vec3.copy(g,a);e.vec3.copy(h,b);a=e.vec3.dot(g,c);b=e.vec3.dot(h,c);e.vec3.scale(f,c,a);e.vec3.subtract(g,g,f);e.vec3.normalize(g,g);e.vec3.scale(f,c,b);e.vec3.subtract(h,h,f);e.vec3.normalize(h,h);a=e.vec3.dot(g,h);e.vec3.cross(f,c,g);c=e.vec3.dot(h,f);return Math.atan2(c,a)};d.normalizeRotationDelta=function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<-Math.PI;)a+=
2*Math.PI;return a};d.applyRotation=y;d.intersectPlaneFromScreenPoint=function(b,c,e,f){return a.plane.intersectRay(b,a.ray.fromScreen(c,e,Ca),f)};d.applyZoomToPoint=function(a,b,c,f){var g=q.sv3d.get();c=1-c;e.vec3.subtract(g,b,a.eye);var h=e.vec3.length(g),d=h*(1-c);0<=c&&d<f&&(d=f,c=-(d-h)/h);1E-6>Math.abs(h-d)||(e.vec3.scale(g,g,c),e.vec3.add(a.eye,a.eye,g),e.vec3.lerp(a.center,a.center,b,c))};d.applyZoomOnSphere=function(b,c,f){c.getScreenCenter(O);a.sphere.intersectScreen(b,c,O,c.center);c.markViewDirty();
b=c.distance;f*=b;1E-6>Math.abs(b-f)||(f=e.vec3.scale(q.sv3d.get(),c.viewForward,f),e.vec3.subtract(c.eye,c.center,f),c.markViewDirty())};var O=l.createScreenPointArray();d.centroidOnSphere=function(a,b,c){x(b,c);e.vec3.normalize(c,c);e.vec3.scale(c,c,a)};d.centroid=x;d.onSurfaceTiltToEyeTiltGlobal=w;d.offSurfaceTiltToEyeTiltGlobal=function(a,b,c){return w(Math.PI/2,b,c)+(a-Math.PI/2)};var I;(function(a){a[a.Vertical=0]="Vertical";a[a.Horizontal=1]="Horizontal"})(I=d.PanMode||(d.PanMode={}));d.VerticalPanTresholds=
{Elevation:3E4,Angle:p.deg2rad(8)};d.PreservingHeadingThreshold={Pole:.95,Angle:p.deg2rad(18),Tilt:45};d.TiltThresholdPanningSpeed=p.deg2rad(80);d.pickPointAndInitSphere=function(b,f,g,h){var k=c.vec3f64.create(),p=a.sphere.create(),l=!0;b.intersectScreen(g,k)?p.radius=e.vec3.length(k):(p.radius=f.aboveGround?Math.max(e.vec3.length(f.center),.9*d.Earth.radius):e.vec3.length(f.eye)-f.relativeElevation,h?m(p,f,g,k):l=a.sphere.intersectScreen(p,f,g,k));return{sphere:p,scenePickPoint:l?k:null}};d.decidePanMode=
function(a,b,c){var f=e.vec3.length(a.eye);if(Math.abs(f-d.Earth.radius)>d.VerticalPanTresholds.Elevation)return I.Horizontal;if(a.aboveGround===b.radius>f)return I.Vertical;e.vec3.subtract(H,a.eye,c);e.vec3.normalize(H,H);return Math.abs(.5*Math.PI-p.acos(e.vec3.dot(c,H)/e.vec3.length(c)))<d.VerticalPanTresholds.Angle?I.Vertical:I.Horizontal};var H=c.vec3f64.create();d.applyPanPlanar=function(a,b,c){e.vec3.subtract(S,c,b);e.vec3.subtract(a.eye,a.eye,S);e.vec3.subtract(a.center,a.center,S);a.markViewDirty()};
var S=c.vec3f64.create();d.sphereOrPlanePointFromScreenPoint=m;var P=c.vec3f64.create(),V=c.vec3f64.create(),T=a.plane.create();d.rotationAngleAndAxisDirectRotation=u;var Z=c.vec3f64.create();d.lengthFromPoints=z;d.rotationAnglesHeadingPreserving=B;d.rotationAnglesAndAxesHeadingPreserving=C;d.rotatePointAroundTwoAxes=F;d.applyRotationWithTwoAxes=E;d.preserveHeadingThreshold=N;d.applyPanSphericalDirectRotation=L;d.applyPanSphericalPreserveHeading=K;d.panToPosition=function(a,b,c,f,g,h,k){N(c,e.vec3.dot(b.up,
c),a.radius,-p.cyclicalPI.normalize(p.deg2rad(g)),h,b,d.PreservingHeadingThreshold.Pole,d.PreservingHeadingThreshold.Angle)?K(a,b,c,f,-p.cyclicalPI.normalize(p.deg2rad(g)),h,k):L(a,b,c,f,h,k)};d.panMotionToRotationMatrix=function(a,b,c,f,g,h,d,l,m){if(N(a.center,e.vec3.dot(a.up,a.center),e.vec3.length(a.center),-p.cyclicalPI.normalize(p.deg2rad(h)),d,b))switch(a=-p.cyclicalPI.normalize(p.deg2rad(g)),v.coordinateSystemFromOneAxisAndNormalVector([0,0,1],b.eye,Q,J,R),g=c.translation[0]*f.pan,h=c.translation[1]*
f.pan,b=Math.max(Math.sqrt(Math.abs(1-Math.pow(e.vec3.dot(b.center,Q),2)/Math.pow(e.vec3.length(b.center),2))),.5),d=-Math.cos(a)*h+Math.sin(a)*g,k.mat4.rotate(l.pan.matrix,l.pan.matrix,(Math.sin(a)*h+Math.cos(a)*g)/b,Q),l.pan.enabled=!0,m.mode){case "pan":k.mat4.rotate(l.pan.matrix,l.pan.matrix,d,J);l.pan.enabled=!0;break;case "zoom":l.zoom=-c.translation[1]*f.zoom}else switch(a=b.eye,b=b.viewRight,a=e.vec3.cross(q.sv3d.get(),b,a),g=c.translation[0]*f.pan,0!==g&&(k.mat4.rotate(l.pan.matrix,l.pan.matrix,
-g,a),l.pan.enabled=!0),m.mode){case "pan":c=c.translation[1]*f.pan;0!==c&&(k.mat4.rotate(l.pan.matrix,l.pan.matrix,c,b),l.pan.enabled=!0);break;case "zoom":l.zoom=-c.translation[1]*f.zoom}};var Q=c.vec3f64.create(),J=c.vec3f64.create(),R=c.vec3f64.create(),U=c.vec3f64.create(),X=c.vec3f64.create(),ca=c.vec3f64.create(),G=c.vec3f64.create(),Y=c.vec3f64.create(),la=g.vec2f64.create(),ja=a.axisAngle.create(),na=b.mat4f64.create(),pa=b.mat4f64.create(),ta=b.mat4f64.create(),aa=c.vec3f64.create(),ga=
c.vec3f64.create(),ia=c.vec3f64.create(),sa=new t,Aa=c.vec3f64.create(),Ba=c.vec3f64.create(),Ca={origin:c.vec3f64.create(),direction:c.vec3f64.create()}})},"esri/views/3d/support/geometryUtils/coordinateSystem":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat4","../../../../core/libs/gl-matrix-2/vec3","../../../../core/libs/gl-matrix-2/vec3f64"],function(r,d,n,l,k){function b(b){return{operations:b,value:b.create()}}function h(b,a,c,e){return b.operations.setAltitudeAt(b.value,
a,c,e)}Object.defineProperty(d,"__esModule",{value:!0});d.create=function(b){var a=b.operations;return{operations:a,value:a.create(b.value)}};d.setExtent=function(b,a,c){b.operations.setExtent(b.value,a,c.value);return c};d.createFromOperations=b;d.fromValues=function(c,a,e){void 0===e&&(e=b(c));e.operations=c;c.copy(a,e.value);return e};d.wrap=function(b,a){e.operations=b;e.value=a;return e};d.normalAt=function(b,a,c){return b.operations.axisAt(b.value,a,2,c)};d.axisAt=function(b,a,c,e){return b.operations.axisAt(b.value,
a,c,e)};d.intersectRay=function(b,a,c){return b.operations.intersectRay(b.value,a,c)};d.intersectsRay=function(b,a){return b.operations.intersectRay(b.value,a,null)};d.closestPoint=function(b,a,c){return b.operations.closestPoint(b.value,a,c)};d.intersectRayClosestSilhouette=function(b,a,c){return b.operations.intersectRayClosestSilhouette(b.value,a,c)};d.closestPointOnSilhouette=function(b,a,c){return b.operations.closestPointOnSilhouette(b.value,a,c)};d.distanceToSilhouette=function(b,a){return b.operations.distanceToSilhouette(b.value,
a)};d.altitudeAt=function(b,a){return b.operations.altitudeAt(b.value,a)};d.setAltitudeAt=h;d.setAltitudeOfTransformation=function(b,a,c,e){a!==e&&n.mat4.copy(e,a);l.vec3.set(g,e[12],e[13],e[14]);h(b,g,c,g);e[12]=g[0];e[13]=g[1];e[14]=g[2];return e};d.elevate=function(b,a,c){return b.operations.elevate(b.value,a,c.value)};var g=k.vec3f64.create(),e={operations:null,value:null};d.vectorCoordinates=function(b,a,c,e,g){g[0]=l.vec3.dot(b,a);g[1]=l.vec3.dot(b,c);g[2]=l.vec3.dot(b,e);return g};d.coordinateSystemFromOneAxisAndNormalVector=
function(b,a,e,g,h){l.vec3.copy(e,b);l.vec3.copy(c,a);l.vec3.normalize(c,c);l.vec3.cross(g,c,e);l.vec3.cross(h,g,e)};var c=k.vec3f64.create()})},"esri/views/3d/state/controllers/local/ZoomStepController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../PointToPointAnimationController ../../../webgl-engine/lib/Camera ../../../../animation/easing".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function f(a,b){var e=c.call(this,a.state,a.sceneIntersectionHelper,"interaction"===b?null:void 0)||this;e.view=a;e.mode=b;e.zoomLocation=k.vec3f64.create();e.tmpCamera=new g;e.tmpRayDir=k.vec3f64.create();e.tmpCenter=k.vec3f64.create();e.constraintOptions={selection:15,interactionType:1,interactionFactor:null,interactionStartCamera:new g,interactionDirection:null,tiltMode:0};return e}n(f,c);Object.defineProperty(f.prototype,
"isInteractive",{get:function(){return"interaction"===this.mode},enumerable:!0,configurable:!0});f.prototype.zoomStep=function(a,b){if(this.active){var c=this.view.state,e=this.constraintOptions.interactionStartCamera;this.animation.finished?e.copyFrom(c.camera):this.animation.cameraAt(1,e);this.tmpCamera.copyFrom(c.camera);0<a?(this.intersectionHelper.intersectScreenFreePointFallback(b,this.zoomLocation),this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.tmpCenter)&&(this.tmpCamera.center=
this.tmpCenter)):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:l.vec3.copy(this.zoomLocation,this.tmpCamera.center);this.updateCamera(this.tmpCamera,Math.pow(.6,a),this.zoomLocation,b);this.begin(this.tmpCamera)}};f.prototype.animationSettings=function(){return{apex:null,duration:.6,easing:e.outExpo}};f.prototype.updateCamera=function(a,c,e,f){l.vec3.subtract(this.tmpRayDir,e,a.eye);f=l.vec3.length(this.tmpRayDir);var g=f*c;1>=c&&
4>g&&(g=4,c=g/f);1E-6>Math.abs(f-g)||(l.vec3.scale(this.tmpRayDir,this.tmpRayDir,c),l.vec3.subtract(a.eye,e,this.tmpRayDir),l.vec3.lerp(a.center,a.center,e,1-c),b.applyAll(this.view,a,this.constraintOptions))};return f}(h.PointToPointAnimationController);d.ZoomStepController=r})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=function(d,l){switch(l){case "primary":return"touch"===
d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=function(d,l){if("touch"===d.pointerType)return!1;switch(l){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/3d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/RotateController ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function e(c,e,a,g){var f=b.call(this,!0)||this;f.view=c;f.pointerAction=e;f.pivotPoint=a;f.registerIncoming("drag",g,function(a){return f.handleDrag(a)});return f}n(e,b);e.prototype.handleDrag=function(b){var c=b.data;if(!(1<c.pointers.size)&&h.eventMatchesMousePointerAction(b.data,this.pointerAction)){var a=l.createScreenPointArray(c.center.x,c.center.y);switch(c.action){case "start":this.cameraController&&(this.cameraController.end(),
this.cameraController=null);this.cameraController=new k.RotateController(this.view,this.view.sceneIntersectionHelper,this.pivotPoint);this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(a);break;case "update":this.cameraController&&this.cameraController.update(a);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}b.stopPropagation()}};return e}(b.InputHandler);d.DragRotate=r})},"esri/views/3d/state/controllers/RotateController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../camera/constraintUtils ../Constraints ./InteractiveController ../utils/navigationUtils ../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function p(a,e,f){var h=d.call(this)||this;h.view=a;h.intersectionHelper=e;h.pivot=f;h.lastPoint=g.vec2f64.create();h.tmpWorldUp=c.vec3f64.create();h.tmpViewDir=c.vec3f64.create();h.tmpRotCurPoint=g.vec2f64.create();h.tmpTransf=b.mat4f64.create();h.tmpAxis=c.vec3f64.create();h.pivotPos=c.vec3f64.create();h.constraintOptions={selection:15,interactionType:2,interactionFactor:0,interactionStartCamera:null,
interactionDirection:null,tiltMode:0};h.rotScale="center"===f?3:1.5;return h}n(p,d);p.prototype.begin=function(a){if(this.active){switch(this.pivot){case "eye":e.vec3.copy(this.pivotPos,this.beginCamera.eye);this.constraintOptions.interactionType=3;this.constraintOptions.tiltMode=1;this.constraintOptions.selection=0;break;case "center":this.intersectionHelper.intersectRayFreePointFallback(this.beginCamera.ray,this.pivotPos)||e.vec3.copy(this.pivotPos,this.beginCamera.center),this.beginCamera.center=
this.pivotPos,this.constraintOptions.interactionType=2,this.constraintOptions.tiltMode=0,this.constraintOptions.selection=11}this.constraintOptions.interactionStartCamera=this.beginCamera;q.normalizeCoordinate(this.beginCamera,a,this.lastPoint)}};p.prototype.update=function(a){if(this.active){var b;switch(this.pivot){case "eye":b=this.currentCamera.center;break;case "center":this.currentCamera.center=this.pivotPos,b=this.currentCamera.eye}this.applyRotation(this.currentCamera,a,b,this.pivotPos);f.applyAll(this.view,
this.currentCamera,this.constraintOptions)}};p.prototype.end=function(){this.active&&this.finishController()};p.prototype.applyRotation=function(b,c,f,g){this.view.renderCoordsHelper.worldUpAtPosition(g,this.tmpWorldUp);q.normalizeCoordinate(b,c,this.tmpRotCurPoint);c=(this.lastPoint[1]-this.tmpRotCurPoint[1])*this.rotScale;var d=(this.tmpRotCurPoint[0]-this.lastPoint[0])*this.rotScale;e.vec3.subtract(this.tmpViewDir,f,g);var p=e.vec3.length(this.tmpViewDir),p=v.acos(e.vec3.dot(this.tmpViewDir,this.tmpWorldUp)/
p);if("eye"===this.pivot){var m=.5*Math.PI-p,u=.495*Math.PI;c=m-Math.max(-u,Math.min(u,m+-.5*c))}c=l.clamp(c+p,a.TiltDefault.min,a.TiltDefault.max)-p;k.mat4.identity(this.tmpTransf);e.vec3.cross(this.tmpAxis,b.up,this.tmpViewDir);"center"===this.pivot&&(d=-d);k.mat4.rotate(this.tmpTransf,this.tmpTransf,d,this.tmpWorldUp);k.mat4.rotate(this.tmpTransf,this.tmpTransf,c,this.tmpAxis);e.vec3.transformMat4(this.tmpViewDir,this.tmpViewDir,this.tmpTransf);e.vec3.add(f,g,this.tmpViewDir);e.vec3.transformMat4(b.up,
b.up,this.tmpTransf);h.vec2.copy(this.lastPoint,this.tmpRotCurPoint);b.markViewDirty()};return p}(p.InteractiveController);d.RotateController=r})},"esri/views/3d/state/controllers/InteractiveController":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./CameraController","../../webgl-engine/lib/Camera"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function h(){var g=null!==b&&b.apply(this,arguments)||this;g.beginCamera=new k;
g.currentCamera=new k;return g}n(h,b);Object.defineProperty(h.prototype,"isInteractive",{get:function(){return!0},enumerable:!0,configurable:!0});h.prototype.stepController=function(g,e){b.prototype.stepController.call(this,g,e);e.copyViewFrom(this.currentCamera);this.currentCamera.copyFrom(e)};h.prototype.onControllerStart=function(g){b.prototype.onControllerStart.call(this,g);this.beginCamera.copyFrom(g);this.currentCamera.copyFrom(g)};h.prototype.onControllerEnd=function(g){g.copyViewFrom(this.currentCamera);
b.prototype.onControllerEnd.call(this,g)};return h}(l.CameraController);d.InteractiveController=r})},"esri/views/3d/input/handlers/DragZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomController ../../state/controllers/local/ZoomController ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(e){function c(b,
a,c){var f=e.call(this,!0)||this;f.view=b;f.pointerAction=a;f.registerIncoming("drag",c,function(a){return f.handleDrag(a)});return f}n(c,e);c.prototype.handleDrag=function(c){var a=c.data;if(!(1<a.pointers.size)&&g.eventMatchesMousePointerAction(c.data,this.pointerAction)){var e=l.createScreenPointArray(a.center.x,a.center.y);switch(a.action){case "start":this.cameraController&&(this.cameraController.end(),this.cameraController=null);this.cameraController=this.view.state.isGlobal?new k.ZoomController(this.view,
this.view.sceneIntersectionHelper):new b.ZoomController(this.view,this.view.sceneIntersectionHelper);this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(e);break;case "update":this.cameraController&&this.cameraController.update(e);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}c.stopPropagation()}};return c}(h.InputHandler);d.DragZoom=r})},"esri/views/3d/state/controllers/global/ZoomController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../InteractiveController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function d(e,f){var h=c.call(this)||this;h.view=e;h.intersectionHelper=f;h.pickPoint=g.vec3f64.create();h.tmpP0=b.vec2f64.create();h.panAxisAngle=a.axisAngle.create();h.tmpRayDir=g.vec3f64.create();h.targetOnSphere=g.vec3f64.create();h.dragBeginPoint=l.createScreenPointArray();h.normalizedAnchorPoint=b.vec2f64.create();h.constraintOptions={selection:7,interactionType:1,interactionFactor:0,interactionStartCamera:null,
interactionDirection:null,tiltMode:0};h.sphere=a.sphere.create();h.hasPickPoint=!1;return h}n(d,c);d.prototype.begin=function(a){this.active&&(k.vec2.copy(this.dragBeginPoint,a),f.normalizeCoordinate(this.beginCamera,a,this.normalizedAnchorPoint),a=f.pickPointAndInitSphere(this.intersectionHelper,this.beginCamera,a,!1),this.hasPickPoint=!!a.scenePickPoint,this.pickPoint=a.scenePickPoint,this.sphere=a.sphere,this.constraintOptions.interactionStartCamera=this.beginCamera)};d.prototype.update=function(b){if(this.active){this.currentCamera.eye=
this.beginCamera.eye;this.currentCamera.center=this.beginCamera.center;this.currentCamera.up=this.beginCamera.up;h.vec3.subtract(this.tmpRayDir,this.currentCamera.center,this.currentCamera.eye);var c=h.vec3.length(this.tmpRayDir);f.normalizeCoordinate(this.currentCamera,b,this.tmpP0);var g=12*(this.normalizedAnchorPoint[1]-this.tmpP0[1]),d=c*Math.pow(2,g),k=this.view.state.constraints.minimumPoiDistance;0>g&&d<k&&(d=k);1E-6>Math.abs(c-d)||(this.hasPickPoint&&d<c&&(g=1-(1-d/c)*(1-this.sphere.radius/
h.vec3.length(this.currentCamera.center)),h.vec3.scale(this.currentCamera.center,this.currentCamera.center,g)),h.vec3.scale(this.tmpRayDir,this.tmpRayDir,-d/c),h.vec3.add(this.currentCamera.eye,this.currentCamera.center,this.tmpRayDir),this.constraintOptions.interactionFactor=e.pixelDistanceToInteractionFactor(this.dragBeginPoint,b),e.applyAll(this.view,this.currentCamera,this.constraintOptions),this.hasPickPoint&&(f.sphereOrPlanePointFromScreenPoint(this.sphere,this.currentCamera,this.dragBeginPoint,
this.targetOnSphere),a.axisAngle.fromPoints(this.pickPoint,this.targetOnSphere,this.panAxisAngle),f.applyRotation(this.currentCamera,this.sphere.center,this.panAxisAngle)),e.applySurfaceCollision(this.view,this.currentCamera))}};d.prototype.end=function(){this.active&&this.finishController()};return d}(c.InteractiveController);d.ZoomController=r})},"esri/views/3d/state/controllers/local/ZoomController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../InteractiveController ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function d(e,f){var h=c.call(this)||this;h.view=e;h.intersectionHelper=f;h.tmpP=g.vec3f64.create();h.tmpN=g.vec3f64.create();h.tmpP0=b.vec2f64.create();h.tmpPoi=g.vec3f64.create();h.tmpRayDir=g.vec3f64.create();h.dragBeginPoint=l.createScreenPointArray();h.normalizedAnchorPoint=b.vec2f64.create();h.constraintOptions={selection:15,interactionType:1,interactionFactor:0,interactionStartCamera:null,interactionDirection:g.vec3f64.create(),
tiltMode:0};h.plane=a.plane.create();return h}n(d,c);d.prototype.begin=function(b){this.active&&(k.vec2.copy(this.dragBeginPoint,b),f.normalizeCoordinate(this.beginCamera,b,this.normalizedAnchorPoint),this.intersectionHelper.intersectScreenFreePointFallback(b,this.tmpP),h.vec3.subtract(this.tmpN,this.beginCamera.eye,this.beginCamera.center),h.vec3.normalize(this.tmpN,this.tmpN),0>this.tmpN[1]&&h.vec3.negate(this.tmpN,this.tmpN),a.plane.fromPositionAndNormal(this.tmpP,this.tmpN,this.plane),this.constraintOptions.interactionStartCamera=
this.beginCamera)};d.prototype.update=function(a){if(this.active){f.intersectPlaneFromScreenPoint(this.plane,this.currentCamera,this.dragBeginPoint,this.tmpPoi)||h.vec3.copy(this.tmpPoi,this.currentCamera.center);f.normalizeCoordinate(this.currentCamera,a,this.tmpP0);var b=4*(this.tmpP0[1]-this.normalizedAnchorPoint[1]);k.vec2.copy(this.normalizedAnchorPoint,this.tmpP0);h.vec3.subtract(this.tmpRayDir,this.tmpPoi,this.currentCamera.eye);var c=h.vec3.length(this.tmpRayDir),g=c*(1-b);h.vec3.copy(this.constraintOptions.interactionDirection,
this.tmpRayDir);h.vec3.scale(this.constraintOptions.interactionDirection,this.constraintOptions.interactionDirection,p.sign(b)/c);var d=this.view.state.constraints.minimumPoiDistance;0<=b&&g<d&&(g=d,b=-(g-c)/c);1E-6>Math.abs(c-g)||(h.vec3.scale(this.tmpRayDir,this.tmpRayDir,b),h.vec3.add(this.currentCamera.eye,this.currentCamera.eye,this.tmpRayDir),h.vec3.lerp(this.currentCamera.center,this.currentCamera.center,this.tmpPoi,b),this.currentCamera.center[2]=this.tmpPoi[2]>this.beginCamera.center[2]?
Math.max(this.beginCamera.center[2],this.currentCamera.center[2]):Math.min(this.beginCamera.center[2],this.currentCamera.center[2]),this.currentCamera.markViewDirty(),this.constraintOptions.interactionFactor=e.pixelDistanceToInteractionFactor(this.dragBeginPoint,a),e.applyAll(this.view,this.currentCamera,this.constraintOptions))}};d.prototype.end=function(){this.active&&this.finishController()};return d}(c.InteractiveController);d.ZoomController=r})},"esri/views/3d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/watchUtils ../../state/controllers/GamepadKeyboardController ../../../input/InputHandler".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(g){function e(b,e){var a=g.call(this,!0)||this;a.view=b;a.watchHandles=new l;a.handle=a.registerIncoming("gamepad",function(b){return a.handleEventGamepad(b)});a.handle.pause();return a}n(e,g);e.prototype.onInstall=function(b){var c=this;g.prototype.onInstall.call(this,b);this.watchHandles.add([k.init(this.view.navigation.gamepad,"enabled",function(a){a?c.handle.resume():(c.handle.pause(),c.cameraControllerGamepad&&
(c.cameraControllerGamepad.finishController(),c.cameraControllerGamepad=null))}),this.view.navigation.gamepad.watch("device",function(a){c.cameraControllerGamepad&&a&&c.cameraControllerGamepad.gamepadDevice!==a&&(c.cameraControllerGamepad.finishController(),c.cameraControllerGamepad=null)})])};e.prototype.onUninstall=function(){this.watchHandles.removeAll();g.prototype.onUninstall.call(this)};e.prototype.handleEventGamepad=function(c){var e=this.view.navigation.gamepad.device;if(!e||c.data.device===
e)if((e=this.cameraControllerGamepad&&this.cameraControllerGamepad.active)||b.GamepadKeyboardController.activatesFor(this.view,c.data))e||(e=new b.GamepadKeyboardController(this.view,c.data.device),this.view.state.switchCameraController(e)&&(this.cameraControllerGamepad=e)),this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&this.cameraControllerGamepad.gamepadDevice===c.data.device&&this.cameraControllerGamepad.handleEventGamepad(c.data)};return e}(h.InputHandler);d.GamepadNavigation=
r})},"esri/views/3d/state/controllers/GamepadKeyboardController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../camera/constraintUtils ../Constraints ./InteractiveController ../utils/navigationUtils ../utils/navigationUtils ../utils/viewUtils ../../support/cameraUtils ../../support/cameraUtilsInternal ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/stack ../../webgl-engine/lib/Camera ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function e(b,c,e){var f=a.call(this)||this;f.view=b;f.gamepadDevice=c;f.disableMovements=e;f.transformation={translation:[0,0,0],heading:0,tilt:0};f.keysButtonState=[0,0,0,0,0,0,0,0,0,0];f.tmpCamera=new z;f.constraintOptions={selection:15,interactionType:0,interactionStartCamera:new z,interactionFactor:0,interactionDirection:null,tiltMode:1};return f}n(e,a);e.prototype.handleEventGamepad=
function(a){var b=B.extractTransformation(a,this.view.navigation.gamepad,this.transformation);("end"===a.action||B.isZeroTransformation(b))&&this.finishController()};e.prototype.activateDirection=function(a){this.keysButtonState[a]=1;B.extractTransformationKeyboard(this.keysButtonState,this.transformation)};e.prototype.deactivateDirection=function(a){this.keysButtonState[a]=0;a=B.extractTransformationKeyboard(this.keysButtonState,this.transformation);B.isZeroTransformation(a)&&this.finishController()};
e.prototype.onControllerStart=function(b){this.filteredSurfaceElevation=this.view.pointsOfInterest.cameraOnSurface.location.z;this.headingStart=this.view.camera.heading;a.prototype.onControllerStart.call(this,b)};e.prototype.updateFilteredSurfaceElevation=function(a){this.filteredSurfaceElevation+=1*(this.view.pointsOfInterest.cameraOnSurface.location.z-this.filteredSurfaceElevation)*a};e.prototype.stepController=function(b,e){this.updateStartHeading();this.updateFilteredSurfaceElevation(b);this.currentCamera.copyViewFrom(e);
this.updateCameraCenter();this.constraintOptions.interactionStartCamera.copyFrom(this.currentCamera);this.calculateControlTransformation(b,this.currentCamera,I);this.applyDisabledMovementTypes(I);this.applyPan(I.pan);this.applyRotate(I.rotate);this.applyZoom(I.zoom);this.applyAscend(I.ascend);this.constraintOptions.interactionType=0;this.constraintOptions.selection=8;c.applyAll(this.view,this.currentCamera,this.constraintOptions);a.prototype.stepController.call(this,b,e)};e.prototype.updateStartHeading=
function(){0!==this.transformation.heading&&(this.headingStart=this.view.camera.heading)};e.prototype.applyRotate=function(a){if(a.enabled){var b=this.currentCamera,e=b.center,f=b.up,h=b.eye;g.vec3.subtract(e,e,h);g.vec3.transformMat4(e,e,a.matrix);g.vec3.add(e,e,h);g.vec3.transformMat4(f,f,a.matrix);b.markViewDirty();this.constraintOptions.interactionType=3;this.constraintOptions.selection=7;c.applyAll(this.view,b,this.constraintOptions)}};e.prototype.applyPan=function(a,b){void 0===b&&(b=this.currentCamera);
if(a.enabled){var e=b.center,f=b.eye,h=b.up;g.vec3.transformMat4(f,f,a.matrix);g.vec3.transformMat4(e,e,a.matrix);this.view.state.isGlobal&&g.vec3.transformMat4(h,h,a.matrix);b.markViewDirty();this.constraintOptions.interactionType=4;this.constraintOptions.selection=15;c.applyAll(this.view,b,this.constraintOptions)}};e.prototype.applyZoom=function(a){if(a){var b=this.currentCamera,e=b.eye,b=b.viewForward;g.vec3.add(e,e,g.vec3.scale(u.sv3d.get(),b,a));this.currentCamera.markViewDirty();g.vec3.copy(H,
b);g.vec3.negate(H,H);this.constraintOptions.interactionDirection=H;this.constraintOptions.interactionType=1;this.constraintOptions.selection=7;c.applyAll(this.view,this.currentCamera,this.constraintOptions);this.constraintOptions.interactionDirection=null}};e.prototype.applyAscend=function(a){if(a){var b=this.currentCamera,e=b.center,b=b.eye,f=this.view.renderCoordsHelper.worldUpAtPosition(b,u.sv3d.get());this.constraintOptions.interactionDirection=g.vec3.copy(H,f);this.view.state.isGlobal?(f=g.vec3.length(b),
a=(f+a)/f,g.vec3.scale(b,b,a),g.vec3.scale(e,e,a)):(a=g.vec3.scale(u.sv3d.get(),f,a),g.vec3.add(b,b,a),g.vec3.add(e,e,a));this.currentCamera.markViewDirty();this.updateCameraCenter();this.constraintOptions.interactionType=5;this.constraintOptions.selection=8;c.applyAll(this.view,this.currentCamera,this.constraintOptions)&&this.updateCameraCenter();this.constraintOptions.selection=7;c.applyAll(this.view,this.currentCamera,this.constraintOptions);this.constraintOptions.interactionDirection=null}};e.prototype.calculateControlTransformation=
function(a,c,e){e.zoom=0;e.ascend=0;e.pan.enabled=!1;b.mat4.identity(e.pan.matrix);e.rotate.enabled=!1;b.mat4.identity(e.rotate.matrix);a=this.computeVelocities(a);this.view.state.isLocal?this.calculateControlTransformationLocal(a,c,e):this.calculateControlTransformationGlobal(a,c,e)};e.prototype.updateCameraCenter=function(){var a=this.currentCamera;this.view.renderCoordsHelper.intersectManifoldClosestSilhouette(a.ray,this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,a.center);
this.currentCamera.markViewDirty()};e.prototype.calculateControlTransformationLocal=function(a,c,e){var h=c.viewRight,d=c.viewForward,p=this.transformation,m=this.view.navigation.gamepad,d=g.vec3.set(u.sv3d.get(),d[0],d[1],0);g.vec3.normalize(d,d);var q=p.translation[0]*a.pan;0!==q&&(q=g.vec3.scale(u.sv3d.get(),h,q),b.mat4.translate(e.pan.matrix,e.pan.matrix,q),e.pan.enabled=!0);switch(m.mode){case "pan":m=-p.translation[1]*a.pan;0!==m&&(m=g.vec3.scale(u.sv3d.get(),d,m),b.mat4.translate(e.pan.matrix,
e.pan.matrix,m),e.pan.enabled=!0);break;case "zoom":e.zoom=-p.translation[1]*a.zoom;break;default:l.neverReached(m.mode)}e.ascend=p.translation[2]*a.ascend;m=-p.heading*a.rotate;0!==m&&(b.mat4.rotate(e.rotate.matrix,e.rotate.matrix,m,this.view.renderCoordsHelper.worldUpAtPosition(c.eye,u.sv3d.get())),e.rotate.enabled=!0);a=p.tilt*a.rotate;c=v.viewAngle(this.view.renderCoordsHelper,c.center,c.eye);if(c=k.clamp(c+a,f.TiltDefault.min,f.TiltDefault.max)-c)b.mat4.rotate(e.rotate.matrix,e.rotate.matrix,
c,h),e.rotate.enabled=!0};e.prototype.calculateControlTransformationGlobal=function(a,c,e){var f=c.eye,h=c.viewRight,d=this.transformation,k=this.view.navigation.gamepad,f=g.vec3.cross(u.sv3d.get(),h,f);g.vec3.normalize(f,f);g.vec3.negate(f,f);p.panMotionToRotationMatrix(this.beginCamera,c,d,a,this.view.camera.heading,this.headingStart,this.view.camera.tilt,e,k);this.tmpCamera.copyFrom(this.currentCamera);this.applyPan(I.pan,this.tmpCamera);k=this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude;
e.ascend=d.translation[2]*a.ascend;f=-d.heading*a.rotate;0!==f&&(b.mat4.rotate(e.rotate.matrix,e.rotate.matrix,f,this.tmpCamera.eye),e.rotate.enabled=!0);a=this.clampTiltDeltaGlobalToValidRange(d.tilt*a.rotate,c.ray,k);0!==a&&(b.mat4.rotate(e.rotate.matrix,e.rotate.matrix,a,this.tmpCamera.viewRight),e.rotate.enabled=!0)};e.prototype.clampTiltDeltaGlobalToValidRange=function(a,b,c){var e=q.onSurfaceTiltToEyeTiltGlobal(f.TiltDefault.min,b.origin,c),h=0,d=0,h=u.sv3d.get();this.view.renderCoordsHelper.intersectManifold(b,
c,h)?(h=v.viewAngle(this.view.renderCoordsHelper,h,b.origin),h=q.onSurfaceTiltToEyeTiltGlobal(h,b.origin,c),d=q.onSurfaceTiltToEyeTiltGlobal(f.TiltDefault.max,b.origin,c)):(w.sphere.closestPointOnSilhouette(w.sphere.wrap(c+x.earthRadius),b,h),h=m.acos(-g.vec3.dot(b.direction,g.vec3.normalize(h,h))),h=q.offSurfaceTiltToEyeTiltGlobal(h,b.origin,c),d=q.offSurfaceTiltToEyeTiltGlobal(f.TiltDefault.max,b.origin,c));return k.clamp(h+a,e,d)-h};e.prototype.getPointAbsoluteSurfaceElevation=function(a,b,c){var e=
this.view.renderCoordsHelper,f=e.getAltitude(a);b+=Math.abs(f-b);g.vec3.copy(c,a);e.setAltitude(b,c);return b};e.prototype.clampedDistanceToSurface=function(a,b){var c=this.view.renderCoordsHelper,e=this.view.state.camera,f=t.headingTiltToDirectionUp(this.view,b,0,F,S).direction,f=c.intersectManifoldClosestSilhouette(w.ray.wrap(b,f),a,u.sv3d.get()),f=g.vec3.distance(b,f);a=c.intersectManifoldClosestSilhouette(w.ray.wrap(b,m.directionFromTo(u.sv3d.get(),b,e.center)),a,u.sv3d.get());b=g.vec3.distance(b,
a);return Math.min(f,b)};e.prototype.computeHeadingRotateRadius=function(a){var b=this.view,c=b.renderCoordsHelper,e=b.state,b=e.isGlobal,e=c.intersectManifoldClosestSilhouette(e.camera.ray,this.filteredSurfaceElevation,u.sv3d.get());if(b)return b=g.vec3.subtract(u.sv3d.get(),a,e),c=g.vec3.length(b),g.vec3.scale(b,b,1/c),a=g.vec3.normalize(u.sv3d.get(),a),a=m.acos(g.vec3.dot(a,b)),c*Math.sin(Math.min(E,a));a=g.vec3.copy(u.sv3d.get(),a);c.setAltitude(this.filteredSurfaceElevation,a);return g.vec3.distance(e,
a)};e.prototype.minimumAscendVelocity=function(){return this.view.state.constraints.collision.enabled?0:L};e.prototype.computeVelocities=function(a){var b=this.filteredSurfaceElevation,c=b+x.earthRadius,e=this.view.state,f=e.camera,g=e.isGlobal,h=u.sv3d.get(),d=this.getPointAbsoluteSurfaceElevation(f.eye,b,h),p=this.clampedDistanceToSurface(b,h),l=f.width/2,m=N*f.width,e=N*f.width,f=p*Math.tan(.5*f.fovX)/l,q=f/c,c=f/this.computeHeadingRotateRadius(h),g=(g?q:f)*m*a,b=d-b,b=Math.max(this.minimumAscendVelocity()*
a,Math.pow(2,m*a/l)*b-b),p=Math.pow(2,m*a/l)*p-p;a*=k.clamp(c*e,K,O);return{pan:g,ascend:b,zoom:p,rotate:a}};e.prototype.applyDisabledMovementTypes=function(a){void 0===this.disableMovements||void 0!==this.disableMovements.mode&&this.view.state.mode!==this.disableMovements.mode||(a.zoom=this.disableMovements.zoom?0:a.zoom,a.ascend=this.disableMovements.ascend?0:a.ascend,a.pan.enabled=!this.disableMovements.pan,this.disableMovements.pan&&b.mat4.identity(a.pan.matrix),a.rotate.enabled=!this.disableMovements.rotate,
this.disableMovements.rotate&&b.mat4.identity(a.rotate.matrix))};e.activatesFor=function(a,b){a=B.extractTransformation(b,a.navigation.gamepad,C);return!("end"===b.action||B.isZeroTransformation(a))};return e}(a.InteractiveController);d.GamepadKeyboardController=r;var C={translation:[0,0,0],heading:0,tilt:0},F=80,E=m.deg2rad(F),N=.75,L=5,K=m.deg2rad(30),O=m.deg2rad(80),I={zoom:0,ascend:0,pan:{enabled:!1,matrix:h.mat4f64.create()},rotate:{enabled:!1,matrix:h.mat4f64.create()}},H=e.vec3f64.create(),
S=y.createDirectionUp()})},"esri/views/3d/support/cameraUtils":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../config ../../../core/Logger ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../camera/intersectionUtils ./cameraUtilsPlanar ./cameraUtilsSpherical ./earthUtils ./mathUtils ./projectionUtils ../webgl-engine/lib/Camera ../../support/spatialReferenceSupport".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){function B(a){return"global"===a.viewingMode?y:t}function C(e,f,g){var h=e.renderSpatialReference,d=c.vec3.copy(X,f.viewForward),d=L(e,f.eye,d,f.up,ca);e=e.spatialReference||p.WGS84;m.vectorToVector(f.eye,h,R,e)||(e=p.WGS84,m.vectorToVector(f.eye,h,R,e));if(!g)return new b(new a(R,e),d.heading,d.tilt,w.rad2deg(f.fov));g.position.x=R[0];g.position.y=R[1];g.position.z=R[2];g.position.spatialReference=e;g.heading=d.heading;g.tilt=d.tilt;g.fov=w.rad2deg(f.fov);
return g}function F(a,b,c){var e=a.state.camera,f=e.fovX,e=e.width/2/e.pixelRatio;"global"===a.viewingMode&&null!=c&&(b*=Math.cos(w.deg2rad(c)));b/=a.renderCoordsHelper.unitInMeters;return e/(39.37*h.screenDPI/b)/Math.tan(f/2)}function E(a,b,c){var e=a.state.camera;b=39.37*h.screenDPI/(e.width/2/e.pixelRatio/(b*Math.tan(e.fovX/2)));"global"===a.viewingMode&&(b/=Math.cos(w.deg2rad(c)));return b*=a.renderCoordsHelper.unitInMeters}function N(a,b,c,e,f,g){if(Q(g)){var h=Z(g.signal);S(a,e.heading,e.tilt,
b,c,f,h);h.resolver.promise.then(function(b){return g.resolver.resolve(T(a,b,e.fov))},function(a){return g.resolver.reject(a)})}else return b=S(a,e.heading,e.tilt,b,c,f),T(a,b,e.fov,g)}function L(a,b,c,e,f){return B(a).directionToHeadingTilt(b,c,e,f)}function K(a,b,c){return a.basemapTerrain&&a.renderCoordsHelper.fromRenderCoords(b,G,a.spatialReference)&&a.basemapTerrain.getElevation(G)>G.z-1}function O(a,b,c,e){return k(this,void 0,void 0,function(){var c;return l(this,function(f){switch(f.label){case 0:return a.renderCoordsHelper.fromRenderCoords(b,
G,a.spatialReference)?[4,a.elevationProvider.queryElevation(G,e)]:[2,!1];case 1:return c=f.sent(),[2,c>G.z-10]}})})}function I(b,e,g){return k(this,void 0,void 0,function(){var h,d;return l(this,function(k){switch(k.label){case 0:h=f.vec3f64.create();if(e)return[3,1];c.vec3.copy(h,b.state.camera.center);return[3,5];case 1:if(!(e instanceof a))return[3,4];m.pointToVector(e,h,b.renderSpatialReference);return null!=e.z||null==b.basemapTerrain?[3,3]:[4,b.elevationProvider.queryElevation(e,g)];case 2:return d=
k.sent(),null!=d&&b.renderCoordsHelper.setAltitude(d,h),[2,h];case 3:return[3,5];case 4:c.vec3.copy(h,e),k.label=5;case 5:return[2,h]}})})}function H(b,e){var g=f.vec3f64.create();e&&e instanceof a?(m.pointToVector(e,g,b.renderSpatialReference),null==e.z&&null!=b.basemapTerrain&&(e=b.elevationProvider.getElevation(e),null!=e&&b.renderCoordsHelper.setAltitude(e,g))):e?c.vec3.copy(g,e):c.vec3.copy(g,b.state.camera.center);return g}function S(b,c,e,f,g,h,d){var k=f&&f instanceof a?f:null;if(Q(d))I(b,
f,d.signal).then(function(a){P(b,c,e,k,a,g,h,d)},function(a){return d.resolver.reject(a)});else return f=H(b,f),P(b,c,e,k,f,g,h,d)}function P(a,b,c,e,g,h,d,k){e||(e=m.vectorToPoint(g,a.renderSpatialReference,a.spatialReference||p.WGS84));h=Math.max(h,a.state.constraints.minimumPoiDistance);var l=V(a,b,c,g,h,d),u=B(a).eyeForCenterWithHeadingTilt,q=u(g,h,l.heading,l.tilt);if(d===ja.ADJUST&&"global"===a.viewingMode&&0<c){var z=function(){var f=h,p=h,l=a.state.constraints.tilt(p),p=B(a).eyeTiltToLookAtTilt(g,
p,c),p=Math.min(p,.5*Math.PI),l=l.min*(1-na)+p*na,f=B(a).lookAtTiltToEyeTilt(g,f,l);d=1>c-f?ja.LOCKED:ja.ADJUST;return P(a,b,f,e,g,h,d,k)};if(K(a,q.eye,q.tilt))return z();if(Q(k)){O(a,q.eye,q.tilt,k.signal).then(function(a){if(a)return z();k.resolver.resolve({eye:q.eye,up:q.up,center:f.vec3f64.clone(g),heading:q.heading,tilt:q.tilt})});return}}l=!k||Q(k)?{center:f.vec3f64.create(),eye:f.vec3f64.create(),up:f.vec3f64.create(),tilt:0,heading:0}:k;l.eye=q.eye;l.up=q.up;l.center=f.vec3f64.clone(g);l.heading=
q.heading;l.tilt=q.tilt;Q(k)&&k.resolver.resolve(l);return l}function V(a,b,c,e,f,g){var h=0;if(g=g===ja.ADJUST)if(h=a.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(f/h)/Math.LN2)g=!0;else{var d=a.renderSpatialReference,k=a.spatialReference||p.WGS84;g=m.vectorToPoint(e,d,k);d=m.vectorToPoint(a.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,d,k);h*=Math.tan(.5*a.state.camera.fov);g=5<d.distance(g)/h}g?(b=0,g=a.state.constraints.tilt(f),g.max=Math.min(g.max,.5*Math.PI),g=g.min*
(1-na)+g.max*na,c=B(a).eyeTiltToLookAtTilt(e,f,c),h=Math.min(c,g)):h=B(a).eyeTiltToLookAtTilt(e,f,c);c=h=a.state.constraints.clampTilt(f,h);c=B(a).lookAtTiltToEyeTilt(e,f,c);return{heading:b,tilt:c}}function T(a,c,e,f){a=m.vectorToPoint(c.eye,a.renderSpatialReference,a.spatialReference||p.WGS84);return a?f?(f.position=a,f.heading=c.heading,f.tilt=c.tilt,f.fov=e,f):new b(a,c.heading,c.tilt,e):null}function Z(a){return{resolver:e.createResolver(),signal:a}}function Q(a){return a&&"resolver"in a}Object.defineProperty(d,
"__esModule",{value:!0});var J=g.getLogger("esri.views.3d.support.cameraUtils"),R=f.vec3f64.create(),U=f.vec3f64.create(),X=f.vec3f64.create(),ca={heading:0,tilt:0},G=new a,Y=new w.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),la=new w.Cyclical(-180,180),ja;(function(a){a[a.LOCKED=0]="LOCKED";a[a.ADJUST=1]="ADJUST"})(ja=d.OrientationMode||(d.OrientationMode={}));d.headingTiltToDirectionUp=function(a,b,c,e,f){return B(a).headingTiltToDirectionUp(b,c,e,f)};d.externalToInternal=function(a,b){var e=
a.renderSpatialReference,g=B(a).headingTiltToDirectionUp,h=f.vec3f64.create();if(!m.pointToVector(b.position,h,e))return null;e=g(h,b.heading,b.tilt);c.vec3.scale(e.direction,e.direction,a.state.camera.distance);c.vec3.add(e.direction,e.direction,h);a=v.cameraOnContentAlongViewDirection(a,h,e.direction,e.up);a.fov=w.deg2rad(b.fov);return a};d.internalToExternal=C;d.scaleToDistance=F;d.distanceToScale=E;d.fromCenterScale=function(a,b,c,e,f,g){c=F(a,c,b.latitude);return N(a,b,c,e,f,g)};d.fromCenterDistance=
N;d.directionToHeadingTilt=L;d.getObserverForPointAtDistance=S;d.fromExtent=function(b,c,e,f,g,h){var d,k=0;null!=c.zmax&&null!=c.zmin&&(d=(c.zmax+c.zmin)/2,k=c.zmax-c.zmin);var l,m;if("global"===b.viewingMode){if(!z.isSpatialReferenceSupported(c.spatialReference,"global"))return Q(h)&&h.resolver.reject(),null;var u=new a(c.xmin,c.ymin,c.spatialReference),q=new a(c.xmax,c.ymax,c.spatialReference),t=c.spatialReference.isGeographic?la:Y;c=new a(t.center(u.x,q.x),(q.y+u.y)/2,c.spatialReference);null!=
d&&(c.z=d);m=x.getGreatCircleSpanAt(c,u,q);l=m.lon;m=m.lat;t.diff(u.x,q.x)>t.range/2&&(l+=x.halfEarthCircumference);l=Math.min(l,x.halfEarthCircumference);m=Math.min(m,x.halfEarthCircumference)}else u=b.spatialReference||p.WGS84,l=c.xmax-c.xmin,m=c.ymax-c.ymin,c=new a({x:c.xmin+.5*l,y:c.ymin+.5*m,z:d,spatialReference:u});d=b.state.camera;k=Math.max(1/Math.tan(d.fovX/2)*l*.5,1/Math.tan(d.fovY/2)*m*.5,1/Math.tan(d.fov/2)*k*.5)/1;if(Q(h))l=Z(h.signal),S(b,e,f,c,k,g,l),l.resolver.promise.then(function(a){return h.resolver.resolve(T(b,
a,b.camera.fov))},function(a){return h.resolver.reject(a)});else return e=S(b,e,f,c,k,g),T(b,e,b.camera.fov,h)};d.toExtent=function(a,b,c,e,f){b||(c||(c=a.state.camera),b=C(a,c,f));f=a.renderSpatialReference;var g;if(c)f=m.vectorToPoint(c.center,f,a.spatialReference||p.WGS84),g=c.distance;else{f=a.toMap(a.screenCenter);if(!f)return null;g=x.computeCartesianDistance(b.position,f)}c||(c=a.state.camera);b=2*g*Math.tan(c.fovX/2)*1;c=2*g*Math.tan(c.fovY/2)*1;return"global"===a.viewingMode?y.toExtent(a,
f,b,c,e):t.toExtent(a,f,b,c,e)};var na=.7;d.observerToCamera=T;d.scaleToZoom=function(a,b){if(a=a.basemapTerrain&&a.basemapTerrain.tilingScheme)return a.levelAtScale(b);J.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};d.zoomToScale=function(a,b){if(a=a.basemapTerrain&&a.basemapTerrain.tilingScheme)return a.scaleAtLevel(b);J.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};d.scaleToResolution=function(a,b){return a.spatialReference?
q.getResolutionForScale(b,a.spatialReference):void 0};d.computeScale=function(a,b,e){var f=a.renderSpatialReference;b||(b=a.state.camera);var g;g=p.WGS84;b instanceof u?(m.vectorToVector(b.center,f,U,g),g=U[1],b=b.distance):(g=b.position.latitude,m.pointToVector(b.position,R,f),m.pointToVector(e,U,f),b=c.vec3.distance(R,U));return E(a,b,g)};d.createAsyncContext=Z;d.isAsyncContext=Q})},"esri/views/3d/support/cameraUtilsPlanar":function(){define("require exports ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Extent ./cameraUtilsInternal ./mathUtils ./projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){function f(b,c,f,h){void 0===h&&(h=g.createDirectionUp());n.mat4.identity(q);b=h.direction;var d=h.up;n.mat4.rotateZ(q,q,-e.deg2rad(c));n.mat4.rotateX(q,q,e.deg2rad(f));k.vec3.transformMat4(b,p,q);k.vec3.scale(b,b,-1);k.vec3.transformMat4(d,a,q);return h}Object.defineProperty(d,"__esModule",{value:!0});var a=b.vec3f64.fromValues(0,1,0),p=b.vec3f64.fromValues(0,0,1),q=l.mat4f64.create(),v=b.vec3f64.create(),t=b.vec3f64.create();d.headingTiltToDirectionUp=f;d.directionToHeadingTilt=
function(b,c,e,f){return g.directionToHeadingTilt(c,e,f,p,a)};d.eyeForCenterWithHeadingTilt=function(a,c,e,g){var h=f(a,e,g),d=b.vec3f64.create();k.vec3.scale(d,h.direction,-c);k.vec3.add(d,d,a);return{up:h.up,eye:d,heading:e,tilt:g}};d.lookAtTiltToEyeTilt=function(a,b,c){return e.rad2deg(c)};d.eyeTiltToLookAtTilt=function(a,b,c){return e.deg2rad(c)};d.toExtent=function(a,b,e,f,g){var d=a.renderSpatialReference;a=a.map&&a.spatialReference||b.spatialReference;c.pointToVector(b,v,d);c.pointToVector(b,
t,d);v[0]-=e/2;t[0]+=e/2;v[1]-=f/2;t[1]+=f/2;c.vectorToVector(v,d,v,a);c.vectorToVector(t,d,t,a);g?(g.xmin=v[0],g.ymin=v[1],g.xmax=t[0],g.ymax=t[1],g.spatialReference=a):g=new h(v[0],v[1],t[0],t[1],a);return g}})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64","./mathUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=l.vec3f64.create(),h=l.vec3f64.create();
d.createDirectionUp=function(){return{direction:l.vec3f64.create(),up:l.vec3f64.create()}};d.directionToHeadingTilt=function(g,e,c,f,a){var d=b;n.vec3.normalize(d,g);var l=n.vec3.dot(d,f),v=0<l,l=Math.abs(l);.99<l&&(l=Math.abs(n.vec3.dot(e,f)),.99>l?(n.vec3.copy(d,e),v&&n.vec3.scale(d,d,-1)):d=null);e=0;d&&(n.vec3.scale(h,f,n.vec3.dot(f,d)),n.vec3.subtract(d,d,h),e=n.vec3.dot(d,a)/(n.vec3.length(d)*n.vec3.length(a)),n.vec3.cross(h,d,a),e=(0<n.vec3.dot(h,f)?1:-1)*k.rad2deg(k.acos(e)));g=k.rad2deg(k.acos(-n.vec3.dot(f,
g)/n.vec3.length(g)));if(!c)return{heading:e,tilt:g};c.heading=e;c.tilt=g;return c}})},"esri/views/3d/support/cameraUtilsSpherical":function(){define("require exports ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/Extent ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ./cameraUtilsInternal ./earthUtils ./mathUtils".split(" "),function(r,d,n,l,k,b,h,
g,e,c,f,a){function p(b,e,f,g){void 0===g&&(g=c.createDirectionUp());k.vec3.cross(m,b,t);0===k.vec3.dot(m,m)&&k.vec3.cross(m,b,y);n.mat4.identity(w);n.mat4.rotate(w,w,-a.deg2rad(e),b);n.mat4.rotate(w,w,-a.deg2rad(f),m);e=g.up;f=g.direction;k.vec3.cross(e,m,b);k.vec3.normalize(e,e);k.vec3.transformMat4(e,e,w);k.vec3.normalize(f,b);k.vec3.negate(f,f);k.vec3.transformMat4(f,f,w);return g}function q(a){var b=a[1];a[1]=-a[2];a[2]=b}function v(a,b){b=p(b,a.heading,a.tilt);a.up=b.up;return a}Object.defineProperty(d,
"__esModule",{value:!0});var t=b.vec3f64.fromValues(0,0,1),y=k.vec3.normalize(b.vec3f64.create(),b.vec3f64.fromValues(1,1,1)),x=new a.Cyclical(-180,180),w=l.mat4f64.create(),m=b.vec3f64.create(),u=b.vec3f64.create();d.headingTiltToDirectionUp=p;d.directionToHeadingTilt=function(a,b,e,f){var g=m;k.vec3.normalize(g,a);k.vec3.cross(u,g,t);0===k.vec3.dot(u,u)&&k.vec3.cross(u,g,y);k.vec3.cross(u,u,g);return c.directionToHeadingTilt(b,e,f,g,u)};d.eyeForCenterWithHeadingTilt=function(c,e,f,g){var h={eye:b.vec3f64.create(),
up:null,tilt:g,heading:f},d=m;d[0]=c[0];d[1]=c[2];d[2]=-c[1];f=a.deg2rad(f);var p=a.deg2rad(g);g=Math.sin(f);f=Math.cos(f);var l=Math.sin(p),u=Math.cos(p),z=k.vec3.length(d);if(1E-8>Math.abs(p))p=e+z;else var t=z/l,B=a.asin(e/t),p=t*Math.sin(Math.PI-p-B);var t=l*e,u=u*e,B=f*t,x=p-u,y=x*x,w=e*e*l*l,l=f*f*w,w=g*g*w,C=d[1]*x,n=l*(l+y-d[1]*d[1]);if(0>n)return k.vec3.scale(h.eye,d,p/z),h.tilt=0,h;var F=Math.sqrt(n),n=l+y,C=0<f?-F+C:F+C;if(1E-8>Math.abs(n))return 1E-8>z?(h.eye[0]=0,h.eye[1]=0,h.eye[2]=
e):k.vec3.scale(h.eye,d,p/z),h.tilt=0,q(h.eye),v(h,c);h.eye[1]=C/n;n=h.eye[1]*h.eye[1];e=1-n;C=Math.sqrt(e);B=l*n+w-2*B*h.eye[1]*C*x+e*y;if(1E-8>Math.abs(B))return k.vec3.scale(h.eye,d,p/z),h.tilt=0,q(h.eye),v(h,c);h.eye[0]=(e*(p*d[0]-u*d[0])-t*C*(d[0]*h.eye[1]*f+d[2]*g))/B;h.eye[2]=(e*(p*d[2]-u*d[2])-t*C*(d[2]*h.eye[1]*f-d[0]*g))/B;k.vec3.scale(h.eye,h.eye,p);q(h.eye);return v(h,c)};d.lookAtTiltToEyeTilt=function(b,c,e){b=k.vec3.length(b);c=a.asin(c/(Math.sqrt(c*c+b*b-2*c*b*Math.cos(Math.PI-e))/
Math.sin(e)));return a.rad2deg(e-c)};d.eyeTiltToLookAtTilt=function(b,c,e){e=a.deg2rad(e);b=k.vec3.length(b);return a.asin(c/(b/Math.sin(e)))+e};d.toExtent=function(b,c,d,k,p){function l(b){var c=Math.PI/2;b=a.cyclical2PI.normalize(b,-c);b>c&&(b=Math.PI-b);return b}var m;m=c.latitude;c=c.longitude;var u=f.getLonDeltaForDistance(c,m,d)/2;d=c-u;c+=u;m=a.deg2rad(m);u=f.earthRadius;m=(1+Math.sin(m))/(1-Math.sin(m));var q=(m+1)*Math.tan(k/u/2);m=1.5*Math.PI-2*Math.atan(.5*(q+Math.sqrt(4*m+q*q)));k=m+k/
u;m=l(m);k=l(k);k<m&&(u=k,k=m,m=u);m=Math.max(a.rad2deg(m),-90);k=Math.min(a.rad2deg(k),90);c=x.monotonic(d,c);180<c-d&&(u=(c-d-180)/2,d+=u,c-=u);u=b.spatialReference&&b.spatialReference.isGeographic?b.spatialReference:g.WGS84;p?(p.xmin=d,p.ymin=m,p.xmax=c,p.ymax=k,p.spatialReference=u):p=new h(d,m,c,k,u);b.spatialReference&&b.spatialReference.isWebMercator&&e.geographicToWebMercator(p,!1,p);return p}})},"esri/views/support/spatialReferenceSupport":function(){define(["require","exports"],function(r,
d){Object.defineProperty(d,"__esModule",{value:!0});d.isSpatialReferenceSupported=function(d,l){return null==d?!1:"2d"===l?!0:"local"===l?!d.isGeographic:d.isWebMercator||d.isWGS84||4490===d.wkid}})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(r,d,n){function l(d){var b=d*d;0>d&&(b*=-1);return b}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=l;d.resetTransformation=function(d){d.translation[0]=
0;d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,b,h){var g=d.state;d=d.device;b="forward-down"===b.tiltDirection?1:-1;"standard"===d.deviceType?(h.translation[0]=l(g.axes[0]),h.translation[1]=l(g.axes[1]),h.translation[2]=l(g.buttons[7])-l(g.buttons[6]),h.heading=l(g.axes[2]),h.tilt=l(g.axes[3])):"spacemouse"===d.deviceType&&(h.translation[0]=1.2*l(g.axes[0]),h.translation[1]=1.2*l(g.axes[1]),h.translation[2]=2*-l(g.axes[2]),h.heading=1.2*
l(g.axes[5]),h.tilt=1.2*l(g.axes[3]));h.tilt*=b;n.vec3.scale(h.translation,h.translation,1);return h};d.extractTransformationKeyboard=function(d,b){b.translation[0]=d[1]-d[0];b.translation[1]=d[3]-d[2];b.translation[2]=d[4]-d[5];b.heading=d[7]-d[6];b.tilt=d[8]-d[9];return b};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/3d/input/handlers/KeyboardNavigation":function(){define(["require","exports",
"../../../../core/tsSupport/extendsHelper","../../state/controllers/GamepadKeyboardController","../../../input/InputHandler"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function h(g,e,c){var f,a=b.call(this,!0)||this;a.view=g;a.disableMovements={pan:!0,zoom:!0,ascend:!0,rotate:!1,mode:"local"};a.keyToNumber=(f={},f[e.left]=0,f[e.right]=1,f[e.forward]=2,f[e.backward]=3,f[e.up]=4,f[e.down]=5,f[e.headingLeft]=6,f[e.headingRight]=7,f[e.tiltUp]=8,f[e.tiltDown]=9,
f);a.registerIncoming("key-down",c,function(b){return a.handleKeyDown(b)});a.registerIncoming("key-up",c,function(b){return a.handleKeyUp(b)});a.registerIncoming("blur",c,function(){return a.handleBlur()});return a}n(h,b);h.prototype.handleKeyDown=function(b){var e=this.keyToNumber[b.data.key];null!=e&&(this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active||(this.cameraControllerKeyboard=new l.GamepadKeyboardController(this.view,void 0,this.disableMovements),this.view.state.switchCameraController(this.cameraControllerKeyboard)),
this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.activateDirection(e),b.stopPropagation()))};h.prototype.handleBlur=function(){this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.finishController(),this.cameraControllerKeyboard=null)};h.prototype.handleKeyUp=function(b){var e=this.keyToNumber[b.data.key];null!=e&&this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.deactivateDirection(e),
b.stopPropagation())};return h}(k.InputHandler);d.KeyboardNavigation=r})},"esri/views/3d/input/handlers/MouseWheelZoom":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/global/ZoomStepController ../../state/controllers/local/ZoomStepController ../../../input/InputHandler".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(g){function e(b,e){var a=g.call(this,!0)||this;a.view=
b;a.registerIncoming("mouse-wheel",e,function(b){return a.handleMouseWheel(b)});return a}n(e,g);e.prototype.handleMouseWheel=function(c){var e=c.data;this.cameraController&&this.cameraController.active||(this.cameraController=this.view.state.isGlobal?new k.ZoomStepController(this.view,"interaction"):new b.ZoomStepController(this.view,"interaction"),this.view.state.switchCameraController(this.cameraController));this.cameraController.zoomStep(-1/60*e.deltaY,l.createScreenPointArray(e.x,e.y));c.stopPropagation()};
return e}(h.InputHandler);d.MouseWheelZoom=r})},"esri/views/3d/input/handlers/PinchAndPanNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../state/controllers/global/PinchAndPanController ../../state/controllers/local/PinchAndPanController ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function e(c,e,a){var f=b.call(this,!0)||this;f.view=c;f.pointerAction=
e;f.lastEndTimestamp=0;f.lastTimestamp=0;f.registerIncoming("drag",a,function(a){return f.handleDrag(a)});return f}n(e,b);e.prototype.handleDrag=function(b){if("mouse"!==b.data.pointerType||h.eventMatchesMousePointerAction(b.data,this.pointerAction)){var c=b.timestamp-this.lastEndTimestamp,c=this.momentum&&this.momentum.active&&40>c;switch(b.data.action){case "start":case "update":if(c)break;this.controller&&this.controller.active?2<b.data.timestamp-this.lastTimestamp&&(this.controller.update(b.data),
this.lastTimestamp=b.timestamp):this.startController(b);break;case "end":case "removed":this.endController(b,!0);break;case "added":this.endController(b,!1),this.startController(b)}b.stopPropagation()}};e.prototype.endController=function(b,e){this.controller&&this.controller.active&&(this.lastEndTimestamp=b.timestamp,b=this.controller.end(b.data),e&&b&&(this.momentum=b,this.view.state.switchCameraController(this.momentum)));this.controller=null};e.prototype.startController=function(b){this.controller=
this.createController();this.view.state.switchCameraController(this.controller);this.controller.begin(b.data);this.lastTimestamp=b.timestamp};e.prototype.createController=function(){return this.view.state.isGlobal?new l.PinchAndPanController(this.view,this.view.sceneIntersectionHelper):new k.PinchAndPanController(this.view,this.view.sceneIntersectionHelper)};return e}(b.InputHandler);d.PinchAndPanNavigation=r})},"esri/views/3d/state/controllers/global/PinchAndPanController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../../../input/util ../InteractiveController ../momentum/PanPlanarMomentumController ../momentum/PanSphericalMomentumController ../momentum/RotationMomentumController ../momentum/ZoomPlanarMomentumController ../momentum/ZoomSphericalMomentumController ../../utils/navigationUtils ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils ../../../webgl-engine/lib/Camera ../../../../navigation/PanPlanarMomentumEstimator ../../../../navigation/PanSphericalMomentumEstimator ../../../../navigation/RotationMomentumEstimator ../../../../navigation/ZoomMomentumEstimator".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function d(c,g){var h=a.call(this)||this;h.view=c;h.intersectionHelper=g;h.smoothRotation=new f.ExponentialFalloff(.05);h.rotationAxis=e.vec3f64.create();h.panningPlane=m.plane.create();h.smoothScaling=new f.ExponentialFalloff(.05);h.zoomCenterScreen=l.createScreenPointArray();h.zoomMomentumEstimator=new E.ZoomMomentumEstimator;h.rotationMomentumEstimator=new F.RotationMomentumEstimator;
h.panSphericalMomentumEstimator=new C.PanSphericalMomentumEstimator;h.panPlanarMomentumEstimator=new B.PanPlanarMomentumEstimator;h.adjustedSphere=m.sphere.create();h.tmp3d=e.vec3f64.create();h.tmpMat=b.mat4f64.create();h.tmpAxisAngle=m.axisAngle.create();h.tmpScreenPointArray=l.createScreenPointArray();h.beginScreenPoint=l.createScreenPointArray();h.beginScenePoint=e.vec3f64.create();h.screenPickPoint=l.createScreenPointArray();h.panMode=w.PanMode.Horizontal;h.tmpInteractionDirection=e.vec3f64.create();
h.constraintOptions={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:new z,interactionDirection:null,tiltMode:0};return h}n(d,a);d.prototype.begin=function(a){if(this.active){this.beginHeading=-u.cyclicalPI.normalize(u.deg2rad(this.view.camera.heading));this.beginRadius=a.radius;this.pointerCount=a.pointers.size;this.beginAngle=a.angle;this.smoothRotation.reset();l.screenPointObjectToArray(a.center,this.screenPickPoint);h.vec2.copy(this.beginScreenPoint,this.screenPickPoint);
var b=x.pickPointAndInitSphere(this.intersectionHelper,this.beginCamera,this.screenPickPoint,!0);this.scenePickPoint=b.scenePickPoint;this.sphere=b.sphere;g.vec3.copy(this.beginScenePoint,this.scenePickPoint);this.panMode=x.decidePanMode(this.beginCamera,this.sphere,this.scenePickPoint);this.panMode===w.PanMode.Vertical&&(this.beginCamera.aboveGround?this.preparePlanarPanModeOverground(a):this.preparePlanarPanMode(a));this.constraintOptions.interactionStartCamera.copyFrom(this.beginCamera)}};d.prototype.preparePlanarPanModeOverground=
function(a){var b=g.vec3.negate(this.tmp3d,this.beginCamera.viewForward);m.plane.fromPositionAndNormal(this.scenePickPoint,b,this.panningPlane);var c=l.createScreenPointArray(this.screenPickPoint[0],0),b=e.vec3f64.create(),f=g.vec3.length(this.beginCamera.eye);this.adjustedSphere.radius=f<this.sphere.radius?f-100:this.sphere.radius;x.sphereOrPlanePointFromScreenPoint(this.adjustedSphere,this.beginCamera,c,b);c=l.createRenderScreenPointArray3();this.beginCamera.projectPoint(b,c);this.screenPickPoint[1]=
Math.min(this.screenPickPoint[1],.9*c[1]);this.intersectionHelper.intersectScreen(this.screenPickPoint,this.scenePickPoint)&&m.plane.fromPositionAndNormal(this.scenePickPoint,this.panningPlane,this.panningPlane);a=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.beginCamera,a,this.beginScenePoint)};d.prototype.preparePlanarPanMode=function(a){var b=g.vec3.negate(this.tmp3d,this.beginCamera.viewForward);m.plane.fromPositionAndNormal(this.scenePickPoint,
b,this.panningPlane);var c=m.sphere.angleToSilhouette(this.sphere,this.currentCamera.eye),b=m.axisAngle.fromPoints(this.currentCamera.eye,this.scenePickPoint,this.tmpAxisAngle),c=-b[3]-(this.currentCamera.aboveGround?.25:.025)*c;if(0<c){var e=k.mat4.identity(this.tmpMat);k.mat4.rotate(e,e,-c,b);g.vec3.subtract(this.scenePickPoint,this.scenePickPoint,this.sphere.center);g.vec3.transformMat4(this.scenePickPoint,this.scenePickPoint,e);g.vec3.add(this.scenePickPoint,this.scenePickPoint,this.sphere.center);
m.plane.setOffsetFromPoint(this.panningPlane,this.scenePickPoint,this.panningPlane);a=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.beginCamera,a,this.beginScenePoint)}};d.prototype.update=function(a){if(this.active){this.currentCamera.copyFrom(this.beginCamera);var b=1<a.pointers.size;this.panMode===w.PanMode.Horizontal?(b&&this.zoomSpherical(a),this.panningSpherical(a),b&&this.rotateSpherical(a)):(b&&this.zoomPlanar(a),this.panningPlanar(a),
b&&this.rotatePlanar(a));this.currentCamera.markViewDirty()}};d.prototype.end=function(a){a.pointers.size===this.pointerCount&&this.update(a);this.finishController();if(a=this.zoomMomentumEstimator.evaluateMomentum())return this.panMode===w.PanMode.Horizontal?new y.ZoomSphericalMomentumController(this.view,a,this.zoomCenterScreen,this.beginScenePoint,this.sphere.radius):new t.ZoomPlanarMomentumController(this.view,a,this.beginScenePoint);if(a=this.rotationMomentumEstimator.evaluateMomentum())return new v.RotationMomentumController(this.view,
a,this.sphere.center,this.rotationAxis);if(this.panMode===w.PanMode.Horizontal){if(a=this.panSphericalMomentumEstimator.evaluateMomentum())return new q.PanSphericalMomentumController(this.view,a)}else if(a=this.panPlanarMomentumEstimator.evaluateMomentum())return new p.PanPlanarMomentumController(this.view,a);return null};d.prototype.zoomSpherical=function(a){var b=this.beginRadius/a.radius;this.smoothScaling.gain=.001875*Math.min(Math.max(a.radius,40),120);this.smoothScaling.update(b);x.applyZoomOnSphere(this.sphere,
this.currentCamera,this.smoothScaling.value);l.screenPointObjectToArray(a.center,this.zoomCenterScreen);this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*a.timestamp);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(a.radius-this.beginRadius);c.applyAll(this.view,this.currentCamera,this.constraintOptions)};d.prototype.panningSpherical=function(a){var b=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.sphereOrPlanePointFromScreenPoint(this.sphere,
this.currentCamera,b,this.tmp3d);x.preserveHeadingThreshold(this.beginScenePoint,g.vec3.dot(this.currentCamera.up,this.beginScenePoint),this.sphere.radius,this.beginHeading,this.view.camera.tilt,this.beginCamera)?(x.applyPanSphericalPreserveHeading(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.beginHeading,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumPreserveHeading(b,this.tmp3d,.001*a.timestamp,this.beginCamera,this.sphere,this.beginHeading,this.view.camera.tilt)):
(x.applyPanSphericalDirectRotation(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumDirectRotation(b,this.tmp3d,.001*a.timestamp,this.beginCamera,this.sphere.radius,this.view.camera.tilt));this.constraintOptions.interactionType=4;this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(this.screenPickPoint,b);c.applyAll(this.view,this.currentCamera,this.constraintOptions)};d.prototype.rotateSpherical=
function(a){g.vec3.normalize(this.rotationAxis,this.scenePickPoint);this.currentCamera.aboveGround||g.vec3.negate(this.rotationAxis,this.rotationAxis);var b=this.smoothRotation.value,e=x.normalizeRotationDelta(a.angle-b),b=b+e;this.smoothRotation.gain=.00125*Math.min(Math.max(a.radius,40),120);this.smoothRotation.update(b);e=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(e,.001*a.timestamp);x.applyRotation(this.currentCamera,this.sphere.center,m.axisAngle.wrapAxisAngle(this.rotationAxis,
e));this.constraintOptions.interactionType=2;this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(a.radius*b);c.applyAll(this.view,this.currentCamera,this.constraintOptions)};d.prototype.panningPlanar=function(a){var b=l.screenPointObjectToArray(a.center,this.tmpScreenPointArray);x.intersectPlaneFromScreenPoint(this.panningPlane,this.currentCamera,b,this.tmp3d)&&(x.applyPanPlanar(this.currentCamera,this.beginScenePoint,this.tmp3d),this.panPlanarMomentumEstimator.add(b,this.tmp3d,
.001*a.timestamp),this.constraintOptions.interactionType=4,this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(this.beginScreenPoint,b),this.constraintOptions.interactionDirection=this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye,this.tmpInteractionDirection),c.applyAll(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null)};d.prototype.zoomPlanar=function(a){var b=this.beginRadius/a.radius;this.smoothScaling.gain=
.001875*Math.min(Math.max(a.radius,40),120);this.smoothScaling.update(b);this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*a.timestamp);x.applyZoomToPoint(this.currentCamera,this.beginScenePoint,this.smoothScaling.value,this.view.state.constraints.minimumPoiDistance);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(a.radius-this.beginRadius);c.applyAll(this.view,this.currentCamera,this.constraintOptions)};d.prototype.rotatePlanar=
function(a){g.vec3.copy(this.rotationAxis,this.beginScenePoint);this.currentCamera.aboveGround||g.vec3.negate(this.rotationAxis,this.rotationAxis);var b=this.smoothRotation.value,e=a.angle-b,e=x.normalizeRotationDelta(e);this.smoothRotation.gain=.00125*Math.min(Math.max(a.radius,40),120);this.smoothRotation.update(b+e);b=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(b,.001*a.timestamp);x.applyRotation(this.currentCamera,this.sphere.center,m.axisAngle.wrapAxisAngle(this.rotationAxis,
b));this.constraintOptions.interactionType=2;this.constraintOptions.interactionFactor=c.pixelDistanceToInteractionFactor(a.radius*b);c.applyAll(this.view,this.currentCamera,this.constraintOptions)};return d}(a.InteractiveController);d.PinchAndPanController=r})},"esri/views/3d/input/util":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this._gain=d}d.prototype.reset=function(d){this._value=d};Object.defineProperty(d.prototype,
"gain",{set:function(d){this._gain=d},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"value",{get:function(){return void 0===this._value?0:this._value},enumerable:!0,configurable:!0});d.prototype.update=function(d){this._value=void 0===this._value?d:this._gain*d+(1-this._gain)*this._value};return d}();d.ExponentialFalloff=r})},"esri/views/3d/state/controllers/momentum/PanPlanarMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function g(e,c){e=b.call(this,e,4)||this;e.momentum=c;e.tmpPan=k.vec3f64.create();return e}n(g,b);g.prototype.momentumStep=function(b,c){b=this.momentum.value(b);l.vec3.scale(this.tmpPan,this.momentum.direction,b);l.vec3.subtract(c.eye,c.eye,this.tmpPan);l.vec3.subtract(c.center,c.center,this.tmpPan);c.markViewDirty();this.constraintOptions.interactionDirection=this.tmpPan};return g}(b.MomentumController);d.PanPlanarMomentumController=
r})},"esri/views/3d/state/controllers/momentum/MomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../camera/constraintUtils ../AnimationController ../../../webgl-engine/lib/Camera".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(h){function g(e,c){c=h.call(this)||this;c.view=e;c.beginCamera=new b;c.elapsedTimeSec=0;c.constraintOptions={selection:15,interactionType:4,interactionFactor:0,interactionStartCamera:new b,
interactionDirection:null,tiltMode:0};return c}n(g,h);Object.defineProperty(g.prototype,"steppingFinished",{get:function(){return this.momentum.isFinished(this.elapsedTimeSec)},enumerable:!0,configurable:!0});g.prototype.onControllerStart=function(b){this.beginCamera.copyFrom(b);this.constraintOptions.interactionStartCamera=this.beginCamera;h.prototype.onControllerStart.call(this,b)};g.prototype.stepController=function(b,c){c.copyViewFrom(this.beginCamera);this.elapsedTimeSec+=b;this.momentumStep(this.elapsedTimeSec,
c);l.applyAll(this.view,c,this.constraintOptions)};return g}(k.AnimationController);d.MomentumController=r})},"esri/views/3d/state/controllers/momentum/PanSphericalMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});var g=k.vec3f64.create(),
e=k.vec3f64.create();r=function(b){function c(a,c){a=b.call(this,a,4)||this;a.momentum=c;return a}n(c,b);c.prototype.momentumStep=function(a,b){var c=this.momentum.value1(a);a=this.momentum.value2(a);l.vec3.copy(e,b.eye);l.vec3.normalize(e,e);l.vec3.cross(this.momentum.axis2,e,this.momentum.axis1);h.applyRotationWithTwoAxes(b,g,this.momentum.axis1,c,this.momentum.axis2,a)};return c}(b.MomentumController);d.PanSphericalMomentumController=r})},"esri/views/3d/state/controllers/momentum/RotationMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(c,a,e,g){c=b.call(this,c,2)||this;c.momentum=a;c.axis=k.vec3f64.create();c.center=k.vec3f64.create();l.vec3.copy(c.axis,g);l.vec3.copy(c.center,e);return c}n(c,b);c.prototype.momentumStep=function(b,a){b=this.momentum.value(b);h.applyRotation(a,this.center,g.axisAngle.wrapAxisAngle(this.axis,b))};return c}(b.MomentumController);d.RotationMomentumController=r})},"esri/views/3d/state/controllers/momentum/ZoomPlanarMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ./MomentumController ../../utils/navigationUtils ../../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(c,a,e){c=b.call(this,c,1)||this;c.momentum=a;c.zoomCenter=k.vec3f64.create();l.vec3.copy(c.zoomCenter,e);c.constraintOptions.interactionDirection=k.vec3f64.create();return c}n(c,b);c.prototype.momentumStep=function(b,a){l.vec3.copy(this.constraintOptions.interactionDirection,a.eye);b=this.momentum.valueDelta(0,b);h.applyZoomToPoint(a,this.zoomCenter,b,this.view.state.constraints.minimumPoiDistance);
this.constraintOptions.interactionDirection=g.directionFromTo(this.constraintOptions.interactionDirection,a.eye,this.constraintOptions.interactionDirection)};return c}(b.MomentumController);d.ZoomPlanarMomentumController=r})},"esri/views/3d/state/controllers/momentum/ZoomSphericalMomentumController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ./MomentumController ../../utils/navigationUtils ../../../support/geometryUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function e(c,e,g,d,p){c=a.call(this,c,1)||this;c.momentum=e;c.screenCenter=l.createScreenPointArray();c.sceneCenter=h.vec3f64.create();c.tmpSceneCenter=h.vec3f64.create();c.tmpZoomAxisAngle=f.axisAngle.create();c.sphere=f.sphere.create();k.vec2.copy(c.screenCenter,g);b.vec3.copy(c.sceneCenter,d);c.sphere.radius=p;return c}n(e,a);e.prototype.momentumStep=function(a,b){a=this.momentum.valueDelta(0,a);c.applyZoomOnSphere(this.sphere,
b,a);this.constraintOptions.interactionType=1;g.applyAll(this.view,b,this.constraintOptions);c.sphereOrPlanePointFromScreenPoint(this.sphere,b,this.screenCenter,this.tmpSceneCenter);f.axisAngle.fromPoints(this.sceneCenter,this.tmpSceneCenter,this.tmpZoomAxisAngle);c.applyRotation(b,this.sphere.center,this.tmpZoomAxisAngle);this.constraintOptions.interactionType=4};return e}(e.MomentumController);d.ZoomSphericalMomentumController=r})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});var g=function(b){function c(c,a,e,g,h){c=b.call(this,c,a,e)||this;c.sceneVelocity=g;c.direction=h;return c}n(c,b);c.prototype.value=function(c){return b.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,c)};return c}(h.Momentum);d.PanPlanarMomentum=g;r=function(){function e(c,e,a){void 0===c&&(c=300);void 0===e&&(e=12);void 0===a&&(a=.84);this.minimumInitialVelocity=c;this.stopVelocity=e;this.friction=a;this.time=
new b.FilteredFiniteDifference(.6);this.screen=[new b.FilteredFiniteDifference(.4),new b.FilteredFiniteDifference(.4)];this.scene=[new b.FilteredFiniteDifference(.6),new b.FilteredFiniteDifference(.6),new b.FilteredFiniteDifference(.6)];this.tmpDirection=k.vec3f64.create()}e.prototype.add=function(b,e,a){this.time.hasLastValue&&.015>this.time.computeDelta(a)||(this.screen[0].update(b[0]),this.screen[1].update(b[1]),this.scene[0].update(e[0]),this.scene[1].update(e[1]),this.scene[2].update(e[2]),this.time.update(a))};
e.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};e.prototype.evaluateMomentum=function(){if(!this.screen[0].hasFilteredDelta)return null;var b=this.screen[0].filteredDelta,e=this.screen[1].filteredDelta,b=Math.sqrt(b*b+e*e)/this.time.filteredDelta;return Math.abs(b)<this.minimumInitialVelocity?null:this.createMomentum(b,this.stopVelocity,this.friction)};e.prototype.createMomentum=function(b,
e,a){l.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var c=l.vec3.length(this.tmpDirection);0<c&&l.vec3.scale(this.tmpDirection,this.tmpDirection,1/c);return new g(b,e,a,c/this.time.filteredDelta,this.tmpDirection)};return e}();d.PanPlanarMomentumEstimator=r})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this.gain=
d}d.prototype.update=function(d){if(this.hasLastValue){var k=this.computeDelta(d);this.updateDelta(k)}this.lastValue=d};d.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(d.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,configurable:!0});d.prototype.computeDelta=function(d){return d-
this.lastValue};d.prototype.updateDelta=function(d){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*d:d};return d}();d.FilteredFiniteDifference=r})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b,h){this._initialVelocity=d;this._stopVelocity=b;this._friction=h;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/
this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(d.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});d.prototype.isFinished=function(d){return d>this.duration};Object.defineProperty(d.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});d.prototype.value=function(d){return this.valueFromInitialVelocity(this._initialVelocity,d)};d.prototype.valueDelta=function(d,b){var h=this.value(d);return this.value(d+
b)-h};d.prototype.valueFromInitialVelocity=function(d,b){b=Math.min(b,this.duration);var h=1-this.friction;return d*(Math.pow(h,b)-1)/Math.log(h)};return d}();d.Momentum=r})},"esri/views/navigation/PanSphericalMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ../3d/state/utils/navigationUtils ./FilteredFiniteDifference ./FilteredValue ./Momentum".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var f=function(a){function b(b,c,e,f,g,h,d){void 0===h&&(h=0);b=a.call(this,b,c,e)||this;b.angularVelocity1=f;b.axis1=g;b.angularVelocity2=h;b.axis2=d;return b}n(b,a);b.prototype.value1=function(b){return a.prototype.valueFromInitialVelocity.call(this,this.angularVelocity1,b)};b.prototype.value2=function(b){return a.prototype.valueFromInitialVelocity.call(this,this.angularVelocity2,b)};return b}(c.Momentum);d.PanSphericalMomentum=
f;r=function(){function a(a,c,f){void 0===a&&(a=300);void 0===c&&(c=12);void 0===f&&(f=.84);this.minimumInitialVelocity=a;this.stopVelocity=c;this.friction=f;this.tmpAxis1=b.vec3f64.create();this.tmpAxis2=b.vec3f64.create();this.tmpAngles=l.vec2f64.create();this.time=new g.FilteredFiniteDifference(.3);this.screen=[new g.FilteredFiniteDifference(.4),new g.FilteredFiniteDifference(.4)];this.angle1=new e.FilteredValue(.6);this.angle2=new e.FilteredValue(.6);this.axis1=b.vec3f64.create();this.axis2=b.vec3f64.create();
this.lastScene=b.vec3f64.create()}a.prototype.addMomentumDirectRotation=function(a,b,c,e,f,g){if(this.time.hasLastValue){if(.01>this.time.computeDelta(c))return;e=h.rotationAngleAndAxisDirectRotation(this.lastScene,b,this.tmpAxis2,e,f,g);this.angle2.update(0);1E-5>k.vec3.squaredLength(this.tmpAxis2)?e=0:k.vec3.normalize(this.axis1,this.tmpAxis2);this.angle1.update(e);k.vec3.copy(this.lastScene,b)}this.screen[0].update(a[0]);this.screen[1].update(a[1]);this.time.update(c)};a.prototype.addMomentumPreserveHeading=
function(a,b,c,e,f,g,d){if(this.time.hasLastValue){if(.01>this.time.computeDelta(c))return;h.rotationAnglesAndAxesHeadingPreserving(this.lastScene,b,this.tmpAxis2,this.tmpAxis1,this.tmpAngles,e,f,g,d,!1);1E-5>k.vec3.squaredLength(this.tmpAxis2)?(this.angle1.update(0),this.angle2.update(0)):(this.angle1.update(this.tmpAngles[1]),this.angle2.update(this.tmpAngles[0]),k.vec3.normalize(this.axis1,this.tmpAxis1),k.vec3.normalize(this.axis2,this.tmpAxis2));k.vec3.copy(this.lastScene,b)}this.screen[0].update(a[0]);
this.screen[1].update(a[1]);this.time.update(c)};a.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.angle1.reset();this.angle2.reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,b=this.screen[1].filteredDelta,a=Math.sqrt(a*a+b*b)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};a.prototype.createMomentum=
function(a,b,c){return new f(a,b,c,this.angle1.filteredValue/this.time.filteredDelta,this.axis1,this.angle2.filteredValue/this.time.filteredDelta,this.axis2)};return a}();d.PanSphericalMomentumEstimator=r})},"esri/views/navigation/FilteredValue":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this.gain=d}d.prototype.update=function(d){this.filteredValue=this.hasFilteredValue?(1-this.gain)*this.filteredValue+this.gain*
d:d};d.prototype.reset=function(){this.filteredValue=void 0};Object.defineProperty(d.prototype,"hasFilteredValue",{get:function(){return void 0!==this.filteredValue},enumerable:!0,configurable:!0});return d}();d.FilteredValue=r})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./MomentumEstimator"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function b(b,g,e,c){void 0===b&&(b=3);void 0===
g&&(g=.01);void 0===e&&(e=.95);void 0===c&&(c=12);return d.call(this,b,g,e,c)||this}n(b,d);b.prototype.add=function(b,g){if(this.value.hasLastValue){var e=this.value.lastValue;for(b-=e;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=e+b}d.prototype.add.call(this,b,g)};return b}(l.MomentumEstimator);d.RotationMomentumEstimator=r})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function h(b,e,c,f){void 0===b&&(b=2.5);void 0===e&&(e=.01);void 0===c&&(c=.95);void 0===f&&(f=12);this.minimumInitialVelocity=b;this.stopVelocity=e;this.friction=c;this.maxVelocity=f;this.value=new k.FilteredFiniteDifference(.8);this.time=new k.FilteredFiniteDifference(.3)}h.prototype.add=function(b,e){if(this.time.hasLastValue){if(.01>this.time.computeDelta(e))return;if(this.value.hasFilteredDelta){var c=this.value.computeDelta(b);
0>this.value.filteredDelta*c&&this.value.reset()}}this.time.update(e);this.value.update(b)};h.prototype.reset=function(){this.value.reset();this.time.reset()};h.prototype.evaluateMomentum=function(){if(!this.value.hasFilteredDelta)return null;var b=this.value.filteredDelta/this.time.filteredDelta,b=l.clamp(b,-this.maxVelocity,this.maxVelocity);return Math.abs(b)<this.minimumInitialVelocity?null:this.createMomentum(b,this.stopVelocity,this.friction)};h.prototype.createMomentum=function(g,e,c){return new b.Momentum(g,
e,c)};return h}();d.MomentumEstimator=r})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){function g(e,c,f){return b.call(this,e,c,f)||this}n(g,b);g.prototype.value=function(e){e=b.prototype.value.call(this,e);return Math.exp(e)};g.prototype.valueDelta=function(e,c){var f=b.prototype.value.call(this,e);
e=b.prototype.value.call(this,e+c);return Math.exp(e-f)};return g}(l.Momentum);d.ZoomMomentum=b;r=function(h){function g(b,c,f,a){void 0===b&&(b=2.5);void 0===c&&(c=.01);void 0===f&&(f=.95);void 0===a&&(a=12);return h.call(this,b,c,f,a)||this}n(g,h);g.prototype.add=function(b,c){h.prototype.add.call(this,Math.log(b),c)};g.prototype.createMomentum=function(e,c,f){return new b(e,c,f)};return g}(k.MomentumEstimator);d.ZoomMomentumEstimator=r})},"esri/views/3d/state/controllers/local/PinchAndPanController":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/screenUtils ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../camera/constraintUtils ../../../input/util ../InteractiveController ../momentum/PanPlanarMomentumController ../momentum/RotationMomentumController ../momentum/ZoomPlanarMomentumController ../../utils/navigationUtils ../../../support/geometryUtils ../../../support/mathUtils ../../../webgl-engine/lib/Camera ../../../../navigation/PanPlanarMomentumEstimator ../../../../navigation/RotationMomentumEstimator ../../../../navigation/ZoomMomentumEstimator".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){Object.defineProperty(d,"__esModule",{value:!0});var m;(function(a){a[a.Vertical=0]="Vertical";a[a.Horizontal=1]="Horizontal"})(m=d.PanMode||(d.PanMode={}));var u=b.vec3f64.fromValues(0,0,1),z=16/180*Math.PI;r=function(e){function d(a,c){var f=e.call(this)||this;f.view=a;f.intersectionHelper=c;f.rotationValueSmooth=new g.ExponentialFalloff(.05);f.scalingValueSmooth=new g.ExponentialFalloff(.05);f.planeHorizontal=q.plane.create();f.planeVertical=q.plane.create();
f.rotationMomentumEstimator=new x.RotationMomentumEstimator;f.panMomentumEstimator=new y.PanPlanarMomentumEstimator(300,12,.9);f.zoomMomentumEstimator=new w.ZoomMomentumEstimator;f.beginCenter=b.vec3f64.create();f.tmpPoints=[];f.beginCenterScreen=l.createScreenPointArray();f.tmpCentroid3d=b.vec3f64.create();f.tmpCentroid2d=l.createScreenPointArray();f.tmp2d=l.createScreenPointArray();f.constraintOptions={selection:15,interactionType:0,interactionFactor:0,interactionStartCamera:new t,interactionDirection:null,
tiltMode:0};return f}n(d,e);d.prototype.begin=function(a){if(this.active){this.beginRadius=a.radius;this.pointerCount=a.pointers.size;this.beginAngle=a.angle;this.rotationValueSmooth.reset();this.scalingValueSmooth.reset();l.screenPointObjectToArray(a.center,this.beginCenterScreen);q.plane.fromNormalAndOffset(u,0,this.planeHorizontal);var c=b.vec3f64.create();this.intersectionHelper.intersectScreenFreePointFallback(this.beginCenterScreen,c);var e=b.vec3f64.create();k.vec3.negate(e,this.beginCamera.viewForward);
var f=b.vec3f64.create();k.vec3.copy(f,u);var g=k.vec3.dot(e,f);this.panMode=v.asin(0>g?-g:g)>=z?m.Horizontal:m.Vertical;q.plane.setOffsetFromPoint(this.planeHorizontal,c,this.planeHorizontal);this.beginCamera.aboveGround||q.plane.negate(this.planeHorizontal,this.planeHorizontal);this.panMode===m.Vertical?(k.vec3.scale(f,f,g),k.vec3.subtract(this.planeVertical,e,f),k.vec3.normalize(this.planeVertical,this.planeVertical),q.plane.setOffsetFromPoint(this.planeVertical,c,this.planeVertical),this.computePlanePoints(a.pointers,
this.planeVertical,this.beginCamera,this.tmpPoints)):this.computePlanePoints(a.pointers,this.planeHorizontal,this.beginCamera,this.tmpPoints);p.centroid(this.tmpPoints,this.beginCenter);this.constraintOptions.interactionStartCamera.copyFrom(this.beginCamera)}};d.prototype.update=function(a){if(this.active){this.currentCamera.copyFrom(this.beginCamera);var b=1<a.pointers.size,c=this.panMode===m.Horizontal?this.planeHorizontal:this.planeVertical,e=this.beginCenter;if(b){var f=this.beginRadius/a.radius,
g=.001875*Math.min(Math.max(a.radius,40),120);this.scalingValueSmooth.gain=g;this.scalingValueSmooth.update(f);p.applyZoomToPoint(this.currentCamera,e,this.scalingValueSmooth.value,this.view.state.constraints.minimumPoiDistance);this.zoomMomentumEstimator.add(this.scalingValueSmooth.value,.001*a.timestamp);this.constraintOptions.interactionType=1;this.constraintOptions.interactionFactor=h.pixelDistanceToInteractionFactor(Math.abs(a.radius-this.beginRadius));h.applyAll(this.view,this.currentCamera,
this.constraintOptions)}this.computePlanePoints(a.pointers,c,this.currentCamera,this.tmpPoints);p.centroid(this.tmpPoints,this.tmpCentroid3d);l.screenPointObjectToArray(a.center,this.tmpCentroid2d);p.applyPanPlanar(this.currentCamera,e,this.tmpCentroid3d);this.panMomentumEstimator.add(this.tmpCentroid2d,this.tmpCentroid3d,.001*a.timestamp);this.constraintOptions.interactionType=4;this.constraintOptions.interactionFactor=h.pixelDistanceToInteractionFactor(this.beginCenterScreen,this.tmpCentroid2d);
h.applyAll(this.view,this.currentCamera,this.constraintOptions);b&&(b=this.planeHorizontal,c=this.rotationValueSmooth.value,f=p.normalizeRotationDelta(a.angle-c),g=.00125*Math.min(Math.max(a.radius,40),120),this.rotationValueSmooth.gain=g,this.rotationValueSmooth.update(c+f),g=this.rotationValueSmooth.value-this.beginAngle,this.rotationMomentumEstimator.add(g,.001*a.timestamp),p.applyRotation(this.currentCamera,e,q.axisAngle.wrapAxisAngle(b,g)),this.constraintOptions.interactionType=2,this.constraintOptions.interactionFactor=
h.pixelDistanceToInteractionFactor(Math.abs(a.radius*g)),h.applyAll(this.view,this.currentCamera,this.constraintOptions));this.currentCamera.markViewDirty()}};d.prototype.end=function(b){b.pointers.size===this.pointerCount&&this.update(b);this.finishController();return(b=this.zoomMomentumEstimator.evaluateMomentum())?new a.ZoomPlanarMomentumController(this.view,b,this.beginCenter):(b=this.rotationMomentumEstimator.evaluateMomentum())?new f.RotationMomentumController(this.view,b,this.beginCenter,this.planeHorizontal):
(b=this.panMomentumEstimator.evaluateMomentum())?new c.PanPlanarMomentumController(this.view,b):null};d.prototype.computePlanePoints=function(a,c,e,f){f.length=a.size;var g=this.tmp2d,h=0;a.forEach(function(a){g[0]=a.x;g[1]=a.y;void 0===f[h]&&(f[h]=b.vec3f64.create());p.intersectPlaneFromScreenPoint(c,e,g,f[h]);h+=1});return f};return d}(e.InteractiveController);d.PinchAndPanController=r})},"esri/views/3d/input/handlers/PointerDownCancelAnimation":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function b(b,g){var e=d.call(this,!0)||this;e.view=b;e.registerIncoming("pointer-down",g,function(b){return e.view.state.stopActiveCameraController()});return e}n(b,d);return b}(l.InputHandler);d.PointerDownCancelAnimation=r})},"esri/views/3d/input/handlers/SingleKeyResetHeading":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(r,
d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function b(b,g,e){e=d.call(this,"esri.views.3d.input.handlers.SingleKeyResetHeading",g,e)||this;e.view=b;e.key=g;return e}n(b,d);b.prototype.activate=function(){this.view.goTo({heading:0})};return b}(l.SingleKey);d.SingleKeyResetHeading=r})},"esri/views/3d/input/handlers/SingleKey":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,d,n,l){Object.defineProperty(d,
"__esModule",{value:!0});r=function(d){function b(b,g,e){var c=d.call(this,!0)||this;c.key=g;c.registerIncoming("key-down",e,function(b){return c._handleKeyDown(b)});return c}n(b,d);b.prototype._handleKeyDown=function(b){b.data.key===this.key&&(this.activate(),b.stopPropagation())};return b}(l.InputHandler);d.SingleKey=r})},"esri/views/3d/input/handlers/SingleKeyResetTilt":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./SingleKey"],function(r,d,n,l){Object.defineProperty(d,
"__esModule",{value:!0});r=function(d){function b(b,g,e){e=d.call(this,"esri.views.3d.input.handlers.SingleKeyResetTilt",g,e)||this;e.view=b;e.key=g;return e}n(b,d);b.prototype.activate=function(){this.view.goTo({tilt:0})};return b}(l.SingleKey);d.SingleKeyResetTilt=r})},"esri/views/3d/input/handlers/TwoFingerTilt":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../state/controllers/RotateController ../../../input/InputHandler".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function g(e,c){void 0===c&&(c=!1);var f=b.call(this,!0)||this;f.view=e;f.invert=c;f.registerIncoming("vertical-two-finger-drag",function(a){return f.handleTwoFinger(a)});return f}n(g,b);g.prototype.handleTwoFinger=function(b){var c=l.createScreenPointArray(0,b.data.delta*(this.invert?-1:1));switch(b.data.action){case "begin":this.cameraController&&(this.cameraController.end(),this.cameraController=null);this.cameraController=
new k.RotateController(this.view,this.view.sceneIntersectionHelper,"center");this.view.state.switchCameraController(this.cameraController);this.cameraController.begin(c);break;case "update":this.cameraController&&this.cameraController.update(c);break;case "end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}};return g}(b.InputHandler);d.TwoFingerTilt=r})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});var g=n("trident"),e=n("edge"),c=n("chrome"),f=n("ff"),a=n("safari");r=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;k.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new h.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",
a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(p[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&p[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(p[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(t){}};d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=l.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,c){var e=b.eventKey(c);e&&"key-up"===a&&this._keyDownState.delete(e);c={native:c,key:e,repeat:e&&this._keyDownState.has(e)};e&&"key-down"===a&&this._keyDownState.add(c.key);this._callback(a,c)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(b,h){h.preventDefault();var d=h.deltaY;switch(h.deltaMode){case 0:if(g||e)d=d/document.documentElement.clientHeight*600;break;case 1:d*=30;break;case 2:d*=900}g||e?d*=.7:c||a?d*=.6:f&&(d*=1.375);var k=Math.abs(d);
100<k&&(d=d/k*200/(1+Math.exp(-.02*(k-100))));h=this._updateNormalizedPointerLikeEvent(h,{native:h,x:0,y:0,deltaY:d});this._callback(b,h)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=
r;var p={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function r(a,b){b=b||Object.create(null);var e=document.createEvent("Event");
e.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var g;a<c.length;a++)g=c[a],e[g]=b[g]||f[a];e.buttons=b.buttons||0;a=0;a=b.pressure&&e.buttons?b.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=b.pointerId||0;e.width=b.width||0;e.height=b.height||0;e.pressure=a;e.tiltX=b.tiltX||0;e.tiltY=b.tiltY||0;e.twist=b.twist||0;e.tangentialPressure=b.tangentialPressure||0;e.pointerType=b.pointerType||"";e.hwTimestamp=b.hwTimestamp||0;e.isPrimary=b.isPrimary||!1;return e}function d(){this.array=
[];this.size=0}function n(a,b,c,e){this.addCallback=a.bind(e);this.removeCallback=b.bind(e);this.changedCallback=c.bind(e);B&&(this.observer=new B(this.mutationWatcher.bind(this)))}function l(a){return"body /shadow-deep/ "+k(a)}function k(a){return'[touch-action\x3d"'+a+'"]'}function b(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function h(){if(N){F.forEach(function(a){String(a)===a?(E+=k(a)+b(a)+"\n",L&&(E+=l(a)+b(a)+"\n")):(E+=a.selectors.map(k)+b(a.rule)+"\n",L&&(E+=a.selectors.map(l)+
b(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=E;document.head.appendChild(a)}}function g(a){if(!y.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function e(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var c="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),f=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],a=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,e){a.call(b,c,e,this)},this)}};var p="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
q=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],v={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!==typeof SVGElementInstance,y={pointermap:new a,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.register.call(e,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.unregister.call(e,a)},contains:function(a,b){try{return a.contains(b)}catch(na){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new r(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,e=0;e<p.length;e++)c=p[e],b[c]=a[c]||q[e],t&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in v))return b},propagate:function(a,
b,c){for(var e=a.target,f=[];null!=e&&e!==document&&!e.contains(a.relatedTarget);)if(f.push(e),e=e.parentNode,!e)return;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var e=new r("gotpointercapture");e.pointerId=
a;e._target=b;c||this.asyncDispatchEvent(e)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var e=new r("lostpointercapture");e.pointerId=a;e._target=c;b||this.asyncDispatchEvent(e)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};y.boundHandler=y.eventHandler.bind(y);var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var e=a.elementFromPoint(b,
c),f;for(f=this.targetingShadow(e);f;){if(a=f.elementFromPoint(b,c))return e=this.targetingShadow(a),this.searchRoot(e,b,c)||a;f=this.olderShadow(f)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),
m=Array.prototype.map.call.bind(Array.prototype.map),u=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),B=window.MutationObserver||window.WebKitMutationObserver,C={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,C)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(u(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=m(a,this.findElements,this);b.push(z(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var F=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",N=window.PointerEvent||window.MSPointerEvent,L=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,K=y.pointermap,O=[1,4,2,8,16],I=!1;try{I=1===(new MouseEvent("test",{buttons:1})).buttons}catch(la){}var H={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){y.listen(a,
this.events)},unregister:function(a){y.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var e=0,f=b.length,g;e<f&&(g=b[e]);e++){var h=Math.abs(a-g.y);if(25>=Math.abs(c-g.x)&&25>=h)return!0}},prepareEvent:function(a){var b=y.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=K.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=K.get(this.POINTER_ID),c=this.prepareEvent(a);I||(c.buttons=O[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);K.set(this.POINTER_ID,a);b&&0!==b.buttons?y.move(c):y.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;K.set(this.POINTER_ID,a);y.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=K.get(this.POINTER_ID),c=this.prepareEvent(a);if(!I){var e=O[c.button];c.buttons=b?b.buttons&~e:0;a.buttons=c.buttons}K.set(this.POINTER_ID,a);c.buttons&=~O[c.button];0===c.buttons?y.up(c):y.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;K.set(this.POINTER_ID,a);y.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;y.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);y.cancel(a);this.deactivateMouse()},deactivateMouse:function(){K.delete(this.POINTER_ID)}},S=y.captureInfo,P=x.findTarget.bind(x),V=x.allShadows.bind(x),T=y.pointermap,Z,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){Z.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,y.listen(a,this.events),V(a).forEach(function(a){a._scrollType=c;y.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;y.unlisten(a,this.events);V(a).forEach(function(a){a._scrollType=void 0;y.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),e=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);e&&b?(a._scrollType=e,V(a).forEach(function(a){a._scrollType=e},this)):b?this.elementRemoved(a):
e&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===T.size||1===T.size&&T.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=y.cloneEvent(a),e=c.pointerId=a.identifier+2;c.target=S[e]||P(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var e;a<c.length;a++)e=c[a],b.call(this,this.touchToPointer(e))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,e=a.length,f;c<e&&(f=a[c]);c++)if(f.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(T.size>=b.length){var c=[];T.forEach(function(a,e){1===e||this.findTouch(b,e-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){T.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});y.enterOver(a);y.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=T.get(a.pointerId);if(b){var c=b.out,e=b.outTarget;y.move(a);c&&e!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=e,c.target=e,a.target?(y.leaveOut(c),y.enterOver(a)):(a.target=e,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(y.up(a),y.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){y.cancel(a);y.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){T.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=H.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};Z=new n(Q.elementAdded,Q.elementRemoved,Q.elementChanged,Q);var J=y.pointermap,R=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,U={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){y.listen(a,this.events)},unregister:function(a){y.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;R&&(b=y.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){J.delete(a)},MSPointerDown:function(a){J.set(a.pointerId,a);a=this.prepareEvent(a);y.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);y.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);y.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);y.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);y.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);y.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=y.makeEvent("lostpointercapture",a);y.dispatchEvent(a)},MSGotPointerCapture:function(a){a=y.makeEvent("gotpointercapture",a);y.dispatchEvent(a)}},X,ca,G;window.navigator.msPointerEnabled?(X=function(a){g(a);e(this);0!==y.pointermap.get(a).buttons&&(y.setCapture(a,this,!0),this.msSetPointerCapture(a))},ca=function(a){g(a);y.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(X=function(a){g(a);e(this);0!==y.pointermap.get(a).buttons&&y.setCapture(a,this)},ca=function(a){g(a);y.releaseCapture(a)});G=function(a){return!!y.captureInfo[a]};var Y=window.PointerEvent||window.MSPointerEvent;return{dispatcher:y,Installer:n,PointerEvent:r,PointerMap:a,targetFinding:x,applyGlobal:function(){h();window.PointerEvent||(window.PointerEvent=r,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),y.registerSource("ms",U)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),y.registerSource("mouse",H),void 0!==window.ontouchstart&&y.registerSource("touch",Q)),y.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:X},releasePointerCapture:{value:ca},hasPointerCapture:{value:G}})},applyLocal:function(a){Y||(window.PointerEvent||(window.navigator.msPointerEnabled?
y.registerSource("ms",U):(y.registerSource("mouse",H),void 0!==window.ontouchstart&&y.registerSource("touch",Q)),y.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=X.bind(a),a.releasePointerCapture=ca.bind(a),a.hasPointerCapture=G.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(r,d,n,l){Object.defineProperty(d,
"__esModule",{value:!0});d.primaryKey=l("mac")?"Meta":"Ctrl";var k={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(r=48;58>r;r++)k[r]=String.fromCharCode(r);for(r=1;25>r;r++)k[111+r]="F"+r;for(r=65;91>r;r++)k[r]=[String.fromCharCode(r+32),String.fromCharCode(r)];d.eventKey=function(b){if(void 0!==b.key)return n.eventKey(b);var h=k[b.keyCode];return Array.isArray(h)?b.shiftKey?
h[1]:h[0]:h};d.isSystemModifier=function(b){switch(b){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function h(g,e){var c=this;this.element=g;this.input=e;this.handleGamepadConnectedEvent=function(b){c.handleGamepadConnected(b.gamepad)};
this.handleGamepadDisconnectedEvent=function(e){e=e.gamepad;var a=c.inputDevices[e.index];a&&(c.emitGamepadEvent(e,b.extractState(a),!1),c.inputDevices[e.index]=void 0,c.latestUpdate[e.index]=void 0,c.input.gamepad.devices.remove(a))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return c.handleGamepadConnected(b)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}h.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(h.prototype,"onEvent",{set:function(b){this.callback=b},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"pollingEnabled",{set:function(b){this.supported&&
(b?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});h.prototype.handleGamepadConnected=function(b){var e=new k(b);"unknown"!==e.deviceType&&(this.inputDevices[b.index]=e,this.input.gamepad.devices.add(e))};h.prototype.startPolling=function(){var b=this;null==this.frameTask&&(this.frameTask=l.addFrameTask({update:function(){return b.readGamepadState()}}))};h.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};h.prototype.readGamepadState=function(){var g=this,e=document.hasFocus(),c=this.element.contains(document.activeElement),f="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!c;this.forEachGamepad(function(a){var c=g.inputDevices[a.index];if(c){var e=g.latestUpdate[a.index],c=b.extractState(c),h=f||b.stateIdle(c);e&&(e.timestamp===a.timestamp||!e.active&&h||b.stateEqual(e.state,c))||g.emitGamepadEvent(a,c,!h)}})};h.prototype.forEachGamepad=function(b){for(var e=
window.navigator.getGamepads(),c=0;c<e.length;c++){var f=e[c];this.validate(f)&&b(f)}};h.prototype.emitGamepadEvent=function(b,e,c){var f=this.latestUpdate[b.index];if((f=f&&f.active)||c)this.latestUpdate[b.index]={timestamp:b.timestamp,state:e,active:c},this.callback&&this.callback({device:this.inputDevices[b.index],state:e,action:!f&&c?"start":f&&c?"update":"end"})};h.prototype.validate=function(b){if(!b||!b.connected)return!1;for(var e=0;e<b.axes.length;e++)if(isNaN(b.axes[e]))return!1;return!0};
return h}();d.GamepadSource=r})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../3d/support/mathUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var k=d.native;return{buttons:k.buttons.map(function(b){return b.pressed?b.value?b.value:1:0}),axes:k.axes.map(function(b){var h=d.axisThreshold,g=Math.abs(b);b=g<h?0:n.sign(b)*(g-h)/(1-h);return b})}};d.stateEqual=function(d,k){if(d.axes.length!==k.axes.length||d.buttons.length!==
k.buttons.length)return!1;for(var b=0;b<d.axes.length;b++)if(d.axes[b]!==k.axes[b])return!1;for(b=0;b<d.buttons.length;b++)if(d.buttons[b]!==k.buttons[b])return!1;return!0};d.stateIdle=function(d){for(var k=0;k<d.axes.length;k++)if(0!==d.axes[k])return!1;for(k=0;k<d.buttons.length;k++)if(0!==d.buttons[k])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});var a=b.getLogger("esri.views.input.InputManager");r=function(b){function d(a,c){a=b.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=e.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}n(d,b);d.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=b;this._recognizers||(this._recognizers=c.defaults.map(function(a){return new a}));return{}};d.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});
d.prototype.installHandlers=function(b,c){var e=this;if(this._nameToGroup[b])a.error("There is already an InputHandler group registered under the name `"+b+"`");else if(0===c.length)a.error("Can't register a group of zero handlers");else{var f={name:b,handlers:c.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[b]=f;b=function(a){var b=f.handlers[a];g._handlers.push(b);b.handler.onInstall({updateDependencies:function(){e.updateDependencies()},
emit:function(a,c,f,g){e._emitInputEvent(b.priorityIndex,a,c,f,g)},setPointerCapture:function(a,c){e._setPointerCapture(f,b,a,c)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){e.notifyChange("hasPendingInputs")}})};var g=this;for(c=f.handlers.length-1;0<=c;c--)b(c);this.updateDependencies()}};d.prototype.uninstallHandlers=function(b){var c=this._nameToGroup[b];c?(c.handlers.forEach(function(a){a.removed=!0;
a.uninstallCallback()}),delete this._nameToGroup[b],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):a.error("There is no InputHandler group registered under the name `"+b+"`")};d.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};d.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var f=this._handlers[c];f.priorityIndex=c;this._handlersPriority.push(f)}this._handlersPriority=
this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){f=this._handlersPriority[c];f.priorityIndex=c;var g=f.handler.hasSideEffects;if(!g)for(var h=0,d=f.handler.outgoingEventTypes;h<d.length;h++)if(a.has(d[h])){g=!0;break}if(g)for(h=0,d=f.handler.incomingEventMatches;h<d.length;h++){var k=d[h];a.add(k.eventType);for(var p=0,k=k.keyModifiers;p<k.length;p++){var l=k[p];e.isSystemModifier(l)||b.add(l)}}f.active=g}this._sourceEvents=a;this._keyModifiers=b;
0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};d.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};d.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
b,b.native?b.native.timestamp:void 0)};d.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var e=!1,f=function(){if(!e){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;e=!0}},g=function(a,b){b&&!c._activeKeyModifiers.has(a)?(f(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(f(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var h=b.key;this._keyModifiers.has(h)&&g(h,"key-down"===a)}a=b.native;g("Alt",!(!a||
!a.altKey));g("Ctrl",!(!a||!a.ctrlKey));g("Shift",!(!a||!a.shiftKey));g("Meta",!(!a||!a.metaKey));g("Primary",this._activeKeyModifiers.has(this.primaryKey))}};d.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new f.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};d.prototype._setPointerCapture=
function(a,b,c,e){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);e?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};d.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};
d.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,a,b,c)};d.prototype._emitInputEvent=function(a,b,c,e,f){e=void 0!==e?e:this._currentPropagation?this._currentPropagation.timestamp:h();b=new p(b,c,e,f||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};d.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,
timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var e=0;e<b.length;e++){var f=b[e];a.currentHandler.active&&a.currentHandler.eventCallback(f);f.shouldStopPropagation()||c.push(f)}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};d.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,e=a.handler.incomingEventMatches;c<e.length;c++)for(var f=e[c],g=function(a){if(f.eventType!==a.eventType)return"continue";var b=f.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===f.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:f.keyModifiers.length>a.keyModifiers.length?-1:1}},h=0,d=b.handler.incomingEventMatches;h<d.length;h++){var k=
g(d[h]);if("object"===typeof k)return k.value}return a.priorityIndex>b.priorityIndex?-1:1};d.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var e=a[c],f=0;f<b.length&&0<=this._compareHandlerPriority(e,b[f]);)f++;b.splice(f,0,e)}return b};Object.defineProperty(d.prototype,"debug",{get:function(){var a=this,b=function(b){var c=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=c};return{injectEvent:function(c,e){b(function(){a._onEventReceived(c,
e)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});l([g.property({readOnly:!0})],d.prototype,"hasPendingInputs",null);l([g.property({readOnly:!0})],d.prototype,"latestPointerType",void 0);return d=l([g.subclass("esri.views.input.InputManager")],d)}(g.declared(k));d.InputManager=r;var p=function(){function a(a,b,c,e){this.type=a;this.data=b;this.timestamp=c;this.modifiers=e;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=
function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});d.defaults=[l.PointerClickHoldAndDrag,k.SingleAndDoubleClick,n.Drag,b.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),
function(r,d,n,l,k,b){function h(c){var a=[];c.forEach(function(b){a.push(l.createScreenPoint(b.event.x,b.event.y))});return b.fitCircleLSQ(a)}function g(b){var a=h(b),e=0;b.forEach(function(b){for(var f=c(b,a),f=f-b.lastAngle;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=b.lastAngle+f;b.lastAngle=f;e+=f-b.initialAngle});e/=b.size||1;return{angle:e,radius:a.radius,center:a.center}}function e(b){var a=new Map;b.forEach(function(b,c){return a.set(c,b.event)});return a}function c(b,a){b=b.event;
return Math.atan2(b.y-a.center.y,b.x-a.center.x)}Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function a(){var a=b.call(this,!1)||this;a.startStateModifiers=new Set;a.activePointerMap=new Map;a.isDragging=!1;a.drag=a.registerOutgoing("drag");a.registerIncoming("pointer-drag",a.handlePointerDrag.bind(a));a.registerIncoming("pointer-up",a.handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-capture-lost",a.handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-cancel",
a.handlePointerUpAndPointerLost.bind(a));return a}n(a,b);a.prototype.createPayload=function(a,b,c,f){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:f,pointers:e(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};a.prototype.addPointer=function(a){var b=a.native.pointerId,e=g(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(b,a);b=c(a,h(this.activePointerMap));a.initialAngle=
b;a.lastAngle=b;this.updatePointerAngles(e)};a.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};a.prototype.removePointer=function(a){var b=g(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};a.prototype.updatePointerAngles=function(a){var b=g(this.activePointerMap);this.activePointerMap.forEach(function(e){e.initialAngle=c(e,b)-a;e.lastAngle=c(e,b)-a})};a.prototype.emitEvent=
function(a,b,c){var e=g(this.activePointerMap);this.drag.emit(this.createPayload(a,b,e,c),void 0,this.startStateModifiers)};a.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,c),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};a.prototype.handlePointerDrag=function(a){var b=
a.data,c=b.currentEvent,e=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),this.emitEvent("update",c,e)):(this.addPointer(c),this.emitEvent("added",c,e)):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",c,e))}};return a}(k.InputHandler);d.Drag=r;(function(b){b[b.Left=
0]="Left";b[b.Middle=1]="Middle";b[b.Right=2]="Right";b[b.Back=3]="Back";b[b.Forward=4]="Forward";b[b.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,k){return Math.abs(k.x-d.x)+Math.abs(k.y-d.y)};d.euclideanDistance=function(d,k){var b=k.x-d.x;d=k.y-d.y;return Math.sqrt(b*b+d*d)};d.fitCircleLSQ=
function(d,k){k?(k.radius=0,k.center.x=0,k.center.y=0):k={radius:0,center:n.createScreenPoint()};if(0===d.length)return k;if(1===d.length)return k.center.x=d[0].x,k.center.y=d[0].y,k;if(2===d.length){var b=d[0];d=d[1];var h=[d.x-b.x,d.y-b.y],g=h[0],h=h[1];k.radius=Math.sqrt(g*g+h*h)/2;k.center.x=(b.x+d.x)/2;k.center.y=(b.y+d.y)/2;return k}for(var e=0,c=0,f=0;f<d.length;f++)e+=d[f].x,c+=d[f].y;for(var e=e/d.length,c=c/d.length,a=d.map(function(a){return a.x-e}),l=d.map(function(a){return a.y-c}),q=
b=k=0,v=0,t=g=0,f=h=0;f<a.length;f++){var y=a[f],x=l[f],w=y*y,m=x*x;k+=w;b+=m;q+=y*x;v+=w*y;g+=m*x;t+=y*m;h+=x*w}f=k;a=q;l=b;v=.5*(v+t);g=.5*(g+h);h=f*l-q*a;t=(v*l-g*a)/h;g=(f*g-q*v)/h;h=n.createScreenPoint(t+e,g+c);return{radius:Math.sqrt(t*t+g*g+(k+b)/d.length),center:h}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,
"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};r=function(h){function g(b,c,f,a,g){void 0===b&&(b=d.DefaultParameters.maximumClickDelay);void 0===c&&(c=d.DefaultParameters.movementUntilMouseDrag);void 0===f&&(f=d.DefaultParameters.movementUntilTouchDrag);void 0===a&&(a=d.DefaultParameters.holdDelay);void 0===g&&(g=l.default);var e=h.call(this,!1)||this;e.maximumClickDelay=b;e.movementUntilMouseDrag=c;e.movementUntilTouchDrag=
f;e.holdDelay=a;e._clock=g;e._pointerState=new Map;e._pointerDrag=e.registerOutgoing("pointer-drag");e._immediateClick=e.registerOutgoing("immediate-click");e._pointerHold=e.registerOutgoing("hold");e.registerIncoming("pointer-down",e._handlePointerDown.bind(e));e.registerIncoming("pointer-up",function(a){e._handlePointerLoss(a,"pointer-up")});e.registerIncoming("pointer-capture-lost",function(a){e._handlePointerLoss(a,"pointer-capture-lost")});e.registerIncoming("pointer-cancel",function(a){e._handlePointerLoss(a,
"pointer-cancel")});e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(e));e._moveHandle.pause();return e}n(g,h);g.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.holdTimeout&&(b.holdTimeout.remove(),b.holdTimeout=null)});h.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=function(b){var c=this,e=b.data,a=e.native.pointerId,g=null;0===this._pointerState.size&&(g=this._clock.setTimeout(function(){var e=c._pointerState.get(a);e&&
(e.isDragging||(c._pointerHold.emit(e.previousEvent,void 0,b.modifiers),e.holdEmitted=!0),e.holdTimeout=null)},this.holdDelay));g={startEvent:e,previousEvent:e,startTimestamp:b.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:g,modifiers:new Set};this._pointerState.set(a,g);this.startCapturingPointer(e.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(b)};g.prototype._createPointerDragData=function(b,c,f){return{action:b,startEvent:c.startEvent,previousEvent:c.previousEvent,
currentEvent:f}};g.prototype._handlePointerMove=function(e){var c=e.data,f=this._pointerState.get(c.native.pointerId);f&&(f.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",f,c),void 0,f.modifiers):b.euclideanDistance(c,f.startEvent)>("touch"===c.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(e),f.previousEvent=c)};g.prototype.startDragging=function(b){var c=this,e=b.data,a=e.native.pointerId;this._pointerState.forEach(function(f){null!=
f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null);f.isDragging||(f.modifiers=b.modifiers,f.isDragging=!0,a===f.startEvent.native.pointerId?c._pointerDrag.emit(c._createPointerDragData("start",f,e)):c._pointerDrag.emit(c._createPointerDragData("start",f,f.previousEvent),b.timestamp))})};g.prototype._handlePointerLoss=function(b,c){var e=b.data,a=e.native.pointerId,g=this._pointerState.get(a);g&&(null!=g.holdTimeout&&(g.holdTimeout.remove(),g.holdTimeout=null),g.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
g,"pointer-up"===c?e:g.previousEvent),void 0,g.modifiers):"pointer-up"===c&&g.downButton===e.native.button&&b.timestamp-g.startTimestamp<=this.maximumClickDelay&&!g.holdEmitted&&this._immediateClick.emit(e),this._pointerState.delete(a),this.stopCapturingPointer(e.native),0===this._pointerState.size&&this._moveHandle.pause())};return g}(k.InputHandler);d.PointerClickHoldAndDrag=r})},"esri/core/clock":function(){define(["require","exports","./global"],function(r,d,n){function l(d){return{setTimeout:function(b,
h){var g=d.setTimeout(b,h);return{remove:function(){return d.clearTimeout(g)}}}}}Object.defineProperty(d,"__esModule",{value:!0});d.wrap=l;d.default=l(n)})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};r=function(b){function e(c,e,a,g,h){void 0===c&&(c=d.DefaultParameters.maximumDoubleClickDelay);void 0===e&&(e=d.DefaultParameters.maximumDoubleClickDistance);void 0===a&&(a=d.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=d.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=l.default);var f=b.call(this,!1)||this;f.maximumDoubleClickDelay=c;f.maximumDoubleClickDistance=e;f.maximumDoubleTouchDelay=a;f.maximumDoubleTouchDistance=
g;f._clock=h;f._pointerState=new Map;f._click=f.registerOutgoing("click");f._doubleClick=f.registerOutgoing("double-click");f.registerIncoming("immediate-click",f._handleImmediateClick.bind(f));f.registerIncoming("pointer-drag",f._handlePointerDrag.bind(f));f.registerIncoming("drag",f._handleDrag.bind(f));return f}n(e,b);e.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(e.prototype,
"hasPendingInputs",{get:function(){return!k.everyMap(this._pointerState,function(b){return null==b.doubleClickTimeout})},enumerable:!0,configurable:!0});e.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};e.prototype._handleImmediateClick=function(b){var c=b.data,a=this._pointerId(c),e=this._pointerState.get(a);if(e){var g="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;h.manhattanDistance(e.event.data,
c)>g?(this._clearDoubleClickTimeout(a,!0),this._startClick(b)):(this._clearDoubleClickTimeout(a,!1),this._doubleClick.emit(c,void 0,e.event.modifiers))}else this._startClick(b)};e.prototype._startClick=function(b){var c=this,a=this._pointerId(b.data);this._pointerState.set(a,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return c._doubleClickTimeoutExceeded(a)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
e.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};e.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};e.prototype._clearDoubleClickTimeout=function(b,e){var a=this._pointerState.get(b);a&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null,e&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};e.prototype._doubleClickTimeoutExceeded=
function(b){var c=this._pointerState.get(b);this._click.emit(c.event.data,void 0,c.event.modifiers);c.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return e}(b.InputHandler);d.SingleAndDoubleClick=r})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.everyMap=Map.prototype.entries?function(d,l){d=d.entries();for(var k=d.next();!k.done;k=d.next())if(!1===l(k.value[1],k.value[0]))return!1;
return!0}:function(d,l){var k=!0;d.forEach(function(b,h){k&&(k=!1!==l(b,h))});return k}})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function h(g,e){void 0===g&&(g=20);void 0===e&&(e=40);var c=b.call(this,!1)||this;c._threshold=g;c._maxDelta=e;c.state="ready";c.emittedArtificalEnd2=!1;
c._vertical=c.registerOutgoing("vertical-two-finger-drag");c._artificalDrag=c.registerOutgoing("drag");c.dragEventSeparator=new l.DragEventSeparator({start:function(b,a){return c.observeStart(b,a)},update:function(b,a,e){return c.observeUpdate(b,a,e)},end:function(b,a){return c.observeEnd(b,a)}});c.registerIncoming("drag",function(b){return c.dragEventSeparator.handle(b)});return c}n(h,b);Object.defineProperty(h.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});
h.prototype.observeStart=function(b,e){1===b&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),e.stopPropagation());this.state=2===b?"ready":"failed"};h.prototype.observeUpdate=function(b,e,c){"failed"!==this.state&&2===b&&("active"===
this.state?(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"update"}),e.stopPropagation()):this.checkMovementWithinLimits(e.data,c.data)?this.checkVerticalThresholdReached(e.data,c.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=e.data.center,this._artificalDrag.emit({action:"end",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,
angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),e.stopPropagation()):this.state="failed")};h.prototype.observeEnd=function(b,e){"active"===this.state&&(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",e.stopPropagation())};h.prototype.checkMovementWithinLimits=function(b,e){var c=-Infinity,f=Infinity,a=-Infinity,g=Infinity;
e.pointers.forEach(function(b){c=Math.max(c,b.x);f=Math.min(f,b.x);a=Math.max(a,b.y);g=Math.min(g,b.y)});var h=-Infinity,d=Infinity,k=-Infinity,l=Infinity;b.pointers.forEach(function(a){h=Math.max(h,a.x);d=Math.min(d,a.x);k=Math.max(k,a.y);l=Math.min(l,a.y)});return Math.abs(b.center.x-e.center.x)<this._threshold&&Math.abs(h-d-(c-f))<=this._maxDelta&&Math.abs(k-l-(a-g))<=this._maxDelta};h.prototype.checkVerticalThresholdReached=function(b,e){var c=Math.abs(b.center.y-e.center.y);b.pointers.forEach(function(b,
a){a=e.pointers.get(a);c=Math.min(c,Math.abs(b.y-a.y))});return c>=this._threshold};return h}(k.InputHandler);d.VerticalTwoFingerDrag=r})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var k=d.data,b=k.pointers.size;switch(k.action){case "start":this.currentCount=
b;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=b;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=b;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};d.prototype.emitStart=function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=
function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=r})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(r,d,n,l){Object.defineProperty(d,"__esModule",
{value:!0});r=function(d){function b(b){var g=d.call(this,!0)||this;g._onChange=b;g._value="mouse";g.registerIncoming("pointer-down",function(b){g._setValue("touch"===b.data.native.pointerType?"touch":"mouse")});g._moveHandler=g.registerIncoming("pointer-move",function(b){g._setValue("touch"===b.data.native.pointerType?"touch":"mouse")});g._moveHandler.pause();return g}n(b,d);b.prototype._setValue=function(b){b!==this._value&&("touch"===b?this._moveHandler.resume():this._moveHandler.pause(),this._value=
b,this._onChange(b))};return b}(l.InputHandler);d.LatestPointerType=r})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function b(){var b=d.call(this,!0)||this;b.registerIncoming("context-menu",function(b){b.data.native.preventDefault()});return b}n(b,d);return b}(l.InputHandler);d.PreventContextMenu=r;d.default=r})},"esri/views/3d/layers/graphics/Deconflictor":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/PooledArray ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingRect ./deconflictorDebug ../../support/debugFlags ../../support/earthUtils ../../support/geometryUtils ../../support/mathUtils ../../support/geometryUtils/sphere ../../webgl-engine/lib/screenSizePerspectiveUtils ../../webgl-engine/lib/Util ../../webgl-engine/materials/HUDMaterial ../../webgl-engine/materials/internal/MaterialUtil".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){function E(a){var b,c,e,f;return l(this,function(g){switch(g.label){case 0:b=[];for(c in a)b.push(c);e=0;g.label=1;case 1:if(!(e<b.length))return[3,4];f=b[e];return[4,a[f]];case 2:g.sent(),g.label=3;case 3:return e++,[3,1];case 4:return[2]}})}Object.defineProperty(d,"__esModule",{value:!0});var N=q.vec4f64.create(),L=q.vec4f64.create(),K=q.vec4f64.create(),O=q.vec4f64.create(),I=w.sphere.create(),H=w.ray.create(),S=p.vec3f64.create(),P=v.create(),
V=v.create(),T=function(){return function(){this.posView=this.yMax=this.yMin=this.xMax=this.xMin=0;this.pooled=this.visible=this.culled=!1}}(),Z=function(){return function(a,b,c){void 0===c&&(c={});this.graphics3DGraphic=a;this.slicePlaneEnabled=b;this.info=c}}(),Q=function(){return function(a,b){void 0===b&&(b=new Map);this.graphics3DCore=a;this.graphics=b}}();r=function(b){function f(){var a=null!==b&&b.apply(this,arguments)||this;a.handles=new h;a.dirty=!1;a.state=0;a.contexts=[];a.graphics=null;
a.iterators=null;a.accBinsNumX=15;a.accBinsNumY=20;a.accBinsSizeX=0;a.accBinsSizeY=0;a.accBins=null;a.accNumTests=0;a._iconMarginFactor=-.1;a.slicePlaneViewSpace=null;return a}n(f,b);Object.defineProperty(f.prototype,"iconMarginFactor",{get:function(){return this._iconMarginFactor},set:function(a){this._iconMarginFactor=a;this.setDirty()},enumerable:!0,configurable:!0});f.prototype.initialize=function(){var a=this,b,c;this.graphics=(b={},b[0]={active:{},visible:new g,remove:new g},b[1]={active:{},
visible:new g,remove:new g},b);this.iterators=(c={},c[0]={active:null,visible:null,remove:null,sort:null},c[1]={active:null,visible:null,remove:null,sort:null},c);this.handles.add([this.view.watch("state.camera",function(){a.updateSlicePlane();a.setDirtyUrgent()}),this.view.watch("map.ground.opacity",function(b,c){1!==b&&1!==c||a.setDirtyUrgent()}),e.init(this.view,"slicePlane",function(){return a.updateSlicePlane()})]);this.frameWorker=this.view.resourceController.scheduler.registerTask(12,function(b){return a.run(b)},
function(){return a.needsUpdate()})};f.prototype.updateSlicePlane=function(){var a=this.view&&this.view.slicePlane;a?(this.slicePlaneViewSpace||(this.slicePlaneViewSpace=w.boundedPlane.create()),w.boundedPlane.transform(a,this.view.state.camera.viewMatrix,this.slicePlaneViewSpace),this.slicePlaneChanged()):this.slicePlaneViewSpace&&(this.slicePlaneViewSpace=null,this.slicePlaneChanged())};f.prototype.slicePlaneChanged=function(){for(var a=0,b=this.contexts;a<b.length;a++)if(b[a].graphics3DCore.symbolCreationContext.slicePlaneEnabled){this.setDirty();
break}};f.prototype.destroy=function(){this.handles.destroy();this.handles=null;this.frameWorker&&(this.frameWorker.remove(),this.frameWorker=null);this.graphics[0].active=null;this.graphics[0].visible.clear();this.graphics[0].remove.clear();this.graphics[1].active=null;this.graphics[1].visible.clear();this.graphics[1].remove.clear();this.iterators=this.graphics=null};f.prototype.addGraphicsOwner=function(a){var b=this,c=this.findDeconflictionContext(a),e;-1!==c?e=this.contexts[c]:(e=new Q(a),this.contexts.push(e),
this.setDirtyUrgent());return{addGraphic:function(a){return b.addGraphic(e,a)},removeGraphic:function(a){return b.removeGraphic(e,a)},labelingInfoChange:function(){return b.globalLabelingInfoChanged(e)},visibilityInfoChange:function(){},featureReductionChange:function(){return b.globalFeatureReductionChanged(e)},slicePlaneEnabledChange:function(){return b.globalSlicePlaneEnabledChanged(e)},clear:function(){return e.graphics.forEach(function(a){return b.removeGraphic(e,a.graphics3DGraphic)})}}};f.prototype.removeGraphicsOwner=
function(a){var b=this;a=this.findDeconflictionContext(a);if(-1!==a){var c=this.contexts.splice(a,1)[0];c.graphics.forEach(function(a){return b.removeGraphic(c,a.graphics3DGraphic)});this.setDirtyUrgent()}};f.prototype.setInitialIconVisibilityFlag=function(a,b){a=!(this.graphicSupportsDeconfliction(b)&&this.isFeatureReductionEnabled(a));b.setVisibilityFlag(3,a,0)};f.prototype.setDirtyUrgent=function(){!this.dirty&&0<this.contexts.length&&(this.dirty=!0,this.notifyChange("updating"));this.frameWorker.priority=
2};f.prototype.setDirty=function(){!this.dirty&&0<this.contexts.length&&(this.dirty=!0,this.notifyChange("updating"),this.frameWorker.priority=12)};Object.defineProperty(f.prototype,"updating",{get:function(){return 0!==this.state||this.dirty},enumerable:!0,configurable:!0});f.prototype.needsUpdate=function(){return this.view.ready&&null!=this.view.state&&this.updating};f.prototype.run=function(a){switch(this.state){case 0:t.prepare(this.view),this.dirty=!1,this.camera=this.view.state.camera,this.initBins(this.camera.fullWidth,
this.camera.fullHeight),this.resetIterators(),a.madeProgress();case 1:if(this.state=1,!this.processActiveGraphics(0,a))break;case 3:if(this.state=3,!this.cleanVisibleGraphics(0,a))break;case 5:if(this.state=5,!this.sortVisibleGraphics(0,a))break;case 7:this.state=7;if(!this.deconflictVisibleGraphics(0,a))break;t.drawAccelerationStruct(this,this.graphics[0].visible);case 2:if(this.state=2,!this.processActiveGraphics(1,a))break;case 4:if(this.state=4,!this.cleanVisibleGraphics(1,a))break;case 6:if(this.state=
6,!this.sortVisibleGraphics(1,a))break;case 8:this.state=8;if(!this.deconflictVisibleGraphics(1,a))break;t.drawAccelerationStruct(this,this.graphics[1].visible);default:this.state=0,this.notifyChange("updating")}};f.prototype.findDeconflictionContext=function(a){for(var b=0;b<this.contexts.length;b++)if(this.contexts[b].graphics3DCore===a)return b;return-1};f.prototype.globalFeatureReductionChanged=function(a){var b=this.isFeatureReductionEnabled(a.graphics3DCore);b||this.clearVisibilityFlags(a);
this.modifyGraphics(a,b,0)};f.prototype.globalLabelingInfoChanged=function(a){var b=this.isLabelDeconflictionEnabled(a.graphics3DCore);this.modifyGraphics(a,b,1)};f.prototype.globalSlicePlaneEnabledChanged=function(a){var b=a.graphics3DCore.symbolCreationContext.slicePlaneEnabled;a.graphics.forEach(function(a){a.slicePlaneEnabled=b});this.setDirtyUrgent()};f.prototype.modifyGraphics=function(a,b,c){var e=this;b?a.graphics.forEach(function(a){return e.addToActiveGraphics(a,c)}):a.graphics.forEach(function(a){return e.removeFromActiveGraphics(a,
c)});this.setDirtyUrgent()};f.prototype.graphicSupportsDeconfliction=function(a){var b=a._graphics;if(!b||!b.length||a.isDraped())return!1;for(a=0;a<b.length;a++)if(this.graphics3DGraphicsLayerSupportsDeconfliction(b[a]))return!0;return!1};f.prototype.graphics3DGraphicsLayerSupportsDeconfliction=function(a){if(!a||"object3d"!==a.type)return!1;a=a.stageObject;return 1===(a?a.getNumGeometryRecords():0)&&a.getGeometryRecord(0).material instanceof C?!0:!1};f.prototype.addGraphic=function(a,b){var c=b.graphic.uid;
b=new Z(b,a.graphics3DCore.symbolCreationContext.slicePlaneEnabled);a.graphics.set(c,b);this.isFeatureReductionEnabled(a.graphics3DCore)&&this.addToActiveGraphics(b,0);this.isLabelDeconflictionEnabled(a.graphics3DCore)&&this.addToActiveGraphics(b,1);this.setDirty()};f.prototype.removeGraphic=function(a,b){b=b.graphic.uid;var c=a.graphics.get(b);c&&(this.removeFromActiveGraphics(c,0),this.removeFromActiveGraphics(c,1),a.graphics.delete(b),this.setDirty())};f.prototype.addToActiveGraphics=function(a,
b){a.info[b]=new T;this.graphics[b].active[a.graphics3DGraphic.graphic.uid]=a};f.prototype.removeFromActiveGraphics=function(a,b){this.removeFromVisibleGraphics(a,b);this.clearGraphicVisibility(a,b);delete a.info[b];delete this.graphics[b].active[a.graphics3DGraphic.graphic.uid]};f.prototype.addToVisibleGraphics=function(a,b){var c=a.info[b];c&&!c.pooled&&(this.graphics[b].visible.push(a),c.pooled=!0)};f.prototype.removeFromVisibleGraphics=function(a,b){var c=a.info[b];c&&c.pooled&&(this.graphics[b].remove.push(a),
c.pooled=!1)};f.prototype.processActiveGraphics=function(a,b){for(var c=this.getOrCreateActiveGraphicsIterator(a),e="global"===this.view.viewingMode&&1===this.view.map.ground.opacity&&this.camera&&0<this.camera.relativeElevation;!b.done;){b.madeProgress();var f=c.next();if(f.done)return this.resetActiveGraphicsIterator(a),!0;var g=(f=f.value)&&f.info[a];g&&(this.collectGraphics3DGraphics(f,a,e),g.culled?this.removeFromVisibleGraphics(f,a):this.addToVisibleGraphics(f,a))}return!1};f.prototype.cleanVisibleGraphics=
function(a,b){for(var c=this.graphics[a],e=this.ensureRemoveGraphicsIterator(a,b);!b.done;){var f=e.next();b.madeProgress();if(f.done)return c.remove.clear(),this.resetRemoveGraphicsIterator(a),!0}return!1};f.prototype.sortVisibleGraphics=function(a,b){for(var c=this.ensureSortGraphicsIterator(a,function(b,c){return b.info[a]&&c.info[a]?c.info[a].posView-b.info[a].posView:Number.MAX_VALUE},b);!b.done;){var e=c.next();b.madeProgress();if(e.done)return this.resetSortGraphicsIterator(a),!0}return!1};
f.prototype.deconflictVisibleGraphics=function(a,b){for(var c=this.getOrCreateVisibleGraphicsIterator(a),e=1===a;!b.done;){b.madeProgress();var f=c.next();if(f.done)return this.resetVisibleGraphicsIterator(a),!0;var f=f.value,g=f.info[a];if(g&&!g.culled){var h=f.graphics3DGraphic,h=!(e&&!h.isVisible())&&!this.doesIntersectExistingPoly(f,a);(g.visible=h)&&this.addToBins(f,a);this.setGraphicVisibility(f,a,h);h&&t.drawPoly(g,h?"green":"red")}}return!1};f.prototype.resetIterators=function(){this.iterators[0].active=
null;this.iterators[0].visible=null;this.iterators[0].remove=null;this.iterators[0].sort=null;this.iterators[1].active=null;this.iterators[1].visible=null;this.iterators[1].remove=null;this.iterators[1].sort=null};f.prototype.getOrCreateActiveGraphicsIterator=function(a){var b=this.graphics[a];a=this.iterators[a];a.active||(a.active=E(b.active));return a.active};f.prototype.resetActiveGraphicsIterator=function(a){this.iterators[a].active=null};f.prototype.getOrCreateVisibleGraphicsIterator=function(a){var b=
this.graphics[a];a=this.iterators[a];a.visible||(a.visible=b.visible.iterableForEach());return a.visible};f.prototype.resetVisibleGraphicsIterator=function(a){this.iterators[a].visible=null};f.prototype.ensureRemoveGraphicsIterator=function(a,b){var c=this.graphics[a];a=this.iterators[a];a.remove||(a.remove=c.visible.iterableRemoveMany(c.remove.data,function(){return b.done}));return a.remove};f.prototype.resetRemoveGraphicsIterator=function(a){this.iterators[a].remove=null};f.prototype.ensureSortGraphicsIterator=
function(a,b,c){var e=this.graphics[a];a=this.iterators[a];a.sort||(a.sort=e.visible.iterableSort(b,function(){return c.done}));return a.sort};f.prototype.resetSortGraphicsIterator=function(a){this.iterators[a].sort=null};f.prototype.collectGraphics3DGraphics=function(b,c,e){var f=b.graphics3DGraphic;if(!f.destroyed){var g=1===c,h=g?f._labelGraphics:f._graphics,g=g?0:this.iconMarginFactor;c=b.info[c];if(f.isVisible(0,3)){for(var f=v.empty(P),d,k,l=0;l<h.length;l++){var q=h[l];if(this.graphics3DGraphicsLayerSupportsDeconfliction(q)){var t=
q.stageObject,C=t.getGeometryRecord(0),U=C.material,n=this.camera,E=C.geometry.data.getVertexAttr();if(e&&(I.radius=x.earthRadius,a.vec3.sub(H.direction,t.getCenter(),this.camera.eye),a.vec3.copy(H.origin,this.camera.eye),u.intersectRay(I,H,S))){var X=1-Math.abs(Math.tan(a.vec3.angle(t.getCenter(),H.direction)))/this.view.width,X=Math.pow(X,4),Q=a.vec3.sqrDist(this.camera.eye,S),ca=a.vec3.sqrDist(this.camera.eye,t.getCenter());if(X*ca>Q){c.culled=!0;return}}if(!k){k=t.getCenter();C=C.origin.vec3;
F.transformToWorld(k,C,N);F.transformToView(N,C,n.viewMatrix,L);U.applyVerticalOffsetTransformation(L,E[B.VertexAttrConstants.NORMAL].data,t.objectTransformation,n,J);if(b.slicePlaneEnabled&&this.slicePlaneViewSpace&&w.boundedPlane.extrusionContainsPoint(this.slicePlaneViewSpace,L)){c.culled=!0;return}t=E[B.VertexAttrConstants.AUXPOS1].data;E="screen"!==U.getParameters().centerOffsetUnits;F.transformToProjection(L,n.projectionMatrix,E?t:p.vec3f64.ZEROS,K);k=F.transformToNDC(K,O);E||(k[0]+=t[0]/n.fullWidth*
2,k[1]+=t[1]/n.fullHeight*2);if(-1>k[0]||-1>k[1]||-1>k[2]||1<=k[0]||1<=k[1])break;d=L[2];!y.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET&&c.visible&&(d*=.7)}q=q.getScreenSize(R);q[0]*=n.pixelRatio;q[1]*=n.pixelRatio;z.applyPrecomputedScaleFactorVec2(q,J.factor,q);U=v.offset(U.calculateRelativeScreenBounds(q,J.factorAlignment.scale,V),m.lerp(0,n.fullWidth,.5+.5*k[0]),m.lerp(0,n.fullHeight,.5+.5*k[1]));0!==g&&(n=g*Math.min(v.width(U),v.height(U)),U[0]-=n,U[1]-=n,U[2]+=n,U[3]+=n);v.expand(f,U)}}null==d?c.culled=
!0:(c.xMin=f[0],c.yMin=f[1],c.xMax=f[2],c.yMax=f[3],c.posView=d,c.culled=!1)}else c.culled=!0}};f.prototype.doesIntersectExistingPoly=function(a,b){var c=a.graphics3DGraphic.graphic.uid;a=a.info[b];for(var e=Math.floor(a.xMin/this.accBinsSizeX);e<=Math.floor(a.xMax/this.accBinsSizeX);e++)if(!(0>e||e>=this.accBinsNumX))for(var f=Math.floor(a.yMin/this.accBinsSizeY);f<=Math.floor(a.yMax/this.accBinsSizeY);f++)if(!(0>f||f>=this.accBinsNumY))for(var g=this.accBins[e][f],h=0;h<g.length;h++){var d=g.data[h],
k=d.info[b];if(k&&k.visible&&d.graphics3DGraphic.graphic.uid!==c&&(this.accNumTests++,!(k.xMin>a.xMax||k.xMax<a.xMin||k.yMin>a.yMax||k.yMax<a.yMin)))return!0}return!1};f.prototype.initBins=function(a,b){if(null==this.accBins){this.accBins=[];for(var c=0;c<this.accBinsNumX;c++){this.accBins.push([]);for(var e=this.accBins[this.accBins.length-1],f=0;f<this.accBinsNumY;f++)e.push(new g)}}for(c=0;c<this.accBinsNumX;c++)for(f=0;f<this.accBinsNumY;f++)this.accBins[c][f].clear();this.accBinsSizeX=a/this.accBinsNumX;
this.accBinsSizeY=b/this.accBinsNumY;this.accNumTests=0};f.prototype.addToBins=function(a,b){b=a.info[b];for(var c=Math.floor(b.xMin/this.accBinsSizeX);c<=Math.floor(b.xMax/this.accBinsSizeX);c++)if(!(0>c||c>=this.accBinsNumX))for(var e=Math.floor(b.yMin/this.accBinsSizeY);e<=Math.floor(b.yMax/this.accBinsSizeY);e++)0>e||e>=this.accBinsNumY||this.accBins[c][e].push(a)};f.prototype.isFeatureReductionEnabled=function(a){a=a.layer;return!(!a||!a.featureReduction||"selection"!==a.featureReduction.type)};
f.prototype.isLabelDeconflictionEnabled=function(a){return a.labelsEnabled};f.prototype.clearVisibilityFlags=function(a){(a=a.graphics3DCore.graphics3DGraphics)&&a.forEach(function(a){return a.clearVisibilityFlag(3)})};f.prototype.setGraphicVisibility=function(a,b,c){a=a.graphics3DGraphic;a.destroyed||(a.setVisibilityFlag(3,c,b),1===b&&this.view.labeler.setLabelGraphicVisibility(a,c))};f.prototype.clearGraphicVisibility=function(a,b){a=a.graphics3DGraphic;a.destroyed||a.clearVisibilityFlag(3,b)};
k([c.property({constructOnly:!0})],f.prototype,"view",void 0);k([c.property({type:Boolean,readOnly:!0})],f.prototype,"updating",null);return f=k([c.subclass("esri.views.3d.layers.graphics.Deconflictor")],f)}(c.declared(b));d.Deconflictor=r;var J={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},R=f.vec2f64.create()})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils",
"./HeapSort"],function(r,d,n,l,k){return function(){function b(b){var g=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=new l.RemoveHint;b&&(b.initialSize&&(this.data=Array(b.initialSize)),b.allocator?(this._allocator=b.allocator,this._deallocator=b.deallocator):"deallocator"in b&&(this._deallocator=b.deallocator),b.shrink&&(this._shrink=function(){g.data.length>1.5*g.length&&(g.data.length=Math.floor(1.1*g.length))}))}b.prototype.toArray=
function(){return this.data.slice(0,this.length)};Object.defineProperty(b.prototype,"length",{get:function(){return this._length},set:function(b){if(b>this._length)if(this._allocator)for(;this._length<b;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=b;else{if(this._deallocator)for(var g=b;g<this._length;++g)this.data[g]=this._deallocator(this.data[g]);this._length=b;this._shrink()}},enumerable:!0,configurable:!0});b.prototype.clear=function(){this.length=0};
b.prototype.prune=function(){this.clear();this.data=[]};b.prototype.equal=function(b){return l.equals(this.data,b.data)};b.prototype.push=function(b){return this.data[this._length++]=b};b.prototype.pushArray=function(b,g){void 0===g&&(g=b.length);for(var e=0;e<g;e++)this.data[this._length++]=b[e];return this.back()};b.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};b.prototype.pop=function(){if(0!==this.length){var b=
this.data[this.length-1];--this.length;this._shrink();return b}};b.prototype.removeMany=function(b){var g=this,e=[];this.data=this.data.filter(function(c,f){if(f>=g.length)return!1;if(0>b.indexOf(c))return!0;e.push(c);return!1});this._length=this.data.length;return e};b.prototype.iterableRemoveMany=function(b,g){var e,c;return n(this,function(f){switch(f.label){case 0:e=[],c=0,f.label=1;case 1:if(!(c<this.length)||c>=this.length)return[3,4];0>b.indexOf(this.data[c])&&e.push(this.data[c]);return g()?
[4]:[3,3];case 2:f.sent(),f.label=3;case 3:return++c,[3,1];case 4:return this.data=e,this._length=this.data.length,[2]}})};b.prototype.removeUnordered=function(b){b=l.removeUnordered(this.data,b,this.length,this._hint);void 0!==b&&--this.length;return b};b.prototype.removeUnorderedIndex=function(b){if(!(b>=this.length||0>b))return this.swapElements(b,this.length-1),this.pop()};b.prototype.removeUnorderedMany=function(b,g,e){void 0===g&&(g=b.length);this.length=l.removeUnorderedMany(this.data,b,this.length,
g,this._hint,e)};b.prototype.front=function(){if(0!==this.length)return this.data[0]};b.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};b.prototype.swapElements=function(b,g){var e;b>=this.length||g>=this.length||b===g||(e=[this.data[g],this.data[b]],this.data[b]=e[0],this.data[g]=e[1])};b.prototype.sort=function(b){k.sort(this.data,0,this.length,b)};b.prototype.iterableSort=function(b,g){return k.iterableSort(this.data,0,this.length,b,g)};b.prototype.some=function(b,
g){for(var e=0;e<this.length;++e)if(b.call(g,this.data[e],e,this.data))return!0;return!1};b.prototype.find=function(b,g){for(var e=0;e<this.length;++e){var c=this.data[e];if(b.call(g,c,e,this.data))return c}};b.prototype.filterInPlace=function(b,g){for(var e=0,c=0;c<this._length;++c){var f=this.data[c];b.call(g,f,c,this.data)&&(this.data[c]=this.data[e],this.data[e]=f,e++)}if(this._deallocator)for(c=e;c<this._length;c++)this.data[c]=this._deallocator(this.data[c]);this._length=e;return this};b.prototype.forEach=
function(b,g){for(var e=this.length,c=0;c<Math.min(this.length,e);++c)b.call(g,this.data[c],c,this.data)};b.prototype.iterableForEach=function(){var b;return n(this,function(g){switch(g.label){case 0:b=0,g.label=1;case 1:return b<this.length?[4,this.data[b]]:[3,4];case 2:g.sent(),g.label=3;case 3:return++b,[3,1];case 4:return[2]}})};b.prototype.map=function(b,g){for(var e=Array(this.length),c=0;c<this.length;++c)e[c]=b.call(g,this.data[c],c,this.data);return e};return b}()})},"esri/core/HeapSort":function(){define(["require",
"exports","./tsSupport/generatorHelper"],function(r,d,n){var l;(function(d){function b(b,e,c,f){for(var a=e,g=c>>>1,h=b[a-1];e<=g;){e=a<<1;e<c&&0>f(b[e-1],b[e])&&++e;var d=b[e-1];if(0>=f(d,h))break;b[a-1]=d;a=e}b[a-1]=h}function h(b,e){return b<e?-1:b>e?1:0}d.sort=function(g,e,c,f){void 0===e&&(e=0);void 0===c&&(c=g.length);void 0===f&&(f=h);for(var a=c>>>1;a>e;a--)b(g,a,c,f);for(var d=e+1,a=c-1;a>e;a--)c=g[e],g[e]=g[a],g[a]=c,b(g,d,a,f)};d.iterableSort=function(g,e,c,f,a){var d,k,l;return n(this,
function(p){switch(p.label){case 0:void 0===e&&(e=0),void 0===c&&(c=g.length),void 0===f&&(f=h),d=c>>>1,p.label=1;case 1:if(!(d>e))return[3,4];b(g,d,c,f);return a&&a()?[4]:[3,3];case 2:p.sent(),p.label=3;case 3:return d--,[3,1];case 4:k=e+1,d=c-1,p.label=5;case 5:if(!(d>e))return[3,8];l=g[e];g[e]=g[d];g[d]=l;b(g,k,d,f);return a&&a()?[4]:[3,7];case 6:p.sent(),p.label=7;case 7:return d--,[3,5];case 8:return[2]}})}})(l||(l={}));return l})},"esri/views/3d/layers/graphics/deconflictorDebug":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../support/debugFlags"],function(r,d,n,l){function k(b,f,a,h,d){var c=g.height,k=e;k.beginPath();k.lineWidth=1;k.strokeStyle=d;k.moveTo(b,c-a);k.lineTo(f,c-a);k.stroke();k.lineTo(f,c-h);k.stroke();k.lineTo(f,c-a);k.stroke();k.lineTo(b,c-a);k.stroke();k.lineTo(b,c-a);k.stroke();k.closePath()}Object.defineProperty(d,"__esModule",{value:!0});var b=!1,h=!1,g,e;d.drawAccelerationStruct=function(b,f){if(h&&e){for(var a=e,c=0,g=0;g<b.accBinsNumX;g++)for(var d=
0;d<b.accBinsNumY;d++){var l=b.accBins[g][b.accBinsNumY-1-d],c=c+l.length,y=g*b.accBinsSizeX,x=(g+1)*b.accBinsSizeX,w=d*b.accBinsSizeY,m=(d+1)*b.accBinsSizeY;a.fillText(l.length.toFixed(),y+5,w+15);k(y,x,w,m,"blue")}a.fillText("total totalShownLabels: "+c,70,40);a.fillText("total visible labels: "+f.length,70,50);a.fillText("total numTests: "+b.accNumTests,70,30)}};d.prepare=function(c){b=l.DECONFLICTOR_SHOW_OUTLINES;h=l.DECONFLICTOR_SHOW_GRID;if(b||h){null==g&&(g=document.createElement("canvas"),
g.setAttribute("id","canvas2d"),c.surface.parentElement.style.position="relative",c.surface.parentElement.appendChild(g));var f=c.height*c.pixelRatio;g.setAttribute("width",c.width*c.pixelRatio+"px");g.setAttribute("height",f+"px");g.setAttribute("style","position:absolute;left:0px;top:0px;display:block;pointer-events:none;width:"+c.width+"px;height:"+c.height+"px");e=g.getContext("2d");e.clearRect(0,0,c.width,c.height);e.font="12px Arial"}};d.drawPoly=function(c,e){b&&k(c.xMin,c.xMax,c.yMin,c.yMax,
e)}})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){return new (function(h){function g(){var b=null!==h&&h.apply(this,arguments)||this;b.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;b.SCENEVIEW_LOCKING_LOG=!1;b.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;b.HIGHLIGHTS_VISUALIZE_BLOCKS=!1;b.HIGHLIGHTS_PROFILE_TO_CONSOLE=
!1;b.DECONFLICTOR_SHOW_OUTLINES=!1;b.DECONFLICTOR_SHOW_GRID=!1;b.LABELS_SHOW_BORDER=!1;b.OVERLAY_DRAW_TEST_TEXTURE=!1;b.OVERLAY_SHOW_CENTER=!1;b.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS=!1;b.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1;b.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;b.DRAW_MESH_GEOMETRY_NORMALS=!1;b.FEATURE_TILE_FETCH_SHOW_TILES=!1;b.FEATURE_TILE_TREE_SHOW_TILES=!1;b.ENABLE_PROFILE_DEPTH_RANGE=!1;b.DISABLE_FAST_UPDATES=!1;b.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;b.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=
!1;return b}n(g,h);l([b.property()],g.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);l([b.property()],g.prototype,"SCENEVIEW_LOCKING_LOG",void 0);l([b.property()],g.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0);l([b.property()],g.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0);l([b.property()],g.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);l([b.property()],g.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);l([b.property()],g.prototype,"DECONFLICTOR_SHOW_GRID",void 0);l([b.property()],
g.prototype,"LABELS_SHOW_BORDER",void 0);l([b.property()],g.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0);l([b.property()],g.prototype,"OVERLAY_SHOW_CENTER",void 0);l([b.property()],g.prototype,"TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS",void 0);l([b.property()],g.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);l([b.property()],g.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);l([b.property()],g.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);l([b.property()],g.prototype,
"FEATURE_TILE_FETCH_SHOW_TILES",void 0);l([b.property()],g.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);l([b.property()],g.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);l([b.property()],g.prototype,"DISABLE_FAST_UPDATES",void 0);l([b.property()],g.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);l([b.property()],g.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);return g=l([b.subclass("esri.views.3d.support.DebugFlags")],g)}(b.declared(k)))})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["require",
"exports","../../../../core/mathUtils","../../support/earthUtils","../../support/mathUtils"],function(r,d,n,l,k){function b(a){return Math.abs(a*a*a)}function h(a,c,e,f){void 0===f&&(f=p);var g=e.parameters;e=e.paddingPixelsOverride;f.scale=Math.min(g.divisor/(c-g.offset),1);f.factor=b(a);f.minPixelSize=g.minPixelSize;f.paddingPixels=e;return f}function g(a,b){return 0===a?b.minPixelSize:b.minPixelSize*(1+2*b.paddingPixels/a)}function e(a,b){return Math.max(k.lerp(a*b.scale,a,b.factor),g(a,b))}function c(a,
b,c){a=h(a,b,c);a.minPixelSize=0;a.paddingPixels=0;return e(1,a)}Object.defineProperty(d,"__esModule",{value:!0});d.getSettings=function(a){return new f(a,d.defaultDescription)};d.getLabelSettings=function(b){var c=d.defaultDescription.curvatureDependent;return new f(b,{curvatureDependent:{min:{curvature:c.min.curvature,tiltAngle:c.min.tiltAngle,scaleFallOffFactor:a.curvatureDependent.min.scaleFallOffFactor},max:{curvature:c.max.curvature,tiltAngle:c.max.tiltAngle,scaleFallOffFactor:a.curvatureDependent.max.scaleFallOffFactor}},
scaleStart:d.defaultDescription.scaleStart,scaleFallOffRange:d.defaultDescription.scaleFallOffRange,minPixelSize:a.minPixelSize})};d.perspectiveFactor=b;d.scaleFactor=h;d.applyScaleFactor=e;d.applyScaleFactorVec2=function(a,b,c){void 0===c&&(c=[0,0]);var e=Math.min(Math.max(b.scale,g(a[1],b)/a[1]),1);c[0]=k.lerp(a[0]*e,a[0],b.factor);c[1]=k.lerp(a[1]*e,a[1],b.factor);return c};d.precomputeScale=c;d.precomputeScaleFactor=function(a,b,e,f){f.scale=c(a,b,e);f.factor=0;f.minPixelSize=e.parameters.minPixelSize;
f.paddingPixels=e.paddingPixelsOverride;return f};d.applyPrecomputedScaleFactorVec2=function(a,b,c){void 0===c&&(c=[0,0]);b=Math.min(Math.max(b.scale,g(a[1],b)/a[1]),1);c[0]=a[0]*b;c[1]=a[1]*b;return c};d.scale=function(a,b,c,f){return e(a,h(b,c,f))};var f=function(){function a(a,b,c,e){void 0===c&&(c={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0});this.viewingMode=a;this.description=b;this.parameters=c;this._paddingPixelsOverride=e;"local"===this.viewingMode?(this.coverageCompensation=
this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}Object.defineProperty(a.prototype,"paddingPixelsOverride",{get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels},enumerable:!0,configurable:!0});a.prototype.update=function(a){if(this.parameters&&
this.parameters.camera.fovY===a.fovY&&this.parameters.camera.distance===a.distance)return!1;this.calculateParameters(a,this.parameters);return!0};a.prototype.overridePadding=function(b){return b!==this.paddingPixelsOverride?new a(this.viewingMode,this.description,this.parameters,b):this};a.prototype.calculateParameters=function(a,b){var c=this.description,e=c.scaleStart,f=c.scaleFallOffRange,c=c.minPixelSize,g=a.fovY,h=a.distance,d=this.calculateCurvatureDependentParameters(a),k=this.coverageCompensation(a,
d),l=d.tiltAngle,d=d.scaleFallOffFactor,h=Math.sin(l)*h,l=.5*Math.PI-l-g*(.5-e*k),e=h/Math.cos(l),f=(e-h/Math.cos(l+g*f*k)*d)/(1-d);b.camera.fovY=a.fovY;b.camera.distance=a.distance;b.offset=f;b.divisor=e-f;b.minPixelSize=c;return b};a.prototype.calculateCurvatureDependentParametersLocal=function(a,b){void 0===b&&(b=q);b.tiltAngle=this.description.curvatureDependent.min.tiltAngle;b.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return b};a.prototype.calculateCurvatureDependentParametersGlobal=
function(a,b){void 0===b&&(b=q);var c=this.description.curvatureDependent;a=1+a.distance/l.earthRadius;var e=[c.min.curvature,c.max.curvature],f=e[0];a=n.clamp((Math.sqrt(a*a-1)-f)/(e[1]-f),0,1);e=[c.min,c.max];c=e[0];e=e[1];b.tiltAngle=k.lerp(c.tiltAngle,e.tiltAngle,a);b.scaleFallOffFactor=k.lerp(c.scaleFallOffFactor,e.scaleFallOffFactor,a);return b};a.prototype.surfaceCoverageCompensationLocal=function(a,b){return(a.fovY-b.tiltAngle)/a.fovY};a.prototype.surfaceCoverageCompensationGlobal=function(a,
b){var c=l.earthRadius*l.earthRadius;b=b.tiltAngle+.5*Math.PI;var e=a.fovY;a=a.distance;a=a*a+c-2*Math.cos(b)*a*l.earthRadius;var f=Math.sqrt(a);return(Math.acos(Math.sqrt(a-c)/f)-Math.asin(l.earthRadius/(f/Math.sin(b)))+.5*e)/e};return a}();d.defaultDescription={curvatureDependent:{min:{curvature:k.deg2rad(10),tiltAngle:k.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:k.deg2rad(70),tiltAngle:k.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0};var a={curvatureDependent:{min:{scaleFallOffFactor:.7},
max:{scaleFallOffFactor:.95}},minPixelSize:14};d.copyParameters=function(a,b){b.camera.distance=a.camera.distance;b.camera.fovY=a.camera.fovY;b.divisor=a.divisor;b.offset=a.offset;b.minPixelSize=a.minPixelSize;return b};var p={scale:0,factor:0,minPixelSize:0,paddingPixels:0},q={tiltAngle:0,scaleFallOffFactor:0}})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/types/mat4 ../../../../geometry/support/aaBoundingRect ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterialTexture ../lib/Material ../lib/screenSizePerspectiveUtils ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/HUDPrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){function E(a,b,c){a.setUniform1f("cameraGroundRelative",c.cameraAboveGround?1:-1);a.setUniform1f("polygonOffset",b.shaderPolygonOffset);a.setUniform4fv("viewport",c.viewport);a.setUniform1f("perDistancePixelRatio",Math.tan(c.fovY/2)/(c.viewport[2]/2));z.bindVerticalOffset(b.verticalOffset,c,a);a.setUniformMatrix4fv("viewNormal",c.viewInvTransp);b.screenSizePerspective&&(z.bindScreenSizePerspective(b.screenSizePerspective,a,"screenSizePerspective"),
z.bindScreenSizePerspective(b.screenSizePerspectiveAlignment||b.screenSizePerspective,a,"screenSizePerspectiveAlignment"))}function N(a,b,c,e){c.occlusionTest&&(b.setUniform1i("hudVisibilityTexture",1),a.bindTexture(e.hudVisibilityTexture,1),a.setActiveTexture(0));b.setUniform1f("uRenderTransparentlyOccludedHUD","occluded"===e.renderTransparentlyOccludedHUD?1:"notOccluded"===e.renderTransparentlyOccludedHUD?0:.75);a=e.pixelRatio||1;b.setUniform4fv("overrideColor",c.color);b.setUniform1f("pixelRatio",
a);c.textureIsSignedDistanceField&&(b.setUniform4fv("outlineColor",c.outlineColor),b.setUniform1f("outlineSize",c.outlineSize));c.vvSizeEnabled&&(b.setUniform3fv("vvSizeMinSize",c.vvSizeMinSize),b.setUniform3fv("vvSizeMaxSize",c.vvSizeMaxSize),b.setUniform3fv("vvSizeOffset",c.vvSizeOffset),b.setUniform3fv("vvSizeFactor",c.vvSizeFactor));c.vvColorEnabled&&(b.setUniform1fv("vvColorValues",c.vvColorValues),b.setUniform4fv("vvColorColors",c.vvColorColors));b.setUniform2f("screenOffset",2*c.screenOffset[0]*
a,2*c.screenOffset[1]*a);b.setUniform2fv("anchorPos",L(c))}function L(a,b){void 0===b&&(b=H);if(a.textureIsSignedDistanceField){var c=a.anchorPos;a=a.distanceFieldBoundingBox;var f=b;f[0]=c[0]*(a[2]-a[0])+a[0];f[1]=c[1]*(a[3]-a[1])+a[1]}else e.vec2.copy(b,a.anchorPos);return b}r=function(b){function c(a,c){c=b.call(this,c)||this;c.params=z.copyParameters(a,ja);return c}n(c,b);c.prototype.dispose=function(){};c.prototype.setParameterValues=function(a){for(var b in a)"textureId"===b&&m.assert(!!this.params.textureId,
"Can only change texture of material that already has a texture"),this.params[b]=a[b];this.notifyDirty("matChanged")};c.prototype.getParameters=function(){return this.params};c.prototype.intersect=function(a,b,c,e,f,g,h,d,k){k?this.intersectDrapedRenderHudGeometry(a,b,c,e,f,g,h,d):this.intersectHudGeometry(a,b,c,e,f,g,h,d)};c.prototype.intersectDrapedRenderHudGeometry=function(a,b,c,e,g,h,d,k){b=a.getAttribute(m.VertexAttrConstants.POSITION);c=a.getAttribute(m.VertexAttrConstants.SIZE);e=this.params;
g=L(e);var l=1,p=1;k&&(p=k(X),l=p[0],p=p[5]);l*=a.pixelRatio;p*=a.pixelRatio;k=G*a.pixelRatio;for(var u=0;u<b.data.length/b.size;u++){var q=u*b.size;f.vec3.set(S,b.data[q],b.data[q+1],b.data[q+2]);q=u*c.size;Y[0]=c.data[q]*l;Y[1]=c.data[q+1]*p;var q=S[0],z=S[1],B=void 0;e.textureIsSignedDistanceField&&(B=e.outlineSize*a.pixelRatio/2);this._isInsideIconBoundaries(h,q,z,k,B,e,g)&&d()}};c.prototype.intersectHudGeometry=function(b,c,e,g,d,l,p,u){if(g.enable.selectionMode&&g.enable.hud&&!t.isAllHidden(c.componentVisibilities,
b.componentOffsets)){var q=b.data;b=this.params;d=c=1;k.mat3.fromMat4(Q,e);if(u){d=u(X);c=d[0];d=d[5];u=Q;l=u[0];var z=u[1],B=u[2],x=u[3],v=u[4],y=u[5],C=u[6],U=u[7],n=u[8],H=1/Math.sqrt(l*l+z*z+B*B),F=1/Math.sqrt(x*x+v*v+y*y),E=1/Math.sqrt(C*C+U*U+n*n);u[0]=l*H;u[1]=z*H;u[2]=B*H;u[3]=x*F;u[4]=v*F;u[5]=y*F;u[6]=C*E;u[7]=U*E;u[8]=n*E}u=q.getVertexAttr()[m.VertexAttrConstants.POSITION];l=q.getVertexAttr()[m.VertexAttrConstants.SIZE];z=q.getVertexAttr()[m.VertexAttrConstants.NORMAL];q=q.getVertexAttr()[m.VertexAttrConstants.AUXPOS1];
m.assert(3<=u.size);B=g.point;x=g.camera;v=L(b);c*=x.pixelRatio;d*=x.pixelRatio;y="screen"===this.params.centerOffsetUnits;for(C=0;C<u.data.length/u.size;C++)U=C*u.size,f.vec3.set(S,u.data[U],u.data[U+1],u.data[U+2]),f.vec3.transformMat4(S,S,e),U=C*l.size,Y[0]=l.data[U]*c,Y[1]=l.data[U+1]*d,f.vec3.transformMat4(S,S,x.viewMatrix),U=C*q.size,f.vec3.set(R,q.data[U+0],q.data[U+1],q.data[U+2]),y||(S[0]+=R[0],S[1]+=R[1],0!==R[2]&&(U=R[2],f.vec3.normalize(R,S),f.vec3.subtract(S,S,f.vec3.scale(R,R,U)))),
U=C*z.size,f.vec3.set(P,z.data[U],z.data[U+1],z.data[U+2]),this.applyVerticalOffsetTransformation(S,P,Q,x,I),x.applyProjection(S,V),-1<V[0]&&(U=Math.floor(V[0])+this.params.screenOffset[0],n=Math.floor(V[1])+this.params.screenOffset[1],y&&(U+=R[0],0!==R[1]&&(n+=w.applyScaleFactor(R[1],I.factorAlignment))),w.applyPrecomputedScaleFactorVec2(Y,I.factor,Y),H=ca*x.pixelRatio,F=void 0,b.textureIsSignedDistanceField&&(F=b.outlineSize*x.pixelRatio/2),this._isInsideIconBoundaries(B,U,n,H,F,b,v)&&(n=g.ray,
f.vec3.transformMat4(Z,S,h.mat4.invert(J,x.viewMatrix)),V[0]=B[0],V[1]=B[1],x.unprojectPoint(V,S),U=a.vec3f64.create(),f.vec3.copy(U,n.direction),H=1/f.vec3.length(U),f.vec3.scale(U,U,H),n=f.vec3.distance(n.origin,S)*H,p(n,U,-1,1,!0,Z)))}};c.prototype._isInsideIconBoundaries=function(a,b,c,e,f,g,h){b=b-e-(0<h[0]?Y[0]*h[0]:0);var d=b+Y[0]+2*e;c=c-e-(0<h[1]?Y[1]*h[1]:0);e=c+Y[1]+2*e;g.textureIsSignedDistanceField&&(g=g.distanceFieldBoundingBox,b+=Y[0]*g[0],c+=Y[1]*g[1],d-=Y[0]*(1-g[2]),e-=Y[1]*(1-g[3]),
b-=f,d+=f,c-=f,e+=f);return a[0]>b&&a[0]<d&&a[1]>c&&a[1]<e};c.prototype.createBufferWriter=function(){return new pa(this)};c.prototype.createRenderer=function(a,b){return new B(a,b,this)};c.prototype.normalAndViewAngle=function(a,b,c,e){void 0===e&&(e=U);f.vec3.transformMat3(e.normal,a,b);f.vec3.transformMat4(e.normal,e.normal,c.viewInverseTransposeMatrix);e.cosAngle=f.vec3.dot(T,la);return e};c.prototype.updateScaleInfo=function(a,b,c){b=this.params;b.screenSizePerspective?a.factor=w.precomputeScaleFactor(U.cosAngle,
c,b.screenSizePerspective,a.factor):(a.factor.scale=1,a.factor.factor=0,a.factor.minPixelSize=0,a.factor.paddingPixels=0);b.screenSizePerspectiveAlignment?a.factorAlignment=w.precomputeScaleFactor(U.cosAngle,c,b.screenSizePerspectiveAlignment,a.factorAlignment):(a.factorAlignment.factor=a.factor.factor,a.factorAlignment.scale=a.factor.scale,a.factorAlignment.minPixelSize=a.factor.minPixelSize,a.factorAlignment.paddingPixels=a.factor.paddingPixels)};c.prototype.applyVerticalOffsetTransformation=function(a,
b,c,e,g,h){var d=this.params;p.isMat4(c)&&(c=k.mat3.fromMat4(Q,c));if(!d.verticalOffset||!d.verticalOffset.screenLength)return g&&(d.screenSizePerspective||d.screenSizePerspectiveAlignment)?(e=this.normalAndViewAngle(b,c,e),d=f.vec3.length(a),this.updateScaleInfo(g,e.cosAngle,d)):g&&(g.factor.scale=1,g.factorAlignment.scale=1),h?f.vec3.copy(h,a):a;b=this.normalAndViewAngle(b,c,e);c=f.vec3.length(a);e=z.verticalOffsetAtDistance(e,c,d.verticalOffset,b.cosAngle,d.screenSizePerspectiveAlignment||d.screenSizePerspective);
g&&this.updateScaleInfo(g,b.cosAngle,c);return f.vec3.add(h||a,a,f.vec3.scale(b.normal,b.normal,e))};c.prototype.getGLMaterials=function(){return{color:K,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:O}};c.prototype.calculateRelativeScreenBounds=function(a,b,c){void 0===c&&(c=q.create());var f=this.params,g=c;void 0===g&&(g=H);e.vec2.copy(g,f.anchorPos);g[0]*=-a[0];g[1]*=-a[1];g[0]+=f.screenOffset[0]*b;g[1]+=f.screenOffset[1]*b;c[2]=c[0]+a[0];c[3]=c[1]+a[1];return c};c.prototype.calculateAnchorPosForRendering=
function(a){return L(this.params,a)};c.shouldRenderVisibilityDuringRenderPass=function(a){return 0===a||4};return c}(x);var K=function(a){function b(b,c,e){b=a.call(this,b,c,e,b.getParameters().textureId)||this;b.isOcclusionSlot=!1;b.updateParameters();return b}n(b,a);b.prototype.selectSlot=function(){this.mainSlot=this.params.drawInSecondSlot?17:16};b.prototype.selectProgram=function(){var a=this.params;this.occlusionProgram=this.programRep.getProgram(C.occlusionPass,{verticalOffset:!!a.verticalOffset,
screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,slice:a.slicePlaneEnabled});this.renderProgram=this.programRep.getProgram(C.colorPass,{occlTest:a.occlusionTest,sdf:a.textureIsSignedDistanceField,vvSize:!!a.vvSizeEnabled,vvColor:!!a.vvColorEnabled,verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,debugDrawBorder:!!a.debugDrawBorder,slice:a.slicePlaneEnabled});
this.renderPipelineState=F.makePipelineState({blending:F.simpleBlendingParams(1,771),polygonOffset:a.polygonOffset&&ta,depthTest:{func:515},depthWrite:F.defaultDepthWriteParams,colorWrite:F.defaultColorWriteParams});this.occlusionPipelineState=F.makePipelineState({depthTest:{func:515},depthWrite:F.defaultDepthWriteParams,colorWrite:F.defaultColorWriteParams})};b.prototype.beginSlot=function(a){if(this.params.occlusionTest)return this.isOcclusionSlot=11===a,11===a||a===this.mainSlot;this.isOcclusionSlot=
!1;return a===this.mainSlot};b.prototype.getProgram=function(){return this.isOcclusionSlot?this.occlusionProgram:this.renderProgram};b.prototype.getPrograms=function(){return[this.occlusionProgram,this.renderProgram]};b.prototype.updateParameters=function(){this.params=z.copyParameters(this.material.getParameters());this.updateTexture(this.params.textureId);this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,b){if(this.isOcclusionSlot){var c=this.occlusionProgram;a.bindProgram(c);
a.setPipelineState(this.occlusionPipelineState);E(c,this.params,b);c.setUniform4f("color",1,1,1,1);c.setUniform1f("pixelRatio",b.pixelRatio||1)}else c=this.renderProgram,a.bindProgram(c),a.setPipelineState(this.renderPipelineState),this.bindTexture(a,c),this.bindTextureScale(a,c),E(c,this.params,b),N(a,c,this.params,b)};b.prototype.bindView=function(a,b){a=b.origin;var c=this.getProgram();z.bindView(a,b.view,c);z.bindCamPos(a,b.viewInvTransp,c);this.params.slicePlaneEnabled&&z.bindSlicePlane(b.origin,
b.slicePlane,c)};b.prototype.bindInstance=function(a,b){a=this.getProgram();a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.release=function(a){};b.prototype.getDrawMode=function(){return this.isOcclusionSlot?0:4};return b}(y),O=function(a){function b(b,c,e){b=a.call(this,b,c,e,b.getParameters().textureId)||this;b.updateParameters();return b}n(b,a);b.prototype.selectSlot=function(){this.mainSlot=this.params.drawInSecondSlot?
17:16};b.prototype.beginSlot=function(a){return a===this.mainSlot};b.prototype.getProgram=function(){return this.program};b.prototype.updateParameters=function(){this.params=z.copyParameters(this.material.getParameters());this.updateTexture(this.params.textureId);this.selectProgram();this.selectSlot()};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(C.highlightPass,{occlTest:a.occlusionTest,sdf:a.textureIsSignedDistanceField,vvSize:!!a.vvSizeEnabled,
vvColor:!!a.vvColorEnabled,verticalOffset:!!a.verticalOffset,screenSizePerspective:!!a.screenSizePerspective,centerOffsetUnitsScreen:"screen"===a.centerOffsetUnits,binaryHighlightOcclusion:a.binaryHighlightOcclusion,slice:a.slicePlaneEnabled});this.pipelineState=F.makePipelineState({blending:F.separateBlendingParams(1,1,771,771),polygonOffset:a.polygonOffset&&ta,depthTest:{func:513},colorWrite:F.defaultColorWriteParams})};b.prototype.bind=function(a,b){var c=this.program;a.bindProgram(c);a.setPipelineState(this.pipelineState);
this.bindTexture(a,c);this.bindTextureScale(a,c);E(c,this.params,b);N(a,c,this.params,b);z.bindHighlightRendering(a,b,this.program)};b.prototype.bindView=function(a,b){a=b.origin;var c=this.getProgram();z.bindView(a,b.view,c);z.bindCamPos(a,b.viewInvTransp,c);this.params.slicePlaneEnabled&&z.bindSlicePlane(b.origin,b.slicePlane,c)};b.prototype.bindInstance=function(a,b){a=this.getProgram();a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};
b.prototype.release=function(a){};b.prototype.getDrawMode=function(){return 4};return b}(y),I={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},H=c.vec2f64.create(),S=a.vec3f64.create(),P=a.vec3f64.create(),V=l.createRenderScreenPointArray3(),T=a.vec3f64.create(),Z=a.vec3f64.create(),Q=b.mat3f64.create(),J=g.mat4f64.create(),R=a.vec3f64.create(),U={normal:T,cosAngle:0},X=g.mat4f64.create();h.mat4.identity(X);var ca=1,G=2,Y=
[0,0],la=a.vec3f64.fromValues(0,0,1),ja={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,
screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:c.vec2f64.fromValues(.5,.5),shaderPolygonOffset:1E-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",debugDrawBorder:!1},na=v.newLayout().vec3f(m.VertexAttrConstants.POSITION).vec3f(m.VertexAttrConstants.NORMAL).vec2f(m.VertexAttrConstants.UV0).vec4u8(m.VertexAttrConstants.COLOR).vec2f(m.VertexAttrConstants.SIZE).vec4f(m.VertexAttrConstants.AUXPOS1).vec4f(m.VertexAttrConstants.AUXPOS2),pa=function(){function a(a){this.material=
a;this.vertexBufferLayout=na}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return 6*a.indices[m.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,c,e){u.writePosition(b.indices[m.VertexAttrConstants.POSITION],b.vertexAttr[m.VertexAttrConstants.POSITION].data,a.transformation,c.position,e,6);u.writeNormal(b.indices[m.VertexAttrConstants.NORMAL],b.vertexAttr[m.VertexAttrConstants.NORMAL].data,a.invTranspTransformation,
c.normal,e,6);a=b.vertexAttr[m.VertexAttrConstants.UV0].data;var f=void 0,g=void 0,h=void 0,d=void 0;null==a||4>a.length?(a=this.material.getParameters(),g=f=0,h=a.texCoordScale[0],d=a.texCoordScale[1]):(f=a[0],g=a[1],h=a[2],d=a[3]);var h=Math.min(1.99999,h+1),d=Math.min(1.99999,d+1),k=b.indices[m.VertexAttrConstants.POSITION].length,l=c.uv0;a=e;for(var p=0;p<k;++p)l.set(a,0,f),l.set(a,1,g),a+=1,l.set(a,0,h),l.set(a,1,g),a+=1,l.set(a,0,h),l.set(a,1,d),a+=1,l.set(a,0,h),l.set(a,1,d),a+=1,l.set(a,0,
f),l.set(a,1,d),a+=1,l.set(a,0,f),l.set(a,1,g),a+=1;u.writeColor(b.indices[m.VertexAttrConstants.COLOR],b.vertexAttr[m.VertexAttrConstants.COLOR].data,4,c.color,e,6);f=b.indices[m.VertexAttrConstants.SIZE];g=b.vertexAttr[m.VertexAttrConstants.SIZE].data;h=f.length;d=c.size;a=e;for(p=0;p<h;++p)for(var k=g[2*f[p]],l=g[2*f[p]+1],q=0;6>q;++q)d.set(a,0,k),d.set(a,1,l),a+=1;b.indices[m.VertexAttrConstants.AUXPOS1]&&b.vertexAttr[m.VertexAttrConstants.AUXPOS1]&&u.writeBufferVec4(b.indices[m.VertexAttrConstants.AUXPOS1],
b.vertexAttr[m.VertexAttrConstants.AUXPOS1].data,c.auxpos1,e,6);b.indices[m.VertexAttrConstants.AUXPOS2]&&b.vertexAttr[m.VertexAttrConstants.AUXPOS2]&&u.writeBufferVec4(b.indices[m.VertexAttrConstants.AUXPOS2],b.vertexAttr[m.VertexAttrConstants.AUXPOS2].data,c.auxpos2,e,6)};return a}(),ta={factor:0,units:-4};return r})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["require","exports"],function(r,d){function n(d){return d instanceof Float32Array&&16<=d.length}function l(d){return Array.isArray(d)&&
16<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isMat4f32=n;d.isMat4f64=l;d.isMat4=function(d){return n(d)||l(d)}})},"esri/views/3d/webgl-engine/lib/GLMaterialTexture":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./DefaultTextureUnits ./GLMaterial ../materials/internal/MaterialUtil".split(" "),function(r,d,n,l,k,b){return function(h){function g(e,c,f,a,g,d,k,l,y){void 0===y&&(y=!1);e=h.call(this,e,c)||this;e.textureRep=f;e.textureId=a;e.initTransparent=
y;e.glTextureRef=b.acquireIfNotUndefined(e.textureId,f,e.initTransparent);g&&(e.glTextureRefNormal=b.acquireIfNotUndefined(g,f,e.initTransparent));d&&(e.glTextureRefEmission=b.acquireIfNotUndefined(d,f,e.initTransparent));k&&(e.glTextureRefOcclusion=b.acquireIfNotUndefined(k,f,e.initTransparent));l&&(e.glTextureRefRoughnessMetallness=b.acquireIfNotUndefined(l,f,e.initTransparent));return e}n(g,h);g.prototype.dispose=function(){b.releaseIfNotUndefined(this.textureId,this.textureRep)};g.prototype.updateTexture=
function(e){e!==this.textureId&&(b.releaseIfNotUndefined(this.textureId,this.textureRep),this.textureId=e,this.glTextureRef=b.acquireIfNotUndefined(this.textureId,this.textureRep,this.initTransparent))};g.prototype.bindTexture=function(b,c){null!=this.glTextureRef&&(c.setUniform1i("tex",l.DefaultTextureUnits.DIFFUSE),b.bindTexture(this.glTextureRef.getGLTexture(),l.DefaultTextureUnits.DIFFUSE));this.glTextureRefNormal&&(c.setUniform1i("texNormal",l.DefaultTextureUnits.NORMAL),b.bindTexture(this.glTextureRefNormal.getGLTexture(),
l.DefaultTextureUnits.NORMAL));this.glTextureRefEmission&&(c.setUniform1i("texEmission",l.DefaultTextureUnits.EMISSION),b.bindTexture(this.glTextureRefEmission.getGLTexture(),l.DefaultTextureUnits.EMISSION));this.glTextureRefOcclusion&&(c.setUniform1i("texOcclusion",l.DefaultTextureUnits.OCCLUSION),b.bindTexture(this.glTextureRefOcclusion.getGLTexture(),l.DefaultTextureUnits.OCCLUSION));this.glTextureRefRoughnessMetallness&&(c.setUniform1i("texMetallicRoughness",l.DefaultTextureUnits.METALLIC_ROUGHNESS),
b.bindTexture(this.glTextureRefRoughnessMetallness.getGLTexture(),l.DefaultTextureUnits.METALLIC_ROUGHNESS))};g.prototype.bindTextureSize=function(b,c){null!=this.glTextureRef&&(b=this.glTextureRef.getGLTexture(),c.setUniform2f("texSize",b.descriptor.width,b.descriptor.height))};g.prototype.bindTextureScale=function(b,c){(b=this.glTextureRef&&this.glTextureRef.getGLTexture())&&b.descriptor.textureCoordinateScaleFactor?c.setUniform2fv("textureCoordinateScaleFactor",b.descriptor.textureCoordinateScaleFactor):
c.setUniform2f("textureCoordinateScaleFactor",1,1)};return g}(k)})},"esri/views/3d/webgl-engine/lib/DefaultTextureUnits":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultTextureUnits={DIFFUSE:0,COMPONENT_COLOR:1,NORMAL:2,EMISSION:3,OCCLUSION:4,METALLIC_ROUGHNESS:5}})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./AutoDisposable"],function(r,d,n,l){return function(d){function b(b,
g){var e=d.call(this)||this;e.material=b;e.programRep=g;return e}n(b,d);b.prototype.isVisible=function(){return this.material.isVisible()};b.prototype.isVisibleInPass=function(b){return this.material.isVisibleInPass(b)};b.prototype.getPrograms=function(){return[this.getProgram()]};b.prototype.getDrawMode=function(){return 4};b.prototype.release=function(b,g){};b.prototype.updateAnimation=function(b){return this.material.animationSupported?(this.animate(b),!0):!1};return b}(l.AutoDisposable)})},"esri/views/3d/webgl-engine/lib/AutoDisposable":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this._isDisposed=!1}d.prototype.dispose=function(){for(var d=this.__proto__.__managedDisposables__||[],k=d.length-1;0<=k;k--){var b=d[k];this[b]&&"function"===typeof this[b].dispose&&this[b].dispose();this[b]=null}this._isDisposed=!0};Object.defineProperty(d.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0});return d}();d.AutoDisposable=r;d.autoDispose=function(){return function(d,
l){d.__managedDisposables__=d.__managedDisposables__||[];d.__managedDisposables__.push(l)}}})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("require exports ../../../../../core/mathUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f32 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4 ../../../../../geometry/support/aaBoundingBox ../../lib/ComponentUtils ../../lib/doublePrecisionUtils ../../lib/screenSizePerspectiveUtils ../../lib/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){function v(a,b,e,f,g){var h=x(b,e,F);c.setMin(B,a.getBBMin());c.setMax(B,a.getBBMax());if(w(B,b,h,f)){var h=a.getPrimitiveIndices(),d=a.getIndices(),k=a.getPosition(),l=h?h.length:d.length/3;if(l>P&&(a=a.getChildren(),void 0!==a)){for(h=0;8>h;++h)void 0!==a[h]&&v(a[h],b,e,f,g);return}t(b,e,0,l,d,k,h,g)}}function t(a,b,c,e,f,g,h,d){if(h){var k=g.data,l=g.offsetIdx;g=g.strideIdx;var p=a[0],m=a[1];a=a[2];var u=b[0]-p,q=b[1]-m;for(b=b[2]-a;c<e;++c){var z=h[c],B=3*
z,t=l+g*f[B++],x=k[t++],v=k[t++],w=k[t],t=l+g*f[B++],C=k[t++],I=k[t++],U=k[t],t=l+g*f[B],B=k[t++],n=k[t++],C=C-x,I=I-v,U=U-w,B=B-x,n=n-v,t=k[t]-w,H=q*t-n*b,F=b*B-t*u,X=u*n-B*q,K=C*H+I*F+U*X;if(!(Math.abs(K)<=E)){x=p-x;v=m-v;w=a-w;H=x*H+v*F+w*X;if(0<K){if(0>H||H>K)continue}else if(0<H||H<K)continue;F=v*U-I*w;w=w*C-U*x;v=x*I-C*v;x=u*F+q*w+b*v;if(0<K){if(0>x||H+x>K)continue}else if(0<x||H+x<K)continue;w=(B*F+n*w+t*v)/K;0<=w&&(C=y(C,I,U,B,n,t,N),d(w,C,z))}}}else for(h=g.data,k=g.offsetIdx,l=g.strideIdx,
g=a[0],p=a[1],m=a[2],a=b[0]-g,u=b[1]-p,q=b[2]-m,b=c,c*=3;b<e;++b)if(n=k+l*f[c++],K=h[n++],v=h[n++],w=h[n],n=k+l*f[c++],z=h[n++],C=h[n++],I=h[n],n=k+l*f[c++],U=h[n++],B=h[n++],z-=K,C-=v,I-=w,U-=K,B-=v,n=h[n]-w,x=u*n-B*q,H=q*U-n*a,F=a*B-U*u,t=z*x+C*H+I*F,!(Math.abs(t)<=E)){K=g-K;v=p-v;w=m-w;x=K*x+v*H+w*F;if(0<t){if(0>x||x>t)continue}else if(0<x||x<t)continue;H=v*I-C*w;w=w*z-I*K;v=K*C-z*v;K=a*H+u*w+q*v;if(0<t){if(0>K||x+K>t)continue}else if(0<K||x+K<t)continue;w=(U*H+B*w+n*v)/t;0<=w&&(z=y(z,C,I,U,B,
n,N),d(w,z,b))}}function y(a,b,c,e,f,g,d){h.vec3.set(L,a,b,c);h.vec3.set(K,e,f,g);h.vec3.cross(d,L,K);h.vec3.normalize(d,d);return d}function x(a,b,c){return h.vec3.set(c,1/(b[0]-a[0]),1/(b[1]-a[1]),1/(b[2]-a[2]))}function w(a,b,c,e){var f=(a[0]-e-b[0])*c[0],g=(a[3]+e-b[0])*c[0],h=Math.min(f,g),f=Math.max(f,g),g=(a[1]-e-b[1])*c[1],d=(a[4]+e-b[1])*c[1],h=Math.max(h,Math.min(g,d)),f=Math.min(f,Math.max(g,d));if(h>f)return!1;g=(a[2]-e-b[2])*c[2];a=(a[5]+e-b[2])*c[2];h=Math.max(h,Math.min(g,a));f=Math.min(f,
Math.max(g,a));return h<=f}function m(a,b){b=b?m(b):{};for(var c in a){var e=a[c];e&&e.forEach&&(e=u(e));null==e&&c in b||(b[c]=e)}return b}function u(a){var b=[];a.forEach(function(a){return b.push(a)});return b}Object.defineProperty(d,"__esModule",{value:!0});var z=b.mat4f64.create(),B=c.create(),C=q.VertexAttrConstants;d.IDENTITY=b.mat4f64.create();d.intersectTriangleGeometry=function(a,b,e,g,h,d,k,l){b=b&&b.componentVisibilities;g=g.tolerance;if(1<a.componentCount)a:{e=x(h,d,F);l=a.componentCount;
var p=a.componentOffsets,m=a.getIndices(C.POSITION),u=a.getAttribute(C.POSITION),z=a.boundingInfo;if(z&&(c.setMin(B,z.getBBMin()),c.setMax(B,z.getBBMax()),!w(B,h,e,g)))break a;for(z=0;z<l;z++)if(!b||f.getVisibility(b,z)){if(a.getComponentAABB){var y=a.getComponentAABB(z,B);if(!w(y,h,e,g))continue}t(h,d,p[z]/3,p[z+1]/3,m,u,void 0,k)}}else if(!b||f.getVisibility(b,0))a.boundingInfo?(q.assert("triangle"===a.data.primitiveType),v(a.boundingInfo,h,d,g,k)):(b=a.getIndices(C.POSITION),a=a.getAttribute(C.POSITION),
t(h,d,0,b.length/3,b,a,void 0,k))};var F=g.vec3f64.create(),E=Math.pow(2,-52),N=g.vec3f64.create();d.intersectTriangles=t;var L=g.vec3f64.create(),K=g.vec3f64.create();d.computeNormal=y;d.intersectAabbInvDir=w;d.transformToWorld=function(a,b,c){return e.vec4.set(c,a[0]-b[0],a[1]-b[1],a[2]-b[2],1)};d.transformToView=function(a,b,c,f){l.mat4.translate(z,c,b);c=z;return e.vec4.transformMat4(f,a,c)};d.transformToProjection=function(a,b,c,f){f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3];return e.vec4.transformMat4(f,
f,b)};d.transformToNDC=function(a,b){return e.vec4.scale(b,a,1/Math.abs(a[3]))};d.applyScreenSizePerspectiveScale=function(a,b,c,e,f){return p.scale(a,e,c,f)};d.verticalOffsetAtDistance=function(a,b,c,e,f){var g=(c.screenLength||0)*a.pixelRatio;f&&(g=p.scale(g,e,b,f));return n.clamp(g*Math.tan(.5*a.fovY)/(.5*a.fullHeight)*b,c.minWorldLength||0,null!=c.maxWorldLength?c.maxWorldLength:Infinity)};d.acquireIfNotUndefined=function(a,b,c){if(void 0!==a)return b.acquire(a,c)};d.releaseIfNotUndefined=function(a,
b){void 0!==a&&b.release(a)};var O=k.mat4f32.create();d.bindView=function(a,b,c){l.mat4.translate(O,b,a);c.setUniform3fv("localOrigin",a);c.setUniformMatrix4fv("view",O)};d.bindCamPos=function(a,b,c){c.setUniform3f("camPos",b[3]-a[0],b[7]-a[1],b[11]-a[2])};var I=g.vec3f64.create(),H=g.vec3f64.create();d.bindViewOriginDouble=function(b,c){a.encodeDoubleArraySplit(b,I,H,3);c.setUniform3fv("viewOriginHi",I);c.setUniform3fv("viewOriginLo",H)};var S=g.vec3f64.create();d.bindSlicePlane=function(a,b,c){h.vec3.subtract(S,
b.origin,a);c.setUniform3fv("slicePlaneOrigin",S);c.setUniform3fv("slicePlaneBasis1",b.basis1);c.setUniform3fv("slicePlaneBasis2",b.basis2)};d.bindVerticalOffset=function(a,b,c){if(a){var e=b.fovY,f=b.viewport[3],g=void 0;void 0===g&&(g=V);g.screenLength=a.screenLength;g.perDistance=Math.tan(.5*e)/(.5*f);g.minWorldLength=a.minWorldLength;g.maxWorldLength=a.maxWorldLength;a=g;c.setUniform4f("verticalOffset",a.screenLength*(b.pixelRatio||1),a.perDistance,a.minWorldLength,a.maxWorldLength)}};d.bindHighlightRendering=
function(a,b,c){a.bindTexture(b.highlightDepthTexture,5);c.setUniform1i("depthTex",5);c.setUniform4f("highlightViewportPixelSz",0,0,1/b.viewport[2],1/b.viewport[3])};d.bindScreenSizePerspective=function(a,b,c){void 0===c&&(c="screenSizePerspectiveAlignment");if(a){var e=a.parameters;b.setUniform4f(c,e.divisor,e.offset,e.minPixelSize,a.paddingPixelsOverride)}};d.copyParameters=m;d.updateParameters=function(a,b){var c=!1,e;for(e in b){var f=b[e];void 0!==f&&(c=!0,Array.isArray(f)?a[e]=f.slice():a[e]=
f)}return c};(function(a){function b(a){return(a.shadowMappingEnabled?1:0)|(a.ssaoEnabled?2:0)}a.create=function(a,c){for(var e=[],f=0;2>f;f++)for(var g=0;2>g;g++){var h=b({shadowMappingEnabled:1===f,ssaoEnabled:1===g}),d=b({shadowMappingEnabled:1===f,ssaoEnabled:1===g&&a.receiveSSAO});e[h]=e[d]||c({receiveShadows:1===f,receiveSSAO:1===g&&a.receiveSSAO})}return{programs:e.filter(function(a){return null!=a}),byParameter:e}};a.lookup=function(a,c){return a.byParameter[b(c)]};a.programs=function(a){return a.programs}})(d.BindParametersMap||
(d.BindParametersMap={}));d.intersectDrapedRenderLineGeometry=function(a,b,c,e,f,g,h,d,k){if(e.enable.selectionMode){b=a.getAttribute(C.POSITION).data;e=a.getAttribute(C.SIZE);c=g[0];g=g[1];a=(((e&&e.data[0])+h)/2+4)*a.pixelRatio;h=Number.MAX_VALUE;for(e=0;e<b.length-5;e+=3){var l=b[e],p=b[e+1];k=c-l;f=g-p;var l=b[e+3]-l,p=b[e+4]-p,m=n.clamp((l*k+p*f)/(l*l+p*p),0,1);k=l*m-k;f=p*m-f;f=k*k+f*f;f<h&&(h=f)}h<a*a&&d()}};d.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};var P=1E3,V={screenLength:0,
perDistance:0,minWorldLength:0,maxWorldLength:0}})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat4f32=n})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d};d.clone=function(d){var l=new Float32Array(16);
l[0]=d[0];l[1]=d[1];l[2]=d[2];l[3]=d[3];l[4]=d[4];l[5]=d[5];l[6]=d[6];l[7]=d[7];l[8]=d[8];l[9]=d[9];l[10]=d[10];l[11]=d[11];l[12]=d[12];l[13]=d[13];l[14]=d[14];l[15]=d[15];return l};d.fromValues=function(d,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x){var w=new Float32Array(16);w[0]=d;w[1]=l;w[2]=k;w[3]=b;w[4]=h;w[5]=g;w[6]=e;w[7]=c;w[8]=f;w[9]=a;w[10]=p;w[11]=q;w[12]=v;w[13]=t;w[14]=y;w[15]=x;return w};d.createView=function(d,l){return new Float32Array(d,l,16)}})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["require",
"exports"],function(r,d){function n(b,h,g){for(var e=0;e<g;++e)h[2*e]=b[e],h[2*e+1]=b[e]-h[2*e]}Object.defineProperty(d,"__esModule",{value:!0});d.encodeDouble=function(b,h){k[0]=b;k[1]=b-k[0];h[0]=k[0];h[1]=k[1]};d.encodeDoubleArray=n;d.decodeDoubleArray=function(b,h,g){for(var e=0;e<g;++e)h[e]=b[2*e]+b[2*e+1]};d.encodeDoubleArraySplit=function(b,h,g,e){for(var c=0;c<e;++c)l[0]=b[c],n(l,k,1),h[c]=k[0],g[c]=k[1]};var l=new Float64Array(1),k=new Float32Array(2)})},"esri/views/3d/webgl-engine/lib/Material":function(){define(["require",
"exports","./IdGen","./ModelContentType"],function(r,d,n,l){return function(){function d(b){this.animationSupported=this.supportsEdges=!1;this._parentStage=null;this._visible=!0;this._renderOccluded=1;this._renderPriority=0;this.id=d._idGen.gen(b)}Object.defineProperty(d.prototype,"parentStage",{get:function(){return this._parentStage},enumerable:!0,configurable:!0});d.prototype.addParentStage=function(b){this._parentStage=b};d.prototype.removeParentStage=function(b){this._parentStage=null};Object.defineProperty(d.prototype,
"visible",{get:function(){return this._visible},set:function(b){b!==this._visible&&(this._visible=b,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"renderOccluded",{get:function(){return this._renderOccluded},set:function(b){b!==this._renderOccluded&&(this._renderOccluded=b,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"renderPriority",{get:function(){return this._renderPriority},set:function(b){b!==
this._renderPriority&&(this._renderPriority=b,this.notifyDirty("matChanged"))},enumerable:!0,configurable:!0});d.prototype.isVisibleInPass=function(b){return!0};d.prototype.isVisible=function(){return this._visible};d.prototype.notifyDirty=function(b){this.parentStage&&this.parentStage.notifyDirty(l.MATERIAL,this,b)};d._idGen=new n;return d}()})},"esri/views/3d/webgl-engine/materials/internal/bufferWriters":function(){define(["require","exports","../../../support/buffer/BufferView","../../lib/Util"],
function(r,d,n,l){function k(b,a,c,e,g){var f=c.typedBuffer;c=c.typedBufferStride;var h=b.length;e*=c;if(null==g||1===g)for(var d=0;d<h;++d){var k=2*b[d];f[e]=a[k];f[e+1]=a[k+1];e+=c}else for(d=0;d<h;++d)for(var k=2*b[d],l=0;l<g;++l)f[e]=a[k],f[e+1]=a[k+1],e+=c}function b(b,a,c,e,g){var f=c.typedBuffer;c=c.typedBufferStride;var h=b.length;e*=c;if(null==g||1===g)for(var d=0;d<h;++d){var k=3*b[d];f[e]=a[k];f[e+1]=a[k+1];f[e+2]=a[k+2];e+=c}else for(d=0;d<h;++d)for(var k=3*b[d],l=0;l<g;++l)f[e]=a[k],
f[e+1]=a[k+1],f[e+2]=a[k+2],e+=c}function h(b,a,c,e,g){var f=c.typedBuffer;c=c.typedBufferStride;var h=b.length;e*=c;if(null==g||1===g)for(var d=0;d<h;++d){var k=4*b[d];f[e]=a[k];f[e+1]=a[k+1];f[e+2]=a[k+2];f[e+3]=a[k+3];e+=c}else for(d=0;d<h;++d)for(var k=4*b[d],l=0;l<g;++l)f[e]=a[k],f[e+1]=a[k+1],f[e+2]=a[k+2],f[e+3]=a[k+3],e+=c}function g(c,a,e,g,h,d){if(e){var f=g.typedBuffer;g=g.typedBufferStride;var k=c.length;h*=g;if(null==d||1===d)for(var l=0;l<k;++l){var p=3*c[l],u=a[p],q=a[p+1],B=a[p+2];
f[h]=e[0]*u+e[4]*q+e[8]*B+e[12];f[h+1]=e[1]*u+e[5]*q+e[9]*B+e[13];f[h+2]=e[2]*u+e[6]*q+e[10]*B+e[14];h+=g}else for(l=0;l<k;++l)for(var p=3*c[l],u=a[p],q=a[p+1],B=a[p+2],p=e[0]*u+e[4]*q+e[8]*B+e[12],t=e[1]*u+e[5]*q+e[9]*B+e[13],u=e[2]*u+e[6]*q+e[10]*B+e[14],q=0;q<d;++q)f[h]=p,f[h+1]=t,f[h+2]=u,h+=g}else b(c,a,g,h,d)}function e(c,a,e,g,h,d){if(e){var f=g.typedBuffer;g=g.typedBufferStride;var k=c.length;h*=g;if(null==d||1===d)for(var l=0;l<k;++l){var p=3*c[l],u=a[p],q=a[p+1],B=a[p+2];f[h]=e[0]*u+e[4]*
q+e[8]*B;f[h+1]=e[1]*u+e[5]*q+e[9]*B;f[h+2]=e[2]*u+e[6]*q+e[10]*B;h+=g}else for(l=0;l<k;++l)for(var p=3*c[l],u=a[p],q=a[p+1],B=a[p+2],p=e[0]*u+e[4]*q+e[8]*B,t=e[1]*u+e[5]*q+e[9]*B,u=e[2]*u+e[6]*q+e[10]*B,q=0;q<d;++q)f[h]=p,f[h+1]=t,f[h+2]=u,h+=g}else b(c,a,g,h,d)}function c(b,a,c,e,g,h){var f=e.typedBuffer;e=e.typedBufferStride;var d=b.length;g*=e;if(null==h||1===h)if(4===c)for(c=0;c<d;++c){var k=4*b[c];f[g]=a[k];f[g+1]=a[k+1];f[g+2]=a[k+2];f[g+3]=a[k+3];g+=e}else{if(3===c)for(c=0;c<d;++c)k=3*b[c],
f[g]=a[k],f[g+1]=a[k+1],f[g+2]=a[k+2],f[g+3]=255,g+=e}else if(4===c)for(c=0;c<d;++c)for(var k=4*b[c],l=0;l<h;++l)f[g]=a[k],f[g+1]=a[k+1],f[g+2]=a[k+2],f[g+3]=a[k+3],g+=e;else if(3===c)for(c=0;c<d;++c)for(k=3*b[c],l=0;l<h;++l)f[g]=a[k],f[g+1]=a[k+1],f[g+2]=a[k+2],f[g+3]=255,g+=e}Object.defineProperty(d,"__esModule",{value:!0});d.writeBufferVec2=k;d.writeBufferVec3=b;d.writeBufferVec4=h;d.writeBufferMat3f=function(b,a,c,e){var f=c.typedBuffer;c=c.typedBufferStride;var g=b.length;e*=c;for(var h=0;h<
g;++h){for(var d=9*b[h],k=0;9>k;++k)f[e+k]=a[d+k];e+=c}};d.writeBufferMat4f=function(b,a,c,e){var f=c.typedBuffer;c=c.typedBufferStride;var g=b.length;e*=c;for(var h=0;h<g;++h){for(var d=16*b[h],k=0;16>k;++k)f[e+k]=a[d+k];e+=c}};d.writePosition=g;d.writeNormal=e;d.writeColor=c;d.writeMultipliedColor=function(b,a,c,e,g,h,d){var f=g.typedBuffer;g=g.typedBufferStride;var k=b.length;h*=g;if(null==d||1===d)if(4===c)for(c=0;c<k;++c){var l=4*b[c];f[h]=a[l]*e[0];f[h+1]=a[l+1]*e[1];f[h+2]=a[l+2]*e[2];f[h+
3]=a[l+3]*e[3];h+=g}else{if(3===c){var p=255*e[3];for(c=0;c<k;++c)l=3*b[c],f[h]=a[l]*e[0],f[h+1]=a[l+1]*e[1],f[h+2]=a[l+2]*e[2],f[h+3]=p,h+=g}}else if(4===c)for(c=0;c<k;++c)for(var l=4*b[c],q=0;q<d;++q)f[h]=a[l]*e[0],f[h+1]=a[l+1]*e[1],f[h+2]=a[l+2]*e[2],f[h+3]=a[l+3]*e[3],h+=g;else if(3===c)for(p=255*e[3],c=0;c<k;++c)for(l=3*b[c],q=0;q<d;++q)f[h]=a[l]*e[0],f[h+1]=a[l+1]*e[1],f[h+2]=a[l+2]*e[2],f[h+3]=p,h+=g};d.writeDefaultAttributes=function(b,a,d,q,v,t){var f=0;for(a=a.fieldNames;f<a.length;f++){var p=
a[f],w=b.vertexAttr[p],m=b.indices[p];if(w&&m)switch(p){case l.VertexAttrConstants.POSITION:l.assert(3===w.size);(p=v.getField(p,n.BufferViewVec3f))&&g(m,w.data,d,p,t);break;case l.VertexAttrConstants.NORMAL:l.assert(3===w.size);(p=v.getField(p,n.BufferViewVec3f))&&e(m,w.data,q,p,t);break;case l.VertexAttrConstants.UV0:l.assert(2===w.size);(p=v.getField(p,n.BufferViewVec2f))&&k(m,w.data,p,t);break;case l.VertexAttrConstants.REGION:l.assert(4===w.size);(p=v.getField(p,n.BufferViewVec4u16))&&h(m,w.data,
p,t);break;case l.VertexAttrConstants.COLOR:l.assert(3===w.size||4===w.size);(p=v.getField(p,n.BufferViewVec4u8))&&c(m,w.data,w.size,p,t);break;case l.VertexAttrConstants.SYMBOLCOLOR:l.assert(3===w.size||4===w.size);(p=v.getField(p,n.BufferViewVec4u8))&&c(m,w.data,w.size,p,t);break;case l.VertexAttrConstants.TANGENT:l.assert(4===w.size),(p=v.getField(p,n.BufferViewVec4f))&&h(m,w.data,p,t)}}}})},"esri/views/3d/webgl-engine/materials/renderers/MergedRenderer":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../support/buffer/glUtil ../../lib/DefaultVertexAttributeLocations ../../lib/Float32ArrayList ../../lib/IntervalUtilities ../../lib/Util ../WaterGLMaterial ./Instance ./utils ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(a,b,c,e){for(var f=new Map,g=b.vertexBufferLayout.stride/4,h=function(c,e){var h=c.origin,d=a.get(h.id),k=f.get(h.id);null==k&&(k={optimalCount:null==d?0:d.optimalCount,sparseCount:null==d?0:d.buffer.getSize(),toAdd:[],toRemove:[],origin:h.vec3},f.set(h.id,k));h=b.elementCount(c.data)*g;e?(k.optimalCount+=h,k.sparseCount+=h,k.toAdd.push(c)):(k.optimalCount-=h,k.toRemove.push(c))},d=0;d<c.length;d++){var k=c[d];h(k,!0)}for(c=0;c<e.length;c++)k=e[c],
h(k,!1);return f}r=function(){function d(c,e,f,g){void 0===g&&(g=b.Default3D);this._dataByOrigin=new Map;this._highlightCount=0;this._hasWater=!1;this._rctx=c;this._vertexAttributeLocations=g;this._material=f;this._materialRep=e;this._glMaterials=a.acquireMaterials(this._material,this._materialRep);this._bufferWriter=f.createBufferWriter()}d.prototype.dispose=function(){a.releaseMaterials(this._material,this._materialRep)};Object.defineProperty(d.prototype,"isEmpty",{get:function(){return 0===this._dataByOrigin.size},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return 0<this._highlightCount},enumerable:!0,configurable:!0});d.prototype.hasWater=function(){return this._hasWater};d.prototype.renderPriority=function(){return this._material.renderPriority};d.prototype.modify=function(a){var b=this,c=z;c.clear();this.updateGeometries(a.toUpdate,c);this.addAndRemoveGeometries(a.toAdd,a.toRemove,c);this.updateHighlightCount();c.forEach(function(a){return b.updateDisplayedIndexRanges(a)})};
d.prototype.addAndRemoveGeometries=function(a,b,c){var f=this,g=this._material,h=this._bufferWriter,d=h.vertexBufferLayout,k=d.stride/4,l=this._dataByOrigin,p=t(l,h,a,b);p.forEach(function(a,b){p.delete(b);var h=a.optimalCount,m=a.sparseCount,u=l.get(b);null==u&&(e.assert(0<h),u=f.createData(d,h,a.origin),l.set(b,u));if(0===h)u.vao.dispose(!0),u.vao=null,l.delete(b);else{var q=(b=h<a.sparseCount/2)?h:m,h=y,m=u.buffer.getSize(),z=u.buffer.getArray(),q=u.buffer.resize(q);b||q?f.removeAndRebuild(u,a.toRemove,
k,z,h):0<a.toRemove.length?(f.removeByErasing(u,a.toRemove,k,h),0<a.toAdd.length&&(h.end=m)):(h.begin=m,h.end=m,h.eraseEnd=0);b=x;e.setMatrixTranslation3(b,-a.origin[0],-a.origin[1],-a.origin[2]);f.append(u,g,a.toAdd,k,b,h);a=u.vao.vertexBuffers.geometry;h.eraseEnd>h.end&&(u.buffer.erase(h.end,h.eraseEnd),h.end=h.eraseEnd);a.byteSize!==u.buffer.getArray().buffer.byteLength?a.setData(u.buffer.getArray()):(z=h.begin,b=h.end,z<b&&(m=u.buffer.getArray(),z*=4,a.setSubData(m,z,z,4*b)));(h.updatedDisplayedIndexRange||
u.displayedIndexRanges)&&c.add(u)}})};d.prototype.updateGeometries=function(b,c){for(var f=this._bufferWriter,g=f.vertexBufferLayout.stride/4,h=0;h<b.length;h++){var d=b[h],k=d.updateType,d=d.renderGeometry,l=this._dataByOrigin.get(d.origin.id),p=l&&l.instances.get(d.uniqueName);if(!p)break;k&1&&(p.displayedIndexRange=a.generateRenderGeometryVisibleIndexRanges(d),c.add(l));k&17&&(p.highlightedIndexRanges=a.generateRenderGeometryHighlightRanges(d),l.highlightCount=null);k&6&&(k=l.buffer.getArray(),
l=l.vao,a.calculateTransformRelToOrigin(d,w,m),f.write({transformation:w,invTranspTransformation:m},d.data,f.vertexBufferLayout.createView(k.buffer),p.from),e.assert(p.from+f.elementCount(d.data)===p.to,"material VBO layout has changed"),l.vertexBuffers.geometry.setSubData(k,p.from*g*4,p.from*g*4,p.to*g*4))}};d.prototype.updateDisplayedIndexRanges=function(a){var b=a.instances;a.displayedIndexRanges=[];var c=!0;b.forEach(function(b){b.displayedIndexRange?(a.displayedIndexRanges.push.apply(a.displayedIndexRanges,
g.offsetIntervals(b.displayedIndexRange,b.from)),c=!1):a.displayedIndexRanges.push([b.from,b.to-1])});a.displayedIndexRanges=c?null:g.mergeIntervals(a.displayedIndexRanges)};d.prototype.updateHighlightCount=function(){var a=this;this._highlightCount=0;this._dataByOrigin.forEach(function(b){if(null==b.highlightCount){var c=0;b.instances.forEach(function(a){a.highlightedIndexRanges&&++c});b.highlightCount=c}a._highlightCount+=b.highlightCount})};d.prototype.updateAnimations=function(a){var b=this,e=
!1;this._hasWater=!1;this._glMaterials.forEach(function(f){f&&(e=f.updateAnimation(a)||e);f instanceof c.WaterGLMaterial&&(b._hasWater=!0)});return e};d.prototype.render=function(a,b,c,e){var f=this,g=this._rctx,h=this._glMaterials.get(b.pass),d=4===b.pass;2===b.pass&&null===a&&(a=20);if(!h||null!=a&&!h.beginSlot(a)||d&&0===this._highlightCount)return!1;h.bind(g,c);b=h.getProgram();b.setUniformMatrix4fv("model",u);b.hasUniform("modelNormal")&&b.setUniformMatrix4fv("modelNormal",u);var k=!1;this._dataByOrigin.forEach(function(a){d&&
0===a.highlightCount||(c.origin=a.origin,h.bindView(g,c),k=d?f.renderHighlightPass(h,a,e)||k:f.renderDefaultPass(h,a,e)||k)});h.release(g,c);return k};d.prototype.renderDefaultPass=function(b,c,e){var f=this._rctx,g=b.getProgram();b=b.getDrawMode();var h=c.displayedIndexRanges;if(h&&0===h.length)return!1;q.assertCompatibleVertexAttributeLocations(c.vao,g);f.bindVAO(c.vao);h?a.drawArraysFaceRange(f,h,0,b,e):a.drawArrays(f,b,0,q.vertexCount(c.vao,"geometry"),e);return!0};d.prototype.renderHighlightPass=
function(b,c,e){var f=this._rctx,g=b.getProgram(),h=b.getDrawMode();b=c.vao;q.assertCompatibleVertexAttributeLocations(b,g);f.bindVAO(b);var d=!1;c.instances.forEach(function(b){var c=b.highlightedIndexRanges;if(c&&0!==c.length)for(var g=0;g<c.length;g++){var k=c[g];a.drawArrays(f,h,k.range?k.range[0]+b.from:b.from,k.range?k.range[1]-k.range[0]+1:b.to-b.from,e);d=!0}});return d};d.prototype.createData=function(a,b,c){return{instances:new Map,vao:new v(this._rctx,this._vertexAttributeLocations,{geometry:k.glLayout(a)},
{geometry:p.createVertex(this._rctx,35044)}),buffer:new h(b),optimalCount:0,origin:c,highlightCount:0}};d.prototype.removeAndRebuild=function(a,b,c,e,f){for(var g=f.eraseEnd=0;g<b.length;g++){var h=b[g].uniqueName,d=a.instances.get(h);a.optimalCount-=(d.to-d.from)*c;a.instances.delete(h);f.eraseEnd=Math.max(f.eraseEnd,d.to*c)}var k=0,l=a.buffer.getArray();f.begin=0;f.end=0;var p=-1,m=-1,u=0;a.instances.forEach(function(a){var b=a.from*c,f=a.to*c,g=f-b;p!==m&&m!==b?(l.set(e.subarray(p,m),u),u+=m-p,
p=b):-1===p&&(p=b);m=f;a.from=k/c;k+=g;a.to=k/c});p!==m&&l.set(e.subarray(p,m),u);f.end=k};d.prototype.removeByErasing=function(a,b,c,e){e.begin=Infinity;e.end=-Infinity;e.eraseEnd=-Infinity;for(var f=-1,g=-1,h=0;h<b.length;h++){var d=b[h].uniqueName,k=a.instances.get(d),l=k.from*c,k=k.to*c;f!==g&&g!==l?(a.buffer.erase(f,g),f=l):-1===f&&(f=l);g=k;a.instances.delete(d);a.optimalCount-=k-l;l<e.begin&&(e.begin=l);k>e.end&&(e.end=k)}f!==g&&a.buffer.erase(f,g)};d.prototype.append=function(b,c,g,h,d,k){k.updatedDisplayedIndexRange=
!1;c=this._bufferWriter;for(var l=0;l<g.length;l++){var p=g[l],u=p.data;n.mat4.multiply(w,d,p.transformation);n.mat4.invert(m,w);n.mat4.transpose(m,m);var q=k.end;c.write({transformation:w,invTranspTransformation:m},u,c.vertexBufferLayout.createView(b.buffer.getArray().buffer),k.end/h);var u=c.elementCount(u)*h,z=q+u;e.assert(null==b.instances.get(p.uniqueName));var B=a.generateRenderGeometryVisibleIndexRanges(p),t=a.generateRenderGeometryHighlightRanges(p);t&&(b.highlightCount=null);q=new f(p.name,
q/h,z/h,B,t,void 0,void 0,p.idx);b.instances.set(p.uniqueName,q);B&&(k.updatedDisplayedIndexRange=!0);b.optimalCount+=u;k.end+=u}};return d}();var y={updatedDisplayedIndexRange:!1,begin:0,end:0,eraseEnd:0},x=l.mat4f64.create(),w=l.mat4f64.create(),m=l.mat4f64.create(),u=l.mat4f64.create(),z=new Set;return r})},"esri/views/3d/webgl-engine/lib/Float32ArrayList":function(){define(["require","exports","../../../../core/mathUtils"],function(r,d,n){return function(){function d(d){null==d?d=16:65536>d&&
(d=n.nextHighestPowerOfTwo(d));this.array=new Float32Array(d);this.size=0}d.prototype.resize=function(d,b){void 0===b&&(b=!1);this.size=d;var h;if(this.size>this.array.length){for(d=this.array.length||1;d<this.size;)d*=2;h=new Float32Array(d);b&&h.set(this.array);this.array=h;return!0}if(this.size<=this.array.length/2){d=this.array.length;for(h=2*this.size;d>=h;)d=Math.floor(d/2);h=new Float32Array(d);b&&h.set(this.array.subarray(0,d));this.array=h;return!0}return!1};d.prototype.append=function(d){var b=
this.size;this.resize(this.size+d.length,!0);this.array.set(d,b)};d.prototype.erase=function(d,b){for(;d<b;++d)this.array[d]=0};d.prototype.getArray=function(){return this.array};d.prototype.getSize=function(){return this.size};return d}()})},"esri/views/3d/webgl-engine/lib/IntervalUtilities":function(){define(["require","exports"],function(r,d){return function(){function d(){}d.copyIntervals=function(d){for(var k=[],b=0;b<d.length;b++){var h=d[b];k.push([h[0],h[1]])}return k};d.convertFaceToIndexRange=
function(d,k){for(var b=0;b<d.length;b++){var h=d[b];h[0]*=k;h[1]=h[1]*k+(k-1)}};d.sortIntervals=function(d){return d.sort(function(d,b){return d[0]===b[0]?d[1]>b[1]?1:d[1]<b[1]?-1:0:d[0]>b[0]?1:d[0]<b[0]?-1:0})};d.intersectIntervals=function(d,k){if(0>=d.length)return[];for(var b=[],h=0;h<d.length;h++){var g=d[h];g[1]<k[0]||g[0]>k[1]||(g=[g[0],g[1]],g[0]<k[0]&&(g[0]=k[0]),g[1]>k[1]&&(g[1]=k[1]),b.push(g))}return b};d.mergeIntervals=function(d){if(0>=d.length)return[];var k=[];d=this.sortIntervals(d);
k.push(d[0]);for(var b=1;b<d.length;b++){var h=k[k.length-1];h[1]+1<d[b][0]?k.push(d[b]):h[1]<d[b][1]&&(h[1]=d[b][1],k.pop(),k.push(h))}return k};d.invertIntervals=function(d,k){for(var b=[],h=0,g=0;g<d.length;g++){var e=d[g];e[0]>h&&b.push([h,e[0]-1]);h=e[1]+1}h<=k&&b.push([h,k]);return b};d.offsetIntervals=function(d,k){for(var b=[],h=0;h<d.length;h++){var g=d[h];b.push([g[0]+k,g[1]+k])}return b};return d}()})},"esri/views/3d/webgl-engine/materials/WaterGLMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/maybe ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../lib/GLMaterial ./internal/MaterialUtil ./internal/waterMaterialUtils ../shaders/WaterSurfacePrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function h(a,c,e){a=b.call(this,a,c)||this;a._elapsedTime=0;a.updateParameters();return a}n(h,b);h.prototype.updateParameters=function(){this.params=g.copyParameters(this.material.getParameters());this.selectProgram()};h.prototype._selectPipelineState=function(){this.pipelineState=f.makePipelineState({blending:this.params.transparent&&f.separateBlendingParams(770,1,771,771),depthTest:{func:513},depthWrite:this.params.writeDepth&&
f.defaultDepthWriteParams,colorWrite:f.defaultColorWriteParams})};h.prototype.selectProgram=function(){this.program=this.programRep.getProgram(c.color,{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};h.prototype.beginSlot=function(a){var b=5;this.params.transparent&&(b=this.params.writeDepth?7:10);return a===b};h.prototype.getProgram=function(){return this.program};h.prototype._initTextures=function(a){this.texturePaths=[this.params.waveTexture,this.params.perturbationTexture];
e.waterTextureRepo.initialize(a,this.texturePaths)};h.prototype._bindUniforms=function(a,b){b=this.program;var c=this.params;null!=c.polygonOffset&&(a.gl.enable(a.gl.POLYGON_OFFSET_FILL),a.gl.polygonOffset(c.polygonOffset.factor,c.polygonOffset.units));a.bindProgram(b);a.setPipelineState(this.pipelineState);e.waterTextureRepo.bindRepo(a);b.setUniform1i("texWaveNormal",0);b.setUniform1i("texWavePerturbation",1);b.setUniform1f("dtrExponent",c.dtrExponent);b.setUniform1f("roughness",c.roughness);b.setUniform1f("f0maxSpec",
c.f0maxSpec);b.setUniform4fv("waterColor",c.color);b.setUniform3fv("skyColor",c.sky.horizon);b.setUniform3fv("skyZenitColor",c.sky.zenit);b.setUniform1f("f0Sky",c.f0Sky);b.setUniform1f("f0maxSky",c.f0maxSky);b.setUniform1f("expSky",c.expSky);b.setUniform4f("waveParams",c.waveStrength,c.waveTextureRepeat,c.flowStrength,c.flowOffset);b.setUniform2f("waveDirection",c.waveDirection[0]*c.waveVelocity,c.waveDirection[1]*c.waveVelocity);b.setUniform1f("timeElapsed",.001*this._elapsedTime*c.animationSpeed)};
h.prototype.bind=function(a,b){e.waterTextureRepo.ready()?this._bindUniforms(a,b):e.waterTextureRepo.loading()||this._initTextures(a)};h.prototype.animate=function(a){l.isNone(this._startTime)&&(this._startTime=a);this._elapsedTime=this._startTime-a};h.prototype.release=function(a){null!=this.params.polygonOffset&&a.gl.disable(a.gl.POLYGON_OFFSET_FILL)};h.prototype.bindView=function(b,c){b=this.program;b.setUniform3fv("localOrigin",c.origin);g.bindView(c.origin,c.view,b);g.bindCamPos(c.origin,c.viewInvTransp,
b);var e=c.lightingData;k.vec3.set(a,e.diffuse[0],e.diffuse[1],e.diffuse[2]);b.setUniform3fv("lightIntensity",a);this.params.slicePlaneEnabled&&g.bindSlicePlane(c.origin,c.slicePlane,b);c.shadowMappingEnabled?(c.shadowMap.bind(b),c.shadowMap.bindView(b,c.origin),b.setUniform1i("shadowsEnabled",1)):b.setUniform1i("shadowsEnabled",0)};h.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};h.prototype.getDrawMode=function(){return 4};return h}(h);d.WaterGLMaterial=
r;h=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.bind=function(a,b){a.bindProgram(this.program);a.setPipelineState(this.pipelineState);this.program.setUniform4fv("waterColor",this.params.color)};b.prototype.bindView=function(a,b){this.program.setUniform3fv("localOrigin",b.origin);g.bindView(b.origin,b.view,this.program)};b.prototype.beginSlot=function(a){return null==a};b.prototype.selectProgram=function(){this.program=this.programRep.getProgram(c.drapedColor,
{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};return b}(r);d.WaterDrapedGLMaterial=h;r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.bind=function(a,b){if(e.waterTextureRepo.ready()){b=this.program;var c=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);e.waterTextureRepo.bindRepo(a);b.setUniform1i("texWaveNormal",0);b.setUniform1i("texWavePerturbation",1);b.setUniform4f("waveParams",c.waveStrength,
c.waveTextureRepeat,c.flowStrength,c.flowOffset);b.setUniform2f("waveDirection",c.waveDirection[0]*c.waveVelocity,c.waveDirection[1]*c.waveVelocity);b.setUniform1f("timeElapsed",.001*this._elapsedTime*c.animationSpeed)}else e.waterTextureRepo.loading()||this._initTextures(a)};b.prototype.bindView=function(a,b){this.program.setUniform3fv("localOrigin",b.origin);g.bindView(b.origin,b.view,this.program)};b.prototype.beginSlot=function(a){return 20===a};b.prototype._selectPipelineState=function(){this.pipelineState=
f.makePipelineState({depthTest:{func:513},depthWrite:this.params.writeDepth&&f.defaultDepthWriteParams,colorWrite:f.defaultColorWriteParams})};b.prototype.selectProgram=function(){this.program=this.programRep.getProgram(c.drapedNormal,{slice:this.params.slicePlaneEnabled,receiveShadows:!0});this._selectPipelineState()};return b}(r);d.WaterNormalGLMaterial=r;var a=b.vec3f64.create()})},"esri/views/3d/webgl-engine/materials/internal/waterMaterialUtils":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../arcade/languageUtils ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/imageUtils ../../lib/Util ./waterMaterialData ../../../../webgl/Texture".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});d.waterParameterDefaultsLocal={f0Sky:.02,f0maxSky:1,expSky:5,waveTexture:c.waterNormals,perturbationTexture:c.waterDuDv,waveStrength:.06,waveTextureRepeat:32,waveDirection:b.vec2f64.fromValues(1,0),waveVelocity:.05,flowStrength:.015,flowOffset:-.5,animationSpeed:.35,color:[0,.35686,.4,1],sky:{horizon:h.vec3f64.fromValues(.72,.92,1),zenit:h.vec3f64.fromValues(0,.6,.9)},transparent:!1,writeDepth:!0,polygonOffset:null,slicePlaneEnabled:!1,
dtrExponent:2.2,roughness:.06,f0maxSpec:.1,isDraped:!1};d.wavePresets={"calm-small":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},"rippled-small":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},"slight-small":{waveStrength:.05,perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},"moderate-small":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},"calm-medium":{waveStrength:.003125,perturbationStrength:.01,
textureRepeat:8,waveVelocity:.02},"rippled-medium":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},"slight-medium":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},"moderate-medium":{waveStrength:.09,perturbationStrength:.03,textureRepeat:4,waveVelocity:.12},"calm-large":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},"rippled-large":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},
"slight-large":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},"moderate-large":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}};r=function(){function a(){this.loadingCount=0;this.data=[];this.loadingState=0}a.prototype.loadTexture=function(a,b,c){return l(this,void 0,void 0,function(){var h,d;return n(this,function(k){switch(k.label){case 0:this.loadingCount++,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,g.requestImage(c)];case 2:return h=
k.sent(),e.assert(1<=h.width&&1<=h.height),this.data[b]=new f(a,this.getTextureProps(h.width,h.height,!0),h),[3,4];case 3:return d=k.sent(),console.warn("Failed to load texture for water material.",d),[3,4];case 4:return this.loadingCount--,[2]}})})};a.prototype.getTextureProps=function(a,b,c){void 0===c&&(c=!1);return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,hasMipmap:c,maxAnisotropy:8,width:a,height:b}};a.prototype.ready=function(){return 2===this.loadingState?
!0:1===this.loadingState&&0===this.loadingCount?(this.loadingState=2,!0):!1};a.prototype.loading=function(){return 1===this.loadingState?!0:!1};a.prototype.initialize=function(a,b){for(var c in b)this.loadTexture(a,k.toNumber(c),b[c]);this.loadingState=1};a.prototype.bindRepo=function(a){for(var b in this.data)a.bindTexture(this.data[b],k.toNumber(b))};return a}();d.waterTextureRepo=new r})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/support/coordsUtils ../core/maybe".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){function y(a,b,c){return""===b||null===b||void 0===b||b===c||b===c?a:a=a.split(b).join(c)}function x(a){return a instanceof J||a instanceof k||a instanceof R}function w(a){return m(a)||z(a)||F(a)||u(a)||null===a||a===d.voidOperation||"number"===typeof a?!0:!1}function m(a){return"string"===typeof a||a instanceof String}function u(a){return"boolean"===typeof a}function z(a){return"number"===typeof a}function B(a){return a instanceof Array}function C(a){return a instanceof
b}function F(a){return a instanceof Date}function E(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=y(b,"\u2030","");b=y(b,"\u00a4","");return n.format(a,{pattern:b})}return a.toString()}function N(a,b){a=l(a);return void 0===b||null===b||""===b?a.format():a.format(L(b))}function L(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function K(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=
b}return!1}function O(b,c){if(b===c||null===b&&c===d.voidOperation||null===c&&b===d.voidOperation)return!0;if(F(b)&&F(c))return b.getTime()===c.getTime();if(b instanceof h||b instanceof g)return b.equalityTest(c);if(b instanceof a&&c instanceof a){var e=void 0,f=void 0,e=b.cache._arcadeCacheId,f=c.cache._arcadeCacheId;if(void 0!==e&&null!==e)return e===f}return void 0!==b&&void 0!==c&&null!==b&&null!==c&&"object"===typeof b&&"object"===typeof c&&(b._arcadeCacheId===c._arcadeCacheId&&void 0!==b._arcadeCacheId&&
null!==b._arcadeCacheId||b._underlyingGraphic===c._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function I(a,e){if(m(a))return a;if(null===a)return"";if(z(a))return E(a,e);if(u(a))return a.toString();if(F(a))return N(a,e);if(a instanceof c)return JSON.stringify(a.toJSON());if(B(a)){e=[];for(var f=0;f<a.length;f++)e[f]=S(a[f]);return"["+e.join(",")+"]"}if(a instanceof b){e=[];for(f=0;f<a.length();f++)e[f]=S(a.get(f));return"["+e.join(",")+"]"}return null!==a&&
"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":""}function H(a,f){if(m(a))return a;if(null===a)return"";if(z(a))return E(a,f);if(u(a))return a.toString();if(F(a))return N(a,f);if(a instanceof c)return a instanceof e?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":
"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+T(a.spatialReference)+"}":T(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(B(a)){f=[];for(var g=0;g<a.length;g++)f[g]=S(a[g]);return"["+f.join(",")+"]"}if(a instanceof b){f=[];for(g=0;g<a.length();g++)f[g]=S(a.get(g));return"["+f.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":
""}function S(a){return null===a?"null":u(a)||z(a)||m(a)?JSON.stringify(a):a instanceof c||a instanceof b||a instanceof Array?H(a):a instanceof Date?JSON.stringify(N(a,"")):null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():"null"}function P(a,b){return z(a)?a:null===a||""===a?0:F(a)?NaN:u(a)?a?1:0:B(a)||""===a||void 0===a?NaN:void 0!==b&&m(a)?(b=y(b,"\u2030",""),b=y(b,"\u00a4",""),n.parse(a,{pattern:b})):a===d.voidOperation?0:Number(a)}function V(a,b){var c;b.fields.some(function(b){b.name===
a&&(c=b.domain);return!!c});return c}function T(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,e=b.cmp&&function(a){return function(b){return function(c,e){return a({key:c,value:b[c]},{key:e,value:b[e]})}}}(b.cmp),f=[];return function ja(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,g;if(Array.isArray(a)){g="[";for(b=
0;b<a.length;b++)b&&(g+=","),g+=ja(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==f.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var h=f.push(a)-1,d=Object.keys(a).sort(e&&e(a));g="";for(b=0;b<d.length;b++){var k=d[b],l=ja(a[k]);l&&(g&&(g+=","),g+=JSON.stringify(k)+":"+l)}f.splice(h,1);return"{"+g+"}"}}(a)}function Z(b,c){if(c instanceof a)b.push(c.hasZ?c.hasM?[c.x,c.y,c.z,c.m]:[c.x,c.y,c.z]:[c.x,c.y]);else throw Error("Invalid Argument");
}Object.defineProperty(d,"__esModule",{value:!0});r=function(){return function(a){this.value=a}}();d.ReturnResultE=r;var Q=function(){return function(a){this.value=a}}();d.ImplicitResultE=Q;var J=function(){return function(a){this.fn=a}}();d.NativeFunctionE=J;var R=function(){return function(a){this.fn=a}}();d.SizzleFunctionE=R;d.NativeFunction=J;d.ImplicitResult=Q;d.ReturnResult=r;d.SizzleFunction=R;d.voidOperation={type:"VOID"};d.breakResult={type:"BREAK"};d.continueResult={type:"CONTINUE"};d.multiReplace=
y;d.isFunctionParameter=x;d.isSimpleType=w;d.defaultUndefined=function(a,b){return void 0===a?b:a};d.isString=m;d.isBoolean=u;d.isNumber=z;d.isArray=B;d.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};d.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};d.isImmutableArray=C;d.isDate=F;d.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");
};d.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};d.formatNumber=E;d.formatDate=N;d.standardiseDateFormat=L;d.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===d.voidOperation)return K(null,null,c);if(z(b))return K(0,b,c);if(m(b)||u(b))return K(0,P(b),c);if(F(b))return K(0,b.getTime(),c)}if(a===d.voidOperation){if(null===
b||b===d.voidOperation)return K(null,null,c);if(z(b))return K(0,b,c);if(m(b)||u(b))return K(0,P(b),c);if(F(b))return K(0,b.getTime(),c)}else if(z(a)){if(z(b))return K(a,b,c);if(u(b))return K(a,P(b),c);if(null===b||b===d.voidOperation)return K(a,0,c);if(m(b))return K(a,P(b),c);if(F(b))return K(a,b.getTime(),c)}else if(m(a)){if(m(b))return K(I(a),I(b),c);if(F(b))return K(P(a),b.getTime(),c);if(z(b))return K(P(a),b,c);if(null===b||b===d.voidOperation)return K(P(a),0,c);if(u(b))return K(P(a),P(b),c)}else if(F(a)){if(F(b))return K(a,
b,c);if(null===b||b===d.voidOperation)return K(a.getTime(),0,c);if(z(b))return K(a.getTime(),b,c);if(u(b)||m(b))return K(a.getTime(),P(b),c)}else if(u(a)){if(u(b))return K(a,b,c);if(z(b))return K(P(a),P(b),c);if(F(b))return K(P(a),b.getTime(),c);if(null===b||b===d.voidOperation)return K(P(a),0,c);if(m(b))return K(P(a),P(b),c)}return!O(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};d.equalityTest=O;d.toString=I;d.toNumberArray=function(a){var c=[];if(!1===B(a))return null;if(a instanceof b){for(var e=
0;e<a.length();e++)c[e]=P(a.get(e));return c}for(e=0;e<a.length;e++)c[e]=P(a[e]);return c};d.toStringExplicit=H;d.toNumber=P;d.toDate=function(a,b){return F(a)?a:m(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?a.toDate():null};d.toDateM=function(a,b){return F(a)?l(a):m(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?a:null};d.toBoolean=function(a){return u(a)?a:m(a)?(a=a.toLowerCase(),"true"===a?!0:!1):z(a)?0===a||isNaN(a)?!1:!0:!1};d.fixSpatialReference=
function(a,b){if(t.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};d.fixNullGeometry=function(b){return null===b?null:b instanceof a?"NaN"===b.x||null===b.x||isNaN(b.x)?null:b:b instanceof p?0===b.rings.length?null:b:b instanceof q?0===b.paths.length?null:b:b instanceof f?0===b.points.length?null:b:b instanceof e?"NaN"===b.xmin||null===b.xmin||isNaN(b.xmin)?null:b:null};d.getDomainValue=function(a,b){if(!a||!a.domain)return b;var c=null;
b="string"===a.field.type||"esriFieldTypeString"===a.field.type?I(b):P(b);for(var e=0;e<a.domain.codedValues.length;e++){var f=a.domain.codedValues[e];f.code===b&&(c=f)}return null===c?b:c.name};d.getDomainCode=function(a,b){if(!a||!a.domain)return b;var c=null;b=I(b);for(var e=0;e<a.domain.codedValues.length;e++){var f=a.domain.codedValues[e];f.name===b&&(c=f)}return null===c?b:c.code};d.getDomain=function(a,b,c,e){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var f=null,g=0;g<b.fields.length;g++){var h=
b.fields[g];h.name.toLowerCase()===a.toString().toLowerCase()&&(f=h)}if(null===f)throw Error("Field not found");var d,k;e||(e=c&&b.typeIdField&&c._field(b.typeIdField));null!=e&&b.types.some(function(a){return a.id===e?((d=a.domains&&a.domains[f.name])&&"inherited"===d.type&&(d=V(f.name,b),k=!0),!0):!1});k||d||(d=V(a,b));return{field:f,domain:d}};d.stableStringify=T;d.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var e=a[c];e&&e.declaredClass&&"esri.arcade.Feature"===
e.declaredClass?b.push(e.geometry()):b.push(e)}return b};d.autoCastArrayOfPointsToPolygon=function(a,b){if(B(a)||C(a)){var c=!1,e=!1,f=[];if(B(a)){for(var h=0;h<a.length;h++){var d=a[h];Z(f,d)}0<f.length&&(b=a[0].spatialReference,c=a[0].hasZ,e=a[0].hasM)}else if(a instanceof g)f=a._elements,0<f.length&&(c=a._hasZ,e=a._hasM,b=a.get(0).spatialReference);else if(C(a)){for(var h=0,k=a.toArray();h<k.length;h++)d=k[h],Z(f,d);0<f.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,e=!0===a.get(0).hasM)}else throw Error("Invalid Argument");
if(0===f.length)return null;!1===v.isClockwise(f,e,c)&&(f=f.slice(0).reverse());return new p({rings:[f],spatialReference:b,hasZ:c,hasM:e})}return a};d.autoCastArrayOfPointsToPolyline=function(a,b){if(B(a)||C(a)){var c=!1,e=!1,f=[];if(B(a)){for(var h=0;h<a.length;h++){var d=a[h];Z(f,d)}0<f.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,e=!0===a[0].hasM)}else if(a instanceof g)f=a._elements,0<f.length&&(c=a._hasZ,e=a._hasM,b=a.get(0).spatialReference);else if(C(a)){for(var h=0,k=a.toArray();h<k.length;h++)d=
k[h],Z(f,d);0<f.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,e=!0===a.get(0).hasM)}return 0===f.length?null:new q({paths:[f],spatialReference:b,hasZ:c,hasM:e})}return a};d.autoCastArrayOfPointsToMultiPoint=function(a,b){if(B(a)||C(a)){var c=!1,e=!1,h=[];if(B(a)){for(var d=0;d<a.length;d++){var k=a[d];Z(h,k)}0<h.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,e=!0===a[0].hasM)}else if(a instanceof g)h=a._elements,0<h.length&&(c=a._hasZ,e=a._hasM,b=a.get(0).spatialReference);else if(C(a)){for(var d=
0,l=a.toArray();d<l.length;d++)k=l[d],Z(h,k);0<h.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,e=!0===a.get(0).hasM)}return 0===h.length?null:new f({points:h,spatialReference:b,hasZ:c,hasM:e})}return a};d.toStringArray=function(a,c){void 0===c&&(c=!1);var e=[];if(null===a)return e;if(!0===B(a)){for(var f=0;f<a.length;f++){var g=I(a[f]);""===g&&!0!==c||e.push(g)}return e}if(a instanceof b){for(f=0;f<a.length();f++)g=I(a.get(f)),""===g&&!0!==c||e.push(g);return e}return w(a)?(g=I(a),""===
g&&!0!==c||e.push(g),e):[]}})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(r,d,n,l,k){var b={};r.setObject("dojo.number",b);b.format=function(g,e){e=r.mixin({},e||{});var c=d.normalizeLocale(e.locale),c=d.getLocalization("dojo.cldr","number",c);e.customs=c;c=e.pattern||c[(e.type||"decimal")+"Format"];return isNaN(g)||Infinity==Math.abs(g)?null:b._applyPattern(g,c,e)};b._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;b._applyPattern=
function(g,e,c){c=c||{};var f=c.customs.group,a=c.customs.decimal;e=e.split(";");var h=e[0];e=e[0>g?1:0]||"-"+h;if(-1!=e.indexOf("%"))g*=100;else if(-1!=e.indexOf("\u2030"))g*=1E3;else if(-1!=e.indexOf("\u00a4"))f=c.customs.currencyGroup||f,a=c.customs.currencyDecimal||a,e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,b,e,f){return(a=c[["symbol","currency","displayName"][e.length-1]]||c.currency||"")?b+a+f:""});else if(-1!=e.indexOf("E"))throw Error("exponential notation not supported");
var d=b._numberPatternRE,h=h.match(d);if(!h)throw Error("unable to find a number expression in pattern: "+e);!1===c.fractional&&(c.places=0);return e.replace(d,b._formatAbsolute(g,h[0],{decimal:a,group:f,places:c.places,round:c.round}))};b.round=function(b,e,c){c=10/(c||10);return(c*+b).toFixed(e)/c};if(0==(.9).toFixed()){var h=b.round;b.round=function(b,e,c){var f=Math.pow(10,-e||0),a=Math.abs(b);if(!b||a>=f)f=0;else if(a/=f,.5>a||.95<=a)f=0;return h(b,e,c)+(0<b?f:-f)}}b._formatAbsolute=function(g,
e,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);e=e.split(".");var f="string"==typeof c.places&&c.places.indexOf(","),a=c.places;f?a=c.places.substring(f+1):0<=a||(a=(e[1]||[]).length);0>c.round||(g=b.round(g,a,c.round));g=String(Math.abs(g)).split(".");var h=g[1]||"";e[1]||c.places?(f&&(c.places=c.places.substring(0,f)),f=void 0!==c.places?c.places:e[1]&&e[1].lastIndexOf("0")+1,f>h.length&&(g[1]=l.pad(h,f,"0",!0)),a<h.length&&(g[1]=h.substr(0,a))):g[1]&&g.pop();a=e[0].replace(",",
"");f=a.indexOf("0");-1!=f&&(f=a.length-f,f>g[0].length&&(g[0]=l.pad(g[0],f)),-1==a.indexOf("#")&&(g[0]=g[0].substr(g[0].length-f)));var a=e[0].lastIndexOf(","),d,k;-1!=a&&(d=e[0].length-a-1,e=e[0].substr(0,a),a=e.lastIndexOf(","),-1!=a&&(k=e.length-a-1));e=[];for(a=g[0];a;)f=a.length-d,e.push(0<f?a.substr(f):a),a=0<f?a.slice(0,f):"",k&&(d=k,k=void 0);g[0]=e.reverse().join(c.group||",");return g.join(c.decimal||".")};b.regexp=function(g){return b._parseInfo(g).regexp};b._parseInfo=function(g){g=g||
{};var e=d.normalizeLocale(g.locale),e=d.getLocalization("dojo.cldr","number",e),c=g.pattern||e[(g.type||"decimal")+"Format"],f=e.group,a=e.decimal,h=1;if(-1!=c.indexOf("%"))h/=100;else if(-1!=c.indexOf("\u2030"))h/=1E3;else{var l=-1!=c.indexOf("\u00a4");l&&(f=e.currencyGroup||f,a=e.currencyDecimal||a)}e=c.split(";");1==e.length&&e.push("-"+e[0]);e=k.buildGroupRE(e,function(c){c="(?:"+k.escapeString(c,".")+")";return c.replace(b._numberPatternRE,function(c){var e={signed:!1,separator:g.strict?f:[f,
""],fractional:g.fractional,decimal:a,exponent:!1};c=c.split(".");var d=g.places;1==c.length&&1!=h&&(c[1]="###");1==c.length||0===d?e.fractional=!1:(void 0===d&&(d=g.pattern?c[1].lastIndexOf("0")+1:Infinity),d&&void 0==g.fractional&&(e.fractional=!0),!g.places&&d<c[1].length&&(d+=","+c[1].length),e.places=d);c=c[0].split(",");1<c.length&&(e.groupSize=c.pop().length,1<c.length&&(e.groupSize2=c.pop().length));return"("+b._realNumberRegexp(e)+")"})},!0);l&&(e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,
function(a,b,c,e){a=k.escapeString(g[["symbol","currency","displayName"][c.length-1]]||g.currency||"");if(!a)return"";b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return g.strict?b+a+e:(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?")}));return{regexp:e.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:f,decimal:a,factor:h}};b.parse=function(g,e){e=b._parseInfo(e);g=(new RegExp("^"+e.regexp+"$")).exec(g);if(!g)return NaN;var c=g[1];if(!g[1]){if(!g[2])return NaN;c=g[2];e.factor*=-1}c=c.replace(new RegExp("["+e.group+"\\s\\xa0]",
"g"),"").replace(e.decimal,".");return c*e.factor};b._realNumberRegexp=function(g){g=g||{};"places"in g||(g.places=Infinity);"string"!=typeof g.decimal&&(g.decimal=".");"fractional"in g&&!/^0/.test(g.places)||(g.fractional=[!0,!1]);"exponent"in g||(g.exponent=[!0,!1]);"eSigned"in g||(g.eSigned=[!0,!1]);var e=b._integerRegexp(g),c=k.buildGroupRE(g.fractional,function(a){var b="";a&&0!==g.places&&(b="\\"+g.decimal,b=Infinity==g.places?"(?:"+b+"\\d+)?":b+("\\d{"+g.places+"}"));return b},!0),f=k.buildGroupRE(g.exponent,
function(a){return a?"([eE]"+b._integerRegexp({signed:g.eSigned})+")":""}),e=e+c;c&&(e="(?:(?:"+e+")|(?:"+c+"))");return e+f};b._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var e=k.buildGroupRE(b.signed,function(b){return b?"[-+]":""},!0),c=k.buildGroupRE(b.separator,function(c){if(!c)return"(?:\\d+)";c=k.escapeString(c);" "==c?c="\\s":"\u00a0"==c&&(c="\\s\\xa0");var a=b.groupSize,e=b.groupSize2;return e?(c="(?:0|[1-9]\\d{0,"+
(e-1)+"}(?:["+c+"]\\d{"+e+"})*["+c+"]\\d{"+a+"})",0<a-e?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(a-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+c+"]\\d{"+a+"})*)"},!0);return e+c};return b})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(r,d){var n=/[&<>'"\/]/g,l={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},k={};d.setObject("dojo.string",k);k.escape=function(b){return b?b.replace(n,function(b){return l[b]}):""};k.rep=function(b,
h){if(0>=h||!b)return"";for(var g=[];;){h&1&&g.push(b);if(!(h>>=1))break;b+=b}return g.join("")};k.pad=function(b,h,g,e){g||(g="0");b=String(b);h=k.rep(g,Math.ceil((h-b.length)/g.length));return e?b+h:h+b};k.substitute=function(b,h,g,e){e=e||r.global;g=g?d.hitch(e,g):function(b){return b};return b.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,f,a){if(""==f)return"$";b=d.getObject(f,!1,h);a&&(b=d.getObject(a,!1,e).call(e,b,f));a=g(b,f);if("undefined"===typeof a)throw Error('string.substitute could not find key "'+
f+'" in template');return a.toString()})};k.trim=String.prototype.trim?d.trim:function(b){b=b.replace(/^\s+/,"");for(var h=b.length-1;0<=h;h--)if(/\S/.test(b.charAt(h))){b=b.substring(0,h+1);break}return b};return k})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(r,d){var n={};d.setObject("dojo.regexp",n);n.escapeString=function(d,k){return d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return k&&-1!=k.indexOf(b)?b:"\\"+b})};n.buildGroupRE=function(d,k,b){if(!(d instanceof
Array))return k(d);for(var h=[],g=0;g<d.length;g++)h.push(k(d[g]));return n.group(h.join("|"),b)};n.group=function(d,k){return"("+(k?"?:":"")+d+")"};return n})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(r,d,n){return n})},"esri/plugins/moment":function(){define(["require","exports","../intl/moment"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(d,k,b){n.loadMoment().then(function(h){b(h)})}})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper @dojo/framework/shim/Set ./locale @dojo/framework/shim/Promise".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h=new k.default("ar ar-dz ar-kw ar-ly ar-ma ar-sa ar-tn bs ca cs da de de-at de-ch el en-au en-ca en-gb en-ie en-il en-nz es es-do es-us et fi fr fr-ca fr-ch he hi hr hu id it it-ch ja ko lt lv nb nl nl-be pl pt pt-br ro ru sl sr sr-cyrl sv th tr uk vi zh-cn zh-hk zh-tw".split(" "));d.loadMoment=function(g){void 0===g&&(g=b.getLocale());return n(this,void 0,void 0,function(){var b,c,f;return l(this,function(a){switch(a.label){case 0:return[4,
new Promise(function(a,b){r(["moment/moment"],a,b)})];case 1:return b=a.sent(),c=h.has(g),c||(f=g.split("-"),1<f.length&&h.has(f[0])&&(g=f[0],c=!0)),c?[4,new Promise(function(a,b){r(["moment/locale/"+g],a,b)})]:[3,3];case 2:return a.sent(),[3,4];case 3:g="en",a.label=4;case 4:return g!==b.locale()&&b.locale(g),[2,b]}})})}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(r,d){return function(){return function(d,l){this.context=this.definition=null;this.definition=d;
this.context=l}}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(r,d){return function(){function d(d){void 0===d&&(d=[]);this._elements=d}d.prototype.length=function(){return this._elements.length};d.prototype.get=function(d){return this._elements[d]};d.prototype.toArray=function(){for(var d=[],k=0;k<this.length();k++)d.push(this.get(k));return d};return d}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper",
"./ImmutableArray","./ImmutablePointArray"],function(r,d,n,l,k){return function(b){function h(g,e,c,f,a){g=b.call(this,g)||this;g._lazyPath=[];g._hasZ=!1;g._hasM=!1;g._hasZ=c;g._hasM=f;g._spRef=e;g._cacheId=a;return g}n(h,b);h.prototype.get=function(b){if(void 0===this._lazyPath[b]){var e=this._elements[b];if(void 0===e)return;this._lazyPath[b]=new k(e,this._spRef,this._hasZ,this._hasM,this._cacheId,b)}return this._lazyPath[b]};h.prototype.equalityTest=function(b){return b===this?!0:null===b||!1===
b instanceof h?!1:b.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};return h}(l)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(r,d,n,l,k){return function(b){function h(g,e,c,f,a,h){g=b.call(this,g)||this;g._lazyPt=[];g._hasZ=!1;g._hasM=!1;g._spRef=e;g._hasZ=c;g._hasM=f;g._cacheId=a;g._partId=h;return g}n(h,b);h.prototype.get=
function(b){if(void 0===this._lazyPt[b]){var e=this._elements[b];if(void 0===e)return;var c=this._hasZ,f=this._hasM,a=null,a=c&&!f?new k(e[0],e[1],e[2],void 0,this._spRef):f&&c?new k(e[0],e[1],void 0,e[2],this._spRef):c&&f?new k(e[0],e[1],e[2],e[3],this._spRef):new k(e[0],e[1],this._spRef);a.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+b.toString();this._lazyPt[b]=a}return this._lazyPt[b]};h.prototype.equalityTest=function(b){return b===this?!0:null===b||!1===b instanceof
h?!1:b.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(l)})},"esri/views/3d/webgl-engine/materials/internal/waterMaterialData":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.waterNormals="data:image/jpeg;base64,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\x3d\x3d";
d.waterDuDv="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQIAdgB2AAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAEAAQADAREAAhEBAxEB/8QAGwAAAwEBAQEBAAAAAAAAAAAABAUGAwIBBwD/xAAbAQADAQEBAQEAAAAAAAAAAAAEBQYDAgcBAP/aAAwDAQACEAMQAAAB+xxKDz5dSjWoF7nmAfkeX2ILHNMxoCM64zGjLw7XkT0+xQjb2is70JOyoNOs3gk6xw87Iyjn62k8+Uyc7MrOQz1jFxc3x381z9A/fPUnqw9kEoF7j0zj6Fp6QDrQbDqNR/NQdIRiGYaPxpwR599Dz6p9c0OGkF79w7+3aZlaK2LQAw8fZEbhC1KcnfMtUZ2xw/NB43Hbz1cZN46U2ffrTIOserE4/cT8+rj12/pPuVS4VqfcYFGVIuVrunTrP3MeDvWrSfT+fx7AaNOx8/ZYdF81WW7dA1pYp+47+JKJXgnPGnWurkSgsE862H8xBM85AL/BkepZ9eoGD7+fIyfcoRe7L3G9/Y6Lu5FRtL3E2z+gSyf9x58sJB649DH0uV5O+vyTajSLsLQzgxUc4jX1ftxpSK5ybbzkm9K519JZ4nUIUEdx5LxtHbfKfXn1QXSsAISscPLs/jbcf0NMQ9iHKxKQu+gSjf6BLJusoJQTFHiUrIS5VGMEjEvr7w3EVsR0Qm6lAzqhtrigXoRSfO0zRfmR6eCde5kZOh/M2WXkh2QjIb0jn5bcfk60mfIwRNV9UmKpoB8ElJ+OVdxRpfpAsYs286YhHPlthhoGAVn++1jAclmKj4+yKg0QIn0MYh0OVCaaQ9CJS+b38s/qfN0tGD45v8idObsPT07vLhSVowCkmoCtGa8jXJG2CulS0mwtCgLDlmUQzA5rUlZtwAuKnN+KxmI/aCBacToG8bry8Vn2sXRgtOJD6Gh+G/mM29pwD2dEF5vht5p5+afuPUlm9YcErw/fdspZYSmTGUtAq4rUPOox8oyCh3Uo7Wc2iCv3z+oWUurLd8/b84YjvNGoMkXi/wCscW0XRi97b3KfrTdEuZajmWJPxEGT5oVgG/VXeH6l/YIx/rALZeHtIZ9VDMKroVWWwy2dNkZdjHswT6pNc68NkTGXXErWIt2wEcCaJJlmkcAvHoPxI0neSXBfT0JguO+pNdKOccmzDiSoVY9xNvNx+ZwttzyrE1Wc/Zrr4bj36WTg3Ygz6zbz9EZGnCNaVRbYaVSBko04kapNRsgm4G6BQVNOl9QxHPXnT2BeOBbEc051jkV97lnnPzipHKwrbBA4OCEi2lHn8Az+pGocwfhJibXKwv0XrP57nC8fPPzRWTlfWCbOZtn0YPP1qRjrkyC1T5/pKiVN2wjTPcAI1IEch200a5Mt+9kTRTIPF3P70LXC4C6NOXzw3137wO7XzxWfn68v4Pr6UnNrxdATRvPPPgXvNrx+7VFdP1Y1GpyTGMZlm3y6XUKzVsJvr9y06V7dyW/2T17V96FLTgBCFjAWmIHrVW5rdSk0wt8vhzUJRlpGKTpkzOyEItJRy9nGa9SbP65U+P3Qb7+sEJdMnn1hKSOd0ygygbhnE8GZ7fCecngSOkXwvfXnCZklXmmvgGT1fp+5AE6GKXnlC+iDfqDfEfLuQFIkG4rzjUyeamwlI6lnHL1aT+zFw/MHC6t3x5WEyMy0CZjPrBMTnqTPtOgyHG/LN+vnDM/MlR8KZwwq1NS/X95fYtXvJcjHtF17h8s05T1YWhMyjalaT+0n0jSfnWzTnunp1BeH2cy+FsQrhdu+Qnq0h8w+XvbRJ8/dqZpsnVG0iov0ZUY1F3jeNYauUHWaVm3E/c/o5ST51MFFUSenaLa8PSmjXn4EtHYqC6IGTBN89BMBeg27wB6v3nwNVRolBvjRBbYpjpk3CjfgNe/yeeZxqkzoLb1CWb30w2A40lqRbQ0y04vLHHuXW7eYyZrepR19UhZEYEyTkZA1UORqSyUpif3mwhci9CqHYVYP3gpKmc/gzYGn8+fk5suVk2chUvfz4gYyCM+Z2ytFhPpci6agFTVIta1So3r9nOslEe3iXSVeyX+lsgH4nese7Xo2aBlnYVS7t4LB/tfNWw/FABW+fXawpUJpPuF9JrnqsJk8u1bgKjIyczTNCoLimAhhY9+gY1ck6wbCN/oE9m1DVIT5qOcRrhME7V+iEjVc6x3+a1Qkw5FO4vWWdI0yRmfPPnI0vQgkc6P5trssKQOl1I1Ba9czgmsK2B0IwoJFuIcLON16YrA7P66nme+3NpWpjDMVqM6bTlQBAIr1Xba42UY76+fUk9zouaYX+JPowJzXElcz4TuBwwTBpN4ENqjrkblwvpxO81RMU5XBkDlJysLFB9olSXvicG0RYafG4N6ZhTzrMhSWnLG86LBEYCOO+Hkg6wmGqJmMtdCUenfpCdnZIW7kYzbTbhYwVz7aZoFqj6JLAvVjmSbM/nVGvND/AD1Xhpinag0zcEt0umtOILP7LtwK4LWziXz1iIG8Xefh9OmIo/P5AnNl+/mh4++v7vf9RjlUwZtXiW04K6StVkq7SNBHP0CZCeqwIZ5++c0fyiT6UafPj9Lhav1xHoR42r1bEHieaa49zTK4lG1jRKyni6YSG1R44Pv2G5++dUqsluE0967HIyGKGN+PjfjzbUtQzUS7pARnX0Cpn5wu+eUQiMtzWouixVCcySE2y649F4+25I4z1Z5rh8h51hQA625wtRvmRVJ0q4smSdo/fsR9Dmu363771oGUZxuq70UMeDGmdACaEkZS7IWiZhPVRKqNcI+eKxsve7ZSiY3z3DRa3CuyMPRUxdEJ0m1H8t1HWnCVROFDx00pFiZab388p1Ko3ivTUr1eu6+oBSaPzVjxvKnfENCFRrTyk56BwE0PEdg6pkxkUYKxdLqzLpZOs/Px9FlCst24Fqs3dxzcwL7EOlci8V1RY7r38Pzowx1npZzF47EmZel8dNTMocnnIMuplXvxriltkuy00dAz+mj1HXDkTUUfqGMGn6BZUAkdyziJ15xq01tQK2vPI0c1+STPJ2qmHqp1x+rt8+lR7MrOUF38y50A879RVHX7MadeBxg5A0dQG6dU9ml725kQt1ReFlj3TqizhdZ4XWRKyoxdjJxtE5aEUaq9plGxYsvLMplES5qkHDhYpWEPA965jhnjr+6++bCkRC030BOw9bNzOrlMUXn56mZIedLzr5bacpuuYI8Y339b5duPfyfDWQJzMI53SsIhYZ8NH9Ky+1ykpciLiXigi6l2B4E+pJnMO6NqO324Z8aRqdh52rNPFJ9XXG+iF58NRvPhiPOGI7HXj0eeY0WnEW9XSLcSh0/PEjLTHXF6AM1FXLS4ReUiaCXi0n0L5nUtZFshrZ4+wnWjJemH/ef6ZLVbH0t4vZsB5FaX5kETOlcWYhPq0w4u1hy0XfzupUiUSqiSnVJOINgliGwwP7vqcbjJmNT++0rIYMrGC8+wLAdyAR6L8urHSE5HVIqTcWrD+948xWmcc1yozMKrz4tw08w2481chaF5+koWXqMg9cpz5qkVfnAJiks8vE2xSzbwObL5VrzZdWdoGRfhb1hWKc8bzDficF2tYp8z2znKpHWg930ozoV2qMjHzz6lMofPl5HOX4W0M1C8fYizzUOs6/ehI2NVjrg6A5G0wm2fQZFrv8ZNR1jsRKzxjcNoj38b3zfrCn2PciZj5rloOpO+kZZHC+jA6+lc8MdMUxGPnv8A/8QAIxAAAQUBAQADAQEBAQEAAAAAAQACAwQRIRITFCIFMRBBFf/aAAgBAQABBQJmBSkZaZpijXjn/rCgU1oKYwBcU7QVJF11fVNVT2FhjnLVDbX2dUU3YnAiVoILOtbx8aexAYsTWdgYF8IT2AI2cT7iM3pMTnYPl7E8H/gkxOs4hdX2PScdTU6H0Jqep1PE9hjX2C1Q2uwWuSXefeGxWgU13pPYnDF7xfPir202yCJZlJaT7KZYUU6lscda/VWxqj6HDE9PBCbIQmTamuUZ1fEHJ1UK3U5Ygx1eA62Ehttzmr53eq1oqtY1e9EgTgnRlAOam2CE+ypq536xX1yF1insEJsvp/8ANZqgi/MsaLV8HpPpoxFiY9QvUb1qsjRZj/VVg0RDzer6n1eiIsUExaorGr1qxNi1fV1OpqWoVNXBLKoRo8s08F2DFEzH/wA1+KCUeZXDHHsJ1eARPCE+LCw4opEHKVTM1RnwYpuT45GLSauqSsWpjywxS6m9UaBC0J7AQZNURQzLmZbAJEPa4LFFZLU65x9wbXuBMtaJJ0ZAUAComJoUjU9idCvZjTrSif7MUXoTVeWK/k1x2NnBxF3HSEFtheiDC9fJy5JyU66CD0YaWh9PBajcxSSO9VHOKha7Hscj6BZLiisJlhOmCdINaPQtQ8nJY6g7TVbyQcsxaoYv0xnHhNGp1fVLAWqSqhF4X/kzPSNbXVKihrjJK4y9WUtP90qagqjH1Rk9bEYUIio43KQEB0pDqr/Sli9NuVP1Sg8mA+WySJ49Lx5PzYHzhQO9JkeiavqICcwJzE5q+NQENUUgT3ctdT2D1VwKE8e4ZOQgNMdfU2sp4ePr66rBi+P8z19MVfE78j1pjZqfDy1rE+1jqNjVBIMedX2gnWQjZBXyavSdN5UV1fc0T2NT5e15VFLyeziktqCbTXdz0FO5ZroGrzySNAYpOpkXYo05nL8XLMJ91HliguYPur5nBOslNnJMTiUNUqLnNItEL5S9eSVFxMlwTv1SuO1XHYpC0Ot4n3NTLGmvMEJQnOBTk5RlMei/lvqlg9ObURgIT/TUamp1FMo9hp4nV8DoU6pqmqlqaPJ9BfKF86fYGOkDnU2hefzZ4ppy0x3OwX03+iv/AKCFzUJfSBQlxGzyWxqH6MbEYxk0GpjAU6IJrBrGjJWrz1sWietos1/KmlMaNzosEqSwVHMfVKxibZ5ZmVqVNcSY/S+VwX2iFHcVe3qim0PeprGITkmt1NbxxxE6YnI9X+ITYpJwU12mP/JVZbqvxIVy58NI5LSUdI6ysWL05qnmOSuLjTr+jFS/MtJTVsXxkKOQsMFzE65x8/owN9GszEwckCPDFKhJqkcpZS1Ot4q9rTFLokKmU8XtV/5+mOhglpqOoF9MZNRU/wDPR/n/AKpVPKhr8lq8nqp1VTVsTiY0+0VFZ11OZV5RjZgnyhSSdiudgsah+lPDy23yYZy11SzqDvQmYhHprQBCLk0SA8lhXxhylrBPrDYK6jjxSR8sRL41NX0Wqqlg7HAdrMIURcF8xCdbxSXVE5wNWYqGdSTDLjgV/wC1pcNeXQ86h/tdyB5INUjUw9YpP8f/ALCUxP8A8so/759CzW0WK+FrcNSMFRVdElPlqqQrLHNLaSjp4mwlqn1otzkL7XYbSrXE21o+ZV50ybj5VLOE2cbHOE6QFSFMlwxSp8vLNhfJpicnN9C1W1SxFrqTsNToLBlqIFWa2mJiiiCdEMutGf0B34zrGkKOUtTLabbVeyo7XJbnLH9DEP6fYf6Sbf1G2Cja7Xsqa1+ZrHp9cek1mJpUvRNB6Nerhrt8h8uCabU/qj4YSpXcvzKw726GD0hU4+ridGWr2QobGJtzk93lm4SYXuearHEeHASTOYjdx1a+p72hk/p9OUY1wKxPTRphiTj4Fm1iEhefKzsZxSO5db6X1NdDVxMgTqmqekpKa+uQvjcp2OxzD6o19NOrw0/z/Qr+RY0Pq+ihCXBtYgxkxqG2o7AKcdTf9jdgtWME8/p9UavPGTApjwpH8kHox1tQrJsWLynxBydS9L/5yd/OVn+epKOOp1/JpN47jf6jwnx/JJTqJsIaHABSFF5BhtYop/SDkZ/Iu218+vq2cQtJj3BNskJ1xMm9OrDUGL409v8AxmJsYKMAVmsMkp/qGioa/lWON/oa4xQfqtHgkHJNXklfW1GsWqElpY/kpU8ZehUOsruC8uC+ip6vkWXFhqT/AKpScD0ZE6RDq9YoZEDyZOH6gYF55abyev6dHTUdbE+vyWBMh7FX1Op6JqvlB3lb6TIPSbTCFMJ1NBitRcvQaYa5a6q8sTZkZE4lfL5RsqvPpbJyebF8/wCoJ19gKWYFPPYcTGBS4BMQo/8AYGoR6LEGizF5LHdgcmFAhcKZNomdosR6Y4AviwB2Fp1BuqdmCaYtdRn0xu1tkItOsJCdK4J1gozqCzhZa5Zt8ludgtDa1gJkoIlcMvFGTHVnoP4bGKO0o7BC+xqc7UH4nz8Nj9QTamFT/wCWYtNXWGCfkjvSDRojCfEFJCjXXgtLXuyb05TsconOBr2CFDcT7fLljU0e3VIeGPBK1dajXXwkL4ynjFLqfoNebDXm0SdEkekQr0WL7KFhNnRfv/NCLA5R1tRp8sU0KfW009hjU1stT7fp1HHKtmOzJAvj1McHDwCnRKZiMep9fU6IsMFjwvt8NkEwyBylZol1pi1yhiKjg1PgwS/lMk7BIF6BEw1BnWRjLkX5/o/lCQ+6U2KG5i+7qfZCinCgvKK5q+cESvCB6G6p4eTt8F9ktQufqnZ1fLrZyNqZsDRjApByxGnMxMmLEy2vk9f8jerjvz/S/Rhq+nQUyA9hYjYLU64orp2Ksc8uYvslqNrVHJqicnD0LNbVarFCu71Vic1FzgJJTtaxhrW1HYC+T0JW6nMT4UWFqikxB6a9WDrbMPp1Wt2OEBtmMZPD365KjqHYqynq8tQ4WRElkWKPiYnx+hNT9KP+Z2P+fgnqYJavfhLUyYsUV1Q3NQl9JyaNTq/oSV/KagE9Pi0xMxesD/0hT9ofz02ni//EACMRAAIDAQADAQADAQEBAAAAAAABAgMEEQUSIRMUIjFBYTL/2gAIAQMBAT8ByLrMiK/8PI1eyPJUfWWVtSKPaJRpcTLr6Vy9yUWa/ZEdMoSPH+QMmxSRGcZInVGRrx+yPIYOH4uEjI2iux8Lv7o2ZOmnM4lvUU2uLPGaucMejsSdjL7Hw1z6zCv7GOrqFXxGuvqPJZ+lmXsivF8LM7gZbfV8MEvdH8f2RsxfDXmcGZ7nWzDtKdvwr2dPZWI25FNF3j/7FWL1HT6kKvYtxeyN2A2ZfUcfWR4+zjPGS9kj8uo00s1waZnr9JnjvqPz6jTT8N9B/F7Mqx/DZl4ia/OR4zVwyXxmiymNiN+DppyuuRmucGU6vhTqM2no5KcS6C6e0UWWRM8otipUom7H1HksfOmqr1Zls9JHidX+GayM4l1CkjdkHoSmeO2Io0KSLeSRupTPw/sRhxGyHUbYcZm0OuR4/cUa/ZFnrYjbiUizG4MgnEjd6mfZwzafdF30vscC7b6mLd2RjvU4l1KmjyWHvTyONxbJJ1yPHafVnj9nwjp6jZcuGibjIwbGmZN3wWvqNOhMq5Nn4/DVQb6CcXGRgsZRc0ha+Ebo2E80ZluPhfS4n6ygzx+whL9Im2r4bk4sy6HGZ43b8RRepo00KxHlcP8Apuz+jMsvWR42fSHfU2d4bsTRXGVcjJeyu3qNFjMl/wDYompouoUkeQx9NOTkjFQ+ldL9S+MolF7TM9nsia6aKumqjhmtdcjDq6iyKsieSyDqcJmG5xMmoquU0eRqUonlc/1iXpM8Xb/hm5OJpy+yNOWNhp8fwUXUzPb0uj7ITdcjLr4Q1dRplGSNcI9MvqmVevDVGPD4pmLjR+XUWZzXlLanCRhsaKbvhrSmizJ1kKfQru9DJr6Xz94nlK+9NMPWR4+71Z4/V8I2KaIa0yz1mjZWkV3+simf6IspK04iu9S/ZxGnb1mbV9KL+ous6i6z1keP28M+lSROcTRKLNEFJlNfqKz0RPT1lfJk6i9OJkvaZXZ7xN1Psjdn+mappmNuKK9PqRslFkdJqt9kTs5MwXdFD2RKrhd/VGy9ouvbZksfTLPqJR6jZBoz2uEjHpfB6Hw06WhaOyKZJoufwssakZbxTTRprUhR9JGa7hbJSRqzqbKcJXncUTi0WYWWZ5RLa5NGippmGz1kYn7oln6jXmfDfnZZQ/Yy52ZK2iunqNuT4fxmpmWtocXw2RYm1Myy+E11F9b6V2OBHZwjoUyXGQl6lmnhXepyMtUZo/iIsxdPzhMuxplmJG3Hw5+Uzxen/CiUZxL8ykjyGEvz+sjJSmU0cKvhdFTRLMvYpoSFn6jXi6ieFqRnztH4/C3L0uytFilBlWhojo6fqabuFOrkzx20p1RaFbBmXyHsLR7InNGz6jZHjMWn0kYNvUV3qaNdCsRux8Zlg4yKa+xJQaONolUz39CjQmfnG1E8CbK8HD+GSxF/j+mvxxfllWOxwZHR8NFnSPt0yaHAp8hxEfJ/f9MGllFnUP8Aw0I3RIv1mYb2jPr4Q0qaNVUZoVHrIzJJFiRVBMln6jTQ0Kcq5GTSRsiyDiciz0iSzqRpxJm/Cbc3qxdTIU/oQwEsrgWWSrI637GC0yW/CL6i2rqN1J+X9yheqP5XoU+S/wDSO9SR+ybFq9EWeQMm1NlV8ZIurjNGrNxlUvRldz4LV6i8hwXkl3/TPrUxpTRtydR5LEWZmpGelooq+F2dcN1PCX9ZGSz1Zi0Gaz2FBSRuzdQ8v9j8OI1pxP5MoMo3Nme72LJ/C+1pmPW0zNsI6+o13rh+/wDYps6iyRbocSXkHFnj/Jd/6ZNfuiaU4nkMyZPD7SKvHEMjiWUfDyGY1VesivM0zLVJGVuJVaXv2R+Sch5v6m/Ma6vVlEmpGKQ11GqshN1sz6yrT8NF/USv5MyaOocvZGhfDU3FmPW4yPG7v8KdHsjZLqE17lHq0ekSdUWb8qaN+T6ZqIzZRgXCOP1FS0XppEJ/3Ko+0Tbn6jyGY9fSRimV/wBkXUexoo9SnqZS3wv7wtlyRkvK7eot+o2wFP0keO18MWvqLZe8SaakUTaR+/B6jVqXDVbGTPH6vpj0poVkWJxZpSaI1/3MlXYmjJ7I8jgNeNwkZ+xZmmRj7I1ZiNHJGen4W53w1ZmiEnWzNd071GyHUXwakZbnBmHYR1po/VSkVJcLfhZNo13Mu0P2MdvqzDofCu5n8nhbsKdKcjBamj81NGvEpI3eL7/wfjHF/wCFeaUCiDLqeo/j/wBjLm6iWLqNnj/hpxuMjPU0Qj8L6/Yvx9JZ3BlFzrI7uIp3dkZdPUTn7Fi6bK/hrXGVf1kYbCmfwsn8NN/CrXyR43eZtSkjqmi7JGZPxyf/AAn41DyehdHiJfJGW9IqsjJF9UZo1402V4x0ep+PsSw+yNHjv/C/G4FvtAz2v2MVvwg+n59NdPw308Y8zUjN2BHT6ot3F2n3P0aZg2OLMW8z7UyF6ke8WNxL/Uv/ALFlAk4Mo0NH8n4W2KRBo0SSRC9KRncbEWZFJGvAbsXBV+kzCygrh1GqnqN+Yl4v7/hPA4mmuUC2yXSpORKkqi4Mz6nAzeRKN/SO0ewv2i1pyIOM4l1SP/k/RnWyMmi6XUWzcZHj9ZmsViLsykjyGH4a8/pIyWerMliZmSaLM/sjVg9j+PBl2RNHkcZfn5IopPxFnLKXEhZKDKNnCvX0/dmnQ+EdTUzJr6iV3Sy1H6pspSkiyvhdZ6mu9dMu31keP8gU6FNGqtWI8lkJdqkY9XDLt4U6lJD9Jlew/kpmxxmi3N7SIZOEoepV9JZ/dFuLhOLrKLiEuo0xbRJNTMcmez4aLGj+U1Ixa+k7VKJtmbLX0pvfseP0MyaXwhd7I3UqaPIU+rM8mmUTZRoaI7eEJtEtHqX7Si1WMrpUkas/BP0kZpqROhTRtycIVuMigsrUkWZuyM2doVD4a8z4X1uEjHa0V29RrXUbYfSipuRhqaKOxKruErFOJ5OnpCHJGWHUKr4STRZR6mpuJpvaZh0/TDd7Iuq94mypxZnucGU6U0X+tiP4v0UPQnf6lNkZszwiyNUWX5FJG/AV0uMjPW2i+j4bM30y4uszY+I/L1J2ehHWXv8AVFlXrIxz4VJTRPN0nUpo35fhvocWZX6yPFy7whV7RN2LpdQ62LS6yrb7Mz8sRdR8NlbiU3OEjJpKrunv1G3jHxTMnrwv9fU1uPTF6tmeqLRbn+GulofYyKf7IvoOupmXdwovjYijT7I0clE8nWvon6TPE6V8MVqnEuoU0bsZtpcCFrhI8dqIcsibcfUaM7rkZLOMzT6jvw1Q6i6pqRnm4l979TZc+mPZyRg2dRCamjXnUkX5+SKK2Sq6jVRwlN1SMO1mVvhNvh5CPTSvWRg1+jPGeQ/wz3qxGmj3R5HF/ppzOEjFJxZht+EoKyJ5HIerrkZdHCOo/aMyWdTHk4aKmkbq2VScZHj7zJd8Jz7EsgpSKMqZ/D+GrD8N2NxZnTjIy0fCef4b8/w308ZCbhI8ds4eN2d4VTVkTZmUkbMPZFWFozVOBR9Rso9kacvGRi4E7XEjtcWY9amQjGxGjJ1HkMRdT+cjDbwxWfCdvIj0/wBjHoTKpKRbnUkeQwn8X1mY9aITjNGzMpI8pk5001+kjLd6s8Zr/wAMev4TtUol/q2VwiesUUNFlSmjTkLcrTLqHw0QcGZdbrZh39IWRsRtzKSPI5fVlU/zkYtiSL9y9T+X2ZgubMljIz+G5rhosUJmS9pmS9nfaJ5av/TyEOMjL1kYdPqY95Xt9kWW9Ff6lm71M/kvpl1qxDrjYi3F0vwm3CX1OtmPU4sx7Ph+qnE8lSpI1VOEiGp1lnkG0UaeyPGXJ8Ms1wejhq0dRun9P//EACERAAMBAQADAQEAAwEAAAAAAAABAgMRBBIhExAUIjFB/9oACAECAQE/AakmGZfC3/aRwb4Ns+mbJsWhnsS1Q80y8T8i8y1whsT+DZNEsf8AKNenWLrPw6Lxj8uFyeh+Zc8/jnosujwPz4IZN8M9ydyaVH5pmmRpiT44vHfCseHOEsn6eh+XTXxysCcSfHFgXiaYk4n4fDbLhfwRImhymVA0UK+E7GG5lr8NNUPRNmKTPzXDTE0yFPCBCGkysUxYEWh6IdpjSojErPiPLfDSvpNHT9OE7itUOS0Uv5k+GV/Daz3fTx9Sdj26Xn0rIU8EN8P0FqToiNCtT9yNumNmj6jy46a5/SZOfDRHWZ2yb6NdKk4QZ0V/sio+mXwmydSNOnr7FZnCkOT1Ym0evC0Mx6ZfCqNkmaYpn4H4GuA8SMxS1/KY2TRNE6CXsTiOeDvhlqY6dLGz/p6nomVkNJmiHJjJK+Gt8NNj9umbVChcN5lF+pLQkmOC8h5igUs7ww0MeNG64jR/TNmFFV8GyR/D9eE6Jk7Dvv8AIrh+vw32NNBaGOpO3w8jY01J1M9BWOkVSJ4xQuGs8M74zx9vhrp1FfWZyR8FXT06TmarhdE6nRUKhUexqumks9TIT+GxaJkzkfwvTg9DOydPhtp0VfTLQepH0lcPbhGhhyhZfDyc+Gs/RDyPzPzPU4KOmmA8CMhZmuZeZniTgaZ8NZPUhH/hoxMzoT6ZnuOybPG0MtFw3So1x6PEcJn5ocIriOkM4mPJHpw6X9KzM54QkbJFz0/HosCsvhpmejJRBAzhJg+Ea8RW5+qYmmfuf5JXkl+QTt0WgtyNulfT1PQeQshS0jyGd+mZGfSsDTxj/FP8Y/Dh6c/nBZkRwb4XZ7k6l2foyrZVkWKx6Gexlr0iPY/AeSROaLj4eRmPL6ZwYwNLhSQoTFih4GmJUcIRnB68Rq+Do/7/ADQ6dHPSZH8GyGY0eNY9EkaboncvyC9UziZnCISSNtOFb/TPcz1PdFSmXiTiTHC74a2Nk0f+GklIRKTFkaZlSQZmV+pp5PwvyPpO5ew9yPII8kXk/Dfbpen0jUz2FsRr0XKJyRWfw2k0ljlikSNMTWOFPhGphXS4TRrmf8M6Pc10HZFj+lI9uEasnUvQqiaMrPcjXhjsRqVqa2iuM9UxZCxNOM3k1gmfph1HfhpPS5IP/DQZJLKRRJJaKEZfz24ZbcMtejo2torfhPkGW/TO0yvJL8grVMzaZhHRZFZmmJ+XBQaQOBQTmVmy82KCUVHS4Jn6ZZnOFirhjsRp1G5s+Csy0M9+Glmmh+jMKZ4zFaHSHKY8j8i8x5EYGfjdH4nw08QfjH4H4muRGX0jPiNa4OujJfCNeGm5pfSV0iRPhbNCV9PHgy/1RWvD9yNyLTEkys+n4mWBlgjSUkbNDcsmFR+Hw28cjD6VHEbyV1HRMdcL0E+syzGvUdjZZK+mD4ftxF7dHqTuZeQZ7i1TFaMqRNLh5Ghvsfv9PH16Z/UbcHokVt0v/YvErPgvhRZlHWZxxG1HsVBSJRPwrU/U9xMi+E+RwnyifKMfJI8j4b69PIoX/TxUK/WTyNytOibJPXppiXnwaPTphkenw2z6PIaTHl0WBWfEa/D2PYh/32ZOjMdSN/hp5Bpr0z+s8fiNNPhtRJPDqR+vD9UzRdLklEWpHuitUz2TP8gz26ZJUbZ/DeD1FJMfxLpUnDMT+GlDZkyNOIvcvUWhFlUXoLYjXpS6NcL04VuPcW57GNfTx9OF6Jo1no8xQSj06TkXmev0yg/P4aQfmTHBGnSmQZoo1GzOzOulyaopDT/lZma4ZVwrQ9unr05z+ZMzz6jfPhS4zFnsuFcYpQs0fmaZFY/TLAjxzTA1xZeZMmKPT4bSOT8ulYlZJn5cJXD16TmLL4XnwaMjGuI1/wBjTMn4Oh2ybZOh+h1Mcoz4jNyXKZrkmaeOLD6ZY8L/ANUb2dJOJi0PdHsSQTw0z6aZ8I+EUe5z2PzHA4FP8+ifCtBbGWx+w9hNUTh0WHEeSuG3T6Se3CpaOtE0ZsVE6k37F5dPxFkXPCaI+l8RdlaE6EfSoNIZxmY2VRjX08b6VC4eTl018crxxYl5M08Yvxz8uEScO8M9DN+xOSZ+Pw3zPX6ZmxbY2QZMl9HmqKwPTn8pGC+njfEaa8RrsdVH4pn+OX4xdo+Ufh0/HhUFSJ8MtTHUeq4bWmcTJhGufTTEeQo4Zksmz2TLk9RyZLjMr4jbUun0zbIo90Voi7I0+mVdKoqiiia4Z78K8oryemexGorTHCorArA9OCH8FpwnTo/5JNFvp6ing9eD3Hqf/8QAHRAAAgIDAAMAAAAAAAAAAAAAATEAUCBAYBAwcP/aAAgBAQAGPwLphQDojyZuHHHaGhUWS7M+hxxx6h0HtjydlRRRYGzHzU0BsFFqKKf/xAAdEAEBAAMBAQEBAQAAAAAAAAABABEhMRBBUWEg/9oACAEBAAE/IVDqDQ5sCc8Wf1SNYBggHkpw8I1adsAdhevdYAp+LC+TYgjwtPPEL6v7RPszzEfcRZ8n6bZ2xPYIBg4W5qf48bkWdO7GNxnUp3fdgNqsyackB9u4h/Zcu5F7NnsOOxHV+iZm7O2hUltS+77PM5gcmHIBakScPPAsl1ETLGDcisniyRi58dhwX5fns0Y7l8i0rEWyx+L+UzKO7jZixxAkMxki7Gr8MhKhY/bTObFUjl/KIcuAlfIniy2pEy0VIEqCUsJgRm4E7uEiWaW5NINxI4wuWxxYg2KekxL+GGjmzXAp1B82AiN37L6Nrbg6RP2RnPDXZSzt9iafPMcnAr1fMliQZyeFfrdayYjCoqZpy1fEl1EAxcJMkjtgTkvUJAnZBIgVvIeUQ7IYYWVhhlxvjweXBt/JVKxsr4kWtQhq+BCmlk4iE1YXV8iJc8wuv8AwGBfJsi1KerAWU8JsQKY9iUUAOTGZARrAzOEghZiHyAhBCR2Y6D5gDkeWr5s2M0HCH5jWfg/xW7LhzGzcowiG+2F2Q7JgcWTY/th0iDvx7S/XYHbM9hPcKLVAjAg8Exu9NmuMIbngixJlgt2L98uD4wUsBZp5D6XkUWbL6kpYlaIzfrh+o+thG5B3yGS3GMeIGYFjTV/KH15PzS/l+awuXyrI8sTl8S7EYrF9gn2+54hmLCZZXRWHqxhNECwfuP68koHUH3GAlcQ/HmEORPGFiZLhEmpEoWYm+vMxZUwCB7gw7iV3aTMkjs7sue2luPtGEue7o5a+bA8DRarqM9hOxeYjEAb5LhJh1Jjl8SK5IbMeFUsl+KxHJFz3gwDcb1D2sZYx4NcpP9iFo8xVtiDcfWzEndn8trCkX5Z3L8FlzqTepiMg1FjqJ4t7q/jJ8y0T7J0icWEsDsw7BDerR3a41Tti7ixjfl5I50NQHPsgNickHL4sI8sayQssjMHKxZ1JlAuKjfGw22zt9XGxmPBOqrGC4rcY7iEwpaiYIsT5OYQ4pTMWEw3KggE1ZbUM4WDlfigXBKLI8m4IaTJVv7243Yw3D2sc9ue4nqEO36L7Mw7Adi8LOdiO4su48QF4y48UgSwTIAwtqBZRyFxCVwLJ79WPtm+283YOoiMt8VmCYHYzsP3CnYhbtZmUDJMMCh42A1Y6PtHluxfg02G4iMllcvySfHljZ8N2DqfLcg34kR2JiNz9LQROsk4iJn82R4wYincM+YFiPLZ7vSuVr6jTkQ5dNTDyHckizE7aLQjRqL4uIivEsHjs6x5mDAsD2E2tOCfd9SLCwinZRB4AlyAOX4LHF8SH4nKaZjGNBC1YRYzgeM1mriPODFpUv1YXb7eC2HcrJYpuNOyMTuL9j7QAhSxsEG4LzFHJS1E8RZNWDZvZQn3SANSE3eXP5vhWxWavhlL4ns9/idsEnkTlgaLEIRrIhnssLGYYXwAkyKBNQ/k/xfgsDzwD8R8JnkJ3h8A+JHyxuR/kaQZ6s7qzDEAWc7M2VC6i/bEb8O9YvUGDdq7E9gbmsCMM5iMPUEGmrLWGExY82IPpG8DWVyRWq8JizF2Vgt+Sznwz/wDCJ+pH9wi3H9zhuUG/MMcG/NdxORX2Be3VtffZSIX1FjuzEcuZ4jix3EJUxrEsrNibgTChr2+msXatsD3DlueVwkhIWvzsq0SRYW8nLMRbsLCPwiJ+23ds5L50SkHxE8Q71H8WA554KLarMkMwIioeYPumLFjz5MLlnEmi2L1dBAweM5kjHqwqse0jHgHCroItW/wLksY3AHZH2c9mwbv0X2Z0LDMKtSJi+hM9Wpuxh0CEoRkbMizvUhZ/sE3HNgLbhJOcB1D305P2J3H8VJhZH2VWc8TAdQFwXzIg16uMVmDBuV9sPCZrLyfk6spY7PWQjw1cBZSRWJdy+NDjkGepmx5h/AxI4y3VkgaZzVsaluvLwY3fqhNjmCjwmerIZsRyXyIq0yeL8lgg1//aAAwDAQACAAMAAAAQlVI0su0o8OfXFnpOGU284DYvIl19FeMysueQ9G/YAd0Byq/Scy2P8Z7vWF8L5qd4ltF3joYNOgNNGnRopJsfl1gkG7cRxTU+O/8ABcNyniH5BeMYACybX3mmMr4yTgB64Pp7wC5SWU1z4tf0SW6Y7wb4G+G4D3O9A/lJ0tSy5GB8Z27tBxRgHWnQEppfMbIabYmwopgj8kH8B7c/oMeDdvRdsrgTHsIMW2qjj67WxFXkjuimiOOZa8+QYYdbbrnli8MGaPsIvW50genVQrRPoQ84IpnK5Otzfl6VOrP0r8AJC+6cfwJNLDiuaCvZ/wDszS56T0kXHBdZYZjATiUT+YkwAFG8jl+mNsZaMYiHgERtlqe+eFf/ABOTlcqIC6XQzXa/xeWc/iLM4AL7Cum3t8P/APiKJzG/v6d1RCOnPdQS6WXdZnpsoWp/0chQkNvhR9H5bLwOzt6MvETEyUR4Ju3351l5ULRBaT//AHeFC0ZPqWzfJLP86/Ujox7yTwDvsS7R+Lj/xAAcEQEBAQEBAQEBAQAAAAAAAAABABEhMRBBUWH/2gAIAQMBAT8QwZwIPu2Zzh8AsGbBZiGyDbNyQt2bLwWFa3ZRPIUwn0hPHI4hdR2LrcmXCLxHZl1IXZBalsXANkTRs3RyTxmfF2QlFQBA4kysJahHxZ8O3N2B5sWOELrcmHkgkWX5NlvJk8krJLFStyAPJ5YUAIPG2VvvJ/BF+Ykwk3hYLERbmYQoTZCCDPjsm+3EL8QDWR9KnwRAnJPCV+WZCYWNXDQ9QttchsN78bQgm8ivQt5gBs+BsAazxNooWlC5bMuxoNiA2ONLYmXtmaxrWZpZEE4Z8QgdmR2Dqy1trIULaDt+pCOsomuZEeTG8+DBkZdvMsLjC6EO8LRz4bqCwymkkkS1uRsJFm6EOLJ15IBKC3mKlFD4oQGy+kayGsVkWWJcnbkIc+YjpY1Zw2Iwl5MlCBkRi/NeiFykmGzga2JWRMAgfALQxJbeEIoWlQ+JMYsOxbCYAsHZl+z2wBNVyYkhX4pn8tB5bslQhTs2idCXudnbmNin8SR2UbgFsu3JWUtFLlbDOzpKyD20O37Foezh2ZJ9oECwfWcRjLcn6JYHBbFsecndIWLHnbiTj5F4RODX4BgxYlmrOCxbz/ialo3uZwmCS3Fs7YnZnqAe3GWEtis+Y5mt30ApNwsgN18zwnHcvFXnwuhfmygbXZKQxmN3ghLkFeS4VOWZvy90hflQR8QA/MKiejame3k2A9imnxY82wCxiEOFm8sHItwurkYULUBwsClWERrkPnMHICISOX51OssKDlK2Fp8iTkt8Tfm2UPkOSsP6spdXZ/aHAWBa/ByHYIYQGt9JSNsQWyLIUJkQjA2VIxlRHchLs5j8HcBAPJ/za/lgeSmuTChYxt/UhciN2XrJ7WcIzs5dmsRG9ZeESdsRrYRZEkXGAj8rOR8C3ULsLcBY3s+DS0VwjHkIPJGwuVN6tjchNC4Fyts0iRDTNycHkuIVv92bjMFt2i/ch3NjXYls6yJknxv1J/1EOtwJj9ufgbCxVy5omDSFGkjzdeEm1AuB2MHyIohd/Lfna2T6cwGygdm83voBrczsXRkKye4ec50i3t6W1Awg78sY8i8bI3ITyf8AEmPJkcuFLD5YWzZ2HrExPBYjydLBSofLRVPkUMNlfUy9k9LANjjdTBiRtsdR+sSN7kSWpCSDCyWEWmhC/AfZExj4e5yUVyXJASIwPJkoTw2RLWbSyw2H2uq9ppZHbC7HGhIRL/VgeylrJ7MaxWM+Asy2mJbHJUeTRC5TagQ1sLknjIjk58m1yzrLiJ7kqSIbZB26lmZGy/hGMUexumUe2R2Ueyj7FmLelgx8V1y3KTeEc8iGMXnZ/MQcg87ZOSrCbJDqUpkunLbBPAy4bYHYz7ZJxMqV7U5BCiM9Sb7N7xcFjHfjfkS0B4X8VqFjayhsFOcmOEY+WaCsg8L1mshHlAGzoNnM53Xy2LaZDPb3mHM2ROM7cI7czWEOw3sQaTA5YSE6afLimsbwsl8qjLEsYLXBDjyXfJI4l2HxNDk6vJuoLwiXImb1JEt4WHrMIbZjtoe3H2LHti1+a0aSK5ZcvferI9s7BBYLtpwiVydnIAGBIFFXdyfCTTCwHCdeTn5BTyN/IjT4BgazD2WPYi7eomEWIwIzN+ex6RBGGuxBjEgbDdZ7lkqHwdx2MHbpmyWv7IezCJ0JjuT3CyHgTdBJzqCz04+aEHyGsdtjAL8QwORl2J6j52zNYMmcoSuhYuzkGaycL8tR7D5t3tpyxKEuTHg2lC7EPkDw34HqBZnJXi0uW8nQ2S0abXwGBMC/rsQwaQuHCUhonpB5EtnNkz2yxiVyVoWYYwLHgneglN5G6GOIyaYQCoWahE6+Tq5IPJi5aPkk75sUrpkSBjkPQW8JdYSCcSw/HppyXIS2LGQsNl6gkmxDOh2YE+iwPzEhYK0YkieX4i2clkvIwJoRSSBYxrGes3XcPjiQscLbhYChOKXf24C/O3kJMhOQxB2AxGy0hcdkKEnZi7GAt38hS84jcyXyl058YJBbOmVgyIyCbbAWFmwqhPnEhcixKgfiQNQiBAGxh1vCt3wk8kpiL82xnZUdg7fNZHLrxMrkgQs9Hi/jn1yVufBIztjG3YTtyFOTuhY0HBt7loOSEBZFYYFuAgbCc3k2tsCFHYvSI9xhFyfCJFyD4TcN+bRoX4loSD2yeok9+MMWxLXlwNvvJRyEuWsI6LCQX5lmhbCE2LANb9SfE2J2QEHua5wwHswOyO0OcWjPG47Zgbfo2nZhJ+oMiwTW2BB0FweTA8teQYWZHZ6UoQkCFylshtjq3sIRYz7A/bvS/8QAHREBAQEAAwEBAQEAAAAAAAAAAQARECExQVFhcf/aAAgBAgEBPxBWI2hPkqsnUExY6e0ozZOMT7GRPDskCVQmVi7xaw2zJOWE7cQXxfytGSNMrJonKH8bdKSyV2X2N+8edwhC2Zl8geJ4t8QxG7qkfko+TfkGeQHyPJPyRfL+EWoCmMgmHcZ1YcISWKfZNO4HtEOINkPCTqcZVCMwh+EPfJREuknoFjvscbZvEu/CIie+FSBGdTxMspllsQaNx4Q6lgzgcyBMWh9tkDFLakIgw4hZPGydxDiQMwsZwhqapAsWPqyRpYXXjRbCQtxst7BNsXR3aOzEd+iHnk58nGU4RUn4smxL4MfGczKUfbL3IyLZAQNgF+EBsNqwjEQTGPsBdz0+aFk2mCjfJZyUYhKd2Aw1QdHATZTLWLstJw0vRumM3WxTrG7nWTZhOCjvcmybO36SjipJGol1wWPqOjwLuHIakCQSjMNslleJchtULYJJAs+ybMWhJHWXbGBMY4SMtwCa7pYRuyXUgoJMQ4RCJmG1+SD5IXRdF2WjZEgkGVs5Kkfbs5Q8upbs22STu8BaOpTgiCEYQwEDndkmoOok0YVKIBGoMQ+TEbbBnLV4gsqCMiJY/VlHfB9fsD9jz23fbRZ2b7DUHqUstkfk28KU2XGMBtzy0fJW+Qz5C+IVH9jdszTFJbGYkI0sEmzbdEgzD7B1YoDOYQk12YjbJ9jdprwyI/yw8JlJsbZ4B3wkXCF0Z2TqcZIn2bZBLw3hIn2H9gz2V4ergBm/daPsCQkDbMgzGyZa3fwLsaYb3xhJ1KEgzxmWKzxsr6m/Z89k32w9Yv2B9WD2WOPs2X944YRAdJu7RwGGbLI4WuyYT3wLNs3x9CT9kXgeJi2oDJns7btm8Ai2QsGQJIm0UB8uizQu5dkpDhCZgnG0NqwsHZJaXVHu9XiaDN2THkpSL2xeypaky9u/2DGw02exP2QkIJ0W5aNpSZwts7PKPITIN8rBZSsTJyhI7HqOkI2pkGUZB7KEowjKS6zYRK4EG/xdduzL5ZvL81h8svkIfLWeSHyZnZwdI53nU5tDLbKpCUWhe7abJHghh9gfXhQIp3fId8gHnDhrKXjWXoXZ5YeIpbWCX9xWSbyatu4BBt0w3idaDAfU2zD7f0h/eMa22B0sxmF7hfVuJHbMzsAyBduyZQYuoKzR2cxL2QJdl2eZi0zqXZa31Yfbu9t07hfUBbRZLG04Lse5VIgwB3A+cf5XddpYM2iQeOLxN+SVpSth2seSpZQmUTuU9S57aZEIBh6EqshYxgjgAOlgxbAWDN4Akf1E+42E6TCytnmIE4WMIYsxFlWxZ4T9jbulbpmJR9hOMPc4KVD7Jvs/7KGcFkLIROzbKGD4lszg1tEfZezQOWUuwVlyKEmUZRsdoTk28A0kGdSCSEpw2a1LZ7ioBwAEQDS+U3J/idfJs8mzyJvUoyjP1O4ZsawIh8vAjThMOs8eZscYYwJN0iqQLVwuiDsFlsGkEFedfkSnib4sYRayVmWC/WEgbMYkUZCNJFBUgT+7EfzLlmwEfyCKJSYZf2Xls3Ux9wvjThyKWANrJUQ4C7x5WUAxi7kMZQmc45IEwhLG2bJtTqBZMklyUZ0RybwpatHyUfJT5GPI98kPlpTloJSmGMd8Ak8WeyyBCSFukZu2ZCMiLCZ9LdsRZCKCXgMQfkSeTnixA/FiWVssshTvgloRZLN1NvkhIpZY2PsBhfJxacgDJKmiAO5CzSzQh3EETHYJKrD7OHs69tX26b1eMF+Tny24s2Ko7hNlLqyhNO7Ad4un2Zv/xAAkEAEBAQEAAgICAgMBAQAAAAABABEhMUFRoZHBEGFxgbHR4f/aAAgBAQABPxBD1JDlhQMLsvTSHKYC4hsxQljhAZMsyCc+SzISsJsHkD1ScBHfQbxCtRnjhc7nmWIUcLU5ApFZe55uJDCbxM+C0f2jxL0+rmSPyXF+UA7AzSc+Zqxw/e+cSOjMYzaakfW3kf4l1BMtmj+MG+Y/373iPz8xgY7/AHC/DsanJmsHm9nIAwjx4njkEEXZM3Yo7Hv9ITn3gQ1shN3J1JHUeE2QFGo7Cg3a6lfH4kEpoGdlzG0BviLdbpl5tALQpxzFvJ1QlXBtkbyzyst6pvxvep7BSP2ZCSiOG+59mI5eoG5AsSA+0uKTlRwjQrR6jDWXvLpCc92QQuCDxCMxRPyiCCZKhSyBgfPDGJz+Jk1yJUUocTPj+LhvrCkzCoR1T3BBfiMNPEy6Snt5IXXhcgEzIj54nTr+NtNsWRP0bAxfUUeJNhbSfWUQiBomWY2WBmCbAdkc5KuF7OwbyGeJeL8XjeZo9pJAxESQ62i8Pn5kP7YbxFsYaloiDkII1jQyc4TKKgQPUMd3WNabydPjI6YhknFySRcMse2hijC1OtM3m9XUYoz3LHWyh+ssULDR5OtPm88fwM2+N0eyZqzNYZFPS8zL0x2YsMTubaaxLT1PZhMoID57jP8AiDlYMnZIkobRp9LxxiYiBkuz7ROz+LiiU+PFn1JP72g0HD4lOqEmG4XOmyHmXvbCq+YAY28uSMPeSn2jI85Aht0c2fgskti8QHuxPnqa8fiReIx4TDl4xH1hEjhDekl8T8TMbh5uIEczjUlfCwuR44vDkYpsp7XjFthPUz2MCRHy48wNLZpCbNMtcXm0Gdm9Xnhep/mMufzeILq7szyk3HIGD97/AO7/AIUC+Xu9lZh+FvwFGf2AtYfUF5l14vBfd4JC0lOR+RACF0s9w8UpGeo8xKwfNo28lE55YsfvLvLbxreatrGy6bWyVJsBip9yEPYqbZpMyZfj7kDs4K+JxjNwfvFfLszkjfFqdLoz+MA2CDSQdIH+Z0+VjiTgjB3ra3IisGsP8caQzeT6zCiMmyGR+02E4CciFos/o9tnyD4+IAhkHU577/N/6RED9r0D82Ny/wC5OYdG8g3ZfafSBtm2I0n3E05DBQbwxeGkccIryBd3UxgfiwQZYBcyGyD6LAXWPqvm61sP8JbTEZ358xl7dUs4SoY1/m1ap7ROUbAH2jepNmOrEJMxDk3MbOXztmGIOLd77gAbVG5+XoLACzZYXcr/AJsXv8RVEZZp2b0Z2d6zrptuH4/Ez5V+KWaDyPaplkH7zn952GoEXgFgC7P4gSE8xJtJJKLZXD/do33g2ekr5OBK51sBL2+Iv/T4jrz+LF0/iG8f4sOPrJP024fb4n1/WQXxmEKpo/rbCYnHUyHTUG1eboW8xL0CU8QUiRj97H5LHXuyFkmcRcVxlK/aIPd0cu4NgaxcoIe4R+DIEJ7Admjn8RfH5+I9kMeQryAmTEZKMibEGGMSQfMfjYD5s3VnmhCLaW32uqN3TI9Txd5JbR9xFg4+l6PA/wDNk6/iCCNkJgG2EwKi/wBkHJQtFCDF2zGbIxr/AFbbx/xHRPd4idimC6kuwljGw8bnKXOjb8vC0NhRi1MTQmn8wuyBsGYo2dOiH4fMV4vGUxUbKNhKMlgynVG1zZQZuxBR3g8Ypdg3/F4j6uYl54Q3SN8S/i8bwpQXTfMIPZs1TIQG6Df4hIN+8j/aD9hF4+3zf+8Rhv3nOmCP3jH739TZ2G+/M6O7AiEoxl++ZVkRxiTVzJsMXBq0ubcO8izaaPqY2/MZeewgs0GU7RyDx5ZZ0ndRP/XAw+8GDiuK9kyCHs60liHPbL9yUhvnzCFd7I3SA9I02ZEh6nuKHCUPjC2BPK12dpstEwLZN9S85s68ydvrEBin9b1PrJMdyyvD2BoNlw+bRJ+qc/fx+ImGIk15igbFtGMaQ53AtUAPh25x2wEJVv6HW8d9+YlLsDzEuIBiSF2JjzsWf+IElVkA7LVOpDx/EK/8XX+kv6Sc57fF/Zf4u1Lc3PFgzLZw02AdpjRepC1st2nJoFWcf9WwatzuShFbUvmHVA8DbsS0kgxpzy7I3ITyQPBGeWXZZuhYfC8FXFP4n2Hz8QEPrOfMyzh8THazx7MTfCUYW68wvHWBbplNEQA1EXbJDJ81m63GGCT8yNFKtYZEmpjHnstUfUI9mHZwbdTb3EDO3nM+vRvMoHC8GITlsXtbBKaTu2G0BBkaTUn1nWDP4gJOT5oYwcxvD+JfreGk3+tPl9ooF5gN0yyzygHGRojOrVnDDg1bF31N5r/cI9EPFIuJ48t4OTS4TDxeZED/AMzDi8NJ4jODIiFkixtyx+pR6jkyxl5PdgOLRBeUWY7dQW2PiQGs2bTM7vqNxCab5jvmMesVRWRd1gEZlf0sY+8xXiH83PUa6XjTxDHy1wfdqom7dEshQ/awxM8bCexKddjf5P4QE8bKSkHu0TnbJPpJejt42S/EnLxAmFtIXA7ZTsU+ZGgOd8pk4D7Z7/X5nSeUfTvYGpeB25zbUm8nzRegZDobfmLFl5DkcK1CJnSS6e4w0XyOXDILKTJBvHdlV1J4HLkQsOf+d3rv4/gb6kIU0yVCZ/d3m+/Mg4bwlcDni2b1+wzpHghFeBAuImmbbifSzQzJQwZedN4TgHRnCSUC5MnWB0OSg0tNCb5tmCjuiPS2tgMbwPN42Syek3E55l+S9ttWwzcr/wBzu4i5iRtQxv2vRPE69L0S8UJwPSXNEOijIIPvZNx6qeJX0tGy8MQxyU8i4JiiHaplkB+151sYMLFY3/DIIPbHX5SgI5aw0yYRRYfOFdeYlg2Te8tUDLJQS7YV63ZmE0UmHF5uvOWbd4T1uzbidkln8wpzPnNi2kKRJ9otSbk8Ch814GzA31M5PcJmntHiTgFki8oWQ6ggoGPT4sWe7sBjRSKwYEMk4MWb6xCv0iv6R4K1N4EyXBUCda+8BB+95KWmi5z22hEiMue7dAncYNYqOZNgTdjZOne/1at/4sz9L//Z"})},
"esri/views/3d/webgl-engine/shaders/WaterSurfacePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({SLICE:b.slice,RECEIVE_SHADOWS:b.receiveShadows})};d.color={name:"water-ocean",shaders:function(h){return{vertexShader:b(h)+l.resolveIncludes("materials/water/colorPass.vert"),fragmentShader:b(h)+l.resolveIncludes("materials/water/colorPass.frag")}},
attributes:n.Default3D};d.drapedColor={name:"water-drapedColor",shaders:function(h){return{vertexShader:b(h)+l.resolveIncludes("materials/water/drapedColorPass.vert"),fragmentShader:b(h)+l.resolveIncludes("materials/water/drapedColorPass.frag")}},attributes:n.Default3D};d.drapedNormal={name:"water-drapedNormal",shaders:function(h){return{vertexShader:b(h)+l.resolveIncludes("materials/water/normalPass.vert"),fragmentShader:b(h)+l.resolveIncludes("materials/water/normalPass.frag")}},attributes:n.Default3D}})},
"esri/views/3d/webgl-engine/materials/renderers/Instance":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/mat4","../../../../../core/libs/gl-matrix-2/mat4f64"],function(r,d,n,l){return function(){return function(d,b,h,g,e,c,f,a,p){this.name=d;this.from=b;this.to=h;this.displayedIndexRange=g;this.highlightedIndexRanges=e;this.transformation=c;this.instanceParameters=f;this.idx=a;this.dataId=p;null!=c&&(this.transformationNormal=l.mat4f64.clone(c),n.mat4.invert(this.transformationNormal,
this.transformationNormal),n.mat4.transpose(this.transformationNormal,this.transformationNormal))}}()})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../lib/ComponentUtils ../../lib/Util ../../../../webgl/Util".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.generateRenderGeometryVisibleIndexRanges=function(b){return b.instanceParameters.hidden?
[]:k.generateVisibleIndexRanges(b.instanceParameters.componentVisibilities,b.componentOffsets)};d.generateRenderGeometryHighlightRanges=function(b){return b.instanceParameters.hidden?null:k.generateHighlightedIndexRanges(b.instanceParameters.componentVisibilities,b.instanceParameters.componentHighlights,b.componentOffsets)};d.doesRenderGeometryHaveHighlights=function(b){return b.instanceParameters.hidden?!1:k.hasHighlights(b.instanceParameters.componentVisibilities,b.instanceParameters.componentHighlights,
b.componentOffsets)};d.isRenderGeometryHidden=function(b){return b.instanceParameters.hidden?!0:k.isAllHidden(b.instanceParameters.componentVisibilities,b.componentOffsets)};d.drawArrays=function(b,c,f,a,g){b.drawArrays(c,f,a);g&&(g.drawCalls++,4===c&&(g.triangles+=a))};d.drawElements=function(b,c,f,a,g,d){var e=h.getBytesPerElement(f);b.drawElements(c,g,f,a*e);d&&(d.drawCalls++,4===c&&(d.triangles+=g))};d.drawArraysFaceRange=function(b,c,f,a,g){for(var e=0,h=0;h<c.length;h++){var d=c[h],k=d[0]+f,
d=d[1]-d[0]+1,e=e+d;b.drawArrays(a,k,d)}g&&(g.drawCalls+=c.length,4===a&&(g.triangles=e/3))};d.drawElementsFaceRange=function(b,c,f,a,g,d){for(var e=h.getBytesPerElement(g),k=0,l=0;l<c.length;l++){var p=c[l],q=p[0]+f,p=p[1]-p[0]+1,k=k+p;b.drawElements(a,p,g,q*e)}d&&(d.drawCalls+=c.length,4===a&&(d.triangles+=k/3))};d.acquireMaterials=function(b,c){var e=new Map;e.set(0,c.acquire(b,"color"));e.set(3,c.acquire(b,"depthShadowMap"));e.set(2,c.acquire(b,"normal"));e.set(1,c.acquire(b,"depth"));e.set(4,
c.acquire(b,"highlight"));return e};d.releaseMaterials=function(b,c){c.release(b.id,"color");c.release(b.id,"depthShadowMap");c.release(b.id,"normal");c.release(b.id,"depth");c.release(b.id,"highlight")};d.calculateTransformRelToOrigin=function(e,c,f){var a=e.origin.vec3;b.setMatrixTranslation3(g,-a[0],-a[1],-a[2]);n.mat4.multiply(c,g,e.transformation);f&&(n.mat4.invert(f,c),n.mat4.transpose(f,f))};var g=l.mat4f64.create()})},"esri/views/3d/webgl-engine/shaders/HUDPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({OCCL_TEST:b.occlTest,SIGNED_DISTANCE_FIELD:b.sdf,VV_SIZE:b.vvSize,VV_COLOR:b.vvColor,VERTICAL_OFFSET:b.verticalOffset,SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,CENTER_OFFSET_UNITS_SCREEN:b.centerOffsetUnitsScreen,DEBUG_DRAW_BORDER:b.debugDrawBorder,BINARY_HIGHLIGHT_OCCLUSION:b.binaryHighlightOcclusion,
SLICE:b.slice})};d.colorPass={name:"hud-color",shaders:function(h){return{vertexShader:b(h)+l.resolveIncludes("materials/hud/hud.vert"),fragmentShader:b(h)+l.resolveIncludes("materials/hud/colorPass.frag")}},attributes:n.Default3D};d.highlightPass={name:"hud-highlight",shaders:function(h){return{vertexShader:b(h)+l.resolveIncludes("materials/hud/hud.vert"),fragmentShader:b(h)+l.resolveIncludes("materials/hud/highlightPass.frag")}},attributes:n.Default3D};d.occlusionPass={name:"hud-occlusion",shaders:function(b){return{vertexShader:k.glslifyDefineMap({VERTICAL_OFFSET:b.verticalOffset,
SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,CENTER_OFFSET_UNITS_SCREEN:b.centerOffsetUnitsScreen,SLICE:b.slice})+l.resolveIncludes("materials/hud/occlusionTest.vert"),fragmentShader:l.resolveIncludes("materials/hud/occlusionTest.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Labeler":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/Handles ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/graphics/dehydratedFeatures ../../../../layers/support/labelFormatUtils ../../../../symbols/callouts/calloutUtils ./Graphics3DCalloutSymbolLayerFactory ./graphicSymbolUtils ./labelPlacement ../../support/debugFlags ../../webgl-engine/Stage ../../webgl-engine/lib/Layer ../../webgl-engine/lib/MaterialCollection ../../webgl-engine/lib/TextRenderer ../../webgl-engine/lib/TextRenderParameters ../../webgl-engine/lib/TextTextureAtlas".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){Object.defineProperty(d,"__esModule",{value:!0});r=function(h){function d(){var a=null!==h&&h.apply(this,arguments)||this;a.idHint="__labeler";a._dirty=!1;a.labels={};a.labelsToAdd={};a.labelsToRemove={};a.labelingContexts=[];return a}n(d,h);d.prototype.setup=function(){var a=this;this.handles||(this.handles=new e,this.handles.add([this.view.watch("state.camera",function(){return a.setDirty()}),this.view.watch("pixelRatio",function(){return a.resetAllLabels()})]));
this.textTextureAtlas||(this.textTextureAtlas=new F.default({idHint:this.idHint+"_atlas",view:this.view}),this.hudMaterialCollection=new z(this.view._stage),this.calloutMaterialCollection=new z(this.view._stage));this.handles.add(this.view.resourceController.scheduler.registerTask(8,function(b){return a.update(b)},function(){return a.needsUpdate()}))};d.prototype.dispose=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.textTextureAtlas&&(this.textTextureAtlas.dispose(),this.textTextureAtlas=
null);this.hudMaterialCollection&&(this.hudMaterialCollection.dispose(),this.hudMaterialCollection=null);this.calloutMaterialCollection&&(this.calloutMaterialCollection.dispose(),this.calloutMaterialCollection=null);this.labelingContexts=[];this.labels={};this.labelsToAdd={};this.labelsToRemove={}};d.prototype.isActiveLabelingContext=function(a){return a.active&&this.labelsEnabled(a)};d.prototype.activateLabelingContext=function(a){for(var b in a.labels){var c=a.labels[b];this.labels[b]=c;c.graphics3DGraphic.setVisibilityFlag(0,
!0,1)}a.active=!0};d.prototype.deactivateLabelingContext=function(a){for(var b in a.labels){var c=a.labels[b];c.graphics3DGraphic.setVisibilityFlag(0,!1,1);c.rendered&&(this.labelsToRemove[b]=a.labels[b]);delete this.labels[b];delete this.labelsToAdd[b]}a.active=!1};d.prototype.addLabelTextureToAtlas=function(a){for(var b=0;b<a.graphics3DGraphic._labelGraphics.length;b++){var c=a.graphics3DGraphic._labelGraphics[b];if(c._labelClass){var e=a.textRenderers[c._labelIndex];e&&this.textTextureAtlas.addTextTexture(e,
c.stageObject)}}a.rendered=!0};d.prototype.removeLabelTextureFromAtlas=function(a){for(var b=a.graphics3DGraphic,c=0;c<b._labelGraphics.length;c++){var e=b._labelGraphics[c];e._labelClass&&(e=a.textRenderers[e._labelIndex])&&this.textTextureAtlas.removeTextTexture(e,b._labelGraphics[c].stageObject)}a.rendered=!1};d.prototype.needsUpdate=function(){return this.view.ready&&this.isDirty};d.prototype.update=function(a){for(var b=this._dirty=!1,c=0,e=this.labelingContexts;c<e.length;c++){var f=e[c];if(this.isActiveLabelingContext(f)){if(!this.hasValidLabelClassContext(f)){if(this.hasInvalidLabelClassContext(f)){this.deactivateLabelingContext(f);
continue}this.createLabelClassContext(f);if(this.hasPendingLabelClassContext(f)){this._dirty=!0;continue}if(!this.hasValidLabelClassContext(f))continue}for(var g in f.labelsToInitialize){var h=f.labelsToInitialize[g];this.ensureGraphics3DResources(h)&&(this.labels[g]=h,b=!0);(h.visible&&h.hasTextTextureResources||!h.visible&&h.hasGraphics3DResources)&&delete f.labelsToInitialize[g];if(a&&(a.madeProgress(),a.done)){this._dirty=!0;return}}}}a&&b&&this.view.deconflictor.setDirty();for(g in this.labelsToRemove)this.removeLabelTextureFromAtlas(this.labelsToRemove[g]),
delete this.labelsToRemove[g];for(g in this.labelsToAdd)this.addLabelTextureToAtlas(this.labelsToAdd[g]),delete this.labelsToAdd[g];this._dirty||this.notifyChange("updating")};d.prototype.hasPendingLabelClassContext=function(a){return a.labelClassPromise&&!!a.labelClassAbortController};d.prototype.hasValidLabelClassContext=function(a){return a.labelClassContexts&&a.labelClassContexts.length};d.prototype.hasInvalidLabelClassContext=function(a){return null===a.labelClassContexts};d.prototype.createLabelClassContextAsync=
function(a){return b(this,void 0,void 0,function(){var c,e,h,d,l=this;return k(this,function(p){switch(p.label){case 0:return c=a.labelClassAbortController.signal,[4,a.layer.when()];case 1:p.sent();f.throwIfAborted(c);a.scaleVisibility&&a.scaleVisibility.updateScaleRangeActive();e=a.graphics3DCore;h=e.layer.labelingInfo&&e.layer.labelingInfo.filter(function(a){return!!a.symbol});if(!h||0===h.length)return[2];d=Array(h.length);return[4,g.forEach(h,function(h,p){return b(l,void 0,void 0,function(){var b,
l,m,u;return k(this,function(k){switch(k.label){case 0:return b=h.symbol,l=y.getGraphics3DSymbol(e.getOrCreateGraphics3DSymbol(b)),[4,l.load()];case 1:k.sent();f.throwIfAborted(c);m=null;if(!v.isCalloutSupport(b)||!b.hasVisibleCallout())return[3,3];m=t.make(b,e.symbolCreationContext);return[4,m.load()];case 2:k.sent(),f.throwIfAborted(c),k.label=3;case 3:return[4,g.result(q.createLabelFunction(h,a.layer.fields.map(function(a){return a.toJSON()}),this.view.spatialReference))];case 4:return u=k.sent(),
f.throwIfAborted(c),!0===u.ok&&(d[p]={labelClass:h,labelFunction:u.value,graphics3DSymbol:l,graphics3DCalloutSymbolLayer:m,calloutSymbolLayerIndex:0,textRenderParameters:this.createTextRenderParameters(l.symbol)}),[2]}})})})];case 2:return p.sent(),f.throwIfAborted(c),a.labelClassContexts=d,[2]}})})};d.prototype.createLabelClassContext=function(a){return b(this,void 0,void 0,function(){var b=this;return k(this,function(c){a.labelClassPromise||(a.labelClassPromise=this.createLabelClassContextAsync(a).catch(function(b){if(f.isAbortError(b))throw b;
a.labelClassContexts=null}).then(function(){a.labelClassAbortController=null;b.notifyChange("updating")}),this.notifyChange("updating"));return[2,a.labelClassPromise]})})};d.prototype.createTextRenderParameters=function(a){return(a=a.symbolLayers.getItemAt(0))&&"text"===a.type?C.default.fromSymbol(a,this.view.pixelRatio):null};d.prototype.destroyLabelClassContext=function(a){for(var b=0,c=a.labelClassContexts;b<c.length;b++){var e=c[b];--e.graphics3DSymbol.referenced;e.graphics3DSymbol=null}b=a.labelClassAbortController;
a.labelClassAbortController=f.createAbortController();b&&b.abort();a.labelClassContexts=[];a.labelClassPromise=null;this.notifyChange("updating")};d.prototype.createTextSymbolGraphic=function(a,b,c,e,f){a={text:a.text,centerOffset:c.centerOffset,translation:c.translation,elevationOffset:c.elevationOffset,screenOffset:c.screenOffset,anchor:c.anchor,centerOffsetUnits:c.centerOffsetUnits,verticalOffset:c.verticalOffset,debugDrawBorder:w.LABELS_SHOW_BORDER,displayWidth:a.displayWidth,displayHeight:a.displayHeight};
E.graphic=b;E.renderingInfo=null;E.layer=e;return f.createLabel(E,a,this.hudMaterialCollection,this.textTextureAtlas)};d.prototype.createLineCalloutGraphic=function(a,b,c,e,f){b={symbol:b,translation:e.translation,elevationOffset:e.elevationOffset,screenOffset:e.screenOffset,centerOffset:e.centerOffset,centerOffsetUnits:e.centerOffsetUnits,materialCollection:this.calloutMaterialCollection};E.graphic=a;E.renderingInfo=b;E.layer=f;return c.createGraphics3DGraphic(E)};d.prototype.ensureGraphics3DResources=
function(a){var b=a.graphics3DGraphic;if(b.destroyed||a.hasGraphics3DResources)return!1;this.ensureTextTextureResources(a);var e=a.labelingContext,f=!1,g=b.graphic,h=e.labelClassContexts,d=e.layer,k=this.labelsEnabled(e);if(!h||0===h.length||!b._graphics[0])return!1;for(var l=0;l<h.length;l++){var p=h[l],m=p.labelClass,u=a.textRenderers[l];if(u){var q=p.graphics3DSymbol,z=null;q.symbol&&"label-3d"===q.symbol.type&&(z=q.symbol);var B=q.symbolLayers[0],q=x.get({graphics3DGraphic:b,labelSymbol:z,labelClass:p.labelClass});
if(B&&!c.isNone(q)){if(f=this.createTextSymbolGraphic(u,g,q,d,B)){if(f._labelClass=m,f._labelIndex=l,b.addLabelGraphic(f,e.stageLayer,this.view._stage),b.setVisibilityFlag(0,k,1),b.clearVisibilityFlag(1,1),b.setVisibilityFlag(3,!1,1),f=!0,p.graphics3DCalloutSymbolLayer&&q.hasLabelVerticalOffset&&(g=this.createLineCalloutGraphic(g,z,p.graphics3DCalloutSymbolLayer,q,d)))p.calloutSymbolLayerIndex=b._labelGraphics.length,b.addLabelGraphic(g,e.stageLayer,this.view._stage)}else return!1;break}}}e.scaleVisibility&&
f&&e.scaleVisibility.updateGraphicLabelScaleVisibility(b);return a.hasGraphics3DResources=!0};d.prototype.destroyGraphics3DResources=function(a){a.graphics3DGraphic.clearLabelGraphics();a.hasGraphics3DResources=!1};d.prototype.ensureTextTextureResources=function(a){if(!a.hasTextTextureResources){var b=a.labelingContext,e=b.labelClassContexts,f=a.graphics3DGraphic.graphic;if(e&&0!==e.length){for(var g=0;g<e.length;g++){var h=e[g];a.textRenderers[g]=null;if(h.textRenderParameters){var d=h.labelFunction,
k=void 0;if("arcade"===d.type){var l=p.hydrateGraphic(f,b.layer);try{k=d.evaluate(l)}catch(Q){k=null}}else k=d.evaluate(f);c.isNone(k)||""===k||(a.textRenderers[g]=new B.default(k,h.textRenderParameters))}}a.hasTextTextureResources=!0}}};d.prototype.destroyTextTextureResources=function(a){a.textRenderers=[];a.hasTextTextureResources=!1};d.prototype.addGraphic=function(a,b){var c={hasGraphics3DResources:!1,hasTextTextureResources:!1,visible:!1,rendered:!1,labelingContext:a,graphics3DGraphic:b,textRenderers:[]};
b=b.graphic.uid;a.labels[b]=c;this.isActiveLabelingContext(a)&&this.hasValidLabelClassContext(a)&&this.ensureGraphics3DResources(c)?this.labels[b]=c:a.labelsToInitialize[b]=c;this.setDirty(a.graphics3DCore.asyncUpdates);this.view.deconflictor.setDirty()};d.prototype.removeGraphic=function(a,b){b=b.graphic.uid;var c=a.labels[b];c&&(this.labels[b]&&(this.removeLabelTextureFromAtlas(c),delete this.labels[b],delete this.labelsToAdd[b],delete this.labelsToRemove[b]),c.hasTextTextureResources&&this.destroyTextTextureResources(c),
c.hasGraphics3DResources&&this.destroyGraphics3DResources(c),delete a.labels[b],delete a.labelsToInitialize[b],this.setDirty(a.graphics3DCore.asyncUpdates),this.view.deconflictor.setDirty())};d.prototype.labelsEnabled=function(a){return!0===a.layer.labelsVisible&&null!=a.layer.labelingInfo&&0<a.layer.labelingInfo.length};d.prototype.labelingInfoChange=function(a,c){return b(this,void 0,void 0,function(){var b,e,f,g;return k(this,function(h){if(c){b=0;for(e=c;b<e.length;b++)if(f=e[b],g=a.labels[f])this.removeGraphic(a,
g.graphics3DGraphic),this.addGraphic(a,g.graphics3DGraphic);return[2]}this.visibilityInfoChange(a);this.resetLabels(a);return[2,this.createLabelClassContext(a)]})})};d.prototype.globalPropertyChanged=function(a,b){for(var e=function(e){var f=new Map,g;for(g in b.labels){var h=b.labels[g].graphics3DGraphic;f.set(h.graphic.uid,h)}c.expect(e.graphics3DSymbol.symbolLayers[0]).globalPropertyChanged(a,f,function(a){return a._labelGraphics[0]});e.graphics3DCalloutSymbolLayer&&e.graphics3DCalloutSymbolLayer.globalPropertyChanged(a,
f,function(a){return a._labelGraphics[e.calloutSymbolLayerIndex]})},f=0,g=b.labelClassContexts;f<g.length;f++)e(g[f])};d.prototype.visibilityInfoChange=function(a){var b=a.layer.labelsVisible;b&&!a.active&&this.activateLabelingContext(a);!b&&a.active&&this.deactivateLabelingContext(a);this.setDirty(a.graphics3DCore.asyncUpdates)};d.prototype.resetAllLabels=function(){for(var a=0,b=this.labelingContexts;a<b.length;a++)this.resetLabels(b[a])};d.prototype.resetLabels=function(a){for(var b in a.labels){var c=
a.labels[b];this.labels[b]&&(this.removeLabelTextureFromAtlas(c),delete this.labels[b],delete this.labelsToAdd[b],delete this.labelsToRemove[b]);c.hasTextTextureResources&&this.destroyTextTextureResources(c);c.hasGraphics3DResources&&this.destroyGraphics3DResources(c);c.visible=!1;c.rendered=!1;a.labelsToInitialize[b]=c}this.destroyLabelClassContext(a);this.setDirty(a.graphics3DCore.asyncUpdates);this.view.deconflictor.setDirty()};d.prototype.findLabelingContext=function(a){for(var b=0,c=this.labelingContexts;b<
c.length;b++){var e=c[b];if(e.graphics3DCore===a)return e}return null};d.prototype.addGraphicsOwner=function(a,b){var c=this;if(!this.findLabelingContext(a)){var e=a.layer,g={graphics3DCore:a,layer:e,scaleVisibility:b,active:a.layer.labelsVisible,labelClassPromise:null,labelClassAbortController:f.createAbortController(),labelClassContexts:[],labels:{},labelsToInitialize:{},stageLayer:new u(this.idHint+"_"+e.uid,{isPickable:!0},e.uid)};this.view._stage.add(m.ModelContentType.LAYER,g.stageLayer);this.view._stage.addToViewContent([g.stageLayer.id]);
this.labelingContexts.push(g);this.setDirty();return{addGraphic:function(a){return c.addGraphic(g,a)},removeGraphic:function(a){return c.removeGraphic(g,a)},featureReductionChange:function(){},layerLabelsEnabled:function(){return c.labelsEnabled(g)},labelingInfoChange:function(a){return c.labelingInfoChange(g,a)},elevationInfoChange:function(){return c.globalPropertyChanged("elevationInfo",g)},slicePlaneEnabledChange:function(){return c.globalPropertyChanged("slicePlaneEnabled",g)},visibilityInfoChange:function(){return c.visibilityInfoChange(g)},
reset:function(){return c.resetLabels(g)},clear:function(){},processStageDirty:function(){return c.view._stage.processDirtyLayer(g.stageLayer.id)}}}};d.prototype.removeGraphicsOwner=function(a){if(a=this.findLabelingContext(a)){var b=this.labelingContexts.indexOf(a);this.labelingContexts.splice(b,1);for(var c in a.labels)this.removeGraphic(a,a.labels[c].graphics3DGraphic);c=a.stageLayer.id;this.view._stage.removeFromViewContent([c]);this.view._stage.remove(m.ModelContentType.LAYER,c);a.stageLayer=
null;this.setDirty()}};d.prototype.setLabelGraphicVisibility=function(a,b){a=a.graphic.uid;var c=this.labels[a];c&&(b&&!c.rendered?(this.labelsToAdd[a]=c,c.hasTextTextureResources||(c.labelingContext.labelsToInitialize[a]=c)):!b&&c.rendered&&(this.labelsToRemove[a]=c),c.visible=b,this.setDirty(c.labelingContext.graphics3DCore.asyncUpdates))};Object.defineProperty(d.prototype,"isDirty",{get:function(){return this._dirty||this.textTextureAtlas&&this.textTextureAtlas.isDirty},enumerable:!0,configurable:!0});
d.prototype.setDirty=function(a){void 0===a&&(a=!0);var b=this._dirty;this._dirty||(this._dirty=!0);a||this.update(null);b!==this._dirty&&this.notifyChange("updating")};Object.defineProperty(d.prototype,"updating",{get:function(){var a=this;return this._dirty||this.textTextureAtlas&&this.textTextureAtlas.updating||this.labelingContexts.some(function(b){return a.hasPendingLabelClassContext(b)})},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"test",{get:function(){return{textTextureAtlas:this.textTextureAtlas}},
enumerable:!0,configurable:!0});l([a.property({constructOnly:!0})],d.prototype,"view",void 0);l([a.property()],d.prototype,"textTextureAtlas",void 0);l([a.property({type:Boolean,readOnly:!0,dependsOn:["textTextureAtlas.updating"]})],d.prototype,"updating",null);return d=l([a.subclass("esri.views.3d.layers.graphics.Labeler")],d)}(a.declared(h));d.Labeler=r;var E={graphic:null,renderingInfo:null,layer:null}})},"esri/layers/support/labelFormatUtils":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ../../intl/date ../../intl/number ./FieldsIndex ./fieldUtils ../../support/arcadeOnDemand".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){function p(){return b(this,void 0,void 0,function(){return k(this,function(a){return[2,h.create(function(a){r(["../../core/sql/WhereClause"],a)})]})})}function q(a,b,c,h){a=f.getField(h,a);if(!a)return b;if(null==c[a.name])return"";if(b=a.domain)if("codedValue"===b.type||"coded-value"===b.type){h=c[a.name];var d=0;for(b=b.codedValues;d<b.length;d++){var k=b[d];if(k.code===h)return k.name}}else if("range"===b.type&&(h=+c[a.name],d="range"in b?b.range[1]:b.maxValue,
("range"in b?b.range[0]:b.minValue)<=h&&h<=d))return b.name;c=c[a.name];"date"===a.type||"esriFieldTypeDate"===a.type?c=g.formatDate(c,g.convertDateFormatToIntlOptions("short-date")):f.isNumericField(a)&&(c=e.formatNumber(+c));return c?c:""}Object.defineProperty(d,"__esModule",{value:!0});var v={type:"simple",evaluate:function(a){return null}};d.createLabelFunction=function(e,f,g){return b(this,void 0,void 0,function(){var b,h,d,l,B,t,x,y;return k(this,function(k){switch(k.label){case 0:if(!e||!e.symbol)return[2,
v];b=e.where;h=e.getLabelExpression();return b?[4,p()]:[3,2];case 1:return l=k.sent(),[3,3];case 2:l=null,k.label=3;case 3:return d=l,"arcade"!==h.type?[3,5]:[4,a.createLabelExpression(h.expression,g,f)];case 4:return t=k.sent(),B={type:"arcade",evaluate:function(a){a=t.evaluate({$feature:t.repurposeFeature(a)});return null!=a?a.toString():null}},[3,6];case 5:B={type:"simple",evaluate:function(a){var b=a&&a.attributes;return b?h.expression.replace(/{[^}]*}/g,function(a){return q(a.slice(1,-1),a,b,
f)}):null}},k.label=6;case 6:if(b){try{x=d.WhereClause.create(b,new c(f))}catch(L){return[2,v]}y=B.evaluate;B.evaluate=function(a){return x.testFeature(a)?y(a):null}}return[2,B]}})})};d.formatField=q})},"esri/views/3d/layers/graphics/Graphics3DCalloutSymbolLayerFactory":function(){define(["require","exports","../../../../core/Logger","../../../../symbols/callouts/calloutUtils","./Graphics3DLineCalloutSymbolLayer"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=n.getLogger("esri.views.3d.layers.graphics.Graphics3DCalloutSymbolLayerFactory");
d.make=function(g,e){if(!l.isCalloutSupport(g))return b.error("Graphics3DCalloutSymbolLayerFactory#make","symbol of type '"+g.type+"' does not support callouts"),null;if(!g.callout)return null;var c=h[g.callout.type];return c?new c(g,e):(b.error("Graphics3DCalloutSymbolLayerFactory#make","unknown or unsupported callout type "+g.callout.type),null)};var h={line:k.default}})},"esri/views/3d/layers/graphics/Graphics3DLineCalloutSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./symbolComplexity ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Util ../../webgl-engine/materials/LineCalloutMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){Object.defineProperty(d,"__esModule",{value:!0});var m,u,z=x.VertexAttrConstants;r=function(a){function d(b,c){b=a.call(this,b,null,c,!0)||this;b._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1};return b}n(d,a);d.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a;return l(this,function(b){a=this._getStageIdHint();this._createMaterialsAndAddToStage(this._context.stage,a);return[2]})})};d.prototype.destroy=function(){a.prototype.destroy.call(this);
this._material&&(this._context.stage.remove(v.ModelContentType.MATERIAL,this._material.id),this._material=null)};d.prototype.perInstanceMaterialParameters=function(a){var b=this.materialParameters;b.screenOffset=a.screenOffset||[0,0];b.centerOffsetUnits=a.centerOffsetUnits||"world";return b};Object.defineProperty(d.prototype,"materialParameters",{get:function(){var a=this.symbol,c=a.callout,e=h.isSome(c.color)?b.toUnitRGBA(c.color):[0,0,0,0];e[3]*=this._getLayerOpacity();var f=g.pt2px(c.size||0),
d=null;if(a.verticalOffset)var d=a.verticalOffset,k=d.minWorldLength,l=d.maxWorldLength,d={screenLength:g.pt2px(d.screenLength),minWorldLength:k||0,maxWorldLength:null!=l?l:Infinity};c=h.isSome(c.border)&&h.isSome(c.border.color)?b.toUnitRGBA(c.border.color):null;k="object"===a.symbolLayers.getItemAt(0).type;return{color:e,size:f,verticalOffset:d,screenSizePerspective:this._context.screenSizePerspectiveEnabled?this._context.sharedResources.screenSizePerspectiveSettings:null,screenOffset:[0,0],centerOffsetUnits:"world",
borderColor:c,occlusionTest:!k,shaderPolygonOffset:k?0:void 0,depthHUDAlignStart:"label-3d"===a.type,slicePlaneEnabled:this._context.slicePlaneEnabled}},enumerable:!0,configurable:!0});d.prototype._createMaterialsAndAddToStage=function(a,b){this._material=new w(this.materialParameters,b+"_lineCallout_common");a.add(v.ModelContentType.MATERIAL,this._material)};d.prototype._defaultElevationInfoNoZ=function(){return F};d.prototype.createGraphics3DGraphic=function(a){var b=a.renderingInfo;a=a.graphic;
var c=this.getGraphicElevationContext(a,b.elevationOffset||0),e=b.symbol,f="on-the-ground"===this._elevationContext.mode&&!e.symbolLayers.some(function(a){return"object"===a.type||"text"===a.type});if("label-3d"!==e.type&&f)return null;e=p.computeCentroid(a.geometry);return h.isNone(e)?null:this._createAs3DShape(a,e,c,b,"graphic"+a.uid,a.uid)};d.prototype.layerOpacityChanged=function(){this._material.setParameterValues(this.materialParameters);return!0};d.prototype.layerElevationInfoChanged=function(a,
b,c){var e=this,f=this._elevationContext.mode;if(c!==f&&("on-the-ground"===c||"on-the-ground"===f))return!1;a.forEach(function(a){var c=b(a);c&&e.updateGraphicElevationContext(a.graphic,c)});return!0};d.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};d.prototype.pixelRatioChanged=function(a,b){return!0};d.prototype.getGraphicElevationContext=function(b,c){void 0===c&&(c=0);b=a.prototype.getGraphicElevationContext.call(this,
b);b.addOffsetRenderUnits(c);return b};d.prototype.updateGraphicElevationContext=function(a,b){a=this.getGraphicElevationContext(a,b.metadata.elevationOffset);b.elevationContext.set(a);b.needsElevationUpdates=f.needsElevationUpdates2D(a.mode)};d.prototype.computeComplexity=function(){return{primitivesPerFeature:2,primitivesPerCoordinate:0,estimated:!1,memory:q.emptySymbolComplexity.memory}};d.prototype.createVertexData=function(a){var b,c=a.translation;a=a.centerOffset;if(!c&&!a)return B;c=c?{size:3,
data:[c[0],c[1],c[2]]}:B[z.POSITION];a=a?{size:4,data:[a[0],a[1],a[2],a[3]]}:B[z.AUXPOS1];return b={},b[z.POSITION]=c,b[z.NORMAL]=B[z.NORMAL],b[z.AUXPOS1]=a,b};d.prototype.getOrCreateMaterial=function(a,b){var c=this.perInstanceMaterialParameters(a),e=w.uniqueMaterialIdentifier(c);if(e===this._material.uniqueMaterialIdentifier)return{material:this._material,isUnique:!1};if(a.materialCollection){var f=a.materialCollection.getMaterial(e);f||(f=new w(c,b+"_lineCallout_shared"),a.materialCollection.addMaterial(e,
f));return{material:f,isUnique:!1}}f=new w(c,b+"_lineCallout_unique");return{material:f,isUnique:!0}};d.prototype._createAs3DShape=function(a,b,g,h,d,k){a=new y(this.createVertexData(h),C,y.DefaultOffsets,"point");a=[new t(a,d)];var l=this.getOrCreateMaterial(h,d);d=f.createStageObjectForPoint(this._context,b,a,[l.material],null,null,g,d,this._context.layer.uid,k,!0);if(null===d)return null;k=new c(this,d.object,a,l.isUnique?[l.material]:null,null,e.perObjectElevationAligner,g);k.metadata={elevationOffset:h.elevationOffset||
0};k.alignedTerrainElevation=d.terrainElevation;k.needsElevationUpdates=f.needsElevationUpdates2D(g.mode);f.extendPointGraphicElevationContext(k,b,this._context.elevationProvider);return k};return d}(a.Graphics3DSymbolLayer);d.Graphics3DLineCalloutSymbolLayer=r;var B=(m={},m[z.POSITION]={size:3,data:[0,0,0]},m[z.NORMAL]={size:3,data:[0,0,1]},m[z.AUXPOS1]={size:4,data:[0,0,0,1]},m);m=new Uint32Array([0]);var C=(u={},u[z.POSITION]=m,u[z.NORMAL]=m,u[z.AUXPOS1]=m,u),F={mode:"relative-to-ground",offset:0};
d.default=r})},"esri/views/3d/layers/graphics/ElevationAligners":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ./Graphics3DSymbolCommonCode ./graphicUtils ../../support/debugFlags ../../support/projectionUtils ../../webgl-engine/lib/Util".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,"__esModule",{value:!0});
var p=a.VertexAttrConstants,q=new h,v=b.vec3f64.create(),t=b.vec3f64.create(),y=b.vec3f64.create(),x=l.mat4f64.create(),w=b.vec3f64.create(),m={verticalDistanceToGround:0,terrainElevation:0};d.perVertexElevationAligner=function(a,b,e,f){a=a.stageObject;q.spatialReference=e.spatialReference;for(var h=a.getGeometryRecords(),k=h.length,l="absolute-height"!==b.mode,u=0,z=0;z<k;z++){var B=h[z].geometry,w=h[z].getShaderTransformation();t[0]=w[12];t[1]=w[13];t[2]=w[14];B.invalidateBoundingInfo();for(var w=
B.data.getVertexAttr(),x=w[p.POSITION],B=x.data,w=w.mapPos.data,x=x.size,C=B.length/x,n=0,F=0,r=!1,Q=0,J=0;J<C;J++){q.x=w[F++];q.y=w[F++];q.z=w[F++];y[0]=B[n];y[1]=B[n+1];y[2]=B[n+2];var R=g.computeElevation(e,q,b,f,l?m:null);l&&(Q+=m.terrainElevation);v[0]=B[n]+t[0];v[1]=B[n+1]+t[1];v[2]=B[n+2]+t[2];f.setAltitude(R,v);B[n]=v[0]-t[0];B[n+1]=v[1]-t[1];B[n+2]=v[2]-t[2];if(c.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS)r=!0;else if(R=d.updateThresholdInMeters/f.unitInMeters,Math.abs(y[0]-B[n])>=R||Math.abs(y[1]-
B[n+1])>=R||Math.abs(y[2]-B[n+2])>=R)r=!0;n+=x}u+=Q/C;r&&a.geometryVertexAttrsUpdated(z)}return u/k};d.perObjectElevationAligner=function(a,b,h,l,p){a=a.stageObject;var q=b.centerPointInElevationSR,z=0;p=0;if(a.metadata.usesVerticalDistanceToGround)z=g.computeElevation(h,q,b,l,m),e.updateVertexAttributeAuxpos1w(a,m.verticalDistanceToGround),p=m.terrainElevation;else{var B="absolute-height"!==b.mode,z=g.computeElevation(h,q,b,l,B?m:null);B&&(p=m.terrainElevation)}b=n.mat4.copy(u,a.objectTransformation);
h=k.vec3.set(w,b[12],b[13],b[14]);c.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES?(v[0]=q.x,v[1]=q.y,v[2]=z,f.computeLinearTransformation(q.spatialReference,v,b,l.spatialReference)&&(a.objectTransformation=b)):l.setAltitudeOfTransformation(z,b);l=d.updateThresholdInMeters/l.unitInMeters;if(Math.abs(b[12]-h[0])>=l||Math.abs(b[13]-h[1])>=l||Math.abs(b[14]-h[2])>=l)a.objectTransformation=b;return p};var u=l.mat4f64.create();d.perLodInstanceElevationAligner=function(a,b,e,h,l){var p=b.centerPointInElevationSR,
u=0;l=0;var q="absolute-height"!==b.mode,u=g.computeElevation(e,p,b,h,q?m:null);q&&(l=m.terrainElevation);b=a.graphics3DSymbolLayer.lodRenderer.instanceData;a=a.instanceIndex;b.getGlobalTransform(a,x);e=k.vec3.set(w,x[12],x[13],x[14]);c.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES?(v[0]=p.x,v[1]=p.y,v[2]=u,f.computeLinearTransformation(p.spatialReference,v,x,h.spatialReference)&&b.setGlobalTransform(a,x)):h.setAltitudeOfTransformation(u,x);h=d.updateThresholdInMeters/h.unitInMeters;(Math.abs(x[12]-
e[0])>=h||Math.abs(x[13]-e[1])>=h||Math.abs(x[14]-e[2])>=h)&&b.setGlobalTransform(a,x);return l};d.updateThresholdInMeters=.01;d.iterativeUpdatesEnabled=!0})},"esri/views/3d/layers/graphics/Graphics3DSymbolCommonCode":function(){define("require exports ../../../../core/compilerUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/coordsUtils ../../../../geometry/support/triangulationUtils ../../../../layers/graphics/dehydratedFeatures ./graphicUtils ../../support/projectionUtils ../../webgl-engine/lib/Object3D".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){function p(a,b,c,e,f){var g=b.z||0,h=c.featureExpressionInfoContext;switch(c.mode){case "on-the-ground":return c=a.getElevation(b,"ground")||0,f&&(f.verticalDistanceToGround=0,f.terrainElevation=c),c;case "relative-to-ground":return a=a.getElevation(b,"ground")||0,c=c.calculateOffsetRenderUnits(e),null==h&&(c+=g),f&&(f.verticalDistanceToGround=c,f.terrainElevation=a),c+a;case "relative-to-scene":return a=a.getElevation(b,"scene")||0,c=c.calculateOffsetRenderUnits(e),
f&&(f.verticalDistanceToGround=c,f.terrainElevation=a),c+a;case "absolute-height":return c=c.calculateOffsetRenderUnits(e),null==h&&(c+=g),f&&(a=a.getElevation(b,"ground")||0,f.verticalDistanceToGround=c-a,f.terrainElevation=a),c;default:n.neverReached(c.mode)}return 0}function q(a,b,c,e,f,g,h,d){var k=d.mode,l=0,p=0,m=0;h=d.calculateOffsetRenderUnits(h);d=d.featureExpressionInfoContext;B.spatialReference=a.spatialReference;c*=3;f*=3;for(var u=0;u<g;++u){B.x=b[c+0];B.y=b[c+1];B.z=b[c+2];switch(k){case "on-the-ground":p=
l=a.getElevation(B)||0;m+=l;break;case "relative-to-ground":l=a.getElevation(B)||0;p=l+h;null==d&&(p+=B.z);m+=l;break;case "relative-to-scene":l=a.getElevation(B,"scene")||0;p=l+h;m+=l;break;case "absolute-height":p=h,null==d&&(p+=B.z)}e[f+0]=b[c+0];e[f+1]=b[c+1];e[f+2]=p;c+=3;f+=3}return{terrainElevation:m/g}}function v(a,b){a=g.pathsToTriangulationInfo(a,b);return{vertexData:a.position,polygons:a.polygons,outlines:a.outlines}}function t(a,b,c,e,f){b*=3;e*=3;for(var g=0;g<f;++g)c[e++]=a[b++],c[e++]=
a[b++],c[e++]=a[b++]}function y(a,b,c,e,g,h,d){return f.bufferToBuffer(a,c,b,e,h,g,d)}function x(a,b,c){f.pointToVector(a,b,c)}function w(a,b){return!(a[0]>b[3]||a[0]<b[0]||a[1]>b[4]||a[1]<b[1])}function m(a,b){return!(b[0]>a[3]||b[3]<a[0]||b[1]>a[4]||b[4]<a[1])}Object.defineProperty(d,"__esModule",{value:!0});var u=b.vec3f64.create(),z=k.mat4f64.create(),B=e.makeDehydratedPoint(0,0,0,null);d.createStageObjectForPoint=function(b,e,g,h,d,k,m,q,B,t,v,y){var n=g?g.length:0,I=b.clippingExtent;x(e,u,b.elevationProvider.spatialReference);
if(I&&!w(u,I))return null;x(e,u,b.renderSpatialReference);I=b.localOriginFactory.getOrigin(u);q=new a({castShadow:!1,metadata:{layerUid:B,graphicUid:t,usesVerticalDistanceToGround:!!v},idHint:q});for(B=0;B<n;B++)q.addGeometry(g[B],h[B],d?d[B]:z,k,I,y);g=b.renderSpatialReference;h=b.elevationProvider;d=b.renderCoordsHelper;b=0;var H;q.metadata.usesVerticalDistanceToGround?(b=p(h,e,m,d,F),c.updateVertexAttributeAuxpos1w(q,F.verticalDistanceToGround),H=F.terrainElevation):(k="absolute-height"!==m.mode,
b=p(h,e,m,d,k?F:null),k&&(H=F.terrainElevation));m=l.mat4.copy(C,q.objectTransformation);u[0]=e.x;u[1]=e.y;u[2]=b;f.computeLinearTransformation(e.spatialReference,u,m,g)?q.objectTransformation=m:console.warn("Could not locate symbol object properly, it might be misplaced");return{object:q,terrainElevation:H}};d.extendPointGraphicElevationContext=function(a,b,c){a=a.elevationContext;c=c.spatialReference;x(b,u,c);a.centerPointInElevationSR=e.makeDehydratedPoint(u[0],u[1],b.hasZ?u[2]:0,c)};d.placePointOnGeometry=
function(a){switch(a.type){case "point":return a;case "polygon":case "extent":return c.computeCentroid(a);case "polyline":var b=a.paths[0];if(!b||0===b.length)break;b=h.getPointOnPath(b,h.getPathLength(b)/2);return e.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference);case "mesh":return a.extent.center}return null};d.computeElevation=p;d.applyElevation=q;var C=k.mat4f64.create();d.getSingleSizeDriver=function(a,b){void 0===b&&(b=0);return isFinite(a[b])?a[b]:null};d.copyPathData=v;d.copyVertices=
t;d.applyOrigin=function(a,b,c,e){var f=Math.floor(b+(c-1)/2);e[0]=a[3*f+0];e[1]=a[3*f+1];e[2]=a[3*f+2];b*=3;for(f=0;f<c;++f)a[b++]-=e[0],a[b++]-=e[1],a[b++]-=e[2]};d.setZ=function(a,b,c,e){b*=3;for(var f=0;f<c;++f)a[b+2]=e,b+=3};d.offsetZ=function(a,b,c,e){b*=3;for(var f=0;f<c;++f)a[b+2]+=e,b+=3};d.scaleZ=function(a,b,c,e){b*=3;for(var f=0;f<c;++f)a[b+2]*=e,b+=3};d.flatArrayToArrayOfArrays=function(a,b,c){var e=[];b*=3;for(var f=0;f<c;++f)e.push([a[b++],a[b++],a[b++]]);return e};d.reproject=y;d.reprojectPoint=
x;d.getGeometryVertexData3D=function(a,b,c,e,f,g,h){var d=f.spatialReference;a=v(a,b);b=a.vertexData;var k=b.length/3,l=new Float64Array(b.length),p=!0;c.equals(d)?t(b,0,l,0,b.length):p=y(b,0,c,l,0,d,k);c=q(f,l,0,b,0,k,g,h);d.equals(e)||y(b,0,d,b,0,e,k);return{geometryData:a,vertexData:b,eleVertexData:l,terrainElevation:c.terrainElevation,projectionSuccess:p}};d.getGeometryVertexDataDraped=function(a,b,c){a=v(a,!1);var e=a.vertexData,g=e.length/3,h=!0;b.equals(c)||(h=f.bufferToBuffer(e,b,0,e,c,0,
g));return{geometryData:a,vertexData:e,projectionSuccess:h}};d.computeBoundingBox=function(a,b,c,e){e[0]=Number.MAX_VALUE;e[1]=Number.MAX_VALUE;e[2]=Number.MAX_VALUE;e[3]=-Number.MAX_VALUE;e[4]=-Number.MAX_VALUE;e[5]=-Number.MAX_VALUE;b*=3;for(var f=0;f<c;++f){var g=a[b++],h=a[b++],d=a[b++];g<e[0]&&(e[0]=g);h<e[1]&&(e[1]=h);d<e[2]&&(e[2]=d);g>e[3]&&(e[3]=g);h>e[4]&&(e[4]=h);d>e[5]&&(e[5]=d)}return e};d.pointInBox2D=w;d.boxesIntersect2D=m;d.boundingBoxClipped=function(a,b){return b?!m(a,b):!1};d.needsElevationUpdates2D=
function(a){return"relative-to-ground"===a||"relative-to-scene"===a};d.needsElevationUpdates3D=function(a){return"absolute-height"!==a};var F={verticalDistanceToGround:0,terrainElevation:0}})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils","./meshUtils/deduplicate"],function(r,d,n,l,k){function b(b,c,f){if(1===b.length)return b[0];c=new Float64Array(c);f=new Uint32Array(f);for(var a=0,e=0,g=0,h=0;h<b.length;h++){for(var d=
b[h],k=0;k<d.position.length;k++)c[a++]=d.position[k];for(k=0;k<d.faces.length;k++)f[e++]=d.faces[k]+g;g=a/3}return{position:c,faces:f}}function h(b,c){for(var e=b.length,a=Array(e),h=Array(e),d=Array(e),k=0,t=0,y=0,x=0,w=0;w<e;++w)x+=b[w].length;for(var x=new Float64Array(3*x),m=0,u=e-1;0<=u;u--){var z=b[u],B=!l.isClockwise(z,!1,!1);if(B&&1!==e)a[k++]=z;else{for(var n=z.length,w=0;w<k;++w)n+=a[w].length;w={index:m,pathLengths:Array(k+1),count:n,holeIndices:Array(k)};w.pathLengths[0]=z.length;0<z.length&&
(d[y++]={index:m,count:z.length});m=B?g(z,z.length-1,-1,x,m,z.length,c):g(z,0,1,x,m,z.length,c);for(z=0;z<k;++z)B=a[z],w.holeIndices[z]=m,w.pathLengths[z+1]=B.length,0<B.length&&(d[y++]={index:m,count:B.length}),m=g(B,0,1,x,m,B.length,c);k=0;0<w.count&&(h[t++]=w)}}for(z=0;z<k;++z)B=a[z],0<B.length&&(d[y++]={index:m,count:B.length}),m=g(B,0,1,x,m,B.length,c);t<e&&(h.length=t);y<e&&(d.length=y);return{position:x,polygons:h,outlines:d}}function g(b,c,f,a,g,h,d){g*=3;for(var e=0;e<h;++e){var k=b[c];a[g++]=
k[0];a[g++]=k[1];a[g++]=d?k[2]:0;c+=f}return g/3}Object.defineProperty(d,"__esModule",{value:!0});d.triangulate=function(e){var c=h(e.rings,e.hasZ),f=[],a=0,g=0;e=function(b){var e=b.index,h=new Float64Array(c.position.buffer,3*e*c.position.BYTES_PER_ELEMENT,3*b.count);b=b.holeIndices.map(function(a){return a-e});b=new Uint32Array(n(h,b,3));f.push({position:h,faces:b});a+=h.length;g+=b.length};for(var d=0,l=c.polygons;d<l.length;d++)e(l[d]);e=b(f,a,g);d=k.default(e.position.buffer,6,e.faces);e.position=
new Float64Array(d.buffer);e.faces=d.indices;return e};d.pathsToTriangulationInfo=h})},"esri/core/libs/earcut/earcut":function(){define([],function(){function r(a,c,f){f=f||2;var g=c&&c.length,k=g?c[0]*f:a.length,p=d(a,0,k,f,!0),m=[];if(!p||p.next===p.prev)return m;var u,q,z,t;if(g){var w=f,g=[],x,y,r;t=0;for(x=c.length;t<x;t++)y=c[t]*w,r=t<x-1?c[t+1]*w:a.length,y=d(a,y,r,w,!1),y===y.next&&(y.steiner=!0),g.push(e(y));g.sort(b);for(t=0;t<g.length;t++){c=g[t];w=p;if(w=h(c,w))c=v(w,c),n(c,c.next);p=
n(p,p.next)}}if(a.length>80*f){u=z=a[0];q=g=a[1];for(w=f;w<k;w+=f)t=a[w],c=a[w+1],t<u&&(u=t),c<q&&(q=c),t>z&&(z=t),c>g&&(g=c);z=Math.max(z-u,g-q);z=0!==z?1/z:0}l(p,m,f,u,q,z);return m}function d(b,c,e,f,g){var h;if(g===0<w(b,c,e,f))for(g=c;g<e;g+=f)h=t(g,b[g],b[g+1],h);else for(g=e-f;g>=c;g-=f)h=t(g,b[g],b[g+1],h);h&&a(h,h.next)&&(y(h),h=h.next);return h}function n(b,c){if(!b)return b;c||(c=b);var e;do if(e=!1,b.steiner||!a(b,b.next)&&0!==f(b.prev,b,b.next))b=b.next;else{y(b);b=c=b.prev;if(b===b.next)break;
e=!0}while(e||b!==c);return c}function l(b,e,h,d,t,w,x){if(b){if(!x&&w){var m=b,u=m;do null===u.z&&(u.z=g(u.x,u.y,d,t,w)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==m);u.prevZ.nextZ=null;u.prevZ=null;var m=u,z,B,C,H,F,E,r=1;do{u=m;C=m=null;for(H=0;u;){H++;B=u;for(z=F=0;z<r&&(F++,B=B.nextZ,B);z++);for(E=r;0<F||0<E&&B;)0!==F&&(0===E||!B||u.z<=B.z)?(z=u,u=u.nextZ,F--):(z=B,B=B.nextZ,E--),C?C.nextZ=z:m=z,z.prevZ=C,C=z;u=B}C.nextZ=null;r*=2}while(1<H)}for(m=b;b.prev!==b.next;){u=b.prev;B=b.next;if(w)C=
k(b,d,t,w);else a:if(C=b,H=C.prev,F=C,r=C.next,0<=f(H,F,r))C=!1;else{for(z=C.next.next;z!==C.prev;){if(c(H.x,H.y,F.x,F.y,r.x,r.y,z.x,z.y)&&0<=f(z.prev,z,z.next)){C=!1;break a}z=z.next}C=!0}if(C)e.push(u.i/h),e.push(b.i/h),e.push(B.i/h),y(b),m=b=B.next;else if(b=B,b===m){if(!x)l(n(b),e,h,d,t,w,1);else if(1===x){x=e;m=h;u=b;do B=u.prev,C=u.next.next,!a(B,C)&&p(B,u,u.next,C)&&q(B,C)&&q(C,B)&&(x.push(B.i/m),x.push(u.i/m),x.push(C.i/m),y(u),y(u.next),u=b=C),u=u.next;while(u!==b);b=u;l(b,e,h,d,t,w,2)}else if(2===
x)a:{x=b;do{for(m=x.next.next;m!==x.prev;){if(u=x.i!==m.i){u=x;B=m;C=void 0;if(C=u.next.i!==B.i&&u.prev.i!==B.i){C=void 0;b:{C=u;do{if(C.i!==u.i&&C.next.i!==u.i&&C.i!==B.i&&C.next.i!==B.i&&p(C,C.next,u,B)){C=!0;break b}C=C.next}while(C!==u);C=!1}C=!C}H=void 0;if(H=C&&q(u,B)&&q(B,u)){C=u;H=!1;F=(u.x+B.x)/2;B=(u.y+B.y)/2;do C.y>B!==C.next.y>B&&C.next.y!==C.y&&F<(C.next.x-C.x)*(B-C.y)/(C.next.y-C.y)+C.x&&(H=!H),C=C.next;while(C!==u)}u=H}if(u){b=v(x,m);x=n(x,x.next);b=n(b,b.next);l(x,e,h,d,t,w);l(b,e,
h,d,t,w);break a}m=m.next}x=x.next}while(x!==b)}break}}}}function k(a,b,e,h){var d=a.prev,k=a.next;if(0<=f(d,a,k))return!1;var l=d.x>a.x?d.x>k.x?d.x:k.x:a.x>k.x?a.x:k.x,p=d.y>a.y?d.y>k.y?d.y:k.y:a.y>k.y?a.y:k.y,m=g(d.x<a.x?d.x<k.x?d.x:k.x:a.x<k.x?a.x:k.x,d.y<a.y?d.y<k.y?d.y:k.y:a.y<k.y?a.y:k.y,b,e,h);b=g(l,p,b,e,h);e=a.prevZ;for(h=a.nextZ;e&&e.z>=m&&h&&h.z<=b;){if(e!==a.prev&&e!==a.next&&c(d.x,d.y,a.x,a.y,k.x,k.y,e.x,e.y)&&0<=f(e.prev,e,e.next))return!1;e=e.prevZ;if(h!==a.prev&&h!==a.next&&c(d.x,
d.y,a.x,a.y,k.x,k.y,h.x,h.y)&&0<=f(h.prev,h,h.next))return!1;h=h.nextZ}for(;e&&e.z>=m;){if(e!==a.prev&&e!==a.next&&c(d.x,d.y,a.x,a.y,k.x,k.y,e.x,e.y)&&0<=f(e.prev,e,e.next))return!1;e=e.prevZ}for(;h&&h.z<=b;){if(h!==a.prev&&h!==a.next&&c(d.x,d.y,a.x,a.y,k.x,k.y,h.x,h.y)&&0<=f(h.prev,h,h.next))return!1;h=h.nextZ}return!0}function b(a,b){return a.x-b.x}function h(a,b){var e=b,f=a.x,g=a.y,h=-Infinity,d;do{if(g<=e.y&&g>=e.next.y&&e.next.y!==e.y){var k=e.x+(g-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(k<=f&&
k>h){h=k;if(k===f){if(g===e.y)return e;if(g===e.next.y)return e.next}d=e.x<e.next.x?e:e.next}}e=e.next}while(e!==b);if(!d)return null;if(f===h)return d.prev;b=d;for(var k=d.x,l=d.y,p=Infinity,m,e=d.next;e!==b;)f>=e.x&&e.x>=k&&f!==e.x&&c(g<l?f:h,g,k,l,g<l?h:f,g,e.x,e.y)&&(m=Math.abs(g-e.y)/(f-e.x),(m<p||m===p&&e.x>d.x)&&q(e,a)&&(d=e,p=m)),e=e.next;return d}function g(a,b,c,e,f){a=32767*(a-c)*f;b=32767*(b-e)*f;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<
4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function e(a){var b=a,c=a;do{if(b.x<c.x||b.x===c.x&&b.y<c.y)c=b;b=b.next}while(b!==a);return c}function c(a,b,c,e,f,g,h,d){return 0<=(f-h)*(b-d)-(a-h)*(g-d)&&0<=(a-h)*(e-d)-(c-h)*(b-d)&&0<=(c-h)*(g-d)-(f-h)*(e-d)}function f(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function a(a,b){return a.x===b.x&&a.y===b.y}function p(b,c,e,g){return a(b,c)&&a(e,g)||a(b,g)&&a(e,c)?!0:0<f(b,c,e)!==0<f(b,c,g)&&0<f(e,g,b)!==
0<f(e,g,c)}function q(a,b){return 0>f(a.prev,a,a.next)?0<=f(a,b,a.next)&&0<=f(a,a.prev,b):0>f(a,b,a.prev)||0>f(a,a.next,b)}function v(a,b){var c=new x(a.i,a.x,a.y),e=new x(b.i,b.x,b.y),f=a.next,g=b.prev;a.next=b;b.prev=a;c.next=f;f.prev=c;e.next=c;c.prev=e;g.next=e;e.prev=g;return e}function t(a,b,c,e){a=new x(a,b,c);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function y(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=
a.prevZ)}function x(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function w(a,b,c,e){for(var f=0,g=c-e;b<c;b+=e)f+=(a[g]-a[b])*(a[b+1]+a[g+1]),g=b;return f}r.deviation=function(a,b,c,e){var f=b&&b.length,g=Math.abs(w(a,0,f?b[0]*c:a.length,c));if(f)for(var f=0,h=b.length;f<h;f++)g-=Math.abs(w(a,b[f]*c,f<h-1?b[f+1]*c:a.length,c));for(f=b=0;f<e.length;f+=3){var h=e[f]*c,d=e[f+1]*c,k=e[f+2]*c;b+=Math.abs((a[h]-a[k])*(a[d+1]-a[h+1])-(a[h]-a[d])*
(a[k+1]-a[h+1]))}return 0===g&&0===b?0:Math.abs((b-g)/g)};r.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},e=0,f=0;f<a.length;f++){for(var g=0;g<a[f].length;g++)for(var h=0;h<b;h++)c.vertices.push(a[f][g][h]);0<f&&(e+=a[f-1].length,c.holes.push(e))}return c};return r})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["require","exports","../../../core/mathUtils"],function(r,d,n){function l(b,h,g,e){void 0===e&&(e=0);var c=b.byteLength/(4*h),f=new Uint32Array(b,
0,c*h);b=new Uint32Array(c);var a=Math.floor(1.1*c)+1;if(null==k||k.length<2*a)k=new Uint32Array(n.nextHighestPowerOfTwo(2*a));for(var d=0;d<2*a;d++)k[d]=0;for(var l=0,v=0!==e?Math.ceil(7.84*1.96/(e*e)*e*(1-e)):c,d=0;d<c;d++){if(d===v){var t=1-l/d;if(t+1.96*Math.sqrt(t*(1-t)/d)<e)return null;v*=2}for(var t=d*h,y,x=y=0;x<h;x++)y=f[t+x]+y|0,y=y+(y<<11)+(y>>>2)|0;y>>>=0;for(var x=y%a,w=l;0!==k[2*x+1];){if(k[2*x]===y){var m=k[2*x+1]-1,u=m*h;a:{for(var z=0;z<h;z++)if(f[t+z]!==f[u+z]){u=!1;break a}u=!0}if(u){w=
b[m];break}}x++;x>=a&&(x-=a)}w===l&&(k[2*x]=y,k[2*x+1]=d+1,l++);b[d]=w}if(0!==e&&1-l/c<e)return null;e=new Uint32Array(h*l);for(d=l=0;d<c;d++)if(b[d]===l){a=f;v=d*h;t=e;y=l*h;x=h;for(w=0;w<x;w++)t[y+w]=a[v+w];l++}if(g){h=new Uint32Array(g.length);for(d=0;d<h.length;d++)h[d]=b[g[d]];b=h}return{buffer:e.buffer,indices:b,uniqueCount:l}}Object.defineProperty(d,"__esModule",{value:!0});d.deduplicate=l;var k=null;d.default=l})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../core/mathUtils ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../layers/graphics/dehydratedFeatures ../../support/projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){function y(a){var b=a.paths[0];if(!b||0===b.length)return null;b=q.getPointOnPath(b,q.getPathLength(b)/2);return v.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function x(a,b,c){if(!b||!a)return a;c=c?a:v.clonePoint(a);return t.pointToPoint(a,c,b)?c:null}function w(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!w(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(d,"__esModule",{value:!0});d.computeCentroid=function(a,b){if("point"===
a.type)return x(a,b,!1);if(v.isHydratedGeometry(a))switch(a.type){case "extent":return x(a.center,b,!1);case "polygon":return x(a.centroid,b,!1);case "polyline":return x(y(a),b,!0);case "mesh":return x(a.extent.center,b,!1)}else switch(a.type){case "extent":var c=n.isFinite(a.zmin);a=v.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),c?.5*(a.zmax+a.zmin):void 0,a.spatialReference);return x(a,b,!0);case "polygon":return(c=a.rings[0])&&0!==c.length?(c=p.ringsCentroid(a.rings,a.hasZ),a=v.makeDehydratedPoint(c[0],
c[1],c[2],a.spatialReference)):a=null,x(a,b,!0);case "polyline":return x(y(a),b,!0)}};d.enlargeExtent=function(b,c,f){if(b){c||(c=a.create());var g=.5*b.width*(f-1);f=.5*b.height*(f-1);b.width<1E-7*b.height?g+=f/20:b.height<1E-7*b.width&&(f+=g/20);e.vec4.set(c,b.xmin-g,b.ymin-f,b.xmax+g,b.ymax+f);return c}return null};d.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var e=a.geometries[c].data.vertexAttributes.auxpos1;e&&e.data[3]!==b&&(e.data[3]=b,a.geometryVertexAttrsUpdated(c))}};
d.mixinColorAndOpacity=function(a,b){var e=c.vec4f64.clone(c.vec4f64.ONES);l.isSome(a)&&(e[0]=a[0],e[1]=a[1],e[2]=a[2]);l.isSome(b)?e[3]=b:l.isSome(a)&&3<a.length&&(e[3]=a[3]);return e};d.overrideColor=function(a,b,c,e,f,g){void 0===g&&(g=[0,0,0,0]);for(var h=0;3>h;++h)g[h]=a&&null!=a[h]?a[h]:c&&null!=c[h]?c[h]:f[h];g[3]=null!=b?b:null!=e?e:f[3];return g};d.computeObjectScale=function(a,b,c,e){void 0===a&&(a=g.vec3f64.ONES);void 0===e&&(e=1);var f=Array(3);if(null==b||null==c)f[0]=1,f[1]=1,f[2]=1;
else{for(var h=void 0,d=0,k=2;0<=k;k--){var l=a[k],p=void 0,u=null!=l,m=0===k&&!h&&!u,q=c[k];"symbolValue"===l||m?p=0!==q?b[k]/q:1:u&&"proportional"!==l&&isFinite(l)&&(p=0!==q?l/q:1);null!=p&&(h=f[k]=p,d=Math.max(d,Math.abs(p)))}for(k=2;0<=k;k--)null==f[k]?f[k]=h:0===f[k]&&(f[k]=.001*d)}for(k=2;0<=k;k--)f[k]/=e;return g.vec3f64.fromArray(f)};d.computeSizeWithResourceSize=function(a,b){var c=b.width,e=b.depth,f=b.height;b=b.isPrimitive?10:1;if(null==c&&null==f&&null==e)return[b*a[0],b*a[1],b*a[2]];
for(var c=g.vec3f64.fromValues(c,e,f),h,e=0;3>e;e++)if(f=c[e],null!=f){h=f/a[e];break}for(e=0;3>e;e++)null==c[e]&&(c[e]=a[e]*h);return c};d.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return w(a)?null:"Symbol sizes may not be negative values"};d.isValidSize=w;d.computeObjectRotation=function(a,c,e,f){void 0===f&&(f=b.mat4f64.create());a=a||0;c=c||0;e=e||0;0!==a&&k.mat4.rotateZ(f,f,-a/180*Math.PI);0!==c&&k.mat4.rotateX(f,f,c/180*Math.PI);0!==e&&k.mat4.rotateY(f,
f,e/180*Math.PI);return f};d.demResolutionForBoundingBox=function(a,b){return null!=b.minDemResolution?b.minDemResolution:f.isPoint(a)?b.minDemResolutionForPoints:.01*f.maximumDimension(a)};d.namedAnchorToHUDMaterialAnchorPos={"bottom-left":h.vec2f64.fromValues(0,0),bottom:h.vec2f64.fromValues(.5,0),"bottom-right":h.vec2f64.fromValues(1,0),left:h.vec2f64.fromValues(0,.5),center:h.vec2f64.fromValues(.5,.5),right:h.vec2f64.fromValues(1,.5),"top-left":h.vec2f64.fromValues(0,1),top:h.vec2f64.fromValues(.5,
1),"top-right":h.vec2f64.fromValues(1,1)}})},"esri/views/3d/layers/graphics/Graphics3DObject3DGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ./featureExpressionInfoUtils ./Graphics3DGraphicElevationContext ./graphicUtils ../../webgl-engine/Stage".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){r=function(){function d(a,b,e,f,g,h,k,l){this.type="object3d";this._addedToStage=!1;this.alignedTerrainElevation=0;this.needsElevationUpdates=!1;this.graphics3DSymbolLayer=a;this.uniqueMaterials=f;this.uniqueGeometries=e;this.uniqueTextures=g;this.stageObject=b;this.elevationAligner=h;this.elevationContext=new c(k);this.stageLayer=this.stage=null;this._visible=!1;this.visibilityMode=null!=l?l:d.VisibilityModes.HIDE_FACERANGE}d.prototype.initialize=function(b,c){this.stageLayer=
b;this.stage=c;if(this.uniqueMaterials)for(b=0;b<this.uniqueMaterials.length;b++)c.add(a.ModelContentType.MATERIAL,this.uniqueMaterials[b]);if(this.uniqueGeometries)for(b=0;b<this.uniqueGeometries.length;b++)c.add(a.ModelContentType.GEOMETRY,this.uniqueGeometries[b]);if(this.uniqueTextures)for(b=0;b<this.uniqueTextures.length;b++)c.add(a.ModelContentType.TEXTURE,this.uniqueTextures[b]);c.add(a.ModelContentType.OBJECT,this.stageObject)};d.prototype.setVisibility=function(a){if(null!=this.stage)return this._visible!==
a?((this._visible=a)?this._addedToStage?this.stageObject.unhideAllComponents():(this.stageLayer.addObject(this.stageObject),this._addedToStage=!0):this.visibilityMode===d.VisibilityModes.HIDE_FACERANGE?this.stageObject.hideAllComponents():(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1),a=this.stage.renderView.ensureEdgeView(),a.hasObject(this.stageObject)&&a.updateObjectVisibility(this.stageObject,this._visible),!0):!1};Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},
enumerable:!0,configurable:!0});d.prototype.destroy=function(){var b=this.stage;if(this.stageLayer){if(this.uniqueMaterials)for(var c=0;c<this.uniqueMaterials.length;c++)b.remove(a.ModelContentType.MATERIAL,this.uniqueMaterials[c].id);if(this.uniqueGeometries)for(c=0;c<this.uniqueGeometries.length;c++)b.remove(a.ModelContentType.GEOMETRY,this.uniqueGeometries[c].id);if(this.uniqueTextures)for(c=0;c<this.uniqueTextures.length;c++)b.remove(a.ModelContentType.TEXTURE,this.uniqueTextures[c].id)}b.remove(a.ModelContentType.OBJECT,
this.stageObject.id);this._addedToStage&&(this.stageLayer.removeObject(this.stageObject),this._addedToStage=!1);b=this.stage.renderView.ensureEdgeView();b.hasObject(this.stageObject)&&b.removeObject(this.stageObject);this._visible=!1;this.stage=this.stageLayer=null};d.prototype.alignWithElevation=function(a,b,c){this.elevationAligner&&(e.setContextFeature(this.elevationContext.featureExpressionInfoContext,c),a=this.elevationAligner(this,this.elevationContext,a,b),null!=a&&(this.alignedTerrainElevation=
a))};d.prototype.getBSRadius=function(){return this.stageObject.getBSRadius()};d.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=h.vec3f64.create());return b.vec3.copy(a,this.stageObject.getCenter(!0))};d.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=g.create());var b=this.stageObject;a||(a=g.create());g.setMin(a,b.getBBMin(!0));g.setMax(a,b.getBBMax(!0));return a};d.prototype.getProjectedBoundingBox=function(a,c,e,h,d){return k(this,void 0,void 0,function(){var k,u,m,z,
w,x,y,n,I,H;return l(this,function(l){switch(l.label){case 0:k=this.getBoundingBoxObjectSpace(d);u=t;m=g.isPoint(k)?1:u.length;for(z=0;z<m;z++)w=u[z],q[0]=k[w[0]],q[1]=k[w[1]],q[2]=k[w[2]],b.vec3.transformMat4(q,q,this.stageObject.objectTransformation),p[3*z+0]=q[0],p[3*z+1]=q[1],p[3*z+2]=q[2];if(!a(p,0,m))return[2,null];g.empty(k);x=null;this.calculateRelativeScreenBounds&&(x=this.calculateRelativeScreenBounds());for(z=0;z<3*m;z+=3){for(y=0;3>y;y++)k[y]=Math.min(k[y],p[z+y]),k[y+3]=Math.max(k[y+
3],p[z+y]);x&&e.push({location:p.slice(z,z+3),screenSpaceBoundingRect:x})}if(!c||!c.service||"absolute-height"===this.elevationContext.mode)return[3,5];g.center(k,v);n="relative-to-scene"===this.elevationContext.mode?"scene":"ground";I=void 0;if(!c.useViewElevation)return[3,1];I=c.service.getElevation(v[0],v[1],n);return[3,4];case 1:return l.trys.push([1,3,,4]),H=f.demResolutionForBoundingBox(k,c),[4,c.service.queryElevation(v[0],v[1],h,H,n)];case 2:return I=l.sent(),[3,4];case 3:return l.sent(),
I=null,[3,4];case 4:g.offset(k,0,0,-this.alignedTerrainElevation+I),l.label=5;case 5:return[2,k]}})})};d.prototype.addHighlight=function(a,b){b=this.stageObject.highlightAllComponents(b);a.addObject(this.stageObject,b)};d.prototype.removeHighlight=function(a){a.removeObject(this.stageObject)};return d}();(function(a){a=a.VisibilityModes||(a.VisibilityModes={});a[a.REMOVE_OBJECT=0]="REMOVE_OBJECT";a[a.HIDE_FACERANGE=1]="HIDE_FACERANGE"})(r||(r={}));var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0],q=h.vec3f64.create(),v=h.vec3f64.create(),t=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];return r})},"esri/views/3d/layers/graphics/featureExpressionInfoUtils":function(){define(["require","exports","../../../../layers/graphics/dehydratedFeatures","../../../../support/arcadeUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.createContext=function(d,b,h){var g=null;d=d&&d.expression;"string"===typeof d&&(g="0"===d?0:null,null!=g?g={cachedResult:g}:
(g=l.createSyntaxTree(d),l.dependsOnView(g)?(null!=h&&h.error("Expressions containing '$view' are not supported on ElevationInfo"),g={cachedResult:0}):g={arcade:{func:l.createFunction(g),context:l.createExecContext(null,{sr:b})}}));return g};d.createFeature=function(d,b){return l.createFeature(d.attributes,d.geometry,b)};d.setContextFeature=function(d,b){null!=d&&null==d.cachedResult&&(b._geometry&&(b._geometry=n.hydrateGeometry(b._geometry)),l.updateExecContext(d.arcade.context,b))};d.execute=function(d){if(null!=
d){if(null!=d.cachedResult)return d.cachedResult;var b=d.arcade,b=l.executeFunction(b.func,b.context);"number"!==typeof b&&(b=d.cachedResult=0);return b}return 0};d.extractExpressionInfo=function(d,b){void 0===b&&(b=!1);var h=(d=d&&d.featureExpressionInfo)&&d.expression;b||"0"===h||(d=null);return d};d.zeroContext={cachedResult:0}})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(r,d,n,l,k,b,h,g){function e(a){var b;try{b=a?n.parseScript(a):null}catch(v){b=null}return b}function c(a){a=e(a);return!!a&&n.scriptUsesGeometryEngine(a)}Object.defineProperty(d,"__esModule",{value:!0});d.arcade=n;d.Dictionary=l;d.arcadeFeature=k;var f=/^\$feature\./i,a={vars:{$feature:"any",$view:"any"},spatialReference:null};d.createSyntaxTree=e;d.createFunction=function(c,f){f=f||b.clone(a);c="string"===typeof c?e(c):c;if(!c)return null;var g;try{g=c?n.compileScript(c,f):null}catch(t){g=
null}return g};d.createExecContext=function(a,b){return{vars:{$feature:null==a?new k:k.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};d.createFeature=function(a,b,c){return k.createFromGraphicLikeObject(b,a,c)};d.updateExecContext=function(a,b){a.vars.$feature=b};d.evalSyntaxTree=function(a,b){var c;try{c=n.executeScript(a,b)}catch(t){c=null}return c};d.executeFunction=function(a,b){var c;try{c=a?a(b):null}catch(t){c=null}return c};d.executeAsyncFunction=function(a,b){try{return a?
a(b):h.resolve(null)}catch(v){return h.resolve(null)}};d.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?e(a):a;if(!a)return[];var b=[];n.extractFieldLiterals(a).forEach(function(a){f.test(a)&&(a=a.replace(f,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===c||b[c-1]!==a})};d.dependsOnView=function(a){return n.referencesMember(a,"$view")};d.hasVariable=function(a,b){return a?n.referencesMember(a,b):!1};d.getViewInfo=function(a){if(a&&(null!=a.spatialReference||
null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new l({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};d.convertServiceUrlToWorkspace=function(a,b){var c=n.featureSetUtils();return c?c.createFeatureSetCollectionFromService(a,b):null};d.convertFeatureLayerToFeatureSet=function(a,b){if(null===a)return null;var c=n.featureSetUtils();return c?c.constructFeatureSet(a,b):null};d.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;
var b=n.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};d.loadScriptDependencies=function(a,b,c){void 0===c&&(c=[]);return n.loadScriptDependencies(a,b,c)};d.enableGeometryOperations=function(){return n.enableGeometrySupport()};d.enableFeatureSetOperations=function(){return n.enableFeatureSetSupport()};d.applyTextFormattingHTML=function(a){var b=/(\n)/gi;return"string"===typeof a?a.replace(b,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};d.hasGeometryOperations=
function(a){if(!a)return!1;if("string"===typeof a)return c(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type){if("dot-density"===a.type){var b=a.attributes.some(function(a){return c(a.valueExpression)});if(b)return b}b=a.visualVariables;b=!!b&&b.some(function(a){var b=c(a.valueExpression);"size"===a.type&&(g.isSizeVariable(a.minSize)&&(b=b||c(a.minSize.valueExpression)),g.isSizeVariable(a.maxSize)&&(b=b||c(a.maxSize.valueExpression)));
return b});return"valueExpression"in a&&c(a.valueExpression)?!0:b}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!c(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return c(a.expression)}):!1}})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),function(r,d,n,l,
k,b,h,g){function e(a,b){if(null===B)throw Error("Async Arcade must be enabled for this script");return h("csp-restrictions")||!1===m?function(b){return B.executeScript(a,b)}:n.compileScript(a,b,!0)}function c(a,b){void 0===b&&(b=[]);return k.parseScript(a,b)}function f(a,b){if(!0===b.useAsync||!0===a.isAsync){if(null===B)throw Error("Async Arcade must be enabled for this script");return B.executeScript(a,b)}return l.executeScript(a,b)}function a(a,b){return l.referencesMember(a,b)}function p(a,c){void 0===
c&&(c=[]);void 0===a.usesGeometry&&b.findScriptDependencies(a,c);return!0===a.usesGeometry}function q(){return F?F:F=g.create(function(a,b){r(["../geometry/geometryEngine","./functions/geomsync"],function(b,c){z=!0;c.setGeometryEngine(b);a(!0)},function(a){b(a)})})}function v(){return null!==E?E:E=n.enableAsyncSupport().then(function(){return g.create(function(a,b){r(["./arcadeAsyncRuntime"],function(c){try{B=c;c=0;for(var e=C;c<e.length;c++){var f=e[c];B.extend(f);n.extend(f,"async")}C=null;a(!0)}catch(P){b(P)}},
b)})})}function t(){return B?!0:!1}function y(){return N?N:N=v().then(function(){return g.create(function(a,b){r(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(c,e,f,g,h){try{L=c,B.extend([e,f,g,h]),n.extend([e,f,g,h],"async"),u=!0,a(!0)}catch(T){b(T)}},b)})})}function x(a,c){void 0===c&&(c=[]);void 0===a.usesFeatureSet&&b.findScriptDependencies(a,c);return!0===a.usesFeatureSet}function w(b,c){if(c)for(var e=
0;e<c.length;e++)if(a(b,c[e]))return!0;return!1}Object.defineProperty(d,"__esModule",{value:!0});var m=function(){if(h("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(K){return!1}}(),u=!1,z=!1,B=null,C=[];d.compileScript=function(a,b){return!0===b.useAsync||!0===a.isAsync?e(a,b):h("csp-restrictions")?function(b){return l.executeScript(a,b)}:n.compileScript(a,b)};d.extend=function(a){l.extend(a);n.extend(a,"sync");null===B?C.push(a):(n.extend(a,"async"),
B.extend(a))};d.parseScript=c;d.validateScript=function(a,b,c){void 0===c&&(c="");return k.validateScript(a,b,c)};d.scriptCheck=function(a,b,c,e){void 0===e&&(e="");return k.scriptCheck(a,b,c,e)};d.parseAndExecuteScript=function(a,b,c){void 0===c&&(c=[]);a=k.parseScript(a,c);return f(a,b)};d.executeScript=f;d.referencesMember=a;d.referencesFunction=function(a,b){return l.referencesFunction(a,b)};d.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.extractFieldLiterals(a,b)};d.scriptUsesGeometryEngine=
p;var F=null;d.enableGeometrySupport=q;var E=null;d.enableAsyncSupport=v;d.isFeatureSetSupportEnabled=function(){return u};d.isAsyncEnabled=t;d.isGeometryEnabled=function(){return z};var N=null;d.enableFeatureSetSupport=y;d.scriptUsesFeatureSet=x;d.scriptIsAsync=function(a,c){void 0===c&&(c=[]);void 0===a.isAsync&&b.findScriptDependencies(a,c);return!0===a.isAsync};d.loadScriptDependencies=function(a,b,e,f){void 0===e&&(e=[]);void 0===f&&(f=!1);return g.create(function(h,d){var k="string"===typeof a?
c(a):a,l=[];k&&(!1===z&&(p(k)||f)&&l.push(q()),!1===t()&&(!0===k.isAsync||b)&&l.push(v()),!1===u&&(x(k)||w(k,e))&&l.push(y()));l?g.all(l).then(function(){h(!0)},d):h(!0)})};d.scriptTouchesGeometry=function(a){if(p(a))return!0;a=b.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var L=null;d.featureSetUtils=function(){return L}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){function C(a,b,c){try{return c(a,null,b)}catch(Ca){throw Ca;}}function F(a){return a instanceof Error?t.reject(a):t.reject(Error(a))}function E(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return I(a,b);case "VariableDeclaration":for(var c=[],f=0;f<b.declarations.length;f++)c.push(E(a,b.declarations[f]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return O(a,
b);case "FunctionDeclaration":var g=b.id.name.toLowerCase(),h={isAsync:a.isAsync,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<h.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
d=0;d<b.params.length;d++){var k=b.params[d].name.toLowerCase(),l=R(k,a);h.localScope._SymbolsMap[k]=l;h.mangleMap[k]=l;c+="lscope['"+l+"']\x3darguments["+d.toString()+"];\n"}!0===a.isAsync?(c=c+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(O(h,b.body)+"\n return lastStatement; "),c+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(c+=O(h,b.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[g]?
f="gscope['"+g+"']\x3d"+c:void 0!==a.globalScope._SymbolsMap[g]?f="gscope['"+a.globalScope._SymbolsMap[g]+"']\x3d"+c:(l=R(g,a),a.globalScope._SymbolsMap[g]=l,a.mangleMap[g]=l,f="gscope['"+l+"']\x3d"+c);return f;case "ReturnStatement":var p;p=null===b.argument?"return lc.voidOperation":"return "+E(a,b.argument)+"";return p;case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(e.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var u=E(a,b.test),m=U(a),q="var "+m+" \x3d "+u+";\n if ("+m+" \x3d\x3d\x3d true) {\n"+K(a,b.consequent)+"\n }\n",q=null!==b.alternate?q+("else if ("+m+"\x3d\x3d\x3dfalse)   { \n"+K(a,b.alternate)+"}\n"):q+("else if ("+m+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return q+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var z;z="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
E(a,b.expression)+"; \n ":"lastStatement \x3d "+E(a,b.expression)+"; ";return z;case "AssignmentExpression":return L(a,b);case "UpdateExpression":return N(a,b);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=E(a,b.init)+"; ");var B=U(a),t=U(a),c=c+("var "+B+" \x3d true; ")+"\n do { ";null!==b.update&&(c+=" if ("+B+"\x3d\x3d\x3dfalse) {\n "+E(a,b.update)+"  \n}\n "+B+"\x3dfalse; \n");null!==
b.test&&(c+="var "+t+" \x3d "+E(a,b.test)+"; ",c+="if ("+t+"\x3d\x3d\x3dfalse) { break; } else if ("+t+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=E(a,b.body);null!==b.update&&(c+="\n "+E(a,b.update));return c+("\n"+B+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var w=U(a),x=U(a),y=U(a),v="var "+w+" \x3d "+E(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(v+=E(a,b.left));var n=
"VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,n=n.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[n]?c="lscope['"+n+"']":void 0!==a.localScope._SymbolsMap[n]&&(c="lscope['"+a.localScope._SymbolsMap[n]+"']"));""===c&&(void 0!==a.globalScope[n]?c="gscope['"+n+"']":void 0!==a.globalScope._SymbolsMap[n]&&(c="gscope['"+a.globalScope._SymbolsMap[n]+"']"));v=v+("if ("+w+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
w+") || lc.isString("+w+")) {")+("var "+x+"\x3d"+w+".length; \n")+("for(var "+y+"\x3d0; "+y+"\x3c"+x+"; "+y+"++) {\n");v+=c+"\x3d"+y+";\n";v+=E(a,b.body);v+="\n}\n";v+=" lastStatement \x3d lc.voidOperation; \n";v+=" \n}\n";v+="else if (lc.isImmutableArray("+w+")) {";v=v+("var "+x+"\x3d"+w+".length(); \n")+("for(var "+y+"\x3d0; "+y+"\x3c"+x+"; "+y+"++) {\n");v+=c+"\x3d"+y+";\n";v+=E(a,b.body);v+="\n}\n";v+=" lastStatement \x3d lc.voidOperation; \n";v+=" \n}\n";v+="else if (( "+w+" instanceof lang.Dictionary) || ( "+
w+" instanceof lang.Feature)) {";v=v+("var "+x+"\x3d"+w+".keys(); \n")+("for(var "+y+"\x3d0; "+y+"\x3c"+x+".length; "+y+"++) {\n");v+=c+"\x3d"+x+"["+y+"];\n";v+=E(a,b.body);v+="\n}\n";v+=" lastStatement \x3d lc.voidOperation; \n";v+=" \n}\n";a.isAsync&&(v+="else if (lc.isFeatureSet("+w+")) {",v=v+("var "+x+"\x3d"+w+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+y+"\x3dlang. graphicToFeature( yield "+x+".next(),"+w+"); "+y+"!\x3dnull; "+y+"\x3dlang. graphicToFeature( yield "+x+".next(),"+w+")) {\n")+
(c+"\x3d"+y+";\n"),v+=E(a,b.body),v+="\n}\n",v+=" lastStatement \x3d lc.voidOperation; \n",v+=" \n}\n");return v+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return S(a,b);case "MemberExpression":var C;try{c=void 0,c=!0===b.computed?E(a,b.property):"'"+b.property.name+"'",C="lang.member("+E(a,b.object)+","+c+")"}catch(Ga){throw Ga;}return C;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(e.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var H=b.callee.name.toLowerCase(),f="";null!==a.localScope&&(void 0!==a.localScope[H]?f="lscope['"+H+"']":void 0!==a.localScope._SymbolsMap[H]&&(f="lscope['"+a.localScope._SymbolsMap[H]+"']"));""===f&&(void 0!==a.globalScope[H]?f="gscope['"+H+"']":void 0!==a.globalScope._SymbolsMap[H]&&(f="gscope['"+a.globalScope._SymbolsMap[H]+"']"));if(""!==f){g=
"[";for(h=0;h<b.arguments.length;h++)0<h&&(g+=", "),g+=E(a,b.arguments[h]);g+="]";c=a.isAsync?"(yield lang.callfunc("+f+","+g+",runtimeCtx) )":"lang.callfunc("+f+","+g+",runtimeCtx)"}else throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Ga){throw Ga;}return c;case "UnaryExpression":var F;try{F="lang.unary("+E(a,b.argument)+",'"+b.operator+"')"}catch(Ga){throw Ga;}return F;case "BinaryExpression":var X;try{X="lang.binary("+E(a,b.left)+","+E(a,b.right)+",'"+b.operator+"')"}catch(Ga){throw Ga;
}return X;case "LogicalExpression":var na;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(e.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(e.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)na="(lang.logicalCheck("+E(a,b.left)+") "+b.operator+" lang.logicalCheck("+E(a,b.right)+
"))";else throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}catch(Ga){throw Ga;}return na;case "ConditionalExpression":throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(f=0;f<b.elements.length;f++)"Literal"===b.elements[f].type?c.push(E(a,b.elements[f])):c.push("lang.aCheck("+E(a,b.elements[f])+",'ArrayExpression')");d="["+c.join(",")+"]"}catch(Ga){throw Ga;}return d;case "ObjectExpression":c="lang.dictionary([";for(f=0;f<b.properties.length;f++){var J=
b.properties[f],r="Identifier"===J.key.type?"'"+J.key.name+"'":E(a,J.key),pa=E(a,J.value);0<f&&(c+=",");c+="lang.strCheck("+r+",'ObjectExpression'),lang.aCheck("+pa+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(e.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ga){throw Ga;}}function N(a,b){var c=null,e="";if("MemberExpression"===b.argument.type)return c=E(a,
b.argument.object),e=!0===b.argument.computed?E(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+e+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+
c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function L(a,b){var c=E(a,b.right),e=null,f="";if("MemberExpression"===b.left.type)return e=E(a,b.left.object),f=!0===b.left.computed?E(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+e+","+f+",'"+b.operator+"',"+c+")";e=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==
a.localScope[e])return"lscope['"+e+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+e+"'])";if(void 0!==a.localScope._SymbolsMap[e])return"lscope['"+a.localScope._SymbolsMap[e]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[e]+"'])"}if(void 0!==a.globalScope[e])return"gscope['"+e+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+e+"'])";if(void 0!==a.globalScope._SymbolsMap[e])return"gscope['"+a.globalScope._SymbolsMap[e]+"']\x3dlang.assign("+c+",'"+b.operator+
"', gscope['"+a.globalScope._SymbolsMap[e]+"'])";throw Error("Variable not recognised");}function K(a,b){return"BlockStatement"===b.type?E(a,b):"ReturnStatement"===b.type||"BreakStatement"===b.type||"ContinueStatement"===b.type?E(a,b)+"; ":"UpdateExpression"===b.type?"lastStatement \x3d "+E(a,b)+"; ":"ExpressionStatement"===b.type?E(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+E(a,b)+"; ":E(a,b)+"; "}function O(a,b){for(var c="",e=0;e<b.body.length;e++)c="ReturnStatement"===b.body[e].type?
c+(E(a,b.body[e])+"; \n"):"BreakStatement"===b.body[e].type?c+(E(a,b.body[e])+"; \n"):"ContinueStatement"===b.body[e].type?c+(E(a,b.body[e])+"; \n"):"UpdateExpression"===b.body[e].type?c+("lastStatement \x3d "+E(a,b.body[e])+"; \n"):"ObjectExpression"===b.body[e].type?c+("lastStatement \x3d "+E(a,b.body[e])+"; \n"):c+(E(a,b.body[e])+" \n");return c}function I(a,b){var c=null===b.init?null:E(a,b.init);c===g.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+
b+"']\x3d"+c+"; ";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+"; ";var e=R(b,a);a.localScope._SymbolsMap[b]=e;a.mangleMap[b]=e;return"lscope['"+e+"']\x3d"+c+"; "}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+"; ";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+c+"; ";e=R(b,a);a.globalScope._SymbolsMap[b]=e;a.mangleMap[b]=e;return"gscope['"+e+"']\x3d"+c+"; "}function H(a,c,f){c=c.toLowerCase();
switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(f=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(f=!1),f&&(la++,c=a.spatialReference._arcadeCacheId=la)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(la++,c=la,a.cache._arcadeCacheId=c),a=new b(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(la++,c=la,a.cache._arcadeCacheId=
c),a=new b(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===c&&(la++,c=la,a.cache._arcadeCacheId=c),a=new h(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(f,"RUNTIME","PROPERTYNOTFOUND"));}function S(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+
c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(e.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Ca){throw Ca;}}function P(a){return null===a?"":g.isArray(a)||g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof
n?"Attachment":a instanceof l?"Dictionary":a instanceof k?"Feature":a instanceof m?"Point":a instanceof u?"Polygon":a instanceof z?"Polyline":a instanceof w?"Multipoint":a instanceof y?"Extent":g.isFunctionParameter(a)?"Function":g.isFeatureSet(a)?"FeatureSet":g.isFeatureSetCollection(a)?"FeatureSetCollection":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function V(a,b,c,e){try{if(g.equalityTest(b[c],e))return b[c+1];var f=b.length-c;return 1===f?b[c]:2===f?null:
3===f?b[c+2]:V(a,b,c+2,e)}catch(ra){throw ra;}}function T(a,b,c,e){try{if(!0===e)return b[c+1];if(3===b.length-c)return b[c+2];var f=b[c+2];if(!1===g.isBoolean(f))throw Error("WHEN needs boolean test conditions");return T(a,b,c+2,f)}catch(ra){throw ra;}}function Z(a,b){var c=a.length,e=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var f=Z(a.slice(0,e),b);a=Z(a.slice(e,c),b);for(c=[];0<f.length||0<a.length;)0<f.length&&0<a.length?(e=b(f[0],a[0]),isNaN(e)&&(e=0),0>=e?(c.push(f[0]),f=f.slice(1)):
(c.push(a[0]),a=a.slice(1))):0<f.length?(c.push(f[0]),f=f.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function Q(a,b){try{var c=a.length,e=Math.floor(c/2);if(0===c)return t.resolve([]);if(1===c)return t.resolve([a[0]]);var f=[Q(a.slice(0,e),b),Q(a.slice(e,c),b)];return t.all(f).then(function(a){return J(a[0],a[1],b,[])})}catch(ra){return t.reject(ra)}}function J(a,b,c,e){return t.create(function(f,g){0<a.length||0<b.length?0<a.length&&0<b.length?c(a[0],b[0]).then(function(h){try{isNaN(h)&&
(h=1),0>=h?(e.push(a[0]),a=a.slice(1)):(e.push(b[0]),b=b.slice(1)),J(a,b,c,e).then(function(a){f(a)},g)}catch(xa){g(xa)}},g):0<a.length?(e.push(a[0]),a=a.slice(1),J(a,b,c,e).then(function(a){f(a)},g)):0<b.length&&(e.push(b[0]),b=b.slice(1),J(a,b,c,e).then(function(a){f(a)},g)):f(e)})}function R(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function U(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function X(a,b,c){var e={};a||(a={});c||
(c={});e._SymbolsMap={};e.textformatting=1;e.infinity=1;e.pi=1;for(var f in b)e[f]=1;for(f in c)e[f]=1;for(f in a)e[f]=1;return e}function ca(a,b){for(var c={mode:b,compiled:!0,functions:{},signatures:[],failDefferred:F,standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:G},f=0;f<a.length;f++)a[f].registerFunctions(c);if("sync"===b){for(var h in c.functions)ja[h]=new g.NativeFunction(c.functions[h]),ta.prototype[h]=ja[h];for(f=0;f<c.signatures.length;f++)e.addFunctionDeclaration(c.signatures[f],
"sync")}else{for(h in c.functions)na[h]=new g.NativeFunction(c.functions[h]),aa.prototype[h]=na[h];for(f=0;f<c.signatures.length;f++)e.addFunctionDeclaration(c.signatures[f],"async")}}function G(a,b){b=b.name;if("_SymbolsMap"===b)throw"Illegal";if(0<a.localStack.length){if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];var c=a.mangleMap[b];if(void 0!==c&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-
1][c]}if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function Y(a){console.log(a)}Object.defineProperty(d,"__esModule",{value:!0});var la=0,ja={};c.registerFunctions(ja,C);v.registerFunctions(ja,C);p.registerFunctions(ja,C);f.registerFunctions(ja,C);q.registerFunctions(ja,C);ja["typeof"]=function(a,b){return C(a,b,function(a,b,c){g.pcCheck(c,1,1);a=P(c[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};ja.iif=function(a,b){try{return C(a,b,function(a,b,c){g.pcCheck(c,3,3);if(!1===g.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(Ba){throw Ba;}};ja.decode=function(a,b){try{return C(a,b,function(b,c,e){if(2>e.length)throw Error("Missing Parameters");if(2===e.length)return e[1];if(0===(e.length-1)%2)throw Error("Must have a default value result.");return V(a,e,1,e[0])})}catch(Ba){throw Ba;}};
ja.when=function(a,b){try{return C(a,b,function(b,c,e){if(3>e.length)throw Error("Missing Parameters");if(0===e.length%2)throw Error("Must have a default value result.");b=e[0];if(!1===g.isBoolean(b))throw Error("WHEN needs boolean test conditions");return T(a,e,0,b)})}catch(Ba){throw Ba;}};ja.top=function(a,b){return C(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};ja.first=function(a,b){return C(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};ja.sort=function(a,b){return C(a,b,function(b,c,e){g.pcCheck(e,1,2);c=e[0];g.isImmutableArray(c)&&(c=c.toArray());if(!1===g.isArray(c))throw Error("Illegal Argument");if(1<e.length){if(!1===g.isFunctionParameter(e[1]))throw Error("Illegal Argument");
var f=function(a,c){return ia.callfunc(e[1],[a,c],b)};return a.isAsync?Q(c,f):c=Z(c,function(a,b){return f(a,b)})}if(0===c.length)return[];for(var h={},d=0;d<c.length;d++){var k=P(c[d]);""!==k&&(h[k]=!0)}if(!0===h.Array||!0===h.Dictionary||!0===h.Feature||!0===h.Point||!0===h.Polygon||!0===h.Polyline||!0===h.Multipoint||!0===h.Extent||!0===h.Function)return c.slice(0);var d=0,k="",l;for(l in h)d++,k=l;return c=1<d||"String"===k?Z(c,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===
b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===k?Z(c,function(a,b){return a-b}):"Boolean"===k?Z(c,function(a,b){return a===b?0:b?-1:1}):"Date"===k?Z(c,function(a,b){return b-a}):c.slice(0)})};var na={},pa;for(pa in ja)na[pa]=new g.NativeFunction(ja[pa]);a.registerFunctions(ja,C);for(pa in ja)ja[pa]=new g.NativeFunction(ja[pa]);var ta=function(){};ta.prototype=ja;var aa=function(){};aa.prototype=
na;d.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(a,b){for(var c=[],e=0;e<b.arguments.length;e++)c.push(E(a,b.arguments[e]));return c},standardFunction:C};d.extend=ca;d.executeScript=function(a,b){return a(b)};d.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return e.findFieldLiterals(a,b)};d.validateScript=function(a,b){return e.validateScript(a,b,"sync")};d.referencesMember=function(a,b){return e.referencesMember(a,b)};d.referencesFunction=function(a,
b){return e.referencesFunction(a,b)};var ga=0,ia={error:function(a,b,c){throw Error(e.nodeErrorMessage(a,b,c));},__awaiter:function(a,b,c,e){return t.create(function(c,f){function g(a){try{d(e.next(a))}catch(Ka){f(Ka)}}function h(a){try{d(e["throw"](a))}catch(Ka){f(Ka)}}function d(a){a.done?c(a.value):a.value&&a.value.then?a.value.then(g,h):(ga++,0===ga%100?setTimeout(function(){ga=0;g(a.value)},0):g(a.value))}d((e=e.apply(a,b||[])).next())})},functionDepthchecker:function(a,b){return function(){b.depthCounter++;
b.localStack.push([]);if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);if(t.isThenable(c))return c.then(function(a){b.depthCounter--;--b.localStack.length;return a});b.depthCounter--;--b.localStack.length;return c}},aCheck:function(a,b){if(g.isFunctionParameter(a))throw Error(e.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===g.voidOperation?null:a},Dictionary:l,Feature:k,dictionary:function(a){for(var b={},c=0;c<a.length;c+=
2){if(g.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===g.isString(a[c]))throw Error("Illegal Argument");b[a[c].toString()]=a[c+1]===g.voidOperation?null:a[c+1]}a=new l(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===g.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(g.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,
argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===g.isBoolean(a))throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,b,c){if(g.isBoolean(a)&&g.isBoolean(b))switch(c){case "||":return a||
b;case "\x26\x26":return a&&b}throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return g.equalityTest(a,b);case "\x3d":return g.equalityTest(a,b);case "!\x3d":return!g.equalityTest(a,b);case "\x3c":return g.greaterThanLessThan(a,b,c);case "\x3e":return g.greaterThanLessThan(a,b,c);case "\x3c\x3d":return g.greaterThanLessThan(a,b,c);case "\x3e\x3d":return g.greaterThanLessThan(a,
b,c);case "+":return g.isString(a)||g.isString(b)?g.toString(a)+g.toString(b):g.toNumber(a)+g.toNumber(b);case "-":return g.toNumber(a)-g.toNumber(b);case "*":return g.toNumber(a)*g.toNumber(b);case "/":return g.toNumber(a)/g.toNumber(b);case "%":return g.toNumber(a)%g.toNumber(b);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression",operator:c,left:a,right:b},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/
g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(e.nodeErrorMessage({type:"AssignmentExpression",operator:b,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,e){var f=g.toNumber(a[b]);a[b]="++"===c?f+1:f-1;return!1===e?f:"++"===c?f+1:
f-1},graphicToFeature:function(a,b){return null===a?null:k.createFromGraphicLikeObject(a.geometry,a.attributes,b)},memberupdate:function(a,b,c,e){var f;if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");f=g.toNumber(a[b]);a[b]="++"===c?f+1:f-1}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))f=g.toNumber(a.field(b)),a.setField(b,
"++"===c?f+1:f-1);else throw Error("Invalid Parameter");}else if(a instanceof k){if(!1===g.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))f=g.toNumber(a.field(b)),a.setField(b,"++"===c?f+1:f-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===e?f:"++"===c?f+1:f-1},assignmember:function(a,b,c,e){if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");
if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");a[b]=this.assign(e,c,a[b])}else throw Error("Invalid Parameter");else if(a instanceof l){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(e,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(e,c,null))}}else if(a instanceof k){if(!1===g.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,
this.assign(e,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(e,c,null))}}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof l||a instanceof k){if(g.isString(b))return a.field(b);throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof x){if(g.isString(b))return H(a,b,"MemberExpression");throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isArray(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(e.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isString(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(a)&&g.isNumber(b)&&isFinite(b)&&Math.floor(b)===
b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof g.NativeFunction?a.fn(c,b):a instanceof g.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};d.compileScript=function(a,b,c){void 0===b&&(b=null);
void 0===c&&(c=!1);null===b&&(b={vars:{},customfunctions:{}});b={isAsync:c,globalScope:X(b.vars,c?na:ja,b.customfunctions),localScope:null,mangleMap:{},console:Y,lrucache:b.lrucache,services:b.services,symbols:{symbolCounter:0}};a=E(b,a.body[0].body);""===a&&(a="lc.voidOperation; ");b={lc:g,lang:ia,mangles:b.mangleMap,postProcess:function(a){a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");
if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(g.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){var c=a.spatialReference;if(null===c||void 0===c)c=new B({wkid:102100});var e=a.vars,f=a.customfunctions,g=b?new aa:new ta;e||(e={});f||(f={});var h=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=h;g.infinity=
Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var d in f)g[d]=f[d],g._SymbolsMap[d]=1;for(d in e)g._SymbolsMap[d]=1,g[d]=e[d]&&"esri.Graphic"===e[d].declaredClass?k.createFromGraphic(e[d]):e[d];return{localStack:[],isAsync:b,mangleMap:this.mangles,spatialReference:c,globalScope:g,abortSignal:void 0===a.abortSignal||null===a.abortSignal?{aborted:!1}:a.abortSignal,localScope:null,services:a.services,console:a.console?a.console:Y,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context",
"spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(b)};d.enableAsyncSupport=function(){return t.create(function(a,b){r(["./functions/geomasync"],function(b){ca([b],"async");a(!0)},function(a){b(a)})})}})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(r,d,n,l){return function(d){function b(b,g,e,c,f){var a=d.call(this)||this;a.attachmentUrl=f;a.immutable=!1;a.setField("id",b);a.setField("name",
g);a.setField("contenttype",e);a.setField("size",c);a.immutable=!0;return a}n(b,d);return b}(l)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(r,d,n,l,k){return function(){function b(h){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=h instanceof b?h.attributes:void 0===h?{}:null===h?{}:h}b.prototype.field=function(b){var g=b.toLowerCase();b=this.attributes[b];
if(void 0!==b)return b;for(var e in this.attributes)if(e.toLowerCase()===g)return this.attributes[e];throw Error("Field not Found");};b.prototype.setField=function(b,g){if(this.immutable)throw Error("Dictionary is Immutable");var e=b.toLowerCase();if(void 0===this.attributes[b])for(var c in this.attributes)if(c.toLowerCase()===e){this.attributes[c]=g;return}this.attributes[b]=g};b.prototype.hasField=function(b){var g=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var e in this.attributes)if(e.toLowerCase()===
g)return!0;return!1};b.prototype.keys=function(){var b=[],g;for(g in this.attributes)b.push(g);return b=b.sort()};b.prototype.castToText=function(){var b="",g;for(g in this.attributes){""!==b&&(b+=",");var e=this.attributes[g];null==e?b+=JSON.stringify(g)+":null":l.isBoolean(e)||l.isNumber(e)||l.isString(e)?b+=JSON.stringify(g)+":"+JSON.stringify(e):e instanceof k?b+=JSON.stringify(g)+":"+l.toStringExplicit(e):e instanceof n?b+=JSON.stringify(g)+":"+l.toStringExplicit(e):e instanceof Array?b+=JSON.stringify(g)+
":"+l.toStringExplicit(e):e instanceof Date?b+=JSON.stringify(g)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(b+=JSON.stringify(g)+":"+e.castToText())}return"{"+b+"}"};return b}()})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),function(r,d,n,
l,k,b,h,g,e,c,f){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=f.isSome(b.geometry)?b.geometry:null;c.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=
!1):b.layer&&(c._layer=b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;c._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(c._layer=b._layer);return c};a.createFromOptimisedFeature=function(b,c,e){var f=new a;f._geometry=b.geometry?{geometry:b.geometry}:null;f._optimizedGeomDefinition=e;f.attributes=b.attributes||{};f._layer=c;f._datesfixed=!1;return f};a.createFromArcadeDictionary=
function(b){var c=new a;c.attributes=b.field("attributes");null!==c.attributes?c.attributes instanceof l?(c.attributes=c.attributes.attributes,null===c.attributes&&(c.attributes={})):c.attributes={}:c.attributes={};c._geometry=b.field("geometry");null!==c._geometry&&(c._geometry instanceof l?c._geometry=a.parseGeometryFromDictionary(c._geometry):c._geometry instanceof h||(c._geometry=null));return c};a.createFromGraphicLikeObject=function(b,c,e){void 0===e&&(e=null);var g=new a;null===c&&(c={});g.attributes=
c;g._geometry=f.isSome(b)?b:null;g._layer=e;g._layer&&(g._datesfixed=!1);return g};a.prototype.repurposeFromGraphicLikeObject=function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a?a:null;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var e=this.attributes[c];null==e?a+=JSON.stringify(c)+":null":b.isBoolean(e)||b.isNumber(e)||b.isString(e)?a+=JSON.stringify(c)+":"+JSON.stringify(e):e instanceof
h?a+=JSON.stringify(c)+":"+b.toStringExplicit(e):e instanceof k?a+=JSON.stringify(c)+":"+b.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(c)+":"+b.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(c)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":b.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){if(null!==this._datefields)0<
this._datefields.length&&this._fixDateFields(this._datefields);else{for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}this._datefields=a;0<a.length&&this._fixDateFields(a)}this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=n({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var e in this.attributes){if(e.toLowerCase()===a[b].toLowerCase()){c=
this.attributes[e];null===c||c instanceof Date||(this.attributes[e]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};a.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof h)return this._geometry;this._optimizedGeomDefinition?(this._geometry=f.unwrap(e.fromJSON(c.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=
this._optimizedGeomDefinition.spatialReference):this._geometry=f.unwrap(e.fromJSON(this._geometry));return this._geometry};a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=this.attributes[a];if(void 0!==b)return b;a=a.toLowerCase();for(var c in this.attributes)if(c.toLowerCase()===a)return this.attributes[c];if(this._hasFieldDefinition(a))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<
this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,c){if(this.immutable)throw Error("Feature is Immutable");if(!1===b.isSimpleType(c))throw Error("Illegal Value Assignment to Feature");var e=a.toLowerCase();
if(void 0===this.attributes[a])for(var f in this.attributes)if(f.toLowerCase()===e){this.attributes[f]=c;return}this.attributes[a]=c};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var e=
this._layer.fields[c];1!==b[e.name.toLowerCase()]&&a.push(e.name)}return a=a.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return e.fromJSON(b)};
a.fixPathArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var f=0;f<a.length;f++)e.push(this.fixPointArrays(a[f],b,c));else if(a instanceof k)for(f=0;f<a.length();f++)e.push(this.fixPointArrays(a.get(f),b,c));return e};a.fixPointArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var f=0;f<a.length;f++){var h=a[f];h instanceof g?b&&c?e.push([h.x,h.y,h.z,h.m]):b?e.push([h.x,h.y,h.z]):c?e.push([h.x,h.y,h.m]):e.push([h.x,h.y]):h instanceof k?e.push(h.toArray()):e.push(h)}else if(a instanceof
k)for(f=0;f<a.length();f++)h=a.get(f),h instanceof g?b&&c?e.push([h.x,h.y,h.z,h.m]):b?e.push([h.x,h.y,h.z]):c?e.push([h.x,h.y,h.m]):e.push([h.x,h.y]):h instanceof k?e.push(h.toArray()):e.push(h);return e};a.convertDictionaryToJson=function(b,c){void 0===c&&(c=!1);var e={},f;for(f in b.attributes){var g=b.attributes[f];g instanceof l&&(g=a.convertDictionaryToJson(g));c?e[f.toLowerCase()]=g:e[f]=g}return e};a.parseAttributesFromDictionary=function(a){var c={},e;for(e in a.attributes){var f=a.attributes[e];
if(b.isSimpleType(f))c[e]=f;else throw Error("Illegal Argument");}return c};a.fromJson=function(c){var f=null;null!==c.geometry&&void 0!==c.geometry&&(f=e.fromJSON(c.geometry));var g={};if(null!==c.attributes&&void 0!==c.attributes)for(var h in c.attributes){var d=c.attributes[h];if(null===d)g[h]=d;else if(b.isString(d)||b.isNumber(d)||b.isBoolean(d)||b.isDate(d))g[h]=d;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(f,g,null)};a.prototype.domainValueLookup=function(a,c,
e){if(null===this._layer||!this._layer.fields)return null;e=b.getDomain(a,this._layer,this,e);if(void 0===c)try{c=this.field(a)}catch(t){return null}return b.getDomainValue(e,c)};a.prototype.domainCodeLookup=function(a,c,e){if(null===this._layer||!this._layer.fields)return null;if(void 0===c){try{c=this.field(a)}catch(t){return null}return c}a=b.getDomain(a,this._layer,this,e);return b.getDomainCode(a,c)};return a}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(r,d,n,l,k,b,h,g){function e(a,b){return a?b?4:3:b?3:2}function c(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function f(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function a(a,b){return b*a.scale[0]+a.translate[0]}function p(a,b){return a.translate[1]-b*a.scale[1]}function q(a){a=a.coords;return{x:a[0],y:a[1]}}function v(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function t(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function y(a,b){a.coords[0]=b.x;a.coords[1]=b.y;
a.coords[2]=b.z;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function w(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function m(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function u(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function z(a,b){return a&&b?u:a?y:b?w:v}function B(a,b,c){if(!a)return null;for(var f=e(b,c),g=[],h=0;h<a.coords.length;h+=f){for(var d=[],k=0;k<f;k++)d.push(a.coords[h+k]);g.push(d)}return b?c?{points:g,
hasZ:b,hasM:c}:{points:g,hasZ:b}:c?{points:g,hasM:c}:{points:g}}function C(a,b,c){void 0===c&&(c=e(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var f=a.coords,g=0,h=0;for(b=b.points;h<b.length;h++)for(var d=b[h],k=0;k<c;k++)f[g++]=d[k];return a}function F(a,b,c){if(!a)return null;var f=e(b,c),g=a.coords,h=[],d=0,k=0;for(a=a.lengths;k<a.length;k++){for(var l=a[k],p=[],u=0;u<l;u++){for(var m=[],q=0;q<f;q++)m.push(g[d++]);p.push(m)}h.push(p)}return b?c?{paths:h,hasZ:b,hasM:c}:{paths:h,hasZ:b}:c?{paths:h,
hasM:c}:{paths:h}}function E(a,b,c){void 0===c&&(c=e(b.hasZ,b.hasM));var f=a.lengths,g=a.coords,h=0,d=0;for(b=b.paths;d<b.length;d++){for(var k=b[d],l=0,p=k;l<p.length;l++)for(var u=p[l],m=0;m<c;m++)g[h++]=u[m];f.push(k.length)}return a}function N(a,b,c){if(!a)return null;var f=e(b,c),g=a.coords,h=[],d=0,k=0;for(a=a.lengths;k<a.length;k++){for(var l=a[k],p=[],u=0;u<l;u++){for(var m=[],q=0;q<f;q++)m.push(g[d++]);p.push(m)}h.push(p)}return b?c?{rings:h,hasZ:b,hasM:c}:{rings:h,hasZ:b}:c?{rings:h,hasM:c}:
{rings:h}}function L(a,b,c,f){void 0===c&&(c=b.hasZ);void 0===f&&(f=b.hasM);c=e(c,f);f=a.lengths;var g=a.coords,h=0,d=f.length=g.length=0;for(b=b.rings;d<b.length;d++){for(var k=b[d],l=0,p=k;l<p.length;l++)for(var u=p[l],m=0;m<c;m++)g[h++]=u[m];f.push(k.length)}return a}function K(a,c,f,h,d,k){a.length=0;if(!f){for(h=0;h<c.length;h++)d=c[h],a.push(new b.default(null,d.attributes,null,d.attributes[k]));return a}switch(f){case "esriGeometryPoint":h=z(h,d);for(d=0;d<c.length;d++){var l=c[d];f=l.geometry;
var l=l.attributes,p=void 0;f&&(p=h(new g.default,f));a.push(new b.default(p,l,null,l[k]))}break;case "esriGeometryMultipoint":h=e(h,d);for(d=0;d<c.length;d++)l=c[d],f=l.geometry,l=l.attributes,p=void 0,f&&(p=C(new g.default,f,h)),a.push(new b.default(p,l,null,l[k]));break;case "esriGeometryPolyline":h=e(h,d);for(d=0;d<c.length;d++)l=c[d],f=l.geometry,l=l.attributes,p=void 0,f&&(p=E(new g.default,f,h)),a.push(new b.default(p,l,null,l[k]));break;case "esriGeometryPolygon":for(f=0;f<c.length;f++){var u=
c[f],l=u.geometry,p=u.centroid,u=u.attributes,m=void 0;l&&(m=L(new g.default,l,h,d));p?a.push(new b.default(m,u,v(new g.default,p),u[k])):a.push(new b.default(m,u,null,u[k]))}break;default:P.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+f+"'")),a.length=0}return a}function O(a,b,c,e,f){a.length=0;switch(c){case "esriGeometryPoint":c=q;e&&f?c=m:e?c=t:f&&(c=x);for(e=0;e<b.length;e++){var g=b[e];f=g.geometry;g=g.attributes;f=f?c(f):null;a.push({attributes:g,
geometry:f})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,h=h.attributes,d=void 0;g&&(d=B(g,e,f));a.push({attributes:h,geometry:d})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)h=b[c],g=h.geometry,h=h.attributes,d=void 0,g&&(d=F(g,e,f)),a.push({attributes:h,geometry:d});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var d=b[c],h=d.geometry,g=d.attributes,k=d.centroid,d=void 0;h&&(d=N(h,e,f));k?(h=q(k),a.push({attributes:g,centroid:h,geometry:d})):
a.push({attributes:g,geometry:d})}break;default:P.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+c+"'"))}return a}function I(a,b,g,h,d,k){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;d=V[d];var l=b.coords;b=b.lengths;var p=e(g,h);g=g?h?Q:Z:h?Z:T;if(!b.length)return g(a.coords,l,0,0,c(k,l[0]),f(k,l[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=p,a;for(var u,m,q,z=0,B,t=0,w=
0;w<b.length;w++){var x=b[w];if(!(x<d)){var y=0;B=t;m=h=c(k,l[z]);q=u=f(k,l[z+1]);g(a.coords,l,B,z,m,q);y++;z+=p;B+=p;for(var v=1;v<x;v++,z+=p)if(m=c(k,l[z]),q=f(k,l[z+1]),m!==h||q!==u)g(a.coords,l,B,z,m-h,q-u),B+=p,y++,h=m,u=q;y>=d&&(a.lengths.push(y),t=B)}}a.coords.length=t;return a.coords.length?a:null}function H(a,b,c,e,f,g,h){for(var d=h-c,k=0,l=0,p,u=g+c;u<h-c;u+=c){p=b[u];var m=b[u+1],q=b[g],z=b[g+1],B=b[d],t=b[d+1];q===B?p=Math.abs(p-q):(B=(t-z)/(B-q),p=Math.abs(B*p-m+(z-B*q))/Math.sqrt(B*
B+1));p>k&&(l=u,k=p)}k>e?(H(a,b,c,e,f,g,l+c),H(a,b,c,e,f,l,h)):(f(a,b,a.length,g,b[g],b[g+1]),f(a,b,a.length,d,b[d],b[d+1]))}function S(b,c,f,g,h){var d=c.coords,k=c.lengths,l=f?g?Q:Z:g?Z:T;f=e(f,g);if(!d.length)return b!==c&&(b.lengths.length=0,b.coords.length=0),b;if(!k.length)return l(b.coords,d,0,0,a(h,d[0]),p(h,d[1])),b!==c&&(b.lengths.length=0,b.coords.length=f),b;var u=h.scale;g=u[0];for(var u=u[1],m=0,q=0;q<k.length;q++){var z=k[q];b.lengths[q]=z;var B=a(h,d[m]),t=p(h,d[m+1]);l(b.coords,d,
m,m,B,t);for(var m=m+f,w=1;w<z;w++,m+=f)B+=d[m]*g,t-=d[m+1]*u,l(b.coords,d,m,m,B,t)}b!==c&&(b.lengths.length=k.length,b.coords.length=d.length);return b}Object.defineProperty(d,"__esModule",{value:!0});var P=l.getLogger("esri.tasks.support.optimizedFeatureSet"),V={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},T=function(a,b,c,e,f,g){a[c]=f;a[c+1]=g},Z=function(a,b,c,e,f,g){a[c]=f;a[c+1]=g;a[c+2]=b[e+2]},Q=function(a,b,c,e,f,g){a[c]=f;a[c+1]=g;a[c+2]=b[e+
2];a[c+3]=b[e+3]};d.quantizeX=c;d.quantizeY=f;d.hydrateX=a;d.hydrateY=p;d.convertToPoint=function(a,b,c){return a?b?c?m(a):t(a):c?x(a):q(a):null};d.convertFromPoint=function(a,b,c){void 0===c&&(c=z(null!=b.z,null!=b.m));return c(a,b)};d.convertToMultipoint=B;d.convertFromMultipoint=C;d.convertToPolyline=F;d.convertToPolygon=N;d.convertFromPolygon=L;var J=[],R=[];d.convertFromFeature=function(a,b,c,e,f){J[0]=a;a=K(R,J,b,c,e,f)[0];J.length=R.length=0;return a};d.convertFromFeatures=K;d.convertToFeature=
function(a,b,c,e){R[0]=a;O(J,R,b,c,e);a=J[0];J.length=R.length=0;return a};d.convertFromGeometry=function(a,b,c){if(!a)return null;var f=new g.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(k.isPoint(a))return z(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(f,a);if(k.isPolygon(a))return L(f,a,b,c);if(k.isPolyline(a))return E(f,a,e(b,c));if(k.isMultipoint(a))return C(f,a,e(b,c));P.error("convertFromGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+a+
"'"))};d.convertToGeometry=function(a,b,c,e){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=q,c&&e?b=m:c?b=t:e&&(b=x),b(a);case "esriGeometryMultipoint":return B(a,c,e);case "esriGeometryPolyline":return F(a,c,e);case "esriGeometryPolygon":return N(a,c,e);default:P.error("convertToGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+b+"'"))}};d.convertToFeatures=O;d.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,
e=a.transform,f=a.fields,g=a.hasM,h=a.hasZ,d=a.geometryType,k=a.exceededTransferLimit;a={features:O([],a.features,d,h,g),fields:f,geometryType:d,objectIdFieldName:b,spatialReference:c};e&&(a.transform=e);k&&(a.exceededTransferLimit=k);g&&(a.hasM=g);h&&(a.hasZ=h);return a};d.convertFromFeatureSet=function(a,b){var c=new h.default,e=a.hasM,f=a.hasZ,g=a.features,d=a.objectIdFieldName,k=a.spatialReference,l=a.geometryType,p=a.exceededTransferLimit,u=a.transform;c.fields=a.fields;c.geometryType=l;c.objectIdFieldName=
d||b;c.spatialReference=k;if(!c.objectIdFieldName)return P.error(new n("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&K(c.features,g,l,f,e,c.objectIdFieldName);p&&(c.exceededTransferLimit=p);e&&(c.hasM=e);f&&(c.hasZ=f);u&&(c.transform=u);return c};d.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,e=a.hasZ;if(!b)return a;for(var f=0,g=a.features;f<g.length;f++){var h=g[f];h.geometry&&S(h.geometry,h.geometry,c,e,b);h.centroid&&S(h.centroid,h.centroid,
c,e,b)}a.transform=null;return a};d.quantizeOptimizedFeatureSet=function(a,c){var e=c.geometryType,f=c.features,h=c.hasM,d=c.hasZ;if(!a)return c;for(var k=0;k<f.length;k++){var l=f[k],p=new b.default(new g.default,l.attributes);I(p.geometry,l.geometry,h,d,e,a);l.centroid&&(p.centroid=new g.default,I(p.centroid,l.centroid,h,d,"esriGeometryPoint",a));f[k]=p}c.transform=a;return c};d.quantizeOptimizedGeometry=I;d.quantizeOptimizedGeometryRemoveCollinear=function(a,b,g,h,d,k){a.lengths.length&&(a.lengths.length=
0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;d=V[d];var l=b.coords;b=b.lengths;var p=e(g,h);g=g?h?Q:Z:h?Z:T;if(!b.length)return g(a.coords,l,0,0,c(k,l[0]),f(k,l[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=p,a;for(var u,m,q,z=0,B,t=0,w=0;w<b.length;w++){var x=b[w];if(!(x<d)){var y=0;B=t;h=u=c(k,l[z]);q=m=f(k,l[z+1]);g(a.coords,l,B,z,h,q);y++;for(var z=z+p,v=!1,n=0,C=0,H=1;H<x;H++,z+=p)if(h=c(k,l[z]),q=f(k,l[z+1]),h!==u||q!==m)u=h-u,m=q-m,v&&(0===n&&0===
u||0===C&&0===m)?(n+=u,C+=m):(v=!0,n=u,C=m,B+=p,y++),g(a.coords,l,B,z,n,C),u=h,m=q;v&&(B+=p,g(a.coords,l,B,z,n,C));y>=d&&(a.lengths.push(y),t=B)}}a.coords.length!==t&&(a.coords.length=t);return a.coords.length?a:null};d.generalizeOptimizedGeometry=function(a,b,c,f,g,h){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;g=V[g];var d=b.coords;b=b.lengths;var k=e(c,f);c=c?f?Q:Z:f?Z:T;if(!b.length)return c(a.coords,d,0,0,d[0],d[1]),a.lengths.length&&
(a.lengths.length=0),a.coords.length=k,a;for(var l=f=0;l<b.length;l++){var p=b[l];if(!(p<g)){var u=a.coords.length/k;H(a.coords,d,k,h,c,f,f+p*k);var m=a.coords.length/k-u;m>=g?a.lengths.push(m):a.coords.length=u*k}f+=p*k}return a.coords.length?a:null};d.getBoundsOptimizedGeometry=function(a,b,c,f){c=e(c,f);var g=f=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var k=0;k<b.length;k+=c){var l=b[k],p=b[k+1];f=Math.min(f,l);h=Math.max(h,l);
g=Math.min(g,p);d=Math.max(d,p)}}a[0]=f;a[1]=g;a[2]=h;a[3]=d;return a};d.getQuantizedBoundsOptimizedGeometry=function(a,b,c,f){c=e(c,f);f=b.coords;var g=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY,l=0,p=0;for(b=b.lengths;p<b.length;p++)for(var u=b[p],m=f[l],q=f[l+1],g=Math.min(m,g),h=Math.min(q,h),d=Math.max(m,d),k=Math.max(q,k),l=l+c,z=1;z<u;z++,l+=c){var B=f[l],t=f[l+1],m=m+B,q=q+t;0>B&&(g=Math.min(g,m));0<B&&(d=Math.max(d,m));0>t?h=
Math.min(h,q):0<t&&(k=Math.max(k,q))}a[0]=g;a[1]=h;a[2]=d;a[3]=k;return a};d.hydrateOptimizedGeometry=S})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(r,d){function n(a,b,c,e){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function l(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var e=c.localScope[a.toLowerCase()];if("FormulaFunction"===e.type||"any"===e.type)return void 0===e.signature&&(e.signature={min:"0",
max:"*"}),n(e.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(e=c.globalScope[a.toLowerCase()],"FormulaFunction"===e.type||"any"===e.type)?(void 0===e.signature&&(e.signature={min:"0",max:"*"}),n(e.signature,a,b,c)):-1}function k(a,c){if(a)for(var e=0;e<a.length;e++)b(a[e],c)}function b(a,c){if(a&&!1!==c(a))switch(a.type){case "ArrayExpression":k(a.elements,c);break;case "AssignmentExpression":case "BinaryExpression":b(a.left,c);b(a.right,c);break;case "BlockStatement":k(a.body,
c);break;case "CallExpression":b(a.callee,c);k(a.arguments,c);break;case "ConditionalExpression":b(a.test,c);b(a.alternate,c);b(a.consequent,c);break;case "DoWhileStatement":b(a.test,c);b(a.body,c);break;case "ExpressionStatement":b(a.expression,c);break;case "ForInStatement":b(a.left,c);b(a.right,c);b(a.body,c);break;case "ForStatement":b(a.init,c);b(a.test,c);b(a.update,c);b(a.body,c);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":b(a.id,c);k(a.params,c);b(a.body,
c);break;case "IfStatement":b(a.test,c);b(a.consequent,c);b(a.alternate,c);break;case "LogicalExpression":b(a.left,c);b(a.right,c);break;case "MemberExpression":b(a.object,c);b(a.property,c);break;case "NewExpression":b(a.callee,c);k(a.arguments,c);break;case "ObjectExpression":k(a.properties,c);break;case "Program":k(a.body,c);break;case "Property":b(a.key,c);b(a.value,c);break;case "ReturnStatement":b(a.argument,c);break;case "UnaryExpression":b(a.argument,c);break;case "UpdateExpression":b(a.argument,
c);break;case "VariableDeclaration":k(a.declarations,c);break;case "VariableDeclarator":b(a.id,c),b(a.init,c)}}function h(a,b){void 0===b&&(b=!0);var c=p(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?p(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?h(a.init,!1):"";case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(c=h(a.declarations[e],
b),""!==c)return c;return"";case "ForInStatement":c=h(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,"SYNTAX","LEFTNOTVAR");c=h(a.right,b);if(""!==c)break;c=h(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=h(a.test,b),""!==c))break;if(null!==a.init&&(c=h(a.init,b),
""!==c))break;if(null!==a.update&&(c=h(a.update,b),""!==c))break;if(null!==a.body&&(c=h(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=h(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=h(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=h(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],e=0;e<a.body.length;e++)"EmptyStatement"!==a.body[e].type&&f.push(a.body[e]);
a.body=f;for(e=0;e<a.body.length;e++)if(c=h(a.body[e],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?p(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?p(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):h(a.body,!1);case "ReturnStatement":return null!==a.argument?h(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?p(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):h(a.argument,b);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=h(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return h(a.right,!1);case "ExpressionStatement":return h(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=h(a.object,b);if(""!==c)break;return!0===a.computed?h(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==
a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(e=0;e<a.arguments.length;e++)if(c=h(a.arguments[e],b),""!==c)return c;return"";case "UnaryExpression":c=h(a.argument,b);break;case "BinaryExpression":c=h(a.left,b);if(""!==c)break;c=h(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
h(a.left,b);if(""!==c)break;c=h(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(e=0;e<a.elements.length&&(c=h(a.elements[e],b),""===c);e++);break;case "ObjectExpression":c="";for(e=0;e<a.properties.length;e++){c="";if(null!==a.properties[e].key&&("Literal"!==a.properties[e].key.type&&"Identifier"!==a.properties[e].key.type&&
(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[e].key.type)){var f=a.properties[e].key,g="value"in f?f.value:null;"string"===typeof g||g instanceof String||(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=h(a.properties[e],b));if(""!==c)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=h(a.key,b),""!==c))break;c=h(a.value,b)}return c}catch(N){throw N;}}function g(a,
b){var e=p(a,"SYNTAX","UNREOGNISED"),h=null,d="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var k=null===a.init?"":g(a.init,b);if(""!==k)return k;"Identifier"===a.id.type&&(null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":h=c(a.id.name.toLowerCase(),a,b);d=f(a,b);if(""!==d)return d;if(null!==
b.localScope)return p(a,"SYNTAX","GLOBALFUNCTIONSONLY");h.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]};return"";case "VariableDeclaration":for(var e="",m=0;m<a.declarations.length&&(e=g(a.declarations[m],b),""===e);m++);break;case "IfStatement":e=g(a.test,b);if(""!==e)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return p(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(e=g(a.consequent,b),
""!==e))break;if(null!==a.alternate&&(e=g(a.alternate,b),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(e=g(a.body[m],b),""!==e)return e;return"";case "ReturnStatement":return null!==a.argument?g(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,
"SYNTAX","LEFTNOTVAR");e=g(a.left,b);if(""!==e)break;e=g(a.right,b);if(""!==e)break;e=g(a.body,b);if(""!==e)break;return"";case "ForStatement":if(null!==a.init&&(e=g(a.init,b),""!==e))break;if(null!==a.test&&(e=g(a.test,b),""!==e))break;if(null!==a.body&&(e=g(a.body,b),""!==e))break;if(null!==a.update&&(e=g(a.update,b),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return p(a,
"SYNTAX","ASSIGNMENTTOVARSONLY");var u=!1;if("MemberExpression"===a.argument.type)return g(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(u=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(u=!0);return!1===u?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=g(a.right,b);if(""!==q)return q;u=!1;if("MemberExpression"===
a.left.type)return q=g(a.left,b),""!==q?q:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(u=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(u=!0);return!1===u?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return g(a.expression,b);case "Identifier":var z=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[z])return"";e=void 0!==b.globalScope[z]?"":p(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":e=g(a.object,
b);if(""!==e)break;return!0===a.computed?g(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");e="";for(m=0;m<a.arguments.length;m++)if(e=g(a.arguments[m],b),""!==e)return e;var t=l(a.callee.name,a.arguments,b);-1===t&&(e=p(a,"SYNTAX","NOTFOUND"));-2===t&&(e=p(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=g(a.argument,b);break;case "BinaryExpression":e=g(a.left,b);if(""!==e)break;e=g(a.right,b);if(""!==
e)break;return"";case "LogicalExpression":e=g(a.left,b);if(""!==e)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return p(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");e=g(a.right,b);if(""!==e)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?p(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(m=0;m<a.elements.length&&
(e=g(a.elements[m],b),""===e);m++);break;case "ObjectExpression":e="";for(m=0;m<a.properties.length;m++){e="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(e=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[m].key.type)){var w=a.properties[m].key,x="value"in w?w.value:null;"string"===typeof x||x instanceof String||(e=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===e&&(e=g(a.properties[m],b));if(""!==e)break}break;
case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(e=g(a.key,b),""!==e))break;e=g(a.value,b)}return e}catch(P){throw P;}}function e(a,c){var e=!1,f=c.toLowerCase();b(a,function(a){if(e)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===f&&(e=!0);return!0});return e}function c(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var e=0;e<b.params.length;e++)c.push("any");return{name:a,return:"any",params:c}}
function f(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return g(a.body,b)}function a(a,b,c,e){var f={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var g in b)"sync"===e&&void 0!==b[g].min?f[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}}:"sync"!==e&&void 0!==b[g].fmin&&(f[g]={type:"FormulaFunction",
signature:{min:b[g].fmin,max:b[g].fmax}});for(b=0;b<c.length;b++)g=c[b],f[g.name]={type:"FormulaFunction",signature:g};for(g in a)f[g]=a[g],f[g].type="any";return f}function p(a,b,c){var e="";switch(b){case "SYNTAX":e="Syntax Error: ";break;case "RUNTIME":e="Runtime Error: ";break;default:e="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":e+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":e+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":e+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":e+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":e+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":e+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":e+=" Variable Definition must have an identifier"}break;case "Identifier":e+=" Identifier Not Found. ";e+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":e+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":e+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":e+=" Can only declare value for use with IN";break;case "LEFTNOVAR":e+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":e+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":e+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":e+=
"Cannot find member property. ";e+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":e+="Out of Bounds. ";e+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":e+="Cannot call member method on null. ";e+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":e+="Cannot call member property on object of this type. ",e+=!1===a.computed?"Identifier"===a.property.type?a.property.name:
"":""}break;case "Property":switch(c){case "ONLYLITERAL":e+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(c){case "WRONGSIGNATURE":e+="Function signature does not match: ";e+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":e+="Functions must be declared.";e+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":e+="Not a Function: ";e+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":e+=
"Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":e+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":e+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":e+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":e+=
"Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":e+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":e+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":e+=" Cannot Put Function inside Array."}break;default:e+="Expression contains unrecognised code structures."}}catch(F){throw F;}return e}function q(a,b,c){return{line:a.loc.start.line,
character:a.loc.start.column,reason:p(a,b,c)}}function v(a,b,c,e,f){void 0===f&&(f=!0);b={globalScope:b.globalScope,localScope:{}};for(f=0;f<a.params.length;f++)b.localScope[a.params[f].name.toLowerCase()]={type:"any"};t(a.body,b,c,e,!1)}function t(a,b,e,f,g){void 0===g&&(g=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var h=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==
a.id.type?f.push(q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null!==a.init&&t(a.init,b,e,f,g);break;case "FunctionDeclaration":!1===g&&f.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=c("",a,b);v(a,b,e,f,g);null!==b.localScope&&f.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=
!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]});break;case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)t(a.declarations[d],b,e,f,g);break;case "IfStatement":null!==a.test&&(t(a.test,b,e,f,g),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||f.push(q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&t(a.consequent,b,e,f,g);null!==a.alternate&&t(a.alternate,b,e,f,g);break;
case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(d=0;d<a.body.length;d++)t(a.body[d],b,e,f,g);break;case "ReturnStatement":null!==a.argument&&t(a.argument,b,e,f,g);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(q(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(q(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(q(a,"SYNTAX","LEFTNOTVAR"));t(a.left,b,e,f,g);t(a.right,b,e,f,g);t(a.body,
b,e,f,g);break;case "ForStatement":null!==a.init&&t(a.init,b,e,f,g);null!==a.test&&t(a.test,b,e,f,g);null!==a.body&&t(a.body,b,e,f,g);null!==a.update&&t(a.update,b,e,f,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(h=!1,!1===e&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(h=!0),
void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(h=!0),!1===h&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&t(a.argument,b,e,f,g));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.right,b,e,f,g);h=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(h=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(h=!0),!1===e&&!1===h&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&t(a.left,b,e,f,g);break;case "ExpressionStatement":t(a.expression,
b,e,f,g);break;case "Identifier":var k=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[k])break;if(void 0!==b.globalScope[k])break;!1===e&&f.push(q(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":t(a.object,b,e,f,g);!0===a.computed&&t(a.property,b,e,f,g);break;case "Literal":return"";case "CallExpression":"Identifier"!==a.callee.type&&f.push(q(a,"SYNTAX","ONLYNODESSUPPORTED"));for(d=0;d<a.arguments.length;d++)t(a.arguments[d],b,e,f,g);if("Identifier"===a.callee.type){var p=
l(a.callee.name,a.arguments,b);!1===e&&-1===p&&f.push(q(a,"SYNTAX","NOTFOUND"));-2===p&&f.push(q(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":t(a.argument,b,e,f,g);break;case "BinaryExpression":t(a.left,b,e,f,g);t(a.right,b,e,f,g);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.left,b,e,f,g);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||f.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(a.right,b,e,f,g);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||f.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(q(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(d=0;d<a.elements.length;d++)t(a.elements[d],
b,e,f,g);break;case "ObjectExpression":for(d=0;d<a.properties.length;d++)t(a.properties[d],b,e,f,g);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(q(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&t(a.key,b,e,f,g);t(a.value,b,e,f,g);break;default:f.push(q(a,"SYNTAX","UNRECOGNISED"))}}catch(O){f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function y(a,c){var e=[];b(a,function(a){"CallExpression"===
a.type&&"Identifier"===a.callee.type&&e.push(a.callee.name.toLowerCase());return!0});return e}Object.defineProperty(d,"__esModule",{value:!0});d.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},
millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",
max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var x in d.functionDecls)d.functionDecls[x].fmin=d.functionDecls[x].min,d.functionDecls[x].fmax=d.functionDecls[x].max;var w="featureset featuresetbyid featuresetbyname featuresetbyurl attachments featuresetbyportalitem".split(" "),m="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
d.addFunctionDeclaration=function(a,b){var c=d.functionDecls[a.name.toLowerCase()];void 0===c?"sync"===b?d.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:d.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===b?(c.min=a.min,c.max=a.max):(c.fmin=a.min,c.fmax=a.max)};d.checkFunctionSignature=n;d.findFunction=l;d.walk=b;d.validateLanguageNode=h;d.testValidityOfExpression=g;d.referencesMember=e;d.referencesFunction=function(a,c){var e=!1,f=c.toLowerCase();b(a,function(a){return e?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===f?(e=!0,!1):!0});return e};d.findFieldLiterals=function(a,c){var e=[];b(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?e.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&e.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return e};d.extractFunctionDeclaration=c;d.validateFunction=f;d.constructGlobalScope=a;d.validateScript=function(b,c,e,f){void 0===e&&(e="async");void 0===f&&(f=d.functionDecls);c={globalScope:a(c.vars,f,c.customFunctions,e),localScope:null};return g(b.body[0].body,c)};d.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":h(a.body[0].body)};
d.nodeErrorMessage=p;d.makeError=q;d.extractAllIssuesInFunction=v;d.extractAllIssues=t;d.checkScript=function(b,c,e,f,g){void 0===f&&(f="async");void 0===g&&(g=d.functionDecls);var h=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:a(c.vars,g,c.customFunctions,f),localScope:null};try{t(b.body[0].body,c,e,h)}catch(N){}return h};d.findFunctionCalls=y;d.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=y(a,!1));a.usesFeatureSet=!1;for(var f=0;f<c.length;f++)-1<w.indexOf(c[f])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(f=0;f<b.length;f++)if(e(a,b[f])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=y(a,!1)),f=0;f<c.length;f++)-1<m.indexOf(c[f])&&(a.usesGeometry=!0)};d.scriptUsesFeatureSet=function(a){a=
y(a,!1);for(var b=0;b<a.length;b++)if(-1<w.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(r,d,n,l){function k(b){return null===b?b:isNaN(b.getTime())?null:b}Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(b,h){b.today=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,0,0);b=new Date;b.setHours(0,0,0,0);return b})};b.now=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,
0,0);return new Date})};b.timestamp=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};b.toutc=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};b.tolocal=
function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?null:n.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};b.day=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getDate()})};b.month=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getMonth()})};b.year=function(b,e){return h(b,e,function(b,
e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getFullYear()})};b.hour=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getHours()})};b.second=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getSeconds()})};b.millisecond=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getMilliseconds()})};b.minute=function(b,e){return h(b,e,function(b,
e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getMinutes()})};b.weekday=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,1,1);b=l.toDate(a[0]);return null===b?NaN:b.getDay()})};b.date=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,0,7);if(3===a.length)return k(new Date(l.toNumber(a[0]),l.toNumber(a[1]),l.toNumber(a[2]),0,0,0,0));if(4===a.length)return k(new Date(l.toNumber(a[0]),l.toNumber(a[1]),l.toNumber(a[2]),l.toNumber(a[3]),0,0,0));if(5===a.length)return k(new Date(l.toNumber(a[0]),
l.toNumber(a[1]),l.toNumber(a[2]),l.toNumber(a[3]),l.toNumber(a[4]),0,0));if(6===a.length)return k(new Date(l.toNumber(a[0]),l.toNumber(a[1]),l.toNumber(a[2]),l.toNumber(a[3]),l.toNumber(a[4]),l.toNumber(a[5]),0));if(7===a.length)return k(new Date(l.toNumber(a[0]),l.toNumber(a[1]),l.toNumber(a[2]),l.toNumber(a[3]),l.toNumber(a[4]),l.toNumber(a[5]),l.toNumber(a[6])));if(2===a.length){b=l.toString(a[1]);if(""===b)return null;b=l.standardiseDateFormat(b);a=n(l.toString(a[0]),b,!0);return!0===a.isValid()?
a.toDate():null}if(1===a.length){if(l.isString(a[0])&&""===a[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=l.toNumber(a[0]);return!1===isNaN(b)?k(new Date(b)):l.toDate(a[0])}if(0===a.length)return new Date})};b.datediff=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,2,3);b=l.toDateM(a[0]);e=l.toDateM(a[1]);if(null===b||null===e)return NaN;switch(l.toString(a[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(e,"days",!0);case "months":case "month":return b.diff(e,
"months",!0);case "minutes":case "minute":case "m":return"M"===a[2]?b.diff(e,"months",!0):b.diff(e,"minutes",!0);case "seconds":case "second":case "s":return b.diff(e,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(e);case "hours":case "hour":case "h":return b.diff(e,"hours",!0);case "years":case "year":case "y":return b.diff(e,"years",!0);default:return b.diff(e)}})};b.dateadd=function(b,e){return h(b,e,function(b,e,a){l.pcCheck(a,2,3);b=l.toDateM(a[0]);if(null===b)return null;
e="milliseconds";switch(l.toString(a[2]).toLowerCase()){case "days":case "day":case "d":e="days";break;case "months":case "month":e="months";break;case "minutes":case "minute":case "m":e="M"===a[2]?"months":"minutes";break;case "seconds":case "second":case "s":e="seconds";break;case "milliseconds":case "millisecond":case "ms":e="milliseconds";break;case "hours":case "hour":case "h":e="hours";break;case "years":case "year":case "y":e="years"}b.add(l.toNumber(a[1]),e);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){Object.defineProperty(d,"__esModule",{value:!0});d.registerFunctions=function(d,y){d.ringisclockwise=function(a,e){return y(a,e,function(a,e,f){b.pcCheck(f,1,1);a=[];var g=e=!1;if(null===f[0])return!1;if(b.isArray(f[0])){for(var h=0,d=f[0];h<d.length;h++){var l=d[h];if(l instanceof c)a.push(l.hasZ?l.hasM?[l.x,l.y,l.z,l.m]:[l.x,l.y,l.z]:[l.x,l.y]);else throw Error("Invalid Argument");}0<a.length&&(e=f[0][0].hasZ,g=f[0][0].hasM)}else if(f[0]instanceof k)a=f[0]._elements,
0<a.length&&(e=f[0]._hasZ,g=f[0]._hasM);else if(b.isImmutableArray(f[0])){h=0;for(d=f[0].toArray();h<d.length;h++)if(l=d[h],l instanceof c)a.push(l.hasZ?l.hasM?[l.x,l.y,l.z,l.m]:[l.x,l.y,l.z]:[l.x,l.y]);else throw Error("Invalid Argument");0<a.length&&(e=f[0].get(0).hasZ,g=f[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>a.length?!1:v.isClockwise(a,g,e)})};d.polygon=function(a,c){return y(a,c,function(c,e,g){b.pcCheck(g,1,1);c=null;if(g[0]instanceof n){if(c=b.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),
a.spatialReference),!1===c instanceof f)throw Error("Illegal Parameter");}else c=g[0]instanceof f?q.fromJSON(g[0].toJSON()):b.fixSpatialReference(new f(JSON.parse(g[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(c)})};d.polyline=function(c,e){return y(c,e,function(e,f,g){b.pcCheck(g,1,1);e=null;if(g[0]instanceof n){if(e=b.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),
c.spatialReference),!1===e instanceof a)throw Error("Illegal Parameter");}else e=g[0]instanceof a?q.fromJSON(g[0].toJSON()):b.fixSpatialReference(new a(JSON.parse(g[0])),c.spatialReference);if(null!==e&&!1===e.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(e)})};d.point=function(a,e){return y(a,e,function(e,f,g){b.pcCheck(g,1,1);e=null;if(g[0]instanceof n){if(e=b.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),
a.spatialReference),!1===e instanceof c)throw Error("Illegal Parameter");}else e=g[0]instanceof c?q.fromJSON(g[0].toJSON()):b.fixSpatialReference(new c(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(e)})};d.multipoint=function(a,c){return y(a,c,function(c,f,g){b.pcCheck(g,1,1);c=null;if(g[0]instanceof n){if(c=
b.fixSpatialReference(l.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===c instanceof e)throw Error("Illegal Parameter");}else c=g[0]instanceof e?q.fromJSON(g[0].toJSON()):b.fixSpatialReference(new e(JSON.parse(g[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(c)})};d.extent=function(g,d){return y(g,d,function(d,
k,p){p=b.autoCastFeatureToGeometry(p);b.pcCheck(p,1,1);d=null;p[0]instanceof n?d=b.fixSpatialReference(l.parseGeometryFromDictionary(p[0]),g.spatialReference):p[0]instanceof c?(d={xmin:p[0].x,ymin:p[0].y,xmax:p[0].x,ymax:p[0].y,spatialReference:p[0].spatialReference.toJSON()},p[0].hasZ?(d.zmin=p[0].z,d.zmax=p[0].z):p[0].hasM&&(d.mmin=p[0].m,d.mmax=p[0].m),d=q.fromJSON(d)):d=p[0]instanceof f?q.fromJSON(p[0].extent.toJSON()):p[0]instanceof a?q.fromJSON(p[0].extent.toJSON()):p[0]instanceof e?q.fromJSON(p[0].extent.toJSON()):
p[0]instanceof h?q.fromJSON(p[0].toJSON()):b.fixSpatialReference(new h(JSON.parse(p[0])),g.spatialReference);if(null!==d&&!1===d.spatialReference.equals(g.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(d)})};d.geometry=function(a,c){return y(a,c,function(c,e,f){b.pcCheck(f,1,1);c=null;c=f[0]instanceof l?b.fixSpatialReference(f[0].geometry(),a.spatialReference):f[0]instanceof n?b.fixSpatialReference(l.parseGeometryFromDictionary(f[0]),
a.spatialReference):b.fixSpatialReference(q.fromJSON(JSON.parse(f[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(c)})};d.setgeometry=function(a,c){return y(a,c,function(a,c,e){b.pcCheck(e,2,2);if(e[0]instanceof l){if(!0===e[0].immutable)throw Error("Feature is Immutable");if(e[1]instanceof g||null===e[1])e[0]._geometry=e[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return b.voidOperation})};d.feature=function(a,c){return y(a,c,function(c,e,f){if(0===f.length)throw Error("Missing Parameters");c=null;if(1===f.length)if(b.isString(f[0]))c=l.fromJson(JSON.parse(f[0]));else if(f[0]instanceof l)c=l.createFromArcadeFeature(f[0]);else if(f[0]instanceof g)c=l.createFromGraphicLikeObject(f[0],null,null);else if(f[0]instanceof n)c=f[0].hasField("geometry")?f[0].field("geometry"):null,e=f[0].hasField("attributes")?
f[0].field("attributes"):null,null!==c&&c instanceof n&&(c=l.parseGeometryFromDictionary(c)),null!==e&&(e=l.parseAttributesFromDictionary(e)),c=l.createFromGraphicLikeObject(c,e,null);else throw Error("Illegal Argument");else{if(2===f.length){e=c=null;if(null!==f[0])if(f[0]instanceof g)c=f[0];else if(c instanceof n)c=l.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");if(null!==f[1])if(f[1]instanceof n)e=l.parseAttributesFromDictionary(f[1]);else throw Error("Illegal Argument");
}else{c=null;e={};if(null!==f[0])if(f[0]instanceof g)c=f[0];else if(c instanceof n)c=l.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");for(var h=1;h<f.length;h+=2){var d=b.toString(f[h]),k=f[h+1];if(null===k||void 0===k||b.isString(k)||isNaN(k)||b.isDate(k)||b.isNumber(k)||b.isBoolean(k)){if(b.isFunctionParameter(k)||!1===b.isSimpleType(k))throw Error("Illegal Argument");e[d]=k===b.voidOperation?null:k}else throw Error("Illegal Argument");}}c=l.createFromGraphicLikeObject(c,
e,null)}c._geometry=b.fixSpatialReference(c.geometry(),a.spatialReference);c.immutable=!1;return c})};d.dictionary=function(a,c){return y(a,c,function(a,c,e){if(0===e.length)throw Error("Missing Parameters");if(0!==e.length%2)throw Error("Missing Parameters");a={};for(c=0;c<e.length;c+=2){var f=b.toString(e[c]),g=e[c+1];if(null===g||void 0===g||b.isString(g)||isNaN(g)||b.isDate(g)||b.isNumber(g)||b.isBoolean(g)||b.isArray(g)||b.isImmutableArray(g)){if(b.isFunctionParameter(g))throw Error("Illegal Argument");
a[f]=g===b.voidOperation?null:g}else throw Error("Illegal Argument");}e=new n(a);e.immutable=!1;return e})};d.haskey=function(a,c){return y(a,c,function(a,c,e){b.pcCheck(e,2,2);a=b.toString(e[1]);if(e[0]instanceof l||e[0]instanceof n)return e[0].hasField(a);throw Error("Illegal Argument");})};d.indexof=function(a,c){return y(a,c,function(a,c,e){b.pcCheck(e,2,2);a=e[1];if(b.isArray(e[0])){for(c=0;c<e[0].length;c++)if(b.equalityTest(a,e[0][c]))return c;return-1}if(b.isImmutableArray(e[0])){var f=e[0].length();
for(c=0;c<f;c++)if(b.equalityTest(a,e[0].get(c)))return c;return-1}throw Error("Illegal Argument");})};d.angle=function(a,e){return y(a,e,function(a,e,f){f=b.autoCastFeatureToGeometry(f);b.pcCheck(f,2,3);if(!(f[0]instanceof c))throw Error("Illegal Argument");if(!(f[1]instanceof c))throw Error("Illegal Argument");if(2<f.length&&!(f[2]instanceof c))throw Error("Illegal Argument");return 2===f.length?p.angle2D(f[0],f[1]):p.angleBetween2D(f[0],f[1],f[2])})};d.bearing=function(a,e){return y(a,e,function(a,
e,f){f=b.autoCastFeatureToGeometry(f);b.pcCheck(f,2,3);if(!(f[0]instanceof c))throw Error("Illegal Argument");if(!(f[1]instanceof c))throw Error("Illegal Argument");if(2<f.length&&!(f[2]instanceof c))throw Error("Illegal Argument");return 2===f.length?p.bearing2D(f[0],f[1]):p.bearingBetween2D(f[0],f[1],f[2])})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(r,d,n){function l(b,c,f){var a={x:0,y:0};c&&(a.z=0);f&&(a.m=0);for(var e=0,g=b[0],
h=0;h<b.length;h++){var d=b[h],l;a:if(d.length!==g.length)l=!1;else{for(l=0;l<d.length;l++)if(d[l]!==g[l]){l=!1;break a}l=!0}if(!1===l){l=k(g,d,c);var x=d,w=c,m=f,u={x:(g[0]+x[0])/2,y:(g[1]+x[1])/2};w&&(u.z=(g[2]+x[2])/2);w&&m?u.m=(g[3]+x[3])/2:m&&(u.m=(g[2]+x[2])/2);g=u;g.x*=l;g.y*=l;a.x+=g.x;a.y+=g.y;c&&(g.z*=l,a.z+=g.z);f&&(g.m*=l,a.m+=g.m);e+=l;g=d}}0<e?(a.x/=e,a.y/=e,c&&(a.z/=e),f&&(a.m/=e)):(a.x=b[0][0],a.y=b[0][1],c&&(a.z=b[0][2]),f&&c?a.m=b[0][3]:f&&(a.m=b[0][2]));return a}function k(b,c,
f){var a=c[0]-b[0];b=c[1]-b[1];return f?(c=c[2]-c[2],Math.sqrt(a*a+b*b+c*c)):Math.sqrt(a*a+b*b)}function b(b,c,f){for(void 0===f&&(f=0);b<f;)b+=c;for(f+=c;b>=f;)b-=c;return b}function h(b,c){return Math.atan2(c.y-b.y,c.x-b.x)}function g(b,c,f){var a=b.x-c.x;b=b.y-c.y;var e=f.x-c.x;c=f.y-c.y;return Math.atan2(e*b-a*c,e*a+c*b)}Object.defineProperty(d,"__esModule",{value:!0});d.centroidPolyline=function(b){for(var c={x:0,y:0,spatialReference:b.spatialReference.toJSON()},e={x:0,y:0,spatialReference:b.spatialReference.toJSON()},
a=0,g=0,h=0;h<b.paths.length;h++)if(0!==b.paths[h].length){var d;d=b.paths[h];var t=!0===b.hasZ;if(1>=d.length)d=0;else{for(var y=0,x=1;x<d.length;x++)y+=k(d[x-1],d[x],t);d=y}0===d?(t=l(b.paths[h],!0===b.hasZ,!0===b.hasM),c.x+=t.x,c.y+=t.y,!0===b.hasZ&&(c.z+=t.z),!0===b.hasM&&(c.m+=t.m),++a):(t=l(b.paths[h],!0===b.hasZ,!0===b.hasM),e.x+=t.x*d,e.y+=t.y*d,!0===b.hasZ&&(e.z+=t.z*d),!0===b.hasM&&(e.m+=t.m*d),g+=d)}return 0<g?(e.x/=g,e.y/=g,!0===b.hasZ&&(e.z/=g),!0===b.hasM&&(e.m/=g),new n(e)):0<a?(c.x/=
a,c.y/=a,!0===b.hasZ&&(e.z/=a),!0===b.hasM&&(c.m/=a),new n(c)):null};d.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var c=0,e=0,a=0,g=0,h=0;h<b.points.length;h++){var d=b.getPoint(h);!0===d.hasZ&&(a+=d.z);!0===d.hasM&&(g+=d.m);c+=d.x;e+=d.y;g+=d.m}c={x:c/b.points.length,y:e/b.points.length,spatialReference:null};c.spatialReference=b.spatialReference.toJSON();!0===b.hasZ&&(c.z=a/b.points.length);!0===b.hasM&&(c.m=g/b.points.length);return new n(c)};d.angleRad=h;d.angle2D=function(e,
c){return b(h(e,c),2*Math.PI)*(180/Math.PI)};d.bearing2D=function(e,c){return b(Math.PI/2-h(e,c),2*Math.PI)*(180/Math.PI)};d.angleBetweenRad=g;d.angleBetween2D=function(e,c,f){return b(g(e,c,f),2*Math.PI)*(180/Math.PI)};d.bearingBetween2D=function(e,c,f){return b(-1*g(e,c,f),2*Math.PI)*(180/Math.PI)}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a){return 0===n.version.indexOf("4.")?f.fromExtent(a):new f({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(d,"__esModule",{value:!0});var v=null;d.setGeometryEngine=function(a){v=a};d.registerFunctions=function(d,y){function t(a){k.pcCheck(a,2,2);if(!(a[0]instanceof g&&a[1]instanceof g||a[0]instanceof g&&null===a[1]||a[1]instanceof g&&null===a[0]||
null===a[0]&&null===a[1]))throw Error("Illegal Argument");}d.disjoint=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!0:v.disjoint(c[0],c[1])})};d.intersects=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.intersects(c[0],c[1])})};d.touches=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.touches(c[0],
c[1])})};d.crosses=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.crosses(c[0],c[1])})};d.within=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.within(c[0],c[1])})};d.contains=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.contains(c[0],c[1])})};d.overlaps=function(a,b){return y(a,b,function(a,
b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?!1:v.overlaps(c[0],c[1])})};d.equals=function(a,b){return y(a,b,function(a,b,c){k.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof g&&c[1]instanceof g?v.equals(c[0],c[1]):k.isDate(c[0])&&k.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};d.relate=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,3,3);if(c[0]instanceof g&&c[1]instanceof g)return v.relate(c[0],c[1],k.toString(c[2]));
if(c[0]instanceof g&&null===c[1]||c[1]instanceof g&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};d.intersection=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]||null===c[1]?null:v.intersect(c[0],c[1])})};d.union=function(a,b){return y(a,b,function(b,c,e){e=k.autoCastFeatureToGeometry(e);b=[];if(0===e.length)throw Error("Function called with wrong number of Parameters");if(1===e.length)if(k.isArray(e[0]))for(e=
k.autoCastFeatureToGeometry(e[0]),c=0;c<e.length;c++){if(null!==e[c]){if(!(e[c]instanceof g))throw Error("Illegal Argument");b.push(e[c])}}else if(k.isImmutableArray(e[0]))for(e=k.autoCastFeatureToGeometry(e[0].toArray()),c=0;c<e.length;c++){if(null!==e[c]){if(!(e[c]instanceof g))throw Error("Illegal Argument");b.push(e[c])}}else{if(e[0]instanceof g)return k.fixSpatialReference(l.cloneGeometry(e[0]),a.spatialReference);if(null===e[0])return null;throw Error("Illegal Argument");}else for(c=0;c<e.length;c++)if(null!==
e[c]){if(!(e[c]instanceof g))throw Error("Illegal Argument");b.push(e[c])}return 0===b.length?null:v.union(b)})};d.difference=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null!==c[0]&&null===c[1]?l.cloneGeometry(c[0]):null===c[0]?null:v.difference(c[0],c[1])})};d.symmetricdifference=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);t(c);return null===c[0]&&null===c[1]?null:null===c[0]?l.cloneGeometry(c[1]):null===c[1]?l.cloneGeometry(c[0]):
v.symmetricDifference(c[0],c[1])})};d.clip=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,2);if(!(c[1]instanceof h)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");return null===c[1]?null:v.clip(c[0],c[1])})};d.cut=function(b,c){return y(b,c,function(b,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,2);if(!(e[1]instanceof a)&&null!==e[1])throw Error("Illegal Argument");if(null===
e[0])return[];if(!(e[0]instanceof g))throw Error("Illegal Argument");return null===e[1]?[l.cloneGeometry(e[0])]:v.cut(e[0],e[1])})};d.area=function(a,b){return y(a,b,function(b,c,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return b=k.autoCastArrayOfPointsToPolygon(e[0],a.spatialReference),null===b?0:v.planarArea(b,l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");
return v.planarArea(e[0],l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)))})};d.areageodetic=function(a,b){return y(a,b,function(b,c,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return b=k.autoCastArrayOfPointsToPolygon(e[0],a.spatialReference),null===b?0:v.geodesicArea(b,l.convertSquareUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return v.geodesicArea(e[0],l.convertSquareUnitsToCode(k.defaultUndefined(e[1],
-1)))})};d.length=function(a,b){return y(a,b,function(b,c,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return b=k.autoCastArrayOfPointsToPolyline(e[0],a.spatialReference),null===b?0:v.planarLength(b,l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return v.planarLength(e[0],l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)))})};d.lengthgeodetic=function(a,
b){return y(a,b,function(b,c,e){k.pcCheck(e,1,2);e=k.autoCastFeatureToGeometry(e);if(null===e[0])return 0;if(k.isArray(e[0])||k.isImmutableArray(e[0]))return b=k.autoCastArrayOfPointsToPolyline(e[0],a.spatialReference),null===b?0:v.geodesicLength(b,l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)));if(!(e[0]instanceof g))throw Error("Illegal Argument");return v.geodesicLength(e[0],l.convertLinearUnitsToCode(k.defaultUndefined(e[1],-1)))})};d.distance=function(a,b){return y(a,b,function(b,c,
e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);b=e[0];if(k.isArray(e[0])||k.isImmutableArray(e[0]))b=k.autoCastArrayOfPointsToMultiPoint(e[0],a.spatialReference);c=e[1];if(k.isArray(e[1])||k.isImmutableArray(e[1]))c=k.autoCastArrayOfPointsToMultiPoint(e[1],a.spatialReference);if(!(b instanceof g))throw Error("Illegal Argument");if(!(c instanceof g))throw Error("Illegal Argument");return v.distance(b,c,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1)))})};d.densify=function(b,c){return y(b,
c,function(b,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return e[0]instanceof f||e[0]instanceof a?v.densify(e[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1))):e[0]instanceof h?v.densify(q(e[0]),b,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1))):e[0]})};d.densifygeodetic=function(b,c){return y(b,
c,function(b,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof g))throw Error("Illegal Argument");b=k.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return e[0]instanceof f||e[0]instanceof a?v.geodesicDensify(e[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1))):e[0]instanceof h?v.geodesicDensify(q(e[0]),b,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1))):e[0]})};d.generalize=function(a,
b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");a=k.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return v.generalize(c[0],a,k.toBoolean(k.defaultUndefined(c[2],!0)),l.convertLinearUnitsToCode(k.defaultUndefined(c[3],-1)))})};d.buffer=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
g))throw Error("Illegal Argument");a=k.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?l.cloneGeometry(c[0]):v.buffer(c[0],a,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1)))})};d.buffergeodetic=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");a=k.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?l.cloneGeometry(c[0]):v.geodesicBuffer(c[0],
a,l.convertLinearUnitsToCode(k.defaultUndefined(c[2],-1)))})};d.offset=function(b,c){return y(b,c,function(b,c,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,6);if(null===e[0])return null;if(!(e[0]instanceof f||e[0]instanceof a))throw Error("Illegal Argument");b=k.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");c=k.toNumber(k.defaultUndefined(e[4],10));if(isNaN(c))throw Error("Illegal Argument");var g=k.toNumber(k.defaultUndefined(e[5],0));if(isNaN(g))throw Error("Illegal Argument");
return v.offset(e[0],b,l.convertLinearUnitsToCode(k.defaultUndefined(e[2],-1)),k.toString(k.defaultUndefined(e[3],"round")).toLowerCase(),c,g)})};d.rotate=function(a,b){return y(a,b,function(a,b,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);a=e[0];if(null===a)return null;if(!(a instanceof g))throw Error("Illegal Argument");a instanceof h&&(a=f.fromExtent(a));b=k.toNumber(e[1]);if(isNaN(b))throw Error("Illegal Argument");e=k.defaultUndefined(e[2],null);if(null===e)return v.rotate(a,b);if(e instanceof
c)return v.rotate(a,b,e);throw Error("Illegal Argument");})};d.centroid=function(d,p){return y(d,p,function(p,m,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);if(null===q[0])return null;p=q[0];if(k.isArray(q[0])||k.isImmutableArray(q[0]))p=k.autoCastArrayOfPointsToMultiPoint(q[0],d.spatialReference);if(null===p)return null;if(!(p instanceof g))throw Error("Illegal Argument");return p instanceof c?k.fixSpatialReference(l.cloneGeometry(q[0]),d.spatialReference):p instanceof f?p.centroid:p instanceof
a?b.centroidPolyline(p):p instanceof e?b.centroidMultiPoint(p):p instanceof h?p.center:null})};d.multiparttosinglepart=function(b,d){return y(b,d,function(d,m,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);m=[];if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");if(q[0]instanceof c||q[0]instanceof h)return[k.fixSpatialReference(l.cloneGeometry(q[0]),b.spatialReference)];d=v.simplify(q[0]);if(d instanceof f){m=[];var u=[];for(q=0;q<d.rings.length;q++)if(d.isClockwise(d.rings[q])){var t=
p.fromJSON({rings:[d.rings[q]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});m.push(t)}else u.push({ring:d.rings[q],pt:d.getPoint(q,0)});for(d=0;d<u.length;d++)for(q=0;q<m.length;q++)if(m[q].contains(u[d].pt)){m[q].addRing(u[d].ring);break}return m}if(d instanceof a){m=[];for(q=0;q<d.paths.length;q++)u=p.fromJSON({paths:[d.paths[q]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()}),m.push(u);return m}if(q[0]instanceof e){d=k.fixSpatialReference(l.cloneGeometry(q[0]),
b.spatialReference);for(q=0;q<d.points.length;q++)m.push(d.getPoint(q));return m}return null})};d.issimple=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,1,1);if(null===c[0])return!0;if(!(c[0]instanceof g))throw Error("Illegal Argument");return v.isSimple(c[0])})};d.simplify=function(a,b){return y(a,b,function(a,b,c){c=k.autoCastFeatureToGeometry(c);k.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof g))throw Error("Illegal Argument");return v.simplify(c[0])})}}})},
"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
d.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.extent;case "point":return new n({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};d.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
d.sameGeomType=function(d,k){return d===k||"point"===d&&"esriGeometryPoint"===k||"polyline"===d&&"esriGeometryPolyline"===k||"polygon"===d&&"esriGeometryPolygon"===k||"extent"===d&&"esriGeometryEnvelope"===k||"multipoint"===d&&"esriGeometryMultipoint"===k||"point"===k&&"esriGeometryPoint"===d||"polyline"===k&&"esriGeometryPolyline"===d||"polygon"===k&&"esriGeometryPolygon"===d||"extent"===k&&"esriGeometryEnvelope"===d||"multipoint"===k&&"esriGeometryMultipoint"===d?!0:!1};d.cloneGeometry=function(d){if(null===
d)return null;var k=d.clone();void 0!==d.cache._geVersion&&(k.cache._geVersion=d.cache._geVersion);return k}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(r,d,n,l){function k(b,d,g){if("undefined"===typeof g||0===+g)return Math[b](d);d=+d;g=+g;if(isNaN(d)||"number"!==typeof g||0!==g%1)return NaN;d=d.toString().split("e");d=Math[b](+(d[0]+"e"+(d[1]?+d[1]-g:-g)));d=d.toString().split("e");return+(d[0]+"e"+(d[1]?+d[1]+g:g))}Object.defineProperty(d,
"__esModule",{value:!0});d.registerFunctions=function(b,d){function g(b,c,f){b=l.toNumber(b);return isNaN(b)?b:isNaN(c)||isNaN(f)||c>f?NaN:b<c?c:b>f?f:b}b.number=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,2);b=c[0];return l.isNumber(b)?b:null===b?0:l.isDate(b)||l.isBoolean(b)?Number(b):l.isArray(b)?NaN:""===b||void 0===b?Number(b):l.isString(b)?void 0!==c[1]?(c=l.multiReplace(c[1],"\u2030",""),c=l.multiReplace(c,"\u00a4",""),n.parse(b,{pattern:c})):Number(b.trim()):Number(b)})};b.abs=
function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.abs(l.toNumber(c[0]))})};b.acos=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.acos(l.toNumber(c[0]))})};b.asin=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.asin(l.toNumber(c[0]))})};b.atan=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.atan(l.toNumber(c[0]))})};b.atan2=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,2,2);return Math.atan2(l.toNumber(c[0]),
l.toNumber(c[1]))})};b.ceil=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,2);return 2===c.length?(b=l.toNumber(c[1]),isNaN(b)&&(b=0),k("ceil",l.toNumber(c[0]),-1*b)):Math.ceil(l.toNumber(c[0]))})};b.round=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,2);return 2===c.length?(b=l.toNumber(c[1]),isNaN(b)&&(b=0),k("round",l.toNumber(c[0]),-1*b)):Math.round(l.toNumber(c[0]))})};b.floor=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,2);return 2===c.length?(b=l.toNumber(c[1]),
isNaN(b)&&(b=0),k("floor",l.toNumber(c[0]),-1*b)):Math.floor(l.toNumber(c[0]))})};b.cos=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.cos(l.toNumber(c[0]))})};b.isnan=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return"number"===typeof c[0]&&isNaN(c[0])})};b.exp=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.exp(l.toNumber(c[0]))})};b.log=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.log(l.toNumber(c[0]))})};
b.pow=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,2,2);return Math.pow(l.toNumber(c[0]),l.toNumber(c[1]))})};b.random=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,0,0);return Math.random()})};b.sin=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.sin(l.toNumber(c[0]))})};b.sqrt=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.sqrt(l.toNumber(c[0]))})};b.tan=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return Math.tan(l.toNumber(c[0]))})};
b.defaultvalue=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,2,2);return null===c[0]||""===c[0]||void 0===c[0]?c[1]:c[0]})};b.isempty=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return null===c[0]||""===c[0]||void 0===c[0]?!0:!1})};b["boolean"]=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,1,1);return l.toBoolean(c[0])})};b.constrain=function(b,c){return d(b,c,function(b,a,c){l.pcCheck(c,3,3);b=l.toNumber(c[1]);a=l.toNumber(c[2]);if(l.isArray(c[0])){var e=[],f=0;
for(c=c[0];f<c.length;f++)e.push(g(c[f],b,a));return e}if(l.isImmutableArray(c[0])){e=[];for(f=0;f<c[0].length();f++)e.push(g(c[0].get(f),b,a));return e}return g(c[0],b,a)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(r,d,n,l){function k(b,d,g,e){if(1===e.length){if(n.isArray(e[0]))return l.calculateStat(b,e[0],-1);if(n.isImmutableArray(e[0]))return l.calculateStat(b,e[0].toArray(),-1)}return l.calculateStat(b,e,-1)}Object.defineProperty(d,
"__esModule",{value:!0});d.registerFunctions=function(b,d){b.stdev=function(b,e){return d(b,e,function(b,e,a){return k("stdev",b,e,a)})};b.variance=function(b,e){return d(b,e,function(b,e,a){return k("variance",b,e,a)})};b.average=function(b,e){return d(b,e,function(b,e,a){return k("mean",b,e,a)})};b.mean=function(b,e){return d(b,e,function(b,e,a){return k("mean",b,e,a)})};b.sum=function(b,e){return d(b,e,function(b,e,a){return k("sum",b,e,a)})};b.min=function(b,e){return d(b,e,function(b,e,a){return k("min",
b,e,a)})};b.max=function(b,e){return d(b,e,function(b,e,a){return k("max",b,e,a)})};b.distinct=function(b,e){return d(b,e,function(b,e,a){return k("distinct",b,e,a)})};b.count=function(b,e){return d(b,e,function(b,e,a){n.pcCheck(a,1,1);if(n.isArray(a[0])||n.isString(a[0]))return a[0].length;if(n.isImmutableArray(a[0]))return a[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(r,d,n){function l(b){for(var d=
0,g=0;g<b.length;g++)d+=b[g];return d/b.length}function k(b){for(var d=l(b),g=0,e=0;e<b.length;e++)g+=Math.pow(d-b[e],2);return g/b.length}Object.defineProperty(d,"__esModule",{value:!0});d.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};d.calculateStat=
function(b,d,g){void 0===g&&(g=1E3);switch(b.toLowerCase()){case "distinct":a:{b=g;g=[];for(var e={},c=[],f=0;f<d.length;f++){if(void 0!==d[f]&&null!==d[f]&&d[f]!==n.voidOperation){var a=d[f];if(n.isNumber(a)||n.isString(a))void 0===e[a]&&(g.push(a),e[a]=1);else{for(var h=!1,q=0;q<c.length;q++)!0===n.equalityTest(c[q],a)&&(h=!0);!1===h&&(c.push(a),g.push(a))}}if(g.length>=b&&-1!==b){d=g;break a}}d=g}return d;case "avg":case "mean":return l(n.toNumberArray(d));case "min":return Math.min.apply(Math,
n.toNumberArray(d));case "sum":d=n.toNumberArray(d);for(g=b=0;g<d.length;g++)b+=d[g];return b;case "max":return Math.max.apply(Math,n.toNumberArray(d));case "stdev":case "stddev":return Math.sqrt(k(n.toNumberArray(d)));case "var":case "variance":return k(n.toNumberArray(d));case "count":return d.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Dictionary","../Feature","../languageUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});
d.registerFunctions=function(b,d){b.trim=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,1);return k.toString(a[0]).trim()})};b.upper=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,1);return k.toString(a[0]).toUpperCase()})};b.proper=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,2);b=1;2===a.length&&"firstword"===k.toString(a[1]).toLowerCase()&&(b=2);e=/\s/;a=k.toString(a[0]);for(var c="",f=!0,g=0;g<a.length;g++){var d=a[g];e.test(d)?1===b&&(f=!0):d.toUpperCase()!==d.toLowerCase()&&
(f?(d=d.toUpperCase(),f=!1):d=d.toLowerCase());c+=d}return c})};b.lower=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,1);return k.toString(a[0]).toLowerCase()})};b.guid=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,0,1);if(0<a.length)switch(k.toString(a[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+
k.generateUUID()+"}"})};b.console=function(b,e){return d(b,e,function(c,e,a){0!==a.length&&(1===a.length?b.console(k.toString(a[0])):b.console(k.toString(a)));return k.voidOperation})};b.mid=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,2,3);b=k.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===a.length)return k.toString(a[0]).substr(b);e=k.toNumber(a[2]);if(isNaN(e))return"";0>e&&(e=0);return k.toString(a[0]).substr(b,e)})};b.find=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,
2,3);b=0;if(2<a.length){b=k.toNumber(k.defaultUndefined(a[2],0));if(isNaN(b))return-1;0>b&&(b=0)}return k.toString(a[1]).indexOf(k.toString(a[0]),b)})};b.left=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,2,2);b=k.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(a[0]).substr(0,b)})};b.right=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,2,2);b=k.toNumber(a[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(a[0]).substr(-1*b,b)})};b.split=function(b,e){return d(b,
e,function(b,e,a){k.pcCheck(a,2,4);b=k.toNumber(k.defaultUndefined(a[2],-1));e=k.toBoolean(k.defaultUndefined(a[3],!1));-1===b||null===b||!0===e?a=k.toString(a[0]).split(k.toString(a[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),a=k.toString(a[0]).split(k.toString(a[1]),b));if(!1===e)return a;e=[];for(var c=0;c<a.length&&!(-1!==b&&e.length>=b);c++)""!==a[c]&&void 0!==a[c]&&e.push(a[c]);return e})};b.text=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,2);return k.toStringExplicit(a[0],a[1])})};b.concatenate=
function(b,e){return d(b,e,function(b,e,a){b=[];if(1>a.length)return"";if(k.isArray(a[0])){e=k.defaultUndefined(a[2],"");for(var c=0;c<a[0].length;c++)b[c]=k.toStringExplicit(a[0][c],e);return 1<a.length?b.join(a[1]):b.join("")}if(k.isImmutableArray(a[0])){e=k.defaultUndefined(a[2],"");for(c=0;c<a[0].length();c++)b[c]=k.toStringExplicit(a[0].get(c),e);return 1<a.length?b.join(a[1]):b.join("")}for(c=0;c<a.length;c++)b[c]=k.toStringExplicit(a[c]);return b.join("")})};b.reverse=function(b,e){return d(b,
e,function(b,e,a){k.pcCheck(a,1,1);if(k.isArray(a[0]))return b=a[0].slice(0),b.reverse(),b;if(k.isImmutableArray(a[0]))return b=a[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};b.replace=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,3,4);b=k.toString(a[0]);e=k.toString(a[1]);var c=k.toString(a[2]);return(4===a.length?k.toBoolean(a[3]):1)?k.multiReplace(b,e,c):b.replace(e,c)})};b.domainname=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,2,4);if(a[0]instanceof
l)return a[0].domainValueLookup(k.toString(a[1]),a[2],void 0===a[3]?void 0:k.toNumber(a[3]));throw Error("Invalid Parameter");})};b.domaincode=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,2,4);if(a[0]instanceof l)return a[0].domainCodeLookup(k.toString(a[1]),a[2],void 0===a[3]?void 0:k.toNumber(a[3]));throw Error("Invalid Parameter");})};b.urlencode=function(b,e){return d(b,e,function(b,e,a){k.pcCheck(a,1,1);if(null===a[0])return"";if(a[0]instanceof n){b="";e=0;for(var c=a[0].keys();e<c.length;e++){var f=
c[e],d=a[0].field(f);""!==b&&(b+="\x26");b=null===d?b+(encodeURIComponent(f)+"\x3d"):b+(encodeURIComponent(f)+"\x3d"+encodeURIComponent(d))}return b}return encodeURIComponent(k.toString(a[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){function C(a,b){for(var c=[],e=0;e<b.arguments.length;e++)c.push(E(a,b.arguments[e]));return c}function F(a,b,c){try{return c(a,b,C(a,b))}catch(aa){throw aa;}}function E(a,f){try{switch(f.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var d=null===f.init?null:E(a,f.init);d===e.voidOperation&&(d=null);if("Identifier"!==f.id.type)throw Error("Can only assign a regular variable");var g=f.id.name.toLowerCase();null!==
a.localScope?a.localScope[g]={value:d,valueset:!0,node:f.init}:a.globalScope[g]={value:d,valueset:!0,node:f.init};return e.voidOperation;case "VariableDeclaration":for(var h=0;h<f.declarations.length;h++)E(a,f.declarations[h]);return e.voidOperation;case "BlockStatement":var p;a:{for(var m=e.voidOperation,h=0;h<f.body.length;h++)if(m=E(a,f.body[h]),m instanceof e.ReturnResult||m===e.breakResult||m===e.continueResult){p=m;break a}p=m}return p;case "FunctionDeclaration":var q=f.id.name.toLowerCase();
a.globalScope[q]={valueset:!0,node:null,value:new b(f,a)};return e.voidOperation;case "ReturnStatement":var u;if(null===f.argument)u=new e.ReturnResult(e.voidOperation);else{var t=E(a,f.argument);u=new e.ReturnResult(t)}return u;case "IfStatement":var z;if("AssignmentExpression"===f.test.type||"UpdateExpression"===f.test.type)throw Error(c.nodeErrorMessage(f.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var w=E(a,f.test);if(!0===w)z=E(a,f.consequent);else if(!1===w)z=null!==f.alternate?E(a,
f.alternate):e.voidOperation;else throw Error(c.nodeErrorMessage(f,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return z;case "ExpressionStatement":var x;if("AssignmentExpression"===f.expression.type||"UpdateExpression"===f.expression.type)x=E(a,f.expression);else{var y=E(a,f.expression);x=y===e.voidOperation?e.voidOperation:new e.ImplicitResult(y)}return x;case "AssignmentExpression":var v;var B=E(a,f.right),h=null,n="";if("MemberExpression"===f.left.type){h=E(a,f.left.object);!0===f.left.computed?
n=E(a,f.left.property):"Identifier"===f.left.property.type&&(n=f.left.property.name);if(e.isArray(h))if(e.isNumber(n)){0>n&&(n=h.length+n);if(0>n||n>h.length)throw Error("Assignment outside of array bounds");if(n===h.length&&"\x3d"!==f.operator)throw Error("Invalid Parameter");h[n]=L(B,f.operator,h[n],f)}else throw Error("Invalid Parameter");else if(h instanceof l){if(!1===e.isString(n))throw Error("Dictionary accessor must be a string");if(!0===h.hasField(n))h.setField(n,L(B,f.operator,h.field(n),
f));else{if("\x3d"!==f.operator)throw Error("Invalid Parameter");h.setField(n,L(B,f.operator,null,f))}}else if(h instanceof k){if(!1===e.isString(n))throw Error("Feature accessor must be a string");if(!0===h.hasField(n))h.setField(n,L(B,f.operator,h.field(n),f));else{if("\x3d"!==f.operator)throw Error("Invalid Parameter");h.setField(n,L(B,f.operator,null,f))}}else{if(e.isImmutableArray(h))throw Error("Array is Immutable");throw Error("Invalid Parameter");}v=e.voidOperation}else if(h=f.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[h])a.localScope[h]={value:L(B,f.operator,a.localScope[h].value,f),valueset:!0,node:f.right},v=e.voidOperation;else if(void 0!==a.globalScope[h])a.globalScope[h]={value:L(B,f.operator,a.globalScope[h].value,f),valueset:!0,node:f.right},v=e.voidOperation;else throw Error("Variable not recognised");return v;case "UpdateExpression":var C;var F,h=null,n="";if("MemberExpression"===f.argument.type){h=E(a,f.argument.object);!0===f.argument.computed?n=E(a,f.argument.property):
"Identifier"===f.argument.property.type&&(n=f.argument.property.name);if(e.isArray(h))if(e.isNumber(n)){0>n&&(n=h.length+n);if(0>n||n>=h.length)throw Error("Assignment outside of array bounds");F=e.toNumber(h[n]);h[n]="++"===f.operator?F+1:F-1}else throw Error("Invalid Parameter");else if(h instanceof l){if(!1===e.isString(n))throw Error("Dictionary accessor must be a string");if(!0===h.hasField(n))F=e.toNumber(h.field(n)),h.setField(n,"++"===f.operator?F+1:F-1);else throw Error("Invalid Parameter");
}else if(h instanceof k){if(!1===e.isString(n))throw Error("Feature accessor must be a string");if(!0===h.hasField(n))F=e.toNumber(h.field(n)),h.setField(n,"++"===f.operator?F+1:F-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(h))throw Error("Array is Immutable");throw Error("Invalid Parameter");}C=!1===f.prefix?F:"++"===f.operator?F+1:F-1}else{h="Identifier"===f.argument.type?f.argument.name.toLowerCase():"";if(!h)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[h])F=e.toNumber(a.localScope[h].value),a.localScope[h]={value:"++"===f.operator?F+1:F-1,valueset:!0,node:f},C=!1===f.prefix?F:"++"===f.operator?F+1:F-1;else if(void 0!==a.globalScope[h])F=e.toNumber(a.globalScope[h].value),a.globalScope[h]={value:"++"===f.operator?F+1:F-1,valueset:!0,node:f},C=!1===f.prefix?F:"++"===f.operator?F+1:F-1;else throw Error("Variable not recognised");}return C;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "ForStatement":null!==
f.init&&E(a,f.init);n={testResult:!0,lastAction:e.voidOperation};do b:{v=a;B=f;C=n;if(null!==B.test){C.testResult=E(v,B.test);if(!1===C.testResult)break b;if(!0!==C.testResult)throw Error(c.nodeErrorMessage(B,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}C.lastAction=E(v,B.body);C.lastAction===e.breakResult?C.testResult=!1:C.lastAction instanceof e.ReturnResult?C.testResult=!1:null!==B.update&&E(v,B.update)}while(!0===n.testResult);h=n.lastAction instanceof e.ReturnResult?n.lastAction:e.voidOperation;
return h;case "ForInStatement":return N(a,f);case "Identifier":return P(a,f);case "MemberExpression":return O(a,f);case "Literal":return f.value;case "CallExpression":return V(a,f);case "UnaryExpression":return I(a,f);case "BinaryExpression":return H(a,f);case "LogicalExpression":return S(a,f);case "ConditionalExpression":throw Error(c.nodeErrorMessage(f,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(h=[],n=0;n<f.elements.length;n++){var U=E(a,f.elements[n]);if(e.isFunctionParameter(U))throw Error(c.nodeErrorMessage(f,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));U===e.voidOperation?h.push(null):h.push(U)}}catch(ma){throw ma;}return h;case "ObjectExpression":h={};for(n=0;n<f.properties.length;n++){var J=E(a,f.properties[n]);if(e.isFunctionParameter(J.value))throw Error("Illegal Argument");if(!1===e.isString(J.key))throw Error("Illegal Argument");h[J.key.toString()]=J.value===e.voidOperation?null:J.value}var r=new l(h);r.immutable=!1;return r;case "Property":return{key:"Identifier"===f.key.type?f.key.name:E(a,f.key),value:E(a,
f.value)};default:throw Error(c.nodeErrorMessage(f,"RUNTIME","UNREOGNISED"));}}catch(ma){throw ma;}}function N(a,b){var f=E(a,b.right);"VariableDeclaration"===b.left.type&&E(a,b.left);var d=null,g="";if("VariableDeclaration"===b.left.type){var h=b.left.declarations[0].id;"Identifier"===h.type&&(g=h.name)}else"Identifier"===b.left.type&&(g=b.left.name);if(!g)throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));g=g.toLowerCase();null!==a.localScope&&void 0!==a.localScope[g]&&(d=a.localScope[g]);
null===d&&void 0!==a.globalScope[g]&&(d=a.globalScope[g]);if(null===d)throw Error(c.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(f)||e.isString(f)){f=f.length;for(h=0;h<f;h++){d.value=h;g=E(a,b.body);if(g===e.breakResult)break;if(g instanceof e.ReturnResult)return g}return e.voidOperation}if(e.isImmutableArray(f)){for(h=0;h<f.length();h++){d.value=h;g=E(a,b.body);if(g===e.breakResult)break;if(g instanceof e.ReturnResult)return g}return e.voidOperation}if(f instanceof l||f instanceof
k)for(f=f.keys(),h=0;h<f.length;h++){d.value=f[h];g=E(a,b.body);if(g===e.breakResult)break;if(g instanceof e.ReturnResult)return g}else return e.voidOperation}function L(a,b,f,d){switch(b){case "\x3d":return a===e.voidOperation?null:a;case "/\x3d":return e.toNumber(f)/e.toNumber(a);case "*\x3d":return e.toNumber(f)*e.toNumber(a);case "-\x3d":return e.toNumber(f)-e.toNumber(a);case "+\x3d":return e.isString(f)||e.isString(a)?e.toString(f)+e.toString(a):e.toNumber(f)+e.toNumber(a);case "%\x3d":return e.toNumber(f)%
e.toNumber(a);default:throw Error(c.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function K(a,b,e,f){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(e=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(e=!1),e&&(G++,b=a.spatialReference._arcadeCacheId=G)),a=new l({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId=
"SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(G++,b=G,a.cache._arcadeCacheId=b),a=new h(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==
a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(G++,b=G,a.cache._arcadeCacheId=b),a=new h(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(G++,b=G,a.cache._arcadeCacheId=b),a=new g(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(c.nodeErrorMessage(f,
"RUNTIME","PROPERTYNOTFOUND"));}function O(a,b){try{var f=E(a,b.object);if(null===f)throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(f instanceof l||f instanceof k)return f.field(b.property.name);if(f instanceof x)return K(f,b.property.name,a,b)}throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var d=E(a,b.property);if(f instanceof l||f instanceof k){if(e.isString(d))return f.field(d);throw Error(c.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}if(f instanceof x){if(e.isString(d))return K(f,d,a,b);throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(e.isArray(f)){if(e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=f.length+d);if(d>=f.length||0>d)throw Error(c.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return f[d]}throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(e.isString(f)){if(e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=f.length+d);if(d>=f.length||0>d)throw Error(c.nodeErrorMessage(b,
"RUNTIME","OUTOFBOUNDS"));return f[d]}throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(f)&&e.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=f.length()+d);if(d>=f.length()||0>d)throw Error(c.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return f.get(d)}throw Error(c.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(ga){throw ga;}}function I(a,b){try{var f=E(a,b.argument);if(e.isBoolean(f)){if("!"===b.operator)return!f;if("-"===b.operator)return-1*e.toNumber(f);
if("+"===b.operator)return 1*e.toNumber(f);throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*e.toNumber(f);if("+"===b.operator)return 1*e.toNumber(f);throw Error(c.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(aa){throw aa;}}function H(a,b){try{var f=[E(a,b.left),E(a,b.right)],d=f[0],g=f[1];switch(b.operator){case "\x3d\x3d":return e.equalityTest(d,g);case "!\x3d":return!e.equalityTest(d,g);case "\x3c":return e.greaterThanLessThan(d,
g,b.operator);case "\x3e":return e.greaterThanLessThan(d,g,b.operator);case "\x3c\x3d":return e.greaterThanLessThan(d,g,b.operator);case "\x3e\x3d":return e.greaterThanLessThan(d,g,b.operator);case "+":return e.isString(d)||e.isString(g)?e.toString(d)+e.toString(g):e.toNumber(d)+e.toNumber(g);case "-":return e.toNumber(d)-e.toNumber(g);case "*":return e.toNumber(d)*e.toNumber(g);case "/":return e.toNumber(d)/e.toNumber(g);case "%":return e.toNumber(d)%e.toNumber(g);default:throw Error(c.nodeErrorMessage(b,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ia){throw ia;}}function S(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(c.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(c.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var f=E(a,b.left);if(e.isBoolean(f))switch(b.operator){case "||":if(!0===f)return f;var d=E(a,b.right);
if(e.isBoolean(d))return d;throw Error(c.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===f)return f;d=E(a,b.right);if(e.isBoolean(d))return d;throw Error(c.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(c.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(c.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(ga){throw ga;}}function P(a,b){var e;try{var f=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[f]){e=a.localScope[f];if(!0===e.valueset)return e.value;
e.value=E(a,e.node);e.valueset=!0;return e.value}if(void 0!==a.globalScope[f]){e=a.globalScope[f];if(!0===e.valueset)return e.value;e.value=E(a,e.node);e.valueset=!0;return e.value}throw Error(c.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ga){throw ga;}}function V(a,f){try{if("Identifier"!==f.callee.type)throw Error(c.nodeErrorMessage(f,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[f.callee.name.toLowerCase()]){var d=a.localScope[f.callee.name.toLowerCase()];
if(d.value instanceof e.NativeFunction)return d.value.fn(a,f);if(d.value instanceof b)return U(a,f,d.value.definition);throw Error(c.nodeErrorMessage(f,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[f.callee.name.toLowerCase()]){d=a.globalScope[f.callee.name.toLowerCase()];if(d.value instanceof e.NativeFunction)return d.value.fn(a,f);if(d.value instanceof b)return U(a,f,d.value.definition);throw Error(c.nodeErrorMessage(f,"RUNTIME","NOTAFUNCTION"));}throw Error(c.nodeErrorMessage(f,"RUNTIME",
"NOTFOUND"));}catch(aa){throw aa;}}function T(a){return null==a?"":e.isArray(a)||e.isImmutableArray(a)?"Array":e.isDate(a)?"Date":e.isString(a)?"String":e.isBoolean(a)?"Boolean":e.isNumber(a)?"Number":a instanceof n?"Attachment":a instanceof l?"Dictionary":a instanceof k?"Feature":a instanceof m?"Point":a instanceof u?"Polygon":a instanceof z?"Polyline":a instanceof w?"Multipoint":a instanceof y?"Extent":e.isFunctionParameter(a)?"Function":e.isFeatureSet(a)?"FeatureSet":e.isFeatureSetCollection(a)?
"FeatureSetCollection":a===e.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function Z(a,b,c,f){try{var d=E(a,b.arguments[c]);if(e.equalityTest(d,f))return E(a,b.arguments[c+1]);var g=b.arguments.length-c;return 1===g?E(a,b.arguments[c]):2===g?null:3===g?E(a,b.arguments[c+2]):Z(a,b,c+2,f)}catch(sa){throw sa;}}function Q(a,b,c,f){try{if(!0===f)return E(a,b.arguments[c+1]);if(3===b.arguments.length-c)return E(a,b.arguments[c+2]);var d=E(a,b.arguments[c+2]);if(!1===e.isBoolean(d))throw Error("WHEN needs boolean test conditions");
return Q(a,b,c+2,d)}catch(ia){throw ia;}}function J(a,b){var c=a.length,e=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var f=J(a.slice(0,e),b);a=J(a.slice(e,c),b);for(c=[];0<f.length||0<a.length;)0<f.length&&0<a.length?(e=b(f[0],a[0]),isNaN(e)&&(e=0),0>=e?(c.push(f[0]),f=f.slice(1)):(c.push(a[0]),a=a.slice(1))):0<f.length?(c.push(f[0]),f=f.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function R(a,b,c){try{var f=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");
for(var d=0;d<c.length;d++)b.localScope[a.params[d].name.toLowerCase()]={value:c[d],valueset:!0,node:null};var g=E(b,f);if(g instanceof e.ReturnResult)return g.value;if(g===e.breakResult)throw Error("Cannot Break from a Function");if(g===e.continueResult)throw Error("Cannot Continue from a Function");return g instanceof e.ImplicitResult?g.value:g}catch(sa){throw sa;}}function U(a,b,c){return F(a,b,function(b,e,f){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return R(c,b,f)})}function X(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return R(a.definition,b,arguments)}}function ca(a){console.log(a)}Object.defineProperty(d,
"__esModule",{value:!0});var G=0,Y={};f.registerFunctions(Y,F);t.registerFunctions(Y,F);q.registerFunctions(Y,F);a.registerFunctions(Y,F);v.registerFunctions(Y,F);p.registerFunctions(Y,F);Y["typeof"]=function(a,b){return F(a,b,function(a,b,c){e.pcCheck(c,1,1);a=T(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Y.iif=function(a,b){try{e.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=E(a,b.arguments[0]);if(!1===e.isBoolean(c))throw Error("IF Function must have a boolean test condition");
var f=E(a,b.arguments[1]),d=E(a,b.arguments[2]);return!0===c?f:d}catch(ia){throw ia;}};Y.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return E(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=E(a,b.arguments[0]);return Z(a,b,1,c)}catch(aa){throw aa;}};Y.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");
var c=E(a,b.arguments[0]);if(!1===e.isBoolean(c))throw Error("WHEN needs boolean test conditions");return Q(a,b,0,c)}catch(aa){throw aa;}};Y.top=function(a,b){return F(a,b,function(a,b,c){e.pcCheck(c,2,2);if(e.isArray(c[0]))return e.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));if(e.isImmutableArray(c[0]))return e.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};Y.first=function(a,b){return F(a,
b,function(a,b,c){e.pcCheck(c,1,1);return e.isArray(c[0])?0===c[0].length?null:c[0][0]:e.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};Y.sort=function(a,b){return F(a,b,function(a,b,c){e.pcCheck(c,1,2);a=c[0];e.isImmutableArray(a)&&(a=a.toArray());if(!1===e.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===e.isFunctionParameter(c[1]))throw Error("Illegal Argument");var f=X(c[1]);return a=J(a,function(a,b){return f(a,b)})}if(0===a.length)return[];c={};for(b=0;b<
a.length;b++){var d=T(a[b]);""!==d&&(c[d]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var d="",g;for(g in c)b++,d=g;return a=1<b||"String"===d?J(a,function(a,b){if(null===a||void 0===a||a===e.voidOperation)return null===b||void 0===b||b===e.voidOperation?0:1;if(null===b||void 0===b||b===e.voidOperation)return-1;a=e.toString(a);b=e.toString(b);return a<b?-1:a===b?0:1}):
"Number"===d?J(a,function(a,b){return a-b}):"Boolean"===d?J(a,function(a,b){return a===b?0:b?-1:1}):"Date"===d?J(a,function(a,b){return b-a}):a.slice(0)})};for(var la in Y)Y[la]={value:new e.NativeFunction(Y[la]),valueset:!0,node:null};var ja=function(){};ja.prototype=Y;ja.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ja.prototype.pi={value:Math.PI,valueset:!0,node:null};d.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:C,standardFunction:F};d.extend=
function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:P,arcadeCustomFunctionHandler:X},f=0;f<a.length;f++)a[f].registerFunctions(b);for(var d in b.functions)Y[d]={value:new e.NativeFunction(b.functions[d]),valueset:!0,node:null},ja.prototype[d]=Y[d];for(f=0;f<b.signatures.length;f++)c.addFunctionDeclaration(b.signatures[f],"async")};d.executeScript=function(a,c){var f=c.spatialReference;if(null===f||void 0===f)f=new B({wkid:102100});var d=
c.vars,g=c.customfunctions,h=new ja;d||(d={});g||(g={});var p=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;h.textformatting={value:p,valueset:!0,node:null};for(var m in g)h[m]={value:new e.NativeFunction(g[m]),native:!0,valueset:!0,node:null};for(m in d)h[m]=d[m]&&"esri.Graphic"===d[m].declaredClass?{value:k.createFromGraphic(d[m]),valueset:!0,node:null}:{value:d[m],valueset:!0,node:null};a=E({spatialReference:f,globalScope:h,localScope:null,
console:c.console?c.console:ca,lrucache:c.lrucache,depthCounter:1},a.body[0].body);a instanceof e.ReturnResult&&(a=a.value);a instanceof e.ImplicitResult&&(a=a.value);a===e.voidOperation&&(a=null);if(a===e.breakResult)throw Error("Cannot return BREAK");if(a===e.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof b)throw Error("Cannot return FUNCTION");if(a instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return a};d.extractFieldLiterals=function(a,b){void 0===b&&
(b=!1);return c.findFieldLiterals(a,b)};d.validateScript=function(a,b){return c.validateScript(a,b,"simple")};d.referencesMember=function(a,b){return c.referencesMember(a,b)};d.referencesFunction=function(a,b){return c.referencesFunction(a,b)};d.findFunctionCalls=function(a){return c.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.parseScript=function(d,b){void 0===
b&&(b=[]);d=l.parse("function _() { "+d+"\n}");if(null===d.body||void 0===d.body)throw Error("No formula provided.");if(0===d.body.length)throw Error("No formula provided.");if(0===d.body.length)throw Error("No formula provided.");if("BlockStatement"!==d.body[0].body.type)throw Error("Invalid formula content.");var h=n.validateLanguage(d);if(""!==h)throw Error(h);n.findScriptDependencies(d,b);return d};d.scriptCheck=function(d,b,h,g,e){var c=[];try{var f=l.parse("function _() { "+d+"\n}",{tolerant:!0,
loc:!0}),a=f.errors;if(0<a.length)for(var k=0;k<a.length;k++)c.push({line:a[k].lineNumber,character:a[k].column,reason:a[k].description});var q=n.checkScript(f,b,h,g,e);for(b=0;b<q.length;b++)c.push(q[b])}catch(v){try{"Unexpected token }"===v.description?(v.index=("function _() { "+d+"\n}").length-1,c.push({line:v.lineNumber,character:v.column,reason:"Unexpected end of script"})):c.push({line:v.lineNumber,character:v.column,reason:v.description})}catch(t){}}return c};d.extractFieldLiterals=function(d,
b){void 0===b&&(b=!1);return n.findFieldLiterals(d,b)};d.validateScript=function(d,b,h){return n.validateScript(d,b,h)};d.referencesMember=function(d,b){return n.referencesMember(d,b)};d.referencesFunction=function(d,b){return n.referencesFunction(d,b)}})},"esri/arcade/lib/esprima":function(){(function(r,d){"function"===typeof define&&define.amd?define(["exports"],d):"undefined"!==typeof exports?d(exports):d(r.esprima={})})(this,function(r){function d(a,b){if(!a)throw Error("ASSERT: "+b);}function n(a){return 48<=
a&&57>=a}function l(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function k(a){return 0<="01234567".indexOf(a)}function b(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Fa.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function g(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Fa.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function e(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===
a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function c(a,b,c,e,f){d("number"===typeof c,"Comment must have valid position");za.lastCommentStart>=c||(za.lastCommentStart=c,a={type:a,value:b},fa.range&&(a.range=[c,e]),fa.loc&&(a.loc=f),fa.comments.push(a),fa.attachComment&&(fa.leadingComments.push(a),fa.trailingComments.push(a)))}function f(a){var e,
f,d;e=ba-a;for(f={start:{line:Ea,column:ba-Ha-a}};ba<Ga;)if(d=oa.charCodeAt(ba),++ba,b(d)){fa.comments&&(a=oa.slice(e+a,ba-1),f.end={line:Ea,column:ba-Ha-1},c("Line",a,e,ba-1,f));13===d&&10===oa.charCodeAt(ba)&&++ba;++Ea;Ha=ba;return}fa.comments&&(a=oa.slice(e+a,ba),f.end={line:Ea,column:ba-Ha},c("Line",a,e,ba,f))}function a(){var a,e;for(e=0===ba;ba<Ga;)if(a=oa.charCodeAt(ba),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,
8287,12288,65279].indexOf(a))++ba;else if(b(a))++ba,13===a&&10===oa.charCodeAt(ba)&&++ba,++Ea,Ha=ba,e=!0;else if(47===a)if(a=oa.charCodeAt(ba+1),47===a)++ba,++ba,f(2),e=!0;else if(42===a){++ba;++ba;a:{var d=a=void 0,g=void 0,g=void 0;fa.comments&&(a=ba-2,d={start:{line:Ea,column:ba-Ha-2}});for(;ba<Ga;)if(g=oa.charCodeAt(ba),b(g))13===g&&10===oa.charCodeAt(ba+1)&&++ba,++Ea,++ba,Ha=ba,ba>=Ga&&P();else{if(42===g&&47===oa.charCodeAt(ba+1)){++ba;++ba;fa.comments&&(g=oa.slice(a+2,ba-2),d.end={line:Ea,column:ba-
Ha},c("Block",g,a,ba,d));break a}++ba}P()}}else break;else if(e&&45===a)if(45===oa.charCodeAt(ba+1)&&62===oa.charCodeAt(ba+2))ba+=3,f(3);else break;else if(60===a)if("!--"===oa.slice(ba+1,ba+4))++ba,++ba,++ba,++ba,f(4);else break;else break}function p(a){var b,c,e=0;b="u"===a?4:2;for(a=0;a<b;++a)if(ba<Ga&&l(oa[ba]))c=oa[ba++],e=16*e+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(e)}function q(){var a,b;a=oa.charCodeAt(ba++);b=String.fromCharCode(a);92===a&&(117!==
oa.charCodeAt(ba)&&P(),++ba,(a=p("u"))&&"\\"!==a&&h(a.charCodeAt(0))||P(),b=a);for(;ba<Ga;){a=oa.charCodeAt(ba);if(!g(a))break;++ba;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==oa.charCodeAt(ba)&&P(),++ba,(a=p("u"))&&"\\"!==a&&g(a.charCodeAt(0))||P(),b+=a)}return b}function v(){var a=ba,b=oa.charCodeAt(ba),c,e=oa[ba];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ba,fa.tokenize&&(40===b?fa.openParenToken=fa.tokens.length:
123===b&&(fa.openCurlyToken=fa.tokens.length)),{type:ma.Punctuator,value:String.fromCharCode(b),lineNumber:Ea,lineStart:Ha,start:a,end:ba};default:if(c=oa.charCodeAt(ba+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ba+=2,{type:ma.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:Ea,lineStart:Ha,start:a,end:ba};case 33:case 61:return ba+=2,61===oa.charCodeAt(ba)&&++ba,{type:ma.Punctuator,value:oa.slice(a,ba),lineNumber:Ea,
lineStart:Ha,start:a,end:ba}}}b=oa.substr(ba,4);if("\x3e\x3e\x3e\x3d"===b)return ba+=4,{type:ma.Punctuator,value:b,lineNumber:Ea,lineStart:Ha,start:a,end:ba};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return ba+=3,{type:ma.Punctuator,value:b,lineNumber:Ea,lineStart:Ha,start:a,end:ba};b=b.substr(0,2);if(e===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(e)||"\x3d\x3e"===b)return ba+=2,{type:ma.Punctuator,value:b,lineNumber:Ea,lineStart:Ha,start:a,end:ba};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(e))return++ba,
{type:ma.Punctuator,value:e,lineNumber:Ea,lineStart:Ha,start:a,end:ba};P()}function t(){var a,b,c;c=oa[ba];d(n(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=ba;a="";if("."!==c){a=oa[ba++];c=oa[ba];if("0"===a){if("x"===c||"X"===c){++ba;for(a="";ba<Ga&&l(oa[ba]);)a+=oa[ba++];0===a.length&&P();h(oa.charCodeAt(ba))&&P();return{type:ma.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:Ea,lineStart:Ha,start:b,end:ba}}if("b"===c||"B"===c){++ba;for(c=
"";ba<Ga;){a=oa[ba];if("0"!==a&&"1"!==a)break;c+=oa[ba++]}0===c.length&&P();ba<Ga&&(a=oa.charCodeAt(ba),(h(a)||n(a))&&P());return{type:ma.NumericLiteral,value:parseInt(c,2),lineNumber:Ea,lineStart:Ha,start:b,end:ba}}if("o"===c||"O"===c){k(c)?(c=!0,a="0"+oa[ba++]):(c=!1,++ba,a="");for(;ba<Ga&&k(oa[ba]);)a+=oa[ba++];c||0!==a.length||P();(h(oa.charCodeAt(ba))||n(oa.charCodeAt(ba)))&&P();return{type:ma.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:Ea,lineStart:Ha,start:b,end:ba}}}for(;n(oa.charCodeAt(ba));)a+=
oa[ba++];c=oa[ba]}if("."===c){for(a+=oa[ba++];n(oa.charCodeAt(ba));)a+=oa[ba++];c=oa[ba]}if("e"===c||"E"===c){a+=oa[ba++];c=oa[ba];if("+"===c||"-"===c)a+=oa[ba++];if(n(oa.charCodeAt(ba)))for(;n(oa.charCodeAt(ba));)a+=oa[ba++];else P()}h(oa.charCodeAt(ba))&&P();return{type:ma.NumericLiteral,value:parseFloat(a),lineNumber:Ea,lineStart:Ha,start:b,end:ba}}function y(){qa=null;a();I("Regular Expression language structures not supported")}function x(){a();y()}function w(){var a;a=fa.tokens[fa.tokens.length-
1];if(!a)return x();if("Punctuator"===a.type){if("]"===a.value)return v();if(")"===a.value)return a=fa.tokens[fa.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?v():x();if("}"===a.value){if(fa.tokens[fa.openCurlyToken-3]&&"Keyword"===fa.tokens[fa.openCurlyToken-3].type){if(a=fa.tokens[fa.openCurlyToken-4],!a)return v()}else if(fa.tokens[fa.openCurlyToken-4]&&"Keyword"===fa.tokens[fa.openCurlyToken-
4].type){if(a=fa.tokens[fa.openCurlyToken-5],!a)return x()}else return v();if(0<=Xa.indexOf(a.value))return v()}return x()}return"Keyword"===a.type&&"this"!==a.value?x():v()}function m(){var c;a();if(ba>=Ga)return{type:ma.EOF,lineNumber:Ea,lineStart:Ha,start:ba,end:ba};c=oa.charCodeAt(ba);if(h(c)){var f;c=ba;if(92===oa.charCodeAt(ba))f=q();else a:{var m;for(f=ba++;ba<Ga;){m=oa.charCodeAt(ba);if(92===m){ba=f;f=q();break a}if(g(m))++ba;else break}f=oa.slice(f,ba)}return{type:1===f.length?ma.Identifier:
e(f)?ma.Keyword:"null"===f.toLowerCase()?ma.NullLiteral:"true"===f.toLowerCase()||"false"===f.toLowerCase()?ma.BooleanLiteral:ma.Identifier,value:f,lineNumber:Ea,lineStart:Ha,start:c,end:ba}}if(40===c||41===c||59===c)return v();if(39===c||34===c){var u="",z,x,y;m=!1;var B,H;B=Ea;H=Ha;c=oa[ba];d("'"===c||'"'===c,"String literal must starts with a quote");f=ba;for(++ba;ba<Ga;)if(z=oa[ba++],z===c){c="";break}else if("\\"===z)if((z=oa[ba++])&&b(z.charCodeAt(0)))++Ea,"\r"===z&&"\n"===oa[ba]&&++ba,Ha=ba;
else switch(z){case "u":case "x":if("{"===oa[ba]){++ba;x=z=void 0;z=oa[ba];x=0;for("}"===z&&P();ba<Ga;){z=oa[ba++];if(!l(z))break;x=16*x+"0123456789abcdef".indexOf(z.toLowerCase())}(1114111<x||"}"!==z)&&P();z=65535>=x?String.fromCharCode(x):String.fromCharCode((x-65536>>10)+55296,(x-65536&1023)+56320);u+=z}else y=ba,(x=p(z))?u+=x:(ba=y,u+=z);break;case "n":u+="\n";break;case "r":u+="\r";break;case "t":u+="\t";break;case "b":u+="\b";break;case "f":u+="\f";break;case "v":u+="\x0B";break;default:k(z)?
(x="01234567".indexOf(z),0!==x&&(m=!0),ba<Ga&&k(oa[ba])&&(m=!0,x=8*x+"01234567".indexOf(oa[ba++]),0<="0123".indexOf(z)&&ba<Ga&&k(oa[ba])&&(x=8*x+"01234567".indexOf(oa[ba++]))),u+=String.fromCharCode(x)):u+=z}else if(b(z.charCodeAt(0)))break;else u+=z;""!==c&&P();return{type:ma.StringLiteral,value:u,octal:m,startLineNumber:B,startLineStart:H,lineNumber:Ea,lineStart:Ha,start:f,end:ba}}return 46===c?n(oa.charCodeAt(ba+1))?t():v():n(c)?t():fa.tokenize&&47===c?w():v()}function u(){var b,c,e;a();b={start:{line:Ea,
column:ba-Ha}};c=m();b.end={line:Ea,column:ba-Ha};c.type!==ma.EOF&&(e=oa.slice(c.start,c.end),b={type:Ya[c.type],value:e,range:[c.start,c.end],loc:b},c.regex&&(b.regex={pattern:c.regex.pattern,flags:c.regex.flags}),fa.tokens.push(b));return c}function z(){var a;a=qa;ba=a.end;Ea=a.lineNumber;Ha=a.lineStart;qa="undefined"!==typeof fa.tokens?u():m();ba=a.end;Ea=a.lineNumber;Ha=a.lineStart;return a}function B(){var a,b,c;a=ba;b=Ea;c=Ha;qa="undefined"!==typeof fa.tokens?u():m();ba=a;Ea=b;Ha=c}function C(){this.line=
Ea;this.column=ba-Ha}function F(){this.start=new C;this.end=null}function E(a){this.start=a.type===ma.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function N(){ba=qa.start;qa.type===ma.StringLiteral?(Ea=qa.startLineNumber,Ha=qa.startLineStart):(Ea=qa.lineNumber,Ha=qa.lineStart);fa.range&&(this.range=[ba,0]);fa.loc&&(this.loc=new F)}function L(a){fa.range&&(this.range=[a.start,0]);fa.loc&&(this.loc=new E(a))}function K(){var b,
c,e,f;b=ba;c=Ea;e=Ha;a();f=Ea!==c;ba=b;Ea=c;Ha=e;return f}function O(a,b,c){var e=Error("Line "+a+": "+c);e.index=b;e.lineNumber=a;e.column=b-Ha+1;e.description=c;return e}function I(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){d(c<b.length,"Message reference must be in range");return b[c]});throw O(Ea,ba,c);}function H(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){d(c<b.length,"Message reference must be in range");
return b[c]});c=O(Ea,ba,c);if(fa.errors)fa.errors.push(c);else throw c;}function S(a,b){var c=ka.UnexpectedToken;a&&(c=b?b:a.type===ma.EOF?ka.UnexpectedEOS:a.type===ma.Identifier?ka.UnexpectedIdentifier:a.type===ma.NumericLiteral?ka.UnexpectedNumber:a.type===ma.StringLiteral?ka.UnexpectedString:ka.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?O(a.lineNumber,a.start,c):O(Ea,ba,c)}function P(a,b){throw S(a,b);}function V(a,b){a=S(a,b);if(fa.errors)fa.errors.push(a);
else throw a;}function T(a){var b=z();b.type===ma.Punctuator&&b.value===a||P(b)}function Z(){var a;fa.errors?(a=qa,a.type===ma.Punctuator&&","===a.value?z():a.type===ma.Punctuator&&";"===a.value?(z(),V(a)):V(a,ka.UnexpectedToken)):T(",")}function Q(a){var b=z();b.type===ma.Keyword&&b.value.toLowerCase()===a.toLowerCase()||P(b)}function J(a){return qa.type===ma.Punctuator&&qa.value===a}function R(a){return qa.type===ma.Keyword&&qa.value.toLowerCase()===a.toLowerCase()}function U(){var b;59===oa.charCodeAt(ba)||
J(";")?z():(b=Ea,a(),Ea===b&&(qa.type===ma.EOF||J("}")||P(qa)))}function X(a){return a.type===ya.Identifier||a.type===ya.MemberExpression}function ca(a,b){var c,e=new N;b=La;c=Ka();La=b;return e.finishFunctionExpression(null,a,[],c)}function G(){var a,b;a=La;La=!0;b=Oa();b=ca(b.params);La=a;return b}function Y(){var a,b=new N;a=z();return a.type===ma.StringLiteral||a.type===ma.NumericLiteral?(La&&a.octal&&V(a,ka.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function la(){var a,
b,c,e=new N;a=qa;if(a.type===ma.Identifier)return b=Y(),"get"!==a.value||J(":")||J("(")?"set"!==a.value||J(":")||J("(")?J(":")?(z(),a=Ia(),e.finishProperty("init",b,a,!1,!1)):J("(")?(a=G(),e.finishProperty("init",b,a,!0,!1)):e.finishProperty("init",b,b,!1,!0):(b=Y(),T("("),a=qa,a.type!==ma.Identifier?(T(")"),V(a),a=ca([])):(c=[wa()],T(")"),a=ca(c,a)),e.finishProperty("set",b,a,!1,!1)):(b=Y(),T("("),T(")"),a=ca([]),e.finishProperty("get",b,a,!1,!1));if(a.type===ma.EOF||a.type===ma.Punctuator)P(a);
else{b=Y();if(J(":"))return z(),a=Ia(),e.finishProperty("init",b,a,!1,!1);if(J("("))return a=G(),e.finishProperty("init",b,a,!0,!1);P(z())}}function ja(a){var b=[],c,e,f={},d=String,g=new N;for(!0!==a&&T("{");!J("}");)a=la(),c=a.key.type===ya.Identifier?a.key.name:d(a.key.value),e="init"===a.kind?Da.Data:"get"===a.kind?Da.Get:Da.Set,c="$"+c,Object.prototype.hasOwnProperty.call(f,c)?(f[c]===Da.Data?La&&e===Da.Data?H(ka.StrictDuplicateProperty):e!==Da.Data&&H(ka.AccessorDataProperty):e===Da.Data?H(ka.AccessorDataProperty):
f[c]&e&&H(ka.AccessorGetSet),f[c]|=e):f[c]=e,b.push(a),J("}")||Z();T("}");return g.finishObjectExpression(b)}function na(){var a,b,c,e;if(J("("))return T("("),J(")")?(z(),b=Pa.ArrowParameterPlaceHolder):(++za.parenthesisCount,b=ra(),T(")")),b;if(J("[")){b=[];var f=new N;for(T("[");!J("]");)J(",")?(z(),b.push(null)):(b.push(Ia()),J("]")||T(","));z();return f.finishArrayExpression(b)}if(J("{"))return ja();a=qa.type;e=new N;if(a===ma.Identifier)c=e.finishIdentifier(z().value);else if(a===ma.StringLiteral||
a===ma.NumericLiteral)La&&qa.octal&&V(qa,ka.StrictOctalLiteral),c=e.finishLiteral(z());else if(a===ma.Keyword){if(R("function")){e=null;var d;c=[];var g=[],h,k=new N;Q("function");J("(")||(e=wa());d=Oa(b);c=d.params;g=d.defaults;a=d.stricted;b=d.firstRestricted;d.message&&(f=d.message);h=La;d=Ka();La&&b&&P(b,f);La&&a&&V(a,f);La=h;return k.finishFunctionExpression(e,c,g,d)}R("this")?(z(),c=e.finishThisExpression()):P(z())}else a===ma.BooleanLiteral?(b=z(),b.value="true"===b.value.toLowerCase(),c=e.finishLiteral(b)):
a===ma.NullLiteral?(b=z(),b.value=null,c=e.finishLiteral(b)):J("/")||J("/\x3d")?(c="undefined"!==typeof fa.tokens?e.finishLiteral(x()):e.finishLiteral(y()),B()):P(z());return c}function pa(){var a=[];T("(");if(!J(")"))for(;ba<Ga;){a.push(Ia());if(J(")"))break;Z()}T(")");return a}function ta(){T(".");var a,b=new N;a=z();a.type===ma.Identifier||a.type===ma.Keyword||a.type===ma.BooleanLiteral||a.type===ma.NullLiteral||P(a);return b.finishIdentifier(a.value)}function aa(){var a;T("[");a=ra();T("]");return a}
function ga(){var a,b,c=new N;Q("new");var e;d(za.allowIn,"callee of new expression always allow in keyword.");e=qa;for(a=R("new")?ga():na();;)if(J("["))b=aa(),a=(new L(e)).finishMemberExpression("[",a,b);else if(J("."))b=ta(),a=(new L(e)).finishMemberExpression(".",a,b);else break;b=J("(")?pa():[];return c.finishNewExpression(a,b)}function ia(){var a,b,c=qa,e,f=za.allowIn;b=qa;za.allowIn=!0;for(a=R("new")?ga():na();;)if(J("."))e=ta(),a=(new L(b)).finishMemberExpression(".",a,e);else if(J("("))e=
pa(),a=(new L(b)).finishCallExpression(a,e);else if(J("["))e=aa(),a=(new L(b)).finishMemberExpression("[",a,e);else break;za.allowIn=f;qa.type!==ma.Punctuator||!J("++")&&!J("--")||K()||(X(a)||H(ka.InvalidLHSInAssignment),b=z(),a=(new L(c)).finishPostfixExpression(b.value,a));return a}function sa(){var a,b,c;qa.type!==ma.Punctuator&&qa.type!==ma.Keyword?b=ia():J("++")||J("--")?(c=qa,a=z(),b=sa(),X(b)||H(ka.InvalidLHSInAssignment),b=(new L(c)).finishUnaryExpression(a.value,b)):J("+")||J("-")||J("~")||
J("!")?(c=qa,a=z(),b=sa(),b=(new L(c)).finishUnaryExpression(a.value,b)):R("delete")||R("void")||R("typeof")?(c=qa,a=z(),b=sa(),b=(new L(c)).finishUnaryExpression(a.value,b),La&&"delete"===b.operator&&b.argument.type===ya.Identifier&&H(ka.StrictDelete)):b=ia();return b}function Aa(a,b){var c=0;if(a.type!==ma.Punctuator&&a.type!==ma.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ba(){var a,b,c,e,f,d;a=qa;b=sa();if(b===Pa.ArrowParameterPlaceHolder)return b;c=qa;e=Aa(c,za.allowIn);if(0===e)return b;c.prec=e;z();a=[a,qa];d=sa();for(f=[b,c,d];0<(e=Aa(qa,za.allowIn));){for(;2<f.length&&e<=f[f.length-2].prec;)d=f.pop(),c=f.pop().value,
b=f.pop(),a.pop(),b=(new L(a[a.length-1])).finishBinaryExpression(c,b,d),f.push(b);c=z();c.prec=e;f.push(c);a.push(qa);b=sa();f.push(b)}e=f.length-1;b=f[e];for(a.pop();1<e;)b=(new L(a.pop())).finishBinaryExpression(f[e-1].value,f[e-2],b),e-=2;return b}function Ca(a){var b,c,e,f,d,g,h;f=[];d=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(e=a[b],e.type===ya.Identifier)f.push(e),d.push(null),ea(h,e,e.name);else if(e.type===ya.AssignmentExpression)f.push(e.left),d.push(e.right),++g,ea(h,e.left,
e.left.name);else return null;h.message===ka.StrictParamDupe&&(a=La?h.stricted:h.firstRestricted,P(a,h.message));0===g&&(d=[]);return{params:f,defaults:d,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function Ia(){var a,b,c,e,f;a=za.parenthesisCount;b=f=qa;var d,g;g=qa;c=Ba();c!==Pa.ArrowParameterPlaceHolder&&J("?")&&(z(),d=za.allowIn,za.allowIn=!0,b=Ia(),za.allowIn=d,T(":"),d=Ia(),c=(new L(g)).finishConditionalExpression(c,b,d));if(c===Pa.ArrowParameterPlaceHolder||
J("\x3d\x3e"))if(za.parenthesisCount===a||za.parenthesisCount===a+1)if(c.type===ya.Identifier?e=Ca([c]):c.type===ya.AssignmentExpression?e=Ca([c]):c.type===ya.SequenceExpression?e=Ca(c.expressions):c===Pa.ArrowParameterPlaceHolder&&(e=Ca([])),e)return a=e,f=new L(f),T("\x3d\x3e"),e=La,c=J("{")?Ka():Ia(),La&&a.firstRestricted&&P(a.firstRestricted,a.message),La&&a.stricted&&V(a.stricted,a.message),La=e,f.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ya.BlockStatement);qa.type!==ma.Punctuator?
a=!1:(a=qa.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(X(c)||H(ka.InvalidLHSInAssignment),b=z(),a=Ia(),c=(new L(f)).finishAssignmentExpression(b.value,c,a));return c}function ra(){var a,b=qa;a=Ia();if(J(",")){for(a=[a];ba<Ga&&J(",");)z(),a.push(Ia());a=(new L(b)).finishSequenceExpression(a)}return a}function wa(){var a,b=new N;a=z();a.type!==ma.Identifier&&
P(a);return b.finishIdentifier(a.value)}function xa(a){var b=null,c,e=new N;c=wa();"const"===a?(T("\x3d"),b=Ia()):J("\x3d")&&(z(),b=Ia());return e.finishVariableDeclarator(c,b)}function va(a){var b=[];do{b.push(xa(a));if(!J(","))break;z()}while(ba<Ga);return b}function ua(a){var b=qa.type,c,e;b===ma.EOF&&P(qa);if(b===ma.Punctuator&&"{"===qa.value){if(a){T("{");var f=qa;a=ba;c=Ea;e=Ha;z();b=J(":");qa=f;ba=a;Ea=c;Ha=e;if((qa.type===ma.Identifier||qa.type===ma.StringLiteral)&&b)return ja(!0);a=new N;
for(c=[];ba<Ga&&!J("}");){e=Qa();if("undefined"===typeof e)break;c.push(e)}T("}");return a.finishBlockStatement(c)}return ja()}a=new N;if(b===ma.Punctuator)switch(qa.value){case ";":return a=new N,T(";"),a.finishEmptyStatement();case "(":return c=ra(),U(),a.finishExpressionStatement(c)}else if(b===ma.Keyword)switch(qa.value.toLowerCase()){case "break":return c=null,Q("break"),59===oa.charCodeAt(ba)?(z(),za.inIteration||za.inSwitch||I(ka.IllegalBreak),a=a.finishBreakStatement(null)):K()?(za.inIteration||
za.inSwitch||I(ka.IllegalBreak),a=a.finishBreakStatement(null)):(qa.type===ma.Identifier&&(c=wa(),e="$"+c.name,Object.prototype.hasOwnProperty.call(za.labelSet,e)||I(ka.UnknownLabel,c.name)),U(),null!==c||za.inIteration||za.inSwitch||I(ka.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,Q("continue"),59===oa.charCodeAt(ba)?(z(),za.inIteration||I(ka.IllegalContinue),a=a.finishContinueStatement(null)):K()?(za.inIteration||I(ka.IllegalContinue),a=a.finishContinueStatement(null)):
(qa.type===ma.Identifier&&(c=wa(),e="$"+c.name,Object.prototype.hasOwnProperty.call(za.labelSet,e)||I(ka.UnknownLabel,c.name)),U(),null!==c||za.inIteration||I(ka.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var d,g,k;g=za.allowIn;d=b=f=null;Q("for");T("(");if(J(";"))z();else{if(R("var")){za.allowIn=!1;var l=new N;d=z();k=va();d=l.finishVariableDeclaration(k,d.value);za.allowIn=g;1===d.declarations.length&&R("in")&&(z(),c=d,e=ra(),d=null)}else za.allowIn=!1,d=ra(),za.allowIn=g,R("in")&&
(X(d)||H(ka.InvalidLHSInForIn),z(),c=d,e=ra(),d=null);"undefined"===typeof c&&T(";")}"undefined"===typeof c&&(J(";")||(b=ra()),T(";"),J(")")||(f=ra()));T(")");k=za.inIteration;za.inIteration=!0;g=ua(!0);za.inIteration=k;return"undefined"===typeof c?a.finishForStatement(d,b,f,g):a.finishForInStatement(c,e,g);case "function":return eb(a);case "if":return Q("if"),T("("),c=ra(),T(")"),e=ua(!0),R("else")?(z(),b=ua(!0)):b=null,a.finishIfStatement(c,e,b);case "return":return c=null,Q("return"),za.inFunctionBody||
H(ka.IllegalReturn),32===oa.charCodeAt(ba)&&h(oa.charCodeAt(ba+1))?(c=ra(),U(),a=a.finishReturnStatement(c)):K()?a=a.finishReturnStatement(null):(J(";")||J("}")||qa.type===ma.EOF||(c=ra()),U(),a=a.finishReturnStatement(c)),a;case "var":return Q("var"),c=va(),U(),a.finishVariableDeclaration(c,"var")}c=ra();if(c.type===ya.Identifier&&J(":"))return z(),b="$"+c.name,Object.prototype.hasOwnProperty.call(za.labelSet,b)&&I(ka.Redeclaration,"Label",c.name),za.labelSet[b]=!0,e=ua(!1),delete za.labelSet[b],
a.finishLabeledStatement(c,e);U();return a.finishExpressionStatement(c)}function Ka(){var a,b=[],c,e,f,d,g,h=new N;for(T("{");ba<Ga&&qa.type===ma.StringLiteral;){c=qa;a=Qa();b.push(a);if(a.expression.type!==ya.Literal)break;a=oa.slice(c.start+1,c.end-1);"use strict"===a?(La=!0,e&&V(e,ka.StrictOctalLiteral)):!e&&c.octal&&(e=c)}c=za.labelSet;e=za.inIteration;f=za.inSwitch;d=za.inFunctionBody;g=za.parenthesizedCount;za.labelSet={};za.inIteration=!1;za.inSwitch=!1;za.inFunctionBody=!0;for(za.parenthesizedCount=
0;ba<Ga&&!J("}");){a=Qa();if("undefined"===typeof a)break;b.push(a)}T("}");za.labelSet=c;za.inIteration=e;za.inSwitch=f;za.inFunctionBody=d;za.parenthesizedCount=g;return h.finishBlockStatement(b)}function ea(a,b,c){c="$"+c;La?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ka.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ka.StrictParamDupe);a.paramSet[c]=!0}function Oa(a){a={params:[],defaultCount:0,
defaults:[],firstRestricted:a};T("(");if(!J(")"))for(a.paramSet={};ba<Ga;){var b=a,c=void 0,e=void 0,f=void 0,c=qa,e=wa();ea(b,c,c.value);J("\x3d")&&(z(),f=Ia(),++b.defaultCount);b.params.push(e);b.defaults.push(f);if(J(")"))break;T(",")}T(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function eb(){var a,b=[],c=[],e,f,d,g,h,k=new N;Q("function");a=wa();e=Oa(d);b=e.params;c=e.defaults;f=e.stricted;
d=e.firstRestricted;e.message&&(g=e.message);h=La;e=Ka();La&&d&&P(d,g);La&&f&&V(f,g);La=h;return k.finishFunctionDeclaration(a,b,c,e)}function Qa(){if(qa.type===ma.Keyword)return"function"===qa.value.toLowerCase()?eb():ua(!1);if(qa.type!==ma.EOF)return ua(!1)}function A(){var a,b,c,e=[];for(a=0;a<fa.tokens.length;++a)b=fa.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),fa.range&&(c.range=b.range),fa.loc&&(c.loc=b.loc),e.push(c);fa.tokens=e}
var ma,Ya,Xa,ya,Pa,Da,ka,Fa,oa,La,ba,Ea,Ha,Ga,qa,za,fa;ma={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ya={};Ya[ma.BooleanLiteral]="Boolean";Ya[ma.EOF]="\x3cend\x3e";Ya[ma.Identifier]="Identifier";Ya[ma.Keyword]="Keyword";Ya[ma.NullLiteral]="Null";Ya[ma.NumericLiteral]="Numeric";Ya[ma.Punctuator]="Punctuator";Ya[ma.StringLiteral]="String";Ya[ma.RegularExpression]="RegularExpression";Xa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ya={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Pa={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Da={Data:1,Get:2,Set:4};ka={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Fa={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
L.prototype=N.prototype={processComment:function(){var a,b,c,e=fa.bottomRightStack,f,d,g=e[e.length-1];if(!(this.type===ya.Program&&0<this.body.length)){if(0<fa.trailingComments.length){c=[];for(f=fa.trailingComments.length-1;0<=f;--f)d=fa.trailingComments[f],d.range[0]>=this.range[1]&&(c.unshift(d),fa.trailingComments.splice(f,1));fa.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=
this.range[0];)a=g,g=e.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<fa.leadingComments.length)for(b=[],f=fa.leadingComments.length-1;0<=f;--f)d=fa.leadingComments[f],d.range[1]<=this.range[0]&&(b.unshift(d),fa.leadingComments.splice(f,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);e.push(this)}},finish:function(){fa.range&&(this.range[1]=
ba);fa.loc&&(this.loc.end=new C,fa.source&&(this.loc.source=fa.source));fa.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ya.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ya.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ya.LogicalExpression:ya.BinaryExpression;this.operator=a;this.left=
b;this.right=c;this.finish();return this},finishBlockStatement:function(a){this.type=ya.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ya.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ya.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ya.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();
return this},finishContinueStatement:function(a){this.type=ya.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ya.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ya.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,e){this.type=ya.ForStatement;this.init=a;this.test=b;this.update=c;this.body=e;this.finish();return this},finishForInStatement:function(a,b,c){this.type=
ya.ForInStatement;this.left=a;this.right=b;this.body=c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,e){this.type=ya.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=e;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,e){this.type=ya.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=e;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(a){this.type=ya.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ya.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ya.Literal;this.value=a.value;this.raw=oa.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ya.MemberExpression;this.computed="["===a;this.object=b;this.property=c;
this.finish();return this},finishObjectExpression:function(a){this.type=ya.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ya.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ya.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,e,f){this.type=ya.Property;this.key=b;this.value=c;this.kind=a;this.method=e;this.shorthand=f;this.finish();
return this},finishReturnStatement:function(a){this.type=ya.ReturnStatement;this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ya.UpdateExpression:ya.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ya.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ya.VariableDeclarator;this.id=
a;this.init=b;this.finish();return this}};r.version="2.0.0-dev";r.tokenize=function(a,b){var c,e;c=String;"string"===typeof a||a instanceof String||(a=c(a));oa=a;ba=0;Ea=0<oa.length?1:0;Ha=0;Ga=oa.length;qa=null;za={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};fa={};b=b||{};b.tokens=!0;fa.tokens=[];fa.tokenize=!0;fa.openParenToken=-1;fa.openCurlyToken=-1;fa.range="boolean"===typeof b.range&&b.range;fa.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&
b.comment&&(fa.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(fa.errors=[]);try{B();if(qa.type===ma.EOF)return fa.tokens;for(z();qa.type!==ma.EOF;)try{z()}catch(tb){if(fa.errors){fa.errors.push(tb);break}else throw tb;}A();e=fa.tokens;"undefined"!==typeof fa.comments&&(e.comments=fa.comments);"undefined"!==typeof fa.errors&&(e.errors=fa.errors)}catch(tb){throw tb;}finally{fa={}}return e};r.parse=function(b,c){var e,f;f=String;"string"===typeof b||b instanceof String||(b=f(b));oa=b;ba=0;
Ea=0<oa.length?1:0;Ha=0;Ga=oa.length;qa=null;za={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};fa={};"undefined"!==typeof c&&(fa.range="boolean"===typeof c.range&&c.range,fa.loc="boolean"===typeof c.loc&&c.loc,fa.attachComment="boolean"===typeof c.attachComment&&c.attachComment,fa.loc&&null!==c.source&&void 0!==c.source&&(fa.source=f(c.source)),"boolean"===typeof c.tokens&&c.tokens&&(fa.tokens=[]),"boolean"===typeof c.comment&&c.comment&&
(fa.comments=[]),"boolean"===typeof c.tolerant&&c.tolerant&&(fa.errors=[]),fa.attachComment&&(fa.range=!0,fa.comments=[],fa.bottomRightStack=[],fa.trailingComments=[],fa.leadingComments=[]));try{var d;a();B();d=new N;La=!1;var g;b=[];for(var h,k,l;ba<Ga;){h=qa;if(h.type!==ma.StringLiteral)break;g=Qa();b.push(g);if(g.expression.type!==ya.Literal)break;k=oa.slice(h.start+1,h.end-1);"use strict"===k?(La=!0,l&&V(l,ka.StrictOctalLiteral)):!l&&h.octal&&(l=h)}for(;ba<Ga;){g=Qa();if("undefined"===typeof g)break;
b.push(g)}e=d.finishProgram(b);"undefined"!==typeof fa.comments&&(e.comments=fa.comments);"undefined"!==typeof fa.tokens&&(A(),e.tokens=fa.tokens);"undefined"!==typeof fa.errors&&(e.errors=fa.errors)}catch(hb){throw hb;}finally{fa={}}return e};r.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ya)ya.hasOwnProperty(a)&&(b[a]=ya[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/views/3d/layers/graphics/Graphics3DGraphicElevationContext":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","./ElevationContext"],function(r,d,n,l){return function(d){function b(b){b=d.call(this,b)||this;b.centerPointInElevationSR=null;return b}n(b,d);return b}(l)})},"esri/views/3d/layers/graphics/ElevationContext":function(){define(["require","exports","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(r,d,n,l){return function(){function d(b){b?this.set(b):this.setDefaults()}Object.defineProperty(d.prototype,"meterUnitOffset",
{get:function(){return this._meterUnitOffset},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"unit",{get:function(){return this._unit},enumerable:!0,configurable:!0});d.prototype.setUnit=function(b){this._unit=b;this._metersPerElevationInfoUnit=n.getMetersPerUnit(b)};d.prototype.setDefaults=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this.featureExpressionInfoContext=null;this.setUnit("meters")};d.prototype.set=function(b){this.mode=b.mode;this._meterUnitOffset=
b._meterUnitOffset||0;this._renderUnitOffset=b._renderUnitOffset||0;this.featureExpressionInfoContext=b.featureExpressionInfoContext;this.setUnit(b.unit)};d.prototype.setOffsetMeters=function(b){this._meterUnitOffset=b;this._renderUnitOffset=0};d.prototype.setOffsetElevationInfoUnits=function(b){this._meterUnitOffset=b*this._metersPerElevationInfoUnit;this._renderUnitOffset=0};d.prototype.addOffsetRenderUnits=function(b){this._renderUnitOffset+=b};d.prototype.mixinApi=function(b){null!=b.mode&&(this.mode=
b.mode);null!=b.unit&&this.setUnit(b.unit);null!=b.offset&&this.setOffsetElevationInfoUnits(b.offset)};d.prototype.calculateOffsetRenderUnits=function(b){var d=this._meterUnitOffset,g=this.featureExpressionInfoContext;null!=g&&(d+=l.execute(g)*this._metersPerElevationInfoUnit);return d/b.unitInMeters+this._renderUnitOffset};return d}()})},"esri/views/3d/webgl-engine/Stage":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./lib/AutoDisposable ./lib/ModelContentType ./lighting/Lightsources ./parts/Model ./parts/RenderView".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){function a(a){return"function"===typeof a.addParentStage&&"function"===typeof a.removeParentStage}return function(d){function p(a,g,h,k){var l=d.call(this)||this;l.sceneIntersectionHelper=k;l._viewContent=[];l._mainLightDirection=b.vec3f64.fromValues(0,1,0);l.container=g;l.viewingMode=a;l.model=new c;l.renderView=new f(g,l,l.model.getDirtySet(),h);l.setLighting({lights:[new e.MainLight(b.vec3f64.fromValues(.7,.7,.7)),new e.AmbientLight(b.vec3f64.fromValues(.3,.3,.3))],
groundLightingFactor:.5,globalFactor:.5});return l}l(p,d);Object.defineProperty(p.prototype,"mainLightDirection",{get:function(){return this._mainLightDirection},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"lighting",{get:function(){return this._lighting},enumerable:!0,configurable:!0});p.prototype.setLighting=function(a){k.vec3.set(this._mainLightDirection,0,0,0);for(var b=0,c=a.lights;b<c.length;b++){var f=c[b];if(f instanceof e.MainLight){k.vec3.negate(this._mainLightDirection,
f.direction);break}}this._lighting=a;this.renderView.setNeedsRender()};p.prototype.add=function(b,c){this.model.add(b,c);a(c)&&c.addParentStage(this)};p.prototype.remove=function(b,c){b=this.model.remove(b,c);a(b)&&b.removeParentStage(this);return b};p.prototype.notifyDirty=function(a,b,c,e){this.model.notifyDirty(a,b,c,e)};p.prototype.processDirty=function(){var a=this.model.getDirtySet(),b=a.getDirtyMaterials();if(a.hasDirtyGeometryRecords()||b){p.DebugSettings.logDirtySet&&console.log("Dirty set: "+
this.model.getDirtySet().formatDebugInfo(!1));var c=a.commitLayers(this._viewContent);(0<c[0].length+c[1].length+c[2].length||b)&&this.renderView.modify(c[0],c[1],c[2],b);p.DebugSettings.logDirtySet&&(console.log("RGs add: "+c[0].map(function(a){return a.uniqueName})),console.log("RGs remove: "+c[1].map(function(a){return a.uniqueName})));a.commit();a.clearDirtyMaterials();this.renderView.setNeedsRender()}};p.prototype.processDirtyLayer=function(a){var b=this.model.getDirtySet(),c=b.getDirtyMaterials();
a=b.commitLayers([a]);(0<a[0].length+a[1].length+a[2].length||c)&&this.renderView.modify(a[0],a[1],a[2],c);b.clearDirtyMaterials();this.renderView.setNeedsRender()};p.prototype.get=function(a,b){return this.model.get(a,b)};p.prototype.getAll=function(a){return this.model.getAll(a)};p.prototype.getCamera=function(){return this.renderView.getCamera()};p.prototype.setCamera=function(a){this.renderView.setCamera(a)};p.prototype.getLayers=function(){return this.model.getAll(g.LAYER)};p.prototype.getViewContent=
function(){return this._viewContent.slice(0)};p.prototype.addToViewContent=function(a){for(var b=[],c=0;c<a.length;c++)-1===this._viewContent.indexOf(a[c])&&b.push(a[c]);0<a.length&&(this.processDirty(),a=this.model.getDirtySet().getResidentRenderGeometriesFilteredByLayers(b),this.renderView.modify(a,[],[]),this._viewContent.push.apply(this._viewContent,b))};p.prototype.removeFromViewContent=function(a){this.processDirty();for(var b=this.model.getDirtySet(),c=this._viewContent,e=[],f=0;f<a.length;f++){var d=
c.indexOf(a[f]);-1<d&&(c[d]=c[c.length-1],c.pop(),e.push(a[f]))}a=b.getResidentRenderGeometriesFilteredByLayers(e);this.renderView.modify([],a,[])};p.prototype.addRenderPlugin=function(a,b){"intersect"in b&&this.sceneIntersectionHelper.addIntersectionHandler(b);return this.renderView.renderPlugins.add(a,b)};p.prototype.removeRenderPlugin=function(a){"intersect"in a&&this.sceneIntersectionHelper.removeIntersectionHandler(a);return this.renderView.renderPlugins.remove(a)};p.prototype.getContentDebugStrings=
function(a){return this.model.formatDebugInfo(a)};p.DebugSettings={endFrameContentValidation:!1,logDirtySet:!1};p.ModelContentType=g;n([h.autoDispose()],p.prototype,"model",void 0);n([h.autoDispose()],p.prototype,"renderView",void 0);return p}(h.AutoDisposable)})},"esri/views/3d/webgl-engine/parts/Model":function(){define("require exports dojo/string ../../support/mathUtils ../lib/localOrigin ../lib/ModelContentType ../lib/ModelDirtySet ../lib/RenderGeometry ../lib/Util".split(" "),function(r,d,n,
l,k,b,h,g,e){var c=e.assert,f=e.logWithBase;return function(){function a(){this.dirtySet=new h(this);this._uniqueIdx=0;this._id2origin={};this.content={};for(var a in b)this.content[b[a]]={}}a.prototype.getAll=function(a){a=this.content[a];c(void 0!==a);return a};a.prototype.get=function(a,b){return this.getAll(a)[b]};a.prototype.add=function(a,e){var f=this.content[a];c(void 0!==f);var d=e.id;c(null==f[d],"Model/Stage already contains object to be added");f[d]=e;a===b.LAYER&&this.notifyDirty(a,e,
"layerAdded")};a.prototype.remove=function(a,e){var f=this.content[a];c(void 0!==f);var d=f[e];c(void 0!==d,"Model/Stage doesn't contain object to be removed");delete f[e];a===b.TEXTURE&&d.unload();a===b.LAYER&&this.notifyDirty(a,d,"layerRemoved");return d};a.prototype.getDirtySet=function(){return this.dirtySet};a.prototype.notifyDirty=function(a,b,c,e){this.dirtySet.handleUpdate(b,c,e)};a.prototype.getOrigin=function(a,b,c){void 0===c&&(c=10);var e=0;b=b*c/1E4;1<b&&(e=Math.ceil(f(b,2)));b=1E4*Math.pow(2,
e);c=Math.round(a[0]/b);var d=Math.round(a[1]/b);a=Math.round(a[2]/b);var e=e+"_"+c+"_"+d+"_"+a,g=this._id2origin[e];null==g&&(g=k.fromValues(c*b,d*b,a*b,e),this._id2origin[e]=g);return g};a.prototype.getGeometryRenderGeometries=function(a,b,c){var e=a.id,f=b.geometry,d=a.getCombinedStaticTransformation(b),h=l.maxScale(d),k=b.origin,p=b.id,q=this._uniqueIdx++;a=new g(f.data,f.boundingInfo,b.material,d,b.shaderTransformation,h,a.getCastShadow(),!!f.singleUse,e,p,q);a.origin=k||this.getOrigin(a.center,
a.bsRadius);a.instanceParameters=b.instanceParameters;c.push(a)};a.prototype.updateRenderGeometryTransformation=function(a,b,c){a.getCombinedStaticTransformation(b,c.transformation);c.updateTransformation(c.transformation);a=this.getOrigin(c.center,c.bsRadius);return c.origin!==a};a.prototype.formatDebugInfo=function(a){var c=[];if(a){c[0]="\x3ctable\x3e";for(var e in b)a=b[e],c[0]+="\x3ctr\x3e\x3ctd\x3e"+a+'\x3c/td\x3e\x3ctd style\x3d"text-align: right"\x3e'+Object.keys(this.getAll(a)).length+"\x3c/td\x3e\x3c/tr\x3e";
c[0]+="\x3c/table\x3e";c[1]=this.dirtySet.formatDebugInfo(!0)}else{c[0]="";for(e in b)a=b[e],c[0]+=n.pad(String(Object.keys(this.getAll(a)).length),6," ")+" "+a+", ";c[1]=this.dirtySet.formatDebugInfo(!1)}return c};a.prototype.validateObject=function(a){a=a.geometryRecords;for(var e=0;e<a.length;++e){var f=a[e];c(null!=this.get(b.GEOMETRY,f.geometry.id));c(null!=this.get(b.MATERIAL,f.material.id))}};a.prototype.validateLayer=function(a){a=a.getObjects();for(var e=0;e<a.length;++e){var f=this.get(b.OBJECT,
a[e].id);c(null!=f)}};a.ContentType=b;return a}()})},"esri/views/3d/webgl-engine/lib/localOrigin":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.fromVector=function(d,k){return{vec3:n.vec3f64.clone(d),id:k}};d.fromValues=function(d,k,b,h){return{vec3:n.vec3f64.fromValues(d,k,b),id:h}}})},"esri/views/3d/webgl-engine/lib/ModelDirtySet":function(){define("require exports ../../../../core/arrayUtils ../../../../core/iteratorUtils ./ModelContentType ./Util".split(" "),
function(r,d,n,l,k,b){return function(){function d(b){this._residentGeomRecords=new Map;this._dirtyGeomRecords=new Map;this._dirtyMaterials=new Set;this._model=b}Object.defineProperty(d.prototype,"residentLayerCount",{get:function(){return this._residentGeomRecords.size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"residentObjectCount",{get:function(){var b=0;this._residentGeomRecords.forEach(function(e){b+=e.size});return b},enumerable:!0,configurable:!0});d.prototype.getDirtyMaterials=
function(){return 0<this._dirtyMaterials.size?this._dirtyMaterials:null};d.prototype.clearDirtyMaterials=function(){this._dirtyMaterials.clear()};d.prototype.hasDirtyGeometryRecords=function(){var b=!1;l.everyMap(this._dirtyGeomRecords,function(e){if(b)return!1;l.everyMap(e,function(c){if(!b&&c&&0<c.size)return b=!0,!1})});return b};d.prototype.handleUpdate=function(d,e,c){b.assert(this[e],"ModelDirtySet doesn't know how to process "+e);return this[e](d,c)};d.prototype.shaderTransformationChanged=
function(b){var e=this;(b=this._residentGeomRecords.get(b.id))&&b.forEach(function(b,f){(f=e._model.content[k.OBJECT][f])&&f.hasVolativeTransformation()&&b.forEach(function(a){var b=0;for(a=a[1];b<a.length;b++)a[b].shaderTransformationChanged()})})};d.prototype.commit=function(){return this.commitLayers(n.keysOfMap(this._dirtyGeomRecords))};d.prototype.commitLayers=function(d){for(var e=this,c=[],f=[],a=[],g=function(g){var l=d[g];g=h._dirtyGeomRecords.get(l);if(!g)return"continue";g.forEach(function(d,
g){var h=e._ensureGeomRecord(l,g);d.forEach(function(d,l){var p=d[0],m=d[1];d=d[2];var q=!1;if(m&2){var u=h.get(l);if(u){u=u[1];if(d&4)for(var z=e._model.get(k.OBJECT,g),t=0;t<u.length;t++){var w=u[t];if(e._model.updateRenderGeometryTransformation(z,p,w)){q=!0;break}}if(!q)for(z=0;z<u.length;z++)w=u[z],a.push({renderGeometry:w,updateType:d})}else b.assert(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid update")}if(m&4||q)(u=h.get(l))?f.push.apply(f,u[1]):4===m&&b.assert(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid remove"),
u&&h.delete(l);if(m&1||q)m=[p,[]],z=e._model.get(k.OBJECT,g),e._model.getGeometryRenderGeometries(z,p,m[1]),c.push.apply(c,m[1]),h.set(l,m)});0===h.size&&e._residentGeomRecords.get(l).delete(g)});0===h._residentGeomRecords.get(l).size&&h._residentGeomRecords.delete(l);h._dirtyGeomRecords.delete(l)},h=this,l=0;l<d.length;l++)g(l);return[c,f,a]};d.prototype.getResidentRenderGeometries=function(){return this.getResidentRenderGeometriesFilteredByLayers(n.keysOfMap(this._residentGeomRecords))};d.prototype.getResidentRenderGeometriesFilteredByLayers=
function(b){for(var e=[],c=0;c<b.length;c++){var f=this._residentGeomRecords.get(b[c]);f&&f.forEach(function(a){a.forEach(function(a){e.push.apply(e,a[1])})})}return e};d.prototype.visibilityChanged=function(b,e,c){if(null!=e)this._componentPropertyChanged(b,e,c,1);else{e=0;for(var f=b.getGeometryRecords();e<f.length;e++)this._componentPropertyChanged(b,f[e],c,1)}};d.prototype.componentHighlightChanged=function(b,e,c){if(null!=e)this._componentPropertyChanged(b,e,c,16);else{e=0;for(var f=b.getGeometryRecords();e<
f.length;e++)this._componentPropertyChanged(b,f[e],c,16)}};d.prototype.vertexAttrsUpdated=function(b,e,c){this._updateOrCreateDirtyRecord(b,e,c,2,0,0,2,5,2)};d.prototype.matChanged=function(b){this._dirtyMaterials.add(b.id);if(this.onMaterialChanged)this.onMaterialChanged(b)};d.prototype.layerAdded=function(b){for(var e=b.getObjects(),c=0;c<e.length;c++)this.layObjectAdded(b,e[c])};d.prototype.layerRemoved=function(b){for(var e=b.getObjects(),c=0;c<e.length;c++)this.layObjectRemoved(b,e[c])};d.prototype.layObjectAdded=
function(b,e){b=b.id;for(var c=e.getGeometryRecords(),f=0;f<c.length;f++)this.objGeometryAdded(e,c[f],b)};d.prototype.layObjectRemoved=function(b,e){b=b.id;for(var c=e.getGeometryRecords(),f=0;f<c.length;f++)this.objGeometryRemoved(e,c[f],b)};d.prototype.layObjectReplaced=function(b,e){this.layObjectRemoved(b,e[0]);this.layObjectAdded(b,e[1])};d.prototype.objTransformation=function(b,e){var c=this;e=e||this._getParentLayerId(b);this._ensureGeomRecord(e,b.id).forEach(function(f){c._updateOrCreateDirtyRecord(b,
f[0],e,2,0,0,2,5,4)})};d.prototype.objGeometryAdded=function(b,e,c){this._updateOrCreateDirtyRecord(b,e,c,1,4,0,0,0)};d.prototype.objGeometryRemoved=function(b,e,c){this._updateOrCreateDirtyRecord(b,e,c,4,1,2,0,0)};d.prototype.objGeometryReplaced=function(b,e){this.objGeometryRemoved(b,e[0]);this.objGeometryAdded(b,e[1])};d.prototype.objGeometryTransformation=function(b,e){this.objGeometryReplaced(b,e)};d.prototype._componentPropertyChanged=function(b,e,c,f){this._updateOrCreateDirtyRecord(b,e,c,
2,0,0,2,5,f)};d.prototype._updateOrCreateDirtyRecord=function(d,e,c,f,a,h,k,l,t){c=c||this._getParentLayerId(d);var g=e.id;d=this._ensureDirtyRecord(c,d.id);(c=d.get(g))?(e=c[1],e&a?d.delete(g):e&h?(c[1]=f,c[2]=t):e&k?c[2]|=t:e&l||b.assert(!1,"ModelDirtySet.objGeometryAdded: inconsistent state")):d.set(g,[e,f,t])};d.prototype._ensureGeomRecord=function(b,e){var c=this._residentGeomRecords.get(b);c||(c=new Map,this._residentGeomRecords.set(b,c));b=c.get(e);b||(b=new Map,c.set(e,b));return b};d.prototype._ensureDirtyRecord=
function(b,e){var c=this._dirtyGeomRecords.get(b);c||(c=new Map,this._dirtyGeomRecords.set(b,c));b=c.get(e);b||(b=new Map,c.set(e,b));return b};d.prototype._getParentLayerId=function(b){return b.parentLayer.id};d.prototype.formatDebugInfo=function(b){if(b)return"";var e=["ADD","UPD",void 0,"REM"],c="";this._dirtyGeomRecords.forEach(function(b,a){b.forEach(function(b,f){0<c.length&&(c+="\n");c+=a+"."+f;var d=[];b.forEach(function(a){var b=a[1];d[b]||(d[b]=[]);d[b].push(a[0].geometry.id)});for(b=0;b<
d.length;b++)if(d[b])for(c+=" "+e[b-1]+": ",f=0;f<d[b].length;f++)c+=d[b][f]+", "})});return c};return d}()})},"esri/views/3d/webgl-engine/lib/RenderGeometry":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils ./ComponentUtils ./HighlightUtils".split(" "),function(r,d,n,l,k,b,h,g,e){return function(){function c(c,a,e,d,g,h,k,l,w,
m,u){this.shaderTransformationDirty=!0;this.data=c.toRenderData();this.componentOffsets=c.componentOffsets;this.boundingInfo=a;this.material=e;this.origin=null;this.center=b.vec3f64.create();this.bsRadius=0;this.transformation=null;this.calculateShaderTransformation=g;d&&this.updateTransformation(d,h);this.castShadow=k;this.singleUse=l;this.name=w;this.uniqueName=m;this.idx=u;this.instanceParameters={}}c.prototype.updateTransformation=function(b,a){this.transformation=b;this.shaderTransformationDirty=
!0;this.bsRadius=this.getBoundingSphere(b,a,this.center)};c.prototype.shaderTransformationChanged=function(){this.shaderTransformationDirty=!0};c.prototype.getBoundingSphere=function(b,a,c){a=a||h.maxScale(b);k.vec3.transformMat4(c,this.boundingInfo.getCenter(),b);return this.boundingInfo.getBSRadius()*a};Object.defineProperty(c.prototype,"hasShaderTransformation",{get:function(){return!!this.calculateShaderTransformation},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"componentCount",
{get:function(){return g.componentCount(this.componentOffsets)},enumerable:!0,configurable:!0});c.prototype.getShaderTransformation=function(){if(!this.calculateShaderTransformation)return this.transformation;this.shaderTransformationDirty&&(this.shaderTransformation||(this.shaderTransformation=l.mat4f64.create()),n.mat4.copy(this.shaderTransformation,this.calculateShaderTransformation(this.transformation)),this.shaderTransformationDirty=!1);return this.shaderTransformation};c.prototype.getIndices=
function(b){return"indices"in this.data?this.data.indices[b]:null};c.prototype.getAttribute=function(b){return"vertexAttr"in this.data?this.data.vertexAttr[b]:null};c.prototype.addHighlight=function(b){var a=e.generateHighlightId(),c=this.instanceParameters;c.componentHighlights=g.addHighlight(c.componentHighlights,null,b,a);return a};c.prototype.removeHighlight=function(b){var a=this.instanceParameters;a.componentHighlights=g.removeHighlight(a.componentHighlights,b)};return c}()})},"esri/views/3d/webgl-engine/parts/RenderView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/has ../../../../core/Logger ../../../../core/now ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/animationUtils ../lib/AutoDisposable ../lib/Camera ../lib/DrapedRenderer ../lib/GLMaterialRep ../lib/ProgramRepository ../lib/Renderer ../lib/TextureRepository ../lib/tracer ./Model ./ScreenshotManager ../shaders/globalOptions ../../../webgl/context-util ../../../webgl/RenderingContext".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C){var F=h.getLogger("esri.views.3d.webgl-engine.parts.View");return function(d){function g(a,b,e,f){var g=d.call(this)||this;g._camera=new p(c.vec3f64.fromValues(0,100,-100));g._needsRender=!0;g._idleSuspend=!0;g._animationTimeLast=0;g._stats={renderGeometriesTotal:0,renderGeometriesVisible:0,renderTimeTotal:0,renderTimeLast:0,frameCount:0};g._container=a;g._stage=b;g._initializeContext(f);a=z.glslifyGlobalOptions({viewingMode:f.viewingMode});
g._programRepository=new t(g._rctx,a);g._textureRepository=new x(b.getAll(m.ContentType.TEXTURE),g._programRepository,function(){return g._camera.viewport},g._rctx);g._materialRepository=new v(g._textureRepository,g._programRepository);g._initializeViewportCamera();g._drapedRenderer=new q(g._rctx,g._canvas,g._programRepository,g._materialRepository,g._textureRepository,e);g._renderer=new y(g._programRepository,g._materialRepository,g._textureRepository,g._rctx,"scene",b);g._screenshotManager=new u.ScreenshotManager(g._rctx,
g._render.bind(g),function(){return g.setNeedsRender()},f.screenshot.renderOverlay);g._registerFrameTask();return g}l(g,d);g.prototype.dispose=function(){this._container.contains(this._canvas)&&this._container.removeChild(this._canvas);this._frameTask&&(this._frameTask.remove(),this._frameTask=null);d.prototype.dispose.call(this)};Object.defineProperty(g.prototype,"isLoadingResources",{get:function(){return this._renderer.isLoadingResources},enumerable:!0,configurable:!0});g.prototype.getCombinedStats=
function(){var a=this._rctx.gl,b={},c=this._renderer.getCombinedStats(),e;for(e in c)b[e]=c[e];b.renderGeometriesTotal=this._stats.renderGeometriesTotal;b.renderGeometriesVisible=this._stats.renderGeometriesVisible;void 0!==a.getUsedTextureMemory&&(b.textureMemory=a.getUsedTextureMemory());void 0!==a.getUsedRenderbufferMemory&&(b.renderbufferMemory=a.getUsedRenderbufferMemory());void 0!==a.getUsedVBOMemory&&(b.VBOMemory=a.getUsedVBOMemory());if(void 0!==a.getUsedTextureMemoryStats){var a=a.getUsedTextureMemoryStats(),
f;for(f in a)b["texMem type: "+f]=a[f]}return b};g.prototype.setNeedsRender=function(){this._needsRender=!0};g.prototype.needsRender=function(){var a=this._canRender();return(this._needsRender||!this._idleSuspend||this._renderer.needsRender()||this._textureRepository.needsRender())&&a};g.prototype.ensureEdgeView=function(){return this._renderer.ensureEdgeView()};Object.defineProperty(g.prototype,"edgeView",{get:function(){return this._renderer.edgeView},enumerable:!0,configurable:!0});g.prototype.setRenderParameters=
function(a){this.setNeedsRender();void 0!==a.idleSuspend&&(this._idleSuspend=!!a.idleSuspend);this._renderer.setRenderParams(a)};g.prototype.getRenderParameters=function(){var a=this._renderer.getRenderParams();a.anisotropicFiltering=this._textureRepository.getMaxAnisotropy();a.idleSuspend=this._idleSuspend;return a};Object.defineProperty(g.prototype,"renderingContext",{get:function(){return this._rctx},enumerable:!0,configurable:!0});g.prototype.has=function(a){return"s3tc"===a?!!this._rctx.capabilities.compressedTextureS3TC:
"shaderTextureLOD"===a?!!this._rctx.capabilities.shaderTextureLOD:!1};g.prototype.modify=function(a,b,c,e){this._renderer.modify(a,b,c,e)};g.prototype.setCamera=function(a){this._camera.copyFrom(a);this.setNeedsRender()};g.prototype.getCamera=function(){return this._camera};g.prototype.getCanvas=function(){return this._canvas};g.prototype.getDrapedRenderer=function(){return this._drapedRenderer};g.prototype.takeScreenshot=function(a){return this._screenshotManager.takeScreenshot(a)};Object.defineProperty(g.prototype,
"renderPlugins",{get:function(){return this._renderer.renderPlugins},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"test",{get:function(){return{renderer:this._renderer,textureRepository:this._textureRepository}},enumerable:!0,configurable:!0});g.prototype.getGpuMemoryUsage=function(){return n({},this._renderer.getGpuMemoryUsage(),{draped:this._drapedRenderer?this._drapedRenderer.getGpuMemoryUsage():0})};g.prototype._registerFrameTask=function(){var a=this,b={viewCamera:this._camera,
frameHasSlicePlane:!1,drapedRenderer:this._drapedRenderer};this._frameTask=e.addFrameTask({preRender:function(b){w.begin();a._stage.processDirty();a._processAnimations(b.time)},render:function(){a.needsRender()&&(a._resetNeedsRender(),a._render(null,a._camera,!1))},postRender:function(){w.end()},update:function(){b.viewCamera=a._camera;b.frameHasSlicePlane=a._renderer.hasSlicePlane;b.drapedRenderer=a._drapedRenderer;a._screenshotManager.update(b)}})};g.prototype._resetNeedsRender=function(){this._needsRender=
!1;this._renderer.resetNeedsRender();this._textureRepository.resetNeedsRender()};g.prototype._canRender=function(){var a=this._camera;return 0<a.fullWidth&&0<a.fullHeight};g.prototype._initializeViewportCamera=function(){var a=this._container.getBoundingClientRect(),b=this.getCamera();b.viewport[2]=a.width;b.viewport[3]=a.height;this.setCamera(b)};g.prototype._initializeContext=function(a){this._canvas=a.canvas;this._canvas||(this._canvas=document.createElement("canvas"));this._canvas.setAttribute("style",
"width: 100%; height:100%; display:block;");var c=w.instrumentContext(B.createContextOrErrorHTML(this._canvas,{alpha:a.alpha||!1,premultipliedAlpha:!0,antialias:!1,depth:!0,stencil:null==a.stencil?!0:a.stencil},a.renderContext));this._rctx=new C(c,{disabledExtensions:a.deactivatedWebGLExtensions||{},debugWebGLExtensions:a.debugWebGLExtensions||{}});!a.alpha&&this._rctx.contextAttributes.alpha&&F.error("WebGL context has alpha channel even though no alpha channel was requested");!this._rctx.contextAttributes.alpha&&
11<=b("safari")&&(this._container.style.backgroundColor="black");this._container.appendChild(this._canvas)};g.prototype._processAnimations=function(a){a-this._animationTimeLast<f.DESIRED_ANIMATION_MS||(this._animationTimeLast=a,this._renderer.updateAnimations(a)&&this.setNeedsRender())};g.prototype._render=function(a,b,c){this._renderer.setLighting(this._stage.lighting);this._rctx.bindFramebuffer(a);b.setGLViewport(this._rctx);this._renderer.render({fbo:a,camera:b,disableSlice:c,lightDirection:this._stage.mainLightDirection})};
k([a.autoDispose()],g.prototype,"_rctx",void 0);k([a.autoDispose()],g.prototype,"_container",void 0);k([a.autoDispose()],g.prototype,"_canvas",void 0);k([a.autoDispose()],g.prototype,"_programRepository",void 0);k([a.autoDispose()],g.prototype,"_renderer",void 0);k([a.autoDispose()],g.prototype,"_drapedRenderer",void 0);k([a.autoDispose()],g.prototype,"_screenshotManager",void 0);return g}(a.AutoDisposable)})},"esri/views/3d/support/animationUtils":function(){define(["require","exports"],function(r,
d){Object.defineProperty(d,"__esModule",{value:!0});d.DESIRED_ANIMATION_FPS=25;d.DESIRED_ANIMATION_MS=1E3/d.DESIRED_ANIMATION_FPS;d.DESIRED_DRAPED_ANIMATION_FPS=20;d.DESIRED_DRAPED_ANIMATION_MS=1E3/d.DESIRED_DRAPED_ANIMATION_FPS})},"esri/views/3d/webgl-engine/lib/DrapedRenderer":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/debugFlags ../../webgl-engine/lib/intersectorUtils ./Camera ./DefaultVertexBufferLayouts ./glUtil3D ./GridLocalOriginFactory ./Renderer ../lighting/Lightsources ../materials/ColorMaterial ../materials/HUDMaterial ../materials/RibbonLineMaterial ../shaders/MiscPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){r=function(){function d(b,c,e,d,g,h){var m=this;this._renderTargets={};this._clearColor=k.vec4f64.fromValues(0,0,0,0);this._uniqueIdx=0;this._localOrigins=new f;this._rctx=b;this._canvas=c;this._programRep=e;this._modelDirtySet=h;this._modelDirtySet.onMaterialChanged=function(a){return m._emitContentChanged()};this._renderer=new a(e,d,g,this._rctx,"draped");this._renderer.onHasHighlightsChanged=function(a){if(m.onHasHighlightsChanged)m.onHasHighlightsChanged(a)};
this._renderer.setLighting({lights:[new p.AmbientLight(l.vec3f64.fromValues(1,1,1))],groundLightingFactor:1,globalFactor:0})}d.prototype.dispose=function(){for(var a in this._renderTargets)this._renderTargets[a].dispose();this._renderTargets=null;this._renderer.dispose();this._renderer=null};d.prototype.disposeRenderTarget=function(a){var b=this._renderTargets[a];b&&b.dispose();delete this._renderTargets[a]};d.prototype.getRenderTargetTexture=function(a){return(a=this._renderTargets[a])?a.colorTexture:
null};d.prototype.addRenderGeometries=function(a){var b=this;a.forEach(function(a){null==a.origin&&(a.origin=b._localOrigins.getOrigin(a.center));a.idx=b._uniqueIdx++});this._renderer.modify(a,[]);this._emitContentChanged()};d.prototype.removeRenderGeometries=function(a){this._renderer.modify([],a);this._emitContentChanged()};d.prototype.updateRenderGeometries=function(a,b){a=a.map(function(a){return{renderGeometry:a,updateType:b}});this._renderer.modify([],[],a);this._emitContentChanged()};d.prototype.updateRenderOrder=
function(a){0<a.size&&(this._renderer.modifyRenderOrder(a),this._emitContentChanged())};d.prototype.setBackgroundColor=function(a){this._clearColor=a;this._emitContentChanged()};d.prototype.updateHighlights=function(a){this.updateRenderGeometries(a,16)};d.prototype.isEmpty=function(){return this._renderer.isEmpty()&&!b.OVERLAY_DRAW_TEST_TEXTURE};d.prototype.processDirtyMaterials=function(){var a=this._modelDirtySet.getDirtyMaterials();a&&this._renderer.modify([],[],[],a);this._modelDirtySet.clearDirtyMaterials()};
Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return this._renderer.hasHighlights},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasWater",{get:function(){return this._renderer.hasWater},enumerable:!0,configurable:!0});d.prototype.draw=function(a,b){return this.drawPass(0,a,b)};d.prototype.drawNormals=function(a,b){return this.drawPass(2,a,b)};d.prototype.drawHighlights=function(a,b){return this.drawPass(4,a,b)};d.prototype.drawPass=function(a,c,e){this._pixelRatio=
e.pixelRatio*Math.abs(e.views[0].extent[2]-e.views[0].extent[0])/Math.abs(e.views[0].viewport[2]-e.views[0].viewport[0]);if(this.isEmpty()||4===a&&!this.hasHighlights||2===a&&!this.hasWater)return!1;this.processDirtyMaterials();if(!e.views.some(function(a){return a.extent[0]!==a.extent[2]&&a.extent[1]!==a.extent[3]}))return!1;c=this._renderTargets[c];if(!c)return!1;var f=this._rctx,d=e.width,g=e.height;c.width===d&&c.height===g||c.resize(d,g);var h=B.camera;B.fbo=c;h.near=1;h.far=1E4;h.pixelRatio=
e.pixelRatio||1;f.bindFramebuffer(c);f.setClearColor.apply(f,this._clearColor);f.clearSafe(16384);for(var k=0;k<e.views.length;k++){var l=e.views[k];h.viewport=l.viewport;n.mat4.ortho(h.projectionMatrix,0,l.extent[2]-l.extent[0],0,l.extent[3]-l.extent[1],h.near,h.far);n.mat4.identity(h.viewMatrix);n.mat4.translate(h.viewMatrix,h.viewMatrix,[-l.extent[0],-l.extent[1],0]);h.setGLViewport(this._rctx);b.OVERLAY_DRAW_TEST_TEXTURE&&this._drawTestTexture(d,g,z[e.index%z.length]);this._renderer.renderPass(a,
B)}f.bindFramebuffer(null);f.setViewport(0,0,this._canvas.width,this._canvas.height);c.colorTexture.descriptor.hasMipmap&&c.colorTexture.generateMipmap();return!0};d.prototype._drawTestTexture=function(a,b,f){var d=this._rctx;if(!this._testPatternTexture){for(var g=new Uint8Array(a*b*4),h=0,k=0;k<b;k++)for(var l=0;l<a;l++){var p=Math.floor(l/10),q=Math.floor(k/10);2>p||2>q||10*p>a-20||10*q>b-20?(g[h++]=255,g[h++]=255,g[h++]=255,g[h++]=255):(g[h++]=255,g[h++]=255,g[h++]=255,p&1&&q&1?g[h++]=l&1^k&1?
0:255:g[h++]=p&1^q&1?0:128)}this._testPatternTexture=new m(d,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:a,height:b},g);this._testPatternProgram=this._programRep.getProgram(y.texOnly);this._testPatternPipelineState=w.makePipelineState({blending:w.separateBlendingParams(770,1,771,771),colorWrite:w.defaultColorWriteParams});this._quadVAO=c.createQuadVAO(d,e.Pos3Tex)}a=this._testPatternProgram;d.bindProgram(a);d.setPipelineState(this._testPatternPipelineState);a.setUniform4f("color",
f[0],f[1],f[2],1);a.setUniform1i("tex",0);d.bindTexture(this._testPatternTexture,0);d.bindVAO(this._quadVAO);d.drawArrays(5,0,u.vertexCount(this._quadVAO,"geometry"))};d.prototype.updateAnimations=function(a){return this._renderer.updateAnimations(a)};d.prototype._emitContentChanged=function(){if(this.onContentChanged)this.onContentChanged()};d.prototype.createRenderTarget=function(a,b,c,e){for(var f=a,d=0;this._renderTargets[f];)f=a+"_"+ ++d;this._renderTargets[f]=x.createWithAttachments(this._rctx,
{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:e,hasMipmap:b,maxAnisotropy:c,width:0,height:0},{colorTarget:0,depthStencilTarget:0});return f};d.prototype.getGpuMemoryUsage=function(){var a=0,b;for(b in this._renderTargets)a+=u.getGpuMemoryUsage(this._renderTargets[b]);return a};d.prototype.intersect=function(a,b,c){var e=this,f=0;this._renderer.forEachRenderGeometry(function(d){if(!c||c(d)){if(d.material instanceof q||d.material instanceof t||d.material instanceof v){var g=
d.transformation[12],h=d.transformation[13];C[0]=b[0]-g;C[1]=b[1]-h;C[2]=1;F[0]=b[0]-g;F[1]=b[1]-h;F[2]=0;d.pixelRatio=e._pixelRatio;d.material.intersect(d,null,d.getShaderTransformation(),a,C,F,function(b,c,g,h,k,l){e.addIntersectionResult(g,d.material.renderPriority,f,a,d.data.layerUid,d.data.graphicUid)},d.calculateShaderTransformation,!0)}f++}})};d.prototype.addIntersectionResult=function(a,b,c,e,f,d){var g={type:"external",metadata:{layerUid:f,graphicUid:d}};f=function(f){f.set(g,null,e.results.terrain.dist,
e.results.terrain.normal,e.results.terrain.transformation,b,null,null,a,c);f.intersector="DrapedRenderer"};(null==e.results.min.drapedLayerOrder||b>=e.results.min.drapedLayerOrder)&&(null==e.results.min.dist||e.results.terrain.dist<=e.results.min.dist)&&f(e.results.min);(null==e.results.max.drapedLayerOrder||b<e.results.max.drapedLayerOrder)&&(null==e.results.max.dist||e.results.terrain.dist>e.results.max.dist)&&f(e.results.max);e.enable.storeAll&&(d=new h.IntersectorResult(e.ray),f(d),e.results.all.push(d))};
return d}();var z=[[1,.5,.5],[.5,.5,1],[.5,1,.5]],B={fbo:null,camera:new g,lightDirection:l.vec3f64.fromValues(0,0,1)},C=l.vec3f64.create(),F=l.vec3f64.create();return r})},"esri/views/3d/webgl-engine/lib/GridLocalOriginFactory":function(){define("require exports ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/SpatialReference ../../support/projectionUtils ./Geometry ./GeometryData ./Layer ./localOrigin ./Object3D ./Util ../materials/RibbonLineMaterial ../parts/Model".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){var y=0;r=function(){function b(){this.ROOT_ORIGIN_ID="rg_root_"+y++;this._origins=new Map;this._gridSize=42E5}b.prototype.getOrigin=function(c){var e=this._origins.get(this.ROOT_ORIGIN_ID);if(null==e){if(n.isSome(b.testOrigin)){var f=b.testOrigin;this._origins.set(this.ROOT_ORIGIN_ID,a.fromValues(f[0],f[1],f[2],this.ROOT_ORIGIN_ID));return this.getOrigin(c)}f=a.fromValues(c[0]+Math.random()-.5,c[1]+Math.random()-.5,c[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);
this._origins.set(this.ROOT_ORIGIN_ID,f);return f}k.vec3.subtract(w,c,e.vec3);w[0]=Math.abs(w[0]);w[1]=Math.abs(w[1]);w[2]=Math.abs(w[2]);f=this._gridSize;if(w[0]<f&&w[1]<f&&w[2]<f)return e;var e=Math.round(c[0]/f),d=Math.round(c[1]/f);c=Math.round(c[2]/f);var g="rg_"+e+"/"+d+"/"+c,h=this._origins.get(g);h||(h=a.fromValues(e*f,d*f,c*f,g),this._origins.set(g,h));return h};b.prototype._drawOriginBox=function(a){var b=window.view,d=b._stage;if(null==this._object){this._material=new v({width:2,color:[0,
1,0,1]},"GridLocalOriginMaterial");d.add(t.ContentType.MATERIAL,this._material);var k=new f("GridLocalOrigin",{isPickable:!1});d.add(t.ContentType.LAYER,k);this._object=new p({name:"GridLocalOrigin",idHint:"GridLocalOrigin",castShadow:!1});d.add(t.ContentType.OBJECT,this._object);k.addObject(this._object);d.addToViewContent([k.id])}for(var l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],m=l.length,u=new Float32Array(3*m),k=new Uint32Array(2*(m-1)),w=.5*this._gridSize,y=0;y<m;y++)u[3*y+0]=a[0]+(l[y]&1?w:
-w),u[3*y+1]=a[1]+(l[y]&2?w:-w),u[3*y+2]=a[2]+(l[y]&4?w:-w),0<y&&(k[2*y+0]=y-1,k[2*y+1]=y);g.bufferToBuffer(u,h.WebMercator,0,u,b.spatialReference,0,m);b={};b[q.VertexAttrConstants.POSITION]={size:3,data:u};u={};u[q.VertexAttrConstants.POSITION]=k;k=new c(b,u,void 0,"line");k=new e(k,"GridLocalOriginBox");d.add(t.ContentType.GEOMETRY,k);this._object.addGeometry(k,this._material,x);console.log(this._origins.size,a)};return b}();var x=l.mat4f64.create(),w=b.vec3f64.create();(r||(r={})).testOrigin=null;
return r})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("require exports ./BoundingInfo ./ComponentUtils ./geometryDataUtils ./IdGen ./Util ./Util".split(" "),function(r,d,n,l,k,b,h,g){return function(){function e(b,f,a){this.singleUse=!1;this._componentAABBs=this._boundingInfo=null;this._id=e.__idGen.gen(f);this._data=b;this._boundingInfo=a}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"data",
{get:function(){return this._data},enumerable:!0,configurable:!0});e.prototype.getIndices=function(b){return this.data.getIndices(b)};Object.defineProperty(e.prototype,"indexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});e.prototype.getAttribute=function(b){return this.data.getAttribute(b)};Object.defineProperty(e.prototype,"componentCount",{get:function(){return l.componentCount(this.data.componentOffsets)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"componentOffsets",{get:function(){return this.data.componentOffsets},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"vertexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"faceCount",{get:function(){return this.data.indexCount/3},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"boundingInfo",{get:function(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo},
enumerable:!0,configurable:!0});e.prototype.invalidateBoundingInfo=function(){this._componentAABBs=this._boundingInfo=null};e.prototype.getComponentAABB=function(b,e){null==this._componentAABBs&&(this._componentAABBs=this._computeComponentAABBs());for(var a=0;6>a;a++)e[a]=this._componentAABBs[6*b+a];return e};e.prototype._computeComponentAABBs=function(){for(var b=this.componentCount,e=new Float32Array(6*b),a=0;a<b;a++)this._calculateAABB(a,e,6*a);return e};e.prototype._calculateAABB=function(b,e,
a){void 0===a&&(a=0);var c=this.data.getIndices(g.VertexAttrConstants.POSITION),f=this.data.getAttribute(g.VertexAttrConstants.POSITION),d=this.data.componentOffsets,h=d.length?d[b+1]:c.length,k=Infinity,l=Infinity,w=Infinity,m=-Infinity,u=-Infinity,z=-Infinity,B=f.offsetIdx,n=f.strideIdx;for(b=d.length?d[b]:0;b<h;b++)var F=B+n*c[b],d=f.data[F],E=f.data[F+1],F=f.data[F+2],k=Math.min(k,d),l=Math.min(l,E),w=Math.min(w,F),m=Math.max(m,d),u=Math.max(u,E),z=Math.max(z,F);e[a]=k;e[a+1]=l;e[a+2]=w;e[a+3]=
m;e[a+4]=u;e[a+5]=z};e.prototype._calculateBoundingInfo=function(){var b=this.data.getIndices(g.VertexAttrConstants.POSITION),e=this.data.getAttribute(g.VertexAttrConstants.POSITION),a="triangle"===this.data.primitiveType?3:1;if(0===b.length)for(var b=new Uint32Array(a),d=0;d<a;++d)b[d]=d;d=b.length;h.assert(0===d%a,"Indexing error: "+d.toFixed(0)+" not divisible by "+a.toFixed(0));d=k.generateDefaultIndexArray(d/a);return new n(d,a,b,e)};e.__idGen=new b;return e}()})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define("require exports ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./Util".split(" "),
function(r,d,n,l,k,b){r=function(){function d(g,e,c,f){b.assert(1<=g.length);b.assert(0===c.length%e);b.assert(c.length>=g.length*e);b.assert(3===f.size||4===f.size);this.primitiveIndices=g;this.indices=c;this._position=f;this._numIndexPerPrimitive=e;var a=f.data,h=f.offsetIdx,q=f.strideIdx;f=0;var v=g.length,t=h+q*c[e*g[f]];d.tmpIndices.clear();d.tmpIndices.push(t);this.bbMin=k.vec3f64.fromValues(a[t],a[t+1],a[t+2]);for(this.bbMax=k.vec3f64.clone(this.bbMin);f<v;++f)for(var y=e*g[f],x=0;x<e;++x){t=
h+q*c[y+x];d.tmpIndices.push(t);var w=a[t];this.bbMin[0]=Math.min(w,this.bbMin[0]);this.bbMax[0]=Math.max(w,this.bbMax[0]);w=a[t+1];this.bbMin[1]=Math.min(w,this.bbMin[1]);this.bbMax[1]=Math.max(w,this.bbMax[1]);w=a[t+2];this.bbMin[2]=Math.min(w,this.bbMin[2]);this.bbMax[2]=Math.max(w,this.bbMax[2])}this.center=k.vec3f64.create();l.vec3.lerp(this.center,this.bbMin,this.bbMax,.5);this.bsRadius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);
g=this.bsRadius*this.bsRadius;for(f=0;f<d.tmpIndices.length;++f)t=d.tmpIndices.data[f],e=a[t]-this.center[0],c=a[t+1]-this.center[1],t=a[t+2]-this.center[2],h=e*e+c*c+t*t,h<=g||(h=Math.sqrt(h),q=.5*(h-this.bsRadius),this.bsRadius+=q,g=this.bsRadius*this.bsRadius,h=q/h,this.center[0]+=e*h,this.center[1]+=c*h,this.center[2]+=t*h);d.tmpIndices.clear()}d.prototype.getCenter=function(){return this.center};d.prototype.getBSRadius=function(){return this.bsRadius};d.prototype.getBBMin=function(){return this.bbMin};
d.prototype.getBBMax=function(){return this.bbMax};d.prototype.getPrimitiveIndices=function(){return this.primitiveIndices};d.prototype.getIndices=function(){return this.indices};d.prototype.getPosition=function(){return this._position};d.prototype.getChildren=function(){if(this.children)return this.children;if(1<l.vec3.squaredDistance(this.bbMin,this.bbMax)){for(var b=l.vec3.lerp(k.vec3f64.create(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,c=new Uint8Array(e),f=Array(8),a=0;8>a;++a)f[a]=
0;for(var a=this._position,h=a.data,q=a.offsetIdx,v=a.strideIdx,a=0;a<e;++a){for(var t=0,y=this._numIndexPerPrimitive*this.primitiveIndices[a],x=q+v*this.indices[y],w=h[x],m=h[x+1],u=h[x+2],z=1;z<this._numIndexPerPrimitive;++z){var x=q+v*this.indices[y+z],B=h[x],n=h[x+1],x=h[x+2];B<w&&(w=B);n<m&&(m=n);x<u&&(u=x)}w<b[0]&&(t|=1);m<b[1]&&(t|=2);u<b[2]&&(t|=4);c[a]=t;++f[t]}for(a=b=0;8>a;++a)0<f[a]&&++b;if(2>b)return;b=Array(8);for(a=0;8>a;++a)b[a]=0<f[a]?new Uint32Array(f[a]):void 0;for(a=0;8>a;++a)f[a]=
0;for(a=0;a<e;++a)t=c[a],b[t][f[t]++]=this.primitiveIndices[a];this.children=Array(8);for(a=0;8>a;++a)void 0!==b[a]&&(this.children[a]=new d(b[a],this._numIndexPerPrimitive,this.indices,this._position))}return this.children};return d}();(r||(r={})).tmpIndices=new n({deallocator:null});return r})},"esri/views/3d/webgl-engine/lib/Layer":function(){define("require exports ../../../../core/arrayUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./IdGen ./ModelContentType ./Octree".split(" "),
function(r,d,n,l,k,b,h,g){return function(){function e(b,f,a){this._parentStages=[];this._children=new Set;this.id=e._idGen.gen(b);this.apiLayerUid=a;this.name=b;f=f||{};this.group=f.group||"";this.isVisible=null!=f.isVisible?f.isVisible:!0;this.isPickable=null!=f.isPickable?f.isPickable:!0;this.isSliceable=!1;this.translation=f.translation?k.vec3f64.clone(f.translation):k.vec3f64.create();this._extent=[k.vec3f64.fromValues(0,0,0),k.vec3f64.fromValues(1E3,1E3,1E3)];this._extentDirty=!0}e.prototype.addParentStage=
function(b){-1===this._parentStages.indexOf(b)&&this._parentStages.push(b)};e.prototype.removeParentStage=function(b){b=this._parentStages.indexOf(b);-1<b&&this._parentStages.splice(b,1);this.invalidateSpatialQueryAccelerator()};e.prototype.getName=function(){return this.name};e.prototype.getGroup=function(){return this.group};e.prototype.getTranslation=function(){return this.translation};e.prototype.getObjectIds=function(){return n.keysOfSet(this._children,function(b){return b.id})};e.prototype.getObjects=
function(){return n.keysOfSet(this._children)};e.prototype.getExtent=function(){this._updateExtent();return this._extent};e.prototype.addObject=function(b){this._children.add(b);b.parentLayer=this;this.notifyDirty("layObjectAdded",b);this._invalidateExtent();this._octree&&this._octree.add(b)};e.prototype.hasObject=function(b){return this._children.has(b)};e.prototype.removeObject=function(b){return this._children.delete(b)?(b.parentLayer=null,this.notifyDirty("layObjectRemoved",b),this._invalidateExtent(),
this._octree&&this._octree.remove(b),!0):!1};e.prototype.notifyObjectBBChanged=function(b,e){this._octree&&this._octree.update(b,e)};e.prototype.getCenter=function(){this._updateExtent();var b=k.vec3f64.create();return l.vec3.lerp(b,this._extent[0],this._extent[1],.5)};e.prototype.getBSRadius=function(){this._updateExtent();return.5*l.vec3.distance(this._extent[0],this._extent[1])};e.prototype.getSpatialQueryAccelerator=function(){!this._octree&&50<this._children.size&&this._createOctree();return this._octree};
e.prototype.shaderTransformationChanged=function(){this.notifyDirty("shaderTransformationChanged",null)};e.prototype.invalidateSpatialQueryAccelerator=function(){this._octree&&(this._octree.destroy(),this._octree=null)};e.prototype.notifyDirty=function(b,e,a,d){a=a||h.LAYER;d=d||this;for(var c=0;c<this._parentStages.length;c++)this._parentStages[c].notifyDirty(a,d,b,e)};e.prototype._createOctree=function(){for(var b=this.getExtent(),e=0,a=0;3>a;a++)e=Math.max(e,b[1][a]-b[0][a]);a=k.vec3f64.create();
l.vec3.lerp(a,b[0],b[1],.5);this._octree=new g(a,1.2*e,{getRadius:function(a){return a.getBSRadius()},getCenter:function(a){return a.getCenter()}});this._octree.add(n.keysOfSet(this._children))};e.prototype._invalidateExtent=function(){this._extentDirty=!0};e.prototype._updateExtent=function(){var b=this;if(this._extentDirty)if(this._extentDirty=!1,0===this._children.size)this._extent=[[0,0,0],[0,0,0]];else{var e=null;this._children.forEach(function(a){var c=a.getBBMin();a=a.getBBMax();if(e)for(var f=
0;3>f;++f)b._extent[0][f]=Math.min(b._extent[0][f],c[f]),b._extent[1][f]=Math.max(b._extent[1][f],a[f]);else e=[k.vec3f64.clone(c),k.vec3f64.clone(a)]});this._extent=e}};e._idGen=new b;return e}()})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("require exports ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ./Util".split(" "),function(r,d,n,l,k,b,h,g){function e(a,b,
c){c=c||a;c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c}function c(a,b,c){return!h.frustum.intersectsSphere(c.planes,h.sphere.wrap(b,a))}function f(a,b,c){if(!K.length)for(var e=0;8>e;++e)K.push({index:0,distance:0});for(e=0;8>e;++e){var f=v[e];K.data[e].index=e;K.data[e].distance=p(a,b,f)}K.sort(function(a,b){return a.distance-b.distance});c.clear();for(e=0;8>e;++e)c.push(K.data[e].index)}function a(a,b){for(var c=Infinity,e=null,f=0;8>f;++f){var d=p(a,b,t[f]);d<c&&(c=d,e=t[f])}return e}function p(a,
b,c){return b*(a[0]*c[0]+a[1]*c[1]+a[2]*c[2])}r=function(){function d(a,c,e,f){this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._objectCount=0;this._objectToBoundingSphere=e;f&&(void 0!==f.maximumObjectsPerNode&&(this._maximumObjectsPerNode=f.maximumObjectsPerNode),void 0!==f.maximumDepth&&(this._maximumDepth=f.maximumDepth));isNaN(a[0])||isNaN(a[1])||isNaN(a[2])||isNaN(c)?this._root=new q(null,b.vec3f64.fromValues(0,0,0),.5):this._root=new q(null,a,c/2)}Object.defineProperty(d.prototype,
"center",{get:function(){return this._root.center},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return 2*this._root.halfSize},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"root",{get:function(){return this._root.node},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maximumObjectsPerNode",{get:function(){return this._maximumObjectsPerNode},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maximumDepth",
{get:function(){return this._maximumDepth},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"objectCount",{get:function(){return this._objectCount},enumerable:!0,configurable:!0});d.prototype.destroy=function(){this._degenerateObjects.clear();this._root=null;q.clearPool();x=[null];B.prune();K.prune();O.prune()};d.prototype.add=function(a,b){a=this._objectOrObjectsArray(a);b=null==b?a.length:b;this._objectCount+=b;this._grow(a);for(var c=q.acquire(),e=0;e<b;e++){var f=a[e];c.init(this._root);
this._isDegenerate(f)?this._degenerateObjects.add(f):this._add(f,c)}q.release(c)};d.prototype.remove=function(a,b){a=this._objectOrObjectsArray(a);this._objectCount-=a.length;for(var c=q.acquire(),e=0;e<a.length;e++){var f=a[e],d=b||this._boundingSphereFromObject(f,C);this._isValidRadius(d.radius)?(c.init(this._root),this._remove(f,d,c)):this._degenerateObjects.delete(f)}q.release(c);this._shrink()};d.prototype.update=function(a,b){if(this._isValidRadius(b.radius)||!this._isDegenerate(a))this.remove(a,
b),this.add(a)};d.prototype.forEachAlongRay=function(a,b,c){var e=this;this._forEachNode(this._root,function(f){if(!e._intersectsNode(a,b,f))return!1;f=f.node;f.terminals.forEach(function(f){e._intersectsObject(a,b,f)&&c(f)});null!==f.residents&&f.residents.forEach(function(f){e._intersectsObject(a,b,f)&&c(f)});return!0})};d.prototype.forEach=function(a){this._forEachNode(this._root,function(b){b=b.node;b.terminals.forEach(a);null!==b.residents&&b.residents.forEach(a);return!0});this._degenerateObjects.forEach(a)};
d.prototype.forEachDegenerateObject=function(a){this._degenerateObjects.forEach(a)};d.prototype.findClosest=function(a,b,c,e,f){return this._findClosest(a,"front-to-back"===b?1:-1,c,e,f)};d.prototype.forEachInDepthRange=function(a,b,c,e,f,d,g,h){this._forEachInDepthRange(a,b,"front-to-back"===c?1:-1,e,f,d,g,h)};d.prototype.forEachNode=function(a){this._forEachNode(this._root,function(b){return a(b.node,b.center,2*b.halfSize)})};d.prototype._intersectsNode=function(a,b,c){e(c.center,2*-c.halfSize,
u);e(c.center,2*c.halfSize,z);return g.rayBoxTest(a,b,u,z)};d.prototype._intersectsObject=function(a,b,c){var e=this._objectToBoundingSphere.getRadius(c);return 0<e?h.sphere.intersectsRay(h.sphere.wrap(e,this._objectToBoundingSphere.getCenter(c)),h.ray.wrap(a,b)):!0};d.prototype._forEachNode=function(a,b){a=q.acquire().init(a);for(var c=[a];0!==c.length;){a=c.pop();if(b(a)&&!a.isLeaf())for(var e=0;e<a.node.children.length;e++)a.node.children[e]&&c.push(q.acquire().init(a).advance(e));q.release(a)}};
d.prototype._forEachNodeDepthOrdered=function(a,b,c,e){void 0===e&&(e=1);a=q.acquire().init(a);var d=[a];for(f(c,e,O);0!==d.length;){a=d.pop();if(b(a)&&!a.isLeaf())for(c=7;0<=c;--c)e=O.data[c],e>=a.node.children.length||a.node.children[e]&&d.push(q.acquire().init(a).advance(e));q.release(a)}};d.prototype._findClosest=function(b,e,f,d,g){var h=this,l=Infinity,u=Infinity,q=null,z=a(b,e),t=0,w=function(a){++t;if(!d||d(a)){var g=h._objectToBoundingSphere.getCenter(a),k=h._objectToBoundingSphere.getRadius(a);
if(!f||!c(g,k,f)){var g=p(b,e,g),m=g-k;m<l&&(l=m,u=g+k,q=a)}}};this._forEachNodeDepthOrdered(this._root,function(a){if(null!=g&&t>=g||f&&c(a.center,a.halfSize*y,f))return!1;k.vec3.scale(m,z,a.halfSize);k.vec3.add(m,m,a.center);if(p(b,e,m)>u)return!1;a=a.node;a.terminals.forEach(function(a){w(a)});null!==a.residents&&a.residents.forEach(function(a){w(a)});return!0},b,e);return q};d.prototype._forEachInDepthRange=function(b,e,f,d,g,h,l,u){var q=this,z=-Infinity,t=Infinity,w={setRange:function(a){1===
f?(z=Math.max(z,a.near),t=Math.min(t,a.far)):(z=Math.max(z,-a.far),t=Math.min(t,-a.near))}};w.setRange(d);var x=p(e,f,b),v=a(e,f),B=a(e,-1*f),n=0,C=function(a){++n;if(!l||l(a)){var b=q._objectToBoundingSphere.getCenter(a),d=q._objectToBoundingSphere.getRadius(a),k=p(e,f,b)-x;k-d>t||k+d<z||h&&c(b,d,h)||g(a,w)}};this._forEachNodeDepthOrdered(this._root,function(a){if(null!=u&&n>=u||h&&c(a.center,a.halfSize*y,h))return!1;k.vec3.scale(m,v,a.halfSize);k.vec3.add(m,m,a.center);if(p(e,f,m)-x>t)return!1;
k.vec3.scale(m,B,a.halfSize);k.vec3.add(m,m,a.center);if(p(e,f,m)-x<z)return!1;a=a.node;a.terminals.forEach(function(a){C(a)});null!==a.residents&&a.residents.forEach(function(a){C(a)});return!0},e,f)};d.prototype._objectOrObjectsArray=function(a){if(Array.isArray(a))return a;x[0]=a;return x};d.prototype._remove=function(a,b,c){B.clear();b=c.advanceTo(b,function(a,b){B.push(a.node);B.push(b)})?c.node.terminals:c.node.residents;b.removeUnordered(a);if(0===b.length)for(a=B.length-2;0<=a&&this._purge(B.data[a],
B.data[a+1]);a-=2);};d.prototype._nodeIsEmpty=function(a){if(0!==a.terminals.length)return!1;if(null!==a.residents)return 0===a.residents.length;for(var b=0;b<a.children.length;b++)if(a.children[b])return!1;return!0};d.prototype._purge=function(a,b){0<=b&&(a.children[b]=null);return this._nodeIsEmpty(a)?(null===a.residents&&(a.residents=new l({shrink:!0})),!0):!1};d.prototype._add=function(a,b){b.advanceTo(this._boundingSphereFromObject(a,C))?b.node.terminals.push(a):(b.node.residents.push(a),b.node.residents.length>
this._maximumObjectsPerNode&&b.depth<this._maximumDepth&&this._split(b))};d.prototype._split=function(a){var b=a.node.residents;a.node.residents=null;for(var c=0;c<b.length;c++){var e=q.acquire().init(a);this._add(b.data[c],e);q.release(e)}};d.prototype._grow=function(a){var b=this;if(0!==a.length&&(a=this._boundingSphereFromObjects(a,function(a,c){return b._boundingSphereFromObject(a,c)},F),this._isValidRadius(a.radius)&&!this._fitsInsideTree(a)))if(this._nodeIsEmpty(this._root.node))k.vec3.copy(this._root.center,
a.center),this._root.halfSize=1.25*a.radius;else{var c=q.acquire();this._rootBoundsForRootAsSubNode(a,c);this._placingRootViolatesMaxDepth(c)?this._rebuildTree(a,c):this._growRootAsSubNode(c);q.release(c)}};d.prototype._rebuildTree=function(a,b){var c=this;k.vec3.copy(E.center,b.center);E.radius=b.halfSize;a=this._boundingSphereFromObjects([a,E],function(a){return a},N);b=q.acquire().init(this._root);this._root.initFrom(null,a.center,1.25*a.radius);this._forEachNode(b,function(a){c.add(a.node.terminals.data,
a.node.terminals.length);null!==a.node.residents&&c.add(a.node.residents.data,a.node.residents.length);return!0});q.release(b)};d.prototype._placingRootViolatesMaxDepth=function(a){var b=0;this._forEachNode(this._root,function(a){b=Math.max(b,a.depth);return!0});return b+Math.log(a.halfSize/this._root.halfSize)*Math.LOG2E>this._maximumDepth};d.prototype._rootBoundsForRootAsSubNode=function(a,b){var c=a.radius,e=a.center;a=-Infinity;for(var f=this._root.center,d=this._root.halfSize,g=0;3>g;g++){var h=
Math.max(0,Math.ceil((f[g]-d-(e[g]-c))/(2*d))),k=Math.max(0,Math.ceil((e[g]+c-(f[g]+d))/(2*d)))+1;a=Math.max(a,Math.pow(2,Math.ceil(Math.log(h+k)*Math.LOG2E)));L[g].min=h;L[g].max=k}for(g=0;3>g;g++)h=L[g].min,k=L[g].max,c=(a-(h+k))/2,h+=Math.ceil(c),k+=Math.floor(c),w[g]=f[g]-d-h*d*2+(k+h)*d;return b.initFrom(null,w,a*d,0)};d.prototype._growRootAsSubNode=function(a){var b=this._root.node;k.vec3.copy(F.center,this._root.center);F.radius=this._root.halfSize;this._root.init(a);a.advanceTo(F,null,!0);
a.node.children=b.children;a.node.residents=b.residents;a.node.terminals=b.terminals};d.prototype._shrink=function(){for(;;){var a=this._findShrinkIndex();if(-1===a)break;this._root.advance(a);this._root.depth=0}};d.prototype._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var a=null,b=this._root.node.children,c=0,e=0;e<b.length&&null==a;)c=e++,a=b[c];for(;e<b.length;)if(b[e++])return-1;return c};d.prototype._isDegenerate=function(a){a=this._objectToBoundingSphere.getRadius(a);
return!this._isValidRadius(a)};d.prototype._isValidRadius=function(a){return!isNaN(a)&&-Infinity!==a&&Infinity!==a&&0<a};d.prototype._fitsInsideTree=function(a){var b=this._root.center,c=this._root.halfSize,e=a.center;return a.radius<=c&&e[0]>=b[0]-c&&e[0]<=b[0]+c&&e[1]>=b[1]-c&&e[1]<=b[1]+c&&e[2]>=b[2]-c&&e[2]<=b[2]+c};d.prototype._boundingSphereFromObject=function(a,b){k.vec3.copy(b.center,this._objectToBoundingSphere.getCenter(a));b.radius=this._objectToBoundingSphere.getRadius(a);return b};d.prototype._boundingSphereFromObjects=
function(a,b,c){if(1===a.length){var e=b(a[0],F);k.vec3.copy(c.center,e.center);c.radius=e.radius}else{u[0]=Infinity;u[1]=Infinity;u[2]=Infinity;z[0]=-Infinity;z[1]=-Infinity;z[2]=-Infinity;for(var f=0;f<a.length;f++)if(e=b(a[f],F),this._isValidRadius(e.radius)){var d=u,g=e.center,h=e.radius;d[0]=Math.min(d[0],g[0]-h);d[1]=Math.min(d[1],g[1]-h);d[2]=Math.min(d[2],g[2]-h);d=z;g=e.center;e=e.radius;d[0]=Math.max(d[0],g[0]+e);d[1]=Math.max(d[1],g[1]+e);d[2]=Math.max(d[2],g[2]+e)}k.vec3.lerp(c.center,
u,z,.5);c.radius=Math.max(z[0]-u[0],z[1]-u[1],z[2]-u[2])/2}return c};return d}();var q=function(){function a(a,c,e,f){void 0===e&&(e=0);void 0===f&&(f=0);this.center=b.vec3f64.create();this.initFrom(a,c,e,0)}a.prototype.init=function(a){return this.initFrom(a.node,a.center,a.halfSize,a.depth)};a.prototype.initFrom=function(b,c,e,f){void 0===b&&(b=null);void 0===e&&(e=this.halfSize);void 0===f&&(f=this.depth);this.node=b||a.createEmptyNode();c&&k.vec3.copy(this.center,c);this.halfSize=e;this.depth=
f;return this};a.prototype.advance=function(b){var c=this.node.children[b];c||(c=a.createEmptyNode(),this.node.children[b]=c);this.node=c;this.halfSize/=2;this.depth++;b=v[b];this.center[0]+=b[0]*this.halfSize;this.center[1]+=b[1]*this.halfSize;this.center[2]+=b[2]*this.halfSize;return this};a.prototype.advanceTo=function(a,b,c){for(void 0===c&&(c=!1);;){if(this.isTerminalFor(a))return b&&b(this,-1),!0;if(this.isLeaf()&&!c)return b&&b(this,-1),!1;this.isLeaf()&&(this.node.residents=null);var e=this._childIndex(a);
b&&b(this,e);this.advance(e)}};a.prototype.isLeaf=function(){return null!=this.node.residents};a.prototype.isTerminalFor=function(a){return a.radius>this.halfSize/2};a.prototype._childIndex=function(a){a=a.center;for(var b=this.center,c=0,e=0;3>e;e++)b[e]<a[e]&&(c|=1<<e);return c};a.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new l({shrink:!0}),residents:new l({shrink:!0})}};a.acquire=function(){return a._pool.acquire()};a.release=function(b){a._pool.release(b)};
a.clearPool=function(){a._pool.prune()};a._pool=new n(a);return a}(),v=[b.vec3f64.fromValues(-1,-1,-1),b.vec3f64.fromValues(1,-1,-1),b.vec3f64.fromValues(-1,1,-1),b.vec3f64.fromValues(1,1,-1),b.vec3f64.fromValues(-1,-1,1),b.vec3f64.fromValues(1,-1,1),b.vec3f64.fromValues(-1,1,1),b.vec3f64.fromValues(1,1,1)],t=[b.vec3f64.fromValues(-1,-1,-1),b.vec3f64.fromValues(-1,-1,1),b.vec3f64.fromValues(-1,1,-1),b.vec3f64.fromValues(-1,1,1),b.vec3f64.fromValues(1,-1,-1),b.vec3f64.fromValues(1,-1,1),b.vec3f64.fromValues(1,
1,-1),b.vec3f64.fromValues(1,1,1)],y=Math.sqrt(3),x=[null],w=b.vec3f64.create(),m=b.vec3f64.create(),u=b.vec3f64.create(),z=b.vec3f64.create(),B=new l,C={center:b.vec3f64.create(),radius:0},F={center:b.vec3f64.create(),radius:0},E={center:b.vec3f64.create(),radius:0},N={center:b.vec3f64.create(),radius:0},L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],K=new l,O=new l;return r})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterial ../lib/Material ../lib/Util ./VisualVariableMaterialParameters ./internal/MaterialUtil ./renderers/InstancedRenderer ./renderers/MergedRenderer ../shaders/RibbonLinePrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){function B(a,b){b.vvSizeEnabled&&(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors));b.vvOpacityEnabled&&(a.setUniform1fv("vvOpacityValues",b.vvOpacityValues),a.setUniform1fv("vvOpacityOpacities",
b.vvOpacityOpacities))}var C=k.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");r=function(c){function d(a,b){b=c.call(this,b)||this;b.params=x.copyParameters(a,N);"miter"!==b.params.join&&(b.params.miterLimit=0);b.params.transparent=1>b.params.color[3]||b.params.transparent;b.canBeMerged=null==b.params.stippleLength;b.layout=b.createLayout();return b}n(d,c);d.prototype.getColor=function(){return this.params.color};d.prototype.dispose=function(){};d.prototype.setParameterValues=
function(a){for(var b in a)t.assert("cap"!==b,"RibbonLineMaterial: cap cannot be changed after creation"),t.assert("stippleLength"!==b||null!=a[b]===(null!=this.params[b]),"RibbonLineMaterial: stippleLength on/off cannot be changed after creation"),this.params[b]=a[b];"miter"!==this.params.join&&(this.params.miterLimit=0);this.notifyDirty("matChanged")};d.prototype.getParameters=function(){return this.params};d.prototype.intersect=function(a,b,c,e,f,d,g,h,k){k?x.intersectDrapedRenderLineGeometry(a,
b,c,e,f,d,this.params.width,g):this.intersectLineGeometry(a,b,c,e,f,d,this.params.width,g)};d.prototype.intersectLineGeometry=function(a,c,d,h,k,l,m,q,z){if(h.enable.selectionMode&&!p.isAllHidden(c.componentVisibilities,a.componentOffsets))if(t.isTranslationMatrix(d)){c=a.data.getVertexAttr();a=c[u.VertexAttrConstants.POSITION].data;this.params.vvSizeEnabled?m*=b.clamp(this.params.vvSizeOffset[0]+c[u.VertexAttrConstants.SIZEFEATUREATTRIBUTE].data[0]*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],
this.params.vvSizeMaxSize[0]):c[u.VertexAttrConstants.SIZE]&&(m*=c[u.VertexAttrConstants.SIZE].data[0]);k=h.camera;l=T;g.vec2.copy(l,h.point);m=m*k.pixelRatio/2+4*k.pixelRatio;e.vec3.set(la[0],l[0]-m,l[1]+m,0);e.vec3.set(la[1],l[0]+m,l[1]+m,0);e.vec3.set(la[2],l[0]+m,l[1]-m,0);e.vec3.set(la[3],l[0]-m,l[1]-m,0);for(z=0;4>z;z++)k.unprojectPoint(la[z],ja[z]);f.plane.fromPoints(k.eye,ja[0],ja[1],na);f.plane.fromPoints(k.eye,ja[1],ja[2],pa);f.plane.fromPoints(k.eye,ja[2],ja[3],ta);f.plane.fromPoints(k.eye,
ja[3],ja[0],aa);c=Number.MAX_VALUE;for(z=0;z<a.length-5;z+=3)if(H[0]=a[z]+d[12],H[1]=a[z+1]+d[13],H[2]=a[z+2]+d[14],S[0]=a[z+3]+d[12],S[1]=a[z+4]+d[13],S[2]=a[z+5]+d[14],!(0>f.plane.signedDistance(na,H)&&0>f.plane.signedDistance(na,S)||0>f.plane.signedDistance(pa,H)&&0>f.plane.signedDistance(pa,S)||0>f.plane.signedDistance(ta,H)&&0>f.plane.signedDistance(ta,S)||0>f.plane.signedDistance(aa,H)&&0>f.plane.signedDistance(aa,S))){k.projectPoint(H,Z);k.projectPoint(S,Q);if(0>Z[2]&&0<Q[2]){e.vec3.subtract(P,
H,S);var w=k.frustum,x=-f.plane.signedDistance(w.planes[4],H),w=x/e.vec3.dot(P,w.planes[4]);e.vec3.scale(P,P,w);e.vec3.add(H,H,P);k.projectPoint(H,Z)}else if(0<Z[2]&&0>Q[2])e.vec3.subtract(P,S,H),w=k.frustum,x=-f.plane.signedDistance(w.planes[4],S),w=x/e.vec3.dot(P,w.planes[4]),e.vec3.scale(P,P,w),e.vec3.add(S,S,P),k.projectPoint(S,Q);else if(0>Z[2]&&0>Q[2])continue;Z[2]=0;Q[2]=0;w=f.lineSegment.distance2(f.lineSegment.fromPoints(Z,Q,U),l);w<c&&(c=w,e.vec3.copy(J,H),e.vec3.copy(R,S))}d=h.rayBeginPoint;
h=h.rayEndPoint;c<m*m&&(a=Number.MAX_VALUE,f.lineSegment.closestLineSegmentPoint(f.lineSegment.fromPoints(J,R,U),f.lineSegment.fromPoints(d,h,X),V)&&(e.vec3.subtract(V,V,d),a=e.vec3.length(V),e.vec3.scale(V,V,1/a),a/=e.vec3.distance(d,h)),q(a,V))}else C.error("intersection assumes a translation-only matrix")};d.prototype.createLayout=function(){var b=a.newLayout().vec3f(u.VertexAttrConstants.POSITION).f32(u.VertexAttrConstants.SUBDIVISIONFACTOR).vec2f(u.VertexAttrConstants.UV0).vec3f(u.VertexAttrConstants.AUXPOS1).vec3f(u.VertexAttrConstants.AUXPOS2);
this.params.vvSizeEnabled?b.f32(u.VertexAttrConstants.SIZEFEATUREATTRIBUTE):b.f32(u.VertexAttrConstants.SIZE);this.params.vvColorEnabled?b.f32(u.VertexAttrConstants.COLORFEATUREATTRIBUTE):b.vec4f(u.VertexAttrConstants.COLOR);this.params.vvOpacityEnabled&&b.f32(u.VertexAttrConstants.OPACITYFEATUREATTRIBUTE);return b};d.prototype.createBufferWriter=function(){return new L(this.layout,this.params)};d.prototype.createRenderer=function(a,b){return this.canBeMerged?new m(a,b,this,u.vertexAttributeLocations):
new w(a,b,this,u.vertexAttributeLocations)};d.prototype.getGLMaterials=function(){return{color:F,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:E}};return d}(v);var F=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=x.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.beginSlot=function(a){return a===(this.params.writeDepth?7:10)};b.prototype.getProgram=function(){return this.program};
b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(u.colorPass,{stipple:null!=a.stippleLength,slice:a.slicePlaneEnabled,join:a.join,cap:a.cap,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled});this.pipelineState=z.makePipelineState({blending:z.separateBlendingParams(770,1,771,771),polygonOffset:a.polygonOffset&&K,depthTest:{func:513},depthWrite:!a.transparent&&a.writeDepth&&z.defaultDepthWriteParams,colorWrite:z.defaultColorWriteParams})};
b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform1f("symbolLineWidth",e.width);c.setUniform4fv("symbolColor",e.color);c.setUniform1f("miterLimit",e.miterLimit);c.setUniform1f("nearPlane",b.nearFar[0]);c.setUniform1f("pixelRatio",b.pixelRatio);c.setUniform2fv("screenSize",[b.viewport[2],b.viewport[3]]);null!=e.stippleLength&&c.setUniform1f("stippleLengthDoubleInv",e.stippleLength?1/(2*e.stippleLength):0);B(c,e)};b.prototype.release=
function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params;x.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&x.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 5};return b}(q),E=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=x.copyParameters(this.material.getParameters());
this.selectProgram()};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(u.highlightPass,{stipple:null!=a.stippleLength,slice:a.slicePlaneEnabled,join:a.join,cap:a.cap,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled});this.pipelineState=z.makePipelineState({polygonOffset:a.polygonOffset&&K,depthTest:{func:513},depthWrite:!a.transparent&&
a.writeDepth&&z.defaultDepthWriteParams,colorWrite:z.defaultColorWriteParams})};b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);x.bindHighlightRendering(a,b,c);c.setUniform1f("symbolLineWidth",e.width);c.setUniform4fv("symbolColor",e.color);c.setUniform1f("miterLimit",e.miterLimit);c.setUniform1f("nearPlane",b.nearFar[0]);c.setUniform1f("pixelRatio",b.pixelRatio);c.setUniform2fv("screenSize",[b.viewport[2],b.viewport[3]]);null!=
e.stippleLength&&c.setUniform1f("stippleLengthDoubleInv",e.stippleLength?1/(2*e.stippleLength):0);B(c,e)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params;x.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&x.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 5};return b}(q),N=l({width:0,color:[1,1,1,1],join:"miter",
cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stippleLength:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1},y.Default),L=function(){function a(a,b){this.parms=b;this.numJoinSubdivisions=this.numCapSubdivisions=0;this.canBeMerged=!1;this.vertexBufferLayout=a;this.canBeMerged=null==this.parms.stippleLength;switch(this.parms.cap){case "butt":this.numCapSubdivisions=0;break;case "square":this.numCapSubdivisions=1;break;case "round":this.numCapSubdivisions=O}switch(this.parms.join){case "miter":case "bevel":this.numJoinSubdivisions=
0;break;case "round":this.numJoinSubdivisions=I}}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){var b=a.indices[u.VertexAttrConstants.POSITION].length/2+1,c=2*(2*this.numCapSubdivisions+2);if(a.vertexAttr[u.VertexAttrConstants.SUBDIVISIONS]){a=a.vertexAttr[u.VertexAttrConstants.SUBDIVISIONS].data;for(var e=1;e<b-1;++e)c+=4+2*a[e]}else c+=(b-2)*(2*this.numJoinSubdivisions+4);this.canBeMerged&&(c+=2);return c};a.prototype.write=
function(a,b,c,f){var d=this,g=ca,h=G,k=Y,l=b.vertexAttr[u.VertexAttrConstants.POSITION].data,p=b.indices&&b.indices[u.VertexAttrConstants.POSITION];p&&p.length!==2*(l.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");p=null;b.vertexAttr[u.VertexAttrConstants.SUBDIVISIONS]&&(p=b.vertexAttr[u.VertexAttrConstants.SUBDIVISIONS].data);var m=1,q=0;this.parms.vvSizeEnabled?q=b.vertexAttr[u.VertexAttrConstants.SIZEFEATUREATTRIBUTE].data[0]:b.vertexAttr[u.VertexAttrConstants.SIZE]&&
(m=b.vertexAttr[u.VertexAttrConstants.SIZE].data[0]);var z=[1,1,1,1],t=0;this.parms.vvColorEnabled?t=b.vertexAttr[u.VertexAttrConstants.COLORFEATUREATTRIBUTE].data[0]:b.vertexAttr[u.VertexAttrConstants.COLOR]&&(z=b.vertexAttr[u.VertexAttrConstants.COLOR].data);var w=0;this.parms.vvOpacityEnabled&&(w=b.vertexAttr[u.VertexAttrConstants.OPACITYFEATUREATTRIBUTE].data[0]);b=l.length/3;a=a.transformation;var x=new Float32Array(c.buffer),y=0;c=this.vertexBufferLayout.stride/4;var v=f*c,B=v,n=function(a,
b,c,e,f,g){x[v++]=b[0];x[v++]=b[1];x[v++]=b[2];x[v++]=e;x[v++]=f;x[v++]=g;x[v++]=a[0];x[v++]=a[1];x[v++]=a[2];x[v++]=c[0];x[v++]=c[1];x[v++]=c[2];d.parms.vvSizeEnabled?x[v++]=q:x[v++]=m;d.parms.vvColorEnabled?x[v++]=t:(x[v++]=z[0],x[v++]=z[1],x[v++]=z[2],x[v++]=z[3]);d.parms.vvOpacityEnabled&&(x[v++]=w)};this.canBeMerged&&(v+=c);e.vec3.set(g,l[0],l[1],l[2]);a&&e.vec3.transformMat4(g,g,a);e.vec3.set(k,l[3],l[4],l[5]);a&&e.vec3.transformMat4(k,k,a);e.vec3.copy(h,g);for(f=0;f<this.numCapSubdivisions;++f){var C=
1-f/this.numCapSubdivisions;n(g,h,k,C,y,-4);n(g,h,k,C,y,4)}n(g,h,k,0,y,-4);n(g,h,k,0,y,4);e.vec3.copy(g,h);e.vec3.copy(h,k);for(f=1;f<b-1;f++){C=3*f;e.vec3.set(k,l[C+3],l[C+4],l[C+5]);a&&e.vec3.transformMat4(k,k,a);y+=e.vec3.distance(g,h);n(g,h,k,0,y,-1);n(g,h,k,0,y,1);for(var I=p?p[f]:this.numJoinSubdivisions,H=0;H<I;++H)C=(H+1)/(I+1),n(g,h,k,C,y,-2),n(g,h,k,C,y,2);n(g,h,k,1,y,-2);n(g,h,k,1,y,2);e.vec3.copy(g,h);e.vec3.copy(h,k)}y+=e.vec3.distance(g,h);n(g,h,k,0,y,-5);n(g,h,k,0,y,5);for(f=0;f<this.numCapSubdivisions;++f)C=
(f+1)/this.numCapSubdivisions,n(g,h,k,C,y,-5),n(g,h,k,C,y,5);if(this.canBeMerged){for(f=B;f<B+c;f++)x[f]=x[f+c];g=v-c;for(f=0;f<c;f++)x[v++]=x[g++]}};return a}(),K={factor:0,units:-4},O=3,I=1,H=c.vec3f64.create(),S=c.vec3f64.create(),P=c.vec3f64.create(),V=c.vec3f64.create(),T=c.vec3f64.create(),Z=h.createRenderScreenPointArray3(),Q=h.createRenderScreenPointArray3(),J=c.vec3f64.create(),R=c.vec3f64.create(),U=f.lineSegment.create(),X=f.lineSegment.create(),ca=c.vec3f64.create(),G=c.vec3f64.create(),
Y=c.vec3f64.create(),la=[h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3(),h.createRenderScreenPointArray3()],ja=[c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create()],na=f.plane.create(),pa=f.plane.create(),ta=f.plane.create(),aa=f.plane.create();return r})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat3f64","../../../../core/libs/gl-matrix-2/vec3f32"],
function(r,d,n,l){var k;(k||(k={})).Default={vvSizeEnabled:!1,vvSizeMinSize:l.vec3f32.fromValues(1,1,1),vvSizeMaxSize:l.vec3f32.fromValues(100,100,100),vvSizeOffset:l.vec3f32.fromValues(0,0,0),vvSizeFactor:l.vec3f32.fromValues(1,1,1),vvSizeValue:l.vec3f32.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,
0,0],vvSymbolRotationMatrix:n.mat3f64.create()};return k})},"esri/views/3d/webgl-engine/materials/renderers/InstancedRenderer":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../support/buffer/glUtil ../../lib/DefaultVertexAttributeLocations ./Instance ./utils ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),function(r,d,n,l,k,b,h,g,e,c){function f(a,b){var c=new Map,e=function(a,b){var e=a.origin.id,f=a.data.id,
d=c.get(e);d||(d={origin:a.origin.vec3,deltaByGeometry:new Map},c.set(e,d));e=d.deltaByGeometry.get(f);e||(e={renderData:a.data,toAdd:[],toRemove:[]},d.deltaByGeometry.set(f,e));(b?e.toAdd:e.toRemove).push(a)};a.forEach(function(a){e(a,!0)});b.forEach(function(a){e(a,!1)});return c}function a(a,b,c){var e=b.elementCount(a),e=b.allocate(e);b.write({},a,e,0);c.setData(e.buffer)}return function(){function d(a,b,c,e){void 0===e&&(e=k.Default3D);this._dataByOrigin=new Map;this._highlightCount=0;this._rctx=
a;this._vertexAttributeLocations=e;this._material=c;this._materialRep=b;this._glMaterials=h.acquireMaterials(this._material,this._materialRep);this._bufferWriter=c.createBufferWriter()}d.prototype.dispose=function(){h.releaseMaterials(this._material,this._materialRep)};Object.defineProperty(d.prototype,"isEmpty",{get:function(){return 0===this._dataByOrigin.size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return 0<this._highlightCount},enumerable:!0,
configurable:!0});d.prototype.hasWater=function(){return!1};d.prototype.renderPriority=function(){return this._material.renderPriority};d.prototype.modify=function(a){this.updateGeometries(a.toUpdate);this.addAndRemoveGeometries(a.toAdd,a.toRemove);this.updateHighlightCount()};d.prototype.addAndRemoveGeometries=function(d,k){var p=this,q=this._rctx,x=this._bufferWriter,w=this._dataByOrigin;d=f(d,k);var m=x.vertexBufferLayout;d.forEach(function(f,d){var k=w.get(d);k||(k={origin:f.origin,highlightCount:0,
dataByGeometry:new Map},w.set(d,k));f.deltaByGeometry.forEach(function(f,d){var u=k.dataByGeometry.get(d);!u&&0<f.toAdd.length&&(u={vao:new c(q,p._vertexAttributeLocations,{geometry:l.glLayout(m)},{geometry:g.createVertex(q,35044)}),vertexCount:0,instances:new Map,highlightCount:0},a(f.renderData,x,u.vao.vertexBuffers.geometry),u.vertexCount=e.vertexCount(u.vao,"geometry"),k.dataByGeometry.set(d,u));var z=u.instances;f.toAdd.forEach(function(a){var c=n.mat4f64.create();h.calculateTransformRelToOrigin(a,
c);var e=h.generateRenderGeometryVisibleIndexRanges(a),f=h.generateRenderGeometryHighlightRanges(a),c=new b(a.name,0,u.vertexCount,e,f,c,a.instanceParameters,a.idx,a.data.id);z.set(a.uniqueName,c);k.highlightCount=null;u.highlightCount=null});f.toRemove.forEach(function(a){z.delete(a.uniqueName)});0===z.size&&(u.vao.dispose(),k.dataByGeometry.delete(d))});0===k.dataByGeometry.size&&w.delete(d)})};d.prototype.updateGeometries=function(b){var c=this._dataByOrigin,e=this._bufferWriter;b.forEach(function(b){var f=
b.updateType;b=b.renderGeometry;var d=c.get(b.origin.id),g=d&&d.dataByGeometry.get(b.data.id),k=g&&g.instances.get(b.uniqueName);k&&(f&1&&(k.displayedIndexRange=h.generateRenderGeometryVisibleIndexRanges(b)),f&17&&(k.highlightedIndexRanges=h.generateRenderGeometryHighlightRanges(b),d.highlightCount=null,g.highlightCount=null),f&2&&a(b.data,e,g.vao.vertexBuffers.geometry),f&4&&h.calculateTransformRelToOrigin(b,k.transformation,k.transformationNormal))})};d.prototype.updateHighlightCount=function(){var a=
this;this._highlightCount=0;this._dataByOrigin.forEach(function(b){if(null==b.highlightCount){var c=0;b.dataByGeometry.forEach(function(a){if(null==a.highlightCount){var b=0;a.instances.forEach(function(a){a.highlightedIndexRanges&&++b});a.highlightCount=b}c+=a.highlightCount});b.highlightCount=c}a._highlightCount+=b.highlightCount})};d.prototype.render=function(a,b,c,e){var f=this,d=this._rctx,g=this._glMaterials.get(b.pass),h=4===b.pass;if(!g||null!=a&&!g.beginSlot(a)||h&&0===this._highlightCount)return!1;
g.bind(d,c);var k=!1;this._dataByOrigin.forEach(function(a){h&&0===a.highlightCount||(c.origin=a.origin,g.bindView(d,c),a.dataByGeometry.forEach(function(a){k=h?f.renderHighlightPass(g,a,e)||k:f.renderDefaultPass(g,a,e)||k}))});d.bindVAO(null);g.release(d,c);return k};d.prototype.renderDefaultPass=function(a,b,c){var f=this._rctx,d=a.getProgram(),g=a.getDrawMode(),k=b.vao,l=b.vertexCount;e.assertCompatibleVertexAttributeLocations(k,d);f.bindVAO(k);var p=!1;b.instances.forEach(function(b){var e=b.displayedIndexRange;
e&&0===e.length||(a.bindInstance(f,b),e?h.drawArraysFaceRange(f,e,0,g,c):h.drawArrays(f,g,0,l,c),p=!0)});return p};d.prototype.renderHighlightPass=function(a,b,c){var f=this._rctx,d=a.getProgram(),g=a.getDrawMode(),k=b.vao,l=b.vertexCount;if(0!==b.highlightCount){e.assertCompatibleVertexAttributeLocations(k,d);f.bindVAO(k);var p=!1;b.instances.forEach(function(b){var e=b.highlightedIndexRanges;if(e&&0!==e.length)for(a.bindInstance(f,b),b=0;b<e.length;b++){var d=e[b];h.drawArrays(f,g,d.range?d.range[0]:
0,d.range?d.range[1]-d.range[0]+1:l,c);p=!0}});return p}};return d}()})},"esri/views/3d/webgl-engine/shaders/RibbonLinePrograms":function(){define(["require","exports","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.VertexAttrConstants={POSITION:"position",SUBDIVISIONFACTOR:"subdivisionFactor",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",SUBDIVISIONS:"subdivisions",COLOR:"color",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",
SIZE:"size",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute"};d.vertexAttributeLocations={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15};var k=function(b){return l.glslifyDefineMap({STIPPLE:b.stipple,SLICE:b.slice,JOIN_ROUND:"round"===b.join,CAP_ROUND:"round"===b.cap,VV_SIZE:b.vvSize,VV_COLOR:b.vvColor,
VV_OPACITY:b.vvOpacity})};d.colorPass={name:"ribbon-line-color",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/ribbonLine/ribbonLine.vert"),fragmentShader:k(b)+n.resolveIncludes("materials/ribbonLine/colorPass.frag")}},attributes:d.vertexAttributeLocations};d.highlightPass={name:"ribbon-line-highlight",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/ribbonLine/ribbonLine.vert"),fragmentShader:k(b)+n.resolveIncludes("materials/ribbonLine/highlightPass.frag")}},
attributes:d.vertexAttributeLocations}})},"esri/views/3d/webgl-engine/lib/Renderer":function(){define("require exports ../../../../core/maybe ../../../../core/TimeProfiler ../../../../core/libs/gl-matrix-2/vec2f64 ../../support/debugFlags ../lib/Util ./BoundingInfo ./depthRange ./depthRangeUtils ./FxaaRenderPass ./HighlightHelper ./OffscreenRenderingHelper ./RenderContext ./RenderPluginManager ./ShadowMap ./SliceHelper ./SmaaRenderPass ./SSAOHelper ./Util ./edgeRendering/EdgeView ../lighting/SceneLighting ../materials/HUDMaterial ../../../webgl/Profiling ../../../webgl/Texture".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){function E(a,b){var c=new Map,e=null,f=null,d=function(a){if(a===e)return f;var b=c.get(a);b||(b={toAdd:[],toRemove:[],toUpdate:[]},c.set(a,b));e=a;return f=b};a.toAdd.forEach(function(a){1<=N(a.data)&&d(a.material).toAdd.push(a)});a.toRemove.forEach(function(a){1<=N(a.data)&&d(a.material).toRemove.push(a)});var g=0;a.toUpdate.forEach(function(a){1<=N(a.renderGeometry.data)&&(d(a.renderGeometry.material).toUpdate.push(a),g|=a.updateType)});
b&&(b.updateTypes=g);return c}function N(a){return!1===a.preinterleaved?m.getFirstObjectValue(a.indices).length:a.indexCount}function L(a,b){return a.isVisible()&&a.isVisibleInPass(b.pass)&&0!==(a.renderOccluded&b.renderOccludedMask)}r=function(){function d(b,c,e,g,h,k){var l=this;this._materialRenderers=new Map;this._orderedMaterialRenderers=[];this._hasWater=this._hasHighlights=!1;this._lighting=new z.SceneLighting;this._content=new Map;this._isRendering=!1;this._needsRender=!0;this._fallbackDepthStencilTexture=
null;this._stats=new d.RenderStats;this._edgeView=null;this.renderOptions={antialiasing:"smaa"};this._programRep=b;this._materialRep=c;this._rctx=g;this._mode=h;this._stage=k;this._fxaaPass=new f(g);this._smaaPass=new x(g);this._bindParameters={view:null,proj:null,viewInvTransp:null,fovY:0,nearFar:null,lightingData:null,viewport:null,shadowMappingEnabled:!1,ssaoEnabled:!1,origin:null,pixelRatio:null,slicePlane:null};this._offscreenRendering=new p(b,this._rctx);this._sliceHelper=new y;"scene"===this._mode&&
(this._shadowMap=new t(this._rctx),this._ssaoHelper=new w(b,this._rctx,function(){l._needsRender=!0}),this._highlightHelper=new a(b,this._rctx));this._renderPlugins=new v.RenderPluginManager({rctx:g,programRep:b,textureRep:e,materialRep:c});this._renderContext=new q(g,this._offscreenRendering,this._lighting.getOld(),this._shadowMap,this._ssaoHelper,this._sliceHelper)}d.prototype.dispose=function(){this._materialRenderers.forEach(function(a){a.dispose()});this._orderedMaterialRenderers=this._materialRenderers=
null;this._edgeView&&(this._edgeView.destroy(),this._edgeView=null);this._offscreenRendering.enabled=!1;this._fallbackDepthStencilTexture&&(this._fallbackDepthStencilTexture.dispose(),this._fallbackDepthStencilTexture=null);this._shadowMap&&(this._shadowMap.enabled=!1,this._shadowMap.dispose());this._ssaoHelper&&(this._ssaoHelper.enabled=!1,this._ssaoHelper.dispose());this._highlightHelper&&(this._highlightHelper.enabled=!1);g.tmpIndices.prune();this._content.clear();this._content=null};Object.defineProperty(d.prototype,
"isLoadingResources",{get:function(){return"smaa"===this.renderOptions.antialiasing&&this._smaaPass.isLoadingResources},enumerable:!0,configurable:!0});d.prototype.ensureEdgeView=function(){var a=this;null==this._edgeView&&(this._edgeView=new u.EdgeView(this._rctx,this._programRep,{setNeedsRender:function(){return a._needsRender=!0}}),this._edgeView.initialize());return this._edgeView};Object.defineProperty(d.prototype,"edgeView",{get:function(){return this._edgeView},enumerable:!0,configurable:!0});
d.prototype.setLighting=function(a){this._lighting.set(a)};d.prototype.setRenderParams=function(a){void 0!==a.shadowMapResolution&&!1===this._shadowMap.enabled&&(this._shadowMap.textureResolution=a.shadowMapResolution);void 0!==a.shadowMap&&(this._shadowMap.enabled=a.shadowMap);void 0!==a.shadowMapMaxCascades&&(this._shadowMap.maxCascades=a.shadowMapMaxCascades);this._highlightHelper.enabled=!0;void 0!==a.ssao&&(this._ssaoHelper.enabled=a.ssao);void 0!==a.ssaoAttenuation&&(this._ssaoHelper.attenuation=
a.ssaoAttenuation);void 0!==a.ssaoRadius&&(this._ssaoHelper.radius=a.ssaoRadius);void 0!==a.ssaoFilterRadius&&console.error("The property ssaoFilterRadius is no longer supported as a render parameter.");void 0!==a.ssaoSamples&&(this._ssaoHelper.samples=a.ssaoSamples);a.background&&(this._offscreenRendering.background=a.background);void 0!==a.antialiasingEnabled&&(this.renderOptions.antialiasing=a.antialiasingEnabled?"smaa":"none");void 0!==a.defaultHighlightOptions&&this._highlightHelper.setDefaultOptions(a.defaultHighlightOptions);
void 0!==a.slicePlane&&(this._sliceHelper.plane=a.slicePlane);this._needsRender=!0};Object.defineProperty(d.prototype,"hasSlicePlane",{get:function(){return!!this._sliceHelper.plane},enumerable:!0,configurable:!0});d.prototype.getRenderParams=function(){var a={};this._shadowMap&&(a.shadowMap=this._shadowMap.enabled,a.shadowMapResolution=this._shadowMap.textureResolution,a.shadowMapMaxCascades=this._shadowMap.maxCascades);this._ssaoHelper&&this._ssaoHelper.isSupported&&(a.ssao=this._ssaoHelper.enabled,
a.ssaoAttenuation=this._ssaoHelper.attenuation,a.ssaoRadius=this._ssaoHelper.radius,a.ssaoFilterRadius=this._ssaoHelper.filterRadius,a.ssaoSamples=this._ssaoHelper.samples);return a};Object.defineProperty(d.prototype,"renderPlugins",{get:function(){return this._renderPlugins},enumerable:!0,configurable:!0});d.prototype.resetNeedsRender=function(){this._needsRender=!1};d.prototype.needsRender=function(){return this._needsRender||this._renderPlugins.needsRender()};d.prototype.getCombinedStats=function(){this._stats.VBOallocatedSize=
0;this._stats.VBOoptimalSize=0;this._stats.VBOusedSize=0;this._stats.VBOallocatedSize*=.00390625;this._stats.VBOusedSize*=.00390625;this._stats.VBOoptimalSize*=.00390625;return this._stats};d.prototype.getFramebufferTexture=function(a){switch(a){case "color":return this._offscreenRendering.colorTexture;case "hudVisibility":return this._offscreenRendering.hudVisibilityTexture;case "shadowMap":return this._shadowMap&&this._shadowMap.getDepthTexture();case "linearDepth":return this._offscreenRendering.linearDepthTexture;
case "normals":return this._offscreenRendering.normalTexture;case "highlight":return this._offscreenRendering.highlightTexture}return null};Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return this._hasHighlights},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasWater",{get:function(){return this._hasWater},enumerable:!0,configurable:!0});d.prototype.isEmpty=function(){return 0===this._materialRenderers.size};d.prototype.modify=function(a,b,c,e){var f=this;
void 0===c&&(c=[]);this._isRendering&&console.warn("Renderer.modify called while rendering");for(var d=0;d<b.length;++d)this._content.delete(b[d].uniqueName);for(d=0;d<a.length;++d)this._content.set(a[d].uniqueName,a[d]);if(c)for(d=0;d<c.length;++d)h.assert(this._content.get(c[d].renderGeometry.uniqueName)===c[d].renderGeometry);if(a.length||b.length||c.length){var g=!1;E({toAdd:a,toRemove:b,toUpdate:c}).forEach(function(a,b){var c=f._materialRenderers.get(b);!c&&0<a.toAdd.length&&(c=b.createRenderer(f._rctx,
f._materialRep),f._materialRenderers.set(b,c),f._orderedMaterialRenderers.push(c),f.sortOrderedMaterialRenderers());c&&(c.modify(a),c.isEmpty&&(g=!0))});g&&this._materialRenderers.forEach(function(a,b){a.isEmpty&&(f._materialRenderers.delete(b),f._orderedMaterialRenderers.splice(f._orderedMaterialRenderers.indexOf(a),1),a.dispose())});var k=!1;this._materialRenderers.forEach(function(a){k=k||a.hasHighlights});if(k!==this._hasHighlights){if(this.onHasHighlightsChanged)this.onHasHighlightsChanged(k);
this._hasHighlights=k}this._needsRender=!0}e&&(e.forEach(function(a){f._materialRep.updateMaterialParameters(a)}),this._needsRender=!0)};d.prototype.modifyRenderOrder=function(a){"draped"===this._mode&&(this.sortOrderedMaterialRenderers(),this._needsRender=!0)};d.prototype.updateAnimations=function(a){var b=this,c=!1;this._hasWater=!1;this._orderedMaterialRenderers.forEach(function(e){e.updateAnimations&&(c=e.updateAnimations(a)||c);e.hasWater()&&(b._hasWater=!0)});return c};d.prototype.render=function(a){switch(this._mode){case "scene":this.renderScene(a);
break;case "draped":this.renderDraped(a)}if(this.onPostRender)this.onPostRender()};d.prototype.renderPass=function(a,b){this.renderGeometryPass(a,b)};d.prototype.renderScene=function(a){var b=this;this._isRendering=!0;var c=this._rctx,e=this._offscreenRendering,f=a.camera,d=a.fbo,g=this._sliceHelper.plane;a.disableSlice&&(this._sliceHelper.plane=null);this._renderPlugins.prepareRender(f);this.renderShadowMap(a);e.enabled=!0;e.initializeFrame(f,d);this.renderLinearDepth(a);this.renderNormal(a);this._ssaoHelper.enabled&&
this._ssaoHelper.computeSSAO(f,e.linearDepthTexture,e.normalTexture);this._ssaoHelper.bindAll(this._programRep);this._stats.reset();this.updateGlobalUniforms(f.projectionMatrix);this._renderContext.pass=0;this._renderContext.camera=f;this._renderContext.options=this.renderOptions;e.bindTarget(e.mainColor,e.mainDepth);this._renderPlugins.render(0,this._renderContext);this.renderGeometrySlotsPt1(this._renderContext);this._edgeView&&this._edgeView.shouldRender()&&e.renderSeparateAndComposite(function(){return b._edgeView.render(b._bindParameters)},
void 0,"alpha");var h=f=!1,f=this.renderHUDVisibility(this._renderContext);this.renderInternalSlot(18,this._renderContext);(h=this.renderTransparentTerrain(this._renderContext))&&f&&(e.compositeTransparentTerrainOntoHUDVisibility(),e.renderToTargets(function(){return b.renderHUD("occluded")},e.mainColor,e.tmpDepth,void 0,!0));h&&e.compositeTransparentTerrainOntoMain();e.renderToTargets(function(){b.renderInternalSlot(10,b._renderContext);b._renderPlugins.render(14,b._renderContext);b._renderPlugins.render(15,
b._renderContext)},e.mainColor,e.mainDepth);this.renderOccluded();this.renderAntiAliasing(d);c.bindFramebuffer(d);this.renderHUD("notOccluded");this.renderHighlights(a,d);this._sliceHelper.plane=g;this._isRendering=!1};d.prototype.renderDraped=function(a){this._stats.reset();this.renderGeometryPass(0,a)};d.prototype.renderShadowMap=function(a){var c=this._shadowMap,e=a.camera,f=a.fbo,d=a.lightDirection;if(c.enabled){b.ENABLE_PROFILE_DEPTH_RANGE&&l.begin("depthRange");var g=this.computeDepthRange(e);
b.ENABLE_PROFILE_DEPTH_RANGE&&l.end("depthRange");c.prepare(e,d,g);d=c.getCascades();for(g=0;g<d.length;++g){var h=d[g];h.camera.setGLViewport(this._rctx);a.camera=h.camera;this.renderGeometryPass(3,a)}a.camera=e;c.finish(f);e.setGLViewport(this._rctx)}c.bindAll(this._programRep)};d.prototype.renderLinearDepth=function(a){var b=this;this._ssaoHelper.enabled||this._renderPlugins.needsLinearDepth()?this._offscreenRendering.renderToTargets(function(){b.renderGeometryPass(1,a)},this._offscreenRendering.linearDepth,
this._offscreenRendering.tmpDepth,[0,0,0,0],!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.linearDepth)};d.prototype.renderNormal=function(a){var b=this;this._ssaoHelper.enabled?this._offscreenRendering.renderToTargets(function(){b.renderGeometryPass(2,a)},this._offscreenRendering.normal,this._offscreenRendering.tmpDepth,[0,0,0,0],!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.normal)};d.prototype.computeDepthRange=function(a){var b=c.depthRangeFromScene(a,
this._content,this._stage.getLayers());e.union(b,this.renderPlugins.queryDepthRange(a));b.near=Math.max(a.near,b.near);b.far=Math.min(a.far,b.far);return b};d.prototype.renderGeometryPass=function(a,b){this._isRendering=!0;b=b.camera;this.updateGlobalUniforms(b.projectionMatrix);this._renderContext.pass=a;this._renderContext.camera=b;"draped"===this._mode?this.renderGeometryPassDraped(this._renderContext):this.renderGeometryPassScene(this._renderContext);this._isRendering=!1};d.prototype.renderGeometryPassDraped=
function(a){var b=this,c=a.camera;this._bindParameters.view=c.viewMatrix;this._bindParameters.proj=c.projectionMatrix;this._bindParameters.viewInvTransp=c.viewInverseTransposeMatrix;K[0]=c.near;K[1]=c.far;this._bindParameters.nearFar=K;this._bindParameters.lightingData=a.lightingData;this._bindParameters.viewport=c.fullViewport;this._bindParameters.pixelRatio=c.pixelRatio;this._bindParameters.slicePlane=a.sliceHelper&&a.sliceHelper.plane;this._bindParameters.highlightDepthTexture=this.getFallbackDepthTexture();
this._orderedMaterialRenderers.forEach(function(c){c.render(null,a,b._bindParameters)})};d.prototype.renderGeometryPassScene=function(a){this.renderGeometrySlotsPt1(a);this.renderTransparentTerrain(a)};d.prototype.renderGeometrySlotsPt1=function(a){this._renderPlugins.render(1,a);this.renderInternalSlot(2,a);this.renderInternalSlot(3,a);this._renderPlugins.render(4,a);this.renderInternalSlot(5,a);this._renderPlugins.render(6,a);a.ssaoHelper&&a.ssaoHelper.bindAll(this._programRep);this._renderPlugins.render(13,
this._renderContext);this.renderInternalSlot(7,a);this._renderPlugins.render(8,a);a.ssaoHelper&&a.ssaoHelper.bindAll(this._programRep)};d.prototype.renderTransparentTerrain=function(a){return this._renderPlugins.render(9,a)};d.prototype.renderHUDVisibility=function(a){var b=this,c=B.shouldRenderVisibilityDuringRenderPass(a.pass),e=a.offscreenRenderingHelper&&a.offscreenRenderingHelper.enabled,f=!1;c&&e&&a.offscreenRenderingHelper.renderHUDVisibility(function(){f=b.renderInternalSlot(11,a)});return f};
d.prototype.renderHUD=function(a){this._bindParameters.renderTransparentlyOccludedHUD=a;this.renderInternalSlot(19,this._renderContext);this.renderInternalSlot(16,this._renderContext);this.renderInternalSlot(17,this._renderContext)};d.prototype.renderHighlights=function(a,b){var c=this,e=this._highlightHelper;if(e&&e.enabled&&(this.hasHighlights||this._renderPlugins.needsHighlight())){var f=null;e.profilingCallback&&(f=C.startMeasurement(this._renderContext.rctx));var d=this._offscreenRendering,d=
d.renderToTargets(function(){c.renderGeometryPass(4,a);c._rctx.clearSafe(256);c.renderHUD("both")},d.highlight,d.tmpDepth,[0,0,0,0],!0);e.render(a.camera,d,b);null!==f&&e.profilingCallback&&f.stop(function(a){e.profilingCallback&&e.profilingCallback(a)})}else this._offscreenRendering.disposeTarget(this._offscreenRendering.highlight)};d.prototype.renderOccluded=function(){var a=this;this._materialRenderers.forEach(function(a,b){b&&b.isVisible()&&1!==b.renderOccluded&&O.push(b)});if(0!==O.length){var b=
this._offscreenRendering,c=this._renderContext,e=function(e,f){c.renderOccludedMask=f;b.renderToTargets(function(){a.renderInternalSlot(5,c,O);a.renderInternalSlot(7,c,O);a.renderInternalSlot(10,c,O)},b.tmpColor,b.tmpDepth,[0,0,0,0],!0);c.resetRenderOccludedMask();b.compositeOccludedOntoMain(e)};c.pass=0;e(.4,4);e(.5,2);e(1,8);O.length=0}};d.prototype.renderAntiAliasing=function(a){var b=this;switch(this.renderOptions.antialiasing){case "smaa":this._smaaPass.loadResources(function(){return b._needsRender=
!0});this._smaaPass.enable()&&(this._fxaaPass.disable(),this._smaaPass.render({colorTexture:this._offscreenRendering.colorTexture},a));break;case "fxaa":this._fxaaPass.enable()&&(this._smaaPass.disable(),this._fxaaPass.render({colorTexture:this._offscreenRendering.colorTexture},a));break;default:this._offscreenRendering.composite(),this._fxaaPass.disable(),this._smaaPass.disable()}};d.prototype.renderInternalSlot=function(a,b,c){this._bindParameters.view=b.camera.viewMatrix;this._bindParameters.proj=
b.camera.projectionMatrix;this._bindParameters.viewInvTransp=b.camera.viewInverseTransposeMatrix;this._bindParameters.cameraAboveGround=b.camera.aboveGround;this._bindParameters.fovY=b.camera.fovY;K[0]=b.camera.near;K[1]=b.camera.far;var e=this._renderContext.offscreenRenderingHelper;this._bindParameters.nearFar=K;this._bindParameters.lightingData=b.lightingData;this._bindParameters.viewport=b.camera.fullViewport;this._bindParameters.shadowMap=b.shadowMap;this._bindParameters.shadowMappingEnabled=
!!b.shadowMap&&b.shadowMap.enabled;this._bindParameters.ssaoEnabled=!!b.ssaoHelper&&b.ssaoHelper.enabled;this._bindParameters.pixelRatio=b.camera.pixelRatio;this._bindParameters.slicePlane=b.sliceHelper&&b.sliceHelper.plane;this._bindParameters.hudVisibilityTexture=e?e.hudVisibilityTexture:null;this._bindParameters.highlightDepthTexture=e&&e.depthTexture||this.getFallbackDepthTexture();return this.renderInternalSlotMaterials(a,b,c)};d.prototype.renderInternalSlotMaterials=function(a,b,c){var e=this,
f=!1;n.isSome(c)?c.forEach(function(c){L(c,b)&&(f=e._materialRenderers.get(c).render(a,b,e._bindParameters)||f)}):this._materialRenderers.forEach(function(c,d){L(d,b)&&(f=c.render(a,b,e._bindParameters)||f)});return f};d.prototype.updateGlobalUniforms=function(a){for(var b=this._programRep.getProgramsUsingUniform("proj"),c=0;c<b.length;c++)b[c].setUniformMatrix4fv("proj",a);if(this._lighting){b=this._programRep.getProgramsUsingUniform("lightingMainDirection");for(c=0;c<b.length;c++)this._lighting.setUniforms(b[c]);
b=this._programRep.getProgramsUsingUniform("lightDirection");for(c=0;c<b.length;c++)this._lighting.setUniforms(b[c])}};d.prototype.sortOrderedMaterialRenderers=function(){"draped"===this._mode&&this._orderedMaterialRenderers.sort(function(a,b){return b.renderPriority()-a.renderPriority()})};d.prototype.getFallbackDepthTexture=function(){this._fallbackDepthStencilTexture||(this._fallbackDepthStencilTexture=new F(this._rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},
new Uint8Array([255,255,255,255])));return this._fallbackDepthStencilTexture};d.prototype.getGpuMemoryUsage=function(){return{offscreen:this._offscreenRendering?this._offscreenRendering.getGpuMemoryUsage():0,highlights:this._highlightHelper?this._highlightHelper.getGpuMemoryUsage():0,shadows:this._shadowMap?this._shadowMap.getGpuMemoryUsage():0,ssao:this._ssaoHelper?this._ssaoHelper.getGpuMemoryUsage():0}};d.prototype.forEachRenderGeometry=function(a){this._content.forEach(function(b,c){a(b)})};return d}();
(function(a){var b=function(){function a(){this.reset()}a.prototype.reset=function(){this.VBOusedSize=this.VBOoptimalSize=this.VBOallocatedSize=this.instancesDrawnAngle=this.drawCallsHighlight=this.drawCallsFragmented=this.drawCallsPreinterleaved=this.drawCallsMerged=this.drawCallsAngleInstanced=this.drawCallsInstanced=this.trianglesRendered=0};return a}();a.RenderStats=b})(r||(r={}));var K=k.vec2f64.create(),O=[];return r})},"esri/core/TimeProfiler":function(){define(["require","exports"],function(r,
d){r=function(){function d(d,k){void 0===k&&(k=.9);this._alpha=.9;this._name=d;this._alpha=k;this.reset()}d.prototype.reset=function(){this._smooth=this._sum=this._count=0;this._min=Infinity;this._max=0};Object.defineProperty(d.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"average",{get:function(){return 0<this._count?
this._sum/this._count:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"smooth",{get:function(){return this._smooth},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0});d.prototype.begin=function(){this._startTime=performance.now()};d.prototype.end=function(){var d=performance.now()-this._startTime;
this._count+=1;this._sum+=d;this._smooth=this._alpha*d+(1-this._alpha)*this._smooth;this._min=Math.min(this._min,d);this._max=Math.max(this._max,d)};d.prototype.toJSON=function(){return{name:this.name,count:this.count,average:this.average,smooth:this.smooth,min:this.min,max:this.max}};return d}();(function(d){function l(g){g in b||(b[g]=new d(g));return b[g]}function k(b){console.log(l(b).toJSON())}var b={},h={};d.get=l;d.begin=function(b){l(b).begin()};d.end=function(b,e){void 0===e&&(e=!0);l(b).end();
var c=performance.now();!e||b in h&&!(c>=h[b]+1E3)||(k(b),h[b]=c)};d.log=k;d.logAll=function(){for(var d in b)k(d)}})(r||(r={}));return r})},"esri/views/3d/webgl-engine/lib/depthRange":function(){define(["require","exports"],function(r,d){function n(d,b){return{near:d,far:b}}function l(d,b,h){d.near=b;d.far=h;return d}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.empty=function(d){return d?l(d,Infinity,-Infinity):n(Infinity,-Infinity)};d.set=l;d.union=function(d,b,h){void 0===h&&(h=
d);h.near=Math.min(d.near,b.near);h.far=Math.max(d.far,b.far);return h}})},"esri/views/3d/webgl-engine/lib/depthRangeUtils":function(){define("require exports ../../../../core/PooledArray ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/geometryUtils ../../support/mathUtils ./ComponentUtils ./depthRange ./Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){function v(a,b){if(b.isVisible){var c=p.empty(),e=b.getObjects();b.getSpatialQueryAccelerator()?t(c,a,b.getSpatialQueryAccelerator()):y(c,a,e);return c}}function t(a,b,c){var e=b.eye,f=b.viewForward,d=b.frustum,g=function(a){return!a.areAllComponentsHidden()},h=c.objectCount;500>h?(p.set(F,b.near,Math.min(a.near,b.far)),c.forEachInDepthRange(e,f,"front-to-back",F,function(c,e){x(a,b,c);F.far=a.near;e.setRange(F)},d,g),p.set(F,Math.max(a.far,b.near),b.far),c.forEachInDepthRange(e,
f,"back-to-front",F,function(c,e){x(a,b,c);F.near=a.far;e.setRange(F)},d,g)):(h=Math.max(Math.min(h,500),Math.ceil(.1*h)),e=c.findClosest(f,"front-to-back",d,g,h),c=c.findClosest(f,"back-to-front",d,g,h),e&&c&&(m(a,b,e.getCenter(),e.getBSRadius()),m(a,b,c.getCenter(),c.getBSRadius())))}function y(a,b,c){E.clear();c.forEach(function(a){a.areAllComponentsHidden()||E.add(a)});E.empty||(E.sort(b),p.set(F,b.near,Math.min(a.near,b.far)),E.forEachInDepthRange(F,"front-to-back",function(c,e,f){e<a.near&&
x(a,b,c)}),p.set(F,Math.max(a.far,b.near),b.far),E.forEachInDepthRange(F,"back-to-front",function(b,c,e){a.far=Math.max(a.far,e)}))}function x(a,b,e){if(!e.areAllComponentsHidden()&&c.frustum.intersectsSphere(b.frustum.planes,c.sphere.wrap(e.getBSRadius(),e.getCenter()))){var d=e.objectTransformation,g=C;e.geometryRecords.forEach(function(c){l.mat4.multiply(g,d,c.getShaderTransformation());var e=f.maxScale(g);w(a,b,c.geometry.boundingInfo,g,e)})}}function w(a,e,f,d,g){var h=e.eye,k=e.viewForward;
b.vec3.transformMat4(B,f.center,d);h=k[0]*(B[0]-h[0])+k[1]*(B[1]-h[1])+k[2]*(B[2]-h[2]);k=f.bsRadius*g;if(!(h-k>a.near&&h+k<a.far)&&c.frustum.intersectsSphere(e.frustum.planes,c.sphere.wrap(k,B)))if(100<f.bsRadius&&f.getChildren())for(f=f.getChildren(),h=0;8>h;++h)f[h]&&w(a,e,f[h],d,g);else L.unionDepthRangeWithAABB(a,e.viewProjectionMatrix,d,f.bbMin,f.bbMax)}function m(a,b,c,e){var f=b.eye;b=b.viewForward;c=(c[0]-f[0])*b[0]+(c[1]-f[1])*b[1]+(c[2]-f[2])*b[2];a.near=Math.min(a.near,c-e);a.far=Math.max(a.far,
c+e)}Object.defineProperty(d,"__esModule",{value:!0});d.depthRangeFromScene=function(a,b,c){if(1E4>b.size)return N.compute(a,b);b=p.empty();for(var e in c){var f=c[e];f.isVisible&&p.union(b,v(a,f))}return b};d.depthRangeFromLayer=v;r=function(){function a(){this._items=new n({allocator:function(a){return a||{obj:null,distance:0,near:0,far:0}},deallocator:function(a){a.obj=null;a.distance=0;a.near=0;a.far=0;return a}})}Object.defineProperty(a.prototype,"length",{get:function(){return this._items.length},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"empty",{get:function(){return 0===this._items.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._items.clear()};a.prototype.add=function(a){this._items.pushNew().obj=a};a.prototype.sort=function(a){var b=a.eye,c=a.viewForward;this._items.forEach(function(a){var e=a.obj,f=e.getCenter(),e=e.getBSRadius(),f=(f[0]-b[0])*c[0]+(f[1]-b[1])*c[1]+(f[2]-b[2])*c[2];a.distance=f;a.near=f-e;a.far=f+e});this._items.sort(function(a,
b){return a.distance-b.distance})};a.prototype.forEachInDepthRange=function(a,b,c){if("front-to-back"===b)for(b=0;b<this._items.length;++b){var e=this._items.data[b];e.far<a.near||e.near>a.far||c(e.obj,e.near,e.far)}else for(b=this._items.length-1;0<=b;--b)e=this._items.data[b],e.far<a.near||e.near>a.far||c(e.obj,e.near,e.far)};return a}();var u=function(){function e(){this.view=k.mat4f64.create();this.viewProj=k.mat4f64.create();this.frustum=c.frustum.create();this.geometries=[];this.near=[];this.far=
[];this.nearCandidates=[];this.farCandidates=[];this.range={near:0,far:0};this.looseRange={near:0,far:0}}e.prototype.compute=function(b,e){var f=this;this.reset();l.mat4.copy(this.view,b.viewMatrix);l.mat4.multiply(this.viewProj,b.projectionMatrix,this.view);c.frustum.copy(b.frustum,this.frustum);b=this.view;var d=b[2],g=b[6],h=b[10],k=b[14];b=this.range;var p=0;e.forEach(function(b){if(!a.isAllHidden(b.instanceParameters.componentVisibilities,b.componentOffsets)&&b.castShadow){var c,e;b.hasShaderTransformation?
(c=b.getBoundingSphere(b.getShaderTransformation(),1,B),e=B):(c=b.bsRadius,e=b.center);e=d*e[0]+g*e[1]+h*e[2]+k;f.geometries[p]=b;f.near[p]=-(e+c);f.far[p]=-(e-c);++p}});if(0===this.geometries.length)return b;for(e=0;e<this.geometries.length;++e)this.near[e]>b.far&&(b.far=this.near[e]),2<this.near[e]&&this.far[e]<b.near&&(b.near=this.far[e]);var m=this.looseRange;m.near=Math.max(.5*b.near,2);m.far=2*b.far;var u=0,q=0;for(e=0;e<this.geometries.length;++e)this.near[e]<b.near&&(this.near[e]>=m.near?
b.near=this.near[e]:this.nearCandidates[u++]=e),this.far[e]>b.far&&(this.far[e]<=m.far?b.far=this.far[e]:this.farCandidates[q++]=e);if(0===this.nearCandidates.length&&0===this.farCandidates.length)return b;this.nearCandidates.sort(function(a,b){return f.near[a]<f.near[b]?-1:f.near[a]>f.near[b]?1:0});this.farCandidates.sort(function(a,b){return f.far[a]<f.far[b]?1:f.far[a]>f.far[b]?-1:0});for(e=0;e<this.nearCandidates.length;++e)m=this.nearCandidates[e],this.near[m]<b.near&&(m=this.geometries[m],u=
m.boundingInfo,this.includeNearBoundingInfoRec(u,m.getShaderTransformation()));for(e=0;e<this.farCandidates.length;++e)m=this.farCandidates[e],this.far[m]>b.far&&(m=this.geometries[m],u=m.boundingInfo,this.includeFarBoundingInfoRec(u,m.getShaderTransformation()));return b};e.prototype.reset=function(){this.geometries.length=0;this.near.length=0;this.far.length=0;this.nearCandidates.length=0;this.farCandidates.length=0;this.range.near=Number.MAX_VALUE;this.range.far=-Number.MAX_VALUE};e.prototype.includeNearBoundingInfoRec=
function(a,c){var e=a.getBSRadius(),d=a.getCenter();b.vec3.transformMat4(B,d,c);var g=f.maxScale(c),d=B[0],h=B[1],k=B[2],e=e*g,g=this.frustum.planes;if(!(g[0][0]*d+g[0][1]*h+g[0][2]*k+g[0][3]>e||g[1][0]*d+g[1][1]*h+g[1][2]*k+g[1][3]>e||g[2][0]*d+g[2][1]*h+g[2][2]*k+g[2][3]>e||g[3][0]*d+g[3][1]*h+g[3][2]*k+g[3][3]>e||(d=this.view[2]*d+this.view[6]*h+this.view[10]*k+this.view[14],h=d+e,2>-(d-e)||-h>=this.range.near)))if(-h>this.looseRange.near)this.range.near=-h;else{if(100<e&&(e=a.getChildren(),void 0!==
e)){for(a=0;8>a;++a)void 0!==e[a]&&this.includeNearBoundingInfoRec(e[a],c);return}L.unionDepthRangeWithAABB(this.range,this.viewProj,c,a.getBBMin(),a.getBBMax())}};e.prototype.includeFarBoundingInfoRec=function(a,c){var e=a.getBSRadius(),d=a.getCenter();b.vec3.transformMat4(B,d,c);var g=f.maxScale(c),d=B[0],h=B[1],k=B[2],e=e*g,g=this.frustum.planes;if(!(g[0][0]*d+g[0][1]*h+g[0][2]*k+g[0][3]>e||g[1][0]*d+g[1][1]*h+g[1][2]*k+g[1][3]>e||g[2][0]*d+g[2][1]*h+g[2][2]*k+g[2][3]>e||g[3][0]*d+g[3][1]*h+g[3][2]*
k+g[3][3]>e||(d=this.view[2]*d+this.view[6]*h+this.view[10]*k+this.view[14]-e,-d<=this.range.far)))if(-d<this.looseRange.far)this.range.far=-d;else{if(100<e&&(e=a.getChildren(),void 0!==e)){for(a=0;8>a;++a)void 0!==e[a]&&this.includeFarBoundingInfoRec(e[a],c);return}L.unionDepthRangeWithAABB(this.range,this.viewProj,c,a.getBBMin(),a.getBBMax())}};return e}();d.DepthRangeFromRenderGeometries=u;d=function(){function a(){this.modelViewProj=k.mat4f64.create();this.clipPosition=[e.vec4f64.create(),e.vec4f64.create(),
e.vec4f64.create(),e.vec4f64.create(),e.vec4f64.create(),e.vec4f64.create(),e.vec4f64.create(),e.vec4f64.create()]}a.prototype.unionDepthRangeWithAABB=function(a,b,c,e,f){var d=this.modelViewProj;l.mat4.multiply(d,b,c);b=!1;for(c=0;8>c;++c){var g=this.clipPosition[c],h=0===c||3===c||4===c||7===c?e[0]:f[0],k=0===c||1===c||4===c||5===c?e[1]:f[1],p=4>c?e[2]:f[2];g[0]=d[0]*h+d[4]*k+d[8]*p+d[12];g[1]=d[1]*h+d[5]*k+d[9]*p+d[13];g[2]=d[2]*h+d[6]*k+d[10]*p+d[14];g[3]=d[3]*h+d[7]*k+d[11]*p+d[15]}for(c=0;12>
c;++c){e=this.clipTriangle(this.clipPosition[z[c][0]],this.clipPosition[z[c][1]],this.clipPosition[z[c][2]]);f=!0;for(d=0;d<e.length;++d)if(g=e[d][3],2<=g){f=!1;break}if(!f)for(b=!0,d=0;d<e.length;++d)g=e[d][3],g<a.near&&(a.near=g),g>a.far&&(a.far=g)}return b};a.prototype.inside=function(a,b){if(0===b)return a[0]>=-a[3];if(1===b)return a[1]>=-a[3];if(2===b)return a[0]<=a[3];if(3===b)return a[1]<=a[3];q.assert(!1)};a.prototype.intersect=function(a,b,c){var f=0;0===c?f=(-a[3]-a[0])/(b[0]-a[0]+b[3]-
a[3]):1===c?f=(-a[3]-a[1])/(b[1]-a[1]+b[3]-a[3]):2===c?f=(a[3]-a[0])/(b[0]-a[0]-b[3]+a[3]):3===c&&(f=(a[3]-a[1])/(b[1]-a[1]-b[3]+a[3]));return g.vec4.lerp(e.vec4f64.create(),a,b,f)};a.prototype.clipTriangle=function(a,b,c){a=[a,b,c];for(b=0;4>b;++b){c=a;a=[];for(var e=0;e<c.length;++e){var f=c[e],d=c[(e+1)%c.length];this.inside(d,b)?(this.inside(f,b)||a.push(this.intersect(f,d,b)),a.push(d)):this.inside(f,b)&&a.push(this.intersect(f,d,b))}}return a};return a}();var z=[[0,1,3],[2,3,1],[1,5,2],[6,2,
5],[5,4,6],[7,6,4],[4,0,7],[3,7,0],[3,2,7],[6,7,2],[4,5,0],[1,0,5]],B=h.vec3f64.create(),C=k.mat4f64.create(),F=p.empty(),E=new r,N=new u,L=new d})},"esri/views/3d/webgl-engine/lib/FxaaRenderPass":function(){define("require exports ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/renderState ../../../webgl/VertexArrayObject".split(" "),function(r,d,n,l,k,b){return function(){function d(b){this.isEnabled=!1;this.vertexAttributeLocations={position:0};this.vertexBufferLayout=[{name:"position",
count:2,type:5126,offset:0,stride:8,normalized:!1}];this.rctx=b}d.prototype.enable=function(){if(this.isEnabled)return!0;var d=this.rctx;this.program=new l(d,"\n      #version 100\n      precision highp float;\n\n      attribute vec2 position;\n\n      varying   vec2 fCoordinate;\n\n      void main() {\n        fCoordinate \x3d (position + 1.0 ) * 0.5;\n        gl_Position \x3d vec4(position, -1, 1);\n      }","\n      #version 100\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      /**\n       * @license\n       * Copyright (c) 2011 NVIDIA Corporation. All rights reserved.\n       *\n       * TO  THE MAXIMUM  EXTENT PERMITTED  BY APPLICABLE  LAW, THIS SOFTWARE  IS PROVIDED\n       * *AS IS*  AND NVIDIA AND  ITS SUPPLIERS DISCLAIM  ALL WARRANTIES,  EITHER  EXPRESS\n       * OR IMPLIED, INCLUDING, BUT NOT LIMITED  TO, NONINFRINGEMENT,IMPLIED WARRANTIES OF\n       * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO EVENT SHALL  NVIDIA\n       * OR ITS SUPPLIERS BE  LIABLE  FOR  ANY  DIRECT, SPECIAL,  INCIDENTAL,  INDIRECT,  OR\n       * CONSEQUENTIAL DAMAGES WHATSOEVER (INCLUDING, WITHOUT LIMITATION,  DAMAGES FOR LOSS\n       * OF BUSINESS PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR ANY\n       * OTHER PECUNIARY LOSS) ARISING OUT OF THE  USE OF OR INABILITY  TO USE THIS SOFTWARE,\n       * EVEN IF NVIDIA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.\n       */\n\n      #define FXAA_EDGE_THRESHOLD      (1.0/8.0)\n      #define FXAA_EDGE_THRESHOLD_MIN  (1.0/24.0)\n      #define FXAA_SEARCH_STEPS        16\n      #define FXAA_SEARCH_THRESHOLD    (1.0/4.0)\n      #define FXAA_SUBPIX_CAP          (3.0/4.0)\n      #define FXAA_SUBPIX_TRIM         (1.0/4.0)\n      #define FXAA_SUBPIX_TRIM_SCALE (1.0/(1.0 - FXAA_SUBPIX_TRIM))\n\n      uniform vec2 uRcpFrameDimension;\n      uniform sampler2D uColorTexture;\n      varying vec2 fCoordinate;\n\n      // Return the luma, the estimation of luminance from rgb inputs.\n      // This approximates luma using one FMA instruction,\n      // skipping normalization and tossing out blue.\n      // FxaaLuma() will range 0.0 to 2.963210702.\n      float FxaaLuma(vec3 rgb) {\n        return rgb.y * (0.587 / 0.299) + rgb.x;\n      }\n      vec3 FxaaLerp3(vec3 a, vec3 b, float amountOfA) {\n        return (vec3(-amountOfA) * b) + ((a * vec3(amountOfA)) + b);\n      }\n      vec4 FxaaTexOff(sampler2D tex, vec2 pos, ivec2 off, vec2 rcpFrame) {\n        float x \x3d pos.x + float(off.x) * rcpFrame.x;\n        float y \x3d pos.y + float(off.y) * rcpFrame.y;\n        return texture2D(tex, vec2(x, y));\n      }\n\n      // pos is the output of FxaaVertexShader interpolated across screen.\n      // xy -\x3e actual texture position {0.0 to 1.0}\n      // rcpFrame should be a uniform equal to  {1.0/frameWidth, 1.0/frameHeight}\n      vec3 FxaaPixelShader(vec2 pos, sampler2D tex, vec2 rcpFrame) {\n        vec3 rgbN \x3d FxaaTexOff(tex, pos.xy, ivec2( 0,-1), rcpFrame).xyz;\n        vec3 rgbW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1, 0), rcpFrame).xyz;\n        vec3 rgbM \x3d FxaaTexOff(tex, pos.xy, ivec2( 0, 0), rcpFrame).xyz;\n        vec3 rgbE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1, 0), rcpFrame).xyz;\n        vec3 rgbS \x3d FxaaTexOff(tex, pos.xy, ivec2( 0, 1), rcpFrame).xyz;\n        float lumaN \x3d FxaaLuma(rgbN);\n        float lumaW \x3d FxaaLuma(rgbW);\n        float lumaM \x3d FxaaLuma(rgbM);\n        float lumaE \x3d FxaaLuma(rgbE);\n        float lumaS \x3d FxaaLuma(rgbS);\n        float rangeMin \x3d min(lumaM, min(min(lumaN, lumaW), min(lumaS, lumaE)));\n        float rangeMax \x3d max(lumaM, max(max(lumaN, lumaW), max(lumaS, lumaE)));\n        float range \x3d rangeMax - rangeMin;\n        if (range \x3c max(FXAA_EDGE_THRESHOLD_MIN, rangeMax * FXAA_EDGE_THRESHOLD)) {\n          return rgbM;\n        }\n        vec3 rgbL \x3d rgbN + rgbW + rgbM + rgbE + rgbS;\n        float lumaL \x3d (lumaN + lumaW + lumaE + lumaS) * 0.25;\n        float rangeL \x3d abs(lumaL - lumaM);\n        float blendL \x3d max(0.0, (rangeL / range) - FXAA_SUBPIX_TRIM) * FXAA_SUBPIX_TRIM_SCALE;\n        blendL \x3d min(FXAA_SUBPIX_CAP, blendL);\n        vec3 rgbNW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1,-1), rcpFrame).xyz;\n        vec3 rgbNE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1,-1), rcpFrame).xyz;\n        vec3 rgbSW \x3d FxaaTexOff(tex, pos.xy, ivec2(-1, 1), rcpFrame).xyz;\n        vec3 rgbSE \x3d FxaaTexOff(tex, pos.xy, ivec2( 1, 1), rcpFrame).xyz;\n        rgbL +\x3d (rgbNW + rgbNE + rgbSW + rgbSE);\n        rgbL *\x3d vec3(1.0/9.0);\n        float lumaNW \x3d FxaaLuma(rgbNW);\n        float lumaNE \x3d FxaaLuma(rgbNE);\n        float lumaSW \x3d FxaaLuma(rgbSW);\n        float lumaSE \x3d FxaaLuma(rgbSE);\n        float edgeVert \x3d\n          abs((0.25 * lumaNW) + (-0.5 * lumaN) + (0.25 * lumaNE)) +\n          abs((0.50 * lumaW ) + (-1.0 * lumaM) + (0.50 * lumaE )) +\n          abs((0.25 * lumaSW) + (-0.5 * lumaS) + (0.25 * lumaSE));\n        float edgeHorz \x3d\n          abs((0.25 * lumaNW) + (-0.5 * lumaW) + (0.25 * lumaSW)) +\n          abs((0.50 * lumaN ) + (-1.0 * lumaM) + (0.50 * lumaS )) +\n          abs((0.25 * lumaNE) + (-0.5 * lumaE) + (0.25 * lumaSE));\n        bool horzSpan \x3d edgeHorz \x3e\x3d edgeVert;\n        float lengthSign \x3d horzSpan ? -rcpFrame.y : -rcpFrame.x;\n        if(!horzSpan) {\n          lumaN \x3d lumaW;\n          lumaS \x3d lumaE;\n        }\n        float gradientN \x3d abs(lumaN - lumaM);\n        float gradientS \x3d abs(lumaS - lumaM);\n        lumaN \x3d (lumaN + lumaM) * 0.5;\n        lumaS \x3d (lumaS + lumaM) * 0.5;\n        if (gradientN \x3c gradientS)\n        {\n          lumaN \x3d lumaS;\n          lumaN \x3d lumaS;\n          gradientN \x3d gradientS;\n          lengthSign *\x3d -1.0;\n        }\n        vec2 posN;\n        posN.x \x3d pos.x + (horzSpan ? 0.0 : lengthSign * 0.5);\n        posN.y \x3d pos.y + (horzSpan ? lengthSign * 0.5 : 0.0);\n        gradientN *\x3d FXAA_SEARCH_THRESHOLD;\n        vec2 posP \x3d posN;\n        vec2 offNP \x3d horzSpan ? vec2(rcpFrame.x, 0.0) : vec2(0.0, rcpFrame.y);\n        float lumaEndN \x3d lumaN;\n        float lumaEndP \x3d lumaN;\n        bool doneN \x3d false;\n        bool doneP \x3d false;\n        posN +\x3d offNP * vec2(-1.0, -1.0);\n        posP +\x3d offNP * vec2( 1.0,  1.0);\n        for(int i \x3d 0; i \x3c FXAA_SEARCH_STEPS; i++) {\n          if(!doneN) {\n            lumaEndN \x3d FxaaLuma(texture2D(tex, posN.xy).xyz);\n          }\n          if(!doneP) {\n            lumaEndP \x3d FxaaLuma(texture2D(tex, posP.xy).xyz);\n          }\n          doneN \x3d doneN || (abs(lumaEndN - lumaN) \x3e\x3d gradientN);\n          doneP \x3d doneP || (abs(lumaEndP - lumaN) \x3e\x3d gradientN);\n          if(doneN \x26\x26 doneP) { break; }\n          if(!doneN) {\n            posN -\x3d offNP;\n          }\n          if(!doneP) {\n            posP +\x3d offNP;\n          }\n        }\n        float dstN \x3d horzSpan ? pos.x - posN.x : pos.y - posN.y;\n        float dstP \x3d horzSpan ? posP.x - pos.x : posP.y - pos.y;\n        bool directionN \x3d dstN \x3c dstP;\n        lumaEndN \x3d directionN ? lumaEndN : lumaEndP;\n        if(((lumaM - lumaN) \x3c 0.0) \x3d\x3d ((lumaEndN - lumaN) \x3c 0.0)) {\n          lengthSign \x3d 0.0;\n        }\n        float spanLength \x3d (dstP + dstN);\n        dstN \x3d directionN ? dstN : dstP;\n        float subPixelOffset \x3d (0.5 + (dstN * (-1.0/spanLength))) * lengthSign;\n        vec3 rgbF \x3d texture2D(tex, vec2(\n          pos.x + (horzSpan ? 0.0 : subPixelOffset),\n          pos.y + (horzSpan ? subPixelOffset : 0.0))).xyz;\n        return FxaaLerp3(rgbL, rgbF, blendL);\n      }\n\n      void main() {\n        vec4 color;\n        vec2 screenCoord \x3d fCoordinate;\n        // if (screenCoord.x \x3c 0.5) {\n          color.rgb \x3d FxaaPixelShader(screenCoord, uColorTexture, uRcpFrameDimension);\n        // } else if (screenCoord.x \x3c 0.501 \x26\x26 screenCoord.x \x3e 0.499) {\n        //   color.rgb \x3d vec3(1,0,0);\n        // } else {\n        //   color \x3d texture2D(uColorTexture, fCoordinate);\n        // }\n        color.a \x3d 1.0;\n        gl_FragColor \x3d color;\n      }",
this.vertexAttributeLocations);this.pipelineState=k.makePipelineState({colorWrite:k.defaultColorWriteParams});var e=new Float32Array([-1,-1,3,-1,-1,3]);this.vao=new b(d,this.vertexAttributeLocations,{geometry:this.vertexBufferLayout},{geometry:new n(d,34962,35044,e)});return this.isEnabled=!0};d.prototype.disable=function(){this.isEnabled&&(this.program.dispose(),this.program=null,this.vao.dispose(),this.vao=null,this.isEnabled=!1)};d.prototype.render=function(b,e){this.enable();var c=this.rctx;c.bindVAO(this.vao);
c.bindFramebuffer(e);var f=0,a=0;null!=e?(f=e.descriptor.width,a=e.descriptor.height):(f=c.gl.canvas.width,a=c.gl.canvas.height);c.bindProgram(this.program);c.setPipelineState(this.pipelineState);c.bindTexture(b.colorTexture,0);this.program.setUniform1i("uColorTexture",0);this.program.setUniform2f("uRcpFrameDimension",1/f,1/a);c.drawArrays(4,0,3)};return d}()})},"esri/views/3d/webgl-engine/lib/HighlightHelper":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f32 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/debugFlags ./DefaultVertexAttributeLocations ./DefaultVertexBufferLayouts ./glUtil3D ./Util ../shaders/HighlightPrograms ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Util ../../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){return function(){function d(a,b){this._grid={coverageMipmap:null,vao:null,verticalCellCount:0,horizontalCellCount:0,cellPixelSize:0,mipmapLevels:0,viewportWidth:0,viewportHeight:0};this.blur1Fbo=this.blur0Fbo=this.quadVAO=null;this._rctx=b;this.viewportToRestore=k.vec4f64.create();this.defaultOptions={color:l.vec4f32.fromValues(1,0,1,1),haloOpacity:1,fillOpacity:.2,haloOpacityOccluded:.25,fillOpacityOccluded:.05};this.blurProgram=a.getProgram(f.blurPass,
{gaussianSamples:5});this.blurGridProgram=a.getProgram(f.blurPass,{gaussianSamples:5,gridOptimization:!0});this.applyProgram=a.getProgram(f.applyPass);this.applyGridProgram=a.getProgram(f.applyPass,{gridOptimization:!0});this.applyGridDebugProgram=a.getProgram(f.applyPass,{gridOptimization:!0,gridDebug:!0});this.downsampleProgram=a.getProgram(f.downsamplePass);this.preprocessPipelineState=q.makePipelineState({colorWrite:q.defaultColorWriteParams});this.applyPipelineState=q.makePipelineState({blending:q.separateBlendingParams(770,
1,771,771),colorWrite:q.defaultColorWriteParams})}Object.defineProperty(d.prototype,"enabled",{get:function(){return null!==this.blur0Fbo},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"profilingCallback",{get:function(){return b.HIGHLIGHTS_PROFILE_TO_CONSOLE?function(a){return console.log(a)}:null},enumerable:!0,configurable:!0});d.prototype.setDefaultOptions=function(a){this.defaultOptions=a};d.prototype.render=function(a,e,f){var d=
a.pixelRatio,g=!b.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED,h=b.HIGHLIGHTS_VISUALIZE_BLOCKS,k=this._rctx;c.assert(this.enabled);n.vec4.copy(this.viewportToRestore,a.fullViewport);var l=Math.ceil(a.fullWidth/d);a=Math.ceil(a.fullHeight/d);this.blur0Fbo.resize(l,a);this.blur1Fbo.resize(l,a);k.bindVAO(this.quadVAO);k.setPipelineState(this.preprocessPipelineState);var p=null,m=d=p=null;if(g){var q=this._grid;this._gridUpdateResources(e,32);this._gridComputeMipmap();d=q.vao;m=4;p=this.blurGridProgram;k.bindProgram(p);
k.bindTexture(q.coverageMipmap[q.mipmapLevels].colorTexture,1);p.setUniform1i("coverageTex",1)}else d=this.quadVAO,m=5,p=this.blurProgram,k.bindProgram(p);k.bindVAO(d);k.bindFramebuffer(this.blur0Fbo);k.setViewport(0,0,l,a);k.setClearColor(0,0,0,0);k.clear(16384);p.setUniform1i("tex",0);k.bindTexture(e.colorTexture,0);p.setUniform2f("blurSize",1/l,0);k.drawArrays(m,0,v.vertexCount(d,"geometry"));k.bindFramebuffer(this.blur1Fbo);k.clear(16384);k.bindTexture(this.blur0Fbo.colorTexture,0);p.setUniform2f("blurSize",
0,1/a);k.drawArrays(m,0,v.vertexCount(d,"geometry"));k.bindFramebuffer(f);k.setPipelineState(this.applyPipelineState);k.setViewport(this.viewportToRestore[0],this.viewportToRestore[1],this.viewportToRestore[2],this.viewportToRestore[3]);g?(p=h?this.applyGridDebugProgram:this.applyGridProgram,k.bindProgram(p),p.setUniform1i("coverageTex",2),k.bindTexture(this._grid.coverageMipmap[this._grid.mipmapLevels].colorTexture,2)):(p=this.applyProgram,k.bindProgram(p));p.setUniform1i("tex",0);k.bindTexture(this.blur1Fbo.colorTexture,
0);p.setUniform1i("origin",1);k.bindTexture(e.colorTexture,1);p.setUniform4fv("color",this.defaultOptions.color);p.setUniform1f("outlineSize",8.6);p.setUniform1f("blurSize",.4);p.setUniform4f("opacities",this.defaultOptions.haloOpacity,this.defaultOptions.haloOpacityOccluded,this.defaultOptions.fillOpacity,this.defaultOptions.fillOpacityOccluded);k.drawArrays(m,0,v.vertexCount(d,"geometry"));k.bindVAO(null)};d.prototype.enable=function(){if(!this.enabled){this.quadVAO=e.createQuadVAO(this._rctx);
var a={colorTarget:0,depthStencilTarget:0,width:0,height:0},b={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:0,height:0};this.blur0Fbo=p.createWithAttachments(this._rctx,b,a);this.blur1Fbo=p.createWithAttachments(this._rctx,b,a)}};d.prototype.disable=function(){this.enabled&&(this.quadVAO.dispose(!0),this.blur1Fbo.dispose(),this.blur0Fbo.dispose(),this.blur1Fbo=this.blur0Fbo=this.quadVAO=null)};d.prototype._gridUpdateResources=function(b,c){var e=this._rctx,f=this._grid,
d=!1;null===f.coverageMipmap&&(f.coverageMipmap=[b],d=!0);if(f.viewportWidth!==b.width||f.viewportHeight!==b.height)d=!0,f.viewportWidth=b.width,f.viewportHeight=b.height;f.coverageMipmap[0]=b;f.cellPixelSize!==c&&(f.cellPixelSize=c,d=!0);if(d){for(c=1;c<f.coverageMipmap.length;c++)f.coverageMipmap[c].dispose();f.mipmapLevels=Math.ceil(Math.log(f.cellPixelSize)*Math.LOG2E);f.coverageMipmap.length=f.mipmapLevels+1;for(c=0;c<f.mipmapLevels;c++)d=f.coverageMipmap[c],d=p.createWithAttachments(e,{target:3553,
pixelFormat:6407,dataType:33635,samplingMode:9729,wrapMode:33071,width:Math.ceil(d.width/2),height:Math.ceil(d.height/2)},{colorTarget:0,depthStencilTarget:0,width:Math.ceil(d.width/2),height:Math.ceil(d.height/2)}),f.coverageMipmap[c+1]=d}var d=Math.ceil(b.height/f.cellPixelSize),k=Math.ceil(b.width/f.cellPixelSize);if(!f.vao||f.verticalCellCount!==d||f.horizontalCellCount!==k){f.verticalCellCount=d;f.horizontalCellCount=k;b=d+1;c=k+1;for(var d=1/d,k=1/k,l=new Float32Array(24*b*c),q=0,w=0;w<b;w++)for(var x=
0;x<c;x++)l[q+0]=(x-.5)*k*2-1,l[q+1]=(w-.5)*d*2-1,l[q+2]=x*k,l[q+3]=w*d,l[q+4]=(x+.5)*k*2-1,l[q+5]=(w-.5)*d*2-1,l[q+6]=x*k,l[q+7]=w*d,l[q+8]=(x-.5)*k*2-1,l[q+9]=(w+.5)*d*2-1,l[q+10]=x*k,l[q+11]=w*d,l[q+12]=(x-.5)*k*2-1,l[q+13]=(w+.5)*d*2-1,l[q+14]=x*k,l[q+15]=w*d,l[q+16]=(x+.5)*k*2-1,l[q+17]=(w-.5)*d*2-1,l[q+18]=x*k,l[q+19]=w*d,l[q+20]=(x+.5)*k*2-1,l[q+21]=(w+.5)*d*2-1,l[q+22]=x*k,l[q+23]=w*d,q+=24;f.vao&&f.vao.dispose(!0);f.vao=new t(e,h.Default3D,{geometry:g.Pos2Tex},{geometry:a.createVertex(e,
35044,l)})}};d.prototype._gridComputeMipmap=function(){var a=this._rctx,b=this._grid,c=this.downsampleProgram;a.bindVAO(this.quadVAO);for(var e=0;e<b.mipmapLevels;e++){a.bindFramebuffer(b.coverageMipmap[e+1]);a.bindTexture(b.coverageMipmap[e].colorTexture,0);var f=b.coverageMipmap[e+1].width,d=b.coverageMipmap[e+1].height;a.bindProgram(c);c.setUniform1i("tex",0);c.setUniform2f("invFramebufferDim",1/f,1/d);a.setViewport(0,0,f,d);a.drawArrays(5,0,v.vertexCount(this.quadVAO,"geometry"))}};d.prototype.getGpuMemoryUsage=
function(){var a=v.getGpuMemoryUsage(this.blur0Fbo)+v.getGpuMemoryUsage(this.blur1Fbo);if(this._grid&&this._grid.coverageMipmap)for(var b=0,c=this._grid.coverageMipmap;b<c.length;b++)a+=v.getGpuMemoryUsage(c[b]);return a};return d}()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=n})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],
function(r,d){function n(){return new Float32Array(4)}function l(b,e,a,d){var c=new Float32Array(4);c[0]=b;c[1]=e;c[2]=a;c[3]=d;return c}function k(){return l(1,1,1,1)}function b(){return l(1,0,0,0)}function h(){return l(0,1,0,0)}function g(){return l(0,0,1,0)}function e(){return l(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(b){var c=new Float32Array(4);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c};d.fromValues=l;d.createView=function(b,e){return new Float32Array(b,
e,4)};d.zeros=function(){return n()};d.ones=k;d.unitX=b;d.unitY=h;d.unitZ=g;d.unitW=e;d.ZEROS=n();d.ONES=k();d.UNIT_X=b();d.UNIT_Y=h();d.UNIT_Z=g();d.UNIT_W=e()})},"esri/views/3d/webgl-engine/shaders/HighlightPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({GRID_OPTIMIZATION:b.gridOptimization,
GAUSSIAN_SAMPLES:b.gaussianSamples})},h=function(b){return k.glslifyDefineMap({GRID_OPTIMIZATION:b.gridOptimization,GRID_DEBUG:b.gridDebug})};d.downsamplePass={name:"highlight-downsample",shaders:{vertexShader:l.resolveIncludes("renderer/highlight/downsample.vert"),fragmentShader:l.resolveIncludes("renderer/highlight/downsample.frag")},attributes:n.Default3D};d.blurPass={name:"highlight-blur",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("renderer/highlight/blur.vert"),fragmentShader:b(d)+
l.resolveIncludes("renderer/highlight/blur.frag")}},attributes:n.Default3D};d.applyPass={name:"highlight-apply",shaders:function(b){return{vertexShader:h(b)+l.resolveIncludes("renderer/highlight/apply.vert"),fragmentShader:h(b)+l.resolveIncludes("renderer/highlight/apply.frag")}},attributes:n.Default3D}})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","../../core/has","./Renderbuffer","./Texture"],function(r,d,n,l,k){return function(){function b(d,g,e,c){this._colorAttachment=
this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=d;this._desc={colorTarget:g.colorTarget,depthStencilTarget:g.depthStencilTarget,width:g.width,height:g.height,multisampled:g.multisampled};this._id=b._nextId++;e&&(d=void 0,e instanceof k?(this._colorAttachment=e,d=e.descriptor):(d=e,this._colorAttachment=new k(this._context,d)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),
b._validateTextureDimensions(d,this._desc));c instanceof l?(2===g.depthStencilTarget?this._stencilAttachment=c:1===g.depthStencilTarget||3===g.depthStencilTarget?this._depthAttachment=c:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),b._validateBufferDimensions(c.descriptor,this._desc)):c&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
g=void 0,c instanceof k?(this._depthStencilTexture=c,g=this._depthStencilTexture.descriptor):(g=c,this._depthStencilTexture=new k(this._context,g)),b._validateTextureDimensions(g,this._desc))}b.create=function(d,g){return new b(d,g)};b.createWithAttachments=function(d,g,e,c){return new b(d,e,g,c)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof k?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"colorAttachment",{get:function(){return this._colorAttachment},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"depthStencilAttachment",{get:function(){return this._depthStencilTexture||
this._depthAttachment||this._stencilAttachment},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});b.prototype.dispose=function(){if(this._context){var b=
this._context,d=b.getBoundFramebufferObject();this._disposeColorAttachment();this._disposeDepthStencilAttachments();this._glName&&(b.gl.deleteFramebuffer(this._glName),this._glName=null);b.bindFramebuffer(d);this._context=null}};b.prototype.attachColorTexture=function(d){if(d){b._validateTextureDimensions(d.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,
g.TEXTURE_2D,d.glName,0)}this._colorAttachment=d}};b.prototype.detachColorTexture=function(){var b=void 0;if(this._colorAttachment instanceof k){b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}this._colorAttachment=null}return b};b.prototype.attachDepthStencilTexture=function(d){if(d){var g=d.descriptor;34041!==g.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
34042!==g.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");b._validateTextureDimensions(g,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferTexture2D(g.FRAMEBUFFER,
g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,d.glName,0));this._depthStencilTexture=d}};b.prototype.detachDepthStencilTexture=function(){var b=this._depthStencilTexture;if(b&&this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return b};b.prototype.attachDepthStencilBuffer=function(d){if(d){var g=d.descriptor;34041!==g.internalFormat&&33189!==g.internalFormat&&
console.error("Depth/Stencil buffer must have correct internalFormat");b._validateBufferDimensions(g,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===g.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferRenderbuffer(g.FRAMEBUFFER,1===this._desc.depthStencilTarget?g.DEPTH_ATTACHMENT:g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,d.glName));this._depthAttachment=d}};b.prototype.detachDepthStencilBuffer=function(){var b=
this._context.gl,d=this._depthAttachment;d&&this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null));this._depthAttachment=null;return d};b.prototype.copyToTexture=function(b,d,e,c,f,a,k){(0>b||0>d||0>f||0>a)&&console.error("Offsets cannot be negative!");(0>=e||0>=c)&&console.error("Copy width and height must be greater than zero!");var g=this._desc,h=k.descriptor;
3553!==k.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(b+e>g.width||d+c>g.height||f+e>h.width||a+c>h.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");g=this._context;g.bindTexture(k);g.bindFramebuffer(this);g.gl.copyTexSubImage2D(3553,0,f,a,b,d,e,c)};b.prototype.readPixels=function(b,d,e,c,f,a,k){(0>=e||0>=c)&&console.error("Copy width and height must be greater than zero!");k||console.error("Target memory is not initialized!");
this._context.bindFramebuffer(this);this._context.gl.readPixels(b,d,e,c,f,a,k)};b.prototype.resize=function(d,g){var e=this._desc;if(e.width!==d||e.height!==g)if(this._initialized)e.width=d,e.height=g,this._colorAttachment instanceof k?(c=this._colorAttachment,e=c.descriptor,e.width=d,e.height=g,this._colorAttachment.dispose(),this._colorAttachment=new k(this._context,e),b._validateTextureDimensions(c.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?
(e=this._depthStencilTexture.descriptor,e.width=d,e.height=g,this._depthStencilTexture.dispose(),this._depthStencilTexture=new k(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{e.width=d;e.height=g;if(this._colorAttachment instanceof k){var c=this._colorAttachment;c.resize(d,g)}this._depthStencilTexture&&this._depthStencilTexture.resize(d,
g)}};b.prototype.initialize=function(){if(this._initialized)return!1;var b=this._context.gl;this._glName&&b.deleteFramebuffer(this._glName);var d=b.createFramebuffer(),e=this._desc;b.bindFramebuffer(b.FRAMEBUFFER,d);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new k(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var c=new l(this._context,{internalFormat:32854,width:e.width,height:e.height});b.framebufferRenderbuffer(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.RENDERBUFFER,c.glName);this._colorAttachment=c}this._colorAttachment instanceof k&&b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new l(this._context,{internalFormat:1===e.depthStencilTarget?33189:34041,width:e.width,height:e.height}));b.framebufferRenderbuffer(b.FRAMEBUFFER,1===e.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,
b.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new l(this._context,{internalFormat:36168,width:e.width,height:e.height}));b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new k(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,this._depthStencilTexture.glName,0)}b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=d;return this._initialized=!0};b.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof
k){var b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}b.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(b=this._colorAttachment,d=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(b));this._colorAttachment=
null};b.prototype._disposeDepthStencilAttachments=function(){var b=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,
b.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};b._validateBufferDimensions=function(b,d){console.assert(0<=b.width&&0<=b.height);void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height?d.width===b.width&&d.height===b.height||
console.error("Renderbuffer dimensions must match the framebuffer's!"):(d.width=b.width,d.height=b.height)};b._validateTextureDimensions=function(b,d){console.assert(0<=b.width&&0<=b.height);3553!==b.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height?d.width===b.width&&d.height===b.height||console.error("Color attachment texture must match the framebuffer's!"):(d.width=b.width,d.height=b.height)};b._nextId=0;return b}()})},"esri/views/webgl/Renderbuffer":function(){define(["require",
"exports","../../core/has"],function(r,d,n){return function(){function d(k,b){this._context=k;this._desc=b;this._glName=null;this._id=-1;k=this._context.gl;this._id=++d._nextId;this._glName=k.createRenderbuffer();this._context.bindRenderbuffer(this);k.renderbufferStorage(k.RENDERBUFFER,b.internalFormat,b.width,b.height)}Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});d.prototype.resize=function(d,b){var h=this._context.gl,g=this._desc;if(g.width!==d||g.height!==b)g.width=d,g.height=b,this._context.bindRenderbuffer(this),h.renderbufferStorage(h.RENDERBUFFER,g.internalFormat,g.width,g.height)};d.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);this._context=
null};d._nextId=0;return d}()})},"esri/views/3d/webgl-engine/lib/OffscreenRenderingHelper":function(){define("require exports ./glUtil3D ./RenderTargetHelper ./Util ../shaders/OffscreenPrograms ../../../webgl/renderState ../../../webgl/Util".split(" "),function(r,d,n,l,k,b,h,g){var e=[0,0,0,0],c=[0,1,0,1];return function(){function d(a,c){this.dimensions={width:4,height:4};this._enabled=!1;this._background={type:"color",color:[0,0,0,1]};this._compositePipelineState=new Map;this._rctx=c;c=this.renderTargetHelper=
new l.RenderTargetHelper(c);this.mainColor=c.registerColorTarget({name:"mainColor"});this.mainDepth=c.registerDepthTarget({name:"mainDepth"});this.linearDepth=c.registerColorTarget({name:"linearDepth"});this.normal=c.registerColorTarget({name:"normal"});this.highlight=c.registerColorTarget({name:"highlight",dataType:32819});this.hudVisibility=c.registerColorTarget({name:"hudVisibility",dataType:32819});this.tmpColor=c.registerColorTarget({name:"tmpColor"});this.tmpDepth=c.registerDepthTarget({name:"tmpDepth"});
this._compositeProgram=a.getProgram(b.composite);this._compositePipelineState.set("none",h.makePipelineState({colorWrite:h.defaultColorWriteParams}));this._compositePipelineState.set("alpha",h.makePipelineState({blending:h.separateBlendingParams(770,1,771,771),colorWrite:h.defaultColorWriteParams}));this._compositePipelineState.set("premultiplied-alpha",h.makePipelineState({blending:h.simpleBlendingParams(1,771),colorWrite:h.defaultColorWriteParams}));this._compositeTransparentToHUDVisibilityProgram=
a.getProgram(b.compositeTransparentToHUDVisibility);this._compositeTransparentToHUDVisibilityPipelineState=h.makePipelineState({colorWrite:{r:!1,g:!0,b:!1,a:!1}});this._compositeOccludedProgram=a.getProgram(b.compositeOccluded);this._compositeOccludedPipelineState=h.makePipelineState({blending:h.simpleBlendingParams(1,771),colorWrite:h.defaultColorWriteParams})}Object.defineProperty(d.prototype,"width",{get:function(){return this.dimensions.width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"height",{get:function(){return this.dimensions.height},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"background",{get:function(){return this._background},set:function(a){this._background=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"framebuffer",{get:function(){return this.renderTargetHelper.getFramebuffer(this.dimensions,
this.mainColor,this.mainDepth)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"colorTexture",{get:function(){return this.framebuffer.colorTexture},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"depthTexture",{get:function(){return this.framebuffer.depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"linearDepthTexture",{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.linearDepth)},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"normalTexture",{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.normal)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"highlightTexture",{get:function(){return this.renderTargetHelper.getAllocatedColorTexture(this.highlight)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hudVisibilityTexture",{get:function(){return this.getColorTexture(this.hudVisibility)},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"tmpColorTexture",{get:function(){return this.getColorTexture(this.tmpColor)},enumerable:!0,configurable:!0});d.prototype.initializeFrame=function(a,b){k.assert(this.enabled);var c=this._rctx;this.dimensions.width=a.fullWidth;this.dimensions.height=a.fullHeight;this.outputFramebuffer=b;this.bindTarget(this.mainColor,this.mainDepth);c.setClearStencil(0);a=this._background.color;c.setClearColor(a[0]*a[3],a[1]*a[3],a[2]*a[3],a[3]);c.clearSafe(17664)};d.prototype.renderSeparateAndComposite=
function(a,b,c){void 0===b&&(b=e);void 0===c&&(c="none");this.renderToTargets(a,this.tmpColor,this.mainDepth,b);this.composite(this.getColorTexture(this.tmpColor),this.framebuffer,c)};d.prototype.renderHUDVisibility=function(a){this.renderToTargets(a,this.hudVisibility,this.mainDepth,c)};d.prototype.compositeTransparentTerrainOntoHUDVisibility=function(){var a=this,b=this._rctx;this.renderToTargets(function(){var c=a._compositeTransparentToHUDVisibilityProgram;b.bindProgram(c);b.setPipelineState(a._compositeTransparentToHUDVisibilityPipelineState);
c.setUniform1i("tex",1);b.bindTexture(a.getColorTexture(a.tmpColor),1);b.bindVAO(a.quadVAO);b.drawArrays(5,0,g.vertexCount(a.quadVAO,"geometry"))},this.hudVisibility,this.mainDepth)};d.prototype.compositeTransparentTerrainOntoMain=function(){this.composite(this.getColorTexture(this.tmpColor),this.framebuffer,"premultiplied-alpha")};d.prototype.compositeOccludedOntoMain=function(a){var b=this._rctx,c=this._compositeOccludedProgram;this.bindFramebuffer();b.bindProgram(c);b.setPipelineState(this._compositeOccludedPipelineState);
b.bindVAO(this.quadVAO);b.bindTexture(this.getColorTexture(this.tmpColor),0);c.setUniform1i("occludedColorMap",0);c.setUniform1f("opacity",a);b.drawArrays(5,0,g.vertexCount(this.quadVAO,"geometry"));b.bindVAO(null)};d.prototype.bindFramebuffer=function(){this._rctx.bindFramebuffer(this.framebuffer)};d.prototype.renderDepthDetached=function(a){var b=this.bindTarget(this.mainColor);a(b);this.bindTarget(this.mainColor,this.mainDepth)};d.prototype.composite=function(a,b,c){void 0===a&&(a=this.framebuffer.colorTexture);
void 0===b&&(b=this.outputFramebuffer);void 0===c&&(c="none");var e=this._rctx,d=this._compositeProgram;e.bindFramebuffer(b);e.bindProgram(d);e.setPipelineState(this._compositePipelineState.get(c));d.setUniform1i("tex",1);e.bindTexture(a,1);e.bindVAO(this.quadVAO);e.drawArrays(5,0,g.vertexCount(this.quadVAO,"geometry"))};d.prototype.disposeTarget=function(a){this.renderTargetHelper.disposeTargetResource(a)};d.prototype.enable=function(){this.enabled||(this._enabled=!0,this.quadVAO=n.createQuadVAO(this._rctx))};
d.prototype.disable=function(){this.enabled&&(this._enabled=!1,this.renderTargetHelper.disposeAllResource(),this.quadVAO.dispose(!0),this.quadVAO=null)};d.prototype.renderToTargets=function(a,b,c,e,d){var f=this._rctx;b=this.bindTarget(b,c);c=0;e&&(f.setClearColor(e[0],e[1],e[2],Math.max(1E-13,e[3])),c|=16384);d&&(c|=256);f.clearSafe(c);a(b);f.gl.flush();this.bindTarget(this.mainColor,this.mainDepth);return b};d.prototype.bindTarget=function(a,b){a=this.renderTargetHelper.getFramebuffer(this.dimensions,
a,b);this._rctx.bindFramebuffer(a);return a};d.prototype.getColorTexture=function(a){return this.renderTargetHelper.getColorTexture(a,this.dimensions)};d.prototype.getGpuMemoryUsage=function(){var a=0;this.renderTargetHelper&&(a+=this.renderTargetHelper.getGpuMemoryUsage());return a};return d}()})},"esri/views/3d/webgl-engine/lib/RenderTargetHelper":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../webgl/FramebufferObject ../../../webgl/Renderbuffer ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});var g={dataType:5121},e={};r=function(){function c(b){this.rctx=b;this.activeTargets=new Set;this.depthTextures=new Map;this.depthBuffers=new Map;this.colorTextures=new Map;this.framebuffers=new Map;this.nextId=1;this.depthTextureSupported=b.capabilities.depthTexture}c.prototype.disposeAllResource=function(){this.depthBuffers.forEach(function(b){return b.dispose()});this.depthBuffers.clear();this.depthTextures.forEach(function(b){return b.dispose()});
this.depthTextures.clear();this.colorTextures.forEach(function(b){return b.dispose()});this.colorTextures.clear()};c.prototype.disposeTargetResource=function(b){b=b.id;this.activeTargets.has(b)&&(this.activeTargets.delete(b),this.depthTextures.has(b)&&(this.depthTextures.get(b).dispose(),this.depthTextures.delete(b)),this.depthBuffers.has(b)&&(this.depthBuffers.get(b).dispose(),this.depthBuffers.delete(b)),this.colorTextures.has(b)&&(this.colorTextures.get(b).dispose(),this.colorTextures.delete(b)))};
c.prototype.getDepthTexture=function(c,a){if(this.depthTextureSupported){var e=this.depthTextures.get(c.id);!e||e.descriptor.width===a.width&&e.descriptor.height===a.height||(e.dispose(),e=void 0);e||(e=new b(this.rctx,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:a.width,height:a.height}),this.depthTextures.set(c.id,e),this.activeTargets.add(c.id));return e}};c.prototype.getDepthBuffer=function(b,a){if(!this.depthTextureSupported){var c=this.depthBuffers.get(b.id);
c?c.descriptor.width===a.width&&c.descriptor.height===a.height||c.resize(a.width,a.height):(c=new k(this.rctx,n({internalFormat:34041},a)),this.depthBuffers.set(b.id,c),this.activeTargets.add(b.id));return c}};c.prototype.getColorTexture=function(c,a){var e=this.colorTextures.get(c.id);!e||e.descriptor.width===a.width&&e.descriptor.height===a.height||(e.dispose(),e=void 0);e||(e=new b(this.rctx,{target:3553,pixelFormat:6408,dataType:c.dataType,samplingMode:9729,wrapMode:33071,width:a.width,height:a.height}),
this.colorTextures.set(c.id,e),this.activeTargets.add(c.id));return e};c.prototype.getAllocatedColorTexture=function(b){return this.colorTextures.get(b.id)};c.prototype.registerDepthTarget=function(b){void 0===b&&(b={});var a=this.nextId++;return n({id:a},e,b)};c.prototype.registerColorTarget=function(b){void 0===b&&(b={});var a=this.nextId++;return n({id:a},g,b)};c.prototype.getFramebuffer=function(b,a,c){var e=this.getKey(a,c),d=this.framebuffers.get(e);a=this.getColorTexture(a,b);if(this.depthTextureSupported){var f=
c?this.getDepthTexture(c,b):void 0;if(!d)return d=c?l.createWithAttachments(this.rctx,a,{colorTarget:0,depthStencilTarget:4},f):l.createWithAttachments(this.rctx,a,{colorTarget:0,depthStencilTarget:0}),this.framebuffers.set(e,d),d;if(c=d.width!==b.width||d.height!==b.height||d.colorTexture!==a||d.depthStencilTexture!==f)d.detachColorTexture(),d.detachDepthStencilTexture(),d.resize(b.width,b.height),d.attachColorTexture(a),d.attachDepthStencilTexture(f);return d}f=c?this.getDepthBuffer(c,b):void 0;
if(!d)return d=l.createWithAttachments(this.rctx,a,{colorTarget:0,depthStencilTarget:c?3:0},f),this.framebuffers.set(e,d),d;if(c=d.width!==b.width||d.height!==b.height||d.colorTexture!==a)d.detachColorTexture(),d.detachDepthStencilBuffer(),d.resize(b.width,b.height),d.attachColorTexture(a),d.attachDepthStencilBuffer(f);return d};c.prototype.getKey=function(b,a){return b.id+"_"+(a?a.id:"X")+"_"+b.name+(a?"_"+a.name:"")};c.prototype.getGpuMemoryUsage=function(){var b=0,a=new Set,c=function(c){a.has(c)||
(a.add(c),b+=h.getGpuMemoryUsage(c))};this.depthTextures.forEach(c);this.colorTextures.forEach(c);this.depthBuffers.forEach(c);this.framebuffers.forEach(c);return b};return c}();d.RenderTargetHelper=r})},"esri/views/3d/webgl-engine/shaders/OffscreenPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.composite={name:"offscreen-composite",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),
fragmentShader:l.resolveIncludes("renderer/offscreen/composite.frag")},attributes:n.Default3D};d.compositeTransparentToHUDVisibility={name:"offscreen-composite-transparent-to-hud-visibility",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),fragmentShader:l.resolveIncludes("renderer/offscreen/compositeTransparentToHUDVisibility.frag")},attributes:n.Default3D};d.compositeOccluded={name:"offscreen-composite-occluded",shaders:{vertexShader:l.resolveIncludes("renderer/offscreen/offscreen.vert"),
fragmentShader:l.resolveIncludes("renderer/offscreen/compositeOccluded.frag")},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/RenderContext":function(){define(["require","exports"],function(r,d){return function(){function d(d,k,b,h,g,e){this.camera=null;this.slot=this.pass=0;this.options=null;this.renderOccludedMask=5;this.rctx=d;this.offscreenRenderingHelper=k;this.lightingData=b;this.shadowMap=h;this.ssaoHelper=g;this.sliceHelper=e}d.prototype.resetRenderOccludedMask=function(){this.renderOccludedMask=
5};Object.defineProperty(d.prototype,"isHighlightPass",{get:function(){return 4===this.pass},enumerable:!0,configurable:!0});return d}()})},"esri/views/3d/webgl-engine/lib/RenderPluginManager":function(){define(["require","exports","./depthRange"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b){this.pluginContext=b;this.pluginsChanged=!1;this.renderPlugins=[];this.slots=[];for(b=0;21>b;++b)this.slots[b]=[]}d.prototype.add=function(b,d){this.renderPlugins.push(d);
for(var g=0;g<b.length;++g)this.slots[b[g]].push(d);d.initializeRenderContext(this.pluginContext);this.pluginsChanged=!0};d.prototype.remove=function(b){this.renderPlugins=this.renderPlugins.filter(function(d){return d!==b});for(var d=0;d<this.slots.length;++d)this.slots[d]=this.slots[d].filter(function(d){return d!==b});b.uninitializeRenderContext(this.pluginContext);this.pluginsChanged=!0};d.prototype.prepareRender=function(b){for(var d=0,g=this.renderPlugins;d<g.length;d++){var e=g[d];e.prepareRender&&
e.prepareRender(b)}};d.prototype.render=function(b,d){this.pluginsChanged=!1;d.slot=b;var g=!1,e=0;for(b=this.slots[b];e<b.length;e++)b[e].render(d)&&(g=!0);return g};d.prototype.queryDepthRange=function(b){var d=l;d.near=Infinity;d.far=-Infinity;for(var g=0,e=this.renderPlugins;g<e.length;g++){var c=e[g];c.queryDepthRange&&(c=c.queryDepthRange(b))&&n.union(d,c,d)}return d};d.prototype.needsRender=function(){if(this.pluginsChanged)return!0;for(var b=0,d=this.renderPlugins;b<d.length;b++)if(d[b].needsRender)return!0;
return!1};d.prototype.needsHighlight=function(){for(var b=0,d=this.renderPlugins;b<d.length;b++)if(d[b].needsHighlight)return!0;return!1};d.prototype.needsLinearDepth=function(){for(var b=0,d=this.renderPlugins;b<d.length;b++)if(d[b].needsLinearDepth)return!0;return!1};return d}();d.RenderPluginManager=r;var l={near:0,far:0}})},"esri/views/3d/webgl-engine/lib/ShadowMap":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/mathUtils ./Camera ./glUtil3D ./Util ../../../webgl/FramebufferObject ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){function m(a,b){h.vec2.set(pa,a[b],a[b+3]);return pa}var u=function(){return function(){this.camera=new q;this.lightMat=b.mat4f64.create()}}();r=function(){function a(a){this.doShadowMapMipmapsWork=!1;this.textureRes=4096;this.numCascades=1;this.maxNumCascades=2;this.cascadeDistances=[0,0,0,0,0];this.cascades=[];this.rctx=a;this.emptyTexture=v.createEmptyTexture(a);for(a=0;4>a;++a)this.cascades.push(new u)}a.prototype.dispose=function(){this.emptyTexture.dispose();
this.emptyTexture=null};Object.defineProperty(a.prototype,"textureResolution",{get:function(){return this.textureRes},set:function(a){this.textureRes=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxCascades",{get:function(){return this.maxNumCascades},set:function(a){this.maxNumCascades=n.clamp(Math.floor(a),1,4)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"enabled",{get:function(){return!!this.depthTexture},set:function(a){a?this.enable():this.disable()},
enumerable:!0,configurable:!0});a.prototype.getDepthTexture=function(){return this.depthTexture};a.prototype.getCascades=function(){for(var a=0;a<this.numCascades;++a)T[a]=this.cascades[a];T.length=this.numCascades;return T};a.prototype.prepare=function(a,b,c){t.assert(this.enabled);k.mat4.multiply(B,a.projectionMatrix,a.viewMatrix);var d=c.near,g=c.far;2>d&&(d=2);2>g&&(g=2);d>=g&&(d=2,g=4);this.numCascades=Math.min(1+Math.floor(t.logWithBase(g/d,4)),this.maxNumCascades);var l=Math.pow(g/d,1/this.numCascades);
for(c=0;c<this.numCascades+1;++c)this.cascadeDistances[c]=d*Math.pow(l,c);k.mat4.invert(C,B);k.mat4.lookAt(P,[0,0,0],[-b[0],-b[1],-b[2]],[0,1,0]);l=a.viewMatrix;a=a.projectionMatrix;for(c=0;c<this.numCascades;++c){var q=this.cascades[c],g=-this.cascadeDistances[c],d=-this.cascadeDistances[c+1],g=(a[10]*g+a[14])/Math.abs(a[11]*g+a[15]),d=(a[10]*d+a[14])/Math.abs(a[11]*d+a[15]);t.assert(g<d);for(var u=0;8>u;++u){f.vec4.set(F,0===u%4||3===u%4?-1:1,0===u%4||1===u%4?-1:1,4>u?g:d,1);f.vec4.transformMat4(E[u],
F,C);for(var w=0;3>w;++w)E[u][w]/=E[u][3]}e.vec3.negate(V,E[0]);k.mat4.translate(z,P,V);q.camera.viewMatrix=z;for(u=0;8>u;++u)e.vec3.transformMat4(E[u],E[u],q.camera.viewMatrix);e.vec3.copy(N,E[0]);e.vec3.copy(L,E[0]);for(u=1;8>u;++u)for(w=0;3>w;++w)N[w]=Math.min(N[w],E[u][w]),L[w]=Math.max(L[w],E[u][w]);N[2]-=200;L[2]+=200;q.camera.near=-L[2];q.camera.far=-N[2];d=1/E[0][3];g=1/E[4][3];t.assert(d<g);var w=d+Math.sqrt(d*g),u=Math.sin(p.acos(l[2]*b[0]+l[6]*b[1]+l[10]*b[2])),w=w/u,d=E,x=w,y=u,u=K,v=
O,n=I,r=H,w=S;h.vec2.set(J,0,0);for(var Q=0;4>Q;++Q)h.vec2.add(J,J,d[Q]);h.vec2.scale(J,J,.25);h.vec2.set(R,0,0);for(Q=4;8>Q;++Q)h.vec2.add(R,R,d[Q]);h.vec2.scale(R,R,.25);h.vec2.lerp(U[0],d[4],d[5],.5);h.vec2.lerp(U[1],d[5],d[6],.5);h.vec2.lerp(U[2],d[6],d[7],.5);h.vec2.lerp(U[3],d[7],d[4],.5);for(var pa=0,A=h.vec2.squaredDistance(U[0],J),Q=1;4>Q;++Q){var Z=h.vec2.squaredDistance(U[Q],J);Z<A&&(A=Z,pa=Q)}h.vec2.subtract(X,U[pa],d[pa+4]);Q=X[0];X[0]=-X[1];X[1]=Q;h.vec2.subtract(ca,R,J);h.vec2.lerp(X,
X,ca,y);h.vec2.normalize(X,X);pa=y=void 0;y=pa=h.vec2.dot(h.vec2.subtract(G,d[0],J),X);for(Q=1;8>Q;++Q)A=h.vec2.dot(h.vec2.subtract(G,d[Q],J),X),A<y?y=A:A>pa&&(pa=A);h.vec2.copy(u,J);h.vec2.scale(G,X,y-x);h.vec2.add(u,u,G);for(var Z=-1,T=1,Q=x=A=0;8>Q;++Q){h.vec2.subtract(Y,d[Q],u);h.vec2.normalize(Y,Y);var ia=X[0]*Y[1]-X[1]*Y[0];0<ia?ia>Z&&(Z=ia,A=Q):ia<T&&(T=ia,x=Q)}t.verify(0<Z,"leftArea");t.verify(0>T,"rightArea");h.vec2.scale(la,X,y);h.vec2.add(la,la,J);h.vec2.scale(ja,X,pa);h.vec2.add(ja,ja,
J);na[0]=-X[1];na[1]=X[0];v=t.rayRay2D(u,d[x],ja,h.vec2.add(G,ja,na),1,v);n=t.rayRay2D(u,d[A],ja,G,1,n);r=t.rayRay2D(u,d[A],la,h.vec2.add(G,la,na),1,r);d=t.rayRay2D(u,d[x],la,G,1,w);t.verify(v,"rayRay");t.verify(n,"rayRay");t.verify(r,"rayRay");t.verify(d,"rayRay");n=K;d=O;u=H;r=S;w=q.camera.projectionMatrix;h.vec2.subtract(ta,u,r);h.vec2.scale(ta,ta,.5);aa[0]=ta[0];aa[1]=ta[1];aa[2]=0;aa[3]=ta[1];aa[4]=-ta[0];aa[5]=0;aa[6]=ta[0]*ta[0]+ta[1]*ta[1];aa[7]=ta[0]*ta[1]-ta[1]*ta[0];aa[8]=1;aa[6]=-h.vec2.dot(m(aa,
0),n);aa[7]=-h.vec2.dot(m(aa,1),n);n=h.vec2.dot(m(aa,0),u)+aa[6];v=h.vec2.dot(m(aa,1),u)+aa[7];Q=h.vec2.dot(m(aa,0),r)+aa[6];r=h.vec2.dot(m(aa,1),r)+aa[7];n=-(n+Q)/(v+r);aa[0]+=aa[1]*n;aa[3]+=aa[4]*n;aa[6]+=aa[7]*n;n=1/(h.vec2.dot(m(aa,0),u)+aa[6]);v=1/(h.vec2.dot(m(aa,1),u)+aa[7]);aa[0]*=n;aa[3]*=n;aa[6]*=n;aa[1]*=v;aa[4]*=v;aa[7]*=v;aa[2]=aa[1];aa[5]=aa[4];aa[8]=aa[7];aa[7]+=1;n=h.vec2.dot(m(aa,1),d)+aa[7];v=h.vec2.dot(m(aa,2),d)+aa[8];Q=h.vec2.dot(m(aa,1),u)+aa[7];r=h.vec2.dot(m(aa,2),u)+aa[8];
n=-.5*(n/v+Q/r);aa[1]+=aa[2]*n;aa[4]+=aa[5]*n;aa[7]+=aa[8]*n;n=h.vec2.dot(m(aa,1),d)+aa[7];v=h.vec2.dot(m(aa,2),d)+aa[8];Q=-v/n;aa[1]*=Q;aa[4]*=Q;aa[7]*=Q;w[0]=aa[0];w[1]=aa[1];w[2]=0;w[3]=aa[2];w[4]=aa[3];w[5]=aa[4];w[6]=0;w[7]=aa[5];w[8]=0;w[9]=0;w[10]=1;w[11]=0;w[12]=aa[6];w[13]=aa[7];w[14]=0;w[15]=aa[8];q.camera.projectionMatrix[10]=2/(N[2]-L[2]);q.camera.projectionMatrix[14]=-(N[2]+L[2])/(N[2]-L[2]);k.mat4.multiply(q.lightMat,q.camera.projectionMatrix,q.camera.viewMatrix);d=this.textureRes/2;
q.camera.viewport[0]=0===c%2?0:d;q.camera.viewport[1]=0===Math.floor(c/2)?0:d;q.camera.viewport[2]=d;q.camera.viewport[3]=d}this.lastOrigin=null;this.cascadeDistances[this.numCascades]=100*g;b=this.rctx;b.bindFramebuffer(this.fbo);b.bindTexture(null,7);b.setClearColor(1,1,1,1);b.clearSafe(16640)};a.prototype.finish=function(a){t.assert(this.enabled);this.rctx.bindFramebuffer(a);this.doShadowMapMipmapsWork&&this.depthTexture.generateMipmap()};a.prototype.bind=function(a){var b=this.rctx,c=this.enabled;
b.bindTexture(c?this.depthTexture:this.emptyTexture,7);b.bindProgram(a);a.setUniform1i("depthTex",7);a.setUniform1f("depthHalfPixelSz",c?.5/this.textureRes:-1);a.setUniform1i("shadowMapNum",this.numCascades);a.setUniform4f("shadowMapDistance",this.cascadeDistances[0],this.cascadeDistances[1],this.cascadeDistances[2],this.cascadeDistances[3])};a.prototype.bindAll=function(a){a=a.getProgramsUsingUniform("shadowMapDistance");for(var b=0;b<a.length;b++)this.bind(a[b])};a.prototype.bindView=function(a,
b){if(this.enabled){var d=this.lastOrigin;if(!d||d[0]!==b[0]||d[1]!==b[1]||d[2]!==b[2])for(this.lastOrigin=this.lastOrigin||c.vec3f64.create(),e.vec3.copy(this.lastOrigin,b),d=0;d<this.numCascades;++d){k.mat4.translate(Z,this.cascades[d].lightMat,b);for(var f=0;16>f;++f)Q[16*d+f]=Z[f]}a.setUniformMatrix4fv("shadowMapMatrix",Q)}};a.prototype.enable=function(){this.enabled||(this.depthTexture=new x(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,width:this.textureRes,
height:this.textureRes}),this.fbo=y.createWithAttachments(this.rctx,this.depthTexture,{colorTarget:0,depthStencilTarget:1,width:this.textureRes,height:this.textureRes}))};a.prototype.disable=function(){this.enabled&&this.fbo&&(this.fbo.dispose(),this.depthTexture=this.fbo=null)};a.prototype.getGpuMemoryUsage=function(){return w.getGpuMemoryUsage(this.fbo)};return a}();var z=b.mat4f64.create(),B=b.mat4f64.create(),C=b.mat4f64.create(),F=a.vec4f64.create(),E=[];for(d=0;8>d;++d)E.push(a.vec4f64.create());
var N=c.vec3f64.create(),L=c.vec3f64.create(),K=g.vec2f64.create(),O=g.vec2f64.create(),I=g.vec2f64.create(),H=g.vec2f64.create(),S=g.vec2f64.create(),P=b.mat4f64.create(),V=c.vec3f64.create(),T=[],Z=b.mat4f64.create(),Q=new Float32Array(64),J=g.vec2f64.create(),R=g.vec2f64.create(),U=[g.vec2f64.create(),g.vec2f64.create(),g.vec2f64.create(),g.vec2f64.create()],X=g.vec2f64.create(),ca=g.vec2f64.create(),G=g.vec2f64.create(),Y=g.vec2f64.create(),la=g.vec2f64.create(),ja=g.vec2f64.create(),na=g.vec2f64.create(),
pa=g.vec2f64.create(),ta=g.vec2f64.create(),aa=l.mat3f64.create();return r})},"esri/views/3d/webgl-engine/lib/SliceHelper":function(){define(["require","exports","../../support/geometryUtils"],function(r,d,n){var l=n.boundedPlane.create();return function(){function d(){this._worldPlane=l}Object.defineProperty(d.prototype,"isEnabled",{get:function(){return this.plane!==l},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"plane",{get:function(){return this._worldPlane},set:function(b){this._worldPlane=
b?b:l},enumerable:!0,configurable:!0});return d}()})},"esri/views/3d/webgl-engine/lib/SmaaRenderPass":function(){define("require exports ../../support/imageUtils ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../webgl/Program ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/VertexArrayObject".split(" "),function(r,d,n,l,k,b,h,g,e){return function(){function c(b){this.isEnabled=this._isLoadingResources=!1;this.vertexAttributeLocations={vPosition:0};this.vertexBufferLayout=
[{name:"vPosition",count:2,type:5126,offset:0,stride:8,normalized:!1}];this.rctx=b}c.prototype.loadResources=function(b){var a=this;return this.data?!0:(this._isLoadingResources=!0,r(["./SmaaRenderPassData"],function(c){a.data=c;a._isLoadingResources=!1;b&&b()}),!1)};Object.defineProperty(c.prototype,"isLoadingResources",{get:function(){return this._isLoadingResources},enumerable:!0,configurable:!0});c.prototype.enable=function(){if(this.isEnabled)return!0;if(!this.loadResources())return!1;var c=
this.rctx;this.programEdgeDetect=new b(c,this.data.edgeDetectShader.vertex,this.data.edgeDetectShader.fragment,this.vertexAttributeLocations);this.programBlendWeights=new b(c,this.data.blendWeightShader.vertex,this.data.blendWeightShader.fragment,this.vertexAttributeLocations);this.programBlur=new b(c,this.data.blurShader.vertex,this.data.blurShader.fragment,this.vertexAttributeLocations);this.pipelineState=h.makePipelineState({colorWrite:h.defaultColorWriteParams});var a=new Float32Array([-1,-1,
3,-1,-1,3]);this.vao=new e(c,this.vertexAttributeLocations,{geometry:this.vertexBufferLayout},{geometry:new l(c,34962,35044,a)});this.tmpFramebufferEdges=k.createWithAttachments(this.rctx,{target:3553,pixelFormat:6407,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4},{colorTarget:0,depthStencilTarget:0});this.tmpFramebufferBlend=k.createWithAttachments(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4},{colorTarget:0,depthStencilTarget:0});
this.textureArea=this.loadTextureFromBase64(this.data.areaTexture,9729,6407);this.textureSearch=this.loadTextureFromBase64(this.data.searchTexure,9728,6409);return this.isEnabled=!0};c.prototype.disable=function(){this.isEnabled&&(this.programEdgeDetect.dispose(),this.programEdgeDetect=null,this.programBlendWeights.dispose(),this.programBlendWeights=null,this.programBlur.dispose(),this.programBlur=null,this.vao.dispose(),this.vao=null,this.textureArea.dispose(),this.textureArea=null,this.textureSearch.dispose(),
this.textureSearch=null,this.tmpFramebufferBlend.dispose(),this.tmpFramebufferBlend=null,this.tmpFramebufferEdges.dispose(),this.tmpFramebufferEdges=null,this.isEnabled=!1)};c.prototype.render=function(b,a){this.enable();var c=this.rctx,e=0,d=0;null!=a?(e=a.descriptor.width,d=a.descriptor.height):(e=c.gl.canvas.width,d=c.gl.canvas.height);c.bindVAO(this.vao);c.setPipelineState(this.pipelineState);c.setViewport(0,0,e,d);this.tmpFramebufferEdges.resize(e,d);c.bindFramebuffer(this.tmpFramebufferEdges);
c.setClearColor(0,0,0,1);c.clear(16384);c.bindProgram(this.programEdgeDetect);c.bindTexture(b.colorTexture,0);this.programEdgeDetect.setUniform1i("tColor",0);this.programEdgeDetect.setUniform4f("uResolution",1/e,1/d,e,d);c.drawArrays(4,0,3);this.tmpFramebufferBlend.resize(e,d);c.bindFramebuffer(this.tmpFramebufferBlend);c.setClearColor(0,0,1,1);c.clear(16384);c.bindProgram(this.programBlendWeights);this.programBlendWeights.setUniform4f("uResolution",1/e,1/d,e,d);c.bindTexture(this.textureSearch,1);
this.programBlendWeights.setUniform1i("tSearch",1);c.bindTexture(this.textureArea,2);this.programBlendWeights.setUniform1i("tArea",2);c.bindTexture(this.tmpFramebufferEdges.colorTexture,3);this.programBlendWeights.setUniform1i("tEdges",3);c.drawArrays(4,0,3);c.bindFramebuffer(a);c.setClearColor(0,1,0,1);c.clear(16384);c.bindProgram(this.programBlur);this.programBlur.setUniform4f("uResolution",1/e,1/d,e,d);c.bindTexture(b.colorTexture,0);this.programBlur.setUniform1i("tColor",0);c.bindTexture(this.tmpFramebufferBlend.colorTexture,
1);this.programBlur.setUniform1i("tBlendWeights",1);c.drawArrays(4,0,3)};c.prototype.loadTextureFromBase64=function(b,a,c){var e=new g(this.rctx,{pixelFormat:c,dataType:5121,wrapMode:33071,samplingMode:a},null);n.requestImage(b).then(function(a){e.resize(a.width,a.height);e.setData(a)});return e};return c}()})},"esri/views/3d/webgl-engine/lib/SSAOHelper":function(){define("require exports ../../../../core/Logger ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/imageUtils ./glUtil3D ./Util ../shaders/SSAOPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){var t=n.getLogger("esri.views.3d.webgl-engine.lib.SSAOHelper");d=function(){function d(a,b,c){this._enabled=!1;this._BLUR_F=2;this._attenuation=.5;this._radius=3;this._samples=16;this._viewportToRestore=h.vec4f64.create();this._rctx=b;this._programRep=a;this._requestRender=c;this._emptyTexture=e.createEmptyTexture(b)}d.prototype.dispose=function(){this._emptyTexture.dispose();this._emptyTexture=null};Object.defineProperty(d.prototype,"isSupported",{get:function(){var a=
this._rctx,b=-1!==a.parameters.versionString.indexOf("WebGL 0.93"),a=-1!==a.parameters.versionString.indexOf("WebGL 0.94");return!(b||a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a?this.enable():this.disable()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"attenuation",{get:function(){return this._attenuation},set:function(a){this._attenuation=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"radius",{get:function(){return this._radius},set:function(a){this._radius=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"filterRadius",{get:function(){return 4},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"samples",{get:function(){return this._samples},set:function(a){this._samples=a;this._enabled&&this.selectPrograms()},enumerable:!0,configurable:!0});d.prototype.computeSSAO=function(a,d,f){if(this._noiseTexture){c.assert(this.enabled);var g=this._rctx,
h=a.fullViewport,l=h[2],p=h[3],h=l/this._BLUR_F,m=p/this._BLUR_F;this._ssaoFBO.resize(l,p);this._blur0FBO.resize(h,m);this._blur1FBO.resize(h,m);h=1*l;m=1*p;g.bindFramebuffer(this._ssaoFBO);b.vec4.copy(this._viewportToRestore,a.fullViewport);g.setViewport(0,0,l,p);var u=this._ssaoProgram,q=this._blurProgram;u.setUniform2f("rnmScale",l/this._noiseTexture.descriptor.width,p/this._noiseTexture.descriptor.height);u.setUniform3fv("pSphere",8>=this._samples?this._data.random8:16>=this._samples?this._data.random16:
32>=this._samples?this._data.random32:this._data.random64);g.bindProgram(u);g.setPipelineState(this._pipelineState);l=this._data.minDiscrepancy;u.setUniform1f("numSpiralTurns",this._samples<l.length?l[this._samples]:5779);l=x;p=y;c.inverseProjectionInfo(a.projectionMatrix,a.fullWidth,a.fullHeight,l,p);u.setUniform4fv("projInfo",l);u.setUniform2fv("zScale",p);u.setUniform2f("nearFar",a.near,a.far);l=1/a.computeRenderPixelSizeAtDist(1);u.setUniform1f("projScale",1*l);u.setUniform2f("screenDimensions",
h,m);var z=2*this._radius,p=k.vec3.distance(a.eye,a.center),z=20*a.computeRenderPixelSizeAtDist(p),z=Math.max(.1,z);u.setUniform1f("radius",z);u.setUniform1f("intensity",4*this._attenuation/Math.pow(z,6));u.setUniform1i("rnm",0);u.setUniform1i("normalMap",1);u.setUniform1i("depthMap",2);g.bindTexture(this._noiseTexture,0);g.bindTexture(f,1);g.bindTexture(d,2);d=e.createQuadVAO(this._rctx);g.bindVAO(d);g.drawArrays(5,0,v.vertexCount(d,"geometry"));g.bindTexture(this._ssaoFBO.colorTexture,0);g.setViewport(0,
0,h/this._BLUR_F,m/this._BLUR_F);g.bindFramebuffer(this._blur0FBO);q.setUniform2f("screenDimensions",h,m);q.setUniform1i("tex",0);q.setUniform1i("normalMap",1);q.setUniform1i("depthMap",2);q.setUniform2f("blurSize",0,1*this._BLUR_F/m);q.setUniform1i("radius",4);q.setUniform1f("g_BlurFalloff",.08);q.setUniform2f("nearFar",a.near,a.far);5E4<p&&(l=Math.max(0,l-(p-5E4)));q.setUniform1f("projScale",l);q.setUniform2f("zScale",1,0);g.drawArrays(5,0,v.vertexCount(d,"geometry"));q.setUniform2f("blurSize",
1*this._BLUR_F/h,0);g.bindFramebuffer(this._blur1FBO);g.bindTexture(this._blur0FBO.colorTexture,0);g.drawArrays(5,0,v.vertexCount(d,"geometry"));g.setViewport(this._viewportToRestore[0],this._viewportToRestore[1],this._viewportToRestore[2],this._viewportToRestore[3])}};d.prototype.setUniforms=function(a){var b=this.enabled&&this._noiseTexture,c=this._rctx;c.bindTexture(b?this._blur1FBO.colorTexture:this._emptyTexture,6);c.setActiveTexture(0);a.setUniform1i("ssaoTex",6);b?a.setUniform4f("viewportPixelSz",
this._viewportToRestore[0],this._viewportToRestore[1],1/this._ssaoFBO.width,1/this._ssaoFBO.height):a.setUniform4f("viewportPixelSz",-1,-1,-1,-1)};d.prototype.bindAll=function(a){a=a.getProgramsUsingUniform("viewportPixelSz");for(var b=0;b<a.length;b++)this.setUniforms(a[b])};d.prototype.selectPrograms=function(){this._ssaoProgram=this._programRep.getProgram(f.ssaoPass,{samples:8>=this._samples?8:16>=this._samples?16:32>=this._samples?32:64});this._blurProgram=this._programRep.getProgram(f.blurPass,
{radius:4});this._pipelineState=p.makePipelineState({colorWrite:p.defaultColorWriteParams})};d.prototype.enable=function(){var a=this;this.enabled||(this.isSupported?(this._enabled=!0,this.loadResources(function(){a._enabled&&a.initialize()})):t.warn("SSAO is not supported for this browser or hardware"))};d.prototype.loadResources=function(a){var b=this;this._data?a():r(["./SSAOHelperData"],function(c){b._data=c;a()})};d.prototype.initialize=function(){var b=this,c={target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9729,wrapMode:33071,width:0,height:0},e={colorTarget:0,depthStencilTarget:0};this._ssaoFBO=a.createWithAttachments(this._rctx,c,e);this._blur0FBO=a.createWithAttachments(this._rctx,c,e);this._blur1FBO=a.createWithAttachments(this._rctx,c,e);g.requestImage(this._data.noiseTexture).then(function(a){b._enabled&&(b._noiseTexture=new q(b._rctx,{target:3553,pixelFormat:6408,dataType:5121,hasMipmap:!0,width:a.width,height:a.height},a),b._requestRender())});this.selectPrograms()};d.prototype.disable=
function(){this.enabled&&(this._enabled=!1,this._quadVAO&&(this._quadVAO.dispose(!0),this._quadVAO=null),this._noiseTexture&&(this._noiseTexture.dispose(),this._noiseTexture=null),this._blur1FBO&&(this._blur1FBO.dispose(),this._blur1FBO=null),this._blur0FBO&&(this._blur0FBO.dispose(),this._blur0FBO=null),this._ssaoFBO&&(this._ssaoFBO.dispose(),this._ssaoFBO=null))};d.prototype.getGpuMemoryUsage=function(){return v.getGpuMemoryUsage(this._blur0FBO)+v.getGpuMemoryUsage(this._blur1FBO)+v.getGpuMemoryUsage(this._ssaoFBO)};
return d}();var y=l.vec2f64.create(),x=h.vec4f64.create();return d})},"esri/views/3d/webgl-engine/shaders/SSAOPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.ssaoPass={name:"ssao",shaders:function(d){return{vertexShader:l.resolveIncludes("util/quad.vert"),fragmentShader:"#define SAMPLES "+d.samples+"\n"+l.resolveIncludes("renderer/ssao/ssao.frag")}},attributes:n.Default3D};
d.blurPass={name:"ssao-blur",shaders:function(d){return{vertexShader:l.resolveIncludes("util/quad.vert"),fragmentShader:"#define RADIUS "+d.radius+"\n"+l.resolveIncludes("renderer/ssao/blur.frag")}},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeView":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/arrayUtils ../../../../../core/mathUtils ../../../../../core/promiseUtils ../../../../../core/requireUtils ../../../../../core/typedArrayUtil ../../../../../core/workers ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4f64 ../../../support/buffer/BufferView ../../../support/buffer/utils ../GridLocalOriginFactory ../localOriginHelper ../LocalOriginManager ../PreinterleavedGeometryData ../TextureBackedBuffer/BufferManager ./bufferLayouts ./edgeBufferWriters ./EdgeProcessingWorker ./EdgeRenderer ./strokes ./util ../../../../webgl/BufferObject ../../../../webgl/renderState ../../../../webgl/VertexArrayObject module".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){Object.defineProperty(d,"__esModule",{value:!0});var S=function(){function d(a,b,c){this.rctx=a;this.programRepository=b;this.callbacks=c;this.profilingCallback=null;this.perObjectData=new Map;this.renderers=new Map;this.localOrigins=new m.LocalOriginManager(new x);this.gpuMemoryUsage=this.numberOfRenderedEdges=0;this.worker=new F;this.workerThread=null;this.destroyed=!1;this.tmpModelPosition=q.vec3f64.create();this.tmpCameraPosition=
q.vec3f64.create();this.componentColorManager=new z.BufferManager(this.rctx,2)}d.prototype.initialize=function(){var a=this;f.open(e.getAbsMid("./EdgeProcessingWorker",r,H)).then(function(b){a.destroyed?b.close():a.workerThread=b});for(var b=B.VertexLayout.createBuffer(4),c=0;4>c;c++)b.sideness.set(c,0,0===c||3===c?0:1),b.sideness.set(c,1,0===c||1===c?0:1);this.verticesBufferObject=K.createVertex(this.rctx,35044,b.buffer);this.pipelineState=(b=this.rctx.capabilities.blendMinMax)?O.makePipelineState({blending:O.separateBlendingParams(1,
1,0,1,32774,b.MAX),depthTest:{func:515},colorWrite:O.defaultColorWriteParams}):O.makePipelineState({depthTest:{func:515},depthWrite:O.defaultDepthWriteParams,colorWrite:O.defaultColorWriteParams})};d.prototype.destroy=function(){this.destroyed||(this.workerThread&&(this.workerThread.close(),this.workerThread=null),this.verticesBufferObject&&(this.verticesBufferObject.dispose(),this.verticesBufferObject=null),this.destroyed=!0)};d.prototype.getUsedMemory=function(){return this.gpuMemoryUsage};Object.defineProperty(d.prototype,
"numberOfRenderedPrimitives",{get:function(){return this.numberOfRenderedEdges},enumerable:!0,configurable:!0});d.prototype.shouldRender=function(){return 0<this.renderers.size};d.prototype.addObject=function(a,b,c,e,d){return l(this,void 0,void 0,function(){var f,h,l,p,m,q,z;return k(this,function(k){switch(k.label){case 0:if(this.hasObject(a))return[2];f=[];l={loaded:g.create(function(a){return h=a}),renderables:[]};this.perObjectData.set(a,l);if(d&&d.mergeGeometries&&1<a.geometries.length&&this.canMergeGeometries(a))f.push(this.addObjectMergedGeometries(a,
l,b,c));else for(p=0;p<a.geometries.length;p++)m=a.geometries[p],q=a.geometryRecords[p],z=q.material,z.supportsEdges&&(m.data instanceof u?f.push(this.addGeometryPreinterleaved(a,l,m,m.data,q,b,c,e)):f.push(this.addGeometryNonPreinterleaved(a,l,m,m.data,q,b[0],c,e)));return[4,g.all(f)];case 1:return k.sent(),this.callbacks.setNeedsRender(),h(),[2]}})})};d.prototype.hasObject=function(a){return this.perObjectData.has(a)};d.prototype.updateAllComponentOpacities=function(a,b){return l(this,void 0,void 0,
function(){var c,e;return k(this,function(d){switch(d.label){case 0:return[4,this.getObjectEntry(a)];case 1:return c=d.sent(),e=b instanceof Array?function(a){return b[a]}:function(a){return b},c.renderables.forEach(function(a){for(var b=a.components.meta.length,c=0;c<b;c++){var d=e(c),f=a.components.meta[c],g=f.index;f.material.opacity=d;a.components.buffer.textureBuffer.setDataElement(g,1,3,255*d)}a.allTransparent=L.determineAllTransparent(a.components.meta)}),this.callbacks.setNeedsRender(),[2]}})})};
d.prototype.updateAllComponentMaterials=function(a,b,c,e){void 0===e&&(e=!0);return l(this,void 0,void 0,function(){var d,f,g,h,l=this;return k(this,function(k){switch(k.label){case 0:return[4,this.getObjectEntry(a)];case 1:return d=k.sent(),f=c.slicePlaneEnabled||!1,g=L.determineRendererType(b),h=E.EdgeRenderer.getKey(g,f),d.renderables.forEach(function(a){if(h!==a.rendererKey){var c=l.renderers.get(a.rendererKey),d=l.acquireRenderer(g,f);c.removeRenderable(a);c.refCount.decrement();a.rendererKey=
h;d.addRenderable(a)}for(c=0;c<b.length;c++)a.components.meta[c].material=b[c];e&&l.updateComponentBuffer(a.components);a.allTransparent=L.determineAllTransparent(a.components.meta)}),this.callbacks.setNeedsRender(),[2]}})})};d.prototype.updateObjectVisibility=function(a,b){return l(this,void 0,void 0,function(){var c;return k(this,function(e){switch(e.label){case 0:return[4,this.getObjectEntry(a)];case 1:return c=e.sent(),c.renderables.forEach(function(a){a.visible=b}),this.callbacks.setNeedsRender(),
[2]}})})};d.prototype.removeObject=function(a){var b=this,c=this.perObjectData.get(a);c&&(this.perObjectData.delete(a),c.loaded.then(function(){c.renderables.forEach(function(a){b.removeRenderable(a)});b.callbacks.setNeedsRender()}))};d.prototype.getObjectEntry=function(a){return l(this,void 0,void 0,function(){var b;return k(this,function(c){switch(c.label){case 0:b=this.perObjectData.get(a);if(!b)throw"no object";return[4,b.loaded];case 1:return c.sent(),[2,b]}})})};d.prototype.removeAll=function(){var a=
this;this.perObjectData.forEach(function(b,c){a.removeObject(c)})};d.prototype.createSolidEdgeMaterial=function(a){return n({},P,a,{type:"solid"})};d.prototype.createSketchEdgeMaterial=function(a){return n({},V,a,{type:"sketch"})};d.prototype.render=function(a){var b=this;this.localOrigins.updateViewMatrices(a.view);this.renderers.forEach(function(a){0===a.refCount.value&&(b.renderers.delete(a.key),a.dispose())});this.componentColorManager.garbageCollect();this.componentColorManager.updateTextures();
var c=a.view,e=0,d=0;this.renderers.forEach(function(a){a.forEachRenderable(function(a){e+=a.statistics.averageEdgeLength;d++})});var f={distanceFalloffFactor:e/d*40,minimumEdgeLength:L.estimateLengthAtDistance(a.viewport[3],a.fovY,1,3.5*a.pixelRatio)};this.rctx.setPipelineState(this.pipelineState);this.updateObjectCameraDistances(a);this.numberOfRenderedEdges=0;this.renderers.forEach(function(c){b.renderRegularEdges(c,a,f);b.renderSilhouetteEdges(c,a,f)});a.view=c};d.prototype.computeModelTransformWithLocalOrigin=
function(a,b,c){a.getCombinedStaticTransformation(b,c);b.origin?this.localOrigins.register(b.origin):(a=p.vec3.set(this.tmpModelPosition,c[12],c[13],c[14]),b.origin=this.localOrigins.acquire(a));w.applyToModelMatrix(b.origin.vec3,c);return c};d.prototype.updateComponentBuffer=function(a){var b=a.meta;a=a.buffer;for(var c=0;c<b.length;c++){var e=b[c].material,d=b[c].index,f=h.clamp(Math.round(e.size*E.LINE_WIDTH_FRACTION_FACTOR),0,255),g=h.clamp(e.extensionLength,-E.EXTENSION_LENGTH_OFFSET,255-E.EXTENSION_LENGTH_OFFSET)+
E.EXTENSION_LENGTH_OFFSET,k="solid"===e.type?0:1,l=255*e.opacity,e=e.color;a.textureBuffer.setData(d,0,255*e[0],255*e[1],255*e[2],255*e[3]);a.textureBuffer.setData(d,1,f,g,k,l)}};d.prototype.createComponentBuffers=function(a){for(var b=[],c=this.componentColorManager.getBuffer(a.length),e=0;e<a.length;e++){var d=a[e],f=c.acquireIndex();b.push({index:f,material:d})}a={meta:b,buffer:c};this.updateComponentBuffer(a);return a};d.prototype.extractEdges=function(a,b,c,e,d){return this.worker.process({data:b,
originalIndices:d,writerSettings:a,skipDeduplicate:c},e?null:this.workerThread)};d.prototype.createEdgeResources=function(a){var b={};if(0<a.regular.lodInfo.lengths.length){var c=new I(this.rctx,B.EdgeShaderAttributeLocations,{vertices:B.glVertexLayout,instances:C.RegularEdgeBufferWriter.glLayout},{vertices:this.verticesBufferObject,instances:K.createVertex(this.rctx,35044,a.regular.instancesData.buffer)});b.regular={vao:c,lod:a.regular.lodInfo}}0<a.silhouette.lodInfo.lengths.length&&(c=new I(this.rctx,
B.EdgeShaderAttributeLocations,{vertices:B.glVertexLayout,instances:C.SilhouetteEdgeBufferWriter.glLayout},{vertices:this.verticesBufferObject,instances:K.createVertex(this.rctx,35044,a.silhouette.instancesData.buffer)}),b.silhouette={vao:c,lod:a.silhouette.lodInfo});return b};d.prototype.disposeEdgeResources=function(a){a.regular&&(a.regular.vao.vertexBuffers.instances.dispose(),a.regular.vao.dispose(!1),a.regular.vao=null);a.silhouette&&(a.silhouette.vao.vertexBuffers.instances.dispose(),a.silhouette.vao.dispose(!1),
a.silhouette.vao=null)};d.prototype.addGeometryNonPreinterleaved=function(b,c,e,d,f,g,h,p){return l(this,void 0,void 0,function(){var e,l,m,u;return k(this,function(k){e=d.getAttribute("position");l=this.computeModelTransformWithLocalOrigin(b,f,a.mat4f64.create());m=f.origin;u={position:e,indices:d.getIndices("position"),modelTransform:l,origin:m};return[2,this.addNonPreinterleaved(b,c,u,g,h,p)]})})};d.prototype.addNonPreinterleaved=function(a,b,c,e,d,f){void 0===f&&(f=!1);return l(this,void 0,void 0,
function(){var a,g,h,l,p,m,u,q,z,t,w,x,y,v,n;return k(this,function(k){switch(k.label){case 0:a=this.acquireRenderer(e.type,d.slicePlaneEnabled||!1);g=c.modelTransform;h=c.origin;l=c.indices;p=c.position;m=p.data.length/p.strideIdx;u=B.EdgeInputBufferLayout.createBuffer(m);for(q=0;q<m;q++)u.position.set(q,0,p.data[p.offsetIdx+q*p.strideIdx+0]),u.position.set(q,1,p.data[p.offsetIdx+q*p.strideIdx+1]),u.position.set(q,2,p.data[p.offsetIdx+q*p.strideIdx+2]);z=this.createComponentBuffers([e]);L.fillComponenBufferIndices(z.meta,
[0,u.componentIndex.count],u.componentIndex);return[4,this.extractEdges(a.writerSettings,u,!1,f,l)];case 1:return t=k.sent(),w=this.createEdgeResources(t),x=w.regular,y=w.silhouette,v=(x?x.vao.size:0)+(y?y.vao.size:0),n={regular:x,silhouette:y,transform:{modelMatrix:g,origin:h},statistics:{gpuMemoryUsage:v,averageEdgeLength:t.averageEdgeLength},components:z,visible:!0,allTransparent:L.determineAllTransparent(z.meta),distanceToCamera:0,rendererKey:a.key},b.renderables.push(n),a.addRenderable(n),this.gpuMemoryUsage+=
v,[2]}})})};d.prototype.addGeometryPreinterleaved=function(b,e,d,f,g,h,p,m){return l(this,void 0,void 0,function(){var d,l,u,q,z,w,x,v,n,C,I,F,H,E,U,r;return k(this,function(k){switch(k.label){case 0:d=f.getAttribute("position");if(!d||!c.isFloat32Array(d.data))return console.warn("Geometry has no float32 `position` attribute, skipping it."),[2];l=L.determineRendererType(h);u=this.acquireRenderer(l,p.slicePlaneEnabled||!1);q=this.computeModelTransformWithLocalOrigin(b,g,a.mat4f64.create());z=g.origin;
w=f.getIndices("position");x=new t.BufferViewVec3f(d.data.buffer,4*d.offsetIdx,4*d.strideIdx);v=B.EdgeInputBufferLayout.createBuffer(x.count);y.vec3.copy(v.position,x);n=this.createComponentBuffers(h);L.fillComponenBufferIndices(n.meta,f.componentOffsets,v.componentIndex,w);C=f.hasPositionData;return[4,this.extractEdges(u.writerSettings,v,C,m,w)];case 1:return I=k.sent(),F=this.createEdgeResources(I),H=F.regular,E=F.silhouette,U=(H?H.vao.size:0)+(E?E.vao.size:0),r={regular:H,silhouette:E,transform:{modelMatrix:q,
origin:z},statistics:{gpuMemoryUsage:U,averageEdgeLength:I.averageEdgeLength},components:n,visible:!b.isHidden(g),allTransparent:L.determineAllTransparent(n.meta),distanceToCamera:0,rendererKey:u.key},e.renderables.push(r),u.addRenderable(r),this.gpuMemoryUsage+=U,[2]}})})};d.prototype.canMergeGeometries=function(a){for(var c=null,e=null,d=0;d<a.geometries.length;d++){var f=a.geometryRecords[d];if(f.material.supportsEdges){if(a.geometries[d].data instanceof u)return!1;if(!c)c=f.transformation;else if(!b.equals(c,
f.transformation))return!1;if(!e&&f.origin)e=f;else if(e&&f.origin&&e.origin.id!==f.origin.id)return!1}}return!0};d.prototype.addObjectMergedGeometries=function(b,e,d,f){return l(this,void 0,void 0,function(){var g,h,l,p,m,u,q,z,t,w,x,y,v,n,B,C,I,F,H,E,r;return k(this,function(k){switch(k.label){case 0:g=new Map;h=0;p=l=null;for(m=0;m<b.geometries.length;m++)if(u=b.geometries[m],q=b.geometryRecords[m],z=q.material,z.supportsEdges&&(!p&&q.origin&&(p=q),t=u.data.getIndices("position"),h+=t?t.length:
0,t&&null==l||l===Uint16Array))l=c.isUint16Array(t)?Uint16Array:Uint32Array;w=h?new l(h):null;x=[];for(m=y=0;m<b.geometries.length;m++)if(u=b.geometries[m],v=b.geometryRecords[m],z=v.material,z.supportsEdges){n=u.data.getAttribute("position");t=u.data.getIndices("position");B=g.get(n.data);if(null==B){B=x.length/3;for(C=n.offsetIdx;C<n.data.length;C+=n.strideIdx)x.push(n.data[C+0]),x.push(n.data[C+1]),x.push(n.data[C+2]);g.set(n.data,B)}if(t)for(I=0;I<t.length;I++)w[y++]=B+t[I]}F=p||b.geometryRecords[0];
H=this.computeModelTransformWithLocalOrigin(b,F,a.mat4f64.create());E=F.origin;for(m=0;m<b.geometryRecords.length;m++)b.geometryRecords[m].origin=E;r={position:{data:x,offsetIdx:0,strideIdx:3},indices:w,modelTransform:H,origin:E};return[4,this.addNonPreinterleaved(b,e,r,d[0],f)];case 1:return k.sent(),[2]}})})};d.prototype.acquireRenderer=function(a,b){var c=E.EdgeRenderer.getKey(a,b),e=this.renderers.get(c);this.strokesTexture||(this.strokesTexture=N.generateStrokesTexture(this.rctx));e||(e=new E.EdgeRenderer(this.rctx,
this.programRepository,{type:a,slicePlaneEnabled:b,strokesTexture:this.strokesTexture}),this.renderers.set(c,e));e.refCount.increment();return e};d.prototype.removeRenderable=function(a){var b=this.renderers.get(a.rendererKey);b.removeRenderable(a);b.refCount.decrement();this.disposeEdgeResources(a);this.localOrigins.release(a.transform.origin);this.gpuMemoryUsage-=a.statistics.gpuMemoryUsage;for(var b=0,c=a.components.meta;b<c.length;b++)a.components.buffer.releaseIndex(c[b].index)};d.prototype.updateObjectCameraDistances=
function(a){var b=this;a=a.viewInvTransp;p.vec3.set(this.tmpCameraPosition,a[3],a[7],a[11]);this.perObjectData.forEach(function(a,c){var e=p.vec3.distance(c.getCenter(),b.tmpCameraPosition);a.renderables.forEach(function(a){return a.distanceToCamera=e})})};d.prototype.renderRegularEdges=function(a,b,c){var e=this;a.bindRegularEdges(b,c);a.forEachRenderable(function(d){if(d.visible&&d.regular&&!d.allTransparent){var f=L.computeEdgeCount(d.regular.lod.lengths,d.distanceToCamera,c);b.view=e.localOrigins.getViewMatrix(d.transform.origin);
a.renderRegularEdges(d,b,f);e.numberOfRenderedEdges+=f}})};d.prototype.renderSilhouetteEdges=function(a,b,c){var e=this;a.bindSilhouetteEdges(b,c);a.forEachRenderable(function(d){if(d.visible&&d.silhouette&&!d.allTransparent){var f=L.computeEdgeCount(d.silhouette.lod.lengths,d.distanceToCamera,c);b.view=e.localOrigins.getViewMatrix(d.transform.origin);a.renderSilhouetteEdges(d,b,f);e.numberOfRenderedEdges+=f}})};return d}();d.EdgeView=S;var P={color:v.vec4f64.fromValues(0,0,0,.2),size:1,extensionLength:0,
opacity:1},V={color:v.vec4f64.fromValues(0,0,0,.2),size:1,extensionLength:0,opacity:1}})},"esri/views/3d/support/buffer/utils":function(){define("require exports ./types ./utils/mat3 ./utils/mat4 ./utils/scalar ./utils/vec2 ./utils/vec3 ./utils/vec4".split(" "),function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=l;d.mat4=k;d.scalar=b;d.vec2=h;d.vec3=g;d.vec4=e;d.createBuffer=function(b,e){return new b(new ArrayBuffer(e*b.ElementCount*n.elementTypeSize(b.ElementType)))}})},
"esri/views/3d/support/buffer/utils/mat3":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,l,k){var b=d.typedBuffer;d=d.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var e=(k&&k.dstIndex?k.dstIndex:0)*d;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var c=0;c<l;++c){for(var f=0;9>f;++f)b[e+f]=h[k+f];e+=d;k+=g}}})},"esri/views/3d/support/buffer/utils/mat4":function(){define(["require","exports"],function(r,
d){Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,l,k){var b=d.typedBuffer;d=d.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var e=(k&&k.dstIndex?k.dstIndex:0)*d;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var c=0;c<l;++c){for(var f=0;16>f;++f)b[e+f]=h[k+f];e+=d;k+=g}}})},"esri/views/3d/support/buffer/utils/scalar":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,l,k){var b=d.typedBuffer;
d=d.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var e=(k&&k.dstIndex?k.dstIndex:0)*d;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var c=0;c<l;++c)b[e]=h[k],e+=d,k+=g};d.makeDense=function(d,l){var k=d.count;l||(l=new d.TypedArrayConstructor(k));for(var b=0;b<k;b++)l[b]=d.get(b);return l}})},"esri/views/3d/support/buffer/utils/vec2":function(){define(["require","exports","../types"],function(r,d,n){function l(d,b,h){var g=d.typedBuffer;d=d.typedBufferStride;var e=b.typedBuffer,
c=b.typedBufferStride;b=h?h.count:b.count;var f=(h&&h.dstIndex?h.dstIndex:0)*d;h=(h&&h.srcIndex?h.srcIndex:0)*c;for(var a=0;a<b;++a)g[f]=e[h],g[f+1]=e[h+1],f+=d,h+=c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=l;d.normalizeIntegerBuffer=function(d,b,h){var g=d.typedBuffer,e=d.typedBufferStride,c=b.typedBuffer,f=b.typedBufferStride,a=h?h.count:b.count,k=(h&&h.dstIndex?h.dstIndex:0)*e,q=(h&&h.srcIndex?h.srcIndex:0)*f;if(n.isInteger(b.elementType))if(h=n.maximumValue(b.elementType),n.isSigned(b.elementType))for(b=
0;b<a;++b)g[k]=Math.max(c[q]/h,-1),g[k+1]=Math.max(c[q+1]/h,-1),k+=e,q+=f;else for(b=0;b<a;++b)g[k]=c[q]/h,g[k+1]=c[q+1]/h,k+=e,q+=f;else l(d,b,h);return d}})},"esri/views/3d/support/buffer/utils/vec3":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,l,k){var b=d.typedBuffer;d=d.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var e=(k&&k.dstIndex?k.dstIndex:0)*d;k=(k&&k.srcIndex?k.srcIndex:0)*g;
for(var c=0;c<l;++c)b[e]=h[k],b[e+1]=h[k+1],b[e+2]=h[k+2],e+=d,k+=g}})},"esri/views/3d/support/buffer/utils/vec4":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(d,l,k){var b=d.typedBuffer;d=d.typedBufferStride;var h=l.typedBuffer,g=l.typedBufferStride;l=k?k.count:l.count;var e=(k&&k.dstIndex?k.dstIndex:0)*d;k=(k&&k.srcIndex?k.srcIndex:0)*g;for(var c=0;c<l;++c)b[e]=h[k],b[e+1]=h[k+1],b[e+2]=h[k+2],b[e+3]=h[k+3],e+=d,k+=g};d.fill=
function(d,l,k,b,h,g){var e=d.typedBuffer,c=d.typedBufferStride;d=g?g.count:d.count;g=(g&&g.dstIndex?g.dstIndex:0)*c;for(var f=0;f<d;++f)e[g]=l,e[g+1]=k,e[g+2]=b,e[g+3]=h,g+=c}})},"esri/views/3d/webgl-engine/lib/localOriginHelper":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.applyToModelMatrix=function(d,l){var k=-d[0],b=-d[1];d=-d[2];var h=l[3],g=l[7],e=l[11],c=l[15];l[0]+=h*k;l[1]+=h*b;l[2]+=h*d;l[4]+=g*k;l[5]+=g*b;l[6]+=g*d;l[8]+=e*k;
l[9]+=e*b;l[10]+=e*d;l[12]+=c*k;l[13]+=c*b;l[14]+=c*d};d.applyToViewMatrix=function(d,l){var k=d[0],b=d[1];d=d[2];l[12]+=k*l[0]+b*l[4]+d*l[8];l[13]+=k*l[1]+b*l[5]+d*l[9];l[14]+=k*l[2]+b*l[6]+d*l[10];l[14]+=k*l[3]+b*l[7]+d*l[11]}})},"esri/views/3d/webgl-engine/lib/LocalOriginManager":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/mat4","../../../../core/libs/gl-matrix-2/mat4f64","./localOriginHelper"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=
function(){function b(b){this.factory=b;this.originData=new Map}b.prototype.acquire=function(b){return this.register(this.factory.getOrigin(b))};b.prototype.register=function(b){var d=this.originData.get(b.id);if(d)return d.refCount++,d.origin;this.originData.set(b.id,{refCount:1,viewMatrix:l.mat4f64.create(),origin:b});return b};b.prototype.release=function(b){var d=this.originData.get(b.id);d&&(d.refCount--,0===d.refCount&&this.originData.delete(b.id))};b.prototype.updateViewMatrices=function(b){this.originData.forEach(function(d){n.mat4.copy(d.viewMatrix,
b);k.applyToViewMatrix(d.origin.vec3,d.viewMatrix)})};b.prototype.getViewMatrix=function(b){return this.originData.get(b.id).viewMatrix};return b}();d.LocalOriginManager=r})},"esri/views/3d/webgl-engine/lib/PreinterleavedGeometryData":function(){define(["require","exports","./ComponentUtils","./geometryDataUtils","../../../webgl/Util"],function(r,d,n,l,k){function b(b){switch(b){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;
case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+b);}return function(){function d(g,e,c,f,a){void 0===c&&(c=null);void 0===f&&(f=d.DefaultOffsets);void 0===a&&(a=d.DefaultIndices);this.preinterleaved=!0;this.primitiveType="triangle";this._positionData=null;var h=k.getStride(e)/4,h=g.length/h;this._hasDefaultIndices=a===d.DefaultIndices;this.indexCount=a.length;this._hasDefaultIndices&&(a=l.generateDefaultIndexArray(h),this.indexCount=h);for(var h={},q=
0;q<e.length;q++){var v=e[q],t=new (b(v.type))(g.buffer),y=k.getBytesPerElement(v.type);h[v.name]={data:t,size:v.count,offsetIdx:v.offset/y,strideIdx:v.stride/y}}c&&(this._positionData=c,h.position={data:c.data,size:3,offsetIdx:0,strideIdx:3});this._id=l.getNewId();this._vertexData=g;this._vertexAttributes=h;this._layout=e;this._indexData=a;this._componentOffsets=n.createOffsets(f);this._gpuMemoryUsage=g.byteLength+(this._hasDefaultIndices?0:a.byteLength)}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"componentOffsets",{get:function(){return this._componentOffsets},enumerable:!0,configurable:!0});d.prototype.toRenderData=function(){var b={id:this._id.toString(),preinterleaved:!0,indexData:this._hasDefaultIndices?null:this._indexData,indexCount:this.indexCount,vertexData:this._vertexData,layout:this._layout};this._indexData=
this._vertexData=null;this._vertexAttributes={position:this._vertexAttributes.position};return b};d.prototype.getIndices=function(b){return"position"===b&&this._positionData?this._positionData.indices:this._indexData};d.prototype.getAttribute=function(b){return this._vertexAttributes[b]};d.prototype.estimateGpuMemoryUsage=function(){return this._gpuMemoryUsage};Object.defineProperty(d.prototype,"hasPositionData",{get:function(){return!!this._positionData},enumerable:!0,configurable:!0});d.DefaultOffsets=
new Uint32Array(0);d.DefaultIndices=new Uint32Array(0);return d}()})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/BufferManager":function(){define(["require","exports","./ManagedTextureBackedBuffer"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b){void 0===b&&(b=1);this.rctx=d;this.fieldCount=b;this.buffers=[]}d.prototype.garbageCollect=function(){this.buffers=this.buffers.filter(function(d){return 0===d.activeCount?(d.dispose(),!1):!0})};d.prototype.getBuffer=
function(d){for(var b=0,h=this.buffers;b<h.length;b++){var g=h[b];if(g.availableCount>=d)return g}if(d>n.MAX_INDEX_COUNT)return null;d=new n.ManagedTextureBackedBuffer(this.rctx,this.fieldCount);this.buffers.push(d);return d};d.prototype.updateTextures=function(){for(var d=0,b=this.buffers;d<b.length;d++)b[d].textureBuffer.updateTexture()};return d}();d.BufferManager=r})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/ManagedTextureBackedBuffer":function(){define(["require","exports","./SimpleIndexManager",
"./TextureBackedBuffer"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.MAX_INDEX_COUNT=65536;r=function(){function k(b,h){void 0===h&&(h=1);this.textureBuffer=new l.TextureBackedBuffer(b,h);this.indexManager=new n.SimpleIndexManager(d.MAX_INDEX_COUNT)}k.prototype.dispose=function(){this.textureBuffer.dispose();this.textureBuffer=void 0};Object.defineProperty(k.prototype,"availableCount",{get:function(){return this.indexManager.availableCount},enumerable:!0,configurable:!0});
Object.defineProperty(k.prototype,"activeCount",{get:function(){return this.indexManager.activeCount},enumerable:!0,configurable:!0});k.prototype.acquireIndex=function(){var b=this.indexManager.acquire();this.textureBuffer.resizeToFit(b);return b};k.prototype.releaseIndex=function(b){this.indexManager.release(b)};return k}();d.ManagedTextureBackedBuffer=r})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/SimpleIndexManager":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,
"__esModule",{value:!0});r=function(){function d(d){this.maxCount=d;this._nextIndex=0;this.recycledIndices=[]}Object.defineProperty(d.prototype,"activeCount",{get:function(){return this._nextIndex-this.recycledIndices.length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"availableCount",{get:function(){return this.recycledIndices.length+this.maxCount-this._nextIndex},enumerable:!0,configurable:!0});d.prototype.acquire=function(){if(0<this.recycledIndices.length)return this.recycledIndices.pop();
if(this.availableCount)return this._nextIndex++};d.prototype.release=function(d){this.recycledIndices.push(d)};return d}();d.SimpleIndexManager=r})},"esri/views/3d/webgl-engine/lib/TextureBackedBuffer/TextureBackedBuffer":function(){define(["require","exports","../../../support/buffer/BufferView","../../../../webgl/Texture"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,d){void 0===d&&(d=1);this.rctx=b;this.fieldCount=d;this.textureWidth=4096;this.dirty=
!0;this.texture=new l(this.rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:this.textureWidth,height:1,flipped:!1});this.data=new n.BufferViewVec4u8(new ArrayBuffer(4*this.textureWidth))}d.prototype.dispose=function(){this.texture.dispose();this.data=this.texture=void 0};d.prototype.setData=function(b,d,g,e,c,f){b=b*this.fieldCount+d;this.dirty=!0;this.data.set(b,0,g);this.data.set(b,1,e);this.data.set(b,2,c);this.data.set(b,3,f)};d.prototype.setDataElement=
function(b,d,g,e){b=b*this.fieldCount+d;this.dirty=!0;this.data.set(b,g,e)};d.prototype.resizeToFit=function(b){b*=this.fieldCount;b>=this.data.count&&(b=new n.BufferViewVec4u8(new ArrayBuffer(Math.ceil((b+1)/this.textureWidth)*this.textureWidth*4)),b.typedBuffer.set(this.data.typedBuffer),this.data=b)};d.prototype.updateTexture=function(){if(this.dirty){var b=this.texture.descriptor.width;this.data.count>b*this.texture.descriptor.height&&this.texture.resize(b,this.data.count/b);this.texture.setData(this.data.typedBuffer);
this.dirty=!1}};d.prototype.bind=function(b,d){this.rctx.bindTexture(this.texture,d.unit);b.setUniform1i(d.texName,d.unit);b.setUniform2f(d.invDimName,1/this.texture.descriptor.width,1/this.texture.descriptor.height)};return d}();d.TextureBackedBuffer=r})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["require","exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});
d.EdgeInputBufferLayout=l.newLayout().vec3f("position").u16("componentIndex").u16("_padding");d.VertexLayout=l.newLayout().vec2u8("sideness");d.glVertexLayout=n.glLayout(d.VertexLayout,{prefixA:!0});d.CommonInstancesLayout=l.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0});d.RegularEdgeInstancesLayout=d.CommonInstancesLayout.clone().vec3f("normal");
d.SilhouetteEdgeInstancesLayout=d.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB");d.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/RandomLCG ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});var c=function(){function b(){}b.prototype.updateSettings=function(a){this.settings=a};b.prototype.write=function(b,c,e){var d=f;d[0]=e.position0[0];d[1]=e.position0[1];d[2]=e.position0[2];d[3]=e.position1[0];d[4]=e.position1[1];d[5]=e.position1[2];p[0]=5381;for(d=0;d<a.length;d++)p[0]=31*p[0]+a[d];q.seed=p[0];var d=q.getIntRange(0,255),g=q.getIntRange(0,this.settings.variants-1),h=q.getFloat(),h=-(1-Math.min(h/.7,1))+Math.max(0,
h-.7)/(1-.7),h=255*(Math.pow(Math.abs(h),1.2)*(0>h?-1:1)*.5+.5);b.position0.setVec(c,e.position0);b.position1.setVec(c,e.position1);b.componentIndex.set(c,e.componentIndex);b.variantOffset.set(c,d);b.variantStroke.set(c,g);b.variantExtension.set(c,h)};b.prototype.trim=function(a,b){return a.slice(0,b)};return b}();d.CommonBufferWriter=c;var f=new Float32Array(6),a=new Uint32Array(f.buffer),p=new Uint32Array(1),q=new k;r=function(){function a(){this.commonWriter=new c}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};
a.prototype.allocate=function(a){return e.RegularEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,c,e){this.commonWriter.write(a,c,e);b.vec3.add(v,e.faceNormal0,e.faceNormal1);b.vec3.normalize(v,v);a.normal.setVec(c,v)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=e.RegularEdgeInstancesLayout;a.glLayout=g.glLayout(e.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();d.RegularEdgeBufferWriter=r;r=function(){function a(){this.commonWriter=
new c}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return e.SilhouetteEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=e.SilhouetteEdgeInstancesLayout;a.glLayout=g.glLayout(e.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();
d.SilhouetteEdgeBufferWriter=r;var v=h.vec3f64.create()})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":function(){define("require exports ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/typedArrayUtil ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/workerHelper ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(r,d,n,l,k,b,h,
g,e,c,f){return function(){function a(){this.regularWriter=new c.RegularEdgeBufferWriter;this.silhouetteWriter=new c.SilhouetteEdgeBufferWriter}a.prototype.process=function(a,b){return n(this,void 0,void 0,function(){var c,e,d;return l(this,function(f){switch(f.label){case 0:if(!b)return[3,2];c=[];e=this.packInput(a,c);this.wrappedWork;return[4,b.invoke("wrappedWork",e,{transferList:c})];case 1:return d=f.sent(),[2,this.unpackOutput(d)];case 2:return[2,this.work(a)]}})})};a.prototype.wrappedWork=
function(a){return n(this,void 0,void 0,function(){var b,c,e,d;return l(this,function(f){b=this.unpackInput(a);c=this.work(b);e=[];this.packInputTransferables(b,e);d=this.packOutput(c,e);return[2,{result:d,transferList:e}]})})};a.prototype.work=function(a){var b=this.extractEdgeInformation(a.data,a.skipDeduplicate,a.originalIndices);this.regularWriter.updateSettings(a.writerSettings);this.silhouetteWriter.updateSettings(a.writerSettings);return f.extractEdges(b,this.regularWriter,this.silhouetteWriter)};
a.prototype.packInputTransferables=function(a,b){b.push(a.data.buffer)};a.prototype.packInput=function(a,b){this.packInputTransferables(a,b);b={dataBuffer:a.data.buffer,writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate};a.originalIndices&&(b.originalIndicesBuffer=a.originalIndices.buffer,b.originalIndicesType=k.isUint32Array(a.originalIndices)?"Uint32Array":"Uint16Array");return b};a.prototype.unpackInput=function(a){return{data:e.EdgeInputBufferLayout.createView(a.dataBuffer),originalIndices:"Uint32Array"===
a.originalIndicesType?new Uint32Array(a.originalIndicesBuffer):"Uint16Array"===a.originalIndicesType?new Uint16Array(a.originalIndicesBuffer):void 0,writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate}};a.prototype.packOutput=function(a,b){b.push(a.regular.lodInfo.lengths.buffer);b.push(a.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:g.packInterleavedBuffer(a.regular.instancesData,b),lodInfo:{lengths:a.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:g.packInterleavedBuffer(a.silhouette.instancesData,
b),lodInfo:{lengths:a.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:a.averageEdgeLength}};a.prototype.unpackOutput=function(a){return{regular:{instancesData:g.unpackInterleavedBuffer(a.regular.instancesData),lodInfo:{lengths:new Float32Array(a.regular.lodInfo.lengths)}},silhouette:{instancesData:g.unpackInterleavedBuffer(a.silhouette.instancesData),lodInfo:{lengths:new Float32Array(a.silhouette.lodInfo.lengths)}},averageEdgeLength:a.averageEdgeLength}};a.prototype.extractEdgeInformation=function(a,
c,d){if(c&&d)return c=h.computeNeighbors(d,a.count),{faces:d,neighbors:c,vertices:a};a=b.default(a.buffer,a.stride/4,d);c=h.computeNeighbors(a.indices,a.uniqueCount);return{faces:a.indices,neighbors:c,vertices:e.EdgeInputBufferLayout.createView(a.buffer)}};return a}()})},"esri/views/3d/support/meshProcessing":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.computeNeighbors=function(d,l){for(var k=d.length/3,b=new Uint32Array(l+1),h=new Uint32Array(l+
1),g=function(a,c){a<c?b[a+1]++:h[c+1]++},e=0;e<k;e++){var c=d[3*e],f=d[3*e+1],a=d[3*e+2];g(c,f);g(f,a);g(a,c)}for(e=f=c=0;e<l;e++)a=b[e+1],g=h[e+1],b[e+1]=c,h[e+1]=f,c+=a,f+=g;for(var p=new Uint32Array(6*k),q=b[l],g=function(a,c,e){if(a<c){var d=b[a+1]++;p[2*d]=c;p[2*d+1]=e}else d=h[c+1]++,p[2*q+2*d]=a,p[2*q+2*d+1]=e},e=0;e<k;e++)c=d[3*e],f=d[3*e+1],a=d[3*e+2],g(c,f,e),g(f,a,e),g(a,c,e);c=function(a,b){var c=2*a;a=b-a;for(b=1;b<a;b++){var e=p[c+2*b],d=p[c+2*b+1],f=b-1;for(f;0<=f&&p[c+2*f]>e;f--)p[c+
2*f+2]=p[c+2*f],p[c+2*f+3]=p[c+2*f+1];p[c+2*f+2]=e;p[c+2*f+3]=d}};for(e=0;e<l;e++)c(b[e],b[e+1]),c(q+h[e],q+h[e+1]);for(var v=new Int32Array(3*k),t=function(a,b){return a===d[3*b]?0:a===d[3*b+1]?1:a===d[3*b+2]?2:-1},k=function(a,b){a=t(a,b);v[3*b+a]=-1},c=function(a,b,c,e){a=t(a,b);v[3*b+a]=e;c=t(c,e);v[3*e+c]=b},e=0;e<l;e++){for(var f=b[e],a=b[e+1],g=h[e],y=h[e+1];f<a&&g<y;){var x=p[2*f],w=p[2*q+2*g];x===w?(c(e,p[2*f+1],w,p[2*q+2*g+1]),f++,g++):x<w?(k(e,p[2*f+1]),f++):(k(w,p[2*q+2*g+1]),g++)}for(;f<
a;)k(e,p[2*f+1]),f++;for(;g<y;)w=p[2*q+2*g],k(w,p[2*q+2*g+1]),g++}return v}})},"esri/views/3d/support/buffer/workerHelper":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","./BufferView","./InterleavedLayout"],function(r,d,n,l,k){function b(b){var c=[];b.fields.forEach(function(b,a){var e=b.constructor;b=n({},b,{constructor:e.ElementType+"_"+e.ElementCount});c.push([a,b])});return{stride:b.stride,fields:c,fieldNames:b.fieldNames}}function h(b){var c=k.newLayout();c.stride=
b.stride;c.fieldNames=b.fieldNames;b.fields.forEach(function(b){return c.fields.set(b[0],n({},b[1],{constructor:g.get(b[1].constructor)}))});return c}Object.defineProperty(d,"__esModule",{value:!0});d.packInterleavedBuffer=function(e,c){c.push(e.buffer);return{buffer:e.buffer,layout:b(e.layout)}};d.unpackInterleavedBuffer=function(b){return h(b.layout).createView(b.buffer)};d.packLayout=b;d.unpackLayout=h;r=[l.BufferViewFloat,l.BufferViewVec2f,l.BufferViewVec3f,l.BufferViewVec4f,l.BufferViewMat3f,
l.BufferViewMat4f,l.BufferViewFloat64,l.BufferViewVec2f64,l.BufferViewVec3f64,l.BufferViewVec4f64,l.BufferViewMat3f64,l.BufferViewMat4f64,l.BufferViewUint8,l.BufferViewVec2u8,l.BufferViewVec3u8,l.BufferViewVec4u8,l.BufferViewUint16,l.BufferViewVec2u16,l.BufferViewVec3u16,l.BufferViewVec4u16,l.BufferViewUint32,l.BufferViewVec2u32,l.BufferViewVec3u32,l.BufferViewVec4u32,l.BufferViewInt8,l.BufferViewVec2i8,l.BufferViewVec3i8,l.BufferViewVec4i8,l.BufferViewInt16,l.BufferViewVec2i16,l.BufferViewVec3i16,
l.BufferViewVec4i16,l.BufferViewInt32,l.BufferViewVec2i32,l.BufferViewVec3i32,l.BufferViewVec4i32];var g=new Map;r.forEach(function(b){return g.set(b.ElementType+"_"+b.ElementCount,b)})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("require exports ../../../../../core/arrayUtils ../../../../../core/typedArrayUtil ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils".split(" "),function(r,d,n,l,k,b,
h){function g(a,b){var c=h.acos(a.cosAngle),e=f.fwd,d=f.ortho;h.directionFromTo(e,a.position1,a.position0);a=0<k.vec3.dot(k.vec3.cross(d,a.faceNormal0,a.faceNormal1),e)?-1:1;return c*a>b}function e(a){var b=a.faces.length/3,c=a.faces;a=a.neighbors;for(var e=0,d=0;d<b;d++)var f=a[3*d+0],g=a[3*d+1],h=a[3*d+2],k=c[3*d+0],l=c[3*d+1],p=c[3*d+2],e=e+(-1===f||k<l?1:0),e=e+(-1===g||l<p?1:0),e=e+(-1===h||p<k?1:0);for(var e=new Int32Array(4*e),q=0,d=0;d<b;d++){f=a[3*d+0];g=a[3*d+1];h=a[3*d+2];k=c[3*d+0];l=
c[3*d+1];p=c[3*d+2];if(-1===f||k<l)e[q++]=k,e[q++]=l,e[q++]=d,e[q++]=f;if(-1===g||l<p)e[q++]=l,e[q++]=p,e[q++]=d,e[q++]=g;if(-1===h||p<k)e[q++]=p,e[q++]=k,e[q++]=d,e[q++]=h}return e}function c(b){var c=b.faces.length/3,e=b.vertices.position;b=b.faces;for(var d=a.v0,f=a.v1,g=a.v2,h=new Float32Array(3*c),l=0;l<c;l++){var p=b[3*l+1],q=b[3*l+2];e.getVec(b[3*l+0],d);e.getVec(p,f);e.getVec(q,g);k.vec3.subtract(f,f,d);k.vec3.subtract(g,g,d);k.vec3.cross(d,f,g);k.vec3.normalize(d,d);h[3*l+0]=d[0];h[3*l+1]=
d[1];h[3*l+2]=d[2]}return h}Object.defineProperty(d,"__esModule",{value:!0});d.extractEdges=function(a,b,d,y){void 0===y&&(y=p);var q=a.vertices.position,t=a.vertices.componentIndex,m=h.deg2rad(y.anglePlanar);y=h.deg2rad(y.angleSignificantEdge);var u=Math.cos(y),z=Math.cos(m),v=f.edge,C=v.position0,F=v.position1,E=v.faceNormal0,r=v.faceNormal1,L=c(a),K=e(a),O=K.length/4;a=b.allocate(O);y=0;var I=d.allocate(O),H=0,S=0,P=0,V=n.range(0,O),T=new Float32Array(O);l.forEach(T,function(a,b,c){q.getVec(K[4*
b+0],C);q.getVec(K[4*b+1],F);c[b]=k.vec3.distance(C,F)});V.sort(function(a,b){return T[b]-T[a]});for(var Z=[],Q=[],J=0;J<O;J++){var R=V[J],U=T[R],X=K[4*R+0],ca=K[4*R+1],G=K[4*R+2],R=K[4*R+3],Y=-1===R;q.getVec(X,C);q.getVec(ca,F);if(Y)k.vec3.set(E,L[3*G+0],L[3*G+1],L[3*G+2]),k.vec3.copy(r,E),v.componentIndex=t.get(X),v.cosAngle=k.vec3.dot(E,r);else{k.vec3.set(E,L[3*G+0],L[3*G+1],L[3*G+2]);k.vec3.set(r,L[3*R+0],L[3*R+1],L[3*R+2]);v.componentIndex=t.get(X);v.cosAngle=k.vec3.dot(E,r);if(v.cosAngle>z)continue;
-.9999>v.cosAngle&&k.vec3.copy(r,E)}S+=U;P++;Y||v.cosAngle<u?(b.write(a,y++,v),Z.push(U)):g(v,m)&&(d.write(I,H++,v),Q.push(U))}t=new Float32Array(Z.reverse());m=new Float32Array(Q.reverse());return{regular:{instancesData:b.trim(a,y),lodInfo:{lengths:t}},silhouette:{instancesData:d.trim(I,H),lodInfo:{lengths:m}},averageEdgeLength:S/P}};var f={edge:{position0:b.vec3f64.create(),position1:b.vec3f64.create(),faceNormal0:b.vec3f64.create(),faceNormal1:b.vec3f64.create(),componentIndex:0,cosAngle:0},ortho:b.vec3f64.create(),
fwd:b.vec3f64.create()},a={v0:b.vec3f64.create(),v1:b.vec3f64.create(),v2:b.vec3f64.create()},p={anglePlanar:4,angleSignificantEdge:35}})},"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeRenderer":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat3 ../../../../../core/libs/gl-matrix-2/mat3f64 ../../../support/mathUtils ../../materials/internal/MaterialUtil ../../shaders/EdgeRendererPrograms".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});d.LINE_WIDTH_FRACTION_FACTOR=8;d.EXTENSION_LENGTH_OFFSET=128;var c={type:"uber",slicePlaneEnabled:!1,strokesTexture:null},f=function(){function a(){this._value=0}Object.defineProperty(a.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0});a.prototype.increment=function(){this._value++};a.prototype.decrement=function(){this._value--};return a}();r=function(){function a(e,d,g){this.rctx=e;this.programRepository=
d;this.refCount=new f;this.renderables=new Set;this.depthBiasZ=-4E-4;this.depthBiasXY=.5;this.tmpViewToWorldNormalMatrix=b.mat3f64.create();this.settings=n({},c,g);this.key=a.getKey(this.settings.type,this.settings.slicePlaneEnabled);this.writerSettings={variants:this.settings.strokesTexture.variants};this.createPrograms()}a.prototype.dispose=function(){for(var a in this.programs){var b=this.programs[a];b&&(this.programRepository.decreaseRefCount(b),this.programs[a]=null)}};a.prototype.addRenderable=
function(a){this.renderables.add(a)};a.prototype.removeRenderable=function(a){this.renderables.delete(a)};a.prototype.forEachRenderable=function(a){this.renderables.forEach(a)};a.prototype.bindRegularEdges=function(a,b){this.bind(this.programs.regular,a,b)};a.prototype.bindSilhouetteEdges=function(a,b){this.bind(this.programs.silhouette,a,b)};a.prototype.bind=function(a,b,c){this.rctx.bindProgram(a);a.setUniformMatrix4fv("uProj",b.proj);a.setUniform2f("uDepthBias",this.depthBiasXY,this.depthBiasZ);
a.setUniform2f("uPixelToNDC",2/b.viewport[2],2/b.viewport[3]);a.setUniform2f("uNDCToPixel",b.viewport[2]/2,b.viewport[3]/2);a.setUniform1f("uDistanceFalloffFactor",c.distanceFalloffFactor);a.setUniform2f("uViewportDimInv",1/b.viewport[2],1/b.viewport[3]);a.setUniform1f("uPixelRatio",b.pixelRatio||1)};a.prototype.renderRegularEdges=function(a,b,c){this.render(this.programs.regular,a,a.regular.vao,b,c)};a.prototype.renderSilhouetteEdges=function(a,b,c){this.render(this.programs.silhouette,a,a.silhouette.vao,
b,c)};a.prototype.render=function(a,b,c,e,d){this.setUniforms(a,b,e);a=this.rctx;a.bindVAO(c);a.capabilities.instancing.drawArraysInstanced(6,0,4,d)};a.prototype.setUniforms=function(a,b,c){b.components.buffer.textureBuffer.bind(a,d.componentDataBindParameters);a.setUniformMatrix4fv("uView",c.view);a.setUniformMatrix4fv("uModel",b.transform.modelMatrix);var e=c.viewInvTransp,f=k.mat3.fromMat4(this.tmpViewToWorldNormalMatrix,e);a.setUniform3f("uCameraPosition",e[3],e[7],e[11]);a.setUniformMatrix3fv("uViewToWorldNormalMatrix",
f);"uber"!==this.settings.type&&"sketch"!==this.settings.type||this.setSketchUniforms(a);a.setUniform1f("uWorldLineRadiusPerDistance",Math.tan(c.fovY/2)/(c.viewport[3]/2));a.setUniform3fv("uLocalOrigin",b.transform.origin.vec3);this.settings.slicePlaneEnabled&&g.bindSlicePlane(b.transform.origin.vec3,c.slicePlane,a)};a.prototype.setSketchUniforms=function(a){var b=this.settings.strokesTexture,c=b.texture;this.rctx.bindTexture(c,0);a.setUniform1i("uStrokesTexture",0);a.setUniform2f("uStrokesTextureScale",
1/c.descriptor.width,1/c.descriptor.height);a.setUniform1f("uStrokesLog2Resolution",h.log2(b.resolution));a.setUniform1f("uStrokesNormalizationScale",b.normalizationScale);a.setUniform1f("uStrokesAmplitude",b.amplitude);a.setUniform1f("uStrokeVariants",b.variants)};a.prototype.getOptions=function(a){return n({},a,{antialiasing:!!this.rctx.capabilities.blendMinMax,mode:this.settings.type,slice:this.settings.slicePlaneEnabled})};a.prototype.createPrograms=function(){var a=this.programRepository.getProgram(e.program,
this.getOptions({silhouette:!1})),b=this.programRepository.getProgram(e.program,this.getOptions({silhouette:!0}));this.programRepository.increaseRefCount(a);this.programRepository.increaseRefCount(b);this.programs={regular:a,silhouette:b}};a.getKey=function(a,b){return"edges-t:"+a+":"+b};return a}();d.EdgeRenderer=r;d.componentDataBindParameters={texName:"uComponentDataTex",invDimName:"uComponentDataTexInvDim",unit:2}})},"esri/views/3d/webgl-engine/shaders/EdgeRendererPrograms":function(){define(["require",
"exports","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});var k=function(b){return l.glslifyDefineMap({MODE:{value:b.mode,options:{solid:"MODE_SOLID",sketch:"MODE_SKETCH",uber:"MODE_UBER"}},SILHOUETTE:b.silhouette,ANTIALIASING:b.antialiasing,SLICE:b.slice})};d.program={name:"edges",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("edgeRenderer/edgeRenderer.vert"),fragmentShader:k(b)+n.resolveIncludes("edgeRenderer/edgeRenderer.frag")}},
attributes:{aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}}})},"esri/views/3d/webgl-engine/lib/edgeRendering/strokes":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../support/mathUtils ../Util ../../../../webgl/Texture".split(" "),function(r,d,n,l,k,b){function h(b,d){if(!b)return null;var a=b.length/2,c=g*a,a=Array(a),f=0;d=1===d;for(var h=0;h<
b.length;h+=2){var k=(b[h]+b[h+1])/2;d?a[f++]=Math.min(c,1-(1-k)*e):a[f++]=Math.min(c,k*e)}return a}Object.defineProperty(d,"__esModule",{value:!0});d.generateStrokesTexture=function(c){for(var e=d.strokesDefinition.resolution,a=e/2,g=new Uint8Array(4*e*e),q=4*e*a,a=d.strokesDefinition.amplitude,v=2*a,t=4*e,y=l.log2(e)+1,x=d.strokesDefinition.strokes.length,w=(y-1)*x*t,m=0,u=d.strokesDefinition.strokes;m<u.length;m++){for(var z=u[m],B=z.distance,z=z.pressure,n=w,F=0;F<y;F++){0!==F&&(B=h(B,0),z=h(z,
1));for(var E=0;E<d.strokesDefinition.resolution;E++){var r=z?z[E%z.length]:1;k.packFloatRGBA((B?B[E%B.length]/v:0)+.5,g,n);k.packFloatRGBA(r,g,n+q);n+=4}n-=t*(x+1)}w+=t}c=new b(c,{pixelFormat:6408,dataType:5121,hasMipmap:!1,samplingMode:9729,width:e,height:e,wrapMode:10497},g);return{resolution:e,texture:c,normalizationScale:v,amplitude:a,variants:x}};var g=.1,e=.5;d.strokesDefinition={amplitude:8,resolution:256,strokes:[{distance:[-1.59027,-1.59426,-1.59674,-1.59766,-1.59702,-1.59479,-1.59095,-1.5855,
-1.57843,-1.56973,-1.55942,-1.5475,-1.53398,-1.5189,-1.50226,-1.4841,-1.46446,-1.44337,-1.42088,-1.39703,-1.37188,-1.34547,-1.31786,-1.28912,-1.2593,-1.22847,-1.19668,-1.16402,-1.13053,-1.09629,-1.06137,-1.02582,-.98972,-.95313,-.91611,-.87872,-.84102,-.80306,-.76488,-.72654,-.68807,-.64952,-.61092,-.57232,-.53375,-.49527,-.45692,-.41874,-.38078,-.34309,-.3057,-.26867,-.23204,-.19585,-.16015,-.12497,-.09036,-.05634,-.02296,.00977,.04183,.07321,.10389,.13386,.16313,.19169,.21956,.24672,.27321,.299,
.32413,.34858,.37237,.3955,.41798,.43981,.461,.48154,.50145,.52073,.53939,.55744,.57488,.5917,.6079,.62347,.63837,.65259,.66609,.67885,.69083,.70201,.71235,.72183,.73042,.73812,.7449,.75076,.7557,.75973,.76284,.76507,.76642,.76692,.76659,.76545,.76352,.76083,.7574,.75324,.74837,.74279,.73652,.72959,.72199,.71377,.70493,.69553,.68558,.67515,.66426,.65298,.64135,.62944,.6173,.60499,.59257,.58008,.56759,.55513,.54275,.5305,.51842,.50654,.4949,.48353,.47246,.4617,.45128,.44121,.43149,.42213,.41313,.40448,
.39617,.38818,.3805,.37309,.36594,.35902,.35229,.34572,.33927,.33292,.32663,.32035,.31407,.30774,.30135,.29486,.28824,.28148,.27454,.26739,.26002,.25241,.24454,.23639,.22796,.21922,.21016,.20076,.19098,.18082,.17023,.1592,.14768,.13566,.1231,.10996,.09624,.08188,.06688,.05121,.03485,.01778,0,-.0185,-.03771,-.05763,-.07824,-.09952,-.12144,-.14396,-.16706,-.19069,-.21481,-.23938,-.26436,-.28971,-.31539,-.34136,-.36759,-.39404,-.42067,-.44746,-.47437,-.50136,-.52839,-.55544,-.58248,-.60948,-.63642,-.66329,
-.6901,-.71684,-.74352,-.77015,-.79675,-.82332,-.84988,-.87644,-.90301,-.92958,-.95615,-.98272,-1.00926,-1.03575,-1.06217,-1.08847,-1.11463,-1.1406,-1.16633,-1.19178,-1.2169,-1.24164,-1.26595,-1.28979,-1.31312,-1.3359,-1.35809,-1.37963,-1.4005,-1.42064,-1.44,-1.45853,-1.47616,-1.49285,-1.50853,-1.52313,-1.53659,-1.54886,-1.55986,-1.56955,-1.57788,-1.5848],pressure:[-.01365,-.00206,.01025,.02327,.03696,.05129,.06619,.08163,.09755,.11393,.1307,.14784,.16531,.18308,.20111,.21938,.23786,.25651,.2753,
.29419,.31315,.33215,.35115,.37015,.38913,.40806,.42694,.44576,.46449,.48313,.50167,.5201,.53839,.55653,.57448,.59222,.60971,.62692,.6438,.66033,.67648,.69221,.70753,.72242,.73688,.75093,.76456,.77779,.79063,.80309,.81517,.82686,.83817,.84911,.85967,.86987,.87972,.88924,.89845,.90734,.91594,.92425,.93229,.94005,.94754,.95475,.96166,.96826,.97451,.9804,.98588,.99092,.99549,.99957,.99685,.99381,.99131,.98936,.98796,.98711,.98681,.98706,.98787,.98923,.99113,.99357,.99654,1,.99607,.99171,.98695,.98181,
.97634,.97057,.96452,.95824,.95175,.94506,.93818,.93113,.92389,.91647,.90887,.90109,.89314,.88501,.87672,.86831,.85978,.85119,.84256,.83393,.82533,.8168,.80836,.80002,.79181,.78374,.77582,.7681,.76059,.75331,.74629,.73955,.73311,.72697,.72116,.71568,.71054,.70572,.70121,.697,.69304,.68931,.68576,.68236,.67905,.67582,.67262,.66941,.66619,.66291,.65957,.65613,.65259,.64892,.6451,.6411,.6369,.63248,.62783,.62295,.61783,.61247,.60688,.60104,.59498,.58868,.58216,.57542,.56845,.56125,.5538,.5461,.53813,
.52986,.52129,.51239,.50316,.49359,.4837,.47349,.46299,.45223,.44124,.43005,.41869,.40719,.39557,.38386,.37207,.36023,.34836,.33648,.32464,.31287,.30119,.28963,.27822,.26698,.25594,.2451,.23448,.22409,.21391,.20394,.19415,.18452,.17503,.16565,.15636,.14713,.13794,.1288,.11968,.11058,.10151,.09247,.08346,.07447,.06552,.05659,.0477,.03885,.03007,.02137,.01278,.00433,-.00393,-.012,-.01983,-.02738,-.03463,-.04155,-.0481,-.05429,-.0601,-.06553,-.07057,-.07524,-.07954,-.08347,-.08703,-.09022,-.09303,-.09544,
-.09744,-.09898,-.10004,-.10059,-.1006,-.10005,-.09892,-.0972,-.09487,-.09192,-.08833,-.08409,-.07918,-.07357,-.06724,-.06019,-.0524,-.04386,-.03455,-.02448]},{distance:[-3.46259,-3.47131,-3.47668,-3.47863,-3.47712,-3.4721,-3.46352,-3.45138,-3.43566,-3.41635,-3.39347,-3.36704,-3.33709,-3.30368,-3.26684,-3.22667,-3.18322,-3.1366,-3.08689,-3.0342,-2.97865,-2.92036,-2.85946,-2.79607,-2.73034,-2.66241,-2.59242,-2.52052,-2.44686,-2.37159,-2.29485,-2.2168,-2.13757,-2.05731,-1.97616,-1.89426,-1.81174,-1.72875,
-1.64543,-1.56191,-1.47833,-1.39483,-1.3115,-1.22847,-1.14581,-1.06361,-.98193,-.90083,-.82036,-.74054,-.66141,-.583,-.50532,-.4284,-.35228,-.277,-.20261,-.12916,-.05672,.01463,.08485,.15384,.22153,.28784,.35269,.41602,.47776,.53787,.59629,.653,.70799,.76123,.81274,.86253,.9106,.95698,1.0017,1.04477,1.0862,1.126,1.16415,1.20065,1.23546,1.26857,1.29994,1.32953,1.35731,1.38321,1.40719,1.42921,1.44922,1.46719,1.48309,1.49691,1.50862,1.51825,1.52581,1.53133,1.53486,1.53644,1.53616,1.53409,1.53031,1.52493,
1.51803,1.50972,1.50009,1.48924,1.47725,1.46421,1.45019,1.43527,1.4195,1.40295,1.38568,1.36778,1.34929,1.3303,1.31087,1.29108,1.27099,1.25066,1.23018,1.2096,1.18898,1.16838,1.14785,1.12745,1.10721,1.08719,1.06741,1.04791,1.02871,1.00986,.99136,.97324,.95551,.93819,.92127,.90476,.88866,.87296,.85767,.84277,.82823,.81406,.80022,.7867,.77346,.76049,.74774,.73519,.72278,.71049,.69827,.68606,.67381,.66145,.64893,.63618,.62313,.60973,.5959,.5816,.56675,.5513,.53516,.51826,.50053,.4819,.46231,.44169,.42002,
.39725,.37336,.34834,.32219,.2949,.2665,.23698,.20638,.17469,.14193,.10809,.07316,.03714,0,-.03827,-.07772,-.11836,-.16022,-.20332,-.24768,-.29332,-.34024,-.38844,-.43788,-.48854,-.54036,-.59329,-.64724,-.70211,-.75782,-.81425,-.87128,-.92881,-.98674,-1.04498,-1.10346,-1.1621,-1.22086,-1.27969,-1.33854,-1.3974,-1.45625,-1.51511,-1.57396,-1.63283,-1.69173,-1.75067,-1.80968,-1.86875,-1.9279,-1.98712,-2.04639,-2.10568,-2.16495,-2.22416,-2.28322,-2.34208,-2.40063,-2.4588,-2.51647,-2.57354,-2.62989,-2.68543,
-2.74002,-2.79357,-2.84597,-2.89711,-2.94689,-2.99521,-3.04195,-3.087,-3.13023,-3.17152,-3.21075,-3.24779,-3.28252,-3.3148,-3.34451,-3.37154,-3.39577,-3.41709,-3.43539,-3.45059],pressure:[.87183,.87151,.87129,.87118,.87117,.87128,.87149,.87182,.87225,.8728,.87347,.87424,.87513,.87613,.87723,.87845,.87978,.88122,.88276,.88441,.88616,.88801,.88996,.892,.89414,.89637,.89868,.90108,.90356,.90611,.90874,.91144,.91421,.91704,.91993,.92287,.92587,.92892,.93201,.93514,.93831,.94151,.94474,.94799,.95126,.95456,
.95786,.96118,.9645,.96783,.97116,.97448,.9778,.98111,.98441,.9877,.99096,.99421,.99742,.99938,.99622,.9931,.99001,.98697,.98397,.98101,.97811,.97526,.97246,.96972,.96703,.96441,.96185,.95935,.95691,.95455,.95225,.95002,.94786,.94577,.94376,.94182,.93995,.93817,.93646,.93483,.93328,.93181,.93042,.92911,.92788,.92673,.92566,.92467,.92376,.92293,.92217,.92149,.92088,.92034,.91987,.91947,.91913,.91886,.91864,.91849,.91838,.91833,.91834,.91839,.91849,.91863,.91883,.91907,.91935,.91968,.92005,.92046,.92092,
.92142,.92195,.92253,.92314,.9238,.92449,.92521,.92598,.92677,.9276,.92847,.92936,.93029,.93125,.93224,.93325,.9343,.93537,.93646,.93758,.93872,.93988,.94106,.94225,.94346,.94469,.94593,.94718,.94844,.94971,.95098,.95226,.95354,.95482,.9561,.95738,.95867,.95995,.96122,.9625,.96377,.96504,.9663,.96757,.96883,.97009,.97135,.97261,.97387,.97513,.9764,.97767,.97895,.98023,.98153,.98284,.98416,.98549,.98684,.98821,.9896,.99101,.99244,.99389,.99537,.99688,.99842,1,.99839,.99675,.99508,.99336,.99161,.98982,
.98799,.98613,.98422,.98228,.98029,.97827,.97622,.97414,.97202,.96987,.9677,.96551,.9633,.96107,.95882,.95656,.9543,.95202,.94975,.94747,.94519,.94292,.94065,.93838,.93613,.93388,.93164,.92941,.9272,.92499,.9228,.92062,.91846,.91631,.91418,.91207,.90998,.90792,.90588,.90387,.90189,.89995,.89804,.89617,.89434,.89256,.89083,.88914,.88752,.88595,.88443,.88299,.88161,.8803,.87907,.87791,.87683,.87584,.87494,.87412,.8734,.87278,.87225]},{distance:[.39335,.43437,.47737,.52234,.56923,.61801,.66864,.72109,
.7753,.83123,.88882,.94801,1.00875,1.07097,1.13461,1.1996,1.26586,1.33333,1.40193,1.47158,1.54221,1.61373,1.68607,1.75913,1.83284,1.90711,1.98186,2.05699,2.13243,2.20809,2.28387,2.35971,2.4355,2.51117,2.58663,2.66179,2.73658,2.81092,2.88473,2.95792,3.03043,3.10217,3.17308,3.24309,3.31211,3.3801,3.44697,3.51267,3.57712,3.64028,3.70208,3.76247,3.8214,3.87881,3.93467,3.98892,4.04152,4.09244,4.14164,4.18908,4.23474,4.27859,4.32061,4.36077,4.39905,4.43544,4.46992,4.50249,4.53314,4.56185,4.58864,4.61349,
4.63642,4.65745,4.67657,4.69381,4.7092,4.72274,4.73447,4.74441,4.75259,4.75903,4.76376,4.76682,4.76822,4.768,4.76618,4.76279,4.75786,4.75142,4.74348,4.73409,4.72326,4.71102,4.69739,4.68241,4.6661,4.64849,4.6296,4.60948,4.58816,4.56567,4.54204,4.51732,4.49154,4.46473,4.43694,4.4082,4.37854,4.348,4.31662,4.28443,4.25145,4.21773,4.1833,4.14819,4.11243,4.07606,4.03912,4.00162,3.96361,3.92512,3.88618,3.84683,3.80708,3.76697,3.72653,3.68579,3.64478,3.60351,3.56202,3.52033,3.47845,3.43642,3.39425,3.35196,
3.30957,3.2671,3.22455,3.18196,3.13933,3.09668,3.05402,3.01136,2.96873,2.92613,2.88357,2.84108,2.79865,2.75631,2.71407,2.67195,2.62994,2.58807,2.54634,2.50477,2.46338,2.42216,2.38114,2.34032,2.29971,2.25933,2.21916,2.17923,2.13954,2.10008,2.06087,2.02189,1.98316,1.94468,1.90644,1.86845,1.83069,1.79316,1.75586,1.71877,1.68189,1.6452,1.60868,1.57232,1.53611,1.50004,1.46407,1.4282,1.39241,1.35668,1.321,1.28535,1.24972,1.2141,1.17849,1.14286,1.10723,1.07158,1.03593,1.00028,.96464,.92902,.89344,.85793,
.8225,.78719,.75203,.71705,.68231,.64784,.61369,.57991,.54656,.51368,.48134,.44959,.41849,.3881,.35848,.32967,.30174,.27474,.24872,.22373,.19982,.17702,.15539,.13497,.11579,.09791,.08137,.06621,.05248,.04022,.02948,.02029,.01271,.00677,.00252,0,-7.6E-4,2.7E-4,.00314,.00788,.01451,.02307,.03357,.04604,.0605,.07697,.09546,.11599,.13858,.16322,.18992,.21869,.24952,.28241,.31735,.35434],pressure:[.95248,.95236,.95228,.95223,.95222,.95224,.95231,.95241,.95256,.95274,.95296,.95322,.95352,.95385,.95423,
.95465,.9551,.9556,.95613,.9567,.95731,.95796,.95864,.95936,.96012,.96091,.96173,.96259,.96348,.9644,.96535,.96633,.96734,.96838,.96944,.97053,.97164,.97277,.97393,.9751,.97629,.9775,.97873,.97997,.98122,.98249,.98376,.98505,.98634,.98763,.98893,.99023,.99154,.99284,.99414,.99544,.99673,.99802,.9993,.99942,.99816,.99691,.99568,.99445,.99324,.99205,.99087,.98972,.98858,.98746,.98636,.98528,.98423,.9832,.98219,.98121,.98025,.97931,.9784,.97752,.97666,.97582,.97501,.97423,.97347,.97274,.97203,.97135,
.9707,.97007,.96948,.9689,.96836,.96784,.96735,.96689,.96646,.96605,.96567,.96533,.965,.96471,.96445,.96421,.964,.96382,.96367,.96355,.96346,.96339,.96335,.96334,.96336,.9634,.96348,.96358,.9637,.96385,.96403,.96423,.96446,.96471,.96499,.96529,.96561,.96595,.96631,.96669,.96709,.96751,.96795,.9684,.96887,.96935,.96984,.97035,.97087,.9714,.97194,.97249,.97304,.97361,.97418,.97476,.97534,.97592,.97651,.97711,.9777,.9783,.9789,.9795,.9801,.9807,.9813,.9819,.9825,.98309,.98369,.98428,.98486,.98545,.98603,
.98661,.98718,.98775,.98832,.98888,.98944,.99,.99056,.99112,.99167,.99223,.99279,.99335,.99392,.99449,.99507,.99565,.99624,.99684,.99745,.99807,.9987,.99934,1,.99933,.99866,.99797,.99727,.99656,.99583,.9951,.99435,.99359,.99283,.99205,.99126,.99046,.98966,.98885,.98803,.9872,.98637,.98554,.9847,.98387,.98303,.98219,.98134,.9805,.97967,.97883,.978,.97717,.97634,.97552,.97471,.97389,.97309,.97229,.9715,.97071,.96993,.96915,.96838,.96762,.96687,.96612,.96539,.96466,.96395,.96324,.96255,.96187,.9612,
.96055,.95991,.95929,.95869,.95811,.95754,.957,.95648,.95599,.95552,.95508,.95467,.95428,.95393,.9536,.95331,.95305,.95283,.95264]},{distance:[2.85606,2.86149,2.86432,2.8645,2.862,2.85686,2.84912,2.83886,2.82618,2.81117,2.79393,2.77456,2.75314,2.72975,2.70447,2.67734,2.64844,2.61784,2.58564,2.55196,2.5169,2.48057,2.44305,2.40438,2.36462,2.32383,2.28208,2.23943,2.19591,2.15153,2.10628,2.06016,2.01321,1.96548,1.91702,1.86793,1.8183,1.76829,1.71803,1.66767,1.61737,1.56726,1.51746,1.46803,1.41902,1.37044,
1.32228,1.27452,1.22716,1.18023,1.13376,1.08781,1.04244,.99769,.95357,.91003,.86701,.82447,.78238,.74069,.69938,.65836,.61758,.57699,.53656,.49627,.45611,.41611,.37632,.33683,.29776,.25924,.22141,.18441,.14839,.11346,.07972,.04727,.01619,-.01348,-.0417,-.0684,-.09351,-.11698,-.13875,-.1588,-.17713,-.19381,-.20889,-.22242,-.23444,-.24501,-.25421,-.26216,-.26897,-.27473,-.27951,-.28336,-.28631,-.28836,-.28948,-.28963,-.28873,-.28673,-.28355,-.27916,-.27354,-.26673,-.25878,-.2498,-.23992,-.22929,-.21802,
-.20623,-.19398,-.18134,-.16836,-.1551,-.14163,-.12809,-.11461,-.1013,-.08826,-.07557,-.06335,-.0517,-.04077,-.03065,-.02143,-.01321,-.00606,0,.00496,.00888,.01181,.01385,.01511,.0157,.01574,.01533,.01458,.01358,.0124,.01112,.00979,.00851,.00738,.0065,.006,.00596,.00646,.00754,.00924,.01161,.01471,.01858,.02323,.02865,.03481,.04169,.0493,.05765,.06677,.07671,.08754,.09934,.11222,.12628,.14159,.15823,.17624,.19561,.21632,.23828,.26142,.28563,.31083,.33696,.36397,.39185,.42057,.4501,.48036,.51125,.54264,
.5744,.60646,.63871,.67105,.70337,.73556,.76751,.79918,.83048,.86139,.8919,.92202,.95184,.98144,1.01094,1.04045,1.0701,1.10002,1.13029,1.16103,1.1923,1.22416,1.25664,1.28979,1.32364,1.35824,1.39363,1.42985,1.4669,1.50475,1.54332,1.58252,1.62227,1.6625,1.70312,1.744,1.78501,1.82598,1.8668,1.90734,1.94754,1.98732,2.02666,2.06555,2.10402,2.1421,2.17985,2.2173,2.25448,2.29139,2.328,2.36424,2.4,2.43515,2.46955,2.50309,2.53565,2.56717,2.59761,2.62692,2.65505,2.68191,2.7074,2.73138,2.75375,2.7744,2.79324,
2.81017,2.82504,2.83772,2.8481],pressure:[.22758,.23641,.24578,.25568,.26609,.27699,.28835,.30016,.31237,.32495,.33789,.35113,.36466,.37843,.39241,.40658,.4209,.43535,.44989,.4645,.47916,.49385,.50853,.5232,.53784,.55243,.56696,.58141,.59578,.61004,.62419,.63821,.65209,.6658,.67934,.69268,.70582,.71873,.73139,.7438,.75594,.76779,.77935,.79061,.80156,.81221,.82254,.83258,.84231,.85176,.86091,.86978,.87837,.88669,.89473,.9025,.91,.91725,.92425,.931,.93752,.9438,.94985,.95566,.96124,.96658,.97168,.97652,
.98109,.98539,.98939,.99309,.99646,.99949,.99783,.99552,.99361,.99209,.99098,.99029,.99003,.99019,.99079,.99181,.99324,.9951,.99735,1,.99698,.99361,.98992,.98592,.98163,.97709,.97231,.96731,.96212,.95676,.95122,.94554,.93973,.93378,.92773,.92157,.91532,.90899,.90258,.89612,.88961,.88308,.87653,.87,.8635,.85705,.85068,.8444,.83823,.83219,.82628,.82052,.81493,.80952,.8043,.79929,.7945,.78994,.78561,.78151,.77765,.77402,.77062,.76742,.76443,.76161,.75896,.75645,.75406,.75175,.74951,.7473,.74511,.74289,
.74064,.73833,.73592,.73341,.73078,.728,.72507,.72197,.71869,.71522,.71156,.70769,.70363,.69936,.69489,.69021,.68533,.68023,.67492,.66939,.66363,.65765,.65145,.64501,.63833,.63143,.62428,.61691,.60931,.60148,.59344,.58521,.57679,.5682,.55948,.55063,.54167,.53264,.52354,.51439,.50522,.49603,.48686,.47773,.46865,.45964,.45072,.44192,.43324,.42469,.41629,.40804,.39994,.392,.3842,.37655,.36903,.36164,.35437,.3472,.34012,.33312,.3262,.31933,.31251,.30574,.299,.2923,.28563,.27899,.27239,.26583,.25933,.25288,
.24652,.24025,.2341,.22808,.22221,.21653,.21104,.20576,.20072,.19592,.19138,.18712,.18313,.17943,.17602,.17292,.17013,.16766,.16551,.16369,.16222,.1611,.16036,.16001,.16007,.16055,.16148,.16286,.16471,.16705,.16988,.17321,.17706,.18144,.18636,.19182,.19785,.20443,.21158,.2193]},{distance:[-2.31317,-2.3191,-2.32189,-2.32154,-2.31811,-2.31174,-2.30254,-2.29062,-2.27609,-2.25904,-2.23954,-2.21767,-2.19355,-2.16732,-2.13907,-2.10885,-2.07672,-2.04268,-2.00677,-1.96911,-1.92985,-1.88914,-1.84713,-1.80397,
-1.75979,-1.71467,-1.66864,-1.62171,-1.57395,-1.52546,-1.47625,-1.42628,-1.3755,-1.32384,-1.27131,-1.218,-1.16408,-1.10972,-1.05508,-1.00031,-.94551,-.89077,-.83615,-.7817,-.72757,-.6739,-.62076,-.56821,-.51625,-.46484,-.41397,-.36366,-.314,-.26506,-.21689,-.16957,-.12316,-.07766,-.03301,.01085,.05399,.09643,.13827,.17967,.22079,.26176,.30265,.34342,.38397,.42414,.46381,.50285,.54115,.57863,.61524,.65093,.6856,.71914,.75153,.78275,.81283,.84182,.86972,.89651,.92208,.94634,.96919,.99052,1.01025,1.02835,
1.04484,1.05976,1.07309,1.08479,1.09492,1.1036,1.11096,1.11714,1.12224,1.12627,1.12916,1.13083,1.13125,1.13036,1.12816,1.12466,1.11992,1.11397,1.10677,1.09827,1.08849,1.07746,1.06527,1.05203,1.03786,1.02283,1.00695,.99025,.97279,.9546,.93573,.9163,.8965,.8765,.85647,.83652,.81687,.79775,.77939,.76199,.74568,.73049,.71635,.70316,.69082,.67925,.66834,.65804,.64831,.63911,.63032,.62184,.61363,.60564,.59788,.59036,.58308,.57597,.5689,.56177,.55447,.5469,.53896,.53062,.5219,.51283,.5034,.49355,.48335,
.47287,.46223,.45154,.44085,.43012,.41923,.40805,.39648,.38441,.37176,.35849,.34458,.32999,.31461,.29833,.28109,.26288,.2437,.22361,.20265,.18082,.15807,.13434,.1096,.0838,.0569,.02894,0,-.0298,-.0604,-.09173,-.12364,-.15594,-.18843,-.22092,-.25331,-.28559,-.31781,-.35006,-.38244,-.41502,-.44785,-.48098,-.5144,-.54811,-.58218,-.61666,-.65153,-.68677,-.72232,-.75807,-.79397,-.83002,-.86628,-.90281,-.93968,-.97693,-1.01465,-1.05282,-1.09139,-1.13031,-1.16956,-1.20917,-1.24905,-1.28907,-1.32908,-1.36891,
-1.40844,-1.44765,-1.48658,-1.52527,-1.56376,-1.60206,-1.64016,-1.67801,-1.71552,-1.75264,-1.78936,-1.8257,-1.86161,-1.89702,-1.93182,-1.96584,-1.99894,-2.03102,-2.06203,-2.0919,-2.12056,-2.14794,-2.17397,-2.19852,-2.22138,-2.24235,-2.26129,-2.27805,-2.29243,-2.30422],pressure:[.9681,.97424,.98046,.98674,.99309,.9995,.99404,.98754,.981,.97444,.96785,.96124,.95462,.94801,.94139,.93479,.92822,.92167,.91515,.90868,.90225,.89589,.88959,.88336,.87722,.87115,.86519,.85932,.85356,.84792,.84239,.83699,.83173,
.8266,.82162,.81679,.81211,.80759,.80324,.79906,.79505,.79121,.78756,.78409,.78081,.77771,.77481,.77211,.76959,.76728,.76516,.76324,.76153,.76001,.75869,.75757,.75665,.75593,.7554,.75507,.75493,.75498,.75523,.75565,.75627,.75706,.75803,.75917,.76049,.76197,.76361,.76541,.76737,.76947,.77172,.77409,.7766,.77923,.78198,.78484,.7878,.79086,.79401,.79724,.80055,.80394,.8074,.81092,.8145,.81813,.82182,.82556,.82934,.83317,.83703,.84093,.84487,.84884,.85284,.85687,.86094,.86503,.86915,.87329,.87746,.88166,
.88587,.89011,.89436,.89863,.90291,.9072,.91149,.91579,.92009,.92438,.92867,.93295,.9372,.94144,.94566,.94985,.954,.95812,.96219,.96623,.97021,.97415,.97802,.98184,.9856,.9893,.99293,.9965,1,.99657,.9932,.98991,.98668,.98352,.98042,.97738,.9744,.97148,.9686,.96577,.96298,.96023,.95751,.95482,.95214,.94949,.94684,.9442,.94156,.93892,.93627,.93361,.93094,.92825,.92555,.92284,.9201,.91735,.91458,.91179,.90899,.90616,.90332,.90047,.8976,.89472,.89183,.88893,.88603,.88314,.88024,.87735,.87448,.87162,.86878,
.86597,.86319,.86044,.85774,.85508,.85247,.84993,.84744,.84503,.84269,.84042,.83825,.83616,.83417,.83227,.83048,.8288,.82724,.82578,.82445,.82324,.82215,.82119,.82037,.81967,.81911,.81868,.81839,.81824,.81823,.81835,.81862,.81903,.81957,.82026,.82109,.82206,.82317,.82443,.82583,.82737,.82906,.83089,.83287,.83499,.83726,.83968,.84223,.84494,.84778,.85077,.8539,.85717,.86058,.86412,.86781,.87163,.87559,.87968,.88391,.88826,.89275,.89737,.90211,.90698,.91198,.91709,.92233,.92768,.93315,.93873,.94441,
.95019,.95607,.96205]},{distance:[4.72925,4.81721,4.9037,4.98859,5.07177,5.15311,5.23249,5.3098,5.38491,5.45772,5.52811,5.59598,5.66122,5.72375,5.78346,5.84028,5.8941,5.94486,5.99248,6.03689,6.07803,6.11584,6.15028,6.18128,6.20882,6.23285,6.25336,6.27031,6.28369,6.29348,6.29969,6.3023,6.30133,6.29678,6.28867,6.27703,6.26187,6.24324,6.22116,6.19567,6.16683,6.13468,6.09928,6.06068,6.01896,5.97417,5.92639,5.87569,5.82217,5.76589,5.70696,5.64545,5.58147,5.5151,5.44644,5.37559,5.30265,5.2277,5.15085,5.0722,
4.99184,4.90987,4.82639,4.74151,4.65533,4.56794,4.47945,4.38996,4.29959,4.20843,4.11658,4.02416,3.93125,3.83796,3.74437,3.65057,3.55666,3.46272,3.36884,3.27509,3.18155,3.08831,2.99545,2.90303,2.81114,2.71984,2.62922,2.53933,2.45026,2.36207,2.27484,2.18862,2.10349,2.01951,1.93675,1.85528,1.77515,1.69644,1.61919,1.54348,1.46935,1.39685,1.32605,1.25698,1.18967,1.12417,1.06049,.99863,.93862,.88044,.82408,.76953,.71676,.66574,.61644,.56882,.52282,.47841,.43553,.39413,.35414,.31551,.27817,.24206,.20712,
.17328,.14048,.10866,.07776,.04772,.01848,-.00999,-.03776,-.06487,-.09134,-.11721,-.14251,-.16725,-.19144,-.21509,-.2382,-.26076,-.28275,-.30416,-.32496,-.34511,-.36459,-.38334,-.40134,-.41852,-.43485,-.45026,-.46471,-.47815,-.49052,-.50179,-.51189,-.52081,-.52849,-.5349,-.54003,-.54383,-.54627,-.54734,-.54702,-.54528,-.54211,-.53752,-.53149,-.52403,-.51515,-.50487,-.4932,-.48015,-.46575,-.45001,-.43297,-.41463,-.39503,-.37419,-.35213,-.32887,-.30443,-.27885,-.25214,-.22432,-.19541,-.16544,-.13442,
-.10235,-.06926,-.03514,0,.03616,.07336,.11159,.15088,.19125,.23272,.27531,.31906,.36401,.41019,.45764,.5064,.55651,.60802,.66096,.71538,.77129,.82874,.88776,.94836,1.01056,1.07438,1.13982,1.20687,1.27554,1.34581,1.41766,1.49107,1.56599,1.64239,1.72025,1.79951,1.88013,1.96209,2.04532,2.12979,2.21546,2.30226,2.39017,2.47911,2.56905,2.65991,2.75164,2.84416,2.93742,3.03133,3.12582,3.2208,3.31619,3.41191,3.50785,3.60393,3.70006,3.79612,3.89202,3.98765,4.08291,4.17767,4.27182,4.36525,4.45783,4.54944,4.63995],
pressure:[.30942,.30838,.30765,.30724,.30715,.30738,.30795,.30884,.31007,.31164,.31354,.31578,.31837,.32129,.32455,.32815,.33209,.33636,.34097,.34591,.35117,.35675,.36265,.36887,.37539,.38221,.38933,.39674,.40442,.41238,.4206,.42907,.43779,.44675,.45593,.46533,.47493,.48473,.49471,.50486,.51517,.52563,.53623,.54694,.55777,.5687,.57971,.59079,.60194,.61313,.62435,.6356,.64686,.65811,.66935,.68056,.69174,.70286,.71391,.72489,.73579,.74659,.75728,.76785,.7783,.7886,.79876,.80877,.81861,.82827,.83776,
.84706,.85617,.86507,.87378,.88227,.89056,.89863,.90649,.91412,.92153,.92872,.93568,.94241,.94892,.95519,.96122,.96702,.97258,.97791,.98299,.98783,.99242,.99677,.99911,.99525,.99164,.98827,.98515,.98228,.97966,.97728,.97514,.97324,.97159,.97017,.96898,.96801,.96727,.96674,.96641,.96629,.96635,.96661,.96703,.96762,.96838,.96928,.97032,.97149,.97279,.9742,.97572,.97734,.97905,.98085,.98273,.98468,.98669,.98877,.99091,.99311,.99535,.99765,1,.9976,.99516,.99267,.99014,.98755,.98491,.98222,.97947,.97666,
.97378,.97083,.96781,.96471,.96153,.95826,.9549,.95144,.94787,.9442,.94042,.93651,.93249,.92834,.92407,.91966,.91512,.91045,.90564,.90069,.8956,.89037,.885,.87949,.87384,.86806,.86214,.85608,.84988,.84356,.83711,.83053,.82383,.81702,.81009,.80306,.79594,.78872,.78141,.77403,.76657,.75905,.75148,.74385,.73619,.72849,.72076,.71302,.70526,.69749,.68972,.68195,.67419,.66644,.65871,.65099,.64329,.63561,.62795,.62032,.61271,.60512,.59755,.59001,.58248,.57497,.56749,.56002,.55256,.54512,.5377,.5303,.52291,
.51554,.50819,.50087,.49358,.48632,.4791,.47192,.4648,.45773,.45072,.44378,.43692,.43015,.42346,.41687,.41039,.40403,.39779,.39168,.38571,.37989,.37423,.36873,.36342,.35828,.35335,.34862,.34409,.3398,.33573,.3319,.32831,.32498,.32192,.31912,.3166,.31436,.31242,.31077]}]}})},"esri/views/3d/webgl-engine/lib/edgeRendering/util":function(){define(["require","exports","../../../../../core/arrayUtils","../../../../../core/maybe","../../../../../core/typedArrayUtil"],function(r,d,n,l,k){function b(b,d){var e=
n.binaryIndexOf(b,d,!0);return-1===e?d<b[0]?0:b.length:e}Object.defineProperty(d,"__esModule",{value:!0});d.determineRendererType=function(b){for(var d=null,e=0;e<b.length;e++){var c=b[e],f=c.type;if(0<c.size*c.color[3]*c.opacity)if(l.isNone(d))d=f;else if(d!==f)return"uber"}return l.isSome(d)?d:"solid"};d.determineAllTransparent=function(b){if(0===b.length)return!0;for(var d=0;d<b.length;d++){var e=b[d].material;if(0<e.size*e.color[3]*e.opacity)return!1}return!0};d.cloneIndices=function(b){if(Uint16Array.from)return k.isUint16Array(b)?
Uint16Array.from(b):Uint32Array.from(b);for(var d=k.isUint16Array(b)?new Uint16Array(b.length):new Uint32Array(b.length),e=0;e<b.length;e++)d[e]=b[e];return d};d.estimateLengthAtDistance=function(b,d,e,c){return c/b*e*2*Math.tan(.5*d)};d.findLowerBoundIndex=b;d.computeEdgeCount=function(d,g,e){return d.length-b(d,g*e.minimumEdgeLength)};d.fillComponenBufferIndices=function(b,d,e,c){for(var f=0;f<b.length;f++){var a=b[f].index,g=d[f],h=d[f+1];if(c)for(;g<h;g++)e.set(c[g],a);else for(;g<h;g++)e.set(g,
a)}}})},"esri/views/3d/webgl-engine/lighting/SceneLighting":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ./SphericalHarmonics".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h=l.vec3f64.create();r=function(){function d(){this._renderLighting={main:{intensity:l.vec3f64.create(),direction:l.vec3f64.fromValues(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],
g:[0],b:[0]}}};this._shOrder=2;this._oldDirection=l.vec3f64.create();this._oldSpecular=k.vec4f64.create();this._oldDiffuse=k.vec4f64.create();this._oldAmbient=k.vec4f64.create()}d.prototype.setUniforms=function(b,c){void 0===c&&(c=!1);c||b.getDefine("GROUND_NORMAL_SHADING")?b.setUniform1f("lightingFixedFactor",(1-this._info.groundLightingFactor)*(1-this._info.globalFactor)):b.setUniform1f("lightingFixedFactor",0);b.setUniform1f("lightingGlobalFactor",this._info.globalFactor);b.setUniform3fv("lightingMainDirection",
this._renderLighting.main.direction);b.setUniform3fv("lightingMainIntensity",this._renderLighting.main.intensity);b.setUniform1f("ambientBoostFactor",.4);c=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?b.setUniform3f("lightingAmbientSH0",c.r[0],c.g[0],c.b[0]):1===this._shOrder?(b.setUniform4f("lightingAmbientSH_R",c.r[0],c.r[1],c.r[2],c.r[3]),b.setUniform4f("lightingAmbientSH_G",c.g[0],c.g[1],c.g[2],c.g[3]),b.setUniform4f("lightingAmbientSH_B",c.b[0],c.b[1],c.b[2],c.b[3])):2===this._shOrder&&
(b.setUniform3f("lightingAmbientSH0",c.r[0],c.g[0],c.b[0]),b.setUniform4f("lightingAmbientSH_R1",c.r[1],c.r[2],c.r[3],c.r[4]),b.setUniform4f("lightingAmbientSH_G1",c.g[1],c.g[2],c.g[3],c.g[4]),b.setUniform4f("lightingAmbientSH_B1",c.b[1],c.b[2],c.b[3],c.b[4]),b.setUniform4f("lightingAmbientSH_R2",c.r[5],c.r[6],c.r[7],c.r[8]),b.setUniform4f("lightingAmbientSH_G2",c.g[5],c.g[6],c.g[7],c.g[8]),b.setUniform4f("lightingAmbientSH_B2",c.b[5],c.b[6],c.b[7],c.b[8]));b.setUniform3fv("lightDirection",this._oldDirection)};
d.prototype.set=function(e){this._info=e;b.combineLights(e.lights,this._shOrder,this._renderLighting.main,this._renderLighting.sphericalHarmonics);n.vec3.negate(this._oldDirection,this._renderLighting.main.direction);e=1/Math.PI;this._oldAmbient[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*e;this._oldAmbient[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*e;this._oldAmbient[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*e;this._oldAmbient[3]=1;this._oldDiffuse[0]=
this._renderLighting.main.intensity[0]*e;this._oldDiffuse[1]=this._renderLighting.main.intensity[1]*e;this._oldDiffuse[2]=this._renderLighting.main.intensity[2]*e;this._oldDiffuse[3]=1;e=n.vec3.copy(h,this._oldDiffuse);n.vec3.scale(e,e,.4*this._info.globalFactor);n.vec3.add(this._oldAmbient,this._oldAmbient,e)};Object.defineProperty(d.prototype,"globalFactor",{get:function(){return this._info.globalFactor},enumerable:!0,configurable:!0});d.prototype.getOld=function(){return{ambient:this._oldAmbient,
diffuse:this._oldDiffuse,specular:this._oldSpecular,direction:this._oldDirection,helper:this}};return d}();d.SceneLighting=r})},"esri/views/3d/webgl-engine/lighting/SphericalHarmonics":function(){define("require exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../lib/LongVectorMath ./Lightsources".split(" "),function(r,d,n,l,k,b,h){function g(a){return(a+1)*(a+1)}function e(a){return n.clamp(Math.floor(Math.sqrt(a)-1),0,2)}function c(a,
b,c){var e=a[0],d=a[1];a=a[2];c=c||[];c.length=g(b);0<=b&&(c[0]=.28209479177);1<=b&&(c[1]=.4886025119*e,c[2]=.4886025119*a,c[3]=.4886025119*d);2<=b&&(c[4]=1.09254843059*e*d,c[5]=1.09254843059*d*a,c[6]=.31539156525*(3*a*a-1),c[7]=1.09254843059*e*a,c[8]=.54627421529*(e*e-d*d));return c}function f(a,b){a=g(a);b=b||{r:[],g:[],b:[]};b.r.length=b.g.length=b.b.length=a;for(var c=0;c<a;c++)b.r[c]=b.g[c]=b.b[c]=0;return b}function a(a,d){for(var f=e(d.r.length),g=0;g<a.length;g++){var h=a[g];l.vec3.negate(w,
h.direction);c(w,f,y);b.elementwiseProduct(y,m);b.scalarProduct(y,h.intensity[0],x);b.add(d.r,x);b.scalarProduct(y,h.intensity[1],x);b.add(d.g,x);b.scalarProduct(y,h.intensity[2],x);b.add(d.b,x)}return d}function p(a,b){c(w,0,y);for(var e=0;e<a.length;e++){var d=a[e];b.r[0]+=y[0]*m[0]*d.intensity[0]*4*Math.PI;b.g[0]+=y[0]*m[0]*d.intensity[1]*4*Math.PI;b.b[0]+=y[0]*m[0]*d.intensity[2]*4*Math.PI}return b}Object.defineProperty(d,"__esModule",{value:!0});d.numberOfCoefficients=g;d.numberOfCoefficientsInBand=
function(a){return 2*a+1};d.orderFromNumberOfCoefficients=e;d.computeCoefficients=c;d.initSHCoefficients=f;d.projectFillLights=a;d.projectAmbientLights=p;d.combineLights=function(c,e,d,g){f(e,g.sh);l.vec3.set(d.intensity,0,0,0);var k=!1,m=q,u=v;e=t;m.length=0;u.length=0;for(var z=e.length=0;z<c.length;z++){var w=c[z];w instanceof h.MainLight&&!k?(l.vec3.copy(d.direction,w.direction),d.intensity[0]=w.intensity[0],d.intensity[1]=w.intensity[1],d.intensity[2]=w.intensity[2],d.castShadows=w.castShadows,
k=!0):w instanceof h.MainLight||w instanceof h.FillLight?m.push(w):w instanceof h.AmbientLight?u.push(w):w instanceof h.SphericalHarmonicsLight&&e.push(w)}a(m,g.sh);p(u,g.sh);for(c=0;c<e.length;c++)w=e[c],b.add(g.sh.r,w.sh.r),b.add(g.sh.g,w.sh.g),b.add(g.sh.b,w.sh.b)};var q=[],v=[],t=[],y=[0],x=[0],w=k.vec3f64.create(),m=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398]})},"esri/views/3d/webgl-engine/lib/LongVectorMath":function(){define(["require","exports"],function(r,
d){Object.defineProperty(d,"__esModule",{value:!0});d.dotProduct=function(d,l){for(var k=0,b=0;b<d.length;b++)k+=d[b]*l[b];return k};d.elementwiseProduct=function(d,l,k){k=k||d;k.length=d.length;for(var b=0;b<d.length;b++)k[b]=d[b]*l[b];return k};d.scalarProduct=function(d,l,k){k=k||d;k.length=d.length;for(var b=0;b<d.length;b++)k[b]=d[b]*l;return k};d.add=function(d,l,k){k=k||d;k.length=d.length;for(var b=0;b<d.length;b++)k[b]=d[b]+l[b];return k}})},"esri/views/webgl/Profiling":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.startMeasurement=function(d){return(d=d.capabilities.disjointTimerQuery)?new n(d):null};d.getTimestamp=function(d,k,b){void 0===b&&(b=50);var h=d.capabilities.disjointTimerQuery;if(!h||0>=h.timestampBits())return null;var g=h.createQuery();h.createTimestamp(g);var e=function(){var c=h.resultAvailable(g),d=h.disjoint();c&&!d?(c=h.getResult(g),k(c/1E6)):d?k():setTimeout(e,b)};e()};d.supportsTimestamps=function(d){d=d.capabilities.disjointTimerQuery;
if(!d)return!1;d=d.timestampBits();console.log({bits:d});return 0<d};var n=function(){function d(d){this.timer=d;this.query=d.createQuery();this.timer.beginTimeElapsed(this.query)}d.prototype.stop=function(d,b){void 0===b&&(b=50);this.cb=d;this.checkInterval=b;this.timer.endTimeElapsed();this.checkQueryResult()};d.prototype.checkQueryResult=function(){var d=this.timer.resultAvailable(this.query),b=this.timer.disjoint();d&&!b?(d=this.timer.getResult(this.query),this.cb(d/1E6)):b?this.cb():setTimeout(this.checkQueryResult.bind(this),
this.checkInterval)};return d}()})},"esri/views/3d/webgl-engine/materials/ColorMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/ColorPrograms ../../../webgl/renderState".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a){r=function(a){function b(b,c){c=a.call(this,c)||this;c.supportsEdges=!0;c.params=
e.copyParameters(b,v);return c}n(b,a);b.prototype.setParameterValues=function(a){var b=this.params,c;for(c in a)b[c]=a[c];this.notifyDirty("matChanged")};b.prototype.getParameters=function(){return this.params};b.prototype.setColor=function(a){this.params.color=a;this.notifyDirty("matChanged")};b.prototype.getColor=function(){return this.params.color};b.prototype.setTransparent=function(a){this.params.transparent=a;this.notifyDirty("matChanged")};b.prototype.getTransparent=function(){return this.params.transparent};
b.prototype.intersect=function(a,b,c,d,f,g,h,k,l){e.intersectTriangleGeometry(a,b,c,d,f,g,h,l)};b.prototype.getGLMaterials=function(){return{color:p,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:q}};b.prototype.createBufferWriter=function(){return new y};b.prototype.createRenderer=function(a,b){return new c(a,b,this)};return b}(b);var p=function(b){function c(a,c,e){a=b.call(this,a,c)||this;a.updateParameters();return a}n(c,b);c.prototype.updateParameters=function(){this.params=e.copyParameters(this.material.getParameters());
this.selectProgram()};c.prototype.selectProgram=function(){var b=this.params;this.program=this.programRep.getProgram(f.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});this.pipelineState=a.makePipelineState({blending:b.transparent&&a.separateBlendingParams(770,1,771,771),polygonOffset:b.polygonOffset&&x,culling:w(b.cullFace),depthTest:b.testDepth&&{func:513},depthWrite:b.writeDepth&&a.defaultDepthWriteParams,colorWrite:a.defaultColorWriteParams})};c.prototype.beginSlot=function(a){var b=
5;this.params.transparent&&(b=this.params.writeDepth?7:10);return a===b};c.prototype.getProgram=function(){return this.program};c.prototype.bind=function(a,b){b=this.program;var c=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);b.setUniform4fv("eColor",c.color)};c.prototype.release=function(a){};c.prototype.bindView=function(a,b){a=this.program;var c=this.params;e.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&e.bindSlicePlane(b.origin,b.slicePlane,a)};c.prototype.bindInstance=
function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};c.prototype.getDrawMode=function(){return 4};return c}(k),q=function(b){function c(a,c,e){a=b.call(this,a,c)||this;a.updateParameters();return a}n(c,b);c.prototype.updateParameters=function(){this.params=e.copyParameters(this.material.getParameters());this.selectProgram()};c.prototype.selectProgram=function(){var b=this.params;this.program=this.programRep.getProgram(f.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});
this.pipelineState=a.makePipelineState({polygonOffset:b.polygonOffset&&x,culling:w(b.cullFace),depthTest:b.testDepth&&{func:513},depthWrite:b.writeDepth&&a.defaultDepthWriteParams,colorWrite:a.defaultColorWriteParams})};c.prototype.beginSlot=function(a){return 5===a};c.prototype.getProgram=function(){return this.program};c.prototype.bind=function(a,b){var c=this.program,d=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);e.bindHighlightRendering(a,b,c);c.setUniform4fv("eColor",d.color)};
c.prototype.release=function(a){};c.prototype.bindView=function(a,b){a=this.program;var c=this.params;e.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&e.bindSlicePlane(b.origin,b.slicePlane,a)};c.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};c.prototype.getDrawMode=function(){return 4};return c}(k),v={color:[1,1,1,1],transparent:!1,writeDepth:!0,testDepth:!0,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:"none"},t=l.newLayout().vec3f(h.VertexAttrConstants.POSITION).vec4u8(h.VertexAttrConstants.COLOR),
y=function(){function a(){this.vertexBufferLayout=t}a.prototype.allocate=function(a){return t.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[h.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,c,e){g.writeDefaultAttributes(b,t,a.transformation,a.invTranspTransformation,c,e)};return a}(),x={factor:1,units:1},w=function(a){return"none"!==a&&{face:"front"===a?1028:1029,mode:2305}};return r})},"esri/views/3d/webgl-engine/shaders/ColorPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({VERTEX_COLORS:b.vertexColors,SLICE:b.slice})};d.colorPass={name:"color-color",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/color/color.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/color/color.frag")}},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/shaders/MiscPrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.blendLayers={name:"blend-layers",shaders:{vertexShader:l.resolveIncludes("misc/blendLayers.vert"),fragmentShader:l.resolveIncludes("misc/blendLayers.frag")},attributes:n.Default3D};d.texOnly={name:"tex-only",shaders:{vertexShader:l.resolveIncludes("misc/texOnly.vert"),fragmentShader:l.resolveIncludes("misc/texOnly.frag")},attributes:n.Default3D}})},"esri/views/3d/webgl-engine/lib/GLMaterialRep":function(){define(["require",
"exports","../../../../core/compilerUtils","./Util"],function(r,d,n,l){var k=function(){function b(b){this.refCnt=0;this.glMaterial=b}b.prototype.incRefCnt=function(){++this.refCnt};b.prototype.decRefCnt=function(){--this.refCnt;l.assert(0<=this.refCnt)};b.prototype.getRefCnt=function(){return this.refCnt};b.prototype.getGLMaterial=function(){return this.glMaterial};return b}();r=function(){function d(b,e){this._textureRep=b;this._programRep=e;this._id2glMaterialRef=new Map}d.prototype.acquire=function(b,
e){var c=b.id+"_"+e,d=this._id2glMaterialRef.get(c);null==d?(b=(d=b.getGLMaterials()[e])?new d(b,this._programRep,this._textureRep):void 0,d=new k(b),this._id2glMaterialRef.set(c,d)):b=d.getGLMaterial();d.incRefCnt();b&&this.increaseProgramReferences(b);return b};d.prototype.release=function(b,e){b=b+"_"+e;e=this._id2glMaterialRef.get(b);e.decRefCnt();if(0===e.getRefCnt()){if(e=e.getGLMaterial())this.decreaseProgramReferences(e),e.dispose();this._id2glMaterialRef.delete(b)}};d.prototype.updateMaterialParameters=
function(d){for(var e=0,c=b;e<c.length;e++){var f=this._id2glMaterialRef.get(d+"_"+c[e]);f&&f.getGLMaterial()&&this.updateParamsForMat(f.getGLMaterial())}};d.prototype.updateParamsForMat=function(b){b.updateParameters&&(this.decreaseProgramReferences(b),b.updateParameters(),this.increaseProgramReferences(b))};d.prototype.increaseProgramReferences=function(b){b=b.getPrograms();for(var e=this._programRep,c=0;c<b.length;c++)e.increaseRefCount(b[c])};d.prototype.decreaseProgramReferences=function(b){b=
b.getPrograms();for(var e=this._programRep,c=0;c<b.length;c++)e.decreaseRefCount(b[c])};return d}();var b=n.tuple("color","depth","depthShadowMap","normal","highlight");return r})},"esri/views/3d/webgl-engine/lib/ProgramRepository":function(){define(["require","exports","./Util","../../../webgl/programUtils"],function(r,d,n,l){return function(){function d(b,d){void 0===d&&(d="");this._rctx=b;this._shaderPrefix=d;this._programCacheByTemplate=new Map;this._programRefCount=[];this._commonUniforms={model:[],
modelNormal:[],lightDirection:[],proj:[],shadowMapDistance:[],viewportPixelSz:[],lightingMainDirection:[]}}d.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(b){b.programs.forEach(function(b){b.dispose()})});this._rctx=this._commonUniforms=this._programRefCount=this._programCacheByTemplate=null};d.prototype.getProgram=function(b,d){var g=this;this._programCacheByTemplate.has(b)||this.addProgramTemplate(b,function(e){return l.createProgram(g._rctx,b,e,g._shaderPrefix)});return this.getProgramTemplateInstance(b,
d)};d.prototype.addProgramTemplate=function(b,d){this._programCacheByTemplate.set(b,{constructor:d,programs:new Map})};d.prototype.getProgramTemplateInstance=function(b,d){if(b=this._programCacheByTemplate.get(b)){var g=d?JSON.stringify(d):"default";b.programs.has(g)||(d=b.constructor(d),b.programs.set(g,d));return b.programs.get(g)}return null};d.prototype.getProgramsUsingUniform=function(b){return this._commonUniforms[b]||[]};d.prototype.increaseRefCount=function(b){var d=b.id;this._programRefCount[d]?
this._programRefCount[d]++:(this._programRefCount[d]=1,this._findCommonUniforms(b))};d.prototype.decreaseRefCount=function(b){var d=b.id;1<this._programRefCount[d]?this._programRefCount[d]--:(this._forgetCommonUniforms(b),this._programRefCount[d]=0)};d.prototype._findCommonUniforms=function(b){for(var d in this._commonUniforms)b.hasUniform(d)&&(n.assert(-1===this._commonUniforms[d].indexOf(b),"common uniforms of program have already been determined"),this._commonUniforms[d].push(b))};d.prototype._forgetCommonUniforms=
function(b){for(var d in this._commonUniforms){var g=this._commonUniforms[d],e=g.indexOf(b);-1<e&&(g[e]=g[g.length-1],g.pop())}};return d}()})},"esri/views/3d/webgl-engine/lib/TextureRepository":function(){define(["require","exports","../../../../core/Logger","./Util","../../../webgl/Texture"],function(r,d,n,l,k){var b=n.getLogger("esri.views.3d.webgl-engine.lib.TextureRepository");r=function(){function d(b,e,c,d){this.NUM_PARALLEL=8;this._fallbackTextureTransparent=this._fallbackTexture=null;this.textures=
b;this._programRepository=e;this.getViewportToRestore=c;this._rctx=d;this.NUM_PARALLEL=8;this.id2textureRef={};this.loading={};this._queue=[];this.listeners=[];this.maxMaxAnisotropy=(this.afExt=d.capabilities.textureFilterAnisotropic)?d.parameters.maxMaxAnisotropy:1;this.maxAnisotropy=Math.min(8,this.maxMaxAnisotropy);this._needsRender=!0;this._fallbackTextureData=new Uint8Array(256);this._fallbackTextureTransparentData=new Uint8Array(256);for(b=0;b<this._fallbackTextureData.length;++b)this._fallbackTextureData[b]=
255,this._fallbackTextureTransparentData[b]=0!==(b+1)%4?255:0;this._fallbackTextureDesc={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:8,height:8,maxAnisotropy:8}}d.prototype.resetNeedsRender=function(){this._needsRender=!1};d.prototype.needsRender=function(){return this._needsRender};d.prototype.acquire=function(g,e,c){var f=this,a=this.id2textureRef[g];if(null==a){var h=this.textures[g];l.assert(void 0!==h);h.setUnloadFunc(this._unload.bind(this));e=!0===e;var k=this._createGLTextureDescription(h),
a=new d.TextureRef(null);l.assert(null==this.id2textureRef[g]);this.id2textureRef[g]=a;if(h.initializeThroughRender)g=h.initializeThroughRender(this._rctx,k),a.setGLTexture(g),c&&c(a);else if(h.deferredLoading())this.getLoadingCount()<this.NUM_PARALLEL?this._loadImage(g,k,c):this._queue.push([g,k,c]);else try{h.initializeThroughUpload(this._rctx,k,this._programRepository,this.getViewportToRestore(),function(b){a.setGLTexture(b);f._needsRender=!0;c&&c(a)})}catch(v){b.error("#acquire","Error loading texture: "+
v.toString())}null==a.getGLTexture()&&a.setGLTexture(e?this.fallbackTextureTransparent:this.fallbackTexture);this._needsRender=!0}a.incRefCnt();return a};d.prototype.release=function(b){b=this.id2textureRef[b];void 0!==b&&(b.decRefCnt(),l.assert(0<=b.getRefCnt()))};d.prototype.getLoadingCount=function(){return Object.keys(this.loading).length};d.prototype.getTexture=function(b){return this.textures[b]};d.prototype.getMaxAnisotropy=function(){return this.maxAnisotropy};d.prototype._unload=function(b){var e=
this.id2textureRef[b];void 0!==e&&((e=e.getGLTexture())&&e!==this.fallbackTextureTransparent&&e!==this.fallbackTexture&&e.dispose(),delete this.id2textureRef[b]);this.next(b)};d.prototype._createGLTextureDescription=function(b){return{target:3553,pixelFormat:6408,dataType:5121,maxAnisotropy:this.afExt&&b.params&&b.params.mipmap&&!b.params.disableAnisotropy?this.maxAnisotropy:void 0,wrapMode:b.params&&b.params.wrap}};d.prototype.next=function(b){if(b in this.loading){delete this.loading[b];var e=Object.keys(this.id2textureRef),
c=Object.keys(this.loading);this.listeners.forEach(function(d){d(b,e,c)});this.processQueue()}};d.prototype._loadImage=function(b,e,c){var d=this;l.assert(null==this.loading[b]);this.loading[b]=!0;var a=this.textures[b];l.assert(void 0!==a);setTimeout(function(){var f=d.id2textureRef[b];f&&f.getRefCnt()&&a.initializeThroughUpload(d._rctx,e,d._programRepository,d.getViewportToRestore(),function(a){d.next(b);d._needsRender=!0;f&&f.getRefCnt()&&(f.setGLTexture(a),c&&c(f))})},0)};d.prototype.processQueue=
function(){for(var b=[],e=0;e<this._queue.length;++e){var c=this._queue[e][0],d=this.id2textureRef[c];void 0!==d&&(0===d.getRefCnt()?(d.getGLTexture().dispose(),delete this.id2textureRef[c]):b.push(this._queue[e]))}this._queue=b;b=Math.min(this.NUM_PARALLEL-Object.keys(this.loading).length,this._queue.length);for(e=0;e<b;++e)this._loadImage(this._queue[e][0],this._queue[e][1],this._queue[e][2]);this._queue.splice(0,b)};Object.defineProperty(d.prototype,"fallbackTexture",{get:function(){this._fallbackTexture||
(this._fallbackTexture=new k(this._rctx,this._fallbackTextureDesc,this._fallbackTextureData));return this._fallbackTexture},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fallbackTextureTransparent",{get:function(){this._fallbackTextureTransparent||(this._fallbackTextureTransparent=new k(this._rctx,this._fallbackTextureDesc,this._fallbackTextureTransparentData));return this._fallbackTextureTransparent},enumerable:!0,configurable:!0});return d}();(function(b){var d=function(){function b(b){this._glTexture=
null;this._refCount=0;this._glTexture=b}b.prototype.incRefCnt=function(){++this._refCount};b.prototype.decRefCnt=function(){--this._refCount;l.assert(0<=this._refCount)};b.prototype.getRefCnt=function(){return this._refCount};b.prototype.setGLTexture=function(b){this._glTexture=b};b.prototype.getGLTexture=function(){return this._glTexture};return b}();b.TextureRef=d})(r||(r={}));return r})},"esri/views/3d/webgl-engine/lib/tracer":function(){define(["require","exports","./webgl-debug","../../../webgl/capabilities/isWebGL2Context"],
function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});var k=null,b=[];d.enabled=!1;d.begin=function(){d.enabled&&(k=[])};d.trace=function(b){d.enabled&&null!=k&&k.push(b)};d.end=function(){if(d.enabled){var h=k;k=null;h&&(b.forEach(function(b){return b(h)}),b.length=0);return h}};d.instrumentContext=function(b){return d.enabled?l.default(b)?(console.warn("WebGL tracer is not supported on a WebGL2 Context"),b):n.makeDebugContext(b,void 0,function(b,e){d.enabled&&k&&k.push("gl."+b+"("+
n.glFunctionArgsToString(b,e)+")")}):b};d.request=function(d){b.push(d)}})},"esri/views/3d/webgl-engine/lib/webgl-debug":function(){define([],function(){function r(b){if(null==e){e={};c={};for(var a in b)"number"==typeof b[a]&&(e[b[a]]=a,c[a]=b[a])}}function d(){if(null==e)throw"WebGLDebugUtils.init(ctx) not called";}function n(b){d();var a=e[b];return void 0!==a?"gl."+a:"/*UNKNOWN WebGL ENUM*/ 0x"+b.toString(16)+""}function l(b,a,e,d){b=g[b];if(void 0!==b&&(b=b[a],void 0!==b&&b[e])){if("object"===
typeof b[e]&&void 0!==b[e].enumBitwiseOr){a=b[e].enumBitwiseOr;e=0;b=[];for(var f=0;f<a.length;++f){var h=c[a[f]];0!==(d&h)&&(e|=h,b.push(n(h)))}return e===d?b.join(" | "):n(d)}return n(d)}return null===d?"null":void 0===d?"undefined":d.toString()}function k(b,a,c){b.__defineGetter__(c,function(){return a[c]});b.__defineSetter__(c,function(b){a[c]=b})}function b(c,a,e,d){function f(b,c){return function(){e&&e(c,arguments);var f=b[c].apply(b,arguments),h=d.getError();0!=h&&(g[h]=!0,a(h,c,arguments));
return f}}d=d||c;r(c);a=a||function(a,b,c){for(var e="",d=c.length,f=0;f<d;++f)e+=(0==f?"":", ")+l(b,d,f,c[f]);a="WebGL error "+n(a)+" in "+b+"("+e+")";window.console&&window.console.error?window.console.error(a):window.console&&window.console.log&&window.console.log(a)};var g={},h={},p;for(p in c)if("function"==typeof c[p])if("getExtension"!=p)h[p]=f(c,p);else{var q=f(c,p);h[p]=function(){var f=q.apply(c,arguments);return b(f,a,e,d)}}else k(h,c,p);h.getError=function(){for(var a in g)if(g.hasOwnProperty(a)&&
g[a])return g[a]=!1,a;return c.NO_ERROR};return h}function h(b){var a=b.getParameter(b.MAX_VERTEX_ATTRIBS),c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);for(var e=0;e<a;++e)b.disableVertexAttribArray(e),b.vertexAttribPointer(e,4,b.FLOAT,!1,0,0),b.vertexAttrib1f(e,0);b.deleteBuffer(c);a=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);for(e=0;e<a;++e)b.activeTexture(b.TEXTURE0+e),b.bindTexture(b.TEXTURE_CUBE_MAP,null),b.bindTexture(b.TEXTURE_2D,null);b.activeTexture(b.TEXTURE0);b.useProgram(null);b.bindBuffer(b.ARRAY_BUFFER,
null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.disable(b.BLEND);b.disable(b.CULL_FACE);b.disable(b.DEPTH_TEST);b.disable(b.DITHER);b.disable(b.SCISSOR_TEST);b.blendColor(0,0,0,0);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.ONE,b.ZERO);b.clearColor(0,0,0,0);b.clearDepth(1);b.clearStencil(-1);b.colorMask(!0,!0,!0,!0);b.cullFace(b.BACK);b.depthFunc(b.LESS);b.depthMask(!0);b.depthRange(0,1);b.frontFace(b.CCW);b.hint(b.GENERATE_MIPMAP_HINT,
b.DONT_CARE);b.lineWidth(1);b.pixelStorei(b.PACK_ALIGNMENT,4);b.pixelStorei(b.UNPACK_ALIGNMENT,4);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);b.UNPACK_COLORSPACE_CONVERSION_WEBGL&&b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,b.BROWSER_DEFAULT_WEBGL);b.polygonOffset(0,0);b.sampleCoverage(1,!1);b.scissor(0,0,b.canvas.width,b.canvas.height);b.stencilFunc(b.ALWAYS,0,4294967295);b.stencilMask(4294967295);b.stencilOp(b.KEEP,b.KEEP,b.KEEP);b.viewport(0,
0,b.canvas.width,b.canvas.height);for(b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT);b.getError(););}var g={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},
texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},
bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},
blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},e=null,c=null;return{init:r,mightBeEnum:function(b){d();return void 0!==e[b]},glEnumToString:n,glFunctionArgToString:l,glFunctionArgsToString:function(b,
a){for(var c="",e=a.length,d=0;d<e;++d)c+=(0==d?"":", ")+l(b,e,d,a[d]);return c},makeDebugContext:b,makeLostContextSimulatingCanvas:function(b){function a(a){return"function"==typeof a?a:function(b){a.handleEvent(b)}}function c(){for(var a=Object.keys(K),b=0;b<a.length;++b)delete K[a]}function e(){++E;n||F==E&&b.loseContext()}function d(a,b){var c=a[b];return function(){e();if(!n)return c.apply(a,arguments)}}function f(a){return{statusMessage:a,preventDefault:function(){r=!0}}}function g(a){for(var b in a)"function"==
typeof a[b]?w[b]=d(a,b):k(w,a,b);w.getError=function(){e();if(!n)for(var a;a=l.getError();)K[a]=!0;for(a in K)if(K[a])return delete K[a],a;return w.NO_ERROR};var c="createBuffer createFramebuffer createProgram createRenderbuffer createShader createTexture".split(" ");for(b=0;b<c.length;++b){var f=c[b];w[f]=function(b){return function(){e();if(n)return null;var c=b.apply(a,arguments);c.__webglDebugContextLostId__=z;C.push(c);return c}}(a[f])}c="getActiveAttrib getActiveUniform getBufferParameter getContextAttributes getAttachedShaders getFramebufferAttachmentParameter getParameter getProgramParameter getProgramInfoLog getRenderbufferParameter getShaderParameter getShaderInfoLog getShaderSource getTexParameter getUniform getUniformLocation getVertexAttrib".split(" ");
for(b=0;b<c.length;++b)f=c[b],w[f]=function(b){return function(){e();return n?null:b.apply(a,arguments)}}(w[f]);c="isBuffer isEnabled isFramebuffer isProgram isRenderbuffer isShader isTexture".split(" ");for(b=0;b<c.length;++b)f=c[b],w[f]=function(b){return function(){e();return n?!1:b.apply(a,arguments)}}(w[f]);w.checkFramebufferStatus=function(b){return function(){e();return n?w.FRAMEBUFFER_UNSUPPORTED:b.apply(a,arguments)}}(w.checkFramebufferStatus);w.getAttribLocation=function(b){return function(){e();
return n?-1:b.apply(a,arguments)}}(w.getAttribLocation);w.getVertexAttribOffset=function(b){return function(){e();return n?0:b.apply(a,arguments)}}(w.getVertexAttribOffset);w.isContextLost=function(){return n};return w}var l,w,m=[],u=[];w={};var z=1,n=!1,C=[],F=0,E=0,r=!1,L=0,K={};b.getContext=function(a){return function(){var c=a.apply(b,arguments);if(c instanceof WebGLRenderingContext){if(c!=l){if(l)throw"got different context";l=c;w=g(l)}return w}return c}}(b.getContext);(function(b){var c=b.addEventListener;
b.addEventListener=function(e,d,f){switch(e){case "webglcontextlost":m.push(a(d));break;case "webglcontextrestored":u.push(a(d));break;default:c.apply(b,arguments)}}})(b);b.loseContext=function(){if(!n){n=!0;F=0;for(++z;l.getError(););c();K[l.CONTEXT_LOST_WEBGL]=!0;var a=f("context lost"),e=m.slice();setTimeout(function(){for(var c=0;c<e.length;++c)e[c](a);0<=L&&setTimeout(function(){b.restoreContext()},L)},0)}};b.restoreContext=function(){n&&u.length&&setTimeout(function(){if(!r)throw"can not restore. webglcontestlost listener did not call event.preventDefault";
for(var a=0;a<C.length;++a){var b=C[a];b instanceof WebGLBuffer?l.deleteBuffer(b):b instanceof WebGLFramebuffer?l.deleteFramebuffer(b):b instanceof WebGLProgram?l.deleteProgram(b):b instanceof WebGLRenderbuffer?l.deleteRenderbuffer(b):b instanceof WebGLShader?l.deleteShader(b):b instanceof WebGLTexture&&l.deleteTexture(b)}h(l);n=!1;E=0;r=!1;for(var a=u.slice(),b=f("context restored"),c=0;c<a.length;++c)a[c](b)},0)};b.loseContextInNCalls=function(a){if(n)throw"You can not ask a lost contet to be lost";
F=E+a};b.getNumCalls=function(){return E};b.setRestoreTimeout=function(a){L=a};return b},resetToInitialState:h}})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.default=function(d){return window.WebGL2RenderingContext&&d instanceof window.WebGL2RenderingContext}})},"esri/views/3d/webgl-engine/parts/ScreenshotManager":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/maybe ../../../../core/promiseUtils ../lib/AutoDisposable ../../../support/screenshotUtils ../../../webgl/FramebufferObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function a(a,b,c,e,f){void 0===e&&(e=null);void 0===f&&(f=!0);var g=d.call(this)||this;g._rctx=a;g._renderScene=b;g._requestRenderScene=c;g._renderOverlay=e;g.supersample=f;g._screenshotQueue=[];return g}l(a,d);a.prototype.dispose=function(){this._rctx=null};a.prototype.takeScreenshot=function(a){var b=this;this._requestRenderScene();var c=h.createResolver(function(){b._screenshotQueue=b._screenshotQueue.filter(function(a){return a.resolver!==
c})});this._screenshotQueue.push({settings:a,resolver:c});return c.promise};a.prototype.update=function(a){if(0!==this._screenshotQueue.length){for(var b=0,c=this._screenshotQueue;b<c.length;b++){var d=c[b];if(this.isDisposed)d.resolver.reject();else{var f=n({},d.settings,{pixelRatio:d.settings.pixelRatio*a.viewCamera.pixelRatio}),g=this._ensureScreenshotEncodeCanvas(),h=this._renderScreenshot(a,f),f=e.encodeResult(h,f,g,{flipY:!0,premultipliedAlpha:!0});d.resolver(f)}}this._screenshotQueue=[]}};
a.prototype._renderScreenshotOverlay=function(a,c,e){if(!b.isNone(this._renderOverlay)){a.width=c.width;a.height=c.height;var d=a.getContext("2d"),f=e.pixelRatio;d.save();d.translate(0,c.height);d.scale(1,-1);e.region&&d.translate(-e.region.x,-e.region.y);d.scale(f,f);this._renderOverlay(a,c);d.restore()}};a.prototype._readbackScreenshot=function(a){return a.resample?this._readbackScreenshotResampled(a):this._readbackScreenshotImmediate(a)};a.prototype._readbackScreenshotResampled=function(a){var b=
a.framebufferWidth,c=a.framebufferHeight,d=a.region,f=a.resample,g=this._ensureScreenshotEncodeCanvas(),h=e.createEmptyImageData(b,c,g);this._rctx.gl.readPixels(0,0,b,c,6408,5121,new Uint8Array(h.data.buffer));this._renderScreenshotOverlay(g,h,n({},a,{region:null}));a=e.createEmptyImageData(d.width,d.height,g);return e.resampleHermite(h,a,!0,f.region.x,c-(f.region.y+f.region.height),f.region.width,f.region.height)};a.prototype._readbackScreenshotImmediate=function(a){var b=a.framebufferHeight,c=a.region,
d=this._ensureScreenshotEncodeCanvas(),f=e.createEmptyImageData(c.width,c.height,d);this._rctx.gl.readPixels(c.x,b-(c.y+c.height),c.width,c.height,6408,5121,new Uint8Array(f.data.buffer));this._renderScreenshotOverlay(d,f,a);return f};a.prototype._renderScreenshot=function(a,b){var e=null,d=a.viewCamera,f=b.framebufferWidth,g=b.framebufferHeight,h=!1,k=a.frameHasSlicePlane&&b.disableSlice;if(k=f!==d.fullWidth||g!==d.fullHeight||k){var l=d.clone();l.fullWidth=f;l.fullHeight=g;l.pixelRatio=b.pixelRatio;
e=d.fovX-l.fovX;h=d.fovY-l.fovY;0>e&&e<h?l.fovX=d.fovX:0>h&&h<e&&(l.fovY=d.fovY);a.drapedRenderer.forceUpdate&&a.drapedRenderer.forceUpdate(l);h=!0;e=new c(this._rctx,{width:l.fullWidth,height:l.fullHeight,colorTarget:0,depthStencilTarget:3});this._renderScene(e,l,b.disableSlice)}b=this._readbackScreenshot(b);if(k&&!this._rctx.contextAttributes.alpha)for(k=3;k<b.data.length;k+=4)b.data[k]=255;e&&e.dispose();this._rctx.bindFramebuffer(null);h&&a.drapedRenderer.forceUpdate&&a.drapedRenderer.forceUpdate(d);
return b};a.prototype._ensureScreenshotEncodeCanvas=function(){this._screenshotEncodeCanvas||(this._screenshotEncodeCanvas=document.createElement("canvas"));return this._screenshotEncodeCanvas};return a}(g.AutoDisposable);d.ScreenshotManager=r})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(r,d,n,l,k){function b(a,b){var d=a||{},f=d.format,g=d.quality,h=d.rotation,d=d.disableSlice,
p=!a.ignorePadding&&b.padding||t,x;x=b.width-p.left-p.right;b=b.height-p.top-p.bottom;var y=p=0,n=x,r=b;if(a&&a.area){var p=Math.floor(a.area.x)||0,y=Math.floor(a.area.y)||0,L=null!=a.area.width?Math.floor(a.area.width):null,K=null!=a.area.height?Math.floor(a.area.height):null,n=n-p,r=r-y;null!=L&&null!=K?(n=Math.min(n,L),r=Math.min(r,K)):null==L&&null!=K?(L=Math.min(n,L),r*=L/n,n=L):null!=L&&null==K&&(L=Math.min(r,K),n*=L/r,r=L)}p=c({x:p,y:y,width:n,height:r},a);y=Math.floor(Math.max(p.x,0));n=Math.floor(Math.max(p.y,
0));x={x:y,y:n,width:Math.floor(Math.min(p.width,x-y)),height:Math.floor(Math.min(p.height,b-n))};b=x.width/x.height;p=p.width/p.height;p!==b&&(p>b?(b=Math.floor(x.width/p),x={x:x.x,y:Math.floor(x.y+(x.height-b)/2),width:x.width,height:b}):(b=Math.floor(x.height*p),x={x:Math.floor(x.x+(x.width-b)/2),y:x.y,width:b,height:x.height}));b=e(a,x);a=b.width;b=b.height;a:switch(f){case "png":case "jpg":case "jpeg":break a;case null:case void 0:f=q;break a;default:l.neverReached(f),f=q}p=v[f];g=k.clamp(null!=
g?g:p,0,100);return{format:f,quality:g,area:x,width:a,height:b,rotation:h,disableSlice:d||!1}}function h(a,b){return a.toDataURL(p[b.format],b.quality/100)}function g(a,b,c){c||(f||(f=document.createElement("canvas"),f.width=1,f.height=1),c=f);return c.getContext("2d").createImageData(a,b)}function e(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/
b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function c(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=b;d.toRenderSettings=function(a,c){var e=b(a,c),d=e.area,f=e.width/d.width,g=!a.ignorePadding&&c.padding||t,h=g.left+g.right,k=g.top+g.bottom;
return{framebufferWidth:Math.floor((c.width-h)*f+h),framebufferHeight:Math.floor((c.height-k)*f+k),region:{x:Math.floor(d.x*f)+g.left,y:Math.floor(d.y*f)+g.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:e.disableSlice}};d.encodeResult=function(a,b,c,e){if(e.premultipliedAlpha)for(var d=a.data,f=d.length,g=0;g<f;g+=4){var k=d[g+3];0<k&&(k/=255,d[g+0]/=k,d[g+1]/=k,d[g+2]/=k)}c.width=a.width;c.height=a.height;
d=c.getContext("2d");d.putImageData(a,0,0);e.flipY&&(d.save(),d.globalCompositeOperation="copy",d.scale(1,-1),d.translate(0,-d.canvas.height),d.drawImage(d.canvas,0,0),d.restore());a=d.getImageData(0,0,a.width,a.height);b=h(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};d.toDataUrl=h;d.createEmptyImageData=function(b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(a)try{return new ImageData(b,c)}catch(m){a=!1}return g(b,c,e)};d.wrapImageData=function(b,c,e,d){if(!c||
!e)throw Error("Cannot construct image data without dimensions");if(a)try{return new ImageData(b,c,e)}catch(u){a=!1}c=g(c,e,d);c.data.set(b,0);return c};d.resampleHermite=function(a,b,c,e,d,f,g,h){void 0===e&&(e=0);void 0===d&&(d=0);void 0===f&&(f=a.width-e);void 0===g&&(g=a.height-d);void 0===h&&(h=!1);var k=a.data,l=b.width,m=b.height,p=b.data;f/=l;g/=m;var u=Math.ceil(f/2),q=Math.ceil(g/2);a=a.width;for(var t=0;t<m;t++)for(var w=0;w<l;w++){for(var z=4*(w+(h?m-t-1:t)*l),x=0,y=0,n=0,v=0,B=0,C=0,
r=(t+.5)*g,U=Math.floor(t*g);U<(t+1)*g;U++)for(var X=Math.abs(r-(U+.5))/q,ca=(w+.5)*f,X=X*X,G=Math.floor(w*f);G<(w+1)*f;G++){var Y=Math.abs(ca-(G+.5))/u,Y=Math.sqrt(X+Y*Y);if(!(1<=Y)){var Y=2*Y*Y*Y-3*Y*Y+1,la=4*(e+G+(d+U)*a),C=C+Y*k[la+3],y=y+Y;!c&&255>k[la+3]&&(Y=Y*k[la+3]/255);n+=Y*k[la];v+=Y*k[la+1];B+=Y*k[la+2];x+=Y}}p[z]=n/x;p[z+1]=v/x;p[z+2]=B/x;p[z+3]=C/y}return b};d.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;var c=a.framebufferHeight,e=a.region,d=Math.min(8,
2048/Math.max(b,c));return 1.5>d?a:n({},a,{framebufferWidth:Math.round(b*d),framebufferHeight:Math.round(c*d),pixelRatio:a.pixelRatio*d,resample:{region:{x:Math.round(e.x*d),y:Math.round(e.y*d),width:Math.round(e.width*d),height:Math.round(e.height*d)},width:b,height:c}})};var f=null,a=!0,p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q="jpg",v={png:100,jpg:98,jpeg:98},t={top:0,right:0,bottom:0,left:0}})},"esri/views/3d/webgl-engine/shaders/globalOptions":function(){define(["require","exports",
"../../../webgl/programUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.glslifyGlobalOptions=function(d){return n.glslifyDefineMap({VIEWING_MODE:{value:d.viewingMode,options:{global:"VIEWING_MODE_GLOBAL",local:"VIEWING_MODE_LOCAL"}}})}})},"esri/views/webgl/RenderingContext":function(){define("require exports ../../core/has ./enums ./InstanceCounter ./renderState ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(r,d,n,l,k,b,h,g){return function(){function e(c,
e){var a=this;this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange=
{zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap=
{};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=h.default(c)?"webgl2":"webgl";this.gl=c;c instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=g.loadCapabilities(c,e);c=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:c[0],y:c[1],width:c[2],height:c[3]};c=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:c?this.gl.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};this._stateTracker=new b.StateTracker({setBlending:function(b){b?(a.setBlendingEnabled(!0),a.setBlendEquationSeparate(b.opRgb,b.opAlpha),a.setBlendFunctionSeparate(b.srcRgb,b.dstRgb,b.srcAlpha,b.dstAlpha),b=b.color,a.setBlendColor(b.r,b.g,b.b,b.a)):a.setBlendingEnabled(!1)},setCulling:function(b){b?
(a.setFaceCullingEnabled(!0),a.setCullFace(b.face),a.setFrontFace(b.mode)):a.setFaceCullingEnabled(!1)},setPolygonOffset:function(b){b?(a.setPolygonOffsetFillEnabled(!0),a.setPolygonOffset(b.factor,b.units)):a.setPolygonOffsetFillEnabled(!1)},setDepthTest:function(b){b?(a.setDepthTestEnabled(!0),a.setDepthFunction(b.func)):a.setDepthTestEnabled(!1)},setStencilTest:function(b){if(b){a.setStencilTestEnabled(!0);var c=b.function;a.setStencilFunction(c.func,c.ref,c.mask);b=b.operation;a.setStencilOp(b.fail,
b.zFail,b.zPass)}else a.setStencilTestEnabled(!1)},setDepthWrite:function(b){b?(a.setDepthWriteEnabled(!0),a.setDepthRange(b.zNear,b.zFar)):a.setDepthWriteEnabled(!1)},setColorWrite:function(b){b?a.setColorMask(b.r,b.g,b.b,b.a):a.setColorMask(!1,!1,!1,!1)},setStencilWrite:function(b){b?a.setStencilWriteMask(b.mask):a.setStencilWriteMask(0)}});this.enforceState()}Object.defineProperty(e.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});e.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};e.prototype.setPipelineState=function(b){this._stateTracker.setPipeline(b)};e.prototype.setBlendingEnabled=function(b){this._blendEnabled!==b&&(!0===b?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=b,this._stateTracker.invalidateBlending())};
e.prototype.setBlendColor=function(b,e,a,d){if(b!==this._blendColorState.r||e!==this._blendColorState.g||a!==this._blendColorState.b||d!==this._blendColorState.a)this.gl.blendColor(b,e,a,d),this._blendColorState.r=b,this._blendColorState.g=e,this._blendColorState.b=a,this._blendColorState.a=d,this._stateTracker.invalidateBlending()};e.prototype.setBlendFunction=function(b,e){if(b!==this._blendFunctionState.srcRGB||e!==this._blendFunctionState.dstRGB)this.gl.blendFunc(b,e),this._blendFunctionState.srcRGB=
b,this._blendFunctionState.srcAlpha=b,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e,this._stateTracker.invalidateBlending()};e.prototype.setBlendFunctionSeparate=function(b,e,a,d){if(this._blendFunctionState.srcRGB!==b||this._blendFunctionState.srcAlpha!==a||this._blendFunctionState.dstRGB!==e||this._blendFunctionState.dstAlpha!==d)this.gl.blendFuncSeparate(b,e,a,d),this._blendFunctionState.srcRGB=b,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=
d,this._stateTracker.invalidateBlending()};e.prototype.setBlendEquation=function(b){this._blendEquationState.mode!==b&&(this.gl.blendEquation(b),this._blendEquationState.mode=b,this._blendEquationState.modeAlpha=b,this._stateTracker.invalidateBlending())};e.prototype.setBlendEquationSeparate=function(b,e){if(this._blendEquationState.mode!==b||this._blendEquationState.modeAlpha!==e)this.gl.blendEquationSeparate(b,e),this._blendEquationState.mode=b,this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending()};
e.prototype.setColorMask=function(b,e,a,d){if(this._colorMaskState.r!==b||this._colorMaskState.g!==e||this._colorMaskState.b!==a||this._colorMaskState.a!==d)this.gl.colorMask(b,e,a,d),this._colorMaskState.r=b,this._colorMaskState.g=e,this._colorMaskState.b=a,this._colorMaskState.a=d,this._stateTracker.invalidateColorWrite()};e.prototype.setClearColor=function(b,e,a,d){if(this._clearColor.r!==b||this._clearColor.g!==e||this._clearColor.b!==a||this._clearColor.a!==d)this.gl.clearColor(b,e,a,d),this._clearColor.r=
b,this._clearColor.g=e,this._clearColor.b=a,this._clearColor.a=d};e.prototype.setFaceCullingEnabled=function(b){this._polygonCullingEnabled!==b&&(!0===b?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=b,this._stateTracker.invalidateCulling())};e.prototype.setPolygonOffsetFillEnabled=function(b){this._polygonOffsetFillEnabled!==b&&(!0===b?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=
b,this._stateTracker.invalidatePolygonOffset())};e.prototype.setPolygonOffset=function(b,e){if(this._polygonOffset[0]!==b||this._polygonOffset[1]!==e)this._polygonOffset[0]=b,this._polygonOffset[1]=e,this.gl.polygonOffset(b,e),this._stateTracker.invalidatePolygonOffset()};e.prototype.setCullFace=function(b){this._cullFace!==b&&(this.gl.cullFace(b),this._cullFace=b,this._stateTracker.invalidateCulling())};e.prototype.setFrontFace=function(b){this._frontFace!==b&&(this.gl.frontFace(b),this._frontFace=
b,this._stateTracker.invalidateCulling())};e.prototype.setScissorTestEnabled=function(b){this._scissorTestEnabled!==b&&(!0===b?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=b)};e.prototype.setScissorRect=function(b,e,a,d){if(this._scissorRect.x!==b||this._scissorRect.y!==e||this._scissorRect.width!==a||this._scissorRect.height!==d)this.gl.scissor(b,e,a,d),this._scissorRect.x=b,this._scissorRect.y=e,this._scissorRect.width=a,this._scissorRect.height=
d};e.prototype.setDepthTestEnabled=function(b){this._depthTestEnabled!==b&&(!0===b?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=b,this._stateTracker.invalidateDepthTest())};e.prototype.setClearDepth=function(b){this._clearDepth!==b&&(this.gl.clearDepth(b),this._clearDepth=b)};e.prototype.setDepthFunction=function(b){this._depthFunction!==b&&(this.gl.depthFunc(b),this._depthFunction=b,this._stateTracker.invalidateDepthTest())};e.prototype.setDepthWriteEnabled=
function(b){this._depthWriteEnabled!==b&&(this.gl.depthMask(b),this._depthWriteEnabled=b,this._stateTracker.invalidateDepthWrite())};e.prototype.setDepthRange=function(b,e){if(this._depthRange.zNear!==b||this._depthRange.zFar!==e)this.gl.depthRange(b,e),this._depthRange.zNear=b,this._depthRange.zFar=e,this._stateTracker.invalidateDepthWrite()};e.prototype.setStencilTestEnabled=function(b){this._stencilTestEnabled!==b&&(!0===b?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),
this._stencilTestEnabled=b,this._stateTracker.invalidateStencilTest())};e.prototype.setClearStencil=function(b){b!==this._clearStencil&&(this.gl.clearStencil(b),this._clearStencil=b)};e.prototype.setStencilFunction=function(b,e,a){if(this._stencilFunction.func!==b||this._stencilFunction.ref!==e||this._stencilFunction.mask!==a)this.gl.stencilFunc(b,e,a),this._stencilFunction.face=1032,this._stencilFunction.func=b,this._stencilFunction.ref=e,this._stencilFunction.mask=a,this._stateTracker.invalidateStencilTest()};
e.prototype.setStencilFunctionSeparate=function(b,e,a,d){if(this._stencilFunction.face!==b||this._stencilFunction.func!==e||this._stencilFunction.ref!==a||this._stencilFunction.mask!==d)this.gl.stencilFuncSeparate(b,e,a,d),this._stencilFunction.face=b,this._stencilFunction.func=e,this._stencilFunction.ref=a,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};e.prototype.setStencilWriteMask=function(b){this._stencilWriteMask!==b&&(this.gl.stencilMask(b),this._stencilWriteMask=
b,this._stateTracker.invalidateStencilWrite())};e.prototype.setStencilOp=function(b,e,a){if(this._stencilOperation.fail!==b||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==a)this.gl.stencilOp(b,e,a),this._stencilOperation.face=1032,this._stencilOperation.fail=b,this._stencilOperation.zFail=e,this._stencilOperation.zPass=a,this._stateTracker.invalidateStencilTest()};e.prototype.setStencilOpSeparate=function(b,e,a,d){if(this._stencilOperation.face!==b||this._stencilOperation.fail!==
e||this._stencilOperation.zFail!==a||this._stencilOperation.zPass!==d)this.gl.stencilOpSeparate(b,e,a,d),this._stencilOperation.face=b,this._stencilOperation.face=b,this._stencilOperation.fail=e,this._stencilOperation.zFail=a,this._stencilOperation.zPass=d,this._stateTracker.invalidateStencilTest()};e.prototype.setActiveTexture=function(b){var c=this._activeTextureUnit;0<=b&&b!==this._activeTextureUnit&&(this.gl.activeTexture(l.BASE_TEXTURE_UNIT+b),this._activeTextureUnit=b);return c};e.prototype.clear=
function(b){b&&this.gl.clear(b)};e.prototype.clearSafe=function(b){b&&(b&16384&&this.setColorMask(!0,!0,!0,!0),b&256&&this.setDepthWriteEnabled(!0),b&1024&&this.setStencilWriteMask(255),this.gl.clear(b))};e.prototype.drawArrays=function(b,e,a){this.gl.drawArrays(b,e,a)};e.prototype.drawElements=function(b,e,a,d){5123===a?this.gl.drawElements(b,e,a,d):5125===a&&this.gl.drawElements(b,e,a,d)};e.prototype.logIno=function(){};Object.defineProperty(e.prototype,"capabilities",{get:function(){return this._capabilities},
enumerable:!0,configurable:!0});e.prototype.setViewport=function(b,e,a,d){var c=this._viewport;if(c.x!==b||c.y!==e||c.width!==a||c.height!==d)c.x=b,c.y=e,c.width=a,c.height=d,this.gl.viewport(b,e,a,d)};e.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};e.prototype.bindProgram=function(b){b?this._activeShaderProgram!==b&&(b.initialize(),this.gl.useProgram(b.glName),this._activeShaderProgram=b):(this.gl.useProgram(null),
this._activeShaderProgram=null)};e.prototype.bindTexture=function(b,d){void 0===d&&(d=0);-1===e._MAX_TEXTURE_IMAGE_UNITS&&(e._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(d>=e._MAX_TEXTURE_IMAGE_UNITS||0>d)&&console.error("Input texture unit is out of range of available units!");var a=this._textureUnitMap[d];this.setActiveTexture(d);null==b||null==b.glName?(null!=a&&(this.gl.bindTexture(a.descriptor.target,null),a.setBoundToUnit(d,!1)),this._textureUnitMap[d]=null):
a&&a.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.setBoundToUnit(d,!0),b.applyChanges(),this._textureUnitMap[d]=b)};e.prototype.bindFramebuffer=function(b){b?this._activeFramebuffer!==b&&(b.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b.glName),this._activeFramebuffer=b):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};e.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=e._bindBuffer(this.gl,
b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=e._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};e.prototype.bindRenderbuffer=function(b){var c=this.gl;b||(c.bindRenderbuffer(c.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==b&&(c.bindRenderbuffer(c.RENDERBUFFER,b.glName),this._activeRenderbuffer=b)};e.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=e._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=
e._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};e.prototype.bindVAO=function(b){b?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===b.id||(b.bind(),this._activeVertexArrayObject=b):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};e.prototype.getBoundTexture=function(b){return this._textureUnitMap[b]};e.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};e.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};
e.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var b=0;b<this.parameters.maxTextureImageUnits;b++)this.bindTexture(null,b);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);
this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};e.prototype.enforceState=
function(){var b=this.gl,e=this._capabilities.vao;e&&e.bindVertexArray(null);for(var a=0;a<this.parameters.maxVertexAttributes;a++)b.disableVertexAttribArray(a);this._activeVertexBuffer?b.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):b.bindBuffer(34962,null);this._activeIndexBuffer?b.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):b.bindBuffer(34963,null);if(e&&this._activeVertexArrayObject){if(e=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(e)}b.bindFramebuffer(b.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);b.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);b.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);b.bindRenderbuffer(b.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?b.enable(this.gl.BLEND):b.disable(this.gl.BLEND);
b.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);b.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);b.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);b.clearDepth(this._clearDepth);b.clearStencil(this._clearStencil);b.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);
b.cullFace(this._cullFace);b.depthFunc(this._depthFunction);b.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);b.depthMask(this._depthWriteEnabled);b.frontFace(this._frontFace);b.lineWidth(1);!0===this._polygonCullingEnabled?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL);
b.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST);b.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);b.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);b.stencilMask(this._stencilWriteMask);
for(e=0;e<this.parameters.maxTextureImageUnits;e++)b.activeTexture(l.BASE_TEXTURE_UNIT+e),b.bindTexture(3553,null),(a=this._textureUnitMap[e])&&b.bindTexture(a.descriptor.target,a.glName);b.activeTexture(l.BASE_TEXTURE_UNIT+this._activeTextureUnit);b.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};e._bindBuffer=function(b,e,a,d){if(!e)return b.bindBuffer(a,null),null;if(d===e)return d;b.bindBuffer(a,e.glName);return e};e._MAX_TEXTURE_IMAGE_UNITS=-1;return e}()})},
"esri/views/webgl/enums":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/InstanceCounter":function(){define(["require","exports"],function(r,d){return function(){function d(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}d.prototype.incrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;
break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};d.prototype.decrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};
d.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount);console.log("Renderbuffers: "+this._instanceCount.renderBufferCount)};return d}()})},"esri/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./LoseContext ./VertexArrayObjects".split(" "),
function(r,d,n,l,k,b,h){function g(b,c,d,a,g){if(a&&k.default(b))return!0;if(c[d])return!1;for(c=0;c<g.length;c++)if(b.getExtension(g[c]))return!0;return!1}Object.defineProperty(d,"__esModule",{value:!0});d.loadCapabilities=function(e,c){var d=c&&c.disabledExtensions||{};c=c&&c.debugWebGLExtensions||{};g(e,d,"standardDerivatives",!0,["OES_standard_derivatives"]);var a=l.load(e),p=h.load(e,d),q;q=d.compressedTextureS3TC?null:(q=e.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:q.COMPRESSED_RGB_S3TC_DXT1_EXT,
COMPRESSED_RGBA_S3TC_DXT1:q.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:q.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:q.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var v;v=d.textureFilterAnisotropic?null:(v=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:v.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:v.TEXTURE_MAX_ANISOTROPY_EXT}:null;
var t=n.load(e,d),y;k.default(e)?y={textureFloat:!0,textureFloatLinear:!d.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!d.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:e.HALF_FLOAT}:e instanceof WebGLRenderingContext?(y=!d.textureHalfFloat&&e.getExtension("OES_texture_half_float"),y={textureFloat:!d.textureFloat&&!!e.getExtension("OES_texture_float"),textureFloatLinear:!d.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),
textureHalfFloat:!!y,textureHalfFloatLinear:!d.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:y?y.HALF_FLOAT_OES:void 0}):y=void 0;var x;if(k.default(e)){x=!d.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float");var w=!d.colorBufferFloat&&e.getExtension("EXT_color_buffer_float");x=x||w?{textureFloat:!!w,textureHalfFloat:!!x,R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F,RGB16F:e.RGB16F}:
null}else e instanceof WebGLRenderingContext?(x=!d.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),w=!d.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float"),x=x||w?{textureFloat:!!w,textureHalfFloat:!!x,RGBA16F:x?x.RGBA16F_EXT:void 0,RGB16F:x?x.RGB16F_EXT:void 0,RGBA32F:w?w.RGBA32F_EXT:void 0}:null):x=void 0;w=k.default(e)?{MIN:e.MIN,MAX:e.MAX}:d.blendMinMax?null:(w=e.getExtension("EXT_blend_minmax"))?{MIN:w.MIN_EXT,MAX:w.MAX_EXT}:null;return{instancing:a,vao:p,compressedTextureS3TC:q,
textureFilterAnisotropic:v,disjointTimerQuery:t,textureFloat:y,colorBufferFloat:x,blendMinMax:w,depthTexture:g(e,d,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:!0,shaderTextureLOD:g(e,d,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),fragDepth:g(e,d,"fragDepth",!0,["EXT_frag_depth"]),loseContext:b.load(e,c)}}})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(r,
d,n){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(d,k){if(k.disjointTimerQuery)return null;var b=d.getExtension("EXT_disjoint_timer_query")||d.getExtension("EXT_disjoint_timer_query_webgl2");return b?n.default(d)?{createQuery:function(){return d.createQuery()},resultAvailable:function(b){return d.getQueryParameter(b,d.QUERY_RESULT_AVAILABLE)},getResult:function(b){return d.getQueryParameter(b,d.QUERY_RESULT)},disjoint:function(){return d.getParameter(b.GPU_DISJOINT_EXT)},beginTimeElapsed:function(h){return d.beginQuery(b.TIME_ELAPSED_EXT,
h)},endTimeElapsed:function(){return d.endQuery(b.TIME_ELAPSED_EXT)},createTimestamp:function(d){return b.queryCounterEXT(d,b.TIMESTAMP_EXT)},timestampBits:function(){return d.getQuery(b.TIMESTAMP_EXT,b.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return b.createQueryEXT()},resultAvailable:function(d){return b.getQueryObjectEXT(d,b.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(d){return b.getQueryObjectEXT(d,b.QUERY_RESULT_EXT)},disjoint:function(){return d.getParameter(b.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(d){return b.beginQueryEXT(b.TIME_ELAPSED_EXT,d)},endTimeElapsed:function(){return b.endQueryEXT(b.TIME_ELAPSED_EXT)},createTimestamp:function(d){return b.queryCounterEXT(d,b.TIMESTAMP_EXT)},timestampBits:function(){return b.getQueryEXT(b.TIMESTAMP_EXT,b.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(d){return n.default(d)?
{drawArraysInstanced:d.drawArraysInstanced.bind(d),drawElementsInstanced:d.drawElementsInstanced.bind(d),vertexAttribDivisor:d.vertexAttribDivisor.bind(d)}:(d=d.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:d.drawArraysInstancedANGLE.bind(d),drawElementsInstanced:d.drawElementsInstancedANGLE.bind(d),vertexAttribDivisor:d.vertexAttribDivisorANGLE.bind(d)}:null}})},"esri/views/webgl/capabilities/LoseContext":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,
"__esModule",{value:!0});d.load=function(d,l){var k=l.loseContext&&d.getExtension("WEBGL_lose_context");return k?{loseRenderingContext:function(){return k.loseContext()}}:null}})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.load=function(d,k){return n.default(d)?{createVertexArray:d.createVertexArray.bind(d),deleteVertexArray:d.deleteVertexArray.bind(d),bindVertexArray:d.bindVertexArray.bind(d)}:
k.vao?null:(d=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:d.createVertexArrayOES.bind(d),deleteVertexArray:d.deleteVertexArrayOES.bind(d),bindVertexArray:d.bindVertexArrayOES.bind(d)}:null}})},"esri/views/3d/layers/graphics/Graphics3DSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ./ElevationContext ./featureExpressionInfoUtils ./graphicUtils ./Loadable ./symbolComplexity".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x){function w(a,b){a=null!=a?b.attributes[a]:0;return null!=a&&isFinite(a)?a:0}Object.defineProperty(d,"__esModule",{value:!0});var m=new q,u=g.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayer");r=function(d){function g(a,b,c,e){var f=d.call(this)||this;f.complexity=null;f.logger=u;f._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0};f.symbol=a;f.symbolLayer=b;f._context=c;f._symbolLayerOrder=c.layerOrder;f._symbolLayerOrderDelta=
c.layerOrderDelta;f._elevationContext=new q;f._material=null;f.complexity=f.computeComplexity();f._geometryCreationWarningHandle=null;f._updateDrivenProperties(e);f._updateElevationContext();f._logWarning;return f}n(g,d);g.prototype.getCachedSize=function(){return null};g.prototype._logWarning=function(a){u.warn(a)};g.prototype._logGeometryCreationWarnings=function(a,b,c,e){var d=this;if(null==this._geometryCreationWarningHandle){var g=a.geometryData&&a.geometryData.polygons;e+=" geometry failed to be created";
var h=null;a.projectionSuccess?!b.length||1===b.length&&!b[0].length?h=e+" (no "+c+" were defined)":Array.isArray(b)&&Array.isArray(b[0])?b.some(function(a){return 1===a.length})?h=e+" ("+c+" should contain at least 2 vertices)":g&&0===g.length&&"rings"===c&&(h=e+" (filled "+c+" should use clockwise winding - try reversing the order of vertices)"):h=e+" ("+c+" should be defined as a 2D array)":h=e+" (failed to project geometry to view spatial reference)";h&&(this._geometryCreationWarningHandle=f.schedule(function(){return d._onNextTick()}),
u.warn(h))}};g.prototype._onNextTick=function(){this._geometryCreationWarningHandle=null};g.prototype._validateGeometry=function(a){return"point"!==a.type||e.isFinite(a.x)&&e.isFinite(a.y)?!0:(u.warn("point coordinate is not a valid number, graphic skipped"),!1)};g.prototype._defaultElevationInfoNoZ=function(){return z};g.prototype._defaultElevationInfoZ=function(){return B};g.prototype._updateElevationContext=function(){this._elevationContext.setDefaults();var a=this._context.layer.elevationInfo;
a&&this._elevationContext.mixinApi(a);(a=this.symbolLayer&&this.symbolLayer.elevationInfo)&&this._elevationContext.mixinApi(a);this._elevationContext.featureExpressionInfoContext=this._context.featureExpressionInfoContext};g.prototype.getDefaultElevationInfo=function(a){return a.hasZ?this._defaultElevationInfoZ():this._defaultElevationInfoNoZ()};g.prototype.getGeometryElevationMode=function(a,b){void 0===b&&(b=this.getDefaultElevationInfo(a));return this._elevationContext.mode||b.mode};g.prototype.getGraphicElevationContext=
function(a){var b=c.expect(a.geometry),e=this.getDefaultElevationInfo(b);m.setUnit(null!=this._elevationContext.unit?this._elevationContext.unit:e.unit);m.mode=this.getGeometryElevationMode(b,e);m.setOffsetMeters(null!=this._elevationContext.meterUnitOffset?this._elevationContext.meterUnitOffset:e.offset);m.featureExpressionInfoContext=this._elevationContext.featureExpressionInfoContext;this._elevationOptions.supportsOnTheGround||"on-the-ground"!==m.mode||(m.mode="relative-to-ground",m.setOffsetMeters(0),
m.featureExpressionInfoContext=v.zeroContext);a=v.createFeature(a,this._context.layer);v.setContextFeature(m.featureExpressionInfoContext,a);return m};g.prototype.prepareSymbolLayerPatch=function(a){};g.prototype.updateGeometry=function(a,b){return!1};g.prototype._getDrapedZ=function(){return-2};g.prototype._updateDrivenProperties=function(a){var b={color:!1,opacity:!1,size:!1};a||(a=this._context.renderer)&&"visualVariables"in a&&a.visualVariables&&a.visualVariables.forEach(function(a){switch(a.type){case "color":b.color=
!0;if(a.stops)for(var c=0;c<a.stops.length;c++){var e=a.stops[c].color;e&&(Array.isArray(e)&&3<e.length&&255!==e[3]||void 0!==e.a&&255!==e.a)&&(b.opacity=!0)}break;case "opacity":b.opacity=!0;break;case "size":b.size=!0}});this._drivenProperties=b};g.prototype._isPropertyDriven=function(a){return this._drivenProperties[a]};g.prototype._getLayerOpacity=function(){if(this._context.layerView&&"fullOpacity"in this._context.layerView)return this._context.layerView.fullOpacity;var a=this._context.layer.opacity;
return null==a?1:a};g.prototype._getCombinedOpacity=function(a,b){void 0===b&&(b=C);var e;e=1*this._getLayerOpacity();if(this._isPropertyDriven("opacity"))return e;c.isSome(a)?e*=a.a:b.hasIntrinsicColor||(e=0);return e};g.prototype._getCombinedOpacityAndColor=function(e,d){void 0===d&&(d=C);d=this._getCombinedOpacity(e,d);if(this._isPropertyDriven("color"))return t.mixinColorAndOpacity(null,d);e=c.isSome(e)?b.toUnitRGB(e):a.vec3f64.ONES;return t.mixinColorAndOpacity(e,d)};g.prototype._getVertexOpacityAndColor=
function(a,b,c){var e=this._isPropertyDriven("color")?a.color:null;a=this._isPropertyDriven("opacity")?a.opacity:null;e=t.mixinColorAndOpacity(e,a);c&&(e[0]*=c,e[1]*=c,e[2]*=c,e[3]*=c);return b?new b(e):e};g.prototype._getStageIdHint=function(){return this._context.layer.id+"_symbol"};g.prototype.isFastUpdatesEnabled=function(){return this._fastUpdates&&this._fastUpdates.enabled};g.prototype.updateSymbolLayerOrder=function(a,b){this._symbolLayerOrder=a;this._symbolLayerOrderDelta=b};g.prototype.computeComplexity=
function(){return x.defaultSymbolLayerComplexity(this.symbol,this.symbolLayer)};g.prototype.setDrawOrder=function(a,b,c){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a,c.add(this._material.id))};g.prototype.destroy=function(){this.abortLoad();this._geometryCreationWarningHandle&&(this._geometryCreationWarningHandle.remove(),this._geometryCreationWarningHandle=null)};g.prototype.globalPropertyChanged=function(a,b,c){switch(a){case "opacity":return this.layerOpacityChanged();
case "elevationInfo":return a=this._elevationContext.mode,this._updateElevationContext(),this.layerElevationInfoChanged(b,c,a);case "slicePlaneEnabled":return this.slicePlaneEnabledChanged(b,c);case "pixelRatio":return this.pixelRatioChanged(b,c);default:return h.neverReachedSilent(a),!1}};g.prototype.updateGraphics3DGraphicElevationInfo=function(a,b,c){var e=this,d=!0;a.forEach(function(a){var f=b(a);f?(a=e.getGraphicElevationContext(a.graphic),f.needsElevationUpdates=c(a.mode),f.elevationContext.set(a)):
d=!1});return d};g.prototype.applyRendererDiff=function(a,b){return!1};g.prototype.getFastUpdateAttrValues=function(a){if(!this._fastUpdates.enabled)return null;var b=this._fastUpdates.visualVariables,c=b.size?w(b.size.field,a):0,e=b.color?w(b.color.field,a):0;a=b.opacity?w(b.opacity.field,a):0;return p.vec4f64.fromValues(c,e,a,0)};return g}(y.Loadable);d.Graphics3DSymbolLayer=r;d.getAttributeValue=w;var z={mode:"on-the-ground",offset:0,unit:"meters"},B={mode:"absolute-height",offset:0,unit:"meters"},
C={hasIntrinsicColor:!1};d.default=r})},"esri/views/3d/layers/graphics/Loadable":function(){define(["require","exports","../../../../core/tsSupport/generatorHelper","../../../../core/tsSupport/awaiterHelper","../../../../core/promiseUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(){this._abortController=null;this._loadStatus=0;this.logger=this._loader=null}Object.defineProperty(b.prototype,"loadStatus",{get:function(){return this._loadStatus},enumerable:!0,
configurable:!0});b.prototype.load=function(){return l(this,void 0,void 0,function(){var b=this;return n(this,function(d){this._loader||(this._abortController=k.createAbortController(),this._loader=this.doLoad(this._abortController.signal).then(function(){b._abortController=null;b._loadStatus=1},function(e){b._abortController=null;b._loadStatus=2;!k.isAbortError(e)&&b.logger&&e.message&&b.logger.warn(e.message);throw e;}));return[2,this._loader]})})};b.prototype.abortLoad=function(){this._abortController?
(this._abortController.abort(),this._abortController=null):0===this._loadStatus&&(this._loadStatus=2);this._loader=null};return b}();d.Loadable=r})},"esri/views/3d/layers/graphics/symbolComplexity":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/compilerUtils ../../../../core/has ../../../../core/maybe ../../../../symbols/support/ObjectSymbol3DLayerResource ./primitiveObjectSymbolUtils ../../webgl-engine/lib/Util ../../webgl-engine/lib/lodRendering/LodResources".split(" "),
function(r,d,n,l,k,b,h,g,e,c){function f(a){for(var b=0,c=0,e=!1,d={bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}},f=0;f<a.length;f++){var g=a[f];g&&(b+=g.primitivesPerFeature,c+=g.primitivesPerCoordinate,d.bytesPerFeature+=g.memory.bytesPerFeature,d.bytesPerCoordinate+=g.memory.bytesPerCoordinate,d.draped.bytesPerFeature+=g.memory.bytesPerFeature,d.draped.bytesPerCoordinate+=g.memory.bytesPerCoordinate,e=e||g.estimated)}return{primitivesPerFeature:b,primitivesPerCoordinate:c,
estimated:e,memory:d}}function a(a,c){var e=p(a,c);switch(c.type){case "extrude":return{primitivesPerFeature:-4,primitivesPerCoordinate:4,estimated:!1,memory:e};case "fill":return"mesh-3d"===a.type?{primitivesPerFeature:0,primitivesPerCoordinate:0,estimated:!1,memory:e}:b.isSome(c.outline)&&0<c.outline.size?{primitivesPerFeature:-4,primitivesPerCoordinate:3,estimated:!1,memory:e}:{primitivesPerFeature:-2,primitivesPerCoordinate:1,estimated:!1,memory:e};case "water":return{primitivesPerFeature:-2,
primitivesPerCoordinate:1,estimated:!1,memory:e};case "line":return{primitivesPerFeature:-2,primitivesPerCoordinate:2,estimated:!1,memory:e};case "object":return c.resource&&c.resource.href?{primitivesPerFeature:16,primitivesPerCoordinate:0,estimated:!0,memory:e}:n({},q(c.resource&&c.resource.primitive||h.defaultPrimitive),{memory:e});case "path":return{primitivesPerFeature:-4,primitivesPerCoordinate:20,estimated:!1,memory:e};case "text":case "icon":return{primitivesPerFeature:2,primitivesPerCoordinate:0,
estimated:!1,memory:e};default:l.neverReached(c)}}function p(a,c){a="point-3d"===a.type;switch(c.type){case "extrude":return c.edges&&0<c.edges.size?d.memoryEstimators.EXTRUDE_EDGES:d.memoryEstimators.EXTRUDE;case "fill":return b.isSome(c.outline)&&0<c.outline.size?d.memoryEstimators.FILL_OUTLINE:d.memoryEstimators.FILL;case "water":return d.memoryEstimators.FILL;case "line":return d.memoryEstimators.LINE;case "path":return d.memoryEstimators.PATH;case "object":return k("enable-feature:skallweit/lod-rendering")?
a?d.memoryEstimators.OBJECT_POINT_LOD:d.memoryEstimators.OBJECT_POLYGON_LOD:a?d.memoryEstimators.OBJECT_POINT:d.memoryEstimators.OBJECT_POLYGON;case "icon":case "text":return a?d.memoryEstimators.ICON_POINT:d.memoryEstimators.ICON_POLYGON;default:l.neverReached(c)}}function q(a){var b=v[a];if(b)return b;k("enable-feature:skallweit/lod-rendering")?(b=g.primitiveLodResources(a,null,null),b=c.geometriesFromLodLevelResources(b.levels[0]).reduce(function(a,b){return a+b.data.getIndices(e.VertexAttrConstants.POSITION).length/
3},0)):b=g.primitiveGeometryData(a).getIndices(e.VertexAttrConstants.POSITION).length/3;b={primitivesPerFeature:b,primitivesPerCoordinate:0,estimated:!1};return v[a]=b}Object.defineProperty(d,"__esModule",{value:!0});d.emptySymbolComplexity={primitivesPerFeature:0,primitivesPerCoordinate:0,estimated:!0,memory:{bytesPerFeature:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerCoordinate:0}}};d.defaultSymbolComplexity=function(b){if("web-style"===b.type)return d.emptySymbolComplexity;var c=b.symbolLayers.toArray().map(function(c){return a(b,
c)});return f(c)};d.totalSymbolComplexities=f;var v={};d.defaultSymbolLayerComplexity=a;d.defaultSymbolLayerMemoryComplexity=p;d.memoryEstimators={ICON_POINT:{bytesPerFeature:7478.781325779039,bytesPerCoordinate:0,draped:{bytesPerFeature:5712.082651558076,bytesPerCoordinate:0}},ICON_POLYGON:{bytesPerFeature:9679.372971750396,bytesPerCoordinate:56.86422538239579,draped:{bytesPerFeature:7883.966873022898,bytesPerCoordinate:56.89697037586389}},OBJECT_POINT:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0,
draped:{bytesPerFeature:5177.80657223796,bytesPerCoordinate:0}},OBJECT_POLYGON:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206,draped:{bytesPerFeature:7372.024890546556,bytesPerCoordinate:56.80425878144206}},OBJECT_POINT_LOD:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0,draped:{bytesPerFeature:1770.211558073654,bytesPerCoordinate:0}},OBJECT_POLYGON_LOD:{bytesPerFeature:3958.8422890890743,bytesPerCoordinate:56.88697205558441,draped:{bytesPerFeature:3958.8422890890743,
bytesPerCoordinate:56.88697205558441}},LINE:{bytesPerFeature:7586.045782417972,bytesPerCoordinate:112.02132538683836,draped:{bytesPerFeature:4775.97368572266,bytesPerCoordinate:111.85995483757563}},PATH:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872,draped:{bytesPerFeature:7563.020535856769,bytesPerCoordinate:119.1242257528872}},FILL:{bytesPerFeature:8702.040510627665,bytesPerCoordinate:56.610361738134486,draped:{bytesPerFeature:5921.70744530372,bytesPerCoordinate:56.58839624148057}},
FILL_OUTLINE:{bytesPerFeature:12168.362923563885,bytesPerCoordinate:56.265773613009564,draped:{bytesPerFeature:7929.090679733446,bytesPerCoordinate:56.17528027868163}},EXTRUDE:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536,draped:{bytesPerFeature:11409.738625531325,bytesPerCoordinate:56.99136098105536}},EXTRUDE_EDGES:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105,draped:{bytesPerFeature:19399.52461450617,bytesPerCoordinate:52.052414603432105}}}})},
"esri/views/3d/layers/graphics/primitiveObjectSymbolUtils":function(){define("require exports ../../../../core/compilerUtils ../../../../geometry/support/aaBoundingBox ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h=l.fromValues(-.5,-.5,-.5,.5,.5,.5),g=l.fromValues(-.5,-.5,0,.5,.5,1),e=l.fromValues(-.5,-.5,0,.5,.5,.5);d.isValidPrimitive=function(b){switch(b){case "sphere":case "cube":case "diamond":case "cylinder":case "cone":case "inverted-cone":case "tetrahedron":return!0}return!1};
d.primitiveBoundingBox=function(b){switch(b){case "sphere":case "cube":case "diamond":return h;case "cylinder":case "cone":case "inverted-cone":return g;case "tetrahedron":return e;default:n.neverReached(b)}};d.primitiveGeometryData=function(c){switch(c){case "sphere":return b.createPolySphereGeometry(.5,2,!0);case "cube":return b.createBoxGeometry(1);case "cylinder":return b.createCylinderGeometry(1,.5,32,[0,0,1],[0,0,.5]);case "cone":return b.cgToGIS(b.createConeGeometry(1,.5,15,!1));case "inverted-cone":return b.cgToGIS(b.createConeGeometry(1,
.5,15,!0));case "tetrahedron":return b.cgToGIS(b.createTetrahedronGeometry(1));case "diamond":return b.cgToGIS(b.createDiamondGeometry(1));default:n.neverReached(c)}};d.primitiveLodResources=function(e,a,d){var f=function(c,e,f){void 0===f&&(f=!1);return{levels:c.map(function(c,g){var h=e(c.tesselation);f&&b.cgToGIS(h);return{components:[{geometry:new k(h,d+("_lod"+g)),material:a}],faceCount:h.indexCount/3,minScreenSpaceRadius:c.minScreenSpaceRadius}})}};switch(e){case "sphere":return f([{tesselation:0,
minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],function(a){return b.createPolySphereGeometry(.5,a,!0)});case "cube":return f([{tesselation:0,minScreenSpaceRadius:0}],function(a){return b.createBoxGeometry(1)});case "cone":return f(c,function(a){return b.createConeGeometry(1,.5,a,!1)},!0);case "inverted-cone":return f(c,function(a){return b.createConeGeometry(1,
.5,a,!0)},!0);case "cylinder":return f(c,function(a){return b.createCylinderGeometry(1,.5,a,[0,0,1],[0,0,.5])});case "tetrahedron":return f([{tesselation:0,minScreenSpaceRadius:0}],function(a){return b.createTetrahedronGeometry(1)},!0);case "diamond":return f([{tesselation:0,minScreenSpaceRadius:0}],function(a){return b.createDiamondGeometry(1)},!0);default:n.neverReached(e)}};var c=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}]})},
"esri/views/3d/webgl-engine/lib/lodRendering/LodResources":function(){define(["require","exports","../../../../../core/arrayUtils"],function(r,d,n){function l(d){var b=[];d.components.forEach(function(d){b.push(d.geometry)});return n.unique(b)}Object.defineProperty(d,"__esModule",{value:!0});d.materialsFromLodResources=function(d){var b=[];d.levels.forEach(function(d){d.components.forEach(function(d){b.push(d.material)})});return n.unique(b)};d.texturesFromLodResources=function(d){var b=[];d.levels.forEach(function(d){d.components.forEach(function(d){d.textures&&
b.push.apply(b,d.textures)})});return n.unique(b)};d.geometriesFromLodLevelResources=l;d.geometriesFromLodResources=function(d){var b=[];d.levels.forEach(function(d){d.components.forEach(function(d){b.push(d.geometry)})});return n.unique(b)};d.computeFaceCount=function(d){var b=0;l(d).forEach(function(d){b+=d.data.indexCount/3});return b}})},"esri/views/3d/webgl-engine/materials/LineCalloutMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/vec2f32 ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/LineCalloutPrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a,b,c){3===c.length?a.setUniform4f(b,c[0],c[1],c[2],1):a.setUniform4fv(b,c)}r=function(a){function b(e,d){d=a.call(this,d)||this;d.params=c.copyParameters(e,t);d._uniqueMaterialIdentifier=b.uniqueMaterialIdentifier(d.params);return d}n(b,a);Object.defineProperty(b.prototype,"uniqueMaterialIdentifier",{get:function(){return this._uniqueMaterialIdentifier},enumerable:!0,configurable:!0});b.prototype.dispose=function(){};b.prototype.getGLMaterials=function(){return{color:v,
depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:void 0}};b.prototype.intersect=function(a,b,c,e,d,f,g,h){};b.prototype.createBufferWriter=function(){return new w};b.prototype.createRenderer=function(a,b){return new f(a,b,this)};b.prototype.setParameterValues=function(a){c.updateParameters(this.params,a)&&(this._uniqueMaterialIdentifier=b.uniqueMaterialIdentifier(this.params),this.notifyDirty("matChanged"))};b.prototype.getParameters=function(){return this.params};b.uniqueMaterialIdentifier=
function(a){return JSON.stringify({screenOffset:a.screenOffset||[0,0],centerOffsetUnits:a.centerOffsetUnits||"world"})};return b}(h);var v=function(b){function e(a,c,e){a=b.call(this,a,c)||this;a.isRenderSlot=!0;a.updateParameters();return a}n(e,b);e.prototype.updateParameters=function(){this.params=c.copyParameters(this.material.getParameters());this.selectProgram()};e.prototype.selectProgram=function(){var b=this.params;this.renderProgram=this.programRep.getProgram(a.program,{occlTest:!!b.occlusionTest,
verticalOffset:!!b.verticalOffset,screenSizePerspective:!!b.screenSizePerspective,depthHud:!1,depthHudAlignStart:!!b.depthHUDAlignStart,centerOffsetUnitsScreen:"screen"===b.centerOffsetUnits,slice:b.slicePlaneEnabled});this.depthProgram=this.programRep.getProgram(a.program,{occlTest:!!b.occlusionTest,verticalOffset:!!b.verticalOffset,screenSizePerspective:!!b.screenSizePerspective,depthHud:!0,depthHudAlignStart:!!b.depthHUDAlignStart,centerOffsetUnitsScreen:"screen"===b.centerOffsetUnits,slice:b.slicePlaneEnabled});
this.renderPipelineState=p.makePipelineState({blending:p.separateBlendingParams(1,770,771,771),depthTest:{func:513},colorWrite:p.defaultColorWriteParams});this.depthPipelineState=p.makePipelineState({depthTest:{func:513},depthWrite:p.defaultDepthWriteParams})};e.prototype.beginSlot=function(a){switch(a){case 18:return this.isRenderSlot=!0;case 19:return this.isRenderSlot=!1,!0}return!1};Object.defineProperty(e.prototype,"program",{get:function(){return this.isRenderSlot?this.renderProgram:this.depthProgram},
enumerable:!0,configurable:!0});e.prototype.getProgram=function(){return this.program};e.prototype.getPrograms=function(){return[this.renderProgram,this.depthProgram]};e.prototype.getDrawMode=function(){return 4};e.prototype.bind=function(a,b){var e=b.cameraAboveGround?1:-1,d=this.program,f=this.params;a.bindProgram(d);d.setUniform1f("cameraGroundRelative",e);d.setUniform1f("polygonOffset",f.shaderPolygonOffset);d.setUniform4fv("viewport",b.viewport);d.setUniform1f("perDistancePixelRatio",Math.tan(b.fovY/
2)/(b.viewport[2]/2));d.setUniformMatrix4fv("viewNormal",b.viewInvTransp);d.setUniform1i("hudVisibilityTexture",0);a.bindTexture(b.hudVisibilityTexture,0);q(d,"color",f.color);e=b.pixelRatio||1;d.setUniform1f("pixelRatio",e);d.setUniform2f("screenOffset",f.screenOffset[0]*e,f.screenOffset[1]*e);this.bindBorder(a,b);c.bindVerticalOffset(f.verticalOffset,b,d);this.bindSizing(a,b);c.bindScreenSizePerspective(f.screenSizePerspective,d);this.isRenderSlot?a.setPipelineState(this.renderPipelineState):a.setPipelineState(this.depthPipelineState)};
e.prototype.bindView=function(a,b){a=this.program;var e=this.params;c.bindView(b.origin,b.view,a);c.bindCamPos(b.origin,b.viewInvTransp,a);e.slicePlaneEnabled&&c.bindSlicePlane(b.origin,b.slicePlane,a)};e.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};e.prototype.release=function(a,b){};e.prototype.bindSizing=function(a,b){a=this.program;var c=this.params;a.setUniform2f("pixelToNDC",2/
b.viewport[2],2/b.viewport[3]);a.setUniform1f("lineSize",Math.ceil(c.size)*(b.pixelRatio||1))};e.prototype.bindBorder=function(a,b){a=this.program;var c=this.params;b=b.pixelRatio||1;null!==c.borderColor?(q(a,"borderColor",c.borderColor),a.setUniform1f("borderSize",b)):(a.setUniform4f("borderColor",0,0,0,0),a.setUniform1f("borderSize",0))};return e}(b),t={verticalOffset:null,screenSizePerspective:null,screenOffset:[0,0],color:[0,0,0,1],size:1,borderColor:null,occlusionTest:!1,shaderPolygonOffset:1E-5,
depthHUDAlignStart:!1,centerOffsetUnits:"world",slicePlaneEnabled:!1},y=k.newLayout().vec3f(g.VertexAttrConstants.POSITION).vec3f(g.VertexAttrConstants.NORMAL).vec2f(g.VertexAttrConstants.UV0).vec4f(g.VertexAttrConstants.AUXPOS1),x=[l.vec2f32.fromValues(0,0),l.vec2f32.fromValues(1,0),l.vec2f32.fromValues(0,1),l.vec2f32.fromValues(1,0),l.vec2f32.fromValues(1,1),l.vec2f32.fromValues(0,1)],w=function(){function a(){this.vertexBufferLayout=y}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};
a.prototype.elementCount=function(a){return 6*a.indices[g.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,c,d){e.writePosition(b.indices[g.VertexAttrConstants.POSITION],b.vertexAttr[g.VertexAttrConstants.POSITION].data,a.transformation,c.position,d,6);e.writeNormal(b.indices[g.VertexAttrConstants.NORMAL],b.vertexAttr[g.VertexAttrConstants.NORMAL].data,a.invTranspTransformation,c.normal,d,6);e.writeBufferVec4(b.indices[g.VertexAttrConstants.AUXPOS1],b.vertexAttr[g.VertexAttrConstants.AUXPOS1].data,
c.auxpos1,d,6);for(a=0;a<x.length;++a)c.uv0.setVec(d+a,x[a])};return a}();return r})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f32=n})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(r,d){function n(){return new Float32Array(2)}function l(b,e){var c=new Float32Array(2);c[0]=b;c[1]=e;return c}function k(){return l(1,1)}function b(){return l(1,
0)}function h(){return l(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(b){var e=new Float32Array(2);e[0]=b[0];e[1]=b[1];return e};d.fromValues=l;d.createView=function(b,e){return new Float32Array(b,e,2)};d.zeros=function(){return n()};d.ones=k;d.unitX=b;d.unitY=h;d.ZEROS=n();d.ONES=k();d.UNIT_X=b();d.UNIT_Y=h()})},"esri/views/3d/webgl-engine/shaders/LineCalloutPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver",
"../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({OCCL_TEST:b.occlTest,VERTICAL_OFFSET:b.verticalOffset,SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,DEPTH_HUD:b.depthHud,DEPTH_HUD_ALIGN_START:b.depthHudAlignStart,CENTER_OFFSET_UNITS_SCREEN:b.centerOffsetUnitsScreen,SLICE:b.slice})};d.program={name:"line-callout",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/lineCallout/lineCallout.vert"),
fragmentShader:b(d)+l.resolveIncludes("materials/lineCallout/lineCallout.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/graphicSymbolUtils":function(){define(["require","exports","./Graphics3DSymbol","./Graphics3DWebStyleSymbol"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.getGraphics3DSymbol=function(d){return d instanceof l?d.graphics3DSymbol:d instanceof n?d:null}})},"esri/views/3d/layers/graphics/Graphics3DSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/promiseUtils ./Graphics3DGraphic ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolLayerFactory ./Loadable ./symbolComplexity".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){return function(a){function d(b,c,e){var d=a.call(this)||this;d._symbol=b;d._context=c;d._backgroundLayers=e;d._destroyed=!1;d.symbolLayers=[];d.referenced=0;return d}n(d,a);Object.defineProperty(d.prototype,"symbol",{get:function(){return this._symbol},set:function(a){this._symbol=a;if(this.symbolLayers)for(var b=0;b<a.symbolLayers.length;b++){var c=this.symbolLayers[b];h.isNone(c)||(c.symbol=a,c.symbolLayer=a.symbolLayers.items[b])}},enumerable:!0,configurable:!0});
d.prototype.doLoad=function(a){return k(this,void 0,void 0,function(){var c,e,d,m,p,q,t=this;return l(this,function(u){switch(u.label){case 0:c=this._symbol.symbolLayers;this._backgroundLayers&&(c=this._backgroundLayers.concat(c));e=c.length;this.symbolLayers.length=c.length;d=this._context.layerOrder;m=function(b){var h=c.getItemAt(b);if(!1===h.enabled)return"continue";p._context.layerOrder=d+(1-(1+b)/e);p._context.layerOrderDelta=1/e;var k=f.make(p.symbol,h,p._context,h._ignoreDrivers);g.onAbortOrThrow(a,
function(){return k.destroy()});p.symbolLayers[b]=k};p=this;for(q=0;q<e;q++)m(q);this._context.layerOrder=d;return[4,b.forEach(this.symbolLayers,function(a,b){return k(t,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:if(!h.isSome(a))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.load()];case 2:return c.sent(),[3,4];case 3:return c.sent(),this.symbolLayers[b]=null,[3,4];case 4:return[2]}})})})];case 1:u.sent();if(this.symbolLayers.length&&!this.symbolLayers.some(function(a){return!!a}))throw Error();
return[2]}})})};d.prototype.whenSymbolLayerSize=function(a){return k(this,void 0,void 0,function(){var b;return l(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.load()];case 1:return c.sent(),[3,3];case 2:return c.sent(),[3,3];case 3:return b=this.symbolLayers[a],[2,h.isSome(b)?b.getCachedSize():null]}})})};d.prototype.createGraphics3DGraphic=function(a,b){for(var c=a.graphic,d=Array(this.symbolLayers.length),f=0;f<this.symbolLayers.length;f++){var g=this.symbolLayers[f];
h.isSome(g)&&(d[f]=g.createGraphics3DGraphic(a))}return new e(c,b||this,d,a.layer)};Object.defineProperty(d.prototype,"complexity",{get:function(){return p.totalSymbolComplexities(this.symbolLayers.map(function(a){return h.isSome(a)&&a.complexity}))},enumerable:!0,configurable:!0});d.prototype.globalPropertyChanged=function(a,b){for(var e=this.symbolLayers.length,d=function(e){var d=f.symbolLayers[e],g=function(a){a=a._graphics[e];return a instanceof c?a:null};if(h.isSome(d)&&!d.globalPropertyChanged(a,
b,g))return{value:!1}},f=this,g=0;g<e;g++){var k=d(g);if("object"===typeof k)return k.value}return!0};d.prototype.applyRendererDiff=function(a,b){return 1!==this.loadStatus?!1:this.symbolLayers.reduce(function(c,e,d){return c&&(h.isNone(e)||e.applyRendererDiff(a,b))},!0)};d.prototype.prepareSymbolPatch=function(a){if(2!==this.loadStatus&&"partial"===a.diff.type){var b=a.diff.diff;if(b.symbolLayers&&"partial"===b.symbolLayers.type){var c=b.symbolLayers.diff;this.symbolLayers.forEach(function(b,e){var d;
if(!h.isNone(b)){var f=c[e];if(f){var g={diff:f,graphics3DGraphicPatches:[],symbolLayerStatePatches:[]};b.prepareSymbolLayerPatch(g);(d=a.symbolStatePatches).push.apply(d,g.symbolLayerStatePatches);g.graphics3DGraphicPatches.length&&a.graphics3DGraphicPatches.push(function(a,b){var c=a._graphics[e];g.graphics3DGraphicPatches.forEach(function(a){return a(c,b)})})}}})}}};d.prototype.updateGeometry=function(a,b){for(var c=0;c<this.symbolLayers.length;c++){var e=this.symbolLayers[c];if(!h.isNone(e)&&
!e.updateGeometry(a._graphics[c],b))return!1}return!0};d.prototype.getFastUpdateStatus=function(){var a=0,b=0,c=0;this.symbolLayers.forEach(function(e){h.isNone(e)||(0===e.loadStatus?a++:e.isFastUpdatesEnabled()?c++:b++)});return{loading:a,slow:b,fast:c}};d.prototype.setDrawOrder=function(a,b){for(var c=this.symbolLayers.length,e=1/c,d=0;d<c;d++){var f=this.symbolLayers[d];h.isSome(f)&&f.setDrawOrder(a+(1-(1+d)/c),e,b)}};d.prototype.destroy=function(){if(this.destroyed)console.error("Graphics3DSymbol.destroy called when already destroyed!");
else{this.abortLoad();for(var a=0,b=this.symbolLayers;a<b.length;a++){var c=b[a];h.isSome(c)&&c.destroy()}this.symbolLayers.length=0;this._destroyed=!0}};Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0});return d}(a.Loadable)})},"esri/views/3d/layers/graphics/Graphics3DGraphic":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/featureConversionUtils ./featureExpressionInfoUtils ../../support/projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){var t=new h(Array,function(a){return c.set(a,c.ZERO)},null,10,5),y=f.create();return function(){function d(a,b,c,e){this._labelGraphics=[];this._auxiliaryGraphics=[];for(var d=Array(2),f=0;f<d.length;f++)d[f]=Array(4);this._visibilityFlags=d;this._featureExpressionFeature=null;this._optimizedGeometry={geometry:null,hasZ:!1,hasM:!1};this.extent=null;++b.referenced;this.graphics3DSymbol=b;this.graphic=a;this._graphics=c;this._featureExpressionFeature=q.createFeature(a,
e)}d.prototype.initialize=function(a,b){var c=this;this._layer=a;this._stage=b;this.forEachSymbolLayerGraphic(function(e){e.initialize(a,b);e.setVisibility(c.isVisible())})};d.prototype.destroy=function(){this.forEachSymbolLayerGraphic(function(a){return a.destroy()});this._auxiliaryGraphics=this._graphics=null;--this.graphics3DSymbol.referenced;this.graphics3DSymbol=null};Object.defineProperty(d.prototype,"destroyed",{get:function(){return null==this._graphics},enumerable:!0,configurable:!0});d.prototype.clearLabelGraphics=
function(){this.forEachLabelGraphic(function(a){return a.destroy()});this._labelGraphics.length=0};d.prototype.addLabelGraphic=function(a,b,c){this._labelGraphics.push(a);a.initialize(b,c);a.setVisibility(this.isVisible(1))};d.prototype.addAuxiliaryGraphic=function(a){this._auxiliaryGraphics.push(a);this._layer&&(a.initialize(this._layer,this._stage),a.setVisibility(this.isVisible()))};d.prototype.isDraped=function(){var a=!1;this.forEachSymbolLayerGraphic(function(b){"draped"===b.type&&(a=!0)});
return a};d.prototype.isVisible=function(a,b){void 0===a&&(a=0);for(var c=0;c<=a;c++)for(var e=this._visibilityFlags[c],d=0;d<e.length;++d)if(!1===e[d]&&d!==b)return!1;return!0};d.prototype.hasVisibilityFlag=function(a,b){return null!=this._visibilityFlags[b][a]};d.prototype.setVisibilityFlag=function(a,b,c){var e=this.isVisible(c);this._visibilityFlags[c][a]=b;var d=this.isVisible(c);if(e===d)return!1;if(1===c)this.forEachLabelGraphic(function(a){return a.setVisibility(d)});else{this.forEachSymbolLayerGraphic(function(a){return a.setVisibility(d)});
var f=this.isVisible(1);this.forEachLabelGraphic(function(a){return a.setVisibility(f)})}return!0};d.prototype.clearVisibilityFlag=function(a,b){void 0===b&&(b=0);return this.setVisibilityFlag(a,void 0,b)};d.prototype.getBSRadius=function(){var a=0;this.forEachSymbolLayerGraphic(function(b){a=Math.max(a,b.getBSRadius())});return a};d.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=g.vec3f64.create());return this._graphics[0].getCenterObjectSpace(a)};d.prototype.computeExtent=function(c){if(!this.extent){this.extent=
f.create();var e=this.graphic.geometry;if(b.isNone(e))return this.extent=null,!1;var d=e.spatialReference;a.computeAABR(e,this.extent);if(!d.equals(c)&&!v.boundingRectToBoundingRect(this.extent,d,this.extent,c))return this.extent=null,!1}return!0};d.prototype.getAsOptimizedGeometry=function(a,b){if(this._optimizedGeometry.geometry&&this._optimizedGeometry.hasZ===a&&this._optimizedGeometry.hasM===b)return this._optimizedGeometry.geometry;this._optimizedGeometry.geometry=this._convertGraphicToOptimizedGeometry(this.graphic,
a,b);this._optimizedGeometry.hasZ=a;this._optimizedGeometry.hasM=b;return this._optimizedGeometry.geometry};d.prototype._convertGraphicToOptimizedGeometry=function(a,b,c){a=a.geometry;if("mesh"===a.type||"extent"===a.type)a=e.fromExtent("mesh"===a.type?a.extent:a);return p.convertFromGeometry(a,b,c)};Object.defineProperty(d.prototype,"usedMemory",{get:function(){var b=this,c=0;this.forEachSymbolLayerGraphic(function(e){var d=e.graphics3DSymbolLayer.complexity;e="draped"===e.type?d.memory.draped:d.memory;
c+=e.bytesPerFeature;e.bytesPerCoordinate&&(c+=a.numVertices(b.graphic.geometry)*e.bytesPerCoordinate)});return c},enumerable:!0,configurable:!0});d.prototype.getProjectedBoundingBox=function(a,b,e,d,g){return l(this,void 0,void 0,function(){var h=this;return n(this,function(m){switch(m.label){case 0:return g||(g={boundingBox:null,requiresDrapedElevation:!1,screenSpaceObjects:[]}),g.boundingBox?c.empty(g.boundingBox):g.boundingBox=c.empty(),g.requiresDrapedElevation=!1,[4,k.forEach(this._graphics,
function(f){return l(h,void 0,void 0,function(){var h,k,l;return n(this,function(m){switch(m.label){case 0:if(!f)return[2];h="draped"===f.type?b:a;k=t.acquire();return[4,f.getProjectedBoundingBox(h,e,g.screenSpaceObjects,d,k)];case 1:return l=m.sent(),isFinite(l[2])&&isFinite(l[5])||(g.requiresDrapedElevation=!0),l&&c.expand(g.boundingBox,k),t.release(k),[2]}})})})];case 1:return m.sent(),c.allFinite(g.boundingBox)||f.allFinite(c.toRect(g.boundingBox,y))?[2,g]:[2,null]}})})};d.prototype.needsElevationUpdates=
function(){for(var a=0,b=this._graphics;a<b.length;a++){var c=b[a];if(c&&("object3d"===c.type||"lod-instance"===c.type)&&c.needsElevationUpdates)return!0}a=0;for(b=this._labelGraphics;a<b.length;a++)if((c=b[a])&&c.needsElevationUpdates)return!0;return!1};d.prototype.alignWithElevation=function(a,b){var c=this;this.forEachRenderedGraphic(function(e){"object3d"!==e.type&&"lod-instance"!==e.type||e.alignWithElevation(a,b,c._featureExpressionFeature)})};d.prototype.addHighlight=function(a,b){this.forEachSymbolLayerGraphic(function(c){return c.addHighlight(a,
b)})};d.prototype.removeHighlight=function(a){this.forEachSymbolLayerGraphic(function(b){return b.removeHighlight(a)})};d.prototype.forEachGraphicList=function(a,b){a.forEach(function(a,c){return a&&b(a,c)})};d.prototype.forEachSymbolLayerGraphic=function(a){this.forEachGraphicList(this._graphics,a);this.forEachGraphicList(this._auxiliaryGraphics,a)};d.prototype.forEachLabelGraphic=function(a){this.forEachGraphicList(this._labelGraphics,a)};d.prototype.forEachRenderedGraphic=function(a){this.forEachSymbolLayerGraphic(a);
this.forEachLabelGraphic(a)};return d}()})},"esri/views/3d/layers/graphics/Graphics3DSymbolLayerFactory":function(){define("require exports ../../../../core/Logger ./Graphics3DExtrudeSymbolLayer ./Graphics3DIconSymbolLayer ./Graphics3DLineSymbolLayer ./Graphics3DMeshFillSymbolLayer ./Graphics3DObjectSymbolLayer ./Graphics3DPathSymbolLayer ./Graphics3DPolygonFillSymbolLayer ./Graphics3DTextSymbolLayer ./Graphics3DWaterSymbolLayer".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,
"__esModule",{value:!0});var p=n.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory");d.make=function(a,b,c,e){var d=v[a.type]&&v[a.type][b.type]||q[b.type];return d?new d(a,b,c,e):(p.error("GraphicsLayerFactory#make","unknown symbol type "+b.type),null)};var q={icon:k.default,object:g.default,line:b.default,path:e.default,fill:c.default,extrude:l.default,text:f.default,water:a.default};d.setSymbolClass=function(a,b){q[a]=b};var v={"mesh-3d":{fill:h.default}}})},"esri/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/maybe ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../layers/graphics/dehydratedFeatures ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../support/edgeUtils ../../support/projectionUtils ../../support/buffer/BufferView ../../support/buffer/math/vec3 ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Util ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O){function I(a,b,c,e,d,f,g,h,k,l,m,q,u,t){var w=c.length/3,z=0;m+=2*e.count;var x=e.index,n=e.count,y=k,v=m;p.vec3.copy(V,u);var B=0<q?1:-1,x=3*x,C=y;u=3*C;for(var I=y+n,y=3*I,F=0;F<n;++F)t&&(V[0]=a[x+0],V[1]=a[x+1],V[2]=a[x+2],p.vec3.normalize(V,V)),d[u+0]=a[x+0],d[u+1]=a[x+1],d[u+2]=a[x+2],f[u+0]=b[x+0],f[u+1]=b[x+1],f[u+2]=b[x+2],g[u+0]=-B*V[0],g[u+1]=-B*V[1],g[u+2]=-B*V[2],h[C]=0,d[y+0]=a[x+0]+q*V[0],d[y+1]=a[x+1]+q*V[1],d[y+
2]=a[x+2]+q*V[2],f[y+0]=b[x+0],f[y+1]=b[x+1],f[y+2]=b[x+2],g[y+0]=B*V[0],g[y+1]=B*V[1],g[y+2]=B*V[2],h[I]=q,u+=3,y+=3,x+=3,C+=1,I+=1;x=0;u=3*v;y=3*(v+w);u=3*(v+w);y=3*v;a=T;b=Z;0>q&&(a=Z,b=T);for(F=0;F<w;++F)l[u+0]=c[x+a[0]],l[u+1]=c[x+a[1]],l[u+2]=c[x+a[2]],l[y+0]=c[x+b[0]]+n,l[y+1]=c[x+b[1]]+n,l[y+2]=c[x+b[2]]+n,u+=3,y+=3,x+=3;k+=2*e.count;m=m+2*w-(2*e.count+2*w);S(d,f,h,g,z,e.pathLengths[0],e.count,k,l,m,q);k+=4*e.pathLengths[0];m+=2*e.pathLengths[0];z+=e.pathLengths[0];for(c=1;c<e.pathLengths.length;++c)S(d,
f,h,g,z,e.pathLengths[c],e.count,k,l,m,q),k+=4*e.pathLengths[c],m+=2*e.pathLengths[c],z+=e.pathLengths[c]}function H(a,b,c,e,d,f,g){e[f]=e[g];g*=3;f*=3;a[f+0]=a[g+0];a[f+1]=a[g+1];a[f+2]=a[g+2];b[f+0]=b[g+0];b[f+1]=b[g+1];b[f+2]=b[g+2];c[f+0]=d[0];c[f+1]=d[1];c[f+2]=d[2]}function S(a,b,c,e,d,f,g,h,k,l,m){var q=d,u=d+1,t=d+g,w=d+g+1,z=h,x=h+1,n=h+2*f;h=h+2*f+1;0>m&&(q=d+g+1,w=d);l*=3;for(var y=0;y<f;++y){y===f-1&&(0<m?(u=d,w=d+g):(u=d,q=d+g));var v=a,B=q,C=u,I=t,F=R,B=3*B,C=3*C,I=3*I;p.vec3.set(U,
v[B++],v[B++],v[B++]);p.vec3.set(X,v[C++],v[C++],v[C++]);p.vec3.set(ca,v[I++],v[I++],v[I++]);p.vec3.subtract(G,X,U);p.vec3.subtract(Y,ca,U);p.vec3.cross(F,Y,G);p.vec3.normalize(F,F);H(a,b,e,c,R,z,q);H(a,b,e,c,R,x,u);H(a,b,e,c,R,n,t);H(a,b,e,c,R,h,w);k[l++]=z;k[l++]=n;k[l++]=h;k[l++]=z;k[l++]=h;k[l++]=x;q++;u++;t++;w++;z+=2;x+=2;n+=2;h+=2}}Object.defineProperty(d,"__esModule",{value:!0});var P=q.vec3f64.create(),V=q.vec3f64.create(),T=[0,2,1],Z=[0,1,2],Q=t.makeDehydratedPoint(0,0,0,null),J={verticalDistanceToGround:0,
terrainElevation:0};r=function(d){function t(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._edgeStageObjects=new Set;return a}n(t,d);t.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a,c,e,d,f,g,k;return l(this,function(l){if(!this._isPropertyDriven("size")&&(a=m.validateSymbolLayerSize(this._getSymbolSize())))throw new b("graphics3dextrudesymbollayer:invalid-size",a);c=this._getStageIdHint();e=h.get(this.symbolLayer,"material","color");d=this._getCombinedOpacityAndColor(e);f=q.vec3f64.fromArray(d);
g=d[3];k={diffuse:f,ambient:f,opacity:g,transparent:1>g||this._isPropertyDriven("opacity"),vertexColors:!0,slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows};this._material=new O(k,c+"_3dlinemat");this._context.stage.add(F.ModelContentType.MATERIAL,this._material);return[2]})})};t.prototype.destroy=function(){d.prototype.destroy.call(this);this._material&&this._context.stage.remove(F.ModelContentType.MATERIAL,this._material.id)};t.prototype.createGraphics3DGraphic=
function(a){var b=a.renderingInfo;a=a.graphic;var c=a.geometry;if("polygon"!==c.type&&"extent"!==c.type)return this.logger.warn("unsupported geometry type for extrude symbol: "+c.type),null;if(!this._validateGeometry(c))return null;var e="graphic"+a.uid,d=this._getVertexOpacityAndColor(b,Float32Array,255),f=this.getGraphicElevationContext(a);return this._createAs3DShape(c,b,d,f,e,a.uid)};t.prototype.layerOpacityChanged=function(){var a=h.get(this.symbolLayer,"material","color"),a=this._getCombinedOpacity(a),
b=1>a||this._isPropertyDriven("opacity");this._material.setParameterValues({opacity:a,transparent:b});if(0<this._edgeStageObjects.size){var c=this._context.stage.renderView.ensureEdgeView(),e=this._getLayerOpacity();this._edgeStageObjects.forEach(function(a){return c.updateAllComponentOpacities(a,[e])})}return!0};t.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,x.needsElevationUpdates3D)};t.prototype.slicePlaneEnabledChanged=function(a,b){var c=
this;this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});if(0<this._edgeStageObjects.size){var e=this._context.stage.renderView.ensureEdgeView();a=this._createEdgeMaterial(e);if(h.isSome(a)){var d=[a];this._edgeStageObjects.forEach(function(a){return e.updateAllComponentMaterials(a,d,{slicePlaneEnabled:c._context.slicePlaneEnabled},!1)})}}return!0};t.prototype.pixelRatioChanged=function(a,b){return!0};t.prototype._getExtrusionSize=function(a){a=a.size&&this._isPropertyDriven("size")?
x.getSingleSizeDriver(a.size,2):this._getSymbolSize();return a/=this._context.renderCoordsHelper.unitInMeters};t.prototype._getSymbolSize=function(){return this.symbolLayer.size||1};t.prototype._createAs3DShape=function(b,d,k,l,u,t){var w=this,n="extent"===b.type?v.fromExtent(b):b;b=n.rings;var F=[],H=[],r=[],U=Array(6),X=this._context.renderSpatialReference===z.SphericalECEFSpatialReference,R=this._getExtrusionSize(d),G=q.vec3f64.create();X||this._context.renderCoordsHelper.worldUpAtPosition(null,
G);d=x.getGeometryVertexData3D(b,n.hasZ,n.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,l);this._logGeometryCreationWarnings(d,b,"rings","ExtrudeSymbol3DLayer");if(0===b.length||!b.some(function(a){return 0<a.length}))return null;var O=m.computeCentroid(n);if(h.isNone(O))return null;b=a.mat4f64.create();z.computeLinearTransformation(n.spatialReference,[O.x,O.y,0],b,this._context.renderSpatialReference);var ca=a.mat4f64.create();
f.mat4.invert(ca,b);var na=c.mat3f64.create();e.mat3.normalFromMat4(na,ca);for(var N=d.geometryData.polygons,S=d.eleVertexData,A=d.vertexData,n=A.length/3,pa=new Float64Array(18*n),T=new Float64Array(18*n),Z=new Float64Array(18*n),ja=new Float64Array(6*n),Y=0,n=function(b){var c=N[b],e=c.count,d=c.index;if(V._context.clippingExtent&&(x.computeBoundingBox(S,d,e,U),x.boundingBoxClipped(U,V._context.clippingExtent)))return"continue";var f=new Float64Array(S.buffer,3*d*pa.BYTES_PER_ELEMENT,3*e),h=c.holeIndices.map(function(a){return a-
d}),f=g(f,h,3);if(0===f.length)return"continue";var h=new Uint32Array(6*e+2*f.length),l=6*e,m=3*pa.BYTES_PER_ELEMENT,m=new B.BufferViewVec3f64(pa.buffer,Y*m,m,(Y+l)*m),p=3*T.BYTES_PER_ELEMENT,p=new B.BufferViewVec3f64(T.buffer,Y*p,p,(Y+l)*p),q=new Float64Array(Z.buffer,3*Y*Z.BYTES_PER_ELEMENT,3*l),l=new Float64Array(ja.buffer,1*Y*ja.BYTES_PER_ELEMENT,1*l);I(A,S,f,c,m.typedBuffer,q,p.typedBuffer,l,0,h,0,R,G,X);C.transformMat4(m,m,ca);C.transformMat3(p,p,na);Y+=6*e;c=V._createExtrudeGeometry(h,{positions:m.typedBuffer,
elevation:q,normals:p.typedBuffer,heights:l},k);b=new E(c,u+"path"+b);b.singleUse=!0;F.push(b);H.push(V._material);r.push(a.mat4f64.create())},V=this,O=0;O<N.length;++O)n(O);if(0===F.length)return null;var ta=new L({geometries:F,materials:H,transformations:r,castShadow:!0,metadata:{layerUid:this._context.layer.uid,graphicUid:t},idHint:u});ta.objectTransformation=b;var aa=function(a){var b=w._context.stage.renderView.ensureEdgeView();b.removeObject(a);w._edgeStageObjects.delete(a);var c=w._createEdgeMaterial(b);
h.isSome(c)&&(w._edgeStageObjects.add(a),b.addObject(a,[c],{slicePlaneEnabled:w._context.slicePlaneEnabled},!w._context.isAsync))};aa(ta);t=new y(this,ta,F,null,null,function(b,c,e,d){b=b.stageObject;Q.spatialReference=e.spatialReference;for(var g=b.getGeometryRecords(),h=g.length,k="absolute-height"!==c.mode,l=0,m=b.objectTransformation,q=f.mat4.invert(a.mat4f64.create(),m),u=0;u<h;u++){var t=g[u].geometry;t.invalidateBoundingInfo();for(var w=t.data.getVertexAttr(),t=w[K.VertexAttrConstants.POSITION].data,
z=w[K.VertexAttrConstants.SIZE].data,w=w.mapPos.data,n=t.length/3,y=0,v=0,B=!1,C=0,I=0;I<n;I++){Q.x=w[v];Q.y=w[v+1];Q.z=w[v+2];la[0]=t[y];la[1]=t[y+1];la[2]=t[y+2];var F=x.computeElevation(e,Q,c,d,k?J:null);k&&(C+=J.terrainElevation);p.vec3.set(P,t[y+0],t[y+1],t[y+2]);p.vec3.transformMat4(P,P,m);d.setAltitude(F+z[y/3],P);p.vec3.transformMat4(P,P,q);t[y]=P[0];t[y+1]=P[1];t[y+2]=P[2];F=.01/d.unitInMeters;if(Math.abs(la[0]-t[y])>F||Math.abs(la[1]-t[y+1])>F||Math.abs(la[2]-t[y+2])>F)B=!0;v+=3;y+=3}B&&
b.geometryVertexAttrsUpdated(u);l+=C/n}c=l/h;aa(ta);return c},l);t.alignedTerrainElevation=d.terrainElevation;t.needsElevationUpdates=x.needsElevationUpdates3D(l.mode);return t};t.prototype._createExtrudeGeometry=function(a,b,c){for(var e=a.length,d=new Uint32Array(e),f=0;f<e;f++)d[f]=0;e={};f={};e[K.VertexAttrConstants.POSITION]=a;e[K.VertexAttrConstants.NORMAL]=a;e[K.VertexAttrConstants.COLOR]=d;f[K.VertexAttrConstants.POSITION]={size:3,data:b.positions};f[K.VertexAttrConstants.NORMAL]={size:3,
data:b.normals};f[K.VertexAttrConstants.COLOR]={size:4,data:c};f[K.VertexAttrConstants.SIZE]={size:1,data:b.heights};b.elevation&&(f.mapPos={size:3,data:b.elevation},e.mapPos=a);return new N(f,e)};t.prototype._createEdgeMaterial=function(a){var b={opacity:this._getLayerOpacity()};return u.createMaterial(a,this.symbolLayer,b)};return t}(w.default);d.Graphics3DExtrudeSymbolLayer=r;var R=q.vec3f64.create(),U=q.vec3f64.create(),X=q.vec3f64.create(),ca=q.vec3f64.create(),G=q.vec3f64.create(),Y=q.vec3f64.create(),
la=q.vec3f64.create();d.default=r})},"esri/views/3d/layers/support/edgeUtils":function(){define("require exports ../../../../Color ../../../../core/compilerUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec4f64".split(" "),function(r,d,n,l,k,b,h){function g(e,c,d){if(k.isNone(c))return null;var a=k.isSome(c.color)?h.vec4f64.fromArray(n.toUnitRGBA(c.color)):h.vec4f64.fromValues(0,0,0,0);d=d.opacity;switch(c.type){case "solid":return e.createSolidEdgeMaterial({color:a,
size:b.pt2px(c.size),extensionLength:b.pt2px(c.extensionLength),opacity:d});case "sketch":return e.createSketchEdgeMaterial({color:a,size:b.pt2px(c.size),extensionLength:b.pt2px(c.extensionLength),opacity:d});default:l.neverReached(c)}}Object.defineProperty(d,"__esModule",{value:!0});d.createMaterial=function(b,c,d){return g(b,c&&c.enabled&&c.edges||null,d)};d.createMaterialFromEdges=g})},"esri/views/3d/support/buffer/math/vec3":function(){define(["require","exports","./common"],function(r,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.transformMat4=function(d,k,b){if(d.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=d.count,g=b[0],e=b[1],c=b[2],f=b[4],a=b[5],l=b[6],q=b[8],v=b[9],t=b[10],y=b[12],x=b[13];b=b[14];var w=d.typedBuffer;d=d.typedBufferStride;var m=k.typedBuffer;k=k.typedBufferStride;for(var u=0;u<h;u++){var z=u*d,B=u*k,C=m[B],F=m[B+1],B=m[B+2];w[z]=g*C+f*F+q*B+y;w[z+1]=e*C+a*F+v*B+x;w[z+2]=c*C+l*F+t*B+b}}};d.transformMat3=
function(d,k,b){if(d.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=d.count,g=b[0],e=b[1],c=b[2],f=b[3],a=b[4],l=b[5],q=b[6],v=b[7];b=b[8];var t=d.typedBuffer;d=d.typedBufferStride;var y=k.typedBuffer;k=k.typedBufferStride;for(var x=0;x<h;x++){var w=x*d,m=x*k,u=y[m],z=y[m+1],m=y[m+2];t[w]=g*u+f*z+q*m;t[w+1]=e*u+a*z+v*m;t[w+2]=c*u+l*z+b*m}}};d.scale=function(d,k,b){var h=Math.min(d.count,k.count),g=d.typedBuffer;d=d.typedBufferStride;
var e=k.typedBuffer;k=k.typedBufferStride;for(var c=0;c<h;c++){var f=c*d,a=c*k;g[f]=b*e[a];g[f+1]=b*e[a+1];g[f+2]=b*e[a+2]}}})},"esri/views/3d/support/buffer/math/common":function(){define(["require","exports","../../../../../core/Logger"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.logger=n.getLogger("esri.views.3d.support.buffer.math")})},"esri/views/3d/webgl-engine/materials/DefaultMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/buffer/InterleavedLayout ../lib/GLMaterialTexture ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./internal/MaterialUtil ./renderers/InstancedRenderer ./renderers/MergedRenderer ../shaders/DefaultPrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){function m(a,b){var c=b.vvSizeEnabled;b.vvSizeEnabled?(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor)):c&&a.setUniform3fv("vvSizeValue",b.vvSizeValue);c&&(a.setUniform3fv("vvSymbolAnchor",b.vvSymbolAnchor),a.setUniformMatrix3fv("vvSymbolRotationMatrix",b.vvSymbolRotationMatrix));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",
b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors))}var u=a.assert;r=function(a){function b(c,e){e=a.call(this,e)||this;e.supportsEdges=!0;e.params=v.copyParameters(c,N);e.vertexBufferLayout=b.getVertexBufferLayout(e.params);e.instanceBufferLayout=c.instanced?b.getInstanceBufferLayout(e.params):null;e.textureMode=e.vertexBufferLayout.hasField("uv0")?"Textured":"none";return e}n(b,a);b.prototype.isVisibleInPass=function(a){return 3===a?this.params.castShadows:!0};b.prototype.isVisible=
function(){var b=this.params;if(!a.prototype.isVisible.call(this)||0===b.layerOpacity)return!1;var c=b.instanced,e=b.vertexColors,d=b.symbolColors,c=!!c&&-1<c.indexOf("color"),f=b.vvColorEnabled,g="replace"===b.colorMixMode,h=0<b.opacity,b=b.externalColor&&0<b.externalColor[3];return e&&(c||f||d)?g?!0:h:e?g?b:h:c||f||d?g?!0:h:g?b:h};b.prototype.setParameterValues=function(a){var b=this.params,c;for(c in a)"instanced"===c&&u(a.instanced===b.instanced,"Can not change instanced attributes"),"textureId"===
c&&u(b.textureId,"Can only change texture of material that already has a texture"),"vertexColors"===c&&!0===a[c]&&a[c]!==b[c]&&u(b.vertexColors,"Can not enable vertex colors after DefaultMaterial creation"),b[c]=a[c];this.notifyDirty("matChanged")};b.prototype.getParameters=function(){return this.params};b.prototype.intersect=function(a,b,c,e,d,f,g,k){if(null!==this.params.verticalOffset){k=e.camera;h.vec3.set(T,c[12],c[13],c[14]);var l=h.vec3.subtract(Z,T,k.eye),m=h.vec3.length(l),p=h.vec3.scale(l,
l,1/m),q=null,l=null;switch(e.viewingMode){case "global":l=h.vec3.normalize(P,T);break;case "local":l=h.vec3.copy(P,S)}this.params.screenSizePerspective&&(q=h.vec3.dot(l,p));k=v.verticalOffsetAtDistance(k,m,this.params.verticalOffset,q,this.params.screenSizePerspective);h.vec3.scale(l,l,k);h.vec3.transformMat3(V,l,e.transform.inverseRotation);d=h.vec3.subtract(I,d,V);f=h.vec3.subtract(H,f,V)}v.intersectTriangleGeometry(a,b,c,e,d,f,g)};b.prototype.getGLMaterials=function(){return{color:z,depthShadowMap:C,
normal:F,depth:B,highlight:E}};b.prototype.createRenderer=function(a,b){return this.params.softwareInstanced?new t(a,b,this):new y(a,b,this)};b.prototype.createBufferWriter=function(){return new L(this.vertexBufferLayout,this.instanceBufferLayout)};b.getVertexBufferLayout=function(a){var b=a.textureId||a.normalTextureId||a.metallicRoughnessTextureId||a.emissiveTextureId||a.occlusionTextureId,c=e.newLayout().vec3f("position").vec3f("normal");a.vertexTangents&&c.vec4f("aTangent");b&&c.vec2f("uv0");
a.vertexColors&&c.vec4u8("color");a.symbolColors&&c.vec4u8("symbolColor");return c};b.getInstanceBufferLayout=function(a){var b=e.newLayout(),b=a.instancedDoublePrecision?b.vec3f("modelOriginHi").vec3f("modelOriginLo").mat3f("model").mat3f("modelNormal"):b.mat4f("model").mat4f("modelNormal");a.instanced&&-1<a.instanced.indexOf("color")&&(b=b.vec4f("instanceColor"));a.instanced&&-1<a.instanced.indexOf("featureAttribute")&&(b=b.vec4f("instanceFeatureAttribute"));return b};return b}(f);var z=function(a){function b(b,
c,e){var d=this,f=b.getParameters(),d=a.call(this,b,c,e,f.textureId,f.normalTextureId,f.emissiveTextureId,f.occlusionTextureId,f.metallicRoughnessTextureId,f.textureInitTransparent)||this;d.params=v.copyParameters(f);c=d.params;d.slot=c.transparent?c.writeDepth?7:10:5;d.textureMode=b.textureMode;b=c.instanced;d.instanced=!!b;d.instancedColor=!!b&&-1<b.indexOf("color");d._createPrograms();d.selectPipeline();return d}n(b,a);b.prototype._createPrograms=function(){var a=this;this.programs=q.BindParametersMap.create(this.params,
function(b){return a._createProgram(b)})};b.prototype._createProgram=function(a){var b=this.params;return this.programRep.getProgram(x.colorPass,{treeRendering:!!b.treeRendering,textureMode:this.textureMode,normalTexture:!!b.normalTextureId,colorTexture:!!b.textureId,tangents:b.vertexTangents?"vertex":"none",vertexColors:b.vertexColors,symbolColors:b.symbolColors,flipV:b.flipV,doubleSided:b.doubleSided&&"normal"===b.doubleSidedType,windowOrderDoubleSided:b.doubleSided&&"winding-order"===b.doubleSidedType,
instanced:!!this.instanced,instancedDoublePrecision:b.instancedDoublePrecision,instancedColor:this.instancedColor,receiveShadows:a.receiveShadows,receiveSSAO:a.receiveSSAO,vvSize:b.vvSizeEnabled,vvColor:b.vvColorEnabled,verticalOffset:null!==b.verticalOffset,screenSizePerspective:null!==b.screenSizePerspective,slice:b.slicePlaneEnabled,sliceHighlightDisabled:b.sliceHighlightDisabled,normals:b.normals,textureAlphaMode:b.textureAlphaMode,textureAlphaPremultiplied:!!b.textureAlphaPremultiplied,iosSafariFix:O,
roughnessMetallnessTexture:!!b.metallicRoughnessTextureId,emissionTexture:!!b.emissiveTextureId,occlusionTexture:!!b.occlusionTextureId,usePBR:b.usePBR})};b.prototype.selectPipeline=function(){var a=this.params;this.pipelineState=w.makePipelineState({blending:a.transparent&&w.separateBlendingParams(770,1,771,771),culling:K(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=
function(){return this.program||this.getPrograms()[0]};b.prototype.getPrograms=function(){return q.BindParametersMap.programs(this.programs)};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.slot=this.params.transparent?this.params.writeDepth?7:10:5;this.updateTexture(this.params.textureId);this._createPrograms();this.selectPipeline()};b.prototype.bind=function(a,b){var c=this.params,e=this.program=q.BindParametersMap.lookup(this.programs,b);
a.bindProgram(e);a.setPipelineState(this.pipelineState);e.setUniform3fv("ambient",c.ambient);e.setUniform3fv("diffuse",c.diffuse);e.setUniform3fv("specular",c.specular);e.setUniform4fv("externalColor",c.externalColor);e.setUniform1i("colorMixMode",v.colorMixModes[c.colorMixMode]);c.usePBR&&(e.setUniform1f("metalnessFactor",c.metallicFactor),e.setUniform1f("roughnessFactor",c.roughnessFactor),e.setUniform3fv("emissionFactor",c.emissiveFactor));e.setUniform1f("opacity",c.opacity);e.setUniform1f("layerOpacity",
c.layerOpacity);v.bindVerticalOffset(c.verticalOffset,b,e);v.bindScreenSizePerspective(c.screenSizePerspective,e);m(e,c);this.bindTexture(a,e);"none"!==this.textureMode&&this.bindTextureSize(a,e);"mask"!==c.textureAlphaMode&&"maskBlend"!==c.textureAlphaMode||e.setUniform1f("textureAlphaCutoff",c.textureAlphaCutoff)};b.prototype.release=function(a,b){};b.prototype.bindView=function(a,b){a=this.program=q.BindParametersMap.lookup(this.programs,b);var c=this.params,e=c.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],
b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;v.bindView(e,b.view,a);v.bindCamPos(e,b.viewInvTransp,a);c.instancedDoublePrecision&&v.bindViewOriginDouble(e,a);c.slicePlaneEnabled&&v.bindSlicePlane(e,b.slicePlane,a);b.shadowMappingEnabled&&b.shadowMap.bindView(a,e)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(c),B=function(a){function b(b,
c,e,d){void 0===d&&(d=!1);c=a.call(this,b,c,e,b.getParameters().textureId)||this;c.textureMode=b.textureMode;c.biased=d;c.updateParameters();return c}n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.depthPass,{textureMode:this.textureMode,normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":
"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,shadowMap:this.biased,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:O});this.pipelineState=w.makePipelineState({culling:K(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=
function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform2fv("nearFar",b.nearFar);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,
c);m(c,e);"mask"!==e.textureAlphaMode&&"maskBlend"!==e.textureAlphaMode||c.setUniform1f("textureAlphaCutoff",e.textureAlphaCutoff);this.bindTexture(a,c)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params,e=c.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;v.bindView(e,b.view,a);c.slicePlaneEnabled&&v.bindSlicePlane(e,b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,b.viewInvTransp,
a);c.instancedDoublePrecision&&v.bindViewOriginDouble(e,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 4};return b}(c),C=function(a){function b(b,c,e){return a.call(this,b,c,e,!0)||this}n(b,a);return b}(B),F=function(a){function b(b,c,e){c=a.call(this,b,c,e,b.getParameters().textureId)||this;c.params=v.copyParameters(b.getParameters());c.textureMode=b.textureMode;c.selectProgram();c.selectSlot();return c}
n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.normalPass,{textureMode:this.textureMode,normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,
screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:O});this.pipelineState=w.makePipelineState({culling:K(a),depthTest:{func:513},depthWrite:a.writeDepth&&w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());
this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);this.bindTexture(a,c);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,c);m(c,e);"mask"!==e.textureAlphaMode&&"maskBlend"!==e.textureAlphaMode||c.setUniform1f("textureAlphaCutoff",e.textureAlphaCutoff)};b.prototype.release=function(a){};b.prototype.bindView=
function(a,b){a=this.program;var c=this.params,e=c.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;v.bindView(e,b.view,a);a.setUniformMatrix4fv("viewNormal",b.viewInvTransp);c.slicePlaneEnabled&&v.bindSlicePlane(e,b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,b.viewInvTransp,a);c.instancedDoublePrecision&&v.bindViewOriginDouble(e,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);
a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(c),E=function(a){function b(b,c,e){c=a.call(this,b,c,e,b.getParameters().textureId)||this;c.textureMode=b.textureMode;c.updateParameters();return c}n(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.highlightPass,{textureMode:this.textureMode,
normalTexture:!!a.normalTextureId,colorTexture:!!a.textureId,tangents:a.vertexTangents?"vertex":"none",flipV:a.flipV,instanced:!!a.instanced,instancedDoublePrecision:a.instancedDoublePrecision,vvSize:a.vvSizeEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,textureAlphaMode:a.textureAlphaMode,normals:a.normals,iosSafariFix:O});this.pipelineState=w.makePipelineState({culling:K(a),depthTest:{func:513},depthWrite:a.writeDepth&&
w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?this.params.writeDepth?7:10:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot();this.updateTexture(this.params.textureId)};b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);v.bindHighlightRendering(a,b,c);this.bindTexture(a,
c);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,c);m(c,e);"mask"!==e.textureAlphaMode&&"maskBlend"!==e.textureAlphaMode||c.setUniform1f("textureAlphaCutoff",e.textureAlphaCutoff)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params,e=c.instancedDoublePrecision?g.vec3f64.fromValues(b.viewInvTransp[3],b.viewInvTransp[7],b.viewInvTransp[11]):b.origin;v.bindView(e,b.view,a);c.slicePlaneEnabled&&v.bindSlicePlane(e,
b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,b.viewInvTransp,a);c.instancedDoublePrecision&&v.bindViewOriginDouble(e,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return 4};return b}(c);(r||(r={})).COLOR_GAMMA=2.1;var N={textureId:void 0,textureInitTransparent:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,
emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],metallicFactor:0,roughnessFactor:.75,ambient:[.2,.2,.2],diffuse:[.8,.8,.8],specular:[0,0,0],externalColor:[1,1,1,1],colorMixMode:"multiply",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,flipV:!1,doubleSided:!1,doubleSidedType:"normal",cullFace:void 0,softwareInstanced:!1,instanced:void 0,instancedDoublePrecision:!1,normals:"default",receiveSSAO:!0,castShadows:!0,verticalOffset:null,screenSizePerspective:null,
slicePlaneEnabled:!1,sliceHighlightDisabled:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:b.mat3f64.create(),transparent:!1,writeDepth:!0,textureAlphaMode:"blend",textureAlphaCutoff:.1,textureAlphaPremultiplied:!1},L=function(){function a(a,
b){this.vertexBufferLayout=a;this.instanceBufferLayout=b}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices.position.length};a.prototype.write=function(a,b,c,e){p.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,c,e)};return a}(),K=function(a){var b;b=a.cullFace?"none"!==a.cullFace:a.slicePlaneEnabled?!1:!a.transparent&&!a.doubleSided;return b&&{face:"front"===a.cullFace?
1028:1029,mode:2305}},O=!!k("ios")&&!!k("safari"),I=g.vec3f64.create(),H=g.vec3f64.create(),S=g.vec3f64.fromValues(0,0,1),P=g.vec3f64.create(),V=g.vec3f64.create(),T=g.vec3f64.create(),Z=g.vec3f64.create();return r})},"esri/views/3d/webgl-engine/shaders/DefaultPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({TEXTURING:"none"!==
b.textureMode,TEXTURE_ATLAS:"AtlasTextured"===b.textureMode,VERTEXCOLORS:b.vertexColors,SYMBOLVERTEXCOLORS:b.symbolColors,FLIPV:b.flipV,DOUBLESIDED:b.doubleSided,WINDINGORDERDOUBLESIDED:b.windowOrderDoubleSided,INSTANCED:b.instanced,INSTANCED_DOUBLE_PRECISION:b.instancedDoublePrecision,INSTANCEDCOLOR:b.instancedColor,RECEIVE_SHADOWS:b.receiveShadows,RECEIVE_SSAO:b.receiveSSAO,VV_SIZE:b.vvSize,VV_COLOR:b.vvColor,VERTICAL_OFFSET:b.verticalOffset,SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,SLICE:b.slice,
SLICE_HIGHLIGHT_DISABLED:b.sliceHighlightDisabled,GROUND_NORMAL_SHADING:b.groundNormalShading,NORMALS:{value:b.normals,options:{default:"NORMALS_DEFAULT",compressed:"NORMALS_COMPRESSED",screenDerivative:"NORMALS_SCREEN_DERIVATIVE"}},COMPONENTCOLORS:b.componentColor,TEXTURE_ALPHA_MODE_MASK:"mask"===b.textureAlphaMode,TEXTURE_ALPHA_MODE_MASK_BLEND:"maskBlend"===b.textureAlphaMode,TEXTURE_ALPHA_MODE_OPAQUE:"opaque"===b.textureAlphaMode,BIAS_SHADOWMAP:b.shadowMap,VERTEX_TANGENTS:"vertex"===b.tangents,
TEXTURE_COLOR:b.colorTexture,TEXTURE_NORMALS:!!b.normalTexture,TEXTURE_COORDINATES:!!b.roughnessMetallnessTexture||!!b.emissionTexture||!!b.occlusionTexture||!!b.normalTexture||"none"!==b.textureMode,TREE_RENDERING:b.treeRendering,IOS_SAFARI_FIX:b.iosSafariFix,TEXTURE_ALPHA_PREMULTIPLIED:!!b.textureAlphaPremultiplied,PBR_TEX_METALLNESS_ROUGHNESS:!!b.roughnessMetallnessTexture,PBR_TEX_EMISSION:!!b.emissionTexture,PBR_TEX_OCCLUSION:!!b.occlusionTexture,USE_PBR:b.usePBR})};d.colorPass={name:"default-color",
shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/defaultMaterial/colorPass.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/defaultMaterial/colorPass.frag")}},attributes:n.Default3D};d.depthPass={name:"default-depth",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/defaultMaterial/depthPass.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/defaultMaterial/depthPass.frag")}},attributes:n.Default3D};d.normalPass={name:"default-normal",shaders:function(d){return{vertexShader:b(d)+
l.resolveIncludes("materials/defaultMaterial/normalPass.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/defaultMaterial/normalPass.frag")}},attributes:n.Default3D};d.highlightPass={name:"default-highlight",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/defaultMaterial/highlightPass.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/defaultMaterial/highlightPass.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Graphics3DIconSymbolLayer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/asyncUtils ../../../../core/compilerUtils ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/urlUtils ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../symbols/support/IconSymbol3DLayerResource ../../../../symbols/support/utils ./constants ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./sdfPrimitives ../support/FastSymbolUpdates ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Texture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q){function J(a){return p.isSome(a)?"cross"===a||"x"===a:!1}Object.defineProperty(d,"__esModule",{value:!0});var R=y.mat4f64.create(),U=w.vec3f64.fromValues(0,0,1),X=[.25,.25,.75,.75],ca=[64,64];r=function(d){function m(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._size=null;a._symbolTextureRatio=1;a._outlineSize=0;a._texture=null;a._drapedMaterial=null;a._releaseTexture=null;a._elevationOptions={supportsOffsetAdjustment:!0,
supportsOnTheGround:!0};return a}l(m,d);m.prototype.getCachedSize=function(){return{size:this._getIconSize()}};m.prototype.doLoad=function(a){return b(this,void 0,void 0,function(){var b,c;return k(this,function(e){switch(e.label){case 0:this._validateOrThrow();b=this._prepareMaterialParameters();c=this._getPrimitive();if(!p.isSome(c))return[3,1];this._prepareResourcesPrimitive(b,c);return[3,3];case 1:return[4,this._prepareResourcesHref(b,a)];case 2:e.sent(),e.label=3;case 3:return[2]}})})};m.prototype._validateOrThrow=
function(){if(!this._isPropertyDriven("size")){var a=K.validateSymbolLayerSize(this._getIconSize());if(a)throw new c("graphics3diconsymbollayer:invalid-size",a);}};m.prototype._getIconSize=function(){var a=this.symbolLayer,a=Math.round(null!=a.size?v.pt2px(a.size):16);return this._isPropertyDriven("size")?Math.max(a,64):a};m.prototype._prepareMaterialParameters=function(){var a={anchorPos:this._getAnchorPos()},b=this.symbol;if(this._hasVisibleVerticalOffset(b)){var b=b.verticalOffset,c=b.minWorldLength,
e=b.maxWorldLength;a.verticalOffset={screenLength:v.pt2px(b.screenLength),minWorldLength:c||0,maxWorldLength:null!=e?e:Infinity}}this._context.screenSizePerspectiveEnabled&&(a.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings);return a};m.prototype._prepareResourcesPrimitive=function(a,b){var c=this,d=this._getOutlineSize();if(J(b)&&0===d)throw Error("Nothing to render");this._outlineSize=d;a.color=this._getFillColor();a.outlineColor=this._getOutlineColor();a.outlineSize=
this._outlineSize;var f=this._context.sharedResources.textures.fromData(b,function(){var a;switch(b){case "circle":a=O.createCircle(128,64);break;case "square":a=O.createSquare(128,64);break;case "kite":a=O.createKite(128,64);break;case "cross":a=O.createCross(128,64);break;case "x":a=O.createX(128,64);break;case "triangle":a=O.createTriangle(128,64);break;default:e.neverReached(b)}return new Z(a,"sdf_"+b,{mipmap:!1,wrap:{s:33071,t:33071},width:128,height:128,components:4,noUnpackFlip:!0})});this._texture=
f.texture;this._releaseTexture=function(){return c._context.sharedResources.textures.release(f.uid)};a.textureIsSignedDistanceField=!0;a.distanceFieldBoundingBox=X;a.textureId=this._texture.id;d=this._getIconSize();this._size=[d,d];this._symbolTextureRatio=2;this._createMaterialsAndAddToStage(a,this._context.stage)};m.prototype._prepareResourcesHref=function(a,e){return b(this,void 0,void 0,function(){var b,d,h,l,m,p,u,w,x,n,y=this;return k(this,function(k){switch(k.label){case 0:b=z.getIconHref(this.symbol,
this.symbolLayer);if(!f("esri-canvas-svg-support")&&t.isSVG(b))throw d="IconSymbol3DLayer failed to load (SVG symbols are not supported in IE11)",new c("graphics3diconsymbollayer:unsupported-image-format",d);this._outlineSize=this._getOutlineSize();a.color=this._getFillColor();a.outlineColor=this._getOutlineColor();a.outlineSize=this._outlineSize;a.textureIsSignedDistanceField=!1;h=this._getIconSize();l=h*this._context.layerView.view.pixelRatio;return[4,g.result(this._context.sharedResources.textures.fromUrl(b,
l,{signal:e}))];case 1:m=k.sent();if(!1===m.ok)throw q.throwIfAbortError(m.error),d="Failed to load (Request for icon resource failed: "+b+")",new c("graphics3diconsymbollayer:request-failed",d);p=m.value;u=p.uid;w=p.texture;this._releaseTexture=function(){return y._context.sharedResources.textures.release(u)};x=w.params;n=x.width/x.height;this._size=1<n?[h,Math.round(h/n)]:[Math.round(h*n),h];a.textureId=w.id;this._createMaterialsAndAddToStage(a,this._context.stage);return[2]}})})};m.prototype._getPrimitive=
function(){return this.symbolLayer.resource&&this.symbolLayer.resource.href?null:this.symbolLayer.resource&&this.symbolLayer.resource.primitive||u.defaultPrimitive};m.prototype._getOutlineSize=function(){var a=0,a=this.symbolLayer;if(p.isSome(a.outline)&&null!=a.outline.size)return Math.max(v.pt2px(a.outline.size),0);a=this._getPrimitive();a=J(a)?1.5:0;return Math.max(a,0)};m.prototype._getOutlineColor=function(){var a=this._getLayerOpacity(),b=p.get(this.symbolLayer,"outline","color");if(p.isSome(b)){var c=
h.toUnitRGB(b);return[c[0],c[1],c[2],b.a*a]}return[0,0,0,0]};m.prototype._getFillColor=function(){if(J(this._getPrimitive()))return B.TRANSPARENT;var a=p.isNone(this._getPrimitive()),b=p.get(this.symbolLayer,"material","color");return this._getCombinedOpacityAndColor(b,{hasIntrinsicColor:a})};m.prototype._getAnchorPos=function(){var a=this.symbolLayer.anchor,b=this.symbolLayer.anchorPosition;return"relative"===a?x.vec2f64.fromValues((b.x||0)+.5,-(b.y||0)+.5):a in K.namedAnchorToHUDMaterialAnchorPos?
K.namedAnchorToHUDMaterialAnchorPos[a]:K.namedAnchorToHUDMaterialAnchorPos.center};m.prototype._createMaterialsAndAddToStage=function(b,c){this._fastUpdates=I.initFastSymbolUpdatesState(this._context.renderer,this._fastVisualVariableConvertOptions());this._fastUpdates.enabled&&a.mixin(b,this._fastUpdates.materialParameters);var e=n({},b);e.verticalOffset=null;e.screenSizePerspective=null;e.occlusionTest=!1;e.slicePlaneEnabled=!1;e.shaderPolygonOffset=0;var d=this._getStageIdHint();this._drapedMaterial=
new Q(e,d+"_iconDraped");c.add(S.ModelContentType.MATERIAL,this._drapedMaterial);b.occlusionTest=!0;b.slicePlaneEnabled=this._context.slicePlaneEnabled;this._material=new Q(b,d+"_icon");c.add(S.ModelContentType.MATERIAL,this._material)};m.prototype.destroy=function(){d.prototype.destroy.call(this);this._material&&(this._context.stage.remove(S.ModelContentType.MATERIAL,this._material.id),this._material=null);this._drapedMaterial&&(this._context.stage.remove(S.ModelContentType.MATERIAL,this._drapedMaterial.id),
this._drapedMaterial=null);this._releaseTexture&&(this._releaseTexture(),this._releaseTexture=null)};m.prototype._getScaleFactor=function(a){if(this._isPropertyDriven("size")&&a.size){for(var b=0;3>b;b++){var c=a.size[b];c&&"symbolValue"!==c&&"proportional"!==c&&(a.size[b]=v.pt2px(c))}b=this._size[0]>this._size[1]?this._size[0]:this._size[1];if("symbolValue"===a.size[0])return 1;if(isFinite(+a.size[0]))return+a.size[0]/b;if(isFinite(+a.size[2]))return+a.size[2]/b}return 1};m.prototype.createGraphics3DGraphic=
function(a){var b=a.renderingInfo,c=a.graphic;if(!this._validateGeometry(c.geometry))return null;var e=N.placePointOnGeometry(c.geometry);if(p.isNone(e))return this.logger.warn("unsupported geometry type for icon symbol: "+c.geometry.type),null;var d="graphic"+c.uid,f=this._getVertexOpacityAndColor(b),g=1;this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||(g=this._getScaleFactor(b));g*=this._symbolTextureRatio;b=[this._size[0]*g,this._size[1]*g];g=this.getGraphicElevationContext(c);
return"on-the-ground"===g.mode?this._createAsOverlay(c,e,f,b,g,d,c.uid,a.layer.uid):this._createAs3DShape(c,e,f,b,g,d,c.uid)};m.prototype.layerOpacityChanged=function(){var a=this._getFillColor();this._drapedMaterial.setParameterValues({color:a});this._material.setParameterValues({color:a});a=this._getOutlineColor();this._drapedMaterial.setParameterValues({outlineColor:a});this._material.setParameterValues({outlineColor:a});return!0};m.prototype.layerElevationInfoChanged=function(a,b,c){var e=this._elevationContext.mode;
if("on-the-ground"===c&&"on-the-ground"===e)return!0;if(c!==e&&("on-the-ground"===c||"on-the-ground"===e))return!1;var d=N.needsElevationUpdates2D(e)||"absolute-height"===e;return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return d})};m.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};m.prototype.pixelRatioChanged=function(a,b){return this._getPrimitive()?!0:!1};m.prototype.applyRendererDiff=
function(a,b){for(var c in a.diff)switch(c){case "visualVariables":if(I.updateFastSymbolUpdatesState(this._fastUpdates,b,this._fastVisualVariableConvertOptions()))this._material.setParameterValues(this._fastUpdates.materialParameters),this._drapedMaterial.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};m.prototype.setDrawOrder=function(a,b,c){this.updateSymbolLayerOrder(a,b);this._drapedMaterial&&(this._drapedMaterial.renderPriority=a,c.add(this._drapedMaterial.id))};
m.prototype._defaultElevationInfoNoZ=function(){return G};m.prototype._createAs3DShape=function(a,b,c,e,d,f,g){var h=this,k=this.getFastUpdateAttrValues(a);a=k?function(a){return I.evaluateModelTransform(h._fastUpdates.materialParameters,k,a)}:null;c=V.createPointGeometry(U,null,c,e,Y,null,k);c=[new P(c,f)];f=N.createStageObjectForPoint(this._context,b,c,[this._material],null,null,d,f,this._context.layer.uid,g,!0,a);if(null===f)return null;var l=new E(this,f.object,c,null,null,C.perObjectElevationAligner,
d);l.alignedTerrainElevation=f.terrainElevation;l.needsElevationUpdates=N.needsElevationUpdates2D(d.mode)||"absolute-height"===d.mode;l.getScreenSize=this._createScreenSizeGetter(e,a);l.calculateRelativeScreenBounds=function(a){return h._material.calculateRelativeScreenBounds(l.getScreenSize(),1,a)};N.extendPointGraphicElevationContext(l,b,this._context.elevationProvider);return l};m.prototype._createAsOverlay=function(a,b,c,e,d,f,g,h){var k=this;this._drapedMaterial.renderPriority=this._symbolLayerOrder;
d=w.vec3f64.create();H.pointToVector(b,d,this._context.overlaySR);d[2]=this._getDrapedZ();if((b=this._context.clippingExtent)&&!N.pointInBox2D(d,b))return null;var l=this.getFastUpdateAttrValues(a);b=l?function(a){return I.evaluateModelTransform(k._fastUpdates.materialParameters,l,a)}:null;c=V.createPointGeometry(U,d,c,e,null,null,l);g=new T(c);g.material=this._drapedMaterial;g.center=d;g.bsRadius=0;g.transformation=R;g.name=f;g.uniqueName=f+"#"+c.id;g.data.layerUid=h;g.data.graphicUid=a.uid;g.calculateShaderTransformation=
b;var m=new F(this,[g],null);m.getScreenSize=this._createScreenSizeGetter(e,b);m.calculateRelativeScreenBounds=function(a){return k._drapedMaterial.calculateRelativeScreenBounds(m.getScreenSize(),1,a)};return m};m.prototype._createScreenSizeGetter=function(a,b){var c=this._outlineSize+2;if(this._fastUpdates.enabled){var e=a[0]/this._symbolTextureRatio,d=a[1]/this._symbolTextureRatio;return function(a){void 0===a&&(a=x.vec2f64.create());var f=b(R);a[0]=f[0]*e+c;a[1]=f[5]*d+c;return a}}var f=a[0]/this._symbolTextureRatio+
c,g=a[1]/this._symbolTextureRatio+c;return function(a){void 0===a&&(a=x.vec2f64.create());a[0]=f;a[1]=g;return a}};m.prototype._fastVisualVariableConvertOptions=function(){var a=this._size[0]>this._size[1]?this._size[0]:this._size[1],b=w.vec3f64.fromValues(a,a,a),c=v.px2pt(1),a=a*c,a=w.vec3f64.fromValues(a,a,a);return{modelSize:b,symbolSize:a,unitInMeters:c,transformation:{anchor:w.vec3f64.ZEROS,scale:w.vec3f64.ONES,rotation:w.vec3f64.ZEROS}}};m.prototype._hasVisibleVerticalOffset=function(a){return this.symbol&&
"point-3d"===this.symbol.type&&this.symbol.hasVisibleVerticalOffset()};m.PRIMITIVE_SIZE=ca;return m}(L.default);d.Graphics3DIconSymbolLayer=r;var G={mode:"relative-to-ground",offset:0},Y=m.vec4f64.fromValues(0,0,0,1);d.default=r})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/maybe ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(r,d,n,l,k,b,h,g,e,c,f){function a(a,
b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new n(a)}function p(b,c,e){if(b=b.symbolLayers){var d=function(b){b=g.isSome(b)?b:null;c=c||b||null!=e&&y;return a(c,e)};b.forEach(function(b){if("water"===b.type)b.color=d(b.color);else{var c=g.isSome(b.material)?b.material.color:null,c=d(c);g.isNone(b.material)?b.material=new f.default({color:c}):b.material.color=c;null!=e&&"outline"in b&&g.isSome(b.outline)&&g.isSome(b.outline.color)&&(b.outline.color=a(b.outline.color,e))}})}}function q(a,b,c){(a=
a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=b;break;case "object":switch(c){case "width":a.width=b;break;case "depth":a.depth=b;break;case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:v.warn("symbolUtils: applySizeToSymbol","symbolLayer not supported")}})}Object.defineProperty(d,"__esModule",{value:!0});var v=h.getLogger("esri.symbols.support.utils"),
t=/\/resource\/(.*?)\.svg$/,y=new n("white");d.getSymbolOutlineSize=function(a){if(!a)return 0;if(l.isSymbol3D(a)){var b=a.symbolLayers&&a.symbolLayers.length;b?(a=a.symbolLayers.getItemAt(b-1),a="outline"in a?g.get(a,"outline","size"):void 0):a=void 0;return g.isSome(a)?a:0}return(a=c.getStroke(a))&&e.px2pt(a.width)||0};d.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===
a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||"extrude"===a.type});default:return!1}};d.getIconHref=function(a,c){c=c.resource.href;return!b("esri-canvas-svg-support")&&a.styleOrigin&&t.test(c)?c.replace(t,"/resource/png/$1.png"):c};d.applyOpacityToColor=a;d.applyColorToSymbol=function(b,c,e){if(b&&(c||null!=e))if(c&&(c=new n(c)),l.isSymbol3D(b))p(b,c,e);else if(l.isSymbol2D(b)){if(c=c||b.color)b.color=a(c,e);null!=e&&"outline"in b&&b.outline&&b.outline.color&&
(b.outline.color=a(b.outline.color,e))}};d.applySizeToSymbol=function(a,b,c){if(a&&null!=b)if(l.isSymbol3D(a))q(a,b,c);else if(l.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=b;break;case "picture-marker":c=a.width/a.height;1<c?(a.width=b,a.height=b*c):(a.width=b*c,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:k.neverReached(a)}};d.applyRotationToSymbol=function(a,b,c){a&&null!=
b&&(l.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!l.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),function(r,d,n,l,
k,b,h,g){function e(a){if(!a)return null;var b,c=g.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=e(a.outline);break;case "simple-line":"none"!==a.style&&0!==c&&(b={color:a.color,style:v(a.style),width:c,cap:a.cap,join:"miter"===a.join?g.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(d,"__esModule",{value:!0});var c=r.toUrl("../../symbols/patterns/"),f={type:"pattern",x:0,y:0,width:0,height:0,src:""},a={left:"start",center:"middle",
right:"end",justify:"start"},p={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=new b(1E3);d.getSVGAlign=function(b){return b=(b=b.horizontalAlignment)&&a[b.toLowerCase()]||"middle"};d.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&p[a.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};d.getFill=function(a){var b=a.style,e=null;if(a)switch(a.type){case "simple-marker":"cross"!==b&&
"x"!==b&&(e=a.color);break;case "simple-fill":"solid"===b?e=a.color:"none"!==b&&(e=n({},f,{src:c+b+".png",width:8,height:8}));break;case "picture-fill":e=n({},f,{src:a.url,width:g.pt2px(a.width)*a.xscale,height:g.pt2px(a.height)*a.yscale,x:g.pt2px(a.xoffset),y:g.pt2px(a.yoffset)});break;case "text":e=a.color}return e};d.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return void 0!==q.get(c)?h.resolve(q.get(c)):k(a,{responseType:"image"}).then(function(a){a=a.data;var e=a.naturalWidth,d=a.naturalHeight,
f=document.createElement("canvas");f.width=e;f.height=d;var g=f.getContext("2d");g.fillStyle=b;g.fillRect(0,0,e,d);g.globalCompositeOperation="destination-in";g.drawImage(a,0,0);a=f.toDataURL();q.put(c,a);return a})};d.getStroke=e;d.create2DColorRamp=function(a){var b=a.colors,c=a.numClasses,e=a.size;a=a.surface.createGroup();for(var e=(e||75)/c,d=0;d<c;d++)for(var f=d*e,g=0;g<c;g++){var h=b[d][g];a.createRect({x:g*e,y:f,width:e,height:e}).setFill(h).setStroke(null)}return a};var v=function(){var a=
{};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();d.defaultThematicColor=new l([128,128,128])})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(r,d,n){return function(){function d(d,b){this._storage=new n.MemCacheStorage;this._storage.maxSize=d;b&&this._storage.registerRemoveFunc("",b)}d.prototype.put=function(d,b){this._storage.put(d,b,1,1)};d.prototype.pop=function(d){return this._storage.pop(d)};d.prototype.get=function(d){return this._storage.get(d)};
d.prototype.clear=function(){this._storage.clearAll()};d.prototype.destroy=function(){this._storage.clearAll()};return d}()})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./PooledArray","./string"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(b,d,e){this._namespace=b;this._storage=d;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";e&&(this._storage.registerRemoveFunc(this._namespace,
e),this._removeFunc=!0)}Object.defineProperty(b.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,
configurable:!0});b.prototype.resetHitRate=function(){this._hit=this._miss=0};b.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};b.prototype.put=function(b,d,e,c){void 0===c&&(c=1);this._storage.put(this._namespace+b,d,e,c)};b.prototype.get=function(b){b=this._storage.get(this._namespace+b);void 0===b?++this._miss:++this._hit;return b};b.prototype.pop=function(b){b=this._storage.pop(this._namespace+
b);void 0===b?++this._miss:++this._hit;return b};b.prototype.clear=function(){this._storage.clear(this._namespace)};b.prototype.clearAll=function(){this._storage.clearAll()};b.prototype.getStats=function(){return this._storage.getStats()};b.prototype.resetStats=function(){this._storage.resetStats()};return b}();d.MemCache=r;r=function(){function b(b){void 0===b&&(b=10485760);this._maxSize=b;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new l}b.prototype.register=
function(b){this._users.push(b)};b.prototype.deregister=function(b){this._users.removeUnordered(b)};b.prototype.registerRemoveFunc=function(b,d){this._removeFuncs.push([b,d])};b.prototype.deregisterRemoveFunc=function(b){this._removeFuncs=this._removeFuncs.filter(function(d){return d[0]!==b})};Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"maxSize",{get:function(){return this._maxSize},set:function(b){this._maxSize=
Math.max(b,0);this._size>this._maxSize&&this._removeEntries()},enumerable:!0,configurable:!0});b.prototype.put=function(b,d,e,c){if(this._db.has(b)){var f=this._db.get(b);this._size-=f.size;this._db.delete(b);this._notifyRemoved(b,f.entry)}e>this._maxSize?this._notifyRemoved(b,d):void 0===d?console.warn("Refusing to cache undefined entry "):!e||0>e?console.warn("Refusing to cache entry with invalid size "+e):(this._db.set(b,{entry:d,size:e,lifetime:c,lives:c}),this._size+=e,this._size>this._maxSize&&
this._removeEntries())};b.prototype.pop=function(b){if(this._db.has(b)){var d=this._db.get(b);this._size-=d.size;this._db.delete(b);++this._hit;return d.entry}++this._miss};b.prototype.get=function(b){var d=this._db.get(b);if(void 0===d)++this._miss;else return this._db.delete(b),d.lives=d.lifetime,this._db.set(b,d),++this._hit,d.entry};b.prototype.getStats=function(){var b=this,d={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},e={},c=[];this._db.forEach(function(a,d){var f=a.lifetime;c[f]=(c[f]||0)+1;b._users.forEach(function(b){b=b.namespace;if(k.startsWith(d,b))return e[b]=(e[b]||0)+a.size,!1})});var f={};this._users.forEach(function(a){var b=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(e[b]=e[b]||0,f[b]=Math.round(100*a.hitRate)+"%"):f[b]="0%"});var a=Object.keys(e);a.forEach(function(a){return e[a]=e[a]/b._size*100});a.sort(function(a,b){return e[b]-e[a]});a.forEach(function(a){return d[a]=
Math.round(e[a])+"% / "+f[a]});for(a=0;a<c.length;++a){var l=c[a];l&&(d["Lifetime "+a]=Math.round(l/this._db.size*100)+"%")}return d};b.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(b){return b.resetHitRate()})};b.prototype.clear=function(b){var d=this;this._db.forEach(function(e,c){k.startsWith(c,b)&&(d._size-=e.size,d._db.delete(c),d._notifyRemoved(c,e.entry))})};b.prototype.clearAll=function(){var b=this;this._db.forEach(function(d,e){b._notifyRemoved(e,d.entry)});
this._size=0;this._db.clear()};b.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)};b.prototype._notifyRemoved=function(b,d){this._removeFuncs.forEach(function(e){if(k.startsWith(b,e[0]))e[1](d)})};b.prototype._removeEntries=function(){var b=this;n.everyMap(this._db,function(d,e){b._db.delete(e);1>=d.lives?(b._size-=d.size,b._notifyRemoved(e,d.entry)):(--d.lives,b._db.set(e,d));return b._size>.9*b.maxSize})};return b}();d.MemCacheStorage=r})},"esri/views/3d/layers/graphics/constants":function(){define(["require",
"exports","../../../../core/libs/gl-matrix-2/vec4f64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.defaultIconElevationOffset=1;d.SUSPEND_RESUME_EXTENT_OPTIMISM=1.2;d.WHITE=new Float32Array([1,1,1,1]);d.TRANSPARENT=n.vec4f64.ZEROS})},"esri/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ./graphicUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){r=function(){function e(a,b,c){this.type="draped";this.graphics3DSymbolLayer=a;this.renderGeometries=b;this.boundingBox=c;this.stage=null;this._visible=!1}e.prototype.initialize=function(a,b){this.stage=b};e.prototype.setVisibility=function(a){if(null!=this.stage)return this._visible!==a?((this._visible=a)?this.stage.renderView.getDrapedRenderer().addRenderGeometries(this.renderGeometries):this.stage.renderView.getDrapedRenderer().removeRenderGeometries(this.renderGeometries),
!0):!1};e.prototype.destroy=function(){this.stage&&this._visible&&this.stage.renderView.getDrapedRenderer().removeRenderGeometries(this.renderGeometries);this._visible=!1;this.stage=null};e.prototype.getBSRadius=function(){return this.renderGeometries.reduce(function(a,b){return Math.max(a,b.bsRadius)},0)};e.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=h.vec3f64.create());return b.vec3.set(a,0,0,0)};e.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=g.create());return g.empty(a)};
e.prototype.addHighlight=function(a,b){var c=this;this.renderGeometries.forEach(function(e){var d=e.addHighlight(b);a.addRenderGeometry(e,d,c)});this._visible&&this.stage.renderView.getDrapedRenderer().updateHighlights(this.renderGeometries)};e.prototype.removeHighlight=function(a){this.renderGeometries.forEach(function(b){a.removeRenderGeometry(b)})};e.prototype.removeRenderGeometryHighlight=function(a,b){a.removeHighlight(b);this._visible&&this.stage.renderView.getDrapedRenderer().updateHighlights(this.renderGeometries)};
e.prototype.getProjectedBoundingBox=function(a,b,e,d,h){return k(this,void 0,void 0,function(){var k,q,t,w;return l(this,function(l){switch(l.label){case 0:g.empty(h);for(k=0;k<this.renderGeometries.length;k++)q=this.renderGeometries[k],this._getRenderGeometryProjectedBoundingRect(q,a,f,e),g.expand(h,f);if(!b)return[3,5];g.center(h,p);t=void 0;w=c.demResolutionForBoundingBox(h,b);l.label=1;case 1:return l.trys.push([1,3,,4]),[4,b.service.queryElevation(p[0],p[1],d,w)];case 2:return t=l.sent(),[3,
4];case 3:return l.sent(),t=null,[3,4];case 4:null!=t&&(h[2]=Math.min(h[2],t),h[5]=Math.max(h[5],t)),l.label=5;case 5:return[2,h]}})})};e.prototype._getRenderGeometryProjectedBoundingRect=function(b,c,e,d){if(this.boundingBox)g.set(a,this.boundingBox);else{var f=b.center;b=b.bsRadius;a[0]=f[0]-b;a[1]=f[1]-b;a[2]=f[2]-b;a[3]=f[0]+b;a[4]=f[1]+b;a[5]=f[2]+b}c(a,0,2);this.calculateRelativeScreenBounds&&d.push({location:g.center(a),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()});return g.toRect(a,
e)};return e}();var f=e.create(),a=g.create(),p=[0,0,0];return r})},"esri/views/3d/layers/graphics/sdfPrimitives":function(){define(["require","exports","../../webgl-engine/lib/Util"],function(r,d,n){function l(b,d,g){g&&(d/=Math.SQRT2);for(var e=new Uint8Array(4*b*b),c=0;c<b;c++)for(var f=0;f<b;f++){var a=f-.5*b+.25,h=-c+.5*b-.75,k=c*b+f;if(g)var l=(a+h)/Math.SQRT2,h=(h-a)/Math.SQRT2,a=l;a=Math.max(Math.abs(a),Math.abs(h))-.5*d;a=a/b+.5;n.packFloatRGBA(a,e,4*k)}return e}function k(b,d,g){g&&(d*=
Math.SQRT2);d*=.5;for(var e=new Uint8Array(4*b*b),c=0;c<b;c++)for(var f=0;f<b;f++){var a=f-.5*b,h=-c+.5*b-1,k=c*b+f;if(g)var l=(a+h)/Math.SQRT2,h=(h-a)/Math.SQRT2,a=l;l=void 0;a=Math.abs(a);h=Math.abs(h);l=a>h?a>d?Math.sqrt((a-d)*(a-d)+h*h):h:h>d?Math.sqrt(a*a+(h-d)*(h-d)):a;l=l/b+.5;n.packFloatRGBA(l,e,4*k)}return e}Object.defineProperty(d,"__esModule",{value:!0});d.createCircle=function(b,d){var g=new Uint8Array(4*b*b),e=b/2-.5;d/=2;for(var c=0;c<b;c++)for(var f=0;f<b;f++){var a=f+b*c,h=f-e,k=c-
e,h=Math.sqrt(h*h+k*k)-d,h=h/b+.5;n.packFloatRGBA(h,g,4*a)}return g};d.createSquare=function(b,d){return l(b,d,!1)};d.createKite=function(b,d){return l(b,d,!0)};d.createCross=function(b,d){return k(b,d,!1)};d.createX=function(b,d){return k(b,d,!0)};d.createTriangle=function(b,d){for(var g=new Uint8Array(4*b*b),e=Math.sqrt(1.25),c=(b-d)/2,f=0;f<b;f++)for(var a=0;a<b;a++){var h=(a-c)/d,k=(f-c+.75)/d;n.packFloatRGBA(Math.max(-(1*h+-.5*k)/e,(1*(h-1)+-.5*-k)/e,-k)*d/b+.5,g,4*(f*b+a))}return g}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){function p(a){return null!==a&&void 0!==a}function q(a){return"number"===typeof a}function v(a){return"string"===typeof a}function t(a,b){a&&a.push(b)}function y(a,b,c,e,d){var g=a.minSize,h=a.maxSize;if(a.expression)return t(d,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=e.symbolSize[c],b.minSize[c]=a,b.maxSize[c]=a,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(p(a.field)){if(p(a.stops)){if(2===a.stops.length&&
q(a.stops[0].size)&&q(a.stops[1].size))return x(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,b,c),b.type[c]=1,!0;t(d,"Could not convert size info: stops only supported with 2 elements");return!1}if(q(g)&&q(h)&&p(a.minDataValue)&&p(a.maxDataValue))return x(g,h,a.minDataValue,a.maxDataValue,b,c),b.type[c]=1,!0;if(null!=f.meterIn[a.valueUnit])return b.minSize[c]=-Infinity,b.maxSize[c]=Infinity,b.offset[c]=0,b.factor[c]=1/f.meterIn[a.valueUnit],b.type[c]=1,!0;if("unknown"===a.valueUnit)return t(d,
"Could not convert size info: proportional size not supported"),!1;t(d,"Could not convert size info: scale-dependent size not supported");return!1}if(!p(a.field)){if(a.stops&&a.stops[0]&&q(a.stops[0].size))return b.minSize[c]=a.stops[0].size,b.maxSize[c]=a.stops[0].size,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(q(g))return b.minSize[c]=g,b.maxSize[c]=g,b.offset[c]=g,b.factor[c]=0,b.type[c]=1,!0}t(d,"Could not convert size info: unsupported variant of sizeInfo");return!1}function x(a,
b,c,e,d,f){e=0<Math.abs(e-c)?(b-a)/(e-c):0;d.minSize[f]=0<e?a:b;d.maxSize[f]=0<e?b:a;d.offset[f]=a-c*e;d.factor[f]=e}function w(a,b,c,e){if(a.normalizationField||a.valueRepresentation)return t(e,"Could not convert size info: unsupported property"),null;var d=a.field;if(null!=d&&!v(d))return t(e,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=
a.field;else if(a.field!==b.size.field)return t(e,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(d=y(a,b.size,0,c,e))?b:null;case "height":return(d=y(a,b.size,2,c,e))?b:null;case "depth":return(d=y(a,b.size,1,c,e))?b:null;case "width-and-depth":return(d=y(a,b.size,0,c,e))&&y(a,b.size,1,c,e),d?b:null;case null:case void 0:case "all":return(d=(d=(d=y(a,b.size,0,c,e))&&y(a,b.size,1,c,e))&&y(a,b.size,2,c,e))?b:null;default:return t(e,'Could not convert size info: unknown axis "'+
a.axis+'""'),null}}function m(a,b,c){for(var e=0;3>e;++e){var d=b.unitInMeters;1===a.type[e]&&(d*=b.modelSize[e],a.type[e]=2);a.minSize[e]/=d;a.maxSize[e]/=d;a.offset[e]/=d;a.factor[e]/=d}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==a.type[2])b=2;else return t(c,"No size axis contains a valid size or scale"),!1;for(e=0;3>e;++e)0===a.type[e]&&(a.minSize[e]=a.minSize[b],a.maxSize[e]=a.maxSize[b],a.offset[e]=a.offset[b],a.factor[e]=a.factor[b],a.type[e]=a.type[b]);return!0}function u(a,
b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function z(a,b,c){if(a.normalizationField)return t(c,"Could not convert color info: unsupported property"),null;if(v(a.field))if(a.stops){if(8<a.stops.length)return t(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var e=c[Math.min(a,c.length-1)];b.color.values[a]=e.value;
u(b.color.colors,a,e.color)}}else return t(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length)for(c=a.stops&&0<=a.stops.length&&a.stops[0].color,b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.color.values[a]=Infinity,u(b.color.colors,a,c);else return t(c,"Could not convert color info: no field and no colors/stops"),null;return b}function B(a,b,c){if(a.normalizationField)return t(c,
"Could not convert opacity info: unsupported property"),null;if(v(a.field))if(a.stops){if(8<a.stops.length)return t(c,"Could not convert opacity info: too many opacity stops"),null;b.opacity={field:a.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var e=c[Math.min(a,c.length-1)];b.opacity.values[a]=e.value;b.opacity.opacityValues[a]=e.opacity}}else return t(c,"Could not convert opacity info: missing stops or opacities"),null;else if(a.stops&&0<=a.stops.length)for(c=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,b.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.opacity.values[a]=Infinity,b.opacity.opacityValues[a]=c;else return t(c,"Could not convert opacity info: no field and no opacities/stops"),null;return b}function C(a,b,c,e){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function F(a,b,c){if(!v(a.field))return t(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return t(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return C(a,b.rotation,0,c),b;case "roll":return C(a,b.rotation,1,c),b;case null:case void 0:case "heading":return C(a,b.rotation,2,c),b;default:return t(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function E(a,b,c){if(!a)return null;var e=!b.supportedTypes||!!b.supportedTypes.size,d=!b.supportedTypes||!!b.supportedTypes.color,f=!b.supportedTypes||!!b.supportedTypes.rotation,g=!!b.supportedTypes&&!!b.supportedTypes.opacity,h=a.reduce(function(a,h){if(!a)return a;if(h.valueExpression)return t(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(h.type){case "size":return e?w(h,a,b,c):a;case "color":return d?z(h,a,c):a;case "opacity":return g?B(h,a,
c):a;case "rotation":return f?F(h,a,c):a;default:return n.neverReached(h),null}},{size:null,color:null,opacity:null,rotation:null});return 0<a.length&&h&&!h.size&&!h.color&&!h.opacity&&!h.rotation||h&&h.size&&!m(h.size,b,c)?null:h}function N(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function L(a,c){var e={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,
vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},d=a&&null!=a.size;a&&a.size?(e.vvSizeEnabled=!0,e.vvSizeMinSize=a.size.minSize,e.vvSizeMaxSize=a.size.maxSize,e.vvSizeOffset=a.size.offset,e.vvSizeFactor=a.size.factor):a&&d&&(e.vvSizeValue=c.transformation.scale);if(a&&d){e.vvSymbolAnchor=c.transformation.anchor;e.vvSymbolRotationMatrix=
b.mat3f64.create();h.mat4.identity(O);var f=c.transformation.rotation[2],d=c.transformation.rotation[0],l=c.transformation.rotation[1];c=O;void 0===c&&(c=g.mat4f64.create());f=f||0;d=d||0;l=l||0;0!==f&&h.mat4.rotateZ(c,c,-f/180*Math.PI);0!==d&&h.mat4.rotateX(c,c,d/180*Math.PI);0!==l&&h.mat4.rotateY(c,c,l/180*Math.PI);k.mat3.fromMat4(e.vvSymbolRotationMatrix,O)}a&&a.color&&(e.vvColorEnabled=!0,e.vvColorValues=a.color.values,e.vvColorColors=a.color.colors);a&&a.opacity&&(e.vvOpacityEnabled=!0,e.vvOpacityValues=
a.opacity.values,e.vvOpacityOpacities=a.opacity.opacityValues);return e}Object.defineProperty(d,"__esModule",{value:!0});d.convertVisualVariables=E;d.initFastSymbolUpdatesState=function(b,c){return!b||a.DISABLE_FAST_UPDATES?{enabled:!1}:(b=E(b.visualVariables,c))?{enabled:!0,visualVariables:b,materialParameters:L(b,c),requiresShaderTransformation:b&&null!=b.size}:{enabled:!1}};d.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var e=a.visualVariables;b=E(b.visualVariables,c);
if(!(b&&N(e.size,b.size,"size")&&N(e.color,b.color,"color")&&N(e.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=L(b,c);a.requiresShaderTransformation=b&&null!=b.size;return!0};d.getMaterialParams=L;var K;(function(a){var b=g.mat4f64.create(),d=c.vec3f64.create();a.evaluateModelTransform=function(a,c,e){if(!a.vvSizeEnabled)return e;h.mat4.copy(b,e);e=a.vvSymbolRotationMatrix;h.mat4.set(O,e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1);h.mat4.multiply(b,
b,O);for(e=0;3>e;++e)d[e]=l.clamp(a.vvSizeOffset[e]+c[0]*a.vvSizeFactor[e],a.vvSizeMinSize[e],a.vvSizeMaxSize[e]);h.mat4.scale(b,b,d);h.mat4.translate(b,b,a.vvSymbolAnchor);return b};a.evaluateModelTransformScale=function(a,b,c){if(!b.vvSizeEnabled)return e.vec3.set(a,1,1,1);for(var d=0;3>d;++d)a[d]=l.clamp(b.vvSizeOffset[d]+c[0]*b.vvSizeFactor[d],b.vvSizeMinSize[d],b.vvSizeMaxSize[d]);return a}})(K||(K={}));var O=g.mat4f64.create();d.evaluateModelTransform=K.evaluateModelTransform;d.evaluateModelTransformScale=
K.evaluateModelTransformScale})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/mathUtils ../../../../core/typedArrayUtil ../../support/imageUtils ../../support/mathUtils ./DDSUtil ./DefaultVertexBufferLayouts ./glUtil3D ./IdGen ./Util ../shaders/MiscPrograms ../../../webgl/FramebufferObject ../../../webgl/renderState ../../../webgl/Texture ../../../webgl/Util ../../../webgl/capabilities/isWebGL2Context".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){var m=l.getLogger("esri.views.3d.webgl-engine.lib.Texture");r=function(){function d(a,b,c){this.data=a;this.id=d.idGen.gen(b);this.unloadFunc=void 0;this.params=c||{};this.params.mipmap=!1!==this.params.mipmap;this.params.noUnpackFlip=this.params.noUnpackFlip||!1;this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1;this.params.wrap=this.params.wrap||{s:10497,t:10497};this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1;this.estimatedTexMemRequired=
d.estimateTexMemRequired(this.data,this.params)}d.estimateTexMemRequired=function(a,c){return null==a?0:b.isArrayBuffer(a)||b.isUint8Array(a)?a.byteLength:a instanceof Image||a instanceof ImageData||a instanceof HTMLCanvasElement?(c.mipmap?4/3:1)*a.width*a.height*(c.components||4):(c.mipmap?4/3:1)*c.width*c.height*(c.components||4)||0};d.prototype.getEstimatedTexMemRequired=function(){return this.estimatedTexMemRequired};d.prototype.dispose=function(){this.data=void 0};d.prototype.deferredLoading=
function(){return"string"===typeof this.data};d.prototype.getWidth=function(){return this.params.width};d.prototype.getHeight=function(){return this.params.height};d.prototype.initializeThroughUpload=function(a,c,f,g,h){var k=this.data;c.flipped=!this.params.noUnpackFlip;c.samplingMode=this.params.mipmap?9987:9729;c.hasMipmap=this.params.mipmap;c.wrapMode=this.params.wrap;c.preMultiplyAlpha=this.params.preMultiplyAlpha;if("string"===typeof k)this.loadTextureFromUri(a,k,c,f,g,h);else if(k instanceof
Image||k instanceof ImageData||k instanceof HTMLCanvasElement)this.loadTextureFromImageData(a,k,c,f,g,h);else{if(b.isArrayBuffer(k)&&this.params.encoding===d.DDS_ENCODING)c=e.createDDSTexture(a,c,k,this.params.mipmap);else if(b.isUint8Array(k)&&this.params.encoding===d.DDS_ENCODING)c=e.createDDSTexture(a,c,k.buffer,this.params.mipmap);else if(b.isUint8Array(k))p.assert(0<this.params.width&&0<this.params.height),c.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,c.width=
this.params.width,c.height=this.params.height,c=new y(a,c,k);else{if(null!==k)throw console.warn("Unsupported image data"),Error("Unsupported image data");c=new y(a,c,null)}a.bindTexture(c);h(c)}this.data=void 0};d.prototype.loadTextureFromImageData=function(a,b,c,e,d,f){this.params.width=b.width;this.params.height=b.height;c.pixelFormat=3===this.params.components?6407:6408;var h=33071===this.params.wrap.s&&33071===this.params.wrap.t;w.default(a.gl)||!this.params.mipmap&&h||g.isPowerOfTwo(b.width)&&
g.isPowerOfTwo(b.height)?(c.width=b.width,c.height=b.height,b=new y(a,c,b)):b=this.makePowerOfTwoTexture(a,b,c,e,d);a.bindTexture(b);f(b)};d.prototype.loadTextureFromUri=function(a,b,c,e,d,f){var k=this,l=!1!==this.params.mipmap;h.requestImage(b).then(function(b){p.assert(1<=b.width&&1<=b.height);c.samplingMode=l?9987:9729;c.hasMipmap=l;!l&&33071===c.wrapMode||g.isPowerOfTwo(b.width)&&g.isPowerOfTwo(b.height)?(c.width=b.width,c.height=b.height,b=new y(a,c,b)):b=k.makePowerOfTwoTexture(a,b,c,e,d);
a.bindTexture(b);f(b)}).catch(function(a){var c=200<b.length?b.slice(0,100)+"..."+b.slice(b.length-100):b;m.error("Failed to load image from uri",c,a);f(null)})};d.prototype.makePowerOfTwoTexture=function(a,b,c,e,d){var f=b.width,g=b.height,h=k.nextHighestPowerOfTwo(f),l=k.nextHighestPowerOfTwo(g);c.width=h;c.height=l;var m;switch(this.params.powerOfTwoResizeMode){case 2:c.textureCoordinateScaleFactor=[f/h,g/l];m=new y(a,c);m.updateData(0,0,0,f,g,b);break;case 1:case null:case void 0:m=this.stretchToPowerOfTwo(a,
b,c,e,d);break;default:n.neverReached(this.params.powerOfTwoResizeMode)}c.hasMipmap&&m.generateMipmap();return m};d.prototype.stretchToPowerOfTwo=function(a,b,e,d,g){var h=new y(a,e),k=v.createWithAttachments(a,h,{colorTarget:0,depthStencilTarget:0});b=new y(a,{target:3553,pixelFormat:e.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!e.flipped,maxAnisotropy:8,preMultiplyAlpha:e.preMultiplyAlpha},b);a.bindFramebuffer(k);void 0===g&&(g=a.getViewport(),g=[g.x,g.y,g.width,g.height]);
a.setViewport(0,0,e.width,e.height);e=d.getProgram(q.texOnly);a.bindProgram(e);e.setUniform4f("color",1,1,1,1);e.setUniform1i("tex",0);e=f.createQuadVAO(a,c.Pos3Tex);a.bindTexture(b,0);a.bindVAO(e);a.setPipelineState(u);a.drawArrays(5,0,x.vertexCount(e,"geometry"));a.bindFramebuffer(null);a.setViewport(g[0],g[1],g[2],g[3]);e.dispose(!0);b.dispose();a.bindFramebuffer(null);k.detachColorTexture();k.dispose();return h};d.prototype.setUnloadFunc=function(a){this.unloadFunc=a};d.prototype.unload=function(){void 0!==
this.unloadFunc&&(this.unloadFunc(this.id),this.unloadFunc=void 0)};d.createEmpty=function(a){void 0===a&&(a="emptyTexture");return new d(new Uint8Array([0,0,0,0]),a,{width:1,height:1,wrap:{s:33071,t:33071}})};d.idGen=new a;d.DDS_ENCODING="image/vnd-ms.dds";return d}();var u=t.makePipelineState({colorWrite:t.defaultColorWriteParams});return r})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["require","exports","../../../../core/Logger","../../support/mathUtils","../../../webgl/Texture"],
function(r,d,n,l,k){function b(b){return b.charCodeAt(0)+(b.charCodeAt(1)<<8)+(b.charCodeAt(2)<<16)+(b.charCodeAt(3)<<24)}Object.defineProperty(d,"__esModule",{value:!0});var h=n.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),g=b("DXT1"),e=b("DXT3"),c=b("DXT5");d.createDDSTexture=function(b,a,d,q){var f=new Int32Array(d,0,31);if(542327876!==f[0])return h.error("Invalid magic number in DDS header"),null;if(!(f[20]&4))return h.error("Unsupported format, must contain a FourCC code"),null;var p=
f[21],n;switch(p){case g:p=8;n=33776;break;case e:p=16;n=33778;break;case c:p=16;n=33779;break;default:return h.error("Unsupported FourCC code:",String.fromCharCode(p&255,p>>8&255,p>>16&255,p>>24&255)),null}var x=1,w=f[4],m=f[3];if(0!==(w&3)||0!==(m&3))h.warn("Rounding up compressed texture size to nearest multiple of 4."),w=w+3&-4,m=m+3&-4;a.width=w;a.height=m;f[2]&131072&&!1!==q&&(x=Math.max(1,f[7]));1===x||l.isPowerOfTwo(w)&&l.isPowerOfTwo(m)||(h.warn("Ignoring mipmaps of non power of two sized compressed texture."),
x=1);for(var u=f[1]+4,z=[],B=0;B<x;++B)f=(w+3>>2)*(m+3>>2)*p,q=new Uint8Array(d,u,f),z.push(q),u+=f,w=Math.max(1,w>>1),m=Math.max(1,m>>1);a.samplingMode=1<x?9987:9729;a.hasMipmap=1<x;a.internalFormat=n;a=new k(b,a,{type:"compressed",levels:z});b.bindTexture(a);return a}})},"esri/views/3d/layers/graphics/Graphics3DLineSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/lang ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f32 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./lineUtils ../support/FastSymbolUpdates ../../../../views/3d/support/mathUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/materials/RibbonLineMaterial ../../webgl-engine/shaders/RibbonLinePrograms".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function r(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._lineWidthLOD=1;return a}n(r,d);r.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a,c,d,f;return l(this,function(k){this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[1,1,1],unitInMeters:1,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,
rotation:!1}};this._fastUpdates=this._context.renderer&&this._context.renderer.visualVariables&&0<this._context.renderer.visualVariables.length?B.initFastSymbolUpdatesState(this._context.renderer,this._vvConvertOptions):{enabled:!1};a=this._getCombinedOpacityAndColor(g.get(this.symbolLayer,"material","color"));c=a[3];d={width:1,color:a,polygonOffset:!0,join:this.symbolLayer.join||"miter",cap:this.symbolLayer.cap||"butt",transparent:1>c||this._isPropertyDriven("opacity"),slicePlaneEnabled:this._context.slicePlaneEnabled};
if(this._isPropertyDriven("size"))this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size&&(d.width=e.pt2px(1));else{f=null!=this.symbolLayer.size?this.symbolLayer.size:e.px2pt(1);if(0>f)throw new b("graphics3dlinesymbollayer:invalid-size","Symbol sizes may not be negative values");d.width=e.pt2px(f);"round"===d.join&&(this._lineWidthLOD=1.863798+-2.0062872/Math.pow(1+f/18.2313,.8856294))}this._fastUpdates&&this._fastUpdates.visualVariables&&h.mixin(d,this._fastUpdates.materialParameters,
{});this._material=new K(d,this._getStageIdHint()+"_ribbonlinemat");this._context.stage.add(F.ModelContentType.MATERIAL,this._material);return[2]})})};r.prototype.destroy=function(){d.prototype.destroy.call(this);this._material&&(this._context.stage.remove(F.ModelContentType.MATERIAL,this._material.id),this._material=null)};r.prototype.getDrivenSize=function(a){var b=new Float32Array(1);this._isPropertyDriven("size")&&a.size?b[0]=e.pt2px(m.getSingleSizeDriver(a.size)):b[0]=1;return b};r.prototype.getSizeFeatureAttribute=
function(a){var b=new Float32Array(1);b[0]=u.getAttributeValue(this._fastUpdates.visualVariables.size.field,a);return b};r.prototype.getDrivenColor=function(a,b){b=q.vec4f32.fromValues(1,1,1,1);this._isPropertyDriven("color")&&a.color&&(b[0]=a.color[0],b[1]=a.color[1],b[2]=a.color[2],0<a.color.length&&(b[3]=a.color[3]));this._isPropertyDriven("opacity")&&a.opacity&&(b[3]=a.opacity);return b};r.prototype.getColorFeatureAttribute=function(a){var b=new Float32Array(1);b[0]=u.getAttributeValue(this._fastUpdates.visualVariables.color.field,
a);return b};r.prototype.getOpacityFeatureAttribute=function(a){var b=new Float32Array(1);b[0]=u.getAttributeValue(this._fastUpdates.visualVariables.opacity.field,a);return b};r.prototype.createGraphics3DGraphic=function(a){var b=a.graphic,c=b.geometry;if("polyline"!==c.type&&"polygon"!==c.type&&"extent"!==c.type)return this.logger.warn("unsupported geometry type for line symbol: "+c.type),null;if(!this._validateGeometry(c))return null;var c="polygon"===c.type||"extent"===c.type?"rings":"paths",e=
"graphic"+b.uid,d=this.getGraphicElevationContext(b);return"on-the-ground"===d.mode?this._createAsOverlay(a,c,d,e,this._context.layer.uid):this._createAs3DShape(a,c,d,e,b.uid)};r.prototype.applyRendererDiff=function(a,b){for(var c in a.diff)switch(c){case "visualVariables":if(B.updateFastSymbolUpdatesState(this._fastUpdates,b,this._vvConvertOptions))this._material.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};r.prototype.layerOpacityChanged=
function(){var a=this._material.getColor(),b=g.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacity(b),c=1>b||this._isPropertyDriven("opacity");this._material.setParameterValues({color:[a[0],a[1],a[2],b],transparent:c});return!0};r.prototype.layerElevationInfoChanged=function(a,b,c){var e=this._elevationContext.mode;if(null==c||null==e)return!1;if("on-the-ground"===c&&"on-the-ground"===e)return!0;if(c!==e&&("on-the-ground"===c||"on-the-ground"===e))return!1;var d=m.needsElevationUpdates2D(e);
return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return d})};r.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};r.prototype.pixelRatioChanged=function(a,b){return!0};r.prototype._getOutlineGeometry=function(a,b){return b};r.prototype._getGeometry=function(a){a=a.geometry;"extent"===a.type&&(a=v.fromExtent(a));return a};r.prototype._createAs3DShape=function(a,b,e,d,g){var h=this._getGeometry(a.graphic),
k=h[b],l=this._getOutlineGeometry(h,k),q=[],u=[],t=[],z=p.vec3f64.create(),n=Array(6),h=m.getGeometryVertexData3D(l,h.hasZ,h.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,e);this._logGeometryCreationWarnings(h,k,b,"LineSymbol3DLayer");if(0<l.length){for(var k=h.geometryData.outlines,l=h.eleVertexData,x=h.vertexData,v=0;v<k.length;++v){var B=k[v];if(!(1>=B.count)){var C=B.index,F=B.count;if(this._context.clippingExtent&&(m.computeBoundingBox(l,
C,F,n),m.boundingBoxClipped(n,this._context.clippingExtent)))continue;m.applyOrigin(x,C,F,z);B=new Float64Array(l.buffer,3*C*l.BYTES_PER_ELEMENT,3*F);C=new Float64Array(x.buffer,3*C*x.BYTES_PER_ELEMENT,3*F);C=this._createGeometryData(a,C,B,"rings"===b);C=new E(C,d+"path"+v);C.singleUse=!0;q.push(C);u.push(this._material);C=f.mat4f64.create();c.mat4.translate(C,C,z);t.push(C)}}if(0<q.length)return a=new N({geometries:q,materials:u,transformations:t,castShadow:!1,metadata:{layerUid:this._context.layer.uid,
graphicUid:g},idHint:d}),q=new w(this,a,q,null,null,y.perVertexElevationAligner,e),q.alignedTerrainElevation=h.terrainElevation,q.needsElevationUpdates=m.needsElevationUpdates2D(e.mode),q}return null};r.prototype._createGeometryData=function(b,c,e,d){c=z.createPolylineGeometryData(c,e,d);if("round"===this._material.getParameters().join){e=c.vertexAttributes[O.VertexAttrConstants.POSITION].data;d=e.length/3;var f=new Float32Array(d),g=I,h=H;a.vec3.set(g,0,0,0);for(var k=0;k<d-1;++k){var l=k+1;a.vec3.set(h,
e[3*l+0]-e[3*k+0],e[3*l+1]-e[3*k+1],e[3*l+2]-e[3*k+2]);a.vec3.normalize(h,h);l=1*(Math.PI-C.acos(a.vec3.dot(g,h)))*S*this._lineWidthLOD;f[k]=Math.max(Math.floor(l),0);a.vec3.scale(g,h,-1)}c.vertexAttributes[O.VertexAttrConstants.SUBDIVISIONS]={size:1,data:f,offsetIdx:0,strideIdx:1};c.indices[O.VertexAttrConstants.SUBDIVISIONS]=c.indices[O.VertexAttrConstants.POSITION]}e=new Uint32Array(c.vertexAttributes[O.VertexAttrConstants.POSITION].data.length);c.indices[O.VertexAttrConstants.SIZE]=e;this._fastUpdates.enabled&&
this._fastUpdates.visualVariables.size?(c.vertexAttributes[O.VertexAttrConstants.SIZEFEATUREATTRIBUTE]={size:1,data:this.getSizeFeatureAttribute(b.graphic),offsetIdx:0,strideIdx:1},c.indices[O.VertexAttrConstants.SIZEFEATUREATTRIBUTE]=e):(c.vertexAttributes[O.VertexAttrConstants.SIZE]={size:1,data:this.getDrivenSize(b.renderingInfo),offsetIdx:0,strideIdx:1},c.indices[O.VertexAttrConstants.SIZE]=e);this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color?(c.vertexAttributes[O.VertexAttrConstants.COLORFEATUREATTRIBUTE]=
{size:1,data:this.getColorFeatureAttribute(b.graphic),offsetIdx:0,strideIdx:1},c.indices[O.VertexAttrConstants.COLORFEATUREATTRIBUTE]=e):(c.vertexAttributes[O.VertexAttrConstants.COLOR]={size:4,data:this.getDrivenColor(b.renderingInfo,b.graphic),offsetIdx:0,strideIdx:4},c.indices[O.VertexAttrConstants.COLOR]=e);this._fastUpdates.enabled&&this._fastUpdates.visualVariables.opacity&&(c.vertexAttributes[O.VertexAttrConstants.OPACITYFEATUREATTRIBUTE]={size:1,data:this.getOpacityFeatureAttribute(b.graphic),
offsetIdx:0,strideIdx:1},c.indices[O.VertexAttrConstants.OPACITYFEATUREATTRIBUTE]=e);return c};r.prototype._createAsOverlay=function(a,b,e,d,g){e=a.graphic;var h=this._getGeometry(e);this._material.renderPriority=this._symbolLayerOrder;var k=h[b],l=this._getOutlineGeometry(h,k),q=[],u=Array(6),z=t.empty(),w=p.vec3f64.create(),h=m.getGeometryVertexDataDraped(l,h.spatialReference,this._context.overlaySR);this._logGeometryCreationWarnings(h,k,b,"LineSymbol3DLayer");if(0<l.length){k=h.vertexData;l=h.geometryData.outlines;
for(h=0;h<l.length;++h){var n=l[h],y=n.index,n=n.count;m.computeBoundingBox(k,y,n,u);if(!m.boundingBoxClipped(u,this._context.clippingExtent)){t.expand(z,u);m.applyOrigin(k,y,n,w);m.setZ(k,y,n,this._getDrapedZ());n=new Float64Array(k.buffer,3*y*k.BYTES_PER_ELEMENT,3*n);y=f.mat4f64.create();c.mat4.translate(y,y,w);var n=this._createGeometryData(a,n,null,"rings"===b),v=new L(n);v.data.layerUid=g;v.data.graphicUid=e.uid;v.material=this._material;v.center=[.5*(u[0]+u[3]),.5*(u[1]+u[4]),0];v.bsRadius=
.5*Math.sqrt((u[3]-u[0])*(u[3]-u[0])+(u[4]-u[1])*(u[4]-u[1]));v.transformation=y;v.name=d;v.uniqueName=d+"#"+n.id;q.push(v)}}return new x(this,q,z)}return null};return r}(u.Graphics3DSymbolLayer);d.Graphics3DLineSymbolLayer=r;var I=p.vec3f64.create(),H=p.vec3f64.create(),S=4/Math.PI;d.default=r})},"esri/views/3d/layers/graphics/lineUtils":function(){define(["require","exports","../../webgl-engine/lib/GeometryData","../../webgl-engine/lib/Util"],function(r,d,n,l){function k(b){var e=b.length;return b[0]===
b[e-3]&&b[1]===b[e-2]&&b[2]===b[e-1]}function b(b,e,c){var d,a;if(c=c&&!k(b)){c=new Float32Array(b.length+3);for(a=0;a<b.length;a++)c[a]=b[a];a=c.length;c[a-3]=b[0];c[a-2]=b[1];c[a-1]=b[2];d=b.length/3+1;a=new Uint32Array(2*(d-1))}else d=b.length/3,a=new Uint32Array(2*(d-1)),c=b;for(var g=b=0;g<d-1;g++)a[b++]=g,a[b++]=g+1;b={};d={};b[h.POSITION]=a;d[h.POSITION]={size:3,data:c,offsetIdx:0,strideIdx:3};e&&(b.mapPos=a,d.mapPos={size:3,data:e,offsetIdx:0,strideIdx:3});return new n(d,b,n.DefaultOffsets,
"line")}Object.defineProperty(d,"__esModule",{value:!0});var h=l.VertexAttrConstants;d.isClosed=k;d.createPolylineGeometryData=b;d.createPolylineGeometry=function(d,e,c,f,a){d=b(d,e,c);d.vertexAttributes[h.COLOR]={size:4,data:f,offsetIdx:0,strideIdx:4};f=new Float32Array(1);f[0]=a;d.vertexAttributes[h.SIZE]={size:1,data:f,offsetIdx:0,strideIdx:1};a=new Uint32Array(d.vertexAttributes[h.POSITION].data.length);d.indices[h.COLOR]=a;d.indices[h.SIZE]=a;return d}})},"esri/views/3d/layers/graphics/Graphics3DMeshFillSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/compilerUtils ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/MeshComponent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/meshUtils/projection ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ../support/edgeUtils ../support/symbolColorUtils ../../support/debugFlags ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Texture ../../webgl-engine/lib/Util ../../webgl-engine/materials/DefaultMaterial ../../webgl-engine/materials/NativeLineMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V){Object.defineProperty(d,"__esModule",{value:!0});var T=S.VertexAttrConstants;r=function(c){function d(a,b,e,d){a=c.call(this,a,b,e,d)||this;a._edgeStageObjects=new Set;a._materials=new Map;a._textures=new Map;return a}n(d,c);d.prototype.doLoad=function(){return k(this,void 0,void 0,function(){return l(this,function(a){E.DRAW_MESH_GEOMETRY_NORMALS&&(this._debugVertexNormalMaterial=new V({color:[1,0,1,1]},"debugVertexNormal"),
this._debugFaceNormalMaterial=new V({color:[0,1,1,1]},"debugFAceNormal"));return[2]})})};d.prototype.destroy=function(){var a=this;c.prototype.destroy.call(this);this._materials.forEach(function(b){a._context.stage.remove(L.ModelContentType.MATERIAL,b.material.id)});this._textures.forEach(function(b){a._context.stage.remove(L.ModelContentType.TEXTURE,b.id)});this._materials.clear();this._textures.clear()};d.prototype.createGraphics3DGraphic=function(a){var b=a.graphic;if("mesh"!==b.geometry.type)return this.logger.warn("unsupported geometry type for fill on mesh-3d symbol: "+
b.geometry.type),null;if(!this._validateGeometry(b.geometry))return null;var c="graphic"+b.uid,e=this.getGraphicElevationContext(b);return this._createAs3DShape(b,a.renderingInfo,e,c,b.uid)};d.prototype.layerOpacityChanged=function(){var a=this,b=this._getLayerOpacity();this._materials.forEach(function(c){c.material.setParameterValues({layerOpacity:b});var e=c.material.getParameters();a._setMaterialTransparentParameter(e,c);c.material.setParameterValues({transparent:e.transparent})});if(0<this._edgeStageObjects.size){var c=
this._context.stage.renderView.ensureEdgeView(),e=this._getLayerOpacity();this._edgeStageObjects.forEach(function(a){return c.updateAllComponentOpacities(a,[e])})}return!0};d.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,z.needsElevationUpdates3D)};d.prototype.slicePlaneEnabledChanged=function(a,b){var c=this;this._materials.forEach(function(a){a.material.setParameterValues({slicePlaneEnabled:c._context.slicePlaneEnabled})});if(0<this._edgeStageObjects.size){var e=
this._context.stage.renderView.ensureEdgeView();a=this._createEdgeMaterial(e);if(g.isSome(a)){var d=[a];this._edgeStageObjects.forEach(function(a){return e.updateAllComponentMaterials(a,d,{slicePlaneEnabled:c._context.slicePlaneEnabled},!1)})}}return!0};d.prototype.pixelRatioChanged=function(a,b){return!0};d.prototype._requiresSymbolVertexColors=function(){return this._isPropertyDriven("color")||this._isPropertyDriven("opacity")};d.prototype._colorOrTextureUid=function(a){return a?a instanceof b?
a.toHex():a.contentHash:"-"};d.prototype._materialProperties=function(a,b,c){var e=this._requiresSymbolVertexColors(),d,f,g,h,k,l,m,p,q;b.material&&(f=b.material.color,d=this._colorOrTextureUid(b.material.color),g=b.material.colorTexture,h=this._colorOrTextureUid(b.material.colorTexture),k=b.material.normalTexture,l=this._colorOrTextureUid(b.material.normalTexture),m=b.material.doubleSided,p=b.material.alphaCutoff,q=b.material.alphaMode);b=!!a.vertexAttributes.color;a=!!a.vertexAttributes.tangent;
return{hasSymbolVertexColors:e,hasVertexColors:b,hasVertexTangents:a,color:f,colorTexture:g,normalTexture:k,uid:"vc:"+b+",vt:"+a+",vct"+c+",svc:"+e+",cmuid:"+d+",ctmuid:"+h+",ntmuid:"+l+",ds:"+m+",ac:"+p+",am:"+q}};d.prototype._setInternalColorValueParameters=function(a,c){c.diffuse=b.toUnitRGB(a);c.opacity=a.a};d.prototype._getLoadableTextureResource=function(a){return a.data?a.data instanceof HTMLImageElement?a.data.complete?a.data:a.data.src:a.data:a.url};d.prototype._getInternalTextureId=function(a,
b){var c=this._getLoadableTextureResource(a);if(c){var e=a.contentHash,d=this._textures.get(e);d||(d=new H(c,b+"_"+e+"_tex",{mipmap:!0,wrap:this._castTextureWrap(a.wrap),noUnpackFlip:!0}),this._textures.set(e,d),this._context.stage.add(L.ModelContentType.TEXTURE,d));return d.id}};d.prototype._castTextureWrap=function(a){void 0===a&&(a="repeat");return"string"===typeof a?(a=this._castTextureWrapIndividual(a),{s:a,t:a}):{s:this._castTextureWrapIndividual(a.horizontal),t:this._castTextureWrapIndividual(a.vertical)}};
d.prototype._castTextureWrapIndividual=function(a){switch(a){case "clamp":return 33071;case "mirror":return 33648;default:return 10497}};d.prototype._setInternalMaterialParameters=function(a,b,c){a.color&&this._setInternalColorValueParameters(a.color,c);a.colorTexture&&(c.textureId=this._getInternalTextureId(a.colorTexture,b));a.hasVertexTangents&&a.normalTexture&&(c.normalTextureId=this._getInternalTextureId(a.normalTexture,b))};d.prototype._setExternalMaterialParameters=function(a){var c=this._isPropertyDriven("color"),
e=g.isSome(this.symbolLayer.material)?this.symbolLayer.material.colorMixMode:null;c?a.externalColor=v.vec4f64.ONES:(c=g.isSome(this.symbolLayer.material)?this.symbolLayer.material.color:null,g.isSome(c)?a.externalColor=b.toUnitRGBA(c):(e=null,a.externalColor=v.vec4f64.ONES));e&&(a.colorMixMode=e)};d.prototype._hasTransparentVertexColors=function(a){a=a.vertexAttributes.color;if(!a)return!1;for(var b=3;b<a.length;b+=4)if(255!==a[b])return!0;return!1};d.prototype._getOrCreateMaterial=function(a,b){var c=
b.material&&b.material.color,e=b.material&&b.material.colorTexture,c=this._hasTransparentVertexColors(a)||c&&1>c.a||e&&e.transparent;a=this._materialProperties(a,b,c);if(e=this._materials.get(a.uid))return e.material;var c={material:null,isComponentTransparent:c,alphaMode:b.material?b.material.alphaMode:"opaque"},e=this._getStageIdHint(),d={specular:q.vec3f64.ZEROS,vertexColors:a.hasVertexColors,symbolColors:a.hasSymbolVertexColors,vertexTangents:a.hasVertexTangents,ambient:q.vec3f64.ZEROS,diffuse:q.vec3f64.ONES,
opacity:1,doubleSided:!0,doubleSidedType:"winding-order",cullFace:"none",layerOpacity:this._getLayerOpacity(),slicePlaneEnabled:this._context.slicePlaneEnabled,textureInitTransparent:!0};b.material&&(d.doubleSided=b.material.doubleSided,d.cullFace=b.material.doubleSided?"none":"back",d.textureAlphaCutoff=b.material.alphaCutoff);this._setInternalMaterialParameters(a,e,d);this._setExternalMaterialParameters(d);this._setMaterialTransparentParameter(d,c);b=new P(d,e+"_"+a.uid+"_mat");c.material=b;this._materials.set(a.uid,
c);this._context.stage.add(L.ModelContentType.MATERIAL,b);return b};d.prototype._setMaterialTransparentParameter=function(a,b){var c=this._isPropertyDriven("opacity");a.transparent=c||b.isComponentTransparent||1>a.layerOpacity||1>a.opacity||a.externalColor&&1>a.externalColor[3];a.textureAlphaMode="auto"===b.alphaMode?a.transparent?"maskBlend":"opaque":b.alphaMode};d.prototype._addDebugNormals=function(b,c,e,d){var f,g,h,k,l=c.length,m=b.spatialReference.isGeographic?20015077/180:1,q=.1*Math.max(b.extent.width*
m,b.extent.height*m,b.extent.zmax-b.extent.zmin),u=[],t=[];b=[];for(var m=[],z=0;z<l;z++)for(var w=c[z],n=w.data.getAttribute(T.POSITION),x=w.data.getAttribute(T.NORMAL),y=w.data.getIndices(T.POSITION),w=w.data.getIndices(T.NORMAL),n=n.data,x=x.data,v=0;v<y.length;v++){for(var B=3*y[v],C=3*w[v],F=0;3>F;F++)u.push(n[B+F]);for(F=0;3>F;F++)u.push(n[B+F]+x[C+F]*q);t.push(t.length);t.push(t.length);if(0===v%3){this._calculateFaceNormal(n,y,v,U);this._getFaceVertices(n,y,v,Q,J,R);p.vec3.add(Q,Q,J);p.vec3.add(Q,
Q,R);p.vec3.scale(Q,Q,1/3);for(F=0;3>F;F++)b.push(Q[F]);for(F=0;3>F;F++)b.push(Q[F]+U[F]*q);m.push(m.length);m.push(m.length)}}l=(f={},f[T.POSITION]={data:new Float64Array(u),size:3},f);f=(g={},g[T.POSITION]=new Uint32Array(t),g);g=new O(l,f,void 0,"line");g=new K(g,"debugVertexNormal");g.singleUse=!0;c.push(g);e.push(this._debugVertexNormalMaterial);d.push(a.mat4f64.clone(d[0]));l=(h={},h[T.POSITION]={data:new Float64Array(b),size:3},h);f=(k={},k[T.POSITION]=new Uint32Array(m),k);g=new O(l,f,void 0,
"line");g=new K(g,"debugFaceNormal");g.singleUse=!0;c.push(g);e.push(this._debugFaceNormalMaterial);d.push(a.mat4f64.clone(d[0]))};d.prototype._createAs3DShape=function(a,b,c,e,d){var f=this;a=a.geometry;if("mesh"!==a.type)return null;var h=this._createGeometryInfo(a,b,e);if(!h)return null;b=h.geometries;var k=h.materials,l=h.transformations,h=h.objectTransformation;E.DRAW_MESH_GEOMETRY_NORMALS&&this._addDebugNormals(a,b,k,l);var p=new I({geometries:b,materials:k,transformations:l,castShadow:!0,metadata:{layerUid:this._context.layer.uid,
graphicUid:d},idHint:e});p.objectTransformation=h;var q=function(a){var b=f._context.stage.renderView.ensureEdgeView();b.removeObject(a);f._edgeStageObjects.delete(a);var c=f._createEdgeMaterial(b);g.isSome(c)&&(f._edgeStageObjects.add(a),b.addObject(a,[c],{slicePlaneEnabled:f._context.slicePlaneEnabled},!f._context.isAsync,{mergeGeometries:!0}))};q(p);e=function(a,b,c,e,d){a=m.perObjectElevationAligner(a,b,c,e,d);q(p);return a};d=new u(this,p,b,null,null,e,c);d.needsElevationUpdates=z.needsElevationUpdates3D(c.mode);
c=a.extent.center.clone();c.z=0;d.elevationContext.centerPointInElevationSR=c;d.alignedTerrainElevation=e(d,d.elevationContext,this._context.elevationProvider,this._context.renderCoordsHelper,this._context.featureExpressionInfoContext);return d};d.prototype._createComponentNormals=function(a,b,c,e){var d=c.shading||"flat";switch(d){case "source":return this._createComponentNormalsSource(a,b,c,e);case "flat":return this._createComponentNormalsFlat(a,c,e);case "smooth":return this._createComponentNormalsSmooth(a,
c,e);default:h.neverReached(d)}};d.prototype._createComponentNormalsSource=function(a,b,c,e){if(!b)return this._createComponentNormalsFlat(a,c,e);var d=!1;if(!c.trustSourceNormals)for(c=0;c<e.length;c+=3){this._calculateFaceNormal(a,e,c,U);for(var f=0;3>f;f++){var g=3*e[c+f];Q[0]=b[g+0];Q[1]=b[g+1];Q[2]=b[g+2];0>p.vec3.dot(U,Q)&&(b[g+0]=-b[g+0],b[g+1]=-b[g+1],b[g+2]=-b[g+2],d=!0)}}return{normals:b,indices:e,didFlipNormals:d}};d.prototype._createComponentNormalsFlat=function(a,b,c){b=new Float32Array(c.length);
for(var e=new Uint32Array(3*c.length),d=0;d<c.length;d+=3)for(var f=this._calculateFaceNormal(a,c,d,U),g=0;3>g;g++)b[d+g]=f[g],e[d+g]=d/3;return{normals:b,indices:e,didFlipNormals:!1}};d.prototype._createComponentNormalsSmooth=function(a,b,c){b={};for(var e=0;e<c.length;e+=3)for(var d=this._calculateFaceNormal(a,c,e,U),f=0;3>f;f++){var g=c[e+f],h=b[g];h||(h={normal:q.vec3f64.create(),count:0},b[g]=h);p.vec3.add(h.normal,h.normal,d);h.count++}a=new Float32Array(3*c.length);d=new Uint32Array(3*c.length);
for(e=0;e<c.length;e++){g=c[e];h=b[g];1!==h.count&&(p.vec3.normalize(h.normal,h.normal),h.count=1);for(f=0;3>f;f++)a[3*e+f]=h.normal[f];d[e]=e}return{normals:a,indices:d,didFlipNormals:!1}};d.prototype._getFaceVertices=function(a,b,c,e,d,f){var g=3*b[c+0],h=3*b[c+1];b=3*b[c+2];e[0]=a[g+0];e[1]=a[g+1];e[2]=a[g+2];d[0]=a[h+0];d[1]=a[h+1];d[2]=a[h+2];f[0]=a[b+0];f[1]=a[b+1];f[2]=a[b+2]};d.prototype._calculateFaceNormal=function(a,b,c,e){this._getFaceVertices(a,b,c,Q,J,R);p.vec3.subtract(J,J,Q);p.vec3.subtract(R,
R,Q);p.vec3.cross(Q,J,R);p.vec3.normalize(e,Q);return e};d.prototype._getOrCreateComponents=function(a){return a.components?a.components:Y};d.prototype._createPositionBuffer=function(a){var b=a.vertexAttributes.position,c=new Float64Array(b.length);z.reproject(a.vertexAttributes.position,0,a.spatialReference,c,0,this._context.renderSpatialReference,b.length/3);return c};d.prototype._createNormalBuffer=function(a,b){var c=a.vertexAttributes.normal;if(!c)return null;if("local"===this._context.layerView.view.viewingMode)return c;
var e=a.vertexAttributes.position,d=new Float32Array(c.length);return w.projectNormalToECEF(c,e,b,a.spatialReference,d)};d.prototype._createTangentBuffer=function(a,b){var c=a.vertexAttributes.tangent;if(!c)return null;if("local"===this._context.layerView.view.viewingMode)return c;var e=a.vertexAttributes.position,d=new Float32Array(c.length);return w.projectTangentToECEF(c,e,b,a.spatialReference,d)};d.prototype._createColorBuffer=function(a){return a.vertexAttributes.color};d.prototype._createSymbolColorBuffer=
function(a){if(this._requiresSymbolVertexColors()){a=this._getVertexOpacityAndColor(a);var b=g.get(this.symbolLayer,"material","colorMixMode"),c=new Uint8Array(4);F.encodeSymbolColor(a,b,c);return c}return null};d.prototype._createColorIndices=function(a,b){a=new Uint32Array(b.length);for(b=0;b<a.length;b++)a[b]=0;return a};d.prototype._createBuffers=function(a,b){var c=a.vertexAttributes&&a.vertexAttributes.position;if(!c)return this.logger.warn("Mesh geometry must contain position vertex attributes"),
null;var e=a.vertexAttributes.normal,d=a.vertexAttributes.uv,f=a.vertexAttributes.tangent;if(e&&e.length!==c.length)return this.logger.warn("Mesh normal vertex buffer must contain the same number of elements as the position buffer"),null;if(f&&f.length/4!==c.length/3)return this.logger.warn("Mesh tangent vertex buffer must contain the same number of elements as the position buffer"),null;if(d&&d.length/2!==c.length/3)return this.logger.warn("Mesh uv vertex buffer must contain the same number of elements as the position buffer"),
null;c=this._createPositionBuffer(a);e=this._createColorBuffer(a);b=this._createSymbolColorBuffer(b);var f=this._createNormalBuffer(a,c),g=this._createTangentBuffer(a,c);a=this._transformCenterLocal(a,c,f);return{positionBuffer:c,normalBuffer:f,tangentBuffer:g,uvBuffer:d,colorBuffer:e,symbolColorBuffer:b,objectTransformation:a}};d.prototype._transformCenterLocal=function(b,c,d){var g=b.extent.center,h=this._context.renderSpatialReference;Z[0]=g.x;Z[1]=g.y;Z[2]=0;g=a.mat4f64.create();N.computeLinearTransformation(b.spatialReference,
Z,g,h);f.mat4.invert(X,g);for(b=0;b<c.length;b+=3)Q[0]=c[b+0],Q[1]=c[b+1],Q[2]=c[b+2],p.vec3.transformMat4(Q,Q,X),c[b+0]=Q[0],c[b+1]=Q[1],c[b+2]=Q[2];if(d)for(e.mat3.fromMat4(ca,g),e.mat3.transpose(ca,ca),b=0;b<d.length;b+=3)Q[0]=d[b+0],Q[1]=d[b+1],Q[2]=d[b+2],p.vec3.transformMat3(Q,Q,ca),d[b+0]=Q[0],d[b+1]=Q[1],d[b+2]=Q[2];return g};d.prototype._validateFaces=function(a,b){a=a.vertexAttributes.position.length/3;if(b=b.faces){for(var c=-1,e=0;e<b.length;e++){var d=b[e];d>c&&(c=d)}if(a<=c)return this.logger.warn("Vertex index "+
c+" is out of bounds of the mesh position buffer"),!1}else if(0!==a%3)return this.logger.warn("Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)"),!1;return!0};d.prototype._getOrCreateFaces=function(a,b){if(b.faces)return b.faces;a=new Uint32Array(a.vertexAttributes.position.length/3);for(b=0;b<a.length;b++)a[b]=b;return a};d.prototype._isOutsideClippingArea=function(a){if(!this._context.clippingExtent)return!1;var b=
a.vertexAttributes&&a.vertexAttributes.position;if(!b)return!1;var c=this._context.elevationProvider.spatialReference,e=b.length/3;a.spatialReference.equals(c)||(b=new Float64Array(b.length),z.reproject(a.vertexAttributes.position,0,a.spatialReference,b,0,c,e));z.computeBoundingBox(b,0,e,G);return z.boundingBoxClipped(G,this._context.clippingExtent)};d.prototype._createGeometryInfo=function(b,c,e){var d,f;if(!x.canProject(b,this._context.layerView.view.spatialReference))return this.logger.warn("Geometry spatial reference is not compatible with the view"),
null;if(this._isOutsideClippingArea(b))return null;var g=this._createBuffers(b,c);if(!g)return null;c=g.positionBuffer;for(var h=g.uvBuffer,k=g.colorBuffer,l=g.symbolColorBuffer,m=g.normalBuffer,p=g.tangentBuffer,g=g.objectTransformation,q=[],u=[],t=[],z=!1,w=0,n=this._getOrCreateComponents(b);w<n.length;w++){var y=n[w];if(!this._validateFaces(b,y))return null;var v=this._getOrCreateFaces(b,y);if(0!==v.length){var B=this._createComponentNormals(c,m,y,v);B.didFlipNormals&&(z=!0);var C=(d={},d[T.POSITION]=
{size:3,data:c},d[T.NORMAL]={size:3,data:B.normals},d),B=(f={},f[T.POSITION]=v,f[T.NORMAL]=B.indices,f);k&&(C[T.COLOR]={size:4,data:k},B[T.COLOR]=v);l&&(C[T.SYMBOLCOLOR]={size:4,data:l},B[T.SYMBOLCOLOR]=this._createColorIndices(y,v));b.vertexAttributes.uv&&(C[T.UV0]={size:2,data:h},B[T.UV0]=v);b.vertexAttributes.tangent&&(C[T.TANGENT]={size:4,data:p},B[T.TANGENT]=v);v=new O(C,B);v=new K(v,e+"_mesh");v.singleUse=!0;q.push(v);u.push(a.mat4f64.create());t.push(this._getOrCreateMaterial(b,y))}}z&&this.logger.warn("Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals.");
return{geometries:q,transformations:u,materials:t,objectTransformation:g}};d.prototype._createEdgeMaterial=function(a){var b={opacity:this._getLayerOpacity()};return C.createMaterial(a,this.symbolLayer,b)};return d}(B.default);d.Graphics3DMeshFillSymbolLayer=r;var Z=q.vec3f64.create(),Q=q.vec3f64.create(),J=q.vec3f64.create(),R=q.vec3f64.create(),U=q.vec3f64.create(),X=a.mat4f64.create(),ca=c.mat3f64.create(),G=t.create(),Y=[new y];d.default=r})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),
function(r,d,n,l,k,b,h,g,e,c){var f=h.getLogger("esri.geometry.support.MeshComponent");return function(a){function d(b){b=a.call(this)||this;b.faces=null;b.material=null;b.shading="source";b.trustSourceNormals=!1;return b}n(d,a);h=d;d.prototype.castFaces=function(a){return c.castArray(a,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},f)};d.prototype.clone=function(){return new h({faces:b.clone(this.faces),shading:this.shading,material:b.clone(this.material),trustSourceNormals:this.trustSourceNormals})};
d.prototype.cloneWithSharedTextures=function(){return new h({faces:b.clone(this.faces),shading:this.shading,material:this.material?this.material.cloneWithSharedTextures():null,trustSourceNormals:this.trustSourceNormals})};var h;l([g.property({json:{write:!0}})],d.prototype,"faces",void 0);l([g.cast("faces")],d.prototype,"castFaces",null);l([g.property({type:e.MeshMaterial,json:{write:!0}})],d.prototype,"material",void 0);l([g.property({type:String,json:{write:!0}})],d.prototype,"shading",void 0);
l([g.property({type:Boolean})],d.prototype,"trustSourceNormals",void 0);return d=h=l([g.subclass("esri.geometry.support.MeshComponent")],d)}(g.declared(k))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshTexture ./ValueMeshColor".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(){v.warn('Assigning ImageMeshColor to "MeshMaterial.color" is deprecated. Assigning to "MeshMaterial.colorTexture" instead.')}Object.defineProperty(d,"__esModule",{value:!0});var v=g.getLogger("esri.geometry.support.MeshMaterial");r=function(b){function d(a){a=b.call(this)||this;a.color=null;a.colorTexture=null;a.normalTexture=null;a.alphaMode="auto";a.alphaCutoff=.5;a.doubleSided=!0;return a}n(d,b);g=d;d.prototype.castColor=function(b){if(!b)return b;
if(Array.isArray(b))return new k(b);if(b instanceof k||b instanceof a)return b;if("string"===typeof b){if(t.test(b)||k.named[b])return new k(b);q();this.colorTexture=new a({url:b});return null}return b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof ImageData?(q(),this.colorTexture=new a({data:b}),null):b instanceof f?(q(),this.colorTexture=new a({url:b.url,data:b.data}),null):"image"===b.type?(q(),this.colorTexture=new a(b),null):b instanceof p?(v.warn('Assigning ValueMeshColor to "MeshMaterial.color" is deprecated. Automatically converting it to esri.Color.'),
new k(b.value)):c.ensureType(k,b)};d.prototype.castColorTexture=function(b){return b?"string"===typeof b?new a({url:b}):b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof ImageData?new a({data:b}):c.ensureType(a,b):b};d.prototype.readColorTexture=function(b,c,e){if(b)return new a(b)};d.prototype.castNormalTexture=function(b){return b?"string"===typeof b?new a({url:b}):b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof ImageData?new a({data:b}):c.ensureType(a,
b):b};d.prototype.readNormalTexture=function(b,c,e){if(b)return new a(b)};d.prototype.clone=function(){return new g({color:h.clone(this.color),colorTexture:h.clone(this.colorTexture),normalTexture:h.clone(this.normalTexture),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided})};d.prototype.cloneWithSharedTextures=function(){return new g({color:h.clone(this.color),colorTexture:this.colorTexture,normalTexture:this.normalTexture,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,
doubleSided:this.doubleSided})};var g;l([e.property({type:k,json:{write:!0}})],d.prototype,"color",void 0);l([e.cast("color")],d.prototype,"castColor",null);l([e.property({json:{write:!0}})],d.prototype,"colorTexture",void 0);l([e.cast("colorTexture")],d.prototype,"castColorTexture",null);l([e.reader("colorTexture")],d.prototype,"readColorTexture",null);l([e.property({json:{write:!0}})],d.prototype,"normalTexture",void 0);l([e.cast("normalTexture")],d.prototype,"castNormalTexture",null);l([e.reader("normalTexture")],
d.prototype,"readNormalTexture",null);l([e.property({json:{write:!0}})],d.prototype,"alphaMode",void 0);l([e.property({json:{write:!0}})],d.prototype,"alphaCutoff",void 0);l([e.property({json:{write:!0}})],d.prototype,"doubleSided",void 0);return d=g=l([e.subclass("esri.geometry.support.MeshMaterial")],d)}(e.declared(b));d.MeshMaterial=r;var t=/^\s*(#|rgba?\()/;d.default=r})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/compilerUtils ../../core/Identifiable ../../core/Logger ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){var a=h.getLogger("esri.geometry.support.ImageMeshColor");return function(b){function c(c){c=b.call(this)||this;c.type="image";a.warn("esri/geometry/support/ImageMeshColor is deprecated since version 4.11. Use esri/geometry/support/MeshTexture instead.");return c}n(c,b);d=c;Object.defineProperty(c.prototype,"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});c.prototype.writeData=function(a,b,c,e){a instanceof HTMLImageElement?a={type:"image-element",src:g.toJSON(a.src,e)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[c]=a};c.prototype.readData=function(a,
b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData);default:k.neverReached(a)}};Object.defineProperty(c.prototype,"transparent",{get:function(){var a=this.data,b=this.url;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,
0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):b&&(a=b.substr(b.length-4,4).toLowerCase(),b=b.substr(0,15).toLocaleLowerCase(),".png"===a||"data:image/png;"===b)?!0:!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d({url:this.url,data:this.data})};c.prototype.encodeImageData=function(a){for(var b="",c=0;c<a.data.length;c++)b+=String.fromCharCode(a.data[c]);
return{data:btoa(b),width:a.width,height:a.height}};c.prototype.decodeImageData=function(a){for(var b=atob(a.data),c=new Uint8ClampedArray(b.length),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return f.wrapImageData(c,a.width,a.height)};c.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var d;l([e.property()],c.prototype,"type",void 0);l([e.property({type:String,json:{write:g.write}})],c.prototype,"url",null);l([e.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),
e.property()],c.prototype,"data",null);l([e.writer("data")],c.prototype,"writeData",null);l([e.reader("data")],c.prototype,"readData",null);l([e.property({type:Boolean,dependsOn:["data","url"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],c.prototype,"transparent",null);return c=d=l([e.subclass("esri.geometry.support.ImageMeshColor")],c)}(e.declared(c.default,b.Identifiable))})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function g(b){return d.call(this)||this}n(g,d);g.prototype.clone=function(){throw Error("not implemented");};l([b.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,enabled:!0}}})],g.prototype,"type",void 0);return g=l([b.subclass("esri.geometry.support.MeshColor")],g)}(b.declared(k));d.MeshColor=r;d.default=r})},"esri/geometry/support/MeshTexture":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper @dojo/framework/shim/WeakMap ../../core/compilerUtils ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators ../../views/support/screenshotUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){var f=new k.default,a=0;return function(d){function h(a){a=d.call(this)||this;a.wrap="repeat";return a}n(h,d);k=h;Object.defineProperty(h.prototype,"url",{get:function(){return this._get("url")||null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});
h.prototype.writeData=function(a,b,c,e){a instanceof HTMLImageElement?a={type:"image-element",src:g.toJSON(a.src,e)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[c]=a};h.prototype.readData=function(a,c){switch(a.type){case "image-element":return c=new Image,c.src=a.src,c;case "canvas-element":return a=this.decodeImageData(a.imageData),c=
document.createElement("canvas"),c.width=a.width,c.height=a.height,c.getContext("2d").putImageData(a,0,0),c;case "image-data":return this.decodeImageData(a.imageData);default:b.neverReached(a)}};Object.defineProperty(h.prototype,"transparent",{get:function(){var a=this.data,b=this.url;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):b&&(a=b.substr(b.length-4,4).toLowerCase(),
b=b.substr(0,15).toLocaleLowerCase(),".png"===a||"data:image/png;"===b)?!0:!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"contentHash",{get:function(){var b=this,c="string"===typeof this.wrap?this.wrap:"object"===typeof this.wrap?this.wrap.horizontal+"/"+this.wrap.vertical:"",e=function(a){void 0===a&&(a="");return"d:"+a+",t:"+b.transparent+",w:"+c};if(null!=this.url)return e(this.url);
if(null!=this.data){if(this.data instanceof HTMLImageElement)return e(this.data.src);f.has(this.data)||f.set(this.data,++a);return e(f.get(this.data))}return e()},enumerable:!0,configurable:!0});h.prototype.clone=function(){return new k({url:this.url,data:this.data,wrap:this.cloneWrap()})};h.prototype.cloneWrap=function(){return"string"===typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}};h.prototype.encodeImageData=function(a){for(var b="",c=0;c<a.data.length;c++)b+=
String.fromCharCode(a.data[c]);return{data:btoa(b),width:a.width,height:a.height}};h.prototype.decodeImageData=function(a){for(var b=atob(a.data),e=new Uint8ClampedArray(b.length),d=0;d<b.length;d++)e[d]=b.charCodeAt(d);return c.wrapImageData(e,a.width,a.height)};h.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var k;l([e.property({type:String,json:{write:g.write}})],h.prototype,"url",null);l([e.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),
e.property()],h.prototype,"data",null);l([e.writer("data")],h.prototype,"writeData",null);l([e.reader("data")],h.prototype,"readData",null);l([e.property({type:Boolean,dependsOn:["data","url"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],h.prototype,"transparent",null);l([e.property({json:{write:!0}})],h.prototype,"wrap",void 0);l([e.property({readOnly:!0,dependsOn:["url","data","wrap","transparent"]})],h.prototype,"contentHash",null);return h=k=l([e.subclass("esri.geometry.support.MeshTexture")],
h)}(e.declared(h))})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(r,d,n,l,k,b,h,g,e){var c=h.getLogger("esri.geometry.support.ValueMeshColor");return function(e){function a(a){a=e.call(this)||this;a.type="value";a.value=null;c.warn("esri/geometry/support/ValueMeshColor is deprecated since version 4.11. Use esri/Color instead.");
return a}n(a,e);d=a;a.prototype.clone=function(){return new d({value:b.clone(this.value)})};var d;l([g.property()],a.prototype,"type",void 0);l([g.property({type:k})],a.prototype,"value",void 0);return a=d=l([g.subclass("esri.geometry.support.ValueMeshColor")],a)}(g.declared(e.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g){function e(a,b,c,e){var d=b.loggerTag;b=b.stride;return 0!==a.length%b?(e.error(d,"Invalid array length, expected a multiple of "+b),new c([])):a}function c(a,b,c,d,f){if(!a)return a;if(a instanceof b)return e(a,d,b,f);for(var g=0;g<c.length;g++)if(a instanceof c[g])return e(new b(a),d,b,f);if(Array.isArray(a))return e(new b(a),d,b,f);c=c.map(function(a){return"'"+a.name+"'"});f.error("Failed to set property, expected one of "+c+", but got "+a.constructor.name);return new b([])}
function f(a,b,c){for(var e=Array(a.length),d=0;d<a.length;d++)e[d]=a[d];b[c]=e}Object.defineProperty(d,"__esModule",{value:!0});var a=h.getLogger("esri.geometry.support.MeshVertexAttributes");r=function(e){function d(a){a=e.call(this)||this;a.color=null;a.position=new Float64Array(0);a.uv=null;a.normal=null;a.tangent=null;return a}n(d,e);h=d;d.prototype.castColor=function(b){return c(b,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},a)};d.prototype.castPosition=function(b){b&&b instanceof
Float32Array&&a.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return c(b,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},a)};d.prototype.castUv=function(b){return c(b,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},a)};d.prototype.castNormal=function(b){return c(b,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},a)};d.prototype.castTangent=
function(b){return c(b,Float32Array,[Float64Array],{loggerTag:".tangent\x3d",stride:4},a)};d.prototype.clone=function(){return new h({position:b.clone(this.position),uv:b.clone(this.uv),normal:b.clone(this.normal),tangent:b.clone(this.tangent)})};var h;l([g.property({json:{write:f}})],d.prototype,"color",void 0);l([g.cast("color")],d.prototype,"castColor",null);l([g.property({nonNullable:!0,json:{write:f}})],d.prototype,"position",void 0);l([g.cast("position")],d.prototype,"castPosition",null);l([g.property({json:{write:f}})],
d.prototype,"uv",void 0);l([g.cast("uv")],d.prototype,"castUv",null);l([g.property({json:{write:f}})],d.prototype,"normal",void 0);l([g.cast("normal")],d.prototype,"castNormal",null);l([g.property({json:{write:f}})],d.prototype,"tangent",void 0);l([g.cast("tangent")],d.prototype,"castTangent",null);return d=h=l([g.subclass("esri.geometry.support.MeshVertexAttributes")],d)}(g.declared(k));d.MeshVertexAttributes=r;d.castArray=c;d.default=r})},"esri/geometry/support/meshUtils/projection":function(){define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../views/3d/support/projectionUtils ../../../views/3d/support/buffer/BufferView".split(" "),
function(r,d,n,l,k,b,h,g,e,c){function f(a,b,c,d,f,g){if(b){var k=c.count;if(f.isWGS84)for(f=0;f<k;f++)d.getVec(f,p),b.getVec(f,q),e.computeLinearTransformation(e.SphericalECEFSpatialReference,p,v,e.SphericalECEFSpatialReference),l.mat3.fromMat4(t,v),1===a&&l.mat3.transpose(t,t),h.vec3.transformMat3(q,q,t),g.setVec(f,q);else for(f=0;f<k;f++){d.getVec(f,p);b.getVec(f,q);e.computeLinearTransformation(e.SphericalECEFSpatialReference,p,v,e.SphericalECEFSpatialReference);l.mat3.fromMat4(t,v);var m=e.webMercator.y2lat(c.get(f,
1)),m=Math.cos(m);0===a&&(m=1/m);t[0]*=m;t[1]*=m;t[2]*=m;t[3]*=m;t[4]*=m;t[5]*=m;1===a&&l.mat3.transpose(t,t);h.vec3.transformMat3(q,q,t);h.vec3.normalize(q,q);g.setVec(f,q)}return g}}Object.defineProperty(d,"__esModule",{value:!0});var a=n.getLogger("esri.geometry.support.meshUtils.normalProjection");d.projectNormalToECEF=function(b,e,d,g,h){if(!g.isWebMercator&&!g.isWGS84)return a.error("Cannot convert PCS spatial reference buffer to ECEF"),h;f(0,new c.BufferViewVec3f(b.buffer,b.byteOffset),new c.BufferViewVec3f64(e.buffer,
e.byteOffset),new c.BufferViewVec3f64(d.buffer,d.byteOffset),g,new c.BufferViewVec3f(h.buffer,h.byteOffset));return h};d.projectNormalFromECEF=function(b,e,d,g,h){if(!g.isWebMercator&&!g.isWGS84)return a.error("Cannot convert to PCS spatial reference buffer from ECEF"),h;f(1,new c.BufferViewVec3f(b.buffer,b.byteOffset),new c.BufferViewVec3f64(e.buffer,e.byteOffset),new c.BufferViewVec3f64(d.buffer,d.byteOffset),g,new c.BufferViewVec3f(h.buffer,h.byteOffset));return h};d.projectToECEF=function(a,b,
c){e.bufferToBuffer(a,b,0,c,e.SphericalECEFSpatialReference,0,a.length/3);return c};d.projectFromECEF=function(a,b,c){e.bufferToBuffer(a,e.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};d.transformBufferInPlace=function(a,b,c){void 0===c&&(c=!1);if(a)for(var e=0;e<a.length;e+=3){for(var d=0;3>d;d++)p[d]=a[e+d];h.vec3.transformMat4(p,p,b);c&&h.vec3.normalize(p,p);for(d=0;3>d;d++)a[e+d]=p[d]}};d.projectTangentToECEF=function(b,e,d,g,h){if(!g.isWebMercator&&!g.isWGS84)return a.error("Cannot convert PCS spatial reference buffer to ECEF"),
h;f(0,new c.BufferViewVec3f(b.buffer,b.byteOffset,16),new c.BufferViewVec3f64(e.buffer,e.byteOffset),new c.BufferViewVec3f64(d.buffer,d.byteOffset),g,new c.BufferViewVec3f(h.buffer,h.byteOffset,16));for(e=3;e<b.length;e+=4)h[e]=b[e];return h};d.projectTangentFromECEF=function(b,e,d,g,h){if(!g.isWebMercator&&!g.isWGS84)return a.error("Cannot convert to PCS spatial reference buffer from ECEF"),h;f(1,new c.BufferViewVec3f(b.buffer,b.byteOffset,16),new c.BufferViewVec3f64(e.buffer,e.byteOffset),new c.BufferViewVec3f64(d.buffer,
d.byteOffset),g,new c.BufferViewVec3f(h.buffer,h.byteOffset,16));for(e=3;e<b.length;e+=4)h[e]=b[e];return h};var p=g.vec3f64.create(),q=g.vec3f64.create(),v=b.mat4f64.create(),t=k.mat3f64.create()})},"esri/views/3d/layers/support/symbolColorUtils":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.encodeSymbolColor=function(b,d,e,c){void 0===c&&(c=0);null==b||"ignore"===d?(e[c+0]=255,e[c+1]=255,e[c+2]=255,e[c+3]=255):(e[c+0]=Math.floor(255*b[0]),
e[c+1]=Math.floor(255*b[1]),e[c+2]=Math.floor(255*b[2]),b=Math.floor(b[3]*n),e[c+3]=0===b?0:"tint"===d?b:"replace"===d?b+l:b+k)};d.decodeSymbolColor=function(b,d){void 0===d&&(d=0);var e=0,c="multiply",f=b[d+3];f>k?e=(f-k)/n:f>l?(e=(f-l)/n,c="replace"):0<f&&(e=f/n,c="tint");return{color:[b[d+0]/255,b[d+1]/255,b[d+2]/255,e],colorMixMode:c}};d.isOpaqueSymbolColor=function(d,g){void 0===g&&(g=0);d=d[g+3];return d===l||d===k||d===b};var n=85,l=n,k=2*n,b=3*n})},"esri/views/3d/webgl-engine/materials/NativeLineMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Logger ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/buffer/InterleavedLayout ../lib/ComponentUtils ../lib/GLMaterial ../lib/Material ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/NativeLinePrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){var m=l.getLogger("esri.views.3d.webgl-engine.materials.NativeLineMaterial");r=function(a){function c(b,c){c=a.call(this,c)||this;c.params=t.copyParameters(b,B);return c}n(c,a);c.prototype.setParameterValues=function(a){var b=this.params,c;for(c in a)b[c]=a[c];this.notifyDirty("matChanged")};c.prototype.getParameters=function(){return this.params};c.prototype.getColor=function(){return this.params.color};c.prototype.intersect=function(a,b,c,e,d,f,g,
h,k){k?this.intersectLineGeometry(a,b,c,e,d,f,g):t.intersectDrapedRenderLineGeometry(a,b,c,e,d,f,1,g)};c.prototype.intersectLineGeometry=function(a,c,d,g,k,l,p,u){if(g.enable.selectionMode&&!f.isAllHidden(c.componentVisibilities,a.componentOffsets))if(q.isTranslationMatrix(d)){c=a.data.getVertexAttr().position.data;k=g.camera;l=T;b.vec2.copy(l,g.point);h.vec3.set(Z[0],l[0]-2,l[1]+2,0);h.vec3.set(Z[1],l[0]+2,l[1]+2,0);h.vec3.set(Z[2],l[0]+2,l[1]-2,0);h.vec3.set(Z[3],l[0]-2,l[1]-2,0);for(u=0;4>u;u++)k.unprojectPoint(Z[u],
Q[u]);e.plane.fromPoints(k.eye,Q[0],Q[1],J);e.plane.fromPoints(k.eye,Q[1],Q[2],R);e.plane.fromPoints(k.eye,Q[2],Q[3],U);e.plane.fromPoints(k.eye,Q[3],Q[0],X);a=Number.MAX_VALUE;for(u=0;u<c.length-5;u+=3)if(E[0]=c[u]+d[12],E[1]=c[u+1]+d[13],E[2]=c[u+2]+d[14],N[0]=c[u+3]+d[12],N[1]=c[u+4]+d[13],N[2]=c[u+5]+d[14],!(0>e.plane.signedDistance(J,E)&&0>e.plane.signedDistance(J,N)||0>e.plane.signedDistance(R,E)&&0>e.plane.signedDistance(R,N)||0>e.plane.signedDistance(U,E)&&0>e.plane.signedDistance(U,N)||0>
e.plane.signedDistance(X,E)&&0>e.plane.signedDistance(X,N))){k.projectPoint(E,O);k.projectPoint(N,I);if(0>O[2]&&0<I[2]){h.vec3.subtract(L,E,N);var z=k.frustum,n=-e.plane.signedDistance(z.planes[4],E),z=n/h.vec3.dot(L,z.planes[4]);h.vec3.scale(L,L,z);h.vec3.add(E,E,L);k.projectPoint(E,O)}else if(0<O[2]&&0>I[2])h.vec3.subtract(L,N,E),z=k.frustum,n=-e.plane.signedDistance(z.planes[4],N),z=n/h.vec3.dot(L,z.planes[4]),h.vec3.scale(L,L,z),h.vec3.add(N,N,L),k.projectPoint(N,I);else if(0>O[2]&&0>I[2])continue;
O[2]=0;I[2]=0;z=e.lineSegment.distance2(e.lineSegment.fromPoints(O,I,P),l);z<a&&(a=z,h.vec3.copy(H,E),h.vec3.copy(S,N))}d=g.rayBeginPoint;g=g.rayEndPoint;4>a&&(a=Number.MAX_VALUE,e.lineSegment.closestLineSegmentPoint(e.lineSegment.fromPoints(H,S,P),e.lineSegment.fromPoints(d,g,V),K)&&(h.vec3.subtract(K,K,d),a=h.vec3.length(K),h.vec3.scale(K,K,1/a),a/=h.vec3.distance(d,g)),p(a,K))}else m.error("intersection assumes a translation-only matrix")};c.prototype.createBufferWriter=function(){return new F(this.params)};
c.prototype.createRenderer=function(a,b){return new y(a,b,this)};c.prototype.getGLMaterials=function(){return{color:u,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:z}};return c}(p);var u=function(a){function b(b,c,e){b=a.call(this,b,c)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=t.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(x.colorPass,
{slice:a.slicePlaneEnabled,vertexColors:this.params.vertexColors});this.pipelineState=w.makePipelineState({blending:1>a.color[3]&&w.separateBlendingParams(770,1,771,771),depthTest:{func:513},depthWrite:w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.bind=function(a,b){b=this.program;var c=this.params;a.bindProgram(b);a.setPipelineState(this.pipelineState);b.setUniform4fv("constantColor",
c.color)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params;t.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&t.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 1};return b}(a),z=function(a){function b(b,c,e){b=a.call(this,b,c)||this;b.updateParameters();return b}n(b,a);b.prototype.updateParameters=function(){this.params=
t.copyParameters(this.material.getParameters());this.selectProgram()};b.prototype.beginSlot=function(a){return 5===a};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){this.program=this.programRep.getProgram(x.highlightPass,{slice:this.params.slicePlaneEnabled,vertexColors:this.params.vertexColors});this.pipelineState=w.makePipelineState({depthTest:{func:513},colorWrite:w.defaultColorWriteParams})};b.prototype.bind=function(a,b){a.bindProgram(this.program);
a.setPipelineState(this.pipelineState);t.bindHighlightRendering(a,b,this.program)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params;t.bindView(b.origin,b.view,a);c.slicePlaneEnabled&&t.bindSlicePlane(b.origin,b.slicePlane,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return 1};return b}(a),B={color:[1,1,1,1],vertexColors:!1,slicePlaneEnabled:!1},C=c.newLayout().vec3f(q.VertexAttrConstants.POSITION),
F=function(){function a(a){this.vertexBufferLayout=c.newLayout().vec3f(q.VertexAttrConstants.POSITION);a.vertexColors&&(this.vertexBufferLayout=C.vec4u8(q.VertexAttrConstants.COLOR))}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[q.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,c,e){v.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,c,e)};return a}(),
E=g.vec3f64.create(),N=g.vec3f64.create(),L=g.vec3f64.create(),K=g.vec3f64.create(),O=k.createRenderScreenPointArray3(),I=k.createRenderScreenPointArray3(),H=g.vec3f64.create(),S=g.vec3f64.create(),P=e.lineSegment.create(),V=e.lineSegment.create(),T=g.vec3f64.create(),Z=[k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3(),k.createRenderScreenPointArray3()],Q=[g.vec3f64.create(),g.vec3f64.create(),g.vec3f64.create(),g.vec3f64.create()],J=e.plane.create(),
R=e.plane.create(),U=e.plane.create(),X=e.plane.create();return r})},"esri/views/3d/webgl-engine/shaders/NativeLinePrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({SLICE:b.slice,VERTEXCOLORS:b.vertexColors})};d.colorPass={name:"native-line-color",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/nativeLine/nativeLine.vert"),
fragmentShader:b(d)+l.resolveIncludes("materials/nativeLine/colorPass.frag")}},attributes:n.Default3D};d.highlightPass={name:"native-line-highlight",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("materials/nativeLine/nativeLine.vert"),fragmentShader:b(d)+l.resolveIncludes("materials/nativeLine/highlightPass.frag")}},attributes:n.Default3D}})},"esri/views/3d/layers/graphics/Graphics3DObjectSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/lang ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../symbols/support/ObjectSymbol3DLayerResource ./ElevationAligners ./Graphics3DLodInstanceGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./lodResourceUtils ./objectResourceUtils ./primitiveObjectSymbolUtils ./symbolComplexity ../support/FastSymbolUpdates ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Util ../../webgl-engine/lib/lodRendering/LodRenderer ../../webgl-engine/lib/lodRendering/LodResources ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function f(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._optionalFields=[];a._instanceIndexToGraphicUid=new Map;return a}n(f,d);f.prototype.getCachedSize=function(){var a=this._symbolSize;return{width:a[0],depth:a[1],height:a[2]}};f.prototype.doLoad=function(a){return k(this,void 0,void 0,function(){var b,c,e,d;return l(this,function(f){switch(f.label){case 0:b=this._getStageIdHint();
if(!this._isPropertyDriven("size")&&(c=u.validateSymbolLayerSize(this.symbolLayer)))throw Error();e=this.symbolLayer;return this.isByResource?[4,this._prepareModelResources(e.resource.href,a)]:[3,2];case 1:return f.sent(),[3,4];case 2:return d=e.resource?e.resource.primitive:t.defaultPrimitive,[4,this._preparePrimitiveResources(d,b)];case 3:f.sent(),f.label=4;case 4:return[2]}})})};Object.defineProperty(f.prototype,"isByResource",{get:function(){return!(!this.symbolLayer.resource||!this.symbolLayer.resource.href)},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"lodRenderer",{get:function(){return this._lodRenderer},enumerable:!0,configurable:!0});f.prototype._preparePrimitiveResources=function(a,c){return k(this,void 0,void 0,function(){var d,f,k,m,z,n,t,w,x,y,B,F;return l(this,function(l){if(!C.isValidPrimitive(a))throw Error("Unknown object symbol primitive: "+a);d=this.symbolLayer;this._resourceBoundingBox=v.create(C.primitiveBoundingBox(a));this._resourceSize=p.vec3f64.fromArray(v.size(this._resourceBoundingBox));
this._symbolSize=p.vec3f64.fromArray(u.computeSizeWithResourceSize(this._resourceSize,d));f=g.get(this.symbolLayer,"material","color");k=this._getCombinedOpacity(f);m={specular:[0,0,0],opacity:k,transparent:1>k||this._isPropertyDriven("opacity"),instanced:["transformation"],ambient:p.vec3f64.ONES,diffuse:p.vec3f64.ONES,slicePlaneEnabled:this._context.slicePlaneEnabled,sliceHighlightDisabled:!0,castShadows:this.symbolLayer.castShadows};z=this.symbol;"point-3d"===z.type&&z.verticalOffset&&(n=z.verticalOffset,
t=n.screenLength,w=n.minWorldLength,x=n.maxWorldLength,m.verticalOffset={screenLength:e.pt2px(t),minWorldLength:w||0,maxWorldLength:null!=x?x:Infinity},m.castShadows=!1);this._context.screenSizePerspectiveEnabled&&(m.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings);this._isPropertyDriven("color")?m.externalColor=q.vec4f64.ONES:(y=g.isSome(d.material)&&d.material.color,B=g.isSome(y)?b.toUnitRGBA(y):q.vec4f64.ONES,m.externalColor=B);this._fastUpdates=E.initFastSymbolUpdatesState(this._context.renderer,
this._fastVisualVariableConvertOptions());this._fastUpdates.enabled?(h.mixin(m,this._fastUpdates.materialParameters),m.instanced.push("featureAttribute"),this._optionalFields.push("featureAttribute")):this._hasPerInstanceColor()&&(m.instanced.push("color"),this._optionalFields.push("color"));F=new H(m,c+"_objectmat");this._lodResources=C.primitiveLodResources(a,F,c);this._originalOpacities=I.materialsFromLodResources(this._lodResources).map(function(){return 1});if(!this._lodResources)throw Error("Unknown object symbol primitive: "+
a);this.finalizeSymbolResources();this.initializeLodRenderer();this.complexity=this.computeComplexity();return[2]})})};f.prototype._prepareModelResources=function(a,b){return k(this,void 0,void 0,function(){var c,d,f,k,m,q,n,t,w,x,y,C,F,r,H,U,J,K=this;return l(this,function(l){switch(l.label){case 0:return c=["transformation"],d={instanced:c,slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows},f={materialParamsMixin:d,streamDataRequester:this._context.streamDataRequester},
this._fastUpdates=E.initFastSymbolUpdatesState(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates.enabled?(h.mixin(f.materialParamsMixin,this._fastUpdates.materialParameters),c.push("featureAttribute"),this._optionalFields.push("featureAttribute")):this._hasPerInstanceColor()&&(c.push("color"),this._optionalFields.push("color")),k=this.symbol,"point-3d"===k.type&&k.verticalOffset&&(m=k.verticalOffset,q=m.screenLength,n=m.minWorldLength,t=m.maxWorldLength,f.materialParamsMixin.verticalOffset=
{screenLength:e.pt2px(q),minWorldLength:n||0,maxWorldLength:null!=t?t:Infinity},f.materialParamsMixin.castShadows=!1),f.signal=b,[4,B.fetch(a,f)];case 1:return w=l.sent(),x=z.makeLodResources(w.lods),z.fillEstimatedMinScreenSpaceRadius(x),x.levels.sort(function(a,b){return a.minScreenSpaceRadius-b.minScreenSpaceRadius}),x.levels[0].minScreenSpaceRadius=Math.min(2,x.levels[0].minScreenSpaceRadius),this._lodResources=x,y=this._context,C=this.symbolLayer.material,F=this._getExternalColorParameters(C),
r=g.get(this.symbolLayer,"material","color"),H=this._getCombinedOpacity(r,{hasIntrinsicColor:!0}),U=this._isPropertyDriven("opacity"),J=I.materialsFromLodResources(this._lodResources),this._originalOpacities=J.map(function(a){return a.getParameters().opacity||1}),J.forEach(function(a){var b=a.getParameters();a.setParameterValues(F);var c=b.opacity*H;a.setParameterValues({opacity:c,transparent:1>c||U||b.transparent});y.screenSizePerspectiveEnabled&&a.setParameterValues({screenSizePerspective:y.sharedResources.screenSizePerspectiveSettings})}),
this._resourceBoundingBox=w.referenceBoundingBox,this._resourceSize=p.vec3f64.fromArray(v.size(this._resourceBoundingBox)),this._pivotOffset=p.vec3f64.fromArray(this._lodResources.levels[0].pivotOffset),this._symbolSize=p.vec3f64.fromArray(u.computeSizeWithResourceSize(this._resourceSize,this.symbolLayer)),E.updateFastSymbolUpdatesState(this._fastUpdates,this._context.renderer,this._fastVisualVariableConvertOptions())&&J.forEach(function(a){return a.setParameterValues(K._fastUpdates.materialParameters)}),
this.finalizeSymbolResources(),this.initializeLodRenderer(),this.complexity=this.computeComplexity(),[2]}})})};f.prototype.finalizeSymbolResources=function(){var a=this._context.stage;this._materials=I.materialsFromLodResources(this._lodResources);this._materials.forEach(function(b){a.add(L.ModelContentType.MATERIAL,b)});this._textures=I.texturesFromLodResources(this._lodResources);this._textures.forEach(function(b){a.add(L.ModelContentType.TEXTURE,b)});this._geometries=I.geometriesFromLodResources(this._lodResources);
this._geometries.forEach(function(b){a.add(L.ModelContentType.GEOMETRY,b)})};f.prototype.initializeLodRenderer=function(){var a=this,b=this._context.stage;this._lodRenderer=new O.LodRenderer(this._lodResources,this._optionalFields,{layerUid:this._context.layer.uid,graphicUid:function(b){return a._instanceIndexToGraphicUid.get(b)}},this._fastUpdates.enabled?{applyTransform:function(b,e,d){b.getFeatureAttribute(e,T);c.mat4.copy(d,E.evaluateModelTransform(a._fastUpdates.materialParameters,T,d))},scaleFactor:function(b,
c,e){c.getFeatureAttribute(e,T);return E.evaluateModelTransformScale(b,a._fastUpdates.materialParameters,T)}}:null);this._lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;b.addRenderPlugin(this._lodRenderer.slots,this._lodRenderer)};f.prototype._getExternalColorParameters=function(a){var c={};this._isPropertyDriven("color")?c.externalColor=q.vec4f64.ONES:g.isSome(a)&&g.isSome(a.color)?c.externalColor=b.toUnitRGBA(a.color):(c.externalColor=q.vec4f64.ONES,c.colorMixMode="ignore");return c};
f.prototype.destroy=function(){d.prototype.destroy.call(this);var a=this._context.stage;this._lodRenderer&&(a.removeRenderPlugin(this._lodRenderer),this._lodRenderer.destroy());this._materials&&this._materials.forEach(function(b){return a.remove(L.ModelContentType.MATERIAL,b.id)});this._textures&&this._textures.forEach(function(b){return a.remove(L.ModelContentType.TEXTURE,b.id)});this._geometries&&this._geometries.forEach(function(b){return a.remove(L.ModelContentType.GEOMETRY,b.id)})};f.prototype.createGraphics3DGraphic=
function(a){var b=a.graphic;if(!this._validateGeometry(b.geometry))return null;var c=w.placePointOnGeometry(b.geometry);if(g.isNone(c))return this.logger.warn("unsupported geometry type for icon symbol: "+b.geometry.type),null;var e=this.getGraphicElevationContext(b);return this._createAs3DShape(b,c,a.renderingInfo,e,b.uid)};f.prototype.notifyDestroyGraphicLayer=function(a){this._instanceIndexToGraphicUid.delete(a.instanceIndex)};f.prototype.graphicLayerToGraphicId=function(a){return 0};f.prototype.layerOpacityChanged=
function(){var a=this,b=this._isPropertyDriven("opacity"),c=this.isByResource;this._materials.forEach(function(e,d){var f=g.get(a.symbolLayer,"material","color");d=a._getCombinedOpacity(f,{hasIntrinsicColor:c})*a._originalOpacities[d];e.setParameterValues({opacity:d,transparent:1>d||b})});return!0};f.prototype.layerElevationInfoChanged=function(a,b){return this.updateGraphics3DGraphicElevationInfo(a,b,w.needsElevationUpdates3D)};f.prototype.slicePlaneEnabledChanged=function(a,b){var c=this;this._lodRenderer.slicePlaneEnabled=
this._context.slicePlaneEnabled;this._materials.forEach(function(a){a.setParameterValues({slicePlaneEnabled:c._context.slicePlaneEnabled})});return!0};f.prototype.pixelRatioChanged=function(a,b){return!0};f.prototype.applyRendererDiff=function(a,b){var c=this,e;for(e in a.diff)switch(e){case "visualVariables":if(E.updateFastSymbolUpdatesState(this._fastUpdates,b,this._fastVisualVariableConvertOptions()))this._materials.forEach(function(a){return a.setParameterValues(c._fastUpdates.materialParameters)}),
this._lodRenderer.notifyShaderTransformationChanged();else return!1;break;default:return!1}return!0};f.prototype.computeComplexity=function(){if(!this._lodResources)return d.prototype.computeComplexity.call(this);var a=I.geometriesFromLodLevelResources(this._lodResources.levels[0]).reduce(function(a,b){return a+b.data.getIndices(K.VertexAttrConstants.POSITION).length},0)/3,b=F.defaultSymbolLayerMemoryComplexity(this.symbol,this.symbolLayer);return{primitivesPerFeature:a,primitivesPerCoordinate:0,
estimated:!1,memory:b}};f.prototype._createAs3DShape=function(a,b,c,e,d){a=this.getFastUpdateAttrValues(a);var f=!this._fastUpdates.enabled&&this._hasPerInstanceColor()?u.mixinColorAndOpacity(c.color,c.opacity):null,g=this._context.clippingExtent;N.pointToVector(b,S,this._context.elevationProvider.spatialReference);if(g&&!w.pointInBox2D(S,g))return null;var g=this._requiresTerrainElevation(e),h=this._computeGlobalTransform(b,e,V,g?Z:null);c=this._computeLocalTransform(this.symbolLayer,c,P);var k=
this._lodRenderer.instanceData,l=k.addInstance();this._instanceIndexToGraphicUid.set(l,d);k.setLocalTransform(l,c,!1);k.setGlobalTransform(l,h);a&&k.setFeatureAttribute(l,a);f&&k.setColor(l,f);d=new x(this,l,y.perLodInstanceElevationAligner,e);g&&(d.alignedTerrainElevation=Z.terrainElevation);d.needsElevationUpdates=w.needsElevationUpdates3D(e.mode);w.extendPointGraphicElevationContext(d,b,this._context.elevationProvider);return d};f.prototype._computeGlobalTransform=function(a,b,c,e){b=w.computeElevation(this._context.elevationProvider,
a,b,this._context.renderCoordsHelper,e);S[0]=a.x;S[1]=a.y;S[2]=b;N.computeLinearTransformation(a.spatialReference,S,c,this._context.renderSpatialReference);return c};f.prototype._computeLocalTransform=function(a,b,e){c.mat4.identity(e);this._applyObjectRotation(b,!1,e);this._applyObjectRotation(a,!0,e);this._applyObjectScale(b,e);this._applyAnchor(a,e);return e};f.prototype._applyObjectScale=function(a,b){this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation||(a=this._isPropertyDriven("size")&&
a.size?a.size:this._symbolSize,a=u.computeObjectScale(a,this._symbolSize,this._resourceSize,this._context.renderCoordsHelper.unitInMeters),1===a[0]&&1===a[1]&&1===a[2]||c.mat4.scale(b,b,a))};f.prototype.prepareSymbolLayerPatch=function(a){if("partial"===a.diff.type){var b=a.diff.diff;this._preparePatchTransform(a,b);this._preparePatchColor(a,b)}};f.prototype.updateGeometry=function(a,b){var c=b&&w.placePointOnGeometry(b);if(g.isNone(c))return!1;b=this.getGeometryElevationMode(b);if(a.elevationContext.mode!==
b)return!1;b=this._requiresTerrainElevation(a.elevationContext);this._computeGlobalTransform(c,a.elevationContext,V,b?Z:null);b&&(a.alignedTerrainElevation=Z.terrainElevation);this._lodRenderer.instanceData.setGlobalTransform(a.instanceIndex,V,!0);w.extendPointGraphicElevationContext(a,c,this._context.elevationProvider);return!0};f.prototype._preparePatchTransform=function(a,b){var c=this;if(b.heading||b.tilt||b.roll||b.width||b.height||b.depth||b.anchor||b.anchorPosition){var e=function(a,b,c){return(null!=
a&&"complete"===a.type?a.newValue:b)||c},d=e(b.heading,this.symbolLayer.heading,0),f=e(b.tilt,this.symbolLayer.tilt,0),g=e(b.roll,this.symbolLayer.roll,0),h=e(b.width,this.symbolLayer.width,void 0),k=e(b.height,this.symbolLayer.height,void 0),l=e(b.depth,this.symbolLayer.depth,void 0),m=e(b.anchor,this.symbolLayer.anchor,void 0),e=e(b.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete b.heading;delete b.tilt;delete b.roll;delete b.width;delete b.height;delete b.depth;delete b.anchor;delete b.anchorPosition;
var q={heading:d,tilt:f,roll:g,anchor:m,anchorPosition:e};1===this.loadStatus&&a.symbolLayerStatePatches.push(function(){c._symbolSize=p.vec3f64.fromArray(u.computeSizeWithResourceSize(c._resourceSize,{width:h,height:k,depth:l,isPrimitive:c.symbolLayer.isPrimitive}))});a.graphics3DGraphicPatches.push(function(a,b){b=c._computeLocalTransform(q,b,P);c._lodRenderer.instanceData.setLocalTransform(a.instanceIndex,b,!0)})}};f.prototype._preparePatchColor=function(a,c){var e=this;if(c.material&&"partial"===
c.material.type&&(c=c.material.diff,c.color&&"complete"===c.color.type)){var d=c.color.newValue,f=g.isSome(d)?b.toUnitRGBA(d):q.vec4f64.ONES;delete c.color;a.graphics3DGraphicPatches.push(function(a,b){if(e._hasPerInstanceColor())e._lodRenderer.instanceData.setColor(a.instanceIndex,f);else for(a=0,b=e._materials;a<b.length;a++)b[a].setParameterValues({externalColor:f})})}};f.prototype._requiresTerrainElevation=function(a){return"absolute-height"!==a.mode};f.prototype._applyObjectRotation=function(a,
b,c){if(!(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation&&b))return u.computeObjectRotation(a.heading,a.tilt,a.roll,c)};f.prototype._computeAnchor=function(b){var c=p.vec3f64.create();switch(b.anchor){case "center":a.vec3.copy(c,v.center(this._resourceBoundingBox));a.vec3.negate(c,c);break;case "top":var e=v.center(this._resourceBoundingBox);a.vec3.set(c,-e[0],-e[1],-this._resourceBoundingBox[5]);break;case "bottom":e=v.center(this._resourceBoundingBox);a.vec3.set(c,-e[0],
-e[1],-this._resourceBoundingBox[2]);break;case "relative":var e=v.center(this._resourceBoundingBox),d=v.size(this._resourceBoundingBox);b=(b=b.anchorPosition)?p.vec3f64.fromValues(b.x,b.y,b.z):p.vec3f64.ZEROS;a.vec3.multiply(c,d,b);a.vec3.add(c,c,e);a.vec3.negate(c,c);break;default:this._pivotOffset?a.vec3.negate(c,this._pivotOffset):a.vec3.copy(c,p.vec3f64.ZEROS)}return c};f.prototype._applyAnchor=function(a,b){this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation||(a=this._computeAnchor(a))&&
c.mat4.translate(b,b,a)};f.prototype._hasPerInstanceColor=function(){return this._isPropertyDriven("color")||this._isPropertyDriven("opacity")};f.prototype._fastVisualVariableConvertOptions=function(){var a=this._resourceBoundingBox?p.vec3f64.fromArray(v.size(this._resourceBoundingBox)):p.vec3f64.ONES,b=this._resourceBoundingBox?this._computeAnchor(this.symbolLayer):p.vec3f64.ZEROS,c=this._context.renderCoordsHelper.unitInMeters,e=u.computeObjectScale(this._symbolSize,this._symbolSize,this._resourceSize,
c),d=p.vec3f64.fromValues(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return{modelSize:a,symbolSize:this._symbolSize||p.vec3f64.ONES,unitInMeters:c,transformation:{anchor:b,scale:e,rotation:d}}};return f}(m.default);d.Graphics3DObjectSymbolLayer=r;var S=p.vec3f64.create(),P=f.mat4f64.create(),V=f.mat4f64.create(),T=q.vec4f64.create(),Z={verticalDistanceToGround:0,terrainElevation:0};d.default=r})},"esri/views/3d/layers/graphics/Graphics3DLodInstanceGraphicLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ./featureExpressionInfoUtils ./Graphics3DGraphicElevationContext ./graphicUtils ../../webgl-engine/lib/HighlightUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){r=function(){function b(a,b,c,e){this.type="lod-instance";this.alignedTerrainElevation=0;this.needsElevationUpdates=!1;this.graphics3DSymbolLayer=a;this.instanceIndex=b;this.elevationAligner=c;this.elevationContext=new f(e)}b.prototype.initialize=function(a,b){};b.prototype.setVisibility=function(a){var b=this.lodRenderer.instanceData;return a!==b.getVisible(this.instanceIndex)?(b.setVisible(this.instanceIndex,a),!0):!1};b.prototype.destroy=function(){null!=this.instanceIndex&&
(this.lodRenderer.instanceData.removeInstance(this.instanceIndex),this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this))};b.prototype.alignWithElevation=function(a,b,e){this.elevationAligner&&(c.setContextFeature(this.elevationContext.featureExpressionInfoContext,e),a=this.elevationAligner(this,this.elevationContext,a,b),null!=a&&(this.alignedTerrainElevation=a))};b.prototype.getBSRadius=function(){var a=this.lodRenderer;return a.baseBoundingSphere.radius*a.instanceData.getCombinedMaxScaleFactor(this.instanceIndex)};
b.prototype.getCenterObjectSpace=function(a){void 0===a&&(a=g.vec3f64.create());this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,x);return h.vec3.transformMat4(a,this.lodRenderer.baseBoundingSphere.center,x)};b.prototype.getBoundingBoxObjectSpace=function(a){void 0===a&&(a=e.create());this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,x);var b=this.lodRenderer.baseBoundingBox;e.empty(a);for(var c=0;8>c;++c)h.vec3.set(v,0===(c&1)?b[0]:b[3],0===(c&2)?
b[1]:b[4],0===(c&4)?b[2]:b[5]),h.vec3.transformMat4(v,v,x),e.expandPointInPlace(a,v);return a};b.prototype.getProjectedBoundingBox=function(b,c,d,f,g){return k(this,void 0,void 0,function(){var k,m,p,u,z,n,w,B,C;return l(this,function(l){switch(l.label){case 0:k=this.getBoundingBoxObjectSpace(g);m=y;p=e.isPoint(k)?1:m.length;this.lodRenderer.instanceData.getGlobalTransform(this.instanceIndex,x);for(u=0;u<p;u++)z=m[u],v[0]=k[z[0]],v[1]=k[z[1]],v[2]=k[z[2]],h.vec3.transformMat4(v,v,x),q[3*u+0]=v[0],
q[3*u+1]=v[1],q[3*u+2]=v[2];if(!b(q,0,p))return[2,null];e.empty(k);n=null;this.calculateRelativeScreenBounds&&(n=this.calculateRelativeScreenBounds());for(u=0;u<3*p;u+=3){for(w=0;3>w;w++)k[w]=Math.min(k[w],q[u+w]),k[w+3]=Math.max(k[w+3],q[u+w]);n&&d.push({location:q.slice(u,u+3),screenSpaceBoundingRect:n})}if(!c)return[3,5];e.center(k,t);if("absolute-height"===this.elevationContext.mode)return[3,5];B=void 0;C=a.demResolutionForBoundingBox(k,c);l.label=1;case 1:return l.trys.push([1,3,,4]),[4,c.service.queryElevation(t[0],
t[1],f,C)];case 2:return B=l.sent(),[3,4];case 3:return l.sent(),B=null,[3,4];case 4:null!=B&&e.offset(k,0,0,-this.alignedTerrainElevation+B),l.label=5;case 5:return[2,k]}})})};b.prototype.addHighlight=function(a,b){var c=this;b=p.generateHighlightId();this.addHighlightId(b);a.addExternal(function(a){c.removeHighlightId(a)},b)};b.prototype.removeHighlight=function(a){this.highlights&&this.highlights.forEach(function(b){return a.remove(b)})};b.prototype.addHighlightId=function(a){this.highlights=this.highlights||
new Set;this.highlights.add(a);this.lodRenderer.instanceData.setHighlight(this.instanceIndex,!0)};b.prototype.removeHighlightId=function(a){this.highlights&&(this.highlights.delete(a),this.lodRenderer.instanceData.setHighlight(this.instanceIndex,0<this.highlights.size),0===this.highlights.size&&(this.highlights=null))};Object.defineProperty(b.prototype,"lodRenderer",{get:function(){return this.graphics3DSymbolLayer.lodRenderer},enumerable:!0,configurable:!0});return b}();var q=[0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=g.vec3f64.create(),t=g.vec3f64.create(),y=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],x=b.mat4f64.create();return r})},"esri/views/3d/layers/graphics/lodResourceUtils":function(){define(["require","exports","../../../../core/tsSupport/generatorHelper","../../../../core/tsSupport/awaiterHelper","../../webgl-engine/lib/lodRendering/LodResources"],function(r,d,n,l,k){function b(b){var c=[];b.stageResources.geometries.forEach(function(e,a){c.push({material:b.stageResources.materials[a],
geometry:e,textures:b.stageResources.textures})});return{components:c,minScreenSpaceRadius:b.lodThreshold,pivotOffset:b.pivotOffset}}function h(b,c){void 0===c&&(c=g);b=k.computeFaceCount(b);return Math.sqrt(b/(c*Math.PI))}Object.defineProperty(d,"__esModule",{value:!0});d.makeLodLevelResources=b;d.makeLodResources=function(e){return{levels:e.map(function(c){return b(c)})}};d.estimateMinScreenSpaceRadius=h;d.fillEstimatedMinScreenSpaceRadius=function(b){b.levels.forEach(function(b){b.minScreenSpaceRadius||
(b.minScreenSpaceRadius=h(b))})};var g=.05})},"esri/views/3d/layers/graphics/objectResourceUtils":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/assignHelper ../../../../core/mathUtils ../../../../core/maybe ../../../../core/string ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../glTF/DefaultLoadingContext ../../glTF/esriProvidedModelParameters ../../glTF/loader ../../glTF/internal/indexUtils ./wosrLoader ../../support/buffer/BufferView ../../support/buffer/math ../../support/buffer/utils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Texture ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E){function N(a){var b=a.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return b?{fileType:"gltf",url:b[1],specifiedLodIndex:null!=b[4]?Number(b[4]):null}:a.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:a,specifiedLodIndex:null}:{fileType:"unknown",url:a,specifiedLodIndex:null}}function L(a,e,d){var h=a.model,k=f.mat4f64.create(),l=[],p=new Map,n=new Map;h.lods.forEach(function(f,t){if(void 0===d||t===d){var w=0,v={stageResources:{textures:[],
materials:[],geometries:[]},lodThreshold:g.isSome(f.lodThreshold)?f.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:q.empty()};l.push(v);f.parts.forEach(function(d){var l=d.material+(d.attributes.normal?"_normal":"")+(d.attributes.color?"_color":"")+(d.attributes.texCoord0?"_texCoord0":"")+(d.attributes.tangent?"_tangent":""),t=h.materials.get(d.material),y=g.isSome(d.attributes.texCoord0),r=g.isSome(d.attributes.normal);if(!p.has(l)){if(y){if(g.isSome(t.textureColor)&&!n.has(t.textureColor)){var I=
h.textures.get(t.textureColor),H=b({},I.parameters,{preMultiplyAlpha:!0});n.set(t.textureColor,new F(I.data,t.textureColor,H))}g.isSome(t.textureNormal)&&!n.has(t.textureNormal)&&(I=h.textures.get(t.textureNormal),H=b({},I.parameters,{preMultiplyAlpha:!0}),n.set(t.textureNormal,new F(I.data,t.textureNormal,H)));g.isSome(t.textureOcclusion)&&!n.has(t.textureOcclusion)&&(I=h.textures.get(t.textureOcclusion),H=b({},I.parameters,{preMultiplyAlpha:!0}),n.set(t.textureOcclusion,new F(I.data,t.textureOcclusion,
H)));g.isSome(t.textureEmissive)&&!n.has(t.textureEmissive)&&(I=h.textures.get(t.textureEmissive),H=b({},I.parameters,{preMultiplyAlpha:!0}),n.set(t.textureEmissive,new F(I.data,t.textureEmissive,H)));g.isSome(t.textureMetallicRoughness)&&!n.has(t.textureMetallicRoughness)&&(I=h.textures.get(t.textureMetallicRoughness),H=b({},I.parameters,{preMultiplyAlpha:!0}),n.set(t.textureMetallicRoughness,new F(I.data,t.textureMetallicRoughness,H)))}var J=E.COLOR_GAMMA,I=Math.pow(t.color[0],1/J),H=Math.pow(t.color[1],
1/J),Q=Math.pow(t.color[2],1/J),U=Math.pow(t.emissiveFactor[0],1/J),O=Math.pow(t.emissiveFactor[1],1/J),J=Math.pow(t.emissiveFactor[2],1/J);p.set(l,new E(b({transparent:"BLEND"===t.alphaMode,textureAlphaMode:K(t.alphaMode),textureAlphaCutoff:t.alphaCutoff,diffuse:[I,H,Q],ambient:[I,H,Q],opacity:t.opacity,doubleSided:t.doubleSided,doubleSidedType:"winding-order",vertexColors:!!d.attributes.color,vertexTangents:!!d.attributes.tangent,normals:r?"default":"screenDerivative",castShadows:!0,receiveSSAO:!0,
textureId:g.isSome(t.textureColor)&&y?n.get(t.textureColor).id:void 0,colorMixMode:t.colorMixMode,normalTextureId:g.isSome(t.textureNormal)&&y?n.get(t.textureNormal).id:void 0,textureAlphaPremultiplied:!0,occlusionTextureId:g.isSome(t.textureOcclusion)&&y?n.get(t.textureOcclusion).id:void 0,emissiveTextureId:g.isSome(t.textureEmissive)&&y?n.get(t.textureEmissive).id:void 0,metallicRoughnessTextureId:g.isSome(t.textureMetallicRoughness)&&y?n.get(t.textureMetallicRoughness).id:void 0,emissiveFactor:[U,
O,J],metallicFactor:t.metallicFactor,roughnessFactor:t.roughnessFactor,usePBR:!a.meta.isEsriSymbolResource},e),l))}a:{r=d.indices||d.attributes.position.count;switch(d.primitiveType){case 4:I=x.trianglesToTriangles(r);break a;case 5:I=x.triangleStripToTriangles(r);break a;case 6:I=x.triangleFanToTriangles(r);break a}I=void 0}H={};Q={};r=d.attributes.position.count;U=z.createBuffer(m.BufferViewVec3f,r);u.vec3.transformMat4(U,d.attributes.position,d.transform);Q.position={data:U.typedBuffer,size:U.elementCount};
H.position=I;g.isSome(d.attributes.normal)&&(U=z.createBuffer(m.BufferViewVec3f,r),c.mat4.invert(k,d.transform),c.mat4.transpose(k,k),u.vec3.transformMat4(U,d.attributes.normal,k),Q.normal={data:U.typedBuffer,size:U.elementCount},H.normal=I);g.isSome(d.attributes.tangent)&&(U=z.createBuffer(m.BufferViewVec4f,r),c.mat4.invert(k,d.transform),c.mat4.transpose(k,k),u.vec4.transformMat4(U,d.attributes.tangent,k),Q.aTangent={data:U.typedBuffer,size:U.elementCount},H.aTangent=I);g.isSome(d.attributes.texCoord0)&&
(U=z.createBuffer(m.BufferViewVec2f,r),z.vec2.normalizeIntegerBuffer(U,d.attributes.texCoord0),Q.uv0={data:U.typedBuffer,size:U.elementCount},H.uv0=I);g.isSome(d.attributes.color)&&(U=z.createBuffer(m.BufferViewVec4u8,r),4===d.attributes.color.elementCount?d.attributes.color instanceof m.BufferViewVec4f?u.vec4.scale(U,d.attributes.color,255):d.attributes.color instanceof m.BufferViewVec4u8?z.vec4.copy(U,d.attributes.color):d.attributes.color instanceof m.BufferViewVec4u16&&u.vec4.scale(U,d.attributes.color,
1/256):(z.vec4.fill(U,255,255,255,255),O=new m.BufferViewVec3u8(U.buffer,0,4),d.attributes.color instanceof m.BufferViewVec3f?u.vec3.scale(O,d.attributes.color,255):d.attributes.color instanceof m.BufferViewVec3u8?z.vec3.copy(O,d.attributes.color):d.attributes.color instanceof m.BufferViewVec3u16&&u.vec3.scale(O,d.attributes.color,1/256)),Q.color={data:U.typedBuffer,size:U.elementCount},H.color=I);d=new B(new C(Q,H),"gltf_"+f.name+"_"+w++);v.stageResources.geometries.push(d);v.stageResources.materials.push(p.get(l));
y&&(g.isSome(t.textureColor)&&v.stageResources.textures.push(n.get(t.textureColor)),g.isSome(t.textureNormal)&&v.stageResources.textures.push(n.get(t.textureNormal)),g.isSome(t.textureOcclusion)&&v.stageResources.textures.push(n.get(t.textureOcclusion)),g.isSome(t.textureEmissive)&&v.stageResources.textures.push(n.get(t.textureEmissive)),g.isSome(t.textureMetallicRoughness)&&v.stageResources.textures.push(n.get(t.textureMetallicRoughness)));v.numberOfVertices+=r;l=d.boundingInfo;q.expand(v.boundingBox,
l.getBBMin());q.expand(v.boundingBox,l.getBBMax())})}});return l}function K(a){switch(a){case "BLEND":return"blend";case "MASK":return"mask";case "OPAQUE":return"opaque";default:return"blend"}}function O(a,b){void 0===a&&(a="");void 0===b&&(b="");var c=e.endsWith(a,"Imposter");a=a.split("__")[0];if(-1!==b.indexOf("/RealisticTrees/")&&(b=t.treeParamsTable[a]))return{crownCenter:b.center,crownDimensions:b.radius,imposter:c}}function I(b){b.meta.isEsriSymbolResource&&b.model.lods.forEach(function(e){var d=
O(e.name,b.meta.uri);d&&(b.customMeta.esriTreeRendering=!0,e.parts.forEach(function(b){var e=b.attributes.normal,k=b.attributes.position,l=k.count;if(!g.isNone(e)){for(var q=p.vec3f64.create(),u=p.vec3f64.create(),t=p.vec3f64.create(),n=z.createBuffer(m.BufferViewVec4u8,l),w=z.createBuffer(m.BufferViewVec3f,l),x=c.mat4.invert(f.mat4f64.create(),b.transform),v=a.vec3.transformMat4(p.vec3f64.create(),d.crownCenter,x),x=a.vec3.transformMat4(p.vec3f64.create(),d.crownDimensions,x),y=0;y<l;y++){k.getVec(y,
u);e.getVec(y,q);a.vec3.subtract(t,u,v);a.vec3.divide(t,t,x);var B=h.clamp(a.vec3.length(t),0,1),B=.6+.4*B*B;a.vec3.lerp(t,t,q,.2);w.setVec(y,t);n.set(y,0,255*B);n.set(y,1,255*B);n.set(y,2,255*B);n.set(y,3,255)}b.attributes.normal=w;b.attributes.color=n}}))})}function H(a){var b=a.model.lods.length;a.meta.isEsriSymbolResource&&a.model.lods.forEach(function(a){if(!g.isSome(a.lodThreshold)){var c=(a.name||"").replace("Imposter","Realistic_LOD0").split("_LOD")[0],e=a.parts.reduce(function(a,b){return a+
b.attributes.position.count},0);a.lodThreshold=S(c,e,b)}})}function S(a,b,c){void 0===a&&(a="");if(1===c)return null;if(a in t.lodThresholdLUT){c=t.lodThresholdLUT[a].vertexCounts;a=t.lodThresholdLUT[a].thresholds;var e=c.length;if(1>=e)return null;if(b<=c[0]){var d=(c[1]-c[0])/(a[1]-a[0]);b-=c[0];return Math.max(0,a[0]+b*d)}if(b>=c[e-1])return d=(c[e-1]-c[e-2])/(a[e-1]-a[e-2]),b-=c[e-1],a[e-1]+b*d;for(var f=1;f<c.length;++f){var g=c[f-1],h=c[f],e=a[f-1],d=a[f];if(b<h)return b=(b-g)/(h-g),e*(1-b)+
d*b}}return null}Object.defineProperty(d,"__esModule",{value:!0});d.fetch=function(a,c){void 0===c&&(c={});return k(this,void 0,void 0,function(){var e,d,f,g,h,k,m,p,q,u;return l(this,function(l){switch(l.label){case 0:return e=N(a),"wosr"!==e.fileType?[3,2]:[4,w.load(e.url,c)];case 1:return d=l.sent(),[2,{lods:[d],referenceBoundingBox:d.boundingBox}];case 2:return f=new v.DefaultLoadingContext(c.streamDataRequester),[4,y.load(f,e.url,c)];case 3:g=l.sent();I(g);H(g);h=b({},c.materialParamsMixin,{treeRendering:g.customMeta.esriTreeRendering});
if(null!=e.specifiedLodIndex)return k=L(g,h,e.specifiedLodIndex),m=k[0].boundingBox,0!==e.specifiedLodIndex&&(p=L(g,h,e.specifiedLodIndex),m=p[0].boundingBox),[2,{lods:k,referenceBoundingBox:m}];q=L(g,h);u=q[0].boundingBox;return[2,{lods:q,referenceBoundingBox:u}]}})})};d.parseUrl=N;d.gltfToEngineResources=L})},"esri/views/3d/glTF/DefaultLoadingContext":function(){define("require exports ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/assignHelper ../../../request ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a){this.streamDataRequester=a}d.prototype.loadJSON=function(a,b){return n(this,void 0,void 0,function(){return l(this,function(c){return[2,this.load("json",a,b)]})})};d.prototype.loadBinary=function(a,b){return n(this,void 0,void 0,function(){return l(this,function(e){return f.isDataProtocol(a)?(c.throwIfAborted(b),[2,f.dataToArrayBuffer(a)]):[2,this.load("binary",a,b)]})})};d.prototype.loadImage=
function(a,b){return n(this,void 0,void 0,function(){return l(this,function(c){return[2,this.load("image",a,b)]})})};d.prototype.load=function(d,f,k){return n(this,void 0,void 0,function(){var p;return l(this,function(l){switch(l.label){case 0:return e.isNone(this.streamDataRequester)?[4,b(f,a[d])]:[3,2];case 1:return[2,l.sent().data];case 2:return[4,h.result(this.streamDataRequester(f,d,k))];case 3:p=l.sent();if(!0===p.ok)return[2,p.value];c.throwIfAbortError(p.error);throw new g("","Request for resource failed: "+
p.error);}})})};return d}();d.DefaultLoadingContext=r;var a={image:{responseType:"image"},binary:{responseType:"array-buffer"},json:void 0}})},"esri/views/3d/glTF/esriProvidedModelParameters":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.treeParamsTable={Alder_Buckthorn:{center:[0,0,2.5],radius:[2,2,3.5]},American_Chestnut:{center:[0,0,12],radius:[10,10,10]},American_Sycamore:{center:[0,0,16],radius:[6.3,6.3,11.5]},Apricot:{center:[0,0,5],
radius:[4.5,4.5,4]},Australian_Pine:{center:[0,0,8],radius:[3,3,11.5]},Baldcypress:{center:[0,0,11.5],radius:[4.2,4.2,16.5]},Balsam_Fir:{center:[0,0,2.9],radius:[3,3,9.7]},Basswood:{center:[0,0,19],radius:[9,9,11]},Bay_Laurel:{center:[0,0,1.4],radius:[.6,.6,2.7]},Black_Locust:{center:[0,0,15],radius:[9.5,9.5,9.5]},Blue_Gum_Eucalyptus:{center:[0,0,12],radius:[5,5,10]},Boxwood:{center:[0,0,.5],radius:[.3,.3,.5]},California_Bay:{center:[0,0,16],radius:[9,9,9.6]},California_Incense_Cedar:{center:[0,0,
6.6],radius:[3.8,3.8,14]},California_Redwood:{center:[0,0,55],radius:[6.5,6.5,19]},California_Walnut:{center:[0,0,5.3],radius:[5,5,4.5]},Common_Hawthorn:{center:[0,0,2.8],radius:[1.9,1.9,2.8]},Common_Whitebeam:{center:[0,0,4.5],radius:[2.5,2.5,3.5]},Conker_Tree:{center:[0,0,10],radius:[6,6,10]},Desert_Willow:{center:[0,0,3],radius:[2.4,2.4,2.8]},Douglas_Fir:{center:[0,0,40],radius:[4.5,4.5,22]},European_Beech:{center:[0,0,12],radius:[7.5,7.5,11.5]},European_Larch:{center:[0,0,9],radius:[3,3,9]},Ficus:{center:[0,
0,10],radius:[12,12,18.5]},Field_Elm:{center:[0,0,12.5],radius:[10,10,9.5]},Flannelbush:{center:[0,0,0],radius:[1.3,1.3,1.7]},Flowering_Dogwood:{center:[0,0,2.5],radius:[2.4,2.4,3]},Generic_Unknown:{center:[0,0,11.5],radius:[5,5,6.5]},Giant_Sequoia:{center:[0,0,35.5],radius:[11,11,26]},Japanese_Angelica_Tree:{center:[0,0,3.8],radius:[2.8,2.8,2]},Leyland_Cypress:{center:[0,0,2.8],radius:[1,1,4]},Lodgepole_Pine:{center:[0,0,23.25],radius:[4.7,4.7,19]},Mediterranean_Buckthorn:{center:[0,0,1.5],radius:[1.2,
1.2,2.5]},Mountain_Mahogany:{center:[0,0,2],radius:[1.3,1.3,1.5]},Northern_Red_Oak:{center:[0,0,11.5],radius:[7.2,7.2,9]},Norway_Maple:{center:[0,0,12.2],radius:[6,6,8.2]},Norway_Spruce:{center:[0,0,5],radius:[6.5,6.5,20]},Oval_Leaved_Privet:{center:[0,0,0],radius:[.45,.45,2.95]},Palo_Verde:{center:[0,0,4.25],radius:[4,4,2.75]},Paper_Birch:{center:[0,0,13.25],radius:[5.5,5.5,9.5]},Red_Alder:{center:[0,0,13.25],radius:[5.5,5.5,9.5]},Red_Hickory:{center:[0,0,9],radius:[4.5,4.5,7.5]},Rhododendron_Azaleas:{center:[0,
0,.55],radius:[.4,.4,.35]},Rose:{center:[0,0,.55],radius:[.45,.45,.55]},Ruffle_Palm:{center:[0,0,6.4],radius:[3,3,3]},Sassafras:{center:[0,0,8],radius:[3,3,7]},Scots_Pine:{center:[0,0,18],radius:[3,3,9]},Shadbush:{center:[0,0,1.5],radius:[1.5,1.5,1.5]},Southern_Magnolia:{center:[0,0,10.5],radius:[5.5,5.5,8]},Spanish_Broom:{center:[0,0,1.5],radius:[2.5,2.5,1.5]},Strawberry_Tree:{center:[0,0,4],radius:[2.8,2.8,3.3]},Sugar_Maple:{center:[0,0,8],radius:[4.5,4.5,7]},Sweetgum:{center:[0,0,8],radius:[4,
4,6.5]},Umbrella_Acacia:{center:[0,0,10.8],radius:[15,15,6.8]},Western_Juniper:{center:[0,0,3.2],radius:[2.5,2.5,7]},White_Ash:{center:[0,0,14.5],radius:[9.5,9.5,11]},White_Oak:{center:[0,0,15],radius:[14,14,14]},White_Poplar:{center:[0,0,10],radius:[4.3,4.3,8.2]},White_Willow:{center:[0,0,12],radius:[8.9,8.9,9]},Witch_Hazel:{center:[0,0,1.5],radius:[1.5,1.5,2]}};d.lodThresholdLUT={Alder_Buckthorn__Realistic:{thresholds:[2,65.698,384.294],vertexCounts:[18,2034,8220]},Amazon_Sword_Plant__Realistic:{thresholds:[2,
22.848,88.819,200.491],vertexCounts:[18,246,888,3246]},American_Chestnut__Realistic:{thresholds:[2,27.57,59.244,360.286],vertexCounts:[18,444,1782,10332]},American_Sycamore__Realistic:{thresholds:[2,60.765,228.586],vertexCounts:[18,1740,8562]},Apricot__Realistic:{thresholds:[2,33.695,132.332],vertexCounts:[18,1776,10626]},Australian_Pine__Realistic:{thresholds:[2,131.057],vertexCounts:[18,8094]},Baldcypress__Realistic:{thresholds:[2,31.791,212.226],vertexCounts:[18,1638,10164]},Balsam_Fir__Realistic:{thresholds:[2,
64.674],vertexCounts:[18,10266]},Bamboo__Realistic:{thresholds:[2,22.347,90.113,213.818],vertexCounts:[18,216,978,7740]},Banana_Tree__Realistic:{thresholds:[2,28.096,88.837,345.976],vertexCounts:[18,372,1986,10743]},Basswood__Realistic:{thresholds:[2,59.387,199.555],vertexCounts:[18,1662,7998]},Bay_Laurel__Realistic:{thresholds:[2,28.653,204.352],vertexCounts:[18,1728,10938]},Black_Locust__Realistic:{thresholds:[2,28.546,88.164,229.447],vertexCounts:[18,384,1638,9768]},Blue_Gum_Eucalyptus__Realistic:{thresholds:[2,
56.98,201.358],vertexCounts:[18,1530,9762]},Boxwood__Realistic:{thresholds:[2,28.768,62.215,191.034],vertexCounts:[18,390,1824,9876]},Cabbage_Palm_Fern__Realistic:{thresholds:[2,26.932,215.221],vertexCounts:[18,150,1314]},California_Bay__Realistic:{thresholds:[2,30.627,204.223],vertexCounts:[18,1878,9054]},California_Incense_Cedar__Realistic:{thresholds:[2,30.533,197.262],vertexCounts:[18,1644,11214]},California_Palm__Realistic:{thresholds:[2,30.538,210.616],vertexCounts:[18,612,5760]},California_Redwood__Realistic:{thresholds:[2,
110.805],vertexCounts:[18,10260]},California_Walnut__Realistic:{thresholds:[2,26.702,64.525,199.228],vertexCounts:[18,336,1962,10992]},Coconut_Palm__Realistic:{thresholds:[2,21.77,63.23,199.556],vertexCounts:[18,402,1884,9240]},Common_Hawthorn__Realistic:{thresholds:[2,45.588,205.35],vertexCounts:[18,300,9492]},Common_Whitebeam__Realistic:{thresholds:[2,56.42,186.382],vertexCounts:[18,2142,10524]},Conker_Tree__Realistic:{thresholds:[2,25.977,58.524,195.139],vertexCounts:[18,318,1614,8886]},Date_Palm__Realistic:{thresholds:[2,
31.107,67.609,186.723],vertexCounts:[18,456,2154,9054]},Desert_Willow__Realistic:{thresholds:[2,29.425,59.815,203.238],vertexCounts:[18,408,1686,9720]},Douglas_Fir__Realistic:{thresholds:[2,69.576],vertexCounts:[18,8544]},European_Beech__Realistic:{thresholds:[2,29.854,201.521],vertexCounts:[18,420,7572]},European_Larch__Realistic:{thresholds:[2,65.346],vertexCounts:[18,10314]},Ficus__Realistic:{thresholds:[2,28.768,58.849,210.62],vertexCounts:[18,390,1632,7728]},Field_Elm__Realistic:{thresholds:[2,
34.435,192.436],vertexCounts:[18,1746,10950]},Flannelbush__Realistic:{thresholds:[2,27.408,55.566,196.843],vertexCounts:[18,354,1455,8706]},Flowering_Dogwood__Realistic:{thresholds:[2,28.768,194.687],vertexCounts:[18,390,8664]},Generic_Dead_Tree__Realistic:{thresholds:[2,67.891],vertexCounts:[18,2172]},Generic_Stump__Realistic:{thresholds:[2,19.544,57.757,171.552],vertexCounts:[18,180,1572,2634]},Generic_Unknown__Realistic:{thresholds:[2,32.379,221.987],vertexCounts:[18,1572,9006]},Giant_Sequoia__Realistic:{thresholds:[2,
30.664,204.84],vertexCounts:[18,2160,8232]},Hedgehog_Agave__Realistic:{thresholds:[2,28.546,96.141,228.435],vertexCounts:[18,384,1980,11094]},Japanese_Angelica_Tree__Realistic:{thresholds:[2,25.482,61.287,202.909],vertexCounts:[18,306,1770,7806]},Lacy_Tree_Philodendron__Realistic:{thresholds:[2,28.768,62.974,231.634],vertexCounts:[18,390,1752,10227]},Leyland_Cypress__Realistic:{thresholds:[2,66.246],vertexCounts:[18,10182]},Lily_Of_The_Valley__Realistic:{thresholds:[2,28.322,55.738,198.232],vertexCounts:[18,
378,1464,4152]},Scots_Pine__Realistic:{thresholds:[2,60.554],vertexCounts:[18,7524]},Mediterranean_Buckthorn__Realistic:{thresholds:[2,31.82,211.856],vertexCounts:[18,2196,9030]},Mexican_Palmetto__Realistic:{thresholds:[2,29.425,68.358,212.659],vertexCounts:[18,408,2202,10194]},Mountain_Mahogany__Realistic:{thresholds:[2,31.199,198.614],vertexCounts:[18,1614,8094]},White_Oak__Realistic:{thresholds:[2,15.204,33.801,129.392],vertexCounts:[18,372,1674,9222]},Sugar_Maple__Realistic:{thresholds:[2,28.322,
59.495,216.901],vertexCounts:[18,378,1668,9462]},Norway_Spruce__Realistic:{thresholds:[2,63.101],vertexCounts:[18,9630]},Orchid__Realistic:{thresholds:[2,30.383,63.93,198.664],vertexCounts:[18,435,1926,8346]},Other__Realistic:{thresholds:[2,30.504,194.487],vertexCounts:[18,1572,9006]},Oval_Leaved_Privet__Realistic:{thresholds:[2,59.468],vertexCounts:[18,9162]},Palm_Lily__Realistic:{thresholds:[2,57.977,200.406],vertexCounts:[18,1584,8112]},Palo_Verde__Realistic:{thresholds:[2,65.31,198.124],vertexCounts:[18,
2010,7668]},Paper_Birch__Realistic:{thresholds:[2,117.074],vertexCounts:[18,10578]},Parlour_Palm__Realistic:{thresholds:[2,30.695,60.974,194.832],vertexCounts:[18,444,1752,8388]},Prickly_Pear_Cactus__Realistic:{thresholds:[2,28.657,66.946,214.478],vertexCounts:[18,387,2112,11028]},Red_Alder__Realistic:{thresholds:[2,30.518,192.513],vertexCounts:[18,1770,8274]},Red_Hickory__Realistic:{thresholds:[2,31.604,192.085],vertexCounts:[18,1680,7908]},Rhododendron_Azaleas__Realistic:{thresholds:[2,47.068,192.681],
vertexCounts:[18,1044,8160]},Rose__Realistic:{thresholds:[2,66.085,212.061],vertexCounts:[18,2058,10968]},Ruffle_Palm__Realistic:{thresholds:[2,64.994],vertexCounts:[18,9534]},Saguaro_Cactus__Realistic:{thresholds:[2,34.779,56.703,197.566],vertexCounts:[18,570,1050,1992]},Sassafras__Realistic:{thresholds:[2,110.697],vertexCounts:[18,10944]},Sea_Islands_Yucca__Realistic:{thresholds:[2,61.287,219.899],vertexCounts:[18,1770,10176]},Shadbush__Realistic:{thresholds:[2,26.702,64.03,201.856],vertexCounts:[18,
336,1932,9030]},Snake_Plant__Realistic:{thresholds:[2,23.803,68.265,193.203],vertexCounts:[18,267,2196,5280]},Southern_Magnolia__Realistic:{thresholds:[2,63.431,212.165],vertexCounts:[18,1896,8472]},Spanish_Broom__Realistic:{thresholds:[2,29.854,192.889],vertexCounts:[18,420,7896]},Strawberry_Tree__Realistic:{thresholds:[2,16.772,32.081,186.987],vertexCounts:[18,300,1560,8148]},Sunflower__Realistic:{thresholds:[2,28.768,66.373,194.987],vertexCounts:[18,390,2076,7902]},Sweetgum__Realistic:{thresholds:[2,
31.436,201.223],vertexCounts:[18,1848,7674]},Umbrella_Acacia__Realistic:{thresholds:[2,62.137],vertexCounts:[18,8880]},Western_Juniper__Realistic:{thresholds:[2,62.683],vertexCounts:[18,9120]},White_Ash__Realistic:{thresholds:[2,33.326,192.138],vertexCounts:[18,2070,10542]},White_Poplar__Realistic:{thresholds:[2,30.615,196.71],vertexCounts:[18,1530,9888]},White_Willow__Realistic:{thresholds:[2,62.983],vertexCounts:[18,10422]},Witch_Hazel__Realistic:{thresholds:[2,26.463,66.277,200.916],vertexCounts:[18,
330,2070,10386]},ATM_:{thresholds:[2,46.933],vertexCounts:[150,1038]},Bus_Stop_1_:{thresholds:[2,42.67],vertexCounts:[150,858]},Bus_Stop_2_:{thresholds:[2,46.112],vertexCounts:[138,1002]},Dumpster_:{thresholds:[2,48.006],vertexCounts:[138,1086]},Newspaper_Vending_Machine_:{thresholds:[2,57.203],vertexCounts:[144,1542]},Overhanging_Sidewalk_Light_Off_:{thresholds:[2,43.847],vertexCounts:[141,906]},Overhanging_Sidewalk_Light_On_:{thresholds:[2,43.847],vertexCounts:[141,906]},Overhanging_Street_And_Sidewalk_Light_Off_:{thresholds:[2,
46.524],vertexCounts:[147,1020]},Overhanging_Street_And_Sidewalk_Light_On_:{thresholds:[2,46.524],vertexCounts:[147,1020]},Overhanging_Street_Light_Off_:{thresholds:[2,34.225],vertexCounts:[144,552]},Overhanging_Street_Light_On_:{thresholds:[2,34.225],vertexCounts:[144,552]},Park_Bench_1_:{thresholds:[2,23.669],vertexCounts:[96,264]},Park_Bench_2_:{thresholds:[2,44.71],vertexCounts:[144,942]},Park_Bench_3_:{thresholds:[2,41.917],vertexCounts:[120,828]},Park_Bench_4_:{thresholds:[2,69.923],vertexCounts:[144,
2304]},Payphone_:{thresholds:[2,58.524],vertexCounts:[156,1614]},Picnic_Table_:{thresholds:[2,35.504],vertexCounts:[90,594]},Planter_Circular_:{thresholds:[2,99.368],vertexCounts:[153,4653]},Planter_Square_:{thresholds:[2,65.212],vertexCounts:[150,2004]},Planter_Tapered_:{thresholds:[2,89.669],vertexCounts:[141,3789]},Rock_1_:{thresholds:[2,28.768,50.463],vertexCounts:[132,390,1200]},Rock_2_:{thresholds:[2,43.556,73.127],vertexCounts:[150,894,2520]},Rock_3_:{thresholds:[2,37.931,70.286],vertexCounts:[144,
678,2328]},Rock_4_:{thresholds:[2,41.613,70.738],vertexCounts:[150,816,2358]},Street_Light_Off_:{thresholds:[2,39.734,56.869],vertexCounts:[150,744,1524]},Street_Light_On_:{thresholds:[2,39.734,56.869],vertexCounts:[150,744,1524]},Traffic_Barrier_2_:{thresholds:[2,42.819],vertexCounts:[132,864]},Trash_Bin_1_:{thresholds:[2,50.019],vertexCounts:[132,1179]},Trash_Bin_2_:{thresholds:[2,36.038,63.028],vertexCounts:[108,612,1872]},Trash_Bin_3_:{thresholds:[2,42.371,64.03],vertexCounts:[102,846,1932]},
Trash_Can_1_:{thresholds:[2,58.524,98.628],vertexCounts:[150,1614,4584]},Trash_Can_2_:{thresholds:[2,53.166],vertexCounts:[84,1332]},US_Mailbox_:{thresholds:[2,48.402],vertexCounts:[156,1104]},Ambulance_:{thresholds:[2,67.121,343.733],vertexCounts:[294,3285,13758]},Audi_A6_:{thresholds:[2,63.823,484.156],vertexCounts:[300,4311,14280]},Backhoe_:{thresholds:[2,60.173,391.986],vertexCounts:[453,5895,14679]},BMW_3Series_:{thresholds:[2,68.886,417.563],vertexCounts:[294,4188,14727]},Bobcat_:{thresholds:[2,
61.105,269.127],vertexCounts:[438,4476,14952]},Bus_:{thresholds:[2,63.803,402.682],vertexCounts:[300,4398,14988]},Crane_:{thresholds:[2,65.969,386.67],vertexCounts:[438,4497,14487]},Dumptruck_:{thresholds:[2,66.91,354.365],vertexCounts:[456,6294,14052]},Eurocopter_AS365_:{thresholds:[2,227.817],vertexCounts:[432,14733]},Eurocopter_AS365_Flying_:{thresholds:[2,96.244,380.211],vertexCounts:[306,4365,10575]},Eurocopter_H125_:{thresholds:[2,96.567,378.995],vertexCounts:[438,4440,14763]},Eurocopter_H125_Flying_:{thresholds:[2,
94.002,366.378],vertexCounts:[294,4164,13569]},Firetruck_:{thresholds:[2,65.762,383.645],vertexCounts:[276,4482,14901]},Ford_Edge_:{thresholds:[2,68.763,419.635],vertexCounts:[294,4368,14733]},Ford_Expedition_:{thresholds:[2,62.994,388.251],vertexCounts:[276,4410,14868]},Ford_F150_:{thresholds:[2,60.495,394.682],vertexCounts:[300,4950,14988]},Ford_Fiesta_:{thresholds:[2,64.994,355.46],vertexCounts:[282,4185,14223]},Ford_Focus_Hatchback_:{thresholds:[2,62.072,387.932],vertexCounts:[300,4470,14925]},
Ford_Fusion_:{thresholds:[2,64.485,370.289],vertexCounts:[294,4500,14955]},Ford_Mustang_:{thresholds:[2,64.812,351.721],vertexCounts:[288,4197,14574]},Ford_Taurus_:{thresholds:[2,67.461,379.324],vertexCounts:[282,4404,15042]},Ford_Transit_Commercial_Van_:{thresholds:[2,88.6,384.491],vertexCounts:[276,4443,14721]},Ford_Transit_Connect_:{thresholds:[2,67.006,336.74],vertexCounts:[258,4344,14328]},Mercedes_SClass_:{thresholds:[2,66.188,349.491],vertexCounts:[300,4377,14721]},Motorboat_:{thresholds:[2,
67.436,364.325],vertexCounts:[315,4491,14958]},Motorcycle_:{thresholds:[2,35.435,357.215],vertexCounts:[294,4806,14865]},Police_Car_:{thresholds:[2,68.116,350.794],vertexCounts:[294,3987,14580]},Porsche_Boxter_:{thresholds:[2,67.717,361.95],vertexCounts:[312,6225,14676]},Porsche_Carrera_:{thresholds:[2,66.588,392.685],vertexCounts:[306,4473,14571]},Sailboat_:{thresholds:[2,97.329,383.075],vertexCounts:[294,4464,14937]},Sailboat_Sails_Up_:{thresholds:[2,97.46,360.432],vertexCounts:[300,4476,14967]},
Taxi_:{thresholds:[2,64.415,381.491],vertexCounts:[300,4305,14721]},Taxi_Van_:{thresholds:[2,64.614,364.475],vertexCounts:[288,4341,11949]},Tesla_P7_:{thresholds:[2,58.155],vertexCounts:[300,16062]},Tower_Crane_:{thresholds:[2,106.34,419.821],vertexCounts:[432,4488,14832]},Toyota_Prius_:{thresholds:[2,66.448,357.251],vertexCounts:[288,4266,14370]},Tram_:{thresholds:[2,65.43,369.937],vertexCounts:[420,5610,19605]},Volkswagen_Jetta_Wagon_:{thresholds:[2,65.925,354.416],vertexCounts:[294,4443,14466]},
Traffic_Light_1_:{thresholds:[2,75.315],vertexCounts:[135,2673]},Traffic_Light_3_:{thresholds:[2,49.12],vertexCounts:[132,1137]},Traffic_Light_4_:{thresholds:[2,70.962,115.735],vertexCounts:[96,2373,6312]},Cell_Phone_Antenna_:{thresholds:[2,53.05602049838099,225.75567007367763],vertexCounts:[150,894,4242]},Electricity_Box_:{thresholds:[2,56.48433069112405,207.14360140104995],vertexCounts:[108,744,1026]},Electricity_Meter_:{thresholds:[2,53.4669717168887,215.04066673528195],vertexCounts:[120,384,960]},
Powerline_Pole_:{thresholds:[2,28.11004122822377,58.29783783397482],vertexCounts:[120,840,3678]},Radio_Antenna_:{thresholds:[2,32.2179270951266,462.06696540941175],vertexCounts:[297,1815,9009]},Wind_Turbine_:{thresholds:[2,56.15679308163878,247.66420622007408],vertexCounts:[291,1806,7974]},Bike_Rack_:{thresholds:[2,33.4134686118416,742.2476610265626],vertexCounts:[138,900,3948]},Fire_Hydrant_:{thresholds:[2,30.215510249190537,390.42722821984944],vertexCounts:[156,894,2676]},Fountain_1_:{thresholds:[2,
52.36907652663328,221.4335455931077],vertexCounts:[300,1782,8052]},Fountain_2_:{thresholds:[2,58.20077988776262,254.01846725224388],vertexCounts:[288,1794,8526]},Fountain_3_:{thresholds:[2,30.089436161855176,215.0465007031079],vertexCounts:[306,1800,8880]},Fountain_4_:{thresholds:[2,90.06038366113779,351.6045839690371],vertexCounts:[252,1656,2136]},Mailbox_:{thresholds:[2,52.806020498381045,378.6213345953622],vertexCounts:[150,894,4494]},Sewer_Grate_:{thresholds:[2,32.31186201200472,388.7801192944885],
vertexCounts:[60,492,1788]},Storm_Drain_:{thresholds:[2,93.440164912895,355.73135487536024],vertexCounts:[150,840,3300]},Traffic_Pylon_:{thresholds:[2,59.30348706874729,388.12062237971986],vertexCounts:[138,756,1740]},Airplane_Large_Passenger_:{thresholds:[2,32.63681118513339,229.25055778384916],vertexCounts:[303,1614,7086]},Airplane_Large_Passenger_With_Wheels_:{thresholds:[2,57.56132180109627,219.23679864871204],vertexCounts:[450,2550,9186]},Airplane_Private_:{thresholds:[2,55.15153188839752,218.4051249478359],
vertexCounts:[300,1209,6894]},Airplane_Private_With_Wheels_:{thresholds:[2,54.962671511046956,225.3801611565773],vertexCounts:[366,1737,8454]},Airplane_Propeller_:{thresholds:[2,55.03627391751588,214.63956781455144],vertexCounts:[291,1560,8502]},Airplane_Propeller_With_Wheels_:{thresholds:[2,57.1404638556843,221.48743600008154],vertexCounts:[303,1776,9006]},Airplane_Small_Passenger_:{thresholds:[2,56.98035485213009,217.0648860940108],vertexCounts:[300,1530,8946]},Airplane_Small_Passenger_With_Wheels_:{thresholds:[2,
56.402226419354996,227.53633450087503],vertexCounts:[456,1698,11400]},Cargo_Box_:{thresholds:[2,180.55115902122088,360.2534460453696],vertexCounts:[132,672,3738]},Cargo_Ship_Empty_:{thresholds:[2,58.00721049029622,327.1185961587389],vertexCounts:[444,2616,10896]},Cargo_Ship_Full_:{thresholds:[2,55.386139460867525,346.87126261041203],vertexCounts:[450,2670,10950]},City_Bike_:{thresholds:[2,56.670817449986885,242.3113495346381],vertexCounts:[300,1785,8736]},Delivery_Truck_:{thresholds:[2,34.92797405514993,
120.33485126686935],vertexCounts:[408,2130,13248]},High_Speed_Train_:{thresholds:[2,58.255981072570464,405.19492233117126],vertexCounts:[276,1908,11928]},Mountain_Bike_:{thresholds:[2,30.151936161855172,115.15158622172994],vertexCounts:[294,1800,8994]},Pickup_Truck_Ford_F250_:{thresholds:[2,31.705838007504713,69.25663661786093],vertexCounts:[300,1770,8976]},Pickup_Truck_Toyota_Hilux_:{thresholds:[2,56.84455317543219,128.81569681781366],vertexCounts:[306,1716,9048]},Road_Bike_:{thresholds:[2,44.97251491181105,
127.30122549350301],vertexCounts:[297,1788,8916]},Semi_Trailer_Truck_:{thresholds:[2,35.382538898732484,127.42462492550419],vertexCounts:[282,1740,8997]},Tractor_:{thresholds:[2,33.01181118513338,128.39790644030703],vertexCounts:[306,1614,8961]},Tractor_And_Trailer_:{thresholds:[2,33.18284541984615,130.95719106637375],vertexCounts:[450,2502,12894]},Trailer_:{thresholds:[2,30.327031957706836,119.19765978853422],vertexCounts:[270,1440,9E3]},Train_Europe_:{thresholds:[2,31.15174353437363,105.3408295387661],
vertexCounts:[138,756,3846]},Train_Europe_With_Carriages_:{thresholds:[2,57.97062023935375,355.8054399222865],vertexCounts:[408,2682,10596]},Train_US_:{thresholds:[2,27.776264387000953,61.24231873858716],vertexCounts:[156,618,3648]},Tricycle_:{thresholds:[2,31.87237750582925,132.64683491853526],vertexCounts:[297,1746,8136]},Truck_With_Trailer_:{thresholds:[2,57.64037298915464,361.21271516459444],vertexCounts:[438,2478,13476]},Orange_Tree__Realistic:{thresholds:[2,25.470734736913386,62.118518915365755,
128.10642692525323],vertexCounts:[18,354,1524,10302]},American_Football_Goal_:{thresholds:[2,34.76135530828228,712.2046360848831],vertexCounts:[147,588,2688]},Basketball_Hoop_:{thresholds:[2,52.74512035232253,208.15783725757558],vertexCounts:[123,768,4260]},Jungle_Gym_:{thresholds:[2,47.5885918871016,256.602450987006],vertexCounts:[294,1773,8916]},Slide_:{thresholds:[2,29.23625745590553,729.2078902902748],vertexCounts:[252,1788,7440]},Soccer_Goal_:{thresholds:[2,33.671199284957794,364.5834082156921],
vertexCounts:[138,870,4266]},Swing_:{thresholds:[2,32.70510997459713,449.6062391021012],vertexCounts:[300,1734,7176]},Teeter_Totter_:{thresholds:[2,53.23896332520353,456.4221097287286],vertexCounts:[294,1710,7794]},Balsam_Fir__Schematic:{thresholds:[2,107.63596252927391,859.3878782201409],vertexCounts:[66,126,222]},Umbrella_Acacia__Schematic:{thresholds:[2,28.236981042654023,770.1463507109006],vertexCounts:[138,630,2238]},Sugar_Maple__Schematic:{thresholds:[2,14.35031627906977,881.1466235565822],
vertexCounts:[108,852,3396]},Conker_Tree__Schematic:{thresholds:[2,15.284392361111118,832.0115049504952],vertexCounts:[108,852,3396]},Hedgehog_Agave__Schematic:{thresholds:[2,14.987731203007513,823.8048558262012],vertexCounts:[72,792,3312]},Ruffle_Palm__Schematic:{thresholds:[2,12.135573455233287,817.5737099621688],vertexCounts:[108,852,3396]},Red_Alder__Schematic:{thresholds:[2,14.01284931506851,780.2679999999996],vertexCounts:[108,852,3396]},Shadbush__Schematic:{thresholds:[2,29.80464285714286,
842.6101098901099],vertexCounts:[72,792,3312]},Japanese_Angelica_Tree__Schematic:{thresholds:[2,15.115126024590165,799.501264413519],vertexCounts:[108,852,3396]},Strawberry_Tree__Schematic:{thresholds:[2,15.083150000000003,818.0121967213113],vertexCounts:[108,852,3396]},Paper_Birch__Schematic:{thresholds:[2,10.303635227272727,878.0123272727276],vertexCounts:[108,780,2100]},Orchid__Schematic:{thresholds:[2,26.07269215291752,923.3067065420558],vertexCounts:[108,780,2100]},Boxwood__Schematic:{thresholds:[2,
15.198452928870296,830.9156959761549],vertexCounts:[108,852,3396]},California_Incense_Cedar__Schematic:{thresholds:[2,12.739357933579337,864.1071448275861],vertexCounts:[138,630,2238]},Saguaro_Cactus__Schematic:{thresholds:[2,27.560375000000015,919.7996596551259],vertexCounts:[108,780,2100]},Red_Hickory__Schematic:{thresholds:[2,16.855436823104693,800.57046628131],vertexCounts:[108,852,3396]},American_Chestnut__Schematic:{thresholds:[2,17.239219730941716,846.5782343859651],vertexCounts:[108,852,3396]},
Australian_Pine__Schematic:{thresholds:[2,16.529950965824664,803.2413670133733],vertexCounts:[138,630,2238]},Mountain_Mahogany__Schematic:{thresholds:[2,13.008124060150381,917.9049999999999],vertexCounts:[108,852,3396]},Parlour_Palm__Schematic:{thresholds:[2,14.524522935779814,819.898849909584],vertexCounts:[108,780,2100]},Desert_Willow__Schematic:{thresholds:[2,14.02700704225353,920.7354144884243],vertexCounts:[108,852,3396]},Orange_Tree__Schematic:{thresholds:[2,14.192646264057018,861.1305417111394],
vertexCounts:[108,852,3396]},Coconut_Palm__Schematic:{thresholds:[2,16.367034412955462,902.0106492659056],vertexCounts:[108,852,3396]},Lily_Of_The_Valley__Schematic:{thresholds:[2,51.11744751381218,792.1491071428572],vertexCounts:[138,630,2238]},Palm_Lily__Schematic:{thresholds:[2,15.243925287356316,799.762794117647],vertexCounts:[108,780,2100]},Flowering_Dogwood__Schematic:{thresholds:[2,15.508128172588837,810.379933284989],vertexCounts:[108,852,3396]},Common_Hawthorn__Schematic:{thresholds:[2,15.159807441253282,
889.5056919060053],vertexCounts:[72,792,3312]},Leyland_Cypress__Schematic:{thresholds:[2,14.94957231404959,805.2679669421484],vertexCounts:[108,852,3396]},Amazon_Sword_Plant__Schematic:{thresholds:[2,17.358711448598132,824],vertexCounts:[108,852,3396]},Blue_Gum_Eucalyptus__Schematic:{thresholds:[2,26.441309523809522,820.3575976676384],vertexCounts:[138,630,2238]},European_Beech__Schematic:{thresholds:[2,25.26955788590608,871.8532751677853],vertexCounts:[138,630,2238]},Ficus__Schematic:{thresholds:[2,
15.364387681159425,800.1358897637797],vertexCounts:[108,852,3396]},Alder_Buckthorn__Schematic:{thresholds:[2,16.64437797619048,1028.757943743938],vertexCounts:[108,852,3396]},White_Ash__Schematic:{thresholds:[2,14.981912280701744,776.9208385269121],vertexCounts:[108,852,3396]},Flannelbush__Schematic:{thresholds:[2,15.24620504087194,805.9792635498547],vertexCounts:[72,792,3312]},Generic_Dead_Tree__Schematic:{thresholds:[2,15.068557103064066,858],vertexCounts:[108,852,3396]},Witch_Hazel__Schematic:{thresholds:[2,
15.320549999999995,801.9632958152956],vertexCounts:[108,852,3396]},Sunflower__Schematic:{thresholds:[2,30.66128647686832,796.1051534500516],vertexCounts:[108,852,3396]},California_Walnut__Schematic:{thresholds:[2,16.488717712177117,895.3309873754151],vertexCounts:[108,852,3396]},Western_Juniper__Schematic:{thresholds:[2,26.945806855636135,767.2468292682922],vertexCounts:[138,630,2238]},European_Larch__Schematic:{thresholds:[2,13.155643356643353,830.1452680652685],vertexCounts:[138,630,2238]},Bay_Laurel__Schematic:{thresholds:[2,
14.695218421052633,808.1161693811073],vertexCounts:[138,630,2238]},Oval_Leaved_Privet__Schematic:{thresholds:[2,14.822584645669306,828.4657637795276],vertexCounts:[72,792,3312]},Sweetgum__Schematic:{thresholds:[2,14.500420491803279,792.8281936148301],vertexCounts:[138,630,2238]},Southern_Magnolia__Schematic:{thresholds:[2,15.046679712460072,778.8604087591239],vertexCounts:[108,852,3396]},Banana_Tree__Schematic:{thresholds:[2,14.268900557620823,855.4758067831449],vertexCounts:[108,780,2100]},Prickly_Pear_Cactus__Schematic:{thresholds:[2,
14.461720869565228,817.0421426086955],vertexCounts:[72,720,2016]},Generic_Unknown__Schematic:{thresholds:[2,14.366287644787645,899.208477804681],vertexCounts:[108,852,3396]},Palo_Verde__Schematic:{thresholds:[2,28.513162650602432,932.5919321314955],vertexCounts:[138,630,2238]},Lacy_Tree_Philodendron__Schematic:{thresholds:[2,15.89430837004405,797.5864920353984],vertexCounts:[102,570,2154]},Cabbage_Palm_Fern__Schematic:{thresholds:[2,29.3428324742268,1016],vertexCounts:[102,570,2154]},Date_Palm__Schematic:{thresholds:[2,
13.186208480565373,956.3961600000001],vertexCounts:[108,852,3396]},Bamboo__Schematic:{thresholds:[2,114.71951515151522,843.8529763779525],vertexCounts:[60,132,276]},Norway_Spruce__Schematic:{thresholds:[2,129.71889887640438,911.9744719101127],vertexCounts:[66,126,222]},Scots_Pine__Schematic:{thresholds:[2,31.596748201438846,802.180143884892],vertexCounts:[138,630,2238]},American_Sycamore__Schematic:{thresholds:[2,17.793048780487815,818.0204116094988],vertexCounts:[108,852,3396]},White_Poplar__Schematic:{thresholds:[2,
15.577301587301578,793.0779038047372],vertexCounts:[108,780,2100]},Apricot__Schematic:{thresholds:[2,17.03619453924915,796.0093830508479],vertexCounts:[108,852,3396]},Douglas_Fir__Schematic:{thresholds:[2,6.898190007037297,871.0619788881072],vertexCounts:[126,636,1956]},White_Oak__Schematic:{thresholds:[2,13.248768433179723,895.745945945946],vertexCounts:[108,852,3396]},Mediterranean_Buckthorn__Schematic:{thresholds:[2,15.481177685950412,814.9279016681298],vertexCounts:[108,852,3396]},Rhododendron_Azaleas__Schematic:{thresholds:[2,
14.877305555555564,813.5712917369306],vertexCounts:[108,852,3396]},Black_Locust__Schematic:{thresholds:[2,16.01144497607656,791.7159498154983],vertexCounts:[108,852,3396]},Rose__Schematic:{thresholds:[2,14.787227941176468,800.0478006734006],vertexCounts:[108,852,3396]},Mexican_Palmetto__Schematic:{thresholds:[2,13.546397993311047,909.3318618618619],vertexCounts:[108,852,3396]},White_Willow__Schematic:{thresholds:[2,15.464474625144176,821.6042260668969],vertexCounts:[108,852,3396]},Snake_Plant__Schematic:{thresholds:[2,
116.3567710843375,792.3341835147744],vertexCounts:[60,132,276]},Sassafras__Schematic:{thresholds:[2,28.228858319604583,870.7394179022517],vertexCounts:[138,630,2238]},California_Redwood__Schematic:{thresholds:[2,12.938791007615702,889.7742940831868],vertexCounts:[108,780,2100]},Giant_Sequoia__Schematic:{thresholds:[2,13.939714285714274,828.8460395256916],vertexCounts:[138,630,2238]},Common_Whitebeam__Schematic:{thresholds:[2,15.902902542372882,872.9050708661416],vertexCounts:[108,852,3396]},Spanish_Broom__Schematic:{thresholds:[2,
14.866623996789723,815.3769117174961],vertexCounts:[72,792,3312]},Generic_Stump__Schematic:{thresholds:[2,121.01622222222227,923.740137931034],vertexCounts:[60,132,276]},Baldcypress__Schematic:{thresholds:[2,16.348127777777776,817.8199690358902],vertexCounts:[138,630,2238]},Basswood__Schematic:{thresholds:[2,15.118691605839418,835.9789696969701],vertexCounts:[108,852,3396]},Field_Elm__Schematic:{thresholds:[2,15.185642361111121,804.1571316818777],vertexCounts:[108,852,3396]},California_Bay__Schematic:{thresholds:[2,
14.085977419354833,841.5876923076921],vertexCounts:[108,852,3396]},California_Palm__Schematic:{thresholds:[2,13.896321678321671,843.3262657342657],vertexCounts:[138,630,2238]},Sea_Islands_Yucca__Schematic:{thresholds:[2,28.116965753424623,870.5225410421126],vertexCounts:[102,570,2154]}}})},"esri/views/3d/glTF/loader":function(){define("require exports ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/assignHelper ../../../core/maybe ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat4f64 ./DefaultErrorContext ./LoaderResult ./internal/Resource".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){function a(a,b){return n(this,void 0,void 0,function(){function c(d,f){return n(this,void 0,void 0,function(){var g,h,k,m,p,q,u,z,n;return l(this,function(l){switch(l.label){case 0:g=e.nodes[d];h=a.getNodeTransform(d);t.warnUnsupportedIf(null!=g.weights,"Morph targets are not supported.");if(null==g.mesh)return[3,4];k=e.meshes[g.mesh];m=0;p=k.primitives;l.label=1;case 1:if(!(m<p.length))return[3,4];q=p[m];return[4,b(q,h,f,k.name)];case 2:l.sent(),l.label=3;case 3:return m++,
[3,1];case 4:u=0,z=g.children||[],l.label=5;case 5:if(!(u<z.length))return[3,8];n=z[u];return[4,c(n,f)];case 6:l.sent(),l.label=7;case 7:return u++,[3,5];case 8:return[2]}})})}var e,d,f,g,k,m,p,q,w,x;return l(this,function(b){switch(b.label){case 0:e=a.json,d=e.scenes[e.scene||0],f=d.nodes,g=1<f.length,k=0,m=f,b.label=1;case 1:if(!(k<m.length))return[3,4];p=m[k];q=e.nodes[p];w=[c(p,0)];q.extensions&&q.extensions.MSFT_lod&&Array.isArray(q.extensions.MSFT_lod.ids)&&!g&&(x=q.extensions.MSFT_lod.ids,
w.push.apply(w,x.map(function(a,b){return c(a,b+1)})));return[4,h.all(w)];case 2:b.sent(),b.label=3;case 3:return k++,[3,1];case 4:return[2]}})})}function p(a,b,e){var d=function(b){var d=e+"_tex_"+(b&&b.id)+(b&&b.name?"_"+b.name:"");if(b&&!a.textures.has(d)){var f=c.makeTextureSource(b.data,{wrap:{s:q(b.wrapS),t:q(b.wrapT)},mipmap:y.some(function(a){return a===b.minFilter}),noUnpackFlip:!0});a.textures.set(d,f)}return d},f=e+"_mat_"+b.id+"_"+b.name;a.materials.has(f)||(b=c.makeMaterialParameters({color:[b.color[0],
b.color[1],b.color[2]],opacity:b.color[3],alphaMode:b.alphaMode,alphaCutoff:b.alphaCutoff,doubleSided:b.doubleSided,colorMixMode:b.ESRI_externalColorMixMode,textureColor:b.colorTexture?d(b.colorTexture):void 0,textureNormal:b.normalTexture?d(b.normalTexture):void 0,textureOcclusion:b.occlusionTexture?d(b.occlusionTexture):void 0,textureEmissive:b.emissiveTexture?d(b.emissiveTexture):void 0,textureMetallicRoughness:b.metallicRoughnessTexture?d(b.metallicRoughnessTexture):void 0,emissiveFactor:[b.emissiveFactor[0],
b.emissiveFactor[1],b.emissiveFactor[2]],metallicFactor:b.metallicFactor,roughnessFactor:b.roughnessFactor}),a.materials.set(f,b));return f}function q(a){if(33071===a||33648===a||10497===a)return a;t.error("Unexpected TextureSampler WrapMode: "+a)}Object.defineProperty(d,"__esModule",{value:!0});var v=0;d.load=function(c,e,d){void 0===d&&(d={});return n(this,void 0,void 0,function(){var h,k,m,q,u=this;return l(this,function(z){switch(z.label){case 0:return[4,f.Resource.load(c,t,e,d)];case 1:return h=
z.sent(),k="gltf_"+v++,m={lods:[],materials:new Map,textures:new Map},q=!(!h.json.asset.extras||"symbolResource"!==h.json.asset.extras.ESRI_type),[4,a(h,function(a,c,e,f){return n(u,void 0,void 0,function(){var q,u,n,z,w,v,y,B,C,F;return l(this,function(l){switch(l.label){case 0:q=a.mode||4;a:switch(q){case 4:case 5:case 6:u=q;break a;default:u=null}return b.isNone(u)?(t.warnUnsupported("Unsupported primitive mode ("+x[q]+"). Skipping primitive."),[2]):[4,h.getMaterial(a,d)];case 1:return n=l.sent(),
w={transform:g.mat4f64.clone(c)},v={},[4,h.getPositionData(a,d)];case 2:return w.attributes=(v.position=l.sent(),v.normal=null,v.texCoord0=null,v.color=null,v.tangent=null,v),[4,h.getIndexData(a,d)];case 3:z=(w.indices=l.sent(),w.primitiveType=u,w.material=p(m,n,k),w);if(!h.hasNormals(a))return[3,5];y=z.attributes;return[4,h.getNormalData(a,d)];case 4:y.normal=l.sent(),l.label=5;case 5:if(!h.hasTangents(a))return[3,7];B=z.attributes;return[4,h.getTangentData(a,d)];case 6:B.tangent=l.sent(),l.label=
7;case 7:if(!h.hasTextureCoordinates(a))return[3,9];C=z.attributes;return[4,h.getTextureCoordinates(a,d)];case 8:C.texCoord0=l.sent(),l.label=9;case 9:if(!h.hasVertexColors(a))return[3,11];F=z.attributes;return[4,h.getVertexColors(a,d)];case 10:F.color=l.sent(),l.label=11;case 11:return m.lods[e]=m.lods[e]||{parts:[],name:f,lodThreshold:null},m.lods[e].parts.push(z),[2]}})})})];case 2:return z.sent(),[2,{model:m,meta:{isEsriSymbolResource:q,uri:h.uri},customMeta:{}}]}})})};var t=new e.DefaultErrorContext,
y=[9987,9985],x="POINTS LINES LINE_LOOP LINE_STRIP TRIANGLES TRIANGLE_STRIP TRIANGLE_FAN".split(" ")})},"esri/views/3d/glTF/DefaultErrorContext":function(){define(["require","exports","../../../core/Logger"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});var l=n.getLogger("esri.views.3d.glTF");r=function(){function d(){}d.prototype.error=function(b){throw Error("[glTF loader]"+b);};d.prototype.errorUnsupported=function(b){this.error("[Unsupported Feature] "+b)};d.prototype.errorUnsupportedIf=
function(b,d){b&&this.error("[Unsupported Feature] "+d)};d.prototype.assert=function(b,d){b||this.error(d)};d.prototype.warn=function(b){l.warn(b)};d.prototype.warnUnsupported=function(b){this.warn("[Unsupported Feature] "+b)};d.prototype.warnUnsupportedIf=function(b,d){b&&this.warnUnsupported(d)};return d}();d.DefaultErrorContext=r})},"esri/views/3d/glTF/LoaderResult":function(){define(["require","exports","../../../core/tsSupport/assignHelper"],function(r,d,n){Object.defineProperty(d,"__esModule",
{value:!0});d.makeMaterialParameters=function(d){void 0===d&&(d={});return n({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},d)};d.makeTextureSource=function(d,k){void 0===k&&(k={});return{data:d,parameters:n({wrap:n({s:10497,
t:10497},k.wrap),noUnpackFlip:!0,mipmap:!1},k)}}})},"esri/views/3d/glTF/internal/Resource":function(){define("require exports ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/assignHelper ../../../../core/compilerUtils ../../../../core/promiseUtils ../../../../core/string ../../../../core/urlUtils ../../../../core/Version ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/quat ../../../../core/libs/gl-matrix-2/quatf64 ./BinaryStreamReader ./fillDefaults ./pathUtils ../../support/buffer/BufferView ../../support/buffer/utils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){function m(a){switch(a.componentType){case 5120:return new x.BufferViewVec2i8(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5121:return new x.BufferViewVec2u8(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5122:return new x.BufferViewVec2i16(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5123:return new x.BufferViewVec2u16(a.raw,a.byteOffset,a.byteStride,a.byteOffset+
a.byteStride*a.entryCount);case 5125:return new x.BufferViewVec2u32(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);case 5126:return new x.BufferViewVec2f(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount);default:b.neverReached(a.componentType)}}function u(a){return n(this,void 0,void 0,function(){return l(this,function(b){return[2,h.create(function(b,c){var e=new Blob([a]),d=new FileReader;d.onload=function(){b(JSON.parse(d.result))};d.onerror=function(a){c(a)};
d.readAsText(e)})]})})}function z(a,b){return n(this,void 0,void 0,function(){return l(this,function(c){return[2,h.create(function(c,e){var d=new Blob([a],{type:b}),f=URL.createObjectURL(d),g=new Image;g.addEventListener("load",function(){URL.revokeObjectURL(f);c(g)});g.addEventListener("error",function(a){URL.revokeObjectURL(f);e(a)});g.src=f})]})})}Object.defineProperty(d,"__esModule",{value:!0});var B;r=function(){function b(a,b,c,e,d){this.context=a;this.errorContext=b;this.uri=c;this.json=e;
this.glbBuffer=d;this.bufferCache=new Map;this.textureCache=new Map;this.materialCache=new Map;this.nodeParentMap=new Map;this.nodeTransformCache=new Map;this.baseUri=y.splitURI(this.uri).dirPart;this.checkVersionSupported();this.checkRequiredExtensionsSupported();b.errorUnsupportedIf(null==e.scenes,"Scenes must be defined.");b.errorUnsupportedIf(null==e.meshes,"Meshes must be defined");b.errorUnsupportedIf(null==e.nodes,"Nodes must be defined.");this.computeNodeParents()}b.load=function(a,c,e,d){return n(this,
void 0,void 0,function(){var f,h,k,m,p,q;return l(this,function(l){switch(l.label){case 0:return g.endsWith(e,".gltf")?[4,a.loadJSON(e,d)]:[3,2];case 1:return f=l.sent(),[2,new b(a,c,e,f)];case 2:return g.endsWith(e,".glb")?[4,a.loadBinary(e,d)]:[3,5];case 3:return h=l.sent(),[4,b.parseGLB(c,h)];case 4:return k=l.sent(),[2,new b(a,c,e,k.json,k.binaryData)];case 5:return[4,a.loadBinary(e,d)];case 6:return m=l.sent(),p=new v.BinaryStreamReader(m),4<=p.remainingBytes()&&1179937895===p.readUint32()?[4,
b.parseGLB(c,m)]:[3,8];case 7:return k=l.sent(),[2,new b(a,c,e,k.json,k.binaryData)];case 8:return[4,a.loadJSON(e,d)];case 9:return q=l.sent(),[2,new b(a,c,e,q)]}})})};b.parseGLB=function(a,b){return n(this,void 0,void 0,function(){var c,e,d,f,g,h,k,m,p;return l(this,function(l){switch(l.label){case 0:c=new v.BinaryStreamReader(b),a.assert(12<=c.remainingBytes(),"GLB binary data is insufficiently large."),e=c.readUint32(),d=c.readUint32(),f=c.readUint32(),a.assert(1179937895===e,"Magic first 4 bytes do not fit to expected GLB value."),
a.assert(b.byteLength>=f,"GLB binary data is smalller than header specifies."),a.errorUnsupportedIf(2!==d,"Only GLB container version 2 is supported."),g=0,l.label=1;case 1:if(!(8<=c.remainingBytes()))return[3,5];m=c.readUint32();p=c.readUint32();if(0!==g)return[3,3];a.assert(1313821514===p,"First GLB chunck must be JSON.");a.assert(0<=m,"No JSON data found.");return[4,u(c.readUint8Array(m))];case 2:return h=l.sent(),[3,4];case 3:1===g?(a.errorUnsupportedIf(5130562!==p,"Second GLB chunck expected to be BIN."),
k=c.readUint8Array(m)):a.warnUnsupported("More than 2 GLB chunks detected. Skipping."),l.label=4;case 4:return g+=1,[3,1];case 5:return h||a.error("No GLB JSON chunk detected."),[2,{json:h,binaryData:k}]}})})};b.prototype.getBuffer=function(a,b){return n(this,void 0,void 0,function(){var c,e,d,f;return l(this,function(g){switch(g.label){case 0:return c=this.json.buffers[a],e=this.errorContext,null==c.uri?(e.assert(null!=this.glbBuffer,"GLB buffer not present"),[2,this.glbBuffer]):(d=this.bufferCache.get(a))?
[3,2]:[4,this.context.loadBinary(this.resolveUri(c.uri),b)];case 1:f=g.sent(),d=new Uint8Array(f),this.bufferCache.set(a,d),e.assert(d.byteLength===c.byteLength,"Buffer byte lengths should match."),g.label=2;case 2:return[2,d]}})})};b.prototype.getAccessor=function(a,b){return n(this,void 0,void 0,function(){var c,e,d,f,g,h,k,m;return l(this,function(l){switch(l.label){case 0:return c=this.json.accessors[a],e=this.errorContext,e.errorUnsupportedIf(null==c.bufferView,"An accessor bufferView is required."),
e.errorUnsupportedIf(c.type in["MAT2","MAT3","MAT4"],"AttributeType "+c.type+" is not supported"),d=this.json.bufferViews[c.bufferView],[4,this.getBuffer(d.buffer,b)];case 1:return f=l.sent(),g=N[c.type],h=L[c.componentType],k=g*h,m=d.byteStride||k,[2,{raw:f.buffer,byteStride:m,byteOffset:f.byteOffset+(d.byteOffset||0)+(c.byteOffset||0),entryCount:c.count,isDenselyPacked:m===k,componentCount:g,componentByteSize:h,componentType:c.componentType,min:c.min,max:c.max,normalized:!!c.normalized}]}})})};
b.prototype.getIndexData=function(a,b){return n(this,void 0,void 0,function(){var c;return l(this,function(e){switch(e.label){case 0:return null==a.indices?[2,null]:[4,this.getAccessor(a.indices,b)];case 1:c=e.sent();if(c.isDenselyPacked)switch(c.componentType){case 5121:return[2,new Uint8Array(c.raw,c.byteOffset,c.entryCount)];case 5123:return[2,new Uint16Array(c.raw,c.byteOffset,c.entryCount)];case 5125:return[2,new Uint32Array(c.raw,c.byteOffset,c.entryCount)]}else switch(c.componentType){case 5121:return[2,
w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint8,c))];case 5123:return[2,w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint16,c))];case 5125:return[2,w.scalar.makeDense(this.wrapAccessor(x.BufferViewUint32,c))]}return[2]}})})};b.prototype.getPositionData=function(a,b){return n(this,void 0,void 0,function(){var c,e;return l(this,function(d){switch(d.label){case 0:return c=this.errorContext,c.errorUnsupportedIf(null==a.attributes.POSITION,"POSITION vertex data is required."),[4,this.getAccessor(a.attributes.POSITION,
b)];case 1:return e=d.sent(),c.errorUnsupportedIf(5126!==e.componentType,"[POSITION attribute] Expected type FLOAT, found "+K[e.componentType]),c.errorUnsupportedIf(3!==e.componentCount,"POSITION attribute must have 3 components."),[2,this.wrapAccessor(x.BufferViewVec3f,e)]}})})};b.prototype.getNormalData=function(a,b){return n(this,void 0,void 0,function(){var c,e;return l(this,function(d){switch(d.label){case 0:return c=this.errorContext,c.errorUnsupportedIf(null==a.attributes.NORMAL,"NORMAL vertex data is required."),
[4,this.getAccessor(a.attributes.NORMAL,b)];case 1:return e=d.sent(),c.errorUnsupportedIf(5126!==e.componentType,"[NORMAL attribute] Expected type FLOAT, found "+K[e.componentType]),c.errorUnsupportedIf(3!==e.componentCount,"NORMAL attribute must have 3 components."),[2,this.wrapAccessor(x.BufferViewVec3f,e)]}})})};b.prototype.getTangentData=function(a,b){return n(this,void 0,void 0,function(){var c,e;return l(this,function(d){switch(d.label){case 0:return c=this.errorContext,c.errorUnsupportedIf(null==
a.attributes.TANGENT,"TANGENT vertex data is required."),[4,this.getAccessor(a.attributes.TANGENT,b)];case 1:return e=d.sent(),c.errorUnsupportedIf(5126!==e.componentType,"[TANGENT attribute] Expected type FLOAT, found "+K[e.componentType]),c.errorUnsupportedIf(4!==e.componentCount,"NORMAL attribute must have 4 components."),[2,new x.BufferViewVec4f(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount)]}})})};b.prototype.getTextureCoordinates=function(a,b){return n(this,void 0,void 0,
function(){var c,e;return l(this,function(d){switch(d.label){case 0:return c=this.errorContext,c.errorUnsupportedIf(null==a.attributes.TEXCOORD_0,"TEXCOORD_0 vertex data is required."),[4,this.getAccessor(a.attributes.TEXCOORD_0,b)];case 1:e=d.sent();c.errorUnsupportedIf(2!==e.componentCount,"TEXCOORD_0 attribute must have 2 components.");if(5126===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec2f,e)];c.errorUnsupportedIf(!e.normalized,"[TEXCOORD_0 attribute] Integer ComponentTypes are only supported for a normalized accessor.");
return[2,m(e)]}})})};b.prototype.hasNormals=function(a){return!!a.attributes.NORMAL};b.prototype.hasVertexColors=function(a){return!!a.attributes.COLOR_0};b.prototype.hasTextureCoordinates=function(a){return!!a.attributes.TEXCOORD_0};b.prototype.hasTangents=function(a){return!!a.attributes.TANGENT};b.prototype.getVertexColors=function(a,b){return n(this,void 0,void 0,function(){var c,e;return l(this,function(d){switch(d.label){case 0:return c=this.errorContext,c.errorUnsupportedIf(null==a.attributes.COLOR_0,
"COLOR_0 vertex data is required."),[4,this.getAccessor(a.attributes.COLOR_0,b)];case 1:e=d.sent();c.errorUnsupportedIf(4!==e.componentCount&&3!==e.componentCount,"COLOR_0 attribute must have 3 or 4 components.");if(4===e.componentCount){if(5126===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec4f,e)];if(5121===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec4u8,e)];if(5123===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec4u16,e)]}else if(3===e.componentCount){if(5126===
e.componentType)return[2,this.wrapAccessor(x.BufferViewVec3f,e)];if(5121===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec3u8,e)];if(5123===e.componentType)return[2,this.wrapAccessor(x.BufferViewVec3u16,e)]}c.errorUnsupported("[COLOR_0 attribute] Unsupported component type: "+K[e.componentType]);return[2]}})})};b.prototype.getMaterial=function(a,b){return n(this,void 0,void 0,function(){var c,e,d,f,g,h,k,m,p,q,u;return l(this,function(l){switch(l.label){case 0:c=this.errorContext;if(e=
this.materialCache.get(a.material))return[3,12];d=null!=a.material?t.material(this.json.materials[a.material]):t.material();f=d.pbrMetallicRoughness;g=this.hasVertexColors(a);h=void 0;if(!f.baseColorTexture)return[3,2];c.errorUnsupportedIf(0!==(f.baseColorTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(f.baseColorTexture.index,b)];case 1:h=l.sent(),l.label=2;case 2:k=void 0;if(!d.normalTexture)return[3,5];if(0===(d.normalTexture.texCoord||0))return[3,3];c.warnUnsupported("Only TEXCOORD_0 is supported for normal map");
return[3,5];case 3:return[4,this.getTexture(d.normalTexture.index,b)];case 4:k=l.sent(),l.label=5;case 5:m=void 0;if(!d.occlusionTexture)return[3,7];c.errorUnsupportedIf(0!==(d.occlusionTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(d.occlusionTexture.index,b)];case 6:m=l.sent(),l.label=7;case 7:p=void 0;if(!d.emissiveTexture)return[3,9];c.errorUnsupportedIf(0!==(d.emissiveTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(d.emissiveTexture.index,
b)];case 8:p=l.sent(),l.label=9;case 9:q=void 0;if(!f.metallicRoughnessTexture)return[3,11];c.errorUnsupportedIf(0!==(f.metallicRoughnessTexture.texCoord||0),"Only TEXCOORD_0 is supported");return[4,this.getTexture(f.metallicRoughnessTexture.index,b)];case 10:q=l.sent(),l.label=11;case 11:u=null!=a.material?a.material:-1,e={alphaMode:d.alphaMode,alphaCutoff:d.alphaCutoff,color:f.baseColorFactor,doubleSided:!!d.doubleSided,colorTexture:h,normalTexture:k,name:d.name,id:u,occlusionTexture:m,emissiveTexture:p,
emissiveFactor:d.emissiveFactor,metallicFactor:f.metallicFactor,roughnessFactor:f.roughnessFactor,metallicRoughnessTexture:q,vertexColors:g,ESRI_externalColorMixMode:d.extras.ESRI_externalColorMixMode},l.label=12;case 12:return[2,e]}})})};b.prototype.getTexture=function(a,b){return n(this,void 0,void 0,function(){var c,e,d,f,g,h,k,m;return l(this,function(l){switch(l.label){case 0:c=this.errorContext;e=this.json.textures[a];d=t.textureSampler(null!=e.sampler?this.json.samplers[e.sampler]:{});c.errorUnsupportedIf(null==
e.source,"source must be defined for a texture");f=this.json.images[e.source];if(g=this.textureCache.get(a))return[3,6];h=void 0;return f.uri?[4,this.context.loadImage(this.resolveUri(f.uri),b)]:[3,2];case 1:return h=l.sent(),[3,5];case 2:return c.errorUnsupportedIf(null==f.bufferView,"Image bufferView must be defined."),c.errorUnsupportedIf(null==f.mimeType,"Image mimeType must be defined."),k=this.json.bufferViews[f.bufferView],[4,this.getBuffer(k.buffer,b)];case 3:return m=l.sent(),c.errorUnsupportedIf(null!=
k.byteStride,"byteStride not supported for image buffer"),[4,z(new Uint8Array(m.buffer,m.byteOffset+(k.byteOffset||0),k.byteLength),f.mimeType)];case 4:h=l.sent(),l.label=5;case 5:g={data:h,wrapS:d.wrapS,wrapT:d.wrapT,minFilter:d.minFilter,name:f.name,id:a},this.textureCache.set(a,g),l.label=6;case 6:return[2,g]}})})};b.prototype.getNodeTransform=function(b){if(void 0===b)return F;var c=this.nodeTransformCache.get(b);if(!c){var c=this.getNodeTransform(this.getNodeParent(b)),e=this.json.nodes[b];if(e.matrix)c=
f.mat4.multiply(a.mat4f64.create(),c,e.matrix);else if(e.translation||e.rotation||e.scale)c=a.mat4f64.clone(c),e.translation&&f.mat4.translate(c,c,e.translation),e.rotation&&(E[3]=p.quat.getAxisAngle(E,e.rotation),f.mat4.rotate(c,c,E[3],E)),e.scale&&f.mat4.scale(c,c,e.scale);this.nodeTransformCache.set(b,c)}return c};b.prototype.wrapAccessor=function(a,b){return new a(b.raw,b.byteOffset,b.byteStride,b.byteOffset+b.byteStride*(b.entryCount-1)+b.componentByteSize*b.componentCount)};b.prototype.resolveUri=
function(a){return e.makeAbsolute(a,this.baseUri)};b.prototype.getNodeParent=function(a){return this.nodeParentMap.get(a)};b.prototype.checkVersionSupported=function(){c.Version.parse(this.json.asset.version,"glTF").validate(C)};b.prototype.checkRequiredExtensionsSupported=function(){var a=this.json,b=this.errorContext;a.extensionsRequired&&0!==a.extensionsRequired.length&&b.errorUnsupportedIf(!0,"Extensions: "+a.extensionsRequired.join(", "))};b.prototype.computeNodeParents=function(){var a=this;
this.json.nodes.forEach(function(b,c){b.children&&b.children.forEach(function(b){a.nodeParentMap.set(b,c)})})};return b}();d.Resource=r;var C=new c.Version(2,0,"glTF"),F=f.mat4.fromXRotation(a.mat4f64.create(),Math.PI/2),E=q.quatf64.create(),N={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},L=(B={},B[5120]=1,B[5121]=1,B[5122]=2,B[5123]=2,B[5126]=4,B[5125]=4,B),K={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"}})},"esri/core/Version":function(){define(["require",
"exports","./Error"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b,h){void 0===h&&(h="");this.major=d;this.minor=b;this._context=h}d.prototype.lessThan=function(d,b){return this.major<d||d===this.major&&this.minor<b};d.prototype.since=function(d,b){return!this.lessThan(d,b)};d.prototype.validate=function(d){if(this.major!==d.major)throw new n((this._context&&this._context+":")+"unsupported-version","Required major "+(this._context&&this._context+" ")+
"version is '"+this.major+"', but got '${version.major}.${version.minor}'",{version:d});};d.prototype.clone=function(){return new d(this.major,this.minor,this._context)};d.parse=function(k,b){void 0===b&&(b="");var h=k.split("."),g=h[0],h=h[1],e=/^\s*\d+\s*$/;if(!g||!g.match||!g.match(e))throw new n((b&&b+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:k});if(!h||!h.match||!h.match(e))throw new n((b&&b+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",
{version:k});k=parseInt(g,10);g=parseInt(h,10);return new d(k,g,b)};return d}();d.Version=r})},"esri/core/libs/gl-matrix-2/quat":function(){define(["require","exports","./math/quat"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.quat=n})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("require exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ./vec3 ./vec4".split(" "),function(r,d,n,l,k,b,h,g){function e(a,b,c){c*=.5;var e=Math.sin(c);a[0]=
e*b[0];a[1]=e*b[1];a[2]=e*b[2];a[3]=Math.cos(c);return a}function c(a,b,c){var e=b[0],d=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];a[0]=e*c+b*g+d*k-f*h;a[1]=d*c+b*h+f*g-e*k;a[2]=f*c+b*k+e*h-d*g;a[3]=b*c-e*g-d*h-f*k;return a}function f(a,c,e,d){var f=c[0],g=c[1],h=c[2];c=c[3];var k=e[0],l=e[1],p=e[2];e=e[3];var m,q,u;q=f*k+g*l+h*p+c*e;0>q&&(q=-q,k=-k,l=-l,p=-p,e=-e);1-q>b.EPSILON?(m=Math.acos(q),u=Math.sin(m),q=Math.sin((1-d)*m)/u,d=Math.sin(d*m)/u):q=1-d;a[0]=q*f+d*k;a[1]=q*g+d*l;a[2]=q*h+
d*p;a[3]=q*c+d*e;return a}function a(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var d=(e+1)%3,f=(e+2)%3,c=Math.sqrt(b[3*e+e]-b[3*d+d]-b[3*f+f]+1);a[e]=.5*c;c=.5/c;a[3]=(b[3*d+f]-b[3*f+d])*c;a[d]=(b[3*d+e]+b[3*e+d])*c;a[f]=(b[3*f+e]+b[3*e+f])*c}return a}Object.defineProperty(d,"__esModule",{value:!0});d.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};d.setAxisAngle=
e;d.getAxisAngle=function(a,c){var e=2*Math.acos(c[3]),d=Math.sin(e/2);d>b.EPSILON?(a[0]=c[0]/d,a[1]=c[1]/d,a[2]=c[2]/d):(a[0]=1,a[1]=0,a[2]=0);return e};d.multiply=c;d.rotateX=function(a,b,c){c*=.5;var e=b[0],d=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=e*c+b*g;a[1]=d*c+f*g;a[2]=f*c-d*g;a[3]=b*c-e*g;return a};d.rotateY=function(a,b,c){c*=.5;var e=b[0],d=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=e*c-f*g;a[1]=d*c+b*g;a[2]=f*c+e*g;a[3]=b*c-d*g;return a};d.rotateZ=function(a,
b,c){c*=.5;var e=b[0],d=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=e*c+d*g;a[1]=d*c-e*g;a[2]=f*c+b*g;a[3]=b*c-f*g;return a};d.calculateW=function(a,b){var c=b[0],e=b[1];b=b[2];a[0]=c;a[1]=e;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-e*e-b*b));return a};d.slerp=f;d.random=function(a){var c=b.RANDOM(),e=b.RANDOM(),d=b.RANDOM(),f=Math.sqrt(1-c),c=Math.sqrt(c);a[0]=f*Math.sin(2*Math.PI*e);a[1]=f*Math.cos(2*Math.PI*e);a[2]=c*Math.sin(2*Math.PI*d);a[3]=c*Math.cos(2*Math.PI*d);return a};d.invert=
function(a,b){var c=b[0],e=b[1],d=b[2];b=b[3];var f=c*c+e*e+d*d+b*b,f=f?1/f:0;a[0]=-c*f;a[1]=-e*f;a[2]=-d*f;a[3]=b*f;return a};d.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};d.fromMat3=a;d.fromEuler=function(a,b,c,e){var d=.5*Math.PI/180;b*=d;c*=d;e*=d;d=Math.sin(b);b=Math.cos(b);var f=Math.sin(c);c=Math.cos(c);var g=Math.sin(e);e=Math.cos(e);a[0]=d*c*e-b*f*g;a[1]=b*f*e+d*c*g;a[2]=b*c*g-d*f*e;a[3]=b*c*e+d*f*g;return a};d.str=function(a){return"quat("+a[0]+", "+a[1]+
", "+a[2]+", "+a[3]+")"};d.copy=g.copy;d.set=g.set;d.add=g.add;d.mul=c;d.scale=g.scale;d.dot=g.dot;d.lerp=g.lerp;d.length=g.length;d.len=d.length;d.squaredLength=g.squaredLength;d.sqrLen=d.squaredLength;d.normalize=g.normalize;d.exactEquals=g.exactEquals;d.equals=g.equals;d.rotationTo=function(a,b,c){var f=h.dot(b,c);if(-.999999>f)return h.cross(p,q,b),1E-6>h.len(p)&&h.cross(p,v,b),h.normalize(p,p),e(a,p,Math.PI),a;if(.999999<f)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;h.cross(p,b,c);a[0]=p[0];a[1]=p[1];
a[2]=p[2];a[3]=1+f;return d.normalize(a,a)};var p=k.create(),q=k.fromValues(1,0,0),v=k.fromValues(0,1,0);d.sqlerp=function(a,b,c,e,d,g){f(t,b,d,g);f(y,c,e,g);f(a,t,y,2*g*(1-g));return a};var t=l.create(),y=l.create();d.setAxes=function(b,c,e,f){var g=x;g[0]=e[0];g[3]=e[1];g[6]=e[2];g[1]=f[0];g[4]=f[1];g[7]=f[2];g[2]=-c[0];g[5]=-c[1];g[8]=-c[2];return d.normalize(b,a(b,g))};var x=n.create()})},"esri/views/3d/glTF/internal/BinaryStreamReader":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,
"__esModule",{value:!0});r=function(){function d(d){this.data=d;this.offset4=0;this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}d.prototype.readUint32=function(){var d=this.offset4;this.offset4+=1;return this.dataUint32[d]};d.prototype.readUint8Array=function(d){var k=4*this.offset4;this.offset4+=d/4;return new Uint8Array(this.data,k,d)};d.prototype.remainingBytes=function(){return this.data.byteLength-4*this.offset4};return d}();d.BinaryStreamReader=r})},"esri/views/3d/glTF/internal/fillDefaults":function(){define(["require",
"exports","../../../../core/tsSupport/assignHelper"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});var l={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},k={pbrMetallicRoughness:l,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},b={ESRI_externalColorMixMode:"tint"};d.material=function(d){void 0===d&&(d={});var e=n({},l,d.pbrMetallicRoughness),c=n({},b,d.extras);switch(c.ESRI_externalColorMixMode){case "multiply":case "tint":case "ignore":break;
default:c.ESRI_externalColorMixMode="tint"}return n({},k,d,{pbrMetallicRoughness:e,extras:c})};var h={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497};d.textureSampler=function(b){return n({},h,b)}})},"esri/views/3d/glTF/internal/pathUtils":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.splitURI=function(d){var l,k;d.replace(/^(.*\/)?([^/]*)$/,function(b,d,g){l=d||"";k=g||"";return""});return{dirPart:l,filePart:k}}})},"esri/views/3d/glTF/internal/indexUtils":function(){define(["require",
"exports","../../../../core/typedArrayUtil","../../webgl-engine/lib/geometryDataUtils"],function(r,d,n,l){function k(b){return l.generateDefaultIndexArray(b)}Object.defineProperty(d,"__esModule",{value:!0});d.linearIndexArray=k;d.trianglesToTriangles=function(b){return"number"===typeof b?k(b):n.isUint16Array(b)||n.isUint8Array(b)?new Uint32Array(b):b};d.triangleStripToTriangles=function(b){var d="number"===typeof b?b:b.length;if(3>d)return new Uint32Array(0);var d=d-2,g=new Uint32Array(3*d);if("number"===
typeof b)for(var e=0,c=0;c<d;c+=1)0===c%2?(g[e++]=c,g[e++]=c+1):(g[e++]=c+1,g[e++]=c),g[e++]=c+2;else for(c=e=0;c<d;c+=1){if(0===c%2)var f=b[c],a=b[c+1],k=b[c+2];else f=b[c+1],a=b[c],k=b[c+2];g[e++]=f;g[e++]=a;g[e++]=k}return g};d.triangleFanToTriangles=function(b){var d="number"===typeof b?b:b.length;if(3>d)return new Uint32Array(0);var d=d-2,g=new Uint32Array(3*d);if("number"===typeof b){for(var e=0,c=0;c<d;++c)g[e++]=0,g[e++]=c+1,g[e++]=c+2;return g}for(var f=b[0],a=b[1],c=e=0;c<d;++c){var k=b[c+
2];g[e++]=f;g[e++]=a;a=g[e++]=k}return g}})},"esri/views/3d/layers/graphics/wosrLoader":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/lang ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/Version ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../support/imageUtils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Texture ../../webgl-engine/materials/DefaultMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m){function u(c,e){return k(this,void 0,void 0,function(){var d,g;return l(this,function(k){switch(k.label){case 0:return(d=f.isSome(e)&&e.streamDataRequester)?[2,z(c,d,e)]:[4,h.result(b(c,f.unwrap(e)))];case 1:g=k.sent();if(!0===g.ok)return[2,g.value.data];a.throwIfAbortError(g.error);B(g.error);return[2]}})})}function z(b,c,e){return k(this,void 0,void 0,function(){var d;return l(this,function(f){switch(f.label){case 0:return[4,h.result(c(b,"json",
e))];case 1:d=f.sent();if(!0===d.ok)return[2,d.value];a.throwIfAbortError(d.error);B(d.error.details.url);return[2]}})})}function B(a){throw new g("","Request for object resource failed: "+a);}function C(a,b){return k(this,void 0,void 0,function(){var c,d,g,h,k,u,t,n,z,w,v,B,C,r,I,O,na,pa,ta,aa,ga,ia,sa,Aa,Ba,Ca,Ia,ra,wa,xa,va,ua,Ka,ea,Oa;return l(this,function(l){switch(l.label){case 0:return g=[],h=[],k=[],u=[],t=p.Version.parse(a.version||"1.0","wosr"),K.validate(t),n="meshsymbol_"+a.model.name,
z=a.textureDefinitions,[4,E(n,z,b)];case 1:w=l.sent();for(v in w)u.push(w[v].engineTexObj);B=a.model.geometries;C=a.materialDefinitions;for(I=r=0;I<B.length;I++){var H=O=B[I],J=H.params,U=J.topology;l=!0;J.vertexAttributes||(L.warn("Geometry must specify vertex attributes"),l=!1);switch(J.topology){case "PerAttributeArray":break;case "Indexed":case null:case void 0:U=J.faces;if(!U)L.warn("Indexed geometries must specify faces"),l=!1;else if(J.vertexAttributes){var Q=void 0;for(Q in J.vertexAttributes)(J=
U[Q])&&J.values?(null!=J.valueType&&"UInt32"!==J.valueType&&(L.warn("Unsupported indexed geometry indices type '"+J.valueType+"', only UInt32 is currently supported"),l=!1),null!=J.valuesPerElement&&1!==J.valuesPerElement&&(L.warn("Unsupported indexed geometry values per element '"+J.valuesPerElement+"', only 1 is currently supported"),l=!1)):(L.warn("Indexed geometry does not specify face indices for '"+Q+"' attribute"),l=!1)}break;default:L.warn("Unsupported topology '"+U+"'"),l=!1}H.params.material||
(L.warn("Geometry requires material"),l=!1);H=H.params.vertexAttributes;J=void 0;for(J in H)H[J].values||(L.warn("Geometries with externally defined attributes are not yet supported"),l=!1);if(l){l=O.params;c=l.material;d=l.texture;na=O.params.vertexAttributes;pa={};for(ta in na)aa=na[ta],ga=aa.values,pa[ta]={data:ga,size:aa.valuesPerElement};ia={};if("PerAttributeArray"===O.params.topology){l=sa=pa.position.data.length/pa.position.size;H=new Uint32Array(l);for(J=0;J<l;J++)H[J]=J;Aa=H;for(Ba in pa)ia[Ba]=
Aa}else for(Ia in Ca=O.params.faces,Ca)ia[Ia]=new Uint32Array(Ca[Ia].values);ra=d?w[d]:null;wa=k[c]?k[c][d]:null;wa||(xa=c.substring(c.lastIndexOf("/")+1),va=C[xa].params,1===va.transparency&&(va.transparency=0),ua=ra&&ra.alphaChannelUsage,Ka=0<va.transparency||"transparency"===ua||"maskAndTransparency"===ua,ea={ambient:q.vec3f64.fromArray(va.diffuse),diffuse:q.vec3f64.fromArray(va.diffuse),specular:[0,0,0],opacity:1-(va.transparency||0),transparent:Ka,textureAlphaMode:ra?N(ra.alphaChannelUsage):
void 0,textureAlphaCutoff:.33,textureId:ra?ra.engineTexObj.id:void 0,textureInitTransparent:!0,doubleSided:!0,cullFace:"none",flipV:!1,colorMixMode:va.externalColorMixMode||"tint",textureAlphaPremultiplied:!0},f.isSome(b)&&b.materialParamsMixin&&e.mixin(ea,b.materialParamsMixin),wa=new m(ea,n),k[c]||(k[c]={}),k[c][d]=wa);h.push(wa);Oa=new y(new x(pa,ia),n);r+=ia.position?ia.position.length:0;g.push(Oa)}}return[2,{stageResources:{textures:u,materials:h,geometries:g},pivotOffset:a.model.pivotOffset,
boundingBox:F(g),numberOfVertices:r,lodThreshold:null}]}})})}function F(a){var b=v.empty();a.forEach(function(a){a=a.boundingInfo;v.expand(b,a.getBBMin());v.expand(b,a.getBBMax())});return b}function E(b,c,e){return k(this,void 0,void 0,function(){var d,g,h,k,p,m,q,u;return l(this,function(l){switch(l.label){case 0:d=[];g=function(g){var h=c[g],k=h.images[0].data;if(!k)return L.warn("Externally referenced texture data is not yet supported"),"continue";var k=h.encoding+";base64,"+k,l="/textureDefinitions/"+
g,p={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:!0};g=f.isSome(e)&&e.disableTextures?a.resolve(null):t.requestImage(k,e);d.push(g.then(function(a){return{refId:l,engineTexObj:new w(a,b,p),alphaChannelUsage:"rgba"===h.channels?h.alphaChannelUsage||"transparency":"none"}}))};for(h in c)g(h);return[4,a.all(d)];case 1:k=l.sent();p={};m=0;for(q=k;m<q.length;m++)u=q[m],p[u.refId]=u;return[2,p]}})})}function N(a){switch(a){case "mask":return"mask";case "maskAndTransparency":return"maskBlend";
case "none":return"opaque";case "transparency":return"blend";default:return"blend"}}Object.defineProperty(d,"__esModule",{value:!0});var L=c.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");d.load=function(a,b){return k(this,void 0,void 0,function(){var c;return l(this,function(e){switch(e.label){case 0:return[4,u(a,b)];case 1:return c=e.sent(),[2,C(c,b)]}})})};d.createStageResources=C;var K=new p.Version(1,2,"wosr")})},"esri/views/3d/support/buffer/math":function(){define(["require",
"exports","./math/vec3","./math/vec4"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.vec3=n;d.vec4=l})},"esri/views/3d/support/buffer/math/vec4":function(){define(["require","exports","./common"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.transformMat4=function(d,k,b){if(d.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=d.count,g=b[0],e=b[1],c=b[2],f=b[3],a=b[4],l=b[5],q=b[6],v=b[7],
t=b[8],y=b[9],x=b[10],w=b[11],m=b[12],u=b[13],z=b[14];b=b[15];var B=d.typedBuffer;d=d.typedBufferStride;var C=k.typedBuffer;k=k.typedBufferStride;for(var r=0;r<h;r++){var E=r*d,N=r*k,L=C[N],K=C[N+1],O=C[N+2],N=C[N+3];B[E]=g*L+a*K+t*O+m*N;B[E+1]=e*L+l*K+y*O+u*N;B[E+2]=c*L+q*K+x*O+z*N;B[E+3]=f*L+v*K+w*O+b*N}}};d.transformMat3=function(d,k,b){if(d.count!==k.count)n.logger.error("source and destination buffers need to have the same number of elements");else{var h=d.count,g=b[0],e=b[1],c=b[2],f=b[3],a=
b[4],l=b[5],q=b[6],v=b[7];b=b[8];var t=d.typedBuffer;d=d.typedBufferStride;var y=k.typedBuffer;k=k.typedBufferStride;for(var x=0;x<h;x++){var w=x*d,m=x*k,u=y[m],z=y[m+1],B=y[m+2],m=y[m+3];t[w]=g*u+f*z+q*B;t[w+1]=e*u+a*z+v*B;t[w+2]=c*u+l*z+b*B;t[w+3]=m}}};d.scale=function(d,k,b){var h=Math.min(d.count,k.count),g=d.typedBuffer;d=d.typedBufferStride;var e=k.typedBuffer;k=k.typedBufferStride;for(var c=0;c<h;c++){var f=c*d,a=c*k;g[f]=b*e[a];g[f+1]=b*e[a+1];g[f+2]=b*e[a+2];g[f+3]=b*e[a+3]}}})},"esri/views/3d/webgl-engine/lib/lodRendering/LodRenderer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4f64 ../../../../../geometry/support/aaBoundingBox ../../../support/debugFlags ../../../support/buffer/glUtil ../Camera ../DefaultVertexAttributeLocations ../intersectorUtils ../Util ./InstanceData ./InstanceOctree ./LevelSelector ./RenderInstanceData ./utils ../../materials/DefaultMaterial ../../materials/internal/MaterialUtil ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C){function F(a,b,c,e){w.encodeDoubleVec3(a.modelOrigin,b,c.modelOriginHi,c.modelOriginLo,e);c.model.copyFrom(e,a.model,b);c.modelNormal.copyFrom(e,a.modelNormal,b);a.color&&c.color&&c.color.copyFrom(e,a.color,b);a.featureAttribute&&c.featureAttribute&&c.featureAttribute.copyFrom(e,a.featureAttribute,b)}Object.defineProperty(d,"__esModule",{value:!0});var E=function(a){var b=a.baseBoundingSphere.radius;a=a.levels.map(function(a){return a.minScreenSpaceRadius});
return new y.LevelSelector(b,a)};d.setLevelSelectorFactory=function(a){E=a};var N=function(){function b(b,e){this.glMaterials={};var d=b.rctx,f=e.geometry;e=e.material;var g=f.data.toRenderData();this.materialRep=b.materialRep;e.setParameterValues({instancedDoublePrecision:!0});b=e.createBufferWriter();var h=b.vertexBufferLayout,k=b.elementCount(g),l=b.allocate(k);b.write({},g,l,0);this.geometry=f;this.material=e;this.glMaterials=w.acquireGLMaterials(e,this.materialRep);this.vertexBufferLayout=h;
this.vbo=z.createVertex(d,35044,l.buffer);this.vao=new C(d,a.Default3D,{geometry:c.glLayout(h)},{geometry:this.vbo});this.vertexCount=k}b.prototype.destroy=function(){w.releaseGLMaterials(this.material,this.materialRep);this.vbo.dispose();this.vao.dispose()};Object.defineProperty(b.prototype,"boundingInfo",{get:function(){return this.geometry.boundingInfo},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"triangleCount",{get:function(){return this.vertexCount/3},enumerable:!0,configurable:!0});
b.prototype.intersect=function(a,b,c,e,d,f){var g=this.geometry.id,h=d.toString();this.material.intersect(this.geometry,null,a.transform.transform,a,c,e,function(c,e,k,l,m,q){if(0<=c&&(null==b||b(a.rayBeginPoint,a.rayEndPoint,c))){m={type:"external",metadata:{layerUid:f.layerUid,graphicUid:f.graphicUid(d)}};if(null==a.results.min.drapedLayerOrder||l>=a.results.min.drapedLayerOrder)if(null==a.results.min.dist||c<a.results.min.dist)a.results.min.set(m,h,c,e,a.transform.transform,l,null,g,k),a.results.min.intersector=
"LodRenderer";if(null==a.results.max.drapedLayerOrder||l>=a.results.max.drapedLayerOrder)if(null==a.results.max.dist||c>a.results.max.dist)a.results.max.set(m,h,c,e,a.transform.transform,l,null,g,k),a.results.min.intersector="LodRenderer";a.enable.storeAll&&(q=new p.IntersectorResult(a.results.min.ray),q.set(m,h,c,e,a.transform.transform,l,null,g,k),q.intersector="LodRenderer",a.results.all.push(q))}},null)};return b}();d.LodComponentData=N;var L=function(){function a(a,b){var c=this;this.components=
[];this.minScreenSpaceRadius=b.minScreenSpaceRadius;b.components.forEach(function(b){c.components.push(new N(a,b))})}a.prototype.destroy=function(){this.components.forEach(function(a){a.destroy()})};a.prototype.intersect=function(a,b,c,e,d,f){this.components.forEach(function(g){g.intersect(a,b,c,e,d,f)})};Object.defineProperty(a.prototype,"boundingBox",{get:function(){if(!this._boundingBox){var a=g.empty();this.components.forEach(function(b){g.expand(a,b.boundingInfo.bbMin);g.expand(a,b.boundingInfo.bbMax)});
this._boundingBox=a}return this._boundingBox},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"boundingSphere",{get:function(){if(!this._boundingSphere){var a=this.boundingBox,c=b.vec3f64.create();g.center(a,c);this._boundingSphere={center:c,radius:.5*g.diameter(a)}}return this._boundingSphere},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"triangleCount",{get:function(){return this.components.reduce(function(a,b){return a+b.triangleCount},0)},enumerable:!0,configurable:!0});
return a}();d.LodLevelData=L;r=function(){function g(a,b,e,g){var h=this;this._levels=[];this._renderInstanceData=[];this._highlightRenderInstanceData=[];this._instanceIndex=0;this._slicePlaneEnabled=!1;this._enableLevelSelection=!0;this._lastCamera=new f;this._updateCyclesWithStaticCamera=-1;this._needFullCycle=!1;this._symbol=a;this._optionalFields=b;this._metadata=e;this._instanceBufferLayout=m.getInstanceBufferLayout({instancedDoublePrecision:!0,instanced:b});this._glInstanceBufferLayout=c.glLayout(this._instanceBufferLayout,
{divisor:1});this._instanceData=new v.InstanceData(this._optionalFields,g);this._instanceData.on("instance-added",function(a){h.requestUpdateCycle()});this._instanceData.on("instance-removed",function(a){h.requestUpdateCycle()});this._instanceData.on("instance-transform-changed",function(a){h.requestUpdateCycle()});this._instanceData.on("instance-visibility-changed",function(a){h.requestUpdateCycle(!0)});this._instanceData.on("instance-highlight-changed",function(a){h.requestUpdateCycle(!0)});this._enableLevelSelection=
1<this._symbol.levels.length;d.lodRenderers.push(this)}g.prototype.destroy=function(){d.lodRenderers.splice(d.lodRenderers.indexOf(this),1)};Object.defineProperty(g.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseBoundingBox",{get:function(){return this._levels[this._levels.length-1].boundingBox},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseBoundingSphere",{get:function(){return this._levels[this._levels.length-
1].boundingSphere},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"baseMaterial",{get:function(){return this._levels[this._levels.length-1].components[0].material},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"slicePlaneEnabled",{get:function(){return this._slicePlaneEnabled},set:function(a){this._slicePlaneEnabled=a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"intersectionHandlerId",{get:function(){return this._metadata.layerUid},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"instanceData",{get:function(){return this._instanceData},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"memoryUsage",{get:function(){var a={cpu:0,gpu:0};this._renderInstanceData.forEach(function(b){b=b.memoryUsage;a.cpu+=b.cpu;a.gpu+=b.gpu});this._highlightRenderInstanceData.forEach(function(b){b=b.memoryUsage;a.cpu+=b.cpu;a.gpu+=b.gpu});return a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"renderStats",
{get:function(){var a=this,b=this._instanceData.size,c=[];this._levels.forEach(function(b,e){e=a._renderInstanceData[e].size+a._highlightRenderInstanceData[e].size;b=b.triangleCount;c.push({renderedInstances:e,renderedTriangles:e*b,trianglesPerInstance:b})});return{totalInstances:b,renderedInstances:c.reduce(function(a,b){return a+b.renderedInstances},0),renderedTriangles:c.reduce(function(a,b){return a+b.renderedTriangles},0),levels:c}},enumerable:!0,configurable:!0});g.prototype.initializeRenderContext=
function(a){var b=this,c=a.rctx;this._symbol.levels.forEach(function(e){b._levels.push(new L(a,e));b._renderInstanceData.push(new x.RenderInstanceData(c,b._instanceBufferLayout));b._highlightRenderInstanceData.push(new x.RenderInstanceData(c,b._instanceBufferLayout))});this._levelSelector=E(this)};g.prototype.uninitializeRenderContext=function(a){this.invalidateOctree();this._levels.forEach(function(a){a.destroy()});this._renderInstanceData.forEach(function(a){a.destroy()});this._highlightRenderInstanceData.forEach(function(a){a.destroy()})};
Object.defineProperty(g.prototype,"slots",{get:function(){return[6,8]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"needsHighlight",{get:function(){return 0<this._highlightRenderInstanceData.reduce(function(a,b){return a+b.size},0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"needsRender",{get:function(){return this.needsUpdates()},enumerable:!0,configurable:!0});g.prototype.prepareRender=function(a){this.runUpdates(a)};g.prototype.render=function(a){var b=
a.rctx,c=6===a.slot?5:8===a.slot?7:null;if(c){if(!this.baseMaterial.isVisible()||!this.baseMaterial.isVisibleInPass(a.pass))return!1;var e=a.camera,e={view:e.viewMatrix,proj:e.projectionMatrix,origin:[0,0,0],viewInvTransp:e.viewInverseTransposeMatrix,lightingData:a.lightingData,viewport:e.viewport,fovY:e.fovY,nearFar:[e.near,e.far],shadowMap:a.shadowMap,shadowMappingEnabled:!!a.shadowMap&&a.shadowMap.enabled,ssaoEnabled:!!a.ssaoHelper&&a.ssaoHelper.enabled,pixelRatio:e.pixelRatio,slicePlane:a.sliceHelper&&
a.sliceHelper.plane,cameraAboveGround:e.aboveGround,hudVisibilityTexture:a.offscreenRenderingHelper?a.offscreenRenderingHelper.hudVisibilityTexture:null};b.bindVAO();for(b=0;b<this._levels.length;++b)this.renderLevel(a,c,e,a.isHighlightPass?this._highlightRenderInstanceData[b]:this._renderInstanceData[b],b);return!0}};g.prototype.intersect=function(a,c,e,d,f){var g=this;if(this.baseMaterial.isVisible()){f=b.vec3f64.create();k.vec3.subtract(f,d,e);var h=function(b){g._instanceData.getCombinedModelTransform(b,
I);a.transform.set(I);k.vec3.transformMat4(H,e,a.transform.inverse);k.vec3.transformMat4(S,d,a.transform.inverse);var f=g._instanceData.getState(b),h=g._instanceData.getLodLevel(b);q.assert(f&v.StateFlags.ACTIVE,"invalid instance state");q.assert(0<=h&&h<g._levels.length,"invaid lod level");g._levels[h].intersect(a,c,H,S,b,g._metadata)};this.baseMaterial.getParameters().verticalOffset?this.octree.forEach(h):this.octree.forEachAlongRay(e,f,h)}};g.prototype.queryDepthRange=function(a){return this.queryDepthRangeOctree(a)};
g.prototype.notifyShaderTransformationChanged=function(){this.invalidateOctree()};g.prototype.requestUpdateCycle=function(a){void 0===a&&(a=!1);this._updateCyclesWithStaticCamera=-1;a&&(this._needFullCycle=!0)};g.prototype.needsUpdates=function(){return 0<this._instanceData.size&&1>this._updateCyclesWithStaticCamera};g.prototype.runUpdates=function(a){if(!e.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){var b=a.equals(this._lastCamera);this._lastCamera.copyFrom(a);b||this.requestUpdateCycle()}b=
this._needFullCycle?this._instanceData.size:2E3;this._needFullCycle=!1;this.updateInstances(a,b)}};Object.defineProperty(g.prototype,"octree",{get:function(){this._octree||(this._octree=this.buildOctree());return this._octree},enumerable:!0,configurable:!0});g.prototype.invalidateOctree=function(){this._octree&&(this._octree.destroy(),this._octree=null)};g.prototype.buildOctree=function(){for(var a=new t.InstanceOctree(this._instanceData,this.baseBoundingSphere),b=this._instanceData,b=b.view?b.view.state:
null,c=0;c<this._instanceData.capacity;++c)b.get(c)&v.StateFlags.ACTIVE&&a.addInstance(c);return a};g.prototype.queryDepthRangeOctree=function(a){var b=a.eye,c=a.viewForward,e=this.octree.findClosest(c,"front-to-back",a.frustum),d=this.octree.findClosest(c,"back-to-front",a.frustum);return null!=e&&null!=d?(this._instanceData.view.boundingSphere.getVec(e,O),k.vec3.subtract(O,O,b),e=k.vec3.dot(O,c)-O[3],this._instanceData.view.boundingSphere.getVec(d,O),k.vec3.subtract(O,O,b),b=k.vec3.dot(O,c)+O[3],
{near:Math.max(a.near,e),far:Math.min(a.far,b)}):{near:Infinity,far:-Infinity}};g.prototype.startUpdateCycle=function(){this._updateCyclesWithStaticCamera++;this._renderInstanceData.forEach(function(a){a.startUpdateCylce()});this._highlightRenderInstanceData.forEach(function(a){a.startUpdateCylce()})};g.prototype.updateInstances=function(a,b){var c=this._enableLevelSelection,e=this._levelSelector;e.updateCamera(a);this._renderInstanceData.forEach(function(a){a.beginUpdate()});this._highlightRenderInstanceData.forEach(function(a){a.beginUpdate()});
a=this._instanceData;var d=this._instanceData.view,f=a.capacity,g=this._instanceIndex;b=Math.min(a.size,b);for(var h=0;h<b;++h){0===g&&this.startUpdateCycle();var k=d.state.get(g),l=0;if(k&v.StateFlags.ALLOCATED){var p=d.lodLevel.get(g);k&v.StateFlags.ACTIVE&&this._renderInstanceData[p].freeTail();k&v.StateFlags.HIGHLIGHT_ACTIVE&&this._highlightRenderInstanceData[p].freeTail();if(k&v.StateFlags.REMOVE)a.freeInstance(g);else if(k&v.StateFlags.VISIBLE){p=0;c&&(d.modelOrigin.getVec(g,K),p=e.selectLevel(K,
a.getCombinedMedianScaleFactor(g)));l=k&~(v.StateFlags.ACTIVE|v.StateFlags.HIGHLIGHT_ACTIVE|v.StateFlags.TRANSFORM_CHANGED);if(0<=p){var m=this._renderInstanceData[p],q=m.allocateHead();F(d,g,m.view,q);l|=v.StateFlags.ACTIVE;k&v.StateFlags.HIGHLIGHT&&(m=this._highlightRenderInstanceData[p],q=m.allocateHead(),F(d,g,m.view,q),l|=v.StateFlags.HIGHLIGHT_ACTIVE)}d.state.set(g,l);d.lodLevel.set(g,p)}else l=k&~(v.StateFlags.ACTIVE|v.StateFlags.HIGHLIGHT_ACTIVE|v.StateFlags.TRANSFORM_CHANGED),d.state.set(g,
l);this._octree&&(p=!!(k&v.StateFlags.ACTIVE),l=!!(l&v.StateFlags.ACTIVE),!p&&l?this._octree.addInstance(g):p&&!l?this._octree.removeInstance(g):p&&l&&k&v.StateFlags.TRANSFORM_CHANGED&&(this._octree.removeInstance(g),this._octree.addInstance(g)));g=(g+1)%f}else g=(g+1)%f,b++}this._instanceIndex=g;this._renderInstanceData.forEach(function(a){a.endUpdate()});this._highlightRenderInstanceData.forEach(function(a){a.endUpdate()})};g.prototype.renderLevel=function(a,b,c,e,d){var f=this;this._levels[d].components.forEach(function(g){f.renderComponent(a,
b,c,e,g,d)})};g.prototype.renderComponent=function(b,c,d,f,g,h){var k=g.glMaterials[b.pass];if(k&&k.beginSlot(c)&&k.isVisible()&&k.isVisibleInPass(b.pass)&&0!==f.size){var l=b.rctx,p=l.capabilities.instancing,m=k.getDrawMode();d.origin=[0,0,0];k.bind(l,d);l.bindVAO(g.vao);c=k.getProgram();B.assertCompatibleVertexAttributeLocations(g.vao,c);b.isHighlightPass&&(l.bindTexture(b.offscreenRenderingHelper?b.offscreenRenderingHelper.depthTexture:null,5),c.setUniform1i("depthTex",5),c.setUniform4f("highlightViewportPixelSz",
0,0,1/d.viewport[2],1/d.viewport[3]));k.bindView(l,d);e.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&0===b.pass&&(c.setUniform4fv("externalColor",P[Math.min(h,P.length-1)]),c.setUniform1i("colorMixMode",u.colorMixModes.replace));b=f.capacity;h=f.headIndex;c=f.tailIndex;var t=f.firstIndex,n=this._glInstanceBufferLayout,z=function(b,c){B.bindVertexBufferLayout(l,a.Default3D,f.buffer,n,b);p.drawArraysInstanced(m,0,g.vertexCount,c-b);B.unbindVertexBufferLayout(l,a.Default3D,f.buffer,n)};g.material.getParameters().transparent&&
null!=t?h>c?(q.assert(t>=c&&t<=h,"invalid firstIndex"),z(t,h),z(c,t)):h<c&&(t<=h?(q.assert(0<=t&&t<=h,"invalid firstIndex"),z(t,h),z(c,b),z(0,t)):(q.assert(t>=c&&t<=b,"invalid firstIndex"),z(t,b),z(0,h),z(c,t))):h>c?z(c,h):h<c&&(z(0,h),z(c,b));l.bindVAO(null);k.release(l,d)}};return g}();d.LodRenderer=r;d.lodRenderers=[];var K=b.vec3f64.create(),O=h.vec4f64.create(),I=l.mat4f64.create(),H=b.vec3f64.create(),S=b.vec3f64.create(),P=[[1,0,1,1],[0,0,1,1],[0,1,0,1],[1,1,0,1],[1,0,0,1]]})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceData":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/Evented ../../../../../core/libs/gl-matrix-2/mat3 ../../../../../core/libs/gl-matrix-2/mat3f64 ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils ../../../support/buffer/BufferView ../../../support/buffer/InterleavedLayout ../Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){Object.defineProperty(d,"__esModule",{value:!0});var v;(function(a){a[a.ALLOCATED=1]="ALLOCATED";a[a.ACTIVE=2]="ACTIVE";a[a.VISIBLE=4]="VISIBLE";a[a.HIGHLIGHT=8]="HIGHLIGHT";a[a.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE";a[a.REMOVE=32]="REMOVE";a[a.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED"})(v=d.StateFlags||(d.StateFlags={}));var t=function(){return function(b){this.localTransform=b.getField("localTransform",a.BufferViewMat4f64);this.globalTransform=b.getField("globalTransform",
a.BufferViewMat4f64);this.modelOrigin=b.getField("modelOrigin",a.BufferViewVec3f64);this.model=b.getField("model",a.BufferViewMat3f);this.modelNormal=b.getField("modelNormal",a.BufferViewMat3f);this.modelScaleFactors=b.getField("modelScaleFactors",a.BufferViewVec2f);this.boundingSphere=b.getField("boundingSphere",a.BufferViewVec4f64);this.color=b.getField("color",a.BufferViewVec4f);this.featureAttribute=b.getField("featureAttribute",a.BufferViewVec4f);this.state=b.getField("state",a.BufferViewUint8);
this.lodLevel=b.getField("lodLevel",a.BufferViewUint8)}}();d.View=t;r=function(a){function b(b,c){var e=a.call(this)||this;e._capacity=0;e._size=0;e._next=0;var d=p.newLayout().mat4f64("localTransform").mat4f64("globalTransform").vec4f64("boundingSphere").vec3f64("modelOrigin").mat3f("model").mat3f("modelNormal").vec2f("modelScaleFactors");0<=b.indexOf("color")&&(d=d.vec4f("color"));0<=b.indexOf("featureAttribute")&&(d=d.vec4f("featureAttribute"));d=d.u8("state").u8("lodLevel").alignTo(8);e._layout=
d;e._shaderTransformation=c;return e}n(b,a);Object.defineProperty(b.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"buffer",{get:function(){return this._buffer.buffer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0});b.prototype.addInstance=
function(){this._size+1>this._capacity&&this.grow();var a=this.findSlot();this._view.state.set(a,v.ALLOCATED);this._size++;this.emit("instance-added",{index:a});return a};b.prototype.removeInstance=function(a){var b=this._view.state;q.assert(0<=a&&a<this._capacity&&b.get(a)&v.ALLOCATED,"invalid instance handle");this.getStateFlag(a,v.ACTIVE)?this.setStateFlags(a,v.REMOVE):this.freeInstance(a);this.emit("instance-removed",{index:a})};b.prototype.freeInstance=function(a){var b=this._view.state;q.assert(0<=
a&&a<this._capacity&&b.get(a)&v.ALLOCATED,"invalid instance handle");b.set(a,0);this._size--};b.prototype.setLocalTransform=function(a,b,c){void 0===c&&(c=!0);this._view.localTransform.setMat(a,b);c&&this.updateModelTransform(a)};b.prototype.getLocalTransform=function(a,b){this._view.localTransform.getMat(a,b)};b.prototype.setGlobalTransform=function(a,b,c){void 0===c&&(c=!0);this._view.globalTransform.setMat(a,b);c&&this.updateModelTransform(a)};b.prototype.getGlobalTransform=function(a,b){this._view.globalTransform.getMat(a,
b)};b.prototype.updateModelTransform=function(a){var b=this._view,c=w,d=m;b.localTransform.getMat(a,u);b.globalTransform.getMat(a,z);var g=h.mat4.multiply(z,z,u);e.vec3.set(c,g[12],g[13],g[14]);b.modelOrigin.setVec(a,c);k.mat3.fromMat4(d,g);b.model.setMat(a,d);c=f.scaleFromMatrix(w,g);c.sort();b.modelScaleFactors.set(a,0,c[1]);b.modelScaleFactors.set(a,1,c[2]);k.mat3.invert(d,d);k.mat3.transpose(d,d);b.modelNormal.setMat(a,d);this.setStateFlags(a,v.TRANSFORM_CHANGED);this.emit("instance-transform-changed",
{index:a})};b.prototype.getModelTransform=function(a,b){var c=this._view;c.model.getMat(a,m);c.modelOrigin.getVec(a,w);b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=0;b[4]=m[3];b[5]=m[4];b[6]=m[5];b[7]=0;b[8]=m[6];b[9]=m[7];b[10]=m[8];b[11]=0;b[12]=w[0];b[13]=w[1];b[14]=w[2];b[15]=1};b.prototype.applyShaderTransformation=function(a,b){this._shaderTransformation&&this._shaderTransformation.applyTransform(this,a,b)};b.prototype.getCombinedModelTransform=function(a,b){this.getModelTransform(a,b);this._shaderTransformation&&
this._shaderTransformation.applyTransform(this,a,b);return b};b.prototype.getCombinedLocalTransform=function(a,b){this._view.localTransform.getMat(a,b);this._shaderTransformation&&this._shaderTransformation.applyTransform(this,a,b);return b};b.prototype.getCombinedMaxScaleFactor=function(a){var b=this._view.modelScaleFactors.get(a,1);this._shaderTransformation&&(a=this._shaderTransformation.scaleFactor(w,this,a),b*=Math.max(a[0],a[1],a[2]));return b};b.prototype.getCombinedMedianScaleFactor=function(a){var b=
this._view.modelScaleFactors.get(a,0);this._shaderTransformation&&(a=this._shaderTransformation.scaleFactor(w,this,a),a.sort(),b*=a[1]);return b};b.prototype.getModel=function(a,b){this._view.model.getMat(a,b)};b.prototype.setFeatureAttribute=function(a,b){this._view.featureAttribute.setVec(a,b)};b.prototype.getFeatureAttribute=function(a,b){this._view.featureAttribute.getVec(a,b)};b.prototype.setColor=function(a,b){this._view.color.setVec(a,b)};b.prototype.getColor=function(a,b){this._view.color.getVec(a,
b)};b.prototype.setVisible=function(a,b){b!==this.getVisible(a)&&(this.setStateFlag(a,v.VISIBLE,b),this.emit("instance-visibility-changed",{index:a}))};b.prototype.getVisible=function(a){return this.getStateFlag(a,v.VISIBLE)};b.prototype.setHighlight=function(a,b){b!==this.getHighlight(a)&&(this.setStateFlag(a,v.HIGHLIGHT,b),this.emit("instance-highlight-changed",{index:a}))};b.prototype.getHighlight=function(a){return this.getStateFlag(a,v.HIGHLIGHT)};b.prototype.getState=function(a){return this._view.state.get(a)};
b.prototype.getLodLevel=function(a){return this._view.lodLevel.get(a)};b.prototype.countFlags=function(a){for(var b=0,c=0;c<this._capacity;++c)this.getState(c)&a&&++b;return b};b.prototype.setStateFlags=function(a,b){var c=this._view.state;b|=c.get(a);c.set(a,b)};b.prototype.clearStateFlags=function(a,b){var c=this._view.state;b=c.get(a)&~b;c.set(a,b)};b.prototype.setStateFlag=function(a,b,c){c?this.setStateFlags(a,b):this.clearStateFlags(a,b)};b.prototype.getStateFlag=function(a,b){return!!(this._view.state.get(a)&
b)};b.prototype.grow=function(){var a=Math.max(y,Math.floor(this._capacity*x)),b=this._layout.createBuffer(a);if(this._buffer){var c=new Uint8Array(this._buffer.buffer);(new Uint8Array(b.buffer)).set(c)}this._capacity=a;this._buffer=b;this._view=new t(this._buffer)};b.prototype.findSlot=function(){for(var a=this._view.state,b=this._next;a.get(b)&v.ALLOCATED;)b=(b+1)%this._capacity;this._next=(b+1)%this._capacity;return b};return b}(l);d.InstanceData=r;var y=1024,x=2,w=c.vec3f64.create(),m=b.mat3f64.create(),
u=g.mat4f64.create(),z=g.mat4f64.create()})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceOctree":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils ../Octree".split(" "),function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(e){function c(c,a){var d=e.call(this,[0,0,0],1,{getCenter:function(a){var b=
d._instanceData.view.boundingSphere,c=d._tmpCenter;c[0]=b.get(a,0);c[1]=b.get(a,1);c[2]=b.get(a,2);return c},getRadius:function(a){return d._instanceData.view.boundingSphere.get(a,3)}},{maximumDepth:25})||this;d._tmpCenter=b.vec3f64.create();d._tmpMat4=l.mat4f64.create();d._instanceData=c;d._boundingSphere=a;return d}n(c,e);c.prototype.addInstance=function(b){var a=this._instanceData.view.boundingSphere,c=this._instanceData.getCombinedModelTransform(b,this._tmpMat4),e=k.vec3.transformMat4(this._tmpCenter,
this._boundingSphere.center,c),c=this._boundingSphere.radius*h.maxScale(c);a.set(b,0,e[0]);a.set(b,1,e[1]);a.set(b,2,e[2]);a.set(b,3,c);this.add(b)};c.prototype.removeInstance=function(b){this.remove(b)};return c}(g);d.InstanceOctree=r})},"esri/views/3d/webgl-engine/lib/lodRendering/LevelSelector":function(){define(["require","exports","../Camera"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b){this.thresholdScale=1;this._camera=new n;this._worldSpaceRadius=
d;this._thresholds=b.map(function(b){return b})}d.prototype.updateCamera=function(d){this._camera.copyFrom(d)};d.prototype.selectLevel=function(d,b){d=this._camera.computeScreenPixelSizeAt(d);b=this._worldSpaceRadius*b/d;d=this._thresholds;for(var h=-1,g=0;g<d.length;++g)b>=d[g]*this.thresholdScale&&(h=g);return h};return d}();d.LevelSelector=r})},"esri/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData":function(){define(["require","exports","../../../support/buffer/BufferView","../Util",
"./BackedBufferObject"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(){return function(a){this.modelOriginHi=a.getField("modelOriginHi",n.BufferViewVec3f);this.modelOriginLo=a.getField("modelOriginLo",n.BufferViewVec3f);this.model=a.getField("model",n.BufferViewMat3f);this.modelNormal=a.getField("modelNormal",n.BufferViewMat3f);this.color=a.getField("instanceColor",n.BufferViewVec4f);this.featureAttribute=a.getField("instanceFeatureAttribute",n.BufferViewVec4f)}}();
d.View=b;r=function(){function a(a,b){this._tailIndex=this._headIndex=0;this._captureFirstIndex=!0;this._updating=!1;this._prevHeadIndex=0;this._resized=!1;this._rctx=a;this._instanceBufferLayout=b;this._elementSize=b.stride;this._capacity=1}a.prototype.destroy=function(){this._buffer&&this._buffer.destroy()};Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buffer.buffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"view",{get:function(){return this._view},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var a=this._headIndex,b=this._tailIndex;return a>=b?a-b:a+this._capacity-b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isEmpty",{get:function(){return this._headIndex===this._tailIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isFull",{get:function(){return this._tailIndex===
(this._headIndex+1)%this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"headIndex",{get:function(){return this._headIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tailIndex",{get:function(){return this._tailIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"firstIndex",{get:function(){return this._firstIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"memoryUsage",{get:function(){return this._buffer?
this._buffer.memoryUsage:{cpu:0,gpu:0}},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._tailIndex=this._headIndex=0;this._firstIndex=null};a.prototype.startUpdateCylce=function(){this._captureFirstIndex=!0};a.prototype.beginUpdate=function(){l.assert(!this._updating,"already updating");this._updating=!0;this._prevHeadIndex=this._headIndex};a.prototype.endUpdate=function(){l.assert(this._updating,"not updating");this.size<e*this.capacity&&this.shrink();this._resized?(this._buffer.transferAll(),
this._resized=!1):this.transferRange(this._prevHeadIndex,this._headIndex);this._updating=!1};a.prototype.allocateHead=function(){l.assert(this._updating,"not updating");this.isFull&&this.grow();var a=this.headIndex;this._captureFirstIndex&&(this._firstIndex=a,this._captureFirstIndex=!1);this.incrementHead();l.assert(this._headIndex!==this._tailIndex,"invalid pointers");return a};a.prototype.freeTail=function(){l.assert(this._updating,"not updating");l.assert(0<this.size,"invalid size");var a=this._tailIndex===
this._firstIndex;this.incrementTail();a&&(this._firstIndex=this._tailIndex)};a.prototype.grow=function(){this.resize(Math.max(h,Math.floor(this._capacity*g)))};a.prototype.shrink=function(){f&&this.resize(Math.max(h,Math.floor(this._capacity*c)))};a.prototype.resize=function(a){l.assert(this._updating,"not updating");if(a!==this._capacity){var c=new k(this._rctx,34962,35044,this._elementSize,a);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%
this._capacity);var e=this.size,d=this.compactInstances(c);l.assert(d===e,"invalid compaction");this._buffer.destroy();this._tailIndex=0;this._headIndex=d;this._prevHeadIndex=0}this._resized=!0;this._capacity=a;this._buffer=c;this._view=new b(this._instanceBufferLayout.createView(this._buffer.array))}};a.prototype.compactInstances=function(a){var b=this._headIndex,c=this._tailIndex;return c<b?(this._buffer.copyRange(c,b,a),b-c):c>b?(this._buffer.copyRange(c,this._capacity,a),0<b&&this._buffer.copyRange(0,
b,a,this._capacity-c),b+(this._capacity-c)):0};a.prototype.incrementHead=function(a){void 0===a&&(a=1);this._headIndex=(this._headIndex+a)%this._capacity};a.prototype.incrementTail=function(a){void 0===a&&(a=1);this._tailIndex=(this._tailIndex+a)%this._capacity};a.prototype.transferRange=function(a,b){a<b?this._buffer.transferRange(a,b):a>b&&(0<b&&this._buffer.transferRange(0,b),this._buffer.transferRange(a,this._capacity))};return a}();d.RenderInstanceData=r;var h=1024,g=2,e=.3,c=.5,f=!0})},"esri/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject":function(){define(["require",
"exports","../../../../webgl/BufferObject"],function(r,d,n){return function(){function d(d,b,h,g,e){this._elementSize=g;this._buffer=new n(d,b,h);this.resize(e)}d.prototype.destroy=function(){this._buffer.dispose()};Object.defineProperty(d.prototype,"elementSize",{get:function(){return this._elementSize},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"array",{get:function(){return this._array},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"buffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"memoryUsage",{get:function(){return{cpu:this._capacity*this._elementSize,gpu:this._capacity*this._elementSize}},enumerable:!0,configurable:!0});d.prototype.copyRange=function(d,b,h,g){void 0===g&&(g=0);d=new Uint8Array(this.array,d*this.elementSize,(b-d)*this.elementSize);(new Uint8Array(h.array,g*this.elementSize)).set(d)};
d.prototype.transferAll=function(){this._buffer.setData(this._array)};d.prototype.transferRange=function(d,b){d*=this._elementSize;this._buffer.setSubData(this._array,d,d,b*this._elementSize)};d.prototype.resize=function(d){var b=d*this._elementSize,h=new ArrayBuffer(b);this._array&&(d>=this._capacity?(new Uint8Array(h)).set(new Uint8Array(this._array)):(new Uint8Array(h)).set((new Uint8Array(this._array)).subarray(0,d*this._elementSize)));this._array=h;this._buffer.setData(b);this._capacity=d};return d}()})},
"esri/views/3d/webgl-engine/lib/lodRendering/utils":function(){define(["require","exports","../doublePrecisionUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.acquireGLMaterials=function(b,d){var g={};g[0]=d.acquire(b,"color");g[3]=d.acquire(b,"depthShadowMap");g[2]=d.acquire(b,"normal");g[1]=d.acquire(b,"depth");g[4]=d.acquire(b,"highlight");return g};d.releaseGLMaterials=function(b,d){d.release(b.id,"color");d.release(b.id,"depthShadowMap");d.release(b.id,"normal");d.release(b.id,
"depth");d.release(b.id,"highlight")};d.encodeDoubleVec3=function(b,d,g,e,c){l[0]=b.get(d,0);l[1]=b.get(d,1);l[2]=b.get(d,2);n.encodeDoubleArray(l,k,3);g.set(c,0,k[0]);e.set(c,0,k[1]);g.set(c,1,k[2]);e.set(c,1,k[3]);g.set(c,2,k[4]);e.set(c,2,k[5])};var l=new Float64Array(3),k=new Float32Array(6)})},"esri/views/3d/layers/graphics/Graphics3DPathSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/lang ../../../../core/maybe ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../layers/graphics/dehydratedFeatures ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../support/FastSymbolUpdates ../../support/mathUtils ../../support/projectionUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/pathGeometryUtils ../../webgl-engine/materials/DefaultMaterial ../../webgl-engine/materials/PathMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L){function K(b,c,e,d,f,g,h,k){switch(c){case "world":d=0;for(f=b.vertices;d<f.length;d++)c=f[d],a.vec3.add(R,c.pos,b.offset),e.worldUpAtPosition(R,J),c.setFrameFromUpVector(J),c.computeRotationAxisAndAngleFromUpVector();break;case "terrain":for(var l=0,p=b.vertices;l<p.length;l++){var m=c=p[l],q=b.offset,t=d,n=f,z=e,w=g,x=h,v=k,y=R;a.vec3.set(J,m.posGS[0]+v,m.posGS[1],m.posGS[2]);I(J,t,n,z,w,x,X);a.vec3.set(J,m.posGS[0],m.posGS[1]+v,
m.posGS[2]);I(J,t,n,z,w,x,ca);a.vec3.add(J,m.pos,q);a.vec3.subtract(T,X,J);a.vec3.normalize(T,T);a.vec3.subtract(Z,ca,J);a.vec3.normalize(Z,Z);a.vec3.cross(Q,T,Z);a.vec3.copy(y,Q);c.setFrameFromUpVector(R);c.computeRotationAxisAndAngleFromUpVector()}break;case "path":for(a.vec3.add(R,b.vertices[0].pos,b.offset),e.worldUpAtPosition(R,J),E.computeMinimumRotationTangentFrame(b,J),e=0,b=b.vertices;e<b.length;e++)c=b[e],d=u.sign(a.vec3.dot(c.frame.right,c.vRight)),a.vec3.cross(c.rotationFrame.up,c.vRight,
c.vLeft),a.vec3.scale(c.rotationFrame.up,c.rotationFrame.up,d),a.vec3.normalize(c.rotationFrame.up,c.rotationFrame.up),f=a.vec3.dot(c.rotationFrame.up,c.frame.up),g=a.vec3.dot(c.rotationFrame.up,c.frame.right),a.vec3.scale(R,c.frame.up,-g),a.vec3.scale(U,c.frame.right,f),a.vec3.add(R,R,U),a.vec3.normalize(c.rotationFrame.right,R),a.vec3.negate(R,c.vLeft),c.rotationAngle=-d*(Math.PI-u.acos(a.vec3.dot(R,c.vRight))),c.maxStretchDistance=Math.abs(Math.min(c.vLeftLength,c.vRightLength)/Math.cos(.5*(Math.PI-
c.rotationAngle)))}}function O(a,b,c){switch(a){case "symbolValue":return c;case "proportional":return b;default:return a}}function I(a,b,c,e,d,f,g){z.bufferToBuffer(a,d,0,J,f,0,1);z.bufferToBuffer(J,f,0,g,e.spatialReference,0,1);P.x=J[0];P.y=J[1];P.z=J[2];a=y.computeElevation(c,P,b,e,null);e.setAltitude(a,g)}function H(b,c,e,d){b=b.stageObject;var f=b.getGeometryRecords(),g=f.length,h=0,k=P.spatialReference=e.spatialReference;S.spatialReference=d.spatialReference;for(var l=0;l<g;l++){var p=f[l].geometry,
m=p.metadata,q=m.pathGeometry,u=q.builder.path,t=m.geometrySR;V.spatialReference=t;for(var n=u,z=c,w=e,x=d,v=0,B=0,C=n.vertices;B<C.length;B++){var r=C[B];P.x=r.posES[0];P.y=r.posES[1];P.z=r.posES[2];var F=y.computeElevation(w,P,z,x,Y),v=v+Y.terrainElevation;a.vec3.add(J,r.pos,n.offset);x.setAltitude(F,J);a.vec3.subtract(r.pos,J,n.offset)}n.updatePathVertexInformation();h+=v/n.vertices.length;"world"!==u.upVector&&K(u,m.upVectorAlignment,d,c,e,t,k,m.stencilWidth);q.onPathChanged();p.invalidateBoundingInfo();
b.geometryVertexAttrsUpdated(l)}return h/g}Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function l(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._intrinsicSize=f.vec2f64.fromValues(1,1);a.upVectorAlignment="path";a.stencilWidth=.1;return a}n(l,d);l.prototype.doLoad=function(){return b(this,void 0,void 0,function(){var a,b,d,f,l,p,u,t,n,z,x,v,y,C;return k(this,function(k){a=e.isSome(this.symbolLayer.width)?this.symbolLayer.width:e.isSome(this.symbolLayer.height)?this.symbolLayer.height:
this.symbolLayer.size;b=e.isSome(this.symbolLayer.height)?this.symbolLayer.height:a;this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[a,1,b],unitInMeters:this._context.renderCoordsHelper.unitInMeters,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}};this._fastUpdates=this._context.renderer&&this._context.renderer.visualVariables&&0<this._context.renderer.visualVariables.length?m.initFastSymbolUpdatesState(this._context.renderer,
this._vvConvertOptions):{enabled:!1};d=this.symbolLayer.anchor||"center";this.upVectorAlignment="path";"heading"===this.symbolLayer.profileRotation&&(this.upVectorAlignment="world");f=this.symbolLayer.profile||"circle";switch(f){default:this._profile=E.Profile.circle(G);break;case "quad":this._profile=E.Profile.rect()}l=[0,0];"center"!==d&&(l={left:[.5,0],right:[-.5,0],top:[0,-.5],bottom:[0,.5]}[d],this._profile.translate(l[0],l[1]));p=this.symbolLayer.join||"simple";switch(p){case "round":this._extruder=
new E.MiterExtruder(0,3);break;case "bevel":this._extruder=new E.MiterExtruder(0,1);break;case "miter":this._extruder=new E.MiterExtruder(.8*Math.PI,1);break;default:this._extruder=new E.SimpleExtruder}u=this.symbolLayer.cap||"butt";switch(u){case "none":this._startCap=new E.NoCapBuilder;this._endCap=new E.NoCapBuilder;break;default:this._startCap=new E.TriangulationCapBuilder(this._profile,0);this._endCap=new E.TriangulationCapBuilder(this._profile,0,!0);break;case "square":this._startCap=new E.TriangulationCapBuilder(this._profile,
-.5);this._endCap=new E.TriangulationCapBuilder(this._profile,.5,!0);break;case "round":t="quad"===f?!0:!1,this._startCap=new E.RoundCapBuilder({profile:this._profile,flip:!1,breakNormals:t}),this._endCap=new E.RoundCapBuilder({profile:this._profile,flip:!0,breakNormals:t})}n=this._getStageIdHint();z=e.get(this.symbolLayer,"material","color");x=this._getCombinedOpacityAndColor(z);v=q.vec3f64.fromArray(x);y=x[3];C={diffuse:v,ambient:v,opacity:y,transparent:1>y||this._isPropertyDriven("opacity"),vertexColors:!1,
slicePlaneEnabled:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:"none"===u?"none":void 0};if(!this._isPropertyDriven("size")&&(c.vec2.set(this._intrinsicSize,a,b),!w.isValidSize(this._intrinsicSize[0])||!w.isValidSize(this._intrinsicSize[1])))throw new h("graphics3dpathsymbollayer:invalid-size","Symbol sizes may not be negative values");this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||c.vec2.scale(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters);
this._fastUpdates.enabled?(g.mixin(C,this._fastUpdates.materialParameters,{size:[this._intrinsicSize[0],this._intrinsicSize[1],0]}),this._material=new L(C,n+"_pathmat")):(C.vertexColors=this._isPropertyDriven("color")||this._isPropertyDriven("opacity"),this._material=new N(C,n+"_pathmat"));this._context.stage.add(B.ModelContentType.MATERIAL,this._material);return[2]})})};l.prototype.destroy=function(){d.prototype.destroy.call(this);this._material&&(this._context.stage.remove(B.ModelContentType.MATERIAL,
this._material.id),this._material=null)};l.prototype.createGraphics3DGraphic=function(a){var b=a.graphic;if("polyline"!==b.geometry.type)return this.logger.warn("unsupported geometry type for path symbol: "+b.geometry.type),null;if(!this._validateGeometry(b.geometry))return null;var c="graphic"+b.uid,e=this.getGraphicElevationContext(b);return this._createAs3DShape(b,a.renderingInfo,e,c,b.uid)};l.prototype.layerOpacityChanged=function(){var a=e.get(this.symbolLayer,"material","color"),a=this._getCombinedOpacity(a),
b=1>a||this._isPropertyDriven("opacity");this._material.setParameterValues({opacity:a,transparent:b});return!0};l.prototype.layerElevationInfoChanged=function(a,b,c){var e=this;a.forEach(function(a){var c=b(a);c&&(a=e.getGraphicElevationContext(a.graphic),c.needsElevationUpdates=y.needsElevationUpdates3D(a.mode),c.elevationContext.set(a))});return!0};l.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};
l.prototype.pixelRatioChanged=function(a,b){return!0};l.prototype.applyRendererDiff=function(a,b){for(var c in a.diff)switch(c){case "visualVariables":if(m.updateFastSymbolUpdatesState(this._fastUpdates,b,this._vvConvertOptions))this._material.setParameterValues(this._fastUpdates.materialParameters);else return!1;break;default:return!1}return!0};l.prototype.getVertexData=function(a){for(var b=0,c=a.paths,e=[],d=a.spatialReference,f=this._context.elevationProvider.spatialReference,g=this._context.renderSpatialReference,
h=0;h<c.length;h++)var k=c[h],b=b+k.length;for(var h=new Float64Array(3*b),l=new Float64Array(3*b),p=new Float64Array(3*b),m=0,q=0;q<c.length;q++){k=c[q];e.push({index:m,numVertices:k.length});for(var u=0;u<k.length;u++){var t=k[u];h[m++]=t[0];h[m++]=t[1];h[m++]=a.hasZ?t[2]:0}}a=!0;d.equals(f)?y.copyVertices(h,0,l,0,b):a=y.reproject(h,0,d,l,0,f,b);f.equals(g)?y.copyVertices(l,0,p,0,b):y.reproject(l,0,f,p,0,g,b);return{pathVertexDataInfos:e,vertexDataGS:h,vertexDataES:l,vertexDataRS:p,projectionSuccess:a,
terrainElevation:0}};l.prototype._createAs3DShape=function(b,c,e,d,f){var g=b.geometry,h=[],k=[],l=[],p=g.spatialReference,m=this._context.elevationProvider.spatialReference,q=Array(6),u=this._context.renderCoordsHelper;V.spatialReference=p;P.spatialReference=m;g=this.getVertexData(g);if(!g.projectionSuccess)return this.logger.warn("PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)"),null;if(0<g.pathVertexDataInfos.length){for(var n=0;n<g.pathVertexDataInfos.length;++n){var z=
g.pathVertexDataInfos[n],w=z.index,z=z.numVertices;if(2>z)this.logger.warn("PathSymbol3DLayer geometry failed to be created (paths should contain at least 2 vertices)");else{if(this._context.clippingExtent&&(y.computeBoundingBox(g.vertexDataES,w,z,q),y.boundingBoxClipped(q,this._context.clippingExtent)))continue;for(var v=[],B=w;B<w+3*z;){var r=B++,I=B++,U=B++,G=new E.PathVertex;a.vec3.set(G.posGS,g.vertexDataGS[r],g.vertexDataGS[I],g.vertexDataGS[U]);a.vec3.set(G.posES,g.vertexDataES[r],g.vertexDataES[I],
g.vertexDataES[U]);P.x=G.posES[0];P.y=G.posES[1];P.z=G.posES[2];var Q=y.computeElevation(this._context.elevationProvider,P,e,u,null);a.vec3.set(J,g.vertexDataRS[r],g.vertexDataRS[I],g.vertexDataRS[U]);u.setAltitude(Q,J);a.vec3.set(G.pos,J[0],J[1],J[2]);v.push(G)}w=new E.Path(v);K(w,this.upVectorAlignment,this._context.renderCoordsHelper,e,this._context.elevationProvider,p,m,this.stencilWidth);w=new E.Builder(w,this._profile,this._extruder,this._startCap,this._endCap);z=null;this._fastUpdates.enabled?
(B=this._fastUpdates.visualVariables,z=B.size?x.getAttributeValue(B.size.field,b):0,v=B.color?x.getAttributeValue(B.color.field,b):0,B=B.opacity?x.getAttributeValue(B.opacity.field,b):0,z=new E.FastUpdatePathGeometry(w,z,v,B)):(z=[this._intrinsicSize[0],this._intrinsicSize[1]],this._isPropertyDriven("size")&&(z[0]*=O(c.size[0],c.size[2],this.symbolLayer.width),z[1]*=O(c.size[2],c.size[0],this.symbolLayer.height)),v=null,this._isPropertyDriven("color")&&(v=c.color),this._isPropertyDriven("opacity")&&
null!=c.opacity&&(v=v?[v[0],v[1],v[2],c.opacity]:[1,1,1,c.opacity]),w=new E.StaticPathGeometry(w),w.bakeVertexPositions(z),v&&w.bakeVertexColors(v),w.computeNormals(),z=w);w=z.createGeometryData();w=new C(w,d+"path"+n);v={pathGeometry:z,geometrySR:p,upVectorAlignment:this.upVectorAlignment,stencilWidth:this.stencilWidth};w.singleUse=!0;w.metadata=v;h.push(w);k.push(this._material);l.push(z.xform)}}b={layerUid:this._context.layer.uid,graphicUid:f};if(0<h.length)return d=new F({geometries:h,materials:k,
transformations:l,castShadow:!0,metadata:b,idHint:d}),h=new t(this,d,h,null,null,H,e),h.alignedTerrainElevation=g.terrainElevation,h.needsElevationUpdates=y.needsElevationUpdates3D(e.mode),h}else this.logger.warn("PathSymbol3DLayer geometry failed to be created (no paths were defined)");return null};return l}(x.Graphics3DSymbolLayer);d.Graphics3DPathSymbolLayer=r;var S=v.makeDehydratedPoint(0,0,0,null),P=v.makeDehydratedPoint(0,0,0,null),V=v.makeDehydratedPoint(0,0,0,null),T=q.vec3f64.create(),Z=
q.vec3f64.create(),Q=q.vec3f64.create(),J=q.vec3f64.create(),R=p.vec3f32.create(),U=p.vec3f32.create(),X=q.vec3f64.create(),ca=q.vec3f64.create(),G=10,Y={verticalDistanceToGround:0,terrainElevation:0};d.default=r})},"esri/views/3d/webgl-engine/lib/pathGeometryUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/mathUtils ./GeometryData ./GeometryUtil ./Util ../materials/internal/MaterialUtil ../shaders/PathPrograms".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y){var x;(function(d){function n(){return{up:c.vec3f64.create(),right:c.vec3f64.create()}}function x(a,b,c){a[0]=c[0]*b.right[0]+c[1]*b.up[0];a[1]=c[0]*b.right[1]+c[1]*b.up[1];a[2]=c[0]*b.right[2]+c[1]*b.up[2]}d.makeFrame=n;d.profileSpaceToVertexSpace=x;var r=function(){function b(){this.pos=c.vec3f64.create();this.posES=c.vec3f64.create();this.posGS=c.vec3f64.create();this.vRight=c.vec3f64.create();this.vLeft=c.vec3f64.create();this.frame=n();this.rotationFrame=
n();this.rotationAngle=0}b.prototype.setFrameFromUpVector=function(a){e.vec3.copy(this.frame.up,a);e.vec3.add(C,this.vLeft,this.vRight);e.vec3.normalize(C,C);e.vec3.scale(B,this.frame.up,e.vec3.dot(C,this.frame.up));e.vec3.subtract(N,C,B);e.vec3.normalize(N,N);e.vec3.cross(this.frame.right,N,this.frame.up)};b.prototype.computeRotationAxisAndAngleFromUpVector=function(){e.vec3.copy(this.rotationFrame.up,this.frame.up);var b=e.vec3.dot(this.rotationFrame.up,this.frame.up),c=e.vec3.dot(this.rotationFrame.up,
this.frame.right);e.vec3.scale(B,this.frame.up,-c);e.vec3.scale(C,this.frame.right,b);e.vec3.add(B,B,C);e.vec3.normalize(this.rotationFrame.right,B);e.vec3.scale(B,this.frame.up,e.vec3.dot(this.frame.up,this.vLeft));e.vec3.subtract(B,this.vLeft,B);e.vec3.negate(B,B);e.vec3.normalize(B,B);e.vec3.scale(C,this.frame.up,e.vec3.dot(this.frame.up,this.vRight));e.vec3.subtract(C,this.vRight,C);e.vec3.normalize(C,C);e.vec3.cross(F,this.rotationFrame.up,this.vLeft);this.rotationAngle=a.sign(e.vec3.dot(F,this.vRight))*
(Math.PI-a.acos(e.vec3.dot(B,C)));this.maxStretchDistance=Math.abs(Math.min(this.vLeftLength,this.vRightLength)/Math.cos(.5*(Math.PI-this.rotationAngle)))};return b}();d.PathVertex=r;r=function(){function a(){this.vertices=[];this.vertexIndices=[];this.poles=[];this.poleIndices=[];this.uvIndices=this.uvs=null}a.prototype.addVertex=function(a,b){void 0===b&&(b=0);this.vertices.push(g.vec2f64.clone(a));this.poleIndices.push(b);return this.vertices.length-1};a.prototype.addUV=function(a){this.uvs||(this.uvs=
[],this.uvIndices=[]);this.uvs.push(a);return this.uvs.length-1};a.prototype.addPole=function(a){this.poles.push(g.vec2f64.clone(a));return this.poles.length-1};a.prototype.addSegment=function(a,b,c,e){void 0===c&&(c=null);void 0===e&&(e=null);this.vertexIndices.push(a);this.vertexIndices.push(b);null!==c&&null!==e&&(this.uvIndices.push(c),this.uvIndices.push(e))};Object.defineProperty(a.prototype,"numSegments",{get:function(){return this.vertexIndices.length/2},enumerable:!0,configurable:!0});a.prototype.hasUV=
function(){return null!=this.uvs};a.prototype.translate=function(a,b){for(var c=0,e=this.vertices;c<e.length;c++){var d=e[c];d[0]+=a;d[1]+=b}c=0;for(e=this.poles;c<e.length;c++)d=e[c],d[0]+=a,d[1]+=b};a.circle=function(b){void 0===b&&(b=20);var c=new a;c.addPole(g.vec2f64.fromValues(0,0));for(var e=0;e<b;++e){var d=2*e*Math.PI/b;c.addVertex(g.vec2f64.fromValues(.5*Math.cos(d),.5*Math.sin(d)));c.addUV(e/b)}c.addUV(1);for(e=0;e<b-1;++e)c.addSegment(e,e+1,e,e+1);c.addSegment(b-1,0,b-1,b);return c};a.rect=
function(){var b=new a,c=g.vec2f64.fromValues(-.5,-.5),e=g.vec2f64.fromValues(.5,-.5),d=g.vec2f64.fromValues(.5,.5),f=g.vec2f64.fromValues(-.5,.5);b.addPole(g.vec2f64.fromValues(0,.5));b.addPole(g.vec2f64.fromValues(0,.5));b.addPole(g.vec2f64.fromValues(0,-.5));b.addPole(g.vec2f64.fromValues(0,-.5));b.addUV(0);b.addUV(1);b.addVertex(c,3);b.addVertex(e,3);b.addSegment(0,1,0,1);b.addVertex(e,2);b.addVertex(d,1);b.addSegment(2,3,0,1);b.addVertex(d,0);b.addVertex(f,0);b.addSegment(4,5,0,1);b.addVertex(f,
1);b.addVertex(c,2);b.addSegment(6,7,0,1);return b};return a}();d.Profile=r;r=function(){function a(a){this.vertices=[];this.offset=c.vec3f64.create();this.xform=b.mat4f64.create();this.vertices=a;e.vec3.copy(this.offset,this.vertices[Math.floor((a.length-1)/2)].pos);a=0;for(var d=this.vertices;a<d.length;a++){var f=d[a];e.vec3.subtract(f.pos,f.pos,this.offset)}k.mat4.translate(this.xform,this.xform,this.offset);this.updatePathVertexInformation()}a.prototype.updatePathVertexInformation=function(){var a=
this.vertices.length,b=this.vertices[0];b.index=0;e.vec3.set(b.vLeft,0,0,0);b.vLeftLength=0;e.vec3.subtract(b.vRight,this.vertices[1].pos,b.pos);b.vRightLength=e.vec3.length(b.vRight);e.vec3.normalize(b.vRight,b.vRight);for(var c=b,d=1;d<a;++d)b=this.vertices[d],b.index=d,e.vec3.copy(b.vLeft,c.vRight),b.vLeftLength=c.vRightLength,d<a-1?(e.vec3.subtract(b.vRight,this.vertices[d+1].pos,b.pos),b.vRightLength=e.vec3.length(b.vRight),e.vec3.normalize(b.vRight,b.vRight)):(e.vec3.copy(b.vRight,b.vLeft),
b.vRightLength=b.vLeftLength),c=b};return a}();d.Path=r;d.computeMinimumRotationTangentFrame=function(a,b){var d=null,g=a.vertices.length,h=c.vec3f64.create(),k=c.vec3f64.create(),l=c.vec3f64.create(),p=c.vec3f64.create(),m=c.vec3f64.create(),u=c.vec3f64.create(),t=f.plane.create(),n=a.vertices[0];e.vec3.copy(k,b);e.vec3.set(h,0,1,0);q.makeOrthoBasisDirUpFallback(n.vRight,k,h,h,l,k,.99619469809);e.vec3.copy(n.frame.up,k);e.vec3.copy(n.frame.right,l);d=n;for(b=1;b<g;++b){n=a.vertices[b];e.vec3.add(m,
n.vLeft,n.vRight);var z=e.vec3.length(m);0<z?(z=1/Math.sqrt(z),m[0]*=z,m[1]*=z,m[2]*=z):(m[0]=n.vRight[0],m[1]=n.vRight[1],m[2]=n.vRight[2]);e.vec3.add(u,d.pos,d.frame.up);f.plane.fromPositionAndNormal(n.pos,m,t);f.plane.intersectRay(t,f.ray.wrap(u,n.vLeft),p)?(e.vec3.subtract(p,p,n.pos),e.vec3.normalize(k,p),e.vec3.cross(l,m,k),e.vec3.normalize(l,l)):q.makeOrthoBasisDirUpFallback(m,d.frame.up,d.frame.right,h,l,k,.99619469809);e.vec3.copy(n.frame.up,k);e.vec3.copy(n.frame.right,l);d=n}};r=function(){return function(){}}();
d.Extruder=r;r=function(){function a(){}a.prototype.numProfilesPerJoin=function(){return 1};a.prototype.extrude=function(a,b,c){for(var e=0;e<b.vertices.length;++e)x(w,a.frame,b.vertices[e]),c(a.index,a.frame,w,!1)};return a}();d.SimpleExtruder=r;r=function(){function a(a,b){void 0===a&&(a=.8*Math.PI);void 0===b&&(b=1);this.cutoffAngle=a;this.numBendSubdivisions=b}a.prototype.numProfilesPerJoin=function(){return this.numBendSubdivisions+1};a.prototype.extrude=function(a,b,c){var d=L,f=K,g=a.frame;
e.vec3.copy(f.up,g.up);e.vec3.copy(f.right,g.right);if(0<Math.abs(a.rotationAngle)){var g=e.vec3.dot(f.right,a.rotationFrame.up),h=e.vec3.dot(f.right,a.rotationFrame.right),l=e.vec3.dot(f.up,a.rotationFrame.up),p=e.vec3.dot(f.up,a.rotationFrame.right),h=h/Math.cos(.5*a.rotationAngle),p=p/Math.cos(.5*a.rotationAngle);e.vec3.scale(C,a.rotationFrame.up,g);e.vec3.scale(f.right,a.rotationFrame.right,h);e.vec3.add(f.right,f.right,C);e.vec3.scale(C,a.rotationFrame.up,l);e.vec3.scale(f.up,a.rotationFrame.right,
p);e.vec3.add(f.up,f.up,C)}if(Math.abs(a.rotationAngle)>=this.cutoffAngle)for(g=0;g<this.numBendSubdivisions+1;++g)for(k.mat4.identity(O),k.mat4.rotate(O,O,.5*-a.rotationAngle+g*a.rotationAngle/this.numBendSubdivisions,a.rotationFrame.up),l=d,p=a.frame,h=O,e.vec3.transformMat4(l.up,p.up,h),e.vec3.transformMat4(l.right,p.right,h),l=0;l<b.vertices.length;++l)x(w,a.frame,b.vertices[l]),p=e.vec3.dot(w,a.rotationFrame.right),(p=0<=p*a.rotationAngle)?(x(w,d,b.vertices[l]),c(a.index,d,w,!1)):(x(w,f,b.vertices[l]),
c(a.index,a.frame,w,!0));else for(g=0;g<this.numBendSubdivisions+1;++g)for(l=0;l<b.vertices.length;++l)x(w,a.frame,b.vertices[l]),p=e.vec3.dot(w,a.rotationFrame.right),p=0<=p*a.rotationAngle,x(w,f,b.vertices[l]),c(a.index,a.frame,w,p?!1:!0)};return a}();d.MiterExtruder=r;var I={generateUV:!1},r=function(){function a(){}a.prototype.rebuildConnectingProfileGeometry=function(a,b,c){for(var e=0;e<b.vertices.length;++e)x(w,a.frame,b.vertices[e]),c(a.index,a.frame,w,u,0)};return a}();d.CapBuilder=r;var T=
function(a){function b(){return a.call(this)||this}l(b,a);b.prototype.getNumVertices=function(){return 0};b.prototype.getNumIndices=function(){return 0};b.prototype.rebuildCapGeometry=function(a,b){};b.prototype.buildTopology=function(a,b){};return b}(r);d.NoCapBuilder=T;T=function(a){function b(b,c,e){void 0===c&&(c=0);void 0===e&&(e=!1);var d=a.call(this)||this;d.profile=b;d.profilePlaneOffset=c;d.flip=e;return d}l(b,a);b.prototype.getNumVertices=function(){return this.profile.vertices.length};
b.prototype.getNumIndices=function(){return 3*this.profile.numSegments};b.prototype.rebuildConnectingProfileGeometry=function(a,b,c){var d=B;e.vec3.cross(d,a.frame.up,a.frame.right);for(var f=0;f<b.vertices.length;++f)x(w,a.frame,b.vertices[f]),c(a.index,a.frame,w,d,this.profilePlaneOffset)};b.prototype.rebuildCapGeometry=function(a,b){this.rebuildConnectingProfileGeometry(a,this.profile,b)};b.prototype.buildTopology=function(a,b){a=this.vertexBufferStart+this.profile.vertexIndices[0];for(var c=1;c<
this.profile.numSegments;++c){var e=this.vertexBufferStart+this.profile.vertexIndices[2*c+0],d=this.vertexBufferStart+this.profile.vertexIndices[2*c+1];this.flip?b(d,e,a):b(a,e,d)}};return b}(r);d.TriangulationCapBuilder=T;r=function(a){function b(b){var c=a.call(this)||this;c.flip=!1;c.breakNormals=!1;c.numSegments=3;c.profile=b.profile;c.flip=b.flip;c.breakNormals=b.breakNormals;return c}l(b,a);b.prototype.getNumVertices=function(){var a=0,a=this.profile.vertices.length*(this.numSegments-1);this.breakNormals&&
(a+=this.profile.vertices.length);return a+=this.profile.poles.length};b.prototype.getNumIndices=function(){var a;a=0+2*this.profile.numSegments*(this.numSegments-1);for(var b=0;b<this.profile.numSegments;++b)a=this.profile.poleIndices[this.profile.vertexIndices[2*b+0]]===this.profile.poleIndices[this.profile.vertexIndices[2*b+1]]?a+1:a+2;return 3*a};b.prototype.rebuildCapGeometry=function(a,b){var c=a.frame,d=B;e.vec3.cross(d,c.up,c.right);for(var f=this.flip?.5:-.5,g=0;g<this.profile.poles.length;++g)x(w,
c,this.profile.poles[g]),b(a.index,c,w,d,f);if(this.breakNormals)for(g=0;g<this.profile.vertices.length;++g)x(w,c,this.profile.vertices[g]),b(a.index,c,w,d,0);for(g=0;g<this.numSegments-1;++g)for(var k=1-(g+1)/this.numSegments,l=Math.sin(k*Math.PI*.5),k=Math.cos(k*Math.PI*.5),p=0;p<this.profile.vertices.length;++p){var m=z,q=this.profile.poles[this.profile.poleIndices[p]];h.vec2.subtract(m,this.profile.vertices[p],q);h.vec2.scale(m,m,l);h.vec2.add(m,m,q);x(w,c,m);b(a.index,c,w,d,f*k)}};b.prototype.buildTopology=
function(a,b){a=this.breakNormals?this.vertexBufferStart+this.profile.poles.length:this.firstProfileVertexIndex;for(var c=this.breakNormals?this.vertexBufferStart+this.profile.poles.length+this.profile.vertices.length:this.vertexBufferStart+this.profile.poles.length,e=0;e<this.profile.numSegments;++e){for(var d=this.profile.vertexIndices[2*e+0],f=this.profile.vertexIndices[2*e+1],g=this.vertexBufferStart+this.profile.poleIndices[d],h=this.vertexBufferStart+this.profile.poleIndices[f],k=a+d,l=a+f,
p=0;p<this.numSegments-1;++p){var m=c+p*this.profile.vertices.length+d,q=c+p*this.profile.vertices.length+f;this.flip?(b(m,l,k),b(l,m,q)):(b(k,l,m),b(q,m,l));k=m;l=q}this.flip?(b(g,l,k),g!==h&&b(g,h,l)):(b(k,l,g),g!==h&&b(l,h,g))}};return b}(r);d.RoundCapBuilder=r;r=function(){function a(a,b,c,e,d,f){void 0===f&&(f=I);this.options=f;this.numUVTotal=this.numNormalsTotal=this.numVerticesTotal=this.numExtrusionProfiles=this._triangleCount=this._extrusionVertexCount=0;this.profile=b;this.path=a;this.extruder=
c;this.startCap=e;this.endCap=d;a=this.path.vertices.length-2;this.numExtrusionProfiles=c.numProfilesPerJoin()*a+2;this.numNormalsTotal=this.numVerticesTotal=b.vertices.length*this.numExtrusionProfiles;this.startCap.vertexBufferStart=this.numVerticesTotal;b=this.startCap.getNumVertices();this.numVerticesTotal+=b;this.numNormalsTotal+=b;this.endCap.vertexBufferStart=this.numVerticesTotal;b=this.endCap.getNumVertices();this.numVerticesTotal+=b;this.numNormalsTotal+=b;this.profileRightAxisData=new Float32Array(4*
this.numVerticesTotal);this.profileUpAxisData=new Float32Array(4*this.numVerticesTotal);this.pathVertexData=new Float32Array(1*this.numVerticesTotal);this.auxVectorData=new Float32Array(3*this.numVerticesTotal);this.profile.hasUV()&&this.options.generateUV&&(this.numUVTotal=this.profile.uvs.length,this.uvData=new Float32Array(2*this.numUVTotal));this.originData=new Float32Array(3*this.path.vertices.length);this.rebuildGeometry();this.buildTopology()}a.prototype.emitVertex=function(a,b,c,d){var f=
e.vec3.dot(c,b.right);this.profileRightAxisData[4*this._extrusionVertexCount+0]=b.right[0]*f;this.profileRightAxisData[4*this._extrusionVertexCount+1]=b.right[1]*f;this.profileRightAxisData[4*this._extrusionVertexCount+2]=b.right[2]*f;c=e.vec3.dot(c,b.up);this.profileUpAxisData[4*this._extrusionVertexCount+0]=b.up[0]*c;this.profileUpAxisData[4*this._extrusionVertexCount+1]=b.up[1]*c;this.profileUpAxisData[4*this._extrusionVertexCount+2]=b.up[2]*c;this.pathVertexData[this._extrusionVertexCount]=a;
d?(a=this.path.vertices[a],this.auxVectorData[3*this._extrusionVertexCount+0]=a.rotationFrame.right[0]*a.maxStretchDistance,this.auxVectorData[3*this._extrusionVertexCount+1]=a.rotationFrame.right[1]*a.maxStretchDistance,this.auxVectorData[3*this._extrusionVertexCount+2]=a.rotationFrame.right[2]*a.maxStretchDistance):(this.auxVectorData[3*this._extrusionVertexCount+0]=0,this.auxVectorData[3*this._extrusionVertexCount+1]=0,this.auxVectorData[3*this._extrusionVertexCount+2]=0);++this._extrusionVertexCount};
a.prototype.emitCapVertex=function(a,b,c,d,f){var g=e.vec3.dot(c,b.right);this.profileRightAxisData[4*this._extrusionVertexCount+0]=b.right[0]*g;this.profileRightAxisData[4*this._extrusionVertexCount+1]=b.right[1]*g;this.profileRightAxisData[4*this._extrusionVertexCount+2]=b.right[2]*g;c=e.vec3.dot(c,b.up);this.profileUpAxisData[4*this._extrusionVertexCount+0]=b.up[0]*c;this.profileUpAxisData[4*this._extrusionVertexCount+1]=b.up[1]*c;this.profileUpAxisData[4*this._extrusionVertexCount+2]=b.up[2]*
c;this.pathVertexData[this._extrusionVertexCount]=a;this.auxVectorData[3*this._extrusionVertexCount+0]=d[0]*f;this.auxVectorData[3*this._extrusionVertexCount+1]=d[1]*f;this.auxVectorData[3*this._extrusionVertexCount+2]=d[2]*f;++this._extrusionVertexCount};a.prototype.emitTriangle=function(a,b,c){this.vertexIndices[3*this._triangleCount+0]=a;this.vertexIndices[3*this._triangleCount+1]=b;this.vertexIndices[3*this._triangleCount+2]=c;this.pathVertexIndices[3*this._triangleCount+0]=this.pathVertexData[a];
this.pathVertexIndices[3*this._triangleCount+1]=this.pathVertexData[b];this.pathVertexIndices[3*this._triangleCount+2]=this.pathVertexData[c];this.normalIndices[3*this._triangleCount+0]=a;this.normalIndices[3*this._triangleCount+1]=b;this.normalIndices[3*this._triangleCount+2]=c;++this._triangleCount};a.prototype.rebuildGeometry=function(){for(var a=this.emitVertex.bind(this),b=this.emitCapVertex.bind(this),c=this._extrusionVertexCount=0,e=this.path.vertices;c<e.length;c++){var d=e[c];this.originData[3*
d.index+0]=d.pos[0];this.originData[3*d.index+1]=d.pos[1];this.originData[3*d.index+2]=d.pos[2]}this.startCap.rebuildConnectingProfileGeometry(this.path.vertices[0],this.profile,b);for(c=1;c<this.path.vertices.length-1;++c)this.extruder.extrude(this.path.vertices[c],this.profile,a);this.endCap.rebuildConnectingProfileGeometry(this.path.vertices[this.path.vertices.length-1],this.profile,b);this.startCap.rebuildCapGeometry(this.path.vertices[0],b);this.endCap.rebuildCapGeometry(this.path.vertices[this.path.vertices.length-
1],b);if(this.profile.hasUV()&&this.options.generateUV)for(c=0;c<this.profile.uvs.length;++c)this.uvData[2*c+0]=this.profile.uvs[c],this.uvData[2*c+1]=0};a.prototype.buildTopology=function(){var a=this.emitTriangle.bind(this);this._triangleCount=0;var b=this.profile.vertices.length,c=this.profile.numSegments,e=this.numExtrusionProfiles-1,d=c*e*6;this.startCap.indexBufferStart=d;this.startCap.firstProfileVertexIndex=0;d+=this.startCap.getNumIndices();this.endCap.indexBufferStart=d;this.endCap.firstProfileVertexIndex=
b*(this.numExtrusionProfiles-1);d+=this.endCap.getNumIndices();this.vertexIndices=new Uint32Array(d);this.normalIndices=new Uint32Array(d);this.pathVertexIndices=new Uint32Array(d);this.profile.hasUV()&&this.options.generateUV&&(this.uvIndices=new Uint32Array(d));for(d=0;d<c;++d)for(var f=this.profile.vertexIndices[2*d],g=this.profile.vertexIndices[2*d+1],h=0;h<e;++h){var k=h*b+f,l=(h+1)*b+g,p=h*b+g;a(k,(h+1)*b+f,l);a(k,l,p)}this.startCap.buildTopology(this.path.vertices[0],a);this.endCap.buildTopology(this.path.vertices[this.path.vertices.length-
1],a)};a.prototype.onPathChanged=function(){this.rebuildGeometry()};return a}();d.Builder=r;r=function(){function a(a){this.builder=a}Object.defineProperty(a.prototype,"xform",{get:function(){return this.builder.path.xform},enumerable:!0,configurable:!0});a.prototype.onPathChanged=function(){this.builder.onPathChanged()};return a}();d.PathGeometry=r;var Z=function(b){function c(a){a=b.call(this,a)||this;a.vertexAttributePosition=null;a.vertexAttributeNormal=null;a.vertexAttributeColor=null;a.vertexAttributePosition=
new Float32Array(3*a.builder.numVerticesTotal);a.vertexAttributeNormal=new Float32Array(3*a.builder.numNormalsTotal);a.vertexAttributeColor=new Uint8Array(4);a.vertexAttributeColor[0]=255;a.vertexAttributeColor[1]=255;a.vertexAttributeColor[2]=255;a.vertexAttributeColor[3]=255;return a}l(c,b);c.prototype.bakeVertexColors=function(a){this.vertexAttributeColor[0]=255*a[0];this.vertexAttributeColor[1]=255*a[1];this.vertexAttributeColor[2]=255*a[2];this.vertexAttributeColor[3]=255*(3<a.length?a[3]:1)};
c.prototype.bakeVertexPositions=function(b){this.size=b;for(var c=0;c<this.builder.numVerticesTotal;++c){var d=this.builder.pathVertexData[c],f=0===d||d===this.builder.path.vertices.length-1,g=m;e.vec3.set(g,this.builder.originData[3*d+0],this.builder.originData[3*d+1],this.builder.originData[3*d+2]);d=B;e.vec3.set(d,this.builder.profileRightAxisData[4*c+0]*b[0]+this.builder.profileUpAxisData[4*c+0]*b[1],this.builder.profileRightAxisData[4*c+1]*b[0]+this.builder.profileUpAxisData[4*c+1]*b[1],this.builder.profileRightAxisData[4*
c+2]*b[0]+ +this.builder.profileUpAxisData[4*c+2]*b[1]);if(f)f=C,e.vec3.set(f,this.builder.auxVectorData[3*c+0]*b[0],this.builder.auxVectorData[3*c+1]*b[0],this.builder.auxVectorData[3*c+2]*b[0]),e.vec3.add(d,d,f);else{var f=C,h=F;e.vec3.set(f,this.builder.auxVectorData[3*c+0],this.builder.auxVectorData[3*c+1],this.builder.auxVectorData[3*c+2]);var k=e.vec3.length(f);e.vec3.normalize(f,f);var l=e.vec3.dot(d,f),p=a.sign(l);e.vec3.scale(h,f,l);e.vec3.subtract(h,d,h);Math.abs(l)>k&&(e.vec3.scale(f,f,
k*p),e.vec3.add(d,f,h))}this.vertexAttributePosition[3*c+0]=g[0]+d[0];this.vertexAttributePosition[3*c+1]=g[1]+d[1];this.vertexAttributePosition[3*c+2]=g[2]+d[2]}};c.prototype.computeNormals=function(){for(var a=this.builder.vertexIndices,b=this.vertexAttributePosition,c=a.length/3,d=0;d<this.vertexAttributeNormal.length;++d)this.vertexAttributeNormal[d]=0;for(var d=this.builder.profile.numSegments*(this.builder.numExtrusionProfiles-1)*2,f=0;f<d;f+=2){var g=this.builder.vertexIndices[3*f+0],h=this.builder.vertexIndices[3*
f+1],k=this.builder.vertexIndices[3*f+2],l=this.builder.vertexIndices[3*f+5];e.vec3.set(B,b[3*g+0],b[3*g+1],b[3*g+2]);e.vec3.set(C,b[3*h+0],b[3*h+1],b[3*h+2]);e.vec3.set(F,b[3*k+0],b[3*k+1],b[3*k+2]);e.vec3.subtract(C,C,B);e.vec3.subtract(F,F,B);e.vec3.normalize(C,C);e.vec3.normalize(F,F);e.vec3.cross(E,C,F);this.vertexAttributeNormal[3*g+0]+=E[0];this.vertexAttributeNormal[3*g+1]+=E[1];this.vertexAttributeNormal[3*g+2]+=E[2];this.vertexAttributeNormal[3*h+0]+=E[0];this.vertexAttributeNormal[3*h+
1]+=E[1];this.vertexAttributeNormal[3*h+2]+=E[2];this.vertexAttributeNormal[3*k+0]+=E[0];this.vertexAttributeNormal[3*k+1]+=E[1];this.vertexAttributeNormal[3*k+2]+=E[2];this.vertexAttributeNormal[3*l+0]+=E[0];this.vertexAttributeNormal[3*l+1]+=E[1];this.vertexAttributeNormal[3*l+2]+=E[2]}for(;f<c;++f)g=a[3*f+0],h=a[3*f+1],k=a[3*f+2],e.vec3.set(B,b[3*g+0],b[3*g+1],b[3*g+2]),e.vec3.set(C,b[3*h+0],b[3*h+1],b[3*h+2]),e.vec3.set(F,b[3*k+0],b[3*k+1],b[3*k+2]),e.vec3.subtract(C,C,B),e.vec3.subtract(F,F,
B),e.vec3.normalize(C,C),e.vec3.normalize(F,F),e.vec3.cross(E,C,F),this.vertexAttributeNormal[3*g+0]+=E[0],this.vertexAttributeNormal[3*g+1]+=E[1],this.vertexAttributeNormal[3*g+2]+=E[2],this.vertexAttributeNormal[3*h+0]+=E[0],this.vertexAttributeNormal[3*h+1]+=E[1],this.vertexAttributeNormal[3*h+2]+=E[2],this.vertexAttributeNormal[3*k+0]+=E[0],this.vertexAttributeNormal[3*k+1]+=E[1],this.vertexAttributeNormal[3*k+2]+=E[2];a=this.vertexAttributeNormal.length/3;for(d=0;d<a;++d)e.vec3.set(B,this.vertexAttributeNormal[3*
d+0],this.vertexAttributeNormal[3*d+1],this.vertexAttributeNormal[3*d+2]),e.vec3.normalize(B,B),this.vertexAttributeNormal[3*d+0]=B[0],this.vertexAttributeNormal[3*d+1]=B[1],this.vertexAttributeNormal[3*d+2]=B[2]};c.prototype.createGeometryData=function(){var a={};a[v.VertexAttrConstants.POSITION]=this.builder.vertexIndices;a[v.VertexAttrConstants.NORMAL]=this.builder.normalIndices;this.vertexAttributeColor&&(a[v.VertexAttrConstants.COLOR]=new Uint32Array(a[v.VertexAttrConstants.POSITION].length));
var b={};b[v.VertexAttrConstants.POSITION]={size:3,data:this.vertexAttributePosition};b[v.VertexAttrConstants.NORMAL]={size:3,data:this.vertexAttributeNormal};this.vertexAttributeColor&&(b[v.VertexAttrConstants.COLOR]={size:4,data:this.vertexAttributeColor});return new p(b,a,p.DefaultOffsets,"triangle")};c.prototype.onPathChanged=function(){b.prototype.onPathChanged.call(this);this.bakeVertexPositions(this.size);this.computeNormals()};c.prototype.intersect=function(a,b,c){var e=this.builder.vertexIndices;
t.intersectTriangles(a,b,0,e.length/3,e,{size:3,offsetIdx:0,strideIdx:3,data:this.vertexAttributePosition},void 0,c)};return c}(r);d.StaticPathGeometry=Z;r=function(a){function b(b,c,e,d){var f=a.call(this,b)||this;f.sizeAttributeValue=c;f.colorAttributeValue=e;f.opacityAttributeValue=d;f.vvData=null;f.data=null;f.baked=new Z(b);f.baked.bakeVertexPositions([1,1]);f.baked.computeNormals();f.data=new Float32Array(9*f.builder.numVerticesTotal);for(var g=0;g<f.builder.numVerticesTotal;++g){var h=9*g;
f.data[h+0]=b.profileRightAxisData[4*g+0];f.data[h+1]=b.profileRightAxisData[4*g+1];f.data[h+2]=b.profileRightAxisData[4*g+2];f.data[h+3]=b.profileUpAxisData[4*g+0];f.data[h+4]=b.profileUpAxisData[4*g+1];f.data[h+5]=b.profileUpAxisData[4*g+2];f.data[h+6]=b.auxVectorData[3*g+0];f.data[h+7]=b.auxVectorData[3*g+1];f.data[h+8]=b.auxVectorData[3*g+2]}f.vvData=new Float32Array(4*f.builder.path.vertices.length);for(g=0;g<f.builder.path.vertices.length;++g)f.vvData[4*g+0]=c,f.vvData[4*g+1]=e,f.vvData[4*g+
2]=d,f.vvData[4*g+3]=0===g||g===f.builder.path.vertices.length-1?1:0;return f}l(b,a);b.prototype.createGeometryData=function(){var a={};a[y.VertexAttrConstants.POSITION]=this.builder.pathVertexIndices;a[y.VertexAttrConstants.NORMAL]=this.builder.normalIndices;a[y.VertexAttrConstants.PATHGEOMETRYINFO]=this.builder.vertexIndices;a[y.VertexAttrConstants.FEATUREVALUE]=this.builder.pathVertexIndices;var b={};b[y.VertexAttrConstants.POSITION]={size:3,data:this.builder.originData};b[y.VertexAttrConstants.NORMAL]=
{size:3,data:this.baked.vertexAttributeNormal};b[y.VertexAttrConstants.PATHGEOMETRYINFO]={size:9,data:this.data};b[y.VertexAttrConstants.FEATUREVALUE]={size:4,data:this.vvData};return new p(b,a,p.DefaultOffsets,"triangle")};return b}(r);d.FastUpdatePathGeometry=r})(x||(x={}));var w=c.vec3f64.create(),m=c.vec3f64.create(),u=c.vec3f64.fromValues(0,0,0),z=g.vec2f64.create(),B=c.vec3f64.create(),C=c.vec3f64.create(),F=c.vec3f64.create(),E=c.vec3f64.create(),N=c.vec3f64.create(),L=x.makeFrame(),K=x.makeFrame(),
O=b.mat4f64.create();return x})},"esri/views/3d/webgl-engine/shaders/PathPrograms":function(){define(["require","exports","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",SYMBOLCOLOR:"symbolColor",COMPONENTINDEX:"componentIndex",FEATUREVALUE:"featureValue",PATHGEOMETRYINFO:"pathGeometryInfo"};d.vertexAttributeLocations={position:0,
normal:1,normalCompressed:1,uv0:2,symbolColor:5,componentIndex:5,featureValue:6,pathGeometryInfo:8};var k=function(b){return l.glslifyDefineMap({SYMBOLVERTEXCOLORS:b.symbolColors,FLIPV:b.flipV,DOUBLESIDED:b.doubleSided,WINDINGORDERDOUBLESIDED:b.windowOrderDoubleSided,RECEIVE_SHADOWS:b.receiveShadows,RECEIVE_SSAO:b.receiveSSAO,VV_SIZE:b.vvSize,VV_COLOR:b.vvColor,VV_OPACITY:b.vvOpacity,SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,SLICE:b.slice,COMPRESSED_NORMALS:b.compressedNormals,COMPONENTCOLORS:b.componentColor,
TRANSPARENCY_DISCARD:b.transparencyDiscard,BIAS_SHADOWMAP:b.shadowMap,WIREFRAME:b.wireframe})};d.colorPass={name:"path-color",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/pathMaterial/colorPass.vert"),fragmentShader:k(b)+n.resolveIncludes("materials/pathMaterial/colorPass.frag")}},attributes:d.vertexAttributeLocations};d.depthPass={name:"path-depth",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/pathMaterial/depthPass.vert"),fragmentShader:k(b)+
n.resolveIncludes("materials/pathMaterial/depthPass.frag")}},attributes:d.vertexAttributeLocations};d.normalPass={name:"path-normal",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/pathMaterial/normalPass.vert"),fragmentShader:k(b)+n.resolveIncludes("materials/pathMaterial/normalPass.frag")}},attributes:d.vertexAttributeLocations};d.highlightPass={name:"path-highlight",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("materials/pathMaterial/highlightPass.vert"),
fragmentShader:k(b)+n.resolveIncludes("materials/pathMaterial/highlightPass.frag")}},attributes:d.vertexAttributeLocations}})},"esri/views/3d/webgl-engine/materials/PathMaterial":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/mathUtils ../../../../geometry/support/aaBoundingBox ../../support/buffer/BufferView ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/Util ./VisualVariableMaterialParameters ./internal/bufferWriters ./internal/MaterialUtil ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/PathPrograms ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x){function w(a,b){b.vvSizeEnabled&&(a.setUniform3fv("vvSizeMinSize",b.vvSizeMinSize),a.setUniform3fv("vvSizeMaxSize",b.vvSizeMaxSize),a.setUniform3fv("vvSizeOffset",b.vvSizeOffset),a.setUniform3fv("vvSizeFactor",b.vvSizeFactor));b.vvColorEnabled&&(a.setUniform1fv("vvColorValues",b.vvColorValues),a.setUniform4fv("vvColorColors",b.vvColorColors));b.vvOpacityEnabled&&(a.setUniform1fv("vvOpacityValues",b.vvOpacityValues),a.setUniform1fv("vvOpacityOpacities",
b.vvOpacityOpacities))}var m=f.assert;r=function(a){function c(b,e){e=a.call(this,e)||this;e.supportsEdges=!0;e.params=v.copyParameters(b,E);e.vertexBufferLayout=c.getVertexBufferLayout(e.params);return e}l(c,a);c.prototype.isVisibleInPass=function(a){return 3===a?this.params.castShadows:!0};c.prototype.isVisible=function(){var b=this.params;if(!a.prototype.isVisible.call(this)||0===b.layerOpacity)return!1;var c=b.symbolColors,e="replace"===b.colorMixMode,d=0<b.opacity,f=b.externalColor&&0<b.externalColor[3];
return b.vvColorEnabled||c?e?!0:d:e?f:d};c.prototype.setParameterValues=function(a){var b=this.params,c;for(c in a)b[c]=a[c];this.notifyDirty("matChanged")};c.prototype.getParameters=function(){return this.params};c.prototype.intersect=function(a,c,e,d,f,g,h,l){if(a.metadata){c=a.metadata.pathGeometry;e=[this.params.size[0],this.params.size[1]];if(this.params.vvSizeEnabled){l=this.params.vvSizeOffset;var p=this.params.vvSizeFactor,m=this.params.vvSizeMinSize,q=this.params.vvSizeMaxSize,u=c.sizeAttributeValue;
e[0]*=k.clamp(l[0]+u*p[0],m[0],q[0]);e[1]*=k.clamp(l[1]+u*p[1],m[1],q[1])}l=Math.max(e[0],e[1]);a=b.fromValues(a.boundingInfo.bbMin[0]-l,a.boundingInfo.bbMin[1]-l,a.boundingInfo.bbMin[2]-l,a.boundingInfo.bbMax[0]+l,a.boundingInfo.bbMax[1]+l,a.boundingInfo.bbMax[2]+l);l=[g[0]-f[0],g[1]-f[1],g[2]-f[2]];p=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);v.intersectAabbInvDir(a,f,[p/l[0],p/l[1],p/l[2]],d.tolerance)&&(c.baked.size&&c.baked.size[0]===e[0]&&c.baked.size[1]===e[1]||c.baked.bakeVertexPositions(e),
c.baked.intersect(f,g,h))}};c.prototype.createBufferWriter=function(){return new N(this.vertexBufferLayout)};c.prototype.createRenderer=function(a,b){return new t(a,b,this,y.vertexAttributeLocations)};c.prototype.getGLMaterials=function(){return{color:u,depth:z,depthShadowMap:this.params.castShadows?B:null,normal:C,highlight:F}};c.getVertexBufferLayout=function(a){var b=g.newLayout().vec3f(y.VertexAttrConstants.POSITION).vec3f(y.VertexAttrConstants.NORMAL),b=b.mat3f(y.VertexAttrConstants.PATHGEOMETRYINFO);
if(a.vvColorEnabled||a.vvSizeEnabled||a.vvOpacityEnabled)b=b.vec4f(y.VertexAttrConstants.FEATUREVALUE);a.symbolColors&&(b=b.vec4u8(y.VertexAttrConstants.SYMBOLCOLOR));return b};return c}(c);var u=function(a){function b(b,c,e){e=this;var d=b.getParameters();e=a.call(this,b,c)||this;e.params=v.copyParameters(d);e.slot=e.params.transparent?7:5;e._createPrograms();e.selectPipeline();return e}l(b,a);b.prototype._createPrograms=function(){var a=this;this.programs=q.BindParametersMap.create(this.params,
function(b){return a._createProgram(b)})};b.prototype._createProgram=function(a){var b=this.params;return this.programRep.getProgram(y.colorPass,{symbolColors:b.symbolColors,flipV:b.flipV,doubleSided:b.doubleSided&&"normal"===b.doubleSidedType,windowOrderDoubleSided:b.doubleSided&&"winding-order"===b.doubleSidedType,receiveShadows:a.receiveShadows,receiveSSAO:a.receiveSSAO,vvSize:b.vvSizeEnabled,vvColor:b.vvColorEnabled,vvOpacity:b.vvOpacityEnabled,verticalOffset:null!==b.verticalOffset,screenSizePerspective:null!==
b.screenSizePerspective,slice:b.slicePlaneEnabled,compressedNormals:b.compressedNormals,transparencyDiscard:b.transparent,wireframe:b.wireframe})};b.prototype.selectPipeline=function(){var a=this.params;this.pipelineState=x.makePipelineState({blending:a.transparent&&x.separateBlendingParams(770,1,771,771),culling:K(a),polygonOffset:a.polygonOffset&&L,depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.beginSlot=function(a){return a===this.slot};
b.prototype.getProgram=function(){return this.program||this.getPrograms()[0]};b.prototype.getPrograms=function(){return q.BindParametersMap.programs(this.programs)};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.slot=this.params.transparent?7:5;this._createPrograms();this.selectPipeline()};b.prototype.bind=function(a,b){var c=this.params,e=this.program=q.BindParametersMap.lookup(this.programs,b);a.bindProgram(e);a.setPipelineState(this.pipelineState);
e.setUniform3fv("size",c.size);e.setUniform3fv("ambient",c.ambient);e.setUniform3fv("diffuse",c.diffuse);e.setUniform3fv("specular",c.specular);e.setUniform4fv("externalColor",c.externalColor);e.setUniform1i("colorMixMode",v.colorMixModes[c.colorMixMode]);e.setUniform1f("opacity",c.opacity);e.setUniform1f("layerOpacity",c.layerOpacity);v.bindVerticalOffset(c.verticalOffset,b,e);v.bindScreenSizePerspective(c.screenSizePerspective,e);w(e,c)};b.prototype.release=function(a,b){};b.prototype.bindView=
function(a,b){a=this.program=q.BindParametersMap.lookup(this.programs,b);var c=this.params,e=b.origin;v.bindView(e,b.view,a);v.bindCamPos(e,b.viewInvTransp,a);c.slicePlaneEnabled&&v.bindSlicePlane(e,b.slicePlane,a);b.shadowMappingEnabled&&b.shadowMap.bindView(a,e)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(e),
z=function(a){function b(b,c,e,d){void 0===d&&(d=!1);b=a.call(this,b,c)||this;b.biased=d;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(y.depthPass,{flipV:a.flipV,shadowMap:this.biased,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==
a.screenSizePerspective,slice:a.slicePlaneEnabled,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({culling:K(a),polygonOffset:a.polygonOffset&&L,depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,
b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform3fv("size",e.size);c.setUniform2fv("nearFar",b.nearFar);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,c);w(c,e)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params,e=b.origin;v.bindView(e,b.view,a);c.slicePlaneEnabled&&v.bindSlicePlane(b.origin,b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,
b.viewInvTransp,a)};b.prototype.bindInstance=function(a,b){this.program.setUniformMatrix4fv("model",b.transformation)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(e),B=function(a){function b(b,c,e){return a.call(this,b,c,e,!0)||this}l(b,a);return b}(z),C=function(a){function b(b,c,e){b=a.call(this,b,c)||this;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=
function(){var a=this.params;this.program=this.programRep.getProgram(y.normalPass,{flipV:a.flipV,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,compressedNormals:a.compressedNormals,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({polygonOffset:a.polygonOffset&&L,culling:K(a),depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,
colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform3fv("size",e.size);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,c);
w(c,e)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params,e=b.origin;v.bindView(e,b.view,a);a.setUniformMatrix4fv("viewNormal",b.viewInvTransp);c.slicePlaneEnabled&&v.bindSlicePlane(b.origin,b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,b.viewInvTransp,a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=
function(){return this.params.wireframe?1:4};return b}(e),F=function(a){function b(b,c,e){b=a.call(this,b,c)||this;b.updateParameters();return b}l(b,a);b.prototype.beginSlot=function(a){return a===this.slot};b.prototype.getProgram=function(){return this.program};b.prototype.selectProgram=function(){var a=this.params;this.program=this.programRep.getProgram(y.highlightPass,{flipV:a.flipV,vvSize:a.vvSizeEnabled,vvColor:a.vvColorEnabled,vvOpacity:a.vvOpacityEnabled,verticalOffset:null!==a.verticalOffset,
screenSizePerspective:null!==a.screenSizePerspective,slice:a.slicePlaneEnabled,transparencyDiscard:a.transparent});this.pipelineState=x.makePipelineState({polygonOffset:a.polygonOffset&&L,culling:K(a),depthTest:{func:513},depthWrite:x.defaultDepthWriteParams,colorWrite:x.defaultColorWriteParams})};b.prototype.selectSlot=function(){this.slot=this.params.transparent?7:5};b.prototype.updateParameters=function(){this.params=v.copyParameters(this.material.getParameters());this.selectProgram();this.selectSlot()};
b.prototype.bind=function(a,b){var c=this.program,e=this.params;a.bindProgram(c);a.setPipelineState(this.pipelineState);c.setUniform3fv("size",e.size);v.bindVerticalOffset(e.verticalOffset,b,c);v.bindScreenSizePerspective(e.screenSizePerspective,c);w(c,e)};b.prototype.release=function(a){};b.prototype.bindView=function(a,b){a=this.program;var c=this.params,e=b.origin;v.bindView(e,b.view,a);c.slicePlaneEnabled&&v.bindSlicePlane(b.origin,b.slicePlane,a);c.screenSizePerspective&&v.bindCamPos(e,b.viewInvTransp,
a)};b.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};b.prototype.getDrawMode=function(){return this.params.wireframe?1:4};return b}(e),E=n({size:[1,1,1],wireframe:!1,ambient:[.2,.2,.2],diffuse:[.8,.8,.8],specular:[0,0,0],externalColor:[1,1,1,1],colorMixMode:"multiply",opacity:1,layerOpacity:1,symbolColors:!1,flipV:!1,doubleSided:!1,doubleSidedType:"normal",cullFace:void 0,compressedNormals:!1,
receiveSSAO:!0,castShadows:!0,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,transparent:!1,polygonOffset:!1},a.Default),N=function(){function a(a){this.vertexBufferLayout=a}a.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[y.VertexAttrConstants.POSITION].length};a.prototype.write=function(a,b,c,e){if(y.VertexAttrConstants.PATHGEOMETRYINFO in b.vertexAttr){var d=b.vertexAttr[y.VertexAttrConstants.PATHGEOMETRYINFO],
f=b.indices[y.VertexAttrConstants.PATHGEOMETRYINFO];m(9===d.size);var g=c.getField(y.VertexAttrConstants.PATHGEOMETRYINFO,h.BufferViewMat3f);if(g)p.writeBufferMat3f(f,d.data,g,e);else throw Error("unable to acquire view for "+y.VertexAttrConstants.PATHGEOMETRYINFO);}if(this.vertexBufferLayout.hasField(y.VertexAttrConstants.FEATUREVALUE)&&y.VertexAttrConstants.FEATUREVALUE in b.vertexAttr)if(d=b.vertexAttr[y.VertexAttrConstants.FEATUREVALUE],f=b.indices[y.VertexAttrConstants.FEATUREVALUE],m(4===d.size),
g=c.getField(y.VertexAttrConstants.FEATUREVALUE,h.BufferViewVec4f))p.writeBufferVec4(f,d.data,g,e);else throw Error("unable to acquire view for "+y.VertexAttrConstants.FEATUREVALUE);p.writeDefaultAttributes(b,this.vertexBufferLayout,a.transformation,a.invTranspTransformation,c,e)};return a}(),L={factor:2,units:2},K=function(a){var b;b=a.slicePlaneEnabled?!1:a.cullFace?"none"!==a.cullFace:!a.transparent&&!a.doubleSided;return b&&{face:"front"===a.cullFace?1028:1029,mode:2305}};return r})},"esri/views/3d/layers/graphics/Graphics3DPolygonFillSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ./constants ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ./lineUtils ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Util ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function d(b,c,e,d){b=a.call(this,b,c,e,d)||this;b._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0};return b}n(d,a);d.prototype.doLoad=function(){return k(this,void 0,void 0,function(){return l(this,function(a){this._prepareFillResources();this._prepareOutlineResources();return[2]})})};d.prototype._prepareFillResources=function(){var a=this._getStageIdHint(),
b=h.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacityAndColor(b),b={color:b,transparent:1>b[3]||this._isPropertyDriven("opacity"),polygonOffset:!1,vertexColors:!0,slicePlaneEnabled:this._context.slicePlaneEnabled};this._material=new K(b,a+"_colormat");this._context.stage.add(B.ModelContentType.MATERIAL,this._material)};d.prototype._prepareOutlineResources=function(){var a=this.symbolLayer.outline;if(this._hasOutline=!!(h.isSome(a)&&a.size&&0<a.size&&h.isSome(a.color))){var b=this._getStageIdHint()+
"_outline",c=this._getOutlineColor(),a=g.pt2px(h.isSome(a)?a.size:0),e=this._context.slicePlaneEnabled;this._outlineMaterial=1.5<=a?new I({width:a,color:c,polygonOffset:!0,slicePlaneEnabled:e},b+"_ribbonlinemat"):new O({color:c,slicePlaneEnabled:e},b+"_nativelinemat");this._context.stage.add(B.ModelContentType.MATERIAL,this._outlineMaterial)}};d.prototype.destroy=function(){a.prototype.destroy.call(this);this._material&&(this._context.stage.remove(B.ModelContentType.MATERIAL,this._material.id),this._material=
null);this._outlineMaterial&&(this._context.stage.remove(B.ModelContentType.MATERIAL,this._outlineMaterial.id),this._outlineMaterial=null)};d.prototype.createGraphics3DGraphic=function(a){var b=a.graphic,c=b.geometry.type;if("polyline"!==c&&"polygon"!==c&&"extent"!==c)return this.logger.warn("unsupported geometry type for fill symbol: "+c),null;if(!this._validateGeometry(b.geometry))return null;c="graphic"+b.uid;a=this._getVertexOpacityAndColor(a.renderingInfo,Uint8Array,255);var e=this.getGraphicElevationContext(b);
return"on-the-ground"===e.mode?this._createAsOverlay(b,a,e,c):this._createAs3DShape(b,a,e,c,b.uid)};d.prototype.layerOpacityChanged=function(){var a=this._material.getColor(),b=h.get(this.symbolLayer,"material","color"),b=this._getCombinedOpacity(b);this._material.setColor([a[0],a[1],a[2],b]);this._material.setTransparent(1>b||this._isPropertyDriven("opacity"));this._outlineMaterial&&(a=this._outlineMaterial.getColor(),a={color:[a[0],a[1],a[2],this._getOutlineOpacity()]},this._outlineMaterial.setParameterValues(a));
return!0};d.prototype.layerElevationInfoChanged=function(a,b,c){var e=this._elevationContext.mode;if(null==c||null==e)return!1;if("on-the-ground"===c&&"on-the-ground"===e)return!0;if(c!==e&&("on-the-ground"===c||"on-the-ground"===e))return!1;var d=w.needsElevationUpdates2D(e);return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return d})};d.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});this._outlineMaterial&&
this._outlineMaterial.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};d.prototype.pixelRatioChanged=function(a,b){return!0};d.prototype.setDrawOrder=function(a,b,c){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a+b/2,c.add(this._material.id));this._outlineMaterial&&(this._outlineMaterial.renderPriority=a,c.add(this._outlineMaterial.id))};d.prototype._createAs3DShape=function(a,b,c,e,d){var f=this._getPolyGeometry(a);a=f.rings;var g=
this._getOutlineGeometry(f,a),f=w.getGeometryVertexData3D(g,f.hasZ,f.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,c);P.idHint=e;P.color=b;P.data=f;var h;this._hasOutline&&(h=new f.vertexData.constructor(f.vertexData));P.outNum=0;P.outGeometries=[];P.outTransforms=[];P.outMaterials=[];this._createAs3DShapeFill(P);P.data.vertexData=h;this._createAs3DShapeOutline(P);this._logGeometryCreationWarnings(P.data,a,"rings","FillSymbol3DLayer");
if(0===P.outNum)return null;b=new E({geometries:P.outGeometries,materials:P.outMaterials,transformations:P.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:d},idHint:e});b=new x(this,b,P.outGeometries,null,null,t.perVertexElevationAligner,c);b.alignedTerrainElevation=f.terrainElevation;b.needsElevationUpdates=w.needsElevationUpdates2D(c.mode);return b};d.prototype._createAs3DShapeFill=function(a){for(var b=a.data.geometryData.polygons,d=a.data.eleVertexData,g=a.data.vertexData,
h=function(h){var l=b[h];h=l.count;var p=l.index;if(k._context.clippingExtent&&(w.computeBoundingBox(d,p,h,H),w.boundingBoxClipped(H,k._context.clippingExtent)))return"continue";var m=new Float64Array(d.buffer,3*p*d.BYTES_PER_ELEMENT,3*h),q=new Float64Array(g.buffer,3*p*g.BYTES_PER_ELEMENT,3*h),l=l.holeIndices.map(function(a){return a-p}),l=e(m,l,3);if(0===l.length)return"continue";w.applyOrigin(g,p,h,S);h=k._createFillGeometry(l,0,q,m,a.color);h=new C(h,a.idHint);h.singleUse=!0;m=f.mat4f64.create();
c.mat4.translate(m,m,S);a.outGeometries.push(h);a.outMaterials.push(k._material);a.outTransforms.push(m);a.outNum++},k=this,l=0;l<b.length;++l)h(l)};d.prototype._createAs3DShapeOutline=function(a){if(this._hasOutline)for(var b=a.data.geometryData.outlines,e=a.data.eleVertexData,d=a.data.vertexData,g=0;g<b.length;++g){var h=b[g],k=h.index,l=h.count;if(this._context.clippingExtent&&(w.computeBoundingBox(e,k,l,H),w.boundingBoxClipped(H,this._context.clippingExtent)))continue;w.applyOrigin(d,k,l,S);h=
new Float64Array(e.buffer,3*k*e.BYTES_PER_ELEMENT,3*l);k=new Float64Array(d.buffer,3*k*d.BYTES_PER_ELEMENT,3*l);k=z.createPolylineGeometry(k,h,!1,v.WHITE,1);k=new C(k,a.idHint+"outline"+g);k.singleUse=!0;h=f.mat4f64.create();c.mat4.translate(h,h,S);a.outGeometries.push(k);a.outMaterials.push(this._outlineMaterial);a.outTransforms.push(h);a.outNum++}};d.prototype._createAsOverlay=function(a,b,c,e){var d=this._getPolyGeometry(a);c=d.rings;var f=this._getOutlineGeometry(d,c);this._material.renderPriority=
this._symbolLayerOrder+this._symbolLayerOrderDelta/2;this._hasOutline&&(this._outlineMaterial.renderPriority=this._symbolLayerOrder);d=w.getGeometryVertexDataDraped(f,d.spatialReference,this._context.overlaySR);P.idHint=e;P.color=b;P.data=d;var g;this._hasOutline&&(g=new d.vertexData.constructor(d.vertexData));P.outNum=0;P.outGeometries=[];P.outBoundingBox=q.empty();P.layerUid=this._context.layer.uid;P.graphicsUid=a.uid;this._createAsOverlayFill(P);P.data.vertexData=g;this._createAsOverlayOutline(P);
this._logGeometryCreationWarnings(P.data,c,"rings","FillSymbol3DLayer");return 0<P.outNum?new y(this,P.outGeometries,P.outBoundingBox):null};d.prototype._createAsOverlayFill=function(a){for(var b=a.data.vertexData,d=a.data.geometryData.polygons,g=function(g){var k=d[g];g=k.count;var l=k.index,p=new Float64Array(b.buffer,3*l*b.BYTES_PER_ELEMENT,3*g),k=k.holeIndices.map(function(a){return a-l}),p=e(p,k,3);if(0===p.length)return"continue";w.computeBoundingBox(b,l,g,H);if(w.boundingBoxClipped(H,h._context.clippingExtent))return"continue";
q.expand(a.outBoundingBox,H);w.applyOrigin(b,l,g,S);w.setZ(b,l,g,h._getDrapedZ());g=f.mat4f64.create();c.mat4.translate(g,g,S);p=h._createFillGeometry(p,l,b,null,a.color);k=new N(p);k.data.layerUid=a.layerUid;k.data.graphicUid=a.graphicsUid;k.material=h._material;var m=H;k.center=[.5*(m[0]+m[3]),.5*(m[1]+m[4]),0];k.bsRadius=.5*Math.sqrt((m[3]-m[0])*(m[3]-m[0])+(m[4]-m[1])*(m[4]-m[1]));k.transformation=g;k.name=a.idHint;k.uniqueName=a.idHint+"#"+p.id;a.outGeometries.push(k);a.outNum++},h=this,k=0;k<
d.length;++k)g(k)};d.prototype._createAsOverlayOutline=function(a){if(this._hasOutline)for(var b=a.data.vertexData,e=a.data.geometryData.outlines,d=0;d<e.length;++d){var g=e[d],h=g.index,g=g.count;w.computeBoundingBox(b,h,g,H);if(!w.boundingBoxClipped(H,this._context.clippingExtent)){q.expand(a.outBoundingBox,H);w.applyOrigin(b,h,g,S);w.setZ(b,h,g,this._getDrapedZ());g=new Float64Array(b.buffer,3*h*b.BYTES_PER_ELEMENT,3*g);h=f.mat4f64.create();c.mat4.translate(h,h,S);var g=z.createPolylineGeometry(g,
null,!0,v.WHITE,1),k=new N(g);k.data.layerUid=a.layerUid;k.data.graphicUid=a.graphicsUid;k.material=this._outlineMaterial;var l=H;k.center=[.5*(l[0]+l[3]),.5*(l[1]+l[4]),0];k.bsRadius=.5*Math.sqrt((l[3]-l[0])*(l[3]-l[0])+(l[4]-l[1])*(l[4]-l[1]));k.transformation=h;k.name=a.idHint+"outline";k.uniqueName=a.idHint+"outline#"+g.id;a.outGeometries.push(k);a.outNum++}}};d.prototype._getOutlineGeometry=function(a,b){return b};d.prototype._getOutlineOpacity=function(){var a=this._getLayerOpacity(),b=h.get(this.symbolLayer,
"outline","color");return a*(h.isSome(b)?b.a:0)};d.prototype._getOutlineColor=function(){var a=h.get(this.symbolLayer,"outline","color"),c=this._getOutlineOpacity();return u.mixinColorAndOpacity(h.isSome(a)?b.toUnitRGB(a):null,c)};d.prototype._getPolyGeometry=function(a){a=a.geometry;return"extent"===a.type?p.fromExtent(a):a};d.prototype._createFillGeometry=function(a,b,c,e,d){for(var f=a.length,g=new Uint32Array(f),h=new Uint32Array(f),k=0;k<f;k++)g[k]=a[k]+b,h[k]=0;a={};b={};a[L.VertexAttrConstants.POSITION]=
g;a[L.VertexAttrConstants.COLOR]=h;b[L.VertexAttrConstants.POSITION]={size:3,data:c};b[L.VertexAttrConstants.COLOR]={size:4,data:d};e&&(b.mapPos={size:3,data:e},a.mapPos=g);return new F(b,a)};return d}(m.default);d.Graphics3DPolygonFillSymbolLayer=r;var H=q.create(),S=a.vec3f64.create(),P={idHint:null,color:null,data:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};d.default=r})},"esri/views/3d/layers/graphics/Graphics3DTextSymbolLayer":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../symbols/callouts/calloutUtils ./ElevationAligners ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ./graphicUtils ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/TextRenderParameters ../../webgl-engine/lib/TextTexture ../../webgl-engine/materials/HUDMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m){function u(a,b,c){a&&a.forEach(function(a){var e=b(a);e&&c(e,a.graphic)})}Object.defineProperty(d,"__esModule",{value:!0});var z=[0,0,1];r=function(d){function q(a,b,c,e){a=d.call(this,a,b,c,e)||this;a._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1};return a}n(q,d);q.prototype.doLoad=function(){return k(this,void 0,void 0,function(){var a;return l(this,function(c){if(!this._isPropertyDriven("size")&&(a=v.validateSymbolLayerSize(this.symbolLayer.size)))throw new b("graphics3dtextsymbollayer:invalid-size",
a);this._createTextRenderParameters();return[2]})})};q.prototype._createTextRenderParameters=function(){this._textRenderParameters=x.default.fromSymbol(this.symbolLayer,this._context.layerView.view.pixelRatio)};q.prototype.destroy=function(){d.prototype.destroy.call(this)};q.prototype.createGraphics3DGraphic=function(a){a=a.graphic;var b=p.placePointOnGeometry(a.geometry);if(h.isNone(b))return this.logger.warn("unsupported geometry type for text symbol: "+a.geometry.type),null;var e=this.symbolLayer.text;
if(!e)return null;var d=c.isCalloutSupport(this.symbol)&&this.symbol.hasVisibleVerticalOffset()?this.symbol:null;return this._createAs3DShape(a,b,e,d)};q.prototype.createLabel=function(a,b,c,e){a=a.graphic;var d=p.placePointOnGeometry(a.geometry);if(h.isNone(d))return this.logger.warn("unsupported geometry type for label: "+a.geometry.type),null;var f=b.text;return f?this._createAs3DShape(a,d,f,b,b,c,e):null};q.prototype.getGraphicElevationContext=function(a,b){void 0===b&&(b=0);a=d.prototype.getGraphicElevationContext.call(this,
a);a.addOffsetRenderUnits(b);return a};q.prototype.layerOpacityChanged=function(){this.logger.warn("layer opacity change not yet implemented in Graphics3DTextSymbolLayer");return!1};q.prototype.layerElevationInfoChanged=function(a,b){var c=this;u(a,b,function(a,b){c.updateGraphicElevationContext(b,a)});return!0};q.prototype.slicePlaneEnabledChanged=function(a,b){var c=this;u(a,b,function(a){var b=0;for(a=a.stageObject.geometryRecords;b<a.length;b++)a[b].material.setParameterValues({slicePlaneEnabled:c._context.slicePlaneEnabled})});
return!0};q.prototype.pixelRatioChanged=function(a,b){return!1};q.prototype.updateGraphicElevationContext=function(a,b){a=this.getGraphicElevationContext(a,b.metadata.elevationOffset);b.elevationContext.set(a);b.needsElevationUpdates=p.needsElevationUpdates2D(a.mode)||"absolute-height"===a.mode};q.prototype._defaultElevationInfoNoZ=function(){return B};q.prototype._createAs3DShape=function(b,c,d,k,l,q,u){void 0===l&&(l=C);var n=this.getGraphicElevationContext(b,l.elevationOffset),x=this._context.layer.id+
"_label_"+b.uid,B="polyline"===h.get(b.geometry,"type"),r=b.uid;b=this._context.stage.renderView.renderingContext;var F=v.namedAnchorToHUDMaterialAnchorPos[l.anchor in v.namedAnchorToHUDMaterialAnchorPos?l.anchor:"center"];b=h.isNone(u)?new w(b,d,this._textRenderParameters,x):null;F={occlusionTest:!0,screenOffset:l.screenOffset,anchorPos:F,polygonOffset:!0,color:[1,1,1,1],centerOffsetUnits:l.centerOffsetUnits,debugDrawBorder:l.debugDrawBorder,drawInSecondSlot:!0};h.isSome(b)&&(F.textureId=b.id,F.texCoordScale=
b.texcoordScale);h.isSome(u)&&(F.textureId=u.textureId);if(h.isSome(k)&&h.isSome(k.verticalOffset)){k=k.verticalOffset;var E=k.minWorldLength,I=k.maxWorldLength;F.verticalOffset={screenLength:g.pt2px(k.screenLength),minWorldLength:E||0,maxWorldLength:null!=I?I:Infinity}}this._context.screenSizePerspectiveEnabled&&(k=this._context.sharedResources,E=k.screenSizePerspectiveSettings,F.screenSizePerspective=k.screenSizePerspectiveSettingsLabels.overridePadding(this._textRenderParameters.haloSize),F.screenSizePerspectiveAlignment=
E);B&&(F.shaderPolygonOffset=1E-4);F.slicePlaneEnabled=this._context.slicePlaneEnabled;B=null;k=JSON.stringify(F);h.isSome(q)?(B=q.getMaterial(k),null==B&&(B=new m(F,x),q.addMaterial(k,B))):B=new m(F,x);B=[B];u=y.createPointGeometry(z,l.translation,void 0,h.isSome(b)?[b.displayWidth,b.displayHeight]:[0,0],l.centerOffset,h.isSome(u)?[0,0]:null);u=[new t(u,x)];x=p.createStageObjectForPoint(this._context,c,u,B,null,null,n,x,this._context.layer.uid,r,!0);if(null===x)return null;r=f.perObjectElevationAligner;
q=new a(this,x.object,u,h.isNone(q)?B:null,h.isSome(b)?[b]:null,r,n);q.alignedTerrainElevation=x.terrainElevation;q.needsElevationUpdates=p.needsElevationUpdates2D(n.mode)||"absolute-height"===n.mode;var n=h.isSome(b)?b:l,K=n.displayWidth,H=n.displayHeight;q.getScreenSize=function(a){void 0===a&&(a=e.vec2f64.create());a[0]=K;a[1]=H;return a};q.metadata={labelText:d,elevationOffset:l.elevationOffset};p.extendPointGraphicElevationContext(q,c,this._context.elevationProvider);return q};return q}(q.default);
d.Graphics3DTextSymbolLayer=r;var B={mode:"relative-to-ground",offset:0},C={text:null,translation:[0,0,0],elevationOffset:0,centerOffset:[0,0,0,1],screenOffset:[0,0],anchor:"center",verticalOffset:null,centerOffsetUnits:null,debugDrawBorder:!1,displayWidth:0,displayHeight:0};d.default=r})},"esri/views/3d/webgl-engine/lib/TextRenderParameters":function(){define("require exports ../../../../Color ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/factories/vec4f64".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b){this.definition=b;this.key=JSON.stringify(b);this.haloSize=Math.round(b.halo.size);this.fillStyle=this.colorToRGBA(b.color);this.haloStyle=this.colorToRGB(b.halo.color)}d.prototype.colorToRGB=function(b){return"rgb("+b.slice(0,3).map(function(b){return Math.floor(255*b)}).toString()+")"};d.prototype.colorToRGBA=function(b){return"rgba("+b.slice(0,3).map(function(b){return Math.floor(255*b)}).toString()+
","+b[3]+")"};d.fromSymbol=function(g,e){void 0===e&&(e=1);var c=l.get(g,"material","color"),c=l.isSome(c)?n.toUnitRGBA(c):b.ZEROS,f=g.halo,a=null!=g.size?k.pt2px(g.size):12;g={family:g.font&&g.font.family?g.font.family:"sans-serif",weight:g.font&&g.font.weight?g.font.weight:"normal",style:g.font&&g.font.style?g.font.style:"normal"};f=l.isSome(f)&&l.isSome(f.color)&&0<f.size?{size:k.pt2px(f.size),color:n.toUnitRGBA(f.color)}:{size:0,color:b.ZEROS};return new d({size:a,color:c,font:g,halo:f,pixelRatio:e})};
return d}();d.TextRenderParameters=r;d.default=r})},"esri/views/3d/webgl-engine/lib/TextTexture":function(){define("require exports ../../../../core/mathUtils ./TextRenderer ./Texture ../../../webgl/Texture ../../../webgl/capabilities/isWebGL2Context".split(" "),function(r,d,n,l,k,b,h){var g={canvas:null};return function(){function e(b,e,a,d){this._idHint=d;this._requiresPowerOfTwo=!h.default(b.gl);this._renderer=new l.default(e,a)}Object.defineProperty(e.prototype,"id",{get:function(){null==this._id&&
(this._id=k.idGen.gen(this._idHint));return this._id},enumerable:!0,configurable:!0});e.prototype.deferredLoading=function(){return!1};e.prototype.getWidth=function(){return this._renderer.renderedWidth};e.prototype.getHeight=function(){return this._renderer.renderedHeight};Object.defineProperty(e.prototype,"textureWidth",{get:function(){var b=this.getWidth();return this._requiresPowerOfTwo?n.nextHighestPowerOfTwo(b):b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"textureHeight",
{get:function(){var b=this.getHeight();return this._requiresPowerOfTwo?n.nextHighestPowerOfTwo(b):b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._renderer.displayWidth},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"displayHeight",{get:function(){return this._renderer.displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"texcoordScale",{get:function(){return[this._renderer.renderedWidth/
this.textureWidth,this._renderer.renderedHeight/this.textureHeight]},enumerable:!0,configurable:!0});e.prototype.initializeThroughRender=function(c,e){var a=l.getTextHelperCanvas(g,this.textureWidth,this.textureHeight),d=a.getContext("2d");d.save();e.samplingMode=9987;e.wrapMode=33071;e.flipped=!0;e.preMultiplyAlpha=!0;e.hasMipmap=!0;this._renderer.render(d,0,this.textureHeight-this._renderer.renderedHeight);c=new b(c,e,a);d.restore();return c};e.prototype.setUnloadFunc=function(b){this._unloadFunc=
b};e.prototype.unload=function(){this._unloadFunc&&(this._unloadFunc(this._id),this._unloadFunc=null)};return e}()})},"esri/views/3d/webgl-engine/lib/TextRenderer":function(){define(["require","exports","../../../../core/maybe","./TextRenderParameters"],function(r,d,n,l){function k(b,e,a){b.canvas||(b.canvas=document.createElement("canvas"));b.canvas.width=e;b.canvas.height=a;return b.canvas}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function c(b,a,c){void 0===c&&(c=2048);this.text=
b;this.maxSize=c;this._displayWidth=this._renderPixelRatio=null;this.parameters=a instanceof l.default?a:new l.default(a);this.key=this.parameters.key+"--"+b;this.textLines=b.split(/\r?\n/);this.lineHeight=this.computeLineHeight()}Object.defineProperty(c.prototype,"displayWidth",{get:function(){n.isNone(this._displayWidth)&&(this._displayWidth=this.computeTextWidth());return this._displayWidth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayHeight",{get:function(){return this.lineHeight*
this.textLines.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderedWidth",{get:function(){return Math.round(this.displayWidth*this.renderPixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderedHeight",{get:function(){return Math.round(this.displayHeight*this.renderPixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderedLineHeight",{get:function(){return Math.round(this.lineHeight*this.renderPixelRatio)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderedFontSize",{get:function(){return this.parameters.definition.size*this.renderPixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderedHaloSize",{get:function(){return this.parameters.haloSize*this.renderPixelRatio},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderPixelRatio",{get:function(){if(n.isNone(this._renderPixelRatio)){var b=this.parameters.definition.pixelRatio;
this._renderPixelRatio=0<this.maxSize?Math.min(b,Math.min(this.maxSize/(this.displayWidth*b),this.maxSize/(this.displayHeight*b))):b}return this._renderPixelRatio},enumerable:!0,configurable:!0});c.prototype.render=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=0);var e=this.renderedLineHeight,d=this.renderedHaloSize,f=b.textAlign,g=this.renderedWidth,f=("center"===f?.5*g:"right"===f?g:0)+d;b.save();0<d&&this.renderHalo(b,f,d,a,c);this.setFontProperties(b,this.renderedFontSize);c+=d;a+=f;d=0;for(f=
this.textLines;d<f.length;d++)g=f[d],b.globalCompositeOperation="destination-out",b.fillStyle="rgb(0, 0, 0)",b.fillText(g,a,c),b.globalCompositeOperation="source-over",b.fillStyle=this.parameters.fillStyle,b.fillText(g,a,c),c+=e;b.restore()};c.prototype.renderHalo=function(b,a,c,d,h){var f=this.renderedWidth,l=this.renderedHeight,p=k(g,Math.max(f,e),Math.max(l,e)),q=p.getContext("2d");q.clearRect(0,0,f,l);this.setFontProperties(q,this.renderedFontSize);q.fillStyle=this.parameters.haloStyle;q.strokeStyle=
this.parameters.haloStyle;var m=3>this.renderedHaloSize;q.lineJoin=m?"miter":"round";m?this.renderHaloEmulated(q,a,c):this.renderHaloNative(q,a,c);b.globalAlpha=this.parameters.definition.halo.color[3];b.drawImage(p,0,0,f,l,d,h,f,l);b.globalAlpha=1};c.prototype.renderHaloEmulated=function(c,a,e){for(var d=this.renderedLineHeight,f=this.renderedHaloSize,g=0,h=this.textLines;g<h.length;g++){for(var k=h[g],l=0,p=b;l<p.length;l++){var u=p[l];c.fillText(k,a+f*u[0],e+f*u[1])}e+=d}};c.prototype.renderHaloNative=
function(b,a,c){for(var e=this.renderedLineHeight,d=this.renderedHaloSize,f=0,g=this.textLines;f<g.length;f++){for(var h=g[f],k=2*d,l=0;5>l;l++)b.lineWidth=(.6+.1*l)*k,b.strokeText(h,a,c);c+=e}};c.prototype.setFontProperties=function(b,a){var c=this.parameters.definition.font;b.font=c.style+" "+c.weight+" "+a+"px "+c.family+", sans-serif";b.textAlign="left";b.textBaseline="top"};c.prototype.computeTextWidth=function(){var b=k(g,e,e).getContext("2d");this.setFontProperties(b,this.parameters.definition.size);
for(var a=0,c=0,d=this.textLines;c<d.length;c++)a=Math.max(a,b.measureText(d[c]).width);c=this.parameters.definition.font;if("italic"===c.style||"oblique"===c.style||"string"===typeof c.weight&&("bold"===c.weight||"bolder"===c.weight)||"number"===typeof c.weight&&600<c.weight)a+=.3*b.measureText("A").width;a+=2*this.parameters.haloSize;return Math.round(a)};c.prototype.computeLineHeight=function(){return Math.floor(1.275*this.parameters.definition.size+2*this.parameters.haloSize)};return c}();d.TextRenderer=
r;for(var b=[],h=0;360>h;h+=22.5)b.push([Math.cos(Math.PI*h/180),Math.sin(Math.PI*h/180)]);d.getTextHelperCanvas=k;var g={canvas:null},e=512;d.default=r})},"esri/views/3d/layers/graphics/Graphics3DWaterSymbolLayer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Color ../../../../core/maybe ../../../../core/unitUtils ../../../../core/libs/earcut/earcut ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/math/common ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ./ElevationAligners ./Graphics3DDrapedGraphicLayer ./Graphics3DObject3DGraphicLayer ./Graphics3DSymbolCommonCode ./Graphics3DSymbolLayer ../../webgl-engine/Stage ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/Util ../../webgl-engine/materials/WaterMaterial ../../webgl-engine/materials/internal/waterMaterialUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function v(a,b,c,e){return d.call(this,a,b,c,e)||this}l(v,d);v.prototype.doLoad=function(){return b(this,void 0,void 0,function(){var a,b;return k(this,function(c){a=S.waterParameterDefaultsLocal;b=n({},a);this._updateMaterialParameters(b);b.isDraped=!0;this._drapedMaterial=new H.WaterMaterial(b,"waterDraped");this._context.stage.add(E.ModelContentType.MATERIAL,
this._drapedMaterial);this._updateMaterialParameters(a);this._material=new H.WaterMaterial(a,"water");this._context.stage.add(E.ModelContentType.MATERIAL,this._material);return[2]})})};v.prototype.destroy=function(){d.prototype.destroy.call(this);this._material&&(this._context.stage.remove(E.ModelContentType.MATERIAL,this._material.id),this._material=null);this._drapedMaterial&&(this._context.stage.remove(E.ModelContentType.MATERIAL,this._drapedMaterial.id),this._drapedMaterial=null)};v.prototype.createGraphics3DGraphic=
function(a){a=a.graphic;var b=a.geometry.type;if("polyline"!==b&&"polygon"!==b&&"extent"!==b)return this.logger.warn("unsupported geometry type for water symbol: "+b),null;if(!this._validateGeometry(a.geometry))return null;var b="graphic"+a.uid,c=this.getGraphicElevationContext(a);return"on-the-ground"===c.mode?this._createAsOverlay(a,b):this._createAs3DShape(a,c,b,a.uid)};v.prototype.layerOpacityChanged=function(){var a=this._material.color,b=this._getCombinedOpacity(this.symbolLayer.color,{hasIntrinsicColor:!0});
this._material.color=[a[0],a[1],a[2],b];this._material.setTransparent(1>b||this._isPropertyDriven("opacity"));this._drapedMaterial.color=[a[0],a[1],a[2],b];this._drapedMaterial.setTransparent(1>b||this._isPropertyDriven("opacity"));return!0};v.prototype.layerElevationInfoChanged=function(a,b,c){var e=this._elevationContext.mode;if(null==c||null==e)return!1;if("on-the-ground"===c&&"on-the-ground"===e)return!0;if(c!==e&&("on-the-ground"===c||"on-the-ground"===e))return!1;var d=C.needsElevationUpdates2D(e);
return this.updateGraphics3DGraphicElevationInfo(a,b,function(){return d})};v.prototype.slicePlaneEnabledChanged=function(a,b){this._material.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});this._drapedMaterial.setParameterValues({slicePlaneEnabled:this._context.slicePlaneEnabled});return!0};v.prototype.pixelRatioChanged=function(a,b){return!0};v.prototype.setDrawOrder=function(a,b,c){this.updateSymbolLayerOrder(a,b);this._material&&(this._material.renderPriority=a+b/2,c.add(this._material.id));
this._drapedMaterial&&(this._drapedMaterial.renderPriority=a+b/2,c.add(this._drapedMaterial.id))};v.prototype._createAs3DShape=function(a,b,c,e){a=this._getPolyGeometry(a);var d=this._getOutlineGeometry(a.rings);a=C.getGeometryVertexData3D(d,a.hasZ,a.spatialReference,this._context.renderSpatialReference,this._context.elevationProvider,this._context.renderCoordsHelper,b);d=a.vertexData.length/3;a.uvCoords=new Float64Array(2*d);J.idHint=c;J.data=a;J.outNum=0;J.outGeometries=[];J.outTransforms=[];J.outMaterials=
[];this._create3DShapeGeometries(J);if(0===J.outNum)return null;this._createUVCoordsFromVertices(J.data.uvCoords,J.data.eleVertexData,d,this._context.elevationProvider.spatialReference);c=new K({geometries:J.outGeometries,materials:J.outMaterials,transformations:J.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:e},idHint:c});c=new B(this,c,J.outGeometries,null,null,u.perVertexElevationAligner,b);c.alignedTerrainElevation=a.terrainElevation;c.needsElevationUpdates=
C.needsElevationUpdates2D(b.mode);return c};v.prototype._createUVCoordsFromVertices=function(a,b,c,d){d=e.getMetersPerUnitForSR(d);m.empty(V);for(var f=0;f<c;f++)p.vec2.set(T,b[3*f+0],b[3*f+1]),m.expandPointInPlace(V,T);t.vec4.scale(V,V,d);f=V[1]%v.unitSizeOfTexture;P[0]=V[0]-V[0]%v.unitSizeOfTexture;P[1]=V[1]-f;for(f=0;f<c;f++)a[2*f+0]=(b[3*f+0]*d-P[0])/v.unitSizeOfTexture,a[2*f+1]=(b[3*f+1]*d-P[1])/v.unitSizeOfTexture};v.prototype._create3DShapeGeometries=function(b){for(var e=b.data.geometryData.polygons,
d=b.data.eleVertexData,g=b.data.vertexData,h=b.data.uvCoords,k=function(k){var p=e[k];k=p.count;var m=p.index;if(l._context.clippingExtent&&(C.computeBoundingBox(d,m,k,Z),C.boundingBoxClipped(Z,l._context.clippingExtent)))return"continue";var q=new Float64Array(d.buffer,3*m*d.BYTES_PER_ELEMENT,3*k),u=new Float64Array(g.buffer,3*m*g.BYTES_PER_ELEMENT,3*k),n=new Float64Array(h.buffer,2*m*h.BYTES_PER_ELEMENT,2*k),p=p.holeIndices.map(function(a){return a-m}),p=c(q,p,3);if(0===p.length)return"continue";
C.applyOrigin(g,m,k,Q);k=l._createWaterGeometry(p,u,n,q);k=new N(k,b.idHint);k.singleUse=!0;q=a.mat4f64.create();f.mat4.translate(q,q,Q);b.outGeometries.push(k);b.outMaterials.push(l._material);b.outTransforms.push(q);b.outNum++},l=this,p=0;p<e.length;++p)k(p)};v.prototype._createWaterGeometry=function(a,b,c,e){for(var d=a.length,f=new Uint32Array(d),g=0;g<d;g++)f[g]=a[g];a={};d={};a[I.VertexAttrConstants.POSITION]=f;a[I.VertexAttrConstants.UV0]=f;d[I.VertexAttrConstants.POSITION]={size:3,data:b};
d[I.VertexAttrConstants.UV0]={size:2,data:c};e&&(d.mapPos={size:3,data:e},a.mapPos=f);return new L(d,a)};v.prototype._updateMaterialParameters=function(a){var b=this.symbolLayer.color;g.isSome(b)&&(a.color=h.toUnitRGBA(b));b=this._getCombinedOpacity(b,{hasIntrinsicColor:!0});a.color=[a.color[0],a.color[1],a.color[2],b];a.transparent=1>b||this._isPropertyDriven("opacity");a.waveDirection=g.isSome(this.symbolLayer.waveDirection)?v.headingVectorFromAngle(this.symbolLayer.waveDirection):q.vec2f64.fromValues(0,
0);b=S.wavePresets[this.symbolLayer.waveStrength+"-"+this.symbolLayer.waterbodySize];a.waveStrength=b.waveStrength;a.waveTextureRepeat=b.textureRepeat;a.waveVelocity=b.waveVelocity;a.flowStrength=b.perturbationStrength};v.prototype._createAsOverlay=function(a,b){var c=this._getPolyGeometry(a),e=c.rings,d=this._getOutlineGeometry(e);this._drapedMaterial.renderPriority=this._symbolLayerOrder+this._symbolLayerOrderDelta/2;d=C.getGeometryVertexDataDraped(d,c.spatialReference,this._context.overlaySR);
J.idHint=b;J.data=d;b=d.vertexData.length/3;d.uvCoords=new Float64Array(2*b);J.outNum=0;J.outGeometries=[];J.outBoundingBox=w.empty();J.layerUid=this._context.layer.uid;J.graphicsUid=a.uid;this._createAsOverlayWater(J);if(0===J.outNum)return null;this._createUVCoordsFromVertices(J.data.uvCoords,J.data.vertexData,b,c.spatialReference);this._logGeometryCreationWarnings(J.data,e,"rings","WaterSymbol3DLayer");return 0<J.outNum?new z(this,J.outGeometries,J.outBoundingBox):null};v.prototype._createAsOverlayWater=
function(b){for(var e=b.data.vertexData,d=b.data.uvCoords,g=function(g){var k=g.count,l=g.index,p=new Float64Array(e.buffer,3*l*e.BYTES_PER_ELEMENT,3*k),m=new Float64Array(d.buffer,2*l*d.BYTES_PER_ELEMENT,2*k);g=g.holeIndices.map(function(a){return a-l});g=c(p,g,3);if(0===g.length)return"continue";C.computeBoundingBox(e,l,k,Z);if(C.boundingBoxClipped(Z,h._context.clippingExtent))return"continue";w.expand(b.outBoundingBox,Z);C.applyOrigin(e,l,k,Q);C.setZ(e,l,k,h._getDrapedZ());k=a.mat4f64.create();
f.mat4.translate(k,k,Q);p=h._createWaterGeometry(g,p,m,null);m=new O(p);m.data.layerUid=b.layerUid;m.data.graphicUid=b.graphicsUid;m.material=h._drapedMaterial;g=Z;m.center=[.5*(g[0]+g[3]),.5*(g[1]+g[4]),0];m.bsRadius=.5*Math.sqrt((g[3]-g[0])*(g[3]-g[0])+(g[4]-g[1])*(g[4]-g[1]));m.transformation=k;m.name=b.idHint;m.uniqueName=b.idHint+"#"+p.id;b.outGeometries.push(m);b.outNum++},h=this,k=0,l=b.data.geometryData.polygons;k<l.length;k++)g(l[k])};v.prototype._getOutlineGeometry=function(a){return a};
v.prototype._getPolyGeometry=function(a){a=a.geometry;return"extent"===a.type?x.fromExtent(a):a};v.headingVectorFromAngle=function(a){var b=q.vec2f64.create();a=y.toRadian(a);b[0]=Math.sin(a);b[1]=Math.cos(a);return b};v.unitSizeOfTexture=100;return v}(F.default);d.Graphics3DWaterSymbolLayer=r;var P=q.vec2f64.create(),V=m.create(),T=q.vec2f64.create(),Z=w.create(),Q=v.vec3f64.create(),J={idHint:null,data:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};d.default=
r})},"esri/views/3d/webgl-engine/materials/WaterMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../lib/Material ./WaterGLMaterial ./internal/MaterialUtil ./internal/PositionUVBufferWriter ./internal/waterMaterialUtils ./renderers/MergedRenderer".split(" "),function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function d(a,e){e=c.call(this,e)||this;e.animationSupported=!0;e.params=b.copyParameters(a,g.waterParameterDefaultsLocal);
return e}n(d,c);d.prototype.setParameterValues=function(a){var b=this.params;console.log("setParameterValues",a);for(var c in a)b[c]=a[c];this.notifyDirty("matChanged")};d.prototype.getParameters=function(){return this.params};Object.defineProperty(d.prototype,"color",{get:function(){return this.params.color},set:function(a){this.params.color=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"waveDirection",{get:function(){return this.params.waveDirection},
set:function(a){this.params.waveDirection=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"polygonOffset",{get:function(){return[this.params.polygonOffset.factor,this.params.polygonOffset.units]},set:function(a){this.params.polygonOffset=a?{factor:a[0],units:a[1]}:null;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});d.prototype.setTransparent=function(a){this.params.transparent=a;this.notifyDirty("matChanged")};d.prototype.getTransparent=
function(){return this.params.transparent};Object.defineProperty(d.prototype,"draped",{set:function(a){this.params.isDraped=a;this.notifyDirty("matChanged")},enumerable:!0,configurable:!0});d.prototype.intersect=function(a,c,e,d,f,g,h,k,l){b.intersectTriangleGeometry(a,c,e,d,f,g,h,l)};d.prototype.getGLMaterials=function(){return{color:this.params.isDraped?k.WaterDrapedGLMaterial:k.WaterGLMaterial,depthShadowMap:void 0,normal:k.WaterNormalGLMaterial,depth:void 0,highlight:void 0}};d.prototype.createBufferWriter=
function(){return new h};d.prototype.createRenderer=function(a,b){return new e(a,b,this)};return d}(l);d.WaterMaterial=r})},"esri/views/3d/webgl-engine/materials/internal/PositionUVBufferWriter":function(){define(["require","exports","../../../support/buffer/InterleavedLayout","../../lib/Util","./bufferWriters"],function(r,d,n,l,k){var b=n.newLayout().vec3f(l.VertexAttrConstants.POSITION).vec2f(l.VertexAttrConstants.UV0);return function(){function d(){this.vertexBufferLayout=b}d.prototype.allocate=
function(d){return b.createBuffer(d)};d.prototype.elementCount=function(b){return b.indices[l.VertexAttrConstants.POSITION].length};d.prototype.write=function(d,e,c,f){k.writeDefaultAttributes(e,b,d.transformation,d.invTranspTransformation,c,f)};return d}()})},"esri/views/3d/layers/graphics/Graphics3DWebStyleSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ./Loadable ./symbolComplexity".split(" "),
function(r,d,n,l,k,b,h){return function(b){function e(c,e){var a=b.call(this)||this;a.symbol=c;a.convert=e;a.graphics3DSymbol=null;a.referenced=0;return a}n(e,b);e.prototype.whenSymbolLayerSize=function(b){return k(this,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:return[4,this.load()];case 1:return c.sent(),[2,this.graphics3DSymbol.whenSymbolLayerSize(b)]}})})};e.prototype.doLoad=function(b){return k(this,void 0,void 0,function(){var c;return l(this,function(a){switch(a.label){case 0:return[4,
this.symbol.fetchSymbol({signal:b})];case 1:return c=a.sent(),c.id=this.symbol.id,this.graphics3DSymbol=this.convert(c),[4,this.graphics3DSymbol.load()];case 2:return a.sent(),[2]}})})};e.prototype.createGraphics3DGraphic=function(b){return this.graphics3DSymbol.createGraphics3DGraphic(b,this)};Object.defineProperty(e.prototype,"complexity",{get:function(){return this.graphics3DSymbol?this.graphics3DSymbol.complexity:h.emptySymbolComplexity},enumerable:!0,configurable:!0});e.prototype.globalPropertyChanged=
function(b,e){return this.graphics3DSymbol.globalPropertyChanged(b,e)};e.prototype.applyRendererDiff=function(b,e){return this.graphics3DSymbol.applyRendererDiff(b,e)};e.prototype.prepareSymbolPatch=function(b){this.graphics3DSymbol&&this.graphics3DSymbol.prepareSymbolPatch(b)};e.prototype.updateGeometry=function(b,e){return this.graphics3DSymbol?this.graphics3DSymbol.updateGeometry(b,e):!1};e.prototype.getFastUpdateStatus=function(){return this.graphics3DSymbol?this.graphics3DSymbol.getFastUpdateStatus():
{loading:1,fast:0,slow:0}};e.prototype.setDrawOrder=function(b,e){this.graphics3DSymbol&&this.graphics3DSymbol.setDrawOrder(b,e)};e.prototype.destroy=function(){this.graphics3DSymbol&&this.graphics3DSymbol.destroy();this.graphics3DSymbol=void 0;this.abortLoad()};Object.defineProperty(e.prototype,"destroyed",{get:function(){return void 0===this.graphics3DSymbol},enumerable:!0,configurable:!0});return e}(b.Loadable)})},"esri/views/3d/layers/graphics/labelPlacement":function(){define("require exports ../../../../core/compilerUtils ../../../../core/Logger ../../../../core/maybe ../../../../core/scheduling ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ./graphicSymbolUtils ../../webgl-engine/materials/HUDMaterial".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(b){return a.getGraphics3DSymbol(b.graphics3DGraphic.graphics3DSymbol).symbol.symbolLayers.getItemAt(0)}function v(a){var b=a.graphics3DGraphic.graphic.geometry;if(k.isNone(b))return null;b=b.type;switch(b){case "polyline":case "extent":case "multipoint":return{placement:"center-center",normalizedOffset:null,anchor:"center"};case "polygon":return"extrude"===q(a).type?z["above-center"]:{placement:"center-center",normalizedOffset:null,anchor:"center"};case "point":return z["above-center"];
case "mesh":return z["above-center"];default:n.neverReached(b)}}function t(a,c){null==u&&(m.log(a,c),u=b.schedule(function(){u.remove();u=null}))}function y(a,b,c){c=c.graphics3DGraphic._graphics[0].getBoundingBoxObjectSpace(N);c=e.vec3f64.fromValues(c[3]-c[0],c[4]-c[1],c[5]-c[2]);a.centerOffset[0]=1.1*Math.sqrt(c[0]*c[0]+c[1]*c[1])/2*b.normalizedOffset[0];var d=a.translation[2],f=c[2]/2*b.normalizedOffset[1];a.translation[2]=f*(1.1-1);a.elevationOffset=d+f;c=g.vec3.length(c);a.centerOffset[2]=1.1*
c/2*b.normalizedOffset[2]}function x(b){var c=b.labelClass.labelPlacement,e=b.labelSymbol,d=b.graphics3DGraphic,f=a.getGraphics3DSymbol(d.graphics3DSymbol).symbol;b=z[c]||v(b);if("point-3d"===f.type&&f.supportsCallout()&&f.hasVisibleVerticalOffset()&&!d.isDraped())return{placement:null,hasLabelVerticalOffset:!1,verticalOffset:w(f.verticalOffset),anchor:null,normalizedOffset:null};if(e&&e.hasVisibleVerticalOffset()&&("point-3d"!==f.type||!f.supportsCallout()||!f.verticalOffset||d.isDraped())){a:switch(b.placement){case "above-center":d=
!0;break a;default:d=!1}return d?{placement:"above-center",verticalOffset:w(e.verticalOffset),anchor:"bottom",normalizedOffset:[0,b.normalizedOffset[1],0],hasLabelVerticalOffset:!0}:(t("error","Callouts and vertical offset on labels are currently only supported with 'above-center' label placement (not with "+c+" placement)"),null)}return{placement:null,verticalOffset:null,anchor:null,normalizedOffset:null,hasLabelVerticalOffset:!1}}function w(a){return{screenLength:a.screenLength,minWorldLength:a.minWorldLength,
maxWorldLength:a.maxWorldLength}}Object.defineProperty(d,"__esModule",{value:!0});var m=l.getLogger("esri.views.3d.layers.graphics.labelPlacement"),u=null;d.get=function(a){var b=x(a);if(k.isNone(b))return null;var d;if(b.anchor)d=b;else{var g=a.labelClass.labelPlacement,l=z[g];d=l||v(a);g&&!l&&t("warn","the requested label placement '"+g+"' is not currently supported in SceneView");g=a.graphics3DGraphic.graphic.geometry;if(k.isNone(g))d=null;else switch(g=g.type,g){case "polyline":case "polygon":case "extent":case "multipoint":a.labelClass.labelPlacement&&
(t("warn","the requested label placement '"+d.placement+"' is currently unsupported for '"+g+"' geometries in SceneView"),d=v(a));break;case "point":case "mesh":break;default:n.neverReached(g)}}if(k.isNone(d))return null;g=!!b.hasLabelVerticalOffset;b={anchor:d.anchor,verticalOffset:b.verticalOffset,screenOffset:h.vec2f64.create(),centerOffset:c.vec4f64.fromValues(0,0,0,-1),centerOffsetUnits:"world",translation:e.vec3f64.create(),elevationOffset:0,hasLabelVerticalOffset:g};g=a.graphics3DGraphic.graphic.geometry;
if(k.isNone(g))a=null;else{switch(g.type){case "point":g=a.graphics3DGraphic;l=q(a);g.getCenterObjectSpace(b.translation);switch(l.type){case "icon":case "text":l=a.graphics3DGraphic;g=l._graphics[0].getScreenSize();l.isDraped()?b.hasLabelVerticalOffset||"center"===b.anchor||(z[a.labelClass.labelPlacement]&&t("warn","the requested placement '"+d.placement+"' is currently unsupported for draped graphics"),b.anchor="center"):(l=void 0,void 0===l&&(l=E),a=a.graphics3DGraphic._graphics[0].stageObject.getGeometryRecords()[0].material,
a instanceof p?(a=a.getParameters().anchorPos,l[0]=2*(a[0]-.5),l[1]=2*(a[1]-.5)):(l[0]=0,l[1]=0),a=l,F[0]=g[0]/2*(d.normalizedOffset[0]-a[0]),F[1]=g[1]/2*(d.normalizedOffset[1]-a[1]),b.screenOffset[0]=F[0],b.hasLabelVerticalOffset?(b.centerOffset[1]=F[1],b.centerOffsetUnits="screen"):b.screenOffset[1]=F[1]);break;case "object":y(b,d,a)}break;case "polygon":switch(q(a).type){case "extrude":a.graphics3DGraphic._graphics[0].getBoundingBoxObjectSpace(N),f.center(N,b.translation),b.translation[2]=f.height(N)/
2,y(b,d,a)}break;case "mesh":y(b,d,a)}a=b}return a};var z={"above-center":{placement:"above-center",normalizedOffset:[0,1,0],anchor:"bottom"},"above-left":{placement:"above-left",normalizedOffset:[-1,1,0],anchor:"bottom-right"},"above-right":{placement:"above-right",normalizedOffset:[1,1,0],anchor:"bottom-left"},"below-center":{placement:"below-center",normalizedOffset:[0,-1,2],anchor:"top"},"below-left":{placement:"below-left",normalizedOffset:[-1,-1,0],anchor:"top-right"},"below-right":{placement:"below-right",
normalizedOffset:[1,-1,0],anchor:"top-left"},"center-center":{placement:"center-center",normalizedOffset:[0,0,1],anchor:"center"},"center-left":{placement:"center-left",normalizedOffset:[-1,0,0],anchor:"right"},"center-right":{placement:"center-right",normalizedOffset:[1,0,0],anchor:"left"}},B={"above-center":["default","esriServerPointLabelPlacementAboveCenter"],"above-left":["esriServerPointLabelPlacementAboveLeft"],"above-right":["esriServerPointLabelPlacementAboveRight"],"below-center":["esriServerPointLabelPlacementBelowCenter"],
"below-left":["esriServerPointLabelPlacementBelowLeft"],"below-right":["esriServerPointLabelPlacementBelowRight"],"center-center":["esriServerPointLabelPlacementCenterCenter"],"center-left":["esriServerPointLabelPlacementCenterLeft"],"center-right":["esriServerPointLabelPlacementCenterRight"]};r=function(a){var b=z[a];B[a].forEach(function(a){z[a]=b})};for(var C in B)r(C);Object.freeze&&(Object.freeze(z),Object.keys(z).forEach(function(a){Object.freeze(z[a]);Object.freeze(z[a].normalizedOffset)}));
var F=[0,0],E=[0,0],N=f.create()})},"esri/views/3d/webgl-engine/lib/MaterialCollection":function(){define(["require","exports","./ModelContentType"],function(r,d,n){return function(){function d(d){this.materials={};this.stage=d}d.prototype.getMaterial=function(d){return this.materials[d]};d.prototype.addMaterial=function(d,b){this.materials[d]=b;this.stage.add(n.MATERIAL,b)};d.prototype.dispose=function(){for(var d in this.materials)this.stage.remove(n.MATERIAL,this.materials[d].id);this.materials=
{}};return d}()})},"esri/views/3d/webgl-engine/lib/TextTextureAtlas":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/iteratorUtils ../../../../core/mathUtils ../../../../core/accessorSupport/decorators ./ModelContentType ./Texture ../../../webgl/Texture".split(" "),function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function k(a){a=d.call(this)||
this;a.dirty=!1;a.needsClear=!1;a.elementsToAdd=new Map;a.elementsToRemove=new Map;a.elementsToRender=new Map;a.elements=new Map;a.stageObjects=new Map;return a}n(k,d);v=k;k.prototype.initialize=function(){this.id=c.idGen.gen(this.idHint);this.stage=this.view._stage;this.scheduler=this.view.resourceController.scheduler;this.canvas=this.create2DCanvas();this.ctx=this.canvas.getContext("2d");this.stage.add(e.TEXTURE,this);var a=this.computeAtlasResolution(this.view.width,this.view.height);this.createAtlasRegion(a);
this.update2DCanvasSize();this.resetAtlasCursor()};k.prototype.setUnloadFunc=function(a){this.unloadFunc=a};k.prototype.unload=function(){null!=this.unloadFunc&&(this.unloadFunc(this.id),this.unloadFunc=null)};k.prototype.deferredLoading=function(){return!1};k.prototype.getWidth=function(){return this.atlas.size.width};k.prototype.getHeight=function(){return this.atlas.size.height};k.prototype.initializeThroughRender=function(a,b){var c=this;b.wrapMode=33071;b.samplingMode=9987;b.flipped=!0;b.preMultiplyAlpha=
!0;b.hasMipmap=!0;this.glTexture=new f(a,b,this.canvas);this.frameWorker=this.scheduler.registerTask(12,function(a){return c.run(c.makeRunContext(a))},function(){return c.dirty});return this.glTexture};k.prototype.dispose=function(){this.elementsToRender=this.elementsToRemove=this.elementsToAdd=this.elements=null;this.frameWorker&&(this.frameWorker.remove(),this.frameWorker=null);this.glTexture&&(this.glTexture=null,this.stage.remove(e.TEXTURE,this.id));this.canvas.width=0;this.canvas.height=0;this.ctx=
this.canvas=null};k.prototype.create2DCanvas=function(){var a=document.createElement("canvas");a.setAttribute("id","canvas2d");a.setAttribute("style","display:none");a.setAttribute("width",(512).toString());a.setAttribute("height",(512).toString());return a};k.prototype.update2DCanvasSize=function(){this.canvas.setAttribute("width",this.atlas.size.width.toString());this.canvas.setAttribute("height",this.atlas.size.height.toString())};k.prototype.createAtlasRegion=function(a){void 0===a&&(a=512);this.atlas=
{size:{width:a,height:a},cursor:{x:0,y:0},lineHeight:0}};k.prototype.computeAtlasResolution=function(a,b){a=Math.max(a,b);a=h.nextHighestPowerOfTwo(a+256);return a=Math.min(a,4096)};k.prototype.resizeAtlas=function(a,b){b=b||a;var c=this.atlas;c.size.width=a;c.size.height=b;this.glTexture&&this.glTexture.resize(a,b);this.update2DCanvasSize()};k.prototype.resetAtlasCursor=function(){var b=this.atlas;b.cursor.x=a;b.cursor.y=a+p;b.lineHeight=0;this.needsClear=!0};k.prototype.getAtlasUsage=function(){var a=
this.atlas;return(a.cursor.x+a.cursor.y*a.size.width)/(a.size.width*a.size.height)};k.prototype.getExpectedAtlasUsage=function(){var a=this.elementsToRemove.size,b=this.elementsToAdd.size,c=this.elements.size;return this.getAtlasUsage()/c*(c+b-a)};k.prototype.addAtlasElement=function(a,b,c,e){var d=this.atlas,f=a.textRenderer,g=f.renderedWidth,h=f.renderedHeight,k=f.displayWidth,f=f.displayHeight;a.placement.offset.x=d.cursor.x;a.placement.offset.y=d.cursor.y;a.placement.size.width=g;a.placement.size.height=
h;a.placement.size.displayWidth=k;a.placement.size.displayHeight=f;a.placement.uvMinMax=[a.placement.offset.x/d.size.width,1-(a.placement.offset.y+h)/d.size.height,(a.placement.offset.x+g)/d.size.width,1-a.placement.offset.y/d.size.height];d.cursor.x+=c;d.lineHeight=Math.max(d.lineHeight,e);this.elements.set(b,a)};k.prototype.removeAtlasElement=function(a){if(a&&this.elements.has(a.textId)){var b=a.placement.offset,c=a.placement.size;this.ctx.clearRect(b.x,b.y,c.width,c.height);this.elements.delete(a.textId)}};
k.prototype.ensureStageObjects=function(a){var b=this.stageObjects.get(a);b||(b=new Set,this.stageObjects.set(a,b));return b};k.prototype.addStageObject=function(a,b){this.ensureStageObjects(a).add(b)};k.prototype.removeStageObject=function(a,b){(a=this.stageObjects.get(a))&&a.delete(b)&&(b.geometries[0].data.vertexAttributes.size.data=new Float32Array([0,0]),b.geometryVertexAttrsUpdated(0))};k.prototype.processAdditionRequest=function(b,c){var e=this.atlas,d=b.textId,f=b.textRenderer.renderedWidth+
a,g=b.textRenderer.renderedHeight+a+p;c=c.repackingEnabled;if(e.cursor.x+f<e.size.width&&e.cursor.y+g<e.size.height)this.addAtlasElement(b,d,f,g),this.elementsToRender.set(d,b),this.elementsToAdd.delete(d);else if(e.cursor.y+g+e.lineHeight<e.size.height)e.cursor.x=a,e.cursor.y+=e.lineHeight,e.lineHeight=0,this.addAtlasElement(b,d,f,g),this.elementsToRender.set(d,b),this.elementsToAdd.delete(d);else{b=this.getExpectedAtlasUsage();(d=.85<b&&4096>e.size.width)&&this.resizeAtlas(2*e.size.width,2*e.size.height);
if(!c||!d&&.95<b&&4096===e.size.width)return this.processRemovals(),0;this.repack();return 1}return 0};k.prototype.processRemovals=function(){var a=this;this.elementsToRemove.forEach(function(b,c){var e=a.stageObjects.get(c);e&&0!==e.size||a.removeAtlasElement(b);e&&0===e.size&&a.stageObjects.delete(c)});this.elementsToRemove.clear()};k.prototype.repack=function(){var a=this;this.processRemovals();this.elements.forEach(function(b,c){b.rendered=!1;a.elementsToAdd.set(c,b)});this.elements.clear();this.resetAtlasCursor();
this.elementsToRender.clear()};k.prototype.processRenderingRequest=function(a){this.ctx.clearRect(a.placement.offset.x,a.placement.offset.y,a.placement.size.width,a.placement.size.height);a.textRenderer.render(this.ctx,a.placement.offset.x,a.placement.offset.y);var b=this.stageObjects.get(a.textId);b&&b.forEach(function(b){b.geometries[0].data.vertexAttributes.uv0.data=new Float32Array(a.placement.uvMinMax);b.geometries[0].data.vertexAttributes.size.data=new Float32Array([a.placement.size.displayWidth,
a.placement.size.displayHeight]);b.geometryVertexAttrsUpdated(0)});a.rendered=!0};k.prototype.run=function(a){var c=this;if(this.glTexture){var e=a.budget,d=!1;b.everyMap(this.elementsToAdd,function(b,e){return(b=c.elements.get(e))&&b.rendered?((b=c.stageObjects.get(e))&&b.forEach(function(a){var b=a.geometries[0].data.vertexAttributes,d=c.elements.get(e);b.uv0.data=new Float32Array(d.placement.uvMinMax);b.size.data=new Float32Array([d.placement.size.displayWidth,d.placement.size.displayHeight]);
a.geometryVertexAttrsUpdated(0)}),c.elementsToAdd.delete(e),!0):1===c.processAdditionRequest(c.elementsToAdd.get(e),a)?(d=!0,!1):!0});if(d)a.budget=null,a.repackingEnabled=!1,this.run(a);else{var f=!1;0<this.elementsToRender.size&&this.needsClear&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.needsClear=!1);b.everyMap(this.elementsToRender,function(a,b){c.processRenderingRequest(a);c.elementsToRender.delete(b);f=!0;return e&&(e.madeProgress(),e.done)?!1:!0});f&&this.glTexture.setData(this.canvas);
this.dirty=0<this.elementsToRender.size;this.dirty||(v.test.orderedRepackingEnabled&&this.repackOrdered(),this.notifyChange("updating"))}}};k.prototype.makeRunContext=function(a){void 0===a&&(a=null);q.budget=a;q.repackingEnabled=!0;return q};k.prototype.addTextTexture=function(a,b){var c=a.key;this.elementsToAdd.has(c)||this.elementsToAdd.set(c,{textId:c,placement:{offset:{x:0,y:0},size:{width:0,height:0,displayWidth:0,displayHeight:0},uvMinMax:[]},textRenderer:a,rendered:!1});this.addStageObject(c,
b);this.elementsToRemove.delete(c);this.setDirty()};k.prototype.removeTextTexture=function(a,b){a=a.key;this.elementsToRemove.set(a,this.elements.get(a));this.removeStageObject(a,b)};Object.defineProperty(k.prototype,"textureId",{get:function(){return this.id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isDirty",{get:function(){return this.dirty},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"updating",{get:function(){return this.isDirty},enumerable:!0,configurable:!0});
k.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.notifyChange("updating"))};Object.defineProperty(k.prototype,"test",{get:function(){return{elements:this.elements,stageObjects:this.stageObjects,elementsToRemove:this.elementsToRemove,atlas:this.atlas,resizeAtlas:this.resizeAtlas.bind(this)}},enumerable:!0,configurable:!0});k.prototype.repackOrdered=function(){if(0!==this.elements.size){var a=[];this.elements.forEach(function(b,c){return a.push({element:b,key:c})});for(var b=!0,c=0;c<
a.length-1;c++)if(0<a[c].key.localeCompare(a[c+1].key)){b=!1;break}if(!b){a.sort(function(a,b){return a.key.localeCompare(b.key)});this.elements.clear();for(b=0;b<a.length;b++)c=a[b],this.elements.set(c.key,c.element);this.repack();this.setDirty()}}};var v;k.test={orderedRepackingEnabled:!1};l([g.property({constructOnly:!0})],k.prototype,"idHint",void 0);l([g.property({constructOnly:!0})],k.prototype,"view",void 0);l([g.property({type:Boolean,readOnly:!0})],k.prototype,"updating",null);return k=v=
l([g.subclass("esri.views.3d.webgl-engine.lib.TextTextureAtlas")],k)}(g.declared(k));d.TextTextureAtlas=r;var a=2,p=2,q={budget:null,repackingEnabled:!0};d.default=r})},"esri/views/3d/layers/support/FeatureTileTree3D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Collection ../../../../core/Handles ../../../../core/Logger ../../../../core/PooledArray ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/aaBoundingRect ./FeatureTileDescriptor3D ./FeatureTileMeasurements3D ../../support/projectionUtils ../../../support/index".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){Object.defineProperty(d,"__esModule",{value:!0});var y=g.getLogger("esri.views.3d.layers.support.FeatureTileFetcher3D");r=function(d){function g(a){a=d.call(this,a)||this;a.tiles=new b;a.tileSize=512;a.idToTile=new Map;a.handles=new h;a.clients=new Set;a._dirty=!1;a._newTiles=new e;return a}n(g,d);Object.defineProperty(g.prototype,"tilingScheme",{get:function(){var a=this.tilingSchemeOwner.tilingScheme;return a?a.clone():null},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"filterExtent",{set:function(a){if(a&&!a.spatialReference.equals(this.viewState.spatialReference))y.error("#extent","extent spatial reference needs to be in the same spatial reference as the view");else{var b=this._get("filterExtent");b===a||b&&a&&b.equals(a)||(a=a?a.clone():null,this._set("filterExtent",a),this._setDirty())}},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"filterExtentRect",{get:function(){if(!this.filterExtent||!this.tilingScheme)return null;
var b=a.create();v.extentToBoundingRect(this.filterExtent,b,this.tilingScheme.spatialReference);return b},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"rootTileIds",{get:function(){return this.filterExtentRect?this.tilingScheme.rootTilesInExtent(this.filterExtentRect):[[0,0,0]]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"suspended",{set:function(a){a!==this._get("suspended")&&(this._set("suspended",a),this._setDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"updating",{get:function(){return this._dirty||!!this._pendingTiles},enumerable:!0,configurable:!0});g.prototype.initialize=function(){var a=this;this.handles.add(this.watch(["tilingScheme","tileSize"],function(){return a._reset()},!0));this.handles.add(c.init(this,["tileSize","cameraOnSurface.location","tilingScheme","viewState.camera","focus.locationOnSurface"],function(){return a._setDirty()}));this.scheduler&&(this._frameWorker=this.scheduler.registerTask(12,
function(b){return a._update(b)},function(){return a.updating}))};g.prototype.destroy=function(){this._frameWorker&&(this._frameWorker.remove(),this._frameWorker=null);this.handles&&(this.handles.destroy(),this.handles=null)};g.prototype.addClient=function(){var a=this,b=x++;this.clients.add(b);1===this.clients.size&&this._setDirty();return{remove:function(){return a._removeClient(b)}}};g.prototype._removeClient=function(a){this.clients.delete(a);this._hasClients||this._clear()};Object.defineProperty(g.prototype,
"_hasClients",{get:function(){return 0<this.clients.size},enumerable:!0,configurable:!0});g.prototype._setDirty=function(){!this._hasClients||this.suspended||this._dirty||(this._frameWorker?(this._dirty=!0,this.notifyChange("updating")):this._update(t.noBudget))};g.prototype._clear=function(){this.tiles.removeAll();this.idToTile.clear();this._reset();this._dirty=!1;this.notifyChange("updating")};g.prototype._update=function(a){this._dirty=!1;this._pendingTiles||(this._startUpdate(a),this._frameWorker&&
(this._frameWorker.priority=1));this._subdivideTilesForView(a);!this._pendingTiles&&this._frameWorker&&(this._frameWorker.priority=12);this.notifyChange("updating")};g.prototype._startUpdate=function(a){this.suspended||(this.tilingScheme?(this._tileMeasurements||(this._tileMeasurements=new q.FeatureTileMeasurements3D({renderCoordsHelper:this.renderCoordsHelper,tilingScheme:this.tilingScheme,tileSize:this.tileSize,maxVerticalScreenSize:m})),a=this.cameraOnSurface.location,this._tileMeasurements.begin(this.viewState.camera,
this.focus?this.focus.locationOnSurface:a,a.z),this._pendingTiles=this._getRootTiles()):this._clear())};g.prototype._reset=function(){this._newTiles.clear();this._pendingTiles=this._tileMeasurements=null;this._setDirty()};g.prototype._getRootTiles=function(){var a=this;return this.rootTileIds.map(function(b){return new p.FeatureTileDescriptor3D(b[0],b[1],b[2],a.tilingScheme)})};g.prototype._purgeHorizonTiles=function(b){b.sort(function(a,b){a=a.measures.screen.rect;b=b.measures.screen.rect;return a[1]+
a[3]-(b[1]+b[3])});a.empty(w);for(var c=0;c<b.length;c++)if(a.expand(w,b.data[c].measures.screen.rect),a.height(w)>m)return b.data.slice(c,b.length);return[]};g.prototype._subdivideTilesForView=function(b){var c;if(this._pendingTiles){for(;0<this._pendingTiles.length&&!b.done;){var e=this._pendingTiles.pop();b.madeProgress();if(!this.filterExtentRect||a.intersects(this.filterExtentRect,e.extent))this._tileMeasurements.updateTile(e),0!==e.measures.visibility&&(e.measures.shouldSplit?(this.tilingScheme.ensureMaxLod(e.lij[0]+
1),(c=this._pendingTiles).push.apply(c,e.getChildren())):this._newTiles.push(e))}0===this._pendingTiles.length&&(this._updateTiles(this._purgeHorizonTiles(this._newTiles)),this._newTiles.clear(),this._tileMeasurements.end(),this._pendingTiles=null)}};g.prototype._updateTiles=function(a){for(var b=this,c=0,e=this.tiles.items;c<e.length;c++)e[c].used=!1;a=a.filter(function(a){var c=b.idToTile.get(a.id);c?(c.copyMeasurementsFrom(a),c.used=!0):b.idToTile.set(a.id,a);return!c});c=this.tiles.items.filter(function(a){return a.used?
!1:(b.idToTile.delete(a.id),!0)});this.tiles.removeMany(c);this.tiles.addMany(a);this.sortTiles()};g.prototype.sortTiles=function(){this.tiles.sort(function(a,b){return a.measures.visibility!==b.measures.visibility?2===a.measures.visibility?-1:1:a.measures.distance-b.measures.distance});this.tiles.forEach(function(a,b){return a.loadPriority=b})};l([f.property({constructOnly:!0})],g.prototype,"scheduler",void 0);l([f.property({constructOnly:!0})],g.prototype,"renderCoordsHelper",void 0);l([f.property({constructOnly:!0})],
g.prototype,"tilingSchemeOwner",void 0);l([f.property({constructOnly:!0})],g.prototype,"cameraOnSurface",void 0);l([f.property({constructOnly:!0})],g.prototype,"focus",void 0);l([f.property({constructOnly:!0})],g.prototype,"viewState",void 0);l([f.property()],g.prototype,"tiles",void 0);l([f.property()],g.prototype,"tileSize",void 0);l([f.property({readOnly:!0,dependsOn:["tilingSchemeOwner.tilingScheme"]})],g.prototype,"tilingScheme",null);l([f.property()],g.prototype,"filterExtent",null);l([f.property({readOnly:!0,
dependsOn:["filterExtent","tilingScheme"]})],g.prototype,"filterExtentRect",null);l([f.property({readOnly:!0,dependsOn:["filterExtentRect"]})],g.prototype,"rootTileIds",null);l([f.property({value:!1})],g.prototype,"suspended",null);l([f.property({readOnly:!0})],g.prototype,"updating",null);return g=l([f.subclass("esri.views.3d.layers.support.FeatureTileTree3D")],g)}(f.declared(k));d.FeatureTileTree3D=r;var x=0,w=a.create(),m=10;d.default=r})},"esri/views/3d/layers/support/FeatureTileDescriptor3D":function(){define(["require",
"exports","../../../../geometry/support/aaBoundingRect"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b,h,g){void 0===g&&(g=null);this.lij=[0,0,0];this.extent=n.create();this.loadPriority=this.resolution=0;this.measures={visibility:2,screen:{rect:n.create()},distance:0,shouldSplit:!1};this.used=!1;g&&this.acquire(d,b,h,g)}d.prototype.acquire=function(k,b,h,g){this.tilingScheme=g;this.id=d.id(k,b,h);this.lij[0]=k;this.lij[1]=b;this.lij[2]=h;g.getExtent(k,
b,h,this.extent);this.resolution=g.resolutionAtLevel(k)};d.prototype.release=function(){this.tilingScheme=null};d.prototype.getChildren=function(k){var b=this.lij[0]+1,h=2*this.lij[1],g=2*this.lij[2];if(!k)return[new d(b,h,g,this.tilingScheme),new d(b,h+1,g,this.tilingScheme),new d(b,h,g+1,this.tilingScheme),new d(b,h+1,g+1,this.tilingScheme)];k[0].acquire(b,h,g,this.tilingScheme);k[1].acquire(b,h+1,g,this.tilingScheme);k[2].acquire(b,h,g+1,this.tilingScheme);k[3].acquire(b,h+1,g+1,this.tilingScheme);
return k};d.prototype.copyMeasurementsFrom=function(d){this.measures.visibility=d.measures.visibility;this.measures.shouldSplit=d.measures.shouldSplit;this.measures.distance=d.measures.distance;n.set(d.measures.screen.rect,this.measures.screen.rect)};d.id=function(d,b,h){return d+"/"+b+"/"+h};return d}();d.FeatureTileDescriptor3D=r;d.default=r})},"esri/views/3d/layers/support/FeatureTileMeasurements3D":function(){define("require exports ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingRect ./FeatureTileVisibility3D ../../support/geometryUtils ../../webgl-engine/lib/Camera".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a){this.camera=new e;this.pointOfInterestInMap=[0,0];this.screenRect=b.create();this.tileSize=a.tileSize;this.maxVerticalScreenSize=a.maxVerticalScreenSize;this.renderCoordsHelper=a.renderCoordsHelper;this.tilingScheme=a.tilingScheme;this.visibility=new h.FeatureTileVisibility3D({renderCoordsHelper:a.renderCoordsHelper})}d.prototype.begin=function(a,c,e){this.camera.copyFrom(a);this.z=e;this.pointOfInterestInMap[0]=
c.x;this.pointOfInterestInMap[1]=c.y;b.fromValues(0,0,a.fullWidth,a.fullHeight,this.screenRect);this.visibility.begin(this.camera,e)};d.prototype.end=function(){this.visibility.end()};d.prototype.updateTile=function(a){a.measures.visibility=this.visibility.calculate(a);0!==a.measures.visibility&&this.updateScreenMeasure(a);this.updateDistanceMeasure(a)};d.prototype.updateDistanceMeasure=function(a){a.measures.distance=b.distance(a.extent,this.pointOfInterestInMap)};d.prototype.updateScreenMeasure=
function(c){var e=a,d=1<<e,f=c.measures.screen.rect;b.empty(f);for(var g=0,h=c.lij[0]+e,k=c.lij[1]<<e,e=c.lij[2]<<e,l=this.tileSizeWithBias(c),l=l*l,p=!1,m=0;m<d;m++){for(var q=0;q<d&&!(p=this.computeScreenArea(c,h,k+m,e+q,f),g+=p.area,p=g>l&&b.height(f)>this.maxVerticalScreenSize);q++);if(p)break}c.measures.shouldSplit=g>l};d.prototype.tileSizeWithBias=function(a){return 1===a.measures.visibility?this.tileSize*p:this.tileSize};d.prototype.computeScreenArea=function(a,e,d,h,k){var l=q.points;this.projectToScreen(e,
d,h,1===a.measures.visibility,l);b.empty(c);for(a=0;4>a;a++)b.expandPointInPlace(c,l[a]);b.expand(k,c);b.intersection(c,this.screenRect,f);q.screenOverlap=b.area(f)/b.area(c);q.area=g.triangle.areaPoints2d(l[0],l[1],l[2])+g.triangle.areaPoints2d(l[0],l[2],l[3]);return q};d.prototype.projectToScreen=function(a,b,c,e,d){this.tilingScheme.ensureMaxLod(a);this.tilingScheme.getExtent(a,b,c,v);this.toRenderCoords(v,0,3,y[0]);this.toRenderCoords(v,2,3,y[1]);this.toRenderCoords(v,2,1,y[2]);this.toRenderCoords(v,
0,1,y[3]);e&&(this.projectToPlane(y,this.camera.frustum.planes[4]),this.projectToPlane(y,this.camera.frustum.planes[3]),this.projectToPlane(y,this.camera.frustum.planes[2]));for(a=0;4>a;a++)this.camera.projectPoint(y[a],w),this.camera.renderToScreen(w,d[a])};d.prototype.projectToPlane=function(a,b){for(var c=0;4>c;c++)x[c]=g.plane.signedDistance(b,a[c]);c=Math.max(x[0],x[1],x[2],x[3]);if(0<c)for(b=l.vec3.scale(t,b,-c),c=0;4>c;c++)l.vec3.add(a[c],a[c],b)};d.prototype.toRenderCoords=function(a,b,c,
e){t[0]=a[b];t[1]=a[c];t[2]=this.z;this.renderCoordsHelper.toRenderCoords(t,this.tilingScheme.spatialReference,e);return e};return d}();d.FeatureTileMeasurements3D=r;var c=b.create(),f=b.create(),a=2,p=5,q={points:[n.createScreenPointArray(),n.createScreenPointArray(),n.createScreenPointArray(),n.createScreenPointArray()],area:0,screenOverlap:0},v=b.create(),t=k.vec3f64.create(),y=[k.vec3f64.create(),k.vec3f64.create(),k.vec3f64.create(),k.vec3f64.create()],x=[0,0,0,0],w=n.createRenderScreenPointArray3();
d.default=r})},"esri/views/3d/layers/support/FeatureTileVisibility3D":function(){define("require exports ../../../../core/ObjectPool ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./FeatureTileDescriptor3D ../../state/Frustum ../../support/FrustumExtentIntersection ../../support/geometryUtils ../../support/mathUtils".split(" "),function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(a){this.surfaceElevation=0;this.cache=
new Map;a=a.renderCoordsHelper;this.frustum=new h.Frustum({renderCoordsHelper:a});this.extendedFrustum=new h.Frustum({renderCoordsHelper:a});this.intersector=new g.FrustumExtentIntersection({renderCoordsHelper:a});this.renderCoordsHelper=a}b.prototype.begin=function(a,b){this.surfaceElevation=b;this.aboveGround=this.renderCoordsHelper.getAltitude(a.eye)>b;this.frustum.update(a);this.shortenFrustumFarPlane(this.frustum);this.updateExtendedFrustum(a,b)};b.prototype.end=function(){this.cache.clear()};
b.prototype.calculate=function(b){if(this.allTilesInvisible)return 0;var c="global"===this.renderCoordsHelper.type&&b.lij[0]>=f&&b.lij[0]<a,e=this.getOrCalculateSingleTileVisibility(b,!c);return 0!==e&&c?this.calculateAggregatedChildrenVisibility(b):e};b.prototype.shortenFrustumFarPlane=function(a){for(var b=a.mutablePoints,c=0,e=h.Frustum.nearFarLineIndices;c<e.length;c++){var d=e[c],f=d[1],d=b[d[0]];l.vec3.subtract(v,b[f],d);l.vec3.scale(v,v,q);l.vec3.add(b[f],d,v)}a.updatePoints(b)};b.prototype.calculateAggregatedChildrenVisibility=
function(a){var b=0,c=this.cache.get(a.id);if(null!=c)return c;c=t.acquire();a.getChildren(c);for(var e=0;e<c.length;e++){var d=this.calculate(c[e]);if(0!==d&&(b=d,2===d))break}t.release(c);this.cache.set(a.id,b);return b};b.prototype.getOrCalculateSingleTileVisibility=function(a,b){var c=this.cache.get(a.id);if(null!=c)return c;c=this.calculateSingleTileVisibility(a);b&&this.cache.set(a.id,c);return c};b.prototype.calculateSingleTileVisibility=function(a){if(!this.aboveGround&&"global"===this.renderCoordsHelper.type&&
a.lij[0]<p){if(0===this.calculateSingleTileVisibilitySided(a,!1))return this.calculateSingleTileVisibilitySided(a,!0)}else return this.calculateSingleTileVisibilitySided(a,this.aboveGround)};b.prototype.calculateSingleTileVisibilitySided=function(a,b){this.intersector.update(a.extent,a.tilingScheme.spatialReference,this.surfaceElevation,b);return this.intersector.isVisibleInFrustum(this.extendedFrustum)?this.intersector.isVisibleInFrustum(this.frustum,!0)?2:1:0};b.prototype.updateExtendedFrustum=
function(a,b){var d=this.renderCoordsHelper;this.extendedFrustum.update(a);this.shortenFrustumFarPlane(this.extendedFrustum);var f=this.renderCoordsHelper.worldUpAtPosition(a.eye,v);this.aboveGround||l.vec3.negate(f,f);f=c.acos(-l.vec3.dot(f,a.viewForward));this.allTilesInvisible=f>(Math.PI+a.fovY)/2;if(!this.allTilesInvisible&&(this.hasExtendedFrustum=f>a.fovY/2)){a=this.extendedFrustumParameters(b);b=this.extendedFrustum.mutablePoints;for(f=0;4>f;f++){var g=a.pointIndices[f],h=b[g],k=d.getAltitude(h);
if(a.needsAltitudeAdjustment(k)){this.renderCoordsHelper.worldUpAtPosition(h,v);switch(g){case 4:case 7:case 0:case 3:e.plane.projectVector(this.extendedFrustum.planes[0],v,v);break;case 5:case 6:case 1:case 2:e.plane.projectVector(this.extendedFrustum.planes[1],v,v)}l.vec3.scale(v,v,a.direction);this.renderCoordsHelper.intersectInfiniteManifold(e.ray.wrap(h,v),a.zWithMargin,h)}}this.extendedFrustum.updatePoints(b);0>l.vec3.dot(this.extendedFrustum.planes[4],this.frustum.planes[4])&&(d=this.extendedFrustum.mutablePoints,
this.aboveGround?(a=[d[1],d[0]],d[0]=a[0],d[1]=a[1]):(a=[d[2],d[3]],d[3]=a[0],d[2]=a[1]),this.extendedFrustum.updatePoints(d))}};b.prototype.extendedFrustumParameters=function(a){return this.aboveGround?this.extendedFrustumParametersAboveSurface(a,1):this.extendedFrustumParametersBelowSurface(a,1)};b.prototype.extendedFrustumParametersAboveSurface=function(a,b){var c=a-b;return{zWithMargin:c,pointIndices:h.Frustum.planePointIndices.bottom,direction:-1,needsAltitudeAdjustment:function(a){return a>
c}}};b.prototype.extendedFrustumParametersBelowSurface=function(a,b){var c=a+b;return{zWithMargin:c,pointIndices:h.Frustum.planePointIndices.top,direction:1,needsAltitudeAdjustment:function(a){return a<c}}};return b}();d.FeatureTileVisibility3D=r;var f=2,a=6,p=12,q=.95,v=k.vec3f64.create(),t=new n(Array,function(a){4!==a.length&&(a[0]=new b.FeatureTileDescriptor3D,a[1]=new b.FeatureTileDescriptor3D,a[2]=new b.FeatureTileDescriptor3D,a[3]=new b.FeatureTileDescriptor3D)},function(a){a[0].release();
a[1].release();a[2].release();a[3].release()});d.default=r})},"esri/views/3d/state/Frustum":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/mathUtils ../support/geometryUtils/frustum".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this.frustum=b.create();this.lines=Array(12);this.origin=l.vec3f64.create();this.direction=l.vec3f64.create();this._altitude=null;this.renderCoordsHelper=
d?d.renderCoordsHelper:null;for(d=0;12>d;d++)this.lines[d]={origin:null,direction:l.vec3f64.create(),endpoint:null}}Object.defineProperty(d.prototype,"planes",{get:function(){return this.frustum.planes},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"points",{get:function(){return this.frustum.points},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"mutablePoints",{get:function(){return this.frustum.points},enumerable:!0,configurable:!0});d.prototype.update=function(d){b.fromMatrix(d.viewMatrix,
d.projectionMatrix,this.frustum);n.vec3.copy(this.origin,d.eye);n.vec3.copy(this.direction,d.viewForward);this._altitude=this.renderCoordsHelper.getAltitude(this.origin);this.updateLines()};d.prototype.updatePoints=function(d){for(var e=0;e<this.frustum.points.length;e++)n.vec3.copy(this.frustum.points[e],d[e]);b.recomputePlanes(this.frustum);this.updateLines()};Object.defineProperty(d.prototype,"altitude",{get:function(){return this._altitude},enumerable:!0,configurable:!0});d.prototype.intersectsSphere=
function(d){return b.intersectsSphere(this.frustum.planes,d)};d.prototype.intersectsRay=function(d){return b.intersectsRay(this.frustum.planes,d)};d.prototype.intersectsLineSegment=function(d,e){return b.intersectsLineSegment(this.frustum.planes,d,e)};d.prototype.intersectsPoint=function(d){return b.intersectsPoint(this.frustum.planes,d)};d.prototype.updateLines=function(){for(var b=this.frustum.points,e=0;4>e;e++){var c=e,d=e+4;this.updateLine(this.lines[e],b[c],b[d]);this.updateLine(this.lines[e+
4],b[c],3===e?b[0]:b[c+1]);this.updateLine(this.lines[e+8],b[d],3===e?b[4]:b[d+1])}};d.prototype.updateLine=function(b,e,c){b.origin=e;b.endpoint=c;k.directionFromTo(b.direction,e,c)};d.planePointIndices=b.planePointIndices;d.nearFarLineIndices=[[0,4],[1,5],[2,6],[3,7]];return d}();d.Frustum=r;d.default=r})},"esri/views/3d/support/FrustumExtentIntersection":function(){define("require exports ../../../core/compilerUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ./earthUtils ./geometryUtils ./intersectionUtils ./mathUtils ./projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){Object.defineProperty(d,"__esModule",{value:!0});r=.5*Math.PI;var v=r/Math.PI*180,t=r*c.earthRadius,y=.9*c.earthRadius;c=function(){function c(a){this.renderCoordsHelper=a.renderCoordsHelper;this.extent=Array(4);this.planes=Array(6);this.maxSpan=0;this.center={origin:h.vec3f64.create(),direction:h.vec3f64.create()};for(a=0;4>a;a++)this.extent[a]={origin:h.vec3f64.create(),direction:h.vec3f64.create(),cap:{next:null,direction:h.vec3f64.create()}},this.planes[a]=
f.plane.create();this.planes[4]=f.plane.create();this.planes[5]=f.plane.create();this.planesWithoutFar=this.planes.slice(0,5)}c.prototype.update=function(a,c,e,d){void 0===d&&(d=!0);var g=this.extent;this.toRenderBoundingExtent(a,c,e);b.vec3.add(this.center.origin,g[0].origin,g[2].origin);b.vec3.scale(this.center.origin,this.center.origin,.5);this.renderCoordsHelper.worldUpAtPosition(this.center.origin,this.center.direction);d||b.vec3.scale(this.center.direction,this.center.direction,-1);for(e=0;4>
e;e++){var h=g[e];this.renderCoordsHelper.worldUpAtPosition(h.origin,h.direction);var k=g[3===e?0:e+1];h.cap.next=k.origin;p.directionFromTo(h.cap.direction,h.origin,k.origin);f.plane.fromVectorsAndPoint(h.direction,h.cap.direction,h.origin,this.planes[e]);d||b.vec3.scale(h.direction,h.direction,-1)}f.plane.fromVectorsAndPoint(g[0].cap.direction,g[1].cap.direction,g[0].origin,this.planes[4]);d?f.plane.negate(this.planes[4],this.planes[5]):(f.plane.copy(this.planes[4],this.planes[5]),f.plane.negate(this.planes[4],
this.planes[4]));this.maxSpan=Math.max(Math.abs(a[0]-a[2]),Math.abs(a[1]-a[3]));this.maxSpanSpatialReference=c};c.prototype.isVisibleInFrustum=function(b,c){void 0===c&&(c=!1);if(null==b)return!1;if("global"===this.renderCoordsHelper.type){if(this.maxSpan>(this.maxSpanSpatialReference.isGeographic?v:t))return!0;if(b.altitude>=y)return this.isVisibleInFrustumGlobal(b)}if(0===this.maxSpan){var e=this.extent[0];return!c&&b.intersectsRay(f.ray.wrap(e.origin,e.direction))?!0:!1}for(var d=0;d<this.extent.length;d++)if(e=
this.extent[d],!c&&b.intersectsRay(f.ray.wrap(e.origin,e.direction))||b.intersectsLineSegment(f.lineSegment.fromPoints(e.origin,e.cap.next,B),e.cap.direction))return!0;c=c?this.planes:this.planesWithoutFar;for(d=0;d<b.lines.length;d++)if(e=b.lines[d],a.frustumLineSegment(c,e.origin,e.endpoint,e.direction))return!0;return!1};c.prototype.toRenderBoundingExtentGlobal=function(a,c,d){e.center(a,w);w[2]=d;q.computeLinearTransformation(c,w,m,this.renderCoordsHelper.spatialReference);l.mat4.invert(u,m);
g.empty(z);for(var f=0,h=x;f<h.length;f++)for(var k=h[f],n=k.x0,t=k.x1,v=k.y0,k=k.y1,y=0;5>y;y++){var B=y/4;w[0]=p.lerp(a[n],a[t],B);w[1]=p.lerp(a[v],a[k],B);w[2]=d;q.vectorToVector(w,c,w,this.renderCoordsHelper.spatialReference);b.vec3.transformMat4(w,w,u);g.expandPointInPlace(z,w)}b.vec3.set(this.extent[0].origin,z[0],z[1],z[2]);b.vec3.set(this.extent[1].origin,z[3],z[1],z[2]);b.vec3.set(this.extent[2].origin,z[3],z[4],z[2]);b.vec3.set(this.extent[3].origin,z[0],z[4],z[2]);for(y=0;4>y;++y)b.vec3.transformMat4(this.extent[y].origin,
this.extent[y].origin,m)};c.prototype.toRenderBoundingExtentLocal=function(a,c,e){b.vec3.set(this.extent[0].origin,a[0],a[1],e);b.vec3.set(this.extent[1].origin,a[2],a[1],e);b.vec3.set(this.extent[2].origin,a[2],a[3],e);b.vec3.set(this.extent[3].origin,a[0],a[3],e)};c.prototype.toRenderBoundingExtent=function(a,b,c){switch(this.renderCoordsHelper.type){case "global":this.toRenderBoundingExtentGlobal(a,b,c);break;case "local":this.toRenderBoundingExtentLocal(a,b,c);break;default:n.neverReached(this.renderCoordsHelper.type)}};
c.prototype.isVisibleInFrustumGlobal=function(a){if(0>b.vec3.dot(this.center.direction,a.direction))return!0;for(var c=0;4>c;c++)if(0>b.vec3.dot(this.extent[c].direction,a.direction))return!0;return!1};return c}();d.FrustumExtentIntersection=c;var x=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],w=h.vec3f64.create(),m=k.mat4f64.create(),u=k.mat4f64.create(),z=g.create(),B=f.lineSegment.create();d.default=c})},"esri/views/support/index":function(){define(["require",
"exports","./Scheduler"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.noBudget=n.noBudget})},"esri/views/support/Scheduler":function(){define("require exports @dojo/framework/shim/number ../../core/maybe ../../core/now ../../core/PooledArray".split(" "),function(r,d,n,l,k,b){function h(b){return new g.Budget(b)}Object.defineProperty(d,"__esModule",{value:!0});d.newScheduler=function(b){return new g.Scheduler(b)};d.newBudget=h;var g;(function(c){var d=function(){function d(a){this._now=
a;this._budget=null;this._state=1;this._tasks=new b;this._runQueue=new b;this._load=0;this._idleStateCallbacks=new b;this._idleUpdatesStartFired=!1;this._maxReschedule=e;this._forceTask=!1;this._safetyBudget=0;this._budget=new c.Budget(a);var d=this;this._test={state:void 0,FRAME_SAFETY_BUDGET:1,idleBudget:100,get budget(){return d._budget.budget},elapsed:0}}d.prototype.registerTask=function(a,b,c){var e=this,d={update:b,needsUpdate:c,priority:a,schedule:a};this._tasks.push(d);return{remove:function(){return e._removeTask(d)},
set priority(a){d.priority=a;0!==d.schedule&&(d.schedule=a)}}};d.prototype.registerIdleStateCallbacks=function(a,b){var c=this,e={idleBegin:a,idleEnd:b};this._idleStateCallbacks.push(e);2===this.state&&this._idleUpdatesStartFired&&e.idleBegin();var d=this;return{remove:function(){return c._removeIdleStateCallbacks(e)},set idleBegin(a){d._idleUpdatesStartFired&&(e.idleEnd(),2===d._state&&a());e.idleBegin=a},set idleEnd(a){e.idleEnd=a}}};Object.defineProperty(d.prototype,"now",{get:function(){return this._now()},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"load",{get:function(){return this._load},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return l.isNone(this._test.state)?this._state:this._test.state},set:function(a){this._state!==a&&(this._state=a,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forEach(function(a){return a.idleEnd()})))},enumerable:!0,configurable:!0});d.prototype.updateBudget=
function(a){var b=2===this.state,c=a.frameDuration;switch(this.state){case 2:c=100;break;case 1:c=Math.max(33,a.frameDuration);break;case 0:c=a.frameDuration}this._safetyBudget=b?0:1;c-=a.elapsedFrameTime+this._safetyBudget;this._test.elapsed=0;if(!b&&0>c&&!this._forceTask)return this._forceTask=!0,!1;c=Math.max(c,5);this._budget.reset(c,b);this._maxReschedule=e;return this._schedule()};d.prototype.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forEach(function(a){return a.idleBegin()}));this._idleFrame();break;case 1:this._movingFrame();break;default:this._run()}this._test.elapsed=this._budget.elapsed};d.prototype._removeIdleStateCallbacks=function(a){this._idleUpdatesStartFired&&a.idleEnd();this._idleStateCallbacks.removeUnordered(a)};d.prototype._removeTask=function(a){this._tasks.removeUnordered(a);this._runQueue.removeUnordered(a)};d.prototype._idleFrame=function(){this._run()};d.prototype._movingFrame=function(){this._run()};
d.prototype._schedule=function(){var b=this;if(0>=this._maxReschedule)return!1;this._runQueue.forEach(function(b){b.needsUpdate()||(a.push(b),b.schedule=b.priority)});this._runQueue.removeUnorderedMany(a.data,a.length);a.clear();for(var c=function(){var a=0,c=0;d._tasks.forEach(function(e){if(e.needsUpdate())switch(++a,c=Math.max(c,e.priority),e.schedule){case 0:break;case 1:e.schedule=0;b._runQueue.push(e);break;default:--e.schedule}});if(0===a)return d._load*=.9,{value:!1};d._maxReschedule===e&&
(d._maxReschedule=c,d._load=.9*d._load+a*(1-.9));--d._maxReschedule},d=this;0===this._runQueue.length;){var f=c();if("object"===typeof f)return f.value}return!0};d.prototype._run=function(){do for(;0<this._runQueue.length;){var a=this._runQueue.pop();this._budget.resetProgress();a.update(this._budget);a.schedule=a.priority;if(0>=this._budget.remaining)return}while(this._schedule())};Object.defineProperty(d.prototype,"test",{get:function(){return this._test},enumerable:!0,configurable:!0});return d}();
c.Scheduler=d;var a=new b,d=function(){function a(a){this.now=a;this._budget=this._begin=0;this._didWork=this._idle=!1;this._enabled=!0}a.prototype.run=function(a){if(this.done)return!1;!0===a()&&(this._didWork=!0);return!0};Object.defineProperty(a.prototype,"done",{get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"budget",{get:function(){return this._budget},enumerable:!0,configurable:!0});a.prototype.madeProgress=
function(){this._didWork=!0};Object.defineProperty(a.prototype,"idleFrame",{get:function(){return this._idle},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a},enumerable:!0,configurable:!0});a.prototype.reset=function(a,b){this._begin=this.now();this._budget=a;this._idle=b;this._didWork=!1};Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"elapsed",{get:function(){return this.now()-this._begin},enumerable:!0,configurable:!0});a.prototype.resetProgress=function(){this._didWork=!1};Object.defineProperty(a.prototype,"hasProgressed",{get:function(){return this._didWork},enumerable:!0,configurable:!0});return a}();c.Budget=d})(g||(g={}));d.noBudget=function(){var b=h(k);b.enabled=!1;return b}();var e=n.MAX_SAFE_INTEGER})},"esri/views/3d/layers/support/FeatureTileTree3DDebugger":function(){define("require exports ../../../../Graphic ../../../../core/Handles ../../../../core/watchUtils ../../../../symbols/FillSymbol3DLayer ../../../../symbols/PointSymbol3D ../../../../symbols/PolygonSymbol3D ../../../../symbols/TextSymbol3DLayer ../../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});var f=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];r=function(){function a(a){var c=this;this.view=a;this.graphics=[];this.handles=new l;this._enabled=!0;this.symbols=f.map(function(a){return new g(new b({material:{color:[a[0],a[1],
a[2],.6]},outline:{color:"black",size:1}}))});this.handles.add([a.featureTiles.addClient(),k.on(a.featureTiles,"tiles","change",function(){return c.update()},function(){return c.update()})])}Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a;this.update()},enumerable:!0,configurable:!0});a.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.view&&(this.clear(),this.view=null)};a.prototype.update=
function(){var a=this;this.clear();if(this._enabled){var b=this.view.featureTiles,d=b.tilingScheme,f=b.tiles.toArray().sort(function(a,b){return a.loadPriority-b.loadPriority});f.forEach(function(b,g){var k=b.lij,l=k[0],p=k[1],q=k[2],t=d.getExtentGeometry(l,p,q),k=new n({geometry:t,symbol:a.symbols[l%a.symbols.length]}),v=g/(f.length-1);g=c.lerp(0,200,v);var v=c.lerp(20,6,v),y=b.loadPriority>=f.length;b=new n({geometry:t.center,symbol:new h({verticalOffset:{screenLength:40/.75},callout:{type:"line",
color:"white",border:{color:"black"}},symbolLayers:[new e({text:l+"/"+p+"/"+q+" ("+b.loadPriority+")",halo:{color:"white",size:1/.75},material:{color:[g,y?0:g,y?0:g]},size:v/.75})]})});a.graphics.push(k,b);a.view.graphics.addMany([k,b])})}};a.prototype.clear=function(){this.view.graphics.removeMany(this.graphics);this.graphics=[]};return a}();d.FeatureTileTree3DDebugger=r;d.default=r})},"esri/views/3d/layers/support/MemoryManagedLayerView":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,
"__esModule",{value:!0});d.isMemoryManagedLayerView=function(d){return"function"===typeof d.getUsedMemory}})},"esri/views/3d/state/ViewState":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Evented ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3f64 ../../ViewAnimation ./Constraints ./controllers/AnimationController ./controllers/CameraController ../support/earthUtils ../support/PropertiesPool ../webgl-engine/lib/Camera".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function k(a){a=d.call(this,a)||this;a.propertiesPool=new q.default({camera:v},a);a.lastSeenCameraProjectionValues=new v;a.events=new b;a.updateQueue=[];a.processingUpdates=!1;return a}n(k,d);k.prototype.destroy=function(){this.cameraController=null;this.propertiesPool&&(this.propertiesPool.destroy(),this.propertiesPool=null)};k.prototype.normalizeCtorArgs=function(a){return{camera:this.createInitialCamera(a.viewingMode),
mode:a.viewingMode,spatialReference:a.spatialReference,constraints:new c.default({mode:a.viewingMode})}};Object.defineProperty(k.prototype,"animation",{get:function(){return this.cameraController instanceof f.AnimationController?this.cameraController.viewAnimation:null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"camera",{get:function(){return this._get("camera")},set:function(a){a!==t&&t.copyFrom(a);t.markViewDirty();t.computeUp(this.mode);y.camera=t;this.events.emit("before-camera-change",
y);a=this._get("camera");this.cameraProjectionChanged(this.lastSeenCameraProjectionValues,t)&&(this.lastSeenCameraProjectionValues.copyFrom(t),x.camera=this.lastSeenCameraProjectionValues,this.events.emit("camera-projection-changed",x));a&&a.equals(t)||this._set("camera",this.propertiesPool.get("camera").copyFrom(t))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isGlobal",{get:function(){return!this.isLocal},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isLocal",
{get:function(){return"local"===this.mode},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"interacting",{get:function(){return!!this.cameraController&&this.cameraController.isInteractive},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"cameraController",{get:function(){return this._get("cameraController")},set:function(b){var c=this;this.stopActiveCameraController()?(b&&(b.watch("state",function(e){if(e===a.State.Finished||e===a.State.Stopped)c._set("cameraController",
null),c.updateCamera(function(a){return b.onControllerEnd(a)})},!0),b.onControllerStart(this.camera)),this._set("cameraController",b)):b&&(b.state=a.State.Rejected)},enumerable:!0,configurable:!0});k.prototype.switchCameraController=function(b){this.cameraController=b;return b.state!==a.State.Rejected};k.prototype.stopActiveCameraController=function(){return this.cameraController&&!this.cameraController.stopController()?!1:!0};k.prototype.cameraChanged=function(){this.updateCamera(function(){})};
k.prototype.updateCamera=function(a){this.updateQueue.push(a);this.processUpdateQueue()};k.prototype.processUpdateQueue=function(){if(0!==this.updateQueue.length&&!this.processingUpdates){this.processingUpdates=!0;var a=this.updateQueue.shift();t.copyFrom(this._get("camera"));a(t);this.camera=t;this.processingUpdates=!1;this.processUpdateQueue()}};k.prototype.createInitialCamera=function(a){return"global"===a?new v(g.vec3f64.fromValues(4*p.earthRadius,0,0),g.vec3f64.fromValues(p.earthRadius,0,0),
g.vec3f64.fromValues(0,0,1)):new v(g.vec3f64.fromValues(0,0,100),g.vec3f64.fromValues(0,0,0),g.vec3f64.fromValues(0,1,0))};k.prototype.cameraProjectionChanged=function(a,b){return a.fov!==b.fov||a.fullViewport[0]!==b.fullViewport[0]||a.fullViewport[1]!==b.fullViewport[1]||a.fullViewport[2]!==b.fullViewport[2]||a.fullViewport[3]!==b.fullViewport[3]||a.padding[0]!==b.padding[0]||a.padding[1]!==b.padding[1]||a.padding[2]!==b.padding[2]||a.padding[3]!==b.padding[3]?!0:!1};l([h.property({readOnly:!0,type:e,
dependsOn:["cameraController"]})],k.prototype,"animation",null);l([h.property({type:v})],k.prototype,"camera",null);l([h.property({constructOnly:!0})],k.prototype,"constraints",void 0);l([h.property({readOnly:!0})],k.prototype,"events",void 0);l([h.property({readOnly:!0,dependsOn:["isLocal"]})],k.prototype,"isGlobal",null);l([h.property({readOnly:!0,dependsOn:["mode"]})],k.prototype,"isLocal",null);l([h.property({constructOnly:!0})],k.prototype,"mode",void 0);l([h.property({constructOnly:!0})],k.prototype,
"spatialReference",void 0);l([h.property({readOnly:!0,dependsOn:["cameraController"]})],k.prototype,"interacting",null);l([h.property()],k.prototype,"cameraController",null);return k=l([h.subclass("esri.views.3d.state.ViewState")],k)}(h.declared(k));d.ViewState=r;var t=new v,y={camera:null},x={camera:null};d.default=r})},"esri/views/3d/support/PropertiesPool":function(){define(["require","exports","../../../core/ReentrantObjectPool","../../../core/accessorSupport/watch"],function(r,d,n,l){Object.defineProperty(d,
"__esModule",{value:!0});r=function(){function d(b,d){var g=this;this.owner=d;this.properties={};this.afterDispatchHandle=null;for(var e in b)d=new n.ReentrantObjectPool(b[e],null,null,2,2),this.properties[e]={pool:d,acquired:[]};this.afterDispatchHandle=l.afterDispatch(function(){return g.release()})}d.prototype.destroy=function(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(var b in this.properties){for(var d=this.properties[b],g=0,e=d.acquired;g<
e.length;g++){var c=e[g];l.isValueInUse(c)||d.pool.release(c)}d.pool.destroy();d.pool=null;d.acquired=null}this.owner=this.properties=null};d.prototype.get=function(b){var d=this.owner._get(b);b=this.properties[b];var g=b.pool.acquire();for(b.acquired.push(g);g===d;)b.acquired.push(g),g=b.pool.acquire();return g};d.prototype.release=function(){for(var b in this.properties){for(var d=this.properties[b],g=0,e=0,c=d.acquired;e<c.length;e++){var f=c[e];l.isValueInUse(f)?d.acquired[g++]=f:d.pool.release(f)}d.acquired.length=
g}};return d}();d.PropertiesPool=r;d.default=r})},"esri/views/3d/state/ViewStateManager":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../Viewpoint ../../../core/Accessor ../../../core/Error ../../../core/Handles ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/scheduling ../../../core/screenUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/Extent ../../../geometry/Point ../../../geometry/support/webMercatorUtils ../camera/constraintUtils ../camera/intersectionUtils ./ConstraintsManager ./Frustum ./controllers/PointToPointAnimationController ./controllers/SurfaceCollisionCorrectionController ../support/cameraUtils ../support/PropertiesPool ../support/viewpointUtils ../webgl-engine/lib/Camera ../../animation/easing".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V){Object.defineProperty(d,"__esModule",{value:!0});var T=p.getLogger("esri.views.3d.state.ViewStateManager");r=function(c){function d(b){b=c.call(this)||this;b.propertiesPool=new H.default({frustum:L.default},b);b.handles=new a;b.cameraSetByUser=!1;b.internalSetOrder=[];b.immediateGoToController=null;b.animatedGoToController=null;b.ready=!1;b.updateDevicePixelRatio=null;return b}l(d,c);Object.defineProperty(d.prototype,
"camera",{get:function(){return this.ready?I.internalToExternal(this.view,this.view.state.camera):this._get("camera")},set:function(a){this.updatePropertyBeforeReady("camera",a)||this.setStateCamera(I.externalToInternal(this.view,a),{applyConstraints:!1})||T.error("#camera\x3d","Invalid camera",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"center",{get:function(){return this.ready?this.view.pointsOfInterest.centerOnContent.location:this._get("center")},set:function(a){this.updatePropertyBeforeReady("center",
a)||(a?this.isCompatible(a)?this.setStateCamera(this.centerToCamera(a),{applyConstraints:!0})?this.view.pointsOfInterest.centerOnContent.update():T.error("#center\x3d","Invalid center",a):T.error("#center\x3d","Center has an incompatible spatial reference (center: "+(a.spatialReference?a.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a):T.error("#center\x3d","Center may not be null or undefined"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",
{get:function(){return this.ready?I.toExtent(this.view,null,null,null,R):this._get("extent")},set:function(a){this.updatePropertyBeforeReady("extent",a)||(a?this.isCompatible(a)?this.setStateCamera(this.extentToCamera(a),{applyConstraints:!0})||T.error("#extent\x3d","Invalid extent",a):T.error("#extent\x3d","Extent has an incompatible spatial reference (extent: "+(a.spatialReference?a.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a):T.error("#extent\x3d","Extent may not be null or undefined"))},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"frustum",{get:function(){var a=this.propertiesPool.get("frustum");a.renderCoordsHelper=this.view.renderCoordsHelper;a.update(this.view.state.camera);return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasInitialView",{get:function(){return!!this.view.get("map.initialViewProperties.viewpoint")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"scale",{get:function(){if(!this.ready)return this._get("scale");
var a=this.view.pointsOfInterest.centerOnContent;return I.distanceToScale(this.view,a.distance,a.location.latitude)},set:function(a){this.updatePropertyBeforeReady("scale",a)||this.setStateCamera(this.scaleToCamera(a),{applyConstraints:!0})||T.error("#scale\x3d","Invalid scale",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"padding",{get:function(){if(!this.ready)return this._get("padding");var a=this.view.state.camera,b=a.padding,c=a.pixelRatio,a=this._get("padding"),e=b[0]/
c,d=b[1]/c,f=b[2]/c,b=b[3]/c;return null!=a&&a.top===e&&a.right===d&&a.bottom===f&&a.left===b?a:{top:e,right:d,bottom:f,left:b}},set:function(a){this.updatePropertyBeforeReady("padding",a)||(this.paddingToArray(a,this.view.state.camera.pixelRatio,X),this.view.state.updateCamera(function(a){return a.padding=X}))},enumerable:!0,configurable:!0});d.prototype.paddingToArray=function(a,b,c){a?m.vec4.set(c,a.top||0,a.right||0,a.bottom||0,a.left||0):m.vec4.set(c,0,0,0,0);for(a=0;4>a;a++)c[a]=Math.round(c[a]*
b)};Object.defineProperty(d.prototype,"screenCenter",{get:function(){var a=this.padding;return y.createScreenPoint((this.view.width-(a.left+a.right))/2+a.left,(this.view.height-(a.top+a.bottom))/2+a.top)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{get:function(){return this.ready?S.fromCamera(this.view,this.camera):this._get("viewpoint")},set:function(a){if(!this.updatePropertyBeforeReady("viewpoint",a))if(a)if(this.isCompatible(a))this.setStateCamera(this.viewpointToCamera(a),
{applyConstraints:!a.camera})||T.error("#viewpoint\x3d","Invalid viewpoint",a);else{var b=a.camera?a.camera.position:a.targetGeometry,b=b&&b.spatialReference;T.error("#viewpoint\x3d","Viewpoint has an incompatible spatial reference (viewpoint: "+(b?b.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",a)}else T.error("#viewpoint\x3d","Viewpoint may not be null or undefined")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"zoom",{get:function(){return this.ready?I.scaleToZoom(this.view,
this.scale):this._get("zoom")},set:function(a){this.updatePropertyBeforeReady("zoom",a)||this.setStateCamera(this.zoomToCamera(a),{applyConstraints:!0})||T.error("#zoom\x3d","Invalid zoom",a)},enumerable:!0,configurable:!0});d.prototype.initialize=function(){var a=this;this.handles.add([this.view.watch("state.camera",function(b){return a.cameraChangedSync(b)},!0),x.on(this.view,"state.events","before-camera-change",function(b){return a.beforeCameraChangeHandle(b.camera)})]);x.once(this.view,"state.camera",
function(b){return a.updateCameraElevation(b)});this.handles.add(t.addFrameTask({prepare:function(){return a.prepareFrame()}}));this.handles.add(this.view.watch("state.cameraController",function(){a.cameraSetByUser=!0;a.handles.remove(ca);a.cancelImmediateGoTo()}));this.handles.add(x.on(this.view,"state.events","camera-projection-changed",function(){return a.notifyChange("scale")}))};d.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.propertiesPool&&(this.propertiesPool.destroy(),
this.propertiesPool=null)};d.prototype.init=function(){var a=this;this.constraintsManager=new N.default({view:this.view});this.prepareFrame();var b=this.getInitialProperties();this.cameraSetByUser=!1;this._set("ready",!0);for(var c=0;c<b.length;c++){var e=b[c];this.set(e.name,e.value)}this.cameraSetByUser||((b=this.view.get("map.initialViewProperties.viewpoint")||this.view.initialExtent)&&this.isCompatible(b)?this.setInitialView(b):"local"===this.view.state.mode&&this.handles.add(x.whenOnce(this.view.basemapTerrain,
"ready",function(){a.handles.remove(ca);a.setInitialView(a.view.groundExtent)}),ca))};d.prototype.deinit=function(){this.ready&&(this._override("padding",this.padding),this.cancelImmediateGoTo(),this.cancelAnimatedGoTo(),this._set("ready",!1),this._clearOverride("hasInitialView"),this.internalSetOrder.length=0,this.cameraSetByUser=!1,this.handles.remove(ca),this.constraintsManager&&(this.constraintsManager.destroy(),this.constraintsManager=null))};d.prototype.goTo=function(a,c){return h(this,void 0,
void 0,function(){var e;return b(this,function(b){e=n({animate:!0},c);return e.animate?[2,this.goToAnimated(a,e)]:[2,this.goToImmediate(a,e)]})})};d.prototype.debugSetCameraOnContent=function(){this.setStateCamera(E.cameraOnContentAlongViewDirection(this.view),{applyConstraints:!1})};d.prototype.step=function(a){var b=this.view.state,c=b&&this.view.state.cameraController;c&&(b.updateCamera(function(b){c.stepController(a,b)}),c.steppingFinished&&c.finishController())};d.prototype.cancelImmediateGoTo=
function(){var a=this.immediateGoToController;q.isSome(a)&&(this.immediateGoToController=null,a.abort())};d.prototype.cancelAnimatedGoTo=function(){var a=this.animatedGoToController;q.isSome(a)&&(this.animatedGoToController=null,a.abort())};d.prototype.getInitialProperties=function(){for(var a=this,b=new Set,c=[],e=0,d=Q;e<d.length;e++){var f=d[e],g=f.propertyName,f=f.overrides,h=b.has(g),k=this._isOverridden(g);!h&&k&&c.push({name:g,value:this._get(g)});this._clearOverride(g);(h||k)&&f.forEach(function(a){return b.add(a)})}return c.sort(function(b,
c){b=a.internalSetOrder.indexOf(b.name);c=a.internalSetOrder.indexOf(c.name);return b<c?-1:b>c?1:0})};d.prototype.setInitialView=function(a){if(a&&!this.cameraSetByUser)if(a instanceof g)this.setStateCamera(I.externalToInternal(this.view,a),{applyConstraints:!1});else if(a instanceof e)if(a.targetGeometry instanceof z){var b=I.fromExtent(this.view,a.targetGeometry,0,.5,I.OrientationMode.LOCKED);this.setStateCamera(I.externalToInternal(this.view,b),{applyConstraints:!0})}else b={applyConstraints:!a.camera},
a=this.viewpointToCamera(a),this.setStateCamera(a,b);else b=I.fromExtent(this.view,a,0,.5,I.OrientationMode.LOCKED),this.setStateCamera(I.externalToInternal(this.view,b),{applyConstraints:!0})};d.prototype.updatePropertyBeforeReady=function(a,b){if(!this.ready){this._override(a,b);var c=this.internalSetOrder.indexOf(a);-1!==c&&(this.internalSetOrder=this.internalSetOrder.splice(c,1));b&&(this.internalSetOrder.push(a),-1!==Z.indexOf(a)&&this._override("hasInitialView",!0));return!0}return!1};d.prototype.isCompatible=
function(a){return a?a instanceof e?a.camera?this.isCompatible(a.camera):this.isCompatible(a.targetGeometry):a instanceof g?this.isCompatible(a.position):a.spatialReference&&C.canProject(a.spatialReference,this.view.spatialReference):!1};d.prototype.getPreservingHeadingTilt=function(a){void 0===a&&(a=J);this.cameraSetByUser?(a.heading=this.camera.heading,a.tilt=this.camera.tilt):(a.heading=0,a.tilt=.5);return a};d.prototype.centerPointAtDistanceToCamera=function(a,b,c){void 0===c&&(c=U);var e=this.getPreservingHeadingTilt();
return(a=I.getObserverForPointAtDistance(this.view,e.heading,e.tilt,a,b,I.OrientationMode.ADJUST))?(c.copyFrom(this.view.state.camera),c.eye=a.eye,c.center=a.center,c.up=a.up,c):null};d.prototype.centerToCamera=function(a){var b=this.view.pointsOfInterest.centerOnContent;b.update();return this.centerPointAtDistanceToCamera(a,b.distance)};d.prototype.extentToCamera=function(a){var b=this.getPreservingHeadingTilt();a=I.fromExtent(this.view,a,b.heading,b.tilt,I.OrientationMode.ADJUST,R);return I.externalToInternal(this.view,
a)};d.prototype.scaleToCamera=function(a){if(null==a)return null;var b=this.view.pointsOfInterest.centerOnContent;b.update();var c=b.renderLocation;a=I.scaleToDistance(this.view,a,b.location.latitude);return this.centerPointAtDistanceToCamera(c,a)};d.prototype.zoomToCamera=function(a){return this.scaleToCamera(I.zoomToScale(this.view,a))};d.prototype.viewpointToCamera=function(a){return(a=S.toCamera(this.view,a))?I.externalToInternal(this.view,a):null};d.prototype.setStateCamera=function(a,b){var c=
this;if(!a||!this.view.state.stopActiveCameraController())return!1;this.cameraSetByUser=!0;this.cancelImmediateGoTo();this.view.state.updateCamera(function(e){e.copyFrom(a);b.applyConstraints&&F.applyAll(c.view,e)});b.applyConstraints||(this.view.state.cameraController=new O.SurfaceCollisionCorrectionController({view:this.view,desiredCamera:a}));return!0};d.prototype.prepareFrame=function(){var a=this.view,b=a.container,c=a.canvas;if(b&&c){q.isSome(this.updateDevicePixelRatio)&&this.updateDevicePixelRatio();
var a=this.view.pixelRatio,e=Math.round(b.clientWidth*a),b=Math.round(b.clientHeight*a);0!==e&&0!==b&&(c.width=e,c.height=b,this.view.state&&(c=this.view.state.camera,c.fullWidth!==e||c.fullHeight!==b||c.pixelRatio!==a))&&(U.copyFrom(c),U.pixelRatio!==a&&(this.paddingToArray(this.padding,a,X),U.padding=X),U.fullWidth=e,U.fullHeight=b,U.pixelRatio=a,this.view.state.camera=U)}};d.prototype.beforeCameraChangeHandle=function(a){this.updateCameraElevation(a)};d.prototype.cameraChangedSync=function(a){a&&
this.view._stage&&this.view._stage.setCamera(a)};d.prototype.updateCameraElevation=function(a){var b=this.view.basemapTerrain&&this.view.basemapTerrain.spatialReference,c=this.view.renderCoordsHelper.getAltitude(a.eye),b=b?E.surfaceElevationBelowEye(this.view,a):0;a.relativeElevation=c-b};d.prototype.createGoToCamera=function(a,c){return h(this,void 0,void 0,function(){var d,h,k,l,p,m,q,u;return b(this,function(b){switch(b.label){case 0:return[4,x.whenOnce(this,"ready",c.signal,!0)];case 1:return b.sent(),
v.throwIfAborted(c),[4,S.create(this.view,a,c.signal)];case 2:d=b.sent();h=!!(a instanceof e&&a.camera||a instanceof g);k=d.camera;if(!this.isCompatible(k))throw m=(p=(l=k.position)&&l.spatialReference)?p.wkid:"none",q=this.view.spatialReference.wkid,new f("goto:incompatible-spatialreference","Resulting camera has an incompatible spatial reference (camera: "+m+", view: "+q+")",{camera:k});u=I.externalToInternal(this.view,k);if(!u)throw new f("goto:invalid-camera","Resulting camera is invalid");return[2,
{viewpoint:d,camera:u,isFullySpecified:h}]}})})};d.prototype.cancellableGoTo=function(a,b){var c=this,e,d=function(){c.view.state.cameraController===a&&a.active&&a.asyncResult===e&&a.stopController()};return v.create(function(c,f){e={resolve:c,reject:f};a.asyncResult=e;v.onAbort(b,d)},d)};d.prototype.goToImmediate=function(a,c){return h(this,void 0,void 0,function(){var e,d,g,h=this;return b(this,function(b){this.cancelAnimatedGoTo();this.cancelImmediateGoTo();e=v.createAbortController();v.onAbort(c,
function(){return e.abort()});d=this.createGoToCamera(a,n({},c,{signal:e.signal}));g=function(){h.immediateGoToController===e&&(h.immediateGoToController=null)};this.immediateGoToController=e;return[2,d.then(function(a){g();h.setStateCamera(a.camera,{applyConstraints:!a.isFullySpecified})}).catch(function(a){g();!v.isAbortError(a)&&a instanceof f&&a.message&&T.error("#goTo()","Failed to create camera from target, "+a.message[0].toLowerCase()+a.message.slice(1));throw a;})]})})};d.prototype.goToAnimatedBeforeReady=
function(a,c){return h(this,void 0,void 0,function(){var e;return b(this,function(b){switch(b.label){case 0:return this.cancelAnimatedGoTo(),e=v.createAbortController(),v.onAbort(c,function(){return e.abort()}),this.animatedGoToController=e,c=n({},c,{signal:e.signal}),[4,x.whenOnce(this.view,"ready",e.signal)];case 1:return b.sent(),this.animatedGoToController=null,[2,this.goToAnimated(a,c)]}})})};d.prototype.goToAnimated=function(a,c){return h(this,void 0,void 0,function(){var e,d,g,k,l,p,m=this;
return b(this,function(q){this.cancelAnimatedGoTo();if(!this.ready)return[2,this.goToAnimatedBeforeReady(a,c)];e=this.view.state.cameraController;e instanceof K.PointToPointAnimationController&&(e.updateStateFromViewAnimation(),e.active&&(d=e));null==d&&(d=new K.PointToPointAnimationController(this.view.state,this.view.sceneIntersectionHelper));g=d.viewAnimation;k=this.createGoToCamera(a,c);g.update(k.then(function(a){return a.viewpoint}));if(d!==e&&!this.view.state.switchCameraController(d))return g.stop(),
T.error("#goTo()","Cannot start an animation while interacting"),[2,v.reject(new f("view:goto-cannot-interrupt","Cannot start an animation while interacting"))];l=g.target;p=function(){return m.view.state.cameraController===d&&d.viewAnimation.target===l&&d.active};k.then(function(a){var e=a.viewpoint,f=a.camera,k=a.isFullySpecified;return h(m,void 0,void 0,function(){var a,h;return b(this,function(b){switch(b.label){case 0:if(!p())return[2];d.viewAnimation.update(e);l=d.viewAnimation.target;k?(a=
new O.SurfaceCollisionCorrectionController({view:this.view,desiredCamera:f}),F.applySurfaceCollision(this.view,f,1)):F.applyAll(this.view,f);d.begin(f,this.internalAnimateOptions(c));return[4,g.when()];case 1:return b.sent(),h=this.view.state.cameraController,a&&(h&&h.active?h instanceof K.PointToPointAnimationController&&h.viewAnimation.target===l&&(this.view.state.cameraController=a):d.viewAnimation.target===l&&(this.view.state.cameraController=a)),[2]}})})}).catch(function(a){!v.isAbortError(a)&&
a instanceof f&&a.message&&T.error("#goTo()","Failed to create camera from target, "+a.message[0].toLowerCase()+a.message.slice(1));if(p())throw m.view.state.cameraController.stopController(),a;});return[2,this.cancellableGoTo(d,c)]})})};d.prototype.internalAnimateOptions=function(a){var b={};a&&(null!=a.speedFactor&&(b.speedFactor=a.speedFactor),null!=a.duration&&(b.duration=a.duration/1E3),null!=a.maxDuration&&(b.maxDuration=a.maxDuration/1E3),null!=a.easing&&(b.easing="string"===typeof a.easing?
V.named[a.easing]:a.easing));return b};k([w.property({type:g,dependsOn:["view.state.camera","ready"]})],d.prototype,"camera",null);k([w.property({type:B,dependsOn:["view.pointsOfInterest.centerOnContent.location","ready"]})],d.prototype,"center",null);k([w.property({type:z,dependsOn:["view.state.camera","ready"]})],d.prototype,"extent",null);k([w.property({readOnly:!0,dependsOn:["view.state.camera","ready"]})],d.prototype,"frustum",null);k([w.property({readOnly:!0,dependsOn:["view.map.initialViewProperties?.viewpoint"]})],
d.prototype,"hasInitialView",null);k([w.property({readOnly:!0,type:Boolean})],d.prototype,"ready",void 0);k([w.property({dependsOn:["view.pointsOfInterest.centerOnContent.distance","ready"],type:Number})],d.prototype,"scale",null);k([w.property({dependsOn:["view.state.camera","ready"]})],d.prototype,"padding",null);k([w.property({readOnly:!0,dependsOn:["view.width","view.height","padding"]})],d.prototype,"screenCenter",null);k([w.property({constructOnly:!0})],d.prototype,"view",void 0);k([w.property({type:e,
dependsOn:["camera","ready"]})],d.prototype,"viewpoint",null);k([w.property({type:Number,dependsOn:["scale"]})],d.prototype,"zoom",null);k([w.property({constructOnly:!0})],d.prototype,"updateDevicePixelRatio",void 0);return d=k([w.subclass("esri.views.3d.state.ViewStateManager")],d)}(w.declared(c));d.ViewStateManager=r;var Z="camera viewpoint extent scale center zoom".split(" "),Q=[{propertyName:"camera",overrides:["viewpoint"]},{propertyName:"viewpoint",overrides:["extent"]},{propertyName:"extent",
overrides:["center","scale"]},{propertyName:"scale",overrides:["zoom"]},{propertyName:"center",overrides:[]},{propertyName:"zoom",overrides:[]},{propertyName:"padding",overrides:[]}],J={heading:0,tilt:0},R=new g,U=new P,X=u.vec4f64.create(),ca="pending-initial-view";d.default=r})},"esri/views/3d/state/ConstraintsManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ../camera/constraintUtils ../camera/intersectionUtils ./NearFarHeuristic ./SurfaceCollisionConstraint ../support/mathUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function k(a){var c=d.call(this)||this;c.handles=new b;c.nearFarHeuristic=f.createNearFarHeuristic(a.view.state.mode,a.view.basemapTerrain,a.view.renderCoordsHelper.spatialReference);return c}n(k,d);k.prototype.initialize=function(){var b=this;this.handles.add([this.view.watch(["constraints.clipDistance.near","constraints.clipDistance.far"],function(){return b.handleClipDistanceNearFarChanged()}),this.view.watch("constraints.clipDistance.mode",
function(){return b.handleClipDistanceModeChanged()}),this.view.state.events.on("before-camera-change",function(a){return b.cameraUpdateNearFar(a.camera)}),this.view.watch("dataExtent",function(){return b.updateNearFar()},!0)]);this.handles.add([this.view.watch(["constraints.altitude.min","constraints.altitude.max"],function(){return b.handleAltitudeMinMaxChanged()},!0)]);this.handles.add([this.view.watch("constraints.tilt.max",function(){return b.handleTiltMaxChanged()},!0),this.view.watch("constraints.tilt.mode",
function(){return b.handleTiltModeChanged()},!0),this.view.watch("state.camera",function(){return b.tiltAutoUpdateMax()},!0)]);this.handles.add(this.view.watch(["map.ground.navigationConstraint.type","constraints.collision.enabled"],function(){return b.updateCollision()},!0));this.view.state.isLocal&&this.handles.add(h.init(this.view,"dataExtent",function(a){return b.updateLocalSurfaceDistance(a)}));this.updateNearFar();"local"!==this.view.state.mode&&this.updateAltitude();this.updateTilt();this.updateCollision();
this._set("surfaceCollisionConstraint",new a.default({view:this.view}))};k.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null);this.surfaceCollisionConstraint&&(this.surfaceCollisionConstraint.destroy(),this._set("surfaceCollisionConstraint",null))};k.prototype.handleClipDistanceNearFarChanged=function(){var a=this,b=this.view.constraints&&this.view.constraints.clipDistance;b&&"auto"!==b.mode&&this.view.state.updateCamera(function(c){a.cameraUpdateNearFarManual(c,
b);return!0})};k.prototype.handleClipDistanceModeChanged=function(){this.updateNearFar()};k.prototype.updateNearFar=function(){var a=this;this.view.state.updateCamera(function(b){a.cameraUpdateNearFar(b);return!0})};k.prototype.cameraUpdateNearFar=function(a){var b=this.view.constraints&&this.view.constraints.clipDistance;"manual"===(b?b.mode:"auto")?this.cameraUpdateNearFarManual(a,b):this.cameraUpdateNearFarAuto(a,b)};k.prototype.cameraUpdateNearFarAuto=function(a,b){this.nearFarHeuristic.compute(a.eye,
a.center,this.view.dataExtent,c.surfaceElevationBelowEye(this.view,a),a);b&&b.autoUpdate(a.near,a.far)};k.prototype.cameraUpdateNearFarManual=function(a,b){b&&(a.near=b.near,a.far=b.far)};k.prototype.updateCollision=function(){var a=this.view.map&&this.view.map.ground&&this.view.map.ground.navigationConstraint,b=this.view.constraints&&this.view.constraints.collision.enabled,a=a?"stay-above"===a.type:b,b=this.view.state.constraints.collision;a!==b.enabled&&((b.enabled=a)&&this.reapplyConstraints(8),
(a=this.view.constraints&&this.view.constraints.tilt)&&"auto"!==a.mode||this.updateTiltAuto(a))};k.prototype.handleAltitudeMinMaxChanged=function(){this.updateAltitude()};k.prototype.updateAltitude=function(){var a=this.view.constraints&&this.view.constraints.altitude;this.view.state.constraints.altitude=a&&"local"!==this.view.state.mode?{min:a.min,max:a.max}:null;this.reapplyConstraints()};k.prototype.handleTiltModeChanged=function(){this.updateTilt()};k.prototype.handleTiltMaxChanged=function(){var a=
this.view.constraints&&this.view.constraints.tilt;a&&"auto"!==a.mode&&(this.updateTiltManual(a),this.reapplyConstraints())};k.prototype.updateTilt=function(){var a=this.view.constraints&&this.view.constraints.tilt;"manual"===(a?a.mode:"auto")?this.updateTiltManual(a):this.updateTiltAuto(a);this.reapplyConstraints()};k.prototype.updateTiltManual=function(a){var b=this.view.state.constraints;b.tilt=b.createConstantMaxTilt(p.deg2rad(a.max))};k.prototype.updateTiltAuto=function(a){a=this.view.state.constraints;
a.tilt=a.createDefaultTilt();this.tiltAutoUpdateMax()};k.prototype.tiltAutoUpdateMax=function(){var a=this.view.constraints&&this.view.constraints.tilt;if(a&&"auto"===a.mode){var b=this.view.state.constraints;b.tilt&&(b=b.tilt(this.view.state.camera.distance).max,a.autoUpdate(p.rad2deg(b)))}};k.prototype.updateLocalSurfaceDistance=function(a){var b=Math.max(a.width,a.height);0>=b||(a.hasZ&&(b=Math.max(b,a.zmax-a.zmin)),a=this.view.state,b=3*b/Math.atan(a.camera.fov/2),b!==a.constraints.distance&&
(a.constraints.distance=b))};k.prototype.reapplyConstraints=function(a){var b=this;void 0===a&&(a=15);this.view.state.updateCamera(function(c){return e.applyAll(b.view,c,{selection:a,interactionType:0,interactionFactor:null,interactionStartCamera:null,interactionDirection:null,tiltMode:0})})};l([g.property({constructOnly:!0})],k.prototype,"view",void 0);l([g.property({readOnly:!0})],k.prototype,"surfaceCollisionConstraint",void 0);return k=l([g.subclass("esri.views.3d.state.ConstraintsManager")],
k)}(g.declared(k));d.ConstraintsManager=r;d.default=r})},"esri/views/3d/state/NearFarHeuristic":function(){define("require exports ../../../core/mathUtils ../../../core/unitUtils ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/earthUtils ../support/mathUtils".split(" "),function(r,d,n,l,k,b,h,g){function e(a,b,c,e){c=p/c;a/b>c?(e.far=a,e.near=e.far/b):(e.near=c,e.far=e.near*b);return e}Object.defineProperty(d,"__esModule",{value:!0});d.createNearFarHeuristic=
function(a,b,e){return"global"===a?new f:new c(b,e)};var c=function(){function b(a,b){this.elevationProvider=a;this.unitInMeters=l.getMetersPerUnitForSR(b)}b.prototype.compute=function(b,c,d,f,l){l||(l={near:0,far:0});var p=h.earthRadius,m=b[2]*this.unitInMeters,u=m;f=m-f;var z=this.elevationProvider?this.elevationProvider.getElevationBounds():null;z&&(m=0<=f?u-this.unitInMeters*z[0]:this.unitInMeters*z[1]-u);u=Math.max(d.xmax-d.xmin,d.ymax-d.ymin,4*Math.max(d.xmax-d.xmin,d.ymax-d.ymin));k.vec3.subtract(y,
c,b);t[0]=0<y[0]?d.xmax:d.xmin;t[1]=0<y[1]?d.ymax:d.ymin;t[2]=0<y[2]?u/2:-u/2;k.vec3.subtract(t,t,b);k.vec3.normalize(y,y);b=1.1*k.vec3.dot(t,y)*this.unitInMeters;p=Math.sqrt(m*(m+2*p));d=Math.max(d.xmax-d.xmin,d.ymax-d.ymin);c=d*v*this.unitInMeters;m=n.clamp((m-c)/(d*q*this.unitInMeters-c),0,1);m=g.lerp(p,b,m*m*m);m*=Math.max(Math.log(Math.abs(f)),1);m=Math.min(m,Math.max(34064E4,u));m/=this.unitInMeters;return e(m,a,this.unitInMeters,l)};return b}(),f=function(){function a(){}a.prototype.compute=
function(a,b,c,d,f){f||(f={near:0,far:0});b=h.earthRadius;a=k.vec3.length(a)-b;a=Math.max(Math.abs(a-d),Math.abs(a));d=Math.sqrt(a*(a+2*(b+Math.min(0,d))));a=n.clamp(2E4-(Math.log(a)-7.983)/9.011*19E3,1E3,2E4);return e(1.2*d,a,1,f)};return a}(),a=2E4,p=2,q=.001,v=1E-4,t=b.vec3f64.create(),y=b.vec3f64.create()})},"esri/views/3d/state/SurfaceCollisionConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../camera/constraintUtils ../camera/intersectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function d(a){a=c.call(this)||this;a.handles=new b;return a}n(d,c);d.prototype.initialize=function(){var a=this;this.handles.add(this.view.basemapTerrain.on("elevation-change",function(b){return a.handleElevationChangeEvent(b)}))};d.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)};d.prototype.handleElevationChangeEvent=function(a){if(this.view.state.cameraController)return!1;
e.eyeWithinExtent(this.view,this.view.state.camera,a.extent,a.spatialReference)&&this.applyToCurrentCamera()};d.prototype.applyToCurrentCamera=function(){var a=this;this.view.state.updateCamera(function(b){g.applySurfaceCollision(a.view,b,1)})};l([h.property({constructOnly:!0})],d.prototype,"view",void 0);return d=l([h.subclass("esri.views.3d.state.ElevationCollisionConstraint")],d)}(h.declared(k));d.SurfaceCollisionConstraint=r;d.default=r})},"esri/views/3d/state/controllers/SurfaceCollisionCorrectionController":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../camera/constraintUtils ../../camera/intersectionUtils ./CameraController".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function e(b){var c=d.call(this)||this;c.handles=new l;c.view=b.view;c.desiredCamera=b.desiredCamera.clone();return c}n(e,d);Object.defineProperty(e.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"constraintEnabled",{get:function(){return this.view.state.constraints.collision.enabled},enumerable:!0,configurable:!0});e.prototype.onControllerStart=function(b){var c=
this;d.prototype.onControllerStart.call(this,b);this.handles.add(this.view.basemapTerrain.on("elevation-change",function(a){return c.handleElevationChangeEvent(a)}));this.applyCorrection()};e.prototype.onControllerEnd=function(b){this.handles.removeAll();this.view=null;d.prototype.onControllerEnd.call(this,b)};e.prototype.handleElevationChangeEvent=function(c){b.eyeWithinExtent(this.view,this.desiredCamera,c.extent,c.spatialReference)&&this.applyCorrection()};e.prototype.applyCorrection=function(){var b=
this;this.view.state.updateCamera(function(c){c.copyViewFrom(b.desiredCamera);k.applySurfaceCollision(b.view,c,1)||b.constraintEnabled||(b.state=h.State.Stopped)})};return e}(h.CameraController);d.SurfaceCollisionCorrectionController=r})},"esri/views/3d/support/viewpointUtils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/compilerUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./geometryUtils ./mathUtils ./projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E){function N(a){return 360-F.cyclicalDeg.normalize(a)}function L(a){return F.cyclicalDeg.normalize(360-a)}function K(a,b){a&&a.resolver&&(null==b?a.resolver.reject():a.resolver.resolve(b));return b}function O(a,c,e,d){if(!c)return K(d);var f=a.spatialReference||b.SpatialReference.WGS84;if(c.camera){a=c.get("camera.position.spatialReference");if(!u.canProject(a,f))return K(d);c=c.camera.clone();a.equals(f)||(c.position=u.project(c.position,
f));return K(d,c)}var g=c.get("targetGeometry.spatialReference");if(g&&!u.canProject(g,f))return K(d);f=B.internalToExternal(a,a.state.camera);g=B.OrientationMode.ADJUST;null!=c.rotation&&(f.heading=N(c.rotation),g=B.OrientationMode.LOCKED);null!=e&&(f.tilt=e);if("point"===c.targetGeometry.type){e=c.targetGeometry;var h=void 0,k=c.targetGeometry.clone(),h=null!=c.scale?B.scaleToDistance(a,c.scale,e.latitude):a.state.camera.distance;return B.fromCenterDistance(a,k,h,f,g,d)}return B.fromExtent(a,c.targetGeometry.extent,
f.heading,f.tilt,g,d)}function I(a,b){return null==b.scale&&null!=b.zoom?B.zoomToScale(a,b.zoom):b.scale}function H(a,b){var c=!1;null!=b.heading?(a.heading=b.heading,c=!0):null!=b.rotation&&(a.heading=N(b.rotation),c=!0);null!=b.tilt&&(a.tilt=b.tilt,c=!0);null!=b.fov&&(a.fov=b.fov);return c}function S(a,c,e){var d=a.spatialReference||b.SpatialReference.WGS84;c=c||B.externalToInternal(a,e.camera);e.targetGeometry=E.vectorToPoint(c.center,a.renderSpatialReference,d);e.scale=B.computeScale(a,c);e.rotation=
L(e.camera.heading);return e}function P(a,b,e){if(b){if(!u.canProject(b.spatialReference,a.spatialReference))throw new f("viewpointutils:incompatible-spatialreference","Spatial reference ("+(b.spatialReference?b.spatialReference.wkid:"unknown")+") is incompatible with the view ("+a.spatialReference.wkid+")",{geometry:b});var d=[];if(!b.hasZ&&a.basemapTerrain){var g=void 0;switch(b.type){case "point":g=b;break;case "multipoint":case "polyline":case "mesh":g=b.extent.center;break;case "extent":g=b.center;
break;case "polygon":g=b.centroid;break;default:c.neverReached(b)}g&&u.canProject(g,a.basemapTerrain.spatialReference)?G[2]=a.basemapTerrain.getElevation(g)||0:G[2]=0}(0,sa[b.type])(b,function(a){d.push(a[0],a[1],a[2])},G);var h=d.length/3;if(0!==h&&(g=Array(d.length),E.bufferToBuffer(d,b.spatialReference,0,g,a.spatialReference,0,h)))for(b.hasZ&&(e.hasZ=!0),a=0;a<g.length;a+=3)b.hasZ?(G[0]=g[a+0],G[1]=g[a+1],G[2]=g[a+2]):(G[0]=g[a+0],G[1]=g[a+1]),w.expand(e.boundingBox,G)}}function V(b,c,d,f){return l(this,
void 0,void 0,function(){var g,h,k,l,p;return n(this,function(m){switch(m.label){case 0:return[4,b.whenViewForGraphic(c)];case 1:return g=m.sent(),!a.isNone(g)&&"whenGraphicBounds"in g?[4,e.result(g.whenGraphicBounds(c,{minDemResolution:d}))]:(P(b,c.geometry,f),[2]);case 2:h=m.sent();if(!1===h.ok)return P(b,c.geometry,f),[2];k=h.value;l=k.screenSpaceObjects;p=k.boundingBox;w.expand(f.boundingBox,p);l&&l.forEach(function(a){f.screenSpaceObjects.push(a)});isFinite(p[2])&&(f.hasZ=!0);return[2]}})})}
function T(a,c,e,d){return l(this,void 0,void 0,function(){var f,g;return n(this,function(k){switch(k.label){case 0:return Array.isArray(c)&&2===c.length&&(f=c[0],g=c[1],"number"===typeof f&&"number"===typeof g)?(ia.x=f,ia.y=g,ia.z=void 0,ia.spatialReference=a.spatialReference.isGeographic?a.spatialReference:b.SpatialReference.WGS84,P(a,ia,d),[2]):c&&"function"===typeof c.map?[4,p.eachAlways(c.map(function(b){return T(a,b,e,d)}))]:[3,2];case 1:return k.sent(),[2];case 2:if(!(c instanceof b.BaseGeometry))return[3,
3];P(a,c,d);return[3,5];case 3:return c instanceof h?[4,V(a,c,e,d)]:[3,5];case 4:k.sent(),k.label=5;case 5:return[2]}})})}function Z(a,b,c,e,d){return l(this,void 0,void 0,function(){var f,g,h;return n(this,function(k){switch(k.label){case 0:if(b.camera)return[2,Q(a,c,b.camera,d)];d.scale=b.scale;d.rotation=b.rotation;d.targetGeometry=b.targetGeometry?b.targetGeometry.clone():null;d.camera=null;null!=c.heading?d.rotation=L(c.heading):null!=c.rotation&&(d.rotation=c.rotation);f=I(a,c);null!=f&&(d.scale=
f);g=B.createAsyncContext(e);O(a,d,c.tilt,g);h=d;return[4,g.resolver.promise];case 1:return h.camera=k.sent(),[2,d]}})})}function Q(a,b,c,e){e.camera=c.clone();e.camera.fov=a.camera.fov;b=a.spatialReference;c=e.camera.position.spatialReference;if(!u.canProject(c,b))return null;c.equals(b)||(e.camera.position=u.project(e.camera.position,b));return S(a,null,e)}function J(a,c,e,d,g){return l(this,void 0,void 0,function(){var h,k,l,p,m,q;return n(this,function(u){switch(u.label){case 0:if(!e)throw new f("createfromcenter",
"invalid point");g.targetGeometry=e.clone();h=z.cameraOnContentAlongViewDirection(a);if(c.position){u=g.targetGeometry;var n=h,t=a.renderSpatialReference;E.pointToVector(c.position,ta,t);E.pointToVector(u,aa,t);g.targetGeometry=new b.Point(u);g.camera.position=new b.Point(c.position);y.vec3.subtract(pa,aa,ta);B.directionToHeadingTilt(a,ta,pa,n.up,g.camera);g.scale=B.distanceToScale(a,y.vec3.distance(ta,aa),g.targetGeometry.latitude);g.rotation=L(g.camera.heading);return[2,g]}c.zoomFactor&&(k=h.distance/
c.zoomFactor,l=y.vec3.scale(G,h.viewForward,-k),y.vec3.add(h.eye,h.center,l),h.markViewDirty(),g.scale=B.distanceToScale(a,k,e.latitude));B.internalToExternal(a,h,g.camera);p=H(g.camera,c)?B.OrientationMode.LOCKED:B.OrientationMode.ADJUST;if(c.zoomFactor)return[3,2];g.scale=I(a,c);null==g.scale&&(E.pointToVector(e,G,a.renderSpatialReference),C.frustum.intersectsPoint(h.frustum.planes,G)?g.scale=B.distanceToScale(a,y.vec3.distance(h.eye,G),e.latitude):g.scale=B.computeScale(a,h));m=B.createAsyncContext(d);
B.fromCenterScale(a,g.targetGeometry,g.scale,g.camera,p,m);q=g;return[4,m.resolver.promise];case 1:q.camera=u.sent(),u.label=2;case 2:return[2,g]}})})}function R(a,b,c,e){return l(this,void 0,void 0,function(){var d,f;return n(this,function(g){d=z.cameraOnContentAlongViewDirection(a);f=E.vectorToPoint(d.center,a.renderSpatialReference,ia,a.spatialReference);return[2,J(a,b,f,c,e)]})})}function U(a,b,c,e,d){return l(this,void 0,void 0,function(){var f,g,h,k;return n(this,function(l){switch(l.label){case 0:return d.targetGeometry=
c.clone(),f=z.cameraOnContentAlongViewDirection(a),B.internalToExternal(a,f,d.camera),g=H(d.camera,b)?B.OrientationMode.LOCKED:B.OrientationMode.ADJUST,h=B.createAsyncContext(e),B.fromExtent(a,c,d.camera.heading,d.camera.tilt,g,h),k=d,[4,h.resolver.promise];case 1:return k.camera=l.sent(),[2,d]}})})}function X(a,b,c,e,d,f,g){return l(this,void 0,void 0,function(){var h,k,l,p,m;return n(this,function(u){switch(u.label){case 0:g.targetGeometry=c.clone();u=h=z.cameraOnContentAlongViewDirection(a);var n=
0;c.hasZ?n=c.z:a.basemapTerrain&&(n=a.basemapTerrain.getElevation(c));y.vec3.set(G,c.x,c.y,n);E.computeLinearTransformation(a.spatialReference,G,Y,a.renderSpatialReference);q.mat3.fromMat4(la,Y);q.mat3.transpose(la,la);w.empty(ja);for(var t=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],v=0;v<t.length;v++){var x=t[v],r=e[x[2]];isFinite(r)||(r=n);y.vec3.set(G,e[x[0]],e[x[1]],r);E.vectorToVector(G,a.spatialReference,G,a.renderSpatialReference);w.expand(ja,y.vec3.transformMat3(G,G,
la))}n=w.width(ja);t=w.height(ja);v=w.depth(ja);x=1/Math.tan(u.fovY/2);k=Math.max(.5*Math.sqrt(n*n+v*v)*Math.max(x,1/Math.tan(u.fovX/2))+.5*t,.5*t*x+.5*Math.max(n,v))/d;B.internalToExternal(a,h,g.camera);l=H(g.camera,b)?B.OrientationMode.LOCKED:B.OrientationMode.ADJUST;g.scale=B.distanceToScale(a,k,g.targetGeometry.latitude);p=B.createAsyncContext(f);B.fromCenterScale(a,g.targetGeometry,g.scale,g.camera,l,p);m=g;return[4,p.resolver.promise];case 1:return m.camera=u.sent(),[2,g]}})})}function ca(a){a&&
(a.rotation=L(a.camera.heading));return a}Object.defineProperty(d,"__esModule",{value:!0});d.DEFAULT_FRAME_COVERAGE=.66;d.rotationToHeading=N;d.headingToRotation=L;d.toCamera=O;d.fromInternalCamera=function(a,b,c){c||(c=new g({camera:new k}));B.internalToExternal(a,b,c.camera);return S(a,b,c)};d.fromCamera=function(a,b,c){c||(c=new g);c.camera=b.clone();return S(a,null,c)};d.create=function(a,c,e){return l(this,void 0,void 0,function(){var h,l,p,q,u,t,v,x,r,C,F,E,K;return n(this,function(n){switch(n.label){case 0:if(c&&
a.spatialReference){n={target:null};if("declaredClass"in c||Array.isArray(c))n.target=c;else{for(var H in c)n[H]=c[H];c.center&&!n.target&&(n.target=c.center)}h=n}else h=null;if(!h)throw new f("viewpointutils-create:no-target","Missing target for creating viewpoint");l=new g({camera:new k({fov:a.camera.fov})});return h.target instanceof g?[4,Z(a,h.target,h,e,l)]:[3,2];case 1:return p=n.sent(),[2,ca(p)];case 2:if(h.target instanceof k)return[2,ca(Q(a,h,h.target,l))];q=null!=h.scale||null!=h.zoom;if(!(h.target instanceof
b.Extent))return[3,6];u=h.target.xmin===h.target.xmax||h.target.ymin===h.target.ymax;if(!q&&!u)return[3,4];t=ca;return[4,J(a,h,h.target.center,e,l)];case 3:return[2,t.apply(void 0,[n.sent()])];case 4:return v=ca,[4,U(a,h,h.target,e,l)];case 5:return[2,v.apply(void 0,[n.sent()])];case 6:return x={boundingBox:w.empty(),hasZ:!1,screenSpaceObjects:[]},r=q?B.scaleToResolution(a,I(a,h)):void 0,[4,T(a,h.target,r,x)];case 7:n.sent();if(!isFinite(x.boundingBox[0]))return[3,11];w.center(x.boundingBox,G);ia.x=
G[0];ia.y=G[1];ia.z=G[2];ia.spatialReference=a.spatialReference;u=void 0;isFinite(ia.z)&&x.hasZ?u=w.isPoint(x.boundingBox):(ia.z=void 0,u=m.isPoint(w.toRect(x.boundingBox,na)));if(!q&&!u)return[3,9];C=ca;return[4,J(a,h,ia,e,l)];case 8:return[2,C.apply(void 0,[n.sent()])];case 9:H=x.screenSpaceObjects;n=d.DEFAULT_FRAME_COVERAGE;if(H.length){for(var A=Number.NEGATIVE_INFINITY,O=0;O<H.length;O++)var N=H[O].screenSpaceBoundingRect,A=Math.max(A,Math.abs(N[0]),Math.abs(N[1]),Math.abs(N[2]),Math.abs(N[3]));
F=n-A/Math.min(a.width,a.height)*2}else F=n;E=ca;return[4,X(a,h,ia,x.boundingBox,F,e,l)];case 10:return[2,E.apply(void 0,[n.sent()])];case 11:if(h.position)return H=h,n=l,A=z.cameraOnContentAlongViewDirection(a),y.vec3.copy(pa,A.viewForward),B.directionToHeadingTilt(a,A.eye,pa,A.up,ga),n.camera.position=new b.Point(H.position),n.camera.heading=null!=H.heading?H.heading:ga.heading,n.camera.tilt=null!=H.tilt?H.tilt:ga.tilt,H=S(a,null,n),[2,ca(H)];K=ca;return[4,R(a,h,e,l)];case 12:return[2,K.apply(void 0,
[n.sent()])]}})})};var G=x.vec3f64.create(),Y=t.mat4f64.create(),la=v.mat3f64.create(),ja=w.create(),na=m.create(),pa=x.vec3f64.create(),ta=x.vec3f64.create(),aa=x.vec3f64.create(),ga={heading:0,tilt:0},ia=new b.Point,sa={point:function(a,b,c){c[0]=a.x;c[1]=a.y;a.hasZ&&(c[2]=a.z);b(c)},polygon:function(a,b,c){for(var e=a.hasZ,d=0;d<a.rings.length;d++)for(var f=a.rings[d],g=0;g<f.length;g++)c[0]=f[g][0],c[1]=f[g][1],e&&(c[2]=f[g][2]),b(c)},polyline:function(a,b,c){for(var e=a.hasZ,d=0;d<a.paths.length;d++)for(var f=
a.paths[d],g=0;g<f.length;g++)c[0]=f[g][0],c[1]=f[g][1],e&&(c[2]=f[g][2]),b(c)},multipoint:function(a,b,c){var e=a.points;a=a.hasZ;for(var d=0;d<e.length;d++)c[0]=e[d][0],c[1]=e[d][1],a&&(c[2]=e[d][2]),b(c)},extent:function(a,b,c){a.hasZ?(b(y.vec3.set(c,a.xmin,a.ymin,a.zmin)),b(y.vec3.set(c,a.xmax,a.ymin,a.zmin)),b(y.vec3.set(c,a.xmin,a.ymax,a.zmin)),b(y.vec3.set(c,a.xmax,a.ymax,a.zmin)),b(y.vec3.set(c,a.xmin,a.ymin,a.zmax)),b(y.vec3.set(c,a.xmax,a.ymin,a.zmax)),b(y.vec3.set(c,a.xmin,a.ymax,a.zmax)),
b(y.vec3.set(c,a.xmax,a.ymax,a.zmax))):(b(y.vec3.set(c,a.xmin,a.ymin,c[2])),b(y.vec3.set(c,a.xmax,a.ymin,c[2])),b(y.vec3.set(c,a.xmin,a.ymax,c[2])),b(y.vec3.set(c,a.xmax,a.ymax,c[2])))},mesh:function(a,b,c){if(a=a.vertexAttributes&&a.vertexAttributes.position)for(var e=0;e<a.length;e+=3)b(y.vec3.set(c,a[e+0],a[e+1],a[e+2]))}}})},"esri/views/3d/state/helpers/SceneIntersectionHelper":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec3 ../../support/geometryUtils ../../support/stack ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/intersectorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){function c(a,b,c){for(var e=0;e<a.length;e++){var d=a[e];b&&!b(d)||c.push(d)}return c}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function a(a,c,e){this.viewingMode=a;this.layerProvider=c;this.view=e;this.tmpIntersector=new g(this.viewingMode);this.tmpRay=b.ray.create();this.externalIntersectionHandlers=new Set;this.intersectionTolerance=g.DEFAULT_TOLERANCE;this.validateHUDIntersector=new g(this.viewingMode);this.validateHUDIntersector.enable.hud=!1}a.prototype.intersectScreen=
function(a,b,c,e){return this.intersectRay(this.getPickRay(a,this.tmpRay),b,c,e)};a.prototype.intersectScreenFreePointFallback=function(a,b,c,e){return this.intersectRayFreePointFallback(this.getPickRay(a,this.tmpRay),b,c,e)};a.prototype.intersectRay=function(a,b,c,e){e=this.computeIntersection(a,c,!1,e||this.tmpIntersector);b=e?(a=e.results.min)?a.getIntersectionPoint(b):!1:!1;return b};a.prototype.intersectRayFreePointFallback=function(a,b,c,e){return this.intersectRay(a,b,c,e)||this.intersectRayFreePointLocal(a,
b)};a.prototype.intersectIntersectorScreen=function(a,b,c,e,d){void 0===e&&(e=!1);void 0===d&&(d=!1);return this.computeIntersection(this.getPickRay(a,this.tmpRay),c,e,b,d)};a.prototype.intersectToolIntersectorScreen=function(a,b,c){a=this.getPickRay(a,this.tmpRay);var e=this.computeIntersection(a,c,!0,b),d=e.results.min;this.view.basemapTerrain&&this.view.basemapTerrain.isOpaque()||d.hasIntersectionPoint&&"TerrainRenderer"!==d.intersector||(e=this.computeIntersection(a,c,!1,b));return e};a.prototype.setTolerance=
function(a){void 0===a&&(a=g.DEFAULT_TOLERANCE);this.intersectionTolerance=a};a.prototype.addIntersectionHandler=function(a){this.externalIntersectionHandlers.add(a)};a.prototype.removeIntersectionHandler=function(a){this.externalIntersectionHandlers.delete(a)};a.prototype.getPickRay=function(a,c){void 0===c&&(c=b.ray.create());return b.ray.fromScreen(this.view.state.camera,a,c)};a.prototype.intersectRayFreePointLocal=function(a,b){if("local"!==this.viewingMode)return!1;var c=this.view.dataExtent,
e=Math.max(c.xmax-c.xmin,c.ymax-c.ymin,8*Math.max(c.xmax-c.xmin,c.ymax-c.ymin));if(0===e)return k.vec3.add(b,a.origin,k.vec3.normalize(h.sv3d.get(),a.direction)),!0;var d=this.view.state.camera,f=Math.max(0,c.xmin-d.eye[0],d.eye[0]-c.xmax),c=Math.max(0,c.ymin-d.eye[1],d.eye[1]-c.ymax),d=e/Math.max(1,Math.pow(Math.max(0,Math.log(e/(Math.abs(d.relativeElevation)+Number.MIN_VALUE))),2)),d=Math.max(d,Math.min(Math.sqrt(f*f+c*c),e)),e=k.vec3.scale(h.sv3d.get(),a.direction,d/k.vec3.length(a.direction));
k.vec3.add(b,a.origin,e);return!0};a.prototype.computeIntersection=function(a,b,c,d,n){var p=this,q=this.view.state.camera,m=l.castRenderScreenPointArray3(h.sv3d.get());q.projectPoint(a.origin,m);var u=this.prepareFilters(b,f);d=d||new g(this.viewingMode);d.enable.storeAll=b&&b.allEnabled;d.enable.storeTerrainResults=u.filterLayerUid(e.TERRAIN_ID);d.enable.selectOpaqueTerrainOnly=!b||!("include"in b||"exclude"in b);var t=a.origin,v=k.vec3.add(h.sv3d.get(),a.origin,a.direction);d.intersect(u.layers,
t,v,m,q,this.intersectionTolerance,c,null);var y=(a=this.view.slicePlane)?e.sliceFilterPredicate(a):null;d.intersect(u.sliceableLayers,t,v,m,q,this.intersectionTolerance,c,y,!1);var r=b&&b.terrainLocationFeedbackEnabled||n;this.externalIntersectionHandlers.forEach(function(a){if(a.intersectionHandlerId===e.TERRAIN_ID){if(!r&&!u.filterLayerUid(e.TERRAIN_ID))return}else if(!u.filterLayerUid(a.intersectionHandlerId))return;a.intersect(d,a.slicePlaneEnabled?y:null,t,v,m)});b=h.sv3d.get();n&&d.results.terrain.getIntersectionPoint(b)&&
(n=this.view._stage.renderView.getDrapedRenderer(),a=h.sv3d.get(),this.view.renderCoordsHelper.fromRenderCoords(b,a,this.view.spatialReference),a[2]=this.view.basemapTerrain.getElevation(b)||0,n.intersect(d,a,u.filterRenderGeometry));d.sortResults();n=d.results.hud;if(n.hasIntersectionPoint){var E=l.castRenderScreenPointArray3(h.sv3d.get()),N=h.sv3d.get(),L=h.sv3d.get();this.unprojectHUDResultRay(n.center,E,N,L);b=k.vec3.distance(n.center,N)/k.vec3.distance(N,L)*.99;this.validateHUDIntersector.intersect(u.layers,
N,L,E,q,this.intersectionTolerance,c,null);this.validateHUDIntersector.intersect(u.sliceableLayers,N,L,E,q,this.intersectionTolerance,c,y,!1);this.externalIntersectionHandlers.forEach(function(a){u.filterLayerUid(a.intersectionHandlerId)&&a.intersect(p.validateHUDIntersector,a.slicePlaneEnabled?y:null,N,L,E)});c=this.validateHUDIntersector.results.min;if(null==c.dist||b<=c.dist)d.results.min.copyFrom(n),d.results.all.splice(0,0,n)}return d};a.prototype.prepareFilters=function(a,b){var e=[],d=[];this.layerProvider.forEachLayer(function(a){a.isPickable&&
(a.isSliceable?d:e).push(a)});b.include=a&&a.include;b.exclude=a&&a.exclude;b.layers.length=0;b.sliceableLayers.length=0;c(e,b.filterLayer,b.layers);c(d,b.filterLayer,b.sliceableLayers);return b};a.prototype.unprojectHUDResultRay=function(a,b,c,e){var d=this.view.state.camera;d.projectPoint(a,b);a=l.castRenderScreenPointArray3(h.sv3d.get());a[0]=b[0];a[1]=b[1];a[2]=0;d.unprojectPoint(a,c);a[2]=1;d.unprojectPoint(a,e)};return a}();d.SceneIntersectionHelper=r;var f={include:null,exclude:null,layers:[],
sliceableLayers:[],filterLayer:function(a){return f.filterLayerUid(a.apiLayerUid)},filterLayerUid:function(a){var b=f.include,c=f.exclude;return n.isNone(a)?null==b&&null==c:(null==b||b.has(a))&&(null==c||!c.has(a))},filterRenderGeometry:function(a){return f.filterLayerUid(a.data.layerUid)}}})},"esri/views/3d/support/CombinedElevationProvider":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../core/Accessor ../../../core/Evented ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/dehydratedFeatures ../layers/graphics/ElevationQuery".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){return function(b){function d(a){a=b.call(this)||this;a.providers={im:[],ground:[],scene:[]};a.handles=new Map;return a}n(d,b);d.prototype.getElevation=function(a,b){var c=-Infinity,e=!0;"scene"===b&&(c=this._updateElevation(c,this.providers.im,a,b),isFinite(c)&&(e=!1));e&&(c=this._updateElevation(c,this.providers.ground,a,b));"scene"===b&&(c=this._updateElevation(c,this.providers.scene,a,b));return isFinite(c)?c:null};d.prototype._updateElevation=function(a,b,c,
e){for(var d=0;d<b.length;d++){var f=b[d].getElevation(c,e);null!=f&&(a=Math.max(f,a))}return a};d.prototype.queryElevation=function(b,c,d,g){var h=this;void 0===d&&(d=0);this._elevationService||(this._elevationService=new a.ElevationQuery(this.view.spatialReference,function(){return h.view.map&&h.view.map.ground},{maximumAutoTileRequests:4}));var k=e.createResolver();(f.isPoint(b)?this._elevationService.queryElevation(b.x,b.y,c,d):this._elevationService.queryElevation(b[0],b[1],c,d)).then(function(a){"scene"===
g&&(a=h._updateElevation(a,h.providers.scene,b,g));k.resolve(isFinite(a)?a:null)}).catch(function(a){e.isAbortError(a)?k.reject(a):k.resolve(h.getElevation(b))});return k.promise};d.prototype.register=function(a,b){var c=this;this.handles.set(b,b.on("elevation-change",function(a){return c.emit("elevation-change",a)}));this.providers[a].push(b)};d.prototype.unregister=function(a){this.handles.has(a)&&(this.handles.get(a).remove(),this.handles.delete(a));for(var b=0,c=Object.keys(this.providers);b<
c.length;b++){var e=c[b],d=this.providers[e].indexOf(a);-1<d&&this.providers[e].splice(d,1)}};l([c.property({constructOnly:!0})],d.prototype,"view",void 0);l([c.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],d.prototype,"spatialReference",void 0);return d=l([c.subclass("esri.views.3d.support.CombinedElevationProvider")],d)}(c.declared(h,g))})},"esri/views/3d/layers/graphics/ElevationQuery":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/assignHelper ../../../../geometry ../../../../core/arrayUtils ../../../../core/asyncUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/scheduling".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function a(a,c){this.spatialReference=a;this.view=c;this.point=new b.Point;this.point.spatialReference=a}a.prototype.getElevation=function(a,b,c){this.point.x=a;this.point.y=b;return this.view.elevationProvider.getElevation(this.point,c)};a.prototype.queryElevation=function(a,b,c,e,d){return l(this,void 0,void 0,function(){return n(this,function(f){this.point.x=a;this.point.y=b;return[2,this.view.elevationProvider.queryElevation(this.point,
c,e,d)]})})};return a}();d.ViewElevationProvider=r;r=function(){function a(a,b,c){this.spatialReference=a;this._getElevationQueryProvider=b;this._queries=[];this._isScheduled=!1;this._queryOptions=k({},c,{ignoreInvisibleLayers:!0})}a.prototype.queryElevation=function(a,b,e,d,f){void 0===d&&(d=0);return l(this,void 0,void 0,function(){var f=this;return n(this,function(g){return[2,c.create(function(g,k){var l={x:a,y:b,minDemResolution:d,result:{resolve:g,reject:k},signal:e};f._queries.push(l);c.onAbort(e,
function(){h.remove(f._queries,l);k(c.createAbortError())});f._scheduleDoQuery()})]})})};a.prototype._scheduleDoQuery=function(){var a=this;this._isScheduled||(f.schedule(function(){return a._doQuery()}),this._isScheduled=!0)};a.prototype._doQuery=function(){return l(this,void 0,void 0,function(){var a,d,f,h,l,x,w,m,u,z,B,r;return n(this,function(p){switch(p.label){case 0:this._isScheduled=!1;a=this._queries;this._queries=[];if(0===a.length)return[2];d=a.map(function(a){return[a.x,a.y]});f=a.reduce(function(a,
b){return Math.min(a,b.minDemResolution)},Infinity);h=new b.Multipoint({points:d,spatialReference:this.spatialReference});l=this._getElevationQueryProvider();if(!l)return a.forEach(function(a,b){return a.result.reject()}),[2];x=1<a.length&&a.some(function(a){return!!a.signal})?c.createAbortController():null;w=e.isSome(x)?x.signal:a[0].signal;e.isSome(x)&&(m=0,a.forEach(function(b){return c.onAbort(b.signal,function(){m++;b.result.reject(c.createAbortError());m===a.length&&x.abort()})}));u=k({},this._queryOptions,
{minDemResolution:f,signal:w});return[4,g.result(l.queryElevation(h,u))];case 1:z=p.sent();for(B=0;B<a.length;B++)r=a[B],e.isSome(r.signal)&&r.signal.aborted?r.result.reject(c.createAbortError()):!1===z.ok?r.result.reject(z.error):r.result.resolve(z.value.geometry.points[B][2]);return[2]}})})};return a}();d.ElevationQuery=r})},"esri/views/3d/support/DisplayQualityProfile":function(){define(["require","exports","../../../core/has"],function(r,d,n){function l(){var d=!!n("esri-mobile");return{low:{graphics3D:{maxTotalNumberOfFeatures:25E3,
maxTotalNumberOfPrimitives:85E4},sceneService:{"3dObject":{lodFactor:.2},point:{lodFactor:1},integratedMesh:{lodFactor:.6},pointCloud:{lodFactor:.5},uncompressedTextureDownsamplingEnabled:!0},tiledSurface:{lodBias:-1,angledSplitBias:.5},antialiasingEnabled:!1,memoryLimit:200,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},medium:{graphics3D:{maxTotalNumberOfFeatures:5E4,maxTotalNumberOfPrimitives:17E5},sceneService:{"3dObject":{lodFactor:1},point:{lodFactor:1},
integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:d},tiledSurface:{lodBias:0,angledSplitBias:1},antialiasingEnabled:!0,memoryLimit:d?400:500,additionalCacheMemory:d?0:100,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},high:{graphics3D:{maxTotalNumberOfFeatures:5E4,maxTotalNumberOfPrimitives:17E5},sceneService:{"3dObject":{lodFactor:1},point:{lodFactor:1},integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:!1},
tiledSurface:{lodBias:0,angledSplitBias:1},antialiasingEnabled:!0,memoryLimit:d?600:1E3,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:d?null:4096,maximumPixelRatio:d?1:null}}}r=function(){function d(){}d.isValidProfile=function(b){return b in d.profiles};d.getDefaultProfile=function(){return n("trident")||n("esri-iPhone")?"low":"medium"};d.apply=function(b,h){b=d.profiles[b];h.graphics3D.maxTotalNumberOfFeatures=b.graphics3D.maxTotalNumberOfFeatures;h.graphics3D.maxTotalNumberOfPrimitives=
b.graphics3D.maxTotalNumberOfPrimitives;h.sceneService["3dObject"].lodFactor=b.sceneService["3dObject"].lodFactor;h.sceneService.point.lodFactor=b.sceneService.point.lodFactor;h.sceneService.integratedMesh.lodFactor=b.sceneService.integratedMesh.lodFactor;h.sceneService.pointCloud.lodFactor=b.sceneService.pointCloud.lodFactor;h.sceneService.uncompressedTextureDownsamplingEnabled=b.sceneService.uncompressedTextureDownsamplingEnabled;h.tiledSurface.lodBias=b.tiledSurface.lodBias;h.tiledSurface.angledSplitBias=
b.tiledSurface.angledSplitBias;h.antialiasingEnabled=b.antialiasingEnabled;h.memoryLimit=b.memoryLimit;h.additionalCacheMemory=b.additionalCacheMemory;h.frameRate=b.frameRate;h.maximumRenderResolution=b.maximumRenderResolution;h.maximumPixelRatio=b.maximumPixelRatio};d.debug={reset:function(){var b=l(),h;for(h in b)d.profiles[h]=b[h]}};return d}();(r||(r={})).profiles=l();return r})},"esri/views/3d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec4f32".split(" "),
function(r,d,n,l,k,b,h,g){return function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;c.color=new k([0,255,255]);c.haloOpacity=1;c.fillOpacity=.25;return c}n(c,b);c.toEngineOptions=function(b){var a=k.toUnitRGBA(b.color);return{color:g.vec4f32.fromValues(a[0],a[1],a[2],a[3]),haloOpacity:b.haloOpacity,haloOpacityOccluded:.25*b.haloOpacity,fillOpacity:b.fillOpacity,fillOpacityOccluded:.25*b.fillOpacity}};l([h.property({type:k})],c.prototype,"color",void 0);l([h.property()],c.prototype,
"haloOpacity",void 0);l([h.property()],c.prototype,"fillOpacity",void 0);return c=l([h.subclass("esri.views.3d.support.HighlightOptions")],c)}(h.declared(b))})},"esri/views/3d/support/index":function(){define(["require","exports","./ResourceController","./MemoryController"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.newResourceController=n.newResourceController;d.newMemoryController=l.newMemoryController;r=d.ClientType||(d.ClientType={});r.TERRAIN="terrain";r.SCENE="scene";
r.SYMBOLOGY="symbology"})},"esri/views/3d/support/ResourceController":function(){define("require exports ../../../core/Handles ../../../core/now ../../../core/scheduling ./index ./MemoryController ./StreamDataLoader ../../support/Scheduler".split(" "),function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});d.newResourceController=function(b,a){void 0===a&&(a=l);return new c.ResourceController(b,a)};var c;(function(c){function a(a){var c={},e;for(e in b.ClientType)c[b.ClientType[e]]=
0;c[b.ClientType.TERRAIN]=15;c[b.ClientType.SCENE]=20;c[b.ClientType.SYMBOLOGY]=5;return new g.default(c,a)}var d=function(){function b(b,c){void 0===c&&(c=l);var d=this;this._view=b;this._streamDataLoader=this._memoryController=this._scheduler=null;this._lastTargetChangeTime=0;this._handles=new n;this._frameTask=null;this._lastTargetChangeTime=c();this._scheduler=e.newScheduler(c);this._memoryController=h.newMemoryController(this._view);this._streamDataLoader=a(this._scheduler);this._handles.add(this._view.watch("state.camera",
function(){return d._cameraChangedHandler()},!0));this._frameTask=k.addFrameTask({update:function(a){return d.frame(a)}})}b.prototype.destroy=function(){this._handles.remove();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);this._streamDataLoader&&(this._streamDataLoader.destroy(),this._streamDataLoader=null);this._memoryController.destroy();this._scheduler=this._memoryController=null};Object.defineProperty(b.prototype,"updating",{get:function(){return this._memoryController.updating},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scheduler",{get:function(){return this._scheduler},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"memoryController",{get:function(){return this._memoryController},enumerable:!0,configurable:!0});b.prototype.createStreamDataRequester=function(a){var b=this;return function(c,e,d){return b._streamDataLoader.request(c,e,a,d)}};Object.defineProperty(b.prototype,"hasPendingDownloads",{get:function(){return this._streamDataLoader&&
this._streamDataLoader.hasPendingDownloads},enumerable:!0,configurable:!0});b.prototype.frame=function(a){if(!this._view.suspended){if(this._view.stateManager&&(this._view.stateManager.step(a.deltaTime/1E3),!this._scheduler))return;this._scheduler.state=this.state;this._scheduler.updateBudget(a)?(this._memoryController.update(),this._scheduler.frame()):this._memoryController.updating&&this._memoryController.update()}};b.prototype._cameraChangedHandler=function(){this._lastTargetChangeTime=this._scheduler.now;
this._scheduler.state=this.state;this.memoryController.notifyViewChanged()};Object.defineProperty(b.prototype,"state",{get:function(){return this._scheduler.now-this._lastTargetChangeTime>f?2:this._view.animation?0:1},enumerable:!0,configurable:!0});return b}();c.ResourceController=d;var f=300})(c||(c={}))})},"esri/views/3d/support/MemoryController":function(){define("require exports ../../../core/Evented ../../../core/Logger ../../../core/MemCache ../layers/support/MemoryManagedLayerView".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});var h=l.getLogger("esri.views.3d.support.MemoryController");d.newMemoryController=function(b){return new g(b)};var g=function(){function e(b){this._view=b;this.events=new n;this.minQuality=.1;this._maxMemory=500;this._additionalCacheMemory=100;this._quality=1;this._downscaleMemoryUsed=this._stableQuality=0;this._canFastRecover=!1;this._memoryPredicted=this._memoryUsed=0;this._cacheStorage=new k.MemCacheStorage;this._updating=!1}
e.prototype.destroy=function(){this.events=null};e.prototype.getMemCache=function(b,e){return new k.MemCache(b,this._cacheStorage,e)};Object.defineProperty(e.prototype,"maxMemory",{get:function(){return this._maxMemory},set:function(b){null!=b&&0<b&&(this._stableQuality=0,this._canFastRecover=!1,this._maxMemory<b&&this._updateQuality(1),this._maxMemory=b)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"additionalCacheMemory",{set:function(b){null!=b&&0<=b&&(this._additionalCacheMemory=
b)},enumerable:!0,configurable:!0});e.prototype.disableMemCache=function(){this._additionalCacheMemory=-4096};Object.defineProperty(e.prototype,"memoryFactor",{get:function(){return this._quality},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return this._updating},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"usedMemory",{get:function(){return this._memoryUsed},enumerable:!0,configurable:!0});e.prototype.notifyViewChanged=function(){this._stableQuality=
0};e.prototype.update=function(){this._updateMemory();if(!(0>=this._memoryPredicted)||this._updating){var b=this._layersUpdating();if(.6>this._memoryPredicted&&this._canFastRecover)this._stableQuality=this._downscaleMemoryUsed=0,this._canFastRecover=!1,this._updateQuality(1);else if(b){if(this._quality<=this.minQuality)return;if(1.1<this._memoryPredicted||1<this._memoryUsed)0<this._stableQuality?(this._downscaleMemoryUsed=0,this._updateQuality(this._stableQuality)):this._downscaleMemoryUsed<this._memoryUsed&&
(this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryUsed)}else this._downscaleMemoryUsed=0,1<this._memoryUsed?(this._stableQuality=0,this._canFastRecover=!1,b=this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryPredicted):this._stableQuality!==this._quality&&(.75>this._memoryUsed&&1>this._quality?(this._stableQuality=this._quality,b=this._updateQuality(this._quality+.1*(.75-this._memoryUsed+.1))):1>this._quality&&(this._canFastRecover=!0));this.updating!==
b&&(this._updating=b,this.events.emit("updating-changed",this.updating))}};e.prototype._updateQuality=function(b){b=Math.min(Math.max(b,this.minQuality),1);if(b===this._quality)return!1;this._quality=b;this.events.emit("quality-changed",this._quality);return!0};e.prototype._layersUpdating=function(){return this._view.allLayerViews.some(function(b){return!!b.updating})};e.prototype._updateMemory=function(){var c=this,e=0,a=0;this._view.basemapTerrain&&this._view.basemapTerrain.getUsedMemory&&(e+=this._view.basemapTerrain.getUsedMemory());
var d=this._view._stage&&this._view._stage.renderView&&this._view._stage.renderView.edgeView;d&&(e+=d.getUsedMemory());this._view.allLayerViews&&this._view.allLayerViews.forEach(function(d){if(b.isMemoryManagedLayerView(d)){var f=d.ignoresMemoryFactor()?c._quality:1;e+=d.getUsedMemory()*f;a+=d.getUnloadedMemory()*f}});var g=null==this._warnMemoryUsage||Math.round(10*e)!==Math.round(10*this._warnMemoryUsage),d=1048576*this._maxMemory;if(e>d&&g){this._warnMemoryUsage=e;var g=function(a){return(a/1048576).toLocaleString(void 0,
{maximumFractionDigits:1})+" MB"},k=Math.round(100*this._quality);h.warn("Memory Limit exceeded! Limit: "+g(d)+" Current: "+g(e)+" Projected: "+g(e+a)+" Quality: "+k+"%")}this._memoryUsed=e/d;this._memoryPredicted=(e+a)/d;this._cacheStorage.maxSize=Math.max(0,d-e+1048576*this._additionalCacheMemory);this.events.emit("memory-used",this._memoryUsed)};Object.defineProperty(e.prototype,"test",{get:function(){return{cacheStorage:this._cacheStorage}},enumerable:!0,configurable:!0});return e}()})},"esri/views/3d/support/StreamDataLoader":function(){define("require exports ../../../request ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/now ../../../core/promiseUtils ./AsyncQuotaRoundRobinQueue ../webgl-engine/lib/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function a(a,b){var e=this;this.tasks=new Map;this.doneQueue=[];this.loadQueue=new c.AsyncQuotaRoundRobinQueue(this.startLoading.bind(this),this.doneLoadingCallback,this,a);b&&(this.taskHandle=b.registerTask(1,function(a){return e.update(a)},function(){return 0<e.doneQueue.length}))}a.prototype.destroy=function(){this.taskHandle&&(this.taskHandle.remove(),this.taskHandle=null);this.tasks.forEach(function(a){a.abortController&&
a.abortController.abort()});this.loadQueue.clear();this.tasks=this.doneQueue=this.loadQueue=null};a.prototype.request=function(a,b,c,d){var f=this,g=e.createResolver(),k=h.isSome(d)&&d.uid||a,l=this.createOrUpdateTask(a,b,c,k,g);e.onAbort(d,function(){return f.cancelRequest(l,g)});return g.promise};a.prototype.createTask=function(a,b,c,e,d){a={url:a,docType:b,clientType:c,key:e,result:null,status:1,resourceRequest:null,abortController:null,resolvers:[],_cancelledInQueue:!1,startTime:0,duration:0,
size:0};this.updateTask(a,d);this.tasks.set(e,a);this.loadQueue.push(a);return a};a.prototype.cancelRequest=function(a,b){l.removeUnordered(a.resolvers,b);b.reject(e.createAbortError());0===a.resolvers.length&&(2===a.status&&(a.status=4,this.loadQueue.workerCancelled(a),a.abortController.abort(),a.resourceRequest=null,a.abortController=null),a.status=4,this.tasks.delete(a.key))};Object.defineProperty(a.prototype,"hasPendingDownloads",{get:function(){return 0<this.tasks.size},enumerable:!0,configurable:!0});
a.prototype.taskKey=function(a,b,c){return a+":"+b+":"+c};a.prototype.updateTask=function(a,b){a.resolvers.push(b)};a.prototype.createOrUpdateTask=function(a,b,c,e,d){e=this.taskKey(e,b,c);var f=this.tasks.get(e);return f?(this.updateTask(f,d),f):this.createTask(a,b,c,e,d)};a.prototype.doneLoadingCallback=function(a,b){f.assert(2===a.status);a.status=3;this.taskHandle?this.doneQueue.push({task:a,err:b}):this.doneLoading(a,b)};a.prototype.update=function(a){for(;!a.done&&0<this.doneQueue.length;){var b=
this.doneQueue.shift();3!==b.task.status&&(b.err=b.err||e.createAbortError());this.doneLoading(b.task,b.err);a.madeProgress()}};a.prototype.doneLoading=function(a,c){for(var d=a.result instanceof HTMLImageElement?0:a.resolvers.length,f=0,g=a.resolvers;f<g.length;f++){var h=g[f];if(c)e.isAbortError(c)?h.reject(c):h.reject(new k("stream-data-loader:request-error","Failed to request resource at '"+a.url+"'. "+c,{url:a.url,error:c}));else{--d;var l=0>=d?a.result:b.clone(a.result);h.resolve(l)}}this.tasks.delete(a.key)};
a.prototype.startLoading=function(a,b){if(4===a.status)return!1;a.status=2;var c,d;switch(a.docType){case "binary":d="array-buffer";c=0;break;case "image":d="image";break;default:d="json"}a.startTime=g();a.abortController=e.createAbortController();a.resourceRequest=n(a.url,{responseType:d,timeout:c,signal:a.abortController.signal});a.resourceRequest.then(function(c){a.duration=g()-a.startTime;a.size="binary"===a.docType?c.data.byteLength:0;a.result=c.data;a.abortController=null;b(a)},function(c){2===
a.status&&b(a,c)});return!0};Object.defineProperty(a.prototype,"test",{get:function(){return{loadQueue:this.loadQueue}},enumerable:!0,configurable:!0});return a}();d.StreamDataLoader=r;d.default=r})},"esri/views/3d/support/AsyncQuotaRoundRobinQueue":function(){define(["require","exports","../../../core/arrayUtils","../webgl-engine/lib/Util"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,d,g,e){this.workerFunc=b;this.robin=0;this.type2id={};this.tasks=
[];this.typeNumWorkers=[];this.typeWorkerQuota=[];this.typeStatistics=[];this.numTypes=this.maxTotalNumWorkers=this.totalNumWorkers=0;for(var c in e)this.type2id[c]=this.tasks.length,this.tasks.push([]),this.typeNumWorkers.push(0),this.typeStatistics.push({requests:0,size:0,duration:0,speed:0}),this.typeWorkerQuota.push(e[c]),this.maxTotalNumWorkers+=e[c];this.numTypes=this.tasks.length;var f=this;this.taskCallback=function(a){a._cancelledInQueue||(d.apply(g,arguments),f.taskFinished(a))}}d.prototype.setWorkerQuota=
function(b){l.assert(n.equals(Object.keys(this.typeWorkerAllocation),Object.keys(b)));this.typeWorkerAllocation=b;this.maxTotalNumWorkers=0;for(var d in b)this.typeWorkerQuota[this.type2id[d]]=b[d],this.maxTotalNumWorkers+=b[d]};d.prototype.push=function(b){var d=this.type2id[b.clientType];this.totalNumWorkers<this.maxTotalNumWorkers?(this.typeNumWorkers[d]++,this.totalNumWorkers++,this.workerFunc(b,this.taskCallback)):this.tasks[d].push(b)};d.prototype._getStatsForType=function(b){b=this.type2id[b];
return{quota:this.typeWorkerQuota[b],workers:this.typeNumWorkers[b],queueSize:this.tasks[b].length,requestStats:this.typeStatistics[b]}};d.prototype.removeTasks=function(b,d){for(var g=[],e=0,c=this.tasks[this.type2id[d]];e<c.length;e++){var f=c[e];-1===b.indexOf(f)&&g.push(f)}this.tasks[this.type2id[d]]=g};d.prototype.workerCancelled=function(b){this.taskFinished(b);b._cancelledInQueue=!0};d.prototype.clear=function(){for(var b=0;b<this.tasks.length;b++)this.tasks[b]=[]};d.prototype.taskFinished=
function(b){var d=this.type2id[b.clientType];this.typeNumWorkers[d]--;this.totalNumWorkers--;this.typeStatistics[d].requests++;this.typeStatistics[d].size+=b.size||0;this.typeStatistics[d].duration+=b.duration||0;this.typeStatistics[d].speed=0<this.typeStatistics[d].duration?this.typeStatistics[d].size/this.typeStatistics[d].duration:0;l.assert(0<=this.typeNumWorkers[d]);this.next()};d.prototype.next=function(){var b=this.robin,d=!1;do this.typeNumWorkers[b]<this.typeWorkerQuota[b]&&this.processQueue(b)&&
(d=!0),b=(b+1)%this.numTypes;while(!d&&b!==this.robin);if(!d){do this.processQueue(b)&&(d=!0),b=(b+1)%this.numTypes;while(!d&&b!==this.robin)}this.robin=b};d.prototype.processQueue=function(b){for(;0<this.tasks[b].length;)if(this.workerFunc(this.tasks[b].shift(),this.taskCallback))return this.typeNumWorkers[b]++,this.totalNumWorkers++,!0;return!1};Object.defineProperty(d.prototype,"test",{get:function(){var b=this;return{set workerFunc(d){b.workerFunc=d}}},enumerable:!0,configurable:!0});return d}();
d.AsyncQuotaRoundRobinQueue=r})},"esri/views/3d/support/MapCoordsHelper":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/promiseUtils ../../../core/unitUtils ../../../portal/support/geometryServiceUtils ../../../tasks/support/ProjectParameters".split(" "),function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(c,d,a){void 0===a&&(a=null);var e=this;this.spatialReference=d;this.unitInMeters=b.getMetersPerUnitForSR(this.spatialReference);
(this.geometryService=a)||h.create(c&&c.get("portalItem")).then(function(a){e.geometryService=a}).catch(function(){})}d.prototype.toGeographic=function(b){var c=this,a=!0;if(!this.geometryService)return k.reject(new l("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config"));Array.isArray(b[0])&&"number"!==typeof b[0]||(b=[b],a=!1);b=b.map(function(a){return a instanceof n.Point?a:new n.Point(a,c.spatialReference)});b=new g({geometries:b,outSpatialReference:n.SpatialReference.WGS84});
return this.geometryService.project(b).then(function(b){b=b.map(function(a){if("point"===a.type)return[a.x,a.y]});return a?b:b[0]})};d.prototype.canProject=function(){return!!this.geometryService};return d}();d.MapCoordsHelper=r;d.default=r})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),
function(r,d,n,l,k,b,h,g,e,c){function f(a,c){void 0===a&&(a=null);return l(this,void 0,void 0,function(){var d;return n(this,function(f){switch(f.label){case 0:if(k.geometryServiceUrl)return[2,new e({url:k.geometryServiceUrl})];if(!a)throw new b("internal:geometry-service-url-not-configured");a.isInstanceOf(g)?d=a.portal||h.getDefault():a.isInstanceOf(h)&&(d=a);return[4,d.load({signal:c})];case 1:f.sent();if(d.helperServices&&d.helperServices.geometry&&d.helperServices.geometry.url)return[2,new e({url:d.helperServices.geometry.url})];
throw new b("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(d,"__esModule",{value:!0});d.create=f;d.projectGeometry=function(a,d,e,g){void 0===e&&(e=null);return l(this,void 0,void 0,function(){var h,k,l;return n(this,function(p){switch(p.label){case 0:return[4,f(e,g)];case 1:return h=p.sent(),k=new c,k.geometries=[a],k.outSpatialReference=d,[4,h.project(k,{signal:g})];case 2:if((l=p.sent())&&Array.isArray(l)&&1===l.length)return[2,l[0]];throw new b("internal:geometry-service-projection-failed");
}})})}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/jsonMap ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(r,d,n,l,k,b,h,g,e,c,f){var a=new d.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),p=n.ensureType(f);d=c.createSubclass({declaredClass:"esri.tasks.GeometryService",
areasAndLengths:function(a,b){a={query:r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,c){var d=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};
if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new h({spatialReference:d,rings:a.rings})})})},buffer:function(a,b){var c=r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.outSpatialReference||a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||
[]).map(function(a){return new h({spatialReference:d,rings:a.rings})})})},cut:function(a,b,c){var d=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,
geometries:(a.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})}})},convexHull:function(a,b){var c=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/convexHull",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=
r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},difference:function(a,b,c){var d=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},distance:function(a,b){a={query:r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},
fromGeoCoordinateString:function(b,c){var d={};d.sr=null!=b.sr&&"object"===typeof b.sr?b.sr.wkid||JSON.stringify(b.sr):b.sr;d.strings=JSON.stringify(b.strings);d.conversionType=a.toJSON(b.conversionType||"mgrs");d.conversionMode=b.conversionMode;b={query:r.mixin({},this.parsedUrl.query,{f:"json"},d)};if(this.requestOptions||c)b=r.mixin({},this.requestOptions,c,b);return e(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=
r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},intersect:function(a,b,c){var d=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:g.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},lengths:function(a,b){a={query:r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},
labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),d=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),polygons:JSON.stringify(c)})};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},offset:function(a,b){var c=r.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return g.fromJSON(a).set("spatialReference",d)})})},project:function(a,b){a=p(a);var c=r.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),d=a.outSpatialReference,f=g.getJsonType(a.geometries[0]),h=this._decodeGeometries;a={query:c};if(this.requestOptions||b)a=
r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/project",a).then(function(a){return h(a.data,f,d)})},relation:function(a,b){a={query:r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},reshape:function(a,b,c){var d=a.spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:g.getJsonType(a),
geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/reshape",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",d)})},simplify:function(a,b){var c=a[0].spatialReference,d=r.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=g.getJsonType(a[0]),h=this._decodeGeometries;a={query:d};
if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/simplify",a).then(function(a){return h(a.data,f,c)})},toGeoCoordinateString:function(b,c){var d={};d.sr=null!=b.sr&&"object"===typeof b.sr?b.sr.wkid||JSON.stringify(b.sr):b.sr;d.coordinates=JSON.stringify(b.coordinates);d.conversionType=a.toJSON(b.conversionType||"mgrs");d.conversionMode=b.conversionMode;d.numOfDigits=b.numOfDigits;d.rounding=b.rounding;d.addSpaces=b.addSpaces;b={query:r.mixin({},this.parsedUrl.query,
{f:"json"},d)};if(this.requestOptions||c)b=r.mixin({},this.requestOptions,c,b);return e(this.parsedUrl.path+"/toGeoCoordinateString",b).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,c){var d=r.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),f=a.sr;a={query:d};if(this.requestOptions||c)a=r.mixin({},this.requestOptions,c,a);return e(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new b({spatialReference:f,paths:a.paths})})})},
union:function(a,b){var c=a[0].spatialReference;a={query:r.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=r.mixin({},this.requestOptions,b,a);return e(this.parsedUrl.path+"/union",a).then(function(a){return g.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},
_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:g.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var d=g.getGeometryType(b);a=a.geometries;var e=[],f={spatialReference:c.toJSON()},h=r.mixin;a.forEach(function(a,b){e[b]=new d(h(a,f))});return e},_toProjectGeometry:function(a){var c=a.spatialReference.toJSON();return a instanceof l?new h({rings:[[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new b({paths:[[].concat(a.points)],spatialReference:c})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new l(a[0][0],a[0][1],a[2][0],a[2][1],c)):new k({points:a.paths[0],spatialReference:c.toJSON()})}});r.mixin(d,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return d})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(r,d,n,l,k,b,h,g){var e=b.getLogger("esri.tasks.support.ProjectParameters");return function(b){function c(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}n(c,b);Object.defineProperty(c.prototype,"outSR",{get:function(){e.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){e.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:g.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};l([h.property()],c.prototype,"geometries",void 0);l([h.property({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0);l([h.property({json:{read:!1}})],c.prototype,"outSR",null);l([h.property()],c.prototype,"transformation",void 0);l([h.property()],c.prototype,"transformForward",void 0);return c=l([h.subclass("esri.tasks.support.ProjectParameters")],c)}(h.declared(k))})},"esri/views/3d/support/QualitySettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b){var h=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.minTotalNumberOfFeatures=2E3;a.maxTotalNumberOfFeatures=5E4;a.maxTotalNumberOfPrimitives=17E5;return a}n(a,c);l([b.property()],a.prototype,"minTotalNumberOfFeatures",void 0);l([b.property()],a.prototype,"maxTotalNumberOfFeatures",void 0);l([b.property()],a.prototype,"maxTotalNumberOfPrimitives",void 0);return a=l([b.subclass("esri.views.3d.support.QualitySettings.Graphics3DSettings")],a)}(b.declared(k)),
g=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.lodFactor=1;return a}n(a,c);l([b.property()],a.prototype,"lodFactor",void 0);return a=l([b.subclass("esri.views.3d.support.QualitySettings.LoDFactorSettings")],a)}(b.declared(k)),e=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a["3dObject"]=new g;a.point=new g;a.integratedMesh=new g;a.pointCloud=new g;a.uncompressedTextureDownsamplingEnabled=!1;return a}n(a,c);l([b.property({type:g})],a.prototype,"3dObject",
void 0);l([b.property({type:g})],a.prototype,"point",void 0);l([b.property({type:g})],a.prototype,"integratedMesh",void 0);l([b.property({type:g})],a.prototype,"pointCloud",void 0);l([b.property()],a.prototype,"uncompressedTextureDownsamplingEnabled",void 0);return a=l([b.subclass("esri.views.3d.support.QualitySettings.SceneServiceSettings")],a)}(b.declared(k)),c=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.lodBias=0;a.angledSplitBias=1;return a}n(a,c);l([b.property()],
a.prototype,"lodBias",void 0);l([b.property()],a.prototype,"angledSplitBias",void 0);return a=l([b.subclass("esri.views.3d.support.QualitySettings.TiledSurfaceSettings")],a)}(b.declared(k));return function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a.graphics3D=new h;a.sceneService=new e;a.tiledSurface=new c;a.antialiasingEnabled=!0;return a}n(a,d);l([b.property({type:h})],a.prototype,"graphics3D",void 0);l([b.property({type:e})],a.prototype,"sceneService",void 0);l([b.property({type:c})],
a.prototype,"tiledSurface",void 0);l([b.property()],a.prototype,"antialiasingEnabled",void 0);l([b.property()],a.prototype,"memoryLimit",void 0);l([b.property()],a.prototype,"additionalCacheMemory",void 0);l([b.property()],a.prototype,"frameRate",void 0);l([b.property()],a.prototype,"maximumRenderResolution",void 0);l([b.property()],a.prototype,"maximumPixelRatio",void 0);return a=l([b.subclass("esri.views.3d.support.QualitySettings.QualitySettings")],a)}(b.declared(k))})},"esri/views/3d/support/RenderCoordsHelper":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/compilerUtils ../../../core/unitUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../geometry/SpatialReference ../../../layers/graphics/dehydratedFeatures ./earthUtils ./geometryUtils ./projectionUtils ./stack ./geometryUtils/coordinateSystem".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a,b,c,d){this.type=a;this.spatialReference=b;this.unitInMeters=c;this.coordinateSystem=d;this.tmpCoordinateSystem=q.create(d)}Object.defineProperty(d.prototype,"extent",{set:function(a){a&&q.setExtent(this.coordinateSystem,a,this.coordinateSystem)},enumerable:!0,configurable:!0});d.prototype.getAltitude=function(a){return q.altitudeAt(this.coordinateSystem,a)};d.prototype.setAltitude=function(a,
b){q.setAltitudeAt(this.coordinateSystem,b,a,b)};d.prototype.setAltitudeOfTransformation=function(a,b){q.setAltitudeOfTransformation(this.coordinateSystem,b,a,b)};d.prototype.worldUpAtPosition=function(a,b){return q.normalAt(this.coordinateSystem,a,b)};d.prototype.worldBasisAtPosition=function(a,b,c){return q.axisAt(this.coordinateSystem,a,b,c)};d.prototype.basisMatrixAtPosition=function(a,c){var d=this.worldBasisAtPosition(a,0,p.sv3d.get()),e=this.worldBasisAtPosition(a,1,p.sv3d.get());a=this.worldBasisAtPosition(a,
2,p.sv3d.get());b.mat4.set(c,d[0],d[1],d[2],0,e[0],e[1],e[2],0,a[0],a[1],a[2],0,0,0,0,1);return c};d.prototype.intersectManifoldClosestSilhouette=function(a,b,c){q.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);q.intersectRayClosestSilhouette(this.tmpCoordinateSystem,a,c);return c};d.prototype.intersectManifold=function(a,b,c){q.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);b=p.sv3d.get();return q.intersectRay(this.tmpCoordinateSystem,a,b)?(h.vec3.copy(c,b),!0):!1};d.prototype.intersectInfiniteManifold=
function(a,b,c){if("global"===this.type)return this.intersectManifold(a,b,c);q.elevate(this.coordinateSystem,b,this.tmpCoordinateSystem);b=this.tmpCoordinateSystem.value;var d=p.sv3d.get();return f.plane.intersectRay(b.plane,a,d)?(h.vec3.copy(c,d),!0):!1};d.prototype.toRenderCoords=function(b,c,d){return e.isPoint(b)?a.pointToVector(b,c,this.spatialReference):a.vectorToVector(b,c,d,this.spatialReference)};d.prototype.fromRenderCoords=function(b,c,d){return e.isPoint(c)?a.vectorToPoint(b,this.spatialReference,
c,d):c instanceof g?a.vectorToPoint(b,this.spatialReference,c):a.vectorToVector(b,this.spatialReference,c,d)};d.createGlobal=function(b){void 0===b&&(b=a.SphericalECEFSpatialReference);var e=q.fromValues(f.sphere,f.sphere.fromValues(c.earthRadius,[0,0,0]));return new d("global",b,1,e)};d.createLocal=function(a){var b=q.fromValues(f.boundedPlane,f.boundedPlane.fromValues([0,0,0],[v,0,0],[0,v,0])),c=k.getMetersPerUnitForSR(a);return new d("local",a,c,b)};d.createMode=function(a,b){switch(a){case "local":return d.createLocal(b);
case "global":return d.createGlobal();default:l.neverReached(a)}};return d}();d.RenderCoordsHelper=r;var v=Math.pow(2,50)})},"esri/views/3d/support/SharedSymbolResources":function(){define("require exports ../../../core/arrayUtils ../../../core/Handles ./index ./TextureCollection ../webgl-engine/lib/screenSizePerspectiveUtils".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(c){this.streamDataRequester=this.textures=null;this.graphicsOwners=
[];this.screenSizePerspectiveHandles=null;var d=k.ClientType.SYMBOLOGY;this.viewState=c.viewState;this.stage=c.stage;this.pointsOfInterest=c.pointsOfInterest;this.resourceController=c.resourceController;this.streamDataRequester=this.resourceController.createStreamDataRequester(d);this.textures=new b.default(this.streamDataRequester,c.stage,{preMultiplyAlpha:!0,wrap:{s:33071,t:33071}});this.screenSizePerspectiveSettings=h.getSettings(c.viewingMode);this.screenSizePerspectiveSettingsLabels=h.getLabelSettings(c.viewingMode)}
d.prototype.destroy=function(){this.textures.destroy();this.streamDataRequester=this.textures=null};d.prototype.addGraphicsOwner=function(b){var c=this;if(!b)return{remove:function(){}};this.graphicsOwners.push(b);var a="layer"in b?b.watch("layer.screenSizePerspectiveEnabled",function(){return c.updateScreenSizePerspectiveEnabled()}):null;this.updateScreenSizePerspectiveEnabled();return{remove:function(){a&&(a.remove(),n.removeUnordered(c.graphicsOwners,b),c.updateScreenSizePerspectiveEnabled())}}};
d.prototype.updateScreenSizePerspectiveEnabled=function(){var b=this,d=this.graphicsOwners.some(function(a){return!0===a.get("layer.screenSizePerspectiveEnabled")});d&&!this.screenSizePerspectiveHandles?(this.screenSizePerspectiveHandles=new l,d=function(){return b.updateScreenSizePerspectiveSettings()},this.screenSizePerspectiveHandles.add([this.pointsOfInterest.centerOnSurfaceInfrequent.watch("distance",d,!0),this.viewState.events.on("camera-projection-changed",d)]),this.updateScreenSizePerspectiveSettings()):
!d&&this.screenSizePerspectiveHandles&&(this.screenSizePerspectiveHandles.destroy(),this.screenSizePerspectiveHandles=null)};d.prototype.updateScreenSizePerspectiveSettings=function(){g.distance=this.pointsOfInterest.centerOnSurfaceInfrequent.distance;g.fovY=this.viewState.camera.fovY;this.screenSizePerspectiveSettings.update(g);this.screenSizePerspectiveSettingsLabels.update(g);this.stage.renderView.setNeedsRender()};return d}();d.SharedSymbolResources=r;var g={distance:0,fovY:0};d.default=r})},
"esri/views/3d/support/TextureCollection":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/maybe ../../../core/promiseUtils ../../../core/scheduling ../../../core/urlUtils ../webgl-engine/Stage ../webgl-engine/lib/Texture".split(" "),function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function a(a,b,c,d){void 0===d&&(d=g.schedule);this._streamDataRequester=
a;this._stage=b;this._textureOptions=c;this._schedule=d;this._textureRequests=new Map}a.prototype.destroy=function(){var a=this;this._textureRequests.forEach(function(b){return a.releaseTextureRequest(b)});this._textureRequests=null};a.prototype.fromUrl=function(a,c,d){return k(this,void 0,void 0,function(){var e,f,g,k,m,p=this;return l(this,function(l){h.throwIfAborted(d);e=b.isSome(d)&&d.signal;f=this.makeUid(a,c);g=this._textureRequests.get(f);g||(k=h.createAbortController(),m=this._streamDataRequester(a,
"image",{uid:f,signal:k.signal}),g={referenceCount:0,texture:null,textureAsync:null,abortController:k},this._textureRequests.set(f,g),g.textureAsync=m.then(function(b){b=p.createTexture(a,b,c);g.texture=b;g.abortController=null;p.addToStage(b);return{uid:f,texture:b}},function(a){g.abortController=null;throw a;}));g.referenceCount++;return[2,h.create(function(a,b){h.onAbort(e,function(){b(h.createAbortError())});g.textureAsync.then(a,b)}).catch(function(a){p.release(f);throw a;})]})})};a.prototype.fromData=
function(a,b){a=this.makeUid(a);var c=this._textureRequests.get(a);c||(c={referenceCount:0,texture:b(),textureAsync:null,abortController:null},this.addToStage(c.texture),this._textureRequests.set(a,c));c.referenceCount++;return{uid:a,texture:c.texture}};a.prototype.release=function(a){var b=this;if(this._textureRequests){var c=this._textureRequests.get(a);c?(1>c.referenceCount&&console.warn("TextureCollection: reference count is \x3c 1 for "+a),c.referenceCount--,1>c.referenceCount&&this._schedule(function(){return b.releaseNow(a)})):
console.warn("TextureCollection: texture doesn't exist: '"+a+"'")}};Object.defineProperty(a.prototype,"test",{get:function(){return{textureRequests:this._textureRequests}},enumerable:!0,configurable:!0});a.prototype.releaseNow=function(a){if(this._textureRequests){var b=this._textureRequests.get(a);!b||0<b.referenceCount||(this.releaseTextureRequest(b),this._textureRequests.delete(a))}};a.prototype.releaseTextureRequest=function(a){a.texture?this.removeFromStage(a.texture):a.abortController&&(a.abortController.abort(),
a.abortController=null)};a.prototype.createTexture=function(a,b,c){e.isSVG(a)&&(c||0===b.width&&0===b.height)&&(a=b.width?b.height/b.width:1,c=c||64,1<a?(b.width=Math.round(c/a),b.height=c):(b.width=c,b.height=Math.round(c*a)));c=n({},this._textureOptions,{width:b.width,height:b.height,powerOfTwoResizeMode:2});return new f(b,"symbol",c)};a.prototype.addToStage=function(a){this._stage.add(c.ModelContentType.TEXTURE,a)};a.prototype.removeFromStage=function(a){this._stage.remove(c.ModelContentType.TEXTURE,
a.id)};a.prototype.makeUid=function(a,b){return null!=b?a+"."+b+"px":a};return a}();d.TextureCollection=r;d.default=r})},"esri/views/3d/support/pointsOfInterest/PointsOfInterest":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../../core/Accessor ../../../../core/Handles ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../PropertiesPool ./CameraOnSurface ./CenterOnSurface ./ContentGeometryUpdates ./disposeMembers ./Focus ./StableSurfaceCenter ./SurfaceGeometryUpdates ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/intersectorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){Object.defineProperty(d,"__esModule",{value:!0});var B=Array;r=function(d){function h(b){b=d.call(this,b)||this;b.handles=new g;b.surfaceAltitudeAtCenter=0;b.surfaceAltitudeAtCenterDirty=!0;b.surfaceAltitudeAtCenterWithContent=0;b.surfaceAltitudeAtCenterWithContentDirty=!0;b.propertiesPool=new p.default({pointOfView:a,renderPointOfView:B},b);b.renderPointOfView=f.vec3f64.create();return b}n(h,d);h.prototype.initialize=function(){var a=this,c=this.view,
d=c.state,e=c.basemapTerrain,f=c.renderCoordsHelper,c=c.map;this.surfaceIntersector=new u(d.mode);this.surfaceIntersector.enable.backfacesTerrain=d.isGlobal?!1:!0;this.surfaceIntersector.enable.invisibleTerrain=!1;this.contentIntersector=new u(d.mode);this.contentIntersectorOptions={exclude:new b.Set([z.TERRAIN_ID])};var g=this.estimateSurfaceAltitudeAtCenter.bind(this),h={state:d,scheduler:this.view.resourceController.scheduler,surface:e,renderCoordsHelper:f};this._set("centerOnSurfaceInfrequent",
new v.default(k({},h,{priority:30,estimateSurfaceAltitudeAtCenter:g})));this._set("centerOnSurfaceFrequent",new v.default(k({},h,{priority:6,estimateSurfaceAltitudeAtCenter:g})));this._set("centerOnContent",new v.default(k({},h,{priority:6,estimateSurfaceAltitudeAtCenter:this.estimateSurfaceAltitudeAtCenterWithContent.bind(this)})));this._set("cameraOnSurface",new q.default(k({},h,{priority:30,map:c})));this._set("surfaceGeometryUpdates",new m.default(k({},h,{centerOnSurfaces:[this.centerOnSurfaceFrequent,
this.centerOnContent,this.centerOnSurfaceInfrequent]})));this._set("contentGeometryUpdates",new t.default({contentLayerViews:this.view.allLayerViews,renderCoordsHelper:f}));this._set("surfaceOrigin",new w.default({view:this.view}));this._set("focus",new x.default({state:d,surface:e,renderCoordsHelper:f,centerOnSurface:this.centerOnSurfaceFrequent}));this.handles.add([d.watch("camera",function(b){return a.cameraChanged(b)},!0),e.watch("extent",function(){return a.updateCenterPointsOfInterest()}),this.surfaceGeometryUpdates.events.on("request-update",
function(){return a.updateCenterPointsOfInterest()}),this.contentGeometryUpdates.events.on("request-update",function(){return a.updateCenterOnContent()})]);this.cameraChanged(this.view.state.camera);this.centerOnContent.update();this.centerOnSurfaceFrequent.update();this.centerOnSurfaceInfrequent.update();this.cameraOnSurface.update()};h.prototype.destroy=function(){y.default(this,"handles","centerOnSurfaceInfrequent","centerOnSurfaceFrequent","cameraOnSurface","centerOnContent","surfaceOrigin","focus",
"propertiesPool")};Object.defineProperty(h.prototype,"pointOfView",{get:function(){var a=this.propertiesPool.get("pointOfView");this.view.renderCoordsHelper.fromRenderCoords(this.renderPointOfView,a,this.view.state.spatialReference);return a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"updating",{get:function(){return this.surfaceGeometryUpdates.updating||this.centerOnContent.updating||this.centerOnSurfaceInfrequent.updating||this.centerOnSurfaceFrequent.updating||this.cameraOnSurface.updating||
this.focus.updating},enumerable:!0,configurable:!0});h.prototype.estimateSurfaceAltitudeAtCenterWithContent=function(){if(!this.surfaceAltitudeAtCenterWithContentDirty)return this.surfaceAltitudeAtCenterWithContent;this.surfaceAltitudeAtCenterWithContentDirty=!1;this.view.sceneIntersectionHelper.intersectRay(this.view.state.camera.ray,C,this.contentIntersectorOptions,this.contentIntersector)?this.surfaceAltitudeAtCenterWithContent=this.view.renderCoordsHelper.getAltitude(C):this.surfaceAltitudeAtCenterWithContent=
this.estimateSurfaceAltitudeAtCenter();return this.surfaceAltitudeAtCenterWithContent};h.prototype.estimateSurfaceAltitudeAtCenter=function(){if(!this.view.basemapTerrain)return 0;if(!this.surfaceAltitudeAtCenterDirty)return this.surfaceAltitudeAtCenter;this.surfaceAltitudeAtCenterDirty=!1;var a=this.view.state.camera;this.surfaceIntersector.intersect(null,a.eye,a.center,null,a,null,!1);this.view.basemapTerrain.intersect(this.surfaceIntersector,null,a.eye,a.center);this.surfaceIntersector.results.min.getIntersectionPoint(C)&&
(this.surfaceAltitudeAtCenter=this.view.renderCoordsHelper.getAltitude(C));return this.surfaceAltitudeAtCenter};h.prototype.cameraChanged=function(a){this.updateCenterPointsOfInterest();a=a.eye;c.vec3.equals(this.renderPointOfView,a)||this._set("renderPointOfView",c.vec3.copy(this.propertiesPool.get("renderPointOfView"),a))};h.prototype.updateCenterPointsOfInterest=function(){this.surfaceAltitudeAtCenterWithContentDirty=this.surfaceAltitudeAtCenterDirty=!0;this.centerOnSurfaceFrequent.updateRenderLocation();
this.centerOnSurfaceInfrequent.updateRenderLocation();this.cameraOnSurface.updateRenderLocation();this.focus.updateRenderLocation();this.centerOnContent.updateRenderLocation()};h.prototype.updateCenterOnContent=function(){this.surfaceAltitudeAtCenterWithContentDirty=!0;this.centerOnContent.updateRenderLocation()};Object.defineProperty(h.prototype,"test",{get:function(){var a=this;return{update:function(){a.surfaceGeometryUpdates.update();a.centerOnSurfaceFrequent.update();a.centerOnSurfaceInfrequent.update()},
surfaceGeometryUpdates:this.surfaceGeometryUpdates}},enumerable:!0,configurable:!0});l([e.property({readOnly:!0})],h.prototype,"centerOnContent",void 0);l([e.property({readOnly:!0})],h.prototype,"centerOnSurfaceFrequent",void 0);l([e.property({readOnly:!0})],h.prototype,"centerOnSurfaceInfrequent",void 0);l([e.property({readOnly:!0})],h.prototype,"cameraOnSurface",void 0);l([e.property({readOnly:!0})],h.prototype,"focus",void 0);l([e.property({readOnly:!0})],h.prototype,"surfaceOrigin",void 0);l([e.property({readOnly:!0})],
h.prototype,"contentGeometryUpdates",void 0);l([e.property({readOnly:!0,dependsOn:["renderPointOfView"]})],h.prototype,"pointOfView",null);l([e.property({readOnly:!0})],h.prototype,"renderPointOfView",void 0);l([e.property({readOnly:!0})],h.prototype,"surfaceGeometryUpdates",void 0);l([e.property({constructOnly:!0})],h.prototype,"view",void 0);l([e.property({readOnly:!0,dependsOn:"surfaceGeometryUpdates.updating centerOnContent.updating centerOnSurfaceInfrequent.updating centerOnSurfaceFrequent.updating cameraOnSurface.updating focus.updating".split(" ")})],
h.prototype,"updating",null);return h=l([e.subclass("esri.views.3d.support.PointsOfInterest")],h)}(e.declared(h));d.PointsOfInterest=r;var C=f.vec3f64.create();d.default=r})},"esri/views/3d/support/pointsOfInterest/CameraOnSurface":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../PropertiesPool ./PointOfInterest".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,"__esModule",{value:!0});var p=Array;r=function(a){function d(b){b=a.call(this,b)||this;b._dirty=!1;b._propertiesPool=new f.default({location:c,renderLocation:p},b);b._estimatedSurfaceAltitude=0;b._pendingElevationQueryController=null;b.renderLocation=e.vec3f64.create();return b}n(d,a);d.prototype.initialize=function(){var a=this;this.handles.add(this.scheduler.registerTask(this.priority,function(){return a._measureSurfaceAltitude()},function(){return a._needsUpdate()}));
this._measureSurfaceAltitude();if(this.map){var c=function(){return a._setDirty()};this.handles.add([b.on(this.map,"ground.layers","change",c,c,c)])}};d.prototype.destroy=function(){this._cancelPendingRequest();this._propertiesPool.destroy();this._propertiesPool=null};Object.defineProperty(d.prototype,"location",{get:function(){var a=this._propertiesPool.get("location");this.renderCoordsHelper.fromRenderCoords(this.renderLocation,a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"updating",{get:function(){return this._dirty||null!=this._pendingElevationQueryController},enumerable:!0,configurable:!0});d.prototype.updateRenderLocation=function(){this._setDirty();this._updateRenderLocation()};d.prototype.update=function(){this._measureSurfaceAltitude();this._updateRenderLocation()};d.prototype._setDirty=function(){this._dirty||(this._dirty=!0,this.notifyChange("updating"))};d.prototype._needsUpdate=function(){return!this._pendingElevationQueryController&&
this._dirty};d.prototype._cancelPendingRequest=function(){var a=this._pendingElevationQueryController;a&&(this._pendingElevationQueryController=null,a.abort(),this.notifyChange("updating"))};d.prototype._measureSurfaceAltitude=function(){var a=this;this._cancelPendingRequest();this._dirty=!1;this.notifyChange("updating");if(this.map&&this.map.ground){this.renderCoordsHelper.fromRenderCoords(this.state.camera.eye,v,this.state.spatialReference);var b=k.createAbortController();this.map.ground.queryElevation(v,
{signal:b.signal}).then(function(b){return a._updateSurfaceAltitude(b.geometry.z)}).catch(function(b){k.isAbortError(b)||a._updateSurfaceAltitude(0)}).catch(function(){}).then(function(){a._pendingElevationQueryController===b&&(a._pendingElevationQueryController=null,a.notifyChange("updating"));b=null});this._pendingElevationQueryController=b}else this._updateSurfaceAltitude(0)};d.prototype._updateSurfaceAltitude=function(a){this._estimatedSurfaceAltitude!==a&&(this._estimatedSurfaceAltitude=a,this._updateRenderLocation())};
d.prototype._updateRenderLocation=function(){g.vec3.copy(q,this.state.camera.eye);this.renderCoordsHelper.setAltitude(this._estimatedSurfaceAltitude,q);g.vec3.equals(this._get("renderLocation"),q)||this._set("renderLocation",g.vec3.copy(this._propertiesPool.get("renderLocation"),q))};l([h.property({constructOnly:!0})],d.prototype,"scheduler",void 0);l([h.property({constructOnly:!0})],d.prototype,"priority",void 0);l([h.property({readOnly:!0,dependsOn:["renderLocation"]})],d.prototype,"location",null);
l([h.property({constructOnly:!0})],d.prototype,"map",void 0);l([h.property({readOnly:!0})],d.prototype,"renderLocation",void 0);l([h.property({readOnly:!0})],d.prototype,"updating",null);return d=l([h.subclass("esri.views.3d.support.CameraOnSurface")],d)}(h.declared(a.PointOfInterest));d.CameraOnSurface=r;var q=e.vec3f64.create(),v=new c;d.default=r})},"esri/views/3d/support/pointsOfInterest/PointOfInterest":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/accessorSupport/decorators ./disposeMembers".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function c(c){c=d.call(this)||this;c.handles=new b;return c}n(c,d);c.prototype.destroy=function(){g.default(this,"handles")};l([h.property({constructOnly:!0})],c.prototype,"renderCoordsHelper",void 0);l([h.property({constructOnly:!0})],c.prototype,"surface",void 0);l([h.property({constructOnly:!0})],c.prototype,"state",void 0);return c=l([h.subclass("esri.views.3d.support.PointOfInterest")],c)}(h.declared(k));
d.PointOfInterest=r;d.default=r})},"esri/views/3d/support/pointsOfInterest/disposeMembers":function(){define(["require","exports","../../../../core/Accessor"],function(r,d,n){function l(d){for(var b=[],h=1;h<arguments.length;h++)b[h-1]=arguments[h];if(d instanceof n&&d.destroyed)try{throw Error("instance is already destroyed");}catch(c){console.warn(c.stack)}else for(h=0;h<b.length;h++){var g=b[h];if(!(g in d))throw Error("Property '"+g+"' does not exist and cannot be disposed");var e=d[g];e&&("function"===
typeof e.destroy?e.destroy():"function"===typeof e.dispose?e.dispose():"function"===typeof e.remove&&e.remove());d instanceof n&&g in d.__accessor__.metadatas?d._set(g,null):d[g]=null}}Object.defineProperty(d,"__esModule",{value:!0});d.disposeMembers=l;d.default=l})},"esri/views/3d/support/pointsOfInterest/CenterOnSurface":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/mathUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../debugFlags ../earthUtils ../PropertiesPool ./PointOfInterest".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});var q=Array;r=function(d){function p(b){b=d.call(this,b)||this;b.propertiesPool=new a.default({location:e,renderLocation:q},b);b.currentSurfaceAltitude=0;b.latestSurfaceAltitude=0;b.distance=0;b.renderLocation=g.vec3f64.create();b.updating=!1;return b}n(p,d);p.prototype.initialize=function(){var a=this;this._frameWorker=this.scheduler.registerTask(this.priority,function(){return a._measureSurfaceAltitude()},function(){return a.updating});
this._measureSurfaceAltitude()};p.prototype.destroy=function(){this._frameWorker&&(this._frameWorker.remove(),this._frameWorker=null);this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(p.prototype,"location",{get:function(){var a=this.propertiesPool.get("location");this.renderCoordsHelper.fromRenderCoords(this.renderLocation,a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});p.prototype.updateRenderLocation=function(){this._set("updating",!0);this._updateRenderLocation()};
p.prototype.update=function(){this._measureSurfaceAltitude();this._updateRenderLocation()};Object.defineProperty(p.prototype,"estimatedSurfaceAltitude",{get:function(){return this.latestSurfaceAltitude},enumerable:!0,configurable:!0});p.prototype._measureSurfaceAltitude=function(){this.latestSurfaceAltitude=this.estimateSurfaceAltitudeAtCenter();this._updateRenderLocation();this._set("updating",!1)};p.prototype._updateRenderLocation=function(){var a=t,b=this.calculateSurfaceIntersection(this.currentSurfaceAltitude,
a),c=this.currentSurfaceAltitude!==this.latestSurfaceAltitude;!b&&c&&(b=this.calculateSurfaceIntersection(this.latestSurfaceAltitude,a))&&(this.currentSurfaceAltitude=this.latestSurfaceAltitude);c=y;b&&this.latestSurfaceAltitudeChangesDistanceSignificantly(a,c)&&(h.vec3.copy(a,c),this.currentSurfaceAltitude=this.latestSurfaceAltitude);b?(b=h.vec3.distance(this.state.camera.eye,a),b!==this._get("distance")&&this._set("distance",b)):(b=this.state.camera,h.vec3.scale(a,b.viewForward,this._get("distance")),
h.vec3.add(a,a,b.eye));h.vec3.equals(this._get("renderLocation"),a)||this._set("renderLocation",h.vec3.copy(this.propertiesPool.get("renderLocation"),a))};p.prototype.calculateSurfaceIntersection=function(a,b){var c=this.state.camera;if(!this.renderCoordsHelper.intersectManifold(c.ray,a,b))return!1;if(this.state.isGlobal){a=f.earthRadius+a;var d=h.vec3.squaredLength(c.eye),e=d<a*a,g=h.vec3.distance(c.eye,b);e&&g>f.earthRadius/4&&(h.vec3.scale(b,c.viewForward,a-Math.sqrt(d)),h.vec3.add(b,b,c.eye))}else if(c=
this.surface.ready&&this.surface.extent)b[0]=k.clamp(b[0],c[0],c[2]),b[1]=k.clamp(b[1],c[1],c[3]);return!0};p.prototype.latestSurfaceAltitudeChangesDistanceSignificantly=function(a,b){if(this.latestSurfaceAltitude===this.currentSurfaceAltitude||null==a)return!1;if(this.calculateSurfaceIntersection(this.latestSurfaceAltitude,b)){var d=this.state.camera.eye;a=h.vec3.distance(d,a);b=h.vec3.distance(d,b);if(c.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS||Math.abs(b-a)/a>v)return!0}return!1};l([b.property({constructOnly:!0})],
p.prototype,"scheduler",void 0);l([b.property({constructOnly:!0})],p.prototype,"priority",void 0);l([b.property({readOnly:!0})],p.prototype,"distance",void 0);l([b.property({constructOnly:!0})],p.prototype,"estimateSurfaceAltitudeAtCenter",void 0);l([b.property({readOnly:!0,dependsOn:["renderLocation"]})],p.prototype,"location",null);l([b.property({readOnly:!0})],p.prototype,"renderLocation",void 0);l([b.property({readOnly:!0})],p.prototype,"updating",void 0);return p=l([b.subclass("esri.views.3d.support.CenterOnSurface")],
p)}(b.declared(p.PointOfInterest));d.CenterOnSurface=r;var v=.05,t=g.vec3f64.create(),y=g.vec3f64.create();d.default=r})},"esri/views/3d/support/pointsOfInterest/ContentGeometryUpdates":function(){define(["require","exports","../../../../core/Evented","../../../../core/Handles"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(b){this.handles=new l;this.events=new n;this.contentLayerViews=b.contentLayerViews;this.handles.add(this.contentLayerViews.on("change",
this.layerViewsChanged.bind(this)));this.layerViewsChanged({added:this.contentLayerViews.toArray(),removed:[],moved:[],target:this.contentLayerViews})}b.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)};b.prototype.layerViewsChanged=function(b){var d=this;b.added.forEach(function(b){"esri.views.3d.layers.SceneLayerView3D"===b.declaredClass&&d.handles.add(b.on("visible-geometry-changed",d.contentChanged.bind(d)),b.uid)});b.removed.forEach(function(b){return d.handles.remove(b.uid)})};
b.prototype.contentChanged=function(){this.events.emit("request-update",k)};return b}();d.ContentGeometryUpdates=r;var k={};d.default=r})},"esri/views/3d/support/pointsOfInterest/Focus":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../geometryUtils ../PropertiesPool ./PointOfInterest".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});var q=Array;r=function(d){function e(b){b=d.call(this,b)||this;b.propertiesPool=new a.default({locationOnSurface:c,renderLocationOnSurface:q},b);b.centerOnSurface=null;return b}n(e,d);e.prototype.destroy=function(){this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(e.prototype,"locationOnSurface",{get:function(){var a=this.propertiesPool.get("locationOnSurface");this.renderCoordsHelper.fromRenderCoords(this.renderLocationOnSurface,
a,this.state.spatialReference);return a},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"renderLocationOnSurface",{get:function(){var a=this.centerOnSurface.renderLocation,b=this.renderCoordsHelper,c=this.calculateScreenHorizontalEdgeOnSurface(x);g.vec3.subtract(v,a,this.state.camera.eye);g.vec3.normalize(v,v);b.worldUpAtPosition(a,t);var d=Math.abs(Math.acos(g.vec3.dot(t,v))-.5*Math.PI),b=this.propertiesPool.get("renderLocationOnSurface"),d=1-k.clamp(d/(.5*Math.PI),0,1);g.vec3.lerp(b,
a,c,d*d*d);return b},enumerable:!0,configurable:!0});e.prototype.calculateScreenHorizontalEdgeOnSurface=function(a){var c=this.state.camera,d=this.renderCoordsHelper.getAltitude(this.centerOnSurface.renderLocation),e=this.renderCoordsHelper.getAltitude(c.eye)>=d,h=c.getRenderCenter(b.createRenderScreenPointArray3());h[1]=e?c.padding[2]:c.fullHeight-c.padding[0];c.unprojectPoint(h,y);g.vec3.subtract(y,y,c.eye);e=g.vec3.normalize(y,y);if(this.renderCoordsHelper.intersectManifold(f.ray.wrap(c.eye,e),
d,a))return a;g.vec3.copy(a,c.eye);this.renderCoordsHelper.setAltitude(d,a);return a};e.prototype.updateRenderLocation=function(){};l([h.property({constructOnly:!0})],e.prototype,"centerOnSurface",void 0);l([h.property({readOnly:!0,dependsOn:["renderLocationOnSurface"]})],e.prototype,"locationOnSurface",null);l([h.property({readOnly:!0,dependsOn:["centerOnSurface.renderLocation"]})],e.prototype,"renderLocationOnSurface",null);l([h.property({readOnly:!0,aliasOf:"centerOnSurface.updating"})],e.prototype,
"updating",void 0);return e=l([h.subclass("esri.views.3d.support.CenterOnSurface")],e)}(h.declared(p.PointOfInterest));d.Focus=r;var v=e.vec3f64.create(),t=e.vec3f64.create(),y=e.vec3f64.create(),x=e.vec3f64.create();d.default=r})},"esri/views/3d/support/pointsOfInterest/StableSurfaceCenter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/Point ../../../../geometry/support/aaBoundingRect".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function k(a){a=d.call(this,a)||this;a.location=null;a._updateController=null;a._handles=new b;return a}n(k,d);Object.defineProperty(k.prototype,"renderLocation",{get:function(){if(!this.location)return null;var a=c.vec3f64.create();this.view.renderCoordsHelper.toRenderCoords(this.location,a);return a},enumerable:!0,configurable:!0});k.prototype.initialize=function(){var a=this;this.view.state.isLocal&&
(this._handles.add([this.watch(["surfaceView.spatialReference","surfaceView.extent"],function(){return a._update()}),g.on(this,"surface.layers","change",function(){return a._update()})]),this._update())};k.prototype.destroy=function(){this._handles.destroy()};k.prototype._update=function(){var b=this;this._updateController&&(this._updateController.abort(),this._updateController=null);if(this.surfaceView&&this.surfaceView.extent&&this.surfaceView.spatialReference){var c=a.center(this.surfaceView.extent),
c=new f({x:c[0],y:c[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&0<this.surface.layers.length?(this._set("location",null),this._updateController=h.createAbortController(),this.surface.queryElevation(c,{noDataValue:0,signal:this._updateController.signal}).then(function(a){b._updateController=null;b._set("location",a.geometry)}).catch(function(a){h.isAbortError(a)||a&&"elevation-query:invalid-layer"===a.name||console.error("StableSurfaceCenter failed to update: ",a)})):
this._set("location",c)}else this._set("location",null)};l([e.property({constructOnly:!0})],k.prototype,"view",void 0);l([e.property({readOnly:!0,aliasOf:"view.map.ground"})],k.prototype,"surface",void 0);l([e.property({readOnly:!0,aliasOf:"view.basemapTerrain"})],k.prototype,"surfaceView",void 0);l([e.property({readOnly:!0})],k.prototype,"location",void 0);l([e.property({readOnly:!0,dependsOn:["location"]})],k.prototype,"renderLocation",null);return k=l([e.subclass("esri.views.3d.terrain.StableSurfaceCenter")],
k)}(e.declared(k));d.StableSurfaceCenter=r;d.default=r})},"esri/views/3d/support/pointsOfInterest/SurfaceGeometryUpdates":function(){define("require exports ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/Handles ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingRect".split(" "),function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,
"__esModule",{value:!0});r=function(d){function e(){var a=null!==d&&d.apply(this,arguments)||this;a.handles=new h;a._tileGeometryUpdateExtent=c.empty();a._tileGeometryUpdateSpatialReference=null;a.events=new b;a.updating=!1;return a}l(e,d);e.prototype.initialize=function(){var a=this;this.handles.add([this.surface.on("elevation-change",function(b){return a._tileGeometryChanged(b)}),this.scheduler.registerTask(1,function(){return a.update()},function(){return a.updating})])};e.prototype.destroy=function(){this.handles&&
(this.handles.destroy(),this.handles=null)};e.prototype.update=function(){this.updating&&(this._centerIntersectsExtent(this._tileGeometryUpdateExtent,this._tileGeometryUpdateSpatialReference)&&this.events.emit("request-update",f),c.empty(this._tileGeometryUpdateExtent),this._set("updating",!1))};e.prototype._tileGeometryChanged=function(a){this._tileGeometryUpdateSpatialReference=a.spatialReference;c.expand(this._tileGeometryUpdateExtent,a.tile.extent);this._set("updating",!0)};e.prototype._furthestCenterOnSurface=
function(){for(var a=this.centerOnSurfaces[0],b=1;b<this.centerOnSurfaces.length;b++){var c=this.centerOnSurfaces[b];c.distance>a.distance&&(a=c)}return a};e.prototype._centerIntersectsExtent=function(b,d){var e=this.state.camera.eye,f=q,g=this._furthestCenterOnSurface();this.renderCoordsHelper.fromRenderCoords(e,a,d);this.renderCoordsHelper.fromRenderCoords(g.renderLocation,p,d);a[0]<p[0]?(f[0]=a[0],f[2]=p[0]):(f[0]=p[0],f[2]=a[0]);a[1]<p[1]?(f[1]=a[1],f[3]=p[1]):(f[1]=p[1],f[3]=a[1]);return c.intersects(f,
b)};n([g.property({constructOnly:!0})],e.prototype,"state",void 0);n([g.property({constructOnly:!0})],e.prototype,"centerOnSurfaces",void 0);n([g.property({constructOnly:!0})],e.prototype,"renderCoordsHelper",void 0);n([g.property({constructOnly:!0})],e.prototype,"scheduler",void 0);n([g.property({constructOnly:!0})],e.prototype,"surface",void 0);n([g.property({readOnly:!0})],e.prototype,"updating",void 0);return e=n([g.subclass("esri.views.3d.support.SurfaceGeometryUpdates")],e)}(g.declared(k));
d.SurfaceGeometryUpdates=r;var f={},a=e.vec3f64.create(),p=e.vec3f64.create(),q=c.empty();d.default=r})},"esri/views/3d/terrain/TerrainSurface":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/arrayUtils ../../../core/asyncUtils ../../../core/CollectionFlattener ../../../core/Evented ../../../core/Handles ../../../core/Logger ../../../core/mathUtils ../../../core/ObjectPool ../../../core/PooledArray ../../../core/promiseUtils ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingRect ../../../layers/support/LercWorker ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ../support/geometryUtils ../support/index ../support/projectionUtils ./ElevationData ./ElevationTileAgent ./MapTileAgent ./OverlayManager ./PlanarPatch ./SphericalPatch ./SurfaceExtentHelper ./SurfaceTilingSchemeLogic ./TerrainConst ./TerrainRenderer ./terrainUtils ./TilemapOnlyTile ./tileUtils ./tileUtils ./UpsampleInfo ../../webgl/Texture ../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q,J,R,U,X,ca,G,Y,la,ja,na){function pa(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function ta(a,b){var c=!1;b=b||a;var d=0;for(a=a.children;d<a.length;d++){var e=a[d];if(e){for(var f in e.layerInfo)for(var g in e.layerInfo[f]){var h=e.layerInfo[f][g].upsampleFromTile;if(h&&h.tile===b)return!0}c=c||ta(e,b)}}return c}var aa=p.getLogger("esri.views.3d.terrain.TerrainSurface");r=function(d){function f(b,c){c=d.call(this)||
this;c.defaultTileBackground=R.DEFAULT_TILE_BACKGROUND;c.hideSkirtsDistanceFromExtentMargin=ga;c.hideSkirtsMinimumCameraTilt=ia;c.hideSkirtsMaximumCameraTilt=sa;c._clippingExtent=null;c._dataExtent=null;c._elevationBounds=[0,0];c._rootExtent=E.create();c._iteratorPool=new v(Y.IteratorPreorder);c._postorderIterator=new Y.IteratorPostorder;c.visible=!1;c.suspended=!1;c._pendingUpdates=!1;c._asyncWorkItems=0;c._lvPendingUpdates=!1;c._updateNextFrame=0;c._memoryUsed=0;c._overlayOpacity=1;c._eyePosRenderSR=
C.vec3f64.create();c._eyePosSurfaceSR=C.vec3f64.create();c._splitLimits=[0,0,0,0,0,0];c._frustum=K.frustum.create();c._viewProjectionMatrix=z.mat4f64.create();c._layerViews=[[],[]];c._layerIndexByLayerViewId=[{},{}];c._basemapLayerViewHandles={};c._handles=new a;c._lowPrioUpdates=new t;c._topLevelTilemapOnlyTiles=Array(R.TILEMAP_SIZE_EXP+1);c._upsampleInfoPool=new v(la);c._getElevationData={spatialReference:null,rootTiles:null};c.loaded=!1;c.maxTextureScale=1.2;c.rootTiles=null;c.backgroundImage=
R.DEFAULT_TILE_BACKGROUND;c.backgroundColor=null;c._lercWorker=N.acquireInstance(b.resourceController.scheduler);for(b=0;b<c._topLevelTilemapOnlyTiles.length;b++)c._topLevelTilemapOnlyTiles[b]=new ca([b-R.TILEMAP_SIZE_EXP,0,0],c._upsampleInfoPool);return c}l(f,d);f.prototype.normalizeCtorArgs=function(a,b){this._view=a;this._stage=a._stage;this._set("manifold",b);return{}};f.prototype.initialize=function(){var a=this;this._tilePool="planar"===this.manifold?new v(T):new v(Z);this._memCache=this._view.resourceController.memoryController.getMemCache("esri.views.3d.terrain",
function(b){return a._renderer.releaseTileGeometry(b.renderData)});this._renderer=new U(this.manifold,this._memCache);this._renderer.loaded=this._setLoaded.bind(this);this._renderer.install(this._view._stage);w.init(this,"_background",function(){a._renderer.setTileBackground(a._background)});this._handles.add(this._view.watch("pointsOfInterest",function(b){a._renderer.pointsOfInterest=b}));this._set("overlayManager",new V.OverlayManager({terrainSurface:this,view:this._view}));this._handles.add(this.watch("overlayManager.hasHighlights",
this._handleHasHighlights.bind(this)),"overlayManager");var b={layers:this._view.map.allLayers,layerViews:this._view.allLayerViews,spatialReference:this._view.spatialReference};this.extentHelper="spherical"===this.manifold?new Q.SurfaceExtentHelperGlobal(b):new Q.SurfaceExtentHelperLocal(b);this._handles.add(w.init(this.extentHelper,"stencilEnabledExtents",function(b){a._renderer.setStencilEnabledLayerExtents(b)}),"extentHelper");b=this._view.defaultsFromMap?new c({root:this._view.map,rootCollectionNames:this._view.defaultsFromMap.mapCollectionPaths,
getChildrenFunction:function(a){return a.layers}}):this._view.map.allLayers;b=new J({layers:b,extentHelper:this.extentHelper,manifold:this.manifold,viewSpatialReference:this._view.spatialReference});this._set("tilingSchemeLogic",b);this._handles.add([this.tilingSchemeLogic.watch("tilingScheme",this._updateTilingSchemeAndExtent.bind(this),!0),this.tilingSchemeLogic.watch("extent",this._updateTilingSchemeAndExtent.bind(this),!0)],"tilingSchemeLogic");this._updateTilingSchemeAndExtent();this._streamDataRequester=
this._view.resourceController.createStreamDataRequester(O.ClientType.TERRAIN);this._handles.add(this._view.resourceController.scheduler.registerTask(1,function(b){return a._frame(b)},function(){return a.ready&&(a._pendingUpdates||a._lvPendingUpdates)}));this._viewChangeUpdate=this._viewChangeUpdate.bind(this);this._view.resourceController.memoryController.events.on("quality-changed",function(){return a._viewChangeUpdate()});this._handles.add([this._view.on("resize",this._viewChangeUpdate),this._view.watch("state.camera",
this._viewChangeUpdate,!0),this._view.watch("qualitySettings.tiledSurface.lodBias",this._viewChangeUpdate),this._view.watch("clippingArea",this._clippingChanged.bind(this))],"view");this._handles.add(this._view.allLayerViews.on("change",this._handleLayerViewChanges.bind(this)),"allLayerViews");this._handleLayerViewChanges({added:this._view.allLayerViews.toArray(),removed:[],moved:[],target:this._view.allLayerViews});this._updateClippingExtent();this.notifyChange("extent")};f.prototype.destroy=function(){this._handles.destroy();
N.releaseInstance(this._lercWorker);this._lercWorker=null;this._removeAllTiles();this._memCache.destroy();this._memCache=null;this.tilingSchemeLogic.destroy();this._set("tilingSchemeLogic",null);this.extentHelper.destroy();this.extentHelper=null;for(var a in this._basemapLayerViewHandles)this._unregisterTiledLayerView(a);this._streamDataRequester=null;this.overlayManager&&(this.overlayManager.destroy(),this._set("overlayManager",null));this._tilePool.destroy();this._tilePool=null;S.Pool.prune(0);
P.Pool.prune(0);this._renderer.destroy(this._stage);this._renderer=null;this._iteratorPool.destroy();this._stage=this._view=this._iteratorPool=null;this._upsampleInfoPool.destroy();this._upsampleInfoPool=null};Object.defineProperty(f.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"frustum",{get:function(){return this._frustum},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"upsampleInfoPool",{get:function(){return this._upsampleInfoPool},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"cullBackFaces",{set:function(a){this._renderer.cullBackFaces=a;this._set("cullBackFaces",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extent",{get:function(){return this._clippingExtent||this._rootExtent},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"baseOpacity",{set:function(a){this._renderer.opaque=1<=a;this._set("baseOpacity",a);this._updateTileTextures(!0)},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"ready",{get:function(){return!!this.rootTiles},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"renderOrder",{set:function(a){this._renderer.renderOrder=a;this._set("renderOrder",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"skirtScale",{set:function(a){this._renderer.skirtScale=a;this._set("skirtScale",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){var a=this.tilingScheme&&
this.tilingScheme.spatialReference||null;return this._getElevationData.spatialReference=a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"_background",{get:function(){return null!=this.backgroundColor?this.backgroundColor:this.backgroundImage},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"slicePlaneEnabled",{set:function(a){this._renderer.slicePlaneEnabled=a;this._set("slicePlaneEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"velvetOverground",{set:function(a){a!==this.velvetOverground&&(this._renderer.velvetOvergroundEnabled=a);this._set("velvetOverground",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"wireframe",{set:function(a){this._renderer.setWireframe(a);this._set("wireframe",a)},enumerable:!0,configurable:!0});f.prototype.setVisibility=function(a){a!==this.visible&&(this.visible=a,this._renderer.setVisibility(a),this.setUpdatesDisabled(!a),a&&this._viewChangeUpdate())};f.prototype.isVisible=
function(){return this.visible&&this.ready};f.prototype.isOpaque=function(){return this._renderer.isOpaque()};f.prototype.setUpdatesDisabled=function(a){(this.suspended=a)||this._viewChangeUpdate()};f.prototype.intersect=function(a,b,c,d){this._renderer.intersect(a,b,c,d,null)};f.prototype.getElevation=function(a){var b=this._getElevationData.rootTiles;if(!b||!b.length||0===b[0].layerInfo[R.LayerClass.ELEVATION].length)return null;var c=Aa;if(Array.isArray(a))c=a;else if("point"===a.type&&!I.pointToVector(a,
c,this._getElevationData.spatialReference))return aa.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null;for(var d=0;d<b.length;d++)if(a=b[d],G.isPosWithinTile(a,c)){for(;a&&!a.renderData;)b=0,c[0]>.5*(a.extent[0]+a.extent[2])&&(b+=1),c[1]<.5*(a.extent[1]+a.extent[3])&&(b+=2),a=a.children[b];if(b=(b=a.renderData)&&b.geometryState?b.geometryState.samplerData:null)return H.sample(c[0],c[1],b);break}return null};f.prototype.getElevationBounds=
function(){return this._elevationBounds};f.prototype.getScale=function(a){if(this.tilingScheme){if(!I.pointToVector(a,Aa,this.spatialReference))return aa.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null;var b=this.rootTiles;if(b)for(var c=0;c<b.length;c++)if(a=b[c],G.isPosWithinTile(a,Aa)){for(;null!=a.children[0];)b=0,Aa[0]>a.children[0].extent[2]&&(b+=1),Aa[1]<a.children[0].extent[1]&&(b+=2),a=a.children[b];return this._getLodBiasCorrectedScale(a.lij[0])}}return 1E100};
f.prototype.queryVisibleScaleRange=function(a,b,c,d){b=b?this.tilingScheme.levelAtScale(b):0;c=c?this.tilingScheme.levelAtScale(c):Infinity;var e=this._getLodBias();this._renderer.queryVisibleLevelRange(a,b+e,c+e,d)};f.prototype._setLoaded=function(){this.loaded||this._set("loaded",!0)};f.prototype._updateTilingSchemeAndExtent=function(){var a=this.tilingSchemeLogic.extent,b=a&&!E.equals(a,this._dataExtent);b&&(this._dataExtent?E.set(this._dataExtent,a):this._dataExtent=E.create(a));var a=this.tilingSchemeLogic.tilingScheme,
c=a!==this.tilingScheme;c&&(X.weakAssert(!!a,"tiling scheme cannot be reset to undefined"),this.tilingScheme&&this._removeAllTiles(),this._set("tilingScheme",a),this._updateClippingExtent(),a&&(this._updateTiledLayers(),this._renderer.setTileSize(a.pixelSize[0]),this.overlayManager.setSpatialReference(a.spatialReference,"spherical"===this.manifold)));(b||c)&&this._updateRootTiles()};f.prototype._acquireTile=function(a,b,c,d){var e=this._tilePool.acquire();Ca[0]=a;Ca[1]=b;Ca[2]=c;e.init(Ca,d,this);
return e};f.prototype._updateRootTiles=function(){var a=this,b=this._clippingExtent||this._dataExtent,c=this.tilingScheme;if(b&&c){this._memCache.clear();var d=Ba,e=c.rootTilesInExtent(b,d,Infinity),f=function(b){b=a._acquireTile(0,b[1],b[2],null);b.shouldSplit(a._splitLimits,a._eyePosRenderSR)===R.TileUpdate.SPLIT&&b.setPendingUpdate(R.TileUpdate.SPLIT);a._loadTile(b);return b};if(this.rootTiles){if(e.length>R.MAX_ROOT_TILES){aa.warn(R.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR);return}var b=this.rootTiles.map(function(a){return a.lij}),
h=g.difference(b,e,pa);if(0<h.removed.length||0<h.added.length){var k=this.rootTiles.filter(function(b){return-1<g.findIndex(h.removed,pa.bind(null,b.lij))?(a._purgeTile(b),!1):!0});h.added.forEach(function(a){return k.push(f(a))});this._setRootTiles(k)}}else e.length>R.MAX_ROOT_TILES&&(aa.warn(R.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR),e=c.rootTilesInExtent(b,d,R.MAX_ROOT_TILES)),this._setRootTiles(e.map(function(a){return f(a)}));E.equals(d,this._rootExtent)||(this._rootExtent=E.create(d),this._hasFixedExtent()||
this.notifyChange("extent"));this.setVisibility(!0);this._viewChangeUpdate();this.overlayManager.setOverlayPlacementDirty();this.notifyChange("ready")}};f.prototype._setRootTiles=function(a){this._set("rootTiles",a);this._getElevationData.rootTiles=a;this._renderer.setRootTiles(this.rootTiles)};f.prototype._viewChangeUpdate=function(){this._stage&&!this.suspended&&this.tilingScheme&&this.visible&&(this._updateViewDependentParameters(),this._updateSkirts(),this._updateOverlayOpacity(this._eyePosSurfaceSR[2]),
this._updateTiles())};f.prototype._updateClippingStatus=function(a){a.updateClippingStatus(this._clippingExtent)&&a.resetPendingUpdate(R.TileUpdate.GEOMETRY)&&this._updateTileGeometry(a)};f.prototype._updateTiles=function(a){void 0===a&&(a=this.rootTiles);if(a){var b=this._iteratorPool.acquire();b.reset(a);var c=this._splitLimits,d;G.hasVisibleSiblings(a)?(a=this._elevationBounds[0],d=this._elevationBounds[1]):(a=Infinity,d=-Infinity);for(;!b.done;){var e=b.next();this._updateClippingStatus(e);e.updateVisibility();
if(e.visible){e.updateScreenDepth(this._viewProjectionMatrix);e.renderData&&(a=Math.min(e.elevationBounds[0],a),d=Math.max(e.elevationBounds[1],d));var f=e.shouldSplit(c,this._eyePosRenderSR);if(f===R.TileUpdate.SPLIT){e.resetPendingUpdate(R.TileUpdate.MERGE);e.isLeaf&&(e.setPendingUpdate(R.TileUpdate.SPLIT),b.skipSubtree());this._pendingUpdates=this._pendingUpdates||e.hasPendingUpdates;continue}e.resetPendingUpdate(R.TileUpdate.SPLIT)&&e.updateAgentSuspension();f===R.TileUpdate.VSPLITMERGE&&e.updateAgents(R.LayerClass.ELEVATION)}b.skipSubtree();
if(!e.renderData){e.setPendingUpdate(R.TileUpdate.MERGE);e.resetPendingUpdate(R.TileUpdate.SPLIT);f=this._iteratorPool.acquire();for(f.resetOne(e);!f.done;){var g=f.next();this._updateClippingStatus(g);g.updateVisibility();g.visible&&g.updateScreenDepth(this._viewProjectionMatrix)}this._iteratorPool.release(f)}this._pendingUpdates=this._pendingUpdates||e.hasPendingUpdates}this._iteratorPool.release(b);isFinite(a)&&isFinite(d)&&(this._elevationBounds[0]!==a||this._elevationBounds[1]!==d)&&(this._elevationBounds[0]=
a,this._elevationBounds[1]=d,this.emit("elevation-bounds-change",null))}};f.prototype._updateViewDependentParameters=function(){var a=this._view.state.camera,b=Math.tan(.5*a.fovX),c=Math.tan(.5*a.fovY),d=this.tilingScheme.pixelSize,e=Math.pow(2,-this._getLodBias())*a.pixelRatio;this._splitLimits[0]=b;this._splitLimits[1]=d[0]/a.width*this.maxTextureScale*e;this._splitLimits[2]=c;this._splitLimits[3]=d[1]/a.height*this.maxTextureScale*e;this._splitLimits[4]=this.tilingScheme.getMaxLod();this._splitLimits[5]=
this._view.qualitySettings.tiledSurface.angledSplitBias;K.frustum.copy(a.frustum,this._frustum);u.mat4.multiply(this._viewProjectionMatrix,a.projectionMatrix,a.viewMatrix);B.vec3.copy(this._eyePosRenderSR,a.eye);I.vectorToVector(this._eyePosRenderSR,this._view.renderSpatialReference,this._eyePosSurfaceSR,this.spatialReference)};f.prototype._updateSkirts=function(){X.autoUpdateSkirtsVisibility(this,this._eyePosSurfaceSR,this._view.state.camera.near)};f.prototype._setLayerViewsUpdating=function(){for(var a=
0;a<R.LayerClass.COUNT;a++)for(var b=0,c=this._layerViews[a];b<c.length;b++)c[b].updatingChanged(this._pendingUpdates)};f.prototype._updateTileGeometry=function(a){a.updateVisibility();this._renderer.updateTileGeometry(a);this._elevationUpdate(a);this._memoryUsed=0};f.prototype._elevationUpdate=function(a){Ia.spatialReference=this.spatialReference;Ia.tile=a;Ia.extent=a.extent;this.emit("elevation-change",Ia);E.containsPoint(a.extent,this._eyePosSurfaceSR)&&this._updateSkirts()};f.prototype._frame=
function(a){var b=this;this._frameTraversal(a);a.run(function(){G.sortTiles(b._renderer.renderOrder,b._lowPrioUpdates);return!1});this._processElevation(a)&&this._processTextures(a)&&!this._view.resourceController.hasPendingDownloads&&0===this._asyncWorkItems||(this._pendingUpdates=!0);this.isVisible()&&this.overlayManager&&this.overlayManager.needsUpdate()&&(a.done?this._pendingUpdates=!0:(this.overlayManager.updateOverlays(),this._updateOverlayOpacity(this._eyePosSurfaceSR[2])));this._lowPrioUpdates.clear();
(this._pendingUpdates||20===++this._updateNextFrame)&&this._updatedThrottledPendingUpdates()};f.prototype._updatedThrottledPendingUpdates=function(){this._lvPendingUpdates!==this._pendingUpdates&&(this._setLayerViewsUpdating(),this._lvPendingUpdates=this._pendingUpdates,this._updateNextFrame=0)};f.prototype._frameTraversal=function(a){if(!this.suspended&&this._pendingUpdates){this._lowPrioUpdates.clear();this._pendingUpdates=!1;var b=this._iteratorPool.acquire();b.reset(this.rootTiles);for(var c=
0,d=!1,e=[];!b.done&&!a.done;){var f=b.next(),c=c+f.memoryUsed;f.resetPendingUpdate(R.TileUpdate.MERGE)?(this._mergeTile(f),a.madeProgress(),b.skipSubtree()):f.resetPendingUpdate(R.TileUpdate.SPLIT)?(this._splitTile(f)&&(d=this._pendingUpdates=!0,e.push(f)),a.madeProgress(),b.skipSubtree()):f.hasPendingUpdates&&this._lowPrioUpdates.push(f);this._pendingUpdates=this._pendingUpdates||f.hasPendingUpdates;b.done&&(b.reset(e),e.length=0)}this._pendingUpdates=this._pendingUpdates||!b.done;!d&&b.done&&(this._memoryUsed=
c);this._iteratorPool.release(b)}};f.prototype._processElevation=function(a){for(var b=this,c=function(c){var e=d._lowPrioUpdates.data[c];if(!a.run(function(){if(e.resetPendingUpdate(R.TileUpdate.GEOMETRY))return b._updateTileGeometry(e),!0}))return{value:!1}},d=this,e=0;e<this._lowPrioUpdates.length;++e){var f=c(e);if("object"===typeof f)return f.value}return!0};f.prototype._processTextures=function(a){for(var b=this,c=function(c){var e=d._lowPrioUpdates.data[c];if(!a.run(function(){return e.resetPendingUpdate(R.TileUpdate.TEXTURE)?
(b._renderer.updateTileTexture(e),b._memoryUsed=0,!0):!1}))return{value:!1}},d=this,e=0;e<this._lowPrioUpdates.length;++e){var f=c(e);if("object"===typeof f)return f.value}return!0};f.prototype._updateClippingExtent=function(){if(!this.spatialReference)return!1;var a=E.create(),b=null;I.extentToBoundingRect(this._view.clippingArea,a,this.spatialReference)&&(b=a);if(E.equals(b,this._clippingExtent))return!1;this._memCache.clear();this._clippingExtent=b;this._renderer.clippingExtent=b;this.notifyChange("extent");
this.updateTileOverlayParams();this.overlayManager.setOverlayPlacementDirty();return!0};f.prototype._clippingChanged=function(){this._updateClippingExtent()&&this._updateRootTiles()};f.prototype._getLodBias=function(){return this._view.qualitySettings.tiledSurface.lodBias-(1-this._view.resourceController.memoryController.memoryFactor)*R.MAX_MEMORY_LOD_BIAS};f.prototype._getLodBiasCorrectedScale=function(a){var b=this.tilingScheme.levels;a=q.clamp(a-this._getLodBias(),0,b.length-1);var c=a-Math.floor(a);
return b[Math.floor(a)].scale*(1-c)+b[Math.ceil(a)].scale*c};f.prototype._cancelTilemapRequests=function(a){var b=0;for(a=a.layerInfo;b<a.length;b++){var c=a[b];if(c)for(var d=0;d<c.length;d++)c[d].abortTilemapRequest()}};f.prototype._removeAllTiles=function(){var a=this;this.rootTiles&&(this.rootTiles.forEach(function(b){return a._purgeTile(b)}),this._setRootTiles(null),this.notifyChange("ready"));for(var b=0;b<this._topLevelTilemapOnlyTiles.length;b++)this._cancelTilemapRequests(this._topLevelTilemapOnlyTiles[b]);
this.setVisibility(!1)};f.prototype._purgeChildTiles=function(a){for(var b in a.children){var c=a.children[b];null!=c&&(a.children[b]=null,this._purgeTile(c))}};f.prototype._purgeTile=function(a){this._purgeChildTiles(a);a.unload(this._renderer);this._cancelTilemapRequests(a);a.dispose();this._tilePool.release(a)};f.prototype._splitTile=function(a){var b=a.lij[0]+1,c=2*a.lij[1],d=2*a.lij[2];a.children[0]=this._createTile(b,c,d,a);a.children[1]=this._createTile(b,c,d+1,a);a.children[2]=this._createTile(b,
c+1,d,a);a.children[3]=this._createTile(b,c+1,d+1,a);a.unload(this._renderer);ra.spatialReference=this.spatialReference;ra.extent=a.extent;ra.scale=this._getLodBiasCorrectedScale(b);this.emit("scale-change",ra);return a.children[0].hasPendingUpdate(R.TileUpdate.SPLIT)||a.children[1].hasPendingUpdate(R.TileUpdate.SPLIT)||a.children[2].hasPendingUpdate(R.TileUpdate.SPLIT)||a.children[3].hasPendingUpdate(R.TileUpdate.SPLIT)};f.prototype._createTile=function(a,b,c,d){X.weakAssert(!!d,"_createTile sanity check");
a=this._acquireTile(a,b,c,d);a.updateClippingStatus(this._clippingExtent);a.visible&&(a.updateScreenDepth(this._viewProjectionMatrix),a.shouldSplit(this._splitLimits,this._eyePosRenderSR)===R.TileUpdate.SPLIT&&a.setPendingUpdate(R.TileUpdate.SPLIT));this._loadTile(a);return a};f.prototype._mergeTile=function(a){X.weakAssert(!a.renderData,"_mergeTile sanity check");X.weakAssert(!a.hasPendingUpdate(R.TileUpdate.SPLIT),"_mergeTile sanity check");this._loadTile(a);this._purgeChildTiles(a);ra.spatialReference=
this.spatialReference;ra.extent=a.extent;ra.scale=this._getLodBiasCorrectedScale(a.lij[0]);this.emit("scale-change",ra)};f.prototype._loadTile=function(a){a.load(this._renderer);this.overlayManager&&this.overlayManager.hasOverlays()&&this.overlayManager.setOverlayParamsOfTile(a,a.renderData,this._overlayOpacity);this._elevationUpdate(a)};f.prototype._handleHasHighlights=function(a){this._renderer.setNeedsHighlight(a)};f.prototype._elevationDataUpdated=function(a,b){var c=a.layerInfo[R.LayerClass.ELEVATION][b],
d=[a],e=a.lij[0],f=this._iteratorPool.acquire();for(f.reset(d);!f.done;){var g=f.next();g.findElevationBoundsForLayer(b,e);g.computeElevationBounds()}this._iteratorPool.release(f);a.dataArrived(b,R.LayerClass.ELEVATION,c.data);this._updateTiles(d)};f.prototype._handleLayerViewChanges=function(a){var b=this,c=!1;a.added.forEach(function(a){var d=a.layer;X.isTiledLayerView(a)?(b._registerTiledLayer(a),d.loaded&&(c=!0),a.updatingChanged(b._pendingUpdates)):a.supportsDraping&&b.overlayManager&&b.overlayManager.registerLayerView(a)});
a.removed.forEach(function(a){X.isTiledLayerView(a)?(c=!0,b._unregisterTiledLayerView(a.uid)):a.supportsDraping&&b.overlayManager&&b.overlayManager.unregisterLayerView(a)});(c=c||0<a.moved.filter(X.isTiledLayerView).length)&&this._updateTiledLayers()};f.prototype._registerTiledLayer=function(a){var b=this,c=[];c.push(a.watch("suspended",function(){return b._updateTiledLayers()}));c.push(a.watch("fullOpacity",function(){return b._updateTileTextures(!1)}));a.on("data-changed",function(){var c=X.isElevationLayerView(a)?
R.LayerClass.ELEVATION:R.LayerClass.MAP,d=b._layerIndexByLayerViewId[c][a.uid];null!=d&&b._invalidateLayerData(d,c)});this._basemapLayerViewHandles[a.uid]=c};f.prototype._unregisterTiledLayerView=function(a){var b=this._basemapLayerViewHandles[a];if(b){for(var c=0;c<b.length;c++)b[c].remove();delete this._basemapLayerViewHandles[a]}};f.prototype._updateTiledLayers=function(){var a=this;if(this.tilingScheme&&!this._view.suspended){var b=this._view.allLayerViews,c=[[],[]],d=null,e=E.empty();b.forEach(function(b){var f=
b.layer;if(f&&!b.suspended&&X.isTiledLayerView(b)){var g=b.fullExtent;g?a.tilingScheme.compatibleWith(b.tileInfo)?(E.expand(e,g),X.isElevationLayerView(b)?c[R.LayerClass.ELEVATION].push(b):(f=b.displayLevelRange,Infinity!==f.maxLevel&&(null===d||f.maxLevel>d)&&(d=f.maxLevel),c[R.LayerClass.MAP].push(b))):aa.warn("Terrain: tiling scheme of layer "+f.id+" is incompatible with other tiled layers, will not be drawn"):aa.warn("Terrain: Map or elevation layer does not have fullExtent: "+f.id)}},this);for(var b=
function(a){var b=f._layerViews[a],d=c[a];d.reverse();var e=d.length,g=b.length!==e,h=Array(e),k=Array(b.length);f._layerIndexByLayerViewId[a]={};for(var l=0;l<e;l++){f._layerIndexByLayerViewId[a][d[l].uid]=l;var p=b.indexOf(d[l]);h[l]=p;l!==p&&(g=!0);-1<p&&(k[p]=l)}if(g){f._topLevelTilemapOnlyTiles.forEach(function(b){return b.modifyLayers(k,h,a)});b=f._postorderIterator;for(b.reset(f.rootTiles);!b.done;)b.next().modifyLayers(k,h,a);f._layerViews[a]=d;a===R.LayerClass.ELEVATION&&f._memCache.clear();
for(b.reset(f.rootTiles);!b.done;)d=b.next(),d.restartAgents(a),a===R.LayerClass.ELEVATION&&d.computeElevationBounds();f._updateTiles()}},f=this,g=0;g<R.LayerClass.COUNT;g++)b(g);this.tilingScheme.ensureMaxLod(d)&&this._viewChangeUpdate()}};f.prototype._hasFixedExtent=function(){return!!this._clippingExtent};f.prototype.layerViewByIndex=function(a,b){return this._layerViews[b][a]};f.prototype.numLayers=function(a){return this._layerViews[a].length};f.prototype._updateTileTextures=function(a){var b=
this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var c=b.next();c.updateAgents(R.LayerClass.MAP);a&&this.renderer.updateTileTexture(c)}this._iteratorPool.release(b)};f.prototype._invalidateLayerData=function(a,b){var c=this._iteratorPool.acquire();for(c.reset(this.rootTiles);!c.done;)c.next().removeLayerAgent(a,b);for(c.reset(this.rootTiles);!c.done;)c.next().invalidateLayerData(a,b);this._iteratorPool.release(c);b===R.LayerClass.ELEVATION&&this._memCache.clear()};f.prototype.setPendingUpdates=
function(){this._pendingUpdates=!0;this._updatedThrottledPendingUpdates()};f.prototype.requestTileData=function(a,b,c,d){var e=this,f=this.layerViewByIndex(b,c),g=f.layer;if(g.tilemapCache&&!X.isVectorTileLayerView(f)){var h=this.getTilemapTile(a),k=h.layerInfo[c][b];if(k.tilemap){if(!h.hasDataAvailable(a,b,c))return this._dispatchDataEvent(a,"dataMissing",c,f,{notInTilemap:!0}),x.reject()}else return k.tilemapRequestPromise||(k.tilemapRequestAbort=x.createAbortController(),k.tilemapRequestPromise=
this.requestTilemap(h,b,c,f,g,{signal:k.tilemapRequestAbort.signal})),++this._asyncWorkItems,k.tilemapRequestPromise.catch(function(){}).then(function(){--e._asyncWorkItems;k.tilemapRequestPromise=null;k.tilemapRequestAbort=null;x.throwIfAborted(d);var b=e._layerIndexByLayerViewId[c][f.uid];if(null!=b){if(h.hasDataAvailable(a,b,c))return e._requestTileData(a,b,c,f,d);e._dispatchDataEvent(a,"dataMissing",c,f,{notInTilemap:!0});return x.reject()}})}return this._requestTileData(a,b,c,f,d)};f.prototype._requestTileData=
function(a,b,c,d,e){return c===R.LayerClass.ELEVATION?this._requestElevationTileData(a,b,c,d,e):this._requestMapTileData(a,b,c,d,e)};f.prototype._requestElevationTileData=function(a,b,c,d,e){var f=this;if(X.isElevationLayerView(d)){var g=function(e){f._asyncWorkItems--;var g=f._layerIndexByLayerViewId[c][d.uid];null==g?aa.warn("TerrainSurface: received data from unknown layer %d %s",c,a.lij.toString()):(g=a.layerInfo[c][g],f._memoryUsed=0,g.data=H.create(a.lij,a.extent,e),f._elevationDataUpdated(a,
b),f._pendingUpdates=!0)},h=function(b){f._asyncWorkItems--;x.isAbortError(b)||f._dispatchDataEvent(a,"dataMissing",c,d,b)};this._asyncWorkItems++;if(X.useFetchTileForLayer(d.layer))return d.layer.fetchTile(a.lij[0],a.lij[1],a.lij[2],{noDataValue:R.ELEVATION_NODATA_VALUE,signal:e.signal}).then(function(a){return g(a)},h);var k=d.getTileUrl(a.lij[0],a.lij[1],a.lij[2]);return this._streamDataRequester(k,"binary",e).then(function(a){return f._lercWorker.decode(a,{noDataValue:R.ELEVATION_NODATA_VALUE},
e.signal)}).then(function(a){g({values:a.pixelData,width:a.width,height:a.height,noDataValue:a.noDataValue,minValue:a.minValue,maxValue:a.maxValue})}).catch(function(a){return h(a)})}X.weakAssert(!1,"_requestElevationTileData can only be called for elevation layer views")};f.prototype._requestMapTileData=function(a,b,c,d,f){var g=this;++this._asyncWorkItems;var h=function(b){--g._asyncWorkItems;g._dispatchDataEvent(a,"dataArrived",c,d,b)};b=function(b){--g._asyncWorkItems;x.isAbortError(b)||g._dispatchDataEvent(a,
"dataMissing",c,d,b)};if(X.isVectorTileLayerView(d)){var k=d.tileHandler,l=d.schemaHelper.getLevelRowColumn(a.lij);return e.safeCast(k.getVectorTile3D(l[0],l[1],l[2],0)).then(function(a){y.isAborted(f)?--g._asyncWorkItems:h(a)},b)}if(X.useFetchTileForLayer(d.layer)&&X.isTileLayerView(d))return d.layer.fetchTile(a.lij[0],a.lij[1],a.lij[2],f).then(h,b);k=d.getTileUrl(a.lij[0],a.lij[1],a.lij[2]);null!=d.refreshInterval&&d.refreshTimestamp&&(k+=(-1<k.indexOf("?")?"\x26":"?")+"_ts\x3d"+d.refreshTimestamp);
return this._streamDataRequester(k,"image",f).then(h,b)};f.prototype.requestTilemap=function(a,b,c,d,e,f){var g=this;return e.tilemapCache.fetchTilemap(a.lij[0]+R.TILEMAP_SIZE_EXP,a.lij[1]<<R.TILEMAP_SIZE_EXP,a.lij[2]<<R.TILEMAP_SIZE_EXP,n({},f,{timeout:6E3})).then(function(e){b=g._layerIndexByLayerViewId[c][d.uid];null!=b&&(a.layerInfo[c][b].tilemap=e)}).catch(function(a){})};f.prototype.getTilemapTile=function(a){var b=a.lij[0];return b>R.TILEMAP_SIZE_EXP?G.getTileNLevelsUp(a,R.TILEMAP_SIZE_EXP):
this._topLevelTilemapOnlyTiles[b]};f.prototype._dispatchDataEvent=function(a,b,c,d,e){d=this._layerIndexByLayerViewId[c][d.uid];if(null!=d)a[b](d,c,e);else aa.warn("TerrainSurface: received data from unknown layer")};f.prototype.updateTileOverlayParams=function(){if(this.rootTiles){var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;){var b=a.next();b.renderData&&this.overlayManager&&this.overlayManager.setOverlayParamsOfTile(b,b.renderData,this._overlayOpacity)}this._iteratorPool.release(a);
this._renderer.setNeedsRender()}};f.prototype._updateOverlayOpacity=function(a){if(this.overlayManager&&(a=this.overlayManager.updateOpacity(a),!isNaN(a)&&a!==this._overlayOpacity)){var b=this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var c=b.next();c.renderData&&(c.renderData.overlayOpacity=a)}this._iteratorPool.release(b);this._overlayOpacity=a;this._renderer.setNeedsRender()}};f.prototype.getStats=function(){var a={numNodes:0,numLeaves:0,numVisible:0,numVisiblePerLevel:[]},
b=this._iteratorPool.acquire();for(b.reset(this.rootTiles);!b.done;){var c=b.next();a.numNodes++;c.renderData&&(a.numLeaves++,c.visible&&(a.numVisible++,c=c.lij[0],a.numVisiblePerLevel[c]=null==a.numVisiblePerLevel[c]?1:a.numVisiblePerLevel[c]+1))}this._iteratorPool.release(b);return a};f.prototype.getUsedMemory=function(){if(!this.tilingScheme)return 0;if(0<this._memoryUsed)return this._memoryUsed;var a=this._iteratorPool.acquire();for(a.reset(this.rootTiles);!a.done;){var b=a.next();this._memoryUsed+=
b.memoryUsed}this._iteratorPool.release(a);return this._memoryUsed};f.prototype.getMemoryUsage=function(){if(!this.tilingScheme)return{};var a=0,b=0,c=0,d=0,e=0,f=0,g=this._iteratorPool.acquire();g.reset(this.rootTiles);for(var h=this.tilingScheme.pixelSize,h=h[0]*h[1]*4;!g.done;){for(var k=g.next(),l=ta(k),p=0,m=k.layerInfo[R.LayerClass.MAP];p<m.length;p++){var u=m[p],u=u.data,q=0,n=0;u instanceof ja?q+=na.getGpuMemoryUsage(u):u instanceof HTMLImageElement?n+=h:u instanceof L&&(f+=u.getGpuMemoryUsage(),
c+=u.getCpuMemoryUsage());k.renderData||l?(a+=n,d+=q):(b+=n,e+=q)}l=0;for(p=k.layerInfo[R.LayerClass.ELEVATION];l<p.length;l++)u=p[l],u=u.data,a+=u?h:0;k.renderData&&(u=k.renderData.textureDescriptor,d+=u?na.getGpuMemoryUsage(u):0,k=k.renderData.estimatedGeometryMemoryUsage,f+=k,c+=k)}this._iteratorPool.release(g);return{cpuVisibleImageData:a,cpuInvisibleImageData:b,cpuGeometryData:c,gpuVisibleImageData:d,gpuInvisibleImageData:e,gpuGeometryData:f}};f.prototype.getTile=function(a){var b=a.split("/").map(function(a){return+a});
if(0===b[0])return this.rootTiles.forEach(function(a){if(a.lij[1]===b[1]&&a.lij[2]===b[2])return a}),null;var c=Math.pow(2,b[0]),d=Math.floor(b[1]/c),e=Math.floor(b[2]/c),f;this.rootTiles.some(function(a){return a.lij[1]===d&&a.lij[2]===e?(f=a,!0):!1});if(f){for(c=1<<b[0]-1;f.lij[0]<b[0];){var g=b[1]&c?2:0;0<(b[2]&c)&&g++;if(!f.children[g])return console.log("Tile "+a+" doesn't exist, smallest ancestor is "+G.tile2str(f)),null;f=f.children[g];c>>=1}X.weakAssert(f.lij[0]===b[0]&&f.lij[1]===b[1]&&f.lij[2]===
b[2],"not the right tile?");return f}return null};f.prototype.setBorders=function(a){this._renderer.renderPatchBorders=a};f.prototype.setDisableRendering=function(a){this._renderer.renderingDisabled=a};Object.defineProperty(f.prototype,"test",{get:function(){var a=this;return{renderer:this._renderer,lercWorker:this._lercWorker,mergeTile:function(b){return a._mergeTile(b)},updateTiles:function(b){return a._updateTiles(b)}}},enumerable:!0,configurable:!0});k([m.property({value:!1})],f.prototype,"cullBackFaces",
null);k([m.property({readOnly:!0})],f.prototype,"extent",null);k([m.property({readOnly:!0})],f.prototype,"loaded",void 0);k([m.property({value:1})],f.prototype,"baseOpacity",null);k([m.property({readOnly:!0})],f.prototype,"overlayManager",void 0);k([m.property({readOnly:!0})],f.prototype,"manifold",void 0);k([m.property()],f.prototype,"maxTextureScale",void 0);k([m.property({readOnly:!0})],f.prototype,"ready",null);k([m.property({value:1})],f.prototype,"renderOrder",null);k([m.property({readOnly:!0})],
f.prototype,"rootTiles",void 0);k([m.property({value:!0})],f.prototype,"skirtScale",null);k([m.property({readOnly:!0,dependsOn:["tilingScheme.spatialReference"]})],f.prototype,"spatialReference",null);k([m.property({})],f.prototype,"backgroundImage",void 0);k([m.property({type:b})],f.prototype,"backgroundColor",void 0);k([m.property({dependsOn:["backgroundColor","backgroundImage"]})],f.prototype,"_background",null);k([m.property({value:!1})],f.prototype,"slicePlaneEnabled",null);k([m.property({readOnly:!0})],
f.prototype,"tilingScheme",void 0);k([m.property({readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeLocked"})],f.prototype,"tilingSchemeLocked",void 0);k([m.property({readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeDone"})],f.prototype,"tilingSchemeDone",void 0);k([m.property({readOnly:!0})],f.prototype,"tilingSchemeLogic",void 0);k([m.property({value:!0})],f.prototype,"velvetOverground",null);k([m.property({value:!1})],f.prototype,"wireframe",null);return f=k([m.subclass("esri.views.3d.terrain.TerrainSurface")],
f)}(m.declared(h,f));var ga=1.2,ia=80/180*Math.PI,sa=110/180*Math.PI,Aa=F.vec4f64.create(),Ba=E.create(),Ca=[0,0,0],Ia={spatialReference:null,tile:null,extent:null},ra={spatialReference:null,extent:null,scale:0};return r})},"esri/layers/support/LercWorker":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/extendsHelper ../../core/promiseUtils ../../core/requireUtils ../../core/workers module".split(" "),function(r,d,n,l,k,b,h,g){function e(){return k.create(function(a){return r(["./rasterFormats/LercCodec"],
a)})}Object.defineProperty(d,"__esModule",{value:!0});var c=function(){function a(){}a.prototype._decode=function(a){return e().then(function(b){b=b.decode;b=b(a.buffer,a.options);return{result:b,transferList:[b.pixelData.buffer]}})};return a}(),f=function(a){function c(c){var d=a.call(this)||this;d.scheduler=c;d._threadInitialized=k.create(function(a,e){h.open(b.getAbsMid("./LercWorker",r,g),{strategy:"dedicated",scheduler:c}).then(function(b){void 0===d._thread?(d._thread=b,a()):(b.close(),e())})});
return d}l(c,a);c.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};Object.defineProperty(c.prototype,"test",{get:function(){return{threadInitialized:this._threadInitialized}},enumerable:!0,configurable:!0});c.prototype.decode=function(a,b,c){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_decode",{buffer:a,options:b},{transferList:[a],signal:c}):e().then(function(c){c=c.decode;return c(a,b)}):k.resolve(null)};return c}(c);d.LercWorkerMaster=f;var a=
new Map;d.acquireInstance=function(b){var c=a.get(b);c||(c={instance:new f(b),ref:0},a.set(b,c));++c.ref;return c.instance};d.releaseInstance=function(b){if(null!=b){b=b.scheduler;var c=a.get(b);c&&0>=--c.ref&&(c.instance.destroy(),a.delete(b))}};d.default=function(){return new c}})},"esri/views/2d/engine/vectorTiles/VectorTileDisplayObject3D":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix-2/mat4f32 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/support/spatialReferenceUtils ../../../webgl ./RenderBucket ../../tiling/TileKey".split(" "),
function(r,d,n,l,k,b,h,g,e){var c="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(){function d(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];this._renderBuckets=[];this._symbolUpdateData=this._vectorTileData=
null;this.coords=[0,0];this.bounds=[0,0,0,0];this.tileTransform={transform:l.mat4f32.create(),displayCoord:k.vec2f32.create()};this.stencilData={mask:0,reference:0};this.triangleCount=0;0<b.length&&(a=this.acquire).call.apply(a,[this].concat(b))}d.prototype.reset=function(){e.pool.release(this.key);this.key=null;this.coords[0]=0;this.coords[1]=0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=
null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this.context=this._symbolUpdateData=null;this.triangleCount=0;this.refKeys=null};d.prototype.acquire=function(a,c,d,e){this.key=a;var f=c.lodAt(a.level),f=null!==f?f.resolution:0,g=c.size[0]*f,h=c.origin,k=a.col*g,l=a.row*g,p=c.spatialReference,q=0;p&&(p._isWrappable?p._isWrappable():p.isWrappable)&&(p=b.getInfo(p),q=p.valid[1]-p.valid[0]);
k=h.x+k+a.world*q;h=h.y-l;this.coords[0]=k;this.coords[1]=h;this.bounds[0]=k;this.bounds[1]=h;this.bounds[2]=k+g;this.bounds[3]=h-g;this.widthInPixels=c.size[1];this.coordRange=4096;this.resolution=f;this.rotation=e;this.styleLayers=d;this.id=a.id};d.prototype.setData=function(a,b,c){this._vectorTileData=a;this.client=b;this.refKeys=c};d.prototype.dispose=function(){for(var a="fillVertexArrayObject fillDDVertexArrayObject outlineVertexArrayObject lineVertexArrayObject lineDDVertexArrayObject iconVertexArrayObject iconDDVertexArrayObject textVertexArrayObject textDDVertexArrayObject circleVertexArrayObject fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer texture".split(" "),
b=0;b<a.length;++b){var c=a[b];this[c]&&(this[c].dispose(),this[c]=null)}this._renderBuckets.length=0};d.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(a,b){return a+b.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};d.prototype.getGpuMemoryUsage=function(){var a=this,b=c.reduce(function(b,c){return a[c]?b+a[c].size:b},0);this.texture&&
(b+=this.texture.descriptor.width*this.texture.descriptor.height*4);return b};d.prototype.attachWithContext=function(a){this.context=a};d.prototype._commitChanges=function(){this._vectorTileData&&(this.dispose(),this._createRenderBuckets(),this._createBufferObjects(),this._vectorTileData=null)};d.prototype._createRenderBuckets=function(){for(var a=new Uint32Array(this._vectorTileData.bucketDataInfo),b=a.length,c=0;c<b;){var d=a[c];switch(a[c+1]){case 0:var e=new g.BackgroundRenderBucket;e.layerID=
d;this._renderBuckets.push(e);c+=2;break;case 1:e=new g.FillRenderBucket;e.layerID=d;e.triangleElementStart=a[c+2];e.triangleElementCount=a[c+3];e.outlineElementStart=a[c+4];e.outlineElementCount=a[c+5];this._renderBuckets.push(e);c+=6;break;case 2:e=new g.LineRenderBucket;e.layerID=d;e.triangleElementStart=a[c+2];e.triangleElementCount=a[c+3];this._renderBuckets.push(e);c+=4;break;case 3:e=new g.SymbolRenderBucket;e.layerID=d;e.isSDF=0!==a[c+2];var f=c+3,d=a[f];f++;if(0<d)for(var h=void 0,k=void 0,
l=void 0,u=0;u<d;u++)h=a[f],k=a[f+1],l=a[f+2],e.markerPerPageElementsMap.set(h,[k,l]),f+=3;var n=a[f];f++;if(0<n)for(l=k=h=void 0,u=0;u<n;u++)h=a[f],k=a[f+1],l=a[f+2],e.glyphPerPageElementsMap.set(h,[k,l]),f+=3;this._renderBuckets.push(e);c+=5+3*d+3*n;break;case 4:e=new g.CircleRenderBucket;e.layerID=d;e.triangleElementStart=a[c+2];e.triangleElementCount=a[c+3];this._renderBuckets.push(e);c+=4;break;default:console.error("Bad bucket type!"),c+=2}}};d._createBufferToObject=function(){var a=[];a[1]=
{create:h.BufferObject.createVertex,var:"fillVertexBuffer"};a[2]={create:h.BufferObject.createVertex,var:"fillDDVertexBuffer"};a[3]={create:h.BufferObject.createIndex,var:"fillIndexBuffer"};a[4]={create:h.BufferObject.createVertex,var:"outlineVertexBuffer"};a[5]={create:h.BufferObject.createVertex,var:"outlineDDVertexBuffer"};a[6]={create:h.BufferObject.createIndex,var:"outlineIndexBuffer"};a[7]={create:h.BufferObject.createVertex,var:"lineVertexBuffer"};a[8]={create:h.BufferObject.createVertex,var:"lineDDVertexBuffer"};
a[9]={create:h.BufferObject.createIndex,var:"lineIndexBuffer"};a[10]={create:h.BufferObject.createVertex,var:"iconVertexBuffer"};a[11]={create:h.BufferObject.createVertex,var:"iconDDVertexBuffer"};a[12]={create:h.BufferObject.createIndex,var:"iconIndexBuffer"};a[13]={create:h.BufferObject.createVertex,var:"textVertexBuffer"};a[14]={create:h.BufferObject.createVertex,var:"textDDVertexBuffer"};a[15]={create:h.BufferObject.createIndex,var:"textIndexBuffer"};a[16]={create:h.BufferObject.createVertex,
var:"circleVertexBuffer"};a[17]={create:h.BufferObject.createIndex,var:"circleIndexBuffer"};return a};d.prototype._createBufferObjects=function(){for(var a=this.context,b=new Uint32Array(this._vectorTileData.bufferDataInfo),c=b.length,e=0,f=0;f<c;f+=2,e++){var g=b[f];if(!(0>=b[f+1]||0===this._vectorTileData.bufferData[e].byteLength)){var h=d.bufferToObject[g];h?this[h.var]?this[h.var].setData(this._vectorTileData.bufferData[e]):this[h.var]=h.create(a,35044,this._vectorTileData.bufferData[e]):console.error("Bad buffer type "+
g)}}};d.prototype.render=function(a){var b=this.context,c=a.renderer;if(b&&c){this._commitChanges();var d=a.drawphase;this._symbolUpdateData&&(this._updateSymbolData(a,this._symbolUpdateData),this._symbolUpdateData=null);b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var e=this.styleLayers,f,g=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==g){var h=this._renderBuckets.length;if(0===d)for(var k=h-1;0<=k;k--){var l=this._renderBuckets[k];f=e.layers[l.layerID];if(!l||!f)break;
1!==l.type&&0!==l.type||!l.hasData()||(this.triangleCount+=c.renderBucket(b,l,a.displayLevel,a.requiredLevel,d,this,f,g))}else for(k=0;k<h;k++){l=this._renderBuckets[k];f=e.layers[l.layerID];if(!l||!f)break;l.hasData()&&(this.triangleCount+=c.renderBucket(b,l,a.displayLevel,a.requiredLevel,d,this,f,g))}}}};d.prototype._updateSymbolData=function(a,b){if(!b||!b.bucketDataInfo)return!0;a=new Uint32Array(b.bucketDataInfo);var c=a.length;if(0===c)return!0;if(this.context){for(var d=this.context,e=new Uint32Array(b.bufferDataInfo),
f=e.length,k=0,l=0;l<f;l+=2,k++)switch(e[l]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=h.BufferObject.createVertex(d,35044,b.bufferData[k]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=h.BufferObject.createVertex(d,35044,b.bufferData[k]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=
h.BufferObject.createIndex(d,35044,b.bufferData[k]);break;case 13:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=h.BufferObject.createVertex(d,35044,b.bufferData[k]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=h.BufferObject.createVertex(d,35044,b.bufferData[k]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),
this.textIndexBuffer=h.BufferObject.createIndex(d,35044,b.bufferData[k])}b=[];for(d=0;d<this._renderBuckets.length;d++)this._renderBuckets[d]instanceof g.SymbolRenderBucket||b.push(this._renderBuckets[d]);this._renderBuckets=b;for(d=0;d<c;){f=a[d];e=new g.SymbolRenderBucket;e.layerID=f;e.isSDF=0!==a[d+2];this.styleLayers.layers.length>e.layerID&&this.styleLayers.layers[e.layerID].type===e.type&&b.push(e);var m=d+3,f=a[m];m++;if(0<f)for(var p=l=k=void 0,n=0;n<f;n++)k=a[m],l=a[m+1],p=a[m+2],e.markerPerPageElementsMap.set(k,
[l,p]),m+=3;var B=a[m];m++;if(0<B)for(p=l=k=void 0,n=0;n<B;n++)k=a[m],l=a[m+1],p=a[m+2],e.glyphPerPageElementsMap.set(k,[l,p]),m+=3;d+=5+3*f+3*B}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),
this.textDDVertexArrayObject=null);return!0}};d.bufferToObject=d._createBufferToObject();return d}()})},"esri/views/webgl":function(){define("require exports ./webgl/BufferObject ./webgl/enums ./webgl/FramebufferObject ./webgl/Program ./webgl/RenderingContext ./webgl/ShaderCompiler ./webgl/Texture ./webgl/VertexArrayObject ./webgl/ProgramCache ./webgl/programUtils ./webgl/context-util".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});d.BufferObject=n;
d.enums=l;d.FramebufferObject=k;d.Program=b;d.RenderingContext=h;d.ShaderCompiler=g;d.Texture=e;d.VertexArrayObject=c;d.ProgramCache=f.ProgramCache;d.createProgram=a.createProgram;d.glslifyDefineMap=a.glslifyDefineMap;d.createContextOrErrorHTML=p.createContextOrErrorHTML})},"esri/views/webgl/ProgramCache":function(){define(["require","exports","./programUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this._programCacheByTemplate=new Map;this._rctx=
d}d.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(d){d.programs.forEach(function(b){b.dispose()})});this._programCacheByTemplate=null};d.prototype.getProgram=function(d,b){var h=this;this._programCacheByTemplate.has(d)||this.addProgramTemplate(d,function(b){return n.createProgram(h._rctx,d,b)});return this.getProgramTemplateInstance(d,b)};d.prototype.addProgramTemplate=function(d,b){this._programCacheByTemplate.set(d,{constructor:b,programs:new Map})};d.prototype.getProgramTemplateInstance=
function(d,b){if(d=this._programCacheByTemplate.get(d)){var h=b?JSON.stringify(b):"default";d.programs.has(h)||(b=d.constructor(b),d.programs.set(h,b));return d.programs.get(h)}return null};return d}();d.ProgramCache=r})},"esri/views/2d/engine/vectorTiles/RenderBucket":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){return function(d){this.type=d}}();d.RenderBucket=r;var l=function(d){function b(){var b=
d.call(this,2)||this;b.triangleElementStart=0;b.triangleElementCount=0;return b}n(b,d);b.prototype.hasData=function(){return 0<this.triangleElementCount};b.prototype.triangleCount=function(){return this.triangleElementCount/3};return b}(r);d.LineRenderBucket=l;l=function(d){function b(){var b=d.call(this,1)||this;b.triangleElementStart=0;b.triangleElementCount=0;b.outlineElementStart=0;b.outlineElementCount=0;return b}n(b,d);b.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};
b.prototype.triangleCount=function(){return(this.triangleElementCount+this.outlineElementCount)/3};return b}(r);d.FillRenderBucket=l;l=function(d){function b(){var b=d.call(this,3)||this;b.markerPerPageElementsMap=new Map;b.glyphPerPageElementsMap=new Map;b.isSDF=!1;return b}n(b,d);b.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};b.prototype.triangleCount=function(){var b=0;this.markerPerPageElementsMap.forEach(function(d){b+=d[1]});
this.glyphPerPageElementsMap.forEach(function(d){b+=d[1]});return b/3};return b}(r);d.SymbolRenderBucket=l;l=function(d){function b(){var b=d.call(this,4)||this;b.triangleElementStart=0;b.triangleElementCount=0;return b}n(b,d);b.prototype.hasData=function(){return 0<this.triangleElementCount};b.prototype.triangleCount=function(){return this.triangleElementCount/3};return b}(r);d.CircleRenderBucket=l;r=function(d){function b(){return d.call(this,0)||this}n(b,d);b.prototype.hasData=function(){return!0};
b.prototype.triangleCount=function(){return 2};return b}(r);d.BackgroundRenderBucket=r})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(r,d,n){return function(){function d(d,b,h,g){this.set(d,b,h,g)}d.from=function(k,b,h,g){return d.pool.acquire(k,b,h,g)};d.getId=function(d,b,h,g){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+b+"/"+h+"/"+g};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,b,h,g){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||
0):"string"===typeof d?(d=d.split("/"),b=d[1],h=d[2],g=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(b),this.col=parseFloat(h),this.world=parseFloat(g)):(this.level=+d,this.row=+b,this.col=+h,this.world=+g||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var k=this.level+1,b=this.row<<1,h=this.col<<1,g=this.world;return[d.pool.acquire(k,b,h,g),d.pool.acquire(k,b,h+1,g),d.pool.acquire(k,b+1,h,g),
d.pool.acquire(k,b+1,h+1,g)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.sort=function(k){return k.map(function(b){return d.from(b)}).sort(function(b,d){return b.compareRowMajor(d)}).map(function(b){return b.id})};d.pool=new n(d,!0,null,25,50);return d}()})},"esri/views/3d/terrain/ElevationData":function(){define(["require","exports","../../../core/mathUtils","../support/mathUtils","./TerrainConst"],function(r,d,n,l,k){return function(){function b(b,
d,e,c){this.samplerData=null;this.level=b;this.i=d;this.j=e;this.extent=c}b.prototype.computeMinMaxValue=function(b,d,e,c){var f=Infinity,a=-Infinity;b-=this.level;var g=Math.pow(2,b);if(Math.floor(d/g)===this.i&&Math.floor(e/g)===this.j&&0<b){var h=this.samplerData.width,n=this.samplerData.pixelData,t=.5*k.ELEVATION_NODATA_VALUE;b=(h-1)/g;e=(e-this.j*g)*b;var y=(d-this.i*g)*b;if(1>b){var x=Math.floor(e),w=Math.floor(y),m=x+w*h;d=n[m];var g=n[m+1],u=n[m+h],m=n[m+h+1];if(d+g+u+m<t)return f=e-x,t=y-
w,a=l.bilerp(d,g,u,m,f,t),h=l.bilerp(d,g,u,m,f+b,t),n=l.bilerp(d,g,u,m,f,t+b),b=l.bilerp(d,g,u,m,f+b,t+b),c[0]=Math.min(a,h,n,b),c[1]=Math.max(a,h,n,b),c;e=x;y=w;b=1}else e=Math.floor(e),y=Math.floor(y),b=Math.ceil(b);for(d=e;d<=e+b;d++)for(g=y;g<=y+b;g++)m=d+g*h,u=n[m],u<t?(f=Math.min(f,u),a=Math.max(a,u)):(f=0<f?0:f,a=0>a?0:a)}c[0]=f;c[1]=a;return c};b.create=function(d,g,e){d=new b(d[0],d[1],d[2],g);g=e.noDataValue;var c=e.minValue,f=e.maxValue;if(null==c||null==f){for(var a=e.values,c=Infinity,
f=-Infinity,h=!0,k=0;k<a.length;k++){var l=a[k];l!==g&&(c=l<c?l:c,f=l>f?l:f,h=!1)}h&&(f=c=0)}f=-3E38<f?f:0;d.samplerData={pixelData:e.values,width:e.width,height:e.height,minValue:c,maxValue:f,noDataValue:g,safeWidth:.99999999*(e.width-1),dx:(e.width-1)/(d.extent[2]-d.extent[0]),dy:(e.width-1)/(d.extent[3]-d.extent[1]),x0:d.extent[0],y1:d.extent[3]};d.bounds=[c,f];return d};b.sample=function(b,d,e){for(var c=0;c<e.length;c++){var f=e[c];if(f){var a=f.safeWidth,g=f.width,h=f.pixelData,l=n.clamp(f.dy*
(f.y1-d),0,a),f=n.clamp(f.dx*(b-f.x0),0,a),a=Math.floor(l),t=Math.floor(f),y=a*g+t,x=y+g,w=h[y],g=h[x],y=h[y+1],h=h[x+1];if(w+g+y+h<.5*k.ELEVATION_NODATA_VALUE)return l-=a,f-=t,b=w+(y-w)*f,b+(g+(h-g)*f-b)*l}}return null};return b}()})},"esri/views/3d/terrain/ElevationTileAgent":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/ObjectPool ./TerrainConst ./TileAgent".split(" "),function(r,d,n,l,k,b){return function(b){function d(){var d=null!==b&&b.apply(this,arguments)||
this;d._scaleRangeEnabled=!1;return d}n(d,b);d.prototype._desiredMinLevelDelta=function(){return k.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-this.tile.lij[0])};d.Pool=new l(d);return d}(b)})},"esri/views/3d/terrain/TileAgent":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TerrainConst","./tileUtils"],function(r,d,n,l,k){var b=Error("Abstract method called on TileAgent");r=function(){function b(){}b.prototype.init=function(b,d,c,f){this.tile=b;this._layerIdx=
d;this._layerClass=c;this._suspended=f;this._tileLayerInfo=b.getLayerInfo(d,c);this._tileRequested=null;b=this._findAncestorWithData();this._setUpsampleTile(b)};b.prototype.startLoading=function(){return this._requestNext()};b.prototype.dispose=function(){this._tileRequested&&(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null);this._tileLayerInfo=this.tile=null};b.prototype.setSuspension=function(b){b!==this._suspended&&((this._suspended=b)?this._tileRequested&&
(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null):this._tileLayerInfo.data||this.update())};b.prototype.update=function(){var b=this._findAncestorWithData();this._setUpsampleTile(b);return this._requestNext()};b.prototype.dataArrived=function(b){this._setUpsampleTile(b);this._tileRequested=null;b===this.tile?this.tile.updateRenderData(this._layerClass):this._requestNext()};b.prototype.dataMissing=function(b){this._tileRequested=null;this._tileLayerInfo.disposeData();
this._requestNext()};b.prototype._agentDone=function(){this.tile.agentDone(this._layerIdx,this._layerClass);this.dispose()};b.prototype._requestNext=function(){if(this._suspended)return!0;var b=this._findNextDownload();if(this._tileRequested){if(b===this._tileRequested)return!0;this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this);this._tileRequested=null}b?b.requestLayerData(this._layerIdx,this._layerClass,this)&&(this._tileRequested=b):this._agentDone();return!!this._tileRequested};
b.prototype._findNextDownload=function(){for(var b=this._layerIdx,d=this._layerClass,c=this.tile.surface.layerViewByIndex(b,d),f=c.layer,a=c.dataLevelRange,c=a.minLevel,a=a.maxLevel,h=this._desiredMinLevelDelta(),q=l.START_LOADING_LEVEL_DELTA+h,n=this._scaleRangeEnabled?k.fallsWithinLayer:function(){return!0},t,y=this.tile,x=0,w=this._tileLayerInfo.upsampleFromTile,w=w?w.tile.lij[0]:-1,m=this.tile.surface,u=m.getTilemapTile(y);y&&n(y,f,!1)&&y.lij[0]>=c;){var z=y.lij[0],B=y.layerInfo[d][b];if(B.data&&
x>=h){z>w&&this._setUpsampleTile(y);B.dataInvalidated&&(t=y);break}if((!u||u.hasDataAvailable(y,b,d))&&z<=a&&!B.data&&!B.dataMissing){if(!t||0===z%l.LOADING_LEVEL_MODULO||this.tile.lij[0]-t.lij[0]<h)t=y;if(x>=q)break}(y=y.parent)&&u&&(u=u.parent||m.getTilemapTile(y));x++}t&&this.tile.lij[0]-t.lij[0]<h&&this._tileLayerInfo.upsampleFromTile&&(t=null);return t};b.prototype._findAncestorWithData=function(){for(var b=this.tile.vlevel,d=this._desiredMinLevelDelta(),c,f=this.tile;f;f=f.parent)if(f.hasLayerData(this._layerIdx,
this._layerClass)){if(b-f.lij[0]>=d)return f;c=f}return c};b.prototype._setUpsampleTile=function(b){this._tileLayerInfo.setUpsampleInfo(this.tile,b);this.tile.updateRenderData(this._layerClass)};Object.defineProperty(b.prototype,"test",{get:function(){var b=this;return{findNextDownload:function(){return b._findNextDownload()},tileLayerInfo:this._tileLayerInfo}},enumerable:!0,configurable:!0});return b}();d=function(d){function g(){return null!==d&&d.apply(this,arguments)||this}n(g,d);g.prototype._desiredMinLevelDelta=
function(){throw b;};return g}(r);(r||(r={})).DONE=new d;return r})},"esri/views/3d/terrain/tileUtils":function(){define(["require","exports","../../../core/PooledArray"],function(r,d,n){function l(b){return b[0]+"/"+b[1]+"/"+b[2]}function k(b,d){d(b);for(var c=0;4>c;c++){var e=b.children[c];e&&k(e,d)}}function b(d,e){for(var c=0;4>c;c++){var f=d.children[c];f&&b(f,e)}e(d)}function h(b,d,c){b=b.screenDepth;d=d.screenDepth;return b<d?-c:b>d?c:0}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(){this.q=
new n;this._last=null;this.done=!0}b.prototype.resetOne=function(b){this.q.clear();this.q.push(b);this._last=null;this.done=!1};b.prototype.reset=function(b){this.q.clear();b&&this.q.pushArray(b);this._last=null;this.done=0===this.q.length};b.prototype.skipSubtree=function(){this._last=null;0===this.q.length&&(this.done=!0)};b.prototype.next=function(){if(this.done)return null;if(this._last){var b=this._last.children;if(b[0])for(var c=3;0<=c;c--){var d=b[c];d&&this.q.push(d)}}this._last=this.q.pop();
0!==this.q.length||this._last.children[0]||(this.done=!0);return this._last};return b}();d.IteratorPreorder=r;r=function(){function b(){this.q=new n;this.done=!0}b.prototype.reset=function(b){this.q.clear();if(b)for(this.q.pushArray(b),b=0;b<this.q.length;++b)for(var c=this.q.data[b],d=0;4>d;d++){var a=c.children[d];a&&this.q.push(a)}this.done=0===this.q.length};b.prototype.next=function(){var b=this.q.pop();this.done=0===this.q.length;return b};return b}();d.IteratorPostorder=r;d.lij2str=l;d.tile2str=
function(b){return l(b.lij)};d.traverseTilesPreorder=function(b,d){if(Array.isArray(b))for(var c=0;c<b.length;c++)k(b[c],d);else k(b,d)};d.traverseTilesPostorder=function(d,e){if(Array.isArray(d))for(var c=0;c<d.length;c++)b(d[c],e);else b(d,e)};d.findParentByLIJ=function(b,d){for(;b;b=b.parent)if(b.hasLij(d))return b;return null};d.fallsWithinLayer=function(b,d,c){if(!d)return!1;var e=d.fullExtent,a=b.extent;if(c){if(a[0]<e.xmin||a[1]<e.ymin||a[2]>e.xmax||a[3]>e.ymax)return!1}else if(e.xmin>a[2]||
e.ymin>a[3]||e.xmax<a[0]||e.ymax<a[1])return!1;b=b.surface.tilingScheme.levels[b.lij[0]].scale;return 0<d.minScale&&b>1.00000001*d.minScale||0<d.maxScale&&b<.99999999*d.maxScale?!1:!0};d.isPosWithinTile=function(b,d){b=b.extent;return d[0]>=b[0]&&d[1]>=b[1]&&d[0]<=b[2]&&d[1]<=b[3]};d.getTileNLevelsUp=function(b,d){for(;d--;)b=b.parent;return b};d.nextTileInAncestry=function(b,d){var c=b.lij[0]-d.lij[0]-1,e=b.lij[2]>>c,a=0;b.lij[1]>>c&1&&(a+=2);e&1&&(a+=1);return d.children[a]};d.sortTiles=function(b,
d){d.sort(function(c,d){return h(c,d,b)})};d.compareTiles=h;d.computeUpsampleInfo=function(b,d,c){for(var e=1,a=0,g=0;b!==d;)if(e*=.5,a*=.5,g*=.5,b.lij[2]&1&&(a+=.5),0===(b.lij[1]&1)&&(g+=.5),b=b.parent,null==b)throw Error("tile was not a descendant of upsampleTile");c.init(d,a,g,e)};d.hasVisibleSiblings=function(b){for(var d=0;d<b.length;d++){var c=b[d],f=c.parent;if(f)for(var a=0;4>a;a++){var g=f.children[a];if(g&&g!==c&&g.visible)return!0}}return!1}})},"esri/views/3d/terrain/MapTileAgent":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../../../core/ObjectPool","./TileAgent"],function(r,d,n,l,k){return function(b){function d(){var d=b.call(this)||this;d._scaleRangeEnabled=!0;return d}n(d,b);d.prototype._desiredMinLevelDelta=function(){return 0};d.Pool=new l(d);return d}(k)})},"esri/views/3d/terrain/OverlayManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Graphic ../../../core/Accessor ../../../core/Handles ../../../core/has ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/scheduling ../../../core/screenUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/Point ../../../geometry/support/aaBoundingRect ../../../symbols/SimpleMarkerSymbol ../state/utils/viewUtils ../support/animationUtils ../support/debugFlags ../support/debugFlags ../support/earthUtils ../support/mathUtils ../support/projectionUtils ../support/stack ../webgl-engine/lib/Intersector ../webgl-engine/lib/localOrigin".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){Object.defineProperty(d,"__esModule",{value:!0});var S=[[-.1,-2,3.9,2],[-.1,-3.9,3.9,.1],[-2,-3.9,2,.1],[-3.9,-3.9,.1,.1],[-3.9,-2,.1,2],[-3.9,-.1,.1,3.9],[-2,-.1,2,3.9],[-.1,-.1,3.9,3.9]],P=e.getLogger("esri.views.3d.OverlayManager"),V;r=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._handles=new h;a._overlaySR=null;a._renderSR=null;a._overlaySREqualsRenderSR=!0;a._connectedLayers={};a._overlays=null;
a._scale=0;a._placementDirty=!1;a._drawTexturesDirty=!1;a._isSpherical=!1;a._latestOriginId=0;a._maxResolution=g("esri-mobile")?2048:4096;a._animationTimeLast=0;a.opacity=0;return a}n(d,b);Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return this._renderer.hasHighlights},enumerable:!0,configurable:!0});d.prototype.initialize=function(){var b=this;this._stage=this.view._stage;this._renderer=this._stage.renderView.getDrapedRenderer();this._renderer.onHasHighlightsChanged=function(){return b.onHasHighlightsChanged()};
this._renderer.onContentChanged=function(){return b.setDrawTexturesDirty()};this._renderer.forceUpdate=function(a){b.updateOverlays(a);b._drawOverlayTextures()};this.groundIntersector=new I(this.view.viewingMode);this.groundIntersector.enable.backfacesTerrain=!0;this.groundIntersector.enable.invisibleTerrain=!0;this.groundIntersector.enable.hud=!1;this._handles.add([this.view.watch(["pointsOfInterest.renderPointOfView","pointsOfInterest.centerOnSurfaceFrequent.location","pixelRatio"],function(){return b.setOverlayPlacementDirty()}),
this.terrainSurface.on("elevation-change",function(){return b.setOverlayPlacementDirty()}),this.view.on("resize",function(){return b.setOverlayPlacementDirty()}),a.addFrameTask({preRender:function(a){b.hasOverlays()&&(b._checkAnimationNeedsRedraw(a),b._drawOverlayTextures())}})])};d.prototype.destroy=function(){for(var a in this._connectedLayers)this.unregisterLayerView(this._connectedLayers[a].layerView);this._disposeOverlays();this._handles&&(this._handles.destroy(),this._handles=null)};d.prototype.onHasHighlightsChanged=
function(){this.setOverlayPlacementDirty();this.notifyChange("hasHighlights")};d.prototype.hasOverlays=function(){return!!this._overlays};d.prototype.setSpatialReference=function(a,b){(this._overlaySR=a)?(this._renderSR=this.view.renderSpatialReference,this._overlaySREqualsRenderSR=this._overlaySR.equals(this._renderSR),this._longitudeCyclical=(this._isSpherical=b)?a.isWebMercator?new L.Cyclical(-2.0037508342788905E7,2.0037508342788905E7):new L.Cyclical(-180,180):null):(this._disposeOverlays(),this._longitudeCyclical=
null)};d.prototype.registerLayerView=function(a){var b=this,c=a.layer.uid;if(this._connectedLayers[c])P.warn("[OverlayManager#registerLayerView]: Layer "+c+" is already connected");else{var d=a.on("draped-data-change",function(){return b.setOverlayPlacementDirty()});this._connectedLayers[c]={eventHandles:[d],layerView:a};a.setDrapingExtent&&this._overlays&&this._overlays.forEach(function(c,d){a.setDrapingExtent(d,c.extent,b._overlaySR,c.resolution,c.renderLocalOrigin,c.pixelRatio)});this.setOverlayPlacementDirty();
this._setLayerViewOverlayUpdating(a,!0)}};d.prototype.unregisterLayerView=function(a){for(var b in this._connectedLayers){var c=this._connectedLayers[b];if(c.layerView===a){if(c.eventHandles)for(var d=0;d<c.eventHandles.length;d++)c.eventHandles[d].remove();delete this._connectedLayers[b];this.setOverlayPlacementDirty();a.destroyed||(a.overlayUpdating=!1)}}};d.prototype.setOverlayPlacementDirty=function(){this._placementDirty||(this._placementDirty=!0,this._setOverlayUpdating(!0))};d.prototype._setLayerViewOverlayUpdating=
function(a,b){if(!b||!a.suspended&&a.hasDraped)a.overlayUpdating=b};d.prototype._setOverlayUpdating=function(a){for(var b in this._connectedLayers)this._setLayerViewOverlayUpdating(this._connectedLayers[b].layerView,a);b=this.view.graphicsView;f.isSome(b)&&(b.overlayUpdating=a);this.terrainSurface.setPendingUpdates()};d.prototype.updateOverlays=function(a){void 0===a&&(a=this.view.state.camera);if(this._overlaySR){var b;b=c.nextHighestPowerOfTwo(Math.max(a.fullWidth,a.fullHeight)+256);var d=Math.min(b,
this._maxResolution);this._computeOverlayExtents(a,b,U);this._initOverlays();this._updateOverlay(0,U.inner,d,1);this._updateOverlay(1,U.outer,d,u.width(U.inner)/u.width(U.outer));this.opacity=1;this.terrainSurface.updateTileOverlayParams();this._placementDirty=!1;this.setDrawTexturesDirty()}};d.prototype._updateOverlay=function(a,b,c,d){var e=this._overlays[a],f;a:{f=e.extent;for(var g=F.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS?0:1E-5*Math.max(b[2]-b[0],b[3]-b[1],f[2]-f[0],f[3]-f[1]),h=0;4>h;h++)if(Math.abs(f[h]-
b[h])>g){f=!0;break a}f=!1}if(f||c!==e.resolution||e.pixelRatio!==d){u.set(e.extent,b);e.resolution=c;e.pixelRatio=d;d=u.center(e.extent);e.renderLocalOrigin=H.fromValues(d[0],d[1],0,"OV_"+this._latestOriginId++);for(var k in this._connectedLayers)d=this._connectedLayers[k].layerView,d.setDrapingExtent&&d.setDrapingExtent(a,b,this._overlaySR,c,e.renderLocalOrigin,e.pixelRatio)}};d.prototype.needsUpdate=function(){return this._placementDirty&&!!this._overlaySR};d.prototype.updateOpacity=function(a){if(!this._overlays)return 1;
var b=this._scale;return 3.5*a<b?Math.sqrt(c.clamp((a-b/10)/(b/3.5-b/10),0,1)):1};d.prototype.setOverlayParamsOfTile=function(a,b,c){var d=this._overlays[0],e=this._overlays[1];a=u.intersection(a.extent,a.surface.extent,X);this._rectInsideRect(a,d.extent)?(this._setTileOverlayData(a,d,b.overlays[0]),this._invalidateTileOverlayData(b.overlays[1])):this._rectanglesOverlap(a,d.extent)?(this._setTileOverlayData(a,d,b.overlays[0]),this._setTileOverlayData(a,e,b.overlays[1])):(this._rectanglesOverlap(a,
e.extent)?this._setTileOverlayData(a,e,b.overlays[0]):this._invalidateTileOverlayData(b.overlays[0]),this._invalidateTileOverlayData(b.overlays[1]));b.overlayOpacity=void 0!==c?c:1};d.prototype.overlayPixelSizeInMapUnits=function(a){if(!this._overlays)return 0;var b=this._overlays[0],c=this._overlays[1];a=this._pointIsInExtent(a,b.extent)?b:c;return(a.extent[2]-a.extent[0])/a.resolution};d.prototype._setTileOverlayData=function(a,b,c){var d=b.extent;c.texScale[0]=(a[2]-a[0])/(d[2]-d[0]);c.texScale[1]=
(a[3]-a[1])/(d[3]-d[1]);var e=a[0];if(this._longitudeCyclical){var e=this._longitudeCyclical.minimalMonotonic(d[0],e),f=this._longitudeCyclical.minimalMonotonic(d[0],a[2]);e>f&&(e=f-(a[2]-a[0]))}c.texOffset[0]=(e-d[0])/(d[2]-d[0]);c.texOffset[1]=(a[1]-d[1])/(d[3]-d[1]);c.renderTargetId=b.valid?b.renderTargetId:null;c.highlightRenderTargetId=b.highlightValid?b.highlightRenderTargetId:null;c.waterMaskRenderTargetId=b.waterMaskValid?b.waterMaskRenderTargetId:null};d.prototype._invalidateTileOverlayData=
function(a){a.renderTargetId=null;a.highlightRenderTargetId=null;a.waterMaskRenderTargetId=null};d.prototype._createEmptyOverlay=function(a){var b=this._renderer.createRenderTarget("overlay"+a,!0,8,9987),c=this._renderer.createRenderTarget("overlayHighlight"+a,!1,8,9987);a=this._renderer.createRenderTarget("overlayWaterMask"+a,!0,8,9987);return{extent:u.create(),resolution:0,renderTargetId:b,valid:!1,highlightRenderTargetId:c,highlightValid:!1,waterMaskRenderTargetId:a,waterMaskValid:!1,renderLocalOrigin:H.fromValues(0,
0,0,"O"),pixelRatio:1}};d.prototype._initOverlays=function(){this._overlays||(this._overlays=[this._createEmptyOverlay(0),this._createEmptyOverlay(1)])};d.prototype._disposeOverlays=function(){var a=this;this._overlays&&(this._overlays.forEach(function(b){a._renderer.disposeRenderTarget(b.renderTargetId);a._renderer.disposeRenderTarget(b.highlightRenderTargetId);a._renderer.disposeRenderTarget(b.waterMaskRenderTargetId)}),this._overlays=null)};d.prototype._checkAnimationNeedsRedraw=function(a){a.time-
this._animationTimeLast<C.DESIRED_DRAPED_ANIMATION_MS||(this._animationTimeLast=a.time,this._renderer.updateAnimations(a.time)&&(this._drawTexturesDirty=!0))};d.prototype.setDrawTexturesDirty=function(){this._overlays?this._drawTexturesDirty||(this._drawTexturesDirty=!0,this._setOverlayUpdating(!0)):this.setOverlayPlacementDirty()};d.prototype._intersectGroundFromView=function(a,b,c,d){var e=p.createRenderScreenPointArray3(b*a.fullWidth,c*a.fullHeight,1),e=a.unprojectPoint(e,O.sv3d.get());b=p.createRenderScreenPointArray3(b*
a.fullWidth,c*a.fullHeight,0);b=a.unprojectPoint(b,O.sv3d.get());this.groundIntersector.intersect([],b,e,null,a,null,!1);this.view.basemapTerrain.intersect(this.groundIntersector,null,b,e);return this.groundIntersector.results.min.getIntersectionPoint(d)};d.prototype._findHorizonBasedPointOfInterest=function(a,b,d){var e=.5;if("global"===this.view.viewingMode){e=y.vec3f64.clone(a.eye);t.vec3.normalize(e,e);t.vec3.negate(e,e);b=t.vec3.length(b);b=Math.asin(b/t.vec3.length(a.eye));var f=Math.acos(t.vec3.dot(a.viewForward,
e)),e=c.clamp((b-(f-.5*a.fovY))/a.fovY,0,1);b=c.clamp((-b-(f-.5*a.fovY))/a.fovY,0,1);e=1===e&&0===b?.5:b+.55*(e-b)}else e=w.vec4f64.fromValues(0,Math.tan(.5*Math.PI-Math.acos(-a.viewForward[2])),1,0),e=x.vec4.transformMat4(e,e,a.projectionMatrix)[1],e=c.clamp(.5+.5*e,0,1),e=1===e||0===e?.5:0<a.eye[2]?.55*e:1-.55*(1-e);return this._intersectGroundFromView(a,.5,e,d)?!0:!1};d.prototype._computeOverlayExtents=function(a,b,c){var d=this.terrainSurface.extent,e=this.view.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,
f=y.vec3f64.create();this._findHorizonBasedPointOfInterest(a,e,f)||t.vec3.copy(f,e);this._scale=this.view.renderCoordsHelper.getAltitude(a.eye);var g=t.vec3.distance(a.eye,f),e=B.viewAngle(this.view.renderCoordsHelper,e,a.eye),e=Math.PI/2-Math.abs(e-Math.PI/2);if(E.OVERLAY_SHOW_CENTER){var h=new z({color:[255,0,0],outline:{color:[255,255,255],width:2}}),l=new m;K.vectorToPoint(f,this._renderSR,l,this._overlaySR);h=new k({geometry:l,symbol:h});void 0!==V&&this.view.graphics.remove(V);this.view.graphics.add(h);
V=h}this._overlaySREqualsRenderSR||K.vectorToVector(f,this._renderSR,f,this._overlaySR);b=b*a.perRenderPixelRatio*g/2;l=!1;g=Infinity;this._isSpherical&&(this._overlaySR.isWebMercator?(b/=Math.cos(K.webMercator.y2lat(f[1])),g=this.terrainSurface.extent[3],g*=.999):(l=!0,b/=N.metersPerDegree,g=90),b>=g&&(b=g,f[1]=0,this._overlaySR.isWebMercator&&(f[0]=0)));h=1;l&&(h=1/Math.max(.2,Math.cos(Math.abs(L.deg2rad(f[1])))),180<b*h&&(h=180/b));var p=b*h,l=c.inner;l[0]=f[0]-p;l[1]=f[1]-b;l[2]=f[0]+p;l[3]=f[1]+
b;this._isSpherical&&this._shiftExtentToFitBounds(l,Infinity,g);c=c.outer;u.set(c,l);6*p>d[2]-d[0]?u.set(c,d):e<=.25*Math.PI?(c[0]-=p,c[1]-=b,c[2]+=p,c[3]+=b):(K.vectorToVector(a.eye,this._renderSR,R,this._overlaySR),v.vec2.subtract(J,f,R),a=-Math.atan2(J[1],J[0])+.125*Math.PI,0>a&&(a+=2*Math.PI),x.vec4.scale(J,S[Math.floor(a/(.25*Math.PI))],2*b),J[0]*=h,J[2]*=h,x.vec4.add(c,c,J));this._isSpherical&&(c[0]=this._longitudeCyclical.clamp(c[0]),c[2]=this._longitudeCyclical.clamp(c[2]),c[1]=Math.max(c[1],
-g),c[3]=Math.min(c[3],g));!this._isSpherical&&d&&(a=u.intersection(l,d,X),d=u.intersection(c,d,ca),u.contains(a,d)&&(c[2]=c[0],c[3]=c[1]))};d.prototype._drawOverlayTextures=function(){if(this._drawTexturesDirty){var a=this._drawOverlay(0),b=this._drawOverlay(1);0!==a&&0!==b||this.terrainSurface.updateTileOverlayParams();this._setOverlayUpdating(!1);this._stage.renderView.setNeedsRender();this._drawTexturesDirty=!1}};d.prototype._drawOverlay=function(a){var b=this._overlays[a],c=b.valid,d=b.highlightValid,
e=b.waterMaskValid,f=b.extent,g=b.resolution,h=b.pixelRatio,k=this._longitudeCyclical?f[2]>this._longitudeCyclical.max:!1,l=this._longitudeCyclical?f[0]<this._longitudeCyclical.min:!1;if(k||l){T.views=Q;var l=Math.round((k?this._longitudeCyclical.max-f[0]:this._longitudeCyclical.min-f[0])/(f[2]-f[0])*g),m=T.views[0];x.vec4.set(m.viewport,0,0,l,g);x.vec4.set(m.extent,f[0],f[1],this._longitudeCyclical.max,f[3]);k||(m.extent[0]+=this._longitudeCyclical.range);m=T.views[1];x.vec4.set(m.viewport,l,0,g-
l,g);x.vec4.set(m.extent,this._longitudeCyclical.min,f[1],f[2],f[3]);k&&(m.extent[2]-=this._longitudeCyclical.range)}else T.views=Z,u.set(T.views[0].extent,f),x.vec4.set(T.views[0].viewport,0,0,g,g);T.width=g;T.height=g;T.pixelRatio=h*this.view.state.camera.pixelRatio;T.index=a;g=this._renderer;a=g.draw(b.renderTargetId,T);f=g.drawHighlights(b.highlightRenderTargetId,T);g=g.drawNormals(b.waterMaskRenderTargetId,T);b.valid=a;b.highlightValid=f;b.waterMaskValid=g;return a!==c||f!==d||g!==e?0:1};d.prototype._rectanglesOverlap=
function(a,b){return this._longitudeCyclical?(this._longitudeCyclical.contains(b[0],b[2],a[0])||this._longitudeCyclical.contains(b[0],b[2],a[2])||this._longitudeCyclical.contains(a[0],a[2],b[0]))&&!(a[1]>b[3]||a[3]<b[1]):u.intersects(a,b)};d.prototype._rectInsideRect=function(a,b){return this._longitudeCyclical?this._longitudeCyclical.contains(b[0],b[2],a[0])&&this._longitudeCyclical.contains(b[0],b[2],a[2])&&a[1]>b[1]&&a[3]<b[3]:u.contains(b,a)};d.prototype._pointIsInExtent=function(a,b){if(this._longitudeCyclical)return this._longitudeCyclical.contains(b[0],
b[2],a.x)&&a.y>=b[1]&&a.y<=b[3];var c=a.x;a=a.y;return c>b[0]&&c<b[2]&&a>b[1]&&a<b[3]};d.prototype._shiftExtentToFitBounds=function(a,b,c){var d=0,e=0;a[0]<-b?d=a[0]+b:a[2]>b&&(d=b-a[2]);a[1]<-c?e=a[1]+c:a[3]>c&&(e=c-a[3]);u.offset(a,d,e)};Object.defineProperty(d.prototype,"test",{get:function(){return{overlays:this._overlays,renderer:this._renderer}},enumerable:!0,configurable:!0});l([q.property()],d.prototype,"view",void 0);l([q.property()],d.prototype,"terrainSurface",void 0);l([q.property({type:Boolean})],
d.prototype,"hasHighlights",null);return d=l([q.subclass("esri.views.3d.terrain.OverlayManager")],d)}(q.declared(b));d.OverlayManager=r;var T={width:0,height:0,pixelRatio:0,views:null,index:0},Z=[{viewport:u.create(),extent:u.create()}],Q=[Z[0],{viewport:u.create(),extent:u.create()}],J=w.vec4f64.create(),R=y.vec3f64.create(),U={inner:u.create(),outer:u.create()},X=u.create(),ca=u.create()})},"esri/views/3d/terrain/PlanarPatch":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../support/geometryUtils ../support/mathUtils ./PatchGeometryFactory ./Tile".split(" "),
function(r,d,n,l,k,b,h,g,e){return function(c){function d(a,b,e){var f=c.call(this,d.NumSubdivisionsAtLevel)||this;f.up=l.vec3f64.unitZ();void 0!==a&&f.init(a,b,e);return f}n(d,c);d.prototype.init=function(a,b,d){c.prototype.init.call(this,a,b,d);this.edgeLen=this.extent[2]-this.extent[0];this.edgeLen2=this.edgeLen*this.edgeLen;this.curvatureHeight=0;this.centerAtSeaLevel[0]=h.lerp(this.extent[0],this.extent[2],.5);this.centerAtSeaLevel[1]=h.lerp(this.extent[1],this.extent[3],.5);this.centerAtSeaLevel[2]=
0;this.updateRadiusAndCenter()};d.prototype.updateRadiusAndCenter=function(){c.prototype.updateRadiusAndCenter.call(this);var a=(this.extent[2]-this.extent[0])*Math.SQRT1_2,b=.5*(this.elevationBounds[0]-this.elevationBounds[1]);this.radius=Math.sqrt(a*a+b*b)};d.prototype._isVisible=function(){return this.intersectsClippingArea&&b.frustum.intersectsAABB(this.surface.frustum.planes,k.wrap(this.extent[0],this.extent[1],this.elevationBounds[0],this.extent[2],this.extent[3],this.elevationBounds[1]))};
d.prototype.createGeometry=function(a,b,c){g.createPlanarGlobePatch(a,this.extent,b,this.renderData,c);this.updateMemoryUsed()};d.NumSubdivisionsAtLevel=[2,2,2,2,2,2,2,2];return d}(e)})},"esri/views/3d/terrain/PatchGeometryFactory":function(){define("require exports ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../geometry/support/aaBoundingBox ../support/earthUtils ../support/mathUtils ../support/buffer/BufferPool ../support/buffer/InterleavedLayout ./ElevationData ./TerrainConst ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){function v(a,b,c,d){var e=0<(c&2),f=b+(d?1024:0)+(e?2048:0),g=u.get(f);if(!g){var g=b-1,h=b-1,k=b*b,l=2*g+2*h,m=g*h*6,p=6*l,q=6*(2*g+h-1);d&&(m*=2,p*=2,q*=2);for(var l=65536<k+l?new Uint32Array(m+p):new Uint16Array(m+p),n=0,z=0,t=m,w,v,B,y,r=0,C=0;C<=h;C++){e&&(r=0===C?q:C===h?-q:0);for(var t=t+r,F=0;F<=g;F++)B=x(F,C,g,h),-1<B&&(y=0===C&&F!==g?1:F===g&&C!==h?g+1:C===h&&0!==F?-1:0===F&&0!==C?-(g+1):0,0!==y&&(w=n,v=k+B,B=k+(0===F&&1===C?0:B+1),y=n+y,d?(l[t+0]=w,
l[t+1]=v,l[t+2]=v,l[t+3]=B,l[t+4]=B,l[t+5]=w,l[t+6]=B,l[t+7]=y,l[t+8]=y,l[t+9]=w,l[t+10]=w,l[t+11]=B,t+=12):(l[t+0]=w,l[t+1]=v,l[t+2]=B,l[t+3]=B,l[t+4]=y,l[t+5]=w,t+=6))),++n,F<g&&C<h&&(w=C*(g+1)+F,v=w+1,B=v+(g+1),y=B-1,d?(l[z+0]=w,l[z+1]=v,l[z+2]=v,l[z+3]=B,l[z+4]=B,l[z+5]=w,l[z+6]=B,l[z+7]=y,l[z+8]=y,l[z+9]=w,l[z+10]=w,l[z+11]=B,z+=12):(l[z+0]=w,l[z+1]=v,l[z+2]=B,l[z+3]=B,l[z+4]=y,l[z+5]=w,z+=6));t-=r}g={values:l,numSurfaceIndices:m,numSkirtIndices:p};u.set(f,g)}a.indices=g.values;a.numSurfaceIndices=
g.numSurfaceIndices;a.numSkirtIndices=g.numSkirtIndices;a.numWithoutSkirtIndices=a.numSurfaceIndices+(c?6*(b-1)*(d?2:1):0)}function t(a,b,c,d){a<d[0]&&(d[0]=a);a>d[3]&&(d[3]=a);b<d[1]&&(d[1]=b);b>d[4]&&(d[4]=b);c<d[2]&&(d[2]=c);c>d[5]&&(d[5]=c)}function y(a,b){var c=b>a?1:0;return 2+4*c+(1-2*c)*(a+b)}function x(a,b,c,d){return 0===b?a:a===c?c+b:b===d?c+d+(c-a):0===a&&0<b?2*c+d+(d-b):-1}Object.defineProperty(d,"__esModule",{value:!0});var w=c.newLayout().vec3f(p.VertexAttrConstants.POSITION).vec2f(p.VertexAttrConstants.UV0),
m=new e.BufferPool(function(a){return w.createBuffer(a)},function(a){return a.count});d.clearCaches=function(){m.clear();u.clear()};d.releaseGeometry=function(a){m.release(a.vertexAttributes);a.vertexAttributes=null;a.indices=null};d.createSphericalGlobePatch=function(c,d,e,l,p,u,q,n){var z=u[0],w=u[1],r=u[2];u=u[3];var I=.1*h.earthRadius*(u-w),H=c.numVertsPerRow-1,K=c.numVertsPerRow-1,O=c.numVertsPerRow*c.numVertsPerRow,G=m.acquire(O+(2*H+2*K)),N=G.position.typedBuffer,L=G.uv0.typedBuffer,S=l.geometryInfo.boundingBox;
b.empty(S);var P=d[2]-d[0],T=d[3]-d[1],V=r-z,r=e[0],aa=e[1];e=e[2];for(var ga=0;ga<=H;ga++){var ia=ga/H,sa=z+ia*V;B[ga]=Math.sin(sa);C[ga]=Math.cos(sa);F[ga]=ia;E[ga]=d[0]+ia*P}z=q&&!!(n&1);P=q&&!!(n&2);for(sa=V=0;sa<=K;sa++){var Aa=sa/K,ga=g.lerp(w,u,Aa),Ba=Math.cos(ga),Ca=Math.sin(ga),Ia=void 0;q?(Ia=h.halfEarthRadius*Math.log((1+Ca)/(1-Ca)),Aa=(Ia-d[1])/T):Ia=180*ga/Math.PI;for(ga=0;ga<=H;ga++){var ia=F[ga],ra=B[ga],wa=C[ga],xa=h.earthRadius;c.samplerData&&(xa+=f.sample(E[ga],Ia,c.samplerData)||
0);wa=wa*Ba*xa-r;ra=ra*Ba*xa-aa;xa=Ca*xa-e;t(wa,ra,xa,S);var va=a.GEOMETRY_VERTEX_STRIDE*V;N[va+0]=wa;N[va+1]=ra;N[va+2]=xa;L[va+0]=ia;L[va+1]=Aa;va=x(ga,sa,H,K);if(-1<va){var va=a.GEOMETRY_VERTEX_STRIDE*(O+va),ua=z&&0===sa?-1:P&&sa===K?1:0,wa=0===ua?wa:-r,ra=0===ua?ra:-aa,xa=0===ua?xa:h.earthRadius*ua-e;N[va+0]=wa;N[va+1]=ra;N[va+2]=xa;L[va+0]=0===ua?y(ia,Aa):ia;L[va+1]=0===ua?I:Aa;0!==ua&&t(wa,ra,xa,S)}++V}}l.geometryInfo.numVertsPerRow=c.numVertsPerRow;l.geometryInfo.vertexAttributes=G;l.geometryInfo.skirtLength=
I;k.vec4.set(l.geometryInfo.uvOffsetAndScale,0,0,1,1);v(l.geometryInfo,c.numVertsPerRow,q?n:0,p)};d.createPlanarGlobePatch=function(c,d,e,g,h){var l=d[0],p=d[1],u=d[2]-l,q=d[3]-p,n=c.clippingArea,z=n?Math.max(0,(n[0]-d[0])/u):0,w=n?Math.max(0,(n[1]-d[1])/q):0,B=n?Math.min(1,(n[2]-d[0])/u):1;d=n?Math.min(1,(n[3]-d[1])/q):1;var r=B>z?1/(B-z):1,C=d>w?1/(d-w):1,F=-z*r,E=-w*C,I=.1*u,H=c.numVertsPerRow-1,K=c.numVertsPerRow-1,O=c.numVertsPerRow*c.numVertsPerRow,N=m.acquire(O+(2*H+2*K)),L=N.position.typedBuffer,
S=N.uv0.typedBuffer,ia=g.geometryInfo.boundingBox;b.empty(ia);for(var sa=0,Aa=0;Aa<=K;Aa++){var Ba=Aa/K,Ca=E+Ba*C,Ba=p+Ba*q;n&&(Ba<n[1]?(Ba=n[1],Ca=0):Ba>n[3]&&(Ba=n[3],Ca=1));for(var Ia=0;Ia<=H;Ia++){var ra=Ia/H,wa=F+ra*r,ra=l+ra*u;n&&(ra<n[0]?(ra=n[0],wa=0):ra>n[2]&&(ra=n[2],wa=1));var xa=c.samplerData?f.sample(ra,Ba,c.samplerData)||0:0,ra=ra-e[0],va=Ba-e[1],xa=xa-e[2];t(ra,va,xa,ia);var ua=a.GEOMETRY_VERTEX_STRIDE*sa;L[ua+0]=ra;L[ua+1]=va;L[ua+2]=xa;S[ua+0]=wa;S[ua+1]=Ca;ua=x(Ia,Aa,H,H);-1<ua&&
(ua=a.GEOMETRY_VERTEX_STRIDE*(O+ua),L[ua+0]=ra,L[ua+1]=va,L[ua+2]=xa,S[ua+0]=y(wa,Ca),S[ua+1]=I);++sa}}g.geometryInfo.numVertsPerRow=c.numVertsPerRow;g.geometryInfo.vertexAttributes=N;g.geometryInfo.skirtLength=I;k.vec4.set(g.geometryInfo.uvOffsetAndScale,z,w,B-z,d-w);v(g.geometryInfo,c.numVertsPerRow,0,h)};var u=new Map,z=Math.pow(2,-52);d.intersectSkirts=function(a,b,c,d,e,f,g,h){var k=f.position;f=f.uv0;var l=a[0],m=a[1];a=a[2];var p=b[0]-l,u=b[1]-m;for(b=b[2]-a;c<d;c++){var t=3*c,w=3*c+1,v=3*
c+2,B=k.get(e[t],0),x=k.get(e[t],1),y=k.get(e[t],2),r=k.get(e[w],0),C=k.get(e[w],1),F=k.get(e[w],2),E=k.get(e[v],0),I=k.get(e[v],1),H=k.get(e[v],2),t=f.get(e[t],0),w=f.get(e[w],0),v=f.get(e[v],0);2<=t&&(n.vec3.set(N,B,x,y),g(N),B+=N[0],x+=N[1],y+=N[2]);2<=w&&(n.vec3.set(N,r,C,F),g(N),r+=N[0],C+=N[1],F+=N[2]);2<=v&&(n.vec3.set(N,E,I,H),g(N),E+=N[0],I+=N[1],H+=N[2]);var r=r-B,C=C-x,F=F-y,E=E-B,I=I-x,H=H-y,t=u*H-I*b,w=b*E-H*p,K=p*I-E*u,v=r*t+C*w+F*K,B=l-B,O=m-x,S=a-y,y=O*F-C*S,x=S*r-F*B,P=B*C-r*O;if(v>
z){B=B*t+O*w+S*K;if(0>B||B>v)continue;t=p*y+u*x+b*P;if(0>t||B+t>v)continue}else if(v<-z){B=B*t+O*w+S*K;if(0<B||B<v)continue;t=p*y+u*x+b*P;if(0<t||B+t<v)continue}else continue;y=(E*y+I*x+H*P)/v;0<=y&&(r=q.computeNormal(r,C,F,E,I,H,L),h(y,r,c))}};var B=Array(a.MAX_PATCH_TESSELATION+1),C=Array(a.MAX_PATCH_TESSELATION+1),F=Array(a.MAX_PATCH_TESSELATION+1),E=Array(a.MAX_PATCH_TESSELATION+1),N=l.vec3f64.create(),L=l.vec3f64.create()})},"esri/views/3d/support/buffer/BufferPool":function(){define(["require",
"exports","../../../../core/PooledArray"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,b){this._factoryCallback=d;this._lengthCallback=b;this._pool=new Map}d.prototype.acquire=function(d){var b=this._pool.get(d);if(b&&0!==b.length)return b.pop();try{return this._factoryCallback(d)}catch(g){var b=window.performance&&window.performance.memory,h="";b&&(h="\n  totalJSHeapSize: "+b.totalJSHeapSize+", usedJSHeapSize: "+b.usedJSHeapSize+", jsHeapSizeLimit: "+
b.jsHeapSizeLimit);console.log("Array allocation of size "+d+" failed: "+g+h);throw g;}};d.prototype.release=function(d){var b=this._lengthCallback(d),h=this._pool.get(b);h||(h=new n({shrink:!0}),this._pool.set(b,h));h.push(d)};d.prototype.clear=function(){this._pool.clear()};Object.defineProperty(d.prototype,"test",{get:function(){return{size:this._pool.size}},enumerable:!0,configurable:!0});return d}();d.BufferPool=r})},"esri/views/3d/terrain/Tile":function(){define("require exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingRect ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ../support/mathUtils ./ElevationTileAgent ./MapTileAgent ./TerrainConst ./terrainUtils ./TileAgent ./TilePerLayerInfo ./tileUtils ../../webgl/Texture ../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z){function B(a){a.dispose();a instanceof q?q.Pool.release(a):a instanceof v&&v.Pool.release(a)}var C=y.weakAssert,F=g.vec3f64.create(),E=g.vec3f64.create(),N=c.vec4f64.create();return function(){function c(a){this._numSubdivisionAtLevel=a;this.lij=[0,0,0];this._dirty=!0;this.extent=f.create();this._elevationBounds=b.vec2f64.create();this.children=[null,null,null,null];this.layerInfo=Array(t.LayerClass.COUNT);this.extentInRadians=f.create();this.centerAtSeaLevel=
g.vec3f64.create();this.center=g.vec3f64.create();this.up=g.vec3f64.zeros();this._intersectsClippingArea=this._isWithinClippingArea=!0;this._clippingArea=null;this._memoryUsed=this.radius=this.edgeLen2=this.edgeLen=this.renderOrder=this.screenDepth=this._maxTesselation=0}Object.defineProperty(c.prototype,"memoryUsed",{get:function(){return this._memoryUsed},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxTesselation",{get:function(){return this._maxTesselation},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"numSubdivisionsAtLevel",{get:function(){return this._numSubdivisionAtLevel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWithinClippingArea",{get:function(){return this._isWithinClippingArea},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"intersectsClippingArea",{get:function(){return this._intersectsClippingArea},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"clippingArea",{get:function(){return this._clippingArea},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"surface",{get:function(){return this._surface},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"elevationBounds",{get:function(){return this._elevationBounds},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){if(this._dirty){var a=this._isVisible();a!==this._visible&&
(this._visible=a,this.updateAgentSuspension(),this._visible=a);this._dirty=!1}return this._visible},enumerable:!0,configurable:!0});c.prototype.init=function(a,b,c){this.lij[0]=a[0];this.lij[1]=a[1];this.lij[2]=a[2];c.tilingScheme.getExtent(a[0],a[1],a[2],this.extent,this.extentInRadians);this._intersectsClippingArea=this._isWithinClippingArea=!0;this._clippingArea=null;this.radius=this.edgeLen2=this.edgeLen=0;this.vlevel=a?a[0]:0;b&&b._elevationBounds?k.vec2.copy(this.elevationBounds,b.elevationBounds):
k.vec2.set(this.elevationBounds,0,0);this._pendingUpdates=0;this.renderData=null;this.screenDepth=0;this._visible=!1;this._dirty=!0;this._parent=b;this._surface=c;for(a=0;4>a;a++)this.children[a]=null;for(a=0;a<t.LayerClass.COUNT;a++){b=c.numLayers(a);var d=this.layerInfo[a];this.layerInfo[a]?d.length=b:(d=Array(b),this.layerInfo[a]=d);for(var e=0;e<b;e++)d[e]=w.TilePerLayerInfo.makeEmptyLayerInfo(a,this._surface.upsampleInfoPool,d[e]),a===t.LayerClass.ELEVATION&&this.findElevationBoundsForLayer(e,
-1)}this.computeElevationBounds();this._maxTesselation=Math.min(c.tilingScheme.pixelSize[0],t.MAX_PATCH_TESSELATION)};c.prototype.dispose=function(){C(!this.renderData,"tile.renderData was not unloaded");this._parent&&C(-1===this._parent.children.indexOf(this),"still linked");for(var a=0;a<t.LayerClass.COUNT;a++)for(var b=0,c=this.layerInfo[a];b<c.length;b++)c[b].dispose();this._surface=this._parent=null;this._memoryUsed=0};c.prototype.updateMemoryUsed=function(){for(var b=this._surface.tilingScheme.pixelSize,
b=b[0]*b[1]*4,c=this._memoryUsed=0,d=this.layerInfo[t.LayerClass.MAP];c<d.length;c++){var e=d[c],e=e.data;e instanceof u?this._memoryUsed+=z.getGpuMemoryUsage(e):e instanceof HTMLImageElement?this._memoryUsed+=b:e instanceof a&&(this._memoryUsed+=e.getGpuMemoryUsage()+e.getCpuMemoryUsage())}c=0;for(d=this.layerInfo[t.LayerClass.ELEVATION];c<d.length;c++)e=d[c],this._memoryUsed+=e.data?b:0;this.renderData&&(this._memoryUsed+=this.renderData.estimatedGeometryMemoryUsage,b=this.renderData.textureDescriptor)&&
(this._memoryUsed+=z.getGpuMemoryUsage(b))};c.prototype.updateScreenDepth=function(a){h.vec3.copy(N,this.center);N[3]=1;e.vec4.transformMat4(N,N,a);this.screenDepth=N[2]/N[3]};c.prototype.shouldSplit=function(a,b){var c=this.lij[0];h.vec3.subtract(F,this.center,b);var d=h.vec3.squaredLength(F),e=a[4];if(this.edgeLen2>d&&c<e)return t.TileUpdate.SPLIT;var f=a[1],d=2*Math.sqrt(d),g=this.edgeLen/(a[0]*d);return g<f?this.vlevel!==this.lij[0]?(this.vlevel=this.lij[0],t.TileUpdate.VSPLITMERGE):t.TileUpdate.NONE:
c>=e?(a=c+Math.ceil(-p.log2(f/g)),a!==this.vlevel?(this.vlevel=a,t.TileUpdate.VSPLITMERGE):t.TileUpdate.NONE):6<c&&(h.vec3.scale(E,this.up,h.vec3.dot(this.up,F)),h.vec3.subtract(E,E,F),c=h.vec3.squaredLength(E),c>this.radius*this.radius&&(h.vec3.scale(E,E,this.radius/Math.sqrt(c)),h.vec3.add(E,E,this.center),h.vec3.subtract(E,b,E),b=this._elevationBounds[1]-this._elevationBounds[0],Math.min(1,(Math.abs(h.vec3.dot(E,this.up))+.5*b+this.curvatureHeight)/h.vec3.length(E))*(this.edgeLen/(a[2]*d))<.1/
a[5]*a[3]))?t.TileUpdate.NONE:t.TileUpdate.SPLIT};c.prototype.load=function(a){for(var b=null==this.renderData&&a.loadCachedElevationData(this),c=0;c<t.LayerClass.COUNT;c++)if(this.layerInfo[c])if(c===t.LayerClass.ELEVATION&&b)for(var d=0,e=this.layerInfo[c];d<e.length;d++)e[d].loadingAgent=x.DONE;else this._createOrUpdateAgents(0,c);a.loadTile(this)};c.prototype.unload=function(a){a.unloadTile(this,this.elevationDone);for(a=0;a<t.LayerClass.COUNT;a++)for(var b=0,c=this.layerInfo[a];b<c.length;b++){var d=
c[b];d.loadingAgent&&d.loadingAgent!==x.DONE&&(B(d.loadingAgent),d.loadingAgent=null);d.pendingUpdates=0}this._pendingUpdates&=~t.TileUpdate.GEOMETRY;this._pendingUpdates&=~t.TileUpdate.TEXTURE};c.prototype.updateClippingStatus=function(a){if(f.equals(a,this._clippingArea))return!1;var b=this._intersectsClippingArea,c=this._isWithinClippingArea;a?(this._intersectsClippingArea=this.intersectsExtent(a),this._isWithinClippingArea=this.isWithinExtent(a)):this._isWithinClippingArea=this._intersectsClippingArea=
!0;this._clippingArea=a;this._dirty=!0;a=c&&this._isWithinClippingArea;b=!c&&!b&&!this._isWithinClippingArea&&!this._intersectsClippingArea;!this.renderData||a||b||this.setPendingUpdate(t.TileUpdate.GEOMETRY);return!0};c.prototype.updateVisibility=function(){this._dirty=!0};c.prototype.getLayerInfo=function(a,b){return this.layerInfo[b][a]};c.prototype.hasLayerData=function(a,b){return(a=this.layerInfo[b][a])&&a.data&&!a.dataInvalidated};c.prototype.hasDataAvailable=function(a,b,c){return(b=this.layerInfo[c][b].tilemap)?
"unavailable"!==b.getAvailability(a.lij[1],a.lij[2]):!0};Object.defineProperty(c.prototype,"hasPendingUpdates",{get:function(){return 0!==this._pendingUpdates},enumerable:!0,configurable:!0});c.prototype.isSuspended=function(a){return this.hasPendingUpdate(t.TileUpdate.SPLIT)?!0:a===t.LayerClass.ELEVATION?!1:!this.visible};Object.defineProperty(c.prototype,"elevationDone",{get:function(){if(this.hasPendingUpdate(t.TileUpdate.GEOMETRY))return!1;for(var a=0,b=this.layerInfo[t.LayerClass.ELEVATION];a<
b.length;a++){var c=b[a];if(c.loadingAgent!==x.DONE||!c.upsampleFromTile)return!1}return!0},enumerable:!0,configurable:!0});c.prototype.hasPendingUpdate=function(a){return(this._pendingUpdates&a)===a};c.prototype.setPendingUpdate=function(a){this._pendingUpdates|=a;this._surface.setPendingUpdates()};c.prototype.resetPendingUpdate=function(a){return this.hasPendingUpdate(a)?(this._pendingUpdates&=~a,!0):!1};c.prototype.requestLayerData=function(a,b,c){var d=this;t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d requested by tile %s",
this.lij.toString(),b,a,c.tile.lij.toString());var e=this.layerInfo[b][a];if(-1<e.waitingAgents.indexOf(c))return console.warn("agent already requested this piece of map data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),c.tile.lij.toString(),b,a),!0;e.waitingAgents.push(c);if(e.data&&!e.dataInvalidated)return console.warn("agent requested existing data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),c.tile.lij.toString(),b,a),setTimeout(function(){return c.dataArrived(d)},
0),!0;if(e.requestPromise)return!0;e.requestAbort=l.createAbortController();var f=this._surface.requestTileData(this,a,b,e.requestAbort);if(!f)return e.requestAbort=null,!1;a=function(){e.requestPromise===f&&(e.requestPromise=null,e.requestAbort=null)};e.requestPromise=f;f.then(a,a);return!!e.requestPromise};c.prototype.descendants=function(a){a||(a=[]);for(var b=0;4>b;b++){var c=this.children[b];c&&(c.descendants(a),a.unshift(this.children[b]))}return a};Object.defineProperty(c.prototype,"isLeaf",
{get:function(){return!this.children[0]&&!this.children[1]&&!this.children[2]&&!this.children[3]},enumerable:!0,configurable:!0});c.prototype.hasLij=function(a){return this.lij[0]===a[0]&&this.lij[1]===a[1]&&this.lij[2]===a[2]};c.prototype.findByLij=function(a){if(this.hasLij(a))return this;for(var b=0;4>b;b++){var c=this.children[b];if(c&&(c=c.findByLij(a)))return c}return null};c.prototype.unrequestLayerData=function(a,b,c){t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d canceled by tile %s",
this.lij.toString(),b,a,c.tile.lij.toString());var d=this.layerInfo[b][a],e=d.waitingAgents;c=null!=n.removeUnordered(e,c);C(c,"agent has not requested this piece of map data");1>e.length&&(d.abortRequest(),t.TILE_LOADING_DEBUGLOG&&console.log("tile %s layer %d/%d request/loading canceled",this.lij.toString(),b,a),this.updateMemoryUsed())};c.prototype.dataArrived=function(a,b,c){a=this.layerInfo[b][a];a.data=c;a.dataInvalidated=!1;for(c=0;c<a.waitingAgents.length;c++)a.waitingAgents[c].dataArrived(this);
a.waitingAgents.length=0;this.updateMemoryUsed()};c.prototype.dataMissing=function(a,b,c){c.notInTilemap||console.error("Tile %s layer %d/%d error",this.lij.toString(),b,a);a=this.layerInfo[b][a];a.dataMissing=!0;for(b=0;b<a.waitingAgents.length;b++)a.waitingAgents[b].dataMissing(this);a.waitingAgents.length=0;this.updateMemoryUsed()};c.prototype.updateRenderData=function(a){switch(a){case t.LayerClass.MAP:return this.updateTexture();case t.LayerClass.ELEVATION:return this.updateGeometry()}};c.prototype.updateTexture=
function(){this.renderData&&(this._pendingUpdates|=t.TileUpdate.TEXTURE,this._surface.setPendingUpdates())};c.prototype.updateGeometry=function(){this.setPendingUpdate(t.TileUpdate.GEOMETRY);for(var a=0,b=this.layerInfo[t.LayerClass.ELEVATION];a<b.length;a++)b[a].pendingUpdates|=t.TileUpdate.GEOMETRY;this._surface.setPendingUpdates()};c.prototype.invalidateLayerData=function(a,b){this.layerInfo[b][a].invalidateSourceData();this.restartAgents(b)};c.prototype.computeElevationBounds=function(){k.vec2.set(this._elevationBounds,
Number.MAX_VALUE,-Number.MAX_VALUE);for(var a=!1,b=0,c=this.layerInfo[t.LayerClass.ELEVATION];b<c.length;b++){var d=c[b];d.elevationBounds&&(this._elevationBounds[0]=Math.min(this._elevationBounds[0],d.elevationBounds[0]),this._elevationBounds[1]=Math.max(this._elevationBounds[1],d.elevationBounds[1]),a=!0)}a||k.vec2.set(this._elevationBounds,0,0);this.updateRadiusAndCenter()};c.prototype.updateRadiusAndCenter=function(){h.vec3.scale(E,this.up,.5*(this._elevationBounds[0]+this._elevationBounds[1]));
h.vec3.add(this.center,this.centerAtSeaLevel,E)};c.prototype.findElevationBoundsForLayer=function(a,b){var c=this.layerInfo[t.LayerClass.ELEVATION][a];if(!c.elevationBounds||c.elevationBounds[2]<b)if(b=this._surface.layerViewByIndex(a,t.LayerClass.ELEVATION),m.fallsWithinLayer(this,b.layer,!1)){b=!1;if(c.data){var d=c.data;k.vec2.copy(N,d.bounds);N[2]=this.lij[0];b=!0}else{for(var e=0,f=void 0,d=void 0,g=this._parent;g&&(!d||e<t.ELEVATION_DESIRED_RESOLUTION_LEVEL)&&!(e=this.vlevel-g.lij[0],f=d||f,
d=g.layerInfo[t.LayerClass.ELEVATION][a].data,!d&&f&&e>=t.ELEVATION_DESIRED_RESOLUTION_LEVEL);g=g._parent);if(d=d||f)d.computeMinMaxValue(this.lij[0],this.lij[1],this.lij[2],N),Infinity!==N[0]&&(N[2]=d.level,b=!0)}b&&(c.elevationBounds?h.vec3.copy(c.elevationBounds,N):c.elevationBounds=[N[0],N[1],N[2]])}};c.prototype.modifyLayers=function(a,b,c){for(var d=this.layerInfo[c],e=0;e<d.length;e++){var f=d[e];f.loadingAgent&&f.loadingAgent!==x.DONE&&(B(f.loadingAgent),f.loadingAgent=null);f.waitingAgents.length=
0}if(c===t.LayerClass.MAP)for(e=0;e<d.length;++e)void 0===a[e]&&d[e].dispose();a=b.length;f=Array(a);for(e=0;e<a;e++){var g=b[e];f[e]=-1<g?d[g]:w.TilePerLayerInfo.makeEmptyLayerInfo(c,this._surface.upsampleInfoPool)}this.layerInfo[c]=f;this.updateMemoryUsed()};c.prototype.restartAgents=function(a){this.renderData&&(this._createOrUpdateAgents(0,a),this.updateRenderData(a))};c.prototype.updateAgents=function(a){if(this.renderData){for(var b=this.layerInfo[a],c=0;c<b.length;c++){var d=b[c];d.loadingAgent===
x.DONE&&(d.loadingAgent=null)}this._createOrUpdateAgents(0,a)}};c.prototype.updateAgentSuspension=function(){for(var a=0;a<t.LayerClass.COUNT;a++)for(var b=this.isSuspended(a),c=0,d=this.layerInfo[a];c<d.length;c++){var e=d[c];e.loadingAgent&&e.loadingAgent!==x.DONE&&(e.loadingAgent.setSuspension(b),e.loadingAgent===x.DONE&&this.updateRenderData(a))}};c.prototype.removeLayerAgent=function(a,b){a=this.layerInfo[b][a];a.loadingAgent&&a.loadingAgent!==x.DONE&&a.loadingAgent.dispose();a.loadingAgent=
null};c.prototype.agentDone=function(a,b){var c=this.layerInfo[b][a];c.loadingAgent=x.DONE;c.data||c.upsampleFromTile||this._createOrUpdateAgents(a+1,b)};c.prototype._createOrUpdateAgents=function(a,b){for(var c=this.isSuspended(b),d=this.layerInfo[b];a<d.length;++a){var e=d[a],f=!1,g=this._surface.layerViewByIndex(a,b);if(e.loadingAgent)e.loadingAgent!==x.DONE&&e.loadingAgent.setSuspension(c),e.loadingAgent!==x.DONE&&(f=e.loadingAgent.update());else if(m.fallsWithinLayer(this,g.layer,!1)){var f=
e,h=a,k=b,l=c,p=k===t.LayerClass.ELEVATION?q.Pool.acquire():v.Pool.acquire();p.init(this,h,k,l);f.loadingAgent=p;(f=e.loadingAgent.startLoading())?e.loadingAgent===x.DONE&&this.setPendingUpdate(t.TileUpdate.GEOMETRY):(B(e.loadingAgent),e.loadingAgent=x.DONE)}e.loadingAgent===x.DONE&&this.updateRenderData(b);if(f&&g.isOpaque)break}};c.prototype.isWithinExtent=function(a){var b=this.extent;return b[0]>=a[0]&&a[2]>=b[2]&&b[1]>=a[1]&&a[3]>=b[3]};c.prototype.intersectsExtent=function(a){var b=this.extent;
return b[2]>=a[0]&&a[2]>=b[0]&&b[3]>=a[1]&&a[3]>=b[1]};return c}()})},"esri/views/3d/terrain/terrainUtils":function(){define("require exports ../../../layers/ElevationLayer ../../../layers/TileLayer ../../../layers/VectorTileLayer ../../../support/basemapDefinitions ./terrainUtilsPlanar ./terrainUtilsSpherical".split(" "),function(r,d,n,l,k,b,h,g){function e(a){return a&&"esri.views.3d.layers.TileLayerView3D"===a.declaredClass}function c(a){return a&&"esri.views.3d.layers.VectorTileLayerView3D"===
a.declaredClass}function f(a){return a&&"esri.views.3d.layers.WMTSLayerView3D"===a.declaredClass}function a(a){return a&&"esri.views.3d.layers.ElevationLayerView3D"===a.declaredClass}function p(){t={};for(var a in b)b[a].baseMapLayers.forEach(function(a){t[a.url]=19});t["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function q(a,b,c,d){return v["local"===d||"planar"===d?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(a,b,c)}Object.defineProperty(d,"__esModule",
{value:!0});var v={planar:h,spherical:g};d.weakAssert=function(a,b){a||console.warn("Terrain: "+b)};d.autoUpdateSkirtsVisibility=function(a,b,c){var d=v[a.manifold],e,f=d.isInsideExtent(a,b);f?e=a.getElevation(b):(e=a.getElevationBounds(),e=.5*(e[0]+e[1]));e=b[2]-e;c=.9*Math.abs(e)<c?0:0>e?-1:1;f||(d.isInsideExtent(a,b,a.hideSkirtsDistanceFromExtentMargin)?(b=d.tiltToExtentEdge(a,b),b>a.hideSkirtsMinimumCameraTilt&&b<a.hideSkirtsMaximumCameraTilt&&(c=0)):c=0);a.skirtScale=c};d.isTiledLayer=function(a){return a&&
"base-tile"===a.type||"tile"===a.type||"elevation"===a.type||"base-elevation"===a.type||"open-street-map"===a.type||"web-tile"===a.type||"wmts"===a.type||"vector-tile"===a.type};d.isVectorTileLayer=function(a){return a&&a.isInstanceOf(k)};d.isTileLayerView=e;d.isVectorTileLayerView=c;d.isWMTSLayerView=f;d.isElevationLayerView=a;d.isTiledLayerView=function(b){return b&&(e(b)||a(b)||c(b)||f(b))};d.useFetchTileForLayer=function(a){return a.fetchTile&&!(a.fetchTile===l.prototype.fetchTile||a.fetchTile===
n.prototype.fetchTile)};var t=null;d.getKnownTiledServiceLevelCap=function(a){t||p();a=a&&a.replace(/https?:/,"");return a in t?t[a]:Infinity};d.prepareKnownTiledServiceLevelCaps=p;d.checkIfTileInfoSupportedForView=q;d.getTiledLayerInfo=function(a,b,c){var d,e;if("wmts"===a.type){if(a=a.activeLayer){var f=a.tileMatrixSet;if(f)d=f.tileInfo,e=f.fullExtent;else if(a=a.tileMatrixSets)if(a=a.find(function(a){return null==q(a.tileInfo,a.fullExtent,b,c)}))return{tileInfo:a.tileInfo,fullExtent:a.fullExtent}}}else d=
"vector-tile"===a.type?a.compatibleTileInfo256:a.tileInfo,e=a.fullExtent;return d&&e&&null==q(d,e,b,c)?{tileInfo:d,fullExtent:e}:{tileInfo:null,fullExtent:null}}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../request ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/HeightModelInfo ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/commonProperties ./support/LercWorker".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){var z=c.getLogger("esri.layers.ElevationLayer");return function(c){function d(a){a=c.call(this)||this;a.copyright=null;a.heightModelInfo=null;a.path=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";a.type="elevation";a.url=null;a.version=null;a._lercWorker=u.acquireInstance();return a}l(d,c);d.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};d.prototype.destroy=function(){u.releaseInstance(this._lercWorker);
this._lercWorker=null};Object.defineProperty(d.prototype,"minScale",{get:function(){},set:function(a){this.constructed&&z.warn(this.declaredClass+".minScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maxScale",{get:function(){},set:function(a){this.constructed&&z.warn(this.declaredClass+".maxScale support has been removed (since 4.5)")},enumerable:!0,configurable:!0});d.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=9.3);
return a};d.prototype.load=function(a){var b=this,c=f.isSome(a)?a.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===a.typeKeywords[b].toLowerCase())return!0;throw new e("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}},a).then(function(){return b._fetchImageService(c)},
function(){return b._fetchImageService(c)}));return this.when()};d.prototype.fetchTile=function(a,b,c,d){var e=this;void 0===d&&(d={});null!=d&&"number"===typeof d&&(z.warn("Passing noDataValue directly as a parameter is deprecated, use { noDataValue } options object instead (since 4.12)"),d={noDataValue:d});var f={responseType:"array-buffer",signal:d.signal},h={noDataValue:d.noDataValue,returnFileInfo:!0};return this.load().then(function(){return e._fetchTileAvailability(a,b,c,d)}).then(function(){return g(e.getTileUrl(a,
b,c),f)}).then(function(a){return e._lercWorker.decode(a.data,h,d.signal)}).then(function(a){return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue,minValue:a.minValue,maxValue:a.maxValue}})};d.prototype.getTileUrl=function(a,b,c){var d=p.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null}));return this.parsedUrl.path+"/tile/"+a+"/"+b+"/"+c+(d?"?"+d:"")};d.prototype.queryElevation=function(a,
b){var c=this;return this._importElevationQuery().then(function(d){return(new d.ElevationQuery).query(c,a,b)})};d.prototype.createElevationSampler=function(a,b){var c=this;return this._importElevationQuery().then(function(d){return(new d.ElevationQuery).createSampler(c,a,b)})};d.prototype.importLayerViewModule=function(c){return h(this,void 0,void 0,function(){return b(this,function(b){switch(c.type){case "2d":return[2,a.reject(new e("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"))];
case "3d":return[2,a.create(function(a){return r(["../views/3d/layers/ElevationLayerView3D"],a)})]}return[2]})})};d.prototype._fetchTileAvailability=function(b,c,d,e){return this.tilemapCache?this.tilemapCache.fetchAvailability(b,c,d,e):a.resolve("unknown")};d.prototype._fetchImageService=function(a){return h(this,void 0,void 0,function(){var c,d;return b(this,function(b){switch(b.label){case 0:if(this.resourceInfo)return[2,this.resourceInfo];c={query:n({f:"json"},this.parsedUrl.query),responseType:"json",
signal:a};return[4,g(this.parsedUrl.path,c)];case 1:return d=b.sent(),d.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.read(d.data,{origin:"service",url:this.parsedUrl}),[2]}})})};d.prototype._importElevationQuery=function(){return a.create(function(a){r(["./support/ElevationQuery"],a)})};k([q.property({json:{read:{source:"copyrightText"}}})],d.prototype,"copyright",void 0);k([q.property({readOnly:!0,type:v})],d.prototype,"heightModelInfo",void 0);k([q.property({type:String,json:{origins:{"web-scene":{read:!0,
write:!0}},read:!1}})],d.prototype,"path",void 0);k([q.property({type:["show","hide"]})],d.prototype,"listMode",void 0);k([q.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},portalItem:{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],d.prototype,"minScale",null);k([q.property({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},portalItem:{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],d.prototype,"maxScale",null);k([q.property({json:{read:!1,write:!1,
origins:{"web-document":{read:!1,write:!1}}}})],d.prototype,"opacity",void 0);k([q.property({type:["ArcGISTiledElevationServiceLayer"]})],d.prototype,"operationalLayerType",void 0);k([q.property()],d.prototype,"resourceInfo",void 0);k([q.property({json:{read:!1},value:"elevation",readOnly:!0})],d.prototype,"type",void 0);k([q.property(m.url)],d.prototype,"url",void 0);k([q.property()],d.prototype,"version",void 0);k([q.reader("version",["currentVersion"])],d.prototype,"readVersion",null);return d=
k([q.subclass("esri.layers.ElevationLayer")],d)}(q.declared(t,y,x,w))})},"esri/layers/mixins/ArcGISCachedService":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/accessorSupport/decorators ./ArcGISService ../support/serviceTileInfoProperty ../support/TilemapCache".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(){var a=null!==d&&d.apply(this,arguments)||
this;a.copyright=null;a.minScale=0;a.maxScale=0;a.spatialReference=null;a.tileInfo=null;a.tilemapCache=null;return a}l(a,d);a.prototype.readMinScale=function(a,b){return null!=b.minLOD&&null!=b.maxLOD?a:0};a.prototype.readMaxScale=function(a,b){return null!=b.minLOD&&null!=b.maxLOD?a:0};Object.defineProperty(a.prototype,"supportsBlankTile",{get:function(){return 10.2<=this.version},enumerable:!0,configurable:!0});a.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?
new c({layer:this}):null};k([h.property({json:{read:{source:"copyrightText"}}})],a.prototype,"copyright",void 0);k([h.property()],a.prototype,"minScale",void 0);k([h.reader("service","minScale")],a.prototype,"readMinScale",null);k([h.property()],a.prototype,"maxScale",void 0);k([h.reader("service","maxScale")],a.prototype,"readMaxScale",null);k([h.property({type:b.SpatialReference})],a.prototype,"spatialReference",void 0);k([h.property({readOnly:!0,dependsOn:["version"]})],a.prototype,"supportsBlankTile",
null);k([h.property(e.serviceTileInfoProperty)],a.prototype,"tileInfo",void 0);k([h.property()],a.prototype,"tilemapCache",void 0);k([h.reader("service","tilemapCache",["capabilities"])],a.prototype,"readTilemapCache",null);k([h.property()],a.prototype,"version",void 0);return a=k([h.subclass("esri.layers.mixins.ArcGISCachedService")],a)}(h.declared(g))})},"esri/layers/support/serviceTileInfoProperty":function(){define(["require","exports","../../core/tsSupport/assignHelper","./TileInfo"],function(r,
d,n,l){function k(b,d,g,e){if(!b)return null;g=d.minScale;var c=d.maxScale,f=d.minLOD,a=d.maxLOD;if(null!=f&&null!=a)return e&&e.ignoreMinMaxLOD?l.fromJSON(b):l.fromJSON(n({},b,{lods:b.lods.filter(function(b){b=b.level;return null!=b&&b>=f&&b<=a})}));if(0!==g&&0!==c){var h=g?Math.round(1E4*g)/1E4:Infinity,k=c?Math.round(1E4*c)/1E4:-Infinity;return l.fromJSON(n({},b,{lods:b.lods.filter(function(a){a=Math.round(1E4*a.scale)/1E4;return a<=h&&a>=k})}))}return l.fromJSON(b)}Object.defineProperty(d,"__esModule",
{value:!0});d.serviceTileInfoProperty={type:l,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:k}}}}};d.readServiceTileInfo=k})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y){var x=c.getLogger("esri.layers.support.TilemapCache");return function(c){function d(a){a=c.call(this)||this;a._handles=new e;a._pendingTilemapRequests={};a._availableLevels={};a.levels=5;a.cacheByteSize=2097152;a.request=b;return a}l(d,c);h=d;d.prototype.initialize=function(){var a=this;this._tilemapCache=new f(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],function(){return a._initializeTilemapDefinition()}),
v.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};d.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};d.prototype.castLevels=function(a){return 2>=a?(x.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(d.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});d.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,
b,c,this._tmpTilemapDefinition)};d.prototype.fetchTilemap=function(a,b,c,d){var e=this;if(!this._availableLevels[a])return p.reject(new g("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var f=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,f))return p.resolve(a);var h=d&&d.signal;d=n({},d,{signal:null});return p.create(function(a,b){p.onAbort(h,function(){return b(p.createAbortError())});var c=y.tilemapDefinitionId(f),g=e._pendingTilemapRequests[c];if(!g){var g=
y.Tilemap.fromDefinition(f,d).then(function(a){e._tilemapCache.put(c,a,a.byteSize);return a}),k=function(){return delete e._pendingTilemapRequests[c]};e._pendingTilemapRequests[c]=g;g.then(k,k)}g.then(a,b)})};d.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"};d.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,
d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};d.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).catch(function(a){return a}).then(function(d){return d instanceof y.Tilemap?(d=d.getAvailability(b,c),"unavailable"===d?p.reject(new g("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):d):p.isAbortError(d)?p.reject(d):"unknown"}):p.reject(new g("tilemap-cache:level-unavailable",
"Level "+a+" is unavailable in the service"))};d.prototype.fetchAvailabilityUpsample=function(a,b,c,d,e){var f=this;d.level=a;d.row=b;d.col=c;var g=this.layer.tileInfo;g.updateTileInfo(d);var k=!1,l=this.fetchAvailability(a,b,c,e).catch(function(a){if(p.isAbortError(a))throw a;if(g.upsampleTile(d))return f.fetchAvailabilityUpsample(d.level,d.row,d.col,d);throw a;}).then(function(a){k=!0;return a},function(a){k=!0;throw a;});if(k)return l;var m={id:d.id,level:a,row:b,col:c},u=p.createAbortController(),
q=n({},e,{signal:u.signal});a=function(a){var b=z.fetchAvailability(m.level,m.row,m.col,q);h._prefetches.push(b);a=function(){h._prefetches.removeUnordered(b)};b.then(a,a)};var z=this;for(b=0;h._prefetches.length<h._maxPrefetch&&g.upsampleTile(m);++b)a(b);l.then(function(){return u.abort()},function(){return u.abort()});return l};d.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,
query:b?q.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};d.prototype._tilemapFromCache=function(a,b,c,d){a=this._getTilemapDefinition(a,b,c,d);a=y.tilemapDefinitionId(a);return this._tilemapCache.get(a)};d.prototype._getTilemapDefinition=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;return d};d.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels=
{};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};var h;d._maxPrefetch=4;d._prefetches=new a({initialSize:h._maxPrefetch});k([t.property({constructOnly:!0,type:Number})],d.prototype,"levels",void 0);k([t.cast("levels")],d.prototype,"castLevels",null);k([t.property({readOnly:!0,dependsOn:["levels"],type:Number})],d.prototype,"size",null);k([t.property({constructOnly:!0,type:Number})],d.prototype,"cacheByteSize",void 0);k([t.property({constructOnly:!0})],d.prototype,"layer",void 0);
k([t.property({constructOnly:!0})],d.prototype,"request",void 0);return d=h=k([t.subclass("esri.layers.support.TilemapCache")],d)}(t.declared(h))})},"esri/core/LRUCache":function(){define(["require","exports","./MemCache"],function(r,d,n){return function(){function d(d,b){this._storage=new n.MemCacheStorage;this._storage.maxSize=d;b&&this._storage.registerRemoveFunc("",b)}d.prototype.put=function(d,b,h){this._storage.put(d,b,h,1)};d.prototype.pop=function(d){return this._storage.pop(d)};d.prototype.get=
function(d){return this._storage.get(d)};d.prototype.clear=function(){this._storage.clearAll()};d.prototype.destroy=function(){this._storage.clearAll()};return d}()})},"esri/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(r,d,n,l,k,b,h){function g(b){var c;"vector-tile"===b.service.type?c=b.service.url+"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height:
(c=b.service.tileServers,c=(c&&c.length?c[b.row%c.length]:b.service.url)+"/tilemap/"+b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height);(b=b.service.query)&&(c=c+"?"+b);return c}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}d.prototype.getAvailability=function(b,d){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";b=(b-this.location.top)*this.location.width+(d-this.location.left);
d=b>>3;var a=this._tileAvailabilityBitSet;return 0>d||d>a.length?"unknown":a[d]&1<<b%8?"available":"unavailable"};d.prototype._updateFromData=function(b){for(var c=!0,a=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,g=0;g<b.length;g++){var h=g%8;b[g]?(a=!1,d[e]|=1<<h):c=!1;7===h&&++e}this._isAllUnvailable=a;this._isAllAvailable=c;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};d.fromDefinition=function(b,e){var a=
b.service.request||l,c=b.row,f=b.col,v=b.width,t=b.height,y={query:{f:"json"}};e=e?n({},y,e):y;return a(g(b),e).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus){a=[];for(var b=0,d=v*t;b<d;b++)a[b]=0;return{location:{top:c,left:f,width:v,height:t},valid:!0,data:a}}return h.reject(a)}).then(function(a){if(a.location&&(a.location.top!==c||a.location.left!==f||a.location.width!==v||a.location.height!==t))throw new k("tilemap:location-mismatch","Tilemap response for different location than requested",
{response:a,definition:{top:c,left:f,width:v,height:t}});return d.fromJSON(a)})};d.fromJSON=function(c){d.validateJSON(c);var e=new d;e.location=Object.freeze(b.clone(c.location));e._updateFromData(c.data);return Object.freeze(e)};d.validateJSON=function(b){if(!b||!b.location)throw new k("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new k("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new k("tilemap:missing-data","Data missing from tilemap response");
if(!Array.isArray(b.data))throw new k("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new k("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return d}();d.Tilemap=r;d.tilemapDefinitionId=function(b){return b.level+"/"+b.row+"/"+b.col+"/"+b.width+"/"+b.height};d.tilemapDefinitionUrl=g;d.default=r})},"esri/layers/TileLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../geometry ../request ../core/Error ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ./Layer ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayerUrl ./support/arcgisLayerUrl ./support/commonProperties".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){var E="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");return function(d){function m(a,b){a=d.call(this)||
this;a.listMode="show";a.isReference=null;a.resampling=!0;a.spatialReference=null;a.path=null;a.sublayers=null;a.type="tile";a.url=null;return a}l(m,d);m.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};m.prototype.load=function(a){var b=this,c=f.isSome(a)?a.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]},a).then(function(){return b._fetchService(c)},function(){return b._fetchService(c)}));return this.when()};
Object.defineProperty(m.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":
"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0});m.prototype.readSpatialReference=function(a,b){return(a=a||b.tileInfo&&b.tileInfo.spatialReference)&&g.SpatialReference.fromJSON(a)};Object.defineProperty(m.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0});m.prototype.castTileServers=function(a){return Array.isArray(a)?a.map(function(a){return p.urlToObject(a).path}):null};m.prototype.fetchTile=function(a,b,
c,d){void 0===d&&(d={});var f=d.signal,g=d.timestamp;a=this.getTileUrl(a,b,c);f={responseType:"image",signal:f};null!=g&&(f.query={_ts:d.timestamp});return e(a,f).then(function(a){return a.data})};m.prototype.getTileUrl=function(a,b,c){var d=p.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null})),e=this.tileServers;return(e&&e.length?e[b%e.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c+(d?"?"+d:"")};m.prototype.importLayerViewModule=function(c){return h(this,
void 0,void 0,function(){return b(this,function(b){switch(c.type){case "2d":return[2,a.create(function(a){return r(["../views/2d/layers/TileLayerView2D"],a)})];case "3d":return[2,a.create(function(a){return r(["../views/3d/layers/TileLayerView3D"],a)})]}return[2]})})};m.prototype._fetchService=function(b){var d=this;return a.create(function(a,f){if(d.resourceInfo)a({data:d.resourceInfo});else{if(!d.parsedUrl)return f(new c("tile-layer:undefined-url","layer's url is not defined"));e(d.parsedUrl.path,
{query:n({f:"json"},d.parsedUrl.query),responseType:"json",signal:b}).then(a,f)}}).then(function(a){a.ssl&&(d.url=d.url.replace(/^http:/i,"https:"));d.read(a.data,{origin:"service",url:d.parsedUrl});if(10.1===d.version&&!C.isHostedAgolService(d.url))return d._fetchServerVersion(d.url,b).then(function(a){d.read({currentVersion:a})}).catch(function(){})})};m.prototype._fetchServerVersion=function(b,c){if(!B.test(b))return a.reject();b=b.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return e(b,{query:{f:"json"},
responseType:"json",signal:c}).then(function(b){return b.data&&b.data.currentVersion?b.data.currentVersion:a.reject()})};m.prototype._getMapName=function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&a[2]};m.prototype._getDefaultAttribution=function(a){if(a){var b;a=a.toLowerCase();for(var c=0,d=E.length;c<d;c++)if(b=E[c],-1<b.toLowerCase().indexOf(a))return p.makeAbsolute("//static.arcgis.com/attribution/"+
b)}};m.prototype._getDefaultTileServers=function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":"server.arcgisonline")]:[]};k([q.property({readOnly:!0,dependsOn:["parsedUrl"]})],m.prototype,"attributionDataUrl",null);k([q.property({type:["show","hide","hide-children"]})],m.prototype,"listMode",void 0);k([q.property({type:Boolean,
json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],m.prototype,"isReference",void 0);k([q.property({readOnly:!0})],m.prototype,"operationalLayerType",null);k([q.property()],m.prototype,"popupTemplates",void 0);k([q.property({type:Boolean})],m.prototype,"resampling",void 0);k([q.property()],m.prototype,"resourceInfo",void 0);k([q.property({type:g.SpatialReference})],m.prototype,"spatialReference",void 0);k([q.reader("spatialReference",["spatialReference","tileInfo"])],
m.prototype,"readSpatialReference",null);k([q.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],m.prototype,"path",void 0);k([q.property({readOnly:!0})],m.prototype,"sublayers",void 0);k([q.property({dependsOn:["parsedUrl"]})],m.prototype,"tileServers",null);k([q.cast("tileServers")],m.prototype,"castTileServers",null);k([q.property({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0);k([q.property(F.url)],m.prototype,"url",void 0);return m=k([q.subclass("esri.layers.TileLayer")],
m)}(q.declared(v,z.default,y,t,u,x,w,m))})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./ArcGISService ../support/commonProperties".split(" "),function(r,d,n,l,k,b,h,g,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.capabilities=void 0;a.copyright=null;a.fullExtent=
null;a.legendEnabled=!0;a.spatialReference=null;a.version=null;return a}n(d,c);d.prototype.readCapabilities=function(a,b){var c=b.capabilities&&b.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});if(!c)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};a=this.type;var d=-1!==c.indexOf("query"),e=-1!==c.indexOf("map"),f=!!b.exportTilesAllowed,c=-1!==c.indexOf("tilemap"),g="tile"!==a&&!!b.supportsDynamicLayers,
h="tile"!==a&&(!b.tileInfo||g),k="tile"!==a&&(!b.tileInfo||g);return{operations:{supportsQuery:d,supportsExportMap:e,supportsExportTiles:f,supportsTileMap:c},exportMap:e?{supportsSublayersChanges:"tile"!==a,supportsDynamicLayers:g,supportsSublayerVisibility:h,supportsSublayerDefinitionExpression:k}:null,exportTiles:f?{maxExportTilesCount:+b.maxExportTilesCount}:null}};d.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?
9.31:9.3);return a};l([k.property({readOnly:!0})],d.prototype,"capabilities",void 0);l([k.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],d.prototype,"readCapabilities",null);l([k.property({json:{read:{source:"copyrightText"}}})],d.prototype,"copyright",void 0);l([k.property({type:b})],d.prototype,"fullExtent",void 0);l([k.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],d.prototype,"id",void 0);
l([k.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],d.prototype,"legendEnabled",void 0);l([k.property(e.popupEnabled)],d.prototype,"popupEnabled",void 0);l([k.property({type:h})],d.prototype,"spatialReference",void 0);l([k.property()],d.prototype,"version",void 0);l([k.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],d.prototype,"readVersion",null);return d=l([k.subclass("esri.layers.mixins.ArcGISMapService")],
d)}(k.declared(g))})},"esri/layers/mixins/SublayersOwner":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){function y(a,b,c){var d=[],e={};if(!a)return d;a.forEach(function(a){var f=new v;f.read(a,b);c&&(-1===c.indexOf(f.id)?f.visible=!1:f.visible=!0);e[f.id]=f;null!=a.parentLayerId&&-1!==a.parentLayerId?(a=e[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):d.unshift(f)});return d}function x(a,b){var d=b.get(a.id);d?(c.mixin(a.__accessor__.store._values,d.__accessor__.store._values),d.__accessor__.overridden&&(a.__accessor__.overridden=c.mixin(a.__accessor__.overridden||
{},d.__accessor__.overridden)),d.sublayers&&(a.sublayers=d.sublayers.map(function(a){return x(a,b)}))):a.sublayers&&a.sublayers.forEach(function(a){return x(a,b)});return a}Object.defineProperty(d,"__esModule",{value:!0});var w=f.getLogger("esri.layers.TileLayer");r=function(b){function c(){var a=b.call(this)||this;a.allSublayers=new g({root:a,rootCollectionNames:["sublayers"],getChildrenFunction:function(a){return a.sublayers}});a.watch("sublayers",function(b,c){return a._handleSublayersChange(b,
c)},!0);return a}l(c,b);c.prototype.readServiceSublayers=function(a,b,c){return y(b.layers,c)};c.prototype.readSublayersFromItemOrWebMap=function(a,b,c){return!b.layers&&b.visibleLayers?b.visibleLayers.map(function(a){return{id:a}}):y(b.layers,c,b.visibleLayers)};c.prototype.readSublayers=function(a,b,c){a=y(b.layers,c);this._updateSublayersForOrigin(q.OriginId.PORTAL_ITEM,a);this._updateSublayersForOrigin(q.OriginId.WEB_MAP,a);this._updateSublayersForOrigin(q.OriginId.WEB_SCENE,a);return a};c.prototype.writeSublayers=
function(a,b,c,d){a=a.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reverse();var e=this.serviceSublayers.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reduce(function(a,b){a.set(b.id,b);return a},new Map),f=!1,g=!0;this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers?(f=t.isExportDynamic(a,this.serviceSublayers,this),g=!f&&t.sameStructureAsService(a,this.serviceSublayers)):
g=t.sameStructureAsService(a,this.serviceSublayers);b.layers=[];a.forEach(function(a){var c=e.get(a.id),c=n({writeAsDynamic:f,writeOverridesOnly:g,serviceSublayer:c},d);a=a.write({},c);(!g||g&&1<Object.keys(a).length)&&b.layers.push(a)});a=a.filter(function(a){return a.visible}).map(function(a){return a.id});"tile"!==this.type&&(b.visibleLayers=a)};c.prototype.findSublayerById=function(a){return this.allSublayers.find(function(b){return b.id===a})};c.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(a){return a.clone()})};
c.prototype._updateSublayersForOrigin=function(a,b){var c=this.__accessor__.store;if(c.has("sublayers",a)){var d=c.get("sublayers",a).flatten(function(a){return a.sublayers});if(d.every(function(a){return!a.__accessor__.store._values.hasOwnProperty("minScale")})){var e=d.reduce(function(a,b){a.set(b.id,b);return a},new Map);b=b.map(function(a){return x(a.clone(),e)});c.set("sublayers",new (h.ofType(v))(b),a)}}};c.prototype._handleSublayersChange=function(a,b){var c=this;b&&(b.forEach(function(a){a.parent=
null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=c;a.layer=c}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})],"tile"===this.type&&this._sublayersHandles.push(a.on("before-changes",function(a){w.error(new e("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",
{layer:c}));a.preventDefault()})))};k([a.property({readOnly:!0})],c.prototype,"allSublayers",void 0);k([a.property({readOnly:!0,type:h.ofType(v)})],c.prototype,"serviceSublayers",void 0);k([a.reader("service","serviceSublayers",["layers"])],c.prototype,"readServiceSublayers",null);k([a.property({value:null,type:h.ofType(v),json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],c.prototype,"sublayers",void 0);k([a.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],
c.prototype,"readSublayersFromItemOrWebMap",null);k([a.reader("service","sublayers",["layers"])],c.prototype,"readSublayers",null);k([a.writer(["web-map","web-scene","portal-item"],"sublayers",{layers:{type:[v]},visibleLayers:{type:[p.Integer]}})],c.prototype,"writeSublayers",null);return c=k([a.subclass("esri.layers.mixins.SublayersOwner")],c)}(a.declared(b));d.default=r})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../PopupTemplate ../../renderers ../../symbols ../../core/Collection ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ./commonProperties ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../tasks/support/Query".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){var E=v.getLogger("esri.layers.support.Sublayer"),N=0;return function(d){function k(a){a=d.call(this,a)||this;a._sublayersHandles=null;return a}n(k,d);p=k;Object.defineProperty(k.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(a){this._setAndNotifyLayer("definitionExpression",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"id",{get:function(){var a=this._get("id");
return null==a?N++:a},set:function(a){this._get("id")!==a&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id"):this._set("id",a))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(a){this._setAndNotifyLayer("labelingInfo",a)},enumerable:!0,configurable:!0});k.prototype.writeLabelingInfo=function(a,b,c,d){(!d||d.writeAsDynamic)&&a&&a.length&&(b.layerDefinition=
{drawingInfo:{labelingInfo:a.map(function(a){return a.write({},d)})}})};Object.defineProperty(k.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(a){this._setAndNotifyLayer("labelsVisible",a)},enumerable:!0,configurable:!0});k.prototype.writeLabelsVisible=function(a,b,c,d){if(!d||d.writeAsDynamic)b.showLabels=a};Object.defineProperty(k.prototype,"layer",{set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=a})},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"listMode",{get:function(){return this._get("listMode")},set:function(a){this._set("listMode",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(a){this._setAndNotifyLayer("minScale",
a)},enumerable:!0,configurable:!0});k.prototype.readMinScale=function(a,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0};k.prototype.writeMinScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.minScale===a&&c.maxScale===this.maxScale)return;b.minScale=a};Object.defineProperty(k.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(a){this._setAndNotifyLayer("maxScale",a)},enumerable:!0,configurable:!0});k.prototype.readMaxScale=
function(a,b){return b.maxScale||b.layerDefinition&&b.layerDefinition.maxScale||0};k.prototype.writeMaxScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.maxScale===a&&c.minScale===this.minScale)return;b.maxScale=a};Object.defineProperty(k.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(a){this._setAndNotifyLayer("opacity",a)},enumerable:!0,configurable:!0});k.prototype.readOpacity=function(a,b){a=b.layerDefinition;return 1-.01*(null!=a.transparency?
a.transparency:a.drawingInfo.transparency)};k.prototype.writeOpacity=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{transparency:100-100*a}}};k.prototype.writeParent=function(a,b,c,d){d&&d.writeOverridesOnly||(b.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1)};Object.defineProperty(k.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(a){this._set("popupEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(a){this._set("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(a){if(a)for(var b=0,d=a.getSymbols();b<d.length;b++)if(c.isSymbol3D(d[b])){E.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",a)},enumerable:!0,configurable:!0});k.prototype.readRenderer=function(a,b,c){if(a=b.layerDefinition.drawingInfo.renderer||
void 0)(a=C.read(a,b,c)||void 0)||E.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});return a};k.prototype.writeRenderer=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{renderer:a.toJSON()}}};k.prototype.writeWebSceneRenderer=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{renderer:a.toJSON()}}};Object.defineProperty(k.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,
type:B.MAPLAYER}},set:function(a){this._setAndNotifyLayer("source",a)},enumerable:!0,configurable:!0});k.prototype.writeSource=function(a,b,c,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(b.layerDefinition={source:B.sourceToJSON(a)})};Object.defineProperty(k.prototype,"sublayers",{set:function(a){this._handleSublayersChange(a,this._get("sublayers"));this._set("sublayers",a)},enumerable:!0,configurable:!0});k.prototype.castSublayers=function(a){return w.default(f.ofType(p),a)};k.prototype.writeSublayers=
function(a,b,c,d){d&&d.writeOverridesOnly||this.get("sublayers.length")&&(b[c]=this.sublayers.map(function(a){return a.id}).toArray().reverse())};Object.defineProperty(k.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});k.prototype.writeTitle=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.title===a)return;b[c]=a};Object.defineProperty(k.prototype,"url",{get:function(){var a=this.layer,b=this.source;
if(!a)return null;if(B.isMapLayerSource(b))return a.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:B.sourceToJSON(this.source)})};return a.parsedUrl.path+"/dynamicLayer?"+y.objectToQuery(b)},set:function(a){a?this._override("url",a):this._clearOverride("url")},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",a)},enumerable:!0,configurable:!0});k.prototype.writeVisible=
function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.visible===a)return;b[c]=a};k.prototype.clone=function(){var a=new p;this.hasOwnProperty("definitionExpression")&&(a.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(a.id=this.id);this.hasOwnProperty("labelingInfo")&&(a.labelingInfo=q.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(a.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled);
this.hasOwnProperty("visible")&&(a.visible=this.visible);this.hasOwnProperty("layer")&&(a.layer=this.layer);this.hasOwnProperty("minScale")&&(a.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(a.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(a.opacity=this.opacity);this.hasOwnProperty("parent")&&(a.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(a.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(a.popupTemplate=this.popupTemplate?this.popupTemplate.clone():
this.popupTemplate);this.hasOwnProperty("renderer")&&(a.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&(a.source=q.clone(this.source));this.hasOwnProperty("sublayers")&&(a.sublayers=this.sublayers?this.sublayers.clone():this.sublayers);this.hasOwnProperty("title")&&(a.title=this.title);return a};k.prototype.createQuery=function(){return new F({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};k.prototype.createFeatureLayer=function(){return h(this,
void 0,void 0,function(){var a,c,d,e,f;return b(this,function(b){switch(b.label){case 0:if(this.hasOwnProperty("sublayers"))return[2,null];a=this.layer&&this.layer.parsedUrl;c=this.source;d=null;a&&(d=B.isMapLayerSource(c)?a.path+"/"+c.mapLayerId:a.path+"/dynamicLayer");return[4,t.create(function(a){return r(["../FeatureLayer"],a)})];case 1:return e=b.sent(),f=new e({url:d}),this.hasOwnProperty("definitionExpression")&&(f.definitionExpression=this.definitionExpression),this.hasOwnProperty("labelingInfo")&&
(f.labelingInfo=q.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(f.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(f.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(f.visible=this.visible),this.hasOwnProperty("minScale")&&(f.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(f.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(f.opacity=this.opacity),this.hasOwnProperty("popupTemplate")&&(f.popupTemplate=this.popupTemplate?
this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(f.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&B.isDataLayerSource(this.source)&&(f.dynamicDataSource=q.clone(this.source)),this.hasOwnProperty("title")&&(f.title=this.title),[2,f]}})})};k.prototype.queryFeatures=function(a,b){var c=this;void 0===a&&(a=this.createQuery());return t.all([t.create(function(a){return r(["../../tasks/operations/query"],a)}),t.create(function(a){return r(["../../tasks/support/FeatureSet"],
a)})]).then(function(d){var e=d[0].executeQuery,f=d[1];return e(c.url,F.from(a),b).then(function(a){return f.fromJSON(a.data)})}).then(function(a){a&&a.features&&a.features.forEach(function(a){a.sourceLayer=c});return a})};k.prototype.toExportImageJSON=function(){var a={id:this.id,source:B.sourceToJSON(this.source)};this.definitionExpression&&(a.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var b=a.drawingInfo={};
this.renderer&&(b.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(b.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(b.labelingInfo=this.labelingInfo.map(function(a){return a.write({},{origin:"service"})}),b.showLabels=!0);null!=this.opacity&&(b.transparency=100-100*this.opacity)}return a};k.prototype._setAndNotifyLayer=function(a,b){var c=this.layer,d=this._get(a),e;switch(a){case "definitionExpression":e="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":e=
"supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":e="supportsDynamicLayers"}e&&!1===this.get("layer.capabilities.exportMap."+e)?this._logLockedError(a):(this._set(a,b),d!==b&&c&&c.emit&&c.emit("sublayer-update",{propertyName:a}))};k.prototype._handleSublayersChange=function(b,c){var d=this;c&&(c.forEach(function(a){a.parent=null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=
null);b&&(b.forEach(function(a){a.parent=d;a.layer=d.layer}),this._sublayersHandles=[b.on("after-add",function(a){a=a.item;a.parent=d;a.layer=d.layer}),b.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null}),b.on("before-changes",function(b){var c=d.get("layer.capabilities.exportMap.supportsSublayersChanges");null==c||c||(E.error(new a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:d})),b.preventDefault())})])};k.prototype._logLockedError=
function(b){E.error(new a("sublayer:locked","Property '"+b+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,layer:this.layer}))};var p;l([x.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],k.prototype,"definitionExpression",null);l([x.property({type:Number,json:{write:{ignoreOrigin:!0}}})],k.prototype,"id",null);l([x.property({value:null,type:[z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},
write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],k.prototype,"labelingInfo",null);l([x.writer("labelingInfo")],k.prototype,"writeLabelingInfo",null);l([x.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],k.prototype,"labelsVisible",null);l([x.writer("labelsVisible")],k.prototype,"writeLabelsVisible",null);l([x.property({value:null})],k.prototype,"layer",null);l([x.property(u.legendEnabled)],k.prototype,"legendEnabled",null);l([x.property({type:["show",
"hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],k.prototype,"listMode",null);l([x.property({type:Number,value:0,json:{write:{overridePolicy:function(a,b,c){if(m.willPropertyWrite(this,"maxScale",{},c))return{ignoreOrigin:!0}}}}})],k.prototype,"minScale",null);l([x.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],k.prototype,"readMinScale",null);l([x.writer("minScale")],k.prototype,"writeMinScale",null);l([x.property({type:Number,
value:0,json:{write:{overridePolicy:function(a,b,c){if(m.willPropertyWrite(this,"minScale",{},c))return{ignoreOrigin:!0}}}}})],k.prototype,"maxScale",null);l([x.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],k.prototype,"readMaxScale",null);l([x.writer("maxScale")],k.prototype,"writeMaxScale",null);l([x.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],k.prototype,"opacity",null);l([x.reader("opacity",["layerDefinition.drawingInfo.transparency",
"layerDefinition.transparency"])],k.prototype,"readOpacity",null);l([x.writer("opacity")],k.prototype,"writeOpacity",null);l([x.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],k.prototype,"parent",void 0);l([x.writer("parent")],k.prototype,"writeParent",null);l([x.property(u.popupEnabled)],k.prototype,"popupEnabled",null);l([x.property({value:null,type:g,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],k.prototype,"popupTemplate",null);l([x.property({types:e.rendererTypes,
value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],k.prototype,"renderer",null);l([x.reader("renderer",["layerDefinition.drawingInfo.renderer"])],k.prototype,"readRenderer",null);l([x.writer("renderer")],k.prototype,"writeRenderer",null);l([x.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:e.webSceneRendererTypes}})],k.prototype,"writeWebSceneRenderer",null);l([x.property({cast:B.castSource,json:{read:{source:"layerDefinition.source",reader:B.sourceFromJSON},
write:{target:"layerDefinition.source"}}})],k.prototype,"source",null);l([x.writer("source")],k.prototype,"writeSource",null);l([x.property({value:null,json:{type:[w.Integer],write:{target:"subLayerIds",allowNull:!0}}})],k.prototype,"sublayers",null);l([x.cast("sublayers")],k.prototype,"castSublayers",null);l([x.writer("sublayers")],k.prototype,"writeSublayers",null);l([x.property({type:String,value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],k.prototype,
"title",null);l([x.writer("title")],k.prototype,"writeTitle",null);l([x.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],k.prototype,"url",null);l([x.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],k.prototype,"visible",null);l([x.writer("visible")],k.prototype,"writeVisible",null);return k=p=l([x.subclass("esri.layers.support.Sublayer")],
k)}(x.declared(p))})},"esri/layers/support/sublayerUtils":function(){define(["require","exports","./layerSourceUtils"],function(r,d,n){function l(d,b){function h(a){var b=a.sublayers;g.unshift(a.id);b&&b.forEach(h)}if(!d||!d.length)return!0;var g=[];b.forEach(h);if(d.length>g.length)return!1;b=0;for(var e=g.length,c=0;c<d.length;c++){for(var f=d[c].id;b<e&&g[b]!==f;)b++;if(b>=e)return!1}return!0}Object.defineProperty(d,"__esModule",{value:!0});d.isExportDynamic=function(d,b,h){return d.some(function(b){var d=
b.source;return!(!d||d.type===n.MAPLAYER&&d.mapLayerId===b.id&&(!d.gdbVersion||d.gdbVersion===h.gdbVersion))||null!=b.renderer||null!=b.labelingInfo||b.hasOwnProperty("opacity")&&null!=b.opacity||b.hasOwnProperty("labelsVisible")&&null!=b.labelsVisible})?!0:!l(d,b)};d.sameStructureAsService=function(d,b){return b.flatten(function(b){return(b=b.sublayers)&&b.toArray().reverse()}).toArray().reverse().every(function(b,g){return(g=d[g])&&b.id===g.id&&(null==b.sublayers&&null==g.sublayers||null!=b.sublayers&&
null!=g.sublayers&&b.sublayers.map(function(b){return b.id}).join(",")===g.sublayers.map(function(b){return b.id}).join(","))})}})},"esri/layers/VectorTileLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../request ../core/Error ../core/global ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O){return function(d){function f(a,b){a=d.call(this)||this;a._spriteSourceMap=new Map;a.currentStyleInfo=null;a.style=null;a.isReference=null;a.operationalLayerType="VectorTileLayer";a.type="vector-tile";a.url=null;return a}l(f,d);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};f.prototype.load=function(a){var c=this,d=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},
a).then(function(){return h(c,void 0,void 0,function(){var c,d;return b(this,function(b){switch(b.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];c=this.portalItem.itemUrl+"/resources/styles/root.json";return[4,g(c,n({},a,{query:{f:"json"}}))];case 1:return d=b.sent(),d.data&&this.read({url:c},N.createForItem(this.portalItem)),[2]}})})}).then(function(){return c.loadStyle(null,a)},function(){return c.loadStyle(null,a)});this.addResolvingPromise(d);return this.when()};Object.defineProperty(f.prototype,
"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&q.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"capabilities",{get:function(){var a=this._getPrimarySource();return a?a.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"fullExtent",{get:function(){var a=this._getPrimarySource();
return a?a.fullExtent:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"parsedUrl",{get:function(){return this.serviceUrl?p.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||
null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});f.prototype.writeStyleUrl=function(a,b){a&&q.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};Object.defineProperty(f.prototype,"tileIndexType",{get:function(){var a=this._getPrimarySource();return a?a.type:""},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"tileIndexUrl",{get:function(){var a=
this._getPrimarySource();return a?a.tileMapURL:""},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"tileInfo",{get:function(){var a=[],b;for(b in this.sourceNameToSource)a.push(this.sourceNameToSource[b]);b=this._getPrimarySource().tileInfo;if(1<a.length)for(var c=0;c<a.length;c++)K.areSchemasOverlapping(b,a[c].tileInfo)&&(b=K.unionTileInfos(b,a[c].tileInfo));return b},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"tilemapCache",{get:function(){var a=this._getPrimarySource();
return a?a.capabilities.operations.supportsTileMap?a.tilemapCache:null:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"tileServers",{get:function(){var a=this._getPrimarySource();return a?a.tileServers:[]},enumerable:!0,configurable:!0});f.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};Object.defineProperty(f.prototype,"compatibleTileInfo256",{get:function(){return L.create256x256CompatibleTileInfo(this.tileInfo)},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"compatibleTileInfo512",{get:function(){return L.create512x512CompatibleTileInfo(this.tileInfo)},enumerable:!0,configurable:!0});f.prototype.loadSpriteSource=function(c,d){void 0===c&&(c=1);return h(this,void 0,void 0,function(){var e,f;return b(this,function(b){this._spriteSourceMap.has(c)||(e=new B.default(this.styleRepository.sprite,c),this._spriteSourceMap.set(c,e.load()));f=this._spriteSourceMap.get(c);return[2,a.create(function(b,
c){f.then(b,c);a.onAbortOrThrow(d,c)})]})})};f.prototype.loadStyle=function(d,e){return h(this,void 0,void 0,function(){var f,g,h,k=this;return b(this,function(b){f=d||this.style||this.url;if(this._loadingPromise&&"string"===typeof f&&this.url===f&&a.isAborted(this._abortController))return[2,this._loadingPromise];(g=this._abortController)&&g.abort();h=a.createAbortController();this._loadingPromise=a.create(function(b,d){var g={signal:h.signal};k._getSourceAndStyle(f,g).then(function(){k.loadSpriteSource(c.devicePixelRatio||
1,g);b()}).catch(d);a.onAbort(e,function(){h.abort()})});this._abortController=h;return[2,this._loadingPromise]})})};f.prototype.getStyleLayerId=function(a){return this.styleRepository.getStyleLayerId(a)};f.prototype.getPaintProperties=function(a){return this.styleRepository.getPaintProperties(a)};f.prototype.setPaintProperties=function(a,b){var c=this.styleRepository.isPainterDataDriven(a),d=this.styleRepository.setPaintProperties(a,b),e=this.styleRepository.isPainterDataDriven(a);this.emit("paint-change",
{layer:d,paint:b});(c||e)&&this.emit("layout-change",{layer:d,layout:this.styleRepository.getLayoutProperties(a)})};f.prototype.getLayoutProperties=function(a){return this.styleRepository.getLayoutProperties(a)};f.prototype.setLayoutProperties=function(a,b){a=this.styleRepository.setLayoutProperties(a,b);this.emit("layout-change",{layer:a,layout:b})};f.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,
b.toString()).replace(/\{x\}/gi,c.toString())};f.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new e("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};f.prototype.importLayerViewModule=function(c){return h(this,void 0,void 0,function(){return b(this,function(b){switch(c.type){case "2d":return[2,a.create(function(a){return r(["../views/2d/layers/VectorTileLayerView2D"],
a)})];case "3d":return[2,a.create(function(a){return r(["../views/3d/layers/VectorTileLayerView3D"],a)})]}return[2]})})};f.prototype._getSourceAndStyle=function(c,d){return h(this,void 0,void 0,function(){var e;return b(this,function(b){switch(b.label){case 0:return c?[4,E.loadMetadata(c,d)]:[2,a.reject(Error("invalid style!"))];case 1:return e=b.sent(),this._set("currentStyleInfo",{serviceUrl:e.serviceUrl,styleUrl:e.styleUrl,spriteUrl:e.spriteUrl,glyphsUrl:e.glyphsUrl,style:e.style,layerDefinition:e.layerDefinition}),
"string"===typeof c?(this.url=c,this.style=null):(this.url=null,this.style=c),this._set("sourceNameToSource",e.sourceNameToSource),this._set("primarySourceName",e.primarySourceName),this._set("styleRepository",new O(e.style,e)),this.read(e.layerDefinition,{origin:"service"}),[2]}})})};f.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&
b[3].toLowerCase()))for(var b=b[2]||"",c=0,d="OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" ");c<d.length;c++){var e=d[c];if(-1<e.toLowerCase().indexOf(a))return q.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}};f.prototype._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:
null};k([v.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"attributionDataUrl",null);k([v.property({type:["show","hide"]})],f.prototype,"listMode",void 0);k([v.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"capabilities",null);k([v.property({readOnly:!0})],f.prototype,"currentStyleInfo",void 0);k([v.property({json:{read:!1},readOnly:!0,type:t,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"fullExtent",
null);k([v.property()],f.prototype,"style",void 0);k([v.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],f.prototype,"isReference",void 0);k([v.property({type:["VectorTileLayer"]})],f.prototype,"operationalLayerType",void 0);k([v.property({readOnly:!0,dependsOn:["serviceUrl"]})],f.prototype,"parsedUrl",null);k([v.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"serviceUrl",null);k([v.property({type:y,dependsOn:["tileInfo"],
readOnly:!0})],f.prototype,"spatialReference",null);k([v.property({readOnly:!0})],f.prototype,"styleRepository",void 0);k([v.property({readOnly:!0})],f.prototype,"sourceNameToSource",void 0);k([v.property({readOnly:!0})],f.prototype,"primarySourceName",void 0);k([v.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],f.prototype,"styleUrl",null);k([v.writer(["portal-item","web-document"],
"styleUrl")],f.prototype,"writeStyleUrl",null);k([v.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileIndexType",null);k([v.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileIndexUrl",null);k([v.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:C,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileInfo",null);k([v.property({json:{read:!1},
readOnly:!0,type:F,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tilemapCache",null);k([v.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],f.prototype,"tileServers",null);k([v.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],f.prototype,"type",void 0);k([v.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],f.prototype,"url",void 0);k([v.property({readOnly:!0})],
f.prototype,"version",void 0);k([v.reader("version",["version","currentVersion"])],f.prototype,"readVersion",null);k([v.property({readOnly:!0,dependsOn:["tileInfo"]})],f.prototype,"compatibleTileInfo256",null);k([v.property({readOnly:!0,dependsOn:["tileInfo"]})],f.prototype,"compatibleTileInfo512",null);return f=k([v.subclass("esri.layers.VectorTileLayer")],f)}(v.declared(x,m,u,z,f,w))})},"esri/layers/support/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/promiseUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function c(b,a){this.baseURL=b;this.devicePixelRatio=a;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(c.prototype,"spriteNames",{get:function(){var b=[],a;for(a in this._spritesData)b.push(a);b.sort();return b},enumerable:!0,configurable:!0});c.prototype.getSpriteInfo=function(b){return this._spritesData[b]};c.prototype.load=function(c){return h(this,
void 0,void 0,function(){return b(this,function(a){switch(a.label){case 0:e.throwIfAborted(c);this.loadStatus="loading";if(!this.baseURL)return[2,e.resolve(this)];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._loadSprites(c)];case 2:return a.sent(),this.loadStatus="loaded",[3,4];case 3:return a.sent(),this.loadStatus="failed",[3,4];case 4:return[2,this]}})})};c.prototype._loadSprites=function(b){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var c=this.baseURL,d=this._isRetina?
"@2x":"",f=""+c+d+".png";return e.all([g(c+d+".json",b),g(f,k({responseType:"image"},b))]).then(function(b){var c=b[0];b=b[1];var d=Object.keys(c.data);if(!d||0===d.length||1===d.length&&"_ssl"===d[0]||!b||!b.data)return a._spritesData=a.image=null,a.width=a.height=0,e.resolve(null);a._spritesData=c.data;c=b.data;a.width=c.width;a.height=c.height;b=document.createElement("canvas");d=b.getContext("2d");b.width=c.width;b.height=c.height;d.drawImage(c,0,0,c.width,c.height);c=d.getImageData(0,0,c.width,
c.height);c=new Uint8Array(c.data);for(d=0;d<c.length;d+=4)b=c[d+3]/255,c[d]*=b,c[d+1]*=b,c[d+2]*=b;a.image=c})};return c}();d.default=r})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(r,d,n,l,k,b,h,g,e,c){function f(a){a&&
(a=e.getOrigin(a),t&&-1===t.indexOf(a)&&t.push(a))}function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var b=void 0,c=0;c<a.length;++c)e.isProtocolRelative(a[c])?b&&(b=b.split("://")[0]+":"+a[c].trim()):b=e.isAbsolute(a[c])?a[c]:e.join(b,a[c]);return b}function p(a,b,c,d,p){return k(this,void 0,void 0,function(){var k,m,u,t,w,x;return l(this,function(l){switch(l.label){case 0:g.throwIfAborted(p);if("string"!==typeof c)return[3,2];t=e.normalize(c);f(t);w=e.urlToObject(t);return[4,
h(w.path,n({query:{f:"json"},responseType:"json"},p))];case 1:return u=l.sent(),m=k=t,[3,3];case 2:u={data:c},k=c.jsonUrl||null,m=d,l.label=3;case 3:return x=u.data,u.ssl&&(k&&(k=k.replace(/^http:/i,"https:")),m&&(m=m.replace(/^http:/i,"https:"))),x.sources?(a.styleUrl=k||null,[2,q(a,x,m,p)]):x.sources?[2,g.reject("You must specify the URL or the JSON for a service or for a style.")]:a.sourceUrl?[2,v(a,x,m,!1,b,p)]:(a.sourceUrl=k||null,[2,v(a,x,m,!0,b,p)])}})})}function q(b,c,d,h){return k(this,void 0,
void 0,function(){var k,m,q,n,t,w;return l(this,function(l){switch(l.label){case 0:k=d?e.removeFile(d):e.appBaseUrl;b.styleBase=k;b.style=c;b.styleUrl&&f(b.styleUrl);m=[];if(!c.sources||!c.sources.esri)return[3,3];q=c.sources.esri;return q.url?[4,p(b,"esri",a(k,q.url),void 0,h)]:[3,2];case 1:return l.sent(),[3,3];case 2:m.push(p(b,"esri",q,k,h)),l.label=3;case 3:n=0;for(t=Object.keys(c.sources);n<t.length;n++)w=t[n],"esri"!==w&&"vector"===c.sources[w].type&&(c.sources[w].url?m.push(p(b,w,a(k,c.sources[w].url),
void 0,h)):m.push(p(b,w,c.sources[w],k,h)));return[4,g.all(m)];case 4:return l.sent(),[2]}})})}function v(b,d,h,m,u,q){return k(this,void 0,void 0,function(){var k,n,z,t;return l(this,function(l){k=h?e.removeTrailingSlash(h)+"/":e.appBaseUrl;l=k;if(d.hasOwnProperty("tileInfo"))n=d;else{for(var w={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},v=78271.51696400007,B=2.958287637957775E8,x=[],y=d.hasOwnProperty("minzoom")?
parseFloat(d.minzoom):0,r=d.hasOwnProperty("maxzoom")?parseFloat(d.maxzoom):16,C=0;C<=r;C++)C>=y&&x.push({level:C,scale:B,resolution:v}),v/=2,B/=2;v=0;for(B=d.tiles;v<B.length;v++)f(a(l,B[v]));n={capabilities:"TilesOnly",initialExtent:w,fullExtent:w,minScale:x[0].scale,maxScale:x[x.length-1].scale,tiles:d.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:x,spatialReference:{wkid:102100}}}}z=new c(u,k,n);if(!m&&b.primarySourceName in b.sourceNameToSource){t=
b.sourceNameToSource[b.primarySourceName];if(!t.isCompatibleWith(z))return[2,g.resolve()];null!=z.fullExtent&&(null!=t.fullExtent?t.fullExtent.union(z.fullExtent):t.fullExtent=z.fullExtent.clone());t.tileInfo.lods.length<z.tileInfo.lods.length&&(t.tileInfo=z.tileInfo)}m?(b.sourceBase=k,b.source=d,b.validatedSource=n,b.primarySourceName=u,b.sourceUrl&&f(b.sourceUrl)):f(k);b.sourceNameToSource[u]=z;return b.style?[2]:null==d.defaultStyles?[2,g.reject()]:"string"===typeof d.defaultStyles?[2,p(b,"",a(k,
d.defaultStyles,"root.json"),void 0,q)]:[2,p(b,"",d.defaultStyles,a(k,"root.json"),q)]})})}Object.defineProperty(d,"__esModule",{value:!0});var t=b.defaults&&b.defaults.io.corsEnabledServers;d.loadMetadata=function(b,c){return k(this,void 0,void 0,function(){var d,g,h,k,q,n;return l(this,function(l){switch(l.label){case 0:return d={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:""},g="string"===typeof b?
[b,null]:[null,b.jsonUrl],h=g[0],k=g[1],q=h?e.urlToObject(h):null,[4,p(d,"esri",b,k,c)];case 1:return l.sent(),n={layerDefinition:d.validatedSource,url:h,parsedUrl:q,serviceUrl:d.sourceUrl,style:d.style,styleUrl:d.styleUrl,spriteUrl:d.style.sprite&&a(d.styleBase,d.style.sprite),glyphsUrl:d.style.glyphs&&a(d.styleBase,d.style.glyphs),sourceNameToSource:d.sourceNameToSource,primarySourceName:d.primarySourceName},f(n.spriteUrl),f(n.glyphsUrl),[2,n]}})})}})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TileIndex".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(){function d(a,d,f){this.tileMapURL="";this.fullExtent=this.tileIndex=this.capabilities=this.tileInfo=this.parsedUrl=this.tilemapCache=null;this.name=a;if(this.sourceUrl=d)this.parsedUrl=b.urlToObject(this.sourceUrl);a=k.clone(f);var l=a.tiles;d&&l.forEach(function(a,c){b.isAbsolute(a)||(l[c]=b.join(d,a))});this.tileServers=l;f.tileMap&&(this.tileMapURL=b.join(d,f.tileMap));var p=f.capabilities&&f.capabilities.split(",").map(function(a){return a.toLowerCase().trim()}),
n=!!f.exportTilesAllowed,p=!!p&&-1!==p.indexOf("tilemap"),q=n&&f.hasOwnProperty("maxExportTilesCount")?f.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:n,supportsTileMap:p},exportTiles:n?{maxExportTilesCount:+q}:null};this.tileInfo=g.readServiceTileInfo(a.tileInfo,a,null,{ignoreMinMaxLOD:!0});p&&(this.type="vector-tile",this.tilemapCache=new e({layer:this}),this.tileIndex=new c(this.tilemapCache));this.fullExtent=h.fromJSON(f.fullExtent)}d.prototype.getRefKey=function(a,
b){return l(this,void 0,void 0,function(){return n(this,function(c){return this.tileIndex?[2,this.tileIndex.dataKey(a,b)]:[2,a]})})};d.prototype.getSourceTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};d.prototype.isCompatibleWith=function(a){var b=this.tileInfo;a=a.tileInfo;if(!b.spatialReference.equals(a.spatialReference)||!b.origin.equals(a.origin)||Math.round(b.dpi)!==
Math.round(a.dpi))return!1;b=b.lods;a=a.lods;for(var c=Math.min(b.length,a.length),d=0;d<c;d++){var e=b[d],f=a[d];if(e.level!==f.level||Math.round(e.scale)!==Math.round(f.scale))return!1}return!0};return d}()})},"esri/views/2d/engine/vectorTiles/TileIndex":function(){define(["require","exports","../../../../core/promiseUtils","../../../../layers/support/TilemapCache","../../tiling/TileKey"],function(r,d,n,l,k){return function(){function b(b){if(b instanceof l)this._tilemapCache=b;else if(b&&"index"in
b)this._tilemap=b.index;else throw Error("Invalid tilemap!");}b.prototype.dataKey=function(b,d){if(this._tilemapCache){var e=b.level,c=b.row,f=b.col,a=new k(b);return this._tilemapCache.fetchAvailabilityUpsample(e,c,f,a,d).then(function(){return a}).catch(function(b){if(n.isAbortError(b))throw b;a.level=e;a.row=c;a.col=f;return a})}return this._getIndexedDataKey(b)};b.prototype.forEach=function(b,d,e,c,f){this._callback=f;this._maxLevel=d+b;this._forEach(this._tilemap,d,e,c)};b.prototype._forEach=
function(b,d,e,c){0!==b&&(this._callback(d,e,c),d!==this._maxLevel&&"object"===typeof b&&(this._forEach(b[0],d+1,2*e,2*c),this._forEach(b[1],d+1,2*e,2*c+1),this._forEach(b[2],d+1,2*e+1,2*c),this._forEach(b[3],d+1,2*e+1,2*c+1)))};b.prototype._getIndexedDataKey=function(b){var d=[b];if(0>b.level||0>b.row||0>b.col||0<b.row>>b.level||0<b.col>>b.level)return n.resolve(null);for(;0!==b.level;)b=new k(b.level-1,b.row>>1,b.col>>1,b.world),d.push(b);b=this._tilemap;var e=d.pop(),c,f;if(1===b)return n.resolve(e);
for(;d.length;)if(c=d.pop(),f=(c.col&1)+((c.row&1)<<1),b){if(0===b[f]){e=null;break}if(1===b[f]){e=c;break}e=c;b=b[f]}return n.resolve(e)};return b}()})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.createForItem=function(d){return{origin:"portal-item",url:n.urlToObject(d.itemUrl),portal:d.portal||l.getDefault()}}})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["require",
"exports","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(r,d,n,l){return function(){function d(b,d){this.lockedSchemaPixelSize=b;this.isGCS=d}d.prototype.getLevelRowColumn=function(b){return this.isGCS?[b[0],b[1]>>1,b[2]>>1]:256===this.lockedSchemaPixelSize&&0<b[0]?[b[0]-1,b[1]>>1,b[2]>>1]:b};d.prototype.adjustLevel=function(b){return this.isGCS?b:256===this.lockedSchemaPixelSize?0<b?b-1:0:b};d.prototype.getShift=function(b,d){var g=0,e=0;if(256===this.lockedSchemaPixelSize||
this.isGCS)b[2]%2&&(g=2*d),b[1]%2&&(e=2*d);return[g,e]};d.prototype.getScale=function(b){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 2}else if(256===this.lockedSchemaPixelSize&&0===b)return.5;return 1};d.create256x256CompatibleTileInfo=function(b){if(!b)return null;if(256===b.size[0]&&256===b.size[1])return b;for(var d=b.spatialReference.isGeographic,g=[],e=b.lods.length,c=0;c<e;c++){var f=b.lods[c];g.push(new n({level:f.level,scale:f.scale,resolution:d?f.resolution:2*f.resolution}))}return new l({size:[256,
256],dpi:b.dpi,format:b.format,compressionQuality:b.compressionQuality,origin:b.origin,spatialReference:b.spatialReference,lods:g})};d.create512x512CompatibleTileInfo=function(b){if(!b||256===b.size[0]||256===b.size[1])return null;for(var d=[],g=b.lods.length,e=0;e<g;e++){var c=b.lods[e];d.push(new n({level:c.level,scale:c.scale,resolution:.5*c.resolution}))}return new l({size:[512,512],dpi:b.dpi,format:b.format,compressionQuality:b.compressionQuality,origin:b.origin,spatialReference:b.spatialReference,
lods:d})};return d}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["require","exports","../../../../layers/support/TileInfo"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.areSchemasOverlapping=function(d,k){if(d===k)return!0;if(!d&&null!=k||null!=d&&!k||!d.spatialReference.equals(k.spatialReference)||d.dpi!==k.dpi)return!1;var b=d.origin,h=k.origin;if(1E-6<=Math.abs(b.x-h.x)||1E-6<=Math.abs(b.y-h.y))return!1;d.lods[0].scale>k.lods[0].scale?(b=d,d=k):
b=k;for(k=b.lods[0].scale;k>=d.lods[d.lods.length-1].scale-1E-6;k/=2)if(1E-6>Math.abs(k-d.lods[0].scale))return!0;return!1};d.unionTileInfos=function(d,k){if(d===k)return d;if(!d&&null!=k)return k;if(null!=d&&!k)return d;var b=d.size[0],h=d.format,g=d.dpi,e={x:d.origin.x,y:d.origin.y},c=d.spatialReference.toJSON(),f=d.lods[0].scale>k.lods[0].scale?d.lods[0]:k.lods[0];d=(d.lods[d.lods.length-1].scale<=k.lods[k.lods.length-1].scale?d.lods[d.lods.length-1]:k.lods[k.lods.length-1]).scale;k=[];for(var a=
f.scale,f=f.resolution,l=0;a>d;)k.push({level:l,resolution:f,scale:a}),l++,a/=2,f/=2;return new n({size:[b,b],dpi:g,format:h||"pbf",origin:e,lods:k,spatialReference:c})}})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["require","exports","../../../../../core/has","./StyleLayer"],function(r,d,n,l){return function(){function d(b,h){this._layerByName={};this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=h?h.spriteUrl:b.sprite;this.glyphs=h?h.glyphsUrl:b.glyphs;
if(this.layers=(b.layers||[]).map(d._create))for(b=void 0,h=0;h<this.layers.length;h++)b=this.layers[h],this._layerByName[b.id.toLowerCase()]=b;this._identifyRefLayers()}d.prototype.isPainterDataDriven=function(b){return(b=this._layerByName[b.toLowerCase()])?b.isPainterDataDriven():!1};d.prototype.getStyleLayerId=function(b){return b>=this.layers.length?null:this.layers[b].id};d.prototype.getLayoutProperties=function(b){return(b=this._layerByName[b.toLowerCase()])?b.layout:null};d.prototype.getPaintProperties=
function(b){return(b=this._layerByName[b.toLowerCase()])?b.paint:null};d.prototype.setPaintProperties=function(b,h){b=this._layerByName[b.toLowerCase()];if(!b)return"";var g=this.layers.indexOf(b);this.styleJSON.layers[g].paint=h;h=d._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:h},b);this.layers[g]=h;this._layerByName[b.id.toLowerCase()]=h;return b.id};d.prototype.setLayoutProperties=
function(b,h){b=this._layerByName[b.toLowerCase()];if(!b)return"";var g=this.layers.indexOf(b);this.styleJSON.layers[g].layout=h;h=d._recreateLayer({id:b.id,type:b.typeName,source:b.source,sourceLayer:b["source-layer"],minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:h,paint:b.paint},b);this.layers[g]=h;this._layerByName[b.id.toLowerCase()]=h;return b.id};d.prototype._identifyRefLayers=function(){for(var b=[],d=[],g=0,e=0,c=this.layers;e<c.length;e++){var f=c[e];if(1===f.type){var a=f,k=
f.source+"|"+f.sourceLayer,k=k+("|"+JSON.stringify(f.layout&&f.layout.visibility)),k=k+("|"+JSON.stringify(f.minzoom)),k=k+("|"+JSON.stringify(f.maxzoom)),k=k+("|"+JSON.stringify(f.filter));if(a.hasDataDrivenFill||a.hasDataDrivenOutline)k+="|"+JSON.stringify(g);b.push({key:k,layer:f})}2===f.type&&(a=f,k=f.source+"|"+f.sourceLayer,k+="|"+JSON.stringify(f.layout&&f.layout.visibility),k+="|"+JSON.stringify(f.minzoom),k+="|"+JSON.stringify(f.maxzoom),k+="|"+JSON.stringify(f.filter),k+="|"+JSON.stringify(f.layout&&
f.layout["line-cap"]),k+="|"+JSON.stringify(f.layout&&f.layout["line-join"]),a.hasDataDrivenLine&&(k+="|"+JSON.stringify(g)),d.push({key:k,layer:f}));++g}this._assignRefLayers(b);this._assignRefLayers(d)};d.prototype._assignRefLayers=function(b){b.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var d,g,e=b.length,c=0;c<e;c++){var f=b[c];if(f.key===d)f.layer.refLayerId=g;else if(d=f.key,g=f.layer.id,1===f.layer.type&&!f.layer.getPaintProperty("fill-outline-color"))for(var a=c+1;a<e;a++){var k=
b[a];if(k.key===d){if(k.layer.getPaintProperty("fill-outline-color")){b[c]=k;b[a]=f;g=k.layer.id;break}}else break}}};d._create=function(b,d,g){d=1-1/(g.length+1)*(1+d);switch(b.type){case "background":return new l.BackgroundStyleLayer(0,b,d);case "fill":return new l.FillStyleLayer(1,b,d);case "line":return new l.LineStyleLayer(2,b,d);case "symbol":return new l.SymbolStyleLayer(3,b,d);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new l.CircleStyleLayer(4,b,
d)}throw Error("Unknown vector tile layer");};d._recreateLayer=function(b,d){switch(b.type){case "background":return new l.BackgroundStyleLayer(0,b,d.z);case "fill":return new l.FillStyleLayer(1,b,d.z);case "line":return new l.LineStyleLayer(2,b,d.z);case "symbol":return new l.SymbolStyleLayer(3,b,d.z);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new l.CircleStyleLayer(4,b,d.z)}};return d}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,d,a){this.type=b;this.typeName=d.type;this.id=d.id;this.source=d.source;this.sourceLayer=d["source-layer"];this.minzoom=d.minzoom;this.maxzoom=d.maxzoom;this.filter=d.filter;this.layout=d.layout;this.paint=d.paint;this.z=a;switch(b){case 0:this._layoutDefinition=k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=
k.StyleDefinition.fillLayoutDefinition;this._paintDefinition=k.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;this._paintDefinition=k.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=
this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}d.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=l.createFilter(this.filter)};d.prototype.getLayoutProperty=function(b){var c=this._layoutProperties;if(c)return c[b]};d.prototype.getPaintProperty=function(b){var c=this._paintProperties;if(c)return c[b]};d.prototype.getLayoutValue=function(b,d,a){var c,e=this._layoutProperties;e&&(e=e[b])&&(c=e.getValue(d,
a));b=this._layoutDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};d.prototype.getPaintValue=function(b,d,a){var c,e=this._paintProperties;e&&(e=e[b])&&(c=e.getValue(d,a));b=this._paintDefinition[b];void 0===c&&(c=b["default"]);"enum"===b.type&&(c=b.values.indexOf(c));return c};d.prototype.isPainterDataDriven=function(){var b=this._paintProperties;if(b)for(var d in b)if(b[d].isDataDriven)return!0;return!1};d.prototype._parseLayout=function(c){var d={},
a;for(a in c){var e=this._layoutDefinition[a];e&&(d[a]=new b(a,e,c[a]))}return d};d.prototype._parsePaint=function(c){var d={},a;for(a in c){var e=this._paintDefinition[a];e&&(d[a]=new b(a,e,c[a]))}return d};return d}();d.StyleLayer=r;var g=function(b){function c(c,a,d){return b.call(this,c,a,d)||this}n(c,b);return c}(r);d.BackgroundStyleLayer=g;g=function(b){function c(c,a,d){c=b.call(this,c,a,d)||this;a=c.getPaintProperty("fill-color");c.hasDataDrivenColor=a?a.isDataDriven:!1;a=c.getPaintProperty("fill-opacity");
c.hasDataDrivenOpacity=a?a.isDataDriven:!1;c.hasDataDrivenFill=c.hasDataDrivenColor||c.hasDataDrivenOpacity;a=c.getPaintProperty("fill-outline-color");c.outlineUsesFillColor=!a;c.hasDataDrivenOutlineColor=a?a.isDataDriven:!1;c.hasDataDrivenOutline=(a?c.hasDataDrivenOutlineColor:c.hasDataDrivenColor)||c.hasDataDrivenOpacity;return c}n(c,b);return c}(r);d.FillStyleLayer=g;g=function(b){function c(c,a,d){c=b.call(this,c,a,d)||this;d=c.getPaintProperty("line-color");c.hasDataDrivenColor=d?d.isDataDriven:
!1;d=c.getPaintProperty("line-opacity");c.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=c.getPaintProperty("line-width");c.hasDataDrivenWidth=d?d.isDataDriven:!1;c.hasDataDrivenLine=c.hasDataDrivenColor||c.hasDataDrivenOpacity||c.hasDataDrivenWidth;a=a.paint["line-width"];a||(a=k.StyleDefinition.linePaintDefinition["line-width"].default);c.isThinLine=!c.hasDataDrivenWidth&&"number"===typeof a&&a<h.THIN_LINE_THRESHOLD;return c}n(c,b);return c}(r);d.LineStyleLayer=g;g=function(b){function c(c,a,d){c=b.call(this,
c,a,d)||this;a=c.getPaintProperty("icon-color");c.hasDataDrivenIconColor=a?a.isDataDriven:!1;a=c.getPaintProperty("icon-opacity");c.hasDataDrivenIconOpacity=a?a.isDataDriven:!1;a=c.getLayoutProperty("icon-size");c.hasDataDrivenIconSize=a?a.isDataDriven:!1;c.hasDataDrivenIcon=c.hasDataDrivenIconColor||c.hasDataDrivenIconOpacity||c.hasDataDrivenIconSize;a=c.getPaintProperty("text-color");c.hasDataDrivenTextColor=a?a.isDataDriven:!1;a=c.getPaintProperty("text-opacity");c.hasDataDrivenTextOpacity=a?a.isDataDriven:
!1;a=c.getLayoutProperty("text-size");c.hasDataDrivenTextSize=a?a.isDataDriven:!1;c.hasDataDrivenText=c.hasDataDrivenTextColor||c.hasDataDrivenTextOpacity||c.hasDataDrivenTextSize;return c}n(c,b);return c}(r);d.SymbolStyleLayer=g;r=function(b){function c(c,a,d){c=b.call(this,c,a,d)||this;a=c.getPaintProperty("circle-radius");c.hasDataDrivenRadius=a?a.isDataDriven:!1;a=c.getPaintProperty("circle-color");c.hasDataDrivenColor=a?a.isDataDriven:!1;a=c.getPaintProperty("circle-opacity");c.hasDataDrivenOpacity=
a?a.isDataDriven:!1;a=c.getPaintProperty("circle-stroke-width");c.hasDataDrivenStrokeWidth=a?a.isDataDriven:!1;a=c.getPaintProperty("circle-stroke-color");c.hasDataDrivenStrokeColor=a?a.isDataDriven:!1;a=c.getPaintProperty("circle-stroke-opacity");c.hasDataDrivenStrokeOpacity=a?a.isDataDriven:!1;a=c.getPaintProperty("circle-blur");c.hasDataDrivenBlur=a?a.isDataDriven:!1;return c}n(c,b);return c}(r);d.CircleStyleLayer=r;r=function(){return function(b,c,d){this.cap=b.getLayoutValue("line-cap",c,d);
this.join=b.getLayoutValue("line-join",c,d);this.miterLimit=b.getLayoutValue("line-miter-limit",c,d);this.roundLimit=b.getLayoutValue("line-round-limit",c,d)}}();d.LineLayout=r;r=function(){return function(b,c,d,a){this.allowOverlap=b.getLayoutValue("icon-allow-overlap",c,a);this.ignorePlacement=b.getLayoutValue("icon-ignore-placement",c,a);this.optional=b.getLayoutValue("icon-optional",c,a);this.rotationAlignment=b.getLayoutValue("icon-rotation-alignment",c,a);this.size=b.getLayoutValue("icon-size",
c,a);this.rotate=b.getLayoutValue("icon-rotate",c,a);this.padding=b.getLayoutValue("icon-padding",c,a);this.keepUpright=b.getLayoutValue("icon-keep-upright",c,a);this.offset=b.getLayoutValue("icon-offset",c,a);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();d.IconLayout=r;r=function(){return function(b,c,d,a){this.allowOverlap=b.getLayoutValue("text-allow-overlap",c,a);this.ignorePlacement=b.getLayoutValue("text-ignore-placement",c,a);this.optional=b.getLayoutValue("text-optional",
c,a);this.rotationAlignment=b.getLayoutValue("text-rotation-alignment",c,a);this.fontArray=b.getLayoutValue("text-font",c,a);this.maxWidth=b.getLayoutValue("text-max-width",c,a);this.lineHeight=b.getLayoutValue("text-line-height",c,a);this.letterSpacing=b.getLayoutValue("text-letter-spacing",c,a);this.justify=b.getLayoutValue("text-justify",c,a);this.anchor=b.getLayoutValue("text-anchor",c,a);this.maxAngle=b.getLayoutValue("text-max-angle",c,a);this.size=b.getLayoutValue("text-size",c,a);this.rotate=
b.getLayoutValue("text-rotate",c,a);this.padding=b.getLayoutValue("text-padding",c,a);this.keepUpright=b.getLayoutValue("text-keep-upright",c,a);this.transform=b.getLayoutValue("text-transform",c,a);this.offset=b.getLayoutValue("text-offset",c,a);2===this.rotationAlignment&&(this.rotationAlignment=d?0:1)}}();d.TextLayout=r})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["require","exports"],function(r,d){return function(){function d(l,k,b){this._op=l;"$type"===k?(this._val=b instanceof
Array?b.map(function(b){return d._types.indexOf(b)}):d._types.indexOf(b),this._op+=11):(this._key=k,this._val=b)}d.prototype.filter=function(d){switch(this._op){case 0:return this._val;case 1:return d.values[this._key]===this._val;case 2:return d.values[this._key]!==this._val;case 3:return d.values[this._key]<this._val;case 4:return d.values[this._key]>this._val;case 5:return d.values[this._key]<=this._val;case 6:return d.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(d.values[this._key]);
case 8:return-1===this._val.indexOf(d.values[this._key]);case 9:for(var k=0,b=this._val;k<b.length;k++){var h=b[k];if(h.filter(d))return!0}return!1;case 10:k=0;for(b=this._val;k<b.length;k++)if(h=b[k],!h.filter(d))return!1;return!0;case 11:k=0;for(b=this._val;k<b.length;k++)if(h=b[k],h.filter(d))return!1;return!0;case 12:return d.type===this._val;case 13:return d.type!==this._val;case 14:return d.type<this._val;case 15:return d.type>this._val;case 16:return d.type>=this._val;case 17:return d.type<=
this._val;case 18:return-1!==this._val.indexOf(d.type);case 19:return-1===this._val.indexOf(d.type);case 20:return void 0!==d.values[this._key];case 21:return void 0===d.values[this._key]}};d.createFilter=function(l){if(!l)return new d(0,void 0,!0);var k=l[0];if(1>=l.length)return new d(0,void 0,"any"!==k);switch(k){case "\x3d\x3d":return new d(1,l[1],l[2]);case "!\x3d":return new d(2,l[1],l[2]);case "\x3e":return new d(4,l[1],l[2]);case "\x3c":return new d(3,l[1],l[2]);case "\x3e\x3d":return new d(6,
l[1],l[2]);case "\x3c\x3d":return new d(5,l[1],l[2]);case "in":return new d(7,l[1],l.slice(2));case "!in":return new d(8,l[1],l.slice(2));case "any":return new d(9,void 0,l.slice(1).map(d.createFilter.bind(this)));case "all":return new d(10,void 0,l.slice(1).map(d.createFilter.bind(this)));case "none":return new d(11,void 0,l.slice(1).map(d.createFilter.bind(this)));case "has":return new d(20,l[1],void 0);case "!has":return new d(21,l[1],void 0);default:throw Error("invalid operator: "+k);}};d._types=
["Unknown","Point","LineString","Polygon"];return d}()})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){}d.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.lineLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};d.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",
default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},
"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",
default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};d.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};d.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",
default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};d.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};d.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},
"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,
default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};d.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},
"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};d.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],
default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return d}();d.StyleDefinition=r})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../../../Color","../GeometryUtils"],function(r,d,n,l){return function(){function d(b,h,g){this.isDataDriven=!1;switch(h.type){case "number":b=!0;break;case "color":b=
!0;g=d._parseColor(g);break;case "array":b="number"===h.value;break;default:b=!1}null==g&&(g=h.default);b&&"interval"===g.type&&(b=!1);var e=g&&g.stops&&0<g.stops.length;if(e)for(var c=0,f=g.stops;c<f.length;c++){var a=f[c];a[1]=this._validate(a[1],h)}if(this.isDataDriven=g?!!g.property:!1)if(void 0!==g.default&&(g.default=this._validate(g.default,h)),e)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,h);break;case "categorical":this.getValue=this._buildCategorical(g,h);break;default:this.getValue=
b?this._buildInterpolate(g,h):this._buildInterval(g,h)}else this.getValue=this._buildIdentity(g,h);else e?this.getValue=b?this._buildZoomInterpolate(g):this._buildZoomInterval(g):(g=this._validate(g,h),this.getValue=this._buildSimple(g))}d.prototype._validate=function(b,d){if("number"===d.type){if(b<d.minimum)return d.minimum;if(b>d.maximum)return d.maximum}return b};d.prototype._buildSimple=function(b){return function(){return b}};d.prototype._buildIdentity=function(b,h){var g=this;return function(e,
c){var f;c&&(f=c.values[b.property],"color"===h.type&&(f=d._parseColor(f)));void 0===f&&(f=b.default);return void 0!==f?g._validate(f,h):h.default}};d.prototype._buildCategorical=function(b,d){var g=this;return function(e,c){var f;c&&(f=c.values[b.property]);f=g._categorical(f,b.stops);return void 0!==f?f:void 0!==b.default?b.default:d.default}};d.prototype._buildInterval=function(b,d){var g=this;return function(e,c){var f;c&&(f=c.values[b.property]);return"number"===typeof f?g._interval(f,b.stops):
void 0!==b.default?b.default:d.default}};d.prototype._buildInterpolate=function(b,d){var g=this;return function(e,c){var f;c&&(f=c.values[b.property]);return"number"===typeof f?g._interpolate(f,b.stops,b.base||1):void 0!==b.default?b.default:d.default}};d.prototype._buildZoomInterpolate=function(b){var d=this;return function(g){return d._interpolate(g,b.stops,b.base||1)}};d.prototype._buildZoomInterval=function(b){var d=this;return function(g){return d._interval(g,b.stops)}};d.prototype._categorical=
function(b,d){for(var g=d.length,e=0;e<g;e++)if(d[e][0]===b)return d[e][1]};d.prototype._interval=function(b,d){for(var g=d.length,e=0,c=0;c<g;c++)if(d[c][0]<=b)e=c;else break;return d[e][1]};d.prototype._interpolate=function(b,d,g){for(var e,c,f=d.length,a=0;a<f;a++){var h=d[a];if(h[0]<=b)e=h;else{c=h;break}}if(e&&c){a=c[0]-e[0];b-=e[0];g=1===g?b/a:(Math.pow(g,b)-1)/(Math.pow(g,a)-1);if(Array.isArray(e[1])){e=e[1];c=c[1];b=[];for(a=0;a<e.length;a++)b.push(l.interpolate(e[a],c[a],g));return b}return l.interpolate(e[1],
c[1],g)}if(e)return e[1];if(c)return c[1]};d._isEmpty=function(b){for(var d in b)if(b.hasOwnProperty(d))return!1;return!0};d._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){if(b=new n(b),!this._isEmpty(b))return n.toUnitRGBA(b)}else return b&&b.default&&(b.default=d._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(function(b){return[b[0],d._parseColor(b[1])]})),b};return d}()})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["require","exports"],
function(r,d){function n(d,b){d%=b;return 0<=d?d:d+b}Object.defineProperty(d,"__esModule",{value:!0});d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var l=1/Math.LN2;d.positiveMod=n;d.radToByte=function(k){return n(k*d.C_RAD_TO_256,256)};d.degToByte=function(k){return n(k*d.C_DEG_TO_256,256)};d.log2=function(d){return Math.log(d)*
l};d.sqr=function(d){return d*d};d.interpolate=function(d,b,h){return d*(1-h)+b*h};d.between=function(d,b,h){return d>=b&&d<=h||d>=h&&d<=b}})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.WEBGL_MAX_STOPS=8;d.WEBGL_MAX_INNER_STOPS=d.WEBGL_MAX_STOPS-2;d.NAN_MAGIC_NUMBER=1E-30;d.EXTRUDE_SCALE=64;d.PICTURE_FILL_COLOR=4294967295;d.TILE_SIZE=512;d.ANGLE_FACTOR_256=256/360;d.DEBUG_LABELS=!1;d.COLLISION_BUCKET_SIZE=
128;d.DOT_DENSITY_MAX_FIELDS=8;d.COLLISION_MAX_ZOOM_DELTA=3;d.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;d.COLLISION_BOX_PADDING=8;d.COLLISION_TILE_BOX_SIZE=d.TILE_SIZE/d.COLLISION_BUCKET_SIZE;d.COLLISION_PLACEMENT_PADDING=8;d.HEURISTIC_GLYPHS_PER_LINE=50;d.HEURISTIC_GLYPHS_PER_FEATURE=10;d.GLYPH_SIZE=24;d.TEXT_LINE_HEIGHT=1.2*d.GLYPH_SIZE;d.TEXT_MAX_WIDTH=10*d.GLYPH_SIZE;d.TEXT_SPACING=0;d.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};d.ATTRIBUTE_STORE_TEXTURE_SIZE=
1024;d.TEXTURE_BINDING_SPRITE_ATLAS=0;d.TEXTURE_BINDING_GLYPH_ATLAS=0;d.TEXTURE_BINDING_HIGHLIGHT_0=2;d.TEXTURE_BINDING_HIGHLIGHT_1=3;d.TEXTURE_BINDING_ATTRIBUTE_DATA_0=4;d.TEXTURE_BINDING_ATTRIBUTE_DATA_1=5;d.TEXTURE_BINDING_ATTRIBUTE_DATA_2=6;d.TEXTURE_BINDING_RENDERER_0=7;d.TEXTURE_BINDING_RENDERER_1=8;d.MAX_FILTERS=2;d.FILTER_FLAG_0=1;d.EFFECT_FLAG_0=2;d.THIN_LINE_THRESHOLD=2.5})},"esri/views/3d/terrain/terrainUtilsPlanar":function(){define("require exports ../../../core/Error ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingRect ./TerrainConst ./TilingScheme".split(" "),
function(r,d,n,l,k,b,h,g){function e(a,b,d,e){l.vec3.copy(c,d);c[e]=b[e];e=l.vec3.subtract(c,c,b);var g=l.vec3.subtract(f,a,b),g=l.vec3.dot(g,e),h=l.vec3.dot(e,e);b=0>=g?b:h<=g?d:l.vec3.add(c,b,l.vec3.scale(e,e,g/h));a=l.vec3.subtract(c,a,b);return Math.PI/2-Math.atan(a[2]/Math.sqrt(a[0]*a[0]+a[1]*a[1]))}Object.defineProperty(d,"__esModule",{value:!0});var c=k.vec3f64.create(),f=k.vec3f64.create(),a=k.vec3f64.create(),p=k.vec3f64.create();d.isInsideExtent=function(a,c,d){void 0===d&&(d=0);a=a.extent;
return 0===d?b.containsPoint(a,c):b.containsPointWithMargin(a,c,d*Math.min(a[2]-a[0],a[3]-a[1]))};d.tiltOnEdge=e;d.tiltToExtentEdge=function(b,c){var d=b.getElevationBounds();b=b.extent;d=.5*(d[0]+d[1]);a[0]=b[0];a[1]=b[1];a[2]=d;p[0]=b[2];p[1]=b[3];p[2]=d;b=d=Infinity;c[0]<a[0]?d=e(c,a,p,0):c[0]>p[0]&&(d=e(c,p,a,0));c[1]<a[1]?b=e(c,a,p,1):c[1]>p[1]&&(b=e(c,p,a,1));return Math.min(d,b)};d.checkIfTileInfoSupportedForViewSR=function(a,c,d){if(a.spatialReference.isGeographic)return new n("tilingscheme:local-gcs-not-supported",
"Geographic coordinate systems are not supported in local scenes");var e=g.checkUnsupported(a);if(e)return e;var f=a.lods,e=f[0].resolution*Math.pow(2,f[0].level),k=[e*a.size[0],e*a.size[1]],l=[a.origin.x,a.origin.y];c=b.fromExtent(c);var p=b.create();g.computeRowColExtent(c,k,l,p);k=(p[2]-p[0])*(p[3]-p[1]);k>h.MAX_ROOT_TILES?(f=f[0].scale*Math.pow(2,f[0].level),e=Math.max((c[3]-c[1])/a.size[1],(c[2]-c[0])/a.size[0])*f/e,c=Math.floor(Math.log(e)/Math.log(10)),e=Math.ceil(e/Math.pow(10,c))*Math.pow(10,
c),e=new n("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(f).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+e.toLocaleString()+".",{level0Scale:f,suggestedLevel0Scale:e,requiredNumRootTiles:k,allowedNumRootTiles:h.MAX_ROOT_TILES})):e=null;return e?e:d&&!a.spatialReference.equals(d)?new n("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}})},"esri/views/3d/terrain/terrainUtilsSpherical":function(){define(["require",
"exports","../../../core/Error","../support/projectionUtils","./TilingScheme"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.isInsideExtent=function(b,d,g){void 0===g&&(g=0);return!0};d.tiltToExtentEdge=function(b,d){return 0};d.checkIfTileInfoSupportedForViewSR=function(b,d,g){d=b.lods.length-1;if(b.spatialReference.isWebMercator){if(!k.makeWebMercatorAuxiliarySphere(d).compatibleWith(b))return new n("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else if(l.canProjectToWGS84ComparableLonLat(b.spatialReference)){if(!k.makeGCSWithTileSize(b.spatialReference,
b.size[1],d).compatibleWith(b))return b.spatialReference.isWGS84?new n("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new n("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}else return new n("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(g&&!b.spatialReference.equals(g))return new n("tilingscheme:spatial-reference-mismatch",
"The tiling scheme does not match the spatial reference of the global scene")}})},"esri/views/3d/terrain/TilePerLayerInfo":function(){define(["require","exports","./TerrainConst","./TileAgent","./tileUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(b,d){this._pool=d;this.waitingAgents=[];this.requestAbort=this.requestPromise=this.loadingAgent=this._upsampleFromTile=this.tilemapRequestAbort=this.tilemapRequestPromise=this.tilemap=this.data=null;this.pendingUpdates=
0;this.elevationBounds=void 0;this.init(b)}b.prototype.init=function(b){this.waitingAgents.length=0;this.data=null;this.dataInvalidated=this.dataMissing=!1;this.tilemapRequestAbort=this.tilemapRequestPromise=this.tilemap=null;this._unsetUpsampleInfo();this.requestAbort=this.requestPromise=this.loadingAgent=null;this.pendingUpdates=0;b===n.LayerClass.ELEVATION&&(this.elevationBounds=null)};b.prototype.invalidateSourceData=function(){this.tilemap=null;this.dataInvalidated=!0;this.dataMissing=!1;this._unsetUpsampleInfo()};
b.prototype.abortRequest=function(){this.requestPromise&&(this.requestAbort.abort(),this.requestAbort=this.requestPromise=null)};b.prototype.abortTilemapRequest=function(){this.tilemapRequestPromise&&(this.tilemapRequestAbort.abort(),this.tilemapRequestAbort=this.tilemapRequestPromise=null)};b.prototype.dispose=function(){this.loadingAgent&&this.loadingAgent!==l.DONE&&(this.loadingAgent.dispose(),this.loadingAgent=null);this.abortRequest();this.abortTilemapRequest();this.tilemap=null;this._unsetUpsampleInfo();
this.pendingUpdates=0;this.disposeData()};b.prototype.disposeData=function(){this.data&&this.data.hasOwnProperty("dispose")&&this.data.dispose();this.data=null};Object.defineProperty(b.prototype,"upsampleFromTile",{get:function(){return this._upsampleFromTile},enumerable:!0,configurable:!0});b.prototype._unsetUpsampleInfo=function(){this._upsampleFromTile&&(this._pool.release(this._upsampleFromTile),this._upsampleFromTile=null)};b.prototype.setUpsampleInfo=function(b,d){if(b===d||null==d)this._unsetUpsampleInfo();
else{if(null==this._upsampleFromTile)this._upsampleFromTile=this._pool.acquire();else if(this._upsampleFromTile.tile===d)return;k.computeUpsampleInfo(b,d,this._upsampleFromTile)}};b.makeEmptyLayerInfo=function(d,g,e){return e?(e.init(d),e):new b(d,g)};return b}();d.TilePerLayerInfo=r})},"esri/views/3d/terrain/SphericalPatch":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../support/earthUtils ../support/geometryUtils ../support/mathUtils ../support/projectionUtils ./PatchGeometryFactory ./Tile".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){return function(a){function d(b,c,e){var f=a.call(this,d.NumSubdivisionsAtLevel)||this;f.obb=Array(8);f.isWebMercator=!1;for(var g=0;8>g;g++)f.obb[g]=k.vec3f64.create();void 0!==b&&f.init(b,c,e);return f}n(d,a);d.prototype.init=function(c,d,f){a.prototype.init.call(this,c,d,f);this.isWebMercator=f.tilingScheme.spatialReference.isWebMercator;d=this.extentInRadians[0];f=this.extentInRadians[1];var h=this.extentInRadians[2],p=this.extentInRadians[3];c=c[0];var n=g.lerp(f,
p,.5),m=g.lerp(d,h,.5);this.edgeLen=(h-d)*Math.cos(0===c?0:Math.min(Math.abs(f),Math.abs(p)))*b.earthRadius;this.edgeLen2=this.edgeLen*this.edgeLen;this.curvatureHeight=b.earthRadius-Math.sqrt(b.earthRadius*b.earthRadius-this.edgeLen2/4);e.wgs84ComparableLonLatToECEF(this.centerAtSeaLevel,m,n,0);d=k.vec3f64.fromArray(this.centerAtSeaLevel);l.vec3.normalize(d,this.centerAtSeaLevel);this.up=d;this._updateOBB();this.updateRadiusAndCenter()};d.prototype.updateRadiusAndCenter=function(){if(0===this.lij[0])l.vec3.set(this.center,
0,0,0),this.radius=b.earthRadius+this.elevationBounds[1];else{a.prototype.updateRadiusAndCenter.call(this);var c=Math.max(l.vec3.squaredDistance(this.center,this.obb[0]),l.vec3.squaredDistance(this.center,this.obb[1]));this.radius=Math.sqrt(c)}};d.prototype._isVisible=function(){if(!this.intersectsClippingArea)return!1;var a=this.surface.frustum.planes;if(10>this.lij[0])return h.frustum.intersectsSphere(a,h.sphere.wrap(this.radius,this.center));for(var b=this.obb,c=0;6>c;c++){for(var d=void 0,d=0;8>
d&&!h.plane.isPointOutside(a[c],b[d]);d++);if(8===d)return!1}return!0};d.prototype.computeElevationBounds=function(){a.prototype.computeElevationBounds.call(this);this._updateOBB()};d.prototype.createGeometry=function(a,b,d){var e=this._isPole(this.lij[1],this.lij[0]);c.createSphericalGlobePatch(a,this.extent,b,this.renderData,d,this.extentInRadians,this.isWebMercator,e);this.updateMemoryUsed()};d.prototype._updateOBB=function(){for(var a=this.extentInRadians,c=this.obb,d=0;2>d;d++){var f=this.elevationBounds[d],
g=4*d;e.wgs84ComparableLonLatToECEF(c[g++],a[0],a[1],f);e.wgs84ComparableLonLatToECEF(c[g++],a[0],a[3],f);e.wgs84ComparableLonLatToECEF(c[g++],a[2],a[3],f);e.wgs84ComparableLonLatToECEF(c[g++],a[2],a[1],f)}this.isWebMercator&&(a=this._isPole(this.lij[1],this.lij[0]),2===a?(l.vec3.set(c[1],0,0,b.earthRadius),l.vec3.set(c[2],0,0,b.earthRadius),l.vec3.set(c[5],0,0,b.earthRadius),l.vec3.set(c[6],0,0,b.earthRadius)):1===a&&(l.vec3.set(c[0],0,0,-b.earthRadius),l.vec3.set(c[3],0,0,-b.earthRadius),l.vec3.set(c[4],
0,0,-b.earthRadius),l.vec3.set(c[7],0,0,-b.earthRadius)))};d.prototype._isPole=function(a,b){var c=0;a===(1<<b)-1&&(c+=1);0===a&&(c+=2);return c};d.NumSubdivisionsAtLevel=[128,64,32,16,16,8,8,4];return d}(f)})},"esri/views/3d/terrain/SurfaceExtentHelper":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../../../geometry/support/aaBoundingRect ../../../geometry/support/webMercatorUtils ./TerrainConst ./terrainUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){function a(a,b){a&&!a.spatialReference.equals(b)&&(a=e.canProject(a.spatialReference,b)?e.project(a,b):null);return a}Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function d(a){a=c.call(this,a)||this;a._changeListeners=new b;return a}n(d,c);d.prototype.initialize=function(){var a=this;this._changeListeners.add([this.layerViews.on("change",function(){return a.notifyChange("stencilEnabledExtents")})])};d.prototype.destroy=function(){this._changeListeners.destroy();
this._changeListeners=null};Object.defineProperty(d.prototype,"layerViewsExtent",{get:function(){return this._computeLayerViewsExtent()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tiledLayersExtent",{get:function(){return this._computeTiledLayersExtent()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stencilEnabledExtents",{get:function(){return this._computeStencilEnabledExtents(this.layerViews,this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"spatialReference",{set:function(a){this.tilingScheme||this._set("spatialReference",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tilingScheme",{set:function(a){this._set("tilingScheme",a);this._set("spatialReference",a.spatialReference)},enumerable:!0,configurable:!0});d.prototype._computeStencilEnabledExtents=function(b,c){var d=[],e=0;for(b=b.items;e<b.length;e++){var f=b[e].layer;"IntegratedMeshLayer"===f.operationalLayerType&&null!=c&&(f=a(f.fullExtent,c),null!=f&&d.push(g.fromExtent(f)))}return d};
l([h.property({readOnly:!0})],d.prototype,"layerViewsExtent",null);l([h.property({readOnly:!0,dependsOn:["spatialReference","tilingScheme"]})],d.prototype,"tiledLayersExtent",null);l([h.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"stencilEnabledExtents",null);l([h.property()],d.prototype,"spatialReference",null);l([h.property()],d.prototype,"tilingScheme",null);l([h.property()],d.prototype,"defaultTiledLayersExtent",void 0);l([h.property({constructOnly:!0})],d.prototype,"layers",
void 0);l([h.property({constructOnly:!0})],d.prototype,"layerViews",void 0);return d=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperBase")],d)}(h.declared(k));k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype._computeLayerViewsExtent=function(){return this._getGlobalExtent()};b.prototype._computeTiledLayersExtent=function(){return this._getGlobalExtent()};b.prototype._getGlobalExtent=function(){return this.spatialReference.isWebMercator?c.WEBMERCATOR_WORLD_EXTENT:
c.GEOGRAPHIC_WORLD_EXTENT};l([h.property({dependsOn:["spatialReference"]})],b.prototype,"layerViewsExtent",void 0);return b=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperGlobal")],b)}(h.declared(r));d.SurfaceExtentHelperGlobal=k;r=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);c.prototype.initialize=function(){var a=this;this._changeListeners.add([this.layers.on("change",function(){return a.notifyChange("tiledLayersExtent")}),this.layerViews.on("change",function(){return a.notifyChange("layerViewsExtent")})])};
c.prototype._computeLayerViewsExtent=function(){var b=g.empty(),c=this.spatialReference;this.layerViews.forEach(function(d){d.isResolved()&&(d=d.fullExtentInLocalViewSpatialReference||d.layer.fullExtent,(d=a(d,c))&&g.expand(b,d))});var d=g.allFinite(b)?b:null,e=this._get("layerViewsExtent");return g.equals(d,e)?e:d};c.prototype._computeTiledLayersExtent=function(){var a=this.tilingScheme;if(!a)return null;var b=this.spatialReference,c=g.empty();this.layers.forEach(function(d){if(d.loaded&&f.isTiledLayer(d)){var e=
f.getTiledLayerInfo(d,b,"local");d=e.tileInfo;e=e.fullExtent;d&&a.compatibleWith(d)&&e&&e.spatialReference.equals(b)&&g.expand(c,e)}});this.defaultTiledLayersExtent&&g.expand(c,this.defaultTiledLayersExtent);var d=g.allFinite(c)?c:null,e=this._get("tiledLayersExtent");return g.equals(d,e)?e:d};return c=l([h.subclass("esri.views.3d.terrain.SurfaceExtentHelperLocal")],c)}(h.declared(r));d.SurfaceExtentHelperLocal=r})},"esri/views/3d/terrain/SurfaceTilingSchemeLogic":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/accessorSupport/decorators ../support/projectionUtils ./terrainUtils ./TilingScheme".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this,a)||this;a._changeHandles=new b;return a}n(a,d);a.prototype.initialize=function(){var a=this;this._changeHandles.add(this.layers.on("change",function(){return a._update()}));this._changeHandles.add(this.extentHelper.watch("layerViewsExtent",function(){return a._setAdHocTilingScheme()}));this._update();this.tilingSchemeLocked||this._setAdHocTilingScheme()};a.prototype.destroy=function(){this._changeHandles.destroy();this._changeHandles=
null};a.prototype._update=function(){var a=this;this._waitTask=null;if(!this.tilingSchemeLocked){this._set("tilingSchemeDone",!1);var b=this.layers.find(function(b){return e.isTiledLayer(b)?b.isFulfilled()?b.isRejected()?!1:!!e.getTiledLayerInfo(b,a.viewSpatialReference,a.manifold).tileInfo:!0:!1});if(b)if(b.isResolved()){var d=e.getTiledLayerInfo(b,this.viewSpatialReference,this.manifold).tileInfo,d=new c(d),b=e.getKnownTiledServiceLevelCap(b.url);Infinity>b&&d.capMaxLod(b);this._set("tilingSchemeDone",
!0);this._lockTilingScheme(d)}else this._updateWhen(b);else this._set("tilingSchemeDone",!0)}};a.prototype._updateWhen=function(a){var b=this,c=a.when().catch(function(a){return a}).then(function(){c===b._waitTask&&b._update()});this._waitTask=c};a.prototype._lockTilingScheme=function(a){var b=this;if("spherical"===this.manifold){var d=a.levels.length-1;a.spatialReference.isWebMercator?a=c.makeWebMercatorAuxiliarySphere(d):g.canProjectToWGS84ComparableLonLat(a.spatialReference)&&(a=c.makeGCSWithTileSize(a.spatialReference,
a.pixelSize[0],d))}this.tilingSchemeLocked=!0;this.tilingScheme=a;this.extentHelper.tilingScheme=this.tilingScheme;this._updateTiledLayerExtent();this._changeHandles.removeAll();this._changeHandles.add(this.extentHelper.watch("tiledLayersExtent",function(){return b._updateTiledLayerExtent()}))};a.prototype._updateTiledLayerExtent=function(){this.extent=this.extentHelper.tiledLayersExtent};a.prototype._setAdHocTilingScheme=function(){if("spherical"===this.manifold){var a=this.extentHelper.spatialReference;
a.isWebMercator?this.tilingScheme=c.WebMercatorAuxiliarySphere:g.canProjectToWGS84ComparableLonLat(a)&&(this.tilingScheme=c.makeGCSWithTileSize(a,256));this.extent=this.extentHelper.layerViewsExtent}else if(a=this.extentHelper.layerViewsExtent)this.tilingScheme=c.fromExtent(a,this.extentHelper.spatialReference),this.extent=a};l([h.property()],a.prototype,"tilingScheme",void 0);l([h.property()],a.prototype,"extent",void 0);l([h.property({value:!1})],a.prototype,"tilingSchemeLocked",void 0);l([h.property({readOnly:!0,
value:!1})],a.prototype,"tilingSchemeDone",void 0);l([h.property({constructOnly:!0})],a.prototype,"viewSpatialReference",void 0);l([h.property({constructOnly:!0})],a.prototype,"layers",void 0);l([h.property({constructOnly:!0})],a.prototype,"extentHelper",void 0);l([h.property({constructOnly:!0})],a.prototype,"manifold",void 0);return a=l([h.subclass("esri.views.3d.terrain.SurfaceTilingSchemeLogic")],a)}(h.declared(k))})},"esri/views/3d/terrain/TerrainRenderer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../Color ../../../core/maybe ../../../core/ObjectPool ../../../core/PooledArray ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingBox ../support/imageUtils ../support/buffer/BufferView ./PatchGeometryFactory ./PatchRenderData ./TerrainConst ./TileRenderer ./tileUtils ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/intersectorUtils ../webgl-engine/lib/screenSizePerspectiveUtils ../webgl-engine/lib/tracer ../webgl-engine/lib/Util ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/TerrainRendererPrograms ../../webgl/renderState ../../webgl/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){var S=L.assert,P=c.mat4f64.create(),V=f.vec2f64.create(),T=t.create(),Z=v.vec4f64.create(),Q=v.vec4f64.create(),J=v.vec4f64.create(),R=function(){return function(){this.extent=v.vec4f64.create();this.maxLevel=this.minLevel=0;this.callback=null}}();r=function(){function c(a,b){this._memCache=b;this.tileSize=256;this.rctx=null;this.renderDataPool=new h(m.PatchRenderData);this.patchGroups=new g({allocator:function(a){return a||
{root:null,origin:null,patches:new g}},deallocator:function(a){a.root=null;a.origin=null;a.patches.clear();return a}});this.patchGroupsDirty=!0;this.patchGroupsMap=new Map;this.tileIterator=new B.IteratorPreorder;this.highestVisibleLODTile=null;this.visible=!0;this.debugScreenSizePerspective=!1;this.wireframe=K.copyParameters(U);this._opaque=!0;this._skirtScale=1;this.backfaceCullingEnabled=this._renderingDisabled=this._renderPatchBorders=!1;this._renderOrder=u.RenderOrder.FRONT_TO_BACK;this._velvetOvergroundEnabled=
!0;this._slicePlaneEnabled=this.hasOverlays=!1;this.castShadows=!0;this.receiveShadows=!1;this.tileRenderer=this.emptyTex=null;this.tileBackgroundInitialized=!1;this.stencilEnabledLayerExtents=[];this.numOriginsRendered=this.numTilesCulled=this.numTilesRendered=this.numTrianglesRendered=0;this.loaded=this.clippingExtent=null;this.needsHighlight=this.needsRender=this._loaded=!1;this.visibleScaleRangeQueries=new g({initialSize:10});this.visibleScaleRangeQueriesInvPtr=0;this.visibleScaleRangeQueryQueue=
new g({initialSize:30});this.visibleScaleRangeQueryPool=new h(R,!1);this.manifold=a}c.prototype.destroy=function(a){this.uninstall(a);w.clearCaches()};c.prototype.install=function(a){a.addRenderPlugin([4,9],this);this.drapedRenderer=a.renderView.getDrapedRenderer()};c.prototype.uninstall=function(a){a.removeRenderPlugin(this)};Object.defineProperty(c.prototype,"renderingDisabled",{set:function(a){this._renderingDisabled=!!a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"opaque",{set:function(a){this._opaque=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"skirtScale",{set:function(a){this._skirtScale=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderPatchBorders",{set:function(a){this._renderPatchBorders!==a&&(this._renderPatchBorders=a,this._updatePrograms())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cullBackFaces",{set:function(a){this.backfaceCullingEnabled=
a;this._updatePrograms();this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderOrder",{get:function(){return this._renderOrder},set:function(a){this._renderOrder=a;this.setNeedsRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"velvetOvergroundEnabled",{set:function(a){this._velvetOvergroundEnabled!==a&&(this._velvetOvergroundEnabled=a,this._updatePrograms())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"intersectionHandlerId",
{get:function(){return F.TERRAIN_ID},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"slicePlaneEnabled",{get:function(){return this._slicePlaneEnabled},set:function(a){this._slicePlaneEnabled!==a&&(this._slicePlaneEnabled=a,this._updatePrograms())},enumerable:!0,configurable:!0});c.prototype.setRootTiles=function(a){this.rootTiles=a;this.setNeedsRender()};c.prototype.setNeedsHighlight=function(a){this.needsHighlight=a;this.setNeedsRender()};c.prototype.setStencilEnabledLayerExtents=
function(a){this.stencilEnabledLayerExtents=a;this.setNeedsRender()};c.prototype.setTileSize=function(a){this.tileSize=a;this.tileRenderer&&(this.tileRenderer.tileSize=a);this.setNeedsRender()};c.prototype.loadCachedElevationData=function(a){S(null===a.renderData);var b=B.tile2str(a);if(b=this._memCache.pop(b)){a.renderData=b.renderData;a.renderData.tile=a;a.renderData.localOrigin=this._getLocalOriginOfTile(a);for(var c in b.upsampleLIJs){var d=B.findParentByLIJ(a,b.upsampleLIJs[c]);a.layerInfo[u.LayerClass.ELEVATION][c].setUpsampleInfo(a,
d)}}return null!=b};c.prototype.loadTile=function(a){a.renderData||(a.renderData=this.renderDataPool.acquire(),a.renderData.init(a),a.renderData.localOrigin=this._getLocalOriginOfTile(a),this.updateTileGeometry(a));this.updateTileTexture(a)};c.prototype.queryVisibleLevelRange=function(a,b,c,d){var e=this.visibleScaleRangeQueryPool.acquire();q.vec4.copy(e.extent,a);e.minLevel=b?b:-Number.MAX_VALUE;e.maxLevel=null!=c?c:Number.MAX_VALUE;e.callback=d;this.visibleScaleRangeQueryQueue.push(e);this.setNeedsRender()};
c.prototype.updateTileTexture=function(a){this.tileRenderer&&this.tileBackgroundInitialized&&this.tileRenderer.updateTileTexture(a)};c.prototype.updateTileGeometry=function(a){for(var b=0,c=a.layerInfo[u.LayerClass.ELEVATION];b<c.length;b++)c[b].pendingUpdates&=~u.TileUpdate.GEOMETRY;a.renderData.updateGeometry(this.rctx,"debug"===this.wireframe.mode)&&this.setNeedsRender()};c.prototype.unloadTile=function(a,b){if(a.renderData){a.renderData.releaseTexture();if(b){b={renderData:a.renderData,upsampleLIJs:[]};
for(var c=0,d=a.layerInfo[u.LayerClass.ELEVATION];c<d.length;c++){var e=d[c].upsampleFromTile.tile.lij;b.upsampleLIJs.push([e[0],e[1],e[2]])}this._memCache.put(B.tile2str(a),b,a.renderData.estimatedGeometryMemoryUsage)}else this.releaseTileGeometry(a.renderData);a.renderData=null;a.updateMemoryUsed()}};c.prototype._getLocalOriginOfTile=function(a){var b=Math.max(0,7*Math.floor((a.lij[0]-3)/7));if("spherical"===this.manifold&&0===b)return p.vec3f64.ZEROS;for(;a.parent&&a.lij[0]>b;)a=a.parent;return a.centerAtSeaLevel};
c.prototype.setVisibility=function(a){this.visible=a;this.setNeedsRender()};c.prototype.getStats=function(){return{numTilesRendered:this.numTilesRendered,numTilesCulled:this.numTilesCulled,numTrianglesRendered:this.numTrianglesRendered,numOriginsRendered:this.numOriginsRendered}};c.prototype.getWireframeEnabled=function(){return"shader"===this.wireframe.mode};c.prototype.setDebugScreenSizePerspective=function(a){a!==this.debugScreenSizePerspective&&(this.debugScreenSizePerspective=a,this._updatePrograms())};
c.prototype.setWireframe=function(a){var b=this;if(!1===a||!0===a)a={mode:a?"shader":"none"};var c=this.wireframe;if(void 0!==a.mode&&c.mode!==a.mode){var d="debug"===c.mode,e="debug"===a.mode;c.mode=a.mode;this._updatePrograms();d!==e&&this.rootTiles&&(B.traverseTilesPreorder(this.rootTiles,function(a){a.renderData&&a.renderData.updateGeometry(b.rctx,e)}),this.setNeedsRender())}for(var f in a)c.hasOwnProperty(f)&&(c[f]=a[f]),this.setNeedsRender();c.resolution&&(c.resolution=Math.min(c.resolution,
this.tileSize),c.resolution=1<<Math.round(Math.log(c.resolution)/Math.LN2))};c.prototype.setNeedsRender=function(){this.patchGroupsDirty=this.needsRender=!0};c.prototype.isOpaqueExcludingSlice=function(){var a=this.wireframe,a="shader"===a.mode&&(1>a.wireOpacity||1>a.surfaceOpacity);return this._opaque&&!a};c.prototype.isOpaque=function(){return this.isOpaqueExcludingSlice()&&!this._slicePlaneEnabled};c.prototype.setTileBackground=function(a){this.tileBackground=a;this._updateTileBackground()};c.prototype.initializeRenderContext=
function(a){var b=this,c=this.rctx=a.rctx;a=this.programRep=a.programRep;this._updatePrograms();this.tileRenderer=new z(c,this.tileSize,a,function(){return b.setNeedsRender()});this.tileBackground&&this._updateTileBackground();this.emptyTex=C.createEmptyTexture(c)};c.prototype.uninitializeRenderContext=function(a){null!=this.emptyTex&&(this.emptyTex.dispose(),this.emptyTex=null);this.tileRenderer&&(this.tileRenderer.dispose(),this.tileRenderer=null)};c.prototype.intersect=function(c,d,e,f,g){if(this.rootTiles&&
(!c.enable.selectOpaqueTerrainOnly||!c.enable.selectionMode||this.isOpaqueExcludingSlice())){var h=la,k=ja;a.vec3.subtract(h,f,e);a.vec3.set(k,1/h[0],1/h[1],1/h[2]);var l=c.results.min,m=c.results.max,p=c.results.terrain,u=null,n=this.clippingExtent,q=this.tileIterator;q.reset(this.rootTiles);g=function(){var g=q.next();if(null===g.renderData)return"continue";if(c.enable.invisibleTerrain){if(!g.visible&&n&&!g.intersectsExtent(n))return"continue"}else if(!g.visible)return"continue";var v=g.renderData.geometryInfo,
y=-z._skirtScale*v.skirtLength;if(0!==y){var r=g.up;t.offset(v.boundingBox,y*r[0],y*r[1],y*r[2],T);t.expandWithBuffer(T,v.boundingBox,0,2)}var r=0===y?v.boundingBox:T,C=g.renderData.localOrigin;a.vec3.subtract(na,e,C);if(!K.intersectAabbInvDir(r,na,k,c.tolerance))return"continue";var E=function(a,b,c,d){a.set(void 0,B.tile2str(b),c,d,P,void 0);a.intersector=ta;a.target=aa},r=function(k,n,q){0<=k&&(c.enable.backfacesTerrain||0>a.vec3.dot(n,h))&&(c.enable.invisibleTerrain||!c.enable.selectionMode||
null==d||d(e,f,k))&&((null==p.dist||k<p.dist)&&E(p,g,k,n),c.enable.storeTerrainResults&&(c.enable.storeAll&&(b.isNone(u)?(u=new F.IntersectorResult(c.ray),E(u,g,k,n),c.results.all.push(u)):k<u.dist&&E(u,g,k,n)),(null==l.dist||k<l.dist)&&E(l,g,k,n),(null==m.dist||k>m.dist)&&E(m,g,k,n)))},J=pa;a.vec3.subtract(J,f,C);var C=v.indices,G=v.vertexAttributes,Q={data:G.getField("position",x.BufferViewVec3f).typedBuffer,size:3,offsetIdx:0,strideIdx:G.stride/4},v=v.numWithoutSkirtIndices/3;K.intersectTriangles(na,
J,0,v,C,Q,null,r);0!==y&&w.intersectSkirts(na,J,v,C.length/3,C,G,"spherical"===z.manifold?function(b){return a.vec3.scale(b,b,y/a.vec3.length(b))}:function(b){return a.vec3.set(b,0,0,y)},r)};for(var z=this;!q.done;)g()}};c.prototype.render=function(a){var b=a.rctx;if(this._renderingDisabled||!this.visible||!this.rootTiles||!this.tileBackgroundInitialized)return!1;var c=this.isOpaque()?4:9;if(a.slot!==c)return!1;N.trace("# BEGIN RENDER TERRAIN");var c=a.pass,d=1===a.lightingData.helper.globalFactor;
X.overlayEnabled=!1;X.used=!0;switch(c){case 0:X.overlayEnabled=!0;X.used=!1;b=a.shadowMap&&a.shadowMap.enabled;this.receiveShadows!==b&&(this.receiveShadows=b,this._updatePrograms());b=!this.drapedRenderer.isEmpty();b!==this.hasOverlays&&(this.hasOverlays=b,this._updatePrograms());this._renderMaterialPass(a,this.programs.color,this._updatePatchGroupsData(),X);break;case 3:this.castShadows&&d&&this._renderAuxiliaryPass(a,this.programs.depthShadowMap,this._updatePatchGroupsData(),X);break;case 1:this._renderAuxiliaryPass(a,
this.programs.depth,this._updatePatchGroupsData(),X);break;case 2:this._renderAuxiliaryPass(a,this.programs.normal,this._updatePatchGroupsData(),X);break;case 4:this.needsHighlight&&(X.overlayEnabled=!0,this._renderAuxiliaryPass(a,this.programs.highlight,this._updatePatchGroupsData(),X),b.clearSafe(256))}N.trace("# END RENDER TERRAIN");this.needsRender=0!==this.visibleScaleRangeQueryQueue.length;return!0};c.prototype._renderMaterialPass=function(b,c,d,e){var f=this,g=b.camera;b.rctx.bindProgram(c);
var h=this.wireframe;if("shader"===h.mode||this._renderPatchBorders)c.setUniform1f("wireframe.width",this.wireframe.width),c.setUniform1f("wireframe.falloff",Math.min(h.width,h.falloff)),c.setUniform1f("wireframe.wireOpacity",h.wireOpacity),c.setUniform1f("wireframe.surfaceOpacity",h.surfaceOpacity),c.setUniform4fv("wireframe.color",h.color);b.shadowMap&&b.shadowMap.bind(c);b.ssaoHelper&&b.ssaoHelper.setUniforms(c);c.setUniform1i("tex",0);this._bindOverlayUniforms(c);c.setUniformMatrix4fv("viewNormal",
g.viewInverseTransposeMatrix);c.setUniformMatrix4fv("proj",g.projectionMatrix);h=b.lightingData;a.vec3.set(G,h.diffuse[0],h.diffuse[1],h.diffuse[2]);c.setUniform3fv("lightIntensity",G);b.lightingData.helper.setUniforms(c,!0);g=g.viewMatrix;a.vec3.set(Y,g[12],g[13],g[14]);a.vec3.normalize(Y,Y);c.setUniform3fv("viewDirection",Y);this.numOriginsRendered=this.numTrianglesRendered=this.numTilesCulled=this.numTilesRendered=0;this._prepareScaleRangeQueries();this.isOpaque()?this._renderPatchGroups(b,c,d,
e):b.offscreenRenderingHelper.renderToTargets(function(){return f._renderPatchGroups(b,c,d,e)},b.offscreenRenderingHelper.tmpColor,b.offscreenRenderingHelper.mainDepth,[0,0,0,0]);this._processScaleRangeQueries();0<this.numTilesRendered&&!this._loaded&&(this._loaded=!0,this.loaded&&this.loaded())};c.prototype._renderAuxiliaryPass=function(a,b,c,d){a.rctx.bindProgram(b);if(4===a.pass){var e=a.offscreenRenderingHelper;a.rctx.bindTexture(e.depthTexture,5);b.setUniform1i("depthTex",5);b.setUniform4f("highlightViewportPixelSz",
0,0,1/e.width,1/e.height)}else if(b.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix),1===a.pass||3===a.pass)V[0]=a.camera.near,V[1]=a.camera.far,b.setUniform2fv("nearFar",V);this._renderPatchGroupsAuxiliary(a,b,c,d)};c.prototype._updateTileBackground=function(){var a=this;if(this.tileRenderer){var b=function(){a.tileBackgroundInitialized=!0;a.rootTiles&&B.traverseTilesPreorder(a.rootTiles,function(b){return a.tileRenderer.updateTileTexture(b)})};if("string"===typeof this.tileBackground){var c=
this.tileBackground;y.requestImage(c).then(function(d){c===a.tileBackground&&a.tileRenderer&&(a.tileRenderer.setBackground(d),b())})}else{var d=this.tileBackground?k.toUnitRGBA(this.tileBackground):[0,0,0,0];this.tileRenderer.setBackground(d);b()}}};c.prototype._updatePatchGroupsData=function(){var a=this,b=this.patchGroups;if(!this.patchGroupsDirty)return b;this.highestVisibleLODTile=null;b.clear();this._renderCollectOrigins(b);if(this.renderOrder!==u.RenderOrder.NONE){for(var c=0;c<b.length;c++)B.sortTiles(this.renderOrder,
b.data[c].patches);b.sort(function(b,c){var d=a.renderOrder;b=0===b.patches.length?-d:0===c.patches.length?d:B.compareTiles(b.patches.data[0],c.patches.data[0],d);return b})}this.patchGroupsDirty=!1;return b};c.prototype._renderCollectOrigins=function(a){var b=this.rootTiles,c="spherical"===this.manifold;a.clear();for(var d=0;d<b.length;d++){var e=b[d],f=a.pushNew();f.root=e;f.origin=c?p.vec3f64.ZEROS:e.centerAtSeaLevel;f.patches.clear();this._renderCollectOriginsForRoot(a,f)}};c.prototype._renderCollectOriginsForRoot=
function(a,b){var c=this.tileIterator;c.resetOne(b.root);var d=this.patchGroupsMap;d.clear();for(d.set(b.origin,b);!c.done;){b=c.next();var e=b.renderData;if(e&&!b.visible)this.numTilesCulled++,c.skipSubtree();else{if(0===b.lij[0]%7){var f=a.pushNew();f.root=b;f.origin=b.centerAtSeaLevel;d.set(b.centerAtSeaLevel,f);f.patches.clear()}if(e){(f=d.get(b.renderData.localOrigin))&&f.patches.push(b);if(!this.highestVisibleLODTile||b.vlevel>this.highestVisibleLODTile.vlevel)this.highestVisibleLODTile=b;c.skipSubtree()}}}};
c.prototype._scaleQueriesForTile=function(a){var b=a.extent;a=a.lij[0];for(var c=0;c<this.visibleScaleRangeQueriesInvPtr;){var d=this.visibleScaleRangeQueries.data[c],e=d.extent;a>=d.minLevel&&a<=d.maxLevel&&e[0]<=b[2]&&e[2]>=b[0]&&e[1]<=b[3]&&e[3]>=b[1]?(this.visibleScaleRangeQueries.swapElements(c,this.visibleScaleRangeQueriesInvPtr-1),this.visibleScaleRangeQueriesInvPtr--):c++}};c.prototype._tileIntersectsStencilEnabledLayer=function(a){for(var b=this.stencilEnabledLayerExtents,c=0;c<b.length;c++)if(a.intersectsExtent(b[c]))return!0;
return!1};c.prototype._renderPatchGroupsAuxiliary=function(a,b,c,d){a.rctx.setPipelineState(this.defaultPipelineState);var e=0<this.stencilEnabledLayerExtents.length;b.setUniformMatrix4fv("proj",a.camera.projectionMatrix);b.setUniform1f("skirtScale",this._skirtScale);d.overlayEnabled&&this._bindOverlayUniforms(b);for(var f=0;f<c.length;f++){var g=c.data[f];this._bindViewForPatchGroup(b,g,a.camera.eye,a.camera.viewMatrix);for(var h=0;h<g.patches.length;h++)this._renderPatch(a.rctx,b,g.patches.data[h],
4,e,d)}a.rctx.bindVAO(null)};c.prototype._renderPatchGroups=function(a,b,c,d){var e=a.rctx,f=a.camera,g=f.viewMatrix;e.setPipelineState(this.defaultPipelineState);if(this.debugScreenSizePerspective&&this.pointsOfInterest){var h=E.getSettings("spherical"===this.manifold?"global":"local");h.update({distance:this.pointsOfInterest.centerOnSurfaceFrequent.distance,fovY:f.fovY});K.bindScreenSizePerspective(h,b,"screenSizePerspective")}h=0<this.stencilEnabledLayerExtents.length;b.setUniform1f("skirtScale",
this._skirtScale);var k=this.highestVisibleLODTile,l;k?(k=k.vlevel,l=this.tileSize/this.wireframe.resolution):(k=16,l=this.tileSize/64);for(var m="debug"===this.wireframe.mode?1:4,p=0;p<c.length;p++){var u=c.data[p],n=u.patches;if(0!==n.length){this._bindViewForPatchGroup(b,u,f.eye,g);var z=a.sliceHelper&&a.sliceHelper.plane;z&&K.bindSlicePlane(u.origin,z,b);a.shadowMap&&a.shadowMap.bindView(b,u.origin);this.numOriginsRendered++;for(u=0;u<n.length;u++){z=n.data[u];N.trace("# RENDER TILE "+B.tile2str(z)+
", screenDepth:"+z.screenDepth);var t=z.renderData.geometryInfo.uvOffsetAndScale,w=z.renderData.texOffsetAndScale;q.vec4.set(J,t[0]*w[2]+w[0],t[1]*w[3]+w[1],t[2]*w[2],t[3]*w[3]);b.setUniform4fv("texOffsetAndScale",J);e.bindTexture(z.renderData.textureReference,0);b.setUniform1f("opacity",z.renderData.opacity);("shader"===this.wireframe.mode||this._renderPatchBorders)&&b.setUniform1f("wireframe.subdivision",l*(1<<k-z.vlevel));t=this._renderPatch(e,b,z,m,h,d);z.renderOrder=this.numTilesRendered;this.numTilesRendered++;
this.numTrianglesRendered+=t/3;this._scaleQueriesForTile(z)}}}e.bindVAO(null)};c.prototype._renderPatch=function(a,b,c,d,e,f){f.overlayEnabled&&(this._bindOverlayTextures(b,c.renderData.overlays,f.used),b.setUniform1f("overlayOpacity",c.renderData.overlayOpacity));e&&a.setPipelineState(this._tileIntersectsStencilEnabledLayer(c)?this.stencilPipelineState:this.defaultPipelineState);e=0===this._skirtScale?c.renderData.geometryInfo.numWithoutSkirtIndices:c.renderData.vao.indexBuffer.size;a.bindVAO(c.renderData.vao);
H.assertCompatibleVertexAttributeLocations(c.renderData.vao,b);a.drawElements(d,e,c.renderData.vao.indexBuffer.indexType,0);return e};c.prototype._bindViewForPatchGroup=function(a,b,c,d){a.setUniform3fv("origin",b.origin);e.mat4.translate(ca,d,b.origin);a.setUniformMatrix4fv("view",ca);a.setUniform3f("camPos",c[0]-b.origin[0],c[1]-b.origin[1],c[2]-b.origin[2])};c.prototype._bindOverlayUniforms=function(a){a.setUniform1i("ovInnerColorTex",1);a.setUniform1i("ovOuterColorTex",2);a.setUniform1i("ovInnerWaterTex",
3);a.setUniform1i("ovOuterWaterTex",4)};c.prototype._bindOverlayTextures=function(a,b,c){for(var d=0;2>d;d++){var e=2*d,f=b[d],g=c?f.highlightRenderTargetId:f.renderTargetId;g?(Z[e]=f.texOffset[0],Z[e+1]=f.texOffset[1],Q[e]=f.texScale[0],Q[e+1]=f.texScale[1],e=this.drapedRenderer.getRenderTargetTexture(g),this.rctx.bindTexture(e,1+d),(f=f.waterMaskRenderTargetId)?(f=this.drapedRenderer.getRenderTargetTexture(f),this.rctx.bindTexture(f,3+d)):this.rctx.bindTexture(this.emptyTex,3+d)):(Z[e]=0,Z[e+1]=
0,Q[e]=0,Q[e+1]=0,this.rctx.bindTexture(this.emptyTex,1+d),this.rctx.bindTexture(this.emptyTex,3+d))}a.setUniform4fv("overlayTexOffset",Z);a.setUniform4fv("overlayTexScale",Q)};c.prototype._updatePrograms=function(){var a="shader"===this.wireframe.mode,b=this.programRep;this.programs={color:b.getProgram(O.colorPass,{mode:a||this._renderPatchBorders?"wireframe":"normal",overlay:this.hasOverlays,atmosphere:"spherical"===this.manifold&&this._velvetOvergroundEnabled,wireframeTexture:a,tileBorders:this._renderPatchBorders,
receiveShadows:this.receiveShadows,screenSizePerspective:this.debugScreenSizePerspective,slice:this._slicePlaneEnabled}),normal:b.getProgram(O.normalPass,{alphaZero:!0}),depth:b.getProgram(O.depthPass,{shadowMap:!1}),depthShadowMap:b.getProgram(O.depthPass,{shadowMap:!0}),highlight:b.getProgram(O.highlightPass,{})};this.defaultPipelineState=I.makePipelineState({culling:this.backfaceCullingEnabled&&I.backFaceCullingParams,depthTest:{func:513},depthWrite:I.defaultDepthWriteParams,colorWrite:I.defaultColorWriteParams});
this.stencilPipelineState=I.makePipelineState(l({},this.defaultPipelineState,{stencilTest:{function:{func:517,ref:1,mask:255},operation:{fail:7680,zFail:7680,zPass:7680}}}));this.setNeedsRender()};c.prototype.releaseTileGeometry=function(a){a.releaseGeometry()&&this.setNeedsRender();this.renderDataPool.release(a)};c.prototype._prepareScaleRangeQueries=function(){for(var a=this.visibleScaleRangeQueries,b=this.visibleScaleRangeQueryQueue;a.length<a.data.length&&0<b.length;){var c=b.pop();a.push(c)}this.visibleScaleRangeQueriesInvPtr=
a.length};c.prototype._processScaleRangeQueries=function(){for(var a=this.visibleScaleRangeQueries,b=this.visibleScaleRangeQueryPool,c=0;c<a.length;c++){var d=a.data[c];b.release(d);d.callback(c>=this.visibleScaleRangeQueriesInvPtr);d.callback=null}a.clear()};Object.defineProperty(c.prototype,"test",{get:function(){return{tileRenderer:this.tileRenderer}},enumerable:!0,configurable:!0});return c}();var U={mode:"none",width:1.5,falloff:1.5,wireOpacity:1,surfaceOpacity:0,color:[1,1,1,0],resolution:64},
X={overlayEnabled:!1,used:!0},ca=c.mat4f64.create(),G=p.vec3f64.create(),Y=p.vec3f64.create(),la=p.vec3f64.create(),ja=p.vec3f64.create(),na=p.vec3f64.create(),pa=p.vec3f64.create(),ta="TerrainRenderer",aa={type:"external"};return r})},"esri/views/3d/terrain/PatchRenderData":function(){define("require exports ../../../core/arrayUtils ../../../core/mathUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingBox ../support/buffer/glUtil ./PatchGeometryFactory ./TerrainConst ./tileUtils ../webgl-engine/lib/DefaultVertexAttributeLocations ../../webgl/BufferObject ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this.overlayTexOffset=b.vec2f64.create();this.texOffsetAndScale=g.vec4f64.create();this.geometryInfo={indices:null,vertexAttributes:null,boundingBox:e.empty(),numSurfaceIndices:0,numSkirtIndices:0,numWithoutSkirtIndices:0,numVertsPerRow:0,skirtLength:0,uvOffsetAndScale:g.vec4f64.create()}}d.prototype.init=function(a){this.tile=a;a=this.geometryInfo;a.indices=null;a.vertexAttributes=
null;e.empty(a.boundingBox);a.numSurfaceIndices=0;a.numSkirtIndices=0;a.numWithoutSkirtIndices=0;a.numVertsPerRow=0;this.geometryState={numVertsPerRow:0,samplerData:null,clippingArea:null,wireframe:!1};this.textureReference=this._texture=this._vao=null;h.vec4.set(this.texOffsetAndScale,0,0,1,1);this.opacity=1;if(this.overlays){a=0;for(var b=this.overlays;a<b.length;a++){var c=b[a];c.renderTargetId=null;c.highlightRenderTargetId=null;c.waterMaskRenderTargetId=null;k.vec2.set(c.texScale,1,1);k.vec2.set(c.texOffset,
0,0)}}else for(this.overlays=[null,null],a=0;2>a;a++)this.overlays[a]={renderTargetId:null,highlightRenderTargetId:null,waterMaskRenderTargetId:null,texScale:[1,1],texOffset:[0,0]};this.overlayOpacity=1;this.localOrigin=null};d.prototype.updateGeometry=function(a,b){if(!this._updateGeometryState(b))return!1;this._releaseGeometry();this._createGeometry(a,b);return!0};d.prototype.releaseGeometry=function(){return this._releaseGeometry()?(this.geometryState={numVertsPerRow:0,samplerData:null,clippingArea:null,
wireframe:!1},!0):!1};d.prototype.ensureTexture=function(a,b){this._texture&&this._texture.descriptor.width!==b&&this.releaseTexture();this._texture||(this._texture=a(b),this.tile.updateMemoryUsed());return this._texture};d.prototype.releaseTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null);this.textureReference=null};d.prototype._updateGeometryState=function(b){var c=this._getElevationInfo(),d=this.tile.lij[0],e=8>d?this.tile.numSubdivisionsAtLevel[d]+1:2;c.samplerData&&
(e=this.tile.maxTesselation,e=l.clamp((e>>Math.max(d-c.maxTileLevel,a.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-d)))+1,2,e+1));d=this.tile.clippingArea;if(!this.tile.intersectsClippingArea||this.tile.isWithinClippingArea)d=null;var f=this.geometryState,g=!1;f.numVertsPerRow!==e&&(f.numVertsPerRow=e,g=!0);c.changed&&(f.samplerData=c.samplerData,g=!0);n.equals(f.clippingArea,d)||(f.clippingArea=d,g=!0);f.wireframe!==b&&(f.wireframe=b,g=!0);return g};d.prototype._createGeometry=function(a,
b){this.tile.createGeometry(this.geometryState,this.localOrigin,b);b=this.geometryInfo.vertexAttributes;var d=this.geometryInfo.indices,e=a.gl;this._vao=new t(a,q.Default3D,{geometry:c.glLayout(b.layout)},{geometry:v.createVertex(a,e.STATIC_DRAW,b.buffer)},v.createIndex(a,e.STATIC_DRAW,d))};d.prototype._releaseGeometry=function(){if(!this._vao)return!1;this._vao.dispose();this._vao=null;f.releaseGeometry(this.geometryInfo);return!0};Object.defineProperty(d.prototype,"vao",{get:function(){return this._vao},
enumerable:!0,configurable:!0});d.prototype._getElevationInfo=function(){for(var b=this.geometryState.samplerData,c=this.tile.layerInfo[a.LayerClass.ELEVATION],d=c.length,e=Array(d),f=0,g=0,h=!1,k=0;k<d;k++){var l=c[k];if(l.upsampleFromTile){var l=l.upsampleFromTile.tile,n=l.layerInfo[a.LayerClass.ELEVATION][k].data,n=n.samplerData;b&&b[f]===n||(h=!0);e[f++]=n;g=Math.max(g,l.lij[0])}else l.data&&(n=this.tile.surface.layerViewByIndex(k,a.LayerClass.ELEVATION),p.fallsWithinLayer(this.tile,n.layer,!1)&&
(n=l.data,b&&b[f]===n.samplerData||(h=!0),e[f++]=n.samplerData,g=this.tile.lij[0]))}b&&b.length!==f&&(h=!0);0<f?e.length=f:e=null;return{changed:h,samplerData:e,maxTileLevel:g}};Object.defineProperty(d.prototype,"estimatedGeometryMemoryUsage",{get:function(){return this.geometryInfo.indices.byteLength+this.geometryInfo.vertexAttributes.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"textureDescriptor",{get:function(){return this._texture?this._texture.descriptor:null},
enumerable:!0,configurable:!0});return d}();d.PatchRenderData=r})},"esri/views/3d/terrain/TileRenderer":function(){define("require exports ../../../core/mathUtils ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec2f64 ../../../core/libs/gl-matrix-2/vec4 ../../2d/engine/vectorTiles/tileRendererHelper3D ../../2d/engine/vectorTiles/VectorTileDisplayObject3D ./TerrainConst ./terrainUtils ../webgl-engine/lib/DefaultVertexAttributeLocations ../webgl-engine/lib/DefaultVertexBufferLayouts ../webgl-engine/lib/glUtil3D ../webgl-engine/shaders/MiscPrograms ../../webgl/BufferObject ../../webgl/FramebufferObject ../../webgl/renderState ../../webgl/Texture ../../webgl/Util ../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m){var u=Array(20),z={tile:null,sourceLayerInfo:null,sourceLod:null,offset:[0,0],scale:1,layerIdx:0};return function(){function d(b,c,d,e){this._blackTex=this._backgroundTex=null;this.tileSize=256;this._context=b;this.tileSize=c;this._setNeedsRender=e;b.capabilities.textureFilterAnisotropic&&(this._maxAnisotropy=Math.min(8,b.parameters.maxMaxAnisotropy));c=new Float32Array(20);c[0]=-1;c[1]=-1;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=-1;c[7]=0;c[8]=1;c[9]=0;c[10]=
-1;c[11]=1;c[12]=0;c[13]=0;c[14]=1;c[15]=1;c[16]=1;c[17]=0;c[18]=1;c[19]=1;this._vaoQuad=new m(b,f.Default3D,{geometry:a.Pos3Tex},{geometry:v.createVertex(b,35044,c)});this._blendLayersProgram=d.getProgram(q.blendLayers);this._blendLayersPipelineState=y.makePipelineState({blending:y.simpleBlendingParams(1,771),colorWrite:y.defaultColorWriteParams});this._applyOpacityPipelineState=y.makePipelineState({blending:y.simpleBlendingParams(0,770),colorWrite:y.defaultColorWriteParams});this._blackTex=p.createColorTexture(this._context,
[0,0,0,1])}d.prototype.dispose=function(){this._fbo&&(this._fbo.dispose(),this._fbo=null);this._vtFBO&&(this._vtFBO.dispose(),this._vtFBO=null);this._vaoQuad&&(this._vaoQuad.dispose(),this._vaoQuad=null);this._backgroundTex&&(this._backgroundTex.dispose(),this._backgroundTex=null);this._blackTex&&(this._blackTex.dispose(),this._blackTex=null);this._blendLayersProgram&&(this._blendLayersProgram.dispose(),this._blendLayersProgram=null);this._context=null};d.prototype.updateTileTexture=function(a){for(var d=
a.layerInfo[e.LayerClass.MAP],f=0;f<d.length;f++)d[f].pendingUpdates&=~e.TileUpdate.TEXTURE;if(a.renderData){var f=a.renderData,g=a.surface,h=g.baseOpacity,k=0,l=this.tileSize,m=!1,p,q=d.length;for(p=0;p<d.length&&!m;p++){var t=g.layerViewByIndex(p,e.LayerClass.MAP),w=t.fullOpacity;u[p]=w;this._isBaseLayer(t.layer)&&q>=d.length&&(q=p);if(0!==w){var v=this._getTileRenderInfo(a,p,z);v&&(c.isVectorTileLayerView(t)&&(l=Math.max(l,this.tileSize*t.view.pixelRatio)),k++,t.isOpaque&&1===h&&1===w&&(m=!0))}}g=
l;l=n.nextHighestPowerOfTwo(g);d=l*l;v=g*g;d===v?l=g:(g=l/2,l=d-v<v-g*g?l:g);d=l/this.tileSize;--p;0===k&&this._backgroundTex?(f.opacity=h,f.textureReference=this._backgroundTex,b.vec4.set(f.texOffsetAndScale,0,0,1,1)):1===k&&m?(f.opacity=h,v=this._getTileRenderInfo(a,p,z),this._dataToTexture(this._context,v,l,d)&&(f.textureReference=v.sourceLayerInfo.data,b.vec4.set(f.texOffsetAndScale,v.offset[0],v.offset[1],v.scale,v.scale))):(this._composeMapLayers(a,p,q,m,u,l,d),b.vec4.set(f.texOffsetAndScale,
0,0,1,1));this._setNeedsRender()}};d.prototype.setBackground=function(a){this._backgroundTex=a instanceof HTMLImageElement?this._buildTexture(a):p.createColorTexture(this._context,a)};d.prototype._buildTexture=function(a){var b={target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9987,maxAnisotropy:this._maxAnisotropy,flipped:!0,hasMipmap:!0},c=this._context,d;if("number"===typeof a)b.width=b.height=a,d=new x(c,b);else try{d=new x(c,b,a)}catch(L){d=p.createEmptyTexture(c),console.warn("TileRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.")}c.bindTexture(d);
d.generateMipmap();return d};d.prototype._bindFBO=function(a,b,c,d){a&&a.width===b&&a.height===c||(a&&a.dispose(),a=t.create(this._context,{colorTarget:0,depthStencilTarget:d?1:0,width:b,height:c}));this._context.bindFramebuffer(a);return a};d.prototype._drawRasterData=function(a,b,c,d){void 0===d&&(d=1);var e=this._context,f=this._blendLayersProgram,g=this._vaoQuad;e.bindProgram(f);e.bindVAO(g);w.assertCompatibleVertexAttributeLocations(g,f);e.bindTexture(a,0);f.setUniform1i("tex",0);f.setUniform1f("scale",
b);f.setUniform2f("offset",c[0],c[1]);f.setUniform1f("opacity",d);e.drawArrays(5,0,w.vertexCount(g,"geometry"))};d.prototype._composeMapLayers=function(a,b,c,d,e,f,g){var h=this,l=a.renderData.ensureTexture(function(a){return h._buildTexture(a)},f),m=this._context;this._fbo=this._bindFBO(this._fbo,l.descriptor.width,l.descriptor.height,!1);m.setViewport(0,0,f,f);m.setClearColor(0,0,0,0);m.setClearDepth(1);m.clearSafe(16384);!d&&this._backgroundTex&&(m.setPipelineState(this._blendLayersPipelineState),
this._drawRasterData(this._backgroundTex,1,k.vec2f64.ZEROS));d=a.surface.baseOpacity;for(var p=!1;0<=b;b--){var u=this._getTileRenderInfo(a,b,z);u&&(b<c&&1>d&&!p&&(m.setPipelineState(this._applyOpacityPipelineState),this._drawRasterData(this._blackTex,1,k.vec2f64.ZEROS,d),p=!0),0!==e[b]&&this._dataToTexture(m,u,f,g)&&(m.setPipelineState(this._blendLayersPipelineState),this._drawRasterData(u.sourceLayerInfo.data,u.scale,u.offset,e[b])))}m.bindTexture(l);m.gl.copyTexImage2D(m.gl.TEXTURE_2D,0,l.descriptor.pixelFormat,
0,0,l.descriptor.width,l.descriptor.height,0);l.generateMipmap();m.bindFramebuffer(null);a.renderData.opacity=p?1:d;a.renderData.textureReference=l};d.prototype._dataToTexture=function(a,b,c,d){b&&b.sourceLayerInfo&&b.sourceLayerInfo.data instanceof g&&(this._vectorDataToTexture(a,b,c,d),b.tile.updateMemoryUsed());a=b&&b.sourceLayerInfo&&b.sourceLayerInfo.data;if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)this._rasterDataToTexture(b),b.tile.updateMemoryUsed();return b&&b.sourceLayerInfo&&
b.sourceLayerInfo.data instanceof x};d.prototype._rasterDataToTexture=function(a){a=a.sourceLayerInfo;a.data=this._buildTexture(a.data)};d.prototype._vectorDataToTexture=function(a,b,c,d){var f=b.tile.surface.layerViewByIndex(b.layerIdx,e.LayerClass.MAP);this._vtFBO=this._bindFBO(this._vtFBO,c,c,!0);a.setClearColor(1,1,1,0);a.clearSafe(16640);var g=b.sourceLayerInfo,k=g.data;h.renderVectorTile(this._context,b.sourceLod,k,f.renderer,f.schemaHelper,this.tileSize,this.tileSize,d);k.dispose();g.data=
this._buildTexture(c);a.bindTexture(g.data);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,0,g.data.descriptor.pixelFormat,0,0,c,c,0);g.data.generateMipmap();a.bindFramebuffer(this._fbo)};d.prototype._getTileRenderInfo=function(a,b,c){var d=a.layerInfo[e.LayerClass.MAP][b];c.layerIdx=b;if(d.data)return l.vec2.set(c.offset,0,0),c.tile=a,c.scale=1,c.sourceLod=a.lij,c.sourceLayerInfo=d,c;if(!d.upsampleFromTile)return null;a=d.upsampleFromTile;b=a.tile.layerInfo[e.LayerClass.MAP][b];c.tile=a.tile;l.vec2.copy(c.offset,
a.offset);c.scale=a.scale;c.sourceLod=a.tile.lij;c.sourceLayerInfo=b;return c};d.prototype._isBaseLayer=function(a){return a.parent&&"esri.Basemap"===a.parent.declaredClass&&-1<a.parent.baseLayers.indexOf(a)};Object.defineProperty(d.prototype,"test",{get:function(){return{fbo:this._fbo}},enumerable:!0,configurable:!0});return d}()})},"esri/views/2d/engine/vectorTiles/tileRendererHelper3D":function(){define("require exports ../../../../geometry ../../../../Viewpoint ../../../../core/libs/gl-matrix-2/mat4 ../../ViewState ../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.renderVectorTile=function(b,a,d,h,l,n,r,x){if(n!==r)throw Error("It is expected that tiles are square!");var f=l.adjustLevel(a[0]);x={context:b,drawPhase:0,state:g,stationary:!0,pixelRatio:x,displayLevel:f,requiredLevel:f,drawphase:0,renderer:h,layerOpacity:1,globalOpacity:1};h.initializeProgramCache(b);f=l.getScale(a[0]);l=l.getShift(a,f);var m=l[1];d.tileTransform.displayCoord[0]=-1-l[0];d.tileTransform.displayCoord[1]=1+
m;l=d.tileTransform.transform;k.mat4.identity(l);f=.25*f/n;l[0]=f;l[5]=-f;x.state.size=[n,r];h.setStateParams(x.state,x.pixelRatio,a[0]);d.attachWithContext(b);b.setPipelineState(e);d.render(x);b.setPipelineState(c);x.drawphase=1;d.render(x);x.drawphase=2;d.render(x)};var g=new b({viewpoint:new l({targetGeometry:new n.Point(0,0),scale:1,rotation:0}),size:[256,256]}),e=h.makePipelineState({depthTest:{func:515},depthWrite:h.defaultDepthWriteParams,colorWrite:h.defaultColorWriteParams}),c=h.makePipelineState({blending:h.simpleBlendingParams(1,
771),depthTest:{func:515},colorWrite:h.defaultColorWriteParams})})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){var m=[0,0];return function(d){function h(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=d.apply(this,b)||this;b._viewpoint2D={center:y.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new k.Extent;b.id=0;b.inverseTransform=a.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=a.mat2df64.create();b.transformNoRotation=a.mat2df64.create();b.displayMat3=q.mat3f32.create();b.displayViewMat3=
q.mat3f32.create();b.viewMat3=q.mat3f32.create();b.viewMat2d=f.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}n(h,d);u=h;Object.defineProperty(h.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});h.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=w.copy(c,a.viewpoint),this._set("size",v.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};h.prototype.clone=function(){return new u({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};h.prototype.toMap=function(a,b,c){if(x.isVec2(b))return v.vec2.transformMat2d(a,b,this.inverseTransform);m[0]=b;m[1]=c;return v.vec2.transformMat2d(a,m,this.inverseTransform)};h.prototype.toScreen=function(a,b,c){if(x.isVec2(b))return v.vec2.transformMat2d(a,b,this.transform);m[0]=b;m[1]=c;return v.vec2.transformMat2d(a,m,this.transform)};h.prototype.toScreenNoRotation=function(a,b,c){if(x.isVec2(b))return v.vec2.transformMat2d(a,b,this.transformNoRotation);m[0]=b;m[1]=
c;return v.vec2.transformMat2d(a,m,this.transformNoRotation)};h.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint,this.size)};h.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,d=this._get("pixelRatio")||1,e=this._get("size");w.getMatrix(a,c,e,b,0,d);return a};h.prototype._update=function(){var a=this._viewpoint2D,d=a.center,f=a.spatialReference,g=a.scale,h=a.rotation,a=this._get("pixelRatio")||1,l=this._get("size");this._set("id",this.id+1);var m=new b({targetGeometry:new k.Point(d[0],
d[1],f),scale:g,rotation:h});this._set("viewpoint",m);if(l&&f&&g)return this.resolution=w.getResolution(m),this.rotation=h,this.scale=g,this.spatialReference=f,v.vec2.copy(this.center,d),p.mat3.set(this.displayMat3,0!==l[0]?2/l[0]:0,0,0,0,0!==l[1]?-2/l[1]:0,0,-1,1,1),g=p.mat3.identity(this.viewMat3),d=t.vec2f32.fromValues(l[0]/2,l[1]/2),f=t.vec2f32.fromValues(-l[0]/2,-l[1]/2),h=e.common.toRadian(h),p.mat3.translate(g,g,d),p.mat3.rotate(g,g,h),p.mat3.translate(g,g,f),p.mat3.multiply(this.displayViewMat3,
this.displayMat3,g),g=c.mat2d.identity(this.viewMat2d),c.mat2d.translate(g,g,d),c.mat2d.rotate(g,g,h),c.mat2d.translate(g,g,f),w.getExtent(this.extent,m,l),w.getTransform(this.transform,m,l,a),c.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,m,l,a),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var u;l([g.property({readOnly:!0})],h.prototype,"id",void 0);l([g.property({value:1,json:{write:!0}})],h.prototype,
"pixelRatio",null);l([g.property({json:{write:!0}})],h.prototype,"size",null);l([g.property({type:b,json:{write:!0}})],h.prototype,"viewpoint",null);return h=u=l([g.subclass("esri.views.2d.ViewState")],h)}(g.declared(h))})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.common=n})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(r,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat2d=n})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(r,d,n){function l(b,d,g){var e=d[0],c=d[1],f=d[2],a=d[3],h=d[4];d=d[5];var k=g[0],l=g[1],n=g[2],r=g[3],x=g[4];g=g[5];b[0]=e*k+f*l;b[1]=c*k+a*l;b[2]=e*n+f*r;b[3]=c*n+a*r;b[4]=e*x+f*g+h;b[5]=c*x+a*g+d;return b}function k(b,d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];b[2]=d[2]-g[2];b[3]=d[3]-g[3];b[4]=d[4]-g[4];b[5]=d[5]-g[5];return b}Object.defineProperty(d,"__esModule",{value:!0});
d.copy=function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];return b};d.identity=function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b};d.set=function(b,d,g,e,c,f,a){b[0]=d;b[1]=g;b[2]=e;b[3]=c;b[4]=f;b[5]=a;return b};d.invert=function(b,d){var g=d[0],e=d[1],c=d[2],f=d[3],a=d[4];d=d[5];var h=g*f-e*c;if(!h)return null;h=1/h;b[0]=f*h;b[1]=-e*h;b[2]=-c*h;b[3]=g*h;b[4]=(c*d-f*a)*h;b[5]=(e*a-g*d)*h;return b};d.determinant=function(b){return b[0]*b[3]-b[1]*b[2]};d.multiply=
l;d.rotate=function(b,d,g){var e=d[0],c=d[1],f=d[2],a=d[3],h=d[4];d=d[5];var k=Math.sin(g);g=Math.cos(g);b[0]=e*g+f*k;b[1]=c*g+a*k;b[2]=e*-k+f*g;b[3]=c*-k+a*g;b[4]=h;b[5]=d;return b};d.scale=function(b,d,g){var e=d[1],c=d[2],f=d[3],a=d[4],h=d[5],k=g[0];g=g[1];b[0]=d[0]*k;b[1]=e*k;b[2]=c*g;b[3]=f*g;b[4]=a;b[5]=h;return b};d.translate=function(b,d,g){var e=d[0],c=d[1],f=d[2],a=d[3],h=d[4];d=d[5];var k=g[0];g=g[1];b[0]=e;b[1]=c;b[2]=f;b[3]=a;b[4]=e*k+f*g+h;b[5]=c*k+a*g+d;return b};d.fromRotation=function(b,
d){var g=Math.sin(d);d=Math.cos(d);b[0]=d;b[1]=g;b[2]=-g;b[3]=d;b[4]=0;b[5]=0;return b};d.fromScaling=function(b,d){b[0]=d[0];b[1]=0;b[2]=0;b[3]=d[1];b[4]=0;b[5]=0;return b};d.fromTranslation=function(b,d){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=d[0];b[5]=d[1];return b};d.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};d.add=
function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];b[2]=d[2]+g[2];b[3]=d[3]+g[3];b[4]=d[4]+g[4];b[5]=d[5]+g[5];return b};d.subtract=k;d.multiplyScalar=function(b,d,g){b[0]=d[0]*g;b[1]=d[1]*g;b[2]=d[2]*g;b[3]=d[3]*g;b[4]=d[4]*g;b[5]=d[5]*g;return b};d.multiplyScalarAndAdd=function(b,d,g,e){b[0]=d[0]+g[0]*e;b[1]=d[1]+g[1]*e;b[2]=d[2]+g[2]*e;b[3]=d[3]+g[3]*e;b[4]=d[4]+g[4]*e;b[5]=d[5]+g[5]*e;return b};d.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===
d[5]};d.equals=function(b,d){var g=b[0],e=b[1],c=b[2],f=b[3],a=b[4];b=b[5];var h=d[0],k=d[1],l=d[2],t=d[3],r=d[4];d=d[5];return Math.abs(g-h)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(e-k)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(c-l)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(f-t)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(a-r)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(b-d)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};d.mul=
l;d.sub=k})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=n})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var l=new Float32Array(6);l[0]=d[0];l[1]=d[1];l[2]=d[2];l[3]=d[3];
l[4]=d[4];l[5]=d[5];return l};d.fromValues=function(d,l,k,b,h,g){var e=new Float32Array(6);e[0]=d;e[1]=l;e[2]=k;e[3]=b;e[4]=h;e[5]=g;return e};d.createView=function(d,l){return new Float32Array(d,l,6)}})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df64=n})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,
"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,l,k,b,h,g){return[d,l,k,b,h,g]};d.createView=function(d,l){return new Float64Array(d,l,6)}})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f32=n})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],
function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var l=new Float32Array(9);l[0]=d[0];l[1]=d[1];l[2]=d[2];l[3]=d[3];l[4]=d[4];l[5]=d[5];l[6]=d[6];l[7]=d[7];l[8]=d[8];return l};d.fromValues=function(d,l,k,b,h,g,e,c,f){var a=new Float32Array(9);a[0]=d;a[1]=l;a[2]=k;a[3]=b;a[4]=h;a[5]=g;a[6]=e;a[7]=c;a[8]=f;return a};d.createView=function(d,l){return new Float32Array(d,l,9)}})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require",
"exports"],function(r,d){function n(d){return d instanceof Float32Array&&2<=d.length}function l(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=n;d.isVec2f64=l;d.isVec2=function(d){return n(d)||l(d)}})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){function C(b,c,d,e){return e&&d&&!e.equals(d)&&z.canProject(e,d)&&e.isWebMercator?(e.isWebMercator?(d=c[1],89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999),d=Math.sin(a.common.toRadian(d)),b=v.vec2.set(b,a.common.toRadian(c[0])*J,.5*J*Math.log((1+d)/(1-d)))):(d=a.common.toDegree(c[0]/J),b=v.vec2.set(b,d-360*Math.floor((d+180)/360),a.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*c[1]/J))))),b):v.vec2.copy(b,c)}function F(a){return a.wkid?
a:a.spatialReference||m.WGS84}function E(a,b){return b.type?v.vec2.set(a,b.x,b.y):v.vec2.copy(a,b)}function N(a,b){return Math.max(a.width/b[0],a.height/b[1])*Z(a.spatialReference)}function L(a,b,c,d){return l(this,void 0,void 0,function(){var f,k,l,m,p,u,q,t,v,B,r,C,F,E,J,Q,G,I,H,U,X,N,O,K,A,ca,R,P;return n(this,function(n){switch(n.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];h.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
k=a.every(function(a){return"attributes"in a});l=a.some(function(a){return!a.geometry});m=a;if(!(k&&l&&b&&b.allLayerViews))return[3,2];p=new Map;u=0;for(q=a;u<q.length;u++)t=q[u],v=t.layer,B=p.get(v)||[],r=t.attributes[v.objectIdField],null!=r&&B.push(r),p.set(v,B);C=[];p.forEach(function(a,c){var d=b.allLayerViews.find(function(a){return a.layer.id===c.id});if("queryFeatures"in d){var e=c.createQuery();e.objectIds=a;e.returnGeometry=!0;C.push(d.queryFeatures(e))}});return[4,e.all(C)];case 1:F=n.sent();
E=[];J=0;for(Q=F;J<Q.length;J++)if((G=Q[J])&&G.features&&G.features.length)for(I=0,H=G.features;I<H.length;I++)t=H[I],g.isSome(t.geometry)&&E.push(t.geometry);m=E;n.label=2;case 2:U=0,X=m,n.label=3;case 3:if(!(U<X.length))return[3,6];N=X[U];return[4,L(N,b,c,d)];case 4:d=n.sent(),n.label=5;case 5:return U++,[3,3];case 6:return[2,d];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];f=new w(a);return[3,12];case 8:if(!(a instanceof x))return[3,9];f=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];f=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];O=a.layer;K=b.allLayerViews.find(function(a){return a.layer.id===O.id});if(!("queryFeatures"in K))return[3,12];A=O.createQuery();A.objectIds=[a.attributes[O.objectIdField]];A.returnGeometry=!0;return[4,K.queryFeatures(A)];case 11:ca=n.sent(),f=g.get(ca,"features",0,"geometry"),n.label=12;case 12:if(g.isNone(f))return[2,null];R="point"===f.type?new y({xmin:f.x,
ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference}):f.extent;if(!R)return[2,null];P=z.canProject(R,c);if(!R.spatialReference.equals(c)&&P)R=z.project(R,c);else if(!P)return[2,null];d=d?d.union(R):R.clone();return[2,d]}})})}function K(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var c=0,d=0,e=0;e<a.length;e++)(b=a[e].layer)&&b.minScale&&b.maxScale&&(c=b.minScale<c?b.minScale:c,d=b.maxScale>d?b.maxScale:d);return c&&d?{min:c,max:d}:null}}}function O(a,b){return l(this,void 0,void 0,function(){var c,d,e,f,g,h,l,m,p,u,q,v,x,r,J,Q;return n(this,function(n){switch(n.label){case 0:if(!a)return[2,new k({targetGeometry:new w,scale:0,rotation:0})];c=b.spatialReference;d=b.size;e=b.viewpoint;f=b.constraints;g=null;"esri.Viewpoint"===a.declaredClass?
g=a:a.viewpoint?g=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(g=a.target);h=null;if(!g||!g.targetGeometry)return[3,1];h=g.targetGeometry;return[3,10];case 1:if(!(a instanceof y))return[3,2];h=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,L(a.center,b,c)]:[3,10];case 3:return(p=n.sent())?[3,5]:[4,L(a.extent,b,c)];case 4:p=n.sent(),n.label=5;case 5:return(m=p)?[3,7]:[4,L(a.target,b,c)];case 6:m=n.sent(),
n.label=7;case 7:return(l=m)?[3,9]:[4,L(a,b,c)];case 8:l=n.sent(),n.label=9;case 9:h=l,n.label=10;case 10:!h&&e&&e.targetGeometry?h=e.targetGeometry:!h&&b.extent&&(h=b.extent);u=F(h);c||(c=F(b.spatialReference||b.extent||h));if(!B.canProject(h,c)&&u&&!u.equals(c))return[2,null];q=E(t.vec2f64.create(),h.center?h.center:h);v=new w(C(q,q,u,c),c);x=null;x=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&f&&f.effectiveLODs?
f.zoomToScale(a.zoom):Array.isArray(h)||"point"===h.type||"extent"===h.type&&0===h.width&&0===h.height?b.extent&&z.canProject(b.extent,c)?N(z.project(b.extent,c),d):b.extent?N(b.extent,d):e.scale:z.canProject(h.extent,c)?N(z.project(h.extent,c),d):N(h.extent,d);if(r=K(a))r.min&&r.min>x?x=r.min:r.max&&r.max<x&&(x=r.max);J=0;g?J=g.rotation:a.hasOwnProperty("rotation")?J=a.rotation:e&&(J=e.rotation);Q=new k({targetGeometry:v,scale:x,rotation:J});f&&(Q=f.fit(Q),f.rotationEnabled||(Q.rotation=J));return[2,
Q]}})})}function I(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function H(a,b,c){return c?v.vec2.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):v.vec2.scale(a,b,.5)}function S(a,b,c,e){d.getTransform(a,b,c,e);return p.mat2d.invert(a,a)}function P(a,b,c){var d=T(b);b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return v.vec2.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function V(a){var b=
a.scale;a=a.targetGeometry.spatialReference;a=u.isValid(a)?1/(39.37*c.getMetersPerUnitForSR(a)*96):1;return b*a}function T(b){return a.common.toRadian(b.rotation)||0}function Z(a){return u.isValid(a)?39.37*c.getMetersPerUnitForSR(a)*96:1}function Q(a){return a.isWrappable?(a=u.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var J=f.wgs84Radius,R=180/Math.PI;d.extentToScale=N;d.create=O;d.copy=I;d.getAnchor=H;d.getExtent=function(){var a=t.vec2f64.create();return function(b,
c,d){var e=c.targetGeometry;E(a,e);c=.5*V(c);b.xmin=a[0]-c*d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();d.setExtent=function(a,b,c,e,f){d.centerAt(a,b,c.center);a.scale=N(c,e);f&&f.constraints&&f.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(c,d,e){E(a,d.targetGeometry);P(b,d,e);e=.5*V(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+
e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();d.getOuterSize=P;d.getPaddingScreenTranslation=function(){var a=t.vec2f64.create();return function(b,c,d){return v.vec2.sub(b,v.vec2.scale(b,c,.5),H(a,c,d))}}();d.getPaddingMapTranslation=function(){var a=q.mat2df64.create(),b=t.vec2f64.create();return function(c,e,f,g){var h=V(e);e=T(e);v.vec2.set(b,h,h);p.mat2d.fromScaling(a,b);p.mat2d.rotate(a,a,e);p.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,f,g));p.mat2d.translate(a,
a,[0,g.top-g.bottom]);return v.vec2.set(c,a[4],a[5])}}();d.getResolution=V;d.getResolutionToScaleFactor=Z;d.getMatrix=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),c=t.vec2f64.create();return function(d,e,f,g,h,k){v.vec2.negate(a,e);v.vec2.scale(b,f,.5*k);v.vec2.set(c,1/g*k,-1/g*k);p.mat2d.identity(d);p.mat2d.translate(d,d,b);h&&p.mat2d.rotate(d,d,h);p.mat2d.scale(d,d,c);p.mat2d.translate(d,d,a);return d}}();d.getTransform=function(){var a=t.vec2f64.create();return function(b,c,e,f){var g=
V(c),h=T(c);E(a,c.targetGeometry);return d.getMatrix(b,a,e,g,h,f)}}();d.getTransformNoRotation=function(){var a=t.vec2f64.create();return function(b,c,e,f){var g=V(c);E(a,c.targetGeometry);return d.getMatrix(b,a,e,g,0,f)}}();d.getWorldWidth=Q;d.getWorldScreenWidth=function(a,b){return Math.round(Q(a)/b)};d.createAsync=function(a,c){return b.safeCast(O(a,c))};d.angleBetween=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),c=[0,0,0];return function(d,e,f){v.vec2.subtract(a,d,e);v.vec2.normalize(a,
a);v.vec2.subtract(b,d,f);v.vec2.normalize(b,b);v.vec2.cross(c,a,b);d=Math.acos(v.vec2.dot(a,b)/(v.vec2.length(a)*v.vec2.length(b)))*R;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();d.addPadding=function(){var a=t.vec2f64.create();return function(b,c,e,f){var g=b.targetGeometry;I(b,c);d.getPaddingMapTranslation(a,c,e,f);g.x+=a[0];g.y+=a[1];return b}}();d.removePadding=function(){var a=t.vec2f64.create();return function(b,c,e,f){var g=b.targetGeometry;I(b,c);d.getPaddingMapTranslation(a,c,e,f);g.x-=a[0];
g.y-=a[1];return b}}();d.centerAt=function(){var a=t.vec2f64.create();return function(b,c,d){I(b,c);c=b.targetGeometry;var e=F(d),f=F(c);E(a,d);C(a,a,e,f);c.x=a[0];c.y=a[1];return b}}();d.pixelSizeAt=function(a,b,c){return V(b)};d.resize=function(){var a=t.vec2f64.create();return function(b,c,e,f,g){g||(g="center");v.vec2.sub(a,e,f);v.vec2.scale(a,a,.5);e=a[0];f=a[1];switch(g){case "center":v.vec2.set(a,0,0);break;case "left":v.vec2.set(a,-e,0);break;case "top":v.vec2.set(a,0,f);break;case "right":v.vec2.set(a,
e,0);break;case "bottom":v.vec2.set(a,0,-f);break;case "top-left":v.vec2.set(a,-e,f);break;case "bottom-left":v.vec2.set(a,-e,-f);break;case "top-right":v.vec2.set(a,e,f);break;case "bottom-right":v.vec2.set(a,e,-f)}d.translateBy(b,c,a);return b}}();d.rotateBy=function(a,b,c){I(a,b);a.rotation+=c;return a};d.rotateTo=function(a,b,c){I(a,b);a.rotation=c;return a};d.scaleBy=function(){var a=t.vec2f64.create();return function(b,c,e,f,g){I(b,c);isNaN(e)||0===e||(d.toMap(a,f,c,g),b.scale=c.scale*e,d.toScreen(a,
a,b,g),d.translateBy(b,b,v.vec2.set(a,a[0]-f[0],f[1]-a[1])));return b}}();d.scaleTo=function(a,b,c){I(a,b);a.scale=c;return a};d.scaleAndRotateBy=function(){var a=t.vec2f64.create();return function(b,c,e,f,g,h){I(b,c);isNaN(e)||0===e||(d.toMap(a,g,c,h),b.scale=c.scale*e,b.rotation+=f,d.toScreen(a,a,b,h),d.translateBy(b,b,v.vec2.set(a,a[0]-g[0],g[1]-a[1])));return b}}();d.padAndScaleAndRotateBy=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(c,e,f,g,h,k,l){d.getPaddingScreenTranslation(b,
k,l);v.vec2.add(a,h,b);return g?d.scaleAndRotateBy(c,e,f,g,a,k):d.scaleBy(c,e,f,a,k)}}();d.toMap=function(){var a=q.mat2df64.create();return function(b,c,d,e){return v.vec2.transformMat2d(b,c,S(a,d,e,1))}}();d.toScreen=function(){var a=q.mat2df64.create();return function(b,c,e,f){return v.vec2.transformMat2d(b,c,d.getTransform(a,e,f,1))}}();d.translateBy=function(){var a=t.vec2f64.create(),b=q.mat2df64.create();return function(c,d,e){I(c,d);var f=V(d),g=c.targetGeometry;p.mat2d.fromRotation(b,T(d));
p.mat2d.scale(b,b,t.vec2f64.fromValues(f,f));v.vec2.transformMat2d(a,e,b);g.x+=a[0];g.y+=a[1];return c}}()})},"esri/views/3d/webgl-engine/shaders/TerrainRendererPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b=function(b){return k.glslifyDefineMap({OVERLAY:b.overlay,ATMOSPHERE:b.atmosphere,WIREFRAME_TEXTURE:b.wireframeTexture,TILE_BORDERS:b.tileBorders,
RECEIVE_SHADOWS:b.receiveShadows,SCREEN_SIZE_PERSPECTIVE:b.screenSizePerspective,ALPHA_ZERO:b.alphaZero,BIAS_SHADOWMAP:b.shadowMap,SLICE:b.slice})};d.colorPass={name:"terrain-color",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("terrainRenderer/colorPass.vert"),fragmentShader:b(d)+l.resolveIncludes("terrainRenderer/colorPass.frag")}},attributes:n.Default3D};d.normalPass={name:"terrain-normal",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("terrainRenderer/normalPass.vert"),
fragmentShader:b(d)+l.resolveIncludes("terrainRenderer/normalPass.frag")}},attributes:n.Default3D};d.depthPass={name:"terrain-depth",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("terrainRenderer/depthPass.vert"),fragmentShader:b(d)+l.resolveIncludes("terrainRenderer/depthPass.frag")}},attributes:n.Default3D};d.highlightPass={name:"terrain-highlight",shaders:function(d){return{vertexShader:b(d)+l.resolveIncludes("terrainRenderer/highlightPass.vert"),fragmentShader:b(d)+l.resolveIncludes("terrainRenderer/highlightPass.frag")}},
attributes:n.Default3D}})},"esri/views/3d/terrain/TilemapOnlyTile":function(){define(["require","exports","./TerrainConst","./TilePerLayerInfo"],function(r,d,n,l){return function(){function d(b,d){this.lij=b;this._pool=d;this.layerInfo=Array(n.LayerClass.COUNT);this.parent=null}d.prototype.hasDataAvailable=function(b,d,g){return(d=this.layerInfo[g][d].tilemap)?"unavailable"!==d.getAvailability(b.lij[1],b.lij[2]):!0};d.prototype.modifyLayers=function(b,d,g){b=this.layerInfo[g];for(var e=d.length,c=
Array(e),f=0;f<e;f++){var a=d[f];c[f]=-1<a?b[a]:l.TilePerLayerInfo.makeEmptyLayerInfo(g,this._pool)}this.layerInfo[g]=c};return d}()})},"esri/views/3d/terrain/UpsampleInfo":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2f64"],function(r,d,n){return function(){function d(){this.offset=n.vec2f64.create();this.scale=0;this.tile=null}d.prototype.init=function(d,b,h,g){this.tile=d;this.offset[0]=b;this.offset[1]=h;this.scale=g};d.prototype.dispose=function(){this.tile=null;
this.offset[0]=0;this.scale=this.offset[1]=0};return d}()})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b={supportsMajorWebPerformanceCaveat:!1};d.check=function(d){d=n({},b,d);return k("esri-webgl")?!d.supportsMajorWebPerformanceCaveat&&k("esri-webgl-major-performance-caveat")?new l("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):k("esri-webgl-high-precision-fragment")?k("esri-webgl-vertex-shader-samplers")?k("esri-webgl-element-index-uint")?k("esri-webgl-standard-derivatives")?k("esri-webgl-instanced-arrays")?null:new l("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new l("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new l("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new l("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new l("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new l("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/3d/DefaultUI3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(r,d,n,l,k,b){return function(b){function d(d){d=b.call(this)||this;d.components=["attribution","zoom","navigation-toggle","compass"];return d}n(d,b);l([k.property()],d.prototype,"components",void 0);return d=l([k.subclass("esri.views.ui.3d.DefaultUI3D")],d)}(k.declared(b))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){return function(d){function g(a){a=d.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}n(g,d);g.prototype.initialize=function(){this._handles.add([k.init(this,"components",this._componentsWatcher.bind(this)),k.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new h({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new e({view:this.view})};g.prototype._createCompass=function(){return new c({view:this.view})};
g.prototype._createNavigationToggle=function(){return new f({view:this.view})};g.prototype._createZoom=function(){return new a({view:this.view})};l([b.property()],g.prototype,"components",void 0);return g=l([b.subclass("esri.views.ui.DefaultUI")],g)}(b.declared(g))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(r,
d,n,l,k,b,h){return function(d){function e(){var b=null!==d&&d.apply(this,arguments)||this;b.widget=null;return b}n(e,d);e.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(e.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(b){this._set("id",b)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"node",{set:function(b){var c=this._get("node");b!==c&&(b&&b.classList.add("esri-component"),c&&c.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});e.prototype.castNode=function(c){if(!c)return this._set("widget",null),null;if("string"===typeof c||c&&"nodeType"in c)return this._set("widget",null),b.byId(c);c&&"function"===typeof c.render&&!c.domNode&&(c.domNode=document.createElement("div"));this._set("widget",c);return c.domNode};l([h.property()],e.prototype,"id",null);l([h.property()],e.prototype,"node",null);l([h.cast("node")],e.prototype,"castNode",null);l([h.property({readOnly:!0})],
e.prototype,"widget",void 0);return e=l([h.subclass("esri.views.ui.Component")],e)}(h.declared(k))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(b){return"object"!==
typeof b||b&&b.isInstanceOf&&b.isInstanceOf(a)||!("component"in b||"index"in b||"position"in b)?null:b}function v(a,b){var c=b.bottom,d=b.left,e=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=e}var t={left:0,top:0,bottom:0,right:0},y={bottom:30,top:15,right:15,left:15};return function(b){function d(a){a=b.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new e;a._componentToKey=new Map;a.view=null;a._initContainers();
return a}l(d,b);d.prototype.initialize=function(){this._handles.add([c.init(this,"view.padding, container",this._applyViewPadding.bind(this)),c.init(this,"padding",this._applyUIPadding.bind(this))])};d.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(d.prototype,"container",{set:function(a){var b=this._get("container");a!==
b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),v(b,{top:"",bottom:"",left:"",right:""}),h.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});d.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:n({},y,a)};Object.defineProperty(d.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});d.prototype.add=function(b,c){var d=this,e,f;if(Array.isArray(b))b.forEach(function(a){return d.add(a,
c)});else{var g=q(b);g&&(e=g.index,c=g.position,b=g.component,f=g.key);c&&"object"===typeof c&&(e=c.index,f=c.key,c=c.position);!b||c&&!this._isValidPosition(c)||(b&&b.isInstanceOf&&b.isInstanceOf(a)||(b=new a({node:b})),this._place({component:b,position:c,index:e}),this._components.push(b),f&&this._componentToKey.set(b,f))}};d.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var e=this._componentToKey;if(!e.has(a)||
e.get(a)===b)return e=this._components.indexOf(d),d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};d.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};d.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=q(a)||q(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};d.prototype.find=function(b){return b?b&&b.isInstanceOf&&b.isInstanceOf(a)?this._findByComponent(b):"string"===
typeof b?this._findById(b):this._findByNode(b.domNode||b):null};d.prototype._getViewPadding=function(){return this.get("view.padding")||t};d.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};d.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var c=document.createElement("div");c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");a.appendChild(f);this._innerContainer=
a;this._manualContainer=b;a=p.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":f,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?f:e,"bottom-trailing":a?e:f};this._positionNameToContainerLookup=n({manual:b},this._cornerNameToContainerLookup)};d.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};d.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var d=-1<c,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===c?a.firstChild?h.insertBefore(b.node,a.firstChild):a.appendChild(b.node):c>=d.length?a.appendChild(b.node):h.insertBefore(b.node,d[c])):a.appendChild(b.node)};d.prototype._applyViewPadding=function(){var a=this.container;a&&v(a,this._toPxPosition(this._getViewPadding()))};
d.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&v(a,this._toPxPosition(this.padding))};d.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};d.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};d.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};d.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};d.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};k([f.property()],d.prototype,"container",null);k([f.property({dependsOn:["view.height"]})],d.prototype,"height",null);k([f.property({value:y})],d.prototype,"padding",null);k([f.cast("padding")],d.prototype,"castPadding",null);k([f.property()],d.prototype,"view",void 0);k([f.property({dependsOn:["view.width"]})],
d.prototype,"width",null);return d=k([f.subclass("esri.views.ui.UI")],d)}(f.declared(b,g))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this)||this;a._isOpen=!1;a._attributionTextOverflowed=
!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=k.widgetLabel;a.view=null;a.viewModel=new e;return a}n(a,d);a.prototype.postInitialize=function(){var a=this;this.own(b.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(a.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,
configurable:!0});a.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return c.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),c.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",c.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:this.classes("esri-attribution__link","esri-widget__anchor")},"Esri")))};a.prototype._renderSourcesNode=
function(){var a,b=this._isOpen,d=this._isInteractive(),e=d?0:-1,f=this.attributionText,g=d?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=d,a);return c.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:f,role:g,tabIndex:e})};a.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};a.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};a.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};a.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};l([h.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),c.renderable()],a.prototype,"attributionText",null);l([h.property()],a.prototype,"iconClass",void 0);l([h.property(),c.renderable()],a.prototype,"itemDelimiter",void 0);l([h.property()],a.prototype,"label",void 0);l([h.aliasOf("viewModel.view")],a.prototype,"view",void 0);l([h.property({type:e}),c.renderable(["state","view.size"])],a.prototype,"viewModel",void 0);l([c.accessibleHandler()],a.prototype,"_toggleState",null);return a=l([h.subclass("esri.widgets.Attribution")],
a)}(h.declared(g))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(r,d,n,l,k,b,
h,g,e,c,f,a,p,q){function v(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function t(a,b,c){c&&b&&(g.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var y=[];return function(c){function d(a){var b=c.call(this,a)||this;b.clear=function(){b._fetchedAttributionData.clear();b._pendingAttributions.clear();b.handles.remove("suspension")};b._pendingAttributions=new Set;b._fetchedAttributionData=new Map;b.items=new e;b.view=null;b._allLayerViewsChange=
function(a){b.handles.remove("suspension");var c=b.get("view.allLayerViews");c&&b.handles.add(c.map(function(a){return a.watch(["suspended","attributionVisible"],b._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){b._pendingAttributions.delete(a);b._fetchedAttributionData.delete(a)});b._updateAttributionItems()};b._updateAttributionItems=function(){var a=b.get("view.allLayerViews");y.length=0;a?(a.forEach(function(a){if(!a.suspended&&a.get("layer.attributionVisible")){var c=
a.layer;if(c&&"function"===typeof c.originOf&&"user"===c.originOf("copyright"))t(y,a,c.copyright);else if(c.hasAttributionData)if(b._fetchedAttributionData.has(a)){var d=b._fetchedAttributionData.get(a);d&&t(y,a,b._getDynamicAttribution(d,b.view,c))}else b._fetchAttributionData(a);else(d=c.get("portalItem.accessInformation"))?t(y,a,d):t(y,a,c.copyright)}}),v(b.items,y)&&(b.items.removeAll(),b.items.addMany(y))):b.clear()};b.handles.add([f.on(b,"view.allLayerViews","change",b._allLayerViewsChange,
b._allLayerViewsChange,b.clear),f.whenTrue(b,"view.stationary",function(){return b._updateAttributionItems()})]);return b}n(d,c);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});d.prototype._fetchAttributionData=function(a){return k(this,void 0,void 0,function(){var c,d;return b(this,function(b){switch(b.label){case 0:if(this._pendingAttributions.has(a))return[2];
this._pendingAttributions.add(a);c=null;b.label=1;case 1:return b.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return d=b.sent(),c=this._createContributionIndex(d,"bing-maps"===a.layer.type),[3,4];case 3:return b.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,c)),this._updateAttributionItems(),[2]}})})};d.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=
0;d<a.length;d++){var e=a[d],f=e.coverageAreas;if(!f)return;for(var g=0;g<f.length;g++)for(var k=f[g],l=k.bbox,m=k.zoomMin-(b&&k.zoomMin?1:0),p=k.zoomMax-(b&&k.zoomMax?1:0),k={extent:q.geographicToWebMercator({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:h.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=k.score?k.score:100,id:d};m<=p;m++)c[m]=c[m]||[],c[m].push(k)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};d.prototype._getDynamicAttribution=function(a,b,
c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=q.project(d.center.clone().normalize(),b.spatialReference),f={};return a?a.filter(function(a){var b=!f[a.id]&&e&&p.extentContainsPoint(a.extent,e);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};l([a.property({readOnly:!0,type:e})],d.prototype,"items",void 0);l([a.property({dependsOn:["view.ready"],
readOnly:!0})],d.prototype,"state",null);l([a.property()],d.prototype,"view",void 0);return d=l([a.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(a.declared(c))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),function(r,d,n,l,k,b,h,g,e){return function(c){function d(a){a=
c.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=k.widgetLabel;a.view=null;a.viewModel=new g;return a}n(d,c);d.prototype.reset=function(){};d.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,f="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=!g,b);return e.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",
f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":k.reset,title:k.reset},e.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},k.reset))};d.prototype._reset=function(){this.viewModel.reset()};d.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};l([b.aliasOf("viewModel.goToOverride")],d.prototype,"goToOverride",void 0);l([b.property()],
d.prototype,"iconClass",void 0);l([b.property()],d.prototype,"label",void 0);l([b.aliasOf("viewModel.view")],d.prototype,"view",void 0);l([b.property({type:g}),e.renderable(["viewModel.orientation","viewModel.state"])],d.prototype,"viewModel",void 0);l([b.aliasOf("viewModel.reset")],d.prototype,"reset",null);l([e.accessibleHandler()],d.prototype,"_reset",null);return d=l([b.subclass("esri.widgets.Compass")],d)}(b.declared(h))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(r,d,n,l,k,b,h,g,e){return function(c){function d(a){a=c.call(this,a)||this;a._handles=new b;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);return a}n(d,c);d.prototype.initialize=function(){this._handles.add(h.init(this,"view",this._updateRotationWatcher))};d.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(d.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});d.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};d.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};d.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};d.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(h.init(this,"view.rotation",this._updateForRotation)):this._handles.add(h.init(this,"view.camera",this._updateForCamera)))};l([g.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],d.prototype,"canShowNorth",null);
l([g.property()],d.prototype,"orientation",void 0);l([g.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],d.prototype,"state",null);l([g.property()],d.prototype,"view",void 0);l([g.property()],d.prototype,"reset",null);return d=l([g.subclass("esri.widgets.CompassViewModel")],d)}(g.declared(k,e))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(r,d,n,l,k,b,h,g,e){return function(c){function d(a){a=c.call(this)||this;a.iconClass="esri-icon-pan2";a.label=k.widgetLabel;a.view=null;a.viewModel=new g;return a}n(d,c);Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.toggle=function(){};d.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=
d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=f,b);b=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=d?-1:0;return e.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":k.toggle,title:k.toggle},e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},e.tsx("span",{class:"esri-icon-pan"})),e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},e.tsx("span",{class:"esri-icon-rotate"})))};d.prototype._toggle=function(){this.toggle()};l([b.property()],d.prototype,"iconClass",void 0);l([b.property()],d.prototype,"label",void 0);l([b.property({value:"vertical"}),e.renderable()],d.prototype,"layout",null);l([b.aliasOf("viewModel.view"),e.renderable()],d.prototype,"view",void 0);
l([b.property({type:g}),e.renderable(["viewModel.state","viewModel.navigationMode"])],d.prototype,"viewModel",void 0);l([b.aliasOf("viewModel.toggle")],d.prototype,"toggle",null);l([e.accessibleHandler()],d.prototype,"_toggle",null);return d=l([b.subclass("esri.widgets.NavigationToggle")],d)}(b.declared(h))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g){return function(d){function c(c){c=d.call(this,c)||this;c._handles=new b;c.navigationMode="pan";c.view=null;c.toggle=c.toggle.bind(c);return c}n(c,d);c.prototype.initialize=function(){this._handles.add(h.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};c.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});c.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};c.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};l([g.property({dependsOn:["view.ready"],readOnly:!0})],c.prototype,"state",null);l([g.property()],c.prototype,"navigationMode",void 0);l([g.property()],c.prototype,"view",void 0);
l([g.property()],c.prototype,"toggle",null);return c=l([g.subclass("esri.widgets.NavigationToggleViewModel")],c)}(g.declared(k))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";
a.label=k.widgetLabel;a.view=null;a.viewModel=new e;return a}n(a,d);a.prototype.postInitialize=function(){this._zoomInButton=new g({action:this.zoomIn,iconClass:"esri-icon-plus",title:k.zoomIn});this._zoomOutButton=new g({action:this.zoomOut,iconClass:"esri-icon-minus",title:k.zoomOut})};Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.render=function(){var a,b=this.viewModel,d=(a={},a["esri-zoom--horizontal"]=
"horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===b.state&&b.canZoomIn;this._zoomOutButton.enabled="ready"===b.state&&b.canZoomOut;return c.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};a.prototype.zoomIn=function(){};a.prototype.zoomOut=function(){};l([b.property()],a.prototype,"iconClass",void 0);l([b.property()],a.prototype,"label",void 0);l([b.property({value:"vertical"}),c.renderable()],a.prototype,"layout",
null);l([b.aliasOf("viewModel.view"),c.renderable()],a.prototype,"view",void 0);l([b.property({type:e}),c.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],a.prototype,"viewModel",void 0);l([b.aliasOf("viewModel.zoomIn")],a.prototype,"zoomIn",null);l([b.aliasOf("viewModel.zoomOut")],a.prototype,"zoomOut",null);return a=l([b.subclass("esri.widgets.Zoom")],a)}(b.declared(h))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(r,d,n,l,k,b,h){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.enabled=!0;c.iconClass="";c.title="";return c}n(d,b);d.prototype.render=function(){var b,d,a=this.enabled?0:-1,e=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(d={},d[this.iconClass]=!!this.iconClass,d);return h.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,
title:this.title},h.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),h.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};l([k.property()],d.prototype,"action",void 0);l([k.property(),h.renderable()],d.prototype,"enabled",void 0);l([k.property(),h.renderable()],d.prototype,"iconClass",void 0);l([k.property(),h.renderable()],d.prototype,"title",void 0);l([h.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=l([k.subclass("esri.widgets.IconButton")],d)}(k.declared(b))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(r,d,n,l,k,b,h,g){return function(d){function c(b){b=d.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;b.zoomIn=b.zoomIn.bind(b);b.zoomOut=b.zoomOut.bind(b);
return b}n(c,d);c.prototype.destroy=function(){this.view=null};Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"view",{set:function(b){b?"2d"===b.type?this._zoomConditions=new h({view:b}):"3d"===b.type&&(this._zoomConditions=new g({view:b})):this._zoomConditions=null;this._set("view",b)},enumerable:!0,configurable:!0});c.prototype.zoomIn=function(){if(this.canZoomIn){var b=
this.view;"2d"===b.type?b.mapViewNavigation.zoomIn():b.goTo({zoomFactor:2})}};c.prototype.zoomOut=function(){if(this.canZoomOut){var b=this.view;"2d"===b.type?b.mapViewNavigation.zoomOut():b.goTo({zoomFactor:.5})}};l([b.property()],c.prototype,"_zoomConditions",void 0);l([b.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],c.prototype,"canZoomIn",void 0);l([b.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],c.prototype,"canZoomOut",void 0);l([b.property({dependsOn:["view.ready"],
readOnly:!0})],c.prototype,"state",null);l([b.property()],c.prototype,"view",null);l([b.property()],c.prototype,"zoomIn",null);l([b.property()],c.prototype,"zoomOut",null);return c=l([b.subclass("esri.widgets.Zoom.ZoomViewModel")],c)}(b.declared(k))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){return function(d){function g(){return null!==
d&&d.apply(this,arguments)||this}n(g,d);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var b=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMaxScale");return 0===c||b>c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var b=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMinScale");
return 0===c||b<c},enumerable:!0,configurable:!0});l([b.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],g.prototype,"canZoomIn",null);l([b.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],g.prototype,"canZoomOut",null);l([b.property()],g.prototype,"view",void 0);return g=l([b.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)}(b.declared(k))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){return function(d){function g(){return null!==d&&d.apply(this,arguments)||this}n(g,d);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});l([b.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);l([b.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);l([b.property()],g.prototype,"view",void 0);return g=l([b.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(b.declared(k))})},"esri/layers/SceneLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../PopupTemplate ../renderers ../request ../core/asyncUtils ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/watchUtils ../core/accessorSupport/decorators ../core/accessorSupport/PropertyOrigin ../core/accessorSupport/utils ./FeatureLayer ./Layer ./mixins/ScaleRangeLayer ./mixins/SceneService ./support/commonProperties ./support/commonProperties ./support/FeatureReduction ./support/FeatureReductionSelection ./support/fieldProperties ./support/FieldsIndex ./support/fieldUtils ./support/I3SLayerDefinitions ./support/LabelClass ./support/labelingInfo ./support/RangeInfo ../portal/PortalItem ../renderers/support/jsonUtils ../renderers/support/styleUtils ../support/popupUtils ../tasks/support/Query".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q,J,R){function U(a,b,c){a&&((a=Z.read(a,b,c)||void 0)||ca.error("Failed to create renderer",{rendererDefinition:a,layer:this,context:c}));return a}var X=["3DObject","Point"],ca=p.getLogger("esri.layers.SceneLayer"),G=K.defineFieldProperties(),Y={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",
polygons:"polygons","features-polygons":"polygons"},la={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"};return function(d){function p(a,b){a=d.call(this)||this;a.featureReduction=null;a.rangeInfos=null;a.operationalLayerType="ArcGISSceneServiceLayer";a.type="scene";a.fields=null;a.outFields=null;a.nodePages=null;a.materialDefinitions=null;a.textureSetDefinitions=null;a.geometryDefinitions=null;a.definitionExpression=null;a.path=null;a.labelsVisible=!0;a.labelingInfo=null;
a.legendEnabled=!0;a.cachedDrawingInfo={color:!1};a.popupEnabled=!0;a.popupTemplate=null;a.objectIdField=null;a.objectIdFilter=null;a._fieldUsageInfo={};a.screenSizePerspectiveEnabled=!0;return a}l(p,d);p.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};p.prototype.getField=function(a){return this.fieldsIndex.get(a)};p.prototype.getFieldDomain=function(a){return(a=this.getField(a))&&a.domain?a.domain:null};Object.defineProperty(p.prototype,"fieldsIndex",{get:function(){return new O(this.fields)},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"elevationInfo",{set:function(a){this._set("elevationInfo",a);this.loaded&&this._validateElevationInfo()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"geometryType",{get:function(){return la[this.profile]||"mesh"},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"renderer",{set:function(a){I.fixRendererFields(a,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});p.prototype.readCachedDrawingInfo=
function(a,b){if(null==a||"object"!==typeof a)a={};null==a.color&&(a.color=!1);return a};Object.defineProperty(p.prototype,"defaultPopupTemplate",{get:function(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null},enumerable:!0,configurable:!0});p.prototype.readObjectIdField=function(a,b){!a&&b.fields&&b.fields.some(function(b){"esriFieldTypeOID"===b.type&&(a=b.name);return!!a});return a||void 0};p.prototype.readProfile=function(a,b){a=b.store.profile;if(null!=
a&&Y[a])return Y[a];ca.error("Unknown or missing profile",{profile:a,layer:this});return"mesh-pyramids"};p.prototype.load=function(a){var b=this,c=q.isSome(a)?a.signal:null;a=f.safeCast(this.loadFromPortal({supportedTypes:["Scene Service"]},a)).then(function(){return f.safeCast(b._fetchService(c))},function(){return f.safeCast(b._fetchService(c))}).then(function(){return v.all([b._verifyRootNodeAndUpdateExtent(c),b._setAssociatedFeatureLayer(c)])}).then(function(){return b._validateElevationInfo()}).then(function(){return b._applyAssociatedLayerOverrides()}).then(function(){return b._populateFieldUsageInfo()}).then(function(){return Q.loadStyleRenderer(b,
{origin:"service"},c)}).then(function(){return I.fixRendererFields(b.renderer,b.fields)});this.addResolvingPromise(a);return this.when()};p.prototype.importLayerViewModule=function(c){return h(this,void 0,void 0,function(){return b(this,function(b){return"2d"===c.type?[2,v.reject(new a("scene-layer:view-not-supported","SceneLayer is only supported in 3D"))]:null==this.profile||"mesh-pyramids"===this.profile?[2,v.create(function(a){return r(["../views/3d/layers/SceneLayerView3D"],a)})]:[2,v.create(function(a){return r(["../views/3d/layers/SceneLayerGraphicsView3D"],
a)})]})})};p.prototype.createQuery=function(){var a=new R;"mesh"!==this.geometryType&&(a.returnGeometry=!0,a.returnZ=!0);a.where=this.definitionExpression||"1\x3d1";a.sqlFormat="standard";return a};p.prototype.queryExtent=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryExtent(a||c.createQuery(),b)})};p.prototype.queryFeatureCount=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryFeatureCount(a||c.createQuery(),
b)})};p.prototype.queryFeatures=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryFeatures(a||c.createQuery(),b)}).then(function(a){if(a&&a.features)for(var b=0,d=a.features;b<d.length;b++){var e=d[b];e.layer=c;e.sourceLayer=c}return a})};p.prototype.queryObjectIds=function(a,b){var c=this;return this._getAssociatedLayerForQuery().then(function(d){return d.queryObjectIds(a||c.createQuery(),b)})};p.prototype.getFieldUsageInfo=function(a){var b={supportsLabelingInfo:!1,
supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[a]||b:(ca.error("#getFieldUsageInfo()","Unavailable until layer is loaded"),b)};p.prototype.createPopupTemplate=function(a){return J.createPopupTemplate(this,a)};p.prototype._getAssociatedLayerForQuery=function(){var b=this;if(!this.loaded)return this.load().then(function(){return b._getAssociatedLayerForQuery()});var c=this.associatedLayer;return null!=c?v.resolve(c):v.reject(new a("scenelayer:query-not-available",
"SceneLayer queries are not available without associated feature layer"))};p.prototype.hasCachedStatistics=function(a){return null!=this.statisticsInfo&&this.statisticsInfo.some(function(b){return b.name===a})};p.prototype.queryCachedStatistics=function(b){if(!this.hasCachedStatistics(b))return v.reject(new a("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available"));for(var d=0,e=this.statisticsInfo;d<e.length;d++){var f=e[d];if(f.name===b)return b=t.join(this.parsedUrl.path,
f.href),c(b,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data})}};p.prototype._validateLayer=function(b){if(b.layerType&&-1===X.indexOf(b.layerType))throw new a("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:b.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});
if(1<this.version.major)throw new a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});b=this.normalReferenceFrame;var c=this.spatialReference,d=!1,e=!1;if(null==b)e=d=!0;else switch(c=c&&c.isGeographic,b){case "east-north-up":case "earth-centered":d=!0;e=c;break;case "vertex-reference-frame":d=!0;e=!c;break;default:d=!1}if(!d)throw new a("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");
if(!e)throw new a("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.");};p.prototype._populateFieldUsageInfo=function(){this._fieldUsageInfo={};if(this.fields)for(var a=function(a){var c=!(!b.attributeStorageInfo||!b.attributeStorageInfo.some(function(b){return b.name===a.name})),d=!!(b.associatedLayer&&b.associatedLayer.fields&&b.associatedLayer.fields.some(function(b){return b&&a.name===b.name}));b._fieldUsageInfo[a.name]={supportsLabelingInfo:c,
supportsRenderer:c,supportsPopupTemplate:c||d,supportsLayerQuery:d}},b=this,c=0,d=this.fields;c<d.length;c++)a(d[c])};p.prototype._applyAssociatedLayerOverrides=function(){if(this.associatedLayer){if(this.associatedLayer.fields){for(var a=null,b=0,c=this.associatedLayer.fields;b<c.length;b++){var d=c[b];this.getField(d.name)||(a||(a=this.fields?this.fields.slice():[]),a.push(d.clone()))}a&&this._set("fields",a)}a=["popupTemplate","popupEnabled"];b=m.getProperties(this);for(c=0;c<a.length;c++)d=a[c],
this._buddyIsMoreImportant(d)&&(b.setDefaultOrigin(this.associatedLayer.originOf(d)),b.set(d,this.associatedLayer[d]),b.setDefaultOrigin("user"))}};p.prototype._setAssociatedFeatureLayer=function(a){return h(this,void 0,void 0,function(){var c;return b(this,function(b){switch(b.label){case 0:return[4,this._fetchAssociatedFeatureLayer(a)];case 1:return this.associatedLayer=c=b.sent(),[2]}})})};p.prototype._fetchAssociatedFeatureLayer=function(a){return h(this,void 0,void 0,function(){var c;return b(this,
function(b){switch(b.label){case 0:if(-1===["mesh-pyramids","points"].indexOf(this.profile))return[2,null];b.label=1;case 1:return b.trys.push([1,4,,5]),[4,this.portalItem&&this.portalItem.isResolved()?this._fetchAssociatedFeatureLayerFromRelatedItems(this.portalItem,a):this._fetchAssociatedFeatureLayerFromUrl(a)];case 2:return c=b.sent(),[4,c.load({signal:a})];case 3:return[2,b.sent()];case 4:return b.sent(),this._logWarningOnPopupEnabled(),[2,null];case 5:return[2]}})})};p.prototype._logWarningOnPopupEnabled=
function(){var a=this;y.whenValidOnce(this,["popupTemplate","popupEnabled"],function(){return a.popupEnabled&&null!=a.popupTemplate}).then(function(){return function(){var b="this SceneLayer: "+a.title;null==a.attributeStorageInfo?ca.warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on "+b):ca.info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on "+b)}})};p.prototype._fetchAssociatedFeatureLayerFromRelatedItems=
function(a,c){return h(this,void 0,void 0,function(){var d,e;return b(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),[4,a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:c})];case 1:return d=b.sent(),(e=d.filter(function(a){return"Feature Service"===a.type})[0])?[4,this._fetchAssociatedFeatureLayerFromPortalItem(new T({id:e.id,portal:e.portal}),c)]:[3,3];case 2:return[2,b.sent()];case 3:throw Error();case 4:return b.sent(),[2,this._fetchAssociatedFeatureLayerFromUrl(c)];
case 5:return[2]}})})};p.prototype._fetchAssociatedFeatureLayerFromPortalItem=function(a,c){return h(this,void 0,void 0,function(){var d;return b(this,function(b){switch(b.label){case 0:return[4,a.load({signal:c})];case 1:return b.sent(),[4,this._findMatchingAssociatedSublayerUrl(a.url,c)];case 2:return d=b.sent(),[2,new u({url:d,portalItem:a})]}})})};p.prototype._fetchAssociatedFeatureLayerFromUrl=function(a){return h(this,void 0,void 0,function(){var c;return b(this,function(b){switch(b.label){case 0:return[4,
this._findMatchingAssociatedSublayerUrl(null,a)];case 1:return c=b.sent(),[2,new u({url:c})]}})})};p.prototype._findMatchingAssociatedSublayerUrl=function(a,d){void 0===a&&(a=null);return h(this,void 0,void 0,function(){var e,f,g,h,k,l,m,p,u,n,q,z,t,w;return b(this,function(b){switch(b.label){case 0:e=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);if(!e)return[2,v.reject()];null==a&&(a=e[1]+"/FeatureServer");f=a.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1");g={query:{f:"json"},
responseType:"json",signal:d};h=e[1]+"/SceneServer";k=parseInt(e[2],10);l=c(h,g).catch(function(a){return{data:{layers:null}}});m=c(f,g);return[4,v.all([m,l])];case 1:p=b.sent();u=p[0];n=p[1];q=n.data&&n.data.layers;z=u.data&&u.data.layers;if(!Array.isArray(z))throw Error("expected layers array");if(Array.isArray(q))for(t=0;t<Math.min(q.length,z.length);t++){if(w=q[t],w.id===k)return[2,f+"/"+z[t].id]}else if(k<z.length)return[2,f+"/"+z[k].id];throw Error("could not find matching associated sublayer");
}})})};p.prototype._buddyIsMoreImportant=function(a){if(!this.associatedLayer)return!1;var b=w.nameToId(this.originOf(a));a=w.nameToId(this.associatedLayer.originOf(a));return null!=a&&a<=w.OriginId.SERVICE?null==b||b<w.OriginId.SERVICE:null!=a&&a<=w.OriginId.PORTAL_ITEM?null==b||b<w.OriginId.PORTAL_ITEM:!1};p.prototype._validateElevationInfo=function(){var a=this.elevationInfo;a&&("mesh-pyramids"===this.profile&&"absolute-height"!==a.mode&&ca.warn(".elevationInfo\x3d","Mesh scene layers only support absolute-height elevation mode"),
a.featureExpressionInfo&&"0"!==a.featureExpressionInfo.expression&&ca.warn(".elevationInfo\x3d","Scene layers do not support featureExpressionInfo"))};k([x.shared("esri.layers.SceneLayer")],p.prototype,"declaredClass",void 0);k([x.property({types:{key:"type",base:N.default,typeMap:{selection:L.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],p.prototype,"featureReduction",void 0);k([x.property({type:[V.default],
json:{read:!1,origins:{"web-scene":{read:{source:"layerDefinition.rangeInfos"},write:{target:"layerDefinition.rangeInfos"}}}}})],p.prototype,"rangeInfos",void 0);k([x.property({json:{read:!1}})],p.prototype,"associatedLayer",void 0);k([x.property({type:["show","hide"]})],p.prototype,"listMode",void 0);k([x.property({type:["ArcGISSceneServiceLayer"]})],p.prototype,"operationalLayerType",void 0);k([x.property({json:{read:!1},readOnly:!0})],p.prototype,"type",void 0);k([x.property(n({},G.fields,{readOnly:!0,
json:{read:!1,origins:{service:{read:!0}}}}))],p.prototype,"fields",void 0);k([x.property({readOnly:!0,dependsOn:["fields"]})],p.prototype,"fieldsIndex",null);k([x.property(G.outFields)],p.prototype,"outFields",void 0);k([x.property({type:H.I3SNodePageDefinition,readOnly:!0})],p.prototype,"nodePages",void 0);k([x.property({type:[H.I3SMaterialDefinition],readOnly:!0})],p.prototype,"materialDefinitions",void 0);k([x.property({type:[H.I3STextureSetDefinition],readOnly:!0})],p.prototype,"textureSetDefinitions",
void 0);k([x.property({type:[H.I3SGeometryDefinition],readOnly:!0})],p.prototype,"geometryDefinitions",void 0);k([x.property({readOnly:!0})],p.prototype,"attributeStorageInfo",void 0);k([x.property({readOnly:!0})],p.prototype,"statisticsInfo",void 0);k([x.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],p.prototype,"definitionExpression",void 0);k([x.property({type:String,
json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],p.prototype,"path",void 0);k([x.property(F.elevationInfo)],p.prototype,"elevationInfo",null);k([x.property({type:String,dependsOn:["profile"]})],p.prototype,"geometryType",null);k([x.property(F.labelsVisible)],p.prototype,"labelsVisible",void 0);k([x.property({type:[S],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:P.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",
reader:P.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],p.prototype,"labelingInfo",void 0);k([x.property(F.legendEnabled)],p.prototype,"legendEnabled",void 0);k([x.property({types:e.webSceneRendererTypes,json:{origins:{service:{read:{source:"drawingInfo.renderer",reader:U}}},read:{source:"layerDefinition.drawingInfo.renderer",reader:U},write:{target:"layerDefinition.drawingInfo.renderer"}},value:null})],p.prototype,"renderer",null);k([x.property({json:{read:!1}})],p.prototype,
"cachedDrawingInfo",void 0);k([x.reader("service","cachedDrawingInfo")],p.prototype,"readCachedDrawingInfo",null);k([x.property(F.popupEnabled)],p.prototype,"popupEnabled",void 0);k([x.property({type:g,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",void 0);k([x.property({readOnly:!0,json:{read:!1},dependsOn:["fields","title","attributeStorageInfo","associatedLayer"]})],p.prototype,"defaultPopupTemplate",null);k([x.property({type:String,json:{read:!1}})],
p.prototype,"objectIdField",void 0);k([x.reader("service","objectIdField",["objectIdField","fields"])],p.prototype,"readObjectIdField",null);k([x.property({json:{read:!1}})],p.prototype,"objectIdFilter",void 0);k([x.property({type:String,json:{read:!1}})],p.prototype,"profile",void 0);k([x.reader("service","profile",["store.profile"])],p.prototype,"readProfile",null);k([x.property({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],p.prototype,
"normalReferenceFrame",void 0);k([x.property(E.screenSizePerspectiveEnabled)],p.prototype,"screenSizePerspectiveEnabled",void 0);return p=k([x.subclass("esri.layers.SceneLayer")],p)}(x.declared(z,C,B))})},"esri/layers/mixins/SceneService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/Error ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/HeightModelInfo ../../geometry/SpatialReference ../Layer ./ArcGISService ./OperationalLayer ./PortalLayer ../support/arcgisLayerUrl ../support/commonProperties".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u){var z=e.getLogger("esri.layers.mixins.SceneService");return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.blendMode=null;a.spatialReference=null;a.fullExtent=null;a.heightModelInfo=null;a.minScale=0;a.maxScale=0;a.version={major:Number.NaN,minor:Number.NaN,versionString:""};a.copyright=null;a.sublayerTitleMode="item-title";a.title=null;a.layerId=null;return a}n(d,c);d.prototype.readSpatialReference=function(a,b){return this._readSpatialReference(b)};
d.prototype._readSpatialReference=function(a){if(null!=a.spatialReference)return v.fromJSON(a.spatialReference);a=a.store;a=(a=a.indexCRS||a.geographicCRS)&&parseInt(a.substring(a.lastIndexOf("/")+1,a.length),10);return null!=a?new v(a):null};d.prototype.readFullExtent=function(a,b){a=b.store;b=this._readSpatialReference(b);return null==b||null==a||null==a.extent||!Array.isArray(a.extent)||a.extent.some(function(a){return-1E38>a})?null:new p({xmin:a.extent[0],ymin:a.extent[1],xmax:a.extent[2],ymax:a.extent[3],
spatialReference:b})};d.prototype.readVersion=function(a,b){a=b.store;b=null!=a.version?a.version.toString():"";a={major:Number.NaN,minor:Number.NaN,versionString:b};b=b.split(".");2<=b.length&&(a.major=parseInt(b[0],10),a.minor=parseInt(b[1],10));return a};d.prototype.readTitlePortalItem=function(a,b){return"item-title"!==this.sublayerTitleMode?void 0:a};d.prototype.readTitleService=function(a,b){a=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return m.titleFromUrlAndName(this.url,
b.name);b=b.name||m.parse(this.url).title;"item-title-and-service-name"===this.sublayerTitleMode&&a&&(b=a+" - "+b);return m.cleanTitle(b)};d.prototype.readLayerId=function(a,b){return b.id};Object.defineProperty(d.prototype,"url",{set:function(a){a=m.sanitizeUrlWithLayerId(this,a,z);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});d.prototype.writeUrl=function(a,b,c,d){m.writeUrlWithLayerId(this,a,"layers",b,d)};Object.defineProperty(d.prototype,
"parsedUrl",{get:function(){var a=this._get("url");if(!a)return null;a=f.urlToObject(a);null!=this.layerId&&m.match.test(a.path)&&(a.path=a.path+"/layers/"+this.layerId);return a},enumerable:!0,configurable:!0});d.prototype.readRootNode=function(a,b){return b.store.rootNode};d.prototype._verifyRootNodeAndUpdateExtent=function(a){return b(this,void 0,void 0,function(){var b;return k(this,function(c){switch(c.label){case 0:return b=this._updateExtentFromRootNode,[4,this._fetchRootNode(a)];case 1:return[2,
b.apply(this,[c.sent()])]}})})};d.prototype._updateExtentFromRootNode=function(a){if(null!=this.fullExtent&&!this.fullExtent.hasZ&&null!=a&&Array.isArray(a.mbs)&&4===a.mbs.length){var b=a.mbs[2];a=a.mbs[3];this.fullExtent.zmin=b-a;this.fullExtent.zmax=b+a}};d.prototype._fetchRootNode=function(a){return b(this,void 0,void 0,function(){var b,c,d;return k(this,function(e){switch(e.label){case 0:if(!this.rootNode)return[2];b=f.join(this.parsedUrl.path,this.rootNode);e.label=1;case 1:return e.trys.push([1,
3,,4]),[4,h(b,{query:{f:"json"},responseType:"json",signal:a})];case 2:return c=e.sent(),[2,c.data];case 3:throw d=e.sent(),new g("sceneservice:root-node-missing","Root node missing.",{error:d,url:b});case 4:return[2]}})})};d.prototype._fetchService=function(a){return b(this,void 0,void 0,function(){var b;return k(this,function(c){switch(c.label){case 0:return null==this.layerId&&/SceneServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(a)]:[3,2];case 1:b=c.sent(),null!=b&&(this.layerId=b),c.label=
2;case 2:return[2,this._fetchServiceLayer(a)]}})})};d.prototype._fetchFirstLayerId=function(a){return b(this,void 0,void 0,function(){var b;return k(this,function(c){switch(c.label){case 0:return[4,h(this.url,{query:{f:"json"},responseType:"json",signal:a})];case 1:return b=c.sent(),b.data&&Array.isArray(b.data.layers)&&0<b.data.layers.length?[2,b.data.layers[0].id]:[2]}})})};d.prototype._fetchServiceLayer=function(a){return b(this,void 0,void 0,function(){var b,c;return k(this,function(d){switch(d.label){case 0:return[4,
h(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:a})];case 1:return b=d.sent(),b.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),c=b.data,this.read(c,{origin:"service",url:this.parsedUrl}),this._validateLayer(c),[2]}})})};d.prototype._validateLayer=function(a){};l([a.shared({id:{json:{origins:{service:{read:!1},"portal-item":{read:!1}}}}})],d.prototype,"properties",void 0);l([a.property({type:v})],d.prototype,"spatialReference",void 0);l([a.reader("spatialReference",["spatialReference",
"store.indexCRS","store.geographicCRS"])],d.prototype,"readSpatialReference",null);l([a.property({type:p})],d.prototype,"fullExtent",void 0);l([a.reader("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],d.prototype,"readFullExtent",null);l([a.property({readOnly:!0,type:q})],d.prototype,"heightModelInfo",void 0);l([a.property({type:Number,json:{read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"},origins:{service:{read:{source:"minScale"},
write:!1}}}})],d.prototype,"minScale",void 0);l([a.property({type:Number,json:{read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"},origins:{service:{read:{source:"maxScale"},write:!1}}}})],d.prototype,"maxScale",void 0);l([a.property({readOnly:!0})],d.prototype,"version",void 0);l([a.reader("version",["store.version"])],d.prototype,"readVersion",null);l([a.property({type:String,json:{read:{source:"copyrightText"}}})],d.prototype,"copyright",void 0);l([a.property({type:String,
json:{read:!1}})],d.prototype,"sublayerTitleMode",void 0);l([a.property({type:String})],d.prototype,"title",void 0);l([a.reader("portal-item","title")],d.prototype,"readTitlePortalItem",null);l([a.reader("service","title",["name"])],d.prototype,"readTitleService",null);l([a.property({type:Number})],d.prototype,"layerId",void 0);l([a.reader("service","layerId",["id"])],d.prototype,"readLayerId",null);l([a.property(u.url)],d.prototype,"url",null);l([a.writer("url")],d.prototype,"writeUrl",null);l([a.property({dependsOn:["layerId"]})],
d.prototype,"parsedUrl",null);l([a.property({readOnly:!0})],d.prototype,"store",void 0);l([a.property({type:String,readOnly:!0})],d.prototype,"rootNode",void 0);l([a.reader("rootNode",["store.rootNode"])],d.prototype,"readRootNode",null);return d=l([a.subclass("esri.layers.mixins.SceneService")],d)}(a.declared(t,y,c,x,w))})},"esri/layers/support/I3SLayerDefinitions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.nodesPerPage=null;b.rootIndex=0;b.lodSelectionMetricType=null;return b}n(c,a);l([b.property({type:Number})],c.prototype,"nodesPerPage",void 0);l([b.property({type:Number})],c.prototype,"rootIndex",void 0);l([b.property({type:String})],c.prototype,"lodSelectionMetricType",void 0);return c=l([b.subclass("esri.layer.support.I3SNodePageDefinition")],c)}(b.declared(k));
d.I3SNodePageDefinition=r;var h=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.factor=1;return b}n(c,a);l([b.property({type:Number})],c.prototype,"textureSetDefinitionId",void 0);l([b.property({type:Number})],c.prototype,"factor",void 0);return c=l([b.subclass("esri.layer.support.I3SMaterialTexture")],c)}(b.declared(k));d.I3SMaterialTexture=h;var g=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.baseColorFactor=[1,1,1,1];b.baseColorTexture=null;b.metallicRoughnessTexture=
null;b.metallicFactor=1;b.roughnessFactor=1;return b}n(c,a);l([b.property({type:[Number]})],c.prototype,"baseColorFactor",void 0);l([b.property({type:h})],c.prototype,"baseColorTexture",void 0);l([b.property({type:h})],c.prototype,"metallicRoughnessTexture",void 0);l([b.property({type:Number})],c.prototype,"metallicFactor",void 0);l([b.property({type:Number})],c.prototype,"roughnessFactor",void 0);return c=l([b.subclass("esri.layer.support.I3SMaterialPBRMetallicRoughness")],c)}(b.declared(k));d.I3SMaterialPBRMetallicRoughness=
g;r=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.alphaMode="opaque";b.alphaCutoff=.25;b.doubleSided=!1;b.cullFace="none";b.normalTexture=null;b.occlusionTexture=null;b.emissiveTexture=null;b.emissiveFactor=null;b.pbrMetallicRoughness=null;return b}n(c,a);l([b.enumeration.serializable()({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0);l([b.property({type:Number})],c.prototype,"alphaCutoff",void 0);l([b.property({type:Boolean})],c.prototype,"doubleSided",
void 0);l([b.enumeration.serializable()({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0);l([b.property({type:h})],c.prototype,"normalTexture",void 0);l([b.property({type:h})],c.prototype,"occlusionTexture",void 0);l([b.property({type:h})],c.prototype,"emissiveTexture",void 0);l([b.property({type:[Number]})],c.prototype,"emissiveFactor",void 0);l([b.property({type:g})],c.prototype,"pbrMetallicRoughness",void 0);return c=l([b.subclass("esri.layer.support.I3SMaterialDefinition")],
c)}(b.declared(k));d.I3SMaterialDefinition=r;var e=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);l([b.property({type:String,json:{read:{source:["name","index"],reader:function(a,b){return null!=a?a:""+b.index}}}})],c.prototype,"name",void 0);l([b.enumeration.serializable()({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2"})],c.prototype,"format",void 0);return c=l([b.subclass("esri.layer.support.I3STextureFormat")],c)}(b.declared(k));d.I3STextureFormat=e;r=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.atlas=!1;return b}n(c,a);l([b.property({type:[e]})],c.prototype,"formats",void 0);l([b.property({type:Boolean})],c.prototype,"atlas",void 0);return c=l([b.subclass("esri.layer.support.I3STextureSetDefinition")],c)}(b.declared(k));d.I3STextureSetDefinition=r;var c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);l([b.enumeration.serializable()({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],
c.prototype,"type",void 0);l([b.property({type:Number})],c.prototype,"component",void 0);return c=l([b.subclass("esri.layer.support.I3SGeometryAttribute")],c)}(b.declared(k));d.I3SGeometryAttribute=c;var f=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);l([b.enumeration.serializable()({draco:"draco"})],c.prototype,"encoding",void 0);l([b.property({type:[String]})],c.prototype,"attributes",void 0);return c=l([b.subclass("esri.layer.support.I3SGeometryAttribute")],c)}(b.declared(k));
d.I3SGeometryCompressedAttributes=f;r=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.offset=0;return b}n(d,a);l([b.property({type:Number})],d.prototype,"offset",void 0);l([b.property({type:c})],d.prototype,"position",void 0);l([b.property({type:c})],d.prototype,"normal",void 0);l([b.property({type:c})],d.prototype,"uv0",void 0);l([b.property({type:c})],d.prototype,"color",void 0);l([b.property({type:c})],d.prototype,"uvRegion",void 0);l([b.property({type:c})],d.prototype,
"featureId",void 0);l([b.property({type:c})],d.prototype,"faceRange",void 0);l([b.property({type:f})],d.prototype,"compressedAttributes",void 0);return d=l([b.subclass("esri.layer.support.I3SGeometryBuffer")],d)}(b.declared(k));d.I3SGeometryBuffer=r;k=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);l([b.enumeration.serializable()({triangle:"triangle"})],c.prototype,"topology",void 0);l([b.property()],c.prototype,"geometryBuffers",void 0);return c=l([b.subclass("esri.layer.support.I3SMeshDefinition")],
c)}(b.declared(k));d.I3SGeometryDefinition=k})},"esri/layers/support/RangeInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function g(){var b=null!==d&&d.apply(this,arguments)||this;b.name=null;b.field=null;b.currentRangeExtent=null;b.fullRangeExtent=null;b.type="rangeInfo";
return b}n(g,d);l([b.property({type:String,json:{read:!0,write:!0}})],g.prototype,"name",void 0);l([b.property({type:String,json:{read:!0,write:!0}})],g.prototype,"field",void 0);l([b.property({type:[Number],json:{read:!0,write:!0}})],g.prototype,"currentRangeExtent",void 0);l([b.property({type:[Number],json:{read:!0,write:!0}})],g.prototype,"fullRangeExtent",void 0);l([b.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],g.prototype,"type",void 0);return g=l([b.subclass("esri.layers.support.RangeInfo")],
g)}(b.declared(k));d.RangeInfo=r;d.default=r})},"esri/views/3d/layers/ElevationLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Error ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ./TiledLayerView3D ./support/tiledLayerUtils".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(){return null!==d&&d.apply(this,arguments)||this}n(a,d);a.prototype.initialize=
function(){var a=this,d=this.get("view.map.ground.layers"),e=this.get("view.map.allLayers"),e=e&&e.includes(this.layer),d=d&&d.includes(this.layer);e&&!d&&(d=new k("layerview:elevation-layer-only","3D elevation layer '"+this.layer.id+"' can only be added in the map ground"),this.addResolvingPromise(b.reject(d)));(d=this._getTileInfoSupportError(this.tileInfo,this.layer.fullExtent))?this.addResolvingPromise(b.reject(d)):(d=h.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){c.throwIfError(a._getTileInfoCompatibilityError(a.tileInfo,
a.view.basemapTerrain.tilingScheme))}),this.addResolvingPromise(d));this.addResolvingPromise(c.checkArcGISServiceVersionCompatibility(this.layer))};l([g.property({readOnly:!0,aliasOf:"layer.fullExtent"})],a.prototype,"fullExtent",void 0);l([g.property()],a.prototype,"layer",void 0);l([g.property({readOnly:!0,aliasOf:"layer.tileInfo"})],a.prototype,"tileInfo",void 0);return a=l([g.subclass("esri.views.3d.layers.ElevationLayerView3D")],a)}(g.declared(e))})},"esri/views/3d/layers/TiledLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/Error ../../../core/accessorSupport/decorators ./LayerView3D ./support/layerViewUpdatingProperties ../terrain/terrainUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a._isUpdating=!1;return a}n(a,d);Object.defineProperty(a.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isOpaque",{get:function(){return 1<=this.fullOpacity&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"dataLevelRange",{get:function(){var a=this.tileInfo.lods;return this.levelRangeFromScaleRange(a[0].scale,
a[a.length-1].scale)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayLevelRange",{get:function(){var a=this.tileInfo.lods,a=this.levelRangeFromScaleRange(this.layer.minScale||a[0].scale,this.layer.maxScale||a[a.length-1].scale);this.layer.maxScale&&a.maxLevel++;return a},enumerable:!0,configurable:!0});a.prototype.getTileUrl=function(a,b,c){return this.layer.getTileUrl(a,b,c)};a.prototype.updatingChanged=function(a){this._isUpdating=a;this.notifyChange("updating")};a.prototype.isUpdating=
function(){return this._isUpdating};a.prototype._getTileInfoSupportError=function(a,d){if(a=c.checkIfTileInfoSupportedForView(a,d,this.view.spatialReference,this.view.basemapTerrain.manifold)){d={layer:this.layer,error:a};var e=void 0;switch(a.name){case "tilingscheme:local-gcs-not-supported":e=new b("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",d);break;case "tilingscheme:spatial-reference-mismatch":case "tilingscheme:global-unsupported-spatial-reference":e=
new b("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",d);break;default:e=new b("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",d)}return e}return null};a.prototype._getTileInfoCompatibilityError=function(a,c){return c.compatibleWith(a)?null:new b("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")};
a.prototype.levelRangeFromScaleRange=function(a,b){var c={minLevel:0,maxLevel:Infinity},d=this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!d)return c;var e=d.levels[0],d=function(a){a=Math.log(e.scale/a)/Math.LN2;return 1E-9>.5-Math.abs(.5-a%1)?Math.round(a):Math.ceil(a)};null!=a&&0<a&&(c.minLevel=Math.max(0,d(a)));null!=b&&0<b&&(c.maxLevel=Math.max(0,d(b)));return c};l([h.property({readOnly:!0})],a.prototype,"imageFormatIsOpaque",null);l([h.property(e.updatingPercentage)],a.prototype,
"updatingPercentage",void 0);l([h.property(e.updatingPercentageValue)],a.prototype,"updatingPercentageValue",void 0);l([h.property({readOnly:!0})],a.prototype,"fullExtent",void 0);l([h.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],a.prototype,"isOpaque",null);l([h.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme"]})],a.prototype,"dataLevelRange",null);l([h.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme","layer.minScale",
"layer.maxScale"]})],a.prototype,"displayLevelRange",null);l([h.property()],a.prototype,"layer",void 0);l([h.property({readOnly:!0})],a.prototype,"tileInfo",void 0);return a=l([h.subclass("esri.views.3d.layers.TiledLayerView3D")],a)}(h.declared(g))})},"esri/views/3d/layers/LayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../geometry/support/heightModelInfoUtils ../../layers/LayerView".split(" "),
function(r,d,n,l,k,b,h,g,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.slicePlaneEnabled=!1;a.supportsHeightUnitConversion=!1;return a}n(d,c);d.prototype.postscript=function(a){this.inherited(arguments);g.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())};d.prototype._validateHeightModelInfo=function(){var a=this;return k.create(function(c,d){b.whenFalseOnce(a.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var b=
g.rejectLayerError(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);b?d(b):c()})})};l([h.property()],d.prototype,"view",void 0);l([h.property()],d.prototype,"slicePlaneEnabled",void 0);return d=l([h.subclass("esri.views.3d.layers.LayerView3D")],d)}(h.declared(e))})},"esri/views/3d/layers/support/layerViewUpdatingProperties":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.updatingPercentageValue={value:100,readOnly:!0};d.updatingPercentage=
{dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}})},"esri/views/3d/layers/support/tiledLayerUtils":function(){define("require exports dojo/request/xhr ../../../../core/Error ../../../../core/promiseUtils ../../../../layers/support/arcgisLayerUrl".split(" "),function(r,d,n,l,k,b){function h(b){var d=null,c=b.search(/\/rest\/services\//i);0<c&&(d=b.substring(0,c+6));return d}Object.defineProperty(d,"__esModule",
{value:!0});d.checkArcGISServiceVersionCompatibility=function(d){if(!b.isHostedAgolService(d.url)){if(10.22>d.version)return d=new l("layerview:service-version-too-old","Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+d.version,{minVersion:10.22,detectedVersion:d.version}),k.reject(d);if(10.22===d.version&&!b.isHostedSecuredProxyService(d.url,d.get("portalItem.id"))){d=h(d.url);var e=new l("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied.");
return n(d+"self?f\x3djson",{headers:{"X-Requested-With":null},timeout:1E4,handleAs:"json"}).then(function(b){if(!b||b.error)throw e;}).catch(function(){throw e;})}return k.resolve()}};d.throwIfError=function(b){if(b)throw b;}})},"esri/views/3d/layers/FeatureLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/asyncUtils ../../../core/compilerUtils ../../../core/Error ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/dehydratedFeatures ../../../layers/graphics/controllers/FeatureTileController3D ./FeatureLikeLayerView3D ./support/layerViewUpdatingProperties ../support/EventedSet ../../layers/FeatureLayerView".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){return function(d){function m(a){a=d.call(this)||this;a._controllerTotal=0;a._graphicsCoreTotal=0;a.suspendResumeExtentMode="data";return a}n(m,d);Object.defineProperty(m.prototype,"updatingPercentageValue",{get:function(){var a=0,b=0;this.controller&&this.controller.updating&&(a+=this.controller.updatingRemaining,b=this.controller.updatingTotal);var c=0;this.graphics3d&&this.graphics3d.graphicsCore&&(a+=this.graphics3d.graphicsCore.updatingRemaining,
c=this.graphics3d.graphicsCore.updatingTotal);0===b&&0===c?this._graphicsCoreTotal=this._controllerTotal=0:(this._controllerTotal=Math.max(b,this._controllerTotal),this._graphicsCoreTotal=Math.max(c,this._graphicsCoreTotal));return(b=this._controllerTotal+this._graphicsCoreTotal)?(b-a)/b*100:100},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return this.controller?!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded):
!1},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"asyncGraphicsUpdates",{get:function(){if(this.controller)switch(this.controller.mode){case "snapshot":return 5E3<this.controller.serviceDataCount;case "tiles":break;default:e.neverReached(this.controller.mode)}return!0},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"hasZ",{get:function(){var a=this.layer,b=a.capabilities&&a.capabilities.data;return b&&b.supportsZ?null!=a.returnZ?a.returnZ:b.supportsZ:!1},enumerable:!0,
configurable:!0});Object.defineProperty(m.prototype,"hasM",{get:function(){var a=this.layer,b=a.capabilities&&a.capabilities.data;return b&&b.supportsM?"returnM"in a&&null!=a.returnM?a.returnM:!1:!1},enumerable:!0,configurable:!0});m.prototype.fetchPopupFeatures=function(a,c){return h(this,void 0,void 0,function(){var a;return b(this,function(b){return(a=this.validateFetchPopupFeatures(c))?[2,f.reject(a)]:[2,this.fetchClientPopupFeatures(c)]})})};m.prototype.setVisibility=function(a,b){this.graphics3d.graphicsCore.setObjectIdVisibility(a,
b)};m.prototype.createQuery=function(){return this.inherited(arguments)};m.prototype.queryFeatures=function(a,b){var c=this,d=arguments,e=function(){return c.inherited(d)};return"mesh"===this.layer.geometryType?g.safeCast(this._queryFeaturesMesh(this._ensureQuery(a),e)):g.safeCast(e())};m.prototype.createController=function(){return h(this,void 0,void 0,function(){var c,d=this;return b(this,function(b){c=new v({layerView:this,graphics:new x.EventedSet,extent:this.clippingExtent,hasZ:this.hasZ,hasM:this.hasM});
this.handles.add(a.init(c,"serviceDataExtent",function(a){d.graphics3d&&(d.graphics3d.dataExtent=a)}));this.handles.add(a.init(this,"suspended",function(a){a?c.suspend():c.resume()},!0));this.handles.add(a.init(this.graphics3d.graphicsCore,"displayFeatureLimit",function(){return d.updateDisplayFeatureLimit(c)}));this.handles.add(this.view.resourceController.memoryController.events.on("quality-changed",function(){return d.updateDisplayFeatureLimit()}));return[2,c]})})};m.prototype.doRefresh=function(a){return h(this,
void 0,void 0,function(){return b(this,function(a){!this.suspended&&this.controller&&this.controller.refresh();return[2]})})};m.prototype.getStats=function(){var a=this.inherited(arguments);if(this.controller&&a.features){var b=this.controller.debug;a.features+="/"+b.storedFeatures+"/"+b.totalFeatures;a.totalVertices=b.totalVertices}b=(b=this.controller&&this.controller.displayFeatureLimit)&&b.maximumSymbolComplexity;a.numTiles=this.controller?this.controller.tileDescriptors.length:0;a.partial=this.maximumNumberOfFeaturesExceeded;
a.mode=this.controller?this.controller.mode:"n/a";a.symbolComplexity=b?"f:"+b.primitivesPerFeature+",v:"+b.primitivesPerCoordinate:"n/a";var c=this.graphics3d&&this.graphics3d.graphicsCore,b=c?c.unprocessedMemoryEstimate:0,c=this.controller?this.controller.expectedFeatureDiff*c.usedMemoryPerGraphic:0;a.memory="u:"+(this.getUsedMemory()/1024/1024).toFixed(1)+", pc:"+(""+(b/1024/1024).toFixed(1))+", pf:"+(""+(c/1024/1024).toFixed(1))+" MB";return a};m.prototype.getUsedMemory=function(){var a=this.graphics3d&&
this.graphics3d.graphicsCore;return(a?a.usedMemory:0)+(this.controller?this.controller.memoryForUnusedFeatures:0)};m.prototype.getUnloadedMemory=function(){var a=this.graphics3d&&this.graphics3d.graphicsCore;return(a?a.unprocessedMemoryEstimate:0)+(this.controller?this.controller.expectedFeatureDiff*a.usedMemoryPerGraphic:0)};m.prototype.ignoresMemoryFactor=function(){return this.controller&&this.controller.hasMaximumNumberOfFeaturesOverride};m.prototype.updateDisplayFeatureLimit=function(a){void 0===
a&&(a=this.controller);if(a&&this.graphics3d&&this.graphics3d.graphicsCore){var b=this.graphics3d.graphicsCore.displayFeatureLimit,c=this.view.resourceController.memoryController.memoryFactor;a.displayFeatureLimit=1===c?b:k({},b,{maximumNumberOfFeatures:Math.ceil(b.maximumNumberOfFeatures*c),maximumTotalNumberOfFeatures:Math.ceil(b.maximumTotalNumberOfFeatures*c),minimumTotalNumberOfFeatures:Math.ceil(b.minimumTotalNumberOfFeatures*c)})}};m.prototype._queryFeaturesMesh=function(a,c){return h(this,
void 0,void 0,function(){var d,e,f,g,h,k,l,m;return b(this,function(b){switch(b.label){case 0:return[4,this._validateQueryFeaturesMesh(a)];case 1:return b.sent(),[4,c()];case 2:d=b.sent();if(a&&a.outStatistics)return[2,d];e=this.layer.objectIdField;f=this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID;g=[];h=0;for(k=d.features;h<k.length;h++)if(l=k[h],l.geometry){if(m=f.get(l.attributes[e]))l.geometry=q.hydrateGeometry(m.graphic.geometry),g.push(l)}else g.push(l);d.features=g;return[2,d]}})})};
m.prototype._validateQueryFeaturesMesh=function(a){return h(this,void 0,void 0,function(){var d,e,f,g,h;return b(this,function(b){if(!a)return[2];d=function(a){throw new c("feature-layer-view:unsupported-query","Queries on Mesh feature collection layers do not support '"+a+"'");};e=["quantizationParameters","geometryPrecision","maxAllowableOffset"];f=0;for(g=e;f<g.length;f++)h=g[f],null!=a[h]&&d(h);"returnM"in a&&a.returnM&&d("returnM");"returnCentroid"in a&&a.returnCentroid&&d("returnCentroid");
a.outSpatialReference&&!a.outSpatialReference.equals(this.view.spatialReference)&&d("outSpatialReference");return[2]})})};l([p.property()],m.prototype,"layer",void 0);l([p.property()],m.prototype,"controller",void 0);l([p.property({readOnly:!0,dependsOn:["controller.updatingRemaining","controller.updatingTotal","graphics3d.graphicsCore.updatingRemaining","graphics3d.graphicsCore.updatingTotal"]})],m.prototype,"updatingPercentageValue",null);l([p.property({aliasOf:"controller.maximumNumberOfFeatures",
set:null,get:null})],m.prototype,"maximumNumberOfFeatures",void 0);l([p.property({dependsOn:["suspended","controller.maximumNumberOfFeaturesExceeded"]})],m.prototype,"maximumNumberOfFeaturesExceeded",null);l([p.property(y.updatingPercentage)],m.prototype,"updatingPercentage",void 0);l([p.property({readOnly:!0,dependsOn:["controller.mode"]})],m.prototype,"asyncGraphicsUpdates",null);l([p.property({readOnly:!0})],m.prototype,"hasZ",null);l([p.property({readOnly:!0})],m.prototype,"hasM",null);l([p.property()],
m.prototype,"suspendResumeExtentMode",void 0);return m=l([p.subclass("esri.views.3d.layers.FeatureLayerView3D")],m)}(p.declared(t,w))})},"esri/layers/graphics/controllers/FeatureTileController3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/asyncUtils ../../../core/Collection ../../../core/compilerUtils ../../../core/Error ../../../core/Handles ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../support/arcgisLayerUrl ../../../portal/support/geometryServiceUtils ../../../tasks/support/StatisticDefinition ../../../views/3d/layers/graphics/Graphics3DVerticalScale ../../../views/3d/layers/support/FeatureTileFetcher3D ../../../views/3d/layers/support/FeatureTileFetcher3DDebugger ../../../views/3d/support/debugFlags".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N){var L=v.getLogger("esri.layers.graphics.controllers.FeatureTileController3D");r=function(d){function g(a){a=d.call(this)||this;a.type="feature-tile-3d";a.serviceDataExtent=null;a.serviceDataCount=k.constants.NO_SERVICE_DATA_COUNT;a.vertexLimitExceeded=!1;a.displayFeatureLimit=null;a.suspended=!1;a.asyncTasks=new c;a.tileFetcher=null;a.handles=new p;a.fetchDataInfoPromise=null;a.fetchDataInfoAbortController=null;a.lifeCycleAbortController=
x.createAbortController();return a}n(g,d);k=g;Object.defineProperty(g.prototype,"extent",{set:function(a){if(a&&!a.spatialReference.equals(this.layerView.view.spatialReference))L.error("#extent\x3d","extent needs to be in the same spatial reference as the view");else{var b=this._get("extent");b===a||b&&a&&b.equals(a)||(a=a?a.clone():null,this._set("extent",a))}},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){return!!(this.tileFetcher&&this.tileFetcher.updating||
null!=this.fetchDataInfoPromise||0<this.asyncTasks.length||"tiles"===this.mode&&this.layerView.view.featureTiles&&this.layerView.view.featureTiles.updating)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updatingTotal",{get:function(){return this.updating&&this.tileFetcher?this.tileFetcher.updatingTotal:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updatingRemaining",{get:function(){return this.updating&&this.tileFetcher?this.tileFetcher.updatingRemaining:
0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"expectedFeatureDiff",{get:function(){return this.updating&&this.tileFetcher?this.tileFetcher.expectedFeatureDiff:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"memoryForUnusedFeatures",{get:function(){return this.tileFetcher?this.tileFetcher.memoryForUnusedFeatures:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!(!this.tileFetcher||
!this.tileFetcher.maximumNumberOfFeaturesExceeded)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"filteredDataExtent",{get:function(){return this.extent},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"maximumNumberOfFeatures",{get:function(){return this.displayFeatureLimit?this.displayFeatureLimit.maximumNumberOfFeatures:0},set:function(a){a!==this.maximumNumberOfFeatures&&(null==a?this._clearOverride("maximumNumberOfFeatures"):this._override("maximumNumberOfFeatures",
a))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"hasMaximumNumberOfFeaturesOverride",{get:function(){return this._isOverridden("maximumNumberOfFeatures")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"mode",{get:function(){if(this.serviceDataCount===k.constants.NO_SERVICE_DATA_COUNT||this.vertexLimitExceeded)return"tiles";var a=this.layerView,b=a.layer,a=(a=(a=a.view)&&a.featureTiles)&&a.tilingScheme;return b&&b.minScale&&this.serviceDataExtent&&a&&(b=this.approximateExtentSizeAtScale(b.minScale,
a),(this.serviceDataExtent.width/b+this.serviceDataExtent.height/b)/2>k.constants.MAX_SNAPSHOT_MIN_SCALE_FACTOR)?"tiles":!this.maximumNumberOfFeatures||this.serviceDataCount<=this.maximumNumberOfFeatures?"snapshot":"tiles"},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"maxTotalSnapshotVertices",{get:function(){var a=this._get("maxTotalSnapshotVertices")||0;return Math.max(a,"snapshot"===this.mode&&this.tileFetcher&&this.tileFetcher.totalVertices||0)},enumerable:!0,configurable:!0});
g.prototype.approximateExtentSizeAtScale=function(a,b){var c=this.layerView.view,d=b.levels[0];return(d.tileSize[0]/(d.scale/a)+d.tileSize[1]/(d.scale/a))/2*Math.ceil((c.width/b.pixelSize[0]+c.height/b.pixelSize[1])/2)};Object.defineProperty(g.prototype,"tileDescriptors",{get:function(){return"snapshot"===this.mode?new c([{id:"dummy-tile-full-extent",lij:[0,0,0]}]):this.layerView.view.featureTiles?this.layerView.view.featureTiles.tiles:new c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"test",{get:function(){return{fetchDataInfoPromise:this.fetchDataInfoPromise}},enumerable:!0,configurable:!0});g.prototype.initialize=function(){var a=this;this.handles.add([this.watch("vertexLimitInfo",function(){return a.registerAsyncTask(a.updateVertexLimitExceeded(null,a.lifeCycleAbortController.signal))}),w.init(this,"mode",function(){return a.modeChanged()})]);var b=x.resolve().then(function(){return a.verifyCapabilities()}).then(function(){return a.registerAsyncTask(a.fetchServiceDataInfo())}).then(function(){return a.initializeTileFetcher()});
this.addResolvingPromise(b)};g.prototype.verifyCapabilities=function(){var b=this.layerView.layer;if(!b.get("capabilities.operations.supportsQuery"))throw new a("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:b});};g.prototype.registerAsyncTask=function(a){var b=this.asyncTasks;b.add(a);var c=function(){return b.remove(a)};a.then(c,c);return a};g.prototype.destroy=function(){this.cancelFetchServiceDataInfo();this.tileFetcher&&
(this.tileFetcher.destroy(),this.tileFetcher=null);this.handles&&(this.handles.destroy(),this.handles=null);this.tilesHandle&&(this.tilesHandle.remove(),this.tilesHandle=null);this.lifeCycleAbortController&&(this.lifeCycleAbortController.abort(),this.lifeCycleAbortController=null)};g.prototype.suspend=function(){this.suspended||(this.suspended=!0,this.tileFetcher&&this.tileFetcher.suspend())};g.prototype.resume=function(){this.suspended&&(this.suspended=!1,this.tileFetcher&&this.tileFetcher.resume())};
g.prototype.refresh=function(){var a=this,b=function(){a.tileFetcher&&a.tileFetcher.filtersChanged()};this.registerAsyncTask(this.fetchServiceDataInfo().then(b,b))};g.prototype.initializeTileFetcher=function(){var a=this,b=this.layerView.view;w.whenOnce(b.featureTiles,"tilingScheme",this.lifeCycleAbortController.signal).then(function(){var c=a.layerView,d=a.tileDescriptors,e=c.layer,f=new C({sourceSpatialReference:e.spatialReference,destSpatialReference:b.spatialReference});a.tileFetcher=new F.FeatureTileFetcher3D({layerView:c,
filterExtent:a.filteredDataExtent,tilingScheme:b.featureTiles.tilingScheme,tileDescriptors:d,features:a.graphics,verticalScale:f,viewingMode:b.viewingMode,hasZ:a.hasZ,hasM:a.hasM});a.suspended?a.tileFetcher.suspend():a.tileFetcher.resume();a.handles.add([e.watch("definitionExpression",function(){return a.definitionExpressionChanged()}),c.watch("availableFields",function(b,c){return a.attributesChanged(c,b)}),e.on("apply-edits",function(b){return a.applyEdits(b)}),a.watch("filteredDataExtent",function(b){return a.tileFetcher.filterExtent=
b},!0),a.watch("tileDescriptors",function(b){return a.tileFetcher.tileDescriptors=b},!0),w.init(a,"maximumNumberOfFeatures",function(b){a.tileFetcher.maximumNumberOfFeatures=b;a.tileFetcher.useTileCount=a.serviceDataCount>b},!0),w.init(a,"serviceDataCount",function(b){return a.tileFetcher.useTileCount=b>a.maximumNumberOfFeatures},!0),w.init(N,"FEATURE_TILE_FETCH_SHOW_TILES",function(c){c&&a.tileFetcher&&!a.tileFetcher.debugger?(a.tileFetcher.debugger=new E.FeatureTileFetcher3DDebugger(a.tileFetcher,
b.featureTiles.tilingScheme.toTileInfo(),b),a.tileFetcher.debugger.update()):!c&&a.tileFetcher&&a.tileFetcher.debugger&&(a.tileFetcher.debugger.destroy(),a.tileFetcher.debugger=null)})]);a.supportsExceedsLimitQuery||a.watch("maxTotalSnapshotVertices",function(){return a.registerAsyncTask(a.updateVertexLimitExceeded(null,a.lifeCycleAbortController.signal))})})};g.prototype.modeChanged=function(){switch(this.mode){case "tiles":this.tilesHandle||(this.tilesHandle=this.layerView.view.featureTiles.addClient());
break;default:L.warn("Unhandled feature layer mode "+this.mode);case "snapshot":this.tilesHandle&&(this.tilesHandle.remove(),this.tilesHandle=null)}};g.prototype.definitionExpressionChanged=function(){this._set("maxTotalSnapshotVertices",0);this.notifyChange("maxTotalSnapshotVertices");this.refresh()};g.prototype.applyEdits=function(a){var b=this;this.tileFetcher.applyEdits(a).then(function(a){a&&(a.deletedFeatures.length||a.updatedFeatures.length||a.addedFeatures.length)&&b.registerAsyncTask(b.updateServiceDataExtent(b.lifeCycleAbortController.signal))})};
g.prototype.attributesChanged=function(a,b){if(!a||-1===a.indexOf("*"))if(a&&b){for(var c=new Set,d=0;d<a.length;d++){var e=a[d];c.add(e)}for(a=0;a<b.length;a++)if(e=b[a],!c.has(e)){this.refresh();break}}else this.refresh()};g.prototype.createVertexLimitExceededQuery=function(a){var b=this.layerView.layer,c=b.createQuery();c.outStatistics=[new B({statisticType:"exceedslimit",maxVertexCount:a,outStatisticFieldName:"exceedslimit",maxPointCount:1E8,maxRecordCount:1E8})];b.capabilities.query.supportsCacheHint&&
(c.cacheHint=!0);return c};g.prototype.createDataInfoQuery=function(){var a=this.layerView.layer,b=a.createQuery();b.outSpatialReference=this.layerView.view.spatialReference;a.capabilities.query.supportsCacheHint&&(b.cacheHint=!0);return b};g.prototype.fullExtentIsAccurate=function(){var a=this.layerView.layer;if(a.definitionExpression)return!1;switch(a.type){case "feature":case "stream":return u.isHostedAgolService(a.url);case "csv":case "geojson":return!0;default:f.neverReached(a)}};g.prototype.updateServiceDataExtent=
function(a){return h(this,void 0,void 0,function(){var c;return b(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,this.tryUpdateServiceDataExtent(a)];case 1:return b.sent(),[3,3];case 2:return c=b.sent(),x.isAbortError(c)||this._set("serviceDataExtent",q.clone(this.layerView.fullExtentInLocalViewSpatialReference)),[3,3];case 3:return[2]}})})};g.prototype.tryUpdateServiceDataExtent=function(a){return h(this,void 0,void 0,function(){var c,d,e,f,g,h,l,m,p,n,u,t;return b(this,
function(b){switch(b.label){case 0:c=this.layerView;d=c.layer;e=d.capabilities.query.supportsExtent;f=q.clone(c.fullExtentInLocalViewSpatialReference);g=d.fullExtent;h=this.fullExtentIsAccurate();l=this.serviceDataCount;m=e&&l<=k.constants.MAX_FEATURE_COUNT_FOR_EXTENT&&(!f||!h);if(!m)return[3,2];p=this.createDataInfoQuery();return[4,d.queryExtent(p,{timeout:k.constants.QUERY_EXTENT_TIMEOUT,signal:a})];case 1:return n=b.sent(),this._set("serviceDataExtent",n.extent),[3,6];case 2:if(!f)return[3,3];
this._set("serviceDataExtent",f);return[3,6];case 3:if(!g)return[3,5];u="portalItem"in d?d.portalItem:null;return[4,z.projectGeometry(g,c.view.spatialReference,u,a)];case 4:return t=b.sent(),this._set("serviceDataExtent",t),[3,6];case 5:this._set("serviceDataExtent",null),b.label=6;case 6:return[2]}})})};g.prototype.updateServiceDataCount=function(a){return h(this,void 0,void 0,function(){var c,d,f;return b(this,function(b){switch(b.label){case 0:return c=this.layerView.layer,[4,e.result(c.queryFeatureCount(this.createDataInfoQuery(),
{timeout:k.constants.QUERY_STATISTICS_TIMEOUT,signal:a}))];case 1:d=b.sent();if(!0===d.ok)this._set("serviceDataCount",d.value);else{if(x.isAbortError(d.error))throw d.error;f=k.constants.NO_SERVICE_DATA_COUNT;this._set("serviceDataCount",f)}return[2]}})})};Object.defineProperty(g.prototype,"vertexLimitInfo",{get:function(){if(!this.displayFeatureLimit||!this.displayFeatureLimit.maximumSymbolComplexity)return null;var a=this.displayFeatureLimit,b=a.maximumSymbolComplexity,a=a.maximumTotalNumberOfPrimitives,
c=b.primitivesPerCoordinate,b=b.primitivesPerFeature,d=this._get("vertexLimitInfo");return d&&d.maximumTotalNumberOfPrimitives===a&&d.primitivesPerCoordinate===c&&d.primitivesPerFeature===b?d:{primitivesPerCoordinate:c,primitivesPerFeature:b,maximumTotalNumberOfPrimitives:a}},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"supportsExceedsLimitQuery",{get:function(){var a=this.layerView.layer;return a.capabilities&&a.capabilities.operations&&a.capabilities.operations.supportsExceedsLimitStatistics},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"minimumNumberOfVerticesForGeometry",{get:function(){var a=this.layerView.layer.geometryType;switch(a){case "point":return 1;case "multipoint":return 1;case "polygon":return 4;case "polyline":return 2;case "multipatch":case "mesh":return 3;default:return f.neverReached(a),0}},enumerable:!0,configurable:!0});g.prototype.updateVertexLimitExceeded=function(a,c){return h(this,void 0,void 0,function(){var d,f,g,h,l,m,p,n,u,q,z,w,v,r;return b(this,
function(b){switch(b.label){case 0:d=this.vertexLimitInfo&&0>=this.vertexLimitInfo.primitivesPerFeature;f=this.layerView.layer;g=this.supportsExceedsLimitQuery;if(!d)return this._set("vertexLimitExceeded",!1),[2];h=this.vertexLimitInfo;l=h.primitivesPerFeature;m=h.primitivesPerCoordinate;p=h.maximumTotalNumberOfPrimitives;return(n=0!==l)&&t.isSome(a)?[4,a]:[3,2];case 1:b.sent(),b.label=2;case 2:u=this.serviceDataCount;q=(z=u!==k.constants.NO_SERVICE_DATA_COUNT)?Math.ceil((p-u*l)/(m||1)):Math.ceil(p/
(m||1));if(z&&this.minimumNumberOfVerticesForGeometry*u>q)return this._set("vertexLimitExceeded",!0),[2];g||this._set("vertexLimitExceeded",this.maxTotalSnapshotVertices>q);return[4,e.result(f.queryFeatures(this.createVertexLimitExceededQuery(q),{timeout:k.constants.QUERY_STATISTICS_TIMEOUT,signal:c}))];case 3:w=b.sent();if(!1===w.ok){if(x.isAbortError(w.error))throw w.error;this._set("vertexLimitExceeded",!1);return[2]}v=w.value;(r=v.features[0])&&r.attributes?this._set("vertexLimitExceeded",!!r.attributes.exceedslimit):
this._set("vertexLimitExceeded",!1);return[2]}})})};g.prototype.fetchServiceDataInfo=function(){return h(this,void 0,void 0,function(){var a,c,d,e,f,g=this;return b(this,function(b){this.cancelFetchServiceDataInfo();a=x.createAbortController();c=a.signal;d=this.updateServiceDataCount(c);e=x.eachAlways([d,this.updateVertexLimitExceeded(d,c)]);f=e.then(function(){return g.updateServiceDataExtent(c)}).catch(function(a){x.isAbortError(a)||L.error("#fetchServiceDataInfo()",a)}).then(function(){f===g.fetchDataInfoPromise&&
(g.fetchDataInfoPromise=null,g.fetchDataInfoAbortController=null);a=null});a&&(this.fetchDataInfoPromise=f);this.fetchDataInfoAbortController=a;return[2,e.catch(function(){})]})})};g.prototype.cancelFetchServiceDataInfo=function(){var a=this.fetchDataInfoAbortController;a&&(this.fetchDataInfoPromise=this.fetchDataInfoAbortController=null,a.abort())};Object.defineProperty(g.prototype,"debug",{get:function(){return{storedFeatures:this.tileFetcher?this.tileFetcher.storedFeatures:0,totalFeatures:this.tileFetcher?
this.tileFetcher.totalFeatures:0,totalVertices:this.tileFetcher?this.tileFetcher.totalVertices:0}},enumerable:!0,configurable:!0});var k;l([m.property({readOnly:!0})],g.prototype,"type",void 0);l([m.property({constructOnly:!0})],g.prototype,"graphics",void 0);l([m.property({constructOnly:!0})],g.prototype,"layerView",void 0);l([m.property()],g.prototype,"extent",null);l([m.property({dependsOn:["tileFetcher.updating","mode","layerView.view.featureTiles.updating","fetchDataInfoPromise","asyncTasks.length"]})],
g.prototype,"updating",null);l([m.property({dependsOn:["updating","tileFetcher.updatingTotal"]})],g.prototype,"updatingTotal",null);l([m.property({dependsOn:["updating","tileFetcher.updatingRemaining"]})],g.prototype,"updatingRemaining",null);l([m.property({dependsOn:["updating","tileFetcher.expectedFeatureDiff"]})],g.prototype,"expectedFeatureDiff",null);l([m.property({dependsOn:["tileFetcher.memoryForUnusedFeatures"]})],g.prototype,"memoryForUnusedFeatures",null);l([m.property({dependsOn:["tileFetcher.maximumNumberOfFeaturesExceeded"]})],
g.prototype,"maximumNumberOfFeaturesExceeded",null);l([m.property({readOnly:!0})],g.prototype,"serviceDataExtent",void 0);l([m.property({readOnly:!0})],g.prototype,"serviceDataCount",void 0);l([m.property({readOnly:!0})],g.prototype,"vertexLimitExceeded",void 0);l([m.property({readOnly:!0,dependsOn:["extent"]})],g.prototype,"filteredDataExtent",null);l([m.property()],g.prototype,"displayFeatureLimit",void 0);l([m.property({type:Number,dependsOn:["displayFeatureLimit"]})],g.prototype,"maximumNumberOfFeatures",
null);l([m.property({readOnly:!0,dependsOn:"serviceDataCount displayFeatureLimit maximumNumberOfFeatures vertexLimitExceeded serviceDataExtent layerView.layer.minScale layerView.view.featureTiles.tilingScheme".split(" ")})],g.prototype,"mode",null);l([m.property({readOnly:!0,dependsOn:["mode","tileFetcher.totalVertices"]})],g.prototype,"maxTotalSnapshotVertices",null);l([m.property({readOnly:!0,dependsOn:["mode"]})],g.prototype,"tileDescriptors",null);l([m.property({constructOnly:!0})],g.prototype,
"hasZ",void 0);l([m.property({constructOnly:!0})],g.prototype,"hasM",void 0);l([m.property({readOnly:!0})],g.prototype,"asyncTasks",void 0);l([m.property()],g.prototype,"tileFetcher",void 0);l([m.property()],g.prototype,"fetchDataInfoPromise",void 0);l([m.property({readOnly:!0,dependsOn:["displayFeatureLimit"]})],g.prototype,"vertexLimitInfo",null);return g=k=l([m.subclass("esri.layers.graphics.controllers.FeatureTileController3D")],g)}(m.declared(g,y));(function(a){(function(a){a.NO_SERVICE_DATA_COUNT=
Infinity;a.MAX_SNAPSHOT_MIN_SCALE_FACTOR=5;a.reset=function(){a.MAX_FEATURE_COUNT_FOR_EXTENT=1E4;a.QUERY_STATISTICS_TIMEOUT=12E3;a.QUERY_EXTENT_TIMEOUT=1E4}})(a.constants||(a.constants={}))})(r||(r={}));r.constants.reset();return r})},"esri/views/3d/layers/graphics/Graphics3DVerticalScale":function(){define(["require","exports","../../../../core/maybe","../../../../core/unitUtils"],function(r,d,n,l){return function(){function d(b){this.sourceSpatialReference=b.sourceSpatialReference;this.destSpatialReference=
b.destSpatialReference}d.prototype.adjust=function(b){var d=this._getVerticalUnitScale();1!==d&&this._scaleVerticalUnits(b,d)};d.prototype._getVerticalUnitScale=function(){if(this.sourceSpatialReference&&!this.sourceSpatialReference.equals(this.destSpatialReference)){var b=l.getMetersPerVerticalUnitForSR(this.sourceSpatialReference),d=l.getMetersPerVerticalUnitForSR(this.destSpatialReference);return b/d}return 1};d.prototype._vertexListsScaleZ=function(b,d){for(var g=0;g<b.length;++g)for(var e=b[g],
c=0;c<e.length;++c)e[c][2]*=d};d.prototype._scaleVerticalUnits=function(b,d){for(var g=0;g<b.length;++g){var e=b[g].geometry;!n.isNone(e)&&e.hasZ&&(this._geometryIsPoint(e)?null!==e.z&&(e.z*=d):this._geometryIsPolyline(e)?this._vertexListsScaleZ(e.paths,d):this._geometryIsPolygon(e)&&this._vertexListsScaleZ(e.rings,d))}};d.prototype._geometryIsPoint=function(b){return"point"===b.type};d.prototype._geometryIsPolygon=function(b){return"polygon"===b.type};d.prototype._geometryIsPolyline=function(b){return"polyline"===
b.type};return d}()})},"esri/views/3d/layers/support/FeatureTileFetcher3D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/Handles ../../../../core/Logger ../../../../core/now ../../../../core/promiseUtils ../../../../core/scheduling ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/aaBoundingRect ../../../../layers/graphics/dehydratedFeatures ../../../../tasks/support/QuantizationParameters ../../../../tasks/support/Query ./featureReference ./FeatureTile ./featureTileQuery3D ../../../support/QueueProcessor".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C){function F(a){return"dummy-tile-full-extent"===a.id}function E(a){for(var b=0,c=0;c<a.length;c++){var d=a[c];d.features&&0<d.features.length&&d.alive&&(b=Math.max(b,d.descriptor.lij[0]))}return b}Object.defineProperty(d,"__esModule",{value:!0});var N=u.SingleFeatureReference,L=u.MultiFeatureReference,K=f.getLogger("esri.views.3d.layers.support.FeatureTileFetcher3D");r=function(d){function f(a){a=d.call(this,a)||this;a.useTileCount=!1;a.updating=
!1;a.updatingTotal=0;a.updatingRemaining=0;a.expectedFeatureDiff=0;a.maximumNumberOfFeaturesExceeded=!1;a.maximumNumberOfFeaturesExceededThrottle=1E3;a.maximumNumberOfFeaturesExceededNext=0;a._fullRatio=1;a._farRatio=1;a.changes={updates:{adds:[],removes:[]},adds:[],removes:[]};a.handles=new c;a._dirty=!1;a.idToFeatureTile=new Map;a.displayingFeatureReferences=new Map;a.numDisplayingFeatureReferences=0;a.suspended=!0;a.pendingEdits=null;return a}n(f,d);Object.defineProperty(f.prototype,"maximumNumberOfFeatures",
{set:function(a){a=a||Infinity;var b=this._get("maximumNumberOfFeatures");a===b||1>a||(this._set("maximumNumberOfFeatures",a),this.maximumFeaturesUpdated(b,a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"memoryForUnusedFeatures",{get:function(){var a=0;this.forEachFeatureTile(function(b){return a+=b.estimatedUnusedSize});return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"totalVertices",{get:function(){var a=0;this.forEachFeatureTile(function(b){return a+=
b.numVertices});return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"totalFeatures",{get:function(){var a=0;this.forEachFeatureTile(function(b){return a+=b.numFeatures});return a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"filterExtent",{set:function(a){if(a&&this.tilingScheme&&!a.spatialReference.equals(this.tilingScheme.spatialReference))K.error("#filterExtent\x3d","extent needs to be in the same spatial reference as the tiling scheme");else{var b=
this._get("filterExtent");b===a||b&&a&&b.equals(a)||(a=a?a.clone():null,this._set("filterExtent",a),this.reclip(a,b))}},enumerable:!0,configurable:!0});f.prototype.initialize=function(){var a=this;this.capabilities=this.calculateCapabilities();this.fetchQueue=this.createFetchQueue();var b=this.layerView.layer;this.handles.add(v.on(this,"tileDescriptors","change",function(){return a.setDirty()},function(){return a.setDirty()}));this.handles.add(b.watch("hasService",function(){return a._initMemCache()}));
v.init(b,"hasService",function(){return a._initMemCache()});this.objectIdField=b.objectIdField;this.FeatureReferenceClass=this.capabilities.supportsMultipleResolutions?L:N;this.featureTileQuery=B.createFeatureTileQuery3D(b);this.handles.add(this.layerView.view.resourceController.scheduler.registerTask(2,function(b){return a.update(b)},function(){return a._dirty||0<a.maximumNumberOfFeaturesExceededNext}));this.setDirty()};f.prototype.destroy=function(){var a=this;this.handles&&(this.handles.destroy(),
this.handles=null);this.forEachFeatureTile(function(b){a.cancelFetchTile(b);a.removeTile(b)});this.idToFeatureTile.clear();this.displayingFeatureReferences.clear();this.fetchQueue.destroy();this.featureTileQuery=this.fetchQueue=null;this.pendingEdits&&(this.pendingEdits.controller.abort(),this.pendingEdits=null);this._memCache&&this._memCache.destroy();this._memCache=null};Object.defineProperty(f.prototype,"paused",{get:function(){return this.suspended||!!this.pendingEdits},enumerable:!0,configurable:!0});
f.prototype.filtersChanged=function(){var a=this;this.fetchQueue.clear();this._memCache&&this._memCache.clear();this.forEachFeatureTile(function(b){a.resetFetchTile(b);a.queueFetchTile(b)});this.setDirty()};f.prototype.suspend=function(){this.suspended||(this.suspended=!0,this.pause(),this.setDirty())};f.prototype.resume=function(){this.suspended&&(this.suspended=!1,this.unpause())};f.prototype.pause=function(){this.paused&&(this.fetchQueue.pause(),this.fetchQueue.reset(),this.updated())};f.prototype.unpause=
function(){this.paused||(this.setDirty(),this.fetchQueue.resume(),this.updated())};f.prototype.getFeatureTileById=function(a){return this.idToFeatureTile.get(a)||null};f.prototype.forEachFeatureTile=function(a){this.idToFeatureTile.forEach(a)};f.prototype.applyEdits=function(a){var b=this;this.pendingEdits||(this.pendingEdits={edits:p.resolve(),count:0,controller:p.createAbortController()},this.pause());this.pendingEdits.count++;var c=this.pendingEdits.edits.then(function(){return a.result.catch(function(a){if(p.isAbortError(a))throw a;
return null}).then(function(a){return a?(b.applyEditsDeleteFeatures(a.deletedFeatures),e.safeCast(b.applyEditsAddUpdateFeatures(a.addedFeatures,a.updatedFeatures,b.pendingEdits.controller.signal).then(function(){return a}))):a}).then(function(a){0===--b.pendingEdits.count&&(b.pendingEdits=null,b._memCache&&b._memCache.clear(),b.unpause(),b.updated());return a})});this.pendingEdits.edits=c;this.updated();return c};f.prototype.applyEditsDeleteFeatures=function(a){var b=this;if(0!==a.length){var c=new Set;
a.forEach(function(a){return c.add(a.objectId)});this.forEachFeatureTile(function(a){if(a.features){var d=a.features.filter(function(a){return!c.has(x.getObjectId(a,b.objectIdField))});d.length!==a.features.length&&(a.setFeatures(d,0),b.invalidateCounts())}})}};f.prototype.applyEditsAddUpdateFeatures=function(a,c,d){return b(this,void 0,void 0,function(){var b,f,g,k=this;return h(this,function(h){switch(h.label){case 0:b=[];f=new Set;a.forEach(function(a){return b.push(a.objectId)});c.forEach(function(a){b.push(a.objectId);
f.add(a.objectId)});if(0===b.length)return[2];g=[];this.forEachFeatureTile(function(a){(a=e.safeCast(k.applyEditsAddUpdateTile(a,b,f,d)))&&g.push(a)});return[4,p.eachAlways(g)];case 1:return h.sent(),[2]}})})};f.prototype.applyEditsAddUpdateTile=function(a,c,d,e){return b(this,void 0,void 0,function(){var b,f,g,k,l,m,p,n=this;return h(this,function(h){switch(h.label){case 0:if(!a.features)return[2];b=this.createQuery(a);b.resultType=void 0;b.cacheHint=!1;b.objectIds=c;return[4,this.queryFeatures(b,
e)];case 1:f=h.sent();g=null;0<d.size&&(k=a.features.filter(function(a){return!d.has(x.getObjectId(a,n.objectIdField))}),k.length!==a.features.length&&(g=k));if(0<f.features.length)for(g||(g=a.features.slice()),this.verticalScale.adjust(f.features),l=0,m=f.features;l<m.length;l++)p=m[l],g.push(p);g&&(a.setFeatures(g,0),this.invalidateCounts());return[2]}})})};f.prototype.queryFeatures=function(a,b){return this.featureTileQuery.queryFeaturesDehydrated(a,{signal:b,timeout:S})};f.prototype.calculateCapabilities=
function(){var a=this.layerView.layer,b=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsPagination),c=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsResultType),d=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsQuantization),e=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsQuantizationEditMode),f=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsMaxRecordCountFactor),g=!!(a.capabilities&&
a.capabilities.query&&a.capabilities.query.supportsFormatPBF),a=!!(a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsCacheHint);return{supportsMultipleResolutions:this.calculateSupportsMultipleResolutions(),supportsPagination:b,supportsResultType:c,supportsCacheHint:a,supportsQuantization:d,supportsQuantizationEditMode:e,supportsMaxRecordCountFactor:f,supportsFormatPBF:g}};f.prototype.calculateSupportsMultipleResolutions=function(){var a=this.layerView.layer;switch(a.geometryType){case "polyline":return!0;
case "polygon":return a.capabilities&&a.capabilities.query&&a.capabilities.query.supportsQuantization;default:return!1}};f.prototype.createFetchQueue=function(){var a=this;return new C.QueueProcessor({concurrency:6,priority:2,scheduler:this.layerView.view.resourceController.scheduler,peeker:function(b){return a.highestPriorityTile(b)},process:function(b,c){return a.fetchTile(b,c)}})};f.prototype.highestPriorityTile=function(a){return a.reduce(function(a,b){return a&&a.descriptor.loadPriority<=b.descriptor.loadPriority?
a:b},null)};f.prototype._initMemCache=function(){var a=this.layerView.layer;"hasService"in a&&a.hasService?this._memCache||(this._memCache=this.layerView.view.resourceController.memoryController.getMemCache(a.uid)):this._memCache&&(this._memCache.destroy(),this._memCache=null)};f.prototype.setDirty=function(){this._dirty=!0;this.updated()};f.prototype.update=function(b){var c=this;this.maximumNumberOfFeaturesExceededNext&&a()>=this.maximumNumberOfFeaturesExceededNext&&this.updateMaximumNumberOfFeaturesExceeded();
if(this._dirty&&this.constructed){this._dirty=!1;var d=this.getListOfTiles();this.markTilesNotAlive(d);this.addTiles(d);this.filterExtentTiles(d);this.removeTiles(d);var e=this.sortTiles(d);b.run(function(){return c.displayTiles(e,b)})&&b.run(function(){return c.queueFetchTiles(e,b)})&&b.run(function(){return c.updateMemoryEstimates(e,b)})||this.setDirty();this.updated()}};f.prototype.markTilesNotAlive=function(a){for(var b=0;b<a.length;b++)a[b].alive=!1};f.prototype.addTiles=function(a){var b=this;
this.suspended||this.tileDescriptors.forEach(function(c){var d=b.getFeatureTileById(c.id);d?d.alive=!0:a.push(b.addTile(c))})};f.prototype.filterExtentTiles=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.alive&&(c.filtered=!c.intersects(this.filterExtent),c.filtered&&this.clearTile(c))}};f.prototype.removeTiles=function(a){for(var b=a.length-1;0<=b;b--){var c=a[b];c.alive||(this.removeTile(c),b!==a.length-1&&(a[b]=a[a.length-1]),a.pop())}};f.prototype.sortTiles=function(a){a.sort(function(a,
b){return a.descriptor.loadPriority-b.descriptor.loadPriority});return a};f.prototype.displayTiles=function(a,b){for(var c=this,d=this.updateRatio(a),e=function(a){if(!b.run(function(){var b=1>c._fullRatio?d(a)*c._farRatio:1;a.reduceFeatures(b,c.objectIdField)&&c.setDirty();return c.showTile(a)}))return f.setDirty(),"break"},f=this,g=0;g<a.length&&"break"!==e(a[g]);g++);return b.hasProgressed};f.prototype.queueFetchTiles=function(a,b){for(var c=this,d=function(a){if(!b.run(function(){return c.queueFetchTile(a)}))return e.setDirty(),
{value:!0}},e=this,f=0;f<a.length;f++){var g=d(a[f]);if("object"===typeof g)return g.value}return b.hasProgressed};f.prototype.updateMemoryEstimates=function(a,b){var c=this;a.some(function(a){if(!b.run(function(){return a.updateMemoryEstimates()}))return c.setDirty(),!0});return b.hasProgressed};f.prototype.reclip=function(a,b){var c=this;this.constructed&&(this.forEachFeatureTile(function(d){d.displayingFeatures&&0!==d.displayingFeatures.length&&(d.intersection(b,I),d.intersection(a,H),y.equals(I,
H)||c.hideTileFeatures(d))}),this.forEachFeatureTile(function(a){return c.showTile(a)}),this.updated())};f.prototype.updated=function(){var b=this,c=this._dirty||0<this.fetchQueue.length||!!this.pendingEdits;this._set("updating",c);if(c){var d=c=0,e=0,f=0,g=0,h=0,k=this.displayingFeatureReferences.size/this.numDisplayingFeatureReferences;this.forEachFeatureTile(function(a){++e;if(a.isFetching&&a.hasPreciseFeatureCount){var c=b.maximumFeaturesForTile(a)*(1-a.emptyFeatureRatio);h+=c-(a.displayingFeatures?
a.displayingFeatures.length*k:0)}a.needsFetching?++g:0<a.numFeatures&&(++f,d+=a.numFeatures)});var l=g+=this.fetchQueue?this.fetchQueue.length:0;d?(l=g*d/f,c=d+l):c=e;h=Math.min(this.maximumNumberOfFeatures-this.features.length,h);this._set("updatingTotal",c);this._set("updatingRemaining",l);this._set("expectedFeatureDiff",h)}else this._set("updatingTotal",0),this._set("updatingRemaining",0),this._set("expectedFeatureDiff",0);this.debugger&&this.debugger.update();this.updating||(this.maximumNumberOfFeaturesExceededNext=
this.maximumNumberOfFeaturesExceededNext||a()+this.maximumNumberOfFeaturesExceededThrottle)};f.prototype.updateMaximumNumberOfFeaturesExceeded=function(){if(!this.updating){var a=!1;this.forEachFeatureTile(function(b){a=a||b.perTileMaximumNumberOfFeaturesExceeded});this.maximumNumberOfFeaturesExceededNext=0;this._set("maximumNumberOfFeaturesExceeded",a)}};f.prototype.updateRatio=function(a){for(var b=E(a),c=function(a){return 1/(1<<b-a.descriptor.lij[0])},d=0,e=0,f=0;f<a.length;f++)var g=a[f],h=g.numFeatures,
d=d+h,e=e+h*c(g);this._fullRatio=Math.min(1,this.maximumNumberOfFeatures/d);this._farRatio=this.maximumNumberOfFeatures/e;this.scheduleUpdated();return c};f.prototype.maximumFeaturesUpdated=function(a,b){var c=this;a!==b&&(b>a&&this.forEachFeatureTile(function(a){if(a.featuresMissing){var b=c.maximumFeaturesForTile(a);a.features&&(a.features.length>=b||5===a.fetchStatus)||(c.cancelFetchTile(a),c.resetFetchTile(a))}}),this.setDirty())};f.prototype.addTile=function(a){a=new z(a);this.idToFeatureTile.set(a.id,
a);this.resetFetchTile(a);this.referenceDisplayingFeaturesFromRelatedTiles(a);return a};f.prototype.referenceDisplayingFeaturesFromRelatedTiles=function(a){var b=this,c=a.descriptor.resolution;this.forEachFeatureTile(function(d){if(d.displayingFeatures&&b.tilesAreRelated(a,d)){a.displayingFeatures=a.displayingFeatures||[];var e=0;for(d=d.displayingFeatures;e<d.length;e++){var f=d[e];a.displayingFeatures.push(f);f=b.displayingFeatureReferences.get(x.getObjectId(f,b.objectIdField));f.ref(c,f.feature);
b.numDisplayingFeatureReferences++}}});a.featureLimit=a.displayingFeatures?a.displayingFeatures.length:0};f.prototype.tilesAreRelated=function(a,b){if(a===b)return!1;a=a.descriptor.lij;var c=b.descriptor.lij;if(!a||!c)return!0;var d=a[0]<c[0];b=d?a:c;a=d?c:a;c=a[0]-b[0];if(0===c)return!1;c=1<<c;return Math.floor(a[1]/c)===b[1]&&Math.floor(a[2]/c)===b[2]};f.prototype.removeTile=function(a){this.clearTile(a);this.idToFeatureTile.delete(a.id)};f.prototype.resetFetchTile=function(a){a.intersects(this.filterExtent)?
(a.fetchStatus=0,a.filtered=!1):(a.needsFetching&&(a.fetchStatus=4),a.filtered=!0)};f.prototype.cancelFetchTile=function(a){a.fetchRequest&&(a.fetchRequest=null,a.fetchStatus=0,this.fetchQueue.abort(a))};f.prototype.fetchTile=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,f,g,k,l,n,u,q,z,t;return h(this,function(h){switch(h.label){case 0:if(!this.needsNumFeatures(a))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),b=a,[4,this.fetchCount(a,c)];case 2:return b.numFeatures=h.sent(),
this.updateRatio(this.getListOfTiles()),[3,4];case 3:return d=h.sent(),p.isAbortError(d)?[2]:[3,4];case 4:e=this.maximumFeaturesForTile(a);f=this.getMaxRecordCount(a);g=Math.ceil(e/f);if(F(a)||!this.capabilities.supportsMaxRecordCountFactor||a.numFeatures<=e&&g>m.MAX_MAX_RECORD_COUNT_FACTOR)return[2,this.fetchPagedTile(a,c)];k=this.createQuery(a);k.maxRecordCountFactor=Math.ceil(e/f);a.isRefetching&&a.features&&0<a.features.length&&(l=Math.ceil(a.features.length/(1-a.emptyFeatureRatio)/f),k.maxRecordCountFactor=
Math.max(l+1,k.maxRecordCountFactor));return[4,this.queryFeatures(k,c)];case 5:return n=h.sent(),u=n.features,z=(q=n.exceededTransferLimit)?k.maxRecordCountFactor>=m.MAX_MAX_RECORD_COUNT_FACTOR?5:4:5,a.featuresMissing=u.length<a.numFeatures||q,t=this._removeEmptyFeatures(u),this.verticalScale.adjust(u),a.setFeatures(u,t),this.invalidateCounts(),[2,z]}})})};f.prototype.fetchCount=function(a,c){return b(this,void 0,void 0,function(){return h(this,function(b){return[2,this.layerView.layer.queryFeatureCount(this.createFeatureCountQuery(a),
{signal:c})]})})};f.prototype.fetchPagedTile=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,f,g,k,l,m,p,n,u;return h(this,function(h){switch(h.label){case 0:f=d=b=0,g=this.maximumFeaturesForTile(a)-f,k=this.getMaxRecordCount(a),h.label=1;case 1:return l=this.createQuery(a),m=this.setPagingParameters(l,b,g,k),[4,this.queryFeatures(l,c)];case 2:return p=h.sent(),n=p.features,u=p.exceededTransferLimit,b+=l.num,f+=n.length,d+=this._removeEmptyFeatures(n),this.verticalScale.adjust(n),a.featuresMissing=
b<a.numFeatures||u,e=e?e.concat(n):n,a.setFeatures(e,d),this.invalidateCounts(),this.setDirty(),g=this.maximumFeaturesForTile(a)-f,!m||!u||0>=g?[2,u?4:5]:[3,1];case 3:return[2]}})})};f.prototype.createFeatureCountQuery=function(a){a=this.createQuery(a);this.capabilities.supportsCacheHint&&(a.resultType=void 0,a.cacheHint=!0);return a};f.prototype.createQuery=function(a){var b=this.layerView.layer.createQuery();b.outFields=this.layerView.availableFields;b.returnZ=this.hasZ;b.returnM=this.hasM;var c=
this.tilingScheme.spatialReference;b.outSpatialReference=c;var d=a.descriptor.extent;d&&(b.geometry=y.toExtent(d,c));this.setResolutionParams(b,a);this.useTileQuery(a)?b.resultType="tile":this.capabilities.supportsCacheHint&&(b.cacheHint=!0);return b};f.prototype.setPagingParameters=function(a,b,c,d){if(!this.capabilities.supportsPagination)return!1;a.start=b;0<c&&this.capabilities.supportsMaxRecordCountFactor?(a.maxRecordCountFactor=Math.ceil(c/d),a.num=Math.min(a.maxRecordCountFactor*d,c)):a.num=
Math.min(d);return!0};f.prototype.getEffectiveTileResolution=function(a){if(null==a.descriptor.resolution)return null;var b="global"===this.viewingMode?this.tilingScheme.resolutionAtLevel(3):Infinity;return Math.min(a.descriptor.resolution,b)*V};f.prototype.setResolutionParams=function(a,b){if(this.capabilities.supportsMultipleResolutions){var c=this.layerView.layer;"point"!==c.geometryType&&(b=this.getEffectiveTileResolution(b),null!=b&&(this.capabilities.supportsQuantization?a.quantizationParameters=
new w.default({mode:"view",originPosition:"upper-left",tolerance:b,extent:c.fullExtent}):"polyline"===c.geometryType&&(a.maxAllowableOffset=b)))}};f.prototype._removeEmptyFeatures=function(a){for(var b=a.length,c=0;c<a.length;)x.hasVertices(a[c].geometry)?++c:(a[c]=a[a.length-1],--a.length);return b-a.length};f.prototype.needsNumFeatures=function(a){return this.useTileCount&&!a.hasPreciseFeatureCount&&!F(a)};f.prototype.getMaxRecordCount=function(a){var b=this.layerView.layer;return this.useTileQuery(a)&&
b&&"tileMaxRecordCount"in b&&0<b.tileMaxRecordCount&&this.capabilities.supportsResultType?b.tileMaxRecordCount:b&&"maxRecordCount"in b&&0<b.maxRecordCount?b.maxRecordCount:O};f.prototype.useTileQuery=function(a){return F(a)&&this.capabilities.supportsCacheHint?!1:this.capabilities.supportsResultType};f.prototype.queueFetchTile=function(a){var b=this;if(!a.needsFetching)return!1;var c=this._memCache&&this._memCache.pop(a.id);if(c)return a.loadCache(c),this.setDirty(),this.scheduleUpdated(),!0;a.fetchStatus=
a.needsRefetching?3:2;var d=!1,e=!1,f=this.fetchQueue.push(a).then(function(b){a.fetchRequest=null;a.fetchStatus=b}).catch(function(c){a.fetchRequest===f&&(a.fetchRequest=null,a.fetchStatus=4);p.isAbortError(c)?d=!0:(a.setFeatures([],0),b.invalidateCounts(),a.featuresMissing=!1,K.error("#fetchTile()",b.layerView.layer,c&&c.message?c.message:c))}).then(function(){e=!0;d||b.setDirty();b.scheduleUpdated()});e||(a.fetchRequest=f);return!0};f.prototype.scheduleUpdated=function(){var a=this;this.handles&&
!this.handles.has("scheduleUpdated")&&this.handles.add(q.schedule(function(){a.handles.remove("scheduleUpdated");a.updated()}),"scheduleUpdated")};f.prototype.showTile=function(a){if(a.displayingFeatures&&!a.needsDisplayUpdate)return!1;if(0===a.featureLimit||!a.features){var b=a.displayingFeatures&&0<a.displayingFeatures.length;this.hideTileFeatures(a);a.displayingFeatures=[];return b}for(var b=a.descriptor.resolution,c=this.changes.updates,d=this.changes.adds,e=0;e<a.featureLimit;++e){var f=a.features[e],
g=x.getObjectId(f,this.objectIdField),h=this.displayingFeatureReferences.get(g);h?(f=h.ref(b,f),f.oldVersion!==f.newVersion&&(c.removes.push(f.oldVersion),c.adds.push(f.newVersion))):(this.displayingFeatureReferences.set(g,new this.FeatureReferenceClass(b,f)),d.push(f));this.numDisplayingFeatureReferences++}this.hideTileFeatures(a);this.applyChanges();a.displayingFeatures=a.features.slice(0,a.featureLimit);return!0};f.prototype.hideTile=function(a){this.cancelFetchTile(a);this.hideTileFeatures(a)};
f.prototype.hideTileFeatures=function(a){if(a.displayingFeatures){for(var b=this.changes.updates,c=this.changes.removes,d=0,e=a.displayingFeatures;d<e.length;d++){var f=x.getObjectId(e[d],this.objectIdField),g=this.displayingFeatureReferences.get(f);g&&((g=g.unref(a.descriptor.resolution),this.numDisplayingFeatureReferences--,g)?g.oldVersion!==g.newVersion&&(null==g.newVersion?(this.displayingFeatureReferences.delete(f),c.push(g.oldVersion)):(b.adds.push(g.newVersion),b.removes.push(g.oldVersion))):
console.error("Hiding unreferenced feature"))}this.applyChanges();a.displayingFeatures=null}};f.prototype.applyChanges=function(){var a=this.changes.updates;0<a.removes.length&&(this.features.removeMany(a.removes),a.removes.length=0);0<a.adds.length&&(this.features.addMany(a.adds),a.adds.length=0);for(var a=this.changes.adds,b=this.changes.removes,c=Math.min(a.length,b.length),d=0;d<c;){var e=Math.min(d+P,c);this.features.addMany(a.slice(d,e));this.features.removeMany(b.slice(d,e));d=e}a.length>c&&
this.features.addMany(0===d?a:a.slice(d));b.length>c&&this.features.removeMany(0===d?b:b.slice(d));a.length=0;b.length=0};f.prototype.clearTile=function(a){this.hideTile(a);a.features&&this._memCache&&this._memCache.put(a.id,a.cacheItem,16+a.estimatedSize);a.setFeatures(null,0);this.invalidateCounts()};f.prototype.invalidateCounts=function(){this.notifyChange("totalVertices");this.notifyChange("totalFeatures");this.notifyChange("memoryForUnusedFeatures")};f.prototype.getListOfTiles=function(){var a=
Array(this.idToFeatureTile.size),b=0;this.forEachFeatureTile(function(c){return a[b++]=c});return a};Object.defineProperty(f.prototype,"storedFeatures",{get:function(){return this.getListOfTiles().reduce(function(a,b){return a+(b.features?b.features.length:0)},0)},enumerable:!0,configurable:!0});f.prototype.maximumFeaturesForTile=function(a){var b=a.hasPreciseFeatureCount?a.numFeatures:this.maximumNumberOfFeatures;return Math.min(Math.ceil(b*(1>this._fullRatio?this._farRatio:1)/(1-a.emptyFeatureRatio)),
b)};Object.defineProperty(f.prototype,"test",{get:function(){var a=this;return{update:function(b){a.fetchQueue.test.update(b);a.update(b)}}},enumerable:!0,configurable:!0});l([t.property({constructOnly:!0})],f.prototype,"features",void 0);l([t.property()],f.prototype,"tileDescriptors",void 0);l([t.property({constructOnly:!0})],f.prototype,"tilingScheme",void 0);l([t.property({value:Infinity})],f.prototype,"maximumNumberOfFeatures",null);l([t.property()],f.prototype,"useTileCount",void 0);l([t.property({constructOnly:!0})],
f.prototype,"layerView",void 0);l([t.property({readOnly:!0})],f.prototype,"updating",void 0);l([t.property({readOnly:!0})],f.prototype,"updatingTotal",void 0);l([t.property({readOnly:!0})],f.prototype,"updatingRemaining",void 0);l([t.property({readOnly:!0})],f.prototype,"expectedFeatureDiff",void 0);l([t.property({readOnly:!0})],f.prototype,"memoryForUnusedFeatures",null);l([t.property({readOnly:!0})],f.prototype,"maximumNumberOfFeaturesExceeded",void 0);l([t.property({constructOnly:!0})],f.prototype,
"maximumNumberOfFeaturesExceededThrottle",void 0);l([t.property({readOnly:!0})],f.prototype,"totalVertices",null);l([t.property({readOnly:!0})],f.prototype,"totalFeatures",null);l([t.property()],f.prototype,"filterExtent",null);l([t.property({constructOnly:!0})],f.prototype,"verticalScale",void 0);l([t.property({constructOnly:!0})],f.prototype,"viewingMode",void 0);l([t.property({constructOnly:!0})],f.prototype,"hasZ",void 0);l([t.property({constructOnly:!0})],f.prototype,"hasM",void 0);return f=
l([t.subclass("esri.views.3d.layers.support.FeatureTileFetcher3D")],f)}(t.declared(g));d.FeatureTileFetcher3D=r;var O=2E3,I=y.create(),H=y.create(),S=6E5,P=200,V=1/3;d.default=r})},"esri/views/3d/layers/support/featureReference":function(){define(["require","exports","../../../../layers/graphics/dehydratedFeatures"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,d){this.highestResolutionVersion=null;this.versions=[];this.markedTile=null;this.ref(b,d)}Object.defineProperty(d.prototype,
"isReferenced",{get:function(){return 0!==this.versions.length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isSingle",{get:function(){return 1===this.versions.length&&1===this.versions[0].refCount},enumerable:!0,configurable:!0});d.prototype.ref=function(b,d){var g=this.feature;l.oldVersion=g;this.feature&&(d.uid=this.feature.uid);for(var e=0,c=this.versions;e<c.length;e++){var f=c[e];if(f.resolution===b){f.refCount++;if((b=this.highestResolutionVersion===f&&!n.equals(d,f.feature))||
this.highestResolutionVersion!==f)f.feature=d;l.newVersion=b?d:g;return l}}f={feature:d,resolution:b,refCount:1};this.versions.push(f);!this.highestResolutionVersion||b<this.highestResolutionVersion.resolution?(l.newVersion=d,this.highestResolutionVersion=f):l.newVersion=g;return l};d.prototype.unref=function(b){for(var d=0;d<this.versions.length;d++){var g=this.versions[d];if(g.resolution===b)return g.refCount--,l.oldVersion=this.feature,0===g.refCount&&(this.versions[d]=this.versions[this.versions.length-
1],this.versions.length--,this.highestResolutionVersion===g&&(this.recalculateHighestResolutionVersion(),l.oldVersion=g.feature)),l.newVersion=this.feature,l}return null};Object.defineProperty(d.prototype,"feature",{get:function(){return this.highestResolutionVersion?this.highestResolutionVersion.feature:null},enumerable:!0,configurable:!0});d.prototype.recalculateHighestResolutionVersion=function(){if(0===this.versions.length)this.highestResolutionVersion=null;else{for(var b=this.versions[0],d=1;d<
this.versions.length;d++){var g=this.versions[d];g.resolution<b.resolution&&(b=g)}this.highestResolutionVersion=b}};return d}();d.MultiFeatureReference=r;r=function(){function d(b,d){this._feature=d;this.refCount=1;this.markedTile=null}Object.defineProperty(d.prototype,"isReferenced",{get:function(){return 0!==this.refCount},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isSingle",{get:function(){return 1===this.refCount},enumerable:!0,configurable:!0});d.prototype.ref=function(b,
d){++this.refCount;l.oldVersion=this._feature;this.feature&&(d.uid=this.feature.uid);n.equals(this._feature,d)||(this._feature=d);l.newVersion=this._feature;return l};d.prototype.unref=function(b){l.oldVersion=this._feature;if(0<this.refCount&&(this.refCount--,!this.isReferenced))return l.newVersion=null,l;l.newVersion=this._feature;return l};Object.defineProperty(d.prototype,"feature",{get:function(){return this._feature},enumerable:!0,configurable:!0});return d}();d.SingleFeatureReference=r;var l=
{oldVersion:null,newVersion:null}})},"esri/views/3d/layers/support/FeatureTile":function(){define(["require","exports","../../../../core/arrayUtils","../../../../geometry/support/aaBoundingRect","../../../../layers/graphics/dehydratedFeatures"],function(r,d,n,l,k){r=function(){function d(b){this.descriptor=b;this.fetchRequest=null;this.fetchStatus=0;this._features=null;this._featureLimit=this._numVertices=0;this.featuresMissing=!0;this._shuffled=!1;this._numFeatures=d.UNKNOWN_COUNT;this._emptyFeatureRatio=
0;this._estimatedSize=-1;this._estimatedUnusedSize=0;this._estimatedUnusedSizeDirty=!1;this.displayingFeatures=null;this.alive=!0;this.filtered=!1}Object.defineProperty(d.prototype,"perTileMaximumNumberOfFeaturesExceeded",{get:function(){return!this.filtered&&(this.featuresMissing||this.features&&this.featureLimit!==this.features.length)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"featureLimit",{get:function(){return this._featureLimit},set:function(b){this._featureLimit!==b&&(this._featureLimit=b,this._estimatedUnusedSizeDirty=!0)},enumerable:!0,configurable:!0});d.prototype.setFeatures=function(b,d){this._features=b;this._shuffled=!1;this._estimatedSize=-1;this._estimatedUnusedSizeDirty=!0;b&&0<b.length?(this._emptyFeatureRatio=d/(b.length+d),this._numVertices=b.reduce(function(b,d){return b+k.numVertices(d.geometry)},0)):this._numVertices=this._emptyFeatureRatio=0};Object.defineProperty(d.prototype,
"emptyFeatureRatio",{get:function(){return this._emptyFeatureRatio},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"numFeatures",{get:function(){return this._numFeatures!==d.UNKNOWN_COUNT?this._numFeatures:this._features?this._features.length:0},set:function(b){this._numFeatures=b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasPreciseFeatureCount",
{get:function(){return this._numFeatures!==d.UNKNOWN_COUNT},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this.descriptor.id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"estimatedSize",{get:function(){this.updateMemoryEstimates();return this._estimatedSize},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"estimatedUnusedSize",{get:function(){return this._estimatedUnusedSize},enumerable:!0,configurable:!0});d.prototype.updateMemoryEstimates=
function(){if(0>this._estimatedSize){this._estimatedUnusedSize=this._estimatedSize=0;if(this._features)for(var b=0;b<this._features.length;++b){var d=k.estimateSize(this._features[b]);this._estimatedSize+=d;b>=this.featureLimit&&(this._estimatedUnusedSize+=d)}return!0}if(this._estimatedUnusedSizeDirty){this._estimatedUnusedSize=0;this._estimatedUnusedSizeDirty=!1;if(this._features)for(b=this.featureLimit;b<this._features.length;++b)this._estimatedUnusedSize+=k.estimateSize(this._features[b]);return!0}return!1};
Object.defineProperty(d.prototype,"isFetching",{get:function(){return 2===this.fetchStatus||3===this.fetchStatus},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isRefetching",{get:function(){return 3===this.fetchStatus},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"needsFetching",{get:function(){return 0===this.fetchStatus||1===this.fetchStatus},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"needsRefetching",{get:function(){return 1===this.fetchStatus},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isFetched",{get:function(){return 4===this.fetchStatus||5===this.fetchStatus},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"needsDisplayUpdate",{get:function(){var b;if(b=!!this._features){a:{b=this._features;var d=this.displayingFeatures,c=this.featureLimit;if(!d||!b||c!==d.length||c>b.length)b=!1;else{for(var f=0;f<c;++f)if(b[f]!==d[f]){b=!1;break a}b=!0}}b=!b}return b},enumerable:!0,configurable:!0});d.prototype.intersects=
function(d){if(!d||!this.descriptor.extent)return!0;l.fromExtent(d,b);return l.intersects(this.descriptor.extent,b)};d.prototype.intersection=function(b,d){if(!b&&!this.descriptor.extent)return l.set(d,l.POSITIVE_INFINITY),d;b?(l.fromExtent(b,d),this.descriptor.extent&&l.intersection(d,this.descriptor.extent,d)):l.set(d,this.descriptor.extent);return d};d.prototype._shuffle=function(b){this._features.sort(function(d,c){return k.getObjectId(d,b)-k.getObjectId(c,b)});n.shuffle(this._features,16438);
this._estimatedUnusedSizeDirty=this._shuffled=!0};d.prototype.reduceFeatures=function(b,d){if(0>=b)return!1;var c=!1;this._features?(this.featureLimit=Math.ceil(this.numFeatures*b),this.featureLimit>this._features.length&&(this.featureLimit=this._features.length,4===this.fetchStatus&&0<this._features.length&&(this.fetchStatus=1,c=!0)),!this._shuffled&&1>b&&this._shuffle(d)):this.featureLimit=0;return c};Object.defineProperty(d.prototype,"cacheItem",{get:function(){return{features:this.features,numFeatures:this._numFeatures,
emptyFeatureRatio:this._emptyFeatureRatio,fetchStatus:this.fetchStatus,featuresMissing:this.featuresMissing}},enumerable:!0,configurable:!0});d.prototype.loadCache=function(b){this.fetchRequest=null;this._features=b.features;this._numFeatures=b.numFeatures;this._emptyFeatureRatio=b.emptyFeatureRatio;this.fetchStatus=b.fetchStatus;this.featuresMissing=b.featuresMissing;this._estimatedSize=-1;this._estimatedUnusedSizeDirty=!0};return d}();(r||(r={})).UNKNOWN_COUNT=-1;var b=l.create();return r})},"esri/views/3d/layers/support/featureTileQuery3D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../layers/graphics/dehydratedFeatures ../../../../tasks/operations/query".split(" "),
function(r,d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});var e=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}n(a,c);Object.defineProperty(a.prototype,"queryFeaturesDehydrated",{get:function(){var a=this,b=this.layer.capabilities;if((b=b&&b.query)&&b.supportsFormatPBF){var c={type:"dehydrated",applyTransform:!0,useWorker:!0,maxStringAttributeLength:1024};return function(b,d){return g.executeQueryPBF(a.layer.parsedUrl,b,c,d).then(function(a){return a.data})}}return function(b,
c){return g.executeQuery(a.layer.parsedUrl,b,c).then(function(a){return h.fromFeatureSetJSON(a.data)})}},enumerable:!0,configurable:!0});l([b.property({constructOnly:!0})],a.prototype,"layer",void 0);l([b.property({readOnly:!0,dependsOn:["layer.capabilities.query.supportsFormatPBF"]})],a.prototype,"queryFeaturesDehydrated",null);return a=l([b.subclass("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],a)}(b.declared(k)),c=function(c){function a(){return null!==c&&c.apply(this,
arguments)||this}n(a,c);a.prototype.queryFeaturesDehydrated=function(a,b){var c=this;return this.source.queryFeaturesJSON(a,b).then(h.fromFeatureSetJSON,function(d){if(d&&"query-features-json:unsupported"===d.name)return c.source.queryFeatures(a,b);throw d;})};l([b.property({constructOnly:!0})],a.prototype,"layer",void 0);l([b.aliasOf("layer.source")],a.prototype,"source",void 0);return a=l([b.subclass("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],a)}(b.declared(k));
d.createFeatureTileQuery3D=function(b){switch(b.source.type){case "feature-layer":return new e({layer:b});case "memory":case "csv":case "geojson":return new c({layer:b});case "stream-layer":throw Error("Tile based queries unsupported for stream sources");}}})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(r,
d,n,l,k,b,h,g){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){return function(b,d){this.item=b;this.controller=d;this.promise=null}}();r=function(){function c(b){var a=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;b.concurrency&&(this.concurrency=b.concurrency);this._queue=new h({peeker:b.peeker});this.process=b.process;var c=b.scheduler;b.priority&&c&&(this._task=c.registerTask(b.priority,
function(b){return a.update(b)},function(){return a.needsUpdate()}))}c.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(c.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});c.prototype.abort=function(b){(b=this._controllers.get(b))&&b.abort()};c.prototype.clear=function(){this._queue.clear();var b=[];this._controllers.forEach(function(a){return b.push(a)});
this._controllers.clear();b.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};c.prototype.get=function(b){return(b=this._deferreds.get(b))?b.promise:void 0};c.prototype.isOngoing=function(b){return this._processingItems.has(b)};c.prototype.has=function(b){return this._deferreds.has(b)};c.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};c.prototype.push=function(c){return l(this,void 0,void 0,function(){var a,d,e,f,g,h,k=this;
return n(this,function(l){if(a=this.get(c))return[2,a];e=b.createAbortController();f=function(){var a=k._processingItems.get(c);a&&a.controller.abort();g();d.reject(b.createAbortError())};g=function(){h.remove();k._deferreds.delete(c);k._controllers.delete(c);k._queue.remove(c);k._processingItems.delete(c);k._scheduleNext()};h=b.onAbortOrThrow(e.signal,f);d=b.createDeferred();this._deferreds.set(c,d);this._controllers.set(c,e);d.promise.then(g,g);this._queue.push(c);this._scheduleNext();return[2,
d.promise]})})};c.prototype.reset=function(){var b=[];this._processingItems.forEach(function(a){return b.push(a)});this._processingItems.clear();for(var a=0;a<b.length;a++){var c=b[a];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};c.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};c.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};c.prototype.update=function(b){for(;!b.done&&
0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),b.madeProgress()};c.prototype._scheduleNext=function(){var b=this;this._task||this._isPaused||this._schedule||(this._schedule=g.schedule(function(){b._schedule=null;b._next()}))};c.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};c.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=
null)};c.prototype._processResult=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).resolve(a))};c.prototype._processError=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).reject(a))};c.prototype._canProcessFulfillment=function(b){return this._deferreds.get(b.item)&&this._processingItems.get(b.item)===b?!0:!1};c.prototype._process=function(c){var a=this;if(!k.isNone(c)){var d,f=b.createAbortController(),g=
new e(c,f);this._processingItems.set(c,g);try{d=this.process(c,f.signal)}catch(t){this._processError(g,t)}d&&"function"===typeof d.then?(g.promise=d,d.then(function(b){return a._processResult(g,b)},function(b){return a._processError(g,b)})):this._processResult(g,d)}};Object.defineProperty(c.prototype,"test",{get:function(){var b=this;return{update:function(a){return b.update(a)}}},enumerable:!0,configurable:!0});return c}();d.QueueProcessor=r})},"esri/core/Queue":function(){define(["require","exports"],
function(r,d){return function(){function d(d){this._items=[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;d&&d.peeker&&(this._peeker=d.peeker)}Object.defineProperty(d.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};d.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._add(d)};
d.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};d.prototype.pop=function(){if(0!==this._length){var d=this.peek();this._remove(d);return d}};d.prototype.remove=function(d){this.contains(d)&&this._remove(d)};d.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};d.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return d}()})},"esri/views/3d/layers/support/FeatureTileFetcher3DDebugger":function(){define("require exports ../../../../Graphic ../../../../geometry/Polygon ../../../../symbols/FillSymbol3DLayer ../../../../symbols/PointSymbol3D ../../../../symbols/PolygonSymbol3D ../../../../symbols/TextSymbol3DLayer ../../terrain/TilingScheme".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});var c=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];r=function(){function d(a,b,d){this.loadingGraphics=new Map;this.loadedGraphics=new Map;this.pendingGraphics=new Map;this._enabled=!0;this.tileFetcher=a;this.view=d;this.tilingScheme=
new e(b);this.loadedSymbols=c.map(function(a){return new h(new k({material:{color:[a[0],a[1],a[2],.6]},outline:{color:"black",size:1}}))});this.loadingSymbols=[new h(new k({material:{color:[200,200,200,.4]},outline:{color:[30,30,30],size:1}}))];this.pendingSymbols=[new h(new k({material:{color:[100,100,100,.4]},outline:{color:[30,30,30],size:1}}))];this.dataExtentSymbol=new h(new k({material:{color:[0,0,0,0]},outline:{color:"green",size:4}}))}d.prototype.destroy=function(){this.enabled=!1};Object.defineProperty(d.prototype,
"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a;this.update()},enumerable:!0,configurable:!0});d.prototype.update=function(){var a=this;this._enabled?(this.synchronizeMaps(this.loadingGraphics,{filter:function(a){return a.isFetching},symbols:this.loadingSymbols}),this.synchronizeMaps(this.loadedGraphics,{filter:function(a){return!a.isFetching},symbols:this.loadedSymbols}),this.synchronizeMaps(this.pendingGraphics,{filter:function(a){return!a.isFetching},symbols:this.pendingSymbols}),
this.showDataExtent(this.tileFetcher.filterExtent)):(this.loadingGraphics.forEach(function(b){a.view.graphics.removeMany(b)}),this.loadingGraphics.clear(),this.loadedGraphics.forEach(function(b){a.view.graphics.removeMany(b)}),this.loadedGraphics.clear(),this.pendingGraphics.forEach(function(b){a.view.graphics.removeMany(b)}),this.pendingGraphics.clear(),this.dataExtentGraphic&&(this.view.graphics.remove(this.dataExtentGraphic),this.dataExtentGraphic=null))};d.prototype.showDataExtent=function(a){this.dataExtentGraphic&&
(this.view.graphics.remove(this.dataExtentGraphic),this.dataExtentGraphic=null);a&&(a=l.fromExtent(a),this.dataExtentGraphic=new n({geometry:a,symbol:this.dataExtentSymbol}),this.view.graphics.add(this.dataExtentGraphic))};d.prototype.synchronizeMaps=function(a,c){var d=this,e=[];a.forEach(function(a,b){var f=d.tileFetcher.getFeatureTileById(b);f&&c.filter(f)||(d.view.graphics.removeMany(a),e.push(b))});e.forEach(function(b){return a.delete(b)});this.tileFetcher.forEachFeatureTile(function(e){if(c.filter(e)&&
!a.has(e.id)){var f=e.descriptor.lij,h=f[0],k=f[1],l=f[2];d.tilingScheme.ensureMaxLod(h);var p=d.tilingScheme.getExtentGeometry(h,k,l),f=new n({geometry:p,symbol:c.symbols[h%c.symbols.length]}),h=new n({geometry:p.center,symbol:new b({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new g({text:h+"/"+k+"/"+l,halo:{color:"white",size:1/.75},material:{color:"black"},size:16})]})}),h=[f,h];a.set(e.id,h);d.view.graphics.addMany(h)}})};return d}();
d.FeatureTileFetcher3DDebugger=r;d.default=r})},"esri/views/3d/layers/FeatureLikeLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/dehydratedFeatures ../../../renderers/support/renderingInfoUtils ../../../tasks/support/Query ./LayerView3D ./graphics/Graphics3DFeatureLikeLayerView ./graphics/QueryEngine ./support/projectExtentUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w){return function(d){function m(a){a=d.call(this)||this;a.controller=null;a.asyncGraphicsUpdates=!1;a.suspendResumeExtentMode="computed";a.slicePlaneEnabled=!1;a.supportsDraping=!0;a.overlayUpdating=!1;a.fullExtentInLocalViewSpatialReference=null;a.suspendResumeExtent=null;a._controllerCreated=!1;a.clippingExtent=null;a.supportsHeightUnitConversion=!0;a.pendingController=null;a.queryEngine=null;return a}n(m,d);m.prototype.initialize=function(){var a=this;
this.layer.isTable?this.addResolvingPromise(c.reject(new g("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer}))):(this._set("graphics3d",new y({owner:this,layer:this.layer,frustumVisibilityEnabled:!0,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!0,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!0,asyncGraphicsUpdates:this.asyncGraphicsUpdates,suspendResumeExtentMode:this.suspendResumeExtentMode,updateClippingExtent:function(b){return a.updateClippingExtent(b)}})),
this.handles.add([this.watch("asyncGraphicsUpdates",function(b){a.graphics3d.graphicsCore.asyncUpdates=b}),this.watch("suspendResumeExtentMode",function(b){a.graphics3d.suspendResumeExtentMode=b})]),this.drawingOrder=this.view.getDrawingOrder(this.layer.uid),this.addResolvingPromise(h.safeCast(this.graphics3d.setup()).then(function(){return a.validateGeometryType()}).then(function(){a.queryEngine=new x.default({layerView:a,priority:4})}).then(function(){return w.toViewIfLocal(a)}).then(function(b){return a.fullExtentInLocalViewSpatialReference=
b}).then(function(){return a.initializeController()})),this.notifyChange("updating"))};m.prototype.destroy=function(){this.destroyPendingController();this.controller&&(this.controller.destroy(),this.controller=null);this.graphics3d&&(this.graphics3d.destroy(),this._set("graphics3d",null));this.queryEngine&&(this.queryEngine.destroy(),this.queryEngine=null);this.loadedGraphics=null};m.prototype.destroyPendingController=function(){this.pendingController&&(this.pendingController.destroy(),this.pendingController=
null)};Object.defineProperty(m.prototype,"drawingOrder",{set:function(a){this.graphics3d.graphicsCore.setDrawingOrder(a);this._set("drawingOrder",a)},enumerable:!0,configurable:!0});m.prototype.getRenderingInfo=function(a,b){(a=q.getRenderingInfo(a,{renderer:b}))&&a.color&&(b=a.color,b[0]/=255,b[1]/=255,b[2]/=255);return a};m.prototype.getGraphicFromGraphicUid=function(a){var b=this,c=null;this.loadedGraphics&&this.loadedGraphics.forEach(function(d){d.uid===a&&(c=p.hydrateGraphic(d,b.layer))});return c};
Object.defineProperty(m.prototype,"graphics3DGraphics",{get:function(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphics:null},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"graphics3DGraphicsByObjectID",{get:function(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"symbolUpdateType",{get:function(){return this.graphics3d?this.graphics3d.graphicsCore.symbolUpdateType:
null},enumerable:!0,configurable:!0});m.prototype.whenGraphicBounds=function(a,b){return this.graphics3d?this.graphics3d.graphicsCore.whenGraphicBounds(a,b):null};m.prototype.whenSymbolLayerSize=function(a,b){return this.graphics3d?h.safeCast(this.graphics3d.graphicsCore.whenSymbolLayerSize(a,b)):null};m.prototype.queryFeatures=function(a,b){return h.safeCast(this.queryEngine.executeQuery(this._ensureQuery(a),e.get(b,"signal")))};m.prototype.queryObjectIds=function(a,b){return h.safeCast(this.queryEngine.executeQueryForIds(this._ensureQuery(a),
e.get(b,"signal")))};m.prototype.queryFeatureCount=function(a,b){return h.safeCast(this.queryEngine.executeQueryForCount(this._ensureQuery(a),e.get(b,"signal")))};m.prototype.queryExtent=function(a,b){return h.safeCast(this.queryEngine.executeQueryForExtent(this._ensureQuery(a),e.get(b,"signal")))};m.prototype._ensureQuery=function(a){return e.isNone(a)?this.createQuery():v.from(a)};m.prototype.highlight=function(a,b){void 0===b&&(b={});return this.graphics3d.highlight(a,b,this.layer.objectIdField)};
m.prototype.getStats=function(){var a=this.graphics3d.graphicsCore.getStats();a.features=this.loadedGraphics.length;a.updating=this.updating;a.elevationUpdating=this.graphics3d.elevationAlignment.updating;a.visibilityFrustum=!this.graphics3d.frustumVisibility.suspended;a.visibilityScale=!this.graphics3d.scaleVisibility.suspended;return a};m.prototype.canResume=function(){return!this.inherited(arguments)||this.graphics3d&&this.graphics3d.suspended?!1:!0};m.prototype.isUpdating=function(){return!this.graphics3d||
this.graphics3d.destroyed?!1:!this._controllerCreated||this.controller&&this.controller.updating||this.overlayUpdating||!this.view.basemapTerrain||!this.view.basemapTerrain.ready||this.graphics3d.updating};m.prototype.initializeController=function(){return b(this,void 0,void 0,function(){var a;return k(this,function(b){switch(b.label){case 0:return[4,this.createController()];case 1:return this.pendingController=a=b.sent(),[4,a.when()];case 2:return b.sent(),this.setControllerWhenInitialized(a),[2]}})})};
m.prototype.setControllerWhenInitialized=function(a){return b(this,void 0,void 0,function(){return k(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,this.when()];case 1:return b.sent(),[3,3];case 2:return b.sent(),[3,3];case 3:return this._controllerCreated=!0,this.notifyChange("updating"),this.isResolved()?[4,f.whenTrueOnce(this.view,"basemapTerrain.ready")]:(this.destroyPendingController(),[2]);case 4:return b.sent(),this.pendingController=null,this.controller=a,this.loadedGraphics=
a.graphics,this.notifyChange("updating"),[2]}})})};m.prototype.updateClippingExtent=function(a){this.clippingExtent=a;if(!this.controller)return!1;switch(this.controller.type){case "stream":return!1;case "feature-tile-3d":return this.controller.extent=a,!0}};m.prototype.validateGeometryType=function(){var a=this.layer;switch(a.geometryType){case "multipatch":case "multipoint":return c.reject(new g("featurelayerview3d:unsupported-geometry-type","Unsupported geometry type ${geometryType}",{geometryType:a.geometryType}))}};
l([a.property()],m.prototype,"loadedGraphics",void 0);l([a.property({dependsOn:["graphics3d.suspended"]})],m.prototype,"suspended",void 0);l([a.property({dependsOn:["graphics3d.updating","controller.updating","overlayUpdating"]})],m.prototype,"updating",void 0);l([a.property()],m.prototype,"controller",void 0);l([a.property()],m.prototype,"graphics3d",void 0);l([a.property({readOnly:!0})],m.prototype,"asyncGraphicsUpdates",void 0);l([a.property({readOnly:!0})],m.prototype,"suspendResumeExtentMode",
void 0);l([a.property({type:Boolean})],m.prototype,"slicePlaneEnabled",void 0);l([a.property({aliasOf:"graphics3d.graphicsCore.hasDraped"})],m.prototype,"hasDraped",void 0);l([a.property({readOnly:!0,type:Boolean})],m.prototype,"supportsDraping",void 0);l([a.property({type:Boolean})],m.prototype,"overlayUpdating",void 0);l([a.property()],m.prototype,"drawingOrder",null);return m=l([a.subclass("esri.views.3d.layers.FeatureLikeLayerView3D")],m)}(a.declared(t))})},"esri/renderers/support/renderingInfoUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/maybe ../visualVariables/support/visualVariableUtils ../../support/arcadeUtils".split(" "),
function(r,d,n,l,k,b){function h(b,c){if(!b||b.symbol)return null;c=c.renderer;return b&&c&&c.getObservationRenderer?c.getObservationRenderer(b):c}function g(d,c){if(l.isSome(d.symbol))return d.symbol;var e=h(d,c);return e&&e.getSymbol(d,n({},c,{arcadeUtils:b}))}Object.defineProperty(d,"__esModule",{value:!0});d.getRenderer=h;d.getSymbol=g;d.getRenderingInfo=function(b,c){var d=h(b,c),a=g(b,c);if(!a)return null;a={renderer:d,symbol:a};if(!(d&&"visualVariables"in d&&d.visualVariables))return a;var e=
["proportional","proportional","proportional"],l=0;for(b=k.getVisualVariableValues(d,b,c);l<b.length;l++){d=b[l];c=d.variable;var n=d.value;"color"===c.type?a.color=n.toRgba():"size"===c.type?"outline"===c.target?a.outlineSize=n:(d=c.axis,c=c.useSymbolValue?"symbolValue":n,"width"===d?e[0]=c:"depth"===d?e[1]=c:"height"===d?e[2]=c:e[0]="width-and-depth"===d?e[1]=c:e[1]=e[2]=c):"opacity"===c.type?a.opacity=n:"rotation"===c.type&&"tilt"===c.axis?a.tilt=n:"rotation"===c.type&&"roll"===c.axis?a.roll=n:
"rotation"===c.type&&(a.heading=n)}if(isFinite(e[0])||isFinite(e[1])||isFinite(e[2]))a.size=e;return a}})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define("require exports ../../../Color ../../../Graphic ../../../core/Logger ../../support/utils ./sizeVariableUtils ../../../support/arcadeUtils".split(" "),function(r,d,n,l,k,b,h,g){function e(a,b,c){if(a="visualVariables"in a&&a.visualVariables?a.visualVariables.filter(function(a){return"color"===a.type})[0]:a)if("esri.renderers.visualVariables.ColorVariable"!==
a.declaredClass)x.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");else{var d="number"===typeof b,e=d?null:b,f=e&&e.attributes,h=d?b:null,k=a.field,l=a.cache;b=l.ipData;var m=l.hasExpression,l=a.cache.compiledFunc;if(!k&&!m)return(c=a.stops)&&c[0]&&c[0].color;"number"!==typeof h&&(m?(h=g.getViewInfo(c&&{viewingMode:c.viewingMode,scale:c.scale,spatialReference:c.spatialReference}),e=g.createExecContext(e,h),l||(h=g.createSyntaxTree(a.valueExpression),
l=g.createFunction(h),a.cache.compiledFunc=l),h=g.executeFunction(l,e)):f&&(h=f[k]));e=a.normalizationField;f=f?parseFloat(f[e]):void 0;if(null!=h&&(!e||d||!isNaN(f)&&0!==f)&&(isNaN(f)||d||(h/=f),d=y(h,b)))return f=d[0],b=d[1],c=f===b?a.stops[f].color:n.blendColors(a.stops[f].color,a.stops[b].color,d[2],c&&c.color),new n(c)}}function c(a,b,c){if(a="visualVariables"in a&&a.visualVariables?a.visualVariables.filter(function(a){return"opacity"===a.type})[0]:a)if("esri.renderers.visualVariables.OpacityVariable"!==
a.declaredClass)x.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");else{var d="number"===typeof b,e=d?null:b,f=e&&e.attributes,h=d?b:null,k=a.field,l=a.cache;b=l.ipData;var m=l.hasExpression,l=a.cache.compiledFunc;if(!k&&!m)return(a=a.stops)&&a[0]&&a[0].opacity;"number"!==typeof h&&(m?(c=g.getViewInfo(c&&{viewingMode:c.viewingMode,scale:c.scale,spatialReference:c.spatialReference}),c=g.createExecContext(e,c),l||(e=g.createSyntaxTree(a.valueExpression),
l=g.createFunction(e),a.cache.compiledFunc=l),h=g.executeFunction(l,c)):f&&(h=f[k]));c=a.normalizationField;f=f?parseFloat(f[c]):void 0;if(null!=h&&(!c||d||!isNaN(f)&&0!==f)&&(isNaN(f)||d||(h/=f),d=y(h,b))){b=d[0];f=d[1];if(b===f)return a.stops[b].opacity;b=a.stops[b].opacity;return b+(a.stops[f].opacity-b)*d[2]}}}function f(a,b,c){if(a="visualVariables"in a&&a.visualVariables?a.visualVariables.filter(function(a){return"rotation"===a.type})[0]:a)if("esri.renderers.visualVariables.RotationVariable"!==
a.declaredClass)x.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");else{var d=a.axis||"heading",e="heading"===d&&"arithmetic"===a.rotationType?90:0,d="heading"===d&&"arithmetic"===a.rotationType?-1:1,f="number"===typeof b?null:b,h=f&&f.attributes,k=a.field,l=a.cache.hasExpression;b=a.cache.compiledFunc;var m=0;if(!k&&!l)return m;l?(c=g.getViewInfo(c&&{viewingMode:c.viewingMode,scale:c.scale,spatialReference:c.spatialReference}),c=g.createExecContext(f,
c),b||(b=g.createSyntaxTree(a.valueExpression),b=g.createFunction(b),a.cache.compiledFunc=b),m=g.executeFunction(b,c)):h&&(m=h[k]||0);return m="number"!==typeof m||isNaN(m)?null:e+d*m}}function a(a,b,c){var d="number"===typeof b,e=d?null:b,f=e&&e.attributes,k=d?b:null;b=a.cache.compiledFunc;if(a.cache.isScaleDriven)e=c&&c.scale,c=c&&c.view,null==e||c&&"3d"===c.type?(e=c=null,(e=a.stops)?(c=e[0].value,e=e[e.length-1].value):(c=a.minDataValue||0,e=a.maxDataValue||0),c=(c+e)/2):c=e,k=c;else if(!d)switch(a.inputValueType){case "expression":c=
g.getViewInfo(c&&{viewingMode:c.viewingMode,scale:c.scale,spatialReference:c.spatialReference});c=g.createExecContext(e,c);b||(e=g.createSyntaxTree(a.valueExpression),b=g.createFunction(e),a.cache.compiledFunc=b);k=g.executeFunction(b,c);break;case "field":f&&(k=f[a.field]);break;case "unknown":k=null}if(!h.isValidNumber(k))return null;if(d||!a.normalizationField)return k;a=f?parseFloat(f[a.normalizationField]):null;return h.isValidNumber(a)&&0!==a?k/a:null}function p(b,c,d){if(b="visualVariables"in
b&&b.visualVariables?b.visualVariables.filter(function(a){return"size"===a.type})[0]:b)if("esri.renderers.visualVariables.SizeVariable"!==b.declaredClass)x.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");else{var e=a(b,c,d);c=t(e,b,c,d,b.cache.ipData);return null===c||void 0===c||isNaN(c)?0:c}}function q(a,b,c){return null==a?null:h.isSizeVariable(a)?p(a,b,c):h.isValidNumber(a)?a:null}function v(a,b,c){return h.isValidNumber(c)&&a>c?c:h.isValidNumber(b)&&
a<b?b:a}function t(a,c,d,e,f){switch(c.transformationType){case "additive":return e=q(c.minSize,d,e),a+(e||c.minDataValue);case "constant":return a=(a=c.stops)&&a.length&&a[0].size,null==a&&(a=c.minSize),q(a,d,e);case "clamped-linear":f=(a-c.minDataValue)/(c.maxDataValue-c.minDataValue);var g=q(c.minSize,d,e);d=q(c.maxSize,d,e);e=e&&e.shape;a<=c.minDataValue?c=g:a>=c.maxDataValue?c=d:"area"===c.scaleBy&&e?(e=(c="circle"===e)?m*Math.pow(g/2,2):g*g,e+=f*((c?m*Math.pow(d/2,2):d*d)-e),c=c?2*Math.sqrt(e/
m):Math.sqrt(e)):c=g+f*(d-g);return c;case "proportional":return f=e&&e.shape,a/=c.minDataValue,g=q(c.minSize,d,e),c=q(c.maxSize,d,e),e=null,e="circle"===f?2*Math.sqrt(a*Math.pow(g/2,2)):"square"===f||"diamond"===f||"image"===f?Math.sqrt(a*Math.pow(g,2)):a*g,v(e,g,c);case "stops":return f=y(a,f),g=f[0],a=f[1],f=f[2],g===a?c=q(c.stops[g].size,d,e):(g=q(c.stops[g].size,d,e),c=q(c.stops[a].size,d,e),c=g+(c-g)*f),c;case "real-world-size":return f=(e&&e.resolution?e.resolution:1)*b.meterIn[c.valueUnit],
g=q(c.minSize,d,e),e=q(c.maxSize,d,e),c=c.valueRepresentation,d=null,d="area"===c?2*Math.sqrt(a/m)/f:"radius"===c||"distance"===c?2*a/f:a/f,v(d,g,e);case "identity":return a;case "unknown":return null}}function y(a,b){if(b){var c=0,d=b.length-1;b.some(function(b,e){if(a<b)return d=e,!0;c=e;return!1});return[c,d,(a-b[c])/(b[d]-b[c])]}}Object.defineProperty(d,"__esModule",{value:!0});var x=k.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),w=new l,m=Math.PI;d.getColor=e;d.getOpacity=
c;d.getRotationAngle=f;d.getSize=p;d.getSizeFromNumberOrVariable=q;d.getSizeForValue=t;d.getSizeRangeAtScale=function(a,b,c){var d=c&&"3d"===c.type;if(!(a.cache.isScaleDriven&&d||b))return null;c={scale:b,view:c};b=q(a.minSize,w,c);a=q(a.maxSize,w,c);if(null!=b||null!=a)return b>a&&(c=a,a=b,b=c),{minSize:b,maxSize:a}};d.getVisualVariableValues=function(a,b,d){if(a.visualVariables){var g=[],h=[],k=[],l=[],m=[],n=0;for(a=a.visualVariables;n<a.length;n++){var u=a[n];switch(u.type){case "color":h.push(u);
break;case "opacity":k.push(u);break;case "rotation":m.push(u);break;case "size":l.push(u)}}h.forEach(function(a){var c=e(a,b,d);g.push({variable:a,value:c})});k.forEach(function(a){var e=c(a,b,d);g.push({variable:a,value:e})});m.forEach(function(a){var c=f(a,b,d);g.push({variable:a,value:c})});l.forEach(function(a){var c=p(a,b,d);g.push({variable:a,value:c})});return g.filter(function(a){return null!=a.value})}}})},"esri/views/3d/layers/graphics/Graphics3DFeatureLikeLayerView":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Graphic ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/compilerUtils ../../../../core/Handles ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/webMercatorUtils ../../../../renderers/support/diffUtils ../../../../tasks/support/Query ./constants ./Graphics3DCore ./Graphics3DElevationAlignment ./Graphics3DFilterVisibility ./Graphics3DFrustumVisibility ./Graphics3DHighlights ./Graphics3DScaleVisibility ./graphicUtils ../support/attributeUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F){var E={remove:function(){},pause:function(){},resume:function(){}};return function(d){function g(a){a=d.call(this)||this;a._handles=new f;a.highlights=new z;a.suspendResumeExtentMode="computed";a.dataExtent=null;a.suspendResumeExtent=null;return a}n(g,d);Object.defineProperty(g.prototype,"suspended",{get:function(){return this.scaleVisibility&&this.scaleVisibility.suspended||this.frustumVisibility&&this.frustumVisibility.suspended},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){return!!(this.graphicsCore&&this.graphicsCore.updating||this.frustumVisibility&&this.frustumVisibility.updating)},enumerable:!0,configurable:!0});g.prototype.normalizeCtorArgs=function(a){var b=a.frustumVisibilityEnabled?new u:null,c=a.scaleVisibilityEnabled?new B:null,d=(a.filterVisibilityEnabled||a.timeExtentVisibilityEnabled)&&"multipatch"!==a.layer.geometryType?new m.Graphics3DFilterVisibility:null,e=a.elevationAlignmentEnabled?
new w:null;return{graphicsCore:new x({owner:a.owner,layer:a.layer,asyncUpdates:a.asyncGraphicsUpdates,elevationFeatureExpressionEnabled:a.elevationFeatureExpressionEnabled,graphicSymbolSupported:!1,hasZ:a.owner.hasZ,hasM:a.owner.hasM}),frustumVisibility:b,scaleVisibility:c,filterVisibility:d,elevationAlignment:e,updateClippingExtent:a.updateClippingExtent,suspendResumeExtentMode:a.suspendResumeExtentMode,dataExtent:a.dataExtent}};g.prototype.initialize=function(){var a=this;this.scaleVisibility&&
this._handles.add(this.layer.watch(["minScale","maxScale"],function(){return a.scaleVisibility.layerMinMaxScaleChangeHandler()}));this.filterVisibility&&this._handles.add(this.owner.watch(["filter","timeExtent"],function(){return a.filterVisibility.filterChanged()}));this.elevationAlignment&&this._handles.add(this.layer.watch("elevationInfo",function(b,c){v.diff(b,c)&&a.graphicsCore.elevationInfoChange()}));this._handles.add(this.layer.watch("labelsVisible",function(){return a.graphicsCore.updateVisibilityInfo()}));
this._handles.add(this.layer.watch("labelingInfo",function(b,c){v.diff(b,c)&&a.graphicsCore.updateLabelingInfo()}))};g.prototype.setup=function(){return b(this,void 0,void 0,function(){var a,b,c,d,f=this;return k(this,function(g){switch(g.label){case 0:return this.frustumVisibility&&this.frustumVisibility.setup(this.owner),a=this.owner,b=this.owner.view.basemapTerrain,c=function(a,b,c){return f.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(a,b,c)},this.scaleVisibility&&this.scaleVisibility.setup(a,
this.layer,c,this.graphicsCore,b),this.filterVisibility&&("filter"in a||"timeExtent"in a)&&this.filterVisibility.setup(a,this.graphicsCore),this.elevationAlignment&&(d=a.view.elevationProvider,this.elevationAlignment.setup(a,c,this.graphicsCore,d)),this.highlights&&this.highlights.setup(this.graphicsCore),this._set("labeling",this.owner.view.labeler.addGraphicsOwner(this.graphicsCore,this.scaleVisibility)),this._set("deconfliction",a.view.deconflictor.addGraphicsOwner(this.graphicsCore)),[4,e.result(this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,
scaleVisibility:this.scaleVisibility,filterVisibility:this.filterVisibility,deconflictor:this.deconfliction,labeler:this.labeling,highlights:this.highlights}))];case 1:return g.sent(),this._handles.add([this.layer.watch("renderer",function(a){return f.graphicsCore.rendererChange(a)}),a.watch("fullOpacity",function(){return f.graphicsCore.opacityChange()})]),this.setupSuspendResumeExtent(),this.updateClippingExtent&&(this._handles.add(a.view.watch("clippingArea",function(){return f._updateClippingExtent()})),
this._updateClippingExtent()),this.graphicsCore.startCreateGraphics(),this.graphicsCore.labelsEnabled?[4,e.result(this.graphicsCore.updateLabelingInfo())]:[3,3];case 2:g.sent(),g.label=3;case 3:return[2]}})})};g.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null);for(var a=0,b="frustumVisibility scaleVisibility filterVisibility elevationAlignment highlights graphicsCore".split(" ");a<b.length;a++){var c=b[a],d=this[c];d&&(d.destroy(),this._set(c,null))}this._set("layer",
null);this._set("owner",null)};g.prototype.highlight=function(a,b,c){var d=this;if(a instanceof t){b=this.highlights.acquireSet(b,c);var e=b.set,f=b.handle;this.owner.queryObjectIds(a).then(function(a){return d.highlights.setObjectIds(e,a)});return f}if("number"===typeof a||a instanceof h)return this.highlight([a],b,c);"toArray"in a&&(a=a.toArray());if(Array.isArray(a)&&0<a.length){if(a[0]instanceof h)if(f=a,c&&f[0].attributes&&null!==F.attributeLookup(f[0].attributes,c))a=f.map(function(a){return F.attributeLookup(a.attributes,
c)});else return a=f.map(function(a){return a.uid}),f=this.highlights.acquireSet(b,null),b=f.set,f=f.handle,this.highlights.setUids(b,a),f;if("number"===typeof a[0])return f=this.highlights.acquireSet(b,c),b=f.set,f=f.handle,this.highlights.setObjectIds(b,a),f}return E};g.prototype._updateClippingExtent=function(){var a=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(a,this.owner.view.spatialReference)&&(this.updateClippingExtent(a)||this.graphicsCore.recreateAllGraphics())};g.prototype.setupSuspendResumeExtent=
function(){var b=this;(this.frustumVisibility||this.scaleVisibility)&&this._handles.add(a.init(this,"suspendResumeExtentMode",function(){b._handles.remove("suspendResumeExtentMode");switch(b.suspendResumeExtentMode){case "computed":b._handles.add(a.init(b.graphicsCore,"computedExtent",function(a){return b.updateSuspendResumeExtent(a)}),"suspendResumeExtentMode");break;case "data":b._handles.add(a.init(b,"dataExtent",function(a){return b.updateSuspendResumeExtent(a)}),"suspendResumeExtentMode");break;
default:c.neverReached(b.suspendResumeExtentMode)}}))};g.prototype.updateSuspendResumeExtent=function(a){a?this.suspendResumeExtentChanged(this.extentToSuspendResumeRect(a,this.suspendResumeExtent)):this.suspendResumeExtentChanged(null)};g.prototype.extentToSuspendResumeRect=function(a,b){var c=this.owner.view.spatialReference;if(!a.spatialReference.equals(c)){if(!q.canProject(a,c))return;a=q.project(a,c)}return C.enlargeExtent(a,b,y.SUSPEND_RESUME_EXTENT_OPTIMISM)};g.prototype.suspendResumeExtentChanged=
function(a){this.frustumVisibility&&this.frustumVisibility.setExtent(a);this.scaleVisibility&&this.scaleVisibility.setExtent(a)};l([p.property({aliasOf:"graphicsCore.layer"})],g.prototype,"layer",void 0);l([p.property({aliasOf:"graphicsCore.owner"})],g.prototype,"owner",void 0);l([p.property({constructOnly:!0})],g.prototype,"updateClippingExtent",void 0);l([p.property({constructOnly:!0})],g.prototype,"graphicsCore",void 0);l([p.property({constructOnly:!0})],g.prototype,"scaleVisibility",void 0);l([p.property({constructOnly:!0})],
g.prototype,"filterVisibility",void 0);l([p.property({constructOnly:!0})],g.prototype,"elevationAlignment",void 0);l([p.property({constructOnly:!0})],g.prototype,"frustumVisibility",void 0);l([p.property({readOnly:!0})],g.prototype,"deconfliction",void 0);l([p.property({readOnly:!0})],g.prototype,"labeling",void 0);l([p.property({readOnly:!0})],g.prototype,"highlights",void 0);l([p.property()],g.prototype,"suspendResumeExtentMode",void 0);l([p.property()],g.prototype,"dataExtent",void 0);l([p.property({readOnly:!0,
dependsOn:["scaleVisibility.suspended","frustumVisibility.suspended"]})],g.prototype,"suspended",null);l([p.property({readOnly:!0,dependsOn:["graphicsCore.updating","frustumVisibility.updating"]})],g.prototype,"updating",null);return g=l([p.subclass("esri.views.3d.layers.graphics.Graphics3DFeatureLikeLayerView")],g)}(p.declared(g))})},"esri/views/3d/layers/graphics/Graphics3DCore":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../geometry ../../../../renderers ../../../../symbols ../../../../core/Accessor ../../../../core/arrayUtils ../../../../core/compilerUtils ../../../../core/Error ../../../../core/Handles ../../../../core/iteratorUtils ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../layers/Layer ../../../../layers/graphics/dehydratedFeatures ../../../../renderers/support/diffUtils ../../../../renderers/support/rendererConversion ../../../../support/arcadeUtils ../../../../symbols/support/symbolConversion ./ElevationQuery ./featureExpressionInfoUtils ./Graphics3DFeatureStore ./Graphics3DGraphic ./Graphics3DSymbolCreationContext ./Graphics3DSymbolFactory ./Graphics3DWebStyleSymbol ./graphicUtils ./SpatialIndex2D ./symbolComplexity ../../support/projectionUtils ../../support/PropertiesPool ../../webgl-engine/Stage ../../webgl-engine/lib/GridLocalOriginFactory ../../webgl-engine/lib/Layer ../../../support/index".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q,J,R,U,X,ca,G,Y,la,ja,na){var pa=new h.Point,ta=C.vec3f64.create(),aa=F.create(),ga=t.getLogger("esri.views.3d.layers.graphics.Graphics3DCore");r=function(c){function d(a){a=c.call(this)||this;a.propertiesPool=new G.PropertiesPool({computedExtent:h.Extent},a);a.computedExtent=null;a.currentRenderer=null;a.rendererHasGeometryOperations=!1;a.symbolCreationContext=new Z.Graphics3DSymbolCreationContext;a.graphics3DGraphics=
new Map;a.stageLayer=null;a.stage=null;a.graphicsDrapedUids=new Set;a.graphicsBySymbol=new Map;a.symbolConversionCache=new Map;a.symbols=new Map;a.graphicsWithoutSymbol={};a.graphicsWaitingForSymbol=new Set;a.handles=new q;a.suspendSymbolCleanup=!1;a._spatialReference=null;a.elevationAlignment=null;a.scaleVisibility=null;a.filterVisibility=null;a._spatialIndex=null;a.featureStore=null;a.deconflictor=null;a.labeler=null;a.highlights=null;a.viewElevationProvider=null;a.sharedSymbolResourcesOwnerHandle=
null;a.whenGraphics3DGraphicRequests={};a.pendingUpdates=new Map;a.pendingAdds=0;a.pendingRemoves=0;a.pendingUpdatesPool=new m({allocator:function(a){return a||{add:null,remove:null}},deallocator:function(a){a.add=null;a.remove=null;return a}});a.symbolWarningLogged=!1;a.geometryWarningLogged=!1;a.objectIdInvisibleSet=new Set;a._whenSymbolRemoved=new m;a.asyncUpdates=!1;a.elevationFeatureExpressionEnabled=!0;a.owner=null;a.layer=null;a.hasDraped=!1;a.graphicSymbolSupported=!0;a.hasZ=null;a.hasM=null;
a._usedMemory=0;a.numberOfGraphics=0;a._visible=void 0;a._startCreateGraphics=!1;a.maxPendingUpdates=0;return a}n(d,c);t=d;Object.defineProperty(d.prototype,"spatialIndex",{get:function(){this._spatialIndex||(this._spatialIndex=new U.default({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,spatialReference:this._spatialReference,hasZ:this.hasZ,hasM:this.hasM}),sa.clear(),this.graphics3DGraphics.forEach(function(a){sa.push(a);return!1}),this._spatialIndex.addMany(sa.data,sa.length));
return this._spatialIndex},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return!!(0<this.graphicsWaitingForSymbol.size||this.needsUpdate()||this.elevationAlignment&&this.elevationAlignment.updating||this.scaleVisibility&&this.scaleVisibility.updating||this.filterVisibility&&this.filterVisibility.updating)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updatingRemaining",{get:function(){return this.updating?this.pendingUpdates.size:
0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updatingTotal",{get:function(){return this.updating?this.maxPendingUpdates:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"displayFeatureLimit",{get:function(){var a=this.owner&&this.owner.view&&this.owner.view.qualitySettings,b=a?a.graphics3D.minTotalNumberOfFeatures:0,c=a?a.graphics3D.maxTotalNumberOfFeatures:0,a=a?a.graphics3D.maxTotalNumberOfPrimitives:0,d=this.maxSymbolComplexity,e=Math.max(b,Math.min(c,
Math.ceil(a/Math.max(1,d?d.primitivesPerFeature:1)))),f=this._get("displayFeatureLimit");return f&&f.minimumTotalNumberOfFeatures===b&&f.maximumTotalNumberOfFeatures===c&&f.maximumTotalNumberOfPrimitives===a&&f.maximumSymbolComplexity===d&&f.maximumNumberOfFeatures===e?f:{minimumTotalNumberOfFeatures:b,maximumTotalNumberOfFeatures:c,maximumTotalNumberOfPrimitives:a,maximumSymbolComplexity:d,maximumNumberOfFeatures:e}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maxSymbolComplexity",
{get:function(){for(var a=null,b=this.symbolComplexities,c=this._get("maxSymbolComplexity"),d=!1,e=0;e<b.length;e++){var f=b[e];if(!a||0===a.primitivesPerCoordinate&&f.primitivesPerFeature>a.primitivesPerFeature||0!==a.primitivesPerCoordinate&&f.primitivesPerCoordinate>a.primitivesPerCoordinate)a=f;d=d||f.estimated}return!a||d&&c&&(c.primitivesPerFeature>=a.primitivesPerFeature||c.primitivesPerCoordinate>=a.primitivesPerCoordinate)||c&&c.primitivesPerFeature===a.primitivesPerFeature&&c.primitivesPerCoordinate===
a.primitivesPerCoordinate?c:a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"spatialReference",{get:function(){return this._spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"usedMemory",{get:function(){return this._usedMemory},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"usedMemoryPerGraphic",{get:function(){return this._usedMemory&&this.numberOfGraphics?this._usedMemory/this.numberOfGraphics:this.maxSymbolComplexity?this.maxSymbolComplexity.memory.bytesPerFeature:
0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"unprocessedMemoryEstimate",{get:function(){return Math.max(0,(this.pendingAdds-this.pendingRemoves)*this.usedMemoryPerGraphic)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"symbolComplexities",{get:function(){return this.currentRenderer?this.getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this.getSymbolComplexitiesUsed()},enumerable:!0,configurable:!0});d.prototype.getConvertedSymbol=function(a){if("web-style"===
a.type)return a.clone();var b=this.symbolConversionCache.get(a.id);if(void 0!==b)return b;var b=H.to3D(a,!0,!1,this.hasLabelingContext(a)),c=b.symbol||null;c||b.error&&ga.error(b.error.message);this.symbolConversionCache.set(a.id,c);return c};d.prototype.getSymbolComplexitiesUsedOrRenderer=function(a){a=a.getSymbols();if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this.symbols.get(d.id);e?b.push(e.complexity):(d=this.getConvertedSymbol(d))&&b.push(X.defaultSymbolComplexity(d))}return b};
d.prototype.getSymbolComplexitiesUsed=function(){var a=[];this.symbols.forEach(function(b){b&&a.push(b.complexity)});return a};d.prototype.initialize=function(){var a=this;this._spatialReference=this.owner.view.spatialReference;this._set("featureStore",new V.default({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,hasZ:this.hasZ,hasM:this.hasM,spatialReference:this._spatialReference,getSpatialIndex:function(){return a.spatialIndex},forAllGraphics:function(b){return a.graphics3DGraphics.forEach(b)}}))};
d.prototype.setup=function(a){return b(this,void 0,void 0,function(){var b,c,d,e,f=this;return k(this,function(g){this._set("elevationAlignment",a.elevationAlignment);this._set("scaleVisibility",a.scaleVisibility);this._set("filterVisibility",a.filterVisibility);this._set("deconflictor",a.deconflictor);this._set("labeler",a.labeler);this._set("highlights",a.highlights);b=this.owner.view;this.viewElevationProvider=new S.ViewElevationProvider(this._spatialReference,b);this.initializeStage(b,this.layer.uid);
this.symbolCreationContext.sharedResources=b.sharedSymbolResources;this.sharedSymbolResourcesOwnerHandle=b.sharedSymbolResources.addGraphicsOwner(this.owner);this.symbolCreationContext.renderer=this.currentRenderer;this.symbolCreationContext.stage=this.stage;this.symbolCreationContext.streamDataRequester=b.sharedSymbolResources.streamDataRequester;this.symbolCreationContext.renderSpatialReference=b.renderSpatialReference;this.symbolCreationContext.renderCoordsHelper=b.renderCoordsHelper;this.symbolCreationContext.layer=
this.layer;this.symbolCreationContext.layerView=this.owner;this.symbolCreationContext.layerOrder=0;this.symbolCreationContext.localOriginFactory=new la;this.symbolCreationContext.elevationProvider=b.elevationProvider;c=P.extractExpressionInfo(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=P.createContext(c,this._spatialReference,ga);this.symbolCreationContext.screenSizePerspectiveEnabled=b.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled;
this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled;this.handles.add(this.owner.watch("suspended",function(){return f.updateLayerVisibility()}));d="layer"in this.owner?["layer.screenSizePerspectiveEnabled,view.screenSizePerspectiveEnabled"]:"view.screenSizePerspectiveEnabled";this.handles.add([this.owner.watch(d,function(){var a=b.screenSizePerspectiveEnabled&&f.layer.screenSizePerspectiveEnabled;a!==f.symbolCreationContext.screenSizePerspectiveEnabled&&(f.symbolCreationContext.screenSizePerspectiveEnabled=
a,f.recreateAllGraphics())}),z.init(this,"asyncUpdates",function(a){return f.modeChange(a)},!0),this.owner.watch("slicePlaneEnabled",function(a){return f.slicePlaneEnabledChange(!!a)}),this.owner.view.watch("pixelRatio",function(a){return f.pixelRatioChange(a)}),z.when(b.basemapTerrain,"tilingScheme",function(a){a.spatialReference.equals(f.symbolCreationContext.overlaySR)||(f.symbolCreationContext.overlaySR=b.basemapTerrain.spatialReference);f.handles.has("loaded-graphics")?f.recreateAllGraphics():
f.handles.add(z.on(f.owner,"loadedGraphics","change",function(a){return f.graphicsCollectionChanged(a)},function(){return f.recreateAllGraphics()}),"loaded-graphics")}),b.resourceController.scheduler.registerTask(3,function(a){return f.update(a)},function(){return f.needsUpdate()})]);this.owner.layer&&"featureReduction"in this.owner.layer&&this.handles.add(this.owner.watch("layer.featureReduction",function(){return f.deconflictor.featureReductionChange()}));e=this.rendererChange(this.layer.renderer);
this.notifyChange("maxSymbolComplexity");return[2,e]})})};d.prototype.destroy=function(){this.owner.view.deconflictor.removeGraphicsOwner(this);this.owner.view.labeler.removeGraphicsOwner(this);this.clear();this.stage&&(this.stage.removeFromViewContent([this.stageLayer.id]),this.stage.remove(Y.ModelContentType.LAYER,this.stageLayer.id),this.stage=this.stageLayer=null);this.handles.destroy();this._spatialReference=this.handles=null;this._set("owner",null);for(var a in this.whenGraphics3DGraphicRequests)this.whenGraphics3DGraphicRequests[a].reject(new p("graphic:layer-destroyed",
"Layer has been destroyed"));this.whenGraphics3DGraphicRequests=null;this.sharedSymbolResourcesOwnerHandle&&(this.sharedSymbolResourcesOwnerHandle.remove(),this.sharedSymbolResourcesOwnerHandle=null);this.propertiesPool&&(this.propertiesPool.destroy(),this.propertiesPool=null);this.pendingUpdatesPool=null;this.symbolConversionCache.clear();this.objectIdInvisibleSet.clear();this._spatialIndex&&(this._spatialIndex.destroy(),this._spatialIndex=null);this.featureStore&&(this.featureStore.destroy(),this._set("featureStore",
null))};d.prototype.clear=function(){this.graphics3DGraphics.forEach(function(a){return a.destroy()});this._spatialIndex&&this._spatialIndex.clear();this.graphics3DGraphics.clear();this._usedMemory=this.numberOfGraphics=0;this.updateLayerVisibility();this.symbols.forEach(function(a){a&&a.destroy()});this.symbols.clear();this.graphicsBySymbol.clear();this.graphicsWithoutSymbol={};this.graphicsWaitingForSymbol.clear();this.pendingUpdates.clear();this.pendingUpdatesPool.clear();this.pendingRemoves=this.pendingAdds=
this.maxPendingUpdates=0;this._set("hasDraped",!1);this.notifyChange("updating");this.notifyChange("updatingTotal");this.notifyChange("updatingRemaining");this.featureStore.events.emit("changed")};d.prototype.initializeStage=function(a,b){this.stage=a._stage;this.stageLayer=new ja(b,{isPickable:!this.owner.suspended},b);this.stage.add(Y.ModelContentType.LAYER,this.stageLayer);this.stage.addToViewContent([this.stageLayer.id])};d.prototype.setDrawingOrder=function(a){this.symbolCreationContext.layerOrder=
a;var b=new Set;this.symbols.forEach(function(c){c&&c.setDrawOrder(a,b)});0<b.size&&this.stage.renderView.getDrapedRenderer().updateRenderOrder(b)};d.prototype.updateLayerVisibility=function(){var a=this.numberOfGraphics>this.displayFeatureLimit.maximumNumberOfFeatures*Ba,a=!this.owner.suspended&&!a;a!==this._visible&&((this._visible=a)?(this.stageLayer.isPickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.isPickable=!1,this.hideAllGraphics()),this.updateStageLayerVisibility())};d.prototype.updateStageLayerVisibility=
function(){this.stageLayer.isVisible=this._visible&&(null==this.layer.opacity||0<this.layer.opacity)};d.prototype.getGraphics3DGraphicById=function(a){return this.graphics3DGraphics.get(a)};d.prototype._getGraphicObjectID=function(a,b){void 0===b&&(b=this.owner.layer&&this.owner.layer.objectIdField);return L.getObjectId(a,b)};Object.defineProperty(d.prototype,"graphics3DGraphicsByObjectID",{get:function(){var a=this,b=this.owner.layer&&this.owner.layer.objectIdField;if(!b)return null;var c=new Map;
this.graphics3DGraphics.forEach(function(d){if(d){var e=a._getGraphicObjectID(d.graphic,b);x.isSome(e)&&c.set(e,d)}});return c},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"labelsEnabled",{get:function(){return!(!this.labeler||!this.labeler.layerLabelsEnabled())},enumerable:!0,configurable:!0});d.prototype.updateLabelingInfo=function(a){return b(this,void 0,void 0,function(){var b,c;return k(this,function(d){switch(d.label){case 0:return b=this.deconflictor&&this.deconflictor.labelingInfoChange(a),
c=this.labeler&&this.labeler.labelingInfoChange(a),[4,u.eachAlways([b,c])];case 1:return d.sent(),[2]}})})};d.prototype.updateVisibilityInfo=function(){this.deconflictor&&this.deconflictor.labelingInfoChange();this.labeler&&this.labeler.visibilityInfoChange()};Object.defineProperty(d.prototype,"symbolUpdateType",{get:function(){var a=this;if(0<this.pendingUpdates.size)return"unknown";var b=0,c=0;return v.everyMap(this.symbols,function(d,e){if(d){d=d.getFastUpdateStatus();if(0<d.loading)return!1;a.graphicsBySymbol.has(e)&&
(c+=d.fast,b+=d.slow)}})?0<=c&&0===b?"fast":0<=b&&0===c?"slow":"mixed":"unknown"},enumerable:!0,configurable:!0});d.prototype.needsUpdate=function(){return 0<this.pendingUpdates.size};d.prototype.update=function(a){this._applyPendingUpdates(a);this.needsUpdate()||this.notifyChange("updating")};d.prototype.setObjectIdVisibility=function(a,b){b?this.objectIdInvisibleSet.delete(a):this.objectIdInvisibleSet.add(a);a=this._findGraphics3DGraphicByObjectId(a);x.isSome(a)&&this._updateUserVisibility(a)};
d.prototype._findGraphics3DGraphicByObjectId=function(a){var b=this,c;v.everyMap(this.graphics3DGraphics,function(d){return b._getGraphicObjectID(d.graphic)===a?(c=d,!1):!0});return c};d.prototype._updateUserVisibility=function(a){if(x.isNone(a))return!1;var b=a.graphic,c=this._getGraphicObjectID(b),b=b.visible&&!this.owner.suspended&&(x.isNone(c)||!this.objectIdInvisibleSet.has(c));return a.setVisibilityFlag(0,b,0)};d.prototype.whenGraphics3DGraphic=function(a){var b=this.graphics3DGraphics.get(a.uid);
if(b)return u.resolve(b);if(b=this.whenGraphics3DGraphicRequests[a.uid])return b.promise;b=u.createDeferred();this.whenGraphics3DGraphicRequests[a.uid]=b;return b.promise};d.prototype.boundsForGraphics3DGraphic=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,f,g,h,l,m,p,n;return k(this,function(k){switch(k.label){case 0:return b=this._spatialReference,d=this.owner.view.renderSpatialReference,e=this.owner.view.basemapTerrain.spatialReference,f=function(a,c,e){return ca.bufferToBuffer(a,
d,c,a,b,c,e)},g=function(a,c,d){return ca.bufferToBuffer(a,e,c,a,b,c,d)},h=this.viewElevationProvider?{service:this.viewElevationProvider,useViewElevation:x.isSome(c)&&c.useViewElevation,minDemResolution:x.isSome(c)&&c.minDemResolution,minDemResolutionForPoints:this.owner.view.resolution}:null,[4,a.getProjectedBoundingBox(f,g,h,x.get(c,"signal"))];case 1:l=k.sent();if(!l)return[2,null];m=l.boundingBox;l.requiresDrapedElevation&&(p=this.symbolCreationContext.elevationProvider)&&(F.center(m,ta),pa.x=
ta[0],pa.y=ta[1],pa.z=void 0,pa.spatialReference=b,n=p.getElevation(pa)||0,m[2]=Math.min(m[2],n),m[5]=Math.max(m[5],n));return[2,{boundingBox:m,screenSpaceObjects:l.screenSpaceObjects}]}})})};d.prototype.whenGraphicBounds=function(a,b){var c=this;return z.whenOnce(this.owner,"loadedGraphics").then(function(){var b=c.owner.layer&&c.owner.layer.objectIdField,d=c.owner.loadedGraphics.find(function(c){return c===a?!0:b&&c.attributes&&a.attributes&&c.attributes[b]===a.attributes[b]});if(d)return c.whenGraphics3DGraphic(d);
throw new p("internal:graphic-not-part-of-view","Graphic is not part of this view");}).then(function(a){return c.boundsForGraphics3DGraphic(a,b)})};d.prototype.whenSymbolLayerSize=function(a,c){return b(this,void 0,void 0,function(){var b,d,e;return k(this,function(f){switch(f.label){case 0:b=this.symbols.get(a.id);if(null==b)throw new p("internal:symbol-not-part-of-view","Symbol is not part of this view");d=a.symbolLayers.indexOf(c);if(-1===d)throw new p("internal:missing-symbol-layer","Symbol layer is not in symbol");
return[4,b.whenSymbolLayerSize(d)];case 1:e=f.sent();if(null==e)throw new p("internal:missing-size","Symbol layer has no valid size");return[2,e]}})})};d.prototype.graphicsCollectionChanged=function(a){this._startCreateGraphics&&(this.add(a.added),this.remove(a.removed))};d.prototype.graphicUpdateHandler=function(b){var c=b.graphic.uid,d=this.graphics3DGraphics.get(c),c=this.graphicsWithoutSymbol[c];if(d||c)switch(b.property){case "visible":this.graphicUpdateVisibleHandler(d,b);break;case "geometry":this.graphicUpdateGeometryHandler(d,
b);break;case "symbol":this.graphicUpdateSymbolHandler(d,b);break;case "attributes":break;default:a.neverReached(b)}};d.prototype.graphicUpdateGeometryHandler=function(a,b){var c=b.graphic.geometry;if(x.isNone(c))this.recreateGraphic(b.graphic);else if(x.isNone(a)){if((a=b.graphic.symbol&&b.graphic.symbol.id)&&(a=this.symbols.get(a))&&0===a.loadStatus)return;this.recreateGraphic(b.graphic)}else a.graphics3DSymbol.updateGeometry(a,b.newValue)||this.recreateGraphic(a.graphic),this.expandComputedExtent(c)};
d.prototype.graphicUpdateSymbolHandler=function(a,b){var c=b.graphic,d=x.isSome(a)?a.graphics3DSymbol:b.oldValue&&this.symbols.get(b.oldValue.id);if(d){var e=d.symbol;b=this.getConvertedSymbol(b.newValue);if(b.type!==e.type||"web-style"===b.type||"web-style"===e.type)this.recreateGraphic(c);else{var f=this.graphicsBySymbol.get(e.id);if(f&&1!==f.size)this.recreateGraphic(c);else if(f=K.diff(e,b),x.isNone(f))this.updateSymbolMapping(e.id,b);else if(f={diff:f,graphics3DGraphicPatches:[],symbolStatePatches:[]},
d.prepareSymbolPatch(f),K.isEmpty(f.diff)){for(var g=0,h=f.symbolStatePatches;g<h.length;g++)d=h[g],d();c=this._getRenderingInfo(c);if(x.isSome(a))for(g=0,f=f.graphics3DGraphicPatches;g<f.length;g++)d=f[g],d(a,c);this.updateSymbolMapping(e.id,b)}else this.recreateGraphic(c)}}else this.recreateGraphic(c)};d.prototype.graphicUpdateVisibleHandler=function(a,b){(a=this._updateUserVisibility(a))&&this.labeler&&this.owner.view.labeler.setDirty();a&&this.owner.view.deconflictor.setDirty()};d.prototype.recreateGraphic=
function(a){a=[a];this.suspendSymbolCleanup=!0;this.remove(a);this.add(a);this.suspendSymbolCleanup=!1;this.asyncUpdates||this._cleanupSymbols()};d.prototype._beginGraphicUpdate=function(a){this.graphicsWaitingForSymbol.add(a.uid);1===this.graphicsWaitingForSymbol.size&&this.notifyChange("updating");this._get("symbolsUpdating")||this._set("symbolsUpdating",!0)};d.prototype._endGraphicUpdate=function(a){a&&(this.graphicsWaitingForSymbol.delete(a.uid),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),
this.notifyChange("updating"),this._get("symbolsUpdating")&&(this.owner.view.flushDisplayModifications(),this._set("symbolsUpdating",!1))))};d.prototype.expandComputedExtent=function(a){var b=a.spatialReference;L.computeAABB(a,aa);a=this._spatialReference;var c=t.tmpVec;!b.equals(a)&&ca.xyzToVector(aa[0],aa[1],0,b,c,a)&&(aa[0]=c[0],aa[1]=c[1],ca.xyzToVector(aa[3],aa[4],0,b,c,a),aa[3]=c[0],aa[4]=c[1]);if(y.isFinite(aa[0])&&y.isFinite(aa[3])&&y.isFinite(aa[1])&&y.isFinite(aa[4])){var b=this.computedExtent,
c=null,d=y.isFinite(aa[2])&&y.isFinite(aa[5]),e=d&&(!b||null==b.zmin||aa[2]<b.zmin),d=d&&(!b||null==b.zmax||aa[5]>b.zmax);if(b){if(aa[0]<b.xmin||aa[1]<b.ymin||aa[3]>b.xmax||aa[4]>b.ymax||e||d)c=this.propertiesPool.get("computedExtent"),c.xmin=Math.min(aa[0],b.xmin),c.ymin=Math.min(aa[1],b.ymin),c.xmax=Math.max(aa[3],b.xmax),c.ymax=Math.max(aa[4],b.ymax),c.spatialReference=a}else c=this.propertiesPool.get("computedExtent"),c.xmin=aa[0],c.ymin=aa[1],c.xmax=aa[3],c.ymax=aa[4],c.spatialReference=a;c&&
(e&&(c.zmin=aa[2]),d&&(c.zmax=aa[5]),this._set("computedExtent",c))}};d.prototype.updateHasDraped=function(){this._set("hasDraped",0<this.graphicsDrapedUids.size)};d.prototype.elevationInfoChange=function(){var a=this,b=P.extractExpressionInfo(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=P.createContext(b,this._spatialReference,ga);this.labeler&&this.labeler.elevationInfoChange();this.forEachGraphics3DSymbol(function(b,c,
d){b.globalPropertyChanged("elevationInfo",c)?c.forEach(function(a){var b=a.graphic;a=a._labelGraphics;for(var c=0;c<a.length;c++){var d=a[c];d.graphics3DSymbolLayer.updateGraphicElevationContext(b,d)}}):a._recreateSymbol(d)});this.elevationAlignment&&this.elevationAlignment.elevationInfoChange()};d.prototype.clearSymbolsAndGraphics=function(){this.clear();this.filterVisibility&&this.filterVisibility.clear();this.labeler&&this.labeler.reset();this.deconflictor&&this.deconflictor.clear();this.elevationAlignment&&
this.elevationAlignment.clear();this.stageLayer&&this.stageLayer.invalidateSpatialQueryAccelerator()};d.prototype.startCreateGraphics=function(){this._startCreateGraphics=!0;this.recreateAllGraphics()};d.prototype.recreateAllGraphics=function(){this._startCreateGraphics&&(this.clearSymbolsAndGraphics(),this._set("computedExtent",null),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=
!!this.owner.slicePlaneEnabled,this.owner.loadedGraphics&&this.owner.loadedGraphics.length&&this.owner.view.basemapTerrain.tilingScheme&&this.add(this.owner.loadedGraphics.toArray()))};d.prototype._recreateSymbol=function(a){var b=this,c=[];this.graphicsBySymbol.get(a).forEach(function(a,d){var e=a.usedMemory;b._conditionalRemove(a,d);b._spatialIndex&&b._spatialIndex.remove(a);c.push(a.graphic);a.destroy();b.removeGraphics3DGraphic(d,e);b.updateLayerVisibility();b.featureStore.events.emit("changed")});
this.graphicsBySymbol.set(a,new Map);var d=this.symbols.get(a);d&&d.destroy();this.symbols.delete(a);this.updateHasDraped();this.add(c)};d.prototype._conditionalRemove=function(a,b){a.isDraped()&&this.graphicsDrapedUids.delete(b);this.highlights&&this.highlights.removeGraphic(a);this.labeler&&this.labeler.removeGraphic(a);this.deconflictor&&this.deconflictor.removeGraphic(a)};d.prototype.add=function(a){a&&0!==a.length&&(this.owner.view.basemapTerrain&&this.owner.view.basemapTerrain.tilingScheme?
(this.asyncUpdates?this._addDelayed(a):this._addImmediate(a),this.notifyChange("updating")):ga.error("#add()","Cannot add graphics before terrain surface has been initialized"))};d.prototype._addImmediate=function(a){var b=this;this.symbolWarningLogged=this.geometryWarningLogged=!1;ia.clear();for(var c=0;c<a.length;c++)this._startAddGraphic(a[c],ia);ia.forEach(function(a){return b._finishAddGraphics(a)});ia.clear();this.updateHasDraped();this._cleanupSymbols();this.owner.view.labeler.setDirty();this._cleanupSymbols()};
d.prototype._addDelayed=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.uid,e=this.pendingUpdates.get(d);e?(e.add||this.pendingAdds++,e.add=c):(e=this.pendingUpdatesPool.pushNew(),e.add=c,this.pendingAdds++,this.pendingUpdates.set(d,e))}this.maxPendingUpdates=Math.max(this.maxPendingUpdates,this.pendingUpdates.size);this.notifyChange("updatingTotal");this.notifyChange("updatingRemaining")};d.prototype.remove=function(a){this.asyncUpdates?this._removeDelayed(a):this._removeImmediate(a);this.notifyChange("updating")};
d.prototype._removeImmediate=function(a){for(var b=0;b<a.length;b++)this._removeGraphic(a[b]);this.updateHasDraped();this._cleanupSymbols();this.owner.view.labeler.setDirty()};d.prototype._removeDelayed=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.uid,e=this.pendingUpdates.get(d);e?e.add&&(e.remove?e.add=null:this.pendingUpdates.delete(d),this.pendingAdds--):(e=this.pendingUpdatesPool.pushNew(),e.remove=c,this.pendingUpdates.set(d,e),this.pendingRemoves++)}0===this.pendingUpdates.size&&
this._finishPendingUpdates();this.maxPendingUpdates=Math.max(this.maxPendingUpdates,this.pendingUpdates.size);this.notifyChange("updatingTotal");this.notifyChange("updatingRemaining")};d.prototype._finishPendingUpdates=function(){this.pendingUpdatesPool.clear();this.maxPendingUpdates=0;this._cleanupSymbols();(this.pendingAdds||this.pendingRemoves)&&ga.warn("pendingAdds/Removes in inconsistent state!");this.pendingRemoves=this.pendingAdds=0};d.prototype._applyPendingUpdates=function(a){var b=this;
this.symbolWarningLogged=this.geometryWarningLogged=!1;var c=a.idleFrame?1E3:100,d=0;ia.clear();v.everyMap(this.pendingUpdates,function(e,f){e.remove&&(b.pendingRemoves--,b._removeGraphic(e.remove));e.add&&(b.pendingAdds--,b._startAddGraphic(e.add,ia)&&d++);b.pendingUpdates.delete(f);d>c&&(ia.forEach(function(a){return b._finishAddGraphics(a)}),ia.clear(),d=0);a.madeProgress();if(a.done)return!1});ia.forEach(function(a){return b._finishAddGraphics(a)});ia.clear();0===this.pendingUpdates.size&&this._finishPendingUpdates();
this.notifyChange("updatingTotal");this.notifyChange("updatingRemaining");this.updateHasDraped()};d.prototype._startAddGraphic=function(a,b){this.graphicsWithoutSymbol[a.uid]=a;var c=this._getRenderingInfo(a,ga);if(!c||x.isNone(c.symbol)||!L.hasGeometry(a))return!1;var d=this.getOrCreateGraphics3DSymbol(c.symbol,c.renderer);if(!d)return!1;this.expandComputedExtent(a.geometry);this._beginGraphicUpdate(a);a={graphic:a,renderingInfo:c,layer:this.layer};var c=d.symbol.id,e=b.get(c);e?e.graphics.push(a):
(e=Aa.acquire(),e.clear(),e.push(a),b.set(c,{asyncSymbol:d,graphics:e}));return!0};d.prototype._finishAddGraphics=function(a){var b=this,c=!1,d=function(b){b===a.asyncSymbol.symbol.id&&(c=!0)};this._whenSymbolRemoved.push(d);a.asyncSymbol.load().then(function(){b._whenSymbolRemoved.removeUnordered(d);sa.clear();for(var e=0;e<a.graphics.length;e++){var f=a.graphics.data[e],g=f.graphic;c||a.asyncSymbol.destroyed||b.graphicSymbolSupported&&g.symbol&&g.symbol.id!==a.asyncSymbol.symbol.id||(b.graphicsWaitingForSymbol.has(g.uid)&&
(f=b.createGraphics3DGraphic(a.asyncSymbol,f),b._spatialIndex&&f&&sa.push(f)),b._endGraphicUpdate(g));--a.asyncSymbol.referenced}0<sa.length&&(b._spatialIndex.addMany(sa.data,sa.length),sa.clear());b.featureStore.events.emit("changed");a.graphics.clear();Aa.release(a.graphics);b.labeler&&b.owner.view.labeler.setDirty()},function(){b._whenSymbolRemoved.removeUnordered(d);if(!c&&!a.asyncSymbol.destroyed)for(var e=0;e<a.graphics.length;e++)b._endGraphicUpdate(a.graphics.data[e].graphic);a.graphics.clear();
Aa.release(a.graphics)})};d.prototype._removeGraphic=function(a){a=a.uid;var b=this.graphics3DGraphics.get(a);if(b){var c=b.usedMemory;this._conditionalRemove(b,a);this._spatialIndex&&this._spatialIndex.remove(b);this.graphicsBySymbol.get(b.graphics3DSymbol.symbol.id).delete(a);delete this.graphicsWithoutSymbol[a];this.removeGraphics3DGraphic(a,c);b.destroy();this.featureStore.events.emit("changed")}else delete this.graphicsWithoutSymbol[a],this.graphicsWaitingForSymbol.delete(a)};d.prototype.hasLabelingContext=
function(a){if(a instanceof e.LabelSymbol3D||a instanceof e.TextSymbol){var b=this.symbolCreationContext.layer;return b.labelingInfo?b.labelingInfo.some(function(b){return b.symbol===a}):!1}return!1};d.prototype.hasValidSymbolCreationContext=function(a){return a instanceof e.LabelSymbol3D&&!this.hasLabelingContext(a)?(ga.error("LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported."),!1):!0};d.prototype._getRenderingInfo=function(a,b){if(x.isNone(a.geometry))return b&&
!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,b.warn("Graphic in layer "+this.layer.id+" has no geometry and will not render")),null;if(!this.graphicSymbolSupported&&x.isSome(a.symbol))return b&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,b.warn("Graphic in layer "+this.layer.id+" is not allowed to have a symbol, use a renderer instead")),null;a=this.rendererHasGeometryOperations?L.hydrateGraphic(a,this.layer):a;a=this.owner.getRenderingInfo(a,this.currentRenderer);return!a||
x.isNone(a.symbol)?(b&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,b.warn("Graphic in layer "+this.layer.id+" has no symbol and will not render")),null):a};d.prototype.createGraphics3DSymbol=function(a,b){var c=this;if(!this.hasValidSymbolCreationContext(a))return null;a=this.getConvertedSymbol(a);if(!a)return null;var d;b&&"backgroundFillSymbol"in b&&b.backgroundFillSymbol&&(b=H.to3D(b.backgroundFillSymbol,!1,!0),b.symbol&&"web-style"!==b.symbol.type&&(d=b.symbol.symbolLayers));d=Q.make(a,
this.symbolCreationContext,d);d.load().then(function(){return c.notifyChange("maxSymbolComplexity")});return d};d.prototype.getOrCreateGraphics3DSymbol=function(a,b){var c=this,d=this.symbols.get(a.id);void 0===d&&(d=a instanceof e.WebStyleSymbol?new J(a,function(a){return c.createGraphics3DSymbol(a,b)}):this.createGraphics3DSymbol(a,b),this.symbols.set(a.id,d));d&&++d.referenced;return d};d.prototype.addGraphics3DGraphic=function(a){this._usedMemory+=a.usedMemory;this.graphics3DGraphics.set(a.graphic.uid,
a);this.numberOfGraphics++;this.updateLayerVisibility()};d.prototype.removeGraphics3DGraphic=function(a,b){this._usedMemory-=b;this.graphics3DGraphics.delete(a);this.numberOfGraphics--;this.updateLayerVisibility()};d.prototype.createGraphics3DGraphic=function(a,b){var c=b.graphic;delete this.graphicsWithoutSymbol[c.uid];if(!this.symbols.has(a.symbol.id))this.add([c]);else if(!this.graphics3DGraphics.has(c.uid)){b=a.createGraphics3DGraphic(b);a=a.symbol.id;this.addGraphics3DGraphic(b);this.graphicsBySymbol.has(a)||
this.graphicsBySymbol.set(a,new Map);this.graphicsBySymbol.get(a).set(c.uid,b);b.initialize(this.stageLayer,this.stage);b.isDraped()&&(this.graphicsDrapedUids.add(c.uid),this._set("hasDraped",!0));b.centroid=null;x.isSome(c.geometry)&&"point"!==c.geometry.type&&b instanceof T&&(b.centroid=R.computeCentroid(c.geometry,this._spatialReference));this._updateUserVisibility(b);this.deconflictor&&this.deconflictor.addGraphic(b);this.labeler&&this.labeler.addGraphic(b);this.scaleVisibility&&this.scaleVisibility.updateVisibility(b);
this.filterVisibility&&this.filterVisibility.updateVisibility(b);this.highlights&&this.highlights.addGraphic(b);this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,b);if(a=this.whenGraphics3DGraphicRequests[c.uid])delete this.whenGraphics3DGraphicRequests[c.uid],a.resolve(b);return b}};d.prototype.rendererChange=function(a){return b(this,void 0,void 0,function(){return k(this,function(b){switch(b.label){case 0:if(a===this.currentRenderer)return[2];this.validateRenderer(a);return I.hasGeometryOperations(a)?
[4,I.enableGeometryOperations()]:[3,2];case 1:return b.sent(),this.layer.renderer===a&&this.currentRendererChange(a,!0),[3,3];case 2:this.currentRendererChange(a,!1),b.label=3;case 3:return[2]}})})};d.prototype.currentRendererChange=function(a,b){this.currentRenderer=a;this.rendererHasGeometryOperations=b;b=this.symbolCreationContext.renderer;if(a!==b){this.symbolConversionCache.clear();var c=K.diff(b,a);this.updateUnchangedSymbolMappings(c,a,b);this.symbolCreationContext.renderer=a;x.isNone(c)||
("complete"===c.type?this.recreateAllGraphics():"partial"===c.type&&(this.applyRendererDiff(c,a,b)?this.volatileGraphicsUpdated():this.recreateAllGraphics()),this.notifyChange("maxSymbolComplexity"))}};d.prototype.diffHasSymbolChange=function(a){for(var b in a.diff)switch(b){case "visualVariables":case "defaultSymbol":case "uniqueValueInfos":break;case "authoringInfo":case "fieldDelimiter":delete a.diff[b];break;default:return!0}return!1};d.prototype.applySymbolSetDiff=function(a,b,c,d){var e=this;
a=a||[];b=b||[];var f=[];d=function(b){var d=g.graphicsBySymbol.get(b.id);d&&d.forEach(function(g,h){var k=g.graphic,l=e.layer instanceof N?e.layer:null;if(b!==c.defaultSymbol||c.getSymbol(L.hydrateGraphic(k,l),{arcadeUtils:I})!==c.defaultSymbol)l=g.usedMemory,a.length||c.defaultSymbol?f.push(k):e.graphicsWithoutSymbol[h]=k,k=e.graphics3DGraphics.get(h),e._conditionalRemove(k,h),g.destroy(),d.delete(h),e.removeGraphics3DGraphic(h,l),e.updateLayerVisibility()});g._whenSymbolRemoved.forEach(function(a){return a(b.id)})};
for(var g=this,h=0;h<b.length;h++)d(b[h]);if(a.length||f.length){for(var k in this.graphicsWithoutSymbol)f.push(this.graphicsWithoutSymbol[k]);this.graphicsWithoutSymbol={};this.add(f)}this.updateHasDraped();this._cleanupSymbols();this.owner.view.labeler.setDirty()};d.prototype.applyUniqueValueRendererDiff=function(a,b,c){var d=a.diff.defaultSymbol,e=a.diff.uniqueValueInfos;if(d||e){var f=e?e.added.map(function(a){return a.symbol}):[],g=e?e.removed.map(function(a){return a.symbol}):[];if(e)for(var h=
0;h<e.changed.length;h++)f.push(e.changed[h].newValue.symbol),g.push(e.changed[h].oldValue.symbol);d?(c.defaultSymbol&&g.push(c.defaultSymbol),b.defaultSymbol&&f.push(b.defaultSymbol)):c.defaultSymbol&&f.length&&g.push(b.defaultSymbol);this.applySymbolSetDiff(f,g,b,c);delete a.diff.defaultSymbol;delete a.diff.uniqueValueInfos;return!0}return!1};d.prototype.calculateUnchangedSymbolMapping=function(a,b,c){var d=function(a){return x.isSome(a)?a.id:null};if(b instanceof g.UniqueValueRenderer&&c instanceof
g.UniqueValueRenderer&&(x.isNone(a)||"partial"===a.type)){var e=a&&a.diff;a=e&&e.defaultSymbol;var e=e&&e.uniqueValueInfos,f=void 0,f=e?e.unchanged.map(function(a){return{oldId:d(a.oldValue.symbol),newId:d(a.newValue.symbol)}}):c.uniqueValueInfos.map(function(a,c){return{oldId:d(a.symbol),newId:d(b.uniqueValueInfos[c].symbol)}});!a&&c.defaultSymbol&&f.push({oldId:d(c.defaultSymbol),newId:d(b.defaultSymbol)});return f}return[]};d.prototype.updateSymbolMapping=function(a,b){var c=b?"string"===typeof b?
b:b.id:null;b="string"===typeof b?null:b;if(a&&a!==c){var d=this.graphicsBySymbol.get(a);this.graphicsBySymbol.delete(a);void 0!==d&&this.graphicsBySymbol.set(c,d);d=this.symbols.get(a);this.symbols.delete(a);void 0!==d&&(this.symbols.set(c,d),b?d.symbol=b:d.symbol.id=c)}};d.prototype.updateUnchangedSymbolMappings=function(a,b,c){var d=0;for(a=this.calculateUnchangedSymbolMapping(a,b,c);d<a.length;d++)b=a[d],this.updateSymbolMapping(b.oldId,b.newId)};d.prototype.applyRendererDiff=function(a,b,c){var d=
this;return this.diffHasSymbolChange(a)?!1:b instanceof g.UniqueValueRenderer&&c instanceof g.UniqueValueRenderer&&this.applyUniqueValueRendererDiff(a,b,c)&&0===Object.keys(a.diff).length?!0:v.everyMap(this.graphicsBySymbol,function(c,e){if((c=d.symbols.get(e))&&!c.applyRendererDiff(a,b))return!1})};d.prototype.opacityChange=function(){this.forEachGraphics3DSymbol(function(a){return a.globalPropertyChanged("opacity")});this.updateStageLayerVisibility()};d.prototype.modeChange=function(a){(this.symbolCreationContext.isAsync=
a)||this.update(na.noBudget)};d.prototype.slicePlaneEnabledChange=function(a){a!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=a,this.stageLayer.isSliceable=a,this.forEachGraphics3DSymbol(function(a,b){return a.globalPropertyChanged("slicePlaneEnabled",b)}),this.deconflictor&&this.deconflictor.slicePlaneEnabledChange(),this.labeler&&this.labeler.slicePlaneEnabledChange())};d.prototype.pixelRatioChange=function(a){var b=this;this.forEachGraphics3DSymbol(function(a,
c,d){a.globalPropertyChanged("pixelRatio",c)||b._recreateSymbol(d)})};d.prototype.setClippingExtent=function(a,b){var c=this.symbolCreationContext.clippingExtent,d=E.create();ca.extentToBoundingRect(a,d,b)?this.symbolCreationContext.clippingExtent=[d[0],d[1],-Infinity,d[2],d[3],Infinity]:this.symbolCreationContext.clippingExtent=null;return!f.equals(this.symbolCreationContext.clippingExtent,c)};d.prototype.notifyVisibilityChanged=function(){this.owner.view.deconflictor.setDirty();this.owner.view.labeler.setDirty()};
d.prototype.modifyGraphics3DGraphicVisibilities=function(a){var b=!1;this.graphics3DGraphics.forEach(function(c){a(c)&&(b=!0)});b&&this.notifyVisibilityChanged()};d.prototype.forEachGraphics3DSymbol=function(a){var b=this;this.graphicsBySymbol.forEach(function(c,d){var e=b.symbols.get(d);e&&a(e,c,d)})};d.prototype.updateAllGraphicsVisibility=function(){var a=this;this.filterVisibility&&(this.filterVisibility.dirty=!0);this.modifyGraphics3DGraphicVisibilities(function(b){var c=a._updateUserVisibility(b);
b=a.scaleVisibility&&a.scaleVisibility.updateVisibility(b);return c||b})};d.prototype.hideAllGraphics=function(){this.modifyGraphics3DGraphicVisibilities(function(a){return a.setVisibilityFlag(0,!1,0)})};d.prototype.validateRenderer=function(a){(a=O.validateTo3D(a))&&ga.warn("Renderer for layer '"+(this.layer.title?this.layer.title+", ":"")+", id:"+this.layer.id+"' is not supported in a SceneView",a.message)};d.prototype.volatileGraphicsUpdated=function(){this.labeler&&this.labeler.reset();this.stageLayer.invalidateSpatialQueryAccelerator();
this.stageLayer.shaderTransformationChanged();this.notifyChange("updating")};d.prototype._cleanupSymbols=function(){var a=this;if(!(0<this.graphicsWaitingForSymbol.size||this.suspendSymbolCleanup)){var b=!1;this.symbols.forEach(function(c,d){if(c&&!(0<c.referenced)){var e=a.graphicsBySymbol.get(d);e&&0!==e.size||(a.graphicsBySymbol.delete(d),a.symbols.delete(d),c&&c.destroy(),b=!0)}});b&&this.notifyChange("maxSymbolComplexity")}};d.prototype.snapshotInternals=function(){var a=this;return{graphics:f.keysOfMap(this.graphics3DGraphics).sort(),
symbols:f.keysOfMap(this.symbols).sort(),graphicsBySymbol:f.keysOfMap(this.graphicsBySymbol).sort().map(function(b){return{symbolId:b,graphics:f.keysOfMap(a.graphicsBySymbol.get(b)).sort()}}),graphicsWithoutSymbol:Object.keys(this.graphicsWithoutSymbol).sort(),graphicsDrapedUids:f.keysOfSet(this.graphicsDrapedUids).sort(),pendingUpdates:this.pendingUpdates}};Object.defineProperty(d.prototype,"test",{get:function(){return{symbols:this.symbols,filterVisibility:this.filterVisibility,numPending:this.pendingUpdates.size}},
enumerable:!0,configurable:!0});d.prototype.getStats=function(){return{"core.visible":this.graphics3DGraphics.size,"core.missing":Object.keys(this.graphicsWithoutSymbol).length,"core.pending":this.pendingUpdates.size}};var t;d.tmpVec=C.vec3f64.create();l([B.property({readOnly:!0})],d.prototype,"computedExtent",void 0);l([B.property()],d.prototype,"currentRenderer",void 0);l([B.property()],d.prototype,"rendererHasGeometryOperations",void 0);l([B.property({readOnly:!0})],d.prototype,"elevationAlignment",
void 0);l([B.property({readOnly:!0})],d.prototype,"scaleVisibility",void 0);l([B.property({readOnly:!0})],d.prototype,"filterVisibility",void 0);l([B.property({readOnly:!0})],d.prototype,"featureStore",void 0);l([B.property({readOnly:!0})],d.prototype,"deconflictor",void 0);l([B.property({readOnly:!0})],d.prototype,"labeler",void 0);l([B.property({readOnly:!0})],d.prototype,"highlights",void 0);l([B.property()],d.prototype,"asyncUpdates",void 0);l([B.property({constructOnly:!0})],d.prototype,"elevationFeatureExpressionEnabled",
void 0);l([B.property({constructOnly:!0})],d.prototype,"owner",void 0);l([B.property({constructOnly:!0})],d.prototype,"layer",void 0);l([B.property({readOnly:!0})],d.prototype,"hasDraped",void 0);l([B.property({readOnly:!0})],d.prototype,"symbolsUpdating",void 0);l([B.property({constructOnly:!0})],d.prototype,"graphicSymbolSupported",void 0);l([B.property({readOnly:!0,dependsOn:["elevationAlignment.updating","scaleVisibility.updating","filterVisibility.updating"]})],d.prototype,"updating",null);l([B.property({readOnly:!0})],
d.prototype,"updatingRemaining",null);l([B.property({readOnly:!0})],d.prototype,"updatingTotal",null);l([B.property({readOnly:!0,dependsOn:["owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives","owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures","maxSymbolComplexity"]})],d.prototype,"displayFeatureLimit",null);l([B.property({readOnly:!0})],d.prototype,"maxSymbolComplexity",null);l([B.property({constructOnly:!0})],d.prototype,"hasZ",void 0);l([B.property({constructOnly:!0})],
d.prototype,"hasM",void 0);return d=t=l([B.subclass("esri.views.3d.layers.graphics.Graphics3DCore")],d)}(B.declared(c));var ia=new Map,sa=new m,Aa=new w(m);(function(){return function(){this.remove=this.add=null}})();var Ba=10;return r})},"esri/renderers/support/rendererConversion":function(){define(["require","exports","../../core/Error","../../symbols/support/symbolConversion"],function(r,d,n,l){function k(b,d){if(!d)return null;d=Array.isArray(d)?d:[d];if(0<d.length){var c=d.map(function(a){return a.details.symbol.type||
a.details.symbol.declaredClass}).filter(function(a){return!!a});c.sort();var e=[];c.forEach(function(a,b){0!==b&&a===c[b-1]||e.push(a)});return new n("renderer-conversion-3d:unsupported-symbols","Renderer contains symbols ("+e.join(", ")+") which are not supported in 3D",{renderer:b,symbolErrors:d})}return null}function b(b){var d=b.uniqueValueInfos.map(function(b){return l.to3D(b.symbol).error}).filter(function(b){return!!b}),c=l.to3D(b.defaultSymbol);c.error&&d.unshift(c.error);return k(b,d)}function h(b){var d=
b.classBreakInfos.map(function(b){return l.to3D(b.symbol).error}).filter(function(b){return!!b}),c=l.to3D(b.defaultSymbol);c.error&&d.unshift(c.error);return k(b,d)}Object.defineProperty(d,"__esModule",{value:!0});d.validateTo3D=function(d){return d?"simple"===d.type?k(d,l.to3D(d.symbol).error):"unique-value"===d.type?b(d):"class-breaks"===d.type?h(d):new n("renderer-conversion-3d:unsupported-renderer","Unsupported renderer of type '"+(d.type||d.declaredClass)+"'",{renderer:d}):null}})},"esri/views/3d/layers/graphics/Graphics3DFeatureStore":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/maybe ../../../../core/accessorSupport/decorators ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/OptimizedFeature ../../../../layers/graphics/OptimizedGeometry ../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter ../../support/projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function k(g){var k=d.call(this)||this;k.events=new b;k.hasZ=null;k.hasM=null;k.objectIdField=null;k.spatialReference=null;k.featureAdapter={getAttribute:function(b,c){return"graphic"in b?b.graphic.attributes[c]:a.default.getAttribute(b,c)},getAttributes:function(b){return"graphic"in b?b.graphic.attributes:a.default.getAttributes(b)},getObjectId:function(b){return"graphic"in b?e.getObjectId(b.graphic,
k.objectIdField):a.default.getObjectId(b)},getGeometry:function(b){return"graphic"in b?b.getAsOptimizedGeometry(k.hasZ,k.hasM):a.default.getGeometry(b)},getCentroid:function(b,c){if("graphic"in b){var d=null;h.isSome(b.centroid)?d=b.centroid:"point"===b.graphic.geometry.type&&p.pointToPoint(b.graphic.geometry,q,k.spatialReference)&&(d=q);b=Array(2+(c.hasZ?1:0)+(c.hasM?1:0));h.isNone(d)?(b[0]=0,b[1]=0,b[2]=0,b[3]=0):(b[0]=d.x,b[1]=d.y,c.hasZ&&(b[2]=d.hasZ?d.z:0),c.hasM&&(b[c.hasZ?3:2]=d.hasM?d.m:0));
return new f.default([],b)}return a.default.getCentroid(b,c)},cloneWithGeometry:function(b,d){return"graphic"in b?new c.default(d,k.featureAdapter.getAttributes(b),null,k.featureAdapter.getObjectId(b)):a.default.cloneWithGeometry(b,d)}};return k}n(k,d);k.prototype.forEach=function(a){this.forAllGraphics(function(b){a(b)})};k.prototype.forEachInBounds=function(a,b){this.getSpatialIndex().forEachInBounds(a,b)};k.prototype.forEachBounds=function(a,b,c){for(var d=this.getSpatialIndex(),e=0;e<a.length;e++){var f=
this.featureAdapter.getObjectId(a[e]);h.isSome(d.getBounds(f,c))&&b(c)}};l([g.property({constructOnly:!0})],k.prototype,"getSpatialIndex",void 0);l([g.property({constructOnly:!0})],k.prototype,"forAllGraphics",void 0);l([g.property({constructOnly:!0})],k.prototype,"hasZ",void 0);l([g.property({constructOnly:!0})],k.prototype,"hasM",void 0);l([g.property({constructOnly:!0})],k.prototype,"objectIdField",void 0);l([g.property({constructOnly:!0})],k.prototype,"spatialReference",void 0);return k=l([g.subclass("esri.views.3d.layers.graphics.Graphics3DFeatureStore")],
k)}(g.declared(k));d.Graphics3DFeatureStore=r;var q={type:"point",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};d.default=r})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["require","exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.optimizedFeatureQueryEngineAdapter={getObjectId:function(b){return b.objectId},getAttributes:function(b){return b.attributes},getAttribute:function(b,
d){return b.attributes[d]},cloneWithGeometry:function(b,d){return new l.default(d,b.attributes,null,b.objectId)},getGeometry:function(b){return b.geometry},getCentroid:function(b,d){b.centroid||(b.centroid=n.getCentroidOptimizedGeometry(new k.default,b.geometry,d.hasZ,d.hasM));return b.centroid}};d.default=d.optimizedFeatureQueryEngineAdapter})},"esri/layers/graphics/centroid":function(){define(["require","exports"],function(r,d){function n(d,b,h,g,e,c){c=e?c?4:3:c?3:2;var f=h,a=h+c,k=0,l=0,n=h=0,
t=0,r=0;for(--g;r<g;r++,f+=c,a+=c){var x=b[f],w=b[f+1],m=b[f+2],u=b[a],z=b[a+1],B=b[a+2],C=x*z-u*w,n=n+C,k=k+(x+u)*C,l=l+(w+z)*C;e&&(C=x*B-u*m,h+=(m+B)*C,t+=C);x<d[0]&&(d[0]=x);x>d[1]&&(d[1]=x);w<d[2]&&(d[2]=w);w>d[3]&&(d[3]=w);e&&(m<d[4]&&(d[4]=m),m>d[5]&&(d[5]=m))}0<n&&(n*=-1);0<t&&(t*=-1);if(!n)return null;d=[k,l,.5*n];e&&(d[3]=h,d[4]=.5*t);return d}function l(d,b,h,g,e){e=g?e?4:3:e?3:2;for(var c=b,f=b+e,a=0,k=0,l=0,n=0,t=0,r=h-1;t<r;t++,c+=e,f+=e){var x=d[c],w=d[c+1],m=d[c+2],u=d[f],z=d[f+1],
B=d[f+2],C;if(g){C=u-x;var F=z-w,E=B-m;C=Math.sqrt(C*C+F*F+E*E)}else C=u-x,F=z-w,C=Math.sqrt(C*C+F*F);C&&(a+=C,g?(x=[x+.5*(u-x),w+.5*(z-w),m+.5*(B-m)],k+=C*x[0],l+=C*x[1],n+=C*x[2]):(x=[x+.5*(u-x),w+.5*(z-w)],k+=C*x[0],l+=C*x[1]))}return 0<a?g?[k/a,l/a,n/a]:[k/a,l/a]:0<h?g?[d[b],d[b+1],d[b+2]]:[d[b],d[b+1]]:null}Object.defineProperty(d,"__esModule",{value:!0});d.getCentroidOptimizedGeometry=function(d,b,h,g){if(!b||!b.lengths.length)return null;d.lengths.length&&(d.lengths.length=0);d.coords.length&&
(d.coords.length=0);for(var e=d.coords,c=[],f=h?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],a=b.lengths,k=b.coords,q=h?g?4:3:g?3:2,v=0,t=0;t<a.length;t++){var r=a[t],x=n(f,k,v,r,h,g);x&&c.push(x);v+=r*q}c.sort(function(a,b){var c=a[2]-b[2];0===c&&h&&(c=a[4]-b[4]);return c});c.length&&(q=6*c[0][2],
e[0]=c[0][0]/q,e[1]=c[0][1]/q,h&&(q=6*c[0][4],e[2]=0!==q?c[0][3]/q:0),e[0]<f[0]||e[0]>f[1]||e[1]<f[2]||e[1]>f[3]||h&&(e[2]<f[4]||e[2]>f[5]))&&(e.length=0);if(!e.length)if(b=b.lengths[0]?l(k,0,a[0],h,g):null)e[0]=b[0],e[1]=b[1],h&&2<b.length&&(e[2]=b[2]);else return null;return d};d.lineCentroid=l})},"esri/views/3d/layers/graphics/Graphics3DSymbolCreationContext":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){return function(){this.featureExpressionInfoContext=
this.localOriginFactory=this.layerView=this.layer=this.overlaySR=this.renderCoordsHelper=this.renderSpatialReference=this.clippingExtent=this.layerOrderDelta=this.layerOrder=this.stage=this.renderer=this.elevationProvider=this.streamDataRequester=this.sharedResources=null;this.screenSizePerspectiveEnabled=!0;this.isAsync=this.slicePlaneEnabled=!1}}();d.Graphics3DSymbolCreationContext=r})},"esri/views/3d/layers/graphics/Graphics3DSymbolFactory":function(){define(["require","exports","./Graphics3DPointSymbol",
"./Graphics3DSymbol"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.make=function(d,b,h){var g;switch(d.type){case "point-3d":g=n;break;default:g=l}return new g(d,b,h)}})},"esri/views/3d/layers/graphics/Graphics3DPointSymbol":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/promiseUtils ./Graphics3DCalloutSymbolLayerFactory ./Graphics3DSymbol".split(" "),
function(r,d,n,l,k,b,h,g){return function(d){function c(b,a,c){b=d.call(this,b,a,c)||this;b.calloutSymbolLayer=null;b.symbol.hasVisibleCallout()&&(b.calloutSymbolLayer=h.make(b.symbol,a));return b}n(c,d);c.prototype.doLoad=function(c){return k(this,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return[4,d.prototype.doLoad.call(this,c)];case 1:return a.sent(),this.calloutSymbolLayer?[4,this.calloutSymbolLayer.load()]:[3,3];case 2:a.sent(),a.label=3;case 3:if(b.isAborted(c))throw b.createAbortError();
return[2]}})})};c.prototype.destroy=function(){d.prototype.destroy.call(this);this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()};c.prototype.createGraphics3DGraphic=function(b,a,c){a=d.prototype.createGraphics3DGraphic.call(this,b,c);this.calloutSymbolLayer&&(b=this.createCalloutGraphic(b))&&a.addAuxiliaryGraphic(b);return a};c.prototype.globalPropertyChanged=function(b,a){var c=this;return d.prototype.globalPropertyChanged.call(this,b,a)?this.calloutSymbolLayer?this.calloutSymbolLayer.globalPropertyChanged(b,
a,function(a){var b=0;for(a=a._auxiliaryGraphics;b<a.length;b++){var d=a[b];if(d.graphics3DSymbolLayer===c.calloutSymbolLayer)return d}}):!0:!1};c.prototype.createCalloutGraphic=function(b){var a=b.renderingInfo;b.renderingInfo={renderer:a.renderer,symbol:a.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:"world",elevationOffset:0,materialCollection:null};return this.calloutSymbolLayer.createGraphics3DGraphic(b)};return c}(g)})},"esri/views/3d/layers/graphics/SpatialIndex2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/has ../../../../core/accessorSupport/decorators ../../../../core/libs/rbush/PooledRBush ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/dehydratedFeatures".split(" "),
function(r,d,n,l,k,b,h,g,e,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function d(c){c=a.call(this)||this;c.index=new g.default(9,b("csp-restrictions")?function(a){return{minX:a.extent[0],minY:a.extent[1],maxX:a.extent[2],maxY:a.extent[3]}}:[".extent[0]",".extent[1]",".extent[2]",".extent[3]"]);c.boundsByFeature=new Map;c.spatialReference=null;c.hasZ=null;c.hasM=null;c.objectIdField=null;return c}n(d,a);d.prototype.destroy=function(){this.index.destroy();this.index=null;this.boundsByFeature.clear();
this.boundsByFeature=null};d.prototype.queryGraphicUIDsInExtent=function(a,b,c){b.equals(this.spatialReference)&&(f.minX=a[0],f.minY=a[1],f.maxX=a[2],f.maxY=a[3],this.index.search(f,function(a){return c(a.graphic.uid)}))};d.prototype.add=function(a){a.computeExtent(this.spatialReference);this.index.insert(a);var b=c.getObjectId(a.graphic,this._get("objectIdField"));null!=b&&this.boundsByFeature.set(b,a.extent)};d.prototype.addMany=function(a,b){void 0===b&&(b=a.length);for(var d=this._get("objectIdField"),
e=0;e<b;e++){var f=a[e];f.computeExtent(this.spatialReference);var g=c.getObjectId(f.graphic,d);null!=g&&this.boundsByFeature.set(g,f.extent)}this.index.load(a,b)};d.prototype.remove=function(a){this.index.remove(a);a=c.getObjectId(a.graphic,this._get("objectIdField"));null!=a&&this.boundsByFeature.delete(a)};d.prototype.clear=function(){this.index.clear();this.boundsByFeature.clear()};d.prototype.forEachInBounds=function(a,b){f.minX=a[0];f.minY=a[1];f.maxX=a[2];f.maxY=a[3];this.index.search(f,function(a){b(a)})};
d.prototype.getBounds=function(a,b){return(a=this.boundsByFeature.get(a))?e.fromRect(b,a):null};l([h.property({constructOnly:!0})],d.prototype,"spatialReference",void 0);l([h.property({constructOnly:!0})],d.prototype,"hasZ",void 0);l([h.property({constructOnly:!0})],d.prototype,"hasM",void 0);l([h.property({constructOnly:!0})],d.prototype,"objectIdField",void 0);return d=l([h.subclass("esri.views.3d.layers.graphics.SpatialIndex2D")],d)}(h.declared(k));d.SpatialIndex2D=r;var f={minX:0,minY:0,maxX:0,
maxY:0};d.default=r})},"esri/core/libs/rbush/PooledRBush":function(){define(["require","exports","../../PooledArray","../quickselect/quickselect"],function(r,d,n,l){function k(a,c){b(a,0,a.children.length,c,a)}function b(a,b,c,d,e){e||(e=q(null,!0));e.minX=Infinity;e.minY=Infinity;e.maxX=-Infinity;e.maxY=-Infinity;for(var f=void 0;b<c;b++)f=a.children[b],h(e,a.leaf?d(f):f);return e}function h(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=
Math.max(a.maxY,b.maxY);return a}function g(a,b){return a.minX-b.minX}function e(a,b){return a.minY-b.minY}function c(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function f(a){return a.maxX-a.minX+(a.maxY-a.minY)}function a(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function p(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function q(a,b){return{children:a,height:1,leaf:b,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function v(a,
b,c,d,e){for(var f=[b,c];f.length;)if(c=f.pop(),b=f.pop(),!(c-b<=d)){var g=b+Math.ceil((c-b)/d/2)*d;l(a,g,b,c,e);f.push(b,g,g,c)}}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a,b){void 0===a&&(a=9);this.compareMinX=g;this.compareMinY=e;this.toBBox=function(a){return a};this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));b&&("function"===typeof b?this.toBBox=b:this._initFormat(b));this.clear()}d.prototype.destroy=function(){this.clear();
t.prune();y.prune();x.prune();w.prune()};d.prototype.all=function(a){this._all(this.data,a)};d.prototype.search=function(b,c){var d=this.data,e=this.toBBox;if(p(b,d))for(t.clear();d;){for(var f=0,g=d.children.length;f<g;f++){var h=d.children[f],k=d.leaf?e(h):h;p(b,k)&&(d.leaf?c(h):a(b,k)?this._all(h,c):t.push(h))}d=t.pop()}};d.prototype.collides=function(b){var c=this.data,d=this.toBBox;if(!p(b,c))return!1;for(t.clear();c;){for(var e=0,f=c.children.length;e<f;e++){var g=c.children[e],h=c.leaf?d(g):
g;if(p(b,h)){if(c.leaf||a(b,h))return!0;t.push(g)}}c=t.pop()}return!1};d.prototype.load=function(a,b){void 0===b&&(b=a.length);if(!b)return this;if(b<this._minEntries){for(var c=0;c<b;c++)this.insert(a[c]);return this}a=this._build(a.slice(0,b),0,b-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(c=this.data,this.data=a,a=c),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this};d.prototype.insert=function(a){a&&
this._insert(a,this.data.height-1);return this};d.prototype.clear=function(){this.data=q([],!0);return this};d.prototype.remove=function(b,c){if(!b)return this;var d=this.data,e,f,g,h,k=this.toBBox(b);x.clear();for(w.clear();d||x.length;){d||(d=x.pop(),e=x.data[x.length-1],f=w.pop(),g=!0);if(d.leaf){a:{h=b;var l=d.children,m=c;if(m){for(var p=0;p<l.length;p++)if(m(h,l[p])){h=p;break a}h=-1}else h=l.indexOf(h)}if(-1!==h){d.children.splice(h,1);x.push(d);this._condense(x);break}}g||d.leaf||!a(d,k)?
e?(f++,d=e.children[f],g=!1):d=null:(x.push(d),w.push(f),f=0,e=d,d=d.children[0])}return this};d.prototype.toJSON=function(){return this.data};d.prototype.fromJSON=function(a){this.data=a;return this};d.prototype._all=function(a,b){for(y.clear();a;){if(!0===a.leaf){var c=0;for(a=a.children;c<a.length;c++)b(a[c])}else y.pushArray(a.children);a=y.pop()}};d.prototype._build=function(a,b,c,d){var e=c-b+1,f=this._maxEntries,g;if(e<=f)return g=q(a.slice(b,c+1),!0),k(g,this.toBBox),g;d||(d=Math.ceil(Math.log(e)/
Math.log(f)),f=Math.ceil(e/Math.pow(f,d-1)));g=q([],!1);g.height=d;e=Math.ceil(e/f);f=e*Math.ceil(Math.sqrt(f));for(v(a,b,c,f,this.compareMinX);b<=c;b+=f){var h=Math.min(b+f-1,c);v(a,b,h,e,this.compareMinY);for(var l=b;l<=h;l+=e)g.children.push(this._build(a,l,Math.min(l+e-1,h),d-1))}k(g,this.toBBox);return g};d.prototype._chooseSubtree=function(a,b,d,e){for(;;){e.push(b);if(!0===b.leaf||e.length-1===d)break;for(var f=Infinity,g=Infinity,h=void 0,k=0,l=b.children.length;k<l;k++){var m=b.children[k],
p=c(m),n=(Math.max(m.maxX,a.maxX)-Math.min(m.minX,a.minX))*(Math.max(m.maxY,a.maxY)-Math.min(m.minY,a.minY))-p;n<g?(g=n,f=p<f?p:f,h=m):n===g&&p<f&&(f=p,h=m)}b=h||b.children[0]}return b};d.prototype._insert=function(a,b,c){var d=this.toBBox;c=c?a:d(a);x.clear();d=this._chooseSubtree(c,this.data,b,x);d.children.push(a);for(h(d,c);0<=b;)if(x.data[b].children.length>this._maxEntries)this._split(x,b),b--;else break;this._adjustParentBBoxes(c,x,b)};d.prototype._split=function(a,b){var c=a.data[b],d=c.children.length,
e=this._minEntries;this._chooseSplitAxis(c,e,d);d=this._chooseSplitIndex(c,e,d);d=q(c.children.splice(d,c.children.length-d),c.leaf);d.height=c.height;k(c,this.toBBox);k(d,this.toBBox);b?a.data[b-1].children.push(d):this._splitRoot(c,d)};d.prototype._splitRoot=function(a,b){this.data=q([a,b],!1);this.data.height=a.height+1;k(this.data,this.toBBox)};d.prototype._chooseSplitIndex=function(a,d,e){var f,g,h;f=g=Infinity;for(var k=d;k<=e-d;k++){var l=b(a,0,k,this.toBBox),m=b(a,k,e,this.toBBox),p;p=Math.max(0,
Math.min(l.maxX,m.maxX)-Math.max(l.minX,m.minX))*Math.max(0,Math.min(l.maxY,m.maxY)-Math.max(l.minY,m.minY));l=c(l)+c(m);p<f?(f=p,h=k,g=l<g?l:g):p===f&&l<g&&(g=l,h=k)}return h};d.prototype._chooseSplitAxis=function(a,b,c){var d=a.leaf?this.compareMinX:g,f=a.leaf?this.compareMinY:e,h=this._allDistMargin(a,b,c,d);b=this._allDistMargin(a,b,c,f);h<b&&a.children.sort(d)};d.prototype._allDistMargin=function(a,c,d,e){a.children.sort(e);e=this.toBBox;for(var g=b(a,0,c,e),k=b(a,d-c,d,e),l=f(g)+f(k),m=c;m<
d-c;m++){var p=a.children[m];h(g,a.leaf?e(p):p);l+=f(g)}for(m=d-c-1;m>=c;m--)p=a.children[m],h(k,a.leaf?e(p):p),l+=f(k);return l};d.prototype._adjustParentBBoxes=function(a,b,c){for(;0<=c;c--)h(b.data[c],a)};d.prototype._condense=function(a){for(var b=a.length-1,c=void 0;0<=b;b--)0===a.data[b].children.length?0<b?(c=a.data[b-1].children,c.splice(c.indexOf(a.data[b]),1)):this.clear():k(a.data[b],this.toBBox)};d.prototype._initFormat=function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a",
"b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")};return d}();d.PooledRBush=r;var t=new n,y=new n,x=new n,w=new n({deallocator:null});d.default=r})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function r(l,k,b,h,g){for(;h>b;){if(600<h-b){var e=h-b+1,c=k-b+1,f=Math.log(e),a=.5*Math.exp(2*f/3),f=.5*Math.sqrt(f*a*(e-a)/e)*(0>c-e/2?-1:1);r(l,k,
Math.max(b,Math.floor(k-c*a/e+f)),Math.min(h,Math.floor(k+(e-c)*a/e+f)),g)}e=l[k];c=b;a=h;d(l,b,k);for(0<g(l[h],e)&&d(l,b,h);c<a;){d(l,c,a);c++;for(a--;0>g(l[c],e);)c++;for(;0<g(l[a],e);)a--}0===g(l[b],e)?d(l,b,a):(a++,d(l,a,h));a<=k&&(b=a+1);k<=a&&(h=a-1)}}function d(d,k,b){var h=d[k];d[k]=d[b];d[b]=h}function n(d,k){return d<k?-1:d>k?1:0}return function(d,k,b,h,g){r(d,k,b||0,h||d.length-1,g||n)}})},"esri/views/3d/layers/graphics/Graphics3DElevationAlignment":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/Handles ../../../../core/PooledArray ../../../../core/accessorSupport/decorators ../../../../geometry/support/aaBoundingRect".split(" "),
function(r,d,n,l,k,b,h,g,e,c){var f=function(){function a(){this.extents=new g({allocator:function(a){return a||c.create()}});this.tempExtent=c.create();this.dirty=!1}Object.defineProperty(a.prototype,"length",{get:function(){return this.extents.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.extents.clear()};a.prototype.add=function(a){this.contains(a)||(this.removeContained(a),c.set(this.extents.pushNew(),a),this.dirty=!0)};a.prototype.pop=function(){this.dirty&&(this.mergeTight(),
this.dirty=!1);return this.extents.pop()};a.prototype.mergeTight=function(){for(var a=this.extents,b=this.tempExtent,d=!1;!d;)for(var d=!0,e=0;e<a.length;++e){for(var f=e,g=a.data[f],h=c.area(g),k=!1,l=a.length-1;l>f;--l){var n=a.data[l],r=c.area(n);c.expand(g,n,b);n=h+r;.05>(c.area(b)-n)/n&&(c.set(g,b),h=c.area(g),a.swapElements(l,a.length-1),a.pop(),k=!0)}if(k){d=!1;break}}};a.prototype.contains=function(a){return this.extents.some(function(b){return c.contains(b,a)})};a.prototype.removeContained=
function(a){for(var b=this.extents.length-1;0<=b;--b)c.contains(a,this.extents.data[b])&&this.extents.removeUnorderedIndex(b)};return a}();return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.dirtyExtents=new f;c.globalDirty=!1;c.dirtyGraphicsQueue=new g({deallocator:null});c.dirtyGraphicsSet=new Set;c.handles=new h;c.updateElevation=!1;c.layerView=null;c.graphicsCore=null;c.events=new b;return c}n(c,a);Object.defineProperty(c.prototype,"updating",{get:function(){return this.needsUpdate()},
enumerable:!0,configurable:!0});c.prototype.setup=function(a,b,c,d){var e=this;this.layerView=a;this.queryGraphicUIDsInExtent=b;this.graphicsCore=c;this.elevationProvider=d;a=this.layerView.view.resourceController.scheduler;this.handles.add([d.on("elevation-change",function(a){return e.elevationUpdateHandler(a)}),this.layerView.watch("suspended",function(){return e.suspendedChange()}),a.registerTask(12,function(a){return e.update(a)},function(){return e.needsUpdate()})])};c.prototype.destroy=function(){this.dirtyGraphicsSet=
this.dirtyGraphicsQueue=null;this.handles.destroy();this.queryGraphicUIDsInExtent=this.graphicsCore=this.layerView=this.handles=null};c.prototype.clear=function(){this.dirtyGraphicsQueue.clear();this.dirtyGraphicsSet.clear();this.notifyChange("updating")};c.prototype.suspendedChange=function(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange("updating"))};c.prototype.elevationInfoChange=function(){this.globalDirty=
!0;this.notifyChange("updating")};c.prototype.needsUpdate=function(){return 0<this.dirtyGraphicsQueue.length||0<this.dirtyExtents.length||this.globalDirty};c.prototype.update=function(a){this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,a.madeProgress());for(;this.needsUpdate()&&!a.done;)this._updateDirtyGraphics(a),this._updateDirtyExtents(a);this.layerView.view.deconflictor.setDirty();this.notifyChange("updating")};c.prototype._updateDirtyGraphics=function(a){for(var b=
this.layerView.view,c=this.graphicsCore.stageLayer.id,d=this.layerView.labeling;0<this.dirtyGraphicsQueue.length&&!a.done;){for(var e=Math.min(this.dirtyGraphicsQueue.length,100);e--&&!a.done;){var f=this.dirtyGraphicsQueue.pop(),g=this.graphicsCore.getGraphics3DGraphicById(f);this.dirtyGraphicsSet.delete(f);g&&g.alignWithElevation(this.elevationProvider,b.renderCoordsHelper);a.madeProgress()}b._stage.processDirtyLayer(c);d&&d.processStageDirty()}};c.prototype._updateDirtyExtents=function(a){for(var b=
this;0<this.dirtyExtents.length&&100>this.dirtyGraphicsQueue.length&&!a.done;){var c=this.dirtyExtents.pop();this.events.hasEventListener("invalidate-elevation")&&this.events.emit("invalidate-elevation",{extent:c,spatialReference:this.spatialReference});this.queryGraphicUIDsInExtent(c,this.spatialReference,function(a){var c=b.graphicsCore.getGraphics3DGraphicById(a);!b.dirtyGraphicsSet.has(a)&&c&&c.needsElevationUpdates()&&(b.dirtyGraphicsQueue.push(a),b.dirtyGraphicsSet.add(a))});a.madeProgress()}};
c.prototype.markAllGraphicsElevationDirty=function(){var a=this;this.dirtyExtents.clear();this.dirtyGraphicsQueue.clear();this.graphicsCore.graphics3DGraphics.forEach(function(b,c){a.dirtyGraphicsQueue.push(c);a.dirtyGraphicsSet.add(c)})};c.prototype.elevationUpdateHandler=function(a){var b=a.extent;this.layerView.suspended?this.updateElevation||(a=this.graphicsCore.computedExtent)&&b[2]>a.xmin&&b[0]<a.xmax&&b[3]>a.ymin&&b[1]<a.ymax&&(this.updateElevation=!0):(-Infinity===b[0]?this.globalDirty=!0:
this.dirtyExtents.add(b),this.spatialReference=a.spatialReference,this.notifyChange("updating"))};l([e.property({readOnly:!0})],c.prototype,"updating",null);return c=l([e.subclass("esri.views.3d.layers.graphics.Graphics3DElevationAlignment")],c)}(e.declared(k))})},"esri/views/3d/layers/graphics/Graphics3DFilterVisibility":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/Logger ../../../../core/maybe ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ./QueryEngine ../../../layers/support/FeatureFilter".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a){Object.defineProperty(d,"__esModule",{value:!0});var p=h.getLogger("esri.views.3d.layers.graphics.Graphics3DFilterVisibility");r=function(d){function h(){var a=d.call(this)||this;a.filter=null;a._dirty=!1;a._querying=!1;a._handles=new b;return a}n(h,d);Object.defineProperty(h.prototype,"updating",{get:function(){return this._dirty||this._querying||null!=this._queryResult},enumerable:!0,configurable:!0});h.prototype.setup=function(a,b){var c=this;this._layerView=a;
this._core=b;this._objectIdField=a.layer.objectIdField;this._queryEngine=new f.default({layerView:this._layerView,priority:4});this._handles.add(this._layerView.view.resourceController.scheduler.registerTask(4,function(a){return c._update(a)},function(){return c._needsUpdate()}));this._handles.add(e.on(b.owner,"loadedGraphics","change",function(a){return c._graphicsChanged(a)},function(){return c.dirty=!0}))};h.prototype.destroy=function(){this._handles.destroy();this._handles=null;this.clear();this._core=
this._layerView=null};h.prototype.clear=function(){this._queryEngine.clear()&&(this._core.modifyGraphics3DGraphicVisibilities(function(a){return a.clearVisibilityFlag(2)}),this._queryResult=null,this._querying=!1);this.dirty=!1;this.notifyChange("updating")};h.prototype._graphicsChanged=function(a){if(!this._queryEngine||a.added&&0<a.added.length)this.dirty=!0};h.prototype.updateVisibility=function(a){this.active&&(a.hasVisibilityFlag(2,0)||a.setVisibilityFlag(2,!1,0),this.dirty=!0)};h.prototype.filterChanged=
function(){this.filter=this.recomputeFilter();this.dirty=!0};Object.defineProperty(h.prototype,"active",{get:function(){return this.filter&&0<this._core.graphics3DGraphics.size},enumerable:!0,configurable:!0});h.prototype.recomputeFilter=function(){var b="filter"in this._layerView?this._layerView.filter:null,c="timeExtent"in this._layerView?this._layerView.timeExtent:null;if(!c)return b;b=g.isSome(b)?b.clone():new a;b.timeExtent=b.timeExtent?b.timeExtent.intersection(c):c;return b};h.prototype._needsUpdate=
function(){return this._dirty&&!this._querying||null!=this._queryResult};h.prototype._update=function(a){var b=this;this.active?(!this._dirty||this._querying||a.done||(this._querying=!0,this.dirty=!1,this._queryEngine.executeQueryForIdSet(this.filter).then(function(a){b._queryResult=a;b._querying=!1}).catch(function(a){p.warn("FeatureFilter query failed: "+a);b._queryResult=new Set;b._core.graphics3DGraphics.forEach(function(a){return b._queryResult.add(b._getFeatureId(a.graphic))});b._querying=!1}),
a.madeProgress()),this._queryResult&&!a.done&&(this._core.modifyGraphics3DGraphicVisibilities(function(c){if(a.done)return!1;var d=b._queryResult.has(b._getFeatureId(c.graphic));return c.setVisibilityFlag(2,d,0)?(a.madeProgress(),!0):!1}),a.done||(this._queryResult=null)),this.notifyChange("updating")):this.clear()};h.prototype._getFeatureId=function(a){return null==a.objectId?a.attributes[this._objectIdField]:a.objectId};Object.defineProperty(h.prototype,"dirty",{set:function(a){this._dirty!==a&&
(this._dirty=a,this.notifyChange("updating"))},enumerable:!0,configurable:!0});l([c.property({readOnly:!0})],h.prototype,"updating",null);return h=l([c.subclass("esri.views.3d.layers.graphics.Graphics3DFilterVisibility")],h)}(c.declared(k));d.Graphics3DFilterVisibility=r})},"esri/views/3d/layers/graphics/QueryEngine":function(){define("require exports ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../geometry ../../../../core/Accessor ../../../../core/maybe ../../../../core/accessorSupport/decorators ../../../../geometry/Extent ../../../../layers/graphics/data/QueryEngine ../../../../tasks/support/FeatureSet ../../../../tasks/support/Query".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){Object.defineProperty(d,"__esModule",{value:!0});var v=a.default;r=function(a){function d(b){b=a.call(this)||this;b._dataQueryEngineInstance=null;return b}l(d,a);Object.defineProperty(d.prototype,"queryGeometryType",{get:function(){switch(this.layer.geometryType){case "multipoint":case "point":case "polygon":case "polyline":return this.layer.geometryType;case "mesh":return"polygon"}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"defaultQueryJSON",
{get:function(){return(new q({outSpatialReference:this.spatialReference})).toJSON()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"dataQueryEngine",{get:function(){return this.ensureDataQueryEngine()},enumerable:!0,configurable:!0});d.prototype.destroy=function(){this.clear()};d.prototype.clear=function(){return this._dataQueryEngineInstance?(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0):!1};d.prototype.executeQueryForIdSet=function(a,c){return b(this,
void 0,void 0,function(){return k(this,function(b){return[2,this.dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(a),c)]})})};d.prototype.executeQueryForCount=function(a,c){return b(this,void 0,void 0,function(){return k(this,function(b){return[2,this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(a),c)]})})};d.prototype.executeQueryForExtent=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,g;return k(this,function(h){switch(h.label){case 0:return[4,this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(a),
c)];case 1:return b=h.sent(),d=b.count,e=b.extent,g=f.fromJSON(e),[2,{count:d,extent:g}]}})})};d.prototype.executeQueryForIds=function(a,c){return b(this,void 0,void 0,function(){return k(this,function(b){return[2,this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(a),c)]})})};d.prototype.executeQuery=function(a,c){return b(this,void 0,void 0,function(){var b,d,e=this;return k(this,function(f){switch(f.label){case 0:return[4,this.dataQueryEngine.executeQuery(this._ensureQueryJSON(a),c)];
case 1:return b=f.sent(),d=p.fromJSON(b),d.features.forEach(function(a){a.layer=e.layer;a.sourceLayer=e.layer}),[2,d]}})})};d.prototype._ensureQueryJSON=function(a){if(e.isNone(a))return this.defaultQueryJSON;"outSpatialReference"in a&&!a.outSpatialReference&&(a.outSpatialReference=this.spatialReference);return a.toJSON()};d.prototype.ensureDataQueryEngine=function(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;var a="timeInfo"in this.layer&&this.layer.timeInfo&&this.layer.timeInfo.toJSON()||
null,b=this.layer.objectIdField,c=h.featureGeometryTypeKebabDictionary.toJSON(this.queryGeometryType),d=this.layer.fields.map(function(a){return a.toJSON()}),e=this.layerView.view.resourceController.scheduler,f=this.priority,g=this.spatialReference.toJSON(),k=this.layerView;return this._dataQueryEngineInstance=new v({hasZ:k.hasZ,hasM:k.hasM,geometryType:c,fields:d,timeInfo:a,spatialReference:g,objectIdField:b,featureStore:this.layerView.graphics3d.graphicsCore.featureStore,scheduler:e,priority:f})};
n([c.property({constructOnly:!0})],d.prototype,"layerView",void 0);n([c.property({constructOnly:!0})],d.prototype,"priority",void 0);n([c.property({readOnly:!0,aliasOf:"layerView.view.spatialReference"})],d.prototype,"spatialReference",void 0);n([c.property({readOnly:!0,aliasOf:"layerView.layer"})],d.prototype,"layer",void 0);n([c.property({readOnly:!0,dependsOn:["layer.geometryType"]})],d.prototype,"queryGeometryType",null);n([c.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,
"defaultQueryJSON",null);return d=n([c.subclass("esri.views.3d.layers.graphics.QueryEngine")],d)}(c.declared(g));d.QueryEngine=r;d.default=r})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L){Object.defineProperty(d,"__esModule",{value:!0});var K=f.getLogger("esri.layers.graphics.data.QueryEngine");r=function(){return function(a,b,c,d,e){this.attributes=a;this.localId=b;this.geometry=c;this.centroid=d;this.filterFlags=e}}();d.Feature=r;var O=new g.default,I=new a.MemCacheStorage(2E6),H=0;r=function(){function d(b){var c=this;this.capabilities={query:z.queryCapabilities};this.geometryType=b.geometryType;this.hasM=b.hasM;
this.hasZ=b.hasZ;this.objectIdField=b.objectIdField;this.spatialReference=b.spatialReference;this.definitionExpression=b.definitionExpression;this.cacheSpatialQueries=b.cacheSpatialQueries||!1;this.gdbVersion=b.gdbVersion;this.historicMoment=b.historicMoment;this.featureStore=b.featureStore;this._changeHandle=this.featureStore.events.on("changed",function(){return c.clearCache()});this.timeInfo=b.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new a.MemCache(H++ +"$$",I));this.fieldsIndex=
new N(b.fields);b.scheduler&&b.priority&&(this._frameQueue=new L.PromiseQueue,this._frameTask=b.scheduler.registerTask(b.priority,function(a){return c._update(a)},function(){return 0<c._frameQueue.length}))}d.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=
null);this.fieldsIndex.destroy()};Object.defineProperty(d.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullExtent",{get:function(){var a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:E.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"timeExtent",{get:function(){return this.timeInfo?
this._timeExtent?this._timeExtent:this._timeExtent=F.getTimeExtent(this.timeInfo,this.featureStore):null},enumerable:!0,configurable:!0});d.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};d.prototype.executeQuery=function(a,b){void 0===a&&(a={});return k(this,void 0,void 0,function(){var b,d,e;return l(this,function(f){switch(f.label){case 0:b=c.clone(a),f.label=1;case 1:return f.trys.push([1,13,,14]),[4,E.normalizeQuery(b,
this.definitionExpression,this.spatialReference)];case 2:return b=f.sent(),[4,this._reschedule()];case 3:return f.sent(),[4,this._checkQuerySupport(b)];case 4:return b=f.sent(),[4,this._reschedule()];case 5:return f.sent(),[4,this._executeGeometryQuery(b)];case 6:return d=f.sent(),[4,this._reschedule()];case 7:return f.sent(),[4,d.executeObjectIdsQuery(b)];case 8:return d=f.sent(),[4,this._reschedule()];case 9:return f.sent(),[4,d.executeTimeQuery(b)];case 10:return d=f.sent(),[4,this._reschedule()];
case 11:return f.sent(),[4,d.executeAttributesQuery(b)];case 12:return d=f.sent(),[3,14];case 13:e=f.sent();if(e!==E.QUERY_ENGINE_EMPTY_RESULT)throw e;d=new B.default([],null,this);return[3,14];case 14:return[2,d.createQueryResponse(b)]}})})};d.prototype.executeQueryForCount=function(a,b){void 0===a&&(a={});return k(this,void 0,void 0,function(){var b,d,e;return l(this,function(f){switch(f.label){case 0:b=c.clone(a),b.returnGeometry=!1,b.returnCentroid=!1,b.outSR=null,f.label=1;case 1:return f.trys.push([1,
13,,14]),[4,E.normalizeQuery(b,this.definitionExpression,this.spatialReference)];case 2:return b=f.sent(),[4,this._reschedule()];case 3:return f.sent(),[4,this._checkQuerySupport(b)];case 4:return b=f.sent(),[4,this._reschedule()];case 5:return f.sent(),[4,this._executeGeometryQuery(b)];case 6:return d=f.sent(),[4,this._reschedule()];case 7:return f.sent(),[4,d.executeObjectIdsQuery(b)];case 8:return d=f.sent(),[4,this._reschedule()];case 9:return f.sent(),[4,d.executeTimeQuery(b)];case 10:return d=
f.sent(),[4,this._reschedule()];case 11:return f.sent(),[4,d.executeAttributesQuery(b)];case 12:return d=f.sent(),[2,d.size];case 13:e=f.sent();if(e!==E.QUERY_ENGINE_EMPTY_RESULT)throw e;return[2,0];case 14:return[2]}})})};d.prototype.executeQueryForExtent=function(a,b){void 0===a&&(a={});return k(this,void 0,void 0,function(){var b,d,e,f,g,h,k,m;return l(this,function(l){switch(l.label){case 0:b=c.clone(a),e=b.outSR,l.label=1;case 1:return l.trys.push([1,13,,14]),[4,E.normalizeQuery(b,this.definitionExpression,
this.spatialReference)];case 2:return b=l.sent(),[4,this._reschedule()];case 3:return l.sent(),[4,this._checkQuerySupport(b)];case 4:return b=l.sent(),b.returnGeometry=!0,b.returnCentroid=!1,b.outSR=null,[4,this._reschedule()];case 5:return l.sent(),[4,this._executeGeometryQuery(b)];case 6:return d=l.sent(),[4,this._reschedule()];case 7:return l.sent(),[4,d.executeObjectIdsQuery(b)];case 8:return d=l.sent(),[4,this._reschedule()];case 9:return l.sent(),[4,d.executeTimeQuery(b)];case 10:return d=l.sent(),
[4,this._reschedule()];case 11:return l.sent(),[4,d.executeAttributesQuery(b)];case 12:d=l.sent();f=d.size;if(!f)return[2,{count:f,extent:null}];v.set(P,v.NEGATIVE_INFINITY);this.featureStore.forEachBounds(d.items,function(a){return v.expand(P,a)},S);g={xmin:P[0],ymin:P[1],xmax:P[3],ymax:P[4],spatialReference:E.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(P[2])&&isFinite(P[5])&&(g.zmin=P[2],g.zmax=P[5]);h=u.project(g,d.spatialReference,e);h.spatialReference=E.cleanFromGeometryEngine(e||
this.spatialReference);0===h.xmax-h.xmin&&(k=q.getMetersPerUnitForSR(h.spatialReference),h.xmin-=k,h.xmax+=k);0===h.ymax-h.ymin&&(k=q.getMetersPerUnitForSR(h.spatialReference),h.ymin-=k,h.ymax+=k);this.hasZ&&null!=h.zmin&&null!=h.zmax&&0===h.zmax-h.zmin&&(k=q.getMetersPerUnitForSR(h.spatialReference),h.zmin-=k,h.zmax+=k);return[2,{count:f,extent:h}];case 13:m=l.sent();if(m===E.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw m;case 14:return[2]}})})};d.prototype.executeQueryForIds=
function(a,c){void 0===a&&(a={});return k(this,void 0,void 0,function(){return l(this,function(d){return[2,this.executeQueryForIdSet(a,c).then(function(a){return b.from(a)})]})})};d.prototype.executeQueryForIdSet=function(a,b){void 0===a&&(a={});return k(this,void 0,void 0,function(){var b,d,e,f,h,k,m,p;return l(this,function(l){switch(l.label){case 0:b=c.clone(a),b.returnGeometry=!1,b.returnCentroid=!1,b.outSR=null,l.label=1;case 1:return l.trys.push([1,12,,13]),[4,E.normalizeQuery(b,this.definitionExpression,
this.spatialReference)];case 2:return b=l.sent(),[4,this._reschedule()];case 3:return l.sent(),[4,this._executeGeometryQuery(b)];case 4:return d=l.sent(),[4,this._reschedule()];case 5:return l.sent(),[4,d.executeObjectIdsQuery(b)];case 6:return d=l.sent(),[4,this._reschedule()];case 7:return l.sent(),[4,d.executeTimeQuery(b)];case 8:return d=l.sent(),[4,this._reschedule()];case 9:return l.sent(),[4,d.executeAttributesQuery(b)];case 10:return d=l.sent(),[4,this._reschedule()];case 11:l.sent();e=d.items;
f=new g.default;h=0;for(k=e;h<k.length;h++)m=k[h],f.add(d.featureAdapter.getObjectId(m));return[2,f];case 12:p=l.sent();if(p===E.QUERY_ENGINE_EMPTY_RESULT)return[2,new g.default];throw p;case 13:return[2]}})})};d.prototype.executeQueryForLatestObservations=function(a,b){var c=this;if(this.timeInfo)return this.executeQuery(a,b).then(function(a){return c._filterLatest(a,c.timeInfo)});K.error(new e("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};d.prototype._reschedule=
function(a){return k(this,void 0,void 0,function(){return l(this,function(b){return this._frameQueue?[2,this._frameQueue.push(a).then(function(a){return a})]:[2,a]})})};d.prototype._update=function(a){for(this._budget=a;!a.done&&this._frameQueue&&this._frameQueue.process();)a.madeProgress();this._budget=null};d.prototype._filterLatest=function(a,b){var c=b.trackIdField,d=b.startTimeField;b=b.endTimeField||d;for(var d=new h.default,e=[],f=0,g=a.features;f<g.length;f++){var k=g[f],l=k.attributes[c],
m=k.attributes[b];(!d.has(l)||d.get(l).attributes[b]<m)&&d.set(l,k)}d.forEach(function(a){return e.push(a)});return n({},a,{features:e})};d.prototype._getAll=function(){if(!this._allItems){var a=[];this.featureStore.forEach(function(b){return a.push(b)});this._allItems=new B.default(a,null,this)}return this._allItems};d.prototype._executeGeometryQuery=function(a){return k(this,void 0,void 0,function(){var b,c,d,e,f,h,m,p,n,u,q,t,z,r,v,x,y,E,F,I,N,H,O,K,L=this;return l(this,function(G){switch(G.label){case 0:b=
a.geometry;c=a.outSR;d=a.spatialRel;e=w.isValid(c)&&!w.equals(this.spatialReference,c);if(f=this.cacheSpatialQueries?e?JSON.stringify({geometry:b,spatialRelationship:d,outSpatialReference:c}):JSON.stringify({geometry:b,spatialRelationship:d}):null)if(h=this._geometryQueryCache.get(f),void 0!==h)return[2,h];m=function(b){return k(L,void 0,void 0,function(){var d;return l(this,function(g){switch(g.label){case 0:return e&&(a.returnGeometry||a.returnCentroid)?[4,b.project(c)]:[3,2];case 1:return d=g.sent(),
f&&this._geometryQueryCache.put(f,d,d.size||1),[2,d];case 2:return f&&this._geometryQueryCache.put(f,b,b.size||1),[2,b]}})})};if(!b)return[2,m(this._getAll())];p=this.featureAdapter;if("esriSpatialRelDisjoint"!==d)return[3,5];n=this._searchFeatures(this._getQueryBBoxes(b));if(!n.length)return[2,m(this._getAll())];t=new g.default;z=0;for(r=n;z<r.length;z++)v=r[z],t.add(p.getObjectId(v));return[4,this._reschedule(t)];case 1:return t=G.sent(),x=0,u=Array(t.size),this.featureStore.forEach(function(a){return u[x++]=
a}),q=t,[4,this._reschedule()];case 2:return G.sent(),[4,C.getSpatialQueryOperator(d,b,this)];case 3:return y=G.sent(),E=function(a){return!q.has(p.getObjectId(a))||y(p.getGeometry(a))},I=B.default.bind,[4,this._runSpatialFilter(u,E)];case 4:return F=new (I.apply(B.default,[void 0,G.sent(),b,this])),[2,m(F)];case 5:return N=this._searchFeatures(this._getQueryBBoxes(b)),N.length?(H=this._canExecuteSoloPass(b,a))?[2,m(new B.default(N,b,this))]:[4,C.getSpatialQueryOperator(d,b,this)]:(F=new B.default([],
b,this),f&&this._geometryQueryCache.put(f,F,F.size||1),[2,F]);case 6:return O=G.sent(),[4,this._runSpatialFilter(N,function(a){return O(p.getGeometry(a))})];case 7:return K=G.sent(),[2,m(new B.default(K,b,this))]}})})};d.prototype._runSpatialFilter=function(a,b){return k(this,void 0,void 0,function(){var c,d,e,f=this;return l(this,function(g){if(!b)return[2,a];if(!this._budget)return[2,a.filter(function(a){return b(a)})];c=0;d=[];e=function(){return k(f,void 0,void 0,function(){var f;return l(this,
function(g){switch(g.label){case 0:if(!(c<a.length))return[3,3];f=a[c];b(f)&&d.push(f);return this._budget.done?[4,this._reschedule()]:[3,2];case 1:return g.sent(),[2,e()];case 2:return++c,[3,0];case 3:return[2]}})})};return[2,this._reschedule().then(function(){return e()}).then(function(){return d})]})})};d.prototype._canExecuteSoloPass=function(a,b){var c=this.geometryType;b=b.spatialRel;return C.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===b||"esriGeometryPoint"===c&&("esriSpatialRelIntersects"===
b||"esriSpatialRelContains"===b||"esriSpatialRelWithin"===b))};d.prototype._getQueryBBoxes=function(a){if(C.canQueryWithRBush(a)){if(x.isExtent(a))return[t.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(x.isPolygon(a))return a.rings.map(function(a){return t.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}return[y.getBoundsXY(t.create(),a)]};d.prototype._searchFeatures=function(a){for(var b=0;b<a.length;b++)this.featureStore.forEachInBounds(a[b],function(a){O.add(a)});var c=Array(O.size),d=0;O.forEach(function(a){return c[d++]=
a});O.clear();return c};d.prototype._checkQuerySupport=function(a){return k(this,void 0,void 0,function(){return l(this,function(b){if(0>a.distance||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text)throw new e("feature-store:unsupported-query","Unsupported query options",{query:a});return[2,p.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),C.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),u.checkProjectionSupport(this.spatialReference,
a.outSR)]).then(function(){return a})]})})};d.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,d=a.returnDistinctValues;c&&0<c.length&&(c=c.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),m.validateFields(this.fieldsIndex,c,"orderByFields contains missing fields"));if(b&&0<b.length)m.validateFields(this.fieldsIndex,b,"outFields contains missing fields");else if(d)throw new e("feature-store:unsupported-query",
"outFields should be specified for returnDistinctValues",{query:a});m.validateWhere(this.fieldsIndex,a.where)};d.prototype._checkStatisticsQuerySupport=function(a){return k(this,void 0,void 0,function(){var b,c,d,f,g,h,k,p,n,u,q,t;return l(this,function(l){b=a.outStatistics;c=a.groupByFieldsForStatistics;d=a.having;f=c&&c.length;g=b&&b.length;if(d){if(!f||!g)throw new e("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a});m.validateHaving(this.fieldsIndex,
d,b)}if(g){if(h=b.some(function(a){return"exceedslimit"===a.statisticType}))return[2];k=b.map(function(a){return a.onStatisticField});m.validateFields(this.fieldsIndex,k,"onStatisticFields contains missing fields");f&&m.validateFields(this.fieldsIndex,c,"groupByFieldsForStatistics contains missing fields");p=0;for(n=b;p<n.length;p++){u=n[p];q=u.onStatisticField;t=u.statisticType;if("exceedslimit"===t)throw new e("feature-store:unsupported-query","statistic type exceedslimit is not supported",{definition:u,
query:a});if((!f||"count"!==t)&&q&&m.hasInvalidFieldType(q,this.fieldsIndex))throw new e("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:u,query:a});}}return[2]})})};return d}();d.default=r;var S=v.create(),P=v.create()})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../core/Error ../../../core/sql/WhereClauseCache".split(" "),function(r,d,n,l,k,b){function h(a,
b){return a?c.get(a,b):null}function g(a,b,c,d){void 0===d&&(d=!0);for(var f=[],l=0;l<b.length;l++){var p=b[l];if("*"!==p&&!a.has(p))if(d){var n=e(p);try{var m=h(n,a);if(!m)throw new k("feature-store:unsupported-query","invalid SQL expression",{where:n});if(!m.isStandardized)throw new k("feature-store:unsupported-query","expression is not standard",{clause:m});g(a,m.fieldNames,"expression contains missing fields")}catch(u){if((n=u&&u.details)&&(n.clause||n.where))throw u;n&&n.missingFields?f.push.apply(f,
n.missingFields):f.push(p)}}else f.push(p)}if(f.length)throw new k("feature-store:unsupported-query",c,{missingFields:f});}function e(a){return a.split(" as ")[0]}Object.defineProperty(d,"__esModule",{value:!0});var c=new b.WhereClauseCache(50,500),f=new l.default("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));d.validateWhere=function(a,b){if(!b)return!0;var d=c.get(b,a);if(!d)throw new k("feature-store:unsupported-query",
"invalid SQL expression",{where:b});if(!d.isStandardized)throw new k("feature-store:unsupported-query","where clause is not standard",{where:b});g(a,d.fieldNames,"where clause contains missing fields");return!0};d.validateHaving=function(a,b,d){if(!b)return!0;var e=c.get(b,a);if(!e)throw new k("feature-store:unsupported-query","invalid SQL expression",{having:b});if(!e.isAggregate)throw new k("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:b});g(a,e.fieldNames,
"having contains missing fields");if(!e.getExpressions().every(function(b){var c=b.aggregateType;b=b.field;var e=a.has(b)&&a.get(b).name;return d.some(function(b){var d=b.onStatisticField;b=b.statisticType;return(a.has(d)&&a.get(d).name)===e&&b.toLowerCase().trim()===c})}))throw new k("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:b});return!0};d.getWhereClause=h;d.validateFields=g;d.getExpressionFromFieldName=e;d.getAliasFromFieldName=function(a){return a.split(" as ")[1]};
d.hasInvalidFieldType=function(a,b){return(a=b.get(a))?!f.has(a.type):!1}})},"esri/core/sql/WhereClauseCache":function(){define(["require","exports","../ItemCache","./WhereClause"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,d){this._cache=new n(b);this._invalidCache=new n(d)}d.prototype.get=function(b,d){var g=d.uid+":"+b,e=this._cache.get(g);if(e)return e;if(void 0!==this._invalidCache.get(g))return null;try{var c=l.WhereClause.create(b,d);this._cache.put(g,
c);return c}catch(f){return this._invalidCache.put(g,null),null}};return d}();d.WhereClauseCache=r})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(r,d,n,l,k,b,h,g){function e(a,b){a+="";return a.length>=b?a:Array(b-a.length+1).join("0")+a}function c(a,b,c,d,f,g,h,k,l){void 0===c&&(c="0");void 0===d&&(d="0");void 0===f&&(f="0");void 0===g&&(g=
"0");void 0===h&&(h="");void 0===k&&(k="0");void 0===l&&(l="0");return"+"===h||"-"===h?(a=e(parseInt(a,10),4)+"-"+e(parseInt(b,10),2)+"-"+e(parseInt(c,10),2),b="",10>parseFloat(g)&&(b="0"),d=e(parseInt(d,10),2)+":"+e(parseInt(f,10),2)+":"+(b+parseFloat(g).toString()),h=""+h+e(parseInt(k,10),2)+":"+e(parseInt(l,10),2),new Date(a+"T"+d+h)):new Date(parseInt(a,10),parseInt(b,10),parseInt(c,10),parseInt(d,10),parseInt(f,10),parseFloat(g))}function f(a){var b=F.exec(a);if(null!==b){a=b[1];var d=b[2],e=
b[3],f=b[4],g=b[5],h=b[6];return c(a,d,e,f,g,h)}b=E.exec(a);if(null!==b){a=b[1];var d=b[2],e=b[3],f=b[4],g=b[5],h=b[6],k=b[7],l=b[8],b=b[9];return c(a,d,e,f,g,h,k,l,b)}b=N.exec(a);if(null!==b)return a=b[1],d=b[2],e=b[3],f=b[4],g=b[5],k=b[6],l=b[7],b=b[8],c(a,d,e,f,g,"0",k,l,b);b=L.exec(a);if(null!==b)return a=b[1],d=b[2],e=b[3],f=b[4],g=b[5],c(a,d,e,f,g);b=C.exec(a);if(null!==b)return a=b[1],d=b[2],e=b[3],c(a,d,e);throw Error("SQL Invalid Timestamp");}function a(a){a=C.exec(a);if(null===a)throw Error("SQL Invalid Date");
var b=a[2],c=a[3];return new Date(parseInt(a[1],10),parseInt(b,10)-1,parseInt(c,10))}function p(a){return Array.isArray(a)?a:[a]}function q(a){return null!==a?!0!==a:null}function v(a,b){return null!=a&&null!=b?!0===a&&!0===b:!1===a||!1===b?!1:null}function t(a,b){return null!=a&&null!=b?!0===a||!0===b:!0===a||!0===b?!0:null}function y(a,b){if(null==a)return null;for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function x(a,b,c){if(null==a)return null;
for(var d="",e=0,f=0;f<b.length;f++){var g=b.charAt(f);switch(e){case 0:g===c?e=1:d=0<="-[]/{}()*+?.\\^$|".indexOf(g)?d+("\\"+g):"%"===g?d+".*":"_"===g?d+".":d+g;break;case 1:d=0<="-[]/{}()*+?.\\^$|".indexOf(g)?d+("\\"+g):d+g,e=0}}return(new RegExp("^"+d+"$")).test(a)}function w(a){return a instanceof Date?a.valueOf():a}function m(a,b,c){if(null==b||null==c)return null;b=w(b);c=w(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=
c;case "\x3c\x3d":return b<=c}}function u(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e.toLowerCase();void 0===c[f]&&(b.push(e),c[f]=1)}return b}function z(a,b,c){if(b instanceof h.SqlInterval)if(c instanceof Date)switch(a){case "+":return new Date(b.valueInMilliseconds()+c.getTime());case "-":return b.valueInMilliseconds()-c.getTime();case "*":return b.valueInMilliseconds()*c.getTime();case "/":return b.valueInMilliseconds()/c.getTime()}else if(c instanceof h.SqlInterval)switch(a){case "+":return h.SqlInterval.createFromMilliseconds(b.valueInMilliseconds()+
c.valueInMilliseconds());case "-":return h.SqlInterval.createFromMilliseconds(b.valueInMilliseconds()-c.valueInMilliseconds());case "*":return b.valueInMilliseconds()*c.valueInMilliseconds();case "/":return b.valueInMilliseconds()/c.valueInMilliseconds()}else b=b.valueInMilliseconds();else if(c instanceof h.SqlInterval)if(b instanceof Date)switch(a){case "+":return new Date(c.valueInMilliseconds()+b.getTime());case "-":return new Date(b.getTime()-c.valueInMilliseconds());case "*":return b.getTime()*
c.valueInMilliseconds();case "/":return b.getTime()/c.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(b instanceof Date&&"number"===typeof c)switch(c*=864E5,b=b.getTime(),a){case "+":return new Date(b+c);case "-":return new Date(b-c);case "*":return new Date(b*c);case "/":return new Date(b/c)}else if(c instanceof Date&&"number"===typeof b)switch(b*=864E5,c=c.getTime(),a){case "+":return new Date(b+c);case "-":return new Date(b-c);case "*":return new Date(b*c);case "/":return new Date(b/
c)}switch(a){case "+":return b+c;case "-":return b-c;case "*":return b*c;case "/":return b/c}}function B(a,b,c,d){a=d.getAttribute(a,b);return null!=a&&1===c[b]?new Date(a):a}Object.defineProperty(d,"__esModule",{value:!0});var C=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,
L=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,K=function(){function a(){}a.makeBool=function(a){return!0===a};a.featureValue=function(a,b,c,d){return B(a,b,c,d)};a.equalsNull=function(a){return null===a};a.applyLike=function(a,b,c){return x(a,b,c)};a.ensureArray=function(a){return p(a)};a.applyIn=function(a,b){return y(a,b)};a.currentDate=function(){var a=new Date;a.setHours(0,0,0,0);return a};a.makeSqlInterval=function(a,b,c){return h.SqlInterval.createFromValueAndQualifer(a,b,c)};a.convertInterval=
function(a){return a instanceof h.SqlInterval?a.valueInMilliseconds():a};a.currentTimestamp=function(){return new Date};a.compare=function(a,b,c){return m(a,b,c)};a.calculate=function(a,b,c){return z(a,b,c)};a.makeComparable=function(a){return w(a)};a.evaluateFunction=function(a,b){return h.evaluateFunction(a,b)};a.lookup=function(a,b){a=b[a];return void 0===a?null:a};a.between=function(a,b){return null==a||null==b[0]||null==b[1]?null:a>=b[0]&&a<=b[1]};a.notbetween=function(a,b){return null==a||null==
b[0]||null==b[1]?null:a<b[0]||a>b[1]};a.ternaryNot=function(a){return q(a)};a.ternaryAnd=function(a,b){return v(a,b)};a.ternaryOr=function(a,b){return t(a,b)};return a}();r=function(){function c(a,b){this.fieldsIndex=b;this.datefields={};this.parameters={};this.parseTree=g.WhereGrammar.parse(a);a=this.extractExpressionInfo(b);b=a.isStandardized;var c=a.isAggregate;this.referencedFieldNames=a.referencedFieldNames;this.isStandardized=b;this.isAggregate=c}c.create=function(a,b){return new c(a,b)};Object.defineProperty(c.prototype,
"fieldNames",{get:function(){return this.referencedFieldNames},enumerable:!0,configurable:!0});c.prototype.testSet=function(a,b){void 0===b&&(b=d.defaultAttributeAdapter);for(var c={},e=function(d){c[d]=a.map(function(a){return b.getAttribute(a,d)})},f=0,g=this.fieldNames;f<g.length;f++)e(g[f]);return!!this.evaluateNode(this.parseTree,{attributes:c},d.defaultAttributeAdapter)};c.prototype.calculateValue=function(a,b){void 0===b&&(b=d.defaultAttributeAdapter);a=this.evaluateNode(this.parseTree,a,b);
return a instanceof h.SqlInterval?a.valueInMilliseconds()/864E5:a};c.prototype.calculateValueCompiled=function(a,b){void 0===b&&(b=d.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(a,this.parameters,b,this.datefields);if(k("csp-restrictions"))return this.calculateValue(a,b);this.compileMe();return this.parseTree._compiledVersion(a,this.parameters,b,this.datefields)};c.prototype.testFeature=function(a,b){void 0===b&&(b=d.defaultAttributeAdapter);
return!!this.evaluateNode(this.parseTree,a,b)};c.prototype.testFeatureCompiled=function(a,b){void 0===b&&(b=d.defaultAttributeAdapter);if(void 0===this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(a,this.parameters,b,this.datefields);if(k("csp-restrictions"))return this.testFeature(a,b);this.compileMe();return!!this.parseTree._compiledVersion(a,this.parameters,b,this.datefields)};c.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===
b.type&&a.push(b.name.toLowerCase())});return u(a)};c.prototype.getExpressions=function(){var a=new l.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var d=c+"-"+b;a.has(d)||a.set(d,{aggregateType:c,field:b})}}});return n.from(a.values())};c.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return u(a)};c.prototype.compileMe=
function(){var a="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",a)).bind(K)};c.prototype.extractExpressionInfo=function(a){var c=this,d=[],e=!0,f=!0;this.visitAll(this.parseTree,function(g){switch(g.type){case "column_ref":var k=g.column.toUpperCase();if("CURRENT_DATE"!==k&&"CURRENT_TIMESTAMP"!==k){var l=(k=a.get(g.column))&&k.name;!k||"date"!==k.type&&"esriFieldTypeDate"!==
k.type||(c.datefields[k.name]=1);void 0!==l?(d.push(l),g.column=l):d.push(g.column)}break;case "function":k=g.name,g=g.args.value.length,e&&(e=h.isStandardized(k,g)),f&&(f=b.isAggregate(k,g))}});return{referencedFieldNames:u(d),isStandardized:e,isAggregate:f}};c.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,d=a.clauses;c<d.length;c++){var e=d[c];this.visitAll(e,b)}"simple"===
a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};c.prototype.evaluateNodeToJavaScript=function(b){switch(b.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(b.value)+", "+JSON.stringify(b.qualifier)+
","+JSON.stringify(b.op)+")";case "case_expression":var c="";if("simple"===b.format)for(var d="this.makeComparable("+this.evaluateNodeToJavaScript(b.operand)+")",c="( ",e=0;e<b.clauses.length;e++)c+=" ("+d+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(b.clauses[e].operand)+")) ? ("+this.evaluateNodeToJavaScript(b.clauses[e].value)+") : ";else for(c="( ",e=0;e<b.clauses.length;e++)c+=" this.makeBool("+this.evaluateNodeToJavaScript(b.clauses[e].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(b.clauses[e].value)+") : ";c=null!==b.else?c+this.evaluateNodeToJavaScript(b.else):c+"null";return c+" )";case "param":return"this.lookup("+JSON.stringify(b.value.toLowerCase())+",lookups)";case "expr_list":c="[";d=0;for(b=b.value;d<b.length;d++)e=b[d],"["!==c&&(c+=","),c+=this.evaluateNodeToJavaScript(e);return c+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(b.expr)+")";case "binary_expr":switch(b.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+" )";case "IS":if("null"!==b.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(b.left)+")";case "ISNOT":if("null"!==b.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(b.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(b.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(b.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(b.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(b.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+","+JSON.stringify(b.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+","+JSON.stringify(b.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(b.operator)+","+this.evaluateNodeToJavaScript(b.left)+","+
this.evaluateNodeToJavaScript(b.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(b.operator)+","+this.evaluateNodeToJavaScript(b.left)+","+this.evaluateNodeToJavaScript(b.right)+")"}throw Error("Not Supported Operator "+b.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(b.value);case "date":return"(new Date("+a(b.value).getTime().toString()+"))";case "timestamp":return"(new Date("+f(b.value).getTime().toString()+"))";case "column_ref":return"CURRENT_DATE"===
b.column.toUpperCase()?"this.currentDate()":"CURRENT_TIMESTAMP"===b.column.toUpperCase()?"this.currentTimestamp()":"this.featureValue(feature,"+JSON.stringify(b.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(b.name)+","+this.evaluateNodeToJavaScript(b.args)+")"}throw Error("Unsupported sql syntax "+b.type);};c.prototype.evaluateNode=function(c,d,e){switch(c.type){case "interval":return d=this.evaluateNode(c.value,d,e),h.SqlInterval.createFromValueAndQualifer(d,
c.qualifier,c.op);case "case_expression":if("simple"===c.format)for(var g=w(this.evaluateNode(c.operand,d,e)),k=0;k<c.clauses.length;k++){if(g===w(this.evaluateNode(c.clauses[k].operand,d,e)))return this.evaluateNode(c.clauses[k].value,d,e)}else for(k=0;k<c.clauses.length;k++)if(!0===this.evaluateNode(c.clauses[k].operand,d,e))return this.evaluateNode(c.clauses[k].value,d,e);return null!==c.else?this.evaluateNode(c.else,d,e):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":g=
[];k=0;for(c=c.value;k<c.length;k++){var l=c[k];g.push(this.evaluateNode(l,d,e))}return g;case "unary_expr":return q(this.evaluateNode(c.expr,d,e));case "binary_expr":switch(c.operator){case "AND":return v(this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e));case "OR":return t(this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(c.left,d,e);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");
return null!==this.evaluateNode(c.left,d,e);case "IN":return g=p(this.evaluateNode(c.right,d,e)),y(this.evaluateNode(c.left,d,e),g);case "NOT IN":return g=p(this.evaluateNode(c.right,d,e)),q(y(this.evaluateNode(c.left,d,e),g));case "BETWEEN":return g=this.evaluateNode(c.left,d,e),c=this.evaluateNode(c.right,d,e),null==g||null==c[0]||null==c[1]?null:g>=w(c[0])&&g<=w(c[1]);case "NOTBETWEEN":return g=this.evaluateNode(c.left,d,e),c=this.evaluateNode(c.right,d,e),null==g||null==c[0]||null==c[1]?null:
g<w(c[0])||g>w(c[1]);case "LIKE":return x(this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e),c.escape);case "NOT LIKE":return q(x(this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e),c.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return m(c.operator,this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e));case "-":case "+":case "*":case "/":return z(c.operator,this.evaluateNode(c.left,d,e),this.evaluateNode(c.right,d,e))}throw Error("Not Supported Operator "+
c.operator);case "null":case "bool":case "string":case "number":return c.value;case "date":return a(c.value);case "timestamp":return f(c.value);case "column_ref":return"CURRENT_DATE"===c.column.toUpperCase()?(l=new Date,l.setHours(0,0,0,0),l):"CURRENT_TIMESTAMP"===c.column.toUpperCase()?new Date:B(d,c.column,this.datefields,e);case "function":return d=this.evaluateNode(c.args,d,e),this.isAggregate?b.aggregateFunction(c.name,d):h.evaluateFunction(c.name,d)}throw Error("Unsupported sql syntax "+c.type);
};return c}();d.WhereClause=r;d.defaultAttributeAdapter={getAttribute:function(a,b){return(a&&"object"===typeof a.attributes?a.attributes:a)[b]}}})},"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(r,d){function n(b){for(var d=0,g=0;g<b.length;g++)d+=b[g];return d/b.length}function l(b){for(var d=n(b),g=b.length,e=0,c=0;c<b.length;c++)e+=Math.pow(b[c]-d,2);return 1<g?e/(g-1):0}Object.defineProperty(d,"__esModule",{value:!0});d.aggregateFunction=function(b,d){var g=
k[b.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(d.length<g.minParams||d.length>g.maxParams)throw Error("Invalid Parameter count for call to "+b.toUpperCase());return g.evaluate(d)};d.isAggregate=function(b,d){b=k[b.toLowerCase()];return null!=b&&d>=b.minParams&&d<=b.maxParams};var k={min:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:Math.min.apply(Math,b[0])}},max:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:Math.max.apply(Math,
b[0])}},avg:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:n(b[0])}},sum:{minParams:1,maxParams:1,evaluate:function(b){if(null==b[0])b=null;else{b=b[0];for(var d=0,g=0;g<b.length;g++)d+=b[g];b=d}return b}},stddev:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:Math.sqrt(l(b[0]))}},count:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:b[0].length}},var:{minParams:1,maxParams:1,evaluate:function(b){return null==b[0]?null:l(b[0])}}}})},
"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}d.fixDefaults=function(b){if(null!==b.precision||null!==b.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};d.createFromMilliseconds=function(b){var h=new d;h.second=b/1E3;return h};d.createFromValueAndQualifer=
function(b,h,g){var e=null,c=new d;c.op="-"===g?"-":"+";if("interval-period"===h.type){d.fixDefaults(h);if("year"===h.period||"month"===h.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(b))c[h.period]=parseFloat(b);else throw Error("Illegal Interval");}else{d.fixDefaults(h.start);d.fixDefaults(h.end);if("year"===h.start.period||"month"===h.start.period)throw Error("Year-Month Intervals not supported");if("year"===h.end.period||"month"===h.end.period)throw Error("Year-Month Intervals not supported");
switch(h.start.period){case "day":switch(h.end.period){case "hour":e=/^[0-9]{1,} [0-9]{1,}$/;if(e.test(b))c[h.start.period]=parseFloat(b.split(" ")[0]),c[h.end.period]=parseFloat(b.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":e=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(e.test(b))c[h.start.period]=parseFloat(b.split(" ")[0]),b=b.split(" ")[1].split(":"),c.hour=parseFloat(b[0]),c.minute=parseFloat(b[1]);else throw Error("Illegal Interval");break;case "second":e=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(e.test(b))c[h.start.period]=parseFloat(b.split(" ")[0]),b=b.split(" ")[1].split(":"),c.hour=parseFloat(b[0]),c.minute=parseFloat(b[1]),c.second=parseFloat(b[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(h.end.period){case "minute":e=/^[0-9]{1,}:[0-9]{1,}$/;if(e.test(b))c.hour=parseFloat(b.split(":")[0]),c.minute=parseFloat(b.split(":")[1]);else throw Error("Illegal Interval");break;case "second":e=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(e.test(b))b=b.split(":"),c.hour=parseFloat(b[0]),c.minute=parseFloat(b[1]),c.second=parseFloat(b[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(h.end.period){case "second":e=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(e.test(b))b=b.split(":"),c.minute=parseFloat(b[0]),c.second=parseFloat(b[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return c};d.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return d}();d.SqlInterval=r;d.evaluateFunction=function(d,b){var h=l[d.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(b.length<h.minParams||b.length>h.maxParams)throw Error("Invalid Parameter count for call to "+d.toUpperCase());return h.evaluate(b)};d.isStandardized=function(d,b){d=l[d.toLowerCase()];return null!=d&&b>=d.minParams&&
b<=d.maxParams};var l={extract:{minParams:2,maxParams:2,evaluate:function(d){var b=d[0];d=d[1];if(null==d)return null;if(d instanceof Date)switch(b.toUpperCase()){case "SECOND":return d.getSeconds();case "MINUTE":return d.getMinutes();case "HOUR":return d.getHours();case "DAY":return d.getDate();case "MONTH":return d.getMonth()+1;case "YEAR":return d.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(d){if(2===d.length){var b=
d[0],h=d[1];return null==b||null==h?null:b.toString().substring(h-1)}if(3===d.length)return b=d[0],h=d[1],d=d[2],null==b||null==h||null==d?null:0>=d?"":b.toString().substring(h-1,h+d-1)}},position:{minParams:2,maxParams:2,evaluate:function(d){var b=d[0];d=d[1];return null==b||null==d?null:d.indexOf(b)+1}},trim:{minParams:2,maxParams:3,evaluate:function(d){var b=3===d.length,h=b?d[1]:" ",b=b?d[2]:d[1];if(null==h||null==b)return null;h="("+n.escapeString(h)+")";switch(d[0]){case "BOTH":return b.replace(new RegExp("^"+
h+"*|"+h+"*$","g"),"");case "LEADING":return b.replace(new RegExp("^"+h+"*","g"),"");case "TRAILING":return b.replace(new RegExp(h+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.abs(d[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.ceil(d[0])}},floor:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.floor(d[0])}},log:{minParams:1,maxParams:1,
evaluate:function(d){return null==d[0]?null:Math.log(d[0])}},log10:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sin(d[0])}},cos:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.cos(d[0])}},tan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.tan(d[0])}},asin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?
null:Math.asin(d[0])}},acos:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.acos(d[0])}},atan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.atan(d[0])}},sign:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:0<d[0]?1:0>d[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:Math.pow(d[0],d[1])}},mod:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:d[0]%
d[1]}},round:{minParams:1,maxParams:2,evaluate:function(d){var b=d[0];d=2===d.length?Math.pow(10,d[1]):1;return null==b?null:Math.round(b*d)/d}},truncate:{minParams:1,maxParams:2,evaluate:function(d){return null==d[0]?null:1===d.length?parseInt(d[0].toFixed(0),10):parseFloat(d[0].toFixed(d[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(d){return"string"===typeof d[0]||d[0]instanceof String?d[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(d){for(var b="",h=0;h<
d.length;h++){if(null==d[h])return null;b+=d[h].toString()}return b}},lower:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){}d.parse=function(d){return n.parse(d)};
return d}();d.WhereGrammar=r})},"esri/core/sql/sql92grammar":function(){define([],function(){function r(d,n,l,k){this.message=d;this.expected=n;this.found=l;this.location=k;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}(function(d,n){function l(){this.constructor=d}l.prototype=n.prototype;d.prototype=new l})(r,Error);r.buildMessage=function(d,n){function l(b){return b.charCodeAt(0).toString(16).toUpperCase()}function k(b){return b.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+l(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+l(b)})}function b(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+l(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(b){return"\\x"+l(b)})}var h={literal:function(b){return'"'+k(b.text)+'"'},"class":function(d){var e="",c;for(c=0;c<d.parts.length;c++)e+=d.parts[c]instanceof Array?b(d.parts[c][0])+"-"+b(d.parts[c][1]):b(d.parts[c]);return"["+(d.inverted?"^":"")+e+"]"},any:function(b){return"any character"},end:function(b){return"end of input"},other:function(b){return b.description}};return"Expected "+function(b){var d=Array(b.length),c;for(c=0;c<b.length;c++){var f=c,a;a=b[c];a=h[a.type](a);d[f]=a}d.sort();
if(0<d.length){for(b=c=1;c<d.length;c++)d[c-1]!==d[c]&&(d[b]=d[c],b++);d.length=b}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(d)+" but "+(n?'"'+k(n)+'"':"end of input")+" found."};return{SyntaxError:r,parse:function(d,n){function l(a,b){return{type:"literal",text:a,ignoreCase:b}}function k(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function b(a){var b=fb[a],c;if(!b){for(c=a-1;!fb[c];)c--;b=fb[c];
for(b={line:b.line,column:b.column};c<a;)10===d.charCodeAt(c)?(b.line++,b.column=1):b.column++,c++;fb[a]=b}return b}function h(a,c){var d=b(a),e=b(c);return{start:{offset:a,line:d.line,column:d.column},end:{offset:c,line:e.line,column:e.column}}}function g(a){D<ob||(D>ob&&(ob=D,Bb=[]),Bb.push(a))}function e(){var a,b,c;a=D;b=ea();b!==A?(b=f(),b!==A?(c=ea(),c!==A?a=b:(D=a,a=A)):(D=a,a=A)):(D=a,a=A);return a}function c(){var a,b,c,d,e,g,h,k;a=D;b=f();if(b!==A){c=[];d=D;e=ea();e!==A?(g=va(),g!==A?(h=
ea(),h!==A?(k=f(),k!==A?d=e=[e,g,h,k]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);for(;d!==A;)c.push(d),d=D,e=ea(),e!==A?(g=va(),g!==A?(h=ea(),h!==A?(k=f(),k!==A?d=e=[e,g,h,k]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);if(c!==A){a={type:"expr_list"};b=[b];for(d=0;d<c.length;d++)b.push(c[d][3]);a.value=b}else D=a,a=A}else D=a,a=A;return a}function f(){var b,c,d,e,f,g,h,k;b=D;c=a();if(c!==A){d=[];e=D;f=ea();f!==A?(g=ja(),g!==A?(h=ea(),h!==A?(k=a(),k!==A?e=f=[f,g,h,k]:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):
(D=e,e=A);for(;e!==A;)d.push(e),e=D,f=ea(),f!==A?(g=ja(),g!==A?(h=ea(),h!==A?(k=a(),k!==A?e=f=[f,g,h,k]:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A);d!==A?b=c=Qa(c,d):(D=b,b=A)}else D=b,b=A;return b}function a(){var a,b,c,d,e,f,g,h;a=D;b=p();if(b!==A){c=[];d=D;e=ea();e!==A?(f=la(),f!==A?(g=ea(),g!==A?(h=p(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);for(;d!==A;)c.push(d),d=D,e=ea(),e!==A?(f=la(),f!==A?(g=ea(),g!==A?(h=p(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,
d=A);c!==A?a=b=Qa(b,c):(D=a,a=A)}else D=a,a=A;return a}function p(){var a,b,e,f,h;a=D;b=Y();b===A&&(b=D,33===d.charCodeAt(D)?(e=Xa,D++):(e=A,0===da&&g(ya)),e!==A?(f=D,da++,61===d.charCodeAt(D)?(h=Pa,D++):(h=A,0===da&&g(Da)),da--,h===A?f=void 0:(D=f,f=A),f!==A?b=e=[e,f]:(D=b,b=A)):(D=b,b=A));b!==A?(e=ea(),e!==A?(f=p(),f!==A?a=b={type:"unary_expr",operator:"NOT",expr:f}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A);if(a===A)if(a=D,b=y(),b!==A)if(e=ea(),e!==A){var k,l,m;e=[];f=D;h=ea();h!==A?(k=q(),k!==A?(l=ea(),
l!==A?(m=y(),m!==A?f=h=[h,k,l,m]:(D=f,f=A)):(D=f,f=A)):(D=f,f=A)):(D=f,f=A);if(f!==A)for(;f!==A;)e.push(f),f=D,h=ea(),h!==A?(k=q(),k!==A?(l=ea(),l!==A?(m=y(),m!==A?f=h=[h,k,l,m]:(D=f,f=A)):(D=f,f=A)):(D=f,f=A)):(D=f,f=A);else e=A;e!==A&&(e={type:"arithmetic",tail:e});e===A&&(e=D,f=t(),f!==A?(h=ea(),h!==A?(h=ua(),h!==A?(h=ea(),h!==A?(h=c(),h!==A?(k=ea(),k!==A?(k=Ka(),k!==A?e=f={op:f,right:h}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A),e===A&&(e=D,f=t(),f!==A?(h=ea(),
h!==A?(h=ua(),h!==A?(h=ea(),h!==A?(h=Ka(),h!==A?e=f={op:f,right:{type:"expr_list",value:[]}}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A),e===A&&(e=D,f=t(),f!==A?(h=ea(),h!==A?(h=E(),h!==A?e=f={op:f,right:h}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A))),e===A&&(e=D,h=Y(),h!==A?(f=ea(),f!==A?(f=na(),f!==A?(k=ea(),k!==A?(k=y(),k!==A?(l=ea(),l!==A?(l=la(),l!==A?(h=ea(),h!==A?(h=y(),h!==A?e=h={op:"NOT"+f,right:{type:"expr_list",value:[k,h]}}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=
A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A),e===A&&(e=D,h=na(),h!==A?(f=ea(),f!==A?(f=y(),f!==A?(k=ea(),k!==A?(k=la(),k!==A?(l=ea(),l!==A?(l=y(),l!==A?e=h={op:h,right:{type:"expr_list",value:[f,l]}}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)),e===A&&(e=D,f=ca(),f!==A?(h=ea(),h!==A?(h=Y(),h!==A?(h=ea(),h!==A?(h=y(),h!==A?e=f={op:f+"NOT",right:h}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A),e===A&&(e=D,f=ca(),f!==A?(h=ea(),h!==A?(h=y(),h!==A?e=f={op:f,right:h}:(D=e,
e=A)):(D=e,e=A)):(D=e,e=A)),e===A&&(e=D,f=v(),f!==A?(h=ea(),h!==A?(h=H(),h!==A?(k=ea(),k!==A?(k=D,d.substr(D,6).toLowerCase()===jc?(l=d.substr(D,6),D+=6):(l=A,0===da&&g(zc)),l!==A?(l=D,da++,m=C(),da--,m===A?l=void 0:(D=l,l=A),l!==A?k="ESCAPE":(D=k,k=A)):(D=k,k=A),k!==A?(k=ea(),k!==A?(k=S(),k!==A?e=f={op:f,right:h,escape:k.value}:(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A)):(D=e,e=A),e===A&&(e=D,f=v(),f!==A?(h=ea(),h!==A?(h=H(),h!==A?e=f={op:f,right:h,escape:""}:(D=e,e=A)):(D=
e,e=A)):(D=e,e=A))))));e===A&&(e=null);e!==A?(a=b,b=e,""==b||void 0==b||null==b?b=a:(e=null,b=e="arithmetic"==b.type?Qa(a,b.tail):eb(b.op,a,b.right,b.escape)),a=b):(D=a,a=A)}else D=a,a=A;else D=a,a=A;return a}function q(){var a;d.substr(D,2)===ka?(a=ka,D+=2):(a=A,0===da&&g(Fa));a===A&&(62===d.charCodeAt(D)?(a=oa,D++):(a=A,0===da&&g(La)),a===A&&(d.substr(D,2)===ba?(a=ba,D+=2):(a=A,0===da&&g(Ea)),a===A&&(d.substr(D,2)===Ha?(a=Ha,D+=2):(a=A,0===da&&g(Ga)),a===A&&(60===d.charCodeAt(D)?(a=qa,D++):(a=A,
0===da&&g(za)),a===A&&(61===d.charCodeAt(D)?(a=Pa,D++):(a=A,0===da&&g(Da)),a===A&&(d.substr(D,2)===fa?(a=fa,D+=2):(a=A,0===da&&g(yb))))))));return a}function v(){var a,b,c,d;a=a=D;b=Y();b!==A?(c=ea(),c!==A?(d=G(),d!==A?a=b=[b,c,d]:(D=a,a=A)):(D=a,a=A)):(D=a,a=A);a!==A&&(a=a[0]+" "+a[2]);a===A&&(a=G());return a}function t(){var a,b,c,d;a=a=D;b=Y();b!==A?(c=ea(),c!==A?(d=X(),d!==A?a=b=[b,c,d]:(D=a,a=A)):(D=a,a=A)):(D=a,a=A);a!==A&&(a=a[0]+" "+a[2]);a===A&&(a=X());return a}function y(){var a,b,c,d,e,
f,g,h;a=D;b=w();if(b!==A){c=[];d=D;e=ea();e!==A?(f=x(),f!==A?(g=ea(),g!==A?(h=w(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);for(;d!==A;)c.push(d),d=D,e=ea(),e!==A?(f=x(),f!==A?(g=ea(),g!==A?(h=w(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);c!==A?a=b=Qa(b,c):(D=a,a=A)}else D=a,a=A;return a}function x(){var a;43===d.charCodeAt(D)?(a=Ib,D++):(a=A,0===da&&g(cc));a===A&&(45===d.charCodeAt(D)?(a=ub,D++):(a=A,0===da&&g(tb)));return a}function w(){var a,b,c,d,e,f,
g,h;a=D;b=u();if(b!==A){c=[];d=D;e=ea();e!==A?(f=m(),f!==A?(g=ea(),g!==A?(h=u(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);for(;d!==A;)c.push(d),d=D,e=ea(),e!==A?(f=m(),f!==A?(g=ea(),g!==A?(h=u(),h!==A?d=e=[e,f,g,h]:(D=d,d=A)):(D=d,d=A)):(D=d,d=A)):(D=d,d=A);c!==A?a=b=Qa(b,c):(D=a,a=A)}else D=a,a=A;return a}function m(){var a;42===d.charCodeAt(D)?(a=gb,D++):(a=A,0===da&&g(ab));a===A&&(47===d.charCodeAt(D)?(a=Za,D++):(a=A,0===da&&g(zb)));return a}function u(){var a,b,e,h,k,l,m;
m=S();if(m===A){var p,n,u,q;p=D;var t,w,r,v;t=D;w=Z();w!==A?(r=Q(),r!==A?(v=J(),v!==A?t=w=parseFloat(w+r+v):(D=t,t=A)):(D=t,t=A)):(D=t,t=A);t===A&&(t=D,w=Z(),w!==A?(r=Q(),r!==A?t=w=parseFloat(w+r):(D=t,t=A)):(D=t,t=A),t===A&&(t=D,w=Z(),w!==A?(r=J(),r!==A?t=w=parseFloat(w+r):(D=t,t=A)):(D=t,t=A),t===A&&(t=D,w=Z(),w!==A&&(w=parseFloat(w)),t=w)));n=t;n!==A?(u=D,da++,q=B(),da--,q===A?u=void 0:(D=u,u=A),u!==A?p=n={type:"number",value:n}:(D=p,p=A)):(D=p,p=A);m=p;if(m===A){var x,y;x=D;var G,K,Ea,U;G=D;d.substr(D,
4).toLowerCase()===Ac?(K=d.substr(D,4),D+=4):(K=A,0===da&&g(vd));K!==A?(Ea=D,da++,U=C(),da--,U===A?Ea=void 0:(D=Ea,Ea=A),Ea!==A?G=K=[K,Ea]:(D=G,G=A)):(D=G,G=A);y=G;y!==A&&(y={type:"bool",value:!0});x=y;if(x===A){x=D;var I,Ha,O,R;I=D;d.substr(D,5).toLowerCase()===dc?(Ha=d.substr(D,5),D+=5):(Ha=A,0===da&&g(Oc));Ha!==A?(O=D,da++,R=C(),da--,R===A?O=void 0:(D=O,O=A),O!==A?I=Ha=[Ha,O]:(D=I,I=A)):(D=I,I=A);y=I;y!==A&&(y={type:"bool",value:!1});x=y}m=x;if(m===A){var ca,Ga,M,na,qa;Ga=D;d.substr(D,4).toLowerCase()===
fd?(M=d.substr(D,4),D+=4):(M=A,0===da&&g(Yc));M!==A?(na=D,da++,qa=C(),da--,qa===A?na=void 0:(D=na,na=A),na!==A?Ga=M=[M,na]:(D=Ga,Ga=A)):(D=Ga,Ga=A);ca=Ga;ca!==A&&(ca={type:"null",value:null});m=ca;if(m===A){var Y,ba,la,ja;Y=D;var fa,za,W,ha;fa=D;d.substr(D,4).toLowerCase()===wd?(za=d.substr(D,4),D+=4):(za=A,0===da&&g(xd));za!==A?(W=D,da++,ha=C(),da--,ha===A?W=void 0:(D=W,W=A),W!==A?fa=za="DATE":(D=fa,fa=A)):(D=fa,fa=A);ba=fa;ba!==A?(la=ea(),la!==A?(ja=H(),ja!==A?Y=ba={type:"date",value:ja.value}:
(D=Y,Y=A)):(D=Y,Y=A)):(D=Y,Y=A);m=Y;if(m===A){var ma,yb,oa,wa;ma=D;var va,xa,ya,La;va=D;d.substr(D,9).toLowerCase()===Gc?(xa=d.substr(D,9),D+=9):(xa=A,0===da&&g(gd));xa!==A?(ya=D,da++,La=C(),da--,La===A?ya=void 0:(D=ya,ya=A),ya!==A?va=xa="TIMESTAMP":(D=va,va=A)):(D=va,va=A);yb=va;yb!==A?(oa=ea(),oa!==A?(wa=H(),wa!==A?ma=yb={type:"timestamp",value:wa.value}:(D=ma,ma=A)):(D=ma,ma=A)):(D=ma,ma=A);m=ma;if(m===A){var ka,Ja,Na,Oa,Xa,gb,Sa,Ta;ka=D;Ja=aa();Ja!==A?(Na=ea(),Na!==A?(45===d.charCodeAt(D)?(Oa=
ub,D++):(Oa=A,0===da&&g(tb)),Oa===A&&(43===d.charCodeAt(D)?(Oa=Ib,D++):(Oa=A,0===da&&g(cc))),Oa!==A?(Xa=ea(),Xa!==A?(gb=H(),gb!==A?(Sa=ea(),Sa!==A?(Ta=L(),Ta!==A?ka=Ja={type:"interval",value:gb,qualifier:Ta,op:Oa}:(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A);ka===A&&(ka=D,Ja=aa(),Ja!==A?(Na=ea(),Na!==A?(Oa=H(),Oa!==A?(Xa=ea(),Xa!==A?(gb=L(),gb!==A?ka=Ja={type:"interval",value:Oa,qualifier:gb,op:""}:(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=ka,ka=A)):(D=
ka,ka=A));m=ka}}}}}}a=m;if(a===A){var Da,Ua,Za,eb,Ya,uc,Xb,ab,hb,nb,Qa,jb;Da=D;var bb,Jb,qc,Pa;bb=D;d.substr(D,7).toLowerCase()===Ub?(Jb=d.substr(D,7),D+=7):(Jb=A,0===da&&g(ec));Jb!==A?(qc=D,da++,Pa=C(),da--,Pa===A?qc=void 0:(D=qc,qc=A),qc!==A?bb=Jb="EXTRACT":(D=bb,bb=A)):(D=bb,bb=A);Ua=bb;if(Ua!==A)if(Za=ea(),Za!==A)if(eb=ua(),eb!==A)if(Ya=ea(),Ya!==A){var Fa;Fa=ga();Fa===A&&(Fa=ia(),Fa===A&&(Fa=sa(),Fa===A&&(Fa=Aa(),Fa===A&&(Fa=Ba(),Fa===A&&(Fa=Ca())))));uc=Fa;uc!==A?(Xb=ea(),Xb!==A?(ab=pa(),ab!==
A?(hb=ea(),hb!==A?(nb=f(),nb!==A?(Qa=ea(),Qa!==A?(jb=Ka(),jb!==A?Da=Ua={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:uc},nb]}}:(D=Da,Da=A)):(D=Da,Da=A)):(D=Da,Da=A)):(D=Da,Da=A)):(D=Da,Da=A)):(D=Da,Da=A)):(D=Da,Da=A)}else D=Da,Da=A;else D=Da,Da=A;else D=Da,Da=A;else D=Da,Da=A;a=Da;if(a===A){var ib,fb,kb,lb,kd,Wc,md,ob,zb,Tc,Hb,$a,Db,bd,cd,Ab;ib=D;var Va,Rb,Kc,ld;Va=D;d.substr(D,9).toLowerCase()===hd?(Rb=d.substr(D,9),D+=9):(Rb=A,0===da&&g(Cb));Rb!==A?(Kc=D,da++,
ld=C(),da--,ld===A?Kc=void 0:(D=Kc,Kc=A),Kc!==A?Va=Rb="SUBSTRING":(D=Va,Va=A)):(D=Va,Va=A);fb=Va;if(fb!==A)if(kb=ea(),kb!==A)if(lb=ua(),lb!==A)if(kd=ea(),kd!==A)if(Wc=f(),Wc!==A)if(md=ea(),md!==A)if(ob=pa(),ob!==A)if(zb=ea(),zb!==A)if(Tc=f(),Tc!==A)if(Hb=ea(),Hb!==A){$a=D;var cb,Eb,Fb,fc;cb=D;d.substr(D,3).toLowerCase()===id?(Eb=d.substr(D,3),D+=3):(Eb=A,0===da&&g(yd));Eb!==A?(Fb=D,da++,fc=C(),da--,fc===A?Fb=void 0:(D=Fb,Fb=A),Fb!==A?cb=Eb="FOR":(D=cb,cb=A)):(D=cb,cb=A);Db=cb;Db!==A?(bd=ea(),bd!==
A?(cd=f(),cd!==A?(Ab=ea(),Ab!==A?$a=Db=[Db,bd,cd,Ab]:(D=$a,$a=A)):(D=$a,$a=A)):(D=$a,$a=A)):(D=$a,$a=A);$a===A&&($a=null);$a!==A?(Db=Ka(),Db!==A?ib=fb={type:"function",name:"substring",args:{type:"expr_list",value:$a?[Wc,Tc,$a[2]]:[Wc,Tc]}}:(D=ib,ib=A)):(D=ib,ib=A)}else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;else D=ib,ib=A;a=ib;if(a===A){var Ma,qb,xb,Qb,Bb,pb,Vb,Ob,Yb,Sb,Kb,Mb,xc,zc;Ma=D;qb=ta();qb!==A?(xb=
ea(),xb!==A?(Qb=ua(),Qb!==A?(Bb=ea(),Bb!==A?(pb=N(),pb===A&&(pb=null),pb!==A?(Vb=ea(),Vb!==A?(Ob=f(),Ob!==A?(Yb=ea(),Yb!==A?(Sb=pa(),Sb!==A?(Kb=ea(),Kb!==A?(Mb=f(),Mb!==A?(xc=ea(),xc!==A?(zc=Ka(),zc!==A?Ma=qb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Ob,Mb]}}:(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A);Ma===A&&(Ma=D,qb=
ta(),qb!==A?(xb=ea(),xb!==A?(Qb=ua(),Qb!==A?(Bb=ea(),Bb!==A?(pb=N(),pb===A&&(pb=null),pb!==A?(Vb=ea(),Vb!==A?(Ob=f(),Ob!==A?(Yb=ea(),Yb!==A?(Sb=Ka(),Sb!==A?Ma=qb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Ob]}}:(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A)):(D=Ma,Ma=A));a=Ma;if(a===A){var mb,pc,Jc,Ec,Zb,Tb,Cc,gc,Lb,Nb,Hc,Dc;mb=D;var Wb,Xc,jc,oc;Wb=D;d.substr(D,8).toLowerCase()===zd?(Xc=
d.substr(D,8),D+=8):(Xc=A,0===da&&g(jd));Xc!==A?(jc=D,da++,oc=C(),da--,oc===A?jc=void 0:(D=jc,jc=A),jc!==A?Wb=Xc="POSITION":(D=Wb,Wb=A)):(D=Wb,Wb=A);pc=Wb;pc!==A?(Jc=ea(),Jc!==A?(Ec=ua(),Ec!==A?(Zb=ea(),Zb!==A?(Tb=f(),Tb!==A?(Cc=ea(),Cc!==A?(gc=X(),gc!==A?(Lb=ea(),Lb!==A?(Nb=f(),Nb!==A?(Hc=ea(),Hc!==A?(Dc=Ka(),Dc!==A?mb=pc={type:"function",name:"position",args:{type:"expr_list",value:[Tb,Nb]}}:(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A)):
(D=mb,mb=A)):(D=mb,mb=A)):(D=mb,mb=A);a=mb;if(a===A){var Gb,wc,Ic,Vc,nd,Pb,vc,Uc;Gb=D;var kc,$b,bc,Bc;kc=D;kc=$b=z();if(kc===A)if(kc=D,96===d.charCodeAt(D)?($b=Zc,D++):($b=A,0===da&&g(Pc)),$b!==A){bc=[];$c.test(d.charAt(D))?(Bc=d.charAt(D),D++):(Bc=A,0===da&&g(Qc));if(Bc!==A)for(;Bc!==A;)bc.push(Bc),$c.test(d.charAt(D))?(Bc=d.charAt(D),D++):(Bc=A,0===da&&g(Qc));else bc=A;bc!==A?(96===d.charCodeAt(D)?(Bc=Zc,D++):(Bc=A,0===da&&g(Pc)),Bc!==A?kc=$b=bc.join(""):(D=kc,kc=A)):(D=kc,kc=A)}else D=kc,kc=A;
wc=kc;wc!==A?(Ic=ea(),Ic!==A?(Vc=ua(),Vc!==A?(nd=ea(),nd!==A?(Pb=c(),Pb===A&&(Pb=null),Pb!==A?(vc=ea(),vc!==A?(Uc=Ka(),Uc!==A?Gb=wc={type:"function",name:wc,args:Pb?Pb:{type:"expr_list",value:[]}}:(D=Gb,Gb=A)):(D=Gb,Gb=A)):(D=Gb,Gb=A)):(D=Gb,Gb=A)):(D=Gb,Gb=A)):(D=Gb,Gb=A)):(D=Gb,Gb=A);a=Gb;if(a===A){var nc,Wa,Fc,rc,ac,tc,Rc,lc,ic,od,qd;Wa=D;Fc=Ia();if(Fc!==A)if(rc=ea(),rc!==A)if(ac=f(),ac!==A)if(tc=ea(),tc!==A){Rc=[];for(lc=V();lc!==A;)Rc.push(lc),lc=V();Rc!==A?(lc=ea(),lc!==A?(ic=ra(),ic!==A?Wa=
Fc={type:"case_expression",format:"simple",operand:ac,clauses:Rc,else:null}:(D=Wa,Wa=A)):(D=Wa,Wa=A)):(D=Wa,Wa=A)}else D=Wa,Wa=A;else D=Wa,Wa=A;else D=Wa,Wa=A;else D=Wa,Wa=A;if(Wa===A)if(Wa=D,Fc=Ia(),Fc!==A)if(rc=ea(),rc!==A)if(ac=f(),ac!==A)if(tc=ea(),tc!==A){Rc=[];for(lc=V();lc!==A;)Rc.push(lc),lc=V();Rc!==A?(lc=ea(),lc!==A?(ic=T(),ic!==A?(od=ea(),od!==A?(qd=ra(),qd!==A?Wa=Fc={type:"case_expression",format:"simple",operand:ac,clauses:Rc,else:ic.value}:(D=Wa,Wa=A)):(D=Wa,Wa=A)):(D=Wa,Wa=A)):(D=Wa,
Wa=A)):(D=Wa,Wa=A)}else D=Wa,Wa=A;else D=Wa,Wa=A;else D=Wa,Wa=A;else D=Wa,Wa=A;nc=Wa;if(nc===A){var db,hc,yc,Sc,mc,sc,Nc,pd;db=D;hc=Ia();if(hc!==A)if(yc=ea(),yc!==A){Sc=[];for(mc=P();mc!==A;)Sc.push(mc),mc=P();Sc!==A?(mc=ea(),mc!==A?(sc=ra(),sc!==A?db=hc={type:"case_expression",format:"searched",clauses:Sc,else:null}:(D=db,db=A)):(D=db,db=A)):(D=db,db=A)}else D=db,db=A;else D=db,db=A;if(db===A)if(db=D,hc=Ia(),hc!==A)if(yc=ea(),yc!==A){Sc=[];for(mc=P();mc!==A;)Sc.push(mc),mc=P();Sc!==A?(mc=ea(),mc!==
A?(sc=T(),sc!==A?(Nc=ea(),Nc!==A?(pd=ra(),pd!==A?db=hc={type:"case_expression",format:"searched",clauses:Sc,else:sc.value}:(D=db,db=A)):(D=db,db=A)):(D=db,db=A)):(D=db,db=A)):(D=db,db=A)}else D=db,db=A;else D=db,db=A;nc=db}a=nc;if(a===A){var Lc,ad,Mc,Gd,Hd;ad=D;Mc=B();if(Mc!==A){Gd=[];for(Hd=F();Hd!==A;)Gd.push(Hd),Hd=F();Gd!==A?ad=Mc+=Gd.join(""):(D=ad,ad=A)}else D=ad,ad=A;Lc=ad;Lc!==A&&(Lc={type:"column_ref",table:"",column:Lc});a=Lc;a===A&&(a=E(),a===A&&(a=D,b=ua(),b!==A?(e=ea(),e!==A?(h=f(),h!==
A?(k=ea(),k!==A?(l=Ka(),l!==A?(h.paren=!0,a=b=h):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)))}}}}}}}return a}function z(){var a,b,c,d;a=D;b=B();if(b!==A){c=[];for(d=C();d!==A;)c.push(d),d=C();c!==A?a=b+=c.join(""):(D=a,a=A)}else D=a,a=A;return a}function B(){var a;hb.test(d.charAt(D))?(a=d.charAt(D),D++):(a=A,0===da&&g(Ab));return a}function C(){var a;Qb.test(d.charAt(D))?(a=d.charAt(D),D++):(a=A,0===da&&g($a));return a}function F(){var a;pb.test(d.charAt(D))?(a=d.charAt(D),D++):(a=A,0===
da&&g(bb));return a}function E(){var a,b,c;a=D;64===d.charCodeAt(D)?(b=nb,D++):(b=A,0===da&&g(Jb));b!==A?(c=z(),c!==A?a=b=[b,c]:(D=a,a=A)):(D=a,a=A);a!==A&&(a={type:"param",value:a[1]});return a}function N(){var a,b,c;a=D;d.substr(D,7).toLowerCase()===Cc?(b=d.substr(D,7),D+=7):(b=A,0===da&&g(W));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="LEADING":(D=a,a=A)):(D=a,a=A);a===A&&(a=D,d.substr(D,8).toLowerCase()===Sa?(b=d.substr(D,8),D+=8):(b=A,0===da&&g(uc)),b!==A?(b=D,da++,c=C(),da--,
c===A?b=void 0:(D=b,b=A),b!==A?a="TRAILING":(D=a,a=A)):(D=a,a=A),a===A&&(a=D,d.substr(D,4).toLowerCase()===Na?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(Ta)),b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="BOTH":(D=a,a=A)):(D=a,a=A)));return a}function L(){var a,b,c;a=D;var e,f;b=D;c=K();c!==A?(e=ea(),e!==A?(e=ua(),e!==A?(e=ea(),e!==A?(e=I(),e!==A?(f=ea(),f!==A?(f=Ka(),f!==A?b=c={type:"interval-period",period:c.value,precision:e,secondary:null}:(D=b,b=A)):(D=b,b=A)):(D=b,b=A)):(D=b,b=A)):
(D=b,b=A)):(D=b,b=A)):(D=b,b=A);b===A&&(b=D,c=K(),c!==A&&(c=fc(c)),b=c);if(b!==A)if(c=ea(),c!==A)if(c=D,d.substr(D,2).toLowerCase()===Ua?(e=d.substr(D,2),D+=2):(e=A,0===da&&g(Tc)),e!==A?(e=D,da++,f=C(),da--,f===A?e=void 0:(D=e,e=A),e!==A?c="TO":(D=c,c=A)):(D=c,c=A),c!==A)if(c=ea(),c!==A){var h;c=D;e=K();e!==A&&(e={type:"interval-period",period:e.value,precision:null,secondary:null});c=e;c===A&&(c=D,e=Ca(),e!==A?(e=ea(),e!==A?(e=ua(),e!==A?(e=ea(),e!==A?(e=I(),e!==A?(f=ea(),f!==A?(f=va(),f!==A?(f=
ea(),f!==A?(f=O(),f!==A?(h=ea(),h!==A?(h=Ka(),h!==A?c=e=qb(e,f):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A),c===A&&(c=D,e=Ca(),e!==A?(e=ea(),e!==A?(e=ua(),e!==A?(e=ea(),e!==A?(e=I(),e!==A?(f=ea(),f!==A?(f=Ka(),f!==A?c=e={type:"interval-period",period:"second",precision:e,secondary:null}:(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A)):(D=c,c=A),c===A&&(c=D,e=Ca(),e!==A&&(e={type:"interval-period",period:"second",
precision:null,secondary:null}),c=e)));c!==A?a=b={type:"interval-qualifier",start:b,end:c}:(D=a,a=A)}else D=a,a=A;else D=a,a=A;else D=a,a=A;else D=a,a=A;a===A&&(a=D,c=K(),c!==A?(b=ea(),b!==A?(b=ua(),b!==A?(b=ea(),b!==A?(b=O(),b!==A?(e=ea(),e!==A?(e=Ka(),e!==A?a=c={type:"interval-period",period:c.value,precision:b,secondary:null}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A),a===A&&(a=D,c=K(),c!==A&&(c=fc(c)),a=c,a===A&&(a=D,c=Ca(),c!==A?(b=ea(),b!==A?(b=ua(),b!==A?(b=
ea(),b!==A?(b=I(),b!==A?(e=ea(),e!==A?(e=va(),e!==A?(c=ea(),c!==A?(c=O(),c!==A?(e=ea(),e!==A?(e=Ka(),e!==A?a=c=qb(b,c):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A),a===A&&(a=D,c=Ca(),c!==A?(b=ea(),b!==A?(b=ua(),b!==A?(b=ea(),b!==A?(b=O(),b!==A?(e=ea(),e!==A?(e=Ka(),e!==A?a=c={type:"interval-period",period:"second",precision:b,secondary:null}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A),a===A&&
(a=D,c=Ca(),c!==A&&(c={type:"interval-period",period:"second",precision:null,secondary:null}),a=c)))));return a}function K(){var a;a=D;a=sa();a!==A&&(a={type:"string",value:"day"});a===A&&(a=D,a=Aa(),a!==A&&(a={type:"string",value:"hour"}),a===A&&(a=D,a=Ba(),a!==A&&(a={type:"string",value:"minute"}),a===A&&(a=D,a=ia(),a!==A&&(a={type:"string",value:"month"}),a===A&&(a=D,a=ga(),a!==A&&(a={type:"string",value:"year"})))));return a}function O(){var a;a=R();a!==A&&(a=parseFloat(a));return a}function I(){var a;
a=R();a!==A&&(a=parseFloat(a));return a}function H(){var a;a=S();a===A&&(a=E());return a}function S(){var a,b,c;a=D;39===d.charCodeAt(D)?(b=cb,D++):(b=A,0===da&&g(Kb));b===A&&(d.substr(D,2)===jb?(b=jb,D+=2):(b=A,0===da&&g(gc)));if(b!==A){b=[];c=D;d.substr(D,2)===Rb?(c=Rb,D+=2):(c=A,0===da&&g(Db));c!==A&&(c="'");c===A&&(Vb.test(d.charAt(D))?(c=d.charAt(D),D++):(c=A,0===da&&g(M)));for(;c!==A;)b.push(c),c=D,d.substr(D,2)===Rb?(c=Rb,D+=2):(c=A,0===da&&g(Db)),c!==A&&(c="'"),c===A&&(Vb.test(d.charAt(D))?
(c=d.charAt(D),D++):(c=A,0===da&&g(M)));b!==A?(39===d.charCodeAt(D)?(c=cb,D++):(c=A,0===da&&g(Kb)),c!==A?a=b={type:"string",value:b.join("")}:(D=a,a=A)):(D=a,a=A)}else D=a,a=A;return a}function P(){var a,b,c;a=D;b=wa();b!==A?(b=ea(),b!==A?(b=f(),b!==A?(c=ea(),c!==A?(c=xa(),c!==A?(c=ea(),c!==A?(c=f(),c!==A?a=b={type:"when_clause",operand:b,value:c}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A);return a}function V(){var a,b,c;a=D;b=wa();b!==A?(b=ea(),b!==A?(b=f(),b!==A?
(c=ea(),c!==A?(c=xa(),c!==A?(c=ea(),c!==A?(c=f(),c!==A?a=b={type:"when_clause",operand:b,value:c}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A)):(D=a,a=A);return a}function T(){var a,b;a=D;var c,e;b=D;d.substr(D,4).toLowerCase()===vc?(c=d.substr(D,4),D+=4):(c=A,0===da&&g(nc));c!==A?(c=D,da++,e=C(),da--,e===A?c=void 0:(D=c,c=A),c!==A?b="ELSE":(D=b,b=A)):(D=b,b=A);b!==A?(b=ea(),b!==A?(b=f(),b!==A?a={type:"else_clause",value:b}:(D=a,a=A)):(D=a,a=A)):(D=a,a=A);return a}function Z(){var a,
b,c;a=R();a===A&&(a=D,45===d.charCodeAt(D)?(b=ub,D++):(b=A,0===da&&g(tb)),b===A&&(43===d.charCodeAt(D)?(b=Ib,D++):(b=A,0===da&&g(cc))),b!==A?(c=R(),c!==A?a=b=b[0]+c:(D=a,a=A)):(D=a,a=A));return a}function Q(){var a,b;a=D;46===d.charCodeAt(D)?(b=Ja,D++):(b=A,0===da&&g(Eb));b!==A?(b=R(),b===A&&(b=null),b!==A?a="."+(null!=b?b:""):(D=a,a=A)):(D=a,a=A);return a}function J(){var a,b,c;b=a=D;ha.test(d.charAt(D))?(c=d.charAt(D),D++):(c=A,0===da&&g(Lb));c!==A?(Mb.test(d.charAt(D))?(c=d.charAt(D),D++):(c=A,
0===da&&g(oc)),c===A&&(c=null),c!==A?b="e"+(null===c?"":c):(D=b,b=A)):(D=b,b=A);b!==A?(c=R(),c!==A?a=b+c:(D=a,a=A)):(D=a,a=A);return a}function R(){var a,b;a=[];b=U();if(b!==A)for(;b!==A;)a.push(b),b=U();else a=A;a!==A&&(a=a.join(""));return a}function U(){var a;Va.test(d.charAt(D))?(a=d.charAt(D),D++):(a=A,0===da&&g(Nb));return a}function X(){var a,b,c;a=D;d.substr(D,2).toLowerCase()===wc?(b=d.substr(D,2),D+=2):(b=A,0===da&&g(Hc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="IN":
(D=a,a=A)):(D=a,a=A);return a}function ca(){var a,b,c;a=D;d.substr(D,2).toLowerCase()===pc?(b=d.substr(D,2),D+=2):(b=A,0===da&&g(qc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="IS":(D=a,a=A)):(D=a,a=A);return a}function G(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===Hb?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(Ob));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="LIKE":(D=a,a=A)):(D=a,a=A);return a}function Y(){var a,b,c;a=D;d.substr(D,3).toLowerCase()===Dc?(b=d.substr(D,
3),D+=3):(b=A,0===da&&g(Wb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="NOT":(D=a,a=A)):(D=a,a=A);return a}function la(){var a,b,c;a=D;d.substr(D,3).toLowerCase()===Ic?(b=d.substr(D,3),D+=3):(b=A,0===da&&g(Xb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="AND":(D=a,a=A)):(D=a,a=A);return a}function ja(){var a,b,c;a=D;d.substr(D,2).toLowerCase()===Jc?(b=d.substr(D,2),D+=2):(b=A,0===da&&g(Yb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="OR":(D=a,a=
A)):(D=a,a=A);return a}function na(){var a,b,c;a=D;d.substr(D,7).toLowerCase()===Sb?(b=d.substr(D,7),D+=7):(b=A,0===da&&g(Ec));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="BETWEEN":(D=a,a=A)):(D=a,a=A);return a}function pa(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===Uc?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(Vc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="FROM":(D=a,a=A)):(D=a,a=A);return a}function ta(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===Fb?(b=d.substr(D,
4),D+=4):(b=A,0===da&&g(xc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="TRIM":(D=a,a=A)):(D=a,a=A);return a}function aa(){var a,b,c;a=D;d.substr(D,8).toLowerCase()===kd?(b=d.substr(D,8),D+=8):(b=A,0===da&&g(Kc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="INTERVAL":(D=a,a=A)):(D=a,a=A);return a}function ga(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===Wc?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(ld));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="YEAR":
(D=a,a=A)):(D=a,a=A);return a}function ia(){var a,b,c;a=D;d.substr(D,5).toLowerCase()===md?(b=d.substr(D,5),D+=5):(b=A,0===da&&g(bd));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="MONTH":(D=a,a=A)):(D=a,a=A);return a}function sa(){var a,b,c;a=D;d.substr(D,3).toLowerCase()===cd?(b=d.substr(D,3),D+=3):(b=A,0===da&&g(nd));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="DAY":(D=a,a=A)):(D=a,a=A);return a}function Aa(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===Xc?(b=d.substr(D,
4),D+=4):(b=A,0===da&&g(od));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="HOUR":(D=a,a=A)):(D=a,a=A);return a}function Ba(){var a,b,c;a=D;d.substr(D,6).toLowerCase()===Fc?(b=d.substr(D,6),D+=6):(b=A,0===da&&g(pd));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="MINUTE":(D=a,a=A)):(D=a,a=A);return a}function Ca(){var a,b,c;a=D;d.substr(D,6).toLowerCase()===Lc?(b=d.substr(D,6),D+=6):(b=A,0===da&&g(qd));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="SECOND":
(D=a,a=A)):(D=a,a=A);return a}function Ia(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===hc?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(Pb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="CASE":(D=a,a=A)):(D=a,a=A);return a}function ra(){var a,b,c;a=D;d.substr(D,3).toLowerCase()===Zb?(b=d.substr(D,3),D+=3):(b=A,0===da&&g(Tb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="END":(D=a,a=A)):(D=a,a=A);return a}function wa(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===rc?(b=d.substr(D,
4),D+=4):(b=A,0===da&&g(Mc));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="WHEN":(D=a,a=A)):(D=a,a=A);return a}function xa(){var a,b,c;a=D;d.substr(D,4).toLowerCase()===$b?(b=d.substr(D,4),D+=4):(b=A,0===da&&g(kb));b!==A?(b=D,da++,c=C(),da--,c===A?b=void 0:(D=b,b=A),b!==A?a="THEN":(D=a,a=A)):(D=a,a=A);return a}function va(){var a;44===d.charCodeAt(D)?(a=yc,D++):(a=A,0===da&&g(ac));return a}function ua(){var a;40===d.charCodeAt(D)?(a=sc,D++):(a=A,0===da&&g(tc));return a}function Ka(){var a;
41===d.charCodeAt(D)?(a=Nc,D++):(a=A,0===da&&g(lb));return a}function ea(){var a,b;a=[];for(b=Oa();b!==A;)a.push(b),b=Oa();return a}function Oa(){var a;bc.test(d.charAt(D))?(a=d.charAt(D),D++):(a=A,0===da&&g(ic));return a}function eb(a,b,c,d){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==d&&(a.escape=d);return a}function Qa(a,b){for(var c=0;c<b.length;c++)a=eb(b[c][1],a,b[c][3]);return a}n=void 0!==n?n:{};var A={},ma={start:e},Ya=e,Xa="!",ya=l("!",!1),Pa="\x3d",Da=l("\x3d",!1),ka="\x3e\x3d",
Fa=l("\x3e\x3d",!1),oa="\x3e",La=l("\x3e",!1),ba="\x3c\x3d",Ea=l("\x3c\x3d",!1),Ha="\x3c\x3e",Ga=l("\x3c\x3e",!1),qa="\x3c",za=l("\x3c",!1),fa="!\x3d",yb=l("!\x3d",!1),Ib="+",cc=l("+",!1),ub="-",tb=l("-",!1),gb="*",ab=l("*",!1),Za="/",zb=l("/",!1),hb=/^[A-Za-z_\x80-\uFFFF]/,Ab=k([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Qb=/^[A-Za-z0-9_]/,$a=k([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pb=/^[A-Za-z0-9_.\x80-\uFFFF]/,bb=k([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),
nb="@",Jb=l("@",!1),fc=function(a){return{type:"interval-period",period:a.value,precision:null,secondary:null}},qb=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},cb="'",Kb=l("'",!1),jb="N'",gc=l("N'",!1),Rb="''",Db=l("''",!1),Vb=/^[^']/,M=k(["'"],!0,!1),Ja=".",Eb=l(".",!1),Va=/^[0-9]/,Nb=k([["0","9"]],!1,!1),ha=/^[eE]/,Lb=k(["e","E"],!1,!1),Mb=/^[+\-]/,oc=k(["+","-"],!1,!1),fd="null",Yc=l("NULL",!0),Ac="true",vd=l("TRUE",!0),dc="false",Oc=l("FALSE",!0),wc="in",
Hc=l("IN",!0),pc="is",qc=l("IS",!0),Hb="like",Ob=l("LIKE",!0),jc="escape",zc=l("ESCAPE",!0),Dc="not",Wb=l("NOT",!0),Ic="and",Xb=l("AND",!0),Jc="or",Yb=l("OR",!0),Sb="between",Ec=l("BETWEEN",!0),Uc="from",Vc=l("FROM",!0),id="for",yd=l("FOR",!0),hd="substring",Cb=l("SUBSTRING",!0),Ub="extract",ec=l("EXTRACT",!0),Fb="trim",xc=l("TRIM",!0),zd="position",jd=l("POSITION",!0),Gc="timestamp",gd=l("TIMESTAMP",!0),wd="date",xd=l("DATE",!0),Cc="leading",W=l("LEADING",!0),Sa="trailing",uc=l("TRAILING",!0),Na=
"both",Ta=l("BOTH",!0),Ua="to",Tc=l("TO",!0),kd="interval",Kc=l("INTERVAL",!0),Wc="year",ld=l("YEAR",!0),md="month",bd=l("MONTH",!0),cd="day",nd=l("DAY",!0),Xc="hour",od=l("HOUR",!0),Fc="minute",pd=l("MINUTE",!0),Lc="second",qd=l("SECOND",!0),hc="case",Pb=l("CASE",!0),Zb="end",Tb=l("END",!0),rc="when",Mc=l("WHEN",!0),$b="then",kb=l("THEN",!0),vc="else",nc=l("ELSE",!0),yc=",",ac=l(",",!1),sc="(",tc=l("(",!1),Nc=")",lb=l(")",!1),bc=/^[ \t\n\r]/,ic=k([" ","\t","\n","\r"],!1,!1),Zc="`",Pc=l("`",!1),$c=
/^[^`]/,Qc=k(["`"],!0,!1),D=0,fb=[{line:1,column:1}],ob=0,Bb=[],da=0,xb;if("startRule"in n){if(!(n.startRule in ma))throw Error("Can't start parsing from rule \""+n.startRule+'".');Ya=ma[n.startRule]}xb=Ya();if(xb!==A&&D===d.length)return xb;xb!==A&&D<d.length&&g({type:"end"});throw function(a,b,c){return new r(r.buildMessage(a,b),a,b,c)}(Bb,ob<d.length?d.charAt(ob):null,ob<d.length?h(ob,ob+1):h(ob,ob));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(r,d,n,l,k,b,h,g,e){function c(b,c){var d;if(!c)return null;if("x"in c){var e={x:0,y:0};b=b(c.x,c.y,q);e.x=b[0];e.y=b[1];null!=c.z&&(e.z=c.z);null!=c.m&&(e.m=c.m);return e}if("xmin"in c)return e={xmin:0,ymin:0,xmax:0,ymax:0},d=b(c.xmin,c.ymin,q),e.xmin=d[0],e.ymin=d[1],b=b(c.xmax,c.ymax,q),e.xmax=b[0],e.ymax=b[1],c.hasZ&&(e.zmin=c.zmin,e.zmax=c.zmax,e.hasZ=!0),c.hasM&&(e.mmin=c.mmin,e.mmax=c.mmax,e.hasM=!0),e;if("rings"in c)return{rings:f(c.rings,b),hasM:c.hasM,hasZ:c.hasZ};if("paths"in c)return{paths:f(c.paths,
b),hasM:c.hasM,hasZ:c.hasZ};if("points"in c)return{points:a(c.points,b),hasM:c.hasM,hasZ:c.hasZ}}function f(b,c){for(var d=[],e=0;e<b.length;e++)d.push(a(b[e],c));return d}function a(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=b(e[0],e[1],[0,0]);c.push(f);2<e.length&&f.push(e[2]);3<e.length&&f.push(e[3])}return c}function p(a,b){return!g.isValid(a)||!g.isValid(b)||g.equals(a,b)||e.canProject(a,b)?!1:!0}Object.defineProperty(d,"__esModule",{value:!0});var q=[0,0];d.checkProjectionSupport=function(a,
b){return l(this,void 0,void 0,function(){var c,d,e;return n(this,function(f){if(!b)return[2];if(Array.isArray(a)){c=0;for(d=a;c<d.length;c++)if(e=d[c],p(e.geometry&&e.geometry.spatialReference,b)){if(h.isSupported())return[2,h.load()];throw new k("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:b});}return[2]}if(!p(a,b))return[2];if(h.isSupported())return[2,h.load()];throw new k("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,
outSpatialReference:b});})})};var v=c.bind(null,e.lngLatToXY),t=c.bind(null,e.xyToLngLat);d.project=function(a,b,c){c||(c=b,b=a.spatialReference);return g.isValid(b)&&g.isValid(c)&&!g.equals(b,c)?e.canProject(b,c)?g.isWebMercator(c)?v(a):t(a):h.projectMany([a],b,c,null,!0)[0]:a};var y=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,c,d){return l(this,void 0,void 0,function(){var e,f=this;return n(this,function(h){a&&a.length&&
c&&d&&!g.equals(c,d)||b.resolve(a);e={geometries:a,inSpatialReference:c,outSpatialReference:d,resolve:null};this._jobs.push(e);return[2,b.create(function(a){e.resolve=a;null===f._timer&&(f._timer=setTimeout(f._process,10))},function(){var a=f._jobs.indexOf(e);-1<a&&f._jobs.splice(a,1)})]})})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,c=a.inSpatialReference,d=a.outSpatialReference,a=a.resolve;e.canProject(c,d)?g.isWebMercator(d)?a(b.map(v)):
a(b.map(t)):a(h.projectMany(b,c,d,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());d.projectMany=function(a,b,c){return l(this,void 0,void 0,function(){return n(this,function(d){return[2,y.push(a,b,c)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(r,d,n,l,k,b){function h(a,c,d,h,l){void 0===h&&(h=null);void 0===l&&(l=!1);if(null===h){var p=
b.cacheKey(c,d);void 0!==f[p]?h=f[p]:(h=g(c,d,null),null===h&&(h=new b),f[p]=h)}return e._project(a,c,d instanceof k||!1===l?d:new k(d),h,l)}function g(a,c,d){void 0===d&&(d=null);a=e._getTransformation(a,c,d);return null!==a?b.fromGE(a):null}Object.defineProperty(d,"__esModule",{value:!0});var e=null;d.isLoaded=function(){return!!e&&l.isLoaded()};d.isSupported=function(){return l.isSupported()};var c=null;d.load=function(){return c?c:c=n.create(function(a,b){var c=l.load();r(["./geometryEngine"],
function(d){e=d;c.then(function(){e._enableProjection(l);a()},function(a){b(a)})})})};d.project=function(a,b,c){void 0===c&&(c=null);return a instanceof Array?0===a.length?[]:h(a,a[0].spatialReference,b,c):h([a],a.spatialReference,b,c)[0]};var f={};d.projectMany=h;d.getTransformation=g;d.getTransformations=function(a,c,d){void 0===d&&(d=null);a=e._getTransformationBySuitability(a,c,d);if(null!==a){c=[];for(d=0;d<a.length;d++)c.push(b.fromGE(a[d]));return c}return[]}})},"esri/geometry/pe":function(){define(["require",
"exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(r,d,n,l,k){function b(b){function e(a,b,c){a[b]=c(a[b])}d._pe=b;a.init();p.init();q.init();v.init();t.init();d.PeGCSExtent=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.destroy=function(){d._pe.destroy(this)};return b}(d._pe.PeGCSExtent);for(var f=0,g=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,
d._pe.PeUnit];f<g.length;f++)b=g[f],e(b.prototype,"getName",function(b){return function(){return b.call(this,Array(a.PE_NAME_MAX))}});f=0;for(g=[d._pe.PeGeogtran,d._pe.PeProjcs];f<g.length;f++)b=g[f],e(b.prototype,"getParameters",function(b){return function(){for(var c=Array(a.PE_PARM_MAX),e=b.call(this),f=0;f<c.length;f++){var g=d._pe.getValue(e,"*");c[f]=g?d._pe.wrapPointer(g,d._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return c}});e(d._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=
this.getSize();if(!b)return null;var d=[],e=a.call(this);c(d,b,e);return d}});e(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(a){var b=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){var c=null,e=a.call(this);if(!d._pe.compare(e,d._pe.NULL)){var c=[e],f=this.getSteps();if(1<f)for(var e=d._pe.getPointer(e),g=1;g<f;g++)c.push(d._pe.wrapPointer(e+b*g,d._pe.PeGTlistExtendedGTs))}return c}});var h=d._pe._pe_getPeHorizonSize();b=function(a){return function(){var b=this._cache;b||
(this._cache=b=new Map);if(b.has(a))return b.get(a);var c=null,e=a.call(this);if(!d._pe.compare(e,d._pe.NULL)){var c=[e],f=e.getNump();if(1<f)for(var e=d._pe.getPointer(e),g=1;g<f;g++)c.push(d._pe.wrapPointer(e+h*g,d._pe.PeHorizon))}b.set(a,c);return c}};e(d._pe.PeProjcs.prototype,"horizonGcsGenerate",b);e(d._pe.PeProjcs.prototype,"horizonPcsGenerate",b);d._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=a.PE_STR_OPTS_NONE);d._pe.ensureCache.prepare();var c=d._pe.getPointer(this),e=d._pe.ensureInt8(Array(a.PE_BUFFER_MAX));
return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(c,b,e))}}function h(a){if(a){var b=d._pe.getClass(a);b&&(b=d._pe.getCache(b))&&(a=d._pe.getPointer(a))&&delete b[a]}}function g(a,b){var c=[];b=Array(b);for(var e=0;e<a;e++)c.push(d._pe.ensureInt8(b));return c}function e(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function c(a,b,c,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*b;e++)a[e]=d._pe.getValue(c+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var f=
0===a.length;for(e=0;e<b;e++)f&&(a[e]=Array(2)),a[e][0]=d._pe.getValue(c,"double"),a[e][1]=d._pe.getValue(c+Float64Array.BYTES_PER_ELEMENT,"double"),c+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(d,"__esModule",{value:!0});var f;d._pe=null;d.isLoaded=function(){return!!d._pe};d.isSupported=function(){return!!l("esri-wasm")};d.load=function(){return f?f:f=k.create(function(a,c){r(["./support/pe-wasm"],function(d){d({locateFile:function(a){return r.toUrl("./support/"+a)},onAbort:function(a){c(Error(a))}}).then(function(c){b(c);
a()})})})};(function(b){function f(a,b,f){d._pe.ensureCache.prepare();var g=e(f),h=f===g,g=d._pe.ensureFloat64(g);(a=d._pe._pe_geog_to_proj(d._pe.getPointer(a),b,g))&&c(f,b,g,h);return a}function g(a,b,c){return h(a,b,c,0)}function h(a,b,f,g){d._pe.ensureCache.prepare();var h=e(f),k=f===h,h=d._pe.ensureFloat64(h);(a=d._pe._pe_proj_to_geog_center(d._pe.getPointer(a),b,h,g))&&c(f,b,h,k);return a}b.geogToProj=f;b.projGeog=function(b,c,d,e){switch(e){case a.PE_TRANSFORM_P_TO_G:return g(b,c,d);case a.PE_TRANSFORM_G_TO_P:return f(b,
c,d)}return 0};b.projToGeog=g;b.projToGeogCenter=h})(d.PeCSTransformations||(d.PeCSTransformations={}));var a;(function(a){a.init=function(){a.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;a.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;
a.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;a.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=
d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;
a.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a=d.PeDefs||(d.PeDefs={}));(function(b){function c(a,b){var c=null,g=f[a];g||(g={},f[a]=g);g.hasOwnProperty(String(b))?c=g[b]:(a=d._pe.PeFactory.prototype.factoryByType(a,b),d._pe.compare(a,d._pe.NULL)||(c=a,g[b]=c));return c=e(c)}function e(b){if(b){var c=b.getType();switch(c){case a.PE_TYPE_GEOGCS:b=d._pe.castObject(b,d._pe.PeGeogcs);
break;case a.PE_TYPE_PROJCS:b=d._pe.castObject(b,d._pe.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:b=d._pe.castObject(b,d._pe.PeGeogtran);break;default:c&a.PE_TYPE_UNIT&&(b=d._pe.castObject(b,d._pe.PeUnit))}}return b}var f={},g={};b.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(b){return c(a.PE_TYPE_COORDSYS,b)};b.factoryByType=c;b.fromString=function(a,b){var c=null,f=g[a];f||(f={},g[a]=f);f.hasOwnProperty(b)?c=f[b]:(a=d._pe.PeFactory.prototype.fromString(a,b),
d._pe.compare(a,d._pe.NULL)||(c=a,f[b]=c));return c=e(c)};b.geogcs=function(b){return c(a.PE_TYPE_GEOGCS,b)};b.geogtran=function(b){return c(a.PE_TYPE_GEOGTRAN,b)};b.getCode=function(a){return d._pe.PeFactory.prototype.getCode(a)};b.projcs=function(b){return c(a.PE_TYPE_PROJCS,b)};b.unit=function(b){return c(a.PE_TYPE_UNIT,b)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;var p;(function(a){var b;a.init=function(){a.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
b=d._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(a,c,e,f,g,h){var k=null,l=new d._pe.PeInteger(h);try{var m=d._pe.PeGTlistExtended.prototype.getGTlist(a,c,e,f,g,l);if(h=l.val)if(k=[m],1<h){var p=d._pe.getPointer(m);for(a=1;a<h;a++)k.push(d._pe.wrapPointer(p+b*a,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(l)}return k}})(p=d.PeGTlistExtended||(d.PeGTlistExtended={}));(function(a){a.destroy=function(a){if(a&&a.length){for(var b=0;b<a.length;b++){var c=a[b];h(c);c.getEntries().forEach(function(a){h(a);
a=a.getGeogtran();h(a);a.getParameters().forEach(h);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){h(a);var b=a.getDatum();h(b);h(b.getSpheroid());h(a.getPrimem());h(a.getUnit())})})}d._pe.PeGTlistExtendedEntry.prototype.Delete(a[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));(function(a){a.geogToGeog=function(a,b,f,g,h){d._pe.ensureCache.prepare();var k=e(f),l=f===k,k=d._pe.ensureFloat64(k),m=0;g&&(m=d._pe.ensureFloat64(g));(a=d._pe._pe_geog_to_geog(d._pe.getPointer(a),b,k,m,
h))&&c(f,b,k,l);return a}})(d.PeGTTransformations||(d.PeGTTransformations={}));(function(b){function f(b,c,f,h,k,l){d._pe.ensureCache.prepare();var m,p;switch(b){case "dd":m=d._pe._pe_geog_to_dd;p=a.PE_DD_MAX;break;case "ddm":m=d._pe._pe_geog_to_ddm;p=a.PE_DDM_MAX;break;case "dms":m=d._pe._pe_geog_to_dms,p=a.PE_DMS_MAX}b=0;c&&(b=d._pe.getPointer(c));c=e(h);c=d._pe.ensureFloat64(c);p=g(f,p);h=d._pe.ensureInt32(p);if(k=m(b,f,c,k,h))for(m=0;m<f;m++)l[m]=d._pe.UTF8ToString(p[m]);return k}function h(a,
b,e,f,g){d._pe.ensureCache.prepare();var h;switch(a){case "dd":h=d._pe._pe_dd_to_geog;break;case "ddm":h=d._pe._pe_ddm_to_geog;break;case "dms":h=d._pe._pe_dms_to_geog}a=0;b&&(a=d._pe.getPointer(b));b=f.map(function(a){return d._pe.ensureString(a)});f=d._pe.ensureInt32(b);b=d._pe.ensureFloat64(Array(2*e));(h=h(a,e,f,b))&&c(g,e,b);return h}b.geog_to_dms=function(a,b,c,d,e){return f("dms",a,b,c,d,e)};b.dms_to_geog=function(a,b,c,d){return h("dms",a,b,c,d)};b.geog_to_ddm=function(a,b,c,d,e){return f("ddm",
a,b,c,d,e)};b.ddm_to_geog=function(a,b,c,d){return h("ddm",a,b,c,d)};b.geog_to_dd=function(a,b,c,d,e){return f("dd",a,b,c,d,e)};b.dd_to_geog=function(a,b,c,d){return h("dd",a,b,c,d)}})(d.PeNotationDms||(d.PeNotationDms={}));var q;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
b.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,c,f,h,k,l,p){d._pe.ensureCache.prepare();var m=0;b&&(m=d._pe.getPointer(b));b=e(f);f=d._pe.ensureFloat64(b);b=g(c,a.PE_MGRS_MAX);var n=d._pe.ensureInt32(b);if(h=d._pe._pe_geog_to_mgrs_extended(m,c,f,h,k,l,n))for(k=0;k<c;k++)p[k]=d._pe.UTF8ToString(b[k]);return h};b.mgrs_to_geog_extended=function(a,b,e,f,g){d._pe.ensureCache.prepare();var h=0;a&&(h=d._pe.getPointer(a));a=e.map(function(a){return d._pe.ensureString(a)});
e=d._pe.ensureInt32(a);a=d._pe.ensureFloat64(Array(2*b));(f=d._pe._pe_mgrs_to_geog_extended(h,b,e,f,a))&&c(g,b,a);return f}})(q=d.PeNotationMgrs||(d.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,f,h,k,l,p){d._pe.ensureCache.prepare();var m=0;b&&(m=d._pe.getPointer(b));b=e(f);f=d._pe.ensureFloat64(b);b=g(c,a.PE_MGRS_MAX);var n=d._pe.ensureInt32(b);if(h=d._pe._pe_geog_to_usng(m,c,f,h,k,l,n))for(k=0;k<c;k++)p[k]=d._pe.UTF8ToString(b[k]);return h};b.usng_to_geog=function(a,b,e,f){d._pe.ensureCache.prepare();
var g=0;a&&(g=d._pe.getPointer(a));a=e.map(function(a){return d._pe.ensureString(a)});e=d._pe.ensureInt32(a);a=d._pe.ensureFloat64(Array(2*b));(g=d._pe._pe_usng_to_geog(g,b,e,a))&&c(f,b,a);return g}})(d.PeNotationUsng||(d.PeNotationUsng={}));var v;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,
c,f,h,k){d._pe.ensureCache.prepare();var l=0;b&&(l=d._pe.getPointer(b));b=e(f);f=d._pe.ensureFloat64(b);b=g(c,a.PE_UTM_MAX);var m=d._pe.ensureInt32(b);if(h=d._pe._pe_geog_to_utm(l,c,f,h,m))for(l=0;l<c;l++)k[l]=d._pe.UTF8ToString(b[l]);return h};b.utm_to_geog=function(a,b,e,f,g){d._pe.ensureCache.prepare();var h=0;a&&(h=d._pe.getPointer(a));a=e.map(function(a){return d._pe.ensureString(a)});e=d._pe.ensureInt32(a);a=d._pe.ensureFloat64(Array(2*b));(f=d._pe._pe_utm_to_geog(h,b,e,f,a))&&c(g,b,a);return f}})(v=
d.PeNotationUtm||(d.PeNotationUtm={}));var t;(function(a){var b=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(c,e){void 0===e&&(e=a.PE_PCSINFO_OPTION_DOMAIN);var f,g;b.has(c)&&(g=b.get(c),g[e]&&(f=g[e]));f||(f=d._pe.PePCSInfo.prototype.generate(c,
e),g||(g=[],b.set(c,g)),g[e]=f);return f}})(t=d.PePCSInfo||(d.PePCSInfo={}));(function(a){a.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));d._init=b})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(r,d,n){return function(){function d(d){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(d&&d.steps){var b=0;for(d=d.steps;b<
d.length;b++){var h=d[b];h instanceof n?this.steps.push(h):this.steps.push(new n({wkid:h.wkid,wkt:h.wkt,isInverse:h.isInverse}))}}}d.cacheKey=function(d,b){return[void 0!==d.wkid&&null!==d.wkid?d.wkid.toString():"-1",void 0!==d.wkt&&null!==d.wkt?d.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};d.fromGE=function(k){var b=new d,h="",g=0;for(k=k.steps;g<k.length;g++){var e=n.fromGE(k[g]);b.steps.push(e);h+=e.uid.toString()+
","}b._cached_projection={};b._gtlistentry=null;b._chain=h;return b};d.prototype.getInverse=function(){var k=new d;k.steps=[];for(var b=this.steps.length-1;0<=b;b--)k.steps.push(this.steps[b].getInverse());return k};d.prototype.getGTListEntry=function(){for(var d="",b=0,h=this.steps;b<h.length;b++)d+=h[b].uid.toString()+",";d!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=d);return this._gtlistentry};d.prototype.assignCachedGe=function(k,b,h){this._cached_projection[d.cacheKey(k,
b)]=h};d.prototype.getCachedGeTransformation=function(k,b){for(var h="",g=0,e=this.steps;g<e.length;g++)h+=e[g].uid.toString()+",";h!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=h);k=this._cached_projection[d.cacheKey(k,b)];return void 0===k?null:k};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(r,d){var n=0;return function(){function d(d){void 0===d&&(d=null);this.uid=n++;d?(this._wkt=void 0!==
d.wkt?d.wkt:null,this._wkid=void 0!==d.wkid?d.wkid:-1,this._isInverse=void 0!==d.isInverse?!0===d.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}d.fromGE=function(k){var b=new d;b._wkt=k.wkt;b._wkid=k.wkid;b._isInverse=k.isInverse;return b};Object.defineProperty(d.prototype,"wkt",{get:function(){return this._wkt},set:function(d){this._wkt=d;this.uid=n++},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"wkid",{get:function(){return this._wkid},set:function(d){this._wkid=
d;this.uid=n++},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isInverse",{get:function(){return this._isInverse},set:function(d){this._isInverse=d;this.uid=n++},enumerable:!0,configurable:!0});d.prototype.getInverse=function(){var k=new d;k._wkt=this.wkt;k._wkid=this._wkid;k._isInverse=!this.isInverse;return k};return d}()})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});
d.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,
supportsDisjointSpatialRelationship:!0}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a,b,c){this.items=a;this.queryGeometry=b;this.definitionExpression=c.definitionExpression;this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.fieldsIndex=c.fieldsIndex;this.timeInfo=c.timeInfo;this.featureAdapter=c.featureAdapter}Object.defineProperty(d.prototype,"size",{get:function(){return this.items.length},
enumerable:!0,configurable:!0});d.prototype.createQueryResponse=function(a){var b;b=a.outStatistics?a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a);a.returnQueryGeometry&&(c.isValid(a.outSR)&&!c.equals(this.queryGeometry.spatialReference,a.outSR)?b.queryGeometry=t.cleanFromGeometryEngine(n({spatialReference:a.outSR},q.project(this.queryGeometry,this.queryGeometry.spatialReference,
a.outSR))):b.queryGeometry=t.cleanFromGeometryEngine(n({spatialReference:a.outSR},this.queryGeometry)));return b};d.prototype.executeAttributesQuery=function(a){var b=p.getWhereClause(a.where,this.fieldsIndex);if(!b)return g.resolve(this);if(b.isStandardized){for(var c=0,e=[],f=0,h=this.items;f<h.length;f++){var k=h[f];b.testFeature(k,this.featureAdapter)&&(e[c++]=k)}b=new d(e,this.queryGeometry,this);b.definitionExpression=a.where;return g.resolve(b)}return g.reject(new TypeError("Where clause is not standardized"))};
d.prototype.executeObjectIdsQuery=function(a){if(!a.objectIds||!a.objectIds.length)return g.resolve(this);var c=new b.default(a.objectIds),e=this.featureAdapter.getObjectId;return g.resolve(new d(this.items.filter(function(a){return c.has(e(a))}),this.queryGeometry,this))};d.prototype.executeTimeQuery=function(a){a=v.getTimeOperator(this.timeInfo,a.timeExtent,this.featureAdapter);if(!h.isSome(a))return g.resolve(this);a=this.items.filter(a);return g.resolve(new d(a,this.queryGeometry,this))};d.prototype.project=
function(a){return k(this,void 0,void 0,function(){var b,e,g,h=this;return l(this,function(k){switch(k.label){case 0:if(!a||c.equals(this.spatialReference,a))return[2,this];b=this.featureAdapter;return[4,q.projectMany(this.items.map(function(a){return t.getGeometry(h,b.getGeometry(a))}),this.spatialReference,a)];case 1:return e=k.sent(),g=e.map(function(a,c){return b.cloneWithGeometry(h.items[c],f.convertFromGeometry(a,h.hasZ,h.hasM))}),[2,new d(g,this.queryGeometry,{definitionExpression:this.definitionExpression,
geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:a,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}})})};d.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,d=this.geometryType,f=this.hasM,g=this.hasZ,h=this.objectIdField,k=this.spatialReference,l=a.outFields,p=a.outSR,n=a.quantizationParameters,q=a.resultRecordCount,r=a.resultOffset,v=!1;null!=q&&null!=r&&(q=r+q,v=c.length>
q,c=c.slice(r,Math.min(c.length,q)));return{exceededTransferLimit:v,features:this._createFeatures(a,c),fields:l&&l.map(function(a){return b.fieldsIndex.get(a)}),geometryType:d,hasM:f,hasZ:g,objectIdFieldName:h,spatialReference:t.cleanFromGeometryEngine(p?p:k),transform:n&&e.toQuantizationTransform(n)||null}};d.prototype._createFeatures=function(b,c){var d=new a.default(b,this.featureAdapter,this.fieldsIndex),f=b.quantizationParameters,g=b.returnGeometry,h=b.returnCentroid,k=b.maxAllowableOffset,l=
b.orderByFields;b=[];var p=0;if(c.length&&l&&l.length){var l=l[0].split(" "),n=l[0],q=this.fieldsIndex.get(n),r="DESC"===l[1];c.sort(function(a,b){a=d.getFieldValue(a,n,q);b=d.getFieldValue(b,n,q);if("number"===typeof a&&"number"===typeof b)return r?b-a:a-b;if("string"===typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(r?a>b:a<b)?-1:(r?a<b:a>b)?1:0})}if(g||h)if(f=e.toQuantizationTransform(f),g&&!h)for(h=0;h<c.length;h++)g=c[h],b[p++]={attributes:d.getAttributes(g),geometry:t.getGeometry(this,
this.featureAdapter.getGeometry(g),k,f)};else if(!g&&h)for(k=0;k<c.length;k++)g=c[k],b[p++]={attributes:d.getAttributes(g),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(g,this),f)};else for(h=0;h<c.length;h++)g=c[h],b[p++]={attributes:d.getAttributes(g),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(g,this),f),geometry:t.getGeometry(this,this.featureAdapter.getGeometry(g),k,f)};else for(k=0;k<c.length;k++)g=c[k],(g=d.getAttributes(g))&&(b[p++]={attributes:g});
return b};d.prototype._createExceedsLimitQueryResponse=function(a){var b=!1,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=0;for(a=a.outStatistics;e<a.length;e++){var f=a[e];if("exceedslimit"===f.statisticType){c=null!=f.maxPointCount?f.maxPointCount:Number.POSITIVE_INFINITY;d=null!=f.maxRecordCount?f.maxRecordCount:Number.POSITIVE_INFINITY;b=null!=f.maxVertexCount?f.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)b=this.items.length>
c;else if(this.items.length>d)b=!0;else var c=this.hasZ?this.hasM?4:3:this.hasM?3:2,g=this.featureAdapter,b=this.items.reduce(function(a,b){b=g.getGeometry(b);return a+(b&&b.coords.length||0)},0)/c>b;return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(b)}}]}};d.prototype._createStatisticsQueryResponse=function(b){var c=new a.default(b,this.featureAdapter,this.fieldsIndex),
d=b.outStatistics,e=[],f=[],g=b.groupByFieldsForStatistics;b=b.having;for(var h=g&&g.length,g=h&&g[0],k=this.fieldsIndex.get(g),l=!k,p={},n={},q={},t={attributes:{}},r=0;r<d.length;r++){var v=d[r],y=v.outStatisticFieldName,x=v.statisticType,v="exceedslimit"!==x?v.onStatisticField:void 0,V=this.fieldsIndex.get(v),T=h&&(v===g||l)&&"count"===x;if(h){p[v]||(p[v]=this._calculateUniqueValues(c,g,k));var Z=p[v],Q;for(Q in Z){var J=Z[Q],R=J.count,U=J.data,X=J.items;if(!b||c.validateItems(X,b)){var J=n[U]||
{attributes:{}},ca=null;T?ca=R:(R=this._calculateStatistics(X,c,v,V),X="var"===x?"variance":x,ca=R[X]);J.attributes[y]=ca;J.attributes[l?"EXPR_1":g]=U;n[U]=J}}}else q[v]||(q[v]=this._calculateStatistics(this.items,c,v,V)),R=q[v],X="var"===x?"variance":x,t.attributes[y]=R[X];f.push({name:y,alias:y,type:"esriFieldTypeDouble"})}if(h)for(var G in n)e.push(n[G]);else e.push(t);return{fields:f,features:e}};d.prototype._calculateStatistics=function(a,b,c,d){for(var e=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,
g=null,h=null,k=null,l=null,m=[],p=0,n=0;n<a.length;n++){var q=b.getFieldValue(a[n],c,d);"string"===typeof q?p++:null==q||isNaN(q)||(g+=q,e=Math.min(e,q),f=Math.max(f,q),m.push(q),p++)}if(p){h=g/p;for(b=a=0;b<m.length;b++)q=m[b],a+=Math.pow(q-h,2);l=1<p?a/(p-1):0;k=Math.sqrt(l)}else f=e=null;return{avg:h,count:p,max:f,min:e,stddev:k,sum:g,variance:l}};d.prototype._calculateUniqueValues=function(a,b,c){for(var d={},e=0,f=this.items;e<f.length;e++){var g=f[e],h=a.getFieldValue(g,b,c);if(null==h||"string"===
typeof h&&""===h.trim())h=null;null==d[h]?d[h]={count:1,data:h,items:[g]}:(d[h].count++,d[h].items.push(g))}return d};return d}();d.default=r})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","../../../core/maybe","./attributeSupport"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function b(b,d,e){this._fieldDataCache=new n.default;this._returnDistinctMap=new n.default;this.returnDistinctValues=b.returnDistinctValues;
this.fieldsIndex=e;this.featureAdapter=d;if((b=b.outFields)&&-1===b.indexOf("*")){this.outFields=b;for(var c=d=0;c<b.length;c++){var f=b[c],a=k.getExpressionFromFieldName(f),g=this.fieldsIndex.get(a),a=g?null:k.getWhereClause(a,e),g=g?g.name:k.getAliasFromFieldName(f)||"FIELD_EXP_"+d++;this._fieldDataCache.set(f,{alias:g,clause:a})}}}b.prototype.getAttributes=function(b){b=this._processAttributesForOutFields(b);return this._processAttributesForDistinctValues(b)};b.prototype.getFieldValue=function(b,
d,e){var c=e?e.name:d,f=null;this._fieldDataCache.has(c)?f=this._fieldDataCache.get(c).clause:e||(f=k.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(c,{alias:c,clause:f}));return e?this.featureAdapter.getAttribute(b,c):f.calculateValue(b,this.featureAdapter)};b.prototype.validateItem=function(b,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:k.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d).clause.testFeature(b,this.featureAdapter)};
b.prototype.validateItems=function(b,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:k.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d).clause.testSet(b,this.featureAdapter)};b.prototype._processAttributesForOutFields=function(b){var d=this.outFields;if(!d||!d.length)return this.featureAdapter.getAttributes(b);for(var e={},c=0;c<d.length;c++){var f=this._fieldDataCache.get(d[c]),a=f.alias,f=f.clause;e[a]=f?f.calculateValue(b,this.featureAdapter):this.featureAdapter.getAttribute(b,
a)}return e};b.prototype._processAttributesForDistinctValues=function(b){if(l.isNone(b)||!this.returnDistinctValues)return b;var d=this.outFields,e=[];if(d)for(var c=0;c<d.length;c++){var f=this._fieldDataCache.get(d[c]).alias;e.push(b[f])}else for(f in b)e.push(b[f]);d=(d||["*"]).join(",")+"\x3d"+e.join(",");e=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++e);return 1<e?null:b};return b}();d.default=r})},"esri/layers/graphics/data/timeSupport":function(){define(["require","exports"],
function(r,d){function n(d,b,h,g,e){if(null!=g&&null!=e&&g===e)return function(c){return g>=d.getAttribute(c,b)&&g<=d.getAttribute(c,h)};if(null!=g&&null!=e)return function(c){var f=d.getAttribute(c,b);c=d.getAttribute(c,h);return!(f>e||c<g)};if(null!=g)return function(b){return!(d.getAttribute(b,h)<g)};if(null!=e)return function(c){return!(d.getAttribute(c,b)>e)}}function l(d,b,h,g){if(null!=h&&null!=g&&h===g)return function(e){return d.getAttribute(e,b)===h};if(null!=h&&null!=g)return function(e){return d.getAttribute(e,
b)>=h&&d.getAttribute(e,b)<=g};if(null!=h)return function(e){return d.getAttribute(e,b)>=h};if(null!=g)return function(e){return d.getAttribute(e,b)<=g}}Object.defineProperty(d,"__esModule",{value:!0});d.getTimeExtent=function(d,b){if(!d)return null;var h=b.featureAdapter,g=d.startTimeField,e=d.endTimeField,c=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;if(g&&e)b.forEach(function(a){var b=h.getAttribute(a,g);a=h.getAttribute(a,e);null==b||isNaN(b)||(c=Math.min(c,b));null==a||isNaN(a)||(f=Math.max(f,
a))});else{var a=g||e;b.forEach(function(b){b=h.getAttribute(b,a);null==b||isNaN(b)||(c=Math.min(c,b),f=Math.max(f,b))})}return{start:c,end:f}};d.getTimeOperator=function(d,b,h){if(!b||!d)return null;var g=d.startTimeField;d=d.endTimeField;if(!g&&!d)return null;var e=b.start;b=b.end;return null==e&&null==b?null:g&&d?n(h,g,d,e,b):l(h,g||d,e,b)}})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/jsonMap ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./spatialQuerySupport".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y){function x(a,b,c){c&&(b=q.quantizeOptimizedGeometry(B,b,a.hasZ,a.hasM,"esriGeometryPoint",c));return q.convertToPoint(b,a.hasZ,a.hasM)}function w(a,g,h){return l(this,void 0,void 0,function(){var k,l,p,q,u,r;return n(this,function(n){switch(n.label){case 0:if(!a)return[2,null];k=a.where;a.where=k=k&&k.trim();if(!k||/^1 *= *1$/.test(k)||g&&g===k)a.where=null;return a.geometry?[4,m(a)]:[2,a];case 1:return l=n.sent(),a.distance=0,a.units=null,"esriSpatialRelEnvelopeIntersects"===
a.spatialRel&&(p=a.geometry.spatialReference,l=e.getGeometryExtent(l),l.spatialReference=p),a.geometry=l,[4,t.checkProjectionSupport(l.spatialReference,h)];case 2:return n.sent(),[4,f.normalizeCentralMeridian(c.fromJSON(l))];case 3:q=n.sent()[0];if(b.isNone(q))throw d.QUERY_ENGINE_EMPTY_RESULT;u=q.toJSON();return[4,t.project(u,u.spatialReference,h)];case 4:r=n.sent();if(!r)throw d.QUERY_ENGINE_EMPTY_RESULT;r.spatialReference=h;a.geometry=r;return[2,a]}})})}function m(b){return l(this,void 0,void 0,
function(){var c,d,e,f,k,l,m,p,q,r;return n(this,function(n){switch(n.label){case 0:c=b.geometry;d=b.distance;e=b.units;if(null==d)return[2,h.resolve(c)];f=c.spatialReference;k=e&&u.fromJSON(e)||g.getUnitString(f);l=f&&(a.isGeographic(f)||a.isWebMercator(f));if(!l)return[3,1];p=c;return[3,3];case 1:return[4,t.checkProjectionSupport(f,a.WGS84).then(function(){return t.project(c,a.WGS84)})];case 2:p=n.sent(),n.label=3;case 3:return m=p,[4,y.getGeodesicBufferOperator()];case 4:return q=n.sent(),r=q(m,
d,k),[2,r?r.toJSON():null]}})})}Object.defineProperty(d,"__esModule",{value:!0});var u=new k.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});d.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var z=new v.default,B=new v.default,C={esriGeometryPoint:q.convertToPoint,esriGeometryPolyline:q.convertToPolyline,esriGeometryPolygon:q.convertToPolygon,
esriGeometryMultipoint:q.convertToMultipoint};d.transformCentroid=x;d.getCentroid=function(a,b,c){if("esriGeometryPolygon"!==a.geometryType||!b||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=p.getCentroidOptimizedGeometry(new v.default,b.geometry,a.hasZ,a.hasM));return x(a,b.centroid,c)};d.getGeometry=function(a,b,c,d){b=b?"coords"in b?b:b.geometry:null;return b?c?(c=q.generalizeOptimizedGeometry(z,b,a.hasZ,a.hasM,a.geometryType,c),d&&(c=q.quantizeOptimizedGeometry(B,c,a.hasZ,a.hasM,
a.geometryType,d)),C[a.geometryType](c,a.hasZ,a.hasM)):d?(c=q.quantizeOptimizedGeometry(B,b,a.hasZ,a.hasM,a.geometryType,d),C[a.geometryType](c,a.hasZ,a.hasM)):C[a.geometryType](b,a.hasZ,a.hasM):null};d.normalizeQuery=function(a,b,c){return l(this,void 0,void 0,function(){var d,e,f,g,h;return n(this,function(k){d=a.outFields;e=a.orderByFields;f=a.groupByFieldsForStatistics;g=a.outStatistics;if(d)for(h=0;h<d.length;h++)d[h]=d[h].trim();if(e)for(h=0;h<e.length;h++)e[h]=e[h].trim();if(f)for(h=0;h<f.length;h++)f[h]=
f[h].trim();if(g)for(h=0;h<g.length;h++)g[h].onStatisticField&&(g[h].onStatisticField=g[h].onStatisticField.trim());a.geometry&&!a.outSR&&(a.outSR=a.geometry.spatialReference);return[2,w(a,b,c)]})})};d.normalizeFilter=function(a,b,c){return l(this,void 0,void 0,function(){return n(this,function(d){return[2,w(a,b,c)]})})};d.normalizeQueryLike=w;d.cleanFromGeometryEngine=function(a){return a&&F in a?JSON.parse(JSON.stringify(a,E)):a};var F="_geVersion",E=function(a,b){return a!==F?b:void 0}})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(){return b.create(function(a){return r(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(d,"__esModule",{value:!0});var y={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",
esriSpatialRelRelation:null},x={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},w={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1};d.importGeometryEngine=t;d.getGeodesicBufferOperator=function(){return t().then(function(a){return a.geodesicBuffer})};d.getSpatialQueryOperator=function(c,d,k){if(e.isPolygon(d)&&"esriGeometryPoint"===k.geometryType&&("esriSpatialRelIntersects"===c||"esriSpatialRelContains"===c)){var l=a.convertFromPolygon(new p.default,d,!1,!1);return b.resolve(function(a){return f.polygonContainsPoint(l,!1,!1,a)})}if(e.isPolygon(d)&&"esriGeometryMultipoint"===k.geometryType){var m=
a.convertFromPolygon(new p.default,d,!1,!1);if("esriSpatialRelContains"===c)return b.resolve(function(a){return f.polygonContainsMultipoint(m,!1,!1,a,k.hasZ,k.hasM)})}if(e.isExtent(d)&&"esriGeometryPoint"===k.geometryType&&("esriSpatialRelIntersects"===c||"esriSpatialRelContains"===c))return b.resolve(function(a){return h.extentContainsPoint(d,v.getGeometry(k,a))});if(e.isExtent(d)&&"esriGeometryMultipoint"===k.geometryType&&"esriSpatialRelContains"===c)return b.resolve(function(a){return h.extentContainsMultipoint(d,
v.getGeometry(k,a))});if(e.isExtent(d)&&"esriSpatialRelIntersects"===c){var n=g.getExtentIntersector(k.geometryType);return b.resolve(function(a){return n(d,v.getGeometry(k,a))})}return t().then(function(a){var b=a[y[c]].bind(null,d);return function(a){return b(v.getGeometry(k,a))}})};d.checkSpatialQuerySupport=function(a,b,d){return l(this,void 0,void 0,function(){var f,g;return n(this,function(h){f=a.spatialRel;g=a.geometry;if(!g)return[2];if(!0!==x[f])throw new k("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:a});if(!c.isValid(g.spatialReference)||!c.isValid(d))return[2];if(!0!==w[e.getJsonType(g)])throw new k("feature-store:unsupported-query","Unsupported query geometry type",{query:a});if(!0!==m[b])throw new k("feature-store:unsupported-query","Unsupported layer geometry type",{query:a});return a.outSR?[2,q.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSR)]:[2]})})};d.canQueryWithRBush=function(a){if(e.isExtent(a))return!0;if(e.isPolygon(a)){var b=
0;for(a=a.rings;b<a.length;b++){var c=a[b];if(5!==c.length||c[0][0]!==c[1][0]||c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1}return!0}return!1}})},"esri/layers/graphics/contains":function(){define(["require","exports"],function(r,d){function n(d,k,b,h,g){if(!d)return!1;k=k?b?4:3:b?3:2;b=d.coords;var e=!1,c=0,f=0;for(d=d.lengths;f<d.length;f++){for(var a=d[f],l=c,n=c,r=c+a*k;n<r;n+=k){l=n+k;l===r&&(l=c);var t=b[n],y=b[n+1],x=b[l],l=b[l+1];(y<
g&&l>=g||l<g&&y>=g)&&t+(g-y)/(l-y)*(x-t)<h&&(e=!e)}c+=a*k}return e}Object.defineProperty(d,"__esModule",{value:!0});d.polygonContainsPoint=function(d,k,b,h){return n(d,k,b,h.coords[0],h.coords[1])};d.polygonContainsMultipoint=function(d,k,b,h,g,e){g=g?e?4:3:e?3:2;e=h.coords;h=h.lengths;if(!h)return!1;for(var c=0,f=0;c<h.length;c++,f+=g)if(!n(d,k,b,e[f],e[f+1]))return!1;return!0};d.polygonContainsCoords=n})},"esri/layers/support/PromiseQueue":function(){define(["require","exports","../../core/promiseUtils"],
function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(){this._deferreds=[];this._values=[]}d.prototype.push=function(d){var b=this;return n.create(function(h,g){b._deferreds.push({resolve:h,reject:g});b._values.push(d)})};d.prototype.unshift=function(d){var b=this;return n.create(function(h,g){b._deferreds.unshift({resolve:h,reject:g});b._values.unshift(d)})};Object.defineProperty(d.prototype,"length",{get:function(){return this._deferreds.length},enumerable:!0,
configurable:!0});d.prototype.process=function(){if(0===this.length)return!1;this._deferreds.shift().resolve(this._values.shift());return!0};d.prototype.cancelAll=function(){for(var d=n.createAbortError(),b=0,h=this._deferreds;b<h.length;b++)h[b].reject(d);this._deferreds.length=0;this._values.length=0};return d}();d.PromiseQueue=r})},"esri/views/layers/support/FeatureFilter":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/assignHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../../geometry ../../../TimeExtent ../../../core/jsonMap ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ../../../geometry/support/jsonUtils ../../../tasks/support/Query".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){var t=new c.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y=new c.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(c){function d(a){a=c.call(this,a)||this;a.where=null;a.geometry=null;a.spatialRelationship="intersects";a.hiddenIds=new h.default;a.distance=void 0;a.objectIds=null;a.units=null;a.timeExtent=null;a.enabled=!1;return a}l(d,c);f=d;d.prototype.writeWhere=function(a,b,c){b.where=a||"1\x3d1"};d.prototype.enable=function(){this._set("enabled",!0)};
d.prototype.createQuery=function(b){void 0===b&&(b={});var c=this.where,d=this.spatialRelationship,e=this.timeExtent,f=this.objectIds,g=this.units,h=this.distance;return new v(k({geometry:a.clone(this.geometry),objectIds:a.clone(f),spatialRelationship:d,timeExtent:a.clone(e),where:c,units:g,distance:h},b))};d.prototype.clone=function(){var b=this.where,c=this.geometry,d=this.spatialRelationship,e=this.hiddenIds,g=this.timeExtent,k=this.objectIds,l=this.units,m=this.distance,p=new h.default;e.forEach(function(a){return p.add(a)});
return new f({geometry:a.clone(c),hiddenIds:p,objectIds:a.clone(k),spatialRelationship:d,timeExtent:a.clone(g),where:b,units:l,distance:m})};var f;n([p.property({type:String})],d.prototype,"where",void 0);n([p.writer("where")],d.prototype,"writeWhere",null);n([p.property({types:g.geometryTypes,json:{read:q.fromJSON,write:!0}})],d.prototype,"geometry",void 0);n([p.property({type:String,json:{read:{source:"spatialRel",reader:t.read},write:{target:"spatialRel",writer:t.write}}})],d.prototype,"spatialRelationship",
void 0);n([p.property({json:{write:function(a,c,d){return c[d]=b.from(a)},read:function(a,b){return new h.default(a)}}})],d.prototype,"hiddenIds",void 0);n([p.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],d.prototype,"distance",void 0);n([p.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);n([p.property({type:String,json:{read:y.read,write:{writer:y.write,overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],d.prototype,
"units",void 0);n([p.property({type:e,json:{write:!0}})],d.prototype,"timeExtent",void 0);n([p.property({readOnly:!0})],d.prototype,"enabled",void 0);return d=f=n([p.subclass("esri.views.layers.support.FeatureFilter")],d)}(p.declared(f))})},"esri/views/3d/layers/graphics/Graphics3DFrustumVisibility":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../support/earthUtils ../../support/FrustumExtentIntersection".split(" "),
function(r,d,n,l,k,b,h,g,e,c){var f=-.3*e.earthRadius;return function(a){function d(){var c=a.call(this)||this;c.suspended=!1;c._dirty=!0;c.extent=null;c.extentIntersectionDirty=!0;c._isVisibleBelowSurface=!1;c.handles=new b;c.layerView=null;return c}n(d,a);Object.defineProperty(d.prototype,"dirty",{get:function(){return this._dirty},set:function(a){a!==this._dirty&&(this._dirty=a,this.notifyChange("updating"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return this.dirty},
enumerable:!0,configurable:!0});d.prototype.setup=function(a){var b=this;this.layerView=a;this.extentIntersection=new c.FrustumExtentIntersection({renderCoordsHelper:a.view.renderCoordsHelper});a=a.view;var d=a.basemapTerrain,e=a.resourceController.scheduler;this.handles.add([a.on("resize",function(){return b.viewChange()}),a.state.watch("camera",function(){return b.viewChange()},!0),e.registerTask(6,function(){return b.update()},function(){return b.dirty}),d.on("elevation-bounds-change",function(){return b.elevationBoundsChange()})]);
"local"===a.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add(h.init(d,["opacity","wireframe"],function(){return b.isVisibleBelowSurface=!d.isOpaque()}))};d.prototype.destroy=function(){this.extentIntersection=this.extent=this.layerView=null;this.handles&&(this.handles.destroy(),this.handles=null)};d.prototype.setExtent=function(a){this.extent=a;this.dirty=this.extentIntersectionDirty=!0};d.prototype.viewChange=function(){this.dirty=!0};d.prototype.elevationBoundsChange=function(){this.extentIntersectionDirty=
this.dirty=!0};Object.defineProperty(d.prototype,"isVisibleBelowSurface",{set:function(a){this._isVisibleBelowSurface=a;this.extentIntersectionDirty=this.dirty=!0},enumerable:!0,configurable:!0});d.prototype.update=function(){this.updateSuspendFrustumVisible();this.dirty=!1};d.prototype.updateExtentIntersection=function(){if(this.extentIntersectionDirty){this.extentIntersectionDirty=!1;var a=this.layerView.view,b;if(this._isVisibleBelowSurface)b=f;else{b=a.basemapTerrain.getElevationBounds();var c=
b[0];b=c-Math.max(1,(b[1]-c)*(1.2-1))}this.extentIntersection.update(this.extent,a.spatialReference,b)}};d.prototype.updateSuspendFrustumVisible=function(){this.extent?(this.updateExtentIntersection(),this._set("suspended",!this.extentIntersection.isVisibleInFrustum(this.layerView.view.frustum))):this._set("suspended",!1)};l([g.property({readOnly:!0})],d.prototype,"suspended",void 0);l([g.property({readOnly:!0})],d.prototype,"updating",null);return d=l([g.subclass("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],
d)}(g.declared(k))})},"esri/views/3d/layers/graphics/Graphics3DHighlights":function(){define(["require","exports","./Graphics3DHighlightSet"],function(r,d,n){return function(){function d(){this.graphicsCore=null;this.highlights=[]}d.prototype.destroy=function(){this.highlights.forEach(function(d){return d.highlightSet.removeAll()});this.highlights=null};d.prototype.setup=function(d){this.graphicsCore=d};d.prototype.acquireSet=function(d,b){var h=this,g=new n(d,b);this.highlights.push(g);return{set:g,
handle:{remove:function(){return h.releaseSet(g)},pause:function(){g.highlightSet.removeAll();g.paused=!0},resume:function(){g.paused=!1;h.initializeSet(g)}}}};d.prototype.releaseSet=function(d){d.highlightSet.removeAll();d=this.highlights?this.highlights.indexOf(d):-1;-1!==d&&this.highlights.splice(d,1)};d.prototype.setUids=function(d,b){for(var h=this.graphicsCore.graphics3DGraphics,g=0;g<b.length;g++){var e=b[g];d.ids.add(e);(e=h.get(e))&&e.addHighlight(d.highlightSet,d.options)}};d.prototype.setObjectIds=
function(d,b){b.forEach(function(b){return d.ids.add(b)});this.initializeSet(d)};d.prototype.addGraphic=function(d){this.highlights.forEach(function(b){!b.paused&&b.hasGraphic(d)&&d.addHighlight(b.highlightSet,b.options)})};d.prototype.removeGraphic=function(d){this.highlights.forEach(function(b){b.hasGraphic(d)&&d.removeHighlight(b.highlightSet)})};d.prototype.allGraphicsDeleted=function(){this.highlights.forEach(function(d){return d.highlightSet.removeAll()})};d.prototype.initializeSet=function(d){var b=
this.graphicsCore.graphics3DGraphics;d.objectIdField?b.forEach(function(b){b&&d.hasGraphic(b)&&b.addHighlight(d.highlightSet,d.options)}):d.ids.forEach(function(h){(h=b.get(h))&&h.addHighlight(d.highlightSet,d.options)})};return d}()})},"esri/views/3d/layers/graphics/Graphics3DHighlightSet":function(){define(["require","exports","../../webgl-engine/lib/HighlightSet"],function(r,d,n){return function(){function d(d,b){this.highlightSet=new n;this.ids=new Set;this.paused=!1;this.options=d;this.objectIdField=
b}d.prototype.hasGraphic=function(d){return this.objectIdField?this.ids.has(d.graphic.attributes[this.objectIdField]):this.ids.has(d.graphic.uid)};return d}()})},"esri/views/3d/webgl-engine/lib/HighlightSet":function(){define(["require","exports"],function(r,d){return function(){function d(){this.items=[]}d.prototype.addObject=function(d,k){this.items.push({type:"object",highlightId:k,object:d})};d.prototype.addRenderGeometry=function(d,k,b){this.items.push({type:"renderGeometry",highlightId:k,renderGeometry:d,
owner:b})};d.prototype.addExternal=function(d,k){this.items.push({type:"external",highlightId:k,remove:d})};d.prototype.remove=function(d){for(var k=this.items.length-1;0<=k;--k){var b=this.items[k];b.highlightId===d&&(this.removeHighlight(b),this.items.splice(k,1))}};d.prototype.removeObject=function(d){for(var k=this.items.length-1;0<=k;--k){var b=this.items[k];"object"===b.type&&b.object===d&&(this.removeHighlight(b),this.items.splice(k,1))}};d.prototype.removeRenderGeometry=function(d){for(var k=
this.items.length-1;0<=k;--k){var b=this.items[k];"renderGeometry"===b.type&&b.renderGeometry===d&&(this.removeHighlight(b),this.items.splice(k,1))}};d.prototype.removeAll=function(){var d=this;this.items.forEach(function(k){d.removeHighlight(k)});this.items=[]};d.prototype.removeHighlight=function(d){switch(d.type){case "object":d.object.removeHighlights(d.highlightId);break;case "renderGeometry":d.owner.removeRenderGeometryHighlight(d.renderGeometry,d.highlightId);break;case "external":d.remove(d.highlightId)}};
return d}()})},"esri/views/3d/layers/graphics/Graphics3DScaleVisibility":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Handles ../../../../core/maybe ../../../../core/accessorSupport/decorators ../../../support/layerViewUtils".split(" "),function(r,d,n,l,k,b,h,g,e){function c(b,a){return null!==b&&0<b&&8E7>b||50<a}return function(d){function a(){var a=d.call(this)||this;a._scaleRangeActive=
!1;a._layerScaleRangeVisibilityDirty=!0;a.layerScaleRangeVisibilityQuery=!1;a.scaleChangeEventHandle=null;a.handles=new b;a.layerView=null;a.layer=null;a.queryGraphicUIDsInExtent=null;a.extent=null;a.graphicsCore=null;a.basemapTerrain=null;a.suspended=!1;return a}n(a,d);Object.defineProperty(a.prototype,"layerScaleRangeVisibilityDirty",{get:function(){return this._layerScaleRangeVisibilityDirty},set:function(a){this._layerScaleRangeVisibilityDirty!==a&&(this._layerScaleRangeVisibilityDirty=a,this.notifyChange("updating"))},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"updating",{get:function(){return this.layerView.view.basemapTerrain&&this.layerScaleRangeVisibilityDirty},enumerable:!0,configurable:!0});a.prototype.setup=function(a,b,c,d,e){var f=this;this.layerView=a;this.layer=b;this.queryGraphicUIDsInExtent=c;this.graphicsCore=d;this.basemapTerrain=e;this.updateScaleRangeActive();this.handles.add(this.layerView.view.resourceController.scheduler.registerTask(6,function(){return f.update()},function(){return f.needsUpdate()}))};
a.prototype.destroy=function(){this.scaleChangeEventHandle&&(this.scaleChangeEventHandle.remove(),this.scaleChangeEventHandle=null);this.handles.destroy();this.graphicsCore=this.queryGraphicUIDsInExtent=this.extent=this.layerView=this.handles=null};a.prototype.needsUpdate=function(){return this.layerView.view.basemapTerrain&&this.layerScaleRangeVisibilityDirty};a.prototype.setExtent=function(a){this.extent=a;this.layerScaleRangeVisibilityDirty=!0};a.prototype.update=function(){this.updateSuspendScaleVisible();
this.layerScaleRangeVisibilityDirty=!1};a.prototype.scaleRangeActive=function(){return this._scaleRangeActive};a.prototype.updateScaleRangeActive=function(){var a=this,b=this.layer,d=c(b.minScale,b.maxScale);b.labelingInfo&&!d&&(d=b.labelingInfo.some(function(a){return a&&c(a.minScale,a.maxScale)}));b=this._scaleRangeActive!==d;(this._scaleRangeActive=d)&&!this.scaleChangeEventHandle&&this.basemapTerrain?this.scaleChangeEventHandle=this.basemapTerrain.on("scale-change",function(b){return a.scaleUpdateHandler(b)}):
!d&&this.scaleChangeEventHandle&&(this.scaleChangeEventHandle.remove(),this.scaleChangeEventHandle=null);return b};a.prototype.updateSuspendScaleVisibleFinish=function(a){this.layerScaleRangeVisibilityQuery=!1;this._set("suspended",!a)};a.prototype.updateSuspendScaleVisible=function(){var a=this,b=this.layerView.view.basemapTerrain;this.extent&&b&&this._scaleRangeActive?this.layerScaleRangeVisibilityQuery||(this.layerScaleRangeVisibilityQuery=!0,b.queryVisibleScaleRange(this.extent,this.layer.minScale,
this.layer.maxScale,function(b){return a.updateSuspendScaleVisibleFinish(b)})):this.updateSuspendScaleVisibleFinish(!0)};a.prototype.visibleAtLayerScale=function(a){return e.scaleBoundsPredicate(a,this.layer.minScale||0,this.layer.maxScale||0)};a.prototype.visibleAtLabelScale=function(a,b){return e.scaleBoundsPredicate(a,b.minScale||0,b.maxScale||0)};a.prototype.graphicScale=function(a){var b;h.isSome(a.centroid)?b=a.centroid:h.isSome(a.graphic.geometry)&&"point"===a.graphic.geometry.type&&(b=a.graphic.geometry);
return b?this.layerView.view.basemapTerrain?this.layerView.view.basemapTerrain.getScale(b):1:null};a.prototype.graphicVisible=function(a){a=this.graphicScale(a);return this.visibleAtLayerScale(a)};a.prototype.updateVisibility=function(a){if(this._scaleRangeActive){var b=this.graphicVisible(a);return a.setVisibilityFlag(1,b,0)}return!1};a.prototype.updateGraphicLabelScaleVisibility=function(a){if(!this._scaleRangeActive||!a._labelGraphics||0===a._labelGraphics.length)return!1;var b=this.graphicScale(a);
if(a=this.updateLabelScaleVisibility(a,b))this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty();return a};a.prototype.updateLabelScaleVisibility=function(a,b){if(!a._labelGraphics||0===a._labelGraphics.length)return!1;var c=a._labelGraphics[0]._labelClass;return c&&null!=c.minScale&&null!=c.maxScale&&(b=this.visibleAtLabelScale(b,c),a.setVisibilityFlag(1,b,1))?!0:!1};a.prototype.scaleUpdateHandler=function(a){var b=this;if(!this.layerView.suspended){var c=a.extent,d=a.scale,
e=this.visibleAtLayerScale(d),f=!1;this.queryGraphicUIDsInExtent(c,a.spatialReference,function(a){if(a=b.graphicsCore.getGraphics3DGraphicById(a)){var g=a.centroid;h.isSome(g)&&(c[0]>g.x||c[1]>g.y||c[2]<g.x||c[3]<g.y)||(g=!1,a.setVisibilityFlag(1,e,0)&&(g=!0),b.updateLabelScaleVisibility(a,d)&&(g=!0),g&&(f=!0))}});f&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty())}this.layerScaleRangeVisibilityDirty=!0};a.prototype.layerMinMaxScaleChangeHandler=function(){this.updateScaleRangeActive()&&
(this._scaleRangeActive?this.graphicsCore.updateAllGraphicsVisibility():this.graphicsCore.modifyGraphics3DGraphicVisibilities(function(a){return a.clearVisibilityFlag(1)}));this.layerScaleRangeVisibilityDirty=!0};l([g.property({readOnly:!0})],a.prototype,"suspended",void 0);l([g.property({readOnly:!0})],a.prototype,"updating",null);return a=l([g.subclass("esri.views.3d.layers.graphics.Graphics3DScaleVisibility")],a)}(g.declared(k))})},"esri/views/3d/layers/support/attributeUtils":function(){define(["require",
"exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.attributeLookup=function(d,l){l=l.toLowerCase();for(var k=0,b=Object.keys(d);k<b.length;k++){var h=b[k];if(h.toLowerCase()===l)return d[h]}return null}})},"esri/views/3d/layers/support/projectExtentUtils":function(){define("require exports ../../../../core/asyncUtils ../../../../core/promiseUtils ../../../../geometry/support/webMercatorUtils ../../../../portal/support/geometryServiceUtils".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,
"__esModule",{value:!0});d.toViewIfLocal=function(d){var g=d.view.spatialReference,e=d.layer.fullExtent,c=e&&e.spatialReference;return c?c.equals(g)?l.resolve(e.clone()):k.canProject(c,g)?l.resolve(k.project(e,g)):d.view.state.isLocal?n.safeCast(b.projectGeometry(e,g,d.layer.portalItem).then(function(b){if(!d.destroyed&&b)return b}).catch(function(){return null})):l.resolve(null):l.resolve(null)}})},"esri/views/3d/support/EventedSet":function(){define("require exports ../../../core/tsSupport/extendsHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../../core/Evented".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function d(){var d=null!==b&&b.apply(this,arguments)||this;d._set=new k.default;return d}n(d,b);d.prototype.clear=function(){if(0<this._set.size){var b=this.toArray();this._set.clear();this.emit("change",{added:[],removed:b})}};Object.defineProperty(d.prototype,"length",{get:function(){return this._set.size},enumerable:!0,configurable:!0});d.prototype.addMany=function(b){if(0!==b.length){for(var c=0;c<b.length;c++)this._set.add(b[c]);
this.emit("change",{added:b,removed:[]})}};d.prototype.removeMany=function(b){for(var c=[],d=0;d<b.length;d++){var a=b[d];this._set.delete(a)&&c.push(a)}0<c.length&&this.emit("change",{added:[],removed:c})};d.prototype.toArray=function(){return l.from(this._set)};d.prototype.find=function(b){for(var c=this._set.entries(),d=c.next();!d.done;d=c.next())if(b(d.value[0]))return d.value[0]};d.prototype.forEach=function(b){this._set.forEach(function(c){return b(c)})};return d}(b);d.EventedSet=r})},"esri/views/layers/FeatureLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../../layers/support/timeUtils ../../support/arcadeOnDemand ../../tasks/support/Query ./RefreshableLayerView ./support/FeatureEffect ./support/FeatureFilter ./support/popupUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B){var C=f.getLogger("esri.views.layers.FeatureLayerView");return function(d){function f(a){a=d.call(this,a)||this;a.effect=null;a.filter=null;a.layer=null;a.requiredFields=null;a.view=null;return a}n(f,d);f.prototype.initialize=function(){var a=this;q.init(this,"layer.renderer layer.labelingInfo layer.elevationInfo.featureExpressionInfo filter effect layer.timeInfo timeExtent".split(" "),function(){return a._updateRequiredFields()})};Object.defineProperty(f.prototype,
"availableFields",{get:function(){var a=this.layer,b=this.layer.fields,c=this.requiredFields;return"outFields"in a&&a.outFields?t.fixFields(b,t.unpackFieldNames(b,a.outFields).concat(c)):t.fixFields(b,c)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(a){C.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"maximumNumberOfFeaturesExceeded",
{get:function(){return!1},enumerable:!0,configurable:!0});f.prototype.highlight=function(a,b){void 0===b&&(b={});return this.inherited(arguments)};f.prototype.createQuery=function(){var b={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},b=a.isSome(this.filter)?this.filter.createQuery(b):new w(b);this.timeExtent&&(b.timeExtent=b.timeExtent?b.timeExtent.intersection(this.timeExtent):this.timeExtent.clone());return b};f.prototype.queryFeatures=function(a,b){return this.inherited(arguments)};
f.prototype.queryObjectIds=function(a,b){return this.inherited(arguments)};f.prototype.queryFeatureCount=function(a,b){return this.inherited(arguments)};f.prototype.queryExtent=function(a,b){return this.inherited(arguments)};f.prototype._updateRequiredFields=function(){return h(this,void 0,void 0,function(){var c,d,f,h,k,l,m,n,q,u,r,v,w;return b(this,function(b){switch(b.label){case 0:if(!this.layer||!this.view)return[2];c="3d"===this.view.type;d=this;h=f=d.layer;k=h.fields;l=h.objectIdField;m=h.renderer;
n=new e.default;return[4,p.eachAlways([m?m.collectRequiredFields(n,k):null,t.collectLabelingFields(n,f),c?t.collectElevationFields(n,f):null,a.isSome(this.filter)?t.collectFilterFields(n,f,this.filter):null,this.effect?t.collectFilterFields(n,f,this.effect.filter):null])];case 1:q=b.sent();f.timeInfo&&this.timeExtent&&t.collectFields(n,f.fields,[f.timeInfo.startField,f.timeInfo.endField]);u=0;for(r=q;u<r.length;u++)v=r[u],v.error&&C.error(v.error);t.collectField(n,k,l);w=g.from(n).sort();this._set("requiredFields",
w);return[2]}})})};f.prototype.validateFetchPopupFeatures=function(a){var b=this.layer;if(!this.layer.popupEnabled)return new c("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:b});if(!B.getFetchPopupTemplate(this.layer,a))return new c("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:b})};f.prototype.fetchClientPopupFeatures=function(c){return h(this,void 0,void 0,function(){var d,e,f,g,h,k,l,m,n,q,u,r;return b(this,function(b){switch(b.label){case 0:d=
a.isSome(c)?c.clientGraphics:null;if(!d||0===d.length)return[2,p.resolve([])];e=[];f=[];g=this.layer;h=B.getFetchPopupTemplate(g,c);return a.isSome(h)?[4,x.loadArcade()]:[2,p.resolve([])];case 1:return k=b.sent().arcadeUtils,l=k.hasGeometryOperations(h),[4,this.createPopupQuery(c)];case 2:m=b.sent();n=t.unpackFieldNames(g.fields,m.outFields);q=0;for(u=d;q<u.length;q++)r=u[q],l||!t.featureHasFields(n,r)?f.push(r):e.push(r);if(0===f.length)return[2,p.resolve(e)];m.objectIds=f.map(function(a){return a.attributes[g.objectIdField]});
return[2,g.queryFeatures(m).then(function(a){return e.concat(a.features)}).catch(function(){return f})]}})})};f.prototype.createPopupQuery=function(a){return h(this,void 0,void 0,function(){var c,d,e;return b(this,function(b){switch(b.label){case 0:return c=this.layer,d=c.createQuery(),d.returnGeometry=!0,d.returnZ=!0,d.returnM=!0,e=d,[4,B.getRequiredFields(this.layer,B.getFetchPopupTemplate(this.layer,a))];case 1:return e.outFields=b.sent(),d.outSpatialReference=this.view.spatialReference,[2,d]}})})};
l([v.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],f.prototype,"availableFields",null);l([v.property({type:u})],f.prototype,"effect",void 0);l([v.property({type:z})],f.prototype,"filter",void 0);l([v.property(y.combinedViewLayerTimeExtentProperty)],f.prototype,"timeExtent",void 0);l([v.property()],f.prototype,"layer",void 0);l([v.property({type:Number})],f.prototype,"maximumNumberOfFeatures",null);l([v.property({readOnly:!0,type:Boolean})],f.prototype,"maximumNumberOfFeaturesExceeded",
null);l([v.property({readOnly:!0})],f.prototype,"requiredFields",void 0);l([v.property()],f.prototype,"view",void 0);return f=l([v.subclass("esri.views.layers.FeatureLayerView")],f)}(v.declared(m))})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h,g,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.refreshTimestamp=null;a.refreshDebounced=g.debounce(function(c,d){return b(a,void 0,void 0,function(){var a;return k(this,function(b){switch(b.label){case 0:return"number"===typeof c?a=c:(a=Date.now(),d=c),this._set("refreshTimestamp",a),this.doRefresh?[4,this.doRefresh(d)]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})},2E3);return a}n(d,c);d.prototype.refresh=function(a){void 0===a&&
(a=Date.now());this._set("refreshTimestamp",a);this.doRefresh&&this.doRefresh()};l([e.property()],d.prototype,"layer",void 0);l([e.aliasOf("layer.refreshInterval")],d.prototype,"refreshInterval",void 0);l([e.property({readOnly:!0})],d.prototype,"refreshTimestamp",void 0);return d=l([e.subclass("esri.layers.mixins.RefreshableLayerView")],d)}(e.declared(h))})},"esri/views/layers/support/FeatureEffect":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ./FeatureFilter ./ParsedFeatureEffect ./Transition".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){var a=b.getLogger("esri.views.layers.support.FeatureEffect");return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.filter=null;a.includedEffect=null;a.excludedEffect=null;a.excludedLabelsVisible=!1;return a}l(d,b);k=d;Object.defineProperty(d.prototype,"insideEffect",{get:function(){a.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");return this.includedEffect},set:function(b){a.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");
this.includedEffect=b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"outsideEffect",{get:function(){a.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");return this.excludedEffect},set:function(b){a.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");this.excludedEffect=b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parsedIncludedEffect",{get:function(){return h.isSome(this.includedEffect)?
"string"===typeof this.includedEffect?c.fromString(this.includedEffect):new f({from:c.fromString(this.includedEffect.from),to:c.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parsedExcludedEffect",{get:function(){return h.isSome(this.excludedEffect)?"string"===typeof this.excludedEffect?c.fromString(this.excludedEffect):new f({from:c.fromString(this.excludedEffect.from),to:c.fromString(this.excludedEffect.to),
duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"done",{get:function(){return(!h.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!h.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0});d.prototype.clone=
function(){return new k({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})};var k;n([g.property({type:e,json:{write:!0}})],d.prototype,"filter",void 0);n([g.property({type:String,json:{write:!0}})],d.prototype,"includedEffect",void 0);n([g.property({type:String,json:{write:!0}})],d.prototype,"excludedEffect",void 0);n([g.property({type:Boolean,json:{write:!0}})],d.prototype,"excludedLabelsVisible",
void 0);n([g.property({dependsOn:["includedEffect"]})],d.prototype,"parsedIncludedEffect",null);n([g.property({dependsOn:["excludedEffect"]})],d.prototype,"parsedExcludedEffect",null);n([g.property({dependsOn:["includedEffect","excludedEffect"]})],d.prototype,"renderingHash",null);return d=k=n([g.subclass("esri.views.layers.support.FeatureEffect")],d)}(g.declared(k))})},"esri/views/layers/support/ParsedFeatureEffect":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/assignHelper ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f32 ./cssFilterParser".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){var q=g.getLogger("esri.views.layers.support.ParsedFeatureEffect"),v={grayscale:function(b){b=1-b.amount;b=a.mat4f32.fromValues(.2126+.7874*b,.7152-.7152*b,.0722-.0722*b,0,.2126-.2126*b,.7152+.2848*b,.0722-.0722*b,0,.2126-.2126*b,.7152-.7152*b,.0722+.9278*b,0,0,0,0,1);return f.mat4.transpose(b,b)},sepia:function(b){b=1-b.amount;b=a.mat4f32.fromValues(.393+.607*b,.769-.769*b,.189-.189*b,0,.349-.349*b,.686+.314*b,.168-.168*b,0,.272-.272*b,.534-.534*b,.131+.869*b,
0,0,0,0,1);return f.mat4.transpose(b,b)},saturate:function(b){b=b.amount;b=a.mat4f32.fromValues(.213+.787*b,.715-.715*b,.072-.072*b,0,.213-.213*b,.715+.285*b,.072-.072*b,0,.213-.213*b,.715-.715*b,.072+.928*b,0,0,0,0,1);return f.mat4.transpose(b,b)},"hue-rotate":function(b){var c=Math.sin(b.angle*Math.PI/180);b=Math.cos(b.angle*Math.PI/180);c=a.mat4f32.fromValues(.213+.787*b-.213*c,.715-.715*b-.715*c,.072-.072*b+.928*c,0,.213-.213*b+.143*c,.715+.285*b+.14*c,.072-.072*b-.283*c,0,.213-.213*b-.787*c,
.715-.715*b+.715*c,.072+.928*b+.072*c,0,0,0,0,1);return f.mat4.transpose(c,c)},invert:function(b){var c=1-2*b.amount;b=b.amount;c=a.mat4f32.fromValues(c,0,0,b,0,c,0,b,0,0,c,b,0,0,0,1);return f.mat4.transpose(c,c)},brightness:function(b){b=b.amount;b=a.mat4f32.fromValues(b,0,0,0,0,b,0,0,0,0,b,0,0,0,0,1);return f.mat4.transpose(b,b)},contrast:function(b){b=b.amount;b=a.mat4f32.fromValues(b,0,0,.5-.5*b,0,b,0,.5-.5*b,0,0,b,.5-.5*b,0,0,0,1);return f.mat4.transpose(b,b)}};return function(d){function g(){var a=
null!==d&&d.apply(this,arguments)||this;a.customTransforms=null;a.done=!0;return a}l(g,d);h=g;g.fromString=function(a){var c=[],d=null;try{for(var e=0,f=p.parse(a);e<f.length;e++){var g=f[e];"opacity"===g.type?d=g:c.push(g)}}catch(F){q.error(new b("invalid-type","Encountered an error when parsing css",F))}return new h({transforms:c,opacity:d})};g.prototype.getOpacity=function(){return e.isSome(this.opacity)?this.opacity.amount:1};g.prototype.getColorMatrix=function(){var b=this;return(this.transforms||
[]).map(function(a){return k({},a)}).reverse().reduce(function(a,c){return f.mat4.multiply(a,a,b._getFactory(c)(c))},a.mat4f32.create())};g.prototype.clone=function(){return new h({transforms:this.transforms&&this.transforms.map(function(a){return k({},a)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(a){return k({},a)})})};g.prototype._getFactory=function(b){var c=v[b.type];if(!c){if(this.customTransforms)for(var c=function(c){if(c.type===b.type){c=a.mat4f32.fromValues.apply(a.mat4f32,
c.matrix);var d=f.mat4.transpose(c,c);return{value:function(a){return d}}}},d=0,e=this.customTransforms;d<e.length;d++){var g=c(e[d]);if("object"===typeof g)return g.value}q.error("invalid-type","No effect "+b.type+" exists");return function(b){return a.mat4f32.create()}}return c};var h;n([c.property()],g.prototype,"opacity",void 0);n([c.property()],g.prototype,"transforms",void 0);n([c.property()],g.prototype,"customTransforms",void 0);return g=h=n([c.subclass("esri.views.layers.support.ParsedFeatureEffect")],
g)}(c.declared(h))})},"esri/views/layers/support/cssFilterParser":function(){define([],function(){function r(d,n,l,k){this.message=d;this.expected=n;this.found=l;this.location=k;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}(function(d,n){function l(){this.constructor=d}l.prototype=n.prototype;d.prototype=new l})(r,Error);r.buildMessage=function(d,n){function l(b){return b.charCodeAt(0).toString(16).toUpperCase()}function k(b){return b.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+l(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+l(b)})}function b(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+l(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(b){return"\\x"+l(b)})}var h={literal:function(b){return'"'+k(b.text)+'"'},"class":function(d){var e="",c;for(c=0;c<d.parts.length;c++)e+=d.parts[c]instanceof Array?b(d.parts[c][0])+"-"+b(d.parts[c][1]):b(d.parts[c]);return"["+(d.inverted?"^":"")+e+"]"},any:function(b){return"any character"},end:function(b){return"end of input"},other:function(b){return b.description}};return"Expected "+function(b){var d=Array(b.length),c;for(c=0;c<b.length;c++){var f=c,a;a=b[c];a=h[a.type](a);d[f]=a}d.sort();
if(0<d.length){for(b=c=1;c<d.length;c++)d[c-1]!==d[c]&&(d[b]=d[c],b++);d.length=b}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(d)+" but "+(n?'"'+k(n)+'"':"end of input")+" found."};return{SyntaxError:r,parse:function(d,n){function l(a,b){return{type:"literal",text:a,ignoreCase:b}}function k(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function b(a){return{type:"other",description:a}}function h(a){var b=
Eb[a],c;if(!b){for(c=a-1;!Eb[c];)c--;b=Eb[c];for(b={line:b.line,column:b.column};c<a;)10===d.charCodeAt(c)?(b.line++,b.column=1):b.column++,c++;Eb[a]=b}return b}function g(a,b){var c=h(a),d=h(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function e(a){M<Va||(M>Va&&(Va=M,Nb=[]),Nb.push(a))}function c(){var a,b;ha++;a=M;b=w();b!==m?(d.substr(M,4)===C?(b=C,M+=4):(b=m,0===ha&&e(F)),b!==m?(b=w(),b!==m?(Ja=a,a=null):(M=a,a=m)):(M=a,a=m)):(M=a,a=m);ha--;
a===m&&(b=m,0===ha&&e(B));if(a===m)if(a=[],b=f(),b!==m)for(;b!==m;)a.push(b),b=f();else a=m;return a}function f(){var b,c,f,h,k,l,n,u,z;ha++;c=M;f=w();f!==m?(d.substr(M,5)===N?(h=N,M+=5):(h=m,0===ha&&e(L)),h!==m?(k=w(),k!==m?(l=t(),l!==m?(n=w(),n!==m?(41===d.charCodeAt(M)?(u=K,M++):(u=m,0===ha&&e(O)),u!==m?(z=w(),z!==m?(Ja=c,c=f={type:"blur",radius:l}):(M=c,c=m)):(M=c,c=m)):(M=c,c=m)):(M=c,c=m)):(M=c,c=m)):(M=c,c=m)):(M=c,c=m);ha--;c===m&&(f=m,0===ha&&e(E));b=c;if(b===m){var y,B,A,C,F,Ea,Ha,Ga;ha++;
y=M;B=w();B!==m?(d.substr(M,11)===H?(A=H,M+=11):(A=m,0===ha&&e(S)),A!==m?(C=w(),C!==m?(F=a(),F!==m?(Ea=w(),Ea!==m?(41===d.charCodeAt(M)?(Ha=K,M++):(Ha=m,0===ha&&e(O)),Ha!==m?(Ga=w(),Ga!==m?(Ja=y,y=B={type:"brightness",amount:F}):(M=y,y=m)):(M=y,y=m)):(M=y,y=m)):(M=y,y=m)):(M=y,y=m)):(M=y,y=m)):(M=y,y=m);ha--;y===m&&(B=m,0===ha&&e(I));b=y;if(b===m){var qa,ba,fa,za,yb,oa,Ia,ra;ha++;qa=M;ba=w();ba!==m?(d.substr(M,9)===V?(fa=V,M+=9):(fa=m,0===ha&&e(T)),fa!==m?(za=w(),za!==m?(yb=a(),yb!==m?(oa=w(),oa!==
m?(41===d.charCodeAt(M)?(Ia=K,M++):(Ia=m,0===ha&&e(O)),Ia!==m?(ra=w(),ra!==m?(Ja=qa,qa=ba={type:"contrast",amount:yb}):(M=qa,qa=m)):(M=qa,qa=m)):(M=qa,qa=m)):(M=qa,qa=m)):(M=qa,qa=m)):(M=qa,qa=m)):(M=qa,qa=m);ha--;qa===m&&(ba=m,0===ha&&e(P));b=qa;if(b===m){var ka,ua,wa,va,Ib,xa,ya,cc,Da,La,Ka,gb,ub,tb;ha++;ka=M;ua=w();if(ua!==m)if(d.substr(M,12)===Q?(wa=Q,M+=12):(wa=m,0===ha&&e(J)),wa!==m)if(va=w(),va!==m)if(Ib=t(),Ib!==m)if(xa=w(),xa!==m)if(ya=t(),ya!==m)if(cc=w(),cc!==m)if(Da=t(),Da===m&&(Da=null),
Da!==m)if(La=w(),La!==m){var W,Sa,Fa,Na,Ta,Ua,Za,ab,hb,Qa,jb,Pa,Va,cb,zb,qb,Eb,Kb;W=M;35===d.charCodeAt(M)?(Sa=Ab,M++):(Sa=m,0===ha&&e(Qb));if(Sa!==m)if(Fa=M,Na=x(),Na!==m?(Ta=x(),Ta!==m?Fa=Na=[Na,Ta]:(M=Fa,Fa=m)):(M=Fa,Fa=m),Fa!==m)if(Na=M,Ta=x(),Ta!==m?(Ua=x(),Ua!==m?Na=Ta=[Ta,Ua]:(M=Na,Na=m)):(M=Na,Na=m),Na!==m)if(Ta=M,Ua=x(),Ua!==m?(Za=x(),Za!==m?Ta=Ua=[Ua,Za]:(M=Ta,Ta=m)):(M=Ta,Ta=m),Ta!==m){Ja=W;var Nb=Na,gc=Ta;W=Sa=[parseInt(Fa.join(""),16),parseInt(Nb.join(""),16),parseInt(gc.join(""),16)]}else M=
W,W=m;else M=W,W=m;else M=W,W=m;else M=W,W=m;if(W===m){W=M;35===d.charCodeAt(M)?(Sa=Ab,M++):(Sa=m,0===ha&&e(Qb));if(Sa!==m)if(Fa=x(),Fa!==m)if(Na=x(),Na!==m)if(Ta=x(),Ta!==m){Ja=W;var Lb=Na,hc=Ta;W=Sa=[parseInt([Fa,Fa].join(""),16),parseInt([Lb,Lb].join(""),16),parseInt([hc,hc].join(""),16)]}else M=W,W=m;else M=W,W=m;else M=W,W=m;else M=W,W=m;if(W===m&&(W=M,d.substr(M,5)===$a?(Sa=$a,M+=5):(Sa=m,0===ha&&e(pb)),Sa!==m?(Fa=w(),Fa!==m?(Na=q(),Na!==m?(Ta=w(),Ta!==m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=
m,0===ha&&e(nb)),Ua!==m?(Za=w(),Za!==m?(ab=q(),ab!==m?(hb=w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),Qa!==m?(jb=w(),jb!==m?(Pa=q(),Pa!==m?(Va=w(),Va!==m?(44===d.charCodeAt(M)?(cb=bb,M++):(cb=m,0===ha&&e(nb)),cb!==m?(zb=w(),zb!==m?(qb=a(),qb!==m?(Eb=w(),Eb!==m?(41===d.charCodeAt(M)?(Kb=K,M++):(Kb=m,0===ha&&e(O)),Kb!==m?(Ja=W,W=Sa=[255*Na,255*ab,255*Pa,qb]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):
(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m&&(W=M,d.substr(M,5)===$a?(Sa=$a,M+=5):(Sa=m,0===ha&&e(pb)),Sa!==m?(Fa=w(),Fa!==m?(Na=p(),Na!==m?(Ta=w(),Ta!==m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=m,0===ha&&e(nb)),Ua!==m?(Za=w(),Za!==m?(ab=p(),ab!==m?(hb=w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),Qa!==m?(jb=w(),jb!==m?(Pa=p(),Pa!==m?(44===d.charCodeAt(M)?(Va=bb,M++):(Va=m,0===ha&&e(nb)),Va!==m?(cb=w(),cb!==m?(zb=a(),zb!==m?(41===d.charCodeAt(M)?(qb=K,
M++):(qb=m,0===ha&&e(O)),qb!==m?(Ja=W,W=Sa=[Na,ab,Pa,zb]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m&&(W=M,d.substr(M,5)===$a?(Sa=$a,M+=5):(Sa=m,0===ha&&e(pb)),Sa!==m?(Fa=w(),Fa!==m?(Na=q(),Na!==m?(Ta=w(),Ta!==m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=m,0===ha&&e(nb)),Ua!==m?(Za=w(),Za!==m?(ab=q(),ab!==m?(hb=w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),
Qa!==m?(jb=w(),jb!==m?(Pa=q(),Pa!==m?(Va=w(),Va!==m?(41===d.charCodeAt(M)?(cb=K,M++):(cb=m,0===ha&&e(O)),cb!==m?(Ja=W,W=Sa=[255*Na,255*ab,255*Pa,1]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m&&(W=M,d.substr(M,5)===$a?(Sa=$a,M+=5):(Sa=m,0===ha&&e(pb)),Sa!==m?(Fa=w(),Fa!==m?(Na=p(),Na!==m?(Ta=w(),Ta!==m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=m,0===ha&&e(nb)),Ua!==m?(Za=w(),Za!==m?(ab=p(),ab!==m?(hb=
w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),Qa!==m?(jb=w(),jb!==m?(Pa=p(),Pa!==m?(41===d.charCodeAt(M)?(Va=K,M++):(Va=m,0===ha&&e(O)),Va!==m?(Ja=W,W=Sa=[Na,ab,Pa,1]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m&&(W=M,d.substr(M,4)===Jb?(Sa=Jb,M+=4):(Sa=m,0===ha&&e(fc)),Sa!==m?(Fa=w(),Fa!==m?(Na=q(),Na!==m?(Ta=w(),Ta!==m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=m,0===ha&&e(nb)),Ua!==m?(Za=
w(),Za!==m?(ab=q(),ab!==m?(hb=w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),Qa!==m?(jb=w(),jb!==m?(Pa=q(),Pa!==m?(Va=w(),Va!==m?(41===d.charCodeAt(M)?(cb=K,M++):(cb=m,0===ha&&e(O)),cb!==m?(Ja=W,W=Sa=[255*Na,255*ab,255*Pa,1]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m&&(W=M,d.substr(M,4)===Jb?(Sa=Jb,M+=4):(Sa=m,0===ha&&e(fc)),Sa!==m?(Fa=w(),Fa!==m?(Na=p(),Na!==m?(Ta=w(),Ta!==
m?(44===d.charCodeAt(M)?(Ua=bb,M++):(Ua=m,0===ha&&e(nb)),Ua!==m?(Za=w(),Za!==m?(ab=p(),ab!==m?(hb=w(),hb!==m?(44===d.charCodeAt(M)?(Qa=bb,M++):(Qa=m,0===ha&&e(nb)),Qa!==m?(jb=w(),jb!==m?(Pa=p(),Pa!==m?(Va=w(),Va!==m?(41===d.charCodeAt(M)?(cb=K,M++):(cb=m,0===ha&&e(O)),cb!==m?(Ja=W,W=Sa=[Na,ab,Pa,1]):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m)):(M=W,W=m),W===m))))))){var Pb,Zb,Tb;ha++;Pb=M;Zb=[];Db.test(d.charAt(M))?
(Tb=d.charAt(M),M++):(Tb=m,0===ha&&e(Vb));if(Tb!==m)for(;Tb!==m;)Zb.push(Tb),Db.test(d.charAt(M))?(Tb=d.charAt(M),M++):(Tb=m,0===ha&&e(Vb));else Zb=m;if(Zb!==m){Ja=Pb;var rc=d.substring(Ja,M);if(!oc.has(rc)){var Mc='unknown color "'+rc+'"',$b=void 0,$b=void 0!==$b?$b:g(Ja,M);throw new r(Mc,null,null,$b);}Zb=Mb[rc].concat(1)}Pb=Zb;ha--;Pb===m&&(Zb=m,0===ha&&e(Rb));W=Pb}}Ka=W;Ka===m&&(Ka=null);Ka!==m?(gb=w(),gb!==m?(41===d.charCodeAt(M)?(ub=K,M++):(ub=m,0===ha&&e(O)),ub!==m?(tb=w(),tb!==m?(Ja=ka,ka=
ua={type:"drop-shadow",offsetX:Ib,offsetY:ya,blurRadius:Da,color:Ka}):(M=ka,ka=m)):(M=ka,ka=m)):(M=ka,ka=m)):(M=ka,ka=m)}else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;else M=ka,ka=m;ha--;ka===m&&(ua=m,0===ha&&e(Z));b=ka;if(b===m){var kb,vc,nc,yc,ac,sc,tc,Nc;ha++;kb=M;vc=w();vc!==m?(d.substr(M,10)===U?(nc=U,M+=10):(nc=m,0===ha&&e(X)),nc!==m?(yc=w(),yc!==m?(ac=a(),ac!==m?(sc=w(),sc!==m?(41===d.charCodeAt(M)?(tc=K,M++):(tc=m,0===
ha&&e(O)),tc!==m?(Nc=w(),Nc!==m?(Ja=kb,kb=vc={type:"grayscale",amount:ac}):(M=kb,kb=m)):(M=kb,kb=m)):(M=kb,kb=m)):(M=kb,kb=m)):(M=kb,kb=m)):(M=kb,kb=m)):(M=kb,kb=m);ha--;kb===m&&(vc=m,0===ha&&e(R));b=kb;if(b===m){var lb,bc,ic,Zc,Pc,$c,Qc,D;ha++;lb=M;bc=w();if(bc!==m)if(d.substr(M,11)===G?(ic=G,M+=11):(ic=m,0===ha&&e(Y)),ic!==m)if(Zc=w(),Zc!==m){var fb,ob,Bb;ha++;fb=M;var da,xb,Ad;ha++;da=M;Oa.test(d.charAt(M))?(xb=d.charAt(M),M++):(xb=m,0===ha&&e(eb));xb===m&&(xb=null);xb!==m?(Ad=p(),Ad!==m?(Ja=da,
da=xb=parseFloat(d.substring(Ja,M))):(M=da,da=m)):(M=da,da=m);ha--;da===m&&(xb=m,0===ha&&e(ea));ob=da;ob!==m?(Bb=v(),Bb!==m?(Ja=fb,fb=ob*=Bb):(M=fb,fb=m)):(M=fb,fb=m);fb===m&&(fb=M,48===d.charCodeAt(M)?(ob=Ya,M++):(ob=m,0===ha&&e(Xa)),ob!==m?(Bb=v(),Bb===m&&(Bb=null),Bb!==m?(Ja=fb,fb=ob=0):(M=fb,fb=m)):(M=fb,fb=m));ha--;fb===m&&(ob=m,0===ha&&e(ma));Pc=fb;Pc!==m?($c=w(),$c!==m?(41===d.charCodeAt(M)?(Qc=K,M++):(Qc=m,0===ha&&e(O)),Qc!==m?(D=w(),D!==m?(Ja=lb,lb=bc={type:"hue-rotate",angle:Pc}):(M=lb,
lb=m)):(M=lb,lb=m)):(M=lb,lb=m)):(M=lb,lb=m)}else M=lb,lb=m;else M=lb,lb=m;else M=lb,lb=m;ha--;lb===m&&(bc=m,0===ha&&e(ca));b=lb;if(b===m){var rb,dd,rd,Bd,sd,Cd,td,Ra;ha++;rb=M;dd=w();dd!==m?(d.substr(M,7)===ja?(rd=ja,M+=7):(rd=m,0===ha&&e(na)),rd!==m?(Bd=w(),Bd!==m?(sd=a(),sd!==m?(Cd=w(),Cd!==m?(41===d.charCodeAt(M)?(td=K,M++):(td=m,0===ha&&e(O)),td!==m?(Ra=w(),Ra!==m?(Ja=rb,rb=dd={type:"invert",amount:sd}):(M=rb,rb=m)):(M=rb,rb=m)):(M=rb,rb=m)):(M=rb,rb=m)):(M=rb,rb=m)):(M=rb,rb=m)):(M=rb,rb=m);
ha--;rb===m&&(dd=m,0===ha&&e(la));b=rb;if(b===m){var sb,ed,ud,Qd,Id,Dd,Jd,Rd;ha++;sb=M;ed=w();ed!==m?(d.substr(M,8)===ta?(ud=ta,M+=8):(ud=m,0===ha&&e(aa)),ud!==m?(Qd=w(),Qd!==m?(Id=a(),Id!==m?(Dd=w(),Dd!==m?(41===d.charCodeAt(M)?(Jd=K,M++):(Jd=m,0===ha&&e(O)),Jd!==m?(Rd=w(),Rd!==m?(Ja=sb,sb=ed={type:"opacity",amount:Id}):(M=sb,sb=m)):(M=sb,sb=m)):(M=sb,sb=m)):(M=sb,sb=m)):(M=sb,sb=m)):(M=sb,sb=m)):(M=sb,sb=m);ha--;sb===m&&(ed=m,0===ha&&e(pa));b=sb;if(b===m){var vb,Ed,Kd,Sd,Ld,Td,Md,Ud;ha++;vb=M;Ed=
w();Ed!==m?(d.substr(M,9)===ia?(Kd=ia,M+=9):(Kd=m,0===ha&&e(sa)),Kd!==m?(Sd=w(),Sd!==m?(Ld=a(),Ld!==m?(Td=w(),Td!==m?(41===d.charCodeAt(M)?(Md=K,M++):(Md=m,0===ha&&e(O)),Md!==m?(Ud=w(),Ud!==m?(Ja=vb,vb=Ed={type:"saturate",amount:Ld}):(M=vb,vb=m)):(M=vb,vb=m)):(M=vb,vb=m)):(M=vb,vb=m)):(M=vb,vb=m)):(M=vb,vb=m)):(M=vb,vb=m);ha--;vb===m&&(Ed=m,0===ha&&e(ga));b=vb;if(b===m){var wb,Fd,Nd,Vd,Od,Wd,Pd,Xd;ha++;wb=M;Fd=w();Fd!==m?(d.substr(M,6)===Ba?(Nd=Ba,M+=6):(Nd=m,0===ha&&e(Ca)),Nd!==m?(Vd=w(),Vd!==m?
(Od=a(),Od!==m?(Wd=w(),Wd!==m?(41===d.charCodeAt(M)?(Pd=K,M++):(Pd=m,0===ha&&e(O)),Pd!==m?(Xd=w(),Xd!==m?(Ja=wb,wb=Fd={type:"sepia",amount:Od}):(M=wb,wb=m)):(M=wb,wb=m)):(M=wb,wb=m)):(M=wb,wb=m)):(M=wb,wb=m)):(M=wb,wb=m)):(M=wb,wb=m);ha--;wb===m&&(Fd=m,0===ha&&e(Aa));b=wb}}}}}}}}}return b}function a(){var a;ha++;a=q();a===m&&(a=p());ha--;a===m&&0===ha&&e(Ia);return a}function p(){var a,b,c;ha++;a=M;b=[];wa.test(d.charAt(M))?(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));if(c!==m)for(;c!==m;)b.push(c),wa.test(d.charAt(M))?
(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));else b=m;if(b!==m)if(46===d.charCodeAt(M)?(c=ua,M++):(c=m,0===ha&&e(Ka)),c!==m){b=[];wa.test(d.charAt(M))?(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));if(c!==m)for(;c!==m;)b.push(c),wa.test(d.charAt(M))?(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));else b=m;b!==m?(Ja=a,a=b=parseFloat(d.substring(Ja,M))):(M=a,a=m)}else M=a,a=m;else M=a,a=m;if(a===m){ha++;a=M;b=[];wa.test(d.charAt(M))?(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));if(c!==m)for(;c!==m;)b.push(c),wa.test(d.charAt(M))?
(c=d.charAt(M),M++):(c=m,0===ha&&e(xa));else b=m;b!==m&&(Ja=a,b=parseInt(d.substring(Ja,M),10));a=b;ha--;a===m&&(b=m,0===ha&&e(ra))}ha--;a===m&&(b=m,0===ha&&e(va));return a}function q(){var a,b,c;a=M;b=p();b!==m?(37===d.charCodeAt(M)?(c=Qa,M++):(c=m,0===ha&&e(A)),c!==m?(Ja=a,a=b/100):(M=a,a=m)):(M=a,a=m);return a}function v(){var a,b;ha++;a=M;d.substr(M,3)===Pa?(b=Pa,M+=3):(b=m,0===ha&&e(Da));b!==m&&(Ja=a,b=1);a=b;a===m&&(a=M,d.substr(M,4)===ka?(b=ka,M+=4):(b=m,0===ha&&e(Fa)),b!==m&&(Ja=a,b=.9),a=
b,a===m&&(a=M,d.substr(M,3)===oa?(b=oa,M+=3):(b=m,0===ha&&e(La)),b!==m&&(Ja=a,b=180/Math.PI),a=b,a===m&&(a=M,d.substr(M,4)===ba?(b=ba,M+=4):(b=m,0===ha&&e(Ea)),b!==m&&(Ja=a,b=1/360),a=b)));ha--;a===m&&(b=m,0===ha&&e(ya));return a}function t(){var a,b,c;ha++;a=M;b=p();b!==m?(c=y(),c!==m?(Ja=a,a=b*c):(M=a,a=m)):(M=a,a=m);a===m&&(a=M,48===d.charCodeAt(M)?(b=Ya,M++):(b=m,0===ha&&e(Xa)),b!==m?(c=y(),c===m&&(c=null),c!==m?(Ja=a,a=0):(M=a,a=m)):(M=a,a=m));ha--;a===m&&(b=m,0===ha&&e(Ha));return a}function y(){var a,
b;a=M;d.substr(M,2)===Ga?(b=Ga,M+=2):(b=m,0===ha&&e(qa));b!==m&&(Ja=a,b=1);a=b;a===m&&(a=M,d.substr(M,2)===za?(b=za,M+=2):(b=m,0===ha&&e(fa)),b!==m&&(Ja=a,b=96/2.54),a=b,a===m&&(a=M,d.substr(M,2)===yb?(b=yb,M+=2):(b=m,0===ha&&e(Ib)),b!==m&&(Ja=a,b=96/2.54/10),a=b,a===m&&(a=M,81===d.charCodeAt(M)?(b=cc,M++):(b=m,0===ha&&e(ub)),b!==m&&(Ja=a,b=96/2.54/40),a=b,a===m&&(a=M,d.substr(M,2)===tb?(b=tb,M+=2):(b=m,0===ha&&e(gb)),b!==m&&(Ja=a,b=96),a=b,a===m&&(a=M,d.substr(M,2)===ab?(b=ab,M+=2):(b=m,0===ha&&
e(Za)),b!==m&&(Ja=a,b=16),a=b,a===m&&(a=M,d.substr(M,2)===zb?(b=zb,M+=2):(b=m,0===ha&&e(hb)),b!==m&&(Ja=a,b=96/73),a=b))))));return a}function x(){var a;qb.test(d.charAt(M))?(a=d.charAt(M),M++):(a=m,0===ha&&e(cb));return a}function w(){var a,b;ha++;a=[];jb.test(d.charAt(M))?(b=d.charAt(M),M++):(b=m,0===ha&&e(gc));for(;b!==m;)a.push(b),jb.test(d.charAt(M))?(b=d.charAt(M),M++):(b=m,0===ha&&e(gc));ha--;a===m&&(b=m,0===ha&&e(Kb));return a}n=void 0!==n?n:{};var m={},u={start:c},z=c,B=b("none"),C="none",
F=l("none",!1),E=b("blur()"),N="blur(",L=l("blur(",!1),K=")",O=l(")",!1),I=b("brightness()"),H="brightness(",S=l("brightness(",!1),P=b("contrast()"),V="contrast(",T=l("contrast(",!1),Z=b("drop-shadow()"),Q="drop-shadow(",J=l("drop-shadow(",!1),R=b("grayscale()"),U="grayscale(",X=l("grayscale(",!1),ca=b("hue-rotate()"),G="hue-rotate(",Y=l("hue-rotate(",!1),la=b("invert()"),ja="invert(",na=l("invert(",!1),pa=b("opacity()"),ta="opacity(",aa=l("opacity(",!1),ga=b("saturate()"),ia="saturate(",sa=l("saturate(",
!1),Aa=b("sepia()"),Ba="sepia(",Ca=l("sepia(",!1),Ia=b("\x3cnumber-percentage\x3e"),ra=b("\x3cinteger\x3e"),wa=/^[0-9]/,xa=k([["0","9"]],!1,!1),va=b("\x3cnumber\x3e"),ua=".",Ka=l(".",!1),ea=b("\x3csignedNumber\x3e"),Oa=/^[+\-]/,eb=k(["+","-"],!1,!1),Qa="%",A=l("%",!1),ma=b("\x3cangle\x3e"),Ya="0",Xa=l("0",!1),ya=b("\x3cunit\x3e"),Pa="deg",Da=l("deg",!1),ka="grad",Fa=l("grad",!1),oa="rad",La=l("rad",!1),ba="turn",Ea=l("turn",!1),Ha=b("\x3clength\x3e"),Ga="px",qa=l("px",!1),za="cm",fa=l("cm",!1),yb=
"mm",Ib=l("mm",!1),cc="Q",ub=l("Q",!1),tb="in",gb=l("in",!1),ab="pc",Za=l("pc",!1),zb="pt",hb=l("pt",!1),Ab="#",Qb=l("#",!1),$a="rgba(",pb=l("rgba(",!1),bb=",",nb=l(",",!1),Jb="rgb(",fc=l("rgb(",!1),qb=/^[0-9a-fA-F]/,cb=k([["0","9"],["a","f"],["A","F"]],!1,!1),Kb=b("whitespace"),jb=/^[ \t\n\r]/,gc=k([" ","\t","\n","\r"],!1,!1),Rb=b("\x3cnamed-color\x3e"),Db=/^[a-z]/,Vb=k([["a","z"]],!1,!1),M=0,Ja=0,Eb=[{line:1,column:1}],Va=0,Nb=[],ha=0,Lb;if("startRule"in n){if(!(n.startRule in u))throw Error("Can't start parsing from rule \""+
n.startRule+'".');z=u[n.startRule]}var Mb={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,
205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],
darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,
128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,
206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,
225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},oc=new Set(Object.keys(Mb));Lb=z();if(Lb!==m&&M===d.length)return Lb;Lb!==
m&&M<d.length&&e({type:"end"});throw function(a,b,c){return new r(r.buildMessage(a,b),a,b,c)}(Nb,Va<d.length?d.charAt(Va):null,Va<d.length?g(Va,Va+1):g(Va,Va));}}})},"esri/views/layers/support/Transition":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4".split(" "),function(r,d,n,l,k,b,h){return function(d){function e(){var b=null!==
d&&d.apply(this,arguments)||this;b.from=null;b.to=null;b.duration=4E3;b.repeat=!0;b.done=!1;return b}l(e,d);c=e;e.prototype.getColorMatrix=function(){this.done=!1;if(null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var b=this._lastTime,a=Date.now();this._currentStep+=a-b;2147483647<=this._currentStep&&(this._currentStep=0);this._lastTime=a}var b=this._currentStep%this.duration/(this.duration/2),b=1>=b?b:2-b,a=this.from.getColorMatrix(),c=this.to.getColorMatrix();h.mat4.multiplyScalar(a,
a,1-b);h.mat4.multiplyScalar(c,c,b);!this.repeat&&this._currentStep>=this.duration&&(this.done=!0);return h.mat4.add(a,a,c)};e.prototype.getOpacity=function(){throw Error("No getOpacity definition for Transition");};e.prototype.clone=function(){var b=new c({from:this.from.clone(),to:this.to.clone(),duration:this.duration});b._lastTime=this._lastTime;b._currentStep=this._currentStep;return b};var c;n([b.property()],e.prototype,"from",void 0);n([b.property()],e.prototype,"to",void 0);n([b.property({type:Number})],
e.prototype,"duration",void 0);n([b.property({type:Boolean})],e.prototype,"repeat",void 0);return e=c=n([b.subclass("esri.views.layers.support.Transition")],e)}(b.declared(k))})},"esri/views/layers/support/popupUtils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array ../../../core/maybe ../../../layers/support/fieldUtils".split(" "),function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.getRequiredFields=
function(d,e){void 0===e&&(e=d.popupTemplate);return l(this,void 0,void 0,function(){var c,f,a,g,l,r,t,y,x,w,m;return n(this,function(p){switch(p.label){case 0:return b.isSome(e)?[4,e.getRequiredFields(d.fields)]:[2,[]];case 1:c=p.sent();f=e.lastEditInfoEnabled;a=d.objectIdField;g=d.typeIdField;if(k.includes(c,"*"))return[2,["*"]];r=h.fixFields;t=[d.fields];x=(y=c).concat;w=[[g]];return(m=f)?[4,h.getFeatureEditFields(d)]:[3,3];case 2:m=p.sent(),p.label=3;case 3:return(l=r.apply(void 0,t.concat([x.apply(y,
w.concat([m||null]))])))&&a&&h.hasField(d.fields,a)&&-1===l.indexOf(a)&&l.push(a),[2,l]}})})};d.getFetchPopupTemplate=function(d,e){return d.popupTemplate?d.popupTemplate:b.isSome(e)&&e.defaultPopupTemplateEnabled&&b.isSome(d.defaultPopupTemplate)?d.defaultPopupTemplate:null}})},"esri/views/3d/layers/PointCloudLayerView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../request ../../../core/arrayUtils ../../../core/arrayUtils ../../../core/Logger ../../../core/promiseUtils ../../../core/screenUtils ../../../core/unitUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f32 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../layers/graphics/dehydratedFeatures ../../../layers/support/PromiseQueue ../../../symbols/support/unitConversionUtils ./LayerView3D ./PointCloudWorker ./i3s/I3SUtil ./i3s/LoDUtil ./i3s/PagedNodeIndex ./i3s/PointCloudRendererUtil ./i3s/PointRenderer ./support/layerViewUpdatingProperties ../support/geometryUtils ../support/orientedBoundingBox ../support/projectionUtils ../../support/layerViewUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){var S=g.getLogger("esri.views.3d.layers.PointCloudLayerView3D"),P=K.plane.create();r=function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a.maximumPointCount=4E6;a.slicePlaneEnabled=!1;a._renderer=null;a._rendererAdded=!1;a._renderedNodes=new Set;a._nodeScales=new Map;a._updateViewNeeded=!0;a._lodFactor=1;a._worker=new z.PointCloudWorker;a._maxLoggedBoxWarnings=5;a._pageMultiplier=1;a._indexQueue=[];a._workQueue=
[];a._idleQueue=new w.PromiseQueue;a._indexPagesLoading=new Map;a._loadingNodes=new Map;a._layerIsVisible=!1;a._totalWork=0;a._index=null;a._loadingInitNodePage=!1;a._nodeIdArray=[];return a}n(g,d);Object.defineProperty(g.prototype,"pointScale",{get:function(){var a=E.getSplatSizeAlgorithm(this.layer.renderer);return a&&null!=a.scaleFactor?a.scaleFactor:1},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"useRealWorldSymbolSizes",{get:function(){var a=E.getFixedSizeAlgorithm(this.layer.renderer);
return a&&null!=a.useRealWorldSymbolSizes?a.useRealWorldSymbolSizes:!1},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"pointSize",{get:function(){var a=E.getFixedSizeAlgorithm(this.layer.renderer);return a&&null!=a.size?a.size:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"inverseDensity",{get:function(){return this.layer.renderer?96/this.layer.renderer.pointsPerInch:5},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"_clippingBox",{get:function(){var a=
t.create();return I.extentToBoundingBox(this.view.clippingArea,a,this.view.renderSpatialReference)?a:null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"_elevationOffset",{get:function(){var a=this.layer.elevationInfo;if(a&&"absolute-height"===a.mode){var b=f.getMetersPerVerticalUnitForSR(this.layer.spatialReference),c=m.getMetersPerUnit(a.unit);return(a.offset||0)*c/b}return 0},enumerable:!0,configurable:!0});g.prototype.initialize=function(){var b=this;this._tmpPoint=x.makeDehydratedPoint(0,
0,0,this.layer.spatialReference);B.checkPointCloudLayerValid(this.layer);B.checkPointCloudLayerCompatibleWithView(this.layer,this.view);this._initRenderer();var c=this._initNodePages(),d=this.view.resourceController.memoryController;this._memCache=d.getMemCache(this.layer.uid);this.handles.add([a.init(this,"_clippingBox",function(){return b._setUpdateViewNeeded()}),a.init(this,"_elevationOffset",function(){return b._elevationOffsetChanged()}),a.init(this.layer,"renderer",function(){return b._rendererChanged()}),
a.init(this.layer,"filters",function(){return b._filterChanged()}),this.view.basemapTerrain.on("scale-change",function(a){return b._scaleUpdateHandler(a)}),this.layer.watch(["minScale","maxScale"],function(){return b._setUpdateViewNeeded()}),a.init(this,"clippingArea",function(){b._setUpdateViewNeeded()}),this.view.state.watch("camera",function(){return b._setUpdateViewNeeded()}),d.events.on("quality-changed",function(){return b._setUpdateViewNeeded()})]);this.addResolvingPromise(c);var e=this.view.resourceController.scheduler;
this.when(function(){b.handles.add([e.registerTask(2,function(a){return b._process(a)},function(){return b._needsUpdate()}),e.registerIdleStateCallbacks(function(){return b._idleBegin()},function(){return b._idleEnd()}),a.init(b,"suspended",function(a){a?b._clearNodeState():b._setUpdateViewNeeded()})])})};g.prototype._setUpdateViewNeeded=function(){this._updateViewNeeded=!0;this._updateLoading()};g.prototype.destroy=function(){this.cancelLoading();this._worker.destroy();this._worker=null;this._destroyRenderer();
this._memCache.destroy();this._memCache=null};g.prototype._initRenderer=function(){var b=this;this._renderer=new N;this._renderer.layerUid=this.layer.uid;this.handles.add(a.init(this,"_clippingBox",function(a){return b._renderer.clippingBox=a}));this.handles.add(a.init(this,"suspended",function(a){return b._setPointsVisible(!a)}));this.handles.add(a.init(this,"pointScale",function(a){return b._renderer.scaleFactor=a}));this._renderer.minSizePx=Math.sqrt(2);this.handles.add(a.init(this,"useRealWorldSymbolSizes",
function(a){return b._renderer.useRealWorldSymbolSizes=a}));this.handles.add(a.init(this,"pointSize",function(a){var d=c.pt2px(a);b._renderer.size=a;b._renderer.sizePx=d}));this.handles.add(a.init(this,"slicePlaneEnabled",function(a){return b._renderer.slicePlaneEnabled=a}));this.handles.add(a.init(this,["inverseDensity","maximumPointCount"],function(){return b._setUpdateViewNeeded()}));this.handles.add(a.init(this.view,"qualitySettings.sceneService.pointCloud.lodFactor",function(a){b._lodFactor=
a;b._setUpdateViewNeeded()}))};g.prototype._destroyRenderer=function(){this._renderer.removeAll();this._setPointsVisible(!1)};g.prototype._setPointsVisible=function(a){a&&!this._rendererAdded?(this.view._stage.addRenderPlugin([6],this._renderer),this._rendererAdded=!0):!a&&this._rendererAdded&&(this.view._stage.removeRenderPlugin(this._renderer),this._rendererAdded=!1)};g.prototype._rendererChanged=function(){this._clearNodeState();this._memCache.clear();this._renderer.useFixedSizes=E.rendererUsesFixedSizes(this.layer.renderer);
this._setUpdateViewNeeded()};g.prototype._filterChanged=function(){this._clearNodeState();this._memCache.clear();this._setUpdateViewNeeded()};g.prototype._elevationOffsetChanged=function(){this._clearNodeState();this._memCache.clear();this._initNodePages()};g.prototype._scaleUpdateHandler=function(a){var b=this;this.layer.minScale||this.layer.maxScale?I.boundingRectToBoundingRect(a.extent,a.spatialReference,V,this.layer.spatialReference)&&(this._nodeScales.forEach(function(c,d){b._renderedNodes.has(d)?
(c=b._index.getNode(d),y.containsPoint(V,c.obb.center)&&b._nodeScales.set(d,a.scale)):b._nodeScales.delete(d)}),this._setUpdateViewNeeded()):this._nodeScales.clear()};g.prototype.displayNodes=function(a){this._workQueue=C.nodeDiff(b.keysOfSet(this._renderedNodes),a,this._index);C.sortFrontToBack(this._workQueue,this.view.state.camera.viewForward,this._index);C.splitWorkEntries(this._workQueue,8,this._index);this._updateQueues();this._totalWork=this._computeWork();this._updateLoading();this._layerIsVisible=
0<a.length||this._loadingInitNodePage;this.notifyChange("suspended")};g.prototype.cancelLoading=function(){this._cancelNodeLoading();this._cancelIndexLoading()};g.prototype._cancelNodeLoading=function(){var a=[];this._loadingNodes.forEach(function(b){return a.push(b.abortController)});this._loadingNodes.clear();for(var b=0;b<a.length;b++)a[b].abort();this._workQueue=[];this._idleQueue.cancelAll();this._totalWork=this._computeWork();this._updateLoading()};g.prototype._updateQueues=function(){var a=
this,b=new Set;this._workQueue.forEach(function(a){a.load.forEach(function(a){b.add(a)})});var c=[],d=new Map;this._loadingNodes.forEach(function(a,e){b.has(e)?d.set(e,a):c.push(a)});this._loadingNodes=d;for(var e=0;e<c.length;e++)c[e].abortController.abort();this._workQueue=this._workQueue.filter(function(b){var c=0;for(b=b.load;c<b.length;c++)if(a._loadingNodes.has(b[c]))return!1;return!0});this._totalWork=this._computeWork();this._updateLoading()};g.prototype._cancelIndexLoading=function(){this._indexQueue=
[];this._indexPagesLoading.forEach(function(a){return a.abortController.abort()});this._indexPagesLoading.clear();this._totalWork=this._computeWork();this._updateLoading()};g.prototype._clearNodeState=function(){var a=this;this._renderedNodes.forEach(function(b){return a._removeFromRenderer(b)});this._cancelNodeLoading()};g.prototype._idleBegin=function(){this._setUpdateViewNeeded()};g.prototype._idleEnd=function(){this._setUpdateViewNeeded()};g.prototype._needsUpdate=function(){return this.suspended?
this._updateViewNeeded:this._updateViewNeeded||0<this._indexQueue.length||0<this._workQueue.length||0<this._idleQueue.length};g.prototype._process=function(a){var b=this;if(this.suspended)this._updateViewNeeded&&(this._updateViewNeeded=!1,a=this._isRootNodeVisible(),a!==this._layerIsVisible&&(this._layerIsVisible=a,this.notifyChange("suspended")));else{for(a.run(function(){return b._updateWorkQueues()});0<this._indexQueue.length&&a.run(function(){return b._processIndexQueue()}););for(this._processWorkQueue(a);0<
this._idleQueue.length&&a.run(function(){return b._idleQueue.process()}););}};g.prototype._processIndexQueue=function(){var a=this,b=this._indexQueue.shift(),c=this._loadNodePage(b);this._indexPagesLoading.set(b,c);c.promise.then(function(c){a._index.addPage(b,c,a._elevationOffset);a._setUpdateViewNeeded()}).then(function(){a._indexPagesLoading.delete(b)},function(){a._indexPagesLoading.delete(b)});return!0};g.prototype._processWorkQueue=function(a){for(;!a.done;){var b=this._scheduleWorkEntry();
if(!b)break;this._processWorkEntry(b);a.madeProgress()}};g.prototype._scheduleWorkEntry=function(){var a=this;if(8<=this._loadingNodes.size)return null;for(var b=0;b<this._workQueue.length;++b){var c=this._workQueue[b];if(!h.find(c.remove,function(b){return!a._renderedNodes.has(b)})){for(;0<b;--b)this._workQueue[b]=this._workQueue[b-1];this._workQueue.shift();return c}}return null};g.prototype._processWorkEntry=function(a){var b=this;if(0===a.load.length)for(var c=0;c<a.remove.length;c++)this._removeFromRenderer(a.remove[c]);
else e.all(a.load.map(function(a){var c=e.createAbortController(),d=b._memCache.pop(a.toString());d?b._loadingNodes.set(a,{abortController:c,promise:e.resolve(d)}):b._loadingNodes.has(a)||b._loadingNodes.set(a,{abortController:c,promise:b.loadNode(a,c.signal)});return b._loadingNodes.get(a).promise})).then(function(c){for(var d=0;d<a.load.length;d++)if(c[d]){var e=b._setupRendererData(a.load[d],c[d]);b._addToRenderer(e)}for(d=0;d<a.remove.length;d++)b._removeFromRenderer(a.remove[d])}).catch(function(){}).then(function(){for(var c=
0;c<a.load.length;c++)b._loadingNodes.delete(a.load[c]);b._updateLoading()}),this._updateLoading()};g.prototype._computeWork=function(){for(var a=0,b=0;b<this._workQueue.length;b++)a+=this._workQueue[b].load.length;a+=this._loadingNodes.size;a+=(this._indexQueue.length+this._indexPagesLoading.size)*this._index.pageSize;a+=this._loadingInitNodePage?100:0;return a+=this._updateViewNeeded?100:0};Object.defineProperty(g.prototype,"updatingPercentageValue",{get:function(){var a=this._computeWork();return 100*
Math.min(this._totalWork,a)/this._totalWork},enumerable:!0,configurable:!0});g.prototype._updateLoading=function(){this.notifyChange("updating");this.notifyChange("updatingPercentageValue")};g.prototype.canResume=function(){return this.inherited(arguments)&&this._layerIsVisible};g.prototype.isUpdating=function(){return 0<this._computeWork()};g.prototype._initNodePages=function(){var a=this,b=this.layer.store.index;this._index=new F(this.layer.spatialReference,this.view.renderCoordsHelper.spatialReference,
b.nodesPerPage||b.nodePerIndexBlock);this._cancelIndexLoading();this._traverseVisible=this._index.createVisibilityTraverse();this._layerIsVisible=this._loadingInitNodePage=!0;this.notifyChange("suspended");this._updateLoading();this._pageMultiplier=null!=b.nodesPerPage?1:b.nodePerIndexBlock;return this._loadNodePage(0).promise.then(function(b){a._index.addPage(0,b,a._elevationOffset);a._loadingInitNodePage=!1;a._setUpdateViewNeeded()})};g.prototype._loadNodePage=function(a){var b=this,c=e.createAbortController();
return{promise:this._requestJSON(this.baseUrl+"/nodepages/"+a*this._pageMultiplier,c.signal).then(function(c){return c.data.nodes.map(function(c,d){return{resourceId:null!=c.resourceId?c.resourceId:a*b._index.pageSize+d,obb:c.obb,firstChild:c.firstChild,childCount:c.childCount,vertexCount:null!=c.vertexCount?c.vertexCount:c.pointCount,lodThreshold:null!=c.lodThreshold?c.lodThreshold:c.effectiveArea}})}),abortController:c}};g.prototype._updateWorkQueues=function(){if(!this._updateViewNeeded)return!1;
for(var a=this.inverseDensity/this._lodFactor*this._getLodMemoryFactor(),b=this.maximumPointCount*this._lodFactor*this._getLodMemoryFactor(),c=this._computeNodesForMinimumDensity(a),d=this._computePointCount(c),e=Math.sqrt(d/(.75*b));d>b;)a*=e,c=this._computeNodesForMinimumDensity(a),d=this._computePointCount(c),e=Math.sqrt(2);this.displayNodes(c);this._updateViewNeeded=!1;this._updateLoading();return!0};g.prototype._computePointCount=function(a){for(var b=0,c=0;c<a.length;c++){var d=this._index.getNode(a[c]);
d&&(b+=d.vertexCount)}return b};g.prototype._getLodMemoryFactor=function(){return this.view.resourceController.memoryController.memoryFactor};g.prototype._isRootNodeVisible=function(){var a=!1;this._traverseVisible({frustumPlanes:this.view.state.camera.frustum.planes,clippingBox:this._clippingBox},{predicate:function(b,c,d){a=d;return!1},pageMiss:function(a,b){}});return a};g.prototype._computeNodesForMinimumDensity=function(a){var b=this,c=this.view.state.camera,d=c.frustum,e=this._clippingBox,f=
c.viewForward,g=q.vec3.dot(f,c.eye),h=K.plane.fromNormalAndOffset(f,-g,P),k=c.perScreenPixelRatio/2,l=a*a,m=this._nodeIdArray;m.length=0;a=H.extractSafeScaleBounds(this.layer);var p=a.minScale,n=a.maxScale,u=0===p&&0===n?function(a){return m.push(a)}:function(a){var c=b._getScale(a);H.scaleBoundsPredicate(c,p,n)&&m.push(a)};this._traverseVisible({frustumPlanes:d.planes,clippingBox:e},{predicate:function(a,c,d){if(!d)return!1;if(0===c.childCount)return u(a),!1;d=b._index.getRenderObb(a);return b._computeAveragePixelArea(d,
c.lodThreshold,c.vertexCount,h,k)<=l?(u(a),!1):!0},pageMiss:function(a,c){u(a);0>b._indexQueue.indexOf(c)&&b._indexQueue.push(c)}});return m};g.prototype._getScale=function(a){var b=this._nodeScales.get(a);null==b&&(b=this._index.getNode(a).obb.center,this._tmpPoint.x=b[0],this._tmpPoint.y=b[1],this._tmpPoint.z=b[2],b=this.view.basemapTerrain.getScale(this._tmpPoint),this._nodeScales.set(a,b));return b};g.prototype._computeAveragePixelArea=function(a,b,c,d,e){a=Math.max(1E-7,O.minimumDistancePlane(a,
d));return b/(a*a)/(4*e*e)/c};g.prototype.loadNode=function(a,b){var c=this,d=this._index.getNode(a),f=E.getRendererInfo(this.layer),g=E.getFilterInfo(this.layer),h=d.resourceId,k=[],l=function(a){a=c.loadAttribute(h,a,b);k.push(a);return a};return this._idleQueue.push().then(function(){var a=c.loadGeometry(h,b);k.push(a);var d=l(f.primaryAttribute),m=l(f.modulationAttribute),p=g.map(function(a){return l(a.attributeInfo)});return e.all([a,d,m,e.all(p)])}).then(function(d){var e=d[0],h=d[1],k=d[2],
l=d[3];d=[e];h&&d.push(h);k&&d.push(k);for(var m=0;m<l.length;m++)d.push(l[m]);e={geometryBuffer:e,primaryAttribute:h,modulationAttribute:k,filterAttributes:l,schema:c.layer.store.defaultGeometrySchema,rendererInfo:f,filterInfo:g,obb:c._index.getRenderObb(a),elevationOffset:c._elevationOffset,inSR:c.layer.spatialReference.toJSON(),outSR:c.view.renderCoordsHelper.spatialReference.toJSON()};return c._worker.transform(e,d,b)}).catch(function(a){e.isAbortError(a)||S.error(a);return e.reject(a)})};g.prototype.loadGeometry=
function(a,b){return this._requestBinary(this.baseUrl+"/nodes/"+a+"/geometries/0",b).then(function(a){return a.data})};g.prototype.loadAttribute=function(a,b,c){return b&&b.storageInfo?this._requestBinary(this.baseUrl+"/nodes/"+a+"/attributes/"+b.storageInfo.key,c).then(function(a){return a.data}):e.resolve(null)};g.prototype._requestJSON=function(a,b){return k(a,{query:{f:"json"},responseType:"json",signal:b})};g.prototype._requestBinary=function(a,b){return k(a,{responseType:"array-buffer",signal:b})};
g.prototype._removeFromRenderer=function(a){if(this._renderedNodes.has(a)){var b=this._renderer.removeNode(a);this._renderedNodes.delete(a);this._nodeScales.delete(a);this._memCache.put(b.id.toString(),b,5*b.coordinates.length+128)}};g.prototype._addToRenderer=function(a){this._renderedNodes.has(a.id)||(this._renderedNodes.add(a.id),this._renderer.addNode(a))};g.prototype._setupRendererData=function(a,b){var c=this._index.getNode(a),d=Math.sqrt(c.lodThreshold/c.vertexCount),e=this._index.getRenderObb(a);
if(N.isInstanceOfNode(b))return b.splatSize=d,b.obb=e,b.origin=v.vec3f32.clone(b.obb.center),b;if(b.obb.halfSize[0]>e.halfSize[0]||b.obb.halfSize[1]>e.halfSize[1]||b.obb.halfSize[2]>e.halfSize[2]){if(0<this._maxLoggedBoxWarnings){var f=function(a){return"["+a.halfSize[0]+", "+a.halfSize[1]+", "+a.halfSize[2]+"]"};S.warn("Node "+a+" reported bounding box too small. got "+f(e)+" but points cover "+f(b.obb));0===--this._maxLoggedBoxWarnings&&S.warn("  Too many bounding box errors, stopping reporting for this layer.")}this._index.setRenderObb(a,
b.obb)}return{id:a,coordinates:b.points,origin:v.vec3f32.clone(e.center),rgb:b.rgb,splatSize:d,obb:e,isLeaf:0===c.childCount}};g.prototype.getUsedMemory=function(){var a=this;return b.keysOfSet(this._renderedNodes).reduce(function(b,c){return b+15*a._index.getNode(c).vertexCount+128},0)};g.prototype.getUnloadedMemory=function(){var a=this,c=this._renderedNodes.size;if(4>c)return 0;for(var d=b.keysOfSet(this._renderedNodes).reduce(function(b,c){return b+a._index.getNode(c).vertexCount}),e=this._loadingNodes.size,
f=0;f<this._workQueue.length;f++)e+=this._workQueue[f].load.length,e-=this._workQueue[f].remove.length;return 0>e?0:e*d/c*15+128*e};g.prototype.ignoresMemoryFactor=function(){return!1};g.prototype.getStats=function(){var a=this;return{"Rendered Nodes":this._renderedNodes.size,"Rendered Points":b.keysOfSet(this._renderedNodes).reduce(function(b,c){return b+a._index.getNode(c).vertexCount},0),"Loading Nodes":this._loadingNodes.size,"Index Queue":this._indexQueue.length,"Work Queue":this._workQueue.length,
"Idle Queue":this._idleQueue.length}};l([p.property()],g.prototype,"layer",void 0);l([p.property({readOnly:!0,aliasOf:"layer.parsedUrl.path"})],g.prototype,"baseUrl",void 0);l([p.property({readOnly:!0,dependsOn:["layer.renderer"]})],g.prototype,"pointScale",null);l([p.property({readOnly:!0,dependsOn:["layer.renderer"]})],g.prototype,"useRealWorldSymbolSizes",null);l([p.property({readOnly:!0,dependsOn:["layer.renderer"]})],g.prototype,"pointSize",null);l([p.property({readOnly:!0,dependsOn:["layer.renderer"]})],
g.prototype,"inverseDensity",null);l([p.property()],g.prototype,"maximumPointCount",void 0);l([p.property({readOnly:!0,dependsOn:["view.clippingArea"]})],g.prototype,"_clippingBox",null);l([p.property({readOnly:!0,dependsOn:["layer.elevationInfo"]})],g.prototype,"_elevationOffset",null);l([p.property({type:Boolean})],g.prototype,"slicePlaneEnabled",void 0);l([p.property(L.updatingPercentage)],g.prototype,"updatingPercentage",void 0);l([p.property({readOnly:!0})],g.prototype,"updatingPercentageValue",
null);return g=l([p.subclass("esri.views.3d.layers.PointCloudLayerView3D")],g)}(p.declared(u));var V=y.create();return r})},"esri/views/3d/layers/PointCloudWorker":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/requireUtils ../../../core/workers ../../../core/libs/gl-matrix-2/quat ../../../core/libs/gl-matrix-2/quatf32 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f32 ../../../geometry/SpatialReference ./i3s/I3SBinaryReader ./i3s/LEPCC ./i3s/PointCloudRendererUtil ../support/projectionUtils module".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t){Object.defineProperty(d,"__esModule",{value:!0});var y=function(){function b(){}b.prototype._process=function(a){a=this._transform(a);return l.resolve({result:a,transferList:[a.points.buffer,a.rgb.buffer]})};b.prototype._transform=function(a){var b=this.readGeometry(a.schema,a.geometryBuffer),c=b.length/3,d=q.evaluateRenderer(a.rendererInfo,a.primaryAttribute,a.modulationAttribute,b,c);a.filterInfo&&0<a.filterInfo.length&&(c=q.filterInPlace(b,d,a.filterInfo,
a.filterAttributes));3*c<d.length&&(d=new Uint8Array(d.buffer.slice(0,3*c)));this._applyElevationOffsetInPlace(b,c,a.elevationOffset);b=this._transformCoordinates(b,c,a.obb,f.fromJSON(a.inSR),f.fromJSON(a.outSR));return{obb:a.obb,points:b,rgb:d}};b.prototype.readGeometry=function(b,c){if(null==b.encoding||""===b.encoding){b=a.createGeometryIndexFromSchema(c,b);c=a.createTypedView(c,b.vertexAttributes.position);var d=b.header.fields;b=[d.offsetX,d.offsetY,d.offsetZ];for(var d=[d.scaleX,d.scaleY,d.scaleZ],
e=c.length/3,f=new Float64Array(3*e),g=0;g<e;g++)f[3*g]=c[3*g]*d[0]+b[0],f[3*g+1]=c[3*g+1]*d[1]+b[1],f[3*g+2]=c[3*g+2]*d[2]+b[2];return f}if("lepcc-xyz"===b.encoding)return p.decodeXYZ(c).result};b.prototype._transformCoordinates=function(a,b,d,f,g){if(!v.bufferToBuffer(a,f,0,a,g,0,b))throw Error("Can't reproject");f=c.vec3f32.fromValues(d.center[0],d.center[1],d.center[2]);g=c.vec3f32.create();var k=c.vec3f32.create();h.quat.conjugate(x,d.quaternion);for(var l=new Float32Array(3*b),m=0;m<b;m++)g[0]=
a[3*m]-f[0],g[1]=a[3*m+1]-f[1],g[2]=a[3*m+2]-f[2],e.vec3.transformQuat(k,g,x),d.halfSize[0]=Math.max(d.halfSize[0],Math.abs(k[0])),d.halfSize[1]=Math.max(d.halfSize[1],Math.abs(k[1])),d.halfSize[2]=Math.max(d.halfSize[2],Math.abs(k[2])),l[3*m]=g[0],l[3*m+1]=g[1],l[3*m+2]=g[2];return l};b.prototype._applyElevationOffsetInPlace=function(a,b,c){if(0!==c)for(var d=0;d<b;d++)a[3*d+2]+=c};return b}(),x=g.quatf32.create();g=function(a){function c(){var c=a.call(this)||this;c._thread=void 0;b.open(k.getAbsMid("./PointCloudWorker",
r,t)).then(function(a){void 0===c._thread?c._thread=a:a.close()});return c}n(c,a);c.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};c.prototype.transform=function(a,b,c){return this._thread?this._thread.invoke("_process",a,{transferList:b,signal:c}):l.resolve(this._transform(a))};return c}(y);d.PointCloudWorker=g;d.default=function(){return new y}})},"esri/core/libs/gl-matrix-2/quatf32":function(){define(["require","exports","./factories/quatf32"],function(r,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.quatf32=n})},"esri/core/libs/gl-matrix-2/factories/quatf32":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(4);d[3]=1;return d};d.clone=function(d){var l=new Float32Array(4);l[0]=d[0];l[1]=d[1];l[2]=d[2];l[3]=d[3];return l};d.fromValues=function(d,l,k,b){var h=new Float32Array(4);h[0]=d;h[1]=l;h[2]=k;h[3]=b;return h};d.createView=function(d,l){return new Float32Array(d,l,4)}})},
"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("require exports ../../../../core/Error ../../../../core/lang ../../../../core/Logger ./LEPCC".split(" "),function(r,d,n,l,k,b){function h(a,b,c){for(var d="",e=0;e<c;){var f=a[b+e];if(128>f)d+=String.fromCharCode(f),e++;else if(192<=f&&224>f){if(e+1>=c)throw new n("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var g=a[b+e+1],f=(f&31)<<6|g&63,d=d+String.fromCharCode(f),e=e+2}else if(224<=f&&240>f){if(e+2>=
c)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");var g=a[b+e+1],h=a[b+e+2],f=(f&15)<<12|(g&63)<<6|h&63,d=d+String.fromCharCode(f),e=e+3}else if(240<=f&&248>f){if(e+3>=c)throw new n("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");g=a[b+e+1];h=a[b+e+2];f=(f&7)<<18|(g&63)<<12|(h&63)<<6|a[b+e+3]&63;d=65536<=f?d+String.fromCharCode((f-65536>>10)+55296,(f&1023)+56320):d+String.fromCharCode(f);e+=4}else throw new n("utf8-decode-error",
"UTF-8 Decode failed. Invalid multi byte sequence.");}return d}function g(a,b){for(var c={byteOffset:0,byteCount:0,fields:Object.create(null)},e=0,f=0;f<b.length;f++){var g=b[f],h=g.valueType||g.type;c.fields[g.property]=(0,d.valueType2ArrayBufferReader[h])(a,e);e+=d.valueType2TypedArrayClassMap[h].BYTES_PER_ELEMENT}c.byteCount=e;return c}function e(a,b,c){var d=[],e,f=0,g;for(g=0;g<a;g+=1){e=b[g];if(0<e){if(d.push(h(c,f,e-1)),0!==c[f+e-1])throw new n("string-array-error","Invalid string array: missing null termination.");
}else d.push(null);f+=e}return d}function c(a,b){return new d.valueType2TypedArrayClassMap[b.valueType](a,b.byteOffset,b.count*b.valuesPerElement)}function f(a,b){return new Uint8Array(a,b.byteOffset,b.byteCount)}function a(a,b,c){a=null!=b.header?g(a,b.header):{byteOffset:0,byteCount:0,fields:{count:c}};c={header:a,byteOffset:a.byteCount,byteCount:0,entries:Object.create(null)};for(var d=a.byteCount,e=0;e<b.ordering.length;e++){var f=b.ordering[e],h=l.clone(b[f]);h.count=a.fields.count;if("String"===
h.valueType){if(h.byteOffset=d,h.byteCount=a.fields[f+"ByteCount"],"UTF-8"!==h.encoding)throw new n("unsupported-encoding","Unsupported String encoding.",{encoding:h.encoding});}else if(q(h.valueType)){var k=v(h.valueType),d=d+(0!==d%k?k-d%k:0);h.byteOffset=d;h.byteCount=k*h.valuesPerElement*h.count}else throw new n("unsupported-value-type","Unsupported binary valueType",{valueType:h.valueType});d+=h.byteCount;c.entries[f]=h}c.byteCount=d-c.byteOffset;return c}function p(a,b,c){b!==a&&t.error("Invalid "+
c+" buffer size\n expected: "+a+", actual: "+b+")");if(b<a)throw new n("buffer-too-small","Binary buffer is too small",{expectedSize:a,actualSize:b});}function q(a){return d.valueType2TypedArrayClassMap.hasOwnProperty(a)}function v(a){return q(a)?d.valueType2TypedArrayClassMap[a].BYTES_PER_ELEMENT:0}Object.defineProperty(d,"__esModule",{value:!0});var t=k.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");d.readHeader=g;d.readStringArray=e;d.createTypedView=c;d.createRawView=f;d.createAttributeDataIndex=
a;d.createGeometryIndexFromDefinition=function(a,b,c){for(var d={header:{byteOffset:0,byteCount:a.offset,fields:{}},byteOffset:a.offset,byteCount:0,vertexAttributes:{},featureAttributes:{}},e=a.offset,f=function(a,b,c,d){var f="UInt64"===b.type?8:v(b.type);b={byteOffset:e,byteCount:f*b.component*c,count:c,valueType:b.type,valuesPerElement:b.component};e+=b.byteCount;d[a]=b},g=0,h=y;g<h.length;g++){var k=h[g];a[k[0]]&&f(k[1],a[k[0]],b,d.vertexAttributes)}b=0;for(g=x;b<g.length;b++)h=g[b],a[h[0]]&&
f(h[1],a[h[0]],c,d.featureAttributes);return d};var y=[["position","position"],["normal","normal"],["uv0","uv0"],["uv1","uv1"],["color","color"],["uvRegion","region"]],x=[["featureId","id"],["faceRange","faceRange"]];d.createGeometryIndexFromSchema=function(a,b){for(var c=g(a,b&&b.header),d=c.byteCount,e={header:c,byteOffset:c.byteCount,byteCount:0,vertexAttributes:l.clone(b.vertexAttributes)},f=e.vertexAttributes,h=c.fields,k=null!=h.vertexCount?h.vertexCount:h.count,c=0;c<b.ordering.length;c++){var m=
b.ordering[c];null!=f[m]&&(f[m].byteOffset=d,f[m].count=k,d+=v(f[m].valueType)*f[m].valuesPerElement*k)}f=h.faceCount;if(b.faces&&f)for(e.faces=l.clone(b.faces),k=e.faces,c=0;c<b.ordering.length;c++)m=b.ordering[c],null!=k[m]&&(k[m].byteOffset=d,k[m].count=f,d+=v(k[m].valueType)*k[m].valuesPerElement*f);h=h.featureCount;if(b.featureAttributes&&b.featureAttributeOrder&&h)for(e.featureAttributes=l.clone(b.featureAttributes),f=e.featureAttributes,c=0;c<b.featureAttributeOrder.length;c++)k=b.featureAttributeOrder[c],
f[k].byteOffset=d,f[k].count=h,m=v(f[k].valueType),"UInt64"===f[k].valueType&&(m=8),d+=m*f[k].valuesPerElement*h;p(d,a.byteLength,"geometry");e.byteCount=d-e.byteOffset;return e};d.readBinaryAttribute=function(d,g,h){if("lepcc-rgb"===d.encoding)return b.decodeRGB(g);if("lepcc-intensity"===d.encoding)return b.decodeIntensity(g);if(null!=d.encoding&&""!==d.encoding)throw new n("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");d["attributeByteCounts "]&&!d.attributeByteCounts&&
(t.warn("Warning: Trailing space in 'attributeByteCounts '."),d.attributeByteCounts=d["attributeByteCounts "]);"ObjectIds"===d.ordering[0]&&d.hasOwnProperty("objectIds")&&(t.warn("Warning: Case error in objectIds"),d.ordering[0]="objectIds");h=a(g,d,h);p(h.byteOffset+h.byteCount,g.byteLength,"attribute");if(d=h.entries.attributeValues||h.entries.objectIds){if("String"===d.valueType){h=h.entries.attributeByteCounts;var k=c(g,h);g=f(g,d);return e(h.count,k,g)}return c(g,d)}throw new n("bad-attribute-storage-info",
"Bad attributeStorageInfo specification.");};d.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array};d.valueType2ArrayBufferReader={Float32:function(a,b){return(new DataView(a,0)).getFloat32(b,!0)},Float64:function(a,b){return(new DataView(a,0)).getFloat64(b,!0)},UInt8:function(a,b){return(new DataView(a,0)).getUint8(b)},Int8:function(a,b){return(new DataView(a,0)).getInt8(b)},
UInt16:function(a,b){return(new DataView(a,0)).getUint16(b,!0)},Int16:function(a,b){return(new DataView(a,0)).getInt16(b,!0)},UInt32:function(a,b){return(new DataView(a,0)).getUint32(b,!0)},Int32:function(a,b){return(new DataView(a,0)).getInt32(b,!0)}};d.isValueType=q;d.getBytesPerValue=v})},"esri/views/3d/layers/i3s/LEPCC":function(){define(["require","exports","../../../../core/Error"],function(r,d,n){function l(b,d,c){return{identifier:String.fromCharCode.apply(null,new Uint8Array(b,c+h.identifierOffset,
h.identifierLength)),version:d.getUint16(c+h.versionOffset,!0),checksum:d.getUint32(c+h.checksumOffset,!0)}}function k(d,e,c){var f=[];e=b(d,e,f);for(var a=[],g=0;g<f.length;g++){a.length=0;e=b(d,e,a);for(var h=0;h<a.length;h++)c.push(a[h]+f[g])}return e}function b(b,d,c){var e=new DataView(b,d),a=e.getUint8(0),g=a&31,h=!!(a&32),k=(a&192)>>6,a=0;if(0===k)a=e.getUint32(1,!0),d+=5;else if(1===k)a=e.getUint16(1,!0),d+=3;else if(2===k)a=e.getUint8(1),d+=2;else throw new n("lepcc-decode-error","Bad count type");
if(h)throw new n("lepcc-decode-error","LUT not implemented");b=new Uint8Array(b,d,Math.ceil(a*g/8));for(var k=h=e=0,l=-1>>>32-g,r=0;r<a;r++){for(;h<g;)e|=b[k]<<h,h+=8,k+=1;c[r]=e&l;e>>>=g;h-=g;32<h+g&&(e|=b[k-1]>>8-h)}return d+k}Object.defineProperty(d,"__esModule",{value:!0});var h={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};d.decodeXYZ=function(b){var d,c,f,a,g,q,r,t,y,x,w,m,u=new DataView(b,0),z=0;a=l(b,u,z);f=a.identifier;a=a.version;z+=h.byteCount;
if("LEPCC     "!==f)throw new n("lepcc-decode-error","Bad identifier");if(1<a)throw new n("lepcc-decode-error","Unknown version");var B=z;d=u.getUint32(B+0,!0);c=u.getUint32(B+4,!0);f=u.getFloat64(B+8,!0);a=u.getFloat64(B+16,!0);g=u.getFloat64(B+24,!0);q=u.getFloat64(B+32,!0);r=u.getFloat64(B+40,!0);t=u.getFloat64(B+48,!0);y=u.getFloat64(B+56,!0);x=u.getFloat64(B+64,!0);w=u.getFloat64(B+72,!0);m=u.getUint32(B+80,!0);u.getUint32(B+84,!0);z+=88;if(c*Math.pow(2,32)+d!==b.byteLength)throw new n("lepcc-decode-error",
"Bad size");u=new Float64Array(3*m);d=[];c=[];m=[];B=[];z=k(b,z,d);z=k(b,z,c);z=k(b,z,m);z=k(b,z,B);if(z!==b.byteLength)throw new n("lepcc-decode-error","Bad length");for(var C=z=b=0;C<d.length;C++)for(var z=z+d[C],F=0,E=0;E<c[C];E++){var F=F+m[b],N=B[b];u[3*b]=Math.min(q,f+2*y*F);u[3*b+1]=Math.min(r,a+2*x*z);u[3*b+2]=Math.min(t,g+2*w*N);b++}return{errorX:y,errorY:x,errorZ:w,result:u}};d.decodeRGB=function(b){var d,c,f,a,g,k,r=new DataView(b,0),t=0;a=l(b,r,t);f=a.identifier;a=a.version;t+=h.byteCount;
if("ClusterRGB"!==f)throw new n("lepcc-decode-error","Bad identifier");if(1<a)throw new n("lepcc-decode-error","Unknown version");k=t;d=r.getUint32(k+0,!0);c=r.getUint32(k+4,!0);f=r.getUint32(k+8,!0);a=r.getUint16(k+12,!0);g=r.getUint8(k+14);k=r.getUint8(k+15);t+=16;if(c*Math.pow(2,32)+d!==b.byteLength)throw new n("lepcc-decode-error","Bad size");if((2===g||1===g)&&0===k){if(3*a+f+t!==b.byteLength||256<a)throw new n("lepcc-decode-error","Bad count");r=new Uint8Array(b,t,3*a);a=new Uint8Array(b,t+
3*a,f);t=new Uint8Array(3*f);for(b=0;b<f;b++)d=a[b],t[3*b]=r[3*d],t[3*b+1]=r[3*d+1],t[3*b+2]=r[3*d+2];return t}if(0===g&&0===k){if(3*f+t!==b.byteLength||0!==a)throw new n("lepcc-decode-error","Bad count");return(new Uint8Array(b,t)).slice()}if(2>=g&&1===k){if(t+3!==b.byteLength||1!==a)throw new n("lepcc-decode-error","Bad count");a=r.getUint8(t);d=r.getUint8(t+1);r=r.getUint8(t+2);t=new Uint8Array(3*f);for(b=0;b<f;b++)t[3*b]=a,t[3*b+1]=d,t[3*b+2]=r;return t}throw new n("lepcc-decode-error","Bad method "+
g+","+k);};d.decodeIntensity=function(d){var e,c,f,a,g,k=new DataView(d,0),r=0;a=l(d,k,r);f=a.identifier;a=a.version;r+=h.byteCount;if("Intensity "!==f)throw new n("lepcc-decode-error","Bad identifier");if(1<a)throw new n("lepcc-decode-error","Unknown version");var t=r;e=k.getUint32(t+0,!0);c=k.getUint32(t+4,!0);f=k.getUint32(t+8,!0);a=k.getUint16(t+12,!0);g=k.getUint8(t+14);k.getUint8(t+15);r+=16;if(c*Math.pow(2,32)+e!==d.byteLength)throw new n("lepcc-decode-error","Bad size");k=new Uint16Array(f);
if(8===g){if(f+r!==d.byteLength)throw new n("lepcc-decode-error","Bad size");g=new Uint8Array(d,r,f)}else if(16===g){if(2*f+r!==d.byteLength)throw new n("lepcc-decode-error","Bad size");g=new Uint16Array(d,r,f)}else if(g=[],b(d,r,g)!==d.byteLength)throw new n("lepcc-decode-error","Bad size");for(d=0;d<f;d++)k[d]=g[d]*a;return k}})},"esri/views/3d/layers/i3s/PointCloudRendererUtil":function(){define("require exports ../../../../renderers/PointCloudClassBreaksRenderer ../../../../renderers/PointCloudStretchRenderer ../../../../renderers/PointCloudUniqueValueRenderer ./I3SBinaryReader".split(" "),
function(r,d,n,l,k,b){function h(a){var b=0,c=0;for(a=a?a:[];c<a.length;c++)b|=1<<a[c];return b}function g(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.name===b&&null!=d.attributeValues&&"UInt8"===d.attributeValues.valueType&&3===d.attributeValues.valuesPerElement)return{storageInfo:d,useElevation:!1}}return null}function e(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.name===b)return a="embedded-elevation"===d.encoding,{storageInfo:a?null:d,useElevation:a}}return"elevation"===b.toLowerCase()?
{storageInfo:null,useElevation:!0}:null}function c(a,c,d,e){if(a&&a.useElevation){a=new Float64Array(e);for(c=0;c<e;c++)a[c]=d[3*c+2];return a}return a&&c?b.readBinaryAttribute(a.storageInfo,c,e):null}function f(a){return null==a||"none"===a?null:"low-four-bit"===a?function(a){return a&15}:"high-four-bit"===a?function(a){return(a&240)>>4}:"absolute-value"===a?function(a){return Math.abs(a)}:"modulo-ten"===a?function(a){return a%10}:null}Object.defineProperty(d,"__esModule",{value:!0});d.getRendererInfo=
function(a){var b=a.renderer,c=b&&b.type,d=b&&a.renderer.toJSON()||null,f=null,h=!1;"point-cloud-unique-value"===c?f=e(a.attributeStorageInfo,b.field):"point-cloud-stretch"===c?f=e(a.attributeStorageInfo,b.field):"point-cloud-class-breaks"===c?f=e(a.attributeStorageInfo,b.field):(f="point-cloud-rgb"===c?g(a.attributeStorageInfo,b.field):g(a.attributeStorageInfo,"RGB"),h=null!=f);c=null;b&&b.colorModulation&&(c=e(a.attributeStorageInfo,b.colorModulation.field));return{rendererJSON:d,isRGBRenderer:h,
primaryAttribute:f,modulationAttribute:c}};d.getFilterInfo=function(a){var b=a.filters;return b?b.map(function(b){return{filterJSON:b.toJSON(),attributeInfo:e(a.attributeStorageInfo,b.field)}}):[]};d.evaluateRenderer=function(a,b,d,e,g){var h=a.rendererJSON,p=a.isRGBRenderer,q=a.modulationAttribute;a=c(a.primaryAttribute,b,e,g);d=c(q,d,e,g);q=e=null;if(a&&p)e=a;else if(a&&"pointCloudUniqueValueRenderer"===h.type){var q=k.fromJSON(h),m=q.colorUniqueValueInfos;e=new Uint8Array(3*g);p=f(q.fieldTransformType);
for(h=0;h<g;h++){b=p?p(a[h]):a[h];b+="";for(var u=0;u<m.length;u++)if(0<=m[u].values.indexOf(b)){e[3*h]=m[u].color.r;e[3*h+1]=m[u].color.g;e[3*h+2]=m[u].color.b;break}}}else if(a&&"pointCloudStretchRenderer"===h.type)for(q=l.fromJSON(h),m=q.stops,e=new Uint8Array(3*g),p=f(q.fieldTransformType),h=0;h<g;h++)if(b=p?p(a[h]):a[h],u=m.length-1,b<m[0].value)e[3*h]=m[0].color.r,e[3*h+1]=m[0].color.g,e[3*h+2]=m[0].color.b;else if(b>=m[u].value)e[3*h]=m[u].color.r,e[3*h+1]=m[u].color.g,e[3*h+2]=m[u].color.b;
else for(u=1;u<m.length;u++){if(b<m[u].value){b=(b-m[u-1].value)/(m[u].value-m[u-1].value);e[3*h]=m[u].color.r*b+m[u-1].color.r*(1-b);e[3*h+1]=m[u].color.g*b+m[u-1].color.g*(1-b);e[3*h+2]=m[u].color.b*b+m[u-1].color.b*(1-b);break}}else if(a&&"pointCloudClassBreaksRenderer"===h.type)for(q=n.fromJSON(h),m=q.colorClassBreakInfos,e=new Uint8Array(3*g),p=f(q.fieldTransformType),h=0;h<g;h++)for(b=p?p(a[h]):a[h],u=0;u<m.length;u++){if(b>=m[u].minValue&&b<=m[u].maxValue){e[3*h]=m[u].color.r;e[3*h+1]=m[u].color.g;
e[3*h+2]=m[u].color.b;break}}else for(e=new Uint8Array(3*g),h=0;h<e.length;h++)e[h]=255;if(d&&q&&q.colorModulation)for(a=q.colorModulation.minValue,q=q.colorModulation.maxValue,h=0;h<g;h++)b=d[h],p=b>=q?1:b<=a?.3:.3+.7*(b-a)/(q-a),e[3*h]*=p,e[3*h+1]*=p,e[3*h+2]*=p;return e};d.filterInPlace=function(a,b,d,e){var f=a.length/3;e=e.map(function(b,e){return c(d[e].attributeInfo,b,a,f)});for(var g=0,k=0;k<f;k++){for(var l=!0,m=0;m<d.length&&l;m++){var p=d[m].filterJSON,n=e[m][k];switch(p.type){case "pointCloudValueFilter":var q=
"exclude"===p.mode;-1!==p.values.indexOf(n)===q&&(l=!1);break;case "pointCloudBitfieldFilter":q=h(p.requiredSetBits);p=h(p.requiredClearBits);if((n&q)!==q||0!==(n&p))l=!1;break;case "pointCloudReturnFilter":for(var r=n&15,v=n>>>4&15,n=1<v,q=1===r,r=r===v,v=!1,E=0,p=p.includedReturns;E<p.length;E++){var N=p[E];if("last"===N&&r||"firstOfMany"===N&&q&&n||"lastOfMany"===N&&r&&n||"single"===N&&!n){v=!0;break}}v||(l=!1)}}l&&(a[3*g]=a[3*k],a[3*g+1]=a[3*k+1],a[3*g+2]=a[3*k+2],b[3*g]=b[3*k],b[3*g+1]=b[3*k+
1],b[3*g+2]=b[3*k+2],g++)}return g};d.getSplatSizeAlgorithm=function(a){return(a=a&&a.pointSizeAlgorithm)&&"splat"===a.type?a:null};d.getFixedSizeAlgorithm=function(a){return(a=a&&a.pointSizeAlgorithm)&&"fixed-size"===a.type?a:null};d.rendererUsesFixedSizes=function(a){return(a=a&&a.pointSizeAlgorithm)&&a.type?"fixed-size"===a.type:!1}})},"esri/renderers/PointCloudClassBreaksRenderer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./PointCloudRenderer ./support/LegendOptions ./support/pointCloud/ColorClassBreakInfo".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this)||this;a.type="point-cloud-class-breaks";a.field=null;a.legendOptions=null;a.fieldTransformType=null;a.colorClassBreakInfos=null;return a}l(a,d);f=a;a.prototype.clone=function(){return new f(n({},this.cloneProperties(),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:b.clone(this.colorClassBreakInfos),legendOptions:b.clone(this.legendOptions)}))};var f;k([h.enumeration.serializable()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],
a.prototype,"type",void 0);k([h.property({json:{write:!0},type:String})],a.prototype,"field",void 0);k([h.property({type:e.default,json:{write:!0}})],a.prototype,"legendOptions",void 0);k([h.property({type:g.fieldTransformTypeKebabDict.apiValues,json:{type:g.fieldTransformTypeKebabDict.jsonValues,read:g.fieldTransformTypeKebabDict.read,write:g.fieldTransformTypeKebabDict.write}})],a.prototype,"fieldTransformType",void 0);k([h.property({type:[c.default],json:{write:!0}})],a.prototype,"colorClassBreakInfos",
void 0);return a=f=k([h.subclass("esri.renderers.PointCloudClassBreaksRenderer")],a)}(h.declared(g))})},"esri/renderers/PointCloudRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/pointCloud/ColorModulation ./support/pointCloud/pointSizeAlgorithmJSONUtils ./support/pointCloud/pointSizeAlgorithmTypeUtils".split(" "),function(r,d,n,l,k,b,h,
g,e,c,f){var a=k.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});r=function(b){function d(a){a=b.call(this)||this;a.type=void 0;a.pointSizeAlgorithm=null;a.colorModulation=null;a.pointsPerInch=10;return a}n(d,b);d.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};d.prototype.cloneProperties=
function(){return{pointSizeAlgorithm:h.clone(this.pointSizeAlgorithm),colorModulation:h.clone(this.colorModulation),pointsPerInch:h.clone(this.pointsPerInch)}};l([g.property({type:a.apiValues,readOnly:!0,nonNullable:!0,json:{type:a.jsonValues,read:!1,write:a.write}})],d.prototype,"type",void 0);l([g.property({types:f.pointSizeAlgorithmTypes,json:{read:c.read,write:!0}})],d.prototype,"pointSizeAlgorithm",void 0);l([g.property({type:e.default,json:{write:!0}})],d.prototype,"colorModulation",void 0);
l([g.property({json:{write:!0},nonNullable:!0,type:Number})],d.prototype,"pointsPerInch",void 0);return d=l([g.subclass("esri.renderers.PointCloudRenderer")],d)}(g.declared(b));(r||(r={})).fieldTransformTypeKebabDict=new k.JSONMap({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});return r})},"esri/renderers/support/pointCloud/ColorModulation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function g(){var b=null!==d&&d.apply(this,arguments)||this;b.field=null;b.minValue=0;b.maxValue=255;return b}n(g,d);e=g;g.prototype.clone=function(){return new e({field:this.field,minValue:this.minValue,maxValue:this.maxValue})};var e;l([b.property({type:String,json:{write:!0}})],g.prototype,"field",void 0);l([b.property({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"minValue",void 0);l([b.property({type:Number,
nonNullable:!0,json:{write:!0}})],g.prototype,"maxValue",void 0);return g=e=l([b.subclass("esri.renderers.support.pointCloud.ColorModulation")],g)}(b.declared(k));d.ColorModulation=r;d.default=r})},"esri/renderers/support/pointCloud/pointSizeAlgorithmJSONUtils":function(){define(["require","exports","../../../core/Warning","./PointSizeFixedSizeAlgorithm","./PointSizeSplatAlgorithm"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});var b={pointCloudFixedSizeAlgorithm:l.default,
pointCloudSplatAlgorithm:k.default};d.read=function(d,g,e){if(g=d?b[d.type]||null:null)return g=new g,g.read(d,e),g;e&&e.messages&&d&&e.messages.push(new n("pointsizealgorithm:unsupported","Point size algorithms of type '"+(d.type||"unknown")+"' are not supported",{definition:d,context:e}));return null};d.fromJSON=function(d){var g=d?b[d.type]||null:null;return g?g.fromJSON(d):null}})},"esri/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./PointSizeAlgorithm".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.type="fixed-size";c.size=0;c.useRealWorldSymbolSizes=null;return c}n(d,b);e=d;d.prototype.clone=function(){return new e({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})};var e;l([k.enumeration.serializable()({pointCloudFixedSizeAlgorithm:"fixed-size"})],d.prototype,"type",void 0);l([k.property({type:Number,nonNullable:!0,json:{write:!0}})],
d.prototype,"size",void 0);l([k.property({type:Boolean,json:{write:!0}})],d.prototype,"useRealWorldSymbolSizes",void 0);return d=e=l([k.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],d)}(k.declared(b.default));d.PointSizeFixedSizeAlgorithm=r;d.default=r})},"esri/renderers/support/pointCloud/PointSizeAlgorithm":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(r,d,n,l,k,b,h){Object.defineProperty(d,"__esModule",{value:!0});d.typeKebabDictionary=new k.default({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});r=function(b){function e(){return null!==b&&b.apply(this,arguments)||this}n(e,b);l([h.property({type:d.typeKebabDictionary.apiValues,readOnly:!0,nonNullable:!0,json:{type:d.typeKebabDictionary.jsonValues,read:!1,write:d.typeKebabDictionary.write}})],e.prototype,"type",void 0);return e=l([h.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],
e)}(h.declared(b));d.PointSizeAlgorithm=r;d.default=r})},"esri/renderers/support/pointCloud/PointSizeSplatAlgorithm":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./PointSizeAlgorithm".split(" "),function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.type="splat";c.scaleFactor=1;return c}n(d,b);
e=d;d.prototype.clone=function(){return new e({scaleFactor:this.scaleFactor})};var e;l([k.enumeration.serializable()({pointCloudSplatAlgorithm:"splat"})],d.prototype,"type",void 0);l([k.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],d.prototype,"scaleFactor",void 0);return d=e=l([k.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],d)}(k.declared(b.default));d.PointSizeSplatAlgorithm=r;d.default=r})},"esri/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":function(){define(["require",
"exports","./PointSizeAlgorithm","./PointSizeFixedSizeAlgorithm","./PointSizeSplatAlgorithm"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});d.pointSizeAlgorithmTypes={key:"type",base:n.default,typeMap:{"fixed-size":l.default,splat:k.default}}})},"esri/renderers/support/pointCloud/ColorClassBreakInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.minValue=0;a.maxValue=0;a.color=null;return a}n(c,b);a=c;c.prototype.clone=function(){return new a({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:h.clone(this.color)})};var a;l([g.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);l([g.property({type:String,
json:{write:!0}})],c.prototype,"label",void 0);l([g.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0);l([g.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0);l([g.property({type:k,json:{type:[e.Integer],write:!0}})],c.prototype,"color",void 0);return c=a=l([g.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],c)}(g.declared(b));d.ColorClassBreakInfo=
r;d.default=r})},"esri/renderers/PointCloudStretchRenderer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./PointCloudRenderer ./support/LegendOptions ./support/pointCloud/StopInfo".split(" "),function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this)||this;a.type="point-cloud-stretch";a.field=null;a.legendOptions=null;a.fieldTransformType=
null;a.stops=null;return a}l(a,d);f=a;a.prototype.clone=function(){return new f(n({},this.cloneProperties(),{field:b.clone(this.field),fieldTransformType:b.clone(this.fieldTransformType),stops:b.clone(this.stops),legendOptions:b.clone(this.legendOptions)}))};var f;k([h.enumeration.serializable()({pointCloudStretchRenderer:"point-cloud-stretch"})],a.prototype,"type",void 0);k([h.property({json:{write:!0},type:String})],a.prototype,"field",void 0);k([h.property({type:e.default,json:{write:!0}})],a.prototype,
"legendOptions",void 0);k([h.property({type:g.fieldTransformTypeKebabDict.apiValues,json:{type:g.fieldTransformTypeKebabDict.jsonValues,read:g.fieldTransformTypeKebabDict.read,write:g.fieldTransformTypeKebabDict.write}})],a.prototype,"fieldTransformType",void 0);k([h.property({type:[c.default],json:{write:!0}})],a.prototype,"stops",void 0);return a=f=k([h.subclass("esri.renderers.PointCloudStretchRenderer")],a)}(h.declared(g))})},"esri/renderers/support/pointCloud/StopInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.label=null;a.value=0;a.color=null;return a}n(c,b);a=c;c.prototype.clone=function(){return new a({label:this.label,value:this.value,color:h.clone(this.color)})};var a;l([g.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);l([g.property({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"value",void 0);l([g.property({type:k,
json:{type:[e.Integer],write:!0}})],c.prototype,"color",void 0);return c=a=l([g.subclass("esri.renderers.support.pointCloud.StopInfo")],c)}(g.declared(b));d.StopInfo=r;d.default=r})},"esri/renderers/PointCloudUniqueValueRenderer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./PointCloudRenderer ./support/LegendOptions ./support/pointCloud/ColorUniqueValueInfo".split(" "),
function(r,d,n,l,k,b,h,g,e,c){return function(d){function a(a){a=d.call(this)||this;a.type="point-cloud-unique-value";a.field=null;a.fieldTransformType=null;a.colorUniqueValueInfos=null;a.legendOptions=null;return a}l(a,d);f=a;a.prototype.clone=function(){return new f(n({},this.cloneProperties(),{field:b.clone(this.field),fieldTransformType:b.clone(this.fieldTransformType),colorUniqueValueInfos:b.clone(this.colorUniqueValueInfos),legendOptions:b.clone(this.legendOptions)}))};var f;k([h.enumeration.serializable()({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],
a.prototype,"type",void 0);k([h.property({json:{write:!0},type:String})],a.prototype,"field",void 0);k([h.property({type:g.fieldTransformTypeKebabDict.apiValues,json:{type:g.fieldTransformTypeKebabDict.jsonValues,read:g.fieldTransformTypeKebabDict.read,write:g.fieldTransformTypeKebabDict.write}})],a.prototype,"fieldTransformType",void 0);k([h.property({type:[c.default],json:{write:!0}})],a.prototype,"colorUniqueValueInfos",void 0);k([h.property({type:e.default,json:{write:!0}})],a.prototype,"legendOptions",
void 0);return a=f=k([h.subclass("esri.renderers.PointCloudUniqueValueRenderer")],a)}(h.declared(g))})},"esri/renderers/support/pointCloud/ColorUniqueValueInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});
r=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.values=null;a.color=null;return a}n(c,b);a=c;c.prototype.clone=function(){return new a({description:this.description,label:this.label,values:h.clone(this.values),color:h.clone(this.color)})};var a;l([g.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);l([g.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);l([g.property({type:[String],json:{write:!0}})],
c.prototype,"values",void 0);l([g.property({type:k,json:{type:[e.Integer],write:!0}})],c.prototype,"color",void 0);return c=a=l([g.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],c)}(g.declared(b));d.ColorUniqueValueInfo=r;d.default=r})},"esri/views/3d/layers/i3s/I3SUtil":function(){define("require exports ../../../../request ../../../../core/arrayUtils ../../../../core/Error ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/typedArrayUtil ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/webMercatorUtils ../../../../tasks/QueryTask ../../../../tasks/support/Query ./I3SBinaryReader ../../support/projectionUtils ../../support/stack".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x){function w(a){return a&&parseInt(a.substring(a.lastIndexOf("/")+1,a.length),10)}function m(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=a[0]-c,c=c-a[3],g=a[1]-d,d=d-a[4],h=a[2]-e;a=e-a[5];var e=Math.max(f,c,0),k=Math.max(g,d,0),l=Math.max(h,a,0),e=e*e+k*k+l*l;return e>b*b?0:0<e?1:-Math.max(f,c,g,d,h,a)>b?3:2}function u(a,b,c){var d=[],e=c&&c.missingFields;c=c&&c.originalFields;for(var f=0;f<a.length;f++){for(var g=a[f],h=g.toLowerCase(),k=!1,l=0,m=b;l<m.length;l++){var p=
m[l];if(h===p.name.toLowerCase()){d.push(p.name);k=!0;c&&c.push(g);break}}!k&&e&&e.push(g)}return d}function z(a,b){return a.filter(function(a){return a.toLowerCase()!==b.toLowerCase()}).concat([b])}function B(a,b,c,d){b.sort(function(a,b){return a.attributes[c]-b.attributes[c]});var e=b.map(function(a){return a.attributes[c]}),f=[],g=u(d,a.fields,{originalFields:f});return F(a,e,g).then(function(a){for(var c=0;c<b.length;c++){var d=b[c],e=a[c];d.attributes={};for(var h=0;h<f.length;h++)d.attributes[f[h]]=
e[g[h]]}return b})}function C(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];e in b.attributes||c.push(e)}return c}function F(a,b,c){if(null!=a.maxRecordCount&&b.length>a.maxRecordCount){var d=L(b,a.maxRecordCount);return h.all(d.map(function(b){return F(a,b,c)})).then(K)}d=new v({objectIds:b,outFields:c,orderByFields:[a.objectIdField]});return(new q(a.parsedUrl.path)).execute(d).then(function(a){return a&&a.features&&a.features.length===b.length?a.features.map(function(a){return a.attributes}):
h.reject(new k("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer"))})}function E(a,b,c,d,e,f){for(var g=[],l=0;l<b.length;l++){var m=b[l];m&&-1!==e.indexOf(m.name)&&g.push({url:a+"/nodes/"+c.resources.attributes+"/attributes/"+m.key+"/0",storageInfo:m})}return h.eachAlways(g.map(function(a){return n(a.url,{responseType:"array-buffer"}).then(function(b){return t.readBinaryAttribute(a.storageInfo,b.data)})})).then(function(a){var b=[];if(!f.ignoreUnavailableFields&&
a.some(function(a){return null==a.value})){for(var b=[],c=0;c<a.length;c++)null==a[c].value&&b.push({name:g[c].storageInfo.name,error:a[c].error});return h.reject(new k("scenelayer:attribute-request-failed","Request for scene layer attributes failed",{failedAttributes:b}))}for(var e=0;e<d.length;e++){for(var l=d[e],m={},c=0;c<a.length;c++)null!=a[c].value&&(m[g[c].storageInfo.name]=N(a[c].value,l));b.push(m)}return b})}function N(a,b){if(!a)return null;b=a[b];return g.isInt16Array(a)?b===T?null:b:
g.isInt32Array(a)?b===Z?null:b:b!==b?null:b}function L(a,b){var c=a.length;b=Math.ceil(c/b);for(var d=[],e=0;e<b;e++)d.push(a.slice(Math.floor(c*e/b),Math.floor(c*(e+1)/b)));return d}function K(a){for(var b=[],c=0;c<a.length;c++)b=b.concat(a[c]);return b}function O(a){var b=new f(w(a.store.indexCRS||a.store.geographicCRS));return b.equals(a.spatialReference)?a.spatialReference:b}function I(a){var b=new f(w(a.store.vertexCRS||a.store.projectedCRS));return b.equals(a.spatialReference)?a.spatialReference:
b}function H(a,b,c){if(!p.canProject(a,b))throw new k("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===c&&a.isGeographic)throw new k("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",{});}function S(a,b,c){var d=O(a);a=I(a);H(d,b,c);H(a,b,c)}Object.defineProperty(d,"__esModule",{value:!0});d.DDS_ENCODING_STRING="image/vnd-ms.dds";d.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS=
["image/jpeg","image/png"];d.extractWkid=w;d.selectEncoding=function(a,b){if(b)for(b=0;b<a.length;b++)if(a[b].encoding===d.DDS_ENCODING_STRING)return a[b];for(b=0;b<a.length;b++)if(-1<d.BROWSER_SUPPORTED_IMAGE_ENCODING_STRINGS.indexOf(a[b].encoding))return a[b];return null};d.findIntersectingNodes=function(a,b,c,d,e,f){e.traverse(c,function(c){var e=c.mbs;b!==d&&(e=V,y.mbsToMbs(c.mbs,d,e,b));e=m(a,e);if(0!==e)return f(c,e),!0})};d.filterInPlace=function(a,b,c){for(var d=0,e=0,f=0;f<b.length&&d<a.length;f++)a[d]===
b[f]&&(c(f)&&(a[e]=a[d],e++),d++);a.length=e};var P=a.create();d.getClipAABB=function(a,b){var c=e.mat4.copy(x.sm4d.get(),b.objectTransformation);b=b.getGeometryRecords()[0].getShaderTransformation();e.mat4.multiply(c,c,b);if(0===c[1]&&0===c[2]&&0===c[3]&&0===c[4]&&0===c[6]&&0===c[7]&&0===c[8]&&0===c[9]&&0===c[11]&&1===c[15])return P[0]=(a[0]-c[12])/c[0],P[1]=(a[1]-c[13])/c[5],P[2]=(a[2]-c[14])/c[10],P[3]=(a[3]-c[12])/c[0],P[4]=(a[4]-c[13])/c[5],P[5]=(a[5]-c[14])/c[10],P};var V=c.vec4f64.create();
d.intersectBoundingBoxWithMbs=m;d.findFieldsCaseInsensitive=u;d.whenGraphicAttributes=function(a,b,c,d,e,f){var g=!0===(f&&f.populateObjectId),m=f.ignoreUnavailableFields?void 0:[],p=1===d.length&&"*"===d[0];!p&&g&&(d=z(d,c));d=p?d:u(d,a.fields,{missingFields:m});if(m&&0!==m.length)return h.reject(new k("scenelayer:unknown-fields","This scene layer does not have the requested fields",{unknownFields:m}));if(0===b.length)return h.resolve(b);var m=a.associatedLayer,n=a.attributeStorageInfo,q=p?a.fields.map(function(a){return a.name}):
d;if(m)return B(m,b,c,q);var r=C(q,b[0]);if(0===r.length)return h.resolve(b);if(n){b=e(b);if(!b)return h.reject(new k("scenelayer:features-not-loaded","Tried to query attributes for unloaded features"));var t=a.parsedUrl.path;return h.all(b.map(function(a){return E(t,n,a.node,a.indices,r,f).then(function(b){for(var c=0;c<a.graphics.length;c++){for(var d=0,e=q;d<e.length;d++){var f=e[d];f in b[c]||(b[c][f]=a.graphics[c].attributes[f])}a.graphics[c].attributes=b[c]}return a.graphics})})).then(l.flatten)}return h.reject(new k("scenelayer:no-attribute-source",
"This scene layer does not have a source for attributes available"))};var T=-Math.pow(2,15),Z=-Math.pow(2,31);d.getCachedAttributeValue=N;d.convertFlatRangesToOffsets=function(a,b,c){b=null!=b?b:a.length/c;for(var d=new Uint32Array(b+1),e=0;e<b;e++){var f=a[e*c];d[e]=3*f;var g=(e-1)*c+1;if(0<=g&&f-1!==a[g])throw new k("Face ranges are not continuous");}d[d.length-1]=3*(a[(b-1)*c+1]+1);return d};d.getIndexCrs=O;d.getVertexCrs=I;d.getCacheKeySuffix=function(a,b){return b===y.SphericalECEFSpatialReference?
"@ECEF":a.equals(b)?"":null!=b.wkid?"@"+b.wkid:null};d.checkSpatialReference=H;d.checkSpatialReferences=S;d.checkSceneLayerValid=function(a){var b;(b=null==a.store||null==a.store.defaultGeometrySchema)||(a=a.store.defaultGeometrySchema,b=!!(null!=a.geometryType&&"triangles"!==a.geometryType||null!=a.topology&&"PerAttributeArray"!==a.topology||null==a.vertexAttributes||null==a.vertexAttributes.position));if(b)throw new k("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",
{});};d.checkSceneLayerCompatibleWithView=function(a,b){S(a,b.spatialReference,b.viewingMode)};d.checkPointCloudLayerValid=function(a){var b;(b=null==a.store||null==a.store.defaultGeometrySchema)||(a=a.store.defaultGeometrySchema,b=!!(null==a.geometryType||"points"!==a.geometryType||null!=a.topology&&"PerAttributeArray"!==a.topology||null!=a.encoding&&""!==a.encoding&&"lepcc-xyz"!==a.encoding||null==a.vertexAttributes||null==a.vertexAttributes.position));if(b)throw new k("pointcloud:unsupported-geometry-schema",
"The geometry schema of this point cloud scene layer is not supported.",{});};d.checkPointCloudLayerCompatibleWithView=function(a,b){H(a.spatialReference,b.spatialReference,b.viewingMode)};d.rendererNeedsTextures=function(a){if(null==a||"simple"!==a.type&&"class-breaks"!==a.type&&"unique-value"!==a.type||("unique-value"===a.type||"class-breaks"===a.type)&&null==a.defaultSymbol)return!0;a=a.getSymbols();if(0===a.length)return!0;for(var c=0;c<a.length;c++){var d=a[c];if("mesh-3d"!==d.type||0===d.symbolLayers.length)return!0;
for(var e=0,d=d.symbolLayers.items;e<d.length;e++){var f=d[e];if("fill"!==f.type||b.isNone(f.material)||b.isNone(f.material.color)||"replace"!==f.material.colorMixMode)return!0}}return!1};var Q=function(){return function(){this.material=this.edges=null;this.castShadows=!0}}();d.SymbolInfo=Q;d.getSymbolInfo=function(a){var c=new Q,d=!1,e=!1,f=0;for(a=a.symbolLayers.items;f<a.length;f++){var g=a[f];if("fill"===g.type&&g.enabled){var h=g.material,k=g.edges;b.isSome(h)&&!d&&(d=h.color,h=h.colorMixMode,
b.isSome(d)?c.material={color:[d.r/255,d.g/255,d.b/255],alpha:d.a,colorMixMode:h}:c.material={color:[1,1,1],alpha:1,colorMixMode:"multiply"},c.castShadows=g.castShadows,d=!0);b.isSome(k)&&!e&&(c.edges=k,e=!0)}}c.material||(c.material={color:[1,1,1],alpha:1,colorMixMode:"multiply"});return c};d.addWraparound=function(a,b){return(a|0)+(b|0)|0}})},"esri/views/3d/layers/i3s/LoDUtil":function(){define(["require","exports","../../../../core/libs/gl-matrix-2/vec3"],function(r,d,n){function l(b,d,a){for(;0<
b;){var c=d.indexOf(b);if(0<=c)return c;b=a.getParentId(b)}return d.indexOf(b)}function k(b,d){for(var a=[b.remove[0]],c=[];1===a.length;)for(var e=a.pop(),f=c.length=0;f<b.load.length;f++){for(var g=b.load[f],h=d.getParentId(g);h!==e;)g=h,h=d.getParentId(g);h=a.indexOf(g);0>h&&(h=a.length,a.push(g),c.push([]));c[h].push(b.load[f])}d=[];d.push({remove:b.remove,load:a});for(f=0;f<a.length;f++)1<c[f].length?d.push({remove:[a[f]],load:c[f]}):a[f]=c[f][0];return d}Object.defineProperty(d,"__esModule",
{value:!0});d.nodeDiff=function(c,d,a){for(var f=0;f<d.length;f++)g[f]=!1,e[f]=null;for(f=0;f<c.length;f++)b[f]=!1,h[f]=null;for(f=0;f<d.length;f++){var k=l(d[f],c,a);0<=k&&(g[f]=!0,null!=h[k]?h[k].push(d[f]):h[k]=[d[f]])}for(f=0;f<c.length;f++)k=l(c[f],d,a),0<=k&&(b[f]=!0,null!=e[k]?e[k].push(c[f]):e[k]=[c[f]]);a=[];for(f=0;f<c.length;f++)null!=h[f]||b[f]||a.push({load:[],remove:[c[f]]});for(f=0;f<d.length;f++)null!=e[f]||g[f]||a.push({load:[d[f]],remove:[]});for(f=0;f<d.length;f++)null!=e[f]&&(1<
e[f].length||e[f][0]!==d[f])&&a.push({load:[d[f]],remove:e[f]});for(f=0;f<c.length;f++)null!=h[f]&&(1<h[f].length||h[f][0]!==c[f])&&a.push({load:h[f],remove:[c[f]]});return a};var b=[!1],h=[null],g=[!1],e=[null];d.sortFrontToBack=function(b,d,a){return b.sort(function(b,c){if(0===b.load.length&&0===c.load.length)return 0;if(0===b.load.length)return-1;if(0===c.load.length)return 1;if(0===b.remove.length&&0===c.remove.length)return b=a.getRenderCenter(b.load[0]),c=a.getRenderCenter(c.load[0]),n.vec3.dot(b,
d)-n.vec3.dot(c,d);if(0===b.remove.length)return-1;if(0===c.remove.length)return 1;if(1===b.load.length&&1===c.load.length)return b=a.getRenderCenter(b.load[0]),c=a.getRenderCenter(c.load[0]),n.vec3.dot(b,d)-n.vec3.dot(c,d);if(1===b.load.length)return-1;if(1===c.load.length)return 1;b=a.getRenderCenter(b.remove[0]);c=a.getRenderCenter(c.remove[0]);return n.vec3.dot(b,d)-n.vec3.dot(c,d)})};d.splitWorkEntries=function(b,d,a){for(var c=0;c<b.length;++c){var e=b[c];if(e.load.length>d&&1===e.remove.length){e=
k(e,a);b[c]=e[0];for(var f=1;f<e.length;f++)b.push(e[f])}}};d.splitWorkEntry=k})},"esri/views/3d/layers/i3s/PagedNodeIndex":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/quat ../../../../core/libs/gl-matrix-2/quatf32 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingBox ../../support/orientedBoundingBox ../../support/projectionUtils".split(" "),function(r,d,n,l,k,
b,h,g,e,c){var f=h.vec3f64.create();r=function(){function d(a,b,c){this._pages=[];this.pageSize=0;this._renderSR=this._nodeSR=null;this._nodeSR=a;this._renderSR=b;this.pageSize=c}d.prototype.addPage=function(d,g,h){for(void 0===h&&(h=0);this._pages.length<d;)this._pages.push(null);for(var k=this._nodeSR,n=this._renderSR,m=new e.ObbArray(g.length),q=0;q<g.length;q++){var r=g[q].obb,t=m.obbs[q];e.set(r,t);b.vec3.set(f,r.center[0],r.center[1],r.center[2]+h);k.isGeographic||n!==c.SphericalECEFSpatialReference||
(c.computeLinearTransformation(k,f,a,n),r=2*Math.sqrt(1+a[0]+a[5]+a[10]),p[0]=(a[9]-a[6])/r,p[1]=(a[2]-a[8])/r,p[2]=(a[4]-a[1])/r,p[3]=.25*r,l.quat.conjugate(p,p),l.quat.multiply(t.quaternion,p,t.quaternion));c.bufferToBuffer(f,k,0,t.center,n,0,1)}this._pages[d]={nodes:g,renderObbs:m.obbs,parents:new Uint32Array(this.pageSize)};d=this._pages;g=this.pageSize;for(k=[0];k.length;)for(n=k.pop(),h=d[n/g|0].nodes[n%g],m=0;m<h.childCount;m++)q=h.firstChild+m,null!=d[q/g|0]&&(d[q/g|0].parents[q%g]=n,k.push(q))};
d.prototype.hasPage=function(a){return!!this._pages[a]};d.prototype.getNode=function(a){var b=this.pageSize;return this._pages[a/b|0].nodes[a%b]};d.prototype.getRenderObb=function(a){var b=this.pageSize;return this._pages[a/b|0].renderObbs[a%b]};d.prototype.getRenderCenter=function(a){return this.getRenderObb(a).center};d.prototype.setRenderObb=function(a,b){var c=this.pageSize;e.set(b,this._pages[a/c|0].renderObbs[a%c])};d.prototype.getParentId=function(a){var b=this.pageSize;return this._pages[a/
b|0].parents[a%b]};d.prototype.hasNodes=function(a,b){b=(a+b-1)/this.pageSize|0;for(a=a/this.pageSize|0;a<=b;a++)if(null==this._pages[a])return!1;return!0};d.prototype.createVisibilityTraverse=function(){var a=this,b=[],c=[],d=g.create();return function(f,h){if(a.hasNodes(0,1))for(b.length=0,b.push(0),c.length=0,c.push(0);0<b.length;){var k=b.pop(),l=c.pop(),m=a.getNode(k),n=a.getRenderObb(k),p=!0;if(null!=f.clippingBox){var q=1<<f.frustumPlanes.length;if(0===(l&q)){var r=e.toAaBoundingBox(n,d);g.contains(f.clippingBox,
r)?l|=q:g.intersects(f.clippingBox,r)||(p=!1)}}for(r=0;r<f.frustumPlanes.length&&p;r++)if(q=1<<r,0===(l&q)){var t=e.intersectPlane(n,f.frustumPlanes[r]);0<t?p=!1:0>t&&(l|=q)}if(h.predicate(k,m,p)){n=m.firstChild;m=m.childCount;r=!1;p=(n+m-1)/a.pageSize|0;for(q=n/a.pageSize|0;q<=p;q++)if(!a.hasPage(q)){h.pageMiss(k,q);r=!0;break}if(!r)for(r=0;r<m;r++)b.push(n+r),c.push(l)}}}};return d}();var a=n.mat4f64.create(),p=k.quatf32.create();return r})},"esri/views/3d/support/orientedBoundingBox":function(){define("require exports ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/quat ../../../core/libs/gl-matrix-2/quatf32 ../../../core/libs/gl-matrix-2/quatf64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f32 ../../../core/libs/gl-matrix-2/vec3f64 ../../../core/libs/gl-matrix-2/vec4 ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingBox ./dito ./geometryUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){function t(a,d,f){return{center:c.vec3f64.clone(a),halfSize:e.vec3f32.clone(d),quaternion:b.quatf32.clone(f)}}function y(a,b){var c=v.plane.signedDistance(b,a.center);a=x(a,b);return c>a?1:c<-a?-1:0}function x(a,b){k.quat.conjugate(w,a.quaternion);g.vec3.transformQuat(m,b,w);a=a.halfSize;return Math.abs(m[0]*a[0])+Math.abs(m[1]*a[1])+Math.abs(m[2]*a[2])}Object.defineProperty(d,"__esModule",{value:!0});var w=h.quatf64.create(),m=c.vec3f64.create(),u=c.vec3f64.create(),
z=a.vec4f64.create(),B=l.mat3f64.create();r=function(){return function(a){this.buffer=new ArrayBuffer(56*a);this.obbs=Array(a);for(var d=0;d<a;d++)this.obbs[d]={center:c.vec3f64.createView(this.buffer,56*d+0),halfSize:e.vec3f32.createView(this.buffer,56*d+24),quaternion:b.quatf32.createView(this.buffer,56*d+36)}}}();d.ObbArray=r;d.create=t;d.clone=function(a){return t(a.center,a.halfSize,a.quaternion)};d.set=function(a,b){g.vec3.copy(b.center,a.center);g.vec3.copy(b.halfSize,a.halfSize);k.quat.copy(b.quaternion,
a.quaternion)};d.compute=function(a,b){b||(b=t([0,0,0],[-1,-1,-1],[0,0,0,1]));q.computeOBB(a,b);return b};d.intersectPlane=y;d.toAaBoundingBox=function(a,b){b||(b=p.create());var c=n.mat3.fromQuat(B,a.quaternion),d=a.halfSize[0]*Math.abs(c[0])+a.halfSize[1]*Math.abs(c[3])+a.halfSize[2]*Math.abs(c[6]),e=a.halfSize[0]*Math.abs(c[1])+a.halfSize[1]*Math.abs(c[4])+a.halfSize[2]*Math.abs(c[7]),c=a.halfSize[0]*Math.abs(c[2])+a.halfSize[1]*Math.abs(c[5])+a.halfSize[2]*Math.abs(c[8]);b[0]=a.center[0]-d;b[1]=
a.center[1]-e;b[2]=a.center[2]-c;b[3]=a.center[0]+d;b[4]=a.center[1]+e;b[5]=a.center[2]+c;return b};d.minimumDistancePlane=function(a,b){var c=v.plane.signedDistance(b,a.center);a=x(a,b);return c-a};d.maximumDistancePlane=function(a,b){var c=v.plane.signedDistance(b,a.center);a=x(a,b);return c+a};d.isVisible=function(a,b){return 0>=y(a,b.planes[0])&&0>=y(a,b.planes[1])&&0>=y(a,b.planes[2])&&0>=y(a,b.planes[3])&&0>=y(a,b.planes[4])&&0>=y(a,b.planes[5])};d.intersectLine=function(a,b,c,d){void 0===d&&
(d=0);k.quat.conjugate(w,a.quaternion);g.vec3.subtract(m,b,a.center);b=g.vec3.transformQuat(m,m,w);c=g.vec3.transformQuat(u,c,w);for(var e=-Infinity,f=Infinity,h=0;3>h;h++)if(1E-6<Math.abs(c[h]))var l=(d+a.halfSize[h]-b[h])/c[h],n=(-d-a.halfSize[h]-b[h])/c[h],e=Math.max(e,Math.min(l,n)),f=Math.min(f,Math.max(l,n));else if(b[h]>a.halfSize[h]+d||b[h]<-a.halfSize[h]-d)return!1;return e<=f};d.projectedArea=function(a,b,c,d,e){k.quat.conjugate(w,a.quaternion);g.vec3.sub(m,b,a.center);g.vec3.transformQuat(m,
m,w);var h=m[0]<-a.halfSize[0]?-1:m[0]>a.halfSize[0]?1:0,l=m[1]<-a.halfSize[1]?-1:m[1]>a.halfSize[1]?1:0,p=m[2]<-a.halfSize[2]?-1:m[2]>a.halfSize[2]?1:0;b=Math.abs(h)+Math.abs(l)+Math.abs(p);if(0===b)return Infinity;b=1===b?4:6;l=6*(h+3*l+9*p+13);n.mat3.fromQuat(B,a.quaternion);n.mat3.scale(B,B,a.halfSize);for(h=0;h<b;h++)p=F[l+h],g.vec3.set(m,((p&1)<<1)-1,(p&2)-1,((p&4)>>1)-1),g.vec3.transformMat3(m,m,B),g.vec3.add(z,a.center,m),z[3]=1,f.vec4.transformMat4(z,z,c),p=1/Math.max(1E-6,z[3]),C[2*h]=z[0]*
p,C[2*h+1]=z[1]*p;a=2*b-2;c=C[0]*(C[3]-C[a+1])+C[a]*(C[1]-C[a-1]);for(h=2;h<a;h+=2)c+=C[h]*(C[h+3]-C[h-1]);return Math.abs(c)*d*e*.125};var C=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],F=function(){var a=new Int8Array(162),b=0,c=function(c){for(var d=0;d<c.length;d++)a[b+d]=c[d];b+=6};c([6,2,3,1,5,4]);c([0,2,3,1,5,4]);c([0,2,3,7,5,4]);c([0,1,3,2,6,4]);c([0,1,3,2,0,0]);c([0,1,5,7,3,2]);c([0,1,3,7,6,4]);c([0,1,3,7,6,2]);c([0,1,5,7,6,2]);c([0,1,5,4,6,2]);c([0,1,5,4,0,0]);c([0,1,3,7,5,4]);c([0,2,6,4,0,0]);
c([0,0,0,0,0,0]);c([1,3,7,5,0,0]);c([2,3,7,6,4,0]);c([2,3,7,6,0,0]);c([2,3,1,5,7,6]);c([0,1,5,7,6,2]);c([0,1,5,7,6,4]);c([0,1,3,7,6,4]);c([4,5,7,6,2,0]);c([4,5,7,6,0,0]);c([4,5,1,3,7,6]);c([0,2,3,7,5,4]);c([6,2,3,7,5,4]);c([6,2,3,1,5,4]);return a}()})},"esri/views/3d/support/dito":function(){define(["require","exports"],function(r,d){function n(b,c,d,e,f,h){if(!(1E-6>c[0]*c[0]+c[1]*c[1]+c[2]*c[2]))for(p(L,d,c),p(K,e,c),p(O,f,c),l(b,c,N),H[1]=N[0],I[1]=N[1],S[1]=I[1]-H[1],d=[d,e,f],e=[L,K,O],f=0;3>
f;++f){l(b,d[f],N);H[0]=N[0];I[0]=N[1];l(b,e[f],N);H[2]=N[0];I[2]=N[1];S[0]=I[0]-H[0];S[2]=I[2]-H[2];var k=g(S);k<h.quality&&(a(h.b0,d[f]),a(h.b1,c),a(h.b2,e[f]),h.quality=k)}}function l(a,b,c){var d=a.data,e=a.offsetIdx;a=a.strideIdx;c[0]=Number.POSITIVE_INFINITY;for(c[1]=Number.NEGATIVE_INFINITY;e<d.length;e+=a){var f=d[e]*b[0]+d[e+1]*b[1]+d[e+2]*b[2];c[0]=Math.min(c[0],f);c[1]=Math.max(c[1],f)}}function k(b,c,d){a(d.center,b);f(d.halfSize,c,.5);d.quaternion[0]=0;d.quaternion[1]=0;d.quaternion[2]=
0;d.quaternion[3]=1}function b(a,b,c,d,e,f){l(a,b,N);e[0]=N[0];f[0]=N[1];l(a,c,N);e[1]=N[0];f[1]=N[1];l(a,d,N);e[2]=N[0];f[2]=N[1]}function h(a,b,c,d,g,h,k){X[0]=a[0];X[1]=a[1];X[2]=a[2];X[3]=b[0];X[4]=b[1];X[5]=b[2];X[6]=c[0];X[7]=c[1];X[8]=c[2];var l=k.quaternion,m=X,p=m[0]+m[4]+m[8];if(0<p)p=Math.sqrt(p+1),l[3]=.5*p,p=.5/p,l[0]=(m[5]-m[7])*p,l[1]=(m[6]-m[2])*p,l[2]=(m[1]-m[3])*p;else{var n=0;m[4]>m[0]&&(n=1);m[8]>m[3*n+n]&&(n=2);var q=(n+1)%3,u=(n+2)%3,p=Math.sqrt(m[3*n+n]-m[3*q+q]-m[3*u+u]+1);
l[n]=.5*p;p=.5/p;l[3]=(m[3*q+u]-m[3*u+q])*p;l[q]=(m[3*q+n]+m[3*n+q])*p;l[u]=(m[3*u+n]+m[3*n+u])*p}e(ca,d,g);f(ca,ca,.5);f(k.center,a,ca[0]);f(U,b,ca[1]);e(k.center,k.center,U);f(U,c,ca[2]);e(k.center,k.center,U);f(k.halfSize,h,.5)}function g(a){return a[0]*a[1]+a[0]*a[2]+a[1]*a[2]}function e(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2]}function c(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2]}function f(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c}function a(a,b,c){void 0===c&&(c=0);a[0]=
b[c+0];a[1]=b[c+1];a[2]=b[c+2]}function p(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];a[0]=e*c-b*g;a[1]=b*f-d*c;a[2]=d*g-e*f}function q(a,b){var c=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c)}function v(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}Object.defineProperty(d,"__esModule",{value:!0});var t=[0,0,0],y=[0,0,0];d.computeOBB=function(d,l){var r=d.data.length/d.strideIdx;if(!(0>=r)){var X=new G(d);e(t,X.minProj,X.maxProj);
f(t,t,.5);c(y,X.maxProj,X.minProj);var K=g(y),H=new Y;H.quality=K;14>r&&(d={data:new Float64Array(X.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var I=[0,0,0],L=[0,0,0],O=[0,0,0],r=[0,0,0],ca=[0,0,0],U=[0,0,0],S=[0,0,0],la;la=d;for(var ja=v(X.maxVert[0],X.minVert[0]),wa=0,xa=1;7>xa;++xa){var va=v(X.maxVert[xa],X.minVert[xa]);va>ja&&(ja=va,wa=xa)}a(I,X.minVert[wa]);a(L,X.maxVert[wa]);if(1E-6>v(I,L))la=1;else{c(r,I,L);q(r,r);X=la.data;ja=la.strideIdx;wa=Number.NEGATIVE_INFINITY;xa=0;for(va=la.offsetIdx;va<
X.length;va+=ja){E[0]=X[va]-I[0];E[1]=X[va+1]-I[1];E[2]=X[va+2]-I[2];var ua=r[0]*E[0]+r[1]*E[1]+r[2]*E[2],ua=E[0]*E[0]+E[1]*E[1]+E[2]*E[2]-ua*ua/(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);ua>wa&&(wa=ua,xa=va)}a(O,X,xa);1E-6>wa?la=2:(c(ca,L,O),q(ca,ca),c(U,O,I),q(U,U),p(S,ca,r),q(S,S),n(la,S,r,ca,U,H),la=0)}switch(la){case 1:k(t,y,l);return;case 2:K=d;a(V,r);Math.abs(r[0])>Math.abs(r[1])&&Math.abs(r[0])>Math.abs(r[2])?V[0]=0:Math.abs(r[1])>Math.abs(r[2])?V[1]=0:V[2]=0;1E-6>V[0]*V[0]+V[1]*V[1]+V[2]*V[2]&&(V[0]=
V[1]=V[2]=1);p(T,r,V);q(T,T);p(Z,r,T);q(Z,Z);b(K,r,T,Z,Q,J);c(R,J,Q);h(r,T,Z,Q,J,R,l);return}la=d;X=x;ja=w;wa=N;xa=la.data;ua=la.offsetIdx;va=la.strideIdx;a(ja,xa,ua);a(X,ja);wa[0]=P[0]*S[0]+P[1]*S[1]+P[2]*S[2];wa[1]=wa[0];for(ua+=va;ua<xa.length;ua+=va){var Ka=xa[ua]*S[0]+xa[ua+1]*S[1]+xa[ua+2]*S[2];Ka<wa[0]&&(wa[0]=Ka,a(ja,xa,ua));Ka>wa[1]&&(wa[1]=Ka,a(X,xa,ua))}S=I[0]*S[0]+I[1]*S[1]+I[2]*S[2];N[1]-1E-6<=S&&(X[0]=void 0);N[0]+1E-6>=S&&(ja[0]=void 0);void 0!==x[0]&&(c(m,x,I),q(m,m),c(u,x,L),q(u,
u),c(z,x,O),q(z,z),p(B,u,r),q(B,B),p(C,z,ca),q(C,C),p(F,m,U),q(F,F),n(la,B,r,u,m,H),n(la,C,ca,z,u,H),n(la,F,U,m,z,H));void 0!==w[0]&&(c(m,w,I),q(m,m),c(u,w,L),q(u,u),c(z,w,O),q(z,z),p(B,u,r),q(B,B),p(C,z,ca),q(C,C),p(F,m,U),q(F,F),n(la,B,r,u,m,H),n(la,C,ca,z,u,H),n(la,F,U,m,z,H));b(d,H.b0,H.b1,H.b2,Q,J);d=[0,0,0];c(d,J,Q);H.quality=g(d);H.quality<K?h(H.b0,H.b1,H.b2,Q,J,d,l):k(t,y,l)}};var x=[0,0,0],w=[0,0,0],m=[0,0,0],u=[0,0,0],z=[0,0,0],B=[0,0,0],C=[0,0,0],F=[0,0,0],E=[0,0,0],N=[0,0],L=[0,0,0],K=
[0,0,0],O=[0,0,0],I=[0,0,0],H=[0,0,0],S=[0,0,0],P=[0,0,0],V=[0,0,0],T=[0,0,0],Z=[0,0,0],Q=[0,0,0],J=[0,0,0],R=[0,0,0],U=[0,0,0],X=[1,0,0,0,1,0,0,0,1],ca=[0,0,0],G=function(){return function(b){this.minVert=Array(7);this.maxVert=Array(7);this.buffer=new ArrayBuffer(448);var c=0;this.minProj=new Float64Array(this.buffer,c,7);c+=56;this.maxProj=new Float64Array(this.buffer,c,7);for(var c=c+56,d=0;7>d;++d)this.minVert[d]=new Float64Array(this.buffer,c,3),c+=24;for(d=0;7>d;++d)this.maxVert[d]=new Float64Array(this.buffer,
c,3),c+=24;for(d=0;7>d;++d)this.minProj[d]=Number.POSITIVE_INFINITY,this.maxProj[d]=Number.NEGATIVE_INFINITY;for(var c=Array(7),e=Array(7),f=b.data,g=b.strideIdx,d=b.offsetIdx;d<f.length;d+=g)b=f[d],b<this.minProj[0]&&(this.minProj[0]=b,c[0]=d),b>this.maxProj[0]&&(this.maxProj[0]=b,e[0]=d),b=f[d+1],b<this.minProj[1]&&(this.minProj[1]=b,c[1]=d),b>this.maxProj[1]&&(this.maxProj[1]=b,e[1]=d),b=f[d+2],b<this.minProj[2]&&(this.minProj[2]=b,c[2]=d),b>this.maxProj[2]&&(this.maxProj[2]=b,e[2]=d),b=f[d]+f[d+
1]+f[d+2],b<this.minProj[3]&&(this.minProj[3]=b,c[3]=d),b>this.maxProj[3]&&(this.maxProj[3]=b,e[3]=d),b=f[d]+f[d+1]-f[d+2],b<this.minProj[4]&&(this.minProj[4]=b,c[4]=d),b>this.maxProj[4]&&(this.maxProj[4]=b,e[4]=d),b=f[d]-f[d+1]+f[d+2],b<this.minProj[5]&&(this.minProj[5]=b,c[5]=d),b>this.maxProj[5]&&(this.maxProj[5]=b,e[5]=d),b=f[d]-f[d+1]-f[d+2],b<this.minProj[6]&&(this.minProj[6]=b,c[6]=d),b>this.maxProj[6]&&(this.maxProj[6]=b,e[6]=d);for(d=0;7>d;++d)b=c[d],a(this.minVert[d],f,b),b=e[d],a(this.maxVert[d],
f,b)}}(),Y=function(){return function(){this.b0=[1,0,0];this.b1=[0,1,0];this.b2=[0,0,1];this.quality=0}}()})},"esri/views/3d/layers/i3s/PointRenderer":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f32 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../geometry/support/aaBoundingBox ../../support/geometryUtils ../../support/geometryUtils ../../support/orientedBoundingBox ../../webgl-engine/lib/intersectorUtils ../../webgl-engine/lib/ProgramRepository ../../webgl-engine/materials/internal/MaterialUtil ../../webgl-engine/shaders/PointRendererPrograms ../../../webgl/BufferObject ../../../webgl/renderState ../../../webgl/VertexArrayObject".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m){function u(a,b,c,d,e){if(c.drawScreenSpace)return c.fixedSize*b*d;e=(e?256:64)*b*d;return c.drawFixedSize?Math.min(c.fixedSize/2,e):0<c.screenMinSize?Math.min(Math.max(c.screenMinSize*b*d,a/2),e):Math.min(a/2,e)}function z(a,b,c){null==c&&(c=g.vec3f64.create());c[0]=a.origin[0]+a.coordinates[3*b];c[1]=a.origin[1]+a.coordinates[3*b+1];c[2]=a.origin[2]+a.coordinates[3*b+2];return c}var B=k.mat4f64.create(),C={positions:[{name:"aPosition",count:3,type:5126,
offset:0,stride:12,normalized:!1}],colors:[{name:"aColor",count:3,type:5121,offset:0,stride:3,normalized:!0}]};r=function(){function d(){this.needsRender=!1;this.layerUid="";this._useFixedSizes=!1;this._scaleFactor=1;this._minSizePx=0;this._useRealWorldSymbolSizes=!1;this._sizePx=this._size=0;this._slicePlaneEnabled=!1;this._clipBox=c.create(c.POSITIVE_INFINITY);this._programRep=null;this._needsPrograms=!0;this._programScreenDepth=this._programWorldDepth=this._programScreen=this._programWorld=null;
this.tempMatrix4=l.mat4f32.create();this.tempVec3=h.vec3f32.create();this.nodes=[]}d.prototype.initializeRenderContext=function(a){this._programRep=new v(a.rctx);this._needsPrograms=this.needsRender=!0};d.prototype.uninitializeRenderContext=function(a){this._programRep.dispose();this._programScreenDepth=this._programWorldDepth=this._programScreen=this._programWorld=this._programRep=null};d.prototype.intersect=function(d,h,k,l,m){var n=g.vec3f64.create(),r=g.vec3f64.create(),t=g.vec3f64.create(),v=
g.vec3f64.create(),w=a.plane.create(),x=d.camera.perScreenPixelRatio/2,y=d.camera.near,C=this._getSizeParams();b.vec3.subtract(r,l,k);var E=1/b.vec3.length(r);b.vec3.scale(r,r,E);b.vec3.negate(t,r);e.vec4.set(w,r[0],r[1],r[2],-b.vec3.dot(r,k));var F={},K={};m=[];var X=c.create(),N=c.create(this._clipBox);c.offset(N,-k[0],-k[1],-k[2],N);for(var G=0,O=this.nodes;G<O.length;G++){var L=O[G],ja=L.splatSize*this._scaleFactor,na=p.minimumDistancePlane(L.obb,w),pa=p.maximumDistancePlane(L.obb,w),na=na-(C.drawScreenSpace?
0:u(ja,na+y,C,x,L.isLeaf)),pa=pa-(C.drawScreenSpace?0:u(ja,pa+y,C,x,L.isLeaf)),na=null!=F.dist&&null!=K.dist&&F.dist<na*E&&K.dist>pa*E;if(!(0>pa||na)&&(pa=u(ja,pa+y,C,x,L.isLeaf),p.intersectLine(L.obb,k,r,pa))){pa*=pa;p.toAaBoundingBox(L.obb,X);c.offset(X,-k[0],-k[1],-k[2],X);na=!c.contains(N,X);b.vec3.subtract(v,L.origin,k);for(var ta=L.coordinates.length/3,aa=0;aa<ta;aa++)if(n[0]=v[0]+L.coordinates[3*aa],n[1]=v[1]+L.coordinates[3*aa+1],n[2]=v[2]+L.coordinates[3*aa+2],!na||c.containsPoint(N,n)){var ga=
b.vec3.dot(n,r),ia=b.vec3.squaredLength(n)-ga*ga;if(!(ia>pa)){var sa=ga+y,Aa=C.drawScreenSpace?0:u(ja,sa,C,x,L.isLeaf);if(!(0>ga-Aa||(sa-=Aa,sa=u(ja,sa,C,x,L.isLeaf),ia>sa*sa))){ia=this.layerUid+"/"+L.id+"/"+aa;Aa=(ga-Aa)*E;if(null==F.dist||Aa<F.dist)if(ga=F,null==h||h(k,l,Aa))ga.point=z(L,aa,ga.point),ga.dist=Aa,ga.normal=t,ga.pointId=ia,ga.layerUid=this.layerUid;if(null==K.dist||Aa>K.dist)if(ga=K,null==h||h(k,l,Aa))ga.point=z(L,aa,ga.point),ga.dist=Aa,ga.normal=t,ga.pointId=ia,ga.layerUid=this.layerUid;
(null==h||h(k,l,Aa))&&d.enable.storeAll&&(ga={},ga.point=z(L,aa,ga.point),ga.dist=Aa,ga.normal=t,ga.pointId=ia,ga.layerUid=this.layerUid,m.push(ga))}}}}}null!=F.dist&&(n=d.results.min,null==n.dist||F.dist<n.dist)&&(h={type:"external",point:F.point,metadata:{pointId:F.pointId,layerUid:F.layerUid}},n.set(h,F.pointId,F.dist,F.normal,B,void 0),n.intersector="PointRenderer");null!=K.dist&&(F=d.results.max,null==F.dist||K.dist>F.dist)&&(h={type:"external",point:K.point,metadata:{pointId:K.pointId,layerUid:K.layerUid}},
F.set(h,K.pointId,K.dist,K.normal,B,void 0),F.intersector="PointRenderer");if(d.enable.storeAll)for(k=f.ray.fromPoints(k,l),l=0;l<m.length;l++)ga=m[l],h={type:"external",point:ga.point,metadata:{pointId:ga.pointId,layerUid:ga.layerUid}},K=new q.IntersectorResult(k),K.set(h,ga.pointId,ga.dist,ga.normal,B,void 0),K.intersector="PointRenderer",d.results.all.push(K)};d.prototype.render=function(a){if(0!==a.pass&&1!==a.pass)return!1;this.needsRender=!1;for(var d=1===a.pass,e=a.rctx,f=0,g=this.nodes;f<
g.length;f++){var h=g[f];null==h.vao&&this._initNode(a,h)}this._selectPrograms();f=this._getSizeParams();g=d?f.drawScreenSpace?this._programScreenDepth:this._programWorldDepth:f.drawScreenSpace?this._programScreen:this._programWorld;if(null==g||0===this.nodes.length)return!0;var k=this._clipBox,l=!c.equals(k,c.POSITIVE_INFINITY,function(a,b){return a===b});l||(b.vec3.set(this.tempVec3,-Infinity,-Infinity,-Infinity),g.setUniform3fv("uClipMin",this.tempVec3),b.vec3.set(this.tempVec3,Infinity,Infinity,
Infinity),g.setUniform3fv("uClipMax",this.tempVec3));e.bindProgram(g);e.setPipelineState(this._pipelineState);g.setUniformMatrix4fv("uProjectionMatrix",a.camera.projectionMatrix);d&&g.setUniform2f("nearFar",a.camera.near,a.camera.far);d=a.camera.pixelRatio;f.drawFixedSize&&g.setUniform2f("uPointScale",f.fixedSize*d,a.camera.fullHeight);for(var m=this._slicePlaneEnabled?a.sliceHelper&&a.sliceHelper.plane:null,p=0,q=this.nodes;p<q.length;p++){h=q[p];g.setUniform2f("uScreenMinMaxSize",f.screenMinSize*
d,(h.isLeaf?256:64)*d);f.drawFixedSize||g.setUniform2f("uPointScale",h.splatSize*this._scaleFactor*d,a.camera.fullHeight/d);var u=h.origin;l&&(b.vec3.set(this.tempVec3,k[0]-u[0],k[1]-u[1],k[2]-u[2]),g.setUniform3fv("uClipMin",this.tempVec3),b.vec3.set(this.tempVec3,k[3]-u[0],k[4]-u[1],k[5]-u[2]),g.setUniform3fv("uClipMax",this.tempVec3));n.mat4.identity(this.tempMatrix4);n.mat4.translate(this.tempMatrix4,this.tempMatrix4,u);n.mat4.multiply(this.tempMatrix4,a.camera.viewMatrix,this.tempMatrix4);g.setUniformMatrix4fv("uModelViewMatrix",
this.tempMatrix4);m&&t.bindSlicePlane(u,m,g);e.bindVAO(h.vao);e.drawArrays(0,0,h.coordinates.length/3)}return!0};Object.defineProperty(d.prototype,"useFixedSizes",{get:function(){return this._useFixedSizes},set:function(a){this._useFixedSizes!==a&&(this._useFixedSizes=a,this._requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"scaleFactor",{get:function(){return this._scaleFactor},set:function(a){this._scaleFactor!==a&&(this._scaleFactor=a,this._requestRender())},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"minSizePx",{get:function(){return this._minSizePx},set:function(a){this._minSizePx!==a&&(this._minSizePx=a,this._requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"useRealWorldSymbolSizes",{get:function(){return this._useRealWorldSymbolSizes},set:function(a){this._useRealWorldSymbolSizes!==a&&(this._useRealWorldSymbolSizes=a,this._requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"size",{get:function(){return this._size},set:function(a){this._size!==a&&(this._size=a,this._requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sizePx",{get:function(){return this._sizePx},set:function(a){this._sizePx!==a&&(this._sizePx=a,this._requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"clippingBox",{set:function(a){c.set(this._clipBox,a||c.POSITIVE_INFINITY)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"slicePlaneEnabled",{get:function(){return this._slicePlaneEnabled},set:function(a){this._slicePlaneEnabled!==a&&(this._slicePlaneEnabled=a,this._requestRender(),this._needsPrograms=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"intersectionHandlerId",{get:function(){return this.layerUid},enumerable:!0,configurable:!0});d.prototype.addNode=function(a){this.nodes.push(a);this._requestRender()};d.prototype.removeNode=function(a){var b=null;this.nodes=this.nodes.filter(function(c){return c.id===
a?(b=c,c.vao&&(c.vao.dispose(!0),c.vao=null),!1):!0});this._requestRender();return b};d.prototype.removeAll=function(){this.nodes.forEach(function(a){a.vao&&(a.vao.dispose(!0),a.vao=null)});this.nodes=[];this._requestRender()};d.prototype._initNode=function(a,b){a=a.rctx;b.vao=new m(a,y.program.attributes,C,{positions:x.createVertex(a,35044,b.coordinates),colors:x.createVertex(a,35044,b.rgb)})};d.prototype._requestRender=function(){this.needsRender=!0};d.prototype._getSizeParams=function(){var a=
this._useFixedSizes,b=a&&!this._useRealWorldSymbolSizes,c=b?this._sizePx:this._size,d=this._minSizePx;a&&(d=0);return{drawScreenSpace:b,drawFixedSize:a,fixedSize:c,screenMinSize:d}};d.prototype._selectPrograms=function(){this._needsPrograms&&(this._needsPrograms=!1,this._programWorld=this._programRep.getProgram(y.program,{slicePlaneEnabled:this._slicePlaneEnabled}),this._programScreen=this._programRep.getProgram(y.program,{drawScreenSize:!0,slicePlaneEnabled:this._slicePlaneEnabled}),this._programWorldDepth=
this._programRep.getProgram(y.program,{depthPass:!0,slicePlaneEnabled:this._slicePlaneEnabled}),this._programScreenDepth=this._programRep.getProgram(y.program,{drawScreenSize:!0,depthPass:!0,slicePlaneEnabled:this._slicePlaneEnabled}),this._pipelineState=w.makePipelineState({depthTest:{func:513},depthWrite:w.defaultDepthWriteParams,colorWrite:w.defaultColorWriteParams}))};return d}();(function(a){a.isInstanceOfNode=function(a){return a.hasOwnProperty("splatSize")}})(r||(r={}));return r})},"esri/views/3d/webgl-engine/shaders/PointRendererPrograms":function(){define(["require",
"exports","./sources/resolver","../../../webgl/programUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});var k=function(b){return l.glslifyDefineMap({DEPTH_PASS:b.depthPass,DRAW_SCREEN_SIZE:b.drawScreenSize,SLICE:b.slicePlaneEnabled})};d.program={name:"point-renderer",shaders:function(b){return{vertexShader:k(b)+n.resolveIncludes("pointRenderer/pointRenderer.vert"),fragmentShader:k(b)+n.resolveIncludes("pointRenderer/pointRenderer.frag")}},attributes:{aPosition:0,aColor:1}}})},
"esri/views/3d/layers/SceneLayerView3D":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../../geometry ../../../Graphic ../../../core/arrayUtils ../../../core/asyncUtils ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/sql/WhereClause ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/webMercatorUtils ../../../layers/support/fieldUtils ../../../tasks/support/Query ./I3SMeshView3D ./LayerView3D ./i3s/I3SGeometryUtil ./i3s/I3SQueryEngine ./i3s/I3SQueryFeatureAdapter ./i3s/I3SQueryFeatureStore ./i3s/I3SUtil ./support/DefinitionExpressionSceneLayerView ./support/fieldProperties ./support/layerViewUpdatingProperties ./support/PopupSceneLayerView ../support/projectionUtils ../../layers/support/FeatureFilter".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z){var Q=q.getLogger("esri.views.3d.layers.SceneLayerView3D"),J=S.defineFieldProperties(),R=[0,0,0,0];return function(d){function n(){var a=null!==d&&d.apply(this,arguments)||this;a._queryEngine=null;a.lodFactor=1;a.progressiveLoadFactor=1;a._elevationContext="scene";a._isIntegratedMesh=!1;a._asyncModuleLoading=0;a._projectionEngineLoaded=!1;return a}l(n,d);Object.defineProperty(n.prototype,"filter",{set:function(a){if(v.isNone(a))this._set("filter",
null);else{var b=["contains","intersects","disjoint"];a.timeExtent?(Q.warn("Filters with a timeExtent are not supported for mesh scene layers"),this._set("filter",null)):a.spatialRelationship&&-1===b.indexOf(a.spatialRelationship)?(Q.warn("Filters with spatialRelationship other than "+b.join(", ")+" are not supported for mesh scene layers"),this._set("filter",null)):this._set("filter",a)}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"parsedFilterWhereClause",{get:function(){var a=
v.isSome(this.filter)?this.filter.where:null;if(!a)return null;try{return w.WhereClause.create(a,this.layer.fieldsIndex)}catch(G){Q.error("Failed to parse filter where clause: "+G)}return null},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"parsedFilterGeometry",{get:function(){var a=this;if(v.isNone(this.filter))return null;var b=this.filter,d=b.geometry,e=b.distance;if(!e)return d;if(!this._geometryEngine)return null;b=b.units||t.getUnitString(d.spatialReference);if(d.spatialReference.isWGS84)return this._geometryEngine.geodesicBuffer(d,
e,b);if(z.canProject(d,c.SpatialReference.WGS84))return z.project(this._geometryEngine.geodesicBuffer(z.project(d,c.SpatialReference.WGS84),e,b),d.spatialReference);if(!m.isSupported())return Q.error("Filter by geodesic buffer (distance) unsupported due to lack of projection support."),null;if(!this._projectionEngineLoaded&&(this._loadAsyncModule(m.load()).then(function(){a._set("_projectionEngineLoaded",!0)}),!this._projectionEngineLoaded))return null;var f=null;try{f=m.project(d,c.SpatialReference.WGS84)}catch(na){}if(f)try{f=
m.project(this._geometryEngine.geodesicBuffer(f,e,b),d.spatialReference)}catch(na){f=null}f||Q.error("Filter by geodesic buffer (distance) unsupported, failed to project input geometry ("+d.spatialReference.wkid+") to WGS84.");return f},enumerable:!0,configurable:!0});n.prototype.initialize=function(){var a=this;this.handles.add([y.init(this,["layer.renderer","definitionExpressionFields","filter"],function(){return a._updateRequiredFields()}),y.init(this.layer,"rangeInfos",function(b){return a._rangeInfosChanged(b)}),
y.init(this.layer,"renderer",function(b){return a._rendererChange(b)}),this.watch(["parsedDefinitionExpression","layer.objectIdFilter","filter","parsedFilterWhereClause","parsedFilterGeometry"],function(){return a._filterChange()})])};n.prototype.destroy=function(){};n.prototype._updateRequiredFields=function(){return h(this,void 0,void 0,function(){var a,c,d,f,h,k,l,m;return b(this,function(b){switch(b.label){case 0:return a=this,d=c=a.layer,f=d.fields,h=d.renderer,k=a.definitionExpressionFields,
l=a.filter,m=new e.default,h?[4,h.collectRequiredFields(m,f)]:[3,2];case 1:b.sent(),b.label=2;case 2:return v.isSome(l)?[4,B.collectFilterFields(m,c,l)]:[3,4];case 3:b.sent(),b.label=4;case 4:return B.collectFields(m,f,k),this._set("requiredFields",g.from(m).sort()),[2]}})})};n.prototype._rangeInfosChanged=function(a){null!=a&&0<a.length&&Q.warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")};n.prototype.createQuery=function(){var a=
{outFields:["*"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return v.isSome(this.filter)?this.filter.createQuery(a):new C(a)};n.prototype.queryExtent=function(a){return p.safeCast(this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(a)))};n.prototype.queryFeatureCount=function(a){return p.safeCast(this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(a)))};n.prototype.queryFeatures=function(a){return p.safeCast(this._ensureQueryEngine().executeQuery(this._ensureQuery(a)))};
n.prototype.queryObjectIds=function(a){return p.safeCast(this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(a)))};n.prototype._ensureQueryEngine=function(){this._queryEngine||(this._queryEngine=this._createQueryEngine());return this._queryEngine};n.prototype._createQueryEngine=function(){var a=this,b=this._createGetFeatureExtent();return new L.default({layerView:this,priority:4,spatialIndex:new O.default({featureAdapter:new K.I3SQueryFeatureAdapter({objectIdField:this.layer.objectIdField,
attributeStorageInfo:this.layer.attributeStorageInfo,getFeatureExtent:b}),forAllFeatures:function(b,c){return a._forAllFeatures(function(a,c,d){return b({id:a,index:c,meta:d})},c,2)},getFeatureExtent:b,sourceSpatialReference:I.getIndexCrs(this.layer),viewSpatialReference:this.view.spatialReference})})};n.prototype._createGetFeatureExtent=function(){var a=this,b=new Float64Array(24),c=this.view.renderSpatialReference,d=this.view.spatialReference;return function(e){if(!e.meta.featureExtents){var f=
new Float64Array(6*e.meta.featureIds.length);e.meta.featureExtents=f;for(var g=0;g<f.length;g+=6)f[g]=Number.POSITIVE_INFINITY}f=new Float64Array(e.meta.featureExtents.buffer,6*e.index*Float64Array.BYTES_PER_ELEMENT,6);return f[0]===Number.POSITIVE_INFINITY?(a._boundingBoxCornerPoints(e.index,e.meta.engineObject,b),T.bufferToBuffer(b,c,0,b,d,0,8)?u.expandWithBuffer(u.NEGATIVE_INFINITY,b,0,8,f):u.set(f,u.ZERO)):f}};n.prototype.highlight=function(a,b){void 0===b&&(b={});var c=this._highlights;if(a instanceof
C){var d=c.acquireSet(b),e=d.set,d=d.handle;this.queryObjectIds(a).then(function(a){return c.setFeatureIds(e,a)});return d}return this.inherited(arguments)};n.prototype._createLayerGraphic=function(a){a=new f(null,null,a);a.layer=this.layer;a.sourceLayer=this.layer;return a};n.prototype.canResume=function(){return this.inherited(arguments)&&(!this._controller||this._controller.rootNodeVisible)};n.prototype.isUpdating=function(){return!(!this._controller||!this._controller.updating)||0<this._asyncModuleLoading};
n.prototype.getFilters=function(){var a=this,b=this.inherited(arguments);if(this.layer.objectIdFilter){var c=new Float64Array(this.layer.objectIdFilter.ids),d="include"===this.layer.objectIdFilter.method;c.sort();b.push(function(b){return a._objectIdFilter(c,d,b)})}this.addSqlFilter(b,this.parsedDefinitionExpression,this.definitionExpressionFields,this.logError);if(v.isSome(this.filter)){if(v.isSome(this.parsedFilterGeometry)){var e=this.parsedFilterGeometry;b.push(function(b,c){return a._maskFilter(b,
c,e)})}if(this.filter.objectIds){var f=new Float64Array(this.filter.objectIds);f.sort();b.push(function(b){return a._objectIdFilter(f,!0,b)})}}v.isSome(this.parsedFilterWhereClause)&&this.addSqlFilter(b,this.parsedFilterWhereClause,this.parsedFilterWhereClause.fieldNames,this.logError);return b};n.prototype._maskFilter=function(a,b,c){if(!v.isNone(this.filter)){T.mbsToMbs(b.node.mbs,this._controller.crsIndex,R,c.spatialReference||this.view.spatialReference);var d=N.acquireMaskFilterContext(this.filter.spatialRelationship,
this.view,c,b.engineObject);c=N.intersectMaskWithMbs(d,R);switch(N.getIntersectRelation(d,c)){case 1:a.length=0;return;case 0:return}b.engineObject.getGeometryRecords()[0].geometry.componentCount===b.featureIds.length&&I.filterInPlace(a,b.featureIds,function(a){return N.filterMask(a,d)})}};n.prototype._filterChange=function(){var a=this;v.isSome(this.filter)&&this.filter.geometry&&!this._geometryEngine?this._loadAsyncModule(N.loadGeometryEngine()).then(function(b){a.destroyed||(a._set("_geometryEngine",
b),a._applyFilters(!0))}):this.inherited(arguments)};n.prototype._loadAsyncModule=function(a){var b=this;this._set("_asyncModuleLoading",this._asyncModuleLoading+1);var c=function(){return b._set("_asyncModuleLoading",b._asyncModuleLoading-1)};return a.then(function(a){c();return a},function(a){c();throw a;})};n.prototype._objectIdFilter=function(b,c,d){for(var e=0,f=0;e<d.length;)0<=a.binaryIndexOf(b,d[e])===c&&(d[f]=d[e],f++),e++;d.length=f};n.prototype._ensureQuery=function(a){return this._addDefinitionExpressionToQuery(v.isNone(a)?
this.createQuery():C.from(a))};k([x.property()],n.prototype,"layer",void 0);k([x.property({dependsOn:["_controller.updating","_asyncModuleLoading"]})],n.prototype,"updating",void 0);k([x.property({dependsOn:["_controller.rootNodeVisible"]})],n.prototype,"suspended",void 0);k([x.property(P.updatingPercentage)],n.prototype,"updatingPercentage",void 0);k([x.property({type:Z})],n.prototype,"filter",null);k([x.property({readOnly:!0,dependsOn:["filter.where"]})],n.prototype,"parsedFilterWhereClause",null);
k([x.property({readOnly:!0,dependsOn:["filter.geometry","filter.distance","filter.units","_geometryEngine","_projectionEngineLoaded"]})],n.prototype,"parsedFilterGeometry",null);k([x.property(J.requiredFields)],n.prototype,"requiredFields",void 0);k([x.property(J.availableFields)],n.prototype,"availableFields",void 0);k([x.property({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.3dObject.lodFactor"})],n.prototype,"lodFactor",void 0);k([x.property({readOnly:!0,aliasOf:"_controller.updatingPercentage"})],
n.prototype,"updatingPercentageValue",void 0);k([x.property({readOnly:!0})],n.prototype,"_asyncModuleLoading",void 0);k([x.property({readOnly:!0})],n.prototype,"_geometryEngine",void 0);k([x.property({readOnly:!0})],n.prototype,"_projectionEngineLoaded",void 0);return n=k([x.subclass("esri.views.3d.layers.SceneLayerView3D")],n)}(x.declared(E,F.I3SMeshView3D,V.PopupSceneLayerView,H.DefinitionExpressionSceneLayerView))})},"esri/views/3d/layers/I3SMeshView3D":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Color ../../../Graphic ../../../core/asyncUtils ../../../core/Collection ../../../core/Evented ../../../core/HandleOwner ../../../core/has ../../../core/iteratorUtils ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/requireUtils ../../../core/scheduling ../../../core/string ../../../core/typedArrayUtil ../../../core/unitUtils ../../../core/watchUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../layers/graphics/controllers/I3SOnDemandController ../../../renderers/visualVariables/support/visualVariableUtils ../../../support/arcadeUtils ../../../symbols/Symbol3D ../../../symbols/support/unitConversionUtils ./SceneLayerWorker ./graphics/graphicUtils ./i3s/Highlights ./i3s/I3SElevationProvider ./i3s/I3SProjectionUtil ./i3s/I3SUtil ./i3s/IDBCache ./support/attributeUtils ./support/edgeUtils ./support/layerViewUpdatingProperties ./support/symbolColorUtils ../support/mathUtils ../support/orientedBoundingBox ../support/projectionUtils ../support/buffer/glUtil ../webgl-engine/Stage ../webgl-engine/lib/Geometry ../webgl-engine/lib/Layer ../webgl-engine/lib/Object3D ../webgl-engine/lib/PreinterleavedGeometryData ../webgl-engine/lib/Texture ../webgl-engine/lib/Util ../webgl-engine/lib/TextureBackedBuffer/BufferManager ../webgl-engine/materials/component/index module".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q,J,R,U,X,ca,G,Y,la,ja,na,pa,ta,aa,ga,ia,sa,Aa,Ba,Ca,Ia,ra,wa,xa,va){function ua(a){return x.isSome(a)&&C.isArrayBuffer(a.data)}function Ka(a,b){for(var c=1024,d=0;d<a.length;d++)var e=a[d],c=c+(e.interleavedVertexData.byteLength+(e.indices?e.indices.byteLength:0)),c=c+(e.positionData.data.byteLength+e.positionData.indices.byteLength);if(x.isSome(b))for(a=0;a<b.length;a++)d=b[a],x.isSome(d)&&C.isArrayBuffer(d.data)&&
(c+=d.data.byteLength);return c}function ea(a,b){return 104857600<b.byteSize?(eb.warn("Node is too big to store in IndexedDB cache: "+a.id+" ("+b.byteSize+" bytes)"),!1):0<b.byteSize}Object.defineProperty(d,"__esModule",{value:!0});var Oa=ia.ModelContentType,eb=t.getLogger("esri.views.3d.layers.SceneLayerView3D"),Qa=[1,1,1,1],A=[.8,.8,.8],ma=function(){return function(){}}();a=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b._layerUid="";b._highlights=new R(b);b._elevationProvider=
null;b._worker=new Q;b._workerThread=null;b._nodeId2Meta=new Map;b._addTasks=new Map;b._rendererVersion=0;b._rendererFields=null;b._colorVariable=null;b._opacityVariable=null;b._symbolInfos=new Map;b._idbCache=new G.IDBCache("esri-scenelayer-cache","geometries");b._cancelCount=0;b._hasColors=!1;b._hasTextures=!1;b._hasData=!1;b.slicePlaneEnabled=!1;b._layerUrl="";b._cacheKeySuffix=null;b._tmpAttributeOnlyGraphic=new e(null,null,{});return b}l(d,a);Object.defineProperty(d.prototype,"hasTexturesOrVertexColors",
{get:function(){return this._hasData?this._hasTextures||this._hasColors?"yes":"probably-not":"unknown"},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rendererNeedsTextures",{get:function(){return ca.rendererNeedsTextures(this._currentRenderer)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"elevationOffset",{get:function(){var a=null!=this.layer?this.layer.elevationInfo:null;if(null!=a&&"absolute-height"===a.mode){var b=F.getMetersPerVerticalUnitForSR(this.layer.spatialReference),
c=Z.getMetersPerUnit(a.unit);return(a.offset||0)*c/b}return 0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"uncompressedTextureDownsamplingEnabled",{get:function(){return this.view.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled&&!this.useCompressedTextures},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"useCompressedTextures",{get:function(){var a=this.layer.version,a=!q("trident")||1<a.major||1===a.major&&3<a.minor;return this.view._stage.renderView.has("s3tc")&&
a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_enableMipMaps",{get:function(){return!this.uncompressedTextureDownsamplingEnabled},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_enableAtlasMipMaps",{get:function(){return this._enableMipMaps},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_atlasBiasCompensationEnabled",{get:function(){return this.view&&this.view._stage&&!this.view._stage.renderView.has("shaderTextureLOD")&&this._enableAtlasMipMaps},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_disableAtlasAnisotropy",{get:function(){return this._atlasBiasCompensationEnabled},enumerable:!0,configurable:!0});d.prototype.initialize=function(){var a=this;N.open(u.getAbsMid("./SceneLayerWorker",r,va)).then(function(b){a.destroyed?b.close():a._workerThread=b});ca.checkSceneLayerValid(this.layer);ca.checkSceneLayerCompatibleWithView(this.layer,this.view);this._layerUid=this.layer.uid;this._layerUrl=this.layer.parsedUrl.path;this._controller=
new S({layerView:this});this.geoMemoryEstimate=this.texMemoryEstimate=this.gpuMemoryEstimate=0;this._stage=this.view._stage;if(this._isIntegratedMesh||!this.layer.store.defaultGeometrySchema)this._hasSymbolColors=!1;else{var b=this.layer.store.defaultGeometrySchema.featureAttributes;this._hasSymbolColors=!!(b&&b.faceRange&&b.id)}this._hasVertexColors=null!=this.layer.store.defaultGeometrySchema.vertexAttributes.color&&(null==this.layer.cachedDrawingInfo||!this.layer.cachedDrawingInfo.color);this._isIntegratedMesh||
(this._edgeView=this._stage.renderView.ensureEdgeView());this._memCache=this.view.resourceController.memoryController.getMemCache(this.layer.uid,function(b){return a._deleteNodeStageData(b)});this._addThisLayerToStage();this._elevationProvider=new U({layerView:this,stageLayer:this._stageLayer});this.handles.add([E.init(this.view,"clippingArea",function(){return a._clippingAreaChanged()}),E.watch(this,"fullOpacity",function(b){return a._opacityChange(b)}),E.watch(this,"slicePlaneEnabled",function(b){return a._slicePlaneEnabledChange(b)}),
E.watch(this,"elevationOffset",function(b,c){return a._reloadAll(c)}),E.init(this,"filter",function(){return a._filterChange()}),E.watch(this,["rendererNeedsTextures","uncompressedTextureDownsamplingEnabled"],function(){a._reloadAll();a._memCache.clear()}),E.init(this,"suspended",function(b){return a._suspendedChange(b)})],"sceneLayerHandles");this._cacheKeySuffix=ca.getCacheKeySuffix(this.layer.spatialReference,this.view.renderSpatialReference);this._idbCache.init().catch(function(a){return eb.warn("Failed to initialize IndexedDB cache: "+
a)});this._componentColorManager=this._hasSymbolColors?new wa.BufferManager(this._stage.renderView.renderingContext):null};d.prototype.destroy=function(){this.handles.remove("sceneLayerHandles");this._workerThread&&(this._workerThread.close(),this._workerThread=null);this._removeAllNodeDataFromStage();this._memCache.destroy();this._memCache=null;this._removeThisLayerFromStage();this._stage=null;this._idbCache&&(this._idbCache.destroy(),this._idbCache=null);null!=this._controller&&(this._controller.destroy(),
this._controller=null);this._highlights.destroy();this._nodeId2Meta=null;this.emit("visible-geometry-changed");this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)};d.prototype.memEstimateTextureAdded=function(a){a=a.getEstimatedTexMemRequired();this.gpuMemoryEstimate+=a;this.texMemoryEstimate+=a;return a};d.prototype.memEstimateTextureRemoved=function(a){a=a.getEstimatedTexMemRequired();this.gpuMemoryEstimate-=
a;this.texMemoryEstimate-=a};d.prototype.memEstimateGeometryAdded=function(a){a=a.estimateGpuMemoryUsage();this.gpuMemoryEstimate+=a;this.geoMemoryEstimate+=a;return a};d.prototype.memEstimateGeometryRemoved=function(a){a=a.estimateGpuMemoryUsage();this.gpuMemoryEstimate-=a;this.geoMemoryEstimate-=a};d.prototype.isNodeLoaded=function(a){return this._nodeId2Meta.has(a)};d.prototype.getUsedMemory=function(){var a=0;this._nodeId2Meta.forEach(function(b){return a+=b.node.memory});return a};d.prototype.getUnloadedMemory=
function(){return this._controller?this._controller.unloadedMemoryEstimate:0};d.prototype.ignoresMemoryFactor=function(){return!1};d.prototype._suspendedChange=function(a){a?(this._removeAllNodeDataFromStage(),this.view.elevationProvider.unregister(this._elevationProvider)):this.view.elevationProvider.register(this._elevationContext,this._elevationProvider)};d.prototype.getStats=function(){var a={index:0,nodes:this._nodeId2Meta.size.toString(),"Total GPU Memory Estimate":(this.gpuMemoryEstimate/1048576).toFixed(1)+
"MB","Geometry Memory Estimate":(this.geoMemoryEstimate/1048576).toFixed(1)+"MB","Texture Memory Estimate":(this.texMemoryEstimate/1048576).toFixed(1)+"MB"};this._controller&&(this._cachingEnabled()&&(a.IDBCache=Math.round(100*this._idbCache.getHitRate())+"% hit"),this._controller.updateStats(a));return a};d.prototype._addThisLayerToStage=function(){for(var a=this._stage,b=new Uint8Array(256),c=0;c<b.length;c++)b[c]=255;b=""+this.layer.uid;this._stageLayer=b=new Aa(b,{},b);a.add(Oa.LAYER,b);this._stage.addToViewContent([b.id])};
d.prototype._removeThisLayerFromStage=function(){if(null!=this._stageLayer){var a=this._stage;this._removeAllNodeDataFromStage();ra.verify(0===this._nodeId2Meta.size);a.remove(Oa.LAYER,this._stageLayer.id);this._stageLayer=void 0;this.gpuMemoryEstimate=0}};d.prototype.getLoadedAttributes=function(a){if((a=this._nodeId2Meta.get(a))&&a.attributeInfo)return a.attributeInfo.loadedAttributes};d.prototype.getAttributeData=function(a){if((a=this._nodeId2Meta.get(a))&&a.attributeInfo)return a.attributeInfo.attributeData};
d.prototype.setAttributeData=function(a,b){if(a=this._nodeId2Meta.get(a))a.attributeInfo=b,a.cachedRendererVersion=this._getInvalidRendererVersion(),a.filteredIds=null,this._updateEngineObject(a)};d.prototype.getLoadedNodeIds=function(){var a=[];this._nodeId2Meta.forEach(function(b){return a.push(b.node.id)});return a.sort()};d.prototype.getLoadedNodeIndices=function(a){this._nodeId2Meta.forEach(function(b,c){return a.push(c)})};d.prototype._calcEngineMaterialTransparencyParams=function(a,b,c){if(this._isIntegratedMesh)return{forceTransparency:!1};
var d=this.fullOpacity,e=1-y.clamp(ra.fallbackIfUndefined(b.transparency,0),0,1);a=1>e||1>d||a&&B.endsWith(a.channels,"a")||!0===b.useVertexColorAlpha||c;return{baseColorOpacity:e,layerOpacity:d,forceTransparency:!!a}};d.prototype._calcEngineMaterialDoubleSidedParams=function(a){return null!=a.doubleSided?a.doubleSided:!0};d.prototype._calcEngineMaterialCullFaceParams=function(a){return a.cullFace?a.cullFace:null!=a.doubleSided?a.doubleSided?"none":"back":"none"};d.prototype._getMaterialParameters=
function(a,b,c){var d=b.params,e=ra.fallbackIfUndefined(d.diffuse,A);"standard"!==b.type&&eb.warn("Unknown material type '"+b.type+"', must be 'standard'");b=this._isIntegratedMesh;a=this._calcEngineMaterialTransparencyParams(a,d);return n({baseColor:e,baseColorTexture:c,doubleSidedShading:this._calcEngineMaterialDoubleSidedParams(d),cullFace:this._calcEngineMaterialCullFaceParams(d),writeStencil:b,receiveSSAO:!b,normals:b?"ground":"vertex"},a)};d.prototype._getGeometryParameters=function(a){return{textureCoordinates:a.hasTexture,
textureCoordinateRegions:a.hasTexture&&a.hasRegions,colors:this._hasVertexColors,componentData:this._hasSymbolColors,normals:this._isIntegratedMesh?"none":a.hasNormals?"compressed":"screen-space"}};d.prototype._createTexture=function(a,b,c,d,e){if(null==b||x.isNone(d))return null;var f;a:{for(var g=0;g<d.length;g++){var h=d[g];if(x.isSome(h)&&h.i3sTexId===c){f=h;break a}}f=null}d=f.data;if(null==d)return null;var g="none"!==b.wrap[0]||"none"!==b.wrap[1],h="rgba"===b.channels,k=!0,l;f.encoding===ca.DDS_ENCODING_STRING?
l=Ia.DDS_ENCODING:k=pa.isPowerOfTwo(d.width)&&pa.isPowerOfTwo(d.height);e=((b=e||!0===b.atlas)?this._enableAtlasMipMaps:this._enableMipMaps)&&k;c=new Ia(d,c,{mipmap:e,wrap:b||!g?{s:33071,t:33071}:{s:10497,t:10497},disableAnisotropy:b&&e&&this._disableAtlasAnisotropy,encoding:l,noUnpackFlip:!0,components:h?4:3});this._stage.add(Oa.TEXTURE,c);a.memory+=this.memEstimateTextureAdded(c);return c};d.prototype._getVertexBufferLayout=function(a,b,c){a=a.params.textureID||"none";return ga.glLayout(xa.ComponentMaterial.vertexBufferLayout(this._getGeometryParameters({hasTexture:"none"!==
a&&null!=b.textureDefinitions[a],hasNormals:null!=c.vertexAttributes.normal,hasRegions:null!=c.vertexAttributes.region})))};d.prototype._createEngineMaterial=function(a,b,c,d,e){var f=b.params.materialID,g=c.materialDefinitions[f];ra.assert(void 0!==g,"geometry wants unknown material "+f);b=b.params.textureID||"none";var h;"none"!==b&&(null!=c.textureDefinitions&&null!=c.textureDefinitions[b]||eb.warn("textureDefinitions missing in shared resource"),h=c.textureDefinitions[b]);c=g.params.vertexRegions;
a=null!=h?this._createTexture(a,h,b,d,c):null;d=this._getMaterialParameters(h,g,a&&a.id);e=this._getGeometryParameters({hasTexture:null!=h,hasRegions:e.some(function(a){return"region"===a.name}),hasNormals:e.some(function(a){return"normal"===a.name||"normalCompressed"===a.name})});f=xa.ComponentMaterial.create(d,e,f);f.metadata={i3sTex:h,i3sMatParams:g.params,engineTex:a};return f};d.prototype._getObjectIdField=function(){return this.layer.objectIdField||"OBJECTID"};d.prototype._findGraphicNodeAndIndex=
function(a){var b=Y.attributeLookup(a.attributes,this._getObjectIdField()),c=null;v.everyMap(this._nodeId2Meta,function(a,d){d=a.featureIds.indexOf(b);if(-1===d)return!0;c={node:a.node,index:d};return!1});return c};d.prototype._getGraphicIndices=function(a,b){a=this._nodeId2Meta.get(a.index);if(!a)return[];for(var c=[],d=this._getObjectIdField(),e=0;e<b.length;e++){var f=Y.attributeLookup(b[e].attributes,d),f=a.featureIds.indexOf(f);-1!==f&&c.push(f)}return c};d.prototype.whenGraphicBounds=function(a){a=
this._findGraphicNodeAndIndex(a);if(!a)return m.reject();var b=this._nodeId2Meta.get(a.node.index).engineObject;a=this._boundingBoxCornerPoints(a.index,b,new Float64Array(24));if(aa.bufferToBuffer(a,this.view.renderSpatialReference,0,a,this.view.spatialReference,0,8))return b=H.empty(),H.expandWithBuffer(b,a,0,8),m.resolve({boundingBox:b,screenSpaceObjects:[]})};d.prototype.whenGraphicAttributes=function(a,b){var c=this;return ca.whenGraphicAttributes(this.layer,a,this._getObjectIdField(),b,function(a){for(var b=
new Map,d=[],e=0;e<a.length;e++){var f=a[e],g=c._findGraphicNodeAndIndex(f),h=b.get(g.node);h||(h={node:g.node,indices:[],graphics:[]},d.push(h));h.indices.push(g.index);h.graphics.push(f)}return d},{ignoreUnavailableFields:!0,populateObjectId:!0})};d.prototype.getGraphicFromStageObject=function(a,b){if(this._isIntegratedMesh)return null;var c=this._getMetadata(a);a=a.getComponentFromTriangleNr(0,b);return null!=a&&null!=c.featureIds&&a<c.featureIds.length?this._createGraphic(a,c):null};d.prototype.hasStageObject=
function(a){var b=a.getMetadata();return(b=this._nodeId2Meta.get(b.nodeIndex))&&b.engineObject===a};d.prototype._getMetadata=function(a){a=a.getMetadata();return this._nodeId2Meta.get(a.nodeIndex)};d.prototype._getCacheKey=function(a){return this._layerUrl+"/v2/"+a.id+this._cacheKeySuffix};d.prototype._getMemCacheKey=function(a,b){void 0===b&&(b=this.elevationOffset);return a+"#"+b};d.prototype._cachingEnabled=function(){return!this._controller.disableIDBCache&&0===this.elevationOffset&&null!=this._cacheKeySuffix};
d.prototype.additionalCancelNodeLoadingHandler=function(){this._cancelCount=ca.addWraparound(this._cancelCount,1)};d.prototype._handleCancelled=function(a){if(0<ca.addWraparound(this._cancelCount,-a))throw m.createAbortError();};d.prototype.loadCachedGPUData=function(a){return this._memCache.pop(this._getMemCacheKey(a.index))};d.prototype.loadCachedNodeData=function(a,b){var c=this,d=this._cancelCount;return this._cachingEnabled()?this._idbCache.get(this._getCacheKey(a)).then(function(e){if(null==
e)return null;c._handleCancelled(d);if(e.nodeVersion!==a.version)return c._idbCache.remove(c._getCacheKey(a)),null;a.obb||(a.obb=ta.clone(e.nodeObb),c._controller.updateVisibility(a.index));var f=function(a,b){for(var d=0;d<a.length;d++){if(x.isNone(b))return!0;var e=ca.selectEncoding(a[d].encodings,c.useCompressedTextures),f=b[d];if(x.isNone(f)||null==f.data||e&&f.encoding!==e.encoding)return!0}return!1};return c.rendererNeedsTextures&&f(e.requiredTextures,e.textureData)?b(e.requiredTextures).then(function(b){e.textureData=
b;e.byteSize=Ka(e.transformedGeometries,e.textureData);b.every(ua)&&ea(a,e)&&c._idbCache.initialized&&c._idbCache.put(c._getCacheKey(a),e).catch(function(b){return eb.warn("Failed to update node with textures in IndexedDB cache: "+a.id+": "+b)});c._handleCancelled(d);return e}):e}):m.resolve(null)};d.prototype.addNodeData=function(a,b){var c=this;if(0===b.allGeometryData.length||0===b.allGeometryData[0].geometries.length)return m.resolve();1!==b.allGeometryData.length&&console.warn("Node with",b.allGeometryData.length,
"geometries is unsupported");return this._addData(a,b.attributeDataInfo,function(){return c._transformNode(a,b).then(function(b){return c._controller.reschedule(a.index,b)}).then(function(d){a.obb||(a.obb=d.obb,c._controller.updateVisibility(a.index));b.allGeometryData[0].componentOffsets=d.componentOffsets;d.featureIds&&(b.allGeometryData[0].featureIds=Array.prototype.slice.call(d.featureIds));d={geometryData:b.allGeometryData[0],transformedGeometries:d.transformedGeometries,requiredTextures:b.requiredTextures,
textureData:b.textureData,sharedResource:b.sharedResource,nodeVersion:a.version,nodeObb:a.obb,byteSize:c._cachingEnabled()?Ka(d.transformedGeometries,b.textureData):0};if(ea(a,d)&&c._idbCache.initialized){var e=x.isSome(d.textureData)?d.textureData.map(function(a){return ua(a)?a:null}):null;c._idbCache.put(c._getCacheKey(a),n({},d,{textureData:e})).catch(function(b){return eb.warn("Failed to store node in IndexedDB cache: "+a.id+": "+b)})}return c._addCachedNodeData(a,d)})})};d.prototype._transformNode=
function(a,b){for(var c=this,d=b.allGeometryData[0].geometries,e=Array(d.length),f=0;f<d.length;++f)e[f]=this._getVertexBufferLayout(d[f],b.sharedResource,b.geometryIndex);var g={geometryBuffer:b.geometryBuffer,geometryData:b.allGeometryData[0],geometryIndex:b.geometryIndex,layouts:e,mbs:a.mbs,obb:a.obb,elevationOffset:this.elevationOffset,needNormals:!this._isIntegratedMesh&&this._controller.isMeshPyramid,normalReferenceFrame:this.layer.normalReferenceFrame||"none",indexSR:this._controller.crsIndex.toJSON(),
vertexSR:this._controller.crsVertex.toJSON(),renderSR:this.view.renderSpatialReference.toJSON()};return this._workerThread?this._workerThread.invoke("process",g,{transferList:[b.geometryBuffer]}):Q.ensureDracoDecoder(g).then(function(){return c._controller.reschedule(a.index,g).then(function(a){return c._worker.transform(a)})})};d.prototype.addCachedGPUData=function(a,b,c){if(this._controller.isGeometryVisible(a)){this._nodeId2Meta.set(a.index,b);this.updateNodeStatus(a.index,c);b.engineObject.setHidden(b.engineObject.geometryRecords[0],
!1);a=0;for(c=b.engineObject.getGeometryRecords();a<c.length;a++)c[a].material.updateParameters({slicePlaneEnabled:this.slicePlaneEnabled});this._updateEngineObject(b);this._highlights.objectCreated(b.engineObject)}else c=this._controller.indexDepth-a.level+1,this._memCache.put(this._getMemCacheKey(a.index),b,a.memory,c)};d.prototype.addCachedNodeData=function(a,b,c){var d=this;return this._addData(a,c,function(){return d._addCachedNodeData(a,b)})};d.prototype._addCachedNodeData=function(a,b){var c=
this;if(this.suspended||!this._controller.isGeometryVisible(a))return m.resolve();var d=b.geometryData,e=b.transformedGeometries,f=b.sharedResource;b=this.rendererNeedsTextures?b.textureData:null;var g={};g[Oa.OBJECT]={};g[Oa.GEOMETRY]={};g[Oa.MATERIAL]={};var h=0,k=!1;a.memory=0;var l=d.componentOffsets,n=d.geometries,d=d.featureIds,p=null,q=null;if(this._hasSymbolColors)for(var p=this._componentColorManager.getBuffer(d.length),q=new Uint16Array(d.length),u=0;u<d.length;u++)q[u]=p.acquireIndex();
for(var u=a.id+"|"+d[0],r=[],t=[],v=[],w=[],z=this.view,x,y=0;y<n.length;y++){var B=n[y],A=e[h++],C=this._createEngineMaterial(a,B,f,b,A.layout);x=A.corMatrices.globalTrafo;k=k||A.hasColors;A=new Ca(new Float32Array(A.interleavedVertexData),A.layout,A.positionData,l||Ca.DefaultOffsets,A.indices||Ca.DefaultIndices);this._hasSymbolColors&&this._setComponentIndices(A,q);var B=null!=B.transformation?K.mat4f64.clone(B.transformation):Ya,F=r.length,A=new sa(A,u+(0<F?"_"+F:"")),F=z.renderSpatialReference;
r.push(A);v.push(B);w.push(C);B=X.createOrigin(a.mbs,this.elevationOffset,this._controller.crsIndex,F);t.push(B);a.memory+=this.memEstimateGeometryAdded(A.data);g[Oa.MATERIAL][C.id]=C;g[Oa.GEOMETRY][A.id]=A}var E=new Ba({idHint:a.id,name:u,geometries:r,materials:w,transformations:v,origins:t,castShadow:!0,metadata:{nodeIndex:a.index,layerUid:this._layerUid}});E.objectTransformation=x;g[Oa.OBJECT][E.id]=E;var G=this._addTasks.get(a.index),H=new ma;H.node=a;H.engineObject=E;H.featureIds=d;H.componentColorBuffer=
p;H.componentIndices=q;H.cachedRendererVersion=this._getInvalidRendererVersion();H.cachedSymbolInfos=[];H.attributeInfo=G.attributeInfo;!this._hasTextures&&a.resources.texture&&(this._hasTextures=!0);this._hasColors||(this._hasColors=k);this._hasData=!0;this.notifyChange("hasTexturesOrVertexColors");var N=this.slicePlaneEnabled;return this._addOrUpdateEdgeRendering(H).then(function(){var b=c._stageLayer,d=c._stage,e=g[Oa.OBJECT],f;for(f in e)e.hasOwnProperty(f)&&b.addObject(e[f]);for(var h in g)if(g.hasOwnProperty(h)){var b=
g[h],k;for(k in b)b.hasOwnProperty(k)&&null==d.get(h,k)&&d.add(h,b[k])}c._nodeId2Meta.set(a.index,H);if(c.suspended)c._removeNodeStageData(a.index);else{H.attributeInfo=G.attributeInfo;H.cachedRendererVersion===c._rendererVersion&&N===c.slicePlaneEnabled||c._addOrUpdateEdgeRendering(H);c._setObjectSymbology(H);c._applyFiltersToNode(H)&&c._updateEdgeRendering(H);c.visibleGeometryChanged(E);c._highlights.objectCreated(E);d=0;for(h=H.engineObject.getGeometryRecords();d<h.length;d++)h[d].material.updateParameters({slicePlaneEnabled:c.slicePlaneEnabled});
c._markParentsAsHole(a.index)}})};d.prototype._addData=function(a,b,c){var d=this,e=this._addTasks.get(a.index);e?e.attributeInfo=b:(e=n({},m.createResolver(),{attributeInfo:b}),this._addTasks.set(a.index,e),c().then(e.resolve,e.reject).then(function(){return d._addTasks.delete(a.index)}).catch(function(b){d._addTasks.delete(a.index);throw b;}));return e.promise};d.prototype._markParentsAsHole=function(a){if(this._isIntegratedMesh){var b=this._controller;for(a=b.getParentIndex(a);a;a=b.getParentIndex(a))this.updateNodeStatus(a,
"hole")}};d.prototype._clippingAreaChanged=function(){var a=H.create();aa.extentToBoundingBox(this.view.clippingArea,a,this.view.renderSpatialReference)?this._clippingArea=a:this._clippingArea=null;this._filterChange();this._controller&&this._controller.updateClippingArea(this.view.clippingArea)};d.prototype._filterChange=function(){this._applyFilters(!1)};d.prototype._applyFilters=function(a){var b=this;this._filters=this.getFilters();a?this._controller&&this._controller.requestUpdate():this._nodeId2Meta.forEach(function(a){b._applyFiltersToNode(a)&&
(b._addOrUpdateEdgeRendering(a),b.visibleGeometryChanged(a.engineObject))})};d.prototype.getFilters=function(){var a=this,b=[];this._clippingArea&&b.push(function(b,c){return a._boundingboxFilter(b,c,a._clippingArea)});return b};d.prototype.addSqlFilter=function(a,b,c,d){var e=this;b&&c&&a.push(function(a,f){return e._sqlFilter(a,f,b,c,d)})};d.prototype._sqlFilter=function(a,b,c,d,e){var f={},g=this._createLayerGraphic(f),h=this.layer.objectIdField,k=b.featureIds,l=b.attributeInfo.attributeData;d.every(function(a){return null!=
l[a]||a===h})&&ca.filterInPlace(a,k,function(a){f[h]=k[a];for(var b=0;b<d.length;b++){var m=d[b];m!==h&&(f[m]=ca.getCachedAttributeValue(l[m],a))}try{return c.testFeature(g)}catch(Za){return e(Za),!1}})};d.prototype._boundingboxNodeTest=function(a,b){aa.mbsToMbs(a.node.mbs,this._controller.crsIndex,Fa,this.view.renderSpatialReference);return ca.intersectBoundingBoxWithMbs(b,Fa)};d.prototype._boundingboxFeatureTest=function(a,b,c){return H.intersects(c,a.engineObject.geometryRecords[0].geometry.getComponentAABB(b,
Pa))};d.prototype._boundingboxFilter=function(a,b,c){var d=this,e=this._boundingboxNodeTest(b,c);if(3!==e)if(0===e)a.length=0;else if(b.engineObject.geometryRecords[0].geometry.componentCount===b.featureIds.length){var f=ca.getClipAABB(c,b.engineObject);ca.filterInPlace(a,b.featureIds,function(a){return d._boundingboxFeatureTest(b,a,f)})}};d.prototype._addOrUpdateEdgeRendering=function(a,b){void 0===b&&(b=!0);if(!this._edgeView)return m.resolve();var d=a.engineObject,e=this._edgeView.hasObject(d),
f=this._extractObjectEdgeMaterials(a);a=f.perFeatureEdgeMaterials;var g={slicePlaneEnabled:this.slicePlaneEnabled};if(f.hasEdges)if(f=!d.isHidden(d.geometryRecords[0]),e)this._edgeView.updateAllComponentMaterials(d,a,g,b),this._edgeView.updateObjectVisibility(d,f);else{if(f)return c.safeCast(this._edgeView.addObject(d,a,g,!1))}else e&&this._edgeView.removeObject(d);return m.resolve()};d.prototype._removeEdgeRendering=function(a){this._edgeView&&this._edgeView.hasObject(a.engineObject)&&this._edgeView.removeObject(a.engineObject)};
d.prototype._applyFiltersToNode=function(a){var b=a.engineObject,c=b.areAllComponentsVisible();b.unhideAllComponents();if(0===this._filters.length)return!c;var d=a.featureIds;if(null==a.filteredIds||a.appliedFilters!==this._filters)a.filteredIds=this._computeFilteredIds(a),a.appliedFilters=this._filters;a=a.filteredIds;if(a===d)return!c;for(var c=b.getGeometryRecords()[0],e=0,f=0;f<d.length;f++){var g=d[f];e>=a.length||a[e]!==g?b.setComponentVisibility(c,f,!1):e++}return!0};d.prototype._computeFilteredIds=
function(a){for(var b=a.featureIds.slice(),c=0,d=this._filters;c<d.length;c++)(0,d[c])(b,a);return b.length===a.featureIds.length?a.featureIds:b};d.prototype._removeAllNodeDataFromStage=function(a){var b=this;void 0===a&&(a=this.elevationOffset);this._nodeId2Meta.forEach(function(c,d){return b._removeNodeStageData(d,a)})};d.prototype.removeNodeData=function(a,b){for(;0<a.length&&!b.done;){var c=a.pop();this._removeNodeStageData(c);b.madeProgress()}};d.prototype._removeNodeStageData=function(a,b){void 0===
b&&(b=this.elevationOffset);var c=this._nodeId2Meta.get(a);if(c){var d=c.engineObject;d.setHidden(d.geometryRecords[0],!0);this.visibleGeometryChanged(d);this._removeEdgeRendering(c);this._nodeId2Meta.delete(a);this._highlights.objectDeleted(d);d=this._controller.indexDepth-c.node.level+1;this._memCache.put(this._getMemCacheKey(a,b),c,c.node.memory,d)}};d.prototype._deleteNodeStageData=function(a){var b=this._stage,c=this._stageLayer,d=a.engineObject;this._edgeView&&this._edgeView.removeObject(d);
c.removeObject(d);for(var c=0,e=d.getGeometryRecords();c<e.length;c++){var f=e[c];this.memEstimateGeometryRemoved(f.geometry.data);b.remove(Oa.GEOMETRY,f.geometry.id);this._removeMaterial(f.material,b)}if(a.componentIndices){for(c=0;c<a.componentIndices.length;c++)a.componentColorBuffer.releaseIndex(a.componentIndices[c]);this._componentColorManager.garbageCollect()}b.remove(Oa.OBJECT,d.id)};d.prototype._removeMaterial=function(a,b){b.remove(Oa.MATERIAL,a.id);if(a=a.metadata.engineTex)this.memEstimateTextureRemoved(a),
b.remove(Oa.TEXTURE,a.id)};d.prototype.updateNodeStatus=function(a,b){if(a=this._nodeId2Meta.get(a)){b="hole"===b;var c=0;for(a=a.engineObject.getGeometryRecords();c<a.length;c++)a[c].material.updateParameters({polygonOffsetEnabled:b})}};d.prototype._getInvalidRendererVersion=function(){return ca.addWraparound(this._rendererVersion,-1)};d.prototype._rendererChange=function(a){return h(this,void 0,void 0,function(){var c,d,e,f,g,h,k,l;return b(this,function(b){switch(b.label){case 0:this._currentRenderer=
a;this.notifyChange("rendererNeedsTextures");this._rendererVersion=ca.addWraparound(this._rendererVersion,1);this._opacityVariable=this._colorVariable=this._rendererFields=null;if(!a)return[3,2];c=this;d=ca.findFieldsCaseInsensitive;return[4,a.getRequiredFields(this.layer.fields)];case 1:c._rendererFields=d.apply(void 0,[b.sent(),this.layer.fields]),b.label=2;case 2:if(a&&"visualVariables"in a&&a.visualVariables)for(e=0,f=a.visualVariables;e<f.length;e++)g=f[e],"color"===g.type?this._colorVariable=
g:"opacity"===g.type?this._opacityVariable=g:eb.warn("Unsupported visual variable type for 3D Object Scene Services: "+g.type);if(a)for(h=0,k=a.getSymbols();h<k.length;h++)l=k[h],"mesh-3d"!==l.type&&eb.error("Symbols of type '"+l.type+"' are not supported for 3D Object Scene Services.");this._controller&&this._controller.requestUpdate();return[2]}})})};d.prototype._getSymbolInfos=function(a){this._hasSymbolColors&&a.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(a);
return a.cachedSymbolInfos};d.prototype._getSymbolColors=function(a){this._hasSymbolColors&&a.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(a);return a.cachedSymbolColors};d.prototype._updateCachedRendererData=function(a){a.cachedRendererVersion=this._rendererVersion;if(this._hasSymbolColors){var b=a.featureIds?a.featureIds.length:1,c={},d=this._tmpAttributeOnlyGraphic;d.attributes=c;var e=this._currentRenderer,f=a.attributeInfo.attributeData,g=null!=a.featureIds?this.layer.objectIdField:
null,h=null!=f?this._rendererFields:null;null==a.cachedSymbolColors&&(a.cachedSymbolColors=new Uint8Array(4*a.featureIds.length));for(var k=a.cachedSymbolColors,l=!0,m=0;m<b;m++){null!=g&&(c[g]=a.featureIds[m]);if(null!=h)for(var n=0,p=h;n<p.length;n++){var q=p[n];f[q]&&(c[q]=ca.getCachedAttributeValue(f[q],m))}p=e&&e.getSymbol(d,{arcadeUtils:V});n=null;p instanceof T&&(this._symbolInfos.has(p.id)||this._symbolInfos.set(p.id,ca.getSymbolInfo(p)),n=this._symbolInfos.get(p.id));a.cachedSymbolInfos[m]=
n;var u=q=null,r=!0,p=!0;e&&"visualVariables"in e&&(this._colorVariable&&(r=P.getColor(this._colorVariable,d,{color:ka}))&&(q=Da,q[0]=r.r/255,q[1]=r.g/255,q[2]=r.b/255,this._opacityVariable||null===r.a||(u=r.a)),this._opacityVariable&&(u=P.getOpacity(this._opacityVariable,d)));n&&n.material?(r=n.material,q=null==q||null==u?J.overrideColor(q,u,r.color,r.alpha,Qa,Da):J.overrideColor(q,u,null,null,Qa,Da),na.encodeSymbolColor(q,r.colorMixMode,k,4*m),r=n.castShadows):(na.encodeSymbolColor(null,null,k,
4*m),r=!0);if(0<m&&l){for(n=4*(m-1);n<4*m;n++)k[n]!==k[n+4]&&(l=!1);r!==p&&(l=!1)}p=r}a.uniformSymbolColor=l}};d.prototype._extractObjectEdgeMaterials=function(a){var b=[],c=a.engineObject,d=a.featureIds?a.featureIds.length:1,e={opacity:this.fullOpacity},f=this._edgeView.createSolidEdgeMaterial({color:[0,0,0,0],opacity:0}),g=!1,h=null,k=null;a=this._getSymbolInfos(a);for(var l=0;l<d;l++){var m=a[l];c.getComponentVisibility(c.getGeometryRecords()[0],l)&&m?(k!==m&&(k=m,(h=la.createMaterialFromEdges(this._edgeView,
m.edges,e))&&(g=!0)),b.push(x.isSome(h)?h:f)):b.push(f)}return{hasEdges:g,perFeatureEdgeMaterials:b}};d.prototype._setObjectSymbology=function(a){if(this._hasSymbolColors){var b=a.featureIds?a.featureIds.length:1,c=this._getSymbolColors(a);if(a.uniformSymbolColor){var d=na.decodeSymbolColor(c,0),e=d.color,d=d.colorMixMode,c=!0;a.cachedSymbolInfos[0]&&(c=a.cachedSymbolInfos[0].castShadows);for(var f=0,g=a.engineObject.getGeometryRecords();f<g.length;f++)b=g[f],b=b.material,b.updateParameters({componentData:{castShadows:c,
externalColor:e,externalColorMixMode:d}});this._updateObjectOpacity(a.engineObject,1>e[3])}else{e=a.componentColorBuffer.textureBuffer;d=!0;for(f=0;f<b;f++){var g=4*f,h=a.componentIndices[f],k=1;a.cachedSymbolInfos[f]&&(k=!0===a.cachedSymbolInfos[f].castShadows?1:0);e.setData(h,0,c[g],c[g+1],c[g+2]&254|k,c[g+3]);d=d&&na.isOpaqueSymbolColor(c,g)}c=0;for(f=a.engineObject.getGeometryRecords();c<f.length;c++)b=f[c],b=b.material,b.updateParameters({componentData:e});this._updateObjectOpacity(a.engineObject,
!d);this._stage.renderView.setNeedsRender()}}};d.prototype._setComponentIndices=function(a,b){for(var c=a.getAttribute(ra.VertexAttrConstants.COMPONENTINDEX),d=c.data,e=c.offsetIdx,c=c.strideIdx,f=a.getIndices(ra.VertexAttrConstants.COMPONENTINDEX),g=0;g<b.length;g++)for(var h=a.componentOffsets[g+1],k=a.componentOffsets[g];k<h;k++)d[e+f[k]*c]=b[g]};d.prototype._reloadAll=function(a){void 0===a&&(a=this.elevationOffset);this._removeAllNodeDataFromStage(a);null!=this._controller&&this._controller.restartNodeLoading()};
d.prototype._opacityChange=function(a){var b=this;this._nodeId2Meta.forEach(function(a){b._updateObjectOpacity(a.engineObject);b._updateEdgeRendering(a)})};d.prototype._updateObjectOpacity=function(a,b){var c=0;for(a=a.getGeometryRecords();c<a.length;c++){var d=a[c].material,e=d.metadata;void 0!==b&&(e.symbolIsTransparent=b);e=this._calcEngineMaterialTransparencyParams(e.i3sTex,e.i3sMatParams,e.symbolIsTransparent);d.updateParameters(e)}};d.prototype._updateEngineObject=function(a){this._setObjectSymbology(a);
this._applyFiltersToNode(a);this._addOrUpdateEdgeRendering(a);this.visibleGeometryChanged(a.engineObject)};d.prototype._slicePlaneEnabledChange=function(a){var b=this,c={slicePlaneEnabled:a};this._stageLayer.isSliceable=a;this._nodeId2Meta.forEach(function(a){for(var d=0,e=a.engineObject.getGeometryRecords();d<e.length;d++)e[d].material.updateParameters(c);b._updateEdgeRendering(a,!1)})};d.prototype._updateEdgeRendering=function(a,b){void 0===b&&(b=!0);this._edgeView&&this._edgeView.hasObject(a.engineObject)&&
this._addOrUpdateEdgeRendering(a,b)};d.prototype._forAllFeatures=function(a,b,c){var d=this;void 0===c&&(c=0);v.everyMap(this._nodeId2Meta,function(e,f){if(x.isSome(b))switch(b(e)){case 0:return!1;case 2:return!0}return 0!==d._forAllFeaturesOfNode(e,a,c)})};d.prototype._forAllFeaturesOfNode=function(a,b,c){void 0===c&&(c=0);var d=a.featureIds,e=a.engineObject.geometryRecords[0],f=2===c&&this._clippingArea?ca.getClipAABB(this._clippingArea,a.engineObject):null,g=f?this._boundingboxNodeTest(a,this._clippingArea):
3;if(0===g)return 1;for(var h=0;h<d.length;h++)if(a.engineObject.getComponentVisibility(e,h)||1===c||2===c&&(3===g||this._boundingboxFeatureTest(a,h,f))){var k=b(d[h],h,a,e);switch(k){case 0:return k}}return 1};d.prototype._createGraphic=function(a,b){var c={};null!=b.featureIds&&(c[this._getObjectIdField()]=b.featureIds[a]);b=b.attributeInfo.attributeData;if(null!=b)for(var d=0,e=Object.keys(b);d<e.length;d++){var f=e[d];c[f]=ca.getCachedAttributeValue(b[f],a)}return this._createLayerGraphic(c)};
d.prototype._boundingBoxCornerPoints=function(a,b,c){a=b.geometries[0].getComponentAABB(a,ya);for(var d=0;8>d;++d)Xa[0]=d&1?a[0]:a[3],Xa[1]=d&2?a[1]:a[4],Xa[2]=d&4?a[2]:a[5],O.vec3.transformMat4(Xa,Xa,b.objectTransformation),c[3*d]=Xa[0],c[3*d+1]=Xa[1],c[3*d+2]=Xa[2];return c};d.prototype.highlight=function(a,b){var c=this;void 0===b&&(b={});var d=this._highlights;"number"===typeof a?a=[a]:a instanceof e?a=[a]:a instanceof f&&(a=a.toArray());if(Array.isArray(a)&&0<a.length){if(a[0]instanceof e){a=
a.map(function(a){return Y.attributeLookup(a.attributes,c._getObjectIdField())});var g=d.acquireSet(b);b=g.set;g=g.handle;d.setFeatureIds(b,a);return g}if("number"===typeof a[0])return g=d.acquireSet(b),b=g.set,g=g.handle,d.setFeatureIds(b,a),g}return oa};d.prototype.visibleGeometryChanged=function(a){var b=this;a?this._elevationProvider.objectChanged(a):this._elevationProvider.layerChanged();null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=z.schedule(function(){b.emit("visible-geometry-changed");
b._visibleGeometryChangedSchedulerHandle=null}))};d.prototype.test=function(){var a=this;return{controller:this._controller,get visibleObjectIds(){var b=[];a._forAllFeatures(function(a,c,d,e){d.engineObject.isHidden(e)||d.engineObject.areAllComponentsHidden()||!d.engineObject.getComponentVisibility(e,c)||b.push(a);return 1});b.sort(function(a,b){return a-b});return b},get numNodes(){return a._nodeId2Meta.size}}};k([L.property()],d.prototype,"view",void 0);k([L.property()],d.prototype,"layer",void 0);
k([L.property()],d.prototype,"_controller",void 0);k([L.property({dependsOn:["_controller.updating"]})],d.prototype,"updating",void 0);k([L.property({dependsOn:["_controller.rootNodeVisible"]})],d.prototype,"suspended",void 0);k([L.property(ja.updatingPercentage)],d.prototype,"updatingPercentage",void 0);k([L.property({readOnly:!0,aliasOf:"_controller.updatingPercentage"})],d.prototype,"updatingPercentageValue",void 0);k([L.property({readOnly:!0})],d.prototype,"hasTexturesOrVertexColors",null);k([L.property({readOnly:!0})],
d.prototype,"rendererNeedsTextures",null);k([L.property({readOnly:!0,dependsOn:["layer.elevationInfo"]})],d.prototype,"elevationOffset",null);k([L.property({type:Boolean})],d.prototype,"slicePlaneEnabled",void 0);k([L.property({dependsOn:["view.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled","useCompressedTextures"]})],d.prototype,"uncompressedTextureDownsamplingEnabled",null);k([L.property({dependsOn:["layer.version"]})],d.prototype,"useCompressedTextures",null);return d=k([L.subclass("esri.views.3d.layers.I3SMeshView3D")],
d)}(L.declared(p,a,w));d.I3SMeshView3D=a;var Ya=K.mat4f64.create(),Xa=I.vec3f64.create(),ya=H.create(),Pa=H.create(),Da=[0,0,0,0],ka=new g([0,0,0,0]),Fa=[0,0,0,0],oa={remove:function(){},pause:function(){},resume:function(){}}})},"esri/layers/graphics/controllers/I3SOnDemandController":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/arrayUtils ../../../core/asyncUtils ../../../core/Evented ../../../core/Handles ../../../core/has ../../../core/Logger ../../../core/PooledArray ../../../core/Promise ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../dehydratedFeatures ../../support/PromiseQueue ../../../views/3d/layers/i3s/I3SFrameTask ../../../views/3d/layers/i3s/I3SIndex ../../../views/3d/layers/i3s/I3SLodHandling ../../../views/3d/layers/i3s/I3SNodeLoader ../../../views/3d/layers/i3s/I3SStreamDataController ../../../views/3d/layers/i3s/I3SUtil ../../../views/3d/layers/i3s/I3SViewportQueries ../../../views/3d/support/index ../../../views/3d/support/projectionUtils ../../../views/support/layerViewUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H){function S(a,b){return a.length===b.length&&a.every(function(a){return 0<=P(b,a.name)})}function P(a,b){b=b.toLowerCase();for(var c=0;c<a.length;c++)if(a[c].name.toLowerCase()===b)return c;return-1}function V(a){return null!=a&&null!=a.loadedAttributes&&null!=a.attributeData}var T=f.getLogger("esri.layers.graphics.controllers.I3SOnDemandController");r=function(d){function f(b){b=d.call(this,b)||this;b.screenSizeFactor=0;b.featureTarget=
5E4;b.fixedFeatureTarget=!1;b.updating=!0;b.updatingPercentage=0;b.leafsReached=!1;b.scaleVisibilityEnabled=!0;b.uncompressedTextureDownsamplingEnabled=!1;b._featureLOD=1;b._stableFeatureLOD=!1;b._isIdle=!1;b._cameraDirty=!0;b._invisibleDirty=!1;b._newLoadingNodes=new a({deallocator:null});b._loadedNodeScales=new Map;b._abortController=q.createAbortController();b._downloadingNodes=new Set;b._loadingNodes=new Set;b._updatingNodes=new Set;b._progressMaxNumNodes=1;b._poi=x.vec3f64.create();b._requiredAttributesDirty=
!0;b._updatesDisabled=!1;b.disableIDBCache=!1;b.disableMemCache=!1;b._restartNodeLoading=!1;b._fields=null;b._attributeStorageInfo=null;b._handles=new e;b._idleQueue=new z.PromiseQueue;b._errorCount=0;return b}n(f,d);Object.defineProperty(f.prototype,"isMeshPyramid",{get:function(){return"mesh-pyramids"===this.layer.profile||"MeshPyramid"===this.layer.store.lodType},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"isGraphics3D",{get:function(){return"points"===this.layer.profile},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"streamDataController",{get:function(){var a=this.layerView.view.resourceController.createStreamDataRequester(O.ClientType.SCENE);return new N.default(a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"crsVertex",{get:function(){return L.getVertexCrs(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"crsIndex",{get:function(){return L.getIndexCrs(this.layer)},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"rootNodeVisible",{get:function(){var a=this._index&&this._index.rootNode;return a?(this._updateViewData(),this._index.isNodeVisible(a.index)):!0},enumerable:!0,configurable:!0});f.prototype.initialize=function(){var a=this;this._lodHandling=new F(this.layerView,function(){return a._evaluateUpdating()});var b=this.layerView.layer;this.layer=b;this._defaultGeometrySchema=b.store.defaultGeometrySchema;this.disableIDBCache=c("disable-feature:idb-cache");"fields"in b&&
(this._fields=b.fields,this._attributeStorageInfo=b.attributeStorageInfo);var d=q.all([this.layer.when(),this.layerView.when()]).then(function(){if(!a.destroyed&&a.layerView&&!a.layerView.destroyed){var c=a.layerView.view;a._setClippingArea(c.clippingArea);a._centerOnSurface=c.pointsOfInterest.centerOnSurfaceFrequent;var d=a.layerView.view.resourceController;a._handles.add([a._centerOnSurface.watch("renderLocation",function(){return a._pointOfInterestChanged()}),d.memoryController.events.on("quality-changed",
function(){return a._setCameraDirty()}),v.init(a.layerView,"suspended",function(b){var c=b?function(){return a._updateViewData()}:function(){return a._updateIdleState(!0)},e=b?function(){}:function(){return a._updateIdleState(!1)};a._idleStateCallbacks?(b&&a.cancelNodeLoading(),a.restartNodeLoading(),a._idleStateCallbacks.idleBegin=c,a._idleStateCallbacks.idleEnd=e):a._idleStateCallbacks=d.scheduler.registerIdleStateCallbacks(c,e)}),B.addTask(a.layerView.view.resourceController.scheduler,{update:function(b,
c){return a._frame(b,c)},needsUpdate:function(){return a.updating}}),a.watch("uncompressedTextureDownsamplingEnabled",function(){return a.restartNodeLoading()}),a.watch(["featureTarget","fixedFeatureTarget"],function(){a._setCameraDirty();a._stableFeatureLOD=!1}),c.state.watch("camera",function(){return a._setCameraDirty()}),a.layer.watch("elevationInfo",function(){return a._elevationInfoChanged()}),a.layer.watch(["minScale","maxScale"],function(){return a._scaleBoundsChanged()}),a.layerView.watch("lodFactor",
function(){return a._setCameraDirty()}),a.layerView.watch("availableFields?",function(){return a._requiredFieldsChange()})]);a._updateScaleHandles();a._viewportQueries=new K(a.crsIndex,c.renderCoordsHelper,c.state.camera,a._clippingArea,c.elevationProvider,a.layer,{progressiveLoadFactor:a._getProgressiveLoadFactor(a.layer),screenspaceErrorBias:a.lod,angleDependentLoD:.5>a.lod});c=b.store.rootNode.split("/").pop();a._index=new C.I3SIndex(a.getBaseUrl(),c,a.layer.nodePages,a.streamDataController,a._viewportQueries,
T,function(b){return a.layerView.isNodeLoaded(b)},function(b){return a._shouldLoadNode(b)},function(b){return a._enableFromGPUCache(b,"leaf")},function(b){return a._needsUpdate(b)})}});this._tmpPoint=u.makeDehydratedPoint(0,0,0,this.crsIndex);this.addResolvingPromise(d);this.when(function(){return a._startNodeLoading()})};f.prototype.destroy=function(){this._abortController.abort();this._abortController=null;this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=
null);this._handles.destroy();this._nodeLoader=null;Z.prune()};f.prototype._getRequiredAttributes=function(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];var a=this._attributeStorageInfo,b=this._fields,c=this.layer.objectIdField;return this.layerView.availableFields.map(function(c){var d=P(a,c);c=P(b,c);return 0<=d&&0<=c?{index:d,name:b[c].name,field:b[c],attributeStorageInfo:a[d]}:null}).filter(function(a){return null!=a&&a.name!==c})};f.prototype._requiredFieldsChange=
function(){S(this._requiredAttributes,this._getRequiredAttributes())||this.requestUpdate()};f.prototype.requestUpdate=function(){this._requiredAttributesDirty=!0;this.restartNodeLoading()};f.prototype._setClippingArea=function(a){var b=w.create();I.extentToBoundingBox(a,b,this.layerView.view.renderSpatialReference)?this._clippingArea=b:this._clippingArea=null};f.prototype._pointOfInterestChanged=function(){this._poi&&(this._calculatePointOfInterest(this._poi),this._viewportQueries&&(this._viewportQueries.setPointOfInterest(this._poi),
this._index&&(this._index.progressiveLoadPenalty=Q.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate())))};f.prototype._calculatePointOfInterest=function(a){var b=this._centerOnSurface.renderLocation,c=x.vec3f64.create();y.vec3.subtract(c,b,this.camPos);var d=this.layerView.view.renderCoordsHelper,e=x.vec3f64.create();d.worldUpAtPosition(b,e);c=y.vec3.angle(e,c)-.5*Math.PI;y.vec3.lerp(a,this.camPos,b,Math.max(0,Math.min(1,c/(.5*Math.PI))));return a};f.prototype.updateClippingArea=
function(a){this._setClippingArea(a);this._viewportQueries&&this._index&&(this._viewportQueries.updateExtent(this._clippingArea),this._index.invalidateVisibilityCache());this._setCameraDirty()};f.prototype._setCameraDirty=function(){this._cameraDirty=!0;this.notifyChange("rootNodeVisible");this._evaluateUpdating()};f.prototype.getBaseUrl=function(){return this.layer.parsedUrl.path};f.prototype.updateElevationChanged=function(b,c){if(null!=this._index){null==this._elevationUpdateNodes&&(this._elevationUpdateNodes=
new a({deallocator:null}));var d=this._elevationUpdateNodes;d.clear();var e=this._index.rootNode;null!=e&&L.findIntersectingNodes(b,c,e,this.crsIndex,this._index,function(a){return d.push(a.index)});for(b=0;b<d.length;b++)c=d.data[b],this._index.invalidateBoundingVolumeCache(c),c===e.index&&this.notifyChange("rootNodeVisible");d.length&&this.restartNodeLoading()}};f.prototype.getParentIndex=function(a){return this._index.getParentIndex(a)};f.prototype._elevationInfoChanged=function(){this._index.updateElevationInfo(this.layer.elevationInfo);
this._setCameraDirty()};f.prototype._updateScaleHandles=function(){var a=this;this._handles.remove("scale-bounds");this.areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on("scale-change",function(b){return a._scaleUpdateHandler(b)}),"scale-bounds")};f.prototype._scaleBoundsChanged=function(){this.areScaleBoundsActive||this._loadedNodeScales.clear();this._updateScaleHandles();this._setCameraDirty();this._lodHandling.setLodGlobalDirty()};f.prototype._scaleUpdateHandler=function(a){this._updateScaleInBoundingRect(a.scale,
a.extent,a.spatialReference);this._setCameraDirty();this._lodHandling.setLodGlobalDirty()};f.prototype._updateScaleInBoundingRect=function(a,b,c){var d=this;null!=this._index.rootNode&&I.boundingRectToBoundingRect(b,c,J,this.crsIndex)&&this._loadedNodeScales.forEach(function(b,c){b=d._index.getNode(c);m.containsPoint(J,b.mbs)&&d._loadedNodeScales.set(c,a)})};f.prototype.restartNodeLoading=function(){this._restartNodeLoading=!0;this._evaluateUpdating()};f.prototype.schedule=function(a,b){var c=this;
return this._idleQueue.push(b).then(function(b){if(!c._loadingNodes.has(a)&&!c._updatingNodes.has(a))throw q.createAbortError();return b})};f.prototype.reschedule=function(a,b){var c=this;return this._idleQueue.unshift(b).then(function(b){if(!c._loadingNodes.has(a)&&!c._updatingNodes.has(a))throw q.createAbortError();return b})};Object.defineProperty(f.prototype,"isIntegratedMesh",{get:function(){return"integrated-mesh"===this.layer.type},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"areScaleBoundsActive",{get:function(){var a=H.extractSafeScaleBounds(this.layer),b=a.minScale,a=a.maxScale;return this.scaleVisibilityEnabled&&(0<b||0<a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"unloadedMemoryEstimate",{get:function(){return!this._index||this.layerView.suspended?0:this._index.getUnloadedMemoryEstimate()*this.lodDropFactor},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"indexDepth",{get:function(){return this._index?this._index.maxLevel:
0},enumerable:!0,configurable:!0});f.prototype._frame=function(a,b){if(this.layerView.suspended)return this._updateView(a),-Infinity;if(!this.layerView.visible)return-Infinity;this._processLogError(a,b);return this._index.getPriority()};f.prototype._processLogError=function(a,b){try{this._process(a,b)}catch(G){50>this._errorCount?T.error("Error during processing: "+G):50===this._errorCount&&T.error("Too many errors for this layer. Further errors will not be displayed."),this._errorCount++}};f.prototype._process=
function(a,b){var c=this;this._restartNodeLoading&&(this.cancelNodeLoading(),this._startNodeLoading());if(null!=this._nodeLoader&&null!=this._index){this._updateView(a);this.isIntegratedMesh&&(a.enabled=!1);a.run(function(){return c._processIndex(b,a)});this._updateFeatureLOD();a.run(function(){return c._processCache(a,b)});this.isIntegratedMesh&&(a.enabled=!0);for(a.run(function(){return c._processNodes(a,b)});!a.done&&this._idleQueue.process();)a.madeProgress();a.run(function(){return c._prefetchIndex(b)});
b.numIndexLoading+=this._index.getIndexLoading();b.numNodesLoading+=this._downloadingNodes.size;this._evaluateUpdating();this._lodHandling.lodGlobalHandling(a)}};f.prototype._processIndex=function(a,c){this._index.dirty&&(this._newLoadingNodes.clear(),this._index.update(b.keysOfSet(this._loadingNodes),c),!this.disableMemCache&&this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData&&(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,
this._index.updates.missing.length)),c=this._index.getFeatureEstimate().leafsReached,this._index.isLoading()||c===this._get("leafsReached")||this._set("leafsReached",c));a=Math.min(10-a.numIndexLoading-this._index.getIndexLoading(),this._getAvailableLoadTokens(1,a));return this._index.load(a)};f.prototype._prefetchIndex=function(a){if(0<this._loadingNodes.size||0<this._index.updates.add.length)return!1;a=Math.min(10-a.numIndexLoading-this._index.getIndexLoading(),this._getAvailableLoadTokens(1,a));
return this._index.prefetch(a)};f.prototype._updateFeatureLOD=function(){if(this.isGraphics3D){var a=!this._index.isLoading(),b=this.featureTarget*this.baseLOD,c=this._index.getFeatureEstimate();c.estimate=c.estimate||b/2;if(500<this._index.getIndexMissing()){if(1E-4>=this._featureLOD)return;this._featureLOD/=1.5;this._stableFeatureLOD=!1}else if(a&&c.estimate<b){if(c.leafsReached||1E4<=this._featureLOD||this._stableFeatureLOD)return;this._featureLOD*=Math.min(10,Math.max(b/c.estimate,1.001));a=this.lod;
b=this._index.checkFeatureTarget(b,a);b!==a&&(this._featureLOD=b/this.baseLOD,this._stableFeatureLOD=!0)}else if(c.estimate>1.2*b||a&&c.estimate>b){if(1E-4>=this._featureLOD)return;this._featureLOD/=1+.25*(c.estimate/b-1);this._stableFeatureLOD=!1}else return;this._featureLOD=Math.min(1E4,Math.max(1E-4,this._featureLOD));this._viewportQueries.updateScreenSpaceErrorBias(this.lod);this._index.requestUpdate()}};f.prototype._processCache=function(a,b){for(;0<this._newLoadingNodes.length&&!a.done;)for(b=
this._newLoadingNodes.pop(),b=this._index.getParent(b);b&&!this.layerView.isNodeLoaded(b.index)&&this._isNodeInScaleBounds(b);b=this._index.getParent(b.index))if(this._enableFromGPUCache(b,"hole")){a.madeProgress();break}return a.hasProgressed};f.prototype._processNodes=function(a,b){var c=(this._isIdle?100:2)-this._loadingNodes.size,d=this._index.updates;d.cancel.forEach(this._cancelNode,this);for(d.cancel=[];0<d.update.length&&!a.done;){var e=this._index.getNode(d.update.pop());this._updateLoadedNode(e);
a.madeProgress()}for(;0<d.add.length&&!a.done&&0<c;){--c;e=this._index.getNode(d.add.back());if(2!==e.cacheState&&!this._hasNodeLoadToken(b))break;d.add.pop();this._loadNode(e);a.madeProgress()}return a.hasProgressed};f.prototype._cancelAllNodes=function(){this._loadingNodes.clear();this._downloadingNodes.clear();this._updatingNodes.clear();this._abortController.abort();this._abortController=new AbortController};f.prototype._cancelNode=function(a){this._loadingNodes.delete(a);this._downloadingNodes.delete(a)};
f.prototype._getAvailableLoadTokens=function(a,b){var c=b.numIndexLoading+this._index.getIndexLoading();return Math.floor((12-1*c-2*(b.numNodesLoading+this._loadingNodes.size))/a)};f.prototype._hasNodeLoadToken=function(a){var b=this._isIdle&&!this._index.isLoading()?5:2;return a.numNodesLoading+this._loadingNodes.size>=b?!1:0<this._getAvailableLoadTokens(2,a)};f.prototype._evaluateUpdating=function(){var a=!1,b=0;this.layerView.suspended?b=(a=this._invisibleDirty||this._cameraDirty)?100:0:(b=(this._index?
this._index.getIndexMissing():0)+3*(this._index?this._index.updates.add.length:0)+2*this._loadingNodes.size,a=!!(0<b||0<this._updatingNodes.size||this._restartNodeLoading||this._cameraDirty||0<this._idleQueue.length||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling),0===b&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(b,this._progressMaxNumNodes),b=100*b/this._progressMaxNumNodes);a!==this._get("updating")&&this._set("updating",a);b!==this._get("updatingPercentage")&&
this._set("updatingPercentage",b)};f.prototype._updateView=function(a){this._updateViewData();this._invisibleDirty&&this._removeInvisibleNodes(a)&&(this._invisibleDirty=!1);this._evaluateUpdating()};f.prototype._updateViewData=function(){if(this._cameraDirty&&this._index){var a=this.layerView.view,b=a.state.camera;this.camPos=x.vec3f64.clone(a.pointsOfInterest.renderPointOfView);this.screenSizeFactor=1/(b.perScreenPixelRatio/2);this._poi=this._calculatePointOfInterest(this._poi);this._viewportQueries.updateCamera(b);
this._viewportQueries.setPointOfInterest(this._poi);this._viewportQueries.updateScreenSpaceErrorBias(this.lod);this._index.invalidateVisibilityCache();this._index.progressiveLoadPenalty=Q.distancePenalty*this._viewportQueries.distCameraToPOI();this._index.requestUpdate();this._stableFeatureLOD=!1;this._invisibleDirty=!0;this._cameraDirty=!1;this.notifyChange("rootNodeVisible")}};f.prototype._getProgressiveLoadFactor=function(a){return 1>this.layerView.view.resourceController.memoryController.memoryFactor?
1:this.layerView.progressiveLoadFactor};Object.defineProperty(f.prototype,"lod",{get:function(){return this._featureLOD*this.baseLOD},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"baseLOD",{get:function(){var a=this.layerView.lodFactor,b=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(0<a?a:1)*b},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"lodDropFactor",{get:function(){if(this.fixedFeatureTarget)return 1;
var a=this.layerView.view.resourceController.memoryController;return(Math.min(a.memoryFactor,.5)-a.minQuality)/(.5-a.minQuality)},enumerable:!0,configurable:!0});f.prototype.isGeometryVisible=function(a){return this._index.isGeometryVisible(a.index)};f.prototype.updateVisibility=function(a){return this._index.invalidateVisibilityCache(a)};f.prototype._shouldLoadNode=function(a){return this._lodHandling.shouldLoadNode(a)&&!this._shouldDropNode(a)&&this._isNodeInScaleBounds(a)?a.obb?this._index.isGeometryVisible(a.index):
!0:!1};f.prototype._shouldDropNode=function(a){var b=this.lodDropFactor;return 1<=b||!this._lodHandling.childrenEmpty(a)?!1:Math.abs(this._viewportQueries.calcCameraDistanceToCenter(a))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*b};f.prototype._startNodeLoading=function(){var a=this;this._restartNodeLoading=!1;if(!this._updatesDisabled&&null!=this.streamDataController){this._updateViewData();this._requiredAttributesDirty&&(this._requiredAttributes=
this._getRequiredAttributes(),this._requiredAttributesDirty=!1);var b=E.TextureFormat.Normal;this.layerView.useCompressedTextures?b=E.TextureFormat.Compressed:this.uncompressedTextureDownsamplingEnabled&&(b=E.TextureFormat.Downsampled);this._nodeLoader=new E(this.layer,this.streamDataController,T,this._defaultGeometrySchema,this._requiredAttributes,{textureFormat:b,loadTextureData:this.layerView.rendererNeedsTextures,loadFeatureData:!this.isMeshPyramid});b=this.layerView.view.renderSpatialReference;
b=this.crsIndex.equals(b)||this.crsIndex.isWGS84&&b.equals(I.SphericalECEFSpatialReference);this._index.ignoreServiceOBB=!b;this._index.requestUpdate();this._lodHandling.startNodeLoading(function(b){return a._index.isNodeVisible(b)},function(b){return a._index.isGeometryVisible(b)},function(b){return a._isNodeInScaleBounds(b)},function(b){return a._index.nodeTraversalState(b)},function(b,c){return a._removeNodes(b,c)},this._index,{maxLodLevel:this._viewportQueries.maxLodLevel});this._evaluateUpdating()}};
f.prototype.isNodeLoading=function(){return null!=this._nodeLoader&&null!=this._index};f.prototype.cancelNodeLoading=function(){this.isNodeLoading()&&(this.streamDataController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this.layerView.additionalCancelNodeLoadingHandler&&this.layerView.additionalCancelNodeLoadingHandler(),this._evaluateUpdating())};f.prototype._removeInvisibleNodes=function(a){var b=this;Z.clear();this.layerView.getLoadedNodeIndices(Z);var c=
0===this._viewportQueries.maxDistance,d=c?function(){return!1}:function(a){return b._shouldDropNode(a)};Z.filterInPlace(function(a){var c=b._index.getNode(a);return!b._index.isGeometryVisible(a)||d(c)||!b._isNodeInScaleBounds(c)});0<Z.length&&this._lodHandling.setLodGlobalDirty();this._removeNodes(Z,a);if(c&&1>this.lodDropFactor)return!1;if(0===Z.length)return!0;Z.clear();return!1};f.prototype._removeNodes=function(a,b){0<a.length&&this._index.requestUpdate();var c=a.length;this.layerView.removeNodeData(a,
b);if(0<this._loadedNodeScales.size)for(b=a.length;b<c;b++)this._loadedNodeScales.delete(a.data[b])};f.prototype._needsUpdate=function(a){if(!a.resources.hasFeatureData||this._updatingNodes.has(a.index))return!1;a=this.layerView.getLoadedAttributes(a.index);return null!=a&&a!==this._requiredAttributes};f.prototype._updateLoadedNode=function(a){var b=this,c=this.layerView.getLoadedAttributes(a.index),c=S(c,this._requiredAttributes)?q.resolve(this.layerView.getAttributeData(a.index)):this._nodeLoader.loadAttributes(a,
this._requiredAttributes,this._abortController.signal);this._updatingNodes.add(a.index);c.then(function(c){return b.schedule(a.index).then(function(){return b.layerView.setAttributeData(a.index,{loadedAttributes:b._requiredAttributes,attributeData:c})})}).catch(function(c){q.isAbortError(c)||b.layerView.setAttributeData(a.index,{loadedAttributes:b._requiredAttributes,attributeData:{}})}).catch(function(){}).then(function(){b._updatingNodes.delete(a.index);b._evaluateUpdating()});this._evaluateUpdating()};
f.prototype._loadNode=function(a){var b=this;this._loadingNodes.add(a.index);this._evaluateUpdating();this._loadAndAddNode(a).catch(function(a){return a}).then(function(){b._loadingNodes.delete(a.index);b._evaluateUpdating()})};f.prototype._loadAndAddNode=function(a){var b=this;return 1===a.cacheState?this._loadUncached(a):this._loadCached(a).then(function(c){c||(a.cacheState=1,b._index.updates.add.push(a.index))}).catch(function(b){q.isAbortError(b)||(a.cacheState=1)})};f.prototype._enableFromGPUCache=
function(a,b){if(this.disableMemCache||!this.layerView.loadCachedGPUData||!this.layerView.addCachedGPUData)return!1;var c=this._loadCachedGPUData(a);if(!c)return!1;this.layerView.addCachedGPUData(a,c,b);this._nodeAdded(a);return!0};f.prototype._loadCachedGPUData=function(a){return(a=this.layerView.loadCachedGPUData(a))&&V(a.attributeInfo)&&S(a.attributeInfo.loadedAttributes,this._requiredAttributes)?a:null};f.prototype._nodeAdded=function(a){this._index.requestUpdate();this._lodHandling.lodSwapNodeLoaded(a)};
f.prototype._loadCached=function(a){var b=this;if(this._enableFromGPUCache(a,"leaf"))return q.resolve(!0);var c=this.layerView;return!this.disableIDBCache&&c.loadCachedNodeData&&c.addCachedNodeData?this.schedule(a.index).then(function(){return c.loadCachedNodeData(a,function(c){return b._nodeLoader.loadTextures(a,c,b._abortController.signal)})}).then(function(d){if(null==d)return!1;var e=b._requiredAttributes;return V(d)&&S(d.loadedAttributes,e)?b.reschedule(a.index).then(function(){return c.addCachedNodeData(a,
d,d)}).then(function(){b._nodeAdded(a);return!0}):b.reschedule(a.index).then(function(){return b._nodeLoader.loadAttributes(a,e,b._abortController.signal)}).then(function(c){return b.reschedule(a.index,{loadedAttributes:e,attributeData:c})}).then(function(b){return c.addCachedNodeData(a,d,b)}).then(function(){b._nodeAdded(a);return!0})}):q.resolve(!1)};f.prototype._loadUncached=function(a){var b=this;this._downloadingNodes.add(a.index);return h.safeCast(this._nodeLoader.loadNodeData(a,this._abortController.signal)).then(function(c){b._downloadingNodes.delete(a.index);
return b.schedule(a.index,c)}).then(function(c){return b.layerView.addNodeData(a,c)}).then(function(){b._nodeAdded(a);a.cacheState=2}).catch(function(c){q.isAbortError(c)||(T.error("Failed to load node '"+a.id+"': "+c),a.failed=!0,b._index.requestUpdate())})};f.prototype._updateIdleState=function(a){a!==this._isIdle&&(this._isIdle=a,this._evaluateUpdating(),a&&this._index&&this._index.resetFailedNodes())};f.prototype._getScale=function(a){if(this._loadedNodeScales.has(a.index))return this._loadedNodeScales.get(a.index);
var b=a.mbs;this._tmpPoint.x=b[0];this._tmpPoint.y=b[1];this._tmpPoint.z=b[2];b=this.layerView.view.basemapTerrain.getScale(this._tmpPoint);this.layerView.isNodeLoaded(a.index)&&this._loadedNodeScales.set(a.index,b);return b};f.prototype._isNodeInScaleBounds=function(a){if(!this.areScaleBoundsActive)return!0;a=this._getScale(a);var b=H.extractSafeScaleBounds(this.layer);return H.scaleBoundsPredicate(a,b.minScale,b.maxScale)};f.prototype.updateStats=function(a){a.index=this._index?this._index.size:
0;this.isGraphics3D&&(a.detail=this._featureLOD,a.target=this.featureTarget*this.baseLOD);this._index&&this._index.updateStats(a)};Object.defineProperty(f.prototype,"test",{get:function(){var a=this;return{set disableIDBCache(b){a.disableIDBCache=b},set ignoreServiceOBB(b){a._index.ignoreServiceOBB=b}}},enumerable:!0,configurable:!0});l([t.property({readOnly:!0})],f.prototype,"isMeshPyramid",null);l([t.property({readOnly:!0})],f.prototype,"isGraphics3D",null);l([t.property({readOnly:!0})],f.prototype,
"streamDataController",null);l([t.property({readOnly:!0})],f.prototype,"crsVertex",null);l([t.property({readOnly:!0})],f.prototype,"crsIndex",null);l([t.property()],f.prototype,"camPos",void 0);l([t.property()],f.prototype,"screenSizeFactor",void 0);l([t.property()],f.prototype,"featureTarget",void 0);l([t.property()],f.prototype,"fixedFeatureTarget",void 0);l([t.property()],f.prototype,"layerView",void 0);l([t.property()],f.prototype,"layer",void 0);l([t.property({readOnly:!0})],f.prototype,"updating",
void 0);l([t.property({readOnly:!0})],f.prototype,"updatingPercentage",void 0);l([t.property({readOnly:!0})],f.prototype,"leafsReached",void 0);l([t.property({constructOnly:!0})],f.prototype,"scaleVisibilityEnabled",void 0);l([t.property({readOnly:!0})],f.prototype,"rootNodeVisible",null);l([t.property({aliasOf:"layerView.uncompressedTextureDownsamplingEnabled?"})],f.prototype,"uncompressedTextureDownsamplingEnabled",void 0);return f=l([t.subclass("esri.layers.graphics.controllers.I3SOnDemandController")],
f)}(t.declared(k,p,g));var Z=new a({deallocator:null}),Q={factorIM:.2,factor3dObject:.05,distancePenalty:10},J=m.create();return r})},"esri/views/3d/layers/i3s/I3SFrameTask":function(){define(["require","exports","../../../../core/arrayUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});var l=function(){function b(b){var d=this;this.referenceCount=0;this.callbacks=[];this.runIndex=0;this.handle=b.registerTask(2,function(b){return d.update(b)},function(){return d.needsUpdate()})}
b.prototype.destroy=function(){this.handle&&(this.handle.remove(),this.handle=null)};b.prototype.needsUpdate=function(){for(var b=0,d=this.callbacks;b<d.length;b++)if(d[b].needsUpdate())return!0;return!1};b.prototype.update=function(b){this.sort();for(var d=this.callbacks,e={numIndexLoading:0,numNodesLoading:0},c=0;c<d.length&&!b.done;++c)d[c].priority=d[c].update(b,e),this.runIndex=c};b.prototype.sort=function(){for(var b=this.callbacks,d=b.length,e=this.runIndex;0<e;e--){for(var c=b[e-1],f=e;f<
b.length&&c.priority<=b[f].priority&&(f!==d||c.priority<b[f].priority);)b[f-1]=b[f],f++;b[f-1]=c;d=f-1}this.runIndex=0};b.prototype.add=function(b){this.sort();b.priority=Infinity;this.callbacks.unshift(b)};b.prototype.remove=function(b){n.removeUnordered(this.callbacks,b);this.runIndex=this.callbacks.length;this.sort()};return b}(),k=new Map;d.addTask=function(b,d){var g=k.get(b);null==g&&(g=new l(b),k.set(b,g));g.add(d);return{remove:function(){null!=g&&(g.remove(d),0<g.callbacks.length||(k.delete(b),
g.destroy()),g=null)}}}})},"esri/views/3d/layers/i3s/I3SIndex":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/maybe ../../../../core/PooledArray ../../../../core/promiseUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec4f64 ./I3SUtil ../../support/orientedBoundingBox".split(" "),function(r,d,n,l,k,b,h,g,e,c){function f(a){a.node?(a.node.renderMbs[3]=-1,a.node.renderObb.halfSize[0]=-1):a.ref&&(a.ref.renderMbs[3]=-1,a.ref.renderObb.halfSize[0]=
-1)}function a(a,b){return 0===b?0:a/b|0}function p(a,b){return 0===b?a:a%b}function q(a){if(a)for(var b=0;b<a.length;b++)for(var c=0,d=x;c<d.length;c++){var e=d[c];if(e[0]===a[b].metricType)return{lodMetric:e[1],maxError:a[b].maxError}}return{lodMetric:0,maxError:0}}function v(a){return Math.sqrt(4/Math.PI*a)}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(a,b,c,d,f,g,h,l,m,n){var p=this;this.layerUrl=a;this.streamDataController=d;this.viewportQueries=f;this.logger=g;this._isLoaded=
h;this._isSelected=l;this._enable=m;this._needsUpdate=n;this._dirty=!0;this.nodePages=[];this.lodMetric=this.rootIndex=this.nodesPerPage=this.nodeCount=0;this.lodConversion=function(a){return a};this._loading=new Set;this._failedNodes=new Set;this._failedPages=new Set;this._indexMissing=1;this._maxUnloadedPrio=Number.NEGATIVE_INFINITY;this._maxProcessingPrio=Number.POSITIVE_INFINITY;this._nodeTraversalState={};this._version=0;this._visibilityCacheGeneration=e.addWraparound(0,2);this._maxLevel=1;this._featureEstimate=
{estimate:0,leafsReached:!1};this._unloadedMemoryEstimate=0;this._missing=new k({deallocator:null});this._prefetch=new k({deallocator:null});this._updates=new y;this.ignoreServiceOBB=!1;this.progressiveLoadPenalty=0;this._maxLodLevel=this.viewportQueries?this.viewportQueries.maxLodLevel:1;this.initNodePages(c).catch(function(){return p.initNodeDocuments(b)})}d.prototype.initNodePages=function(c){if(!c)return b.reject();this.nodesPerPage=c.nodesPerPage;this.rootIndex=c.rootIndex;switch(c.lodSelectionMetricType){case "maxScreenThreshold":this.lodMetric=
1;break;case "maxScreenThresholdSQ":this.lodMetric=1,this.lodConversion=v}c=a(this.rootIndex,this.nodesPerPage);return this.loadPage(c)};d.prototype.initNodeDocuments=function(a){this.rootIndex=this.nodesPerPage=0;this.nodePages.push({nodes:[],children:[],parents:[]});this.makeRefNode({id:a,mbs:null},-1)};d.prototype.loadPage=function(a){var c=this;this._loading.add(a);return this.streamDataController.request(this.layerUrl+"/nodepages/"+a,"json").then(function(b){c._loading.delete(a);c.addPage(a,
b)}).catch(function(d){c._loading.delete(a);c._failedPages.add(a);return b.reject(d)})};d.prototype.addPage=function(a,b){for(var d=this,f=this.nodePages.length;f<a;f++)this.nodePages[f]=null;var k=[],l=[];b=b.nodes.map(function(b,f){var m=k.length,n=b.children?b.children.length:0;l.push(-1);for(var p=0;p<n;p++)k.push(b.children[p]);var p=""+b.index,q=c.clone(b.obb),u=g.vec4f64.fromArray([q.center[0],q.center[1],q.center[2],h.vec3.length(q.halfSize)]),r=b.mesh&&b.mesh.attribute,t=b.mesh&&b.mesh.geometry,
v=b.mesh&&b.mesh.material;b={id:p,index:a*d.nodesPerPage+f,childCount:n,failed:!1,cacheState:0,obb:q,mbs:u,level:0,resources:{hasSharedResource:!1,hasFeatureData:!!t,attributes:r&&null!=r.resource?""+r.resource:null,geometry:t&&null!=t.resource?""+t.resource:null,texture:v&&null!=v.resource&&0<v.texelCountHint?""+v.resource:null,geometryDefinition:t?t.definition:-1,materialDefinition:v?v.definition:-1},lodMetric:d.lodMetric,maxError:d.lodConversion(b.lodThreshold),renderMbs:g.vec4f64.fromArray([0,
0,0,-1]),renderObb:c.create([0,0,0],[-1,-1,-1],[0,0,0,1]),numFeatures:t?t.featureCount:null,vertexCount:t?t.vertexCount:null};return{childOffset:m,childCount:n,visibilityCache:e.addWraparound(d._visibilityCacheGeneration,-2),ref:null,node:b}});this.nodePages[a]={nodes:b,children:k,parents:l};this.nodeCount+=b.length;this.updateParentsAndLevel()};d.prototype.updateParentsAndLevel=function(){var a=this,b=[],c=function(c,d,e){var f=a.getPage(c);if(l.isSome(f)){var g=p(c,a.nodesPerPage);f.parents[g]=
d;if(d=f.nodes[g].node)d.level=e,b.push(c)}};for(c(this.rootIndex,-1,0);b.length;)for(var d=b.pop(),e=this.getNode(d),f=0;f<e.childCount;f++){var g=this.getChildIndex(e,f);c(g,d,e.level+1)}};d.prototype.getPage=function(b){return this.nodePages[a(b,this.nodesPerPage)]};d.prototype.getNodeInternal=function(a){var b=this.getPage(a);return l.isNone(b)?null:b.nodes[p(a,this.nodesPerPage)]};d.prototype.addNode=function(a,b){null!=a.children&&this.populateChildren(b,a.children);var d=this.getParent(b),
d=d?d.level+1:1;this._maxLevel=Math.max(this._maxLevel,d);var e=q(a.lodSelection),f=e.lodMetric,e=e.maxError,h=l.expect(this.getNodeInternal(b));h.node={id:a.id,index:b,mbs:g.vec4f64.fromArray(a.mbs),obb:a.obb&&c.clone(a.obb),childCount:h.childCount,level:d,resources:a.resources,version:a.version,lodMetric:f,maxError:e,memory:null,numFeatures:a.numFeatures,failed:!1,cacheState:0};null==h.ref.mbs&&(h.ref.mbs=a.mbs);h.node.renderMbs=h.ref.renderMbs;h.node.renderObb=h.ref.renderObb;return h.node};d.prototype.makeRefNode=
function(a,b){var d=this.nodePages[0],f=d.nodes.length;d.nodes.push({childOffset:0,childCount:0,node:null,ref:a,visibilityCache:e.addWraparound(this._visibilityCacheGeneration,-2)});this.nodeCount++;d.parents.push(b);a.renderMbs=g.vec4f64.fromArray([0,0,0,-1]);a.renderObb=c.create([0,0,0],[-1,-1,-1],[0,0,0,1]);return f};d.prototype.populateChildren=function(a,b){var c=l.expect(this.getNodeInternal(a)),d=l.expect(this.getPage(a));c.childOffset=d.children.length;c.childCount=b.length;for(c=0;c<b.length;c++){var e=
this.makeRefNode(b[c],a);d.children.push(e)}};d.prototype.getNode=function(a){a=this.getNodeInternal(a);return l.isSome(a)&&a.node};d.prototype.getIndexById=function(a){var b;this.forAllNodes(function(c,d){(c.node?c.node.id:c.ref.id)===a&&(b=d)});return b};d.prototype.getNodeById=function(a){a=this.getIndexById(a);a=null!=a?this.getNodeInternal(a):null;return l.isSome(a)?a.node:null};d.prototype.getChildIndex=function(a,b){var c=this.getPage(a.index);if(l.isNone(c))return-1;a=c.nodes[p(a.index,this.nodesPerPage)];
return c.children[a.childOffset+b]};d.prototype.getParentIndex=function(a){var b=this.getPage(a);return l.isSome(b)?b.parents[p(a,this.nodesPerPage)]:-1};d.prototype.getParent=function(a){a=this.getParentIndex(a);return 0<=a?this.getNode(a):null};Object.defineProperty(d.prototype,"rootNode",{get:function(){var a=this.getNodeInternal(this.rootIndex);return l.isSome(a)?a.node:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this.nodeCount},enumerable:!0,
configurable:!0});d.prototype.invalidateVisibilityCache=function(a){null!=a?(a=this.getNodeInternal(a),l.isSome(a)&&(a.visibilityCache=e.addWraparound(this._visibilityCacheGeneration,-2))):this._visibilityCacheGeneration=e.addWraparound(this._visibilityCacheGeneration,2)};d.prototype.isNodeVisible=function(a){a=this.getNodeInternal(a);if(l.isNone(a)||a.ref&&!a.ref.mbs)return!0;if((a.visibilityCache&-2)!==this._visibilityCacheGeneration){var b=this.viewportQueries.isNodeVisible(a.ref||a.node);a.visibilityCache=
this._visibilityCacheGeneration+(b?1:0);return b}return 1===(a.visibilityCache&1)};d.prototype.isGeometryVisible=function(a){if(!this.isNodeVisible(a))return!1;a=this.getNodeInternal(a);return l.isNone(a)?!0:a.node&&a.ref&&!a.ref.obb?this.viewportQueries.isGeometryVisible(a.node):!0};Object.defineProperty(d.prototype,"maxLevel",{get:function(){return this._maxLevel},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0});
d.prototype.destroy=function(){this._updates.add.prune();this._updates.update.prune()};d.prototype.requestUpdate=function(){this._dirty=!0;this._indexMissing=1;++this._version};d.prototype.update=function(b,c){var d=this;if(this._dirty){this._maxProcessingPrio=this._maxUnloadedPrio=Number.NEGATIVE_INFINITY;this._missing.clear();this._prefetch.clear();this._updates.reset(b,this._missing);t.clear();var e=!0,f=new w,g=new w;this.traverseVisible(function(h,k){if(k){var m=k.node;d._updateNodeFeatureEstimate(m,
g);if(m){var n=l.expect(d.getPage(h));if(0===d._missing.length&&0===d.nodesPerPage)for(var p=0;p<k.childCount;p++){var q=n.children[k.childOffset+p],r=d.getNodeInternal(q);!l.isSome(r)||r.node||d._loading.has(q)||(t.set(q,d.entryPriority(q)),d._prefetch.push(q))}!m.failed&&m.resources.hasFeatureData&&(d._isLoaded(h)?(f.known+=m.memory,++f.knownNodes,d._isSelected(m)?0<k.childCount&&(e=!1):(f.unremoved+=m.memory,e=!1),d._needsUpdate(m)&&(k=d.entryPriority(h),t.set(h,k),d._maxProcessingPrio=Math.max(d._maxProcessingPrio,
k),d._updates.update.push(h))):(m.memory&&(f.known+=m.memory,++f.knownNodes),d._isSelected(m)&&(0<k.childCount&&(e=!1),m.memory?(f.missing+=m.memory,f.known+=m.memory,++f.knownNodes):++f.missingNodes,0<=b.indexOf(m.index)?(d._maxProcessingPrio=Math.max(d._maxProcessingPrio,d.entryPriority(h)),d._updates.cancel=d._updates.cancel.filter(function(a){return a!==m.index})):!c.done&&d._enable(m)?c.madeProgress():(k=d.entryPriority(h),t.set(h,k),d._maxProcessingPrio=Math.max(d._maxProcessingPrio,k),d._updates.add.push(h)))))}else k=
d.entryPriority(h),d._loading.has(h)||d._failedNodes.has(h)||(d._missing.push(h),t.set(h,k)),d._maxProcessingPrio=Math.max(d._maxProcessingPrio,k)}else k=d.entryPriority(h),h=a(h,d.nodesPerPage),t.set(h,Math.max(k,t.get(h)||0)),d._loading.has(h)||d._failedPages.has(h)||d._missing.push(h),d._maxProcessingPrio=Math.max(d._maxProcessingPrio,k)});this._unloadedMemoryEstimate=f.missing-f.unremoved;3<f.knownNodes&&0<f.missingNodes&&(this._unloadedMemoryEstimate+=f.known/f.knownNodes*f.missingNodes);this._unloadedMemoryEstimate=
.8*Math.max(0,this._unloadedMemoryEstimate);this._featureEstimate.estimate=this._computeFeatureEstimate(g);this._featureEstimate.leafsReached=e;this._missing.sort(function(a,b){return a-b});this._missing.filterInPlace(function(a,b){return 1>b||d._missing.data[b-1]!==a});this._missing.sort(function(a,b){return t.get(a)-t.get(b)});0<this._missing.length?(this._maxUnloadedPrio=t.get(this._missing.back()),this._prefetch.clear()):this._prefetch.sort(function(a,b){return t.get(a)-t.get(b)});this._updates.add.filterInPlace(function(a){return t.get(a)>=
d._maxUnloadedPrio}).sort(function(a,b){return t.get(a)-t.get(b)});this._updates.update.sort(function(a,b){return t.get(a)-t.get(b)});this._indexMissing=this._loading.size+this._missing.length;this._dirty=0<this._indexMissing;t.clear()}};d.prototype.checkFeatureTarget=function(a,b){for(var c=this.viewportQueries.updateScreenSpaceErrorBias(b),d=b,e=b,f=c,g=10;g--;){var h=new w;this._updateFeatureEstimate(d,h);if(this._computeFeatureEstimate(h)<=a){if(d>=b||0<h.missingNodes||0===g)break;f=d;d=.5*(d+
e)}else e=d,d=.5*(d+f)}++this._version;this.viewportQueries.updateScreenSpaceErrorBias(c);return Math.min(b,d)};d.prototype._updateFeatureEstimate=function(a,b){var c=this;++this._version;this.viewportQueries.updateScreenSpaceErrorBias(a);this.traverseVisible(function(a,d){return c._updateNodeFeatureEstimate(d&&d.node,b)})};d.prototype._updateNodeFeatureEstimate=function(a,b){a&&!a.failed&&null!=a.numFeatures&&(this._isLoaded(a.index)?(b.known+=a.numFeatures,++b.knownNodes,this._isSelected(a)||(b.unremoved+=
a.numFeatures)):this._isSelected(a)&&(a.numFeatures?(b.missing+=a.numFeatures,b.known+=a.numFeatures,++b.knownNodes):++b.missingNodes))};d.prototype._computeFeatureEstimate=function(a){var b=a.known-a.unremoved;3<a.knownNodes&&0<a.missingNodes&&(b+=a.known/a.knownNodes*a.missingNodes);return Math.max(0,b)};d.prototype.load=function(a){if(0===this._missing.length)return!1;a=Math.min(a,this._missing.length);for(var b=0;b<a;++b)0===this.nodesPerPage?this._loadNode(this._missing.pop()):this.loadPage(this._missing.pop());
return!0};d.prototype.prefetch=function(a){if(0===this._prefetch.length)return!1;a=Math.min(a,this._prefetch.length);for(var b=0;b<a;++b)this._loadNode(this._prefetch.pop());return!0};d.prototype.isLoading=function(){return 0<this._indexMissing};d.prototype.getIndexLoading=function(){return this._loading.size};d.prototype.getIndexMissing=function(){return this._indexMissing};d.prototype.getUnloadedMemoryEstimate=function(){return this._unloadedMemoryEstimate};Object.defineProperty(d.prototype,"updates",
{get:function(){return this._updates},enumerable:!0,configurable:!0});d.prototype.getFeatureEstimate=function(){return this._featureEstimate};d.prototype.nodeTraversalState=function(a){if(!a)return null;var b=this._nodeTraversalState[a.index];if(b&&b.version===this._version)return b;var c=this.viewportQueries.getLodLevel(a),d=this.viewportQueries.hasLOD(a),e=!0;d&&(e=this.getParentIndex(a.index),e=0<=e?(e=this._nodeTraversalState[e])&&c>e.lodLevel:0<c);if(b)return b.lodLevel=c,b.isChosen=e,b.version=
this._version,b;this._nodeTraversalState[a.index]={nodeHasLOD:d,lodLevel:c,isChosen:e,version:this._version};return this._nodeTraversalState[a.index]};d.prototype._loadNode=function(a){var c=this;this._loading.add(a);var d=l.expect(this.getNodeInternal(a)).ref.id,e=this.layerUrl+"/nodes/"+d,f=function(){c._loading.delete(a);0===c._missing.length&&0===c._loading.size&&c.requestUpdate()};this.streamDataController.request(e,"json").then(function(b){b=c._validateNode(d,b);null!=b&&(b.obb&&c.invalidateVisibilityCache(a),
b=c.addNode(b,a),c.nodeTraversalState(b));f()},function(d){b.isAbortError(d)||(c.logger.error("Error loading node: "+e),c._failedNodes.add(a));f()})};d.prototype._validateNode=function(a,b){var c=this;if(null==b||"object"!==typeof b||b.id!==a)return this.logger.error('Invalid node. Wrong type or wrong id "'+a+'"'),null;b.sharedResource&&"./shared"!==b.sharedResource.href&&"./shared/"!==b.sharedResource.href&&this.logger.warn('Invalid shared resource href on node "'+a+'"');null==b.geometryData||Array.isArray(b.geometryData)&&
1===b.geometryData.length&&"./geometries/0"===b.geometryData[0].href||this.logger.warn('Invalid geometry data on node "'+a+'"');null==b.attributeData||Array.isArray(b.attributeData)&&!b.attributeData.some(function(a,b){return a.href!=="./attributes/f_"+b+"/0"})||this.logger.warn('Invalid attribute data on node "'+a+'"');b.featureData&&1<b.featureData.length&&this.logger.warn("Node "+a+" has "+b.featureData.length+" bundles. Only the first bundle will be loaded.");var d=b.hasOwnProperty("obb")&&!this.ignoreServiceOBB?
b.obb:null,e=b.featureData&&1===b.featureData.length&&b.featureData[0].featureRange?b.featureData[0].featureRange[1]-b.featureData[0].featureRange[0]+1:null,f=function(b){if(null==b)return null;var d=function(b){return c.logger.error("Invalid node reference on node "+a+": "+b)};if("number"===typeof b.id)d("id "+b.id+" is a number instead of a string.");else if("string"!==typeof b.id||!Array.isArray(b.mbs))return d("Missing or invalid id."),null;if(!Array.isArray(b.mbs))return d("Invalid bounding volume on reference "+
b.id+"."),null;b.href&&b.href!=="../"+b.id&&c.logger.error('Invalid node href on node "'+a+'"');d=b.hasOwnProperty("obb")&&!c.ignoreServiceOBB?b.obb:null;return{id:""+b.id,mbs:b.mbs,obb:d}},f=Array.isArray(b.children)?b.children.map(f).filter(function(a){return null!=a}):null;return{id:a,mbs:b.mbs,obb:d,children:f,resources:{hasFeatureData:b.featureData&&0<b.featureData.length,hasSharedResource:null!=b.sharedResource,attributes:b.attributeData?a:null,texture:b.textureData&&0<b.textureData.length?
a:null,geometry:null!=b.geometryData?a:null},version:"string"===typeof b.version?b.version:null,lodSelection:Array.isArray(b.lodSelection)?b.lodSelection:null,numFeatures:e}};d.prototype.resetFailedNodes=function(){this._failedNodes.clear();this._failedPages.clear();this.forAllNodes(function(a){a.node&&(a.node.failed=!1)})};d.prototype.entryPriority=function(a){var b=this.getNodeInternal(a),c=this.getParentIndex(a);if(l.isNone(b)||0>c&&null==b.node)return 0>c?Infinity:this.entryPriority(c);var d=
0;b.node&&0<=c&&(c=this._nodeTraversalState[c],null!=c&&(d=c.lodLevel));for(c=this.progressiveLoadPenalty;0<=a;a=this.getParentIndex(a))if(this._isLoaded(a)){c=0;break}b=this.viewportQueries.distToPOI(b.ref||b.node);return-b-d*(b+this.progressiveLoadPenalty)+c};d.prototype.traverseVisible=function(a){var b=this.getNodeInternal(this.rootIndex);l.isSome(b)?this._traverse(this.rootIndex,b,a):a(this.rootIndex,null)};d.prototype._traverse=function(a,b,c){if(b.node&&0===b.childCount)this.isGeometryVisible(a)&&
c(a,b);else if(this.isNodeVisible(a)&&(c(a,b),null!=b.node)){var d=this.nodeTraversalState(b.node);if(!d.nodeHasLOD||d.lodLevel!==this._maxLodLevel)for(a=l.expect(this.getPage(a)),d=0;d<b.childCount;d++){var e=a.children[b.childOffset+d],f=this.getNodeInternal(e);l.isSome(f)?this._traverse(e,f,c):c(e,null)}}};d.prototype.traverse=function(a,b){b(a)&&this.traverseChildren(a,b)};d.prototype.traverseChildren=function(a,b){a=a.index;var c=this.getNodeInternal(a);l.isSome(c)&&this._traverseChildren(a,
c,b)};d.prototype._traverseChildren=function(a,b,c){a=this.getPage(a);if(!l.isNone(a))for(var d=0;d<b.childCount;++d){var e=a.children[b.childOffset+d],f=this.getNodeInternal(e);l.isSome(f)&&f.node&&c(f.node)&&this._traverseChildren(e,f,c)}};d.prototype.updateStats=function(a){0<this._updates.add.length&&(a.nodes+=" + "+this._updates.add.length);if(this._indexMissing||0<this._prefetch.length)a.index+=" + "+this._indexMissing||this._prefetch.length;a.prio=this._maxProcessingPrio;if(this._featureEstimate.estimate){var b=
this._featureEstimate.estimate-a.features;0<b?a.features+=" + "+b:0>b&&(a.features+=" - "+-b)}};d.prototype.getPriority=function(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)};d.prototype.updateElevationInfo=function(a){this.forAllNodes(f);this.viewportQueries.updateElevationInfo(a)};d.prototype.invalidateBoundingVolumeCache=function(a){a=this.getNodeInternal(a);l.isSome(a)&&f(a)};d.prototype.forAllNodes=function(a){for(var b=0;b<this.nodePages.length;b++){var c=this.nodePages[b];
if(c)for(var d=b*this.nodesPerPage,e=0;e<c.nodes.length;e++)a(c.nodes[e],d+e)}};Object.defineProperty(d.prototype,"test",{get:function(){var a=this;return{addNode:function(b,c){return a.addNode(b,c)}}},enumerable:!0,configurable:!0});return d}();d.I3SIndex=r;var t=new Map,y=function(){function a(){this.update=new k({deallocator:null});this.add=new k({deallocator:null});this.cancel=[]}a.prototype.reset=function(a,b){this.add.clear();this.update.clear();this.cancel=a;this.missing=b};return a}(),x=[["maxScreenThreshold",
1],["screenSpaceRelative",2],["removedFeatureDiameter",3],["distanceRangeFromDefaultCamera",4]];d.selectErrorMetric=q;var w=function(){return function(){this.unremoved=this.missingNodes=this.missing=this.knownNodes=this.known=0}}()})},"esri/views/3d/layers/i3s/I3SLodHandling":function(){define(["require","exports","../../../../core/PooledArray"],function(r,d,n){r=function(){function d(b,d){this.layerView=b;this.lodGlobalDirtyChanged=d}d.prototype.startNodeLoading=function(b,d,g,e,c,f,a){this._lodGlobalDirty=
!1;this._maxLodLevel=a.maxLodLevel;this._index=f;this._nodeTraversalState=e;this._isNodeVisible=b;this._isGeometryVisible=d;this._isNodeInScaleBounds=g;this._removeNodes=c;this.lodGlobalDirtyChanged(this._lodGlobalDirty)};d.prototype.shouldLoadNode=function(b){var d=this._nodeTraversalState(b);return this.isChosenMaxLOD(d)?!0:d.isChosen?this._childrenRequireLoading(b):!1};d.prototype.setLodGlobalDirty=function(){this._lodGlobalDirty=!0;this.lodGlobalDirtyChanged(this._lodGlobalDirty)};d.prototype.lodSwapNodeLoaded=
function(b){this.setLodGlobalDirty()};Object.defineProperty(d.prototype,"requiresLODGlobalHandling",{get:function(){return null!=this._index&&!0===this._lodGlobalDirty},enumerable:!0,configurable:!0});d.prototype.lodGlobalHandling=function(b){if(this.requiresLODGlobalHandling){var d=Math.max(0,Math.floor(10*(this.layerView.view.resourceController.memoryController.usedMemory-1)));l.clear();this._lodGlobalHandlingRecursion(this._index.rootNode,d);this._removeNodes(l,b);0===l.length&&(this._lodGlobalDirty=
!1,this.lodGlobalDirtyChanged(this._lodGlobalDirty));l.clear()}};d.prototype._lodGlobalHandlingRecursion=function(b,d){if(null==b)return!1;var g=this._nodeTraversalState(b),e=this.isChosenMaxLOD(g);(g=this.layerView.isNodeLoaded(b.index))&&null!=this.layerView.updateNodeStatus&&this.layerView.updateNodeStatus(b.index,e?"leaf":"hole");if(e&&g)return this._removeChildrenRecursive(b),!0;var c=!1;if(0<b.childCount)for(var c=!0,f=0;f<b.childCount;f++){var a=this._index.getChildIndex(b,f),h=this._index.getNode(a);
h?this._isGeometryVisible(a)&&!this._lodGlobalHandlingRecursion(h,d)&&this._isNodeInScaleBounds(h)&&(c=!1):this._isNodeVisible(a)&&(c=!1)}g&&!e&&(c||l.length<d)&&(l.push(b.index),g=!1);b=!b.resources.hasFeatureData;return c||g||b};d.prototype._removeChildrenRecursive=function(b){this._index.traverseChildren(b,function(b){l.push(b.index);return!0})};d.prototype.childrenEmpty=function(b){var d=this,g=!0;this._index.traverseChildren(b,function(b){return g&&d._isNodeVisible(b.index)?d.layerView.isNodeLoaded(b.index)?
g=!1:!0:!1});return g};d.prototype._childrenRequireLoading=function(b){var d=this,g=!1,e=!0;this._index.traverseChildren(b,function(b){if(!e||!d._isNodeVisible(b.index))return!1;var c=d._nodeTraversalState(b);d.isChosenMaxLOD(c)&&d._isGeometryVisible(b.index)&&(g=!0);return d.layerView.isNodeLoaded(b.index)?e=!1:!0});return e&&g};d.prototype.isChosenMaxLOD=function(b){return b.isChosen&&(!b.nodeHasLOD||b.lodLevel===this._maxLodLevel)};return d}();var l=new n({deallocator:null});return r})},"esri/views/3d/layers/i3s/I3SNodeLoader":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/has ../../../../core/lang ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../libs/draco/DracoDecoder ./I3SBinaryReader ./I3SUtil ../../webgl-engine/lib/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a,b){var c=[],d=function(b){var d=h.isSome(a)&&a[b]&&a[b].formats;d&&c.push({id:""+b,encodings:d.map(function(a){return{name:a.name,encoding:t[a.format]}})})};b&&b.pbrMetallicRoughness&&b.pbrMetallicRoughness.baseColorTexture&&d(b.pbrMetallicRoughness.baseColorTexture.textureSetDefinitionId);return c}function v(a,b){var c,d=q(a,b),e=d[0]&&d[0].id;a=h.isSome(a)&&a[e]&&a[e].atlas;var f="opaque"!==b.alphaMode,d=e?(c={},c[e]={encoding:d[0].encodings.map(function(a){return a.encoding}),
wrap:["none","none"],atlas:a,channels:f?"rgba":"rgb",images:[{id:e,size:0,href:d[0].encodings.map(function(a){return"../textures/"+a.name}),byteOffset:0,length:0}]},c):{};c=(c=b.pbrMetallicRoughness)&&c.baseColorFactor;b={mat:{type:"standard",params:{diffuse:c?c.slice(0,3):[1,1,1],specular:[1,1,1,1],vertexRegions:a,doubleSided:b.doubleSided,cullFace:b.cullFace,transparency:c?1-c[3]:0,useVertexColorAlpha:f}}};return{textureDefinitions:d,materialDefinitions:b}}r=function(){function d(a,b,c,d,e,f){this.streamDataController=
b;this.logger=c;this.defaultGeometrySchema=d;this.requiredAttributes=e;this.options=f;this.layerUrl=a.parsedUrl.path;this.geometryDefinitions=a.geometryDefinitions;if(a.materialDefinitions){var g=a.textureSetDefinitions;this.materialTextures=a.materialDefinitions.map(function(a){return q(g,a)});this.materialShared=a.materialDefinitions.map(function(a){return v(g,a)})}}d.prototype.load=function(a,b,c){return this.streamDataController.request(a,b,{signal:c})};d.prototype.loadAttribute=function(a,b,
c){return this.load(this.layerUrl+"/nodes/"+a.resources.attributes+"/attributes/"+b.key+"/0","binary",c).then(function(a){return f.readBinaryAttribute(b,a)})};d.prototype.loadAttributes=function(a,b,c){var d=this;return g.eachAlways(b.map(function(b){return d.loadAttribute(a,b.attributeStorageInfo,c)})).then(function(c){for(var e={},f=0;f<b.length;++f)c[f].value?e[b[f].name]=c[f].value:g.isAbortError(c[f].error)||d.logger.error("Failed to load attributeData for '"+b[f].name+"' on node '"+a.id+"'");
return e})};d.prototype.loadNodeData=function(a,d){return l(this,void 0,void 0,function(){var e,h,l,m,p,q,r,t,v,w,x,H,S,P,V,T,Z,Q,J;return n(this,function(n){switch(n.label){case 0:e=null!=this.requiredAttributes&&a.resources.attributes?this.loadAttributes(a,this.requiredAttributes,d):g.resolve({});var u=this.geometryDefinitions;n={bufferDefinition:null,bufferIndex:0};if(!(null==u||0>a.resources.geometryDefinition)&&(u=0<=a.resources.geometryDefinition?u[a.resources.geometryDefinition].geometryBuffers:
null,null!=u))for(var z=0;z<u.length;z++)if(null!=u[z].compressedAttributes){if("draco"===u[z].compressedAttributes.encoding&&c.isSupported()&&!k("disable-feature:i3s-draco")){n.bufferIndex=z;n.bufferDefinition=u[z];break}}else n.bufferIndex=z,n.bufferDefinition=u[z];h=n;l=h.bufferDefinition;m=h.bufferIndex;p=a.resources.geometry?this.loadGeometry(a,m,d):null;return a.resources.hasSharedResource?[4,this.loadShared(a,d)]:[3,2];case 1:return r=n.sent(),[3,3];case 2:r=this.materialShared&&0<=a.resources.materialDefinition?
this.materialShared[a.resources.materialDefinition]:null,n.label=3;case 3:return q=r,this.options.loadFeatureData?[4,this.loadFeatureData(a,d)]:[3,5];case 4:return v=n.sent(),[3,6];case 5:v=null,n.label=6;case 6:return t=v,w=this.options.loadFeatureData?this.collectGeometries(t):this.meshPyramidGeometryData(a,q),x=this.materialTextures&&0<=a.resources.materialDefinition?this.materialTextures[a.resources.materialDefinition]:this.getRequiredTexturesFromShared(w,q),H=this.options.loadTextureData?this.loadTextures(a,
x,d):null,P=S=null,p?[4,p]:[3,8];case 7:S=n.sent();u=this.defaultGeometrySchema;z=q;if(u&&z&&z.materialDefinitions){var B=Object.keys(z.materialDefinitions)[0];!z.materialDefinitions[B].params.vertexRegions&&u.vertexAttributes.region&&(u=b.clone(u),delete u.vertexAttributes.region)}V=u;if(T=!(!l||!l.compressedAttributes||"draco"!==l.compressedAttributes.encoding)){u={};z=0;for(B=l.compressedAttributes.attributes;z<B.length;z++){var C=B[z];y[C]&&(u[y[C]]={valueType:null})}u={header:null,byteOffset:0,
byteCount:0,vertexAttributes:u}}else u=l?f.createGeometryIndexFromDefinition(l,a.vertexCount,a.numFeatures):f.createGeometryIndexFromSchema(S,V);P=u;n.label=8;case 8:return[4,H];case 9:return Z=n.sent(),[4,e];case 10:return Q=n.sent(),J=null,Q&&(J={attributeData:Q,loadedAttributes:this.requiredAttributes}),[2,{allGeometryData:w,attributeDataInfo:J,geometryBuffer:S,geometryIndex:P,sharedResource:q,requiredTextures:x,textureData:Z}]}})})};d.addAbsoluteHrefTexture=function(a,b){a=a.textureDefinitions;
if(null!=a)for(var c=0,d=Object.keys(a);c<d.length;c++)for(var f=0,g=a[d[c]].images;f<g.length;f++){var h=g[f];Array.isArray(h.href)?h.hrefConcat=h.href.map(function(a){return e.makeAbsolute(a,b)}):h.hrefConcat=e.makeAbsolute(h.href,b)}};d.fixTextureEncodings=function(a){a=a.textureDefinitions;if(null!=a)for(var b in a){var c=a[b];if(Array.isArray(c.encoding))for(var d=0;d<c.encoding.length;d++){var e=c.encoding[d];"data:"===e.substring(0,5)&&(c.encoding[d]=e.substring(5))}else e=c.encoding,"data:"===
e.substring(0,5)&&(c.encoding=e.substring(5))}};d.prototype.loadShared=function(a,b){var c=this.layerUrl+"/nodes/"+a.resources.geometry+"/shared";return this.load(c,"json",b).then(function(a){d.fixTextureEncodings(a);d.addAbsoluteHrefTexture(a,c);return a})};d.prototype.loadTexture=function(b,c,d,e,f){return e===a.DDS_ENCODING_STRING?this.load(b,"binary",f).then(function(a){return{i3sTexId:c,data:a,encoding:e}}):this.load(b,"image",f).then(function(a){var b=a;if(d&&4096<=a.width*a.height){var b=Math.ceil(a.width/
2),f=Math.ceil(a.height/2),g=document.createElement("canvas");g.width=b;g.height=f;g.getContext("2d").drawImage(a,0,0,b,f);b=g}return{i3sTexId:c,data:b,encoding:e}})};d.prototype.loadTextures=function(b,c,e){var f=this,h=this.options.textureFormat===d.TextureFormat.Compressed,k=this.options.textureFormat===d.TextureFormat.Downsampled;return g.all(c.map(function(c){var d=a.selectEncoding(c.encodings,h);return null==d?(f.logger.error("No known encoding for texture found on node "+b.id),g.reject()):
f.loadTexture(f.layerUrl+"/nodes/"+(b.resources.texture||b.id)+"/textures/"+d.name,c.id,k,d.encoding,e)}))};d.prototype.getRequiredTexturesFromShared=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d].geometries;if(null!=e)for(var f=function(a){a=a.params.textureID||"none";if("none"!==a){null!=b.textureDefinitions&&null!=b.textureDefinitions[a]||g.logger.warn("textureDefinitions missing in shared resource. i3sTexId: "+a);var d=b.textureDefinitions[a];p.assert(void 0!==d,"geometry wants unknown texture "+
a);if(0===d.images.length)return"continue";var e=d.images[d.images.length-1],f=function(a){return a&&a.split("/").pop()},d=Array.isArray(d.encoding)?d.encoding.map(function(a,b){return{name:f(e.href[b]),encoding:a}}):[{name:f(e.href),encoding:d.encoding}];c.push({id:a,encodings:d})}},g=this,h=0;h<e.length;h++)f(e[h])}return c};d.prototype.meshPyramidGeometryData=function(a,b){a=b&&b.materialDefinitions?Object.keys(b.materialDefinitions)[0]:null;b=b&&b.textureDefinitions?Object.keys(b.textureDefinitions)[0]:
null;return[{featureIds:[],geometries:[{type:"ArrayBufferView",params:{materialID:a,textureID:b}}],featureDataPosition:[0,0,0]}]};d.prototype.collectGeometries=function(a){var b=[],c=0;for(a=a.featureData;c<a.length;c++){var d=a[c],e=d.geometries;if(null!=e)for(var f=0;f<e.length;f++)b.push({featureIds:[d.id],featureDataPosition:d.position,geometries:[e[f]]});else null!=d.position&&b.push({featureIds:[d.id],featureDataPosition:d.position,geometries:null})}return b};d.prototype.loadFeatureData=function(a,
b){return this.load(this.layerUrl+"/nodes/"+a.id+"/features/0","json",b)};d.prototype.loadGeometry=function(a,b,c){return this.load(this.layerUrl+"/nodes/"+a.resources.geometry+"/geometries/"+b,"binary",c)};return d}();var t={jpg:"image/jpeg",png:"image/png",dds:"image/vnd-ms.dds","ktx-etc2":"image/ktx"},y={position:"position",normal:"normal",uv0:"uv0",uv1:"uv1",color:"color","uv-region":"region"};(function(a){a=a.TextureFormat||(a.TextureFormat={});a[a.Compressed=0]="Compressed";a[a.Normal=1]="Normal";
a[a.Downsampled=2]="Downsampled"})(r||(r={}));return r})},"esri/libs/draco/DracoDecoder":function(){define(["require","exports","../../core/has","../../core/promiseUtils","./draco_decoder"],function(r,d,n,l,k){function b(){return!!n("esri-wasm")}function h(){return r.toUrl("./draco_decoder.wasm")}Object.defineProperty(d,"__esModule",{value:!0});(function(b){for(var c in b)d.hasOwnProperty(c)||(d[c]=b[c])})(k);d.isSupported=b;d.getDecoderModule=function(){if(!b())return l.reject(Error("Draco decompression not available, missing WebAssembly support"));
g||(g=l.create(function(b,d){return r(["./draco_decoder"],function(a){e=a({locateFile:h});b(e)})}).catch(function(b){return l.reject(b)}));return g};var g,e})},"esri/libs/draco/draco_decoder":function(){var r=function(){var d="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(n){function l(a){return G.locateFile?G.locateFile(a,ia):ia+a}function k(a,b){a||w("Assertion failed: "+b)}function b(a,b){var c;if(a){c=Ka;var d=a+b;for(b=a;c[b]&&!(b>=d);)++b;
if(16<b-a&&c.subarray&&xa)c=xa.decode(c.subarray(a,b));else{for(d="";a<b;){var e=c[a++];if(e&128){var f=c[a++]&63;if(192==(e&224))d+=String.fromCharCode((e&31)<<6|f);else{var g=c[a++]&63,e=224==(e&240)?(e&15)<<12|f<<6|g:(e&7)<<18|f<<12|g<<6|c[a++]&63;65536>e?d+=String.fromCharCode(e):(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else d+=String.fromCharCode(e)}c=d}}else c="";return c}function h(a,b){0<a%b&&(a+=b-a%b);return a}function g(){G.HEAP8=ua=new Int8Array(va);G.HEAP16=new Int16Array(va);
G.HEAP32=ea=new Int32Array(va);G.HEAPU8=Ka=new Uint8Array(va);G.HEAPU16=new Uint16Array(va);G.HEAPU32=new Uint32Array(va);G.HEAPF32=new Float32Array(va);G.HEAPF64=new Float64Array(va)}function e(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.func;"number"===typeof c?void 0===b.arg?G.dynCall_v(c):G.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}}function c(a){return String.prototype.startsWith?a.startsWith("data:application/octet-stream;base64,"):0===a.indexOf("data:application/octet-stream;base64,")}
function f(){try{if(G.wasmBinary)return new Uint8Array(G.wasmBinary);if(G.readBinary)return G.readBinary(Da);throw"both async and sync fetching of the wasm failed";}catch(sb){w(sb)}}function a(){return G.wasmBinary||!pa&&!ta||"function"!==typeof fetch?new Promise(function(a,b){a(f())}):fetch(Da,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+Da+"'";return a.arrayBuffer()}).catch(function(){return f()})}function p(b){function d(a,b){G.asm=a.exports;
Xa--;G.monitorRunDependencies&&G.monitorRunDependencies(Xa);0==Xa&&(null!==ya&&(clearInterval(ya),ya=null),Pa&&(a=Pa,Pa=null,a()))}function e(a){d(a.instance)}function f(b){a().then(function(a){return WebAssembly.instantiate(a,g)}).then(b,function(a){Ca("failed to asynchronously prepare wasm: "+a);w(a)})}var g={env:b,global:{NaN:NaN,Infinity:Infinity},"global.Math":Math,asm2wasm:Ia};Xa++;G.monitorRunDependencies&&G.monitorRunDependencies(Xa);if(G.instantiateWasm)try{return G.instantiateWasm(g,d)}catch(Dd){return Ca("Module.instantiateWasm callback failed with error: "+
Dd),!1}G.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||c(Da)||"function"!==typeof fetch?f(e):WebAssembly.instantiateStreaming(fetch(Da,{credentials:"same-origin"}),g).then(e,function(a){Ca("wasm streaming compile failed: "+a);Ca("falling back to ArrayBuffer instantiation");f(e)});return{}}function q(){return!!q.uncaught_exception}function r(){return ua.length}function t(a){a=h(a,65536);var b=va.byteLength;try{return-1!==ra.grow((a-b)/65536)?(va=ra.buffer,!0):!1}catch(ud){return!1}}
function y(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}function x(a){function b(){if(!G.calledRun&&(G.calledRun=!0,!wa)){Ya||(Ya=!0,e(Qa));e(A);if(G.onRuntimeInitialized)G.onRuntimeInitialized();if(G.postRun)for("function"==typeof G.postRun&&(G.postRun=[G.postRun]);G.postRun.length;)ma.unshift(G.postRun.shift());e(ma)}}if(!(0<Xa)){if(G.preRun)for("function"==typeof G.preRun&&(G.preRun=[G.preRun]);G.preRun.length;)eb.unshift(G.preRun.shift());e(eb);0<
Xa||G.calledRun||(G.setStatus?(G.setStatus("Running..."),setTimeout(function(){setTimeout(function(){G.setStatus("")},1);b()},1)):b())}}function w(a){if(G.onAbort)G.onAbort(a);void 0!==a?(Ba(a),Ca(a),a=JSON.stringify(a)):a="";wa=!0;throw"abort("+a+"). Build with -s ASSERTIONS\x3d1 for more info.";}function m(){}function u(a){return(a||m).__cache__}function z(a,b){var c=u(b),d=c[a];if(d)return d;d=Object.create((b||m).prototype);d.ptr=a;return c[a]=d}function B(a){if("string"===typeof a){for(var b=
0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);127>=d?++b:b=2047>=d?b+2:65535>=d?b+3:b+4}b=Array(b+1);c=0;d=b.length;if(0<d){for(var d=c+d-1,e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f)var g=a.charCodeAt(++e),f=65536+((f&1023)<<10)|g&1023;if(127>=f){if(c>=d)break;b[c++]=f}else{if(2047>=f){if(c+1>=d)break;b[c++]=192|f>>6}else{if(65535>=f){if(c+2>=d)break;b[c++]=224|f>>12}else{if(c+3>=d)break;b[c++]=240|f>>18;b[c++]=
128|f>>12&63}b[c++]=128|f>>6&63}b[c++]=128|f&63}}b[c]=0}a=Ra.alloc(b,ua);Ra.copy(b,ua,a)}return a}function C(){throw"cannot construct a Status, no constructor in IDL";}function F(){this.ptr=Uc();u(F)[this.ptr]=this}function E(){this.ptr=$b();u(E)[this.ptr]=this}function N(){this.ptr=zd();u(N)[this.ptr]=this}function L(){this.ptr=Cb();u(L)[this.ptr]=this}function K(){this.ptr=oa();u(K)[this.ptr]=this}function O(){this.ptr=Fc();u(O)[this.ptr]=this}function I(){this.ptr=Ib();u(I)[this.ptr]=this}function H(){this.ptr=
Ha();u(H)[this.ptr]=this}function S(){this.ptr=Xb();u(S)[this.ptr]=this}function P(){this.ptr=md();u(P)[this.ptr]=this}function V(){this.ptr=Hc();u(V)[this.ptr]=this}function T(){this.ptr=Ac();u(T)[this.ptr]=this}function Z(){this.ptr=xd();u(Z)[this.ptr]=this}function Q(){this.ptr=tb();u(Q)[this.ptr]=this}function J(){this.ptr=hb();u(J)[this.ptr]=this}function R(){this.ptr=W();u(R)[this.ptr]=this}function U(){throw"cannot construct a VoidPtr, no constructor in IDL";}function X(){this.ptr=jc();u(X)[this.ptr]=
this}function ca(){this.ptr=nd();u(ca)[this.ptr]=this}n=n||{};var G="undefined"!==typeof n?n:{},Y=!1,la=!1;G.onRuntimeInitialized=function(){Y=!0;if(la&&"function"===typeof G.onModuleLoaded)G.onModuleLoaded(G)};G.onModuleParsed=function(){la=!0;if(Y&&"function"===typeof G.onModuleLoaded)G.onModuleLoaded(G)};G.isVersionSupported=function(a){if("string"!==typeof a)return!1;a=a.split(".");return 2>a.length||3<a.length?!1:1==a[0]&&0<=a[1]&&3>=a[1]?!0:0!=a[0]||10<a[1]?!1:!0};var ja={},na;for(na in G)G.hasOwnProperty(na)&&
(ja[na]=G[na]);G.arguments=[];G.thisProgram="./this.program";G.quit=function(a,b){throw b;};G.preRun=[];G.postRun=[];var pa=!1,ta=!1,aa=!1,ga=!1,pa="object"===typeof window,ta="function"===typeof importScripts,aa="object"===typeof process&&"function"===typeof require&&!pa&&!ta,ga=!pa&&!aa&&!ta,ia="";if(aa){var ia=__dirname+"/",sa,Aa;G.read=function(a,b){sa||(sa=require("fs"));Aa||(Aa=require("path"));a=Aa.normalize(a);a=sa.readFileSync(a);return b?a:a.toString()};G.readBinary=function(a){a=G.read(a,
!0);a.buffer||(a=new Uint8Array(a));k(a.buffer);return a};1<process.argv.length&&(G.thisProgram=process.argv[1].replace(/\\/g,"/"));G.arguments=process.argv.slice(2);process.on("uncaughtException",function(a){if(!(a instanceof y))throw a;});process.on("unhandledRejection",w);G.quit=function(a){process.exit(a)};G.inspect=function(){return"[Emscripten Module object]"}}else if(ga)"undefined"!=typeof read&&(G.read=function(a){return read(a)}),G.readBinary=function(a){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(a));
a=read(a,"binary");k("object"===typeof a);return a},"undefined"!=typeof scriptArgs?G.arguments=scriptArgs:"undefined"!=typeof arguments&&(G.arguments=arguments),"function"===typeof quit&&(G.quit=function(a){quit(a)});else if(pa||ta)ta?ia=self.location.href:document.currentScript&&(ia=document.currentScript.src),d&&(ia=d),ia=0!==ia.indexOf("blob:")?ia.substr(0,ia.lastIndexOf("/")+1):"",G.read=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);return b.responseText},ta&&(G.readBinary=
function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),G.readAsync=function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){200==d.status||0==d.status&&d.response?b(d.response):c()};d.onerror=c;d.send(null)},G.setWindowTitle=function(a){document.title=a};var Ba=G.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),Ca=G.printErr||
("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||Ba);for(na in ja)ja.hasOwnProperty(na)&&(G[na]=ja[na]);var ja=void 0,Ia={"f64-rem":function(a,b){return a%b},"debugger":function(){debugger}};"object"!==typeof WebAssembly&&Ca("no native wasm support detected");var ra,wa=!1,xa="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var va,ua,Ka,ea,Oa=G.TOTAL_MEMORY||16777216;5242880>
Oa&&Ca("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+Oa+"! (TOTAL_STACK\x3d5242880)");G.buffer?va=G.buffer:"object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory?(ra=new WebAssembly.Memory({initial:Oa/65536}),va=ra.buffer):va=new ArrayBuffer(Oa);g();ea[4088]=5259264;var eb=[],Qa=[],A=[],ma=[],Ya=!1,Xa=0,ya=null,Pa=null;G.preloadedImages={};G.preloadedAudios={};var Da="draco_decoder.wasm";c(Da)||(Da=l(Da));G.asm=function(a,b,c){b.memory=ra;b.table=new WebAssembly.Table({initial:490,
maximum:490,element:"anyfunc"});b.__memory_base=1024;b.__table_base=0;return p(b)};var ka={last:0,caught:[],infos:{},deAdjust:function(a){if(!a||ka.infos[a])return a;for(var b in ka.infos)for(var c=+b,d=ka.infos[c].adjusted,e=d.length,f=0;f<e;f++)if(d[f]===a)return c;return a},addRef:function(a){a&&ka.infos[a].refcount++},decRef:function(a){if(a){var b=ka.infos[a];k(0<b.refcount);b.refcount--;if(0===b.refcount&&!b.rethrown){b.destructor&&G.dynCall_vi(b.destructor,a);delete ka.infos[a];try{Cd(a)}catch(ud){}}}},
clearRef:function(a){a&&(ka.infos[a].refcount=0)}},Fa=G.asm({},{e:w,d:function(a){return td(a)},k:function(){wa=!0;throw"Pure virtual function called!";},c:function(a,b,c){ka.infos[a]={ptr:a,adjusted:[a],type:b,destructor:c,refcount:0,caught:!1,rethrown:!1};ka.last=a;"uncaught_exception"in q?q.uncaught_exception++:q.uncaught_exception=1;throw a;},f:function(a){G.___errno_location&&(ea[G.___errno_location()>>2]=a);return a},b:function(){G.abort()},j:r,i:function(a,b,c){Ka.set(Ka.subarray(b,b+c),a)},
h:function(a){var b=r();if(2147418112<a)return!1;for(b=Math.max(b,16777216);b<a;)b=536870912>=b?h(2*b,65536):Math.min(h((3*b+2147483648)/4,65536),2147418112);if(!t(b))return!1;g();return!0},g:function(){w("trap!")},l:function(a){w("OOM")},a:16352},va);G.asm=Fa;var oa=G._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return G.asm.m.apply(null,arguments)},La=G._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return G.asm.n.apply(null,
arguments)},ba=G._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return G.asm.o.apply(null,arguments)},Ea=G._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return G.asm.p.apply(null,arguments)},Ha=G._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return G.asm.q.apply(null,arguments)},Ga=G._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return G.asm.r.apply(null,arguments)},
qa=G._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return G.asm.s.apply(null,arguments)},za=G._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return G.asm.t.apply(null,arguments)},fa=G._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return G.asm.u.apply(null,arguments)},yb=G._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return G.asm.v.apply(null,arguments)},Ib=G._emscripten_bind_AttributeTransformData_AttributeTransformData_0=
function(){return G.asm.w.apply(null,arguments)},cc=G._emscripten_bind_AttributeTransformData___destroy___0=function(){return G.asm.x.apply(null,arguments)},ub=G._emscripten_bind_AttributeTransformData_transform_type_0=function(){return G.asm.y.apply(null,arguments)},tb=G._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return G.asm.z.apply(null,arguments)},gb=G._emscripten_bind_DecoderBuffer_Init_2=function(){return G.asm.A.apply(null,arguments)},ab=G._emscripten_bind_DecoderBuffer___destroy___0=
function(){return G.asm.B.apply(null,arguments)},Za=G._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return G.asm.C.apply(null,arguments)},zb=G._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return G.asm.D.apply(null,arguments)},hb=G._emscripten_bind_Decoder_Decoder_0=function(){return G.asm.E.apply(null,arguments)},Ab=G._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return G.asm.F.apply(null,arguments)},Qb=G._emscripten_bind_Decoder_GetAttributeFloatArrayForAllPoints_4=
function(){return G.asm.G.apply(null,arguments)},$a=G._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return G.asm.H.apply(null,arguments)},pb=G._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return G.asm.I.apply(null,arguments)},bb=G._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return G.asm.J.apply(null,arguments)},nb=G._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return G.asm.K.apply(null,arguments)},Jb=G._emscripten_bind_Decoder_GetAttributeId_2=
function(){return G.asm.L.apply(null,arguments)},fc=G._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return G.asm.M.apply(null,arguments)},qb=G._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return G.asm.N.apply(null,arguments)},cb=G._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return G.asm.O.apply(null,arguments)},Kb=G._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return G.asm.P.apply(null,arguments)},jb=G._emscripten_bind_Decoder_GetAttributeMetadata_2=
function(){return G.asm.Q.apply(null,arguments)},gc=G._emscripten_bind_Decoder_GetAttributeUInt16ArrayForAllPoints_4=function(){return G.asm.R.apply(null,arguments)},Rb=G._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return G.asm.S.apply(null,arguments)},Db=G._emscripten_bind_Decoder_GetAttributeUInt32ArrayForAllPoints_4=function(){return G.asm.T.apply(null,arguments)},Vb=G._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return G.asm.U.apply(null,arguments)},
M=G._emscripten_bind_Decoder_GetAttributeUInt8ArrayForAllPoints_4=function(){return G.asm.V.apply(null,arguments)},Ja=G._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return G.asm.W.apply(null,arguments)},Eb=G._emscripten_bind_Decoder_GetAttribute_2=function(){return G.asm.X.apply(null,arguments)},Va=G._emscripten_bind_Decoder_GetEncodedGeometryType_1=function(){return G.asm.Y.apply(null,arguments)},Nb=G._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return G.asm.Z.apply(null,
arguments)},ha=G._emscripten_bind_Decoder_GetMetadata_1=function(){return G.asm._.apply(null,arguments)},Lb=G._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return G.asm.$.apply(null,arguments)},Mb=G._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return G.asm.aa.apply(null,arguments)},oc=G._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return G.asm.ba.apply(null,arguments)},fd=G._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return G.asm.ca.apply(null,
arguments)},Yc=G._emscripten_bind_Decoder___destroy___0=function(){return G.asm.da.apply(null,arguments)},Ac=G._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return G.asm.ea.apply(null,arguments)},vd=G._emscripten_bind_DracoFloat32Array_GetArray_2=function(){return G.asm.fa.apply(null,arguments)},dc=G._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return G.asm.ga.apply(null,arguments)},Oc=G._emscripten_bind_DracoFloat32Array___destroy___0=function(){return G.asm.ha.apply(null,
arguments)},wc=G._emscripten_bind_DracoFloat32Array_size_0=function(){return G.asm.ia.apply(null,arguments)},Hc=G._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return G.asm.ja.apply(null,arguments)},pc=G._emscripten_bind_DracoInt16Array_GetArray_2=function(){return G.asm.ka.apply(null,arguments)},qc=G._emscripten_bind_DracoInt16Array_GetValue_1=function(){return G.asm.la.apply(null,arguments)},Hb=G._emscripten_bind_DracoInt16Array___destroy___0=function(){return G.asm.ma.apply(null,
arguments)},Ob=G._emscripten_bind_DracoInt16Array_size_0=function(){return G.asm.na.apply(null,arguments)},jc=G._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return G.asm.oa.apply(null,arguments)},zc=G._emscripten_bind_DracoInt32Array_GetArray_2=function(){return G.asm.pa.apply(null,arguments)},Dc=G._emscripten_bind_DracoInt32Array_GetValue_1=function(){return G.asm.qa.apply(null,arguments)},Wb=G._emscripten_bind_DracoInt32Array___destroy___0=function(){return G.asm.ra.apply(null,
arguments)},Ic=G._emscripten_bind_DracoInt32Array_size_0=function(){return G.asm.sa.apply(null,arguments)},Xb=G._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return G.asm.ta.apply(null,arguments)},Jc=G._emscripten_bind_DracoInt8Array_GetArray_2=function(){return G.asm.ua.apply(null,arguments)},Yb=G._emscripten_bind_DracoInt8Array_GetValue_1=function(){return G.asm.va.apply(null,arguments)},Sb=G._emscripten_bind_DracoInt8Array___destroy___0=function(){return G.asm.wa.apply(null,arguments)},
Ec=G._emscripten_bind_DracoInt8Array_size_0=function(){return G.asm.xa.apply(null,arguments)},Uc=G._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return G.asm.ya.apply(null,arguments)},Vc=G._emscripten_bind_DracoUInt16Array_GetArray_2=function(){return G.asm.za.apply(null,arguments)},id=G._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return G.asm.Aa.apply(null,arguments)},yd=G._emscripten_bind_DracoUInt16Array___destroy___0=function(){return G.asm.Ba.apply(null,arguments)},
hd=G._emscripten_bind_DracoUInt16Array_size_0=function(){return G.asm.Ca.apply(null,arguments)},Cb=G._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return G.asm.Da.apply(null,arguments)},Ub=G._emscripten_bind_DracoUInt32Array_GetArray_2=function(){return G.asm.Ea.apply(null,arguments)},ec=G._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return G.asm.Fa.apply(null,arguments)},Fb=G._emscripten_bind_DracoUInt32Array___destroy___0=function(){return G.asm.Ga.apply(null,arguments)},
xc=G._emscripten_bind_DracoUInt32Array_size_0=function(){return G.asm.Ha.apply(null,arguments)},zd=G._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return G.asm.Ia.apply(null,arguments)},jd=G._emscripten_bind_DracoUInt8Array_GetArray_2=function(){return G.asm.Ja.apply(null,arguments)},Gc=G._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return G.asm.Ka.apply(null,arguments)},gd=G._emscripten_bind_DracoUInt8Array___destroy___0=function(){return G.asm.La.apply(null,arguments)},
wd=G._emscripten_bind_DracoUInt8Array_size_0=function(){return G.asm.Ma.apply(null,arguments)},xd=G._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return G.asm.Na.apply(null,arguments)},Cc=G._emscripten_bind_GeometryAttribute___destroy___0=function(){return G.asm.Oa.apply(null,arguments)},W=G._emscripten_bind_Mesh_Mesh_0=function(){return G.asm.Pa.apply(null,arguments)},Sa=G._emscripten_bind_Mesh___destroy___0=function(){return G.asm.Qa.apply(null,arguments)},uc=G._emscripten_bind_Mesh_num_attributes_0=
function(){return G.asm.Ra.apply(null,arguments)},Na=G._emscripten_bind_Mesh_num_faces_0=function(){return G.asm.Sa.apply(null,arguments)},Ta=G._emscripten_bind_Mesh_num_points_0=function(){return G.asm.Ta.apply(null,arguments)},Ua=G._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return G.asm.Ua.apply(null,arguments)},Tc=G._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return G.asm.Va.apply(null,arguments)},kd=G._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return G.asm.Wa.apply(null,
arguments)},Kc=G._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return G.asm.Xa.apply(null,arguments)},Wc=G._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return G.asm.Ya.apply(null,arguments)},ld=G._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return G.asm.Za.apply(null,arguments)},md=G._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return G.asm._a.apply(null,arguments)},bd=G._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return G.asm.$a.apply(null,
arguments)},cd=G._emscripten_bind_MetadataQuerier___destroy___0=function(){return G.asm.ab.apply(null,arguments)},nd=G._emscripten_bind_Metadata_Metadata_0=function(){return G.asm.bb.apply(null,arguments)},Xc=G._emscripten_bind_Metadata___destroy___0=function(){return G.asm.cb.apply(null,arguments)},od=G._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return G.asm.db.apply(null,arguments)},Fc=G._emscripten_bind_PointAttribute_PointAttribute_0=function(){return G.asm.eb.apply(null,
arguments)},pd=G._emscripten_bind_PointAttribute___destroy___0=function(){return G.asm.fb.apply(null,arguments)},Lc=G._emscripten_bind_PointAttribute_attribute_type_0=function(){return G.asm.gb.apply(null,arguments)},qd=G._emscripten_bind_PointAttribute_byte_offset_0=function(){return G.asm.hb.apply(null,arguments)},hc=G._emscripten_bind_PointAttribute_byte_stride_0=function(){return G.asm.ib.apply(null,arguments)},Pb=G._emscripten_bind_PointAttribute_data_type_0=function(){return G.asm.jb.apply(null,
arguments)},Zb=G._emscripten_bind_PointAttribute_normalized_0=function(){return G.asm.kb.apply(null,arguments)},Tb=G._emscripten_bind_PointAttribute_num_components_0=function(){return G.asm.lb.apply(null,arguments)},rc=G._emscripten_bind_PointAttribute_size_0=function(){return G.asm.mb.apply(null,arguments)},Mc=G._emscripten_bind_PointAttribute_unique_id_0=function(){return G.asm.nb.apply(null,arguments)},$b=G._emscripten_bind_PointCloud_PointCloud_0=function(){return G.asm.ob.apply(null,arguments)},
kb=G._emscripten_bind_PointCloud___destroy___0=function(){return G.asm.pb.apply(null,arguments)},vc=G._emscripten_bind_PointCloud_num_attributes_0=function(){return G.asm.qb.apply(null,arguments)},nc=G._emscripten_bind_PointCloud_num_points_0=function(){return G.asm.rb.apply(null,arguments)},yc=G._emscripten_bind_Status___destroy___0=function(){return G.asm.sb.apply(null,arguments)},ac=G._emscripten_bind_Status_code_0=function(){return G.asm.tb.apply(null,arguments)},sc=G._emscripten_bind_Status_error_msg_0=
function(){return G.asm.ub.apply(null,arguments)},tc=G._emscripten_bind_Status_ok_0=function(){return G.asm.vb.apply(null,arguments)},Nc=G._emscripten_bind_VoidPtr___destroy___0=function(){return G.asm.wb.apply(null,arguments)},lb=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return G.asm.xb.apply(null,arguments)},bc=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return G.asm.yb.apply(null,arguments)},ic=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=
function(){return G.asm.zb.apply(null,arguments)},Zc=G._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return G.asm.Ab.apply(null,arguments)},Pc=G._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return G.asm.Bb.apply(null,arguments)},$c=G._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return G.asm.Cb.apply(null,arguments)},Qc=G._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return G.asm.Db.apply(null,
arguments)},D=G._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return G.asm.Eb.apply(null,arguments)},fb=G._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return G.asm.Fb.apply(null,arguments)},ob=G._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return G.asm.Gb.apply(null,arguments)},Bb=G._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return G.asm.Hb.apply(null,arguments)},da=G._emscripten_enum_draco_GeometryAttribute_Type_POSITION=
function(){return G.asm.Ib.apply(null,arguments)},xb=G._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return G.asm.Jb.apply(null,arguments)},Ad=G._emscripten_enum_draco_StatusCode_ERROR=function(){return G.asm.Kb.apply(null,arguments)},rb=G._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return G.asm.Lb.apply(null,arguments)},dd=G._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return G.asm.Mb.apply(null,arguments)},rd=G._emscripten_enum_draco_StatusCode_OK=
function(){return G.asm.Nb.apply(null,arguments)},Bd=G._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return G.asm.Ob.apply(null,arguments)},sd=G._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return G.asm.Pb.apply(null,arguments)},Cd=G._free=function(){return G.asm.Qb.apply(null,arguments)},td=G._malloc=function(){return G.asm.Rb.apply(null,arguments)};G.dynCall_v=function(){return G.asm.Sb.apply(null,arguments)};G.dynCall_vi=function(){return G.asm.Tb.apply(null,
arguments)};G.asm=Fa;G.then=function(a){if(G.calledRun)a(G);else{var b=G.onRuntimeInitialized;G.onRuntimeInitialized=function(){b&&b();a(G)}}return G};y.prototype=Error();y.prototype.constructor=y;Pa=function ed(){G.calledRun||x();G.calledRun||(Pa=ed)};G.run=x;G.abort=w;if(G.preInit)for("function"==typeof G.preInit&&(G.preInit=[G.preInit]);0<G.preInit.length;)G.preInit.pop()();G.noExitRuntime=!0;x();m.prototype=Object.create(m.prototype);m.prototype.constructor=m;m.prototype.__class__=m;m.__cache__=
{};G.WrapperObject=m;G.getCache=u;G.wrapPointer=z;G.castObject=function(a,b){return z(a.ptr,b)};G.NULL=z(0);G.destroy=function(a){if(!a.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";a.__destroy__();delete u(a.__class__)[a.ptr]};G.compare=function(a,b){return a.ptr===b.ptr};G.getPointer=function(a){return a.ptr};G.getClass=function(a){return a.__class__};var Ra={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Ra.needed){for(var a=0;a<Ra.temps.length;a++)G._free(Ra.temps[a]);
Ra.temps.length=0;G._free(Ra.buffer);Ra.buffer=0;Ra.size+=Ra.needed;Ra.needed=0}Ra.buffer||(Ra.size+=128,Ra.buffer=G._malloc(Ra.size),k(Ra.buffer));Ra.pos=0},alloc:function(a,b){k(Ra.buffer);a=a.length*b.BYTES_PER_ELEMENT;a=a+7&-8;Ra.pos+a>=Ra.size?(k(0<a),Ra.needed+=a,b=G._malloc(a),Ra.temps.push(b)):(b=Ra.buffer+Ra.pos,Ra.pos+=a);return b},copy:function(a,b,c){switch(b.BYTES_PER_ELEMENT){case 2:c>>=1;break;case 4:c>>=2;break;case 8:c>>=3}for(var d=0;d<a.length;d++)b[c+d]=a[d]}};C.prototype=Object.create(m.prototype);
C.prototype.constructor=C;C.prototype.__class__=C;C.__cache__={};G.Status=C;C.prototype.code=C.prototype.code=function(){return ac(this.ptr)};C.prototype.ok=C.prototype.ok=function(){return!!tc(this.ptr)};C.prototype.error_msg=C.prototype.error_msg=function(){return b(sc(this.ptr))};C.prototype.__destroy__=C.prototype.__destroy__=function(){yc(this.ptr)};F.prototype=Object.create(m.prototype);F.prototype.constructor=F;F.prototype.__class__=F;F.__cache__={};G.DracoUInt16Array=F;F.prototype.GetValue=
F.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return id(b,a)};F.prototype.size=F.prototype.size=function(){return hd(this.ptr)};F.prototype.GetArray=F.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!Vc(c,a,b)};F.prototype.__destroy__=F.prototype.__destroy__=function(){yd(this.ptr)};E.prototype=Object.create(m.prototype);E.prototype.constructor=E;E.prototype.__class__=E;E.__cache__={};G.PointCloud=
E;E.prototype.num_attributes=E.prototype.num_attributes=function(){return vc(this.ptr)};E.prototype.num_points=E.prototype.num_points=function(){return nc(this.ptr)};E.prototype.__destroy__=E.prototype.__destroy__=function(){kb(this.ptr)};N.prototype=Object.create(m.prototype);N.prototype.constructor=N;N.prototype.__class__=N;N.__cache__={};G.DracoUInt8Array=N;N.prototype.GetValue=N.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return Gc(b,a)};N.prototype.size=N.prototype.size=
function(){return wd(this.ptr)};N.prototype.GetArray=N.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!jd(c,a,b)};N.prototype.__destroy__=N.prototype.__destroy__=function(){gd(this.ptr)};L.prototype=Object.create(m.prototype);L.prototype.constructor=L;L.prototype.__class__=L;L.__cache__={};G.DracoUInt32Array=L;L.prototype.GetValue=L.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return ec(b,
a)};L.prototype.size=L.prototype.size=function(){return xc(this.ptr)};L.prototype.GetArray=L.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!Ub(c,a,b)};L.prototype.__destroy__=L.prototype.__destroy__=function(){Fb(this.ptr)};K.prototype=Object.create(m.prototype);K.prototype.constructor=K;K.prototype.__class__=K;K.__cache__={};G.AttributeOctahedronTransform=K;K.prototype.InitFromAttribute=K.prototype.InitFromAttribute=function(a){var b=
this.ptr;a&&"object"===typeof a&&(a=a.ptr);return!!La(b,a)};K.prototype.quantization_bits=K.prototype.quantization_bits=function(){return Ea(this.ptr)};K.prototype.__destroy__=K.prototype.__destroy__=function(){ba(this.ptr)};O.prototype=Object.create(m.prototype);O.prototype.constructor=O;O.prototype.__class__=O;O.__cache__={};G.PointAttribute=O;O.prototype.size=O.prototype.size=function(){return rc(this.ptr)};O.prototype.GetAttributeTransformData=O.prototype.GetAttributeTransformData=function(){return z(od(this.ptr),
I)};O.prototype.attribute_type=O.prototype.attribute_type=function(){return Lc(this.ptr)};O.prototype.data_type=O.prototype.data_type=function(){return Pb(this.ptr)};O.prototype.num_components=O.prototype.num_components=function(){return Tb(this.ptr)};O.prototype.normalized=O.prototype.normalized=function(){return!!Zb(this.ptr)};O.prototype.byte_stride=O.prototype.byte_stride=function(){return hc(this.ptr)};O.prototype.byte_offset=O.prototype.byte_offset=function(){return qd(this.ptr)};O.prototype.unique_id=
O.prototype.unique_id=function(){return Mc(this.ptr)};O.prototype.__destroy__=O.prototype.__destroy__=function(){pd(this.ptr)};I.prototype=Object.create(m.prototype);I.prototype.constructor=I;I.prototype.__class__=I;I.__cache__={};G.AttributeTransformData=I;I.prototype.transform_type=I.prototype.transform_type=function(){return ub(this.ptr)};I.prototype.__destroy__=I.prototype.__destroy__=function(){cc(this.ptr)};H.prototype=Object.create(m.prototype);H.prototype.constructor=H;H.prototype.__class__=
H;H.__cache__={};G.AttributeQuantizationTransform=H;H.prototype.InitFromAttribute=H.prototype.InitFromAttribute=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return!!Ga(b,a)};H.prototype.quantization_bits=H.prototype.quantization_bits=function(){return fa(this.ptr)};H.prototype.min_value=H.prototype.min_value=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return za(b,a)};H.prototype.range=H.prototype.range=function(){return yb(this.ptr)};H.prototype.__destroy__=H.prototype.__destroy__=
function(){qa(this.ptr)};S.prototype=Object.create(m.prototype);S.prototype.constructor=S;S.prototype.__class__=S;S.__cache__={};G.DracoInt8Array=S;S.prototype.GetValue=S.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return Yb(b,a)};S.prototype.size=S.prototype.size=function(){return Ec(this.ptr)};S.prototype.GetArray=S.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!Jc(c,a,b)};S.prototype.__destroy__=
S.prototype.__destroy__=function(){Sb(this.ptr)};P.prototype=Object.create(m.prototype);P.prototype.constructor=P;P.prototype.__class__=P;P.__cache__={};G.MetadataQuerier=P;P.prototype.HasEntry=P.prototype.HasEntry=function(a,b){var c=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:B(b);return!!ld(c,a,b)};P.prototype.GetIntEntry=P.prototype.GetIntEntry=function(a,b){var c=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:
B(b);return Kc(c,a,b)};P.prototype.GetIntEntryArray=P.prototype.GetIntEntryArray=function(a,b,c){var d=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:B(b);c&&"object"===typeof c&&(c=c.ptr);kd(d,a,b,c)};P.prototype.GetDoubleEntry=P.prototype.GetDoubleEntry=function(a,b){var c=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:B(b);return Ua(c,a,b)};P.prototype.GetStringEntry=P.prototype.GetStringEntry=function(a,c){var d=this.ptr;
Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);c=c&&"object"===typeof c?c.ptr:B(c);return b(Wc(d,a,c))};P.prototype.NumEntries=P.prototype.NumEntries=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return bd(b,a)};P.prototype.GetEntryName=P.prototype.GetEntryName=function(a,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);c&&"object"===typeof c&&(c=c.ptr);return b(Tc(d,a,c))};P.prototype.__destroy__=P.prototype.__destroy__=function(){cd(this.ptr)};V.prototype=Object.create(m.prototype);
V.prototype.constructor=V;V.prototype.__class__=V;V.__cache__={};G.DracoInt16Array=V;V.prototype.GetValue=V.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return qc(b,a)};V.prototype.size=V.prototype.size=function(){return Ob(this.ptr)};V.prototype.GetArray=V.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!pc(c,a,b)};V.prototype.__destroy__=V.prototype.__destroy__=function(){Hb(this.ptr)};
T.prototype=Object.create(m.prototype);T.prototype.constructor=T;T.prototype.__class__=T;T.__cache__={};G.DracoFloat32Array=T;T.prototype.GetValue=T.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return dc(b,a)};T.prototype.size=T.prototype.size=function(){return wc(this.ptr)};T.prototype.GetArray=T.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!vd(c,a,b)};T.prototype.__destroy__=T.prototype.__destroy__=
function(){Oc(this.ptr)};Z.prototype=Object.create(m.prototype);Z.prototype.constructor=Z;Z.prototype.__class__=Z;Z.__cache__={};G.GeometryAttribute=Z;Z.prototype.__destroy__=Z.prototype.__destroy__=function(){Cc(this.ptr)};Q.prototype=Object.create(m.prototype);Q.prototype.constructor=Q;Q.prototype.__class__=Q;Q.__cache__={};G.DecoderBuffer=Q;Q.prototype.Init=Q.prototype.Init=function(a,b){var c=this.ptr;Ra.prepare();if("object"==typeof a&&"object"===typeof a){var d=Ra.alloc(a,ua);Ra.copy(a,ua,d);
a=d}b&&"object"===typeof b&&(b=b.ptr);gb(c,a,b)};Q.prototype.__destroy__=Q.prototype.__destroy__=function(){ab(this.ptr)};J.prototype=Object.create(m.prototype);J.prototype.constructor=J;J.prototype.__class__=J;J.__cache__={};G.Decoder=J;J.prototype.GetEncodedGeometryType=J.prototype.GetEncodedGeometryType=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return Va(b,a)};J.prototype.DecodeBufferToPointCloud=J.prototype.DecodeBufferToPointCloud=function(a,b){var c=this.ptr;a&&"object"===
typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return z(zb(c,a,b),C)};J.prototype.DecodeBufferToMesh=J.prototype.DecodeBufferToMesh=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return z(Za(c,a,b),C)};J.prototype.GetAttributeId=J.prototype.GetAttributeId=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return Jb(c,a,b)};J.prototype.GetAttributeIdByName=J.prototype.GetAttributeIdByName=function(a,
b){var c=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:B(b);return nb(c,a,b)};J.prototype.GetAttributeIdByMetadataEntry=J.prototype.GetAttributeIdByMetadataEntry=function(a,b,c){var d=this.ptr;Ra.prepare();a&&"object"===typeof a&&(a=a.ptr);b=b&&"object"===typeof b?b.ptr:B(b);c=c&&"object"===typeof c?c.ptr:B(c);return bb(d,a,b,c)};J.prototype.GetAttribute=J.prototype.GetAttribute=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&
(b=b.ptr);return z(Eb(c,a,b),O)};J.prototype.GetAttributeByUniqueId=J.prototype.GetAttributeByUniqueId=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return z(Ab(c,a,b),O)};J.prototype.GetMetadata=J.prototype.GetMetadata=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return z(ha(b,a),ca)};J.prototype.GetAttributeMetadata=J.prototype.GetAttributeMetadata=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&
(b=b.ptr);return z(jb(c,a,b),ca)};J.prototype.GetFaceFromMesh=J.prototype.GetFaceFromMesh=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Nb(d,a,b,c)};J.prototype.GetTriangleStripsFromMesh=J.prototype.GetTriangleStripsFromMesh=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return Lb(c,a,b)};J.prototype.GetTrianglesUInt16Array=J.prototype.GetTrianglesUInt16Array=
function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Mb(d,a,b,c)};J.prototype.GetTrianglesUInt32Array=J.prototype.GetTrianglesUInt32Array=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!oc(d,a,b,c)};J.prototype.GetAttributeFloat=J.prototype.GetAttributeFloat=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);
b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!pb(d,a,b,c)};J.prototype.GetAttributeFloatForAllPoints=J.prototype.GetAttributeFloatForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!$a(d,a,b,c)};J.prototype.GetAttributeFloatArrayForAllPoints=J.prototype.GetAttributeFloatArrayForAllPoints=function(a,b,c,d){var e=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===
typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);d&&"object"===typeof d&&(d=d.ptr);return!!Qb(e,a,b,c,d)};J.prototype.GetAttributeIntForAllPoints=J.prototype.GetAttributeIntForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Kb(d,a,b,c)};J.prototype.GetAttributeInt8ForAllPoints=J.prototype.GetAttributeInt8ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===
typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!cb(d,a,b,c)};J.prototype.GetAttributeUInt8ForAllPoints=J.prototype.GetAttributeUInt8ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Ja(d,a,b,c)};J.prototype.GetAttributeUInt8ArrayForAllPoints=J.prototype.GetAttributeUInt8ArrayForAllPoints=function(a,b,c,d){var e=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=
b.ptr);c&&"object"===typeof c&&(c=c.ptr);d&&"object"===typeof d&&(d=d.ptr);return!!M(e,a,b,c,d)};J.prototype.GetAttributeInt16ForAllPoints=J.prototype.GetAttributeInt16ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!fc(d,a,b,c)};J.prototype.GetAttributeUInt16ForAllPoints=J.prototype.GetAttributeUInt16ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&
(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Rb(d,a,b,c)};J.prototype.GetAttributeUInt16ArrayForAllPoints=J.prototype.GetAttributeUInt16ArrayForAllPoints=function(a,b,c,d){var e=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);d&&"object"===typeof d&&(d=d.ptr);return!!gc(e,a,b,c,d)};J.prototype.GetAttributeInt32ForAllPoints=J.prototype.GetAttributeInt32ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);
b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!qb(d,a,b,c)};J.prototype.GetAttributeUInt32ForAllPoints=J.prototype.GetAttributeUInt32ForAllPoints=function(a,b,c){var d=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);return!!Vb(d,a,b,c)};J.prototype.GetAttributeUInt32ArrayForAllPoints=J.prototype.GetAttributeUInt32ArrayForAllPoints=function(a,b,c,d){var e=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===
typeof b&&(b=b.ptr);c&&"object"===typeof c&&(c=c.ptr);d&&"object"===typeof d&&(d=d.ptr);return!!Db(e,a,b,c,d)};J.prototype.SkipAttributeTransform=J.prototype.SkipAttributeTransform=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);fd(b,a)};J.prototype.__destroy__=J.prototype.__destroy__=function(){Yc(this.ptr)};R.prototype=Object.create(m.prototype);R.prototype.constructor=R;R.prototype.__class__=R;R.__cache__={};G.Mesh=R;R.prototype.num_faces=R.prototype.num_faces=function(){return Na(this.ptr)};
R.prototype.num_attributes=R.prototype.num_attributes=function(){return uc(this.ptr)};R.prototype.num_points=R.prototype.num_points=function(){return Ta(this.ptr)};R.prototype.__destroy__=R.prototype.__destroy__=function(){Sa(this.ptr)};U.prototype=Object.create(m.prototype);U.prototype.constructor=U;U.prototype.__class__=U;U.__cache__={};G.VoidPtr=U;U.prototype.__destroy__=U.prototype.__destroy__=function(){Nc(this.ptr)};X.prototype=Object.create(m.prototype);X.prototype.constructor=X;X.prototype.__class__=
X;X.__cache__={};G.DracoInt32Array=X;X.prototype.GetValue=X.prototype.GetValue=function(a){var b=this.ptr;a&&"object"===typeof a&&(a=a.ptr);return Dc(b,a)};X.prototype.size=X.prototype.size=function(){return Ic(this.ptr)};X.prototype.GetArray=X.prototype.GetArray=function(a,b){var c=this.ptr;a&&"object"===typeof a&&(a=a.ptr);b&&"object"===typeof b&&(b=b.ptr);return!!zc(c,a,b)};X.prototype.__destroy__=X.prototype.__destroy__=function(){Wb(this.ptr)};ca.prototype=Object.create(m.prototype);ca.prototype.constructor=
ca;ca.prototype.__class__=ca;ca.__cache__={};G.Metadata=ca;ca.prototype.__destroy__=ca.prototype.__destroy__=function(){Xc(this.ptr)};(function(){function a(){G.OK=rd();G.ERROR=Ad();G.IO_ERROR=dd();G.INVALID_PARAMETER=rb();G.UNSUPPORTED_VERSION=sd();G.UNKNOWN_VERSION=Bd();G.INVALID_GEOMETRY_TYPE=Pc();G.POINT_CLOUD=$c();G.TRIANGULAR_MESH=Qc();G.ATTRIBUTE_INVALID_TRANSFORM=lb();G.ATTRIBUTE_NO_TRANSFORM=bc();G.ATTRIBUTE_QUANTIZATION_TRANSFORM=Zc();G.ATTRIBUTE_OCTAHEDRON_TRANSFORM=ic();G.INVALID=ob();
G.POSITION=da();G.NORMAL=Bb();G.COLOR=D();G.TEX_COORD=xb();G.GENERIC=fb()}Ya?a():A.unshift(a)})();if("function"===typeof G.onModuleParsed)G.onModuleParsed();return n}}();"object"===typeof exports&&"object"===typeof module?module.exports=r:"function"===typeof define&&define.amd?define([],function(){return r}):"object"===typeof exports&&(exports.DracoDecoderModule=r)},"esri/views/3d/layers/i3s/I3SStreamDataController":function(){define(["require","exports","../../../../core/tsSupport/assignHelper",
"../../../../core/promiseUtils"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b){this.requester=b;this.activeRequests=new Set}d.prototype.request=function(b,d,g){var e=this,c=l.createAbortController();l.onAbortOrThrow(g,function(){return c.abort()});g=n({},g,{signal:c.signal});b=this.requester(b,d,g);var f={response:b,abortController:c};this.activeRequests.add(f);l.always(b,function(){return e.activeRequests.delete(f)});return b};d.prototype.cancelAll=
function(){this.activeRequests.forEach(function(b){return b.abortController.abort()});this.activeRequests.clear()};return d}();d.I3SStreamDataController=r;d.default=r})},"esri/views/3d/layers/i3s/I3SViewportQueries":function(){define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../layers/graphics/dehydratedFeatures ../graphics/ElevationContext ../graphics/featureExpressionInfoUtils ../graphics/Graphics3DSymbolCommonCode ./I3SUtil ../../support/geometryUtils ../../support/orientedBoundingBox ../../support/projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q){return function(){function d(b,c,d,e,f,g,k){void 0===k&&(k={});this.indexSR=b;this._renderCoordsHelper=c;this.extent=e;this.elevationProvider=f;this.options=k;this.fp=a.frustum.create();this._poi=l.vec3f64.create();this.minDistance=Infinity;this.maxDistance=0;this.maxLodLevel=2;this._tmp1=l.vec3f64.create();this._tmp2=l.vec3f64.create();this._tmp3=l.vec3f64.create();this._tmp0=l.vec3f64.create();this.screenspaceErrorBias=k.screenspaceErrorBias||1;this.progressiveLoadFactor=
k.progressiveLoadFactor||1;this.updateCamera(d);this.engineSR=this._renderCoordsHelper.spatialReference;this.updateElevationInfo(g.elevationInfo);this.tmpPoint=h.makeDehydratedPoint(0,0,0,b)}d.prototype.updateElevationInfo=function(a){null==a?this._elevationContext=null:(this._elevationContext=new g,this._elevationContext.featureExpressionInfoContext=e.createContext(e.extractExpressionInfo(a,!1)),this._elevationContext.mixinApi(a))};d.prototype.updateCamera=function(b){a.frustum.fromMatrix(b.viewMatrix,
b.projectionMatrix,this.fp);this._screenSizeFactor=1/(b.perScreenPixelRatio/2);this._camPos=b.eye;this.minDistance=Infinity;this.maxDistance=0};d.prototype.setPointOfInterest=function(a){n.vec3.copy(this._poi,a)};d.prototype.updateScreenSpaceErrorBias=function(a){var b=this.screenspaceErrorBias;this.screenspaceErrorBias=a;return b};d.prototype.updateExtent=function(a){this.extent=a};d.prototype.getRenderMbs=function(a){var d=a.renderMbs;d||(d=b.vec4f64.fromValues(a.mbs[0],a.mbs[1],a.mbs[2],-1),a.renderMbs=
d);0>d[3]&&(k.vec4.copy(d,a.mbs),this._elevationContext&&1E5>d[3]&&(this.tmpPoint.x=d[0],this.tmpPoint.y=d[1],this.tmpPoint.z=d[2],d[2]=c.computeElevation(this.elevationProvider,this.tmpPoint,this._elevationContext,this._renderCoordsHelper,null)),q.mbsToMbs(d,this.indexSR,d,this.engineSR));return d};d.prototype.getRenderObb=function(a){if(a.obb&&!(0>a.obb.halfSize[0])&&a.renderObb){var b=a.renderObb;0>b.halfSize[0]&&(p.set(a.obb,b),this._elevationContext&&1E5>a.mbs[3]&&(this.tmpPoint.x=a.obb.center[0],
this.tmpPoint.y=a.obb.center[1],this.tmpPoint.z=a.obb.center[2],b.center[2]=c.computeElevation(this.elevationProvider,this.tmpPoint,this._elevationContext,this._renderCoordsHelper,null)),q.bufferToBuffer(b.center,this.indexSR,0,b.center,this.engineSR,0,1));return b}};d.prototype.isNodeVisible=function(a){var b=this.getRenderMbs(a);return this.isMBSinExtent(b)?a.obb?(a=this.getRenderObb(a),p.isVisible(a,this.fp)):this.isMBSVisible(b):!1};d.prototype.isGeometryVisible=function(a){return(a=this.getRenderObb(a))?
p.isVisible(a,this.fp):!0};d.prototype.isMBSinExtent=function(a){return this.extent?0!==f.intersectBoundingBoxWithMbs(this.extent,a):!0};d.prototype.isMBSVisible=function(b){return a.frustum.intersectsSphere(this.fp.planes,a.sphere.wrap(b[3],b))};d.prototype.screenSpaceDiameterMbs=function(a,b){var c=this.getRenderMbs(a);a=Math.sqrt(n.vec3.squaredDistance(c,this._camPos));c=a-c[3];this._updateMinMaxDistance(a);return 0>c?.5*Number.MAX_VALUE:b/c*this._screenSizeFactor};d.prototype.calcCameraDistance=
function(a){return this.calcCameraDistanceToCenter(a)-this.getRenderMbs(a)[3]};d.prototype.calcCameraDistanceToCenter=function(a){a=this.getRenderMbs(a);a=n.vec3.distance(a,this._camPos);this._updateMinMaxDistance(a);return a};d.prototype.calcAngleDependentLoD=function(a){a=this.getRenderMbs(a);var b=a[3];a=(Math.abs(a[0]*(a[0]-this._camPos[0])+a[1]*(a[1]-this._camPos[1])+a[2]*(a[2]-this._camPos[2]))/n.vec3.length(a)+b)/n.vec3.distance(a,this._camPos);return Math.min(1,a)};d.prototype.hasLOD=function(a){return 0!==
a.lodMetric};d.prototype.getDistancePlanarMode=function(a,b){var c=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];c=c*c+d*d;b=b[3];if(c<=b*b)return Math.abs(a);b=Math.sqrt(c)-b;return Math.sqrt(a*a+b*b)};d.prototype.getDistanceGlobeMode=function(a,b){var c=n.vec3.length(b),d=n.vec3.length(a)-c;n.vec3.scale(this._tmp0,a,n.vec3.dot(a,b)/n.vec3.squaredLength(a));var e=n.vec3.squaredDistance(b,this._tmp0),f=b[3];if(e<=f*f)return Math.abs(d);b=n.vec3.scale(this._tmp0,b,1/c);c=n.vec3.scale(this._tmp1,b,c-f*f/2/c);e=
n.vec3.subtract(this._tmp2,a,c);e=n.vec3.subtract(this._tmp2,e,n.vec3.scale(this._tmp3,b,n.vec3.dot(b,e)));c=n.vec3.add(this._tmp2,c,n.vec3.scale(this._tmp2,e,f/n.vec3.length(e)));f=n.vec3.distance(a,c);2E5<=d&&(a=n.vec3.subtract(this._tmp1,a,c),a=n.vec3.dot(a,b)/n.vec3.length(a),.08>a&&(a=1E-4),f/=a);return f};d.prototype.getDistance=function(a,b){return this.engineSR===q.SphericalECEFSpatialReference?this.getDistanceGlobeMode(a,b):this.getDistancePlanarMode(a,b)};d.prototype._updateMinMaxDistance=
function(a){0<a?(this.minDistance=Math.min(this.minDistance,a),this.maxDistance=Math.max(this.maxDistance,a)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-a))};d.prototype.getLodLevel=function(a){if(0===a.lodMetric||!a.resources.hasFeatureData)return 0;if(0===a.childCount)return this.maxLodLevel;if(1>this.progressiveLoadFactor){var b=this.screenspaceErrorBias;return this.evaluateLODmetric(a,this.progressiveLoadFactor*this.screenspaceErrorBias)?this.evaluateLODmetric(a,b)?2:1:0}return this.evaluateLODmetric(a,
this.screenspaceErrorBias)?this.maxLodLevel:0};d.prototype.evaluateLODmetric=function(a,b){switch(a.lodMetric){case 2:var c=this.getRenderMbs(a),d=this.getDistance(this._camPos,c),e=2*d/this._screenSizeFactor;this._updateMinMaxDistance(d+c[3]);return a.maxError*b<=e;case 1:return b=this.screenSpaceDiameterMbs(a,a.mbs[3]*b),this.options.angleDependentLoD&&(b*=this.calcAngleDependentLoD(a)),b<a.maxError;case 3:return 10>this.screenSpaceDiameterMbs(a,a.maxError)*b;case 4:return this.calcCameraDistance(a)>
a.maxError*b}return!1};d.prototype.distToPOI=function(a){a=this.getRenderMbs(a);return n.vec3.distance(a,this._poi)-a[3]};d.prototype.distCameraToPOI=function(){return n.vec3.distance(this._camPos,this._poi)};return d}()})},"esri/views/3d/layers/SceneLayerWorker":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array ../../../core/Error ../../../core/promiseUtils ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/quat ../../../core/libs/gl-matrix-2/quatf32 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/SpatialReference ../../../geometry/support/meshUtils/deduplicate ../../../libs/draco/DracoDecoder ./i3s/I3SBinaryReader ./i3s/I3SGeometryUtil ./i3s/I3SProjectionUtil ./i3s/I3SUtil ../support/orientedBoundingBox ../support/projectionUtils ../webgl-engine/lib/PreinterleavedGeometryData ../webgl-engine/lib/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C){function F(a,c,d,e){var f=H._malloc(4*a),g=c.GetAttribute(d,e);if(!c.GetAttributeFloatArrayForAllPoints(d,g,f,a))throw new b("draco:decode_error","Error while getting attribute values",{attributeId:e});a=(new Float32Array(H.HEAPU8.buffer,f,a)).slice();H._free(f);return a}function E(a,b){var c=a.data,d=a.strideIdx,e=c.length/d,f=0;a=a.offsetIdx;for(var g=0;g<e;g++)g>=b[f+1]&&f++,c[a]=f,a+=d}r=function(){function d(){}d.prototype.process=function(a){return l(this,
void 0,void 0,function(){var b,c;return n(this,function(e){switch(e.label){case 0:return[4,d.ensureDracoDecoder(a)];case 1:return e.sent(),b=[a.geometryBuffer],c=this.transform(a,b),[2,{result:c,transferList:b}]}})})};d.prototype.transform=function(d,e){var f,h,l;if(null==d.geometryIndex.header){var n=[],p=d.layouts[0],r=d.geometryBuffer,t=new H.DecoderBuffer;t.Init(new Int8Array(r),r.byteLength);var I=new H.Decoder,G=new H.Mesh,P=I.DecodeBufferToMesh(t,G);if(!P.ok())throw H.destroy(G),H.destroy(I),
H.destroy(t),new b("draco:decode_error","Error while decoding draco geometry",{message:P.error_msg()});var S=new H.DracoInt32Array,V=new H.MetadataQuerier,na=I.GetAttributeIdByMetadataEntry(G,"i3s-attribute-type","feature-index"),pa=I.GetAttributeMetadata(G,na);V.GetIntEntryArray(pa,"i3s-feature-ids",S);var ta=S.size(),aa=H._malloc(4*ta);if(!S.GetArray(aa,ta))throw"GetArray failed";var ga=(new Uint32Array(H.HEAPU8.buffer,aa,ta)).slice();H._free(aa);var ia=G.num_points(),sa=3*G.num_faces(),Aa=65536>
ia,aa=H._malloc(sa*(Aa?2:4));if(Aa?!I.GetTrianglesUInt16Array(G,aa,sa):!I.GetTrianglesUInt32Array(G,aa,sa))throw"GetTrianglesArray failed";var Ba=Aa?(new Uint16Array(H.HEAPU8.buffer,aa,sa)).slice():(new Uint32Array(H.HEAPU8.buffer,aa,sa)).slice();H._free(aa);var Ca=H._malloc(4*ia),Ia=I.GetAttribute(G,na);if(!I.GetAttributeUInt32ArrayForAllPoints(G,Ia,Ca,ia))throw new b("draco:decode_error","Error while getting attribute values",{attributeId:na});var ra=(new Uint32Array(H.HEAPU8.buffer,Ca,ia)).slice();
H._free(Ca);for(var wa=[],xa=0;xa<Ba.length;++xa){for(var va=Ba[xa],ua=ra[va];wa.length<=ua;)wa.push([]);wa[ua].push(va)}for(var Ka=0,ea=new Uint32Array(wa.length+1),xa=0;xa<wa.length;++xa){var Oa=wa[xa];ea[xa]=Ka;for(var eb=0,Qa=Oa;eb<Qa.length;eb++)va=Qa[eb],Ba[Ka++]=va}ea[wa.length]=Ka;var A=new Float32Array(p[0].stride/Float32Array.BYTES_PER_ELEMENT*ia),ma=new B(A,p,null,ea,Ba),Ya=I.GetAttributeId(G,H.POSITION),Xa=F(3*ia,I,G,Ya),ya=ma.getAttribute(C.VertexAttrConstants.POSITION),Pa=I.GetAttributeMetadata(G,
Ya),Da=V.GetDoubleEntry(Pa,"i3s-scale_x"),ka=V.GetDoubleEntry(Pa,"i3s-scale_y"),Da=0>=Da?1:Da,ka=0>=ka?1:ka,Fa=ma.getAttribute(C.VertexAttrConstants.COLOR),oa=I.GetAttributeId(G,H.COLOR),La=-1!==oa,ba;if(La){var Ea=4*ia,Ha=H._malloc(Ea),Ga=I.GetAttribute(G,oa);if(!I.GetAttributeUInt8ArrayForAllPoints(G,Ga,Ha,Ea))throw new b("draco:decode_error","Error while getting attribute values",{attributeId:oa});var qa=(new Uint8Array(H.HEAPU8.buffer,Ha,Ea)).slice();H._free(Ha);ba=qa}else ba=k.fill(Array(4*ia),
255);for(var za=ba,fa=0;fa<ia;fa++){var yb=fa*ya.strideIdx+ya.offsetIdx;ya.data[yb]=Xa[3*fa]*Da;ya.data[yb+1]=Xa[3*fa+1]*ka;ya.data[yb+2]=Xa[3*fa+2];var Ib=fa*Fa.strideIdx+Fa.offsetIdx;Fa.data[Ib]=za[4*fa];Fa.data[Ib+1]=za[4*fa+1];Fa.data[Ib+2]=za[4*fa+2];Fa.data[Ib+3]=za[4*fa+3]}var cc=I.GetAttributeId(G,H.NORMAL),ub=ma.getAttribute(C.VertexAttrConstants.NORMAL);if(-1!==cc&&ub)for(var tb=F(3*ia,I,G,cc),fa=0;fa<ia;fa++){var gb=fa*ub.strideIdx+ub.offsetIdx;ub.data[gb]=tb[3*fa];ub.data[gb+1]=tb[3*fa+
1];ub.data[gb+2]=tb[3*fa+2]}else d.needNormals&&ub&&x.computeCompressedNormals({normals:ma.getAttribute(C.VertexAttrConstants.NORMALCOMPRESSED),positions:ma.getAttribute(C.VertexAttrConstants.POSITION),normalInd:ma.getIndices(C.VertexAttrConstants.NORMALCOMPRESSED),positionInd:ma.getIndices(C.VertexAttrConstants.POSITION)});var ab=I.GetAttributeId(G,H.TEX_COORD),Za=ma.getAttribute(C.VertexAttrConstants.UV0);if(-1!==ab&&Za)for(var zb=F(2*ia,I,G,ab),fa=0;fa<ia;fa++)gb=fa*Za.strideIdx+Za.offsetIdx,Za.data[gb]=
zb[2*fa],Za.data[gb+1]=zb[2*fa+1];var hb=I.GetAttributeIdByMetadataEntry(G,"i3s-attribute-type","uv-region"),Ab=ma.getAttribute(C.VertexAttrConstants.REGION);if(-1!==hb&&Ab){var Qb=4*ia,$a=H._malloc(2*Qb),pb=I.GetAttribute(G,hb);if(!I.GetAttributeUInt16ArrayForAllPoints(G,pb,$a,Qb))throw new b("draco:decode_error","Error while getting attribute values",{attributeId:hb});var bb=(new Uint16Array(H.HEAPU8.buffer,$a,Qb)).slice();H._free($a);for(fa=0;fa<ia;fa++)gb=fa*Ab.strideIdx+Ab.offsetIdx,Ab.data[gb]=
bb[4*fa],Ab.data[gb+1]=bb[4*fa+1],Ab.data[gb+2]=bb[4*fa+2],Ab.data[gb+3]=bb[4*fa+3]}var nb=ma.getAttribute(C.VertexAttrConstants.COMPONENTINDEX);nb&&E(nb,ea);H.destroy(V);H.destroy(S);H.destroy(G);H.destroy(I);H.destroy(t);var Jb=d.mbs,fc=d.elevationOffset,qb=q.fromJSON(d.indexSR),cb=q.fromJSON(d.vertexSR),Kb=q.fromJSON(d.renderSR),jb=w.computeGlobalTransformation(Jb,fc,qb,Kb);g.mat4.invert(N,jb);var gc=ma.getAttribute(C.VertexAttrConstants.POSITION),Rb={globalTrafo:jb},Db=A.buffer;w.reprojectPoints(gc,
Jb,N,fc,qb,cb,Kb);var Vb=x.extractPositionData(Db,p,Ba);n.push({layout:p,interleavedVertexData:Db,indices:Ba,corMatrices:Rb,hasColors:La,positionData:Vb});e&&(e.push(Db),e.push(Ba.buffer));l={geometryBuffer:r,componentOffsets:ea,featureIds:ga,transformedGeometries:n,obb:null}}else{var M=d.geometryData,Ja=d.geometryIndex,Eb=d.layouts,Va=d.mbs,Nb=d.elevationOffset,ha=q.fromJSON(d.indexSR),Lb=q.fromJSON(d.renderSR),Mb=w.computeGlobalTransformation(Va,Nb,ha,Lb);g.mat4.invert(N,Mb);var oc=d.geometryBuffer;
M.geometries[0].params.vertexAttributes=Ja.vertexAttributes;var fd,Yc,Ac=Ja.featureAttributes;if(Ac){if(Ac.faceRange){var vd=y.createTypedView(oc,Ac.faceRange);fd=m.convertFlatRangesToOffsets(vd,Ac.faceRange.count,Ac.faceRange.valuesPerElement)}var dc=Ac.id;if(dc){Yc=new Uint32Array(dc.count);var Oc=1,wc=y.valueType2TypedArrayClassMap[dc.valueType];"UInt64"===dc.valueType&&(wc=Uint32Array,Oc=2);for(var Hc=new wc(oc,dc.byteOffset,dc.count*dc.valuesPerElement*Oc),pc=0;pc<dc.count;pc++){var qc=pc*dc.valuesPerElement*
Oc;Yc[pc]=Hc[qc];if(2===Oc&&0!==Hc[qc+1])throw Error("ID exceeded maximum range supported (2^32))");}}}f=fd;h=Yc;e&&(h&&e.push(h.buffer),f&&e.push(f.buffer));var Hb=d.obb?null:u.create([0,0,0],[-1,-1,-1],[0,0,0,1]);a.vec3.copy(L,Va);L[2]+=Nb;a.vec3.copy(K,L);for(var Ob=!1,jc=0,zc=[],Dc=0,Wb=M.geometries;Dc<Wb.length;Dc++){var Ic=Wb[Dc],Xb=Eb[jc];++jc;var Jc=d.geometryBuffer,Yb=x.interleaveGeometryBuffer(Ic,Jc,Xb,[{name:C.VertexAttrConstants.COLOR,byteValue:255}],[C.VertexAttrConstants.NORMAL,C.VertexAttrConstants.NORMALCOMPRESSED,
C.VertexAttrConstants.SYMBOLCOLOR,C.VertexAttrConstants.COMPONENTINDEX]),Sb=new B(new Float32Array(Yb),Xb),Ec=Sb.getAttribute(C.VertexAttrConstants.POSITION),Uc=d.mbs,Vc=d.elevationOffset,id=q.fromJSON(d.indexSR),yd=q.fromJSON(d.vertexSR),hd=q.fromJSON(d.renderSR);w.reprojectPoints(Ec,Uc,N,Vc,id,yd,hd);if(Hb){var Cb=Hb,Ub=Ec,ec=Mb;if(0<Cb.halfSize[0]){a.vec3.subtract(L,Cb.center,Cb.halfSize);a.vec3.add(K,Cb.center,Cb.halfSize);for(var Fb=Ub.offsetIdx;Fb<Ub.data.length;Fb+=Ub.strideIdx)L[0]=Math.min(L[0],
Ub.data[Fb]),L[1]=Math.min(L[1],Ub.data[Fb+1]),L[2]=Math.min(L[2],Ub.data[Fb+2]),K[0]=Math.max(K[0],Ub.data[Fb]),K[1]=Math.max(K[1],Ub.data[Fb+1]),K[2]=Math.max(K[2],Ub.data[Fb+2]);a.vec3.subtract(Cb.halfSize,K,L);a.vec3.scale(Cb.halfSize,Cb.halfSize,.5);a.vec3.add(Cb.center,L,K);a.vec3.scale(Cb.center,Cb.center,.5)}else{u.compute(Ub,Cb);var xc=2*Math.sqrt(1+ec[0]+ec[5]+ec[10]);O[0]=(ec[9]-ec[6])/xc;O[1]=(ec[2]-ec[8])/xc;O[2]=(ec[4]-ec[1])/xc;O[3]=.25*xc;c.quat.conjugate(O,O);c.quat.multiply(Cb.quaternion,
O,Cb.quaternion)}}if(d.needNormals){var zd={normals:Sb.getAttribute(C.VertexAttrConstants.NORMALCOMPRESSED),positions:Ec,normalInd:Sb.getIndices(C.VertexAttrConstants.NORMALCOMPRESSED),positionInd:Sb.getIndices(C.VertexAttrConstants.POSITION)};x.processAndInterleaveNormals(d.normalReferenceFrame,Ic,Jc,Mb,zd)}var jd=Sb.getAttribute(C.VertexAttrConstants.COMPONENTINDEX);jd&&E(jd,f);var Gc=Sb.getAttribute(C.VertexAttrConstants.COLOR);if(Gc&&!Ob)a:{for(var gd=Gc.data,wd=Gc.size,xd=Gc.strideIdx,Cc=Gc.offsetIdx;Cc<
gd.length;Cc+=xd)for(var W=0;W<wd;W++)if(255!==gd[Cc+W]){Ob=!0;break a}Ob=!1}var Sa={globalTrafo:Mb},uc=Xb[0].stride,Na=v.default(Yb,uc/4,null,1-.8*uc/(uc+4));if(null!=Na){var Ta=65536>Na.uniqueCount?new Uint16Array(Na.indices):Na.indices,Ua=x.extractPositionData(Na.buffer,Xb,Ta);zc.push({layout:Xb,interleavedVertexData:Na.buffer,indices:Ta,corMatrices:Sa,hasColors:Ob,positionData:Ua});e&&(e.push(Na.buffer),e.push(Ta.buffer),e.push(Ua.data.buffer),e.push(Ua.indices.buffer))}else Ua=x.extractPositionData(Yb,
Xb),zc.push({layout:Xb,interleavedVertexData:Yb,corMatrices:Sa,hasColors:Ob,positionData:Ua}),e&&(e.push(Yb),e.push(Ua.data.buffer),e.push(Ua.indices.buffer));Hb&&(a.vec3.transformMat4(Hb.center,Hb.center,Mb),z.vectorToVector(Hb.center,hd,Hb.center,id),Hb.center[2]-=d.elevationOffset)}l={geometryBuffer:oc,componentOffsets:f,featureIds:h,transformedGeometries:zc,obb:Hb}}return l};return d}();(function(a){a.ensureDracoDecoder=function(a){if(H&&H.DecoderBuffer||a&&null!=a.geometryIndex.header)return h.resolve();
I||(I=t.getDecoderModule().then(function(a){H=a;I=null;return H}));return I.then(function(){})}})(r||(r={}));var N=e.mat4f64.create(),L=p.vec3f64.create(),K=p.vec3f64.create(),O=f.quatf32.create(),I,H;return r})},"esri/views/3d/layers/i3s/I3SGeometryUtil":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/promiseUtils ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f32 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/meshUtils/deduplicate ./I3SBinaryReader ../../support/projectionUtils ../../webgl-engine/lib/Util".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a,b,c,d,e,f,g){switch(c){case 1:for(c=0;c<g;c++)d[e]=a[b],b+=1,e+=f;break;case 2:for(c=0;c<g;c++)d[e]=a[b],d[e+1]=a[b+1],b+=2,e+=f;break;case 3:for(c=0;c<g;c++)d[e]=a[b],d[e+1]=a[b+1],d[e+2]=a[b+2],b+=3,e+=f;break;case 4:for(c=0;c<g;c++)d[e]=a[b],d[e+1]=a[b+1],d[e+2]=a[b+2],d[e+3]=a[b+3],b+=4,e+=f;break;default:throw w("Unhandled stride size "+c);}}function v(a,b,c,d,e,f){switch(b){case 1:for(b=0;b<f;b++)c[d]=a,d+=e;break;case 2:for(b=0;b<f;b++)c[d]=
a,c[d+1]=a,d+=e;break;case 3:for(b=0;b<f;b++)c[d]=a,c[d+1]=a,c[d+2]=a,d+=e;break;case 4:for(b=0;b<f;b++)c[d]=a,c[d+1]=a,c[d+2]=a,c[d+3]=a,d+=e;break;default:throw w("Unhandled stride size "+b);}}function t(a){switch(a){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+a);}function y(a){switch(a){case 5120:return"Int8";
case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw Error("Unhandled data type: "+a);}function x(a){return 0<a&&0===a%Uint32Array.BYTES_PER_ELEMENT}function w(a){return Error("I3SGeometryUtil processing failed: "+a)}function m(a){var c=a.normals,d=a.positions,e=a.normalInd,f=a.positionInd;p.assert(a.normalInd.length===a.positionInd.length);a=g.vec3f32.create();for(var k=g.vec3f32.create(),l=b.vec2f32.create(),
m=d.data,n=d.offsetIdx,d=d.strideIdx,q=c.data,r=c.offsetIdx,c=c.strideIdx,u=0;u<f.length;u+=3){var t=f[u],t=n+d*t,v=m[t],w=m[t+1],x=m[t+2],t=f[u+1],t=n+d*t;a[0]=m[t]-v;a[1]=m[t+1]-w;a[2]=m[t+2]-x;t=f[u+2];t=n+d*t;k[0]=m[t]-v;k[1]=m[t+1]-w;k[2]=m[t+2]-x;h.vec3.cross(a,a,k);p.encodeNormal(a,l);for(v=0;3>v;v++)w=r+c*e[u+v],q[w]=p.encodeInt16(l[0]),q[w+1]=p.encodeInt16(l[1])}}function u(a,b){switch(b){case 0:switch(a.type){case "intersects":case "contains":case "crosses":case "envelope-intersects":case "overlaps":case "touches":case "within":return 1;
case "disjoint":return 0}break;case 2:switch(a.type){case "intersects":case "contains":case "envelope-intersects":case "within":return 0;case "disjoint":case "crosses":case "overlaps":case "touches":return 1}break;case 1:switch(a.type){case "envelope-intersects":return 0}}return 2}function z(a,b){return C.contains(a.mask,b)?2:C.intersects(a.mask,b)?1:0}Object.defineProperty(d,"__esModule",{value:!0});var B=new Uint8Array(64);d.interleaveGeometryBuffer=function(a,b,c,d,e){void 0===d&&(d=[]);void 0===
e&&(e=[]);var f=a.params.vertexAttributes,g=f.position.count;if(!x(c[0].stride))throw w("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var h=new Uint32Array(c[0].stride/Uint32Array.BYTES_PER_ELEMENT*g);c=c.slice(0).sort(function(a,b){return a.offset-b.offset});a=function(a){if(-1!==e.indexOf(a.name))return"continue";var c=f[a.name],k=t(a.type),l=void 0,m=!1;if(null==c)if(m=d.filter(function(b){return b.name===a.name})[0]){c={valueType:y(a.type),byteOffset:0,count:g,valuesPerElement:a.count};
for(l=0;l<B.length;l++)B[l]=m.byteValue;l=B.buffer;m=!0}else throw w("Geometry definition is missing attribute");else l=b;if(y(a.type)!==c.valueType)throw w("Geometry definition type must match attribute type");if(0!==c.byteOffset%Uint32Array.BYTES_PER_ELEMENT||0!==a.offset%Uint32Array.BYTES_PER_ELEMENT)throw w(a.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!x(c.valuesPerElement*k.BYTES_PER_ELEMENT)||!x(a.count*k.BYTES_PER_ELEMENT))throw w(a.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+
"-byte words");var l=new Uint32Array(l),n=c.byteOffset/Uint32Array.BYTES_PER_ELEMENT,c=c.valuesPerElement*k.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,k=a.offset/Uint32Array.BYTES_PER_ELEMENT,p=a.stride/Uint32Array.BYTES_PER_ELEMENT;m?v(l[0],c,h,k,p,g):q(l,n,c,h,k,p,g)};for(var k=0;k<c.length;k++)a(c[k]);return h.buffer};d.processAndInterleaveNormals=function(a,b,c,d,e){if("none"===a)m(e);else{b=f.createTypedView(c,b.params.vertexAttributes.normal);c=e.normals;var g="earth-centered"===a?d:null;
a=b.length/3;d=c.data;e=c.offsetIdx;c=c.strideIdx;if(null!=g)for(var h=g[0],k=g[1],l=g[2],n=g[4],q=g[5],r=g[6],u=g[8],t=g[9],g=g[10],v=0;v<a;v++){var w=b[3*v],x=b[3*v+1],y=b[3*v+2];N[0]=h*w+k*x+l*y;N[1]=n*w+q*x+r*y;N[2]=u*w+t*x+g*y;p.encodeNormal(N,L);d[e+v*c]=p.encodeInt16(L[0]);d[e+v*c+1]=p.encodeInt16(L[1])}else for(v=0;v<a;v++)N[0]=b[3*v],N[1]=b[3*v+1],N[2]=b[3*v+2],p.encodeNormal(N,L),d[e+v*c]=p.encodeInt16(L[0]),d[e+v*c+1]=p.encodeInt16(L[1])}};d.computeCompressedNormals=m;d.extractPositionData=
function(a,b,d){var e=b[0];if(null==e||"position"!==e.name||5126!==e.type)return null;a=new Float32Array(a);b=e.stride/4;for(var e=e.offset/4,f=3*a.length/b,g=new Float32Array(f),h=0;h<f/3;h++)g[3*h]=a[h*b+e],g[3*h+1]=a[h*b+e+1],g[3*h+2]=a[h*b+e+2];d=c.default(g.buffer,3,d);return 65536>d.uniqueCount?{data:new Float32Array(d.buffer),indices:new Uint16Array(d.indices)}:{data:new Float32Array(d.buffer),indices:d.indices}};var C;d.isGeometryEngineLoaded=function(){return!!C};d.loadGeometryEngine=function(){return l(this,
void 0,void 0,function(){return n(this,function(a){switch(a.label){case 0:return C?[2,C]:[4,k.create(function(a,b){return r(["../../../../geometry/geometryEngine"],a)})];case 1:return C=a.sent(),[2,C]}})})};d.acquireMaskFilterContext=function(a,b,c,d){var e=c.spatialReference||b.spatialReference;b=b.renderSpatialReference;var f={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:e};f.rings[0][4]=f.rings[0][0];var g=d.objectTransformation;d=d.getGeometryRecords()[0].geometry;
var h={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:e};h.rings[0][3]=h.rings[0][0];var k=C[a];k||(console.error("Spatial relationship",a,"not supported"),k=function(){return!0});return{type:a,mask:c,maskSR:e,renderSR:b,aabb:f,transform:g,geometry:d,triangle:h,testFunction:k}};d.getIntersectRelation=u;d.intersectMaskWithMbs=function(a,b){b=C.buffer({x:b[0],y:b[1],hasZ:!1,hasM:!1,type:"point",spatialReference:a.maskSR},b[3],1,!0);return z(a,b)};var F=Math.pow(2,
-32);d.filterMask=function(b,c){var d=c.type,e=c.mask,f=c.transform,g=c.renderSR,k=c.maskSR,l=c.geometry,m=c.triangle,n=c.testFunction,q=c.aabb;l.getComponentAABB(b,E);var r=[q.rings[0][0],q.rings[0][1],q.rings[0][2],q.rings[0][3]];h.vec3.set(r[0],E[0],E[1],0);h.vec3.set(r[1],E[0],E[4],0);h.vec3.set(r[2],E[3],E[4],0);h.vec3.set(r[3],E[3],E[1],0);for(var t=0;4>t;++t)h.vec3.transformMat4(r[t],r[t],f),a.vectorToVector(r[t],g,r[t],k);delete q._geVersion;t=z(c,q);switch(u(c,t)){case 1:return!1;case 0:return!0}c=
m.rings[0][0];var q=m.rings[0][1],r=m.rings[0][2],v=l.data.getIndices(p.VertexAttrConstants.POSITION),t=l.data.componentOffsets,w=l.data.getAttribute(p.VertexAttrConstants.POSITION),l=w.data,x=w.offsetIdx,w=w.strideIdx,y=t.length?t[b]:0;b=t.length?t[b+1]:v.length;var B;switch(d){case "intersects":case "crosses":case "envelope-intersects":case "index-intersects":case "overlaps":case "touches":B=function(){return n(e,m)?0:2};break;default:B=function(){return n(e,m)?2:1}}for(t=y;t<b;t+=3){var y=x+w*
v[t+0],C=x+w*v[t+1],K=x+w*v[t+2];h.vec3.set(c,l[y+0],l[y+1],l[y+2]);h.vec3.set(q,l[C+0],l[C+1],l[C+2]);h.vec3.set(r,l[K+0],l[K+1],l[K+2]);h.vec3.transformMat4(c,c,f);h.vec3.transformMat4(q,q,f);h.vec3.transformMat4(r,r,f);a.vectorToVector(c,g,c,k);a.vectorToVector(q,g,q,k);a.vectorToVector(r,g,r,k);if(!(Math.abs((q[0]-c[0])*(r[1]-c[1])-(q[1]-c[1])*(r[0]-c[0]))<F))switch(delete m._geVersion,B()){case 1:return!1;case 0:return!0}}switch(d){case "intersects":case "crosses":case "envelope-intersects":case "index-intersects":case "overlaps":case "touches":return!1;
default:return!0}};var E=e.create(),N=g.vec3f32.create(),L=b.vec2f32.create()})},"esri/views/3d/layers/i3s/I3SProjectionUtil":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/earthUtils ../../support/projectionUtils ../../webgl-engine/lib/localOrigin".split(" "),function(r,d,n,l,k,b,h,g){function e(c,d,e){var f=k.vec3f64.create(),g=Math.ceil(Math.log(c[3])*Math.LOG2E/p),h=Math.pow(2,
g*p+a),l;if(e.isGeographic){l=h/b.earthRadius*180/Math.PI;e=Math.round(c[1]/l);var n=Math.max(-90,Math.min(90,e*l)),q=l/Math.cos((Math.abs(n)-l/2)/180*Math.PI);l=Math.round(c[0]/q);f[0]=l*q;f[1]=n}else l=Math.round(c[0]/h),e=Math.round(c[1]/h),f[0]=l*h,f[1]=e*h;c=Math.round((c[2]+d)/h);f[2]=c*h;return{center:f,id:g+"_"+l+"_"+e+"_"+c}}Object.defineProperty(d,"__esModule",{value:!0});var c=new Float64Array(3E3),f=k.vec3f64.create();d.computeGlobalTransformation=function(a,b,c,d){a=e(a,b,c).center;b=
n.mat4f64.create();h.computeLinearTransformation(c,a,b,d);return b};d.reprojectPoints=function(a,b,d,e,g,k,m){var n=a.data,p=a.offsetIdx;a=a.strideIdx;l.vec3.copy(f,b);f[2]+=e;b=[0,0,0];e=n.length/a;h.vectorToVector(f,g,b,k);for(g=0;g<e;g+=1E3){for(var q=Math.min(1E3,e-g),r=0;r<q;r++){var t=p+a*(g+r);c[3*r+0]=n[t+0]+b[0];c[3*r+1]=n[t+1]+b[1];c[3*r+2]=n[t+2]+b[2]}h.bufferToBuffer(c,k,0,c,m,0,q);for(r=0;r<q;r++){var t=c[3*r+0],v=c[3*r+1],w=c[3*r+2],x=p+a*(g+r);n[x+0]=d[0]*t+d[4]*v+d[8]*w+d[12];n[x+
1]=d[1]*t+d[5]*v+d[9]*w+d[13];n[x+2]=d[2]*t+d[6]*v+d[10]*w+d[14]}}};d.createOrigin=function(a,b,c,d){b=e(a,b,c);a=b.center;b=b.id;h.vectorToVector(a,c,a,d);return g.fromVector(a,b)};var a=1,p=5-a})},"esri/views/3d/layers/i3s/Highlights":function(){define(["require","exports","../../webgl-engine/lib/HighlightSet"],function(r,d,n){var l=function(){return function(d){this.highlightSet=new n;this.ids=new Set;this.paused=!1;this.options=d}}();return function(){function d(b){this.highlights=[];this.layerView=
b}d.prototype.destroy=function(){this.highlights.forEach(function(b){return b.highlightSet.removeAll()});this.highlights=null};d.prototype.acquireSet=function(b){var d=this,g=new l(b);this.highlights.push(g);return{set:g,handle:{remove:function(){return d.releaseSet(g)},pause:function(){g.highlightSet.removeAll();g.paused=!0},resume:function(){g.paused=!1;d.initializeSet(g)}}}};d.prototype.releaseSet=function(b){b.highlightSet.removeAll();b=this.highlights?this.highlights.indexOf(b):-1;-1!==b&&this.highlights.splice(b,
1)};d.prototype.setFeatureIds=function(b,d){d.forEach(function(d){return b.ids.add(d)});this.initializeSet(b)};d.prototype.initializeSet=function(b){this.layerView._forAllFeatures(function(d,g,e,c){b.ids.has(d)&&(d=e.engineObject.setComponentHighlight(c,g,b.options),b.highlightSet.addObject(e.engineObject,d));return 1},null,1)};d.prototype.objectCreated=function(b){var d=this;this.highlights.forEach(function(g){g.paused||d.layerView._forAllFeaturesOfNode(d.layerView._getMetadata(b),function(d,c,f,
a){g.ids.has(d)&&(d=b.setComponentHighlight(a,c,g.options),g.highlightSet.addObject(b,d));return 1},1)})};d.prototype.objectDeleted=function(b){this.highlights.forEach(function(d){d.highlightSet.removeObject(b)})};d.prototype.allObjectsDeleted=function(){this.highlights.forEach(function(b){return b.highlightSet.removeAll()})};return d}()})},"esri/views/3d/layers/i3s/I3SElevationProvider":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/Logger ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/aaBoundingRect ../../../../layers/graphics/dehydratedFeatures ../../webgl-engine/lib/Intersector".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){var q=f.empty(),v={spatialReference:null,extent:q},t=c.vec3f64.create(),y=c.vec3f64.create(),x=c.vec3f64.create(),w=h.getLogger("esri.views.3d.layers.i3s.I3SElevationProvider");return function(b){function c(a){return b.call(this)||this}n(c,b);c.prototype.initialize=function(){var a=this.layerView.view;this.view=a;this.renderCoordsHelper=a.renderCoordsHelper;this.intersectLayers=[this.stageLayer];this.intersector=new p(a.viewingMode);a=this.layerView.layer.fullExtent;
this.zmin=a.zmin;this.zmax=a.zmax};c.prototype.getElevation=function(b){if(a.isPoint(b)){if(!this.renderCoordsHelper.toRenderCoords(b,t))return w.error("could not project point for elevation alignment"),-Infinity}else if(!this.renderCoordsHelper.toRenderCoords(b,this.spatialReference,t))return w.error("could not project point for elevation alignment"),-Infinity;var c=this.layerView.elevationOffset;b=this.zmin+c;c=this.zmax+c;e.vec3.copy(y,t);e.vec3.copy(x,t);this.renderCoordsHelper.setAltitude(c,
y);this.renderCoordsHelper.setAltitude(b,x);this.intersector.intersect(this.intersectLayers,y,x,null,null,1,!1);return this.intersector.results.min.getIntersectionPoint(t)?this.renderCoordsHelper.getAltitude(t):-Infinity};c.prototype.layerChanged=function(){this.spatialReference&&(v.extent=this.computeLayerExtent(this.intersectLayers[0]),v.spatialReference=this.spatialReference,this.emit("elevation-change",v))};c.prototype.objectChanged=function(a){this.spatialReference&&(v.extent=this.computeObjectExtent(a),
v.spatialReference=this.spatialReference,this.emit("elevation-change",v))};c.prototype.computeObjectExtent=function(a){f.empty(q);this.expandExtent(a,q);return q};c.prototype.computeLayerExtent=function(a){f.empty(q);var b=0;for(a=a.getObjects();b<a.length;b++)this.expandExtent(a[b],q);return q};c.prototype.expandExtent=function(a,b){for(var c=a.getBBMin(!0),d=a.getBBMax(!0),g=0;8>g;++g)t[0]=g&1?c[0]:d[0],t[1]=g&2?c[1]:d[1],t[2]=g&4?c[2]:d[2],e.vec3.transformMat4(t,t,a.objectTransformation),this.renderCoordsHelper.fromRenderCoords(t,
t,this.spatialReference),f.expand(b,t);return b};l([g.property({constructOnly:!0})],c.prototype,"layerView",void 0);l([g.property({constructOnly:!0})],c.prototype,"stageLayer",void 0);l([g.property()],c.prototype,"view",void 0);l([g.property({readOnly:!0,aliasOf:"view.elevationProvider.spatialReference"})],c.prototype,"spatialReference",void 0);return c=l([g.subclass("esri.views.3d.layers.i3s.I3SElevationProvider")],c)}(g.declared(k,b))})},"esri/views/3d/layers/i3s/IDBCache":function(){define(["require",
"exports","../../../../core/Error","../../../../core/promiseUtils"],function(r,d,n,l){function k(b){return l.create(function(d,e){b.oncomplete=function(){return d()};b.onerror=function(){return e(b.error)};b.onabort=function(){return e(b.error)}})}function b(b){return l.create(function(d,e){"done"===b.readyState?null!=b.error?e(b.error):d(b.result):(b.onsuccess=function(){return d(b.result)},b.onerror=function(){return e(b.error)})})}Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b,
d,c){void 0===c&&(c=14);this._version=c;this._quotaReductionPromise=this._db=null;this._miss=this._hit=this._gcCounter=0;this._destroyed=!1;this.gcFrequency=50;this.maxByteSize=1073741824;this.quotaReductionFactor=.2;this._dbName=b;this._storeName=d}d.prototype.init=function(){var d=this;return l.resolve().then(function(){var e=indexedDB.open(d._dbName,d._version);e.onupgradeneeded=function(b){var c=e.result,a=e.transaction,g=c.objectStoreNames.contains(d._storeName)?a.objectStore(d._storeName):c.createObjectStore(d._storeName),
c=c.objectStoreNames.contains("last_access")?a.objectStore("last_access"):c.createObjectStore("last_access");c.indexNames.contains("date")||c.createIndex("date","date",{unique:!1});c.indexNames.contains("byteSize")||c.createIndex("byteSize","byteSize",{unique:!1});b.oldVersion<d._version&&(g.clear(),c.clear())};return b(e)}).then(function(b){d._destroyed?b.close():d._db=b})};d.prototype.destroy=function(){this._db&&(this._db.close(),this._db=null);this._destroyed=!0};Object.defineProperty(d.prototype,
"initialized",{get:function(){return null!=this._db},enumerable:!0,configurable:!0});d.prototype.getHitRate=function(){return this._hit/(this._hit+this._miss)};d.prototype.put=function(b,d){var c=this;return null==this._db?l.reject(new n("indexedb:not-initialized","IndexedDB Cache is not initialized")):(null!=this._quotaReductionPromise?this._quotaReductionPromise:l.resolve()).then(function(){return c._put(b,d)}).catch(function(e){if(e&&"QuotaExceededError"===e.name)return null==c._quotaReductionPromise&&
(c._quotaReductionPromise=c._getCacheSize().then(function(a){return c._removeLeastRecentlyAccessed(d.byteSize+Math.ceil(a*c.quotaReductionFactor))}),c._quotaReductionPromise.then(function(){return c._quotaReductionPromise=null},function(){return c._quotaReductionPromise=null})),c._quotaReductionPromise.then(function(){return c._put(b,d)});throw e;}).then(function(){c._gcCounter--;0>c._gcCounter&&null!=c._db&&(c._gcCounter=c.gcFrequency,c._getCacheSize().then(function(b){return c._removeLeastRecentlyAccessed(b-
c.maxByteSize)}))})};d.prototype.get=function(d){var e=this;return null==this._db?l.resolve(null):l.resolve().then(function(){var c=e._db.transaction(e._storeName,"readonly").objectStore(e._storeName).get(d);return b(c)}).then(function(b){null==b?++e._miss:e._db&&(++e._hit,e._db.transaction("last_access","readwrite").objectStore("last_access").put({date:Date.now(),byteSize:b.byteSize},d));return b}).catch(function(b){++e._miss;return null})};d.prototype.remove=function(d){var e=this;return null==
this._db?l.resolve():l.resolve().then(function(){var c=e._db.transaction([e._storeName,"last_access"],"readwrite"),f=c.objectStore(e._storeName),a=c.objectStore("last_access"),f=f.delete(d),a=a.delete(d);return l.all([b(f),b(a),k(c)])})};d.prototype._put=function(d,e){var c=this._db.transaction([this._storeName,"last_access"],"readwrite"),f=c.objectStore(this._storeName),a=c.objectStore("last_access"),f=f.put(e,d);d=a.put({date:Date.now(),byteSize:e.byteSize},d);return l.all([b(f),b(d),k(c)])};d.prototype._removeLeastRecentlyAccessed=
function(b){if(!(0>=b)){var d=this._db.transaction([this._storeName,"last_access"],"readwrite"),c=d.objectStore(this._storeName),f=d.objectStore("last_access"),a=0,g=f.index("date").openCursor(null,"next");g.onsuccess=function(d){d=g.result;null!=d&&(null!=d.value.byteSize&&(a+=d.value.byteSize),c.delete(d.primaryKey),f.delete(d.primaryKey),a<b&&d.continue())};return k(d)}};d.prototype._getCacheSize=function(){var b=this._db.transaction("last_access"),d=0,c=b.objectStore("last_access").index("byteSize").openKeyCursor();
c.onsuccess=function(b){if(b=c.result){var a=b.key;null!=a&&(d+=a);b.continue()}};return k(b).then(function(){return d})};return d}();d.IDBCache=r;d.whenTransaction=k;d.whenRequest=b})},"esri/views/3d/webgl-engine/materials/component/index":function(){define(["require","exports","./ComponentMaterial","./VertexBufferLayout"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});(function(d){d.create=function(b,d,g){return new n.ComponentMaterial(b,d,g)};d.vertexBufferLayout=l.createVertexBufferLayout})(d.ComponentMaterial||
(d.ComponentMaterial={}))})},"esri/views/3d/webgl-engine/materials/component/ComponentMaterial":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/maybe ../../lib/Material ./ComponentGLMaterial ./Parameters ./VertexBufferLayout ../internal/MaterialUtil ../renderers/PreinterleavedRenderer".split(" "),function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function b(b,c,
d){d=a.call(this,d)||this;d.supportsEdges=!0;d._parameters=g.fillDefaults(b);d._geometryParameters=c;return d}n(b,a);Object.defineProperty(b.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometryParameters",{get:function(){return this._geometryParameters},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasTransparency",{get:function(){var a=this._parameters.forceTransparency;if(k.isSome(a))return a;
if(1>this._parameters.baseColorOpacity||1>this._parameters.layerOpacity)return!0;a=this._parameters.componentData;return g.isUniformComponentData(a)&&"replace"===a.externalColorMixMode?1>a.externalColor[3]:!0},enumerable:!0,configurable:!0});b.prototype.isVisibleInPass=function(a){if(3!==a)return!0;a=this._parameters.componentData;return g.isUniformComponentData(a)?a.castShadows:!0};b.prototype.isVisible=function(){var b=this.parameters;if(!a.prototype.isVisible.call(this)||0===b.layerOpacity)return!1;
var c=b.componentData;return g.isUniformComponentData(c)?"replace"===c.externalColorMixMode?0<c.externalColor[3]:0<b.baseColorOpacity:!0};b.prototype.updateParameters=function(a){var b=!1,c;for(c in a){var d=a[c];this._parameters[c]!==d&&(b=!0,this._parameters[c]=d)}b&&this.notifyDirty("matChanged");return b};b.prototype.intersect=function(a,b,d,e,f,g,h){c.intersectTriangleGeometry(a,b,d,e,f,g,h)};b.prototype.getGLMaterials=function(){return{color:h.GLMaterialColor,depthShadowMap:h.GLMaterialDepthShadowMap,
normal:h.GLMaterialNormal,depth:h.GLMaterialDepth,highlight:h.GLMaterialHighlight}};b.prototype.createRenderer=function(a,b){return new f(a,b,this)};b.prototype.createBufferWriter=function(){throw Error("Not supported");};b.prototype.createBufferLayout=function(){return e.createVertexBufferLayout(this.geometryParameters)};return b}(b);d.ComponentMaterial=r})},"esri/views/3d/webgl-engine/materials/component/ComponentGLMaterial":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper ../../lib/AutoDisposable ../../lib/DefaultTextureUnits ../../lib/GLMaterial ./Parameters ../internal/MaterialUtil ../internal/MaterialUtil ../internal/TextureBinding ../../shaders/DefaultPrograms ../../../../webgl/renderState".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){function q(a){if(a.hasTransparency)return p.separateBlendingParams(770,1,771,771)}function v(a){if("none"!==a.parameters.cullFace)return{face:"front"===a.parameters.cullFace?1028:1029,mode:2305}}Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function h(a,c,e,g){e=d.call(this,c,e)||this;e._passName=a;e.material=c;e._baseColorTexture=new f.TextureBinding(g,c.parameters.baseColorTexture,{textureUniform:"tex",textureSizeUniform:"texSize",textureUnit:b.DefaultTextureUnits.DIFFUSE});
e.createPrograms();e.selectPipeline();e.selectSlot();return e}n(h,d);h.prototype.createPrograms=function(){var a=this;this.programs=e.BindParametersMap.create(this.material.parameters,function(b){return a._createProgram(b)})};h.prototype._createProgram=function(b){var c=this.material.parameters,d=this.material.geometryParameters,e=c.baseColorTexture?d.textureCoordinateRegions?"AtlasTextured":"Textured":"none",f="screen-space"===c.normals||"screen-space"===d.normals||"none"===d.normals?"screenDerivative":
"compressed"===d.normals?"compressed":"default";if("color"===this._passName)return this.programRep.getProgram(a.colorPass,{textureMode:e,colorTexture:!!c.baseColorTexture,vertexColors:d.colors,doubleSided:c.doubleSidedShading,groundNormalShading:"ground"===c.normals,normals:f,componentColor:d.componentData&&!g.isUniformComponentData(c.componentData),textureAlphaMode:"maskBlend",slice:c.slicePlaneEnabled,receiveShadows:b.receiveShadows,receiveSSAO:b.receiveSSAO});if("depth"===this._passName||"depthShadowMap"===
this._passName)return this.programRep.getProgram(a.depthPass,{textureMode:e,colorTexture:!!c.baseColorTexture,vertexColors:d.colors,groundNormalShading:"ground"===c.normals,normals:f,componentColor:d.componentData&&!g.isUniformComponentData(c.componentData),textureAlphaMode:"maskBlend",shadowMap:"depthShadowMap"===this._passName,slice:c.slicePlaneEnabled});if("normal"===this._passName)return this.programRep.getProgram(a.normalPass,{textureMode:e,colorTexture:!!c.baseColorTexture,vertexColors:d.colors,
groundNormalShading:"ground"===c.normals,normals:f,componentColor:d.componentData&&!g.isUniformComponentData(c.componentData),textureAlphaMode:"maskBlend",slice:c.slicePlaneEnabled});if("highlight"===this._passName)return this.programRep.getProgram(a.highlightPass,{textureMode:e,colorTexture:!!c.baseColorTexture,vertexColors:d.colors,groundNormalShading:"ground"===c.normals,normals:f,componentColor:d.componentData&&!g.isUniformComponentData(c.componentData),textureAlphaMode:"maskBlend",slice:c.slicePlaneEnabled})};
h.prototype.selectPipeline=function(){var a=this.material.parameters;this.pipelineState="color"===this._passName?p.makePipelineState({blending:q(this.material),culling:v(this.material),polygonOffset:a.polygonOffsetEnabled&&x,stencilTest:a.writeStencil&&{function:{func:a.readStencil?517:519,ref:1,mask:255},operation:{fail:7680,zFail:7680,zPass:7681}},stencilWrite:a.writeStencil&&{mask:255},depthTest:{func:513},depthWrite:p.defaultDepthWriteParams,colorWrite:p.defaultColorWriteParams}):p.makePipelineState({culling:v(this.material),
polygonOffset:a.polygonOffsetEnabled&&x,depthTest:{func:513},depthWrite:p.defaultDepthWriteParams,colorWrite:p.defaultColorWriteParams})};h.prototype.selectSlot=function(){this.slot=this.material.hasTransparency?7:this.material.parameters.readStencil?3:this.material.parameters.writeStencil?2:5};h.prototype.beginSlot=function(a){return a===this.slot};h.prototype.getProgram=function(){return this.program||this.getPrograms()[0]};h.prototype.getPrograms=function(){return e.BindParametersMap.programs(this.programs)};
h.prototype.updateParameters=function(){this._baseColorTexture.update(this.material.parameters.baseColorTexture);this.createPrograms();this.selectPipeline();this.selectSlot()};h.prototype.bind=function(a,d){var f=this.material.parameters,h=this.program=e.BindParametersMap.lookup(this.programs,d);a.bindProgram(h);a.setPipelineState(this.pipelineState);h.setUniform3fv("ambient",f.baseColor);h.setUniform3fv("diffuse",f.baseColor);h.setUniform3fv("specular",y);h.setUniform1f("opacity",f.baseColorOpacity);
h.setUniform1f("layerOpacity",f.layerOpacity);g.isUniformComponentData(f.componentData)?(h.setUniform4fv("externalColor",f.componentData.externalColor),h.setUniform1i("colorMixMode",c.colorMixModes[f.componentData.externalColorMixMode])):(h.setUniform4fv("externalColor",t),h.setUniform1i("colorMixMode",c.colorMixModes.multiply),this.material.geometryParameters.componentData&&(f.componentData.updateTexture(),f.componentData.bind(h,{texName:"uComponentColorTex",invDimName:"uComponentColorTexInvDim",
unit:b.DefaultTextureUnits.COMPONENT_COLOR})));this._baseColorTexture.bind(a,h);h.setUniform1f("textureAlphaCutoff",.1);"depth"!==this._passName&&"depthShadowMap"!==this._passName||h.setUniform2fv("nearFar",d.nearFar);"highlight"===this._passName&&c.bindHighlightRendering(a,d,h)};h.prototype.bindView=function(a,b){a=this.material.parameters;var d=this.program=e.BindParametersMap.lookup(this.programs,b),f=b.origin;c.bindView(f,b.view,d);c.bindCamPos(f,b.viewInvTransp,d);a.slicePlaneEnabled&&c.bindSlicePlane(f,
b.slicePlane,d);"color"===this._passName&&b.shadowMappingEnabled&&b.shadowMap.bindView(d,f);"normal"===this._passName&&d.setUniformMatrix4fv("viewNormal",b.viewInvTransp)};h.prototype.bindInstance=function(a,b){a=this.program;a.setUniformMatrix4fv("model",b.transformation);a.setUniformMatrix4fv("modelNormal",b.transformationNormal)};l([k.autoDispose()],h.prototype,"_baseColorTexture",void 0);return h}(h);h=function(a){function b(b,c,d){c=a.call(this,"color",b,c,d)||this;c.material=b;return c}n(b,
a);return b}(r);d.GLMaterialColor=h;h=function(a){function b(b,c,d){c=a.call(this,"depth",b,c,d)||this;c.material=b;return c}n(b,a);return b}(r);d.GLMaterialDepth=h;h=function(a){function b(b,c,d){c=a.call(this,"depthShadowMap",b,c,d)||this;c.material=b;return c}n(b,a);return b}(r);d.GLMaterialDepthShadowMap=h;h=function(a){function b(b,c,d){c=a.call(this,"normal",b,c,d)||this;c.material=b;return c}n(b,a);return b}(r);d.GLMaterialNormal=h;r=function(a){function b(b,c,d){c=a.call(this,"highlight",
b,c,d)||this;c.material=b;return c}n(b,a);return b}(r);d.GLMaterialHighlight=r;var t=[1,1,1,1],y=[0,0,0],x={factor:2,units:2}})},"esri/views/3d/webgl-engine/materials/component/Parameters":function(){define(["require","exports","../../../../../core/tsSupport/assignHelper","../../lib/TextureBackedBuffer/TextureBackedBuffer"],function(r,d,n,l){Object.defineProperty(d,"__esModule",{value:!0});d.isUniformComponentData=function(b){return!(b instanceof l.TextureBackedBuffer)};d.fillDefaults=function(d){return n({baseColor:k,
baseColorOpacity:1,baseColorTexture:null,doubleSidedShading:!1,normals:"screen-space",cullFace:"back",componentData:b,receiveSSAO:!0,forceTransparency:null,slicePlaneEnabled:!1,polygonOffsetEnabled:!1,writeStencil:!1,readStencil:!1,layerOpacity:1},d)};var k=[1,1,1],b={externalColor:[1,1,1,1],externalColorMixMode:"multiply",castShadows:!0}})},"esri/views/3d/webgl-engine/materials/internal/TextureBinding":function(){define(["require","exports","../../../../../core/maybe"],function(r,d,n){Object.defineProperty(d,
"__esModule",{value:!0});r=function(){function d(d,b,h){var g=this;this._textureRep=d;this._textureId=b;this._options=h;this._textureRef=n.applySome(this._textureId,function(b){return g._textureRep.acquire(b,!!g._options.initTransparent)})}d.prototype.dispose=function(){var d=this;this._textureRef=n.applySome(this._textureId,function(b){d._textureRep.release(b)})};d.prototype.bind=function(d,b){n.isSome(this._textureRef)&&(b.setUniform1i(this._options.textureUniform,this._options.textureUnit),d.bindTexture(this._textureRef.getGLTexture(),
this._options.textureUnit),this._options.textureSizeUniform&&(d=this._textureRef.getGLTexture(),b.setUniform2f(this._options.textureSizeUniform,d.descriptor.width,d.descriptor.height)))};d.prototype.update=function(d){var b=this;d!==this._textureId&&(n.applySome(this._textureId,function(d){b._textureRep.release(d)}),this._textureRef=n.applySome(d,function(d){return b._textureRep.acquire(d,!!b._options.initTransparent)}))};return d}();d.TextureBinding=r})},"esri/views/3d/webgl-engine/materials/component/VertexBufferLayout":function(){define(["require",
"exports","../../../support/buffer/InterleavedLayout"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.createVertexBufferLayout=function(d){var k=n.newLayout().vec3f("position");"compressed"===d.normals?k.vec2i16("normalCompressed",{glNormalized:!0}):"default"===d.normals&&k.vec3f("normal");d.textureCoordinates&&k.vec2f("uv0");d.textureCoordinateRegions&&k.vec4u16("region",{glNormalized:!0});d.colors&&k.vec4u8("color");d.componentData&&k.u16("componentIndex");return k.alignTo(4)}})},
"esri/views/3d/webgl-engine/materials/renderers/PreinterleavedRenderer":function(){define("require exports ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../support/buffer/glUtil ../../lib/DefaultVertexAttributeLocations ../../lib/Util ./Instance ./utils ../../../../webgl/BufferObject ../../../../webgl/Util ../../../../webgl/VertexArrayObject".split(" "),function(r,d,n,l,k,b,h,g,e,c,f,a){r=function(){function d(a,b,c){this._material=c;this._dataByOrigin=
new Map;this._highlightCount=0;this._rctx=a;this._materialRep=b;this._glMaterials=e.acquireMaterials(this._material,this._materialRep)}d.prototype.dispose=function(){e.releaseMaterials(this._material,this._materialRep)};Object.defineProperty(d.prototype,"isEmpty",{get:function(){return 0===this._dataByOrigin.size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasHighlights",{get:function(){return 0<this._highlightCount},enumerable:!0,configurable:!0});d.prototype.hasWater=function(){return!1};
d.prototype.renderPriority=function(){return this._material.renderPriority};d.prototype.modify=function(a){this.updateGeometries(a.toUpdate);this.addAndRemoveGeometries(a.toAdd,a.toRemove);this.updateHighlightCount()};d.prototype.addAndRemoveGeometries=function(d,f){var q=this,r=this._rctx,t=this._dataByOrigin;d.forEach(function(d){var f=d.data;if(f.preinterleaved)if(null==f.vertexData)h.assert(!1,"Trying to re-add preinterleaved geometry data which is no longer available.");else{var m=d.origin.id,
v=d.origin.vec3,w=d.uniqueName,x=t.get(m);x||(x={origin:v,highlightCount:0,dataByGeometry:new Map},t.set(m,x));h.setMatrixTranslation3(p,-v[0],-v[1],-v[2]);m=l.mat4f64.create();n.mat4.multiply(m,p,d.transformation);var v=e.generateRenderGeometryVisibleIndexRanges(d),y=e.generateRenderGeometryHighlightRanges(d);y&&(x.highlightCount=null);d=new g(d.name,0,f.indexCount,v,y,m,d.instanceParameters,d.idx,f.id);m=f.indexData?c.createIndex(r,35044,f.indexData):null;v=q._material.createBufferLayout();m=new a(r,
b.Default3D,{geometry:k.glLayout(v)},{geometry:c.createVertex(r,35044)},m);m.vertexBuffers.geometry.setData(f.vertexData);f.indexData=null;f.vertexData=null;x.dataByGeometry.set(w,{instance:d,vao:m})}else h.assert(!1,"Non-interleaved render geometry processed as pre-interleaved")});f.forEach(function(a){var b=a.origin.id;a=a.uniqueName;var c=t.get(b);c.dataByGeometry.get(a).vao.dispose();c.dataByGeometry.delete(a);0===c.dataByGeometry.size&&t.delete(b)})};d.prototype.updateGeometries=function(a){var b=
this;a.forEach(function(a){var c=a.updateType;a=a.renderGeometry;var d=a.uniqueName,f=b._dataByOrigin.get(a.origin.id);if(d=f&&f.dataByGeometry.get(d).instance)c&1&&(d.displayedIndexRange=e.generateRenderGeometryVisibleIndexRanges(a)),c&17&&(d.highlightedIndexRanges=e.generateRenderGeometryHighlightRanges(a),f.highlightCount=null),c&2&&console.error("Updating Preinterleaved geometry not supported"),c&4&&e.calculateTransformRelToOrigin(a,d.transformation,d.transformationNormal)})};d.prototype.updateHighlightCount=
function(){var a=this;this._highlightCount=0;this._dataByOrigin.forEach(function(b){if(null==b.highlightCount){var c=0;b.dataByGeometry.forEach(function(a){a.instance.highlightedIndexRanges&&++c});b.highlightCount=c}a._highlightCount+=b.highlightCount})};d.prototype.render=function(a,b,c,d){var e=this,f=this._rctx,g=this._glMaterials.get(b.pass),h=4===b.pass;if(!g||null!=a&&!g.beginSlot(a)||h&&0===this._highlightCount)return!1;g.bind(f,c);var k=!1;this._dataByOrigin.forEach(function(a){h&&0===a.highlightCount||
(c.origin=a.origin,g.bindView(f,c),h?a.dataByGeometry.forEach(function(a){k=e.renderInstanceHighlight(g,a,d)||k}):a.dataByGeometry.forEach(function(a){k=e.renderInstance(g,a,d)||k}))});g.release(f,c);f.bindVAO(null);return k};d.prototype.renderInstance=function(a,b,c){var d=b.instance,g=b.vao,h=d.displayedIndexRange;if(h&&0===h.length)return!1;b=this._rctx;var k=a.getProgram(),l=a.getDrawMode();f.assertCompatibleVertexAttributeLocations(g,k);b.bindVAO(g);a.bindInstance(b,d);a=g.indexBuffer&&g.indexBuffer.indexType;
h?a?e.drawElementsFaceRange(b,h,d.from,l,a,c):e.drawArraysFaceRange(b,h,d.from,l,c):(h=d.to-d.from,a?e.drawElements(b,l,a,d.from,h,c):e.drawArrays(b,l,d.from,h,c));return!0};d.prototype.renderInstanceHighlight=function(a,b,c){var d=b.instance,g=b.vao;b=d.highlightedIndexRanges;if(!b)return!1;var h=this._rctx,k=a.getProgram(),l=a.getDrawMode();f.assertCompatibleVertexAttributeLocations(g,k);h.bindVAO(g);a.bindInstance(h,d);a=g.indexBuffer&&g.indexBuffer.indexType;k=!1;for(g=0;g<b.length;g++){var n=
b[g],k=n.range?n.range[0]+d.from:d.from,n=n.range?n.range[1]-n.range[0]+1:d.to-d.from;a?e.drawElements(h,l,a,k,n,c):e.drawArrays(h,l,k,n,c);k=!0}return k};return d}();var p=l.mat4f64.create();return r})},"esri/views/3d/layers/i3s/I3SQueryEngine":function(){define("require exports ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/Error ../../../../core/Handles ../../../../core/maybe ../../../../core/accessorSupport/decorators ../../../../geometry/Extent ../../../../layers/graphics/data/QueryEngine ../../../../tasks/support/FeatureSet ../../../../tasks/support/Query".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v){Object.defineProperty(d,"__esModule",{value:!0});var t=p.default;r=function(d){function h(a){a=d.call(this)||this;a._dataQueryEngineInstance=null;a._handles=new e;return a}l(h,d);Object.defineProperty(h.prototype,"defaultQueryJSON",{get:function(){return(new v({outSpatialReference:this.spatialReference})).toJSON()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"dataQueryEngine",{get:function(){return this.ensureDataQueryEngine()},enumerable:!0,
configurable:!0});h.prototype.initialize=function(){var a=this;this._handles.add(this.layerView.on("visible-geometry-changed",function(){return a.spatialIndex.events.emit("changed")}))};h.prototype.destroy=function(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null);this._handles&&(this._handles.destroy(),this._handles=null);this._set("layerView",null)};h.prototype.executeQueryForCount=function(a,c){return b(this,void 0,void 0,function(){return k(this,
function(b){return[2,this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(a),c)]})})};h.prototype.executeQueryForExtent=function(c,d){return b(this,void 0,void 0,function(){var b,e,f,g;return k(this,function(h){switch(h.label){case 0:return[4,this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(c),d)];case 1:return b=h.sent(),e=b.count,f=b.extent,g=a.fromJSON(f),[2,{count:e,extent:g}]}})})};h.prototype.executeQueryForIds=function(a,c){return b(this,void 0,void 0,function(){return k(this,
function(b){return[2,this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(a),c)]})})};h.prototype.executeQuery=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,f=this;return k(this,function(h){switch(h.label){case 0:b=this._ensureQueryJSON(a);if(b.returnGeometry)throw new g("feature-store:unsupported-query","returnGeometry is not yet supported for mesh scene layer queries");if(b.returnCentroid)throw new g("feature-store:unsupported-query","returnCentroid is not yet supported for mesh scene layer queries");
return[4,this.dataQueryEngine.executeQuery(b,c)];case 1:return d=h.sent(),e=q.fromJSON(d),e.features.forEach(function(a){a.geometry=null;a.layer=f.layer;a.sourceLayer=f.layer}),[2,e]}})})};h.prototype._ensureQueryJSON=function(a){if(c.isNone(a))return this.defaultQueryJSON;var b=a.toJSON();b.outSpatialReference||(a.outSpatialReference=this.spatialReference);return b};h.prototype.ensureDataQueryEngine=function(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;var a=this.layer.objectIdField||
"OBJECTID",b=this.layer.fields.map(function(a){return a.toJSON()}),c=this.layerView.view.resourceController.scheduler,d=this.spatialReference.toJSON();return this._dataQueryEngineInstance=new t({hasZ:!0,hasM:!1,geometryType:"esriGeometryPolygon",fields:b,timeInfo:null,spatialReference:d,objectIdField:a,featureStore:this.spatialIndex,scheduler:c,priority:this.priority})};n([f.property({constructOnly:!0})],h.prototype,"layerView",void 0);n([f.property({constructOnly:!0})],h.prototype,"priority",void 0);
n([f.property({constructOnly:!0})],h.prototype,"spatialIndex",void 0);n([f.property({readOnly:!0,aliasOf:"layerView.view.spatialReference"})],h.prototype,"spatialReference",void 0);n([f.property({readOnly:!0,aliasOf:"layerView.layer"})],h.prototype,"layer",void 0);n([f.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"defaultQueryJSON",null);return h=n([f.subclass("esri.views.3d.layers.i3s.I3SQueryEngine")],h)}(f.declared(h));d.I3SQueryEngine=r;d.default=r})},"esri/views/3d/layers/i3s/I3SQueryFeatureAdapter":function(){define("require exports ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/centroid ../../../../layers/graphics/OptimizedGeometry ./I3SUtil".split(" "),
function(r,d,n,l,k,b){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(b){this.objectIdField=b.objectIdField;this.getFeatureExtent=b.getFeatureExtent}d.prototype.getObjectId=function(b){return b.id};d.prototype.getAttributes=function(d){var c=d.meta,e=d.index,a={};this.objectIdField&&(a[this.objectIdField]=d.id);d=c.attributeInfo.attributeData;if(null!=d)for(var c=0,g=Object.keys(d);c<g.length;c++){var h=g[c];a[h]=b.getCachedAttributeValue(d[h],e)}return a};d.prototype.getAttribute=
function(d,c){if(c===this.objectIdField)return d.id;var e=d.meta.attributeInfo.attributeData;return null==e?null:b.getCachedAttributeValue(e[c],d.index)};d.prototype.getGeometry=function(b){if(b.geometry)return b.geometry;var c=this.getFeatureExtent(b,h);b=c[0];var d=c[1],a=c[2],e=c[3],c=c[4];return new k.default([5],[b,d,a,e,d,a,e,c,a,b,c,a,b,d,a])};d.prototype.getCentroid=function(b,c){if(b.geometry)return l.getCentroidOptimizedGeometry(new k.default,b.geometry,c.hasZ,c.hasM);b=this.getFeatureExtent(b,
h);return new k.default([0],[(b[0]+b[3])/2,(b[1]+b[4])/2,(b[2]+b[5])/2])};d.prototype.cloneWithGeometry=function(b,c){return{id:b.id,index:b.index,meta:b.meta,geometry:c}};return d}();d.I3SQueryFeatureAdapter=r;var h=n.create()})},"esri/views/3d/layers/i3s/I3SQueryFeatureStore":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Evented ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../support/projectionUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function g(a){a=d.call(this)||this;a.events=new b;return a}n(g,d);g.prototype.destroy=function(){};g.prototype.forEach=function(a){this.forAllFeatures(function(b){a(b);return 1})};g.prototype.forEachBounds=function(a,b,c){for(var d=this.getFeatureExtent,e=0;e<a.length;e++)b(d(a[e],c))};g.prototype.forEachInBounds=function(b,d){var g=this;this.forAllFeatures(function(a){var f=g.getFeatureExtent(a,p);c.intersects(b,
e.toRect(f,q))&&d(a);return 1},function(c){f.mbsToMbs(c.node.mbs,g.sourceSpatialReference,a,g.viewSpatialReference);if(a[0]>=b[0]&&a[2]<=b[2]&&a[1]>=b[1]&&a[3]<=b[3])return 1;c=a[0]-Math.max(b[0],Math.min(a[0],b[2]));var d=a[1]-Math.max(b[1],Math.min(a[1],b[3]));return c*c+d*d<=a[3]*a[3]?1:2})};l([h.property({constructOnly:!0})],g.prototype,"featureAdapter",void 0);l([h.property({constructOnly:!0})],g.prototype,"forAllFeatures",void 0);l([h.property({constructOnly:!0})],g.prototype,"getFeatureExtent",
void 0);l([h.property({constructOnly:!0})],g.prototype,"sourceSpatialReference",void 0);l([h.property({constructOnly:!0})],g.prototype,"viewSpatialReference",void 0);return g=l([h.subclass("esri.views.3d.layers.i3s.I3SQueryFeatureStore")],g)}(h.declared(k));d.I3SQueryFeatureStore=r;var a=g.vec4f64.create(),p=e.create(),q=c.create();d.default=r})},"esri/views/3d/layers/support/DefinitionExpressionSceneLayerView":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/Logger ../../../../core/accessorSupport/decorators ../../../../core/sql/WhereClause ../i3s/I3SUtil".split(" "),
function(r,d,n,l,k,b,h,g,e){Object.defineProperty(d,"__esModule",{value:!0});var c=b.getLogger("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView");r=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a._definitionExpressionErrors=0;a._maxDefinitionExpressionErrors=20;a.logError=function(b){a._definitionExpressionErrors<a._maxDefinitionExpressionErrors&&c.error("Error while evaluating definitionExpression: "+b);a._definitionExpressionErrors++;a._definitionExpressionErrors===
a._maxDefinitionExpressionErrors&&c.error("Further errors are ignored")};return a}n(a,b);Object.defineProperty(a.prototype,"parsedDefinitionExpression",{get:function(){if(this.layer.definitionExpression)try{var a=g.WhereClause.create(this.layer.definitionExpression,this.layer.fieldsIndex);if(!a.isStandardized)return c.error("definitionExpression is using non standard function"),null;var b=[];e.findFieldsCaseInsensitive(a.fieldNames,this.layer.fields,{missingFields:b});if(0<b.length)return c.error("definitionExpression references unknown fields: "+
b.join(", ")),null;this._definitionExpressionErrors=0;return a}catch(v){c.error("Failed to parse definitionExpression: "+v)}return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"definitionExpressionFields",{get:function(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null},enumerable:!0,configurable:!0});a.prototype._evaluateClause=function(a,b){try{return a.testFeature(b)}catch(v){return this.logError(v),!1}};a.prototype._addDefinitionExpressionToQuery=
function(a){if(!this.parsedDefinitionExpression)return a;var b=this.layer.definitionExpression;a=a.clone();a.where=a.where?"("+b+") AND ("+a.where+")":b;return a};l([h.property()],a.prototype,"layer",void 0);l([h.property({readOnly:!0,dependsOn:["layer.definitionExpression","layer.fieldsIndex"]})],a.prototype,"parsedDefinitionExpression",null);l([h.property({readOnly:!0,dependsOn:["parsedDefinitionExpression"]})],a.prototype,"definitionExpressionFields",null);return a=l([h.subclass("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],
a)}(h.declared(k));d.DefinitionExpressionSceneLayerView=r;d.default=r})},"esri/views/3d/layers/support/fieldProperties":function(){define(["require","exports","../../../../layers/support/fieldUtils"],function(r,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.defineFieldProperties=function(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,dependsOn:["layer.fields","layer.outFields","requiredFields"],get:function(){var d=this.layer,k=this.layer.fields,
b=this.requiredFields;return d.outFields?n.fixFields(k,n.unpackFieldNames(k,d.outFields).concat(b)):n.fixFields(k,b)}}}}})},"esri/views/3d/layers/support/PopupSceneLayerView":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/fieldUtils ../LayerView3D ../../../layers/support/popupUtils".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype._validateFetchPopupFeatures=function(a){var b=this.layer;if(!b.popupEnabled)return new h("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:b});if(!p.getFetchPopupTemplate(b,a))return new h("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:b})};d.prototype.fetchPopupFeatures=
function(a,c){return b(this,void 0,void 0,function(){var a,b,d,h,l,n,q,r,t,v;return k(this,function(k){switch(k.label){case 0:if(a=this._validateFetchPopupFeatures(c))return[2,e.reject(a)];b=g.isSome(c)?c.clientGraphics:null;if(!b||0===b.length)return[2,e.resolve([])];d=[];h=[];n=f.unpackFieldNames;q=[this.layer.fields];return[4,p.getRequiredFields(this.layer,p.getFetchPopupTemplate(this.layer,c))];case 1:l=n.apply(void 0,q.concat([k.sent()]));r=0;for(t=b;r<t.length;r++)v=t[r],f.featureHasFields(l,
v)?d.push(v):h.push(v);return 0===h.length?[2,e.resolve(d)]:[2,this.whenGraphicAttributes(h,l).catch(function(){return h}).then(function(a){return d.concat(a)})]}})})};return d=l([c.subclass("esri.views.3d.layers.support.PopupSceneLayerView")],d)}(c.declared(a));d.PopupSceneLayerView=r;d.default=r})},"esri/views/3d/layers/SceneLayerGraphicsView3D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../../Graphic ../../../core/arrayUtils ../../../core/asyncUtils ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/contains ../../../layers/graphics/dehydratedFeatures ../../../layers/graphics/controllers/I3SOnDemandController ../../../layers/support/fieldUtils ../../../renderers/support/renderingInfoUtils ../../../tasks/support/Query ./LayerView3D ./graphics/Graphics3DFeatureLikeLayerView ./graphics/Graphics3DVerticalScale ./graphics/QueryEngine ./i3s/I3SUtil ./support/DefinitionExpressionSceneLayerView ./support/fieldProperties ./support/layerViewUpdatingProperties ./support/PopupSceneLayerView ../support/GraphicsMap ../support/orientedBoundingBox ../support/projectionUtils ../../layers/support/FeatureFilter".split(" "),
function(r,d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q){function J(a,b){for(var c=0;c<a.length;c++)for(var d=0,e=a[c].graphics;d<e.length;d++){var f=e[d];f.attributes||(f.attributes={});if(b&&b.loadedAttributes)for(var g=0,h=b.loadedAttributes;g<h.length;g++){var k=h[g].name;b.attributeData[k]&&(f.attributes[k]=O.getCachedAttributeValue(b.attributeData[k],c))}}}var R=a.getLogger("esri.views.3d.layers.SceneLayerGraphicsView3D"),U=H.defineFieldProperties();r=function(a){function d(b){b=
a.call(this)||this;b._nodesAddedToStage=new Map;b.overlayUpdating=!1;b.supportsDraping=!0;b._queryEngine=null;b._memCache=null;b.loadedGraphics=new V.GraphicsMap;b.progressiveLoadFactor=1;b.supportsHeightUnitConversion=!0;b._coordinatesOutsideExtentErrors=0;b._maxCoordinatesOutsideExtentErrors=20;return b}n(d,a);d.prototype.initialize=function(){var a=this;O.checkSpatialReferences(this.layer,this.view.spatialReference,this.view.viewingMode);this.handles.add([v.init(this,["layer.renderer","layer.labelingInfo",
"layer.labelsVisible","definitionExpressionFields","filter"],function(){return a._updateRequiredFields()}),v.init(this.layer,"rangeInfos",function(b){return a._rangeInfosChanged(b)}),this.layer.watch("renderer",function(b,c){return a._rendererChange(b,c)}),this.watch(["layer.objectIdFilter","parsedDefinitionExpression"],function(){return a._filterChange()})]);this._set("graphics3d",new N({owner:this,layer:this.layer,asyncGraphicsUpdates:!0,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!1,
frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,suspendResumeExtentMode:"data",dataExtent:this.layer.fullExtent,updateClippingExtent:function(b){return a._updateClippingExtent(b)}}));if(this.graphics3d.elevationAlignment)this.graphics3d.elevationAlignment.events.on("invalidate-elevation",function(b){return a._invalidateElevation(b.extent,b.spatialReference)});this.supportsHeightUnitConversion&&(this._verticalScale=new L({sourceSpatialReference:this.layer.spatialReference,
destSpatialReference:this.view.spatialReference}));this.addResolvingPromise(this.graphics3d.setup());this.drawingOrder=this.view.getDrawingOrder(this.layer.uid);this._memCache=this.view.resourceController.memoryController.getMemCache(this.layer.uid);this._controller=new z({layerView:this,scaleVisibilityEnabled:!1});this.when(function(){a._queryEngine=new K.default({layerView:a,priority:4});a.handles.add([v.init(a,"maximumNumberOfFeatures",function(b){return a._controller.featureTarget=b}),v.whenTrue(a,
"suspended",function(){return a._removeAllNodeData()})])})};d.prototype.destroy=function(){this.graphics3d&&(this.graphics3d.destroy(),this._set("graphics3d",null));this._controller&&(this._controller.destroy(),this._controller=null);this._queryEngine&&(this._queryEngine.destroy(),this._queryEngine=null);this._memCache.destroy();this._nodesAddedToStage=this._memCache=null};Object.defineProperty(d.prototype,"maximumNumberOfFeatures",{get:function(){var a=this.graphics3d&&this.graphics3d.graphicsCore&&
this.graphics3d.graphicsCore.displayFeatureLimit;return a?a.maximumNumberOfFeatures:0},set:function(a){null!=a?(this._override("maximumNumberOfFeatures",a),this._controller.fixedFeatureTarget=!0):(this._clearOverride("maximumNumberOfFeatures"),this._controller.fixedFeatureTarget=!1)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return this.suspended?!1:!!this._controller&&!this._controller.leafsReached},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"hasM",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return!0},enumerable:!0,configurable:!0});d.prototype.whenGraphicAttributes=function(a,b){var c=this;return O.whenGraphicAttributes(this.layer,a,this._getObjectIdField(),b,function(a){for(var b=new Map,d=[],e=0;e<a.length;e++){var f=a[e],g=c._findGraphicNodeAndIndex(f),h=b.get(g.node);h||(h={node:g.node,indices:[],graphics:[]},d.push(h));h.indices.push(g.index);
h.graphics.push(f)}return d},{ignoreUnavailableFields:!0,populateObjectId:!0})};d.prototype.getGraphicFromGraphicUid=function(a){if(!this.loadedGraphics)return null;var b=u.hydrateGraphic(this.loadedGraphics.find(function(b){return b.uid===a}),this.layer),c=this._getObjectIdField();if(!b||!b.attributes||!b.attributes[c])return null;b.layer=this.layer;b.sourceLayer=this.layer;return b};d.prototype.whenGraphicBounds=function(a,b){return this.graphics3d.graphicsCore.whenGraphicBounds(a,b)};d.prototype.canResume=
function(){return this.inherited(arguments)&&(!this._controller||this._controller.rootNodeVisible)};d.prototype.isUpdating=function(){return this.overlayUpdating||this._controller&&this._controller.updating||this.graphics3d&&this.graphics3d.updating};d.prototype.getRenderingInfo=function(a,b){(a=C.getRenderingInfo(a,{renderer:b}))&&a.color&&(b=a.color,b[0]/=255,b[1]/=255,b[2]/=255);return a};Object.defineProperty(d.prototype,"symbolUpdateType",{get:function(){return this.graphics3d.graphicsCore.symbolUpdateType},
enumerable:!0,configurable:!0});d.prototype._findGraphicNodeAndIndex=function(a){a=a.attributes[this.layer.objectIdField];for(var b=0,d=c.keysOfMap(this._nodesAddedToStage);b<d.length;b++){var e=this._nodesAddedToStage.get(d[b]),f=this._findGraphicIndex(e.bundle,a);if(0<=f)return{node:e.node,index:f}}return null};d.prototype._findGraphicIndex=function(a,b){for(var c=0;c<a.length;c++)for(var d=0,e=a[c].featureIds;d<e.length;d++)if(e[d]===b)return c;return-1};d.prototype.highlight=function(a,b){void 0===
b&&(b={});return this.graphics3d.highlight(a,b,this.layer.objectIdField)};d.prototype.addNodeData=function(a,b){if(this._nodesAddedToStage.has(a.index))R.error("I3S node "+a.id+" already added");else{var c=b.allGeometryData,d=b.attributeDataInfo,f=this._controller.crsIndex;b=this.view.spatialReference;var g=[0,0,0],h=this._getObjectIdField(),k=[],l;if(l=this.layer.fullExtent)l=this.layer.fullExtent.clone(),l.xmin-=.5,l.ymin-=.5,l.xmax+=.5,l.ymax+=.5,l.hasZ&&(l.zmin-=.5,l.zmax+=.5),l.hasM&&(l.mmin-=
.5,l.mmax+=.5);var n=l;l=[];for(var p=[],r=0;r<c.length;r++){var t=c[r],v=t.featureDataPosition,w=v.length,x=t.geometries||[X[w]],y=t.featureIds;n&&!m.extentContainsCoords3D(n,v)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&R.error("Service Error: Coordinates outside of layer extent"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&R.error("Maximum number of errors reached. Further errors are ignored."),this._coordinatesOutsideExtentErrors++);
for(var z=0;z<x.length;z++){var B=x[z];if("points"===B.params.type){var C=[],A=y[z<y.length?z:0],E={};null!=A&&(E[h]=A);var A=null==A?e.generateUID():A,F=void 0;"Embedded"===B.type&&(F=B.params.vertexAttributes.position);for(B=0;B<F.length;B+=w){for(var G=0;G<w;G++)g[G]=v[G]+F[B+G];Z.bufferToBuffer(g,f,0,ca,b,0,1);G=u.makeDehydratedPoint(ca[0],ca[1],ca[2],b);3>w&&(G.z=void 0);C.push({uid:A,geometry:G,attributes:E,visible:!0});a.obb||p.push(G.x,G.y,G.z?G.z:0)}l.push.apply(l,C);k.push({featureIds:t.featureIds,
graphics:C})}}}a.numFeatures=l.length;this._updateNodeMemory(a);c={bundle:k,attributeInfo:d,node:a};J(c.bundle,c.attributeInfo);0<p.length&&(d=this.view.renderSpatialReference,f=this._controller.crsVertex,Z.bufferToBuffer(p,b,0,p,d,0,p.length/3),a.obb=T.compute({data:p,size:3,offsetIdx:0,strideIdx:3}),Z.vectorToVector(a.obb.center,d,a.obb.center,f),this._controller.updateVisibility(a.index));if(!this._controller.isGeometryVisible(a))return this._cacheNodeData(c),q.resolve();this._verticalScale&&this._verticalScale.adjust(l);
this._nodesAddedToStage.set(a.index,c);this.loadedGraphics.addMany(l);this._filterNode(c);return q.resolve()}};d.prototype.isNodeLoaded=function(a){return this._nodesAddedToStage.has(a)};d.prototype._updateNodeMemory=function(a){a.memory=4096+a.numFeatures*this.graphics3d.graphicsCore.usedMemoryPerGraphic};d.prototype._cacheNodeData=function(a){var b=a.bundle.reduce(function(a,b){return b.graphics.reduce(function(a,b){return u.estimateSize(b)+a},512+8*b.featureIds.length+a)},1024);this._memCache.put(this._getMemCacheKey(a.node),
a,b)};d.prototype._getMemCacheKey=function(a){return""+a.index};d.prototype._removeAllNodeData=function(){var a=this;this._nodesAddedToStage.forEach(function(b){b&&(a._updateNodeMemory(b.node),a._cacheNodeData(b))});this._nodesAddedToStage.clear();this.loadedGraphics.clear()};d.prototype.removeNodeData=function(a,b){for(;0<a.length&&!b.done;){var c=a.pop();if(c=this._removeNodeStageData(c))this._updateNodeMemory(c.node),this._cacheNodeData(c);b.madeProgress()}};d.prototype._removeNodeStageData=function(a){var b=
this._nodesAddedToStage.get(a);if(!b)return null;for(var c=0,d=b.bundle;c<d.length;c++)this.loadedGraphics.removeMany(d[c].graphics);this._nodesAddedToStage.delete(a);return b};d.prototype.loadCachedNodeData=function(a){return q.resolve(this._memCache.pop(this._getMemCacheKey(a)))};d.prototype.addCachedNodeData=function(a,b,c){if(this._nodesAddedToStage.has(a.index))R.error("I3S node "+a.id+" already added");else{for(var d=0,e=b.bundle;d<e.length;d++)this.loadedGraphics.addMany(e[d].graphics);this._nodesAddedToStage.set(a.index,
b);this._updateNodeMemory(a);this.setAttributeData(a.index,c);this._filterNode(b);return q.resolve()}};d.prototype.getLoadedNodeIds=function(){var a=[];this._nodesAddedToStage.forEach(function(b){return a.push(b.node.id)});return a.sort()};d.prototype.getLoadedNodeIndices=function(a){this._nodesAddedToStage.forEach(function(b,c){return a.push(c)})};d.prototype.getLoadedAttributes=function(a){if((a=this._nodesAddedToStage.get(a))&&a.attributeInfo)return a.attributeInfo.loadedAttributes};d.prototype.getAttributeData=
function(a){if((a=this._nodesAddedToStage.get(a))&&a.attributeInfo)return a.attributeInfo.attributeData};d.prototype.setAttributeData=function(a,b){if(a=this._nodesAddedToStage.get(a))a.attributeInfo=b,J(a.bundle,b),this._filterNode(a),this.graphics3d.graphicsCore.labelsEnabled&&(b=a.bundle.map(function(a){return a.graphics.length&&a.graphics[0].uid}),this.graphics3d.graphicsCore.updateLabelingInfo(b))};d.prototype._updateClippingExtent=function(a){this._controller&&this._controller.updateClippingArea(a);
return!1};d.prototype._getObjectIdField=function(){return this.layer.objectIdField||"OBJECTID"};d.prototype._rendererChange=function(a,c){return b(this,void 0,void 0,function(){var b,d,e,f;return k(this,function(k){switch(k.label){case 0:return b=this.layer.fields,d=new g.default,a?[4,a.collectRequiredFields(d,b)]:[3,2];case 1:return k.sent(),e=h.from(d).sort(),[3,3];case 2:e=[],k.label=3;case 3:return d.clear(),c?[4,c.collectRequiredFields(d,b)]:[3,5];case 4:return k.sent(),f=h.from(d).sort(),[3,
6];case 5:f=[],k.label=6;case 6:if(e.length===f.length&&e.every(function(a,b){return e[b]===f[b]}))return[2];this._reloadAllNodes();return[2]}})})};d.prototype._rangeInfosChanged=function(a){null!=a&&0<a.length&&R.warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")};d.prototype._filterChange=function(){var a=this;this._nodesAddedToStage.forEach(function(b){return a._filterNode(b)})};d.prototype._reloadAllNodes=function(){this._removeAllNodeData();
this._controller&&this._controller.restartNodeLoading()};d.prototype._filterNode=function(a){var b=this._getObjectIdField(),c=null;if(this.layer.objectIdFilter)var d=this.layer.objectIdFilter.ids,e="include"===this.layer.objectIdFilter.method,c=function(a){return 0<=d.indexOf(a)===e};var f=this.parsedDefinitionExpression,g=0;for(a=a.bundle;g<a.length;g++)for(var h=0,k=a[g].graphics;h<k.length;h++){var l=k[h],m=l.visible;c&&!c(l.attributes[b])?l.visible=!1:l.visible=f?this._evaluateClause(f,l):!0;
m!==l.visible&&(G.graphic=l,G.property="visible",G.oldValue=m,G.newValue=l.visible,this.graphics3d.graphicsCore.graphicUpdateHandler(G))}};d.prototype._updateRequiredFields=function(){return b(this,void 0,void 0,function(){var a,b,c,d,e,f,l,m,n;return k(this,function(k){switch(k.label){case 0:return a=this,c=b=a.layer,d=c.fields,e=c.renderer,f=c.labelsVisible,l=a.filter,m=a.definitionExpressionFields,n=new g.default,e?[4,e.collectRequiredFields(n,d)]:[3,2];case 1:k.sent(),k.label=2;case 2:return f?
[4,B.collectLabelingFields(n,b)]:[3,4];case 3:k.sent(),k.label=4;case 4:return p.isSome(l)?[4,B.collectFilterFields(n,b,l)]:[3,6];case 5:k.sent(),k.label=6;case 6:return B.collectFields(n,d,m),this._set("requiredFields",h.from(n).sort()),[2]}})})};d.prototype._invalidateElevation=function(a,b){var c=this._controller.crsIndex;Z.boundingRectToBoundingRect(a,b,la,c);a=Y;x.fromRect(a,la);a[2]=-Infinity;a[5]=Infinity;this._controller.updateElevationChanged(a,c)};d.prototype.createQuery=function(){var a=
{outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return p.isSome(this.filter)?this.filter.createQuery(a):new F(a)};d.prototype.queryFeatures=function(a,b){return f.safeCast(this._queryEngine.executeQuery(this._ensureQuery(a),b&&b.signal))};d.prototype.queryObjectIds=function(a,b){return f.safeCast(this._queryEngine.executeQueryForIds(this._ensureQuery(a),b&&b.signal))};d.prototype.queryFeatureCount=function(a,b){return f.safeCast(this._queryEngine.executeQueryForCount(this._ensureQuery(a),
b&&b.signal))};d.prototype.queryExtent=function(a,b){return f.safeCast(this._queryEngine.executeQueryForExtent(this._ensureQuery(a),b&&b.signal))};d.prototype._ensureQuery=function(a){return this._addDefinitionExpressionToQuery(p.isNone(a)?this.createQuery():F.from(a))};d.prototype.getUsedMemory=function(){var a=this.graphics3d&&this.graphics3d.graphicsCore;return a?a.usedMemory:0};d.prototype.getUnloadedMemory=function(){var a=this.graphics3d&&this.graphics3d.graphicsCore;return.8*((this._controller?
this._controller.unloadedMemoryEstimate:0)+(a?a.unprocessedMemoryEstimate:0))};d.prototype.ignoresMemoryFactor=function(){return this._controller&&this._controller.fixedFeatureTarget};d.prototype.getNumberOfNodes=function(){return this._nodesAddedToStage.size};d.prototype.getNumberOfFeatures=function(){return this.loadedGraphics.length};d.prototype.getStats=function(){var a=this.graphics3d.graphicsCore.getStats();a.nodes=this.getNumberOfNodes();a.features=this.loadedGraphics.length;this._controller&&
this._controller.updateStats(a);return a};l([t.property()],d.prototype,"graphics3d",void 0);l([t.property()],d.prototype,"drawingOrder",void 0);l([t.property({aliasOf:"graphics3d.graphicsCore.hasDraped"})],d.prototype,"hasDraped",void 0);l([t.property({type:Boolean})],d.prototype,"overlayUpdating",void 0);l([t.property({type:Boolean})],d.prototype,"supportsDraping",void 0);l([t.property({type:Q})],d.prototype,"filter",void 0);l([t.property()],d.prototype,"loadedGraphics",void 0);l([t.property()],
d.prototype,"layer",void 0);l([t.property()],d.prototype,"_controller",void 0);l([t.property({dependsOn:["_controller.updating","graphics3d.updating","overlayUpdating"]})],d.prototype,"updating",void 0);l([t.property({dependsOn:["_controller.rootNodeVisible"]})],d.prototype,"suspended",void 0);l([t.property(S.updatingPercentage)],d.prototype,"updatingPercentage",void 0);l([t.property({aliasOf:"_controller.updatingPercentage"})],d.prototype,"updatingPercentageValue",void 0);l([t.property(U.requiredFields)],
d.prototype,"requiredFields",void 0);l([t.property(U.availableFields)],d.prototype,"availableFields",void 0);l([t.property({type:Number,dependsOn:["graphics3d.graphicsCore.displayFeatureLimit"]})],d.prototype,"maximumNumberOfFeatures",null);l([t.property({readOnly:!0,dependsOn:["suspended","_controller.leafsReached"]})],d.prototype,"maximumNumberOfFeaturesExceeded",null);l([t.property({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.point.lodFactor"})],d.prototype,"lodFactor",void 0);l([t.property({readOnly:!0})],
d.prototype,"hasM",null);l([t.property({readOnly:!0})],d.prototype,"hasZ",null);return d=l([t.subclass("esri.views.3d.layers.SceneLayerGraphicsView3D")],d)}(t.declared(E,P.PopupSceneLayerView,I.DefinitionExpressionSceneLayerView));var X={2:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0]}}},3:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0,0]}}}},ca=y.vec3f64.create(),G={graphic:null,property:null,oldValue:null,newValue:null},Y=x.create(),la=w.create();
return r})},"esri/views/3d/support/GraphicsMap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","@dojo/framework/shim/Map","../../../core/Evented"],function(r,d,n,l,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function d(){var d=null!==b&&b.apply(this,arguments)||this;d._map=new l.default;return d}n(d,b);d.prototype.clear=function(){if(0<this._map.size){var b=this.toArray();this._map.clear();this.emit("change",{added:[],removed:b})}};Object.defineProperty(d.prototype,
"length",{get:function(){return this._map.size},enumerable:!0,configurable:!0});d.prototype.addMany=function(b){if(0!==b.length){for(var d=new Set,c=0;c<b.length;c++){var f=b[c],a=f.uid;this._map.has(a)?(d.add(a),++this._map.get(a).refCount):(f.refCount=1,this._map.set(a,f))}b=0<d.size?b.filter(function(a){return!d.has(a.uid)}):b;this.emit("change",{added:b,removed:[]})}};d.prototype.removeMany=function(b){for(var d=[],c=0;c<b.length;c++){var f=b[c],a=f.uid,g=this._map.get(a);null!=g&&0>=--g.refCount&&
this._map.delete(a)&&d.push(f)}0<d.length&&this.emit("change",{added:[],removed:d})};d.prototype.toArray=function(){var b=Array(this._map.size),d=0;this._map.forEach(function(c){return b[d++]=c});return b};d.prototype.find=function(b){for(var d=this._map.entries(),c=d.next();!c.done;c=d.next())if(b(c.value[1]))return c.value[1]};d.prototype.forEach=function(b){this._map.forEach(function(d){return b(d)})};return d}(k);d.GraphicsMap=r})},"*now":function(r){r(['dojo/i18n!*preload*esri/views/nls/SceneView*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../Camera ../geometry ../Graphic ../Ground ../Viewpoint ../core/asyncUtils ../core/Collection ../core/domUtils ../core/Error ../core/events ../core/Handles ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/scheduling ../core/watchUtils ./../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../core/libs/gl-matrix-2/vec3f64 ../geometry/HeightModelInfo ../geometry/support/aaBoundingRect ../geometry/support/scaleUtils ../geometry/support/webMercatorUtils ./BreakpointsOwner ./DOMContainer ./GroundView ./PopupView ./View ./ViewAnimation ./3d/constraints/Constraints ./3d/environment/SceneViewEnvironment ./3d/environment/SceneViewEnvironmentManager ./3d/input/SceneInputManager ./3d/layers/graphics/Deconflictor ./3d/layers/graphics/Labeler ./3d/layers/support/FeatureTileTree3D ./3d/layers/support/FeatureTileTree3DDebugger ./3d/layers/support/MemoryManagedLayerView ./3d/state/ViewState ./3d/state/ViewStateManager ./3d/state/helpers/SceneIntersectionHelper ./3d/support/CombinedElevationProvider ./3d/support/debugFlags ./3d/support/DisplayQualityProfile ./3d/support/geometryUtils ./3d/support/HighlightOptions ./3d/support/index ./3d/support/MapCoordsHelper ./3d/support/projectionUtils ./3d/support/PropertiesPool ./3d/support/QualitySettings ./3d/support/RenderCoordsHelper ./3d/support/SharedSymbolResources ./3d/support/geometryUtils/boundedPlane ./3d/support/pointsOfInterest/PointsOfInterest ./3d/terrain/TerrainSurface ./3d/terrain/terrainUtils ./3d/webgl-engine/Stage ./3d/webgl-engine/lib/Intersector ./3d/webgl-engine/lib/intersectorUtils ./support/screenshotUtils ./support/spatialReferenceSupport ./support/WebGLRequirements ./ui/3d/DefaultUI3D ../webscene/Environment".split(" "),function(r,
d,n,l,k,b,h,g,e,c,f,a,p,q,v,t,y,x,w,m,u,z,B,C,F,E,N,L,K,O,I,H,S,P,V,T,Z,Q,J,R,U,X,ca,G,Y,la,ja,na,pa,ta,aa,ga,ia,sa,Aa,Ba,Ca,Ia,ra,wa,xa,va,ua,Ka,ea,Oa,eb,Qa,A,ma,Ya,Xa,ya,Pa){function Da(a,b){a.layerUids||(a.layerUids=new Set);a.layerUids.add(b)}function ka(a,b){a.graphicUids||(a.graphicUids=new Set);a.graphicUids.add(b)}function Fa(a){return 1099511627776<=a?Math.round(a/1099511627776)+"TB":1073741824<=a?Math.round(a/1073741824)+"GB":1048576<=a?Math.round(a/1048576)+"MB":1024<=a?Math.round(a/1024)+
"KB":a.toFixed(0)+"B"}var oa=m.getLogger("esri.views.SceneView");d=function(d){function h(a){var b=d.call(this)||this;b._clippingArea=null;b._userClippingArea=null;b._initialDefaultSpatialReference=null;b._defaults={};b._externallySet={environment:!1};b._handles=new x;b._createGraphicsViewController=null;b._updateDrawingOrderHandle=null;b.onViewExtentUpdateHandle=null;b._resolveWhenReady=[];b.propertiesPool=new ra.default({slicePlane:ua.BoundedPlaneClass},b);b._resourceController=Ba.newResourceController(b);
b._defaultToMapOptions={include:new Set};b._defaultHitTestOptions={exclude:new Set};b.deconflictor=new ca.Deconflictor({view:b});b.labeler=new G.Labeler({view:b});b.renderSpatialReference=null;b.sharedSymbolResources=null;b.basemapTerrain=null;b.elevationProvider=null;b.camera=null;b.canvas=null;b.center=null;b.constraints=new J.default;b.extent=null;b.fullOpacity=1;b.graphicsView=null;b.groundView=null;b.map=null;b.screenSizePerspectiveEnabled=!0;b.state=null;b.scale=null;b.spatialReference=null;
b.isHeightModelInfoRequired=!0;b.alphaCompositingEnabled=!1;b.supersampleScreenhotsEnabled=!0;b.type="3d";b.ui=new ya;b.updating=!1;b.updatingPercentage=0;b.viewpoint=null;b.zoom=null;b.highlightOptions=new Aa;a&&a.environment||(b._defaults.environment=new R,b.environment=b._defaults.environment);a=function(){b.notifyChange("dataExtent");b._evaluateUpdating()};b._handles.add([C.when(b,"ready",function(a,c){return b._viewReadyHandler(c)}),C.on(b,"map.allLayers","change",a,a,a,!0),b.allLayerViews.on("change",
function(a){return b._updateUpdatingMonitors(a)}),b.watch("map",function(a){a&&a.load&&a.load()})]);b.inputManager=new X({view:b});b.stateManager=new pa.ViewStateManager({view:b,updateDevicePixelRatio:function(){return b.notifyChange("pixelRatio")}});return b}n(h,d);h.prototype.initialize=function(){var a=this;this.groundView=new V({view:this});this.environmentManager=new U.default({view:this});this._updateUpdatingMonitors({added:this.allLayerViews.toArray(),removed:[]});var b=function(){return a._updateDefaultToMapOptions()};
this._handles.add([this.watch("stationary",function(){return a._evaluateUpdating()}),this.layerViewManager.watch("updating",function(){return a._evaluateUpdating()}),this.resourceController.memoryController.events.on("updating-changed",function(){return a._evaluateUpdating()}),this.labeler.watch("updating",function(){return a._evaluateUpdating()}),this.deconflictor.watch("updating",function(){return a._evaluateUpdating()}),this.environmentManager.watch("updating",function(){return a._evaluateUpdating()}),
this.inputManager.watch("hasPendingInputs",function(){return a._evaluateUpdating()}),C.whenNot(this,"ready",function(b,c){return a._viewUnreadyHandler(c)}),C.init(this.qualitySettings,"memoryLimit",function(b){a.resourceController&&(a.resourceController.memoryController.maxMemory=b)}),C.init(this.qualitySettings,"additionalCacheMemory",function(b){a.resourceController&&(a.resourceController.memoryController.additionalCacheMemory=b)}),C.init(this.qualitySettings,"frameRate",function(a){return B.setFrameDuration(0<
a?1E3/Math.ceil(a):0)}),C.init(ga,"SCENEVIEW_LOCKING_LOG",function(b){return a.defaultsFromMap.logDebugInformation=b}),C.on(this,"map.allLayers","after-changes",b,b,b),C.init(this,"map.ground",b,!0),C.init(this,"map.ground.opacity",function(){return a._updateDefaultHitTestOptions()},!0)])};h.prototype.destroy=function(){this.activeTool=null;this.layerViewManager.clear();this.stateManager.deinit();this.groundView.destroy();this.groundView=null;this.destroyViewData();this._disposeSurface();this._disposeGraphicsView();
this.sharedSymbolResources&&(this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null);this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null);this._stage&&(this._stage.dispose(),this._stage=null,this._handles.remove("stage"));this.state&&this.state.destroy();this._set("canvas",null);this.labeler.destroy();this.labeler=null;this.deconflictor.destroy();this.deconflictor=null;this._resourceController.destroy();this._resourceController=null;
this.environmentManager.destroy();this._set("environmentManager",null);this.stateManager.destroy();this._set("stateManager",null);this.inputManager.destroy();this._set("inputManager",null);this._handles.destroy();this.propertiesPool.destroy();this.propertiesPool=null};Object.defineProperty(h.prototype,"clippingArea",{get:function(){if("global"===this.viewingMode)return null;if(this._userClippingArea)return this._userClippingArea;var a=this.get("map.clippingEnabled"),b=this.get("map.clippingArea");
if(!a||!b)return this._clippingArea=null;if(!(b instanceof e.Extent))return oa.error("#clippingArea","only clippingArea geometries of type Extent are supported"),this._clippingArea;if(!H.canProject(b.spatialReference,this.spatialReference))return oa.error("#clippingArea","setting clippingArea with incompatible SpatialReference"),this._clippingArea;b=H.project(b,this.spatialReference);return this._clippingArea&&b&&this._clippingArea.equals(b)?this._clippingArea:this._clippingArea=b},set:function(a){this.ready&&
"global"===this.viewingMode&&a?oa.error("#clippingArea\x3d","Clipping area is only supported in local viewingMode"):(this._userClippingArea=a,this.notifyChange("clippingArea"))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"dataExtent",{get:function(){var a=[],b=this.spatialReference||e.SpatialReference.WGS84,c=this.clippingArea;c&&(c=H.project(c,b));var d=function(d){d&&(d=H.project(d,b))&&(c&&(d=d.intersection(c)),d&&a.push(d))},f=this._get("basemapTerrain");f&&f.spatialReference&&
d(new e.Extent({xmin:f.extent[0],ymin:f.extent[1],zmin:0,xmax:f.extent[2],ymax:f.extent[3],zmax:0,spatialReference:f.spatialReference}));this.map&&this.map.allLayers.forEach(function(a){return d(a.fullExtent)});return 0<a.length?(f=a.reduce(function(a,b){return a.union(b)}),f.hasZ?(f.zmin=Math.min(0,f.zmin),f.zmax=Math.max(0,f.zmax)):(f.zmin=0,f.zmax=0),f):new e.Extent({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:b})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"environment",{set:function(a){a!==this._defaults.environment&&(this._externallySet.environment=!0);this._set("environment",a)},enumerable:!0,configurable:!0});h.prototype.castEnvironment=function(a){return a?a instanceof R?a:a instanceof Pa?R.fromWebsceneEnvironment(a):N.ensureType(R,a):new R};Object.defineProperty(h.prototype,"pixelRatio",{get:function(){return Math.min(window.devicePixelRatio,this.maximumPixelRatio)},set:function(a){u.isSome(a)?this._override("pixelRatio",a):this._clearOverride("pixelRatio")},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"maximumPixelRatio",{get:function(){var a=Infinity,b=this.qualitySettings,c=b.maximumPixelRatio,b=b.maximumRenderResolution;null!=c&&(a=Math.min(a,c));null!=b&&(a=Math.min(a,b/Math.max(this.width,this.height)));return a},set:function(a){u.isSome(a)?this._override("maximumPixelRatio",a):this._clearOverride("maximumPixelRatio")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"groundExtent",{get:function(){var a=this._get("basemapTerrain");
if(a&&a.spatialReference){var b=a.extent;return new e.Extent({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:a.spatialReference})}return new e.Extent({spatialReference:this.spatialReference||e.SpatialReference.WGS84})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"initialExtentRequired",{get:function(){return this.stateManager&&!this.stateManager.hasInitialView},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"interacting",{get:function(){return!!this.state&&
this.state.interacting},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"qualityProfile",{get:function(){return this._get("qualityProfile")||ia.getDefaultProfile()},set:function(a){ia.isValidProfile(a)&&(ia.apply(a,this.qualitySettings),this._set("qualityProfile",a))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"slicePlane",{set:function(a){this._stage.renderView.setRenderParameters({slicePlane:a});if(a){var b=this.propertiesPool.get("slicePlane");sa.boundedPlane.copy(a,
b);this._set("slicePlane",b)}else this._set("slicePlane",null)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"resolution",{get:function(){return null!=this.spatialReference?I.getResolutionForScale(this.scale,this.spatialReference):0},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"heightModelInfo",{get:function(){var a=this.getDefaultHeightModelInfo();return null!=a?K.deriveUnitFromSR(a,this.spatialReference):null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"viewingMode",{get:function(){var a=this.get("map.initialViewProperties.viewingMode"),b=this.spatialReference;a||(a=!b||Ya.isSpatialReferenceSupported(b,"global")?"global":"local");return a},set:function(a){this.internallyReady?oa.error("#viewingMode","viewingMode cannot be set once view is ready"):0<=["local","global"].indexOf(a)?this._override("viewingMode",a):void 0===a&&this._clearOverride("viewingMode")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"resourceController",{get:function(){return this._resourceController},
enumerable:!0,configurable:!0});h.prototype.on=function(a,b,c){var d=this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};h.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};h.prototype.toMap=function(a,b){if(!this.ready)return oa.error("#toMap()","Scene view cannot be used before it is ready"),null;b=b?this._externalToInternalIntersectOptions(b):this._defaultToMapOptions;var c=u.isSome(b.graphics)&&
(u.isSome(b.graphics.include)||u.isSome(b.graphics.exclude));b.allEnabled=c;a=F.isSupportedScreenPointEvent(a)?F.createScreenPointFromSupportedEvent(this,a):a;a=F.screenPointObjectToArray(a);var d=b.include&&!b.include.has(A.TERRAIN_ID)||b.exclude&&b.exclude.has(A.TERRAIN_ID);a=this.sceneIntersectionHelper.intersectIntersectorScreen(a,null,b,!0,d).results;if(c){c=0;for(a=a.all;c<a.length;c++){var d=a[c],e=d.toGraphic(this);if(u.isNone(e)||this._testGraphicUidFilter(b.graphics,e))return this._intersectResultToMapPoint(d)}return null}return this._intersectResultToMapPoint(a.min)};
h.prototype.toScreen=function(a){if(!this.ready)return oa.error("#toScreen()","Scene view cannot be used before it is ready"),null;var b=null==a.z&&this.basemapTerrain.getElevation(a)||0;Ia.pointToVector(a,La,this.renderSpatialReference,b);return this.engineToScreen(La)};h.prototype.pixelSizeAt=function(a,b){if(!this.ready)return oa.error("#pixelSizeAt()","Scene view cannot be used before it is ready"),null;if("number"===typeof a){if(a=this.sceneIntersectionHelper.intersectIntersectorScreen(F.createScreenPointArray(a,
b)).results.min,!a.getIntersectionPoint(La))return 0}else if(a instanceof e.Point)Ia.pointToVector(a,La,this.renderSpatialReference);else if(a=this.sceneIntersectionHelper.intersectIntersectorScreen(F.createScreenPointArray(a.x,a.y)).results.min,!a.getIntersectionPoint(La))return 0;return this.state.camera.computeScreenPixelSizeAt(La)};h.prototype.hitTest=function(a,b){if(!this.ready)return oa.error("#hitTest()","Scene view cannot be used before it is ready"),null;a=F.isSupportedScreenPointEvent(a)?
F.createScreenPointFromSupportedEvent(this,a):a;var c=F.createScreenPointArray(a.x,a.y),d=b?this._externalToInternalIntersectOptions(b):this._defaultHitTestOptions;d.allEnabled=!0;d.terrainLocationFeedbackEnabled=!0;b=this.sceneIntersectionHelper.intersectIntersectorScreen(c,null,d,!0,!0);c=this._intersectResultsToHits(b.results.all,d.graphics);d=b.results.terrain;a={screenPoint:a,results:c,ground:{mapPoint:this._intersectResultToMapPoint(d),distance:d.hasIntersectionPoint?d.distanceInRenderSpace:
0}};ga.SCENEVIEW_HITTEST_RETURN_INTERSECTOR&&(a.intersector=b);return z.resolve(a)};h.prototype.popupHitTest=function(a){return this.hitTest(a).then(function(b){for(var c=[],d=b.results.length?b.results[0].distance:0,e=0,f=b.results;e<f.length;e++){var g=f[e];if(g.distance!==d)break;c.push(g)}e=null;if(0===c.length||1E-5>Math.abs(d-b.ground.distance))e=b.ground.mapPoint;return{results:c,screenPoint:a,mapPoint:e}})};h.prototype.goTo=function(a,b){return p.safeCast(this.stateManager.goTo(a,b))};h.prototype.takeScreenshot=
function(a){var b=this;return this.whenReady().then(function(){var c=ma.toRenderSettings(a,b);c.pixelRatio/=b.pixelRatio;return b._stage.renderView.takeScreenshot(ma.screenshotSuperSampleSettings(c,b.supersampleScreenhotsEnabled))})};h.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};h.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||this.get("defaultsFromMap.isSpatialReferenceDone")&&
this._initialDefaultSpatialReference||null};h.prototype.validate=function(){var a=Xa.check();w("safari")&&9>w("safari")&&(a=new t("sceneview:browser-not-supported","This browser is not supported by SceneView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:w("safari")}));return a?(oa.warn("#validate()",a.message),z.reject(a)):z.resolve()};h.prototype.isSpatialReferenceSupported=function(a,b,c){var d=a.isGeographic,e=a.isWebMercator,f=Ya.isSpatialReferenceSupported(a,"global"),g="local"===
this.viewingMode,h=!(!this._isOverridden("viewingMode")&&!this.get("map.initialViewProperties.viewingMode"));if(h){if(g&&d)return c&&c("Layer "+b.id+" is ignored because it is GCS and viewing mode is local"),!1;if(!g&&!f)return c&&c("Layer "+b.id+" is ignored because its spatial reference is not supported in global viewing mode"),!1}else if(d&&!f)return c&&c("Layer "+b.id+" is ignored because its spatial reference is geographic but unsupported"),!1;if(b)if(Oa.isTiledLayer(b)){if(d=void 0,h?h=Oa.getTiledLayerInfo(b,
a,this.viewingMode):(h=Oa.getTiledLayerInfo(b,a,"global"),null==h.tileInfo&&(h=Oa.getTiledLayerInfo(b,a,"local"))),d=null!=h.tileInfo,!d)return c&&c("Layer "+b.id+" is ignored because it is tiled but\n            its tiling scheme is not supported or compatible with the viewing mode"),!1}else if((a.isWGS84||e)&&!g)return null==this._initialDefaultSpatialReference&&(this._initialDefaultSpatialReference=a),h||this.internallyReady||(this.viewingMode="global",c&&c("Viewing mode locked to global due to reprojectable layer "+
b.id)),c&&c("Layer "+b.id+" is ignored because it supports server-side reprojection"),!1;return!0};h.prototype.whenReady=function(){var a=this;return z.create(function(b){a.internallyReady?b(a):a._resolveWhenReady.push(b)})};h.prototype.computeMapPointFromVec3d=function(a,b){var c=this.spatialReference||e.SpatialReference.WGS84;Ia.vectorToVector(a,this.renderSpatialReference,a,c)||(c=e.SpatialReference.WGS84,Ia.vectorToVector(a,this.renderSpatialReference,a,c));b?(b.x=a[0],b.y=a[1],b.z=a[2],b.spatialReference=
c):b=new e.Point(a,c);return b};h.prototype.engineToScreen=function(a,b){var c=F.createRenderScreenPointArray3();this.state.camera.projectPoint(a,c);a=F.screenPointArrayToObject(c);return F.renderToScreen(this,a,b)};h.prototype.flushDisplayModifications=function(){this._stage.processDirty()};h.prototype.getDrawingOrder=function(a){return this.allLayerViews.findIndex(function(b){return b.layer&&b.layer.uid===a})};h.prototype.getViewForGraphic=function(a){return a.layer===this.graphics?this.graphicsView:
a.layer?this.allLayerViews.find(function(b){return b.layer===a.layer}):null};h.prototype.graphicChanged=function(a){u.isSome(this.graphicsView)&&this.graphicsView.graphicChanged(a)};h.prototype.whenViewForGraphic=function(a){var b=this;return a.layer===this?C.whenOnce(this,"graphicsView").then(function(){return b.graphicsView}):a.layer?this.whenLayerView(a.layer):z.reject()};h.prototype.getStats=function(){var a=this.resourceController.memoryController,b=this.resourceController.scheduler,c={Memory:a.maxMemory.toFixed(0)+
"MB","Memory Used":Math.round(100*a.usedMemory)+"%",Quality:Math.round(100*a.memoryFactor)+"%",Load:b.load.toFixed(1)};this.basemapTerrain&&(c.Terrain=Fa(this.basemapTerrain.getUsedMemory()));this.allLayerViews.items.forEach(function(a){ja.isMemoryManagedLayerView(a)&&(c[a.layer.title]=Fa(a.getUsedMemory()))});if(a=this._stage&&this._stage.renderView&&this._stage.renderView.edgeView)a=a.getUsedMemory(),1024<a&&(c.Edges=Fa(a));return c};h.prototype._intersectResultToMapPoint=function(a,b){if(a.getIntersectionPoint(La)){b=
this.computeMapPointFromVec3d(La,b);var c=this.basemapTerrain;"TerrainRenderer"===a.intersector&&c&&(b.z=c.getElevation(b)||0);return b}return null};h.prototype._intersectResultsToHits=function(a,b){for(var c=[],d=null,e=0;e<a.length;e++){var f=a[e],g=f.toOwner(this);if(u.isSome(g)&&(g===this.map.ground||"type"in g&&"integrated-mesh"===g.type))break;g=f.toGraphic(this);if(u.isSome(g)){u.isNone(d)&&e!==a.length-1&&(d=new Set);if(u.isSome(d)){var h=this._getGraphicFilterUid(g);if(d.has(h))continue;
d.add(h)}this._testGraphicUidFilter(b,g)&&(h=this._intersectResultToMapPoint(f),c.push({graphic:g,mapPoint:h,distance:f.distanceInRenderSpace}))}}return c};h.prototype._getGraphicFilterUid=function(a){if(a.layer&&"objectIdField"in a.layer){var b=a.attributes[a.layer.objectIdField];if(b)return"o-"+a.layer.id+"-"+b}return"u-"+a.uid};h.prototype._testGraphicUidFilter=function(a,b){b=this._getGraphicFilterUid(b);return u.isNone(a)||(u.isNone(a.include)||a.include.has(b))&&(u.isNone(a.exclude)||!a.exclude.has(b))};
h.prototype._externalToInternalRenderItems=function(a,b,d){var e=this;void 0===d&&(d={layerUids:null,graphicUids:null});if(!a)return d;a instanceof c?(ka(d,this._getGraphicFilterUid(a)),0===b&&(u.isSome(this.graphicsView)&&a.layer===this.graphicsView?Da(d,this.graphicsView.mockLayerId):a.layer&&Da(d,a.layer.uid))):"forEach"in a?a.forEach(function(a){Array.isArray(a)?e._externalToInternalRenderItems(a,b,d):q.isCollection(a)?a===e.graphics&&u.isSome(e.graphicsView)?Da(d,e.graphicsView.mockLayerId):
e._externalToInternalRenderItems(a,b,d):a instanceof f?a===e.map.ground&&Da(d,A.TERRAIN_ID):e._externalToInternalRenderItems(a,b,d)}):Da(d,a.uid);return d};h.prototype._externalToInternalIntersectOptions=function(a){var b=this._externalToInternalRenderItems(a.include,0);a=this._externalToInternalRenderItems(a.exclude,1);return{include:b.layerUids,exclude:a.layerUids,graphics:{include:b.graphicUids,exclude:a.graphicUids}}};h.prototype._viewingModeToManifold=function(a){switch(a){case "global":return"spherical";
case "local":return"planar"}};h.prototype._initBasemapTerrain=function(a){var b=this;this._disposeBasemapTerrain();this._set("basemapTerrain",new ea(this,this._viewingModeToManifold(a)));this._set("elevationProvider",new aa({view:this}));this.elevationProvider.register("ground",this.basemapTerrain);this._handles.add([C.init(this,"map.ground.opacity",function(a){return b.basemapTerrain.baseOpacity=null==a?1:a},!0),C.init(this,"map.ground.surfaceColor",function(a){b.basemapTerrain.backgroundColor=a})],
"basemapTerrain")};h.prototype._initGlobe=function(a){var b=this;this._initCoordinateSystem();this._initState();this._initBasemapTerrain(a);this._set("pointsOfInterest",new Ka.default({view:this}));this._set("featureTiles",new Y.default({renderCoordsHelper:this.renderCoordsHelper,cameraOnSurface:this.pointsOfInterest.cameraOnSurface,focus:this.pointsOfInterest.focus,tilingSchemeOwner:this.basemapTerrain,viewState:this.state,scheduler:this._resourceController.scheduler}));this._handles.add([this.featureTiles.watch("updating",
function(){return b._evaluateUpdating()}),this.pointsOfInterest.watch("updating",function(){return b._evaluateUpdating()})]);this._handles.add(C.init(ga,"FEATURE_TILE_TREE_SHOW_TILES",function(a){a&&b.featureTiles&&!b.featureTilesDebugger?b.featureTilesDebugger=new la.FeatureTileTree3DDebugger(b):!a&&b.featureTilesDebugger&&(b.featureTilesDebugger.destroy(),b.featureTilesDebugger=null)}),"feature-tiles");this._handles.add(C.init(this,["clippingArea","basemapTerrain.extent"],function(){var a=b.basemapTerrain&&
b.basemapTerrain.extent;b.clippingArea||a?a&&b.basemapTerrain.spatialReference?(a=O.toExtent(b.basemapTerrain.extent,b.basemapTerrain.spatialReference),b.featureTiles.filterExtent=b.clippingArea?a.intersection(b.clippingArea):a):b.featureTiles.filterExtent=b.clippingArea:b.featureTiles.filterExtent=null},!0),"feature-tiles");this.stateManager.init()};h.prototype._initCoordinateSystem=function(){var a=this;if(this.spatialReference){var b=this.spatialReference;this.mapCoordsHelper&&this.mapCoordsHelper.spatialReference.equals(b)||
this._set("mapCoordsHelper",new Ca.default(this.map,b));var c="global"===this.viewingMode,b=c?Ia.SphericalECEFSpatialReference:b;b!==this.renderSpatialReference&&(this.renderSpatialReference=b,this._set("renderCoordsHelper",xa.RenderCoordsHelper.createMode(this.viewingMode,b)),c||this._handles.add(this.watch("basemapTerrain.extent",function(b){if(0!==b[0]||0!==b[1]||0!==b[2]||0!==b[3])a.renderCoordsHelper.extent=b},!0),"render-coords-helper"),this.sceneIntersectionHelper&&this.sceneIntersectionHelper.setTolerance(Qa.DEFAULT_TOLERANCE/
this.renderCoordsHelper.unitInMeters))}else this._set("mapCoordsHelper",null),this._set("renderCoordsHelper",null),this.renderSpatialReference=null};h.prototype._evaluateUpdating=function(){var a=0,b=0,c=!1;this.allLayerViews.forEach(function(d){d.isFulfilled()?d.updating&&(c=!0,d="updatingPercentage"in d?d.updatingPercentage:null,null!=d&&(++b,a+=d)):c=!0});c=!!(c||!this.stationary||this._createGraphicsViewController||u.isSome(this.graphicsView)&&this.graphicsView.updating||this.layerViewManager&&
this.layerViewManager.updating||this._resourceController&&this._resourceController.updating||this.featureTiles&&this.featureTiles.updating||this.pointsOfInterest&&this.pointsOfInterest.updating||this.labeler&&this.labeler.updating||this.deconflictor&&this.deconflictor.updating||this.environmentManager&&this.environmentManager.updating||this.inputManager&&this.inputManager.hasPendingInputs||this.map&&this.map.allLayers&&this.map.allLayers.some(function(a){return!a.isFulfilled()}));c!==this.updating&&
this._set("updating",c);a=0!==b?a/b:c?100:0;this.updatingPercentage!==a&&this._set("updatingPercentage",a)};h.prototype._updateUpdatingMonitors=function(a){for(var b=this,c=0,d=a.removed;c<d.length;c++){var e=d[c];this._handles.remove(e.uid)}c=0;for(a=a.added;c<a.length;c++)e=a[c],e.destroyed||this._handles.add([e.watch(["updating","updatingPercentage"],function(){return b._evaluateUpdating()})],e.uid);this._evaluateUpdating()};h.prototype._disposeSurface=function(){var a=function(a){a&&a.remove();
return null};this._updateDrawingOrderHandle=a(this._updateDrawingOrderHandle);this.onViewExtentUpdateHandle=a(this.onViewExtentUpdateHandle);this.pointsOfInterest&&(this.pointsOfInterest.destroy(),this._set("pointsOfInterest",null));this.featureTiles&&(this.featureTiles.destroy(),this._set("featureTiles",null));this._handles.remove("feature-tiles");this._handles.remove("render-coords-helper");this._disposeBasemapTerrain();this.environmentManager&&this.environmentManager.disposeRendering()};h.prototype._disposeBasemapTerrain=
function(){var a=this._get("basemapTerrain");a&&(this._handles.remove("basemapTerrain"),a.destroy(),this._set("basemapTerrain",null))};h.prototype._renderScreenshotOverlay=function(a,b){if(this.overlay&&this.overlay.hasVisibleItems){var c=a.getContext("2d");c.putImageData(b,0,0);this.overlay.renderCanvas(a);a=c.getImageData(0,0,b.width,b.height);for(c=0;c<a.data.length;c++)b.data[c]=a.data[c]}};h.prototype._initStage=function(){var a=this,b={renderContext:this.renderContext,deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions,viewingMode:this.viewingMode,alpha:this.alphaCompositingEnabled,canvas:this.renderCanvas,screenshot:{renderOverlay:function(b,c){return a._renderScreenshotOverlay(b,c)}}},c=new ta.SceneIntersectionHelper(this.viewingMode,{forEachLayer:function(b){var c=a._stage.getLayers();Object.keys(c).forEach(function(a){b(c[a])})}},this);this._set("sceneIntersectionHelper",c);var d=v.byId(this.surface);this._stage=new eb(this.viewingMode,d,b,c);this._lostWebGLContextHandle=
y.on(this._stage.renderView.getCanvas(),"webglcontextlost",function(){return a.fatalError=new t("webgl-context-lost")});this._handles.add(C.init(this.qualitySettings,"antialiasingEnabled",function(){a._stage.renderView.setRenderParameters({antialiasingEnabled:a.qualitySettings.antialiasingEnabled})}),"stage");b=function(){a._stage.renderView.setRenderParameters({defaultHighlightOptions:Aa.toEngineOptions(a.highlightOptions)})};this._handles.add(this.watch(["highlightOptions","highlightOptions.color",
"highlightOptions.haloOpacity","highlightOptions.fillOpacity"],b),"stage");b();this.renderCoordsHelper&&this.sceneIntersectionHelper.setTolerance(Qa.DEFAULT_TOLERANCE/this.renderCoordsHelper.unitInMeters);this._set("canvas",this._stage.renderView.getCanvas())};h.prototype._initSurface=function(){this._initStage();this._initGlobe(this.viewingMode);this.sharedSymbolResources=new va.default({stage:this._stage,viewingMode:this.viewingMode,resourceController:this._resourceController,pointsOfInterest:this.pointsOfInterest,
viewState:this.state})};h.prototype._createGraphicsViewIfNeeded=function(){var a=this;if(!this.graphicsView&&!this._createGraphicsViewController&&0!==this.graphics.length){this._handles.remove("graphics-view");this._createGraphicsViewController=z.createAbortController();var b=function(){a._createGraphicsViewController=null;a._evaluateUpdating()};this._createGraphicsViewAsync(this._createGraphicsViewController.signal).then(b,b);this._evaluateUpdating()}};h.prototype._createGraphicsViewAsync=function(a){return b(this,
void 0,void 0,function(){var b,c,d=this;return k(this,function(e){switch(e.label){case 0:return[4,z.create(function(a){return r(["./3d/layers/GraphicsView3D"],a)})];case 1:return b=e.sent(),z.throwIfAborted(a),[4,C.whenTrueOnce(this.basemapTerrain,"ready",a)];case 2:return e.sent(),c=new b({view:this}),this._set("graphicsView",c),this._handles.add([C.init(c,"updating",function(){return d._evaluateUpdating()})],c.mockLayerId),[2]}})})};h.prototype._disposeGraphicsView=function(){this._createGraphicsViewController&&
(this._createGraphicsViewController.abort(),this._createGraphicsViewController=null);this._handles.remove("graphics-view");u.isSome(this.graphicsView)&&(this._handles.remove(this.graphicsView.mockLayerId),this.graphicsView.destroy(),this._set("graphicsView",null))};h.prototype._initState=function(){this._set("state",new na.default({viewingMode:this.viewingMode,spatialReference:this.spatialReference}))};h.prototype._viewReadyHandler=function(a){var b=this;a||("global"===this.viewingMode&&(this._clippingArea=
null),this.internallyReady=!0,this._initSurface(),this._handles.add(C.on(this,"graphics","change",function(){return b._createGraphicsViewIfNeeded()}),"graphics-view"),this._createGraphicsViewIfNeeded(),this._evaluateUpdating(),!this._externallySet.environment&&(a=this.get("map.initialViewProperties.environment"))&&(this.environment=a),this._updateDrawingOrderHandle=this.allLayerViews.on("change",function(){return b._updateDrawingOrder()}),this._updateDrawingOrder(),this.labeler.setup(),this.environmentManager.updateReadyChange(!0),
this.inputManager.connect(),a=this._resolveWhenReady,this._resolveWhenReady=[],a.forEach(function(a){return a(b)}))};h.prototype._viewUnreadyHandler=function(a){a&&(u.isSome(this.activeTool)&&(this.activeTool.deactivate&&this.activeTool.deactivate(),this._set("activeTool",null)),this._initialDefaultSpatialReference=null,this.inputManager.disconnect(),this.environmentManager.updateReadyChange(!1),this._disposeGraphicsView(),this.internallyReady=!1,this.stateManager.deinit(),this._disposeSurface(),
this.state.destroy(),this._set("state",null),this.sharedSymbolResources&&(this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null),this.labeler&&this.labeler.dispose(),this._lostWebGLContextHandle&&(this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null),this._stage&&(this._stage.dispose(),this._stage=null),this._handles.remove("stage"),this._set("canvas",null))};h.prototype._updateDrawingOrder=function(){var a=this.allLayerViews.length-1;this.allLayerViews.forEach(function(b,
c){"drawingOrder"in b&&(b.drawingOrder=a-c)})};h.prototype._updateDefaultToMapOptions=function(){this._defaultToMapOptions.include.clear();if(this.map){this.map.ground&&this._defaultToMapOptions.include.add(A.TERRAIN_ID);for(var a=0,b=this.map.allLayers.items;a<b.length;a++){var c=b[a];"integrated-mesh"===c.type&&this._defaultToMapOptions.include.add(c.uid)}}};h.prototype._updateDefaultHitTestOptions=function(){this._defaultHitTestOptions.exclude.clear();if(this.map){this.map.ground&&1>this.map.ground.opacity&&
this._defaultHitTestOptions.exclude.add(A.TERRAIN_ID);for(var a=0,b=this.map.allLayers.items;a<b.length;a++){var c=b[a];"integrated-mesh"===c.type&&1>c.opacity&&this._defaultToMapOptions.exclude.add(c.uid)}}};l([E.property({type:Q,readOnly:!0,aliasOf:"state.animation"})],h.prototype,"animation",void 0);l([E.property({readOnly:!0})],h.prototype,"basemapTerrain",void 0);l([E.property({readOnly:!0})],h.prototype,"elevationProvider",void 0);l([E.property({type:g,aliasOf:"stateManager.camera"})],h.prototype,
"camera",void 0);l([E.property({readOnly:!0})],h.prototype,"canvas",void 0);l([E.property({type:e.Point,aliasOf:"stateManager.center"})],h.prototype,"center",void 0);l([E.property({type:e.Extent,dependsOn:["map.clippingArea?","map.clippingEnabled?","viewingMode"]})],h.prototype,"clippingArea",null);l([E.property({type:J.default})],h.prototype,"constraints",void 0);l([E.property({type:e.Extent,dependsOn:["basemapTerrain.extent","clippingArea","map"],readOnly:!0})],h.prototype,"dataExtent",null);l([E.property({value:null,
type:R})],h.prototype,"environment",null);l([E.cast("environment")],h.prototype,"castEnvironment",null);l([E.property()],h.prototype,"environmentManager",void 0);l([E.property({type:e.Extent,aliasOf:"stateManager.extent"})],h.prototype,"extent",void 0);l([E.property({readOnly:!0,aliasOf:"stateManager.screenCenter"})],h.prototype,"screenCenter",void 0);l([E.property({type:Number,dependsOn:["maximumPixelRatio"]})],h.prototype,"pixelRatio",null);l([E.property({type:Number,dependsOn:["qualitySettings.maximumPixelRatio",
"qualitySettings.maximumRenderResolution","size"]})],h.prototype,"maximumPixelRatio",null);l([E.property({aliasOf:"stateManager.frustum"})],h.prototype,"frustum",void 0);l([E.property({type:Number,readOnly:!0})],h.prototype,"fullOpacity",void 0);l([E.property({readOnly:!0})],h.prototype,"graphicsView",void 0);l([E.property({type:e.Extent,dependsOn:["basemapTerrain.extent"],readOnly:!0})],h.prototype,"groundExtent",null);l([E.property()],h.prototype,"groundView",void 0);l([E.property({type:Boolean,
dependsOn:["stateManager.hasInitialView"]})],h.prototype,"initialExtentRequired",null);l([E.property({type:Boolean,dependsOn:["state.interacting"],readOnly:!0})],h.prototype,"interacting",null);l([E.property()],h.prototype,"map",void 0);l([E.property({readOnly:!0})],h.prototype,"mapCoordsHelper",void 0);l([E.property({aliasOf:"stateManager.padding"})],h.prototype,"padding",void 0);l([E.property({type:Ka.default,readOnly:!0})],h.prototype,"pointsOfInterest",void 0);l([E.property({type:Y.default,readOnly:!0})],
h.prototype,"featureTiles",void 0);l([E.property({type:la.FeatureTileTree3DDebugger})],h.prototype,"featureTilesDebugger",void 0);l([E.property({type:Boolean})],h.prototype,"screenSizePerspectiveEnabled",void 0);l([E.property({constructOnly:!0})],h.prototype,"deactivatedWebGLExtensions",void 0);l([E.property({constructOnly:!0})],h.prototype,"debugWebGLExtensions",void 0);l([E.property({constructOnly:!0})],h.prototype,"renderCanvas",void 0);l([E.property({readOnly:!0})],h.prototype,"state",void 0);
l([E.property({readOnly:!0})],h.prototype,"inputManager",void 0);l([E.property({readOnly:!0})],h.prototype,"stateManager",void 0);l([E.property({type:["low","medium","high"]})],h.prototype,"qualityProfile",null);l([E.property({type:wa,get:function(){var a=this._get("qualitySettings");a||(a=new wa,ia.apply(this.qualityProfile,a));return a}})],h.prototype,"qualitySettings",void 0);l([E.property()],h.prototype,"slicePlane",null);l([E.property({dependsOn:["viewingMode"]})],h.prototype,"ready",void 0);
l([E.property({readOnly:!0})],h.prototype,"renderCoordsHelper",void 0);l([E.property({readOnly:!0})],h.prototype,"sceneIntersectionHelper",void 0);l([E.property({type:Number,dependsOn:["scale","spatialReference"],readOnly:!0})],h.prototype,"resolution",null);l([E.property({type:Number,aliasOf:"stateManager.scale"})],h.prototype,"scale",void 0);l([E.property()],h.prototype,"heightModelInfo",null);l([E.property({dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],
h.prototype,"spatialReference",void 0);l([E.property({type:Boolean,constructOnly:!0})],h.prototype,"alphaCompositingEnabled",void 0);l([E.property({type:Boolean})],h.prototype,"supersampleScreenhotsEnabled",void 0);l([E.property({readOnly:!0})],h.prototype,"type",void 0);l([E.property({type:ya})],h.prototype,"ui",void 0);l([E.property({type:Boolean,readOnly:!0})],h.prototype,"updating",void 0);l([E.property({type:Number,readOnly:!0})],h.prototype,"updatingPercentage",void 0);l([E.property({type:["global",
"local"],dependsOn:["map.initialViewProperties?.viewingMode","spatialReference"]})],h.prototype,"viewingMode",null);l([E.property({type:a,aliasOf:"stateManager.viewpoint"})],h.prototype,"viewpoint",void 0);l([E.property({type:Number,aliasOf:"stateManager.zoom"})],h.prototype,"zoom",void 0);l([E.property({type:Aa})],h.prototype,"highlightOptions",void 0);return h=l([E.subclass("esri.views.SceneView")],h)}(E.declared(P,Z,S,T));var La=L.vec3f64.create();return d});