// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),function(u,v,l,f,w,c,m,d,n,e,g,p,q,h,r,t){return function(k){function b(a){a=k.call(this,a)||this;a.gdbVersion=
null;a.source=null;return a}l(b,k);b.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return h.fromJSON(a)})};b.prototype.executeJSON=function(a,b){return e.executeQuery(this.parsedUrl,this._normalizeQuery(a),c({},this.requestOptions,b)).then(function(a){return a.data})};b.prototype.executeForCount=function(a,b){return e.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),c({},this.requestOptions,b)).then(function(a){return a.data.count})};b.prototype.executeForExtent=
function(a,b){return e.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),c({},this.requestOptions,b)).then(function(a){return{count:a.data.count,extent:m.Extent.fromJSON(a.data.extent)}})};b.prototype.executeForIds=function(a,b){return e.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),c({},this.requestOptions,b)).then(function(a){return a.data.objectIds})};b.prototype.executeRelationshipQuery=function(a,b){a=t.from(a);if(this.gdbVersion||this.source)a=a.clone().set({gdbVersion:this.gdbVersion||
a.gdbVersion,source:this.source||a.source});return p.executeRelationshipQuery(this.parsedUrl,a,c({},this.requestOptions,b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=h.fromJSON(b[a])});return c})};b.prototype.executeAttachmentQuery=function(a,b){var d=this;return g.executeAttachmentQuery(this.parsedUrl,q.from(a),c({},this.requestOptions,b)).then(function(a){return g.processAttachmentQueryResult(a.data.attachmentGroups,d.parsedUrl.path)})};b.prototype._normalizeQuery=
function(a){if(!this.gdbVersion&&!this.source)return a;a=r.from(a);return a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source})};f([d.property()],b.prototype,"gdbVersion",void 0);f([d.property()],b.prototype,"source",void 0);return b=f([d.subclass("esri.tasks.QueryTask")],b)}(d.declared(n))});