// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../layers/support/AttachmentInfo ./urlUtils".split(" "),function(r,b,g,l,k,m,n){function p(a){a=a.toJSON();a.attachmentTypes&&(a.attachmentTypes=a.attachmentTypes.join(","));a.globalIds&&(a.globalIds=a.globalIds.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.size&&(a.size=a.size.join(","));return a}Object.defineProperty(b,"__esModule",{value:!0});b.processAttachmentQueryResult=function(a,
q){for(var c={},b=0;b<a.length;b++)for(var e=a[b],f=e.parentObjectId,h=0,e=e.attachmentInfos;h<e.length;h++){var d=e[h],g=k.addProxy(k.addTokenParameter(q+"/"+f+"/attachments/"+d.id)),d=m.fromJSON(d);d.set({url:g,parentObjectId:f});c[f]?c[f].push(d):c[f]=[d]}return c};b.executeAttachmentQuery=function(a,b,c){b={query:n.mapParameters(g({},a.query,{f:"json"},p(b)))};c&&(b=g({},c,b));return l(a.path+"/queryAttachments",b)}});