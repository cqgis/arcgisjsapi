// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),function(u,c,l,d,m,h,n,r,p,t){function q(b,c){void 0===b&&(b=null);return d(this,void 0,void 0,function(){var a;return l(this,function(e){switch(e.label){case 0:if(m.geometryServiceUrl)return[2,new p({url:m.geometryServiceUrl})];if(!b)throw new h("internal:geometry-service-url-not-configured");
b.isInstanceOf(r)?a=b.portal||n.getDefault():b.isInstanceOf(n)&&(a=b);return[4,a.load({signal:c})];case 1:e.sent();if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return[2,new p({url:a.helperServices.geometry.url})];throw new h("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(c,"__esModule",{value:!0});c.create=q;c.projectGeometry=function(b,c,a,e){void 0===a&&(a=null);return d(this,void 0,void 0,function(){var d,f,g;return l(this,function(k){switch(k.label){case 0:return[4,
q(a,e)];case 1:return d=k.sent(),f=new t,f.geometries=[b],f.outSpatialReference=c,[4,d.project(f,{signal:e})];case 2:if((g=k.sent())&&Array.isArray(g)&&1===g.length)return[2,g[0]];throw new h("internal:geometry-service-projection-failed");}})})}});