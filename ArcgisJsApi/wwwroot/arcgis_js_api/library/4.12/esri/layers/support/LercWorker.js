// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/requireUtils":function(){define(["require","exports","./promiseUtils"],function(v,a,u){function g(a,c){return Array.isArray(c)?u.create(function(q){a(c,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];q(a)})}):g(a,[c]).then(function(a){return a[0]})}Object.defineProperty(a,"__esModule",{value:!0});a.when=g;a.getAbsMid=function(a,c,q){return c.toAbsMid?c.toAbsMid(a):q.id.replace(/\/[^\/]*$/gi,"/")+a}})},"esri/core/workers":function(){define(["require",
"exports","./workers/workers"],function(v,a,u){Object.defineProperty(a,"__esModule",{value:!0});for(var g in u)a.hasOwnProperty(g)||(a[g]=u[g])})},"esri/core/workers/workers":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(v,a,u,g,p,c,q,m,n,w){function A(){return g(this,void 0,void 0,function(){var a,k,l,c;return u(this,function(r){if(d)return[2,d];E=q.createAbortController();
a=x+f;k=[];l=function(a){var r=w.create(a).then(function(r){return z[a]=r});k.push(r)};for(c=0;c<a;c++)l(c);d=q.all(k);return[2,d]})})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=m;a.RemoteClient=n;(m=c("host-browser")?navigator.hardwareConcurrency:0)||(m=c("safari")&&c("mac")||c("trident")?8:2);var x=c("esri-workers-debug")?1:Math.max(1,Math.ceil(m/2)),f=c("esri-workers-debug")?1:Math.max(1,Math.floor(m/2)),l=0,z=[];a.initialize=function(){A()};a.openWithPorts=function(r,k){return new a.Connection(r.map(function(r){return new a.RemoteClient(r,
k,{})}))};a.open=function(r,k){void 0===k&&(k={});return g(this,void 0,void 0,function(){var d,m,n,g,B,y,F;return u(this,function(D){switch(D.label){case 0:if("string"!==typeof r)throw new p("workers:undefined-module","modulePath is missing");d=k.signal;m=k.strategy||"distributed";c("host-webworker")&&!c("esri-workers")&&(m="local");return"local"!==m?[3,2]:[4,q.create(function(a){return v([r],a)})];case 1:return n=D.sent(),q.throwIfAborted(d),g=k.client||n,B=a.RemoteClient.connect(n),[2,new a.Connection([new a.RemoteClient(B,
g,k)])];case 2:return[4,A()];case 3:D.sent();q.throwIfAborted(d);if("dedicated"!==m)return[3,5];y=x+l++;l%=f;return[4,z[y].open(r,k)];case 4:return B=D.sent(),[2,new a.Connection([new a.RemoteClient(B,k.client,k)])];case 5:return[4,q.all(z.map(function(a){return a.open(r,k)}))];case 6:return F=D.sent(),[2,new a.Connection(F.map(function(r){return new a.RemoteClient(r,k.client,k)}))]}})})};a.terminate=function(){d&&(E.abort(),d=null);for(var a=0;a<z.length;a++)z[a]&&z[a].terminate();z.length=0};var d=
null,E})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils"],function(v,a,u,g){var p=u.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,m,c){for(var q=[],n=0,g=this._clients;n<g.length;n++)q.push(g[n].invoke(a,m,c));return q};a.prototype.close=function(){for(var a=0,c=this._clients;a<c.length;a++)c[a].close();this._clients=[]};a.prototype.getAvailableClient=
function(){var a;this._clients.some(function(c){return c.isBusy()?!1:(a=c,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,c,n){var m=null;Array.isArray(n)?(p.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),m={transferList:n}):m=n;return this._clients&&this._clients.length?this.getAvailableClient().invoke(a,c,m):g.reject(Error("Connection closed"))};a.prototype.openPorts=
function(){return g.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(v,a,u,g,p,c,q,m,n,w){var A=q.getLogger("esri.core.workers"),x=n.MessageType.ABORT,f=n.MessageType.INVOKE,l=n.MessageType.OPEN,z=n.MessageType.OPENED,d=n.MessageType.RESPONSE;return function(){function a(a,
k){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=k;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();A.error(a)})}a.create=function(r){return g(this,void 0,void 0,function(){var k;return u(this,function(c){switch(c.label){case 0:return[4,w.createWorker()];case 1:return k=c.sent(),[2,new a(k,r)]}})})};a.prototype.terminate=function(){this.worker.terminate()};a.prototype.open=function(a,c){void 0===c&&(c={});return g(this,
void 0,void 0,function(){var r,k,d=this;return u(this,function(f){r=c.signal;k=n.newJobId();return[2,m.create(function(c,f){c={resolve:c,reject:f};m.onAbortOrThrow(r,function(){d._outJobs["delete"](k);d._post({type:x,jobId:k})});d._outJobs.set(k,c);d._post({type:l,jobId:k,modulePath:a})})]})})};a.prototype._onMessage=function(a){if(a=n.receiveMessage(a))switch(a.type){case z:case d:this._onResponse(a);break;case x:this._onCancel(a);break;case f:this._onInvoke(a)}};a.prototype._onCancel=function(a){var c=
this._inJobs;a=a.jobId;var d=c.get(a);d&&(d.controller&&d.controller.abort(),c["delete"](a))};a.prototype._onInvoke=function(a){var c=this,f=a.methodName,l=a.jobId,z=a.data;a=a.abortable?m.createAbortController():null;var r=this._inJobs,q=p.workerMessages[f],y;try{if("function"!==typeof q)throw new TypeError(f+" is not a function");y=q.call(null,z,{signal:a?a.signal:null})}catch(F){this._post({type:d,jobId:l,error:n.toInvokeError(F)});return}if(m.isThenable(y)){r.set(l,{controller:a,promise:y});if(a&&
"cancel"in y)m.onAbort(a.signal,function(){return y.cancel()});y.then(function(a){r.has(l)&&(r["delete"](l),c._post({type:d,jobId:l},a))}).catch(function(a){r.has(l)&&(r["delete"](l),a||(a={message:"Error encountered at method"+f}),m.isAbortError(a)||c._post({type:d,jobId:l,error:n.toInvokeError(a||{message:"Error encountered at method "+f})}))})}else this._post({type:d,jobId:l},y)};a.prototype._onResponse=function(a){var d=a.jobId,f=a.error;a=a.data;var l=this._outJobs.get(d);l&&(this._outJobs["delete"](d),
f?l.reject(c.fromJSON(JSON.parse(f))):l.resolve(a))};a.prototype._post=function(a,c,d){return n.postMessage(this.worker,a,c,d)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper ../tsSupport/generatorHelper ../tsSupport/awaiterHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(v,a,u,g,p,c,q,m,n,w,A,x,f){function l(a){return p(this,void 0,void 0,function(){return g(this,
function(l){return[2,w.create(function(l){function k(f){if(f=x.receiveMessage(f))switch(f.type){case r:f=a;var z=q.workers.loaderUrl||A.DEFAULT_LOADER_URL,y;null!=q["default"]?(y=u({},q),delete y["default"],y=JSON.parse(JSON.stringify(y))):y=JSON.parse(JSON.stringify(q));var g=q.workers.loaderConfig,g=A.default({baseUrl:g.baseUrl,locale:c.locale,has:u({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-native-promise":m("esri-native-promise"),"esri-secure-context":m("esri-secure-context"),
"esri-workers-arraybuffer-transfer":m("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1,"esri-webgl-texture-float":m("esri-webgl-texture-float"),"esri-shared-array-buffer":m("esri-shared-array-buffer"),"esri-2d-debug":0,"esri-webgl-max-texture-size":m("esri-webgl-max-texture-size")},g.has),map:u({},g.map),paths:u({},g.paths),packages:g.packages||[]});f.postMessage({type:E,configure:{esriConfig:y,loaderUrl:z,loaderConfig:g}});break;case d:a.removeEventListener("message",
k),a.removeEventListener("error",n),l(a)}}function n(c){c.preventDefault();a.removeEventListener("message",k);a.removeEventListener("error",n);z.warn("Failed to create Worker. Fallback to execute module in main thread",c);a=new f;a.addEventListener("message",k);a.addEventListener("error",n)}a.addEventListener("message",k);a.addEventListener("error",n)})]})})}Object.defineProperty(a,"__esModule",{value:!0});var z=n.getLogger("esri.core.workers");m.add("esri-workers-arraybuffer-transfer",!m("safari")||
12<=m("safari"));var d=x.MessageType.CONFIGURED,E=x.MessageType.CONFIGURE,r=x.MessageType.HANDSHAKE,k;try{k=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var ABORT\x3d7;function mapDelete(map,key){map["delete"](key)}function createAbortError(){var error\x3dnew Error("AbortError");error.dojoType\x3d"cancel";return error}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abort\x3dfunction(){var outJob\x3doutgoing.get(jobId);if(!outJob){return}mapDelete(outgoing,jobId);self.postMessage({type:ABORT,jobId:jobId});outJob.reject(createAbortError())};var deferred\x3dnew Deferred(abort);if(signal){if(signal.aborted){return deferred.reject(createAbortError())}signal.addEventListener("abort",function(){abort();deferred.reject(createAbortError())})}outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,jobId:jobId,methodName:methodName,abortable:true,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(D){}a.createWorker=function(){return p(this,void 0,void 0,function(){var a;return g(this,function(c){if(!m("esri-workers"))return[2,l(new f)];if(k)try{a=new Worker(k)}catch(O){z.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new f}else z.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new f;return[2,l(a)]})})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper",
"../has","../urlUtils"],function(v,a,u,g,p){Object.defineProperty(a,"__esModule",{value:!0});g=g("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=p.makeAbsolute(p.removeQueryParameters(v.toUrl(g)));a.DEFAULT_CONFIG={baseUrl:function(){var a=p.removeQueryParameters(v.toUrl("dojo/x.js"));return p.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},
{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(c){var g={async:c.async,isDebug:c.isDebug,locale:c.locale,baseUrl:c.baseUrl,
has:u({},c.has),map:u({},c.map),packages:c.packages&&c.packages.concat()||[],paths:u({},c.paths)};c.hasOwnProperty("async")||(g.async=!0);c.hasOwnProperty("isDebug")||(g.isDebug=!1);c.baseUrl||(g.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var c=g.packages,f=0;f<c.length;f++)if(c[f].name===a.name)break a;a=u({},a);f=p.removeQueryParameters(v.toUrl(a.name+"/x.js"));f=f.slice(0,f.length-5);a.location=p.makeAbsolute(f);c.push(a)}});c=g.map=g.map||{};for(var m=
0,n=Object.keys(a.DEFAULT_CONFIG.map);m<n.length;m++){var w=n[m];c[w]||(c[w]=a.DEFAULT_CONFIG.map[w])}return g}})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper ../config ../kernel ./Error ./global ./Logger ./string".split(" "),function(v,a,u,g,p,c,q,m,n){function w(b){var a={path:null,query:null},h=new G(b),t=b.indexOf("?");null===h.query?a.path=b:(a.path=b.substring(0,t),a.query=A(h.query));h.fragment&&(a.hash=h.fragment,null===h.query&&(a.path=a.path.substring(0,
a.path.length-(h.fragment.length+1))));return a}function A(b){var a={},h=0;for(b=b.split("\x26");h<b.length;h++){var t=b[h];if(t){var c=t.indexOf("\x3d"),f=void 0,d=void 0;0>c?(f=decodeURIComponent(t),d=""):(f=decodeURIComponent(t.slice(0,c)),d=decodeURIComponent(t.slice(c+1)));t=a[f];"string"===typeof t&&(t=a[f]=[t]);Array.isArray(t)?t.push(d):a[f]=d}}return a}function x(b){return b&&"object"===typeof b&&"toJSON"in b&&"function"===typeof b.toJSON}function f(b,a){return b?a&&"function"===typeof a?
Object.keys(b).map(function(e){return encodeURIComponent(e)+"\x3d"+encodeURIComponent(a(e,b[e]))}).join("\x26"):Object.keys(b).map(function(e){var h=b[e];if(null==h)return"";var c=encodeURIComponent(e)+"\x3d";return(e=a&&a[e])?c+encodeURIComponent(e(h)):Array.isArray(h)?h.map(function(b){return x(b)?c+encodeURIComponent(JSON.stringify(b)):c+encodeURIComponent(b)}).join("\x26"):x(h)?c+encodeURIComponent(JSON.stringify(h)):c+encodeURIComponent(h)}).filter(function(b){return b}).join("\x26"):""}function l(b){var a=
b.indexOf("?");-1!==a?(J.path=b.slice(0,a),J.query=b.slice(a+1)):(J.path=b,J.query=null);return J}function z(b){b=l(b).path;b&&"/"===b[b.length-1]||(b+="/");b=K(b,!0);return b=b.toLowerCase()}function d(b){var a=I.proxyRules;b=z(b);for(var h=0;h<a.length;h++)if(0===b.indexOf(a[h].urlPrefix))return a[h]}function E(b){b=H(b);var a=b.indexOf("/sharing");return 0<a?b.substring(0,a):b.replace(/\/+$/,"")}function r(b,a,h){void 0===h&&(h=!1);b=Q(b);a=Q(a);return h||b.scheme===a.scheme?b.host.toLowerCase()===
a.host.toLowerCase()&&b.port===a.port:!1}function k(b,e,h){void 0===e&&(e=a.appBaseUrl);if(C(b))return h&&h.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===T(b).slice(2)?"http:"+b:"https:"+b;if(!L(b)){h=O;if("/"===b[0]){var t=e.indexOf("//"),t=e.indexOf("/",t+2);e=-1===t?e:e.slice(0,t)}return h(e,b)}return b}function D(b,e,h){void 0===e&&(e=a.appBaseUrl);if(!B(b))return b;var t=H(b),c=t.toLowerCase();e=H(e).toLowerCase().replace(/\/+$/,"");if((h=h?H(h).toLowerCase().replace(/\/+$/,
""):null)&&0!==e.indexOf(h))return b;for(var f=function(b,a,e){e=b.indexOf(a,e);return-1===e?b.length:e},d=f(c,"/",c.indexOf("//")+2),l=-1;c.slice(0,d+1)===e.slice(0,d)+"/";){l=d+1;if(d===c.length)break;d=f(c,"/",d+1)}if(-1===l||h&&l<h.length)return b;b=t.slice(l);t=e.slice(l-1).replace(/[^/]+/g,"").length;if(0<t)for(c=0;c<t;c++)b="../"+b;else b="./"+b;return b}function H(b){b=b.trim();b=k(b);if(/^https?:\/\//i.test(b)){var a=l(b);b=a.path.replace(/\/{2,}/g,"/");b=b.replace("/","//");a.query&&(b+=
"?"+a.query)}b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return b=ba(b)}function O(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(b&&b.length){a=[];if(B(b[0])){var h=b[0],c=h.indexOf("//");a.push(h.slice(0,c+1));ca.test(b[0])&&(a[0]+="/");b[0]=h.slice(c+2)}else"/"===b[0][0]&&a.push("");b=b.reduce(function(b,a){return a?b.concat(a.split("/")):b},[]);for(h=0;h<b.length;h++)c=b[h],".."===c&&0<a.length&&".."!==a[a.length-1]?a.pop():!c||"."===c&&0!==a.length||a.push(c);return a.join("/")}}
function T(b,a){void 0===a&&(a=!1);if(y(b)||F(b))return null;var e=b.indexOf("://");if(-1===e&&C(b))e=2;else if(-1!==e)e+=3;else return null;e=b.indexOf("/",e);-1!==e&&(b=b.slice(0,e));a&&(b=K(b,!0));return b}function B(b){return C(b)||L(b)}function y(b){return"blob:"===b.slice(0,5)}function F(b){return"data:"===b.slice(0,5)}function U(b){b=P(b);if(!b||!b.isBase64)return null;b=atob(b.data);for(var a=new Uint8Array(b.length),h=0;h<b.length;h++)a[h]=b.charCodeAt(h);return a.buffer}function P(b){return(b=
b.match(da))?{mediaType:b[1],isBase64:!!b[2],data:b[3]}:null}function R(b){var a=U(b);if(!a)return null;b=P(b);return new Blob([a],{type:b.mediaType})}function C(b){return b&&"/"===b[0]&&"/"===b[1]}function L(b){return V.test(b)}function ea(b){return W.test(b)||"http"===a.appUrl.scheme&&C(b)}function S(b){return C(b)?"https:"+b:b.replace(W,"https:")}function M(){return"https"===a.appUrl.scheme}function K(b,a){void 0===a&&(a=!1);if(C(b))return b.slice(2);b=b.replace(V,"");a&&1<b.length&&"/"===b[0]&&
"/"===b[1]&&(b=b.slice(2));return b}function ba(b){var e=I.httpsDomains;if(!ea(b))return b;var h=b.indexOf("/",7),c;c=-1===h?b:b.slice(0,h);c=c.toLowerCase().slice(7);if(fa.test(c))if(n.endsWith(c,":80"))c=c.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&c===a.appUrl.authority&&!ga.test(b))return b;if(M()&&c===a.appUrl.authority||e&&e.some(function(a){return c===a||n.endsWith(c,"."+a)})||M()&&!d(b))b=S(b);return b}function N(a,e,h){if(!(e&&h&&a&&B(a)))return a;var b=
a.indexOf("//"),c=a.indexOf("/",b+2),d=a.indexOf(":",b+2),c=Math.min(0>c?a.length:c,0>d?a.length:d);if(a.slice(b+2,c).toLowerCase()!==e.toLowerCase())return a;e=a.slice(0,b+2);a=a.slice(c);return""+e+h+a}function Q(b){if("string"===typeof b)return new G(k(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}function X(b,e){var h=e&&e.url&&e.url.path;b&&h&&(b=k(b,h,{preserveProtocolRelative:!0}));(e=e&&e.portal)&&!e.isPortal&&e.urlKey&&e.customBaseUrl?(h=e.urlKey+"."+e.customBaseUrl,e=r(a.appUrl,a.appUrl.scheme+
"://"+h)?N(b,e.portalHostname,h):N(b,h,e.portalHostname)):e=b;return e}function Y(a,e){if(!a)return a;!B(a)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(a);var b=k(a);if(e){var c=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;c&&(b=D(b,c,c),b!==a&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(b))}a=b;b=(e=e&&e.portal)&&!e.isPortal&&e.urlKey&&e.customBaseUrl?N(a,e.urlKey+"."+e.customBaseUrl,e.portalHostname):a;B(b)&&(b=H(b));return b}function Z(a,
e,c){a=w(a);var b=a.query||{};b[e]=String(c);return a.path+"?"+f(b)}Object.defineProperty(a,"__esModule",{value:!0});var ha=m.getLogger("esri.core.urlUtils"),I=g.request,V=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,W=/^\s*http:/i,aa=/^\s*https:/i,ca=/^\s*file:/i,fa=/:\d+$/,ga=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ia=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,ja=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,G=function(){function a(a){void 0===a&&(a="");this.uri=
a;this.port=this.host=this.password=this.user=this.fragment=this.query=this.path=this.authority=this.scheme=null;a=this.uri.match(ia);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(ja),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)}a.prototype.toString=function(){return this.uri};return a}();a.Url=G;a.appUrl=
new G(g.applicationUrl);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=w;a.queryToObject=A;a.objectToQuery=f;a.getProxyUrl=function(b){void 0===b&&(b=!1);var e,h=I.proxyUrl;if("string"===typeof b){if(e=b,e=aa.test(e)||"https"===a.appUrl.scheme&&C(e),b=d(b))h=b.proxyUrl}else e=!!b;if(!h)throw ha.warn("esri/config: esriConfig.request.proxyUrl is not set."),
new c("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");e&&M()&&(h=S(h));return w(h)};a.addProxy=function(a){var b=d(a),c,t;b&&(t=l(b.proxyUrl),c=t.path,t=t.query?A(t.query):null);c&&(b=w(a),a=c+"?"+b.path,(c=f(u({},t,b.query)))&&(a=a+"?"+c));return a};var J={path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:z(a.urlPrefix)};for(var b=I.proxyRules,c=a.urlPrefix,d=b.length,f=0;f<b.length;f++){var l=b[f].urlPrefix;if(0===c.indexOf(l)){if(c.length===
l.length)return-1;d=f;break}0===l.indexOf(c)&&(d=f+1)}b.splice(d,0,a);return d};a.getProxyRule=d;a.hasSamePortal=function(a,c){a=E(a);c=E(c);return K(a)===K(c)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&n.startsWith(a,b)},c=I.interceptors;if(c)for(var d=0;d<c.length;d++){var f=c[d];if(Array.isArray(f.urls)){if(f.urls.some(b))return f}else if(b(f.urls))return f}return null};a.hasSameOrigin=r;a.isTrustedServer=function(b){if("string"===
typeof b)if(B(b))b=Q(b);else return!0;for(var c=I.trustedServers||[],h=0;h<c.length;h++){var d;d=c[h];a.trustedServersUrlCache[d]||(L(d)||C(d)?a.trustedServersUrlCache[d]=[new G(k(d))]:a.trustedServersUrlCache[d]=[new G("http://"+d),new G("https://"+d)]);d=a.trustedServersUrlCache[d];for(var f=0;f<d.length;f++)if(r(b,d[f]))return!0}return!1};a.makeAbsolute=k;a.makeRelative=D;a.normalize=H;a.join=O;a.getOrigin=T;a.isAbsolute=B;a.isBlobProtocol=y;a.isDataProtocol=F;a.dataToArrayBuffer=U;var da=/^data:(.*?)(;base64)?,(.*)$/;
a.dataComponents=P;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.dataToBlob=R;a.downloadDataAsFile=function(a,c){var b;a:if(b=document.createElement("a"),"download"in b){var d=null;if(q.URL&&q.URL.createObjectURL){d=R(a);if(!d){b=!1;break a}d=q.URL.createObjectURL(d)}b.download=c;b.href=d||a;b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b);d&&q.URL.revokeObjectURL(d);b=void 0}else b=!1;b||
window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(R(a),c)};a.isProtocolRelative=C;a.hasProtocol=L;a.toHTTP=function(a){return C(a)?"http:"+a:a.replace(aa,"http:")};a.toHTTPS=S;a.isAppHTTPS=M;a.removeFile=function(a){var b=0;if(B(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=N;a.fromJSON=X;a.read=function(a,c,d){return X(a,d)};a.toJSON=Y;a.write=function(a,
c,d,f){(a=Y(a,f))&&(c[d]=a)};a.isSVG=function(a){return ka.test(a)};a.removeQueryParameters=function(a,c){a=w(a);var b=Object.keys(a.query||{});0<b.length&&c&&c.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+b.join(", ")+".");return a.path};a.addQueryParameter=Z;a.addQueryParameters=function(a,c){a=w(a);var b=a.query||{},d;for(d in c)b[d]=c[d];return(c=f(b))?a.path+"?"+c:a.path};a.removeQueryParameter=function(a,c){var b=w(a),
d=b.path,b=b.query;if(!b)return a;delete b[c];return(a=f(b))?d+"?"+a:d};a.addTokenParameter=function(a){var b=p.id&&p.id.findCredential(a);return b&&b.token?Z(a,"token",b.token):a};var ka=/(^data:image\/svg|\.svg$)/i})},"esri/core/string":function(){define(["require","exports","./object","@dojo/framework/shim/string"],function(v,a,u,g){Object.defineProperty(a,"__esModule",{value:!0});var p=/\{([^\}]+)\}/g;a.replace=function(a,g){return a.replace(p,"object"===typeof g?function(a,c){return u.getDeepValue(c,
g)}:function(a,c){return g(c)})};a.startsWith=g.startsWith;a.endsWith=g.endsWith})},"esri/core/workers/WorkerFallback":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ../has ../promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(v,a,u,g,p,c,q,m){var n=function(){return function(){var a=this,c=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(f){a[f]=function(){for(var a=
[],l=0;l<arguments.length;l++)a[l]=arguments[l];return c[f].apply(c,a)}})}}(),w=p.MutationObserver||p.WebKitMutationObserver,A=function(){var a;if(p.process&&p.process.nextTick)a=function(a){p.process.nextTick(a)};else if(p.Promise)a=function(a){p.Promise.resolve().then(a)};else if(w){var c=[],g=document.createElement("div");(new w(function(){for(;0<c.length;)c.shift()()})).observe(g,{attributes:!0});a=function(a){c.push(a);g.setAttribute("queueStatus","1")}}return a}(),x=function(){var a=p.MessageEvent;
try{new a("message",{data:null})}catch(l){return function(a,c){void 0===c&&(c={});var d=c.data,f=c.bubbles,f=void 0===f?!1:f;c=c.cancelable;c=void 0===c?!1:c;var l=document.createEvent("Event");l.initEvent(a,f,c);l.data=d;return l}}return function(c,f){return new a(c,f)}}();return function(){function a(){this._dispatcher=new n;this._isInitialized=!1;this._workerPostMessage({type:m.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},
set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,
c){var d=this;A(function(){d._workerMessageHandler(x("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,c,d){this._dispatcher.addEventListener(a,c,d)};a.prototype.removeEventListener=function(a,c,d){this._dispatcher.removeEventListener(a,c,d)};a.prototype._workerPostMessage=function(a,c){var d=this;A(function(){d.dispatchEvent(x("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){return g(this,
void 0,void 0,function(){var c,d,f,l,g,n,p,w,x=this;return u(this,function(k){switch(k.label){case 0:c=m.receiveMessage(a);if(!c)return[2];d=c.jobId;f=c.type;switch(f){case m.MessageType.CONFIGURE:return[3,1];case m.MessageType.OPEN:return[3,2]}return[3,27];case 1:return this._isInitialized||this._workerPostMessage({type:m.MessageType.CONFIGURED}),[3,27];case 2:return l=c.modulePath,[3,25];case 3:n=k.sent();p=l;switch(p){case "esri/tasks/operations/PBFWorker":return[3,4];case "esri/views/2d/engine/vectorTiles/WorkerTileHandler":return[3,
6];case "esri/views/2d/layers/features/Pipeline":return[3,8];case "esri/views/3d/layers/PointCloudWorker":return[3,10];case "esri/views/3d/layers/SceneLayerWorker":return[3,12];case "esri/layers/graphics/sources/support/CSVSourceWorker":return[3,14];case "esri/layers/support/LercWorker":return[3,16];case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":return[3,18];case "esri/geometry/support/meshUtils/ElevationSamplerWorker":return[3,20]}return[3,22];case 4:return[4,new Promise(function(a,
c){v(["esri/tasks/operations/PBFWorker"],a,c)})];case 5:return g=k.sent(),[3,24];case 6:return[4,new Promise(function(a,c){v(["esri/views/2d/engine/vectorTiles/WorkerTileHandler"],a,c)})];case 7:return g=k.sent(),[3,24];case 8:return[4,new Promise(function(a,c){v(["esri/views/2d/layers/features/Pipeline"],a,c)})];case 9:return g=k.sent(),[3,24];case 10:return[4,new Promise(function(a,c){v(["esri/views/3d/layers/PointCloudWorker"],a,c)})];case 11:return g=k.sent(),[3,24];case 12:return[4,new Promise(function(a,
c){v(["esri/views/3d/layers/SceneLayerWorker"],a,c)})];case 13:return g=k.sent(),[3,24];case 14:return[4,new Promise(function(a,c){v(["esri/layers/graphics/sources/support/CSVSourceWorker"],a,c)})];case 15:return g=k.sent(),[3,24];case 16:return[4,new Promise(function(a,c){v(["esri/layers/support/LercWorker"],a,c)})];case 17:return g=k.sent(),[3,24];case 18:return[4,new Promise(function(a,c){v(["esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],a,c)})];case 19:return g=k.sent(),
[3,24];case 20:return[4,new Promise(function(a,c){v(["esri/geometry/support/meshUtils/ElevationSamplerWorker"],a,c)})];case 21:return g=k.sent(),[3,24];case 22:return[4,q.create(function(a){return v([l],a)})];case 23:g=k.sent(),k.label=24;case 24:return w=n.connect(g),this._workerPostMessage({type:m.MessageType.OPENED,jobId:d,data:w}),[3,26];case 25:v(["esri/core/workers/RemoteClient",l],function(a,c){a=a.connect(c);x._workerPostMessage({type:m.MessageType.OPENED,jobId:d,data:a})}),k.label=26;case 26:return[3,
27];case 27:return[2]}})})};return a}()})},"*noref":1}});
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/extendsHelper ../../core/promiseUtils ../../core/requireUtils ../../core/workers module".split(" "),function(v,a,u,g,p,c,q,m){function n(){return p.create(function(a){return v(["./rasterFormats/LercCodec"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var w=function(){function a(){}a.prototype._decode=function(a){return n().then(function(c){c=c.decode;c=c(a.buffer,a.options);return{result:c,transferList:[c.pixelData.buffer]}})};
return a}(),A=function(a){function f(f){var d=a.call(this)||this;d.scheduler=f;d._threadInitialized=p.create(function(a,g){q.open(c.getAbsMid("./LercWorker",v,m),{strategy:"dedicated",scheduler:f}).then(function(c){void 0===d._thread?(d._thread=c,a()):(c.close(),g())})});return d}g(f,a);f.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};Object.defineProperty(f.prototype,"test",{get:function(){return{threadInitialized:this._threadInitialized}},enumerable:!0,configurable:!0});
f.prototype.decode=function(a,c,f){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_decode",{buffer:a,options:c},{transferList:[a],signal:f}):n().then(function(d){d=d.decode;return d(a,c)}):p.resolve(null)};return f}(w);a.LercWorkerMaster=A;var x=new Map;a.acquireInstance=function(a){var c=x.get(a);c||(c={instance:new A(a),ref:0},x.set(a,c));++c.ref;return c.instance};a.releaseInstance=function(a){if(null!=a){a=a.scheduler;var c=x.get(a);c&&0>=--c.ref&&(c.instance.destroy(),x.delete(a))}};
a.default=function(){return new w}});