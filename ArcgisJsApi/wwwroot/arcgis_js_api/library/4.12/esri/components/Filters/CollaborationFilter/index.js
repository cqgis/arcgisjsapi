// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/CheckToggle","dojo/i18n!../../Filters/CollaborationFilter/nls/resources"],function(k,l,m,n){return function(e){function b(a){if(c[a])return c[a].exports;var d=c[a]={i:a,l:!1,exports:{}};return e[a].call(d.exports,d,d.exports,b),d.l=!0,d.exports}var c={};return b.m=e,b.c=c,b.d=function(a,d,c){b.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:c})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,d){if((1&d&&(a=b(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var c=Object.create(null);if(b.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var e in a)b.d(c,e,function(b){return a[b]}.bind(null,e));return c},b.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(d,"a",d),d},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,
b)},b.p="",b(b.s=393)}({0:function(e,b,c){function a(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}c.d(b,"b",function(){return a});c.d(b,"a",function(){return g});var d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f])})(a,b)},g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var f in b=
arguments[c])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a}).apply(this,arguments)}},107:function(e,b){e.exports=m},137:function(e,b){e.exports=n},20:function(e,b){e.exports=l},393:function(e,b,c){c.r(b);var a=c(0),d=c(137);e=c(4);var g=c(20),k=c.n(g),g=c(107),l=c.n(g);c=function(b){function c(a){a=b.call(this,a)||this;return a.handleToggleClick=a.handleToggleClick.bind(a),a.handleClearFilter=a.handleClearFilter.bind(a),a}return a.b(c,b),c.prototype.render=function(a){return a(k.a,
{key:this.props.key+"-accordion",title:this.props.title?this.props.title:d.collaboration,clearable:!1,onClear:this.handleClearFilter},a("ul",{class:"ftr-collaborations__tree",id:this.props.key+"-accordion-tree",role:"tree","aria-label":d.collaborations},0<Object.keys(this.props.collaborationsFilter).length?this.mapCollaborationsToToggles(a):a("p",{class:"ftr-collaborations__none"},d.noCollaborations)))},c.prototype.mapCollaborationsToToggles=function(b){var c=this;this.props.collaborationsFilter.sort(function(a,
b){return a.label<b.label?-1:a.label>b.label?1:0});var d=this.props.collaborationsFilter,f=Object.keys(this.props.collaborationsFilter).map(function(f){var e,h=((e={})[f]=d[f].selected,e);e=d[f].participants?d[f].participants.map(function(b){var d;return h=a.a({},h,((d={})[f+"/"+b.value]=b.selected,d)),{value:b.value,displayName:b.label,onToggleClick:c.handleToggleClick,selectedToggles:h}}):[];return b(l.a,{key:d[f].value,name:d[f].label,value:d[f].value,childOptions:e,selectedToggles:h,onToggleClick:c.handleToggleClick,
showChildren:!0})});return f.sort(function(a,b){if(a.children[0].children[0].text&&b.children[0].children[0].text){a=a.children[0].children[0].text.toLowerCase();b=b.children[0].children[0].text.toLowerCase();if(a<b)return-1;if(a>b)return 1}return 0}),f},c.prototype.handleToggleClick=function(a,b){var c=this.props.collaborationsFilter;if(c){if(c[a])c[a].selected||Object.keys(c).forEach(function(a){return c[a].selected=!1}),Object.keys(c).forEach(function(a){c[a].participants.forEach(function(a){a.selected=
!1})}),c[a].selected=!c[a].selected;else{var d=a.split("/")[1];Object.keys(c).forEach(function(a){c[a].selected=!1;c[a].participants.forEach(function(a){a.value===d?a.selected=!a.selected:a.selected=!1})})}this.props.onCollaborationSelect(c)}},c.prototype.handleFilterStringChange=function(a){},c.prototype.handleClearFilter=function(){if(this.props.collaborationsFilter){var a=this.props.collaborationsFilter;Object.keys(a).forEach(function(b){return a[b].selected=!1});this.props.onCollaborationSelect(a)}},
c}(e.Component);b.default=c},4:function(e,b){e.exports=k}})});