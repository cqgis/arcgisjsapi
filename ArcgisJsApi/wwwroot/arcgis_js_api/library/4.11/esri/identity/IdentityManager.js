// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
require({cache:{"esri/identity/IdentityManagerDialog":function(){define("../core/declare dojo/Deferred dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/Error ../core/domUtils ./IdentityManagerBase dojo/i18n!./nls/identity dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m){var r=c.Credential;return n([c.IdentityManagerBase],{declaredClass:"esri.identity.IdentityManager",constructor:function(a){e.mixin(this,
a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(c,b,e){this._nls||(this._nls=m);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var f=this._loginDialog,g=e&&e.error,q=e&&e.token,r=new k(function(){f.onCancel()});if(f.open)return c=new d("identity-manager:busy","BUSY"),r.reject(c),r.promise;a.hide(f.errMsg_);g&&g.details&&403==g.details.httpStatus&&q&&(l.set(f.errMsg_,"innerHTML",this._nls.forbidden),a.show(f.errMsg_));f.dfd_=r;f.serverInfo_=b;f.resUrl_=c;f.admin_=e&&e.isAdmin;
l.set(f.resLink_,{title:c,innerHTML:"("+(this.getResourceName(c)||this._nls.lblItem)+")"});l.set(f.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "});f.txtPwd_.set("value","");f.show();return r.promise},_createLoginDialog:function(){var c=this._nls,m=e.substitute(c,this._dialogContent),m=e.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
m),q=new g({title:c.title,content:m,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===h.ENTER&&this.execute_()},execute_:function(){var d=this.txtUser_.get("value"),b=this.txtPwd_.get("value"),e=this.dfd_,m=this;if(this.form_.validate()&&d&&b){this.btnSubmit_.set("label",
c.lblSigning);var q=f.id.findCredential(m.resUrl_,d),t=function(b){m.btnSubmit_.set("label",c.lblOk);m.btnSubmit_.set("disabled",!1);a.hide(m.errMsg_);m.hide();g._DialogLevelManager.hide(m);var f=m.serverInfo_;m.dfd_=m.serverInfo_=m.generateDfd_=m.resUrl_=null;var t,h,v=q,x;b&&(t=b.token,h=null!=b.expires?Number(b.expires):null,x=!!b.ssl,v?(v.userId=d,v.token=t,v.expires=h,v.validity=b.validity,v.ssl=x,v.creationTime=Date.now()):v=new r({userId:d,server:f.server,token:t,expires:h,ssl:x,isAdmin:m.admin_,
validity:b.validity}));e.resolve(v)};q&&!q._enqueued?t():(m.btnSubmit_.set("disabled",!0),m.generateDfd_=f.id.generateToken(this.serverInfo_,{username:d,password:b},{isAdmin:this.admin_}).then(t).then(null,function(b){m.btnSubmit_.set("disabled",!1);m.generateDfd_=null;m.btnSubmit_.set("label",c.lblOk);l.set(m.errMsg_,"innerHTML",b&&b.details&&b.details.httpStatus?c.invalidUser:c.noAuthService);a.show(m.errMsg_)}))}},cancel_:function(){q.generateDfd_&&q.generateDfd_.cancel();var c=q.dfd_,b=q.resUrl_,
e=q.serverInfo_;q.btnSubmit_.set("disabled",!1);q.dfd_=q.serverInfo_=q.generateDfd_=q.resUrl_=null;a.hide(q.errMsg_);g._DialogLevelManager.hide(q);q.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:e});b=new d("identity-manager:user-aborted","ABORTED");c.reject(b)}}),m=q.domNode;q.form_=b.byNode(m.getElementsByClassName("esriIdForm")[0]);q.txtUser_=b.byNode(m.getElementsByClassName("esriIdUser")[0]);q.txtPwd_=b.byNode(m.getElementsByClassName("esriIdPwd")[0]);q.btnSubmit_=b.byNode(m.getElementsByClassName("esriIdSubmit")[0]);
q.btnCancel_=b.byNode(m.getElementsByClassName("esriIdCancel")[0]);q.resLink_=m.getElementsByClassName("resLink")[0];q.serverLink_=m.getElementsByClassName("serverLink")[0];q.errMsg_=m.getElementsByClassName("esriErrorMsg")[0];q.connect(q.txtUser_,"onKeyPress",q.keypressed_);q.connect(q.txtPwd_,"onKeyPress",q.keypressed_);q.connect(q.btnSubmit_,"onClick",q.execute_);q.connect(q.btnCancel_,"onClick",q.onCancel);q.connect(q,"onCancel",q.cancel_);return q}})})},"dijit/registry":function(){define(["dojo/_base/array",
"dojo/_base/window","./main"],function(n,k,l){var h={},b={},g={length:0,add:function(f){if(b[f.id])throw Error("Tried to register widget with id\x3d\x3d"+f.id+" but that id is already registered");b[f.id]=f;this.length++},remove:function(f){b[f]&&(delete b[f],this.length--)},byId:function(f){return"string"==typeof f?b[f]:f},byNode:function(f){return b[f.getAttribute("widgetId")]},toArray:function(){var f=[],e;for(e in b)f.push(b[e]);return f},getUniqueId:function(f){var e;do e=f+"_"+(f in h?++h[f]:
h[f]=0);while(b[e]);return"dijit"==l._scopeName?e:l._scopeName+"_"+e},findWidgets:function(f,e){function d(c){for(c=c.firstChild;c;c=c.nextSibling)if(1==c.nodeType){var m=c.getAttribute("widgetId");m?(m=b[m])&&a.push(m):c!==e&&d(c)}}var a=[];d(f);return a},_destroyAll:function(){l._curFocus=null;l._prevFocus=null;l._activeStack=[];n.forEach(g.findWidgets(k.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(f){for(;f;){var e=
1==f.nodeType&&f.getAttribute("widgetId");if(e)return b[e];f=f.parentNode}return null},_hash:b};return l.registry=g})},"dijit/main":function(){define(["dojo/_base/kernel"],function(n){return n.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q,E,D,y,u,z,t,A,G,J,H,K,F,N,L,Q){function C(){}var p=new b;p.resolve(!0);t=h("dijit._DialogBase"+(q("dojo-bidi")?"_NoBidi":""),[G,H,K,J],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:t.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=c.getLocalization("dijit","common");r.mixin(this,a);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);l.after(this,"onExecute",r.hitch(this,"hide"),!0);l.after(this,"onCancel",r.hitch(this,"hide"),!0);v(this.closeButtonNode,
E.press,function(a){a.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&I.isTop(this)&&(this._getFocusItems(),z.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();z.focus(this._firstFocusItem)},_endDrag:function(){var a=e.position(this.domNode),p=D.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),p.h-a.h);a.x=Math.min(Math.max(a.x,0),p.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==q("ie")?u:y)(a,{handle:this.titleBar}),l.after(this._moveable,"onMoveStop",r.hitch(this,"_endDrag"),!0)):f.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":k.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:r.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!f.contains(this.ownerDocumentBody,"dojoMove")){var a=
this.domNode,p=D.getBox(this.ownerDocument),b=this._relativePosition,c=e.position(a);d.set(a,{left:Math.floor(p.l+(b?Math.min(b.x,p.w-c.w):(p.w-c.w)/2))+"px",top:Math.floor(p.t+(b?Math.min(b.y,p.h-c.h):(p.h-c.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==m.TAB){this._getFocusItems();var p=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):p==this._firstFocusItem&&a.shiftKey?(z.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):p!=this._lastFocusItem||
a.shiftKey||(z.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==m.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return p.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),I.hide(this));var c=D.get(this.ownerDocument);this._modalconnects.push(v(c,"scroll",r.hitch(this,"resize",null)));this._modalconnects.push(v(this.domNode,
"keydown",r.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var w;this._fadeInDeferred=new b(r.hitch(this,function(){w.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,C);c=this._fadeInDeferred.promise;w=a.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:r.hitch(this,function(){I.show(this,this.underlayAttrs)}),onEnd:r.hitch(this,function(){this.autofocus&&I.isTop(this)&&(this._getFocusItems(),
z.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return c},hide:function(){if(!this._alreadyInitialized||!this.open)return p.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var c;this._fadeOutDeferred=new b(r.hitch(this,function(){c.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,C);this._fadeOutDeferred.then(r.hitch(this,"onHide"));var d=this._fadeOutDeferred.promise;c=a.fadeOut({node:this.domNode,duration:this.duration,
onEnd:r.hitch(this,function(){this.domNode.style.display="none";I.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var w;w=this._modalconnects.pop();)w.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return d},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),k.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&d.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var p=D.getBox(this.ownerDocument);p.w*=this.maxRatio;p.h*=this.maxRatio;var c=e.position(this.domNode);this._shrunk=!1;c.w>=p.w&&(a={w:p.w},e.setMarginBox(this.domNode,a),c=e.position(this.domNode),this._shrunk=
!0);c.h>=p.h&&(a||(a={w:c.w}),a.h=p.h,this._shrunk=!0);a&&(a.w||(a.w=c.w),a.h||(a.h=c.h))}if(a){e.setMarginBox(this.domNode,a);p=[];this.titleBar&&p.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&p.push({domNode:this.actionBarNode,region:"bottom"});c={domNode:this.containerNode,region:"center"};p.push(c);var b=L.marginBox2contentBox(this.domNode,a);L.layoutChildren(this.domNode,b,p);this._singleChild?(p=L.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:p.w,h:p.h})):
(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();q("touch")||a||this._position()}},_layoutChildren:function(){k.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();I.hide(this);this.inherited(arguments)}});q("dojo-bidi")&&(t=h("dijit._DialogBase",
t,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var w=h("dijit.Dialog",[N,t],{});w._DialogBase=t;var I=w._DialogLevelManager={_beginZIndex:950,show:function(a,p){B[B.length-1].focus=z.curNode;var c=B[B.length-1].dialog?B[B.length-1].zIndex+2:w._DialogLevelManager._beginZIndex;d.set(a.domNode,"zIndex",c);F.show(p,c-1);
B.push({dialog:a,underlayAttrs:p,zIndex:c})},hide:function(a){if(B[B.length-1].dialog==a){B.pop();var p=B[B.length-1];1==B.length?F.hide():F.show(p.underlayAttrs,p.zIndex-1);if(a.refocus&&(a=p.focus,!p.dialog||a&&g.isDescendant(a,p.dialog.domNode)||(p.dialog._getFocusItems(),a=p.dialog._firstFocusItem),a))try{a.focus()}catch(O){}}else p=k.indexOf(k.map(B,function(a){return a.dialog}),a),-1!=p&&B.splice(p,1)},isTop:function(a){return B[B.length-1].dialog==a}},B=w._dialogStack=[{dialog:null,focus:null,
underlayAttrs:null}];z.watch("curNode",function(a,p,c){a=B[B.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==a.ownerDocument){do if(c==a.domNode||f.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});q("dijit-legacy-requires")&&x(0,function(){n(["dijit/TooltipDialog"])});return w})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,k,l,h,b,g,f,e,d,a){function c(a,
c,b){return x&&b?function(a,p){return g(a,b,p)}:E?function(b,p){var d=g(b,c,function(a){p.call(this,a);K=(new Date).getTime()}),e=g(b,a,function(a){(!K||(new Date).getTime()>K+1E3)&&p.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:function(c,p){return g(c,a,p)}}function m(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function r(c,b,d){if(!e.isRight(c)){var f=m(c.target);if(y=!c.target.disabled&&f&&f.dojoClick)if(z=(u="useTarget"==y)?f:c.target,u&&c.preventDefault(),
t=c.changedTouches?c.changedTouches[0].pageX-a.global.pageXOffset:c.clientX,A=c.changedTouches?c.changedTouches[0].pageY-a.global.pageYOffset:c.clientY,G=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,J=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!D){c=function(p){a.doc.addEventListener(p,function(a){var c=a.target;y&&!a._dojo_click&&(new Date).getTime()<=H+1E3&&("INPUT"!=c.tagName||!h.contains(c,"dijitOffScreen"))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),
"click"==p&&("INPUT"!=c.tagName||"radio"==c.type&&(h.contains(c,"dijitCheckBoxInput")||h.contains(c,"mblRadioButton"))||"checkbox"==c.type&&(h.contains(c,"dijitCheckBoxInput")||h.contains(c,"mblCheckBox")))&&"TEXTAREA"!=c.tagName&&"AUDIO"!=c.tagName&&"VIDEO"!=c.tagName&&a.preventDefault())},!0)};var p=function(p){y=u?l.isDescendant(a.doc.elementFromPoint(p.changedTouches?p.changedTouches[0].pageX-a.global.pageXOffset:p.clientX,p.changedTouches?p.changedTouches[0].pageY-a.global.pageYOffset:p.clientY),
z):y&&(p.changedTouches?p.changedTouches[0].target:p.target)==z&&Math.abs((p.changedTouches?p.changedTouches[0].pageX-a.global.pageXOffset:p.clientX)-t)<=G&&Math.abs((p.changedTouches?p.changedTouches[0].pageY-a.global.pageYOffset:p.clientY)-A)<=J};D=!0;a.doc.addEventListener(b,function(a){e.isRight(a)||(p(a),u&&a.preventDefault())},!0);a.doc.addEventListener(d,function(a){if(!e.isRight(a)&&(p(a),y)){var c=function(p){var c=document.createEvent("MouseEvents");c._dojo_click=!0;c.initMouseEvent(p,!0,
!0,a.view,a.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return c};H=(new Date).getTime();var b=u?z:a.target;"LABEL"===b.tagName&&(b=l.byId(b.getAttribute("for"))||b);var d=a.changedTouches?a.changedTouches[0]:a,w=c("mousedown"),m=c("mouseup"),f=c("click");setTimeout(function(){g.emit(b,"mousedown",w);g.emit(b,"mouseup",m);g.emit(b,"click",f);H=(new Date).getTime()},0)}},!0);c("click");c("mousedown");c("mouseup")}}}var v=5>f("ios"),x=f("pointer-events")||
0,q=function(){var a={},c;for(c in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[c]="pointer"+c;return a}(),E=f("touch-events"),D,y,u=!1,z,t,A,G,J,H,K,F;f("touch")&&(x?d(function(){a.doc.addEventListener(q.down,function(a){r(a,q.move,q.up)},!0)}):d(function(){function c(a){var c=b.delegate(a,{bubbles:!0});6<=f("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,c.targetTouches=a.targetTouches);return c}F=a.body();
a.doc.addEventListener("touchstart",function(a){K=(new Date).getTime();var c=F;F=a.target;g.emit(c,"dojotouchout",{relatedTarget:F,bubbles:!0});g.emit(F,"dojotouchover",{relatedTarget:c,bubbles:!0});r(a,"touchmove","touchend")},!0);g(a.doc,"touchmove",function(b){K=(new Date).getTime();var d=a.doc.elementFromPoint(b.pageX-(v?0:a.global.pageXOffset),b.pageY-(v?0:a.global.pageYOffset));d&&(F!==d&&(g.emit(F,"dojotouchout",{relatedTarget:d,bubbles:!0}),g.emit(d,"dojotouchover",{relatedTarget:F,bubbles:!0}),
F=d),g.emit(d,"dojotouchmove",c(b))||b.preventDefault())});g(a.doc,"touchend",function(b){K=(new Date).getTime();var d=a.doc.elementFromPoint(b.pageX-(v?0:a.global.pageXOffset),b.pageY-(v?0:a.global.pageYOffset))||a.body();g.emit(d,"dojotouchend",c(b))})}));k={press:c("mousedown","touchstart",q.down),move:c("mousemove","dojotouchmove",q.move),release:c("mouseup","dojotouchend",q.up),cancel:c(e.leave,"touchcancel",x?q.cancel:null),over:c("mouseover","dojotouchover",q.over),out:c("mouseout","dojotouchout",
q.out),enter:e._eventHandler(c("mouseover","dojotouchover",q.over)),leave:e._eventHandler(c("mouseout","dojotouchout",q.out))};return n.touch=k})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,k,l,h,b,g,f){k.add("rtl-adjust-position-for-verticalScrollBar",function(d,a){d=l.body(a);a=f.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",
top:"0",width:"64px",height:"64px"}},d,"last");var c=f.create("div",{style:{overflow:"hidden",direction:"ltr"}},a,"last"),e=0!=b.position(c).x;a.removeChild(c);d.removeChild(a);return e});k.add("position-fixed-support",function(d,a){d=l.body(a);a=f.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},d,"last");var c=f.create("span",{style:{position:"fixed",left:"0",top:"0"}},a,"last"),e=b.position(c).x!=b.position(a).x;a.removeChild(c);d.removeChild(a);return e});var e=
{getBox:function(d){d=d||l.doc;var a="BackCompat"==d.compatMode?l.body(d):d.documentElement,c=b.docScroll(d);if(k("touch")){var f=e.get(d);d=f.innerWidth||a.clientWidth;a=f.innerHeight||a.clientHeight}else d=a.clientWidth,a=a.clientHeight;return{l:c.x,t:c.y,w:d,h:a}},get:function(b){if(k("ie")&&e!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(d,
a){try{d=h.byId(d);var c=d.ownerDocument||l.doc,e=l.body(c),f=c.documentElement||e.parentNode,v=k("ie")||k("trident"),x=k("webkit");if(d!=e&&d!=f)if(!(k("mozilla")||v||x||k("opera")||k("trident")||k("edge"))&&"scrollIntoView"in d)d.scrollIntoView(!1);else{var q="BackCompat"==c.compatMode,E=Math.min(e.clientWidth||f.clientWidth,f.clientWidth||e.clientWidth),n=Math.min(e.clientHeight||f.clientHeight,f.clientHeight||e.clientHeight),c=x||q?e:f,y=a||b.position(d),u=d.parentNode;a=function(a){return 6>=
v||7==v&&q?!1:k("position-fixed-support")&&"fixed"==g.get(a,"position").toLowerCase()};var z=this,x=function(a,p,c){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(p,c):(p&&(a.scrollLeft+=p),c&&(a.scrollTop+=c))};if(!a(d))for(;u;){u==e&&(u=c);var t=b.position(u),A=a(u),G="rtl"==g.getComputedStyle(u).direction.toLowerCase();if(u==c)t.w=E,t.h=n,c==f&&(v||k("trident"))&&G&&(t.x+=c.offsetWidth-t.w),t.x=0,t.y=0;else{var J=b.getPadBorderExtents(u);t.w-=J.w;t.h-=J.h;t.x+=J.l;t.y+=J.t;
var H=u.clientWidth,K=t.w-H;0<H&&0<K&&(G&&k("rtl-adjust-position-for-verticalScrollBar")&&(t.x+=K),t.w=H);H=u.clientHeight;K=t.h-H;0<H&&0<K&&(t.h=H)}A&&(0>t.y&&(t.h+=t.y,t.y=0),0>t.x&&(t.w+=t.x,t.x=0),t.y+t.h>n&&(t.h=n-t.y),t.x+t.w>E&&(t.w=E-t.x));var F=y.x-t.x,N=y.y-t.y,L=F+y.w-t.w,Q=N+y.h-t.h,C,p;0<L*F&&(u.scrollLeft||u==c||u.scrollWidth>u.offsetHeight)&&(C=Math[0>F?"max":"min"](F,L),G&&(8==v&&!q||5<=k("trident"))&&(C=-C),p=u.scrollLeft,x(u,C,0),C=u.scrollLeft-p,y.x-=C);0<Q*N&&(u.scrollTop||u==
c||u.scrollHeight>u.offsetHeight)&&(C=Math.ceil(Math[0>N?"max":"min"](N,Q)),p=u.scrollTop,x(u,0,C),C=u.scrollTop-p,y.y-=C);u=u!=c&&!A&&u.parentNode}}}catch(w){console.error("scrollIntoView: "+w),d.scrollIntoView(!1)}}};n.setObject("dojo.window",e);return e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m,r){var v,x=function(){},
x=function(a,c){"touchAction"in document.body.style?v="touchAction":"msTouchAction"in document.body.style&&(v="msTouchAction");x=function(a,c){a.style[v]=c};x(a,c)};return k("dojo.dnd.Moveable",[g],{handle:"",delay:0,skip:!1,constructor:function(c,b){this.node=h.byId(c);x(this.node,"none");b||(b={});this.handle=b.handle?h.byId(b.handle):null;this.handle||(this.handle=this.node);this.delay=0<b.delay?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:m;this.events=[e(this.handle,a.press,l.hitch(this,
"onMouseDown")),e(this.handle,"dragstart",l.hitch(this,"onSelectStart")),e(this.handle,"selectstart",l.hitch(this,"onSelectStart"))]},markupFactory:function(a,c,b){return new b(c,a)},destroy:function(){n.forEach(this.events,function(a){a.remove()});x(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!c.isFormElement(b)){if(this.delay)this.events.push(e(this.handle,a.move,l.hitch(this,"onMouseMove")),e(this.handle.ownerDocument,a.release,l.hitch(this,"onMouseUp"))),
this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var c=0;2>c;++c)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&c.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},
onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){d.publish("/dnd/move/start",a);b.add(r.body(),"dojoMove");b.add(this.node,"dojoMoveItem")},onMoveStop:function(a){d.publish("/dnd/move/stop",a);b.remove(r.body(),"dojoMove");b.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,c){this.onMoving(a,c);var b=a.node.style;b.left=c.l+"px";b.top=c.t+"px";this.onMoved(a,c)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff",
"../_base/kernel","../_base/lang","../dom"],function(n,k,l,h){var b=l.getObject("dojo.dnd",!0);b.getCopyKeyState=function(b){return b[n("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){var g;do g=k._scopeName+"Unique"+ ++b._uniqueId;while(h.byId(g));return g};b._empty={};b.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return b})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c,m,r){return k("dojo.dnd.Mover",[d],{constructor:function(b,d,e){function f(a){a.preventDefault();a.stopPropagation()}this.node=g.byId(b);this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=d.button;d=this.host=e;b=b.ownerDocument;this.events=[a(b,c.move,l.hitch(this,"onFirstMove")),a(b,c.move,l.hitch(this,"onMouseMove")),a(b,c.release,l.hitch(this,"onMouseUp")),a(b,"dragstart",f),a(b.body,"selectstart",f)];r.autoScrollStart(b);if(d&&d.onMoveStart)d.onMoveStart(this)},
onMouseMove:function(a){r.autoScroll(a);var c=this.marginBox;this.host.onMove(this,{l:c.l+a.pageX,t:c.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(h("webkit")&&h("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var c=this.node.style,d,m=this.host;switch(c.position){case "relative":case "absolute":d=Math.round(parseFloat(c.left))||0;c=Math.round(parseFloat(c.top))||0;break;
default:c.position="absolute";c=f.getMarginBox(this.node);d=b.doc.body;var g=e.getComputedStyle(d),r=f.getMarginBox(d,g),g=f.getContentBox(d,g);d=c.l-(g.l-r.l);c=c.t-(g.t-r.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=c-this.marginBox.t;if(m&&m.onFirstMove)m.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(n,k,l,h,b,g){var f={};n.setObject("dojo.dnd.autoscroll",f);f.getViewport=g.getBox;f.V_TRIGGER_AUTOSCROLL=32;f.H_TRIGGER_AUTOSCROLL=32;f.V_AUTOSCROLL_VALUE=16;f.H_AUTOSCROLL_VALUE=16;var e,d=l.doc,a=Infinity,c=Infinity;f.autoScrollStart=function(b){d=b;e=g.getBox(d);b=l.body(d).parentNode;a=Math.max(b.scrollHeight-e.h,0);c=Math.max(b.scrollWidth-e.w,0)};f.autoScroll=function(b){var m=e||g.getBox(d),h=l.body(d).parentNode,x=0,q=0;b.clientX<f.H_TRIGGER_AUTOSCROLL?x=-f.H_AUTOSCROLL_VALUE:b.clientX>
m.w-f.H_TRIGGER_AUTOSCROLL&&(x=Math.min(f.H_AUTOSCROLL_VALUE,c-h.scrollLeft));b.clientY<f.V_TRIGGER_AUTOSCROLL?q=-f.V_AUTOSCROLL_VALUE:b.clientY>m.h-f.V_TRIGGER_AUTOSCROLL&&(q=Math.min(f.V_AUTOSCROLL_VALUE,a-h.scrollTop));window.scrollBy(x,q)};f._validNodes={div:1,p:1,td:1};f._validOverflow={auto:1,scroll:1};f.autoScrollNodes=function(a){for(var c,d,e,g,m,n=0,y=0,u=a.target;u;){if(1==u.nodeType&&u.tagName.toLowerCase()in f._validNodes){e=b.getComputedStyle(u);m=e.overflowX.toLowerCase()in f._validOverflow;
g=e.overflowY.toLowerCase()in f._validOverflow;if(m||g)c=h.getContentBox(u,e),d=h.position(u,!0);if(m){e=Math.min(f.H_TRIGGER_AUTOSCROLL,c.w/2);m=a.pageX-d.x;if(k("webkit")||k("opera"))m+=l.body().scrollLeft;n=0;0<m&&m<c.w&&(m<e?n=-e:m>c.w-e&&(n=e),u.scrollLeft+=n)}if(g){g=Math.min(f.V_TRIGGER_AUTOSCROLL,c.h/2);e=a.pageY-d.y;if(k("webkit")||k("opera"))e+=l.body().scrollTop;y=0;0<e&&e<c.h&&(e<g?y=-g:e>c.h-g&&(y=g),u.scrollTop+=y)}if(n||y)return}try{u=u.parentNode}catch(z){u=null}}f.autoScroll(a)};
return f})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(n,k){var l=k.prototype.onMove;return n("dojo.dnd.TimedMoveable",k,{timeout:40,constructor:function(h,b){b||(b={});b.timeout&&"number"==typeof b.timeout&&0<=b.timeout&&(this.timeout=b.timeout)},onMoveStop:function(h){h._timer&&(clearTimeout(h._timer),l.call(this,h,h._leftTop));k.prototype.onMoveStop.apply(this,arguments)},onMove:function(h,b){h._leftTop=b;if(!h._timer){var g=this;h._timer=setTimeout(function(){h._timer=
null;l.call(g,h,h._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q,E){var D,y,u=new (k([m,f],{curNode:null,activeStack:[],constructor:function(){var a=e.hitch(this,function(a){l.isDescendant(this.curNode,a)&&this.set("curNode",
null);l.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(g,"empty",a);n.before(g,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var e=this,f=a.document&&a.document.body;if(f){var g=c("pointer-events")?"pointerdown":c("touch-events")?"mousedown, touchstart":"mousedown",m=d(a.document,g,function(a){a&&a.target&&null==a.target.parentNode||e._onTouchNode(b||a.target,"mouse")}),r=d(f,"focusin",function(a){if(a.target.tagName){var c=
a.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(x.isFocusable(a.target)?e._onFocusNode(b||a.target):e._onTouchNode(b||a.target))}}),t=d(f,"focusout",function(a){e._onBlurNode(b||a.target)});return{remove:function(){m.remove();r.remove();t.remove();f=m=r=t=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<D+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(e.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",
null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(e.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,c){y=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);b.contains(a,"dijitPopup")&&(a=a.firstChild);var d=[];try{for(;a;){var e=h.get(a,"dijitPopupParent");if(e)a=q.byId(e).domNode;
else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===r.body())break;a=v.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),m=f&&q.byId(f);!m||"mouse"==c&&m.get("disabled")||d.unshift(f);a=a.parentNode}}}catch(F){}this._setStack(d,c)},_onFocusNode:function(a){a&&9!=a.nodeType&&(D=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),
this.set("curNode",a)))},_setStack:function(a,c){var b=this.activeStack,d=b.length-1,e=a.length-1;if(a[e]!=b[d]){this.set("activeStack",a);var f;for(f=d;0<=f&&b[f]!=a[f];f--)if(d=q.byId(b[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(c),this.emit("widget-blur",d,c);for(f++;f<=e;f++)if(d=q.byId(a[f]))d.set("focused",!0),d._focusManager==this&&d._onFocus(c),this.emit("widget-focus",d,c)}},focus:function(a){if(a)try{a.focus()}catch(A){}}}));a(function(){var a=u.registerWin(v.get(document));
c("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});E.focus=function(a){u.focus(a)};for(var z in u)/^_/.test(z)||(E.focus[z]="function"==typeof u[z]?e.hitch(u,z):u[z]);u.watch(function(a,c,b){E.focus[a]=b});return u})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(n,k,l,h){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(b){var g=this._attrPairNames;return g[b]?g[b]:g[b]={s:"_"+b+"Setter",g:"_"+b+"Getter"}},
postscript:function(b){b&&this.set(b)},_get:function(b,g){return"function"===typeof this[g.g]?this[g.g]():this[b]},get:function(b){return this._get(b,this._getAttrNames(b))},set:function(b,g){if("object"===typeof b){for(var f in b)b.hasOwnProperty(f)&&"_watchCallbacks"!=f&&this.set(f,b[f]);return this}f=this._getAttrNames(b);var e=this._get(b,f);f=this[f.s];var d;"function"===typeof f?d=f.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=g;if(this._watchCallbacks){var a=this;h(d,function(){a._watchCallbacks(b,
e,g)})}return this},_changeAttrValue:function(b,g){var f=this.get(b);this[b]=g;this._watchCallbacks&&this._watchCallbacks(b,f,g);return this},watch:function(b,g){var f=this._watchCallbacks;if(!f)var e=this,f=this._watchCallbacks=function(a,c,b,d){var m=function(d){if(d){d=d.slice();for(var f=0,m=d.length;f<m;f++)d[f].call(e,a,c,b)}};m(f["_"+a]);d||m(f["*"])};g||"function"!==typeof b?b="_"+b:(g=b,b="*");var d=f[b];"object"!==typeof d&&(d=f[b]=[]);d.push(g);b={};b.unwatch=b.remove=function(){var a=
l.indexOf(d,g);-1<a&&d.splice(a,1)};return b}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(n,k,l,h,b,g,f){var e={_isElementShown:function(b){var a=h.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=l.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return l.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;
case "iframe":var a;try{var c=b.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;a=c.body}catch(m){try{a=b.contentWindow.document.body}catch(r){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){if(!l.get(b,"disabled"))return l.has(b,"tabIndex")?+l.get(b,"tabIndex"):e.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=e.effectiveTabIndex(b)},isFocusable:function(b){return-1<=
e.effectiveTabIndex(b)},_getTabNavigable:function(b){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function c(c){return D[a(c)]||c}var d,f,h,k,q,n,D={},y=e._isElementShown,u=e.effectiveTabIndex,z=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(!(1!=c.nodeType||9>=g("ie")&&"HTML"!==c.scopeName)&&y(c)){var b=u(c);if(0<=b){if(0==b)d||(d=c),f=c;else if(0<b){if(!h||b<k)k=b,h=c;if(!q||b>=n)n=b,q=c}b=a(c);l.get(c,"checked")&&
b&&(D[b]=c)}"SELECT"!=c.nodeName.toUpperCase()&&z(c)}};y(b)&&z(b);return{first:c(d),last:c(f),lowest:c(h),highest:c(q)}},getFirstInTabbingOrder:function(b,a){b=e._getTabNavigable(k.byId(b,a));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(b,a){b=e._getTabNavigable(k.byId(b,a));return b.last?b.last:b.highest}};b.mixin(f,e);return e})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(n,k,l,h,b){var g=
{};n.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(b){g[b]=h[b]});l.mixin(g,{defaultDuration:k.defaultDuration||200});l.mixin(b,g);return b})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m,r){function v(){}
function x(a){return function(c,b,d,e){return c&&"string"==typeof b&&c[b]==v?c.on(b.substring(2).toLowerCase(),f.hitch(d,e)):a.apply(l,arguments)}}n.around(l,"connect",x);g.connect&&n.around(g,"connect",x);n=h("dijit._Widget",[c,m,r],{onClick:v,onDblClick:v,onKeyDown:v,onKeyPress:v,onKeyUp:v,onMouseDown:v,onMouseMove:v,onMouseOut:v,onMouseOver:v,onMouseLeave:v,onMouseEnter:v,onMouseUp:v,constructor:function(a){this._toConnect={};for(var c in a)this[c]===v&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=
a[c],delete a[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,c){return this[this._onMap(a)]===v?l.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){g.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,c)},attr:function(a,
c){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){g.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});b("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q,E,D,y,u,z,t,A){function G(a){return function(c){e[c?"set":"remove"](this.domNode,a,c);this._set(a,c)}}r.add("dijit-legacy-requires",!v.isAsync);r.add("dojo-bidi",!1);r("dijit-legacy-requires")&&E(0,function(){n(["dijit/_base/manager"])});var J={};h=g("dijit._WidgetBase",[D,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:G("lang"),dir:"",_setDirAttr:G("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:h.blankGif||n.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var c=a.prototype,b=a._setterAttrs=[],a=a._onMap={},d;for(d in c.attributeMap)b.push(d);for(d in c)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+
d.substr(5,d.length-9),c.attributeMap&&d in c.attributeMap||b.push(d))}},postscript:function(a,c){this.create(a,c)},create:function(a,c){this._introspect();this.srcNodeRef=f.byId(c);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,x.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=u.body(this.ownerDocument);A.add(this);this.buildRendering();var b;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),b=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},c;for(c in this.params||{})a[c]=this._get(c);k.forEach(this.constructor._setterAttrs,
function(c){if(!(c in a)){var b=this._get(c);b&&this.set(c,b)}},this);for(c in a)this.set(c,a[c])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(k.map(a,function(a){return a+"Rtl"})));d.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,k.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!x.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function c(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();k.forEach(this._connects,x.hitch(this,"disconnect"));k.forEach(this._supportingWidgets,c);this.domNode&&k.forEach(A.findWidgets(this.domNode,this.containerNode),c);this.destroyRendering(a);
A.remove(this.id);this._destroyed=!0},destroyRendering:function(c){this.bgIframe&&(this.bgIframe.destroy(c),delete this.bgIframe);this.domNode&&(c?e.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(c||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){k.forEach(this.getChildren(),function(c){c.destroyRecursive&&c.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var c=this.domNode;x.isObject(a)?
m.set(c,a):c.style.cssText=c.style.cssText?c.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,c,b){b=3<=arguments.length?b:this.attributeMap[a];k.forEach(x.isArray(b)?b:[b],function(b){var f=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":x.isFunction(c)&&(c=x.hitch(this,c));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?e.set(f,b,c):f.set(b,c);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(c));
break;case "textContent":f.textContent=c;break;case "innerHTML":f.innerHTML=c;break;case "class":d.replace(f,c,this[a]);break;case "toggleClass":d.toggle(f,b.className||a,c)}},this)},get:function(a){var c=this._getAttrNames(a);return this[c.g]?this[c.g]():this._get(a)},set:function(a,c){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var d=this[b.s];if(x.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&
!x.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,m;if((m=f)&&!(m=J[f])){m=this[d];var p={},w;for(w in m)p[w.toLowerCase()]=!0;m=J[f]=p}w=m;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:w&&b.l in w&&"function"!=typeof c||/^aria-|^data-|^role$/.test(a)?d:null;null!=b&&this._attrToDom(a,c,b);this._set(a,c)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var c=this._attrPairNames;if(c[a])return c[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return c[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,c){var b=this[a];this[a]=c;!this._created||b===c||b!==b&&c!==c||(this._watchCallbacks&&this._watchCallbacks(a,b,c),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:c}}))},_get:function(a){return this[a]},emit:function(a,c,b){c=c||{};void 0===c.bubbles&&(c.bubbles=!0);void 0===c.cancelable&&(c.cancelable=!0);c.detail||(c.detail={});c.detail.widget=this;var d,e=this["on"+a];e&&
(d=e.apply(this,b?b:[c]));this._started&&!this._beingDestroyed&&q.emit(this.domNode,a.toLowerCase(),c);return d},on:function(a,c){var b=this._onMap(a);return b?l.after(this,b,c,!0):this.own(q(this.domNode,a,c))[0]},_onMap:function(a){var c=this.constructor,b=c._onMap;if(!b){var b=c._onMap={},d;for(d in c.prototype)/^on/.test(d)&&(b[d.replace(/^on/,"").toLowerCase()]=d)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,c,d){return this.own(b.connect(a,c,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(a,c){return this.own(y.subscribe(a,x.hitch(this,c)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():c.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=m.get(this.domNode,"display")},placeAt:function(c,b){var d=!c.tagName&&A.byId(c);!d||!d.addChild||b&&"number"!==typeof b?(c=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(b||"")?d.containerNode:d.domNode:f.byId(c,this.ownerDocument),a.place(this.domNode,c,b),!this._started&&(this.getParent()||{})._started&&this.startup()):d.addChild(this,b);return this},defer:function(a,c){var b=setTimeout(x.hitch(this,function(){b&&(b=null,this._destroyed||x.hitch(this,a)())}),c||0);return{remove:function(){b&&
(clearTimeout(b),b=null);return null}}}});r("dojo-bidi")&&h.extend(t);return h})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(n,k,l){return l("dijit.Destroyable",null,{destroy:function(h){this._destroyed=!0},own:function(){var h=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(b){function g(){e.remove();n.forEach(d,function(a){a.remove()})}var f,e=k.before(this,"destroy",function(a){b[f](a)}),d=[];b.then?(f="cancel",b.then(g,
g)):n.forEach(h,function(a){"function"===typeof b[a]&&(f||(f=a),d.push(k.after(b,a,g,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(n,k,l,h,b,g){n=h("dijit._OnDijitClickMixin",null,{connect:function(b,e,d){return this.inherited(arguments,[b,"ondijitclick"==e?g:e,d])}});n.a11yclick=g;return n})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on",
"dojo/touch"],function(n,k,l,h){function b(b){if((b.keyCode===n.ENTER||b.keyCode===n.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var g;l(document,"keydown",function(e){b(e)?(g=e.target,e.preventDefault()):g=null});l(document,"keyup",function(e){b(e)&&e.target==g&&(g=null,l.emit(e.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type}))});var f=function(b,
d){b.dojoClick=!0;return l(b,"click",d)};f.click=f;f.press=function(b,d){var a=l(b,h.press,function(a){("mousedown"!=a.type||k.isLeft(a))&&d(a)}),c=l(b,"keydown",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||d(a)});return{remove:function(){a.remove();c.remove()}}};f.release=function(b,d){var a=l(b,h.release,function(a){("mouseup"!=a.type||k.isLeft(a))&&d(a)}),c=l(b,"keyup",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||d(a)});return{remove:function(){a.remove();c.remove()}}};f.move=
h.move;return f})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,k,l,h){h.extend(k,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return l("dijit._FocusMixin",null,{_focusManager:n})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(n,k,l,h,b){var g=b.doc.documentElement;b=h("ie");var f=
h("trident"),e=h("opera"),d=Math.floor,a=h("ff"),c=n.boxModel.replace(/-/,""),e={dj_quirks:0,dj_opera:e,dj_khtml:0,dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_edge:h("edge"),dj_gecko:h("mozilla"),dj_ios:h("ios"),dj_android:0};b&&(e.dj_ie=!0,e["dj_ie"+d(b)]=!0,e.dj_iequirks=0);f&&(e.dj_trident=!0,e["dj_trident"+d(f)]=!0);a&&(e["dj_ff"+d(a)]=!0);e["dj_"+c]=!0;var m="",r;for(r in e)e[r]&&(m+=r+" ");g.className=k.trim(g.className+" "+m);l(function(){if(!n.isBodyLtr()){var a="dj_rtl dijitRtl "+
m.replace(/ /g,"-rtl ");g.className=k.trim(g.className+" "+a+"dj_rtl dijitRtl "+m.replace(/ /g,"-rtl "))}});return h})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(n,k,l,h){l(function(){k("highcontrast")&&n.add(h.body(),"dijit_a11y")});return k})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(n,k,l,h,b,g,f){b.add("highcontrast",function(){var e=f.doc.createElement("div");
try{e.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(k.blankGif||n.toUrl("./resources/blank.gif"))+'");';f.body().appendChild(e);var d=h.getComputedStyle(e),a=d.backgroundImage;return d.borderTopColor==d.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a)}catch(c){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+c.toString()),!1}finally{8>=b("ie")?e.outerHTML="":f.body().removeChild(e)}});
g(function(){b("highcontrast")&&l.add(f.body(),"dj_a11y")});return b})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(n,k,l,h,b,g,f,e){var d=k("dijit._TemplatedMixin",e,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var c=this.declaredClass,b=this;return f.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=h.getObject(d.substr(1),
!1,b));if("undefined"==typeof a)throw Error(c+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=n(this.templatePath,{sanitize:!0}));var a=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),
c;if(h.isString(a)){if(c=l.toDom(this._stringRepl(a),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var c=this.containerNode;if(a&&c)for(;a.hasChildNodes();)c.appendChild(a.firstChild)}});d._templateCache={};d.getCachedTemplate=function(a,c,b){var e=d._templateCache,g=a,m=e[g];if(m){try{if(!m.ownerDocument||m.ownerDocument==
(b||document))return m}catch(q){}l.destroy(m)}a=f.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return e[g]=a;c=l.toDom(a,b);if(1!=c.nodeType)throw Error("Invalid template: "+a);return e[g]=c};g("ie")&&b(window,"unload",function(){var a=d._templateCache,c;for(c in a){var b=a[c];"object"==typeof b&&l.destroy(b);delete a[c]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],
function(n,k,l,h){var b;l("host-browser")?b=function(a,c,b){h(a,{sync:!!c,headers:{"X-Requested-With":null}}).then(b)}:k.getText?b=k.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var g={},f=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var c=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(a=c[1])}else a="";return a},e={},d={};n.cache=function(a,c,d){var e;"string"==typeof a?/\//.test(a)?(e=a,d=c):
e=k.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")):(e=a+"",d=c);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return g[e]=a,d?f(a):a;if(null===a)return delete g[e],null;e in g||b(e,!0,function(a){g[e]=a});return d?f(g[e]):g[e]};return{dynamic:!0,normalize:function(a,c){a=a.split("!");var b=a[0];return(/^\./.test(b)?c(b):b)+(a[1]?"!"+a[1]:"")},load:function(a,c,m){a=a.split("!");var h=1<a.length,k=a[0],l=c.toUrl(a[0]);a="url:"+l;var q=e,n=function(a){m(h?f(a):a)};k in g?
q=g[k]:c.cache&&a in c.cache?q=c.cache[a]:l in g&&(q=g[l]);if(q===e)if(d[l])d[l].push(n);else{var D=d[l]=[n];b(l,!c.async,function(a){g[k]=g[l]=a;for(var c=0;c<D.length;)D[c++](a);delete d[l]})}else n(q)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,k,l,h,b,g,f,e,d){var a=b.delegate(e,{mouseenter:g.enter,mouseleave:g.leave,keypress:l._keypress}),c;l=h("dijit._AttachMixin",
null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var c=a;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(a,c){return a.getAttribute(c)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==a)break;for(;!c.nextSibling;)if(c=c.parentNode,c==a)return;c=
c.nextSibling}},_processTemplateNode:function(a,c,d){var e=!0,f=this.attachScope||this,g=c(a,"dojoAttachPoint")||c(a,"data-dojo-attach-point");if(g)for(var m=g.split(/\s*,\s*/);g=m.shift();)b.isArray(f[g])?f[g].push(a):f[g]=a,e="containerNode"!=g,this._attachPoints.push(g);if(c=c(a,"dojoAttachEvent")||c(a,"data-dojo-attach-event"))for(g=c.split(/\s*,\s*/),m=b.trim;c=g.shift();)if(c){var h=null;-1!=c.indexOf(":")?(h=c.split(":"),c=m(h[0]),h=m(h[1])):c=m(c);h||(h=c);this._attachEvents.push(d(a,c,b.hitch(f,
h)))}return e},_attach:function(b,d,e){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?c||(c=n("./a11yclick")):a[d]||d;return f(b,d,e)},_detachTemplateNodes:function(){var a=this.attachScope||this;k.forEach(this._attachPoints,function(c){delete a[c]});this._attachPoints=[];k.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});b.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return l})},
"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m){k=k("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,g.hitch(this,"_setStateClass"))},
this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){c=c.concat(n.map(c,function(c){return c+a}),"dijit"+a)}var c=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var b="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(b);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?
a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var b=this.stateNode||this.domNode,d={};n.forEach(b.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(a){delete d[a]});n.forEach(c,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);b.className=e.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,c,b){function d(b){h.toggle(a,c+"Active",b)}if(!this.disabled&&!this.readOnly)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":h.toggle(a,
c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":h.toggle(a,c+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":h.toggle(a,c+"Focused",!0);break;case "blur":case "focusout":h.toggle(a,c+"Focused",!1)}},_trackMouseState:function(a,c){a._cssState=c}});e(function(){function b(a,
c,b){if(!b||!l.isDescendant(b,c))for(;c&&c!=b;c=c.parentNode)if(c._cssState){var d=m.getEnclosingWidget(c);d&&(c==d.domNode?d._cssMouseEvent(a):d._subnodeCssMouseEvent(c,c._cssState,a))}}var e=a.body(),g;f(e,d.over,function(a){b(a,a.target,a.relatedTarget)});f(e,d.out,function(a){b(a,a.target,a.relatedTarget)});f(e,c.press,function(a){g=a.target;b(a,g)});f(e,c.release,function(a){b(a,g);g=null});f(e,"focusin, focusout",function(a){var c=a.target;if(c._cssState&&!c.getAttribute("widgetId")){var b=
m.getEnclosingWidget(c);b&&b._subnodeCssMouseEvent(c,c._cssState,a)}})});return k})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(n,k,l,h,b,g){return k("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var e=[];n.forEach(b||this.getChildren(),function(b){"value"in b?e.push(b):e=e.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return e},reset:function(){n.forEach(this._getDescendantFormWidgets(),
function(b){b.reset&&b.reset()})},validate:function(){var b=!1;return n.every(n.map(this._getDescendantFormWidgets(),function(e){e._hasBeenBlurred=!0;var d=e.disabled||!e.validate||e.validate();d||b||(g.scrollIntoView(e.containerNode||e.domNode),e.focus(),b=!0);return d}),function(b){return b})},setValues:function(b){l.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var e={};n.forEach(this._getDescendantFormWidgets(),
function(a){a.name&&(e[a.name]||(e[a.name]=[])).push(a)});for(var d in e)if(e.hasOwnProperty(d)){var a=e[d],c=h.getObject(d,!1,b);void 0!==c&&(c=[].concat(c),"boolean"==typeof a[0].checked?n.forEach(a,function(a){a.set("value",-1!=n.indexOf(c,a._get("value")))}):a[0].multiple?a[0].set("value",c):n.forEach(a,function(a,b){a.set("value",c[b])}))}},getValues:function(){l.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b=
{};n.forEach(this._getDescendantFormWidgets(),function(e){var d=e.name;if(d&&!e.disabled){var a=e.get("value");"boolean"==typeof e.checked?/Radio/.test(e.declaredClass)?!1!==a?h.setObject(d,a,b):(a=h.getObject(d,!1,b),void 0===a&&h.setObject(d,null,b)):(e=h.getObject(d,!1,b),e||(e=[],h.setObject(d,e,b)),!1!==a&&e.push(a)):(e=h.getObject(d,!1,b),"undefined"!=typeof e?h.isArray(e)?e.push(a):h.setObject(d,[e,a],b):h.setObject(d,a,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var b=n.map(this._descendants,function(b){return b.get("state")||""});return 0<=n.indexOf(b,"Error")?"Error":0<=n.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();n.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&
"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var f=this;this.own(b(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=f.domNode&&
f._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(b,d,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(n,k){return n("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var l=k._getTabNavigable(this.domNode);
this._firstFocusItem=l.lowest||l.first||this.closeButtonNode||this.domNode;this._lastFocusItem=l.last||l.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m){var r=n("dijit.DialogUnderlay",[e,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){h.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(g(this.domNode,"keydown",k.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,c=this.domNode.style;c.display="none";var b=f.getBox(this.ownerDocument);c.top=
b.t+"px";c.left=b.l+"px";a.width=b.w+"px";a.height=b.h+"px";c.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new a(this.domNode);var b=f.get(this.ownerDocument);this._modalConnects=[c.on("resize",k.hitch(this,"layout")),g(b,"scroll",k.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});r.show=function(a,c){var d=r._singleton;!d||d._destroyed?d=m._underlay=r._singleton=new r(a):a&&d.set(a);b.set(d.domNode,"zIndex",c);d.open||d.show()};r.hide=function(){var a=r._singleton;a&&!a._destroyed&&a.hide()};return r})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(n,k,l,h,b,g,f,e){e.add("config-bgIframe",(e("ie")||e("trident"))&&
!/IEMobile\/10\.0/.test(navigator.userAgent));var d=new function(){var a=[];this.pop=function(){var c;a.length?(c=a.pop(),c.style.display=""):(9>e("ie")?(c=l.dojoBlankHtmlUrl||n.toUrl("dojo/resources/blank.html")||'javascript:""',c=document.createElement("\x3ciframe src\x3d'"+c+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(c=h.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role",
"presentation"),b.set(c,"opacity",.1)),c.tabIndex=-1);return c};this.push=function(c){c.style.display="none";a.push(c)}};k.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(e("config-bgIframe")){var c=this.iframe=d.pop();a.appendChild(c);7>e("ie")?(this.resize(a),this._conn=f(a,"resize",g.hitch(this,"resize",a))):b.set(c,{width:"100%",height:"100%"})}};g.extend(k.BackgroundIframe,{resize:function(a){this.iframe&&b.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},
destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});return k.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(n,k,l,h,b){var g=new n,f;l(function(){var e=b.getBox();g._rlh=k(window,"resize",function(){var a=b.getBox();if(e.h!=a.h||e.w!=a.w)e=a,g.emit("resize")});if(8==h("ie")){var d=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,g.emit("resize"))},500)}h("ios")&&(k(document,"focusin",function(a){f=a.target}),k(document,"focusout",function(a){f=null}))});g.getEffectiveBox=function(e){e=b.getBox(e);var d=f&&f.tagName&&f.tagName.toLowerCase();h("ios")&&f&&!f.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(f.type))&&(e.h*=0==orientation||180==orientation?.66:.4,d=f.getBoundingClientRect(),e.h=Math.max(e.h,d.top+
d.height));return e};return g})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q){return d("dijit.layout.ContentPane",[l,h,b],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,
preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,c,b){var d=
new b(a,c);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=c.byId(b);for(var d=b.ownerDocument.createDocumentFragment();b.firstChild;)d.appendChild(b.firstChild);a=k.delegate(a,{content:d})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=x.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=g.substitute(this.loadingMessage,a);this.errorMessage=g.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!k.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){e.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!k.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!k.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(c){this.cancel();this.onLoadDeferred=new a(k.hitch(this,"cancel"));this.onLoadDeferred.then(k.hitch(this,
"onLoad"));this._set("href",c);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(c){this._set("href","");this.cancel();this.onLoadDeferred=new a(k.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(k.hitch(this,"onLoad"));this._setContent(c||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new a(k.hitch(this,"cancel"));this.onLoadDeferred.then(k.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,c={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};k.isObject(this.ioArgs)&&k.mixin(c,this.ioArgs);var b=this._xhrDfd=(this.ioMethod||v.get)(c),d;b.then(function(c){d=c;try{return a._isDownloaded=!0,a._setContent(c,!1)}catch(t){a._onError("Content",
t)}},function(c){b.canceled||a._onError("Download",c);delete a._xhrDfd;return c}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(D){console.error("Error "+(this.widgetId||this.id)+" running custom onLoad code: "+D.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(E){console.error("Error "+this.widgetId+" running custom onUnload code: "+
E.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;e.forEach(this.getChildren(),function(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a);c._destroyed=!0});c&&(e.forEach(c.parseResults,function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a),c._destroyed=!0)}),delete c.parseResults);a||r.empty(this.containerNode);delete this._singleChild},_setContent:function(a,c){a=this.preprocessContent(a);
this.destroyDescendants();var b=this._contentSetter;b&&b instanceof f._ContentSetter||(b=this._contentSetter=new f._ContentSetter({node:this.containerNode,_onError:k.hitch(this,this._onError),onContentError:k.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(A){console.error("Fatal "+this.id+" could not change content due to "+A.message,A)}})}));var d=k.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,
parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=b.set(k.isObject(a)&&a.domNode?a.domNode:a,d),e=this;return q(d&&d.then?d:b.parseDeferred,function(){delete e._contentSetterParams;c||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,c,b){this.onLoadDeferred.reject(c);a=this["on"+a+"Error"].call(this,c);b?console.error(b,c):a&&this._setContent(a,
!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,k,l,h){return k("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(b,
g){var f=this.containerNode;if(0<g){for(f=f.firstChild;0<g;)1==f.nodeType&&g--,f=f.nextSibling;f?g="before":(f=this.containerNode,g="last")}l.place(b.domNode,f,g);this._started&&!b._started&&b.startup()},removeChild:function(b){"number"==typeof b&&(b=this.getChildren()[b]);b&&(b=b.domNode)&&b.parentNode&&b.parentNode.removeChild(b)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(b,g){var f=this.getChildren();b=n.indexOf(f,b);return f[b+g]},getIndexOfChild:function(b){return n.indexOf(this.getChildren(),
b)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(n,k,l,h,b,g,f,e,d,a){return k("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",g.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;f("\x3e *",this.containerNode).some(function(c){var d=e.byNode(c);d&&d.resize?a.push(d):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];l.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(c,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();c&&h.setMarginBox(this.domNode,c);var d=this.containerNode;d===this.domNode?(b=b||{},g.mixin(b,c||{}),"h"in b&&"w"in b||(b=g.mixin(h.getMarginBox(d),b)),this._contentBox=a.marginBox2contentBox(d,b)):this._contentBox=h.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,d=0;b=a[d++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!l.contains(a,"dijitHidden")&&
b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,k,l,h,b){function g(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function f(d,a){var c=d.resize?d.resize(a):l.setMarginBox(d.domNode,a);c?b.mixin(d,c):(b.mixin(d,l.getMarginBox(d.domNode)),
b.mixin(d,a))}var e={marginBox2contentBox:function(b,a){var c=h.getComputedStyle(b),d=l.getMarginExtents(b,c),e=l.getPadBorderExtents(b,c);return{l:h.toPixelValue(b,c.paddingLeft),t:h.toPixelValue(b,c.paddingTop),w:a.w-(d.w+e.w),h:a.h-(d.h+e.h)}},layoutChildren:function(d,a,c,e,h){a=b.mixin({},a);k.add(d,"dijitLayoutContainer");c=n.filter(c,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(n.filter(c,function(a){return"center"==a.region||"client"==a.layoutAlign}));n.forEach(c,
function(b){var c=b.domNode,d=b.region||b.layoutAlign;if(!d)throw Error("No region setting for "+b.id);var m=c.style;m.left=a.l+"px";m.top=a.t+"px";m.position="absolute";k.add(c,"dijitAlign"+g(d));c={};e&&e==b.id&&(c["top"==b.region||"bottom"==b.region?"h":"w"]=h);"leading"==d&&(d=b.isLeftToRight()?"left":"right");"trailing"==d&&(d=b.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(c.w=a.w,f(b,c),a.h-=b.h,"top"==d?a.t+=b.h:m.top=a.t+a.h+"px"):"left"==d||"right"==d?(c.h=a.h,f(b,c),a.w-=b.w,"left"==
d?a.l+=b.w:m.left=a.l+a.w+"px"):"client"!=d&&"center"!=d||f(b,a)})}};b.setObject("dijit.layout.utils",e);return e})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(n,k,l,h,b,g,f){var e=0,d={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:g.empty,_setNodeContent:function(a,b){g.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),
"string"==typeof b&&(b=g.toDom(b,a.ownerDocument)),!b.nodeType&&k.isArrayLike(b))for(var c=b.length,d=0;d<b.length;d=c==b.length?d+1:0)g.place(b[d],a,"last");else g.place(b,a,"last");return a},_ContentSetter:h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(a,c){k.mixin(this,a||{});c=this.node=b.byId(this.node||c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",e++].join("_"))},set:function(a,
b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=d._setNodeContent(a,this.content)}catch(m){var b=this.onContentError(m);try{a.innerHTML=b}catch(r){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+r.message,r)}}this.node=a},empty:function(){this.parseDeferred&&
(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(l.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);g.empty(this.node)},onBegin:function(){var a=this.content;if(k.isString(a)&&(this.cleanContent&&(a=d._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&
this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},d;for(d in a)d in b||(this[d]=a[d])},_parse:function(){var a=this.node;try{var b={};l.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=
f.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+d.id)})}catch(r){this._onError("Content",r,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,e){a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&d._setNodeContent(this.node,a,!0)}}),set:function(a,b,e){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
b="");"number"==typeof b&&(b=b.toString());return e?(new d._ContentSetter(k.mixin(e,{content:b,node:a}))).set():d._setNodeContent(a,b,!0)}};k.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q){function E(a){return eval("("+a+")")}function D(a){var b=a._nameCaseMap,
c=a.prototype;if(!b||b._extendCnt<u){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=u}return b}function y(a,b){b||(b=n);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),d=a.join();if(!c[d]){for(var e=[],f=0,g=a.length;f<g;f++){var h=a[f];e[e.length]=c[h]=c[h]||l.getObject(h)||~h.indexOf("/")&&b(h)}a=e.shift();c[d]=e.length?a.createSubclass?a.createSubclass(e):a.extend.apply(a,e):a}return c[d]}new Date("X");var u=0;d.after(l,"extend",function(){u++},
!0);r={_clearCache:function(){u++;_ctorMap={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");e=(e||"").split(/\s*,\s*/);b&&b.length&&h.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||k._scopeName)+"Type",e="data-"+(c.scope||k._scopeName)+"-",f=e+"type",g=e+"mixins",m=[];h.forEach(a,function(a){var c=d in
b?b[d]:a.getAttribute(f)||a.getAttribute(d);if(c){var e=a.getAttribute(g),c=e?[c].concat(e.split(/\s*,\s*/)):[c];m.push({node:a,types:c})}});return this._instantiate(m,b,c)},_instantiate:function(b,c,d,e){function f(a){c._started||d.noStart||h.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=h.map(b,function(a){var b=a.ctor||y(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,
c,d,a.scripts,a.inherited)},this);return e?a(b).then(f):f(b)},construct:function(a,b,f,g,h,m){function n(a){I&&l.setObject(I,a);for(p=0;p<O.length;p++)d[O[p].advice||"after"](a,O[p].method,l.hitch(a,O[p].func),!0);for(p=0;p<z.length;p++)z[p].call(a);for(p=0;p<y.length;p++)a.watch(y[p].prop,y[p].func);for(p=0;p<P.length;p++)x(a,P[p].event,P[p].func);return a}var t=a&&a.prototype;g=g||{};var q={};g.defaults&&l.mixin(q,g.defaults);m&&l.mixin(q,m);var r;r=b.attributes;var u=g.scope||k._scopeName;m="data-"+
u+"-";var C={};"dojo"!==u&&(C[m+"props"]="data-dojo-props",C[m+"type"]="data-dojo-type",C[m+"mixins"]="data-dojo-mixins",C[u+"type"]="dojotype",C[m+"id"]="data-dojo-id");for(var p=0,w,u=[],I,B;w=r[p++];){var M=w.name,A=M.toLowerCase();w=w.value;switch(C[A]||A){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":B=w;break;case "data-dojo-id":case "jsid":I=w;break;case "data-dojo-attach-point":case "dojoattachpoint":q.dojoAttachPoint=w;break;case "data-dojo-attach-event":case "dojoattachevent":q.dojoAttachEvent=
w;break;case "class":q["class"]=b.className;break;case "style":q.style=b.style&&b.style.cssText;break;default:if(M in t||(M=D(a)[A]||M),M in t)switch(typeof t[M]){case "string":q[M]=w;break;case "number":q[M]=w.length?Number(w):NaN;break;case "boolean":q[M]="false"!=w.toLowerCase();break;case "function":""===w||-1!=w.search(/[^\w\.]+/i)?q[M]=new Function(w):q[M]=l.getObject(w,!1)||new Function(w);u.push(M);break;default:A=t[M],q[M]=A&&"length"in A?w?w.split(/\s*,\s*/):[]:A instanceof Date?""==w?new Date(""):
"now"==w?new Date:c.fromISOString(w):A instanceof e?k.baseUrl+w:E(w)}else q[M]=w}}for(r=0;r<u.length;r++)C=u[r].toLowerCase(),b.removeAttribute(C),b[C]=null;if(B)try{B=E.call(g.propsThis,"{"+B+"}"),l.mixin(q,B)}catch(R){throw Error(R.toString()+" in data-dojo-props\x3d'"+B+"'");}l.mixin(q,f);h||(h=a&&(a._noScript||t._noScript)?[]:v("\x3e script[type^\x3d'dojo/']",b));var O=[],z=[],y=[],P=[];if(h)for(p=0;p<h.length;p++)C=h[p],b.removeChild(C),f=C.getAttribute(m+"event")||C.getAttribute("event"),g=
C.getAttribute(m+"prop"),B=C.getAttribute(m+"method"),u=C.getAttribute(m+"advice"),r=C.getAttribute("type"),C=this._functionFromScript(C,m),f?"dojo/connect"==r?O.push({method:f,func:C}):"dojo/on"==r?P.push({event:f,func:C}):q[f]=C:"dojo/aspect"==r?O.push({method:B,advice:u,func:C}):"dojo/watch"==r?y.push({prop:g,func:C}):z.push(C);a=(h=a.markupFactory||t.markupFactory)?h(q,b,a):new a(q,b);return a.then?a.then(n):n(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=
c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(r)||d.textDir},p;for(p in b)b[p]&&(a.inherited[p]=b[p])}return a.inherited}var d=[],e=[],f={},g=(b.scope||k._scopeName)+"Type",l="data-"+(b.scope||k._scopeName)+"-",q=l+"type",r=l+"textdir",l=l+"mixins",t=a.firstChild,x=b.inherited;if(!x){var p=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&p(a.parentNode,b)},x={dir:p(a,"dir"),lang:p(a,"lang"),textDir:p(a,r)},w;for(w in x)x[w]||
delete x[w]}w={inherited:x};for(var I,B;;)if(t)if(1!=t.nodeType)t=t.nextSibling;else if(I&&"script"==t.nodeName.toLowerCase())(x=t.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&I.push(t),t=t.nextSibling;else if(B)t=t.nextSibling;else if(x=t.getAttribute(q)||t.getAttribute(g),a=t.firstChild,x||a&&(3!=a.nodeType||a.nextSibling)){B=null;if(x){var v=t.getAttribute(l);I=v?[x].concat(v.split(/\s*,\s*/)):[x];try{B=y(I,b.contextRequire)}catch(O){}B||h.forEach(I,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
e[e.length]=a)});v=B&&!B.prototype._noScript?[]:null;w={types:I,ctor:B,parent:w,node:t,scripts:v};w.inherited=c(w);d.push(w)}else w={node:t,scripts:I,parent:w};I=v;B=t.stopParser||B&&B.prototype.stopParser&&!b.template;t=a}else t=t.nextSibling;else{if(!w||!w.node)break;t=w.node.nextSibling;B=!1;w=w.parent;I=w.scripts}var u=new m;e.length?(b.contextRequire||n)(e,function(){u.resolve(h.filter(d,function(a){if(!a.ctor)try{a.ctor=y(a.types,b.contextRequire)}catch(P){}for(var c=a.parent;c&&!c.types;)c=
c.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))}):u.resolve(d);return u.promise},_require:function(a,b){a=E("{"+a.innerHTML+"}");var c=[],d=[],e=new m;b=b&&b.contextRequire||n;for(var f in a)c.push(f),d.push(a[f]);b(d,function(){for(var a=0;a<c.length;a++)l.setObject(c[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,b){var c=new m,d=c.promise;c.resolve(!0);
var e=this;v("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var c=a?g.byId(a):f.body();b=b||{};var d=b.template?{template:!0}:{},e=[],h=this;a=this._scanAmd(c,b).then(function(){return h.scan(c,b)}).then(function(a){return h._instantiate(a,d,b,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});l.mixin(e,a);return e}};k.parser=r;b.parseOnLoad&&q(100,r,"parse");return r})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,k){var l={};n.setObject("dojo.date.stamp",l);l.fromISOString=function(h,b){l._isoRegExp||(l._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var g=l._isoRegExp.exec(h);h=null;if(g){g.shift();g[1]&&g[1]--;g[6]&&(g[6]*=1E3);b&&(b=new Date(b),k.forEach(k.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(d){return b["get"+d]()}),function(b,a){g[a]=g[a]||b}));h=new Date(g[0]||1970,g[1]||0,g[2]||1,g[3]||0,g[4]||0,g[5]||0,g[6]||0);100>g[0]&&h.setFullYear(g[0]||1970);var f=0,e=g[7]&&g[7].charAt(0);"Z"!=e&&(f=60*(g[8]||0)+(Number(g[9])||0),"-"!=e&&(f*=-1));e&&(f-=h.getTimezoneOffset());f&&h.setTime(h.getTime()+6E4*f)}return h};l.toISOString=function(h,b){var g=function(a){return 10>a?"0"+a:a};b=b||{};var f=[],e=b.zulu?"getUTC":"get",d="";"time"!=b.selector&&(d=h[e+"FullYear"](),d=["0000".substr((d+
"").length)+d,g(h[e+"Month"]()+1),g(h[e+"Date"]())].join("-"));f.push(d);"date"!=b.selector&&(d=[g(h[e+"Hours"]()),g(h[e+"Minutes"]()),g(h[e+"Seconds"]())].join(":"),e=h[e+"Milliseconds"](),b.milliseconds&&(d+="."+(100>e?"0":"")+g(e)),b.zulu?d+="Z":"time"!=b.selector&&(h=h.getTimezoneOffset(),b=Math.abs(h),d+=(0<h?"-":"+")+g(Math.floor(b/60))+":"+g(b%60)),f.push(d));return f.join("T")};return l})},"esri/core/domUtils":function(){define(["require","exports","../widgets/support/widget"],function(n,
k,l){function h(b){return l.isWidgetBase(b)?b.domNode:b}Object.defineProperty(k,"__esModule",{value:!0});k.show=function(b){if(b=h(b))b.style.display="block"};k.getNode=h;k.hide=function(b){if(b=h(b))b.style.display="none"};k.toggle=function(b){if(b=h(b))b.style.display="none"===b.style.display?"block":"none"};k.empty=function(b){for(;b.hasChildNodes();)b.removeChild(b.firstChild)};k.reparent=function(b,g){for(;b.hasChildNodes();)g.appendChild(b.firstChild)}})},"esri/identity/IdentityManagerBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/cookie dojo/io-query dojo/regexp ../config ../kernel ../request ../core/Accessor ../core/deferredUtils ../core/Error ../core/Evented ../core/global ../core/has ../core/lang ../core/object ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ./OAuthCredential ./OAuthInfo ./ServerInfo".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q,E,D,y,u,z,t,A,G,J,H){Object.defineProperty(k,"__esModule",{value:!0});var K={},F=function(a){var b=(new t.Url(a.owningSystemUrl)).host;a=(new t.Url(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},N=function(a,b){return!!(F(a)&&b&&b.some(function(b){return b.test(a.server)}))};n=function(m){function k(){var a=m.call(this)||this;a._portalConfig=q.esriGeowConfig;a.serverInfos=[];a.oAuthInfos=[];a.credentials=[];a._soReqs=[];a._xoReqs=[];
a._portals=[];a.defaultOAuthInfo=null;a.defaultTokenValidity=60;a.tokenValidity=null;a.signInPage=null;a.useSignInPage=!0;a.normalizeWebTierAuth=!1;a._busy=null;a._rejectOnPersistedPageShow=!1;a._oAuthHash=null;a._gwTokenUrl="/sharing/rest/generateToken";a._agsRest="/rest/services";a._agsPortal=/\/sharing(\/|$)/i;a._agsAdmin=/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i;a._adminSvcs=/\/admin\/services(\/|$)/i;a._agolSuffix=".arcgis.com";a._gwDomains=[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/https?:\/\/.*\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}];a._legacyFed=[];a._regexSDirUrl=/http.+\/rest\/services\/?/gi;
a._regexServerType=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/gi;a._gwUser=/http.+\/users\/([^\/]+)\/?.*/i;a._gwItem=/http.+\/items\/([^\/]+)\/?.*/i;a._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i;a._errorCodes=[499,498,403,401];a._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i;a._publicUrls=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i];
a._createDefaultOAuthInfo=!0;a._hasTestedIfAppIsOnPortal=!1;a._getOAuthHash();window.addEventListener("pageshow",function(b){a._pageShowHandler(b)});return a}h(k,m);k.prototype.registerServers=function(a){var b=this,c=this.serverInfos;c?(a=a.filter(function(a){return!b.findServerInfo(a.server)}),this.serverInfos=c.concat(a)):this.serverInfos=a;a.forEach(function(a){a.owningSystemUrl&&b._portals.push(a.owningSystemUrl);a.hasPortal&&b._portals.push(a.server)})};k.prototype.registerOAuthInfos=function(a){var b=
this,c=this.oAuthInfos;c?(a=a.filter(function(a){return!b.findOAuthInfo(a.portalUrl)}),this.oAuthInfos=c.concat(a)):this.oAuthInfos=a};k.prototype.registerToken=function(a){a=l({},a);var b=this._sanitizeUrl(a.server),c=this._isServerRsrc(b),d=this.findServerInfo(b),p=!0,e;d||(d=new H,d.server=this._getServerInstanceRoot(b),c?d.hasServer=!0:(d.tokenServiceUrl=this._getTokenSvcUrl(b),d.hasPortal=!0),this.registerServers([d]));(e=this._findCredential(b))?(delete a.server,D.mixin(e,a),p=!1):(e=new L({userId:a.userId,
server:d.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:c?"server":"portal"}),e.resources=[b],this.credentials.push(e));e.emitTokenChange(!1);p||e.refreshServerTokens()};k.prototype.toJSON=function(){return D.fixJson({serverInfos:this.serverInfos.map(function(a){return a.toJSON()}),oAuthInfos:this.oAuthInfos.map(function(a){return a.toJSON()}),credentials:this.credentials.map(function(a){return a.toJSON()})})};k.prototype.initialize=function(a){var b=this;if(a){"string"===typeof a&&(a=JSON.parse(a));
var c=a.serverInfos,d=a.oAuthInfos;a=a.credentials;if(c){var p=[];c.forEach(function(a){a.server&&a.tokenServiceUrl&&p.push(a.declaredClass?a:new H(a))});p.length&&this.registerServers(p)}if(d){var e=[];d.forEach(function(a){a.appId&&e.push(a.declaredClass?a:new J(a))});e.length&&this.registerOAuthInfos(e)}a&&a.forEach(function(a){a.server&&a.token&&a.expires&&a.expires>Date.now()&&(a=a.declaredClass?a:new L(a),a.emitTokenChange(),b.credentials.push(a))})}};k.prototype.findServerInfo=function(a){var b;
a=this._sanitizeUrl(a);for(var c=0,d=this.serverInfos;c<d.length;c++){var p=d[c];if(this._hasSameServerInstance(p.server,a)){b=p;break}}return b};k.prototype.findOAuthInfo=function(a){var b;a=this._sanitizeUrl(a);for(var c=0,d=this.oAuthInfos;c<d.length;c++){var p=d[c];if(this._hasSameServerInstance(p.portalUrl,a)){b=p;break}}return b};k.prototype.findCredential=function(a,b){var c,d;a=this._sanitizeUrl(a);d=this._isServerRsrc(a)?"server":"portal";if(b)for(var p=0,e=this.credentials;p<e.length;p++){var f=
e[p];if(this._hasSameServerInstance(f.server,a)&&b===f.userId&&f.scope===d){c=f;break}}else for(b=0,p=this.credentials;b<p.length;b++)if(f=p[b],this._hasSameServerInstance(f.server,a)&&-1!==this._getIdenticalSvcIdx(a,f)&&f.scope===d){c=f;break}return c};k.prototype.getCredential=function(a,b){var c,d,e=!0;b&&(c=!!b.token,d=b.error,e=!1!==b.prompt);a=this._sanitizeUrl(a);var p=r.makeDeferredCancellingPending(),f=this._isAdminResource(a),h=c&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((c=
c?this.findCredential(a):null)&&d&&d.details&&498===d.details.httpStatus)c.destroy(),h&&h.token===b.token&&g("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(h||c)return a=new v("identity-manager:not-authorized","You are currently signed in as: '"+(h&&h.email||c&&c.userId)+"'. You do not have access to this resource: "+a,{error:d}),p.reject(a),p.promise;if(d=this._findCredential(a,b))return p.resolve(d),p.promise;d=this.findServerInfo(a);if(d)!d.hasServer&&this._isServerRsrc(a)&&
(d._restInfoPms=this._getTokenSvcUrl(a),d.hasServer=!0);else{h=this._getTokenSvcUrl(a);if(!h)return a=new v("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),p.reject(a),p.promise;d=new H;d.server=this._getServerInstanceRoot(a);"string"===typeof h?(d.tokenServiceUrl=h,d.hasPortal=!0):(d._restInfoPms=h,d.hasServer=!0);this.registerServers([d])}e&&d.hasPortal&&void 0===d._selfReq&&!this._findOAuthInfo(a)&&(d._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(d.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),a)});return this._enqueue(a,d,b,p,f)};k.prototype.getResourceName=function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""};k.prototype.generateToken=function(b,d,e){var p=this._rePortalTokenSvc.test(b.tokenServiceUrl),f=new t.Url(window.location.href.toLowerCase()),
g=this._getEsriAuthCookie(),h=b.shortLivedTokenValidity,w,k,m,l,n,q,r;d&&(r=a.id.tokenValidity||h||a.id.defaultTokenValidity,r>h&&0<h&&(r=h));e&&(k=e.isAdmin,m=e.serverUrl,l=e.token,q=e.ssl,b.customParameters=e.customParameters);k?h=b.adminTokenServiceUrl:(h=b.tokenServiceUrl,n=new t.Url(h.toLowerCase()),g&&(w=(w=g.auth_tier)&&w.toLowerCase()),("web"===w||b.webTierAuth)&&e&&e.serverUrl&&!q&&"http"===f.scheme&&(z.hasSameOrigin(f.uri,h,!0)||"https"===n.scheme&&f.host===n.host&&"7080"===f.port&&"7443"===
n.port)&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));e=D.mixin({query:D.mixin({request:"getToken",username:d&&d.username,password:d&&d.password,serverUrl:m,token:l,expiration:r,referer:k||p?window.location.host:null,client:k?"referer":null,f:"json"},b.customParameters),method:"post",authMode:"anonymous",useProxy:this._useProxy(b,e),responseType:"json"},e&&e.ioArgs);p||(e.withCredentials=!1);return c(h,e).then(function(a){a=a.data;if(!a||!a.token)return new v("identity-manager:authentication-failed",
"Unable to generate token");var c=b.server;K[c]||(K[c]={});d&&(K[c][d.username]=d.password);a.validity=r;return a})};k.prototype.isBusy=function(){return!!this._busy};k.prototype.checkSignInStatus=function(a){return this.checkAppAccess(a,"").then(function(a){return a.credential})};k.prototype.checkAppAccess=function(a,b,d){var e=this;return this.getCredential(a,{prompt:!1}).then(function(p){var f,g={f:"json"};if("portal"===p.scope)if(b&&(e._doPortalSignIn(a,!0)||d&&d.force))f=p.server+"/sharing/rest/oauth2/validateAppAccess",
g.client_id=b;else if(p.token)f=p.server+"/sharing/rest";else return{credential:p};else if(p.token)f=p.server+"/rest/services";else return{credential:p};p.token&&(g.token=p.token);return c(f,{query:g,authMode:"anonymous"}).then(function(a){if(!1===a.data.valid)throw new v("identity-manager:not-authorized","You are currently signed in as: '"+p.userId+"'.");return{credential:p}}).catch(function(a){if("identity-manager:not-authorized"===a.name)throw a;a=a.details&&a.details.httpStatus;if(498===a)throw p.destroy(),
new v("identity-manager:not-authenticated","User is not signed in.");if(400===a)throw new v("identity-manager:invalid-request");return{credential:p}})})};k.prototype.setRedirectionHandler=function(a){this._redirectFunc=a};k.prototype.setProtocolErrorHandler=function(a){this._protocolFunc=a};k.prototype.destroyCredentials=function(){this.credentials&&this.credentials.slice().forEach(function(a){a.destroy()});this.emit("credentials-destroy")};k.prototype._getOAuthHash=function(){var a=window.location.hash;
if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=f.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));b&&(!E("ie")||8<E("ie"))&&(window.location.hash="")}};k.prototype._pageShowHandler=function(a){a.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(a=new v("identity-manager:user-aborted",
"ABORTED"),this._errbackFunc(a))};k.prototype._findCredential=function(a,b){var c=this,d=-1,e,p,f,g=b&&b.token;b=b&&b.resource;var h=this._isServerRsrc(a)?"server":"portal",k=this.credentials.filter(function(b){return c._hasSameServerInstance(b.server,a)&&b.scope===h});a=b||a;if(k.length)if(1===k.length)if(b=k[0],p=(e=(f=this.findServerInfo(b.server))&&f.owningSystemUrl)&&this.findCredential(e,b.userId),d=this._getIdenticalSvcIdx(a,b),g)-1!==d&&(b.resources.splice(d,1),this._removeResource(a,p));
else return-1===d&&b.resources.push(a),this._addResource(a,p),b;else{var w,m;k.some(function(b){m=c._getIdenticalSvcIdx(a,b);return-1!==m?(w=b,p=(e=(f=c.findServerInfo(w.server))&&f.owningSystemUrl)&&c.findCredential(e,w.userId),d=m,!0):!1});if(g)w&&(w.resources.splice(d,1),this._removeResource(a,p));else if(w)return this._addResource(a,p),w}};k.prototype._findOAuthInfo=function(a){var b=this.findOAuthInfo(a);if(!b)for(var c=0,d=this.oAuthInfos;c<d.length;c++){var e=d[c];if(this._isIdProvider(e.portalUrl,
a)){b=e;break}}return b};k.prototype._addResource=function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)};k.prototype._removeResource=function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))};k.prototype._useProxy=function(a,b){return b&&b.isAdmin&&!z.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&"10.1"===String(a.currentVersion)&&!z.hasSameOrigin(a.tokenServiceUrl,window.location.href)};k.prototype._getOrigin=
function(a){a=new t.Url(a);return a.scheme+"://"+a.host+(null!=a.port?":"+a.port:"")};k.prototype._getServerInstanceRoot=function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&(c=b.length-1);return-1<c?a.substring(0,c):a};k.prototype._hasSameServerInstance=function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=
this._normalizeAGOLorgDomain(a);b=this._normalizeAGOLorgDomain(b);a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b};k.prototype._normalizeAGOLorgDomain=function(a){var b=/^https?:\/\/.+\.maps\.arcgis\.com/i,c=/^https?:\/\/.+\.mapsdevext\.arcgis\.com/i,d=/^https?:\/\/.+\.mapsqa\.arcgis\.com/i;b.test(a)?a=a.replace(b,"https://www.arcgis.com"):c.test(a)?a=a.replace(c,"https://devext.arcgis.com"):d.test(a)&&(a=a.replace(d,"https://qaext.arcgis.com"));return a};k.prototype._sanitizeUrl=
function(a){var b=(d.request.proxyUrl||"").toLowerCase(),c=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==c&&(a=a.substring(c+b.length+1));a=z.normalize(a);return z.urlToObject(a).path};k.prototype._isRESTService=function(a){return-1<a.indexOf(this._agsRest)};k.prototype._isAdminResource=function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)};k.prototype._isServerRsrc=function(a){return this._isRESTService(a)||this._isAdminResource(a)};k.prototype._isIdenticalService=function(a,b){var c;this._isRESTService(a)&&
this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),c=a===b,c||(c=/(.*)\/(MapServer|FeatureServer).*/gi,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c};k.prototype._isPortalDomain=function(a){var b=this;a=a.toLowerCase();var c=(new t.Url(a)).authority,d=this._portalConfig,c=-1!==c.indexOf(this._agolSuffix);!c&&d&&(c=this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl),
a));c||(c=this._portals.some(function(c){return b._hasSameServerInstance(c,a)}));return c=c||this._agsPortal.test(a)};k.prototype._isIdProvider=function(a,b){var c=-1,d=-1;this._gwDomains.forEach(function(e,f){-1===c&&e.regex.test(a)&&(c=f);-1===d&&e.regex.test(b)&&(d=f)});var e=!1;if(-1<c&&-1<d)if(0===c||4===c){if(0===d||4===d)e=!0}else if(1===c){if(1===d||2===d)e=!0}else 2===c?2===d&&(e=!0):3===c&&3===d&&(e=!0);if(!e){var f=this.findServerInfo(b),g=f&&f.owningSystemUrl;g&&F(f)&&this._isPortalDomain(g)&&
this._isIdProvider(a,g)&&(e=!0)}return e};k.prototype._isPublic=function(a){a=this._sanitizeUrl(a);return this._publicUrls.some(function(b){return b.test(a)})};k.prototype._getIdenticalSvcIdx=function(a,b){for(var c=-1,d=0;d<b.resources.length;d++)if(this._isIdenticalService(a,b.resources[d])){c=d;break}return c};k.prototype._getSuffix=function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")};k.prototype._getTokenSvcUrl=function(a){var b=this,d,e,f=this._isRESTService(a);
if(f||this._isAdminResource(a))return e=a.toLowerCase().indexOf(f?this._agsRest:"/admin/"),d=a.substring(0,e)+"/admin/generateToken",a=a.substring(0,e)+(f?"/rest/info":"/info"),e=c(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}),{adminUrl:d,promise:e};if(this._isPortalDomain(a)){var g="";this._gwDomains.some(function(b){b.regex.test(a)&&(g=b.tokenServiceUrl);return!!g});g||this._portals.some(function(c){b._hasSameServerInstance(c,a)&&(g=c+b._gwTokenUrl);return!!g});g||(e=
a.toLowerCase().indexOf("/sharing"),-1!==e&&(g=a.substring(0,e)+this._gwTokenUrl));g||(g=this._getOrigin(a)+this._gwTokenUrl);g&&(d=(new t.Url(a)).port,/^http:\/\//i.test(a)&&"7080"===d&&(g=g.replace(/:7080/i,":7443")),g=g.replace(/http:/i,"https:"));return g}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"};k.prototype._getPortalSelf=function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,
":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return c(a,{query:{f:"json"},authMode:"anonymous",responseType:"json",withCredentials:!0}).then(function(a){return a.data})};k.prototype._hasPortalSession=function(){return!!this._getEsriAuthCookie()};k.prototype._getEsriAuthCookie=function(){var a=null;if(navigator.cookieEnabled)for(var b=this._getAllCookies("esri_auth"),c=0;c<b.length;c++){var d=JSON.parse(b[c]);if(d.portalApp){a=d;break}}a&&(b=null,a.expires&&
("number"===typeof a.expires?b=a.expires:"string"===typeof a.expires&&(b=Date.parse(a.expires)),isNaN(b)&&(b=null),a.expires=b),b&&b<Date.now()&&(a=null));return a};k.prototype._getAllCookies=function(a){var b=[];if(a=document.cookie.match(new RegExp("(?:^|; )"+e.escapeString(a)+"\x3d([^;]*)","g")))for(var c=0;c<a.length;c++){var d=a[c],f=d.indexOf("\x3d");-1<f&&(d=d.substring(f+1),b.push(decodeURIComponent(d)))}return b};k.prototype._doPortalSignIn=function(a,b){if(g.isSupported()){var c=this._getEsriAuthCookie(),
d=this._portalConfig,e=window.location.href,f=this.findServerInfo(a);if((b||this.useSignInPage)&&(d||this._isPortalDomain(e)||c)&&(f?f.hasPortal||f.owningSystemUrl&&this._isPortalDomain(f.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(e,a)||d&&(this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl),a)||this._isIdProvider(d.restBaseUrl,a))||z.hasSameOrigin(e,a,!0)))return!0}return!1};k.prototype._checkProtocol=function(a,b,c,d){var e=!0;d=d?b.adminTokenServiceUrl:b.tokenServiceUrl;
0===d.trim().toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&z.getProxyRule(d)&&(e=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,e||(a=new v("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),c(a)));return e};k.prototype._enqueue=function(a,b,c,d,e,f){d||(d=r.makeDeferredCancellingPending());d.resUrl_=a;d.sinfo_=b;d.options_=c;d.admin_=e;d.refresh_=f;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),
this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(d)):this._xoReqs.push(d):this._doSignIn(d);return d.promise};k.prototype._doSignIn=function(a){var b=this;this._busy=a;this._rejectOnPersistedPageShow=!1;var c=function(c){var d=a.options_&&a.options_.resource,e=a.resUrl_,f=a.refresh_,g=!1;-1===b.credentials.indexOf(c)&&(f&&-1!==b.credentials.indexOf(f)?(f.userId=c.userId,f.token=c.token,f.expires=c.expires,f.validity=c.validity,f.ssl=
c.ssl,f.creationTime=c.creationTime,g=!0,c=f):b.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(d||e);c.scope=b._isServerRsrc(e)?"server":"portal";c.emitTokenChange();var d=b._soReqs,h={};b._soReqs=[];d.forEach(function(a){if(!b._isIdenticalService(e,a.resUrl_)){var d=b._getSuffix(a.resUrl_);h[d]||(h[d]=!0,c.resources.push(a.resUrl_))}});a.resolve(c);d.forEach(function(a){b._hasSameServerInstance(b._getServerInstanceRoot(e),a.resUrl_)?a.resolve(c):b._soReqs.push(a)});b._busy=a.resUrl_=
a.sinfo_=a.refresh_=null;g||b.emit("credential-create",{credential:c});b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(c){a.reject(c);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},e=function(e,f,g,h){var k=a.sinfo_,m=!a.options_||!1!==a.options_.prompt,l=k.hasPortal&&b._findOAuthInfo(a.resUrl_);b._doPortalSignIn(a.resUrl_)?(e=b._getEsriAuthCookie(),
l=b._portalConfig,e?(k.webTierAuth||"web"!==(e.auth_tier&&e.auth_tier.toLowerCase())||(k.webTierAuth=!0),c(new L({userId:e.email,server:k.server,token:k.webTierAuth?null:e.token,expires:e.expires}))):m?(m="",e=window.location.href,m=b.signInPage?b.signInPage:l?l.baseUrl+l.signin:b._isIdProvider(e,a.resUrl_)?b._getOrigin(e)+"/home/signin.html":k.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,"https:"),l&&!1===l.useSSL&&(m=m.replace(/https:/i,"http:")),0===
e.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(k=new v("identity-manager:unexpected-error","Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),d(k)):(b._rejectOnPersistedPageShow=!0,b._redirectFunc?b._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:e,resourceUrl:a.resUrl_,serverInfo:k}):window.location.href=m+"?returnUrl\x3d"+encodeURIComponent(e))):(k=new v("identity-manager:not-authenticated",
"User is not signed in."),d(k))):e?c(new L({userId:e,server:k.server,token:g,expires:null!=h?Number(h):null,ssl:!!f})):l?(e=l._oAuthCred,e||(f=new G(l,window.localStorage),g=new G(l,window.sessionStorage),f.isValid()&&g.isValid()?f.expires>g.expires?(e=f,g.destroy()):(e=g,f.destroy()):e=f.isValid()?f:g,l._oAuthCred=e),e.isValid()?c(new L({userId:e.userId,server:k.server,token:e.token,expires:e.expires,ssl:e.ssl,_oAuthCred:e})):b._oAuthHash&&b._oAuthHash.state.portalUrl===l.portalUrl?(m=b._oAuthHash,
k=new L({userId:m.username,server:k.server,token:m.access_token,expires:Date.now()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:e}),e.storage=m.persist?window.localStorage:window.sessionStorage,e.token=k.token,e.expires=k.expires,e.userId=k.userId,e.ssl=k.ssl,e.save(),b._oAuthHash=null,c(k)):m?a._pendingDfd=b.oAuthSignIn(a.resUrl_,k,l,a.options_).then(c,d):(k=new v("identity-manager:not-authenticated","User is not signed in."),d(k))):m?b._checkProtocol(a.resUrl_,k,d,a.admin_)&&
(m=a.options_,a.admin_&&(m=m||{},m.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,k,m).then(c,d)):(k=new v("identity-manager:not-authenticated","User is not signed in."),d(k))},f=function(){var e=a.sinfo_,f=e.owningSystemUrl,g=a.options_,h,k,m,l;g&&(h=g.token,k=g.error,m=g.prompt);l=b._findCredential(f,{token:h,resource:a.resUrl_});if(!l)for(var g=0,p=b.credentials;g<p.length;g++){var n=p[g];if(b._isIdProvider(f,n.server)){l=n;break}}l?(f=b.findCredential(a.resUrl_,l.userId))?c(f):N(e,b._legacyFed)?
(n=l.toJSON(),n.server=e.server,n.resources=null,c(new L(n))):(a._pendingDfd=b.generateToken(b.findServerInfo(l.server),null,{serverUrl:a.resUrl_,token:l.token,ssl:l.ssl})).then(function(b){c(new L({userId:l.userId,server:e.server,token:b.token,expires:null!=b.expires?Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},d):(b._busy=null,h&&(a.options_.token=null),(a._pendingDfd=b.getCredential(f.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:e.owningTenant,token:h,
error:k,prompt:m})).then(function(c){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){d(a)}))};this._errbackFunc=d;var g=a.sinfo_.owningSystemUrl,h=this._isServerRsrc(a.resUrl_),k=a.sinfo_._restInfoPms;k?k.promise.then(function(c){var d=a.sinfo_;d.adminTokenServiceUrl=d._restInfoPms.adminUrl;d._restInfoPms=null;d.tokenServiceUrl=y.getDeepValue("authInfo.tokenServicesUrl",c)||y.getDeepValue("authInfo.tokenServiceUrl",c)||y.getDeepValue("tokenServiceUrl",c);d.shortLivedTokenValidity=
y.getDeepValue("authInfo.shortLivedTokenValidity",c);d.currentVersion=c.currentVersion;d.owningTenant=c.owningTenant;(c=d.owningSystemUrl=c.owningSystemUrl)&&b._portals.push(c);h&&c?f():e()},function(){a.sinfo_._restInfoPms=null;var b=new v("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");d(b)}):h&&g?f():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(c){var d={},e,f,g,h;c&&(e=c.user&&c.user.username,d.username=e,d.allSSL=c.allSSL,
f=c.supportsOAuth,g=c.currentVersion,"multitenant"===c.portalMode&&(h=c.customBaseUrl));a.sinfo_.webTierAuth=!!e;return e&&b.normalizeWebTierAuth?b.generateToken(a.sinfo_,null,{ssl:d.allSSL}).catch(function(){return null}).then(function(a){d.portalToken=a&&a.token;d.tokenExpiration=a&&a.expires;return d}):!e&&f&&4.4<=parseFloat(g)&&!b._doPortalSignIn(a.resUrl_)?b._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:h,owningTenant:a.sinfo_._selfReq.owningTenant}).catch(function(){return null}).then(function(){return d}):
d}).catch(function(){return null}).then(function(b){a.sinfo_._selfReq=null;b?e(b.username,b.allSSL,b.portalToken,b.tokenExpiration):e()}):e()};k.prototype._generateOAuthInfo=function(a){var b=this,d,e=a.portalUrl,f=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){d=window.location.href;var h=d.indexOf("?");-1<h&&(d=d.slice(0,h));h=d.search(/\/(apps|home)\//);d=-1<h?d.slice(0,h):null}a&&d?(this._hasTestedIfAppIsOnPortal=!0,
a=c(d+"/sharing/rest",{query:{f:"json"},responseType:"json"}).then(function(){b.defaultOAuthInfo=new J({appId:"arcgisonline",popup:!0,popupCallbackUrl:d+"/home/oauth-callback.html"})})):a=u.resolve();return a.then(function(){if(b.defaultOAuthInfo)return e=e.replace(/^http:/i,"https:"),c(e+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:g,client_id:b.defaultOAuthInfo.appId,redirect_uri:z.makeAbsolute(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json"}).then(function(a){if(a.data.valid){var c=
b.defaultOAuthInfo.clone();c.portalUrl=a.data.urlKey&&f?"https://"+a.data.urlKey+"."+f:e;b.oAuthInfos.push(c)}})})};return k=b([A.subclass("esri.identity.IdentityManagerBase")],k)}(A.declared(x));k.IdentityManagerBase=n;var L=function(c){function d(a){var b=c.call(this)||this;b._oAuthCred=null;b.tokenRefreshBuffer=2;a&&a._oAuthCred&&(b._oAuthCred=a._oAuthCred);return b}h(d,c);d.prototype.initialize=function(){this.resources=this.resources||[];null==this.creationTime&&(this.creationTime=Date.now())};
d.prototype.refreshToken=function(){var b=this,c=a.id.findServerInfo(this.server),d=c&&c.owningSystemUrl,e=!!d&&"server"===this.scope,f=e&&N(c,a.id._legacyFed),g=c.webTierAuth,h=g&&a.id.normalizeWebTierAuth,k=K[this.server],m=k&&k[this.userId],k=this.resources&&this.resources[0],l=e&&a.id.findServerInfo(d),n={username:this.userId,password:m},q;if(!g||h)if(e&&!l&&a.id.serverInfos.some(function(b){a.id._isIdProvider(d,b.server)&&(l=b);return!!l}),g=l&&a.id.findCredential(l.server,this.userId),!e||g)if(f)g.refreshToken();
else{if(e)q={serverUrl:k,token:g&&g.token,ssl:g&&g.ssl};else if(h)n=null,q={ssl:this.ssl};else if(m)this.isAdmin&&(q={isAdmin:!0});else return e=void 0,k&&(k=a.id._sanitizeUrl(k),this._enqueued=1,e=a.id._enqueue(k,c,null,null,this.isAdmin,this),e.then(function(){b._enqueued=0;b.refreshServerTokens()}).catch(function(){b._enqueued=0})),e;return a.id.generateToken(e?l:c,e?null:n,q).then(function(a){b.token=a.token;b.expires=null!=a.expires?Number(a.expires):null;b.creationTime=Date.now();b.validity=
a.validity;b.emitTokenChange();b.refreshServerTokens()}).catch(function(){})}};d.prototype.refreshServerTokens=function(){var b=this;"portal"===this.scope&&a.id.credentials.forEach(function(c){var d=a.id.findServerInfo(c.server),e=d&&d.owningSystemUrl;c!==b&&c.userId===b.userId&&e&&"server"===c.scope&&(a.id._hasSameServerInstance(b.server,e)||a.id._isIdProvider(e,b.server))&&(N(d,a.id._legacyFed)?(c.token=b.token,c.expires=b.expires,c.creationTime=b.creationTime,c.validity=b.validity,c.emitTokenChange()):
c.refreshToken())})};d.prototype.emitTokenChange=function(b){clearTimeout(this._refreshTimer);var c=this.server&&a.id.findServerInfo(this.server),d=(c=c&&c.owningSystemUrl)&&a.id.findServerInfo(c);!1===b||c&&"portal"!==this.scope&&(!d||!d.webTierAuth||a.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer();this.emit("token-change")};d.prototype.destroy=function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;
this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var b=a.id.credentials.indexOf(this);-1<b&&a.id.credentials.splice(b,1);this.emitTokenChange();this.emit("destroy")};d.prototype.toJSON=function(){var a=D.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a};d.prototype._startRefreshTimer=
function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-Date.now();0>b&&(b=0);this._refreshTimer=setTimeout(this.refreshToken.bind(this),b>a?b-a:b)};b([A.property()],d.prototype,"creationTime",void 0);b([A.property()],d.prototype,"expires",void 0);b([A.property()],d.prototype,"isAdmin",void 0);b([A.property()],d.prototype,"oAuthState",void 0);b([A.property()],d.prototype,"resources",void 0);b([A.property()],d.prototype,
"scope",void 0);b([A.property()],d.prototype,"server",void 0);b([A.property()],d.prototype,"ssl",void 0);b([A.property()],d.prototype,"token",void 0);b([A.property()],d.prototype,"tokenRefreshBuffer",void 0);b([A.property()],d.prototype,"userId",void 0);b([A.property()],d.prototype,"validity",void 0);return d=b([A.subclass("esri.identity.Credential")],d)}(A.declared(m,x));k.Credential=L})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(n,k){n.cookie=function(l,h,b){var g=document.cookie,
f;if(1==arguments.length)f=(f=g.match(new RegExp("(?:^|; )"+k.escapeString(l)+"\x3d([^;]*)")))?decodeURIComponent(f[1]):void 0;else{b=b||{};g=b.expires;if("number"==typeof g){var e=new Date;e.setTime(e.getTime()+864E5*g);g=b.expires=e}g&&g.toUTCString&&(b.expires=g.toUTCString());h=encodeURIComponent(h);var g=l+"\x3d"+h,d;for(d in b)g+="; "+d,e=b[d],!0!==e&&(g+="\x3d"+e);document.cookie=g}return f};n.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),
navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return n.cookie})},"esri/identity/OAuthCredential":function(){define(["require","exports"],function(n,k){n=function(){function k(h,b){this.userId=this.token=this.ssl=this.expires=this.storage=this.oAuthInfo=null;this.oAuthInfo=h;this.storage=b;this._init()}k.prototype.isValid=function(){var h=!1;if(this.oAuthInfo&&this.token&&this.userId){var b=
Date.now();this.expires>b&&(this.expires-b)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(h=!0)}return h};k.prototype.save=function(){if(this.storage){var h=this._load(),b=this.oAuthInfo;if(b&&b.authNamespace&&b.portalUrl){var g=h[b.authNamespace];g||(g=h[b.authNamespace]={});g[b.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(f){console.log(f)}}}};k.prototype.destroy=function(){var h=this._load(),
b=this.oAuthInfo;if(b&&b.appId&&b.portalUrl&&this.token&&this.expires>Date.now()){var g=b.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",f=new FormData;f.append("f","json");f.append("auth_token",this.token);f.append("client_id",b.appId);f.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(g,f);else{var e=new XMLHttpRequest;e.open("POST",g);e.send(f)}}if(b&&b.authNamespace&&b.portalUrl&&this.storage&&(g=h[b.authNamespace])){delete g[b.portalUrl];
try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(d){console.log(d)}}b&&(this.oAuthInfo=b._oAuthCred=null)};k.prototype._init=function(){var h=this._load(),b=this.oAuthInfo;b&&b.authNamespace&&b.portalUrl&&(h=h[b.authNamespace])&&(h=h[b.portalUrl])&&(this.expires=h.expires,this.ssl=h.ssl,this.token=h.token,this.userId=h.userId)};k.prototype._load=function(){var h={};if(this.storage){var b=this.storage.getItem("esriJSAPIOAuth");if(b)try{h=JSON.parse(b)}catch(g){console.log(g)}}return h};
return k}();n.prototype.declaredClass="esri.identity.OAuthCredential";return n})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(n,k,l,h,b,g){return function(b){function e(a){a=b.call(this)||this;a._oAuthCred=null;a.appId=null;a.authNamespace="/";a.expiration=20160;a.forceLogin=!1;a.locale=null;a.minTimeUntilExpiration=30;a.popup=!1;a.popupCallbackUrl=
"oauth-callback.html";a.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";a.portalUrl="https://www.arcgis.com";return a}l(e,b);d=e;e.prototype.clone=function(){return d.fromJSON(this.toJSON())};var d;h([g.property({json:{write:!0}})],e.prototype,"appId",void 0);h([g.property({json:{write:!0}})],e.prototype,"authNamespace",void 0);h([g.property({json:{write:!0}})],e.prototype,"expiration",void 0);h([g.property({json:{write:!0}})],e.prototype,"forceLogin",void 0);h([g.property({json:{write:!0}})],
e.prototype,"locale",void 0);h([g.property({json:{write:!0}})],e.prototype,"minTimeUntilExpiration",void 0);h([g.property({json:{write:!0}})],e.prototype,"popup",void 0);h([g.property({json:{write:!0}})],e.prototype,"popupCallbackUrl",void 0);h([g.property({json:{write:!0}})],e.prototype,"popupWindowFeatures",void 0);h([g.property({json:{write:!0}})],e.prototype,"portalUrl",void 0);return e=d=h([g.subclass("esri.identity.OAuthInfo")],e)}(g.declared(b))})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(n,k,l,h,b,g){return function(b){function e(d){d=b.call(this)||this;d.adminTokenServiceUrl=null;d.currentVersion=null;d.hasPortal=null;d.hasServer=null;d.owningSystemUrl=null;d.owningTenant=null;d.server=null;d.shortLivedTokenValidity=null;d.tokenServiceUrl=null;d.webTierAuth=null;return d}l(e,b);h([g.property({json:{write:!0}})],e.prototype,"adminTokenServiceUrl",void 0);h([g.property({json:{write:!0}})],e.prototype,"currentVersion",void 0);h([g.property({json:{write:!0}})],e.prototype,"hasPortal",
void 0);h([g.property({json:{write:!0}})],e.prototype,"hasServer",void 0);h([g.property({json:{write:!0}})],e.prototype,"owningSystemUrl",void 0);h([g.property({json:{write:!0}})],e.prototype,"owningTenant",void 0);h([g.property({json:{write:!0}})],e.prototype,"server",void 0);h([g.property({json:{write:!0}})],e.prototype,"shortLivedTokenValidity",void 0);h([g.property({json:{write:!0}})],e.prototype,"tokenServiceUrl",void 0);h([g.property({json:{write:!0}})],e.prototype,"webTierAuth",void 0);return e=
h([g.subclass("esri.identity.ServerInfo")],e)}(g.declared(b))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(n,k,l,h,b,g,f,e,d,a){h("dijit-legacy-requires")&&f(0,function(){n(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});f=k("dijit.form.Button"+(h("dojo-bidi")?"_NoBidi":""),
[e,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=g.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&
l.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){b.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=g.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});h("dojo-bidi")&&(f=k("dijit.form.Button",f,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&
this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return f})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,k,l,h,b,g,f,e){k("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});return n("dijit.form._FormWidget",
[b,f,g,e],{setDisabled:function(b){l.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){l.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){l.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,k,l,h,b,g,f,e,d,a){return k("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(l.set(this.focusNode,"disabled",c),e("trident")&&"readOnly"in this&&l.set(this.focusNode,"readonly",c||this.readOnly)):this.focusNode.setAttribute("aria-disabled",c?"true":"false");this.valueNode&&l.set(this.valueNode,"disabled",c);c?(this._set("hovering",!1),this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:
"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",n.forEach(b.isArray(c)?c:[c],function(b){b=this[b];e("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.own(f(this.focusNode,"focus",function(){h.remove();c.remove()}))[0],g=e("pointer-events")?"pointerup":e("touch-events")?"touchend, mouseup":"mouseup",h=this.own(f(this.ownerDocumentBody,
g,b.hitch(this,function(a){h.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(c){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?
0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(n,k,l,h){var b=n("dijit.form._ButtonMixin"+(l("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(b){b.stopPropagation();b.preventDefault();this.disabled||this.valueNode.click(b);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();var f=b.defaultPrevented;if(!f&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var d=h.byNode(e);if(d&&"function"==typeof d._onSubmit){d._onSubmit(b);b.preventDefault();f=!0;break}}return!f},
postCreate:function(){this.inherited(arguments);k.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(b){this._set("label",b);(this.containerNode||this.focusNode).innerHTML=b;this.onLabelSet()},onLabelSet:function(){}});l("dojo-bidi")&&(b=n("dijit.form._ButtonMixin",b,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return b})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(n,k,l,h,b,g,f,e){return n("dijit.form.Form",[b,g,f,e],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){k.set(this.domNode,
"encType",b);h("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var a=this.constructor.prototype;if(this.execute!=
a.execute||this.onExecute!=a.onExecute)l.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(n,k,l,h,b,g,f){var e=n("dijit.form.ValidationTextBox",b,{templateString:f,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,a){a!=e.prototype[b]&&(k.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",a))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(b,a){return(new RegExp("^(?:"+this._computeRegexp(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,a))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,a="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?a:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var a=
"",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||b)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&e,a=this.getErrorMessage(b)):"Incomplete"==this.state?(a=this.getPromptMessage(b),this._maskValidSubsetError=
!this._hasBeenBlurred||b):d&&(a=this.getPromptMessage(b));this.set("message",a);return c},displayMessage:function(b){b&&this.focused?g.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):g.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=l.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&
this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var a=this.pattern;"function"==typeof a&&(a=a.call(this,b));if(a!=this._lastRegExp){var c="";this._lastRegExp=a;".*"!=a&&a.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(m){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return a},postMixInProperties:function(){this.inherited(arguments);this.messages=h.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){g.hide(this.domNode);this.inherited(arguments)}});return e})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c){e=n("dijit.form.TextBox"+(f("dojo-bidi")?"_NoBidi":""),[e,d],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:f("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>f("ie")&&this.defer(function(){try{var a=l.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(x){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=k.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(g(this._phspan,"mousedown",function(a){a.preventDefault()}),g(this._phspan,"touchend, pointerup, MSPointerUp",b.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),f("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>f("ie")&&(e.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},c._setSelectionRange=d._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});f("dojo-bidi")&&(e=n("dijit.form.TextBox",e,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return e})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(n,k,l,h){return n("dijit.form._FormValueWidget",[l,h],{_layoutHackIE7:function(){if(7==
k("ie"))for(var b=this.domNode,g=b.parentNode,f=b.firstChild||b,e=f.style.filter,d=this;g&&0==g.clientHeight;)(function(){var a=d.connect(g,"onscroll",function(){d.disconnect(a);f.style.filter=(new Date).getMilliseconds();d.defer(function(){f.style.filter=e})})})(),g=g.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(n,k,l,h,b,g,f){return n("dijit.form._FormValueMixin",
f,{readOnly:!1,_setReadOnlyAttr:function(b){g("trident")&&"disabled"in this?k.set(this.focusNode,"readOnly",b||this.disabled):k.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,d){this._handleOnChange(b,d)},_handleOnChange:function(b,d){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,
!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(n,k,l,h,b,g,f,e){var d=k("dijit.form._TextBoxMixin"+(h("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),
this.constraints)},_setValueAttr:function(a,b,d){var c;void 0!==a&&(c=this.filter(a),"string"!=typeof d&&(d=null===c||"number"==typeof c&&isNaN(c)?"":this.filter(this.format(c,this.constraints)),0!=this.compare(c,this.filter(this.parse(d,this.constraints)))&&(d=null)));null==d||"number"==typeof d&&isNaN(d)||this.textbox.value==d||(this.textbox.value=d,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[c,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},
_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&
this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(f(this.textbox,"keydown, keypress, paste, cut, compositionend",g.hitch(this,function(a){var c;if("keydown"==a.type&&229!=a.keyCode){c=a.keyCode;switch(c){case b.SHIFT:case b.ALT:case b.CTRL:case b.META:case b.CAPS_LOCK:case b.NUM_LOCK:case b.SCROLL_LOCK:return}if(!a.ctrlKey&&
!a.metaKey&&!a.altKey){switch(c){case b.NUMPAD_0:case b.NUMPAD_1:case b.NUMPAD_2:case b.NUMPAD_3:case b.NUMPAD_4:case b.NUMPAD_5:case b.NUMPAD_6:case b.NUMPAD_7:case b.NUMPAD_8:case b.NUMPAD_9:case b.NUMPAD_MULTIPLY:case b.NUMPAD_PLUS:case b.NUMPAD_ENTER:case b.NUMPAD_MINUS:case b.NUMPAD_PERIOD:case b.NUMPAD_DIVIDE:return}if(65<=c&&90>=c||48<=c&&57>=c||c==b.SPACE)return;c=!1;for(var d in b)if(b[d]===a.keyCode){c=!0;break}if(!c)return}}(c=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||
(c=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==b.SPACE?String.fromCharCode(a.keyCode):a.keyCode);c||(c=229);if("keypress"==a.type){if("string"!=typeof c)return;if("a"<=c&&"z">=c||"A"<=c&&"Z">=c||"0"<=c&&"9">=c||" "===c)if(a.ctrlKey||a.metaKey||a.altKey)return}var e={faux:!0},k;for(k in a)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||(d=a[k],"function"!=typeof d&&"undefined"!=typeof d&&(e[k]=d));g.mixin(e,{charOrCode:c,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=
!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=e;!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());if(!e._wasConsumed&&9>=h("ie"))switch(a.keyCode){case b.TAB:case b.ESCAPE:case b.DOWN_ARROW:case b.UP_ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:break;default:a.keyCode==b.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&f.emit(this.textbox,"input",{bubbles:!0})})}})),
f(this.textbox,"input",g.hitch(this,"_onInput")),f(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=g.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=f.once(this.domNode,"mouseup, touchend",g.hitch(this,function(a){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});h("dojo-bidi")&&(d=k("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=e._setSelectionRange=function(a,b,
d){a.setSelectionRange&&a.setSelectionRange(b,d)};d.selectInputText=e.selectInputText=function(a,b,e){a=l.byId(a);isNaN(b)&&(b=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),d._setSelectionRange(a,b,e)}catch(r){}};return d})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(n,k,l,h,b,g,f,e,d,a,c,m,r,v,x,q,E,D){function y(){}var u=k("dijit._MasterTooltip",[v,x],{duration:m.defaultDuration,templateString:E,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new q(this.domNode);this.fadeIn=l.fadeIn({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onShow")});this.fadeOut=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onHide")})},show:function(a,b,c,d,g,h,k){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=d?"right":"left";var l=r.around(this.domNode,b,c&&c.length?c:z.defaultPosition,!d,e.hitch(this,"orient")),n=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");f.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=h||y;this.onMouseLeave=k||y}},orient:function(a,b,d,e,f){this.connectorNode.style.top="";var h=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+d];this.domNode.style.width="auto";var k=g.position(this.domNode);if(c("ie")||c("trident"))k.w+=2;g.setMarginBox(this.domNode,{w:Math.min(Math.max(e,1),k.w)});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=g.position(a),b=this.connectorNode.offsetHeight,
a.h>h?(this.connectorNode.style.top=h-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,k.w-e)},_onShow:function(){c("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});c("dojo-bidi")&&u.extend({_setAutoTextDir:function(a){this.applyTextDir(a);n.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});D.showTooltip=
function(a,b,c,d,e,f,g){c&&(c=n.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(D._masterTT=z._masterTT=new u);return z._masterTT.show(a,b,c,d,e,f,g)};D.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=k("dijit.Tooltip",v,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this._connectIds=
n.filter(e.isArrayLike(b)?b:b?[b]:[],function(a){return h.byId(a,this.ownerDocument)},this);this._connections=n.map(this._connectIds,function(b){b=h.byId(b,this.ownerDocument);var c=this.selector,f=c?function(b){return a.selector(c,b)}:function(a){return a},g=this;return[a(b,f(d.enter),function(){g._onHover(this)}),a(b,f("focusin"),function(){g._onHover(this)}),a(b,f(d.leave),e.hitch(g,"_onUnHover")),a(b,f("focusout"),e.hitch(g,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(a){a=
a.id||a;-1==n.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=n.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;n.forEach(e.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,e.hitch(this,"set","state","SHOWING"),e.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});z._MasterTooltip=u;z.show=
D.showTooltip;z.hide=D.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(n,k,l,h,b,g,f){function e(a,c,d,e){var f=g.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||b.body(a.ownerDocument).appendChild(a);var h=null;n.some(c,function(b){var c=b.corner,g=b.pos,l=0,n=
{w:{L:f.l+f.w-g.x,R:g.x-f.l,M:f.w}[c.charAt(1)],h:{T:f.t+f.h-g.y,B:g.y-f.t,M:f.h}[c.charAt(0)]},m=a.style;m.left=m.right="auto";d&&(l=d(a,b.aroundCorner,c,n,e),l="undefined"==typeof l?0:l);var q=a.style,r=q.display,x=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");m=k.position(a);q.display=r;q.visibility=x;r={L:g.x,R:g.x-m.w,M:Math.max(f.l,Math.min(f.l+f.w,g.x+(m.w>>1))-m.w)}[c.charAt(1)];x={T:g.y,B:g.y-m.h,M:Math.max(f.t,Math.min(f.t+f.h,g.y+(m.h>>1))-m.h)}[c.charAt(0)];g=Math.max(f.l,
r);q=Math.max(f.t,x);r=Math.min(f.l+f.w,r+m.w)-g;x=Math.min(f.t+f.h,x+m.h)-q;l+=m.w-r+(m.h-x);if(null==h||l<h.overflow)h={corner:c,aroundCorner:b.aroundCorner,x:g,y:q,w:r,h:x,overflow:l,spaceAvailable:n};return!l});h.overflow&&d&&d(a,h.aroundCorner,h.corner,h.spaceAvailable,e);c=h.y;var m=h.x,r=b.body(a.ownerDocument);/relative|absolute/.test(l.get(r,"position"))&&(c-=l.get(r,"marginTop"),m-=l.get(r,"marginLeft"));r=a.style;r.top=c+"px";r.left=m+"px";r.right="auto";return h}var d={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return f.place={at:function(a,b,f,g,h){f=n.map(f,function(a){var c={corner:a,aroundCorner:d[a],pos:{x:b.x,y:b.y}};g&&(c.pos.x+="L"==a.charAt(1)?g.x:-g.x,c.pos.y+="T"==a.charAt(0)?g.y:-g.y);return c});return e(a,f,h)},around:function(a,b,d,f,g){function c(a,b){H.push({aroundCorner:a,corner:b,pos:{x:{L:t,R:t+G,M:t+(G>>1)}[a.charAt(1)],y:{T:A,B:A+J,M:A+(J>>1)}[a.charAt(0)]}})}var m;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(m=k.position(b,!0),/^(above|below)/.test(d[0])){var r=
k.getBorderExtents(b),v=b.firstChild?k.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},y=k.getBorderExtents(a),u=a.firstChild?k.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};m.y+=Math.min(r.t+v.t,y.t+u.t);m.h-=Math.min(r.t+v.t,y.t+u.t)+Math.min(r.b+v.b,y.b+u.b)}}else m=b;if(b.parentNode)for(r="absolute"==l.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){v=k.position(b,!0);y=l.getComputedStyle(b);/relative|absolute/.test(y.position)&&(r=!1);if(!r&&/hidden|auto|scroll/.test(y.overflow)){var u=
Math.min(m.y+m.h,v.y+v.h),z=Math.min(m.x+m.w,v.x+v.w);m.x=Math.max(m.x,v.x);m.y=Math.max(m.y,v.y);m.h=u-m.y;m.w=z-m.x}"absolute"==y.position&&(r=!0);b=b.parentNode}var t=m.x,A=m.y,G="w"in m?m.w:m.w=m.width,J="h"in m?m.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+t+", y:"+A+", height:"+m.height+", width:"+G+" } has been deprecated.  Please use { x:"+t+", y:"+A+", h:"+m.height+", w:"+G+" }","","2.0"),m.h=m.height),H=[];n.forEach(d,function(a){var b=f;switch(a){case "above-centered":c("TM",
"BM");break;case "below-centered":c("BM","TM");break;case "after-centered":b=!b;case "before-centered":c(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":c(b?"TL":"TR",b?"TR":"TL");c(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":c(b?"BL":"BR",b?"TL":"TR");c(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":c(b?"TL":"TR",b?"BL":"BR");c(b?"TR":"TL",b?"BR":"BL");break;default:c(a.aroundCorner,a.corner)}});a=e(a,H,g,{w:G,h:J});a.aroundNodePos=m;return a}}})},
"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/has ../core/lang ../core/Error ../core/urlUtils dijit/Dialog dijit/registry dojo/Deferred dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dijit/form/Button".split(" "),function(n,k,l,h,b,g,f,e,d,a,c,m){return{_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(b,e,f,g){var h=this._oAuthDfd=new d;h.resUrl_=b;h.sinfo_=e;h.oinfo_=f;var l=!g||!1!==g.oAuthPopupConfirmation;if(!f.popup||!l)return this._doOAuthSignIn(b,e,f),h.promise;this._nls||(this._nls=c);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());b=this.oAuthDialog;f=g&&g.error;g=g&&g.token;k.hide(b.errMsg_);f&&f.details&&403==f.details.httpStatus&&g&&(a.set(b.errMsg_,"innerHTML",this._nls.forbidden),
k.show(b.errMsg_));a.set(b.serverLink_,{title:e.server,innerHTML:-1!==e.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":e.server});b.show();return h.promise},setOAuthResponseHash:function(a){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=m.queryToObject(a),a.error){var d="access_denied"===a.error;a=new b(d?"identity-manager:user-aborted":"identity-manager:authentication-failed",d?"ABORTED":"OAuth: "+a.error+
" - "+a.error_description);c.reject(a)}else{var d=c.oinfo_._oAuthCred,e=new n({userId:a.username,server:c.sinfo_.server,token:a.access_token,expires:Date.now()+1E3*Number(a.expires_in),ssl:"true"===a.ssl,_oAuthCred:d});d.storage=a.persist?window.localStorage:window.sessionStorage;d.token=e.token;d.expires=e.expires;d.userId=e.userId;d.ssl=e.ssl;d.save();c.resolve(e)}},_createOAuthDialog:function(){var a=this._nls,c=h.substitute(a,this._oAuthDialogContent),c=h.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
c),d=new f({title:a.title,content:c,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=d.esriIdMgr_._oAuthDfd;d.hide_();d.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=d.esriIdMgr_._oAuthDfd;d.esriIdMgr_._oAuthDfd=null;d.hide_();var c=new b("identity-manager:user-aborted","ABORTED");a.reject(c)},hide_:function(){k.hide(d.errMsg_);d.hide();f._DialogLevelManager.hide(d)}}),a=d.domNode;d.btnSubmit_=
e.byNode(a.getElementsByClassName("esriIdSubmit")[0]);d.btnCancel_=e.byNode(a.getElementsByClassName("esriIdCancel")[0]);d.serverLink_=a.getElementsByClassName("serverLink")[0];d.errMsg_=a.getElementsByClassName("esriErrorMsg")[0];d.connect(d.btnSubmit_,"onClick",d.execute_);d.connect(d.btnCancel_,"onClick",d.onCancel);d.connect(d,"onCancel",d.cancel_);return d},_doOAuthSignIn:function(a,c,d){var e=this,f={client_id:d.appId,response_type:"token",state:JSON.stringify({portalUrl:d.portalUrl}),expiration:d.expiration,
locale:d.locale,redirect_uri:d.popup?g.makeAbsolute(d.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};d.forceLogin&&(f.force_login=!0);var h=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",k=h+"?"+m.objectToQuery(f);if(d.popup){var n;7===l("ie")?(n=window.open(d.popupCallbackUrl,"esriJSAPIOAuth",d.popupWindowFeatures),n.location=k):n=window.open(k,"esriJSAPIOAuth",d.popupWindowFeatures);n?(n.focus(),this._oAuthDfd.oAuthWin_=n,this._oAuthIntervalId=setInterval(function(){if(n.closed){clearInterval(e._oAuthIntervalId);
var a=e._oAuthDfd;if(a){var c=new b("identity-manager:user-aborted","ABORTED");a.reject(c)}}},500)):(a=new b("identity-manager:popup-blocked","ABORTED"),this._oAuthDfd.reject(a))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:f,authorizeUrl:h,resourceUrl:a,serverInfo:c,oAuthInfo:d}):window.location=k}}})},"esri/identity/Credential":function(){define(["require","exports","./IdentityManagerBase"],function(n,k,l){return l.Credential})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/identity/nls/IdentityManager*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../kernel ../core/declare ./IdentityManagerDialog ./OAuthSignInHandler".split(" "),function(n,k,l,h,b,g){n=new b;h=h.safeMixin(n,g);return l.id=h});