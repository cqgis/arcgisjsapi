// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ./common ../../support/geometryUtils ../../support/mathUtils".split(" "),function(w,g,h,f,m,k,q){function p(b,c,d){void 0===d&&(d=m.defaultApplyOptions);if(!b.state.isLocal)return 0;var a=b.state.constraints.distance;if(!b.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===a)return 0;n.min=0;n.max=a;var a=n,e=d.interactionType;if(0!==e){var f=a.min,g=a.max,l=d.interactionStartCamera;d=d.interactionFactor;
var e=1===e||4===e,k=p(b,l),l=0===k?0:h.vec3.distance(l.eye,b.pointsOfInterest.surfaceOrigin.renderLocation);a.min=f;a.max=g;m.adjustRangeForInteraction(k,l,e,d,.05*l,a)}b=h.vec3.distance(c.eye,b.pointsOfInterest.surfaceOrigin.renderLocation);b=n.max-b;return-1E-6<=b?0:b}Object.defineProperty(g,"__esModule",{value:!0});g.error=p;g.apply=function(b,c,d,a){void 0===d&&(d=m.defaultApplyOptions);void 0===a&&(a=c);a!==c&&a.copyFrom(c);var e=p(b,c,d);if(0===e)return!1;var f=b.pointsOfInterest.surfaceOrigin,
e=h.vec3.distance(c.eye,b.pointsOfInterest.surfaceOrigin.renderLocation)+e,g=h.vec3.copy(r,c.eye);d=m.interactionDirectionTowardsConstraintMinimization(b,c,d.interactionDirection,q.directionFromTo(t,c.eye,b.pointsOfInterest.surfaceOrigin.renderLocation),u);return k.sphere.intersectRay(k.sphere.wrap(e,f.renderLocation),k.ray.wrap(c.eye,d),a.eye)?(c=h.vec3.subtract(v,a.eye,g),h.vec3.add(a.center,a.center,c),a.markViewDirty(),c=b.renderCoordsHelper.getAltitude(a.center),b.renderCoordsHelper.intersectInfiniteManifold(a.ray,
c,a.center),a.markViewDirty(),!0):!1};var n={min:0,max:0},r=f.vec3f64.create(),v=f.vec3f64.create(),u=f.vec3f64.create(),t=f.vec3f64.create()});