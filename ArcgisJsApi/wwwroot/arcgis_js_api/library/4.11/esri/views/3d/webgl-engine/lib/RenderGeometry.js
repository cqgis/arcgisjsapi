// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/mathUtils ./ComponentUtils ./HighlightUtils".split(" "),function(p,q,d,e,f,k,g,c,h){return function(){function a(b,l,a,c,d,e,f,g,h,m,n){this.shaderTransformationDirty=!0;this.data=b.toRenderData();this.componentOffsets=b.componentOffsets;this.boundingInfo=l;this.material=a;this.origin=null;this.center=
k.vec3f64.create();this.bsRadius=0;this.transformation=null;this.calculateShaderTransformation=d;c&&this.updateTransformation(c,e);this.castShadow=f;this.singleUse=g;this.name=h;this.uniqueName=m;this.idx=n;this.instanceParameters={}}a.prototype.updateTransformation=function(b,a){this.transformation=b;this.shaderTransformationDirty=!0;this.bsRadius=this.getBoundingSphere(b,a,this.center)};a.prototype.shaderTransformationChanged=function(){this.shaderTransformationDirty=!0};a.prototype.getBoundingSphere=
function(b,a,c){a=a||g.maxScale(b);f.vec3.transformMat4(c,this.boundingInfo.getCenter(),b);return this.boundingInfo.getBSRadius()*a};Object.defineProperty(a.prototype,"hasShaderTransformation",{get:function(){return!!this.calculateShaderTransformation},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"componentCount",{get:function(){return c.componentCount(this.componentOffsets)},enumerable:!0,configurable:!0});a.prototype.getShaderTransformation=function(){if(!this.calculateShaderTransformation)return this.transformation;
this.shaderTransformationDirty&&(this.shaderTransformation||(this.shaderTransformation=e.mat4f64.create()),d.mat4.copy(this.shaderTransformation,this.calculateShaderTransformation(this.transformation)),this.shaderTransformationDirty=!1);return this.shaderTransformation};a.prototype.getIndices=function(a){return"indices"in this.data?this.data.indices[a]:null};a.prototype.getAttribute=function(a){return"vertexAttr"in this.data?this.data.vertexAttr[a]:null};a.prototype.addHighlight=function(a){var b=
h.generateHighlightId(),d=this.instanceParameters;d.componentHighlights=c.addHighlight(d.componentHighlights,null,a,b);return b};a.prototype.removeHighlight=function(a){var b=this.instanceParameters;b.componentHighlights=c.removeHighlight(b.componentHighlights,a)};return a}()});