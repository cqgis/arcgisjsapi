// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/Accessor ../../../../../core/Collection ../../../../../core/maybe ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../views/3d/layers/support/popupUtils3D ../../../../../views/3d/support/projectionUtils ../../../../../views/3d/support/stack".split(" "),function(e,
g,d,h,n,p,q,c,r,t,u,v,w){Object.defineProperty(g,"__esModule",{value:!0});e=function(e){function a(b){b=e.call(this)||this;b._handlers=new p;b.interactive=!0;b.selectable=!1;b.allowOverlap=!0;b.grabbing=!1;b.dragging=!1;b.hovering=!1;b.selected=!1;b.active=!0;return b}h(a,e);a.prototype.initialize=function(){};a.prototype.destroy=function(){this._handlers.removeAll();this._handlers=null;this._set("view",null)};a.prototype.intersectionDistance=function(b){if(!this.active||!this.reshapeHelper.geometry)return null;
b=u.intersectsDrapedGeometry(b,this.reshapeHelper.geometry,this.view);if(q.isNone(b))return null;var a=w.sv3d.get();return this.view.renderCoordsHelper.toRenderCoords(b,a)?r.vec3.distance(x,this.view.state.camera.eye):null};a.prototype.attemptDragTo=function(b,a){if(null==this.reshapeHelper.geometry)return!1;var c=this.view.toMap(a.previous),d=this.view.toMap(b.screenPoint),f=0,e=0,k=0,g=0,l=0,m=0;c&&d&&(f=[0,0,0,0,0,0],v.bufferToBuffer([c.x,c.y,0,d.x,d.y,0],c.spatialReference,0,f,this.reshapeHelper.geometry.spatialReference,
0,2),k=f[3]-f[0],g=f[4]-f[1],f=d.x-c.x,e=d.y-c.y,l=b.screenPoint.x-a.previous.x,m=b.screenPoint.y-a.previous.y);var h={screenPoint:b.screenPoint,dxMap:f,dyMap:e,dxGeometry:k,dyGeometry:g,dxScreen:l,dyScreen:m,toMS:d};this._handlers.forEach(function(a){"drag"===a.type&&a.handler(h)});return!0};a.prototype.click=function(a){this._handlers.forEach(function(b){"click"===b.type&&b.handler(a)})};a.prototype.on=function(a,c){this._handlers.push({type:a,handler:c})};d([c.property()],a.prototype,"reshapeHelper",
void 0);d([c.property({constructOnly:!0,nonNullable:!0})],a.prototype,"view",void 0);d([c.property()],a.prototype,"interactive",void 0);d([c.property()],a.prototype,"selectable",void 0);d([c.property()],a.prototype,"allowOverlap",void 0);d([c.property()],a.prototype,"grabbing",void 0);d([c.property()],a.prototype,"dragging",void 0);d([c.property()],a.prototype,"hovering",void 0);d([c.property()],a.prototype,"selected",void 0);d([c.property()],a.prototype,"active",void 0);return a=d([c.subclass("esri.views.interactive.GeometryManipulator")],
a)}(c.declared(n));g.ReshapeMoveManipulator=e;var x=t.vec3f64.create()});