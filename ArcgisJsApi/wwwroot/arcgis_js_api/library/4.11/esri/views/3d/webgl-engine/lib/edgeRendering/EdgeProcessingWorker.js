// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(r){return function(a,d,l,f){var n=null;return r.create(function(l,m){function h(g){try{b(f.next(g))}catch(c){m(c)}}function t(g){try{b(f["throw"](g))}catch(c){m(c)}}function b(b){b.done?(n=r.when(b.value),n.then(l,m)):(n=r.when(b.value),n.then(h,t))}b((f=f.apply(a,d||[])).next())},function(a){n&&n.cancel(a)})}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(r,
a){function d(a){return function(b){return l([a,b])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;f;)try{if(n=1,p&&(m=h[0]&2?p["return"]:h[0]?p["throw"]||((m=p["return"])&&m.call(p),0):p.next)&&!(m=m.call(p,h[1])).done)return m;if(p=0,m)h=[h[0]&2,m.value];switch(h[0]){case 0:case 1:m=h;break;case 4:return f.label++,{value:h[1],done:!1};case 5:f.label++;p=h[1];h=[0];continue;case 7:h=f.ops.pop();f.trys.pop();continue;default:if(!(m=f.trys,m=0<m.length&&m[m.length-
1])&&(6===h[0]||2===h[0])){f=0;continue}if(3===h[0]&&(!m||h[1]>m[0]&&h[1]<m[3]))f.label=h[1];else if(6===h[0]&&f.label<m[1])f.label=m[1],m=h;else if(m&&f.label<m[2])f.label=m[2],f.ops.push(h);else{m[2]&&f.ops.pop();f.trys.pop();continue}}h=a.call(r,f)}catch(b){h=[6,b],p=0}finally{n=m=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},n,p,m,h;return h={next:d(0),"throw":d(1),"return":d(2)},"function"===typeof Symbol&&
(h[Symbol.iterator]=function(){return this}),h}})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["require","exports","../../../core/mathUtils"],function(r,a,d){function l(a,l,m,h){void 0===h&&(h=0);var n=a.byteLength/(4*l),b=new Uint32Array(a,0,n*l);a=new Uint32Array(n);var g=Math.floor(1.1*n)+1;if(null==f||f.length<2*g)f=new Uint32Array(d.nextHighestPowerOfTwo(2*g));for(var c=0;c<2*g;c++)f[c]=0;for(var e=0,k=0!==h?Math.ceil(7.84*1.96/(h*h)*h*(1-h)):n,c=0;c<n;c++){if(c===k){var u=
1-e/c;if(u+1.96*Math.sqrt(u*(1-u)/c)<h)return null;k*=2}for(var u=c*l,q,v=q=0;v<l;v++)q=b[u+v]+q|0,q=q+(q<<11)+(q>>>2)|0;q>>>=0;for(var v=q%g,w=e;0!==f[2*v+1];){if(f[2*v]===q){var p=f[2*v+1]-1,G=p*l;a:{for(var B=0;B<l;B++)if(b[u+B]!==b[G+B]){G=!1;break a}G=!0}if(G){w=a[p];break}}v++;v>=g&&(v-=g)}w===e&&(f[2*v]=q,f[2*v+1]=c+1,e++);a[c]=w}if(0!==h&&1-e/n<h)return null;h=new Uint32Array(l*e);for(c=e=0;c<n;c++)if(a[c]===e){g=b;k=c*l;u=h;q=e*l;v=l;for(w=0;w<v;w++)u[q+w]=g[k+w];e++}if(m){l=new Uint32Array(m.length);
for(c=0;c<l.length;c++)l[c]=a[m[c]];a=l}return{buffer:h.buffer,indices:a,uniqueCount:e}}Object.defineProperty(a,"__esModule",{value:!0});a.deduplicate=l;var f=null;a.default=l})},"esri/core/mathUtils":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",{value:!0});a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.nextHighestPowerOfTwo=function(a){--a;for(var l=1;32>l;l<<=1)a|=
a>>l;return a+1}})},"esri/views/3d/support/meshProcessing":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",{value:!0});a.computeNeighbors=function(a,l){for(var f=a.length/3,n=new Uint32Array(l+1),d=new Uint32Array(l+1),m=function(b,g){b<g?n[b+1]++:d[g+1]++},h=0;h<f;h++){var t=a[3*h],b=a[3*h+1],g=a[3*h+2];m(t,b);m(b,g);m(g,t)}for(h=b=t=0;h<l;h++)g=n[h+1],m=d[h+1],n[h+1]=t,d[h+1]=b,t+=g,b+=m;for(var c=new Uint32Array(6*f),e=n[l],m=function(b,g,q){if(b<g){var a=
n[b+1]++;c[2*a]=g;c[2*a+1]=q}else a=d[g+1]++,c[2*e+2*a]=b,c[2*e+2*a+1]=q},h=0;h<f;h++)t=a[3*h],b=a[3*h+1],g=a[3*h+2],m(t,b,h),m(b,g,h),m(g,t,h);t=function(b,g){var e=2*b;b=g-b;for(g=1;g<b;g++){var q=c[e+2*g],a=c[e+2*g+1],k=g-1;for(k;0<=k&&c[e+2*k]>q;k--)c[e+2*k+2]=c[e+2*k],c[e+2*k+3]=c[e+2*k+1];c[e+2*k+2]=q;c[e+2*k+3]=a}};for(h=0;h<l;h++)t(n[h],n[h+1]),t(e+d[h],e+d[h+1]);for(var k=new Int32Array(3*f),u=function(b,g){return b===a[3*g]?0:b===a[3*g+1]?1:b===a[3*g+2]?2:-1},f=function(b,g){b=u(b,g);k[3*
g+b]=-1},t=function(b,g,c,e){b=u(b,g);k[3*g+b]=e;c=u(c,e);k[3*e+c]=g},h=0;h<l;h++){for(var b=n[h],g=n[h+1],m=d[h],q=d[h+1];b<g&&m<q;){var v=c[2*b],w=c[2*e+2*m];v===w?(t(h,c[2*b+1],w,c[2*e+2*m+1]),b++,m++):v<w?(f(h,c[2*b+1]),b++):(f(w,c[2*e+2*m+1]),m++)}for(;b<g;)f(h,c[2*b+1]),b++;for(;m<q;)w=c[2*e+2*m],f(w,c[2*e+2*m+1]),m++}return k}})},"esri/views/3d/support/buffer/workerHelper":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","./BufferView","./InterleavedLayout"],
function(r,a,d,l,f){function n(a){var f=[];a.fields.forEach(function(b,g){var c=b.constructor;b=d({},b,{constructor:c.ElementType+"_"+c.ElementCount});f.push([g,b])});return{stride:a.stride,fields:f,fieldNames:a.fieldNames}}function p(a){var h=f.newLayout();h.stride=a.stride;h.fieldNames=a.fieldNames;a.fields.forEach(function(b){return h.fields.set(b[0],d({},b[1],{constructor:m.get(b[1].constructor)}))});return h}Object.defineProperty(a,"__esModule",{value:!0});a.packInterleavedBuffer=function(a,
f){f.push(a.buffer);return{buffer:a.buffer,layout:n(a.layout)}};a.unpackInterleavedBuffer=function(a){return p(a.layout).createView(a.buffer)};a.packLayout=n;a.unpackLayout=p;r=[l.BufferViewFloat,l.BufferViewVec2f,l.BufferViewVec3f,l.BufferViewVec4f,l.BufferViewMat3f,l.BufferViewMat4f,l.BufferViewFloat64,l.BufferViewVec2f64,l.BufferViewVec3f64,l.BufferViewVec4f64,l.BufferViewMat3f64,l.BufferViewMat4f64,l.BufferViewUint8,l.BufferViewVec2u8,l.BufferViewVec3u8,l.BufferViewVec4u8,l.BufferViewUint16,l.BufferViewVec2u16,
l.BufferViewVec3u16,l.BufferViewVec4u16,l.BufferViewUint32,l.BufferViewVec2u32,l.BufferViewVec3u32,l.BufferViewVec4u32,l.BufferViewInt8,l.BufferViewVec2i8,l.BufferViewVec3i8,l.BufferViewVec4i8,l.BufferViewInt16,l.BufferViewVec2i16,l.BufferViewVec3i16,l.BufferViewVec4i16,l.BufferViewInt32,l.BufferViewVec2i32,l.BufferViewVec3i32,l.BufferViewVec4i32];var m=new Map;r.forEach(function(a){return m.set(a.ElementType+"_"+a.ElementCount,a)})})},"esri/views/3d/support/buffer/BufferView":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),
function(r,a,d,l,f,n,p,m,h){Object.defineProperty(a,"__esModule",{value:!0});r=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,a);b.ElementType="f32";return b}(n.BufferViewScalarImpl);a.BufferViewFloat=r;r=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,a);b.ElementType="f32";return b}(p.BufferViewVec2Impl);a.BufferViewVec2f=r;r=function(a){function b(b,
c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,a);b.ElementType="f32";return b}(m.BufferViewVec3Impl);a.BufferViewVec3f=r;r=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,a);b.ElementType="f32";return b}(h.BufferViewVec4Impl);a.BufferViewVec4f=r;r=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,
a);b.ElementType="f32";return b}(l.BufferViewMat3Impl);a.BufferViewMat3f=r;l=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}d(b,a);b.ElementType="f64";return b}(l.BufferViewMat3Impl);a.BufferViewMat3f64=l;l=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float32Array,b,c,e,k)||this;b.elementType="f32";return b}d(b,a);b.ElementType="f32";return b}(f.BufferViewMat4Impl);a.BufferViewMat4f=l;f=function(a){function b(b,
c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}d(b,a);b.ElementType="f64";return b}(f.BufferViewMat4Impl);a.BufferViewMat4f64=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}d(b,a);b.ElementType="f64";return b}(n.BufferViewScalarImpl);a.BufferViewFloat64=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}
d(b,a);b.ElementType="f64";return b}(p.BufferViewVec2Impl);a.BufferViewVec2f64=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}d(b,a);b.ElementType="f64";return b}(m.BufferViewVec3Impl);a.BufferViewVec3f64=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Float64Array,b,c,e,k)||this;b.elementType="f64";return b}d(b,a);b.ElementType="f64";return b}(h.BufferViewVec4Impl);a.BufferViewVec4f64=f;f=function(a){function b(b,
c,e,k){void 0===c&&(c=0);b=a.call(this,Uint8Array,b,c,e,k)||this;b.elementType="u8";return b}d(b,a);b.ElementType="u8";return b}(n.BufferViewScalarImpl);a.BufferViewUint8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint8Array,b,c,e,k)||this;b.elementType="u8";return b}d(b,a);b.ElementType="u8";return b}(p.BufferViewVec2Impl);a.BufferViewVec2u8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint8Array,b,c,e,k)||this;b.elementType="u8";return b}d(b,a);b.ElementType=
"u8";return b}(m.BufferViewVec3Impl);a.BufferViewVec3u8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint8Array,b,c,e,k)||this;b.elementType="u8";return b}d(b,a);b.ElementType="u8";return b}(h.BufferViewVec4Impl);a.BufferViewVec4u8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint16Array,b,c,e,k)||this;b.elementType="u16";return b}d(b,a);b.ElementType="u16";return b}(n.BufferViewScalarImpl);a.BufferViewUint16=f;f=function(a){function b(b,c,e,k){void 0===
c&&(c=0);b=a.call(this,Uint16Array,b,c,e,k)||this;b.elementType="u16";return b}d(b,a);b.ElementType="u16";return b}(p.BufferViewVec2Impl);a.BufferViewVec2u16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint16Array,b,c,e,k)||this;b.elementType="u16";return b}d(b,a);b.ElementType="u16";return b}(m.BufferViewVec3Impl);a.BufferViewVec3u16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint16Array,b,c,e,k)||this;b.elementType="u16";return b}d(b,a);b.ElementType=
"u16";return b}(h.BufferViewVec4Impl);a.BufferViewVec4u16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint32Array,b,c,e,k)||this;b.elementType="u32";return b}d(b,a);b.ElementType="u32";return b}(n.BufferViewScalarImpl);a.BufferViewUint32=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint32Array,b,c,e,k)||this;b.elementType="u32";return b}d(b,a);b.ElementType="u32";return b}(p.BufferViewVec2Impl);a.BufferViewVec2u32=f;f=function(a){function b(b,c,e,k){void 0===
c&&(c=0);b=a.call(this,Uint32Array,b,c,e,k)||this;b.elementType="u32";return b}d(b,a);b.ElementType="u32";return b}(m.BufferViewVec3Impl);a.BufferViewVec3u32=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Uint32Array,b,c,e,k)||this;b.elementType="u32";return b}d(b,a);b.ElementType="u32";return b}(h.BufferViewVec4Impl);a.BufferViewVec4u32=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int8Array,b,c,e,k)||this;b.elementType="i8";return b}d(b,a);b.ElementType=
"i8";return b}(n.BufferViewScalarImpl);a.BufferViewInt8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int8Array,b,c,e,k)||this;b.elementType="i8";return b}d(b,a);b.ElementType="i8";return b}(p.BufferViewVec2Impl);a.BufferViewVec2i8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int8Array,b,c,e,k)||this;b.elementType="i8";return b}d(b,a);b.ElementType="i8";return b}(m.BufferViewVec3Impl);a.BufferViewVec3i8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=
0);b=a.call(this,Int8Array,b,c,e,k)||this;b.elementType="i8";return b}d(b,a);b.ElementType="i8";return b}(h.BufferViewVec4Impl);a.BufferViewVec4i8=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int16Array,b,c,e,k)||this;b.elementType="i16";return b}d(b,a);b.ElementType="i16";return b}(n.BufferViewScalarImpl);a.BufferViewInt16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int16Array,b,c,e,k)||this;b.elementType="i16";return b}d(b,a);b.ElementType="i16";return b}(p.BufferViewVec2Impl);
a.BufferViewVec2i16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int16Array,b,c,e,k)||this;b.elementType="i16";return b}d(b,a);b.ElementType="i16";return b}(m.BufferViewVec3Impl);a.BufferViewVec3i16=f;f=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int16Array,b,c,e,k)||this;b.elementType="i16";return b}d(b,a);b.ElementType="i16";return b}(h.BufferViewVec4Impl);a.BufferViewVec4i16=f;n=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int32Array,
b,c,e,k)||this;b.elementType="i32";return b}d(b,a);b.ElementType="i32";return b}(n.BufferViewScalarImpl);a.BufferViewInt32=n;p=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int32Array,b,c,e,k)||this;b.elementType="i32";return b}d(b,a);b.ElementType="i32";return b}(p.BufferViewVec2Impl);a.BufferViewVec2i32=p;m=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int32Array,b,c,e,k)||this;b.elementType="i32";return b}d(b,a);b.ElementType="i32";return b}(m.BufferViewVec3Impl);
a.BufferViewVec3i32=m;h=function(a){function b(b,c,e,k){void 0===c&&(c=0);b=a.call(this,Int32Array,b,c,e,k)||this;b.elementType="i32";return b}d(b,a);b.ElementType="i32";return b}(h.BufferViewVec4Impl);a.BufferViewVec4i32=h})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",{value:!0});r=function(){function a(a,f,n,d,m){void 0===n&&(n=0);this.TypedArrayConstructor=a;this.elementCount=9;a=this.TypedArrayConstructor;
void 0===d&&(d=9*a.BYTES_PER_ELEMENT);var h=0===f.byteLength?0:n;this.typedBuffer=null==m?new a(f,h):new a(f,h,(m-n)/a.BYTES_PER_ELEMENT);this.typedBufferStride=d/a.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.getMat=function(a,f){a*=this.typedBufferStride;for(var l=0;9>l;l++)f[l]=this.typedBuffer[a+l];return f};a.prototype.setMat=function(a,f){a*=this.typedBufferStride;
for(var l=0;9>l;l++)this.typedBuffer[a+l]=f[l]};a.prototype.get=function(a,f){return this.typedBuffer[a*this.typedBufferStride+f]};a.prototype.set=function(a,f,d){this.typedBuffer[a*this.typedBufferStride+f]=d};a.prototype.copyFrom=function(a,f,d){var l=this.typedBuffer,m=f.typedBuffer;a*=this.typedBufferStride;f=d*f.typedBufferStride;for(d=0;9>d;++d)l[a+d]=m[f+d]};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=
9;return a}();a.BufferViewMat3Impl=r})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",{value:!0});r=function(){function a(a,f,d,p,m){void 0===d&&(d=0);this.TypedArrayConstructor=a;this.elementCount=16;a=this.TypedArrayConstructor;void 0===p&&(p=16*a.BYTES_PER_ELEMENT);var h=0===f.byteLength?0:d;this.typedBuffer=null==m?new a(f,h):new a(f,h,(m-d)/a.BYTES_PER_ELEMENT);this.typedBufferStride=p/a.BYTES_PER_ELEMENT;
this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.getMat=function(a,f){a*=this.typedBufferStride;for(var l=0;16>l;l++)f[l]=this.typedBuffer[a+l];return f};a.prototype.setMat=function(a,f){a*=this.typedBufferStride;for(var l=0;16>l;l++)this.typedBuffer[a+l]=f[l]};a.prototype.get=function(a,f){return this.typedBuffer[a*this.typedBufferStride+f]};a.prototype.set=function(a,f,d){this.typedBuffer[a*
this.typedBufferStride+f]=d};a.prototype.copyFrom=function(a,f,d){var l=this.typedBuffer,m=f.typedBuffer;a*=this.typedBufferStride;f=d*f.typedBufferStride;for(d=0;16>d;++d)l[a+d]=m[f+d]};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=16;return a}();a.BufferViewMat4Impl=r})},"esri/views/3d/support/buffer/internals/Scalar":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",
{value:!0});r=function(){function a(a,f,d,p,m){void 0===d&&(d=0);this.TypedArrayConstructor=a;this.elementCount=1;a=this.TypedArrayConstructor;void 0===p&&(p=a.BYTES_PER_ELEMENT);var h=0===f.byteLength?0:d;this.typedBuffer=null==m?new a(f,h):new a(f,h,(m-d)/a.BYTES_PER_ELEMENT);this.typedBufferStride=p/a.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.get=function(a){return this.typedBuffer[a*
this.typedBufferStride]};a.prototype.set=function(a,f){this.typedBuffer[a*this.typedBufferStride]=f};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=1;return a}();a.BufferViewScalarImpl=r})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});r=function(){function a(a,
d,l,m,h){void 0===l&&(l=0);this.TypedArrayConstructor=a;this.elementCount=2;a=this.TypedArrayConstructor;void 0===m&&(m=2*a.BYTES_PER_ELEMENT);var f=0===d.byteLength?0:l;this.typedBuffer=null==h?new a(d,f):new a(d,f,(h-l)/a.BYTES_PER_ELEMENT);this.typedBufferStride=m/a.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.getVec=function(a,l){return d.vec2.set(l,this.typedBuffer[a*
this.typedBufferStride],this.typedBuffer[a*this.typedBufferStride+1])};a.prototype.setVec=function(a,d){this.typedBuffer[a*this.typedBufferStride]=d[0];this.typedBuffer[a*this.typedBufferStride+1]=d[1]};a.prototype.get=function(a,d){return this.typedBuffer[a*this.typedBufferStride+d]};a.prototype.set=function(a,d,l){this.typedBuffer[a*this.typedBufferStride+d]=l};a.prototype.copyFrom=function(a,d,l){var f=this.typedBuffer,h=d.typedBuffer;a*=this.typedBufferStride;d=l*d.typedBufferStride;f[a]=h[d];
f[a+1]=h[d+1]};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=2;return a}();a.BufferViewVec2Impl=r})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.vec2=d})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(r,a,d){function l(b,a,c){b[0]=a[0]-c[0];b[1]=
a[1]-c[1];return b}function f(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];return b}function n(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];return b}function p(b,a){var c=a[0]-b[0];b=a[1]-b[1];return Math.sqrt(c*c+b*b)}function m(b,a){var c=a[0]-b[0];b=a[1]-b[1];return c*c+b*b}function h(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)}function t(b){var a=b[0];b=b[1];return a*a+b*b}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(b,a){b[0]=a[0];b[1]=a[1];return b};a.set=function(b,a,c){b[0]=a;b[1]=
c;return b};a.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];return b};a.subtract=l;a.multiply=f;a.divide=n;a.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};a.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};a.min=function(b,a,c){b[0]=Math.min(a[0],c[0]);b[1]=Math.min(a[1],c[1]);return b};a.max=function(b,a,c){b[0]=Math.max(a[0],c[0]);b[1]=Math.max(a[1],c[1]);return b};a.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};a.scale=
function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;return b};a.scaleAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;return b};a.distance=p;a.squaredDistance=m;a.length=h;a.squaredLength=t;a.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];return b};a.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];return b};a.normalize=function(b,a){var c=a[0],e=a[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c);return b};a.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]};a.cross=function(b,a,c){a=a[0]*c[1]-a[1]*
c[0];b[0]=b[1]=0;b[2]=a;return b};a.lerp=function(b,a,c,e){var g=a[0];a=a[1];b[0]=g+e*(c[0]-g);b[1]=a+e*(c[1]-a);return b};a.random=function(b,a){a=a||1;var c=2*d.RANDOM()*Math.PI;b[0]=Math.cos(c)*a;b[1]=Math.sin(c)*a;return b};a.transformMat2=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[2]*a;b[1]=c[1]*e+c[3]*a;return b};a.transformMat2d=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[2]*a+c[4];b[1]=c[1]*e+c[3]*a+c[5];return b};a.transformMat3=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[3]*
a+c[6];b[1]=c[1]*e+c[4]*a+c[7];return b};a.transformMat4=function(b,a,c){var e=a[0];a=a[1];b[0]=c[0]*e+c[4]*a+c[12];b[1]=c[1]*e+c[5]*a+c[13];return b};a.rotate=function(b,a,c,e){var k=a[0]-c[0];a=a[1]-c[1];var g=Math.sin(e);e=Math.cos(e);b[0]=k*e-a*g+c[0];b[1]=k*g+a*e+c[1];return b};a.angle=function(b,a){var c=b[0];b=b[1];var e=a[0];a=a[1];var k=c*c+b*b;0<k&&(k=1/Math.sqrt(k));var g=e*e+a*a;0<g&&(g=1/Math.sqrt(g));c=(c*e+b*a)*k*g;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.str=function(b){return"vec2("+
b[0]+", "+b[1]+")"};a.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]};a.equals=function(b,a){var c=b[0];b=b[1];var e=a[0];a=a[1];return Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(b-a)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};a.len=h;a.sub=l;a.mul=f;a.div=n;a.dist=p;a.sqrDist=m;a.sqrLen=t})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require","exports"],function(r,a){Object.defineProperty(a,"__esModule",{value:!0});a.EPSILON=1E-6;a.RANDOM=
Math.random;var d=Math.PI/180,l=180/Math.PI;a.toRadian=function(a){return a*d};a.toDegree=function(a){return a*l};a.equals=function(f,d){return Math.abs(f-d)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))}})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec3"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});r=function(){function a(a,d,l,m,h){void 0===l&&(l=0);this.TypedArrayConstructor=a;this.elementCount=
3;a=this.TypedArrayConstructor;void 0===m&&(m=3*a.BYTES_PER_ELEMENT);var f=0===d.byteLength?0:l;this.typedBuffer=null==h?new a(d,f):new a(d,f,(h-l)/a.BYTES_PER_ELEMENT);this.typedBufferStride=m/a.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.getVec=function(a,l){return d.vec3.set(l,this.typedBuffer[a*this.typedBufferStride],this.typedBuffer[a*this.typedBufferStride+
1],this.typedBuffer[a*this.typedBufferStride+2])};a.prototype.setVec=function(a,d){this.typedBuffer[a*this.typedBufferStride]=d[0];this.typedBuffer[a*this.typedBufferStride+1]=d[1];this.typedBuffer[a*this.typedBufferStride+2]=d[2]};a.prototype.get=function(a,d){return this.typedBuffer[a*this.typedBufferStride+d]};a.prototype.set=function(a,d,l){this.typedBuffer[a*this.typedBufferStride+d]=l};a.prototype.copyFrom=function(a,d,l){var f=this.typedBuffer,h=d.typedBuffer;a*=this.typedBufferStride;d=l*
d.typedBufferStride;f[a]=h[d];f[a+1]=h[d+1];f[a+2]=h[d+2]};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=3;return a}();a.BufferViewVec3Impl=r})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["require","exports","./math/vec3"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.vec3=d})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require","exports","../factories/vec3f64",
"./common"],function(r,a,d,l){function f(b){var a=b[0],c=b[1];b=b[2];return Math.sqrt(a*a+c*c+b*b)}function n(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function p(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];return b}function m(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];b[2]=a[2]*c[2];return b}function h(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];b[2]=a[2]/c[2];return b}function t(b,a){var c=a[0]-b[0],e=a[1]-b[1];b=a[2]-b[2];return Math.sqrt(c*c+e*e+b*b)}function b(b,a){var c=a[0]-b[0],e=a[1]-b[1];b=
a[2]-b[2];return c*c+e*e+b*b}function g(b){var a=b[0],c=b[1];b=b[2];return a*a+c*c+b*b}function c(b,a){var c=a[0],e=a[1],q=a[2],c=c*c+e*e+q*q;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b}function e(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}Object.defineProperty(a,"__esModule",{value:!0});a.length=f;a.copy=n;a.set=function(b,a,c,e){b[0]=a;b[1]=c;b[2]=e;return b};a.add=function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];return b};a.subtract=p;a.multiply=m;a.divide=h;
a.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);return b};a.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);return b};a.min=function(b,a,c){b[0]=Math.min(a[0],c[0]);b[1]=Math.min(a[1],c[1]);b[2]=Math.min(a[2],c[2]);return b};a.max=function(b,a,c){b[0]=Math.max(a[0],c[0]);b[1]=Math.max(a[1],c[1]);b[2]=Math.max(a[2],c[2]);return b};a.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};
a.scale=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;return b};a.scaleAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;return b};a.distance=t;a.squaredDistance=b;a.squaredLength=g;a.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=c;a.dot=e;a.cross=function(b,a,c){var e=a[0],k=a[1];a=a[2];var g=c[0],q=c[1];c=c[2];b[0]=k*c-a*q;b[1]=a*g-e*c;b[2]=e*q-k*g;return b};a.lerp=
function(b,a,c,e){var k=a[0],g=a[1];a=a[2];b[0]=k+e*(c[0]-k);b[1]=g+e*(c[1]-g);b[2]=a+e*(c[2]-a);return b};a.hermite=function(b,a,c,e,k,g){var q=g*g,d=q*(2*g-3)+1,h=q*(g-2)+g,f=q*(g-1);g=q*(3-2*g);b[0]=a[0]*d+c[0]*h+e[0]*f+k[0]*g;b[1]=a[1]*d+c[1]*h+e[1]*f+k[1]*g;b[2]=a[2]*d+c[2]*h+e[2]*f+k[2]*g;return b};a.bezier=function(b,a,c,e,k,g){var q=1-g,d=q*q,h=g*g,f=d*q,d=3*g*d,q=3*h*q;g*=h;b[0]=a[0]*f+c[0]*d+e[0]*q+k[0]*g;b[1]=a[1]*f+c[1]*d+e[1]*q+k[1]*g;b[2]=a[2]*f+c[2]*d+e[2]*q+k[2]*g;return b};a.random=
function(b,a){a=a||1;var c=2*l.RANDOM()*Math.PI,e=2*l.RANDOM()-1,k=Math.sqrt(1-e*e)*a;b[0]=Math.cos(c)*k;b[1]=Math.sin(c)*k;b[2]=e*a;return b};a.transformMat4=function(b,a,c){var e=a[0],k=a[1];a=a[2];b[0]=c[0]*e+c[4]*k+c[8]*a+c[12];b[1]=c[1]*e+c[5]*k+c[9]*a+c[13];b[2]=c[2]*e+c[6]*k+c[10]*a+c[14];return b};a.transformMat3=function(b,a,c){var e=a[0],k=a[1];a=a[2];b[0]=e*c[0]+k*c[3]+a*c[6];b[1]=e*c[1]+k*c[4]+a*c[7];b[2]=e*c[2]+k*c[5]+a*c[8];return b};a.transformQuat=function(b,a,c){var e=c[0],k=c[1],
g=c[2],q=a[0],d=a[1];a=a[2];var h=k*a-g*d,f=g*q-e*a,u=e*d-k*q;c=2*c[3];b[0]=q+h*c+2*(k*u-g*f);b[1]=d+f*c+2*(g*h-e*u);b[2]=a+u*c+2*(e*f-k*h);return b};a.rotateX=function(b,a,c,e){var k=[],g=[];k[0]=a[0]-c[0];k[1]=a[1]-c[1];k[2]=a[2]-c[2];g[0]=k[0];g[1]=k[1]*Math.cos(e)-k[2]*Math.sin(e);g[2]=k[1]*Math.sin(e)+k[2]*Math.cos(e);b[0]=g[0]+c[0];b[1]=g[1]+c[1];b[2]=g[2]+c[2];return b};a.rotateY=function(b,a,c,e){var k=[],g=[];k[0]=a[0]-c[0];k[1]=a[1]-c[1];k[2]=a[2]-c[2];g[0]=k[2]*Math.sin(e)+k[0]*Math.cos(e);
g[1]=k[1];g[2]=k[2]*Math.cos(e)-k[0]*Math.sin(e);b[0]=g[0]+c[0];b[1]=g[1]+c[1];b[2]=g[2]+c[2];return b};a.rotateZ=function(b,a,c,e){var k=[],g=[];k[0]=a[0]-c[0];k[1]=a[1]-c[1];k[2]=a[2]-c[2];g[0]=k[0]*Math.cos(e)-k[1]*Math.sin(e);g[1]=k[0]*Math.sin(e)+k[1]*Math.cos(e);g[2]=k[2];b[0]=g[0]+c[0];b[1]=g[1]+c[1];b[2]=g[2]+c[2];return b};a.angle=function(b,a){n(k,b);n(u,a);c(k,k);c(u,u);b=e(k,u);return 1<b?0:-1>b?Math.PI:Math.acos(b)};var k=d.create(),u=d.create();a.str=function(b){return"vec3("+b[0]+", "+
b[1]+", "+b[2]+")"};a.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]};a.equals=function(b,a){var c=b[0],e=b[1];b=b[2];var k=a[0],g=a[1];a=a[2];return Math.abs(c-k)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(e-g)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(b-a)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};a.sub=p;a.mul=m;a.div=h;a.dist=t;a.sqrDist=b;a.len=f;a.sqrLen=g})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require",
"exports"],function(r,a){function d(){return[0,0,0]}Object.defineProperty(a,"__esModule",{value:!0});a.create=d;a.clone=function(a){return[a[0],a[1],a[2]]};a.fromValues=function(a,d,n){return[a,d,n]};a.fromArray=function(a){for(var f=d(),l=Math.min(3,a.length),p=0;p<l;++p)f[p]=a[p];return f};a.createView=function(a,d){return new Float64Array(a,d,3)}})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec4"],function(r,a,d){Object.defineProperty(a,
"__esModule",{value:!0});r=function(){function a(a,d,l,m,h){void 0===l&&(l=0);this.TypedArrayConstructor=a;this.elementCount=4;a=this.TypedArrayConstructor;void 0===m&&(m=4*a.BYTES_PER_ELEMENT);var f=0===d.byteLength?0:l;this.typedBuffer=null==h?new a(d,f):new a(d,f,(h-l)/a.BYTES_PER_ELEMENT);this.typedBufferStride=m/a.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}a.prototype.getVec=
function(a,l){return d.vec4.set(l,this.typedBuffer[a*this.typedBufferStride],this.typedBuffer[a*this.typedBufferStride+1],this.typedBuffer[a*this.typedBufferStride+2],this.typedBuffer[a*this.typedBufferStride+3])};a.prototype.setVec=function(a,d){this.typedBuffer[a*this.typedBufferStride]=d[0];this.typedBuffer[a*this.typedBufferStride+1]=d[1];this.typedBuffer[a*this.typedBufferStride+2]=d[2];this.typedBuffer[a*this.typedBufferStride+3]=d[3]};a.prototype.get=function(a,d){return this.typedBuffer[a*
this.typedBufferStride+d]};a.prototype.set=function(a,d,l){this.typedBuffer[a*this.typedBufferStride+d]=l};a.prototype.copyFrom=function(a,d,l){var f=this.typedBuffer,h=d.typedBuffer;a*=this.typedBufferStride;d=l*d.typedBufferStride;f[a]=h[d];f[a+1]=h[d+1];f[a+2]=h[d+2];f[a+3]=h[d+3]};Object.defineProperty(a.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0});a.ElementCount=4;return a}();a.BufferViewVec4Impl=r})},"esri/core/libs/gl-matrix-2/vec4":function(){define(["require",
"exports","./math/vec4"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.vec4=d})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require","exports","./common"],function(r,a,d){function l(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b}function f(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];b[2]=a[2]*c[2];b[3]=a[3]*c[3];return b}function n(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];b[2]=a[2]/c[2];b[3]=a[3]/c[3];return b}function p(b,a){var c=a[0]-b[0],
e=a[1]-b[1],k=a[2]-b[2];b=a[3]-b[3];return Math.sqrt(c*c+e*e+k*k+b*b)}function m(b,a){var c=a[0]-b[0],e=a[1]-b[1],k=a[2]-b[2];b=a[3]-b[3];return c*c+e*e+k*k+b*b}function h(b){var a=b[0],c=b[1],e=b[2];b=b[3];return Math.sqrt(a*a+c*c+e*e+b*b)}function t(b){var a=b[0],c=b[1],e=b[2];b=b[3];return a*a+c*c+e*e+b*b}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,g,c,e,k){a[0]=g;a[1]=c;a[2]=e;a[3]=k;return a};a.add=function(a,
g,c){a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];a[3]=g[3]+c[3];return a};a.subtract=l;a.multiply=f;a.divide=n;a.ceil=function(a,g){a[0]=Math.ceil(g[0]);a[1]=Math.ceil(g[1]);a[2]=Math.ceil(g[2]);a[3]=Math.ceil(g[3]);return a};a.floor=function(a,g){a[0]=Math.floor(g[0]);a[1]=Math.floor(g[1]);a[2]=Math.floor(g[2]);a[3]=Math.floor(g[3]);return a};a.min=function(a,g,c){a[0]=Math.min(g[0],c[0]);a[1]=Math.min(g[1],c[1]);a[2]=Math.min(g[2],c[2]);a[3]=Math.min(g[3],c[3]);return a};a.max=function(a,g,c){a[0]=
Math.max(g[0],c[0]);a[1]=Math.max(g[1],c[1]);a[2]=Math.max(g[2],c[2]);a[3]=Math.max(g[3],c[3]);return a};a.round=function(a,g){a[0]=Math.round(g[0]);a[1]=Math.round(g[1]);a[2]=Math.round(g[2]);a[3]=Math.round(g[3]);return a};a.scale=function(a,g,c){a[0]=g[0]*c;a[1]=g[1]*c;a[2]=g[2]*c;a[3]=g[3]*c;return a};a.scaleAndAdd=function(a,g,c,e){a[0]=g[0]+c[0]*e;a[1]=g[1]+c[1]*e;a[2]=g[2]+c[2]*e;a[3]=g[3]+c[3]*e;return a};a.distance=p;a.squaredDistance=m;a.length=h;a.squaredLength=t;a.negate=function(a,g){a[0]=
-g[0];a[1]=-g[1];a[2]=-g[2];a[3]=-g[3];return a};a.inverse=function(a,g){a[0]=1/g[0];a[1]=1/g[1];a[2]=1/g[2];a[3]=1/g[3];return a};a.normalize=function(a,g){var b=g[0],e=g[1],k=g[2];g=g[3];var d=b*b+e*e+k*k+g*g;0<d&&(d=1/Math.sqrt(d),a[0]=b*d,a[1]=e*d,a[2]=k*d,a[3]=g*d);return a};a.dot=function(a,g){return a[0]*g[0]+a[1]*g[1]+a[2]*g[2]+a[3]*g[3]};a.lerp=function(a,g,c,e){var b=g[0],d=g[1],h=g[2];g=g[3];a[0]=b+e*(c[0]-b);a[1]=d+e*(c[1]-d);a[2]=h+e*(c[2]-h);a[3]=g+e*(c[3]-g);return a};a.random=function(a,
g){g=g||1;var b,e,k,h,q,f;do b=2*d.RANDOM()-1,e=2*d.RANDOM()-1,q=b*b+e*e;while(1<=q);do k=2*d.RANDOM()-1,h=2*d.RANDOM()-1,f=k*k+h*h;while(1<=f);q=Math.sqrt((1-q)/f);a[0]=g*b;a[1]=g*e;a[2]=g*k*q;a[3]=g*h*q;return a};a.transformMat4=function(a,g,c){var b=g[0],k=g[1],d=g[2];g=g[3];a[0]=c[0]*b+c[4]*k+c[8]*d+c[12]*g;a[1]=c[1]*b+c[5]*k+c[9]*d+c[13]*g;a[2]=c[2]*b+c[6]*k+c[10]*d+c[14]*g;a[3]=c[3]*b+c[7]*k+c[11]*d+c[15]*g;return a};a.transformQuat=function(a,g,c){var b=g[0],k=g[1],d=g[2],h=c[0],f=c[1],m=c[2];
c=c[3];var l=c*b+f*d-m*k,p=c*k+m*b-h*d,n=c*d+h*k-f*b,b=-h*b-f*k-m*d;a[0]=l*c+b*-h+p*-m-n*-f;a[1]=p*c+b*-f+n*-h-l*-m;a[2]=n*c+b*-m+l*-f-p*-h;a[3]=g[3];return a};a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.exactEquals=function(a,g){return a[0]===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]};a.equals=function(a,g){var b=a[0],e=a[1],k=a[2];a=a[3];var h=g[0],f=g[1],m=g[2];g=g[3];return Math.abs(b-h)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(e-f)<=d.EPSILON*Math.max(1,
Math.abs(e),Math.abs(f))&&Math.abs(k-m)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(m))&&Math.abs(a-g)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))};a.sub=l;a.mul=f;a.div=n;a.dist=p;a.sqrDist=m;a.len=h;a.sqrLen=t})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["require","exports","./BufferView","./types"],function(r,a,d,l){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function a(a,d){this.layout=a;this.buffer="number"===typeof d?new ArrayBuffer(d*a.stride):
d;d=0;for(var h=a.fieldNames;d<h.length;d++){var b=h[d],g=a.fields.get(b);this[b]=new g.constructor(this.buffer,g.offset,this.stride)}}Object.defineProperty(a.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"count",{get:function(){return this.buffer.byteLength/this.stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteLength",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0});
a.prototype.getField=function(a,d){return(a=this[a])&&a.elementCount===d.ElementCount&&a.elementType===d.ElementType?a:null};a.prototype.slice=function(d,h){return new a(this.layout,this.buffer.slice(d*this.stride,h*this.stride))};a.prototype.copyFrom=function(a,d,f,b){var g=this.stride;0===g%4?(a=new Uint32Array(a.buffer,d*g,b*g/4),f=new Uint32Array(this.buffer,f*g,b*g/4)):(a=new Uint8Array(a.buffer,d*g,b*g),f=new Uint8Array(this.buffer,f*g,b*g));f.set(a)};return a}();a.InterleavedBuffer=f;var n=
function(){function a(){this.stride=0;this.fields=new Map;this.fieldNames=[]}a.prototype.vec2f=function(a,h){this.appendField(a,d.BufferViewVec2f,h);return this};a.prototype.vec2f64=function(a,h){this.appendField(a,d.BufferViewVec2f64,h);return this};a.prototype.vec3f=function(a,h){this.appendField(a,d.BufferViewVec3f,h);return this};a.prototype.vec3f64=function(a,h){this.appendField(a,d.BufferViewVec3f64,h);return this};a.prototype.vec4f=function(a,h){this.appendField(a,d.BufferViewVec4f,h);return this};
a.prototype.vec4f64=function(a,h){this.appendField(a,d.BufferViewVec4f64,h);return this};a.prototype.mat3f=function(a,h){this.appendField(a,d.BufferViewMat3f,h);return this};a.prototype.mat3f64=function(a,h){this.appendField(a,d.BufferViewMat3f64,h);return this};a.prototype.mat4f=function(a,h){this.appendField(a,d.BufferViewMat4f,h);return this};a.prototype.mat4f64=function(a,h){this.appendField(a,d.BufferViewMat4f64,h);return this};a.prototype.vec4u8=function(a,h){this.appendField(a,d.BufferViewVec4u8,
h);return this};a.prototype.f32=function(a,h){this.appendField(a,d.BufferViewFloat,h);return this};a.prototype.f64=function(a,h){this.appendField(a,d.BufferViewFloat64,h);return this};a.prototype.u8=function(a,h){this.appendField(a,d.BufferViewUint8,h);return this};a.prototype.u16=function(a,h){this.appendField(a,d.BufferViewUint16,h);return this};a.prototype.i8=function(a,h){this.appendField(a,d.BufferViewInt8,h);return this};a.prototype.vec2i8=function(a,h){this.appendField(a,d.BufferViewVec2i8,
h);return this};a.prototype.vec2i16=function(a,h){this.appendField(a,d.BufferViewVec2i16,h);return this};a.prototype.vec2u8=function(a,h){this.appendField(a,d.BufferViewVec2u8,h);return this};a.prototype.vec4u16=function(a,h){this.appendField(a,d.BufferViewVec4u16,h);return this};a.prototype.u32=function(a,h){this.appendField(a,d.BufferViewUint32,h);return this};a.prototype.appendField=function(a,d,f){var b=d.ElementCount*l.elementTypeSize(d.ElementType);this.fields.set(a,{size:b,constructor:d,offset:this.stride,
optional:f});this.stride+=b;this.fieldNames.push(a)};a.prototype.alignTo=function(a){this.stride=Math.floor((this.stride+a-1)/a)*a;return this};a.prototype.hasField=function(a){return 0<=this.fieldNames.indexOf(a)};a.prototype.createBuffer=function(a){return new f(this,a)};a.prototype.createView=function(a){return new f(this,a)};a.prototype.clone=function(){var d=new a;d.stride=this.stride;d.fields=new Map;this.fields.forEach(function(a,f){return d.fields.set(f,a)});d.fieldNames=this.fieldNames.slice();
d.BufferType=this.BufferType;return d};return a}();a.InterleavedLayout=n;a.newLayout=function(){return new n}})},"esri/views/3d/support/buffer/types":function(){define(["require","exports","../../../../core/compilerUtils"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.elementTypeSize=function(a){switch(a){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8;default:d.neverReached(a)}};
a.isSigned=function(a){switch(a){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0;default:d.neverReached(a)}};a.isInteger=function(a){switch(a){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1;default:d.neverReached(a)}};a.maximumValue=function(a){switch(a){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;
case "f32":return 3.402823E38;case "f64":return 1.79769E308;default:d.neverReached(a)}}})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["require","exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout"],function(r,a,d,l){Object.defineProperty(a,"__esModule",{value:!0});a.EdgeInputBufferLayout=l.newLayout().vec3f("position").u16("componentIndex").u16("_padding");a.VertexLayout=l.newLayout().vec2u8("sideness");a.glVertexLayout=d.glLayout(a.VertexLayout,
{prefixA:!0});a.CommonInstancesLayout=l.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0});a.RegularEdgeInstancesLayout=a.CommonInstancesLayout.clone().vec3f("normal");a.SilhouetteEdgeInstancesLayout=a.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB");a.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,
aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}})},"esri/views/3d/support/buffer/glUtil":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});var l={divisor:0,prefixA:!1};a.glLayout=function(a,p){void 0===p&&(p={});p=d({},l,p);var m=a.stride;return a.fieldNames.filter(function(d){d=a.fields.get(d).optional;return!(d&&
d.glPadding)}).map(function(d){var h=a.fields.get(d),b=h.constructor.ElementCount,g;g=f[h.constructor.ElementType];if(!g)throw Error("BufferType not supported in WebGL");var c=h.offset,h=!(!h.optional||!h.optional.glNormalized);return{name:p.prefixA?"a"+d[0].toUpperCase()+d.substr(1):d,stride:m,count:b,type:g,offset:c,normalized:h,divisor:p.divisor}})};var f={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/RandomLCG ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),
function(r,a,d,l,f,n,p,m,h){Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function a(){}a.prototype.updateSettings=function(a){this.settings=a};a.prototype.write=function(a,k,d){var f=b;f[0]=d.position0[0];f[1]=d.position0[1];f[2]=d.position0[2];f[3]=d.position1[0];f[4]=d.position1[1];f[5]=d.position1[2];c[0]=5381;for(f=0;f<g.length;f++)c[0]=31*c[0]+g[f];e.seed=c[0];var f=e.getIntRange(0,255),h=e.getIntRange(0,this.settings.variants-1),q=e.getFloat(),q=-(1-Math.min(q/.7,1))+Math.max(0,
q-.7)/(1-.7),q=255*(Math.pow(Math.abs(q),1.2)*(0>q?-1:1)*.5+.5);a.position0.setVec(k,d.position0);a.position1.setVec(k,d.position1);a.componentIndex.set(k,d.componentIndex);a.variantOffset.set(k,f);a.variantStroke.set(k,h);a.variantExtension.set(k,q)};a.prototype.trim=function(a,b){return a.slice(0,b)};return a}();a.CommonBufferWriter=t;var b=new Float32Array(6),g=new Uint32Array(b.buffer),c=new Uint32Array(1),e=new f;r=function(){function a(){this.commonWriter=new t}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};
a.prototype.allocate=function(a){return h.RegularEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);n.vec3.add(k,c.faceNormal0,c.faceNormal1);n.vec3.normalize(k,k);a.normal.setVec(b,k)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=h.RegularEdgeInstancesLayout;a.glLayout=m.glLayout(h.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();a.RegularEdgeBufferWriter=r;r=function(){function a(){this.commonWriter=
new t}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return h.SilhouetteEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=h.SilhouetteEdgeInstancesLayout;a.glLayout=m.glLayout(h.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();
a.SilhouetteEdgeBufferWriter=r;var k=p.vec3f64.create()})},"esri/core/RandomLCG":function(){define(["require","exports"],function(r,a){return function(){function a(a){void 0===a&&(a=1);this._seed=a}Object.defineProperty(a.prototype,"seed",{set:function(d){this._seed=null==d?Math.random()*a._m:d},enumerable:!0,configurable:!0});a.prototype.getInt=function(){return this._seed=(a._a*this._seed+a._c)%a._m};a.prototype.getFloat=function(){return this.getInt()/(a._m-1)};a.prototype.getIntRange=function(a,
d){return Math.round(this.getFloatRange(a,d))};a.prototype.getFloatRange=function(d,f){f-=d;var l=this.getInt()/a._m;return d+Math.floor(l*f)};a._m=2147483647;a._a=48271;a._c=0;return a}()})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["require","exports","./factories/vec3f64"],function(r,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.vec3f64=d})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("require exports ../../../../../core/arrayUtils ../../../../../core/typedArrayUtil ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/mathUtils".split(" "),
function(r,a,d,l,f,n,p){function m(a,c){var e=p.acos(a.cosAngle),k=b.fwd,d=b.ortho;p.directionFromTo(k,a.position1,a.position0);a=0<f.vec3.dot(f.vec3.cross(d,a.faceNormal0,a.faceNormal1),k)?-1:1;return e*a>c}function h(a){var b=a.faces.length/3,c=a.faces;a=a.neighbors;for(var e=0,d=0;d<b;d++)var g=a[3*d+0],f=a[3*d+1],h=a[3*d+2],l=c[3*d+0],m=c[3*d+1],n=c[3*d+2],e=e+(-1===g||l<m?1:0),e=e+(-1===f||m<n?1:0),e=e+(-1===h||n<l?1:0);for(var e=new Int32Array(4*e),p=0,d=0;d<b;d++){g=a[3*d+0];f=a[3*d+1];h=a[3*
d+2];l=c[3*d+0];m=c[3*d+1];n=c[3*d+2];if(-1===g||l<m)e[p++]=l,e[p++]=m,e[p++]=d,e[p++]=g;if(-1===f||m<n)e[p++]=m,e[p++]=n,e[p++]=d,e[p++]=f;if(-1===h||n<l)e[p++]=n,e[p++]=l,e[p++]=d,e[p++]=h}return e}function t(a){var b=a.faces.length/3,c=a.vertices.position;a=a.faces;for(var e=g.v0,d=g.v1,h=g.v2,l=new Float32Array(3*b),m=0;m<b;m++){var n=a[3*m+1],p=a[3*m+2];c.getVec(a[3*m+0],e);c.getVec(n,d);c.getVec(p,h);f.vec3.subtract(d,d,e);f.vec3.subtract(h,h,e);f.vec3.cross(e,d,h);f.vec3.normalize(e,e);l[3*
m+0]=e[0];l[3*m+1]=e[1];l[3*m+2]=e[2]}return l}Object.defineProperty(a,"__esModule",{value:!0});a.extractEdges=function(a,k,g,q){void 0===q&&(q=c);var e=a.vertices.position,u=a.vertices.componentIndex,n=p.deg2rad(q.anglePlanar);q=p.deg2rad(q.angleSignificantEdge);var r=Math.cos(q),B=Math.cos(n),x=b.edge,I=x.position0,J=x.position1,C=x.faceNormal0,E=x.faceNormal1,z=t(a),A=h(a),F=A.length/4;a=k.allocate(F);q=0;var N=g.allocate(F),O=0,P=0,Q=0,R=d.range(0,F),H=new Float32Array(F);l.forEach(H,function(a,
b,c){e.getVec(A[4*b+0],I);e.getVec(A[4*b+1],J);c[b]=f.vec3.distance(I,J)});R.sort(function(a,b){return H[b]-H[a]});for(var S=[],T=[],K=0;K<F;K++){var y=R[K],L=H[y],M=A[4*y+0],V=A[4*y+1],D=A[4*y+2],y=A[4*y+3],U=-1===y;e.getVec(M,I);e.getVec(V,J);if(U)f.vec3.set(C,z[3*D+0],z[3*D+1],z[3*D+2]),f.vec3.copy(E,C),x.componentIndex=u.get(M),x.cosAngle=f.vec3.dot(C,E);else{f.vec3.set(C,z[3*D+0],z[3*D+1],z[3*D+2]);f.vec3.set(E,z[3*y+0],z[3*y+1],z[3*y+2]);x.componentIndex=u.get(M);x.cosAngle=f.vec3.dot(C,E);
if(x.cosAngle>B)continue;-.9999>x.cosAngle&&f.vec3.copy(E,C)}P+=L;Q++;U||x.cosAngle<r?(k.write(a,q++,x),S.push(L)):m(x,n)&&(g.write(N,O++,x),T.push(L))}u=new Float32Array(S.reverse());n=new Float32Array(T.reverse());return{regular:{instancesData:k.trim(a,q),lodInfo:{lengths:u}},silhouette:{instancesData:g.trim(N,O),lodInfo:{lengths:n}},averageEdgeLength:P/Q}};var b={edge:{position0:n.vec3f64.create(),position1:n.vec3f64.create(),faceNormal0:n.vec3f64.create(),faceNormal1:n.vec3f64.create(),componentIndex:0,
cosAngle:0},ortho:n.vec3f64.create(),fwd:n.vec3f64.create()},g={v0:n.vec3f64.create(),v1:n.vec3f64.create(),v2:n.vec3f64.create()},c={anglePlanar:4,angleSignificantEdge:35}})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(r,a,d,l){function f(a,d){return-1===a.indexOf(d)}function n(a,d,c){return!a.some(d.bind(null,c))}function p(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.find=d.find;a.findIndex=d.findIndex;a.unique=
function(a){return a.filter(function(a,b,e){return e.indexOf(a)===b})};a.equals=function(a,d,c){if(!a&&!d)return!0;if(!a||!d||a.length!==d.length)return!1;if(c)for(var b=0;b<a.length;b++){if(!c(a[b],d[b]))return!1}else for(b=0;b<a.length;b++)if(a[b]!==d[b])return!1;return!0};a.difference=function(a,d,c){var b;c?(b=d.filter(n.bind(null,a,c)),a=a.filter(n.bind(null,d,c))):(b=d.filter(f.bind(null,a)),a=a.filter(f.bind(null,d)));return{added:b,removed:a}};a.intersect=function(a,g,c){return a&&g?c?a.filter(function(a){return-1<
d.findIndex(g,function(b){return c(a,b)})}):a.filter(function(a){return-1<g.indexOf(a)}):[]};a.constant=function(a,d){for(var b=Array(a),e=0;e<a;e++)b[e]=d;return b};a.range=function(a,d){void 0===d&&(d=a,a=0);for(var b=Array(d-a),e=a;e<d;e++)b[e-a]=e;return b};a.binaryIndexOf=function(a,d,c){for(var b=a.length,k=0,g=b-1;k<g;){var f=k+Math.floor((g-k)/2);d>a[f]?k=f+1:g=f}g=a[k];return c?d>=a[b-1]?-1:g===d?k:k-1:g===d?k:-1};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b||[])},
[])};r=function(){return function(){this.last=0}}();a.RemoveHint=r;var m=new r;a.removeUnordered=function(a,d,c,e){e=e||m;for(var b=null==c?a.length:c,g=Math.max(0,e.last-10),f=-1,h=g;h<b;++h)if(a[h]===d){f=h;break}if(-1===f){for(h=0;h<g;++h)if(a[h]===d){f=h;break}if(-1===f)return}a[f]=a[b-1];null==c&&a.pop();e.last=f;return d};var h=new Set;a.removeUnorderedMany=function(a,d,c,e,k,f){void 0===c&&(c=a.length);void 0===e&&(e=d.length);if(0===e||0===c)return c;h.clear();for(var b=0;b<e;++b)h.add(d[b]);
k=k||m;for(b=d=Math.max(0,k.last-10);b<c;++b)if(h.has(a[b])&&(f&&f.push(a[b]),h.delete(a[b]),a[b]=a[c-1],--c,--b,0===h.size||0===c))return h.clear(),c;for(b=0;b<d;++b)if(h.has(a[b])&&(f&&f.push(a[b]),h.delete(a[b]),a[b]=a[c-1],--c,--b,0===h.size||0===c))return h.clear(),c;h.clear();return c};a.shuffle=function(a,d){d=(t.seed=d)?function(){return t.getFloat()}:Math.random;for(var b=a.length-1;0<b;b--){var e=Math.floor(d()*(b+1)),k=a[b];a[b]=a[e];a[e]=k}return a};var t=new l;a.keysOfMap=function(a){var b=
[];a.forEach(function(a,e){return b.push(e)});return b};a.keysOfSet=function(a,d){void 0===d&&(d=p);var b=[];a.forEach(function(a){return b.push(d(a))});return b};a.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),c=0;a.forEach(function(a){b[c++]=a});return b}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(r,a,d,l){function f(a){return Math.asin(1<
a?1:-1>a?-1:a)}function n(a){return Math.acos(1<a?1:-1>a?-1:a)}function p(a,b,c){return a<b?b:a>c?c:a}function m(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=f;a.acos=n;a.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/
Math.LN2};a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.maxScale=function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};a.scaleFromMatrix=function(a,b){d.vec3.set(a,
Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]));return a};a.makeOrthonormal=function(a,b,c){c=c||a;var e=d.vec3.dot(a,b);d.vec3.set(c,a[0]-e*b[0],a[1]-e*b[1],a[2]-e*b[2]);d.vec3.normalize(c,c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?d.vec3.set(b,0,1,0):d.vec3.set(b,1,0,0);d.vec3.cross(c,a,b);d.vec3.normalize(b,b);d.vec3.cross(b,c,a);d.vec3.normalize(c,c)};a.moduloPositive=function(a,b){return(a%b+b)%
b};a.cartesianToSpherical=function(a,b){var c=d.vec3.length(a),e=f(a[2]/c);d.vec3.set(b,c,e,Math.atan2(a[1]/c,a[0]/c));return b};a.sphericalToCartesian=function(a,b){var c=a[0],e=a[1];a=a[2];var k=Math.cos(e);d.vec3.set(b,c*k*Math.cos(a),c*k*Math.sin(a),c*Math.sin(e))};a.directionFromTo=function(a,b,c){var d=c[0]-b[0],e=c[1]-b[1];b=c[2]-b[2];c=d*d+e*e+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);a[0]=d*c;a[1]=e*c;a[2]=b*c;return a};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,
b,c,d,g,f){a+=(b-a)*g;return a+(c+(d-c)*g-a)*f};a.slerp=function(a,b,f,h){void 0===h&&(h=l.vec3f64.create());var e=d.vec3.length(a),k=d.vec3.length(b),m=d.vec3.dot(a,b)/(e*k);if(.9999999999999999>m){var m=Math.acos(m),q=((1-f)*e+f*k)/Math.sin(m),k=q/k*Math.sin(f*m);d.vec3.scale(g,a,q/e*Math.sin((1-f)*m));d.vec3.scale(c,b,k);return d.vec3.add(h,g,c)}return d.vec3.lerp(h,a,b,f)};a.angle=function(a,k,f){a=d.vec3.normalize(g,a);k=d.vec3.normalize(c,k);var e=n(d.vec3.dot(a,k));return f&&(a=d.vec3.cross(b,
a,k),0>d.vec3.dot(a,f))?-e:e};a.clamp=p;a.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var d=1;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=function(a,b,c){void 0===c&&(c=1E-6);if(isNaN(a)||
isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),e=Math.abs(a),k=Math.abs(b);if(0===a||0===b||1E-12>e&&1E-12>k){if(d>.01*c)return!1}else if(d/(e+k)>c)return!1;return!0};a.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return isNaN(a)||isNaN(b)?!1:(a>b?a-b:b-a)<=c};r=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=
0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return p(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=
function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.shortestSignedDiff=function(a,b){a=this.normalize(a);b=this.normalize(b);var c=b-a;a=b<a?this.minimalMonotonic(a,b)-a:b-this.minimalMonotonic(b,a);return Math.abs(c)<Math.abs(a)?c:a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=r;a.planeFromPoints=function(a,b,c,g){d.vec3.subtract(h,b,a);d.vec3.subtract(t,c,a);d.vec3.cross(g,h,t);d.vec3.normalize(g,
g);g[3]=-d.vec3.dot(a,g)};var h=l.vec3f64.create(),t=l.vec3f64.create();a.cyclical2PI=m(new r(0,2*Math.PI));a.cyclicalPI=m(new r(-Math.PI,Math.PI));a.cyclicalDeg=m(new r(0,360));var b=l.vec3f64.create(),g=l.vec3f64.create(),c=l.vec3f64.create()})},"*noref":1}});
define("require exports ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/typedArrayUtil ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/workerHelper ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(r,a,d,l,f,n,p,m,h,t,b){return function(){function a(){this.regularWriter=new t.RegularEdgeBufferWriter;this.silhouetteWriter=new t.SilhouetteEdgeBufferWriter}
a.prototype.process=function(a,b){return d(this,void 0,void 0,function(){var c,d,e;return l(this,function(f){switch(f.label){case 0:if(!b)return[3,2];c=[];d=this.packInput(a,c);this.wrappedWork;return[4,b.invoke("wrappedWork",d,{transferList:c})];case 1:return e=f.sent(),[2,this.unpackOutput(e)];case 2:return[2,this.work(a)]}})})};a.prototype.wrappedWork=function(a){return d(this,void 0,void 0,function(){var b,c,d,f;return l(this,function(e){b=this.unpackInput(a);c=this.work(b);d=[];this.packInputTransferables(b,
d);f=this.packOutput(c,d);return[2,{result:f,transferList:d}]})})};a.prototype.work=function(a){var c=this.extractEdgeInformation(a.data,a.skipDeduplicate,a.originalIndices);this.regularWriter.updateSettings(a.writerSettings);this.silhouetteWriter.updateSettings(a.writerSettings);return b.extractEdges(c,this.regularWriter,this.silhouetteWriter)};a.prototype.packInputTransferables=function(a,b){b.push(a.data.buffer)};a.prototype.packInput=function(a,b){this.packInputTransferables(a,b);b={dataBuffer:a.data.buffer,
writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate};a.originalIndices&&(b.originalIndicesBuffer=a.originalIndices.buffer,b.originalIndicesType=f.isUint32Array(a.originalIndices)?"Uint32Array":"Uint16Array");return b};a.prototype.unpackInput=function(a){return{data:h.EdgeInputBufferLayout.createView(a.dataBuffer),originalIndices:"Uint32Array"===a.originalIndicesType?new Uint32Array(a.originalIndicesBuffer):"Uint16Array"===a.originalIndicesType?new Uint16Array(a.originalIndicesBuffer):
void 0,writerSettings:a.writerSettings,skipDeduplicate:a.skipDeduplicate}};a.prototype.packOutput=function(a,b){b.push(a.regular.lodInfo.lengths.buffer);b.push(a.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:m.packInterleavedBuffer(a.regular.instancesData,b),lodInfo:{lengths:a.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:m.packInterleavedBuffer(a.silhouette.instancesData,b),lodInfo:{lengths:a.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:a.averageEdgeLength}};
a.prototype.unpackOutput=function(a){return{regular:{instancesData:m.unpackInterleavedBuffer(a.regular.instancesData),lodInfo:{lengths:new Float32Array(a.regular.lodInfo.lengths)}},silhouette:{instancesData:m.unpackInterleavedBuffer(a.silhouette.instancesData),lodInfo:{lengths:new Float32Array(a.silhouette.lodInfo.lengths)}},averageEdgeLength:a.averageEdgeLength}};a.prototype.extractEdgeInformation=function(a,b,d){if(b&&d)return b=p.computeNeighbors(d,a.count),{faces:d,neighbors:b,vertices:a};a=n.default(a.buffer,
a.stride/4,d);b=p.computeNeighbors(a.indices,a.uniqueCount);return{faces:a.indices,neighbors:b,vertices:h.EdgeInputBufferLayout.createView(a.buffer)}};return a}()});