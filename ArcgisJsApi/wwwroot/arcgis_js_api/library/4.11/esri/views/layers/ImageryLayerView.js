// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators ../../tasks/support/Query ./RefreshableLayerView ./support/popupUtils".split(" "),function(w,x,m,b,n,p,k,q,r,c,t,u,v){return function(d){function a(a){return d.call(this,a)||this}m(a,d);a.prototype.fetchPopupFeatures=function(a,c){return p(this,
void 0,void 0,function(){var e,h,f,b,g,d;return n(this,function(l){switch(l.label){case 0:e=this.layer;if(!a)return[2,r.reject(new k("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:e}))];h=e.popupEnabled;f=v.getFetchPopupTemplate(e,c);if(!h||!q.isSome(f))throw new k("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:h,popupTemplate:f});return[4,f.getRequiredFields()];case 1:return b=l.sent(),g=new t,g.geometry=a,g.outFields=
b,d={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0,layerView:this,popupTemplate:f},[2,e.queryVisibleRasters(g,d).then(function(a){return a})]}})})};b([c.property()],a.prototype,"layer",void 0);return a=b([c.subclass("esri.views.layers.ImageryLayerView")],a)}(c.declared(u))});