// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/dom-class ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(q,e,n,d,l,a,b,c,k,m,g,f){var h={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?
f.small:b<=a.medium?f.medium:b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",
large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?f.small:b<=a.medium?f.medium:
b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",
large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},
valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},u={xsmall:544,small:768,medium:992,large:1200};return function(b){function f(){var a=null!==b&&b.apply(this,arguments)||this;a._breakpointsHandles=new k;a.breakpoints=u;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;return a}n(f,b);f.prototype.initialize=function(){this._breakpointsHandles.add([m.init(this,["breakpoints","size"],this._updateClassNames)])};f.prototype.destroy=
function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};f.prototype._updateClassNames=function(){if(this.container){var a=c.acquire(),b=c.acquire(),f=!1,g,m,d;for(g in h)m=this[g],d=h[g].getValue({viewSize:this.size,breakpoints:this.breakpoints}),m!==d&&(f=!0,this[g]=d,b.push(h[g].valueToClassName[m]),a.push(h[g].valueToClassName[d]));f&&(this._applyClassNameChanges(a,b),c.release(a),c.release(b))}};f.prototype._applyClassNameChanges=
function(b,f){var h=this.container;h&&(a.remove(h,f),a.add(h,b))};f.prototype._removeActiveClassNames=function(){var b=this.container;if(b)for(var f in h)a.remove(b,h[f].valueToClassName[this[f]])};d([g.property({set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var f=JSON.stringify(u,null,2);console.warn("provided breakpoints are not valid, using defaults:"+f)}a=b?a:u;this._set("breakpoints",l({},a))}}})],f.prototype,"breakpoints",
void 0);d([g.property()],f.prototype,"orientation",void 0);d([g.property()],f.prototype,"widthBreakpoint",void 0);d([g.property()],f.prototype,"heightBreakpoint",void 0);return f=d([g.subclass("esri.views.BreakpointsOwner")],f)}(g.declared(b,f))})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom dojo/dom-construct ../core/Accessor ../core/domUtils ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p){function r(a){a&&(c.empty(a),a.parentNode&&a.parentNode.removeChild(a))}var t=[0,0];return function(b){function k(){var a=b.call(this)||this;a._domHandles=new m;a._freqInfo={freq:16,time:750};a._overlayRenderTaskHandle=null;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.ui=null;a.userContent=null;a.width=0;a.watch("cursor",function(b){var f=a.surface;f&&f.setAttribute("data-cursor",b)});a.watch("interacting",function(b){var f=
a.surface;f&&f.setAttribute("data-interacting",b.toString())});return a}n(k,b);k.prototype.initialize=function(){var a=this;this.watch("ui",this._handleUIChange);this._wireUI(this.ui);this._focusHandle=this.on("focus",function(){return a.notifyChange("focused")});this._blurHandle=this.on("blur",function(){return a.notifyChange("focused")})};k.prototype.destroy=function(){this.destroyed||(this.ui.destroy(),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null,this._domHandles.destroy(),
this._focusHandle&&(this._focusHandle.remove(),this._focusHandle=null),this._blurHandle&&(this._blurHandle.remove(),this._blurHandle=null))};Object.defineProperty(k.prototype,"container",{set:function(a){var b=this,h=this._get("container");if(h!==a)if(this._domHandles.remove("dom-size"),this._stopMeasuring(),h&&(h.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
r(this.root),this._set("root",null),c.reparent(this.userContent,h),r(this.userContent),this._set("userContent",null)),a){a.classList.add("esri-view");h=document.createElement("div");h.className="esri-view-user-storage";c.reparent(a,h);a.appendChild(h);this._set("userContent",h);h=document.createElement("div");h.className="esri-view-root";a.insertBefore(h,a.firstChild);this._set("root",h);var k=document.createElement("div");k.className="esri-view-surface";k.setAttribute("role","application");k.tabIndex=
0;l.setSelectable(k,!1);h.appendChild(k);this._set("surface",k);var m=new u;h.appendChild(m.surface);this._set("overlay",m);m.watch("needsRender",function(a){a&&!b._overlayRenderTaskHandle?b._overlayRenderTaskHandle=g.addFrameTask({render:function(){b.overlay.render()}}):b._overlayRenderTaskHandle&&(b._overlayRenderTaskHandle.remove(),b._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this._domHandles.add(f.init(this,"size",function(a){var b=a[1];k.classList.toggle("esri-view-surface--inset-outline",
a[0]>=document.body.clientWidth||b>=document.body.clientHeight)}),"dom-size");this._set("container",a);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"focused",{get:function(){var a=document.activeElement===this.surface;return document.hasFocus()&&a},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"popup",{get:function(){return this._get("popup")||new p({view:this})},set:function(a){var b=this._get("popup");b&&b!==a&&b.destroy();this._set("popup",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});k.prototype.blur=function(){this.surface&&this.surface.blur()};k.prototype.focus=function(){this.surface&&this.surface.focus()};k.prototype.pageToContainer=function(a,b,f){var h=this.position;
a-=h[0];b-=h[1];f?(f[0]=a,f[1]=b):f=[a,b];return f};k.prototype.containerToPage=function(a,b,f){var h=this.position;a+=h[0];b+=h[1];f?(f[0]=a,f[1]=b):f=[a,b];return f};k.prototype._handleUIChange=function(a,b){b&&(this._domHandles.remove("ui"),b.destroy());a&&this._wireUI(a);this._set("ui",a)};k.prototype._wireUI=function(b){this._domHandles.remove("ui");b&&(b.view=this,this._domHandles.add([f.init(this,"root",function(f){b.container=f?a.create("div",null,f):null}),f.init(this,"popup",function(a,
f){f&&b.remove(f,"popup");a&&(a.view=b.view,b.add(a,{key:"popup",position:"manual"}))})],"ui"))};k.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};k.prototype._startMeasuring=function(){var a=this,b=this._freqInfo;b.freq=16;b.time=750;this._domHandles.add([function(){var a=function(){b.freq=16;b.time=750};window.addEventListener("resize",a);return{remove:function(){window.removeEventListener("resize",a)}}}(),g.addFrameTask({prepare:function(b){var f=
a._measure(),h=a._freqInfo;h.time+=b.deltaTime;f&&(h.freq=16,a._get("resizing")||a._set("resizing",!0));h.time<h.freq||(h.time=0,a._position()||f?h.freq=16:h.freq=Math.min(750,2*h.freq),!f&&512<=h.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};k.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,f=a?a.clientHeight:0;if(0===b||0===f||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||this._set("suspended",
!0),!1;var a=this.width,h=this.height;if(b===a&&f===h)return this.suspended&&this._set("suspended",!1),!1;this._set("width",b);this._set("height",f);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:a,oldHeight:h,width:b,height:f});return!0};k.prototype._position=function(){var a=this.container,b=this.position,f=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();t[0]=a.left+f.pageXOffset;t[1]=a.top+f.pageYOffset;return b&&t[0]===b[0]&&t[1]===b[1]?!1:(this._set("position",
[t[0],t[1]]),!0)};k.prototype.forceDOMReadyCycle=function(){};d([h.property({value:null,cast:function(a){return l.byId(a)}})],k.prototype,"container",null);d([h.property({readOnly:!0,dependsOn:["surface"]})],k.prototype,"focused",null);d([h.property({readOnly:!0})],k.prototype,"height",void 0);d([h.property({type:p})],k.prototype,"popup",null);d([h.property({type:u})],k.prototype,"overlay",void 0);d([h.property({readOnly:!0})],k.prototype,"position",void 0);d([h.property({readOnly:!0})],k.prototype,
"resizing",void 0);d([h.property({readOnly:!0})],k.prototype,"root",void 0);d([h.property({value:null,dependsOn:["width","height"],readOnly:!0})],k.prototype,"size",null);d([h.property({readOnly:!0})],k.prototype,"surface",void 0);d([h.property({readOnly:!0})],k.prototype,"suspended",void 0);d([h.property()],k.prototype,"ui",void 0);d([h.property({readOnly:!0})],k.prototype,"userContent",void 0);d([h.property({readOnly:!0})],k.prototype,"width",void 0);return k=d([h.subclass("esri.views.DOMContainer")],
k)}(h.declared(b,k))})},"esri/core/domUtils":function(){define(["require","exports","../widgets/support/widget"],function(q,e,n){function d(d){return n.isWidgetBase(d)?d.domNode:d}Object.defineProperty(e,"__esModule",{value:!0});e.show=function(l){if(l=d(l))l.style.display="block"};e.getNode=d;e.hide=function(l){if(l=d(l))l.style.display="none"};e.toggle=function(l){if(l=d(l))l.style.display="none"===l.style.display?"block":"none"};e.empty=function(d){for(;d.hasChildNodes();)d.removeChild(d.firstChild)};
e.reparent=function(d,a){for(;d.hasChildNodes();)a.appendChild(d.firstChild)}})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),function(q,e,n,d,l,a,b,c,k){return function(a){function g(){var f=null!==a&&a.apply(this,arguments)||this;f.items=new b;f._callbacks=new Map;f._projector=k.createProjector();
f._hiddenProjector=k.createProjector();return f}n(g,a);Object.defineProperty(g.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});g.prototype.initialize=function(){var a=this,b=document.createElement("div");b.className="esri-overlay-surface";l.setSelectable(b,!1);this._set("surface",b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");b.appendChild(this._hiddenSurface);this._itemsChangeHandle=
this.items.on("change",function(b){b.added.map(function(b){var f=function(){return b.render()};a._callbacks.set(b,f);a._projector.append(a.surface,f)});b.removed.map(function(b){var f=a._projector.detach(a._callbacks.get(b));a.surface.removeChild(f.domNode);a._callbacks.delete(b)})})};g.prototype.addItem=function(a){this.items.add(a)};g.prototype.removeItem=function(a){this.items.remove(a)};g.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=
null};g.prototype.render=function(){this._projector.renderNow()};g.prototype.computeBoundingRect=function(a){var b=this._hiddenSurface,f=this._hiddenProjector,g=null,c=function(){return g=a.render()};f.append(b,c);f.renderNow();var k={left:0,top:0,right:0,bottom:0};if(g&&g.domNode){var d=g.domNode.getBoundingClientRect();k.left=d.left;k.top=d.top;k.right=d.right;k.bottom=d.bottom}for(f.detach(c);b.firstChild;)b.removeChild(b.firstChild);return k};g.prototype.overlaps=function(a,b){a=this.computeBoundingRect(a);
b=this.computeBoundingRect(b);return Math.max(a.left,b.left)<=Math.min(a.right,b.right)&&Math.max(a.top,b.top)<=Math.min(a.bottom,b.bottom)};Object.defineProperty(g.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(a){return a.visible})},enumerable:!0,configurable:!0});g.prototype.renderCanvas=function(a){if(this.items.some(function(a){return a.visible})){var b=a.getContext("2d");b.save();b.font="10px "+getComputedStyle(this.surface).fontFamily;this.items.forEach(function(a){b.save();
a.renderCanvas(b);b.restore()});b.restore()}};d([c.property({readOnly:!0})],g.prototype,"surface",void 0);d([c.property({readOnly:!0})],g.prototype,"items",void 0);d([c.property({readOnly:!0,dependsOn:["items.length"]})],g.prototype,"needsRender",null);return g=d([c.subclass("esri.views.overlay.ViewOverlay")],g)}(c.declared(a))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/dom-geometry dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup dojo/keys ../core/Handles ../core/lang ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w,x,v,y){function z(a,b){return void 0===b?"esri-popup__"+a:"esri-popup__"+a+"-"+b}function D(){return b(this,void 0,void 0,function(){return a(this,function(a){return[2,p.create(function(a){q(["./Feature"],function(b){a(b)})})]})})}var C={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},E=u.getLogger("esri.widgets.Popup");return function(u){function p(a){var b=u.call(this)||this;b._blurContainer=!1;b._containerNode=null;b._mainContainerNode=null;
b._featureMenuNode=null;b._actionsMenuNode=null;b._focusContainer=!1;b._focusDockButton=!1;b._focusFeatureMenuButton=!1;b._focusActionsMenuButton=!1;b._focusFirstFeature=!1;b._focusFirstAction=!1;b._handles=new f;b._pointerOffsetInPx=16;b._spinner=null;b.actions=null;b.actionsMenuEnabled=!0;b.alignment="auto";b.autoCloseEnabled=null;b.autoOpenEnabled=null;b.defaultPopupTemplateEnabled=null;b.content=null;b.collapsed=!1;b.collapseEnabled=!0;b.dockEnabled=!1;b.featureCount=null;b.features=null;b.featureNavigationEnabled=
!0;b.goToOverride=null;b.highlightEnabled=null;b.location=null;b.featureWidgets=[];b.promises=null;b.selectedFeature=null;b.selectedFeatureIndex=null;b.selectedFeatureWidget=null;b.spinnerEnabled=!0;b.title=null;b.updateLocationEnabled=null;b.view=null;b.viewModel=new x;b.visible=null;b._addSelectedFeatureIndexHandle();b.own([r.watch(b,"viewModel.screenLocation",function(){return b._positionContainer()}),r.watch(b,["viewModel.visible","dockEnabled"],function(){return b._toggleScreenLocationEnabled()}),
r.watch(b,"viewModel.screenLocation",function(a,f){!!a!==!!f&&b.reposition()}),r.watch(b,"viewModel.features",function(){return b._updateFeatureWidgets()}),r.watch(b,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return b.reposition()}),r.watch(b,"spinnerEnabled",function(a){return b._spinnerEnabledChange(a)}),r.watch(b,"viewModel.view.size",function(a,f){return b._updateDockEnabledForViewSize(a,f)}),r.watch(b,
"viewModel.view",function(a,f){return b._viewChange(a,f)}),r.watch(b,"viewModel.view.ready",function(a,f){return b._viewReadyChange(a,f)}),r.watch(b,["viewModel.waitingForResult","viewModel.location"],function(){return b._displaySpinner()}),r.watch(b,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return b._updateFeatureWidget()}),r.watch(b,"selectedFeatureWidget.viewModel.title",function(a){return b._setTitleFromFeatureWidget(a)}),r.watch(b,["selectedFeatureWidget.viewModel.content",
"selectedFeatureWidget.viewModel.waitingForContent"],function(){return b._setContentFromFeatureWidget()}),r.whenFalse(b,"collapsed",function(){"xsmall"===b.get("viewModel.view.widthBreakpoint")&&b.visible&&b.collapseEnabled&&b.viewModel.centerAtLocation()})]);return b}n(p,u);p.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this.viewModel=this._handles=null};Object.defineProperty(p.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible&&
this.actionsMenuEnabled?this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||
C},set:function(a){var b=l({},C),f=this.get("viewModel.view.breakpoints"),h={};f&&(h.width=f.xsmall,h.height=f.xsmall);a=l({},b,a);b=l({},b.breakpoint,h);h=a.breakpoint;!0===h?a.breakpoint=b:"object"===typeof h&&(a.breakpoint=l({},b,h));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",
!!a)},enumerable:!0,configurable:!0});p.prototype.blur=function(){this.visible||E.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};p.prototype.clear=function(){};p.prototype.close=function(){this.visible=!1};p.prototype.focus=function(){this.visible||E.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};p.prototype.next=function(){return null};p.prototype.open=function(a){this._handles.remove("selected-index");
var b={collapsed:a?!!a.collapsed:!1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(b.collapsed=!0,a.updateLocationEnabled=!0);this.set(b);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};p.prototype.previous=function(){return null};p.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};p.prototype.triggerAction=function(a){return null};p.prototype.render=
function(){var a=this,b,f,g,c,d,p,u=this.actionsMenuOpen,r=this.collapsed,l=this.collapseEnabled,t=this.dockEnabled,e=this.featureMenuOpen,n=this.featureNavigationEnabled,x=this.featureWidgets,A=this.visible,F=this.actionsMenuEnabled,w=this.viewModel,H=w.allActions,D=w.content,B=w.featureCount,C=w.pendingPromisesCount,q=w.selectedFeatureIndex,E=w.title,aa=H&&H.length,Y=1<B&&n,n=1<B&&e,H=1<aa&&u,ca=Y&&this._getPageText(B,q),da=this._renderContent(),T=y.isRTL(),ea=!!(this.get("selectedFeatureWidget")?
this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):da),w=(l=!!(l&&E&&ea))&&!n&&r,ba=this.get("viewModel.view.widthBreakpoint"),fa=t?m.undock:m.dock,r=this.currentAlignment,B=this.currentDockPosition,C=C?v.tsx("div",{key:z("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":k.loading,title:k.loading},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
"esri-rotating")})):null,ga=(b={},b["esri-icon-right-triangle-arrow"]=T,b["esri-popup__pagination-previous-icon--rtl"]=T,b["esri-icon-left-triangle-arrow"]=!T,b["esri-popup__pagination-previous-icon"]=!T,b);b=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",ga)});ga=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":m.previous,title:m.previous},
b);b=(f={},f["esri-icon-left-triangle-arrow"]=T,f["esri-popup__pagination-next-icon--rtl"]=T,f["esri-icon-right-triangle-arrow"]=!T,f["esri-popup__pagination-next-icon"]=!T,f);f=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",b)});T=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":m.next,title:m.next},f);b=y.cssTransition("enter","esri-popup--feature-updated");
f=this.id+"-feature-menu";e=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":f,"aria-expanded":e,"aria-label":k.menu,title:k.menu},ca);ca=Y?[ga,C||e,T]:null;e=this._wouldDockTo();e=(g={},g["esri-icon-minimize"]=t,g["esri-popup__icon--dock-icon"]=
!t,g["esri-icon-dock-right"]=!t&&("top-right"===e||"bottom-right"===e),g["esri-icon-dock-left"]=!t&&("top-left"===e||"bottom-left"===e),g["esri-icon-maximize"]=!t&&"top-center"===e,g["esri-icon-dock-bottom"]=!t&&"bottom-center"===e,g);g=v.tsx("span",{"aria-hidden":"true",class:this.classes(e,"esri-popup__icon")});g="xsmall"!==ba&&this.get("dockOptions.buttonEnabled")?v.tsx("div",{role:"button","aria-label":fa,title:fa,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},g):null;e=(c={},c["esri-popup__header-container--button"]=l,c);ba=l?"button":"heading";fa=l?w?k.expand:k.collapse:"";c=this.id+"-popup-title";E=E?v.tsx("div",{class:this.classes("esri-popup__header-container",e),key:E,enterAnimation:b,id:c,role:ba,"aria-label":fa,title:fa,tabIndex:l?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
v.tsx("h2",{class:"esri-popup__header-title",innerHTML:E})):null;e=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});e=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":k.close,title:k.close},e);g=v.tsx("header",{class:"esri-popup__header"},E,v.tsx("div",{class:"esri-popup__header-buttons"},g,e));var e=this.id+"-popup-content",D=!ea||l&&w?null:v.tsx("article",{key:D,enterAnimation:b,
id:e,class:"esri-popup__content"},da),ea="bottom-left"===r||"bottom-center"===r||"bottom-right"===r||"top-left"===B||"top-center"===B||"top-right"===B,da="top-left"===r||"top-center"===r||"top-right"===r||"bottom-left"===B||"bottom-center"===B||"bottom-right"===B,ba=u?k.close:k.open,ha=this._getInlineActions();b=(b=ha&&ha.toArray().map(function(b,f){return a._renderAction({action:b,index:f,key:"actions",type:"inline",showText:2>ha.length})}))?v.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},
b):null;F=F&&aa&&!b?v.tsx("div",{key:z("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":u?this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":ba,title:ba},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):
null;ca=Y?v.tsx("section",{key:z("navigation"),class:this.classes("esri-popup__navigation")},ca):null;F=Y||aa?v.tsx("div",{key:z("feature-buttons"),class:"esri-popup__footer"},ca,F,b):null;u=aa&&u?v.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+"-actions-menu-button",key:z("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},this._renderActions()):null;q=
this._renderFeatureMenuNode(x,q,f);x=h.substitute({total:x.length},m.selectedFeatures);Y=v.tsx("section",{key:z("menu"),class:"esri-popup__feature-menu"},v.tsx("h2",{class:"esri-popup__feature-menu-header"},x),v.tsx("nav",{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},q));x=t?null:v.tsx("div",{key:z("pointer"),class:"esri-popup__pointer",role:"presentation"},v.tsx("div",{class:this.classes("esri-popup__pointer-direction",
"esri-popup--shadow")}));q=this.get("selectedFeature.layer.title");aa=this.get("selectedFeature.layer.id");l=(d={},d["esri-popup--shadow"]=t,d["esri-popup--is-collapsible"]=l,d["esri-popup--is-collapsed"]=w,d);d=(p={},p["esri-popup--aligned-top-center"]=A&&"top-center"===r,p["esri-popup--aligned-bottom-center"]=A&&"bottom-center"===r,p["esri-popup--aligned-top-left"]=A&&"top-left"===r,p["esri-popup--aligned-bottom-left"]=A&&"bottom-left"===r,p["esri-popup--aligned-top-right"]=A&&"top-right"===r,p["esri-popup--aligned-bottom-right"]=
"bottom-right"===r,p["esri-popup--is-docked"]=A&&t,p["esri-popup--shadow"]=A&&!t,p["esri-popup--is-docked-top-left"]=A&&"top-left"===B,p["esri-popup--is-docked-top-center"]=A&&"top-center"===B,p["esri-popup--is-docked-top-right"]=A&&"top-right"===B,p["esri-popup--is-docked-bottom-left"]=A&&"bottom-left"===B,p["esri-popup--is-docked-bottom-center"]=A&&"bottom-center"===B,p["esri-popup--is-docked-bottom-right"]=A&&"bottom-right"===B,p["esri-popup--feature-menu-open"]=A&&n,p["esri-popup--actions-menu-open"]=
A&&H,p);p=ea?[Y,u]:null;t=da?[Y,u]:null;n=ea?F:null;H=da?F:null;p=v.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",l),tabIndex:-1,role:"dialog","aria-labelledby":E?c:"","aria-describedby":D?e:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},n,p,g,D,H,t);return v.tsx("div",{key:z("base"),class:this.classes("esri-popup",d),role:"presentation","data-layer-title":q,"data-layer-id":aa,bind:this,afterCreate:this._positionContainer,
afterUpdate:this._positionContainer},A?[p,x]:null)};p.prototype._getInlineActions=function(){var a=this.viewModel.allActions;if(!(this.actionsMenuEnabled&&2<=a.length))return a};p.prototype._featureMenuOpenChanged=function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};p.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};p.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||
"")};p.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};p.prototype._handleFeatureMenuKeyup=function(a){a.keyCode===g.ESCAPE&&(a.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};p.prototype._handleActionMenuKeyup=function(a){a.keyCode===g.ESCAPE&&(a.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};p.prototype._handleFeatureMenuItemKeyup=
function(a){var b=a.keyCode,f=this._featureMenuNode,h=a.currentTarget["data-feature-index"];if(f){var f=f.querySelectorAll("li"),c=f.length;b===g.UP_ARROW?(a.stopPropagation(),f[(h-1+c)%c].focus()):b===g.DOWN_ARROW?(a.stopPropagation(),f[(h+1+c)%c].focus()):b===g.HOME?(a.stopPropagation(),f[0].focus()):b===g.END&&(a.stopPropagation(),f[f.length-1].focus())}};p.prototype._handleActionMenuItemKeyup=function(a){var b=a.keyCode,f=this._actionsMenuNode,h=a.currentTarget["data-action-index"];if(f){var f=
f.querySelectorAll("li"),c=f.length;b===g.UP_ARROW?(a.stopPropagation(),f[(h-1+c)%c].focus()):b===g.DOWN_ARROW?(a.stopPropagation(),f[(h+1+c)%c].focus()):b===g.HOME?(a.stopPropagation(),f[0].focus()):b===g.END&&(a.stopPropagation(),f[f.length-1].focus())}};p.prototype._handleMainKeyup=function(a){var b=a.keyCode;b===g.LEFT_ARROW&&(a.stopPropagation(),this.previous());b===g.RIGHT_ARROW&&(a.stopPropagation(),this.next())};p.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),
this._createSpinner(a))};p.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,f=b.location;b.waitingForResult?a.show({location:f}):a.hide()}};p.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};p.prototype._renderAction=function(a){var b=this,f,g,c=a.action,k=a.index,d=a.key,m=a.type;a=a.showText;var p=r.watch(c,"active className disabled id title image visible".split(" "),function(){return b.scheduleRender()});this._handles.add(p,
d);var p=this.get("selectedFeature.attributes"),d=c.title,u=c.className,l=c.image,u=l||u?u:"esri-icon-default-action",d=d&&p?h.substitute(p,d):d,t=u&&p?h.substitute(p,u):u,p=l&&p?h.substitute(p,l):l,l=(f={},f["esri-icon-loading-indicator"]=c.active,f["esri-rotating"]=c.active,f["esri-popup__icon"]=!!u,f["esri-popup__action-image"]=!c.active&&!!p,f);t&&(l[t]=!c.active);f=(g={},g["esri-popup__action"]="toggle"!==c.type,g["esri-popup__action-toggle"]="toggle"===c.type,g["esri-popup__action-toggle--on"]=
"toggle"===c.type&&c.value,g["esri-popup__button--disabled"]=c.disabled,g);g=a?v.tsx("span",{key:"text",class:"esri-popup__action-text"},d):null;g=[v.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",l),styles:this._getIconStyles(p)}),g];k="menu-item"===m?v.tsx("li",{key:c,role:"menuitem",tabIndex:0,title:d,"aria-label":d,class:this.classes("esri-popup__button",f),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":k,onclick:this._triggerAction,onkeydown:this._triggerAction},
g):v.tsx("div",{key:c,role:"button",tabIndex:0,title:d,"aria-label":d,class:this.classes("esri-popup__button",f),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":k,onclick:this._triggerAction,onkeydown:this._triggerAction},g);return c.visible?k:null};p.prototype._renderActions=function(){var a=this;this._handles.remove("actions");var b=this.viewModel.allActions;if(b)return b.map(function(b,f){return a._renderAction({action:b,index:f,key:"actions",type:"menu-item",showText:!0})}).toArray()};
p.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=r.watch(this,"viewModel.selectedFeatureIndex",function(b,f){return a._selectedFeatureIndexUpdated(b,f)});this._handles.add(b,"selected-index")};p.prototype._selectedFeatureIndexUpdated=function(a,b){this.featureCount&&a!==b&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};p.prototype._updateFeatureWidget=function(){this._set("selectedFeatureWidget",this.featureWidgets[this.viewModel.selectedFeatureIndex]||null)};p.prototype._destroyFeatureWidgets=
function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};p.prototype._updateFeatureWidgets=function(){return b(this,void 0,void 0,function(){var b,f,h,g,c,k,d=this;return a(this,function(a){switch(a.label){case 0:return b=this,f=b.features,h=b.featureWidgets,f&&f.length?[4,D()]:(h.forEach(function(a){return a.destroy()}),this._set("featureWidgets",[]),[2]);case 1:return g=a.sent(),c=h.slice(0),k=[],f.forEach(function(a,b){if(a){var f=null;c.some(function(b,
h){b&&b.graphic===a&&(f=b,c.splice(h,1));return!!f});if(f)k[b]=f;else{var h=new g({defaultPopupTemplateEnabled:d.defaultPopupTemplateEnabled,graphic:a,spatialReference:d.get("view.spatialReference"),map:d.get("view.map")});h.visibleElements=l({},h.visibleElements,{title:!1});k[b]=h}}}),c.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",k),[2]}})})};p.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height};p.prototype._isOutsideView=
function(a){var b=a.popupHeight,f=a.popupWidth,h=a.screenLocation,g=a.side;a=a.view;if(isNaN(f)||isNaN(b)||!a||!h)return!1;var c=a.padding;return"right"===g&&h.x+f/2>a.width-c.right||"left"===g&&h.x-f/2<c.left||"top"===g&&h.y-b<c.top||"bottom"===g&&h.y+b>a.height-c.bottom?!0:!1};p.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,b=this._containerNode,f=this._mainContainerNode,h=this.viewModel,g=h.screenLocation,h=h.view;if(!g||!h||!b)return"top-center";if(!this._isScreenLocationWithinView(g,
h))return this._get("currentAlignment")||"top-center";var k=f?window.getComputedStyle(f,null):null,f=k?parseInt(k.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,k=k?parseInt(k.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,d=c.getContentBox(b),b=d.w+a,d=Math.max(d.h,f,k)+a,a=this._isOutsideView({popupHeight:d,popupWidth:b,screenLocation:g,side:"right",view:h}),f=this._isOutsideView({popupHeight:d,popupWidth:b,screenLocation:g,side:"left",view:h}),k=this._isOutsideView({popupHeight:d,
popupWidth:b,screenLocation:g,side:"top",view:h}),g=this._isOutsideView({popupHeight:d,popupWidth:b,screenLocation:g,side:"bottom",view:h});return f?k?"bottom-right":"top-right":a?k?"bottom-left":"top-left":k?g?"top-center":"bottom-center":"top-center"};p.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};p.prototype._setCurrentAlignment=function(){this._set("currentAlignment",
this._getCurrentAlignment())};p.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};p.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};p.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};p.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};
p.prototype._renderFeatureMenuItemNode=function(a,b,f){var h,g=b===f,c=(h={},h["esri-popup__feature-menu-item--selected"]=g,h);h=g?v.tsx("span",{key:z("feature-menu-selected-feature-"+f),title:m.selectedFeature,"aria-label":m.selectedFeature,class:"esri-icon-check-mark"}):null;a=v.tsx("span",{innerHTML:a.title||k.untitled});return v.tsx("li",{role:"menuitem",tabIndex:-1,key:z("feature-menu-feature-"+f),class:this.classes(c,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},v.tsx("span",{class:"esri-popup__feature-menu-title"},a,h))};p.prototype._renderFeatureMenuNode=function(a,b,f){var h=this;return 1<a.length?v.tsx("ol",{class:"esri-popup__feature-menu-list",id:f,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},a.map(function(a,f){return h._renderFeatureMenuItemNode(a,f,b)})):null};p.prototype._determineCurrentDockPosition=
function(){var a=this.get("viewModel.view"),b=y.isRTL()?"top-left":"top-right";if(!a)return b;var f=a.padding||{left:0,right:0,top:0,bottom:0},f=a.width-f.left-f.right;return(a=a.get("breakpoints"))&&f<=a.xsmall?"bottom-center":b};p.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===typeof a)return v.tsx("div",{key:a,innerHTML:a});if(v.isWidget(a))return v.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return v.tsx("div",{key:a,bind:a,
afterCreate:this._attachToNode});if(v.isWidgetBase(a))return v.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};p.prototype._attachToNode=function(a){a.appendChild(this)};p.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,f=c.getContentBox(a);if(b=this._calculatePositionStyle(b,f))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};p.prototype._calculateFullWidth=
function(a){var b=this.currentAlignment,f=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+f:a};p.prototype._calculateAlignmentPosition=function(a,b,f,h){var g=this.currentAlignment,c=this._pointerOffsetInPx;h/=2;var k=f.height-b;f=f.width-a;var d=this.view.padding;if("bottom-center"===g)return{top:b+c-d.top,left:a-h-d.left};if("top-left"===g)return{bottom:k+c-d.bottom,right:f+c-d.right};if("bottom-left"===g)return{top:b+c-d.top,right:f+c-d.right};
if("top-right"===g)return{bottom:k+c-d.bottom,left:a+c-d.left};if("bottom-right"===g)return{top:b+c-d.top,left:a+c-d.left};if("top-center"===g)return{bottom:k+c-d.bottom,left:a-h-d.left}};p.prototype._calculatePositionStyle=function(a,b){var f=this.view;if(f){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&b&&(b=this._calculateFullWidth(b.w),a=this._calculateAlignmentPosition(a.x,a.y,f,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==
a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};p.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};p.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};p.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};p.prototype._dockingThresholdCrossed=function(a,b,f){var h=a[0];a=
a[1];var g=b[0];b=b[1];var c=f.width;f=f.height;return h<=c&&g>c||h>c&&g<=c||a<=f&&b>f||a>f&&b<=f};p.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var f=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},h=f.left+f.right,g=f.top+f.bottom,f=[],c=[];f[0]=a[0]-h;f[1]=a[1]-g;c[0]=b[0]-h;c[1]=b[1]-g;a=this.dockOptions;this._dockingThresholdCrossed(f,c,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};p.prototype._focusDockButtonNode=function(a){this._focusDockButton&&
(this._focusDockButton=!1,a.focus())};p.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};p.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};p.prototype._actionsMenuNodeUpdated=function(a){(this._actionsMenuNode=a)&&this._focusFirstAction&&
(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};p.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};p.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};p.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};p.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,b=this.viewModel;
b&&(b.screenLocationEnabled=this.visible&&!a)};p.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),f=b.width,b=b.height;if(isNaN(f)||isNaN(b))return!1;f=a.hasOwnProperty("width")&&f<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return f||a};p.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};p.prototype._getPageText=function(a,b){return h.substitute({index:b+1,total:a},m.pageText)};
p.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};p.prototype._createSpinner=function(a){a&&(this._spinner=new A({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};p.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};p.prototype._close=function(){this.close();this.view&&this.view.focus()};p.prototype._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;
this._focusDockButton=!0;this.scheduleRender()};p.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};p.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=!1;this.actionsMenuOpen=a};p.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var b=this.viewModel.allActions.getItemAt(a);b&&"toggle"===b.type&&(b.value=
!b.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};p.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this._focusFeatureMenuButton=!0;this.scheduleRender()};p.prototype._next=function(){this.next()};p.prototype._previous=function(){this.previous()};d([t.aliasOf("viewModel.actions"),v.renderable()],p.prototype,"actions",void 0);d([t.property({dependsOn:["viewModel.visible","actionsMenuEnabled"]}),v.renderable()],
p.prototype,"actionsMenuOpen",null);d([t.property(),v.renderable()],p.prototype,"actionsMenuEnabled",void 0);d([t.property()],p.prototype,"alignment",void 0);d([t.aliasOf("viewModel.autoCloseEnabled")],p.prototype,"autoCloseEnabled",void 0);d([t.aliasOf("viewModel.autoOpenEnabled")],p.prototype,"autoOpenEnabled",void 0);d([t.aliasOf("viewModel.defaultPopupTemplateEnabled")],p.prototype,"defaultPopupTemplateEnabled",void 0);d([t.aliasOf("viewModel.content"),v.renderable()],p.prototype,"content",void 0);
d([t.property(),v.renderable()],p.prototype,"collapsed",void 0);d([t.property(),v.renderable()],p.prototype,"collapseEnabled",void 0);d([t.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),v.renderable()],p.prototype,"currentAlignment",null);d([t.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),v.renderable()],p.prototype,"currentDockPosition",null);d([t.property(),v.renderable()],p.prototype,"dockOptions",null);d([t.property(),v.renderable()],p.prototype,
"dockEnabled",void 0);d([t.aliasOf("viewModel.featureCount"),v.renderable()],p.prototype,"featureCount",void 0);d([t.property({dependsOn:["viewModel.visible"]}),v.renderable()],p.prototype,"featureMenuOpen",null);d([t.aliasOf("viewModel.features"),v.renderable()],p.prototype,"features",void 0);d([t.property(),v.renderable()],p.prototype,"featureNavigationEnabled",void 0);d([t.aliasOf("viewModel.goToOverride")],p.prototype,"goToOverride",void 0);d([t.aliasOf("viewModel.highlightEnabled")],p.prototype,
"highlightEnabled",void 0);d([t.aliasOf("viewModel.location"),v.renderable()],p.prototype,"location",void 0);d([t.property({readOnly:!0}),v.renderable()],p.prototype,"featureWidgets",void 0);d([t.aliasOf("viewModel.promises")],p.prototype,"promises",void 0);d([t.aliasOf("viewModel.selectedFeature"),v.renderable()],p.prototype,"selectedFeature",void 0);d([t.aliasOf("viewModel.selectedFeatureIndex"),v.renderable()],p.prototype,"selectedFeatureIndex",void 0);d([t.property({readOnly:!0}),v.renderable()],
p.prototype,"selectedFeatureWidget",void 0);d([t.property()],p.prototype,"spinnerEnabled",void 0);d([t.aliasOf("viewModel.title"),v.renderable()],p.prototype,"title",void 0);d([t.aliasOf("viewModel.updateLocationEnabled")],p.prototype,"updateLocationEnabled",void 0);d([t.aliasOf("viewModel.view")],p.prototype,"view",void 0);d([t.property({type:x}),v.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
v.vmEvent(["triggerAction","trigger-action"])],p.prototype,"viewModel",void 0);d([t.aliasOf("viewModel.visible"),v.renderable()],p.prototype,"visible",void 0);d([t.aliasOf("viewModel.clear")],p.prototype,"clear",null);d([t.aliasOf("viewModel.next")],p.prototype,"next",null);d([t.aliasOf("viewModel.previous")],p.prototype,"previous",null);d([t.aliasOf("viewModel.triggerAction")],p.prototype,"triggerAction",null);d([v.accessibleHandler()],p.prototype,"_toggleCollapsed",null);d([v.accessibleHandler()],
p.prototype,"_close",null);d([v.accessibleHandler()],p.prototype,"_toggleDockEnabled",null);d([v.accessibleHandler()],p.prototype,"_toggleFeatureMenu",null);d([v.accessibleHandler()],p.prototype,"_toggleActionsMenu",null);d([v.accessibleHandler()],p.prototype,"_triggerAction",null);d([v.accessibleHandler()],p.prototype,"_selectFeature",null);d([v.accessibleHandler()],p.prototype,"_next",null);d([v.accessibleHandler()],p.prototype,"_previous",null);return p=d([t.subclass("esri.widgets.Popup")],p)}(t.declared(w))})},
"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./support/AnchorElementViewModel ./support/widget".split(" "),function(q,e,n,d,l,a,b,c,k,m){return function(g){function f(a){a=g.call(this)||this;a._animationDelay=500;a._animationPromise=null;a.location=null;a.view=null;a.visible=!1;a.viewModel=new k;return a}n(f,g);f.prototype.postInitialize=
function(){var b=this;this.own([a.watch(this,"visible",function(a){return b._visibleChange(a)})])};f.prototype.destroy=function(){this._cancelAnimationPromise()};f.prototype.show=function(a){var b=this,f=a.location;a=a.promise;f&&(this.viewModel.location=f);this.visible=!0;f=function(){return b.hide()};a&&a.catch(function(){}).then(f)};f.prototype.hide=function(){this.visible=!1};f.prototype.render=function(){var a,b=this.visible,f=!!this.viewModel.screenLocation,b=(a={},a["esri-spinner--start"]=
b&&f,a["esri-spinner--finish"]=!b&&f,a);a=this._getPositionStyles();return m.tsx("div",{class:this.classes("esri-spinner",b),styles:a})};f.prototype._cancelAnimationPromise=function(){var a=this._animationPromise;a&&a.cancel();this._animationPromise=null};f.prototype._visibleChange=function(a){var b=this;a?this.viewModel.screenLocationEnabled=!0:(this._cancelAnimationPromise(),this._animationPromise=l.after(this._animationDelay).then(function(){b.viewModel.screenLocationEnabled=!1;b._animationPromise=
null}))};f.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};d([b.aliasOf("viewModel.location")],f.prototype,"location",void 0);d([b.aliasOf("viewModel.view")],f.prototype,"view",void 0);d([b.property(),m.renderable()],f.prototype,"visible",void 0);d([b.property({type:k}),m.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],f.prototype,"viewModel",void 0);
return f=d([b.subclass("esri.widgets.Spinner")],f)}(b.declared(c))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(q,e,n,d,l,a,b,c,k,m){return function(a){function f(f){var g=a.call(this)||this;g._anchorHandles=new b;g.location=
null;g.screenLocation=null;g.screenLocationEnabled=!1;g.view=null;g._anchorHandles.add([k.watch(g,["screenLocationEnabled","location","view.size","view.stationary"],function(){return g._updateScreenPointAndHandle()}),k.watch(g,["view","view.ready"],function(){return g._wireUpView()})]);return g}n(f,a);f.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};f.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");
this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=c.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};f.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};f.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};f.prototype._toggleWatchingViewpoint=
function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};f.prototype._setScreenLocation=function(){var a=this.location,b=this.view,f=this.screenLocationEnabled,g=this.get("view.ready"),a=f&&a&&g?b.toScreen(a):null;this._set("screenLocation",a)};d([m.property()],f.prototype,"location",void 0);d([m.property({readOnly:!0})],f.prototype,"screenLocation",void 0);d([m.property()],f.prototype,"screenLocationEnabled",void 0);d([m.property()],f.prototype,
"view",void 0);return f=d([m.subclass("esri.widgets.support.AnchorElementViewModel")],f)}(m.declared(l,a))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../geometry ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Handles ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w,x,v,y){var z=b.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:t,toggle:A}}),D=new z([x.zoomToFeature.clone()]),C=g.getLogger("esri.widgets.Popup.PopupViewModel");return function(b){function g(a){a=b.call(this)||this;a._handles=new m;a._pendingPromises=new Set;a._zoomToLocation=null;a._fetchingFeatures=null;a.actions=D;a.defaultPopupTemplateEnabled=!1;a.autoCloseEnabled=!1;a.autoOpenEnabled=!0;a.content=null;a.highlightEnabled=!0;a.title=
null;a.updateLocationEnabled=!1;a.view=null;a.visible=!1;a.zoomFactor=4;return a}n(g,b);g.prototype.initialize=function(){var a=this;this._handles.add([h.init(this,"autoOpenEnabled",this._autoOpenEnabledChange),this.on("view-change",this._autoClose),h.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),h.watch(this,"view.animation.state",function(b){a._zoomToLocation||(x.zoomToFeature.disabled="waiting-for-target"===b)}),this.on("trigger-action",function(b){return x.triggerAction({event:b,
view:a.view})})])};g.prototype.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(g.prototype,"allActions",{get:function(){var a=this._get("allActions")||new z;a.removeAll();var b=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),f=
b&&b.actions;(b=b&&b.overwriteActions?f:this.actions.concat(f))&&b.filter(Boolean).forEach(function(b){return a.add(b)});return a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,f=this.selectedFeatureIndex,g=this.promiseCount&&
a.length;g&&b&&-1===f?this.selectedFeatureIndex=0:g&&-1!==f||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var b=this.get("location"),f=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&f&&(a=p.geographicToWebMercator(a));this._set("location",a);a!==b&&this._centerAtLocation()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"waitingForResult",{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=
this,f=this._get("promises");f&&f.forEach(function(a){a&&"function"===typeof a.cancel&&a.cancel()});this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){b._pendingPromises.add(a);a.then(function(f){b._updatePendingPromises(a);b._updateFeatures(f)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"selectedFeature",{get:function(){var a=this.location,b=this.selectedFeatureIndex;if(-1===b)return null;b=this.features[b];if(!b)return null;!this.updateLocationEnabled&&a||!b.geometry||(this.location=this._getPointFromGeometry(b.geometry));return b},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",
a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});g.prototype.centerAtLocation=function(){var a=this.view,b=this._getSelectedTarget();return b?this.callGoTo({target:{target:b,scale:a.scale}}):(a=new k("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:b,view:a}),C.error(a),f.reject(a))};g.prototype.clear=function(){this.set({promises:[],
features:[],content:null,title:null,location:null})};g.prototype.open=function(a){this.set(l({visible:!1},{updateLocationEnabled:!1,promises:[]},a));this._setVisibleWhenContentExists()};g.prototype.triggerAction=function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};g.prototype.next=function(){this.selectedFeatureIndex+=1;return this};g.prototype.previous=function(){--this.selectedFeatureIndex;return this};g.prototype.zoomToLocation=function(){var a=this,b=this.location,
g=this.selectedFeature,c=this.view,h=this.zoomFactor,d=this._getSelectedTarget();if(!d)return b=new k("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:d,view:c}),C.error(b),f.reject(b);var c=c.scale/h,m=this.get("selectedFeature.geometry")||b,p=m&&"point"===m.type&&this._isScreenSize(g);x.zoomToFeature.active=!0;x.zoomToFeature.disabled=!0;return this._zoomToLocation=b=this.callGoTo({target:{target:d,scale:p?c:void 0}}).then(function(){p&&(a.location=m);
x.zoomToFeature.active=!1;x.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){x.zoomToFeature.active=!1;x.zoomToFeature.disabled=!1;a._zoomToLocation=null})};g.prototype._getSelectedTarget=function(){var a=this.selectedFeature,b=this.location,f=this.view;if(!f)return null;var f="3d"===f.type,g=this.get("selectedFeature.geometry");return f?a||b:g||b};g.prototype._fetchFeatures=function(a){var b=this.view;return b&&a?b.fetchPopupFeatures(a,{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled}):
(a=new k("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:b}),C.error(a),f.reject(a))};g.prototype._autoOpenEnabledChange=function(){var a=this,b=this._handles,f=this.autoOpenEnabled;b.remove("auto-fetch-features");f&&(f=h.on(this,"view","click",function(b){a.view.toolViewManager.handlesClickEvent(b)||"mouse"===b.pointerType&&0!==b.button||a._fetchFeaturesAndOpen(b)}),b.add(f,"auto-fetch-features"))};g.prototype._cancelFetchingFeatures=
function(){var a=this._fetchingFeatures;a&&a.cancel();this._fetchingFeatures=null};g.prototype._fetchFeaturesAndOpen=function(a){var b=this,f=a.screenPoint,g=a.mapPoint,c=this.view;this._cancelFetchingFeatures();this._fetchingFeatures=this._fetchFeatures(f).then(function(a){var f=a.promises,h=a.location;b._fetchingFeatures=null;c.popup.open({location:h||g,promises:f});return a})};g.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};
g.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,f=this.promiseCount;b.remove("pendingVisible");f?(f=h.init(this,"pendingPromisesCount",function(f){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));f||b.remove("pendingVisible")}),b.add(f,"pendingVisible")):this.set("visible",!0)};g.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};g.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||!a||"esri.Graphic"!==a.declaredClass)return!0;
if((b=b.getViewForGraphic(a))&&"whenGraphicBounds"in b){var f=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){f=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return f}return!0};g.prototype._getPointFromGeometry=function(a){return a?"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null:null};g.prototype._isLocationOffScreen=
function(a){return a?(a=this.view.toScreen(a))?!(0<=a.x&&a.x<=this.view.width&&0<=a.y&&a.y<=this.view.height):!1:!1};g.prototype._centerAtLocation=function(){var a=this.location;this.updateLocationEnabled&&a&&this._isLocationOffScreen(a)&&this.centerAtLocation()};g.prototype._highlightFeature=function(){var a=this;this._handles.remove("highlight");var b=this.selectedFeature,f=this.highlightEnabled,g=this.view,h=this.visible;if(b&&g&&f&&h){var d=b.layer;d&&g.when().then(function(){c.typeCast(g)().whenLayerView(d).then(function(f){if(f&&
w.hasHighlight(f)){var g=d.objectIdField,c=b.attributes;f=f.highlight(c&&c[g]||b);a._handles.add(f,"highlight")}})})}};g.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};d([u.property({type:z})],g.prototype,"actions",void 0);d([u.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions",
"selectedFeature.popupTemplate.actions.length","selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],g.prototype,"allActions",null);d([u.property({type:Boolean})],g.prototype,"defaultPopupTemplateEnabled",void 0);d([u.property()],g.prototype,"autoCloseEnabled",void 0);d([u.property()],g.prototype,"autoOpenEnabled",void 0);d([u.property()],g.prototype,"content",void 0);d([u.property({readOnly:!0,dependsOn:["features"]})],g.prototype,"featureCount",null);d([u.property()],g.prototype,"features",
null);d([u.property()],g.prototype,"highlightEnabled",void 0);d([u.property({type:a.Point})],g.prototype,"location",null);d([u.property({readOnly:!0,dependsOn:["promises"]})],g.prototype,"pendingPromisesCount",null);d([u.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],g.prototype,"waitingForResult",null);d([u.property({readOnly:!0,dependsOn:["promises"]})],g.prototype,"promiseCount",null);d([u.property()],g.prototype,"promises",null);d([u.property({value:null,readOnly:!0,
dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],g.prototype,"selectedFeature",null);d([u.property({value:-1})],g.prototype,"selectedFeatureIndex",null);d([u.property({readOnly:!0,dependsOn:["view.ready"]})],g.prototype,"state",null);d([u.property()],g.prototype,"title",void 0);d([u.property()],g.prototype,"updateLocationEnabled",void 0);d([u.property()],g.prototype,"view",void 0);d([u.property()],g.prototype,"visible",void 0);d([u.property()],g.prototype,"zoomFactor",void 0);
d([u.property()],g.prototype,"centerAtLocation",null);d([u.property()],g.prototype,"clear",null);d([u.property()],g.prototype,"triggerAction",null);d([u.property()],g.prototype,"next",null);d([u.property()],g.prototype,"previous",null);d([u.property()],g.prototype,"zoomToLocation",null);return g=d([u.subclass("esri.widgets.Popup.PopupViewModel")],g)}(u.declared(v,y))})},"esri/views/support/layerViewUtils":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});
e.hasHighlight=function(e){return e&&"function"===typeof e.highlight}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(q,e,n,d,l,a,b){Object.defineProperty(e,"__esModule",{value:!0});e.zoomToFeature=new b({id:"zoom-to-feature",title:d.zoom,className:"esri-icon-zoom-in-magnifying-glass"});e.removeSelectedFeature=new b({id:"remove-selected-feature",
title:n.remove,className:"esri-icon-trash"});e.all=[e.zoomToFeature,e.removeSelectedFeature];e.triggerAction=function(b){var c=b.view;b=b.event.action;var d=c&&c.popup;if(!b)return a.reject(new l("trigger-action:missing-arguments","Event has no action"));if(!d)return a.reject(new l("trigger-action:missing-arguments","view.popup is missing"));var g=b.disabled,f=b.id;if(!f)return a.reject(new l("trigger-action:invalid-action","action.id is missing"));if(g)return a.reject(new l("trigger-action:invalid-action",
"Action is disabled"));if(f===e.zoomToFeature.id)return d.viewModel.zoomToLocation();if(f===e.removeSelectedFeature.id){d.close();b=d.selectedFeature;if(!b)return a.reject(new l("trigger-action:"+e.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:b}));(d=b.sourceLayer)?d.remove(b):c.graphics.remove(b);return a.resolve()}return a.reject(new l("trigger-action:unknown-action","Unable to identify action to perform",{action:b,popup:d}))}})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.goToOverride=null;a.view=null;return a}n(c,b);c.prototype.callGoTo=function(a){var b=this.view;return this.goToOverride?this.goToOverride(b,a):b.goTo(a.target,a.options)};d([a.property()],c.prototype,"goToOverride",void 0);d([a.property()],c.prototype,"view",void 0);return c=d([a.subclass("esri.widgets.support.GoTo")],c)}(a.declared(l))})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a){return function(b){function c(a){a=b.call(this)||this;a.factor=1.5;a.offsetX=0;a.offsetY=0;a.position=null;a.visible=!1;return a}n(c,b);Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});d([a.property({type:Number})],c.prototype,"factor",void 0);d([a.property({type:Number})],c.prototype,"offsetX",void 0);d([a.property({type:Number})],c.prototype,"offsetY",void 0);d([a.property()],c.prototype,"position",
void 0);d([a.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],c.prototype,"version",null);d([a.property({type:Boolean})],c.prototype,"visible",void 0);return c=d([a.subclass("esri.views.Magnifier")],c)}(a.declared(l))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w,x,v,y,z,D){var C=m.getLogger("esri.views.MapView");return function(m){function r(a){var b=m.call(this,a)||this;b._frameTask=new x.default(b);b._mapViewBaseHandles=new k;b._setup=!1;b.featuresTilingScheme=null;b.fullOpacity=1;b.interacting=!1;b.initialExtent=null;b.labelManager=null;b.resizeAlign="center";b.type="2d";b.constraints=new v;b.padding={top:0,right:0,bottom:0,left:0};var f=function(){this._set("updating",!this.layerViewManager||this.layerViewManager.factory.working||
this.allLayerViews.some(function(a){return!0===a.updating})||this.labelManager&&!0===this.labelManager.updating)}.bind(b),g=b._mapViewBaseHandles;g.add([b.watch("viewpoint",function(a){return b._flipStationary()},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.watch("labelManager.updating",f),b.allLayerViews.on("change",function(){f();g.remove("layerViewsUpdating");g.add(b.allLayerViews.map(function(a){return a.watch("updating",
f)}).toArray(),"layerViewsUpdating")})]);f();b.watch("ready",function(a){a?(b._startup(),b._frameTask&&b._frameTask.start()):(b._frameTask&&b._frameTask.stop(),b._tearDown())},!0);return b}d(r,m);r.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.clear(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(r.prototype,"animation",{set:function(a){var b=
this,f=this._get("animation");a!==f&&(f&&f.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),f=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())},a.when(f,f)))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"center",{get:function(){if(!this._setup)return this._get("center");var b=this.content.center;return new a.Point({x:b[0],y:b[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=
a)if(this._normalizeInput(a))if(this._setup){var b=this.viewpoint;D.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else C.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this._mapViewBaseHandles.remove("constraints"),
f.destroy());this._set("constraints",a);a&&(a.view=this,this._setup&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b._setup&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"extent",{get:function(){return this._setup?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this._setup?
(a=this.viewpoint,D.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):C.error("#extent","invalid extent size"):C.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,f=this.scale,g=this.viewpoint,h=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==f||-1!==h)||g?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"padding",{get:function(){return this._setup?this.state.padding:this._get("padding")},set:function(a){this._setup?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});
Object.defineProperty(r.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"rotation",{get:function(){return this._setup?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this._setup){var b=this.viewpoint;D.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"scale",{get:function(){return this._setup?
this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this._setup){var b=this.viewpoint;D.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"viewpoint",{get:function(){if(!this._setup)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(f){if(null!=f){var g=this._normalizeInput(f);g?this._setup?(f=new b({targetGeometry:new a.Point,scale:0,rotation:0}),D.copy(f,g),this.constraints.constrain(f,this.content.viewpoint),this.state.viewpoint=f,this._frameTask.requestFrame(),this._set("viewpoint",f)):(this._set("viewpoint",g),this._set("extent",null),
this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!f.scale||isNaN(f.scale)?C.error("#viewpoint","invalid scale value of "+f.scale):f.targetGeometry?C.error("#viewpoint","incompatible spatialReference "+JSON.stringify(f.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):C.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"zoom",
{get:function(){return this._setup?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this._setup){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,D.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});
r.prototype.goTo=function(a,b){if(a){this.animation&&(this.animation=null);if(this._setup)return b=n({animate:!0},b),a=D.createAsync(a,this),this._gotoTask={},b.animate?this._gotoAnimated(a,b):this._gotoImmediate(a,b);C.error("#goTo()","MapView cannot be used before it is ready")}else C.error("#goTo()","target cannot be null or undefined")};r.prototype.hitTest=function(a){return g.reject("Should be implemented by subclasses")};r.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(f){return n({},
f,{mapPoint:b.toMap(a)})})};r.prototype.toMap=function(b){if(!this._setup)return null;b=this.state.toMap([0,0],[b.x,b.y]);return new a.Point({x:b[0],y:b[1],spatialReference:this.spatialReference})};r.prototype.isTileInfoRequired=function(){return!0};r.prototype.toScreen=function(a){if(!this._setup)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return f.createScreenPoint(a[0],a[1])};r.prototype.pixelSizeAt=function(a,b){if(!this._setup)return NaN;a&&null!=a.x&&(b=a.y,
a=a.x);return this.content.pixelSizeAt([a,b])};r.prototype.requestLayerViewUpdate=function(a){this._setup&&this._frameTask.requestLayerViewUpdate(a)};r.prototype.requestUpdate=function(a){this._setup&&this._frameTask.requestUpdate(a)};r.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};r.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};
r.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new A;this.animation.update(a);return this.animation};r.prototype._cancellableGoTo=function(a,b,f){var h=this,c=f.then(function(){a===h._gotoTask&&(h.animation=null)}).catch(function(f){a===h._gotoTask&&(h.animation=null,b.done||b.stop());throw f;}),d=g.create(function(a){return a(c)},function(){a!==h._gotoTask||b.done||b.stop()});b.when().catch(function(){a===h._gotoTask&&d.cancel()});return d};
r.prototype._gotoImmediate=function(a,b){var f=this,g=this._gotoTask,h=this._createOrReplaceAnimation(a);a=a.then(function(a){if(g!==f._gotoTask)throw new c("view:goto-interrupted","Goto was interrupted");f.viewpoint=h.target=a;h.finish()});return this._cancellableGoTo(g,h,a)};r.prototype._gotoAnimated=function(a,b){var f=this,g=this._gotoTask,h=this._createOrReplaceAnimation(a);a=a.then(function(a){if(g!==f._gotoTask)throw new c("view:goto-interrupted","Goto was interrupted");h.update(a);f.animationManager.animate(h,
f.viewpoint,b);return h.when().then(function(){})});return this._cancellableGoTo(g,h,a)};r.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.content.viewpoint,g=this.content.size.concat();b.size=[a.width,a.height];D.resize(f,f,g,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};r.prototype._startup=function(){if(!this._setup){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",
new w({view:this}));this._set("state",new y({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new z.TileInfoView(p.create({spatialReference:this.spatialReference,size:512})));this._setup=!0}};r.prototype._tearDown=function(){if(this._setup){this._setup=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var b=this._get("content"),f=b.center,g=b.spatialReference,
f=new a.Point({x:f[0],y:f[1],spatialReference:g});this._set("viewpoint",null);this._set("extent",null);this._set("center",f);this._set("zoom",-1);this._set("rotation",b.rotation);this._set("scale",b.scale);this._set("spatialReference",g);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};r.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);
this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};r.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var f=a&&a.targetGeometry||a;return b?f?b.equals(f.spatialReference)?a:u.canProject(f,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=u.project(f,b),a):u.project(f,b):null:null:a};r.prototype._getDefaultViewpoint=function(){var a=this.constraints,f=this._get("zoom"),g=this._get("scale"),
h=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),d=this._get("rotation"),k=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==f&&(g=a.zoomToScale(f)):f=-1;var r=null,p=null,f=0,a=k&&k.rotation,m=k&&k.targetGeometry;m&&("extent"===m.type?r=m:"point"===m.type&&(p=m,f=k.scale));k=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));m=this._normalizeInput(this.initialExtent);c=c||r||k||m;h=h||p||c&&c.center;g=
g||f||c&&D.extentToScale(c,this.size);return h&&g?new b({targetGeometry:h,scale:g,rotation:d||a||0}):null};l([h.property()],r.prototype,"animation",null);l([h.property({readOnly:!0})],r.prototype,"animationManager",void 0);l([h.property({value:null,type:a.Point,dependsOn:["content.viewpoint"]})],r.prototype,"center",null);l([h.property({type:v})],r.prototype,"constraints",null);l([h.property({readOnly:!0})],r.prototype,"content",void 0);l([h.property({value:null,type:a.Extent,dependsOn:["content.viewpoint"]})],
r.prototype,"extent",null);l([h.property({readOnly:!0})],r.prototype,"featuresTilingScheme",void 0);l([h.property()],r.prototype,"fullOpacity",void 0);l([h.property({readOnly:!0})],r.prototype,"interacting",void 0);l([h.property({type:a.Extent})],r.prototype,"initialExtent",void 0);l([h.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],r.prototype,"initialExtentRequired",null);l([h.property()],r.prototype,"labelManager",void 0);l([h.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return n({top:0,
right:0,bottom:0,left:0},a)}})],r.prototype,"padding",null);l([h.property()],r.prototype,"resizeAlign",void 0);l([h.property({readOnly:!0,dependsOn:["content.viewpoint"]})],r.prototype,"resolution",null);l([h.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],r.prototype,"rotation",null);l([h.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],r.prototype,"scale",null);l([h.property({type:a.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],
r.prototype,"spatialReference",void 0);l([h.property({readOnly:!0})],r.prototype,"state",void 0);l([h.property()],r.prototype,"stationary",null);l([h.property({readOnly:!0})],r.prototype,"type",void 0);l([h.property({value:null,type:b,dependsOn:["content.viewpoint"]})],r.prototype,"viewpoint",null);l([h.property({value:-1,dependsOn:["scale"]})],r.prototype,"zoom",null);return r=l([h.subclass("esri.views.MapViewBase")],r)}(h.declared(t,r))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p){var r=new c.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(b){function c(a){a=b.call(this)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}d(c,b);t=c;c.create=function(b){void 0===b&&(b={size:256,spatialReference:a.SpatialReference.WebMercator});
var f=b.resolutionFactor||1,g=b.scales,c=b.size||256;b=b.spatialReference||a.SpatialReference.WebMercator;if(!h.isValid(b)){for(var f=[],d=5E-4,r=23;0<=r;r--)f.unshift({level:r,scale:d,resolution:d}),d*=2;return new t({dpi:96,lods:f,origin:new a.Point(0,0,b),size:c,spatialReference:b})}var m=(r=h.getInfo(b))?new a.Point(r.origin[0],r.origin[1],b):new a.Point(0,0,b),p=1/(39.37*k.getMetersPerUnitForSR(b)*96),u=[];if(g)for(r=0;r<g.length;r++){var l=g[r],d=l*p;u.push({level:r,scale:l,resolution:d})}else for(d=
h.isGeographic(b)?512/c*5.916575275917094E8:256/c*5.91657527591555E8,g=Math.ceil(24/f),u.push({level:0,scale:d,resolution:d*p}),r=1;r<g;r++)l=d/Math.pow(2,f),d=l*p,u.push({level:r,scale:l,resolution:d}),d=l;return new t({dpi:96,lods:u,origin:m,size:c,spatialReference:b})};Object.defineProperty(c.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var f=h.getInfo(a);return a.isWrappable&&Math.abs(f.origin[0]-b.x)<=f.dx}return!1},enumerable:!0,configurable:!0});
c.prototype.readOrigin=function(b,f){return a.Point.fromJSON(n({spatialReference:f.spatialReference},b))};Object.defineProperty(c.prototype,"lods",{set:function(a){var b=this,f=0,g=0,c=[];this._levelToLOD={};a&&(f=-Infinity,g=Infinity,a.forEach(function(a){c.push(a.scale);f=a.scale>f?a.scale:f;g=a.scale<g?a.scale:g;b._levelToLOD[a.level]=a}));this._set("scales",c);this._set("minScale",f);this._set("maxScale",g);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});
c.prototype.readSize=function(a,b){return[b.cols,b.rows]};c.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};c.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var f=Math.round(a);return b[f]+(f-a)*(b[Math.round(a-.5)]-b[f])};c.prototype.scaleToZoom=function(a){for(var b=this.scales,f=b.length-1,g=0;g<f;g++){var c=b[g],h=b[g+1];if(c<=a)break;if(h===a)return g+1;if(c>a&&h<a)return g+1-(a-h)/(c-h)}return g};c.prototype.snapScale=function(a,
b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};c.prototype.tileAt=function(a,b,g,c){var d=this.lodAt(a);if(!d)return null;var k;if("number"===typeof b)k=b,b=g;else{if(h.equals(b.spatialReference,this.spatialReference))k=b.x,b=b.y;else{c=u.project(b,this.spatialReference);if(!c)return null;k=c.x;b=c.y}c=g}g=d.resolution*this.size[0];d=d.resolution*this.size[1];c||(c={id:null,level:0,row:0,col:0,extent:f.create()});
c.level=a;c.row=Math.floor((this.origin.y-b)/d+.001);c.col=Math.floor((k-this.origin.x)/g+.001);this.updateTileInfo(c);return c};c.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var g=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=f.create());a.extent[0]=this.origin.x+a.col*g;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+g;a.extent[3]=a.extent[1]+b}};c.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];
if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};c.prototype.getTileBounds=function(a,b){var f=this.lodAt(b.level).resolution,g=f*this.size[0],f=f*this.size[1];a[0]=this.origin.x+b.col*g;a[1]=this.origin.y-(b.row+1)*f;a[2]=a[0]+g;a[3]=a[1]+f;return a};c.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};c.prototype.clone=function(){return t.fromJSON(this.write({}))};
c.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,f=0;f<a.length;f++){var g=a[f];this._upsampleLevels[g.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/g.resolution:0};b=g}};var t;l([m.property({type:Number,json:{write:!0}})],c.prototype,"compressionQuality",void 0);l([m.property({type:Number,json:{write:!0}})],c.prototype,"dpi",void 0);l([m.property({type:String,json:{read:r.read,write:r.write,origins:{"web-scene":{read:!1,write:!1}}}})],
c.prototype,"format",void 0);l([m.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],c.prototype,"isWrappable",null);l([m.property({type:a.Point,json:{write:!0}})],c.prototype,"origin",void 0);l([m.reader("origin")],c.prototype,"readOrigin",null);l([m.property({type:[p],value:null,json:{write:!0}})],c.prototype,"lods",null);l([m.property({readOnly:!0})],c.prototype,"minScale",void 0);l([m.property({readOnly:!0})],c.prototype,"maxScale",void 0);l([m.property({readOnly:!0})],c.prototype,
"scales",void 0);l([m.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],c.prototype,"size",void 0);l([m.reader("size",["rows","cols"])],c.prototype,"readSize",null);l([m.writer("size",{cols:{type:g.Integer},rows:{type:g.Integer}})],c.prototype,"writeSize",null);l([m.property({type:a.SpatialReference,json:{write:!0}})],c.prototype,"spatialReference",void 0);return c=t=l([m.subclass("esri.layers.support.TileInfo")],c)}(m.declared(b))})},"esri/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../core/compilerUtils","../Extent"],function(q,e,n,d){function l(a){void 0===a&&(a=e.ZERO);return[a[0],a[1],a[2],a[3]]}function a(a){return a[0]>=a[2]?0:a[2]-a[0]}function b(a){return a[1]>=a[3]?0:a[3]-a[1]}function c(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function k(a){return 4===a.length}function m(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(e,"__esModule",{value:!0});e.create=l;e.clone=function(a){return[a[0],a[1],a[2],a[3]]};e.fromValues=function(a,b,c,d,k){void 0===
k&&(k=l());k[0]=a;k[1]=b;k[2]=c;k[3]=d;return k};e.fromExtent=function(a,b){void 0===b&&(b=l());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};e.toExtent=function(a,b){return new d({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};e.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};e.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(k(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=
Math.max(a[2],b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x);c[1]=Math.min(a[1],b.y);c[2]=Math.max(a[2],b.x);c[3]=Math.max(a[3],b.y);break;default:n.neverReached(b)}return c};e.expandWithNestedArray=
function(a,b,c){void 0===c&&(c=a);var f=b.length,g=a[0],h=a[1],d=a[2];a=a[3];for(var k=0;k<f;k++){var m=b[k],g=Math.min(g,m[0]),h=Math.min(h,m[1]),d=Math.max(d,m[0]);a=Math.max(a,m[1])}c[0]=g;c[1]=h;c[2]=d;c[3]=a;return c};e.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};e.width=a;e.height=b;e.diameter=function(g){var f=a(g);g=b(g);return Math.sqrt(f*f+g*g)};e.area=function(g){return a(g)*b(g)};e.center=function(g,f){void 0===f&&(f=[0,0]);f[0]=g[0]+a(g)/2;f[1]=g[1]+
b(g)/2;return f};e.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};e.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};e.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};e.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};e.intersection=function(a,b,c){void 0===c&&(c=a);var f=b[0],g=b[1],h=b[2];b=b[3];c[0]=m(a[0],f,h);
c[1]=m(a[1],g,b);c[2]=m(a[2],f,h);c[3]=m(a[3],g,b);return c};e.distance=function(c,f){var g=(c[1]+c[3])/2,d=Math.max(Math.abs(f[0]-(c[0]+c[2])/2)-a(c)/2,0);c=Math.max(Math.abs(f[1]-g)-b(c)/2,0);return Math.sqrt(d*d+c*c)};e.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};e.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};e.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],
c[3]=a[3]);return c};e.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};e.set=c;e.empty=function(a){return a?c(a,e.NEGATIVE_INFINITY):l(e.NEGATIVE_INFINITY)};e.is=k;e.isPoint=function(c){return(0===a(c)||!isFinite(c[0]))&&(0===b(c)||!isFinite(c[1]))};e.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!k(a)||!k(b))return!1;if(c)for(var f=0;f<a.length;f++){if(!c(a[f],b[f]))return!1}else for(f=0;f<a.length;f++)if(a[f]!==b[f])return!1;return!0};
e.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];e.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];e.ZERO=[0,0,0,0]})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(q,e,n,d,l,a,b){return function(c){function k(a){a=c.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=
0;a.scale=0;return a}n(k,c);m=k;k.prototype.clone=function(){return new m({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var m;d([a.property({type:b.Integer,json:{write:!0}})],k.prototype,"level",void 0);d([a.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);d([a.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);d([a.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=m=d([a.subclass("esri.layers.support.LOD")],
k)}(a.declared(l))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/Accessor ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/Promise ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(q,e,n,d,l,a,b,c,k,m,g,f,h,u){return function(f){function c(){return null!==f&&f.apply(this,
arguments)||this}d(c,f);c.prototype.when=function(a,b){return this.inherited(arguments)};c.prototype.fetchPopupFeatures=function(a,b){return m.safeCast(this._fetchPopupFeaturesAsync(a,b))};c.prototype._fetchPopupFeaturesAsync=function(f,c){return a(this,void 0,void 0,function(){var a,g,d,r,m,p;return b(this,function(b){switch(b.label){case 0:return[4,this.when()];case 1:return b.sent(),[4,this._prepareFetchPopupFeatures(f,c)];case 2:return a=b.sent(),g=a.location,d=this._queryLayerPopupFeatures(a,
c),r=h.resolve(a.clientOnlyGraphics),m=[r].concat(d),p=h.eachAlwaysValues(m).then(k.flatten),[2,{promise:p,location:g,promises:m}]}})})};c.prototype._queryLayerPopupFeatures=function(a,b){var f=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,defaultPopupTemplateEnabled:g.isSome(b)?!!b.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(f,a)})};c.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(g.isSome(b)&&
b.defaultPopupTemplateEnabled)};c.prototype._prepareFetchPopupFeatures=function(f,c){return a(this,void 0,void 0,function(){var a,g,h,d,k,r,m,p;return b(this,function(b){switch(b.label){case 0:return[4,this._popupHitTestGraphics(f,c)];case 1:return a=b.sent(),g=a.clientGraphics,h=a.queryArea,d=a.location,k=this._getFetchPopupLayerViews(),r=this._graphicsPerFetchPopupLayerView(g,k),m=r.layerViewsAndGraphics,p=r.clientOnlyGraphics,[2,{clientOnlyGraphics:p,layerViewsAndGraphics:m,queryArea:h,location:d}]}})})};
c.prototype._popupHitTestGraphics=function(f,c){return a(this,void 0,void 0,function(){var a,g,h,d,k,r,m=this;return b(this,function(b){switch(b.label){case 0:return[4,this.popupHitTest(f)];case 1:return a=b.sent(),g=a.results,h=a.mapPoint,d=g.filter(function(a){return m._isValidPopupGraphic(a.graphic,c)}),k=d.length?d[0].mapPoint:null,r=d.map(function(a){return a.graphic}),[2,{clientGraphics:r,queryArea:h,location:h||k}]}})})};c.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(f){a._isValidPopupLayerView(f)&&
b.push(f)});this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};c.prototype._isValidPopupLayerView=function(a){return g.isSome(a)&&(!("layer"in a)||!a.suspended)&&"function"===typeof a.fetchPopupFeatures};c.prototype._graphicsPerFetchPopupLayerView=function(a,b){var f=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var g=0;g<a.length;g++){var h=a[g],d=c.get(h.layer)||null;d?d.push(h):
f.push(h)}return{layerViewsAndGraphics:b,clientOnlyGraphics:f}};return c=l([u.subclass("esri.views.PopupView")],c)}(u.declared(c,f))})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,e,n,d,l,a,b,c){var k=function(a,c,f,h){var g=a.targetGeometry,d=c.targetGeometry;h?"string"===typeof h&&(h=b.parse(h)||b.ease):h=b.ease;this.easing=h;
this.duration=f;this.sCenterX=g.x;this.sCenterY=g.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=d.x;this.tCenterY=d.y;this.tScale=c.scale;this.tRotation=c.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};k.prototype.applyRatio=function(a,b){var f=this.easing(b),c,g;1<=b?(b=this.tCenterX,
c=this.tCenterY,g=this.tRotation,f=this.tScale):(b=this.sCenterX+f*this.dCenterX,c=this.sCenterY+f*this.dCenterY,g=this.sRotation+f*this.dRotation,f=this.sScale+f*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=f;a.rotation=g};return e.createSubclass({constructor:function(){this.viewpoint=new q({targetGeometry:new l,scale:0,rotation:0});this._updateTask=n.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,duration:{value:200},
transition:{value:null},easing:{value:b.ease},view:null,viewpoint:null},animate:function(a,b,f){this.stop();c.copy(this.viewpoint,b);this.transition=new k(this.viewpoint,a.target,f&&f.duration||this.duration,f&&f.easing||this.easing);b=function(){this.animation===a&&this._updateTask&&("finished"===a.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);
a.when(b,b);this._startTime=d();this._updateTask.resume();return this.animation=a},animateContinous:function(b,c){this.stop();this.updateFunction=c;this.viewpoint=b;var f=new a({target:b.clone()});b=function(){this.animation===f&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);f.when(b,b);this._startTime=d();this._updateTask.resume();return this.animation=f},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},
_postRender:function(b){var c=this.animation;c&&c.state!==a.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(d()-this._startTime)/this.transition.duration,c=1<=b,this.transition.applyRatio(this.viewpoint,b),c&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var q=function(e,d,l,a){function b(a,b){var f,g,h,d;b=null==b?1E-6:b;h=a;for(g=
0;8>g;g++){d=((m*h+k)*h+c)*h-a;if(Math.abs(d)<b)return h;f=(3*m*h+2*k)*h+c;if(1E-6>Math.abs(f))break;h-=d/f}f=0;g=1;h=a;if(h<f)return f;if(h>g)return g;for(;f<g;){d=((m*h+k)*h+c)*h;if(Math.abs(d-a)<b)break;a>d?f=h:g=h;h=.5*(g-f)+f}return h}var c=3*e,k=3*(l-e)-c,m=1-c-k,g=3*d,f=3*(a-d)-g,h=1-g-f;return function(a,c){a=b(a,c);return((h*a+f)*a+g)*a}},e=/^cubic-bezier\((.*)\)/;q.parse=function(n){var d=q[n]||null;!d&&(n=e.exec(n))&&(n=n[1].split(",").map(function(d){return parseFloat(d.trim())}),4!==
n.length||n.some(function(d){return isNaN(d)})||(d=q.apply(q,n)));return d};q.ease=q(.25,.1,.25,1);q.linear=q(0,0,1,1);q.easeIn=q["ease-in"]=q(.42,0,1,1);q.easeOut=q["ease-out"]=q(0,0,.58,1);q.easeInOut=q["ease-in-out"]=q(.42,0,.58,1);return q})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w,x,v){function y(a,b,f,c){return c&&f&&!c.equals(f)&&x.canProject(c,f)&&c.isWebMercator?(c.isWebMercator?(f=b[1],89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999),f=Math.sin(m.common.toRadian(f)),a=h.vec2.set(a,m.common.toRadian(b[0])*X,.5*X*Math.log((1+f)/(1-f)))):(f=m.common.toDegree(b[0]/X),a=h.vec2.set(a,f-360*Math.floor((f+180)/360),m.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/X))))),a):h.vec2.copy(a,b)}function z(a){return a.wkid?a:a.spatialReference||
A.WGS84}function D(a,b){return b.type?h.vec2.set(a,b.x,b.y):h.vec2.copy(a,b)}function C(a,b){return Math.max(a.width/b[0],a.height/b[1])*Z(a.spatialReference)}function E(a,f,c,g){return d(this,void 0,void 0,function(){var h,d,k,m,l,u,e,y,A,v,w,z,q,D,N,C,M,P,B,R,I,F,K,G,Q,O,L,S;return n(this,function(H){switch(H.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];d=a.every(function(a){return"attributes"in a});k=a.some(function(a){return!a.geometry});
m=a;if(!(d&&k&&f&&f.allLayerViews))return[3,2];l=new Map;u=0;for(e=a;u<e.length;u++)y=e[u],A=y.layer,v=l.get(A)||[],w=y.attributes[A.objectIdField],null!=w&&v.push(w),l.set(A,v);z=[];l.forEach(function(a,b){var c=f.allLayerViews.find(function(a){return a.layer.id===b.id});if("queryFeatures"in c){var g=b.createQuery();g.objectIds=a;g.returnGeometry=!0;z.push(c.queryFeatures(g))}});return[4,b.all(z)];case 1:q=H.sent();D=[];N=0;for(C=q;N<C.length;N++)if((M=C[N])&&M.features&&M.features.length)for(P=
0,B=M.features;P<B.length;P++)y=B[P],y.geometry&&D.push(y.geometry);m=D;H.label=2;case 2:R=0,I=m,H.label=3;case 3:if(!(R<I.length))return[3,6];F=I[R];return[4,E(F,f,c,g)];case 4:g=H.sent(),H.label=5;case 5:return R++,[3,3];case 6:return[2,g];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];h=new t(a);return[3,12];case 8:if(!(a instanceof r))return[3,9];h=a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];h=a.geometry;
return[3,12];case 10:if(!a.layer)return[3,12];K=a.layer;G=f.allLayerViews.find(function(a){return a.layer.id===K.id});if(!("queryFeatures"in G))return[3,12];Q=K.createQuery();Q.objectIds=[a.attributes[K.objectIdField]];Q.returnGeometry=!0;return[4,G.queryFeatures(Q)];case 11:h=(O=H.sent())&&O.features&&O.features[0]&&O.features[0].geometry,H.label=12;case 12:if(!h)return[2,null];L="point"===h.type?new p({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;if(!L)return[2,
null];S=x.canProject(L,c);if(!L.spatialReference.equals(c)&&S)L=x.project(L,c);else if(!S)return[2,null];g=g?g.union(L):L.clone();return[2,g]}})})}function B(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&a.every(function(a){return"layer"in a})){for(var f=0,c=0,g=0;g<a.length;g++)(b=a[g].layer)&&
b.minScale&&b.maxScale&&(f=b.minScale<f?b.minScale:f,c=b.maxScale>c?b.maxScale:c);return f&&c?{min:f,max:c}:null}}}function F(a,b){return d(this,void 0,void 0,function(){var f,c,g,h,d,k,r,m,e,A,w,q,N,M,I,K;return n(this,function(H){switch(H.label){case 0:if(!a)return[2,new l({targetGeometry:new t,scale:0,rotation:0})];f=b.spatialReference;c=b.size;g=b.viewpoint;h=b.constraints;d=null;"esri.Viewpoint"===a.declaredClass?d=a:a.viewpoint?d=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&
(d=a.target);k=null;if(!d||!d.targetGeometry)return[3,1];k=d.targetGeometry;return[3,10];case 1:if(!(a instanceof p))return[3,2];k=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,E(a.center,b,f)]:[3,10];case 3:return(e=H.sent())?[3,5]:[4,E(a.extent,b,f)];case 4:e=H.sent(),H.label=5;case 5:return(m=e)?[3,7]:[4,E(a.target,b,f)];case 6:m=H.sent(),H.label=7;case 7:return(r=m)?[3,9]:[4,E(a,b,f)];case 8:r=H.sent(),H.label=9;case 9:k=
r,H.label=10;case 10:!k&&g&&g.targetGeometry?k=g.targetGeometry:!k&&b.extent&&(k=b.extent);A=z(k);f||(f=z(b.spatialReference||b.extent||k));if(!v.canProject(k,f)&&A&&!A.equals(f))return[2,null];w=D(u.vec2f64.create(),k.center?k.center:k);q=new t(y(w,w,A,f),f);N=null;N=d&&d.targetGeometry&&"point"===d.targetGeometry.type?d.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&h&&h.effectiveLODs?h.zoomToScale(a.zoom):Array.isArray(k)||"point"===k.type||"extent"===k.type&&
0===k.width&&0===k.height?b.extent&&x.canProject(b.extent,f)?C(x.project(b.extent,f),c):b.extent?C(b.extent,c):g.scale:x.canProject(k.extent,f)?C(x.project(k.extent,f),c):C(k.extent,c);if(M=B(a))M.min&&M.min>N?N=M.min:M.max&&M.max<N&&(N=M.max);I=0;d?I=d.rotation:a.hasOwnProperty("rotation")?I=a.rotation:g&&(I=g.rotation);K=new l({targetGeometry:q,scale:N,rotation:I});h&&(K=h.fit(K),h.rotationEnabled||(K.rotation=I));return[2,K]}})})}function G(a,b){var f=a.targetGeometry,c=b.targetGeometry;f.x=c.x;
f.y=c.y;f.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function K(a,b,f){return f?h.vec2.set(a,.5*(b[0]-f.right+f.left),.5*(b[1]-f.bottom+f.top)):h.vec2.scale(a,b,.5)}function I(a,b,f,c){e.getTransform(a,b,f,c);return g.mat2d.invert(a,a)}function Q(a,b,f){var c=S(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return h.vec2.set(a,Math.round(f[1]*c+f[0]*b),Math.round(f[1]*b+f[0]*c))}function O(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=w.isValid(a)?
1/(39.37*c.getMetersPerUnitForSR(a)*96):1;return b*a}function S(a){return m.common.toRadian(a.rotation)||0}function Z(a){return w.isValid(a)?39.37*c.getMetersPerUnitForSR(a)*96:1}function L(a){return a.isWrappable?(a=w.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(e,"__esModule",{value:!0});var X=k.wgs84Radius,V=180/Math.PI;e.extentToScale=C;e.create=F;e.copy=G;e.getAnchor=K;e.getExtent=function(){var a=u.vec2f64.create();return function(b,f,c){var g=f.targetGeometry;D(a,g);f=.5*O(f);
b.xmin=a[0]-f*c[0];b.ymin=a[1]-f*c[1];b.xmax=a[0]+f*c[0];b.ymax=a[1]+f*c[1];b.spatialReference=g.spatialReference;return b}}();e.setExtent=function(a,b,f,c,g){e.centerAt(a,b,f.center);a.scale=C(f,c);g&&g.constraints&&g.constraints.constrain(a);return a};e.getOuterExtent=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(f,c,g){D(a,c.targetGeometry);Q(b,c,g);g=.5*O(c);f.set({xmin:a[0]-g*b[0],ymin:a[1]-g*b[1],xmax:a[0]+g*b[0],ymax:a[1]+g*b[1],spatialReference:c.targetGeometry.spatialReference});
return f}}();e.getOuterSize=Q;e.getPaddingScreenTranslation=function(){var a=u.vec2f64.create();return function(b,f,c){return h.vec2.sub(b,h.vec2.scale(b,f,.5),K(a,f,c))}}();e.getPaddingMapTranslation=function(){var a=f.mat2df64.create(),b=u.vec2f64.create();return function(f,c,d,k){var r=O(c);c=S(c);h.vec2.set(b,r,r);g.mat2d.fromScaling(a,b);g.mat2d.rotate(a,a,c);g.mat2d.translate(a,a,e.getPaddingScreenTranslation(b,d,k));g.mat2d.translate(a,a,[0,k.top-k.bottom]);return h.vec2.set(f,a[4],a[5])}}();
e.getResolution=O;e.getResolutionToScaleFactor=Z;e.getMatrix=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),f=u.vec2f64.create();return function(c,d,k,r,m,p){h.vec2.negate(a,d);h.vec2.scale(b,k,.5*p);h.vec2.set(f,1/r*p,-1/r*p);g.mat2d.identity(c);g.mat2d.translate(c,c,b);m&&g.mat2d.rotate(c,c,m);g.mat2d.scale(c,c,f);g.mat2d.translate(c,c,a);return c}}();e.getTransform=function(){var a=u.vec2f64.create();return function(b,f,c,g){var h=O(f),d=S(f);D(a,f.targetGeometry);return e.getMatrix(b,
a,c,h,d,g)}}();e.getTransformNoRotation=function(){var a=u.vec2f64.create();return function(b,f,c,g){var h=O(f);D(a,f.targetGeometry);return e.getMatrix(b,a,c,h,0,g)}}();e.getWorldWidth=L;e.getWorldScreenWidth=function(a,b){return Math.round(L(a)/b)};e.createAsync=function(b,f){return a.safeCast(F(b,f))};e.angleBetween=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),f=[0,0,0];return function(c,g,d){h.vec2.subtract(a,c,g);h.vec2.normalize(a,a);h.vec2.subtract(b,c,d);h.vec2.normalize(b,b);
h.vec2.cross(f,a,b);c=Math.acos(h.vec2.dot(a,b)/(h.vec2.length(a)*h.vec2.length(b)))*V;0>f[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();e.addPadding=function(){var a=u.vec2f64.create();return function(b,f,c,g){var h=b.targetGeometry;G(b,f);e.getPaddingMapTranslation(a,f,c,g);h.x+=a[0];h.y+=a[1];return b}}();e.removePadding=function(){var a=u.vec2f64.create();return function(b,f,c,g){var h=b.targetGeometry;G(b,f);e.getPaddingMapTranslation(a,f,c,g);h.x-=a[0];h.y-=a[1];return b}}();e.centerAt=function(){var a=
u.vec2f64.create();return function(b,f,c){G(b,f);f=b.targetGeometry;var g=z(c),h=z(f);D(a,c);y(a,a,g,h);f.x=a[0];f.y=a[1];return b}}();e.pixelSizeAt=function(a,b,f){return O(b)};e.resize=function(){var a=u.vec2f64.create();return function(b,f,c,g,d){d||(d="center");h.vec2.sub(a,c,g);h.vec2.scale(a,a,.5);c=a[0];g=a[1];switch(d){case "center":h.vec2.set(a,0,0);break;case "left":h.vec2.set(a,-c,0);break;case "top":h.vec2.set(a,0,g);break;case "right":h.vec2.set(a,c,0);break;case "bottom":h.vec2.set(a,
0,-g);break;case "top-left":h.vec2.set(a,-c,g);break;case "bottom-left":h.vec2.set(a,-c,-g);break;case "top-right":h.vec2.set(a,c,g);break;case "bottom-right":h.vec2.set(a,c,-g)}e.translateBy(b,f,a);return b}}();e.rotateBy=function(a,b,f){G(a,b);a.rotation+=f;return a};e.rotateTo=function(a,b,f){G(a,b);a.rotation=f;return a};e.scaleBy=function(){var a=u.vec2f64.create();return function(b,f,c,g,d){G(b,f);isNaN(c)||0===c||(e.toMap(a,g,f,d),b.scale=f.scale*c,e.toScreen(a,a,b,d),e.translateBy(b,b,h.vec2.set(a,
a[0]-g[0],g[1]-a[1])));return b}}();e.scaleTo=function(a,b,f){G(a,b);a.scale=f;return a};e.scaleAndRotateBy=function(){var a=u.vec2f64.create();return function(b,f,c,g,d,k){G(b,f);isNaN(c)||0===c||(e.toMap(a,d,f,k),b.scale=f.scale*c,b.rotation+=g,e.toScreen(a,a,b,k),e.translateBy(b,b,h.vec2.set(a,a[0]-d[0],d[1]-a[1])));return b}}();e.padAndScaleAndRotateBy=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(f,c,g,d,k,r,m){e.getPaddingScreenTranslation(b,r,m);h.vec2.add(a,k,b);
return d?e.scaleAndRotateBy(f,c,g,d,a,r):e.scaleBy(f,c,g,a,r)}}();e.toMap=function(){var a=f.mat2df64.create();return function(b,f,c,g){return h.vec2.transformMat2d(b,f,I(a,c,g,1))}}();e.toScreen=function(){var a=f.mat2df64.create();return function(b,f,c,g){return h.vec2.transformMat2d(b,f,e.getTransform(a,c,g,1))}}();e.translateBy=function(){var a=u.vec2f64.create(),b=f.mat2df64.create();return function(f,c,d){G(f,c);var k=O(c),r=f.targetGeometry;g.mat2d.fromRotation(b,S(c));g.mat2d.scale(b,b,u.vec2f64.fromValues(k,
k));h.vec2.transformMat2d(a,d,b);r.x+=a[0];r.y+=a[1];return f}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.common=n})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.mat2d=n})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(q,
e,n){function d(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var l=c[0],p=c[1],r=c[2],t=c[3],e=c[4];c=c[5];a[0]=d*l+g*p;a[1]=m*l+f*p;a[2]=d*r+g*t;a[3]=m*r+f*t;a[4]=d*e+g*c+h;a[5]=m*e+f*c+b;return a}function l(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a}Object.defineProperty(e,"__esModule",{value:!0});e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};e.identity=function(a){a[0]=1;a[1]=0;a[2]=
0;a[3]=1;a[4]=0;a[5]=0;return a};e.set=function(a,b,c,d,m,g,f){a[0]=b;a[1]=c;a[2]=d;a[3]=m;a[4]=g;a[5]=f;return a};e.invert=function(a,b){var c=b[0],d=b[1],m=b[2],g=b[3],f=b[4];b=b[5];var h=c*g-d*m;if(!h)return null;h=1/h;a[0]=g*h;a[1]=-d*h;a[2]=-m*h;a[3]=c*h;a[4]=(m*b-g*f)*h;a[5]=(d*f-c*b)*h;return a};e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};e.multiply=d;e.rotate=function(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var l=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*l;a[1]=m*c+f*l;a[2]=
d*-l+g*c;a[3]=m*-l+f*c;a[4]=h;a[5]=b;return a};e.scale=function(a,b,c){var d=b[1],m=b[2],g=b[3],f=b[4],h=b[5],l=c[0];c=c[1];a[0]=b[0]*l;a[1]=d*l;a[2]=m*c;a[3]=g*c;a[4]=f;a[5]=h;return a};e.translate=function(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var l=c[0];c=c[1];a[0]=d;a[1]=m;a[2]=g;a[3]=f;a[4]=d*l+g*c+h;a[5]=m*l+f*c+b;return a};e.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=
0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};e.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a};e.subtract=
l;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a};e.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};e.equals=function(a,b){var c=a[0],d=a[1],m=a[2],g=a[3],f=a[4];a=a[5];var h=b[0],l=b[1],p=b[2],r=b[3],t=b[4];b=b[5];return Math.abs(c-
h)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-l)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(m-p)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(p))&&Math.abs(g-r)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(r))&&Math.abs(f-t)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};e.mul=d;e.sub=l})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(q,e,n){Object.defineProperty(e,
"__esModule",{value:!0});e.mat2df64=n})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});e.create=function(){return[1,0,0,1,0,0]};e.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]};e.fromValues=function(e,d,l,a,b,c){return[e,d,l,a,b,c]};e.createView=function(e,d){return new Float64Array(e,d,6)}})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,
e,n){Object.defineProperty(e,"__esModule",{value:!0});q=function(){function d(d){var a=this;this.view=d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){a._updateParameters.state=a.view.state;a._updateParameters.stationary=a.view.stationary;a._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(a.updateEnabled){for(var b=a.view,c=b.labelManager,d=a.graphicsView,m=b.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&
null==a.layerViews}),g=m.length,f=b.state,h=0;h<m.length;h++)if(b=m[h],b.attached){var l=b.lastUpdateId;if(null==l||!a.stationary&&!b.moving)b.moving=!0,b.moveStart();l!==f.id&&b.viewChange();a.stationary&&b.moving&&(b.moving=!1,b.moveEnd());b.lastUpdateId=f.id}c&&c.lastUpdateId!==f.id&&(c.viewChange(),c.lastUpdateId=f.id);d&&d.lastUpdateId!==f.id&&(d.viewChange(),d.lastUpdateId=f.id);c=a._layerViewsTrash;for(d=0;d<c.length;d++)b=c[d],a._detachLayerView(b);for(d=c.length=0;d<g;d++)b=m[d],b.isFulfilled()&&
!b.attached&&a._attachLayerView(b);m=a._updateParameters;g=a._layerViewsToUpdate;b=g.slice();d=g.length=0;for(f=b;d<f.length;d++)b=f[d],!("attached"in b)||"attached"in b&&b.attached?b.processUpdate(m):g.push(b);g=a._updatablesToUpdate;b=g.slice();for(g=g.length=0;g<b.length;g++)b[g].processUpdate(m);0===a._layerViewsToUpdate.length&&0===a._updatablesToUpdate.length&&0===c.length&&a._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this._updateParameters=
{state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(a){Array.prototype.push.apply(d._layerViewsTrash,a.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(a){d.stationary=a;d.requestFrame()});this._frameTaskHandle=n.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&
(this.view.allLayerViews.forEach(function(a){return d._detachLayerView(a)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};d.prototype.requestLayerViewUpdate=function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);
this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();e.default=q})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(q,e,n,d,l,a,b,c,k,m){return function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}n(f,a);f.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};f.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(f.prototype,"_rotation",{get:function(){return new k({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"_zoom",{get:function(){return new m({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});f.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};f.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};f.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};f.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};f.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};f.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};f.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};f.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};f.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};d([b.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],f.prototype,"effectiveLODs",void 0);d([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],f.prototype,"effectiveMinScale",void 0);d([b.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],f.prototype,"effectiveMaxScale",void 0);d([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],f.prototype,"effectiveMinZoom",void 0);d([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],f.prototype,"effectiveMaxZoom",void 0);d([b.property()],f.prototype,"enabled",void 0);d([b.property({type:[c]})],f.prototype,"lods",void 0);d([b.property()],f.prototype,"minScale",void 0);d([b.property()],f.prototype,"maxScale",void 0);d([b.property()],f.prototype,
"minZoom",void 0);d([b.property()],f.prototype,"maxZoom",void 0);d([b.property()],f.prototype,"rotationEnabled",void 0);d([b.property()],f.prototype,"snapToZoom",void 0);d([b.property()],f.prototype,"view",void 0);d([b.property({type:k,dependsOn:["rotationEnabled"]})],f.prototype,"_rotation",null);d([b.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],f.prototype,"_defaultLODs",null);d([b.property({readOnly:!0,type:m,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
f.prototype,"_zoom",null);return f=d([b.subclass("esri.views.2d.MapViewConstraints")],f)}(b.declared(l,a))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,e,n,d,l,a){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}n(c,b);
k=c;c.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||(a.rotation=b.rotation);return a};c.prototype.clone=function(){return new k({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var k;d([a.property()],c.prototype,"enabled",void 0);d([a.property()],c.prototype,"rotationEnabled",void 0);return c=k=d([a.subclass("esri.views.2d.constraints.RotationConstraint")],c)}(a.declared(l))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(q,e,n,d,l,a,b){return function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.enabled=!0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}n(k,c);m=k;k.prototype.initialize=function(){var a=this,b,c,d=this.lods;c=this.minScale;b=this.maxScale;var k=this.minZoom,r=this.maxZoom,m=-1,l=-1,e=!1,n=!1;
0!==c&&0!==b&&c<b&&(b=[b,c],c=b[0],b=b[1]);if(d&&d.length){d=d.map(function(a){return a.clone()});d.sort(function(a,b){return b.scale-a.scale});d.forEach(function(a,b){return a.level=b});for(var v,y=0,z=d;y<z.length;y++){var q=z[y];!e&&0<c&&c>=q.scale&&(m=q.level,e=!0);!n&&0<b&&b>=q.scale&&(l=v?v.level:-1,n=!0);v=q}-1===k&&(k=0===c?0:m);-1===r&&(r=0===b?d.length-1:l);k=Math.max(k,0);k=Math.min(k,d.length-1);r=Math.max(r,0);r=Math.min(r,d.length-1);k>r&&(c=[r,k],k=c[0],r=c[1]);c=d[k].scale;b=d[r].scale;
d.splice(0,k);d.splice(r-k+1,d.length);d.forEach(function(b,f){a._lodByScale[b.scale]=b;a._scales[f]=b.scale});this._set("effectiveLODs",d);this._set("effectiveMinZoom",k);this._set("effectiveMaxZoom",r)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",b)};k.prototype.constrain=function(a,b){if(!this.enabled||b&&a.scale===b.scale)return a;var f=this.effectiveMinScale,c=this.effectiveMaxScale,g=a.targetGeometry,d=b&&b.targetGeometry,k=0!==f&&a.scale>f;if(0!==c&&a.scale<c||k)f=k?f:c,d&&
(b=(f-b.scale)/(a.scale-b.scale),g.x=d.x+(g.x-d.x)*b,g.y=d.y+(g.y-d.y)*b),a.scale=f;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};k.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};k.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;
if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};k.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c=0,g=b.length-1,d,k;for(c;c<g;c++){d=b[c];k=b[c+1];if(d<=a)return c+this.effectiveMinZoom;if(k===a)return c+1+this.effectiveMinZoom;if(d>a&&k<a)return c+1-(a-k)/(d-k)+this.effectiveMinZoom}return c};k.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);
return this.zoomToScale(Math.round(a))};k.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};k.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};k.prototype.clone=function(){return new m({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};k.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,d,g){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var m;d([a.property({readOnly:!0})],k.prototype,"effectiveLODs",void 0);d([a.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);d([a.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);d([a.property({readOnly:!0})],k.prototype,
"effectiveMinScale",void 0);d([a.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);d([a.property()],k.prototype,"enabled",void 0);d([a.property({type:[b]})],k.prototype,"lods",void 0);d([a.property()],k.prototype,"minZoom",void 0);d([a.property()],k.prototype,"maxZoom",void 0);d([a.property()],k.prototype,"minScale",void 0);d([a.property()],k.prototype,"maxScale",void 0);d([a.property()],k.prototype,"snapToZoom",void 0);return k=m=d([a.subclass("esri.views.2d.constraints.ZoomConstraint")],
k)}(a.declared(l))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),function(q,e,n,d,l,a,b,c,k,m){var g=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.left=0;a.top=0;a.right=0;a.bottom=0;return a}n(c,b);d([a.property()],
c.prototype,"left",void 0);d([a.property()],c.prototype,"top",void 0);d([a.property()],c.prototype,"right",void 0);d([a.property()],c.prototype,"bottom",void 0);return c=d([a.subclass("esri.views.2d.PaddedViewState.Padding")],c)}(a.declared(l));return function(f){function h(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];var h=f.apply(this,a)||this;h.content=new m;h._updateContent=function(){var a=c.vec2f64.create();return function(){var c=h._get("size"),f=h._get("padding");if(c&&f){var d=
h.content;b.vec2.set(a,f.left+f.right,f.top+f.bottom);b.vec2.subtract(a,c,a);b.vec2.copy(d.size,a);if(c=d.viewpoint)h.viewpoint=c}}}();h.watch(["size","padding"],h._updateContent,!0);h.padding=new g;h.size=[0,0];return h}n(h,f);Object.defineProperty(h.prototype,"padding",{set:function(a){this._set("padding",a||new g)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;k.addPadding(b,a,this._get("size"),this._get("padding"));
a=this._viewpoint2D;var c=b.targetGeometry;a.center[0]=c.x;a.center[1]=c.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=c.spatialReference;this._update()}},enumerable:!0,configurable:!0});d([a.property()],h.prototype,"content",void 0);d([a.property({type:g})],h.prototype,"padding",null);d([a.property()],h.prototype,"viewpoint",null);return h=d([a.subclass("esri.views.2d.PaddedViewState")],h)}(a.declared(m))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w){var x=[0,0];return function(b){function e(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=b.apply(this,a)||this;a._viewpoint2D={center:t.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new l.Extent;a.id=0;a.inverseTransform=f.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=f.mat2df64.create();a.transformNoRotation=f.mat2df64.create();a.displayMat3=u.mat3f32.create();a.displayViewMat3=
u.mat3f32.create();a.viewMat3=u.mat3f32.create();a.viewMat2d=g.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}n(e,b);v=e;Object.defineProperty(e.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});e.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=w.copy(c,a.viewpoint),this._set("size",p.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};e.prototype.clone=function(){return new v({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};e.prototype.toMap=function(a,b,c){if(A.isVec2(b))return p.vec2.transformMat2d(a,b,this.inverseTransform);x[0]=b;x[1]=c;return p.vec2.transformMat2d(a,x,this.inverseTransform)};e.prototype.toScreen=function(a,b,c){if(A.isVec2(b))return p.vec2.transformMat2d(a,b,this.transform);x[0]=b;x[1]=c;return p.vec2.transformMat2d(a,x,this.transform)};e.prototype.toScreenNoRotation=function(a,b,c){if(A.isVec2(b))return p.vec2.transformMat2d(a,b,this.transformNoRotation);x[0]=b;x[1]=
c;return p.vec2.transformMat2d(a,x,this.transformNoRotation)};e.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint,this.size)};e.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,f=this._get("pixelRatio")||1,d=this._get("size");w.getMatrix(a,c,d,b,0,f);return a};e.prototype._update=function(){var b=this._viewpoint2D,c=b.center,f=b.spatialReference,d=b.scale,g=b.rotation,b=this._get("pixelRatio")||1,t=this._get("size");this._set("id",this.id+1);var e=new a({targetGeometry:new l.Point(c[0],
c[1],f),scale:d,rotation:g});this._set("viewpoint",e);if(t&&f&&d)return this.resolution=w.getResolution(e),this.rotation=g,this.scale=d,this.spatialReference=f,p.vec2.copy(this.center,c),h.mat3.set(this.displayMat3,0!==t[0]?2/t[0]:0,0,0,0,0!==t[1]?-2/t[1]:0,0,-1,1,1),d=h.mat3.identity(this.viewMat3),c=r.vec2f32.fromValues(t[0]/2,t[1]/2),f=r.vec2f32.fromValues(-t[0]/2,-t[1]/2),g=k.common.toRadian(g),h.mat3.translate(d,d,c),h.mat3.rotate(d,d,g),h.mat3.translate(d,d,f),h.mat3.multiply(this.displayViewMat3,
this.displayMat3,d),d=m.mat2d.identity(this.viewMat2d),m.mat2d.translate(d,d,c),m.mat2d.rotate(d,d,g),m.mat2d.translate(d,d,f),w.getExtent(this.extent,e,t),w.getTransform(this.transform,e,t,b),m.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,e,t,b),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var v;d([c.property({readOnly:!0})],e.prototype,"id",void 0);d([c.property({value:1,json:{write:!0}})],e.prototype,
"pixelRatio",null);d([c.property({json:{write:!0}})],e.prototype,"size",null);d([c.property({type:a,json:{write:!0}})],e.prototype,"viewpoint",null);return e=v=d([c.subclass("esri.views.2d.ViewState")],e)}(c.declared(b))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.mat2df32=n})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(q,
e){Object.defineProperty(e,"__esModule",{value:!0});e.create=function(){var e=new Float32Array(6);e[0]=1;e[3]=1;return e};e.clone=function(e){var d=new Float32Array(6);d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[5]=e[5];return d};e.fromValues=function(e,d,l,a,b,c){var k=new Float32Array(6);k[0]=e;k[1]=d;k[2]=l;k[3]=a;k[4]=b;k[5]=c;return k};e.createView=function(e,d){return new Float32Array(e,d,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.mat3=n})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,e,n){function d(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4],l=b[5],p=b[6],r=b[7];b=b[8];var t=c[0],e=c[1],n=c[2],x=c[3],v=c[4],y=c[5],z=c[6],q=c[7];c=c[8];a[0]=t*d+e*f+n*p;a[1]=t*m+e*h+n*r;a[2]=t*g+e*l+n*b;a[3]=x*d+v*f+y*p;a[4]=x*m+v*h+y*r;a[5]=x*g+v*l+y*b;a[6]=z*d+q*f+c*p;a[7]=z*m+q*h+c*r;a[8]=z*g+q*l+c*b;return a}function l(a,
b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a}Object.defineProperty(e,"__esModule",{value:!0});e.fromMat4=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a};e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};e.set=function(a,b,c,d,m,g,f,h,l,p){a[0]=b;a[1]=c;a[2]=d;
a[3]=m;a[4]=g;a[5]=f;a[6]=h;a[7]=l;a[8]=p;return a};e.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],m=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=m}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a};e.invert=function(a,b){var c=b[0],d=b[1],m=b[2],g=b[3],f=b[4],h=b[5],l=b[6],p=b[7];b=b[8];var r=b*f-h*p,t=-b*g+h*l,e=p*g-f*l,n=c*r+d*t+m*
e;if(!n)return null;n=1/n;a[0]=r*n;a[1]=(-b*d+m*p)*n;a[2]=(h*d-m*f)*n;a[3]=t*n;a[4]=(b*c-m*l)*n;a[5]=(-h*c+m*g)*n;a[6]=e*n;a[7]=(-p*c+d*l)*n;a[8]=(f*c-d*g)*n;return a};e.adjoint=function(a,b){var c=b[0],d=b[1],m=b[2],g=b[3],f=b[4],h=b[5],l=b[6],p=b[7];b=b[8];a[0]=f*b-h*p;a[1]=m*p-d*b;a[2]=d*h-m*f;a[3]=h*l-g*b;a[4]=c*b-m*l;a[5]=m*g-c*h;a[6]=g*p-f*l;a[7]=d*l-c*p;a[8]=c*f-d*g;return a};e.determinant=function(a){var b=a[3],c=a[4],d=a[5],m=a[6],g=a[7],f=a[8];return a[0]*(f*c-d*g)+a[1]*(-f*b+d*m)+a[2]*
(g*b-c*m)};e.multiply=d;e.translate=function(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4],l=b[5],p=b[6],r=b[7];b=b[8];var t=c[0];c=c[1];a[0]=d;a[1]=m;a[2]=g;a[3]=f;a[4]=h;a[5]=l;a[6]=t*d+c*f+p;a[7]=t*m+c*h+r;a[8]=t*g+c*l+b;return a};e.rotate=function(a,b,c){var d=b[0],m=b[1],g=b[2],f=b[3],h=b[4],l=b[5],p=b[6],r=b[7];b=b[8];var t=Math.sin(c);c=Math.cos(c);a[0]=c*d+t*f;a[1]=c*m+t*h;a[2]=c*g+t*l;a[3]=c*f-t*d;a[4]=c*h-t*m;a[5]=c*l-t*g;a[6]=p;a[7]=r;a[8]=b;return a};e.scale=function(a,b,c){var d=c[0];
c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};e.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};e.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromMat2d=function(a,b){a[0]=
b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};e.fromQuat=function(a,b){var c=b[0],d=b[1],m=b[2];b=b[3];var g=c+c,f=d+d,h=m+m,c=c*g,l=d*g,d=d*f,p=m*g,r=m*f,m=m*h,g=b*g,f=b*f;b*=h;a[0]=1-d-m;a[3]=l-b;a[6]=p+f;a[1]=l+b;a[4]=1-c-m;a[7]=r-g;a[2]=p-f;a[5]=r+g;a[8]=1-c-d;return a};e.normalFromMat4Legacy=function(a,b){var c=b[0],d=b[1],m=b[2],g=b[4],f=b[5],h=b[6],l=b[8],p=b[9];b=b[10];var r=b*f-h*p,t=-b*g+h*l,e=p*g-f*l,n=c*r+d*t+m*e;if(!n)return null;n=1/n;a[0]=r*n;
a[1]=(-b*d+m*p)*n;a[2]=(h*d-m*f)*n;a[3]=t*n;a[4]=(b*c-m*l)*n;a[5]=(-h*c+m*g)*n;a[6]=e*n;a[7]=(-p*c+d*l)*n;a[8]=(f*c-d*g)*n;return a};e.normalFromMat4=function(a,b){var c=b[0],d=b[1],m=b[2],g=b[3],f=b[4],h=b[5],l=b[6],p=b[7],r=b[8],e=b[9],n=b[10],w=b[11],x=b[12],v=b[13],y=b[14];b=b[15];var z=c*h-d*f,q=c*l-m*f,C=c*p-g*f,E=d*l-m*h,B=d*p-g*h,F=m*p-g*l,G=r*v-e*x,K=r*y-n*x,r=r*b-w*x,I=e*y-n*v,e=e*b-w*v,n=n*b-w*y,w=z*n-q*e+C*I+E*r-B*K+F*G;if(!w)return null;w=1/w;a[0]=(h*n-l*e+p*I)*w;a[1]=(l*r-f*n-p*K)*w;
a[2]=(f*e-h*r+p*G)*w;a[3]=(m*e-d*n-g*I)*w;a[4]=(c*n-m*r+g*K)*w;a[5]=(d*r-c*e-g*G)*w;a[6]=(v*F-y*B+b*E)*w;a[7]=(y*C-x*F-b*q)*w;a[8]=(x*B-v*C+b*z)*w;return a};e.projection=function(a,b,c){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/c;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],
2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a};e.subtract=l;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a};e.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=
b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};e.equals=function(a,b){var c=a[0],d=a[1],m=a[2],g=a[3],f=a[4],h=a[5],l=a[6],p=a[7];a=a[8];var r=b[0],e=b[1],A=b[2],w=b[3],x=b[4],v=b[5],y=b[6],z=b[7];b=b[8];return Math.abs(c-r)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(d-e)<=n.EPSILON*
Math.max(1,Math.abs(d),Math.abs(e))&&Math.abs(m-A)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-w)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(f-x)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(h-v)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(l-y)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(p-z)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};e.mul=d;e.sub=l})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require",
"exports","./factories/mat3f32"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.mat3f32=n})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});e.create=function(){var e=new Float32Array(9);e[0]=1;e[4]=1;e[8]=1;return e};e.clone=function(e){var d=new Float32Array(9);d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[5]=e[5];d[6]=e[6];d[7]=e[7];d[8]=e[8];return d};e.fromValues=function(e,
d,l,a,b,c,k,m,g){var f=new Float32Array(9);f[0]=e;f[1]=d;f[2]=l;f[3]=a;f[4]=b;f[5]=c;f[6]=k;f[7]=m;f[8]=g;return f};e.createView=function(e,d){return new Float32Array(e,d,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.vec2f32=n})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});
e.create=function(){return new Float32Array(2)};e.clone=function(e){var d=new Float32Array(2);d[0]=e[0];d[1]=e[1];return d};e.fromValues=function(e,d){var l=new Float32Array(2);l[0]=e;l[1]=d;return l};e.createView=function(e,d){return new Float32Array(e,d,2)}})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(q,e){function n(d){return d instanceof Float32Array&&2<=d.length}function d(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(e,"__esModule",
{value:!0});e.isVec2f32=n;e.isVec2f64=d;e.isVec2=function(l){return n(l)||d(l)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});e.TileInfoView=n;e.TileKey=d;e.TileQueue=l;e.TileStrategy=a})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(q,e,n,d,l,a,b){var c=new a("0/0/0/0"),k=function(){function a(a,b,c,d,g,k,m,l){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=g;this.rightAdjust=k;this.leftBound=m;this.rightBound=l}a.create=function(b,c){var f;b[1]>c[1]&&(f=[c,b],b=f[0],c=f[1]);f=b[0];b=b[1];var d=c[0];c=c[1];var g=d-f,h=c-b,h=0!==h?g/h:0,k=(Math.ceil(b)-b)*h,m=(Math.floor(b)-b)*h;return new a(f,Math.floor(b),Math.ceil(c),h,0>g?k:m,0>g?m:k,0>g?d:f,0>g?f:d)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),m=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var f=a.lods.slice();f.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=f.map(function(c){return d.create(a,
c,b)});f.forEach(function(a,b){c._infoByLevel[a.level]=g[b];c._infoByScale[a.scale]=g[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,d){void 0===d&&(d=!1);c.set(b);return(b=this._infoByLevel[c.level])?b.getTileBounds(a,c,
d):a};a.prototype.getTileCoords=function(a,b,d){void 0===d&&(d=!1);c.set(b);return(b=this._infoByLevel[c.level])?b.getTileCoords(a,c,d):a};a.prototype.getTileCoverage=function(a,c,d){void 0===c&&(c=192);void 0===d&&(d="closest");d="closest"===d?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var f=l.pool.acquire(d),g=this._wrap,h;h=Infinity;var e=-Infinity,u,n,v=f.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-c;m[1][0]=m[2][0]=a.size[0]+c;m[2][1]=m[3][1]=a.size[1]+c;for(c=0;c<
m.length;c++){var y=m[c];a.toMap(y,y);y[0]=d.getColumnForX(y[0]);y[1]=d.getRowForY(y[1])}a=[];y=3;for(c=0;4>c;c++){if(m[c][1]!==m[y][1]){var z=k.create(m[c],m[y]);h=Math.min(z.ymin,h);e=Math.max(z.ymax,e);void 0===a[z.ymin]&&(a[z.ymin]=[]);a[z.ymin].push(z)}y=c}if(null==h||null==e||100<e-h)return null;for(y=[];h<e;){null!=a[h]&&(y=y.concat(a[h]));u=Infinity;n=-Infinity;for(c=y.length-1;0<=c;c--)z=y[c],u=Math.min(u,z.getLeftCol()),n=Math.max(n,z.getRightCol());u=Math.floor(u);n=Math.floor(n);if(h>=
d.first[1]&&h<=d.last[1])if(g)if(d.size[0]<d.worldSize[0])for(z=Math.floor(n/d.worldSize[0]),c=Math.floor(u/d.worldSize[0]);c<=z;c++)v.push(new b(h,Math.max(d.getFirstColumnForWorld(c),u),Math.min(d.getLastColumnForWorld(c),n)));else v.push(new b(h,u,n));else u>d.last[0]||n<d.first[0]||(u=Math.max(u,d.first[0]),n=Math.min(n,d.last[0]),v.push(new b(h,u,n)));h+=1;for(c=y.length-1;0<=c;c--)z=y[c],z.ymax>=h?z.incrRow():y.splice(c,1)}return f};a.prototype.getTileParentId=function(a){c.set(a);a=this._lodInfos.indexOf(this._infoByLevel[c.level])-
1;if(0>a)return null;this._getTileIdAtLOD(c,this._lodInfos[a],c);return c.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){c.set(b);b=this._infoByLevel[c.level];var f=a.lodInfo;if(f.resolution>b.resolution){this._getTileIdAtLOD(c,f,c);for(var d=f.denormalizeCol(c.col,c.world),g=0,h=a.spans;g<h.length;g++){var k=
h[g];if(k.row===c.row&&k.colFrom<=d&&k.colTo>=d)return!0}}if(f.resolution<b.resolution){h=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=h[0];var d=h[1],g=h[2],h=h[3],m=b.denormalizeCol(c.col,c.world),k=f.getColumnForX(b.getXForColumn(m)),l=f.getRowForY(b.getYForRow(c.row)),m=f.getColumnForX(b.getXForColumn(m+1))-1;b=f.getRowForY(b.getYForRow(c.row+1))-1;
return!(k>h||m<g||l>d||b<a)}var e=f.denormalizeCol(c.col,c.world);return a.spans.some(function(a){return a.row===c.row&&a.colFrom<=e&&a.colTo>=e})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=n.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];
for(var c=1;c<b.length-1;c++)if(a>b[c])return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c,f,d){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-
1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var f=this._infoByLevel[c.level];a.set(c);if(b.resolution<f.resolution)return null;if(b.resolution===f.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*f.resolution/b.resolution+.01);a.row=Math.floor(c.row*f.resolution/b.resolution+.01);return a};
return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,e,n,d){function l(a,c,d){a[0]=c;a[1]=d;return a}var a=new d("0/0/0/0");return function(){function b(a,b,d,g,f,h,l,p,r,e,n,w){this.level=a;this.resolution=b;this.scale=d;this.origin=g;this.first=f;this.last=h;this.size=l;this.norm=p;this.worldStart=r;this.worldEnd=e;this.worldSize=n;this.wrap=w}b.create=function(a,d,m){var c=n.getInfo(a.spatialReference),
f=[a.origin.x,a.origin.y],h=[a.size[0]*d.resolution,a.size[1]*d.resolution],k=[-Infinity,-Infinity],p=[Infinity,Infinity],r=[Infinity,Infinity];m&&(l(k,Math.max(0,Math.floor((m.xmin-f[0])/h[0])),Math.max(0,Math.floor((f[1]-m.ymax)/h[1]))),l(p,Math.max(0,Math.floor((m.xmax-f[0])/h[0])),Math.max(0,Math.floor((f[1]-m.ymin)/h[1]))),l(r,p[0]-k[0]+1,p[1]-k[1]+1));var e;a.isWrappable?(a=[Math.ceil(Math.round(2*c.origin[1]/d.resolution)/a.size[0]),r[1]],c=[Math.floor((c.origin[0]-f[0])/h[0]),k[1]],m=[a[0]+
c[0]-1,p[1]],e=!0):(c=k,m=p,a=r,e=!1);return new b(d.level,d.resolution,d.scale,f,k,p,r,h,c,m,a,e)};b.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};b.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};b.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};b.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};b.prototype.getLastColumnForWorld=
function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};b.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};b.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};b.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};b.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};b.prototype.getTileBounds=function(b,d,m){void 0===m&&(m=!1);a.set(d);var c=m?a.col:this.denormalizeCol(a.col,a.world),f=a.row;d=this.getXForColumn(c);
m=this.getYForRow(f+1);c=this.getXForColumn(c+1);f=this.getYForRow(f);b[0]=d;b[1]=m;b[2]=c;b[3]=f;return b};b.prototype.getTileCoords=function(b,d,m){void 0===m&&(m=!1);a.set(d);d=m?a.col:this.denormalizeCol(a.col,a.world);Array.isArray(b)?l(b,this.getXForColumn(d),this.getYForRow(a.row)):(b.x=this.getXForColumn(d),b.y=this.getYForRow(a.row));return b};return b}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,e,n){return function(){function d(d,
a,b,c){this.set(d,a,b,c)}d.from=function(l,a,b,c){return d.pool.acquire(l,a,b,c)};d.getId=function(d,a,b,c){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+a+"/"+b+"/"+c};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&
this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,a,b,c){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),a=d[1],b=d[2],c=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(a),this.col=parseFloat(b),this.world=parseFloat(c)):(this.level=+d,this.row=+a,this.col=+b,this.world=+c||0);return this};
d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var l=this.level+1,a=this.row<<1,b=this.col<<1,c=this.world;return[d.pool.acquire(l,a,b,c),d.pool.acquire(l,a,b+1,c),d.pool.acquire(l,a+1,b,c),d.pool.acquire(l,a+1,b+1,c)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.sort=function(e){return e.map(function(a){return d.from(a)}).sort(function(a,b){return a.compareRowMajor(b)}).map(function(a){return a.id})};
d.pool=new n(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(q,e,n,d,l){return function(){function a(a){this.lodInfo=a;this.spans=n.acquire()}a.prototype.release=function(){for(var a=0,c=this.spans;a<c.length;a++)l.pool.release(c[a]);n.release(this.spans)};a.prototype.forEach=function(a,c){var b=this.spans,d=this.lodInfo,g=d.level;if(0!==b.length)for(var f=0;f<b.length;f++)for(var h=
b[f],e=h.row,p=h.colTo,h=h.colFrom;h<=p;h++)a.call(c,g,e,d.normalizeCol(h),d.getWorldForColumn(h))};a.pool=new d(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(q,e,n){return function(){function d(d,a,b){this.row=d;this.colFrom=a;this.colTo=b}d.pool=new n(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../../views/support/QueueProcessor".split(" "),
function(q,e,n,d,l,a,b,c){function k(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var m=new Set,g=[],f=new Map,h=[0,0];return function(e){function p(a){a=e.call(this,a)||this;a._keysToRequests=new Map;a.concurrency=6;a.process=null;a.strategy="scale-first";a.tileInfoView=null;a.tileServers=null;return a}n(p,e);p.prototype.initialize=function(){var a=this,b="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this),f=this.tileServers,d=this.concurrency,
g=this.process;this._queues=f&&0<f.length?f.map(function(f){return new c({concurrency:d,process:function(b){b=a._keysToRequests.get(b);return g(b,f)},peeker:b})}):[new c({concurrency:d,process:function(b){b=a._keysToRequests.get(b);return g(b)},peeker:b})]};p.prototype.destroy=function(){this.clear();for(var a=0,b=this._queues;a<b.length;a++)b[a].destroy();this._queues=null};Object.defineProperty(p.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});p.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear();this.notifyChange("updating")};p.prototype.find=function(a,b){var c=this;b=0;for(var f=this._queues;b<
f.length;b++){var d=f[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(d)return d}};p.prototype.getPromise=function(a){a="string"===typeof a?a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var f=c[b].get(a);if(f)return f}};p.prototype.getRequest=function(a){return this._keysToRequests.get("string"===typeof a?a:a.id)};p.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};p.prototype.isOngoing=function(a){var b="string"===
typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};p.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};p.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.getPromise(c);var f=this._queues[a.key.row%this._queues.length].push(c),d=function(){b._keysToRequests.delete(c);b.notifyChange("updating")};this._keysToRequests.set(c,a);f.then(d,d);this.notifyChange("updating");return f};p.prototype.reset=function(){for(var a=
0,b=this._queues;a<b.length;a++)b[a].reset();this.notifyChange("updating")};p.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};p.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,h=0;h<a.length;h++){var e=this._keysToRequests.get(a[h]),p=this.tileInfoView.getTileScale(e.key);f.has(p)||(f.set(p,[]),c=Math.max(p,c),d=Math.min(p,d));f.get(p).push(e.key);m.add(p)}var r=
this.state.scale;f.has(r)||(k(g,m),g.sort(),r=g.reduce(function(a,b,c,f){return Math.abs(b-r)<Math.abs(a-r)?b:a},g[0]));r=Math.min(r,c);r=Math.max(r,d);a=f.get(r);var l=b.getClosestInfoForScale(r),n=l.getColumnForX(this.state.center[0]),u=l.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=l.denormalizeCol(a.col,a.world),f=l.denormalizeCol(b.col,b.world);return Math.sqrt((n-c)*(n-c)+(u-a.row)*(u-a.row))-Math.sqrt((n-f)*(n-f)+(u-b.row)*(u-b.row))});m.clear();f.clear();return a[0].id};p.prototype._peekByCenterFirst=
function(a){if(!this.state)return a[0];for(var c=this.tileInfoView,f=this.state.center,d=Number.POSITIVE_INFINITY,g=null,k=0;k<a.length;k++){var m=this._keysToRequests.get(a[k]);c.getTileCoords(h,m.key);var p=b.vec2.distance(h,f);p<d&&(d=p,g=m.key)}return g.id};d([a.property({constructOnly:!0})],p.prototype,"concurrency",void 0);d([a.property({constructOnly:!0})],p.prototype,"process",void 0);d([a.property()],p.prototype,"state",void 0);d([a.property({constructOnly:!0})],p.prototype,"strategy",void 0);
d([a.property({constructOnly:!0})],p.prototype,"tileInfoView",void 0);d([a.property({constructOnly:!0})],p.prototype,"tileServers",void 0);d([a.property({readOnly:!0})],p.prototype,"updating",null);return p=d([a.subclass()],p)}(a.declared(l))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(q,e,n,d,l,a){return function(){function b(a){var b=this;this._apiPromises=new Map;this._processingItems=
new Map;this._isPaused=!1;this._task=this._schedule=null;this._pendingProcessing=0;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);a.ordered&&(this.ordered=!0,this._itemsToProcess=[]);this._queue=new l({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.priority&&c&&(this._task=c.registerTask(a.priority,function(a){return b.update(a)},function(){return b.needsUpdate()}))}b.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),
this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length+this._pendingProcessing},enumerable:!0,configurable:!0});b.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});
this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};b.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(f,g){a.call(b,g)&&(d=c._apiPromises.get(g).promise)});return d};b.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};b.prototype.isOngoing=function(a){return this._processingItems.has(a)};b.prototype.has=function(a){return this._apiPromises.has(a)};b.prototype.pause=function(){this._isPaused||(this._isPaused=
!0,this._cancelNext())};b.prototype.push=function(a){var b=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var c=d.createDeferred(function(c){var f=b._processingItems.get(a);f?f.resultPromise.cancel(c):(b._remove(a),b._scheduleNext())});this._add(a,c);this._scheduleNext();return c.promise};b.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var d=a[b];d.resultPromise.isFulfilled()?
this._processReset(d):(d.isReset=!0,d.resultPromise.cancel())}};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};b.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b.prototype._scheduleNext=function(){var b=this;this._task||this._isPaused||
this._schedule||(this._schedule=a.schedule(function(){b._schedule=null;b._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};b.prototype._processResult=function(a,b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};b.prototype._processError=function(a,b){a.isReset?this._processReset(a):(this._remove(a.item),
this._scheduleNext(),a.dfd.reject(b))};b.prototype._processReset=function(a){this._remove(a.item);this._add(a.item,a.dfd);this._scheduleNext()};b.prototype._processOrdered=function(a,b){var c=this;if(a.isReset)this._processReset(a);else{a.result=b;var d=!1;this._processingItems.forEach(function(a){d||(a.result?c._itemsToProcess.push(a):d=!0)});a=0;for(b=this._itemsToProcess;a<b.length;a++){var f=b[a];!1===f.result.ok?this._processError(f,f.result.error):this._processResult(f,f.result.value)}this._itemsToProcess.length=
0}};b.prototype._process=function(a){var b=this;if(!n.isNone(a)){var c=this._apiPromises.get(a);this._pendingProcessing++;var d=this.process(a);this._pendingProcessing--;if(d&&"function"===typeof d.then){var f={item:a,resultPromise:d,result:null,dfd:c,isReset:!1};this._processingItems.set(a,f);this.ordered?d.then(function(a){return b._processOrdered(f,{ok:!0,value:a})},function(a){return b._processOrdered(f,{ok:!1,error:a})}):d.then(function(a){return b._processResult(f,a)},function(a){return b._processError(f,
a)})}else c.resolve(d),this._remove(a)}};b.prototype._add=function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};b.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return b}()})},"esri/core/Queue":function(){define(["require","exports"],function(q,e){return function(){function e(d){this._items=
[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;d&&d.peeker&&(this._peeker=d.peeker)}Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});e.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};e.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};e.prototype.push=function(d){this.contains(d)||this._add(d)};e.prototype.contains=function(d){return 0<this._length&&
this._itemSet.has(d)};e.prototype.pop=function(){if(0!==this._length){var d=this.peek();this._remove(d);return d}};e.prototype.remove=function(d){this.contains(d)&&this._remove(d)};e.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};e.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return e}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./TileKey"],function(q,e,n,d){var l=new d(0,0,0,0),a=new Map,b=[],c=[];return function(){function d(a){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=
a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}d.prototype.destroy=function(){this.tileIndex.clear()};d.prototype.update=function(d){var g=this,f=this.resampling,h=this.tileIndex,k=this.tileInfoView.getTileCoverage(d.state,this.buffer,this.coveragePolicy);c.length=0;b.length=0;a.clear();if(k){var m=this.tileInfoView.tileInfo,e=m.minScale,t=m.maxScale,m=k.spans,n=k.lodInfo,q=n.level,x=d.state.scale,v=!d.stationary&&x>this._previousScale;this._previousScale=x;this.tiles.length=0;if(!f&&(x>
e||x<t))return this.tiles.length=0,a.clear(),h.forEach(function(a){g.releaseTile(a)}),h.clear(),c.length=0,b.length=0,a.clear(),!0;h.forEach(function(a){return a.visible=!0});t=e=0;if(0<m.length)for(x=0;x<m.length;x++){d=m[x];for(var y=d.row,z=d.colTo,D=d.colFrom;D<=z;D++)e++,d=l.set(q,y,n.normalizeCol(D),n.getWorldForColumn(D)).id,h.has(d)?(f=h.get(d),f.isReady?(a.set(d,f),t++):v||this._addParentTile(d,a)):(f=this.acquireTile(l),this.tileIndex.set(d,f),v||this._addParentTile(d,a))}var C=t===e;h.forEach(function(d,
f){l.set(f);if(!a.has(f)){var h=g.tileInfoView.intersects(k,l);!h||!v&&C?"purge"===g.cachePolicy?l.level===q&&h||b.push(f):(l.level>q||!h)&&b.push(f):d.isReady?c.push(f):l.level>q&&b.push(f)}});for(m=0;m<c.length;m++)d=c[m],(f=h.get(d))&&f.isReady&&a.set(d,f);for(m=0;m<b.length;m++)d=b[m],f=h.get(d),this.releaseTile(f),h["delete"](d);a.forEach(function(a){return g.tiles.push(a)});h.forEach(function(b){a.has(b.key.id)||(b.visible=!1)});return C}};d.prototype.clear=function(){var a=this,b=this.tileIndex;
b.forEach(function(b){a.releaseTile(b)});b.clear()};d.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}};return d}()})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,w,x,v){var y={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},z={zoomIn:["\x3d","+"],zoomOut:["-","_"]},D={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(e){function l(){var b=null!==e&&e.apply(this,arguments)||this;b._handles=new a;return b}n(l,e);l.prototype.initialize=function(){var a=this;this.viewEvents=new x.ViewEvents(this.view);
this._handles.add([b.whenNot(this.view,"ready",function(){return a._disconnect()}),b.when(this.view,"ready",function(){return a._connect()})])};l.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};l.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};l.prototype._connect=
function(){var a=new A.BrowserEventSource(this.view.surface,this.view.input),b=new w.InputManager(a);b.installHandlers("prevent-context-menu",[new v.PreventContextMenu]);b.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new f.GamepadNavigation(this.view),new r.MouseWheelZoom(this.view),new k.DoubleClickZoom(this.view),new m.DragPan(this.view,"primary"),new h.KeyPan(this.view,y),new p.KeyZoom(this.view,z),new u.KeyRotate(this.view,D),new g.DragRotate(this.view,"secondary"),new k.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(b);this._source=a;this._inputManager=b};d([c.property()],l.prototype,"view",void 0);return l=d([c.subclass("esri.views.2d.input.MapViewInputManager")],l)}(c.declared(l))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(q,e,n,d,l){Object.defineProperty(e,"__esModule",{value:!0});q=function(a){function b(b,d){var c=
a.call(this,!0)||this;c.view=b;c.registerIncoming("double-click",d,function(a){return c._handleDoubleClick(a,d)});return c}n(b,a);b.prototype._handleDoubleClick=function(a,b){l.eventMatchesPointerAction(a.data,"primary")&&(a.stopPropagation(),b?this.view.mapViewNavigation.zoomOut([a.data.x,a.data.y]):this.view.mapViewNavigation.zoomIn([a.data.x,a.data.y]))};return b}(d.InputHandler);e.DoubleClickZoom=q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,
"__esModule",{value:!0});e.eventMatchesPointerAction=function(e,d){switch(d){case "primary":return"touch"===e.pointerType||0===e.button;case "secondary":return"touch"!==e.pointerType&&2===e.button;case "tertiary":return"touch"!==e.pointerType&&1===e.button}};e.eventMatchesMousePointerAction=function(e,d){if("touch"===e.pointerType)return!1;switch(d){case "primary":return 0===e.button;case "secondary":return 2===e.button;case "tertiary":return 1===e.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});q=function(b){function c(c,m,g){var f=b.call(this,!0)||this;f.view=c;f.pointerAction=m;f.registerIncoming("drag",g,function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(a){return f.stopMomentumNavigation()});var h=f.view.mapViewNavigation;f.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){h.pan.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){h.pan.update(f.view,b.data);
b.stopPropagation()},end:function(a,b){h.pan.end(f.view,b.data);b.stopPropagation()},condition:function(b,c){return 1===b&&a.eventMatchesPointerAction(c.data,f.pointerAction)}});return f}n(c,b);c.prototype._handleDrag=function(a){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(a)};c.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return c}(l.InputHandler);
e.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});q=function(){function e(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}e.prototype.handle=function(d){var e=d.data,a=e.pointers.size;switch(e.action){case "start":this.currentCount=a;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=a;this.emitStart(d);
break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=a;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};e.prototype.emitStart=function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};e.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,
d,this.startEvent)};e.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return e}();e.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});
q=function(b){function c(c,e,g){var f=b.call(this,!0)||this;f.view=c;f.pointerAction=e;var h=f.view.mapViewNavigation;f.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){h.rotate.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){h.rotate.update(f.view,b.data);b.stopPropagation()},end:function(a,b){h.rotate.end(f.view,b.data);b.stopPropagation()},condition:function(b,c){return 1===b&&a.eventMatchesPointerAction(c.data,f.pointerAction)}});f.registerIncoming("drag",g,function(a){return f.dragEventSeparator.handle(a)});
return f}n(c,b);return c}(l.InputHandler);e.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,e,n,d,l,a,b,c,k){Object.defineProperty(e,"__esModule",{value:!0});q=function(c){function h(a){var b=c.call(this,!0)||this;
b.view=a;b.frameTask=null;b.watchHandles=new d;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}n(h,c);h.prototype.onInstall=function(b){var d=this;c.prototype.onInstall.call(this,b);this.watchHandles.add([a.init(this.view.navigation.gamepad,"enabled",function(a){a?(d.handle.resume(),d.frameTask||(d.frameTask=l.addFrameTask({update:function(a){return d.frameUpdate(a.deltaTime)}}))):
(d.handle.pause(),d.frameTask&&(d.frameTask.remove(),d.frameTask=null))})])};h.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);c.prototype.onUninstall.call(this)};h.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,k.resetTransformation(this.transformation)):(this.currentDevice=
a.data.device,k.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};h.prototype.frameUpdate=function(a){var c=this.transformation;if(!k.isZeroTransformation(c)){var d=this.view.viewpoint.clone(),h=g*this.view.navigation.gamepad.velocityFactor*a;b.translateBy(d,d,[c.translation[0]*h,-c.translation[1]*h]);h=this.view.size;b.scaleAndRotateBy(d,d,1+c.translation[2]*f*a,this.view.constraints.rotationEnabled?-c.heading*m*a:0,[h[0]/2,h[1]],h);a=this.view.constraints.constrain(d,
this.view.viewpoint);this.view.viewpoint=a}};return h}(c.InputHandler);e.GamepadNavigation=q;var m=.06,g=.7,f=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,e,n){function d(d){var a=d*d;0>d&&(a*=-1);return a}Object.defineProperty(e,"__esModule",{value:!0});e.quadraticAccentuation=d;e.resetTransformation=function(d){d.translation[0]=0;d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};e.extractTransformation=
function(e,a,b){var c=e.state;e=e.device;a="forward-down"===a.tiltDirection?1:-1;"standard"===e.deviceType?(b.translation[0]=d(c.axes[0]),b.translation[1]=d(c.axes[1]),b.translation[2]=d(c.buttons[7])-d(c.buttons[6]),b.heading=d(c.axes[2]),b.tilt=d(c.axes[3])):"spacemouse"===e.deviceType&&(b.translation[0]=1.2*d(c.axes[0]),b.translation[1]=1.2*d(c.axes[1]),b.translation[2]=2*-d(c.axes[2]),b.heading=1.2*d(c.axes[5]),b.tilt=1.2*d(c.axes[3]));b.tilt*=a;n.vec3.scale(b.translation,b.translation,1);return b};
e.extractTransformationKeyboard=function(d,a){a.translation[0]=d[1]-d[0];a.translation[1]=d[3]-d[2];a.translation[2]=d[4]-d[5];a.heading=d[7]-d[6];a.tilt=d[8]-d[9];return a};e.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,e,n,d){Object.defineProperty(e,
"__esModule",{value:!0});q=function(d){function a(a,c,e){var b,g=d.call(this,!0)||this;g.view=a;g.keys=c;g._keyMap=(b={},b[c.left]="left",b[c.right]="right",b[c.up]="up",b[c.down]="down",b);g.registerIncoming("key-down",e,function(a){return g._handleKeyDown(a)});g.registerIncoming("key-up",e,function(a){return g._handleKeyUp(a)});return g}n(a,d);a.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};a.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};a.prototype._handleKey=
function(a,c){var b=this._keyMap[a.data.key];if(null!=b){if(c)switch(b){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this.view.mapViewNavigation.stop();a.stopPropagation()}};return a}(d.InputHandler);e.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports",
"../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(a,c,e){var b,g=d.call(this,!0)||this;g.view=a;g.keys=c;g._keyToDirection=(b={},b[c.clockwiseOption1]="clockwise",b[c.clockwiseOption2]="clockwise",b[c.counterClockwiseOption1]="counterClockwise",b[c.counterClockwiseOption2]="counterClockwise",b[c.resetOption1]="reset",b[c.resetOption2]="reset",b);g.registerIncoming("key-down",e,function(a){return g._handleKeyDown(a)});
g.registerIncoming("key-up",e,function(a){return g._handleKeyUp(a)});return g}n(a,d);a.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};a.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};a.prototype._handleKey=function(a,c){var b=a.modifiers;0<b.size&&!b.has("Shift")||!this.view.constraints.rotationEnabled||!(b=this._keyToDirection[a.data.key])||(c?"clockwise"===b?this.view.mapViewNavigation.continousRotateClockwise():"counterClockwise"===b?this.view.mapViewNavigation.continousRotateCounterclockwise():
this.view.mapViewNavigation.resetRotation():this.view.mapViewNavigation.stop(),a.stopPropagation())};return a}(d.InputHandler);e.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(a,c,e){var b=d.call(this,!0)||this;b.view=a;b.keys=c;b._keysToZoomAction={};b.registerIncoming("key-down",e,function(a){return b._handleKeyDown(a)});
c.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});c.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}n(a,d);a.prototype._handleKeyDown=function(a){this._handleKey(a)};a.prototype._handleKey=function(a){var b=a.modifiers;0<b.size&&!b.has("Shift")||(b=this._keysToZoomAction[a.data.key],0===b?(this.view.mapViewNavigation.zoomIn(),a.stopPropagation()):1===b&&(this.view.mapViewNavigation.zoomOut(),a.stopPropagation()))};return a}(d.InputHandler);e.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(a,c){var b=d.call(this,!0)||this;b.view=a;b._canZoom=!0;b.registerIncoming("mouse-wheel",c,function(a){return b._handleMouseWheel(a)});return b}n(a,d);a.prototype._handleMouseWheel=function(a){var b=this;if(this._canZoom){var d=this.view.mapViewNavigation,e=a.data;if(e=d.zoom(1/Math.pow(.6,1/60*e.deltaY),[e.x,e.y]))this._canZoom=
!1,e.catch(function(a){}).then(function(){b._canZoom=!0;d.end()});a.stopPropagation()}};return a}(d.InputHandler);e.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,e,n,d,l){Object.defineProperty(e,"__esModule",{value:!0});q=function(a){function b(b){var c=a.call(this,!0)||this;c.view=b;c.registerIncoming("drag",function(a){return c._handleDrag(a)});
c.registerIncoming("pointer-down",function(a){return c.stopMomentumNavigation()});var e=c.view.mapViewNavigation;c.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){e.pinch.begin(c.view,b.data);b.stopPropagation()},update:function(a,b){e.pinch.update(c.view,b.data);b.stopPropagation()},end:function(a,b){e.pinch.end(c.view,b.data);b.stopPropagation()},condition:function(a){return 2<=a}});return c}n(b,a);b.prototype._handleDrag=function(a){this.dragEventSeparator.handle(a)};b.prototype.stopMomentumNavigation=
function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return b}(l.InputHandler);e.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,e,n,d,l,a,b){Object.defineProperty(e,"__esModule",{value:!0});var c=n("trident"),k=n("edge"),m=n("chrome"),g=n("ff"),f=n("safari");q=function(){function e(a,c){var d=this;this.input=c;this._active=
{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;l.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new b.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",a)}}e.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&
(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(e.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(h[c],this._active[c]),
delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});e.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};
e.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(r){}};e.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=d.createScreenPointFromNativeEvent(this._element,a);e.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};e.prototype._handleKey=function(b,c){var d=a.eventKey(c);d&&"key-up"===b&&this._keyDownState.delete(d);c={native:c,
key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===b&&this._keyDownState.add(c.key);this._callback(b,c)};e.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};e.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,
eventId:this._eventId++});b.preventDefault();this._callback(a,c)};e.prototype._handleMouseWheel=function(a,b){b.preventDefault();var d=b.deltaY;switch(b.deltaMode){case 0:if(c||k)d=d/document.documentElement.clientHeight*600;break;case 1:d*=30;break;case 2:d*=900}c||k?d*=.7:m||f?d*=.6:g&&(d*=1.375);var h=Math.abs(d);100<h&&(d=d/h*200/(1+Math.exp(-.02*(h-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:d});this._callback(a,b)};e.prototype._handlePointerCaptureLost=function(a,
b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};e.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};e.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};e.test={disableSubpixelCoordinates:!1};return e}();e.BrowserEventSource=q;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture",
"pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var d;a<m.length;a++)d=m[a],c[d]=b[d]||g[a];c.buttons=b.buttons||0;a=0;a=b.pressure&&c.buttons?b.pressure:c.buttons?.5:
0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=a;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.twist=b.twist||0;c.tangentialPressure=b.tangentialPressure||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||0;c.isPrimary=b.isPrimary||!1;return c}function e(){this.array=[];this.size=0}function n(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);z&&(this.observer=new z(this.mutationWatcher.bind(this)))}
function d(a){return"body /shadow-deep/ "+l(a)}function l(a){return'[touch-action\x3d"'+a+'"]'}function a(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function b(){if(B){C.forEach(function(b){String(b)===b?(E+=l(b)+a(b)+"\n",F&&(E+=d(b)+a(b)+"\n")):(E+=b.selectors.map(l)+a(b.rule)+"\n",F&&(E+=b.selectors.map(d)+a(b.rule)+"\n"))});var b=document.createElement("style");b.textContent=E;document.head.appendChild(b)}}function c(a){if(!t.pointermap.has(a))throw a=Error("NotFoundError"),
a.name="NotFoundError",a;}function k(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var m="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),g=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach?Map:e;e.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;
this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],p={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},r="undefined"!==typeof SVGElementInstance,t={pointermap:new f,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(ia){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<h.length;d++)c=h[d],b[c]=a[c]||u[d],r&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in p))return b},propagate:function(a,
b,c){for(var d=a.target,f=[];null!=d&&d!==document&&!d.contains(a.relatedTarget);)if(f.push(d),d=d.parentNode,!d)return;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new q("gotpointercapture");d.pointerId=
a;d._target=b;c||this.asyncDispatchEvent(d)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new q("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};t.boundHandler=t.eventHandler.bind(t);var A={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,
c),f;for(f=this.targetingShadow(d);f;){if(a=f.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;f=this.olderShadow(f)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),
x=Array.prototype.map.call.bind(Array.prototype.map),v=Array.prototype.slice.call.bind(Array.prototype.slice),y=Array.prototype.filter.call.bind(Array.prototype.filter),z=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(a){this.observer&&A.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(v(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=x(a,this.findElements,this);b.push(y(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",B=window.PointerEvent||window.MSPointerEvent,F=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,G=t.pointermap,K=[1,4,2,8,16],I=!1;try{I=1===(new MouseEvent("test",{buttons:1})).buttons}catch(H){}var Q={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){t.listen(a,
this.events)},unregister:function(a){t.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,f=b.length,g;d<f&&(g=b[d]);d++){var h=Math.abs(a-g.y);if(25>=Math.abs(c-g.x)&&25>=h)return!0}},prepareEvent:function(a){var b=t.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=G.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),c=this.prepareEvent(a);I||(c.buttons=K[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);G.set(this.POINTER_ID,a);b&&0!==b.buttons?t.move(c):t.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);t.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),c=this.prepareEvent(a);if(!I){var d=K[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}G.set(this.POINTER_ID,a);c.buttons&=~K[c.button];0===c.buttons?t.up(c):t.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);t.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;t.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);t.cancel(a);this.deactivateMouse()},deactivateMouse:function(){G.delete(this.POINTER_ID)}},O=t.captureInfo,S=A.findTarget.bind(A),Z=A.allShadows.bind(A),L=t.pointermap,X,V={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){X.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,t.listen(a,this.events),Z(a).forEach(function(a){a._scrollType=c;t.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;t.unlisten(a,this.events);Z(a).forEach(function(a){a._scrollType=void 0;t.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,Z(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):
d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===L.size||1===L.size&&L.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=t.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=O[d]||S(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,f;c<d&&(f=a[c]);c++)if(f.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(L.size>=b.length){var c=[];L.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){L.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});t.enterOver(a);t.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=L.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;t.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(t.leaveOut(c),t.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(t.up(a),t.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){t.cancel(a);t.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){L.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=Q.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};X=new n(V.elementAdded,V.elementRemoved,V.elementChanged,V);var N=t.pointermap,M=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,P={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){t.listen(a,this.events)},unregister:function(a){t.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;M&&(b=t.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){N.delete(a)},MSPointerDown:function(a){N.set(a.pointerId,a);a=this.prepareEvent(a);t.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);t.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);t.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);t.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);t.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);t.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=t.makeEvent("lostpointercapture",a);t.dispatchEvent(a)},MSGotPointerCapture:function(a){a=t.makeEvent("gotpointercapture",a);t.dispatchEvent(a)}},R,U,J;window.navigator.msPointerEnabled?(R=function(a){c(a);k(this);0!==t.pointermap.get(a).buttons&&(t.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){c(a);t.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(R=function(a){c(a);k(this);0!==t.pointermap.get(a).buttons&&t.setCapture(a,this)},U=function(a){c(a);t.releaseCapture(a)});J=function(a){return!!t.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:t,Installer:n,PointerEvent:q,PointerMap:f,targetFinding:A,applyGlobal:function(){b();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),t.registerSource("ms",P)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),t.registerSource("mouse",Q),void 0!==window.ontouchstart&&t.registerSource("touch",V)),t.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:R},releasePointerCapture:{value:U},hasPointerCapture:{value:J}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?
t.registerSource("ms",P):(t.registerSource("mouse",Q),void 0!==window.ontouchstart&&t.registerSource("touch",V)),t.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=R.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=J.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/has"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});
e.primaryKey=n("mac")?"Meta":"Ctrl";var d={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(q=48;58>q;q++)d[q]=String.fromCharCode(q);for(q=1;25>q;q++)d[111+q]="F"+q;for(q=65;91>q;q++)d[q]=[String.fromCharCode(q+32),String.fromCharCode(q)];var l={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"};e.eventKey=function(a){if(void 0!==a.key)return l[a.key]||
a.key;var b=d[a.keyCode];return Array.isArray(b)?a.shiftKey?b[1]:b[0]:b};e.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});q=function(){function b(b,d){var c=this;this.element=
b;this.input=d;this.handleGamepadConnectedEvent=function(a){c.handleGamepadConnected(a.gamepad)};this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var d=c.inputDevices[b.index];d&&(c.emitGamepadEvent(b,a.extractState(d),!1),c.inputDevices[b.index]=void 0,c.latestUpdate[b.index]=void 0,c.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return c.handleGamepadConnected(a)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}b.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(b.prototype,"onEvent",{set:function(a){this.callback=a},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"pollingEnabled",{set:function(a){this.supported&&(a?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});b.prototype.handleGamepadConnected=function(a){var b=new l(a);"unknown"!==b.deviceType&&(this.inputDevices[a.index]=b,this.input.gamepad.devices.add(b))};b.prototype.startPolling=function(){var a=this;null==this.frameTask&&(this.frameTask=d.addFrameTask({update:function(){return a.readGamepadState()}}))};b.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};b.prototype.readGamepadState=function(){var b=this,d=document.hasFocus(),e=this.element.contains(document.activeElement),g="document"===this.input.gamepad.enabledFocusMode&&!d||"view"===this.input.gamepad.enabledFocusMode&&!e;this.forEachGamepad(function(c){var d=b.inputDevices[c.index];if(d){var f=b.latestUpdate[c.index],d=a.extractState(d),e=g||a.stateIdle(d);f&&(f.timestamp===c.timestamp||!f.active&&e||a.stateEqual(f.state,
d))||b.emitGamepadEvent(c,d,!e)}})};b.prototype.forEachGamepad=function(a){for(var b=window.navigator.getGamepads(),c=0;c<b.length;c++){var d=b[c];this.validate(d)&&a(d)}};b.prototype.emitGamepadEvent=function(a,b,d){var c=this.latestUpdate[a.index];if((c=c&&c.active)||d)this.latestUpdate[a.index]={timestamp:a.timestamp,state:b,active:d},this.callback&&this.callback({device:this.inputDevices[a.index],state:b,action:!c&&d?"start":c&&d?"update":"end"})};b.prototype.validate=function(a){if(!a||!a.connected)return!1;
for(var b=0;b<a.axes.length;b++)if(isNaN(a.axes[b]))return!1;return!0};return b}();e.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../3d/support/mathUtils"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.extractState=function(d){var e=d.native;return{buttons:e.buttons.map(function(a){return a.pressed?a.value?a.value:1:0}),axes:e.axes.map(function(a){var b=d.axisThreshold,c=Math.abs(a);a=c<b?0:n.sign(a)*(c-b)/(1-b);return a})}};
e.stateEqual=function(d,e){if(d.axes.length!==e.axes.length||d.buttons.length!==e.buttons.length)return!1;for(var a=0;a<d.axes.length;a++)if(d.axes[a]!==e.axes[a])return!1;for(a=0;a<d.buttons.length;a++)if(d.buttons[a]!==e.buttons[a])return!1;return!0};e.stateIdle=function(d){for(var e=0;e<d.axes.length;e++)if(0!==d.axes[e])return!1;for(e=0;e<d.buttons.length;e++)if(0!==d.buttons[e])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g){Object.defineProperty(e,"__esModule",{value:!0});var f=a.getLogger("esri.views.input.InputManager");q=function(a){function e(b,c){b=a.call(this)||this;b._pointerCaptures=new Map;b._nameToGroup={};b._handlers=[];b._currentPropagation=null;b._sourceEvents=new Set;b._keyModifiers=new Set;b._activeKeyModifiers=new Set;b.primaryKey=k.primaryKey;b.latestPointerType="mouse";b._installRecognizers();return b}n(e,a);e.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=b;this._recognizers||(this._recognizers=m.defaults.map(function(a){return new a}));return{}};e.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(e.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});
e.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])f.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)f.error("Can't register a group of zero handlers");else{var d={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=d;a=function(a){var b=d.handlers[a];g._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},
emit:function(a,d,f,g){c._emitInputEvent(b.priorityIndex,a,d,f,g)},setPointerCapture:function(a,f){c._setPointerCapture(d,b,a,f)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){c.notifyChange("hasPendingInputs")}})};var g=this;for(b=d.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};e.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;
a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):f.error("There is no InputHandler group registered under the name `"+a+"`")};e.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};e.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=
this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var f=d.handler.hasSideEffects;if(!f)for(var g=0,h=d.handler.outgoingEventTypes;g<h.length;g++)if(a.has(h[g])){f=!0;break}if(f)for(g=0,h=d.handler.incomingEventMatches;g<h.length;g++){var e=h[g];a.add(e.eventType);for(var m=0,e=e.keyModifiers;m<e.length;m++){var l=e[m];k.isSystemModifier(l)||b.add(l)}}d.active=f}this._sourceEvents=a;this._keyModifiers=b;
0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};e.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};e.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
b,b.native?b.native.timestamp:void 0)};e.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,f=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},g=function(a,b){b&&!c._activeKeyModifiers.has(a)?(f(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(f(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var h=b.key;this._keyModifiers.has(h)&&g(h,"key-down"===a)}a=b.native;g("Alt",!(!a||
!a.altKey));g("Ctrl",!(!a||!a.ctrlKey));g("Shift",!(!a||!a.shiftKey));g("Meta",!(!a||!a.metaKey));g("Primary",this._activeKeyModifiers.has(this.primaryKey))}};e.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new g.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};e.prototype._setPointerCapture=
function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};e.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};
e.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,a,b,c)};e.prototype._emitInputEvent=function(a,c,d,f,g){f=void 0!==f?f:this._currentPropagation?this._currentPropagation.timestamp:b();c=new h(c,d,f,g||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(c):this._doNewPropagation(a,c)};e.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,
timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var f=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(f);f.shouldStopPropagation()||c.push(f)}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};e.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var f=d[c],g=function(a){if(f.eventType!==a.eventType)return"continue";var b=f.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===f.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:f.keyModifiers.length>a.keyModifiers.length?-1:1}},h=0,e=b.handler.incomingEventMatches;h<e.length;h++){var k=
g(e[h]);if("object"===typeof k)return k.value}return a.priorityIndex>b.priorityIndex?-1:1};e.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],f=0;f<b.length&&0<=this._compareHandlerPriority(d,b[f]);)f++;b.splice(f,0,d)}return b};Object.defineProperty(e.prototype,"debug",{get:function(){var a=this,b=function(b){var c=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=c};return{injectEvent:function(c,d){b(function(){a._onEventReceived(c,
d)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});d([c.property({readOnly:!0})],e.prototype,"hasPendingInputs",null);d([c.property({readOnly:!0})],e.prototype,"latestPointerType",void 0);return e=d([c.subclass("esri.views.input.InputManager")],e)}(c.declared(l));e.InputManager=q;var h=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=
function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});e.defaults=[d.PointerClickHoldAndDrag,l.SingleAndDoubleClick,n.Drag,a.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),
function(q,e,n,d,l,a){function b(b){var c=[];b.forEach(function(a){c.push(d.createScreenPoint(a.event.x,a.event.y))});return a.fitCircleLSQ(c)}function c(a){var c=b(a),d=0;a.forEach(function(a){for(var b=m(a,c),b=b-a.lastAngle;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=a.lastAngle+b;a.lastAngle=b;d+=b-a.initialAngle});d/=a.size||1;return{angle:d,radius:c.radius,center:c.center}}function k(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function m(a,b){a=a.event;
return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(e,"__esModule",{value:!0});q=function(a){function d(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-cancel",
b.handlePointerUpAndPointerLost.bind(b));return b}n(d,a);d.prototype.createPayload=function(a,b,c,d){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:d,pointers:k(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};d.prototype.addPointer=function(a){var d=a.native.pointerId,f=c(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,a);d=m(a,b(this.activePointerMap));a.initialAngle=
d;a.lastAngle=d;this.updatePointerAngles(f)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=c(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(a){var b=c(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=m(c,b)-a;c.lastAngle=m(c,b)-a})};d.prototype.emitEvent=
function(a,b,d){var f=c(this.activePointerMap);this.drag.emit(this.createPayload(a,b,f,d),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,c),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};d.prototype.handlePointerDrag=function(a){var b=
a.data,c=b.currentEvent,d=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d)):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",c,d))}};return d}(l.InputHandler);e.Drag=q;(function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(e.Button||(e.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.manhattanDistance=function(d,e){return Math.abs(e.x-d.x)+Math.abs(e.y-d.y)};e.euclideanDistance=function(d,e){var a=e.x-d.x;d=e.y-d.y;return Math.sqrt(a*a+d*d)};e.fitCircleLSQ=
function(d,e){e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:n.createScreenPoint()};if(0===d.length)return e;if(1===d.length)return e.center.x=d[0].x,e.center.y=d[0].y,e;if(2===d.length){var a=d[0];d=d[1];var b=[d.x-a.x,d.y-a.y],c=b[0],b=b[1];e.radius=Math.sqrt(c*c+b*b)/2;e.center.x=(a.x+d.x)/2;e.center.y=(a.y+d.y)/2;return e}for(var k=0,m=0,g=0;g<d.length;g++)k+=d[g].x,m+=d[g].y;for(var k=k/d.length,m=m/d.length,f=d.map(function(a){return a.x-k}),h=d.map(function(a){return a.y-m}),l=
a=e=0,p=0,r=c=0,g=b=0;g<f.length;g++){var t=f[g],q=h[g],w=t*t,x=q*q;e+=w;a+=x;l+=t*q;p+=w*t;c+=x*q;r+=t*x;b+=q*w}g=e;f=l;h=a;p=.5*(p+r);c=.5*(c+b);b=g*h-l*f;r=(p*h-c*f)/b;c=(g*c-l*p)/b;b=n.createScreenPoint(r+k,c+m);return{radius:Math.sqrt(r*r+c*c+(e+a)/d.length),center:b}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,
"__esModule",{value:!0});e.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};q=function(b){function c(a,c,g,f,h){void 0===a&&(a=e.DefaultParameters.maximumClickDelay);void 0===c&&(c=e.DefaultParameters.movementUntilMouseDrag);void 0===g&&(g=e.DefaultParameters.movementUntilTouchDrag);void 0===f&&(f=e.DefaultParameters.holdDelay);void 0===h&&(h=d.default);var k=b.call(this,!1)||this;k.maximumClickDelay=a;k.movementUntilMouseDrag=c;k.movementUntilTouchDrag=
g;k.holdDelay=f;k._clock=h;k._pointerState=new Map;k._pointerDrag=k.registerOutgoing("pointer-drag");k._immediateClick=k.registerOutgoing("immediate-click");k._pointerHold=k.registerOutgoing("hold");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,
"pointer-cancel")});k._moveHandle=k.registerIncoming("pointer-move",k._handlePointerMove.bind(k));k._moveHandle.pause();return k}n(c,b);c.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null)});b.prototype.onUninstall.call(this)};c.prototype._handlePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var c=b._pointerState.get(d);c&&
(c.isDragging||(b._pointerHold.emit(c.previousEvent,void 0,a.modifiers),c.holdEmitted=!0),c.holdTimeout=null)},this.holdDelay));e={startEvent:c,previousEvent:c,startTimestamp:a.timestamp,isDragging:!1,downButton:c.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(c.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(a)};c.prototype._createPointerDragData=function(a,b,c){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,
currentEvent:c}};c.prototype._handlePointerMove=function(b){var c=b.data,d=this._pointerState.get(c.native.pointerId);d&&(d.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",d,c),void 0,d.modifiers):a.euclideanDistance(c,d.startEvent)>("touch"===c.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(b),d.previousEvent=c)};c.prototype.startDragging=function(a){var b=this,c=a.data,d=c.native.pointerId;this._pointerState.forEach(function(f){null!=
f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null);f.isDragging||(f.modifiers=a.modifiers,f.isDragging=!0,d===f.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",f,c)):b._pointerDrag.emit(b._createPointerDragData("start",f,f.previousEvent),a.timestamp))})};c.prototype._handlePointerLoss=function(a,b){var c=a.data,d=c.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
e,"pointer-up"===b?c:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===c.native.button&&a.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(c),this._pointerState.delete(d),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return c}(l.InputHandler);e.PointerClickHoldAndDrag=q})},"esri/core/clock":function(){define(["require","exports","./global"],function(q,e,n){function d(d){return{setTimeout:function(a,
b){var c=d.setTimeout(a,b);return{remove:function(){return d.clearTimeout(c)}}}}}Object.defineProperty(e,"__esModule",{value:!0});e.wrap=d;e.default=d(n)})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(q,e,n,d,l,a,b){Object.defineProperty(e,"__esModule",{value:!0});e.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};q=function(a){function c(b,c,f,h,k){void 0===b&&(b=e.DefaultParameters.maximumDoubleClickDelay);void 0===c&&(c=e.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=e.DefaultParameters.maximumDoubleTouchDelay);void 0===h&&(h=e.DefaultParameters.maximumDoubleTouchDistance);void 0===k&&(k=d.default);var g=a.call(this,!1)||this;g.maximumDoubleClickDelay=b;g.maximumDoubleClickDistance=c;g.maximumDoubleTouchDelay=f;g.maximumDoubleTouchDistance=
h;g._clock=k;g._pointerState=new Map;g._click=g.registerOutgoing("click");g._doubleClick=g.registerOutgoing("double-click");g.registerIncoming("immediate-click",g._handleImmediateClick.bind(g));g.registerIncoming("pointer-drag",g._handlePointerDrag.bind(g));g.registerIncoming("drag",g._handleDrag.bind(g));return g}n(c,a);c.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(c.prototype,
"hasPendingInputs",{get:function(){return!l.everyMap(this._pointerState,function(a){return null==a.doubleClickTimeout})},enumerable:!0,configurable:!0});c.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};c.prototype._handleImmediateClick=function(a){var c=a.data,d=this._pointerId(c),e=this._pointerState.get(d);if(e){var k="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;b.manhattanDistance(e.event.data,
c)>k?(this._clearDoubleClickTimeout(d,!0),this._startClick(a)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(c,void 0,e.event.modifiers))}else this._startClick(a)};c.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
c.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};c.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};c.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};c.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return c}(a.InputHandler);e.SingleAndDoubleClick=q})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(q,e,n,d,l){Object.defineProperty(e,"__esModule",{value:!0});q=function(a){function b(b,
e){void 0===b&&(b=20);void 0===e&&(e=40);var c=a.call(this,!1)||this;c._threshold=b;c._maxDelta=e;c.state="ready";c.emittedArtificalEnd2=!1;c._vertical=c.registerOutgoing("vertical-two-finger-drag");c._artificalDrag=c.registerOutgoing("drag");c.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){return c.observeStart(a,b)},update:function(a,b,d){return c.observeUpdate(a,b,d)},end:function(a,b){return c.observeEnd(a,b)}});c.registerIncoming("drag",function(a){return c.dragEventSeparator.handle(a)});
return c}n(b,a);Object.defineProperty(b.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});b.prototype.observeStart=function(a,b){1===a&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:b.data.button,buttons:b.data.buttons,pointerType:b.data.pointerType,timestamp:b.data.timestamp,pointers:b.data.pointers,pointer:b.data.pointer,angle:b.data.angle,radius:b.data.radius,center:b.data.center,artifical:!0}),
b.stopPropagation());this.state=2===a?"ready":"failed"};b.prototype.observeUpdate=function(a,b,d){"failed"!==this.state&&2===a&&("active"===this.state?(this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"update"}),b.stopPropagation()):this.checkMovementWithinLimits(b.data,d.data)?this.checkVerticalThresholdReached(b.data,d.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=b.data.center,this._artificalDrag.emit({action:"end",button:b.data.button,
buttons:b.data.buttons,pointerType:b.data.pointerType,timestamp:b.data.timestamp,pointers:b.data.pointers,pointer:b.data.pointer,angle:b.data.angle,radius:b.data.radius,center:b.data.center,artifical:!0}),this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),b.stopPropagation()):this.state="failed")};b.prototype.observeEnd=function(a,b){"active"===this.state&&(this._vertical.emit({delta:b.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",
b.stopPropagation())};b.prototype.checkMovementWithinLimits=function(a,b){var c=-Infinity,d=Infinity,f=-Infinity,e=Infinity;b.pointers.forEach(function(a){c=Math.max(c,a.x);d=Math.min(d,a.x);f=Math.max(f,a.y);e=Math.min(e,a.y)});var k=-Infinity,l=Infinity,r=-Infinity,n=Infinity;a.pointers.forEach(function(a){k=Math.max(k,a.x);l=Math.min(l,a.x);r=Math.max(r,a.y);n=Math.min(n,a.y)});return Math.abs(a.center.x-b.center.x)<this._threshold&&Math.abs(k-l-(c-d))<=this._maxDelta&&Math.abs(r-n-(f-e))<=this._maxDelta};
b.prototype.checkVerticalThresholdReached=function(a,b){var c=Math.abs(a.center.y-b.center.y);a.pointers.forEach(function(a,d){d=b.pointers.get(d);c=Math.min(c,Math.abs(a.y-d.y))});return c>=this._threshold};return b}(l.InputHandler);e.VerticalTwoFingerDrag=q})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(a){var b=
d.call(this,!0)||this;b._onChange=a;b._value="mouse";b.registerIncoming("pointer-down",function(a){b._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});b._moveHandler=b.registerIncoming("pointer-move",function(a){b._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});b._moveHandler.pause();return b}n(a,d);a.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))};return a}(d.InputHandler);
e.LatestPointerType=q})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(){var a=d.call(this,!0)||this;a.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return a}n(a,d);return a}(d.InputHandler);e.PreventContextMenu=q;e.default=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a,b){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new l([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}n(c,a);d([b.property({type:l})],c.prototype,"color",void 0);d([b.property()],c.prototype,"haloOpacity",void 0);d([b.property()],c.prototype,"fillOpacity",void 0);return c=d([b.subclass("esri.views.2d.support.HighlightOptions")],c)}(b.declared(a))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/compilerUtils"],function(q,e,n,d){function l(a,b){var f=a||{},g=f.format,e=f.quality,l=f.rotation,f=f.disableSlice,m=b.padding||p,n;n=b.width-m.left-m.right;b=b.height-m.top-m.bottom;var r=m=0,t=n,q=b;if(a&&a.area){var m=Math.floor(a.area.x)||0,r=Math.floor(a.area.y)||0,B=null!=a.area.width?Math.floor(a.area.width):null,F=null!=a.area.height?Math.floor(a.area.height):null,t=t-m,q=q-r;null!=B&&null!=F?(t=Math.min(t,B),q=Math.min(q,F)):null==B&&null!=F?(B=Math.min(t,B),q*=B/t,t=B):null!=
B&&null==F&&(B=Math.min(q,F),t*=B/q,q=B)}m=k({x:m,y:r,width:t,height:q},a);r=Math.floor(Math.max(m.x,0));t=Math.floor(Math.max(m.y,0));n={x:r,y:t,width:Math.floor(Math.min(m.width,n-r)),height:Math.floor(Math.min(m.height,b-t))};b=n.width/n.height;m=m.width/m.height;m!==b&&(m>b?(b=Math.floor(n.width/m),n={x:n.x,y:Math.floor(n.y+(n.height-b)/2),width:n.width,height:b}):(b=Math.floor(n.height*m),n={x:Math.floor(n.x+(n.width-b)/2),y:n.y,width:b,height:n.height}));b=c(a,n);a=b.width;b=b.height;a:switch(g){case "png":case "jpg":case "jpeg":break a;
case null:case void 0:g=h;break a;default:d.neverReached(g),g=h}m=u[g];e=null!=e?e:m;return{format:g,quality:0>e?0:100<e?100:e,area:n,width:a,height:b,rotation:l,disableSlice:f||!1}}function a(a,b){return a.toDataURL(f[b.format],b.quality/100)}function b(a,b,c){c||(m||(m=document.createElement("canvas"),m.width=1,m.height=1),c=m);return c.getContext("2d").createImageData(a,b)}function c(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};
if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function k(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(e,"__esModule",{value:!0});e.completeUserSettings=l;e.toRenderSettings=function(a,b){var c=
l(a,b),d=c.area,f=c.width/d.width,g=b.padding,e=g.left+g.right,h=g.top+g.bottom;return{framebufferWidth:Math.floor((b.width-e)*f+e),framebufferHeight:Math.floor((b.height-h)*f+h),region:{x:Math.floor(d.x*f)+g.left,y:Math.floor(d.y*f)+g.top,width:c.width,height:c.height},format:c.format,quality:c.quality,rotation:c.rotation,pixelRatio:f,layers:a&&a.layers?a.layers:[],disableSlice:c.disableSlice}};e.encodeResult=function(b,c,d,f){if(f.premultipliedAlpha)for(var g=b.data,e=g.length,h=0;h<e;h+=4){var k=
g[h+3];0<k&&(k/=255,g[h+0]/=k,g[h+1]/=k,g[h+2]/=k)}d.width=b.width;d.height=b.height;g=d.getContext("2d");g.putImageData(b,0,0);f.flipY&&(g.save(),g.globalCompositeOperation="copy",g.scale(1,-1),g.translate(0,-g.canvas.height),g.drawImage(g.canvas,0,0),g.restore());b=g.getImageData(0,0,b.width,b.height);c=a(d,c);d.width=0;d.height=0;return{dataUrl:c,data:b}};e.toDataUrl=a;e.createEmptyImageData=function(a,c,d){if(!a||!c)throw Error("Cannot construct image data without dimensions");if(g)try{return new ImageData(a,
c)}catch(w){g=!1}return b(a,c,d)};e.wrapImageData=function(a,c,d,f){if(!c||!d)throw Error("Cannot construct image data without dimensions");if(g)try{return new ImageData(a,c,d)}catch(x){g=!1}c=b(c,d,f);c.data.set(a,0);return c};e.resampleHermite=function(a,b,c,d,f,g,e,h){void 0===d&&(d=0);void 0===f&&(f=0);void 0===g&&(g=a.width-d);void 0===e&&(e=a.height-f);void 0===h&&(h=!1);var k=a.data,l=b.width,m=b.height,n=b.data;g/=l;e/=m;var p=Math.ceil(g/2),r=Math.ceil(e/2);a=a.width;for(var t=0;t<m;t++)for(var q=
0;q<l;q++){for(var y=4*(q+(h?m-t-1:t)*l),u=0,v=0,x=0,z=0,w=0,A=0,N=(t+.5)*e,M=Math.floor(t*e);M<(t+1)*e;M++)for(var P=Math.abs(N-(M+.5))/r,R=(q+.5)*g,P=P*P,U=Math.floor(q*g);U<(q+1)*g;U++){var J=Math.abs(R-(U+.5))/p,J=Math.sqrt(P+J*J);if(!(1<=J)){var J=2*J*J*J-3*J*J+1,W=4*(d+U+(f+M)*a),A=A+J*k[W+3],v=v+J;!c&&255>k[W+3]&&(J=J*k[W+3]/255);x+=J*k[W];z+=J*k[W+1];w+=J*k[W+2];u+=J}}n[y]=x/u;n[y+1]=z/u;n[y+2]=w/u;n[y+3]=A/v}return b};e.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;
var c=a.framebufferHeight,d=a.region,f=Math.min(8,2048/Math.max(b,c));return 1.5>f?a:n({},a,{framebufferWidth:Math.round(b*f),framebufferHeight:Math.round(c*f),pixelRatio:a.pixelRatio*f,resample:{region:{x:Math.round(d.x*f),y:Math.round(d.y*f),width:Math.round(d.width*f),height:Math.round(d.height*f)},width:b,height:c}})};var m=null,g=!0,f={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},h="jpg",u={png:100,jpg:98,jpeg:98},p={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require",
"exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,e,n,d,l){Object.defineProperty(e,"__esModule",{value:!0});var a={supportsMajorWebPerformanceCaveat:!1};e.check=function(b){b=n({},a,b);return l("esri-webgl")?!b.supportsMajorWebPerformanceCaveat&&l("esri-webgl-major-performance-caveat")?new d("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):
l("esri-webgl-high-precision-fragment")?l("esri-webgl-vertex-shader-samplers")?l("esri-webgl-element-index-uint")?l("esri-webgl-standard-derivatives")?l("esri-webgl-instanced-arrays")?null:new d("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new d("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new d("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):
new d("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new d("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new d("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(q,e,n,d,l,a){return function(a){function b(b){b=a.call(this)||this;b.components=["attribution","zoom"];return b}n(b,a);d([l.property()],b.prototype,"components",void 0);return b=d([l.subclass("esri.views.ui.2d.DefaultUI2D")],b)}(l.declared(a))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f){return function(c){function e(a){a=c.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}n(e,c);e.prototype.initialize=function(){this._handles.add([l.init(this,"components",this._componentsWatcher.bind(this)),l.init(this,"view",this._updateViewAwareWidgets.bind(this))])};e.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};e.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};e.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};e.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};e.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};e.prototype._createComponent=function(a){var c=this._createWidget(a);if(c)return new b({id:a,node:c})};e.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};e.prototype._createAttribution=function(){return new k({view:this.view})};e.prototype._createCompass=function(){return new m({view:this.view})};
e.prototype._createNavigationToggle=function(){return new g({view:this.view})};e.prototype._createZoom=function(){return new f({view:this.view})};d([a.property()],e.prototype,"components",void 0);return e=d([a.subclass("esri.views.ui.DefaultUI")],e)}(a.declared(c))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom dojo/dom-class ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a,b,c){return function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;a.widget=null;return a}n(e,b);e.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(e.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"node",{set:function(b){var c=this._get("node");b!==c&&(b&&a.add(b,"esri-component"),
c&&a.remove(c,"esri-component"),this._set("node",b))},enumerable:!0,configurable:!0});e.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),l.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};d([c.property()],e.prototype,"id",null);d([c.property()],e.prototype,"node",null);d([c.cast("node")],e.prototype,"castNode",null);
d([c.property({readOnly:!0})],e.prototype,"widget",void 0);return e=d([c.subclass("esri.views.ui.Component")],e)}(c.declared(b))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/dom-class dojo/dom-construct dojo/dom-style ../../core/Accessor ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r){function t(a){return"object"!==typeof a||a&&a.isInstanceOf&&a.isInstanceOf(p)||!("component"in a||"index"in a||"position"in a)?null:a}var A={left:0,top:0,bottom:0,right:0},w={bottom:30,top:15,right:15,left:15};return function(g){function e(a){a=g.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new f;a._componentToKey=new Map;a.view=null;a._initContainers();return a}d(e,g);e.prototype.initialize=
function(){this._handles.add([h.init(this,"view.padding, container",this._applyViewPadding.bind(this)),h.init(this,"padding",this._applyUIPadding.bind(this))])};e.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(e.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),
b&&(b.classList.remove("esri-ui"),c.set(b,{top:"",bottom:"",left:"",right:""}),m.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},
enumerable:!0,configurable:!0});e.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:n({},w,a)};Object.defineProperty(e.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});e.prototype.add=function(a,b){var c=this,d,f;if(Array.isArray(a))a.forEach(function(a){return c.add(a,b)});else{var e=t(a);e&&(d=e.index,b=e.position,a=e.component,
f=e.key);b&&"object"===typeof b&&(d=b.index,f=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(p)||(a=new p({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a),f&&this._componentToKey.set(a,f))}};e.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var f=this._componentToKey;if(!f.has(a)||f.get(a)===b)return f=this._components.indexOf(d),d.node.parentNode&&
d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(f,1)[0]}}};e.prototype.empty=function(b){var c=this;if(Array.isArray(b))return b.map(function(a){return c.empty(a)}).reduce(function(a,b){return a.concat(b)});b=b||"manual";if("manual"===b)return Array.prototype.slice.call(this._manualContainer.children).filter(function(b){return!a.contains(b,"esri-ui-corner")}).map(function(a){return c.remove(a)});if(this._isValidPosition(b))return Array.prototype.slice.call(this._cornerNameToContainerLookup[b].children).map(this.remove,
this)};e.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,f=t(a)||t(b);f&&(d=f.index,b=f.position,a=f.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};e.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(p)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};e.prototype._getViewPadding=function(){return this.get("view.padding")||
A};e.prototype._attachContainers=function(a){a.appendChild(this._manualContainer);a.appendChild(this._innerContainer)};e.prototype._initContainers=function(){var a=b.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),c=b.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d=b.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),f=b.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),e=b.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},
a),g=b.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=c;a=r.isRTL();this._cornerNameToContainerLookup={"top-left":d,"top-right":f,"bottom-left":e,"bottom-right":g,"top-leading":a?f:d,"top-trailing":a?d:f,"bottom-leading":a?g:e,"bottom-trailing":a?e:g};this._positionNameToContainerLookup=n({manual:c},this._cornerNameToContainerLookup)};e.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};e.prototype._place=
function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d;-1<c?(d=Array.prototype.slice.call(a.children),0===c?this._placeComponent(b,a,"first"):c>=d.length?this._placeComponent(b,a,"last"):this._placeComponent(b,d[c],"before")):this._placeComponent(b,a,"last")};e.prototype._placeComponent=function(a,c,d){var f=a.widget;f&&!f._started&&"function"===typeof f.postMixInProperties&&"function"===typeof f.buildRendering&&"function"===typeof f.postCreate&&
"function"===typeof f.startup&&a.widget.startup();b.place(a.node,c,d)};e.prototype._applyViewPadding=function(){var a=this.container;a&&c.set(a,this._toPxPosition(this._getViewPadding()))};e.prototype._applyUIPadding=function(){this._innerContainer&&c.set(this._innerContainer,this._toPxPosition(this.padding))};e.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};e.prototype._toPxUnit=function(a){return 0===
a?0:a+"px"};e.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};e.prototype._findById=function(a){var b=null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};e.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};l([u.property()],e.prototype,"container",null);l([u.property({dependsOn:["view.height"]})],e.prototype,"height",null);
l([u.property({value:w})],e.prototype,"padding",null);l([u.cast("padding")],e.prototype,"castPadding",null);l([u.property()],e.prototype,"view",void 0);l([u.property({dependsOn:["view.width"]})],e.prototype,"width",null);return e=l([u.subclass("esri.views.ui.UI")],e)}(u.declared(k,g))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),
function(q,e,n,d,l,a,b,c,k,m){return function(c){function f(a){a=c.call(this)||this;a._isOpen=!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=l.widgetLabel;a.view=null;a.viewModel=new k;return a}n(f,c);f.prototype.postInitialize=function(){var b=this;this.own(a.on(this,"viewModel.items","change",function(){return b.scheduleRender()}))};Object.defineProperty(f.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,
b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,configurable:!0});f.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return m.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),m.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",m.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:this.classes("esri-attribution__link",
"esri-widget__anchor")},"Esri")))};f.prototype._renderSourcesNode=function(){var a,b=this._isOpen,c=this._isInteractive(),d=c?0:-1,f=this.attributionText,e=c?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=c,a);return m.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:f,role:e,tabIndex:d})};f.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=
a.clientWidth};f.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};f.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};f.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};
d([b.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),m.renderable()],f.prototype,"attributionText",null);d([b.property()],f.prototype,"iconClass",void 0);d([b.property(),m.renderable()],f.prototype,"itemDelimiter",void 0);d([b.property()],f.prototype,"label",void 0);d([b.aliasOf("viewModel.view")],f.prototype,"view",void 0);d([b.property({type:k}),m.renderable(["state","view.size"])],f.prototype,"viewModel",void 0);d([m.accessibleHandler()],f.prototype,"_toggleState",
null);return f=d([b.subclass("esri.widgets.Attribution")],f)}(b.declared(c))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(q,e,n,d,l,
a,b,c,k,m,g,f,h){return function(a){function e(b){b=a.call(this,b)||this;b._handles=new k;b._pendingAttributionItemsByLayerId={};b._attributionDataByLayerId={};b.items=new c;b.view=null;b._updateAttributionItems=b._updateAttributionItems.bind(b);return b}n(e,a);e.prototype.initialize=function(){this._handles.add(m.init(this,"view",this._viewWatcher))};e.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(e.prototype,"state",{get:function(){return this.get("view.ready")?
"ready":"disabled"},enumerable:!0,configurable:!0});e.prototype._viewWatcher=function(a){var b=this,c=this._handles;c&&c.remove();a&&(c.add([a.allLayerViews.on("change",function(a){b._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.uid)}),b._updateAttributionItems())}),m.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))};e.prototype._addLayerViews=function(a){var b=this;a.forEach(function(a){b._handles.has(a.uid)||b._handles.add(m.init(a,
"suspended",b._updateAttributionItems),a.uid)})};e.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(c){var d=c.layer;if(d&&"function"===typeof d.originOf&&"user"===d.originOf("copyright"))a._addIfUnique(b,{layer:d,text:d.copyright});else if(c=d.get("portalItem.accessInformation"))a._addIfUnique(b,{layer:d,text:c});else if(d.hasAttributionData){var f=a._attributionDataByLayerId;if(f[d.uid])a._addIfUnique(b,{layer:d,text:a._getDynamicAttribution(f[d.uid],
a.view,d)});else{var e=a._pendingAttributionItemsByLayerId;a._inProgress(e[d.uid])||(e[d.uid]=d.fetchAttributionData().then(function(b){b=a._createContributionIndex(b,a._isBingLayer(d));delete e[d.uid];f[d.uid]=b;a._updateAttributionItems()}))}}else a._addIfUnique(b,{layer:d,text:d.copyright})});this._itemsChanged(this.items,b)&&(this.items.removeAll(),this.items.addMany(b))};e.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})};e.prototype._inProgress=
function(a){return a&&!a.isFulfilled()};e.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})};e.prototype._addIfUnique=function(a,c){var d=c.layer,f=c.text;f&&d&&(b.find(a,function(a){return a.layer===d&&a.text===f})||a.push({text:f,layer:d}))};e.prototype._isBingLayer=function(a){return"bing-maps"===a.type};e.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;
for(var d=0;d<a.length;d++){var f=a[d],e=f.coverageAreas;if(!e)return;for(var g=0;g<e.length;g++)for(var k=e[g],m=k.bbox,n=k.zoomMin-(b&&k.zoomMin?1:0),p=k.zoomMax-(b&&k.zoomMax?1:0),k={extent:h.geographicToWebMercator({xmin:m[1],ymin:m[0],xmax:m[3],ymax:m[2],spatialReference:l.SpatialReference.WGS84}),attribution:f.attribution||"",score:null!=k.score?k.score:100,id:d};n<=p;n++)c[n]=c[n]||[],c[n].push(k)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};e.prototype._getDynamicAttribution=function(a,
b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=h.project(d.center.clone().normalize(),b.spatialReference),g={};return a.filter(function(a){var b=!g[a.id]&&e&&f.extentContainsPoint(a.extent,e);b&&(g[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")};d([g.property({readOnly:!0,type:c})],e.prototype,"items",void 0);d([g.property({dependsOn:["view.ready"],
readOnly:!0})],e.prototype,"state",null);d([g.property()],e.prototype,"view",void 0);return e=d([g.subclass("esri.widgets.Attribution.AttributionViewModel")],e)}(g.declared(a))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),function(q,e,n,d,l,a,b,c,k){return function(b){function e(a){a=
b.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=l.widgetLabel;a.view=null;a.viewModel=new c;return a}n(e,b);e.prototype.reset=function(){};e.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,e="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=e?-1:0,e=(a={},a["esri-disabled"]=e,a["esri-interactive"]=!e,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=!g,b);return k.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",
e),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":l.reset,title:l.reset},k.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),k.tsx("span",{class:"esri-icon-font-fallback-text"},l.reset))};e.prototype._reset=function(){this.viewModel.reset()};e.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};d([a.aliasOf("viewModel.goToOverride")],e.prototype,"goToOverride",void 0);d([a.property()],
e.prototype,"iconClass",void 0);d([a.property()],e.prototype,"label",void 0);d([a.aliasOf("viewModel.view")],e.prototype,"view",void 0);d([a.property({type:c}),k.renderable(["viewModel.orientation","viewModel.state"])],e.prototype,"viewModel",void 0);d([a.aliasOf("viewModel.reset")],e.prototype,"reset",null);d([k.accessibleHandler()],e.prototype,"_reset",null);return e=d([a.subclass("esri.widgets.Compass")],e)}(a.declared(b))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(q,e,n,d,l,a,b,c,k){return function(e){function g(b){b=e.call(this,b)||this;b._handles=new a;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);return b}n(g,e);g.prototype.initialize=function(){this._handles.add(b.init(this,"view",this._updateRotationWatcher))};g.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(g.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||a.isWGS84)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});g.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};g.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};g.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};g.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(b.init(this,"view.rotation",this._updateForRotation)):this._handles.add(b.init(this,"view.camera",this._updateForCamera)))};d([c.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],g.prototype,"canShowNorth",null);
d([c.property()],g.prototype,"orientation",void 0);d([c.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],g.prototype,"state",null);d([c.property()],g.prototype,"view",void 0);d([c.property()],g.prototype,"reset",null);return g=d([c.subclass("esri.widgets.CompassViewModel")],g)}(c.declared(l,k))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(q,e,n,d,l,a,b,c,k){return function(b){function e(a){a=b.call(this)||this;a.iconClass="esri-icon-pan2";a.label=l.widgetLabel;a.view=null;a.viewModel=new c;return a}n(e,b);Object.defineProperty(e.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});e.prototype.toggle=function(){};e.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=
d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=e,b);b=(c={},c["esri-navigation-toggle__button--active"]=!e,c);c=d?-1:0;return k.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":l.toggle,title:l.toggle},k.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},k.tsx("span",{class:"esri-icon-pan"})),k.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},k.tsx("span",{class:"esri-icon-rotate"})))};e.prototype._toggle=function(){this.toggle()};d([a.property()],e.prototype,"iconClass",void 0);d([a.property()],e.prototype,"label",void 0);d([a.property({value:"vertical"}),k.renderable()],e.prototype,"layout",null);d([a.aliasOf("viewModel.view"),k.renderable()],e.prototype,"view",void 0);
d([a.property({type:c}),k.renderable(["viewModel.state","viewModel.navigationMode"])],e.prototype,"viewModel",void 0);d([a.aliasOf("viewModel.toggle")],e.prototype,"toggle",null);d([k.accessibleHandler()],e.prototype,"_toggle",null);return e=d([a.subclass("esri.widgets.NavigationToggle")],e)}(a.declared(b))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a,b,c){return function(e){function k(b){b=e.call(this,b)||this;b._handles=new a;b.navigationMode="pan";b.view=null;b.toggle=b.toggle.bind(b);return b}n(k,e);k.prototype.initialize=function(){this._handles.add(b.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};k.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(k.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});k.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};k.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};d([c.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"state",null);d([c.property()],k.prototype,"navigationMode",void 0);d([c.property()],k.prototype,"view",void 0);
d([c.property()],k.prototype,"toggle",null);return k=d([c.subclass("esri.widgets.NavigationToggleViewModel")],k)}(c.declared(l))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,e,n,d,l,a,b,c,k,m){return function(b){function f(a){a=b.call(this)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";
a.label=l.widgetLabel;a.view=null;a.viewModel=new k;return a}n(f,b);f.prototype.postInitialize=function(){this._zoomInButton=new c({action:this.zoomIn,iconClass:"esri-icon-plus",title:l.zoomIn});this._zoomOutButton=new c({action:this.zoomOut,iconClass:"esri-icon-minus",title:l.zoomOut})};Object.defineProperty(f.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});f.prototype.render=function(){var a,b=this.viewModel,c=(a={},a["esri-zoom--horizontal"]=
"horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===b.state&&b.canZoomIn;this._zoomOutButton.enabled="ready"===b.state&&b.canZoomOut;return m.tsx("div",{class:this.classes("esri-zoom esri-widget",c)},this._zoomInButton.render(),this._zoomOutButton.render())};f.prototype.zoomIn=function(){};f.prototype.zoomOut=function(){};d([a.property()],f.prototype,"iconClass",void 0);d([a.property()],f.prototype,"label",void 0);d([a.property({value:"vertical"}),m.renderable()],f.prototype,"layout",
null);d([a.aliasOf("viewModel.view"),m.renderable()],f.prototype,"view",void 0);d([a.property({type:k}),m.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],f.prototype,"viewModel",void 0);d([a.aliasOf("viewModel.zoomIn")],f.prototype,"zoomIn",null);d([a.aliasOf("viewModel.zoomOut")],f.prototype,"zoomOut",null);return f=d([a.subclass("esri.widgets.Zoom")],f)}(a.declared(b))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,e,n,d,l,a,b){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}n(c,a);c.prototype.render=function(){var a,c,d=this.enabled?0:-1,e=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(c={},c[this.iconClass]=!!this.iconClass,c);return b.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:d,
title:this.title},b.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),b.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};c.prototype._triggerAction=function(){this.action.call(this)};d([l.property()],c.prototype,"action",void 0);d([l.property(),b.renderable()],c.prototype,"enabled",void 0);d([l.property(),b.renderable()],c.prototype,"iconClass",void 0);d([l.property(),b.renderable()],c.prototype,"title",void 0);d([b.accessibleHandler()],c.prototype,
"_triggerAction",null);return c=d([l.subclass("esri.widgets.IconButton")],c)}(l.declared(a))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,e,n,d,l,a,b,c){return function(e){function k(a){a=e.call(this,a)||this;a.canZoomIn=null;a.canZoomOut=null;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=
a.zoomOut.bind(a);return a}n(k,e);k.prototype.destroy=function(){this.view=null};Object.defineProperty(k.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new b({view:a}):"3d"===a.type&&(this._zoomConditions=new c):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});k.prototype.zoomIn=function(){this.canZoomIn&&
this._zoomToFactor(.5)};k.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)};k.prototype._zoomToFactor=function(a){if("ready"===this.state){var b=this.view;"3d"===this.view.type?b.goTo({zoomFactor:1/a}):b.goTo({scale:this.get("view.scale")*a})}};d([a.property()],k.prototype,"_zoomConditions",void 0);d([a.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],k.prototype,"canZoomIn",void 0);d([a.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],k.prototype,"canZoomOut",
void 0);d([a.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"state",null);d([a.property()],k.prototype,"view",null);d([a.property()],k.prototype,"zoomIn",null);d([a.property()],k.prototype,"zoomOut",null);return k=d([a.subclass("esri.widgets.Zoom.ZoomViewModel")],k)}(a.declared(l))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);Object.defineProperty(c.prototype,"canZoomIn",{get:function(){var a=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canZoomOut",{get:function(){var a=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||a<b},enumerable:!0,configurable:!0});d([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],c.prototype,"canZoomIn",null);d([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],c.prototype,"canZoomOut",null);d([a.property()],c.prototype,"view",void 0);return c=d([a.subclass("esri.widgets.Zoom.ZoomConditions2D")],c)}(a.declared(l))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.canZoomIn=!0;a.canZoomOut=!0;return a}n(c,b);d([a.property({readOnly:!0})],c.prototype,"canZoomIn",void 0);d([a.property({readOnly:!0})],c.prototype,"canZoomOut",void 0);return c=d([a.subclass("esri.widgets.Zoom.ZoomConditions3D")],c)}(a.declared(l))})},"esri/views/2d/layers/TileLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Error ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../engine/BitmapContainer ../engine/BitmapTile ./LayerView2D ./support/popupUtils2D ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ../../layers/TileLayerView".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r){var t=[0,0];return function(e){function m(){var a=null!==e&&e.apply(this,arguments)||this;a._tileStrategy=null;a._tileInfoView=null;a._fetchQueue=null;a._tileRequests=new Map;a.container=new c.BitmapContainer;a.layer=null;return a}n(m,e);m.prototype.initialize=function(){var b=this,c=this.layer.tileInfo,c=c&&c.spatialReference,d;c||(d=new l("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));c.equals(this.view.spatialReference)||
(d=new l("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}));this.watch("resampling",function(a){b.refresh()});d&&this.addResolvingPromise(a.reject(d))};Object.defineProperty(m.prototype,"resampling",{get:function(){return!("resampling"in this.layer)||!1!==this.layer.resampling},enumerable:!0,configurable:!0});m.prototype.hitTest=function(a,b){return null};m.prototype.update=function(a){this._fetchQueue.pause();
this._fetchQueue.state=a.state;this._tileStrategy.update(a);this._fetchQueue.resume();this.notifyChange("updating")};m.prototype.attach=function(){var a=this;this._tileInfoView=new f(this.layer.tileInfo,this.layer.fullExtent);this._fetchQueue=new u({tileInfoView:this._tileInfoView,tileServers:"tileServers"in this.layer?this.layer.tileServers:null,concurrency:this.layer.url&&-1!==this.layer.url.indexOf("tiles.arcgis.com")?12:6,process:function(b,c){return a.fetchTile(b,c)}});this._tileStrategy=new p({cachePolicy:"keep",
resampling:this.resampling,acquireTile:function(b){return a.acquireTile(b)},releaseTile:function(b){return a.releaseTile(b)},tileInfoView:this._tileInfoView})};m.prototype.detach=function(){this._tileStrategy.destroy();this._fetchQueue.clear();this.container.removeAllChildren();this._fetchQueue=this._tileStrategy=this._tileInfoView=null};m.prototype.moveStart=function(){this.requestUpdate()};m.prototype.viewChange=function(){this.requestUpdate()};m.prototype.moveEnd=function(){this.requestUpdate()};
m.prototype.createFetchPopupFeaturesQueryGeometry=function(a,b){return g.createQueryGeometry(a,b,this.view)};m.prototype.doRefresh=function(){var a=this;this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach(function(b){return a._enqueueTileFetch(b)}),this.notifyChange("updating"))};m.prototype.isUpdating=function(){var a=!0;this._tileRequests.forEach(function(b){a=a&&b.isFulfilled()});return!a};m.prototype.getTileBounds=function(a,b){return this._tileInfoView.getTileBounds(a,
b)};m.prototype.getTileCoords=function(a,b){return this._tileInfoView.getTileCoords(a,b)};m.prototype.getTileResolution=function(a){return this._tileInfoView.getTileResolution(a)};m.prototype.acquireTile=function(a){var b=k.BitmapTile.pool.acquire();b.key.set(a);a=this._tileInfoView.getTileCoords(t,b.key);b.x=a[0];b.y=a[1];b.resolution=this._tileInfoView.getTileResolution(b.key);a=this._tileInfoView.tileInfo.size;b.width=a[0];b.height=a[1];this._enqueueTileFetch(b);this.requestUpdate();return b};
m.prototype.releaseTile=function(a){var b=this,c=this._tileRequests.get(a);c&&!c.isFulfilled()&&c.cancel();this._tileRequests.delete(a);this.container.removeChild(a);a.once("detach",function(){k.BitmapTile.pool.release(a);b.requestUpdate()});this.requestUpdate()};m.prototype.fetchTile=function(a,b){var c=this;b="tilemapCache"in this.layer?this.layer.tilemapCache:null;if(!b)return this._fetchImage(a).catch(function(a){if(!c.resampling)return c._createBlankImage();throw a;});var d=h.pool.acquire();
return b.fetchAvailabilityUpsample(a.level,a.row,a.col,d).then(function(){return d.level===a.level||c.resampling?c._fetchImage(d):c._createBlankImage()}).catch(function(b){if("AbortError"===b.name)throw b;return c._fetchImage(a)}).then(function(b){return c.resampling&&d.level!==a.level?c._resampleImage(b,d.level,d.row,d.col,a.level,a.row,a.col):b})};m.prototype._enqueueTileFetch=function(a){var b=this;if(!this._fetchQueue.has(a.key)){var c=this._fetchQueue.push(a.key).then(function(c){a.source=c;
a.width=b._tileInfoView.tileInfo.size[0];a.height=b._tileInfoView.tileInfo.size[1];a.once("attach",function(){return b.requestUpdate()});b.container.addChild(a);b.requestUpdate()});this._tileRequests.set(a,c)}};m.prototype._fetchImage=function(a){return this.layer.fetchTile(a.level,a.row,a.col,{timestamp:this.refreshTimestamp})};m.prototype._resampleImage=function(a,b,c,d,f,e,g){var h=this._tileInfoView.tileInfo.size,k=this._tileInfoView.getTileResolution(b),l=this._tileInfoView.getTileResolution(f);
f=this._tileInfoView.getLODInfoAt(f);g=f.getXForColumn(g);e=f.getYForRow(e);f=this._tileInfoView.getLODInfoAt(b);b=f.getXForColumn(d);d=f.getYForRow(c);c=Math.round((g-b)/k);b=Math.round(-(e-d)/k);d=Math.round(l/k*h[0]);k=Math.round(l/k*h[1]);l=this._createBlankImage();l.getContext("2d").drawImage(a,c,b,d,k,0,0,h[0],h[1]);return l};m.prototype._createBlankImage=function(){var a=this._tileInfoView.tileInfo.size,b=document.createElement("canvas");b.width=a[0];b.height=a[1];return b};d([b.property({dependsOn:["layer.resampling?"]})],
m.prototype,"resampling",null);return m=d([b.subclass("esri.views.2d.layers.TileLayerView2D")],m)}(b.declared(m,r))})},"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ./webgl/enums".split(" "),function(q,e,n,d,l,a){Object.defineProperty(e,"__esModule",{value:!0});q=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);c.prototype.doRender=function(c){this.visible&&
c.drawPhase===a.WGLDrawPhase.MAP&&b.prototype.doRender.call(this,c)};c.prototype.renderChildren=function(b){var c=this.stage.painter,d=this.children,f=b.drawPhase;this.sortChildren(function(a,b){return b.resolution-a.resolution});b.drawPhase=a.WGLDrawPhase.CLIP;c.startStencilBurn();for(var e=0,k=d.length;e<k;e++){var l=d[e];l.attached&&l.visible&&(c.stencilRef=e,l.processRender(b))}b.drawPhase=f;c.startStencilDraw();e=0;for(k=d.length;e<k;e++)l=d[e],l.attached&&l.visible&&(c.stencilRef=e,l.processRender(b));
c.endStencilDraw()};return c}(l.Container);e.BitmapContainer=q})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a._childrenSet=new Set;a._childrenToAttach=[];a._childrenToDetach=[];a._renderPhase=3;a.children=[];return a}n(a,d);Object.defineProperty(a.prototype,"numChildren",
{get:function(){return this.children.length},enumerable:!0,configurable:!0});a.prototype.detach=function(){for(var a=0,c=this.children.concat(this._childrenToDetach);a<c.length;a++){var d=c[a];d.attached&&(this.detachChild(d),d.attached=!1,d.parent=null)}};a.prototype.doRender=function(a){var b=a.globalOpacity;a.globalOpacity*=this.opacity;this._renderPhase=0;this.attachChildren();this._renderPhase=1;for(var d=this._childrenToDetach;0<d.length;){var e=d.shift();this.detachChild(e);e.attached=!1;e.parent=
null;e.stage=null}this._renderPhase=2;this.renderChildren(a);this._renderPhase=3;a.globalOpacity=b};a.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};a.prototype.addChildAt=function(a,c){void 0===c&&(c=this.numChildren);if(!a||this.contains(a))return a;var b=a.parent;b&&b!==this&&b.removeChild(a);c>=this.numChildren?this.children.push(a):this.children.splice(c,0,a);this._childrenSet.add(a);c=this._childrenToDetach.indexOf(a);-1<c&&this._childrenToDetach.splice(c,1);
this._childrenToAttach.push(a);2<=this._renderPhase&&this.requestRender();return a};a.prototype.contains=function(a){return this._childrenSet.has(a)};a.prototype.getChildIndex=function(a){return this.children.indexOf(a)};a.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};a.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};a.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):
a};a.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),2<=this._renderPhase&&this.requestRender();else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};a.prototype.requestChildRender=function(a){a&&a.parent===this&&2<=this._renderPhase&&this.requestRender()};a.prototype.setChildIndex=function(a,c){var b=this.getChildIndex(a);
-1<b&&(this.children.splice(b,1),this.children.splice(c,0,a),2<=this._renderPhase&&this.requestRender())};a.prototype.sortChildren=function(a){2<this._renderPhase&&this.requestRender();return this.children.sort(a)};a.prototype.attachChildren=function(){var a=this._childrenToAttach;if(0!==a.length)for(var c=0,d=!1;!d;)d=a[c],d.parent=this,d.stage=this.stage,this.attachChild(d)?(d.attached=!0,a.splice(c,1)):++c,d=a.length===c};a.prototype.renderChildren=function(a){for(var b=this.children,d=b.length,
e=0;e<d;e++)b[e].processRender(a)};a.prototype.attachChild=function(a){return a.attach()};a.prototype.detachChild=function(a){a.detach()};return a}(d.DisplayObject);e.Container=q})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../../../core/Evented"],function(q,e,n,d){Object.defineProperty(e,"__esModule",{value:!0});q=function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a._renderRequestedCalled=!1;a._attached=
!1;a._isReady=!1;a._opacity=1;a.renderRequested=!1;a._visible=!0;return a}n(a,d);Object.defineProperty(a.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isReady",{get:function(){return this._attached&&this._isReady},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.attach=function(){this.ready();return!0};a.prototype.detach=function(){};a.prototype.processRender=function(a){this.visible&&this.attached&&(this._renderRequestedCalled=
!1,this.doRender(a),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render"))};a.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};a.prototype.dispose=function(){};a.prototype.ready=function(){this._isReady=!0;this.emit("isReady")};return a}(d);
e.DisplayObject=q})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(q,e){Object.defineProperty(e,"__esModule",{value:!0});(function(e){e[e.FILL=0]="FILL";e[e.LINE=1]="LINE";e[e.MARKER=2]="MARKER";e[e.TEXT=3]="TEXT";e[e.LABEL=4]="LABEL"})(e.WGLGeometryType||(e.WGLGeometryType={}));(function(e){e[e.SUCCEEDED=0]="SUCCEEDED";e[e.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(e.WGLGeometryTransactionStatus||(e.WGLGeometryTransactionStatus={}));(function(e){e[e.NONE=
0]="NONE";e[e.MAP=1]="MAP";e[e.LABEL=2]="LABEL";e[e.LABEL_ALPHA=4]="LABEL_ALPHA";e[e.HITTEST=8]="HITTEST";e[e.HIGHLIGHT=16]="HIGHLIGHT";e[e.CLIP=32]="CLIP";e[e.DEBUG=64]="DEBUG";e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(e.WGLDrawPhase||(e.WGLDrawPhase={}));(function(e){e[e.SIZE=0]="SIZE";e[e.COLOR=1]="COLOR";e[e.OPACITY=2]="OPACITY";e[e.ROTATION=3]="ROTATION"})(e.VVType||(e.VVType={}));(function(e){e[e.NONE=0]="NONE";e[e.OPACITY=1]="OPACITY";e[e.COLOR=2]="COLOR";e[e.ROTATION=4]="ROTATION";e[e.SIZE_MINMAX_VALUE=
8]="SIZE_MINMAX_VALUE";e[e.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";e[e.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";e[e.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(e.WGLVVFlag||(e.WGLVVFlag={}));(function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(e.WGLVVTarget||(e.WGLVVTarget={}));(function(e){e[e.UNKNOWN=0]="UNKNOWN";e[e.BUTT=
1]="BUTT";e[e.ROUND=2]="ROUND";e[e.SQUARE=3]="SQUARE"})(e.CapType||(e.CapType={}));(function(e){e[e.UNKNOWN=0]="UNKNOWN";e[e.MITER=1]="MITER";e[e.BEVEL=2]="BEVEL";e[e.ROUND=3]="ROUND"})(e.JoinType||(e.JoinType={}));(function(e){e[e.SCREEN=0]="SCREEN";e[e.MAP=1]="MAP"})(e.Alignment||(e.Alignment={}));(function(e){e[e.SPRITE=0]="SPRITE";e[e.GLYPH=1]="GLYPH"})(e.MosaicType||(e.MosaicType={}))})},"esri/views/2d/engine/BitmapTile":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/ObjectPool ../tiling ./Bitmap ./Tiled".split(" "),
function(q,e,n,d,l,a,b,c){Object.defineProperty(e,"__esModule",{value:!0});q=function(b){function c(c){c=b.call(this,c)||this;c.key=new a.TileKey(0,0,0,0);return c}n(c,b);c.prototype.acquire=function(a){};c.prototype.release=function(){this.key.set(0,0,0,0);this.source=null};c.pool=new l(c,!0);return c}(c(b.Bitmap));e.BitmapTile=q})},"esri/views/2d/engine/Bitmap":function(){define("require exports ../../../core/tsSupport/extendsHelper @dojo/framework/shim/Set ./DisplayObject ../../webgl/Texture".split(" "),
function(q,e,n,d,l,a){function b(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;a.render(b.getContext("2d"));return b}function c(b,c,d){var f={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,flipped:!0};c&&d&&(f.width=c,f.height=d);return new a(b,f)}function k(a){g.has(a)&&(m.splice(m.indexOf(a),1),g.delete(a))}Object.defineProperty(e,"__esModule",{value:!0});var m=[],g=new d.default;q=function(a){function d(b){void 0===b&&(b=null);var c=
a.call(this)||this;c._height=void 0;c.pixelRatio=1;c.resolution=0;c.rotation=0;c._source=null;c._width=void 0;c.x=0;c.y=0;c.source=b;c.requestRender=c.requestRender.bind(c);return c}n(d,a);Object.defineProperty(d.prototype,"height",{get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(a){this._height=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"source",{get:function(){return this._source},set:function(a){this._source=a;this.invalidateTexture()},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sourceHeight",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sourceWidth",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return void 0!==this._width?
this._width:this.sourceWidth},set:function(a){this._width=a},enumerable:!0,configurable:!0});d.prototype.attach=function(){this.updateTexture();a.prototype.attach.call(this);return!0};d.prototype.detach=function(){this._texture.dispose();this._texture=null;k(this)};d.prototype.invalidateTexture=function(){this.attached?this.updateTexture():k(this)};d.prototype.updateTexture=function(){this._texture||(this._texture=this.source?c(this.stage.context,this.sourceWidth,this.sourceHeight):c(this.stage.context));
var a=this.source;a?(this._texture.resize(this.sourceWidth,this.sourceHeight),a&&"render"in a?this._texture.setData(b(a)):!a||"render"in a||this._texture.setData(a),this.sourceWidth===this.width&&this.sourceHeight===this.height||this._texture.generateMipmap(),this.ready(),this.requestRender()):this._texture.setData(null)};d.prototype.setSamplingMode=function(a){this._texture&&(this._texture.descriptor.hasMipmap?this._texture.setSamplingMode(9728===a?9985:9729===a?9987:a):this._texture.setSamplingMode(a))};
d.prototype.bind=function(a){this._texture&&this.stage.context.bindTexture(this._texture,a)};d.prototype.doRender=function(a){if(this.source&&0<this.width&&this.isReady){var b=this.resolution/this.pixelRatio/a.state.resolution;.05>b||this.stage.painter.drawBitmap(a,this,b)}};return d}(l.DisplayObject);e.Bitmap=q})},"esri/views/webgl/Texture":function(){define(["require","exports","../../core/has"],function(q,e,n){return function(){function d(e,a,b){this._glName=this._context=null;this._id=-1;this._desc=
void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=e;this._desc={pixelFormat:a.pixelFormat,internalFormat:a.internalFormat,dataType:a.dataType,target:a.target?a.target:3553,samplingMode:a.samplingMode?a.samplingMode:9729,wrapMode:a.wrapMode?a.wrapMode:10497,maxAnisotropy:a.maxAnisotropy,flipped:void 0!==a.flipped?a.flipped:!1,hasMipmap:void 0!==a.hasMipmap?a.hasMipmap:!1,unpackAlignment:a.unpackAlignment?a.unpackAlignment:4,width:a.width,height:a.height,
preMultiplyAlpha:void 0!==a.preMultiplyAlpha?a.preMultiplyAlpha:!1,textureCoordinateScaleFactor:a.textureCoordinateScaleFactor||null};this._id=++d._nextId;this.setData(b)}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});
d.prototype.dispose=function(){var d=this;if(this._context){if(this._glName){var a=this._context.gl;this._boundToUnits.forEach(function(a){d._context.bindTexture(null,a)});a.deleteTexture(this._glName);this._glName=null}this._context=null}};d.prototype.resize=function(d,a){var b=this._desc;if(b.width!==d||b.height!==a)b.width=d,b.height=a,this.setData(null)};d.prototype.setData=function(e){var a=this._context.gl;this._glName||(this._glName=a.createTexture());void 0===e&&(e=null);null===e&&(this._desc.width=
this._desc.width||4,this._desc.height=this._desc.height||4);var b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var c=this._desc;d._validateTexture(c);a.pixelStorei(a.UNPACK_ALIGNMENT,c.unpackAlignment);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0);var k=c.pixelFormat,l=c.internalFormat?c.internalFormat:k;if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof
HTMLVideoElement)c.width&&c.height&&console.assert(e.width===c.width&&e.height===c.height),a.texImage2D(a.TEXTURE_2D,0,l,k,c.dataType,e),c.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=e.width),void 0===this._desc.height&&(this._desc.height=e.height);else{null!=c.width&&null!=c.height||console.error("Width and height must be specified!");a.DEPTH24_STENCIL8&&l===a.DEPTH_STENCIL&&(l=a.DEPTH24_STENCIL8);var g=c.width,f=c.height;if(null!=e&&"type"in e&&"compressed"===e.type){k=
Math.round(Math.log(Math.max(g,f))/Math.LN2)+1;c.hasMipmap=c.hasMipmap&&k===e.levels.length;for(var h=0;;++h){a.compressedTexImage2D(a.TEXTURE_2D,h,l,g,f,0,e.levels[Math.min(h,e.levels.length-1)]);if(1===g&&1===f||!c.hasMipmap)break;g=Math.max(1,g>>1);f=Math.max(1,f>>1)}}else if(e)a.texImage2D(a.TEXTURE_2D,0,l,g,f,0,k,c.dataType,e),c.hasMipmap&&this.generateMipmap();else for(h=0;;++h){a.texImage2D(a.TEXTURE_2D,h,l,g,f,0,k,c.dataType,null);if(1===g&&1===f||!c.hasMipmap)break;g=Math.max(1,g>>1);f=Math.max(1,
f>>1)}}d._applySamplingMode(a,this._desc);d._applyWrapMode(a,this._desc);d._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(b,0)};d.prototype.updateData=function(d,a,b,c,e,m){m||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var g=this._context.gl,f=this._desc,h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>a||0>b||c>f.width||e>f.height||a+c>f.width||b+
e>f.height)&&console.error("An attempt to update out of bounds of the texture!");m instanceof ImageData||m instanceof HTMLImageElement||m instanceof HTMLCanvasElement||m instanceof HTMLVideoElement?(console.assert(m.width===c&&m.height===e),g.texSubImage2D(g.TEXTURE_2D,d,a,b,f.pixelFormat,f.dataType,m)):g.texSubImage2D(g.TEXTURE_2D,d,a,b,c,e,f.pixelFormat,f.dataType,m);this._context.bindTexture(h,0)};d.prototype.generateMipmap=function(){var e=this._desc;e.hasMipmap||(e.hasMipmap=!0,d._validateTexture(e));
9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);e=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var a=this._context.gl;a.generateMipmap(a.TEXTURE_2D);this._context.bindTexture(e,0)};d.prototype.setSamplingMode=function(e){e!==this._desc.samplingMode&&(this._desc.samplingMode=e,d._validateTexture(this._desc),this._samplingModeDirty=!0)};d.prototype.setWrapMode=function(e){e!==this._desc.wrapMode&&
(this._desc.wrapMode=e,d._validateTexture(this._desc),this._wrapModeDirty=!0)};d.prototype.applyChanges=function(){var e=this._context.gl,a=this._desc;this._samplingModeDirty&&(d._applySamplingMode(e,a),this._samplingModeDirty=!1);this._wrapModeDirty&&(d._applyWrapMode(e,a),this._wrapModeDirty=!1)};d.prototype.setBoundToUnit=function(d,a){a?this._boundToUnits.add(d):this._boundToUnits.delete(d)};d._isPowerOfTwo=function(d){return 0===(d&d-1)};d._validateTexture=function(e){(0>e.width||0>e.height)&&
console.error("Negative dimension parameters are not allowed!");d._isPowerOfTwo(e.width)&&d._isPowerOfTwo(e.height)||("number"===typeof e.wrapMode?33071!==e.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===e.wrapMode.s&&33071===e.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),e.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};d._applySamplingMode=function(d,a){var b=a.samplingMode,
c=a.samplingMode;if(9985===b||9987===b)b=9729,a.hasMipmap||(c=9729);else if(9984===b||9986===b)b=9728,a.hasMipmap||(c=9728);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,c)};d._applyWrapMode=function(d,a){"number"===typeof a.wrapMode?(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a.wrapMode),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,a.wrapMode)):(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a.wrapMode.s),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,
a.wrapMode.t))};d._applyAnisotropicFilteringParameters=function(d,a){if(null!=a.maxAnisotropy){var b=d.capabilities.textureFilterAnisotropic;b&&(d=d.gl,d.texParameterf(d.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY,a.maxAnisotropy))}};d._nextId=0;return d}()})},"esri/views/2d/engine/Tiled":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],function(q,e,n){return function(d){return function(d){function a(){for(var a=0;a<arguments.length;a++);return d.call(this)||this}n(a,d);return a}(d)}})},
"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../layers/LayerView".split(" "),function(q,e,n,d,l,a,b){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.attached=!1;a.lastUpdateId=-1;a.moving=!1;a.updateRequested=!1;return a}n(c,b);c.prototype.initialize=function(){var a=this;this.when(function(){a.requestUpdate()});
var b=function(){return a.notifyChange("rendering")};this.handles.add([l.init(this,"suspended",function(b){a.container&&(a.container.visible=!b);a.view&&!b&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0),l.init(this,"fullOpacity",function(b){a.container&&(a.container.opacity=b)},!0),l.on(this,"container","post-render",b),l.on(this,"container","will-render",b)])};c.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.handles.remove("initialize");this.updateRequested=
!1;this.layer=null};Object.defineProperty(c.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});c.prototype.isVisibleAtScale=function(a){var b=!0,c=this.layer,d=c.minScale,c=c.maxScale;if(null!=d&&null!=
c){var b=!d,e=!c;!b&&a<=d&&(b=!0);!e&&a>=c&&(e=!0);b=b&&e}return b};c.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};c.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};c.prototype.isUpdating=function(){return!1};c.prototype.isRendering=function(){return!1};
c.prototype.canResume=function(){var a=this.inherited(arguments);a&&(a=this.isVisibleAtScale(this.view.scale));return a};d([a.property()],c.prototype,"attached",void 0);d([a.property()],c.prototype,"container",void 0);d([a.property()],c.prototype,"moving",void 0);d([a.property({dependsOn:["attached","suspended","moving"]})],c.prototype,"rendering",null);d([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],c.prototype,"suspended",void 0);d([a.property({readOnly:!0})],c.prototype,
"updateParameters",void 0);d([a.property()],c.prototype,"updateRequested",void 0);d([a.property({dependsOn:["updateRequested","attached"]})],c.prototype,"updating",null);d([a.property()],c.prototype,"view",void 0);return c=d([a.subclass("esri.views.2d.layers.LayerView2D")],c)}(a.declared(b))})},"esri/views/2d/layers/support/popupUtils2D":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/tsSupport/decorateHelper","../../../../geometry/Extent"],function(q,
e,n,d,l){Object.defineProperty(e,"__esModule",{value:!0});e.createQueryGeometry=function(a,b,c){var d=c.get("state.resolution"),d=b*("number"===typeof d?d:1);b=a.clone().offset(-d,-d);a=a.clone().offset(d,d);return new l({xmin:Math.min(b.x,a.x),ymin:Math.min(b.y,a.y),xmax:Math.max(b.x,a.x),ymax:Math.max(b.y,a.y),spatialReference:c.spatialReference})}})},"esri/views/layers/TileLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Error ../../core/promiseUtils ../../core/accessorSupport/decorators ../../renderers/support/clickToleranceUtils ./RefreshableLayerView".split(" "),
function(q,e,n,d,l,a,b,c,k,m,g){return function(f){function e(a){return f.call(this,a)||this}n(e,f);e.prototype.fetchPopupFeatures=function(d){return a(this,void 0,void 0,function(){var f,e,g,h=this;return l(this,function(k){f=this.layer;if(!d)return[2,c.reject(new b("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:f}))];if("tile"!==f.type)return[2,c.reject(new b("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:f.type}))];e=this.get("view.scale");g=f.allSublayers.toArray().filter(function(a){var b=
0===a.minScale||e<=a.minScale,c=0===a.maxScale||e>=a.maxScale;return a.popupTemplate&&a.popupEnabled&&a.visible&&b&&c});return[2,c.eachAlways(g.map(function(b){return a(h,void 0,void 0,function(){var a,c,f,e;return l(this,function(g){switch(g.label){case 0:return a=b.createQuery(),c=m.calculateTolerance(b.renderer),a.geometry=this.createFetchPopupFeaturesQueryGeometry(d,c),f=a,[4,b.popupTemplate.getRequiredFields()];case 1:return f.outFields=g.sent(),[4,b.queryFeatures(a)];case 2:return e=g.sent(),
[2,e.features]}})})})).then(function(a){return[].concat.apply([],a.map(function(a){return a.value}).filter(Boolean))})]})})};d([k.property()],e.prototype,"layer",void 0);return e=d([k.subclass("esri.views.layers.TileLayerView")],e)}(k.declared(g))})},"esri/renderers/support/clickToleranceUtils":function(){define(["require","exports"],function(q,e){function n(d,e){return e&&e.xoffset?Math.max(d,Math.abs(e.xoffset)):e&&e.yoffset?Math.max(d,Math.abs(e.yoffset)):d}Object.defineProperty(e,"__esModule",
{value:!0});e.calculateTolerance=function(d){if(!d)return 6;if("simple"===d.type)return n(6,d.symbol);if("unique-value"===d.type){var e=6;d.uniqueValueInfos.forEach(function(a){e=n(e,a.symbol)});return e}if("class-breaks"===d.type){var a=6;d.classBreakInfos.forEach(function(b){a=n(a,b.symbol)});return a}return 6}})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,e,n,d,l,a){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.refreshTimestamp=null;return a}n(c,b);c.prototype.refresh=function(a){void 0===a&&(a=Date.now());this._set("refreshTimestamp",a);this.doRefresh&&this.doRefresh()};d([a.property()],c.prototype,"layer",void 0);d([a.aliasOf("layer.refreshInterval")],c.prototype,"refreshInterval",void 0);d([a.property({readOnly:!0})],c.prototype,"refreshTimestamp",void 0);return c=d([a.subclass("esri.layers.mixins.RefreshableLayerView")],
c)}(a.declared(l))})},"*now":function(q){q(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/Handles ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D".split(" "),function(q,e,n,d,l,a,b,c,k,m,g,f,h,u,p,r,t,A,
w,x,v){function y(){return k.create(function(a){q(["./2d/RenderingCore2D"],function(b){D=b.Stage;C=b.GraphicsView2D;E=b.LabelManager;B=b.MapViewNavigation;F=b.MagnifierView2D;a()})})}var z=c.getLogger("esri.views.MapView"),D,C,E,B,F;return function(c){function e(b){b=c.call(this,b)||this;b._graphicsView=null;b._magnifierView=null;b._mapViewHandles=new a;b._stage=null;b._resolveWhenReady=[];b.highlightOptions=new A;b.magnifier=new p;b.inputManager=new t({view:b});b.mapViewNavigation=null;b.supersampleScreenhotsEnabled=
!0;b.ui=new v;b.rendering=!1;f.initialize();return b}n(e,c);Object.defineProperty(e.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});e.prototype.toMap=function(a){if(m.isSupportedScreenPointEvent(a)){var b=m.createScreenPointFromSupportedEvent(this,
a);return this.inherited(arguments,[b])}return this.inherited(arguments)};e.prototype.hitTest=function(a){var b=m.isSupportedScreenPointEvent(a)?m.createScreenPointFromSupportedEvent(this,a):a;if(!this._setup||isNaN(b.x)||isNaN(b.y))return k.resolve({screenPoint:b,results:[]});var c=this.toMap(b);a=[this._graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());return k.all(a.map(function(a){return a&&a.hitTest?a.hitTest(b.x,b.y):null})).then(function(a){return{screenPoint:b,results:a.filter(function(a){return null!=
a}).map(function(a){return{mapPoint:c,graphic:a}})}})};e.prototype.takeScreenshot=function(a){return this._setup?this._stage.takeScreenshot(w.toRenderSettings(a,this),this.allLayerViews):k.reject("Map view cannot be used before it is ready")};e.prototype.on=function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};e.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};
e.prototype.graphicChanged=function(a){this._graphicsView&&this._graphicsView.graphicUpdateHandler(a)};e.prototype.whenReady=function(){var a=this;return k.create(function(b){a._setup?b(a):a._resolveWhenReady.push(b)})};e.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};e.prototype.validate=function(){var a=x.check({supportsMajorWebPerformanceCaveat:!0});b("safari")&&9>b("safari")&&(a=new l("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",
requiredVersion:9,detectedVersion:b("safari")}));return a?(z.warn("#validate()",a.message),k.reject(a)):y()};e.prototype._startup=function(){var a=this;if(!this._setup){this.inherited(arguments);this.graphics.owner=this;var b=new D(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled}),c=new C({view:this,graphics:this.graphics}),d=new B({view:this,animationManager:this.animationManager}),e=new E({view:this});this._magnifierView=new F;this._magnifierView.magnifier=
this.magnifier;this._stage=b;this._graphicsView=this._frameTask.graphicsView=c;this._set("mapViewNavigation",d);this._set("labelManager",e);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",function(c){return b.state=a.state},!0),this.watch("background",
function(a){return b.background=a},!0),this.watch("magnifier",function(b){return a._magnifierView.magnifier=b},!0),g.init(this,"highlightOptions.color,highlightOptions.haloOpacity,highlightOptions.fillOpacity",function(){a._stage.setHighlightOptions(a.highlightOptions);a._stage.requestRender()})]);b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)})}};e.prototype._tearDown=function(){this._setup&&
(this._mapViewHandles.removeAll(),this.layerViewManager.clear(),this.labelManager.destroy(),this._graphicsView.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.mapViewNavigation.destroy(),this._magnifierView=this._graphicsView=this._stage=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.inherited(arguments))};e.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=
a.container}).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this._graphicsView.container);this._stage.addChild(this._magnifierView)};d([h.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],e.prototype,"background",null);d([h.property({type:A})],e.prototype,"highlightOptions",void 0);d([h.property({type:p})],e.prototype,"magnifier",void 0);d([h.property({readOnly:!0})],e.prototype,"inputManager",void 0);d([h.property({readOnly:!0})],e.prototype,
"mapViewNavigation",void 0);d([h.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],e.prototype,"interacting",null);d([h.property({type:Boolean,constructOnly:!0})],e.prototype,"supersampleScreenhotsEnabled",void 0);d([h.property({type:v})],e.prototype,"ui",void 0);d([h.property({readOnly:!0})],e.prototype,"rendering",void 0);d([h.property({constructOnly:!0})],e.prototype,"renderCanvas",void 0);return e=d([h.subclass("esri.views.MapView")],e)}(h.declared(r,u))});