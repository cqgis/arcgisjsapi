// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/screenUtils ../../../engine/webgl/CIMSymbolHelper ../../../engine/webgl/definitions ../../graphics/graphicsUtils".split(" "),function(w,k,l,m,n,p){function q(a){if(!("visualVariables"in a&&a.hasVisualVariables("size")))return 0;a=a.getVisualVariablesForType("size");if(!a[0])return 0;a=a[0];if("stops"===a.transformationType)return a.stops.map(function(a){return a.size}).reduce(e,0);if("clamped-linear"===a.transformationType)return"number"===typeof a.maxSize?
a.maxSize:a.maxSize.stops.map(function(a){return a.size}).reduce(e,0);if("real-world-size"===a.transformationType)return 30}function c(a,b){return null==a?b:a}function r(a,b){if("simple-marker"===a.type){var f=Math.max(c(a.size,12),b);return g(a)+.707*f}if("picture-marker"===a.type){var d=Math.max(c(a.height,12),b),f=c(a.width,12)*(d/c(a.height,12))/2,d=d/2;return g(a)+Math.sqrt(f*f+d*d)}if("text"===a.type){p.getTextSymbolEstimatedSize(h,a,n.AVERAGE_GLYPH_MOSAIC_ITEM);var f=h[2]*(c(a.horizontalAlignment,
"top")in t?1:.5),d=h[3]*(c(a.horizontalAlignment,"center")in u?1:.5),e;e=null==a.font?9:c(a.font.size,9);b=Math.max(e,b)/e;return g(a)+Math.sqrt(f*f+d*d)*b}if("simple-line"===a.type)return Math.max(c(a.width,.75),b)/2;if("simple-fill"===a.type||"picture-fill"===a.type)return Math.max(null==a.outline?.75:c(a.outline.width,.75),b)/2;if("cim"===a.type)return a=m.CIMSymbolHelper.getEnvelope(a),Math.sqrt(a.width*a.width+a.height*a.height)}function g(a){var b=c(a.xoffset,0);a=c(a.yoffset,0);return Math.sqrt(b*
b+a*a)}function e(a,b){return Math.max(a,b)}Object.defineProperty(k,"__esModule",{value:!0});var v={"simple-marker":1,"picture-marker":1,text:1,"simple-line":1,"simple-fill":1,"picture-fill":1,cim:1};k.computePxBuffer=function(a){if("simple"!==a.type&&"class-breaks"!==a.type&&"unique-value"!==a.type)return 0;var b=a.getSymbols();return l.pt2px(b.map(function(b){var c=q(a);b=b.type in v?Math.min(Math.max(5,r(b,c)),75):0;return b}).reduce(e,0))};var h=[0,0,0,0],t={left:1,right:1},u={top:1,bottom:1,
baseline:1}});