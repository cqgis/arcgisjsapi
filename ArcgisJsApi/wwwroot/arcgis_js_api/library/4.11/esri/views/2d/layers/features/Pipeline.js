// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(m,a){return function(a,f){a.__bases__=f.__bases__}})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(m){return function(a,l,f,h){var g=null;return m.create(function(k,e){function n(c){try{b(h.next(c))}catch(q){e(q)}}function d(c){try{b(h["throw"](c))}catch(q){e(q)}}function b(c){c.done?(g=m.when(c.value),g.then(k,e)):(g=m.when(c.value),g.then(n,d))}b((h=h.apply(a,
l||[])).next())},function(a){g&&g.cancel(a)})}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(m,a){function l(d){return function(b){return f([d,b])}}function f(d){if(g)throw new TypeError("Generator is already executing.");for(;h;)try{if(g=1,k&&(e=d[0]&2?k["return"]:d[0]?k["throw"]||((e=k["return"])&&e.call(k),0):k.next)&&!(e=e.call(k,d[1])).done)return e;if(k=0,e)d=[d[0]&2,e.value];switch(d[0]){case 0:case 1:e=d;break;case 4:return h.label++,{value:d[1],
done:!1};case 5:h.label++;k=d[1];d=[0];continue;case 7:d=h.ops.pop();h.trys.pop();continue;default:if(!(e=h.trys,e=0<e.length&&e[e.length-1])&&(6===d[0]||2===d[0])){h=0;continue}if(3===d[0]&&(!e||d[1]>e[0]&&d[1]<e[3]))h.label=d[1];else if(6===d[0]&&h.label<e[1])h.label=e[1],e=d;else if(e&&h.label<e[2])h.label=e[2],h.ops.push(d);else{e[2]&&h.ops.pop();h.trys.pop();continue}}d=a.call(m,h)}catch(b){d=[6,b],k=0}finally{g=e=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var h={label:0,sent:function(){if(e[0]&
1)throw e[1];return e[1]},trys:[],ops:[]},g,k,e,n;return n={next:l(0),"throw":l(1),"return":l(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(m,a,l,f,h,g){a=a.default;m.before(function(a,n){m.hasMixin(a,k)&&f.processPrototype(n)});m.after(function(a){m.hasMixin(a,k)&&
(f.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=m(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new a(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}},__accessor__:null,postscript:function(a){var e=this.__accessor__;a=e.ctorArgs||a;e.initialize();a&&(this.set(a),e.ctorArgs=null);e.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(e){console.warn(e.stack)}else g.removeTarget(this),this.__accessor__.destroy()},get:function(a){return l.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,n){h.set(this,a,n);return this},watch:function(a,n,d){return g.watch(this,a,n,d)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
n){return this.__accessor__.override(a,n)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,n){return this.__accessor__.internalSet(a,n)}});return k})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(m,a,l){function f(a,n){a&&!Array.isArray(a)&&"function"!==typeof a&&(n=a,a=null);a=a||[];n=n||{};return h([this].concat(a),
n)}function h(a,n){a&&!Array.isArray(a)&&"function"!==typeof a&&(n=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);n=n||{};var d,b;d=0;for(b=g.length;d<b;d++)g[d](a,n);a=l(a,n);a.createSubclass=f;d=0;for(b=k.length;d<b;d++)k[d](a);return a}var g=[],k=[];(function(a){a.hasMixin=function(a,d){a=Array.isArray(a)?a.reduce(function(c,b){return b._meta?c.concat(b._meta.bases):c},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof d)for(var b=a.length-1;0<=b;b--)if(a[b].prototype.declaredClass===
d)return!0;return-1!==a.indexOf(d)};a.safeMixin=function(a,d){return l.safeMixin(a,d)};a.before=function(a){g.push(a)};a.after=function(a){k.push(a)}})(h||(h={}));return h})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../lang ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(m,a,l,f,h,g,k,e,n){Object.defineProperty(a,"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.Properties");m=function(){function b(c){this.host=
c;this._origin=e.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new n.default;c=this.host.constructor.__accessorMetadata__;this.metadatas=c.properties;this.autoDestroy=c.autoDestroy}b.prototype.initialize=function(){this.lifecycle=1;k.instanceCreated(this.host,this.metadatas)};b.prototype.constructed=function(){this.lifecycle=2};b.prototype.destroy=function(){this.destroyed=!0;var c=this.cursors;if(c)for(var b=0,a=Object.getOwnPropertyNames(c);b<
a.length;b++){var d=a[b],e=c[d];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,d);c[d]=null}}if(this.autoDestroy)for(d in this.metadatas)(c=this.internalGet(d))&&c&&"function"===typeof c.destroy&&(c.destroy(),this.metadatas[d].nonNullable||this.internalSet(d,null))};Object.defineProperty(b.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});b.prototype.clearOverride=function(c){this.isOverridden(c)&&(this.overridden[c]=!1,this.propertyInvalidated(c))};
b.prototype.get=function(c){var b=this.metadatas[c];if(this.store.has(c)&&!this.dirties[c])return this.store.get(c);var a=b.get;return a?(b=a.call(this.host),this.store.set(c,b,e.OriginId.COMPUTED),this.propertyCommitted(c),b):b.value};b.prototype.originOf=function(c){var b=this.store.originOf(c);return void 0===b&&(c=this.metadatas[c])&&c.hasOwnProperty("value")?"defaults":e.idToName(b)};b.prototype.has=function(c){return this.metadatas[c]?this.store.has(c):!1};b.prototype.internalGet=function(c){if(this.metadatas[c]){var b=
this.store;return b.has(c)?b.get(c):this.metadatas[c].value}};b.prototype.internalSet=function(c,b){if(this.metadatas[c]){var a=this.initialized?this._origin:e.OriginId.DEFAULTS,d=this.store.get(c,a);f.equals(b,d)&&this.store.has(c,a)&&!this.isOverridden(c)||(this.propertyInvalidated(c),this.store.set(c,b,a),this.propertyCommitted(c))}};b.prototype.isOverridden=function(c){return null!=this.overridden&&!0===this.overridden[c]};b.prototype.keys=function(){return Object.keys(this.metadatas)};b.prototype.override=
function(c,b){if(this.metadatas[c]){this.overridden||(this.overridden={});var a=this.metadatas[c];if(!a.nonNullable||null!=b){if(a=a.cast){b=this.cast(a,b);var a=b.valid,e=b.value;d.release(b);if(!a)return;b=e}this.overridden[c]=!0;this.internalSet(c,b)}}};b.prototype.set=function(c,b){if(this.metadatas[c]){var a=this.metadatas[c];if(!a.nonNullable||null!=b){var e=a.set;if(a=a.cast){b=this.cast(a,b);var a=b.valid,q=b.value;d.release(b);if(!a)return;b=q}e?e.call(this.host,b):this.internalSet(c,b)}}};
b.prototype.setDefaultOrigin=function(c){this._origin=e.nameToId(c)};b.prototype.propertyInvalidated=function(c){var b=this.dirties,a=this.isOverridden(c),d=this.cursors&&this.cursors[c],e=this.metadatas[c].computes;if(d)for(var n=0;n<d.length;n++)d[n].propertyInvalidated(this,c);a||(b[c]=!0);if(e)for(c=0;c<e.length;c++)this.propertyInvalidated(e[c])};b.prototype.propertyCommitted=function(b){var c=this.cursors&&this.cursors[b];this.dirties[b]=!1;if(c)for(var a=0;a<c.length;a++)c[a].propertyCommitted(this,
b)};b.prototype.addCursor=function(b,a){this.cursors||(this.cursors={});var c=this.cursors[b];c||(this.cursors[b]=c=[]);c.push(a)};b.prototype.removeCursor=function(b,a){var c=this.cursors[b];this.cursors[b]&&(c.splice(c.indexOf(a),1),0===c.length&&(this.cursors[b]=null))};b.prototype.cast=function(b,a){var c=d.acquire();c.valid=!0;c.value=a;b&&(c.value=b.call(this.host,a,c));return c};return b}();l=function(){function b(){this.value=null;this.valid=!0}b.prototype.acquire=function(){this.valid=!0};
b.prototype.release=function(){this.value=null};return b}();var d=new g(l);a.default=m})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var g=[l.default,f.default,h.default];a.processPrototypeMetadatas=function(a,e){for(var n=0;n<g.length;n++){var d=g[n];if(d.processPrototypePropertyMetadata)for(var b in a)d.processPrototypePropertyMetadata(b,
a[b],a,e)}};a.processClassMetadatas=function(a,e){for(var n=0;n<g.length;n++){var d=g[n];if(d.processClassPropertyMetadata)for(var b in a)d.processClassPropertyMetadata(b,a[b],a,e)}};a.instanceCreated=function(a,e){for(var n=Object.getOwnPropertyNames(e),d=0;d<g.length;d++){var b=g[d];b.instanceCreated&&b.instanceCreated(a,e,n)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(m,a,l,f,h,g,k){function e(a,
d,b){var c=g.getProperties(a);return k.wire(a,b.aliasOf,function(){c.propertyInvalidated(d)})}Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension={processClassPropertyMetadata:function(a,d,b,c){var e=d.aliasOf;if(e&&(a=e.split(".")[0],null!=b[a]&&!d.set&&!d.get)){var p;d.get=function(){var b=f.default(this,e);if("function"===typeof b){p||(p=e.split(".").slice(0,-1).join("."));var c=f.default(this,p);c&&(b=b.bind(c))}return b};d.readOnly||(d.set=function(b){return h.default(this,
e,b)})}},instanceCreated:function(a,d,b){for(var c=0;c<b.length;c++){var q=b[c],p=d[q];p.aliasOf&&e(a,q,p)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(m,a,l){function f(a,n,d){a="?"===a[a.length-1]?a.slice(0,-1):a;if(null!=d.getItemAt||Array.isArray(d)){var b=parseInt(a,10);if(!isNaN(b))return Array.isArray(d)?d[b]:d.getItemAt(b)}b=l.getProperties(d);return n?l.isPropertyDeclared(b,a)?b.get(a):d[a]:l.isPropertyDeclared(b,
a)?b.internalGet(a):d[a]}function h(a,n,d,b){if(null==a)return a;if((a=f(n[b],d,a))||!(b<n.length-1))return b===n.length-1?a:h(a,n,d,b+1)}function g(a,n,d,b){void 0===d&&(d=!1);void 0===b&&(b=0);return"string"===typeof n&&-1===n.indexOf(".")?f(n,d,a):h(a,l.pathToArray(n),d,b)}function k(a,n){return g(a,n,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=g;a.get=k;a.exists=function(a,n){return void 0!==g(n,a,!0)};a.default=k})},"esri/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(m,a,l){function f(a,n,d){return n?Object.keys(n).reduce(function(b,c){var a=null,p="merge";d&&(a=d.path?d.path+"."+c:c,p=d.policy(a));if("replace"===p)return b[c]=n[c],b;if(void 0===b[c])return b[c]=l.clone(n[c]),b;var e=b[c],p=n[c];if(e===p)return b;if(Array.isArray(p)||Array.isArray(b))e=e?Array.isArray(e)?b[c]=e.concat():b[c]=[e]:b[c]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(function(b){-1===e.indexOf(b)&&e.push(b)}));else if(p&&"object"===typeof p)if(d){var g=d.path;
d.path=a;b[c]=f(e,p,d);d.path=g}else b[c]=f(e,p,null);else if(!b.hasOwnProperty(c)||n.hasOwnProperty(c))b[c]=p;return b},a||{}):a}function h(a){return Array.isArray(a)?a:a.split(".")}function g(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var e=0;e<a.length;e++)a[e]=a[e].trim();return 1===a.length?a[0]:a}return a.trim()}function k(a){var e=!1;return function(){e||(e=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?
a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,n){return a&&a.metadatas&&null!=a.metadatas[n]};a.merge=function(a,n,d){return d?f(a,n,{policy:d,path:""}):f(a,n,null)};a.pathToStringOrArray=function(a){return!a||"string"===typeof a&&-1===a.indexOf(".")?a:h(a)};a.pathToArray=h;a.splitPath=g;a.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=h(a);for(var e=Array(a.length),d=0;d<a.length;d++){var b=a[d];e[d]="?"===b[b.length-1];e[d]&&(a[d]=b.slice(0,
-1))}return{fullPath:a.join("."),conditional:e}};a.parse=function(a,n,d,b){n=g(n);if(Array.isArray(n)){var c=n.map(function(c){return b(a,c.trim(),d)});return{remove:k(function(){return c.forEach(function(b){return b.remove()})})}}return b(a,n.trim(),d)};a.once=k})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(m,a,l,f,h){function g(a,e,n){if(a&&e)if("object"===typeof e){n=0;for(var d=Object.getOwnPropertyNames(e);n<d.length;n++){var b=
d[n];g(a,b,e[b])}}else"_"!==e[0]&&(-1!==e.indexOf(".")?(e=e.split("."),b=e.splice(e.length-1,1)[0],g(h.default(a,e),b,n)):a[e]=n)}Object.defineProperty(a,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.set");a.set=g;a.default=g})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(m,a,l){function f(a,b,c){b=l.splitPath(b);if(Array.isArray(b)){for(var d=[],p=0;p<b.length;p++)d.push((new h(b[p],c)).install(a));return new e(d)}a=(new h(b,c)).install(a);
return new n(a)}Object.defineProperty(a,"__esModule",{value:!0});var h=function(){function a(b,c){this.path=b;this.callback=c;this.conditional=this.chain=null;if(-1<b.indexOf(".")){if(b=l.parseConditionalPath(b))this.path=b.fullPath,this.conditional=b.conditional;this.chain=l.pathToArray(this.path)}else"?"===b[b.length-1]&&(this.path=b.slice(0,b.length-1),this.conditional=[!0],this.chain=[this.path]);this.callback=c;return this}a.prototype.install=function(b){b=this.chain?new k(this,b):new g(this,
b);return b};a.prototype.notify=function(b){this.callback(b,this.path)};return a}(),g=function(){function a(b,c){this.binding=b;this.target=c;l.getProperties(c).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(l.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(b,c){l.getProperties(this.target).removeCursor(c,this)};a.prototype.propertyInvalidated=function(b,c){this.binding&&this.binding.notify(this.target)};
a.prototype.propertyCommitted=function(b,c){this.binding&&this.binding.notify(this.target)};return a}(),k=function(){function a(b,c){this.binding=b;this.target=c;this.stack=[];this.properties=l.getProperties(c);this.stack.push({properties:this.properties,propertyName:b.chain[0]});this.properties.addCursor(b.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var b=this.stack.pop();if(null==b)break;b.properties.removeCursor(b.propertyName,this)}this.target=this.binding=
null};a.prototype.propertyDestroyed=function(b,c){this.moveBackward(b,c)};a.prototype.propertyInvalidated=function(b,c){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(b,c){this.binding&&(this.moveBackward(b,c),this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=function(b,c){for(var a=this.stack,d=a[a.length-1];d.properties!==b&&d.propertyName!==c;)d.properties.removeCursor(d.propertyName,this),a.pop(),d=a[a.length-1]};a.prototype.moveForward=
function(){var b=this.stack,c=b[b.length-1];if(1!==b.length||!this.binding.conditional||!this.binding.conditional[b.length-1]||c.properties.metadatas[c.propertyName])if(c=c.properties.internalGet(c.propertyName),(c=l.getProperties(c))&&b.length<this.binding.chain.length){var a=this.binding.chain[b.length];this.binding.conditional&&this.binding.conditional[b.length]&&!c.metadatas[a]||(this.stack.push({properties:c,propertyName:a}),c.addCursor(a,this),this.moveForward())}};return a}(),e=function(){function a(b){this.cursors=
b}a.prototype.remove=function(){for(var b=this.cursors;0<b.length;)b.pop().destroy();this.cursors=null};return a}(),n=function(){function a(b){this.cursor=b}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();a.create=function(a,b){a=l.splitPath(a);if(Array.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(new h(a[d],b));return function(b){for(var a=[],d=0;d<c.length;d++)a[d]=c[d].install(b);return new e(a)}}var p=new h(a,b);return function(b){return new n(p.install(b))}};
a.wire=f;a.default=f})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});f.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,e,n,d){e.dependsOn&&(n=void 0,n=e.dependsOn.slice())&&(e.wire=g.create(n,function(b){return h.getProperties(b).propertyInvalidated(a)}))},
instanceCreated:function(a,e,n){for(var d=0;d<n.length;d++){var b=e[n[d]];b.wire&&b.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(m,a,l,f,h,g,k){function e(a,d,b){var c=a&&a.json;a&&a.json&&a.json.origins&&b&&(a=a.json.origins[b.origin])&&
d in a&&(c=a);return c}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,d){return e(a,"read",d)};a.originSpecificWritePropertyDefinition=function(a,d){return e(a,"write",d)};a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,d,b,c){if(g.process(d)){f.process(d);b=d.type;for(c=0;Array.isArray(b)&&!l.isOneOf(b);)b=b[0],c++;if(d.json.origins)for(var e in d.json.origins){var p=d.json.origins[e];h.create(b,c,a,p);k.create(b,c,
a,p)}h.create(b,c,a,d.json);k.create(b,c,a,d.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var f=a.json.origins,h={"web-document":["web-scene","web-map"]};a=function(a){if(f[a]){var e=f[a];h[a].forEach(function(a){f[a]=e});delete f[a]}};for(var g in h)a(g)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require",
"exports","../../../object","./type"],function(m,a,l,f){function h(a,b,p,k){if(1<b)return e(a,b);if(1===b)return n(a);if(d(a)){var c=n(a.prototype.itemType.Type);return function(b,d,p){return(b=c(b,d,p))?new a(b):b}}return g(a)}function g(a){return a.prototype.read?function(b,c,d){if(null==b)return b;c=new a;c.read(b,d);return c}:a.fromJSON}function k(a,b,d,e){return 0!==e&&Array.isArray(b)?b.map(function(b){return k(a,b,d,e-1)}):a(b,null,d)}function e(a,b){a=g(a);var c=k.bind(null,a);return function(a,
d,p){if(null==a)return a;a=c(a,p,b);d=b;for(p=a;0<d&&Array.isArray(p);)d--,p=p[0];if(void 0!==p)for(p=0;p<d;p++)a=[a];return a}}function n(a){var b=g(a);return function(a,c,d){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,d)}):[b(a,null,d)]}}function d(a){return f.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?b(a.Type):!1:!1}function b(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||d(a))}Object.defineProperty(a,
"__esModule",{value:!0});a.create=function(a,d,p,e){(!e.read||!e.read.reader&&!1!==e.read.enabled)&&b(a)&&l.setDeepValue("read.reader",h(a,d,p,e),e)}})},"esri/core/object":function(){define(["require","exports"],function(m,a){function l(a,h,g){for(var k=0;k<a.length;k++){var e=a[k];if(null==g)return;if(!(e in g))if(h)g[e]={};else return;g=g[e]}return g}Object.defineProperty(a,"__esModule",{value:!0});a.getDeepValue=function(a,h){return l(a.split("."),!1,h)};a.setDeepValue=function(a,h,g){var k=a.split(".");
a=k.pop();(g=l(k,!0,g))&&a&&(g[a]=h)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&a.prototype&&a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(m,a){function l(a){"boolean"===
typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function f(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});l(a.json);f(a.json);
if(a.json.origins)for(var g in a.json.origins)l(a.json.origins[g]),f(a.json.origins[g]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(m,a,l,f){function h(a,b,c,e){l.setDeepValue(c,g(a,e),b)}function g(a,b){return a&&"function"===typeof a.write?a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?
null:a:a}function k(a,b,c,e){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return g(a,e)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[g(a,e)];l.setDeepValue(c,a,b)}function e(a,b,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return e(a,b,c-1)}):g(a,b)}function n(a){return function(b,c,d,p){if(null===b)b=null;else{b=e(b,p,a);p=a;for(var q=b;0<p&&Array.isArray(q);)p--,q=q[0];if(void 0!==q)for(q=0;q<p;q++)b=[b]}l.setDeepValue(d,b,c)}}Object.defineProperty(a,"__esModule",
{value:!0});a.create=function(a,b,c,e){e.write&&!e.write.writer&&!1!==e.write.enabled&&(1===b||f.isCollection(a)?e.write.writer=k:e.write.writer=1<b?n(b):h)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(m,a){function l(a){switch(a){case "defaults":return h.DEFAULTS;case "service":return h.SERVICE;case "portal-item":return h.PORTAL_ITEM;case "web-scene":return h.WEB_SCENE;case "web-map":return h.WEB_MAP;case "user":return h.USER}}function f(a){switch(a){case h.DEFAULTS:return"defaults";
case h.SERVICE:return"service";case h.PORTAL_ITEM:return"portal-item";case h.WEB_SCENE:return"web-scene";case h.WEB_MAP:return"web-map";case h.USER:return"user"}}Object.defineProperty(a,"__esModule",{value:!0});var h;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(h=a.OriginId||(a.OriginId={}));a.nameToId=l;a.idToName=f;a.readableNameToId=
function(a){return l(a)};a.idToReadableName=function(a){return f(a)};a.writableNameToId=function(a){return l(a)};a.idToWritableName=function(a){return f(a)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return l.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};
a.prototype.set=function(a,g){this._values[a]=g};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=m})},"esri/core/accessorSupport/introspection":function(){define("require exports ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(m,a,l,f,h,g,k){function e(a,d){return function(b){b=+a(b);null!=d.min&&(b=Math.max(d.min,b));null!=d.max&&(b=Math.min(d.max,b));return b}}Object.defineProperty(a,
"__esModule",{value:!0});a.processPrototype=function(a){var d=a.declaredClass,b=a.properties||{},c;for(c in b){var q=b[c],p=typeof q;null==q?h.setPropertyMetadata(a,c,{value:q}):Array.isArray(q)?h.setPropertyMetadata(a,c,{type:[q[0]],value:null}):"object"===p?g.getProperties(q)||q instanceof Date?h.setPropertyMetadata(a,c,{type:q.constructor,value:q}):h.setPropertyMetadata(a,c,q):"boolean"===p?h.setPropertyMetadata(a,c,{type:Boolean,value:q}):"string"===p?h.setPropertyMetadata(a,c,{type:String,value:q}):
"number"===p?h.setPropertyMetadata(a,c,{type:Number,value:q}):"function"===p&&h.setPropertyMetadata(a,c,{type:q,value:null})}a=h.getPropertiesMetadata(a);for(c in a){b=a[c];p=b.type;q=b.types;if(!b.cast)if(p){for(var q=b,n=0,k=p;Array.isArray(k)&&1===k.length&&"string"!==typeof k[0]&&"number"!==typeof k[0];)k=k[0],n++;p=l.isOneOf(k)?0===n?l.ensureOneOf(k):l.ensureNArrayTyped(l.ensureOneOf(k),n):1===n?l.ensureArray(k):1<n?l.ensureNArray(k,n):l.ensureType(p);q.cast=p}else q&&(Array.isArray(q)?b.cast=
l.ensureArrayTyped(l.ensureOneOfType(q[0])):b.cast=l.ensureOneOfType(q));b.range&&(b.cast=e(b.cast,b.range))}f.processPrototypeMetadatas(a,d);return a};a.processClass=function(a){for(var d=a.prototype,b=d.declaredClass,c=a._meta.bases,e={},p=c.length-1;0<=p;p--)h.merge(e,h.getMetadata(c[p].prototype));var n=e.properties;f.processClassMetadatas(n,b);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:n,autoDestroy:!!e.autoDestroy}});for(var g={},b=function(a){var b=n[a];g[a]={enumerable:!0,
configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(c){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(d.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===d.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+
this.declaredClass);d.set(a,c)}}}},c=0,p=Object.getOwnPropertyNames(n);c<p.length;c++)b(p[c]);Object.defineProperties(a.prototype,g);if(e.parameters)for(a=0,b=Object.getOwnPropertyNames(e.parameters);a<b.length;a++)c=b[a],p=Object.getOwnPropertyDescriptor(d,c)||{value:d[c]},(p=k.autocastMethod(d,c,p))&&Object.defineProperty(d,c,p);return e}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports","./utils"],function(m,a,l){function f(a){return null!=a.__accessorMetadata__}function h(a){return f(a)&&
null!=g(a).properties}function g(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function k(a){a=g(a);var b=a.properties;b||(b=a.properties={});return b}function e(a,b){var c=g(a);a=c.parameters;a||(a=c.parameters={});c=a[b];c||(c=[],a[b]=c);return c}function n(a){return b.test(a)?"replace":"merge"}function d(a){return c.test(a)?n(a.slice(11)):"merge"}Object.defineProperty(a,"__esModule",
{value:!0});a.hasMetadata=f;a.hasPropertiesMetadata=h;a.hasPropertyMetadata=function(a,b){return h(a)&&null!=k(a)[b]};a.hasParametersMetadata=function(a,b){return f(a)&&null!=g(a).parameters&&null!=g(a).parameters[b]};a.getMetadata=g;a.getPropertiesMetadata=k;a.getPropertyMetadata=function(a,b){a=k(a);var c=a[b];c||(c=a[b]={});return c};a.setPropertyMetadata=function(a,b,c){k(a)[b]=c};a.getParametersMetadata=e;a.getParameterMetadata=function(a,b,c){var d=e(a,b)[c];d||(e(a,b)[c]=d={index:c});return d};
a.merge=function(a,b){return l.merge(a,b,d)};a.mergeProperty=function(a,b){return l.merge(a,b,n)};var b=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,c=/^properties\./})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(m,a,l,f){function h(a){var b="_meta"in a?l.ensureType(a):a;return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];a.push(b);return"number"===typeof a[2]?k.apply(this,
a):g.apply(this,a)}}function g(a,b,c,e){f.getPropertyMetadata(a,b).cast=e}function k(a,b,c,e){f.getParameterMetadata(a,b,c).cast=e}function e(a){return function(b,c,d){f.getPropertyMetadata(b,a).cast=b[c]}}Object.defineProperty(a,"__esModule",{value:!0});var n=Object.prototype.toString;a.autocastMethod=function(a,b,c){if(f.hasParametersMetadata(a,b)){var d=f.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(d.length){var e=c.value;c.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=
arguments[b];for(b=0;b<d.length;b++){var c=d[b];a[c.index]=c.cast(a[c.index])}return e.apply(this,a)};return c}console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===n.call(a[0]))return h(a[0]);if(1===a.length&&"string"===typeof a[0])return e(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ReentrantObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(m,a,l,f,h,g,k,e,n){function d(a){A.has(a)?C.splice(C.indexOf(a),1):A.add(a);C.push(a);z||(z=g.schedule(c))}function b(a){if(!a.removed){var b=a.callback,c=a.path,d=a.oldValue,e=a.target,p=k.valueOf(e,a.propertyPath,!0);f.equals(d,p)||(a.oldValue=p,b.call(e,p,d,c,e))}}function c(){if(z){z=null;var a=C;C=w.acquire();A.clear();for(var c=w.acquire(),d=0;d<a.length;d++){var e=a[d];b(e);e.removed&&c.push(e)}for(d=0;d<C.length;d++)e=C[d],e.removed&&(c.push(e),A.delete(e),C.splice(d,1),--d);for(d=
0;d<c.length;d++)u.pool.release(c[d]);w.release(a);w.release(c);y.forEach(function(a){return a()})}}function q(a,b,c){var p=e.parse(a,b,c,function(a,b,c){var q=k.valueOf(a,b,!0),g,f=n.wire(a,b,function(a,b){a.__accessor__.destroyed?p.remove():(g||(g=u.pool.acquire(a,b,q,c),q=null),d(g))});return{remove:e.once(function(){f.remove();g&&(g.removed=!0,d(g),g=null);p=f=q=null})}});return p}function p(a,b,c){var d=e.parse(a,b,c,function(a,b,c){var e=k.valueOf(a,b,!0),p=!1;return n.wire(a,b,function(a,b){if(a.__accessor__.destroyed)d.remove();
else if(!p){p=!0;var q=k.valueOf(a,b,!0);f.equals(e,q)||c.call(a,q,e,b,a);e=k.valueOf(a,b,!0);p=!1}})});return d}function t(a,b,c,d){void 0===d&&(d=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:d?p(a,b,c):q(a,b,c)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function a(a,b,c,d){this.target=a;this.path=b;this.oldValue=c;this.callback=d;this.removed=!1;this.propertyPath=e.pathToStringOrArray(b)}a.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};a.pool=new h.ReentrantObjectPool(a,!0);return a}(),w=new l,A=new Set,C=w.acquire(),z;a.dispatchTarget=function(a){for(var c=w.copy(C),d=0;d<c.length;d++){var e=c[d];e.target===a&&(b(e),A.delete(e),C.splice(C.indexOf(e),1))}};a.removeTarget=function(a){for(var b=0;b<C.length;b++){var c=C[b];c.target===a&&(c.removed=!0)}};a.dispatch=c;var y=new Set;a.afterDispatch=function(a){y.add(a);return{remove:function(){y.delete(a)}}};a.watch=t;a.isValueInUse=
function(a){return C.some(function(b){return b.oldValue===a})};a.default=t})},"esri/core/ReentrantObjectPool":function(){define(["require","exports","./tsSupport/extendsHelper","./ObjectPool"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function g(){var g=null!==a&&a.apply(this,arguments)||this;g._set=new Set;return g}l(g,a);g.prototype.destroy=function(){a.prototype.destroy.call(this);this._set=null};g.prototype.acquire=function(){for(var g=[],e=0;e<arguments.length;e++)g[e]=
arguments[e];g=a.prototype.acquire.apply(this,g);this._set.delete(g);return g};g.prototype.release=function(g){g&&!this._set.has(g)&&(a.prototype.release.call(this,g),this._set.add(g))};g.prototype._dispose=function(g){this._set.delete(g);a.prototype._dispose.call(this,g)};return g}(f);a.ReentrantObjectPool=m})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(m,a,l,f,h){function g(b){void 0===b&&(b=a.now());a.debug.rafId=null;
0<C.length&&(a.debug.rafId=k());0<q&&(t=Math.min(b-q,t));a.debug.executeFrameTasks(b)}function k(){return a.debug.requestNextFrame?a.debug.requestNextFrame(d):d()}function e(){for(var a=0;a<C.length;){var b=C[a];a++;if(b.removed){C.splice(a-1,1);for(var c=0;c<w.length;c++){var d=w[c];if(b.phases[d]){var d=z[d],e=d.indexOf(b);-1!==e&&d.splice(e,1)}}}}}function n(){for(;A.length;){var b=A.shift();b.isActive&&(b.isActive=!1,b.callback())}a.debug.willDispatch=!1}function d(){return h(g)}Object.defineProperty(a,
"__esModule",{value:!0});a.now=f;var b=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),c=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),q=-1,p=0,t=Number.POSITIVE_INFINITY,u={time:0,deltaTime:0,tickTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},w=["prepare","preRender","render","postRender","update"],A=[],C=[],z={prepare:[],preRender:[],
render:[],postRender:[],update:[]},y=function(){function b(a){this._task=a}b.prototype.remove=function(){this._task.removed=!0};b.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=a.now())};b.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return b}();a.FrameTaskHandle=y;a.debug={frameTasks:C,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===
a&&(a=!1);for(var b=0;b<C.length;b++)C[b].removed=!0;a&&e()},dispatch:n,executeFrameTasks:function(b){void 0===b&&(b=a.now());0>q&&(q=b);var c=b-q,d=0<p?p:t,g=Math.max(0,c-d);q=b;for(var n=0;n<C.length;n++){var k=C[n];-1!==k.epoch&&(k.dt=c)}for(n=0;n<w.length;n++)for(var c=w[n],f=z[c],h=0;h<f.length;h++)k=f[(h+x)%f.length],k.paused||k.removed||(0===n&&k.ticks++,-1===k.epoch&&(k.epoch=b),u.time=b,u.deltaTime=k.dt,u.tickTime=Math.min(t,33),u.elapsedFrameTime=a.now()-b,u.frameDuration=d-g,u.spendInTask=
b-k.epoch,k.phases[c].call(k,u));e();++x}};a.schedule=function(b){b=new c(b);A.push(b);a.debug.willDispatch||(a.debug.willDispatch=!0,l(n));return b};a.addFrameTask=function(c){var d=new b(c);C.push(d);for(var e=0,p=w;e<p.length;e++){var g=p[e];c[g]&&z[g].push(d)}a.debug.rafId||(q=-1,a.debug.rafId=k());return new y(d)};a.setFrameDuration=function(a){p=Math.max(0,a)};var x=0;a.requestNextFrame=k})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(m,
a,l,f){var h=f();m=l.requestAnimationFrame;if(!m){a=["ms","moz","webkit","o"];for(var g=0;g<a.length&&!m;++g)m=l[a[g]+"RequestAnimationFrame"];m||(m=function(a){var e=f(),g=Math.max(0,16-(e-h)),d=l.setTimeout(function(){a(f())},g);h=e+g;return d})}return m})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});a.forEach=function(a,k,e){return h.eachAlways(a.map(function(a,
d){return k.apply(e,[a,d])}))};a.map=function(a,k,e){return h.eachAlways(a.map(function(a,d){return k.apply(e,[a,d])})).then(function(a){return a.map(function(a){return a.value})})};a.result=function(a){return a.then(function(a){return{ok:!0,value:a}}).catch(function(a){return{ok:!1,error:a}})};a.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};a.safeCast=function(a){return a}})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){function q(b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])}Object.defineProperty(a,"__esModule",{value:!0});q(l);q(f);q(h);q(g);q(k);q(e);q(n);q(d);q(b);q(c)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(f,g){l.getPropertyMetadata(f,g).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,h,g){l.getMetadata(a).autoDestroy=!0;return a[h]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];h=function(){return this||{}};h.__bases__=[a].concat(f);return h}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
"exports","../../kebabDictionary","./property"],function(m,a,l,f){function h(a){return f.property({type:a})}Object.defineProperty(a,"__esModule",{value:!0});a.enumeration=h;(function(a){a.serializable=function(){return function(a){a=a instanceof l.KebabDictionary?a:new l.KebabDictionary(a,{ignoreUnknown:!0});return f.property({type:a.apiValues,json:{type:a.jsonValues,read:{reader:a.read},write:{writer:a.write}}})}}})(h=a.enumeration||(a.enumeration={}))})},"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),
function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(e,n){var d=e.constructor.prototype;d!==Function.prototype&&((e=Object.getOwnPropertyDescriptor(e,n))&&(e.get||e.set)?(a=f.clone(a),e.set&&(a.set=e.set),e.get&&(a.get=e.get)):e&&e.hasOwnProperty("value")&&(a=f.clone(a),a.value=e.value),n=g.getPropertyMetadata(d,n),g.mergeProperty(n,a))}};a.propertyJSONMeta=function(a,
e,n){a=g.getPropertyMetadata(a.constructor.prototype,n);a.json||(a.json={});a=a.json;void 0!==e&&(a.origins||(a.origins={}),a.origins[e]||(a.origins[e]={}),a=a.origins[e]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,g,k){var e,n;void 0===g||Array.isArray(g)?(n=a,k=g,e=[void 0]):(n=g,e=Array.isArray(a)?a:[a]);return function(a,b,c){var d=
a.constructor.prototype;e.forEach(function(c){c=f.propertyJSONMeta(a,c,n);c.read&&"object"!==typeof c.read&&(c.read={});l.setDeepValue("read.reader",d[b],c);k&&(c.read.source=(c.read.source||[]).concat(k))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.shared=function(a){return function(f,h){f[h]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports",
"../../declare","../metadata"],function(m,a,l,f){function h(a,c){a.read&&("function"===typeof a.read?c.push(a.read):"object"===typeof a.read&&a.read.reader&&c.push(a.read.reader))}function g(a,c){a.write&&("function"===typeof a.write?c.push(a.write):"object"===typeof a.write&&a.write.writer&&c.push(a.write.writer))}function k(a){var b=[];a=f.getPropertiesMetadata(a.prototype);if(!a)return b;for(var d in a){var e=a[d];e.cast&&b.push(e.cast);e.copy&&b.push(e.copy);if(e=e.json)if(h(e,b),g(e,b),e=e.origins)for(var n in e){var k=
e[n];h(k,b);g(k,b)}}return b}function e(a){var b={values:{},descriptors:{}},e=["__bases__"],p=f.getPropertiesMetadata(a.prototype),g=k(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==e.indexOf(b)||p&&p.hasOwnProperty(b)||!d(Object.getOwnPropertyDescriptor(a.prototype,b))&&-1!==g.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){var e=Object.getOwnPropertyDescriptor(a.prototype,c);d(e)?b.descriptors[c]=e:b.values[c]=a.prototype[c]});return b}function n(a){var b=Object.getOwnPropertyNames(a),
e=Object.getPrototypeOf(a.prototype).constructor,p=Object.getOwnPropertyNames(Function);p.push("__bases__");var g=Object.getOwnPropertyNames(e),n={values:{},descriptors:{}};b.filter(function(b){return-1!==p.indexOf(b)?!1:-1===g.indexOf(b)||e[b]!==a[b]?!0:!1}).forEach(function(b){var c=Object.getOwnPropertyDescriptor(a,b);d(c)?n.descriptors[b]=c:n.values[b]=a[b]});return n}function d(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",{value:!0});a.subclass=function(a){return function(b){var c=
e(b),d=n(b);null!=a&&(c.values.declaredClass=a);b=l(b.__bases__,c.values);Object.defineProperties(b.prototype,c.descriptors);for(var g in d.values)b[g]=d.values[g];Object.defineProperties(b,d.descriptors);return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,g,k){var e,n;void 0===g?(n=a,e=[void 0]):"string"!==typeof g?(n=a,e=[void 0],k=g):
(n=g,e=Array.isArray(a)?a:[a]);return function(a,b,c){var d=a.constructor.prototype;e.forEach(function(c){c=f.propertyJSONMeta(a,c,n);c.write&&"object"!==typeof c.write&&(c.write={});k&&l.setDeepValue("write.target",k,c);l.setDeepValue("write.writer",d[b],c)})}}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){var u=new e.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function e(b){b=a.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}f(e,a);k=e;e.create=function(a){void 0===a&&(a={size:256,spatialReference:g.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,c=a.scales,d=a.size||256;a=a.spatialReference||g.SpatialReference.WebMercator;if(!q.isValid(a)){for(var b=[],e=5E-4,p=23;0<=p;p--)b.unshift({level:p,scale:e,resolution:e}),e*=2;return new k({dpi:96,lods:b,origin:new g.Point(0,0,a),size:d,spatialReference:a})}var f=(p=q.getInfo(a))?new g.Point(p.origin[0],p.origin[1],a):new g.Point(0,0,a),t=1/(39.37*n.getMetersPerUnitForSR(a)*96),w=[];if(c)for(p=0;p<c.length;p++){var h=c[p],e=h*t;w.push({level:p,scale:h,resolution:e})}else for(e=
q.isGeographic(a)?512/d*5.916575275917094E8:256/d*5.91657527591555E8,c=Math.ceil(24/b),w.push({level:0,scale:e,resolution:e*t}),p=1;p<c;p++)h=e/Math.pow(2,b),e=h*t,w.push({level:p,scale:h,resolution:e}),e=h;return new k({dpi:96,lods:w,origin:f,size:d,spatialReference:a})};Object.defineProperty(e.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=q.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});
e.prototype.readOrigin=function(a,b){return g.Point.fromJSON(l({spatialReference:b.spatialReference},a))};Object.defineProperty(e.prototype,"lods",{set:function(a){var b=this,c=0,d=0,e=[];this._levelToLOD={};a&&(c=-Infinity,d=Infinity,a.forEach(function(a){e.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});
e.prototype.readSize=function(a,b){return[b.cols,b.rows]};e.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};e.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};e.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],p=b[d+1];if(e<=a)break;if(p===a)return d+1;if(e>a&&p<a)return d+1-(a-p)/(e-p)}return d};e.prototype.snapScale=function(a,
b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};e.prototype.tileAt=function(a,b,d,e){var g=this.lodAt(a);if(!g)return null;var n;if("number"===typeof b)n=b,b=d;else{if(q.equals(b.spatialReference,this.spatialReference))n=b.x,b=b.y;else{e=p.project(b,this.spatialReference);if(!e)return null;n=e.x;b=e.y}e=d}d=g.resolution*this.size[0];g=g.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:c.create()});
e.level=a;e.row=Math.floor((this.origin.y-b)/g+.001);e.col=Math.floor((n-this.origin.x)/d+.001);this.updateTileInfo(e);return e};e.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var d=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=c.create());a.extent[0]=this.origin.x+a.col*d;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+d;a.extent[3]=a.extent[1]+b}};e.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];
if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};e.prototype.getTileBounds=function(a,b){var c=this.lodAt(b.level).resolution,d=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+b.col*d;a[1]=this.origin.y-(b.row+1)*c;a[2]=a[0]+d;a[3]=a[1]+c;return a};e.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};e.prototype.clone=function(){return k.fromJSON(this.write({}))};
e.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}};var k;h([d.property({type:Number,json:{write:!0}})],e.prototype,"compressionQuality",void 0);h([d.property({type:Number,json:{write:!0}})],e.prototype,"dpi",void 0);h([d.property({type:String,json:{read:u.read,write:u.write,origins:{"web-scene":{read:!1,write:!1}}}})],
e.prototype,"format",void 0);h([d.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],e.prototype,"isWrappable",null);h([d.property({type:g.Point,json:{write:!0}})],e.prototype,"origin",void 0);h([d.reader("origin")],e.prototype,"readOrigin",null);h([d.property({type:[t],value:null,json:{write:!0}})],e.prototype,"lods",null);h([d.property({readOnly:!0})],e.prototype,"minScale",void 0);h([d.property({readOnly:!0})],e.prototype,"maxScale",void 0);h([d.property({readOnly:!0})],e.prototype,
"scales",void 0);h([d.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],e.prototype,"size",void 0);h([d.reader("size",["rows","cols"])],e.prototype,"readSize",null);h([d.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],e.prototype,"writeSize",null);h([d.property({type:g.SpatialReference,json:{write:!0}})],e.prototype,"spatialReference",void 0);return e=k=h([d.subclass("esri.layers.support.TileInfo")],e)}(d.declared(k))})},"esri/geometry":function(){define("require exports ./core/kebabDictionary ./core/accessorSupport/ensureType ./geometry/Extent ./geometry/Geometry ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=h;a.BaseGeometry=g;a.Multipoint=k;a.Point=e;a.Polygon=n;a.Polyline=d;a.SpatialReference=b;a.isGeometry=function(b){return b instanceof a.BaseGeometry};a.fromJSON=c.fromJSON;a.typeKebabDictionary=l.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});a.isFeatureGeometryType=function(a){return"point"===
a||"multipoint"===a||"polyline"===a||"polygon"===a};a.featureGeometryTypeKebabDictionary=l.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"});a.geometryTypes={base:a.BaseGeometry,key:"type",typeMap:{extent:a.Extent,multipoint:a.Multipoint,point:a.Point,polyline:a.Polyline,polygon:a.Polygon}};a.ensureType=f.ensureOneOfType(a.geometryTypes)})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q){function p(a,b,c){return null==b?c:null==c?b:a(b,c)}m=function(a){function k(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}l(k,a);t=k;k.prototype.normalizeCtorArgs=function(a,b,c,d,e){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?n.WGS84:a.spatialReference,
a):{xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:null==e?n.WGS84:e}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(k.prototype,"center",{get:function(){var a=new e({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});k.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};k.prototype.clone=function(){var a=new t;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};k.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,
c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));return"point"===a.type?d.extentContainsPoint(this,a):"extent"===a.type?d.extentContainsExtent(this,a):!1};k.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===
a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};k.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};k.prototype.intersects=function(a){if(!a)return!1;var c=this.spatialReference,d=a.spatialReference;c&&d&&
!c.equals(d)&&q.canProject(c,d)&&(a=c.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));c=b.getExtentIntersector(a.type);return"mesh"!==a.type?c(this,a):c(this,a.extent)};k.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};k.prototype.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};k.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};k.prototype.union=
function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=p(Math.min,this.zmin,a.zmin),this.zmax=p(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=p(Math.min,this.mmin,a.mmin),this.mmax=p(Math.max,this.mmax,a.mmax);return this};k.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=p(Math.max,this.zmin,a.zmin),this.zmax=p(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=p(Math.max,this.mmin,a.mmin),this.mmax=p(Math.min,this.mmax,a.mmax);return this};k.prototype.toJSON=function(a){return this.write(null,a)};k.prototype._shiftCM=function(a){void 0===a&&(a=c.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,
d=this._getCM(a);if(d){var e=b.isWebMercator?q.webMercatorToGeographic(d):d;this.xmin-=d.x;this.xmax-=d.x;b.isWebMercator||(e.x=this._normalizeX(e.x,a).x);this.spatialReference=new n(h.substitute({Central_Meridian:e.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};k.prototype._getCM=function(a){var b=null,c=a.valid;a=c[0];var c=c[1],d=this.xmin,e=this.xmax;d>=a&&d<=c&&e>=a&&e<=c||(b=this.center);return b};k.prototype._normalize=function(a,b,d){var e=this.spatialReference;if(!e)return this;d=
d||c.getInfo(e);if(!d)return this;var p=this._getParts(d).map(function(a){return a.extent});if(2>p.length)return p[0]||this;if(2<p.length)return a?this._shiftCM(d):this.set({xmin:d.valid[0],xmax:d.valid[1]});if(a)return this._shiftCM(d);if(b)return p;var q=!0,g=!0;p.forEach(function(a){a.hasZ||(q=!1);a.hasM||(g=!1)});return{rings:p.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(q)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);
if(g)for(a=(a.mmax-a.mmin)/2,d=0;d<b.length;d++)b[d].push(a);return b}),hasZ:q,hasM:g,spatialReference:e}};k.prototype._getParts=function(a){var b=this.cache._parts;if(!b){var b=[],d=this.ymin,e=this.ymax,p=this.spatialReference,q=this.width,g=this.xmin,n=this.xmax,k=void 0;a=a||c.getInfo(p);var f=a.valid,w=f[0],h=f[1],k=this._normalizeX(this.xmin,a),u=k.x,f=k.frameId,k=this._normalizeX(this.xmax,a),A=k.x;a=k.frameId;k=u===A&&0<q;if(q>2*h){q=new t(g<n?u:A,d,h,e,p);g=new t(w,d,g<n?A:u,e,p);n=new t(0,
d,h,e,p);d=new t(w,d,0,e,p);e=[];p=[];q.contains(n)&&e.push(f);q.contains(d)&&p.push(f);g.contains(n)&&e.push(a);g.contains(d)&&p.push(a);for(w=f+1;w<a;w++)e.push(w),p.push(w);b.push({extent:q,frameIds:[f]},{extent:g,frameIds:[a]},{extent:n,frameIds:e},{extent:d,frameIds:p})}else u>A||k?b.push({extent:new t(u,d,h,e,p),frameIds:[f]},{extent:new t(w,d,A,e,p),frameIds:[a]}):b.push({extent:new t(u,d,A,e,p),frameIds:[f]});this.cache._parts=b}a=this.hasZ;d=this.hasM;if(a||d)for(f={},a&&(f.zmin=this.zmin,
f.zmax=this.zmax),d&&(f.mmin=this.mmin,f.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(f);return b};k.prototype._normalizeX=function(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}};var t;f([g.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],k.prototype,"cache",void 0);f([g.property({readOnly:!0,dependsOn:["cache"]})],k.prototype,"center",
null);f([g.property({readOnly:!0,dependsOn:["cache"]})],k.prototype,"extent",null);f([g.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasM",null);f([g.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasZ",null);f([g.property({readOnly:!0,dependsOn:["ymin","ymax"]})],k.prototype,"height",null);f([g.property({readOnly:!0,dependsOn:["xmin","xmax"]})],k.prototype,"width",null);
f([g.property({type:Number,json:{write:!0}})],k.prototype,"xmin",void 0);f([g.property({type:Number,json:{write:!0}})],k.prototype,"ymin",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],k.prototype,"mmin",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],k.prototype,"zmin",void 0);f([g.property({type:Number,json:{write:!0}})],
k.prototype,"xmax",void 0);f([g.property({type:Number,json:{write:!0}})],k.prototype,"ymax",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],k.prototype,"mmax",void 0);f([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],k.prototype,"zmax",void 0);return k=t=f([g.subclass("esri.geometry.Extent")],k)}(g.declared(k));m.prototype.toJSON.isDefaultToJSON=
!0;return m})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(){var d=a.call(this)||this;d.type=null;d.extent=null;d.hasM=!1;d.hasZ=!1;d.spatialReference=k.WGS84;return d}l(e,a);Object.defineProperty(e.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});
e.prototype.readSpatialReference=function(a,b){if(a instanceof k)return a;if(null!=a){var c=new k;c.read(a,b);return c}return a};e.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};e.prototype.clearCache=function(){this.notifyChange("cache")};e.prototype.getCacheValue=function(a){return this.cache[a]};e.prototype.setCacheValue=function(a,b){this.cache[a]=b};f([g.property()],e.prototype,"type",void 0);f([g.property({readOnly:!0,dependsOn:["spatialReference"]})],
e.prototype,"cache",null);f([g.property({readOnly:!0,dependsOn:["spatialReference"]})],e.prototype,"extent",void 0);f([g.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],e.prototype,"hasM",void 0);f([g.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],e.prototype,"hasZ",void 0);f([g.property({type:k,json:{write:!0}})],e.prototype,"spatialReference",void 0);f([g.reader("spatialReference")],e.prototype,"readSpatialReference",
null);return e=f([g.subclass("esri.geometry.Geometry")],e)}(g.declared(h))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(m,a,l,f,h,g,k,e,n){function d(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,b);return c}var b=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}l(b,a);b.prototype.read=function(a,b){e.default(this,a,b)};b.prototype.write=function(a,b){return n.default(this,a||{},b)};b.prototype.toJSON=function(a){return this.write(null,a)};b.fromJSON=function(a,b){return d.call(this,a,b)};return b=f([k.subclass("esri.core.JSONSupport")],b)}(k.declared(h));b.prototype.toJSON.isDefaultToJSON=!0;g.after(function(a){g.hasMixin(a,b)&&(a.fromJSON=d.bind(a))});return b})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),
function(m,a,l,f,h,g){function k(a,d,b){void 0===b&&(b=e);if(d&&"object"===typeof d){for(var c=h.getProperties(a),q=c.metadatas,p={},n=0,k=Object.getOwnPropertyNames(d);n<k.length;n++){var w=p,A=q,l=k[n],z=d,y=b,x=g.originSpecificReadPropertyDefinition(A[l],y);x&&(!x.read||!1!==x.read.enabled&&!x.read.source)&&(w[l]=!0);for(var m=0,B=Object.getOwnPropertyNames(A);m<B.length;m++){var F=B[m],x=g.originSpecificReadPropertyDefinition(A[F],y),D;a:{D=l;var G=z;if(x&&x.read&&!1!==x.read.enabled&&x.read.source)if(x=
x.read.source,"string"===typeof x){if(x===D||-1<x.indexOf(".")&&0===x.indexOf(D)&&f.exists(x,G)){D=!0;break a}}else for(var H=0;H<x.length;H++){var P=x[H];if(P===D||-1<P.indexOf(".")&&0===P.indexOf(D)&&f.exists(P,G)){D=!0;break a}}D=!1}D&&(w[F]=!0)}}c.setDefaultOrigin(b.origin);k=0;for(w=Object.getOwnPropertyNames(p);k<w.length;k++)n=w[k],l=(A=g.originSpecificReadPropertyDefinition(q[n],b).read)&&A.source,z=void 0,z=l&&"string"===typeof l?f.valueOf(d,l):d[n],A&&A.reader&&(z=A.reader.call(a,z,d,b)),
void 0!==z&&c.set(n,z);if(!b||!b.ignoreDefaults)for(d=0,q=Object.getOwnPropertyNames(q);d<q.length;d++)n=q[d],p[n]||(k=a,w=c,A=b,l=(l=g.originSpecificReadPropertyDefinition(w.metadatas[n],A))&&l.default,void 0!==l&&(k="function"===typeof l?l.call(k,n,A):l,void 0!==k&&w.set(n,k)));c.setDefaultOrigin("user")}}Object.defineProperty(a,"__esModule",{value:!0});var e={origin:"service"};a.read=k;a.readLoadable=function(a,d,b,c){void 0===c&&(c=e);d=l({},c,{messages:[]});b(d);d.messages.forEach(function(b){"warning"!==
b.type||a.loaded?c&&c.messages.push(b):a.loadWarnings.push(b)})};a.default=k})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(m,a,l,f,h,g,k,e){function n(a,d,e,n,k,w){if(!n||!n.write)return!1;var c=a.get(e);if(!k&&n.write.overridePolicy){var p=n.write.overridePolicy.call(a,c,e,w);void 0!==p&&(k=p)}k||(k=n.write);if(!k||!1===k.enabled)return!1;if((null===c&&!k.allowNull||
void 0===c)&&k.isRequired)return(c=new f("web-document-write:property-required","Missing value for required property '"+e+"' on '"+a.declaredClass+"'",{propertyName:e,target:a}),w)&&w.messages?w.messages.push(c):c&&!w&&b.error(c.name,c.message),!1;if(void 0===c||null===c&&!k.allowNull||!k.ignoreOrigin&&w&&w.origin&&d.store.originOf(e)<g.nameToId(w.origin))return!1;d=n.default;void 0===d?w=!1:"function"===typeof d?Array.isArray(c)?(w=d.call(a,e,w),w=l.equals(w,c)):w=!1:w=d===c;return w?!1:!0}function d(a,
b,d){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return k.merge(b,a.toJSON());var c=k.getProperties(a),p=c.metadatas,q;for(q in p){var f=e.originSpecificWritePropertyDefinition(p[q],d);if(n(a,c,q,f,null,d)){var h=a.get(q),l={};f.write.writer.call(a,h,l,"string"===typeof f.write.target?f.write.target:q,d);f=l;0<Object.keys(f).length&&(b=k.merge(b,f),d&&d.writtenProperties&&d.writtenProperties.push({target:a,propName:q,oldOrigin:g.idToReadableName(c.store.originOf(q)),
newOrigin:d.origin}))}}return b}Object.defineProperty(a,"__esModule",{value:!0});var b=h.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,b,d,g){var c=k.getProperties(a),p=e.originSpecificWritePropertyDefinition(c.metadatas[b],g);return p?n(a,c,b,p,d,g):!1};a.write=d;a.default=d})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(m,a,l,f){function h(a,c){return-1===a.indexOf(c)}function g(a,c,d){return!a.some(c.bind(null,
d))}function k(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.find=l.find;a.findIndex=l.findIndex;a.unique=function(a){return a.filter(function(a,b,d){return d.indexOf(a)===b})};a.equals=function(a,c,d){if(!a&&!c)return!0;if(!a||!c||a.length!==c.length)return!1;if(d)for(var b=0;b<a.length;b++){if(!d(a[b],c[b]))return!1}else for(b=0;b<a.length;b++)if(a[b]!==c[b])return!1;return!0};a.difference=function(a,c,d){var b;d?(b=c.filter(g.bind(null,a,d)),a=a.filter(g.bind(null,c,d))):(b=c.filter(h.bind(null,
a)),a=a.filter(h.bind(null,c)));return{added:b,removed:a}};a.intersect=function(a,c,d){return a&&c?d?a.filter(function(a){return-1<l.findIndex(c,function(b){return d(a,b)})}):a.filter(function(a){return-1<c.indexOf(a)}):[]};a.constant=function(a,c){for(var b=Array(a),d=0;d<a;d++)b[d]=c;return b};a.range=function(a,c){void 0===c&&(c=a,a=0);for(var b=Array(c-a),d=a;d<c;d++)b[d-a]=d;return b};a.binaryIndexOf=function(a,c,d){for(var b=a.length,e=0,q=b-1;e<q;){var g=e+Math.floor((q-e)/2);c>a[g]?e=g+1:
q=g}q=a[e];return d?c>=a[b-1]?-1:q===c?e:e-1:q===c?e:-1};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b||[])},[])};m=function(){return function(){this.last=0}}();a.RemoveHint=m;var e=new m;a.removeUnordered=function(a,c,d,p){p=p||e;for(var b=null==d?a.length:d,q=Math.max(0,p.last-10),g=-1,n=q;n<b;++n)if(a[n]===c){g=n;break}if(-1===g){for(n=0;n<q;++n)if(a[n]===c){g=n;break}if(-1===g)return}a[g]=a[b-1];null==d&&a.pop();p.last=g;return c};var n=new Set;a.removeUnorderedMany=function(a,
c,d,p,g,k){void 0===d&&(d=a.length);void 0===p&&(p=c.length);if(0===p||0===d)return d;n.clear();for(var b=0;b<p;++b)n.add(c[b]);g=g||e;for(b=c=Math.max(0,g.last-10);b<d;++b)if(n.has(a[b])&&(k&&k.push(a[b]),n.delete(a[b]),a[b]=a[d-1],--d,--b,0===n.size||0===d))return n.clear(),d;for(b=0;b<c;++b)if(n.has(a[b])&&(k&&k.push(a[b]),n.delete(a[b]),a[b]=a[d-1],--d,--b,0===n.size||0===d))return n.clear(),d;n.clear();return d};a.shuffle=function(a,c){c=(d.seed=c)?function(){return d.getFloat()}:Math.random;
for(var b=a.length-1;0<b;b--){var e=Math.floor(c()*(b+1)),g=a[b];a[b]=a[e];a[e]=g}return a};var d=new f;a.keysOfMap=function(a){var b=[];a.forEach(function(a,c){return b.push(c)});return b};a.keysOfSet=function(a,c){void 0===c&&(c=k);var b=[];a.forEach(function(a){return b.push(c(a))});return b};a.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),d=0;a.forEach(function(a){b[d++]=a});return b}})},"esri/core/RandomLCG":function(){define(["require","exports"],
function(m,a){return function(){function a(a){void 0===a&&(a=1);this._seed=a}Object.defineProperty(a.prototype,"seed",{set:function(f){this._seed=null==f?Math.random()*a._m:f},enumerable:!0,configurable:!0});a.prototype.getInt=function(){return this._seed=(a._a*this._seed+a._c)%a._m};a.prototype.getFloat=function(){return this.getInt()/(a._m-1)};a.prototype.getIntRange=function(a,h){return Math.round(this.getFloatRange(a,h))};a.prototype.getFloatRange=function(f,h){h-=f;var g=this.getInt()/a._m;return f+
Math.floor(g*h)};a._m=2147483647;a._a=48271;a._c=0;return a}()})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(m,a,l,f,h,g,k){m=function(a){function e(b){b=a.call(this)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;return b}l(e,a);d=e;e.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===
a.wkid)return d.WebMercator;if(4326===a.wkid)return d.WGS84}var b=new d;b.read(a);return b};e.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(e.prototype,"isWGS84",{get:function(){return k.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isWebMercator",{get:function(){return k.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isGeographic",
{get:function(){return k.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isWrappable",{get:function(){return k.isWrappable(this)},enumerable:!0,configurable:!0});e.prototype.writeWkt=function(a,c){this.wkid||(c.wkt=a)};e.prototype.clone=function(){if(this===d.WGS84)return d.WGS84;if(this===d.WebMercator)return d.WebMercator;var a=new d;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),
null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};e.prototype.equals=function(a){return k.equals(this,a)};e.prototype.toJSON=function(a){return this.write(null,a)};var d;e.GCS_NAD_1927=null;e.WGS84=null;e.WebMercator=null;f([g.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWGS84",null);f([g.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWebMercator",null);f([g.property({dependsOn:["wkid","wkt"],readOnly:!0})],e.prototype,
"isGeographic",null);f([g.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWrappable",null);f([g.property({type:Number,json:{write:!0}})],e.prototype,"latestWkid",void 0);f([g.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],e.prototype,"wkid",void 0);f([g.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],e.prototype,
"wkt",void 0);f([g.writer("wkt"),g.writer("web-scene","wkt")],e.prototype,"writeWkt",null);f([g.property({type:Number,json:{write:!0}})],e.prototype,"vcsWkid",void 0);f([g.property({type:Number,json:{write:!0}})],e.prototype,"latestVcsWkid",void 0);return e=d=f([g.subclass("esri.geometry.SpatialReference")],e)}(g.declared(h));m.prototype.toJSON.isDefaultToJSON=!0;m.GCS_NAD_1927=new m({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
m.WGS84=new m(k.WGS84);m.WebMercator=new m(k.WebMercator);Object.freeze&&(Object.freeze(m.GCS_NAD_1927),Object.freeze(m.WGS84),Object.freeze(m.WebMercator));return m})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","../../core/lang","./WKIDUnitConversion"],function(m,a,l,f){function h(a){return k(a)&&a.wkid?b[a.wkid]:null}function g(a){return k(a)&&!0===e[a.wkid]}function k(a){return null!=a&&(null!=a.wkid&&2E3<=a.wkid||null!=a.wkt)}Object.defineProperty(a,"__esModule",
{value:!0});var e={102113:!0,102100:!0,3857:!0,3785:!0},n={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};m=[-2.0037508342788905E7,2.0037508342788905E7];var d=[-2.0037508342787E7,2.0037508342787E7],b={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:m,origin:d,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m,origin:d,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m,origin:d,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:m,origin:d,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,b){return a&&b?a===b?!0:null!=a.wkid||null!=b.wkid?a.wkid===b.wkid||g(a)&&g(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid:a.wkt&&b.wkt?a.wkt.toUpperCase()===b.wkt.toUpperCase():!1:!1};a.getInfo=h;a.isGeographic=function(a){return k(a)?a.wkid?null==f[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1:!1};a.isWGS84=function(a){return k(a)&&4326===a.wkid};a.isWebMercator=g;a.isWrappable=function(a){return k(a)&&
!0===n[a.wkid]};a.isValid=k;a.WGS84={wkid:4326,wkt:l.substitute({Central_Meridian:"0.0"},h({wkid:4326}).wkTemplate)};a.WebMercator={wkid:102100,latestWkid:3857}})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Geometry ./SpatialReference ./support/offset ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(m,
a,l,f,h,g,k,e,n,d,b,c){function q(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var p=[0,0],t=h.getLogger("esri.geometry.Point");m=function(a){function e(b,c,d,e,p){b=a.call(this)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}l(e,a);h=e;e.copy=function(a,b){b._set("x",a._get("x"));b._set("y",a._get("y"));b._set("z",a._get("z"));b._set("m",a._get("m"));a=a._get("spatialReference");b._set("spatialReference",Object.isFrozen(a)?a:a.clone())};e.distance=
function(a,b){var c=a.x-b.x,d=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+d*d+a*a)};e.prototype.normalizeCtorArgs=function(a,b,d,e,g){var k;if(Array.isArray(a))k=a,g=b,a=k[0],b=k[1],d=k[2],e=k[3];else if(a&&"object"===typeof a){if(k=a,a=null!=k.x?k.x:k.longitude,b=null!=k.y?k.y:k.latitude,d=null!=k.z?k.z:k.altitude,e=k.m,(g=k.spatialReference)&&"esri.geometry.SpatialReference"!==g.declaredClass&&(g=new n(g)),null!=k.longitude||null!=k.latitude)null==k.longitude?t.warn(".longitude\x3d",
"Latitude was defined without longitude"):null==k.latitude?t.warn(".latitude\x3d","Longitude was defined without latitude"):!k.declaredClass&&g&&g.isWebMercator&&(b=c.lngLatToXY(k.longitude,k.latitude,p),a=b[0],b=b[1])}else q(d)?(g=d,d=null):q(e)&&(g=e,e=null);a={x:a,y:b};null==a.x&&null!=a.y?t.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&t.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=g&&(a.spatialReference=g);null!=d&&(a.z=d);null!=
e&&(a.m=e);return a};Object.defineProperty(e.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){a!==this.hasM&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){a!==this.hasZ&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"latitude",{get:function(){var a=this._get("spatialReference");
if(a){if(a.isWebMercator)return c.xyToLngLat(this.x,this.y,p)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",c.lngLatToXY(this.x,a,p)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return c.xyToLngLat(this._get("x"),this._get("y"),p)[0];if(a.isWGS84)return this._get("x")}return null},
set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",c.lngLatToXY(a,this._get("y"),p)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});e.prototype.writeX=function(a,b,c){b[c]=isNaN(a)?"NaN":a};e.prototype.readX=function(a){return"string"===typeof a?NaN:a};e.prototype.clone=function(){var a=new h;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};e.prototype.copy=function(a){h.copy(a,
this);return this};e.prototype.equals=function(a){var b;if(!a)return!1;var d=this.x,e=this.y,p=this.z,g=this.m,q=this.spatialReference,n=a.z,k=a.m,f=a.x;b=a.y;a=a.spatialReference;if(!q.equals(a))if(q.isWebMercator&&a.isWGS84)b=c.lngLatToXY(f,b),f=b[0],b=b[1],a=q;else if(q.isWGS84&&a.isWebMercator)b=c.xyToLngLat(f,b),f=b[0],b=b[1],a=q;else return!1;return d===f&&e===b&&p===n&&g===k&&q.wkid===a.wkid};e.prototype.offset=function(a,b,c){return d.offsetPoint(this,a,b,c)};e.prototype.normalize=function(){if(!this.spatialReference)return this;
var a=b.getInfo(this.spatialReference);if(!a)return this;var c=this.x,d=a.valid,a=d[0],e=d[1],d=2*e;c>e?(a=Math.ceil(Math.abs(c-e)/d),c-=a*d):c<a&&(a=Math.ceil(Math.abs(c-a)/d),c+=a*d);this._set("x",c);return this};e.prototype.distance=function(a){return h.distance(this,a)};e.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};e.prototype.toJSON=function(a){return this.write(null,a)};
var h;f([g.property({dependsOn:["x","y","z","m","spatialReference"]})],e.prototype,"cache",void 0);f([g.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasM",null);f([g.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasZ",null);f([g.property({type:Number,dependsOn:["y"]})],e.prototype,"latitude",null);f([g.property({type:Number,dependsOn:["x"]})],e.prototype,"longitude",null);
f([g.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),g.cast(function(a){return isNaN(a)?a:k.ensureNumber(a)})],e.prototype,"x",void 0);f([g.writer("x")],e.prototype,"writeX",null);f([g.reader("x")],e.prototype,"readX",null);f([g.property({type:Number,json:{write:!0}})],e.prototype,"y",void 0);f([g.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],e.prototype,"z",void 0);f([g.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],
e.prototype,"m",void 0);return e=h=f([g.subclass("esri.geometry.Point")],e)}(g.declared(e));m.prototype.toJSON.isDefaultToJSON=!0;return m})},"esri/geometry/support/offset":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.offsetPoint=function(a,f,h,g){a.x+=f;a.y+=h;null!=g&&null!=a.z&&(a.z+=g);return a};a.offsetCoordsX=function(a,f){a[0]+=f;return a}})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),
function(m,a,l,f,h,g){function k(a,b,d,e,g){var p;if("x"in a&&"x"in g)b=b(a.x,a.y,c,e),g.x=b[0],g.y=b[1];else if("xmin"in a&&"xmin"in g)p=b(a.xmin,a.ymin,c,e),g.xmin=p[0],g.ymin=p[1],b=b(a.xmax,a.ymax,c,e),g.xmax=b[0],g.ymax=b[1];else if("paths"in a&&"paths"in g||"rings"in a&&"rings"in g){p="paths"in a?a.paths:a.rings;var n=[],q=void 0;for(a=0;a<p.length;a++){var k=p[a],q=[];n.push(q);for(var f=0;f<k.length;f++)q.push(b(k[f][0],k[f][1],[0,0],e)),2<k[f].length&&q[f].push(k[f][2]),3<k[f].length&&q[f].push(k[f][3])}"paths"in
g?g.paths=n:g.rings=n}else if("points"in a&&"points"in g){p=a.points;n=[];for(a=0;a<p.length;a++)n[a]=b(p[a][0],p[a][1],[0,0],e),2<p[a].length&&n[a].push(p[a][2]),3<p[a].length&&n[a].push(p[a][3]);g.points=n}else if("type"in a&&"mesh"===a.type&&"type"in g&&"mesh"===g.type&&(p=a.vertexAttributes&&a.vertexAttributes.position,n=g.vertexAttributes&&g.vertexAttributes.position,p))for(q=[0,0],a=0;a<p.length;a+=3)b(p[a],p[a+1],q,e),n[a]=q[0],n[a+1]=q[1];g.spatialReference=d;return g}function e(a,b){a=a&&
(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?g.equals(b,a)?!0:g.isWebMercator(b)&&g.isWGS84(a)||g.isWebMercator(a)&&g.isWGS84(b):!1}function n(a,c,d){void 0===d&&(d=[0,0]);89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;d[0]=.017453292519943*a*b;d[1]=.5*b*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return d}function d(a,c,d,e){void 0===d&&(d=[0,0]);void 0===e&&(e=!1);a=a/b*57.29577951308232;d[0]=e?a:a-360*Math.floor((a+
180)/360);d[1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*c/b)));return d}Object.defineProperty(a,"__esModule",{value:!0});var b=f.wgs84Radius,c=[0,0];a.canProject=e;a.project=function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return e(c,b)?g.equals(c,b)?l.clone(a):g.isWebMercator(b)?k(a,n,h.WebMercator,!1,l.clone(a)):g.isWGS84(b)?k(a,d,h.WGS84,!1,l.clone(a)):null:null};a.lngLatToXY=n;a.xyToLngLat=d;a.geographicToWebMercator=function(a,b,c){void 0===
b&&(b=!1);void 0===c&&(c=l.clone(a));return k(a,n,h.WebMercator,b,c)};a.webMercatorToGeographic=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=l.clone(a));return k(a,d,h.WGS84,b,c)}})},"esri/geometry/support/contains":function(){define(["require","exports"],function(m,a){function l(a,g){return f(a,g[0],g[1])}function f(a,g,d,b){return g>=a.xmin&&g<=a.xmax&&d>=a.ymin&&d<=a.ymax?null!=b&&a.hasZ?b>=a.zmin&&b<=a.zmax:!0:!1}function h(a,n){if(a=a.rings)if(Array.isArray(a[0][0])){for(var d=!1,b=0,c=
a.length;b<c;b++)d=g(d,a[b],n);n=d}else n=g(!1,a,n);else n=!1;return n}function g(a,g,d){var b=d[0];d=d[1];for(var c=0,e=0,p=g.length;e<p;e++){c++;c===p&&(c=0);var n=g[e],k=n[0],n=n[1],f=g[c],h=f[0],f=f[1];(n<d&&f>=d||f<d&&n>=d)&&k+(d-n)/(f-n)*(h-k)<b&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});var k=[0,0];a.extentContainsPoint=function(a,g){return f(a,g.x,g.y,g.z)};a.extentContainsMultipoint=function(a,g){if(!g.points||g.points.length)return!1;var d=0;for(g=g.points;d<g.length;d++)if(!l(a,
g[d]))return!1;return!0};a.extentContainsExtent=function(a,g){var d=g.xmin,b=g.ymin,c=g.zmin,e=g.xmax,p=g.ymax,n=g.zmax;return a.hasZ&&g.hasZ?f(a,d,b,c)&&f(a,d,p,c)&&f(a,e,p,c)&&f(a,e,b,c)&&f(a,d,b,n)&&f(a,d,p,n)&&f(a,e,p,n)&&f(a,e,b,n):f(a,d,b)&&f(a,d,p)&&f(a,e,p)&&f(a,e,b)};a.extentContainsCoords2D=l;a.extentContainsCoords3D=function(a,g){return f(a,g[0],g[1],g[2])};a.polygonContainsPoint=function(a,g){k[1]=g.y;k[0]=g.x;return h(a,k)};a.polygonContainsCoords=h})},"esri/geometry/support/intersects":function(){define(["require",
"exports","./contains"],function(m,a,l){function f(a,b){return l.extentContainsPoint(a,b)}function h(a,b){var c=a.hasZ&&b.hasZ,d;if(a.xmin<=b.xmin){if(d=b.xmin,a.xmax<d)return!1}else if(d=a.xmin,b.xmax<d)return!1;if(a.ymin<=b.ymin){if(d=b.ymin,a.ymax<d)return!1}else if(d=a.ymin,b.ymax<d)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function g(a,b){var c=b.hasZ?l.extentContainsCoords3D:l.extentContainsCoords2D,d=0;for(b=b.points;d<
b.length;d++)if(c(a,b[d]))return!0;return!1}function k(a,d){b[0]=a.xmin;b[1]=a.ymax;c[0]=a.xmax;c[1]=a.ymax;q[0]=a.xmin;q[1]=a.ymin;p[0]=a.xmax;p[1]=a.ymin;for(var e=0,g=t;e<g.length;e++)if(l.polygonContainsCoords(d,g[e]))return!0;e=0;for(d=d.rings;e<d.length;e++)if(g=d[e],g.length){var k=g[0];if(l.extentContainsCoords2D(a,k))return!0;for(var f=1;f<g.length;f++){var h=g[f];if(l.extentContainsCoords2D(a,h)||n(k,h,u))return!0;k=h}}return!1}function e(a,d){b[0]=a.xmin;b[1]=a.ymax;c[0]=a.xmax;c[1]=a.ymax;
q[0]=a.xmin;q[1]=a.ymin;p[0]=a.xmax;p[1]=a.ymin;d=d.paths;for(var e=0;e<d.length;e++){var g=d[e];if(d.length){var k=g[0];if(l.extentContainsCoords2D(a,k))return!0;for(var f=1;f<g.length;f++){var t=g[f];if(l.extentContainsCoords2D(a,t)||n(k,t,u))return!0;k=t}}}return!1}function n(a,b,c){for(var e=0;e<c.length;e++)if(d(a,b,c[e][0],c[e][1]))return!0;return!1}function d(a,b,c,d,e){var p=a[0];a=a[1];var g=b[0];b=b[1];var k=c[0],n=c[1];c=d[0]-k;var k=p-k,q=g-p;d=d[1]-n;var n=a-n,f=b-a,t=d*q-c*f;if(0===
t)return!1;c=(c*n-d*k)/t;k=(q*n-f*k)/t;return 0<=c&&1>=c&&0<=k&&1>=k?(e&&(e[0]=p+c*(g-p),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=f;a.extentIntersectsExtent=h;a.extentIntersectsMultipoint=g;var b=[0,0],c=[0,0],q=[0,0],p=[0,0],t=[b,c,q,p],u=[[q,b],[b,c],[c,p],[p,q]];a.extentIntersectsPolygon=k;a.extentIntersectsPolyline=e;var w=[0,0];a.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var c=a[b],e=0;e<c.length-1;e++)for(var p=c[e],
g=c[e+1],k=b+1;k<a.length;k++)for(var n=0;n<a[k].length-1;n++){var q=a[k][n],f=a[k][n+1],t=d(p,g,q,f,w);if(t&&!(w[0]===p[0]&&w[1]===p[1]||w[0]===q[0]&&w[1]===q[1]||w[0]===g[0]&&w[1]===g[1]||w[0]===f[0]&&w[1]===f[1]))return!0}n=c.length;if(!(4>=n))for(e=0;e<n-3;e++){var h=n-1;0===e&&(h=n-2);p=c[e];g=c[e+1];for(k=e+2;k<h;k++)if(q=c[k],f=c[k+1],(t=d(p,g,q,f,w))&&!(w[0]===p[0]&&w[1]===p[1]||w[0]===q[0]&&w[1]===q[1]||w[0]===g[0]&&w[1]===g[1]||w[0]===f[0]&&w[1]===f[1]))return!0}}return!1};a.segmentIntersects=
d;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return h;case "esriGeometryMultipoint":case "multipoint":return g;case "esriGeometryPoint":case "point":return f;case "esriGeometryPolygon":case "polygon":return k;case "esriGeometryPolyline":case "polyline":return e;case "mesh":return h}}})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){function b(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}m=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}l(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var c=new k,d=this.hasZ,e=this.hasM,p=d?3:2,g=a[0],n=b(Math.min),q=b(Math.max),f=g[0],h=g[1],l=g[0],g=g[1],m,G,H,P,O=0,N=a.length;O<N;O++){var J=
a[O],R=J[0],M=J[1],f=n(f,R),h=n(h,M),l=q(l,R),g=q(g,M);d&&2<J.length&&(R=J[2],m=n(m,R),H=q(H,R));e&&J.length>p&&(J=J[p],G=n(G,J),P=q(P,J))}c.xmin=f;c.ymin=h;c.xmax=l;c.ymax=g;c.spatialReference=this.spatialReference;d?(c.zmin=m,c.zmax=H):(c.zmin=null,c.zmax=null);e?(c.mmin=G,c.mmax=P):(c.mmin=null,c.mmax=null);return c},enumerable:!0,configurable:!0});c.prototype.writePoints=function(a,b,c,d){b.points=h.clone(this.points)};c.prototype.addPoint=function(a){this.clearCache();d.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};c.prototype.clone=function(){var a={points:h.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new e(a)};c.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new n(b)};c.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new n(this.points.splice(a,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();d.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var e;f([g.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],c.prototype,"cache",void 0);f([g.property({dependsOn:["cache"]})],
c.prototype,"extent",null);f([g.property({type:[[Number]],json:{write:{isRequired:!0}}})],c.prototype,"points",void 0);f([g.writer("points")],c.prototype,"writePoints",null);return c=e=f([g.subclass("esri.geometry.Multipoint")],c)}(g.declared(e));m.prototype.toJSON.isDefaultToJSON=!0;return m})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,f,h){void 0===h&&(h=!1);var g=a.hasM,
k=a.hasZ;Array.isArray(f)?4!==f.length||g||k?3===f.length&&h&&!g?(k=!0,g=!1):3===f.length&&g&&k&&(k=g=!1):k=g=!0:(k=!k&&f.hasZ&&(!g||f.hasM),g=!g&&f.hasM&&(!k||f.hasZ));a.hasZ=k;a.hasM=g}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A){m=function(a){function n(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}l(n,a);y=n;n.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,e=a.center.m,p=a.center.hasZ,n=a.center.hasM,k=a.longAxis,q=a.shortAxis,f=a.numberOfPoints;a=a.view;for(var t=[],h=2*Math.PI/f,w=p?3:2,u=0;u<f;u++){var l=a.toMap(g.createScreenPoint(k*Math.cos(u*h)+b,q*Math.sin(u*h)+c)),l=[l.x,l.y];p&&(l[2]=d);n&&(l[w]=
e);t.push(l)}t.push(t[0]);return new y({rings:[t],spatialReference:a.spatialReference})};n.createCircle=function(a){return y.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};n.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var e=
a.zmin+.5*(a.zmax-a.zmin),p=0;p<b.length;p++)b[p].push(e);if(d&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),p=0;p<b.length;p++)b[p].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new y(b)};n.prototype.normalizeCtorArgs=function(a,c){var d=null,e,p,g=null;a&&!Array.isArray(a)?(d=a.rings?a.rings:null,c||(a.spatialReference?c=a.spatialReference:a.rings||(c=a)),e=a.hasZ,p=a.hasM):d=a;d=d||[];c=c||b.WGS84;d.length&&d[0]&&null!=d[0][0]&&"number"===typeof d[0][0]&&(d=[d]);if(g=d[0]&&
d[0][0])void 0===e&&void 0===p?(e=2<g.length,p=!1):void 0===e?e=!p&&3<g.length:void 0===p&&(p=!e&&3<g.length);return{rings:d,spatialReference:c,hasZ:e,hasM:p}};Object.defineProperty(n.prototype,"centroid",{get:function(){var a=c.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new d;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"extent",{get:function(){var a=
this.spatialReference,b=new e(t.getPolygonExtent(this));b.spatialReference=a;return b},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"isSelfIntersecting",{get:function(){return u.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});n.prototype.writePaths=function(a,b,c,d){b.rings=h.clone(this.rings)};n.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,p=a.length;e<p;e++)d[e]=
a[e].toArray();b[c]=d}return this}};n.prototype.clone=function(){var a=new y;a.spatialReference=this.spatialReference;a.rings=h.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};n.prototype.contains=function(a){if(!a)return!1;w.canProject(a,this.spatialReference)&&(a=w.project(a,this.spatialReference));return q.polygonContainsPoint(this,a)};n.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,
a.y]});return p.isClockwise(a,this.hasM,this.hasZ)};n.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new d(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new d(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new d(a[0],a[1],a[2],a[3],this.spatialReference):new d(a[0],a[1],this.spatialReference)};n.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();A.updateSupportFromPoint(this,
c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};n.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new d(this.rings[a].splice(b,1)[0],this.spatialReference)};n.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new d(a,b)})};n.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,
b))return this;this.clearCache();A.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};n.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};n.prototype.toJSON=function(a){return this.write(null,a)};var y;f([k.property({dependsOn:["hasM","hasZ","rings"]})],n.prototype,"cache",void 0);f([k.property({readOnly:!0,dependsOn:["cache"]})],
n.prototype,"centroid",null);f([k.property({dependsOn:["cache"],readOnly:!0})],n.prototype,"extent",null);f([k.property({dependsOn:["cache"],readOnly:!0})],n.prototype,"isSelfIntersecting",null);f([k.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],n.prototype,"rings",void 0);f([k.writer("rings")],n.prototype,"writePaths",null);return n=y=f([k.subclass("esri.geometry.Polygon")],n)}(k.declared(n));m.prototype.toJSON.isDefaultToJSON=!0;return m})},"esri/core/screenUtils":function(){define(["require",
"exports","./compilerUtils","./libs/gl-matrix-2/vec2f64","./libs/gl-matrix-2/vec3f64"],function(m,a,l,f,h){function g(b){return b?72*b/a.DPI:0}function k(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return{x:a,y:b}}function e(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return f.vec2f64.fromValues(a,b)}function n(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return{x:a,y:b}}function d(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return f.vec2f64.fromValues(a,b)}function b(a,b){return b?(b[0]=a.x,b[1]=a.y,2<b.length&&
(b[2]=0),b):f.vec2f64.fromValues(a.x,a.y)}function c(a){return k(a.x,a.y)}function q(a,b){a=(a instanceof HTMLElement?a:a.surface).getBoundingClientRect();return k(b.clientX-a.left,b.clientY-a.top)}Object.defineProperty(a,"__esModule",{value:!0});var p=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(b){return b?b/72*a.DPI:0};a.px2pt=g;a.toPt=function(a){if("string"===typeof a){if(p.test(a)){var b=a.match(p),c=Number(b[1]),b=b[3]&&b[3].toLowerCase();a="-"===a.charAt(0);c="px"===b?g(c):
c;return a?-c:c}console.warn("screenUtils.toPt: input not recognized!");return null}return a};a.createScreenPoint=k;a.createScreenPointArray=e;a.createRenderScreenPoint=n;a.createRenderScreenPointArray=d;a.createRenderScreenPointArray3=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return h.vec3f64.fromValues(a,b,c)};a.castRenderScreenPointArray=function(a){return a};a.castRenderScreenPointArray3=function(a){return a};a.castScreenPointArray=function(a){return a};a.screenToRender=
function(a,c,d){var e,p;switch(a.type){case "2d":a=window.devicePixelRatio||1;e=c.x*a;p=c.y*a;break;case "3d":b(c,u),a.state.camera.screenToRender(u,t),e=t[0],p=t[1]}return d?(d.x=e,d.y=p,d):n(e,p)};a.renderToScreen=function(a,c,d){var e,p;switch(a.type){case "2d":a=window.devicePixelRatio||1;e=c.x/a;p=c.y/a;break;case "3d":b(c,t),a.state.camera.renderToScreen(t,u),e=u[0],p=u[1]}return d?(d.x=e,d.y=p,d):k(e,p)};a.screenArrayToRender=function(a,b,c){var e,p;switch(a.type){case "2d":a=window.devicePixelRatio||
1;e=b[0]*a;p=b[1]*a;break;case "3d":a.state.camera.screenToRender(b,t),e=t[0],p=t[1]}return c?(c[0]=e,c[1]=p,2<c.length&&(c[2]=0),c):d(e,p)};a.renderArrayToScreen=function(a,b,c){var d,p;switch(a.type){case "2d":a=window.devicePixelRatio||1;d=b[0]/a;p=b[0]/a;break;case "3d":a.state.camera.renderToScreen(b,u),d=u[0],p=u[1]}return c?(c[0]=d,c[1]=p,c):e(d,p)};a.screenPointArrayToObject=function(a,b){return b?(b.x=a[0],b.y=a[1],b):{x:a[0],y:a[1]}};a.screenPointObjectToArray=b;a.createScreenPointFromEvent=
c;a.createScreenPointFromNativeEvent=q;a.createScreenPointFromSupportedEvent=function(a,b){return b instanceof Event?q(a,b):c(b)};a.isSupportedScreenPointEvent=function(a){if(a instanceof Event)return!0;if("object"===typeof a&&"type"in a)switch(a=a.type,a){case "click":case "double-click":case "pointer-down":case "pointer-drag":case "pointer-enter":case "pointer-leave":case "pointer-up":case "pointer-move":case "immediate-click":case "hold":case "drag":case "mouse-wheel":return!0;case "key-down":case "key-up":case "gamepad":case "focus":case "blur":break;
default:l.neverReachedSilent(a)}return!1};var t=d(),u=e()})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f64=l})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[0,0]};a.clone=function(a){return[a[0],a[1]]};a.fromValues=function(a,f){return[a,f]};
a.fromArray=function(a){for(var f=[0,0],h=Math.min(2,a.length),g=0;g<h;++g)f[g]=a[g];return f};a.createView=function(a,f){return new Float64Array(a,f,2)}})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["require","exports","./factories/vec3f64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec3f64=l})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(m,a){function l(){return[0,0,0]}Object.defineProperty(a,"__esModule",
{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2]]};a.fromValues=function(a,h,g){return[a,h,g]};a.fromArray=function(a){for(var f=l(),g=Math.min(3,a.length),k=0;k<g;++k)f[k]=a[k];return f};a.createView=function(a,h){return new Float64Array(a,h,3)}})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(m,a,l){function f(a,e){if(!a||!a.length)return null;for(var n=[],d=[],b=e?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,
-Infinity,Infinity,-Infinity],c=0,k=a.length;c<k;c++){var p=h(a[c],e,b);p&&d.push(p)}d.sort(function(a,b){var c=a[2]-b[2];0===c&&e&&(c=a[4]-b[4]);return c});d.length&&(c=6*d[0][2],n[0]=d[0][0]/c,n[1]=d[0][1]/c,e&&(c=6*d[0][4],n[2]=0!==c?d[0][3]/c:0),n[0]<b[0]||n[0]>b[1]||n[1]<b[2]||n[1]>b[3]||e&&(n[2]<b[4]||n[2]>b[5]))&&(n.length=0);if(!n.length)if(a=a[0]&&a[0].length?g(a[0],e):null)n[0]=a[0],n[1]=a[1],e&&2<a.length&&(n[2]=a[2]);else return null;return n}function h(a,e,g){for(var d=0,b=0,c=0,n=0,
p=0,k=0,f=a.length-1;k<f;k++){var h=a[k],l=h[0],C=h[1],z=h[2],y=a[k+1],x=y[0],m=y[1],B=y[2],F=l*m-x*C,n=n+F,d=d+(l+x)*F,b=b+(C+m)*F;e&&2<h.length&&2<y.length&&(F=l*B-x*z,c+=(z+B)*F,p+=F);l<g[0]&&(g[0]=l);l>g[1]&&(g[1]=l);C<g[2]&&(g[2]=C);C>g[3]&&(g[3]=C);e&&(z<g[4]&&(g[4]=z),z>g[5]&&(g[5]=z))}0<n&&(n*=-1);0<p&&(p*=-1);if(!n)return null;a=[d,b,.5*n];e&&(a[3]=c,a[4]=.5*p);return a}function g(a,e){for(var g=e?[0,0,0]:[0,0],d=e?[0,0,0]:[0,0],b=0,c=0,k=0,p=0,f=0,h=a.length;f<h-1;f++){var w=a[f],A=a[f+
1];if(w&&A){g[0]=w[0];g[1]=w[1];d[0]=A[0];d[1]=A[1];e&&2<w.length&&2<A.length&&(g[2]=w[2],d[2]=A[2]);var C=l.getLength(g,d);C&&(b+=C,w=l.getMidpoint(w,A),c+=C*w[0],k+=C*w[1],e&&2<w.length&&(p+=C*w[2]))}}return 0<b?e?[c/b,k/b,p/b]:[c/b,k/b]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?f(a.rings,a.hasZ):null};
a.ringsCentroid=f;a.lineCentroid=g})},"esri/geometry/support/coordsUtils":function(){define(["require","exports","./spatialReferenceUtils"],function(m,a,l){function f(a,e){var g=e[0]-a[0],d=e[1]-a[1];return 2<a.length&&2<e.length?(a=a[2]-e[2],Math.sqrt(g*g+d*d+a*a)):Math.sqrt(g*g+d*d)}function h(a,e,g){var d=a[0]+g*(e[0]-a[0]),b=a[1]+g*(e[1]-a[1]);return 2<a.length&&2<e.length?[d,b,a[2]+g*(e[2]-a[2])]:[d,b]}function g(a,e){if(e=l.getInfo(e)){var g=e.valid[0],d=e.valid[1],b=d-g;e=function(a){var c=
Infinity,e=-Infinity;a.forEach(function(a){for(var p=a[0];p<g;)p+=b;for(;p>d;)p-=b;c=Math.min(c,p);e=Math.max(e,p);a[0]=p});var n=e-c;b-n<n&&a.forEach(function(a){0>a[0]&&(a[0]+=b)})};for(var c=0;c<a.length;c++)e(a[c])}}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var e=a.hasZ,g=a.hasM;if("point"===a.type)return g&&e?[a.x,a.y,a.z,a.m]:e?[a.x,a.y,a.z]:g?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);
if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,b=!1;a.forEach(function(a){a.hasZ&&(d=!0);a.hasM&&(b=!0)});return a.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var e=.5*(a.zmax-a.zmin),g=0;g<c.length;g++)c[g].push(e);if(b&&a.hasM)for(a=.5*(a.mmax-a.mmin),g=0;g<c.length;g++)c[g].push(a);return c})}return null};
a.getLength=f;a.getMidpoint=function(a,e){return h(a,e,.5)};a.getPathLength=function(a){for(var e=a.length,g=0,d=0;d<e-1;++d)g+=f(a[d],a[d+1]);return g};a.getPointOnPath=function(a,e){if(0>=e)return a[0];for(var g=a.length,d=0,b=0;b<g-1;++b){var c=f(a[b],a[b+1]);if(e-d<c)return h(a[b],a[b+1],(e-d)/c);d+=c}return a[g-1]};a.isClockwise=function(a,e,g){for(var d=a.length,b=0,c=0,n=0,p=0;p<d;p++){var f=a[p],k=a[(p+1)%d],h=2,b=b+(f[0]*k[1]-k[0]*f[1]);2<f.length&&2<k.length&&g&&(c+=f[0]*k[2]-k[0]*f[2],
h=3);f.length>h&&k.length>h&&e&&(n+=f[0]*k[h]-k[0]*f[h])}return 0>=b&&0>=c&&0>=n};a.getRingArea=function(a){for(var e=a.length,g=0,d=0;d<e;d++)var b=a[d],c=a[(d+1)%e],g=g+(b[0]*c[1]-c[0]*b[1]);return g};a.unnormalizeGeometryOnDatelineCrossing=function(a){if("polygon"!==a.type&&"polyline"!==a.type)return a;g("polygon"===a.type?a.rings:a.paths,a.spatialReference);return a};a.unnormalizeVerticesOnDatelineCrossing=g;a.computeUnnormalizedVertexPositionsOnDateLineCrossing=function(a,e,g,d){var b=Infinity,
c=-Infinity;a.forEach(function(a){for(var p=a.pos[0];p<e;)p+=d;for(;p>g;)p-=d;b=Math.min(b,p);c=Math.max(c,p);a.unnormalizedPos[0]=p;a.unnormalizedPos[1]=a.pos[1]});var n=c-b;d-n<n&&a.forEach(function(a){0>a.unnormalizedPos[0]&&(a.unnormalizedPos[0]+=d)})}})},"esri/geometry/support/extentUtils":function(){define(["require","exports","./boundsUtils"],function(m,a,l){function f(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=!1);return b?c?{xmin:a[0],ymin:a[1],zmin:a[2],mmin:a[3],xmax:a[4],ymax:a[5],zmax:a[6],
mmax:a[7]}:{xmin:a[0],ymin:a[1],zmin:a[2],xmax:a[3],ymax:a[4],zmax:a[5]}:c?{xmin:a[0],ymin:a[1],mmin:a[2],xmax:a[3],ymax:a[4],mmax:a[5]}:{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3]}}function h(a){var b=a.hasZ,c=a.hasM;return f(l.getPointsBounds(n,a.points,b,c),b,c)}function g(a){var b=a.x,c=a.y,d=a.z;a=a.m;var e=null!=a;return null!=d?e?{xmin:b,ymin:c,zmin:d,mmin:a,xmax:b,ymax:c,zmax:d,mmax:a}:{xmin:b,ymin:c,zmin:d,xmax:b,ymax:c,zmax:d}:e?{xmin:b,ymin:c,mmin:a,xmax:b,ymax:c,mmax:a}:{xmin:b,ymin:c,xmax:b,
ymax:c}}function k(a){var b=a.hasZ,c=a.hasM;return f(l.getRingsOrPathsBounds(n,a.rings,b,c),b,c)}function e(a){var b=a.hasZ,c=a.hasM;return f(l.getRingsOrPathsBounds(n,a.paths,b,c),b,c)}Object.defineProperty(a,"__esModule",{value:!0});var n=[];a.getGeometryExtent=function(a){return a?void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax?a:void 0!==a.x&&void 0!==a.y?g(a):void 0!==a.rings?k(a):void 0!==a.paths?e(a):void 0!==a.points?h(a):null:null};a.getMultipointExtent=h;a.getPointExtent=
g;a.getPolygonExtent=k;a.getPolylineExtent=e})},"esri/geometry/support/boundsUtils":function(){define(["require","exports"],function(m,a){function l(a){return function(d,b){return null==d?b:null==b?d:a(d,b)}}function f(a,d,b,c){var g=b?3:2;if(!d.length||!d[0].length)return null;for(var p=d[0][0],n=p[0],p=p[1],f=d[0][0],h=f[0],f=f[1],l=void 0,C=void 0,z=void 0,y=void 0,x=0;x<d.length;x++)for(var m=d[x],B=0;B<m.length;B++){var F=m[B],D=F[0],G=F[1],n=k(n,D),p=k(p,G),h=e(h,D),f=e(f,G);b&&2<F.length&&
(D=F[2],l=k(l,D),C=e(C,D));c&&F.length>g&&(y=F[g],z=k(l,y),y=e(C,y))}if(b){if(c)return a[0]=n,a[1]=p,a[2]=l,a[3]=z,a[4]=h,a[5]=f,a[6]=C,a[7]=y,a.length=8,a;a[0]=n;a[1]=p;a[2]=l;a[3]=h;a[4]=f;a[5]=C;a.length=6;return a}if(c)return a[0]=n,a[1]=p,a[2]=z,a[3]=h,a[4]=f,a[5]=y,a.length=6,a;a[0]=n;a[1]=p;a[2]=h;a[3]=f;a.length=4;return a}function h(a,d,b,c,e,g){b=d.xmin;c=d.xmax;var p=d.ymin,n=d.ymax,f=d.zmin,k=d.zmax,q=d.mmin;d=d.mmax;if(e){f=f||0;k=k||0;if(g)return a[0]=b,a[1]=p,a[2]=f,a[3]=q||0,a[4]=
c,a[5]=n,a[6]=k,a[7]=d||0,a;a[0]=b;a[1]=p;a[2]=f;a[3]=c;a[4]=n;a[5]=k;return a}if(g)return a[0]=b,a[1]=p,a[2]=q||0,a[3]=c,a[4]=n,a[5]=d||0,a;a[0]=b;a[1]=p;a[2]=c;a[3]=n;return a}function g(a,d,b,c,g,p){var f=b?3:2;c=c&&p;b=b&&g;if(!d.length||!d[0].length)return null;for(var n=d[0],q=n[0],n=n[1],h=d[0],l=h[0],h=h[1],z=void 0,y=void 0,x=void 0,m=void 0,B=0;B<d.length;B++){var F=d[B],D=F[0],G=F[1],q=k(q,D),n=k(n,G),l=e(l,D),h=e(h,G);b&&2<F.length&&(D=F[2],z=k(z,D),y=e(y,D));c&&F.length>f&&(m=F[f],x=
k(z,m),m=e(y,m))}if(g){z=z||0;y=y||0;if(p)return a[0]=q,a[1]=n,a[2]=z,a[3]=x||0,a[4]=l,a[5]=h,a[6]=y,a[7]=m||0,a;a[0]=q;a[1]=n;a[2]=z;a[3]=l;a[4]=h;a[5]=y;return a}if(p)return a[0]=q,a[1]=n,a[2]=x||0,a[3]=l,a[4]=h,a[5]=m||0,a;a[0]=q;a[1]=n;a[2]=l;a[3]=h;return a}Object.defineProperty(a,"__esModule",{value:!0});var k=l(Math.min),e=l(Math.max);a.getBoundsXY=function(a,d){if(void 0!==d.paths)return f(a,d.paths,!1,!1);if(void 0!==d.rings)return f(a,d.rings,!1,!1);if(void 0!==d.points)return g(a,d.points,
!1,!1,!1,!1);if(void 0!==d.xmin&&void 0!==d.ymin&&void 0!==d.xmax&&void 0!==d.ymax)return h(a,d);void 0!==d.x&&void 0!==d.y&&(a[0]=d.x,a[1]=d.y,a[2]=d.x,a[3]=d.y);return a};a.getRingsOrPathsBounds=f;a.getExtentBounds=h;a.getPointsBounds=g;a.getPointsBoundsWidth=function(a){if(!a.length||!a[0].length)return null;for(var d=a[0][0],b=a[0][0],c=0;c<a.length;c++)var g=a[c][0],d=k(d,g),b=e(b,g);return b-d};a.getPointsBoundsCenterX=function(a){if(!a.length||!a[0].length)return null;for(var d=a[0][0],b=a[0][0],
c=0;c<a.length;c++)var g=a[c][0],d=k(d,g),b=e(b,g);return d+.5*(b-d)}})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/extentUtils ./support/zmUtils".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c){m=function(a){function e(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.paths=[];b.type="polyline";return b}
l(e,a);q=e;e.prototype.normalizeCtorArgs=function(a,b){var c=null,e,g,p=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),e=a.hasZ,g=a.hasM):c=a;c=c||[];b=b||d.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(p=c[0]&&c[0][0])void 0===e&&void 0===g?(e=2<p.length,g=!1):void 0===e?e=!g&&3<p.length:void 0===g&&(g=!e&&3<p.length);return{paths:c,spatialReference:b,hasZ:e,hasM:g}};Object.defineProperty(e.prototype,"extent",
{get:function(){var a=this.spatialReference,c=new k(b.getPolylineExtent(this));c.spatialReference=a;return c},enumerable:!0,configurable:!0});e.prototype.writePaths=function(a,b,c,d){b.paths=h.clone(this.paths)};e.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,g=a.length;e<g;e++)d[e]=a[e].toArray();b[c]=d}return this}};e.prototype.clone=function(){var a=new q;a.spatialReference=this.spatialReference;a.paths=
h.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};e.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new n(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new n(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new n(a[0],a[1],a[2],a[3],this.spatialReference):new n(a[0],a[1],this.spatialReference)};e.prototype.insertPoint=function(a,b,d){if(!this._validateInputs(a,b,!0))return this;this.clearCache();
c.updateSupportFromPoint(this,d);Array.isArray(d)||(d=d.toArray());this.paths[a].splice(b,0,d);return this};e.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new n(a,b)})};e.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new n(this.paths[a].splice(b,1)[0],this.spatialReference)};e.prototype.setPoint=function(a,
b,d){if(!this._validateInputs(a,b))return this;this.clearCache();c.updateSupportFromPoint(this,d);Array.isArray(d)||(d=d.toArray());this.paths[a][b]=d;return this};e.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};e.prototype.toJSON=function(a){return this.write(null,a)};var q;f([g.property({dependsOn:["hasM","hasZ","paths"]})],e.prototype,"cache",void 0);f([g.property({dependsOn:["cache"],
readOnly:!0})],e.prototype,"extent",null);f([g.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],e.prototype,"paths",void 0);f([g.writer("paths")],e.prototype,"writePaths",null);return e=q=f([g.subclass("esri.geometry.Polyline")],e)}(g.declared(e));m.prototype.toJSON.isDefaultToJSON=!0;return m})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(m,a,l,f,h,g,k){function e(a){return void 0!==a.xmin&&
void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function n(a){return void 0!==a.points}function d(a){return void 0!==a.x&&void 0!==a.y}function b(a){return void 0!==a.paths}function c(a){return void 0!==a.rings}function q(a){return a?d(a)?h.fromJSON(a):b(a)?k.fromJSON(a):c(a)?g.fromJSON(a):n(a)?f.fromJSON(a):e(a)?l.fromJSON(a):null:null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(u){console.warn(u.stack)}return q(a)};
a.isExtent=e;a.isMultipoint=n;a.isPoint=d;a.isPolyline=b;a.isPolygon=c;a.isMesh=function(a){return void 0!==a.vertexAttributes};a.fromJSON=q;a.getJsonType=function(a){return a?d(a)?"esriGeometryPoint":b(a)?"esriGeometryPolyline":c(a)?"esriGeometryPolygon":e(a)?"esriGeometryEnvelope":n(a)?"esriGeometryMultipoint":null:null};var p={esriGeometryPoint:h,esriGeometryPolyline:k,esriGeometryPolygon:g,esriGeometryEnvelope:l,esriGeometryMultipoint:f};a.getGeometryType=function(a){return a&&p[a]||null}})},
"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(m,a,l,f){function h(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function g(a){return a[0]>=a[2]?0:a[2]-a[0]}function k(a){return a[1]>=a[3]?0:a[3]-a[1]}function e(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a}function n(a){return 4===a.length}function d(a,c,d){return a<c?c:a>d?d:a}Object.defineProperty(a,"__esModule",{value:!0});a.create=h;a.clone=function(a){return[a[0],
a[1],a[2],a[3]]};a.fromValues=function(a,c,d,e,g){void 0===g&&(g=h());g[0]=a;g[1]=c;g[2]=d;g[3]=e;return g};a.fromExtent=function(a,c){void 0===c&&(c=h());c[0]=a.xmin;c[1]=a.ymin;c[2]=a.xmax;c[3]=a.ymax;return c};a.toExtent=function(a,c){return new f({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:c})};a.expandPointInPlace=function(a,c){c[0]<a[0]&&(a[0]=c[0]);c[0]>a[2]&&(a[2]=c[0]);c[1]<a[1]&&(a[1]=c[1]);c[1]>a[3]&&(a[3]=c[1])};a.expand=function(a,c,d){void 0===d&&(d=a);if("length"in c)if(n(c))d[0]=
Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.max(a[2],c[2]),d[3]=Math.max(a[3],c[3]);else{if(2===c.length||3===c.length)d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.max(a[2],c[0]),d[3]=Math.max(a[3],c[1])}else switch(c.type){case "extent":d[0]=Math.min(a[0],c.xmin);d[1]=Math.min(a[1],c.ymin);d[2]=Math.max(a[2],c.xmax);d[3]=Math.max(a[3],c.ymax);break;case "point":d[0]=Math.min(a[0],c.x);d[1]=Math.min(a[1],c.y);d[2]=Math.max(a[2],c.x);d[3]=Math.max(a[3],c.y);break;default:l.neverReached(c)}return d};
a.expandWithNestedArray=function(a,c,d){void 0===d&&(d=a);var b=c.length,e=a[0],g=a[1],f=a[2];a=a[3];for(var n=0;n<b;n++){var k=c[n],e=Math.min(e,k[0]),g=Math.min(g,k[1]),f=Math.max(f,k[0]);a=Math.max(a,k[1])}d[0]=e;d[1]=g;d[2]=f;d[3]=a;return d};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=g;a.height=k;a.diameter=function(a){var b=g(a);a=k(a);return Math.sqrt(b*b+a*a)};a.area=function(a){return g(a)*k(a)};a.center=function(a,c){void 0===c&&(c=[0,0]);c[0]=
a[0]+g(a)/2;c[1]=a[1]+k(a)/2;return c};a.containsPoint=function(a,c){return c[0]>=a[0]&&c[1]>=a[1]&&c[0]<=a[2]&&c[1]<=a[3]};a.containsPointWithMargin=function(a,c,d){return c[0]>=a[0]-d&&c[1]>=a[1]-d&&c[0]<=a[2]+d&&c[1]<=a[3]+d};a.intersects=function(a,c){return Math.max(c[0],a[0])<=Math.min(c[2],a[2])&&Math.max(c[1],a[1])<=Math.min(c[3],a[3])};a.contains=function(a,c){return c[0]>=a[0]&&c[2]<=a[2]&&c[1]>=a[1]&&c[3]<=a[3]};a.intersection=function(a,c,e){void 0===e&&(e=a);var b=c[0],g=c[1],f=c[2];
c=c[3];e[0]=d(a[0],b,f);e[1]=d(a[1],g,c);e[2]=d(a[2],b,f);e[3]=d(a[3],g,c);return e};a.distance=function(a,c){var b=(a[1]+a[3])/2,d=Math.max(Math.abs(c[0]-(a[0]+a[2])/2)-g(a)/2,0);a=Math.max(Math.abs(c[1]-b)-k(a)/2,0);return Math.sqrt(d*d+a*a)};a.offset=function(a,c,d,e){void 0===e&&(e=a);e[0]=a[0]+c;e[1]=a[1]+d;e[2]=a[2]+c;e[3]=a[3]+d;return e};a.pad=function(a,c,d){void 0===d&&(d=a);d[0]=a[0]-c;d[1]=a[1]-c;d[2]=a[2]+c;d[3]=a[3]+c;return d};a.setMin=function(a,c,d){void 0===d&&(d=a);d[0]=c[0];d[1]=
c[1];d!==a&&(d[2]=a[2],d[3]=a[3]);return d};a.setMax=function(a,c,d){void 0===d&&(d=a);d[2]=c[0];d[3]=c[1];d!==a&&(d[0]=a[0],d[1]=a[1]);return a};a.set=e;a.empty=function(b){return b?e(b,a.NEGATIVE_INFINITY):h(a.NEGATIVE_INFINITY)};a.is=n;a.isPoint=function(a){return(0===g(a)||!isFinite(a[0]))&&(0===k(a)||!isFinite(a[1]))};a.equals=function(a,c,d){if(null==a||null==c)return a===c;if(!n(a)||!n(c))return!1;if(d)for(var b=0;b<a.length;b++){if(!d(a[b],c[b]))return!1}else for(b=0;b<a.length;b++)if(a[b]!==
c[b])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0]})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this,b)||this;b.level=
0;b.levelValue=null;b.resolution=0;b.scale=0;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var d;f([g.property({type:k.Integer,json:{write:!0}})],e.prototype,"level",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"levelValue",void 0);f([g.property({type:Number,json:{write:!0}})],e.prototype,"resolution",void 0);f([g.property({type:Number,json:{write:!0}})],e.prototype,"scale",
void 0);return e=d=f([g.subclass("esri.layers.support.LOD")],e)}(g.declared(h))})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(m,a,l,f,h,g,k,e){function n(a){var b;try{b=a?l.parseScript(a):null}catch(t){b=null}return b}function d(a){a=n(a);return!!a&&l.scriptUsesGeometryEngine(a)}Object.defineProperty(a,"__esModule",
{value:!0});var b=/^\$feature\./i,c={vars:{$feature:"any",$view:"any"},spatialReference:null};a.createSyntaxTree=n;a.createFunction=function(a,b){b=b||g.clone(c);a="string"===typeof a?n(a):a;if(!a)return null;var d;try{d=a?l.compileScript(a,b):null}catch(u){d=null}return d};a.createExecContext=function(a,b){return{vars:{$feature:null==a?new h:h.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};a.createFeature=function(a,b,c){return h.createFromGraphicLikeObject(b,a,c)};a.updateExecContext=
function(a,b){a.vars.$feature=b};a.evalSyntaxTree=function(a,b){var c;try{c=l.executeScript(a,b,b.spatialReference)}catch(u){c=null}return c};a.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(u){c=null}return c};a.executeAsyncFunction=function(a,b){try{return a?a(b,b.spatialReference):k.resolve(null)}catch(t){return k.resolve(null)}};a.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?n(a):a;if(!a)return[];var c=[];l.extractFieldLiterals(a).forEach(function(a){b.test(a)&&
(a=a.replace(b,""),c.push(a))});c.sort();return c.filter(function(a,b){return 0===b||c[b-1]!==a})};a.dependsOnView=function(a){return l.referencesMember(a,"$view")};a.hasVariable=function(a,b){return a?l.referencesMember(a,b):!1};a.getViewInfo=function(a){if(a&&(null!=a.spatialReference||null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new f({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};a.convertServiceUrlToWorkspace=function(a,b){var c=l.featureSetUtils();
return c?c.createFeatureSetCollectionFromService(a,b):null};a.convertFeatureLayerToFeatureSet=function(a,b){if(null===a)return null;var c=l.featureSetUtils();return c?c.constructFeatureSet(a,b):null};a.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;var b=l.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};a.loadScriptDependencies=function(a,b,c){void 0===c&&(c=[]);return l.loadScriptDependencies(a,b,c)};a.enableGeometryOperations=
function(){return l.enableGeometrySupport()};a.enableFeatureSetOperations=function(){return l.enableFeatureSetSupport()};a.applyTextFormattingHTML=function(a){var b=/(\n)/gi;return"string"===typeof a?a.replace(b,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};a.hasGeometryOperations=function(a){if(!a)return!1;if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type){if("dot-density"===a.type){var b=a.attributes.some(function(a){return d(a.valueExpression)});
if(b)return b}b=a.visualVariables;b=!!b&&b.some(function(a){var b=d(a.valueExpression);"size"===a.type&&(e.isSizeVariable(a.minSize)&&(b=b||d(a.minSize.valueExpression)),e.isSizeVariable(a.maxSize)&&(b=b||d(a.maxSize.valueExpression)));return b});return"valueExpression"in a&&d(a.valueExpression)?!0:b}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!d(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return d(a.expression)}):
!1}})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis ../core/has ../core/promiseUtils".split(" "),function(m,a,l,f,h,g,k,e){function n(a,b){if(null===E)throw Error("Async Arcade must be enabled for this script");return k("csp-restrictions")||!1===z?function(b,c){return E.executeScript(a,b,c)}:l.compileScript(a,b,!0)}function d(a,b){void 0===b&&(b=[]);return h.parseScript(a,b)}function b(a,b,c){if(!0===b.useAsync||!0===a.isAsync){if(null===
E)throw Error("Async Arcade must be enabled for this script");return E.executeScript(a,b,c)}return f.executeScript(a,b,c)}function c(a,b){return f.referencesMember(a,b)}function q(a,b){void 0===b&&(b=[]);void 0===a.usesGeometry&&g.findScriptDependencies(a,b);return!0===a.usesGeometry}function p(){return F?F:F=e.create(function(a,b){m(["../geometry/geometryEngine","./functions/geomsync"],function(b,c){x=!0;c.setGeometryEngine(b);a(!0)},function(a){b(a)})})}function t(){return null!==D?D:D=l.enableAsyncSupport().then(function(){return e.create(function(a,
b){m(["./arcadeAsyncRuntime"],function(c){try{E=c;c=0;for(var d=B;c<d.length;c++){var e=d[c];E.extend(e);l.extend(e,"async")}B=null;a(!0)}catch(M){b(M)}},b)})})}function u(){return E?!0:!1}function w(){return G?G:G=t().then(function(){return e.create(function(a,b){m(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(c,d,e,g,p){try{H=c,E.extend([d,e,g,p]),l.extend([d,e,g,p],"async"),y=!0,a(!0)}catch(S){b(S)}},
b)})})}function A(a,b){void 0===b&&(b=[]);void 0===a.usesFeatureSet&&g.findScriptDependencies(a,b);return!0===a.usesFeatureSet}function C(a,b){if(b)for(var d=0;d<b.length;d++)if(c(a,b[d]))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0});var z=function(){if(k("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(P){return!1}}(),y=!1,x=!1,E=null,B=[];a.compileScript=function(a,b){return!0===b.useAsync||!0===a.isAsync?n(a,b):k("csp-restrictions")?
function(b,c){return f.executeScript(a,b,c)}:l.compileScript(a,b)};a.extend=function(a){f.extend(a);l.extend(a,"sync");null===E?B.push(a):(l.extend(a,"async"),E.extend(a))};a.parseScript=d;a.validateScript=function(a,b,c){void 0===c&&(c="");return h.validateScript(a,b,c)};a.scriptCheck=function(a,b,c,d){void 0===d&&(d="");return h.scriptCheck(a,b,c,d)};a.parseAndExecuteScript=function(a,c,d,e){void 0===e&&(e=[]);a=h.parseScript(a,e);return b(a,c,d)};a.executeScript=b;a.referencesMember=c;a.referencesFunction=
function(a,b){return f.referencesFunction(a,b)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return h.extractFieldLiterals(a,b)};a.scriptUsesGeometryEngine=q;var F=null;a.enableGeometrySupport=p;var D=null;a.enableAsyncSupport=t;a.isFeatureSetSupportEnabled=function(){return y};a.isAsyncEnabled=u;a.isGeometryEnabled=function(){return x};var G=null;a.enableFeatureSetSupport=w;a.scriptUsesFeatureSet=A;a.scriptIsAsync=function(a,b){void 0===b&&(b=[]);void 0===a.isAsync&&g.findScriptDependencies(a,
b);return!0===a.isAsync};a.loadScriptDependencies=function(a,b,c,g){void 0===c&&(c=[]);void 0===g&&(g=!1);return e.create(function(f,k){var n="string"===typeof a?d(a):a,h=[];n&&(!1===x&&(q(n)||g)&&h.push(p()),!1===u()&&(!0===n.isAsync||b)&&h.push(t()),!1===y&&(A(n)||C(n,c))&&h.push(w()));h?e.all(h).then(function(){f(!0)},k):f(!0)})};a.scriptTouchesGeometry=function(a){if(q(a))return!0;a=g.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var H=null;a.featureSetUtils=
function(){return H}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),function(m,
a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E){function B(a,b,c){try{return c(a,null,b)}catch(Aa){throw Aa;}}function F(a){return a instanceof Error?u.reject(a):u.reject(Error(a))}function D(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return N(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(D(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return O(a,
b);case "FunctionDeclaration":var e=b.id.name.toLowerCase(),g={isAsync:a.isAsync,applicationCache:void 0===a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
p=0;p<b.params.length;p++){var f=b.params[p].name.toLowerCase(),k=ea(f,a);g.localScope._SymbolsMap[f]=k;g.mangleMap[f]=k;c+="lscope['"+k+"']\x3darguments["+p.toString()+"];\n"}!0===a.isAsync?(c=c+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(O(g,b.body)+"\n return lastStatement; "),c+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(c+=O(g,b.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[e]?
d="gscope['"+e+"']\x3d"+c:void 0!==a.globalScope._SymbolsMap[e]?d="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+c:(k=ea(e,a),a.globalScope._SymbolsMap[e]=k,a.mangleMap[e]=k,d="gscope['"+k+"']\x3d"+c);return d;case "ReturnStatement":var q;q=null===b.argument?"return lc.voidOperation":"return "+D(a,b.argument)+"";return q;case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(n.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var h=D(a,b.test),t=ba(a),w="var "+t+" \x3d "+h+";\n if ("+t+" \x3d\x3d\x3d true) {\n"+P(a,b.consequent)+"\n }\n",w=null!==b.alternate?w+("else if ("+t+"\x3d\x3d\x3dfalse)   { \n"+P(a,b.alternate)+"}\n"):w+("else if ("+t+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return w+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var u;u="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
D(a,b.expression)+"; \n ":"lastStatement \x3d "+D(a,b.expression)+"; ";return u;case "AssignmentExpression":return H(a,b);case "UpdateExpression":return G(a,b);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=D(a,b.init)+"; ");var l=ba(a),y=ba(a),c=c+("var "+l+" \x3d true; ")+"\n do { ";null!==b.update&&(c+=" if ("+l+"\x3d\x3d\x3dfalse) {\n "+D(a,b.update)+"  \n}\n "+l+"\x3dfalse; \n");
null!==b.test&&(c+="var "+y+" \x3d "+D(a,b.test)+"; ",c+="if ("+y+"\x3d\x3d\x3dfalse) { break; } else if ("+y+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=D(a,b.body);null!==b.update&&(c+="\n "+D(a,b.update));return c+("\n"+l+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var A=ba(a),z=ba(a),C=ba(a),x="var "+A+" \x3d "+D(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(x+=D(a,b.left));
var B="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,B=B.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[B]?c="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(c="lscope['"+a.localScope._SymbolsMap[B]+"']"));""===c&&(void 0!==a.globalScope[B]?c="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(c="gscope['"+a.globalScope._SymbolsMap[B]+"']"));x=x+("if ("+A+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
A+") || lc.isString("+A+")) {")+("var "+z+"\x3d"+A+".length; \n")+("for(var "+C+"\x3d0; "+C+"\x3c"+z+"; "+C+"++) {\n");x+=c+"\x3d"+C+";\n";x+=D(a,b.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (lc.isImmutableArray("+A+")) {";x=x+("var "+z+"\x3d"+A+".length(); \n")+("for(var "+C+"\x3d0; "+C+"\x3c"+z+"; "+C+"++) {\n");x+=c+"\x3d"+C+";\n";x+=D(a,b.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (( "+A+" instanceof lang.Dictionary) || ( "+
A+" instanceof lang.Feature)) {";x=x+("var "+z+"\x3d"+A+".keys(); \n")+("for(var "+C+"\x3d0; "+C+"\x3c"+z+".length; "+C+"++) {\n");x+=c+"\x3d"+z+"["+C+"];\n";x+=D(a,b.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";a.isAsync&&(x+="else if (lc.isFeatureSet("+A+")) {",x=x+("var "+z+"\x3d"+A+".iterator(runtimeCtx.progressTracker); \n")+("for(var "+C+"\x3dlang. graphicToFeature( yield "+z+".next(),"+A+"); "+C+"!\x3dnull; "+C+"\x3dlang. graphicToFeature( yield "+z+".next(),"+
A+")) {\n")+(c+"\x3d"+C+";\n"),x+=D(a,b.body),x+="\n}\n",x+=" lastStatement \x3d lc.voidOperation; \n",x+=" \n}\n");return x+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return R(a,b);case "MemberExpression":var m;try{c=void 0,c=!0===b.computed?D(a,b.property):"'"+b.property.name+"'",m="lang.member("+D(a,b.object)+","+c+")"}catch(ca){throw ca;}return m;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(n.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var E=b.callee.name.toLowerCase(),d="";null!==a.localScope&&(void 0!==a.localScope[E]?d="lscope['"+E+"']":void 0!==a.localScope._SymbolsMap[E]&&(d="lscope['"+a.localScope._SymbolsMap[E]+"']"));""===d&&(void 0!==a.globalScope[E]?d="gscope['"+E+"']":void 0!==a.globalScope._SymbolsMap[E]&&(d="gscope['"+a.globalScope._SymbolsMap[E]+"']"));if(""!==d){e=
"[";for(g=0;g<b.arguments.length;g++)0<g&&(e+=", "),e+=D(a,b.arguments[g]);e+="]";c=a.isAsync?"(yield lang.callfunc("+d+","+e+",runtimeCtx) )":"lang.callfunc("+d+","+e+",runtimeCtx)"}else throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ca){throw ca;}return c;case "UnaryExpression":var F;try{F="lang.unary("+D(a,b.argument)+",'"+b.operator+"')"}catch(ca){throw ca;}return F;case "BinaryExpression":var J;try{J="lang.binary("+D(a,b.left)+","+D(a,b.right)+",'"+b.operator+"')"}catch(ca){throw ca;
}return J;case "LogicalExpression":var K;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(n.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(n.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)K="(lang.logicalCheck("+D(a,b.left)+") "+b.operator+" lang.logicalCheck("+D(a,b.right)+
"))";else throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}catch(ca){throw ca;}return K;case "ConditionalExpression":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(D(a,b.elements[d])):c.push("lang.aCheck("+D(a,b.elements[d])+",'ArrayExpression')");p="["+c.join(",")+"]"}catch(ca){throw ca;}return p;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var L=
b.properties[d],Z="Identifier"===L.key.type?"'"+L.key.name+"'":D(a,L.key),M=D(a,L.value);0<d&&(c+=",");c+="lang.strCheck("+Z+",'ObjectExpression'),lang.aCheck("+M+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));default:throw Error(n.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(ca){throw ca;}}function G(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=D(a,b.argument.object),
d=!0===b.argument.computed?D(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function H(a,b){var c=D(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=D(a,b.left.object),e=!0===b.left.computed?D(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+")";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"'])";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"'])"}if(void 0!==a.globalScope[d])return"gscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"'])";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+
"'])";throw Error("Variable not recognised");}function P(a,b){return"BlockStatement"===b.type?D(a,b):"ReturnStatement"===b.type||"BreakStatement"===b.type||"ContinueStatement"===b.type?D(a,b)+"; ":"UpdateExpression"===b.type?"lastStatement \x3d "+D(a,b)+"; ":"ExpressionStatement"===b.type?D(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+D(a,b)+"; ":D(a,b)+"; "}function O(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(D(a,b.body[d])+"; \n"):"BreakStatement"===
b.body[d].type?c+(D(a,b.body[d])+"; \n"):"ContinueStatement"===b.body[d].type?c+(D(a,b.body[d])+"; \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+D(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+D(a,b.body[d])+"; \n"):c+(D(a,b.body[d])+" \n");return c}function N(a,b){var c=null===b.init?null:D(a,b.init);c===e.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+"; ";
if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+"; ";var d=ea(b,a);a.localScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"lscope['"+d+"']\x3d"+c+"; "}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+"; ";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+c+"; ";d=ea(b,a);a.globalScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"gscope['"+d+"']\x3d"+c+"; "}function J(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=
a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(ya++,b=a.spatialReference._arcadeCacheId=ya)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(ya++,b=ya,a.cache._arcadeCacheId=b),a=new g(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(ya++,b=ya,a.cache._arcadeCacheId=
b),a=new g(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(ya++,b=ya,a.cache._arcadeCacheId=b),a=new k(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(n.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function R(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+
c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(n.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Aa){throw Aa;}}function M(a){return null===a?"":e.isArray(a)||e.isImmutableArray(a)?"Array":e.isDate(a)?"Date":e.isString(a)?"String":e.isBoolean(a)?"Boolean":e.isNumber(a)?"Number":a instanceof
l?"Attachment":a instanceof f?"Dictionary":a instanceof h?"Feature":a instanceof z?"Point":a instanceof y?"Polygon":a instanceof x?"Polyline":a instanceof C?"Multipoint":a instanceof w?"Extent":e.isFunctionParameter(a)?"Function":e.isFeatureSet(a)?"FeatureSet":e.isFeatureSetCollection(a)?"FeatureSetCollection":a===e.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function W(a,b,c,d){try{if(e.equalityTest(b[c],d))return b[c+1];var g=b.length-c;return 1===g?b[c]:2===g?null:
3===g?b[c+2]:W(a,b,c+2,d)}catch(r){throw r;}}function S(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var g=b[c+2];if(!1===e.isBoolean(g))throw Error("WHEN needs boolean test conditions");return S(a,b,c+2,g)}catch(r){throw r;}}function L(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=L(a.slice(0,d),b);a=L(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):
(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function Z(a,b){try{var c=a.length,d=Math.floor(c/2);if(0===c)return u.resolve([]);if(1===c)return u.resolve([a[0]]);var e=[Z(a.slice(0,d),b),Z(a.slice(d,c),b)];return u.all(e).then(function(a){return K(a[0],a[1],b,[])})}catch(r){return u.reject(r)}}function K(a,b,c,d){return u.create(function(e,g){0<a.length||0<b.length?0<a.length&&0<b.length?c(a[0],b[0]).then(function(p){try{isNaN(p)&&
(p=1),0>=p?(d.push(a[0]),a=a.slice(1)):(d.push(b[0]),b=b.slice(1)),K(a,b,c,d).then(function(a){e(a)},g)}catch(Ma){g(Ma)}},g):0<a.length?(d.push(a[0]),a=a.slice(1),K(a,b,c,d).then(function(a){e(a)},g)):0<b.length&&(d.push(b[0]),b=b.slice(1),K(a,b,c,d).then(function(a){e(a)},g)):e(d)})}function ea(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function ba(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function ma(a,b,c){var d={};a||(a={});
c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function sa(a,b){for(var c={mode:b,compiled:!0,functions:{},signatures:[],failDefferred:F,standardFunction:B,standardFunctionAsync:B,evaluateIdentifier:qa},d=0;d<a.length;d++)a[d].registerFunctions(c);if("sync"===b){for(var g in c.functions)ja[g]=new e.NativeFunction(c.functions[g]),Xa.prototype[g]=ja[g];for(d=0;d<c.signatures.length;d++)n.addFunctionDeclaration(c.signatures[d],
"sync")}else{for(g in c.functions)Pa[g]=new e.NativeFunction(c.functions[g]),ua.prototype[g]=Pa[g];for(d=0;d<c.signatures.length;d++)n.addFunctionDeclaration(c.signatures[d],"async")}}function qa(a,b){b=b.name;if("_SymbolsMap"===b)throw"Illegal";if(0<a.localStack.length){if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];var c=a.mangleMap[b];if(void 0!==c&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-
1][c]}if("_t"!==b.substr(0,2).toLowerCase()&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function la(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var ya=0,ja={};d.registerFunctions(ja,B);t.registerFunctions(ja,B);q.registerFunctions(ja,B);b.registerFunctions(ja,B);p.registerFunctions(ja,B);ja["typeof"]=function(a,b){return B(a,b,function(a,b,c){e.pcCheck(c,1,1);a=M(c[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};ja.iif=function(a,b){try{return B(a,b,function(a,b,c){e.pcCheck(c,3,3);if(!1===e.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(Da){throw Da;}};ja.decode=function(a,b){try{return B(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");return W(a,d,1,d[0])})}catch(Da){throw Da;}};
ja.when=function(a,b){try{return B(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===e.isBoolean(b))throw Error("WHEN needs boolean test conditions");return S(a,d,0,b)})}catch(Da){throw Da;}};ja.top=function(a,b){return B(a,b,function(a,b,c){e.pcCheck(c,2,2);if(e.isArray(c[0]))return e.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));if(e.isImmutableArray(c[0]))return e.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};ja.first=function(a,b){return B(a,b,function(a,b,c){e.pcCheck(c,1,1);return e.isArray(c[0])?0===c[0].length?null:c[0][0]:e.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};ja.sort=function(a,b){return B(a,b,function(b,c,d){e.pcCheck(d,1,2);c=d[0];e.isImmutableArray(c)&&(c=c.toArray());if(!1===e.isArray(c))throw Error("Illegal Argument");if(1<d.length){if(!1===e.isFunctionParameter(d[1]))throw Error("Illegal Argument");
var g=function(a,c){return wa.callfunc(d[1],[a,c],b)};return a.isAsync?Z(c,g):c=L(c,function(a,b){return g(a,b)})}if(0===c.length)return[];for(var p={},f=0;f<c.length;f++){var k=M(c[f]);""!==k&&(p[k]=!0)}if(!0===p.Array||!0===p.Dictionary||!0===p.Feature||!0===p.Point||!0===p.Polygon||!0===p.Polyline||!0===p.Multipoint||!0===p.Extent||!0===p.Function)return c.slice(0);var f=0,k="",n;for(n in p)f++,k=n;return c=1<f||"String"===k?L(c,function(a,b){if(null===a||void 0===a||a===e.voidOperation)return null===
b||void 0===b||b===e.voidOperation?0:1;if(null===b||void 0===b||b===e.voidOperation)return-1;a=e.toString(a);b=e.toString(b);return a<b?-1:a===b?0:1}):"Number"===k?L(c,function(a,b){return a-b}):"Boolean"===k?L(c,function(a,b){return a===b?0:b?-1:1}):"Date"===k?L(c,function(a,b){return b-a}):c.slice(0)})};var Pa={},xa;for(xa in ja)Pa[xa]=new e.NativeFunction(ja[xa]);c.registerFunctions(ja,B);for(xa in ja)ja[xa]=new e.NativeFunction(ja[xa]);var Xa=function(){};Xa.prototype=ja;var ua=function(){};ua.prototype=
Pa;a.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c},standardFunction:B};a.extend=sa;a.executeScript=function(a,b,c){return a(b,c)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return n.findFieldLiterals(a,b)};a.validateScript=function(a,b){return n.validateScript(a,b,"sync")};a.referencesMember=function(a,b){return n.referencesMember(a,b)};a.referencesFunction=function(a,
b){return n.referencesFunction(a,b)};var wa={error:function(a,b,c){throw Error(n.nodeErrorMessage(a,b,c));},__awaiter:function(a,b,c,d){return u.create(function(c,g){function p(a){try{k(d.next(a))}catch(Ha){g(Ha)}}function f(a){try{k(d["throw"](a))}catch(Ha){g(Ha)}}function k(a){a.done?c(a.value):a.value&&e.isFeatureSet(a.value)?p(a.value):a.value&&a.value.then?a.value.then(p,f):p(a.value)}k((d=d.apply(a,b||[])).next())})},functionDepthchecker:function(a,b){return function(){b.depthCounter++;b.localStack.push([]);
if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounter--;--b.localStack.length;return c}},aCheck:function(a,b){if(e.isFunctionParameter(a))throw Error(n.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===e.voidOperation?null:a},Dictionary:f,Feature:h,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(e.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===e.isString(a[c]))throw Error("Illegal Argument");
b[a[c].toString()]=a[c+1]===e.voidOperation?null:a[c+1]}a=new f(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===e.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(e.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*e.toNumber(a);if("+"===b)return 1*e.toNumber(a);throw Error(n.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*e.toNumber(a);if("+"===b)return 1*e.toNumber(a);
throw Error(n.nodeErrorMessage({type:"UnaryExpression",operator:b,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===e.isBoolean(a))throw Error(n.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,b,c){if(e.isBoolean(a)&&e.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b}throw Error(n.nodeErrorMessage({type:"LogicalExpression",operator:null,
left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return e.equalityTest(a,b);case "\x3d":return e.equalityTest(a,b);case "!\x3d":return!e.equalityTest(a,b);case "\x3c":return e.greaterThanLessThan(a,b,c);case "\x3e":return e.greaterThanLessThan(a,b,c);case "\x3c\x3d":return e.greaterThanLessThan(a,b,c);case "\x3e\x3d":return e.greaterThanLessThan(a,b,c);case "+":return e.isString(a)||e.isString(b)?e.toString(a)+e.toString(b):e.toNumber(a)+e.toNumber(b);
case "-":return e.toNumber(a)-e.toNumber(b);case "*":return e.toNumber(a)*e.toNumber(b);case "/":return e.toNumber(a)/e.toNumber(b);case "%":return e.toNumber(a)%e.toNumber(b);default:throw Error(n.nodeErrorMessage({type:"BinaryExpression",operator:c,left:a,right:b},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===e.voidOperation?null:a;case "/\x3d":return e.toNumber(c)/e.toNumber(a);case "*\x3d":return e.toNumber(c)*e.toNumber(a);case "-\x3d":return e.toNumber(c)-
e.toNumber(a);case "+\x3d":return e.isString(c)||e.isString(a)?e.toString(c)+e.toString(a):e.toNumber(c)+e.toNumber(a);case "%\x3d":return e.toNumber(c)%e.toNumber(a);default:throw Error(n.nodeErrorMessage({type:"AssignmentExpression",operator:b,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var g=e.toNumber(a[b]);a[b]="++"===c?g+1:g-1;return!1===d?g:"++"===c?g+1:g-1},graphicToFeature:function(a,b){return null===a?null:h.createFromGraphicLikeObject(a.geometry,
a.attributes,b)},memberupdate:function(a,b,c,d){var g;if(e.isArray(a))if(e.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");g=e.toNumber(a[b]);a[b]="++"===c?g+1:g-1}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===e.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))g=e.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else if(a instanceof h){if(!1===
e.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))g=e.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===d?g:"++"===c?g+1:g-1},assignmember:function(a,b,c,d){if(e.isArray(a))if(e.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");
a[b]=this.assign(d,c,a[b])}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===e.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else if(a instanceof h){if(!1===e.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");
a.setField(b,this.assign(d,c,null))}}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,b){if(null===a)throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof f||a instanceof h){if(e.isString(b))return a.field(b);throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof A){if(e.isString(b))return J(a,
b,"MemberExpression");throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isArray(a)){if(e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(e.isString(a)){if(e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(a)&&e.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw Error(n.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(n.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof e.NativeFunction?a.fn(c,b):a instanceof e.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};a.compileScript=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=!1);null===b&&(b={vars:{},customfunctions:{}});b={isAsync:c,globalScope:ma(b.vars,c?Pa:
ja,b.customfunctions),localScope:null,mangleMap:{},console:la,lrucache:b.lrucache,services:b.services,symbols:{symbolCounter:0}};a=D(b,a.body[0].body);""===a&&(a="lc.voidOperation; ");b={lc:e,lang:wa,mangles:b.mangleMap,postProcess:function(a){a instanceof e.ReturnResult&&(a=a.value);a instanceof e.ImplicitResult&&(a=a.value);a===e.voidOperation&&(a=null);if(a===e.breakResult)throw Error("Cannot return BREAK");if(a===e.continueResult)throw Error("Cannot return CONTINUE");if(e.isFunctionParameter(a))throw Error("Cannot return FUNCTION");
return a},prepare:function(a,b,c){b||(b=new E({wkid:102100}));var d=a.vars,e=a.customfunctions,g=c?new ua:new Xa;d||(d={});e||(e={});var p=new f({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=p;g.infinity=Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var k in e)g[k]=e[k],g._SymbolsMap[k]=1;for(k in d)g._SymbolsMap[k]=1,g[k]=d[k]&&"esri.Graphic"===d[k].declaredClass?h.createFromGraphic(d[k]):
d[k];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:b,globalScope:g,progressTracker:void 0===a.progressTracker||null===a.progressTracker?u.createDeferred().promise:a.progressTracker,localScope:null,services:a.services,console:a.console?a.console:la,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, spatialReference, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, spatialReference, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(b)};a.enableAsyncSupport=function(){return u.create(function(a,b){m(["./functions/geomasync"],function(b){sa([b],
"async");a(!0)},function(a){b(a)})})}})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(m,a,l,f){return function(a){function g(g,e,f,d,b){var c=a.call(this)||this;c.attachmentUrl=b;c.immutable=!1;c.setField("id",g);c.setField("name",e);c.setField("contenttype",f);c.setField("size",d);c.immutable=!0;return c}l(g,a);return g}(f)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils",
"../geometry/Geometry"],function(m,a,l,f,h){return function(){function a(g){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=g instanceof a?g.attributes:void 0===g?{}:null===g?{}:g}a.prototype.field=function(a){var e=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var g in this.attributes)if(g.toLowerCase()===e)return this.attributes[g];throw Error("Field not Found");};a.prototype.setField=function(a,e){if(this.immutable)throw Error("Dictionary is Immutable");
var g=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===g){this.attributes[d]=e;return}this.attributes[a]=e};a.prototype.hasField=function(a){var e=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var g in this.attributes)if(g.toLowerCase()===e)return!0;return!1};a.prototype.keys=function(){var a=[],e;for(e in this.attributes)a.push(e);return a=a.sort()};a.prototype.castToText=function(){var a="",e;for(e in this.attributes){""!==a&&(a+=",");
var g=this.attributes[e];null==g?a+=JSON.stringify(e)+":null":f.isBoolean(g)||f.isNumber(g)||f.isString(g)?a+=JSON.stringify(e)+":"+JSON.stringify(g):g instanceof h?a+=JSON.stringify(e)+":"+f.toStringExplicit(g):g instanceof l?a+=JSON.stringify(e)+":"+f.toStringExplicit(g):g instanceof Array?a+=JSON.stringify(e)+":"+f.toStringExplicit(g):g instanceof Date?a+=JSON.stringify(e)+":"+JSON.stringify(g):null!==g&&"object"===typeof g&&void 0!==g.castToText&&(a+=JSON.stringify(e)+":"+g.castToText())}return"{"+
a+"}"};return a}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(m,a){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],h=0;h<this.length();h++)a.push(this.get(h));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/support/coordsUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){function u(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function w(a){return a instanceof Z||a instanceof h||a instanceof K}function A(b){return C(b)||y(b)||B(b)||z(b)||null===b||b===a.voidOperation||"number"===typeof b?!0:!1}function C(a){return"string"===typeof a||a instanceof String}function z(a){return"boolean"===typeof a}function y(a){return"number"===typeof a}function x(a){return a instanceof
Array}function E(a){return a instanceof g}function B(a){return a instanceof Date}function F(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=u(b,"\u2030","");b=u(b,"\u00a4","");return l.format(a,{pattern:b})}return a.toString()}function D(a,b){a=f(a);return void 0===b||null===b||""===b?a.format():a.format(G(b))}function G(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function H(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=
b;case "\x3c\x3d":return a<=b}return!1}function P(b,d){if(b===d||null===b&&d===a.voidOperation||null===d&&b===a.voidOperation)return!0;if(B(b)&&B(d))return b.getTime()===d.getTime();if(b instanceof k||b instanceof e)return b.equalityTest(d);if(b instanceof c&&d instanceof c){var g=void 0,p=void 0,g=b.cache._arcadeCacheId,p=d.cache._arcadeCacheId;if(void 0!==g&&null!==g)return g===p}return void 0!==b&&void 0!==d&&null!==b&&null!==d&&"object"===typeof b&&"object"===typeof d&&(b._arcadeCacheId===d._arcadeCacheId&&
void 0!==b._arcadeCacheId&&null!==b._arcadeCacheId||b._underlyingGraphic===d._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function O(a,b){if(C(a))return a;if(null===a)return"";if(y(a))return F(a,b);if(z(a))return a.toString();if(B(a))return D(a,b);if(a instanceof d)return JSON.stringify(a.toJSON());if(x(a)){b=[];for(var c=0;c<a.length;c++)b[c]=J(a[c]);return"["+b.join(",")+"]"}if(a instanceof g){b=[];for(c=0;c<a.length();c++)b[c]=J(a.get(c));return"["+b.join(",")+
"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():w(a)?"object, Function":""}function N(a,b){if(C(a))return a;if(null===a)return"";if(y(a))return F(a,b);if(z(a))return a.toString();if(B(a))return D(a,b);if(a instanceof d)return a instanceof n?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+
a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+W(a.spatialReference)+"}":W(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(x(a)){b=[];for(var c=0;c<a.length;c++)b[c]=J(a[c]);return"["+b.join(",")+"]"}if(a instanceof g){b=[];for(c=0;c<a.length();c++)b[c]=J(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():
w(a)?"object, Function":""}function J(a){return null===a?"null":z(a)||y(a)||C(a)?JSON.stringify(a):a instanceof d||a instanceof g||a instanceof Array?N(a):a instanceof Date?JSON.stringify(D(a,"")):null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():"null"}function R(b,c){return y(b)?b:null===b||""===b?0:B(b)?NaN:z(b)?b?1:0:x(b)||""===b||void 0===b?NaN:void 0!==c&&C(b)?(c=u(c,"\u2030",""),c=u(c,"\u00a4",""),l.parse(b,{pattern:c})):b===a.voidOperation?0:Number(b)}function M(a,b){var c;
b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function W(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),e=[];return function ya(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,
g;if(Array.isArray(a)){g="[";for(b=0;b<a.length;b++)b&&(g+=","),g+=ya(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var p=e.push(a)-1,f=Object.keys(a).sort(d&&d(a));g="";for(b=0;b<f.length;b++){var k=f[b],n=ya(a[k]);n&&(g&&(g+=","),g+=JSON.stringify(k)+":"+n)}e.splice(p,1);return"{"+g+"}"}}(a)}function S(a,b){if(b instanceof c)a.push(b.hasZ?b.hasM?[b.x,b.y,b.z,b.m]:[b.x,
b.y,b.z]:[b.x,b.y]);else throw Error("Invalid Argument");}Object.defineProperty(a,"__esModule",{value:!0});m=function(){return function(a){this.value=a}}();a.ReturnResultE=m;var L=function(){return function(a){this.value=a}}();a.ImplicitResultE=L;var Z=function(){return function(a){this.fn=a}}();a.NativeFunctionE=Z;var K=function(){return function(a){this.fn=a}}();a.SizzleFunctionE=K;a.NativeFunction=Z;a.ImplicitResult=L;a.ReturnResult=m;a.SizzleFunction=K;a.voidOperation={type:"VOID"};a.breakResult=
{type:"BREAK"};a.continueResult={type:"CONTINUE"};a.multiReplace=u;a.isFunctionParameter=w;a.isSimpleType=A;a.defaultUndefined=function(a,b){return void 0===a?b:a};a.isString=C;a.isBoolean=z;a.isNumber=y;a.isArray=x;a.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};a.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};a.isImmutableArray=E;a.isDate=
B;a.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};a.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};a.formatNumber=F;a.formatDate=D;a.standardiseDateFormat=G;a.greaterThanLessThan=function(b,c,d){if(null===b){if(null===c||c===a.voidOperation)return H(null,null,d);if(y(c))return H(0,
c,d);if(C(c)||z(c))return H(0,R(c),d);if(B(c))return H(0,c.getTime(),d)}if(b===a.voidOperation){if(null===c||c===a.voidOperation)return H(null,null,d);if(y(c))return H(0,c,d);if(C(c)||z(c))return H(0,R(c),d);if(B(c))return H(0,c.getTime(),d)}else if(y(b)){if(y(c))return H(b,c,d);if(z(c))return H(b,R(c),d);if(null===c||c===a.voidOperation)return H(b,0,d);if(C(c))return H(b,R(c),d);if(B(c))return H(b,c.getTime(),d)}else if(C(b)){if(C(c))return H(O(b),O(c),d);if(B(c))return H(R(b),c.getTime(),d);if(y(c))return H(R(b),
c,d);if(null===c||c===a.voidOperation)return H(R(b),0,d);if(z(c))return H(R(b),R(c),d)}else if(B(b)){if(B(c))return H(b,c,d);if(null===c||c===a.voidOperation)return H(b.getTime(),0,d);if(y(c))return H(b.getTime(),c,d);if(z(c)||C(c))return H(b.getTime(),R(c),d)}else if(z(b)){if(z(c))return H(b,c,d);if(y(c))return H(R(b),R(c),d);if(B(c))return H(R(b),c.getTime(),d);if(null===c||c===a.voidOperation)return H(R(b),0,d);if(C(c))return H(R(b),R(c),d)}return!P(b,c)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};
a.equalityTest=P;a.toString=O;a.toNumberArray=function(a){var b=[];if(!1===x(a))return null;if(a instanceof g){for(var c=0;c<a.length();c++)b[c]=R(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=R(a[c]);return b};a.toStringExplicit=N;a.toNumber=R;a.toDate=function(a,b){return B(a)?a:C(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a.toDate():null};a.toDateM=function(a,b){return B(a)?f(a):C(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a:null};a.toBoolean=
function(a){return z(a)?a:C(a)?(a=a.toLowerCase(),"true"===a?!0:!1):y(a)?0===a||isNaN(a)?!1:!0:!1};a.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};a.fixNullGeometry=function(a){return null===a?null:a instanceof c?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof q?0===a.rings.length?null:a:a instanceof p?0===a.paths.length?null:a:a instanceof b?0===a.points.length?null:a:a instanceof
n?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};a.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?O(b):R(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};a.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=O(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===
c?null:c.code};a.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var e=null,g=0;g<b.fields.length;g++){var p=b.fields[g];p.name.toLowerCase()===a.toString().toLowerCase()&&(e=p)}if(null===e)return null;var f,k;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((f=a.domains&&a.domains[e.name])&&"inherited"===f.type&&(f=M(e.name,b),k=!0),!0):!1});k||f||(f=M(a,b));return{field:e,domain:f}};a.stableStringify=W;a.autoCastFeatureToGeometry=
function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b};a.autoCastArrayOfPointsToPolygon=function(a,b){if(x(a)||E(a)){var c=!1,d=!1,g=[];if(x(a)){for(var p=0;p<a.length;p++){var f=a[p];S(g,f)}0<g.length&&(b=a[0].spatialReference,c=a[0].hasZ,d=a[0].hasM)}else if(a instanceof e)g=a._elements,0<g.length&&(c=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(E(a)){for(var p=
0,k=a.toArray();p<k.length;p++)f=k[p],S(g,f);0<g.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}else throw Error("Invalid Argument");if(0===g.length)return null;!1===t.isClockwise(g,d,c)&&(g=g.slice(0).reverse());return new q({rings:[g],spatialReference:b,hasZ:c,hasM:d})}return a};a.autoCastArrayOfPointsToPolyline=function(a,b){if(x(a)||E(a)){var c=!1,d=!1,g=[];if(x(a)){for(var f=0;f<a.length;f++){var k=a[f];S(g,k)}0<g.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,
d=!0===a[0].hasM)}else if(a instanceof e)g=a._elements,0<g.length&&(c=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(E(a)){for(var f=0,n=a.toArray();f<n.length;f++)k=n[f],S(g,k);0<g.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}return 0===g.length?null:new p({paths:[g],spatialReference:b,hasZ:c,hasM:d})}return a};a.autoCastArrayOfPointsToMultiPoint=function(a,c){if(x(a)||E(a)){var d=!1,g=!1,p=[];if(x(a)){for(var f=0;f<a.length;f++){var k=a[f];S(p,k)}0<p.length&&
(c=a[0].spatialReference,d=!0===a[0].hasZ,g=!0===a[0].hasM)}else if(a instanceof e)p=a._elements,0<p.length&&(d=a._hasZ,g=a._hasM,c=a.get(0).spatialReference);else if(E(a)){for(var f=0,n=a.toArray();f<n.length;f++)k=n[f],S(p,k);0<p.length&&(c=a.get(0).spatialReference,d=!0===a.get(0).hasZ,g=!0===a.get(0).hasM)}return 0===p.length?null:new b({points:p,spatialReference:c,hasZ:d,hasM:g})}return a};a.toStringArray=function(a,b){void 0===b&&(b=!1);var c=[];if(null===a)return c;if(!0===x(a)){for(var d=
0;d<a.length;d++){var e=O(a[d]);""===e&&!0!==b||c.push(e)}return c}if(a instanceof g){for(d=0;d<a.length();d++)e=O(a.get(d)),""===e&&!0!==b||c.push(e);return c}return A(a)?(e=O(a),""===e&&!0!==b||c.push(e),c):[]}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(m,a,l){return l})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});var h={ar:1,"ar-dz":1,
"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};a.load=function(a,k,e){a=l.locale;var g=a in h;if(!g){var d=a.split("-");1<d.length&&d[0]in h&&(a=d[0],
g=!0)}g?k(["moment/locale/"+a],function(){e(f)}):e(f)}})},"moment/moment":function(){(function(m,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):m.moment=a()})(this,function(){function m(){return id.apply(null,arguments)}function a(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function l(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function f(a){if(Object.getOwnPropertyNames)return 0===
Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a){return void 0===a}function g(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function k(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function n(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function d(a,b){for(var c in b)n(b,c)&&(a[c]=b[c]);
n(b,"toString")&&(a.toString=b.toString);n(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function b(a,b,c,d){return gb(a,b,c,d,!0).utc()}function c(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function q(a){if(null==a._isValid){var b=c(a),d=jd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&
0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&d);a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function p(a){var e=b(NaN);null!=a?d(c(e),a):c(e).userInvalidated=!0;return e}function t(a,b){var d,e,g;h(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);h(b._i)||
(a._i=b._i);h(b._f)||(a._f=b._f);h(b._l)||(a._l=b._l);h(b._strict)||(a._strict=b._strict);h(b._tzm)||(a._tzm=b._tzm);h(b._isUTC)||(a._isUTC=b._isUTC);h(b._offset)||(a._offset=b._offset);h(b._pf)||(a._pf=c(b));h(b._locale)||(a._locale=b._locale);if(0<Xc.length)for(d=0;d<Xc.length;d++)e=Xc[d],g=b[e],h(g)||(a[e]=g);return a}function u(a){t(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Yc&&(Yc=!0,m.updateOffset(this),Yc=!1)}function w(a){return a instanceof
u||null!=a&&null!=a._isAMomentObject}function A(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function C(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=A(a));return b}function z(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),g=0,p;for(p=0;p<d;p++)(c&&a[p]!==b[p]||!c&&C(a[p])!==C(b[p]))&&g++;return g+e}function y(a){!1===m.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function x(a,b){var c=!0;return d(function(){null!=
m.deprecationHandler&&m.deprecationHandler(null,a);if(c){for(var d=[],e,g=0;g<arguments.length;g++){e="";if("object"===typeof arguments[g]){e+="\n["+g+"] ";for(var p in arguments[0])e+=p+": "+arguments[0][p]+", ";e=e.slice(0,-2)}else e=arguments[g];d.push(e)}y(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function E(a,b){null!=m.deprecationHandler&&m.deprecationHandler(a,b);kd[a]||(y(b),kd[a]=!0)}function B(a){return a instanceof
Function||"[object Function]"===Object.prototype.toString.call(a)}function F(a,b){var c=d({},a),e;for(e in b)n(b,e)&&(l(a[e])&&l(b[e])?(c[e]={},d(c[e],a[e]),d(c[e],b[e])):null!=b[e]?c[e]=b[e]:delete c[e]);for(e in a)n(a,e)&&!n(b,e)&&l(a[e])&&(c[e]=d({},c[e]));return c}function D(a){null!=a&&this.set(a)}function G(a,b){var c=a.toLowerCase();nb[c]=nb[c+"s"]=nb[b]=a}function H(a){return"string"===typeof a?nb[a]||nb[a.toLowerCase()]:void 0}function P(a){var b={},c,d;for(d in a)n(a,d)&&(c=H(d))&&(b[c]=
a[d]);return b}function O(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ga[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function N(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(hb[a]=e);b&&(hb[b[0]]=function(){return N(e.apply(this,arguments),b[1],b[2])});c&&(hb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),
a)})}function R(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b=a.match(Xb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=hb[b[c]]?hb[b[c]]:R(b[c]);return function(c){var e="",g;for(g=0;g<d;g++)e+=B(b[g])?b[g].call(c,a):b[g];return e}}function W(a,b){if(!a.isValid())return a.localeData().invalidDate();b=S(b,a.localeData());Yb[b]=Yb[b]||M(b);return Yb[b](a)}function S(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(ob.lastIndex=0;0<=d&&ob.test(a);)a=
a.replace(ob,c),ob.lastIndex=0,--d;return a}function L(a,b,c){Zc[a]=B(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return n(Zc,a)?Zc[a](b._strict,b._locale):new RegExp(K(a))}function K(a){return ea(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function ea(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function ba(a,b){var c,d=b;"string"===typeof a&&(a=[a]);g(b)&&(d=function(a,c){c[b]=C(a)});for(c=0;c<a.length;c++)Zb[a[c]]=
d}function ma(a,b){ba(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function sa(a){return 0===a%4&&0!==a%100||0===a%400}function qa(a,b){return function(c){return null!=c?(ya(this,a,c),m.updateOffset(this,b),this):la(this,a)}}function la(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ya(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&sa(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ja(c,a.month()));else a._d["set"+(a._isUTC?
"UTC":"")+b](c)}function ja(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?sa(a+(b-c)/12)?29:28:31-c%7%2}function Pa(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=C(b);else if(b=a.localeData().monthsParse(b),!g(b))return a;c=Math.min(a.date(),ja(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function xa(a){return null!=a?(Pa(this,a),m.updateOffset(this,!0),this):la(this,"Month")}function Xa(){function a(a,b){return b.length-
a.length}var c=[],d=[],e=[],g,p;for(g=0;12>g;g++)p=b([2E3,g]),c.push(this.monthsShort(p,"")),d.push(this.months(p,"")),e.push(this.months(p,"")),e.push(this.monthsShort(p,""));c.sort(a);d.sort(a);e.sort(a);for(g=0;12>g;g++)c[g]=ea(c[g]),d[g]=ea(d[g]);for(g=0;24>g;g++)e[g]=ea(e[g]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function ua(a,
b,c,d,e,g,p){b=new Date(a,b,c,d,e,g,p);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function wa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Ea(a,b,c){c=7+b-c;return-((7+wa(a,0,c).getUTCDay()-b)%7)+c-1}function U(a,b,c,d,e){c=(7+c-d)%7;d=Ea(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(sa(b)?366:365)+d):d>(sa(a)?366:365)?(b=a+1,a=d-(sa(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Da(a,
b,c){var d=Ea(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Aa(a,b,c)):d>Aa(a.year(),b,c)?(b=d-Aa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Aa(a,b,c){var d=Ea(a,b,c);b=Ea(a+1,b,c);return((sa(a)?366:365)-d+b)/7}function Sa(a,c,d){var e,g;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],e=0;7>e;++e)g=b([2E3,1]).day(e),this._minWeekdaysParse[e]=this.weekdaysMin(g,
"").toLocaleLowerCase(),this._shortWeekdaysParse[e]=this.weekdaysShort(g,"").toLocaleLowerCase(),this._weekdaysParse[e]=this.weekdays(g,"").toLocaleLowerCase();if(d)c="dddd"===c?Ba.call(this._weekdaysParse,a):"ddd"===c?Ba.call(this._shortWeekdaysParse,a):Ba.call(this._minWeekdaysParse,a);else if("dddd"===c){c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._shortWeekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._minWeekdaysParse,a)}else if("ddd"===c){c=Ba.call(this._shortWeekdaysParse,
a);if(-1!==c)return c;c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._minWeekdaysParse,a)}else{c=Ba.call(this._minWeekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._shortWeekdaysParse,a)}return-1!==c?c:null}function r(){function a(a,b){return b.length-a.length}var c=[],d=[],e=[],g=[],p,f,k,n;for(p=0;7>p;p++)f=b([2E3,1]).day(p),k=this.weekdaysMin(f,""),n=this.weekdaysShort(f,""),f=this.weekdays(f,""),c.push(k),d.push(n),e.push(f),
g.push(k),g.push(n),g.push(f);c.sort(a);d.sort(a);e.sort(a);g.sort(a);for(p=0;7>p;p++)d[p]=ea(d[p]),e[p]=ea(e[p]),g[p]=ea(g[p]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+g.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function Fa(){return this.hours()%12||12}function Ma(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function mb(a,b){return b._meridiemParse}function Db(a){return a?a.toLowerCase().replace("_","-"):a}function Ha(a){var b=null;if(!Ia[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=jc._abbr,require("./locale/"+a),Ta(b)}catch(Rd){}return Ia[a]}function Ta(a,b){a&&((b=h(b)?Oa(a):Na(a,b))?jc=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return jc._abbr}function Na(a,b){if(null!==b){var c;c=ld;b.abbr=
a;if(null!=Ia[a])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Ia[a]._config;else if(null!=b.parentLocale)if(null!=Ia[b.parentLocale])c=Ia[b.parentLocale]._config;else if(c=Ha(b.parentLocale),null!=c)c=c._config;else return kc[b.parentLocale]||(kc[b.parentLocale]=[]),kc[b.parentLocale].push({name:a,
config:b}),null;Ia[a]=new D(F(c,b));kc[a]&&kc[a].forEach(function(a){Na(a.name,a.config)});Ta(a);return Ia[a]}delete Ia[a];return null}function Oa(b){var c;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return jc;if(!a(b)){if(c=Ha(b))return c;b=[b]}a:{c=0;for(var d,e,g,p;c<b.length;){p=Db(b[c]).split("-");d=p.length;for(e=(e=Db(b[c+1]))?e.split("-"):null;0<d;){if(g=Ha(p.slice(0,d).join("-"))){b=g;break a}if(e&&e.length>=d&&z(p,e,!0)>=d-1)break;d--}c++}b=jc}return b}function ib(a){var b;
(b=a._a)&&-2===c(a).overflow&&(b=0>b[zb]||11<b[zb]?zb:1>b[pb]||b[pb]>ja(b[Ja],b[zb])?pb:0>b[Ka]||24<b[Ka]||24===b[Ka]&&(0!==b[jb]||0!==b[Ab]||0!==b[Kb])?Ka:0>b[jb]||59<b[jb]?jb:0>b[Ab]||59<b[Ab]?Ab:0>b[Kb]||999<b[Kb]?Kb:-1,c(a)._overflowDayOfYear&&(b<Ja||b>pb)&&(b=pb),c(a)._overflowWeeks&&-1===b&&(b=zc),c(a)._overflowWeekday&&-1===b&&(b=Ac),c(a).overflow=b);return a}function Ua(a,b,c){return null!=a?a:null!=b?b:c}function Va(a){var b,d=[],e;if(!a._d){e=new Date(m.now());e=a._useUTC?[e.getUTCFullYear(),
e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[pb]&&null==a._a[zb]){var g,p,f,k,n,q;g=a._w;if(null!=g.GG||null!=g.W||null!=g.E){if(n=1,q=4,p=Ua(g.GG,a._a[Ja],Da(T(),1,4).year),f=Ua(g.W,1),k=Ua(g.E,1),1>k||7<k)b=!0}else if(n=a._locale._week.dow,q=a._locale._week.doy,f=Da(T(),n,q),p=Ua(g.gg,a._a[Ja],f.year),f=Ua(g.w,f.week),null!=g.d){if(k=g.d,0>k||6<k)b=!0}else if(null!=g.e){if(k=g.e+n,0>g.e||6<g.e)b=!0}else k=n;1>f||f>Aa(p,n,q)?c(a)._overflowWeeks=!0:
null!=b?c(a)._overflowWeekday=!0:(b=U(p,f,k,n,q),a._a[Ja]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=Ua(a._a[Ja],e[Ja]);if(a._dayOfYear>(sa(b)?366:365)||0===a._dayOfYear)c(a)._overflowDayOfYear=!0;b=wa(b,0,a._dayOfYear);a._a[zb]=b.getUTCMonth();a._a[pb]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=d[b]=e[b];for(;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ka]&&0===a._a[jb]&&0===a._a[Ab]&&0===a._a[Kb]&&(a._nextDay=!0,a._a[Ka]=0);a._d=(a._useUTC?wa:ua).apply(null,
d);d=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Ka]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==d&&(c(a).weekdayMismatch=!0)}}function Y(a){var b,d;b=a._i;var e=yd.exec(b)||zd.exec(b),g,p,f,k;if(e){c(a).iso=!0;b=0;for(d=Bc.length;b<d;b++)if(Bc[b][1].exec(e[1])){p=Bc[b][0];g=!1!==Bc[b][2];break}if(null==p)a._isValid=!1;else{if(e[3]){b=0;for(d=$c.length;b<d;b++)if($c[b][1].exec(e[3])){f=(e[2]||" ")+$c[b][0];break}if(null==
f){a._isValid=!1;return}}if(g||null==f){if(e[4])if(Ad.exec(e[4]))k="Z";else{a._isValid=!1;return}a._f=p+(f||"")+(k||"");fa(a)}else a._isValid=!1}}else a._isValid=!1}function La(a){var b=lc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(b){var d=b[3],e=b[2],g=b[5],p=b[6],f=b[7],k=parseInt(b[4],10),d=[49>=k?2E3+k:999>=k?1900+k:k,$b.indexOf(d),parseInt(e,10),parseInt(g,10),parseInt(p,10)];f&&d.push(parseInt(f,10));a:{if(f=b[1])if(f=md.indexOf(f),
e=(new Date(d[0],d[1],d[2])).getDay(),f!==e){c(a).weekdayMismatch=!0;f=a._isValid=!1;break a}f=!0}f&&(a._a=d,(f=b[8])?b=Cc[f]:b[9]?b=0:(b=parseInt(b[10],10),f=b%100,b=(b-f)/100*60+f),a._tzm=b,a._d=wa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),c(a).rfc2822=!0)}else a._isValid=!1}function yb(a){var b=Bd.exec(a._i);null!==b?a._d=new Date(+b[1]):(Y(a),!1===a._isValid&&(delete a._isValid,La(a),!1===a._isValid&&(delete a._isValid,m.createFromInputFallback(a))))}function fa(a){if(a._f===
m.ISO_8601)Y(a);else if(a._f===m.RFC_2822)La(a);else{a._a=[];c(a).empty=!0;var b=""+a._i,d,e,g,p,f,k=b.length,q=0;g=S(a._f,a._locale).match(Xb)||[];for(d=0;d<g.length;d++){p=g[d];if(e=(b.match(Z(p,a))||[])[0])f=b.substr(0,b.indexOf(e)),0<f.length&&c(a).unusedInput.push(f),b=b.slice(b.indexOf(e)+e.length),q+=e.length;if(hb[p]){if(e?c(a).empty=!1:c(a).unusedTokens.push(p),f=a,null!=e&&n(Zb,p))Zb[p](e,f._a,f,p)}else a._strict&&!e&&c(a).unusedTokens.push(p)}c(a).charsLeftOver=k-q;0<b.length&&c(a).unusedInput.push(b);
12>=a._a[Ka]&&!0===c(a).bigHour&&0<a._a[Ka]&&(c(a).bigHour=void 0);c(a).parsedDateParts=a._a.slice(0);c(a).meridiem=a._meridiem;b=a._a;d=Ka;k=a._locale;g=a._a[Ka];q=a._meridiem;null!=q&&(null!=k.meridiemHour?g=k.meridiemHour(g,q):null!=k.isPM&&((k=k.isPM(q))&&12>g&&(g+=12),k||12!==g||(g=0)));b[d]=g;Va(a);ib(a)}}function bb(a){if(!a._d){var b=P(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Va(a)}}function Wa(b){var e=b._i,
g=b._f;b._locale=b._locale||Oa(b._l);if(null===e||void 0===g&&""===e)return p({nullInput:!0});"string"===typeof e&&(b._i=e=b._locale.preparse(e));if(w(e))return new u(ib(e));if(k(e))b._d=e;else if(a(g)){var f,n,h;if(0===b._f.length)c(b).invalidFormat=!0,b._d=new Date(NaN);else{for(e=0;e<b._f.length;e++)if(g=0,f=t({},b),null!=b._useUTC&&(f._useUTC=b._useUTC),f._f=b._f[e],fa(f),q(f)&&(g+=c(f).charsLeftOver,g+=10*c(f).unusedTokens.length,c(f).score=g,null==h||g<h))h=g,n=f;d(b,n||f)}}else g?fa(b):ka(b);
q(b)||(b._d=null);return b}function ka(b){var c=b._i;h(c)?b._d=new Date(m.now()):k(c)?b._d=new Date(c.valueOf()):"string"===typeof c?yb(b):a(c)?(b._a=e(c.slice(0),function(a){return parseInt(a,10)}),Va(b)):l(c)?bb(b):g(c)?b._d=new Date(c):m.createFromInputFallback(b)}function gb(b,c,d,e,g){var p={};if(!0===d||!1===d)e=d,d=void 0;if(l(b)&&f(b)||a(b)&&0===b.length)b=void 0;p._isAMomentObject=!0;p._useUTC=p._isUTC=g;p._l=d;p._i=b;p._f=c;p._strict=e;b=new u(ib(Wa(p)));b._nextDay&&(b.add(1,"d"),b._nextDay=
void 0);return b}function T(a,b,c,d){return gb(a,b,c,d,!1)}function na(b,c){var d,e;1===c.length&&a(c[0])&&(c=c[0]);if(!c.length)return T();d=c[0];for(e=1;e<c.length;++e)if(!c[e].isValid()||c[e][b](d))d=c[e];return d}function I(a){for(var b in a)if(-1===Ba.call(kb,b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<kb.length;++c)if(a[kb[c]]){if(b)return!1;parseFloat(a[kb[c]])!==C(a[kb[c]])&&(b=!0)}return!0}function ga(a){a=P(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||a.isoWeek||
0,g=a.day||0,p=a.hour||0,f=a.minute||0,k=a.second||0,n=a.millisecond||0;this._isValid=I(a);this._milliseconds=+n+1E3*k+6E4*f+36E5*p;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Oa();this._bubble()}function ca(a){return a instanceof ga}function oa(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function aa(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+N(~~(a/60),2)+b+N(~~a%60,2)})}function da(a,b){a=(b||"").match(a);if(null===a)return null;
a=((a[a.length-1]||[])+"").match(Dc)||["-",0,0];b=+(60*a[1])+C(a[2]);return 0===b?0:"+"===a[0]?b:-b}function V(a,b){return b._isUTC?(b=b.clone(),a=(w(a)||k(a)?a.valueOf():T(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),m.updateOffset(b,!1),b):T(a).local()}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Qa(a,b){var c=a,d=null;ca(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:g(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=Ec.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:C(d[pb])*
c,h:C(d[Ka])*c,m:C(d[jb])*c,s:C(d[Ab])*c,ms:C(oa(1E3*d[Kb]))*c}):(d=mc.exec(a))?(c="-"===d[1]?-1:1,c={y:cb(d[2],c),M:cb(d[3],c),w:cb(d[4],c),d:cb(d[5],c),h:cb(d[6],c),m:cb(d[7],c),s:cb(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=T(c.from),c=T(c.to),d.isValid()&&c.isValid()?(c=V(c,d),d.isBefore(c)?c=nc(d,c):(c=nc(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new ga(c);ca(a)&&n(a,"_locale")&&
(c._locale=a._locale);return c}function cb(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function nc(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function qb(a,b){return function(c,d){var e;null===d||isNaN(+d)||(E(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),
e=c,c=d,d=e);c=Qa("string"===typeof c?+c:c,d);Mb(this,c,a);return this}}function Mb(a,b,c,d){var e=b._milliseconds,g=oa(b._days);b=oa(b._months);a.isValid()&&(d=null==d?!0:d,b&&Pa(a,la(a,"Month")+b*c),g&&ya(a,"Date",la(a,"Date")+g*c),e&&a._d.setTime(a._d.valueOf()+e*c),d&&m.updateOffset(a,g||b))}function Nb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+
b)||0}function Eb(a){if(void 0===a)return this._locale._abbr;a=Oa(a);null!=a&&(this._locale=a);return this}function ac(){return this._locale}function Bb(a,b){J(0,[a,a.length],0,b)}function Fb(a,b,c,d,e){var g;if(null==a)return Da(this,d,e).year;g=Aa(a,d,e);b>g&&(b=g);a=U(a,b,c,d,e);a=wa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function oc(a,b){b[Kb]=C(1E3*("0."+a))}function bc(a){return a}function db(a,c,d,e){var g=Oa();
c=b().set(e,c);return g[d](c,a)}function Ob(a,b,c){g(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return db(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=db(a,b,c,"month");return d}function cc(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);g(b)&&(c=b,b=void 0);b=b||"";var e=Oa();a=a?e._week.dow:0;if(null!=c)return db(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=db(b,(c+a)%7,d,"day");return e}function Pb(a,b,c,d){b=Qa(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}
function Qb(a){return 0>a?Math.floor(a):Math.ceil(a)}function $a(a){return function(){return this.as(a)}}function Ya(a){return function(){return this.isValid()?this._data[a]:NaN}}function Fc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ab(a){return(0<a)-(0>a)||+a}function Gc(){if(!this.isValid())return this.localeData().invalidDate();var a=Cd(this._milliseconds)/1E3,b=Cd(this._days),c=Cd(this._months),d,e;d=A(a/60);e=A(d/60);a%=60;d%=60;var g=A(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,
""):"",p=this.asSeconds();if(!p)return"P0D";var f=0>p?"-":"",k=ab(this._months)!==ab(p)?"-":"",n=ab(this._days)!==ab(p)?"-":"",p=ab(this._milliseconds)!==ab(p)?"-":"";return f+"P"+(g?k+g+"Y":"")+(c?k+c+"M":"")+(b?n+b+"D":"")+(e||d||a?"T":"")+(e?p+e+"H":"")+(d?p+d+"M":"")+(a?p+a+"S":"")}var id,jd;jd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Xc=m.momentProperties=[],Yc=!1,kd={};m.suppressDeprecationWarnings=
!1;m.deprecationHandler=null;var Rb;Rb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)n(a,b)&&c.push(b);return c};var nb={},Ga={},Xb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ob=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yb={},hb={},Sb=/\d/,Ra=/\d\d/,Tb=/\d{3}/,Gb=/\d{4}/,Cb=/[+-]?\d{6}/,ta=/\d\d?/,pc=/\d\d\d\d?/,dc=/\d\d\d\d\d\d?/,rb=/\d{1,3}/,
ec=/\d{1,4}/,Ub=/[+-]?\d{1,6}/,Dd=/\d+/,Hc=/[+-]?\d+/,Ed=/Z|[+-]\d\d:?\d\d/gi,Ic=/Z|[+-]\d\d(?::?\d\d)?/gi,qc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Zc={},Zb={},Ja=0,zb=1,pb=2,Ka=3,jb=4,Ab=5,Kb=6,zc=7,Ac=8;J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});J(0,["YY",2],0,function(){return this.year()%100});J(0,["YYYY",4],0,"year");J(0,["YYYYY",5],0,"year");J(0,["YYYYYY",
6,!0],0,"year");G("year","y");Ga.year=1;L("Y",Hc);L("YY",ta,Ra);L("YYYY",ec,Gb);L("YYYYY",Ub,Cb);L("YYYYYY",Ub,Cb);ba(["YYYYY","YYYYYY"],Ja);ba("YYYY",function(a,b){b[Ja]=2===a.length?m.parseTwoDigitYear(a):C(a)});ba("YY",function(a,b){b[Ja]=m.parseTwoDigitYear(a)});ba("Y",function(a,b){b[Ja]=parseInt(a,10)});m.parseTwoDigitYear=function(a){return C(a)+(68<C(a)?1900:2E3)};var rc=qa("FullYear",!0),Ba;Ba=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===
a)return b;return-1};J("M",["MM",2],"Mo",function(){return this.month()+1});J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});J("MMMM",0,0,function(a){return this.localeData().months(this,a)});G("month","M");Ga.month=8;L("M",ta);L("MM",ta,Ra);L("MMM",function(a,b){return b.monthsShortRegex(a)});L("MMMM",function(a,b){return b.monthsRegex(a)});ba(["M","MM"],function(a,b){b[zb]=C(a)-1});ba(["MMM","MMMM"],function(a,b,d,e){e=d._locale.monthsParse(a,e,d._strict);null!=e?b[zb]=e:c(d).invalidMonth=
a});var sc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");J("w",["ww",2],"wo","week");J("W",["WW",2],"Wo","isoWeek");G("week","w");G("isoWeek","W");Ga.week=5;Ga.isoWeek=5;L("w",ta);L("ww",ta,Ra);L("W",ta);L("WW",ta,Ra);ma(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=C(a)});J("d",0,"do","day");J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});J("dddd",
0,0,function(a){return this.localeData().weekdays(this,a)});J("e",0,0,"weekday");J("E",0,0,"isoWeekday");G("day","d");G("weekday","e");G("isoWeekday","E");Ga.day=11;Ga.weekday=11;Ga.isoWeekday=11;L("d",ta);L("e",ta);L("E",ta);L("dd",function(a,b){return b.weekdaysMinRegex(a)});L("ddd",function(a,b){return b.weekdaysShortRegex(a)});L("dddd",function(a,b){return b.weekdaysRegex(a)});ma(["dd","ddd","dddd"],function(a,b,d,e){e=d._locale.weekdaysParse(a,e,d._strict);null!=e?b.d=e:c(d).invalidWeekday=a});
ma(["d","e","E"],function(a,b,c,d){b[d]=C(a)});var md="Sun Mon Tue Wed Thu Fri Sat".split(" ");J("H",["HH",2],0,"hour");J("h",["hh",2],0,Fa);J("k",["kk",2],0,function(){return this.hours()||24});J("hmm",0,0,function(){return""+Fa.apply(this)+N(this.minutes(),2)});J("hmmss",0,0,function(){return""+Fa.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)});J("Hmm",0,0,function(){return""+this.hours()+N(this.minutes(),2)});J("Hmmss",0,0,function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),
2)});Ma("a",!0);Ma("A",!1);G("hour","h");Ga.hour=13;L("a",mb);L("A",mb);L("H",ta);L("h",ta);L("k",ta);L("HH",ta,Ra);L("hh",ta,Ra);L("kk",ta,Ra);L("hmm",pc);L("hmmss",dc);L("Hmm",pc);L("Hmmss",dc);ba(["H","HH"],Ka);ba(["k","kk"],function(a,b,c){a=C(a);b[Ka]=24===a?0:a});ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});ba(["h","hh"],function(a,b,d){b[Ka]=C(a);c(d).bigHour=!0});ba("hmm",function(a,b,d){var e=a.length-2;b[Ka]=C(a.substr(0,e));b[jb]=C(a.substr(e));c(d).bigHour=!0});
ba("hmmss",function(a,b,d){var e=a.length-4,g=a.length-2;b[Ka]=C(a.substr(0,e));b[jb]=C(a.substr(e,2));b[Ab]=C(a.substr(g));c(d).bigHour=!0});ba("Hmm",function(a,b,c){c=a.length-2;b[Ka]=C(a.substr(0,c));b[jb]=C(a.substr(c))});ba("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Ka]=C(a.substr(0,c));b[jb]=C(a.substr(c,2));b[Ab]=C(a.substr(d))});var Fd=qa("Hours",!0),ld={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",
sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:$b,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:md,meridiemParse:/[ap]\.?m?\.?/i},Ia={},kc={},jc,yd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Ad=/Z|[+-]\d\d(?::?\d\d)?/,Bc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],$c=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bd=/^\/?Date\((\-?\d+)/i,lc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};m.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});m.ISO_8601=function(){};m.RFC_2822=function(){};var Jc=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=T.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:p()}),Kc=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=T.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:
a:p()}),kb="year quarter month week day hour minute second millisecond".split(" ");aa("Z",":");aa("ZZ","");L("Z",Ic);L("ZZ",Ic);ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=da(Ic,a)});var Dc=/([\+\-]|\d\d)/gi;m.updateOffset=function(){};var Ec=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,mc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Qa.fn=ga.prototype;Qa.invalid=
function(){return Qa(NaN)};var Lc=qb(1,"add"),Mc=qb(-1,"subtract");m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";m.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var fc=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100});J(0,["GG",2],0,function(){return this.isoWeekYear()%100});Bb("gggg","weekYear");
Bb("ggggg","weekYear");Bb("GGGG","isoWeekYear");Bb("GGGGG","isoWeekYear");G("weekYear","gg");G("isoWeekYear","GG");Ga.weekYear=1;Ga.isoWeekYear=1;L("G",Hc);L("g",Hc);L("GG",ta,Ra);L("gg",ta,Ra);L("GGGG",ec,Gb);L("gggg",ec,Gb);L("GGGGG",Ub,Cb);L("ggggg",Ub,Cb);ma(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=C(a)});ma(["gg","GG"],function(a,b,c,d){b[d]=m.parseTwoDigitYear(a)});J("Q",0,"Qo","quarter");G("quarter","Q");Ga.quarter=7;L("Q",Sb);ba("Q",function(a,b){b[zb]=3*(C(a)-1)});
J("D",["DD",2],"Do","date");G("date","D");Ga.date=9;L("D",ta);L("DD",ta,Ra);L("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});ba(["D","DD"],pb);ba("Do",function(a,b){b[pb]=C(a.match(ta)[0])});var tc=qa("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear");G("dayOfYear","DDD");Ga.dayOfYear=4;L("DDD",rb);L("DDDD",Tb);ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=C(a)});J("m",["mm",2],0,"minute");G("minute","m");Ga.minute=14;L("m",ta);L("mm",ta,
Ra);ba(["m","mm"],jb);var Nc=qa("Minutes",!1);J("s",["ss",2],0,"second");G("second","s");Ga.second=15;L("s",ta);L("ss",ta,Ra);ba(["s","ss"],Ab);var Oc=qa("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)});J(0,["SS",2],0,function(){return~~(this.millisecond()/10)});J(0,["SSS",3],0,"millisecond");J(0,["SSSS",4],0,function(){return 10*this.millisecond()});J(0,["SSSSS",5],0,function(){return 100*this.millisecond()});J(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});J(0,
["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});J(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});J(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});G("millisecond","ms");Ga.millisecond=16;L("S",rb,Sb);L("SS",rb,Ra);L("SSS",rb,Tb);var lb;for(lb="SSSS";9>=lb.length;lb+="S")L(lb,Dd);for(lb="S";9>=lb.length;lb+="S")ba(lb,oc);var Pc=qa("Milliseconds",!1);J("z",0,0,"zoneAbbr");J("zz",0,0,"zoneName");var X=u.prototype;X.add=Lc;X.calendar=function(a,b){a=a||T();var c=
V(a,this).startOf("day"),c=m.calendarFormat(this,c)||"sameElse";b=b&&(B(b[c])?b[c].call(this,a):b[c]);return this.format(b||this.localeData().calendar(c,this,T(a)))};X.clone=function(){return new u(this)};X.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=V(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=H(b);switch(b){case "year":b=Nb(this,a)/12;break;case "month":b=Nb(this,a);break;case "quarter":b=Nb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=
(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-a}return c?b:A(b)};X.endOf=function(a){a=H(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};X.format=function(a){a||(a=this.isUtc()?m.defaultFormatUtc:m.defaultFormat);a=W(this,a);return this.localeData().postformat(a)};X.from=function(a,b){return this.isValid()&&(w(a)&&
a.isValid()||T(a).isValid())?Qa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};X.fromNow=function(a){return this.from(T(),a)};X.to=function(a,b){return this.isValid()&&(w(a)&&a.isValid()||T(a).isValid())?Qa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};X.toNow=function(a){return this.to(T(),a)};X.get=function(a){a=H(a);return B(this[a])?this[a]():this};X.invalidAt=function(){return c(this).overflow};X.isAfter=function(a,
b){a=w(a)?a:T(a);if(!this.isValid()||!a.isValid())return!1;b=H(b)||"millisecond";return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};X.isBefore=function(a,b){a=w(a)?a:T(a);if(!this.isValid()||!a.isValid())return!1;b=H(b)||"millisecond";return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};X.isBetween=function(a,b,c,d){a=w(a)?a:T(a);b=w(b)?b:T(b);if(!(this.isValid()&&a.isValid()&&b.isValid()))return!1;d=d||"()";
return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};X.isSame=function(a,b){a=w(a)?a:T(a);if(!this.isValid()||!a.isValid())return!1;b=H(b)||"millisecond";if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};X.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};X.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,
b)};X.isValid=function(){return q(this)};X.lang=fc;X.locale=Eb;X.localeData=ac;X.max=Kc;X.min=Jc;X.parsingFlags=function(){return d({},c(this))};X.set=function(a,b){if("object"===typeof a){a=P(a);b=O(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=H(a),B(this[a]))return this[a](b);return this};X.startOf=function(a){a=H(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);
case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};X.subtract=Mc;X.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};X.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};
X.toDate=function(){return new Date(this.valueOf())};X.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?W(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):B(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",W(b,"Z")):W(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};X.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+
this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};X.toJSON=function(){return this.isValid()?this.toISOString():null};X.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};X.unix=function(){return Math.floor(this.valueOf()/1E3)};X.valueOf=function(){return this._d.valueOf()-
6E4*(this._offset||0)};X.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};X.year=rc;X.isLeapYear=function(){return sa(this.year())};X.weekYear=function(a){return Fb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};X.isoWeekYear=function(a){return Fb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};X.quarter=X.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*
(a-1)+this.month()%3)};X.month=xa;X.daysInMonth=function(){return ja(this.year(),this.month())};X.week=X.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};X.isoWeek=X.isoWeeks=function(a){var b=Da(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};X.weeksInYear=function(){var a=this.localeData()._week;return Aa(this.year(),a.dow,a.doy)};X.isoWeeksInYear=function(){return Aa(this.year(),1,4)};X.date=tc;X.day=X.days=function(a){if(!this.isValid())return null!=
a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};X.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};X.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===
typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};X.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};X.hour=X.hours=Fd;X.minute=X.minutes=Nc;X.second=X.seconds=Oc;X.millisecond=X.milliseconds=Pc;X.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=da(Ic,a),null===a)return this}else 16>
Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Mb(this,Qa(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,m.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};X.utc=function(a){return this.utcOffset(0,a)};X.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=
!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};X.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=da(Ed,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};X.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?T(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};X.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};
X.isLocal=function(){return this.isValid()?!this._isUTC:!1};X.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};X.isUtc=Lb;X.isUTC=Lb;X.zoneAbbr=function(){return this._isUTC?"UTC":""};X.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};X.dates=x("dates accessor is deprecated. Use date instead.",tc);X.months=x("months accessor is deprecated. Use month instead",xa);X.years=x("years accessor is deprecated. Use year instead",rc);X.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});X.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var a={};t(a,this);a=Wa(a);if(a._a){var c=a._isUTC?b(a._a):T(a._a);this._isDSTShifted=this.isValid()&&0<z(a._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ha=D.prototype;ha.calendar=function(a,
b,c){a=this._calendar[a]||this._calendar.sameElse;return B(a)?a.call(b,c):a};ha.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ha.invalidDate=function(){return this._invalidDate};ha.ordinal=function(a){return this._ordinal.replace("%d",a)};ha.preparse=bc;ha.postformat=bc;ha.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];
return B(e)?e(a,b,c,d):e.replace(/%d/i,a)};ha.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return B(a)?a(b):a.replace(/%s/i,b)};ha.set=function(a){var b,c;for(c in a)b=a[c],B(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ha.months=function(b,c){return b?a(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||sc).test(c)?"format":
"standalone"][b.month()]:a(this._months)?this._months:this._months.standalone};ha.monthsShort=function(b,c){return b?a(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[sc.test(c)?"format":"standalone"][b.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ha.monthsParse=function(a,c,d){var e,g;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],e=0;12>e;++e)g=
b([2E3,e]),this._shortMonthsParse[e]=this.monthsShort(g,"").toLocaleLowerCase(),this._longMonthsParse[e]=this.months(g,"").toLocaleLowerCase();if(d)c="MMM"===c?Ba.call(this._shortMonthsParse,a):Ba.call(this._longMonthsParse,a);else if("MMM"===c){c=Ba.call(this._shortMonthsParse,a);if(-1!==c)break a;c=Ba.call(this._longMonthsParse,a)}else{c=Ba.call(this._longMonthsParse,a);if(-1!==c)break a;c=Ba.call(this._shortMonthsParse,a)}c=-1!==c?c:null}return c}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=
[],this._shortMonthsParse=[]);for(e=0;12>e;e++)if(g=b([2E3,e]),d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(g,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(g,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(g="^"+this.months(g,"")+"|^"+this.monthsShort(g,""),this._monthsParse[e]=new RegExp(g.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[e].test(a)||d&&"MMM"===c&&this._shortMonthsParse[e].test(a)||!d&&
this._monthsParse[e].test(a))return e};ha.monthsRegex=function(a){if(this._monthsParseExact)return n(this,"_monthsRegex")||Xa.call(this),a?this._monthsStrictRegex:this._monthsRegex;n(this,"_monthsRegex")||(this._monthsRegex=qc);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ha.monthsShortRegex=function(a){if(this._monthsParseExact)return n(this,"_monthsRegex")||Xa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;n(this,"_monthsShortRegex")||(this._monthsShortRegex=
qc);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};ha.week=function(a){return Da(a,this._week.dow,this._week.doy).week};ha.firstDayOfYear=function(){return this._week.doy};ha.firstDayOfWeek=function(){return this._week.dow};ha.weekdays=function(b,c){return b?a(this._weekdays)?this._weekdays[b.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][b.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone};ha.weekdaysMin=function(a){return a?
this._weekdaysMin[a.day()]:this._weekdaysMin};ha.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};ha.weekdaysParse=function(a,c,d){var e,g;if(this._weekdaysParseExact)return Sa.call(this,a,c,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if(g=b([2E3,1]).day(e),d&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(g,"").replace(".",
"\\.?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(g,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(g,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[e]||(g="^"+this.weekdays(g,"")+"|^"+this.weekdaysShort(g,"")+"|^"+this.weekdaysMin(g,""),this._weekdaysParse[e]=new RegExp(g.replace(".",""),"i")),d&&"dddd"===c&&this._fullWeekdaysParse[e].test(a)||d&&"ddd"===c&&this._shortWeekdaysParse[e].test(a)||d&&"dd"===c&&this._minWeekdaysParse[e].test(a)||
!d&&this._weekdaysParse[e].test(a))return e};ha.weekdaysRegex=function(a){if(this._weekdaysParseExact)return n(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;n(this,"_weekdaysRegex")||(this._weekdaysRegex=qc);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};ha.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return n(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;n(this,
"_weekdaysShortRegex")||(this._weekdaysShortRegex=qc);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ha.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return n(this,"_weekdaysRegex")||r.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;n(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qc);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ha.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};
ha.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};Ta("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===C(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});m.lang=x("moment.lang is deprecated. Use moment.locale instead.",Ta);m.langData=x("moment.langData is deprecated. Use moment.localeData instead.",Oa);var sb=Math.abs,nd=$a("ms"),od=$a("s"),pd=$a("m"),v=$a("h"),Hb=$a("d"),eb=$a("w"),Vb=$a("M"),Q=$a("y"),Wb=Ya("milliseconds"),
Ld=Ya("seconds"),Md=Ya("minutes"),Nd=Ya("hours"),Od=Ya("days"),Pd=Ya("months"),Qd=Ya("years"),gc=Math.round,Ib={ss:44,s:45,m:45,h:22,d:26,M:11},Cd=Math.abs,ra=ga.prototype;ra.isValid=function(){return this._isValid};ra.abs=function(){var a=this._data;this._milliseconds=sb(this._milliseconds);this._days=sb(this._days);this._months=sb(this._months);a.milliseconds=sb(a.milliseconds);a.seconds=sb(a.seconds);a.minutes=sb(a.minutes);a.hours=sb(a.hours);a.months=sb(a.months);a.years=sb(a.years);return this};
ra.add=function(a,b){return Pb(this,a,b,1)};ra.subtract=function(a,b){return Pb(this,a,b,-1)};ra.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=H(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};ra.asMilliseconds=nd;ra.asSeconds=od;ra.asMinutes=pd;ra.asHours=v;ra.asDays=Hb;ra.asWeeks=eb;ra.asMonths=Vb;ra.asYears=Q;ra.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*C(this._months/12):NaN};ra._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Qb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=A(a/1E3);d.seconds=
a%60;a=A(a/60);d.minutes=a%60;a=A(a/60);d.hours=a%24;b+=A(a/24);a=A(4800*b/146097);c+=a;b-=Qb(146097*a/4800);a=A(c/12);d.days=b;d.months=c%12;d.years=a;return this};ra.clone=function(){return Qa(this)};ra.get=function(a){a=H(a);return this.isValid()?this[a+"s"]():NaN};ra.milliseconds=Wb;ra.seconds=Ld;ra.minutes=Md;ra.hours=Nd;ra.days=Od;ra.weeks=function(){return A(this.days()/7)};ra.months=Pd;ra.years=Qd;ra.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Qa(this).abs(),e=gc(d.as("s")),g=gc(d.as("m")),p=gc(d.as("h")),f=gc(d.as("d")),k=gc(d.as("M")),d=gc(d.as("y")),e=e<=Ib.ss&&["s",e]||e<Ib.s&&["ss",e]||1>=g&&["m"]||g<Ib.m&&["mm",g]||1>=p&&["h"]||p<Ib.h&&["hh",p]||1>=f&&["d"]||f<Ib.d&&["dd",f]||1>=k&&["M"]||k<Ib.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Fc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};ra.toISOString=Gc;ra.toString=Gc;ra.toJSON=Gc;ra.locale=Eb;ra.localeData=ac;ra.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Gc);ra.lang=fc;J("X",0,0,"unix");J("x",0,0,"valueOf");L("x",Hc);L("X",/[+-]?\d+(\.\d{1,3})?/);ba("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});ba("x",function(a,b,c){c._d=new Date(C(a))});m.version="2.23.0";id=T;m.fn=X;m.min=function(){var a=[].slice.call(arguments,0);return na("isBefore",a)};m.max=function(){var a=[].slice.call(arguments,0);return na("isAfter",a)};m.now=function(){return Date.now?Date.now():+new Date};m.utc=b;m.unix=function(a){return T(1E3*a)};m.months=function(a,b){return Ob(a,
b,"months")};m.isDate=k;m.locale=Ta;m.invalid=p;m.duration=Qa;m.isMoment=w;m.weekdays=function(a,b,c){return cc(a,b,c,"weekdays")};m.parseZone=function(){return T.apply(null,arguments).parseZone()};m.localeData=Oa;m.isDuration=ca;m.monthsShort=function(a,b){return Ob(a,b,"monthsShort")};m.weekdaysMin=function(a,b,c){return cc(a,b,c,"weekdaysMin")};m.defineLocale=Na;m.updateLocale=function(a,b){if(null!=b){var c,d=ld;c=Ha(a);null!=c&&(d=c._config);b=F(d,b);b=new D(b);b.parentLocale=Ia[a];Ia[a]=b;Ta(a)}else null!=
Ia[a]&&(null!=Ia[a].parentLocale?Ia[a]=Ia[a].parentLocale:null!=Ia[a]&&delete Ia[a]);return Ia[a]};m.locales=function(){return Rb(Ia)};m.weekdaysShort=function(a,b,c){return cc(a,b,c,"weekdaysShort")};m.normalizeUnits=H;m.relativeTimeRounding=function(a){return void 0===a?gc:"function"===typeof a?(gc=a,!0):!1};m.relativeTimeThreshold=function(a,b){if(void 0===Ib[a])return!1;if(void 0===b)return Ib[a];Ib[a]=b;"s"===a&&(Ib.ss=b-1);return!0};m.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};m.prototype=X;m.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return m})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(m,a){return function(){return function(a,f){this.context=
this.definition=null;this.definition=a;this.context=f}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(m,a,l,f,h){return function(a){function g(e,g,d,b,c){e=a.call(this,e)||this;e._lazyPath=[];e._hasZ=!1;e._hasM=!1;e._hasZ=d;e._hasM=b;e._spRef=g;e._cacheId=c;return e}l(g,a);g.prototype.get=function(a){if(void 0===this._lazyPath[a]){var e=this._elements[a];if(void 0===e)return;this._lazyPath[a]=
new h(e,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};g.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof g?!1:a.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()};return g}(f)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(m,a,l,f,h){return function(a){function g(e,
g,d,b,c,f){e=a.call(this,e)||this;e._lazyPt=[];e._hasZ=!1;e._hasM=!1;e._spRef=g;e._hasZ=d;e._hasM=b;e._cacheId=c;e._partId=f;return e}l(g,a);g.prototype.get=function(a){if(void 0===this._lazyPt[a]){var e=this._elements[a];if(void 0===e)return;var d=this._hasZ,b=this._hasM,c=null,c=d&&!b?new h(e[0],e[1],e[2],void 0,this._spRef):b&&d?new h(e[0],e[1],void 0,e[2],this._spRef):d&&b?new h(e[0],e[1],e[2],e[3],this._spRef):new h(e[0],e[1],this._spRef);c.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+
"-"+a.toString();this._lazyPt[a]=c}return this._lazyPt[a]};g.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof g?!1:a.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return g}(f)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this.immutable=this._datesfixed=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry?b.geometry:null;c.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=
b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;c._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(c._layer=b._layer);return c};a.createFromOptimisedFeature=function(b,d,e){var c=new a;c._geometry=b.geometry?{geometry:b.geometry}:null;c._optimizedGeomDefinition=e;c.attributes=b.attributes||{};c._layer=d;c._datesfixed=!1;return c};a.createFromArcadeDictionary=function(b){var c=
new a;c.attributes=b.field("attributes");null!==c.attributes?c.attributes instanceof f?(c.attributes=c.attributes.attributes,null===c.attributes&&(c.attributes={})):c.attributes={}:c.attributes={};c._geometry=b.field("geometry");null!==c._geometry&&(c._geometry instanceof f?c._geometry=a.parseGeometryFromDictionary(c._geometry):c._geometry instanceof k||(c._geometry=null));return c};a.createFromGraphicLikeObject=function(b,d,e){void 0===e&&(e=null);var c=new a;null===d&&(d={});c.attributes=d;c._geometry=
b?b:null;c._layer=e;c._layer&&(c._datesfixed=!1);return c};a.prototype.repurposeFromGraphicLikeObject=function(a,b,d){void 0===d&&(d=null);null===b&&(b={});this.attributes=b;this._geometry=a?a:null;this._datesfixed=(this._layer=d)?!1:!0};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var d=this.attributes[b];null==d?a+=JSON.stringify(b)+":null":g.isBoolean(d)||g.isNumber(d)||g.isString(d)?a+=JSON.stringify(b)+":"+JSON.stringify(d):d instanceof k?a+=JSON.stringify(b)+
":"+g.toStringExplicit(d):d instanceof h?a+=JSON.stringify(b)+":"+g.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(b)+":"+g.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(b)+":"+d.castToText())}return'{"geometry":'+(null===this.geometry()?"null":g.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var d=
this._layer.fields[b];"date"!==d.type&&"esriFieldTypeDate"!==d.type||a.push(d.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=l({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};
a.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof k)return this._geometry;this._optimizedGeomDefinition?(this._geometry=n.fromJSON(d.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=n.fromJSON(this._geometry);return this._geometry};a.prototype.field=function(a){!1===this._datesfixed&&
this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===g.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();
if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},d;for(d in this.attributes)a.push(d),b[d.toLowerCase()]=1;if(null!==this._layer)for(d=0;d<this._layer.fields.length;d++){var e=this._layer.fields[d];1!==b[e.name.toLowerCase()]&&a.push(e.name)}return a=a.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&
(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return n.fromJSON(b)};a.fixPathArrays=function(a,b,d){var c=[];if(a instanceof Array)for(var e=0;e<a.length;e++)c.push(this.fixPointArrays(a[e],b,d));else if(a instanceof h)for(e=0;e<a.length();e++)c.push(this.fixPointArrays(a.get(e),
b,d));return c};a.fixPointArrays=function(a,b,d){var c=[];if(a instanceof Array)for(var g=0;g<a.length;g++){var p=a[g];p instanceof e?b&&d?c.push([p.x,p.y,p.z,p.m]):b?c.push([p.x,p.y,p.z]):d?c.push([p.x,p.y,p.m]):c.push([p.x,p.y]):p instanceof h?c.push(p.toArray()):c.push(p)}else if(a instanceof h)for(g=0;g<a.length();g++)p=a.get(g),p instanceof e?b&&d?c.push([p.x,p.y,p.z,p.m]):b?c.push([p.x,p.y,p.z]):d?c.push([p.x,p.y,p.m]):c.push([p.x,p.y]):p instanceof h?c.push(p.toArray()):c.push(p);return c};
a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var c={},e;for(e in b.attributes){var g=b.attributes[e];g instanceof f&&(g=a.convertDictionaryToJson(g));d?c[e.toLowerCase()]=g:c[e]=g}return c};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(g.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&void 0!==b.geometry&&(c=n.fromJSON(b.geometry));var d={};if(null!==b.attributes&&
void 0!==b.attributes)for(var e in b.attributes){var f=b.attributes[e];if(null===f)d[e]=f;else if(g.isString(f)||g.isNumber(f)||g.isBoolean(f)||g.isDate(f))d[e]=f;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,d,null)};a.prototype.domainValueLookup=function(a,b,d){if(null===this._layer||!this._layer.fields)return null;d=g.getDomain(a,this._layer,this,d);if(void 0===b)try{b=this.field(a)}catch(t){return null}return g.getDomainValue(d,b)};a.prototype.domainCodeLookup=function(a,
b,d){if(null===this._layer||!this._layer.fields)return null;if(void 0===b){try{b=this.field(a)}catch(t){return null}return b}a=g.getDomain(a,this._layer,this,d);return g.getDomainCode(a,b)};return a}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry ./utils".split(" "),function(m,a,l,f,h,g,k,e,n){function d(a,b){return Math.round((b-a.translate[0])/
a.scale[0])}function b(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function c(a,b){return b*a.scale[0]+a.translate[0]}function q(a,b){return a.translate[1]-b*a.scale[1]}function p(a){a=a.coords;return{x:a[0],y:a[1]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function u(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function w(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function A(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function C(a,b){a.coords[0]=b.x;a.coords[1]=
b.y;a.coords[2]=b.m;return a}function z(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function y(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function x(a,b){return a&&b?y:a?w:b?C:t}function E(a,b,c){if(!a)return null;for(var d=n.getStride(b,c),e=[],g=0;g<a.coords.length;g+=d){for(var p=[],f=0;f<d;f++)p.push(a.coords[g+f]);e.push(p)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){void 0===c&&(c=n.getStride(b.hasZ,
b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,g=0;for(b=b.points;g<b.length;g++)for(var p=b[g],f=0;f<c;f++)d[e++]=p[f];return a}function F(a,b,c){if(!a)return null;var d=n.getStride(b,c),e=a.coords,g=[],p=0,f=0;for(a=a.lengths;f<a.length;f++){for(var k=a[f],q=[],h=0;h<k;h++){for(var t=[],w=0;w<d;w++)t.push(e[p++]);q.push(t)}g.push(q)}return b?c?{paths:g,hasZ:b,hasM:c}:{paths:g,hasZ:b}:c?{paths:g,hasM:c}:{paths:g}}function D(a,b,c){void 0===c&&(c=n.getStride(b.hasZ,b.hasM));var d=a.lengths,
e=a.coords,g=0,p=0;for(b=b.paths;p<b.length;p++){for(var f=b[p],k=0,q=f;k<q.length;k++)for(var h=q[k],t=0;t<c;t++)e[g++]=h[t];d.push(f.length)}return a}function G(a,b,c){if(!a)return null;var d=n.getStride(b,c),e=a.coords,g=[],p=0,f=0;for(a=a.lengths;f<a.length;f++){for(var k=a[f],q=[],h=0;h<k;h++){for(var t=[],w=0;w<d;w++)t.push(e[p++]);q.push(t)}g.push(q)}return b?c?{rings:g,hasZ:b,hasM:c}:{rings:g,hasZ:b}:c?{rings:g,hasM:c}:{rings:g}}function H(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);
c=n.getStride(c,d);d=a.lengths;var e=a.coords,g=0,p=d.length=e.length=0;for(b=b.rings;p<b.length;p++){for(var f=b[p],k=0,q=f;k<q.length;k++)for(var h=q[k],t=0;t<c;t++)e[g++]=h[t];d.push(f.length)}return a}function P(a,b,c,d,p,f){a.length=0;if(c){switch(c){case "esriGeometryPoint":d=x(d,p);for(p=0;p<b.length;p++){var k=b[p];c=k.geometry;var k=k.attributes,q=void 0;c&&(q=d(new e.default,c));a.push(new g.default(q,k,null,k[f]))}break;case "esriGeometryMultipoint":d=n.getStride(d,p);for(p=0;p<b.length;p++)k=
b[p],c=k.geometry,k=k.attributes,q=void 0,c&&(q=B(new e.default,c,d)),a.push(new g.default(q,k,null,k[f]));break;case "esriGeometryPolyline":d=n.getStride(d,p);for(p=0;p<b.length;p++)k=b[p],c=k.geometry,k=k.attributes,q=void 0,c&&(q=D(new e.default,c,d)),a.push(new g.default(q,k,null,k[f]));break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],k=h.geometry,q=h.centroid,h=h.attributes,w=void 0;k&&(w=H(new e.default,k,d,p));q?a.push(new g.default(w,h,t(new e.default,q),h[f])):a.push(new g.default(w,
h,null,h[f]))}break;default:M.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'")),a.length=0}return a}a.length=0}function O(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=p;d&&e?c=z:d?c=u:e&&(c=A);for(d=0;d<b.length;d++){var g=b[d];e=g.geometry;g=g.attributes;e=e?c(e):null;a.push({attributes:g,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var f=b[c],g=f.geometry,f=f.attributes,k=void 0;g&&(k=E(g,d,e));a.push({attributes:f,
geometry:k})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)f=b[c],g=f.geometry,f=f.attributes,k=void 0,g&&(k=F(g,d,e)),a.push({attributes:f,geometry:k});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var k=b[c],f=k.geometry,g=k.attributes,n=k.centroid,k=void 0;f&&(k=G(f,d,e));n?(f=p(n),a.push({attributes:g,centroid:f,geometry:k})):a.push({attributes:g,geometry:k})}break;default:M.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'"))}return a}
function N(a,c,e,g,p,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;p=W[p];var k=c.coords;c=c.lengths;var q=n.getStride(e,g);e=e?g?Z:L:g?L:S;if(!c.length)return e(a.coords,k,0,0,d(f,k[0]),b(f,k[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=q,a;for(var h,t,w,u=0,l,y=0,A=0;A<c.length;A++){var z=c[A];if(!(z<p)){var C=0;l=y;t=g=d(f,k[u]);w=h=b(f,k[u+1]);e(a.coords,k,l,u,t,w);C++;u+=q;l+=q;for(var x=1;x<z;x++,u+=q)if(t=d(f,
k[u]),w=b(f,k[u+1]),t!==g||w!==h)e(a.coords,k,l,u,t-g,w-h),l+=q,C++,g=t,h=w;C>=p&&(a.lengths.push(C),y=l)}}a.coords.length=y;return a.coords.length?a:null}function J(a,b,c,d,e,g,p){for(var f=p-c,k=0,n=0,q,h=g+c;h<p-c;h+=c){q=b[h];var t=b[h+1],w=b[g],u=b[g+1],l=b[f],y=b[f+1];w===l?q=Math.abs(q-w):(l=(y-u)/(l-w),q=Math.abs(l*q-t+(u-l*w))/Math.sqrt(l*l+1));q>k&&(n=h,k=q)}k>d?(J(a,b,c,d,e,g,n+c),J(a,b,c,d,e,n,p)):(e(a,b,a.length,g,b[g],b[g+1]),e(a,b,a.length,f,b[f],b[f+1]))}function R(a,b,d,e,g){var p=
b.coords,f=b.lengths,k=d?e?Z:L:e?L:S;d=n.getStride(d,e);if(!p.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!f.length)return k(a.coords,p,0,0,c(g,p[0]),q(g,p[1])),a!==b&&(a.lengths.length=0,a.coords.length=d),a;var h=g.scale;e=h[0];for(var h=h[1],t=0,w=0;w<f.length;w++){var u=f[w];a.lengths[w]=u;var l=c(g,p[t]),y=q(g,p[t+1]);k(a.coords,p,t,t,l,y);for(var t=t+d,A=1;A<u;A++,t+=d)l+=p[t]*e,y-=p[t+1]*h,k(a.coords,p,t,t,l,y)}a!==b&&(a.lengths.length=f.length,a.coords.length=p.length);
return a}Object.defineProperty(a,"__esModule",{value:!0});var M=f.getLogger("esri.tasks.support.optimizedFeatureSet"),W={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},S=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g},L=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g;a[c+2]=b[d+2]},Z=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g;a[c+2]=b[d+2];a[c+3]=b[d+3]};a.quantizeX=d;a.quantizeY=b;a.hydrateX=c;a.hydrateY=q;a.convertToPoint=function(a,b,c){return a?b?c?z(a):u(a):c?A(a):p(a):null};
a.convertFromPoint=function(a,b,c){void 0===c&&(c=x(null!=b.z,null!=b.m));return c(a,b)};a.convertToMultipoint=E;a.convertFromMultipoint=B;a.convertToPolyline=F;a.convertToPolygon=G;a.convertFromPolygon=H;var K=[],ea=[];a.convertFromFeature=function(a,b,c,d,e){K[0]=a;a=P(ea,K,b,c,d,e)[0];K.length=ea.length=0;return a};a.convertFromFeatures=P;a.convertToFeature=function(a,b,c,d){ea[0]=a;O(K,ea,b,c,d);a=K[0];K.length=ea.length=0;return a};a.convertFromGeometry=function(a){if(!a)return null;var b=new e.default;
if(h.isPoint(a))return x(null!=a.z,null!=a.m)(b,a);if(h.isPolygon(a))return H(b,a);if(h.isPolyline(a))return D(b,a);if(h.isMultipoint(a))return B(b,a);M.error("convertFromGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+"'"))};a.convertToGeometry=function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=p,c&&d?b=z:c?b=u:d&&(b=A),b(a);case "esriGeometryMultipoint":return E(a,c,d);case "esriGeometryPolyline":return F(a,
c,d);case "esriGeometryPolygon":return G(a,c,d);default:M.error("convertToGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+b+"'"))}};a.convertToFeatures=O;a.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,g=a.hasM,p=a.hasZ,f=a.geometryType,k=a.exceededTransferLimit;a={features:O([],a.features,f,p,g),fields:e,geometryType:f,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);g&&(a.hasM=
g);p&&(a.hasZ=p);return a};a.convertFromFeatureSet=function(a,b){var c=new k.default,d=a.hasM,e=a.hasZ,g=a.features,p=a.objectIdFieldName,f=a.spatialReference,n=a.geometryType,q=a.exceededTransferLimit,h=a.transform;c.fields=a.fields;c.geometryType=n;c.objectIdFieldName=p||b;c.spatialReference=f;if(!c.objectIdFieldName)return M.error(new l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&P(c.features,g,n,e,d,c.objectIdFieldName);q&&(c.exceededTransferLimit=q);d&&
(c.hasM=d);e&&(c.hasZ=e);h&&(c.transform=h);return c};a.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,g=a.features;e<g.length;e++){var p=g[e];p.geometry&&R(p.geometry,p.geometry,c,d,b);p.centroid&&R(p.centroid,p.centroid,c,d,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,d=b.features,p=b.hasM,f=b.hasZ;if(!a)return b;for(var k=0;k<d.length;k++){var n=d[k],q=new g.default(new e.default,n.attributes);
N(q.geometry,n.geometry,p,f,c,a);n.centroid&&(q.centroid=new e.default,N(q.centroid,n.centroid,p,f,"esriGeometryPoint",a));d[k]=q}b.transform=a;return b};a.quantizeOptimizedGeometry=N;a.quantizeOptimizedGeometryRemoveCollinear=function(a,c,e,g,p,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;p=W[p];var k=c.coords;c=c.lengths;var q=n.getStride(e,g);e=e?g?Z:L:g?L:S;if(!c.length)return e(a.coords,k,0,0,d(f,k[0]),b(f,k[1])),a.lengths.length&&
(a.lengths.length=0),a.coords.length=q,a;for(var h,t,w,u=0,l,y=0,A=0;A<c.length;A++){var z=c[A];if(!(z<p)){var C=0;l=y;g=h=d(f,k[u]);w=t=b(f,k[u+1]);e(a.coords,k,l,u,g,w);C++;for(var u=u+q,x=!1,B=0,m=0,D=1;D<z;D++,u+=q)if(g=d(f,k[u]),w=b(f,k[u+1]),g!==h||w!==t)h=g-h,t=w-t,x&&(0===B&&0===h||0===m&&0===t)?(B+=h,m+=t):(x=!0,B=h,m=t,l+=q,C++),e(a.coords,k,l,u,B,m),h=g,t=w;x&&(l+=q,e(a.coords,k,l,u,B,m));C>=p&&(a.lengths.push(C),y=l)}}a.coords.length!==y&&(a.coords.length=y);return a.coords.length?a:null};
a.generalizeOptimizedGeometry=function(a,b,c,d,e,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=W[e];var p=b.coords;b=b.lengths;var f=n.getStride(c,d);c=c?d?Z:L:d?L:S;if(!b.length)return c(a.coords,p,0,0,p[0],p[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=f,a;for(var k=d=0;k<b.length;k++){var q=b[k];if(!(q<e)){var h=a.coords.length/f;J(a.coords,p,f,g,c,d,d+q*f);var t=a.coords.length/f-h;t>=e?a.lengths.push(t):a.coords.length=
h*f}d+=q*f}return a.coords.length?a:null};a.getBoundsOptimizedGeometry=function(a,b,c,d){c=n.getStride(c,d);var e=d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var f=0;f<b.length;f+=c){var k=b[f],q=b[f+1];d=Math.min(d,k);g=Math.max(g,k);e=Math.min(e,q);p=Math.max(p,q)}}a[0]=d;a[1]=e;a[2]=g;a[3]=p;return a};a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=n.getStride(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,
p=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,k=0,q=0;for(b=b.lengths;q<b.length;q++)for(var h=b[q],t=d[k],w=d[k+1],e=Math.min(t,e),g=Math.min(w,g),p=Math.max(t,p),f=Math.max(w,f),k=k+c,u=1;u<h;u++,k+=c){var l=d[k],y=d[k+1],t=t+l,w=w+y;0>l&&(e=Math.min(e,t));0<l&&(p=Math.max(p,t));0>y?g=Math.min(g,w):0<y&&(f=Math.max(f,w))}a[0]=e;a[1]=g;a[2]=p;a[3]=f;return a};a.hydrateOptimizedGeometry=R})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,
"__esModule",{value:!0});m=function(){return function(a,f,h,g){void 0===a&&(a=null);void 0===f&&(f={});this.geometry=a;f&&(this.attributes=f);h&&(this.centroid=h);null!=g&&(this.objectId=g)}}();a.default=m})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});m=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=
null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();a.default=m})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});m=function(){return function(a,f){void 0===a&&(a=[]);void 0===f&&(f=[]);this.lengths=a;this.coords=f}}();a.default=m})},"esri/layers/graphics/utils":function(){define(["require","exports","../../geometry/support/jsonUtils"],function(m,
a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){return function(a,f,e){this.geometryType=a;this.hasM=f;this.hasZ=e}}();a.OptimizedGeometryInfo=f;var h={};a.getOptimizedGeometryInfo=function(a){var g=l.getJsonType(a),e;l.isPoint(a)?(e=null!=a.z,a=null!=a.m):(e=a.hasZ,a=a.hasM);var n=g+e+a;h[n]||(h[n]=new f(g,e,a));return h[n]};a.getStride=function(a,f){return a?f?4:3:f?3:2}})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(m,a){function l(a,b,c,d){return"0"!==
a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function f(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),l(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),l(d.signature,
a,b,c)):-1}function h(a,b){if(a)for(var c=0;c<a.length;c++)g(a[c],b)}function g(a,b){if(a&&!1!==b(a))switch(a.type){case "ArrayExpression":h(a.elements,b);break;case "AssignmentExpression":case "BinaryExpression":g(a.left,b);g(a.right,b);break;case "BlockStatement":h(a.body,b);break;case "CallExpression":g(a.callee,b);h(a.arguments,b);break;case "ConditionalExpression":g(a.test,b);g(a.alternate,b);g(a.consequent,b);break;case "DoWhileStatement":g(a.test,b);g(a.body,b);break;case "ExpressionStatement":g(a.expression,
b);break;case "ForInStatement":g(a.left,b);g(a.right,b);g(a.body,b);break;case "ForStatement":g(a.init,b);g(a.test,b);g(a.update,b);g(a.body,b);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":g(a.id,b);h(a.params,b);g(a.body,b);break;case "IfStatement":g(a.test,b);g(a.consequent,b);g(a.alternate,b);break;case "LogicalExpression":g(a.left,b);g(a.right,b);break;case "MemberExpression":g(a.object,b);g(a.property,b);break;case "NewExpression":g(a.callee,b);h(a.arguments,
b);break;case "ObjectExpression":h(a.properties,b);break;case "Program":h(a.body,b);break;case "Property":g(a.key,b);g(a.value,b);break;case "ReturnStatement":g(a.argument,b);break;case "UnaryExpression":g(a.argument,b);break;case "UpdateExpression":g(a.argument,b);break;case "VariableDeclaration":h(a.declarations,b);break;case "VariableDeclarator":g(a.id,b),g(a.init,b)}}function k(a,b){void 0===b&&(b=!0);var c=q(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==
a.init&&"FunctionExpression"===a.init.type?q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?k(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=k(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=k(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,
"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");c=k(a.right,b);if(""!==c)break;c=k(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=k(a.test,b),""!==c))break;if(null!==a.init&&(c=k(a.init,b),""!==c))break;if(null!==a.update&&(c=k(a.update,b),""!==c))break;if(null!==a.body&&(c=k(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=
k(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=k(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=k(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var e=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&e.push(a.body[d]);a.body=e;for(d=0;d<a.body.length;d++)if(c=k(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?q(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):k(a.body,
!1);case "ReturnStatement":return null!==a.argument?k(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):k(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=k(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(a,
"SYNTAX","OPERATORNOTRECOGNISED")}return k(a.right,!1);case "ExpressionStatement":return k(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=k(a.object,b);if(""!==c)break;return!0===a.computed?k(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=k(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=k(a.argument,b);break;case "BinaryExpression":c=
k(a.left,b);if(""!==c)break;c=k(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=k(a.left,b);if(""!==c)break;c=k(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return q(a,
"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=k(a.elements[d],b),""===c);d++);break;case "ObjectExpression":c="";for(d=0;d<a.properties.length;d++){c="";if(null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type)){var e=a.properties[d].key,g="value"in e?e.value:null;"string"===typeof g||g instanceof String||(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
c&&(c=k(a.properties[d],b));if(""!==c)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=k(a.key,b),""!==c))break;c=k(a.value,b)}return c}catch(G){throw G;}}function e(a,c){var g=q(a,"SYNTAX","UNREOGNISED"),p=null,k="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var n=null===a.init?"":e(a.init,c);if(""!==
n)return n;"Identifier"===a.id.type&&(null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":p=d(a.id.name.toLowerCase(),a,c);k=b(a,c);if(""!==k)return k;if(null!==c.localScope)return q(a,"SYNTAX","GLOBALFUNCTIONSONLY");p.isnative=!1;c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[p]};return"";case "VariableDeclaration":for(var g="",h=0;h<a.declarations.length&&(g=e(a.declarations[h],
c),""===g);h++);break;case "IfStatement":g=e(a.test,c);if(""!==g)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(g=e(a.consequent,c),""!==g))break;if(null!==a.alternate&&(g=e(a.alternate,c),""!==g))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(h=0;h<a.body.length;h++)if(g=e(a.body[h],c),""!==g)return g;return"";case "ReturnStatement":return null!==a.argument?
e(a.argument,c):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");g=e(a.left,c);if(""!==g)break;g=e(a.right,c);if(""!==g)break;g=e(a.body,c);if(""!==g)break;return"";case "ForStatement":if(null!==a.init&&(g=e(a.init,c),""!==g))break;if(null!==a.test&&(g=e(a.test,c),""!==g))break;
if(null!==a.body&&(g=e(a.body,c),""!==g))break;if(null!==a.update&&(g=e(a.update,c),""!==g))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var t=!1;if("MemberExpression"===a.argument.type)return e(a.argument,c);null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(t=!0);void 0!==c.globalScope[a.argument.name.toLowerCase()]&&
(t=!0);return!1===t?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var w=e(a.right,c);if(""!==w)return w;t=!1;if("MemberExpression"===a.left.type)return w=e(a.left,c),""!==w?w:"";null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(t=!0);void 0!==c.globalScope[a.left.name.toLowerCase()]&&(t=!0);return!1===t?"Identifier "+a.left.name+
" has not been declared.":"";case "ExpressionStatement":return e(a.expression,c);case "Identifier":var u=a.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[u])return"";g=void 0!==c.globalScope[u]?"":q(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":g=e(a.object,c);if(""!==g)break;return!0===a.computed?e(a.property,c):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");g="";for(h=0;h<a.arguments.length;h++)if(g=
e(a.arguments[h],c),""!==g)return g;var l=f(a.callee.name,a.arguments,c);-1===l&&(g=q(a,"SYNTAX","NOTFOUND"));-2===l&&(g=q(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":g=e(a.argument,c);break;case "BinaryExpression":g=e(a.left,c);if(""!==g)break;g=e(a.right,c);if(""!==g)break;return"";case "LogicalExpression":g=e(a.left,c);if(""!==g)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return q(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");g=e(a.right,
c);if(""!==g)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?q(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":g="";for(h=0;h<a.elements.length&&(g=e(a.elements[h],c),""===g);h++);break;case "ObjectExpression":g="";for(h=0;h<a.properties.length;h++){g="";if(null!==a.properties[h].key&&("Literal"!==a.properties[h].key.type&&"Identifier"!==a.properties[h].key.type&&
(g=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[h].key.type)){var A=a.properties[h].key,z="value"in A?A.value:null;"string"===typeof z||z instanceof String||(g=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===g&&(g=e(a.properties[h],c));if(""!==g)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(g=e(a.key,c),""!==g))break;g=e(a.value,c)}return g}catch(M){throw M;}}function n(a,
b){var c=!1,d=b.toLowerCase();g(a,function(a){if(c)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===d&&(c=!0);return!0});return c}function d(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function b(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return e(a.body,b)}function c(a,b,c,d){var e={};if(void 0===
a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var g in b)"sync"===d&&void 0!==b[g].min?e[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}}:"sync"!==d&&void 0!==b[g].fmin&&(e[g]={type:"FormulaFunction",signature:{min:b[g].fmin,max:b[g].fmax}});for(b=0;b<c.length;b++)g=c[b],e[g.name]={type:"FormulaFunction",signature:g};for(g in a)e[g]=a[g],e[g].type="any";return e}function q(a,b,c){var d="";switch(b){case "SYNTAX":d=
"Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=
" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";
break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=
" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?
"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(c){case "WRONGSIGNATURE":d+=
"Function signature does not match: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":d+="Not a Function: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":d+="Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;default:d+="Expression contains unrecognised code structures."}}catch(F){throw F;}return d}function p(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:q(a,b,c)}}function t(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};
u(a.body,b,c,d,!1)}function u(a,b,c,e,g){void 0===g&&(g=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var k=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(p(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});
null!==a.init&&u(a.init,b,c,e,g);break;case "FunctionDeclaration":!1===g&&e.push(p(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(p(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));k=d("",a,b);t(a,b,c,e,g);null!==b.localScope&&e.push(p(a,"SYNTAX","GLOBALFUNCTIONSONLY"));k.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[k]});break;case "VariableDeclaration":for(var n=0;n<a.declarations.length;n++)u(a.declarations[n],b,c,
e,g);break;case "IfStatement":null!==a.test&&(u(a.test,b,c,e,g),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||e.push(p(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&u(a.consequent,b,c,e,g);null!==a.alternate&&u(a.alternate,b,c,e,g);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(n=0;n<a.body.length;n++)u(a.body[n],b,c,e,g);break;case "ReturnStatement":null!==a.argument&&u(a.argument,b,c,e,g);break;case "ForInStatement":"VariableDeclaration"===
a.left.type?(1<a.left.declarations.length&&e.push(p(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(p(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(p(a,"SYNTAX","LEFTNOTVAR"));u(a.left,b,c,e,g);u(a.right,b,c,e,g);u(a.body,b,c,e,g);break;case "ForStatement":null!==a.init&&u(a.init,b,c,e,g);null!==a.test&&u(a.test,b,c,e,g);null!==a.body&&u(a.body,b,c,e,g);null!==a.update&&u(a.update,b,c,e,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?e.push(p(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(k=!1,!1===c&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(k=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(k=!0),!1===k&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&u(a.argument,b,c,
e,g));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(p(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(p(a,"SYNTAX","OPERATORNOTRECOGNISED"))}u(a.right,b,c,e,g);k=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(k=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(k=!0),!1===c&&!1===
k&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&u(a.left,b,c,e,g);break;case "ExpressionStatement":u(a.expression,b,c,e,g);break;case "Identifier":var q=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[q])break;if(void 0!==b.globalScope[q])break;!1===c&&e.push(p(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":u(a.object,b,c,e,g);!0===a.computed&&
u(a.property,b,c,e,g);break;case "Literal":return"";case "CallExpression":"Identifier"!==a.callee.type&&e.push(p(a,"SYNTAX","ONLYNODESSUPPORTED"));for(n=0;n<a.arguments.length;n++)u(a.arguments[n],b,c,e,g);if("Identifier"===a.callee.type){var h=f(a.callee.name,a.arguments,b);!1===c&&-1===h&&e.push(p(a,"SYNTAX","NOTFOUND"));-2===h&&e.push(p(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":u(a.argument,b,c,e,g);break;case "BinaryExpression":u(a.left,b,c,e,g);u(a.right,b,c,e,g);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:e.push(p(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:e.push(p(a,"SYNTAX","OPERATORNOTRECOGNISED"))}u(a.left,b,c,e,g);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||e.push(p(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));u(a.right,b,c,e,g);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||e.push(p(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(p(a,
"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(n=0;n<a.elements.length;n++)u(a.elements[n],b,c,e,g);break;case "ObjectExpression":for(n=0;n<a.properties.length;n++)u(a.properties[n],b,c,e,g);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(p(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&u(a.key,b,c,e,g);u(a.value,b,c,e,g);break;default:e.push(p(a,"SYNTAX","UNRECOGNISED"))}}catch(O){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,
reason:"Unnexpected Syntax"})}}function w(a,b){var c=[];g(a,function(a){"CallExpression"===a.type&&"Identifier"===a.callee.type&&c.push(a.callee.name.toLowerCase());return!0});return c}Object.defineProperty(a,"__esModule",{value:!0});a.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",
max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",
max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},
round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",
max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",
max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},
simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"}};for(var A in a.functionDecls)a.functionDecls[A].fmin=a.functionDecls[A].min,a.functionDecls[A].fmax=a.functionDecls[A].max;var C="featureset featuresetbyid featuresetbyname featuresetbyurl attachments featuresetbyportalitem".split(" "),z="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
a.addFunctionDeclaration=function(b,c){var d=a.functionDecls[b.name.toLowerCase()];void 0===d?"sync"===c?a.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:a.functionDecls[b.name.toLowerCase()]={fmin:b.min,fmax:b.max}:"sync"===c?(d.min=b.min,d.max=b.max):(d.fmin=b.min,d.fmax=b.max)};a.checkFunctionSignature=l;a.findFunction=f;a.walk=g;a.validateLanguageNode=k;a.testValidityOfExpression=e;a.referencesMember=n;a.referencesFunction=function(a,b){var c=!1,d=b.toLowerCase();g(a,function(a){return c?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===d?(c=!0,!1):!0});return c};a.findFieldLiterals=function(a,b){var c=[];g(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return c};a.extractFunctionDeclaration=d;a.validateFunction=b;a.constructGlobalScope=c;a.validateScript=function(b,d,g,p){void 0===g&&(g="async");void 0===p&&(p=a.functionDecls);d={globalScope:c(d.vars,p,d.customFunctions,g),localScope:null};return e(b.body[0].body,d)};a.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":k(a.body[0].body)};
a.nodeErrorMessage=q;a.makeError=p;a.extractAllIssuesInFunction=t;a.extractAllIssues=u;a.checkScript=function(b,d,e,g,p){void 0===g&&(g="async");void 0===p&&(p=a.functionDecls);var f=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===d||void 0===d)d={vars:{},customFunctions:[]};d={globalScope:c(d.vars,p,d.customFunctions,g),localScope:null};try{u(b.body[0].body,d,e,f)}catch(G){}return f};a.findFunctionCalls=w;a.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=w(a,!1));a.usesFeatureSet=!1;for(var d=0;d<c.length;d++)-1<C.indexOf(c[d])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(d=0;d<b.length;d++)if(n(a,b[d])){a.usesFeatureSet=!0;a.isAsync=!0;break}}void 0===a.isAsync&&(a.isAsync=!1);if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=w(a,!1)),d=0;d<c.length;d++)-1<z.indexOf(c[d])&&(a.usesGeometry=!0)};a.scriptUsesFeatureSet=function(a){a=
w(a,!1);for(var b=0;b<a.length;b++)if(-1<C.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(m,a,l,f){function h(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,k){a.today=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,
0,0);return new Date})};a.timestamp=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=
function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?null:l.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getDate()})};a.month=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,g){return k(a,g,function(a,
b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getHours()})};a.second=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,g){return k(a,g,function(a,
b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,1,1);a=f.toDate(c[0]);return null===a?NaN:a.getDay()})};a.date=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,0,7);if(3===c.length)return h(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),0,0,0,0));if(4===c.length)return h(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),0,0,0));if(5===c.length)return h(new Date(f.toNumber(c[0]),
f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),0,0));if(6===c.length)return h(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),f.toNumber(c[5]),0));if(7===c.length)return h(new Date(f.toNumber(c[0]),f.toNumber(c[1]),f.toNumber(c[2]),f.toNumber(c[3]),f.toNumber(c[4]),f.toNumber(c[5]),f.toNumber(c[6])));if(2===c.length){a=f.toString(c[1]);if(""===a)return null;a=f.standardiseDateFormat(a);c=l(f.toString(c[0]),a,!0);return!0===c.isValid()?
c.toDate():null}if(1===c.length){if(f.isString(c[0])&&""===c[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=f.toNumber(c[0]);return!1===isNaN(a)?h(new Date(a)):f.toDate(c[0])}if(0===c.length)return new Date})};a.datediff=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,2,3);a=f.toDateM(c[0]);b=f.toDateM(c[1]);if(null===a||null===b)return NaN;switch(f.toString(c[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,
"months",!0);case "minutes":case "minute":case "m":return"M"===c[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,g){return k(a,g,function(a,b,c){f.pcCheck(c,2,3);a=f.toDateM(c[0]);if(null===a)return null;
b="milliseconds";switch(f.toString(c[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===c[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(f.toNumber(c[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,u){a.ringisclockwise=function(a,b){return u(a,b,function(a,b,c){g.pcCheck(c,1,1);a=[];var e=b=!1;if(null===c[0])return!1;if(g.isArray(c[0])){for(var f=0,k=c[0];f<k.length;f++){var n=k[f];if(n instanceof d)a.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]);else throw Error("Invalid Argument");}0<a.length&&(b=c[0][0].hasZ,e=c[0][0].hasM)}else if(c[0]instanceof h)a=c[0]._elements,
0<a.length&&(b=c[0]._hasZ,e=c[0]._hasM);else if(g.isImmutableArray(c[0])){f=0;for(k=c[0].toArray();f<k.length;f++)if(n=k[f],n instanceof d)a.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]);else throw Error("Invalid Argument");0<a.length&&(b=c[0].get(0).hasZ,e=c[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>a.length?!1:p.isClockwise(a,e,b)})};a.polygon=function(a,c){return u(a,c,function(c,d,e){g.pcCheck(e,1,1);c=null;if(e[0]instanceof l){if(c=g.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===c instanceof b)throw Error("Illegal Parameter");}else c=e[0]instanceof b?q.fromJSON(e[0].toJSON()):g.fixSpatialReference(new b(JSON.parse(e[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(c)})};a.polyline=function(a,b){return u(a,b,function(b,d,e){g.pcCheck(e,1,1);b=null;if(e[0]instanceof l){if(b=g.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=e[0]instanceof c?q.fromJSON(e[0].toJSON()):g.fixSpatialReference(new c(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(b)})};a.point=function(a,b){return u(a,b,function(b,c,e){g.pcCheck(e,1,1);b=null;if(e[0]instanceof l){if(b=g.fixSpatialReference(f.parseGeometryFromDictionary(e[0]),
a.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=e[0]instanceof d?q.fromJSON(e[0].toJSON()):g.fixSpatialReference(new d(JSON.parse(e[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(b)})};a.multipoint=function(a,b){return u(a,b,function(b,c,d){g.pcCheck(d,1,1);b=null;if(d[0]instanceof l){if(b=
g.fixSpatialReference(f.parseGeometryFromDictionary(d[0]),a.spatialReference),!1===b instanceof n)throw Error("Illegal Parameter");}else b=d[0]instanceof n?q.fromJSON(d[0].toJSON()):g.fixSpatialReference(new n(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(b)})};a.extent=function(a,e){return u(a,e,function(e,
p,h){h=g.autoCastFeatureToGeometry(h);g.pcCheck(h,1,1);e=null;h[0]instanceof l?e=g.fixSpatialReference(f.parseGeometryFromDictionary(h[0]),a.spatialReference):h[0]instanceof d?(e={xmin:h[0].x,ymin:h[0].y,xmax:h[0].x,ymax:h[0].y,spatialReference:h[0].spatialReference.toJSON()},h[0].hasZ?(e.zmin=h[0].z,e.zmax=h[0].z):h[0].hasM&&(e.mmin=h[0].m,e.mmax=h[0].m),e=q.fromJSON(e)):e=h[0]instanceof b?q.fromJSON(h[0].extent.toJSON()):h[0]instanceof c?q.fromJSON(h[0].extent.toJSON()):h[0]instanceof n?q.fromJSON(h[0].extent.toJSON()):
h[0]instanceof k?q.fromJSON(h[0].toJSON()):g.fixSpatialReference(new k(JSON.parse(h[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(e)})};a.geometry=function(a,b){return u(a,b,function(b,c,d){g.pcCheck(d,1,1);b=null;b=d[0]instanceof f?g.fixSpatialReference(d[0].geometry(),a.spatialReference):d[0]instanceof l?g.fixSpatialReference(f.parseGeometryFromDictionary(d[0]),
a.spatialReference):g.fixSpatialReference(q.fromJSON(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(b)})};a.setgeometry=function(a,b){return u(a,b,function(a,b,c){g.pcCheck(c,2,2);if(c[0]instanceof f){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof e||null===c[1])c[0]._geometry=c[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return g.voidOperation})};a.feature=function(a,b){return u(a,b,function(b,c,d){if(0===d.length)throw Error("Missing Parameters");b=null;if(1===d.length)if(g.isString(d[0]))b=f.fromJson(JSON.parse(d[0]));else if(d[0]instanceof f)b=f.createFromArcadeFeature(d[0]);else if(d[0]instanceof e)b=f.createFromGraphicLikeObject(d[0],null,null);else if(d[0]instanceof l)b=d[0].hasField("geometry")?d[0].field("geometry"):null,c=d[0].hasField("attributes")?
d[0].field("attributes"):null,null!==b&&b instanceof l&&(b=f.parseGeometryFromDictionary(b)),null!==c&&(c=f.parseAttributesFromDictionary(c)),b=f.createFromGraphicLikeObject(b,c,null);else throw Error("Illegal Argument");else{if(2===d.length){c=b=null;if(null!==d[0])if(d[0]instanceof e)b=d[0];else if(b instanceof l)b=f.parseGeometryFromDictionary(d[0]);else throw Error("Illegal Argument");if(null!==d[1])if(d[1]instanceof l)c=f.parseAttributesFromDictionary(d[1]);else throw Error("Illegal Argument");
}else{b=null;c={};if(null!==d[0])if(d[0]instanceof e)b=d[0];else if(b instanceof l)b=f.parseGeometryFromDictionary(d[0]);else throw Error("Illegal Argument");for(var p=1;p<d.length;p+=2){var k=g.toString(d[p]),n=d[p+1];if(null===n||void 0===n||g.isString(n)||isNaN(n)||g.isDate(n)||g.isNumber(n)||g.isBoolean(n)){if(g.isFunctionParameter(n)||!1===g.isSimpleType(n))throw Error("Illegal Argument");c[k]=n===g.voidOperation?null:n}else throw Error("Illegal Argument");}}b=f.createFromGraphicLikeObject(b,
c,null)}b._geometry=g.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};a.dictionary=function(a,b){return u(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=g.toString(c[b]),e=c[b+1];if(null===e||void 0===e||g.isString(e)||isNaN(e)||g.isDate(e)||g.isNumber(e)||g.isBoolean(e)||g.isArray(e)||g.isImmutableArray(e)){if(g.isFunctionParameter(e))throw Error("Illegal Argument");
a[d]=e===g.voidOperation?null:e}else throw Error("Illegal Argument");}c=new l(a);c.immutable=!1;return c})};a.haskey=function(a,b){return u(a,b,function(a,b,c){g.pcCheck(c,2,2);a=g.toString(c[1]);if(c[0]instanceof f||c[0]instanceof l)return c[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,b){return u(a,b,function(a,b,c){g.pcCheck(c,2,2);a=c[1];if(g.isArray(c[0])){for(b=0;b<c[0].length;b++)if(g.equalityTest(a,c[0][b]))return b;return-1}if(g.isImmutableArray(c[0])){var d=c[0].length();
for(b=0;b<d;b++)if(g.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ../featureset/support/shared ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){function t(a){return 0===
l.version.indexOf("4.")?c.fromExtent(a):new c({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(a,"__esModule",{value:!0});var u=null;a.setGeometryEngine=function(a){u=a};a.registerFunctions=function(a,l){function w(a){h.pcCheck(a,2,2);if(!(a[0]instanceof n&&a[1]instanceof n||a[0]instanceof n&&null===a[1]||a[1]instanceof n&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=
function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!0:u.disjoint(c[0],c[1])})};a.intersects=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!1:u.intersects(c[0],c[1])})};a.touches=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!1:u.touches(c[0],c[1])})};a.crosses=function(a,b){return l(a,b,function(a,b,c){c=
h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!1:u.crosses(c[0],c[1])})};a.within=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!1:u.within(c[0],c[1])})};a.contains=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?!1:u.contains(c[0],c[1])})};a.overlaps=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===
c[0]||null===c[1]?!1:u.overlaps(c[0],c[1])})};a.equals=function(a,b){return l(a,b,function(a,b,c){h.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof n&&c[1]instanceof n?u.equals(c[0],c[1]):h.isDate(c[0])&&h.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};a.relate=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,3,3);if(c[0]instanceof n&&c[1]instanceof n)return u.relate(c[0],c[1],h.toString(c[2]));if(c[0]instanceof n&&null===c[1]||c[1]instanceof n&&null===
c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]||null===c[1]?null:u.intersect(c[0],c[1])})};a.union=function(a,b){return l(a,b,function(b,c,d){d=h.autoCastFeatureToGeometry(d);b=[];if(0===d.length)throw Error("Function called with wrong number of Parameters");if(1===d.length)if(h.isArray(d[0]))for(d=h.autoCastFeatureToGeometry(d[0]),c=0;c<d.length;c++){if(null!==
d[c]){if(!(d[c]instanceof n))throw Error("Illegal Argument");b.push(d[c])}}else if(h.isImmutableArray(d[0]))for(d=h.autoCastFeatureToGeometry(d[0].toArray()),c=0;c<d.length;c++){if(null!==d[c]){if(!(d[c]instanceof n))throw Error("Illegal Argument");b.push(d[c])}}else{if(d[0]instanceof n)return h.fixSpatialReference(g.cloneGeometry(d[0]),a.spatialReference);if(null===d[0])return null;throw Error("Illegal Argument");}else for(c=0;c<d.length;c++)if(null!==d[c]){if(!(d[c]instanceof n))throw Error("Illegal Argument");
b.push(d[c])}return 0===b.length?null:u.union(b)})};a.difference=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null!==c[0]&&null===c[1]?g.cloneGeometry(c[0]):null===c[0]?null:u.difference(c[0],c[1])})};a.symmetricdifference=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);w(c);return null===c[0]&&null===c[1]?null:null===c[0]?g.cloneGeometry(c[1]):null===c[1]?g.cloneGeometry(c[0]):u.symmetricDifference(c[0],c[1])})};a.clip=function(a,
b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,2);if(!(c[1]instanceof e)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof n))throw Error("Illegal Argument");return null===c[1]?null:u.clip(c[0],c[1])})};a.cut=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,2);if(!(c[1]instanceof q)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return[];if(!(c[0]instanceof n))throw Error("Illegal Argument");
return null===c[1]?[g.cloneGeometry(c[0])]:u.cut(c[0],c[1])})};a.area=function(a,b){return l(a,b,function(b,c,d){h.pcCheck(d,1,2);d=h.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(h.isArray(d[0])||h.isImmutableArray(d[0]))return b=h.autoCastArrayOfPointsToPolygon(d[0],a.spatialReference),null===b?0:u.planarArea(b,f.convertSquareUnitsToCode(h.defaultUndefined(d[1],-1)));if(!(d[0]instanceof n))throw Error("Illegal Argument");return u.planarArea(d[0],f.convertSquareUnitsToCode(h.defaultUndefined(d[1],
-1)))})};a.areageodetic=function(a,b){return l(a,b,function(b,c,d){h.pcCheck(d,1,2);d=h.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(h.isArray(d[0])||h.isImmutableArray(d[0]))return b=h.autoCastArrayOfPointsToPolygon(d[0],a.spatialReference),null===b?0:u.geodesicArea(b,f.convertSquareUnitsToCode(h.defaultUndefined(d[1],-1)));if(!(d[0]instanceof n))throw Error("Illegal Argument");return u.geodesicArea(d[0],f.convertSquareUnitsToCode(h.defaultUndefined(d[1],-1)))})};a.length=function(a,b){return l(a,
b,function(b,c,d){h.pcCheck(d,1,2);d=h.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(h.isArray(d[0])||h.isImmutableArray(d[0]))return b=h.autoCastArrayOfPointsToPolyline(d[0],a.spatialReference),null===b?0:u.planarLength(b,f.convertLinearUnitsToCode(h.defaultUndefined(d[1],-1)));if(!(d[0]instanceof n))throw Error("Illegal Argument");return u.planarLength(d[0],f.convertLinearUnitsToCode(h.defaultUndefined(d[1],-1)))})};a.lengthgeodetic=function(a,b){return l(a,b,function(b,c,d){h.pcCheck(d,
1,2);d=h.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(h.isArray(d[0])||h.isImmutableArray(d[0]))return b=h.autoCastArrayOfPointsToPolyline(d[0],a.spatialReference),null===b?0:u.geodesicLength(b,f.convertLinearUnitsToCode(h.defaultUndefined(d[1],-1)));if(!(d[0]instanceof n))throw Error("Illegal Argument");return u.geodesicLength(d[0],f.convertLinearUnitsToCode(h.defaultUndefined(d[1],-1)))})};a.distance=function(a,b){return l(a,b,function(b,c,d){d=h.autoCastFeatureToGeometry(d);h.pcCheck(d,
2,3);b=d[0];if(h.isArray(d[0])||h.isImmutableArray(d[0]))b=h.autoCastArrayOfPointsToMultiPoint(d[0],a.spatialReference);c=d[1];if(h.isArray(d[1])||h.isImmutableArray(d[1]))c=h.autoCastArrayOfPointsToMultiPoint(d[1],a.spatialReference);if(!(b instanceof n))throw Error("Illegal Argument");if(!(c instanceof n))throw Error("Illegal Argument");return u.distance(b,c,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1)))})};a.densify=function(a,b){return l(a,b,function(a,b,d){d=h.autoCastFeatureToGeometry(d);
h.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof n))throw Error("Illegal Argument");a=h.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof c||d[0]instanceof q?u.densify(d[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1))):d[0]instanceof e?u.densify(t(d[0]),a,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1))):d[0]})};a.densifygeodetic=function(a,b){return l(a,b,function(a,b,d){d=h.autoCastFeatureToGeometry(d);
h.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof n))throw Error("Illegal Argument");a=h.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return d[0]instanceof c||d[0]instanceof q?u.geodesicDensify(d[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1))):d[0]instanceof e?u.geodesicDensify(t(d[0]),a,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1))):d[0]})};a.generalize=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);
h.pcCheck(c,2,4);if(null===c[0])return null;if(!(c[0]instanceof n))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return u.generalize(c[0],a,h.toBoolean(h.defaultUndefined(c[2],!0)),f.convertLinearUnitsToCode(h.defaultUndefined(c[3],-1)))})};a.buffer=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof n))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");
return 0===a?g.cloneGeometry(c[0]):u.buffer(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)))})};a.buffergeodetic=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof n))throw Error("Illegal Argument");a=h.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?g.cloneGeometry(c[0]):u.geodesicBuffer(c[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(c[2],-1)))})};a.offset=function(a,
b){return l(a,b,function(a,b,d){d=h.autoCastFeatureToGeometry(d);h.pcCheck(d,2,6);if(null===d[0])return null;if(!(d[0]instanceof c||d[0]instanceof q))throw Error("Illegal Argument");a=h.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");b=h.toNumber(h.defaultUndefined(d[4],10));if(isNaN(b))throw Error("Illegal Argument");var e=h.toNumber(h.defaultUndefined(d[5],0));if(isNaN(e))throw Error("Illegal Argument");return u.offset(d[0],a,f.convertLinearUnitsToCode(h.defaultUndefined(d[2],-1)),h.toString(h.defaultUndefined(d[3],
"round")).toLowerCase(),b,e)})};a.rotate=function(a,d){return l(a,d,function(a,d,g){g=h.autoCastFeatureToGeometry(g);h.pcCheck(g,2,3);a=g[0];if(null===a)return null;if(!(a instanceof n))throw Error("Illegal Argument");a instanceof e&&(a=c.fromExtent(a));d=h.toNumber(g[1]);if(isNaN(d))throw Error("Illegal Argument");g=h.defaultUndefined(g[2],null);if(null===g)return u.rotate(a,d);if(g instanceof b)return u.rotate(a,d,g);throw Error("Illegal Argument");})};a.centroid=function(a,p){return l(a,p,function(p,
f,t){t=h.autoCastFeatureToGeometry(t);h.pcCheck(t,1,1);if(null===t[0])return null;p=t[0];if(h.isArray(t[0])||h.isImmutableArray(t[0]))p=h.autoCastArrayOfPointsToMultiPoint(t[0],a.spatialReference);if(null===p)return null;if(!(p instanceof n))throw Error("Illegal Argument");return p instanceof b?h.fixSpatialReference(g.cloneGeometry(t[0]),a.spatialReference):p instanceof c?p.centroid:p instanceof q?k.centroidPolyline(p):p instanceof d?k.centroidMultiPoint(p):p instanceof e?p.center:null})};a.multiparttosinglepart=
function(a,f){return l(a,f,function(f,k,t){t=h.autoCastFeatureToGeometry(t);h.pcCheck(t,1,1);k=[];if(null===t[0])return null;if(!(t[0]instanceof n))throw Error("Illegal Argument");if(t[0]instanceof b||t[0]instanceof e)return[h.fixSpatialReference(g.cloneGeometry(t[0]),a.spatialReference)];f=u.simplify(t[0]);if(f instanceof c){k=[];var w=[];for(t=0;t<f.rings.length;t++)if(f.isClockwise(f.rings[t])){var l=p.fromJSON({rings:[f.rings[t]],hasZ:!0===f.hasZ,hasM:!0===f.hasM,spatialReference:f.spatialReference.toJSON()});
k.push(l)}else w.push({ring:f.rings[t],pt:f.getPoint(t,0)});for(f=0;f<w.length;f++)for(t=0;t<k.length;t++)if(k[t].contains(w[f].pt)){k[t].addRing(w[f].ring);break}return k}if(f instanceof q){k=[];for(t=0;t<f.paths.length;t++)w=p.fromJSON({paths:[f.paths[t]],hasZ:!0===f.hasZ,hasM:!0===f.hasM,spatialReference:f.spatialReference.toJSON()}),k.push(w);return k}if(t[0]instanceof d){f=h.fixSpatialReference(g.cloneGeometry(t[0]),a.spatialReference);for(t=0;t<f.points.length;t++)k.push(f.getPoint(t));return k}return null})};
a.issimple=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,1);if(null===c[0])return!0;if(!(c[0]instanceof n))throw Error("Illegal Argument");return u.isSimple(c[0])})};a.simplify=function(a,b){return l(a,b,function(a,b,c){c=h.autoCastFeatureToGeometry(c);h.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof n))throw Error("Illegal Argument");return u.simplify(c[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new l({xmin:a.x,
ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};a.sameGeomType=function(a,h){return a===h||"point"===a&&"esriGeometryPoint"===h||"polyline"===a&&"esriGeometryPolyline"===h||"polygon"===a&&"esriGeometryPolygon"===h||"extent"===a&&"esriGeometryEnvelope"===h||"multipoint"===a&&"esriGeometryMultipoint"===
h||"point"===h&&"esriGeometryPoint"===a||"polyline"===h&&"esriGeometryPolyline"===a||"polygon"===h&&"esriGeometryPolygon"===a||"extent"===h&&"esriGeometryEnvelope"===a||"multipoint"===h&&"esriGeometryMultipoint"===a?!0:!1}})},"esri/arcade/featureset/support/shared":function(){define(["require","exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(m,a,l,f,h){function g(a){return a instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});
(function(a){a[a.Standardised=0]="Standardised";a[a.SqlServer=1]="SqlServer";a[a.Oracle=2]="Oracle";a[a.Postgres=3]="Postgres";a[a.PGDB=4]="PGDB";a[a.FILEGDB=5]="FILEGDB";a[a.NotEvaluated=6]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(a){return h.fromJSON(a.toJSON())};a.esriFieldToJson=function(a){return a.toJSON()};a.cloneGeometry=function(a){if(null===a)return null;var e=a.clone();void 0!==a.cache._geVersion&&(e.cache._geVersion=a.cache._geVersion);
return e};(function(a){a[a.InFeatureSet=0]="InFeatureSet";a[a.NotInFeatureSet=1]="NotInFeatureSet";a[a.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(a){return"string"===typeof a||a instanceof String};a.isBoolean=function(a){return"boolean"===typeof a};a.isNumber=function(a){return"number"===typeof a};a.isArray=function(a){return a instanceof Array};a.isDate=g;a.equalityTest=function(a,e){return a===e?!0:g(a)&&g(e)?a.getTime()===e.getTime():!1};a.cloneAttributes=function(a){var e=
{},g;for(g in a)e[g]=a[g];return e};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new f({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,
spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(a,e){return a===e||"point"===a&&"esriGeometryPoint"===e||"polyline"===a&&"esriGeometryPolyline"===e||"polygon"===a&&
"esriGeometryPolygon"===e||"extent"===a&&"esriGeometryEnvelope"===e||"multipoint"===a&&"esriGeometryMultipoint"===e||"point"===e&&"esriGeometryPoint"===a||"polyline"===e&&"esriGeometryPolyline"===a||"polygon"===e&&"esriGeometryPolygon"===a||"extent"===e&&"esriGeometryEnvelope"===a||"multipoint"===e&&"esriGeometryMultipoint"===a?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(a){return function(e){a.reject(e)}};a.callback=function(a,e){return function(g){try{a.apply(null,arguments)}catch(d){e.reject(d)}}};
a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.toEsriGeometryType=function(a){switch(a){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";
default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(a,e,g){return l.create(function(d,b){var c=l.resolve(!0);a.reduce(function(a,b,c,d){return a.then(function(a){try{return e(a,b,c,d)}catch(A){return l.reject(A)}},function(a){return l.reject(a)})},c).then(d,b)})};a.stableStringify=function(a,e){e||(e={});"function"===typeof e&&(e={cmp:e});var g="boolean"===typeof e.cycles?e.cycles:!1,d=e.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,
value:b[d]})}}}(e.cmp),b=[];return function q(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var e,p;if(Array.isArray(a)){p="[";for(e=0;e<a.length;e++)e&&(p+=","),p+=q(a[e])||"null";return p+"]"}if(null===a)return"null";if(-1!==b.indexOf(a)){if(g)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=b.push(a)-1,k=Object.keys(a).sort(d&&
d(a));p="";for(e=0;e<k.length;e++){var n=k[e],h=q(a[n]);h&&(p&&(p+=","),p+=JSON.stringify(n)+":"+h)}b.splice(f,1);return"{"+p+"}"}}(a)}})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.alias=null;b.defaultValue=void 0;b.domain=null;
b.editable=!0;b.length=-1;b.name=null;b.nullable=!0;b.type=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};var b;f([g.property({type:String,json:{write:!0}})],d.prototype,"alias",void 0);f([g.property({json:{write:{allowNull:!0}}})],d.prototype,"defaultValue",void 0);f([g.property({types:k.types,
json:{read:{reader:k.fromJSON},write:!0}})],d.prototype,"domain",void 0);f([g.property({type:Boolean,json:{write:!0}})],d.prototype,"editable",void 0);f([g.property({type:Number,json:{write:!0}})],d.prototype,"length",void 0);f([g.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f([g.property({type:Boolean,json:{write:!0}})],d.prototype,"nullable",void 0);f([g.property({type:String,json:{read:e.kebabDict.read,write:e.kebabDict.write}})],d.prototype,"type",void 0);return d=b=f([g.subclass("esri.layers.support.Field")],
d)}(g.declared(h))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(m,a,l,f,h,g){function k(a,d){switch(a.type){case "range":var b="range"in a?a.range[1]:a.maxValue;if(+d<("range"in a?a.range[0]:a.minValue)||+d>b)return e.VALUE_OUT_OF_RANGE;break;case "coded-value":case "codedValue":if(null==a.codedValues||a.codedValues.every(function(a){return null==a||a.code!==d}))return e.INVALID_CODED_VALUE}return null}
Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=l;a.DomainBase=f;a.InheritedDomain=h;a.RangeDomain=g;var e;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(e=a.DomainValidationError||(a.DomainValidationError={}));a.isValidDomainValue=function(a,d){return null===k(a,d)};a.validateDomainValue=k;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain}};
a.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};a.fromJSON=function(e){return e&&e.type?"range"===e.type?a.RangeDomain.fromJSON(e):"codedValue"===e.type?a.CodedValueDomain.fromJSON(e):null:null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}l(e,a);d=e;e.prototype.writeCodedValues=function(a,c){var b=null;a&&(b=a.map(function(a){return h.fixJson(h.clone(a))}));c.codedValues=b};e.prototype.getName=function(a){var b=null;if(this.codedValues){var d=String(a);this.codedValues.some(function(a){String(a.code)===d&&(b=a.name);return!!b})}return b};e.prototype.clone=function(){return new d({codedValues:h.clone(this.codedValues),
name:this.name})};var d;f([g.property({json:{write:!0}})],e.prototype,"codedValues",void 0);f([g.writer("codedValues")],e.prototype,"writeCodedValues",null);f([g.enumeration.serializable()({codedValue:"coded-value"})],e.prototype,"type",void 0);return e=d=f([g.subclass("esri.layers.support.CodedValueDomain")],e)}(g.declared(k))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k){var e=new g.default({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function d(b){b=a.call(this,b)||this;b.name=null;b.type=null;return b}l(d,a);f([k.property({json:{write:!0}})],d.prototype,"name",void 0);f([k.property({json:{read:e.read,write:e.write}})],d.prototype,"type",void 0);return d=f([k.subclass("esri.layers.support.Domain")],d)}(k.declared(h))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this,d)||this;d.type="inherited";return d}l(e,a);g=e;e.prototype.clone=function(){return new g};var g;f([h.enumeration.serializable()({inherited:"inherited"})],e.prototype,"type",void 0);return e=g=f([h.subclass("esri.layers.support.InheritedDomain")],e)}(h.declared(g))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this,d)||this;d.maxValue=null;d.minValue=null;d.type="range";return d}l(e,a);g=e;e.prototype.clone=function(){return new g({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var g;f([h.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,c){b[c]=[this.minValue,a]}}}})],e.prototype,"maxValue",void 0);f([h.property({json:{read:{source:"range",reader:function(a,
b){return b.range&&b.range[0]}},write:{target:"range",writer:function(a,b,c){b[c]=[a,this.maxValue]}}}})],e.prototype,"minValue",void 0);f([h.enumeration.serializable()({range:"range"})],e.prototype,"type",void 0);return e=g=f([h.subclass("esri.layers.support.RangeDomain")],e)}(h.declared(g))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=new l.default({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(m,a,l){function f(a,e,g){var d=
{x:0,y:0};e&&(d.z=0);g&&(d.m=0);for(var b=0,c=a[0],f=0;f<a.length;f++){var p=a[f],k;a:if(p.length!==c.length)k=!1;else{for(k=0;k<p.length;k++)if(p[k]!==c[k]){k=!1;break a}k=!0}if(!1===k){k=h(c,p,e);var n=p,w=e,l=g,C={x:(c[0]+n[0])/2,y:(c[1]+n[1])/2};w&&(C.z=(c[2]+n[2])/2);w&&l?C.m=(c[3]+n[3])/2:l&&(C.m=(c[2]+n[2])/2);c=C;c.x*=k;c.y*=k;d.x+=c.x;d.y+=c.y;e&&(c.z*=k,d.z+=c.z);g&&(c.m*=k,d.m+=c.m);b+=k;c=p}}0<b?(d.x/=b,d.y/=b,e&&(d.z/=b),g&&(d.m/=b)):(d.x=a[0][0],d.y=a[0][1],e&&(d.z=a[0][2]),g&&e?d.m=
a[0][3]:g&&(d.m=a[0][2]));return d}function h(a,e,g){var d=e[0]-a[0];a=e[1]-a[1];return g?(e=e[2]-e[2],Math.sqrt(d*d+a*a+e*e)):Math.sqrt(d*d+a*a)}function g(a,e){var g=e[0],d=e[1],b=e[2],g=g*g+d*d+b*b;0<g&&(g=1/Math.sqrt(g),a[0]=e[0]*g,a[1]=e[1]*g,a[2]=e[2]*g);return a}Object.defineProperty(a,"__esModule",{value:!0});a.centroidPolyline=function(a){for(var e={x:0,y:0,spatialReference:a.spatialReference.toJSON()},g={x:0,y:0,spatialReference:a.spatialReference.toJSON()},d=0,b=0,c=0;c<a.paths.length;c++)if(0!==
a.paths[c].length){var k;k=a.paths[c];var p=!0===a.hasZ;if(1>=k.length)k=0;else{for(var t=0,u=1;u<k.length;u++)t+=h(k[u-1],k[u],p);k=t}0===k?(p=f(a.paths[c],!0===a.hasZ,!0===a.hasM),e.x+=p.x,e.y+=p.y,!0===a.hasZ&&(e.z+=p.z),!0===a.hasM&&(e.m+=p.m),++d):(p=f(a.paths[c],!0===a.hasZ,!0===a.hasM),g.x+=p.x*k,g.y+=p.y*k,!0===a.hasZ&&(g.z+=p.z*k),!0===a.hasM&&(g.m+=p.m*k),b+=k)}return 0<b?(g.x/=b,g.y/=b,!0===a.hasZ&&(g.z/=b),!0===a.hasM&&(g.m/=b),new l(g)):0<d?(e.x/=d,e.y/=d,!0===a.hasZ&&(g.z/=d),!0===a.hasM&&
(e.m/=d),new l(e)):null};a.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var e=0,g=0,d=0,b=0,c=0;c<a.points.length;c++){var f=a.getPoint(c);!0===f.hasZ&&(d+=f.z);!0===f.hasM&&(b+=f.m);e+=f.x;g+=f.y;b+=f.m}e={x:e/a.points.length,y:g/a.points.length,spatialReference:null};e.spatialReference=a.spatialReference.toJSON();!0===a.hasZ&&(e.z=d/a.points.length);!0===a.hasM&&(e.m=b/a.points.length);return new l(e)};a.angle2D=function(a,e){var g=a.x;a=a.y;var d=e.x;e=e.y;var b=g*g+a*
a;0<b&&(b=1/Math.sqrt(b));var c=d*d+e*e;0<c&&(c=1/Math.sqrt(c));g=(g*d+a*e)*b*c;return 1<g?0:-1>g?Math.PI:180*Math.acos(g)/Math.PI};a.angleBetween2D=function(a,e,g){var d=a.x-e.x;a=a.y-e.y;var b=g.x-e.x;e=g.y-e.y;g=Math.sqrt(d*d+a*a);var c=Math.sqrt(b*b+e*e);return 180*Math.acos(d/g*(b/c)+a/g*(e/c))/Math.PI};a.angleBetween3D=function(a,e,g){var d=a.x-e.x,b=a.y-e.y;a=a.z-e.z;var c=g.x-e.x,f=g.y-e.y;e=g.z-e.z;g=Math.sqrt(d*d+b*b+a*a);var p=Math.sqrt(c*c+f*f+e*e);return 180*Math.acos(d/g*(c/p)+b/g*(f/
p)+a/g*(e/p))/Math.PI};a.angle3D=function(a,e){a=g([a.x,a.y,a.z],[a.x,a.y,a.z]);e=g([e.x,e.y,e.z],[e.x,e.y,e.z]);e=a[0]*e[0]+a[1]*e[1]+a[2]*e[2];return 1<e?0:-1>e?Math.PI:180*Math.acos(e)/Math.PI}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(m,a,l,f){function h(a,f,e){if("undefined"===typeof e||0===+e)return Math[a](f);f=+f;e=+e;if(isNaN(f)||"number"!==typeof e||0!==e%1)return NaN;f=f.toString().split("e");f=Math[a](+(f[0]+"e"+
(f[1]?+f[1]-e:-e)));f=f.toString().split("e");return+(f[0]+"e"+(f[1]?+f[1]+e:e))}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,k){function e(a,d,b){a=f.toNumber(a);return isNaN(a)?a:isNaN(d)||isNaN(b)||d>b?NaN:a<d?d:a>b?b:a}a.number=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,2);a=d[0];return f.isNumber(a)?a:null===a?0:f.isDate(a)||f.isBoolean(a)?Number(a):f.isArray(a)?NaN:""===a||void 0===a?Number(a):f.isString(a)?void 0!==d[1]?(d=f.multiReplace(d[1],
"\u2030",""),d=f.multiReplace(d,"\u00a4",""),l.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};a.abs=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.abs(f.toNumber(d[0]))})};a.acos=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.acos(f.toNumber(d[0]))})};a.asin=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.asin(f.toNumber(d[0]))})};a.atan=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.atan(f.toNumber(d[0]))})};
a.atan2=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,2,2);return Math.atan2(f.toNumber(d[0]),f.toNumber(d[1]))})};a.ceil=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,2);return 2===d.length?(a=f.toNumber(d[1]),isNaN(a)&&(a=0),h("ceil",f.toNumber(d[0]),-1*a)):Math.ceil(f.toNumber(d[0]))})};a.round=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,2);return 2===d.length?(a=f.toNumber(d[1]),isNaN(a)&&(a=0),h("round",f.toNumber(d[0]),-1*a)):Math.round(f.toNumber(d[0]))})};
a.floor=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,2);return 2===d.length?(a=f.toNumber(d[1]),isNaN(a)&&(a=0),h("floor",f.toNumber(d[0]),-1*a)):Math.floor(f.toNumber(d[0]))})};a.cos=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.cos(f.toNumber(d[0]))})};a.isnan=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.exp(f.toNumber(d[0]))})};
a.log=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.log(f.toNumber(d[0]))})};a.pow=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,2,2);return Math.pow(f.toNumber(d[0]),f.toNumber(d[1]))})};a.random=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.sin(f.toNumber(d[0]))})};a.sqrt=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.sqrt(f.toNumber(d[0]))})};
a.tan=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return Math.tan(f.toNumber(d[0]))})};a.defaultvalue=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,d){return k(a,d,function(a,c,d){f.pcCheck(d,1,1);return f.toBoolean(d[0])})};a.constrain=function(a,d){return k(a,d,function(a,
c,d){f.pcCheck(d,3,3);a=f.toNumber(d[1]);c=f.toNumber(d[2]);if(f.isArray(d[0])){var b=[],g=0;for(d=d[0];g<d.length;g++)b.push(e(d[g],a,c));return b}if(f.isImmutableArray(d[0])){b=[];for(g=0;g<d[0].length();g++)b.push(e(d[0].get(g),a,c));return b}return e(d[0],a,c)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(m,a,l,f){function h(a,k,e,n){if(1===n.length){if(l.isArray(n[0]))return f.calculateStat(a,n[0],-1);if(l.isImmutableArray(n[0]))return f.calculateStat(a,
n[0].toArray(),-1)}return f.calculateStat(a,n,-1)}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,f){a.stdev=function(a,g){return f(a,g,function(a,b,c){return h("stdev",a,b,c)})};a.variance=function(a,g){return f(a,g,function(a,b,c){return h("variance",a,b,c)})};a.average=function(a,g){return f(a,g,function(a,b,c){return h("mean",a,b,c)})};a.mean=function(a,g){return f(a,g,function(a,b,c){return h("mean",a,b,c)})};a.sum=function(a,g){return f(a,g,function(a,b,c){return h("sum",
a,b,c)})};a.min=function(a,g){return f(a,g,function(a,b,c){return h("min",a,b,c)})};a.max=function(a,g){return f(a,g,function(a,b,c){return h("max",a,b,c)})};a.distinct=function(a,g){return f(a,g,function(a,b,c){return h("distinct",a,b,c)})};a.count=function(a,g){return f(a,g,function(a,b,c){l.pcCheck(c,1,1);if(l.isArray(c[0])||l.isString(c[0]))return c[0].length;if(l.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require",
"exports","../languageUtils"],function(m,a,l){function f(a){for(var g=0,e=0;e<a.length;e++)g+=a[e];return g/a.length}function h(a){for(var g=f(a),e=0,n=0;n<a.length;n++)e+=Math.pow(g-a[n],2);return e/a.length}Object.defineProperty(a,"__esModule",{value:!0});a.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";
case "count":return"count"}return""};a.calculateStat=function(a,k,e){void 0===e&&(e=1E3);switch(a.toLowerCase()){case "distinct":a:{a=e;e=[];for(var g={},d=[],b=0;b<k.length;b++){if(void 0!==k[b]&&null!==k[b]&&k[b]!==l.voidOperation){var c=k[b];if(l.isNumber(c)||l.isString(c))void 0===g[c]&&(e.push(c),g[c]=1);else{for(var q=!1,p=0;p<d.length;p++)!0===l.equalityTest(d[p],c)&&(q=!0);!1===q&&(d.push(c),e.push(c))}}if(e.length>=a&&-1!==a){k=e;break a}}k=e}return k;case "avg":case "mean":return f(l.toNumberArray(k));
case "min":return Math.min.apply(Math,l.toNumberArray(k));case "sum":k=l.toNumberArray(k);for(e=a=0;e<k.length;e++)a+=k[e];return a;case "max":return Math.max.apply(Math,l.toNumberArray(k));case "stdev":case "stddev":return Math.sqrt(h(l.toNumberArray(k)));case "var":case "variance":return h(l.toNumberArray(k));case "count":return k.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Dictionary","../Feature","../languageUtils"],function(m,a,l,f,h){Object.defineProperty(a,
"__esModule",{value:!0});a.registerFunctions=function(a,k){a.trim=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,1);return h.toString(c[0]).trim()})};a.upper=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,1);return h.toString(c[0]).toUpperCase()})};a.proper=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===h.toString(c[1]).toLowerCase()&&(a=2);b=/\s/;c=h.toString(c[0]);for(var d="",e=!0,g=0;g<c.length;g++){var f=c[g];b.test(f)?1===a&&(e=
!0):f.toUpperCase()!==f.toLowerCase()&&(e?(f=f.toUpperCase(),e=!1):f=f.toLowerCase());d+=f}return d})};a.lower=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,1);return h.toString(c[0]).toLowerCase()})};a.guid=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,0,1);if(0<c.length)switch(h.toString(c[0]).toLowerCase()){case "digits":return h.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return h.generateUUID();case "digits-hyphen-parentheses":return"("+
h.generateUUID()+")"}return"{"+h.generateUUID()+"}"})};a.console=function(a,g){return k(a,g,function(d,b,c){0!==c.length&&(1===c.length?a.console(h.toString(c[0])):a.console(h.toString(c)));return h.voidOperation})};a.mid=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,2,3);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return h.toString(c[0]).substr(a);b=h.toNumber(c[2]);if(isNaN(b))return"";0>b&&(b=0);return h.toString(c[0]).substr(a,b)})};a.find=function(a,g){return k(a,
g,function(a,b,c){h.pcCheck(c,2,3);a=0;if(2<c.length){a=h.toNumber(h.defaultUndefined(c[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return h.toString(c[1]).indexOf(h.toString(c[0]),a)})};a.left=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,2,2);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return h.toString(c[0]).substr(0,a)})};a.right=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,2,2);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return h.toString(c[0]).substr(-1*a,a)})};a.split=
function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,2,4);a=h.toNumber(h.defaultUndefined(c[2],-1));b=h.toBoolean(h.defaultUndefined(c[3],!1));-1===a||null===a||!0===b?c=h.toString(c[0]).split(h.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),c=h.toString(c[0]).split(h.toString(c[1]),a));if(!1===b)return c;b=[];for(var d=0;d<c.length&&!(-1!==a&&b.length>=a);d++)""!==c[d]&&void 0!==c[d]&&b.push(c[d]);return b})};a.text=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,2);return h.toStringExplicit(c[0],
c[1])})};a.concatenate=function(a,g){return k(a,g,function(a,b,c){a=[];if(1>c.length)return"";if(h.isArray(c[0])){b=h.defaultUndefined(c[2],"");for(var d=0;d<c[0].length;d++)a[d]=h.toStringExplicit(c[0][d],b);return 1<c.length?a.join(c[1]):a.join("")}if(h.isImmutableArray(c[0])){b=h.defaultUndefined(c[2],"");for(d=0;d<c[0].length();d++)a[d]=h.toStringExplicit(c[0].get(d),b);return 1<c.length?a.join(c[1]):a.join("")}for(d=0;d<c.length;d++)a[d]=h.toStringExplicit(c[d]);return a.join("")})};a.reverse=
function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,1);if(h.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(h.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,3,4);a=h.toString(c[0]);b=h.toString(c[1]);var d=h.toString(c[2]);return(4===c.length?h.toBoolean(c[3]):1)?h.multiReplace(a,b,d):a.replace(b,d)})};a.domainname=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,
2,4);if(c[0]instanceof f)return c[0].domainValueLookup(h.toString(c[1]),c[2],void 0===c[3]?void 0:h.toNumber(c[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,2,4);if(c[0]instanceof f)return c[0].domainCodeLookup(h.toString(c[1]),c[2],void 0===c[3]?void 0:h.toNumber(c[3]));throw Error("Invalid Parameter");})};a.urlencode=function(a,g){return k(a,g,function(a,b,c){h.pcCheck(c,1,1);if(null===c[0])return"";if(c[0]instanceof l){a="";b=0;for(var d=
c[0].keys();b<d.length;b++){var e=d[b],g=c[0].field(e);""!==a&&(a+="\x26");a=null===g?a+(encodeURIComponent(e)+"\x3d"):a+(encodeURIComponent(e)+"\x3d"+encodeURIComponent(g))}return a}return encodeURIComponent(h.toString(c[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E){function B(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c}function F(a,b,c){try{return c(a,b,B(a,b))}catch(ua){throw ua;}}function D(a,b){try{switch(b.type){case "EmptyStatement":return n.voidOperation;case "VariableDeclarator":var c=null===b.init?null:D(a,b.init);c===n.voidOperation&&(c=null);if("Identifier"!==b.id.type)throw Error("Can only assign a regular variable");var e=b.id.name.toLowerCase();null!==
a.localScope?a.localScope[e]={value:c,valueset:!0,node:b.init}:a.globalScope[e]={value:c,valueset:!0,node:b.init};return n.voidOperation;case "VariableDeclaration":for(var p=0;p<b.declarations.length;p++)D(a,b.declarations[p]);return n.voidOperation;case "BlockStatement":var k;a:{for(var q=n.voidOperation,p=0;p<b.body.length;p++)if(q=D(a,b.body[p]),q instanceof n.ReturnResult||q===n.breakResult||q===n.continueResult){k=q;break a}k=q}return k;case "FunctionDeclaration":var t=b.id.name.toLowerCase();
a.globalScope[t]={valueset:!0,node:null,value:new g(b,a)};return n.voidOperation;case "ReturnStatement":var w;if(null===b.argument)w=new n.ReturnResult(n.voidOperation);else{var u=D(a,b.argument);w=new n.ReturnResult(u)}return w;case "IfStatement":var l;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(d.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var A=D(a,b.test);if(!0===A)l=D(a,b.consequent);else if(!1===A)l=null!==b.alternate?D(a,
b.alternate):n.voidOperation;else throw Error(d.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return l;case "ExpressionStatement":var z;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)z=D(a,b.expression);else{var C=D(a,b.expression);z=C===n.voidOperation?n.voidOperation:new n.ImplicitResult(C)}return z;case "AssignmentExpression":var m;var x=D(a,b.right),p=null,y="";if("MemberExpression"===b.left.type){p=D(a,b.left.object);!0===b.left.computed?
y=D(a,b.left.property):"Identifier"===b.left.property.type&&(y=b.left.property.name);if(n.isArray(p))if(n.isNumber(y)){0>y&&(y=p.length+y);if(0>y||y>p.length)throw Error("Assignment outside of array bounds");if(y===p.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");p[y]=H(x,b.operator,p[y],b)}else throw Error("Invalid Parameter");else if(p instanceof f){if(!1===n.isString(y))throw Error("Dictionary accessor must be a string");if(!0===p.hasField(y))p.setField(y,H(x,b.operator,p.field(y),
b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");p.setField(y,H(x,b.operator,null,b))}}else if(p instanceof h){if(!1===n.isString(y))throw Error("Feature accessor must be a string");if(!0===p.hasField(y))p.setField(y,H(x,b.operator,p.field(y),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");p.setField(y,H(x,b.operator,null,b))}}else{if(n.isImmutableArray(p))throw Error("Array is Immutable");throw Error("Invalid Parameter");}m=n.voidOperation}else if(p=b.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[p])a.localScope[p]={value:H(x,b.operator,a.localScope[p].value,b),valueset:!0,node:b.right},m=n.voidOperation;else if(void 0!==a.globalScope[p])a.globalScope[p]={value:H(x,b.operator,a.globalScope[p].value,b),valueset:!0,node:b.right},m=n.voidOperation;else throw Error("Variable not recognised");return m;case "UpdateExpression":var B;var F,p=null,y="";if("MemberExpression"===b.argument.type){p=D(a,b.argument.object);!0===b.argument.computed?y=D(a,b.argument.property):
"Identifier"===b.argument.property.type&&(y=b.argument.property.name);if(n.isArray(p))if(n.isNumber(y)){0>y&&(y=p.length+y);if(0>y||y>=p.length)throw Error("Assignment outside of array bounds");F=n.toNumber(p[y]);p[y]="++"===b.operator?F+1:F-1}else throw Error("Invalid Parameter");else if(p instanceof f){if(!1===n.isString(y))throw Error("Dictionary accessor must be a string");if(!0===p.hasField(y))F=n.toNumber(p.field(y)),p.setField(y,"++"===b.operator?F+1:F-1);else throw Error("Invalid Parameter");
}else if(p instanceof h){if(!1===n.isString(y))throw Error("Feature accessor must be a string");if(!0===p.hasField(y))F=n.toNumber(p.field(y)),p.setField(y,"++"===b.operator?F+1:F-1);else throw Error("Invalid Parameter");}else{if(n.isImmutableArray(p))throw Error("Array is Immutable");throw Error("Invalid Parameter");}B=!1===b.prefix?F:"++"===b.operator?F+1:F-1}else{p="Identifier"===b.argument.type?b.argument.name.toLowerCase():"";if(!p)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[p])F=n.toNumber(a.localScope[p].value),a.localScope[p]={value:"++"===b.operator?F+1:F-1,valueset:!0,node:b},B=!1===b.prefix?F:"++"===b.operator?F+1:F-1;else if(void 0!==a.globalScope[p])F=n.toNumber(a.globalScope[p].value),a.globalScope[p]={value:"++"===b.operator?F+1:F-1,valueset:!0,node:b},B=!1===b.prefix?F:"++"===b.operator?F+1:F-1;else throw Error("Variable not recognised");}return B;case "BreakStatement":return n.breakResult;case "ContinueStatement":return n.continueResult;case "ForStatement":null!==
b.init&&D(a,b.init);y={testResult:!0,lastAction:n.voidOperation};do b:{m=a;x=b;B=y;if(null!==x.test){B.testResult=D(m,x.test);if(!1===B.testResult)break b;if(!0!==B.testResult)throw Error(d.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}B.lastAction=D(m,x.body);B.lastAction===n.breakResult?B.testResult=!1:B.lastAction instanceof n.ReturnResult?B.testResult=!1:null!==x.update&&D(m,x.update)}while(!0===y.testResult);p=y.lastAction instanceof n.ReturnResult?y.lastAction:n.voidOperation;
return p;case "ForInStatement":return G(a,b);case "Identifier":return M(a,b);case "MemberExpression":return O(a,b);case "Literal":return b.value;case "CallExpression":return W(a,b);case "UnaryExpression":return N(a,b);case "BinaryExpression":return J(a,b);case "LogicalExpression":return R(a,b);case "ConditionalExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(p=[],y=0;y<b.elements.length;y++){var E=D(a,b.elements[y]);if(n.isFunctionParameter(E))throw Error(d.nodeErrorMessage(b,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));E===n.voidOperation?p.push(null):p.push(E)}}catch(Y){throw Y;}return p;case "ObjectExpression":p={};for(y=0;y<b.properties.length;y++){var P=D(a,b.properties[y]);if(n.isFunctionParameter(P.value))throw Error("Illegal Argument");if(!1===n.isString(P.key))throw Error("Illegal Argument");p[P.key.toString()]=P.value===n.voidOperation?null:P.value}var K=new f(p);K.immutable=!1;return K;case "Property":return{key:"Identifier"===b.key.type?b.key.name:D(a,b.key),value:D(a,
b.value)};default:throw Error(d.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Y){throw Y;}}function G(a,b){var c=D(a,b.right);"VariableDeclaration"===b.left.type&&D(a,b.left);var e=null,g="";if("VariableDeclaration"===b.left.type){var p=b.left.declarations[0].id;"Identifier"===p.type&&(g=p.name)}else"Identifier"===b.left.type&&(g=b.left.name);if(!g)throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));null!==a.localScope&&void 0!==a.localScope[g]&&(e=a.localScope[g]);null===e&&void 0!==
a.globalScope[g]&&(e=a.globalScope[g]);if(null===e)throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(n.isArray(c)||n.isString(c)){c=c.length;for(p=0;p<c;p++){e.value=p;g=D(a,b.body);if(g===n.breakResult)break;if(g instanceof n.ReturnResult)return g}return n.voidOperation}if(n.isImmutableArray(c)){for(p=0;p<c.length();p++){e.value=p;g=D(a,b.body);if(g===n.breakResult)break;if(g instanceof n.ReturnResult)return g}return n.voidOperation}if(c instanceof f||c instanceof h)for(c=c.keys(),
p=0;p<c.length;p++){e.value=c[p];g=D(a,b.body);if(g===n.breakResult)break;if(g instanceof n.ReturnResult)return g}else return n.voidOperation}function H(a,b,c,e){switch(b){case "\x3d":return a===n.voidOperation?null:a;case "/\x3d":return n.toNumber(c)/n.toNumber(a);case "*\x3d":return n.toNumber(c)*n.toNumber(a);case "-\x3d":return n.toNumber(c)-n.toNumber(a);case "+\x3d":return n.isString(c)||n.isString(a)?n.toString(c)+n.toString(a):n.toNumber(c)+n.toNumber(a);case "%\x3d":return n.toNumber(c)%
n.toNumber(a);default:throw Error(d.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function P(a,b,c,g){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(qa++,b=a.spatialReference._arcadeCacheId=qa)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&
(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(qa++,b=qa,a.cache._arcadeCacheId=b),a=new k(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==
a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(qa++,b=qa,a.cache._arcadeCacheId=b),a=new k(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(qa++,b=qa,a.cache._arcadeCacheId=b),a=new e(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(g,
"RUNTIME","PROPERTYNOTFOUND"));}function O(a,b){try{var c=D(a,b.object);if(null===c)throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(c instanceof f||c instanceof h)return c.field(b.property.name);if(c instanceof A)return P(c,b.property.name,a,b)}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var e=D(a,b.property);if(c instanceof f||c instanceof h){if(n.isString(e))return c.field(e);throw Error(d.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}if(c instanceof A){if(n.isString(e))return P(c,e,a,b);throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(n.isArray(c)){if(n.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(d.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(n.isString(c)){if(n.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(d.nodeErrorMessage(b,
"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(n.isImmutableArray(c)&&n.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length()+e);if(e>=c.length()||0>e)throw Error(d.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(e)}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(wa){throw wa;}}function N(a,b){try{var c=D(a,b.argument);if(n.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*n.toNumber(c);
if("+"===b.operator)return 1*n.toNumber(c);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*n.toNumber(c);if("+"===b.operator)return 1*n.toNumber(c);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ua){throw ua;}}function J(a,b){try{var c=[D(a,b.left),D(a,b.right)],e=c[0],g=c[1];switch(b.operator){case "\x3d\x3d":return n.equalityTest(e,g);case "!\x3d":return!n.equalityTest(e,g);case "\x3c":return n.greaterThanLessThan(e,
g,b.operator);case "\x3e":return n.greaterThanLessThan(e,g,b.operator);case "\x3c\x3d":return n.greaterThanLessThan(e,g,b.operator);case "\x3e\x3d":return n.greaterThanLessThan(e,g,b.operator);case "+":return n.isString(e)||n.isString(g)?n.toString(e)+n.toString(g):n.toNumber(e)+n.toNumber(g);case "-":return n.toNumber(e)-n.toNumber(g);case "*":return n.toNumber(e)*n.toNumber(g);case "/":return n.toNumber(e)/n.toNumber(g);case "%":return n.toNumber(e)%n.toNumber(g);default:throw Error(d.nodeErrorMessage(b,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ea){throw Ea;}}function R(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(d.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(d.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=D(a,b.left);if(n.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var e=D(a,b.right);
if(n.isBoolean(e))return e;throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=D(a,b.right);if(n.isBoolean(e))return e;throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(wa){throw wa;}}function M(a,b){var c;try{var e=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[e]){c=a.localScope[e];if(!0===c.valueset)return c.value;
c.value=D(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[e]){c=a.globalScope[e];if(!0===c.valueset)return c.value;c.value=D(a,c.node);c.valueset=!0;return c.value}throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(wa){throw wa;}}function W(a,b){try{if("Identifier"!==b.callee.type)throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];
if(c.value instanceof n.NativeFunction)return c.value.fn(a,b);if(c.value instanceof g)return ba(a,b,c.value.definition);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof n.NativeFunction)return c.value.fn(a,b);if(c.value instanceof g)return ba(a,b,c.value.definition);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(d.nodeErrorMessage(b,"RUNTIME",
"NOTFOUND"));}catch(ua){throw ua;}}function S(a){return null==a?"":n.isArray(a)||n.isImmutableArray(a)?"Array":n.isDate(a)?"Date":n.isString(a)?"String":n.isBoolean(a)?"Boolean":n.isNumber(a)?"Number":a instanceof l?"Attachment":a instanceof f?"Dictionary":a instanceof h?"Feature":a instanceof z?"Point":a instanceof y?"Polygon":a instanceof x?"Polyline":a instanceof C?"Multipoint":a instanceof w?"Extent":n.isFunctionParameter(a)?"Function":n.isFeatureSet(a)?"FeatureSet":n.isFeatureSetCollection(a)?
"FeatureSetCollection":a===n.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function L(a,b,c,d){try{var e=D(a,b.arguments[c]);if(n.equalityTest(e,d))return D(a,b.arguments[c+1]);var g=b.arguments.length-c;return 1===g?D(a,b.arguments[c]):2===g?null:3===g?D(a,b.arguments[c+2]):L(a,b,c+2,d)}catch(U){throw U;}}function Z(a,b,c,d){try{if(!0===d)return D(a,b.arguments[c+1]);if(3===b.arguments.length-c)return D(a,b.arguments[c+2]);var e=D(a,b.arguments[c+2]);if(!1===n.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return Z(a,b,c+2,e)}catch(Ea){throw Ea;}}function K(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=K(a.slice(0,d),b);a=K(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function ea(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");
for(var e=0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:c[e],valueset:!0,node:null};var g=D(b,d);if(g instanceof n.ReturnResult)return g.value;if(g===n.breakResult)throw Error("Cannot Break from a Function");if(g===n.continueResult)throw Error("Cannot Continue from a Function");return g instanceof n.ImplicitResult?g.value:g}catch(U){throw U;}}function ba(a,b,c){return F(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:
a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ea(c,b,e)})}function ma(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};
if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ea(a.definition,b,arguments)}}function sa(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var qa=0,la={};b.registerFunctions(la,F);u.registerFunctions(la,F);p.registerFunctions(la,F);c.registerFunctions(la,F);t.registerFunctions(la,F);q.registerFunctions(la,F);la["typeof"]=function(a,b){return F(a,b,function(a,b,c){n.pcCheck(c,1,1);a=S(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};
la.iif=function(a,b){try{n.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=D(a,b.arguments[0]);if(!1===n.isBoolean(c))throw Error("IF Function must have a boolean test condition");var d=D(a,b.arguments[1]),e=D(a,b.arguments[2]);return!0===c?d:e}catch(Ea){throw Ea;}};la.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return D(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=D(a,
b.arguments[0]);return L(a,b,1,c)}catch(ua){throw ua;}};la.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);if(!1===n.isBoolean(c))throw Error("WHEN needs boolean test conditions");return Z(a,b,0,c)}catch(ua){throw ua;}};la.top=function(a,b){return F(a,b,function(a,b,c){n.pcCheck(c,2,2);if(n.isArray(c[0]))return n.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,
n.toNumber(c[1]));if(n.isImmutableArray(c[0]))return n.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,n.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};la.first=function(a,b){return F(a,b,function(a,b,c){n.pcCheck(c,1,1);return n.isArray(c[0])?0===c[0].length?null:c[0][0]:n.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};la.sort=function(a,b){return F(a,b,function(a,b,c){n.pcCheck(c,1,2);a=c[0];n.isImmutableArray(a)&&(a=a.toArray());if(!1===n.isArray(a))throw Error("Illegal Argument");
if(1<c.length){if(!1===n.isFunctionParameter(c[1]))throw Error("Illegal Argument");var d=ma(c[1]);return a=K(a,function(a,b){return d(a,b)})}if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var e=S(a[b]);""!==e&&(c[e]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var e="",g;for(g in c)b++,e=g;return a=1<b||"String"===e?K(a,function(a,b){if(null===a||void 0===a||a===
n.voidOperation)return null===b||void 0===b||b===n.voidOperation?0:1;if(null===b||void 0===b||b===n.voidOperation)return-1;a=n.toString(a);b=n.toString(b);return a<b?-1:a===b?0:1}):"Number"===e?K(a,function(a,b){return a-b}):"Boolean"===e?K(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?K(a,function(a,b){return b-a}):a.slice(0)})};for(var ya in la)la[ya]={value:new n.NativeFunction(la[ya]),valueset:!0,node:null};var ja=function(){};ja.prototype=la;ja.prototype.infinity={value:Number.POSITIVE_INFINITY,
valueset:!0,node:null};ja.prototype.pi={value:Math.PI,valueset:!0,node:null};a.functionHelper={fixSpatialReference:n.fixSpatialReference,parseArguments:B,standardFunction:F};a.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:M,arcadeCustomFunctionHandler:ma},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)la[e]={value:new n.NativeFunction(b.functions[e]),valueset:!0,node:null},ja.prototype[e]=la[e];for(c=0;c<
b.signatures.length;c++)d.addFunctionDeclaration(b.signatures[c],"async")};a.executeScript=function(a,b,c){c||(c=new E({wkid:102100}));var d=b.vars,e=b.customfunctions,p=new ja;d||(d={});e||(e={});var k=new f({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1;p.textformatting={value:k,valueset:!0,node:null};for(var q in e)p[q]={value:new n.NativeFunction(e[q]),native:!0,valueset:!0,node:null};for(q in d)p[q]=d[q]&&"esri.Graphic"===d[q].declaredClass?
{value:h.createFromGraphic(d[q]),valueset:!0,node:null}:{value:d[q],valueset:!0,node:null};a=D({spatialReference:c,globalScope:p,localScope:null,console:b.console?b.console:sa,lrucache:b.lrucache,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof n.ReturnResult&&(a=a.value);a instanceof n.ImplicitResult&&(a=a.value);a===n.voidOperation&&(a=null);if(a===n.breakResult)throw Error("Cannot return BREAK");if(a===n.continueResult)throw Error("Cannot return CONTINUE");
if(a instanceof g)throw Error("Cannot return FUNCTION");if(a instanceof n.NativeFunction)throw Error("Cannot return FUNCTION");return a};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return d.findFieldLiterals(a,b)};a.validateScript=function(a,b){return d.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return d.referencesMember(a,b)};a.referencesFunction=function(a,b){return d.referencesFunction(a,b)};a.findFunctionCalls=function(a){return d.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require",
"exports","./treeAnalysis","./lib/esprima"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.parseScript=function(a,g){void 0===g&&(g=[]);a=f.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var k=l.validateLanguage(a);if(""!==k)throw Error(k);
l.findScriptDependencies(a,g);return a};a.scriptCheck=function(a,g,k,e,n){var d=[];try{var b=f.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),c=b.errors;if(0<c.length)for(var h=0;h<c.length;h++)d.push({line:c[h].lineNumber,character:c[h].column,reason:c[h].description});var p=l.checkScript(b,g,k,e,n);for(g=0;g<p.length;g++)d.push(p[g])}catch(t){try{"Unexpected token }"===t.description?(t.index=("function _() { "+a+"\n}").length-1,d.push({line:t.lineNumber,character:t.column,reason:"Unexpected end of script"})):
d.push({line:t.lineNumber,character:t.column,reason:t.description})}catch(u){}}return d};a.extractFieldLiterals=function(a,g){void 0===g&&(g=!1);return l.findFieldLiterals(a,g)};a.validateScript=function(a,g,f){return l.validateScript(a,g,f)};a.referencesMember=function(a,g){return l.referencesMember(a,g)};a.referencesFunction=function(a,g){return l.referencesFunction(a,g)}})},"esri/arcade/lib/esprima":function(){(function(m,a){"function"===typeof define&&define.amd?define(["exports"],a):"undefined"!==
typeof exports?a(exports):a(m.esprima={})})(this,function(m){function a(a,b){if(!a)throw Error("ASSERT: "+b);}function l(a){return 48<=a&&57>=a}function f(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function h(a){return 0<="01234567".indexOf(a)}function g(a){return 10===a||13===a||8232===a||8233===a}function k(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&gb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&
122>=a||48<=a&&57>=a||92===a||128<=a&&gb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function n(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function d(b,c,d,e,g){a("number"===typeof d,"Comment must have valid position");da.lastCommentStart>=d||(da.lastCommentStart=d,b={type:b,value:c},
V.range&&(b.range=[d,e]),V.loc&&(b.loc=g),V.comments.push(b),V.attachComment&&(V.leadingComments.push(b),V.trailingComments.push(b)))}function b(a){var b,c,e;b=I-a;for(c={start:{line:ga,column:I-ca-a}};I<oa;)if(e=T.charCodeAt(I),++I,g(e)){V.comments&&(a=T.slice(b+a,I-1),c.end={line:ga,column:I-ca-1},d("Line",a,b,I-1,c));13===e&&10===T.charCodeAt(I)&&++I;++ga;ca=I;return}V.comments&&(a=T.slice(b+a,I),c.end={line:ga,column:I-ca},d("Line",a,b,I,c))}function c(){var a,c;for(c=0===I;I<oa;)if(a=T.charCodeAt(I),
32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++I;else if(g(a))++I,13===a&&10===T.charCodeAt(I)&&++I,++ga,ca=I,c=!0;else if(47===a)if(a=T.charCodeAt(I+1),47===a)++I,++I,b(2),c=!0;else if(42===a){++I;++I;a:{var e=a=void 0,p=void 0,p=void 0;V.comments&&(a=I-2,e={start:{line:ga,column:I-ca-2}});for(;I<oa;)if(p=T.charCodeAt(I),g(p))13===p&&10===T.charCodeAt(I+1)&&++I,++ga,++I,ca=I,I>=oa&&M();else{if(42===
p&&47===T.charCodeAt(I+1)){++I;++I;V.comments&&(p=T.slice(a+2,I-2),e.end={line:ga,column:I-ca},d("Block",p,a,I,e));break a}++I}M()}}else break;else if(c&&45===a)if(45===T.charCodeAt(I+1)&&62===T.charCodeAt(I+2))I+=3,b(3);else break;else if(60===a)if("!--"===T.slice(I+1,I+4))++I,++I,++I,++I,b(4);else break;else break}function q(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(I<oa&&f(T[I]))c=T[I++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function p(){var a,
b;a=T.charCodeAt(I++);b=String.fromCharCode(a);92===a&&(117!==T.charCodeAt(I)&&M(),++I,(a=q("u"))&&"\\"!==a&&k(a.charCodeAt(0))||M(),b=a);for(;I<oa;){a=T.charCodeAt(I);if(!e(a))break;++I;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==T.charCodeAt(I)&&M(),++I,(a=q("u"))&&"\\"!==a&&e(a.charCodeAt(0))||M(),b+=a)}return b}function t(){var a=I,b=T.charCodeAt(I),c,d=T[I];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++I,
V.tokenize&&(40===b?V.openParenToken=V.tokens.length:123===b&&(V.openCurlyToken=V.tokens.length)),{type:Y.Punctuator,value:String.fromCharCode(b),lineNumber:ga,lineStart:ca,start:a,end:I};default:if(c=T.charCodeAt(I+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return I+=2,{type:Y.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:ga,lineStart:ca,start:a,end:I};case 33:case 61:return I+=2,61===T.charCodeAt(I)&&++I,{type:Y.Punctuator,
value:T.slice(a,I),lineNumber:ga,lineStart:ca,start:a,end:I}}}b=T.substr(I,4);if("\x3e\x3e\x3e\x3d"===b)return I+=4,{type:Y.Punctuator,value:b,lineNumber:ga,lineStart:ca,start:a,end:I};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return I+=3,{type:Y.Punctuator,value:b,lineNumber:ga,lineStart:ca,start:a,end:I};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return I+=2,{type:Y.Punctuator,value:b,lineNumber:ga,lineStart:ca,start:a,end:I};
if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++I,{type:Y.Punctuator,value:d,lineNumber:ga,lineStart:ca,start:a,end:I};M()}function u(){var b,c,d;d=T[I];a(l(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");c=I;b="";if("."!==d){b=T[I++];d=T[I];if("0"===b){if("x"===d||"X"===d){++I;for(b="";I<oa&&f(T[I]);)b+=T[I++];0===b.length&&M();k(T.charCodeAt(I))&&M();return{type:Y.NumericLiteral,value:parseInt("0x"+b,16),lineNumber:ga,lineStart:ca,start:c,end:I}}if("b"===
d||"B"===d){++I;for(d="";I<oa;){b=T[I];if("0"!==b&&"1"!==b)break;d+=T[I++]}0===d.length&&M();I<oa&&(b=T.charCodeAt(I),(k(b)||l(b))&&M());return{type:Y.NumericLiteral,value:parseInt(d,2),lineNumber:ga,lineStart:ca,start:c,end:I}}if("o"===d||"O"===d){h(d)?(d=!0,b="0"+T[I++]):(d=!1,++I,b="");for(;I<oa&&h(T[I]);)b+=T[I++];d||0!==b.length||M();(k(T.charCodeAt(I))||l(T.charCodeAt(I)))&&M();return{type:Y.NumericLiteral,value:parseInt(b,8),octal:d,lineNumber:ga,lineStart:ca,start:c,end:I}}}for(;l(T.charCodeAt(I));)b+=
T[I++];d=T[I]}if("."===d){for(b+=T[I++];l(T.charCodeAt(I));)b+=T[I++];d=T[I]}if("e"===d||"E"===d){b+=T[I++];d=T[I];if("+"===d||"-"===d)b+=T[I++];if(l(T.charCodeAt(I)))for(;l(T.charCodeAt(I));)b+=T[I++];else M()}k(T.charCodeAt(I))&&M();return{type:Y.NumericLiteral,value:parseFloat(b),lineNumber:ga,lineStart:ca,start:c,end:I}}function w(){aa=null;c();N("Regular Expression language structures not supported")}function A(){c();w()}function C(){var a;a=V.tokens[V.tokens.length-1];if(!a)return A();if("Punctuator"===
a.type){if("]"===a.value)return t();if(")"===a.value)return a=V.tokens[V.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?t():A();if("}"===a.value){if(V.tokens[V.openCurlyToken-3]&&"Keyword"===V.tokens[V.openCurlyToken-3].type){if(a=V.tokens[V.openCurlyToken-4],!a)return t()}else if(V.tokens[V.openCurlyToken-4]&&"Keyword"===V.tokens[V.openCurlyToken-4].type){if(a=V.tokens[V.openCurlyToken-
5],!a)return A()}else return t();if(0<=yb.indexOf(a.value))return t()}return A()}return"Keyword"===a.type&&"this"!==a.value?A():t()}function z(){var b;c();if(I>=oa)return{type:Y.EOF,lineNumber:ga,lineStart:ca,start:I,end:I};b=T.charCodeAt(I);if(k(b)){var d;b=I;if(92===T.charCodeAt(I))d=p();else a:{var w;for(d=I++;I<oa;){w=T.charCodeAt(I);if(92===w){I=d;d=p();break a}if(e(w))++I;else break}d=T.slice(d,I)}return{type:1===d.length?Y.Identifier:n(d)?Y.Keyword:"null"===d.toLowerCase()?Y.NullLiteral:"true"===
d.toLowerCase()||"false"===d.toLowerCase()?Y.BooleanLiteral:Y.Identifier,value:d,lineNumber:ga,lineStart:ca,start:b,end:I}}if(40===b||41===b||59===b)return t();if(39===b||34===b){var A="",z,m,y;w=!1;var x,D;x=ga;D=ca;b=T[I];a("'"===b||'"'===b,"String literal must starts with a quote");d=I;for(++I;I<oa;)if(z=T[I++],z===b){b="";break}else if("\\"===z)if((z=T[I++])&&g(z.charCodeAt(0)))++ga,"\r"===z&&"\n"===T[I]&&++I,ca=I;else switch(z){case "u":case "x":if("{"===T[I]){++I;m=z=void 0;z=T[I];m=0;for("}"===
z&&M();I<oa;){z=T[I++];if(!f(z))break;m=16*m+"0123456789abcdef".indexOf(z.toLowerCase())}(1114111<m||"}"!==z)&&M();z=65535>=m?String.fromCharCode(m):String.fromCharCode((m-65536>>10)+55296,(m-65536&1023)+56320);A+=z}else y=I,(m=q(z))?A+=m:(I=y,A+=z);break;case "n":A+="\n";break;case "r":A+="\r";break;case "t":A+="\t";break;case "b":A+="\b";break;case "f":A+="\f";break;case "v":A+="\x0B";break;default:h(z)?(m="01234567".indexOf(z),0!==m&&(w=!0),I<oa&&h(T[I])&&(w=!0,m=8*m+"01234567".indexOf(T[I++]),
0<="0123".indexOf(z)&&I<oa&&h(T[I])&&(m=8*m+"01234567".indexOf(T[I++]))),A+=String.fromCharCode(m)):A+=z}else if(g(z.charCodeAt(0)))break;else A+=z;""!==b&&M();return{type:Y.StringLiteral,value:A,octal:w,startLineNumber:x,startLineStart:D,lineNumber:ga,lineStart:ca,start:d,end:I}}return 46===b?l(T.charCodeAt(I+1))?u():t():l(b)?u():V.tokenize&&47===b?C():t()}function y(){var a,b,d;c();a={start:{line:ga,column:I-ca}};b=z();a.end={line:ga,column:I-ca};b.type!==Y.EOF&&(d=T.slice(b.start,b.end),a={type:La[b.type],
value:d,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),V.tokens.push(a));return b}function x(){var a;a=aa;I=a.end;ga=a.lineNumber;ca=a.lineStart;aa="undefined"!==typeof V.tokens?y():z();I=a.end;ga=a.lineNumber;ca=a.lineStart;return a}function E(){var a,b,c;a=I;b=ga;c=ca;aa="undefined"!==typeof V.tokens?y():z();I=a;ga=b;ca=c}function B(){this.line=ga;this.column=I-ca}function F(){this.start=new B;this.end=null}function D(a){this.start=a.type===Y.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function G(){I=aa.start;aa.type===Y.StringLiteral?(ga=aa.startLineNumber,ca=aa.startLineStart):(ga=aa.lineNumber,ca=aa.lineStart);V.range&&(this.range=[I,0]);V.loc&&(this.loc=new F)}function H(a){V.range&&(this.range=[a.start,0]);V.loc&&(this.loc=new D(a))}function P(){var a,b,d,e;a=I;b=ga;d=ca;c();e=ga!==b;I=a;ga=b;ca=d;return e}function O(a,b,c){var d=Error("Line "+a+": "+c);d.index=
b;d.lineNumber=a;d.column=b-ca+1;d.description=c;return d}function N(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});throw O(ga,I,d);}function J(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});d=O(ga,I,d);if(V.errors)V.errors.push(d);else throw d;}function R(a,b){var c=ka.UnexpectedToken;a&&
(c=b?b:a.type===Y.EOF?ka.UnexpectedEOS:a.type===Y.Identifier?ka.UnexpectedIdentifier:a.type===Y.NumericLiteral?ka.UnexpectedNumber:a.type===Y.StringLiteral?ka.UnexpectedString:ka.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?O(a.lineNumber,a.start,c):O(ga,I,c)}function M(a,b){throw R(a,b);}function W(a,b){a=R(a,b);if(V.errors)V.errors.push(a);else throw a;}function S(a){var b=x();b.type===Y.Punctuator&&b.value===a||M(b)}function L(){var a;V.errors?
(a=aa,a.type===Y.Punctuator&&","===a.value?x():a.type===Y.Punctuator&&";"===a.value?(x(),W(a)):W(a,ka.UnexpectedToken)):S(",")}function Z(a){var b=x();b.type===Y.Keyword&&b.value.toLowerCase()===a.toLowerCase()||M(b)}function K(a){return aa.type===Y.Punctuator&&aa.value===a}function ea(a){return aa.type===Y.Keyword&&aa.value.toLowerCase()===a.toLowerCase()}function ba(){var a;59===T.charCodeAt(I)||K(";")?x():(a=ga,c(),ga===a&&(aa.type===Y.EOF||K("}")||M(aa)))}function ma(a){return a.type===fa.Identifier||
a.type===fa.MemberExpression}function sa(a,b){var c,d=new G;b=na;c=Ta();na=b;return d.finishFunctionExpression(null,a,[],c)}function qa(){var a,b;a=na;na=!0;b=Oa();b=sa(b.params);na=a;return b}function la(){var a,b=new G;a=x();return a.type===Y.StringLiteral||a.type===Y.NumericLiteral?(na&&a.octal&&W(a,ka.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ya(){var a,b,c,d=new G;a=aa;if(a.type===Y.Identifier)return b=la(),"get"!==a.value||K(":")||K("(")?"set"!==a.value||K(":")||
K("(")?K(":")?(x(),a=r(),d.finishProperty("init",b,a,!1,!1)):K("(")?(a=qa(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=la(),S("("),a=aa,a.type!==Y.Identifier?(S(")"),W(a),a=sa([])):(c=[Ma()],S(")"),a=sa(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=la(),S("("),S(")"),a=sa([]),d.finishProperty("get",b,a,!1,!1));if(a.type===Y.EOF||a.type===Y.Punctuator)M(a);else{b=la();if(K(":"))return x(),a=r(),d.finishProperty("init",b,a,!1,!1);if(K("("))return a=qa(),d.finishProperty("init",
b,a,!0,!1);M(x())}}function ja(a){var b=[],c,d,e={},g=String,p=new G;for(!0!==a&&S("{");!K("}");)a=ya(),c=a.key.type===fa.Identifier?a.key.name:g(a.key.value),d="init"===a.kind?Wa.Data:"get"===a.kind?Wa.Get:Wa.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===Wa.Data?na&&d===Wa.Data?J(ka.StrictDuplicateProperty):d!==Wa.Data&&J(ka.AccessorDataProperty):d===Wa.Data?J(ka.AccessorDataProperty):e[c]&d&&J(ka.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),K("}")||L();S("}");return p.finishObjectExpression(b)}
function Pa(){var a,b,c,d;if(K("("))return S("("),K(")")?(x(),b=bb.ArrowParameterPlaceHolder):(++da.parenthesisCount,b=Fa(),S(")")),b;if(K("[")){b=[];var e=new G;for(S("[");!K("]");)K(",")?(x(),b.push(null)):(b.push(r()),K("]")||S(","));x();return e.finishArrayExpression(b)}if(K("{"))return ja();a=aa.type;d=new G;if(a===Y.Identifier)c=d.finishIdentifier(x().value);else if(a===Y.StringLiteral||a===Y.NumericLiteral)na&&aa.octal&&W(aa,ka.StrictOctalLiteral),c=d.finishLiteral(x());else if(a===Y.Keyword){if(ea("function")){d=
null;var g;c=[];var p=[],f,k=new G;Z("function");K("(")||(d=Ma());g=Oa(b);c=g.params;p=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(e=g.message);f=na;g=Ta();na&&b&&M(b,e);na&&a&&W(a,e);na=f;return k.finishFunctionExpression(d,c,p,g)}ea("this")?(x(),c=d.finishThisExpression()):M(x())}else a===Y.BooleanLiteral?(b=x(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===Y.NullLiteral?(b=x(),b.value=null,c=d.finishLiteral(b)):K("/")||K("/\x3d")?(c="undefined"!==typeof V.tokens?
d.finishLiteral(A()):d.finishLiteral(w()),E()):M(x());return c}function xa(){var a=[];S("(");if(!K(")"))for(;I<oa;){a.push(r());if(K(")"))break;L()}S(")");return a}function Xa(){S(".");var a,b=new G;a=x();a.type===Y.Identifier||a.type===Y.Keyword||a.type===Y.BooleanLiteral||a.type===Y.NullLiteral||M(a);return b.finishIdentifier(a.value)}function ua(){var a;S("[");a=Fa();S("]");return a}function wa(){var b,c,d=new G;Z("new");var e;a(da.allowIn,"callee of new expression always allow in keyword.");e=
aa;for(b=ea("new")?wa():Pa();;)if(K("["))c=ua(),b=(new H(e)).finishMemberExpression("[",b,c);else if(K("."))c=Xa(),b=(new H(e)).finishMemberExpression(".",b,c);else break;c=K("(")?xa():[];return d.finishNewExpression(b,c)}function Ea(){var a,b,c=aa,d,e=da.allowIn;b=aa;da.allowIn=!0;for(a=ea("new")?wa():Pa();;)if(K("."))d=Xa(),a=(new H(b)).finishMemberExpression(".",a,d);else if(K("("))d=xa(),a=(new H(b)).finishCallExpression(a,d);else if(K("["))d=ua(),a=(new H(b)).finishMemberExpression("[",a,d);
else break;da.allowIn=e;aa.type!==Y.Punctuator||!K("++")&&!K("--")||P()||(ma(a)||J(ka.InvalidLHSInAssignment),b=x(),a=(new H(c)).finishPostfixExpression(b.value,a));return a}function U(){var a,b,c;aa.type!==Y.Punctuator&&aa.type!==Y.Keyword?b=Ea():K("++")||K("--")?(c=aa,a=x(),b=U(),ma(b)||J(ka.InvalidLHSInAssignment),b=(new H(c)).finishUnaryExpression(a.value,b)):K("+")||K("-")||K("~")||K("!")?(c=aa,a=x(),b=U(),b=(new H(c)).finishUnaryExpression(a.value,b)):ea("delete")||ea("void")||ea("typeof")?
(c=aa,a=x(),b=U(),b=(new H(c)).finishUnaryExpression(a.value,b),na&&"delete"===b.operator&&b.argument.type===fa.Identifier&&J(ka.StrictDelete)):b=Ea();return b}function Da(a,b){var c=0;if(a.type!==Y.Punctuator&&a.type!==Y.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=
7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Aa(){var a,b,c,d,e,g;a=aa;b=U();if(b===bb.ArrowParameterPlaceHolder)return b;c=aa;d=Da(c,da.allowIn);if(0===d)return b;c.prec=d;x();a=[a,aa];g=U();for(e=[b,c,g];0<(d=Da(aa,da.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)g=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new H(a[a.length-1])).finishBinaryExpression(c,b,g),e.push(b);
c=x();c.prec=d;e.push(c);a.push(aa);b=U();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new H(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Sa(a){var b,c,d,e,g,p,f;e=[];g=[];p=0;f={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===fa.Identifier)e.push(d),g.push(null),Na(f,d,d.name);else if(d.type===fa.AssignmentExpression)e.push(d.left),g.push(d.right),++p,Na(f,d.left,d.left.name);else return null;f.message===ka.StrictParamDupe&&(a=na?f.stricted:f.firstRestricted,
M(a,f.message));0===p&&(g=[]);return{params:e,defaults:g,rest:null,stricted:f.stricted,firstRestricted:f.firstRestricted,message:f.message}}function r(){var a,b,c,d,e;a=da.parenthesisCount;b=e=aa;var g,p;p=aa;c=Aa();c!==bb.ArrowParameterPlaceHolder&&K("?")&&(x(),g=da.allowIn,da.allowIn=!0,b=r(),da.allowIn=g,S(":"),g=r(),c=(new H(p)).finishConditionalExpression(c,b,g));if(c===bb.ArrowParameterPlaceHolder||K("\x3d\x3e"))if(da.parenthesisCount===a||da.parenthesisCount===a+1)if(c.type===fa.Identifier?
d=Sa([c]):c.type===fa.AssignmentExpression?d=Sa([c]):c.type===fa.SequenceExpression?d=Sa(c.expressions):c===bb.ArrowParameterPlaceHolder&&(d=Sa([])),d)return a=d,e=new H(e),S("\x3d\x3e"),d=na,c=K("{")?Ta():r(),na&&a.firstRestricted&&M(a.firstRestricted,a.message),na&&a.stricted&&W(a.stricted,a.message),na=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==fa.BlockStatement);aa.type!==Y.Punctuator?a=!1:(a=aa.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(ma(c)||J(ka.InvalidLHSInAssignment),b=x(),a=r(),c=(new H(e)).finishAssignmentExpression(b.value,c,a));return c}function Fa(){var a,b=aa;a=r();if(K(",")){for(a=[a];I<oa&&K(",");)x(),a.push(r());a=(new H(b)).finishSequenceExpression(a)}return a}function Ma(){var a,b=new G;a=x();a.type!==Y.Identifier&&M(a);return b.finishIdentifier(a.value)}function mb(a){var b=null,c,d=new G;c=Ma();"const"===
a?(S("\x3d"),b=r()):K("\x3d")&&(x(),b=r());return d.finishVariableDeclarator(c,b)}function Db(a){var b=[];do{b.push(mb(a));if(!K(","))break;x()}while(I<oa);return b}function Ha(a){var b=aa.type,c,d;b===Y.EOF&&M(aa);if(b===Y.Punctuator&&"{"===aa.value){if(a){S("{");var e=aa;a=I;c=ga;d=ca;x();b=K(":");aa=e;I=a;ga=c;ca=d;if((aa.type===Y.Identifier||aa.type===Y.StringLiteral)&&b)return ja(!0);a=new G;for(c=[];I<oa&&!K("}");){d=Ua();if("undefined"===typeof d)break;c.push(d)}S("}");return a.finishBlockStatement(c)}return ja()}a=
new G;if(b===Y.Punctuator)switch(aa.value){case ";":return a=new G,S(";"),a.finishEmptyStatement();case "(":return c=Fa(),ba(),a.finishExpressionStatement(c)}else if(b===Y.Keyword)switch(aa.value.toLowerCase()){case "break":return c=null,Z("break"),59===T.charCodeAt(I)?(x(),da.inIteration||da.inSwitch||N(ka.IllegalBreak),a=a.finishBreakStatement(null)):P()?(da.inIteration||da.inSwitch||N(ka.IllegalBreak),a=a.finishBreakStatement(null)):(aa.type===Y.Identifier&&(c=Ma(),d="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,
d)||N(ka.UnknownLabel,c.name)),ba(),null!==c||da.inIteration||da.inSwitch||N(ka.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,Z("continue"),59===T.charCodeAt(I)?(x(),da.inIteration||N(ka.IllegalContinue),a=a.finishContinueStatement(null)):P()?(da.inIteration||N(ka.IllegalContinue),a=a.finishContinueStatement(null)):(aa.type===Y.Identifier&&(c=Ma(),d="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,d)||N(ka.UnknownLabel,c.name)),ba(),null!==c||da.inIteration||
N(ka.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var g,p,f;p=da.allowIn;g=b=e=null;Z("for");S("(");if(K(";"))x();else{if(ea("var")){da.allowIn=!1;var n=new G;g=x();f=Db();g=n.finishVariableDeclaration(f,g.value);da.allowIn=p;1===g.declarations.length&&ea("in")&&(x(),c=g,d=Fa(),g=null)}else da.allowIn=!1,g=Fa(),da.allowIn=p,ea("in")&&(ma(g)||J(ka.InvalidLHSInForIn),x(),c=g,d=Fa(),g=null);"undefined"===typeof c&&S(";")}"undefined"===typeof c&&(K(";")||(b=Fa()),S(";"),K(")")||(e=Fa()));
S(")");f=da.inIteration;da.inIteration=!0;p=Ha(!0);da.inIteration=f;return"undefined"===typeof c?a.finishForStatement(g,b,e,p):a.finishForInStatement(c,d,p);case "function":return ib(a);case "if":return Z("if"),S("("),c=Fa(),S(")"),d=Ha(!0),ea("else")?(x(),b=Ha(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,Z("return"),da.inFunctionBody||J(ka.IllegalReturn),32===T.charCodeAt(I)&&k(T.charCodeAt(I+1))?(c=Fa(),ba(),a=a.finishReturnStatement(c)):P()?a=a.finishReturnStatement(null):
(K(";")||K("}")||aa.type===Y.EOF||(c=Fa()),ba(),a=a.finishReturnStatement(c)),a;case "var":return Z("var"),c=Db(),ba(),a.finishVariableDeclaration(c,"var")}c=Fa();if(c.type===fa.Identifier&&K(":"))return x(),b="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,b)&&N(ka.Redeclaration,"Label",c.name),da.labelSet[b]=!0,d=Ha(!1),delete da.labelSet[b],a.finishLabeledStatement(c,d);ba();return a.finishExpressionStatement(c)}function Ta(){var a,b=[],c,d,e,g,p,f=new G;for(S("{");I<oa&&aa.type===
Y.StringLiteral;){c=aa;a=Ua();b.push(a);if(a.expression.type!==fa.Literal)break;a=T.slice(c.start+1,c.end-1);"use strict"===a?(na=!0,d&&W(d,ka.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=da.labelSet;d=da.inIteration;e=da.inSwitch;g=da.inFunctionBody;p=da.parenthesizedCount;da.labelSet={};da.inIteration=!1;da.inSwitch=!1;da.inFunctionBody=!0;for(da.parenthesizedCount=0;I<oa&&!K("}");){a=Ua();if("undefined"===typeof a)break;b.push(a)}S("}");da.labelSet=c;da.inIteration=d;da.inSwitch=e;da.inFunctionBody=
g;da.parenthesizedCount=p;return f.finishBlockStatement(b)}function Na(a,b,c){c="$"+c;na?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ka.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ka.StrictParamDupe);a.paramSet[c]=!0}function Oa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};S("(");if(!K(")"))for(a.paramSet={};I<oa;){var b=a,c=void 0,d=void 0,e=void 0,c=aa,d=Ma();Na(b,c,c.value);
K("\x3d")&&(x(),e=r(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(K(")"))break;S(",")}S(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function ib(){var a,b=[],c=[],d,e,g,p,f,k=new G;Z("function");a=Ma();d=Oa(g);b=d.params;c=d.defaults;e=d.stricted;g=d.firstRestricted;d.message&&(p=d.message);f=na;d=Ta();na&&g&&M(g,p);na&&e&&W(e,p);na=f;return k.finishFunctionDeclaration(a,b,
c,d)}function Ua(){if(aa.type===Y.Keyword)return"function"===aa.value.toLowerCase()?ib():Ha(!1);if(aa.type!==Y.EOF)return Ha(!1)}function Va(){var a,b,c,d=[];for(a=0;a<V.tokens.length;++a)b=V.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),V.range&&(c.range=b.range),V.loc&&(c.loc=b.loc),d.push(c);V.tokens=d}var Y,La,yb,fa,bb,Wa,ka,gb,T,na,I,ga,ca,oa,aa,da,V;Y={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,
StringLiteral:8,RegularExpression:9};La={};La[Y.BooleanLiteral]="Boolean";La[Y.EOF]="\x3cend\x3e";La[Y.Identifier]="Identifier";La[Y.Keyword]="Keyword";La[Y.NullLiteral]="Null";La[Y.NumericLiteral]="Numeric";La[Y.Punctuator]="Punctuator";La[Y.StringLiteral]="String";La[Y.RegularExpression]="RegularExpression";yb="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
fa={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};bb={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Wa={Data:1,Get:2,Set:4};ka={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};gb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
H.prototype=G.prototype={processComment:function(){var a,b,c,d=V.bottomRightStack,e,g,p=d[d.length-1];if(!(this.type===fa.Program&&0<this.body.length)){if(0<V.trailingComments.length){c=[];for(e=V.trailingComments.length-1;0<=e;--e)g=V.trailingComments[e],g.range[0]>=this.range[1]&&(c.unshift(g),V.trailingComments.splice(e,1));V.trailingComments=[]}else p&&p.trailingComments&&p.trailingComments[0].range[0]>=this.range[1]&&(c=p.trailingComments,delete p.trailingComments);if(p)for(;p&&p.range[0]>=this.range[0];)a=
p,p=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<V.leadingComments.length)for(b=[],e=V.leadingComments.length-1;0<=e;--e)g=V.leadingComments[e],g.range[1]<=this.range[0]&&(b.unshift(g),V.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){V.range&&(this.range[1]=I);V.loc&&(this.loc.end=
new B,V.source&&(this.loc.source=V.source));V.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=fa.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=fa.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?fa.LogicalExpression:fa.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=fa.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=fa.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=fa.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=fa.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
fa.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=fa.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=fa.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=fa.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=fa.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=fa.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=fa.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=fa.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=fa.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=fa.Literal;this.value=a.value;this.raw=T.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=fa.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
fa.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=fa.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=fa.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=fa.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=fa.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?fa.UpdateExpression:fa.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=fa.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=fa.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};m.version="2.0.0-dev";m.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));T=a;I=0;ga=0<T.length?1:0;ca=0;oa=T.length;aa=null;da={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};V={};b=b||{};b.tokens=!0;V.tokens=[];V.tokenize=!0;V.openParenToken=-1;V.openCurlyToken=-1;V.range="boolean"===typeof b.range&&b.range;V.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(V.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(V.errors=
[]);try{E();if(aa.type===Y.EOF)return V.tokens;for(x();aa.type!==Y.EOF;)try{x()}catch(qb){if(V.errors){V.errors.push(qb);break}else throw qb;}Va();d=V.tokens;"undefined"!==typeof V.comments&&(d.comments=V.comments);"undefined"!==typeof V.errors&&(d.errors=V.errors)}catch(qb){throw qb;}finally{V={}}return d};m.parse=function(a,b){var d,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));T=a;I=0;ga=0<T.length?1:0;ca=0;oa=T.length;aa=null;da={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};V={};"undefined"!==typeof b&&(V.range="boolean"===typeof b.range&&b.range,V.loc="boolean"===typeof b.loc&&b.loc,V.attachComment="boolean"===typeof b.attachComment&&b.attachComment,V.loc&&null!==b.source&&void 0!==b.source&&(V.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(V.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(V.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(V.errors=[]),V.attachComment&&(V.range=!0,V.comments=
[],V.bottomRightStack=[],V.trailingComments=[],V.leadingComments=[]));try{var g;c();E();g=new G;na=!1;var p;a=[];for(var f,k,n;I<oa;){f=aa;if(f.type!==Y.StringLiteral)break;p=Ua();a.push(p);if(p.expression.type!==fa.Literal)break;k=T.slice(f.start+1,f.end-1);"use strict"===k?(na=!0,n&&W(n,ka.StrictOctalLiteral)):!n&&f.octal&&(n=f)}for(;I<oa;){p=Ua();if("undefined"===typeof p)break;a.push(p)}d=g.finishProgram(a);"undefined"!==typeof V.comments&&(d.comments=V.comments);"undefined"!==typeof V.tokens&&
(Va(),d.tokens=V.tokens);"undefined"!==typeof V.errors&&(d.errors=V.errors)}catch(Bb){throw Bb;}finally{V={}}return d};m.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in fa)fa.hasOwnProperty(a)&&(b[a]=fa[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports","../../support/utils","./utils"],function(m,a,l,f){function h(a){return a&&"esri.renderers.visualVariables.SizeVariable"===
a.declaredClass}function g(a){return null!=a&&!isNaN(a)&&isFinite(a)}function k(a){return a.valueExpression?"expression":a.field&&"string"===typeof a.field?"field":"unknown"}function e(a,c,d){return null==a?null:h(a)?a.getSize(c,d):g(a)?a:null}function n(a,c,d){return g(d)&&a>d?d:g(c)&&a<c?c:a}Object.defineProperty(a,"__esModule",{value:!0});var d=Math.PI;a.isSizeVariable=h;a.isValidNumber=g;a.getInputValueType=k;a.getTransformationType=function(a,c){return"unknown"===(c||k(a))?"constant":a.stops?
"stops":null!=a.minSize&&null!=a.maxSize&&null!=a.minDataValue&&null!=a.maxDataValue?"clamped-linear":"unknown"===(a.valueUnit||"unknown")?null!=a.minSize&&null!=a.minDataValue?a.minSize&&a.minDataValue?"proportional":"additive":"identity":"real-world-size"};a.getSizeFromNumberOrVariable=e;a.getSizeForValue=function(a,c,g,p,k){switch(c.transformationType){case "additive":return p=e(c.minSize,g,p),a+(p||c.minDataValue);case "constant":return a=(a=c.stops)&&a.length&&a[0].size,null==a&&(a=c.minSize),
e(a,g,p);case "clamped-linear":k=(a-c.minDataValue)/(c.maxDataValue-c.minDataValue);var b=e(c.minSize,g,p);g=e(c.maxSize,g,p);p=p&&p.shape;a<=c.minDataValue?c=b:a>=c.maxDataValue?c=g:"area"===c.scaleBy&&p?(p=(c="circle"===p)?d*Math.pow(b/2,2):b*b,p+=k*((c?d*Math.pow(g/2,2):g*g)-p),c=c?2*Math.sqrt(p/d):Math.sqrt(p)):c=b+k*(g-b);return c;case "proportional":return k=p&&p.shape,a/=c.minDataValue,b=e(c.minSize,g,p),c=e(c.maxSize,g,p),p=null,p="circle"===k?2*Math.sqrt(a*Math.pow(b/2,2)):"square"===k||
"diamond"===k||"image"===k?Math.sqrt(a*Math.pow(b,2)):a*b,n(p,b,c);case "stops":return k=f.lookupData(a,k),b=k[0],a=k[1],k=k[2],b===a?c=e(c.stops[b].size,g,p):(b=e(c.stops[b].size,g,p),c=e(c.stops[a].size,g,p),c=b+(c-b)*k),c;case "real-world-size":return k=(p&&p.resolution?p.resolution:1)*l.meterIn[c.valueUnit],b=e(c.minSize,g,p),p=e(c.maxSize,g,p),c=c.valueRepresentation,g=null,g="area"===c?2*Math.sqrt(a/d)/k:"radius"===c||"distance"===c?2*a/k:a/k,n(g,b,p);case "identity":return a;case "unknown":return null}}})},
"esri/renderers/support/utils":function(){define("dojo/date/locale ../../Color ../../core/lang ../../core/numberUtils ../../core/unitUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(m,a,l,f,h,g){function k(a,b,c){var d="";0===b?d=n.lt+" ":b===c&&(d=n.gt+" ");return d+a}var e={},n={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},d={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},b={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},
second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},c={formatLength:"short",fullYear:!0},q={formatLength:"short"};l.mixin(e,{meterIn:{inches:h.convertUnit(1,
"meters","inches"),feet:h.convertUnit(1,"meters","feet"),"us-feet":h.convertUnit(1,"meters","us-feet"),yards:h.convertUnit(1,"meters","yards"),miles:h.convertUnit(1,"meters","miles"),"nautical-miles":h.convertUnit(1,"meters","nautical-miles"),millimeters:h.convertUnit(1,"meters","millimeters"),centimeters:h.convertUnit(1,"meters","centimeters"),decimeters:h.convertUnit(1,"meters","decimeters"),meters:h.convertUnit(1,"meters","meters"),kilometers:h.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/
h.lengthToDegrees(1,"meters")},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var d=[];null==a||a instanceof Date||(a=new Date(a));b=b||{};b=l.mixin({},b);var e=b.selector?b.selector.toLowerCase():null,p=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");p&&(b.timeOptions=b.timeOptions||q,b.timeOptions&&(b.timeOptions=l.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",d.push(b.timeOptions)));e&&(b.dateOptions=
b.dateOptions||c,b.dateOptions&&(b.dateOptions=l.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",d.push(b.dateOptions)));d&&d.length?(d=d.map(function(b){return m.format(a,b)}),b=1==d.length?d[0]:g["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return d[b]})):b=m.format(a);return b},createColorStops:function(a){var b=a.values,c=a.colors,d=a.labelIndexes,g=a.isDate,p=a.dateFormatOptions;a=[];return a=b.map(function(a,n){var h=null;if(!d||
-1<d.indexOf(n)){var q;(q=g?e.formatDate(a,p):f.format(a))&&(h=k(q,n,b.length-1))}return{value:a,color:c[n],label:h}})},updateColorStops:function(a){var b=a.stops,c=a.changes,d=a.isDate,g=a.dateFormatOptions,p=[],n,h=b.map(function(a){return a.value});c.forEach(function(a){p.push(a.index);h[a.index]=a.value});n=f.round(h,{indexes:p});b.forEach(function(a,c){a.value=h[c];if(null!=a.label){var p,q=null;(p=d?e.formatDate(n[c],g):f.format(n[c]))&&(q=k(p,c,b.length-1));a.label=q}})},createClassBreakLabel:function(a){var b=
a.minValue,c=a.maxValue,d=a.isFirstBreak?"":n.gt+" ";a="percent-of-total"===a.normalizationType?n.pct:"";b=null==b?"":f.format(b);c=null==c?"":f.format(c);return d+b+a+" "+n.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,d=a.normalizationType,g=[];b&&b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(g.push(b[0].minValue),b.forEach(function(a){g.push(a.maxValue)}),
g=f.round(g),b.forEach(function(a,b){a.label=e.createClassBreakLabel({minValue:0===b?g[0]:g[b],maxValue:g[b+1],isFirstBreak:0===b,normalizationType:d})})):b.forEach(function(a,b){a.label=e.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:d})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,g=d.index,d=d.value,p=-1,f=-1,k=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):
(0===g?p=g:g===k?f=g-1:(f=g-1,p=g),-1<p&&p<k&&(a=b[p],a.minValue=d,a.label=e.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===p,normalizationType:c})),-1<f&&f<k&&(a=b[f],a.maxValue=d,a.label=e.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===f,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,e=a.length,g,p,f,k,n,h,q=Infinity,l;a=a.map(function(a){return new Date(a)});for(b=0;b<e-1;b++){g=a[b];f=[];n=Infinity;h="";
for(c=b+1;c<e;c++)p=a[c],p=g.getFullYear()!==p.getFullYear()&&"year"||g.getMonth()!==p.getMonth()&&"month"||g.getDate()!==p.getDate()&&"day"||g.getHours()!==p.getHours()&&"hour"||g.getMinutes()!==p.getMinutes()&&"minute"||g.getSeconds()!==p.getSeconds()&&"second"||"millisecond",k=d[p],k<n&&(n=k,h=p),f.push(p);n<q&&(q=n,l=h)}return l},createUniqueValueLabel:function(a){var c=a.value,d=a.fieldInfo,g=a.domain;a=a.dateFormatInterval;var p=String(c);(g=g&&g.codedValues?g.getName(c):null)?p=g:"number"===
typeof c&&(p=d&&"date"===d.type?e.formatDate(c,a&&b[a]):f.format(c));return p}});return e})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(m,a){function l(a,g){return a-g}var f=/^-?(\d+)(\.(\d+))?$/i,h=new RegExp("\\"+a.decimal+"0+$","g"),g=/(\d)0*$/g,k={numDigits:function(a){var e=String(a),d=e.match(f);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<e.toLowerCase().indexOf("e")&&
(d=e.split("e"),e=d[0],d=d[1],e&&d&&(e=Number(e),d=Number(d),(a=0<d)||(d=Math.abs(d)),e=k.numDigits(e),a?(e.integer+=d,e.fractional=d>e.fractional?0:e.fractional-d):(e.fractional+=d,e.integer=d>e.integer?1:e.integer-d),a=e));return a},percentChange:function(a,g,d,b){var c={previous:null,next:null},e;null!=d&&(e=a-d,c.previous=Math.floor(Math.abs(100*(g-d-e)/e)));null!=b&&(e=b-a,c.next=Math.floor(Math.abs(100*(b-g-e)/e)));return c},round:function(a,g){a=a.slice(0);var d,b,c,e,p,f,h,n,A=g&&null!=g.tolerance?
g.tolerance:2,C=g&&g.indexes,z=g&&null!=g.strictBounds?g.strictBounds:!1;if(C)C.sort(l);else for(C=[],p=0;p<a.length;p++)C.push(p);for(p=0;p<C.length;p++)if(n=C[p],g=a[n],d=0===n?null:a[n-1],b=n===a.length-1?null:a[n+1],c=k.numDigits(g),c=c.fractional){f=0;for(h=!1;f<=c&&!h;){e=g;h=f;var m=void 0,x=void 0,m=Number(e.toFixed(h));m<e?x=m+1/Math.pow(10,h):(x=m,m-=1/Math.pow(10,h));m=Number(m.toFixed(h));x=Number(x.toFixed(h));e=[m,x];e=z&&0===p?e[1]:e[0];h=A;var m=k.percentChange(g,e,d,b),E=x=void 0,
x=void 0,x=null==m.previous||m.previous<=h,E=null==m.next||m.next<=h;h=x=x&&E||m.previous+m.next<=2*h;f++}h&&(a[n]=e)}return a},format:function(a,f){f=f||{places:20,round:-1};(a=m.format(a,f))&&(a=a.replace(g,"$1").replace(h,""));return a}};return k})},"esri/renderers/visualVariables/support/utils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.isGraphic=function(a){return a&&"esri.Graphic"===a.declaredClass};a.lookupData=function(a,f){if(f){var h=
0,g=f.length-1;f.some(function(f,e){if(a<f)return g=e,!0;h=e;return!1});return[h,g,(a-f[h])/(f[g]-f[h])]}}})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C){var z=[0,0];return function(a){function k(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];d=a.apply(this,d)||this;d._viewpoint2D={center:w.vec2f64.create(),rotation:0,scale:0,spatialReference:null};d.center=[0,0];d.extent=new h.Extent;d.id=0;d.inverseTransform=c.mat2df64.create();d.resolution=0;d.rotation=0;d.scale=0;d.transform=c.mat2df64.create();d.transformNoRotation=c.mat2df64.create();d.displayMat3=p.mat3f32.create();d.displayViewMat3=
p.mat3f32.create();d.viewMat3=p.mat3f32.create();d.viewMat2d=b.mat2df32.create();d.worldScreenWidth=0;d.size=[0,0];return d}l(k,a);m=k;Object.defineProperty(k.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});k.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=C.copy(c,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};k.prototype.clone=function(){return new m({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};k.prototype.toMap=function(a,b,c){if(A.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);z[0]=b;z[1]=c;return t.vec2.transformMat2d(a,z,this.inverseTransform)};k.prototype.toScreen=function(a,b,c){if(A.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);z[0]=b;z[1]=c;return t.vec2.transformMat2d(a,z,this.transform)};k.prototype.toScreenNoRotation=function(a,b,c){if(A.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);z[0]=b;z[1]=
c;return t.vec2.transformMat2d(a,z,this.transformNoRotation)};k.prototype.pixelSizeAt=function(a){return C.pixelSizeAt(a,this.viewpoint,this.size)};k.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,d=this._get("pixelRatio")||1,e=this._get("size");C.getMatrix(a,c,e,b,0,d);return a};k.prototype._update=function(){var a=this._viewpoint2D,b=a.center,c=a.spatialReference,e=a.scale,p=a.rotation,a=this._get("pixelRatio")||1,f=this._get("size");this._set("id",this.id+1);var k=new g({targetGeometry:new h.Point(b[0],
b[1],c),scale:e,rotation:p});this._set("viewpoint",k);if(f&&c&&e)return this.resolution=C.getResolution(k),this.rotation=p,this.scale=e,this.spatialReference=c,t.vec2.copy(this.center,b),q.mat3.set(this.displayMat3,0!==f[0]?2/f[0]:0,0,0,0,0!==f[1]?-2/f[1]:0,0,-1,1,1),e=q.mat3.identity(this.viewMat3),b=u.vec2f32.fromValues(f[0]/2,f[1]/2),c=u.vec2f32.fromValues(-f[0]/2,-f[1]/2),p=n.common.toRadian(p),q.mat3.translate(e,e,b),q.mat3.rotate(e,e,p),q.mat3.translate(e,e,c),q.mat3.multiply(this.displayViewMat3,
this.displayMat3,e),e=d.mat2d.identity(this.viewMat2d),d.mat2d.translate(e,e,b),d.mat2d.rotate(e,e,p),d.mat2d.translate(e,e,c),C.getExtent(this.extent,k,f),C.getTransform(this.transform,k,f,a),d.mat2d.invert(this.inverseTransform,this.transform),C.getTransformNoRotation(this.transformNoRotation,k,f,a),this.worldScreenWidth=C.getWorldScreenWidth(this.spatialReference,this.resolution),this};var m;f([e.property({readOnly:!0})],k.prototype,"id",void 0);f([e.property({value:1,json:{write:!0}})],k.prototype,
"pixelRatio",null);f([e.property({json:{write:!0}})],k.prototype,"size",null);f([e.property({type:g,json:{write:!0}})],k.prototype,"viewpoint",null);return k=m=f([e.subclass("esri.views.2d.ViewState")],k)}(e.declared(k))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./geometry ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e,n){function d(){return{enabled:!this.camera}}
return function(a){function b(b){b=a.call(this)||this;b.rotation=0;b.scale=0;b.targetGeometry=null;b.camera=null;return b}l(b,a);k=b;b.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};b.prototype.clone=function(){return new k({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var k;f([e.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:d}}}}})],b.prototype,
"rotation",void 0);f([e.cast("rotation")],b.prototype,"castRotation",null);f([e.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:d}}}}})],b.prototype,"scale",void 0);f([e.property({types:g.geometryTypes,json:{read:n.fromJSON,write:!0,origins:{"web-scene":{read:n.fromJSON,write:{overridePolicy:d}}}}})],b.prototype,"targetGeometry",void 0);f([e.property({type:h,json:{write:!0}})],b.prototype,"camera",void 0);return b=k=f([e.subclass("esri.Viewpoint")],b)}(e.declared(k))})},
"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(m,a,l,f,h,g,k,e,n){return function(a){function b(b,c,d,g){b=a.call(this)||this;b.position=new e([0,0,0]);b.heading=0;b.tilt=0;b.fov=55;return b}l(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in
a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};b.prototype.writePosition=function(a,b,c,d){var e=a.clone();e.x=k.ensureNumber(a.x||0);e.y=k.ensureNumber(a.y||0);e.z=a.hasZ?k.ensureNumber(a.z||0):a.z;b[c]=e.write(null,d)};b.prototype.readPosition=function(a,b){var c=new e;c.read(a,b);c.x=k.ensureNumber(c.x||0);c.y=k.ensureNumber(c.y||0);c.z=c.hasZ?k.ensureNumber(c.z||0):c.z;return c};b.prototype.equals=function(a){return a?this.tilt===
a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};b.prototype.clone=function(){return new c({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var c;f([g.property({type:e,json:{write:{isRequired:!0}}})],b.prototype,"position",void 0);f([g.writer("position")],b.prototype,"writePosition",null);f([g.reader("position")],b.prototype,"readPosition",null);f([g.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),g.cast(function(a){return n.cyclicalDeg.normalize(k.ensureNumber(a))})],
b.prototype,"heading",void 0);f([g.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),g.cast(function(a){return n.clamp(k.ensureNumber(a),-180,180)})],b.prototype,"tilt",void 0);f([g.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],b.prototype,"fov",void 0);return b=c=f([g.subclass("esri.Camera")],b)}(g.declared(h))})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],
function(m,a,l,f){function h(a){return Math.asin(1<a?1:-1>a?-1:a)}function g(a){return Math.acos(1<a?1:-1>a?-1:a)}function k(a,b,c){return a<b?b:a>c?c:a}function e(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=h;a.acos=g;a.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};a.sign=Math.sign||function(a){return+(0<a)-
+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.maxScale=function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*
a[6]+a[10]*a[10]))};a.scaleFromMatrix=function(a,b){l.vec3.set(a,Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]));return a};a.makeOrthonormal=function(a,b,c){c=c||a;var d=l.vec3.dot(a,b);l.vec3.set(c,a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2]);l.vec3.normalize(c,c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?l.vec3.set(b,0,1,0):l.vec3.set(b,1,0,0);l.vec3.cross(c,a,b);l.vec3.normalize(b,b);l.vec3.cross(b,c,a);l.vec3.normalize(c,
c)};a.moduloPositive=function(a,b){return(a%b+b)%b};a.cartesianToSpherical=function(a,b){var c=l.vec3.length(a),d=h(a[2]/c);l.vec3.set(b,c,d,Math.atan2(a[1]/c,a[0]/c));return b};a.sphericalToCartesian=function(a,b){var c=a[0],d=a[1];a=a[2];var e=Math.cos(d);l.vec3.set(b,c*e*Math.cos(a),c*e*Math.sin(a),c*Math.sin(d))};a.directionFromTo=function(a,b,c){var d=c[0]-b[0],e=c[1]-b[1];b=c[2]-b[2];c=d*d+e*e+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);a[0]=d*c;a[1]=e*c;a[2]=b*c;return a};a.lerp=
function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,d,e,g){a+=(b-a)*e;return a+(c+(d-c)*e-a)*g};a.slerp=function(a,b,d,e){void 0===e&&(e=f.vec3f64.create());var g=l.vec3.length(a),p=l.vec3.length(b),k=l.vec3.dot(a,b)/(g*p);if(.9999999999999999>k){var k=Math.acos(k),h=((1-d)*g+d*p)/Math.sin(k),p=h/p*Math.sin(d*k);l.vec3.scale(c,a,h/g*Math.sin((1-d)*k));l.vec3.scale(q,b,p);return l.vec3.add(e,c,q)}return l.vec3.lerp(e,a,b,d)};a.angle=function(a,d,e){a=l.vec3.normalize(c,a);d=l.vec3.normalize(q,
d);var f=g(l.vec3.dot(a,d));return e&&(a=l.vec3.cross(b,a,d),0>l.vec3.dot(a,e))?-f:f};a.clamp=k;a.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var d=1;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=
function(a,b,c){void 0===c&&(c=1E-6);if(isNaN(a)||isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),e=Math.abs(a),g=Math.abs(b);if(0===a||0===b||1E-12>e&&1E-12>g){if(d>.01*c)return!1}else if(d/(e+g)>c)return!1;return!0};a.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return isNaN(a)||isNaN(b)?!1:(a>b?a-b:b-a)<=c};m=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=
function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return k(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+
b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.shortestSignedDiff=function(a,b){a=this.normalize(a);b=this.normalize(b);var c=b-a;a=b<a?this.minimalMonotonic(a,b)-a:b-this.minimalMonotonic(b,a);return Math.abs(c)<Math.abs(a)?c:a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=m;a.planeFromPoints=function(a,b,c,e){l.vec3.subtract(n,b,a);l.vec3.subtract(d,c,a);l.vec3.cross(e,
n,d);l.vec3.normalize(e,e);e[3]=-l.vec3.dot(a,e)};var n=f.vec3f64.create(),d=f.vec3f64.create();a.cyclical2PI=e(new m(0,2*Math.PI));a.cyclicalPI=e(new m(-Math.PI,Math.PI));a.cyclicalDeg=e(new m(0,360));var b=f.vec3f64.create(),c=f.vec3f64.create(),q=f.vec3f64.create()})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["require","exports","./math/vec3"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec3=l})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require",
"exports","../factories/vec3f64","./common"],function(m,a,l,f){function h(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function g(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function k(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function e(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function n(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function d(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)}function b(a,
b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}function c(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function q(a,b){var c=b[0],d=b[1],e=b[2],c=c*c+d*d+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function p(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(a,"__esModule",{value:!0});a.length=h;a.copy=g;a.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};a.subtract=
k;a.multiply=e;a.divide=n;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=
Math.round(b[2]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};a.distance=d;a.squaredDistance=b;a.squaredLength=c;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};a.normalize=q;a.dot=p;a.cross=function(a,b,c){var d=b[0],e=b[1];b=b[2];var g=c[0],f=c[1];c=c[2];a[0]=e*c-b*f;a[1]=b*g-d*c;a[2]=
d*f-e*g;return a};a.lerp=function(a,b,c,d){var e=b[0],g=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=g+d*(c[1]-g);a[2]=b+d*(c[2]-b);return a};a.hermite=function(a,b,c,d,e,g){var f=g*g,p=f*(2*g-3)+1,k=f*(g-2)+g,h=f*(g-1);g=f*(3-2*g);a[0]=b[0]*p+c[0]*k+d[0]*h+e[0]*g;a[1]=b[1]*p+c[1]*k+d[1]*h+e[1]*g;a[2]=b[2]*p+c[2]*k+d[2]*h+e[2]*g;return a};a.bezier=function(a,b,c,d,e,g){var f=1-g,p=f*f,k=g*g,h=p*f,p=3*g*p,f=3*k*f;g*=k;a[0]=b[0]*h+c[0]*p+d[0]*f+e[0]*g;a[1]=b[1]*h+c[1]*p+d[1]*f+e[1]*g;a[2]=b[2]*h+c[2]*p+d[2]*
f+e[2]*g;return a};a.random=function(a,b){b=b||1;var c=2*f.RANDOM()*Math.PI,d=2*f.RANDOM()-1,e=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*e;a[1]=Math.sin(c)*e;a[2]=d*b;return a};a.transformMat4=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=c[0]*d+c[4]*e+c[8]*b+c[12];a[1]=c[1]*d+c[5]*e+c[9]*b+c[13];a[2]=c[2]*d+c[6]*e+c[10]*b+c[14];return a};a.transformMat3=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=d*c[0]+e*c[3]+b*c[6];a[1]=d*c[1]+e*c[4]+b*c[7];a[2]=d*c[2]+e*c[5]+b*c[8];return a};a.transformQuat=function(a,
b,c){var d=c[0],e=c[1],g=c[2],f=b[0],p=b[1];b=b[2];var k=e*b-g*p,h=g*f-d*b,n=d*p-e*f;c=2*c[3];a[0]=f+k*c+2*(e*n-g*h);a[1]=p+h*c+2*(g*k-d*n);a[2]=b+n*c+2*(d*h-e*k);return a};a.rotateX=function(a,b,c,d){var e=[],g=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];g[0]=e[0];g[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);g[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.rotateY=function(a,b,c,d){var e=[],g=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];g[0]=e[2]*Math.sin(d)+
e[0]*Math.cos(d);g[1]=e[1];g[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.rotateZ=function(a,b,c,d){var e=[],g=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];g[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);g[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);g[2]=e[2];a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.angle=function(a,b){g(t,a);g(u,b);q(t,t);q(u,u);a=p(t,u);return 1<a?0:-1>a?Math.PI:Math.acos(a)};var t=l.create(),u=l.create();a.str=function(a){return"vec3("+
a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};a.equals=function(a,b){var c=a[0],d=a[1];a=a[2];var e=b[0],g=b[1];b=b[2];return Math.abs(c-e)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(d-g)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=k;a.mul=e;a.div=n;a.dist=d;a.sqrDist=b;a.len=h;a.sqrLen=c})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require",
"exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.EPSILON=1E-6;a.RANDOM=Math.random;var l=Math.PI/180,f=180/Math.PI;a.toRadian=function(a){return a*l};a.toDegree=function(a){return a*f};a.equals=function(f,g){return Math.abs(f-g)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))}})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.common=l})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require",
"exports","./math/mat2d"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2d=l})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(m,a,l){function f(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4];f=f[5];var p=e[0],h=e[1],l=e[2],w=e[3],A=e[4];e=e[5];a[0]=g*p+b*h;a[1]=d*p+c*h;a[2]=g*l+b*w;a[3]=d*l+c*w;a[4]=g*A+b*e+k;a[5]=d*A+c*e+f;return a}function h(a,f,e){a[0]=f[0]-e[0];a[1]=f[1]-e[1];a[2]=f[2]-e[2];a[3]=f[3]-e[3];a[4]=f[4]-e[4];
a[5]=f[5]-e[5];return a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.set=function(a,f,e,h,d,b,c){a[0]=f;a[1]=e;a[2]=h;a[3]=d;a[4]=b;a[5]=c;return a};a.invert=function(a,f){var e=f[0],g=f[1],d=f[2],b=f[3],c=f[4];f=f[5];var k=e*b-g*d;if(!k)return null;k=1/k;a[0]=b*k;a[1]=-g*k;a[2]=-d*k;a[3]=e*k;a[4]=(d*f-b*c)*k;a[5]=(g*c-e*f)*k;return a};
a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=f;a.rotate=function(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4];f=f[5];var p=Math.sin(e);e=Math.cos(e);a[0]=g*e+b*p;a[1]=d*e+c*p;a[2]=g*-p+b*e;a[3]=d*-p+c*e;a[4]=k;a[5]=f;return a};a.scale=function(a,f,e){var g=f[1],d=f[2],b=f[3],c=f[4],k=f[5],p=e[0];e=e[1];a[0]=f[0]*p;a[1]=g*p;a[2]=d*e;a[3]=b*e;a[4]=c;a[5]=k;return a};a.translate=function(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4];f=f[5];var p=e[0];e=e[1];a[0]=g;a[1]=d;a[2]=b;
a[3]=c;a[4]=g*p+b*e+k;a[5]=d*p+c*e+f;return a};a.fromRotation=function(a,f){var e=Math.sin(f);f=Math.cos(f);a[0]=f;a[1]=e;a[2]=-e;a[3]=f;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=f[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=f[0];a[5]=f[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],
2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,f,e){a[0]=f[0]+e[0];a[1]=f[1]+e[1];a[2]=f[2]+e[2];a[3]=f[3]+e[3];a[4]=f[4]+e[4];a[5]=f[5]+e[5];return a};a.subtract=h;a.multiplyScalar=function(a,f,e){a[0]=f[0]*e;a[1]=f[1]*e;a[2]=f[2]*e;a[3]=f[3]*e;a[4]=f[4]*e;a[5]=f[5]*e;return a};a.multiplyScalarAndAdd=function(a,f,e,h){a[0]=f[0]+e[0]*h;a[1]=f[1]+e[1]*h;a[2]=f[2]+e[2]*h;a[3]=f[3]+e[3]*h;a[4]=f[4]+e[4]*h;a[5]=f[5]+e[5]*h;return a};a.exactEquals=function(a,f){return a[0]===
f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]};a.equals=function(a,f){var e=a[0],g=a[1],d=a[2],b=a[3],c=a[4];a=a[5];var k=f[0],p=f[1],h=f[2],u=f[3],w=f[4];f=f[5];return Math.abs(e-k)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(g-p)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(d-h)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(b-u)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(u))&&Math.abs(c-w)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&
Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};a.mul=f;a.sub=h})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df32=l})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(6);a[0]=1;a[3]=1;return a};a.clone=function(a){var f=
new Float32Array(6);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];return f};a.fromValues=function(a,f,h,g,k,e){var n=new Float32Array(6);n[0]=a;n[1]=f;n[2]=h;n[3]=g;n[4]=k;n[5]=e;return n};a.createView=function(a,f){return new Float32Array(a,f,6)}})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat2df64=l})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require",
"exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,1,0,0]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5]]};a.fromValues=function(a,f,h,g,k,e){return[a,f,h,g,k,e]};a.createView=function(a,f){return new Float64Array(a,f,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat3=l})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require",
"exports","./common"],function(m,a,l){function f(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4],p=f[5],h=f[6],l=f[7];f=f[8];var w=e[0],A=e[1],m=e[2],z=e[3],y=e[4],x=e[5],E=e[6],B=e[7];e=e[8];a[0]=w*g+A*c+m*h;a[1]=w*d+A*k+m*l;a[2]=w*b+A*p+m*f;a[3]=z*g+y*c+x*h;a[4]=z*d+y*k+x*l;a[5]=z*b+y*p+x*f;a[6]=E*g+B*c+e*h;a[7]=E*d+B*k+e*l;a[8]=E*b+B*p+e*f;return a}function h(a,f,e){a[0]=f[0]-e[0];a[1]=f[1]-e[1];a[2]=f[2]-e[2];a[3]=f[3]-e[3];a[4]=f[4]-e[4];a[5]=f[5]-e[5];a[6]=f[6]-e[6];a[7]=f[7]-e[7];a[8]=f[8]-e[8];
return a}Object.defineProperty(a,"__esModule",{value:!0});a.fromMat4=function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[4];a[4]=f[5];a[5]=f[6];a[6]=f[8];a[7]=f[9];a[8]=f[10];return a};a.copy=function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];return a};a.set=function(a,f,e,h,d,b,c,q,p,t){a[0]=f;a[1]=e;a[2]=h;a[3]=d;a[4]=b;a[5]=c;a[6]=q;a[7]=p;a[8]=t;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};
a.transpose=function(a,f){if(a===f){var e=f[1],g=f[2],d=f[5];a[1]=f[3];a[2]=f[6];a[3]=e;a[5]=f[7];a[6]=g;a[7]=d}else a[0]=f[0],a[1]=f[3],a[2]=f[6],a[3]=f[1],a[4]=f[4],a[5]=f[7],a[6]=f[2],a[7]=f[5],a[8]=f[8];return a};a.invert=function(a,f){var e=f[0],g=f[1],d=f[2],b=f[3],c=f[4],k=f[5],p=f[6],h=f[7];f=f[8];var l=f*c-k*h,w=-f*b+k*p,A=h*b-c*p,m=e*l+g*w+d*A;if(!m)return null;m=1/m;a[0]=l*m;a[1]=(-f*g+d*h)*m;a[2]=(k*g-d*c)*m;a[3]=w*m;a[4]=(f*e-d*p)*m;a[5]=(-k*e+d*b)*m;a[6]=A*m;a[7]=(-h*e+g*p)*m;a[8]=(c*
e-g*b)*m;return a};a.adjoint=function(a,f){var e=f[0],g=f[1],d=f[2],b=f[3],c=f[4],k=f[5],p=f[6],h=f[7];f=f[8];a[0]=c*f-k*h;a[1]=d*h-g*f;a[2]=g*k-d*c;a[3]=k*p-b*f;a[4]=e*f-d*p;a[5]=d*b-e*k;a[6]=b*h-c*p;a[7]=g*p-e*h;a[8]=e*c-g*b;return a};a.determinant=function(a){var g=a[3],e=a[4],f=a[5],d=a[6],b=a[7],c=a[8];return a[0]*(c*e-f*b)+a[1]*(-c*g+f*d)+a[2]*(b*g-e*d)};a.multiply=f;a.translate=function(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4],p=f[5],h=f[6],l=f[7];f=f[8];var w=e[0];e=e[1];a[0]=g;a[1]=
d;a[2]=b;a[3]=c;a[4]=k;a[5]=p;a[6]=w*g+e*c+h;a[7]=w*d+e*k+l;a[8]=w*b+e*p+f;return a};a.rotate=function(a,f,e){var g=f[0],d=f[1],b=f[2],c=f[3],k=f[4],p=f[5],h=f[6],l=f[7];f=f[8];var w=Math.sin(e);e=Math.cos(e);a[0]=e*g+w*c;a[1]=e*d+w*k;a[2]=e*b+w*p;a[3]=e*c-w*g;a[4]=e*k-w*d;a[5]=e*p-w*b;a[6]=h;a[7]=l;a[8]=f;return a};a.scale=function(a,f,e){var g=e[0];e=e[1];a[0]=g*f[0];a[1]=g*f[1];a[2]=g*f[2];a[3]=e*f[3];a[4]=e*f[4];a[5]=e*f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];return a};a.fromTranslation=function(a,
f){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=f[0];a[7]=f[1];a[8]=1;return a};a.fromRotation=function(a,f){var e=Math.sin(f);f=Math.cos(f);a[0]=f;a[1]=e;a[2]=0;a[3]=-e;a[4]=f;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=0;a[4]=f[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,f){a[0]=f[0];a[1]=f[1];a[2]=0;a[3]=f[2];a[4]=f[3];a[5]=0;a[6]=f[4];a[7]=f[5];a[8]=1;return a};a.fromQuat=function(a,f){var e=f[0],g=f[1],d=f[2];f=f[3];var b=
e+e,c=g+g,h=d+d,e=e*b,p=g*b,g=g*c,k=d*b,l=d*c,d=d*h,b=f*b,c=f*c;f*=h;a[0]=1-g-d;a[3]=p-f;a[6]=k+c;a[1]=p+f;a[4]=1-e-d;a[7]=l-b;a[2]=k-c;a[5]=l+b;a[8]=1-e-g;return a};a.normalFromMat4Legacy=function(a,f){var e=f[0],g=f[1],d=f[2],b=f[4],c=f[5],h=f[6],p=f[8],k=f[9];f=f[10];var l=f*c-h*k,w=-f*b+h*p,A=k*b-c*p,m=e*l+g*w+d*A;if(!m)return null;m=1/m;a[0]=l*m;a[1]=(-f*g+d*k)*m;a[2]=(h*g-d*c)*m;a[3]=w*m;a[4]=(f*e-d*p)*m;a[5]=(-h*e+d*b)*m;a[6]=A*m;a[7]=(-k*e+g*p)*m;a[8]=(c*e-g*b)*m;return a};a.normalFromMat4=
function(a,f){var e=f[0],g=f[1],d=f[2],b=f[3],c=f[4],h=f[5],p=f[6],k=f[7],l=f[8],w=f[9],A=f[10],m=f[11],z=f[12],y=f[13],x=f[14];f=f[15];var E=e*h-g*c,B=e*p-d*c,F=e*k-b*c,D=g*p-d*h,G=g*k-b*h,H=d*k-b*p,P=l*y-w*z,O=l*x-A*z,l=l*f-m*z,N=w*x-A*y,w=w*f-m*y,A=A*f-m*x,m=E*A-B*w+F*N+D*l-G*O+H*P;if(!m)return null;m=1/m;a[0]=(h*A-p*w+k*N)*m;a[1]=(p*l-c*A-k*O)*m;a[2]=(c*w-h*l+k*P)*m;a[3]=(d*w-g*A-b*N)*m;a[4]=(e*A-d*l+b*O)*m;a[5]=(g*l-e*w-b*P)*m;a[6]=(y*H-x*G+f*D)*m;a[7]=(x*F-z*H-f*B)*m;a[8]=(z*G-y*F+f*E)*m;return a};
a.projection=function(a,f,e){a[0]=2/f;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/e;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,f,e){a[0]=f[0]+e[0];a[1]=f[1]+e[1];a[2]=f[2]+e[2];a[3]=f[3]+e[3];
a[4]=f[4]+e[4];a[5]=f[5]+e[5];a[6]=f[6]+e[6];a[7]=f[7]+e[7];a[8]=f[8]+e[8];return a};a.subtract=h;a.multiplyScalar=function(a,f,e){a[0]=f[0]*e;a[1]=f[1]*e;a[2]=f[2]*e;a[3]=f[3]*e;a[4]=f[4]*e;a[5]=f[5]*e;a[6]=f[6]*e;a[7]=f[7]*e;a[8]=f[8]*e;return a};a.multiplyScalarAndAdd=function(a,f,e,h){a[0]=f[0]+e[0]*h;a[1]=f[1]+e[1]*h;a[2]=f[2]+e[2]*h;a[3]=f[3]+e[3]*h;a[4]=f[4]+e[4]*h;a[5]=f[5]+e[5]*h;a[6]=f[6]+e[6]*h;a[7]=f[7]+e[7]*h;a[8]=f[8]+e[8]*h;return a};a.exactEquals=function(a,f){return a[0]===f[0]&&
a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]&&a[6]===f[6]&&a[7]===f[7]&&a[8]===f[8]};a.equals=function(a,f){var e=a[0],g=a[1],d=a[2],b=a[3],c=a[4],h=a[5],p=a[6],k=a[7];a=a[8];var u=f[0],w=f[1],m=f[2],C=f[3],z=f[4],y=f[5],x=f[6],E=f[7];f=f[8];return Math.abs(e-u)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(g-w)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(d-m)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(b-C)<=l.EPSILON*Math.max(1,Math.abs(b),
Math.abs(C))&&Math.abs(c-z)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(h-y)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(p-x)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(x))&&Math.abs(k-E)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(E))&&Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};a.mul=f;a.sub=h})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});
a.mat3f32=l})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new Float32Array(9);a[0]=1;a[4]=1;a[8]=1;return a};a.clone=function(a){var f=new Float32Array(9);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];f[4]=a[4];f[5]=a[5];f[6]=a[6];f[7]=a[7];f[8]=a[8];return f};a.fromValues=function(a,f,h,g,k,e,n,d,b){var c=new Float32Array(9);c[0]=a;c[1]=f;c[2]=h;c[3]=g;c[4]=k;c[5]=e;c[6]=
n;c[7]=d;c[8]=b;return c};a.createView=function(a,f){return new Float32Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2=l})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(m,a,l){function f(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];return a}function h(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];return a}function g(a,c,d){a[0]=c[0]/
d[0];a[1]=c[1]/d[1];return a}function k(a,c){var b=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(b*b+a*a)}function e(a,c){var b=c[0]-a[0];a=c[1]-a[1];return b*b+a*a}function n(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function d(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,c){a[0]=c[0];a[1]=c[1];return a};a.set=function(a,c,d){a[0]=c;a[1]=d;return a};a.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];return a};a.subtract=f;a.multiply=h;a.divide=
g;a.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};a.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};a.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);return a};a.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);return a};a.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};a.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;return a};a.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=
c[1]+d[1]*e;return a};a.distance=k;a.squaredDistance=e;a.length=n;a.squaredLength=d;a.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};a.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];return a};a.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};a.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};a.cross=function(a,c,d){c=c[0]*d[1]-c[1]*d[0];a[0]=a[1]=0;a[2]=c;return a};a.lerp=function(a,c,d,e){var b=c[0];c=c[1];a[0]=b+e*(d[0]-b);a[1]=c+e*
(d[1]-c);return a};a.random=function(a,c){c=c||1;var b=2*l.RANDOM()*Math.PI;a[0]=Math.cos(b)*c;a[1]=Math.sin(b)*c;return a};a.transformMat2=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c;a[1]=d[1]*b+d[3]*c;return a};a.transformMat2d=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c+d[4];a[1]=d[1]*b+d[3]*c+d[5];return a};a.transformMat3=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[3]*c+d[6];a[1]=d[1]*b+d[4]*c+d[7];return a};a.transformMat4=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+
d[4]*c+d[12];a[1]=d[1]*b+d[5]*c+d[13];return a};a.rotate=function(a,c,d,e){var b=c[0]-d[0];c=c[1]-d[1];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e-c*g+d[0];a[1]=b*g+c*e+d[1];return a};a.angle=function(a,c){var b=a[0];a=a[1];var d=c[0];c=c[1];var e=b*b+a*a;0<e&&(e=1/Math.sqrt(e));var g=d*d+c*c;0<g&&(g=1/Math.sqrt(g));b=(b*d+a*c)*e*g;return 1<b?0:-1>b?Math.PI:Math.acos(b)};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};a.equals=function(a,
c){var b=a[0];a=a[1];var d=c[0];c=c[1];return Math.abs(b-d)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))&&Math.abs(a-c)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.len=n;a.sub=f;a.mul=h;a.div=g;a.dist=k;a.sqrDist=e;a.sqrLen=d})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec2f32=l})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],
function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return new Float32Array(2)};a.clone=function(a){var f=new Float32Array(2);f[0]=a[0];f[1]=a[1];return f};a.fromValues=function(a,f){var h=new Float32Array(2);h[0]=a;h[1]=f;return h};a.createView=function(a,f){return new Float32Array(a,f,2)}})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(m,a){function l(a){return a instanceof Float32Array&&2<=a.length}function f(a){return Array.isArray(a)&&
2<=a.length}Object.defineProperty(a,"__esModule",{value:!0});a.isVec2f32=l;a.isVec2f64=f;a.isVec2=function(a){return l(a)||f(a)}})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y){function x(a,b,c,e){return e&&c&&!e.equals(c)&&z.canProject(e,c)&&e.isWebMercator?(e.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(d.common.toRadian(c)),a=q.vec2.set(a,d.common.toRadian(b[0])*L,.5*L*Math.log((1+c)/(1-c)))):(c=d.common.toDegree(b[0]/L),a=q.vec2.set(a,c-360*Math.floor((c+180)/360),d.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/L))))),a):q.vec2.copy(a,b)}function E(a){return a.wkid?a:a.spatialReference||
A.WGS84}function B(a,b){return b.type?q.vec2.set(a,b.x,b.y):q.vec2.copy(a,b)}function F(a,b){return Math.max(a.width/b[0],a.height/b[1])*W(a.spatialReference)}function D(a,b,c,d){return f(this,void 0,void 0,function(){var e,g,f,p,h,n,q,m,A,C,y,x,H,O,G,N,F,B,J,E,R,P,K,L,Z,M,W,S;return l(this,function(l){switch(l.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];g=a.every(function(a){return"attributes"in a});f=a.some(function(a){return!a.geometry});
p=a;if(!(g&&f&&b&&b.allLayerViews))return[3,2];h=new Map;n=0;for(q=a;n<q.length;n++)m=q[n],A=m.layer,C=h.get(A)||[],y=m.attributes[A.objectIdField],null!=y&&C.push(y),h.set(A,C);x=[];h.forEach(function(a,c){var d=b.allLayerViews.find(function(a){return a.layer.id===c.id});if("queryFeatures"in d){var e=c.createQuery();e.objectIds=a;e.returnGeometry=!0;x.push(d.queryFeatures(e))}});return[4,k.all(x)];case 1:H=l.sent();O=[];G=0;for(N=H;G<N.length;G++)if((F=N[G])&&F.features&&F.features.length)for(B=
0,J=F.features;B<J.length;B++)m=J[B],m.geometry&&O.push(m.geometry);p=O;l.label=2;case 2:E=0,R=p,l.label=3;case 3:if(!(E<R.length))return[3,6];P=R[E];return[4,D(P,b,c,d)];case 4:d=l.sent(),l.label=5;case 5:return E++,[3,3];case 6:return[2,d];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];e=new w(a);return[3,12];case 8:if(!(a instanceof u))return[3,9];e=a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];e=a.geometry;
return[3,12];case 10:if(!a.layer)return[3,12];K=a.layer;L=b.allLayerViews.find(function(a){return a.layer.id===K.id});if(!("queryFeatures"in L))return[3,12];Z=K.createQuery();Z.objectIds=[a.attributes[K.objectIdField]];Z.returnGeometry=!0;return[4,L.queryFeatures(Z)];case 11:e=(M=l.sent())&&M.features&&M.features[0]&&M.features[0].geometry,l.label=12;case 12:if(!e)return[2,null];W="point"===e.type?new t({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;if(!W)return[2,
null];S=z.canProject(W,c);if(!W.spatialReference.equals(c)&&S)W=z.project(W,c);else if(!S)return[2,null];d=d?d.union(W):W.clone();return[2,d]}})})}function G(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&a.every(function(a){return"layer"in a})){for(var c=0,d=0,e=0;e<a.length;e++)(b=a[e].layer)&&
b.minScale&&b.maxScale&&(c=b.minScale<c?b.minScale:c,d=b.maxScale>d?b.maxScale:d);return c&&d?{min:c,max:d}:null}}}function H(a,b){return f(this,void 0,void 0,function(){var c,d,e,g,f,k,n,q,u,m,A,C,H,O,N,J;return l(this,function(l){switch(l.label){case 0:if(!a)return[2,new h({targetGeometry:new w,scale:0,rotation:0})];c=b.spatialReference;d=b.size;e=b.viewpoint;g=b.constraints;f=null;"esri.Viewpoint"===a.declaredClass?f=a:a.viewpoint?f=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&
(f=a.target);k=null;if(!f||!f.targetGeometry)return[3,1];k=f.targetGeometry;return[3,10];case 1:if(!(a instanceof t))return[3,2];k=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,D(a.center,b,c)]:[3,10];case 3:return(u=l.sent())?[3,5]:[4,D(a.extent,b,c)];case 4:u=l.sent(),l.label=5;case 5:return(q=u)?[3,7]:[4,D(a.target,b,c)];case 6:q=l.sent(),l.label=7;case 7:return(n=q)?[3,9]:[4,D(a,b,c)];case 8:n=l.sent(),l.label=9;case 9:k=
n,l.label=10;case 10:!k&&e&&e.targetGeometry?k=e.targetGeometry:!k&&b.extent&&(k=b.extent);m=E(k);c||(c=E(b.spatialReference||b.extent||k));if(!y.canProject(k,c)&&m&&!m.equals(c))return[2,null];A=B(p.vec2f64.create(),k.center?k.center:k);C=new w(x(A,A,m,c),c);H=null;H=f&&f.targetGeometry&&"point"===f.targetGeometry.type?f.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&g&&g.effectiveLODs?g.zoomToScale(a.zoom):Array.isArray(k)||"point"===k.type||"extent"===k.type&&
0===k.width&&0===k.height?b.extent&&z.canProject(b.extent,c)?F(z.project(b.extent,c),d):b.extent?F(b.extent,d):e.scale:z.canProject(k.extent,c)?F(z.project(k.extent,c),d):F(k.extent,d);if(O=G(a))O.min&&O.min>H?H=O.min:O.max&&O.max<H&&(H=O.max);N=0;f?N=f.rotation:a.hasOwnProperty("rotation")?N=a.rotation:e&&(N=e.rotation);J=new h({targetGeometry:C,scale:H,rotation:N});g&&(J=g.fit(J),g.rotationEnabled||(J.rotation=N));return[2,J]}})})}function P(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;
c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function O(a,b,c){return c?q.vec2.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):q.vec2.scale(a,b,.5)}function N(c,d,e,g){a.getTransform(c,d,e,g);return b.mat2d.invert(c,c)}function J(a,b,c){var d=M(b);b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return q.vec2.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function R(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=C.isValid(a)?
1/(39.37*e.getMetersPerUnitForSR(a)*96):1;return b*a}function M(a){return d.common.toRadian(a.rotation)||0}function W(a){return C.isValid(a)?39.37*e.getMetersPerUnitForSR(a)*96:1}function S(a){return a.isWrappable?(a=C.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(a,"__esModule",{value:!0});var L=n.wgs84Radius,Z=180/Math.PI;a.extentToScale=F;a.create=H;a.copy=P;a.getAnchor=O;a.getExtent=function(){var a=p.vec2f64.create();return function(b,c,d){var e=c.targetGeometry;B(a,e);c=.5*R(c);
b.xmin=a[0]-c*d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();a.setExtent=function(b,c,d,e,g){a.centerAt(b,c,d.center);b.scale=F(d,e);g&&g.constraints&&g.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=p.vec2f64.create(),b=p.vec2f64.create();return function(c,d,e){B(a,d.targetGeometry);J(b,d,e);e=.5*R(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});
return c}}();a.getOuterSize=J;a.getPaddingScreenTranslation=function(){var a=p.vec2f64.create();return function(b,c,d){return q.vec2.sub(b,q.vec2.scale(b,c,.5),O(a,c,d))}}();a.getPaddingMapTranslation=function(){var d=c.mat2df64.create(),e=p.vec2f64.create();return function(c,g,f,p){var h=R(g);g=M(g);q.vec2.set(e,h,h);b.mat2d.fromScaling(d,e);b.mat2d.rotate(d,d,g);b.mat2d.translate(d,d,a.getPaddingScreenTranslation(e,f,p));b.mat2d.translate(d,d,[0,p.top-p.bottom]);return q.vec2.set(c,d[4],d[5])}}();
a.getResolution=R;a.getResolutionToScaleFactor=W;a.getMatrix=function(){var a=p.vec2f64.create(),c=p.vec2f64.create(),d=p.vec2f64.create();return function(e,g,f,p,h,k){q.vec2.negate(a,g);q.vec2.scale(c,f,.5*k);q.vec2.set(d,1/p*k,-1/p*k);b.mat2d.identity(e);b.mat2d.translate(e,e,c);h&&b.mat2d.rotate(e,e,h);b.mat2d.scale(e,e,d);b.mat2d.translate(e,e,a);return e}}();a.getTransform=function(){var b=p.vec2f64.create();return function(c,d,e,g){var f=R(d),p=M(d);B(b,d.targetGeometry);return a.getMatrix(c,
b,e,f,p,g)}}();a.getTransformNoRotation=function(){var b=p.vec2f64.create();return function(c,d,e,g){var f=R(d);B(b,d.targetGeometry);return a.getMatrix(c,b,e,f,0,g)}}();a.getWorldWidth=S;a.getWorldScreenWidth=function(a,b){return Math.round(S(a)/b)};a.createAsync=function(a,b){return g.safeCast(H(a,b))};a.angleBetween=function(){var a=p.vec2f64.create(),b=p.vec2f64.create(),c=[0,0,0];return function(d,e,g){q.vec2.subtract(a,d,e);q.vec2.normalize(a,a);q.vec2.subtract(b,d,g);q.vec2.normalize(b,b);
q.vec2.cross(c,a,b);d=Math.acos(q.vec2.dot(a,b)/(q.vec2.length(a)*q.vec2.length(b)))*Z;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();a.addPadding=function(){var b=p.vec2f64.create();return function(c,d,e,g){var f=c.targetGeometry;P(c,d);a.getPaddingMapTranslation(b,d,e,g);f.x+=b[0];f.y+=b[1];return c}}();a.removePadding=function(){var b=p.vec2f64.create();return function(c,d,e,g){var f=c.targetGeometry;P(c,d);a.getPaddingMapTranslation(b,d,e,g);f.x-=b[0];f.y-=b[1];return c}}();a.centerAt=function(){var a=
p.vec2f64.create();return function(b,c,d){P(b,c);c=b.targetGeometry;var e=E(d),g=E(c);B(a,d);x(a,a,e,g);c.x=a[0];c.y=a[1];return b}}();a.pixelSizeAt=function(a,b,c){return R(b)};a.resize=function(){var b=p.vec2f64.create();return function(c,d,e,g,f){f||(f="center");q.vec2.sub(b,e,g);q.vec2.scale(b,b,.5);e=b[0];g=b[1];switch(f){case "center":q.vec2.set(b,0,0);break;case "left":q.vec2.set(b,-e,0);break;case "top":q.vec2.set(b,0,g);break;case "right":q.vec2.set(b,e,0);break;case "bottom":q.vec2.set(b,
0,-g);break;case "top-left":q.vec2.set(b,-e,g);break;case "bottom-left":q.vec2.set(b,-e,-g);break;case "top-right":q.vec2.set(b,e,g);break;case "bottom-right":q.vec2.set(b,e,-g)}a.translateBy(c,d,b);return c}}();a.rotateBy=function(a,b,c){P(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){P(a,b);a.rotation=c;return a};a.scaleBy=function(){var b=p.vec2f64.create();return function(c,d,e,g,f){P(c,d);isNaN(e)||0===e||(a.toMap(b,g,d,f),c.scale=d.scale*e,a.toScreen(b,b,c,f),a.translateBy(c,c,q.vec2.set(b,
b[0]-g[0],g[1]-b[1])));return c}}();a.scaleTo=function(a,b,c){P(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var b=p.vec2f64.create();return function(c,d,e,g,f,p){P(c,d);isNaN(e)||0===e||(a.toMap(b,f,d,p),c.scale=d.scale*e,c.rotation+=g,a.toScreen(b,b,c,p),a.translateBy(c,c,q.vec2.set(b,b[0]-f[0],f[1]-b[1])));return c}}();a.padAndScaleAndRotateBy=function(){var b=p.vec2f64.create(),c=p.vec2f64.create();return function(d,e,g,f,p,h,k){a.getPaddingScreenTranslation(c,h,k);q.vec2.add(b,p,c);
return f?a.scaleAndRotateBy(d,e,g,f,b,h):a.scaleBy(d,e,g,b,h)}}();a.toMap=function(){var a=c.mat2df64.create();return function(b,c,d,e){return q.vec2.transformMat2d(b,c,N(a,d,e,1))}}();a.toScreen=function(){var b=c.mat2df64.create();return function(c,d,e,g){return q.vec2.transformMat2d(c,d,a.getTransform(b,e,g,1))}}();a.translateBy=function(){var a=p.vec2f64.create(),d=c.mat2df64.create();return function(c,e,g){P(c,e);var f=R(e),h=c.targetGeometry;b.mat2d.fromRotation(d,M(e));b.mat2d.scale(d,d,p.vec2f64.fromValues(f,
f));q.vec2.transformMat2d(a,g,d);h.x+=a[0];h.y+=a[1];return c}}()})},"esri/views/2d/layers/features/controllers":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/promiseUtils".split(" "),function(m,a,l,f,h,g,k){function e(a){switch(a){case "on-demand":return k.create(function(a){return m(["./controllers/OnDemandController"],a)});case "memory":return k.create(function(a){return m(["./controllers/MemoryController"],
a)});case "stream":return k.create(function(a){return m(["./controllers/StreamController"],a)});default:return k.reject(new g("mapview-controller:bad-type","Unable to create controller for unknown type: "+a))}}Object.defineProperty(a,"__esModule",{value:!0});a.getControllerConfiguration=function(a,d){var b=a.source;d=d&&d.toJSON();if("stream"===a.type){b=a.purgeOptions;if(a=a.filter){var c={};a.geometry&&(c.geometry=a.geometry.toJSON());a.where&&(c.where=a.where);a=c}else a=null;return k.resolve({type:"stream",
purgeOptions:b,filter:d,serviceFilter:a,processing:null})}if(!a.capabilities.operations.supportsQuery)return k.reject(new g("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:a}));if(b&&"openPorts"in b)return d={type:"memory",filter:d,processing:"processing"in a&&a.processing&&a.processing.toWorker()||null},k.resolve(d);d={type:"on-demand",gdbVersion:"gdbVersion"in a?a.gdbVersion:null,historicMoment:"historicMoment"in a&&a.historicMoment?
a.historicMoment.getTime():null,processing:"processing"in a&&a.processing?a.processing.toWorker():null,filter:d};return k.resolve(d)};a.createController=function(a,d){return h(this,void 0,void 0,function(){var b,c,g,p,h;return f(this,function(f){switch(f.label){case 0:return[4,e(a.type)];case 1:return b=f.sent().default,c=d.serviceAndViewInfo,g=d.remoteClient,p=d.tileStore,h=new b(l({},c,{configuration:a,tileStore:p,remoteClient:g})),[4,h.setFilter({index:0,filter:a.filter})];case 2:return f.sent(),
[2,h]}})})}})},"esri/views/2d/layers/features/processors":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/promiseUtils"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});a.createProcessor=function(a,g){var h;"heatmap"===a?h=f.create(function(a){return m(["./processors/HeatmapProcessor"],a)}):"symbol"===a&&(h=f.create(function(a){return m(["./processors/SymbolProcessor"],a)}));return h.then(function(a){return a.default}).then(function(a){return new a(l({},
g.serviceAndViewInfo,{tileStore:g.tileStore,remoteClient:g.remoteClient}))})}})},"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper @dojo/framework/shim/Set ../../../../../core/Evented ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../tiling/TileKey".split(" "),function(m,a,l,f,h,g,k,e,n,d){Object.defineProperty(a,"__esModule",{value:!0});var b={added:[],
removed:[]},c=new h.default,q=new d(0,0,0,0);m=function(a){function d(b){var c=a.call(this)||this;c._tiles=new Map;c._index=e(9,k("csp-restrictions")?function(a){return{minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileScheme=b;return c}l(d,a);d.prototype.destroy=function(){this._tiles.clear()};d.prototype.has=function(a){return this._tiles.has(a)};d.prototype.get=function(a){return this._tiles.get(a)};d.prototype.findByKey=
function(a){return this._tiles.get(a.id)};d.prototype.intersections=function(a,b){var c="string"===typeof a?this.get(a):a;if(!c)return[];var d=b*c.resolution;b=c.bounds[0]-d;a=c.bounds[1]-d;for(var e=c.bounds[2]+d,c=c.bounds[3]+d,d=[],g=0,f=this._index.search({minX:b,minY:a,maxX:e,maxY:c});g<f.length;g++){var p=f[g],h=p.bounds.slice();h[0]=Math.max(h[0],b);h[1]=Math.max(h[1],a);h[2]=Math.min(h[2],e);h[3]=Math.min(h[3],c);0<h[2]-h[0]&&0<h[3]-h[1]&&d.push({bounds:h,tile:p})}return d};d.prototype.boundsIntersections=
function(a){return this._index.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]})};d.prototype.setViewState=function(a){var d=this.tileScheme.getTileCoverage(a,0);if(d){a=d.spans;var d=d.lodInfo,e=d.level;if(0<a.length)for(var g=0;g<a.length;g++)for(var f=a[g],p=f.row,h=f.colTo,k=f.colFrom;k<=h;k++){var l=q.set(e,p,d.normalizeCol(k),d.getWorldForColumn(k)).id;c.add(l);this.has(l)||(f=new n.default(this.tileScheme,l),this._tiles.set(l,f),this._index.insert(f),this.tiles.push(f),b.added.push(f))}for(a=
this.tiles.length-1;0<=a;a--)f=this.tiles[a],c.has(f.id)||(this._tiles.delete(f.id),this.tiles.splice(a,1),this._index.remove(f),b.removed.push(f));(b.added.length||b.removed.length)&&this.emit("update",b);c.clear();b.added.length=0;b.removed.length=0}};return d}(g);a.default=m})},"@dojo/framework/shim/Set":function(){(function(m){"object"===typeof module&&"object"===typeof module.exports?(m=m(require,exports),void 0!==m&&(module.exports=m)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ../has/has ./Symbol".split(" "),
m)})(function(m,a){Object.defineProperty(a,"__esModule",{value:!0});var l=m("tslib"),f=m("./global"),h=m("./iterator"),g=m("../has/has");m("./Symbol");a.Set=f.default.Set;g.default("es6-set")||(a.Set=(k=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";if(a)if(h.isArrayLike(a))for(var d=0;d<a.length;d++)this.add(a[d]);else try{for(var d=l.__values(a),b=d.next();!b.done;b=d.next())this.add(b.value)}catch(p){c={error:p}}finally{try{b&&!b.done&&(e=d.return)&&e.call(d)}finally{if(c)throw c.error;
}}var c,e}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};a.prototype.entries=function(){return new h.ShimIterator(this._setData.map(function(a){return[a,a]}))};a.prototype.forEach=function(a,d){for(var b=this.values(),c=b.next();!c.done;)a.call(d,c.value,c.value,this),c=b.next()};a.prototype.has=
function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new h.ShimIterator(this._setData)};Object.defineProperty(a.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new h.ShimIterator(this._setData)};a.prototype[Symbol.iterator]=function(){return new h.ShimIterator(this._setData)};return a}(),k[Symbol.species]=k,k));a.default=a.Set;var k})},"esri/core/Evented":function(){define(["require","exports",
"./tsSupport/extendsHelper","@dojo/framework/shim/Map"],function(m,a,l,f){var h=function(){function a(a){this.target=a}a.prototype.emit=function(a,e){var g=this;a=this._listenersMap&&this._listenersMap.get(a);if(!a)return!1;e=e||{};e.target||(e.target=this.target);a.slice().forEach(function(a){a.call(g.target,e)});return 0<a.length};a.prototype.on=function(a,e){var g=this;if(Array.isArray(a)){var d=a.map(function(a){return g.on(a,e)});return{remove:function(){return d.forEach(function(a){return a.remove()})}}}if(-1<
a.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new f.default);var b=this._listenersMap.get(a)||[];b.push(e);this._listenersMap.set(a,b);return{remove:function(){var b=g._listenersMap.get(a)||[];b.splice(b.indexOf(e),1)}}};a.prototype.once=function(a,e){var g=this,d;return d=this.on(a,function(a){d.remove();e.call(g.target,a)})};a.prototype.hasEventListener=function(a){a=this._listenersMap&&this._listenersMap.get(a);
return null!=a&&0<a.length};return a}();m=function(){function a(){this._emitter=new h(this)}a.prototype.emit=function(a,e){return this._emitter.emit(a,e)};a.prototype.on=function(a,e){return this._emitter.on(a,e)};a.prototype.once=function(a,e){return this._emitter.once(a,e)};a.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return a}();(function(a){a.EventedMixin=function(a){return function(a){function e(){return null!==a&&a.apply(this,arguments)||this}l(e,a);e.prototype.emit=
function(a,b){return this._emitter.emit(a,b)};e.prototype.on=function(a,b){return this._emitter.on(a,b)};e.prototype.once=function(a,b){return this._emitter.once(a,b)};e.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return e}(a)}})(m||(m={}));return m})},"@dojo/framework/shim/Map":function(){(function(m){"object"===typeof module&&"object"===typeof module.exports?(m=m(require,exports),void 0!==m&&(module.exports=m)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ../has/has ./Symbol".split(" "),
m)})(function(m,a){Object.defineProperty(a,"__esModule",{value:!0});var l=m("tslib"),f=m("./iterator"),h=m("./global"),g=m("./object"),k=m("../has/has");m("./Symbol");a.Map=h.default.Map;k.default("es6-map")||(a.Map=(e=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(f.isArrayLike(a))for(var b=0;b<a.length;b++){var c=a[b];this.set(c[0],c[1])}else try{for(var b=l.__values(a),d=b.next();!d.done;d=b.next())c=d.value,this.set(c[0],c[1])}catch(u){e={error:u}}finally{try{d&&
!d.done&&(g=b.return)&&g.call(b)}finally{if(e)throw e.error;}}var e,g}a.prototype._indexOfKey=function(a,b){for(var c=0,d=a.length;c<d;c++)if(g.is(a[c],b))return c;return-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=
function(){var a=this,b=this._keys.map(function(b,d){return[b,a._values[d]]});return new f.ShimIterator(b)};a.prototype.forEach=function(a,b){for(var c=this._keys,d=this._values,e=0,g=c.length;e<g;e++)a.call(b,d[e],c[e],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new f.ShimIterator(this._keys)};a.prototype.set=function(a,b){var c=this._indexOfKey(this._keys,
a),c=0>c?this._keys.length:c;this._keys[c]=a;this._values[c]=b;return this};a.prototype.values=function(){return new f.ShimIterator(this._values)};a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),e[Symbol.species]=e,e));a.default=a.Map;var e})},"@dojo/framework/shim/object":function(){(function(m){"object"===typeof module&&"object"===typeof module.exports?(m=m(require,exports),void 0!==m&&(module.exports=m)):"function"===typeof define&&define.amd&&define(["require","exports",
"./global","../has/has","./Symbol"],m)})(function(m,a){Object.defineProperty(a,"__esModule",{value:!0});var l=m("./global"),f=m("../has/has"),h=m("./Symbol");f.default("es6-object")?(m=l.default.Object,a.assign=m.assign,a.getOwnPropertyDescriptor=m.getOwnPropertyDescriptor,a.getOwnPropertyNames=m.getOwnPropertyNames,a.getOwnPropertySymbols=m.getOwnPropertySymbols,a.is=m.is,a.keys=m.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(g){for(var f=
[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];if(null==g)throw new TypeError("Cannot convert undefined or null to object");var h=Object(g);f.forEach(function(d){d&&a.keys(d).forEach(function(a){h[a]=d[a]})});return h},a.getOwnPropertyDescriptor=function(a,f){h.isSymbol(f);return Object.getOwnPropertyDescriptor(a,f)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},
a.is=function(a,f){return a===f?0!==a||1/a===1/f:a!==a&&f!==f});f.default("es2017-object")?(m=l.default.Object,a.getOwnPropertyDescriptors=m.getOwnPropertyDescriptors,a.entries=m.entries,a.values=m.values):(a.getOwnPropertyDescriptors=function(g){return a.getOwnPropertyNames(g).reduce(function(f,e){f[e]=a.getOwnPropertyDescriptor(g,e);return f},{})},a.entries=function(g){return a.keys(g).map(function(a){return[a,g[a]]})},a.values=function(g){return a.keys(g).map(function(a){return g[a]})})})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],
function(m){function a(b,c){if(!(this instanceof a))return new a(b,c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));c&&("function"===typeof c?this.toBBox=c:this._initFormat(c));this.clear()}function l(a,b){f(a,0,a.children.length,b,a)}function f(a,b,d,e,g){g||(g=c(null));g.minX=Infinity;g.minY=Infinity;g.maxX=-Infinity;g.maxY=-Infinity;for(var f;b<d;b++)f=a.children[b],h(g,a.leaf?e(f):f);return g}function h(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=
Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function g(a,b){return a.minX-b.minX}function k(a,b){return a.minY-b.minY}function e(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function n(a){return a.maxX-a.minX+(a.maxY-a.minY)}function d(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function b(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function c(a){return{children:a,height:1,leaf:!0,minX:Infinity,
minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function q(a,b,c,d,e){for(var g=[b,c],f;g.length;)c=g.pop(),b=g.pop(),c-b<=d||(f=b+Math.ceil((c-b)/d/2)*d,m(a,f,b,c,e),g.push(b,f,f,c))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var c=this.data,e=[],g=this.toBBox;if(!b(a,c))return e;for(var f=[],p,h,k,n;c;){p=0;for(h=c.children.length;p<h;p++)k=c.children[p],n=c.leaf?g(k):k,b(a,n)&&(c.leaf?e.push(k):d(a,n)?this._all(k,e):f.push(k));c=f.pop()}return e},collides:function(a){var c=
this.data,e=this.toBBox;if(!b(a,c))return!1;for(var g=[],f,p,h,k;c;){f=0;for(p=c.children.length;f<p;f++)if(h=c.children[f],k=c.leaf?e(h):h,b(a,k)){if(c.leaf||d(a,k))return!0;g.push(h)}c=g.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,
this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=c([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,e=this.toBBox(a),g=[],f=[],p,h,k,n;c||g.length;){c||(c=g.pop(),h=g[g.length-1],p=f.pop(),n=!0);if(c.leaf){a:{k=a;var q=c.children,l=b;if(l){for(var t=0;t<q.length;t++)if(l(k,q[t])){k=t;break a}k=-1}else k=q.indexOf(k)}if(-1!==k){c.children.splice(k,
1);g.push(c);this._condense(g);break}}n||c.leaf||!d(c,e)?h?(p++,c=h.children[p],n=!1):c=null:(g.push(c),f.push(p),p=0,h=c,c=c.children[0])}return this},toBBox:function(a){return a},compareMinX:g,compareMinY:k,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,d,e){var g=d-b+1,f=this._maxEntries,p;if(g<=f)return p=c(a.slice(b,d+1)),l(p,
this.toBBox),p;e||(e=Math.ceil(Math.log(g)/Math.log(f)),f=Math.ceil(g/Math.pow(f,e-1)));p=c([]);p.leaf=!1;p.height=e;var g=Math.ceil(g/f),f=g*Math.ceil(Math.sqrt(f)),h,k,n;for(q(a,b,d,f,this.compareMinX);b<=d;b+=f)for(k=Math.min(b+f-1,d),q(a,b,k,g,this.compareMinY),h=b;h<=k;h+=g)n=Math.min(h+g-1,k),p.children.push(this._build(a,h,n,e-1));l(p,this.toBBox);return p},_chooseSubtree:function(a,b,c,d){for(var g,f,p,h,k,n,q,l;;){d.push(b);if(b.leaf||d.length-1===c)break;q=l=Infinity;g=0;for(f=b.children.length;g<
f;g++)p=b.children[g],k=e(p),n=(Math.max(p.maxX,a.maxX)-Math.min(p.minX,a.minX))*(Math.max(p.maxY,a.maxY)-Math.min(p.minY,a.minY))-k,n<l?(l=n,q=k<q?k:q,h=p):n===l&&k<q&&(q=k,h=p);b=h||b.children[0]}return b},_insert:function(a,b,c){var d=this.toBBox;c=c?a:d(a);var d=[],e=this._chooseSubtree(c,this.data,b,d);e.children.push(a);for(h(e,c);0<=b;)if(d[b].children.length>this._maxEntries)this._split(d,b),b--;else break;this._adjustParentBBoxes(c,d,b)},_split:function(a,b){var d=a[b],e=d.children.length,
g=this._minEntries;this._chooseSplitAxis(d,g,e);e=this._chooseSplitIndex(d,g,e);e=c(d.children.splice(e,d.children.length-e));e.height=d.height;e.leaf=d.leaf;l(d,this.toBBox);l(e,this.toBBox);b?a[b-1].children.push(e):this._splitRoot(d,e)},_splitRoot:function(a,b){this.data=c([a,b]);this.data.height=a.height+1;this.data.leaf=!1;l(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var d,g,p,h,k,n,q;k=n=Infinity;for(d=b;d<=c-b;d++)g=f(a,0,d,this.toBBox),p=f(a,d,c,this.toBBox),h=Math.max(0,Math.min(g.maxX,
p.maxX)-Math.max(g.minX,p.minX))*Math.max(0,Math.min(g.maxY,p.maxY)-Math.max(g.minY,p.minY)),g=e(g)+e(p),h<k?(k=h,q=d,n=g<n?g:n):h===k&&g<n&&(n=g,q=d);return q},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:g,e=a.leaf?this.compareMinY:k,f=this._allDistMargin(a,b,c,d);b=this._allDistMargin(a,b,c,e);f<b&&a.children.sort(d)},_allDistMargin:function(a,b,c,d){a.children.sort(d);d=this.toBBox;var e=f(a,0,b,d),g=f(a,c-b,c,d),p=n(e)+n(g),k,q;for(k=b;k<c-b;k++)q=a.children[k],h(e,a.leaf?d(q):
q),p+=n(e);for(k=c-b-1;k>=b;k--)q=a.children[k],h(g,a.leaf?d(q):q),p+=n(g);return p},_adjustParentBBoxes:function(a,b,c){for(;0<=c;c--)h(b[c],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():l(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+
a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function m(f,h,g,k,e){for(;k>g;){if(600<k-g){var n=k-g+1,d=h-g+1,b=Math.log(n),c=.5*Math.exp(2*b/3),b=.5*Math.sqrt(b*c*(n-c)/n)*(0>d-n/2?-1:1);m(f,h,Math.max(g,Math.floor(h-d*c/n+b)),Math.min(k,Math.floor(h+(n-d)*c/n+b)),e)}n=f[h];d=g;c=k;a(f,g,h);for(0<e(f[k],n)&&a(f,g,k);d<c;){a(f,d,c);d++;for(c--;0>e(f[d],n);)d++;for(;0<e(f[c],n);)c--}0===e(f[g],n)?
a(f,g,c):(c++,a(f,c,k));c<=h&&(g=c+1);h<=c&&(k=c-1)}}function a(a,h,g){var f=a[h];a[h]=a[g];a[g]=f}function l(a,h){return a<h?-1:a>h?1:0}return function(a,h,g,k,e){m(a,h,g||0,k||a.length-1,e||l)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports @dojo/framework/shim/Set ../../../../../core/ArrayPool ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(m,a,l,f,h,g,k){function e(a,
d){var b=a.bounds,c=d.bounds;return a.key.id!==d.key.id&&a.key.world===d.key.world&&b[0]<=c[0]&&b[1]<=c[1]&&b[2]>=c[2]&&b[3]>=c[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=e;a.isChildOf=function(a,d){return e(d,a)};m=function(){function a(a,b){this.bounds=h.create();this.key=new k(0,0,0,0);this.objectIds=new l.default;this.key.set(b);b=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=b.resolution;this.scale=
b.scale;this.level=b.level;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var d=this.key.getChildKeys(),b=f.acquire(),c=0;c<d.length;c++)b[c]=new a(this.tileInfoView,d[c]);return b};a.prototype.getQuantizationParameters=function(){return g.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,
extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();a.Tile=m;a.default=m})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k,e,
n){Object.defineProperty(a,"__esModule",{value:!0});var d=new k.default({upperLeft:"upper-left",lowerLeft:"lower-left"});m=function(a){function b(b){b=a.call(this,b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}l(b,a);g=b;b.prototype.clone=function(){return new g(e.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var g;f([n.property({type:h.Extent,json:{write:!0}})],b.prototype,"extent",void 0);f([n.property({type:["view",
"edit"],json:{write:!0}})],b.prototype,"mode",void 0);f([n.property({type:String,json:{read:d.read,write:d.write}})],b.prototype,"originPosition",void 0);f([n.property({type:Number,json:{write:!0}})],b.prototype,"tolerance",void 0);return b=g=f([n.subclass("esri.tasks.support.QuantizationParameters")],b)}(n.declared(g));a.default=m})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(m,a,l){return function(){function a(a,g,f,e){this.set(a,g,
f,e)}a.from=function(f,g,k,e){return a.pool.acquire(f,g,k,e)};a.getId=function(a,g,f,e){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+g+"/"+f+"/"+e};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};
a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,g,f,e){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),g=a[1],f=a[2],e=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(g),this.col=parseFloat(f),this.world=parseFloat(e)):(this.level=+a,this.row=+g,this.col=+f,this.world=+e||0);return this};a.prototype.toString=
function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var f=this.level+1,g=this.row<<1,k=this.col<<1,e=this.world;return[a.pool.acquire(f,g,k,e),a.pool.acquire(f,g,k+1,e),a.pool.acquire(f,g+1,k,e),a.pool.acquire(f,g+1,k+1,e)]};a.prototype.compareRowMajor=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(f){return f.map(function(g){return a.from(g)}).sort(function(a,f){return a.compareRowMajor(f)}).map(function(a){return a.id})};
a.pool=new l(a,!0,null,25,50);return a}()})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(m,a,l,f,h,g,k){var e=new g("0/0/0/0"),n=function(){function a(a,b,d,e,g,f,h,k){this.x=a;this.ymin=b;this.ymax=d;this.invM=e;this.leftAdjust=g;this.rightAdjust=f;this.leftBound=h;this.rightBound=k}a.create=function(b,d){var c;b[1]>d[1]&&(c=[d,b],b=c[0],d=c[1]);c=b[0];b=b[1];
var e=d[0];d=d[1];var g=e-c,f=d-b,f=0!==f?g/f:0,h=(Math.ceil(b)-b)*f,k=(Math.floor(b)-b)*f;return new a(c,Math.floor(b),Math.ceil(d),f,0>g?h:k,0>g?k:h,0>g?e:c,0>g?c:e)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),d=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=
a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var d=a.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=d.map(function(c){return f.create(a,c,b)});d.forEach(function(a,b){c._infoByLevel[a.level]=e[b];c._infoByScale[a.scale]=e[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});
a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,d){void 0===d&&(d=!1);e.set(b);return(b=this._infoByLevel[e.level])?b.getTileBounds(a,e,d):a};a.prototype.getTileCoords=function(a,b,d){void 0===d&&(d=!1);e.set(b);return(b=this._infoByLevel[e.level])?b.getTileCoords(a,e,d):a};a.prototype.getTileCoverage=function(a,b,e){void 0===b&&(b=192);void 0===e&&(e="closest");e="closest"===e?this.getClosestInfoForScale(a.scale):
this.getSmallestInfoForScale(a.scale);var c=h.pool.acquire(e),g=this._wrap,f;f=Infinity;var p=-Infinity,q,l,m=c.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=-b;d[1][0]=d[2][0]=a.size[0]+b;d[2][1]=d[3][1]=a.size[1]+b;for(b=0;b<d.length;b++){var x=d[b];a.toMap(x,x);x[0]=e.getColumnForX(x[0]);x[1]=e.getRowForY(x[1])}a=[];x=3;for(b=0;4>b;b++){if(d[b][1]!==d[x][1]){var E=n.create(d[b],d[x]);f=Math.min(E.ymin,f);p=Math.max(E.ymax,p);void 0===a[E.ymin]&&(a[E.ymin]=[]);a[E.ymin].push(E)}x=b}if(null==f||null==p||
100<p-f)return null;for(x=[];f<p;){null!=a[f]&&(x=x.concat(a[f]));q=Infinity;l=-Infinity;for(b=x.length-1;0<=b;b--)E=x[b],q=Math.min(q,E.getLeftCol()),l=Math.max(l,E.getRightCol());q=Math.floor(q);l=Math.floor(l);if(f>=e.first[1]&&f<=e.last[1])if(g)if(e.size[0]<e.worldSize[0])for(E=Math.floor(l/e.worldSize[0]),b=Math.floor(q/e.worldSize[0]);b<=E;b++)m.push(new k(f,Math.max(e.getFirstColumnForWorld(b),q),Math.min(e.getLastColumnForWorld(b),l)));else m.push(new k(f,q,l));else q>e.last[0]||l<e.first[0]||
(q=Math.max(q,e.first[0]),l=Math.min(l,e.last[0]),m.push(new k(f,q,l)));f+=1;for(b=x.length-1;0<=b;b--)E=x[b],E.ymax>=f?E.incrRow():x.splice(b,1)}return c};a.prototype.getTileParentId=function(a){e.set(a);a=this._lodInfos.indexOf(this._infoByLevel[e.level])-1;if(0>a)return null;this._getTileIdAtLOD(e,this._lodInfos[a],e);return e.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,b){e.set(b);b=this._infoByLevel[e.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(e,c,e);for(var d=c.denormalizeCol(e.col,e.world),g=0,f=a.spans;g<f.length;g++){var h=f[g];if(h.row===e.row&&h.colFrom<=d&&h.colTo>=d)return!0}}if(c.resolution<b.resolution){f=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=f[0];var d=f[1],g=f[2],f=f[3],k=b.denormalizeCol(e.col,e.world),h=c.getColumnForX(b.getXForColumn(k)),n=c.getRowForY(b.getYForRow(e.row)),k=c.getColumnForX(b.getXForColumn(k+1))-1;b=c.getRowForY(b.getYForRow(e.row+1))-1;return!(h>f||k<g||n>d||b<a)}var q=c.denormalizeCol(e.col,e.world);return a.spans.some(function(a){return a.row===e.row&&a.colFrom<=q&&a.colTo>=q})};a.prototype.normalizeBounds=function(a,b,d){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=l.getInfo(this.tileInfo.spatialReference),
d=-d*(b.valid[1]-b.valid[0]),a[0]+=d,a[2]+=d);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c])return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-
a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,d){var c=this._infoByLevel[d.level];a.set(d);
if(b.resolution<c.resolution)return null;if(b.resolution===c.resolution)return a;a.level=b.level;a.col=Math.floor(d.col*c.resolution/b.resolution+.01);a.row=Math.floor(d.row*c.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(m,a,l,f){function h(a,e,g){a[0]=e;a[1]=g;return a}var g=new f("0/0/0/0");return function(){function a(a,g,d,b,c,f,p,h,k,l,m,C){this.level=
a;this.resolution=g;this.scale=d;this.origin=b;this.first=c;this.last=f;this.size=p;this.norm=h;this.worldStart=k;this.worldEnd=l;this.worldSize=m;this.wrap=C}a.create=function(e,g,d){var b=l.getInfo(e.spatialReference),c=[e.origin.x,e.origin.y],f=[e.size[0]*g.resolution,e.size[1]*g.resolution],p=[-Infinity,-Infinity],k=[Infinity,Infinity],n=[Infinity,Infinity];d&&(h(p,Math.max(0,Math.floor((d.xmin-c[0])/f[0])),Math.max(0,Math.floor((c[1]-d.ymax)/f[1]))),h(k,Math.max(0,Math.floor((d.xmax-c[0])/f[0])),
Math.max(0,Math.floor((c[1]-d.ymin)/f[1]))),h(n,k[0]-p[0]+1,k[1]-p[1]+1));var w;e.isWrappable?(e=[Math.ceil(Math.round(2*b.origin[1]/g.resolution)/e.size[0]),n[1]],b=[Math.floor((b.origin[0]-c[0])/f[0]),p[1]],d=[e[0]+b[0]-1,k[1]],w=!0):(b=p,d=k,e=n,w=!1);return new a(g.level,g.resolution,g.scale,c,p,k,n,f,b,d,e,w)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var e=this.worldSize[0];return 0>a?e-1-Math.abs((a+1)%e):a%e};a.prototype.denormalizeCol=function(a,g){return this.wrap?this.worldSize[0]*
g+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-
a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,f,d){void 0===d&&(d=!1);g.set(f);var b=d?g.col:this.denormalizeCol(g.col,g.world),c=g.row;f=this.getXForColumn(b);d=this.getYForRow(c+1);b=this.getXForColumn(b+1);c=this.getYForRow(c);a[0]=f;a[1]=d;a[2]=b;a[3]=c;return a};a.prototype.getTileCoords=function(a,f,d){void 0===d&&(d=!1);g.set(f);f=d?g.col:this.denormalizeCol(g.col,g.world);Array.isArray(a)?h(a,this.getXForColumn(f),
this.getYForRow(g.row)):(a.x=this.getXForColumn(f),a.y=this.getYForRow(g.row));return a};return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(m,a,l,f,h){return function(){function a(a){this.lodInfo=a;this.spans=l.acquire()}a.prototype.release=function(){for(var a=0,e=this.spans;a<e.length;a++)h.pool.release(e[a]);l.release(this.spans)};a.prototype.forEach=function(a,e){var g=this.spans,
d=this.lodInfo,b=d.level;if(0!==g.length)for(var c=0;c<g.length;c++)for(var f=g[c],p=f.row,h=f.colTo,f=f.colFrom;f<=h;f++)a.call(e,b,p,d.normalizeCol(f),d.getWorldForColumn(f))};a.pool=new f(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(m,a,l){return function(){function a(a,g,f){this.row=a;this.colFrom=g;this.colTo=f}a.pool=new l(a,!0);return a}()})},"esri/views/2d/layers/features/controllers/OnDemandController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Set ../../../../../geometry ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FeatureProcessing ../../../../../tasks/operations/query ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../engine/webgl/Utils ./BaseController ../support/DataTile ../support/DataTileFeaturesIndex ../support/Tile ../support/TileUpdateQueue ../../../tiling/TileQueue ../../../../../views/support/QueueProcessor".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F,D,G,H,P){Object.defineProperty(a,"__esModule",{value:!0});var O=c.getLogger("esri.views.2d.layers.features.controllers.OnDemandController");m=b("esri-featurelayer-webgl");b=b("esri-mobile");var N=m&&"object"===typeof m&&null!=m.maxDrillLevel?m.maxDrillLevel:b?1:4,J=m&&"object"===typeof m&&null!=m.maxRecordCountFactor?m.maxRecordCountFactor:b?1:3,R=m&&"object"===typeof m&&null!=m.enablePBFQuery?m.enablePBFQuery:!0,M=new e.default,W=[];e=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.type="on-demand";b._queryInfoHash=null;b._processingInMainThread=!1;b._dataTileIndex=new F.default;b._editsQueue=new P({concurrency:1,ordered:!0,process:function(a){return b._processEditsEvent(a)}});return b}l(b,a);b.prototype.initialize=function(){var a=this;this._fetchQueue=new H({concurrency:10,strategy:"center-first",tileInfoView:this.tileStore.tileScheme,process:function(b){return a._fetchTile(b)}});this._updateQueue=new G.default({tileInfoView:this.tileStore.tileScheme,
process:function(b,c){return a._updateTile(b,c)}});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};b.prototype.destroy=function(){this._fetchQueue.clear();this._updateQueue.clear();this._editsQueue.destroy();this.queryEngine&&(this.queryEngine.destroy(),this._set("queryEngine",null))};Object.defineProperty(b.prototype,"processing",{get:function(){return A.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",
{get:function(){return this._fetchQueue.updating||this._updateQueue.updating},enumerable:!0,configurable:!0});b.prototype.onEdits=function(a){var b=this;this._fetchQueue.pause();this._fetchQueue.reset();this._editsQueue.push(a).then(function(){0===b._editsQueue.length&&b._fetchQueue.resume()})};b.prototype.queryFeatures=function(a){return this.queryEngine?this.queryEngine.executeQuery(a):q.resolve({features:[],fields:[]})};b.prototype.queryFeatureCount=function(a){return this.queryEngine?this.queryEngine.executeQueryForCount(a):
q.resolve(0)};b.prototype.queryObjectIds=function(a){return this.queryEngine?this.queryEngine.executeQueryForIds(a):q.resolve([])};b.prototype.queryExtent=function(a){return this.queryEngine?this.queryEngine.executeQueryForExtent(a):q.reject({count:0,extent:null})};b.prototype.redraw=function(){this._updateQueue.pause();this._manageTiles(this.tileStore.tiles);this._updateQueue.resume()};b.prototype.refresh=function(){this.queryEngine&&this.queryEngine.destroy();this.featureStore&&this.featureStore.clear();
this._dataTileIndex.featureStore=null;this._dataTileIndex.clear();this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();this._fetchQueue.reset();this._updateQueue.clear();if(this.processor){var a=this.processor.queryInfo,b=a.definitionExpression,c=a.gdbVersion,a=a.historicMoment;this._set("featureStore",new u.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1}));this._set("queryEngine",new w.default({definitionExpression:b,fields:this.service.fields,
geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,gdbVersion:c,historicMoment:null!=a&&new Date(a),featureStore:this.featureStore}));this._dataTileIndex.featureStore=this.featureStore;this._dataTileIndex.clear();this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume();this._manageTiles(this.tileStore.tiles)}};b.prototype.setFilter=function(a){var b=a.index,c=a.filter;
return k(this,void 0,void 0,function(){var a;return g(this,function(d){switch(d.label){case 0:if(!this.processor)return this.setFilterBase(b,c),[2,{show:[],hide:[]}];this._updateQueue.pause();return[4,this.setFilterBase(b,c)];case 1:return a=d.sent(),this.processor.supportsTileUpdates||(this._updateQueue.clear(),this._manageTiles(this.tileStore.tiles)),this._updateQueue.resume(),[2,a]}})})};b.prototype.setViewState=function(a){this._fetchQueue.state=a;this._updateQueue.state=a};b.prototype.onTileUpdate=
function(a){this.queryEngine&&this._manageTiles(a.added,a.removed)};b.prototype._manageTiles=function(a,b){void 0===b&&(b=null);for(var c=this._dataTileIndex,d=this._fetchQueue,e=this._updateQueue,g="esriGeometryPoint"===this.service.geometryType,f=function(a){var b=c.get(a.id);b?(b.displayTile=a,g?c.forEach(function(c){D.isChildOf(c,b)&&(c.displayTile=a)}):b.done=!1):(b=new B.default,b.tile=a.clone(),b.displayTile=a,c.add(b));p._processDataTile(b)},p=this,h=0;h<a.length;h++){var k=a[h];f(k)}if(b)for(a=
0;a<b.length;a++)k=b[a],M.add(k),e.cancel(k.id);c.forEach(function(a){M.has(a.displayTile)&&W.push(a)});for(e=0;e<W.length;e++)k=W[e],d.has(k.id)&&d.getPromise(k.id).cancel(),c.delete(k);W.length=0;M.clear()};b.prototype._processDataTile=function(a){var b=this,c=a.key,e=this._fetchQueue,g=c.id,f=this._queryInfoHash,c=c.level-a.displayTile.key.level>=N;this._dataTileIndex.add(a);if(a.done||e.has(g)){if(a.queryInfoHash!==f||a.returnExceeded!==c)if(a.done)a.done=!1;else if(e.isOngoing(g))e.getPromise(g).cancel();
else{a.queryInfoHash=f;a.returnExceeded=c;return}}else a.queryInfoHash=f,a.returnExceeded=c;a.done?this._invalidateTile(a.displayTile):e.has(g)||e.push(a).then(function(c){return b._handleResponse(a,c)}).catch(function(b){"cancel"!==b.dojoType&&O.error(new d("featurelayer-controller:tile-error","Encountered an error when handling tile response",b));a.done=!0})};b.prototype._handleResponse=function(a,b){a.done=!0;t.hydrateOptimizedFeatureSet(b);if(b.exceededTransferLimit)if(a.returnExceeded)this._dataTileIndex.setTileFeatures(a,
b.features),this._deleteChildrenDataTiles(a);else{b=0;for(var c=a.tile.createChildTiles();b<c.length;b++){var d=c[b],e=new B.default;e.tile=d;e.displayTile=a.displayTile;this._processDataTile(e)}}else this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);this._invalidateTile(a.tile)};b.prototype._deleteChildrenDataTiles=function(a){this._dataTileIndex.forEach(function(b){D.isChildOf(b,a)&&W.push(b)});for(var b=0;b<W.length;b++){var c=W[b];this._fetchQueue.has(c.id)&&this._fetchQueue.getPromise(c.id).cancel();
this._dataTileIndex.delete(c)}W.length=0};b.prototype._fetchTile=function(a){var b=this;a=this._createQuery(a.displayTile,a.tile,a.returnExceeded);var c=this.service.source;return R&&this.service.capabilities.query.supportsFormatPBF?C.executeQueryPBF(c,a,{type:"optimized"}).then(function(a){return a.data}):C.executeQuery(c,a).then(function(a){return t.convertFromFeatureSet(a.data,b.service.objectIdField)})};b.prototype._invalidateTile=function(a){var b=this._updateQueue,c=0;for(a=this.tileStore.intersections(a,
this.processor.queryInfo.pixelBuffer);c<a.length;c++){var d=a[c].tile;b.push(d.id,d.updateTimestamp)}};b.prototype._updateTile=function(a,b){var c=this,d=this.tileStore.get(a);a=this.processor.queryInfo;a={pixelBuffer:a.pixelBuffer,returnGeometry:a.returnGeometry,returnCentroid:a.returnCentroid};var e=this._getFilterFlags.bind(this);a=this.queryEngine.executeTileQuery(d,a,e);var g=a.objectIds,f={geometryType:this.service.geometryType,features:a.features,fields:this.service.fields,objectIdFieldName:this.service.objectIdField,
transform:{originPosition:"upperLeft",scale:[d.resolution,d.resolution],translate:[d.bounds[0],d.bounds[3]]}};return this._applyProcessing(f).catch(function(a){a&&"cancel"!==a.dojoType&&O.error("update-tile",a);return f}).then(function(a){var e=[],f=!0;c._dataTileIndex.forEach(function(a){d.id!==a.id&&D.isChildOf(a,d)&&f&&!a.done&&(f=!1)});f&&d&&d.objectIds.forEach(function(a){g.has(a)||e.push(a)});g.forEach(function(a){d.objectIds.add(a)});d.updateTimestamp=b;return c.processor.onTileData(d,{addOrUpdate:a.features,
remove:e,transformParams:x.getTransformParams(a)}).catch(function(a){a&&"cancel"!==a.dojoType&&O.error("update-tile",a)})})};b.prototype._processEditsEvent=function(a){var b=this;return q.create(function(c,d){d=function(a){return a.objectId};var e=a.deletedFeatures.map(d),g=b._dataTileIndex.deleteFeaturesById(e),e=a.addedFeatures.concat(a.updatedFeatures).map(d);if(e.length)d=b.service.source,e=b._createObjectIdsQuery(e),C.executeQuery(d,e).then(function(a){if((a=a.data)&&a.features&&a.features.length)for(a=
t.convertFromFeatureSet(a,b.service.objectIdField).features,g.push.apply(g,b._dataTileIndex.addOrUpdateFeatures(a)),a=0;a<g.length;a++)b._invalidateTile(g[a].tile)}).then(c,c);else{for(d=0;d<g.length;d++)b._invalidateTile(g[d].tile);c()}})};b.prototype._switchProcessor=function(a,b){var c=a.queryInfo;b=c.definitionExpression;var d=c.gdbVersion,c=c.historicMoment;a=this._createQueryInfoHash(a);this._queryInfoHash!==a&&(this._queryInfoHash=a,this.queryEngine&&this.queryEngine.destroy(),this.featureStore&&
this.featureStore.clear(),this._set("featureStore",new u.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1})),this._set("queryEngine",new w.default({definitionExpression:b,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,gdbVersion:d,historicMoment:null!=c&&new Date(c),featureStore:this.featureStore,timeInfo:this.service.timeInfo})),this._dataTileIndex.featureStore=
this.featureStore,this._dataTileIndex.forEach(function(a){a.done=!1}));this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();this._fetchQueue.reset();this._updateQueue.clear();this._manageTiles(this.tileStore.tiles);this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume()};b.prototype._createQuery=function(a,b,c){void 0===c&&(c=!0);var d=this.service.geometryType,e=this._createDefaultQuery();a="esriGeometryPoint"===this.service.geometryType?
b:a;e.maxRecordCountFactor=J;e.resultType="tile";e.returnExceededLimitFeatures=c;e.geometry=new n.Extent({xmin:b.bounds[0],ymin:b.bounds[1],xmax:b.bounds[2],ymax:b.bounds[3],spatialReference:this.spatialReference});if(this.service.capabilities.query.supportsQuantization)e.quantizationParameters=new z.default({mode:"view",originPosition:"upper-left",tolerance:a.resolution,extent:new n.Extent({xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference})}),
"esriGeometryPolyline"===d&&(e.maxAllowableOffset=a.resolution);else if("esriGeometryPolyline"===d||"esriGeometryPolygon"===d)e.maxAllowableOffset=a.resolution;return e};b.prototype._createObjectIdsQuery=function(a){var b=this._createDefaultQuery();b.objectIds=a;return b};b.prototype._createDefaultQuery=function(){var a=this,b=this.processor.queryInfo,c=new y;c.outSpatialReference=this.spatialReference;var d=b.outFields,e=b.orderByFields;this.processing&&(d=d&&d.filter(function(b){return!a.processing.getField(b)}),
e=e&&e.filter(function(b){return!a.processing.getField(b)}));d=.75<=d.length/this.service.fields.length?["*"]:d;c.gdbVersion=b.gdbVersion;c.historicMoment=null!=b.historicMoment?new Date(b.historicMoment):null;c.outFields=d;c.where=b.definitionExpression||"1\x3d1";c.returnGeometry=!0;c.returnCentroid=b.returnCentroid;c.orderByFields=e;return c};b.prototype._applyProcessing=function(a){var b=this.processing;if(!b)return q.resolve(a);if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",
{featureSet:a});try{var c=b.process(a,b.options);return c?"then"in c?c:q.resolve(c):q.reject(new d("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(ba){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};b.prototype._createQueryInfoHash=function(a){var b=this,c=a.queryInfo,d=c.orderByFields,c=c.outFields,e=a.queryInfo;a=e.definitionExpression;var g=e.gdbVersion,e=e.historicMoment;this.processing&&(c=c&&c.filter(function(a){return!b.processing.getField(a)}),
d=d&&d.filter(function(a){return!b.processing.getField(a)}));c&&c.sort();d&&d.sort();return JSON.stringify({definitionExpression:a,outFields:.75<=c.length/this.service.fields.length?["*"]:c,orderByFields:d,gdbVersion:g,historicMoment:e})};f([p.property()],b.prototype,"_fetchQueue",void 0);f([p.property()],b.prototype,"_updateQueue",void 0);f([p.property({readOnly:!0,dependsOn:["configuration"]})],b.prototype,"processing",null);f([p.property({readOnly:!0})],b.prototype,"queryEngine",void 0);f([p.property({readOnly:!0})],
b.prototype,"featureStore",void 0);f([p.property({dependsOn:["_fetchQueue.updating","_updateQueue.updating"]})],b.prototype,"updating",null);return b=f([p.subclass()],b)}(p.declared(E.default));a.default=e})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/Map ../../../core/Error ../../../core/has ../../../core/Logger ../../../core/libs/rbush/rbush ../../../geometry/support/aaBoundingRect ../featureConversionUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){Object.defineProperty(a,"__esModule",{value:!0});var c=[],q=e.getLogger("esri.layers.graphics.data.FeatureStore"),p={minX:0,minY:0,maxX:0,maxY:0};m=function(){function a(a){this._featuresById=new h.default;this._boundsByFeature=new h.default;this._featuresByBounds=new h.default;this._index=n(9,k("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]","[2]","[3]"]);this._geometryInfo=a}Object.defineProperty(a.prototype,"geometryType",
{get:function(){return this._geometryInfo.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this._geometryInfo.hasM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasZ",{get:function(){return this._geometryInfo.hasZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",
{get:function(){if(!this.numFeatures)return null;var a=d.create(d.NEGATIVE_INFINITY);this._boundsByFeature.forEach(function(b){b&&(a[0]=Math.min(b[0],a[0]),a[1]=Math.min(b[1],a[1]),a[2]=Math.max(b[2],a[2]),a[3]=Math.max(b[3],a[3]))});return a},enumerable:!0,configurable:!0});a.prototype.setEngine=function(a){this._engine=a};a.prototype.add=function(a){this._add(a,c);this._index.load(c);this._clearCache();c.length=0};a.prototype.addMany=function(a){for(var b=0;b<a.length;b++)this._add(a[b],c);this._index.load(c);
this._clearCache();c.length=0};a.prototype.clear=function(){this._featuresById.clear();this._boundsByFeature.clear();this._featuresByBounds.clear();this._index.clear();this._clearCache()};a.prototype.removeManyById=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this._featuresById.get(c);if(d){var e=this._boundsByFeature.get(d);e&&(this._index.remove(e),this._featuresByBounds.delete(e));this._boundsByFeature.delete(d)}this._featuresById.delete(c)}this._clearCache()};a.prototype.forEachBounds=
function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=this._boundsByFeature.get(d);e&&b(e,d)}};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.has=function(a){return this._featuresById.has(a)};a.prototype.forEach=function(a){this._featuresById.forEach(function(b){return a(b)})};a.prototype.forEachInBounds=function(a,b){var c=0,d=this._index;p.minX=a[0];p.minY=a[1];p.maxX=a[2];p.maxY=a[3];for(a=d.search(p);c<a.length;c++)b(this._featuresByBounds.get(a[c]))};a.prototype.transferIds=
function(a,b){for(var c=[],d=0;d<b.length;d++){var e=this._featuresById.get(b[d]);e&&(this._remove(e),c.push(e))}a.addMany(c);this._clearCache()};a.prototype.transferIdRange=function(a,b,c){for(var d=[];b<c;b++){var e=this._featuresById.get(b);e&&(this._remove(e),d.push(e))}a.addMany(d);this._clearCache()};a.prototype.transferIf=function(a,b){var c=this,d=[];this._featuresById.forEach(function(a,e){b(a)&&(c._remove(a),d.push(a))});a.addMany(d);this._clearCache()};a.prototype.transferAll=function(a){var b=
this,c=[];this._featuresById.forEach(function(a,d){b._remove(a);c.push(a)});a.addMany(c);this._clearCache()};a.prototype._clearCache=function(){this._engine&&this._engine.clearCache()};a.prototype._add=function(a,c){if(a){var e=a.objectId;if(null==e)q.error(new g("featurestore:invalid-feature","feature id is missing",{feature:a}));else{var f=this._featuresById.get(e),p;f&&(p=this._boundsByFeature.get(f))&&(this._index.remove(p),this._boundsByFeature.delete(f),this._featuresByBounds.delete(p));a.geometry?
(p=b.getBoundsOptimizedGeometry(p||d.create(),a.geometry,this._geometryInfo.hasZ,this._geometryInfo.hasM),this._boundsByFeature.set(a,p),this._featuresByBounds.set(p,a),this._featuresById.set(e,a),c.push(p)):(this._boundsByFeature.set(a,null),this._featuresById.set(e,a))}}};a.prototype._remove=function(a){var b;if(a){if(b=this._boundsByFeature.get(a))this._index.remove(b),this._boundsByFeature.delete(a),this._featuresByBounds.delete(b);this._featuresById.delete(a.objectId)}};return a}();a.default=
m})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/array @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../core/asyncUtils ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/PromiseQueue".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F){function D(a,b,c,d,e,g,f,p,h){h||(h=G);f&&!g?d.forEachInBounds(e,function(d){if(!b.has(d.objectId)){var e=B.getCentroid(c,d,p),g=d.attributes;e&&(b.add(d.objectId),a.push(new P(g,null,e,h(d))))}}):g&&!f?d.forEachInBounds(e,function(d){if(!b.has(d.objectId)){var e=d.attributes,g=B.getGeometry(c,d,0,p);g&&(b.add(d.objectId),a.push(new P(e,g,null,h(d))))}}):d.forEachInBounds(e,function(d){if(!b.has(d.objectId)){var e=d.attributes,g=B.getGeometry(c,
d,0,p),f=B.getCentroid(c,d,p);g&&f&&(b.add(d.objectId),a.push(new P(e,g,f,h(d))))}})}Object.defineProperty(a,"__esModule",{value:!0});var G=function(a){return 1},H=d.getLogger("esri.layers.graphics.data.QueryEngine"),P=function(){return function(a,b,c,d){this.attributes=a;this.geometry=b;this.centroid=c;this.filterFlags=d}}(),O=new g.default,N=new b.Storage(2E6),J=0;m=function(){function a(a){var c=this;this.capabilities={query:z.queryCapabilities};this.fieldsMap=new h.default;this.geometryType=a.geometryType;
this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.featureStore=a.featureStore;this.featureStore.setEngine(this);this.timeInfo=a.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new b(J++ +"$$",N));a.fields.forEach(function(a){c.fieldsMap.set(a.name.trim(),a);
c.fieldsMap.set(a.name.trim().toLowerCase(),a)});a.scheduler&&a.priority&&(this._frameQueue=new F.PromiseQueue,this._frameTask=a.scheduler.registerTask(a.priority,function(a){return c._update(a)},function(){return 0<c._frameQueue.length}))}a.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this.fieldsMap.clear()};Object.defineProperty(a.prototype,
"fullExtent",{get:function(){var a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:B.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"timeExtent",{get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=E.getTimeExtent(this.timeInfo,this.featureStore):null},enumerable:!0,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&
this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};a.prototype.executeQuery=function(a){var b=this;void 0===a&&(a={});var c=n.clone(a);return k.safeCast(B.normalizeQuery(c,this.definitionExpression,this.spatialReference)).then(function(a){return b._schedule(a)}).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeTimeQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeAttributesQuery(c)}).catch(function(a){if(a===
B.QUERY_ENGINE_EMPTY_RESULT)return new y.default([],null,b);throw a;}).then(function(a){return a.createQueryResponse(c)})};a.prototype.executeQueryForCount=function(a){var b=this;void 0===a&&(a={});var c=n.clone(a);c.returnGeometry=!1;c.returnCentroid=!1;c.outSR=null;return k.safeCast(B.normalizeQuery(c,this.definitionExpression,this.spatialReference)).then(function(a){return b._schedule(a)}).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeTimeQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return a.size}).catch(function(a){if(a===
B.QUERY_ENGINE_EMPTY_RESULT)return 0;throw a;})};a.prototype.executeQueryForExtent=function(a){var b=this;void 0===a&&(a={});var c=n.clone(a),d=c.outSR;return k.safeCast(B.normalizeQuery(c,this.definitionExpression,this.spatialReference)).then(function(a){return b._schedule(a)}).then(function(a){return b._checkQuerySupport(a)}).then(function(){c.returnGeometry=!0;c.returnCentroid=!1;c.outSR=null;return c}).then(function(a){return b._reschedule(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeTimeQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){var c=
a.size;if(!c)return{count:c,extent:null};var e={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:B.cleanFromGeometryEngine(b.spatialReference)};b.featureStore.forEachBounds(a.items,function(a){e.xmin=Math.min(a[0],e.xmin);e.ymin=Math.min(a[1],e.ymin);e.xmax=Math.max(a[2],e.xmax);e.ymax=Math.max(a[3],e.ymax)});a=C.project(e,a.spatialReference,d);a.spatialReference=B.cleanFromGeometryEngine(d||b.spatialReference);
if(0===a.xmax-a.xmin){var g=q.getMetersPerUnitForSR(a.spatialReference);a.xmin-=g;a.xmax+=g}0===a.ymax-a.ymin&&(g=q.getMetersPerUnitForSR(a.spatialReference),a.ymin-=g,a.ymax+=g);return{count:c,extent:a}}).catch(function(a){if(a===B.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw a;})};a.prototype.executeQueryForIds=function(a){void 0===a&&(a={});return this.executeQueryForIdSet(a).then(function(a){return f.from(a)})};a.prototype.executeQueryForIdSet=function(a){var b=this;void 0===a&&
(a={});var c=n.clone(a);c.returnGeometry=!1;c.returnCentroid=!1;c.outSR=null;return k.safeCast(B.normalizeQuery(c,this.definitionExpression,this.spatialReference)).then(function(a){return b._schedule(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeTimeQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return b._reschedule(a)}).then(function(a){a=
a.items;for(var b=new g.default,c=0;c<a.length;c++)b.add(a[c].objectId);return b}).catch(function(a){if(a===B.QUERY_ENGINE_EMPTY_RESULT)return new g.default;throw a;})};a.prototype.executeTileQuery=function(a,b,c){var d=this;void 0===c&&(c=null);var e=b.returnGeometry,f=b.returnCentroid,h=b.pixelBuffer;b=new g.default;var k=[],h=h*a.resolution,n=p.pad(a.bounds,h,p.create());D(k,b,this,this.featureStore,n,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]},
c);if("esriGeometryPoint"===this.geometryType||f){var q=w.getInfo(this.spatialReference);if(q){var l=q.valid,q=l[0],l=l[1];if(n[0]<q){var t=p.fromValues(l-h,n[1],l,n[3]);D(k,b,this,this.featureStore,t,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[l,a.bounds[3]]},c)}n[2]>l&&(h=p.fromValues(q,n[1],q+h,n[3]),D(k,b,this,this.featureStore,h,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[q-l+a.bounds[0],a.bounds[3]]},c))}}k.sort(function(a,b){return a.attributes[d.objectIdField]-
b.attributes[d.objectIdField]});return{features:k,objectIds:b}};a.prototype.executeTileQueryForIds=function(a,b){a=p.pad(a.bounds,b.pixelBuffer*a.resolution,p.create());var c=[];this.featureStore.forEachInBounds(a,function(a){return c.push(a.objectId)});return c};a.prototype.executeQueryForLatestObservations=function(a){var b=this;if(this.timeInfo)return this.executeQuery(a).then(function(a){return b._filterLatest(a,b.timeInfo)});H.error(new e("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};
a.prototype._schedule=function(a){return this._frameQueue?this._frameQueue.push(a).then(function(a){return a}):c.resolve(a)};a.prototype._reschedule=function(a){return this._frameQueue?this._frameQueue.push(a).then(function(a){return a}):c.resolve(a)};a.prototype._update=function(a){for(this._budget=a;!a.done&&this._frameQueue.process();)a.madeProgress();this._budget=null};a.prototype._filterLatest=function(a,b){var c=b.trackIdField,d=b.startTimeField;b=b.endTimeField||d;for(var d=new h.default,e=
[],g=0,f=a.features;g<f.length;g++){var p=f[g],k=p.attributes[c],n=p.attributes[b];(!d.has(k)||d.get(k).attributes[b]<n)&&d.set(k,p)}d.forEach(function(a){return e.push(a)});return l({},a,{features:e})};a.prototype._getAll=function(){if(!this._allItems){var a=[];this.featureStore.forEach(function(b){return a.push(b)});this._allItems=new y.default(a,null,this)}return this._allItems};a.prototype._executeGeometryQuery=function(a){var b=this,d=a.geometry,e=a.outSR,f=a.spatialRel,p=w.isValid(e)&&!w.equals(this.spatialReference,
e),h=this.cacheSpatialQueries?p?JSON.stringify({geometry:d,spatialRelationship:f,outSpatialReference:e}):JSON.stringify({geometry:d,spatialRelationship:f}):null;if(h){var k=this._geometryQueryCache.get(h);if(void 0!==k)return c.resolve(k)}var n=function(c){if(p&&(a.returnGeometry||a.returnCentroid))return c.project(e).then(function(a){h&&b._geometryQueryCache.put(h,a,a.size||1);return a});h&&b._geometryQueryCache.put(h,c,c.size||1);return c};if(!d)return c.resolve(this._getAll()).then(function(a){return n(a)});
if("esriSpatialRelDisjoint"===f){k=this._searchFeatures(this._getQueryBBoxes(d));if(!k.length)return c.resolve(this._getAll()).then(function(a){return n(a)});var q,l;return this._reschedule(k).then(function(a){return new g.default(a)}).then(function(a){return b._reschedule(a)}).then(function(a){var c=0;q=Array(a.size);b.featureStore.forEach(function(a){return q[c++]=a});l=a}).then(function(){return b._reschedule()}).then(function(){return x.getSpatialQueryOperator(f,d,b)}).then(function(a){return b._runSpatialFilter(q,
function(b){return!l.has(b)||a(b.geometry)}).then(function(a){return new y.default(a,d,b)}).then(function(a){return n(a)})})}var t=this._searchFeatures(this._getQueryBBoxes(d));return t.length?this._canExecuteSoloPass(d,a)?c.resolve(new y.default(t,d,this)).then(function(a){return n(a)}):x.getSpatialQueryOperator(f,d,this).then(function(a){return b._runSpatialFilter(t,function(b){return a(b.geometry)})}).then(function(a){return new y.default(a,d,b)}).then(function(a){return n(a)}):(k=new y.default([],
d,this),h&&this._geometryQueryCache.put(h,k,k.size||1),c.resolve(k))};a.prototype._runSpatialFilter=function(a,b){var d=this;if(!b)return c.resolve(a);if(!this._budget)return c.resolve(a.filter(function(a){return b(a)}));var e=0,g=[],f=function(){for(;e<a.length;){var p=a[e];b(p)&&g.push(p);if(d._budget.done)return d._reschedule().then(function(){return f()});++e}return c.resolve()};return this._reschedule().then(function(){return f()}).then(function(){return g})};a.prototype._canExecuteSoloPass=
function(a,b){var c=this.geometryType;b=b.spatialRel;return x.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===b||"esriGeometryPoint"===c&&("esriSpatialRelIntersects"===b||"esriSpatialRelContains"===b||"esriSpatialRelWithin"===b))};a.prototype._getQueryBBoxes=function(a){if(x.canQueryWithRBush(a)){if(u.isExtent(a))return[p.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(u.isPolygon(a))return a.rings.map(function(a){return p.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}return[t.getBoundsXY(p.create(),
a)]};a.prototype._searchFeatures=function(a){for(var b=0;b<a.length;b++)this.featureStore.forEachInBounds(a[b],function(a){O.add(a)});var c=Array(O.size),d=0;O.forEach(function(a){return c[d++]=a});O.clear();return c};a.prototype._checkQuerySupport=function(a){return 0>a.distance||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text?c.reject(new e("feature-store:unsupported-query","Unsupported query options",{query:a})):c.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),
x.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),C.checkProjectionSupport(this.spatialReference,a.outSR)]).then(function(){return a})};a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,d=a.returnDistinctValues;c&&0<c.length&&(c=c.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),A.validateFields(this.fieldsMap,c,"orderByFields contains missing fields"));if(b&&0<b.length)A.validateFields(this.fieldsMap,
b,"outFields contains missing fields");else if(d)throw new e("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});A.validateWhere(this.fieldsMap,a.where)};a.prototype._checkStatisticsQuerySupport=function(a){var b=a.outStatistics,d=a.groupByFieldsForStatistics,g=a.having,f=d&&d.length,p=b&&b.length;if(g){if(!f||!p)return c.reject(new e("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a}));
A.validateHaving(this.fieldsMap,g,b)}if(p&&!b.some(function(a){return"exceedslimit"===a.statisticType}))for(g=b.map(function(a){return a.onStatisticField}),A.validateFields(this.fieldsMap,g,"onStatisticFields contains missing fields"),f&&A.validateFields(this.fieldsMap,d,"groupByFieldsForStatistics contains missing fields"),d=0;d<b.length;d++){var g=b[d],p=g.onStatisticField,h=g.statisticType;if("exceedslimit"===h)return c.reject(new e("feature-store:unsupported-query","statistic type exceedslimit is not supported",
{definition:g,query:a}));if((!f||"count"!==h)&&p&&A.hasInvalidFieldType(p,this.fieldsMap))return c.reject(new e("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:g,query:a}))}};return a}();a.default=m})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./lang","./PooledArray"],function(m,a,l,f,h){m=function(){function a(a,e,g){this._namespace=a;this._storage=e;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";g&&(this._storage.registerRemoveFunc(this._namespace,g),this._removeFunc=!0)}Object.defineProperty(a.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0});a.prototype.resetHitRate=function(){this._hit=this._miss=0};a.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};a.prototype.put=function(a,e,g){this._storage.put(this._namespace+a,e,g)};a.prototype.get=function(a){a=this._storage.get(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};
a.prototype.pop=function(a){a=this._storage.pop(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.clear=function(){this._storage.clear(this._namespace)};a.prototype.clearAll=function(){this._storage.clearAll()};a.prototype.getStats=function(){return this._storage.getStats()};a.prototype.resetStats=function(){this._storage.resetStats()};return a}();(function(a){var g=function(){function a(a){void 0===a&&(a=10485760);this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=
0;this._removeFuncs=[];this._users=new h}a.prototype.register=function(a){this._users.push(a)};a.prototype.deregister=function(a){this._users.removeUnordered(a)};a.prototype.registerRemoveFunc=function(a,d){this._removeFuncs.push([a,d])};a.prototype.deregisterRemoveFunc=function(a){this._removeFuncs=this._removeFuncs.filter(function(d){return d[0]!==a})};Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",
{get:function(){return this._maxSize},set:function(a){this._maxSize=Math.max(a,0);this._size>this._maxSize&&this._removeEntries()},enumerable:!0,configurable:!0});a.prototype.put=function(a,d,b){if(this._db.has(a)){var c=this._db.get(a);this._size-=c.size;this._db.delete(a);this._notifyRemoved(a,c.entry)}b>this._maxSize?this._notifyRemoved(a,d):void 0===d?console.warn("Refusing to cache undefined entry "):!b||0>b?console.warn("Refusing to cache entry with invalid size "+b):(this._db.set(a,{entry:d,
size:b}),this._size+=b,this._size>this._maxSize&&this._removeEntries())};a.prototype.pop=function(a){if(this._db.has(a)){var d=this._db.get(a);this._size-=d.size;this._db.delete(a);++this._hit;return d.entry}++this._miss};a.prototype.get=function(a){var d=this._db.get(a);if(void 0===d)++this._miss;else return this._db.delete(a),this._db.set(a,d),++this._hit,d.entry};a.prototype.getStats=function(){var a=this,d={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*
this._getHitRate())+"%",Entries:this._db.size.toString()},b={};this._db.forEach(function(c,d){a._users.forEach(function(a){a=a.namespace;if(f.startsWith(d,a))return b[a]=(b[a]||0)+c.size,!1})});var c={};this._users.forEach(function(a){var d=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(b[d]=b[d]||0,c[d]=Math.round(100*a.hitRate)+"%"):c[d]="0%"});var e=Object.keys(b);e.forEach(function(c){return b[c]=b[c]/a._size*100});e.sort(function(a,c){return b[c]-b[a]});e.forEach(function(a){return d[a]=Math.round(b[a])+
"% / "+c[a]});return d};a.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(a){return a.resetHitRate()})};a.prototype.clear=function(a){var d=this;this._db.forEach(function(b,c){f.startsWith(c,a)&&(d._size-=b.size,d._db.delete(c),d._notifyRemoved(c,b.entry))})};a.prototype.clearAll=function(){var a=this;this._db.forEach(function(d,b){a._notifyRemoved(b,d.entry)});this._size=0;this._db.clear()};a.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)};
a.prototype._notifyRemoved=function(a,d){this._removeFuncs.forEach(function(b){if(f.startsWith(a,b[0]))b[1](d)})};a.prototype._removeEntries=function(){var a=this;l.everyMap(this._db,function(d,b){a._size-=d.size;a._db.delete(b);a._notifyRemoved(b,d.entry);return a._size>.9*a.maxSize})};return a}();a.Storage=g})(m||(m={}));return m})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.everyMap=Map.prototype.entries?function(a,
f){a=a.entries();for(var h=a.next();!h.done;h=a.next())if(!1===f(h.value[1],h.value[0]))return!1;return!0}:function(a,f){var h=!0;a.forEach(function(a,k){h&&(h=!1!==f(a,k))});return h}})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils","./HeapSort"],function(m,a,l,f,h){return function(){function a(a){var e=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=new f.RemoveHint;
a&&(a.initialSize&&(this.data=Array(a.initialSize)),a.allocator?(this._allocator=a.allocator,this._deallocator=a.deallocator):"deallocator"in a&&(this._deallocator=a.deallocator),a.shrink&&(this._shrink=function(){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}))}a.prototype.toArray=function(){return this.data.slice(0,this.length)};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)if(this._allocator)for(;this._length<
a;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=a;else{if(this._deallocator)for(var e=a;e<this._length;++e)this.data[e]=this._deallocator(this.data[e]);this._length=a;this._shrink()}},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.length=0};a.prototype.prune=function(){this.clear();this.data=[]};a.prototype.equal=function(a){return f.equals(this.data,a.data)};a.prototype.push=function(a){return this.data[this._length++]=a};a.prototype.pushArray=
function(a){for(var e=0;e<a.length;e++)this.data[this._length++]=a[e];return this.back()};a.prototype.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};a.prototype.pop=function(){if(0!==this.length){var a=this.data[this.length-1];--this.length;this._shrink();return a}};a.prototype.removeMany=function(a){var e=this,f=[];this.data=this.data.filter(function(d,b){if(b>=e.length)return!1;if(0>a.indexOf(d))return!0;f.push(d);
return!1});this._length=this.data.length;return f};a.prototype.iterableRemoveMany=function(a,e){var f,d;return l(this,function(b){switch(b.label){case 0:f=[],d=0,b.label=1;case 1:if(!(d<this.length)||d>=this.length)return[3,4];0>a.indexOf(this.data[d])&&f.push(this.data[d]);return e()?[4]:[3,3];case 2:b.sent(),b.label=3;case 3:return++d,[3,1];case 4:return this.data=f,this._length=this.data.length,[2]}})};a.prototype.removeUnordered=function(a){a=f.removeUnordered(this.data,a,this.length,this._hint);
void 0!==a&&--this.length;return a};a.prototype.removeUnorderedIndex=function(a){if(!(a>=this.length||0>a))return this.swapElements(a,this.length-1),this.pop()};a.prototype.removeUnorderedMany=function(a,e,g){void 0===e&&(e=a.length);this.length=f.removeUnorderedMany(this.data,a,this.length,e,this._hint,g)};a.prototype.front=function(){if(0!==this.length)return this.data[0]};a.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};a.prototype.swapElements=function(a,e){var f;
a>=this.length||e>=this.length||a===e||(f=[this.data[e],this.data[a]],this.data[a]=f[0],this.data[e]=f[1])};a.prototype.sort=function(a){h.sort(this.data,0,this.length,a)};a.prototype.iterableSort=function(a,e){return h.iterableSort(this.data,0,this.length,a,e)};a.prototype.some=function(a,e){for(var f=0;f<this.length;++f)if(a.call(e,this.data[f],f,this.data))return!0;return!1};a.prototype.find=function(a,e){for(var f=0;f<this.length;++f){var d=this.data[f];if(a.call(e,d,f,this.data))return d}};a.prototype.filter=
function(f,e,g){g=g||new a;for(var d=0;d<this.length;++d)f.call(e,this.data[d],d,this.data)&&g.push(this.data[d]);return g};a.prototype.forEach=function(a,e){for(var f=this.length,d=0;d<Math.min(this.length,f);++d)a.call(e,this.data[d],d,this.data)};a.prototype.iterableForEach=function(){var a;return l(this,function(e){switch(e.label){case 0:a=0,e.label=1;case 1:return a<this.length?[4,this.data[a]]:[3,4];case 2:e.sent(),e.label=3;case 3:return++a,[3,1];case 4:return[2]}})};a.prototype.map=function(a,
e){for(var f=Array(this.length),d=0;d<this.length;++d)f[d]=a.call(e,this.data[d],d,this.data);return f};return a}()})},"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(m,a,l){var f;(function(a){function f(a,f,d,b){for(var c=f,e=d>>>1,g=a[c-1];f<=e;){f=c<<1;f<d&&0>b(a[f-1],a[f])&&++f;var h=a[f-1];if(0>=b(h,g))break;a[c-1]=h;c=f}a[c-1]=g}function h(a,f){return a<f?-1:a>f?1:0}a.sort=function(a,g,d,b){void 0===g&&(g=0);void 0===d&&(d=a.length);void 0===
b&&(b=h);for(var c=d>>>1;c>g;c--)f(a,c,d,b);for(var e=g+1,c=d-1;c>g;c--)d=a[g],a[g]=a[c],a[c]=d,f(a,e,c,b)};a.iterableSort=function(a,g,d,b,c){var e,p,k;return l(this,function(n){switch(n.label){case 0:void 0===g&&(g=0),void 0===d&&(d=a.length),void 0===b&&(b=h),e=d>>>1,n.label=1;case 1:if(!(e>g))return[3,4];f(a,e,d,b);return c&&c()?[4]:[3,3];case 2:n.sent(),n.label=3;case 3:return e--,[3,1];case 4:p=g+1,e=d-1,n.label=5;case 5:if(!(e>g))return[3,8];k=a[g];a[g]=a[e];a[e]=k;f(a,p,e,b);return c&&c()?
[4]:[3,7];case 6:n.sent(),n.label=7;case 7:return e--,[3,5];case 8:return[2]}})}})(f||(f={}));return f})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports @dojo/framework/shim/Set ../../../core/Error ../../../core/ItemCache ../../../core/sql/WhereClause".split(" "),function(m,a,l,f,h,g){function k(b){if(!b)return null;var c=a.invalidClauseCache.get(b);if(void 0!==c)return c;c=a.whereClausesCache.get(b);if(void 0!==c)return c;c=g.create(b);a.whereClausesCache.put(b,c);
return c}function e(a,c,d,g){void 0===g&&(g=!0);for(var b=[],p=0;p<c.length;p++){var h=c[p];if("*"!==h&&!a.has(h))if(g){var q=n(h);try{var l=k(q);if(!l.isStandardized())throw new f("feature-store:unsupported-query","expression is not standard",{clause:l});e(a,l.getFields(),"expression contains missing fields")}catch(z){if((q=z&&z.details)&&q.clause)throw z;q&&q.missingFields?Array.prototype.push.apply(b,q.missingFields):b.push(h)}}else b.push(h)}if(b.length)throw new f("feature-store:unsupported-query",
d,{missingFields:b});}function n(a){return a.split(" as ")[0]}Object.defineProperty(a,"__esModule",{value:!0});a.invalidClauseCache=new h(500);a.whereClausesCache=new h(50);var d=new l.default("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));a.validateWhere=function(b,c){if(!c)return!0;var d;try{d=g.create(c),a.whereClausesCache.put(c,d)}catch(p){throw a.invalidClauseCache.put(c,null),new f("feature-store:unsupported-query",
"invalid SQL expression",{where:c});}if(!d.isStandardized())throw new f("feature-store:unsupported-query","where clause is not standard",{where:c});c=d.getFields();e(b,c,"where clause contains missing fields");return!0};a.validateHaving=function(b,c,d){if(!c)return!0;var p;try{p=g.create(c),a.whereClausesCache.put(c,p)}catch(u){throw a.invalidClauseCache.put(c,null),new f("feature-store:unsupported-query","invalid SQL expression",{having:c});}if(!p.isAggregate())throw new f("feature-store:unsupported-query",
"having does not contain a valid aggregate function",{having:c});var h=p.getFields();e(b,h,"having contains missing fields");if(!p.getExpressions().every(function(a){var c=a.aggregateType;a=a.field;var e=b.has(a)&&b.get(a).name;return d.some(function(a){var d=a.statisticType;a=a.onStatisticField.toLowerCase().trim();return(b.has(a)&&b.get(a).name)===e&&d.toLowerCase().trim()===c})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:c});
return!0};a.getWhereClause=k;a.validateFields=e;a.getExpressionFromFieldName=n;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};a.hasInvalidFieldType=function(a,c){var b=!1;-1!==k(a).getFields().indexOf(a)&&(a=c.get(a),b=!d.has(a.type));return b}})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],function(m,a,l){return function(){function a(a,f){this._storage=new l.Storage;this._storage.maxSize=a;f&&this._storage.registerRemoveFunc("",f)}a.prototype.put=function(a,
f){this._storage.put(a,f,1)};a.prototype.pop=function(a){return this._storage.pop(a)};a.prototype.get=function(a){return this._storage.get(a)};a.prototype.clear=function(){this._storage.clearAll()};a.prototype.destroy=function(){this._storage.clearAll()};return a}()})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../../moment ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(m,a,l,f,h,g,k,e){function n(a){return Array.isArray(a)?
a:[a]}function d(a){return null!==a?!0!==a:null}function b(a,b){if(null==a)return null;for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function c(a,b,c){if(null==a)return null;for(var d="",e=0,f=0;f<b.length;f++){var g=b.charAt(f);switch(e){case 0:g===c?e=1:d=0<="-[]/{}()*+?.\\^$|".indexOf(g)?d+("\\"+g):"%"===g?d+".*":"_"===g?d+".":d+g;break;case 1:d=0<="-[]/{}()*+?.\\^$|".indexOf(g)?d+("\\"+g):d+g,e=0}}return(new RegExp("^"+d+"$")).test(a)}function q(a){return a instanceof
Date?a.valueOf():a}function p(a,b,c){if(null==b||null==c)return null;b=q(b);c=q(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function t(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e.toLowerCase();void 0===c[f]&&(b.push(e),c[f]=1)}return b}return function(){function a(){this._hasAggregateFunctions=this._hasStandardizedFunctions=this.parameters=this.parseTree=null}a.create=
function(b){var c=new a;c.parseTree=e.WhereGrammar.parse(b);var d=!0,f=!0;c.visitAll(c.parseTree,function(a){if("function"===a.type){var b=a.name;a=a.args.value.length;d&&(d=k.isStandardized(b,a));f&&(f=g.isAggregate(b,a))}});c._hasStandardizedFunctions=d;c._hasAggregateFunctions=f;return c};a.prototype.isStandardized=function(){return this._hasStandardizedFunctions};a.prototype.isAggregate=function(){return this._hasAggregateFunctions};a.prototype.setVariablesDictionary=function(a){this.parameters=
a};a.prototype.testFeature=function(a){return!!this.evaluateNode(this.parseTree,a)};a.prototype.testSet=function(a){var b=this,c=new f.default;this.visitAll(this.parseTree,function(a){"column_ref"!==a.type||c.has(a.column)||c.set(a.column,a)});for(var d={},e=function(a){c.forEach(function(c,e){c=b.featureValue(a,e,c);d[e]?d[e].push(c):d[e]=[c]})},g=0;g<a.length;g++)e(a[g]);return!!this.evaluateNode(this.parseTree,{attributes:d})};a.prototype.calculateValue=function(a){return this.evaluateNode(this.parseTree,
a)};a.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===b.type&&a.push(b.name.toLowerCase())});return t(a)};a.prototype.getExpressions=function(){var a=new f.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var d=c+"-"+b;a.has(d)||a.set(d,{aggregateType:c,field:b})}}});return l.from(a.values())};a.prototype.getFields=function(){var a=[];this.visitAll(this.parseTree,
function(b){"column_ref"===b.type&&a.push(b.column)});return t(a)};a.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===b.type&&a.push(b.value.toLowerCase())});return t(a)};a.prototype.featureValue=function(a,b,c){a=a&&"object"===typeof a.attributes?a.attributes:a;var d=a[b];if(void 0!==d)return d;for(var e in a)if(b.toLowerCase()===e.toLowerCase())return c.column=e,a[e];return null};a.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,
b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,d=a.clauses;c<d.length;c++){var e=d[c];this.visitAll(e,b)}"simple"===a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};a.prototype.evaluateNode=function(a,
e){switch(a.type){case "case_expression":if("simple"===a.format)for(var f=q(this.evaluateNode(a.operand,e)),l=0;l<a.clauses.length;l++){if(f===q(this.evaluateNode(a.clauses[l].operand,e)))return this.evaluateNode(a.clauses[l].value,e)}else for(l=0;l<a.clauses.length;l++)if(!0===this.evaluateNode(a.clauses[l].operand,e))return this.evaluateNode(a.clauses[l].value,e);return null!==a.else?this.evaluateNode(a.else,e):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":f=[];
l=0;for(a=a.value;l<a.length;l++){var t=a[l];f.push(this.evaluateNode(t,e))}return f;case "unary_expr":return d(this.evaluateNode(a.expr,e));case "binary_expr":switch(a.operator){case "AND":return f=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null!=f&&null!=e?!0===f&&!0===e:!1===f||!1===e?!1:null;case "OR":return f=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null!=f&&null!=e?!0===f||!0===e:!0===f||!0===e?!0:null;case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");
return null===this.evaluateNode(a.left,e);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(a.left,e);case "IN":return f=n(this.evaluateNode(a.right,e)),b(this.evaluateNode(a.left,e),f);case "NOT IN":return f=n(this.evaluateNode(a.right,e)),d(b(this.evaluateNode(a.left,e),f));case "BETWEEN":return f=this.evaluateNode(a.left,e),e=this.evaluateNode(a.right,e),null==f||null==e[0]||null==e[1]?null:f>=e[0]&&f<=e[1];case "NOTBETWEEN":return f=this.evaluateNode(a.left,
e),e=this.evaluateNode(a.right,e),null==f||null==e[0]||null==e[1]?null:f<e[0]||f>e[1];case "LIKE":return c(this.evaluateNode(a.left,e),this.evaluateNode(a.right,e),a.escape);case "NOT LIKE":return d(c(this.evaluateNode(a.left,e),this.evaluateNode(a.right,e),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return p(a.operator,this.evaluateNode(a.left,e),this.evaluateNode(a.right,e));case "*":return this.evaluateNode(a.left,e)*this.evaluateNode(a.right,
e);case "-":return this.evaluateNode(a.left,e)-this.evaluateNode(a.right,e);case "+":return this.evaluateNode(a.left,e)+this.evaluateNode(a.right,e);case "/":return this.evaluateNode(a.left,e)/this.evaluateNode(a.right,e)}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return h(a.value,["YYYY-M-D"]).toDate();case "timestamp":return h(a.value,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate();
case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(t=new Date,t.setHours(0,0,0,0),t):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?new Date:this.featureValue(e,a.column,a);case "function":return e=this.evaluateNode(a.args,e),this.isAggregate()?g.aggregateFunction(a.name,e):k.evaluateFunction(a.name,e)}throw Error("Unsupported sql syntax "+a.type);};return a}()})},"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(m,a){function l(a){for(var f=0,e=0;e<a.length;e++)f+=
a[e];return f/a.length}function f(a){for(var f=l(a),e=a.length,g=0,d=0;d<a.length;d++)g+=Math.pow(a[d]-f,2);return 1<e?g/(e-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.aggregateFunction=function(a,f){var e=h[a.toLowerCase()];if(null==e)throw Error("Function Not Recognised");if(f.length<e.minParams||f.length>e.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return e.evaluate(f)};a.isAggregate=function(a,f){a=h[a.toLowerCase()];return null!=a&&f>=a.minParams&&
f<=a.maxParams};var h={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:l(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var f=0,e=0;e<a.length;e++)f+=a[e];a=f}return a}},stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:Math.sqrt(f(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:f(a[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateFunction=function(a,g){var h=f[a.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(g.length<h.minParams||g.length>
h.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return h.evaluate(g)};a.isStandardized=function(a,g){a=f[a.toLowerCase()];return null!=a&&g>=a.minParams&&g<=a.maxParams};var f={extract:{minParams:2,maxParams:2,evaluate:function(a){var f=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(f.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();case "MONTH":return a.getMonth()+
1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var f=a[0],h=a[1];return null==f||null==h?null:f.toString().substring(h-1)}if(3===a.length)return f=a[0],h=a[1],a=a[2],null==f||null==h||null==a?null:0>=a?"":f.toString().substring(h-1,h+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var f=a[0];a=a[1];return null==f||null==a?null:a.indexOf(f)+1}},trim:{minParams:2,maxParams:3,
evaluate:function(a){var f=3===a.length,h=f?a[1]:" ",f=f?a[2]:a[1];if(null==h||null==f)return null;h="("+l.escapeString(h)+")";switch(a[0]){case "BOTH":return f.replace(new RegExp("^"+h+"*|"+h+"*$","g"),"");case "LEADING":return f.replace(new RegExp("^"+h+"*","g"),"");case "TRAILING":return f.replace(new RegExp(h+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},ceiling:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,
maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var f=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==f?null:Math.round(f*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},char_length:{minParams:1,
maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var f="",h=0;h<a.length;h++){if(null==a[h])return null;f+=a[h].toString()}return f}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require",
"exports","./sql92grammar"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){}a.parse=function(a){return l.parse(a)};return a}();a.WhereGrammar=m})},"esri/core/sql/sql92grammar":function(){define([],function(){function m(a,l,f,h){this.message=a;this.expected=l;this.found=f;this.location=h;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,m)}(function(a,l){function f(){this.constructor=a}f.prototype=l.prototype;
a.prototype=new f})(m,Error);m.buildMessage=function(a,l){function f(a){return a.charCodeAt(0).toString(16).toUpperCase()}function h(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+f(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+f(a)})}function g(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+f(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+f(a)})}var k={literal:function(a){return'"'+h(a.text)+'"'},"class":function(a){var e="",d;for(d=0;d<a.parts.length;d++)e+=a.parts[d]instanceof Array?g(a.parts[d][0])+"-"+g(a.parts[d][1]):g(a.parts[d]);return"["+(a.inverted?"^":"")+e+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};
return"Expected "+function(a){var e=Array(a.length),d;for(d=0;d<a.length;d++){var b=d,c;c=a[d];c=k[c.type](c);e[b]=c}e.sort();if(0<e.length){for(a=d=1;d<e.length;d++)e[d-1]!==e[d]&&(e[a]=e[d],a++);e.length=a}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(a)+" but "+(l?'"'+h(l)+'"':"end of input")+" found."};return{SyntaxError:m,parse:function(a,l){function f(a,b){return{type:"literal",text:a,ignoreCase:b}}function h(a,
b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function g(b){var c=Hb[b],d;if(!c){for(d=b-1;!Hb[d];)d--;c=Hb[d];for(c={line:c.line,column:c.column};d<b;)10===a.charCodeAt(d)?(c.line++,c.column=1):c.column++,d++;Hb[b]=c}return c}function k(a,b){var c=g(a),d=g(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function e(a){v<eb||(v>eb&&(eb=v,Vb=[]),Vb.push(a))}function n(){var a,c,d;a=v;c=U();c!==r?(c=b(),c!==r?(d=U(),d!==r?a=c:(v=a,a=r)):
(v=a,a=r)):(v=a,a=r);return a}function d(){var a,c,d,e,f,g,p,h;a=v;c=b();if(c!==r){d=[];e=v;f=U();f!==r?(g=ua(),g!==r?(p=U(),p!==r?(h=b(),h!==r?e=f=[f,g,p,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)d.push(e),e=v,f=U(),f!==r?(g=ua(),g!==r?(p=U(),p!==r?(h=b(),h!==r?e=f=[f,g,p,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);if(d!==r){a={type:"expr_list"};c=[c];for(e=0;e<d.length;e++)c.push(d[e][3]);a.value=c}else v=a,a=r}else v=a,a=r;return a}function b(){var a,b,d,e,f,g,p,h;a=v;b=c();if(b!==
r){d=[];e=v;f=U();f!==r?(g=sa(),g!==r?(p=U(),p!==r?(h=c(),h!==r?e=f=[f,g,p,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);for(;e!==r;)d.push(e),e=v,f=U(),f!==r?(g=sa(),g!==r?(p=U(),p!==r?(h=c(),h!==r?e=f=[f,g,p,h]:(v=e,e=r)):(v=e,e=r)):(v=e,e=r)):(v=e,e=r);d!==r?a=b=Sa(b,d):(v=a,a=r)}else v=a,a=r;return a}function c(){var a,b,c,d,e,f,g,p;a=v;b=q();if(b!==r){c=[];d=v;e=U();e!==r?(f=ma(),f!==r?(g=U(),g!==r?(p=q(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);for(;d!==r;)c.push(d),d=
v,e=U(),e!==r?(f=ma(),f!==r?(g=U(),g!==r?(p=q(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);c!==r?a=b=Sa(b,c):(v=a,a=r)}else v=a,a=r;return a}function q(){var b,c,f,g,h;b=v;c=ba();c===r&&(c=v,33===a.charCodeAt(v)?(f=mb,v++):(f=r,0===Q&&e(Db)),f!==r?(g=v,Q++,61===a.charCodeAt(v)?(h=Ha,v++):(h=r,0===Q&&e(Ta)),Q--,h===r?g=void 0:(v=g,g=r),g!==r?c=f=[f,g]:(v=c,c=r)):(v=c,c=r));c!==r?(f=U(),f!==r?(g=q(),g!==r?b=c={type:"unary_expr",operator:"NOT",expr:g}:(v=b,b=r)):(v=b,b=r)):(v=b,b=
r);if(b===r)if(b=v,c=w(),c!==r)if(f=U(),f!==r){var k,n,l;f=[];g=v;h=U();h!==r?(k=p(),k!==r?(n=U(),n!==r?(l=w(),l!==r?g=h=[h,k,n,l]:(v=g,g=r)):(v=g,g=r)):(v=g,g=r)):(v=g,g=r);if(g!==r)for(;g!==r;)f.push(g),g=v,h=U(),h!==r?(k=p(),k!==r?(n=U(),n!==r?(l=w(),l!==r?g=h=[h,k,n,l]:(v=g,g=r)):(v=g,g=r)):(v=g,g=r)):(v=g,g=r);else f=r;f!==r&&(f={type:"arithmetic",tail:f});f===r&&(f=v,g=u(),g!==r?(h=U(),h!==r?(h=wa(),h!==r?(h=U(),h!==r?(h=d(),h!==r?(k=U(),k!==r?(k=Ea(),k!==r?f=g={op:g,right:h}:(v=f,f=r)):(v=
f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r),f===r&&(f=v,g=u(),g!==r?(h=U(),h!==r?(h=wa(),h!==r?(h=U(),h!==r?(h=Ea(),h!==r?f=g={op:g,right:{type:"expr_list",value:[]}}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r),f===r&&(f=v,g=u(),g!==r?(h=U(),h!==r?(h=D(),h!==r?f=g={op:g,right:h}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r))),f===r&&(f=v,h=ba(),h!==r?(g=U(),g!==r?(g=qa(),g!==r?(k=U(),k!==r?(k=w(),k!==r?(n=U(),n!==r?(n=ma(),n!==r?(h=U(),h!==r?(h=w(),h!==r?f=h={op:"NOT"+g,right:{type:"expr_list",
value:[k,h]}}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r),f===r&&(f=v,h=qa(),h!==r?(g=U(),g!==r?(g=w(),g!==r?(k=U(),k!==r?(k=ma(),k!==r?(n=U(),n!==r?(n=w(),n!==r?f=h={op:h,right:{type:"expr_list",value:[g,n]}}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)),f===r&&(f=v,g=K(),g!==r?(h=U(),h!==r?(h=ba(),h!==r?(h=U(),h!==r?(h=w(),h!==r?f=g={op:g+"NOT",right:h}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r),f===
r&&(f=v,g=K(),g!==r?(h=U(),h!==r?(h=w(),h!==r?f=g={op:g,right:h}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)),f===r&&(f=v,g=t(),g!==r?(h=U(),h!==r?(h=H(),h!==r?(k=U(),k!==r?(k=v,a.substr(v,6).toLowerCase()===hb?(n=a.substr(v,6),v+=6):(n=r,0===Q&&e(Sb)),n!==r?(n=v,Q++,l=B(),Q--,l===r?n=void 0:(v=n,n=r),n!==r?k="ESCAPE":(v=k,k=r)):(v=k,k=r),k!==r?(k=U(),k!==r?(k=P(),k!==r?f=g={op:g,right:h,escape:k.value}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r)):(v=f,f=r),f===r&&(f=v,g=t(),g!==r?(h=U(),
h!==r?(h=H(),h!==r?f=g={op:g,right:h,escape:""}:(v=f,f=r)):(v=f,f=r)):(v=f,f=r))))));f===r&&(f=null);f!==r?(b=c,c=f,""==c||void 0==c||null==c?c=b:(f=null,c=f="arithmetic"==c.type?Sa(b,c.tail):Aa(c.op,b,c.right,c.escape)),b=c):(v=b,b=r)}else v=b,b=r;else v=b,b=r;return b}function p(){var b;a.substr(v,2)===Na?(b=Na,v+=2):(b=r,0===Q&&e(Oa));b===r&&(62===a.charCodeAt(v)?(b=ib,v++):(b=r,0===Q&&e(Ua)),b===r&&(a.substr(v,2)===Va?(b=Va,v+=2):(b=r,0===Q&&e(Y)),b===r&&(a.substr(v,2)===La?(b=La,v+=2):(b=r,0===
Q&&e(yb)),b===r&&(60===a.charCodeAt(v)?(b=fa,v++):(b=r,0===Q&&e(bb)),b===r&&(61===a.charCodeAt(v)?(b=Ha,v++):(b=r,0===Q&&e(Ta)),b===r&&(a.substr(v,2)===Wa?(b=Wa,v+=2):(b=r,0===Q&&e(ka))))))));return b}function t(){var a,b,c,d;a=a=v;b=ba();b!==r?(c=U(),c!==r?(d=ea(),d!==r?a=b=[b,c,d]:(v=a,a=r)):(v=a,a=r)):(v=a,a=r);a!==r&&(a=a[0]+" "+a[2]);a===r&&(a=ea());return a}function u(){var a,b,c,d;a=a=v;b=ba();b!==r?(c=U(),c!==r?(d=Z(),d!==r?a=b=[b,c,d]:(v=a,a=r)):(v=a,a=r)):(v=a,a=r);a!==r&&(a=a[0]+" "+a[2]);
a===r&&(a=Z());return a}function w(){var a,b,c,d,e,f,g,p;a=v;b=C();if(b!==r){c=[];d=v;e=U();e!==r?(f=A(),f!==r?(g=U(),g!==r?(p=C(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);for(;d!==r;)c.push(d),d=v,e=U(),e!==r?(f=A(),f!==r?(g=U(),g!==r?(p=C(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);c!==r?a=b=Sa(b,c):(v=a,a=r)}else v=a,a=r;return a}function A(){var b;43===a.charCodeAt(v)?(b=gb,v++):(b=r,0===Q&&e(T));b===r&&(45===a.charCodeAt(v)?(b=na,v++):(b=r,0===Q&&e(I)));
return b}function C(){var a,b,c,d,e,f,g,p;a=v;b=y();if(b!==r){c=[];d=v;e=U();e!==r?(f=z(),f!==r?(g=U(),g!==r?(p=y(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);for(;d!==r;)c.push(d),d=v,e=U(),e!==r?(f=z(),f!==r?(g=U(),g!==r?(p=y(),p!==r?d=e=[e,f,g,p]:(v=d,d=r)):(v=d,d=r)):(v=d,d=r)):(v=d,d=r);c!==r?a=b=Sa(b,c):(v=a,a=r)}else v=a,a=r;return a}function z(){var b;42===a.charCodeAt(v)?(b=ga,v++):(b=r,0===Q&&e(ca));b===r&&(47===a.charCodeAt(v)?(b=oa,v++):(b=r,0===Q&&e(aa)));return b}
function y(){var c,f,g,p,h,k,n;n=P();if(n===r){var q,l,t,u;q=v;var w,m,z,A;w=v;m=R();m!==r?(z=M(),z!==r?(A=W(),A!==r?w=m=parseFloat(m+z+A):(v=w,w=r)):(v=w,w=r)):(v=w,w=r);w===r&&(w=v,m=R(),m!==r?(z=M(),z!==r?w=m=parseFloat(m+z):(v=w,w=r)):(v=w,w=r),w===r&&(w=v,m=R(),m!==r?(z=W(),z!==r?w=m=parseFloat(m+z):(v=w,w=r)):(v=w,w=r),w===r&&(w=v,m=R(),m!==r&&(m=parseFloat(m)),w=m)));l=w;l!==r?(t=v,Q++,u=E(),Q--,u===r?t=void 0:(v=t,t=r),t!==r?q=l={type:"number",value:l}:(v=q,q=r)):(v=q,q=r);n=q;if(n===r){var C,
y;C=v;var L,S,K,ea;L=v;a.substr(v,4).toLowerCase()===jd?(S=a.substr(v,4),v+=4):(S=r,0===Q&&e(Xc));S!==r?(K=v,Q++,ea=B(),Q--,ea===r?K=void 0:(v=K,K=r),K!==r?L=S=[S,K]:(v=L,L=r)):(v=L,L=r);y=L;y!==r&&(y={type:"bool",value:!0});C=y;if(C===r){C=v;var ba,ma,xa,Xa;ba=v;a.substr(v,5).toLowerCase()===Yc?(ma=a.substr(v,5),v+=5):(ma=r,0===Q&&e(kd));ma!==r?(xa=v,Q++,Xa=B(),Q--,Xa===r?xa=void 0:(v=xa,xa=r),xa!==r?ba=ma=[ma,xa]:(v=ba,ba=r)):(v=ba,ba=r);y=ba;y!==r&&(y={type:"bool",value:!1});C=y}n=C;if(n===r){var qa,
I,ua,Da,sa;I=v;a.substr(v,4).toLowerCase()===Gc?(ua=a.substr(v,4),v+=4):(ua=r,0===Q&&e(id));ua!==r?(Da=v,Q++,sa=B(),Q--,sa===r?Da=void 0:(v=Da,Da=r),Da!==r?I=ua=[ua,Da]:(v=I,I=r)):(v=I,I=r);qa=I;qa!==r&&(qa={type:"null",value:null});n=qa;if(n===r){var Aa,T,V,Y;Aa=v;var X,Sa,aa,da;X=v;a.substr(v,4).toLowerCase()===Ab?(Sa=a.substr(v,4),v+=4):(Sa=r,0===Q&&e(Kb));Sa!==r?(aa=v,Q++,da=B(),Q--,da===r?aa=void 0:(v=aa,aa=r),aa!==r?X=Sa="DATE":(v=X,X=r)):(v=X,X=r);T=X;T!==r?(V=U(),V!==r?(Y=H(),Y!==r?Aa=T={type:"date",
value:Y.value}:(v=Aa,Aa=r)):(v=Aa,Aa=r)):(v=Aa,Aa=r);n=Aa;if(n===r){var ca,fa,ga,Fa;ca=v;var ka,oa,na,Ma;ka=v;a.substr(v,9).toLowerCase()===Ka?(oa=a.substr(v,9),v+=9):(oa=r,0===Q&&e(jb));oa!==r?(na=v,Q++,Ma=B(),Q--,Ma===r?na=void 0:(v=na,na=r),na!==r?ka=oa="TIMESTAMP":(v=ka,ka=r)):(v=ka,ka=r);fa=ka;fa!==r?(ga=U(),ga!==r?(Fa=H(),Fa!==r?ca=fa={type:"timestamp",value:Fa.value}:(v=ca,ca=r)):(v=ca,ca=r)):(v=ca,ca=r);n=ca}}}}}c=n;if(c===r){var ha,ta,Ha,Ba,Db,Ga,La,Ra,Ta,Oa,Ua,Wa;ha=v;var Ja,Qa,mb,eb;Ja=
v;a.substr(v,7).toLowerCase()===qc?(Qa=a.substr(v,7),v+=7):(Qa=r,0===Q&&e(Zc));Qa!==r?(mb=v,Q++,eb=B(),Q--,eb===r?mb=void 0:(v=mb,mb=r),mb!==r?Ja=Qa="EXTRACT":(v=Ja,Ja=r)):(v=Ja,Ja=r);ta=Ja;if(ta!==r)if(Ha=U(),Ha!==r)if(Ba=wa(),Ba!==r)if(Db=U(),Db!==r){var tb,Na,bb,$a,lb;Na=v;a.substr(v,4).toLowerCase()===md?(bb=a.substr(v,4),v+=4):(bb=r,0===Q&&e(Fd));bb!==r?($a=v,Q++,lb=B(),Q--,lb===r?$a=void 0:(v=$a,$a=r),$a!==r?Na=bb="YEAR":(v=Na,Na=r)):(v=Na,Na=r);tb=Na;if(tb===r){var Va,gb,cb,qb;Va=v;a.substr(v,
5).toLowerCase()===ld?(gb=a.substr(v,5),v+=5):(gb=r,0===Q&&e(Ia));gb!==r?(cb=v,Q++,qb=B(),Q--,qb===r?cb=void 0:(v=cb,cb=r),cb!==r?Va=gb="MONTH":(v=Va,Va=r)):(v=Va,Va=r);tb=Va;if(tb===r){var Ya,ib,hb,Bb;Ya=v;a.substr(v,3).toLowerCase()===kc?(ib=a.substr(v,3),v+=3):(ib=r,0===Q&&e(jc));ib!==r?(hb=v,Q++,Bb=B(),Q--,Bb===r?hb=void 0:(v=hb,hb=r),hb!==r?Ya=ib="DAY":(v=Ya,Ya=r)):(v=Ya,Ya=r);tb=Ya;if(tb===r){var ab,nb,kb,Fb;ab=v;a.substr(v,4).toLowerCase()===yd?(nb=a.substr(v,4),v+=4):(nb=r,0===Q&&e(zd));nb!==
r?(kb=v,Q++,Fb=B(),Q--,Fb===r?kb=void 0:(v=kb,kb=r),kb!==r?ab=nb="HOUR":(v=ab,ab=r)):(v=ab,ab=r);tb=ab;if(tb===r){var db,yb,ob,Nb;db=v;a.substr(v,6).toLowerCase()===Ad?(yb=a.substr(v,6),v+=6):(yb=r,0===Q&&e(Bc));yb!==r?(ob=v,Q++,Nb=B(),Q--,Nb===r?ob=void 0:(v=ob,ob=r),ob!==r?db=yb="MINUTE":(v=db,db=r)):(v=db,db=r);tb=db;if(tb===r){var uc,Cb,rb,Ub;uc=v;a.substr(v,6).toLowerCase()===$c?(Cb=a.substr(v,6),v+=6):(Cb=r,0===Q&&e(Bd));Cb!==r?(rb=v,Q++,Ub=B(),Q--,Ub===r?rb=void 0:(v=rb,rb=r),rb!==r?uc=Cb=
"SECOND":(v=uc,uc=r)):(v=uc,uc=r);tb=uc}}}}}Ga=tb;Ga!==r?(La=U(),La!==r?(Ra=la(),Ra!==r?(Ta=U(),Ta!==r?(Oa=b(),Oa!==r?(Ua=U(),Ua!==r?(Wa=Ea(),Wa!==r?ha=ta={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Ga},Oa]}}:(v=ha,ha=r)):(v=ha,ha=r)):(v=ha,ha=r)):(v=ha,ha=r)):(v=ha,ha=r)):(v=ha,ha=r)):(v=ha,ha=r)}else v=ha,ha=r;else v=ha,ha=r;else v=ha,ha=r;else v=ha,ha=r;c=ha;if(c===r){var za,Hb,Wb,Yb,Zb,Eb,ac,bc,cc,Gb,ec,fb,Qc,Vb,Xb,$b;za=v;var vc,Lb,ad,nc;vc=v;a.substr(v,
9).toLowerCase()===Ed?(Lb=a.substr(v,9),v+=9):(Lb=r,0===Q&&e(Ic));Lb!==r?(ad=v,Q++,nc=B(),Q--,nc===r?ad=void 0:(v=ad,ad=r),ad!==r?vc=Lb="SUBSTRING":(v=vc,vc=r)):(v=vc,vc=r);Hb=vc;if(Hb!==r)if(Wb=U(),Wb!==r)if(Yb=wa(),Yb!==r)if(Zb=U(),Zb!==r)if(Eb=b(),Eb!==r)if(ac=U(),ac!==r)if(bc=la(),bc!==r)if(cc=U(),cc!==r)if(Gb=b(),Gb!==r)if(ec=U(),ec!==r){fb=v;var wc,Mb,bd,oc;wc=v;a.substr(v,3).toLowerCase()===Dd?(Mb=a.substr(v,3),v+=3):(Mb=r,0===Q&&e(Hc));Mb!==r?(bd=v,Q++,oc=B(),Q--,oc===r?bd=void 0:(v=bd,bd=
r),bd!==r?wc=Mb="FOR":(v=wc,wc=r)):(v=wc,wc=r);Qc=wc;Qc!==r?(Vb=U(),Vb!==r?(Xb=b(),Xb!==r?($b=U(),$b!==r?fb=Qc=[Qc,Vb,Xb,$b]:(v=fb,fb=r)):(v=fb,fb=r)):(v=fb,fb=r)):(v=fb,fb=r);fb===r&&(fb=null);fb!==r?(Qc=Ea(),Qc!==r?za=Hb={type:"function",name:"substring",args:{type:"expr_list",value:fb?[Eb,Gb,fb[2]]:[Eb,Gb]}}:(v=za,za=r)):(v=za,za=r)}else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;else v=za,za=r;c=za;if(c===r){var ia,
Rc,Ob,Pb,Qb,ub,Rb,Sc,Sb,Tb,pc,dc,rc,sc;ia=v;Rc=ya();Rc!==r?(Ob=U(),Ob!==r?(Pb=wa(),Pb!==r?(Qb=U(),Qb!==r?(ub=G(),ub===r&&(ub=null),ub!==r?(Rb=U(),Rb!==r?(Sc=b(),Sc!==r?(Sb=U(),Sb!==r?(Tb=la(),Tb!==r?(pc=U(),pc!==r?(dc=b(),dc!==r?(rc=U(),rc!==r?(sc=Ea(),sc!==r?ia=Rc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==ub?"BOTH":ub},Sc,dc]}}:(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=
r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r);ia===r&&(ia=v,Rc=ya(),Rc!==r?(Ob=U(),Ob!==r?(Pb=wa(),Pb!==r?(Qb=U(),Qb!==r?(ub=G(),ub===r&&(ub=null),ub!==r?(Rb=U(),Rb!==r?(Sc=b(),Sc!==r?(Sb=U(),Sb!==r?(Tb=Ea(),Tb!==r?ia=Rc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==ub?"BOTH":ub},Sc]}}:(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r)):(v=ia,ia=r));c=ia;if(c===r){var Ca,fc,tc,zc,Ac,lc,Cc,Dc,Ec,mc,Fc,Jc;Ca=v;var xc,
qd,cd,Kc;xc=v;a.substr(v,8).toLowerCase()===zb?(qd=a.substr(v,8),v+=8):(qd=r,0===Q&&e(pb));qd!==r?(cd=v,Q++,Kc=B(),Q--,Kc===r?cd=void 0:(v=cd,cd=r),cd!==r?xc=qd="POSITION":(v=xc,xc=r)):(v=xc,xc=r);fc=xc;fc!==r?(tc=U(),tc!==r?(zc=wa(),zc!==r?(Ac=U(),Ac!==r?(lc=b(),lc!==r?(Cc=U(),Cc!==r?(Dc=Z(),Dc!==r?(Ec=U(),Ec!==r?(mc=b(),mc!==r?(Fc=U(),Fc!==r?(Jc=Ea(),Jc!==r?Ca=fc={type:"function",name:"position",args:{type:"expr_list",value:[lc,mc]}}:(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=
r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r)):(v=Ca,Ca=r);c=Ca;if(c===r){var Za,rd,Lc,Mc,Nc,Tc,Oc,Pc;Za=v;var vb,dd,ed,Jb;vb=v;vb=dd=x();if(vb===r)if(vb=v,96===a.charCodeAt(v)?(dd=sb,v++):(dd=r,0===Q&&e(nd)),dd!==r){ed=[];od.test(a.charAt(v))?(Jb=a.charAt(v),v++):(Jb=r,0===Q&&e(pd));if(Jb!==r)for(;Jb!==r;)ed.push(Jb),od.test(a.charAt(v))?(Jb=a.charAt(v),v++):(Jb=r,0===Q&&e(pd));else ed=r;ed!==r?(96===a.charCodeAt(v)?(Jb=sb,v++):(Jb=r,0===Q&&e(nd)),Jb!==r?vb=dd=ed.join(""):(v=
vb,vb=r)):(v=vb,vb=r)}else v=vb,vb=r;rd=vb;rd!==r?(Lc=U(),Lc!==r?(Mc=wa(),Mc!==r?(Nc=U(),Nc!==r?(Tc=d(),Tc===r&&(Tc=null),Tc!==r?(Oc=U(),Oc!==r?(Pc=Ea(),Pc!==r?Za=rd={type:"function",name:rd,args:Tc?Tc:{type:"expr_list",value:[]}}:(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r)):(v=Za,Za=r);c=Za;if(c===r){var sd,pa,Uc,td,Vc,ud,hc,wb,fd,Hd,Id;pa=v;Uc=ja();if(Uc!==r)if(td=U(),td!==r)if(Vc=b(),Vc!==r)if(ud=U(),ud!==r){hc=[];for(wb=N();wb!==r;)hc.push(wb),wb=N();hc!==r?(wb=
U(),wb!==r?(fd=Pa(),fd!==r?pa=Uc={type:"case_expression",format:"simple",operand:Vc,clauses:hc,else:null}:(v=pa,pa=r)):(v=pa,pa=r)):(v=pa,pa=r)}else v=pa,pa=r;else v=pa,pa=r;else v=pa,pa=r;else v=pa,pa=r;if(pa===r)if(pa=v,Uc=ja(),Uc!==r)if(td=U(),td!==r)if(Vc=b(),Vc!==r)if(ud=U(),ud!==r){hc=[];for(wb=N();wb!==r;)hc.push(wb),wb=N();hc!==r?(wb=U(),wb!==r?(fd=J(),fd!==r?(Hd=U(),Hd!==r?(Id=Pa(),Id!==r?pa=Uc={type:"case_expression",format:"simple",operand:Vc,clauses:hc,else:fd.value}:(v=pa,pa=r)):(v=pa,
pa=r)):(v=pa,pa=r)):(v=pa,pa=r)):(v=pa,pa=r)}else v=pa,pa=r;else v=pa,pa=r;else v=pa,pa=r;else v=pa,pa=r;sd=pa;if(sd===r){var va,Wc,vd,ic,xb,gd,Jd,Kd;va=v;Wc=ja();if(Wc!==r)if(vd=U(),vd!==r){ic=[];for(xb=O();xb!==r;)ic.push(xb),xb=O();ic!==r?(xb=U(),xb!==r?(gd=Pa(),gd!==r?va=Wc={type:"case_expression",format:"searched",clauses:ic,else:null}:(v=va,va=r)):(v=va,va=r)):(v=va,va=r)}else v=va,va=r;else v=va,va=r;if(va===r)if(va=v,Wc=ja(),Wc!==r)if(vd=U(),vd!==r){ic=[];for(xb=O();xb!==r;)ic.push(xb),xb=
O();ic!==r?(xb=U(),xb!==r?(gd=J(),gd!==r?(Jd=U(),Jd!==r?(Kd=Pa(),Kd!==r?va=Wc={type:"case_expression",format:"searched",clauses:ic,else:gd.value}:(v=va,va=r)):(v=va,va=r)):(v=va,va=r)):(v=va,va=r)):(v=va,va=r)}else v=va,va=r;else v=va,va=r;sd=va}c=sd;if(c===r){var hd,yc,Gd,wd,xd;yc=v;Gd=E();if(Gd!==r){wd=[];for(xd=F();xd!==r;)wd.push(xd),xd=F();wd!==r?yc=Gd+=wd.join(""):(v=yc,yc=r)}else v=yc,yc=r;hd=yc;hd!==r&&(hd={type:"column_ref",table:"",column:hd});c=hd;c===r&&(c=D(),c===r&&(c=v,f=wa(),f!==r?
(g=U(),g!==r?(p=b(),p!==r?(h=U(),h!==r?(k=Ea(),k!==r?(p.paren=!0,c=f=p):(v=c,c=r)):(v=c,c=r)):(v=c,c=r)):(v=c,c=r)):(v=c,c=r)))}}}}}}}return c}function x(){var a,b,c,d;a=v;b=E();if(b!==r){c=[];for(d=B();d!==r;)c.push(d),d=B();c!==r?a=b+=c.join(""):(v=a,a=r)}else v=a,a=r;return a}function E(){var b;da.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===Q&&e(V));return b}function B(){var b;Lb.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===Q&&e(Qa));return b}function F(){var b;cb.test(a.charAt(v))?(b=a.charAt(v),
v++):(b=r,0===Q&&e(nc));return b}function D(){var b,c,d;b=v;64===a.charCodeAt(v)?(c=qb,v++):(c=r,0===Q&&e(Mb));c!==r?(d=x(),d!==r?b=c=[c,d]:(v=b,b=r)):(v=b,b=r);b!==r&&(b={type:"param",value:b[1]});return b}function G(){var b,c,d;b=v;a.substr(v,7).toLowerCase()===zc?(c=a.substr(v,7),v+=7):(c=r,0===Q&&e(Ac));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="LEADING":(v=b,b=r)):(v=b,b=r);b===r&&(b=v,a.substr(v,8).toLowerCase()===rc?(c=a.substr(v,8),v+=8):(c=r,0===Q&&e(Ba)),c!==r?(c=v,Q++,d=
B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="TRAILING":(v=b,b=r)):(v=b,b=r),b===r&&(b=v,a.substr(v,4).toLowerCase()===sc?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e($b)),c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="BOTH":(v=b,b=r)):(v=b,b=r)));return b}function H(){var a;a=P();a===r&&(a=D());return a}function P(){var b,c,d;b=v;39===a.charCodeAt(v)?(c=Nb,v++):(c=r,0===Q&&e(Eb));c===r&&(a.substr(v,2)===ac?(c=ac,v+=2):(c=r,0===Q&&e(Bb)));if(c!==r){c=[];d=v;a.substr(v,2)===Fb?(d=Fb,v+=2):(d=r,0===
Q&&e(oc));d!==r&&(d="'");d===r&&(bc.test(a.charAt(v))?(d=a.charAt(v),v++):(d=r,0===Q&&e(db)));for(;d!==r;)c.push(d),d=v,a.substr(v,2)===Fb?(d=Fb,v+=2):(d=r,0===Q&&e(oc)),d!==r&&(d="'"),d===r&&(bc.test(a.charAt(v))?(d=a.charAt(v),v++):(d=r,0===Q&&e(db)));c!==r?(39===a.charCodeAt(v)?(d=Nb,v++):(d=r,0===Q&&e(Eb)),d!==r?b=c={type:"string",value:c.join("")}:(v=b,b=r)):(v=b,b=r)}else v=b,b=r;return b}function O(){var a,c,d;a=v;c=xa();c!==r?(c=U(),c!==r?(c=b(),c!==r?(d=U(),d!==r?(d=Xa(),d!==r?(d=U(),d!==
r?(d=b(),d!==r?a=c={type:"when_clause",operand:c,value:d}:(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r);return a}function N(){var a,c,d;a=v;c=xa();c!==r?(c=U(),c!==r?(c=b(),c!==r?(d=U(),d!==r?(d=Xa(),d!==r?(d=U(),d!==r?(d=b(),d!==r?a=c={type:"when_clause",operand:c,value:d}:(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r)):(v=a,a=r);return a}function J(){var c,d;c=v;var f,g;d=v;a.substr(v,4).toLowerCase()===Lc?(f=a.substr(v,4),v+=4):(f=r,0===Q&&e(Mc));
f!==r?(f=v,Q++,g=B(),Q--,g===r?f=void 0:(v=f,f=r),f!==r?d="ELSE":(v=d,d=r)):(v=d,d=r);d!==r?(d=U(),d!==r?(d=b(),d!==r?c={type:"else_clause",value:d}:(v=c,c=r)):(v=c,c=r)):(v=c,c=r);return c}function R(){var b,c,d;b=S();b===r&&(b=v,45===a.charCodeAt(v)?(c=na,v++):(c=r,0===Q&&e(I)),c===r&&(43===a.charCodeAt(v)?(c=gb,v++):(c=r,0===Q&&e(T))),c!==r?(d=S(),d!==r?b=c=c[0]+d:(v=b,b=r)):(v=b,b=r));return b}function M(){var b,c;b=v;46===a.charCodeAt(v)?(c=Ob,v++):(c=r,0===Q&&e(cc));c!==r?(c=S(),c===r&&(c=null),
c!==r?b="."+(null!=c?c:""):(v=b,b=r)):(v=b,b=r);return b}function W(){var b,c,d;c=b=v;$a.test(a.charAt(v))?(d=a.charAt(v),v++):(d=r,0===Q&&e(Ya));d!==r?(Fc.test(a.charAt(v))?(d=a.charAt(v),v++):(d=r,0===Q&&e(ab)),d===r&&(d=null),d!==r?c="e"+(null===d?"":d):(v=c,c=r)):(v=c,c=r);c!==r?(d=S(),d!==r?b=c+d:(v=b,b=r)):(v=b,b=r);return b}function S(){var a,b;a=[];b=L();if(b!==r)for(;b!==r;)a.push(b),b=L();else a=r;a!==r&&(a=a.join(""));return a}function L(){var b;Pb.test(a.charAt(v))?(b=a.charAt(v),v++):
(b=r,0===Q&&e(Qb));return b}function Z(){var b,c,d;b=v;a.substr(v,2).toLowerCase()===Rb?(c=a.substr(v,2),v+=2):(c=r,0===Q&&e(nb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="IN":(v=b,b=r)):(v=b,b=r);return b}function K(){var b,c,d;b=v;a.substr(v,2).toLowerCase()===Ga?(c=a.substr(v,2),v+=2):(c=r,0===Q&&e(Xb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="IS":(v=b,b=r)):(v=b,b=r);return b}function ea(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===ob?(c=a.substr(v,4),v+=4):
(c=r,0===Q&&e(Yb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="LIKE":(v=b,b=r)):(v=b,b=r);return b}function ba(){var b,c,d;b=v;a.substr(v,3).toLowerCase()===Ra?(c=a.substr(v,3),v+=3):(c=r,0===Q&&e(Tb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="NOT":(v=b,b=r)):(v=b,b=r);return b}function ma(){var b,c,d;b=v;a.substr(v,3).toLowerCase()===Gb?(c=a.substr(v,3),v+=3):(c=r,0===Q&&e(Cb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="AND":(v=b,b=r)):(v=b,b=r);return b}
function sa(){var b,c,d;b=v;a.substr(v,2).toLowerCase()===ta?(c=a.substr(v,2),v+=2):(c=r,0===Q&&e(pc));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="OR":(v=b,b=r)):(v=b,b=r);return b}function qa(){var b,c,d;b=v;a.substr(v,7).toLowerCase()===dc?(c=a.substr(v,7),v+=7):(c=r,0===Q&&e(rb));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="BETWEEN":(v=b,b=r)):(v=b,b=r);return b}function la(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===ec?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e(Ub));c!==
r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="FROM":(v=b,b=r)):(v=b,b=r);return b}function ya(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===Zb?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e(Ja));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="TRIM":(v=b,b=r)):(v=b,b=r);return b}function ja(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===lc?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e(Cc));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="CASE":(v=b,b=r)):(v=b,b=r);return b}function Pa(){var b,
c,d;b=v;a.substr(v,3).toLowerCase()===Jc?(c=a.substr(v,3),v+=3):(c=r,0===Q&&e(Kc));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="END":(v=b,b=r)):(v=b,b=r);return b}function xa(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===kb?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e(Dc));c!==r?(c=v,Q++,d=B(),Q--,d===r?c=void 0:(v=c,c=r),c!==r?b="WHEN":(v=b,b=r)):(v=b,b=r);return b}function Xa(){var b,c,d;b=v;a.substr(v,4).toLowerCase()===Ec?(c=a.substr(v,4),v+=4):(c=r,0===Q&&e(mc));c!==r?(c=v,Q++,d=B(),Q--,
d===r?c=void 0:(v=c,c=r),c!==r?b="THEN":(v=b,b=r)):(v=b,b=r);return b}function ua(){var b;44===a.charCodeAt(v)?(b=fc,v++):(b=r,0===Q&&e(tc));return b}function wa(){var b;40===a.charCodeAt(v)?(b=Nc,v++):(b=r,0===Q&&e(Oc));return b}function Ea(){var b;41===a.charCodeAt(v)?(b=lb,v++):(b=r,0===Q&&e(Pc));return b}function U(){var a,b;a=[];for(b=Da();b!==r;)a.push(b),b=Da();return a}function Da(){var b;X.test(a.charAt(v))?(b=a.charAt(v),v++):(b=r,0===Q&&e(ha));return b}function Aa(a,b,c,d){a={type:"binary_expr",
operator:a,left:b,right:c};void 0!==d&&(a.escape=d);return a}function Sa(a,b){for(var c=0;c<b.length;c++)a=Aa(b[c][1],a,b[c][3]);return a}l=void 0!==l?l:{};var r={},Fa={start:n},Ma=n,mb="!",Db=f("!",!1),Ha="\x3d",Ta=f("\x3d",!1),Na="\x3e\x3d",Oa=f("\x3e\x3d",!1),ib="\x3e",Ua=f("\x3e",!1),Va="\x3c\x3d",Y=f("\x3c\x3d",!1),La="\x3c\x3e",yb=f("\x3c\x3e",!1),fa="\x3c",bb=f("\x3c",!1),Wa="!\x3d",ka=f("!\x3d",!1),gb="+",T=f("+",!1),na="-",I=f("-",!1),ga="*",ca=f("*",!1),oa="/",aa=f("/",!1),da=/^[A-Za-z_\x80-\uFFFF]/,
V=h([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Lb=/^[A-Za-z0-9_]/,Qa=h([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),cb=/^[A-Za-z0-9_.\x80-\uFFFF]/,nc=h([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qb="@",Mb=f("@",!1),Nb="'",Eb=f("'",!1),ac="N'",Bb=f("N'",!1),Fb="''",oc=f("''",!1),bc=/^[^']/,db=h(["'"],!0,!1),Ob=".",cc=f(".",!1),Pb=/^[0-9]/,Qb=h([["0","9"]],!1,!1),$a=/^[eE]/,Ya=h(["e","E"],!1,!1),Fc=/^[+\-]/,ab=h(["+","-"],!1,!1),Gc="null",id=f("NULL",!0),jd="true",Xc=
f("TRUE",!0),Yc="false",kd=f("FALSE",!0),Rb="in",nb=f("IN",!0),Ga="is",Xb=f("IS",!0),ob="like",Yb=f("LIKE",!0),hb="escape",Sb=f("ESCAPE",!0),Ra="not",Tb=f("NOT",!0),Gb="and",Cb=f("AND",!0),ta="or",pc=f("OR",!0),dc="between",rb=f("BETWEEN",!0),ec="from",Ub=f("FROM",!0),Dd="for",Hc=f("FOR",!0),Ed="substring",Ic=f("SUBSTRING",!0),qc="extract",Zc=f("EXTRACT",!0),Zb="trim",Ja=f("TRIM",!0),zb="position",pb=f("POSITION",!0),Ka="timestamp",jb=f("TIMESTAMP",!0),Ab="date",Kb=f("DATE",!0),zc="leading",Ac=f("LEADING",
!0),rc="trailing",Ba=f("TRAILING",!0),sc="both",$b=f("BOTH",!0),md="year",Fd=f("YEAR",!0),ld="month",Ia=f("MONTH",!0),kc="day",jc=f("DAY",!0),yd="hour",zd=f("HOUR",!0),Ad="minute",Bc=f("MINUTE",!0),$c="second",Bd=f("SECOND",!0),lc="case",Cc=f("CASE",!0),Jc="end",Kc=f("END",!0),kb="when",Dc=f("WHEN",!0),Ec="then",mc=f("THEN",!0),Lc="else",Mc=f("ELSE",!0),fc=",",tc=f(",",!1),Nc="(",Oc=f("(",!1),lb=")",Pc=f(")",!1),X=/^[ \t\n\r]/,ha=h([" ","\t","\n","\r"],!1,!1),sb="`",nd=f("`",!1),od=/^[^`]/,pd=h(["`"],
!0,!1),v=0,Hb=[{line:1,column:1}],eb=0,Vb=[],Q=0,Wb;if("startRule"in l){if(!(l.startRule in Fa))throw Error("Can't start parsing from rule \""+l.startRule+'".');Ma=Fa[l.startRule]}Wb=Ma();if(Wb!==r&&v===a.length)return Wb;Wb!==r&&v<a.length&&e({type:"end"});throw function(a,b,c){return new m(m.buildMessage(a,b),a,b,c)}(Vb,eb<a.length?a.charAt(eb):null,eb<a.length?k(eb,eb+1):k(eb,eb));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(m,a,l,f,h,g,k){function e(a,b){var e;if(!b)return null;if("x"in b){var f={x:0,y:0};a=a(b.x,b.y,c);f.x=a[0];f.y=a[1];null!=b.z&&(f.z=b.z);null!=b.m&&(f.m=b.m);return f}if("xmin"in b)return f={xmin:0,ymin:0,xmax:0,ymax:0},e=a(b.xmin,b.ymin,c),f.xmin=e[0],f.ymin=e[1],a=a(b.xmax,b.ymax,c),f.xmax=a[0],f.ymax=a[1],b.hasZ&&(f.zmin=b.zmin,f.zmax=b.zmax,f.hasZ=!0),b.hasM&&(f.mmin=b.mmin,f.mmax=b.mmax,f.hasM=!0),f;if("rings"in b)return{rings:n(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:n(b.paths,
a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:d(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function n(a,b){for(var c=[],e=0;e<a.length;e++)c.push(d(a[e],b));return c}function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=b(e[0],e[1],[0,0]);c.push(f);2<e.length&&f.push(e[2]);3<e.length&&f.push(e[3])}return c}function b(a,b){return!g.isValid(a)||!g.isValid(b)||g.equals(a,b)||k.canProject(a,b)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var c=[0,0];a.checkProjectionSupport=function(a,
c){if(!c)return f.resolve();if(Array.isArray(a)){for(var d=0;d<a.length;d++){var e=a[d];if(b(e.geometry&&e.geometry.spatialReference,c))return h.isSupported()?h.load():f.reject(new l("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c}))}return f.resolve()}return b(a,c)?h.isSupported()?h.load():f.reject(new l("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c})):f.resolve()};var q=e.bind(null,
k.lngLatToXY),p=e.bind(null,k.xyToLngLat);a.project=function(a,b,c){c||(c=b,b=a.spatialReference);return g.isValid(b)&&g.isValid(c)&&!g.equals(b,c)?k.canProject(b,c)?g.isWebMercator(c)?q(a):p(a):h.projectMany([a],b,c,null,!0)[0]:a};var t=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,b,c){var d=this;a&&a.length&&b&&c&&!g.equals(b,c)||f.resolve(a);var e={geometries:a,inSpatialReference:b,outSpatialReference:c,resolve:null};
this._jobs.push(e);return f.create(function(a){e.resolve=a;null===d._timer&&(d._timer=setTimeout(d._process,10))},function(){var a=d._jobs.indexOf(e);-1<a&&d._jobs.splice(a,1)})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,c=a.inSpatialReference,d=a.outSpatialReference,a=a.resolve;k.canProject(c,d)?g.isWebMercator(d)?a(b.map(q)):a(b.map(p)):a(h.projectMany(b,c,d,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());
a.projectMany=function(a,b,c){return t.push(a,b,c)}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(m,a,l,f,h,g){function k(a,d,f,k,l){void 0===k&&(k=null);void 0===l&&(l=!1);if(null===k){var c=g.cacheKey(d,f);void 0!==b[c]?k=b[c]:(k=e(d,f,null),null===k&&(k=new g),b[c]=k)}return n._project(a,d,f instanceof h||!1===l?f:new h(f),k,l)}function e(a,b,d){void 0===d&&(d=null);a=n._getTransformation(a,
b,d);return null!==a?g.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var n=null;a.isLoaded=function(){return!!n&&f.isLoaded()};a.isSupported=function(){return f.isSupported()};var d=null;a.load=function(){return d?d:d=l.create(function(a,b){var c=f.load();m(["./geometryEngine"],function(d){n=d;c.then(function(){n._enableProjection(f);a()},function(a){b(a)})})})};a.project=function(a,b,d){void 0===d&&(d=null);return a instanceof Array?0===a.length?[]:k(a,a[0].spatialReference,b,d):
k([a],a.spatialReference,b,d)[0]};var b={};a.projectMany=k;a.getTransformation=e;a.getTransformations=function(a,b,d){void 0===d&&(d=null);a=n._getTransformationBySuitability(a,b,d);if(null!==a){b=[];for(d=0;d<a.length;d++)b.push(g.fromGE(a[d]));return b}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(m,a,l,f,h){function g(b){function e(a,b,c){a[b]=c(a[b])}a._pe=b;c.init();q.init();p.init();t.init();
u.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}l(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var f=0,g=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];f<g.length;f++)b=g[f],e(b.prototype,"getName",function(a){return function(){return a.call(this,Array(c.PE_NAME_MAX))}});f=0;for(g=[a._pe.PeGeogtran,a._pe.PeProjcs];f<
g.length;f++)b=g[f],e(b.prototype,"getParameters",function(b){return function(){for(var d=Array(c.PE_PARM_MAX),e=b.call(this),f=0;f<d.length;f++){var g=a._pe.getValue(e,"*");d[f]=g?a._pe.wrapPointer(g,a._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return d}});e(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],e=a.call(this);d(c,b,e);return c}});e(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],f=this.getSteps();if(1<f)for(var e=a._pe.getPointer(e),g=1;g<f;g++)d.push(a._pe.wrapPointer(e+c*g,a._pe.PeGTlistExtendedGTs))}return d}});var h=a._pe._pe_getPeHorizonSize();b=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],f=e.getNump();if(1<f)for(var e=a._pe.getPointer(e),g=1;g<f;g++)d.push(a._pe.wrapPointer(e+
h*g,a._pe.PeHorizon))}c.set(b,d);return d}};e(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);e(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=c.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var d=a._pe.getPointer(this),e=a._pe.ensureInt8(Array(c.PE_BUFFER_MAX));return a._pe.Pointer_stringify(a._pe._pe_object_to_string_ext(d,b,e))}}function k(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}
function e(b,c){var d=[];c=Array(c);for(var e=0;e<b;e++)d.push(a._pe.ensureInt8(c));return d}function n(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function d(b,c,d,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*c;e++)b[e]=a._pe.getValue(d+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var f=0===b.length;for(e=0;e<c;e++)f&&(b[e]=Array(2)),b[e][0]=a._pe.getValue(d,"double"),b[e][1]=a._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(a,"__esModule",{value:!0});var b;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!f("esri-wasm")};a.load=function(){return b?b:b=h.create(function(a,b){m(["./support/pe-wasm"],function(c){c({locateFile:function(a){return m.toUrl("./support/"+a)},onAbort:function(a){b(Error(a))}}).then(function(b){g(b);a()})})})};(function(b){function e(b,c,e){a._pe.ensureCache.prepare();var f=n(e),g=e===f,f=a._pe.ensureFloat64(f);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),
c,f))&&d(e,c,f,g);return b}function f(a,b,c){return g(a,b,c,0)}function g(b,c,e,f){a._pe.ensureCache.prepare();var g=n(e),p=e===g,g=a._pe.ensureFloat64(g);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,g,f))&&d(e,c,g,p);return b}b.geogToProj=e;b.projGeog=function(a,b,d,g){switch(g){case c.PE_TRANSFORM_P_TO_G:return f(a,b,d);case c.PE_TRANSFORM_G_TO_P:return e(a,b,d)}return 0};b.projToGeog=f;b.projToGeogCenter=g})(a.PeCSTransformations||(a.PeCSTransformations={}));var c;(function(b){b.init=
function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=
a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=
a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;
b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c=a.PeDefs||(a.PeDefs={}));(function(b){function d(b,c){var d=null,g=f[b];g||(g={},f[b]=g);g.hasOwnProperty(String(c))?d=g[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,g[c]=d));return d=e(d)}function e(b){if(b){var d=b.getType();switch(d){case c.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case c.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case c.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,
a._pe.PeGeogtran);break;default:d&c.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var f={},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return d(c.PE_TYPE_COORDSYS,a)};b.factoryByType=d;b.fromString=function(b,c){var d=null,f=g[b];f||(f={},g[b]=f);f.hasOwnProperty(c)?d=f[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,f[c]=d));return d=e(d)};b.geogcs=function(a){return d(c.PE_TYPE_GEOGCS,a)};b.geogtran=
function(a){return d(c.PE_TYPE_GEOGTRAN,a)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(a){return d(c.PE_TYPE_PROJCS,a)};b.unit=function(a){return d(c.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var q;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,e,f,g,p){var h=null,k=new a._pe.PeInteger(p);try{var n=
a._pe.PeGTlistExtended.prototype.getGTlist(b,d,e,f,g,k);if(p=k.val)if(h=[n],1<p){var q=a._pe.getPointer(n);for(b=1;b<p;b++)h.push(a._pe.wrapPointer(q+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(k)}return h}})(q=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var d=b[c];k(d);d.getEntries().forEach(function(a){k(a);a=a.getGeogtran();k(a);a.getParameters().forEach(k);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){k(a);
var b=a.getDatum();k(b);k(b.getSpheroid());k(a.getPrimem());k(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,e,f,g){a._pe.ensureCache.prepare();var p=n(e),h=e===p,p=a._pe.ensureFloat64(p),k=0;f&&(k=a._pe.ensureFloat64(f));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,p,k,g))&&d(e,c,p,h);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function f(b,d,f,
g,p,h){a._pe.ensureCache.prepare();var k,q;switch(b){case "dd":k=a._pe._pe_geog_to_dd;q=c.PE_DD_MAX;break;case "ddm":k=a._pe._pe_geog_to_ddm;q=c.PE_DDM_MAX;break;case "dms":k=a._pe._pe_geog_to_dms,q=c.PE_DMS_MAX}b=0;d&&(b=a._pe.getPointer(d));d=n(g);d=a._pe.ensureFloat64(d);q=e(f,q);g=a._pe.ensureInt32(q);if(p=k(b,f,d,p,g))for(k=0;k<f;k++)h[k]=a._pe.Pointer_stringify(q[k]);return p}function g(b,c,e,f,g){a._pe.ensureCache.prepare();var p;switch(b){case "dd":p=a._pe._pe_dd_to_geog;break;case "ddm":p=
a._pe._pe_ddm_to_geog;break;case "dms":p=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=f.map(function(b){return a._pe.ensureString(b)});f=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*e));(p=p(b,e,f,c))&&d(g,e,c);return p}b.geog_to_dms=function(a,b,c,d,e){return f("dms",a,b,c,d,e)};b.dms_to_geog=function(a,b,c,d){return g("dms",a,b,c,d)};b.geog_to_ddm=function(a,b,c,d,e){return f("ddm",a,b,c,d,e)};b.ddm_to_geog=function(a,b,c,d){return g("ddm",a,b,c,d)};b.geog_to_dd=function(a,b,c,d,
e){return f("dd",a,b,c,d,e)};b.dd_to_geog=function(a,b,c,d){return g("dd",a,b,c,d)}})(a.PeNotationDms||(a.PeNotationDms={}));var p;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
b.geog_to_mgrs_extended=function(b,d,f,g,p,h,k){a._pe.ensureCache.prepare();var q=0;b&&(q=a._pe.getPointer(b));b=n(f);f=a._pe.ensureFloat64(b);b=e(d,c.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_mgrs_extended(q,d,f,g,p,h,l))for(p=0;p<d;p++)k[p]=a._pe.Pointer_stringify(b[p]);return g};b.mgrs_to_geog_extended=function(b,c,e,f,g){a._pe.ensureCache.prepare();var p=0;b&&(p=a._pe.getPointer(b));b=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*
c));(f=a._pe._pe_mgrs_to_geog_extended(p,c,e,f,b))&&d(g,c,b);return f}})(p=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,d,f,g,p,h,k){a._pe.ensureCache.prepare();var q=0;b&&(q=a._pe.getPointer(b));b=n(f);f=a._pe.ensureFloat64(b);b=e(d,c.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_usng(q,d,f,g,p,h,l))for(p=0;p<d;p++)k[p]=a._pe.Pointer_stringify(b[p]);return g};b.usng_to_geog=function(b,c,e,f){a._pe.ensureCache.prepare();var g=0;b&&(g=a._pe.getPointer(b));
b=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(g=a._pe._pe_usng_to_geog(g,c,e,b))&&d(f,c,b);return g}})(a.PeNotationUsng||(a.PeNotationUsng={}));var t;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,d,f,g,p){a._pe.ensureCache.prepare();
var h=0;b&&(h=a._pe.getPointer(b));b=n(f);f=a._pe.ensureFloat64(b);b=e(d,c.PE_UTM_MAX);var k=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_utm(h,d,f,g,k))for(h=0;h<d;h++)p[h]=a._pe.Pointer_stringify(b[h]);return g};b.utm_to_geog=function(b,c,e,f,g){a._pe.ensureCache.prepare();var p=0;b&&(p=a._pe.getPointer(b));b=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(f=a._pe._pe_utm_to_geog(p,c,e,f,b))&&d(g,c,b);return f}})(t=a.PeNotationUtm||(a.PeNotationUtm=
{}));var u;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(d,e){void 0===e&&(e=b.PE_PCSINFO_OPTION_DOMAIN);var f,g;c.has(d)&&(g=c.get(d),g[e]&&(f=g[e]));f||(f=a._pe.PePCSInfo.prototype.generate(d,e),
g||(g=[],c.set(d,g)),g[e]=f);return f}})(u=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=g})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(m,a,l){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var f=0;for(a=a.steps;f<a.length;f++){var h=
a[f];h instanceof l?this.steps.push(h):this.steps.push(new l({wkid:h.wkid,wkt:h.wkt,isInverse:h.isInverse}))}}}a.cacheKey=function(a,f){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};a.fromGE=function(f){var g=new a,h="",e=0;for(f=f.steps;e<f.length;e++){var n=l.fromGE(f[e]);g.steps.push(n);h+=n.uid.toString()+","}g._cached_projection=
{};g._gtlistentry=null;g._chain=h;return g};a.prototype.getInverse=function(){var f=new a;f.steps=[];for(var g=this.steps.length-1;0<=g;g--)f.steps.push(this.steps[g].getInverse());return f};a.prototype.getGTListEntry=function(){for(var a="",f=0,k=this.steps;f<k.length;f++)a+=k[f].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(f,g,k){this._cached_projection[a.cacheKey(f,g)]=k};a.prototype.getCachedGeTransformation=
function(f,g){for(var h="",e=0,n=this.steps;e<n.length;e++)h+=n[e].uid.toString()+",";h!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=h);f=this._cached_projection[a.cacheKey(f,g)];return void 0===f?null:f};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(m,a){var l=0;return function(){function a(a){void 0===a&&(a=null);this.uid=l++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:
-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(f){var g=new a;g._wkt=f.wkt;g._wkid=f.wkid;g._isInverse=f.isInverse;return g};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=l++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=l++},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=l++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var f=new a;f._wkt=this.wkt;f._wkid=this._wkid;f._isInverse=!this.isInverse;return f};return a}()})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,
supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a,b,c){this.items=a;this.queryGeometry=b;this.definitionExpression=c.definitionExpression;this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.fieldsMap=c.fieldsMap;this.timeInfo=c.timeInfo}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0});
a.prototype.createQueryResponse=function(a){var b;b=a.outStatistics?a.outStatistics.some(function(a){return"exceedslimit"===a.statisticType})?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a);a.returnQueryGeometry&&(e.isValid(a.outSR)&&!e.equals(this.queryGeometry.spatialReference,a.outSR)?b.queryGeometry=p.cleanFromGeometryEngine(l({spatialReference:a.outSR},c.project(this.queryGeometry,this.queryGeometry.spatialReference,a.outSR))):
b.queryGeometry=p.cleanFromGeometryEngine(l({spatialReference:a.outSR},this.queryGeometry)));return b};a.prototype.executeAttributesQuery=function(c){var d=b.getWhereClause(c.where);if(!d)return g.resolve(this);if(d.isStandardized()){for(var e=0,f=[],p=0,h=this.items;p<h.length;p++){var k=h[p];d.testFeature(k.attributes)&&(f[e++]=k)}d=new a(f,this.queryGeometry,this);d.definitionExpression=c.where;return g.resolve(d)}return g.reject(new TypeError("Where clause is not standardized"))};a.prototype.executeObjectIdsQuery=
function(b){if(!b.objectIds||!b.objectIds.length)return g.resolve(this);var c=new f.default(b.objectIds);return g.resolve(new a(this.items.filter(function(a){return c.has(a.objectId)}),this.queryGeometry,this))};a.prototype.executeTimeQuery=function(b){b=q.getTimeOperator(this.timeInfo,b.timeExtent);if(!h.isSome(b))return g.resolve(this);b=this.items.filter(b);return g.resolve(new a(b,this.queryGeometry,this))};a.prototype.project=function(b){var d=this;return!b||e.equals(this.spatialReference,b)?
g.resolve(this):c.projectMany(this.items.map(function(a){return p.getGeometry(d,a)}),this.spatialReference,b).then(function(c){for(var e=[],f=0;f<d.items.length;f++)e[f]={attributes:d.items[f].attributes,geometry:c[f]};c=[];n.convertFromFeatures(c,e,d.geometryType,d.hasZ,d.hasM,d.objectIdField);return new a(c,d.queryGeometry,{definitionExpression:d.definitionExpression,geometryType:d.geometryType,hasM:d.hasM,hasZ:d.hasZ,objectIdField:d.objectIdField,spatialReference:b,fieldsMap:d.fieldsMap,timeInfo:d.timeInfo})})};
a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,d=this.geometryType,e=this.hasM,f=this.hasZ,g=this.objectIdField,h=this.spatialReference,n=a.outFields,q=a.outSR,l=a.quantizationParameters,t=a.resultRecordCount,u=a.resultOffset,m=!1;null!=t&&null!=u&&(t=u+t,m=c.length>t,c=c.slice(u,Math.min(c.length,t)));return{exceededTransferLimit:m,features:this._createFeatures(a,c),fields:n&&n.map(function(a){return b.fieldsMap.get(a)}),geometryType:d,hasM:e,hasZ:f,objectIdFieldName:g,
spatialReference:p.cleanFromGeometryEngine(q?q:h),transform:l&&k.toQuantizationTransform(l)||null}};a.prototype._createFeatures=function(a,b){var c=new d.default(a,this.fieldsMap),e=a.quantizationParameters,f=a.returnGeometry,g=a.returnCentroid,h=a.maxAllowableOffset,n=a.orderByFields;a=[];var q=0;if(b.length&&n&&n.length){var n=n[0].split(" "),l=n[0],t="DESC"===n[1];b.sort(function(a,b){a=c.getFieldValue(a,l);b=c.getFieldValue(b,l);if("number"===typeof a&&"number"===typeof b)return t?b-a:a-b;if("string"===
typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(t?a>b:a<b)?-1:(t?a<b:a>b)?1:0})}if(f||g)if(e=k.toQuantizationTransform(e),f&&!g)for(g=0;g<b.length;g++)f=b[g],a[q++]={attributes:c.getAttributes(f),geometry:p.getGeometry(this,f,h,e)};else if(!f&&g)for(h=0;h<b.length;h++)f=b[h],a[q++]={attributes:c.getAttributes(f),centroid:p.getCentroid(this,f,e)};else for(g=0;g<b.length;g++)f=b[g],a[q++]={attributes:c.getAttributes(f),centroid:p.getCentroid(this,f,e),geometry:p.getGeometry(this,
f,h,e)};else for(h=0;h<b.length;h++)f=b[h],(f=c.getAttributes(f))&&(a[q++]={attributes:f});return a};a.prototype._createExceedsLimitQueryResponse=function(a){var b=!1,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=0;for(a=a.outStatistics;e<a.length;e++){var f=a[e];if("exceedslimit"===f.statisticType){c=null!=f.maxPointCount?f.maxPointCount:Number.POSITIVE_INFINITY;d=null!=f.maxRecordCount?f.maxRecordCount:Number.POSITIVE_INFINITY;b=null!=f.maxVertexCount?f.maxVertexCount:
Number.POSITIVE_INFINITY;break}}"esriGeometryPoint"===this.geometryType?b=this.items.length>c:this.items.length>d?b=!0:(c=this.hasZ?this.hasM?4:3:this.hasM?3:2,b=this.items.reduce(function(a,b){return a+(b.geometry&&b.geometry.coords.length||0)},0)/c>b);return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(b)}}]}};a.prototype._createStatisticsQueryResponse=function(a){var b=
new d.default(a,this.fieldsMap),c=[],e=[],f=a.groupByFieldsForStatistics,g=a.having,p=f&&f.length,f=p&&f[0],h={},k={},n={},q={attributes:{}},l=0;for(a=a.outStatistics;l<a.length;l++){var t=a[l],m=t.outStatisticFieldName,u=t.statisticType,N="exceedslimit"!==t.statisticType?t.onStatisticField:void 0,J="1"===N;if(p&&(N===f||J)&&"count"===t.statisticType){h[N]||(h[N]=this._calculateUniqueValues(b,J?f:N));var u=h[N],R;for(R in u){var M=u[R],W=M.count,t=M.data,S=M.items,M=k[t]||{attributes:{}};if(!g||b.validateItems(S,
g))M.attributes[m]=W,M.attributes[J?"EXPR_1":N]=t,k[t]=M}e.push({name:m,alias:m,type:"esriFieldTypeString"})}else{if(p)for(R in J=this._calculateUniqueValues(b,f),J){if(M=J[R],t=M.data,S=M.items,!g||b.validateItems(S,g))M=k[t]||{attributes:{}},S=this._calculateStatistics(S,b,N),W="var"===u?"variance":u,M.attributes[m]=S[W],M.attributes[f]=t,k[t]=M}else n[N]||(n[N]=this._calculateStatistics(this.items,b,N)),S=n[N],W="var"===u?"variance":u,q.attributes[m]=S[W];e.push({name:m,alias:m,type:"esriFieldTypeDouble"})}}if(p)for(var L in k)c.push(k[L]);
else c.push(q);return{fields:e,features:c}};a.prototype._calculateStatistics=function(a,b,c){for(var d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=null,g=null,p=null,h=null,k=[],n=0;n<a.length;n++){var q=b.getFieldValue(a[n],c);null==q||isNaN(q)||(f+=q,d=Math.min(d,q),e=Math.max(e,q),k.push(q))}if(a=k.length){g=f/a;for(h=p=0;h<k.length;h++)q=k[h],p+=Math.pow(q-g,2);h=1<a?p/(a-1):0;p=Math.sqrt(h)}else e=d=null;return{avg:g,count:a,max:e,min:d,stddev:p,sum:f,variance:h}};a.prototype._calculateUniqueValues=
function(a,b){for(var c={},d=0,e=this.items;d<e.length;d++){var f=e[d],g=a.getFieldValue(f,b);if(null==g||"string"===typeof g&&""===g.trim())g=null;null==c[g]?c[g]={count:1,data:g,items:[f]}:(c[g].count++,c[g].items.push(f))}return c};return a}();a.default=m})},"esri/core/maybe":function(){define(["require","exports","./has"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.isSome=function(a){return null!=a};a.isNone=function(a){return null==a};a.map=function(a,h){return null!=a?
h(a):null};a.unwrap=function(a){return a};a.expect=function(a){return a}})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports","./jsonUtils"],function(m,a,l){function f(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function g(a,b,c){for(var d=[],e,g,p,k,n=0;n<c.length;n++){var q=c[n];if(0<n){if(p=f(a,q[0]),k=h(a,q[1]),p!==e||k!==g)d.push(b(q,p-e,k-g)),e=p,g=k}else e=f(a,q[0]),g=h(a,q[1]),d.push(b(q,
e,g))}return 0<d.length?d:null}function k(a,b,c,d){return g(a,c?d?D:F:d?F:B,b)}function e(a,b,c,d){var e=[];c=c?d?D:F:d?F:B;for(d=0;d<b.length;d++){var f=g(a,c,b[d]);f&&3<=f.length&&e.push(f)}return e.length?e:null}function n(a,b,c,d){var e=[];c=c?d?D:F:d?F:B;for(d=0;d<b.length;d++){var f=g(a,c,b[d]);f&&2<=f.length&&e.push(f)}return e.length?e:null}function d(a,b){return b*a.scale[0]+a.translate[0]}function b(a,b){return a.translate[1]-b*a.scale[1]}function c(a,c,e){var f=Array(e.length);if(!e.length)return f;
var g=a.scale,p=g[0],g=g[1],h=d(a,e[0][0]);a=b(a,e[0][1]);f[0]=c(e[0],h,a);for(var k=1;k<e.length;k++){var n=e[k],h=h+n[0]*p;a-=n[1]*g;f[k]=c(n,h,a)}return f}function q(a,b,d){for(var e=Array(d.length),f=0;f<d.length;f++)e[f]=c(a,b,d[f]);return e}function p(a,b,d,e){return c(a,d?e?D:F:e?F:B,b)}function t(a,b,c,d){return q(a,c?d?D:F:d?F:B,b)}function u(a,b,c,d){return q(a,c?d?D:F:d?F:B,b)}function w(a,b,c){var d=c[0],e=d[0],d=d[1],f=Math.min(e,b[0]),g=Math.min(d,b[1]),p=Math.max(e,b[2]);b=Math.max(d,
b[3]);for(var h=1;h<c.length;h++){var k=c[h],n=k[0],k=k[1],e=e+n,d=d+k;0>n&&(f=Math.min(f,e));0<n&&(p=Math.max(p,e));0>k?g=Math.min(g,d):0<k&&(b=Math.max(b,d))}a[0]=f;a[1]=g;a[2]=p;a[3]=b;return a}function A(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)w(a,a,b[c]);return a}function C(a,b,c,d,e){b.xmin=f(a,c.xmin);b.ymin=h(a,c.ymin);b.xmax=f(a,c.xmax);b.ymax=h(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=
c.mmin,b.mmax=c.mmax));return b}function z(a,b,c,d,e){b.points=k(a,c.points,d,e);return b}function y(a,b,c,d,e){b.x=f(a,c.x);b.y=h(a,c.y);b!==c&&(d&&(b.z=c.z),e&&(b.m=c.m));return b}function x(a,b,c,d,f){a=e(a,c.rings,d,f);if(!a)return null;b.rings=a;return b}function E(a,b,c,d,e){a=n(a,c.paths,d,e);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});var B=function(a,b,c){return[b,c]},F=function(a,b,c){return[b,c,a[2]]},D=function(a,b,c){return[b,c,a[2],a[3]]};a.toQuantizationTransform=
function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,d,e,f;a&&"upperLeft"===a.originPosition?(c=a.translate[0],d=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(e=b.translate[0],f=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,f=b.extent.ymax,b=b.tolerance);return c===
e&&d===f&&a===b};a.quantizeX=f;a.quantizeY=h;a.quantizeBounds=function(a,b,c){b[0]=f(a,c[0]);b[3]=h(a,c[1]);b[2]=f(a,c[2]);b[1]=h(a,c[3]);return b};a.quantizePoints=k;a.quantizeRings=e;a.quantizePaths=n;a.hydrateX=d;a.hydrateY=b;a.hydrateCoordsArray=c;a.hydrateCoordsArrayArray=q;a.hydrateBounds=function(a,c,e){return e?(c[0]=d(a,e[0]),c[1]=b(a,e[3]),c[2]=d(a,e[2]),c[3]=b(a,e[1]),c):[d(a,c[0]),b(a,c[3]),d(a,c[2]),b(a,c[1])]};a.hydratePoints=p;a.hydratePaths=t;a.hydrateRings=u;a.getQuantizedBoundsCoordsArray=
w;a.getQuantizedBoundsCoordsArrayArray=A;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return w(b,b,a)};a.getQuantizedBoundsPaths=function(a){return A([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return A([0,0,0,0],a)};a.quantizeExtent=C;a.quantizeMultipoint=z;a.quantizePoint=y;a.quantizePolygon=x;a.quantizePolyline=E;a.quantizeGeometry=function(a,b){return a&&b?l.isPoint(b)?y(a,{},b,!1,!1):
l.isPolyline(b)?E(a,{},b,!1,!1):l.isPolygon(b)?x(a,{},b,!1,!1):l.isMultipoint(b)?z(a,{},b,!1,!1):l.isExtent(b)?C(a,{},b,!1,!1):null:null};a.hydrateExtent=function(a,c,e,f,g){c.xmin=d(a,e.xmin);c.ymin=b(a,e.ymin);c.xmax=d(a,e.xmax);c.ymax=b(a,e.ymax);c!==e&&(f&&(c.zmin=e.zmin,c.zmax=e.zmax),g&&(c.mmin=e.mmin,c.mmax=e.mmax));return c};a.hydrateMultipoint=function(a,b,c,d,e){b.points=p(a,c.points,d,e);return b};a.hydratePoint=function(a,c,e,f,g){c.x=d(a,e.x);c.y=b(a,e.y);c!==e&&(f&&(c.z=e.z),g&&(c.m=
e.m));return c};a.hydratePolygon=function(a,b,c,d,e){b.rings=u(a,c.rings,d,e);return b};a.hydratePolyline=function(a,b,c,d,e){b.paths=t(a,c.paths,d,e);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","./attributeSupport"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a,h){this._fieldDataCache=new l.default;this._returnDistinctMap=new l.default;this.returnDistinctValues=a.returnDistinctValues;
this.fieldsMap=h;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var e=h=0;e<a.length;e++){var g=a[e],d=f.getExpressionFromFieldName(g),b=this.fieldsMap.has(d),d=b?null:f.getWhereClause(d),b=b?this.fieldsMap.get(g).name:f.getAliasFromFieldName(g)||"FIELD_EXP_"+h++;this._fieldDataCache.set(g,{alias:b,clause:d})}}}a.prototype.getAttributes=function(a){a=a.attributes;a=this._processAttributesForOutFields(a);return a=this._processAttributesForDistinctValues(a)};a.prototype.getFieldValue=
function(a,h){a=a.attributes;var e=this.fieldsMap.has(h),g=e?this.fieldsMap.get(h).name:h,d=null;this._fieldDataCache.has(g)?d=this._fieldDataCache.get(g).clause:e||(d=f.getWhereClause(h),this._fieldDataCache.set(g,{alias:g,clause:d}));return e?a[g]:d.calculateValue(a)};a.prototype.validateItem=function(a,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h)});return this._fieldDataCache.get(h).clause.testFeature(a.attributes)};a.prototype.validateItems=function(a,
h){var e=this;this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:f.getWhereClause(h)});a=a.map(function(a){return e.getAttributes(a)});return this._fieldDataCache.get(h).clause.testSet(a)};a.prototype._processAttributesForOutFields=function(a){var f=this.outFields;if(!a||!f||!f.length)return a;for(var e={},g=0;g<f.length;g++){var d=this._fieldDataCache.get(f[g]),b=d.alias,d=d.clause;e[b]=d?d.calculateValue(a):a[b]}return e};a.prototype._processAttributesForDistinctValues=function(a){if(!a||
!this.returnDistinctValues)return a;var f=this.outFields,e=[];if(f)for(var g=0;g<f.length;g++){var d=this._fieldDataCache.get(f[g]).alias;e.push(a[d])}else for(d in a)e.push(a[d]);f=(f||["*"]).join(",")+"\x3d"+e.join(",");e=this._returnDistinctMap.get(f)||0;this._returnDistinctMap.set(f,++e);return 1<e?null:a};return a}();a.default=m})},"esri/layers/graphics/data/timeSupport":function(){define(["require","exports"],function(m,a){function l(a,f,k,e){if(null!=k&&null!=e&&k===e)return function(e){return k>=
e.attributes[a]&&k<=e.attributes[f]};if(null!=k&&null!=e)return function(g){return!(g.attributes[a]>e||g.attributes[f]<k)};if(null!=k)return function(a){return!(a.attributes[f]<k)};if(null!=e)return function(f){return!(f.attributes[a]>e)}}function f(a,f,k){if(null!=f&&null!=k&&f===k)return function(e){return e.attributes[a]===f};if(null!=f&&null!=k)return function(e){return e.attributes[a]>=f&&e.attributes[a]<=k};if(null!=f)return function(e){return e.attributes[a]>=f};if(null!=k)return function(e){return e.attributes[a]<=
k}}Object.defineProperty(a,"__esModule",{value:!0});a.getTimeExtent=function(a,f){if(!a)return null;var g=a.startTimeField,e=a.endTimeField,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(g&&e)f.forEach(function(a){var b=a.attributes;a=b[g];b=b[e];null==a||isNaN(a)||(h=Math.min(h,a));null==b||isNaN(b)||(d=Math.max(d,b))});else{var b=g||e;f.forEach(function(a){a=a.attributes[b];null==a||isNaN(a)||(h=Math.min(h,a),d=Math.max(d,a))})}return{start:h,end:d}};a.getTimeOperator=function(a,g){if(!g||
!a)return null;var h=a.startTimeField;a=a.endTimeField;if(!h&&!a)return null;var e=g.start;g=g.end;return null==e&&null==g?null:h&&a?l(h,a,e,g):f(h||a,e,g)}})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/kebabDictionary ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./spatialQuerySupport".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u){function w(b,c,g){return f(this,void 0,void 0,function(){var f,p,h,k,q;return l(this,function(l){switch(l.label){case 0:if(!b)return[2,null];f=b.where;b.where=f=f&&f.trim();if(!f||/^1 *= *1$/.test(f)||c&&c===f)b.where=null;return b.geometry?[4,A(b)]:[2,b];case 1:return p=l.sent(),b.distance=0,b.units=null,"esriSpatialRelEnvelopeIntersects"===b.spatialRel&&(h=b.geometry.spatialReference,p=e.getGeometryExtent(p),p.spatialReference=h),b.geometry=p,[4,t.checkProjectionSupport(p.spatialReference,
g)];case 2:return l.sent(),[4,d.normalizeCentralMeridian(n.fromJSON(p))];case 3:return k=l.sent(),[4,t.project(k[0].toJSON(),k[0].spatialReference,g)];case 4:q=l.sent();if(!q)throw a.QUERY_ENGINE_EMPTY_RESULT;q.spatialReference=g;b.geometry=q;return[2,b]}})})}function A(a){var c=a.geometry,d=a.distance,e=a.units;if(null==d)return g.resolve(c);a=c.spatialReference;var f=e&&C.fromJSON(e)||k.getUnitString(a),e=null,e=a&&(b.isGeographic(a)||b.isWebMercator(a))?g.resolve(c):t.checkProjectionSupport(a,
b.WGS84).then(function(){return t.project(c,b.WGS84)});return e.then(function(a){return u.getGeodesicBufferOperator().then(function(b){return b(a,d,f).toJSON()})})}Object.defineProperty(a,"__esModule",{value:!0});var C=new h.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});a.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var z=new p.default,
y=new p.default,x={esriGeometryPoint:q.convertToPoint,esriGeometryPolyline:q.convertToPolyline,esriGeometryPolygon:q.convertToPolygon,esriGeometryMultipoint:q.convertToMultipoint};a.getCentroid=function(a,b,d){if("esriGeometryPolygon"!==a.geometryType||!b.centroid&&!b.geometry)return null;b.centroid||(b.centroid=c.getCentroidOptimizedGeometry(new p.default,b.geometry,a.hasZ,a.hasM));return d?(b=q.quantizeOptimizedGeometry(y,b.centroid,a.hasZ,a.hasM,"esriGeometryPoint",d),q.convertToPoint(b,a.hasZ,
a.hasM)):q.convertToPoint(b.centroid,a.hasZ,a.hasM)};a.getGeometry=function(a,b,c,d){b="coords"in b?b:b.geometry;return b?c?(c=q.generalizeOptimizedGeometry(z,b,a.hasZ,a.hasM,a.geometryType,c),d&&(c=q.quantizeOptimizedGeometry(y,c,a.hasZ,a.hasM,a.geometryType,d)),x[a.geometryType](c,a.hasZ,a.hasM)):d?(c=q.quantizeOptimizedGeometry(y,b,a.hasZ,a.hasM,a.geometryType,d),x[a.geometryType](c,a.hasZ,a.hasM)):x[a.geometryType](b,a.hasZ,a.hasM):null};a.normalizeQuery=function(a,b,c){return f(this,void 0,void 0,
function(){var d,e,f,g,p;return l(this,function(h){d=a.outFields;e=a.orderByFields;f=a.groupByFieldsForStatistics;g=a.outStatistics;if(d)for(p=0;p<d.length;p++)d[p]=d[p].trim();if(e)for(p=0;p<e.length;p++)e[p]=e[p].trim();if(f)for(p=0;p<f.length;p++)f[p]=f[p].trim();if(g)for(p=0;p<g.length;p++)g[p].onStatisticField&&(g[p].onStatisticField=g[p].onStatisticField.trim());a.geometry&&!a.outSR&&(a.outSR=a.geometry.spatialReference);return[2,w(a,b,c)]})})};a.normalizeFilter=function(a,b,c){return f(this,
void 0,void 0,function(){return l(this,function(d){return[2,w(a,b,c)]})})};a.cleanFromGeometryEngine=function(a){return a&&E in a?JSON.parse(JSON.stringify(a,B)):a};var E="_geVersion",B=function(a,b){return a!==E?b:void 0}})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),function(m,
a,l,f,h,g,k,e,n,d,b,c){function q(a){return"polygon"===a.type?a.rings:a.paths}function p(a,b){return Math.ceil((a-b)/(2*b))}function t(a,b){for(var c=0,d=q(a);c<d.length;c++)for(var e=0,f=d[c];e<f.length;e++)f[e][0]+=b;return a}function u(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var f=a[e],g=null,p=0;p<f.length;p++)g=f[p],b.push(g),0===p?d=c=g[0]:(c=Math.min(c,g[0]),d=Math.max(d,g[0]));g&&b.push([(c+d)/2,0])}return b}function w(a,b){if(!(a instanceof e||a instanceof k))throw x.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new f("straightLineDensify: the input geometry is neither polyline nor polygon");for(var c=[],d=0,g=q(a);d<g.length;d++){var p=g[d],h=[];c.push(h);h.push([p[0][0],p[0][1]]);for(var n=0;n<p.length-1;n++){var l=p[n][0],t=p[n][1],m=p[n+1][0],u=p[n+1][1],w=Math.sqrt((m-l)*(m-l)+(u-t)*(u-t)),z=(u-t)/w,D=(m-l)/w,C=w/b;if(1<C){for(var A=1;A<=C-1;A++){var y=A*b;h.push([D*y+l,z*y+t])}w=(w+Math.floor(C-1)*b)/2;h.push([D*w+l,z*w+t])}h.push([m,u])}}return"polygon"===a.type?new k({rings:c,spatialReference:a.spatialReference}):
new e({paths:c,spatialReference:a.spatialReference})}function A(a,c,d){c&&(a=w(a,1E6),a=b.webMercatorToGeographic(a,!0));d&&(a=t(a,d));return a}function C(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=p(d,b);a[0]=d+-2*e*b}else d<c&&(e=p(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=p(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=p(d,c),a=a.clone().offset(-2*e*c,0));return a}function z(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],f=b.geometries[d],g=q(f);d=function(a){var b=g[a];b.some(function(c){if(180>
c[0])return!0;for(var d=c=0;d<b.length;d++){var e=b[d][0];c=e>c?e:c}c=Number(c.toFixed(9));c=-360*p(c,180);for(d=0;d<b.length;d++)e=f.getPoint(a,d),f.setPoint(a,d,e.clone().offset(c,0));return!0})};for(var h=0;h<g.length;h++)d(h);if(e===c)if("polygon"===a[0].type)for(d=0,h=q(f);d<h.length;d++)a[e]=a[e].addRing(h[d]);else{if("polyline"===a[0].type)for(d=0,h=q(f);d<h.length;d++)a[e]=a[e].addPath(h[d])}else c=e,a[e]=f},e=0;e<b.cutIndexes.length;e++)d(e);return a}function y(a,f,h){if(!Array.isArray(a))return y([a],
f);f||(B||(B=new c({url:l.geometryServiceUrl})),f=B);for(var n,q,m,u,w,D,x,G=0,F=[],L=[],Z=0;Z<a.length;Z++){var K=a[Z];if(K)if(n||(n=K.spatialReference,q=d.getInfo(n),D=(m=n.isWebMercator)?102100:4326,u=E[D].maxX,w=E[D].minX,x=E[D].plus180Line,D=E[D].minus180Line),q)if("mesh"===K.type)L.push(K);else if("point"===K.type)L.push(C(K.clone(),u,w));else if("multipoint"===K.type)K=K.clone(),K.points=K.points.map(function(a){return C(a,u,w)}),L.push(K);else if("extent"===K.type){var ea=K.clone(),K=ea._normalize(!1,
!1,q);L.push(K.rings?new k(K):K)}else if(K.extent){var ea=K.extent,ba=2*p(ea.xmin,w)*u,K=0===ba?K.clone():t(K.clone(),ba);ea.offset(ba,0);ea.intersects(x)&&ea.xmax!==u?(G=ea.xmax>G?ea.xmax:G,K=A(K,m),F.push(K),L.push("cut")):ea.intersects(D)&&ea.xmin!==w?(G=2*ea.xmax*u>G?2*ea.xmax*u:G,K=A(K,m,360),F.push(K),L.push("cut")):L.push(K)}else L.push(K.clone());else L.push(K);else L.push(K)}n=p(G,u);q=-90;x=n;for(G=new e;0<n;)Z=-180+360*n,G.addPath([[Z,q],[Z,-1*q]]),q*=-1,n--;if(0<F.length&&0<x)return f.cut(F,
G,h).then(function(a){return z(F,a)}).then(function(c){for(var d=[],e=[],g=0;g<L.length;g++){var p=L[g];if("cut"!==p)e.push(p);else{var p=c.shift(),k=a[g];"polygon"===k.type&&k.rings&&1<k.rings.length&&p.rings.length>=k.rings.length?(d.push(p),e.push("simplify")):e.push(m?b.geographicToWebMercator(p):p)}}return d.length?f.simplify(d,h).then(function(a){for(var c=[],d=0;d<e.length;d++){var f=e[d];"simplify"!==f?c.push(f):c.push(m?b.geographicToWebMercator(a.shift()):a.shift())}return c}):e});n=[];
for(q=0;q<L.length;q++)x=L[q],"cut"!==x?n.push(x):(x=F.shift(),n.push(!0===m?b.geographicToWebMercator(x):x));return g.resolve(n)}Object.defineProperty(a,"__esModule",{value:!0});var x=h.getLogger("esri.geometry.support.normalizeUtils"),E={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:n.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,
-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:n.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:n.WebMercator}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:n.WebMercator})}};a.straightLineDensify=w;var B;a.normalizeCentralMeridian=y;a.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var e=a.spatialReference&&d.getInfo(a.spatialReference);
if(!e)return c;var e=e.valid,f=e[0],e=e[1],g=c.width,p=c.xmin;b=c.xmax;b=[b,p];p=b[0];b=b[1];if("extent"===a.type||0===g||g<=e||g>2*e||p<f||b>e)return c;var h;switch(a.type){case "polygon":if(1<a.rings.length)h=u(a.rings);else return c;break;case "polyline":if(1<a.paths.length)h=u(a.paths);else return c;break;case "multipoint":h=a.points}a=c.clone();for(f=0;f<h.length;f++){var k=h[f][0];0>k?(k+=e,b=Math.max(k,b)):(k-=e,p=Math.min(k,p))}a.xmin=p;a.xmax=b;return a.width<g?(a.xmin-=e,a.xmax-=e,a):c};
a.normalizeMapX=function(a,b){if(b=d.getInfo(b)){var c=b.valid;b=c[0];var c=c[1],e=c-b;if(a<b)for(;a<b;)a+=e;if(a>c)for(;a>c;)a-=e}return a}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(m,a,l,f,h,g,k,e,n,d,b){var c=new a.KebabDictionary({MGRS:"mgrs",
USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),q=l.ensureType(b);a=d.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,c){var d=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,
{f:"json",sr:JSON.stringify(d.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};if(this.requestOptions||c)a=m.mixin({},this.requestOptions,c,a);return n(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:d,rings:a.rings})})})},buffer:function(a,b){var c=m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.outSpatialReference||
a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:d,rings:a.rings})})})},cut:function(a,b,c){var d=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a[0]),geometries:f}),
cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||c)a=m.mixin({},this.requestOptions,c,a);return n(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",d)})}})},convexHull:function(a,b){var c=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||
b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/convexHull",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",
d)})})},difference:function(a,b,c){var d=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=m.mixin({},this.requestOptions,c,a);return n(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",d)})})},
distance:function(a,b){a={query:m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.strings=JSON.stringify(a.strings);d.conversionType=c.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;a={query:m.mixin({},this.parsedUrl.query,
{f:"json"},d)};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",
d)})})},intersect:function(a,b,c){var d=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||c)a=m.mixin({},this.requestOptions,c,a);return n(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",d)})})},lengths:function(a,
b){a={query:m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),d=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),polygons:JSON.stringify(c)})};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+
"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return e.fromJSON(a).set("spatialReference",d)})})},offset:function(a,b){var c=m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",d)})})},project:function(a,
b){a=q(a);var c=m.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),d=a.outSpatialReference,f=e.getJsonType(a.geometries[0]),g=this._decodeGeometries;a={query:c};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/project",a).then(function(a){return g(a.data,f,d)})},relation:function(a,b){a={query:m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/relation",
a).then(this._handleRelationResponse)},reshape:function(a,b,c){var d=a.spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||c)a=m.mixin({},this.requestOptions,c,a);return n(this.parsedUrl.path+"/reshape",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",d)})},simplify:function(a,b){var c=a[0].spatialReference,
d=m.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=e.getJsonType(a[0]),g=this._decodeGeometries;a={query:d};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/simplify",a).then(function(a){return g(a.data,f,c)})},toGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.coordinates=JSON.stringify(a.coordinates);
d.conversionType=c.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a={query:m.mixin({},this.parsedUrl.query,{f:"json"},d)};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.sr;a={query:c};if(this.requestOptions||
b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new g({spatialReference:d,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:m.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=m.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/union",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",
c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:e.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var d=e.getGeometryType(b);a=a.geometries;var f=[],
g={spatialReference:c.toJSON()},p=m.mixin;a.forEach(function(a,b){f[b]=new d(p(a,g))});return f},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof f?new k({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new g({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new f(a[0][0],a[0][1],a[2][0],a[2][1],c)):new h({points:a.paths[0],spatialReference:c.toJSON()})}});
m.mixin(a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,
UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,
UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,
UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return a})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper dojo/Deferred dojo/has!host-webworker?./core/workers/request dojo/io-query ./core/urlUtils dojo/errors/CancelError dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/urlUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w){function A(a,b){void 0===b&&(b=!1);w.isBlobProtocol(a.url)||w.isDataProtocol(a.url)||!a.content||(a.preventCache&&(a.content["request.preventCache"]=Date.now()),a.url=w.addQueryParameters(a.url,a.content));var c=new Image;c.crossOrigin=a.withCredentials?"use-credentials":"anonymous";var d=!1;return u.create(function(e,f){var g=function(){c.onload=c.onerror=c.onabort=null;b&&URL.revokeObjectURL(this.src);d||f(Error("Unable to load the resource"))};c.onload=
function(){c.onload=c.onerror=c.onabort=null;b&&URL.revokeObjectURL(this.src);d||e(this)};c.onerror=g;c.onabort=g;c.alt="";c.src=a.url},function(){d=!0;c.onload=c.onerror=c.onabort=null;c.src=""})}function C(a){a=new k.Url(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function z(){return J?J:J=u.create(function(a){m(["./identity/IdentityManager"],a)}).then(function(a){N=a})}function y(a,b){var c=!!a.useProxy,d=a.method||"auto";a=l({},a);a.content=a.content||{};a._ssl&&(a.url=a.url.replace(/^http:/i,
"https:"));var e=a.url,f=w.isBlobProtocol(e)||w.isDataProtocol(e);a._token&&(a.content.token=a._token);var h=0,k;f||(k=g.objectToQuery(a.content),h=k.length+e.length+1,p("esri-url-encodes-apostrophe")&&(h=k.replace(/'/g,"%27").length+e.length+1));a.timeout=null!=a.timeout?a.timeout:G.timeout;a.handleAs=a.handleAs||"json";try{var q=k=void 0,m=!f&&("post"===d||!!a.body||h>G.maxUrlLength),z=!f&&(c||!!w.getProxyRule(a.url)),y;if(y=!z&&"image"===a.handleAs&&G.proxyUrl&&!f){var C=w.getOrigin(a.url);y=!(!C||
t.endsWith(C,".arcgis.com")||w.hasSameOrigin(C,w.appUrl)||-1!==D._corsServers.indexOf(C)||w.isTrustedServer(C))}y&&(a.handleAs="blob");z&&(p("host-browser")||p("host-webworker"))&&(k=w.getProxyUrl(e),q=k.path,!m&&q.length+1+h>G.maxUrlLength&&(m=!0),k.query&&(a.content=l({},k.query,a.content)),m||(a.preventCache&&(a.content["request.preventCache"]=Date.now(),a.preventCache=!1),a.url=w.addQueryParameters(a.url,a.content),a.content=null),a.url=q+"?"+a.url);var x=a.headers;if(!f){!p("host-browser")&&
!p("host-webworker")||x&&x.hasOwnProperty("X-Requested-With")||(a.headers=x||{},a.headers["X-Requested-With"]=null);if(p("host-browser")&&b){var H=a.content&&a.content.token;H&&(b.set?b.set("token",H):b.append("token",H));a.contentType=!1}if(!a.hasOwnProperty("withCredentials"))if(c=z?q:e,w.isTrustedServer(c))a.withCredentials=!0;else if(N){var O=N.findServerInfo(c);O&&O.webTierAuth&&(a.withCredentials=!0)}}if(m)return"image"===a.handleAs&&(a.handleAs="blob"),a.body?(a.data=b||a.body,a.query=a.content):
a.data=a.content,delete a.body,delete a.content,!z&&p("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+Date.now()+P++),n.post(a.url,a);var J;if(J="image"===a.handleAs){var B;a:{if(x)for(var F in x)if(x[F]){B=!0;break a}B=!1}J=!B}if(J)return A(a);"image"===a.handleAs&&(a.handleAs="blob");a.query=a.content;delete a.content;return n.get(a.url,a)}catch(wa){return u.reject(wa)}}function x(a,b,d,e){function g(a){a._pendingDfd=y(d,n);var b=!!a._pendingDfd.response;(a._pendingDfd.response||
a._pendingDfd).then(function(a){if(!b||!a.data)return a;G.proxyUrl&&!t.startsWith(a.url,G.proxyUrl)&&F(a.url);var c=a.getHeader("Content-Type");if(c&&(c=c.toLowerCase(),-1===c.indexOf("text/plain")&&-1===c.indexOf("application/json")))return a;c=a.data;if(c instanceof ArrayBuffer&&750>=c.byteLength)c=new Blob([c]);else if(!(c instanceof Blob&&750>=c.size))return a;var d=new f,e=new FileReader;e.readAsText(c);e.onloadend=function(){if(!e.error)try{var b=JSON.parse(e.result);b.error&&(Object.isExtensible(a)||
(a=l({},a)),a._jsonData=b)}catch(ua){}d.resolve(a)};return d.promise}).then(function(a){return b&&!a._jsonData&&"image"===e.requestOptions.responseType&&a.data instanceof Blob?(b=!1,d.url=URL.createObjectURL(a.data),A(d,!0)):a}).then(function(c){var d=b?c.data:c,f=b?c.getHeader.bind(c):O;if(d&&(c=b&&c._jsonData||d,c.error||"error"===c.status))throw d=t.mixin(Error(),c.error||c),d.getHeader=f,d;a.resolve({data:d,url:e.url,requestOptions:e.requestOptions,getHeader:f});a._pendingDfd=null}).catch(function(b){var c,
f,g,k;b&&(c=Number(b.code),f=b.hasOwnProperty("subcode")?Number(b.subcode):null,g=(g=b.messageCode)&&g.toUpperCase(),k=b.response);if(k&&0===k.status&&G.proxyUrl&&!p&&"post"!==d.method&&k.url&&!t.startsWith(k.url,G.proxyUrl))w.addProxyRule({proxyUrl:G.proxyUrl,urlPrefix:w.removeFile(w.urlToObject(d.url).path)}),x(a,!0,d,e);else{if(403===c&&(4===f||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=d._sslFromServer=!0;x(a,!0,
d,e);return}}else if(h&&"no-prompt"!==d.authMode&&N._errorCodes&&-1!==N._errorCodes.indexOf(c)&&!N._isPublic(d.url)&&(403!==c||H&&-1===H.indexOf(g)&&(null==f||2===f&&d._token))){E(a,d,e,B("request:server",b,e));return}k&&0<k.status&&k.url&&G.proxyUrl&&!t.startsWith(k.url,G.proxyUrl)&&F(k.url);a.reject(B("request:server",b,e));a._pendingDfd=null}})}var p=d.body,h=d.useIdentity,k,n=null,q=p instanceof FormData;if(q||p&&p.elements)n=q?p:new FormData(p);var m=!!(-1!==d.url.toLowerCase().indexOf("token\x3d")||
d.content&&d.content.token||n&&n.get&&n.get("token")||p&&p.elements&&p.elements.token);b||(!h||m||d._token||N._isPublic(d.url)||(b=function(a){a&&(d._token=a.token,d._ssl=a.ssl)},"immediate"===d.authMode?k=N.getCredential(d.url).then(b):"no-prompt"===d.authMode?k=N.checkSignInStatus(d.url).then(b).catch(function(){}):b(N.findCredential(d.url))),b=function(a){delete d._credential;if(a){var b=!!d._ssl;a instanceof c?a.details.ssl=b:a.ssl=b}},a.then(function(a){(/\/sharing\/rest\/accounts\/self/i.test(d.url)||
/\/sharing\/rest\/portals\/self/i.test(d.url))&&!m&&!d._token&&a.data&&a.data.user&&a.data.user.username&&(w.isTrustedServer(d.url)||G.trustedServers.push(C(d.url)));var b=d._credential;if(b){var c=N.findServerInfo(b.server),c=c&&c.owningSystemUrl,e=void 0;c&&(c=c.replace(/\/?$/,"/sharing"),(e=N.findCredential(c,b.userId))&&-1===N._getIdenticalSvcIdx(c,e)&&e.resources.splice(0,0,c))}return a}).then(b,b));k?k.then(function(){a.isCanceled()||g(a)}).catch(function(b){a.reject(b)}):g(a);return a.promise}
function E(a,b,c,d){a._pendingDfd=N.getCredential(b.url,{error:d,token:b._token});a._pendingDfd.then(function(d){b._token=d.token;b._credential=d;b._ssl=b._sslFromServer||d.ssl;x(a,!0,b,c)}).catch(function(b){a.reject(b);a._pendingDfd=null})}function B(a,b,d){var e="Error",f={url:d.url,requestOptions:d.requestOptions,getHeader:O};if(b instanceof c)return b.details?(b.details=t.clone(b.details),b.details.url=d.url,b.details.requestOptions=d.requestOptions):b.details=f,b;if(b){var g=b.response;d=g&&
g.getHeader;var g=g&&g.status,p=b.message;d=b.getHeader||d;p&&(e=p);d&&(f.getHeader=d);f.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||g;f.subCode=b.subcode;f.messageCode=b.messageCode;f.messages="string"===typeof b.details?[b.details]:b.details}a=new c(a,e,f);b&&"cancel"===b.dojoType&&(a.name="AbortError",a.dojoType="cancel");return a}function F(a){w.isBlobProtocol(a)||w.isDataProtocol(a)||(a=w.getOrigin(a))&&-1===D._corsServers.indexOf(a)&&D._corsServers.push(a)}function D(a,d){if(h&&q.invokeStaticMessage)return h.execute(a,
d);w.isBlobProtocol(a)||w.isDataProtocol(a)||(a=w.normalize(a));var f={url:a,requestOptions:l({},d)},g=w.getInterceptor(a);if(g){if(null!=g.responseData)return u.resolve({data:g.responseData,requestOptions:f.requestOptions,getHeader:O,url:a});g.headers&&(f.requestOptions.headers=l({},f.requestOptions.headers,g.headers));g.query&&(f.requestOptions.query=l({},f.requestOptions.query,g.query));if(g.before&&(d=g.before(f),null!=d))return d instanceof Error||d instanceof c?u.reject(B("request:interceptor",
d,f)):u.resolve({data:d,requestOptions:f.requestOptions,getHeader:O,url:f.url})}var n=l({url:f.url},f.requestOptions);n.content=n.query;delete n.query;n.preventCache=!!n.cacheBust;delete n.cacheBust;n.handleAs=n.responseType;delete n.responseType;"array-buffer"===n.handleAs&&(n.handleAs="arraybuffer");if("image"===n.handleAs){if(p("host-webworker"))return u.reject(B("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),f))}else if(w.isDataProtocol(a))return u.reject(B("request:invalid-parameters",
Error("Data URLs are not supported for responseType \x3d "+n.handleAs),f));var t=G.useIdentity;"anonymous"===n.authMode&&(t=!1);n.useIdentity=t;n.urlObj=new k.Url(n.url);var m=b.makeDeferredCancellingPending(),D;f.requestOptions.signal&&(a=f.requestOptions.signal,D=function(){m.cancel(B("AbortError",new e("Request canceled"),f))},a.aborted?D():a.addEventListener("abort",D));u.resolve().then(function(){if(t&&!N)return z()}).catch(function(){}).then(function(){m.isCanceled()||x(m,!1,n,f)});return m.then(function(a){f.requestOptions.signal&&
f.requestOptions.signal.removeEventListener("abort",D);g&&g.after&&g.after(a);return a}).catch(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",D);throw a;})}var G=d.request,H=["COM_0056","COM_0057"],P=0,O=function(){return null},N,J;(D||(D={}))._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return D})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ../kernel ./Error ./global ./lang ./Logger".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){function c(b){var c={path:null,query:null},d=new a.Url(b),e=b.indexOf("?");null===d.query?c.path=b:(c.path=b.substring(0,e),c.query=f.queryToObject(d.query));d.fragment&&(c.hash=d.fragment,null===d.query&&(c.path=c.path.substring(0,c.path.length-(d.fragment.length+1))));return c}function q(a){var b=a.indexOf("?");-1!==b?(xa.path=a.slice(0,b),xa.query=a.slice(b+1)):(xa.path=a,xa.query=null);return xa}function p(a){a=q(a).path;a&&"/"===a[a.length-1]||(a+="/");a=M(a,!0);
return a=a.toLowerCase()}function t(a){var b=ma.proxyRules;a=p(a);for(var c=0;c<b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}function u(a){a=z(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function w(a,b,c){void 0===c&&(c=!1);a=L(a);b=L(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function A(b,c,d){void 0===c&&(c=a.appBaseUrl);if(P(b))return d&&d.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&
a.appUrl.authority===x(b).slice(2)?"http:"+b:"https:"+b;if(!O(b)){d=y;if("/"===b[0]){var e=c.indexOf("//"),e=c.indexOf("/",e+2);c=-1===e?c:c.slice(0,e)}return d(c,b)}return b}function C(b,c,d){void 0===c&&(c=a.appBaseUrl);if(!E(b))return b;var e=z(b),f=e.toLowerCase();c=z(c).toLowerCase().replace(/\/+$/,"");if((d=d?z(d).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(d))return b;for(var g=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},p=g(f,"/",f.indexOf("//")+2),h=-1;f.slice(0,p+
1)===c.slice(0,p)+"/";){h=p+1;if(p===f.length)break;p=g(f,"/",p+1)}if(-1===h||d&&h<d.length)return b;b=e.slice(h);e=c.slice(h-1).replace(/[^/]+/g,"").length;if(0<e)for(f=0;f<e;f++)b="../"+b;else b="./"+b;return b}function z(a){a=a.trim();a=A(a);if(/^https?:\/\//i.test(a)){var b=q(a);a=b.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");b.query&&(a+="?"+b.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=W(a)}function y(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];
if(a&&a.length){b=[];if(E(a[0])){var c=a[0],d=c.indexOf("//");b.push(c.slice(0,d+1));ya.test(a[0])&&(b[0]+="/");a[0]=c.slice(d+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)d=a[c],".."===d&&0<b.length&&".."!==b[b.length-1]?b.pop():!d||"."===d&&0!==b.length||b.push(d);return b.join("/")}}function x(a){if(B(a)||F(a))return null;var b=a.indexOf("://");if(-1===b&&P(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);
return-1===b?a:a.slice(0,b)}function E(a){return P(a)||O(a)}function B(a){return"blob:"===a.slice(0,5)}function F(a){return"data:"===a.slice(0,5)}function D(a){a=G(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function G(a){return(a=a.match(Xa))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function H(a){var b=D(a);if(!b)return null;a=G(a);return new Blob([b],{type:a.mediaType})}function P(a){return a&&
"/"===a[0]&&"/"===a[1]}function O(a){return sa.test(a)}function N(b){return qa.test(b)||"http"===a.appUrl.scheme&&P(b)}function J(a){return P(a)?"https:"+a:a.replace(qa,"https:")}function R(){return"https"===a.appUrl.scheme}function M(a,b){void 0===b&&(b=!1);if(P(a))return a.slice(2);a=a.replace(sa,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function W(b){var c=ma.httpsDomains;if(!N(b))return b;var e=b.indexOf("/",7),f;f=-1===e?b:b.slice(0,e);f=f.toLowerCase().slice(7);if(ja.test(f))if(d.endsWith(f,
":80"))f=f.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&f===a.appUrl.authority&&!Pa.test(b))return b;if(R()&&f===a.appUrl.authority||c&&c.some(function(a){return f===a||d.endsWith(f,"."+a)})||R()&&!t(b))b=J(b);return b}function S(a,b,c){if(!(b&&c&&a&&E(a)))return a;var d=a.indexOf("//"),e=a.indexOf("/",d+2),f=a.indexOf(":",d+2),e=Math.min(0>e?a.length:e,0>f?a.length:f);if(a.slice(d+2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,d+2);a=a.slice(e);return""+
b+c+a}function L(b){if("string"===typeof b)return new a.Url(A(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}function Z(b,c){var d=c&&c.url&&c.url.path;b&&d&&(b=A(b,d,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(d=c.urlKey+"."+c.customBaseUrl,c=w(a.appUrl,a.appUrl.scheme+"://"+d)?S(b,c.portalHostname,d):S(b,d,c.portalHostname)):c=b;return c}function K(a,b){if(!a)return a;!E(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=A(a);if(b){var d=
b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;d&&(c=C(c,d,d),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?S(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;E(c)&&(c=z(c));return c}function ea(a,b,d){a=c(a);var e=a.query||{};e[b]=d;return a.path+"?"+f.objectToQuery(e)}Object.defineProperty(a,"__esModule",{value:!0});a.Url=h;var ba=b.getLogger("esri.core.urlUtils"),ma=
g.request,sa=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,qa=/^\s*http:/i,la=/^\s*https:/i,ya=/^\s*file:/i,ja=/:\d+$/,Pa=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.appUrl=new a.Url(g.applicationUrl);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=c;a.getProxyUrl=function(b){void 0===b&&(b=!1);var d,f=ma.proxyUrl;
if("string"===typeof b){if(d=b,d=la.test(d)||"https"===a.appUrl.scheme&&P(d),b=t(b))f=b.proxyUrl}else d=!!b;if(!f)throw ba.warn("esri/config: esriConfig.request.proxyUrl is not set."),new e("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");d&&R()&&(f=J(f));return c(f)};a.addProxy=function(a){var b=t(a),d,e;b&&(e=q(b.proxyUrl),d=e.path,e=e.query?f.queryToObject(e.query):null);d&&(b=c(a),a=d+"?"+b.path,(d=f.objectToQuery(l({},e,b.query)))&&(a=a+"?"+d));return a};var xa=
{path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:p(a.urlPrefix)};for(var b=ma.proxyRules,c=a.urlPrefix,d=b.length,e=0;e<b.length;e++){var f=b[e].urlPrefix;if(0===c.indexOf(f)){if(c.length===f.length)return-1;d=e;break}0===f.indexOf(c)&&(d=e+1)}b.splice(d,0,a);return d};a.getProxyRule=t;a.hasSamePortal=function(a,b){a=u(a);b=u(b);return M(a)===M(b)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&d.startsWith(a,
b)},c=ma.interceptors;if(c)for(var e=0;e<c.length;e++){var f=c[e];if(Array.isArray(f.urls)){if(f.urls.some(b))return f}else if(b(f.urls))return f}return null};a.hasSameOrigin=w;a.isTrustedServer=function(b){if("string"===typeof b)if(E(b))b=L(b);else return!0;for(var c=ma.trustedServers||[],d=0;d<c.length;d++){var e;e=c[d];a.trustedServersUrlCache[e]||(O(e)||P(e)?a.trustedServersUrlCache[e]=[new a.Url(A(e))]:a.trustedServersUrlCache[e]=[new a.Url("http://"+e),new a.Url("https://"+e)]);e=a.trustedServersUrlCache[e];
for(var f=0;f<e.length;f++)if(w(b,e[f]))return!0}return!1};a.makeAbsolute=A;a.makeRelative=C;a.normalize=z;a.join=y;a.getOrigin=x;a.isAbsolute=E;a.isBlobProtocol=B;a.isDataProtocol=F;a.dataToArrayBuffer=D;var Xa=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=G;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.dataToBlob=H;a.downloadDataAsFile=function(a,b){var c;a:if(c=document.createElement("a"),"download"in c){var d=null;if(n.URL&&n.URL.createObjectURL){d=
H(a);if(!d){c=!1;break a}d=n.URL.createObjectURL(d)}c.download=b;c.href=d||a;c.style.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c);d&&n.URL.revokeObjectURL(d);c=void 0}else c=!1;c||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(H(a),b)};a.isProtocolRelative=P;a.hasProtocol=O;a.toHTTP=function(a){return P(a)?"http:"+a:a.replace(la,"http:")};a.toHTTPS=J;a.isAppHTTPS=R;a.removeFile=function(a){var b=0;if(E(a)){var c=a.indexOf("//");-1!==c&&(b=
c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=S;a.fromJSON=Z;a.read=function(a,b,c){return Z(a,c)};a.toJSON=K;a.write=function(a,b,c,d){(a=K(a,d))&&(b[c]=a)};a.isSVG=function(a){return ua.test(a)};a.removeQueryParameters=function(a,b){a=c(a);var d=Object.keys(a.query||{});0<d.length&&b&&b.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+d.join(", ")+
".");return a.path};a.addQueryParameter=ea;a.addQueryParameters=function(a,b){a=c(a);var d=a.query||{},e;for(e in b)d[e]=b[e];return(b=f.objectToQuery(d))?a.path+"?"+b:a.path};a.removeQueryParameter=function(a,b){var d=c(a),e=d.path,d=d.query;if(!d)return a;delete d[b];return(a=f.objectToQuery(d))?e+"?"+a:e};a.addTokenParameter=function(a){var b=k.id&&k.id.findCredential(a);return b&&b.token?ea(a,"token",b.token):a};var ua=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],
function(m){var a=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,l=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,f=function(){for(var h=arguments,g=[h[0]],k=1;k<h.length;k++)if(h[k]){var e=new f(h[k]+""),g=new f(g[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(g.fragment=e.fragment),e=g;else if(!e.scheme&&(e.scheme=g.scheme,!e.authority&&(e.authority=g.authority,"/"!=e.path.charAt(0)))){for(var g=(g.path.substring(0,g.path.lastIndexOf("/")+
1)+e.path).split("/"),n=0;n<g.length;n++)"."==g[n]?n==g.length-1?g[n]="":(g.splice(n,1),n--):0<n&&(1!=n||""!=g[0])&&".."==g[n]&&".."!=g[n-1]&&(n==g.length-1?(g.splice(n,1),g[n-1]=""):(g.splice(n-1,2),n-=2));e.path=g.join("/")}g=[];e.scheme&&g.push(e.scheme,":");e.authority&&g.push("//",e.authority);g.push(e.path);e.query&&g.push("?",e.query);e.fragment&&g.push("#",e.fragment)}this.uri=g.join("");h=this.uri.match(a);this.scheme=h[2]||(h[1]?"":null);this.authority=h[4]||(h[3]?"":null);this.path=h[5];
this.query=h[7]||(h[6]?"":null);this.fragment=h[9]||(h[8]?"":null);null!=this.authority&&(h=this.authority.match(l),this.user=h[3]||null,this.password=h[4]||null,this.host=h[6]||h[7],this.port=h[9]||null)};f.prototype.toString=function(){return this.uri};return m._Url=f})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(m){var a={makeDeferredCancellingPending:function(){var l={},f=a._dfdCanceller.bind(null,l),f=new m(f);return l.deferred=f},_dfdCanceller:function(a){a=a.deferred?
a.deferred:a;a.canceled=!0;var f=a._pendingDfd;a.isResolved()||!f||f.isResolved()||f.cancel();a._pendingDfd=null},_fixDfd:function(a){var f=a.then;a.then=function(a,g,k){if(a){var e=a;a=function(a){return a&&a._argsArray?e.apply(null,a):e(a)}}return f.call(this,a,g,k)};return a},_resDfd:function(a,f,h){var g=f.length;1===g?h?a.reject(f[0]):a.resolve(f[0]):1<g?(f._argsArray=!0,a.resolve(f)):a.resolve()}};return a})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k,e,n){return function(a){function b(b){b=a.call(this)||this;b.requestOptions=null;b.url=null;return b}l(b,a);b.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:g({url:a},b)};Object.defineProperty(b.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});b.prototype._parseUrl=function(a){return a?e.urlToObject(a):null};b.prototype._encode=function(a,b,d){var c={},e;for(e in a)if("declaredClass"!==e){var f=a[e];
if(null!=f&&"function"!==typeof f)if(Array.isArray(f)){c[e]=[];for(var g=0;g<f.length;g++)c[e][g]=this._encode(f[g])}else"object"===typeof f?f.toJSON&&(f=f.toJSON(d&&d[e]),c[e]=b?f:JSON.stringify(f)):c[e]=f}return c};f([n.property({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null);f([n.property()],b.prototype,"requestOptions",void 0);f([n.property({type:String})],b.prototype,"url",void 0);return b=f([n.subclass("esri.tasks.Task")],b)}(n.declared(k))})},"esri/core/tsSupport/paramHelper":function(){define([],
function(){return function(m,a){return function(l,f){a(l,f,m)}}})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e){var n=g.getLogger("esri.tasks.support.ProjectParameters");return function(a){function b(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=
null;b.transformation=null;b.transformForward=null;return b}l(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],
d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:e.getJsonType(b),geometries:a});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(d.transformForward=this.transformForward);return d};f([k.property()],b.prototype,"geometries",void 0);f([k.property({json:{read:{source:"outSR"}}})],
b.prototype,"outSpatialReference",void 0);f([k.property({json:{read:!1}})],b.prototype,"outSR",null);f([k.property()],b.prototype,"transformation",void 0);f([k.property()],b.prototype,"transformForward",void 0);return b=f([k.subclass("esri.tasks.support.ProjectParameters")],b)}(k.declared(h))})},"esri/layers/graphics/centroid":function(){define(["require","exports","./utils"],function(m,a,l){function f(a,f,e,h,d,b){b=l.getStride(d,b);var c=e,g=e+b,p=0,k=0,n=e=0,m=0,A=0;for(--h;A<h;A++,c+=b,g+=b){var C=
f[c],z=f[c+1],y=f[c+2],x=f[g],E=f[g+1],B=f[g+2],F=C*E-x*z,n=n+F,p=p+(C+x)*F,k=k+(z+E)*F;d&&(F=C*B-x*y,e+=(y+B)*F,m+=F);C<a[0]&&(a[0]=C);C>a[1]&&(a[1]=C);z<a[2]&&(a[2]=z);z>a[3]&&(a[3]=z);d&&(y<a[4]&&(a[4]=y),y>a[5]&&(a[5]=y))}0<n&&(n*=-1);0<m&&(m*=-1);if(!n)return null;a=[p,k,.5*n];d&&(a[3]=e,a[4]=.5*m);return a}function h(a,f,e,h,d){d=l.getStride(h,d);for(var b=f,c=f+d,g=0,p=0,k=0,n=0,m=0,A=e-1;m<A;m++,b+=d,c+=d){var C=a[b],z=a[b+1],y=a[b+2],x=a[c],E=a[c+1],B=a[c+2],F;if(h){F=x-C;var D=E-z,G=B-y;
F=Math.sqrt(F*F+D*D+G*G)}else F=x-C,D=E-z,F=Math.sqrt(F*F+D*D);F&&(g+=F,h?(C=[C+.5*(x-C),z+.5*(E-z),y+.5*(B-y)],p+=F*C[0],k+=F*C[1],n+=F*C[2]):(C=[C+.5*(x-C),z+.5*(E-z)],p+=F*C[0],k+=F*C[1]))}return 0<g?h?[p/g,k/g,n/g]:[p/g,k/g]:0<e?h?[a[f],a[f+1],a[f+2]]:[a[f],a[f+1]]:null}Object.defineProperty(a,"__esModule",{value:!0});a.getCentroidOptimizedGeometry=function(a,k,e,n){if(!k||!k.lengths.length)return null;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);for(var d=a.coords,
b=[],c=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],g=k.lengths,p=k.coords,t=l.getStride(e,n),m=0,w=0;w<g.length;w++){var A=g[w],C=f(c,p,m,A,e,n);C&&b.push(C);m+=A*t}b.sort(function(a,b){var c=a[2]-b[2];0===c&&e&&(c=a[4]-b[4]);return c});b.length&&(t=6*b[0][2],d[0]=b[0][0]/t,d[1]=b[0][1]/t,
e&&(t=6*b[0][4],d[2]=0!==t?b[0][3]/t:0),d[0]<c[0]||d[0]>c[1]||d[1]<c[2]||d[1]>c[3]||e&&(d[2]<c[4]||d[2]>c[5]))&&(d.length=0);if(!d.length)if(k=k.lengths[0]?h(p,0,g[0],e,n):null)d[0]=k[0],d[1]=k[1],e&&2<k.length&&(d[2]=k[2]);else return null;return a};a.lineCentroid=h})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q){function p(){return f.create(function(a){return m(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var t={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
u={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},w={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},A={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};
a.importGeometryEngine=p;a.getGeodesicBufferOperator=function(){return p().then(function(a){return a.geodesicBuffer})};a.getSpatialQueryOperator=function(a,c,e){if(k.isPolygon(c)&&"esriGeometryPoint"===e.geometryType&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a)){var l=d.convertFromPolygon(new b.default,c,!1,!1);return f.resolve(function(a){return n.polygonContainsPoint(l,!1,!1,a)})}if(k.isPolygon(c)&&"esriGeometryMultipoint"===e.geometryType){var m=d.convertFromPolygon(new b.default,
c,!1,!1);if("esriSpatialRelContains"===a)return f.resolve(function(a){return n.polygonContainsMultipoint(m,!1,!1,a,e.hasZ,e.hasM)})}if(k.isExtent(c)&&"esriGeometryPoint"===e.geometryType&&("esriSpatialRelIntersects"===a||"esriSpatialRelContains"===a))return f.resolve(function(a){return h.extentContainsPoint(c,q.getGeometry(e,a))});if(k.isExtent(c)&&"esriGeometryMultipoint"===e.geometryType&&"esriSpatialRelContains"===a)return f.resolve(function(a){return h.extentContainsMultipoint(c,q.getGeometry(e,
a))});if(k.isExtent(c)&&"esriSpatialRelIntersects"===a){var u=g.getExtentIntersector(e.geometryType);return f.resolve(function(a){return u(c,q.getGeometry(e,a))})}return p().then(function(b){var d=b[t[a]].bind(null,c);return function(a){return d(q.getGeometry(e,a))}})};a.checkSpatialQuerySupport=function(a,b,d){var g=a.spatialRel,p=a.geometry;return p?!0!==u[g]?f.reject(new l("feature-store:unsupported-query","Unsupported query spatial relationship",{query:a})):e.isValid(p.spatialReference)&&e.isValid(d)?
!0!==w[k.getJsonType(p)]?f.reject(new l("feature-store:unsupported-query","Unsupported query geometry type",{query:a})):!0!==A[b]?f.reject(new l("feature-store:unsupported-query","Unsupported layer geometry type",{query:a})):a.outSR?c.checkProjectionSupport(a.geometry&&a.geometry.spatialReference,a.outSR):f.resolve():f.resolve():f.resolve()};a.canQueryWithRBush=function(a){if(k.isExtent(a))return!0;if(k.isPolygon(a)){var b=0;for(a=a.rings;b<a.length;b++){var c=a[b];if(5!==c.length||c[0][0]!==c[1][0]||
c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1}return!0}return!1}})},"esri/layers/graphics/contains":function(){define(["require","exports","./utils"],function(m,a,l){function f(a,f,k,e,n){if(!a)return!1;f=l.getStride(f,k);k=a.coords;var d=!1,b=0,c=0;for(a=a.lengths;c<a.length;c++){for(var g=a[c],p=b,h=b,m=b+g*f;h<m;h+=f){p=h+f;p===m&&(p=b);var w=k[h],A=k[h+1],C=k[p],p=k[p+1];(A<n&&p>=n||p<n&&A>=n)&&w+(n-A)/(p-A)*(C-w)<e&&(d=!d)}b+=g*f}return d}
Object.defineProperty(a,"__esModule",{value:!0});a.polygonContainsPoint=function(a,g,k,e){return f(a,g,k,e.coords[0],e.coords[1])};a.polygonContainsMultipoint=function(a,g,k,e,n,d){n=l.getStride(n,d);d=e.coords;e=e.lengths;if(!e)return!1;for(var b=0,c=0;b<e.length;b++,c+=n)if(!f(a,g,k,d[c],d[c+1]))return!1;return!0};a.polygonContainsCoords=f})},"esri/layers/support/PromiseQueue":function(){define(["require","exports","dojo/errors/CancelError","../../core/promiseUtils"],function(m,a,l,f){Object.defineProperty(a,
"__esModule",{value:!0});m=function(){function a(){this._deferreds=[];this._values=[]}a.prototype.push=function(a){var g=this;return f.create(function(e,f){g._deferreds.push({resolve:e,reject:f});g._values.push(a)})};a.prototype.unshift=function(a){var g=this;return f.create(function(e,f){g._deferreds.unshift({resolve:e,reject:f});g._values.unshift(a)})};Object.defineProperty(a.prototype,"length",{get:function(){return this._deferreds.length},enumerable:!0,configurable:!0});a.prototype.process=function(){if(0===
this.length)return!1;this._deferreds.shift().resolve(this._values.shift());return!0};a.prototype.cancelAll=function(){for(var a=new l,f=0,e=this._deferreds;f<e.length;f++)e[f].reject(a);this._deferreds.length=0;this._values.length=0};return a}();a.PromiseQueue=m})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),
function(m,a,l,f,h,g,k,e,n){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);c=b;b.fromWorker=function(a){if(!a)return null;a=JSON.parse(a);var b=new c;b.fields=a.fields&&a.fields.map(function(a){return e.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});
b.prototype.clone=function(){return new c(g.clone({fields:this.fields,options:this.options,process:this.process}))};b.prototype.getField=function(a){return n.getField(this.fields,a)};b.prototype.refresh=function(){this.notifyChange("version")};b.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};
var c;f([k.property({type:[e]})],b.prototype,"fields",void 0);f([k.property()],b.prototype,"options",void 0);f([k.property()],b.prototype,"process",void 0);f([k.property({readOnly:!0,dependsOn:["process","options","fields"]})],b.prototype,"version",null);return b=c=f([k.subclass("esri.layers.support.FeatureProcessing")],b)}(k.declared(h))})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../../core/Error ../../core/object ../../core/promiseUtils ./domains".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){function c(a,b,c){if(a)for(var d=0;d<a.length;d++){var e=a[d],f=n.getDeepValue(e,b);(f=f&&"function"!==typeof f&&u(c,f))&&n.setDeepValue(e,f.name,b)}}function q(a,b){if(!a||!b)return[];J.clear();p(J,a,b);return g.from(J).sort()}function p(a,b,c){if(c)if(b&&b.length)if(g.includes(c,"*"))for(c=0;c<b.length;c++)a.add(b[c].name);else for(var d=0;d<c.length;d++)e=c[d],t(a,b,e);else if(g.includes(c,"*"))a.clear(),a.add("*");else for(b=0;b<c.length;b++){var e=c[b];a.add(e)}}
function t(a,b,c){b&&b.length?(b=u(b,c))&&a.add(b.name):"string"===typeof c&&a.add(c)}function u(a,b){if("string"!==typeof b)return null;if(null!=a){b=b.toLowerCase();for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.name.toLowerCase()===b)return d}}return null}function w(a,b,c){return h(this,void 0,void 0,function(){var e,g,p,h,k;return f(this,function(f){switch(f.label){case 0:return c?[4,d.create(function(a){m(["../../support/arcadeUtils"],function(b){a(b)})})]:[2];case 1:e=f.sent();g=e.extractFieldNames(c);
p=0;for(h=g;p<h.length;p++)k=h[p],t(a,b,k);return[2]}})})}function A(a,b){return h(this,void 0,void 0,function(){var c,d;return f(this,function(e){if(!b)return[2];c=b.fields;return(d=n.getDeepValue("elevationInfo.featureExpressionInfo",b))?[2,d.collectRequiredFields(a,c)]:[2]})})}function C(a,b){return h(this,void 0,void 0,function(){var c,e;return f(this,function(f){switch(f.label){case 0:return c=b.labelingInfo,e=b.fields,c&&c.length?[4,d.all(c.map(function(b){return z(a,e,b)}))]:[2];case 1:return f.sent(),
[2]}})})}function z(a,b,c){return h(this,void 0,void 0,function(){var d,e,g,p,h;return f(this,function(f){switch(f.label){case 0:if(!c)return[2];d=c.getLabelExpression();e=c.where;return"arcade"!==d.type?[3,2]:[4,w(a,b,d.expression)];case 1:return f.sent(),[3,3];case 2:(g=d.expression.match(/{[^}]*}/g))&&g.forEach(function(c){t(a,b,c.slice(1,-1))}),f.label=3;case 3:return p=/['"]+/g,e&&(h=e.split(" "),3===h.length&&t(a,b,h[0].replace(p,"")),7===h.length&&(t(a,b,h[0].replace(p,"")),t(a,b,h[4].replace(p,
"")))),[2]}})})}function y(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function x(a){return null===a||y(a)}function E(a){return null===a||R(a)}function B(a){return null!=a&&"string"===typeof a}function F(a){return null===a||B(a)}function D(a){return!0}function G(a,b){var c;switch(a.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":c=a.nullable?E:R;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":c=
a.nullable?x:y;break;case "string":case "esriFieldTypeString":c=a.nullable?F:B;break;default:c=D}return 1===arguments.length?c:c(b)}function H(a){return null!=a&&M.has(a.type)}function P(a,c){return a.nullable&&null===c?null:H(a)&&!O(a.type,c)?W.OUT_OF_RANGE:G(a,c)?a.domain?b.validateDomainValue(a.domain,c):null:S.INVALID_TYPE}function O(a,b){return(a="string"===typeof a?N(a):a)?a.isInteger?R(b)&&b>=a.min&&b<=a.max:b>=a.min&&b<=a.max:!1}function N(b){switch(b){case "esriFieldTypeSmallInteger":case "small-integer":return a.smallIntegerRange;
case "esriFieldTypeInteger":case "integer":return a.integerRange;case "esriFieldTypeSingle":case "single":return a.singleRange;case "esriFieldTypeDouble":case "double":return a.doubleRange}}Object.defineProperty(a,"__esModule",{value:!0});a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");a.visualVariableFields=["field","normalizationField"];a.fixRendererFields=
function(b,d){if(null!=b&&null!=d){var e=0;for(b=Array.isArray(b)?b:[b];e<b.length;e++){var f=b[e];c(a.rendererFields,f,d);if("visualVariables"in f&&f.visualVariables)for(var g=0,f=f.visualVariables;g<f.length;g++)c(a.visualVariableFields,f[g],d)}}};a.fixTimeInfoFields=function(a,b){if(null!=a&&null!=b)if("startField"in a){var c=u(b,a.startField);b=u(b,a.endField);a.startField=c&&c.name||null;a.endField=b&&b.name||null}else c=u(b,a.startTimeField),b=u(b,a.endTimeField),a.startTimeField=c&&c.name||
null,a.endTimeField=b&&b.name||null};var J=new k.default;a.fixFields=q;a.collectFields=p;a.collectField=t;a.unpackFieldNames=function(a,b){return b&&a?g.includes(b,"*")?a.map(function(a){return a.name}):b:[]};a.packFields=function(a,b,c){void 0===c&&(c=1);if(!b||!a)return[];if(g.includes(b,"*"))return["*"];b=q(a,b);return b.length/a.length>=c?["*"]:b};a.getField=u;a.hasField=function(a,b){if(!a||!b||"string"!==typeof b)return!1;b=b.toLowerCase();for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.name.toLowerCase()===
b)return!0}return!1};a.collectArcadeFieldNames=w;a.getElevationFields=function(a){return h(this,void 0,void 0,function(){var b;return f(this,function(c){switch(c.label){case 0:if(!a)return[2,[]];b=new k.default;return[4,A(b,a)];case 1:return c.sent(),[2,g.from(b).sort()]}})})};a.collectElevationFields=A;a.collectFilterFields=function(a,b,c){return h(this,void 0,void 0,function(){var g,h;return f(this,function(f){switch(f.label){case 0:if(!b||!c||!(c.where&&"1\x3d1"!==c.where||c.timeExtent))return[2];
b.timeInfo&&c.timeExtent&&p(a,b.fields,[b.timeInfo.startField,b.timeInfo.endField]);return c.where?[4,d.create(function(a){m(["../../core/sql/WhereClause"],a)})]:[3,2];case 1:g=f.sent();h=g.create(c.where);if(!h.isStandardized())return[2,d.reject(new e("fieldUtils:collectFilterFields","Where clause is not standardized"))];p(a,b.fields,h.getFields());f.label=2;case 2:return[2]}})})};a.getTimeFields=function(a){return h(this,void 0,void 0,function(){var b;return f(this,function(c){return a?(b="timeInfo"in
a&&a.timeInfo)?[2,q(a.fields,[a.trackIdField,b.startField,b.endField])]:[2,[]]:[2,[]]})})};a.getFeatureEditFields=function(a){if(!a)return[];var b="editFieldsInfo"in a&&a.editFieldsInfo;return b?q(a.fields,[b&&b.creatorField,b&&b.creationDateField,b&&b.editorField,b&&b.editDateField]):[]};a.getFeatureGeometryFields=function(a){if(!a)return[];var b="geometryProperties"in a&&a.geometryProperties;return b?q(a.fields,[b&&b.shapeAreaFieldName,b&&b.shapeLengthFieldName]):[]};a.getLabelingFields=function(a){return h(this,
void 0,void 0,function(){var b;return f(this,function(c){switch(c.label){case 0:if(!a)return[2,[]];b=new k.default;return[4,C(b,a)];case 1:return c.sent(),[2,g.from(b).sort()]}})})};a.collectLabelingFields=C;a.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&G(a,b))return b;if(a.nullable)return null};var R=function(){return"isInteger"in Number?Number.isInteger:function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}}();a.isValueMatchingFieldType=G;a.numericTypes=
["integer","small-integer","single","double"];var M=new k.default(a.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));a.isNumericField=H;a.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};a.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};a.isValidFieldValue=function(a,b){return null===P(a,b)};var W;(W=a.NumericRangeValidationError||(a.NumericRangeValidationError=
{})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var S;(S=a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";a.sanitizeNullFieldValue=function(a){return null==a||"number"===typeof a&&isNaN(a)?null:a};a.validateFieldValue=P;a.isNumberInRange=O;a.getFieldRange=function(a){var c=b.getDomainRange(a.domain);if(c)return c;if(H(a))return N(a.type)};a.getNumericTypeForValue=function(b){if(!y(b))return null;if(R(b)){if(b>=a.smallIntegerRange.min&&
b<=a.smallIntegerRange.max)return"esriFieldTypeSmallInteger";if(b>=a.integerRange.min&&b<=a.integerRange.max)return"esriFieldTypeInteger"}return b>=a.singleRange.min&&b<=a.singleRange.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.smallIntegerRange={min:-32768,max:32767,isInteger:!0};a.integerRange={min:-2147483648,max:2147483647,isInteger:!0};a.singleRange={min:-3.4E38,max:1.2E38,isInteger:!1};a.doubleRange={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.validationErrorToString=function(a,
c,d){switch(a){case b.DomainValidationError.INVALID_CODED_VALUE:return"Value "+d+" is not in the coded domain - field: "+c.name+", domain: "+JSON.stringify(c.domain);case b.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+d+" is out of the range of valid values - field: "+c.name+", domain: "+JSON.stringify(c.domain);case S.INVALID_TYPE:return"Value "+d+" is not a valid value for the field type - field: "+c.name+", type: "+c.type+", nullable: "+c.nullable;case W.OUT_OF_RANGE:return a=N(c.type),
"Value "+d+" is out of range for the number type - field: "+c.name+", type: "+c.type+", value range is "+a.min+" to "+a.max}};a.featureHasFields=function(a,b){if(!b||!b.attributes||!a)return!1;b=b.attributes;for(var c=0;c<a.length;c++)if(!(a[c]in b))return!1;return!0}})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){function b(a,b){var c=a.geometry;a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=g.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:
-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),
delete a.source);if(a.timeExtent){c=a.timeExtent;b=c.start;c=c.end;if(null!=b||null!=c)a.time=b===c?b:(null==b?"null":b)+","+(null==c?"null":c);delete a.timeExtent}return a}function c(a,c,e,g,n){void 0===g&&(g={});var p="string"===typeof a?h.urlToObject(a):a;a=c.geometry?[c.geometry]:[];g.responseType="pbf"===e?"array-buffer":"json";return k.normalizeCentralMeridian(a,null,g).then(function(a){if(a=a&&a[0])c=c.clone(),c.geometry=a;a=d.mapParameters(l({},p.query,{f:e},n,b(c,n)));return f(p.path+"/query",
l({},g,{query:a}))})}Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=b;a.executeQuery=function(a,b,d){return c(a,b,"json",d)};a.executeQueryPBF=function(a,b,d,f){return c(a,b,"pbf",f).then(function(a){var b=function(b){a.data=b;return a};return d.useWorker?(null==q&&(q=new n.PBFWorker),q.parseFeatureQuery(a.data,d).then(function(a){return b(a)})):b(e.parsePBFFeatureQuery(a.data,d))})};a.executeQueryForIds=function(a,b,d){return c(a,b,"json",d,{returnIdsOnly:!0})};a.executeQueryForCount=
function(a,b,d){return c(a,b,"json",d,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,d){return c(a,b,"json",d,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(b.hasOwnProperty("extent"))return a;if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return a})};var q})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports",
"./pbfFeatureServiceParser"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.parsePBFFeatureQuery=function(a,h){if((a=l.parseFeatureQuery(a,h).queryResult.featureResult)&&a.features&&a.features.length&&a.objectIdFieldName){h=a.objectIdFieldName;for(var f=0,k=a.features;f<k.length;f++){var e=k[f];e.attributes&&(e.objectId=e.attributes[h])}}return a}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),
function(m,a,l,f,h,g,k){function e(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function n(a){for(var b={type:0>=c.length?null:c[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var d=a.getEnum();b.type=
d>=c.length?null:c[d];break;case 3:b.alias=a.getString();break;case 4:d=a.getEnum();d=d>=q.length?null:q[d];b.sqlType=d;break;default:a.skip()}return b}function d(a,b,c,d){for(var f=a.createFeature(b),g=0;c.next();)switch(c.tag()){case 1:var p=d[g++].name;f.attributes[p]=e(c.getMessage());break;case 2:for(var p=a,h=b,k=c.getMessage(),n=p.createGeometry(h),h=2+(h.hasZ?1:0)+(h.hasM?1:0);k.next();)switch(k.tag()){case 2:for(var q=k.getUInt32(),q=k.pos()+q,l=0;k.pos()<q;)p.addLength(n,k.getUInt32(),l++);
break;case 3:for(var q=k.getUInt32(),q=k.pos()+q,t=l=0;k.pos()<q;)p.addCoordinate(n,k.getSInt64(),t,l),l++,l===h&&(t++,l=0);break;default:k.skip()}f.geometry=n;break;case 4:p=a;k=c.getMessage();for(n=p.createPointGeometry(b);k.next();)switch(k.tag()){case 3:h=k.getUInt32();h=k.pos()+h;for(q=0;k.pos()<h;)p.addCoordinatePoint(n,k.getSInt64(),0,q++);break;default:k.skip()}f.centroid=n;break;default:c.skip()}return f}Object.defineProperty(a,"__esModule",{value:!0});var b=f.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
c="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),q="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
p=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(a,c){c=c&&"dehydrated"===c.type?new g.Context(c):new k.Context(c);try{var e=new h(new Uint8Array(a),new DataView(a));for(a={};e.next();)switch(e.tag()){case 2:for(var f=a,q=c,t=e.getMessage(),m={};t.next();)switch(t.tag()){case 1:var u=q,E=t.getMessage(),B=u.createFeatureResult();B.geometryType=0>=u.geometryTypes.length?null:u.geometryTypes[0];for(var F=!1;E.next();)switch(E.tag()){case 1:B.objectIdFieldName=E.getString();break;case 3:B.globalIdFieldName=
E.getString();break;case 4:B.geohashFieldName=E.getString();break;case 5:for(var D=E.getMessage(),G={};D.next();)switch(D.tag()){case 1:G.shapeAreaFieldName=D.getString();break;case 2:G.shapeLengthFieldName=D.getString();break;case 3:G.units=D.getString();break;default:D.skip()}B.geometryProperties=G;break;case 7:var H=E.getEnum();B.geometryType=H>=u.geometryTypes.length?null:u.geometryTypes[H];break;case 8:for(var P=E.getMessage(),O=u.createSpatialReference();P.next();)switch(P.tag()){case 1:O.wkid=
P.getUInt32();break;case 5:O.wkt=P.getString();break;default:P.skip()}B.spatialReference=O;break;case 10:B.hasZ=E.getBool();break;case 11:B.hasM=E.getBool();break;case 12:for(var N=E.getMessage(),J={originPosition:0>=p.length?null:p[0]};N.next();)switch(N.tag()){case 1:var R=N.getEnum();J.originPosition=R>=p.length?null:p[R];break;case 2:for(var M=N.getMessage(),G=[0,0,0,0];M.next();)switch(M.tag()){case 1:G[0]=M.getDouble();break;case 2:G[1]=M.getDouble();break;case 4:G[2]=M.getDouble();break;case 3:G[3]=
M.getDouble();break;default:M.skip()}J.scale=G;break;case 3:for(var W=N.getMessage(),G=[0,0,0,0];W.next();)switch(W.tag()){case 1:G[0]=W.getDouble();break;case 2:G[1]=W.getDouble();break;case 4:G[2]=W.getDouble();break;case 3:G[3]=W.getDouble();break;default:W.skip()}J.translate=G;break;default:N.skip()}B.transform=J;break;case 9:var S=E.getBool();B.exceededTransferLimit=S;break;case 13:u.addField(B,n(E.getMessage()));break;case 15:F||(u.prepareFeatures(B),F=!0);u.addFeature(B,d(u,B,E.getMessage(),
B.fields));break;default:E.skip()}u.finishFeatureResult(B);m.featureResult=B;break;default:t.skip()}f.queryResult=m;break;default:e.skip()}return a}catch(L){return e=new l("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:L}),b.error(e),{queryResult:{featureResult:c.createFeatureResult()}}}}})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/support/Field".split(" "),
function(m,a,l,f,h,g){function k(a,b,c,d){return b}function e(a,b,d,e){switch(d){case 0:return c(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1]}}function n(a,b,d,e){switch(d){case 0:return c(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];case 2:return c(a,b,2)}}function d(a,b,d,e){switch(d){case 0:return c(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];case 2:return c(a,b,3)}}function b(a,b,d,e){switch(d){case 0:return c(a,b+e,0);case 1:return a.translate[1]-(b+e)*a.scale[1];
case 2:return c(a,b,3);case 3:return c(a,b,3)}}function c(a,b,c){return a.translate[c]+b*a.scale[c]}Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a){this.options=a;this.geometryTypes=["point","multipoint","polyline","polygon"];this.previousCoordinate=[0,0];this.transform=null;this.applyTransform=k;this.lengths=[];this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0}a.prototype.createFeatureResult=function(){return{exceededTransferLimit:!1,
features:[],fields:[],hasM:!1,hasZ:!1,geometryType:null,objectIdFieldName:null,globalIdFieldName:null,geometryProperties:null,geohashFieldName:null,spatialReference:null,transform:null}};a.prototype.finishFeatureResult=function(a){this.options.applyTransform&&(a.transform=null)};a.prototype.createSpatialReference=function(){return new h};a.prototype.addField=function(a,b){a.fields.push(g.fromJSON(b))};a.prototype.addFeature=function(a,b){var c=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:
0;if(0<c)for(var d in b.attributes){var e=b.attributes[d];"string"===typeof e&&e.length>c&&delete b.attributes[d]}a.features.push(b)};a.prototype.prepareFeatures=function(a){this.options.applyTransform&&a.transform&&(this.transform=a.transform,this.applyTransform=this.deriveApplyTransform(a));this.vertexDimension=2;a.hasZ&&this.vertexDimension++;a.hasM&&this.vertexDimension++;switch(a.geometryType){case "point":this.addCoordinate=this.addCoordinatePoint.bind(this);this.createGeometry=this.createPointGeometry.bind(this);
break;case "polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this);this.createGeometry=this.createPolygonGeometry.bind(this);break;case "polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this);this.createGeometry=this.createPolylineGeometry.bind(this);break;case "multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this);this.createGeometry=this.createMultipointGeometry.bind(this);break;default:f.neverReached(a.geometryType)}};a.prototype.createFeature=function(a){this.currentLengthIndex=
this.lengths.length=0;this.previousCoordinate[0]=0;this.previousCoordinate[1]=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;return{uid:l.generateUID(),objectId:null,attributes:{},geometry:null,visible:!0}};a.prototype.addLength=function(a,b,c){0===this.lengths.length&&(this.toAddInCurrentPath=b);this.lengths.push(b)};a.prototype.createPointGeometry=function(a){a={type:"point",x:0,y:0,spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM};a.hasZ&&(a.z=0);a.hasM&&(a.m=0);return a};
a.prototype.addCoordinatePoint=function(a,b,c,d){b=this.applyTransform(this.transform,b,d,0);switch(d){case 0:a.x=b;break;case 1:a.y=b;break;case 2:a.hasZ?a.z=b:a.m=b;break;case 3:a.m=b}};a.prototype.transformPathLikeValue=function(a,b){var c=0;1>=b&&(c=this.previousCoordinate[b],this.previousCoordinate[b]+=a);return this.applyTransform(this.transform,a,b,c)};a.prototype.addCoordinatePolyline=function(a,b,c,d){this.dehydratedAddPointsCoordinate(a.paths,b,c,d)};a.prototype.addCoordinatePolygon=function(a,
b,c,d){this.dehydratedAddPointsCoordinate(a.rings,b,c,d)};a.prototype.addCoordinateMultipoint=function(a,b,c){0===c&&a.points.push([]);b=this.transformPathLikeValue(b,c);a.points[a.points.length-1].push(b)};a.prototype.createPolygonGeometry=function(a){return{type:"polygon",rings:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createPolylineGeometry=function(a){return{type:"polyline",paths:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createMultipointGeometry=
function(a){return{type:"multipoint",points:[],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.dehydratedAddPointsCoordinate=function(a,b,c,d){null===this.coordinateBuffer&&(c=this.lengths.reduce(function(a,b){return a+b},0),this.coordinateBuffer=new Float64Array(c*this.vertexDimension));0===d&&0===this.toAddInCurrentPath--&&(a.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);b=this.transformPathLikeValue(b,
d);a=a[a.length-1];0===d&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension));this.coordinateBuffer[this.coordinateBufferPtr++]=b};a.prototype.deriveApplyTransform=function(a){var c=a.hasZ;a=a.hasM;return c&&a?b:c?n:a?d:e};return a}();a.Context=m})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){m=function(a){function n(b,c,d,e){b=a.call(this,b,c,d,e)||this;b.layer=null;b.popupTemplate=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:t.generateUID()});return b}f(n,a);t=n;n.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(n.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",
b,a))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"visible",{set:function(a){var b=this._get("visible");b!==
a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});n.prototype.getEffectivePopupTemplate=function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:this.sourceLayer?this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:a&&b.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null};n.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};n.prototype.setAttribute=function(a,
b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a))};n.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:l({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};n.prototype.clone=function(){return new t({attributes:d.clone(this.attributes),geometry:this.geometry&&
this.geometry.clone()||null,layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};n.prototype._notifyLayer=function(a,b,c,d){this.layer&&this.layer.graphicChanged&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=d),this.layer.graphicChanged(b))};var t;h([c.property({value:null})],n.prototype,"attributes",null);h([c.property({value:null,types:g.geometryTypes,
json:{read:q.fromJSON}})],n.prototype,"geometry",null);h([c.property()],n.prototype,"layer",void 0);h([c.property({type:k})],n.prototype,"popupTemplate",void 0);h([c.property()],n.prototype,"sourceLayer",void 0);h([c.property({value:null,types:e.symbolTypes,json:{read:p.read}})],n.prototype,"symbol",null);h([c.property({type:Boolean,value:!0,set:function(a){}})],n.prototype,"visible",null);return n=t=h([c.subclass("esri.Graphic")],n)}(c.declared(n));var t=0;(function(a){a.generateUID=function(){return t++}})(m||
(m={}));return m})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/tsSupport/generatorHelper ./core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F,D,G,H,P,O,N){var J=d.ofType({key:"type",defaultKeyValue:"button",base:P,typeMap:{button:O,toggle:N}}),R={base:B,key:"type",typeMap:{media:D,text:G,attachments:E,fields:F}},M=q.getLogger("esri.PopupTemplate");return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.lastEditInfoEnabled=!0;b.outFields=null;b.overwriteActions=!1;b.title=
"";b.relatedRecordsInfo=null;return b}f(b,a);l=b;b.prototype.castContent=function(a){if(Array.isArray(a))return a.map(function(a){return u.ensureOneOfType(R,a)});if("string"===typeof a||"function"===typeof a||a instanceof HTMLElement||p.isThenable(a))return a;M.error("content error","unsupported content value",{value:a});return null};b.prototype.readContent=function(a,b){var c=b.description,d=b.mediaInfos;a=b.popupElements;b=b.showAttachments;if(Array.isArray(a)&&0<a.length)return a.map(function(a){if("media"===
a.type)return!a.mediaInfos&&d&&(a.mediaInfos=d),D.fromJSON(a);if("text"===a.type)return!a.text&&c&&(a.text=c),G.fromJSON(a);if("attachments"===a.type)return E.fromJSON(a);if("fields"===a.type)return F.fromJSON(a)}).filter(Boolean);a=[];c?a.push(new G({text:c})):a.push(new F);Array.isArray(d)&&d.length&&a.push(D.fromJSON({mediaInfos:d}));b&&a.push(E.fromJSON({displayType:"list"}));return a.length?a:c};b.prototype.writeContent=function(a,b){b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&
(b.popupElements=a.map(function(a){return a&&a.toJSON()}),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description||(a.text&&(b.description=a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=c.clone(a.mediaInfos)),delete a.mediaInfos):b.showAttachments=!0}))};b.prototype.writeLayerOptions=function(a,b){b.layerOptions=a&&null!==a.showNoDataRecords?a.toJSON():null};b.prototype.writeTitle=function(a,b){b.title=a||""};
b.prototype.clone=function(){var a=this.actions,a=a?c.clone(a.toArray()):[];return new l({actions:a,content:Array.isArray(this.content)?c.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?c.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?c.clone(this.fieldInfos):null,layerOptions:this.layerOptions?c.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?c.clone(this.outFields):
null,overwriteActions:this.overwriteActions,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?c.clone(this.relatedRecordsInfo):null})};b.prototype.collectRequiredFields=function(a,b){return k(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this._collectExpressionInfoFields(a,b,this.expressionInfos)];case 1:return c.sent(),w.collectFields(a,b,(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content))),
[2]}})})};b.prototype.getRequiredFields=function(a){return k(this,void 0,void 0,function(){var b;return g(this,function(c){switch(c.label){case 0:return b=new n.default,[4,this.collectRequiredFields(b,a)];case 1:return c.sent(),[2,e.from(b).sort()]}})})};b.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,
c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};b.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,f=c.tooltipField,g=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(g),this._extractFieldNames(c),e);d&&a.push(d);f&&a.push(f);return a};b.prototype._getContentFields=function(a){var b=this;return"string"===
typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};b.prototype._collectExpressionInfoFields=function(a,b,c){return k(this,void 0,void 0,function(){return g(this,function(d){switch(d.label){case 0:return c?[4,p.all(c.map(function(c){return w.collectArcadeFieldNames(a,b,c.expression)}))]:[2];case 1:return d.sent(),[2]}})})};b.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?
!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};b.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};b.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};
b.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):[]};b.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var l;h([t.property({type:J})],b.prototype,"actions",void 0);h([t.property()],
b.prototype,"content",void 0);h([t.cast("content")],b.prototype,"castContent",null);h([t.reader("content",["description","popupElements","mediaInfos","showAttachments"])],b.prototype,"readContent",null);h([t.writer("content",{popupElements:{type:d.ofType(A.types)},showAttachments:{type:Boolean},mediaInfos:{type:d.ofType(H.types)},description:{type:String}})],b.prototype,"writeContent",null);h([t.property({type:[C],json:{write:!0}})],b.prototype,"expressionInfos",void 0);h([t.property({type:[z],json:{write:!0}})],
b.prototype,"fieldInfos",void 0);h([t.property({type:y})],b.prototype,"layerOptions",void 0);h([t.writer("layerOptions")],b.prototype,"writeLayerOptions",null);h([t.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],b.prototype,"lastEditInfoEnabled",void 0);h([t.property()],b.prototype,"outFields",void 0);h([t.property()],b.prototype,"overwriteActions",void 0);h([t.property({json:{type:String}})],b.prototype,"title",void 0);h([t.writer("title")],
b.prototype,"writeTitle",null);h([t.property({type:x,json:{write:!0}})],b.prototype,"relatedRecordsInfo",void 0);return b=l=h([t.subclass("esri.PopupTemplate")],b)}(t.declared(b))})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c){function q(a){return a?a.isInstanceOf&&
a.isInstanceOf(B):!1}function p(a){return a?q(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function t(a){if(a&&a.length)return a[0]}function u(a,b,c,d){b&&b.forEach(function(b,e,f){a.push(b);u(a,c.call(d,b,e,f),c,d)})}m=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var w=function(){},
A=new n(m,!0,function(a){a.item=null;a.target=null}),C=new Set,z=new Set,y=new Set,x=new Map,E=0,B=function(a){function h(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:E++});return b}l(h,a);k=h;h.ofType=function(a){if(!a)return k;if(x.has(a))return x.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;
else for(var d in a.typeMap){var e=a.typeMap[d].prototype.declaredClass;b=b?b+(" | "+e):e}b=k.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});b.isCollection=q;d={Type:a,ensureType:"function"===typeof a?c.ensureType(a):c.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:d});x.set(a,b);return b};h.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||q(a)?{items:a}:a:{}};Object.defineProperty(h.prototype,"items",{get:function(){return this._items},
set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(p(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});h.prototype.on=function(a,b){if("change"===a){var c=this._chgListeners,d={removed:!1,callback:b};c.push(d);this._notifications&&this._notifications.push({listeners:c.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=w;d.removed=!0;c.splice(c.indexOf(d),1)}}}return this._emitter.on(a,b)};h.prototype.hasEventListener=
function(a){return"change"===a?0<this._chgListeners.length:this._emitter.hasEventListener(a)};h.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};h.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(p(a)));this._emitAfterChanges();return this};h.prototype.removeAll=function(){if(!this.length||
this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};h.prototype.clone=function(){return this._createNewInstance({items:this._items.map(e.clone)})};h.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(p);return this._createNewInstance({items:(c=this._items).concat.apply(c,a)})};h.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,
e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};h.prototype.every=function(a,b){return this._items.every(a,b)};h.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};h.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return f}};h.prototype.findIndex=function(a,b){if("function"!==
typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1};h.prototype.flatten=function(a,b){var c=[];u(c,this,a,b);return new k(c)};h.prototype.forEach=function(a,b){return this._items.forEach(a,b)};h.prototype.getItemAt=function(a){return this._items[a]};h.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};h.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?
-1!==this._items.indexOf(a,b):!1};h.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};h.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};h.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};h.prototype.map=function(a,b){a=this._items.map(a,b);return new k({items:a})};h.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=
this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};h.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=t(this._splice(this.length-1,1));this._emitAfterChanges();return a}};h.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};
h.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};h.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};h.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};h.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=t(this._splice(a,1)),this._emitAfterChanges(),a};h.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];
a=q(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var f=b.indexOf(a[e]);if(-1<f){for(var g=e+1,h=f+1,p=Math.min(a.length-g,b.length-h),k=0;k<p&&a[g+k]===b[h+k];)k++;g=1+k;(f=this._splice(f,g))&&0<f.length&&c.push.apply(c,f);e+=g-1}}this._emitAfterChanges();return c};h.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};h.prototype.shift=
function(){if(this.length&&!this._emitBeforeChanges()){var a=t(this._splice(0,1));this._emitAfterChanges();return a}};h.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};h.prototype.some=function(a,b){return this._items.some(a,b)};h.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,
0].concat(b));return this};h.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};h.prototype.toArray=function(){return this._items.slice()};h.prototype.toJSON=function(){return this.toArray()};h.prototype.toLocaleString=function(){return this._items.toLocaleString()};h.prototype.toString=function(){return this._items.toString()};h.prototype.unshift=
function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};h.prototype._createNewInstance=function(a){return new this.constructor(a)};h.prototype._splice=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];var e=this._items,f=this.constructor.prototype.itemType,g,h;!this._notifications&&this.hasEventListener("change")&&(this._notifications=
[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=d.schedule(this._boundDispatch));if(b){h=e.splice(a,b);if(this.hasEventListener("before-remove")){var p=A.acquire();p.target=this;p.cancellable=!0;for(var k=0,n=h.length;k<n;k++)g=h[k],p.reset(g),this.emit("before-remove",p),p.defaultPrevented&&(h.splice(k,1),e.splice(a,0,g),a+=1,--k,--n);A.release(p)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=
A.acquire();g.target=this;g.cancellable=!1;n=h.length;for(k=0;k<n;k++)g.reset(h[k]),this.emit("after-remove",g);A.release(g)}}if(c&&c.length){if(f){k=[];for(n=0;n<c.length;n++)g=c[n],p=f.ensureType(g),null==p&&null!=g||k.push(p);c=k}f=this.hasEventListener("before-add");k=this.hasEventListener("after-add");n=a===this.length;if(f||k){g=A.acquire();g.target=this;g.cancellable=!0;p=A.acquire();p.target=this;p.cancellable=!1;for(var l=0,q=c;l<q.length;l++){var t=q[l];f?(g.reset(t),this.emit("before-add",
g),g.defaultPrevented||(n?e.push(t):e.splice(a++,0,t),this._set("length",e.length),k&&(p.reset(t),this.emit("after-add",p)))):(n?e.push(t):e.splice(a++,0,t),this._set("length",e.length),p.reset(t),this.emit("after-add",p))}A.release(p);A.release(g)}else n?e.push.apply(e,c):e.splice.apply(e,[a,0].concat(c)),this._set("length",e.length)}(c&&c.length||h&&h.length)&&this._notifyChangeEvent(c,h);return h};h.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=
A.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;A.release(b)}return a};h.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=A.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);A.release(a)}};h.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};h.prototype._dispatchColChange=function(){this._timer&&
(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;C.clear();z.clear();y.clear();for(var d=0;d<b.length;d++){var e=b[d],f=e.added,e=e.removed;if(f)if(0===y.size&&0===z.size)for(var h=0,p=f;h<p.length;h++)f=p[h],C.add(f);else for(h=0,p=f;h<p.length;h++)f=p[h],z.has(f)?(y.add(f),z.delete(f)):y.has(f)||C.add(f);if(e)if(0===y.size&&0===C.size)for(h=0;h<e.length;h++)f=e[h],z.add(f);else for(h=0;h<e.length;h++)f=
e[h],C.has(f)?C.delete(f):(y.delete(f),z.add(f))}var k=g.acquire();C.forEach(function(a){k.push(a)});var n=g.acquire();z.forEach(function(a){n.push(a)});var l=c._items,q=a.items,t=g.acquire();y.forEach(function(a){q.indexOf(a)!==l.indexOf(a)&&t.push(a)});if(a.listeners&&(k.length||n.length||t.length))for(b={target:c,added:k,removed:n,moved:t},d=a.listeners.length,f=0;f<d;f++)e=a.listeners[f],e.removed||e.callback.call(c,b);g.release(k);g.release(n);g.release(t)},c=this,d=0;d<a.length;d++)b(a[d]);
C.clear();z.clear();y.clear()}};var k;h.isCollection=q;f([b.property()],h.prototype,"length",void 0);f([b.property()],h.prototype,"items",null);return h=k=f([b.subclass("esri.core.Collection")],h)}(b.declared(h,k));return B})},"esri/popup/content":function(){define("require exports ./content/AttachmentsContent ./content/Content ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});a.AttachmentsContent=
l;a.BaseContent=f;a.FieldsContent=h;a.MediaContent=g;a.TextContent=k;a.isContent=function(e){return e instanceof a.BaseContent};a.types={base:null,key:"type",typeMap:{attachment:a.AttachmentsContent,fields:a.FieldsContent,media:a.MediaContent,text:a.TextContent}}})},"esri/popup/content/AttachmentsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./Content".split(" "),
function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.attachmentInfos=null;b.displayType=null;b.type="attachments";return b}l(d,a);b=d;d.prototype.clone=function(){return new b({displayType:this.displayType,attachmentInfos:this.attachmentInfos?h.clone(this.attachmentInfos):null})};var b;f([g.property({type:[k]})],d.prototype,"attachmentInfos",void 0);f([g.property({type:String,json:{write:!0}})],d.prototype,"displayType",void 0);f([g.property({type:String,readOnly:!0,json:{read:!1,
write:!0}})],d.prototype,"type",void 0);return d=b=f([g.subclass("esri.popup.content.AttachmentsContent")],d)}(g.declared(e))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.contentType=null;b.exifInfo=null;
b.id=null;b.keywords=null;b.name=null;b.parentObjectId=null;b.size=null;b.url=null;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,keywords:this.keywords,name:this.name,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var d;f([g.property({type:String})],e.prototype,"contentType",void 0);f([g.property()],e.prototype,"exifInfo",void 0);f([g.property({type:k.Integer})],e.prototype,"id",void 0);f([g.property({type:String})],
e.prototype,"keywords",void 0);f([g.property({type:String})],e.prototype,"name",void 0);f([g.property({json:{read:!1}})],e.prototype,"parentObjectId",void 0);f([g.property({type:k.Integer})],e.prototype,"size",void 0);f([g.property({json:{read:!1}})],e.prototype,"url",void 0);return e=d=f([g.subclass("esri.layers.support.AttachmentInfo")],e)}(g.declared(h))})},"esri/popup/content/Content":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g){return function(a){function e(e){e=a.call(this)||this;e.type=null;return e}l(e,a);f([g.property({type:["attachments","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=f([g.subclass("esri.popup.content.Content")],e)}(g.declared(h))})},"esri/popup/content/FieldsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../FieldInfo ./Content".split(" "),
function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.fieldInfos=null;b.type="fields";return b}l(d,a);b=d;d.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a&&a.map(function(a){return a.toJSON()})};d.prototype.clone=function(){return new b({fieldInfos:Array.isArray(this.fieldInfos)?h.clone(this.fieldInfos):null})};var b;f([g.property({type:[k]})],d.prototype,"fieldInfos",void 0);f([g.writer("fieldInfos")],d.prototype,"writeFieldInfos",null);f([g.property({type:String,
readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);return d=b=f([g.subclass("esri.popup.content.FieldsContent")],d)}(g.declared(e))})},"esri/popup/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./support/FieldInfoFormat".split(" "),function(m,a,l,f,h,g,k,e,n){var d=new g.default({richtext:"rich-text",textarea:"text-area",
textbox:"text-box"});return function(a){function b(b){b=a.call(this)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}l(b,a);g=b;b.prototype.writeStringFieldOption=function(a,b){b.stringFieldOption=d.toJSON(a)};b.prototype.readStringFieldOption=function(a){if(a)return d.fromJSON(a)};b.prototype.clone=function(){return new g({fieldName:this.fieldName,format:this.format?k.clone(this.format):null,
isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})};var g;f([e.property({type:String,json:{write:!0}})],b.prototype,"fieldName",void 0);f([e.property({type:n,json:{write:!0}})],b.prototype,"format",void 0);f([e.property({type:Boolean,json:{write:!0,default:!1}})],b.prototype,"isEditable",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([e.property({type:d.apiValues,
json:{write:!0,default:"text-box",type:d.jsonValues}})],b.prototype,"stringFieldOption",void 0);f([e.writer("stringFieldOption")],b.prototype,"writeStringFieldOption",null);f([e.reader("stringFieldOption")],b.prototype,"readStringFieldOption",null);f([e.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],b.prototype,"statisticType",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"tooltip",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,
"visible",void 0);return b=g=f([e.subclass("esri.popup.FieldInfo")],b)}(e.declared(h))})},"esri/popup/support/FieldInfoFormat":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.dateFormat=null;b.digitSeparator=!1;b.places=null;return b}
l(d,a);b=d;d.prototype.clone=function(){return new b({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};var b;f([k.enumeration.serializable()(h.dictionary)],d.prototype,"dateFormat",void 0);f([k.property({type:Boolean,json:{write:!0}})],d.prototype,"digitSeparator",void 0);f([k.property({type:e.Integer,json:{write:!0}})],d.prototype,"places",void 0);return d=b=f([k.subclass("esri.popup.support.FieldInfoFormat")],d)}(k.declared(g))})},"esri/core/date":function(){define(["require",
"exports","./kebabDictionary"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.formats={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')",
"long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')",
"day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')","day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"};a.dictionary=l.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",
longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",
longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);a.getFormat=function(f){return a.formats[f]}})},"esri/popup/content/MediaContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q){return function(a){function p(b){b=a.call(this)||this;b.mediaInfos=null;b.type="media";return b}l(p,a);n=p;p.prototype.readMediaInfos=function(a){return a&&a.map(function(a){if("image"===a.type)return d.fromJSON(a);if("barchart"===a.type)return k.fromJSON(a);if("columnchart"===a.type)return e.fromJSON(a);if("linechart"===a.type)return b.fromJSON(a);if("piechart"===a.type)return c.fromJSON(a)}).filter(Boolean)};p.prototype.writeMediaInfos=function(a,b){b.mediaInfos=
a&&a.map(function(a){return a.toJSON()})};p.prototype.clone=function(){return new n({mediaInfos:this.mediaInfos?h.clone(this.mediaInfos):null})};var n;f([g.property({types:[q.types]})],p.prototype,"mediaInfos",void 0);f([g.reader("mediaInfos")],p.prototype,"readMediaInfos",null);f([g.writer("mediaInfos")],p.prototype,"writeMediaInfos",null);f([g.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=n=f([g.subclass("esri.popup.content.MediaContent")],p)}(g.declared(n))})},
"esri/popup/content/BarChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.type="bar-chart";return b}l(e,a);d=e;e.prototype.clone=function(){return new d({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var d;
f([h.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:k.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=d=f([h.subclass("esri.popup.content.BarChartMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(d){d=
a.call(this)||this;d.type=null;d.value=null;return d}l(e,a);f([h.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);f([h.property({type:k,json:{write:!0}})],e.prototype,"value",void 0);return e=f([h.subclass("esri.popup.content.mixins.ChartMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/mixins/MediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g){return function(a){function e(e){e=a.call(this)||this;e.caption="";e.title="";e.type=null;return e}l(e,a);f([g.property({type:String,json:{write:!0}})],e.prototype,"caption",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"title",void 0);f([g.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=f([g.subclass("esri.popup.content.mixins.MediaInfo")],e)}(g.declared(h))})},
"esri/popup/content/support/ChartMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ./ChartMediaInfoValueSeries".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.fields=[];b.normalizeField=null;b.series=[];b.tooltipField=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({fields:g.clone(this.fields),
normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var b;f([k.property({type:[String],json:{write:!0}})],d.prototype,"fields",void 0);f([k.property({type:String,json:{write:!0}})],d.prototype,"normalizeField",void 0);f([k.property({type:[e],json:{read:!1}})],d.prototype,"series",void 0);f([k.property({type:String,json:{write:!0}})],d.prototype,"tooltipField",void 0);return d=b=f([k.subclass("esri.popup.content.support.ChartMediaInfoValue")],d)}(k.declared(h))})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.tooltip=null;d.x=null;d.y=null;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({tooltip:this.tooltip,x:this.x,y:this.y})};var h;f([g.property()],e.prototype,"tooltip",void 0);f([g.property()],e.prototype,"x",void 0);f([g.property()],e.prototype,"y",void 0);return e=h=f([g.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],e)}(g.declared(h))})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["require",
"exports","../../../core/kebabDictionary"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.chartTypeKebabDict=l.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(m,
a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.type="column-chart";return b}l(e,a);d=e;e.prototype.clone=function(){return new d({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var d;f([h.property({type:["column-chart"],readOnly:!0,json:{read:!1,write:k.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=d=f([h.subclass("esri.popup.content.ColumnChartMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/ImageMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.refreshInterval=null;b.type="image";b.value=null;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var d;f([h.property({type:Number,json:{write:!0}})],e.prototype,"refreshInterval",void 0);f([h.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);f([h.property({type:k,
json:{write:!0}})],e.prototype,"value",void 0);return e=d=f([h.subclass("esri.popup.content.ImageMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.linkURL=null;d.sourceURL=null;return d}l(e,a);
h=e;e.prototype.clone=function(){return new h({linkURL:this.linkURL,sourceURL:this.sourceURL})};var h;f([g.property({type:String,json:{write:!0}})],e.prototype,"linkURL",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"sourceURL",void 0);return e=h=f([g.subclass("esri.popup.content.support.ImageMediaInfoValue")],e)}(g.declared(h))})},"esri/popup/content/LineChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.type="line-chart";return b}l(e,a);d=e;e.prototype.clone=function(){return new d({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var d;f([h.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:k.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=d=f([h.subclass("esri.popup.content.LineChartMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/PieChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.type="pie-chart";return b}l(e,a);d=e;e.prototype.clone=function(){return new d({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var d;f([h.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:k.chartTypeKebabDict.write}})],e.prototype,"type",void 0);return e=d=f([h.subclass("esri.popup.content.PieChartMediaInfo")],e)}(h.declared(g))})},"esri/popup/content/support/mediaInfoTypes":function(){define("require exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),
function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:e,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":l,"column-chart":f,"line-chart":g,"pie-chart":k,image:h}};a.default=a.types})},"esri/popup/content/TextContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Content".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||
this;d.text=null;d.type="text";return d}l(e,a);g=e;e.prototype.clone=function(){return new g({text:this.text})};var g;f([h.property({type:String,json:{write:!0}})],e.prototype,"text",void 0);f([h.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=g=f([h.subclass("esri.popup.content.TextContent")],e)}(h.declared(g))})},"esri/popup/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.name=null;d.title=null;d.expression=null;d.returnType=null;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var h;f([g.property({type:String,json:{write:!0}})],e.prototype,"name",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"title",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"expression",
void 0);f([g.property({type:["string","number"],json:{write:!0}})],e.prototype,"returnType",void 0);return e=h=f([g.subclass("esri.popup.ExpressionInfo")],e)}(g.declared(h))})},"esri/popup/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.showNoDataRecords=null;return d}l(e,a);h=e;e.prototype.clone=
function(){return new h({showNoDataRecords:this.showNoDataRecords})};var h;f([g.property({type:Boolean,json:{write:!0}})],e.prototype,"showNoDataRecords",void 0);return e=h=f([g.subclass("esri.popup.LayerOptions")],e)}(g.declared(h))})},"esri/popup/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/RelatedRecordsInfoFieldOrder".split(" "),function(m,
a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.showRelatedRecords=null;b.orderByFields=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?g.clone(this.orderByFields):null})};var b;f([k.property({type:Boolean,json:{write:!0}})],d.prototype,"showRelatedRecords",void 0);f([k.property({type:[e],json:{write:!0}})],d.prototype,"orderByFields",void 0);return d=b=f([k.subclass("esri.popup.RelatedRecordsInfo")],
d)}(k.declared(h))})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.field=null;d.order=null;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({field:this.field,order:this.order})};var h;f([g.property({type:String,json:{write:!0}})],
e.prototype,"field",void 0);f([g.property({type:["asc","desc"],json:{write:!0}})],e.prototype,"order",void 0);return e=h=f([g.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],e)}(g.declared(h))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=
a.call(this)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var d;f([k.property()],e.prototype,"active",void 0);f([k.property()],e.prototype,"className",void 0);f([k.property()],e.prototype,"disabled",void 0);f([k.property()],e.prototype,
"id",void 0);f([k.property()],e.prototype,"indicator",void 0);f([k.property()],e.prototype,"title",void 0);f([k.property()],e.prototype,"type",void 0);f([k.property()],e.prototype,"visible",void 0);return e=d=f([k.subclass("esri.support.actions.ActionBase")],e)}(k.declared(h,g.Identifiable))})},"esri/core/Identifiable":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});var l=0;m=function(){return function(){Object.defineProperty(this,"uid",{writable:!1,
configurable:!1,value:Date.now().toString(16)+"-object-"+l++})}}();a.Identifiable=m})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.image=null;d.type="button";return d}l(e,a);g=e;e.prototype.clone=function(){return new g({active:this.active,className:this.className,
disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var g;f([h.property()],e.prototype,"image",void 0);return e=g=f([h.subclass("esri.support.Action.ActionButton")],e)}(h.declared(g))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=
a.call(this)||this;d.image=null;d.type="toggle";d.value=!1;return d}l(e,a);g=e;e.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var g;f([h.property()],e.prototype,"image",void 0);f([h.property()],e.prototype,"value",void 0);return e=g=f([h.subclass("esri.support.Action.ActionToggle")],e)}(h.declared(g))})},"esri/symbols":function(){define("require exports ./core/accessorSupport/ensureType ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F,D,G,H,P,O,N,J,R){Object.defineProperty(a,"__esModule",{value:!0});a.CIMSymbol=f;a.ExtrudeSymbol3DLayer=h;a.BaseFillSymbol=g;a.FillSymbol3DLayer=k;a.Font=e;a.IconSymbol3DLayer=n;a.LabelSymbol3D=d;a.LineSymbol3D=b;a.LineSymbol3DLayer=c;a.BaseMarkerSymbol=q;a.MeshSymbol3D=p;a.ObjectSymbol3DLayer=t;a.PathSymbol3DLayer=u;a.PictureFillSymbol=w;a.PictureMarkerSymbol=A;a.PointSymbol3D=C;a.PolygonSymbol3D=z;a.SimpleFillSymbol=y;a.SimpleLineSymbol=
x;a.SimpleMarkerSymbol=E;a.BaseSymbol=B;a.BaseSymbol3D=F;a.BaseSymbol3DLayer=D;a.TextSymbol=G;a.TextSymbol3DLayer=H;a.WebStyleSymbol=P;a.LineCallout3D=O;a.LineCallout3DBorder=N;a.Symbol3DVerticalOffset=J.Symbol3DVerticalOffset;a.fromJSON=R.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;default:return!1}};
a.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};a.symbolTypes={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,
"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};a.symbolTypesRenderer={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};a.symbolTypesLabel=
{base:a.BaseSymbol,key:"type",typeMap:{text:a.TextSymbol,"label-3d":a.LabelSymbol3D}};a.symbolTypes3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};a.symbolTypesRenderer3D={base:a.BaseSymbol,key:"type",typeMap:{"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};
a.symbolTypesLabel3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D}};a.ensureType=l.ensureOneOfType(a.symbolTypes)})},"esri/symbols/CIMSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../portal/Portal ./Symbol".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this,b)||this;b.data=null;b.portal=null;b.styleName="";b.styleUrl="";b.type="cim";return b}l(e,
a);d=e;e.prototype.readData=function(a,c){return c.data?c.data:c};e.prototype.clone=function(){return new d({color:this.color,data:this.data,portal:this.portal,styleName:this.styleName,styleUrl:this.styleUrl})};var d;f([h.property({json:{write:!1}})],e.prototype,"color",void 0);f([h.property({json:{write:!0}})],e.prototype,"data",void 0);f([h.reader("data",["data","symbol"])],e.prototype,"readData",null);f([h.property({type:g,json:{write:!1}})],e.prototype,"portal",void 0);f([h.property({type:String,
json:{write:!0}})],e.prototype,"styleName",void 0);f([h.property({type:String,json:{write:!0}})],e.prototype,"styleUrl",void 0);f([h.property({type:String,readOnly:!0})],e.prototype,"type",void 0);return e=d=f([h.subclass("esri.symbols.CIMSymbol")],e)}(h.declared(k))})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z){var y,x={Bookmark:function(){return t.create(function(a){return m(["./Bookmark"],a)})},Portal:function(){return t.create(function(a){return m(["./Portal"],a)})},PortalFolder:function(){return t.create(function(a){return m(["./PortalFolder"],a)})},PortalGroup:function(){return t.create(function(a){return m(["./PortalGroup"],a)})},PortalItem:function(){return t.create(function(a){return m(["./PortalItem"],a)})},PortalQueryParams:function(){return t.create(function(a){return m(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return t.create(function(a){return m(["./PortalQueryResult"],a)})},PortalRating:function(){return t.create(function(a){return m(["./PortalRating"],a)})},PortalUser:function(){return t.create(function(a){return m(["./PortalUser"],a)})}};return function(a){function c(b){b=a.call(this)||this;b.access=null;b.allSSL=!1;b.authMode="auto";b.authorizedCrossOriginDomains=null;b.basemapGalleryGroupQuery=null;b.bingKey=null;b.canListApps=!1;b.canListData=!1;b.canListPreProvisionedItems=
!1;b.canProvisionDirectPurchase=!1;b.canSearchPublic=!0;b.canShareBingPublic=!1;b.canSharePublic=!1;b.canSignInArcGIS=!1;b.canSignInIDP=!1;b.colorSetsGroupQuery=null;b.commentsEnabled=!1;b.created=null;b.culture=null;b.customBaseUrl=null;b.defaultBasemap=null;b.defaultExtent=null;b.defaultVectorBasemap=null;b.description=null;b.eueiEnabled=!1;b.featuredGroups=null;b.featuredItemsGroupQuery=null;b.galleryTemplatesGroupQuery=null;b.livingAtlasGroupQuery=null;b.hasCategorySchema=!1;b.helperServices=
null;b.homePageFeaturedContent=null;b.homePageFeaturedContentCount=null;b.httpPort=null;b.httpsPort=null;b.id=null;b.ipCntryCode=null;b.isPortal=!1;b.layerTemplatesGroupQuery=null;b.maxTokenExpirationMinutes=null;b.modified=null;b.name=null;b.portalHostname=null;b.portalMode=null;b.portalProperties=null;b.region=null;b.rotatorPanels=null;b.showHomePageDescription=!1;b.supportsHostedServices=!1;b.symbolSetsGroupQuery=null;b.templatesGroupQuery=null;b.units=null;b.url=e.portalUrl;b.urlKey=null;b.user=
null;b.useStandardizedQuery=!1;b.useVectorBasemaps=!1;b.vectorBasemapGalleryGroupQuery=null;return b}f(c,a);p=c;c.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};c.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};c.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];-1===e.request.trustedServers.indexOf(c)&&e.request.trustedServers.push(c)}return a};
c.prototype.readDefaultBasemap=function(a){return a?(a=y.fromJSON(a),a.portalItem={portal:this},a):null};c.prototype.readDefaultVectorBasemap=function(a){return a?(a=y.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(c.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isOrganization",{get:function(){return!!this.access},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});c.prototype.readUrlKey=function(a){return a?a.toLowerCase():
a};c.prototype.readUser=function(a){var b=null;a&&(b=z.fromJSON(a),b.portal=this);return b};c.prototype.load=function(){var a=this,b=t.create(function(a){return m(["../Basemap"],a)}).then(function(a){y=a}).then(function(){return a._fetchSelf()}).then(function(b){if(n.id){var c=n.id;a.credential=c.findCredential(a.restUrl);a.credential||a.authMode!==p.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(a.restUrl)&&a._signIn()}))}a.read(b)});this.addResolvingPromise(b);
return this.when()};c.prototype.fetchBasemaps=function(a){var b=new A;b.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);b.disableExtraQuery=!0;return this.queryGroups(b).then(function(a){b.num=100;b.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],b.sortField=a.sortField||"name",b.sortOrder=a.sortOrder||"desc",a.queryItems(b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new y({portalItem:a})}):
[]})};c.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):t.resolve([])};c.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new A;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push('(title:"'+e.title+'" AND owner:'+e.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return t.resolve([])};
c.prototype.fetchRegions=function(){return this._request(this.restUrl+"/portals/regions",{query:{culture:this.user&&this.user.culture||this.culture||k.locale}})};c.getDefault=function(){p._default||(p._default=new p);return p._default};c.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};c.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};c.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",
a,"PortalUser")};c.prototype.toJSON=function(){throw new b("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};c.prototype._fetchSelf=function(a,b){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var c=this.restUrl+"/portals/self";a={authMode:a,query:{culture:k.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(c,a)};c.prototype._queryPortal=function(a,b,c){var d=this,e=function(c){return d._request(d.restUrl+a,b.toRequestOptions(d)).then(function(a){var e=
b.clone();e.start=a.nextStart;return new C({nextQueryParams:e,queryParams:b,total:a.total,results:p._resultsToTypedArray(c,{portal:d},a)})}).then(function(a){return t.all(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return a},function(){return a})})};return c&&x[c]?x[c]().then(function(a){return e(a)}):e()};c.prototype._signIn=function(){var a=this;if(this.authMode===p.AUTH_MODE_ANONYMOUS)return t.reject(new b("portal:invalid-auth-mode",'Current "authMode"\' is "'+
this.authMode+'"'));if("failed"===this.loadStatus)return t.reject(this.loadError);var c=function(b){return t.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};
return n.id?n.id.getCredential(this.restUrl).then(function(a){return c(a)}):c(this.credential)};c.prototype._normalizeSSL=function(a){return a.replace(/^http:/i,"https:").replace(":7080",":7443")};c.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};c.prototype._requestToTypedArray=function(a,b,c){var d=this,e=function(c){return d._request(a,b).then(function(a){var b=p._resultsToTypedArray(c,
{portal:d},a);return t.all(b.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return b},function(){return b})})};return c?t.create(function(a){return m(["./"+c],a)}).then(function(a){return e(a)}):e()};c.prototype._request=function(a,b){var c=this.authMode===p.AUTH_MODE_ANONYMOUS?"anonymous":"auto",e=null,f="auto",g={f:"json"},h="json";b&&(b.authMode&&(c=b.authMode),b.body&&(e=b.body),b.method&&(f=b.method),b.query&&(g=l({},g,b.query)),b.responseType&&(h=b.responseType));
b={authMode:c,body:e,method:f,query:g,responseType:h,timeout:0};return d(this._normalizeSSL(a),b).then(function(a){return a.data})};c._resultsToTypedArray=function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=q.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};var p;c.AUTH_MODE_ANONYMOUS="anonymous";c.AUTH_MODE_AUTO="auto";c.AUTH_MODE_IMMEDIATE=
"immediate";h([u.property()],c.prototype,"access",void 0);h([u.property()],c.prototype,"allSSL",void 0);h([u.property()],c.prototype,"authMode",void 0);h([u.property()],c.prototype,"authorizedCrossOriginDomains",void 0);h([u.reader("authorizedCrossOriginDomains")],c.prototype,"readAuthorizedCrossOriginDomains",null);h([u.property()],c.prototype,"basemapGalleryGroupQuery",void 0);h([u.property()],c.prototype,"bingKey",void 0);h([u.property()],c.prototype,"canListApps",void 0);h([u.property()],c.prototype,
"canListData",void 0);h([u.property()],c.prototype,"canListPreProvisionedItems",void 0);h([u.property()],c.prototype,"canProvisionDirectPurchase",void 0);h([u.property()],c.prototype,"canSearchPublic",void 0);h([u.property()],c.prototype,"canShareBingPublic",void 0);h([u.property()],c.prototype,"canSharePublic",void 0);h([u.property()],c.prototype,"canSignInArcGIS",void 0);h([u.property()],c.prototype,"canSignInIDP",void 0);h([u.property()],c.prototype,"colorSetsGroupQuery",void 0);h([u.property()],
c.prototype,"commentsEnabled",void 0);h([u.property({type:Date})],c.prototype,"created",void 0);h([u.property()],c.prototype,"credential",void 0);h([u.property()],c.prototype,"culture",void 0);h([u.property()],c.prototype,"currentVersion",void 0);h([u.property()],c.prototype,"customBaseUrl",void 0);h([u.property()],c.prototype,"defaultBasemap",void 0);h([u.reader("defaultBasemap")],c.prototype,"readDefaultBasemap",null);h([u.property({type:w})],c.prototype,"defaultExtent",void 0);h([u.property()],
c.prototype,"defaultVectorBasemap",void 0);h([u.reader("defaultVectorBasemap")],c.prototype,"readDefaultVectorBasemap",null);h([u.property()],c.prototype,"description",void 0);h([u.property()],c.prototype,"eueiEnabled",void 0);h([u.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],c.prototype,"extraQuery",null);h([u.property()],c.prototype,"featuredGroups",void 0);h([u.property()],c.prototype,"featuredItemsGroupQuery",void 0);h([u.property()],c.prototype,"galleryTemplatesGroupQuery",
void 0);h([u.property()],c.prototype,"livingAtlasGroupQuery",void 0);h([u.property()],c.prototype,"hasCategorySchema",void 0);h([u.property()],c.prototype,"helpBase",void 0);h([u.property()],c.prototype,"helperServices",void 0);h([u.property()],c.prototype,"helpMap",void 0);h([u.property()],c.prototype,"homePageFeaturedContent",void 0);h([u.property()],c.prototype,"homePageFeaturedContentCount",void 0);h([u.property()],c.prototype,"httpPort",void 0);h([u.property()],c.prototype,"httpsPort",void 0);
h([u.property()],c.prototype,"id",void 0);h([u.property()],c.prototype,"ipCntryCode",void 0);h([u.property({dependsOn:["access"],readOnly:!0})],c.prototype,"isOrganization",null);h([u.property()],c.prototype,"isPortal",void 0);h([u.property()],c.prototype,"layerTemplatesGroupQuery",void 0);h([u.property()],c.prototype,"maxTokenExpirationMinutes",void 0);h([u.property({type:Date})],c.prototype,"modified",void 0);h([u.property()],c.prototype,"name",void 0);h([u.property()],c.prototype,"portalHostname",
void 0);h([u.property()],c.prototype,"portalMode",void 0);h([u.property()],c.prototype,"portalProperties",void 0);h([u.property()],c.prototype,"region",void 0);h([u.property({dependsOn:["url"],readOnly:!0})],c.prototype,"restUrl",null);h([u.property()],c.prototype,"rotatorPanels",void 0);h([u.property()],c.prototype,"showHomePageDescription",void 0);h([u.property()],c.prototype,"staticImagesUrl",void 0);h([u.property()],c.prototype,"stylesGroupQuery",void 0);h([u.property()],c.prototype,"supportsHostedServices",
void 0);h([u.property()],c.prototype,"symbolSetsGroupQuery",void 0);h([u.property()],c.prototype,"templatesGroupQuery",void 0);h([u.property()],c.prototype,"thumbnail",void 0);h([u.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],c.prototype,"thumbnailUrl",null);h([u.property()],c.prototype,"units",void 0);h([u.property()],c.prototype,"url",void 0);h([u.property()],c.prototype,"urlKey",void 0);h([u.reader("urlKey")],c.prototype,"readUrlKey",null);h([u.property()],c.prototype,"user",void 0);
h([u.reader("user")],c.prototype,"readUser",null);h([u.property()],c.prototype,"useStandardizedQuery",void 0);h([u.property()],c.prototype,"useVectorBasemaps",void 0);h([u.property()],c.prototype,"vectorBasemapGalleryGroupQuery",void 0);h([g(1,u.cast(A))],c.prototype,"_queryPortal",null);return c=p=h([u.subclass("esri.portal.Portal")],c)}(u.declared(c,p))})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){m=function(a){function c(){var b=a.call(this)||this;b.loadError=null;b.loadStatus="not-loaded";b.loadWarnings=null;b._set("loadWarnings",[]);b.addResolvingPromise(n.create(function(a){var c=!1,d=b.load.bind(b);b.load=function(){"not-loaded"===b.loadStatus&&(b._set("loadStatus","loading"),d());c||(a(),c=!0);return b.when()}}));b.when(function(a){b._set("loadStatus","loaded")},function(a){b._set("loadStatus","failed");b._set("loadError",a)});return b}l(c,a);Object.defineProperty(c.prototype,
"loaded",{get:function(){return"loaded"===this.loadStatus},enumerable:!0,configurable:!0});c.prototype.load=function(){return null};c.prototype.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));this._promiseProps.resolver.reject(this.loadError);return this};f([b.property({readOnly:!0,dependsOn:["loadStatus"]})],c.prototype,"loaded",null);f([b.property({readOnly:!0})],c.prototype,"loadError",void 0);f([b.property()],c.prototype,"loadStatus",
void 0);f([b.property({type:[d],readOnly:!0})],c.prototype,"loadWarnings",void 0);return c=f([b.subclass("esri.core.Loadable")],c)}(b.declared(h,e));m.prototype["-chains-"]=k.mixin({},h._meta.chains,{load:"after"});return m})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k,e,n){function d(a){var b=a._promiseProps;if(!b.isFulfilled()){var c=
b.resolvingPromises,d,f;b.allPromise&&b.allPromise.cancel();var g,h=k.create(function(a,b){g={resolve:a,reject:b}});for(d=c.length-1;0<=d;d--)f=c[d],f.isCanceled&&f.isCanceled()&&c.splice(d,1);f=null;(b.allPromise=k.all(c.concat([h]))).then(function(){b.resolver.resolve(a);a=b=g=b.allPromise=b.resolvingPromises=null},function(c){b.allPromise=null;if(!c||"cancel"!==c.dojoType){var d=Array.prototype.slice.call(arguments,0);b.resolver.reject(d[0]);a=b=g=b.allPromise=b.resolvingPromises=null}});g&&e.schedule(function(){g&&
g.resolve()})}}var b=function(a){a=new g("AbortError");a.target=this.instance;a.dojoType="cancel";return a},c=function(){function a(a){var c=this;this.canceler=b.bind(this);this.status=void 0;this.initialized=!1;this.resolvingPromises=[];this.instance=a;this.promise=k.create(function(a,b){c.resolver={resolve:a,reject:b}});this.promise.then(function(){c.status=1},function(){c.status=2})}a.prototype.cancel=function(){if(!this.isFulfilled()){this.allPromise.cancel();for(var a=this.resolvingPromises.concat(),
b=a.length-1;0<=b;b--)a[b].cancel();this.resolver.cancel()}};a.prototype.isResolved=function(){return 1===this.status};a.prototype.isRejected=function(){return 2===this.status};a.prototype.isFulfilled=function(){return!!this.status};return a}();return function(a){function b(){var b=a.call(this)||this;b._promiseProps=new c(b);var e=b.postscript;e?b.postscript=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];e.apply(b,a);b.postscript=e;d(b)}:d(b);return b}l(b,a);b.prototype.isResolved=
function(){return this._promiseProps.isResolved()};b.prototype.isRejected=function(){return this._promiseProps.isRejected()};b.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};b.prototype.when=function(a,b){var c=this;return k.create(function(a,b){c._promiseProps.promise.then(a,b)},this._promiseProps.canceler).then(a,b)};b.prototype.catch=function(a){return this.when(null,a)};b.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&("_promiseProps"in
a?this._promiseProps.resolvingPromises.push(a.when()):this._promiseProps.resolvingPromises.push(a),d(this))};return b=f([n.subclass()],b)}(n.declared(h))})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(m,a,l,f,h){m=function(a){function f(e,g,d){var b=a.call(this,e,g,d)||this;return b instanceof f?b:new f(e,g,d)}l(f,a);return f}(h);m.prototype.type="warning";return m})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){var q=new k.default({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function g(b){b=a.call(this)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}f(g,a);p=g;Object.defineProperty(g.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,
configurable:!0});g.prototype.clone=function(){return new p({categories:this.categories?e.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};g.prototype.toRequestOptions=function(a,d){var e;this.categories&&(e=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var f;if(this.extent){var g=c.project(this.extent,
b.WGS84);g&&(f=g.xmin+","+g.ymin+","+g.xmax+","+g.ymax)}g=this.query;!this.disableExtraQuery&&a.extraQuery&&(g="("+g+")"+a.extraQuery);a={categories:e,bbox:f,q:g,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=q.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:l({},d,a)}};var p;h([n.property()],g.prototype,"categories",void 0);h([n.property()],g.prototype,"disableExtraQuery",void 0);h([n.property({type:d})],g.prototype,"extent",void 0);h([n.property()],
g.prototype,"num",void 0);h([n.property()],g.prototype,"query",void 0);h([n.property()],g.prototype,"sortField",void 0);h([n.property()],g.prototype,"sortOrder",null);h([n.property()],g.prototype,"start",void 0);return g=p=h([n.subclass("esri.portal.PortalQueryParams")],g)}(n.declared(g))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(m,
a,l,f,h,g){return function(a){function e(e){e=a.call(this)||this;e.nextQueryParams=null;e.queryParams=null;e.results=null;e.total=null;return e}l(e,a);f([g.property()],e.prototype,"nextQueryParams",void 0);f([g.property()],e.prototype,"queryParams",void 0);f([g.property()],e.prototype,"results",void 0);f([g.property()],e.prototype,"total",void 0);return e=f([g.subclass("esri.portal.PortalQueryResult")],e)}(g.declared(h))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(m,a,l,f,h,g,k,e,n,d){return function(a){function b(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}l(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+
b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});b.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e={method:"post"};
c&&(e.query=c._getPostQuery(),null!=d&&("string"===typeof d?e.query.text=d:"object"===typeof d&&(e.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};b.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=
null})};b.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",c=a.map(function(a){return a.id});return c.length?(c={method:"post",query:{items:c.join(",")}},this.portal._request(b,c).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):k.resolve(void 0)};b.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=n.fromJSON(b);b.portal=a.portal;
return b}):[]})};b.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=d.fromJSON(b);b.portal=a.portal;return b}):[]})};b.prototype.fetchItems=function(a){var b=this;a||(a={});var c=this.userContentUrl;a.folder&&(c+="/"+a.folder.id);var d;return k.create(function(a){return m(["./PortalItem"],a)}).then(function(e){d=e;return b.portal._request(c,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var c;
return a&&a.items?(c=a.items.map(function(a){a=d.fromJSON(a);a.portal=b.portal;return a}),k.all(c.map(function(a){return a.load()})).catch(function(a){return a}).then(function(){return{items:c,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new d({id:this.favGroupId,portal:this.portal})),
this._favGroup.queryItems(a)):k.reject(new h("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};b.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};f([e.property()],b.prototype,"access",void 0);f([e.property({type:Date})],b.prototype,"created",void 0);f([e.property()],b.prototype,"culture",void 0);f([e.property()],b.prototype,"description",void 0);f([e.property()],b.prototype,"email",void 0);f([e.property()],
b.prototype,"favGroupId",void 0);f([e.property()],b.prototype,"fullName",void 0);f([e.property({type:Date})],b.prototype,"modified",void 0);f([e.property()],b.prototype,"orgId",void 0);f([e.property()],b.prototype,"portal",void 0);f([e.property()],b.prototype,"preferredView",void 0);f([e.property()],b.prototype,"privileges",void 0);f([e.property()],b.prototype,"region",void 0);f([e.property()],b.prototype,"role",void 0);f([e.property()],b.prototype,"roleId",void 0);f([e.property()],b.prototype,"thumbnail",
void 0);f([e.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],b.prototype,"thumbnailUrl",null);f([e.property()],b.prototype,"units",void 0);f([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"userContentUrl",null);f([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);f([e.property()],b.prototype,"username",void 0);f([e.property()],b.prototype,"userType",void 0);return b=f([e.subclass("esri.portal.PortalUser")],b)}(e.declared(g))})},
"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(d){d=a.call(this)||this;d.created=null;d.id=null;d.portal=null;d.title=null;d.username=null;return d}l(e,a);Object.defineProperty(e.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+
"/"+this.id:null},enumerable:!0,configurable:!0});e.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};f([k.property({type:Date})],e.prototype,"created",void 0);f([k.property()],e.prototype,"id",void 0);f([k.property()],e.prototype,"portal",void 0);f([k.property()],e.prototype,"title",void 0);f([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],e.prototype,"url",null);f([k.property()],e.prototype,"username",void 0);return e=
f([k.subclass("esri.portal.PortalFolder")],e)}(k.declared(g))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),function(m,a,l,f,h,g,k,e,n){return function(a){function b(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=
null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}l(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchCategorySchema=
function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.toJSON=function(){throw new g("internal:not-yet-implemented",
"PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new n,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new n;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};b.prototype._fetchCategorySchemaSet=function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=
new n;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new n;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?
a:[]}):[]})};f([e.property()],b.prototype,"access",void 0);f([e.property({type:Date})],b.prototype,"created",void 0);f([e.property()],b.prototype,"description",void 0);f([e.property()],b.prototype,"id",void 0);f([e.property()],b.prototype,"isInvitationOnly",void 0);f([e.property({type:Date})],b.prototype,"modified",void 0);f([e.property()],b.prototype,"owner",void 0);f([e.property()],b.prototype,"portal",void 0);f([e.property()],b.prototype,"snippet",void 0);f([e.property()],b.prototype,"sortField",
void 0);f([e.property()],b.prototype,"sortOrder",void 0);f([e.property()],b.prototype,"tags",void 0);f([e.property()],b.prototype,"thumbnail",void 0);f([e.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],b.prototype,"thumbnailUrl",null);f([e.property()],b.prototype,"title",void 0);f([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);f([h(0,e.cast(n))],b.prototype,"queryItems",null);return b=f([e.subclass("esri.portal.PortalGroup")],b)}(e.declared(k))})},
"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k,e){var n=new k.default({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",
MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),d=0;return function(a){function b(b){b=a.call(this,b)||this;b.id="sym"+d++;b.type=null;return b}l(b,a);Object.defineProperty(b.prototype,"color",{set:function(a){this._set("color",a)},enumerable:!0,configurable:!0});b.prototype.readColor=function(a,b,c){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};b.prototype.clone=function(){};f([e.property({type:n.apiValues,json:{read:n.read,write:{ignoreOrigin:!0,writer:n.write}}})],
b.prototype,"type",void 0);f([e.property({type:h,value:new h([0,0,0,1]),json:{write:{allowNull:!0}}})],b.prototype,"color",null);f([e.reader("color")],b.prototype,"readColor",null);return b=f([e.subclass("esri.symbols.Symbol")],b)}(e.declared(g))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=
a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;b.castShadows=!0;b.edges=null;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),castShadows:this.castShadows,size:this.size})};var d;f([h.enumeration.serializable()({Extrude:"extrude"})],e.prototype,"type",void 0);f([h.property({type:Number,json:{write:!0}})],
e.prototype,"size",void 0);f([h.property()],e.prototype,"material",void 0);f([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.prototype,"castShadows",void 0);f([h.property(k.symbol3dEdgesProperty)],e.prototype,"edges",void 0);return e=d=f([h.subclass("esri.symbols.ExtrudeSymbol3DLayer")],e)}(h.declared(g))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),
function(m,a,l,f,h,g,k,e,n){var d=g.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});m=function(a){function b(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}l(b,a);b.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};f([k.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);f([k.writer("enabled")],b.prototype,"writeEnabled",null);f([k.property({type:e,json:{read:!1,
write:!1}})],b.prototype,"elevationInfo",void 0);f([k.property({type:n.default,json:{write:!0}})],b.prototype,"material",void 0);f([k.property({type:d.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:d.write}}})],b.prototype,"type",void 0);return b=f([k.subclass("esri.symbols.Symbol3DLayer")],b)}(k.declared(h));(m||(m={})).typeJSONDictionary=d;return m})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ./unitConversionUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){var c=e.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),q=new e.KebabDictionary({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);c=b;b.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){return h(this,function(c){return[2,
d.collectArcadeFieldNames(a,b,this.expression)]})})};b.prototype.clone=function(){return new c({expression:this.expression,title:this.title})};var c;f([n.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);f([n.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=c=f([n.subclass("esri.layers.support.FeatureExpressionInfo")],b)}(n.declared(k));return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,a);e=d;d.prototype.readFeatureExpressionInfo=
function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};d.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(d.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",a)},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});d.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};d.prototype.clone=function(){return new e({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var e;f([n.property({type:p,json:{write:!0}})],d.prototype,"featureExpressionInfo",
void 0);f([n.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],d.prototype,"readFeatureExpressionInfo",null);f([n.writer("featureExpressionInfo",{featureExpressionInfo:{type:p},"featureExpression.value":{type:[0]}})],d.prototype,"writeFeatureExpressionInfo",null);f([n.property({type:c.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:c.jsonValues,read:c.read,write:{writer:c.write,isRequired:!0}}})],d.prototype,"mode",null);f([n.property({type:Number,
json:{write:!0}})],d.prototype,"offset",void 0);f([n.property({type:b.supportedUnits,json:{type:String,read:q.read,write:q.write}})],d.prototype,"unit",null);return d=e=f([n.subclass("esri.layers.support.ElevationInfo")],d)}(n.declared(k))})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.supportsUnit=function(a){return null!=l.meterIn[a]};a.getMetersPerUnit=function(a){return 1/
(l.meterIn[a]||1)};a.supportedUnits=function(){var a=Object.keys(l.meterIn);a.sort();return a}()})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}l(e,a);d=e;e.prototype.clone=
function(){return new d({color:this.color?this.color.clone():null})};var d;f([g.property(k.colorAndTransparencyProperty)],e.prototype,"color",void 0);return e=d=f([g.subclass("esri.symbols.support.Symbol3DMaterial")],e)}(g.declared(h));a.Symbol3DMaterial=m;a.default=m})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),function(m,a,l,f,h,g){function k(a,d){a=
null!=d.transparency?g.transparencyToOpacity(d.transparency):1;if((d=d.color)&&Array.isArray(d))return new l([d[0]||0,d[1]||0,d[2]||0,a])}function e(a,d){d.color=a.toJSON().slice(0,3);a=g.opacityToTransparency(a.a);0!==a&&(d.transparency=a)}Object.defineProperty(a,"__esModule",{value:!0});a.readColorAndTransparency=k;a.writeColorAndTransparency=e;a.colorAndTransparencyProperty={type:l,json:{type:[h.Integer],read:{source:["color","transparency"],reader:k},write:{target:{color:{type:[h.Integer]},transparency:{type:h.Integer}},
writer:e}}};a.screenSizeProperty={type:Number,cast:f.toPt,json:{write:!0}}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=l.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-a/100,1))}})},"esri/symbols/edges/utils":function(){define(["require","exports",
"./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(m,a,l,f,h){function g(a,e,g){if(!a)return a;switch(a.type){case "solid":return e=new h,e.read(a,g),e;case "sketch":return e=new f,e.read(a,g),e}}Object.defineProperty(a,"__esModule",{value:!0});a.read=g;a.symbol3dEdgesProperty={types:{key:"type",base:l,typeMap:{solid:h,sketch:f}},json:{read:g,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){return function(a){function c(b){b=a.call(this)||this;b.color=new g([0,0,0,1]);b.extensionLength=0;b.size=n.px2pt(1);return b}l(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=h({},a),delete a.type);return a};c.prototype.clone=function(){};c.prototype.cloneProperties=function(){return{color:e.clone(this.color),size:this.size,extensionLength:this.extensionLength}};f([d.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],
c.prototype,"type",void 0);f([d.property(b.colorAndTransparencyProperty)],c.prototype,"color",void 0);f([d.property(h({},b.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],c.prototype,"extensionLength",void 0);f([d.property(b.screenSizeProperty)],c.prototype,"size",void 0);return c=f([d.subclass("esri.symbols.edges.Edges3D")],c)}(d.declared(k))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.type="sketch";return d}l(e,a);g=e;e.prototype.clone=function(){return new g(this.cloneProperties())};var g;f([h.property({type:["sketch"]})],e.prototype,"type",void 0);return e=g=f([h.subclass("esri.symbols.edges.SketchEdges3D")],e)}(h.declared(g))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.type="solid";return d}l(e,a);g=e;e.prototype.clone=function(){return new g(this.cloneProperties())};var g;f([h.property({type:["solid"]})],e.prototype,"type",void 0);return e=g=f([h.subclass("esri.symbols.support.SolidEdges3D")],e)}(h.declared(g))})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),
function(m,a,l,f,h,g,k,e){var n=new h.default({esriSFS:"simple-fill",esriPFS:"picture-fill"});return function(a){function b(b){b=a.call(this,b)||this;b.outline=null;b.type=null;return b}l(b,a);f([g.property({type:k,json:{default:null,write:!0}})],b.prototype,"outline",void 0);f([g.property({type:n.apiValues,readOnly:!0,json:{type:n.jsonValues}})],b.prototype,"type",void 0);return b=f([g.subclass("esri.symbols.FillSymbol")],b)}(g.declared(e))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),
function(m,a,l,f,h,g,k,e,n){var d=new h.default({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(a){function b(b,c,d,e,f,g){b=a.call(this,b)||this;b.type="simple-line";
b.style="solid";b.cap="round";b.join="round";b.miterLimit=7.5;return b}l(b,a);h=b;b.prototype.normalizeCtorArgs=function(a,b,c,d,e,f){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.style=a);null!=b&&(g.color=b);null!=c&&(g.width=k.toPt(c));null!=d&&(g.cap=d);null!=e&&(g.join=e);null!=f&&(g.miterLimit=k.toPt(f));return g};b.prototype.clone=function(){return new h({color:g.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var h;f([e.enumeration.serializable()({esriSLS:"simple-line"})],
b.prototype,"type",void 0);f([e.property({type:d.apiValues,json:{read:d.read,write:d.write}})],b.prototype,"style",void 0);f([e.property({type:["butt","round","square"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],b.prototype,"cap",void 0);f([e.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],b.prototype,"join",void 0);f([e.property({type:Number,
cast:k.toPt,json:{read:!1,write:!1}})],b.prototype,"miterLimit",void 0);return b=h=f([e.subclass("esri.symbols.SimpleLineSymbol")],b)}(e.declared(n))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(d){d=a.call(this,d)||this;d.type="simple-line";d.width=.75;return d}l(e,a);f([g.enumeration.serializable()({esriSLS:"simple-line"})],
e.prototype,"type",void 0);f([g.property({type:Number,cast:h.toPt,json:{write:!0}})],e.prototype,"width",void 0);return e=f([g.subclass("esri.symbols.LineSymbol")],e)}(g.declared(k))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),function(m,a,l,f,h,g,k,e,n){return function(a){function b(b){b=
a.call(this)||this;b.type="fill";b.material=null;b.castShadows=!0;b.outline=null;b.edges=null;return b}l(b,a);c=b;b.prototype.clone=function(){return new c({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),castShadows:this.castShadows,outline:this.outline&&this.outline.clone()})};var c;f([h.enumeration.serializable()({Fill:"fill"})],b.prototype,"type",void 0);f([h.property({type:e.default})],
b.prototype,"material",void 0);f([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],b.prototype,"castShadows",void 0);f([h.property({type:n.default,json:{write:!0}})],b.prototype,"outline",void 0);f([h.property(k.symbol3dEdgesProperty)],b.prototype,"edges",void 0);return b=c=f([h.subclass("esri.symbols.FillSymbol3DLayer")],b)}(h.declared(g))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),
function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}l(e,a);g=e;e.prototype.clone=function(){return new g({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};var g;f([h.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],e.prototype,"colorMixMode",void 0);return e=g=f([h.subclass("esri.symbols.support.Symbol3DFillMaterial")],e)}(h.declared(g.default));a.Symbol3DFillMaterial=
m;a.default=m})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(m,a,l,f,h,g,k,e,n){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new h([0,0,0,1]);b.size=k.px2pt(1);return b}l(b,a);
c=b;b.prototype.clone=function(){return new c({color:this.color?this.color.clone():null,size:this.size})};var c;f([e.property(n.colorAndTransparencyProperty)],b.prototype,"color",void 0);f([e.property(n.screenSizeProperty)],b.prototype,"size",void 0);return b=c=f([e.subclass("esri.symbols.support.Symbol3DOutline")],b)}(e.declared(g));a.Symbol3DOutline=m;a.default=m})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}l(e,a);d=e;e.prototype.castSize=function(a){return g.toPt(a)};e.prototype.clone=function(){return new d({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var d;f([k.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],e.prototype,"decoration",void 0);
f([k.property({type:String,json:{write:!0}})],e.prototype,"family",void 0);f([k.property({type:Number,json:{write:{overridePolicy:function(a,c,d){return{enabled:!d||!d.textSymbol3D}}}}})],e.prototype,"size",void 0);f([k.cast("size")],e.prototype,"castSize",null);f([k.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],e.prototype,"style",void 0);f([k.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],e.prototype,"weight",void 0);return e=
d=f([k.subclass("esri.symbols.Font")],e)}(k.declared(h))})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DOutline".split(" "),function(m,a,l,f,h,g,k,e,n,d){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type=
"icon";b.size=12;b.anchor="center";b.anchorPosition=void 0;b.outline=void 0;return b}l(b,a);g=b;b.prototype.clone=function(){return new g({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};var g;f([h.property()],b.prototype,"material",
void 0);f([h.property({type:k.default,json:{write:!0}})],b.prototype,"resource",void 0);f([h.enumeration.serializable()({Icon:"icon"})],b.prototype,"type",void 0);f([h.property(e.screenSizeProperty)],b.prototype,"size",void 0);f([h.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),h.property({json:{default:"center"}})],b.prototype,"anchor",
void 0);f([h.property({type:n.Symbol3DAnchorPosition2D,json:{read:{reader:function(a){return new n.Symbol3DAnchorPosition2D({x:a[0],y:a[1]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],b.prototype,"anchorPosition",void 0);f([h.property({type:d.default,json:{write:!0}})],b.prototype,"outline",void 0);return b=g=f([h.subclass("esri.symbols.IconSymbol3DLayer")],b)}(h.declared(g))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});var n=g.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});m=function(a){function b(b){return a.call(this,b)||this}l(b,a);c=b;b.prototype.readHref=function(a,b,c){return a?k.fromJSON(a,c):b.dataURI};b.prototype.writeHref=function(a,b,c,d){a&&(k.isDataProtocol(a)?b.dataURI=a:(b.href=k.toJSON(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href))))};b.prototype.clone=function(){return new c({href:this.href,
primitive:this.primitive})};var c;f([e.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],b.prototype,"href",void 0);f([e.reader("href")],b.prototype,"readHref",null);f([e.writer("href",{href:{type:String},dataURI:{type:String}})],b.prototype,"writeHref",null);f([e.enumeration.serializable()(n)],b.prototype,"primitive",void 0);return b=c=f([e.subclass("esri.symbols.support.IconSymbol3DLayerResource")],b)}(e.declared(h));a.IconSymbol3DLayerResource=m;a.defaultPrimitive="circle";
a.default=m})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.x=0;d.y=0;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({x:this.x,y:this.y})};var h;f([g.property({type:Number})],
e.prototype,"x",void 0);f([g.property({type:Number})],e.prototype,"y",void 0);return e=h=f([g.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],e)}(g.declared(h));a.Symbol3DAnchorPosition2D=m;a.default=m})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){var c=h.ofType({base:null,key:"type",typeMap:{text:n}});return function(a){function e(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new c;b.type="label-3d";return b}l(e,a);h=e;e.prototype.supportsCallout=function(){return!0};e.prototype.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};e.prototype.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};e.prototype.clone=function(){return new h({styleOrigin:g.clone(this.styleOrigin),
symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail),callout:g.clone(this.callout),verticalOffset:g.clone(this.verticalOffset)})};var h;f([k.property({type:b.default,json:{write:!0}})],e.prototype,"verticalOffset",void 0);f([k.property(d.calloutProperty)],e.prototype,"callout",void 0);f([k.property({json:{read:!1,write:!1}})],e.prototype,"styleOrigin",void 0);f([k.property({type:c})],e.prototype,"symbolLayers",void 0);f([k.enumeration.serializable()({LabelSymbol3D:"label-3d"})],
e.prototype,"type",void 0);return e=h=f([k.subclass("esri.symbols.LabelSymbol3D")],e)}(k.declared(e))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/kebabDictionary ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E){var B={icon:t,object:w,line:u,path:A,fill:p,extrude:q,text:y},F=h.ofType({base:z,key:"type",typeMap:B}),D=k.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),G=e.getLogger("esri.symbols.Symbol3D");return function(a){function e(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;
b._set("symbolLayers",new (c&&c.type||h));return b}l(e,a);Object.defineProperty(e.prototype,"color",{get:function(){return null},set:function(a){G.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"symbolLayers",{set:function(a){g.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});e.prototype.readSymbolLayers=function(a,b,c){b=[];
for(var e=0;e<a.length;e++){var f=a[e],g=z.typeJSONDictionary.read(f.type),h=g&&B[g];h?(f=new h,f.read(a[e],c),b.push(f)):(G.warn("Unknown symbol layer type: "+g),c&&c.messages&&c.messages.push(new d("symbol-layer:unsupported","Symbol layers of type '"+(g||f.type||"unknown")+"' are not supported",{definition:f,context:c})))}return b};e.prototype.readStyleOrigin=function(a,b,e){if(a.styleUrl&&a.name)return b=n.fromJSON(a.styleUrl,e),new x({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new x({portal:e&&
e.portal||c.getDefault(),styleName:a.styleName,name:a.name});e&&e.messages&&e.messages.push(new d("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:e,definition:a}))};e.prototype.writeStyleOrigin=function(a,b,c,e){a.styleUrl&&a.name?(c=n.toJSON(a.styleUrl,e),n.isAbsolute(c)&&(c=n.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!n.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?
e&&e.messages&&e.messages.push(new d("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};e.prototype.normalizeCtorArgs=function(a){return a instanceof z||a&&B[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};f([b.property({json:{read:!1,write:!1}})],e.prototype,"color",null);f([b.property({type:F,nonNullable:!0,json:{write:!0}}),
b.cast(g.castForReferenceSetter)],e.prototype,"symbolLayers",null);f([b.reader("symbolLayers")],e.prototype,"readSymbolLayers",null);f([b.property({type:x})],e.prototype,"styleOrigin",void 0);f([b.reader("styleOrigin")],e.prototype,"readStyleOrigin",null);f([b.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],e.prototype,"writeStyleOrigin",null);f([b.property({type:E.default,json:{read:!1}})],e.prototype,"thumbnail",
void 0);f([b.property({type:D.apiValues,readOnly:!0,json:{type:D.jsonValues,read:!1}})],e.prototype,"type",void 0);return e=f([b.subclass("esri.symbols.Symbol3D")],e)}(b.declared(C))})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,h,g){void 0===g&&(g=l);h||(h=new g);if(h===a)return h;h.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(l))?h.addMany(a):
a&&h.add(a);return h};a.castForReferenceSetter=function(a){return a}})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.material=null;b.type="line";b.size=h.px2pt(1);return b}l(d,a);b=d;d.prototype.clone=function(){return new b({enabled:this.enabled,
elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var b;f([g.property()],d.prototype,"material",void 0);f([g.enumeration.serializable()({Line:"line"})],d.prototype,"type",void 0);f([g.property(e.screenSizeProperty)],d.prototype,"size",void 0);return d=b=f([g.subclass("esri.symbols.LineSymbol3DLayer")],d)}(g.declared(k))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
function(m,a,l,f,h,g,k,e,n){return function(a){function b(b){b=a.call(this)||this;b.material=null;b.castShadows=!0;b.resource=null;b.type="object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.anchorPosition=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}l(b,a);c=b;b.prototype.clone=function(){return new c({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,
elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(b.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var c;f([h.property({type:n.default})],b.prototype,"material",void 0);f([h.property({type:Boolean,nonNullable:!0,json:{write:!0,
default:!0}})],b.prototype,"castShadows",void 0);f([h.property({type:k.default,json:{write:!0}})],b.prototype,"resource",void 0);f([h.enumeration.serializable()({Object:"object"})],b.prototype,"type",void 0);f([h.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);f([h.property({type:Number,json:{write:!0}})],b.prototype,"height",void 0);f([h.property({type:Number,json:{write:!0}})],b.prototype,"depth",void 0);f([h.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",
origin:"origin",relative:"relative"}),h.property({json:{default:"origin"}})],b.prototype,"anchor",void 0);f([h.property({type:e.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:function(a){return new e.Symbol3DAnchorPosition3D({x:a[0],y:a[1],z:a[2]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y,a.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],b.prototype,"anchorPosition",void 0);f([h.property({type:Number,json:{write:!0}})],b.prototype,"heading",void 0);
f([h.property({type:Number,json:{write:!0}})],b.prototype,"tilt",void 0);f([h.property({type:Number,json:{write:!0}})],b.prototype,"roll",void 0);f([h.property({readOnly:!0,dependsOn:["resource","resource.href"]})],b.prototype,"isPrimitive",null);return b=c=f([h.subclass("esri.symbols.ObjectSymbol3DLayer")],b)}(h.declared(g))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});var n=g.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);c=b;b.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};var c;f([e.property({type:String,json:{read:k.read,write:k.write}})],b.prototype,"href",void 0);f([e.enumeration.serializable()(n)],
b.prototype,"primitive",void 0);return b=c=f([e.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],b)}(e.declared(h));a.ObjectSymbol3DLayerResource=m;a.defaultPrimitive="sphere";a.default=m})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});
m=function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.x=0;d.y=0;d.z=0;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({x:this.x,y:this.y,z:this.z})};var h;f([g.property({type:Number})],e.prototype,"x",void 0);f([g.property({type:Number})],e.prototype,"y",void 0);f([g.property({type:Number})],e.prototype,"z",void 0);return e=h=f([g.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],e)}(g.declared(h));a.Symbol3DAnchorPosition3D=m;a.default=m})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),
function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.material=null;d.castShadows=!0;d.type="path";d.size=void 0;d.profile="tube";d.joint="simple";return d}l(e,a);g=e;e.prototype.readSize=function(a,b){return a||b.width||0};e.prototype.clone=function(){return new g({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),castShadows:this.castShadows,size:this.size,profile:this.profile,joint:this.joint})};
var g;f([h.property()],e.prototype,"material",void 0);f([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],e.prototype,"castShadows",void 0);f([h.enumeration.serializable()({Path:"path"})],e.prototype,"type",void 0);f([h.property({type:Number,json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],e.prototype,"size",void 0);f([h.reader("size",["size","width"])],e.prototype,"readSize",null);f([h.property()],e.prototype,"profile",void 0);f([h.property()],e.prototype,
"joint",void 0);return e=g=f([h.subclass("esri.symbols.PathSymbol3DLayer")],e)}(h.declared(g))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),function(m,a,l,f,h,g,k,e,n,d,b){return function(a){function c(b){b=a.call(this)||this;b._userSize=void 0;
b.halo=null;b.material=null;b.text=void 0;b.type="text";return b}l(c,a);p=c;Object.defineProperty(c.prototype,"font",{get:function(){return this._get("font")||null},set:function(a){a&&this._userSize&&(a.size=this._userSize);this._set("font",a)},enumerable:!0,configurable:!0});c.prototype.writeFont=function(a,b,c,d){c=h({},d,{textSymbol3D:!0});b.font=a.write({},c);delete b.font.size};Object.defineProperty(c.prototype,"size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=
this.font.size?this.font.size:9},set:function(a){this._userSize=a;this.font&&(this.font.size=this._userSize);this.notifyChange("size")},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new p({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&g.clone(this.font),halo:this.halo&&g.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};var p;f([k.property({type:e,json:{write:!0}})],c.prototype,
"font",null);f([k.writer("font")],c.prototype,"writeFont",null);f([k.property({type:b.default,json:{write:!0}})],c.prototype,"halo",void 0);f([k.property()],c.prototype,"material",void 0);f([k.property(d.screenSizeProperty),k.property({dependsOn:["font.size"]})],c.prototype,"size",null);f([k.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);f([k.enumeration.serializable()({Text:"text"})],c.prototype,"type",void 0);return c=p=f([k.subclass("esri.symbols.TextSymbol3DLayer")],c)}(k.declared(n))})},
"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(m,a,l,f,h,g,k,e,n){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new h([0,0,0,1]);b.size=0;return b}l(b,a);c=b;b.prototype.clone=function(){return new c({color:k.clone(this.color),
size:this.size})};var c;f([e.property(n.colorAndTransparencyProperty)],b.prototype,"color",void 0);f([e.property(n.screenSizeProperty)],b.prototype,"size",void 0);return b=c=f([e.subclass("esri.symbols.support.Symbol3DHalo")],b)}(e.declared(g));a.Symbol3DHalo=m;a.default=m})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var d;f([g.property({type:String})],e.prototype,"name",void 0);f([g.property({type:String})],e.prototype,"styleUrl",void 0);f([g.property({type:String})],e.prototype,"styleName",void 0);f([g.property({type:k})],e.prototype,"portal",void 0);
return e=d=f([g.subclass("esri.symbols.support.StyleOrigin")],e)}(g.declared(h))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}l(e,a);h=e;e.prototype.clone=function(){return new h({url:this.url})};
var h;f([g.property({type:String})],e.prototype,"url",void 0);return e=h=f([g.subclass("esri.symbols.support.Thumbnail")],e)}(g.declared(h));a.Thumbnail=m;a.default=m})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(m,a,l,f){function h(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function g(a,e,g){if(!a)return a;switch(a.type){case "line":return e=new f,e.read(a,g),e}}Object.defineProperty(a,
"__esModule",{value:!0});a.hasVisibleVerticalOffset=h;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var e=a.callout;return e&&e.visible?h(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=g;a.calloutProperty={types:{key:"type",base:l,typeMap:{line:f}},json:{read:g,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(d){d=a.call(this)||this;d.visible=!0;return d}f(e,a);e.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l({},a),delete a.type);return a};e.prototype.clone=function(){};h([k.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],e.prototype,"type",void 0);h([k.property({readOnly:!0})],e.prototype,"visible",void 0);return e=h([k.subclass("esri.symbols.callouts.Callout3D")],e)}(k.declared(g))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){return function(a){function c(b){b=a.call(this)||this;b.type="line";b.color=new h([0,0,0,1]);b.size=k.px2pt(1);b.border=null;return b}l(c,a);p=c;Object.defineProperty(c.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new p({color:g.clone(this.color),size:this.size,border:g.clone(this.border)})};var p;f([e.property({type:["line"]})],c.prototype,"type",void 0);f([e.property(b.colorAndTransparencyProperty)],
c.prototype,"color",void 0);f([e.property(b.screenSizeProperty)],c.prototype,"size",void 0);f([e.property({type:d.default,json:{write:!0}})],c.prototype,"border",void 0);f([e.property({dependsOn:["size","color"],readOnly:!0})],c.prototype,"visible",null);return c=p=f([e.subclass("esri.symbols.callouts.LineCallout3D")],c)}(e.declared(n))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(m,a,l,f,h,g,k,e,n){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new h("white");return b}l(b,a);c=b;b.prototype.clone=function(){return new c({color:k.clone(this.color)})};var c;f([e.property(n.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=c=f([e.subclass("esri.symbols.callouts.LineCallout3DBorder")],b)}(e.declared(g));a.LineCallout3DBorder=m;a.default=m})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var d;f([g.property(k.screenSizeProperty)],e.prototype,"screenLength",void 0);f([g.property({type:Number,json:{write:!0,default:0}})],e.prototype,"minWorldLength",
void 0);f([g.property({type:Number,json:{write:!0}})],e.prototype,"maxWorldLength",void 0);return e=d=f([g.subclass("esri.symbols.support.Symbol3DVerticalOffset")],e)}(g.declared(h));a.Symbol3DVerticalOffset=m;a.default=m})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),function(m,
a,l,f,h,g,k,e,n,d){var b=h.ofType({base:null,key:"type",typeMap:{line:e,path:n}}),c=h.ofType({base:null,key:"type",typeMap:{line:e,path:n}});return function(a){function d(c){c=a.call(this)||this;c.symbolLayers=new b;c.type="line-3d";return c}l(d,a);e=d;d.prototype.clone=function(){return new e({styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail)})};var e;f([k.property({type:b,json:{type:c}})],d.prototype,"symbolLayers",void 0);f([k.enumeration.serializable()({LineSymbol3D:"line-3d"})],
d.prototype,"type",void 0);return d=e=f([k.subclass("esri.symbols.LineSymbol3D")],d)}(k.declared(d))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(m,a,l,f,h,g,k,e){var n=new h.default({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(a){function b(b){b=a.call(this,b)||this;b.angle=
0;b.type=null;b.xoffset=0;b.yoffset=0;b.size=9;return b}l(b,a);f([k.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);f([k.property({type:n.apiValues,readOnly:!0,json:{type:n.jsonValues}})],b.prototype,"type",void 0);f([k.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);f([k.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);f([k.property({type:Number,
cast:function(a){return"auto"===a?a:g.toPt(a)},json:{write:!0}})],b.prototype,"size",void 0);return b=f([k.subclass("esri.symbols.MarkerSymbol")],b)}(k.declared(e))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(m,a,l,f,h,g,k,e,n){var d=h.ofType({base:null,key:"type",typeMap:{fill:e}});return function(a){function b(b){b=
a.call(this)||this;b.symbolLayers=new d;b.type="mesh-3d";return b}l(b,a);e=b;b.prototype.clone=function(){return new e({styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail)})};var e;f([k.property({type:d})],b.prototype,"symbolLayers",void 0);f([k.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],b.prototype,"type",void 0);return b=e=f([k.subclass("esri.symbols.MeshSymbol3D")],b)}(k.declared(n))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){return function(a){function b(b,c,d,e){b=a.call(this,b)||this;b.type="picture-fill";b.url=null;b.xscale=1;b.yscale=1;b.width=12;b.height=12;b.xoffset=0;b.yoffset=0;b.source=null;return b}l(b,a);h=b;b.prototype.normalizeCtorArgs=function(a,b,c,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);b&&(e.outline=b);null!=c&&(e.width=k.toPt(c));null!=d&&(e.height=k.toPt(d));return e};b.prototype.clone=function(){var a=new h({color:g.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",g.clone(this.source));return a};var h;f([e.enumeration.serializable()({esriPFS:"picture-fill"})],b.prototype,"type",void 0);f([e.property(d.urlPropertyDefinition)],b.prototype,"url",void 0);f([e.property({type:Number,json:{write:!0}})],b.prototype,"xscale",void 0);f([e.property({type:Number,json:{write:!0}})],
b.prototype,"yscale",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"width",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"height",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);f([e.property(d.sourcePropertyDefinition)],b.prototype,"source",void 0);return b=h=f([e.subclass("esri.symbols.PictureFillSymbol")],
b)}(e.declared(n))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(m,a,l){function f(a,e,f){return e.imageData?l.makeData({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):h(e.url,f)}function h(a,e){return!e||"service"!==e.origin&&"portal-item"!==e.origin||!e.layer||"feature"!==e.layer.type&&"stream"!==e.layer.type||l.isAbsolute(a)||!e.layer.parsedUrl?l.fromJSON(a,e):l.join(e.layer.parsedUrl.path,"images",a)}function g(a,
e,f,d){l.isDataProtocol(a)?(a=l.dataComponents(a),e.contentType=a.mediaType,e.imageData=a.data,f&&f.imageData===e.imageData&&f.url&&l.write(f.url,e,"url",d)):l.write(a,e,"url",d)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=f;a.read=h;a.writeImageDataAndUrl=g;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:f},write:{writer:function(a,e,f,d){g(a,e,this.source,d)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,
e,f){a={};e.imageData&&(a.imageData=e.imageData);e.contentType&&(a.contentType=e.contentType);e.url&&(a.url=h(e.url,f));return a}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),function(m,a,l,f,h,g,k,e,n){return function(a){function b(b,c,d){b=a.call(this,b)||this;b.color=null;b.type="picture-marker";
b.url=null;b.source=null;b.height=12;b.width=12;b.size=null;return b}l(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var d={};a&&(d.url=a);null!=b&&(d.width=g.toPt(b));null!=c&&(d.height=g.toPt(c));return d};b.prototype.readHeight=function(a,b){return b.size||a};b.prototype.readWidth=function(a,b){return b.size||a};b.prototype.clone=function(){var a=new c({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,
yoffset:this.yoffset});a._set("source",h.clone(this.source));return a};var c;f([k.property({json:{write:!1}})],b.prototype,"color",void 0);f([k.enumeration.serializable()({esriPMS:"picture-marker"})],b.prototype,"type",void 0);f([k.property(n.urlPropertyDefinition)],b.prototype,"url",void 0);f([k.property(n.sourcePropertyDefinition)],b.prototype,"source",void 0);f([k.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"height",void 0);f([k.reader("height",["height","size"])],b.prototype,
"readHeight",null);f([k.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"width",void 0);f([k.property({json:{write:!1}})],b.prototype,"size",void 0);return b=c=f([k.subclass("esri.symbols.PictureMarkerSymbol")],b)}(k.declared(e))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){var t=h.ofType({base:null,key:"type",typeMap:{icon:n,object:d,text:c}}),u=h.ofType({base:null,key:"type",typeMap:{icon:n,object:d}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new t;b.type="point-3d";return b}l(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new g("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(var a=0,b=this.symbolLayers.items;a<b.length;a++)switch(b[a].type){case "icon":case "text":case "object":continue;default:return!1}return!0};b.prototype.hasVisibleCallout=function(){return q.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=
function(){return q.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new c({verticalOffset:k.clone(this.verticalOffset),callout:k.clone(this.callout),styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};var c;f([e.property({type:p.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);f([e.property(q.calloutProperty)],b.prototype,"callout",void 0);f([e.property({type:t,json:{type:u}})],b.prototype,"symbolLayers",
void 0);f([e.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);f([e.enumeration.serializable()({PointSymbol3D:"point-3d"})],b.prototype,"type",void 0);return b=c=f([e.subclass("esri.symbols.PointSymbol3D")],b)}(e.declared(b))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){var u=h.ofType({base:null,key:"type",typeMap:{extrude:n,fill:d,icon:b,line:c,object:q,text:t}}),w=h.ofType({base:null,key:"type",typeMap:{extrude:n,fill:d,icon:b,line:c,object:q}});return function(a){function b(b){b=a.call(this)||this;b.type="polygon-3d";return b}l(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new g("symbol-layer:unsupported",
"Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=function(){return new c({styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new c;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var d=b.symbolLayers.getItemAt(0),e=
b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(d.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};var c;f([e.property({type:u,json:{type:w}})],b.prototype,"symbolLayers",void 0);f([e.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);f([e.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],b.prototype,"type",void 0);return b=c=f([e.subclass("esri.symbols.PolygonSymbol3D")],
b)}(e.declared(p))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ./FillSymbol ./SimpleLineSymbol".split(" "),function(m,a,l,f,h,g,k,e,n,d,b){var c=new k.default({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",
esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});return function(a){function d(c,d,e){c=a.call(this,c)||this;c.color=new g([0,0,0,.25]);c.outline=new b;c.type="simple-fill";c.style="solid";return c}l(d,a);h=d;d.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d};d.prototype.clone=function(){return new h({color:e.clone(this.color),outline:this.outline&&
this.outline.clone(),style:this.style})};var h;f([n.property()],d.prototype,"color",void 0);f([n.property()],d.prototype,"outline",void 0);f([n.enumeration.serializable()({esriSFS:"simple-fill"})],d.prototype,"type",void 0);f([n.property({type:c.apiValues,json:{read:c.read,write:c.write}})],d.prototype,"style",void 0);return d=h=f([n.subclass("esri.symbols.SimpleFillSymbol")],d)}(n.declared(d))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/kebabDictionary ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){var c=new g.default({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(a){function d(c,d,e,f){c=a.call(this,c)||this;c.color=new h([255,255,255,.25]);c.type="simple-marker";c.size=12;c.style="circle";c.outline=new b;return c}l(d,a);g=d;d.prototype.normalizeCtorArgs=function(a,b,c,d){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&
(f.size=e.toPt(b));c&&(f.outline=c);d&&(f.color=d);return f};d.prototype.writeColor=function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())};Object.defineProperty(d.prototype,"path",{set:function(a){this.style="path";this._set("path",a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new g({angle:this.angle,color:k.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};
var g;f([n.property()],d.prototype,"color",void 0);f([n.writer("color")],d.prototype,"writeColor",null);f([n.enumeration.serializable()({esriSMS:"simple-marker"})],d.prototype,"type",void 0);f([n.property()],d.prototype,"size",void 0);f([n.property({type:c.apiValues,json:{read:c.read,write:c.write}})],d.prototype,"style",void 0);f([n.property({type:String,json:{write:!0}})],d.prototype,"path",null);f([n.property({type:b,json:{default:null,write:!0}})],d.prototype,"outline",void 0);return d=g=f([n.subclass("esri.symbols.SimpleMarkerSymbol")],
d)}(n.declared(d))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(m,a,l,f,h,g,k,e,n,d){return function(a){function b(b,c,d){b=a.call(this,b)||this;b.backgroundColor=null;b.borderLineColor=null;b.borderLineSize=null;b.font=new n;b.horizontalAlignment="center";b.kerning=!0;b.haloColor=null;b.haloSize=
null;b.rightToLeft=null;b.rotated=!1;b.text="";b.type="text";b.verticalAlignment=null;b.xoffset=0;b.yoffset=0;b.angle=0;b.width=null;return b}l(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d};b.prototype.clone=function(){return new d({angle:this.angle,backgroundColor:g.clone(this.backgroundColor),borderLineColor:g.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:g.clone(this.color),
font:this.font&&this.font.clone(),haloColor:g.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var d;f([e.property({type:h,json:{write:!0}})],b.prototype,"backgroundColor",void 0);f([e.property({type:h,json:{write:!0}})],b.prototype,"borderLineColor",void 0);f([e.property({type:Number,
json:{write:!0}})],b.prototype,"borderLineSize",void 0);f([e.property({type:n,json:{write:!0}})],b.prototype,"font",void 0);f([e.property({type:["left","right","center","justify"],json:{write:!0}})],b.prototype,"horizontalAlignment",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"kerning",void 0);f([e.property({type:h,json:{write:!0}})],b.prototype,"haloColor",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"haloSize",void 0);f([e.property({type:Boolean,
json:{write:!0}})],b.prototype,"rightToLeft",void 0);f([e.property({type:Boolean,json:{write:!0}})],b.prototype,"rotated",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);f([e.property({type:String,readOnly:!0})],b.prototype,"type",void 0);f([e.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],b.prototype,"verticalAlignment",void 0);f([e.property({type:Number,cast:k.toPt,json:{write:!0}})],b.prototype,"xoffset",void 0);f([e.property({type:Number,
cast:k.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);f([e.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);f([e.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);return b=d=f([e.subclass("esri.symbols.TextSymbol")],b)}(e.declared(d))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){var q=g.getLogger("esri.symbols.WebStyleSymbol"),p=h.strict()({styleSymbolReference:"web-style"});return function(a){function b(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}l(b,a);g=b;b.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b])};b.prototype.clone=function(){return new g({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,
portal:this.portal})};b.prototype.fetchSymbol=function(){var a=this;return k.create(function(a){return m(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){q.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};var g;f([n.property({json:{write:!1}})],b.prototype,"color",void 0);f([n.property({type:String,json:{write:!0}})],b.prototype,"styleName",void 0);f([n.property({type:d,json:{write:!1}})],b.prototype,"portal",
void 0);f([n.property({type:String,json:{read:e.read,write:e.write}})],b.prototype,"styleUrl",void 0);f([n.property({type:c.default,json:{read:!1}})],b.prototype,"thumbnail",void 0);f([n.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f([n.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues,read:!1,write:p.write}})],b.prototype,"type",void 0);return b=g=f([n.subclass("esri.symbols.WebStyleSymbol")],b)}(n.declared(b))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../CIMSymbol ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z){function y(a,b,c){b=a?E[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new f("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function x(a,b,c){if(!a)return null;if(c&&"web-scene"===c.origin&&!a.isInstanceOf(u)&&!a.isInstanceOf(A)){var d=z.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new l("symbol:unsupported",
"Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:d.error}));return null}return a.write(b,c)}Object.defineProperty(a,"__esModule",{value:!0});var E={esriSMS:t,esriPMS:d,esriTS:w,esriSLS:p,esriSFS:q,esriPFS:n,PointSymbol3D:b,LineSymbol3D:k,PolygonSymbol3D:c,MeshSymbol3D:e,LabelSymbol3D:g,styleSymbolReference:A,CIMSymbolReference:h};a.read=y;a.writeTarget=function(a,b,c,d){(a=x(a,{},d))&&(b[c]=
a)};a.write=x;a.fromJSON=function(a,b){return y(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new C}c&&c.read(a,b);return c}})},"esri/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../../core/Logger ../../core/mathUtils ../Font ./IconSymbol3DLayerResource".split(" "),function(m,a,l,f,h,g,k,e,n,d){function b(a){var b=a.color?a.color.clone():new l([255,255,255]),
e,g,h,k;if(a instanceof f.PictureMarkerSymbol)a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new l([255,255,255])),e=new d.default({href:a.url}),g=a.width<=a.height?a.height:a.width,(c(a.xoffset)||c(a.yoffset))&&0<a.width&&0<a.height&&(k={x:-(a.xoffset||0)/a.width,y:(a.yoffset||0)/a.height});else{e=d.default;g=a.style;var n=q[g];n?g=n:(p.warn(g+' cannot be mapped to Icon symbol. Fallback to "circle"'),g="circle");e=new e({primitive:g});g=a.size;(c(a.xoffset)||c(a.yoffset))&&0<a.size&&(k=
{x:-(a.xoffset||0)/g,y:(a.yoffset||0)/g});a.outline&&0<a.outline.width&&(h={size:a.outline.width,color:a.outline.color?a.outline.color.clone():[255,255,255]})}return new f.PointSymbol3D(new f.IconSymbol3DLayer({size:g,resource:e,material:{color:b},outline:h,anchor:k?"relative":void 0,anchorPosition:k}))}function c(a){return e.isFinite(a)&&0!==a}Object.defineProperty(a,"__esModule",{value:!0});var q={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null},
p=k.getLogger("esri.symbols.support.symbolConversion");a.to3D=function(a,c,d,e){void 0===c&&(c=!1);void 0===d&&(d=!1);void 0===e&&(e=!0);if(!a)return{symbol:null};if(f.isSymbol3D(a)||a instanceof f.WebStyleSymbol)e=a.clone();else if(a instanceof f.SimpleLineSymbol)e=new f.LineSymbol3D(new f.LineSymbol3DLayer({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof f.SimpleMarkerSymbol)e=b(a);else if(a instanceof f.PictureMarkerSymbol)e=b(a);else if(a instanceof
f.SimpleFillSymbol)e=new f.FillSymbol3DLayer({material:{color:a.color?a.color.clone():[255,255,255,0]}}),a.outline&&(e.outline={size:a.outline.width||0,color:a.outline.color?a.outline.color.clone():[255,255,255]}),e=new f.PolygonSymbol3D(e);else if(a instanceof f.TextSymbol){var p;p=a.haloColor;var k=a.haloSize;p=p&&0<k?{color:g.clone(p),size:k}:null;k=a.font?a.font.clone():new n;e=new (e?f.LabelSymbol3D:f.PointSymbol3D)(new f.TextSymbol3DLayer({size:k.size,font:k,halo:p,material:{color:a.color.clone()},
text:a.text}))}else return{error:new h("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};c&&(e.id=a.id);if(d&&f.isSymbol3D(e))for(a=0;a<e.symbolLayers.length;++a)e.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:e}}})},"esri/core/mathUtils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};
a.isNaN=Number.isNaN||function(a){return a!==a};a.nextHighestPowerOfTwo=function(a){--a;for(var f=1;32>f;f<<=1)a|=a>>f;return a+1}})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require","exports","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint",
"esriGeometryPolyline","esriGeometryPolygon"]}a.prototype.createFeatureResult=function(){return new f.default};a.prototype.prepareFeatures=function(){};a.prototype.finishFeatureResult=function(){};a.prototype.addFeature=function(a,e){a.features.push(e)};a.prototype.createFeature=function(){return new l.default};a.prototype.createSpatialReference=function(){return{wkid:0}};a.prototype.createGeometry=function(){return new h.default};a.prototype.addField=function(a,e){a.fields.push(e)};a.prototype.addCoordinate=
function(a,e){a.coords.push(e)};a.prototype.addCoordinatePoint=function(a,e){a.coords.push(e)};a.prototype.addLength=function(a,e){a.lengths.push(e)};a.prototype.createPointGeometry=function(){return new h.default};return a}();a.Context=m})},"esri/tasks/operations/PBFWorker":function(){define("require exports ../../core/tsSupport/extendsHelper ../../Graphic ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../../geometry/SpatialReference ./pbfQueryUtils module".split(" "),function(m,
a,l,f,h,g,k,e,n,d){Object.defineProperty(a,"__esModule",{value:!0});var b=function(){function a(){}a.prototype._parseFeatureQuery=function(a){var b=n.parsePBFFeatureQuery(a.buffer,a.options),c;a.options&&"dehydrated"===a.options.type&&(c=b.spatialReference.toJSON(),b.spatialReference=null);return h.resolve({featureSet:b,sr:c})};return a}(),c=function(a){function b(){var b=a.call(this)||this;b._thread=void 0;k.open(g.getAbsMid("./PBFWorker",m,d),{strategy:"dedicated"}).then(function(a){void 0===b._thread?
b._thread=a:a.close()});return b}l(b,a);b.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};b.prototype.parseFeatureQuery=function(a,b){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:a,options:b},{transferList:[a]}).then(function(a){var b=a.featureSet;if(a.sr){var c=e.fromJSON(a.sr);b.spatialReference=c}for(var c=b.spatialReference,d=0,b=b.features;d<b.length;d++){var g=b[d];g.uid=f.generateUID();g.geometry&&(g.geometry.spatialReference=
c)}return a.featureSet}):h.resolve(n.parsePBFFeatureQuery(a,b)):h.resolve(null)};return b}(b);a.PBFWorker=c;a.default=function(){return new b}})},"esri/core/requireUtils":function(){define(["require","exports","./promiseUtils"],function(m,a,l){function f(a,g){return Array.isArray(g)?l.create(function(f){a(g,function(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];f(a)})}):f(a,[g]).then(function(a){return a[0]})}Object.defineProperty(a,"__esModule",{value:!0});a.when=f;a.getAbsMid=function(a,
f,k){return f.toAbsMid?f.toAbsMid(a):k.id.replace(/\/[^\/]*$/gi,"/")+a}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});for(var f in l)a.hasOwnProperty(f)||(a[f]=l[f])})},"esri/core/workers/workers":function(){define("require exports ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(m,a,l,f,h,g,k,e){function n(){if(p)return p;for(var a=d+b,c=[],f=function(a){var b=
e.create(a).then(function(b){return q[a]=b});c.push(b)},g=0;g<a;g++)f(g);return p=h.all(c).then(function(){})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=g;a.RemoteClient=k;(g=f("host-browser")?navigator.hardwareConcurrency:0)||(g=f("safari")&&f("mac")||f("trident")?8:2);var d=f("esri-workers-debug")?1:Math.max(1,Math.ceil(g/2)),b=f("esri-workers-debug")?1:Math.max(1,Math.floor(g/2)),c=0,q=[];a.initialize=function(){n()};a.openWithPorts=function(b,c){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,
c,{})}))};a.open=function(e,f){void 0===f&&(f={});if("string"!==typeof e)return h.reject(new l("workers:undefined-module","modulePath is missing"));var g=f.strategy||"distributed";if("local"===g){var p=f.client;return h.create(function(b){return m([e],function(c){p=p||c;b(a.RemoteClient.connect(c))})}).then(function(b){return new a.Connection([new a.RemoteClient(b,p,f)])})}return n().then(function(){if("dedicated"===g){var p=d+c++;c%=b;return q[p].open(e).then(function(b){return new a.Connection([new a.RemoteClient(b,
f.client,f)])})}return h.all(q.map(function(a){return a.open(e)})).then(function(b){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,f.client,f)}))})})};a.terminate=function(){p&&(p.cancel(),p=null);for(var a=0;a<q.length;a++)q[a]&&q[a].terminate();q.length=0};var p=null})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils"],function(m,a,l,f){var h=l.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=
0;this._clients=a}a.prototype.broadcast=function(a,e,f){for(var d=[],b=0,c=this._clients;b<c.length;b++)d.push(c[b].invoke(a,e,f));return d};a.prototype.close=function(){for(var a=0,e=this._clients;a<e.length;a++)e[a].close();this._clients=[]};a.prototype.getAvailableClient=function(){var a;this._clients.some(function(e){return e.isBusy()?!1:(a=e,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,e,g){var d=null;
Array.isArray(g)?(h.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),d={transferList:g}):d=g;return this._clients&&this._clients.length?this.getAvailableClient().invoke(a,e,d):f.reject(Error("Connection closed"))};a.prototype.openPorts=function(){return f.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(m,a,l,f,h,g,k,e){var n=h.getLogger("esri.core.workers"),d=k.MessageType.ABORT,b=k.MessageType.INVOKE,c=k.MessageType.OPEN,q=k.MessageType.OPENED,p=k.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();n.error(a)})}a.create=function(b){return e.createWorker().then(function(c){return new a(c,b)})};a.prototype.terminate=
function(){this.worker.terminate()};a.prototype.open=function(a){var b=this,e=k.newJobId(),f=function(){b._outJobs["delete"](e);b._post({type:d,jobId:e})};return g.create(function(d,g){b._outJobs.set(e,{resolve:d,reject:g,cancel:f});b._post({type:c,jobId:e,modulePath:a})},f)};a.prototype._onMessage=function(a){if(a=k.receiveMessage(a))switch(a.type){case q:case p:this._onResponse(a);break;case d:this._onCancel(a);break;case b:this._onInvoke(a)}};a.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&
a.cancel()};a.prototype._onInvoke=function(a){var b=this,c=a.methodName,d=a.jobId;a=a.data;var e=this._inJobs,f=l.workerMessages[c],h;try{if("function"!==typeof f)throw new TypeError(c+" is not a function");h=f.call(null,a)}catch(E){this._post({type:p,jobId:d,error:k.toInvokeError(E)});return}g.isThenable(h)?(e.set(d,h),h.then(function(a){e["delete"](d);b._post({type:p,jobId:d},a)}).catch(function(a){e["delete"](d);a||(a={message:"Error encountered at method"+c});a.dojoType&&"cancel"===a.dojoType||
b._post({type:p,jobId:d,error:k.toInvokeError(a)})})):this._post({type:p,jobId:d},h)};a.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(f.fromJSON(JSON.parse(c))):d.resolve(a))};a.prototype._post=function(a,b,c){return k.postMessage(this.worker,a,b,c)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){function c(a){return e.create(function(c){function e(b){if(b=d.receiveMessage(b))switch(b.type){case u:b=a;var q=h.workers.loaderUrl||n.DEFAULT_LOADER_URL,m;null!=h["default"]?(m=l({},h),delete m["default"],m=JSON.parse(JSON.stringify(m))):m=JSON.parse(JSON.stringify(h));var w=h.workers.loaderConfig,w=n.default({baseUrl:w.baseUrl,locale:f.locale,has:l({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":g("esri-secure-context"),"esri-workers-arraybuffer-transfer":g("esri-workers-arraybuffer-transfer"),
"events-keypress-typed":0,"host-webworker":1},w.has),map:l({},w.map),paths:l({},w.paths),packages:w.packages||[]});b.postMessage({type:t,configure:{esriConfig:m,loaderUrl:q,loaderConfig:w}});break;case p:a.removeEventListener("message",e),a.removeEventListener("error",k),c(a)}}function k(c){c.preventDefault();a.removeEventListener("message",e);a.removeEventListener("error",k);q.warn("Failed to create Worker. Fallback to execute module in main thread",c);a=new b;a.addEventListener("message",e);a.addEventListener("error",
k)}a.addEventListener("message",e);a.addEventListener("error",k)})}Object.defineProperty(a,"__esModule",{value:!0});var q=k.getLogger("esri.core.workers");g.add("esri-workers-arraybuffer-transfer",!g("safari")||12<=g("safari"));var p=d.MessageType.CONFIGURED,t=d.MessageType.CONFIGURE,u=d.MessageType.HANDSHAKE,w;try{w=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var CANCEL\x3d7;function mapDelete(map,key){map["delete"](key)}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abortHandler\x3dfunction(){if(!outgoing.has(jobId)){return}self.postMessage({type:CANCEL,methodName:methodName,jobId:jobId});mapDelete(outgoing,jobId);if(!deferred.isCanceled()){deferred.cancel()}if(signal){signal.removeEventListener("abort",abortHandler)}};if(signal){signal.addEventListener("abort",abortHandler)}var deferred\x3dnew Deferred(abortHandler);outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,methodName:methodName,jobId:jobId,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(A){}a.createWorker=function(){if(!g("esri-workers"))return c(new b);var a;if(w)try{a=new Worker(w)}catch(C){q.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new b}else q.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new b;return c(a)}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","../has","../urlUtils"],function(m,a,l,f,h){Object.defineProperty(a,
"__esModule",{value:!0});f=f("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=h.makeAbsolute(h.removeQueryParameters(m.toUrl(f)));a.DEFAULT_CONFIG={baseUrl:function(){var a=h.removeQueryParameters(m.toUrl("dojo/x.js"));return h.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},
{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(f){var g={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:l({},f.has),map:l({},f.map),packages:f.packages&&f.packages.concat()||
[],paths:l({},f.paths)};f.hasOwnProperty("async")||(g.async=!0);f.hasOwnProperty("isDebug")||(g.isDebug=!1);f.baseUrl||(g.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var b=g.packages,d=0;d<b.length;d++)if(b[d].name===a.name)break a;a=l({},a);d=h.removeQueryParameters(m.toUrl(a.name+"/x.js"));d=d.slice(0,d.length-5);a.location=h.makeAbsolute(d);b.push(a)}});f=g.map=g.map||{};for(var e=0,n=Object.keys(a.DEFAULT_CONFIG.map);e<n.length;e++){var d=n[e];f[d]||
(f[d]=a.DEFAULT_CONFIG.map[d])}return g}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","../global","../has","./utils"],function(m,a,l,f,h){var g=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),k=l.MutationObserver||l.WebKitMutationObserver,e=function(){var a;
if(l.process&&l.process.nextTick)a=function(a){l.process.nextTick(a)};else if(l.Promise)a=function(a){l.Promise.resolve().then(a)};else if(k){var b=[],c=document.createElement("div");(new k(function(){for(;0<b.length;)b.shift()()})).observe(c,{attributes:!0});a=function(a){b.push(a);c.setAttribute("queueStatus","1")}}return a}(),n=function(){var a=l.MessageEvent;try{new a("message",{data:null})}catch(b){return function(a,b){void 0===b&&(b={});var c=b.data,d=b.bubbles,d=void 0===d?!1:d;b=b.cancelable;
b=void 0===b?!1:b;var e=document.createEvent("Event");e.initEvent(a,d,b);e.data=c;return e}}return function(b,c){return new a(b,c)}}();return function(){function a(){this._dispatcher=new g;this._isInitialized=!1;this._workerPostMessage({type:h.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=
a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,c){var b=this;e(function(){b._workerMessageHandler(n("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};
a.prototype.addEventListener=function(a,c,d){this._dispatcher.addEventListener(a,c,d)};a.prototype.removeEventListener=function(a,c,d){this._dispatcher.removeEventListener(a,c,d)};a.prototype._workerPostMessage=function(a,c){var b=this;e(function(){b.dispatchEvent(n("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this;if(a=h.receiveMessage(a)){var d=a.jobId;switch(a.type){case h.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:h.MessageType.CONFIGURED});
break;case h.MessageType.OPEN:m(["esri/core/workers/RemoteClient",a.modulePath],function(a,c){a=a.connect(c);b._workerPostMessage({type:h.MessageType.OPENED,jobId:d,data:a})})}}};return a}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(m,a){function l(a){var f={},g;for(g in a)if("declaredClass"!==g){var k=a[g];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){f[g]=[];for(var e=0;e<k.length;e++)f[g][e]=l(k[e])}else"object"===typeof k?k.toJSON&&(f[g]=JSON.stringify(k)):
f[g]=k}return f}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=l})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../geometry ../../symbols ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../symbols/support/jsonUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u){var w=new d.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A=new d.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function d(b){b=a.call(this,b)||this;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;
b.outFields=null;b.outSpatialReference=null;b.outStatistics=null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnCentroid=!1;b.returnDistinctValues=!1;b.returnExceededLimitFeatures=!0;b.returnGeometry=!1;b.returnQueryGeometry=!1;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units=null;b.where=null;return b}
l(d,a);n=d;d.prototype.castDatumTransformation=function(a){return"number"===typeof a||"object"===typeof a?a:null};d.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};d.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};d.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=
this.num||10;b.where="1\x3d1"};d.prototype.writeWhere=function(a,b,c){b.where=a||"1\x3d1"};d.prototype.clone=function(){return new n(b.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,
maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,
returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var n;d.MAX_MAX_RECORD_COUNT_FACTOR=5;f([c.property({json:{write:!0}})],d.prototype,"datumTransformation",
void 0);f([c.cast("datumTransformation")],d.prototype,"castDatumTransformation",null);f([c.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],d.prototype,"distance",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"gdbVersion",void 0);f([c.property({types:g.geometryTypes,json:{read:q.fromJSON,write:!0}})],d.prototype,"geometry",void 0);f([c.property({type:Number,json:{write:!0}})],d.prototype,"geometryPrecision",void 0);f([c.property({type:[String],
json:{write:!0}})],d.prototype,"groupByFieldsForStatistics",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"having",void 0);f([c.property({type:Date})],d.prototype,"historicMoment",void 0);f([c.writer("historicMoment")],d.prototype,"writeHistoricMoment",null);f([c.property({type:Number,json:{write:!0}})],d.prototype,"maxAllowableOffset",void 0);f([c.property({type:Number,cast:function(a){return 1>a?1:a>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:a},json:{write:{overridePolicy:function(a){return{enabled:1<
a}}}}})],d.prototype,"maxRecordCountFactor",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"multipatchOption",void 0);f([c.property({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0);f([c.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);f([c.property({type:[String],json:{write:!0}})],d.prototype,"orderByFields",void 0);f([c.property({type:[String],json:{write:!0}})],d.prototype,"outFields",void 0);f([c.property({type:h.SpatialReference,
json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0);f([c.property({type:[u],json:{write:!0}})],d.prototype,"outStatistics",void 0);f([c.property({json:{write:!0}})],d.prototype,"parameterValues",void 0);f([c.writer("parameterValues")],d.prototype,"writeParameterValues",null);f([c.property({types:k.symbolTypes,json:{read:p.read,write:!0}})],d.prototype,"pixelSize",void 0);f([c.property({type:t.default,json:{write:!0}})],d.prototype,"quantizationParameters",
void 0);f([c.property({type:[Object],json:{write:!0}})],d.prototype,"rangeValues",void 0);f([c.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===this.spatialRelationship}}}}})],d.prototype,"relationParameter",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"resultType",void 0);f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnCentroid",
void 0);f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnDistinctValues",void 0);f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],d.prototype,"returnExceededLimitFeatures",void 0);f([c.property({type:Boolean,json:{write:!0}})],d.prototype,"returnGeometry",void 0);f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnQueryGeometry",void 0);
f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnM",void 0);f([c.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],d.prototype,"returnZ",void 0);f([c.property({json:{write:!0}})],d.prototype,"source",void 0);f([c.property({type:String,json:{read:{source:"spatialRel",reader:w.read},write:{target:"spatialRel",writer:w.write}}})],d.prototype,"spatialRelationship",void 0);f([c.property({type:Number,json:{read:{source:"resultOffset"}}})],
d.prototype,"start",void 0);f([c.writer("start"),c.writer("num")],d.prototype,"writeStart",null);f([c.property({type:String,json:{write:!0}})],d.prototype,"sqlFormat",void 0);f([c.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);f([c.property({type:e,json:{write:!0}})],d.prototype,"timeExtent",void 0);f([c.property({type:String,json:{read:A.read,write:{writer:A.write,overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],d.prototype,"units",void 0);f([c.property({type:String,
json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],d.prototype,"where",void 0);f([c.writer("where")],d.prototype,"writeWhere",null);return d=n=f([c.subclass("esri.tasks.support.Query")],d)}(c.declared(n))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){var k={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",
multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(a){function e(b){b=a.call(this)||this;b.end=null;b.start=null;return b}l(e,a);d=e;e.prototype.readEnd=function(a,c){return null!=c.end?new Date(c.end):null};e.prototype.writeEnd=function(a,c,d){c.end=a?a.getTime():null};e.prototype.readStart=function(a,c){return null!=c.start?new Date(c.start):null};e.prototype.writeStart=function(a,c,d){c.start=a?a.getTime():null};e.prototype.clone=
function(){return new d({end:this.end,start:this.start})};e.prototype.intersection=function(a){if(!a)return null;var b=this.start?this.start.getTime():-Infinity,e=this.end?this.end.getTime():Infinity,f=a.start?a.start.getTime():-Infinity;a=a.end?a.end.getTime():Infinity;var g,h;f>=b&&f<=e?g=f:b>=f&&b<=a&&(g=b);e>=f&&e<=a?h=e:a>=b&&a<=e&&(h=a);return isNaN(g)||isNaN(h)?null:(b=new d,b.start=-Infinity===g?null:new Date(g),b.end=Infinity===h?null:new Date(h),b)};e.prototype.offset=function(a,c){var b=
new d,e=this.start,f=this.end;e&&(b.start=this._offsetDate(e,a,c));f&&(b.end=this._offsetDate(f,a,c));return b};e.prototype._offsetDate=function(a,c,d){a=new Date(a.getTime());c&&d&&(d=k[d],a[d.setter](a[d.getter]()+c*d.multiplier));return a};var d;f([g.property({type:Date,json:{write:{allowNull:!0}}})],e.prototype,"end",void 0);f([g.reader("end")],e.prototype,"readEnd",null);f([g.writer("end")],e.prototype,"writeEnd",null);f([g.property({type:Date,json:{write:{allowNull:!0}}})],e.prototype,"start",
void 0);f([g.reader("start")],e.prototype,"readStart",null);f([g.writer("start")],e.prototype,"writeStart",null);return e=d=f([g.subclass("esri.TimeExtent")],e)}(g.declared(h))})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(d){d=a.call(this)||this;d.maxPointCount=void 0;
d.maxRecordCount=void 0;d.maxVertexCount=void 0;d.onStatisticField=null;d.outStatisticFieldName=null;d.statisticType=null;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};var h;f([g.property({type:Number,json:{write:!0}})],e.prototype,"maxPointCount",void 0);f([g.property({type:Number,
json:{write:!0}})],e.prototype,"maxRecordCount",void 0);f([g.property({type:Number,json:{write:!0}})],e.prototype,"maxVertexCount",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"onStatisticField",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"outStatisticFieldName",void 0);f([g.property({type:String,json:{write:!0}})],e.prototype,"statisticType",void 0);return e=h=f([g.subclass("esri.tasks.support.StatisticDefinition")],e)}(g.declared(h))})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Error ../../../../core/Logger ../../../../core/screenUtils ../../../../geometry/support/quantizationUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties ../../../3d/support/mathUtils ../../../webgl/Texture".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){function u(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function w(a){switch(a){case c.WGLGeometryType.MARKER:return F;case c.WGLGeometryType.FILL:return D;case c.WGLGeometryType.LINE:return G;case c.WGLGeometryType.TEXT:return H;case c.WGLGeometryType.LABEL:return P}return null}function A(a){switch(a%4){case 0:case 2:return 4;case 1:case 3:return 1}}function C(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function z(a){return"string"===typeof a}function y(a){var b={};switch(a){case "esriGeometryPoint":return function(a,c,d,e){return n.hydratePoint(c,b,a,d,e)};case "esriGeometryPolygon":return function(a,c,d,e){return n.hydratePolygon(c,b,a,d,e)};case "esriGeometryPolyline":return function(a,c,d,e){return n.hydratePolyline(c,
b,a,d,e)};case "esriGeometryMultipoint":return function(a,c,d,e){return n.hydrateMultipoint(c,b,a,d,e)};default:return B.error(new g("mapview-arcade","Unable to handle geometryType: "+a)),function(a,b,c,d){return a}}}function x(a){var b={},c=function(c){var d=0;b[c]=a[c].map(function(a){var b=l({},a,{normalized:a.normalized||!1,divisor:a.divisor||0,offset:d,stride:0}),c=d,e=a.count;a:{switch(a.type){case 5120:case 5121:a=1;break a;case 5122:case 5123:a=2;break a;case 5126:case 5124:case 5125:a=4;
break a}a=void 0}d=c+e*a;return b});b[c].forEach(function(a){return a.stride=d})},d;for(d in a)c(d);return b}Object.defineProperty(a,"__esModule",{value:!0});var E,B=k.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV="per_instance_vv";a.C_VBO_VISIBILITY="visibility";a.C_VBO_VISIBILITY_RANGE="visibilityRange";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,
strideInBytes:1,divisor:0}];a.C_ICON_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF_DD=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,
strideInBytes:1,divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LINE_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,
strideInBytes:1,divisor:0}];a.C_LABEL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:a.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];a.C_ICON_STRIDE_SPEC=u(a.C_ICON_VERTEX_DEF);a.C_ICON_STRIDE_SPEC_VV=u(a.C_ICON_VERTEX_DEF_VV);a.C_FILL_STRIDE_SPEC=u(a.C_FILL_VERTEX_DEF);a.C_FILL_STRIDE_SPEC_VV=u(a.C_FILL_VERTEX_DEF_VV);a.C_FILL_STRIDE_SPEC_DD=u(a.C_FILL_VERTEX_DEF_DD);a.C_LINE_STRIDE_SPEC=u(a.C_LINE_VERTEX_DEF);a.C_LINE_STRIDE_SPEC_VV=
u(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_STRIDE_SPEC=u(a.C_TEXT_VERTEX_DEF);a.C_TEXT_STRIDE_SPEC_VV=u(a.C_TEXT_VERTEX_DEF_VV);a.C_LABEL_STRIDE_SPEC=u(a.C_LABEL_VERTEX_DEF);a.getStrides=function(b,d,e){switch(b){case c.WGLGeometryType.MARKER:return d?a.C_ICON_STRIDE_SPEC_VV:a.C_ICON_STRIDE_SPEC;case c.WGLGeometryType.FILL:return e?a.C_FILL_STRIDE_SPEC_DD:d?a.C_FILL_STRIDE_SPEC_VV:a.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return d?a.C_LINE_STRIDE_SPEC_VV:a.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return d?
a.C_TEXT_STRIDE_SPEC_VV:a.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return a.C_LABEL_STRIDE_SPEC}return null};var F=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],D=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],G=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],H=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],P=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY,a.C_VBO_VISIBILITY_RANGE];a.getNamedBuffers=w;a.strideToPackingFactor=A;a.allocateTypedArrayBuffer=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(Math.floor(a*b/4));case 1:case 3:return new Uint8Array(a*
b)}};a.allocateTypedArrayBufferwithData=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(a);case 1:case 3:return new Uint8Array(a)}};a.normalizeSymbolType=C;a.isMarkerSymbol=function(a){if(a=C(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}};a.isFillSymbol=function(a){if(a=C(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}};a.isLineSymbol=function(a){if(a=C(a.type)){switch(a){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}};a.isPictureSymbol=function(a){if(a=C(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};a.isTextSymbol=function(a){if(a=C(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}};a.getTextProperties=function(a){return q.TextProperties.pool.acquire(a.color?b.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?b.copyAndPremultiply(a.haloColor):[255,255,255,255],e.pt2px(a.haloSize),
e.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};a.isDefined=function(a){return null!==a&&void 0!==a};a.isNumber=function(a){return"number"===typeof a};a.isString=z;a.isStringOrNull=function(a){return null==a||z(a)};a.lerp=function(a,b,c){return a+(b-a)*c};m=function(){function a(){this._arr=[];this._push=this._push.bind(this)}
a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.KeysGetter=m;m=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.ValuesGetter=m;a.getCapType=function(a,b){switch(a){case "butt":return c.CapType.BUTT;case "round":return b?
c.CapType.SQUARE:c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return B.error(new g("mapview-invalid-type","Cap type "+a+" is not a valid option. Defaulting to round")),c.CapType.ROUND}};a.getJoinType=function(a){switch(a){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return B.error(new g("mapview-invalid-type","Join type "+a+" is not a valid option. Defaulting to round")),c.JoinType.ROUND}};a.getVVType=function(a){switch(a){case "opacity":return c.VVType.OPACITY;
case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;case "size":return c.VVType.SIZE;default:return B.error("Cannot interpret unknown vv: "+a),null}};a.createHydrateFactory=y;a.getTransformParams=function(a){return{transform:a.transform,hasZ:a.hasZ,hasM:a.hasM}};a.createArcadeFunction=function(a,b,c){var e=b.fields,g=b.spatialReference,p=b.hasGeometryExpr;b=b.geometryType;var k=d.createFunction(a),n=new h,l=new f({viewingMode:null,scale:null}),q={},m={vars:{$feature:n,$view:null},
spatialReference:g},t={fields:e},u=y(b);return function(a,b,e){p?(b=u(a.geometry,b.transform,b.hasZ,b.hasM),b.spatialReference=g,n.repurposeFromGraphicLikeObject(b,a.attributes,t)):n.repurposeFromGraphicLikeObject(a.geometry,a.attributes,t);e?(m.vars.$view=l,l.attributes.viewingMode=e.viewingMode,l.attributes.scale=e.scale):m.vars.$view=q;a=d.executeFunction(k,m);return c?c(a):a}};a.copyMeshData=function(a,b,c,d,e,f,g){for(var h in f)for(var p=f[h].stride,k=A(p),n=f[h].data,l=c[h].data,q=p*e.vertexCount/
k,m=p*a/k,k=p*e.vertexFrom/k,p=0;p<q;++p)l[p+m]=n[p+k];c=e.indexCount;for(p=0;p<c;++p)d[p+b]=g[p+e.indexFrom]-e.vertexFrom+a};a.C_VBO_INFO=(E={},E[a.C_VBO_GEOMETRY]=35044,E[a.C_VBO_VISIBILITY]=35044,E[a.C_VBO_VISIBILITY_RANGE]=35048,E);a.createGeometryData=function(a,b){for(var c=[],d=0;5>d;++d){for(var e={},f=0,g=w(d);f<g.length;f++){var h=g[f];e[h]={data:b(d,h)}}c.push({data:a(d),buffers:e})}return c};a.resampleHermite=function(a,b,c,d,e,f,g){void 0===g&&(g=!0);var h=b/e;c/=f;for(var p=Math.ceil(h/
2),k=Math.ceil(c/2),n=0;n<f;n++)for(var l=0;l<e;l++){for(var q=4*(l+(g?f-n-1:n)*e),m=0,t=0,u=0,w=0,z=0,y=0,x=0,C=(n+.5)*c,D=Math.floor(n*c);D<(n+1)*c;D++)for(var A=Math.abs(C-(D+.5))/k,O=(l+.5)*h,A=A*A,J=Math.floor(l*h);J<(l+1)*h;J++){var H=Math.abs(O-(J+.5))/p,m=Math.sqrt(A+H*H);-1<=m&&1>=m&&(m=2*m*m*m-3*m*m+1,0<m&&(H=4*(J+D*b),x+=m*a[H+3],u+=m,255>a[H+3]&&(m=m*a[H+3]/250),w+=m*a[H],z+=m*a[H+1],y+=m*a[H+2],t+=m))}d[q]=w/t;d[q+1]=z/t;d[q+2]=y/t;d[q+3]=x/u}};a.createTextureFromTexelData=function(a,
b){var c,d;p.isPowerOfTwo(b.width)&&p.isPowerOfTwo(b.height)?(c=!0,d=9987):(c=!1,d=9729);return new t(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:c,samplingMode:d,wrapMode:33071,flipped:!0},b)};a.geometryToMappedGeometry=function(a){return{vertexFrom:void 0,vertexTo:void 0,geometry:a}};var O=new Map;a.createProgramDescriptor=function(a,b){if(!O.has(a)){var c=x(b),d={},e;for(e in c){var f=c[e];d[e]=f.length?f[0].stride:0}e={};for(var g in b)for(var f=0,h=b[g];f<h.length;f++){var p=
h[f];e[p.name]=p.location}O.set(a,{strides:d,bufferLayouts:c,attributes:e})}return O.get(a)}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(m,a,l){function f(a,e){Array.isArray(e)?(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3]):(a[0]=e.r,a[1]=e.g,a[2]=e.b,a[3]=e.a);return a}function h(a,e,f){void 0===e&&(e=0);void 0===f&&(f=!1);var d=a[e+3];a[e+0]*=d;a[e+1]*=d;a[e+2]*=d;f||(a[e+3]*=255);return a}Object.defineProperty(a,"__esModule",{value:!0});a.white=
[255,255,255,1];var g=[0,0,0,0];a.premultiplyAlpha=h;a.copyAndPremultiply=function(a){return h(f([],a))};a.premultiplyAlphaUint32=function(a){h(f(g,a));return l.i8888to32(g[0],g[1],g[2],g[3])};a.premultiplyAlphaRGBA=function(a){var e=a.a;return l.i8888to32(a.r*e,a.g*e,a.b*e,255*e)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports","../../../../core/Logger"],function(m,a,l){function f(a,f,d){f=Math.max(Math.min(a,d),f);f!==a&&k.warn("Value of "+a+" exceeded rendering limitations and was clamped to "+
f);return f}Object.defineProperty(a,"__esModule",{value:!0});var h=new Float32Array(1),g=new Uint32Array(h.buffer),k=l.getLogger("esri.views.2d.engine.webgl.number");a.i8=function(a){return f(a,-128,127)};a.i16=function(a){return f(a,-32768,32767)};a.i32=function(a){return f(a,-2147483648,2147483647)};a.u8=function(a){return f(a,0,255)};a.u16=function(a){return f(a,0,65535)};a.u32=function(a){return f(a,0,4294967295)};a.nextHighestPowerOfTwo=function(a){var e=a;e--;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;
e|=e>>16;e++;var d=e>>1;return e-a>a-d?d:e};a.toUint32=function(a){h[0]=a;return g[0]};a.toFloat32=function(a){g[0]=a;return h[0]};a.i1616to32=function(a,f){return 65535&a|f<<16};a.i8888to32=function(a,f,d,b){return a&255|(f&255)<<8|(d&255)<<16|b<<24};a.i8816to32=function(a,f,d){return a&255|(f&255)<<8|d<<16};a.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.FILL=
0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||(a.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";
a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(a.VVType||(a.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||
(a.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||(a.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]="SQUARE"})(a.CapType||(a.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=
3]="ROUND"})(a.JoinType||(a.JoinType={}));(function(a){a[a.SCREEN=0]="SCREEN";a[a.MAP=1]="MAP"})(a.Alignment||(a.Alignment={}));(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(a.MosaicType||(a.MosaicType={}))})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=
12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=function(a,f,k,e,n,d,b,c,l){this.color=a;this.haloColor=f;this.haloSize=k;this.size=e;this.angle=n;this.offsetX=d;this.offsetY=b;this.hAnchor=c;this.vAnchor=l};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=
new l(a);return a}();a.TextProperties=m})},"esri/views/webgl/Texture":function(){define(["require","exports","../../core/has"],function(m,a,l){return function(){function a(f,g,k){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=f;this._desc={pixelFormat:g.pixelFormat,internalFormat:g.internalFormat,dataType:g.dataType,target:g.target?g.target:3553,samplingMode:g.samplingMode?g.samplingMode:9729,wrapMode:g.wrapMode?
g.wrapMode:10497,maxAnisotropy:g.maxAnisotropy,flipped:void 0!==g.flipped?g.flipped:!1,hasMipmap:void 0!==g.hasMipmap?g.hasMipmap:!1,unpackAlignment:g.unpackAlignment?g.unpackAlignment:4,width:g.width,height:g.height,preMultiplyAlpha:void 0!==g.preMultiplyAlpha?g.preMultiplyAlpha:!1,textureCoordinateScaleFactor:g.textureCoordinateScaleFactor||null};this._id=++a._nextId;this.setData(k)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var f=this._context.gl;this._boundToUnits.forEach(function(f){a._context.bindTexture(null,f)});f.deleteTexture(this._glName);this._glName=null}this._context=null}};a.prototype.resize=function(a,f){var g=this._desc;if(g.width!==a||g.height!==
f)g.width=a,g.height=f,this.setData(null)};a.prototype.setData=function(f){var g=this._context.gl;this._glName||(this._glName=g.createTexture());void 0===f&&(f=null);null===f&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._desc;a._validateTexture(e);g.pixelStorei(g.UNPACK_ALIGNMENT,e.unpackAlignment);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
e.preMultiplyAlpha?1:0);var n=e.pixelFormat,d=e.internalFormat?e.internalFormat:n;if(f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement)e.width&&e.height&&console.assert(f.width===e.width&&f.height===e.height),g.texImage2D(g.TEXTURE_2D,0,d,n,e.dataType,f),e.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=f.width),void 0===this._desc.height&&(this._desc.height=f.height);else{null!=e.width&&null!=e.height||
console.error("Width and height must be specified!");g.DEPTH24_STENCIL8&&d===g.DEPTH_STENCIL&&(d=g.DEPTH24_STENCIL8);var b=e.width,c=e.height;if(null!=f&&"type"in f&&"compressed"===f.type){n=Math.round(Math.log(Math.max(b,c))/Math.LN2)+1;e.hasMipmap=e.hasMipmap&&n===f.levels.length;for(var l=0;;++l){g.compressedTexImage2D(g.TEXTURE_2D,l,d,b,c,0,f.levels[Math.min(l,f.levels.length-1)]);if(1===b&&1===c||!e.hasMipmap)break;b=Math.max(1,b>>1);c=Math.max(1,c>>1)}}else if(f)g.texImage2D(g.TEXTURE_2D,0,
d,b,c,0,n,e.dataType,f),e.hasMipmap&&this.generateMipmap();else for(l=0;;++l){g.texImage2D(g.TEXTURE_2D,l,d,b,c,0,n,e.dataType,null);if(1===b&&1===c||!e.hasMipmap)break;b=Math.max(1,b>>1);c=Math.max(1,c>>1)}}a._applySamplingMode(g,this._desc);a._applyWrapMode(g,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};a.prototype.updateData=function(a,f,k,e,n,d){d||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
var b=this._context.gl,c=this._desc,g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>f||0>k||e>c.width||n>c.height||f+e>c.width||k+n>c.height)&&console.error("An attempt to update out of bounds of the texture!");d instanceof ImageData||d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement?(console.assert(d.width===e&&d.height===n),b.texSubImage2D(b.TEXTURE_2D,a,f,k,c.pixelFormat,c.dataType,d)):b.texSubImage2D(b.TEXTURE_2D,a,f,k,e,n,c.pixelFormat,
c.dataType,d);this._context.bindTexture(g,0)};a.prototype.generateMipmap=function(){var f=this._desc;f.hasMipmap||(f.hasMipmap=!0,a._validateTexture(f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=!0,f.samplingMode=9984);f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._context.gl;g.generateMipmap(g.TEXTURE_2D);this._context.bindTexture(f,0)};a.prototype.setSamplingMode=function(f){f!==this._desc.samplingMode&&
(this._desc.samplingMode=f,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(f){f!==this._desc.wrapMode&&(this._desc.wrapMode=f,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var f=this._context.gl,g=this._desc;this._samplingModeDirty&&(a._applySamplingMode(f,g),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(f,g),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,f){f?this._boundToUnits.add(a):
this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(f){(0>f.width||0>f.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(f.width)&&a._isPowerOfTwo(f.height)||("number"===typeof f.wrapMode?33071!==f.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===f.wrapMode.s&&33071===f.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),
f.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(a,f){var g=f.samplingMode,e=f.samplingMode;if(9985===g||9987===g)g=9729,f.hasMipmap||(e=9729);else if(9984===g||9986===g)g=9728,f.hasMipmap||(e=9728);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e)};a._applyWrapMode=function(a,f){"number"===typeof f.wrapMode?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,f.wrapMode),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,f.wrapMode)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,f.wrapMode.s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,f.wrapMode.t))};a._applyAnisotropicFilteringParameters=function(a,f){if(null!=f.maxAnisotropy){var g=a.capabilities.textureFilterAnisotropic;g&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,g.TEXTURE_MAX_ANISOTROPY,f.maxAnisotropy))}};a._nextId=0;return a}()})},"esri/views/2d/layers/features/controllers/BaseController":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/Accessor ../../../../../core/Error ../../../../../core/HandleOwner ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/accessorSupport/decorators ../../../../../layers/graphics/data/FeatureFilter ../../../../../layers/graphics/data/utils ../../../engine/webgl/definitions".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){Object.defineProperty(a,"__esModule",{value:!0});var u=d.getLogger("esri.views.2d.layers.features.controllers.BaseController");m=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.configuration=null;b.processor=null;b.remoteClient=null;b.service=null;b.tileStore=null;b.filters=Array(t.MAX_FILTERS);return b}g(d,a);d.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};d.prototype.destroy=
function(){};Object.defineProperty(d.prototype,"spatialReference",{get:function(){return this.tileStore.tileScheme.spatialReference},enumerable:!0,configurable:!0});d.prototype.setFilterBase=function(a,b){return h(this,void 0,void 0,function(){var c,d,g,h;return f(this,function(f){switch(f.label){case 0:return[4,this._getFilter(a)];case 1:return c=f.sent(),[4,p.normalizeFilter(b,null,this.spatialReference)];case 2:return d=f.sent(),(this.configuration.filter=d)?[4,c.update(d)]:[2,c.clear()];case 3:f.sent(),
f.label=4;case 4:return f.trys.push([4,6,,7]),[4,this.queryObjectIds(c.createQuery().toJSON())];case 5:return g=f.sent(),[2,c.setTrue(g)];case 6:return h=f.sent(),u.error(new e("featurelayer-controller:query-filter-error","An error occurred while executing the query",{error:h})),[2,{show:[],hide:[]}];case 7:return[2]}})})};d.prototype.enableEvent=function(a){};d.prototype._getFilter=function(a){return h(this,void 0,void 0,function(){var c,d,e;return f(this,function(f){switch(f.label){case 0:c=this.filters[a];
if(b.isSome(c))return[2,c];d=new q.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1,timeInfo:this.service.timeInfo});this.filters[a]=d;return[4,this.queryObjectIds({})];case 1:return e=f.sent(),d.setKnownIds(e),[2,d]}})})};d.prototype._getFilterFlags=function(a){for(var c=0,d=0;d<this.filters.length;d++)var e=this.filters[d],e=b.isNone(e)||e.check(a),c=c|(e?1:0)<<d;return c};d.prototype.hasGeometryFilter=function(){return this.filters.some(function(a){return b.isSome(a)&&!!a.geometry})};
l([c.property()],d.prototype,"configuration",void 0);l([c.property()],d.prototype,"processor",void 0);l([c.property({constructOnly:!0})],d.prototype,"remoteClient",void 0);l([c.property({constructOnly:!0})],d.prototype,"service",void 0);l([c.property({dependsOn:["tileStore"]})],d.prototype,"spatialReference",null);l([c.property({constructOnly:!0})],d.prototype,"tileInfo",void 0);l([c.property({constructOnly:!0})],d.prototype,"tileStore",void 0);l([c.property()],d.prototype,"filters",void 0);return d=
l([c.subclass()],d)}(c.declared(k,n));a.default=m})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(){for(var d=0;d<arguments.length;d++);d=a.call(this)||this;d.handles=new g;return d}l(e,a);e.prototype.destroy=function(){this.handles.destroy()};f([k.property({readOnly:!0})],e.prototype,"handles",void 0);
return e=f([k.subclass("esri.core.HandleOwner")],e)}(k.declared(h))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(d){d=a.call(this)||this;d._groups=new Map;return d}l(e,a);e.prototype.destroy=function(){this.removeAll()};Object.defineProperty(e.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=
b.length});return a},enumerable:!0,configurable:!0});e.prototype.add=function(a,b){var c=this;if(!this._isHandle(a)&&!Array.isArray(a)&&!g.isCollection(a))return this;var d=this._getOrCreateGroup(b);Array.isArray(a)||g.isCollection(a)?a.forEach(function(a){return c._isHandle(a)&&d.push(a)}):d.push(a);this.notifyChange("size");return this};e.prototype.forEach=function(a,b){if("function"===typeof a)this._groups.forEach(function(b){return b.forEach(a)});else{var c=this._getGroup(a);c&&c.forEach(b)}};
e.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};e.prototype.remove=function(a){if(Array.isArray(a)||g.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};e.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};
e.prototype._isHandle=function(a){return a&&!!a.remove};e.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};e.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};e.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};e.prototype._ensureGroupKey=function(a){return a||"_default_"};f([k.property({readOnly:!0})],e.prototype,"size",null);return e=
f([k.subclass("esri.core.Handles")],e)}(k.declared(h))})},"esri/layers/graphics/data/FeatureFilter":function(){define("require exports ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper @dojo/framework/shim/Set ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ./attributeSupport ./spatialQuerySupport ./timeSupport ../../../tasks/support/Query".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u){Object.defineProperty(a,"__esModule",{value:!0});var w=e.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter");m=function(){function a(a){var c=this;this._geometryBounds=b.create();this._idToVisibility=new Map;this.check=function(a){var b=a.objectId,d=c._idToVisibility;a=c._applyFilter(a);d.set(b,a?3:2);return!!(d.get(b)&1)};this._serviceInfo=a}a.prototype.clear=function(){var a=this._resetAllHiddenIds();this.update();return{show:a,hide:[]}};
a.prototype.invalidate=function(){var a=this;this._idToVisibility.forEach(function(b,c){a._idToVisibility.set(c,0)})};a.prototype.setKnownIds=function(a){for(var b=0;b<a.length;b++)this._idToVisibility.set(a[b],1)};a.prototype.setTrue=function(a){var b=this,c=[],d=[],e=new g.default(a);this._idToVisibility.forEach(function(a,f){a=!!(b._idToVisibility.get(f)&1);var g=e.has(f);!a&&g?c.push(f):a&&!g&&d.push(f);b._idToVisibility.set(f,g?3:0)});return{show:c,hide:d}};a.prototype.createQuery=function(){return u.fromJSON({geometry:this.geometry,
spatialRel:this.spatialRel,where:this.where,distance:this.distance,units:this.units,timeExtent:this.timeExtent,objectIds:this.objectIds})};a.prototype.update=function(a){void 0===a&&(a=null);return l(this,void 0,void 0,function(){return h(this,function(b){switch(b.label){case 0:return[4,d.all([this._setGeometryFilter(a),this._setIdFilter(a),this._setAttributeFilter(a),this._setTimeFilter(a)])];case 1:return b.sent(),[2]}})})};a.prototype._setAttributeFilter=function(a){if(a&&a.where){var b=q.getWhereClause(a.where);
b.isStandardized()?this._clause=b:(b=new k("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",b),w.error(b));this.where=a.where}else this.where=this._clause=null};a.prototype._setIdFilter=function(a){this._idsToShow=a&&a.objectIds&&new g.default(a.objectIds);this._idsToHide=a&&a.hiddenIds&&new g.default(a.hiddenIds);this.objectIds=a&&a.objectIds};a.prototype._setGeometryFilter=function(a){return l(this,void 0,void 0,function(){var b,d,e;return h(this,
function(f){switch(f.label){case 0:if(!a||!a.geometry)return this.spatialRel=this.geometry=this._spatialQueryOperator=null,[2];b=a.geometry;d=a.spatialRel||"esriSpatialRelIntersects";return[4,p.getSpatialQueryOperator(d,b,this._serviceInfo)];case 1:return e=f.sent(),c.getBoundsXY(this._geometryBounds,b),this._spatialQueryOperator=e,this.geometry=b,this.spatialRel=d,[2]}})})};a.prototype._setTimeFilter=function(a){this.timeExtent=this._timeOperator=null;a&&a.timeExtent&&(this._serviceInfo.timeInfo?
(this.timeExtent=a.timeExtent,this._timeOperator=t.getTimeOperator(this._serviceInfo.timeInfo,a.timeExtent)):(a=new k("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",a.timeExtent),w.error(a)))};a.prototype._applyFilter=function(a){return this._filterByGeometry(a)&&this._filterById(a)&&this._filterByTime(a)&&this._filterByExpression(a)};a.prototype._filterByExpression=function(a){return this.where?this._clause.testFeature(a.attributes):
!0};a.prototype._filterById=function(a){return(!this._idsToHide||!this._idsToHide.has(a.objectId))&&(!this._idsToShow||this._idsToShow.has(a.objectId))};a.prototype._filterByGeometry=function(a){return this.geometry?this._earlyGeometryReject(a)?this._spatialQueryOperator(a.geometry):!1:!0};a.prototype._filterByTime=function(a){return n.isSome(this._timeOperator)?this._timeOperator(a):!0};a.prototype._earlyGeometryReject=function(a){return a.geometry&&a.geometry.coords.length?a.centroid&&"esriSpatialRelContains"===
this.spatialRel?b.containsPoint(this._geometryBounds,a.centroid.coords):!0:!1};a.prototype._resetAllHiddenIds=function(){var a=this,b=[];this._idToVisibility.forEach(function(c,d){c&1||(a._idToVisibility.set(d,1),b.push(d))});return b};return a}();a.default=m})},"esri/views/2d/layers/features/support/DataTile":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this.tile=this.displayTile=null;this.done=!1;this.queryInfoHash=
null;this.returnExceeded=!1}Object.defineProperty(a.prototype,"key",{get:function(){return this.tile.key},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.tile.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bounds",{get:function(){return this.tile.bounds},enumerable:!0,configurable:!0});return a}();a.default=m})},"esri/views/2d/layers/features/support/DataTileFeaturesIndex":function(){define("require exports @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../../../core/SetPool ../../../../../layers/graphics/data/FeatureStore ./Tile".split(" "),
function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e=[],n=new f.default;m=function(){function a(){this._tileById=new l.default;this._tilesToFeatures=new l.default;this._featureToTiles=new l.default}a.prototype.destroy=function(){this.clear()};a.prototype.add=function(a){var b=this;this.has(a.id)||(this._tileById.set(a.id,a),this._tilesToFeatures.set(a,h.default.acquire()),this._tilesToFeatures.forEach(function(c,d){a!==d&&(k.isParentOf(a,d)?c.forEach(function(c){b._link(a,
c)}):k.isChildOf(a,d)&&b.featureStore.forEachInBounds(a.bounds,function(d){c.has(d.objectId)&&b._link(a,d.objectId)}))}))};a.prototype.clear=function(){this._tilesToFeatures.forEach(function(a){return h.default.release(a)});this._tilesToFeatures.clear();this._featureToTiles.forEach(function(a){return h.default.release(a)});this._featureToTiles.clear();this._tileById.clear()};a.prototype.delete=function(a){var b=this,d=this.get(a.id);e.length=0;this._tilesToFeatures.get(d).forEach(function(a){var c=
b._featureToTiles.get(a);c.has(d)&&1===c.size?e.push(a):b._unlink(d,a)});for(a=0;a<e.length;a++)this._unlink(d,e[a]);this.featureStore.removeManyById(e);this._tilesToFeatures.delete(d);this._tileById.delete(d.id);e.length=0};a.prototype.forEach=function(a,c){return this._tileById.forEach(a,c)};a.prototype.get=function(a){return this._tileById.get(a)};a.prototype.has=function(a){return this._tileById.has(a)};a.prototype.setTileFeatures=function(a,c){var b=this,d=this.get(a.id);this._tilesToFeatures.has(d)||
(this._tileById.set(d.id,d),this._tilesToFeatures.set(d,h.default.acquire()));for(a=0;a<c.length;a++)n.add(c[a].objectId);e.length=0;this._tilesToFeatures.get(d).forEach(function(a){if(!n.has(a)){var c=b._featureToTiles.get(a);c.has(d)&&1===c.size?e.push(a):b._unlink(d,a)}});for(a=0;a<e.length;a++)this._unlink(d,e[a]);this.featureStore.removeManyById(e);this.featureStore.addMany(c);n.forEach(function(a){b._link(d,a)});n.clear();e.length=0};a.prototype.addOrUpdateFeatures=function(a){for(var b=this,
d=new f.default,e=new g.default({geometryType:this.featureStore.geometryType,hasM:this.featureStore.hasM,hasZ:this.featureStore.hasZ}),h=0,k=this.deleteFeaturesById(a.map(function(a){return a.objectId}));h<k.length;h++)d.add(k[h]);e.addMany(a);this._tileById.forEach(function(a){e.forEachInBounds(a.bounds,function(c){b._link(a,c.objectId);d.add(a)})});this.featureStore.addMany(a);var n=[];d.forEach(function(a){return n.push(a)});return n};a.prototype.deleteFeaturesById=function(a){for(var b=this,d=
new f.default,e=function(a){var c=g._featureToTiles.get(a);c&&(c.forEach(function(c){d.add(c);b._tilesToFeatures.get(c).delete(a)}),h.default.release(c),g._featureToTiles.delete(a))},g=this,k=0;k<a.length;k++)e(a[k]);this.featureStore.removeManyById(a);var n=[];d.forEach(function(a){return n.push(a)});return n};a.prototype._link=function(a,c){this._featureToTiles.get(c)||this._featureToTiles.set(c,h.default.acquire());this._featureToTiles.get(c).add(a);this._tilesToFeatures.get(a).add(c)};a.prototype._unlink=
function(a,c){this._featureToTiles.get(c).delete(a);this._tilesToFeatures.get(a).delete(c);0===this._featureToTiles.get(c).size&&(h.default.release(this._featureToTiles.get(c)),this._featureToTiles.delete(c))};return a}();a.default=m})},"esri/core/SetPool":function(){define(["require","exports","@dojo/framework/shim/Set"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this._pool=[];this._set=new l.default}a.prototype.acquire=function(){if(0===this._pool.length)return new l.default;
var a=this._pool.pop();this._set.delete(a);return a};a.prototype.release=function(a){a&&!this._set.has(a)&&(a.clear(),5E4>this._pool.length&&(this._pool.push(a),this._set.add(a)))};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();a.default=m;var f=new m})},"esri/views/2d/layers/features/support/TileUpdateQueue":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/scheduling ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/vec2 ../../../tiling".split(" "),
function(m,a,l,f,h,g,k,e,n){Object.defineProperty(a,"__esModule",{value:!0});var d=[0,0];m=function(a){function b(b){b=a.call(this,b)||this;b._queue=new Map;b._onGoingTile=null;b._onGoingPromise=null;b._isPaused=!1;b._scheduledNextHandle=null;b._timestamp=Date.now();b.tileInfoView=null;b._next=b._next.bind(b);b._finalize=b._finalize.bind(b);return b}l(b,a);Object.defineProperty(b.prototype,"length",{get:function(){return this._queue.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"updating",{get:function(){return 0<this._queue.size||null!=this._onGoingPromise},enumerable:!0,configurable:!0});b.prototype.cancel=function(a){this._onGoingTile&&this._onGoingTile.tileId===a&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._queue.delete(a);this._scheduleNext();this.notifyChange("updating")};b.prototype.clear=function(){this._queue.clear();this._onGoingPromise&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._cancelNext();
this.notifyChange("updating")};b.prototype.has=function(a){return this._queue.has(a)};b.prototype.isOngoing=function(a){return this._onGoingTile&&this._onGoingTile.tileId===a};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(a,b){this._queue.has(a)||(this._queue.set(a,{tileId:a,key:n.TileKey.pool.acquire(a),timestamp:b||this._timestamp}),this._scheduleNext(),this.notifyChange("updating"))};b.prototype.refresh=function(){this._timestamp=
Date.now();this.reset()};b.prototype.reset=function(){var a=this._onGoingTile;a&&this.push(a.tileId,this._timestamp);this.notifyChange("updating")};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());this.notifyChange("updating")};b.prototype._finalize=function(){this._onGoingPromise=this._onGoingTile=null;this.notifyChange("updating");this._scheduleNext()};b.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};b.prototype._scheduleNext=function(){this._isPaused||this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingTile||(this._scheduledNextHandle=g.schedule(this._next))};b.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingTile)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),b=a.tileId;n.TileKey.pool.release(a.key);this._queue.delete(b);this._onGoingTile=a;(a=this._onGoingPromise=this.process(b,this._timestamp))&&
"function"===typeof a.then?this._onGoingPromise.then(this._finalize,this._finalize):this._finalize();this.notifyChange("updating")}};b.prototype._peek=function(){var a=this;if(!this.state)throw Error("state not set");var b=this.tileInfoView,c=this.state.center,f=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,h=null;this._queue.forEach(function(p,k){b.getTileCoords(d,p.key);k=a._timestamp-p.timestamp;isNaN(k)?(k=e.vec2.distance(d,c),k<g&&(g=k,h=p)):k===f?(k=e.vec2.distance(d,c),k<g&&(g=k,h=p)):
k>f&&(f=k,g=Number.POSITIVE_INFINITY,h=p)});return h};f([k.property({readOnly:!0})],b.prototype,"length",null);f([k.property({constructOnly:!0})],b.prototype,"process",void 0);f([k.property()],b.prototype,"state",void 0);f([k.property({constructOnly:!0})],b.prototype,"tileInfoView",void 0);f([k.property({readOnly:!0})],b.prototype,"updating",null);return b=f([k.subclass()],b)}(k.declared(h));a.default=m})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});a.TileInfoView=l;a.TileKey=f;a.TileQueue=h;a.TileStrategy=g})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../../views/support/QueueProcessor".split(" "),function(m,a,l,f,h,g,k,e){function n(a,b){a.length=0;b.forEach(function(b){return a.push(b)});
return a}var d=new Set,b=[],c=new Map,q=[0,0];return function(a){function h(b){b=a.call(this,b)||this;b._keysToRequests=new Map;b.concurrency=6;b.process=null;b.strategy="scale-first";b.tileInfoView=null;b.tileServers=null;return b}l(h,a);h.prototype.initialize=function(){var a=this,b="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this),c=this.tileServers,d=this.concurrency,f=this.process;this._queues=c&&0<c.length?c.map(function(c){return new e({concurrency:d,
process:function(b){b=a._keysToRequests.get(b);return f(b,c)},peeker:b})}):[new e({concurrency:d,process:function(b){b=a._keysToRequests.get(b);return f(b)},peeker:b})]};h.prototype.destroy=function(){this.clear();for(var a=0,b=this._queues;a<b.length;a++)b[a].destroy();this._queues=null};Object.defineProperty(h.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});h.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear();this.notifyChange("updating")};h.prototype.find=function(a,b){var c=this;b=0;for(var d=this._queues;b<d.length;b++){var e=d[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(e)return e}};h.prototype.getPromise=
function(a){a="string"===typeof a?a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var d=c[b].get(a);if(d)return d}};h.prototype.getRequest=function(a){return this._keysToRequests.get("string"===typeof a?a:a.id)};h.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};h.prototype.isOngoing=function(a){var b="string"===typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};h.prototype.pause=function(){for(var a=
0,b=this._queues;a<b.length;a++)b[a].pause()};h.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.getPromise(c);var d=this._queues[a.key.row%this._queues.length].push(c),e=function(){b._keysToRequests.delete(c);b.notifyChange("updating")};this._keysToRequests.set(c,a);d.then(e,e);this.notifyChange("updating");return d};h.prototype.reset=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].reset();this.notifyChange("updating")};h.prototype.resume=function(){for(var a=
0,b=this._queues;a<b.length;a++)b[a].resume()};h.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var e=this.tileInfoView,f=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,h=0;h<a.length;h++){var p=this._keysToRequests.get(a[h]),k=this.tileInfoView.getTileScale(p.key);c.has(k)||(c.set(k,[]),f=Math.max(k,f),g=Math.min(k,g));c.get(k).push(p.key);d.add(k)}var l=this.state.scale;c.has(l)||(n(b,d),b.sort(),l=b.reduce(function(a,b,c,d){return Math.abs(b-l)<Math.abs(a-l)?b:a},b[0]));
l=Math.min(l,f);l=Math.max(l,g);a=c.get(l);var q=e.getClosestInfoForScale(l),m=q.getColumnForX(this.state.center[0]),t=q.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=q.denormalizeCol(a.col,a.world),d=q.denormalizeCol(b.col,b.world);return Math.sqrt((m-c)*(m-c)+(t-a.row)*(t-a.row))-Math.sqrt((m-d)*(m-d)+(t-b.row)*(t-b.row))});d.clear();c.clear();return a[0].id};h.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,d=Number.POSITIVE_INFINITY,
e=null,f=0;f<a.length;f++){var g=this._keysToRequests.get(a[f]);b.getTileCoords(q,g.key);var h=k.vec2.distance(q,c);h<d&&(d=h,e=g.key)}return e.id};f([g.property({constructOnly:!0})],h.prototype,"concurrency",void 0);f([g.property({constructOnly:!0})],h.prototype,"process",void 0);f([g.property()],h.prototype,"state",void 0);f([g.property({constructOnly:!0})],h.prototype,"strategy",void 0);f([g.property({constructOnly:!0})],h.prototype,"tileInfoView",void 0);f([g.property({constructOnly:!0})],h.prototype,
"tileServers",void 0);f([g.property({readOnly:!0})],h.prototype,"updating",null);return h=f([g.subclass()],h)}(g.declared(h))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(m,a,l,f,h,g){return function(){function a(a){var e=this;this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this._pendingProcessing=0;this.concurrency=
1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);a.ordered&&(this.ordered=!0,this._itemsToProcess=[]);this._queue=new h({peeker:a.peeker});this.process=a.process;var d=a.scheduler;a.priority&&d&&(this._task=d.registerTask(a.priority,function(a){return e.update(a)},function(){return e.needsUpdate()}))}a.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(a.prototype,
"length",{get:function(){return this._processingItems.size+this._queue.length+this._pendingProcessing},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(e){return a.push(e.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(e){return a.push(e)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};a.prototype.find=
function(a,f){var d=this,b=void 0;this._apiPromises.forEach(function(c,e){a.call(f,e)&&(b=d._apiPromises.get(e).promise)});return b};a.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._apiPromises.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){var e=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;
var d=f.createDeferred(function(b){var c=e._processingItems.get(a);c?c.resultPromise.cancel(b):(e._remove(a),e._scheduleNext())});this._add(a,d);this._scheduleNext();return d.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var f=0;f<a.length;f++){var d=a[f];d.resultPromise.isFulfilled()?this._processReset(d):(d.isReset=!0,d.resultPromise.cancel())}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=
!1,this._scheduleNext())};a.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};a.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};a.prototype._scheduleNext=function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=g.schedule(function(){a._schedule=null;a._next()}))};a.prototype._next=function(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};a.prototype._processResult=function(a,f){this._remove(a.item);this._scheduleNext();a.dfd.resolve(f)};a.prototype._processError=function(a,f){a.isReset?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(f))};a.prototype._processReset=function(a){this._remove(a.item);this._add(a.item,
a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,f){var d=this;if(a.isReset)this._processReset(a);else{a.result=f;var b=!1;this._processingItems.forEach(function(a){b||(a.result?d._itemsToProcess.push(a):b=!0)});a=0;for(f=this._itemsToProcess;a<f.length;a++){var c=f[a];!1===c.result.ok?this._processError(c,c.result.error):this._processResult(c,c.result.value)}this._itemsToProcess.length=0}};a.prototype._process=function(a){var e=this;if(!l.isNone(a)){var d=this._apiPromises.get(a);
this._pendingProcessing++;var b=this.process(a);this._pendingProcessing--;if(b&&"function"===typeof b.then){var c={item:a,resultPromise:b,result:null,dfd:d,isReset:!1};this._processingItems.set(a,c);this.ordered?b.then(function(a){return e._processOrdered(c,{ok:!0,value:a})},function(a){return e._processOrdered(c,{ok:!1,error:a})}):b.then(function(a){return e._processResult(c,a)},function(a){return e._processError(c,a)})}else d.resolve(b),this._remove(a)}};a.prototype._add=function(a,f){this._apiPromises.set(a,
f);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};Object.defineProperty(a.prototype,"test",{get:function(){var a=this;return{update:function(e){return a.update(e)}}},enumerable:!0,configurable:!0});return a}()})},"esri/core/Queue":function(){define(["require","exports"],function(m,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&
(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();
this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};return a}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(m,a,l,f){var h=new f(0,0,0,0),g=new Map,k=[],e=[];return function(){function a(a){this._previousScale=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=
function(a){var b=this,c=this.resampling,d=this.tileIndex,f=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);e.length=0;k.length=0;g.clear();if(f){var n=this.tileInfoView.tileInfo,l=n.minScale,m=n.maxScale,n=f.spans,A=f.lodInfo,C=A.level,z=a.state.scale,y=!a.stationary&&z>this._previousScale;this._previousScale=z;this.tiles.length=0;if(!c&&(z>l||z<m))return this.tiles.length=0,g.clear(),d.forEach(function(a){b.releaseTile(a)}),d.clear(),e.length=0,k.length=0,g.clear(),!0;
d.forEach(function(a){return a.visible=!0});m=l=0;if(0<n.length)for(z=0;z<n.length;z++){a=n[z];for(var x=a.row,E=a.colTo,B=a.colFrom;B<=E;B++)l++,a=h.set(C,x,A.normalizeCol(B),A.getWorldForColumn(B)).id,d.has(a)?(c=d.get(a),c.isReady?(g.set(a,c),m++):y||this._addParentTile(a,g)):(c=this.acquireTile(h),this.tileIndex.set(a,c),y||this._addParentTile(a,g))}var F=m===l;d.forEach(function(a,c){h.set(c);if(!g.has(c)){var d=b.tileInfoView.intersects(f,h);!d||!y&&F?"purge"===b.cachePolicy?h.level===C&&d||
k.push(c):(h.level>C||!d)&&k.push(c):a.isReady?e.push(c):h.level>C&&k.push(c)}});for(n=0;n<e.length;n++)a=e[n],(c=d.get(a))&&c.isReady&&g.set(a,c);for(n=0;n<k.length;n++)a=k[n],c=d.get(a),this.releaseTile(c),d["delete"](a);g.forEach(function(a){return b.tiles.push(a)});d.forEach(function(a){g.has(a.key.id)||(a.visible=!1)});return F}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=
this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/layers/features/controllers/MemoryController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../geometry ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/workers ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/FeatureProcessing ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ../../../engine/webgl/Utils ./BaseController ../support/TileUpdateQueue".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x){Object.defineProperty(a,"__esModule",{value:!0});var E=d.getLogger("esri.views.2d.layers.features.controllers.MemoryController");m=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.type="memory";b._processingInMainThread=!1;return b}l(d,a);d.prototype.initialize=function(){var a=this;this._tileQueue=new x.default({tileInfoView:this.tileStore.tileScheme,process:function(b,c){return a._fetchFeatureSet(b,c)}});this._memorySource=
q.openWithPorts(this.service.source,{client:this});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};d.prototype.destroy=function(){this._memorySource.close();this._memorySource=null;this._tileQueue.clear();this._tileQueue.pause()};Object.defineProperty(d.prototype,"processing",{get:function(){return w.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return this._tileQueue.updating},enumerable:!0,
configurable:!0});d.prototype.onEdits=function(a){this.refresh()};d.prototype.queryFeatures=function(a){return this._memorySource.invoke("queryFeatures",a)};d.prototype.queryFeatureCount=function(a){return this._memorySource.invoke("queryFeatureCount",a)};d.prototype.queryObjectIds=function(a){return this._memorySource.invoke("queryObjectIds",a)};d.prototype.queryExtent=function(a){return this._memorySource.invoke("queryExtent",a)};d.prototype.redraw=function(){this.refresh()};d.prototype.refresh=
function(){this._tileQueue.refresh();for(var a=0,b=this.tileStore.tiles;a<b.length;a++){var c=b[a];this._tileQueue.push(c.id,c.updateTimestamp)}};d.prototype.setViewState=function(a){this._tileQueue.state=a};d.prototype.setFilter=function(a){var c=a.index,d=a.filter;return k(this,void 0,void 0,function(){var a;return g(this,function(e){switch(e.label){case 0:return[4,this.setFilterBase(c,d)];case 1:return a=e.sent(),this.processor&&!this.processor.supportsTileUpdates&&this.redraw(),b.isNone(a)?(E.error(new n("featurelayer-controller:required-fields-error",
"Tried to set filter but was unable to find required fields")),[2,{show:[],hide:[]}]):[2,a]}})})};d.prototype.onTileUpdate=function(a){this._tileQueue.pause();for(var b=0,c=a.removed;b<c.length;b++){var d=c[b];this._tileQueue.cancel(d.id)}b=0;for(a=a.added;b<a.length;b++)d=a[b],this._tileQueue.push(d.id,d.updateTimestamp);this.processor&&this._tileQueue.resume()};d.prototype._switchProcessor=function(a,b){this.refresh();a&&this._tileQueue.resume()};d.prototype._fetchFeatureSet=function(a,b){var d=
this,e=this.tileStore.get(a),f=this.processor.queryInfo;return this._query(e,f).then(function(a){return d._setFilterFlags(a)}).then(function(a){return d._wrapPoints(a,f)}).then(function(a){return d._sortFeatures(a,f)}).then(function(a){return a.features.length?a:null}).then(function(a){e.updateTimestamp=b;return d.processor.onTileData(e,{addOrUpdate:a&&a.features,clear:!0,transformParams:a&&z.getTransformParams(a)})}).catch(function(a){e.updateTimestamp=b;"cancel"!==a.dojoType&&(d.processor.onTileError(e,
a.message),E.error("query-error",{error:a}));return c.reject(a)})};d.prototype._query=function(a,b){var c=this,d=new C,f=this._getQuantizationParameters(a),g=b.pixelBuffer*a.resolution;a=a.bounds.slice();a[0]-=g;a[1]-=g;a[2]+=g;a[3]+=g;d.outFields=this.processor.queryInfo.outFields;d.where=this.processor.queryInfo.definitionExpression||"1\x3d1";d.geometry=new e.Extent({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference});this.service.capabilities.query.supportsQuantization?
(d.quantizationParameters=f,"esriGeometryPolyline"===this.service.geometryType&&(d.maxAllowableOffset=f.tolerance)):d.maxAllowableOffset=f.tolerance;d.resultType="tile";d.returnExceededLimitFeatures=!1;d.returnGeometry=!0;d.returnCentroid=b.returnCentroid;d.orderByFields=b.orderByFields;return this.queryFeatures(d.toJSON()).then(function(a){a.features=b.returnCentroid?a.features.filter(function(a){return null!=a.geometry&&null!=a.centroid}):a.features.filter(function(a){return null!=a.geometry});
return a}).then(function(a){return c._applyProcessing(a)})};d.prototype._applyProcessing=function(a){var b=this.processing;if(!b)return a;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:a});try{var d=b.process(a,b.options);return d?d:c.reject(new n("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(P){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};d.prototype._getQuantizationParameters=
function(a){return new A.default({mode:"view",originPosition:"lower-left",tolerance:a.resolution,extent:new e.Extent({xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference})})};d.prototype._wrapPoints=function(a,b){if(0===a.features.length)return a;var c=b.returnCentroid;b=b.pixelBuffer;var d=a.geometryType,e=a.spatialReference,f=a.transform;if("esriGeometryPoint"!==d&&"esriGeometryMultipoint"!==d&&!c||!t.isWrappable(e))return a;c=a.features;e=
t.getInfo(e);f=Math.round((e.valid[1]-e.valid[0])/f.scale[0]);if(512===f){e=[];for(d=0;d<c.length;d++){var g=c[d],p=g.geometry,g=g.attributes;p&&(p.x<b?(p={geometry:h({},p),attributes:g},p.geometry.x+=f,e.push(p)):p.x>512-b&&(p={geometry:h({},p),attributes:g},p.geometry.x-=f,e.push(p)))}c.push.apply(c,e)}else for(e=0;e<c.length;e++)if(p=c[e].geometry)p.x<-b?p.x+=f:p.x>512+b&&(p.x-=f);return a};d.prototype._sortFeatures=function(a,b){if(b=b.orderByFields){b=b[0].split(" ");var c=b[0];"DESC"===b[1]&&
a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a};d.prototype._setFilterFlags=function(a){var b=u.convertFromFeatureSet(a,this.service.objectIdField);this.hasGeometryFilter()&&(b=u.hydrateOptimizedFeatureSet(b));for(var b=b.features,c=0;c<b.length;c++)a.features[c].filterFlags=this._getFilterFlags(b[c]);return a};f([p.property()],d.prototype,"_tileQueue",void 0);f([p.property({readOnly:!0,dependsOn:["configuration"]})],d.prototype,"processing",null);f([p.property({dependsOn:["_tileQueue.updating"]})],
d.prototype,"updating",null);return d=f([p.subclass()],d)}(p.declared(y.default));a.default=m})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../arcade/Dictionary ../../../../../core/Error ../../../../../core/Logger ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../layers/support/LabelClass ../../../../../layers/support/labelFormatUtils ../../../../../renderers/support/jsonUtils ../../../engine/webgl/definitions ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/collisions/CollisionGrid ../../../engine/webgl/mesh/factories/matcherUtils ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/BidiText ./BaseProcessor ../support/pixelBuffering".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F){function D(a){var b=a&&a.getSymbols();return a&&("unique-value"===a.type||"class-breaks"===a.type)&&null!==a.backgroundFillSymbol||b.some(function(a){return"simple-fill"===a.type||"picture-fill"===a.type})}function G(a,b){switch(a){case "esriGeometryPoint":return!0;case "esriGeometryPolyline":return!0;case "esriGeometryMultipoint":return!0;case "esriGeometryPolygon":return D(b);default:return H.error(new k("mapview-invalid-type",a+" is not supported")),
!1}}Object.defineProperty(a,"__esModule",{value:!0});var H=e.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");m=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b._symbolToMosaicItemMap=new Map;b._visualSetPromises=new Map;b.type="symbol";return b}l(e,a);e.prototype.destroy=function(){this._visualSetPromises.forEach(function(a,b){a.cancel()});this._visualSetPromises.clear();this._symbolToMosaicItemMap.clear();this.notifyChange("updating")};Object.defineProperty(e.prototype,
"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"labelingInfo",{get:function(){return this.configuration&&this.configuration.labelingInfo?this.configuration.labelingInfo.map(function(a){return q.fromJSON(a)}):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"labelClassInfos",{get:function(){var a=this;return this.labelingInfo?this.labelingInfo.map(function(b){return{labelOptions:p.getLabelingOptions(b,a.spatialReference),
labelExpression:b.getLabelExpression(),labelClass:b}}):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"hydrate",{get:function(){return A.createHydrateFactory(this.service.geometryType)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"factory",{get:function(){var a=this;if(!this.configuration)return null;var b=this.service,d=b.geometryType,e=b.objectIdField,f=b.fields,g=this.configuration,b=g.devicePixelRatio,h=g.hasGeometryExpr,g=c.fromJSON(this.spatialReference),
f={hasGeometryExpr:h,geometryType:d,fields:f,spatialReference:g},h=new x.default(function(b){return a.remoteClient.invoke("tileRenderer.getMaterialItems",b)});this._matcher=z.createMatcher(this.renderer,h,f);return new y.default(d,e,this.renderer,f,b,g,h,this.labelingInfo,this.tileStore.tileScheme.tileInfo)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"queryInfo",{get:function(){var a=this.configuration,b=a.renderer,c=a.definitionExpression,d=a.availableFields,e=a.gdbVersion,
a=a.historicMoment,f=this.service.geometryType,g=this._getReturnCentroid(this.rendererInfo.renderer),f=G(f,this.rendererInfo.renderer),h=null;(b=b.visualVariables)&&b.some(function(a){if("size"===a.type&&a.field&&!a.normalizationField)return h=[a.field+" DESC"],!0});b=F.computePxBuffer(this.rendererInfo.renderer);return{definitionExpression:c,orderByFields:h,outFields:d,pixelBuffer:b,returnCentroid:g,returnGeometry:f,gdbVersion:e,historicMoment:a}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"renderer",{get:function(){return this.configuration?t.fromJSON(this.configuration.renderer):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"rendererInfo",{get:function(){return this.configuration?w.createRendererInfo(t.fromJSON(this.configuration.renderer),this.tileStore.tileScheme.spatialReference,{fields:this.service.fields}):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return 0<this._visualSetPromises.size},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"fields",{get:function(){return this.service.fields},enumerable:!0,configurable:!0});e.prototype.onTileData=function(a,b){var c=this,e=b.addOrUpdate,f=b.remove,g=b.clear;b=(e&&e.length?this._processFeatures(a,e,b.transformParams):d.resolve()).then(function(b){return c.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:{addOrUpdate:b&&b.message||null,remove:f,clear:g}},{transferList:b&&b.transferList||null})}).catch(function(b){return c._handleError(a,
b)});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");return b};e.prototype.onTileError=function(a,b){var c=this;b=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");return b};e.prototype.onTileUpdate=function(a){var b=0;for(a=a.removed;b<
a.length;b++){var c=a[b],d=this._visualSetPromises;if(!d.has(c))break;d.get(c).cancel();d.delete(c);this.notifyChange("updating")}};e.prototype._cleanPromise=function(a){this._visualSetPromises.delete(a);this.notifyChange("updating")};e.prototype._processFeatures=function(a,b,c){var e=this;if(!b||!b.length)return d.resolve(null);var f=this.factory;return f.analyze(b,this._matcher,c,{viewingMode:"",scale:a.scale}).then(function(b){return e._getLabelMosaicItems(a,b,c).then(function(d){return e._writeFeatures(a,
b,c,d,f)})})};e.prototype._writeFeatures=function(a,b,c,d,e){for(var f=e.createMeshData(b.length),g={viewingMode:"",scale:a.scale},h=this._symbolToMosaicItemMap,p=0;p<b.length;p++)e.write(f,b[p],c,g,a.level,d,h);return this._encodeDisplayData(f)};e.prototype._encodeDisplayData=function(a){var b={},c=[];a.encode(b,c);return{message:b,transferList:c}};e.prototype._handleError=function(a,b){if(b&&"cancel"!==b.dojoType)return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b.message})};
e.prototype._getReturnCentroid=function(a){function b(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a}if("esriGeometryPolygon"===this.service.geometryType&&this.labelingInfo)return!0;if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(a.type){case "simple":return b(a.symbol);case "unique-value":return b(a.defaultSymbol)||a.uniqueValueInfos.some(function(a){return b(a.symbol)});case "class-breaks":return b(a.defaultSymbol)||a.classBreakInfos.some(function(a){return b(a.symbol)});
default:return!0}};e.prototype._getLabelMosaicItems=function(a,b,c){var e=n.acquire(),f=this._createLabelFeatures(a.scale,b,e,c),g=this._symbolToMosaicItemMap,h=n.acquire(),p=[],k=0;e.forEach(function(a,b){if(g.has(b.id)){var c=g.get(b.id).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(h.set(k,b),p.push({symbol:b.toJSON(),id:k,glyphIds:d}),k++)}else{h.set(k,b);var e=[];a.forEach(function(a){return e.push(a)});p.push({symbol:b.toJSON(),id:k,glyphIds:e});k++}});
if(0<p.length)return this.remoteClient.invoke("tileRenderer.getMaterialItems",p).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],d=h.get(c.id);if(d)if(A.isTextSymbol(d))if(g.has(d.id)){if(d=g.get(d.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var e=0;e<c.length;e++)null!=c[e]&&(d[e]=c[e])}else g.set(d.id,c.mosaicItem);else g.set(d.id,c.mosaicItem)}n.release(h);return f});n.release(e);return d.resolve(f)};e.prototype._getLabelClassInfos=function(a){return this.labelClassInfos.map(function(a,
b){return{id:b,labelClassInfo:a}}).filter(function(b){b=b.labelClassInfo;return(!b.labelClass.minScale||b.labelClass.minScale>=a||0===b.labelClass.minScale)&&(!b.labelClass.maxScale||b.labelClass.maxScale<=a||0===b.labelClass.maxScale)})};e.prototype._createLabelFeatures=function(a,b,d,e){if(!this.labelingInfo||!b||0===b.length)return null;var f=new g({viewingMode:"",scale:a});a=this._getLabelClassInfos(a);if(0===a.length)return null;for(var p=n.acquire(),k=new C.default(u.COLLISION_EARLY_REJECT_BUCKET_SIZE),
l=0;l<b.length;l++){var q=b[l],m=this.service.geometryType,t=0,w=0;if("esriGeometryPoint"===m||"esriGeometryPolygon"===m)if("esriGeometryPoint"===m?(m=q.geometry,t=m.x,w=m.y):(t=q.centroid.x,w=q.centroid.y),k.checkOverlap(t,w))continue;t=q.attributes[this.service.objectIdField];m=[];for(w=0;w<a.length;w++){var z=a[w],y=z.labelClassInfo,z=z.id,x=q;if(this.configuration.hasGeometryExpr){if(!e){H.error("mapview-labeling","Tried to evaluate geometry expression but no transformation found");return}var x=
this.hydrate(q.geometry,e.transform,e.hasZ,e.hasM),D=h({},q,{geometry:x});x.spatialReference=c.fromJSON(this.spatialReference);x=D}D=E.bidiText(this._evaluateLabelExpression(x,y,f));x=D[0];D=D[1];if(u.DEBUG_LABELS)var A="-"+t,x=x.substring(0,x.length-A.length)+A;if(x&&x.length){var A=y.labelClass.symbol,y=x,O=d;O.has(A)||O.set(A,new Set);for(var A=O.get(A),O=y.length,J=0;J<O;J++){var B=y.charCodeAt(J);A.add(B)}m.push({text:x,rtl:D,id:z})}}p.set(t,m)}return p};e.prototype._evaluateLabelExpression=
function(a,b,c){if(!b.labelClass.symbol||!q.evaluateWhere(b.labelClass.where,a.attributes)||!b.labelExpression.expression)return"";c=h({view:c},b.labelOptions);return p.buildLabelText(b.labelExpression.expression,a,this.fields,c)};f([b.property({readOnly:!0})],e.prototype,"supportsTileUpdates",null);f([b.property()],e.prototype,"configuration",void 0);f([b.property({dependsOn:["configuration"]})],e.prototype,"labelingInfo",null);f([b.property({dependsOn:["labelingInfo"]})],e.prototype,"labelClassInfos",
null);f([b.property({dependsOn:["service"]})],e.prototype,"hydrate",null);f([b.property({dependsOn:["configuration","service","fields","tileStore"]})],e.prototype,"factory",null);f([b.property({constructOnly:!0})],e.prototype,"queryInfo",null);f([b.property({dependsOn:["configuration"]})],e.prototype,"renderer",null);f([b.property({dependsOn:["configuration"]})],e.prototype,"rendererInfo",null);f([b.property({readOnly:!0})],e.prototype,"updating",null);f([b.property({dependsOn:["service"]})],e.prototype,
"fields",null);return e=f([b.subclass()],e)}(b.declared(B.default));a.default=m})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(m,a,l){m=function(){function a(a,f){void 0===a&&(a=50);void 0===f&&(f=50);this._pool=new l(Map,!1,function(a){return a.clear()},f,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();
var f=new m(100);return m})},"esri/layers/support/LabelClass":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../symbols ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../symbols/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,
e,n,d,b,c,q,p,t,u){function w(a){return a?"service"===a.origin?!1:!a.layer||!p.isOfType(a.layer,"map-image"):!0}function A(a){a=(a=t.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;a="ExpressionStatement"===a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}
var C=new n.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",
esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",
esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),z=/^\s*\{([^}]+)\}\s*$/i;return function(a){function e(b){b=a.call(this,b)||this;b.name=null;b.labelExpression=null;b.labelExpressionInfo=null;b.labelPlacement=null;b.maxScale=0;b.minScale=0;b.symbol=null;b.useCodedValues=
void 0;b.where=null;return b}f(e,a);g=e;e.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],g=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&g;case "OR":return e||
g}}return!1}catch(N){console.log("Error.: can't parse \x3d "+a)}};e.prototype.readLabelExpression=function(a,b){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a};e.prototype.writeLabelExpression=function(a,b,c,d){this.labelExpressionInfo&&w(d)&&(null!=this.labelExpressionInfo.value?a=this.labelExpressionInfo.value.replace(/\{/g,"[").replace(/\}/g,"]"):null!=this.labelExpressionInfo.expression&&(d=A(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)};e.prototype.writeLabelExpressionInfo=
function(a,b,d,e){if(null==a&&null!=this.labelExpression&&w(e))a=new c({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(e);a.expression&&(b[d]=a)};e.prototype.writeMaxScale=function(a,b){if(a||this.minScale)b.maxScale=a};e.prototype.writeMinScale=function(a,b){if(a||this.maxScale)b.minScale=a};e.prototype.getLabelExpression=function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type=
"conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this.labelExpression.replace(/\[/g,"{").replace(/\]/g,"}"),a.type="conventional");return a};e.prototype.getLabelExpressionArcade=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return q.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null};e.prototype.getLabelExpressionSingleField=
function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(z))&&a[1].trim()||null;case "arcade":return A(a.expression)}return null};e.prototype.clone=function(){return new g({labelExpression:this.labelExpression,labelExpressionInfo:d.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:d.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};
var g;l([b.property({type:String,json:{write:!0}})],e.prototype,"name",void 0);l([b.property({type:String,json:{write:{allowNull:!0}}})],e.prototype,"labelExpression",void 0);l([b.reader("labelExpression")],e.prototype,"readLabelExpression",null);l([b.writer("labelExpression")],e.prototype,"writeLabelExpression",null);l([b.property({type:c,json:{write:{overridePolicy:function(a,b,c){return w(c)?{allowNull:!0}:{enabled:!1}}}}})],e.prototype,"labelExpressionInfo",void 0);l([b.writer("labelExpressionInfo")],
e.prototype,"writeLabelExpressionInfo",null);l([b.property({type:C.apiValues,json:{type:C.jsonValues,read:C.read,write:C.write}})],e.prototype,"labelPlacement",void 0);l([b.property({type:Number})],e.prototype,"maxScale",void 0);l([b.writer("maxScale")],e.prototype,"writeMaxScale",null);l([b.property({type:Number})],e.prototype,"minScale",void 0);l([b.writer("minScale")],e.prototype,"writeMinScale",null);l([b.property({types:k.symbolTypesLabel,json:{origins:{"web-scene":{read:u.read,write:{target:{symbol:{types:k.symbolTypesLabel3D}},
writer:u.writeTarget}}},read:u.read,write:u.writeTarget}})],e.prototype,"symbol",void 0);l([b.property({type:Boolean,json:{write:!0}})],e.prototype,"useCodedValues",void 0);l([b.property({type:String,json:{write:!0}})],e.prototype,"where",void 0);return e=g=l([b.subclass("esri.layers.support.LabelClass")],e)}(b.declared(e))})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),
function(m,a,l,f,h,g,k){return function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b.value=null;b.expression=null;return b}l(e,a);d=e;e.prototype.readExpression=function(a,c){return c.value?k.convertTemplatedStringToArcade(c.value):a};e.prototype.writeExpression=function(a,c,d){null!=this.value&&(a=k.convertTemplatedStringToArcade(this.value));c[d]=a};e.prototype.clone=function(){return new d({value:this.value,expression:this.expression})};var d;f([g.property({json:{read:!1,write:!1}})],
e.prototype,"value",void 0);f([g.property({type:String,json:{write:{allowNull:!0}}})],e.prototype,"expression",void 0);f([g.reader("expression",["expression","value"])],e.prototype,"readExpression",null);f([g.writer("expression")],e.prototype,"writeExpression",null);return e=d=f([g.subclass("esri.layers.support.LabelExpressionInfo")],e)}(g.declared(h))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(m,a,l){Object.defineProperty(a,"__esModule",
{value:!0});var f=/__begin__/ig,h=/__end__/ig,g=/^__begin__/i,k=/__end__$/i;a.convertTemplatedStringToArcade=function(a){a?(a=l.replace(a,function(a,d){return'__begin__$feature["'+d+'"]__end__'}),a=g.test(a)?a.replace(g,""):'"'+a,a=k.test(a)?a.replace(k,""):a+'"',a=a.replace(f,'" + ').replace(h,' + "')):a='""';return a}})},"esri/core/string":function(){define(["require","exports","./object"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.replace=function(a,h,g){void 0===g&&(g=
/\{([^\}]+)\}/g);return a.replace(g,"object"===typeof h?function(a,e){return l.getDeepValue(e,h)}:h)}})},"esri/layers/support/types":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.isOfType=function(a,f){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var h=Array.isArray(f);return a.some(function(a){a=a.__accessorMetadata__;if(!a)return!1;a=a.properties;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return h?-1!==f.indexOf(a):
a===f})}})},"esri/layers/support/labelFormatUtils":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/number ../../arcade/Feature ../../core/date ../../core/lang ../../core/promiseUtils ./fieldUtils ../../support/arcadeUtils".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c,q){function p(){return g(this,void 0,void 0,function(){return h(this,function(a){return[2,b.create(function(a){m(["../../core/sql/WhereClause"],
a)})]})})}function t(){return g(this,void 0,void 0,function(){return h(this,function(a){return[2,b.create(function(a){m(["../../support/arcadeUtils"],a)})]})})}function u(a,b){b={spatialReference:b};if(a=a.labelExpressionInfo){var c=a.expression;c&&!a.value&&(b.hasArcadeExpression=!0,b.compiledArcadeFunc=q.createFunction(c))}return b}function w(a,b,e,f){a=c.getField(f,a);if(!a)return b;if(null==e[a.name])return"";if(b=a.domain)if("codedValue"===b.type||"coded-value"===b.type){f=e[a.name];var g=0;
for(b=b.codedValues;g<b.length;g++){var h=b[g];if(h.code===f)return h.name}}else if("range"===b.type&&(f=+e[a.name],g="range"in b?b.range[1]:b.maxValue,("range"in b?b.range[0]:b.minValue)<=f&&f<=g))return b.name;e=e[a.name];"date"===a.type||"esriFieldTypeDate"===a.type?(a=n.fromJSON("shortDate"),(a="DateFormat"+n.getFormat(a))&&(e=d.substitute({myKey:e},"{myKey:"+a+"}"))):c.isNumericField(a)&&(e=k.format(+e));return e?e:""}Object.defineProperty(a,"__esModule",{value:!0});var A=new e,C=function(a){return null};
a.createLabelFunction=function(a,c,d){return g(this,void 0,void 0,function(){var e,f,g,k,n,l,q,m,z,y,x;return h(this,function(h){switch(h.label){case 0:if(!a||!a.symbol)return[2,C];e=a.where;f=a.getLabelExpression();return[4,b.all([e?p():null,"arcade"===f.type?t():null])];case 1:return g=h.sent(),k=g[0],n=g[1],"arcade"===f.type?(q=u(a,d),m=n.createFunction(f.expression),z={fields:c},y={vars:{$feature:A,$view:q.view},spatialReference:d},l=function(a){A.repurposeFromGraphicLikeObject(a.geometry,a.attributes,
z);a=n.executeFunction(m,y);return null!=a?a.toString():null}):l=function(a){var b=a&&a.attributes;return b?f.expression.replace(/{[^}]*}/g,function(a){return w(a.slice(1,-1),a,b,c)}):null},e?(x=k.create(e),[2,function(a){return x.testFeature(a)?l(a):null}]):[2,l]}})})};a.getLabelingOptions=u;a.buildLabelText=function(a,b,c,d){var e="";if(d&&d.hasArcadeExpression){if(d.compiledArcadeFunc)return A.repurposeFromGraphicLikeObject(b.geometry,b.attributes,{fields:c}),a=q.executeFunction(d.compiledArcadeFunc,
{vars:{$feature:A,$view:d.view},spatialReference:d.spatialReference}),null!=a?a.toString():null}else var f=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return w(a.slice(1,-1),a,f,c)});return e};a.formatField=w})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../DotDensityRenderer ../HeatmapRenderer ../SimpleRenderer ../StretchRenderer ../UniqueValueRenderer".split(" "),function(m,a,l,f,h,
g,k,e,n,d,b){function c(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new h("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:c})),null;b=a?p[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new h("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));
return null}function q(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new l("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(a,"__esModule",{value:!0});var p={simple:n,uniqueValue:b,classBreaks:g,heatmap:e,dotDensity:k,rasterStretch:d};a.read=c;a.writeTarget=function(a,b,c,d){(a=q(a,{},d))&&f.setDeepValue(c,a,b)};a.write=q;a.fromJSON=function(a,
b){return c(a,null,b)}})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../symbols ../core/kebabDictionary ../core/lang ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesRenderer ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeUtils ../symbols/support/jsonUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y){var x=c.getLogger("esri.renderers.ClassBreaksRenderer"),E=new d.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),B=p.ensureType(A.ClassBreakInfo);return function(a){function c(b){b=a.call(this)||this;b.backgroundFillSymbol=null;b.classBreakInfos=null;b.defaultLabel=null;b.defaultSymbol=null;b.field=null;b.isMaxInclusive=!0;b.legendOptions=null;b.normalizationField=null;b.normalizationTotal=
null;b.type="class-breaks";b.valueExpression=null;b.valueExpressionTitle=null;b._set("classBreakInfos",[]);return b}l(c,a);d=c;c.prototype.readClassBreakInfos=function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new A.ClassBreakInfo;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}};c.prototype.writeClassBreakInfos=function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&
a.forEach(function(a){return delete a.classMinValue});b[c]=a};Object.defineProperty(c.prototype,"compiledFunc",{get:function(){return z.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});c.prototype.readDefaultSymbol=function(a,b,c){return y.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){y.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=function(a,b,c,d){y.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a?a:"function"===typeof a?
(x.error(".field: field must be a string value"),null):p.ensureString(a)};Object.defineProperty(c.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"normalizationType",{get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total"||null,b&&c&&x.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},set:function(a){this._set("normalizationType",a)},enumerable:!0,configurable:!0});c.prototype.addClassBreakInfo=function(a,c,d){var e=null,e="number"===typeof a?new A.ClassBreakInfo({minValue:a,maxValue:c,symbol:d}):B(b.clone(a));this.classBreakInfos.push(e);1===this.classBreakInfos.length&&this.notifyChange("minValue")};c.prototype.removeClassBreakInfo=function(a,b){for(var c=this.classBreakInfos.length,d=0;d<c;d++){var e=[this.classBreakInfos[d].minValue,
this.classBreakInfos[d].maxValue];if(e[0]===a&&e[1]===b){this.classBreakInfos.splice(d,1);break}}};c.prototype.getBreakIndex=function(a,b){var c=this.field,d=a.attributes,e=this.isMaxInclusive,f=null;if(this.valueExpression)f=z.executeFunction(this.compiledFunc,z.createExecContext(a,z.getViewInfo(b)));else if(f=parseFloat(d[c]),a=this.normalizationType)if(b=this.normalizationTotal,d=parseFloat(d[this.normalizationField]),"log"===a)f=Math.log(f)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(b))f=
f/b*100;else if("field"===a&&!isNaN(d)){if(isNaN(f)||isNaN(d))return-1;f/=d}if(null!=f&&"number"===typeof f&&!isNaN(f))for(d=0;d<this.classBreakInfos.length;d++)if(a=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],a[0]<=f&&(e?f<=a[1]:f<a[1]))return d;return-1};c.prototype.getClassBreakInfo=function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null};c.prototype.getSymbol=function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol};
c.prototype.getSymbols=function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.clone=function(){return new d({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:b.clone(this.classBreakInfos),
isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:b.clone(this.visualVariables),legendOptions:b.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};c.prototype.collectRequiredFields=function(a,b){return k(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:return c.sent(),
t.collectField(a,b,this.field),t.collectField(a,b,this.normalizationField),[4,t.collectArcadeFieldNames(a,b,this.valueExpression)];case 2:return c.sent(),[2]}})})};c.prototype._areClassBreaksConsecutive=function(){for(var a=this.classBreakInfos,b=a.length,c=1;c<b;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;return!0};var d;f([q.property({types:{base:e.BaseSymbol,key:"type",typeMap:{"simple-fill":n.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":n.symbolTypesRenderer.typeMap["picture-fill"],
"polygon-3d":n.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{read:y.read,write:{target:{backgroundFillSymbol:{type:e.PolygonSymbol3D}},writer:y.writeTarget}}},read:y.read,write:y.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);f([q.property({type:[A.ClassBreakInfo]})],c.prototype,"classBreakInfos",void 0);f([q.reader("classBreakInfos")],c.prototype,"readClassBreakInfos",null);f([q.writer("classBreakInfos")],c.prototype,"writeClassBreakInfos",null);f([q.property({dependsOn:["valueExpression"]})],
c.prototype,"compiledFunc",null);f([q.property({type:String,json:{write:!0}})],c.prototype,"defaultLabel",void 0);f([q.property({types:n.symbolTypesRenderer})],c.prototype,"defaultSymbol",void 0);f([q.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);f([q.writer("web-scene","defaultSymbol",{defaultSymbol:{types:n.symbolTypesRenderer3D}})],c.prototype,"writeDefaultSymbolWebScene",null);f([q.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);f([q.property({type:String,json:{write:!0}})],
c.prototype,"field",void 0);f([q.cast("field")],c.prototype,"castField",null);f([q.property({type:Boolean})],c.prototype,"isMaxInclusive",void 0);f([q.property({type:C.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);f([q.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],c.prototype,"minValue",null);f([q.property({type:String,
json:{write:!0}})],c.prototype,"normalizationField",void 0);f([q.property({type:Number,cast:function(a){return p.ensureNumber(a)},json:{write:!0}})],c.prototype,"normalizationTotal",void 0);f([q.property({type:E.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:E.jsonValues,read:E.read,write:E.write}})],c.prototype,"normalizationType",null);f([q.enumeration.serializable()({classBreaks:"class-breaks"})],c.prototype,"type",void 0);f([q.property({type:String,json:{write:!0}})],
c.prototype,"valueExpression",void 0);f([q.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);f([h(2,q.cast(n.ensureType))],c.prototype,"addClassBreakInfo",null);return c=d=f([q.subclass("esri.renderers.ClassBreaksRenderer")],c)}(q.declared(u,w))})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper @dojo/framework/shim/array @dojo/framework/shim/Set ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){var q=new d.default({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",rasterStretch:"raster-stretch"},{ignoreUnknown:!0});return function(a){function d(b){b=a.call(this,b)||this;b.authoringInfo=null;b.type=null;return b}l(d,a);d.prototype.getRequiredFields=function(a){return g(this,void 0,void 0,function(){var b;return h(this,function(c){switch(c.label){case 0:if(!this.collectRequiredFields)return[2,
[]];b=new e.default;return[4,this.collectRequiredFields(b,a)];case 1:return c.sent(),[2,k.from(b).sort()]}})})};d.prototype.getSymbol=function(a,b){};d.prototype.getSymbols=function(){return[]};f([b.property({type:c,json:{write:!0}})],d.prototype,"authoringInfo",void 0);f([b.property({type:q.apiValues,readOnly:!0,json:{type:q.jsonValues,read:!1,write:{writer:q.write,ignoreOrigin:!0}}})],d.prototype,"type",void 0);return d=f([b.subclass("esri.renderers.Renderer")],d)}(b.declared(n))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoVisualVariable ../../tasks/support/ColorRamp ../../tasks/support/colorRamps".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c){var q=new g.default({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),p=new g.default({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),t="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");
return function(a){function g(b){b=a.call(this)||this;b.colorRamp=null;b.lengthUnit=null;b.visualVariables=null;return b}l(g,a);h=g;Object.defineProperty(g.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});g.prototype.readColorRamp=function(a,b){if(a)return c.fromJSON(a)};
Object.defineProperty(g.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?
null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"standardDeviationInterval",{get:function(){var a=this.type;return a&&"relationship"!==a&&"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===
a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new h({classificationMethod:this.classificationMethod,colorRamp:k.clone(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:k.clone(this.field1),field2:k.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&
this.visualVariables.map(function(a){return a.clone()})})};var h;f([e.property({type:q.apiValues,value:null,dependsOn:["type"],json:{type:q.jsonValues,read:q.read,write:q.write,origins:{"web-document":{default:"manual",type:q.jsonValues,read:q.read,write:q.write}}}})],g.prototype,"classificationMethod",null);f([e.property({type:b,json:{write:!0}})],g.prototype,"colorRamp",void 0);f([e.reader("colorRamp")],g.prototype,"readColorRamp",null);f([e.property({type:[String],value:null,dependsOn:["type"],
json:{write:!0}})],g.prototype,"fields",null);f([e.property({value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"field1",null);f([e.property({value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"field2",null);f([e.property({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],g.prototype,"focus",null);f([e.property({type:Number,value:null,dependsOn:["type"],json:{type:n.Integer,write:!0}})],g.prototype,"numClasses",null);f([e.property({type:t,json:{type:t,
read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"lengthUnit",void 0);f([e.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],g.prototype,"standardDeviationInterval",null);f([e.property({type:String,value:null,json:{type:p.jsonValues,read:p.read,write:p.write}})],g.prototype,"type",null);f([e.property({type:[d],json:{write:!0}})],g.prototype,"visualVariables",void 0);return g=h=f([e.subclass("esri.renderers.support.AuthoringInfo")],
g)}(e.declared(h))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(m,a,l,f,h,g,k,e){var n=new g.default({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),d=new g.default({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",
rotationInfo:"rotation"}),b={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},c=["high-to-low","above-and-below","centered-on","extremes"],q="seconds minutes hours days months years".split(" ");return function(a){function g(b){b=a.call(this)||this;b.endTime=null;b.field=null;b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}l(g,a);h=g;g.prototype.castEndTime=function(a){return"string"===typeof a||
"number"===typeof a?a:null};g.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(g.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});g.prototype.clone=
function(){return new h({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var h;f([k.property({types:b,json:{write:!0}})],g.prototype,"endTime",void 0);f([e.cast("endTime")],g.prototype,"castEndTime",null);f([k.property({type:String,json:{write:!0}})],g.prototype,"field",void 0);f([k.property({type:Number,json:{write:!0}})],g.prototype,"maxSliderValue",
void 0);f([k.property({type:Number,json:{write:!0}})],g.prototype,"minSliderValue",void 0);f([k.property({types:b,json:{write:!0}})],g.prototype,"startTime",void 0);f([e.cast("startTime")],g.prototype,"castStartTime",null);f([k.property({type:n.apiValues,value:null,dependsOn:["type"],json:{type:n.jsonValues,read:n.read,write:n.write}})],g.prototype,"style",null);f([k.property({type:c,value:null,dependsOn:["type"],json:{type:c,write:!0}})],g.prototype,"theme",null);f([k.property({type:d.apiValues,
json:{type:d.jsonValues,read:d.read,write:d.write}})],g.prototype,"type",void 0);f([k.property({type:q,json:{type:q,write:!0}})],g.prototype,"units",void 0);return g=h=f([k.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],g)}(k.declared(h))})},"esri/tasks/support/ColorRamp":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(e){e=
a.call(this)||this;e.type=null;return e}l(e,a);f([g.property({readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0);return e=f([g.subclass("esri.tasks.support.ColorRamp")],e)}(g.declared(h))})},"esri/tasks/support/colorRamps":function(){define(["require","exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});a.types={key:"type",base:f,typeMap:{algorithmic:l,multipart:h}};a.fromJSON=function(a){return a&&
a.type?"algorithmic"===a.type?l.fromJSON(a):"multipart"===a.type?h.fromJSON(a):null:null}})},"esri/tasks/support/AlgorithmicColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./ColorRamp".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.algorithm=null;b.fromColor=null;b.toColor=null;b.type="algorithmic";return b}f(d,
a);b=d;d.prototype.clone=function(){return new b({fromColor:g.clone(this.fromColor),toColor:g.clone(this.toColor),algorithm:this.algorithm})};var b;l([k.enumeration.serializable()({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],d.prototype,"algorithm",void 0);l([k.property({type:h,json:{write:!0}})],d.prototype,"fromColor",void 0);l([k.property({type:h,json:{write:!0}})],d.prototype,"toColor",void 0);l([k.property({type:["algorithmic"]})],d.prototype,"type",
void 0);return d=b=l([k.subclass("esri.tasks.support.AlgorithmicColorRamp")],d)}(k.declared(e))})},"esri/tasks/support/MultipartColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/lang ../../core/accessorSupport/decorators ./AlgorithmicColorRamp ./ColorRamp".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this)||this;b.colorRamps=null;b.type="multipart";return b}f(d,a);b=d;d.prototype.clone=
function(){return new b({colorRamps:h.clone(this.colorRamps)})};var b;l([g.property({type:[k],json:{write:!0}})],d.prototype,"colorRamps",void 0);l([g.property({type:["multipart"]})],d.prototype,"type",void 0);return d=b=l([g.subclass("esri.tasks.support.MultipartColorRamp")],d)}(g.declared(e))})},"esri/renderers/mixins/VisualVariablesRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory ../../symbols/support/utils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u){function w(a){return a&&"opacity"in a?a.opacity*w(a.parent):1}var A={base:p,key:"type",typeMap:{opacity:b,color:d,rotation:c,size:q}};return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._vvFactory=new t;return b}l(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});b.prototype.readVisualVariables=
function(a,b,c){return this._vvFactory.readVariables(a,b,c)};b.prototype.writeVisualVariables=function(a,b,c,d){b[c]=this._vvFactory.writeVariables(a,d)};b.prototype.getDisplayedSymbol=function(a,b){return g(this,void 0,void 0,function(){var c,d,e,f,g,p,k,l,n;return h(this,function(h){if(!a)return[2];c=w(a.layer||a.sourceLayer);d=this.getSymbol(a);if(!d)return[2];d=d.clone();if(!this.visualVariables)return[2,d];e=this._vvFactory;f=e.colorVariables;g=e.opacityVariables;p=e.sizeVariables;k=e.rotationVariables;
l=!!f.length&&f[f.length-1].getColor(a,b);n=g.length?g[g.length-1].getOpacity(a,b):null;null!=c&&(n=null!=n?n*c:c);u.applyColorToSymbol(d,l,n);p.forEach(function(c){return u.applySizeToSymbol(d,c.getSize(a,b),c.axis)});k.forEach(function(c){return u.applyRotationToSymbol(d,c.getRotationAngle(a,b),c.axis)});return[2,d]})})};b.prototype.getVisualVariableValues=function(a,b){return this._vvFactory.getVisualVariableValues(a,b)};b.prototype.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,
b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};b.prototype.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}),!c||0!==c.length))return c};b.prototype.getSize=function(a,b){return this._vvFactory.getSize(a,b)};b.prototype.getSizeRangeAtScale=function(a,
b,c){return a?a.getSizeRangeAtScale(b,c):this._vvFactory.getSizeRangeAtScale(b,c)};b.prototype.getColor=function(a,b){return this._vvFactory.getColor(a,b)};b.prototype.getOpacity=function(a,b){return this._vvFactory.getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){return this._vvFactory.getRotationAngle(a,b)};b.prototype.collectVVRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c,d,e,f;return h(this,function(g){switch(g.label){case 0:c=[],this.visualVariables&&(c=
c.concat(this.visualVariables)),d=0,e=c,g.label=1;case 1:if(!(d<e.length))return[3,4];f=e[d];if(!f)return[3,3];f.field&&n.collectField(a,b,f.field);f.normalizationField&&n.collectField(a,b,f.normalizationField);return f.valueExpression?[4,n.collectArcadeFieldNames(a,b,f.valueExpression)]:[3,3];case 2:g.sent(),g.label=3;case 3:return d++,[3,1];case 4:return[2]}})})};f([e.property({types:[A],value:null,json:{write:!0}})],b.prototype,"visualVariables",null);f([e.reader("visualVariables",["visualVariables",
"rotationType","rotationExpression"])],b.prototype,"readVisualVariables",null);f([e.writer("visualVariables")],b.prototype,"writeVisualVariables",null);return b=f([e.subclass("esri.renderers.mixins.VisualVariablesRenderer")],b)}(e.declared(k))})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop ./support/utils ../../support/arcadeUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){return function(a){function b(b){b=a.call(this,b)||this;b.type="color";b.normalizationField=null;return b}l(b,a);k=b;Object.defineProperty(b.prototype,"_cache",{get:function(){var a=d.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:d.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),
a.sort(function(a,b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});b.prototype.getColor=function(a,b){var c="number"===typeof a,e=c?null:a,f=e&&e.attributes,g=c?a:null,p=this._cache;a=p.ipData;var k=p.hasExpression,p=p.compiledFunc,l=this.field;if(!l&&!k)return(b=this.stops)&&b[0]&&b[0].color;"number"!==typeof g&&(k?(g=d.getViewInfo(b),e=d.createExecContext(e,g),g=d.executeFunction(p,e)):f&&(g=f[l]));e=this.normalizationField;f=f?parseFloat(f[e]):void 0;if(null!=
g&&(!e||c||!isNaN(f)&&0!==f)&&(isNaN(f)||c||(g/=f),c=n.lookupData(g,a)))return f=c[0],a=c[1],b=f===a?this.stops[f].color:h.blendColors(this.stops[f].color,this.stops[a].color,c[2],b&&b.color),new h(b)};b.prototype.clone=function(){return new k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};
b.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var k;f([g.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],b.prototype,"_cache",null);f([g.property({type:["color"],json:{type:["colorInfo"]}})],b.prototype,"type",void 0);f([g.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);f([g.property({type:[e],json:{write:!0}})],b.prototype,"stops",null);return b=k=f([g.subclass("esri.renderers.visualVariables.ColorVariable")],
b)}(g.declared(k))})},"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),function(m,a,l,f,h,g,k,e,n,d){var b=k.getLogger("esri.renderers.visualVariables.VisualVariable"),c=new g.default({colorInfo:"color",
transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return function(a){function g(b){b=a.call(this,b)||this;b.index=null;b.type=null;b.field=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;return b}l(g,a);g.prototype.castField=function(a){return null==a?a:"function"===typeof a?(b.error(".field: field must be a string value"),null):n.ensureString(a)};g.prototype.clone=function(){};f([e.property()],g.prototype,"index",void 0);f([e.property({type:c.apiValues,
readOnly:!0,json:{read:c.read,write:c.write}})],g.prototype,"type",void 0);f([e.property({type:String,json:{write:!0}})],g.prototype,"field",void 0);f([e.cast("field")],g.prototype,"castField",null);f([e.property({type:String,json:{write:!0}})],g.prototype,"valueExpression",void 0);f([e.property({type:String,json:{write:!0}})],g.prototype,"valueExpressionTitle",void 0);f([e.property({type:d,json:{write:!0}})],g.prototype,"legendOptions",void 0);return g=f([e.subclass("esri.renderers.visualVariables.VisualVariable")],
g)}(e.declared(h))})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),function(m,a,l,f,h,g){return function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.showLegend=null;return d}l(e,a);g=e;e.prototype.clone=function(){return new g({title:this.title,showLegend:this.showLegend})};
var g;f([h.property({type:Boolean,json:{write:!0}})],e.prototype,"showLegend",void 0);return e=g=f([h.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],e)}(h.declared(g.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){Object.defineProperty(a,"__esModule",{value:!0});
m=function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.title=null;return d}l(e,a);h=e;e.prototype.clone=function(){return new h({title:this.title})};var h;f([g.property({type:String,json:{write:!0}})],e.prototype,"title",void 0);return e=h=f([g.subclass("esri.renderers.support.LegendOptions")],e)}(g.declared(h));a.LegendOptions=m;a.default=m})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),
function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this,b)||this;b.color=null;b.label=null;b.value=null;return b}l(d,a);b=d;d.prototype.writeValue=function(a,b,d){b[d]=null==a?0:a};d.prototype.clone=function(){return new b({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var b;f([k.property({type:h,json:{type:[e.Integer],write:!0}})],d.prototype,"color",void 0);f([k.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([k.property({type:Number,
json:{write:{allowNull:!0}}})],d.prototype,"value",void 0);f([k.writer("value")],d.prototype,"writeValue",null);return d=b=f([k.subclass("esri.renderers.visualVariables.support.ColorStop")],d)}(k.declared(g))})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop ./support/utils ../../support/arcadeUtils".split(" "),
function(m,a,l,f,h,g,k,e,n){return function(a){function b(b){b=a.call(this,b)||this;b.type="opacity";b.normalizationField=null;return b}l(b,a);c=b;Object.defineProperty(b.prototype,"_cache",{get:function(){var a=n.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:n.createFunction(a)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),
a.sort(function(a,b){return a.value-b.value}));this._set("stops",a)},enumerable:!0,configurable:!0});b.prototype.getOpacity=function(a,b){var c="number"===typeof a,d=c?null:a,f=d&&d.attributes,g=c?a:null,h=this._cache;a=h.ipData;var p=h.hasExpression,h=h.compiledFunc,k=this.field;if(!k&&!p)return(c=this.stops)&&c[0]&&c[0].opacity;"number"!==typeof g&&(p?(g=n.getViewInfo(b),d=n.createExecContext(d,g),g=n.executeFunction(h,d)):f&&(g=f[k]));d=this.normalizationField;f=f?parseFloat(f[d]):void 0;if(null!=
g&&(!d||c||!isNaN(f)&&0!==f)&&(isNaN(f)||c||(g/=f),c=e.lookupData(g,a))){a=c[0];f=c[1];if(a===f)return this.stops[a].opacity;a=this.stops[a].opacity;return a+(this.stops[f].opacity-a)*c[2]}};b.prototype.clone=function(){return new c({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};
b.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var c;f([h.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],b.prototype,"_cache",null);f([h.property({type:["opacity"],json:{type:["transparencyInfo"]}})],b.prototype,"type",void 0);f([h.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);f([h.property({type:[k],json:{write:!0}})],b.prototype,"stops",null);return b=c=f([h.subclass("esri.renderers.visualVariables.OpacityVariable")],
b)}(h.declared(g))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this,b)||this;b.label=null;b.opacity=null;b.value=null;return b}l(d,a);b=d;d.prototype.readOpacity=
function(a,b){return e.transparencyToOpacity(b.transparency)};d.prototype.writeOpacity=function(a,b,d){b[d]=e.opacityToTransparency(a)};d.prototype.clone=function(){return new b({label:this.label,opacity:this.opacity,value:this.value})};var b;f([g.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([g.property({type:Number,json:{type:k.Integer,write:{target:"transparency"}}})],d.prototype,"opacity",void 0);f([g.reader("opacity",["transparency"])],d.prototype,"readOpacity",null);
f([g.writer("opacity")],d.prototype,"writeOpacity",null);f([g.property({type:Number,json:{write:!0}})],d.prototype,"value",void 0);return d=b=f([g.subclass("esri.renderers.visualVariables.support.OpacityStop")],d)}(g.declared(h))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable ../../support/arcadeUtils".split(" "),
function(m,a,l,f,h,g,k,e){return function(a){function d(b){b=a.call(this,b)||this;b.axis=null;b.type="rotation";b.rotationType="geographic";b.valueExpressionTitle=null;return b}l(d,a);b=d;Object.defineProperty(d.prototype,"_cache",{get:function(){var a=e.createSyntaxTree(this.valueExpression);return{hasExpression:!!this.valueExpression,compiledFunc:e.createFunction(a)}},enumerable:!0,configurable:!0});d.prototype.writeValueExpressionTitleWebScene=function(a,b,d,e){e&&e.messages&&e.messages.push(new h("property:unsupported",
this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:e}))};d.prototype.getRotationAngle=function(a,b){var c=this.axis||"heading",d="heading"===c&&"arithmetic"===this.rotationType?90:0,c="heading"===c&&"arithmetic"===this.rotationType?-1:1,f=(a="number"===typeof a?null:a)&&a.attributes,g=this.field,h=this._cache,k=h.hasExpression,h=
h.compiledFunc,l=0;if(!g&&!k)return l;k?(b=e.getViewInfo(b),b=e.createExecContext(a,b),l=e.executeFunction(h,b)):f&&(l=f[g]||0);return l="number"!==typeof l||isNaN(l)?null:d+c*l};d.prototype.clone=function(){return new b({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var b;f([g.property({readOnly:!0,dependsOn:["valueExpression"]})],d.prototype,
"_cache",null);f([g.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],d.prototype,"axis",void 0);f([g.property({type:["rotation"],json:{type:["rotationInfo"]}})],d.prototype,"type",void 0);f([g.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],d.prototype,"rotationType",void 0);f([g.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);f([g.writer("web-scene",
"valueExpressionTitle")],d.prototype,"writeValueExpressionTitleWebScene",null);return d=b=f([g.subclass("esri.renderers.visualVariables.RotationVariable")],d)}(g.declared(k))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Graphic ../../core/Error ../../core/kebabDictionary ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ../../support/arcadeUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u){function w(a){if(null!=a){if("string"===typeof a||"number"===typeof a)return d.toPt(a);if("size"===a.type){if(t.isSizeVariable(a))return a;a=h({},a);delete a.type;return new B(a)}}}function A(a,b,c){if("object"!==typeof a)return a;b=new B;b.read(a,c);return b}var C=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,z=new g,y=n.getLogger("esri.renderers.visualVariables.SizeVariable"),x=new e.default({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",
all:"all"}),E=new e.default({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),B=function(a){function c(b){b=a.call(this,b)||this;b.axis=null;b.legendOptions=null;b.normalizationField=null;b.scaleBy=null;b.target=null;b.type="size";b.useSymbolValue=null;b.valueExpression=null;b.valueRepresentation=null;
b.valueUnit=null;return b}l(c,a);d=c;Object.defineProperty(c.prototype,"_cache",{get:function(){var a=u.createSyntaxTree(this.valueExpression);return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:u.createFunction(a),isScaleDriven:C.test(this.valueExpression)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"expression",{set:function(a){y.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===a?(this.valueExpression="$view.scale",this._set("expression",a)):this._set("expression",null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"index",{set:function(a){t.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+a+"].maxSize");t.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+a+"].minSize");this._set("index",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"inputValueType",{get:function(){return t.getInputValueType(this)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxDataValue",{set:function(a){a&&this.stops&&(y.warn("cannot set maxDataValue when stops is not null."),a=null);this._set("maxDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxSize",{set:function(a){a&&this.stops&&(y.warn("cannot set maxSize when stops is not null."),a=null);this._set("maxSize",a)},enumerable:!0,configurable:!0});c.prototype.castMaxSize=function(a){return w(a)};c.prototype.readMaxSize=
function(a,b,c){return A(a,b,c)};Object.defineProperty(c.prototype,"minDataValue",{set:function(a){a&&this.stops&&(y.warn("cannot set minDataValue when stops is not null."),a=null);this._set("minDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minSize",{set:function(a){a&&this.stops&&(y.warn("cannot set minSize when stops is not null."),a=null);this._set("minSize",a)},enumerable:!0,configurable:!0});c.prototype.castMinSize=function(a){return w(a)};c.prototype.readMinSize=
function(a,b,c){return A(a,b,c)};Object.defineProperty(c.prototype,"stops",{set:function(a){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value})):a&&(y.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),a=null);this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transformationType",
{get:function(){return t.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0});c.prototype.readValueExpression=function(a,b){return a||b.expression&&"$view.scale"};c.prototype.writeValueExpressionWebScene=function(a,b,c,d){"$view.scale"===a?d&&d.messages&&(a=this.index,d.messages.push(new k("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,
propertyName:("string"===typeof a?a:"visualVariables["+a+"]")+".valueExpression",context:d}))):b[c]=a};c.prototype.readValueUnit=function(a,b,c){return a?E.read(a):null};c.prototype.getSize=function(a,b){var c=this._getInputValue(a,b);a=t.getSizeForValue(c,this,a,b,this._cache.ipData);return null===a||void 0===a||isNaN(a)?0:a};c.prototype.getSizeRangeAtScale=function(a,b){var c=b&&"3d"===b.type;if(!(this._cache.isScaleDriven&&c||a))return null;b={scale:a,view:b};a=t.getSizeFromNumberOrVariable(this.minSize,
z,b);b=t.getSizeFromNumberOrVariable(this.maxSize,z,b);if(null!=a||null!=b)return a>b&&(c=b,b=a,a=c),{minSize:a,maxSize:b}};c.prototype.clone=function(){return new d({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:t.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:t.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,
stops:this.stops&&this.stops.map(function(a){return a.clone()}),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};c.prototype._getInputValue=function(a,b){var c="number"===typeof a,d=c?null:a,e=d&&d.attributes,f=c?a:null,g=this._cache;a=g.compiledFunc;if(g.isScaleDriven)d=
b&&b.scale,b=b&&b.view,f=null==d||b&&"3d"===b.type?this._getAverageSizeValue():d;else if(!c)switch(this.inputValueType){case "expression":b=u.getViewInfo(b);b=u.createExecContext(d,b);f=u.executeFunction(a,b);break;case "field":e&&(f=e[this.field]);break;case "unknown":f=null}if(!t.isValidNumber(f))return null;if(c||!this.normalizationField)return f;c=e?parseFloat(e[this.normalizationField]):null;return t.isValidNumber(c)&&0!==c?f/c:null};c.prototype._getAverageSizeValue=function(){var a=null,b=null;
(b=this.stops)?(a=b[0].value,b=b[b.length-1].value):(a=this.minDataValue||0,b=this.maxDataValue||0);return(a+b)/2};var d;f([b.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"_cache",null);f([b.property({type:x.apiValues,json:{type:x.jsonValues,origins:{"web-map":{read:!1}},read:x.read,write:x.write}})],c.prototype,"axis",void 0);f([b.property({type:String,value:null,json:{read:!1}})],c.prototype,"expression",null);f([b.property()],c.prototype,"index",null);f([b.property({type:String,
readOnly:!0,dependsOn:["field","valueExpression"]})],c.prototype,"inputValueType",null);f([b.property({type:p,json:{write:!0}})],c.prototype,"legendOptions",void 0);f([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxDataValue",null);f([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxSize",null);f([b.cast("maxSize")],c.prototype,"castMaxSize",null);f([b.reader("maxSize")],c.prototype,"readMaxSize",null);f([b.property({type:Number,value:null,json:{write:!0}})],
c.prototype,"minDataValue",null);f([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minSize",null);f([b.cast("minSize")],c.prototype,"castMinSize",null);f([b.reader("minSize")],c.prototype,"readMinSize",null);f([b.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);f([b.property({type:String})],c.prototype,"scaleBy",void 0);f([b.property({type:[q],value:null,json:{write:!0}})],c.prototype,"stops",null);f([b.property({type:["outline"],json:{write:!0}})],
c.prototype,"target",void 0);f([b.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],c.prototype,"transformationType",null);f([b.property({type:["size"],json:{type:["sizeInfo"]}})],c.prototype,"type",void 0);f([b.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],c.prototype,"useSymbolValue",void 0);f([b.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);f([b.reader("valueExpression",
["valueExpression","expression"])],c.prototype,"readValueExpression",null);f([b.writer("web-scene","valueExpression")],c.prototype,"writeValueExpressionWebScene",null);f([b.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],c.prototype,"valueRepresentation",void 0);f([b.property({type:E.apiValues,json:{write:E.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],c.prototype,"valueUnit",void 0);f([b.reader("valueUnit")],c.prototype,"readValueUnit",null);return c=
d=f([b.subclass("esri.renderers.visualVariables.SizeVariable")],c)}(b.declared(c));return B})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k){return function(a){function e(b){b=a.call(this,b)||this;b.label=null;b.size=null;b.value=null;return b}l(e,a);
d=e;e.prototype.clone=function(){return new d({label:this.label,size:this.size,value:this.value})};var d;f([k.property({type:String,json:{write:!0}})],e.prototype,"label",void 0);f([k.property({type:Number,cast:g.toPt,json:{write:!0}})],e.prototype,"size",void 0);f([k.property({type:Number,json:{write:!0}})],e.prototype,"value",void 0);return e=d=f([k.subclass("esri.renderers.visualVariables.support.SizeStop")],e)}(k.declared(h))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),
function(m,a,l,f,h,g){return function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.customValues=null;return d}l(e,a);g=e;e.prototype.clone=function(){return new g({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};var g;f([h.property({type:[Number],json:{write:!0}})],e.prototype,"customValues",void 0);return e=g=f([h.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],e)}(h.declared(g))})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/kebabDictionary ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q){var p=k.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),t={color:d,size:q,opacity:b,rotation:c},u=new g.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),w=/^\[([^\]]+)\]$/i;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.colorVariables=null;b.opacityVariables=null;b.rotationVariables=null;b.sizeVariables=null;return b}l(b,a);Object.defineProperty(b.prototype,"visualVariables",
{set:function(a){this._resetVariables();if((a=a&&a.filter(function(a){return!!a}))&&a.length){for(var b=0,c=a;b<c.length;b++){var d=c[b];switch(d.type){case "color":this.colorVariables.push(d);break;case "opacity":this.opacityVariables.push(d);break;case "rotation":this.rotationVariables.push(d);break;case "size":this.sizeVariables.push(d)}}this.sizeVariables.length&&this.sizeVariables.some(function(a){return!!a.target})&&a.sort(function(a,b){var c=null;return c=a.target===b.target?0:a.target?1:-1});
for(b=0;b<a.length;b++)d=a[b],d.index=b}this._set("visualVariables",a)},enumerable:!0,configurable:!0});b.prototype.readVariables=function(a,b,c){var d=b.rotationExpression;b=b.rotationType;if(d=(d=d&&d.match(w))&&d[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:b,field:d});if(a)return a.map(function(a){var b=u.read(a.type),d=t[b];d||(p.warn("Unknown variable type: "+b),c&&c.messages&&c.messages.push(new e("visual-variable:unsupported","visualVariable of type '"+b+"' is not supported",{definition:a,
context:c})));b=new d;b.read(a,c);return b})};b.prototype.writeVariables=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d].toJSON(b);e&&c.push(e)}return c};b.prototype.getVisualVariableValues=function(a,b){var c=[];this.colorVariables.forEach(function(d){var e=d.getColor(a,b);c.push({variable:d,value:e})});this.opacityVariables.forEach(function(d){var e=d.getOpacity(a,b);c.push({variable:d,value:e})});this.rotationVariables.forEach(function(d){var e=d.getRotationAngle(a,b);c.push({variable:d,
value:e})});this.sizeVariables.forEach(function(d){var e=d.getSize(a,b);c.push({variable:d,value:e})});return c.filter(function(a){return null!=a.value})};b.prototype.getColor=function(a,b){if(this.colorVariables.length)return this.colorVariables[0].getColor(a,b)};b.prototype.getOpacity=function(a,b){if(this.opacityVariables.length)return this.opacityVariables[0].getOpacity(a,b)};b.prototype.getRotationAngle=function(a,b){if(this.rotationVariables.length)return this.rotationVariables[0].getRotationAngle(a,
b)};b.prototype.getSize=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSize(a,b)};b.prototype.getSizeRangeAtScale=function(a,b){if(this.sizeVariables.length)return this.sizeVariables[0].getSizeRangeAtScale(a,b)};b.prototype._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};f([n.property()],b.prototype,"visualVariables",null);return b=f([n.subclass("esri.renderers.visualVariables.VisualVariableFactory")],
b)}(n.declared(h))})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(m,a,l,f,h,g,k,e,n,d){function b(a,b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new l(a)}function c(a,c,e){(a=a.symbolLayers)&&a.forEach(function(a){if(a){var f=a.material;c=c||f&&f.color||null!=e&&u;var g=b(c,e);f?a.material.color=g:a.material=new d.default({color:g});
null!=e&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=b(a.outline.color,e))}})}function q(a,b,c){(a=a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=b;break;case "object":switch(c){case "width":a.width=b;break;case "depth":a.depth=b;break;case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:p.warn("symbolUtils: applySizeToSymbol",
"symbolLayer not supported")}})}Object.defineProperty(a,"__esModule",{value:!0});var p=k.getLogger("esri.symbols.support.utils"),t=/\/resource\/(.*?)\.svg$/,u=new l("white");a.getSymbolOutlineSize=function(a){if(!a)return 0;if(f.isSymbol3D(a)){var b=a.symbolLayers&&a.symbolLayers.length;b?(a=a.symbolLayers.getItemAt(b-1),a="outline"in a&&a.outline&&a.outline.size):a=void 0;return a||0}return(a=n.getStroke(a))&&e.px2pt(a.width)||0};a.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===
a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||"extrude"===a.type});default:return!1}};a.getIconHref=function(a,b){b=b.resource.href;return!g("esri-canvas-svg-support")&&a.styleOrigin&&t.test(b)?b.replace(t,"/resource/png/$1.png"):b};a.applyOpacityToColor=b;a.applyColorToSymbol=function(a,d,e){if(a&&(d||null!=e))if(d&&(d=new l(d)),f.isSymbol3D(a))c(a,d,e);else if(f.isSymbol2D(a)){if(d=
d||a.color)a.color=b(d,e);null!=e&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=b(a.outline.color,e))}};a.applySizeToSymbol=function(a,b,c){if(a&&null!=b)if(f.isSymbol3D(a))q(a,b,c);else if(f.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=b;break;case "picture-marker":c=a.width/a.height;1<c?(a.width=b,a.height=b*c):(a.width=b*c,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;case "cim":break;
default:h.neverReached(a)}};a.applyRotationToSymbol=function(a,b,c){a&&null!=b&&(f.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!f.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils".split(" "),
function(m,a,l,f,h,g,k,e){function n(a){if(!a)return null;var b,c=e.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=n(a.outline);break;case "simple-line":"none"!==a.style&&0!==c&&(b={color:a.color,style:t(a.style),width:c,cap:a.cap,join:"miter"===a.join?e.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(a,"__esModule",{value:!0});var d=m.toUrl("../../symbols/patterns/"),b={type:"pattern",x:0,y:0,width:0,height:0,src:""},c=
{left:"start",center:"middle",right:"end",justify:"start"},q={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},p=new g(1E3);a.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&c[a.toLowerCase()]||"middle"};a.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&q[a.toLowerCase()]||"alphabetic"};a.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};a.getFill=function(a){var c=a.style,f=null;if(a)switch(a.type){case "simple-marker":"cross"!==
c&&"x"!==c&&(f=a.color);break;case "simple-fill":"solid"===c?f=a.color:"none"!==c&&(f=l({},b,{src:d+c+".png",width:8,height:8}));break;case "picture-fill":f=l({},b,{src:a.url,width:e.pt2px(a.width)*a.xscale,height:e.pt2px(a.height)*a.yscale,x:e.pt2px(a.xoffset),y:e.pt2px(a.yoffset)});break;case "text":f=a.color}return f};a.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return void 0!==p.get(c)?k.resolve(p.get(c)):h(a,{responseType:"image"}).then(function(a){a=a.data;var d=a.naturalWidth,e=a.naturalHeight,
f=document.createElement("canvas");f.width=d;f.height=e;var g=f.getContext("2d");g.fillStyle=b;g.fillRect(0,0,d,e);g.globalCompositeOperation="destination-in";g.drawImage(a,0,0);a=f.toDataURL();p.put(c,a);return a})};a.getStroke=n;a.create2DColorRamp=function(a){var b=a.colors,c=a.numClasses,d=a.size;a=a.surface.createGroup();for(var d=(d||75)/c,e=0;e<c;e++)for(var f=e*d,g=0;g<c;g++){var h=b[e][g];a.createRect({x:g*d,y:f,width:d,height:d}).setFill(h).setStroke(null)}return a};var t=function(){var a=
{};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();a.defaultThematicColor=new f([128,128,128])})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function d(){var b=
null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};var b;f([k.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);f([k.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);f([k.property({type:Number,
json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0);f([k.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0);f([k.property({types:h.symbolTypesRenderer,json:{origins:{"web-scene":{read:e.read,write:{target:{symbol:{types:h.symbolTypesRenderer3D}},writer:e.writeTarget}}},read:e.read,write:e.writeTarget}})],d.prototype,"symbol",void 0);return d=b=f([k.subclass("esri.renderers.support.ClassBreakInfo")],
d)}(k.declared(g));a.ClassBreakInfo=m;a.default=m})},"esri/renderers/DotDensityRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../support/arcadeUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w){return function(a){function b(b){b=a.call(this,b)||this;b.attributes=null;b.backgroundColor=new e([0,0,0,0]);b.blendDots=!0;b.dotShape="square";b.dotSize=1;b.legendOptions=null;b.outline=new w;b.referenceDotValue=null;b.referenceScale=null;b.seed=1;b.type="dot-density";return b}l(b,a);c=b;b.prototype.calculateDotValue=function(a){if(null==this.referenceScale)return this.referenceDotValue;a=a/this.referenceScale*this.referenceDotValue;return 1>a?1:a};b.prototype.getSymbol=
function(a,b){return new u({outline:this.outline})};b.prototype.getSymbols=function(){return[this.getSymbol(null)]};b.prototype.clone=function(){return new c({attributes:n.clone(this.attributes),backgroundColor:n.clone(this.backgroundColor),blendDots:n.clone(this.blendDots),dotShape:n.clone(this.dotShape),dotSize:n.clone(this.dotSize),legendOptions:n.clone(this.legendOptions),outline:n.clone(this.outline),referenceScale:n.clone(this.referenceScale),referenceDotValue:n.clone(this.referenceDotValue),
visualVariables:n.clone(this.visualVariables)})};b.prototype.getControllerHash=function(){var a=this.attributes.map(function(a){return a.field||a.valueExpression||""}),b=this.outline&&JSON.stringify(this.outline.toJSON())||"";return a+"-"+b};b.prototype.collectRequiredFields=function(a,b){return k(this,void 0,void 0,function(){var c,d,e;return g(this,function(f){switch(f.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:f.sent();c=0;for(d=this.attributes;c<d.length;c++)e=d[c],e.valueExpression&&
t.extractFieldNames(e.valueExpression).forEach(function(b){a.add(b)}),e.field&&a.add(e.field);return[2]}})})};var c;f([d.property({type:[q],json:{write:!0}})],b.prototype,"attributes",void 0);f([d.property({type:e,json:{write:!0}})],b.prototype,"backgroundColor",void 0);f([d.property({type:Boolean,json:{write:!0}})],b.prototype,"blendDots",void 0);f([d.property({type:String,json:{write:!0}})],b.prototype,"dotShape",void 0);f([d.property({type:Number,json:{write:!0}})],b.prototype,"dotSize",void 0);
f([d.property({type:p,json:{write:!0}})],b.prototype,"legendOptions",void 0);f([d.property({type:w,json:{default:null,write:!0}})],b.prototype,"outline",void 0);f([d.property({type:Number,json:{write:!0}})],b.prototype,"referenceDotValue",void 0);f([d.property({type:Number,json:{write:!0}})],b.prototype,"referenceScale",void 0);f([d.property({type:Number,json:{write:!0}})],b.prototype,"seed",void 0);f([d.enumeration.serializable()({dotDensity:"dot-density"})],b.prototype,"type",void 0);return b=c=
f([d.subclass("esri.renderers.DotDensityRenderer")],b)}(d.declared(b,c))})},"esri/renderers/support/AttributeColorInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(m,a,l,f,h,g,k,e,n){var d=k.getLogger("esri.renderers.support.AttributeColorInfo");return function(a){function b(b){b=a.call(this,
b)||this;b.color=null;b.field=null;b.label=null;b.valueExpression=null;b.valueExpressionTitle=null;return b}l(b,a);g=b;b.prototype.castField=function(a){return null==a?a:"function"===typeof a?(d.error(".field: field must be a string value"),null):n.ensureString(a)};b.prototype.clone=function(){return new g({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};var g;f([e.property({type:h,json:{type:[Number],
write:!0}})],b.prototype,"color",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);f([e.cast("field")],b.prototype,"castField",null);f([e.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"valueExpression",void 0);f([e.property({type:String,json:{write:!0}})],b.prototype,"valueExpressionTitle",void 0);return b=g=f([e.subclass("esri.renderers.support.AttributeColorInfo")],b)}(e.declared(g))})},
"esri/renderers/support/DotDensityLegendOptions":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g){return function(a){function e(){var d=null!==a&&a.apply(this,arguments)||this;d.unit=null;return d}f(e,a);h=e;e.prototype.clone=function(){return new h({unit:this.unit})};var h;l([g.property({type:String,json:{write:!0}})],e.prototype,"unit",void 0);
return e=h=l([g.subclass("esri.renderers.support.DotDensityLegendOptions")],e)}(g.declared(h))})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c){return function(a){function b(b){b=
a.call(this)||this;b.blurRadius=10;b.colorStops=[new c.HeatmapColorStop({ratio:0,color:new k("rgba(255, 140, 0, 0)")}),new c.HeatmapColorStop({ratio:.75,color:new k("rgba(255, 140, 0, 1)")}),new c.HeatmapColorStop({ratio:.9,color:new k("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}l(b,a);m=b;b.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c;return h(this,function(e){(c=this.field)&&
"string"===typeof c&&d.collectField(a,b,c);return[2]})})};b.prototype.clone=function(){return new m({blurRadius:this.blurRadius,colorStops:e.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};var m;f([n.property({type:Number,json:{write:!0}})],b.prototype,"blurRadius",void 0);f([n.property({type:[c.HeatmapColorStop],json:{write:!0}})],b.prototype,"colorStops",void 0);f([n.property({type:String,json:{write:!0}})],b.prototype,
"field",void 0);f([n.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],b.prototype,"fieldOffset",void 0);f([n.property({type:Number,json:{write:!0}})],b.prototype,"maxPixelIntensity",void 0);f([n.property({type:Number,json:{write:!0}})],b.prototype,"minPixelIntensity",void 0);f([n.enumeration.serializable()({heatmap:"heatmap"})],b.prototype,"type",void 0);return b=m=f([n.subclass("esri.renderers.HeatmapRenderer")],b)}(n.declared(b))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function e(b){b=a.call(this)||this;b.color=null;b.ratio=null;return b}l(e,a);d=e;e.prototype.clone=function(){return new d({color:this.color,ratio:this.ratio})};var d;f([k.property({type:h,json:{write:!0}})],e.prototype,"color",void 0);f([k.property({type:Number,json:{write:!0}})],e.prototype,"ratio",void 0);return e=d=f([k.subclass("esri.renderers.support.HeatmapColorStop")],e)}(k.declared(g));a.HeatmapColorStop=
m;a.default=m})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../core/lang ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesRenderer ../symbols/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e,n,d,b,c){return function(a){function b(b){b=a.call(this)||this;b.description=null;b.label=null;b.symbol=null;b.type=
"simple";return b}l(b,a);d=b;b.prototype.writeSymbolWebScene=function(a,b,d,e){c.writeTarget(a,b,d,e)};b.prototype.writeSymbol=function(a,b,d,e){c.writeTarget(a,b,d,e)};b.prototype.readSymbol=function(a,b,d){return c.read(a,b,d)};b.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){return h(this,function(c){return[2,this.collectVVRequiredFields(a,b)]})})};b.prototype.getSymbol=function(a,b){return this.symbol};b.prototype.getSymbols=function(){return this.symbol?
[this.symbol]:[]};b.prototype.clone=function(){return new d({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:e.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};var d;f([n.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);f([n.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);f([n.property({types:k.symbolTypesRenderer})],b.prototype,"symbol",void 0);f([n.writer("web-scene",
"symbol",{symbol:{types:k.symbolTypesRenderer3D}})],b.prototype,"writeSymbolWebScene",null);f([n.writer("symbol")],b.prototype,"writeSymbol",null);f([n.reader("symbol")],b.prototype,"readSymbol",null);f([n.enumeration.serializable()({simple:"simple"})],b.prototype,"type",void 0);return b=d=f([n.subclass("esri.renderers.SimpleRenderer")],b)}(n.declared(d,b))})},"esri/renderers/StretchRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/stretchRendererUtils ../tasks/support/ColorRamp ../tasks/support/colorRamps".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.colorRamp=null;b.computeGamma=!1;b.dynamicRangeAdjustment=!0;b.gamma=[];b.maxPercent=null;b.minPercent=null;b.numberOfStandardDeviations=null;b.outputMax=null;b.outputMin=null;b.sigmoidStrengthLevel=null;b.statistics=[];b.useGamma=!1;b.stretchType="none";b.type="raster-stretch";return b}l(c,a);e=c;c.prototype.readColorRamp=function(a,c){if(a)return b.fromJSON(a)};c.prototype.clone=function(){return new e({stretchType:this.stretchType,
outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:g.clone(this.statistics),gamma:g.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:g.clone(this.colorRamp),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};var e;f([k.property({type:d,json:{write:!0}})],c.prototype,"colorRamp",void 0);f([k.reader("colorRamp")],
c.prototype,"readColorRamp",null);f([k.property({type:Boolean,json:{write:!0}})],c.prototype,"computeGamma",void 0);f([k.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],c.prototype,"dynamicRangeAdjustment",void 0);f([k.property({type:[Number],json:{write:{allowNull:!0}}})],c.prototype,"gamma",void 0);f([k.property({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"maxPercent",void 0);f([k.property({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"minPercent",
void 0);f([k.property({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"numberOfStandardDeviations",void 0);f([k.property({type:Number,json:{read:{source:"max"},write:{target:"max",allowNull:!0}}})],c.prototype,"outputMax",void 0);f([k.property({type:Number,json:{read:{source:"min"},write:{target:"min",allowNull:!0}}})],c.prototype,"outputMin",void 0);f([k.property({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"sigmoidStrengthLevel",void 0);f([k.property({type:[[Number]],json:{write:{allowNull:!0}}})],
c.prototype,"statistics",void 0);f([k.property({type:Boolean,json:{write:!0}})],c.prototype,"useGamma",void 0);f([k.property({type:n.stretchTypeJSONDict.apiValues,json:{type:n.stretchTypeJSONDict.jsonValues,read:n.stretchTypeJSONDict.read,write:n.stretchTypeJSONDict.write}})],c.prototype,"stretchType",void 0);f([k.enumeration.serializable()({rasterStretch:"raster-stretch"})],c.prototype,"type",void 0);return c=e=f([k.subclass("esri.renderers.StretchRenderer")],c)}(k.declared(e))})},"esri/renderers/support/stretchRendererUtils":function(){define(["require",
"exports","../../core/kebabDictionary"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.stretchTypeJSONDict=new l.default({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"})})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesRenderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B,F,D){var G=q.getLogger("esri.renderers.UniqueValueRenderer"),H=u.ensureType(E.default);return function(a){function m(b){b=a.call(this)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,e={type:"collection",added:[],removed:[],changed:[],unchanged:[]},f=function(f){var g=d.find(a,function(a){return a.value===b[f].value});g?y.diff(g,b[f])?(e.changed.push({type:"complete",oldValue:g,newValue:b[f]}),c=!0):e.unchanged.push({oldValue:g,newValue:b[f]}):(e.added.push(b[f]),c=!0)},g=0;g<b.length;g++)f(g);f=function(f){d.find(b,function(b){return b.value===a[f].value})||(e.removed.push(a[f]),c=!0)};for(g=0;g<
a.length;g++)f(g);return c?e:void 0}}};b._set("uniqueValueInfos",[]);return b}l(m,a);q=m;m.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){F.writeTarget(a,b,c,d)};m.prototype.castField=function(a){return null==a||"function"===typeof a?a:u.ensureString(a)};m.prototype.writeField=function(a,c,d,e){"string"===typeof a?c[d]=a:e&&e.messages?e.messages.push(new b("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):G.error(".field: cannot write field to JSON since it's not a string value")};
Object.defineProperty(m.prototype,"compiledFunc",{get:function(){return B.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});m.prototype.readDefaultSymbol=function(a,b,c){return F.read(a,b,c)};m.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};m.prototype.writeDefaultSymbol=
function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};m.prototype.readPortal=function(a,b,c){return c.portal||A.getDefault()};m.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=p.fromJSON(b.styleUrl,c),Object.freeze({styleUrl:a})};m.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=p.toJSON(a.styleUrl,d))};Object.defineProperty(m.prototype,"uniqueValueInfos",
{set:function(a){this.styleOrigin?G.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});m.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?G.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?H(a):new E.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),
this._valueInfoMap[a.value]=a)};m.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)G.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};m.prototype.getUniqueValueInfo=function(a,b){var c=this.field,d=a.attributes,e;this.valueExpression?e=B.executeFunction(this.compiledFunc,
B.createExecContext(a,B.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};m.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};m.prototype.getSymbols=function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&
a.push(this.defaultSymbol);return a};m.prototype.clone=function(){var a=new q({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:c.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:c.clone(this.visualVariables),legendOptions:c.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:c.clone(this.backgroundFillSymbol)});
this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=c.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(c.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};m.prototype.collectRequiredFields=function(a,b){return k(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:return c.sent(),w.collectField(a,
b,this.field),w.collectField(a,b,this.field2),w.collectField(a,b,this.field3),[4,w.collectArcadeFieldNames(a,b,this.valueExpression)];case 2:return c.sent(),[2]}})})};m.prototype.populateFromStyle=function(){var a=this;return D.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var f=new e.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=f,a._isDefaultSymbolDerived=!0);f=new E.default({value:d.name,symbol:f});c.push(f);a._valueInfoMap[d.name]=f});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};m.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};m.fromPortalStyle=
function(a,b){var c=new q(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||A.getDefault());b=c.populateFromStyle();b.catch(function(b){G.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};m.fromStyleUrl=function(a,b){b=new q(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){G.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};var q;f([t.enumeration.serializable()({uniqueValue:"unique-value"})],m.prototype,"type",void 0);f([t.property({types:{base:e.BaseSymbol,key:"type",typeMap:{"simple-fill":n.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":n.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":n.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{read:F.read,write:F.writeTarget}})],m.prototype,"backgroundFillSymbol",void 0);f([t.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:e.PolygonSymbol3D}})],
m.prototype,"writeBackgroundFillSymbolWebScene",null);f([t.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],m.prototype,"field",void 0);f([t.cast("field")],m.prototype,"castField",null);f([t.writer("field")],m.prototype,"writeField",null);f([t.property({type:String,json:{write:!0}})],m.prototype,"field2",void 0);f([t.property({type:String,json:{write:!0}})],m.prototype,"field3",void 0);f([t.property({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0);
f([t.property({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0);f([t.property({dependsOn:["valueExpression"]})],m.prototype,"compiledFunc",null);f([t.property({type:x.default,json:{write:!0}})],m.prototype,"legendOptions",void 0);f([t.property({type:String,json:{write:!0}})],m.prototype,"defaultLabel",void 0);f([t.property({types:n.symbolTypesRenderer})],m.prototype,"defaultSymbol",null);f([t.reader("defaultSymbol")],m.prototype,"readDefaultSymbol",null);f([t.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:n.symbolTypesRenderer3D}})],m.prototype,"writeDefaultSymbolWebScene",null);f([t.writer("defaultSymbol")],m.prototype,"writeDefaultSymbol",null);f([t.property({type:String,json:{write:!0}})],m.prototype,"fieldDelimiter",void 0);f([t.property({type:A,readOnly:!0})],m.prototype,"portal",void 0);f([t.reader("portal",["styleName"])],m.prototype,"readPortal",null);f([t.property({readOnly:!0})],m.prototype,"styleOrigin",void 0);f([t.reader("styleOrigin",["styleName",
"styleUrl"])],m.prototype,"readStyleOrigin",null);f([t.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],m.prototype,"writeStyleOrigin",null);f([t.property({type:[E.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],m.prototype,"uniqueValueInfos",null);f([h(1,t.cast(n.ensureType))],m.prototype,"addUniqueValueInfo",null);return m=q=f([t.subclass("esri.renderers.UniqueValueRenderer")],m)}(t.declared(C,z))})},"esri/renderers/support/diffUtils":function(){define("require exports ../../core/Accessor ../../core/Collection ../../core/maybe ../../core/accessorSupport/utils".split(" "),
function(m,a,l,f,h,g){function k(a){return a instanceof f?Object.keys(a.items):a instanceof l?g.getProperties(a).keys():a?Object.keys(a):[]}function e(a,b){return a instanceof f?a.items[b]:a[b]}function n(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function d(a){return a?a.declaredClass:null}function b(a,c){var f,g=a.diff;if(g&&"function"===typeof g)return g(a,c);var p=k(a),m=k(c);if(0!==p.length||0!==m.length){if(!p.length||!m.length||n(a,c))return{type:"complete",oldValue:a,
newValue:c};var t=m.filter(function(a){return-1===p.indexOf(a)}),y=p.filter(function(a){return-1===m.indexOf(a)}),t=p.filter(function(b){return-1<m.indexOf(b)&&e(a,b)!==e(c,b)}).concat(t,y).sort();if((y=d(a))&&-1<q.indexOf(y)&&t.length)return{type:"complete",oldValue:a,newValue:c};var x,y=a instanceof l&&c instanceof l,E;for(E in t){var B=t[E],F=e(a,B),D=e(c,B),G=void 0;!(y||"function"!==typeof F&&"function"!==typeof D)||F===D||null==F&&null==D||(G=g&&g[B]&&"function"===typeof g[B]?g[B](F,D):"object"===
typeof F&&"object"===typeof D&&d(F)===d(D)?b(F,D):{type:"complete",oldValue:F,newValue:D},h.isSome(G)&&(h.isSome(x)?x.diff[B]=G:x={type:"partial",diff:(f={},f[B]=G,f)}))}return x}}function c(a){if(h.isNone(a))return!0;switch(a.type){case "complete":return!1;case "collection":for(var b=0,d=a.added;b<d.length;b++){var e=d[b];if(!c(e))return!1}b=0;for(d=a.removed;b<d.length;b++)if(e=d[b],!c(e))return!1;b=0;for(a=a.changed;b<a.length;b++)if(e=a[b],!c(e))return!1;return!0;case "partial":for(b in a.diff)if(e=
a.diff[b],!c(e))return!1;return!0}}Object.defineProperty(a,"__esModule",{value:!0});var q=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];a.diff=function(a,c){if("function"!==typeof a&&"function"!==typeof c&&(a||c))return!a||!c||"object"===typeof a&&"object"===typeof c&&d(a)!==d(c)?{type:"complete",oldValue:a,newValue:c}:b(a,c)};a.isEmpty=c})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),
function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.value=null;return b}l(d,a);b=d;d.prototype.clone=function(){return new b({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};var b;f([k.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);f([k.property({type:String,json:{write:!0}})],
d.prototype,"label",void 0);f([k.property({types:h.symbolTypesRenderer,json:{origins:{"web-scene":{read:e.read,write:{target:{symbol:{types:h.symbolTypesRenderer3D}},writer:e.writeTarget}}},read:e.read,write:e.writeTarget}})],d.prototype,"symbol",void 0);f([k.property({type:String,json:{write:!0}})],d.prototype,"value",void 0);return d=b=f([k.subclass("esri.renderers.support.UniqueValueInfo")],d)}(k.declared(g));a.UniqueValueInfo=m;a.default=m})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/has ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p){function t(a,b){return y(a).then(function(b){return{data:b.data,baseUrl:n.removeFile(a),styleUrl:a}})}function u(a,b){b=b.portal||d.getDefault();var c,e=b.url+" - "+(b.user&&b.user.username)+" - "+a;x[e]||(x[e]=w(a,b).then(function(a){c=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:c.itemUrl,styleName:a}}));return x[e]}function w(a,c){return c.load().then(function(){var d=new b({disableExtraQuery:!0,query:"owner:"+E+" AND type:"+B+' AND typekeywords:"'+
a+'"'});return c.queryItems(d)}).then(function(b){b=b.results;var c=null,d=a.toLowerCase();if(b&&Array.isArray(b))for(var e=0;e<b.length;e++){var f=b[e];if(f.typeKeywords.some(function(a){return a.toLowerCase()===d})&&f.type===B&&f.owner===E){c=f;break}}if(!c)throw new g("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});return c.load()})}function A(a,b){return a.styleUrl?t(a.styleUrl,b):a.styleName?u(a.styleName,b):e.reject(new g("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function C(a,b,d){for(var k=a.data,l={portal:d.portal,url:n.urlToObject(a.baseUrl),origin:"portal-item"},m=function(e){if(e.name!==b)return"continue";var g=n.fromJSON(z(e),l),k=e.thumbnail&&e.thumbnail.href,m=e.thumbnail&&e.thumbnail.imageData;h.isDevEnvironment()&&(g=h.adjustStaticAGOUrl(g),k=h.adjustStaticAGOUrl(k));var t={portal:d.portal,url:n.urlToObject(n.removeFile(g)),origin:"portal-item"};return{value:y(g).then(function(e){if((e=
c.fromJSON(e.data,t))&&f.isSymbol3D(e)){if(k){var g=n.fromJSON(k,l);e.thumbnail=new p.default({url:g})}else m&&(e.thumbnail=new p.default({url:"data:image/png;base64,"+m}));a.styleUrl?e.styleOrigin=new q({portal:d.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(e.styleOrigin=new q({portal:d.portal,styleName:a.styleName,name:b}))}return e})}},t=0,k=k.items;t<k.length;t++){var u=m(k[t]);if("object"===typeof u)return u.value}return e.reject(new g("symbolstyleutils:symbol-name-not-found","The symbol name '"+
b+"' could not be found",{symbolName:b}))}function z(a){if(a.formatInfos&&!k("enable-feature:jschmid/force-wosr"))for(var b=0,c=a.formatInfos;b<c.length;b++){var d=c[b];if("gltf"===d.type)return d.href}return a.webRef}function y(a){return l(n.normalize(a),{responseType:"json",query:{f:"json"}})}Object.defineProperty(a,"__esModule",{value:!0});var x={};a.fetchStyle=A;a.resolveWebStyleSymbol=function(a,b){return a.name?A(a,b).then(function(c){return C(c,a.name,b)}):e.reject(new g("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference"))};a.fetchSymbolFromStyle=C;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var E="esri_en",B="Style"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.isDevEnvironment=function(a){a=a||window.location.hostname;return k.some(function(e){return null!=a.match(e)})};a.adjustStaticAGOUrl=
function(a,k){if(!a)return a;k=k||window.location.hostname;return null!=k.match(l)||null!=k.match(h)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=k.match(f)||null!=k.match(g)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a};a.isTelemetryDevEnvironment=function(a){a=a||window.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(k).some(function(e){return null!=a.match(e)})};var l=/^devext.arcgis.com$/,f=/^qaext.arcgis.com$/,h=/^[\w-]*\.mapsdevext.arcgis.com$/,g=/^[\w-]*\.mapsqa.arcgis.com$/,
k=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,l,f,/^jsapps.esri.com$/,h,g]})},"esri/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),function(m,a,l,f,h,g,k,e){function n(a,c,e){if(!a)return null;var b=0,h={};a=a.clone();var k=a.visualVariables,l=null;if("simple"!==a.type&&"dot-density"!==a.type){var n=a.valueExpression;
if(!a.field&&n){var m="$$fake"+b++,q=g.createFunction(n);h[m]=function(a,b){d.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return g.executeFunction(q,{vars:{$feature:d,$view:g.getViewInfo(b)},spatialReference:c})};a.field=m;a.valueExpression=null;l=function(a,b){b.attributes[m]=h[m](b);return a.valueExpression?a.getSymbol(f.fromJSON(b)):a.getSymbol(b)}}}k&&(a.visualVariables=k.map(function(a){var f="size"===a.type&&a.valueExpression&&"$view.scale"===a.valueExpression;if(a.normalizationField){var k=
a.field,p=a.normalizationField,f="$$fake"+b++;h[f]=function(a,b){return a.attributes[k]/a.attributes[p]};a=a.clone();a.field=f;a.normalizationField=null;return a}if(a.valueExpression&&!f){var l=a.valueExpression,f="$$fake"+b++,n=g.createFunction(l);h[f]=function(a,b){d.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return g.executeFunction(n,{vars:{$feature:d,$view:g.getViewInfo(b)},spatialReference:c})};a=a.clone();a.field=f;a.valueExpression=null}return a}));return{renderer:a,normalizingFunctions:h,
getSymbolFunction:l}}Object.defineProperty(a,"__esModule",{value:!0});var d=new h;a.createRendererInfo=function(a,c,d){var b=(c=n(a,c,d)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},c.normalizingFunctions),f=c&&c.getSymbolFunction;a=c&&c.renderer||a;c=e.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:c.vvFields,vvRanges:c.vvRanges,getValue:function(a,c){var d=b[c];return d?d(a):a.attributes[c]},getSymbol:function(a){return f?f(this.renderer,a):this.renderer.getSymbol?
this.renderer.getSymbol.call(this.renderer,a):null}}};a.getNormalizedRenderer=function(a,c,d){return(c=n(a,c,d)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},c.renderer)||a};a.getSymbol=function(a,c){return a.getSymbol(c)};a.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if("visualVariables"in a&&a.visualVariables){var b=0;for(a=a.visualVariables;b<a.length;b++){var d=a[b];switch(d.type){case "color":case "opacity":if(d.stops&&
8<d.stops.length)return!1;break;case "size":if(e.getTypeOfSizeVisualVariable(d)===k.WGLVVFlag.SIZE_FIELD_STOPS&&d.stops&&6<d.stops.length)return!1}}}return!0}})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(m,a,l,f,h,g,k){function e(a){return g.isNumber(a.minDataValue)&&g.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?h.WGLVVFlag.SIZE_MINMAX_VALUE:
(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?h.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?h.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit?h.WGLVVFlag.SIZE_UNIT_VALUE:h.WGLVVFlag.NONE}function n(a){return{value:a.value,
size:l.toPt(a.size)}}function d(a){return a.map(function(a){return n(a)})}function b(a){return"string"===typeof a||"number"===typeof a?l.toPt(a):{type:"size",expression:a.expression,stops:d(a.stops)}}function c(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(g.isString(a.field))if(a.stops){if(8<a.stops.length)return null;var c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.values[a]=d.value;b.opacities[a]=d.opacity}}else return null;else if(a.stops&&0<=a.stops.length)for(c=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,a=0;8>a;a++)b.values[a]=Infinity,b.opacities[a]=c;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});a.getTypeOfSizeVisualVariable=e;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=n;a.normalizeSizeStops=d;a.normalizeSizeElement=b;a.getVisualVariablesFields=function(a){var b=a&&0<a.length?
{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var g=a&&0<a.length?{}:null,n=g?{}:null;if(!g)return{vvFields:g,vvRanges:n};for(var m=0;m<a.length;m++){var q=a[m],A=q.type;q.field&&(g[A]=q.field);if("size"===A){n.size||(n.size={});var C=q;switch(e(C)){case h.WGLVVFlag.SIZE_MINMAX_VALUE:n.size.minMaxValue={minDataValue:C.minDataValue,maxDataValue:C.maxDataValue,minSize:b(C.minSize),maxSize:b(C.maxSize)};break;case h.WGLVVFlag.SIZE_SCALE_STOPS:n.size.scaleStops=
{stops:d(C.stops)};break;case h.WGLVVFlag.SIZE_FIELD_STOPS:for(var q=[],A=[],C=d(C.stops),z=C.length,y=0;6>y;y++){var x=C[Math.min(y,z-1)];q.push(x.value);A.push(l.pt2px(x.size))}n.size.fieldStops={values:q,sizes:A};break;case h.WGLVVFlag.SIZE_UNIT_VALUE:n.size.unitValue={unit:C.valueUnit,valueRepresentation:C.valueRepresentation}}}else if("color"===A)for(q=k.convertVisualVariables([q],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),n.color=q.color,y=0;32>y;y+=4)f.premultiplyAlpha(n.color.colors,
y,!0);else"opacity"===A?n.opacity=c(q):"rotation"===A&&(n.rotation={type:q.rotationType})}return{vvFields:g,vvRanges:n}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){function c(a){return null!==a&&void 0!==a}function q(a){return"number"===typeof a}function p(a){return"string"===typeof a}function t(a,b){a&&a.push(b)}function u(a,b,e,f,g){var h=a.minSize,k=a.maxSize;if(a.expression)return t(g,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=f.symbolSize[e],b.minSize[e]=a,b.maxSize[e]=a,b.offset[e]=b.minSize[e],b.factor[e]=0,b.type[e]=1,!0;if(c(a.field)){if(c(a.stops)){if(2===a.stops.length&&
q(a.stops[0].size)&&q(a.stops[1].size))return w(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,b,e),b.type[e]=1,!0;t(g,"Could not convert size info: stops only supported with 2 elements");return!1}if(q(h)&&q(k)&&c(a.minDataValue)&&c(a.maxDataValue))return w(h,k,a.minDataValue,a.maxDataValue,b,e),b.type[e]=1,!0;if(null!=d.meterIn[a.valueUnit])return b.minSize[e]=-Infinity,b.maxSize[e]=Infinity,b.offset[e]=0,b.factor[e]=1/d.meterIn[a.valueUnit],b.type[e]=1,!0;if("unknown"===a.valueUnit)return t(g,
"Could not convert size info: proportional size not supported"),!1;t(g,"Could not convert size info: scale-dependent size not supported");return!1}if(!c(a.field)){if(a.stops&&a.stops[0]&&q(a.stops[0].size))return b.minSize[e]=a.stops[0].size,b.maxSize[e]=a.stops[0].size,b.offset[e]=b.minSize[e],b.factor[e]=0,b.type[e]=1,!0;if(q(h))return b.minSize[e]=h,b.maxSize[e]=h,b.offset[e]=h,b.factor[e]=0,b.type[e]=1,!0}t(g,"Could not convert size info: unsupported variant of sizeInfo");return!1}function w(a,
b,c,d,e,f){d=0<Math.abs(d-c)?(b-a)/(d-c):0;e.minSize[f]=0<d?a:b;e.maxSize[f]=0<d?b:a;e.offset[f]=a-c*d;e.factor[f]=d}function A(a,b,c,d){if(a.normalizationField||a.valueRepresentation)return t(d,"Could not convert size info: unsupported property"),null;var e=a.field;if(null!=e&&!p(e))return t(d,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=
a.field;else if(a.field!==b.size.field)return t(d,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(e=u(a,b.size,0,c,d))?b:null;case "height":return(e=u(a,b.size,2,c,d))?b:null;case "depth":return(e=u(a,b.size,1,c,d))?b:null;case "width-and-depth":return(e=u(a,b.size,0,c,d))&&u(a,b.size,1,c,d),e?b:null;case null:case void 0:case "all":return(e=(e=(e=u(a,b.size,0,c,d))&&u(a,b.size,1,c,d))&&u(a,b.size,2,c,d))?b:null;default:return t(d,'Could not convert size info: unknown axis "'+
a.axis+'""'),null}}function C(a,b,c){for(var d=0;3>d;++d){var e=b.unitInMeters;1===a.type[d]&&(e*=b.modelSize[d],a.type[d]=2);a.minSize[d]/=e;a.maxSize[d]/=e;a.offset[d]/=e;a.factor[d]/=e}if(0!==a.type[0])b=0;else if(0!==a.type[1])b=1;else if(0!==a.type[2])b=2;else return t(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===a.type[d]&&(a.minSize[d]=a.minSize[b],a.maxSize[d]=a.maxSize[b],a.offset[d]=a.offset[b],a.factor[d]=a.factor[b],a.type[d]=a.type[b]);return!0}function z(a,
b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function y(a,b,c){if(a.normalizationField)return t(c,"Could not convert color info: unsupported property"),null;if(p(a.field))if(a.stops){if(8<a.stops.length)return t(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.color.values[a]=d.value;
z(b.color.colors,a,d.color)}}else return t(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length)for(c=a.stops&&0<=a.stops.length&&a.stops[0].color,b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.color.values[a]=Infinity,z(b.color.colors,a,c);else return t(c,"Could not convert color info: no field and no colors/stops"),null;return b}function x(a,b,c){if(a.normalizationField)return t(c,
"Could not convert opacity info: unsupported property"),null;if(p(a.field))if(a.stops){if(8<a.stops.length)return t(c,"Could not convert opacity info: too many opacity stops"),null;b.opacity={field:a.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=a.stops;for(a=0;8>a;++a){var d=c[Math.min(a,c.length-1)];b.opacity.values[a]=d.value;b.opacity.opacityValues[a]=d.opacity}}else return t(c,"Could not convert opacity info: missing stops or opacities"),null;else if(a.stops&&0<=a.stops.length)for(c=
a.stops&&0<=a.stops.length&&a.stops[0].opacity,b.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},a=0;8>a;a++)b.opacity.values[a]=Infinity,b.opacity.opacityValues[a]=c;else return t(c,"Could not convert opacity info: no field and no opacities/stops"),null;return b}function E(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function B(a,b,c){if(!p(a.field))return t(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return t(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return E(a,b.rotation,0,c),b;case "roll":return E(a,b.rotation,1,c),b;case null:case void 0:case "heading":return E(a,b.rotation,2,c),b;default:return t(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function F(a,b,c){if(!a)return null;var d=!b.supportedTypes||!!b.supportedTypes.size,e=!b.supportedTypes||!!b.supportedTypes.color,f=!b.supportedTypes||!!b.supportedTypes.rotation,g=!!b.supportedTypes&&!!b.supportedTypes.opacity,h=a.reduce(function(a,h){if(!a)return a;if(h.valueExpression)return t(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(h.type){case "size":return d?A(h,a,b,c):a;case "color":return e?y(h,a,c):a;case "opacity":return g?x(h,a,
c):a;case "rotation":return f?B(h,a,c):a;default:return l.neverReached(h),null}},{size:null,color:null,opacity:null,rotation:null});return 0<a.length&&h&&!h.size&&!h.color&&!h.opacity&&!h.rotation||h&&h.size&&!C(h.size,b,c)?null:h}function D(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function G(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,
vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},d=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&d&&(c.vvSizeValue=b.transformation.scale);if(a&&d){c.vvSymbolAnchor=b.transformation.anchor;c.vvSymbolRotationMatrix=
h.mat3f64.create();g.mat4.identity(P);var e=b.transformation.rotation[2],d=b.transformation.rotation[0],p=b.transformation.rotation[1];b=P;void 0===b&&(b=k.mat4f64.create());e=e||0;d=d||0;p=p||0;0!==e&&g.mat4.rotateZ(b,b,-e/180*Math.PI);0!==d&&g.mat4.rotateX(b,b,d/180*Math.PI);0!==p&&g.mat4.rotateY(b,b,p/180*Math.PI);f.mat3.fromMat4(c.vvSymbolRotationMatrix,P)}a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);a&&a.opacity&&(c.vvOpacityEnabled=!0,c.vvOpacityValues=
a.opacity.values,c.vvOpacityOpacities=a.opacity.opacityValues);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=F;a.initFastSymbolUpdatesState=function(a,c){return!a||b.DISABLE_FAST_UPDATES?{enabled:!1}:(a=F(a.visualVariables,c))?{enabled:!0,visualVariables:a,materialParameters:G(a,c),requiresShaderTransformation:a&&null!=a.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=F(b.visualVariables,c);
if(!(b&&D(d.size,b.size,"size")&&D(d.color,b.color,"color")&&D(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=G(b,c);a.requiresShaderTransformation=b&&null!=b.size;return!0};a.getMaterialParams=G;var H;(function(a){var b=k.mat4f64.create(),c=n.vec3f64.create();a.evaluateModelTransform=function(a,d,e){if(!a.vvSizeEnabled)return e;g.mat4.copy(b,e);e=a.vvSymbolRotationMatrix;g.mat4.set(P,e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1);g.mat4.multiply(b,
b,P);for(e=0;3>e;++e){var f=a.vvSizeOffset[e]+d[0]*a.vvSizeFactor[e],h=a.vvSizeMinSize[e],k=a.vvSizeMaxSize[e];c[e]=f<h?h:f>k?k:f}g.mat4.scale(b,b,c);g.mat4.translate(b,b,a.vvSymbolAnchor);return b};a.evaluateModelTransformScale=function(a,b,c){if(!b.vvSizeEnabled)return e.vec3.set(a,1,1,1);for(var d=0;3>d;++d){var f=b.vvSizeOffset[d]+c[0]*b.vvSizeFactor[d],g=b.vvSizeMinSize[d],h=b.vvSizeMaxSize[d];a[d]=f<g?g:f>h?h:f}return a}})(H||(H={}));var P=k.mat4f64.create();a.evaluateModelTransform=H.evaluateModelTransform;
a.evaluateModelTransformScale=H.evaluateModelTransformScale})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f64=l})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],
a[7],a[8]]};a.fromValues=function(a,f,h,g,k,e,n,d,b){return[a,f,h,g,k,e,n,d,b]};a.createView=function(a,f){return new Float64Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat4=l})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(m,a,l,f){function h(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;
a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7],m=b[8],x=b[9],E=b[10],B=b[11],F=b[12],D=b[13],G=b[14];b=b[15];var H=c[0],P=c[1],O=c[2],N=c[3];a[0]=H*d+P*h+O*m+N*F;a[1]=H*e+P*k+O*x+N*D;a[2]=H*f+P*l+O*E+N*G;a[3]=H*g+P*n+O*B+N*b;H=c[4];P=c[5];O=c[6];N=c[7];a[4]=H*d+P*h+O*m+N*F;a[5]=H*e+P*k+O*x+N*D;a[6]=H*f+P*l+O*E+N*G;a[7]=H*g+P*n+O*B+N*b;H=c[8];P=c[9];O=c[10];N=c[11];a[8]=H*d+P*h+O*m+N*F;a[9]=
H*e+P*k+O*x+N*D;a[10]=H*f+P*l+O*E+N*G;a[11]=H*g+P*n+O*B+N*b;H=c[12];P=c[13];O=c[14];N=c[15];a[12]=H*d+P*h+O*m+N*F;a[13]=H*e+P*k+O*x+N*D;a[14]=H*f+P*l+O*E+N*G;a[15]=H*g+P*n+O*B+N*b;return a}function k(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,k=e+e,l=f+f;b=d*h;var n=d*k,d=d*l,m=e*k,e=e*l,f=f*l,h=g*h,k=g*k,g=g*l;a[0]=1-(m+f);a[1]=n+g;a[2]=d-k;a[3]=0;a[4]=n-g;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=d+k;a[9]=e-h;a[10]=1-(b+m);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function e(a,b,c){a[0]=
b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];
return a};a.set=function(a,b,c,e,f,g,h,k,l,n,m,y,x,E,B,F,D){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=g;a[5]=h;a[6]=k;a[7]=l;a[8]=n;a[9]=m;a[10]=y;a[11]=x;a[12]=E;a[13]=B;a[14]=F;a[15]=D;return a};a.identity=h;a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=
b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};a.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8],m=b[9],x=b[10],E=b[11],B=b[12],F=b[13],D=b[14];b=b[15];var G=c*h-d*g,H=c*k-e*g,P=c*l-f*g,O=d*k-e*h,N=d*l-f*h,J=e*l-f*k,R=n*F-m*B,M=n*D-x*B,W=n*b-E*B,S=m*D-x*F,L=m*b-E*F,Z=x*b-E*D,K=G*Z-H*L+P*S+O*W-N*M+J*R;if(!K)return null;K=1/K;a[0]=(h*Z-k*L+l*S)*K;a[1]=(e*L-d*Z-f*S)*K;a[2]=(F*J-D*N+b*O)*K;a[3]=(x*N-m*J-E*O)*K;a[4]=(k*W-g*Z-l*M)*K;a[5]=
(c*Z-e*W+f*M)*K;a[6]=(D*P-B*J-b*H)*K;a[7]=(n*J-x*P+E*H)*K;a[8]=(g*L-h*W+l*R)*K;a[9]=(d*W-c*L-f*R)*K;a[10]=(B*N-F*P+b*G)*K;a[11]=(m*P-n*N-E*G)*K;a[12]=(h*M-g*S-k*R)*K;a[13]=(c*S-d*M+e*R)*K;a[14]=(F*H-B*O-D*G)*K;a[15]=(n*O-m*H+x*G)*K;return a};a.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8],m=b[9],x=b[10],E=b[11],B=b[12],F=b[13],D=b[14];b=b[15];a[0]=h*(x*b-E*D)-m*(k*b-l*D)+F*(k*E-l*x);a[1]=-(d*(x*b-E*D)-m*(e*b-f*D)+F*(e*E-f*x));a[2]=d*(k*b-l*D)-h*(e*b-f*D)+
F*(e*l-f*k);a[3]=-(d*(k*E-l*x)-h*(e*E-f*x)+m*(e*l-f*k));a[4]=-(g*(x*b-E*D)-n*(k*b-l*D)+B*(k*E-l*x));a[5]=c*(x*b-E*D)-n*(e*b-f*D)+B*(e*E-f*x);a[6]=-(c*(k*b-l*D)-g*(e*b-f*D)+B*(e*l-f*k));a[7]=c*(k*E-l*x)-g*(e*E-f*x)+n*(e*l-f*k);a[8]=g*(m*b-E*F)-n*(h*b-l*F)+B*(h*E-l*m);a[9]=-(c*(m*b-E*F)-n*(d*b-f*F)+B*(d*E-f*m));a[10]=c*(h*b-l*F)-g*(d*b-f*F)+B*(d*l-f*h);a[11]=-(c*(h*E-l*m)-g*(d*E-f*m)+n*(d*l-f*h));a[12]=-(g*(m*D-x*F)-n*(h*D-k*F)+B*(h*x-k*m));a[13]=c*(m*D-x*F)-n*(d*D-e*F)+B*(d*x-e*m);a[14]=-(c*(h*D-k*
F)-g*(d*D-e*F)+B*(d*k-e*h));a[15]=c*(h*x-k*m)-g*(d*x-e*m)+n*(d*k-e*h);return a};a.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],n=a[9],m=a[10],x=a[11],E=a[12],B=a[13],F=a[14];a=a[15];return(b*g-c*f)*(m*a-x*F)-(b*h-d*f)*(n*a-x*B)+(b*k-e*f)*(n*F-m*B)+(c*h-d*g)*(l*a-x*E)-(c*k-e*g)*(l*F-m*E)+(d*k-e*h)*(l*B-n*E)};a.multiply=g;a.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,k=void 0,l=void 0,n=void 0,m=void 0,x=void 0,E=void 0,
B=void 0,F=void 0,D=void 0;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],k=b[3],l=b[4],n=b[5],m=b[6],x=b[7],E=b[8],B=b[9],F=b[10],D=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=k,a[4]=l,a[5]=n,a[6]=m,a[7]=x,a[8]=E,a[9]=B,a[10]=F,a[11]=D,a[12]=f*d+l*e+E*c+b[12],a[13]=g*d+n*e+B*c+b[13],a[14]=h*d+m*e+F*c+b[14],a[15]=k*d+x*e+D*c+b[15]);return a};a.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=
b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};a.rotate=function(a,b,c,e){var d=e[0],g=e[1];e=e[2];var h=Math.sqrt(d*d+g*g+e*e),k=void 0,l=void 0,n=void 0,m=void 0,q=void 0,x=void 0,E=void 0,B=void 0,F=void 0,D=void 0,G=void 0,H=void 0,P=void 0,O=void 0,N=void 0,J=void 0,R=void 0,M=void 0,W=void 0,S=void 0,L=void 0,Z=void 0,l=k=void 0;if(h<f.EPSILON)return null;
h=1/h;d*=h;g*=h;e*=h;k=Math.sin(c);l=Math.cos(c);n=1-l;m=b[0];q=b[1];x=b[2];E=b[3];B=b[4];F=b[5];D=b[6];G=b[7];H=b[8];P=b[9];O=b[10];N=b[11];J=d*d*n+l;R=g*d*n+e*k;M=e*d*n-g*k;W=d*g*n-e*k;S=g*g*n+l;L=e*g*n+d*k;Z=d*e*n+g*k;k=g*e*n-d*k;l=e*e*n+l;a[0]=m*J+B*R+H*M;a[1]=q*J+F*R+P*M;a[2]=x*J+D*R+O*M;a[3]=E*J+G*R+N*M;a[4]=m*W+B*S+H*L;a[5]=q*W+F*S+P*L;a[6]=x*W+D*S+O*L;a[7]=E*W+G*S+N*L;a[8]=m*Z+B*k+H*l;a[9]=q*Z+F*k+P*l;a[10]=x*Z+D*k+O*l;a[11]=E*Z+G*k+N*l;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
return a};a.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],k=b[8],l=b[9],n=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+k*d;a[5]=f*c+l*d;a[6]=g*c+n*d;a[7]=h*c+m*d;a[8]=k*c-e*d;a[9]=l*c-f*d;a[10]=n*c-g*d;a[11]=m*c-h*d;return a};a.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[8],l=b[9],n=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],
a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-k*d;a[1]=f*c-l*d;a[2]=g*c-n*d;a[3]=h*c-m*d;a[8]=e*d+k*c;a[9]=f*d+l*c;a[10]=g*d+n*c;a[11]=h*d+m*c;return a};a.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],n=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+k*d;a[1]=f*c+l*d;a[2]=g*c+n*d;a[3]=h*c+m*d;a[4]=k*c-e*d;a[5]=l*c-f*d;a[6]=n*c-g*d;a[7]=m*c-h*d;return a};
a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotation=function(a,b,c){var d=c[0],e=c[1];c=c[2];var g=Math.sqrt(d*d+e*e+c*c),h=void 0,k=void 0,l=void 0;if(g<f.EPSILON)return null;g=1/g;d*=g;e*=g;c*=g;h=Math.sin(b);
k=Math.cos(b);l=1-k;a[0]=d*d*l+k;a[1]=e*d*l+c*h;a[2]=c*d*l-e*h;a[3]=0;a[4]=d*e*l-c*h;a[5]=e*e*l+k;a[6]=c*e*l+d*h;a[7]=0;a[8]=d*c*l+e*h;a[9]=e*c*l-d*h;a[10]=c*c*l+k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=
0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotationTranslation=k;a.fromQuat2=function(a,b){var c=n,d=-b[0],e=-b[1],f=-b[2],g=b[3],h=b[4],l=b[5],m=b[6],z=b[7],y=d*d+e*e+f*f+g*g;0<y?(c[0]=2*(h*g+z*d+l*f-m*e)/y,c[1]=2*(l*g+z*e+m*d-h*f)/y,c[2]=2*(m*g+z*f+h*
e-l*d)/y):(c[0]=2*(h*g+z*d+l*f-m*e),c[1]=2*(l*g+z*e+m*d-h*f),c[2]=2*(m*g+z*f+h*e-l*d));k(a,b,c);return a};var n=l.create();a.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};a.getScaling=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[4],g=b[5],h=b[6],k=b[8],l=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+e*e);a[1]=Math.sqrt(f*f+g*g+h*h);a[2]=Math.sqrt(k*k+l*l+b*b);return a};a.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;0<c?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-
b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};a.fromRotationTranslationScale=function(a,b,c,e){var d=b[0],f=b[1],g=b[2],h=b[3],k=d+d,l=f+f,n=g+g;b=d*k;var m=d*l,d=d*n,
q=f*l,f=f*n,g=g*n,k=h*k,l=h*l,h=h*n,n=e[0],E=e[1];e=e[2];a[0]=(1-(q+g))*n;a[1]=(m+h)*n;a[2]=(d-l)*n;a[3]=0;a[4]=(m-h)*E;a[5]=(1-(b+g))*E;a[6]=(f+k)*E;a[7]=0;a[8]=(d+l)*e;a[9]=(f-k)*e;a[10]=(1-(b+q))*e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};a.fromRotationTranslationScaleOrigin=function(a,b,c,e,f){var d=b[0],g=b[1],h=b[2],k=b[3],p=d+d,l=g+g,n=h+h;b=d*p;var m=d*l,q=d*n,d=g*l,g=g*n,B=h*n,h=k*p,l=k*l,F=k*n,D=e[0],G=e[1],n=e[2];e=f[0];k=f[1];f=f[2];var p=(1-(d+B))*D,H=(m+F)*D,D=(q-l)*
D,m=(m-F)*G,B=(1-(b+B))*G,G=(g+h)*G,q=(q+l)*n,g=(g-h)*n;b=(1-(b+d))*n;a[0]=p;a[1]=H;a[2]=D;a[3]=0;a[4]=m;a[5]=B;a[6]=G;a[7]=0;a[8]=q;a[9]=g;a[10]=b;a[11]=0;a[12]=c[0]+e-(p*e+m*k+q*f);a[13]=c[1]+k-(H*e+B*k+g*f);a[14]=c[2]+f-(D*e+G*k+b*f);a[15]=1;return a};a.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c+c,g=d+d,h=e+e,c=c*f,k=d*f,d=d*g,l=e*f,n=e*g,e=e*h,f=b*f,g=b*g;b*=h;a[0]=1-d-e;a[1]=k+b;a[2]=l-g;a[3]=0;a[4]=k-b;a[5]=1-c-e;a[6]=n+f;a[7]=0;a[8]=l+g;a[9]=n-f;a[10]=1-c-d;a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a};a.frustum=function(a,b,c,e,f,g,h){var d=1/(c-b),k=1/(f-e),p=1/(g-h);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(f+e)*k;a[10]=(h+g)*p;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g*2*p;a[15]=0;return a};a.perspective=function(a,b,c,e,f){b=1/Math.tan(b/2);var d=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),a[10]=(f+e)*d,a[14]=2*f*e*d):(a[10]=
-1,a[14]=-2*e);return a};a.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),k=2/(d+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(d-f)*k*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};a.ortho=function(a,b,c,e,f,g,h){var d=1/(b-c),k=1/(e-f),p=1/(g-h);a[0]=-2*d;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*p;a[11]=0;a[12]=(b+c)*d;a[13]=(f+e)*k;a[14]=(h+g)*p;a[15]=1;return a};a.lookAt=function(a,b,c,e){var d=void 0,g=void 0,k=void 0,l=void 0,n=void 0,m=void 0,q=void 0,y=void 0,x=void 0,E=void 0,B=b[0],F=b[1];b=b[2];k=e[0];l=e[1];e=e[2];q=c[0];y=c[1];c=c[2];if(Math.abs(B-q)<f.EPSILON&&Math.abs(F-y)<f.EPSILON&&Math.abs(b-c)<f.EPSILON)return h(a);q=B-q;y=F-y;x=b-c;E=1/Math.sqrt(q*q+y*y+x*x);q*=E;y*=E;x*=E;d=l*x-e*y;g=e*q-k*x;k=k*y-l*q;(E=Math.sqrt(d*
d+g*g+k*k))?(E=1/E,d*=E,g*=E,k*=E):k=g=d=0;l=y*k-x*g;n=x*d-q*k;m=q*g-y*d;(E=Math.sqrt(l*l+n*n+m*m))?(E=1/E,l*=E,n*=E,m*=E):m=n=l=0;a[0]=d;a[1]=l;a[2]=q;a[3]=0;a[4]=g;a[5]=n;a[6]=y;a[7]=0;a[8]=k;a[9]=m;a[10]=x;a[11]=0;a[12]=-(d*B+g*F+k*b);a[13]=-(l*B+n*F+m*b);a[14]=-(q*B+y*F+x*b);a[15]=1;return a};a.targetTo=function(a,b,c,e){var d=b[0],f=b[1];b=b[2];var g=e[0],h=e[1],k=e[2];e=d-c[0];var l=f-c[1];c=b-c[2];var n=e*e+l*l+c*c;0<n&&(n=1/Math.sqrt(n),e*=n,l*=n,c*=n);var m=h*c-k*l,k=k*e-g*c,g=g*l-h*e,n=
m*m+k*k+g*g;0<n&&(n=1/Math.sqrt(n),m*=n,k*=n,g*=n);a[0]=m;a[1]=k;a[2]=g;a[3]=0;a[4]=l*g-c*k;a[5]=c*m-e*g;a[6]=e*k-l*m;a[7]=0;a[8]=e;a[9]=l;a[10]=c;a[11]=0;a[12]=d;a[13]=f;a[14]=b;a[15]=1;return a};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],
2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};a.subtract=e;
a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=
b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};a.equals=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],l=a[6],n=a[7],m=a[8],y=a[9],x=a[10],E=a[11],B=a[12],F=a[13],D=a[14];a=a[15];var G=b[0],H=b[1],
P=b[2],O=b[3],N=b[4],J=b[5],R=b[6],M=b[7],W=b[8],S=b[9],L=b[10],Z=b[11],K=b[12],ea=b[13],ba=b[14];b=b[15];return Math.abs(c-G)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(d-H)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(H))&&Math.abs(e-P)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(P))&&Math.abs(g-O)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(h-N)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(k-J)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(J))&&Math.abs(l-R)<=f.EPSILON*
Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(n-M)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(m-W)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(y-S)<=f.EPSILON*Math.max(1,Math.abs(y),Math.abs(S))&&Math.abs(x-L)<=f.EPSILON*Math.max(1,Math.abs(x),Math.abs(L))&&Math.abs(E-Z)<=f.EPSILON*Math.max(1,Math.abs(E),Math.abs(Z))&&Math.abs(B-K)<=f.EPSILON*Math.max(1,Math.abs(B),Math.abs(K))&&Math.abs(F-ea)<=f.EPSILON*Math.max(1,Math.abs(F),Math.abs(ea))&&Math.abs(D-ba)<=f.EPSILON*Math.max(1,
Math.abs(D),Math.abs(ba))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.mul=g;a.sub=e})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.mat4f64=l})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};a.clone=
function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,f,h,g,k,e,n,d,b,c,m,p,t,u,w,A){return[a,f,h,g,k,e,n,d,b,c,m,p,t,u,w,A]};a.createView=function(a,f){return new Float64Array(a,f,16)}})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(m,
a,l,f,h,g){return new (function(a){function e(){var e=null!==a&&a.apply(this,arguments)||this;e.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;e.SCENEVIEW_LOCKING_LOG=!1;e.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;e.HIGHLIGHTS_VISUALIZE_BLOCKS=!1;e.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;e.DECONFLICTOR_SHOW_OUTLINES=!1;e.DECONFLICTOR_SHOW_GRID=!1;e.LABELS_SHOW_BORDER=!1;e.OVERLAY_DRAW_TEST_TEXTURE=!1;e.OVERLAY_SHOW_CENTER=!1;e.TESTS_LIMIT_FEATURE_TILE_TREE_THROTTLING=!1;e.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS=
!1;e.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1;e.DISABLE_POI_UPDATE_ON_SURFACE_GEOMETRY_CHANGES=!1;e.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;e.DRAW_MESH_GEOMETRY_NORMALS=!1;e.FEATURE_TILE_FETCH_SHOW_TILES=!1;e.FEATURE_TILE_TREE_SHOW_TILES=!1;e.ENABLE_PROFILE_DEPTH_RANGE=!1;e.DISABLE_FAST_UPDATES=!1;e.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;e.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;return e}l(e,a);f([g.property()],e.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);f([g.property()],
e.prototype,"SCENEVIEW_LOCKING_LOG",void 0);f([g.property()],e.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0);f([g.property()],e.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0);f([g.property()],e.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);f([g.property()],e.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);f([g.property()],e.prototype,"DECONFLICTOR_SHOW_GRID",void 0);f([g.property()],e.prototype,"LABELS_SHOW_BORDER",void 0);f([g.property()],e.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0);
f([g.property()],e.prototype,"OVERLAY_SHOW_CENTER",void 0);f([g.property()],e.prototype,"TESTS_LIMIT_FEATURE_TILE_TREE_THROTTLING",void 0);f([g.property()],e.prototype,"TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS",void 0);f([g.property()],e.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);f([g.property()],e.prototype,"DISABLE_POI_UPDATE_ON_SURFACE_GEOMETRY_CHANGES",void 0);f([g.property()],e.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);f([g.property()],e.prototype,"DRAW_MESH_GEOMETRY_NORMALS",
void 0);f([g.property()],e.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);f([g.property()],e.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);f([g.property()],e.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);f([g.property()],e.prototype,"DISABLE_FAST_UPDATES",void 0);f([g.property()],e.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);f([g.property()],e.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);return e=f([g.subclass()],e)}(g.declared(h)))})},"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["require",
"exports","../definitions"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a){this._bucketSize=a;this._rowsLength=l.TILE_SIZE/a;this._colsLength=l.TILE_SIZE/a;this._grid=this._initGrid()}a.prototype.checkOverlap=function(a,f){a=Math.floor(a/this._bucketSize);f=Math.floor(f/this._bucketSize);if(0>a||a>=this._rowsLength||0>f||f>=this._colsLength||this._grid[f][a])return!0;this._grid[f][a]=!0;return!1};a.prototype.reset=function(){this._grid=this._initGrid()};
a.prototype._initGrid=function(){for(var a=[],f=0;f<this._rowsLength;f++)a.push(Array(this._colsLength));return a};return a}();a.default=m})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define(["require","exports","../../../../../../core/Error","../../../../../../core/Logger","../../util/Matcher"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var g=f.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");a.createMatcher=function(a,e,f){switch(a.type){case "simple":case "dot-density":case "dotDensity":return h.default.fromBasicRenderer(a,
e,f);case "unique-value":case "uniqueValue":return h.MapMatcher.fromUVRenderer(a,e,f);case "class-breaks":case "classBreaks":return h.IntervalMatcher.fromCBRenderer(a,e,f);default:return g.error(new l("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}}})},"esri/views/2d/engine/webgl/util/Matcher":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",
{value:!0});var g=f.getLogger("esri/views/2d/engine/webgl/util/Matcher");m=function(){function a(){this._defaultResult=null}a.fromBasicRenderer=function(e,f,d){var b=e.getSymbols(),c=new a;b.length&&(e=f.createTemplateGroup(b[0],null,e,d),c.setDefault(e));return c};a.prototype.size=function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=a};a.prototype.match=function(a,f,d){return this.getDefault()};return a}();a.default=
m;f=function(a){function e(e,d,b,c,f){var g=a.call(this)||this;g._intervals=[];g._isMaxInclusive=d;c?g._getValue=h.createArcadeFunction(c,f):e&&e.length?"function"===typeof e?(g._field=null,g._getValue=e):(g._field=e,g._normalizationInfo=b,g._getValue=g._getValueFromField.bind(g)):g._field=null;return g}l(e,a);e.fromCBRenderer=function(a,d,b){for(var c=new e(a.field,a.isMaxInclusive,{normalizationField:a.normalizationField,normalizationTotal:a.normalizationTotal,normalizationType:a.normalizationType},
a.valueExpression,b),f=a.backgroundFillSymbol,g=0,h=a.classBreakInfos;g<h.length;g++){var k=h[g],l=d.createTemplateGroup(k.symbol,f,a,b);c.add({min:k.minValue,max:k.maxValue},l)}if(g=a.defaultSymbol)a=d.createTemplateGroup(g,f,a,b),c.setDefault(a);return c};e.prototype.add=function(a,d){this._intervals.push({interval:a,result:d});this._intervals.sort(function(a,c){return a.interval.min-c.interval.min})};e.prototype.size=function(){return a.prototype.size.call(this)+this._intervals.length};e.prototype.match=
function(a,d,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,d,b);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();for(d=0;d<this._intervals.length;d++){var c=this._intervals[d];b=c.interval;var c=c.result,e=this._isMaxInclusive?a<=b.max:a<b.max;if(a>=b.min&&e)return c}return this.getDefault()};e.prototype._needsNormalization=function(){var a=this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};e.prototype._getValueFromField=
function(a){var d=a.attributes[this._field];if(!this._needsNormalization())return d;var b=this._normalizationInfo,c=b.normalizationField,e=b.normalizationTotal,b=b.normalizationType;a=!!c&&a.attributes[c];if(b)switch(b){case "field":return(a||void 0)&&d/a;case "log":return Math.log(d)*Math.LOG10E;case "percent-of-total":return d/e*100;default:g.error("Found unknown normalization type: "+b)}else g.error("Normalization is required, but no type was set!")};return e}(m);a.IntervalMatcher=f;m=function(a){function e(e,
d,b,c){var f=a.call(this)||this;f._resultsMap=new Map;b?f._getValue=h.createArcadeFunction(b,c):e&&e.length?"function"===typeof e[0]?(f._fields=null,f._getValue=e[0]):(f._fields=e,f._seperator=d||"",f._getValue=f._getValueFromFields.bind(f)):f._fields=null;return f}l(e,a);e.fromUVRenderer=function(a,d,b){var c=a.uniqueValueInfos,f=a.fieldDelimiter,g=a.valueExpression,h=[a.field];a.field2&&h.push(a.field2);a.field3&&h.push(a.field3);for(var k=a.backgroundFillSymbol,f=new e(h,f,g,b),g=0;g<c.length;g++){var h=
c[g],l=d.createTemplateGroup(h.symbol,k,a,h);f.add(h.value,l)}a.defaultSymbol&&(a=d.createTemplateGroup(a.defaultSymbol,k,a,b),f.setDefault(a));return f};e.prototype.add=function(a,d){this._resultsMap.set(a.toString(),d)};e.prototype.size=function(){return a.prototype.size.call(this)+this._resultsMap.size};e.prototype.match=function(a,d,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,d,b);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?
this._resultsMap.get(a):this.getDefault()};e.prototype._getValueFromFields=function(a){for(var d=[],b=0,c=this._fields;b<c.length;b++)d.push(a.attributes[c[b]]);return d.join(this._seperator)};return e}(m);a.MapMatcher=m})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/maybe ../../../../../../geometry/support/jsonUtils ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../WGLDisplayObject ../../collisions/LayerCollisionInfo ../MeshData ../VertexVector ./VVFactory ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore ../../util/vvFlagUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z){Object.defineProperty(a,"__esModule",{value:!0});var y=h.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),x={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};m=function(){function a(a,b,d,e,f,h,k,p,l){this._isDD=!1;this._labelsDebugVVEval=
this._labelsDebugTemplate=null;h=g.isSome(d)&&"visualVariables"in d&&d.visualVariables;this._isDD=g.isSome(d)&&"dot-density"===d.type;this._geometryType=a;this._idField=b;this._pixelRatio=f;this._vvFlags=h?z.getVVFlags(h):0;this._vvFactory=g.isSome(d)&&t.default.fromRenderer(d,e);this._vvBuf=new ArrayBuffer(32);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._templateStore=k;p&&(n.DEBUG_LABELS&&(this._labelsDebugVVEval=h&&c.createLabelVVEvaluator(h)),
this._validateLabelingInfo(p)&&(this._labelTemplates=p.map(function(a){return u.default.fromLabelClass(d,a,l)})))}Object.defineProperty(a.prototype,"templates",{get:function(){return this._templateStore},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(5),c=!!z.getMarkerVVFlags(this._vvFlags),e=!!z.getFillVVFlags(this._vvFlags),f=!!z.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),g=!!z.getTextVVFlags(this._vvFlags),h="esriGeometryPolyline"===
this._geometryType?n.HEURISTIC_GLYPHS_PER_LINE:n.HEURISTIC_GLYPHS_PER_FEATURE;b[d.WGLGeometryType.MARKER]=new p.VertexVectors(d.WGLGeometryType.MARKER,c,a);b[d.WGLGeometryType.FILL]=new p.VertexVectors(d.WGLGeometryType.FILL,e,a,this._isDD);b[d.WGLGeometryType.LINE]=new p.VertexVectors(d.WGLGeometryType.LINE,f,a);b[d.WGLGeometryType.TEXT]=new p.VertexVectors(d.WGLGeometryType.TEXT,g,a);b[d.WGLGeometryType.LABEL]=new p.VertexVectors(d.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?
h:0);return new q.default([],b)};a.prototype.analyze=function(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e],g=-1;if("symbol"in f)f.filterFlags=1,null!=f.symbol?g=this._templateStore.createTemplateGroup(f.symbol,null,null,null):b&&(g=b.match(f,c,d));else if(b&&(g=b.match(f,c,d),C.isDynamicId(g)))for(var h=0,k=this._templateStore.getDynamicTemplateGroup(g);h<k.length;h++){var p=k[h];p&&p.analyze&&p.analyze(f,this._templateStore)}f.groupId=g}return this._templateStore.finalize().then(function(){return a})};
a.prototype.write=function(a,c,d,e,f,g,h){var p=this._templateStore.getTemplateGroup(c.groupId),l=c.attributes[this._idField],n=new b(l),m=!!g&&!!this._labelTemplates&&g.has(l);if(C.isDynamicId(c.groupId))for(var q=0;q<p.length;q++){var t=p[q];t.bindFeature(c,d,e)}if(p&&(c.geometry||c.centroid)){this._vvFactory&&this._vvFactory.computeVV(this._vvBufF32,c,d,e);q=n.displayRecords;t=c.insertAfter;void 0!==t&&(n.insertAfter=t);(d=this._geometryType)||(d=null!=c.centroid?"esriGeometryPolygon":k.getJsonType(c.geometry));
e=c.filterFlags;n.filterFlags=e;for(var u=0;u<p.length;u++){var t=p[u],z=a.get(t.geometryType);t.writeMesh(q,z,d,l,c,this._pixelRatio,this._vvBufU32,e)}m&&(p=this._getLabelReference(p),g=g.get(l),this._writeLabelMesh(n,a,l,c,h,g,p,f,d,e));a.pushDisplayObject(n)}};a.prototype._hasBadLabelClass=function(a,b){var c=a.labelPlacement,d=x[b];if(!a.symbol)return y.error(new f("mapview-labeling:missing-required-parameter","Unable to create labels for Feature Layer, LabelClass missing symbol",a)),!0;if(!d)return y.error(new f("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for Feature Layer, "+b+" is not supported")),!0;d.some(function(a){return a===c})||(d=d[0],c&&y.warn("Found invalid label placement type "+c+" for "+b+". Defaulting to "+d),a.labelPlacement=d);return!1};a.prototype._validateLabelingInfo=function(a){var b=this;return!a.some(function(a){return b._hasBadLabelClass(a,b._geometryType)})};a.prototype._getLabelReference=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof A.default)return c}return null};a.prototype._writeLabelMesh=
function(a,b,c,d,e,f,g,h,k,p){for(var l=a.displayRecords,m=[],q=this._pixelRatio,t=this._vvBufU32,u=0;u<f.length;u++){var z=f[u],w=z.text,x=z.rtl,z=this._labelTemplates[z.id],y=b.get(z.geometryType),D=e.get(z.symbolId).glyphMosaicItems;z.bindReferenceTemplate(g);z.bindTextInfo(D,w,x);z.writeMesh(l,y,k,c,d,q,t,p,h,m)}a.metrics=m;n.DEBUG_LABELS&&this._debugLabels(a,b,p)};a.prototype._debugLabels=function(a,b,c){var d=a.displayRecords,e=a.id,f=0;for(a=a.metrics;f<a.length;f++){var g=a[f],h=g.boxes?g.boxes.concat([g.bounds]):
[g.bounds];this._labelsDebugVVEval&&g.computeOffset(this._labelsDebugVVEval);for(var k=0;k<h.length;k++){var p=h[k],p={geometry:{paths:[[[g.anchor[0]+g.offsetX+p.center[0]-p.width/2,g.anchor[1]+g.offsetY+p.center[1]+p.height/2],[0,-p.height],[p.width,0],[0,p.height],[-p.width,0]]]},attributes:{}},l=this._getLabelDebugTemplate(),n=b.get(l.geometryType);l.writeMesh(d,n,"esriGeometryPolyline",e,p,this._pixelRatio,null,c)}}};a.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=
this._createLabelsDebugTemplate());return this._labelsDebugTemplate};a.prototype._createLabelsDebugTemplate=function(){var a=new e({style:"solid",width:1,color:[255,0,0,1]});return w.default.fromSimpleLine(null,!1,a,null)};return a}();a.default=m})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ./definitions ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(m,a,l,f,h,g){return function(){function a(a){this.insertAfter=null;this.filterFlags=
0;this.id=a;this.displayRecords=[];this.metrics=[]}a.prototype.copy=function(){var e=new a(this.id);e.set(this);return e};a.prototype.clone=function(){var e=new a(this.id);e.displayRecords=this.displayRecords.map(function(a){return a.clone()});e.metrics=this.metrics.map(function(a){return a.clone()});e.insertAfter=this.insertAfter;e.filterFlags=this.filterFlags;return e};a.prototype.set=function(a){this.id=a.id;this.displayRecords=a.displayRecords;this.metrics=a.metrics;this.insertAfter=a.insertAfter;
this.filterFlags=a.filterFlags};a.prototype.getLabelVisibility=function(a){var e=!a.effect||a.effect.excludedLabelsVisible||!!(this.filterFlags&l.EFFECT_FLAG_0);return(!a.filter||!!(this.filterFlags&l.FILTER_FLAG_0))&&e};a.prototype.setFilterFlag=function(a,f){a=1<<a;this.filterFlags=f?this.filterFlags|a:this.filterFlags&~a};a.prototype.serialize=function(a){a.push(this.id);a.push(this.filterFlags);g.serializeList(a,this.metrics);g.serializeList(a,this.displayRecords);return a};a.deserialize=function(e){var k=
e.readInt32(),d=new a(k);d.filterFlags=e.readInt32();var k={id:k},b=g.deserializeList(e,h.default);b.length&&(d.metrics=b);d.displayRecords=g.deserializeList(e,f,k);return d};return a}()})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","./MeshData","./Utils"],function(m,a,l,f){return function(){function a(a,f,e,h,d){void 0===h&&(h=0);void 0===d&&(d=0);this.id=a;this.geometryType=f;this.materialKey=e;this.minZoom=h;this.maxZoom=d;this.meshData=null;this.indexCount=
this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});a.prototype.clone=function(){return this.copy()};a.prototype.copy=function(){var f=new a(this.id,this.geometryType,this.materialKey);f.vertexFrom=this.vertexFrom;f.vertexCount=this.vertexCount;f.indexFrom=this.indexFrom;f.indexCount=this.indexCount;f.zOrder=this.zOrder;
f.symbolLevel=this.symbolLevel;f.meshData=this.meshData;f.minZoom=this.minZoom;f.maxZoom=this.maxZoom;return f};a.prototype.setMeshDataFromBuffers=function(a,h,e){var g=new l,d;for(d in h){for(var b=h[d].stride,c=h[d].data,k=[],p=f.strideToPackingFactor(b),m=0;m<b*a.vertexCount/p;++m)k[m]=c[m+b*a.vertexFrom/p];g.vertexData.set(d,k)}for(m=g.indexData.length=0;m<a.indexCount;++m)g.indexData[m]=e[m+a.indexFrom]-a.vertexFrom;g.vertexCount=a.vertexCount;this.meshData=g};a.prototype.readMeshDataFromBuffers=
function(a,h){this.meshData?this.meshData.clear():this.meshData=new l;for(var e in a){for(var g=a[e].stride,d=a[e].data,b=[],c=f.strideToPackingFactor(g),k=0;k<g*this.vertexCount/c;++k)b[k]=d[k+g*this.vertexFrom/c];this.meshData.vertexData.set(e,b)}for(k=this.meshData.indexData.length=0;k<this.indexCount;++k)this.meshData.indexData[k]=h[k+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,h,e,l){for(var d in h)for(var b=h[d].stride,
c=this.meshData.vertexData.get(d),g=h[d].data,k=f.strideToPackingFactor(b),n=0;n<b*this.meshData.vertexCount/k;++n)g[n+b*a/k]=c[n];for(n=0;n<this.meshData.indexData.length;++n)l[n+e]=this.meshData.indexData[n]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=e;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,f,e){for(var g=0,d=0,b=0;b<a.length;b++){var c=a[b];c.writeMeshDataToBuffers(g,f,d,e);g+=c.vertexCount;d+=c.indexCount}};a.prototype._computeSortKey=
function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.push(this.geometryType);a.push(this.materialKey);a.push(this.symbolLevel);a.push(this.zOrder);a.push(this.vertexFrom);a.push(this.vertexCount);a.push(this.indexFrom);a.push(this.indexCount);a.push(this.minZoom);a.push(this.maxZoom);return a};a.deserialize=function(f,h){var e=f.readInt32(),g=f.readInt32();h=new a(h.id,e,g);h.symbolLevel=f.readInt32();h.zOrder=f.readInt32();
h.vertexFrom=f.readInt32();h.vertexCount=f.readInt32();h.indexFrom=f.readInt32();h.indexCount=f.readInt32();h.minZoom=f.readInt32();h.maxZoom=f.readInt32();return h};return a}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(m,a){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,h,g){for(var f in a)this.vertexData.set(f,
a[f]);for(f in this.vertexData)null===a[f]&&this.vertexData.delete(f);this.vertexCount=h;this.indexData=g};return a}()})},"esri/views/2d/engine/webgl/collisions/Metric":function(){define("require exports ../../../../../core/Logger ../../../../../core/libs/gl-matrix-2/vec2f32 ../definitions ./BoundingBox ../util/serializationUtils".split(" "),function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e=l.getLogger("esri/views/2d/engine/webgl/collisions/Metric");m=function(){function a(a,
b,c,e,g){this.id=a;this.range=b;this.boxes=null;this.minZoom=-1;this.offsetY=this.offsetX=this.directionY=this.directionX=this.size=this.vv=0;this.anchor=f.vec2f32.fromValues(c,e);this.baseZoom=g}a.prototype.add=function(a){this.bounds?(this.boxes?this.boxes.push(a):(this.boxes=[this.bounds,a],this.bounds=this.bounds.clone()),this.bounds.extend(a)):this.bounds=a};a.prototype.computeIndex=function(){var a=this.bounds,b=this.anchor[0],c=this.anchor[1],e=Math.floor(b/h.COLLISION_BUCKET_SIZE),f=Math.floor(c/
h.COLLISION_BUCKET_SIZE),g=0;if(e>h.COLLISION_TILE_BOX_SIZE||f>h.COLLISION_TILE_BOX_SIZE)f=e=h.COLLISION_TILE_BOX_SIZE,g=1;if(0>e||0>f)f=e=0,g=1;a=2*Math.max(a.halfWidth+Math.abs(a.center[0]),a.halfHeight+Math.abs(a.center[1]));b%=h.COLLISION_BUCKET_SIZE;c%=h.COLLISION_BUCKET_SIZE;this.xBucket=e;this.yBucket=f;this.xOverflow=Math.ceil(Math.abs((a-b)/h.COLLISION_BUCKET_SIZE))+g;this.yOverflow=Math.ceil(Math.abs((a-c)/h.COLLISION_BUCKET_SIZE))+g};a.prototype.findCollisionDelta=function(a){var b=this.bounds.findCollisionDelta(a.bounds),
c=this.boxes&&this.boxes.length,d=a.boxes&&a.boxes.length;return Math.abs(b)>h.COLLISION_MAX_ZOOM_DELTA||!c&&!d?b:c&&d?this._boxesToBoxes(a):c?this._boxesToBox(a):this._boxToBoxes(a)};a.prototype.computeOffset=function(a){a||e.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+a);a=a(this.vv);a=isNaN(this.vv)||isNaN(a)?this.size:a;this.offsetX=this.directionX*(a/2+h.COLLISION_PLACEMENT_PADDING);this.offsetY=this.directionY*(a/2+h.COLLISION_PLACEMENT_PADDING)};
a.prototype.setVV=function(a,b,c,e){this.vv=a;this.size=b;this.directionX=c;this.directionY=e};a.prototype.clone=function(){var d=new a(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);d.minZoom=this.minZoom;this.bounds&&(d.bounds=this.bounds.clone());this.boxes&&(d.boxes=this.boxes.map(function(a){return a.clone()}));d.xBucket=this.xBucket;d.yBucket=this.yBucket;d.xOverflow=this.xOverflow;d.yOverflow=this.yOverflow;d.vv=this.vv;d.size=this.size;d.directionX=this.directionX;d.directionY=
this.directionY;d.offsetX=this.offsetX;d.offsetY=this.offsetY;return d};a.prototype._boxToBoxes=function(a){var b=-Infinity,c=0;for(a=a.boxes;c<a.length;c++)var d=this.bounds.findCollisionDelta(a[c]),b=Math.max(d,b);return b};a.prototype._boxesToBox=function(a){for(var b=this.boxes[0].findCollisionDelta(a.bounds),c=1;c<this.boxes.length;c++)var d=this.boxes[c].findCollisionDelta(a.bounds),b=Math.max(d,b);return b};a.prototype._boxesToBoxes=function(a){for(var b=-Infinity,c=0;c<this.boxes.length;c++)for(var d=
this.boxes[c],e=0,f=a.boxes;e<f.length;e++)var g=d.findCollisionDelta(f[e]),b=Math.max(g,b);return b};a.prototype.serialize=function(a){a.push(this.id);this.bounds.serialize(a);a.push(this.range.from);a.push(this.range.count);a.push(this.anchor[0]);a.push(this.anchor[1]);a.push(this.baseZoom);a.writeF32(this.vv);a.push(this.size);a.push(this.directionX);a.push(this.directionY);a.push(this.offsetX);a.push(this.offsetY);k.serializeList(a,this.boxes);return a};a.deserialize=function(d){var b=d.readInt32(),
c=g.default.deserialize(d),e=d.readInt32(),f=d.readInt32(),h={from:e,count:f},l=d.readInt32(),n=d.readInt32(),m=d.readInt32(),e=d.readF32(),f=d.readInt32(),C=d.readInt32(),z=d.readInt32(),y=d.readInt32(),x=d.readInt32();d=k.deserializeList(d,g.default);b=new a(b,h,l,n,m);b.bounds=c;b.boxes=d;b.computeIndex();b.setVV(e,f,C,z);b.offsetX=y;b.offsetY=x;return b};return a}();a.default=m})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix-2/vec2f32",
"../../../../3d/support/mathUtils"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a,f,e,h){this.center=l.vec2f32.fromValues(a,f);this.centerT=l.vec2f32.create();this.halfWidth=e/2;this.halfHeight=h/2;this.width=e;this.height=h}Object.defineProperty(a.prototype,"x",{get:function(){return this.center[0]},set:function(a){this.center[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this.center[1]},set:function(a){this.center[1]=
a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blX",{get:function(){return this.center[0]-this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blY",{get:function(){return this.center[1]-this.halfHeight},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"trX",{get:function(){return this.center[0]+this.halfWidth},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"trY",{get:function(){return this.center[1]+this.halfHeight},
enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.serialize=function(a){a.writeF32(this.center[0]);a.writeF32(this.center[1]);a.push(this.width);a.push(this.height);return a};a.prototype.findCollisionDelta=function(a){return f.log2(Math.min((a.halfWidth+this.halfWidth)/Math.abs(a.centerT[0]-this.centerT[0]),(a.halfHeight+this.halfHeight)/Math.abs(a.centerT[1]-this.centerT[1])))};a.prototype.extend=function(a){var f=Math.min(this.blX,
a.blX),e=Math.min(this.blY,a.blY),g=Math.max(this.trY,a.trY);this.width=Math.max(this.trX,a.trX)-f;this.height=g-e;this.halfWidth=this.width/2;this.halfHeight=this.height/2;this.x=f+this.halfWidth;this.y=e+this.halfHeight};a.deserialize=function(f){var g=f.readF32(),e=f.readF32(),h=f.readInt32();f=f.readInt32();return new a(g,e,h,f)};return a}();a.default=m})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",
{value:!0});a.serializeList=function(a,f){if(null===f)a.push(0);else{a.push(f.length);for(var h=0;h<f.length;h++)f[h].serialize(a);return a}};a.deserializeList=function(a,f,h){for(var g=a.readInt32(),g=Array(g),k=0;k<g.length;k++)g[k]=f.deserialize(a,h);return g}})},"esri/views/2d/engine/webgl/collisions/LayerCollisionInfo":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/screenUtils","../../../../3d/support/mathUtils"],function(m,a,l,f,h){function g(a){return function(b){return f.pt2px(a.getSize(b))}}
function k(a){if(!a)return null;for(var b=0;b<a.length;b++){var d=a[b];if("size"===d.type)return g(d)}return null}Object.defineProperty(a,"__esModule",{value:!0});var e=function(a,c){return a.order-c.order},n=function(a,c){return a.index-c.index},d=l.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");a.createLabelVVEvaluator=k;m=function(){function a(a,b,d,e,f){var c=this;this._vvHandle=null;var g=a.geometryType,p=a.labelingInfo,l=a.renderer;this.vvEval=k("visualVariables"in l&&l.visualVariables);
this._vvHandle=a.watch("visualVariables",function(a){c.vvEval=k(a)});a=p.map(function(a){var b=!!a.maxScale,c=!!a.minScale&&f.scaleToZoom(a.minScale)||0;a=b&&f.scaleToZoom(a.maxScale)||255;return{minZoom:h.clamp(Math.floor(10*c),0,255),maxZoom:h.clamp(Math.floor(10*a),0,255)}});this.geometryType=g;this.index=d;this.order=e;this.zoomRanges=a;this.layerView=b}a.prototype.hasVV=function(){return!!this.vvEval};a.prototype.allOrNothing=function(){return"polyline"!==this.geometryType};a.prototype.destroy=
function(){this._vvHandle.remove()};a.create=function(b,d,f,g,h){g=g.sort(e);for(var c=!1,k=-1,p=0;p<g.length;p++){var l=g[p];!c&&l.order>f&&(k=l.index,c=!0);c&&l.index++}c||(k=g.length);return new a(b,d,k,f,h)};a.delete=function(a,b){for(var c=b.sort(n),d=a+1;d<c.length;d++)b[d].index--;b[a].destroy();b.splice(a,1)};a.find=function(a,b){for(var c=0;c<b.length;c++){var e=b[c];if(e.index===a)return e}d.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!");return null};return a}();
a.default=m})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define(["require","exports","../util/serializationUtils","../util/Writer"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a,f){this.displayObjects=a;this.vertexVectorsMap=f}Object.defineProperty(a.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(var a=0;a<this.vertexVectorsMap.length;a++)this._vertexBuffersMap[a]=this.vertexVectorsMap[a].intoBuffers();
this.vertexVectorsMap=null}return this._vertexBuffersMap},enumerable:!0,configurable:!0});a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};a.prototype.encode=function(a,h){var e=l.serializeList(new f.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),g={};h.push(e);for(var d=0;d<this.vertexVectorsMap.length;d++){var b=this.vertexVectorsMap[d];g[d]={};b.transfer(g[d],h)}a.displayObjects=e;a.vertexBuffersMap=
g;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};a.prototype._guessSize=function(){for(var a=this.displayObjects,f=Math.min(a.length,4),e=0,h=0;h<f;h++)e=Math.max(e,a[h].displayRecords.length);return 2*(12*a.length+a.length*e*40)};return a}();a.default=m})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a,h){this._pos=0;h=h?this._roundToNearest(h,
a.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(h);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest=function(a,h){a=Math.round(a);return a+(h-a%h)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=this._roundToNearest(1.5*(this._array.byteLength+a*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);a=new ArrayBuffer(a);var f=
new this._ctor(a);f.set(this._buffer,0);this._array=a;this._buffer=f}};a.prototype.writeF32=function(a){this._ensureSize(1);var f=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=a;this._pos++;return f};a.prototype.push=function(a){this._ensureSize(1);var f=this._pos;this._buffer[this._pos++]=a;return f};a.prototype.writeRegion=function(a){this._ensureSize(a.length);var f=this._pos;this._buffer.set(a,this._pos);this._pos+=a.length;return f};a.prototype.buffer=function(){var a=this._array.slice(0,
4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=m})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","./VertexBuffer","../util/Writer"],function(m,a,l,f,h){Object.defineProperty(a,"__esModule",{value:!0});var g=function(){function a(a,f){this.data=a;this.stride=f}Object.defineProperty(a.prototype,"vertexCount",{get:function(){return this.data.length/(this.stride/4)},enumerable:!0,
configurable:!0});a.prototype.transfer=function(a,f){var d=this.data.buffer();a.vertexCount=this.vertexCount;a.data=d;a.stride=this.stride;f.push(d)};return a}();a.default=g;m=function(){function a(a,f,d,b){void 0===b&&(b=!1);this.geometryType=a;this.indexVector=new h.default(Uint32Array,d);this.namedVectors={};a=l.getStrides(a,f,b);for(var c in a){f=a[c];b=void 0;switch(f%4){case 0:case 2:b=new h.default(Uint32Array,f/4*d);break;case 1:case 3:b=new h.default(Uint8Array,f*d)}this.namedVectors[c]=
new g(b,f)}}a.prototype.get=function(a){return this.namedVectors[a].data};a.prototype.getVector=function(a){return this.namedVectors[a]};a.prototype.transfer=function(a,f){var d=this.indexVector.buffer(),b={};f.push(d);for(var c in this.namedVectors){var e=this.namedVectors[c];b[c]={};e.transfer(b[c],f)}a.geometryType=this.geometryType;a.indexBuffer=d;a.namedBuffers=b;this.destroy()};a.prototype.intoBuffers=function(){var a=f.VertexBuffers.fromVertexVectors(this);this.destroy();return a};a.prototype.destroy=
function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=m})},"esri/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports","../Utils"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function a(a,f,e){this.data=a;this.stride=f;this.vertexCount=e}a.decode=function(f){var g=l.allocateTypedArrayBufferwithData(f.data,f.stride);return new a(g,f.stride,f.vertexCount)};a.fromVertexVector=function(f){var g=l.allocateTypedArrayBufferwithData(f.data.buffer(),
f.stride);return new a(g,f.stride,f.vertexCount)};return a}();a.default=f;m=function(){function a(a,f,e){this.geometryType=a;this.indexBuffer=new Uint32Array(f);this.namedBuffers=e}a.decode=function(g){var h=g.geometryType,e=g.indexBuffer,l={},d;for(d in g.namedBuffers)l[d]=f.decode(g.namedBuffers[d]);return new a(h,e,l)};a.fromVertexVectors=function(g){var h=g.geometryType,e=g.indexVector.buffer(),l={},d;for(d in g.namedVectors)l[d]=f.fromVertexVector(g.namedVectors[d]);return new a(h,e,l)};return a}();
a.VertexBuffers=m})},"esri/views/2d/engine/webgl/mesh/factories/VVFactory":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../definitions ../../enums ../../Utils ../../visualVariablesUtils".split(" "),function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});var n=f.getLogger("esri.views.2d.engine.webgl.mesh.VVFactory"),d;(function(a){a[a.NONE=0]="NONE";a[a.MISSING_DATA=1]="MISSING_DATA"})(d=a.VVError||(a.VVError={}));var b=function(){function a(){this._vvMap=
new Map}a.prototype.set=function(a,b){this._vvMap.set(a,b)};Object.defineProperty(a.prototype,"map",{get:function(){return this._vvMap},enumerable:!0,configurable:!0});a.prototype.getValue=function(a,b,c,d){return this._vvMap.has(a)?this._vvMap.get(a)(b,c,d):0};return a}();m=function(){function a(){}a.fromRenderer=function(b,c){var d=new a;switch(b.type){case "dot-density":d._createDDFunctionMap(b.attributes,c);break;case "simple":case "unique-value":case "class-breaks":d._createVVFunctionMap(b.visualVariables,
c);break;default:return n.error("Cannot create factory for renderer type "+b.type),null}return d};a.prototype.computeVV=function(a,b,c,e){var f=this;if(!this._vvMap)return d.NONE;this._vvMap.map.forEach(function(d,g){d=d(b,c,e);a[g]=f._isErrorVV(d)?1E-30:d});return d.NONE};a.prototype._isErrorVV=function(a){return null===a||isNaN(a)||Infinity===a};a.prototype._createVVFunctionMap=function(a,c){if(a&&a.length)for(var d=0;d<a.length;d++){var e=a[d],f=k.getVVType(e.type);if(e=this._createGetValueFunction(e,
c))this._vvMap||(this._vvMap=new b),this._vvMap.set(f,e)}};a.prototype._createDDFunctionMap=function(a,c){this._vvMap||(this._vvMap=new b);a.length>h.DOT_DENSITY_MAX_FIELDS&&n.warn("mapview-invalid-value","DotDensityRenderer supports a maximium of "+h.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+a.length);for(var d=0;d<Math.min(h.DOT_DENSITY_MAX_FIELDS,a.length);d++){var e=this._createNormalizedFunction(a[d],c);this._vvMap.set(d,e)}};a.prototype._createGetValueFunction=function(a,b){if(k.getVVType(a.type)===
g.VVType.SIZE){var c=e.getTypeOfSizeVisualVariable(a);return c===g.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(a,b,c===g.WGLVVFlag.SIZE_UNIT_VALUE&&function(b){return e.getVisualVariableSizeValueRepresentationRatio(b,a.valueRepresentation)})}return this._createNormalizedFunction(a,b)};a.prototype._createNormalizedFunction=function(a,b,c){var d=a.field;if(d){if("string"===typeof d){var e=a.normalizationField;return e?function(a){if(a.attributes[d]&&a.attributes[e])return a=a.attributes[d]/
a.attributes[e],c?c(a):a}:c?function(a){return c(a.attributes[d])}:function(a){return a.attributes[d]}}if("function"===typeof d)return n.error(new l("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(a){};n.error(new l("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof d));return function(a){}}if(a.valueExpression)return k.createArcadeFunction(a.valueExpression,
b,c);n.error("Unable to create a normalized function for visual variable: "+a);return function(a){}};return a}();a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../definitions ../../enums ../../number ../../TextShaping ../../collisions/Metric ../../materialKey/MaterialKey ./GlyphGroup ./util ./WGLTextTemplate ../../../../../3d/support/mathUtils ../../../../../vectorTiles/GeometryUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z){function y(a){switch(a){case "above-left":return[-1,-1];case "above-center":case "above-along":return[0,-1];case "above-right":return[1,-1];case "center-left":return[-1,0];case "center-center":case "center-along":return[0,0];case "center-right":return[1,0];case "below-left":return[-1,1];case "below-center":case "below-along":return[0,1];case "below-right":return[1,1];case "always-horizontal":return[0,0];default:G("Found invalid placement type "+a)}}
Object.defineProperty(a,"__esModule",{value:!0});var x=h.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),E=c.i8888to32(255,255,255,255),B=n.vec2f32.create(),F=k.mat2df32.create(),D={xOffset:0,yOffset:0,width:0,height:0},G=function(a,b){void 0===b&&(b="mapview-labeling");return x.error(new f(b,a))};a.isMapAligned=function(a){switch(a){case "above-along":case "below-along":case "center-along":return 1;default:return 0}};m=function(a){function f(c,d,e){var f=a.call(this,c,d.symbol)||this;f.geometryType=
b.WGLGeometryType.LABEL;f._refTemplate=D;var g=d.symbol,h;h=!!d.minScale&&e.scaleToZoom(d.minScale)||0;h=C.clamp(h,0,25.5);e=!!d.maxScale&&e.scaleToZoom(d.maxScale)||255;e=C.clamp(e,0,25.5);var k=y(d.labelPlacement),p=k[0],k=k[1];f._justify=(-1*p+1)/2;f._xAlignD=p;f._yAlignD=k;f._xPlacementD=p;f._yPlacementD=k;f._minZoom=h;f._maxZoom=e;c=t.LabelMaterialKey.load(t.createMaterialKey(f.geometryType,c,!1,d));c.sdf=!0;f._materialKey=c.data;g=g.font.decoration.toLowerCase();"underline"===g?f._decorationTop=
6:"line-through"===g&&(f._decorationTop=-5);return f}l(f,a);f.fromLabelClass=function(a,b,c){return new f(a,b,c)};f.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);isNaN(this._decorationTop)||q.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=q.getBox(a)};f.prototype._computeShaping=function(a,b){return new q([a],d.TEXT_MAX_WIDTH,d.TEXT_LINE_HEIGHT,d.TEXT_SPACING,[0,0],.5,.5,b)};Object.defineProperty(f.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});f.prototype.bindReferenceTemplate=function(a){this._refTemplate=a||D};f.prototype._placeGlyphs=function(a,b,c,d){var e=this._size,f=this._haloSize,g=this._shapedBox,h=this._shapedGlyphs,k=this._computeGlyphTransform(g);if("esriGeometryPolyline"!==a)for(var p=0;p<c.length;p++)for(var l=c[p],n=0,m=h;n<m.length;n++){var q=m[n];l.place(q,a,b,k,this._materialKey,e,f,g,d,this._minZoom,this._maxZoom)}else for(p=0;p<c.length;p++)for(var l=c[p],n=q=l.order,m=n-(n-1)/2-1,t=m-
(m-1)/2-1,u=t-(t-1)/2-1,q=-1===q?0:n%2?m%2?t%2?u%2?0:d-3.1:d-2.1:d-1.1:d-.1,n=Math.max(d+C.log2((this._shapedBox.width*this._scale+48)/l.pathLen),Math.max(q,this._minZoom)),m=0,t=h;m<t.length;m++)q=t[m],l.place(q,a,b,k,this._materialKey,e,f,g,d,n,this._maxZoom)};f.prototype.writeMesh=function(a,e,f,g,h,k,l,n,m,q){var u=this,z=this._computeAnchors(f,h),x=c.i8888to32(0,0,0,this._bitset);if(z.length&&this._shapedGlyphs.length){this._placeGlyphs(f,h,z,m);var w=t.LabelMaterialKey.load(this._materialKey);
if("esriGeometryPolyline"!==f){f=z[0];h=this._computeGlyphTransform(this._shapedBox);h=this._createBounds(this._shapedBox,h);k=f.glyphs.get(0);var y=k[0];m=y.anchorX;var D=y.anchorY,G=Math.floor(10*y.minZoom),y=Math.floor(10*y.maxZoom),C=a.length;k.forEach(function(a){a.minZoom=25.5;a.maxZoom=25.5});this._writeVertices(a,e,g,l,k,n,w,x,G,y);k=new p.default(g,{from:C,count:a.length-C},m,D,G);m=Math.max(this._refTemplate.height,this._refTemplate.width);w.vvSizeFieldStops||w.vvSizeMinMaxValue||w.vvSizeScaleStops||
w.vvSizeUnitValue?k.setVV(c.toFloat32(l[b.VVType.SIZE]),m,this._xPlacementD,this._yPlacementD):(k.offsetX=(m/2+d.COLLISION_PLACEMENT_PADDING)*this._xPlacementD,k.offsetY=(m/2+d.COLLISION_PLACEMENT_PADDING)*this._yPlacementD);k.bounds=h;q.push(k);f.clear()}else{f=function(b){var c=z[b],d=c.x,f=c.y;b=a.length;var h=new p.default(g,{from:b,count:-1},d,f,25.5);c.glyphs.forEach(function(b){for(var k=0;k<b.length;k++){var p=b[k];p.minZoom=Math.max(c.minZoom,p.minZoom);if(p.bounds){var m=p.anchorY-f;p.bounds.center[0]+=
p.anchorX-d;p.bounds.center[1]+=m;h.add(p.bounds)}}h.bounds&&u._writeHalos(a,e,g,l,b,n,w,x)});c.glyphs.forEach(function(b){h.bounds&&u._writeText(a,e,g,l,b,n,w,x)});h.range.count=a.length-b;h.bounds&&q.push(h);c.clear()};for(h=0;h<z.length;h++)f(h);this._computedGlyphs=[]}}};f.prototype._outsideTile=function(a,b){return 0>a||512<=a||0>b||512<=b};f.prototype._smoothVertices=function(a,b){if(!(0>=b)){var c=a.length;if(!(3>c)){var d=[],e=0;d.push(0);for(var f=1;f<c;f++)e+=w.dist(a[f],a[f-1]),d.push(e);
b=Math.min(b,.2*e);e=[];e.push(a[0][0]);e.push(a[0][1]);var g=a[c-1][0],h=a[c-1][1],f=w.sub([0,0],a[0],a[1]);w.normalize(f);a[0][0]+=b*f[0];a[0][1]+=b*f[1];w.sub(f,a[c-1],a[c-2]);w.normalize(f);a[c-1][0]+=b*f[0];a[c-1][1]+=b*f[1];for(f=1;f<c;f++)d[f]+=b;d[c-1]+=b;for(var k=.5*b,f=1;f<c-1;f++){for(var p=0,l=0,n=0,m=f-1;0<=m&&!(d[m+1]<d[f]-k);m--){var q=k+d[m+1]-d[f],t=d[m+1]-d[m],u=d[f]-d[m]<k?1:q/t;if(1E-6>Math.abs(u))break;var z=u*u,x=u*q-.5*z*t,y=u*t/b,D=a[m+1],G=a[m][0]-D[0],C=a[m][1]-D[1],p=p+
y/x*(D[0]*u*q+.5*z*(q*G-t*D[0])-z*u*t*G/3),l=l+y/x*(D[1]*u*q+.5*z*(q*C-t*D[1])-z*u*t*C/3),n=n+y}for(m=f+1;m<c&&!(d[m-1]>d[f]+k);m++){q=k-d[m-1]+d[f];t=d[m]-d[m-1];u=d[m]-d[f]<k?1:q/t;if(1E-6>Math.abs(u))break;z=u*u;x=u*q-.5*z*t;y=u*t/b;D=a[m-1];G=a[m][0]-D[0];C=a[m][1]-D[1];p+=y/x*(D[0]*u*q+.5*z*(q*G-t*D[0])-z*u*t*G/3);l+=y/x*(D[1]*u*q+.5*z*(q*C-t*D[1])-z*u*t*C/3);n+=y}e.push(p/n);e.push(l/n)}e.push(g);e.push(h);for(m=f=0;f<c;f++)a[f][0]=e[m++],a[f][1]=e[m++]}}};f.prototype._computeLineAnchors=function(a,
b,c){b=b.paths;var d=this._scale*this._shapedBox.width;c=d/2+c;for(var d=d/2+16,e=this._shapedBox.width*this._scale,f=0;f<b.length;f++){var g=b[f],h=[];h.push(g[0]);for(var k=1;k<g.length;k++){var p=h[k-1],l=p[0],p=p[1],l=l+g[k][0],p=p+g[k][1];h.push([l,p])}this._smoothVertices(h,e);g=[];g.push(h[0]);for(k=1;k<h.length;k++){var p=h[k-1],n=h[k],l=Math.round(n[0]-p[0]),p=Math.round(n[1]-p[1]);g.push([l,p])}b[f]=g;h=this._getPathLength(g);if(!(h<2*d))for(var k=h/2,m=0,n=g[0][0],q=g[0][1],t=1;t<g.length;t++){var l=
g[t][0],p=g[t][1],z=Math.sqrt(l*l+p*p),m=m+z;if(0<=m-k){var x=m-k,w=z-x,y=w/z,D=n+l*y,G=q+p*y;this._outsideTile(D,G)||(m=new u.default(D,G,y,f,t,n,q,z,h,-1),a.push(m));for(var C=-1,G=0,G=w-c;0<=G;G-=c){var y=G/z,D=n+l*y,E=q+p*y;C++;this._outsideTile(D,E)||(m=new u.default(D,E,y,f,t,n,q,z,h,C),a.push(m))}m=G+c;G=z-x;y=n;D=q;for(E=t-1;0!==E;E--){var A=g[E][0],B=g[E][1],H=Math.sqrt(A*A+B*B);if(m+H>=c){for(var F=m=c-m;F<H;F+=c){var O=F/H,r=y-A*O,J=D-B*O;C++;(m=F+G+d<k)&&!this._outsideTile(r,J)&&(m=new u.default(r,
J,1-O,f,E,y-A,D-B,H,h,C),a.push(m))}m=H-(F-c)}else m+=H;G+=H;y-=A;D-=B}C=-1;for(G=w+c;G<=z;G+=c)y=G/z,D=n+l*y,w=q+p*y,C++,this._outsideTile(D,w)||(m=new u.default(D,w,y,f,t,n,q,z,h,C),a.push(m));y=n+l;D=q+p;m=z-(G-c);G=x;for(E=t+1;E<g.length;E++){l=g[E][0];p=g[E][1];n=Math.sqrt(l*l+p*p);if(m+n>=c){for(q=m=c-m;q<n;q+=c)t=q/n,z=y+l*t,x=D+p*t,C++,(m=q+G+d<k)&&!this._outsideTile(z,x)&&(m=new u.default(z,x,t,f,E,y,D,n,h,C),a.push(m));m=n-(q-c)}else m+=n;G+=n;y+=l;D+=p}break}n+=l;q+=p}}return a};f.prototype._computeAnchors=
function(a,b){var c=[];switch(a){case "esriGeometryPoint":return b=b.geometry,a=b.x,b=b.y,a=new u.default(a,b),c.push(a),c;case "esriGeometryPolygon":if(b.centroid)return b=b.centroid,a=b.x,b=b.y,a=new u.default(a,b),c.push(a),c;G("Non-centroid polygon anchor placement not supported");break;case "esriGeometryPolyline":return this._computeLineAnchors(c,b.geometry,376);default:return G("Unable to handle geometryType: "+a),c}};f.prototype._getPathLength=function(a){for(var b=0,c=1;c<a.length;c++)var d=
a[c][0],e=a[c][1],b=b+Math.sqrt(d*d+e*e);return b};f.prototype._computeGlyphTransform=function(a){var b=this._scale,c=this._angle*z.C_DEG_TO_RAD,d=a.width/2,f=a.height/2,d=this._xAlignD*d*b+(this._xOffset+this._refTemplate.xOffset)+(a.x+d);a=this._yAlignD*f*b-(this._yOffset+this._refTemplate.yOffset)-(a.y+f);f=g.mat2d.identity(F);g.mat2d.translate(f,f,e.vec2.set(B,d,a));g.mat2d.scale(f,f,e.vec2.set(B,b,b));g.mat2d.rotate(f,f,c);return f};f.prototype._writeVertex=function(a,d,e,f,g,h,k,p,l,n){e=d.get("geometry");
k=d.get("visibility");d=d.get("visibilityRange");p=p&&p[b.VVType.SIZE]||1;this._refSymbolAndPlacementOffset=c.i8888to32(h.angle,Math.min(Math.floor(Math.max(this._refTemplate.width,this._refTemplate.height)),255),this._xPlacementD+1,this._yPlacementD+1);e.push(f);e.push(g);e.push(h.vertexOffsetUpperLeft);e.push(h.texFontSizeUpperLeft);e.push(this._refSymbolAndPlacementOffset);e.push(p);k.push(l);e.push(f);e.push(g);e.push(h.vertexOffsetUpperRight);e.push(h.texFontSizeUpperRight);e.push(this._refSymbolAndPlacementOffset);
e.push(p);k.push(l);e.push(f);e.push(g);e.push(h.vertexOffsetLowerLeft);e.push(h.texFontSizeLowerLeft);e.push(this._refSymbolAndPlacementOffset);e.push(p);k.push(l);e.push(f);e.push(g);e.push(h.vertexOffsetLowerRight);e.push(h.texFontSizeLowerRight);e.push(this._refSymbolAndPlacementOffset);e.push(p);k.push(l);d.push(E);d.push(E);a.vertexCount+=4};return f}(A.default);a.default=m})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../renderers ../../../../../core/Error ../../../../../core/maybe ../enums ../mesh/templates/WGLLabelTemplate ../util/vvFlagUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d){Object.defineProperty(a,"__esModule",{value:!0});a.createMaterialKey=function(a,b,c,d){if(k.isSome(b)){a:{if("heatmap"===b.type)throw Error("Symbol processor does not support heatmap renderer");switch(a){case e.WGLGeometryType.FILL:a=p.from(b);break a;case e.WGLGeometryType.LINE:a=u.from(b,c);break a;case e.WGLGeometryType.MARKER:if("dot-density"===b.type)throw Error("Dot Density renderer does not support Marker GeometryTypes");a=t.from(b);break a;case e.WGLGeometryType.TEXT:if("dot-density"===
b.type)throw Error("Dot Density renderer does not support Text GeometryTypes");a=w.from(b);break a;case e.WGLGeometryType.LABEL:if("dot-density"===b.type)throw Error("Dot Density renderer does not support Label GeometryTypes");a=A.from(b,d);break a;default:throw Error("Unable to createMaterialKey for unknown geometryType "+a);}}return a}switch(a){case e.WGLGeometryType.FILL:return p.from(null);case e.WGLGeometryType.LINE:return u.from(null,c);case e.WGLGeometryType.MARKER:return t.from(null);case e.WGLGeometryType.TEXT:return w.from(null);
case e.WGLGeometryType.LABEL:return A.from(null,d);default:throw Error("Unable to createMaterialKey for unknown geometryType "+a);}};m=function(){function a(a){this._data=0;this._data=a}a.load=function(a){var b=this.shared;b.data=a;return b};Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"geometryType",{get:function(){return this.bits(5,8)},set:function(a){this.setBits(a,5,
8)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mapAligned",{get:function(){return!!this.bit(17)},set:function(a){this.setBit(17,a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sdf",{get:function(){return!!this.bit(8)},set:function(a){this.setBit(8,a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pattern",{get:function(){return!!this.bit(9)},set:function(a){this.setBit(9,a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"textureBinding",{get:function(){return this.bits(0,5)},set:function(a){this.setBits(a,0,5)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"geometryTypeString",{get:function(){switch(this.geometryType){case e.WGLGeometryType.FILL:return"fill";case e.WGLGeometryType.MARKER:return"marker";case e.WGLGeometryType.LINE:return"line";case e.WGLGeometryType.TEXT:return"text";case e.WGLGeometryType.LABEL:return"label";default:throw new g("Unable to handle unknown geometryType: "+this.geometryType);
}},enumerable:!0,configurable:!0});a.prototype.setBit=function(a,b){a=1<<a;this._data=b?this._data|a:this._data&~a};a.prototype.bit=function(a){return(this._data&1<<a)>>a};a.prototype.setBits=function(a,b,c){for(var d=0;b<c;b++,d++)this.setBit(b,0!==(a&1<<d))};a.prototype.bits=function(a,b){for(var c=0,d=0;a<b;a++,d++)c|=this.bit(a)<<d;return c};a.prototype.hasVV=function(){return!1};a.prototype.setVV=function(a,b){};a.prototype.getVariation=function(){var a={},b;for(b in this)"boolean"===typeof this[b]&&
(a[b]=this[b]);return a};a.prototype.getVariationHash=function(){return this._data&~(4&this.textureBinding)};a.shared=new a(0);return a}();a.MaterialKeyBase=m;f=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvSizeMinMaxValue",{get:function(){return 0!==this.bit(13)},set:function(a){this.setBit(13,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vvSizeScaleStops",{get:function(){return 0!==
this.bit(14)},set:function(a){this.setBit(14,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vvSizeFieldStops",{get:function(){return 0!==this.bit(15)},set:function(a){this.setBit(15,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vvSizeUnitValue",{get:function(){return 0!==this.bit(16)},set:function(a){this.setBit(16,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||
this.vvSizeFieldStops||this.vvSizeUnitValue};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);b&=d.getSizeFlagsMask(b,c);this.vvSizeMinMaxValue=!!(b&e.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(b&e.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(b&e.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(b&e.WGLVVFlag.SIZE_SCALE_STOPS)};return b}(a)};var b=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,
"vvRotation",{get:function(){return 0!==this.bit(12)},set:function(a){this.setBit(12,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvRotation};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvRotation=!c&&!!(b&e.WGLVVFlag.ROTATION)};return b}(a)},c=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvColor",{get:function(){return 0!==
this.bit(10)},set:function(a){this.setBit(10,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvColor};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvColor=!c&&!!(b&e.WGLVVFlag.COLOR)};return b}(a)},q=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"vvOpacity",{get:function(){return 0!==this.bit(11)},set:function(a){this.setBit(11,a)},
enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvOpacity};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvOpacity=!c&&!!(b&e.WGLVVFlag.OPACITY)};return b}(a)},p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a){var b=this.load(0);b.geometryType=e.WGLGeometryType.FILL;k.isSome(a)&&(a instanceof h.DotDensityRenderer?b.dotDensity=
!0:(a=d.getVVFlags(a.visualVariables),b.setVV(a,!1)));return b.data};b.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};Object.defineProperty(b.prototype,"dotDensity",{get:function(){return!!this.bit(12)},set:function(a){this.setBit(12,a)},enumerable:!0,configurable:!0});b.shared=new b(0);return b}(c(q(m)));a.FillMaterialKey=p;var t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=
function(a){var b=this.load(0);b.geometryType=e.WGLGeometryType.MARKER;k.isSome(a)&&(a=d.getVVFlags(a.visualVariables),b.setVV(a,!1));return b.data};b.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};b.shared=new b(0);return b}(c(q(b(f(m)))));a.MarkerMaterialKey=t;var u=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a,b){var c=this.load(0);c.geometryType=e.WGLGeometryType.LINE;
k.isSome(a)&&(a=d.getVVFlags(a.visualVariables),c.setVV(a,b));return c.data};b.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};b.shared=new b(0);return b}(c(q(f(m))));a.LineMaterialKey=u;var w=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a){var b=this.load(0);b.geometryType=e.WGLGeometryType.TEXT;k.isSome(a)&&(a=d.getVVFlags(a.visualVariables),b.setVV(a,!1));return b.data};
b.prototype.getVariation=function(){return a.prototype.getVariation.call(this)};b.shared=new b(0);return b}(c(q(b(f(m)))));a.TextMaterialKey=w;var A=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.load=function(a){var b=this.shared;b.data=a;return b};b.from=function(a,b){var c=this.load(0);c.geometryType=e.WGLGeometryType.LABEL;k.isSome(a)&&(a=d.getVVFlags(a.visualVariables),c.setVV(a,!1));c.mapAligned=!!n.isMapAligned(b.labelPlacement);return c.data};b.prototype.getVariation=
function(){return a.prototype.getVariation.call(this)};b.shared=new b(0);return b}(f(m));a.LabelMaterialKey=A})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/DotDensityRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/StretchRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(m,a,l,f,h,g,k,e,n,d){Object.defineProperty(a,"__esModule",{value:!0});a.ClassBreaksRenderer=
l;a.DotDensityRenderer=f;a.HeatmapRenderer=h;a.BaseRenderer=g;a.SimpleRenderer=k;a.StretchRenderer=e;a.UniqueValueRenderer=n;a.isRenderer=function(b){return b instanceof a.BaseRenderer};a.read=d.read;a.write=d.write;a.fromJSON=d.fromJSON;a.rendererTypes={key:"type",base:a.BaseRenderer,typeMap:{heatmap:a.HeatmapRenderer,simple:a.SimpleRenderer,"unique-value":a.UniqueValueRenderer,"class-breaks":a.ClassBreaksRenderer,"dot-density":a.DotDensityRenderer}}})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require",
"exports","../enums","../visualVariablesUtils"],function(m,a,l,f){function h(a,e){void 0===e&&(e=!1);var f=l.WGLVVFlag.SIZE_FIELD_STOPS|l.WGLVVFlag.SIZE_MINMAX_VALUE|l.WGLVVFlag.SIZE_SCALE_STOPS|l.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(l.WGLVVTarget.FIELD_TARGETS_OUTLINE|l.WGLVVTarget.MINMAX_TARGETS_OUTLINE|l.WGLVVTarget.SCALE_TARGETS_OUTLINE|l.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e?f&a:f&~a}function g(a){var e=h(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|l.WGLVVFlag.ROTATION|e)}Object.defineProperty(a,
"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return l.WGLVVFlag.NONE;for(var e=0,g=0;g<a.length;g++){var d=a[g];if("size"===d.type){var b=f.getTypeOfSizeVisualVariable(d),e=e|b;"outline"===d.target&&(e|=b<<4)}else"color"===d.type?e|=l.WGLVVFlag.COLOR:"opacity"===d.type?e|=l.WGLVVFlag.OPACITY:"rotation"===d.type&&(e|=l.WGLVVFlag.ROTATION)}return e};a.getSizeFlagsMask=h;a.getMarkerVVFlags=g;a.getFillVVFlags=function(a){return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,
e){if(e)return e=h(a,!0),a&e;e=h(a,!1);return a&(l.WGLVVFlag.COLOR|l.WGLVVFlag.OPACITY|e)};a.getTextVVFlags=function(a){return g(a)};a.getLabelVVFlags=function(a){var e=h(a,!1);return a&e}})},"esri/views/2d/engine/webgl/mesh/templates/GlyphGroup":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../definitions ../../materialKey/MaterialKey ./ComputedGlyph ./util ../../../../../3d/support/mathUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){Object.defineProperty(a,"__esModule",{value:!0});var c=f.getLogger("esri.views.2d.engine.webgl.GlyphGroup");m=function(){function a(a,b,c,d,e,f,g,h,k,l){void 0===c&&(c=0);void 0===d&&(d=-1);void 0===e&&(e=-1);void 0===f&&(f=-1);void 0===g&&(g=-1);void 0===h&&(h=-1);void 0===k&&(k=0);void 0===l&&(l=-1);this.x=a;this.y=b;this.t=c;this.i=d;this.j=e;this.segmentPosX=f;this.segmentPosY=g;this.segmentLen=h;this.pathLen=k;this.order=l;this._glyphs=new Map;this.minZoom=0}Object.defineProperty(a.prototype,
"glyphs",{get:function(){return this._glyphs},enumerable:!0,configurable:!0});a.prototype.add=function(a,b){var c=this._glyphs.get(b);c?c.push(a):this._glyphs.set(b,[a])};a.prototype.clear=function(){this._glyphs.clear()};a.prototype.place=function(a,b,d,f,g,h,k,m,q,E,B){var p=a.x,t=a.y,u=a.codePoint,w=a.glyphMosaicItem;g=e.MaterialKeyBase.load(g);g.textureBinding=a.glyphMosaicItem.textureBinding;switch(b){case "esriGeometryPoint":case "esriGeometryPolygon":a=n.default.from(p,t,this.x,this.y,-1,E,
B,w,u,g.data,f,h,k);this.add(a,0);break;case "esriGeometryPolyline":b=d.geometry;this._placeGlyphAlongLine(a,g.data,b,f,m,h,k,q,E,B,-1);this._placeGlyphAlongLine(a,g.data,b,f,m,h,k,q,E,B,1);break;case "esriGeometryMultipoint":case "esriGeometryEnvelope":a=void 0,void 0===a&&(a="mapview-labeling"),c.error(new l(a,"Cannot place for unsupported geometryType: "+b))}};a.prototype._findLabelTheta=function(a,b,c,d){b*=d;a=Math.acos((0*b+-1*d*-a)/(1*c));0<b&&(a=2*Math.PI-a);return a};a.prototype._placeGlyphAlongLine=
function(a,c,e,f,l,m,q,y,x,E,B){e=e.paths[this.i];var p=e[this.j],t=p[0],u=p[1],p=a.x,w=a.y,z=a.glyphMosaicItem,A=a.codePoint,C=a.glyphMosaicItem.metrics,C=(a.x+C.left+C.width/2)*m/24;a=B*b.sign(C)||1;var C=Math.abs(C),J=d.len(t,u),R=this._findLabelTheta(t,u,J,B),M=(a+1)/2,J=-a*(-1*M+this.t)*J,W=h.mat2d.rotate(g.mat2df32.create(),f,-R),S=48<l.height;l=0===J?E:Math.max(Math.max(y+b.log2(Math.abs(C/J)),0),x);S&&(l=x);E=n.default.from(p,w,this.x,this.y,R,l,E,z,A,c,W,m,q,S||l<=y&&E>=y&&1===B);this.add(E,
this.j);if(!S)for(E=this.segmentPosX+M*t,t=this.segmentPosY+M*u,W=l,u=this.j+a;0<u&&u<e.length;u+=a){var L=E,Z=t,M=e[u];l=M[0];var M=M[1],K=d.len(l,M),S=this._findLabelTheta(l,M,K,B),S=h.mat2d.rotate(g.mat2df32.create(),f,-S),L=L+-a*l/K*J,Z=Z+-a*M/K*J,J=J+K,K=W-.1,W=0===J?K:Math.max(Math.max(y+b.log2(Math.abs(C/J)),0),x),S=n.default.from(p,w,L,Z,R,W,K,z,A,c,S,m,q,W<=y&&K>=y&&1===B);this.add(S,u);if(W<y-k.COLLISION_MAX_ZOOM_DELTA){this.minZoom=Math.max(W,this.minZoom);break}E+=a*l;t+=a*M}};return a}();
a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/ComputedGlyph":function(){define("require exports ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../definitions ../../number ../../collisions/BoundingBox".split(" "),function(m,a,l,f,h,g,k){Object.defineProperty(a,"__esModule",{value:!0});var e=f.vec2f32.create();m=function(){function a(a,b,c,e,f,g,h,k,l,n,m,y,x,E,B){this.anchorX=a;this.anchorY=b;this.angle=c;this.bounds=e;this.minZoom=f;this.maxZoom=
g;this.materialKey=h;this.vertexOffsetUpperLeft=k;this.vertexOffsetUpperRight=l;this.vertexOffsetLowerLeft=n;this.vertexOffsetLowerRight=m;this.texFontSizeUpperLeft=y;this.texFontSizeUpperRight=x;this.texFontSizeLowerLeft=E;this.texFontSizeLowerRight=B}a.from=function(d,b,c,f,p,n,m,w,A,C,z,y,x,E,B){void 0===E&&(E=!1);void 0===B&&(B=!1);var q=w.rect,t=w.metrics;p=-1===p?255:Math.floor(180*p/Math.PI/360*254);var u=Math.round(q.x/4),H=Math.round(q.y/4);w=u+Math.round(q.width/4);var P=H+Math.round(q.height/
4),O=-24-t.top,N=t.left,J=-t.top,R=q.width,q=q.height;A||(B||(O=0),N=4,R=t.width);d+=N;A=B?b+J:b+O;R=d+R;O=A;b=d;J=A+q;q=R;B=J;var N=b+t.width,M=J-t.height,W=t.width*y/24,t=t.height*y/24;z&&(l.vec2.transformMat2d(e,l.vec2.set(e,d,A),z),d=e[0],A=e[1],l.vec2.transformMat2d(e,l.vec2.set(e,R,O),z),R=e[0],O=e[1],l.vec2.transformMat2d(e,l.vec2.set(e,b,J),z),b=e[0],J=e[1],l.vec2.transformMat2d(e,l.vec2.set(e,q,B),z),q=e[0],B=e[1],l.vec2.transformMat2d(e,l.vec2.set(e,N,M),z),N=e[0],M=e[1]);z=E?new k.default(N,
M,W+h.COLLISION_BOX_PADDING,t+h.COLLISION_BOX_PADDING):null;E=g.i1616to32(8*d,8*A);t=g.i1616to32(8*R,8*O);d=g.i1616to32(8*b,8*J);b=g.i1616to32(8*q,8*B);q=g.i8888to32(u,H,y,x);H=g.i8888to32(w,H,y,x);u=g.i8888to32(u,P,y,x);y=g.i8888to32(w,P,y,x);return new a(c|0,f|0,p,z,n,m,C,E,t,d,b,q,H,u,y)};return a}();a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["require","exports"],function(m,a){function l(a,h){return Math.sqrt(a*a+h*h)}Object.defineProperty(a,"__esModule",
{value:!0});a.sub=function(a,h,g){a[0]=h[0]-g[0];a[1]=h[1]-g[1];return a};a.len=l;a.normalize=function(a){var f=l(a[0],a[1]);a[0]/=f;a[1]/=f};a.dist=function(a,h){return l(a[0]-h[0],a[1]-h[1])};a.isFunction=function(a){return"function"===typeof a}})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../color ../../definitions ../../enums ../../fontUtils ../../number ../../TextShapingNew ../../WGLDisplayRecord ../../collisions/BoundingBox ../../materialKey/MaterialKey ./ComputedGlyph ./WGLMeshTemplate ../../util/BidiText ../../../../layers/graphics/graphicsUtils ../../../../../vectorTiles/GeometryUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y,x,E,B){Object.defineProperty(a,"__esModule",{value:!0});var F=h.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),D=e.mat2df32.create(),G=d.vec2f32.create();m=function(a){function e(c,d){var e=a.call(this)||this;e.geometryType=q.WGLGeometryType.TEXT;e._xOffset=g.pt2px(d.xoffset);e._yOffset=g.pt2px(d.yoffset);e._decorationTop=p.getFontDecorationTop(d.font);e._color=(d.color&&b.premultiplyAlphaRGBA(d.color))|0;e._haloColor=(d.haloColor&&b.premultiplyAlphaRGBA(d.haloColor))|
0;e._haloSize=Math.min(Math.floor(5*g.pt2px(g.toPt(d.haloSize||0))),127);e._size=Math.min(Math.round(g.pt2px(d.font.size)),127);e._scale=e._size/24;e._angle=d.angle||0;e._justify=E.getJustification(d.horizontalAlignment||"center");e._xAlignD=E.getXAnchorDirection(d.horizontalAlignment||"center");e._yAlignD=-E.getYAnchorDirection(d.verticalAlignment||"baseline");e._baseline="baseline"===(d.verticalAlignment||"baseline");e._bitset=0;c=C.MaterialKeyBase.load(C.createMaterialKey(e.geometryType,c,!1));
c.sdf=!0;e._materialKey=c.data;e.symbolId=d.id;return e}l(e,a);e.fromText=function(a,b,c){a=new e(a,b);b=x.bidiText(b.text);a.bindTextInfo(c,b[0],b[1]);a._computeGlyphs(a._shapedGlyphs,a._shapedBox);return a};e.prototype.bindTextInfo=function(a,b,c){a=this._computeShaping(a,this._justify).getShaping(b,c);isNaN(this._decorationTop)||u.addDecoration(a,this._decorationTop);this._shapedGlyphs=a;this._shapedBox=u.getBox(a)};e.prototype.writeMesh=function(a,b,c,d,e,g,h,k){g=this._computedGlyphs;var l=C.TextMaterialKey.load(this._materialKey),
p=t.i8888to32(0,0,0,this._bitset);switch(c){case "esriGeometryPoint":e=e.geometry;c=e.x;e=e.y;for(var n=0;n<g.length;n++){var m=g[n];m.anchorX=c;m.anchorY=e}this._writeVertices(a,b,d,h,g,k,l,p,0,0);break;case "esriGeometryPolygon":if(e.centroid){e=e.centroid;c=e.x;e=e.y;for(n=0;n<g.length;n++)m=g[n],m.anchorX=c,m.anchorY=e;this._writeVertices(a,b,d,h,g,k,l,p,0,0);break}case "esriGeometryMultipoint":for(var n=e.geometry.points,q=e=c=0;q<n.length;q++){m=n[q];c+=m[0];e+=m[1];for(var u=0,w=g;u<w.length;u++)m=
w[u],m.anchorX=c,m.anchorY=e;this._writeVertices(a,b,d,h,g,k,l,p,0,0)}break;default:a=void 0,void 0===a&&(a="mapview-processing"),F.error(new f(a,"Unable to handle geometryType: "+c))}};e.prototype._computeGlyphs=function(a,b){var c=Array(a.length);b=this._computeGlyphTransform(b);for(var d=C.MaterialKeyBase.load(this._materialKey),e=0;e<a.length;e++){var f=a[e],g=f.x,h=f.y,k=f.codePoint,f=f.glyphMosaicItem;d.textureBinding=f.textureBinding;c[e]=z.default.from(g,h,0,0,-1,0,25,f,k,d.data,b,this._size,
this._haloSize,!1,!0)}this._computedGlyphs=c};e.prototype._createBounds=function(a,b){var e=a.width/2,f=a.height/2,g=b[4],h=b[5],k;if(this._angle){a=d.vec2f32.fromValues(-e,-f);k=d.vec2f32.fromValues(e,-f);var l=d.vec2f32.fromValues(-e,f),p=d.vec2f32.fromValues(e,f);n.vec2.transformMat2d(a,a,b);n.vec2.transformMat2d(k,k,b);n.vec2.transformMat2d(l,l,b);n.vec2.transformMat2d(p,p,b);b=f=Infinity;var m=0,q=e=0;for(a=[a,k,l,p];q<a.length;q++)k=a[q],f=Math.min(k[0],f),m=Math.max(k[0],m),b=Math.min(k[1],
b),e=Math.max(k[1],e);k=m-f;a=e-b}else k=a.width*this._scale,a=a.height*this._scale;return new A.default(g,h,k+c.COLLISION_BOX_PADDING,a+c.COLLISION_BOX_PADDING)};e.prototype._computeShaping=function(a,b){return new u([a],512,c.TEXT_LINE_HEIGHT,c.TEXT_SPACING,[0,.5*-c.TEXT_LINE_HEIGHT],.5*(1-this._xAlignD),0,b)};e.prototype._computeGlyphTransform=function(a){var b=this._scale,c=this._angle*B.C_DEG_TO_RAD,d=k.mat2d.identity(D);k.mat2d.rotate(d,d,c);k.mat2d.translate(d,d,n.vec2.set(G,this._xOffset,
-this._yOffset));k.mat2d.scale(d,d,n.vec2.set(G,b,b));k.mat2d.translate(d,d,n.vec2.set(G,-4,-4-(this._baseline?25:a.y+(1-this._yAlignD)*a.height*.5)));return d};e.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k,l){this._writeHalos(a,b,c,d,e,f,g,h,k,l);this._writeText(a,b,c,d,e,f,g,h,k,l)};e.prototype._writeHalos=function(a,b,c,d,e,f,g,h,k,l){var p=b.indexVector;g=g.hasVV();var n=b.getVector("geometry").vertexCount,m=0;if(this._haloSize)for(var q=0;q<e.length;q++,m+=4){var u=e[q],z=t.i1616to32(2*
u.anchorX+1,2*u.anchorY),x=new w(c,this.geometryType,u.materialKey,null==k?Math.floor(10*u.minZoom):k,null==l?Math.floor(10*u.maxZoom):l);x.vertexFrom=n+m;x.indexFrom=p.length;this._writeVertex(x,b,c,z,this._haloColor,u,g,d,f,h);this._writeIndices(x,p,n+m);a.push(x)}};e.prototype._writeText=function(a,b,c,d,e,f,g,h,k,l){var p=b.indexVector;g=g.hasVV();for(var n=b.getVector("geometry").vertexCount,m=0,q=0;q<e.length;q++,m+=4){var u=e[q],z=t.i1616to32(2*u.anchorX,2*u.anchorY),x=new w(c,this.geometryType,
u.materialKey,null==k?Math.floor(10*u.minZoom):k,null==l?Math.floor(10*u.maxZoom):l);x.vertexFrom=n+m;x.indexFrom=p.length;this._writeVertex(x,b,c,z,this._color,u,g,d,f,h);this._writeIndices(x,p,n+m);a.push(x)}};e.prototype._writeVertex=function(a,b,c,d,e,f,g,h,k,l){var p=b.get("geometry");b=b.get("visibility");p.push(d);p.push(c);p.push(e);p.push(f.vertexOffsetUpperLeft);p.push(f.texFontSizeUpperLeft);p.push(l);this._writeVV(p,h,g);b.push(k);p.push(d);p.push(c);p.push(e);p.push(f.vertexOffsetUpperRight);
p.push(f.texFontSizeUpperRight);p.push(l);this._writeVV(p,h,g);b.push(k);p.push(d);p.push(c);p.push(e);p.push(f.vertexOffsetLowerLeft);p.push(f.texFontSizeLowerLeft);p.push(l);this._writeVV(p,h,g);b.push(k);p.push(d);p.push(c);p.push(e);p.push(f.vertexOffsetLowerRight);p.push(f.texFontSizeLowerRight);p.push(l);this._writeVV(p,h,g);b.push(k);a.vertexCount+=4};e.prototype._writeVV=function(a,b,c){c&&(a.push(b[q.VVType.SIZE]),a.push(b[q.VVType.COLOR]),a.push(b[q.VVType.OPACITY]),a.push(b[q.VVType.ROTATION]))};
e.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return e}(y.default);a.default=m})},"esri/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(m,a){function l(a){a=a.toLowerCase().split(" ").join("-");switch(a){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";
default:return a}}Object.defineProperty(a,"__esModule",{value:!0});a.getFullyQualifiedFontName=function(a){var f;a:{if(a.weight)switch(a.weight.toLowerCase()){case "bold":case "bolder":f="-bold";break a}f=""}var g;a:{if(a.style)switch(a.style.toLowerCase()){case "italic":case "oblic":g="-italic";break a}g=""}f+=g;return l(a.family)+(0<f.length?f:"-regular")};a.getFontDecorationTop=function(a){switch(a.decoration.toLowerCase()){case "underline":return-26;case "line-through":return-18}return NaN}})},
"esri/views/2d/engine/webgl/TextShapingNew":function(){define(["require","exports","./Rect"],function(m,a,l){return function(){function a(a,f,k,e,l,d,b,c){this._glyphItems=a;this._maxWidth=f;this._lineHeight=k;this._letterSpacing=e;this._offset=l;this._hAnchor=d;this._vAnchor=b;this._justify=c}a.prototype.getShaping=function(a,f){for(var g=this._letterSpacing,e=this._lineHeight,h=this._justify,d=this._maxWidth,b=[],c=0,l=0,p=0,m=0,u=-1,w=0,A=-1,C=a.length,z=0;z<C;z++){var y=a.charCodeAt(z);if(10===
y){if(z!==C-1){if(u>=m){var c=b[u],x=c.x+c.glyphMosaicItem.metrics.advance,w=Math.max(x,w);h&&this._applyJustification(b,m,u);m=b.length}l=f?l-e:l+e;c=0;++p}}else{for(var x=void 0,E=0,B=this._glyphItems;E<B.length&&!(x=B[E][y]);E++);if(x){b.push({codePoint:y,x:c,y:l,glyphMosaicItem:x});c+=x.metrics.advance+g;if(0<d&&c>d&&0<=A){E=A+1;x=b[E].x;w=Math.max(x,w);for(B=E;B<b.length;B++)b[B].y=f?b[B].y-e:b[B].y+e,b[B].x-=x;h&&this._applyJustification(b,m,A);l=f?l-e:l+e;c-=x;++p;m=E;A=-1}++u;32===y&&(A=b.length-
1)}}}u>=m&&(c=b[u],w=Math.max(w,c.x+c.glyphMosaicItem.metrics.advance),h&&this._applyJustification(b,m,u));if(0<b.length)for(a=(h-this._hAnchor)*w,g=(-this._vAnchor*(p+1)+.5)*e,f&&p&&(g+=p*e),a+=this._offset[0],g+=this._offset[1],f=0;f<b.length;f++)e=b[f],e.x+=a,e.y+=g;return b};a.prototype.getEstimatedShaping=function(a,f,k){for(var e=this._letterSpacing,g=this._lineHeight,d=this._justify,b=this._maxWidth,c=[],h=0,p=0,l=0,m=0,w=-1,A=0,C=-1,z=a.length,y=0;y<z;y++){var x=a.charCodeAt(y);if(10===x){if(y!==
z-1){if(w>=m){var h=c[w],E=h.x+h.glyphMosaicItem.metrics.advance,A=Math.max(E,A);d&&this._applyJustification(c,m,w);m=c.length}p=f?p-g:p+g;h=0;++l}}else{E=k;c.push({codePoint:x,x:h,y:p,glyphMosaicItem:E});h+=E.metrics.advance+e;if(0<b&&h>b&&0<=C){for(var B=C+1,E=c[B].x,A=Math.max(E,A),F=B;F<c.length;F++)c[F].y=f?c[F].y-g:c[F].y+g,c[F].x-=E;d&&this._applyJustification(c,m,C);p=f?p-g:p+g;h-=E;++l;m=B;C=-1}++w;32===x&&(C=c.length-1)}}w>=m&&(h=c[w],A=Math.max(A,h.x+h.glyphMosaicItem.metrics.advance),
d&&this._applyJustification(c,m,w));if(0<c.length)for(a=(d-this._hAnchor)*A,k=(-this._vAnchor*(l+1)+.5)*g,f&&l&&(k+=l*g),a+=this._offset[0],k+=this._offset[1],f=0;f<c.length;f++)g=c[f],g.x+=a,g.y+=k;return c};a.getBox=function(a){if(!a.length)return null;for(var f=Infinity,h=Infinity,e=-Infinity,l=-Infinity,d=0;d<a.length;d++)var b=a[d],c=b.glyphMosaicItem.metrics,m=b.x+c.left,b=b.y-c.top,p=m+c.width,c=b+c.height,f=Math.min(f,m),e=Math.max(e,p),h=Math.min(h,b),l=Math.max(l,c);return{x:f,y:h,width:e-
f,height:l-h}};a.addDecoration=function(a,f){var g=a.length;if(0!==g){for(var e=a[0].x+a[0].glyphMosaicItem.metrics.left,h=a[0].y,d=1;d<g;d++){var b=a[d];if(b.y!==h){var c=a[d-1].x+a[d-1].glyphMosaicItem.metrics.left+a[d-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:e,y:h,glyphMosaicItem:{sdf:!0,rect:new l(4,0,4,8),metrics:{width:c-e,height:2,left:0,top:f,advance:0},page:0}});h=b.y;e=b.x+b.glyphMosaicItem.metrics.left}}g=a[g-1].x+a[g-1].glyphMosaicItem.metrics.left+a[g-1].glyphMosaicItem.metrics.width;
a.push({codePoint:0,x:e,y:h,glyphMosaicItem:{sdf:!0,rect:new l(4,0,4,8),metrics:{width:g-e,height:2,left:0,top:f,advance:0},page:0}})}};a.prototype._applyJustification=function(a,f,k){for(var e=a[k],e=(e.x+e.glyphMosaicItem.metrics.advance)*this._justify;f<=k;f++)a[f].x-=e};return a}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});
m=function(){function a(){}a.prototype.bindFeature=function(a,f,k){};return a}();a.default=m})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=new l;a.bidiText=function(a){if(!f.hasBidiChar(a))return[a,!1];var g;g="rtl"===f.checkContextual(a)?"IDNNN":"ICNNN";return[f.bidiTransform(a,g,"VLYSN"),!0]}})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/intersects ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine/webgl/definitions ../../engine/webgl/fontUtils ../../engine/webgl/GeometryUtils ../../engine/webgl/TextShapingNew ../../engine/webgl/TileClipper ../../engine/webgl/util/BidiText".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C,z,y){function x(a){switch(a){case "left":return 1;case "right":return-1;case "center":case "justify":return 0}}function E(a){switch(a){case "top":return-1;case "middle":return 0;case "baseline":case "bottom":return 1}}function B(a){switch(a){case "left":return 0;case "right":return 1;case "center":case "justify":return.5}}function F(a,b,c,d,e){var h,k,p=l.pt2px(c.xoffset),m=l.pt2px(c.yoffset),n=A.C_DEG_TO_RAD*c.angle;e*=A.C_DEG_TO_RAD;switch(c.type){case "simple-marker":h=
k=l.pt2px(c.size);break;case "picture-marker":h=l.pt2px(c.width),k=l.pt2px(c.height)}c=f.mat2d.identity(S);f.mat2d.translate(c,c,g.vec2.set(L,a,b));f.mat2d.rotate(c,c,e-n);f.mat2d.scale(c,c,g.vec2.set(L,d,-d));f.mat2d.translate(c,c,g.vec2.set(L,p,-m));a=[0,0];g.vec2.transformMat2d(a,g.vec2.set(L,-.5*h,-.5*k),c);b=[0,0];g.vec2.transformMat2d(b,g.vec2.set(L,-.5*h,.5*k),c);d=[0,0];g.vec2.transformMat2d(d,g.vec2.set(L,.5*h,-.5*k),c);p=[0,0];g.vec2.transformMat2d(p,g.vec2.set(L,.5*h,.5*k),c);return{rings:[[a,
d,p,b,a]]}}function D(a,b,c,d,e,h){var k=E(c.verticalAlignment||"baseline"),p="baseline"===(c.verticalAlignment||"baseline"),m=l.pt2px(c.xoffset),n=l.pt2px(c.yoffset),q=l.pt2px(c.font.size)/24,t=4*q,k=p?25*q:d[1]+(1+k)*d[3]*.5;c=A.C_DEG_TO_RAD*c.angle;p=A.C_DEG_TO_RAD*h;h=f.mat2d.identity(S);f.mat2d.translate(h,h,g.vec2.set(L,a,b));f.mat2d.rotate(h,h,p-c);f.mat2d.scale(h,h,g.vec2.set(L,e,-e));f.mat2d.translate(h,h,g.vec2.set(L,m,-n));f.mat2d.translate(h,h,g.vec2.set(L,-t,-t-k));a=[0,0];g.vec2.transformMat2d(a,
g.vec2.set(L,d[0],d[1]),h);b=[0,0];g.vec2.transformMat2d(b,g.vec2.set(L,d[0],d[1]+d[3]),h);e=[0,0];g.vec2.transformMat2d(e,g.vec2.set(L,d[0]+d[2],d[1]),h);m=[0,0];g.vec2.transformMat2d(m,g.vec2.set(L,d[0]+d[2],d[1]+d[3]),h);return{rings:[[a,e,m,b,a]]}}function G(a,b,c){if(!c||0===c.glyphMosaicItems.length)return a;var d=y.bidiText(b.text),e=d[0],d=d[1],f=B(b.horizontalAlignment||"center"),g=x(b.horizontalAlignment||"center");c=(new C([c.glyphMosaicItems],u.TEXT_MAX_WIDTH,u.TEXT_LINE_HEIGHT,u.TEXT_SPACING,
[0,.5*-u.TEXT_LINE_HEIGHT],.5*(1-g),0,f)).getShaping(e,d);e=w.getFontDecorationTop(b.font);isNaN(e)||C.addDecoration(c,e);c=C.getBox(c);b=l.pt2px(b.font.size)/ya;a[0]=b*c.x;a[1]=b*c.y;a[2]=b*c.width;a[3]=b*c.height;return a}function H(a,b){return Math.ceil((a-b)/(2*b))}function P(a,b){var d;d=c.isPolygon(a)?a.rings:a.paths;for(var e=0;e<d.length;e++)for(var f=0,g=d[e];f<g.length;f++)g[f][0]+=b;return a}function O(a,b){if(!b)return a;var c=N(a,b).map(function(a){return a.extent});return 2>c.length?
c[0]||a:2<c.length?(a.xmin=b.valid[0],a.xmax=b.valid[1],a):{rings:c.map(function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]})}}function N(a,b){var c=[],d=a.ymin,e=a.ymax,f=a.xmax-a.xmin,g=a.xmin,h=a.xmax,k,l=b.valid,p=l[0],m=l[1];k=J(a.xmin,b);var n=k.x,l=k.frameId;k=J(a.xmax,b);b=k.x;a=k.frameId;k=n===b&&0<f;if(f>2*m){f={xmin:g<h?n:b,ymin:d,xmax:m,ymax:e};g={xmin:p,ymin:d,xmax:g<h?b:n,ymax:e};h={xmin:0,ymin:d,xmax:m,ymax:e};d={xmin:p,ymin:d,xmax:0,
ymax:e};e=[];p=[];R(f,h)&&e.push(l);R(f,d)&&p.push(l);R(g,h)&&e.push(a);R(g,d)&&p.push(a);for(m=l+1;m<a;m++)e.push(m),p.push(m);c.push({extent:f,frameIds:[l]},{extent:g,frameIds:[a]},{extent:h,frameIds:e},{extent:d,frameIds:p})}else n>b||k?c.push({extent:{xmin:n,ymin:d,xmax:m,ymax:e},frameIds:[l]},{extent:{xmin:p,ymin:d,xmax:b,ymax:e},frameIds:[a]}):c.push({extent:{xmin:n,ymin:d,xmax:b,ymax:e},frameIds:[l]});return c}function J(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-
d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}}function R(a,b){var c=b.xmin,d=b.ymin,e=b.xmax;b=b.ymax;return M(a,c,d)&&M(a,c,b)&&M(a,e,b)&&M(a,e,d)}function M(a,b,c){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?!0:!1}function W(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=H(d,b);a[0]=d+-2*e*b}else d<c&&(e=H(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=H(d,b),a.x+=-2*e*b):d<c&&(e=H(d,c),a.x+=-2*e*c);return a}Object.defineProperty(a,"__esModule",{value:!0});
var S=h.mat2df32.create(),L=k.vec2f32.create(),Z=n.create();a.ensureClosedRings=function(a){if(c.isPolygon(a)){var b=0;for(a=a.rings;b<a.length;b++){var d=a[b];3>d.length||d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]||d.push(d[0])}}};a.getBounds=function(a,b,e,f,g,h,k,l,p){if(!f)return a[0]=a[1]=a[2]=a[3]=0,b[0]=b[1]=b[2]=b[3]=0,a;var m=e.symbol;!m&&h&&(m=h.getSymbol(e,{scale:l}));if(!m)return a;if(c.isPoint(f))switch(e=f.x,f=f.y,m.type){case "simple-marker":case "picture-marker":k=F(e,
f,m,k,0);for(g=b=0;g<k.rings[0].length-1;g++)m=k.rings[0][g],m=(e-m[0])*(e-m[0])+(f-m[1])*(f-m[1]),b=Math.max(b,m);b=Math.sqrt(b);k=q.normalizeMapX(e-b,p);e=q.normalizeMapX(e+b,p);k>e&&(p=t.getInfo(p))&&(e=p.valid,p=e[1],k=e[0],e=p);a[0]=k;a[1]=f-b;a[2]=e;a[3]=f+b;break;case "text":0===b[2]&&0===b[3]&&G(b,m,g);k=D(e,f,m,b,k,0);for(g=b=0;g<k.rings[0].length-1;g++)m=k.rings[0][g],m=(e-m[0])*(e-m[0])+(f-m[1])*(f-m[1]),b=Math.max(b,m);b=Math.sqrt(b);k=q.normalizeMapX(e-b,p);e=q.normalizeMapX(e+b,p);k>
e&&(p=t.getInfo(p))&&(e=p.valid,p=e[1],k=e[0],e=p);a[0]=k;a[1]=f-b;a[2]=e;a[3]=f+b}else{d.getBoundsXY(a,f);f=b[0];if(0===f){a:switch(f=0,m.type){case "simple-fill":case "picture-fill":f=m.outline;if(!f){f=0;break a}f=f.width;break;case "simple-line":f=m.width;break;case "simple-marker":f=m.size;break;case "picture-marker":f=Math.max(m.width,m.height);break;case "text":f=[0,0,0,0],G(f,m,g),f=Math.max(f[0],f[1])}b[0]=f}f=k*f/2;a[0]-=f;a[1]-=f;a[2]+=f;a[3]+=f}return a};a.isMarkerSymbol=function(a){return"simple-marker"===
a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(a.geometry.type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};a.getXAnchorDirection=x;a.getYAnchorDirection=E;a.getJustification=B;var K=k.vec2f32.create(),ea=k.vec2f32.create(),ba=k.vec2f32.create(),ma=k.vec2f32.create(),sa=k.vec2f32.create(),qa=k.vec2f32.create(),la=k.vec2f32.create();a.isPointOnPolyline=function(a,b,c,d){g.vec2.set(ba,b,c);a=a.paths;for(var e,f,h,k,p,l,m,n,q=Infinity,t=
0;t<a.length;t++){var u=a[t];if(!(2>u.length))for(var w=1;w<u.length;w++)e=u[w-1][0],h=u[w-1][1],f=u[w][0],k=u[w][1],p=Math.min(e,f)-d,l=Math.min(h,k)-d,m=Math.max(e,f)+d,n=Math.max(h,k)+d,b<p||b>m||c<l||c>n||(g.vec2.set(K,e,h),g.vec2.set(ea,f,k),g.vec2.subtract(ma,ea,K),g.vec2.subtract(sa,K,ba),g.vec2.scale(qa,ma,g.vec2.dot(ma,sa)/g.vec2.dot(ma,ma)),g.vec2.subtract(la,sa,qa),e=g.vec2.dot(la,la),q>e&&(q=e))}return Math.sqrt(q)<=d};a.getMarkerSymbolBounds=F;a.getTextSymbolBounds=D;a.normalizeCentralMeridian=
function(a){var e,f,g,h,k,l=null;if(!a)return null;e=a.spatialReference;f=p.getInfo(e);k=e.isWebMercator?102100:4326;g=ja[k].maxX;h=ja[k].minX;e=ja[k].plus180Line;k=ja[k].minus180Line;var m,n=a.toJSON();if(!f)return n;"mesh"===a.type?m=n:c.isPoint(n)?m=W(n,g,h):c.isMultipoint(n)?(n.points=n.points.map(function(a){return W(a,g,h)}),m=n):c.isExtent(n)?m=O(n,f):c.isPolygon(n)||c.isPolyline(n)?(d.getBoundsXY(Z,n),a={xmin:Z[0],ymin:Z[1],xmax:Z[2],ymax:Z[3]},f=2*H(a.xmin,h)*g,n=0===f?n:P(n,f),a.xmin+=f,
a.xmax+=f,b.extentIntersectsPolyline(a,e)&&a.xmax!==g?l=n:b.extentIntersectsPolyline(a,k)&&a.xmin!==h?l=n:m=n):m=a.clone();return null!==l?(new z.CutVertical).cut(l,g):m};var ya=24;a.getTextSymbolSize=G;a.getTextSymbolEstimatedSize=function(a,b,c){var d=y.bidiText(b.text),e=d[0],d=d[1],f=B(b.horizontalAlignment||"center"),g=x(b.horizontalAlignment||"center");c=(new C([],u.TEXT_MAX_WIDTH,u.TEXT_LINE_HEIGHT,u.TEXT_SPACING,[0,.5*-u.TEXT_LINE_HEIGHT],.5*(1-g),0,f)).getEstimatedShaping(e,d,c);c=C.getBox(c);
b=l.pt2px(b.font.size)/ya;a[0]=b*c.x;a[1]=b*c.y;a[2]=b*c.width;a[3]=b*c.height;return a};var ja={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:{paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:e.WebMercator},minus180Line:{paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:e.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,
-180],[180,180]]],spatialReference:e.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:e.WGS84}}}})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ../../materialKey/MaterialKey ./WGLMeshTemplate".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){Object.defineProperty(a,"__esModule",{value:!0});var u=f.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),w=n.allocTriangles(20),A=n.allocTriangles(20),C=[n.allocExtrudeVectors(),n.allocExtrudeVectors()],z=n.allocExtrudeVectors(),y=k.TILE_SIZE+8,x=new n.Tessellator({distanceAlongCorrection:!0}),E=new b.TileClipper(0,0,0,1,8);E.setExtent(k.TILE_SIZE);m=function(a){function b(b,c,d,f,g,h,k,l,m,n,q,t){var u=a.call(this)||this;u.width=d;u.capType=f;u.joinType=
g;u.fillColor=h;u.tl=k;u.br=l;u.hasPattern=m;u.isDashed=n;u.isColorLocked=q;u.isOutline=t;u.geometryType=e.WGLGeometryType.LINE;b=p.LineMaterialKey.load(p.createMaterialKey(u.geometryType,b,t));c&&(b.sdf=c.sdf,b.pattern=!0,b.textureBinding=c.textureBinding);u._materialKey=b.data;u._bitset=q?1:0;return u}l(b,a);b.fromCIMLine=function(a,c,f,k){var p=c.color,l=c.isDashed,m=c.cap;l&&m===e.CapType.ROUND&&(m=e.CapType.SQUARE);var n=c.join,q=h.pt2px(c.width),p=p&&g.premultiplyAlphaRGBA(p)||0;if(!f)return new b(a,
f,q,m,n,p,0,0,!1,l,c.colorLocked,k);var t=f.rect,u=t.x+1+f.width,w=t.y+1+f.height,t=d.i1616to32(t.x+1,t.y+1),u=d.i1616to32(u,w);return new b(a,f,q,m,n,p,t,u,!0,l,c.colorLocked,k)};b.fromSimpleLine=function(a,e,f,k){var p=f.color,l="solid"!==f.style&&"none"!==f.style,m=c.getCapType(f.cap||"round",l),n=c.getJoinType(f.join||"round"),p=p&&"none"!==f.style&&g.premultiplyAlphaRGBA(p)||0;"none"===f.style&&(p=0);if(!k)return new b(a,k,h.pt2px(f.width),m,n,p,0,0,!1,l,!1,e);var q=k.rect,t=q.x+1+k.width,u=
q.y+1+k.height,q=d.i1616to32(q.x+1,q.y+1),t=d.i1616to32(t,u);return new b(a,k,h.pt2px(f.width),m,n,p,q,t,!0,l,!1,e)};b.fromPictureLineSymbol=function(a,b,c,d){u.error("PictureLineSymbol support does not exist!");return null};b.prototype.writeMesh=function(a,b,c,d,e,f,g,h){this.halfWidth=0<this.width?.5*(this.width+1/f):0;f=b.indexVector;var k=b.get("geometry"),l=b.get("visibility"),m=this.halfWidth,n=new q(d,this.geometryType,this._materialKey),t=p.LineMaterialKey.load(this._materialKey);b=b.getVector("geometry").vertexCount;
n.vertexFrom=b;n.indexFrom=f.length;switch(c){case "esriGeometryPolyline":c=this._clipLines(e.geometry.paths);if(0===c.length)break;this._write(n,f,k,l,b,d,m,c,t,g,h);a.push(n);break;case "esriGeometryPolygon":c=this._clipLines(e.geometry.rings);if(0===c.length)break;this._write(n,f,k,l,b,d,m,c,t,g,h);a.push(n);break;default:u.error("Unable to handle geometryType: "+c)}};b.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var e=[],f=a[d];E.reset(2);var g=f[0],h=g[0],g=g[1];if(c)E.moveTo(h,
g);else{if(-8>h||h>y||-8>g||g>y){c=!0;continue}e.push({x:h,y:g})}for(var k=!1,p=f.length,l=1;l<p;++l)if(h+=f[l][0],g+=f[l][1],c)E.lineTo(h,g);else{if(-8>h||h>y||-8>g||g>y){k=!0;break}e.push({x:h,y:g})}if(k)c=!0;else{if(c){if(e=E.resultWithStarts())for(c=0;c<e.length;c++)b.push(e[c])}else b.push({line:e,start:0});d++;c=!1}}return b};b.prototype._write=function(a,b,c,d,e,f,g,h,k,p,l){for(var m=0,q=0;q<h.length;q++){var t=h[q],u=t.line;if(!(2>u.length))for(var y=u[0],D=u[u.length-1],B=D.x-y.x,y=D.y-
y.y,B=1E-6>B*B+y*y,E=t.start%65535,t=C[1],y=0;y<u.length;y++){var G=u[y],D=t===C[y%2]?C[(y+1)%2]:C[y%2],A=0===y,H=y===u.length-1;H&&B&&!this.hasPattern?n.copyExtrudeVectors(D,z):(this._computeExtrudeVectors(D,y,u,B),m+=this._writeVertices(c,d,f,g,G.x,G.y,D,E,m,k,p,l),null==D.capCenter||B&&H||this._writePieIndices(a,b,e,D),B&&A&&!this.hasPattern&&n.copyExtrudeVectors(z,D));A||this._writeBridgeIndices(a,b,e,t,D);if(!H){var H=u[y+1],A=[H.x-G.x,H.y-G.y],F=n.length(A),A=[A[0]/F,A[1]/F],F=E+F;if(65535<
F){var O=(65535-E)/(F-E),E=G.x+(H.x-G.x)*O,G=G.y+(H.y-G.y)*O,H=t;x.buttCap(H,A,A);m+=this._writeVertices(c,d,f,g,E,G,H,65535,m,k,p,l);x.bridge(w,D,H);this._writeBridgeIndices(a,b,e,D,H);x.buttCap(H,A,A);E=F-65535}else E=F,t=D}}}a.vertexCount=m};b.prototype._writeVertices=function(a,b,c,e,f,g,h,k,p,l,m,n){var q=0,t=d.i1616to32(f,g),u=h.vectors;h=u.items;for(u=u.count;q<u;++q){var w=h[q].vector,z=w[0],w=w[1],x=h[q].texCoords,y=x[0],D=x[1],B=h[q].direction,x=B[0],E=B[1],B=d.i1616to32(k,31*e),z=d.i8888to32(Math.round(31*
z),Math.round(31*w),Math.round(31*y),Math.round(31*D)),w=d.i8888to32(Math.round(31*x),Math.round(31*E),0,this._bitset);a.push(t);a.push(c);a.push(this.fillColor);a.push(z);a.push(B);a.push(this.tl);a.push(this.br);a.push(w);this._writeVV(a,m,l);b.push(n);h[q].base={index:p+q,point:[f,g]}}return q};b.prototype._writeVV=function(a,b,c){c.hasVV()&&(a.push(b[e.VVType.SIZE]),a.push(b[e.VVType.COLOR]),a.push(b[e.VVType.OPACITY]))};b.prototype._writeBridgeIndices=function(a,b,c,d,e){x.bridge(w,d,e);for(d=
0;d<w.count;++d)e=w.items[d],b.push(c+e.v1.base.index),b.push(c+e.v2.base.index),b.push(c+e.v3.base.index),a.indexCount+=3};b.prototype._writePieIndices=function(a,b,c,d){x.pie(A,d);for(d=0;d<A.count;++d){var e=A.items[d];b.push(c+e.v1.base.index);b.push(c+e.v2.base.index);b.push(c+e.v3.base.index);a.indexCount+=3}};b.prototype._computeExtrudeVectors=function(a,b,c,d){var e=c[b],f=[void 0,void 0],g=[void 0,void 0];if(0<b&&b<c.length-1){var h=c[(b+c.length-1)%c.length],k=c[(b+1)%c.length];n.normalize(f,
[e.x-h.x,e.y-h.y]);n.normalize(g,[k.x-e.x,k.y-e.y])}else if(0===b)k=c[(b+1)%c.length],n.normalize(g,[k.x-e.x,k.y-e.y]),d?(h=c[c.length-2],n.normalize(f,[e.x-h.x,e.y-h.y])):f=g;else if(b===c.length-1)h=c[(b+c.length-1)%c.length],n.normalize(f,[e.x-h.x,e.y-h.y]),d?(h=c[1],n.normalize(g,[h.x-e.x,h.y-e.y])):g=f;else{console.error("Vertex index 'i' out of range.");return}d||0!==b?d||b!==c.length-1?this._computeJoinExtrudeVectors(a,f,g):this._computeCapExtrudeVectors(a,f,g,n.CapPosition.END):this._computeCapExtrudeVectors(a,
f,g,n.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,c,d){switch(this.capType){case e.CapType.BUTT:x.buttCap(a,b,c);break;case e.CapType.ROUND:var f=n.getNumberOfSlices(Math.PI);x.roundCap(a,b,c,d,f,d===n.CapPosition.START?-1:1);break;case e.CapType.SQUARE:this.isDashed?x.squareCapForDashedLines(a,b,c,d):x.squareCap(a,b,c,d);break;default:u.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),x.buttCap(a,b,c)}};b.prototype._computeJoinExtrudeVectors=
function(a,b,c){var d=n.getRads(b,c);if(d>Math.PI-.05)x.rectJoin(a,b,c);else if(this.joinType===e.JoinType.MITER||.1>d).05>d?x.fastMiterJoin(a,b,c):d<n.MITER_SAFE_RADS?x.miterJoin(a,b,c):x.bevelJoin(a,b,c,n.SYSTEM_MAG_LIMIT);else if(this.joinType===e.JoinType.BEVEL)x.bevelJoin(a,b,c,1);else if(this.joinType===e.JoinType.ROUND){var f=n.getNumberOfSlices(d);2.3>d?2>f||.5>d?x.bevelJoin(a,b,c,1):x.roundJoin(a,b,c,f):x.unitRoundJoin(a,b,c,f)}};return b}(t.default);a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../color ../../definitions ../../enums ../../enums ../../number ../../WGLDisplayRecord ../../materialKey/MaterialKey ./WGLMeshTemplate".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A){Object.defineProperty(a,"__esModule",{value:!0});var C=h.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");m=function(a){function h(b,c,g,h,l,m,u,z,y,A,J,R,M){var x=a.call(this)||this;x.geometryType=q.WGLGeometryType.MARKER;if(200<m||200<u)C.error(new f("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels")),m>u?(u*=200/m,m=200):(m*=200/u,u=200);var D=d.vec2f32.create(),B=e.mat2df32.create();m=0===
m?0:Math.max(m,2);u=0===u?0:Math.max(u,2);A=(R===p.Alignment.MAP?1:0)|(A?1:0)<<1|(J?1:0)<<2;J=M.sdf?.5:1;k.mat2d.translate(B,B,d.vec2f32.fromValues(J*c,J*-g));h&&k.mat2d.rotate(B,B,3.14159265359/180*h);b=w.MarkerMaterialKey.load(w.createMaterialKey(x.geometryType,b,!1));M&&(b.sdf=M.sdf,b.pattern=!0,b.textureBinding=M.textureBinding);x._materialKey=b.data;x._fillColor=l;x._outlineColor=z;x._sizeOutlineWidth=t.i8888to32(m,u,y,A);l=Math.round(M.rect.x/4)-128;z=Math.round(M.rect.y/4)-128;y=l+Math.round(M.rect.width/
4);M=z+Math.round(M.rect.height/4);n.vec2.set(D,-.5*m,-.5*u);n.vec2.transformMat2d(D,D,B);x._offsetAndTexUpperLeft=t.i8888to32(t.i8(D[0]),t.i8(D[1]),l,z);n.vec2.set(D,.5*m,-.5*u);n.vec2.transformMat2d(D,D,B);x._offsetAndTexUpperRight=t.i8888to32(t.i8(D[0]),t.i8(D[1]),y,z);n.vec2.set(D,-.5*m,.5*u);n.vec2.transformMat2d(D,D,B);x._offsetAndTexBottomLeft=t.i8888to32(t.i8(D[0]),t.i8(D[1]),l,M);n.vec2.set(D,.5*m,.5*u);n.vec2.transformMat2d(D,D,B);x._offsetAndTexBottomRight=t.i8888to32(t.i8(D[0]),t.i8(D[1]),
y,M);x.height=u;x.width=m;x.xOffset=c;x.yOffset=g;return x}l(h,a);h.fromCIMMarker=function(a,c,d){var e=b.premultiplyAlphaRGBA(c.color),f=b.premultiplyAlphaRGBA(c.outlineColor),k=Math.round(g.pt2px(c.size)),l=Math.round(g.pt2px(c.size/d.height*d.width)),m=Math.round(g.pt2px(c.offsetX||0)),n=Math.round(g.pt2px(c.offsetY||0)),q=Math.round(g.pt2px(c.outlineWidth||0));return new h(a,m,n,c.rotation||0,e,l,k,f,q,c.colorLocked,!1,c.alignment||p.Alignment.SCREEN,d)};h.fromPictureMarker=function(a,b,d){var e=
Math.round(g.pt2px(b.width)),f=Math.round(g.pt2px(b.height)),k=c.PICTURE_FILL_COLOR,l=Math.round(g.pt2px(b.xoffset||0)),m=Math.round(g.pt2px(b.yoffset||0));return new h(a,l,m,b.angle,k,e,f,0,0,!1,!1,p.Alignment.SCREEN,d)};h.fromSimpleMarker=function(a,c,d){var e=b.premultiplyAlphaRGBA(c.color),f=Math.round(g.pt2px(c.size)),k=Math.round(g.pt2px(c.xoffset||0)),l=Math.round(g.pt2px(c.yoffset||0)),m=c.style,n=c.outline,q=(n&&n.color&&b.premultiplyAlphaRGBA(n.color))|0,n=(n&&n.width&&Math.round(g.pt2px(n.width)))|
0;return new h(a,k,l,c.angle,e,f,f,q,n,!1,"cross"===m||"x"===m,p.Alignment.SCREEN,d)};h.prototype.writeMesh=function(a,b,c,d,e,f,g,h){f=w.MarkerMaterialKey.load(this._materialKey);var k=b.indexVector,l=b.get("geometry"),p=b.get("visibility"),m=new u(d,this.geometryType,this._materialKey);b=b.getVector("geometry").vertexCount;a.push(m);m.vertexFrom=b;m.indexFrom=k.length;switch(c){case "esriGeometryPoint":c=e.geometry;a=c.x;c=c.y;this._writeVertices(m,l,p,d,this._getPos(a,c),f,g,h);this._writeIndices(m,
k,b);break;case "esriGeometryPolyline":this._writeMany(m,k,l,p,b,d,e.geometry.paths[0],f,g,h);break;case "esriGeometryPolygon":(c=e.centroid)?(a=c.x,c=c.y,this._writeVertices(m,l,p,d,this._getPos(a,c),f,g,h),this._writeIndices(m,k,b)):C.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(m,k,l,p,b,d,e.geometry.points,f,g,h);break;default:C.error("Unable to handle geometryType: "+c)}};h.prototype._getPos=function(a,b){return t.i1616to32(a,
b)};h.prototype._writeMany=function(a,b,c,d,e,f,g,h,k,l){for(var p=0,m=0,n=0,q=0;q<g.length;q++){var t=g[q],u=t[0],t=t[1],w=this._getPos(u+p,t+m);this._writeVertices(a,c,d,f,w,h,k,l);this._writeIndices(a,b,e+n);p+=u;m+=t;n+=4}};h.prototype._writeVertices=function(a,b,c,d,e,f,g,h){b.push(e);b.push(this._offsetAndTexUpperLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexUpperRight);b.push(d);
b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexBottomLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexBottomRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);a.vertexCount+=4};h.prototype._writeVV=function(a,
b,c){c.hasVV()&&(a.push(b[q.VVType.SIZE]),a.push(b[q.VVType.COLOR]),a.push(b[q.VVType.OPACITY]),a.push(b[q.VVType.ROTATION]))};h.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return h}(A.default);a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("require exports ../../../../../../core/tsSupport/awaiterHelper ../../../../../../core/tsSupport/generatorHelper ../../../../../../symbols ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../cim/cimAnalyzer ./WGLDynamicMarkerTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/BidiText ../../util/Lock ../../util/Result".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w){function A(a,b){var c=a.length;a.push(null);b.then(function(b){return a[c]=b});return a}function C(a){return!!(a&1)}Object.defineProperty(a,"__esModule",{value:!0});var z=k.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),y=[],x=new h.SimpleFillSymbol({color:"black",outline:null}),E=new h.SimpleMarkerSymbol({size:"14px",color:"black",outline:null}),B=new h.SimpleLineSymbol({color:"black",width:"2px"});a.isDynamicId=C;m=function(){function a(a){this._templateIdCounter=
this._idCounter=0;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._lock=new u.default;this._fetchResource=a}Object.defineProperty(a.prototype,"_markerError",{get:function(){return this._errorTemplates.marker[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_fillError",{get:function(){return this._errorTemplates.fill[0]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_lineError",{get:function(){return this._errorTemplates.line[0]},
enumerable:!0,configurable:!0});a.prototype.createTemplateGroup=function(a,b,c,d){this._initErrorTemplates();var e=this._hashSymbol(a);if(!this._symbolToTemplate.has(e)){var f=[];b&&this._createMeshTemplates(f,b,c,d,!0);this._createMeshTemplates(f,a,c,d,!1);a=this._createGroupId("cim"===a.type);this._idToTemplateGroup.set(a,f);this._symbolToTemplate.set(e,a)}return this._symbolToTemplate.get(e)};a.prototype.getMosaicItem=function(a){var b=this,c=this._createTemplateId(),d;if("text"===a.type){var f=
t.bidiText(a.text)[0];d=[];for(var g=0;g<f.length;g++)d.push(f.charCodeAt(g))}f=e.create(function(a){return b._idToResolver.set(c,a)});this._fetchQueue.push({symbol:a,id:c,glyphIds:d});return f};a.prototype.getTemplateGroup=function(a){return this._idToTemplateGroup.has(a)?this._idToTemplateGroup.get(a):y};a.prototype.getDynamicTemplateGroup=function(a){if(!this._idToTemplateGroup.has(a))return y;C(a)||z.error("mapview-template-store","Id "+a+" does not refer to a dynamic template");return this._idToTemplateGroup.get(a)};
a.prototype.finalize=function(){return this._fetchQueue.length||this._lock.isHeld()?u.withLock(this._lock,this._fetchAllQueuedResources.bind(this)):e.resolve()};a.prototype._initErrorTemplates=function(){if(!this._errorTemplates){var a=this._createMeshTemplates([],x,null,null,!1),b=this._createMeshTemplates([],E,null,null,!1),c=this._createMeshTemplates([],B,null,null,!1);this._errorTemplates={fill:a,marker:b,line:c}}};a.prototype._fetchAllQueuedResources=function(){var a=this;if(!this._fetchQueue.length)return e.resolve();
var b=this._fetchQueue;this._fetchQueue=[];return this._fetchResource(b).then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.id,d=d.mosaicItem;a._idToResolver.get(e)(d);a._idToResolver.delete(e)}}).catch(function(c){"cancel"===c.dojoType?a._fetchQueue=a._fetchQueue.concat(b):z.error(new g("mapview-template-store","Unable to fetch requested texture resources",c))})};a.prototype._createGroupId=function(a){return this._idCounter++<<1|(a?1:0)};a.prototype._createTemplateId=function(){return this._templateIdCounter++};
a.prototype._getCodepoints=function(a){a=t.bidiText(a.text)[0];for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b};a.prototype._getMosaicItem=function(a){var b=this,c=this._createTemplateId(),d="text"===a.type&&this._getCodepoints(a),f=e.create(function(a){return b._idToResolver.set(c,a)});this._fetchQueue.push({symbol:a.toJSON(),id:c,glyphIds:d});return f};a.prototype._hashSymbol=function(a){return a.id?a.id:JSON.stringify(a)};a.prototype._createSMS=function(a,b){return l(this,void 0,
void 0,function(){var c;return f(this,function(d){switch(d.label){case 0:return[4,this._getMosaicItem(a)];case 1:return c=d.sent().spriteMosaicItem,w.ok(c,z)?[2,q.default.fromSimpleMarker(b,a,c)]:[2,this._markerError]}})})};a.prototype._createPMS=function(a,b){return l(this,void 0,void 0,function(){var c;return f(this,function(d){switch(d.label){case 0:return[4,this._getMosaicItem(a)];case 1:return c=d.sent().spriteMosaicItem,w.ok(c,z)?[2,q.default.fromPictureMarker(b,a,c)]:[2,this._markerError]}})})};
a.prototype._createSFS=function(a,c,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return e=f.sent().spriteMosaicItem,g=a,w.ok(e,z)?[2,b.default.fromSimpleFill(c,g,e,d)]:[2,this._fillError]}})})};a.prototype._createPFS=function(a,c,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return e=f.sent().spriteMosaicItem,g=a,
w.ok(e,z)?[2,b.default.fromPictureFill(c,g,e,d)]:[2,this._fillError]}})})};a.prototype._createSLS=function(a,b,d){return l(this,void 0,void 0,function(){var e,g;return f(this,function(f){switch(f.label){case 0:return[4,this._getMosaicItem(a)];case 1:return e=f.sent().spriteMosaicItem,g=a,w.ok(e,z)?[2,c.default.fromSimpleLine(b,d,g,e)]:[2,this._lineError]}})})};a.prototype._createTS=function(a,b){return l(this,void 0,void 0,function(){var c;return f(this,function(d){switch(d.label){case 0:return[4,
this._getMosaicItem(a)];case 1:return c=d.sent().glyphMosaicItems,[2,p.default.fromText(b,a,c)]}})})};a.prototype._createCIMText=function(a,b){return l(this,void 0,void 0,function(){return f(this,function(a){return[2,e.resolve(null)]})})};a.prototype._createCIMFill=function(a,c){return l(this,void 0,void 0,function(){var d;return f(this,function(e){switch(e.label){case 0:return[4,this.getMosaicItem(a.cim)];case 1:return d=e.sent().spriteMosaicItem,w.ok(d,z)?[2,b.default.fromCIMFill(c,a,d,!1)]:[2,
this._fillError]}})})};a.prototype._createCIMLine=function(a,b){return l(this,void 0,void 0,function(){var d;return f(this,function(e){switch(e.label){case 0:return[4,this.getMosaicItem(a.cim)];case 1:return d=e.sent().spriteMosaicItem,w.ok(d,z)?[2,c.default.fromCIMLine(b,a,d,!1)]:[2,this._lineError]}})})};a.prototype._createCIMMarker=function(a,b){return l(this,void 0,void 0,function(){var c;return f(this,function(f){switch(f.label){case 0:return a.materialHash?[2,e.resolve(d.default.fromCIMMarker(b,
a))]:[4,this.getMosaicItem(a.cim)];case 1:return c=f.sent().spriteMosaicItem,w.ok(c,z)?[2,q.default.fromCIMMarker(b,a,c)]:[2,this._markerError]}})})};a.prototype._createCIM=function(a,b){switch(a.type){case "marker":return this._createCIMMarker(a,b);case "line":return this._createCIMLine(a,b);case "fill":return this._createCIMFill(a,b);case "text":return this._createCIMText(a,b)}};a.prototype._createCIMMeshTemplates=function(a,b,c,d){var e=0;for(b=n.analyzeCIMSymbol(b,d);e<b.length;e++)A(a,this._createCIM(b[e],
c))};a.prototype._createMeshTemplates=function(a,b,c,d,e){if(-1!==b.type.indexOf("3d"))return z.error("3D symbols are not supported with MapView"),a;switch(b.type){case "cim":return this._createCIMMeshTemplates(a,b,c,d),a;case "simple-marker":return A(a,this._createSMS(b,c));case "picture-marker":return A(a,this._createPMS(b,c));case "simple-fill":return A(a,this._createSFS(b,c,e)),b.outline&&A(a,this._createSLS(b.outline,c,!0)),a;case "picture-fill":return A(a,this._createPFS(b,c,e)),b.outline&&
A(a,this._createSLS(b.outline,c,!0)),a;case "simple-line":return A(a,this._createSLS(b,c,!1));case "text":return A(a,this._createTS(b,c));default:return z.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),a}};return a}();a.default=m})},"esri/views/2d/engine/cim/cimAnalyzer":function(){define("require exports ../webgl/CIMSymbolHelper ../webgl/enums ../webgl/SDFHelper ../webgl/Utils".split(" "),function(m,a,l,f,h,g){function k(a){return a?{r:a[0],g:a[1],b:a[2],a:a[3]/
255}:{r:0,g:0,b:0,a:0}}function e(a){switch(a){case "Butt":return f.CapType.BUTT;case "Square":return f.CapType.SQUARE;default:return f.CapType.ROUND}}function n(a){switch(a){case "Bevel":return f.JoinType.BEVEL;case "Miter":return f.JoinType.MITER;default:return f.JoinType.ROUND}}function d(a,d,e,f,g,m){var c=a.markerGraphics;if(c){var p=0;if(a.scaleSymbolsProportionally){var n=a.frame;n&&(p=n.ymax-n.ymin)}for(n=0;n<c.length;n++)if(c[n]){var q=h.getSDFSymbol(a),t=q&&"CIMLineSymbol"===q.type?.5:1;
m.push({type:"marker",materialHash:e?function(a){return"0"}:null,cim:a,colorLocked:a.colorLocked,alignment:g,anchorPoint:a.anchorPoint,size:b(a.primitiveName,"Size",e,d)||a.size,scaleX:1,rotation:b(a.primitiveName,"Rotation",e,d)||a.rotation,offsetX:b(a.primitiveName,"OffsetX",e,d)||a.offsetX,offsetY:b(a.primitiveName,"OffsetY",e,d)||a.offsetY,color:k(l.CIMSymbolHelper.getFillColor(q)),outlineColor:k(l.CIMSymbolHelper.getStrokeColor(q)),outlineWidth:l.CIMSymbolHelper.getStrokeWidth(q)*t,frameHeight:p,
rotateClockwise:a.rotateClockwise,sizeRatio:f?a.size/f:1})}}}function b(a,b,d,e){if(!a)return null;for(var c=0;c<d.length;c++){var f=d[c];if(f.primitiveName===a&&f.propertyName===b&&(f=f.valueExpressionInfo))return g.createArcadeFunction(f.expression,e)}return null}Object.defineProperty(a,"__esModule",{value:!0});a.analyzeCIMSymbol=function(a,g){var c=[],h=a.data.symbol;a=a.data.primitiveOverrides;switch(h.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(h){var m=h.symbolLayers;
if(m){var q,A=l.CIMSymbolHelper.getSize(h);"CIMPointSymbol"===h.type&&"Map"===h.angleAlignment&&(q=f.Alignment.MAP);for(var C=m.length;C--;){var z=m[C];if(z&&!1!==z.enable)switch(z.type){case "CIMSolidFill":c.push({type:"fill",materialHash:null,cim:z,colorLocked:z.colorLocked,color:b(z.primitiveName,"Color",a,g)||k(z.color),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1});break;case "CIMPictureFill":c.push({type:"fill",materialHash:null,cim:z,colorLocked:z.colorLocked,color:b(z.primitiveName,"TintColor",
a,g)||k(z.tintColor),height:b(z.primitiveName,"Height",a,g)||z.height,scaleX:b(z.primitiveName,"ScaleX",a,g)||z.scaleX,angle:b(z.primitiveName,"Rotation",a,g)||z.rotation,offsetX:b(z.primitiveName,"OffsetX",a,g)||z.offsetY,offsetY:b(z.primitiveName,"OffsetY",a,g)||z.offsetY});break;case "CIMSolidStroke":var y=void 0!==z.width?z.width:4;c.push({type:"line",materialHash:null,cim:z,isOutline:"CIMPolygonSymbol"===h.type,colorLocked:z.colorLocked,color:b(z.primitiveName,"Color",a,g)||k(z.color),width:b(z.primitiveName,
"Width",a,g)||y,cap:b(z.primitiveName,"CapStyle",a,g)||e(z.capStyle),join:b(z.primitiveName,"JoinStyle",a,g)||n(z.joinStyle),miterLimit:b(z.primitiveName,"MiterLimit",a,g)||z.miterLimit,sizeRatio:A?y/A:1,isDashed:!1});break;case "CIMPictureStroke":y=void 0!==z.width?z.width:4;c.push({type:"line",materialHash:null,cim:z,isOutline:"CIMPolygonSymbol"===h.type,colorLocked:z.colorLocked,color:b(z.primitiveName,"TintColor",a,g)||k(z.tintColor),width:b(z.primitiveName,"Width",a,g)||y,cap:b(z.primitiveName,
"CapStyle",a,g)||e(z.capStyle),join:b(z.primitiveName,"JoinStyle",a,g)||n(z.joinStyle),miterLimit:b(z.primitiveName,"MiterLimit",a,g)||z.miterLimit,sizeRatio:A?y/A:1,isDashed:!1});break;case "CIMGradientStroke":y=void 0!==z.width?z.width:4;c.push({type:"line",materialHash:null,cim:z,isOutline:"CIMPolygonSymbol"===h.type,colorLocked:z.colorLocked,color:{r:0,g:0,b:0,a:1},width:b(z.primitiveName,"Width",a,g)||y,cap:b(z.primitiveName,"CapStyle",a,g)||e(z.capStyle),join:b(z.primitiveName,"JoinStyle",a,
g)||n(z.joinStyle),miterLimit:b(z.primitiveName,"MiterLimit",a,g)||z.miterLimit,sizeRatio:A?y/A:1,isDashed:!1});break;case "CIMPictureMarker":c.push({type:"marker",materialHash:null,cim:z,colorLocked:z.colorLocked,alignment:q,anchorPoint:z.anchorPoint,size:b(z.primitiveName,"Size",a,g)||z.size,scaleX:b(z.primitiveName,"ScaleX",a,g)||z.scaleX,rotation:b(z.primitiveName,"Rotation",a,g)||z.rotation,offsetX:b(z.primitiveName,"OffsetX",a,g)||z.offsetX,offsetY:b(z.primitiveName,"OffsetY",a,g)||z.offsetY,
color:b(z.primitiveName,"TintColor",a,g)||k(z.tintColor),outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:z.rotateClockwise,sizeRatio:A?z.size/A:1});break;case "CIMVectorMarker":d(z,g,a,A,q,c)}}}}}return c};a.analyzeCIMResource=function(a,b){return b}})},"esri/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../Color ../../../../core/Logger ../../../../geometry/support/jsonUtils ../cim/CIMCursor ../cim/CIMEffects ../cim/CIMOperators ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b){Object.defineProperty(a,"__esModule",{value:!0});var c=f.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");m=function(){function a(){}a.getEnvelope=function(a){if("CIMPointSymbol"!==a.type)return null;var b=new n.EnvDrawHelper;b.drawSymbol(a,{type:"point",x:0,y:0});return b.envelope()};a.rasterize=function(a,b){var c=this.getEnvelope(b);if(!c||0>=c.width||0>=c.height)return[null,0,0,0,0];var d=96/72,e=(c.x+.5*c.width)*d,f=-(c.y+.5*c.height)*d;a.width=c.width*
d+2;a.height=c.height*d+2;c=a.getContext("2d");d=n.Transformation.createScale(d,-d);d.translate(.5*a.width-e,.5*a.height-f);(new n.CanvasDrawHelper(c,d)).drawSymbol(b,{type:"point",x:0,y:0});b=c.getImageData(0,0,a.width,a.height);b=new Uint8Array(b.data);for(c=0;c<b.length;c+=4)d=b[c+3]/255,b[c]*=d,b[c+1]*=d,b[c+2]*=d;return[b,a.width,a.height,e/a.width,f/a.height]};a.fromSimpleMarker=function(a){var c,d,e=a.style;if("circle"===e||"esriSMSCircle"===e){c=Math.acos(.995);d=Math.ceil(b.C_PI/c/4);0===
d&&(d=1);c=b.C_PI_BY_2/d;d*=4;e=[];e.push([50,0]);for(var f=1;f<d;f++)e.push([50*Math.cos(f*c),-50*Math.sin(f*c)]);e.push([50,0]);c={rings:[e]};d={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===e||"esriSMSCross"===e)c=0,c={rings:[[[c,50],[c,c],[50,c],[50,-c],[c,-c],[c,-50],[-c,-50],[-c,-c],[-50,-c],[-50,c],[-c,c],[-c,50],[c,50]]]},d={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===e||"esriSMSDiamond"===e)c={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},d={xmin:-50,ymin:-50,xmax:50,
ymax:50};else if("square"===e||"esriSMSSquare"===e)c={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},d={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===e||"esriSMSX"===e)c=0,c={rings:[[[0,c],[50-c,50],[50,50-c],[c,0],[50,c-50],[50-c,-50],[0,-c],[c-50,-50],[-50,c-50],[-c,0],[-50,50-c],[c-50,50],[0,c]]]},d={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===e||"esriSMSTriangle"===e)d=2/3*100,e=d-100,c={rings:[[[-57.735026918962575,e],[0,d],[57.735026918962575,e],[-57.735026918962575,
e]]]},d={xmin:-57.735026918962575,ymin:e,xmax:57.735026918962575,ymax:d};var g;c&&d&&(g=[{type:"CIMSolidFill",enable:!0,color:a.color}],a.outline&&g.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color}),g={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:d,markerGraphics:[{type:"CIMMarkerGraphic",geometry:c,symbol:{type:"CIMPolygonSymbol",symbolLayers:g}}]}]});return g};a.getFillColor=
function(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers){var c=0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getFillColor(b[c]);if(null!=d)return d}}break;case "CIMSolidFill":return b.color}};a.getStrokeColor=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers){var c=0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getStrokeColor(b[c]);if(void 0!==d)return d}}break;case "CIMSolidStroke":return b.color}};a.getStrokeWidth=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers){var c=
0;for(b=b.symbolLayers;c<b.length;c++){var d=a.getStrokeWidth(b[c]);if(void 0!==d)return d}}break;case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}};a.getSize=function(b){if(b)switch(b.type){case "CIMPointSymbol":var c=0;if(b.symbolLayers){var d=0;for(b=b.symbolLayers;d<b.length;d++){var e=a.getSize(b[d]);e>c&&(c=e)}}return c;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return b.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return b.size}};
a.getMarkerScaleRatio=function(a){if(a)switch(a.type){case "CIMVectorMarker":if(!1!==a.scaleSymbolsProportionally&&a.frame)return a.size/(a.frame.ymax-a.frame.ymin)}return 1};a.executeEffects=function(a,b,c){void 0===c&&(c=!1);var d=96/72,f=a?a.length:0;f&&c&&--f;for(c=0;c<f;++c){var g=a[c];if(g){var h=e.getEffectOperator(g);h&&(b=h.execute(b,g,d))}}return b};a.processEffects=function(b,c,d){var e;b.effects&&0<b.effects.length&&(e=g.deltaEncodeGeometry(d),e=new k.SimpleGeometryCursor(e),e=a.executeEffects(b.effects,
e));b=b.symbolLayers[c];b.effects&&0<b.effects.length&&(c=!1,"CIMGeometricEffectDashes"===b.effects[b.effects.length-1].type&&(c=!0),e||(e=g.deltaEncodeGeometry(d),e=new k.SimpleGeometryCursor(e)),e=a.executeEffects(b.effects,e,c));if(!e)return d;d=[];for(b=e.next();b;)d.push(b),b=e.next();e=d.length;switch(e){case 0:return null;case 1:return g.deltaEncodeGeometry(d[0]);default:b=d[0];for(c=1;c<e;++c){var f=d[c];h.isPolygon(b)&&h.isPolygon(f)&&Array.prototype.push.apply(b.rings,f.rings);h.isPolyline(b)&&
h.isPolyline(f)&&Array.prototype.push.apply(b.paths,f.paths)}return g.deltaEncodeGeometry(b)}};return a}();a.CIMSymbolHelper=m;m=function(){function a(){}a.rasterizeSimpleFill=function(a,b){"solid"!==b&&"none"!==b&&"esriSFSSolid"!==b&&"esriSFSNull"!==b||console.error("Unexpected: style does not require rasterization");a.width=8;a.height=8;var c=a.getContext("2d");c.strokeStyle="#FFFFFF";c.lineWidth=1;c.beginPath();if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)c.moveTo(0,
0),c.lineTo(0,8);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===b)c.moveTo(0,0),c.lineTo(8,0);if("forward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||"esriSFSForwardDiagonal"===b)c.moveTo(0,0),c.lineTo(8,8);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSBackwardDiagonal"===b||"esriSFSDiagonalCross"===b)c.moveTo(8,0),c.lineTo(0,8);c.stroke();b=c.getImageData(0,0,a.width,a.height);b=new Uint8Array(b.data);for(var d=0;d<b.length;d+=4)c=b[d+
3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;return[b,a.width,a.height]};a.rasterizeSimpleLine=function(a,b,d){switch(d){case "butt":d="Butt";break;case "square":d="Square";break;default:d="Round"}var e="Butt"===d;switch(b){case "dash":case "esriSLSDash":b=e?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":b=e?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":b=e?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":b=e?[8,3]:[7,4];break;case "long-dash-dot":case "esriSLSLongDashDot":b=e?[8,
3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":b=e?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":b=e?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":b=e?[4,1,1,1]:[3,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":b=e?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":b=e?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":c.error("Unexpected: style does not require rasterization");
b=[0,0];break;default:c.error("Tried to rasterize SLS, but found an unexpected style: "+b+"!"),b=[0,0]}return this.rasterizeDash(a,b,d)};a.rasterizeDash=function(a,b,c){a="Butt"===c;var e="Square"===c;c=!a&&!e;for(var f=0,g=0;g<b.length;g++)var h=b[g],f=f+h;for(var f=15*f,k=31*f,g=new Float32Array(k),l=c?225:15,h=0;h<k;++h)g[h]=l;for(var l=k=0,p=!0,m=0;m<b.length;m++){for(var h=b[m],k=l,l=l+15*h,n=k;n<l;){for(var q=0;31>q;){var h=q*f+n,t=c?(q-15)*(q-15):Math.abs(q-15);g[h]=p?a?Math.max(Math.max(k+
7.5-n,t),Math.max(n-l+7.5,t)):t:c?Math.min((n-k)*(n-k)+t,(n-l)*(n-l)+t):e?Math.min(Math.max(n-k,t),Math.max(l-n,t)):Math.min(Math.max(n-k+7.5,t),Math.max(l+7.5-n,t));q++}n++}p=!p}b=g.length;a=new Uint8Array(4*b);for(h=0;h<b;++h)d.packFloat((c?Math.sqrt(g[h]):g[h])/15,a,4*h);return[a,f,31]};return a}();a.SymbolHelper=m;m=function(){function a(){}a.findApplicableOverrides=function(b,c,d){if(c){if(b.primitiveName)for(var e=0;e<c.length;e++){var f=c[e];if(f.primitiveName===b.primitiveName){for(var g=
!1,h=0,k=d;h<k.length;h++)k[h].primitiveName===b.primitiveName&&(g=!0);g||d.push(f)}}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(f=0,g=b.effects;f<g.length;f++)e=g[f],a.findApplicableOverrides(e,c,d);if(b.symbolLayers)for(e=0,b=b.symbolLayers;e<b.length;e++)a.findApplicableOverrides(b[e],c,d);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(f=0,g=b.effects;f<g.length;f++)e=g[f],a.findApplicableOverrides(e,
c,d);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(e=0,b=b.markerGraphics;e<b.length;e++)f=b[e],a.findApplicableOverrides(f,c,d),a.findApplicableOverrides(f.symbol,c,d)}}};a.applyOverrides=function(b,c,d,e){if(c){if(b.primitiveName)for(var f=0;f<c.length;f++){var g=c[f];if(g.primitiveName===b.primitiveName){e&&e.push({cim:b,propertyName:g.propertyName,value:b[g.propertyName]});g.expression&&(g.value=a.toValue(g.propertyName,g.expression));if(d){for(var h=!1,k=0,l=d;k<l.length;k++)l[k].primitiveName===
b.primitiveName&&(h=!0);h||d.push(g)}b[g.propertyName]=g.value}}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(g=0,h=b.effects;g<h.length;g++)f=h[g],a.applyOverrides(f,c,d,e);if(b.symbolLayers)for(f=0,b=b.symbolLayers;f<b.length;f++)a.applyOverrides(b[f],c,d,e);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(g=0,h=b.effects;g<h.length;g++)f=h[g],a.applyOverrides(f,c,d,e);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(f=
0,b=b.markerGraphics;f<b.length;f++)g=b[f],a.applyOverrides(g,c,d,e),a.applyOverrides(g.symbol,c,d,e)}}};a.restoreOverrides=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.cim[c.propertyName]=c.value}};a.getOverride=function(b,c,d){if(c&&0!==c.length)for(var e=0;e<b.length;e++){var f=b[e];if(f.primitiveName===c&&f.propertyName===d)return a.toValue(d,f.value)}};a.buildOverrideKey=function(a){return JSON.stringify(a.map(function(a){return{P:a.primitiveName,F:a.propertyName,V:a.value}}))};a.toValue=
function(a,b){return"dashTemplate"===a?b.split(" ").map(function(a){return Number(a)}):"color"===a?(a=(new l(b)).toRgba(),a[3]*=255,a):b};return a}();a.OverrideHelper=m})},"esri/views/2d/engine/cim/CIMCursor":function(){define(["require","exports","../../../../geometry/support/jsonUtils","./CIMPlacements"],function(m,a,l,f){function h(a){if(a)for(var b=a.length-1;0<b;--b)a[b][0]-=a[b-1][0],a[b][1]-=a[b-1][1]}function g(a){if(a)for(var b=0;b<a.length;b++)h(a[b])}function k(a){if(a)for(var b=a.length,
d=1;d<b;++d)a[d][0]+=a[d-1][0],a[d][1]+=a[d-1][1]}function e(a){if(a)for(var b=0;b<a.length;b++)k(a[b])}function n(a){a&&a.reverse()}function d(a){return{rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]}}Object.defineProperty(a,"__esModule",{value:!0});a.deltaEncodePath=h;a.deltaEncodeMultipath=g;a.deltaDecodeGeometry=function(a){l.isPolygon(a)?e(a.rings):l.isPolyline(a)?e(a.paths):l.isMultipoint(a)&&k(a.points);return a};a.deltaEncodeGeometry=function(a){l.isPolygon(a)?
g(a.rings):l.isPolyline(a)?g(a.paths):l.isMultipoint(a)&&h(a.points);return a};a.reverseMultipath=function(a){if(a)for(var b=0;b<a.length;b++)n(a[b])};a.reversePath=n;a.getCoord2D=function(a,c,d){return[a[0]+(c[0]-a[0])*d,a[1]+(c[1]-a[1])*d]};a.isClosedPath=function(a){return a&&0!==a.length?a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]:!1};a.getId=function(a){return a[4]};a.setId=function(a,c){a[4]=c};m=function(){function a(a,b,e,g){this.acceptPolygon=b;this.acceptPolyline=e;this.geomUnitsPerPoint=
g;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;a&&(l.isPolygon(a)?b&&(this.multiPath=a.rings,this.isClosed=!0):l.isPolyline(a)?e&&(this.multiPath=a.paths,this.isClosed=!1):l.isExtent(a)&&b&&(this.multiPath=d(a).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new f.Placement}a.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var a=this.processPath(this.multiPath[this.pathIndex]);
if(a)return a}this.pathIndex=this.pathCount=-1;return this.multiPath=null};a.prototype.processPath=function(a){return null};return a}();a.PathTransformationCursor=m;m=function(){function a(a,b,d,e){this.inputGeometries=a;this.acceptPolygon=b;this.acceptPolyline=d;this.geomUnitsPerPoint=e;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}a.prototype.next=function(){for(;;){if(!this.multiPath){for(var a=this.inputGeometries.next();a;)if(l.isPolygon(a)?this.acceptPolygon&&(this.multiPath=a.rings,
this.isClosed=!0):l.isPolyline(a)?this.acceptPolyline&&(this.multiPath=a.paths,this.isClosed=!1):l.isExtent(a)&&this.acceptPolygon&&(this.multiPath=d(a).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else a=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,a=this.processPath(this.multiPath[this.pathIndex]))return a;this.pathIndex=this.pathCount=
-1;this.multiPath=null}};a.prototype.processPath=function(a){return null};return a}();a.PathGeometryCursor=m})},"esri/views/2d/engine/cim/CIMPlacements":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this.setIdentity()}a.prototype.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};a.prototype.setTranslate=function(a,h){this.tx=a;this.ty=h};a.prototype.setTranslateZ=
function(a){this.tz=a};a.prototype.setRotateCS=function(a,h){this.rz=void 0;this.rz_c=a;this.rz_s=h};a.prototype.setRotate=function(a){this.rz=a;this.rz_s=this.rz_c=void 0};a.prototype.setRotateY=function(a){this.ry=a};a.prototype.setScale=function(a){this.s=a};a.prototype.setMeasure=function(a){this.m=a};return a}();a.Placement=m;m=function(){function a(a){}a.prototype.next=function(){return null};return a}();a.EmptyPlacementCursor=m})},"esri/views/2d/engine/cim/CIMEffects":function(){define(["require",
"exports","../../../../core/lang"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(a){this._geometry=a}a.prototype.next=function(){var a=this._geometry;this._geometry=null;return a};return a}();a.SimpleGeometryCursor=m;a.clone=function(a){return l.clone(a)}})},"esri/views/2d/engine/cim/CIMOperators":function(){define(["require","exports"],function(m,a){Object.defineProperty(a,"__esModule",{value:!0});a.getEffectOperator=function(a){return null};a.getPlacementOperator=
function(a){return null}})},"esri/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry/support/jsonUtils ../cim/CIMEffects ../cim/CIMOperators ../cim/CIMPlacements ./GeometryUtils ./Rect".split(" "),function(m,a,l,f,h,g,k,e,n,d){Object.defineProperty(a,"__esModule",{value:!0});var b=function(){function a(a){this._t=a}a.createIdentity=function(){return new a([1,0,0,0,1,0])};
a.prototype.clone=function(){return new a(this._t.slice())};a.prototype.transform=function(a){var b=this._t;return[b[0]*a[0]+b[1]*a[1]+b[2],b[3]*a[0]+b[4]*a[1]+b[5]]};a.createScale=function(b,c){return new a([b,0,0,0,c,0])};a.prototype.scale=function(a,b){var c=this._t;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b;return this};a.prototype.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(b,c){return new a([0,0,b,0,0,c])};a.prototype.translate=
function(a,b){var c=this._t;c[2]+=a;c[5]+=b;return this};a.createRotate=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,-b,0,b,c,0])};a.prototype.rotate=function(b){return this.multiply(a.createRotate(b))};a.prototype.multiply=function(a){var b=this._t;a=a._t;var c=b[1]*a[0]+b[4]*a[1],d=b[2]*a[0]+b[5]*a[1]+a[2],e=b[0]*a[3]+b[3]*a[4],f=b[1]*a[3]+b[4]*a[4],g=b[2]*a[3]+b[5]*a[4]+a[5];b[0]=b[0]*a[0]+b[3]*a[1];b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=g;return this};return a}();a.Transformation=b;m=
function(){function a(a){this._transfos=[];this._sizeTransfos=[];this._transfos.push(a||b.createIdentity());this._sizeTransfos.push(a?a.scaleRatio():1)}a.prototype.transformPt=function(a){return this._transfos[this._transfos.length-1].transform(a)};a.prototype.transformSize=function(a){return a*this._sizeTransfos[this._sizeTransfos.length-1]};a.prototype.back=function(){return this._transfos[this._transfos.length-1]};a.prototype.push=function(a){var b=a.scaleRatio();a.multiply(this.back());this._transfos.push(a);
this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*b)};a.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};a.prototype.drawSymbol=function(a,b){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(a,b)}};a.prototype.drawMultiLayerSymbol=function(a,b){if(a){var c=a.symbolLayers;if(c)if(a=a.effects){if(b=this.executeEffects(a,b))for(a=b.next();a;)this.drawSymbolLayers(c,a),a=b.next()}else this.drawSymbolLayers(c,
b)}};a.prototype.executeEffects=function(a,b){var c=96/72;b=new g.SimpleGeometryCursor(b);for(var d=a?a.length:0,e=0;e<d;++e){var f=a[e];if(f){var h=k.getEffectOperator(f);h&&(b=h.execute(b,f,c))}}return b};a.prototype.drawSymbolLayers=function(a,b){for(var c=a.length;c--;){var d=a[c];if(d&&!1!==d.enable){var e=d.effects;if(e){if(e=this.executeEffects(e,b))for(var f=e.next();f;)this.drawSymbolLayer(d,f),f=e.next()}else this.drawSymbolLayer(d,b)}}};a.prototype.drawSymbolLayer=function(a,b){switch(a.type){case "CIMSolidFill":this.drawSolidFill(b,
a.color);break;case "CIMSolidStroke":this.drawSolidStroke(b,a.color,a.width);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(a,b)}};a.prototype.drawMarkerLayer=function(a,b){var c=a.markerPlacement;if(c){var d=96/72,f=k.getPlacementOperator(c);if(f&&(b=f.execute(b,c,d)))for(c=b.next();c;)this.drawMarker(a,c),c=b.next()}else c=new e.Placement,c.tx=b.x,c.ty=b.y,this.drawMarker(a,c)};a.prototype.drawMarker=function(a,b){switch(a.type){case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawVectorMarker(a,
b)}};a.prototype.drawVectorMarker=function(a,c){if(a){var d=a.markerGraphics;if(d){var e=a.size,f=a.frame,g=f?f.ymax-f.ymin:0,e=e&&g?e/g:1,g=b.createIdentity();f&&g.translate(.5*-(f.xmax+f.xmin),.5*-(f.ymax+f.ymin));var h=a.anchorPoint;if(h){var k=h.x,h=h.y;"Absolute"!==a.anchorPointUnits&&f&&(k*=f.xmax-f.xmin,h*=f.ymax-f.ymin);g.translate(-k,-h)}1!==e&&g.scale(e,e);a.rotation&&g.rotate(a.rotation*n.C_DEG_TO_RAD);g.translate(a.offsetX||0,a.offsetY||0);g.translate(c.tx,c.ty);this.push(g);for(a=0;a<
d.length;a++)(c=d[a])&&this.drawSymbol(c.symbol,c.geometry);this.pop()}}};a.prototype.drawSolidFill=function(a,b){};a.prototype.drawSolidStroke=function(a,b,c){};return a}();a.CIMSymbolDrawHelper=m;f=function(a){function b(){var b=a.call(this)||this;b._xmin=b._ymin=Infinity;b._xmax=b._ymax=-Infinity;return b}l(b,a);b.prototype.envelope=function(){return new d(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};b.prototype._merge=function(a,b){a[0]-b<this._xmin&&(this._xmin=a[0]-b);
a[0]+b>this._xmax&&(this._xmax=a[0]+b);a[1]-b<this._ymin&&(this._ymin=a[1]-b);a[1]+b>this._ymax&&(this._ymax=a[1]+b)};b.prototype.drawSolidFill=function(a,b){b=0;for(a=a.rings;b<a.length;b++){var c=a[b],d=c?c.length:0;if(2<d){this._merge(this.transformPt(c[0]),0);for(var e=1;e<d;++e)this._merge(this.transformPt(c[e]),0)}}};b.prototype.drawSolidStroke=function(a,b,c){b=.5*this.transformSize(c);c=0;for(a=h.isPolygon(a)?a.rings:a.paths;c<a.length;c++){var d=a[c],e=d?d.length:0;if(1<e){this._merge(this.transformPt(d[0]),
b);for(var f=1;f<e;++f)this._merge(this.transformPt(d[f]),b)}}};return b}(m);a.EnvDrawHelper=f;m=function(a){function b(b,c){c=a.call(this,c)||this;c._ctx=b;return c}l(b,a);b.prototype.drawSolidFill=function(a,b){var c=this._ctx;c.fillStyle="string"===typeof b?b:"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";c.beginPath();b=0;for(a=a.rings;b<a.length;b++){var d=a[b],e=d?d.length:0;if(2<e){var f=this.transformPt(d[0]);c.moveTo(f[0],f[1]);for(var g=1;g<e;++g)f=this.transformPt(d[g]),
c.lineTo(f[0],f[1]);c.closePath()}}c.fill("evenodd")};b.prototype.drawSolidStroke=function(a,b,c){var d=this._ctx;d.strokeStyle="string"===typeof b?b:"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";d.lineWidth=this.transformSize(c)+.5;d.beginPath();b=!1;h.isPolygon(a)?(c=a.rings,b=!0):c=a.paths;for(a=0;a<c.length;a++){var e=c[a],f=e?e.length:0;if(1<f){var g=this.transformPt(e[0]);d.moveTo(g[0],g[1]);for(var k=1;k<f;++k)g=this.transformPt(e[k]),d.lineTo(g[0],g[1]);
b&&d.closePath()}}d.stroke()};return b}(m);a.CanvasDrawHelper=m})},"esri/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(m,a,l,f,h){function g(a,f,d){h.packFloatRGBA(a,f,d)}function k(a){if(!a)return null;switch(a.type){case "CIMPointSymbol":a=a.symbolLayers;if(!a||1!==a.length)break;return k(a[0]);case "CIMVectorMarker":var e=a.markerGraphics;if(e&&1===e.length){var d=e[0];if(d&&(e=d.geometry)&&(e.rings||
e.paths)&&(e.paths&&(e={rings:e.paths.map(function(a){for(var b=a.slice(),d=a.length-2;0<=d;d--)b.push(a[d]);return b})}),(d=d.symbol)&&("CIMPolygonSymbol"===d.type||"CIMLineSymbol"===d.type)))return{marker:a,polygon:e,symbol:d}}}return null}Object.defineProperty(a,"__esModule",{value:!0});a.packFloat=g;a.checkSDF=function(a){return null!==k(a)};a.getSDFSymbol=function(a){a=a.markerGraphics;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;a=a.symbol;return!a||"CIMPolygonSymbol"!==a.type&&
"CIMLineSymbol"!==a.type?null:a};a.buildSDF=function(a){var e=k(a);if(!e)return null;var d;if(a=e.polygon)if(a=a.rings){for(var b=[],c=0;c<a.length;c++){var h=[],m=0;for(d=a[c];m<d.length;m++){var t=d[m];h.push(new l.Point(t[0],t[1]))}b.push(h)}d=b}else d=null;else d=null;if(!d)return null;a=Infinity;b=-Infinity;c=Infinity;h=-Infinity;m=0;for(t=d;m<t.length;m++)for(var u=0,w=t[m];u<w.length;u++){var A=w[u];A.x<a&&(a=A.x);A.x>b&&(b=A.x);A.y<c&&(c=A.y);A.y>h&&(h=A.y)}t=new f(a,c,b-a,h-c);h=Math.floor(31.5);
u=(128-2*(h+0+1))/Math.max(t.width,t.height);m=Math.round(t.height*u);a=Math.round(t.width*u)+2*h;b=m+2*h;c=1;(w=e.marker.frame)&&(c=t.height/(w.ymax-w.ymin));t.width>t.height&&(c*=b/m/2);A=e.marker.anchorPoint;m=e=0;A&&(e=.5*(w.xmax+w.xmin)+A.x*(w.xmax-w.xmin),m=.5*(w.ymax+w.ymin)+A.y*(w.ymax-w.ymin),e-=t.x,m-=t.y,e=(e*u+(h-.5))/a-.5,m=(m*u+(h-.5))/b-.5);w=0;for(A=d;w<A.length;w++)for(var C=0,z=A[w];C<z.length;C++){var y=z[C];y.x-=t.x;y.y-=t.y;y.x*=u;y.y*=u;y.x+=h-.5;y.y+=h-.5}u=d;w=a*b;t=new Float32Array(w);
C=h*h+1;for(A=0;A<w;++A)t[A]=C;for(C=0;C<u.length;C++)for(z=u[C],y=z.length,A=1;A<y;++A){var x=z[A-1],E=z[A],B=void 0,F=void 0;x.x<E.x?(B=x.x,F=E.x):(B=E.x,F=x.x);var D=void 0,G=void 0;x.y<E.y?(D=x.y,G=E.y):(D=E.y,G=x.y);var H=Math.floor(B)-h,F=Math.floor(F)+h,D=Math.floor(D)-h,G=Math.floor(G)+h;0>H&&(H=0);F>a&&(F=a);0>D&&(D=0);G>b&&(G=b);for(var B=E.x-x.x,P=E.y-x.y,O=B*B+P*P;H<F;H++)for(var N=D;N<G;N++){var J=(H-x.x)*B+(N-x.y)*P,R=void 0,M=void 0;0>J?(R=x.x,M=x.y):J>O?(R=E.x,M=E.y):(J/=O,R=x.x+J*
B,M=x.y+J*P);J=(H-R)*(H-R)+(N-M)*(N-M);R=(b-N-1)*a+H;J<t[R]&&(t[R]=J)}}for(A=0;A<w;++A)t[A]=Math.sqrt(t[A]);for(u=0;u<d.length;u++)for(w=d[u],A=w.length,C=1;C<A;++C)for(z=w[C-1],y=w[C],E=x=void 0,z.x<y.x?(x=z.x,E=y.x):(x=y.x,E=z.x),F=D=void 0,z.y<y.y?(D=z.y,F=y.y):(D=y.y,F=z.y),x=Math.floor(x),E=Math.floor(E)+1,D=Math.floor(D),F=Math.floor(F)+1,x<h&&(x=h),E>a-h&&(E=a-h),D<h&&(D=h),F>b-h&&(F=b-h);D<F;++D)if(z.y>D!==y.y>D){G=(b-D-1)*a;for(B=x;B<E;++B)B<(y.x-z.x)*(D-z.y)/(y.y-z.y)+z.x&&(t[G+B]=-t[G+
B]);for(B=h;B<x;++B)t[G+B]=-t[G+B]}h*=2;d=t.length;u=new Uint8Array(4*d);for(w=0;w<d;++w)g(.5-t[w]/h,u,4*w);return[u,a,b,c,e,m]}})},"esri/views/3d/webgl-engine/lib/Util":function(){define("require exports ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../../support/mathUtils".split(" "),function(m,a,l,f,
h,g,k,e,n){function d(a,b){if(!a)throw a=Error(b||"assert"),a.stack&&console.log(a.stack),new u(b);}function b(a){for(var b in a)return b}function c(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function q(a,b){void 0===b&&(b=0);for(var c=0,d=0;4>d;d++)c+=a[b+d]*A[d];return c}function p(a){return a-Math.floor(a)}Object.defineProperty(a,"__esModule",{value:!0});var t=e.vec4f64.create(),u=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+this.message};return a}();
a.AssertException=u;a.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"aTangent"};a.assert=d;a.verify=function(a,b){a||console.warn("Verify failed: "+(b||"")+"\n"+Error("verify").stack)};a.encodeInt16=function(a){return n.clamp(Math.round(32767*a),-32767,32767)};a.encodeNormal=function(a,b){var c=Math.abs(a[0]),
d=Math.abs(a[1]),e=1/(c+d+Math.abs(a[2])),f=Math.min(a[2]*e,0);b[0]=(0>a[0]?-1:1)*(c*e-f);b[1]=(0>a[1]?-1:1)*(d*e-f)};a.fallbackIfUndefined=function(a,b){return void 0===a?b:a};a.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};a.rgb2hex=function(a){var b=n.clamp(Math.round(255*a[0]),0,255),c=n.clamp(Math.round(255*a[1]),0,255);a=n.clamp(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)};a.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,
8-a.length)+a};a.rayTriangle3D=function(a,b,c,d,e,f,h,k,l){void 0===l&&(l=g.vec3f64.create());var m=d[h]-c[f],n=d[h+1]-c[f+1],p=d[h+2]-c[f+2];d=e[k]-c[f];h=e[k+1]-c[f+1];e=e[k+2]-c[f+2];var q=b[1]*e-h*b[2],t=b[2]*d-e*b[0],u=b[0]*h-d*b[1];k=m*q+n*t+p*u;if(-1E-5<k&&1E-5>k)return!1;k=1/k;var x=a[0]-c[f],z=a[1]-c[f+1];a=a[2]-c[f+2];l[1]=k*(x*q+z*t+a*u);if(0>l[1]||1<l[1])return!1;c=z*p-n*a;a=a*m-p*x;m=x*n-m*z;l[2]=k*(b[0]*c+b[1]*a+b[2]*m);if(0>l[2]||1<l[1]+l[2])return!1;l[0]=k*(d*c+h*a+e*m);return!0};
a.rayBoxTest=function(a,b,c,d){var e,f=(c[0]-a[0])/b[0],g=(d[0]-a[0])/b[0];f>g&&(e=f,f=g,g=e);var h=(c[1]-a[1])/b[1],k=(d[1]-a[1])/b[1];h>k&&(e=h,h=k,k=e);if(f>k||h>g)return!1;h>f&&(f=h);k<g&&(g=k);c=(c[2]-a[2])/b[2];a=(d[2]-a[2])/b[2];c>a&&(e=c,c=a,a=e);if(f>a||c>g)return!1;a<g&&(g=a);return 0>g?!1:!0};a.rayRay2D=function(a,b,c,d,e,f){void 0===f&&(f=h.vec2f64.create());var g=(d[e]-c[e])*(b[0]-a[0])-(d[0]-c[0])*(b[e]-a[e]);if(0===g)return!1;c=((d[0]-c[0])*(a[e]-c[e])-(d[e]-c[e])*(a[0]-c[0]))/g;f[0]=
a[0]+c*(b[0]-a[0]);f[1]=a[e]+c*(b[e]-a[e]);return!0};a.project=function(a,b,c,e,f){f||(f=a);t[0]=a[0];t[1]=a[1];t[2]=a[2];t[3]=1;k.vec4.transformMat4(t,t,b);2<f.length&&(f[2]=-t[2]);k.vec4.transformMat4(t,t,c);d(0!==t[3]);f[0]=t[0]/t[3];f[1]=t[1]/t[3];f[2]=t[2]/t[3];f[0]=(.5*f[0]+.5)*e[2]+e[0];f[1]=(.5*f[1]+.5)*e[3]+e[1]};a.getFirstObjectKey=b;a.getFirstObjectValue=function(a){return a[b(a)]};a.objectEmpty=function(a){for(var b in a)return!1;return!0};a.logWithBase=function(a,b){return Math.log(a)/
Math.log(b)};a.setMatrixTranslation=c;a.setMatrixTranslation3=function(a,b,c,d){a[12]=b;a[13]=c;a[14]=d};a.getMatrixTranslation=function(a,b){void 0===b&&(b=g.vec3f64.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.createTranslationMatrix=function(a,b){a=l.mat4.identity(a);c(a,b);return a};a.isTranslationMatrix=function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&1===a[15]};a.fovx2fovy=function(a,b,c){return 2*
Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};a.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};a.fovd2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};a.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};a.packFloatRGBA=function(a,b,c){void 0===c&&(c=0);a=n.clamp(a,
0,C);for(var d=0;4>d;d++)b[c+d]=Math.floor(256*p(a*w[d]))};a.unpackFloatRGBA=q;var w=[1,256,65536,16777216],A=[1/256,1/65536,1/16777216,1/4294967296],C=q(new Uint8ClampedArray([255,255,255,255]));a.inverseProjectionInfo=function(a,b,c,d,e){0===a[11]?(d[0]=2/(b*a[0]),d[1]=2/(c*a[5]),d[2]=(1+a[12])/a[0],d[3]=(1+a[13])/a[5],f.vec2.set(e,0,1)):(d[0]=-2/(b*a[0]),d[1]=-2/(c*a[5]),d[2]=(1-a[8])/a[0],d[3]=(1-a[9])/a[5],f.vec2.set(e,1,0))}})},"esri/core/libs/gl-matrix-2/vec4":function(){define(["require",
"exports","./math/vec4"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec4=l})},"esri/core/libs/gl-matrix-2/math/vec4":function(){define(["require","exports","./common"],function(m,a,l){function f(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];return a}function h(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];a[3]=c[3]*d[3];return a}function g(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];a[2]=c[2]/d[2];a[3]=c[3]/d[3];return a}function k(a,c){var b=c[0]-a[0],
d=c[1]-a[1],e=c[2]-a[2];a=c[3]-a[3];return Math.sqrt(b*b+d*d+e*e+a*a)}function e(a,c){var b=c[0]-a[0],d=c[1]-a[1],e=c[2]-a[2];a=c[3]-a[3];return b*b+d*d+e*e+a*a}function n(a){var b=a[0],d=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+d*d+e*e+a*a)}function d(a){var b=a[0],d=a[1],e=a[2];a=a[3];return b*b+d*d+e*e+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.copy=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a};a.set=function(a,c,d,e,f){a[0]=c;a[1]=d;a[2]=e;a[3]=f;return a};a.add=function(a,
c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];return a};a.subtract=f;a.multiply=h;a.divide=g;a.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);a[3]=Math.ceil(c[3]);return a};a.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);a[3]=Math.floor(c[3]);return a};a.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);a[3]=Math.min(c[3],d[3]);return a};a.max=function(a,c,d){a[0]=
Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],d[2]);a[3]=Math.max(c[3],d[3]);return a};a.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);a[3]=Math.round(c[3]);return a};a.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;return a};a.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;return a};a.distance=k;a.squaredDistance=e;a.length=n;a.squaredLength=d;a.negate=function(a,c){a[0]=
-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=-c[3];return a};a.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];a[3]=1/c[3];return a};a.normalize=function(a,c){var b=c[0],d=c[1],e=c[2];c=c[3];var f=b*b+d*d+e*e+c*c;0<f&&(f=1/Math.sqrt(f),a[0]=b*f,a[1]=d*f,a[2]=e*f,a[3]=c*f);return a};a.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};a.lerp=function(a,c,d,e){var b=c[0],f=c[1],g=c[2];c=c[3];a[0]=b+e*(d[0]-b);a[1]=f+e*(d[1]-f);a[2]=g+e*(d[2]-g);a[3]=c+e*(d[3]-c);return a};a.random=function(a,
c){c=c||1;var b,d,e,f,g,h;do b=2*l.RANDOM()-1,d=2*l.RANDOM()-1,g=b*b+d*d;while(1<=g);do e=2*l.RANDOM()-1,f=2*l.RANDOM()-1,h=e*e+f*f;while(1<=h);g=Math.sqrt((1-g)/h);a[0]=c*b;a[1]=c*d;a[2]=c*e*g;a[3]=c*f*g;return a};a.transformMat4=function(a,c,d){var b=c[0],e=c[1],f=c[2];c=c[3];a[0]=d[0]*b+d[4]*e+d[8]*f+d[12]*c;a[1]=d[1]*b+d[5]*e+d[9]*f+d[13]*c;a[2]=d[2]*b+d[6]*e+d[10]*f+d[14]*c;a[3]=d[3]*b+d[7]*e+d[11]*f+d[15]*c;return a};a.transformQuat=function(a,c,d){var b=c[0],e=c[1],f=c[2],g=d[0],h=d[1],k=d[2];
d=d[3];var l=d*b+h*f-k*e,m=d*e+k*b-g*f,n=d*f+g*e-h*b,b=-g*b-h*e-k*f;a[0]=l*d+b*-g+m*-k-n*-h;a[1]=m*d+b*-h+n*-g-l*-k;a[2]=n*d+b*-k+l*-h-m*-g;a[3]=c[3];return a};a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};a.equals=function(a,c){var b=a[0],d=a[1],e=a[2];a=a[3];var f=c[0],g=c[1],h=c[2];c=c[3];return Math.abs(b-f)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(d-g)<=l.EPSILON*Math.max(1,
Math.abs(d),Math.abs(g))&&Math.abs(e-h)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(a-c)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};a.sub=f;a.mul=h;a.div=g;a.dist=k;a.sqrDist=e;a.len=n;a.sqrLen=d})},"esri/core/libs/gl-matrix-2/vec4f64":function(){define(["require","exports","./factories/vec4f64"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.vec4f64=l})},"esri/core/libs/gl-matrix-2/factories/vec4f64":function(){define(["require","exports"],function(m,a){function l(){return[0,
0,0,0]}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,h,g,k){return[a,h,g,k]};a.fromArray=function(a){for(var f=l(),g=Math.min(4,a.length),k=0;k<g;++k)f[k]=a[k];return f};a.createView=function(a,h){return new Float64Array(a,h,4)}})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix-2/mat2d ../../../../../../core/libs/gl-matrix-2/mat2df32 ../../../../../../core/libs/gl-matrix-2/vec2 ../../../../../../core/libs/gl-matrix-2/vec2f32 ../../../cim/cimAnalyzer ../../color ../../enums ../../number ../../WGLDisplayRecord ../../materialKey/MaterialKey ./util ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w,A,C){Object.defineProperty(a,"__esModule",{value:!0});var z=3.14159265359/180,y=d.vec2f32.create(),x=e.mat2df32.create(),E=f.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");m=function(a){function e(b,d){var e=a.call(this)||this;e.geometryType=q.WGLGeometryType.MARKER;e.xOffset=0;e.yOffset=0;e.width=0;e.height=0;e._dynamicPropertyMap=new Map;e._cimMarkerLayer=d;var f=0;w.isFunction(d.color)||(f=c.premultiplyAlphaRGBA(d.color));e._dynamicPropertyMap.set("_fillColor",
function(a,b,e){return w.isFunction(d.color)?c.premultiplyAlphaRGBA(d.color(a,b,e)):f});var h=0;w.isFunction(d.outlineColor)||(h=c.premultiplyAlphaRGBA(d.outlineColor));e._dynamicPropertyMap.set("_outlineColor",function(a,b,e){return w.isFunction(d.outlineColor)?c.premultiplyAlphaRGBA(d.outlineColor(a,b,e)):h});var k;w.isFunction(d.size)||(k=g.pt2px(d.size));e._dynamicPropertyMap.set("_size",function(a,b,c){return w.isFunction(d.size)?g.pt2px(d.size(a,b,c)):k});var l;w.isFunction(d.scaleX)||(l=d.scaleX);
e._dynamicPropertyMap.set("_scaleX",function(a,b,c){return w.isFunction(d.scaleX)?d.scaleX(a,b,c):l});var m;w.isFunction(d.offsetX)||(m=g.pt2px(d.offsetX));e._dynamicPropertyMap.set("xOffset",function(a,b,c){return w.isFunction(d.offsetX)?g.pt2px(d.offsetX(a,b,c)):m});var n;w.isFunction(d.offsetY)||(n=g.pt2px(d.offsetY));e._dynamicPropertyMap.set("yOffset",function(a,b,c){return w.isFunction(d.offsetY)?g.pt2px(d.offsetY(a,b,c)):n});var p;w.isFunction(d.outlineWidth)||(p=g.pt2px(d.outlineWidth));e._dynamicPropertyMap.set("_outlineWidth",
function(a,b,c){return w.isFunction(d.outlineWidth)?g.pt2px(d.outlineWidth(a,b,c)):p});var t;w.isFunction(d.rotation)||(t=d.rotation);e._dynamicPropertyMap.set("_angle",function(a,b,c){return w.isFunction(d.rotation)?d.rotation(a,b,c):t});e._colorLockedAndAlignment=(d.alignment===q.Alignment.MAP?1:0)|(d.colorLocked?1:0)<<1;e._materialKey=u.createMaterialKey(e.geometryType,b,!1);return e}l(e,a);e.fromCIMMarker=function(a,b){return new e(a,b)};e.prototype.analyze=function(a,c){var d=this._materialCache,
e=this._cimMarkerLayer.materialHash(a);return d.has(e)?(a=d.get(e),h.resolve(a)):c.getMosaicItem(b.analyzeCIMResource(a,this._cimMarkerLayer.cim)).then(function(a){d.set(e,a);return a})};e.prototype.bindFeature=function(a,b,c){var e=this,f=this._dynamicPropertyMap;f&&f.forEach(function(d,f){e[f]=d(a,b,c)});var g=this._cimMarkerLayer.rotateClockwise?-this._angle:this._angle,f=this._size*this._scaleX,h=this._size,l=this.xOffset,m=this.yOffset,q=this._outlineWidth*(this._cimMarkerLayer.frameHeight?h/
this._cimMarkerLayer.frameHeight:1),t=this._materialCache,w=this._cimMarkerLayer.materialHash(a);if(t=t.get(w))w=1,t&&C.ok(t.spriteMosaicItem)&&(t=t.spriteMosaicItem,this._sizeOutlineWidth=p.i8888to32(f,h,q,this._colorLockedAndAlignment),w=t.sdf?.5:1,k.mat2d.identity(x),k.mat2d.translate(x,x,d.vec2f32.fromValues(w*l,w*-m)),g&&k.mat2d.rotate(x,x,z*g),g=Math.round(t.rect.x/4)-128,l=Math.round(t.rect.y/4)-128,m=g+Math.round(t.rect.width/4),q=l+Math.round(t.rect.height/4),n.vec2.set(y,-.5*f,-.5*h),n.vec2.transformMat2d(y,
y,x),this._offsetAndTexUpperLeft=p.i8888to32(y[0],y[1],g,l),n.vec2.set(y,.5*f,-.5*h),n.vec2.transformMat2d(y,y,x),this._offsetAndTexUpperRight=p.i8888to32(y[0],y[1],m,l),n.vec2.set(y,-.5*f,.5*h),n.vec2.transformMat2d(y,y,x),this._offsetAndTexBottomLeft=p.i8888to32(y[0],y[1],g,q),n.vec2.set(y,.5*f,.5*h),n.vec2.transformMat2d(y,y,x),this._offsetAndTexBottomRight=p.i8888to32(y[0],y[1],m,q),f=u.MarkerMaterialKey.load(this._materialKey),t&&(f.sdf=t.sdf,f.pattern=!0,f.textureBinding=t.textureBinding),this._materialKey=
f.data)};e.prototype.writeMesh=function(a,b,c,d,e,f,g,h){f=u.MarkerMaterialKey.load(this._materialKey);var k=b.indexVector,l=b.get("geometry"),m=b.get("visibility"),n=new t(d,this.geometryType,this._materialKey);b=b.getVector("geometry").vertexCount;a.push(n);n.vertexFrom=b;n.indexFrom=k.length;switch(c){case "esriGeometryPoint":c=e.geometry;a=c.x;c=c.y;this._writeVertices(n,l,m,d,this._getPos(a,c),f,g,h);this._writeIndices(n,k,b);break;case "esriGeometryPolyline":this._writeMany(n,k,l,m,b,d,e.geometry.paths[0],
f,g,h);break;case "esriGeometryPolygon":(c=e.centroid)?(a=c.x,c=c.y,this._writeVertices(n,l,m,d,this._getPos(a,c),f,g,h),this._writeIndices(n,k,b)):E.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(n,k,l,m,b,d,e.geometry.points,f,g,h);break;default:E.error("Unable to handle geometryType: "+c)}};e.prototype._getPos=function(a,b){return p.i1616to32(a,b)};e.prototype._writeMany=function(a,b,c,d,e,f,g,h,k,l){for(var m=
0,n=0,p=0,q=0;q<g.length;q++){var t=g[q],u=t[0],t=t[1],x=this._getPos(u+m,t+n);this._writeVertices(a,c,d,f,x,h,k,l);this._writeIndices(a,b,e+p);m+=u;n+=t;p+=4}};e.prototype._writeVertices=function(a,b,c,d,e,f,g,h){b.push(e);b.push(this._offsetAndTexUpperLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexUpperRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);
this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexBottomLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);b.push(e);b.push(this._offsetAndTexBottomRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(h);a.vertexCount+=4};e.prototype._writeVV=function(a,b,c){c.hasVV()&&(a.push(b[q.VVType.SIZE]),a.push(b[q.VVType.COLOR]),a.push(b[q.VVType.OPACITY]),
a.push(b[q.VVType.ROTATION]))};e.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return e}(A.default);a.default=m})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper","./WGLMeshTemplate"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function f(){var f=a.call(this)||this;f._materialCache=
new Map;return f}l(f,a);return f}(f.default);a.default=m})},"esri/views/2d/engine/webgl/util/Result":function(){define(["require","exports","../../../../../core/Error"],function(m,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.ok=function(a,h){return a&&"name"in a?(h&&h.error(new l(a.name,a.message,a.details)),!1):!0}})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../../materialKey/MaterialKey ../Tesselator ./WGLMeshTemplate".split(" "),
function(m,a,l,f,h,g,k,e,n,d,b,c,q,p,t){Object.defineProperty(a,"__esModule",{value:!0});var u=f.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),w=[],A=[];m=function(a){function f(c,d,f,g,h,k,l,m,t){var u=a.call(this)||this;u.fillColor=f;u.tl=g;u.br=h;u.aux1=k;u.aux2=l;u.aux3=m;u.isBFS=t;u.geometryType=n.WGLGeometryType.FILL;u.useLibtess=!0;c=q.FillMaterialKey.load(q.createMaterialKey(u.geometryType,c,!1));d&&(c.sdf=d.sdf,c.pattern=!0,c.textureBinding=d.textureBinding);u._materialKey=
c.data;u._tesselator=new p.default;u._tileClipper=new b.TileClipper(0,0,0,1,8);u._tileClipper.setExtent(e.TILE_SIZE);return u}l(f,a);f.fromCIMFill=function(a,b,c,e){void 0===e&&(e=!1);var g=b.color,g=g&&k.premultiplyAlphaRGBA(g)||0,l=d.i8888to32(0,0,0,b.colorLocked?1:0);if(!c)return new f(a,null,g,0,0,0,0,l,e);var l=c.rect,m=c.width,n=c.height,p=l.x+1,q=l.y+1,t=p+m,u=q+n,l=d.nextHighestPowerOfTwo(h.pt2px(b.height||0));255<l?l=255:0>=l&&(l=d.nextHighestPowerOfTwo(u-q));m=d.nextHighestPowerOfTwo(h.pt2px(b.height/
n*m||0));255<m?m=255:0>=m&&(m=d.nextHighestPowerOfTwo(t-p));n=h.pt2px(b.offsetX||0)+128;255<n&&(n=255);var x=h.pt2px(-b.offsetY||0)+128;255<x&&(x=255);b=b.scaleX||1;p=d.i1616to32(p,q);t=d.i1616to32(t,u);l=d.i8888to32(m,l,n,x);b=d.i1616to32(128*b,128);return new f(a,c,g,p,t,l,b,0,e)};f.fromSimpleFill=function(a,b,c,e){void 0===e&&(e=!1);var g=b.color;b=g&&"none"!==b.style&&k.premultiplyAlphaRGBA(g)||0;if(!c)return new f(a,null,b,0,0,0,0,0,e);var g=c.rect,h=g.x+1,l=g.y+1,m=g.x+1+c.width,n=g.y+1+c.height,
g=d.i1616to32(h,l),p=d.i1616to32(m,n),h=d.i8888to32(d.nextHighestPowerOfTwo(m-h),d.nextHighestPowerOfTwo(n-l),0,0),l=d.i1616to32(128,128);return new f(a,c,b,g,p,h,l,0,e)};f.fromPictureFill=function(a,b,c,g){void 0===g&&(g=!1);var k=e.PICTURE_FILL_COLOR,l=c.rect,m=l.x+1,n=l.y+1,l=m+c.width,p=n+c.height,m=d.i1616to32(m,n),l=d.i1616to32(l,p),p=d.nextHighestPowerOfTwo(h.pt2px(b.width));255<p&&(p=255);n=d.nextHighestPowerOfTwo(h.pt2px(b.height));255<n&&(n=255);var q=h.pt2px(b.xoffset)+128;255<q&&(q=255);
var t=h.pt2px(-b.yoffset)+128;255<t&&(t=255);p=d.i8888to32(p,n,q,t);b=d.i1616to32(128*b.xscale,128*b.yscale);return new f(a,c,k,m,l,p,b,0,g)};f.prototype.writeMesh=function(a,b,c,d,e,f,g,h){w.length=0;if("esriGeometryPolygon"!==c)u.error("Unable to handle geometryType: "+c);else{var k=e.geometry;e=this._isClippingRequired(k);var l;l=k.rings;for(var m=0,n=0;n<l.length;n++)for(var p=l[n],q=p[0],t=q[0],q=q[1],x=1;x<p.length;x++)var y=p[x],z=t+y[0],y=q+y[1],m=m-(z-t)*(y+q)/2,t=z,q=y;l=m;k=e?this._clip(k,
!this.useLibtess):k.rings;return this.useLibtess?this._writeMeshLibtess(a,b,c,d,k,e,f,l,g,h):this._writeMeshEarcut(a,b,c,d,k,e,f,g,h)}};f.prototype._isClippingRequired=function(a){var b=e.TILE_SIZE+8,c=0;for(a=a.rings;c<a.length;c++){var d=a[c],f=d.length;if(!(3>f)){var g=d[0][0],h=d[0][1];if(-8>g||g>b||-8>h||h>b)return!0;for(var k=1;k<f;++k)if(g+=d[k][0],h+=d[k][1],-8>g||g>b||-8>h||h>b)return!0}}return!1};f.prototype._clip=function(a,b){var c;this._tileClipper.reset(3);for(var d=0,e=a.rings;d<e.length;d++){var f=
e[d],g=f.length;if(!(3>g)){a=f[0][0];c=f[0][1];this._tileClipper.moveTo(a,c);for(var h=1;h<g;++h)a+=f[h][0],c+=f[h][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};f.prototype._writeMeshLibtess=function(a,b,d,e,f,g,h,k,l,m){if(f&&f.length){d=[];h=b.indexVector;var n=b.getVector("geometry");b=b.getVector("visibility");var p=new c(e,this.geometryType,this._materialKey),t=q.FillMaterialKey.load(this._materialKey),u=n.vertexCount;p.vertexFrom=u;p.indexFrom=
h.length;this._tesselator.beginPolygon(w,d);for(var x=0;x<f.length;x++){var y=f[x];if(!(3>y.length)){this._tesselator.beginContour();var z=void 0,B=void 0;g?(z=y[0].x,B=y[0].y):(z=y[0][0],B=y[0][1]);var A=[z,B,0];this._tesselator.addVertex(A,A);for(A=1;A<y.length-1;A++){var C=void 0,D=void 0;g?(z=y[A].x,B=y[A].y):(C=y[A][0],D=y[A][1],z+=C,B+=D);C=[z,B,0];this._tesselator.addVertex(C,C)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(p,n,b,e,w,t,k,l,m);this._writeIndicesLibTess(p,
h,u,d);0<p.indexCount&&a.push(p)}};f.prototype._writeMeshEarcut=function(a,b,d,e,f,g,h,k,l){if(f&&f.length){d=b.indexVector;h=b.getVector("geometry");b=b.getVector("visibility");var m=new c(e,this.geometryType,this._materialKey),n=q.FillMaterialKey.load(this._materialKey),p=h.vertexCount;m.vertexFrom=p;m.indexFrom=d.length;a.push(m);for(var t=a=0,u=0;u<f.length;u++){var x=f[u],y=t,z=void 0,B=void 0;g?(z=x[0].x,B=x[0].y):(z=x[0][0],B=x[0][1]);w[t++]=z;w[t++]=B;for(var C=0,D=1;D<x.length;++D){var E=
void 0,F=void 0;g?(E=z,F=B,z=x[D].x,B=x[D].y,E=z-E,F=B-F):(E=x[D][0],F=x[D][1],z+=E,B+=F);C-=E*(B+B+F);w[t++]=z;w[t++]=B}0<C?(0<y-a&&(this._write(m,d,h,b,p,e,w,A,a,y,n,k,l),a=y),A.length=0):0>C?0<y-a?A.push(.5*(y-a)):t=y:t=y}0<t-a&&this._write(m,d,h,b,p,e,w,A,a,t,n,k,l);w.length=A.length=0}};f.prototype._write=function(a,b,c,d,e,f,h,k,l,m,n,p,q){e=g(h.slice(l,m),k,2);e.length&&(l=c.vertexCount,this._writeVertices(a,c,d,f,h,k,n,p,q),this._writeIndices(a,b,l,e))};f.prototype._writeVertices=function(a,
b,c,e,f,g,h,k,l){for(g=0;g<f.length;g+=2){var m=d.i1616to32(f[g],f[g+1]);b.data.push(m);b.data.push(e);b.data.push(this.fillColor);b.data.push(this.tl);b.data.push(this.br);b.data.push(this.aux1);b.data.push(this.aux2);b.data.push(this.aux3);this._writeVV(b.data,k,h);c.data.push(l);a.vertexCount++}};f.prototype._writeIndices=function(a,b,c,d){for(var e=0;e<d.length;e+=3)b.push(c+d[e]),b.push(c+d[e+1]),b.push(c+d[e+2]),a.indexCount+=3};f.prototype._writeVerticesLibTess=function(a,b,c,e,f,g,h,k,l){for(var m=
0;m<f.length;m+=2){var n=d.i1616to32(f[m],f[m+1]);b.data.push(n);b.data.push(e);g.dotDensity||(b.data.push(this.fillColor),b.data.push(this.tl),b.data.push(this.br),b.data.push(this.aux1),b.data.push(this.aux2),b.data.push(this.aux3));this._writeVV(b.data,k,g);this._writeDD(b.data,g,k,h);c.data.push(l);a.vertexCount++}};f.prototype._writeIndicesLibTess=function(a,b,c,d){for(var e=0;e<d.length;e++)b.push(c+d[e]),a.indexCount++};f.prototype._writeVV=function(a,b,c){c.hasVV()&&(this.isBFS?(a.writeF32(1E-30),
a.writeF32(1E-30)):(a.push(b[n.VVType.COLOR]),a.push(b[n.VVType.OPACITY])))};f.prototype._writeDD=function(a,b,c,d){c=new Float32Array(c.buffer);d=1/d;b.dotDensity&&(a.writeF32(Math.max(0,c[0]*d)),a.writeF32(Math.max(0,c[1]*d)),a.writeF32(Math.max(0,c[2]*d)),a.writeF32(Math.max(0,c[3]*d)),a.writeF32(Math.max(0,c[4]*d)),a.writeF32(Math.max(0,c[5]*d)),a.writeF32(Math.max(0,c[6]*d)),a.writeF32(Math.max(0,c[7]*d)))};return f}(t.default);a.default=m})},"esri/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require",
"exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(m,a,l,f){Object.defineProperty(a,"__esModule",{value:!0});var h=l.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");m=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new f.GluTesselator;this.glu.gluTessCallback(f.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));
this.glu.gluTessCallback(f.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(f.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(f.gluEnum.GLU_TESS_WINDING_RULE,f.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,e){this._triangleIndices[0]=-1;this._triangleIndices[1]=
-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=e};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};a.prototype.addVertex=function(a,e){this.glu.gluTessVertex(a,e)};a.prototype._vertexCallback=function(a,e){e[e.length]=a[0];e[e.length]=a[1];this._triangleIndices[this._currentVertexIndex]=
-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){h.error("Encountered error during tesselation: "+
a)};a.prototype._combinecallback=function(a,e,f){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=m})},"esri/core/libs/libtess/libtess":function(){define([],function(){var m={DEBUG:!1,assert:function(a,l){if(m.DEBUG&&!a)throw Error("Assertion failed"+(l?": "+l:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,
GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,
GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};m.geom.vertEq=function(a,l){return a.s===l.s&&a.t===l.t};m.geom.vertLeq=function(a,l){return a.s<l.s||a.s===l.s&&a.t<=l.t};m.geom.edgeEval=function(a,l,f){m.assert(m.geom.vertLeq(a,l)&&m.geom.vertLeq(l,
f));var h=l.s-a.s,g=f.s-l.s;return 0<h+g?h<g?l.t-a.t+h/(h+g)*(a.t-f.t):l.t-f.t+g/(h+g)*(f.t-a.t):0};m.geom.edgeSign=function(a,l,f){m.assert(m.geom.vertLeq(a,l)&&m.geom.vertLeq(l,f));var h=l.s-a.s,g=f.s-l.s;return 0<h+g?(l.t-f.t)*h+(l.t-a.t)*g:0};m.geom.transLeq=function(a,l){return a.t<l.t||a.t===l.t&&a.s<=l.s};m.geom.transEval=function(a,l,f){m.assert(m.geom.transLeq(a,l)&&m.geom.transLeq(l,f));var h=l.t-a.t,g=f.t-l.t;return 0<h+g?h<g?l.s-a.s+h/(h+g)*(a.s-f.s):l.s-f.s+g/(h+g)*(f.s-a.s):0};m.geom.transSign=
function(a,l,f){m.assert(m.geom.transLeq(a,l)&&m.geom.transLeq(l,f));var h=l.t-a.t,g=f.t-l.t;return 0<h+g?(l.s-f.s)*h+(l.s-a.s)*g:0};m.geom.edgeGoesLeft=function(a){return m.geom.vertLeq(a.dst(),a.org)};m.geom.edgeGoesRight=function(a){return m.geom.vertLeq(a.org,a.dst())};m.geom.vertL1dist=function(a,l){return Math.abs(a.s-l.s)+Math.abs(a.t-l.t)};m.geom.vertCCW=function(a,l,f){return 0<=a.s*(l.t-f.t)+l.s*(f.t-a.t)+f.s*(a.t-l.t)};m.geom.interpolate_=function(a,l,f,h){a=0>a?0:a;f=0>f?0:f;return a<=
f?0===f?(l+h)/2:l+a/(a+f)*(h-l):h+f/(a+f)*(l-h)};m.geom.edgeIntersect=function(a,l,f,h,g){var k,e;m.geom.vertLeq(a,l)||(k=a,a=l,l=k);m.geom.vertLeq(f,h)||(k=f,f=h,h=k);m.geom.vertLeq(a,f)||(k=a,a=f,f=k,k=l,l=h,h=k);m.geom.vertLeq(f,l)?m.geom.vertLeq(l,h)?(k=m.geom.edgeEval(a,f,l),e=m.geom.edgeEval(f,l,h),0>k+e&&(k=-k,e=-e),g.s=m.geom.interpolate_(k,f.s,e,l.s)):(k=m.geom.edgeSign(a,f,l),e=-m.geom.edgeSign(a,h,l),0>k+e&&(k=-k,e=-e),g.s=m.geom.interpolate_(k,f.s,e,h.s)):g.s=(f.s+l.s)/2;m.geom.transLeq(a,
l)||(k=a,a=l,l=k);m.geom.transLeq(f,h)||(k=f,f=h,h=k);m.geom.transLeq(a,f)||(k=a,a=f,f=k,k=l,l=h,h=k);m.geom.transLeq(f,l)?m.geom.transLeq(l,h)?(k=m.geom.transEval(a,f,l),e=m.geom.transEval(f,l,h),0>k+e&&(k=-k,e=-e),g.t=m.geom.interpolate_(k,f.t,e,l.t)):(k=m.geom.transSign(a,f,l),e=-m.geom.transSign(a,h,l),0>k+e&&(k=-k,e=-e),g.t=m.geom.interpolate_(k,f.t,e,h.t)):g.t=(f.t+l.t)/2};m.mesh={};m.mesh.makeEdge=function(a){var l=m.mesh.makeEdgePair_(a.eHead);m.mesh.makeVertex_(l,a.vHead);m.mesh.makeVertex_(l.sym,
a.vHead);m.mesh.makeFace_(l,a.fHead);return l};m.mesh.meshSplice=function(a,l){var f=!1,h=!1;a!==l&&(l.org!==a.org&&(h=!0,m.mesh.killVertex_(l.org,a.org)),l.lFace!==a.lFace&&(f=!0,m.mesh.killFace_(l.lFace,a.lFace)),m.mesh.splice_(l,a),h||(m.mesh.makeVertex_(l,a.org),a.org.anEdge=a),f||(m.mesh.makeFace_(l,a.lFace),a.lFace.anEdge=a))};m.mesh.deleteEdge=function(a){var l=a.sym,f=!1;a.lFace!==a.rFace()&&(f=!0,m.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?m.mesh.killVertex_(a.org,null):(a.rFace().anEdge=
a.oPrev(),a.org.anEdge=a.oNext,m.mesh.splice_(a,a.oPrev()),f||m.mesh.makeFace_(a,a.lFace));l.oNext===l?(m.mesh.killVertex_(l.org,null),m.mesh.killFace_(l.lFace,null)):(a.lFace.anEdge=l.oPrev(),l.org.anEdge=l.oNext,m.mesh.splice_(l,l.oPrev()));m.mesh.killEdge_(a)};m.mesh.addEdgeVertex=function(a){var l=m.mesh.makeEdgePair_(a),f=l.sym;m.mesh.splice_(l,a.lNext);l.org=a.dst();m.mesh.makeVertex_(f,l.org);l.lFace=f.lFace=a.lFace;return l};m.mesh.splitEdge=function(a){var l=m.mesh.addEdgeVertex(a).sym;m.mesh.splice_(a.sym,
a.sym.oPrev());m.mesh.splice_(a.sym,l);a.sym.org=l.org;l.dst().anEdge=l.sym;l.sym.lFace=a.rFace();l.winding=a.winding;l.sym.winding=a.sym.winding;return l};m.mesh.connect=function(a,l){var f=!1,h=m.mesh.makeEdgePair_(a),g=h.sym;l.lFace!==a.lFace&&(f=!0,m.mesh.killFace_(l.lFace,a.lFace));m.mesh.splice_(h,a.lNext);m.mesh.splice_(g,l);h.org=a.dst();g.org=l.org;h.lFace=g.lFace=a.lFace;a.lFace.anEdge=g;f||m.mesh.makeFace_(h,a.lFace);return h};m.mesh.zapFace=function(a){var l=a.anEdge,f=l.lNext,h;do if(h=
f,f=h.lNext,h.lFace=null,null===h.rFace()){h.oNext===h?m.mesh.killVertex_(h.org,null):(h.org.anEdge=h.oNext,m.mesh.splice_(h,h.oPrev()));var g=h.sym;g.oNext===g?m.mesh.killVertex_(g.org,null):(g.org.anEdge=g.oNext,m.mesh.splice_(g,g.oPrev()));m.mesh.killEdge_(h)}while(h!==l);l=a.prev;a=a.next;a.prev=l;l.next=a};m.mesh.meshUnion=function(a,l){var f=a.fHead,h=a.vHead,g=a.eHead,k=l.fHead,e=l.vHead;l=l.eHead;k.next!==k&&(f.prev.next=k.next,k.next.prev=f.prev,k.prev.next=f,f.prev=k.prev);e.next!==e&&(h.prev.next=
e.next,e.next.prev=h.prev,e.prev.next=h,h.prev=e.prev);l.next!==l&&(g.sym.next.sym.next=l.next,l.next.sym.next=g.sym.next,l.sym.next.sym.next=g,g.sym.next=l.sym.next);return a};m.mesh.deleteMesh=function(a){};m.mesh.makeEdgePair_=function(a){var l=new m.GluHalfEdge,f=new m.GluHalfEdge,h=a.sym.next;f.next=h;h.sym.next=l;l.next=a;a.sym.next=f;l.sym=f;l.oNext=l;l.lNext=f;f.sym=l;f.oNext=f;return f.lNext=l};m.mesh.splice_=function(a,l){var f=a.oNext,h=l.oNext;f.sym.lNext=l;h.sym.lNext=a;a.oNext=h;l.oNext=
f};m.mesh.makeVertex_=function(a,l){var f=l.prev,h=new m.GluVertex(l,f);f.next=h;l.prev=h;l=h.anEdge=a;do l.org=h,l=l.oNext;while(l!==a)};m.mesh.makeFace_=function(a,l){var f=l.prev,h=new m.GluFace(l,f);f.next=h;l.prev=h;h.anEdge=a;h.inside=l.inside;l=a;do l.lFace=h,l=l.lNext;while(l!==a)};m.mesh.killEdge_=function(a){var l=a.next;a=a.sym.next;l.sym.next=a;a.sym.next=l};m.mesh.killVertex_=function(a,l){var f=a.anEdge,h=f;do h.org=l,h=h.oNext;while(h!==f);l=a.prev;a=a.next;a.prev=l;l.next=a};m.mesh.killFace_=
function(a,l){var f=a.anEdge,h=f;do h.lFace=l,h=h.lNext;while(h!==f);l=a.prev;a=a.next;a.prev=l;l.next=a};m.normal={};m.normal.S_UNIT_X_=1;m.normal.S_UNIT_Y_=0;m.normal.projectPolygon=function(a,l,f,h){var g=!1,k=[l,f,h];0===l&&0===f&&0===h&&(m.normal.computeNormal_(a,k),g=!0);f=m.normal.longAxis_(k);l=a.mesh.vHead;if(m.TRUE_PROJECT){m.normal.normalize_(k);h=[0,0,0];var e=[0,0,0];h[f]=0;h[(f+1)%3]=m.normal.S_UNIT_X_;h[(f+2)%3]=m.normal.S_UNIT_Y_;f=m.normal.dot_(h,k);h[0]-=f*k[0];h[1]-=f*k[1];h[2]-=
f*k[2];m.normal.normalize_(h);e[0]=k[1]*h[2]-k[2]*h[1];e[1]=k[2]*h[0]-k[0]*h[2];e[2]=k[0]*h[1]-k[1]*h[0];m.normal.normalize_(e);for(k=l.next;k!==l;k=k.next)k.s=m.normal.dot_(k.coords,h),k.t=m.normal.dot_(k.coords,e)}else for(h=(f+1)%3,e=(f+2)%3,f=0<k[f]?1:-1,k=l.next;k!==l;k=k.next)k.s=k.coords[h],k.t=f*k.coords[e];g&&m.normal.checkOrientation_(a)};m.normal.dot_=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]};m.normal.normalize_=function(a){var l=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];m.assert(0<l);l=
Math.sqrt(l);a[0]/=l;a[1]/=l;a[2]/=l};m.normal.longAxis_=function(a){var l=0;Math.abs(a[1])>Math.abs(a[0])&&(l=1);Math.abs(a[2])>Math.abs(a[l])&&(l=2);return l};m.normal.computeNormal_=function(a,l){var f=[-2*m.GLU_TESS_MAX_COORD,-2*m.GLU_TESS_MAX_COORD,-2*m.GLU_TESS_MAX_COORD],h=[2*m.GLU_TESS_MAX_COORD,2*m.GLU_TESS_MAX_COORD,2*m.GLU_TESS_MAX_COORD],g=[],k=[],e;a=a.mesh.vHead;for(e=a.next;e!==a;e=e.next)for(var n=0;3>n;++n){var d=e.coords[n];d<h[n]&&(h[n]=d,k[n]=e);d>f[n]&&(f[n]=d,g[n]=e)}e=0;f[1]-
h[1]>f[0]-h[0]&&(e=1);f[2]-h[2]>f[e]-h[e]&&(e=2);if(h[e]>=f[e])l[0]=0,l[1]=0,l[2]=1;else{f=0;h=k[e];g=g[e];k=[0,0,0];h=[h.coords[0]-g.coords[0],h.coords[1]-g.coords[1],h.coords[2]-g.coords[2]];n=[0,0,0];for(e=a.next;e!==a;e=e.next)n[0]=e.coords[0]-g.coords[0],n[1]=e.coords[1]-g.coords[1],n[2]=e.coords[2]-g.coords[2],k[0]=h[1]*n[2]-h[2]*n[1],k[1]=h[2]*n[0]-h[0]*n[2],k[2]=h[0]*n[1]-h[1]*n[0],d=k[0]*k[0]+k[1]*k[1]+k[2]*k[2],d>f&&(f=d,l[0]=k[0],l[1]=k[1],l[2]=k[2]);0>=f&&(l[0]=l[1]=l[2]=0,l[m.normal.longAxis_(h)]=
1)}};m.normal.checkOrientation_=function(a){for(var l=0,f=a.mesh.fHead,h=f.next;h!==f;h=h.next){var g=h.anEdge;if(!(0>=g.winding)){do l+=(g.org.s-g.dst().s)*(g.org.t+g.dst().t),g=g.lNext;while(g!==h.anEdge)}}if(0>l)for(a=a.mesh.vHead,l=a.next;l!==a;l=l.next)l.t=-l.t};m.render={};m.render.renderMesh=function(a,l,f){for(var h=!1,g=-1,k=l.fHead.prev;k!==l.fHead;k=k.prev)if(k.inside){h||(a.callBeginCallback(m.primitiveType.GL_TRIANGLES),h=!0);var e=k.anEdge;m.assert(e.lNext.lNext.lNext===e,"renderMesh called with non-triangulated mesh");
do{if(f){var n=e.rFace().inside?0:1;g!==n&&(g=n,a.callEdgeFlagCallback(!!g))}a.callVertexCallback(e.org.data);e=e.lNext}while(e!==k.anEdge)}h&&a.callEndCallback()};m.render.renderBoundary=function(a,l){for(var f=l.fHead.next;f!==l.fHead;f=f.next)if(f.inside){a.callBeginCallback(m.primitiveType.GL_LINE_LOOP);var h=f.anEdge;do a.callVertexCallback(h.org.data),h=h.lNext;while(h!==f.anEdge);a.callEndCallback()}};m.sweep={};m.sweep.SENTINEL_COORD_=4*m.GLU_TESS_MAX_COORD;m.sweep.TOLERANCE_NONZERO_=!1;m.sweep.computeInterior=
function(a){a.fatalError=!1;m.sweep.removeDegenerateEdges_(a);m.sweep.initPriorityQ_(a);m.sweep.initEdgeDict_(a);for(var l;null!==(l=a.pq.extractMin());){for(;;){var f=a.pq.minimum();if(null===f||!m.geom.vertEq(f,l))break;f=a.pq.extractMin();m.sweep.spliceMergeVertices_(a,l.anEdge,f.anEdge)}m.sweep.sweepEvent_(a,l)}l=a.dict.getMin().getKey();a.event=l.eUp.org;m.sweep.doneEdgeDict_(a);m.sweep.donePriorityQ_(a);m.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};m.sweep.addWinding_=function(a,
l){a.winding+=l.winding;a.sym.winding+=l.sym.winding};m.sweep.edgeLeq_=function(a,l,f){a=a.event;l=l.eUp;f=f.eUp;if(l.dst()===a)return f.dst()===a?m.geom.vertLeq(l.org,f.org)?0>=m.geom.edgeSign(f.dst(),l.org,f.org):0<=m.geom.edgeSign(l.dst(),f.org,l.org):0>=m.geom.edgeSign(f.dst(),a,f.org);if(f.dst()===a)return 0<=m.geom.edgeSign(l.dst(),a,l.org);l=m.geom.edgeEval(l.dst(),a,l.org);a=m.geom.edgeEval(f.dst(),a,f.org);return l>=a};m.sweep.deleteRegion_=function(a,l){l.fixUpperEdge&&m.assert(0===l.eUp.winding);
l.eUp.activeRegion=null;a.dict.deleteNode(l.nodeUp);l.nodeUp=null};m.sweep.fixUpperEdge_=function(a,l){m.assert(a.fixUpperEdge);m.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=l;l.activeRegion=a};m.sweep.topLeftRegion_=function(a){var l=a.eUp.org;do a=a.regionAbove();while(a.eUp.org===l);a.fixUpperEdge&&(l=m.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),m.sweep.fixUpperEdge_(a,l),a=a.regionAbove());return a};m.sweep.topRightRegion_=function(a){var l=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===
l);return a};m.sweep.addRegionBelow_=function(a,l,f){var h=new m.ActiveRegion;h.eUp=f;h.nodeUp=a.dict.insertBefore(l.nodeUp,h);return f.activeRegion=h};m.sweep.isWindingInside_=function(a,l){switch(a.windingRule){case m.windingRule.GLU_TESS_WINDING_ODD:return 0!==(l&1);case m.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==l;case m.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<l;case m.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>l;case m.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=l||-2>=
l}m.assert(!1);return!1};m.sweep.computeWinding_=function(a,l){l.windingNumber=l.regionAbove().windingNumber+l.eUp.winding;l.inside=m.sweep.isWindingInside_(a,l.windingNumber)};m.sweep.finishRegion_=function(a,l){var f=l.eUp,h=f.lFace;h.inside=l.inside;h.anEdge=f;m.sweep.deleteRegion_(a,l)};m.sweep.finishLeftRegions_=function(a,l,f){var h=l;for(l=l.eUp;h!==f;){h.fixUpperEdge=!1;var g=h.regionBelow(),k=g.eUp;if(k.org!==l.org){if(!g.fixUpperEdge){m.sweep.finishRegion_(a,h);break}k=m.mesh.connect(l.lPrev(),
k.sym);m.sweep.fixUpperEdge_(g,k)}l.oNext!==k&&(m.mesh.meshSplice(k.oPrev(),k),m.mesh.meshSplice(l,k));m.sweep.finishRegion_(a,h);l=g.eUp;h=g}return l};m.sweep.addRightEdges_=function(a,l,f,h,g,k){var e=!0;do m.assert(m.geom.vertLeq(f.org,f.dst())),m.sweep.addRegionBelow_(a,l,f.sym),f=f.oNext;while(f!==h);for(null===g&&(g=l.regionBelow().eUp.rPrev());;){h=l.regionBelow();f=h.eUp.sym;if(f.org!==g.org)break;f.oNext!==g&&(m.mesh.meshSplice(f.oPrev(),f),m.mesh.meshSplice(g.oPrev(),f));h.windingNumber=
l.windingNumber-f.winding;h.inside=m.sweep.isWindingInside_(a,h.windingNumber);l.dirty=!0;!e&&m.sweep.checkForRightSplice_(a,l)&&(m.sweep.addWinding_(f,g),m.sweep.deleteRegion_(a,l),m.mesh.deleteEdge(g));e=!1;l=h;g=f}l.dirty=!0;m.assert(l.windingNumber-f.winding===h.windingNumber);k&&m.sweep.walkDirtyRegions_(a,l)};m.sweep.callCombine_=function(a,l,f,h,g){var k=[l.coords[0],l.coords[1],l.coords[2]];l.data=null;l.data=a.callCombineCallback(k,f,h);null===l.data&&(g?a.fatalError||(a.callErrorCallback(m.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),
a.fatalError=!0):l.data=f[0])};m.sweep.spliceMergeVertices_=function(a,l,f){var h=[null,null,null,null];h[0]=l.org.data;h[1]=f.org.data;m.sweep.callCombine_(a,l.org,h,[.5,.5,0,0],!1);m.mesh.meshSplice(l,f)};m.sweep.vertexWeights_=function(a,l,f,h,g){var k=m.geom.vertL1dist(l,a),e=m.geom.vertL1dist(f,a),n=g+1;h[g]=.5*e/(k+e);h[n]=.5*k/(k+e);a.coords[0]+=h[g]*l.coords[0]+h[n]*f.coords[0];a.coords[1]+=h[g]*l.coords[1]+h[n]*f.coords[1];a.coords[2]+=h[g]*l.coords[2]+h[n]*f.coords[2]};m.sweep.getIntersectData_=
function(a,l,f,h,g,k){var e=[0,0,0,0],n=[f.data,h.data,g.data,k.data];l.coords[0]=l.coords[1]=l.coords[2]=0;m.sweep.vertexWeights_(l,f,h,e,0);m.sweep.vertexWeights_(l,g,k,e,2);m.sweep.callCombine_(a,l,n,e,!0)};m.sweep.checkForRightSplice_=function(a,l){var f=l.regionBelow(),h=l.eUp,g=f.eUp;if(m.geom.vertLeq(h.org,g.org)){if(0<m.geom.edgeSign(g.dst(),h.org,g.org))return!1;m.geom.vertEq(h.org,g.org)?h.org!==g.org&&(a.pq.remove(h.org.pqHandle),m.sweep.spliceMergeVertices_(a,g.oPrev(),h)):(m.mesh.splitEdge(g.sym),
m.mesh.meshSplice(h,g.oPrev()),l.dirty=f.dirty=!0)}else{if(0>m.geom.edgeSign(h.dst(),g.org,h.org))return!1;l.regionAbove().dirty=l.dirty=!0;m.mesh.splitEdge(h.sym);m.mesh.meshSplice(g.oPrev(),h)}return!0};m.sweep.checkForLeftSplice_=function(a,l){var f=l.regionBelow();a=l.eUp;var h=f.eUp;m.assert(!m.geom.vertEq(a.dst(),h.dst()));if(m.geom.vertLeq(a.dst(),h.dst())){if(0>m.geom.edgeSign(a.dst(),h.dst(),a.org))return!1;l.regionAbove().dirty=l.dirty=!0;f=m.mesh.splitEdge(a);m.mesh.meshSplice(h.sym,f);
f.lFace.inside=l.inside}else{if(0<m.geom.edgeSign(h.dst(),a.dst(),h.org))return!1;l.dirty=f.dirty=!0;f=m.mesh.splitEdge(h);m.mesh.meshSplice(a.lNext,h.sym);f.rFace().inside=l.inside}return!0};m.sweep.checkForIntersect_=function(a,l){var f=l.regionBelow(),h=l.eUp,g=f.eUp,k=h.org,e=g.org,n=h.dst(),d=g.dst(),b=new m.GluVertex;m.assert(!m.geom.vertEq(d,n));m.assert(0>=m.geom.edgeSign(n,a.event,k));m.assert(0<=m.geom.edgeSign(d,a.event,e));m.assert(k!==a.event&&e!==a.event);m.assert(!l.fixUpperEdge&&!f.fixUpperEdge);
if(k===e||Math.min(k.t,n.t)>Math.max(e.t,d.t))return!1;if(m.geom.vertLeq(k,e)){if(0<m.geom.edgeSign(d,k,e))return!1}else if(0>m.geom.edgeSign(n,e,k))return!1;m.geom.edgeIntersect(n,k,d,e,b);m.assert(Math.min(k.t,n.t)<=b.t);m.assert(b.t<=Math.max(e.t,d.t));m.assert(Math.min(d.s,n.s)<=b.s);m.assert(b.s<=Math.max(e.s,k.s));m.geom.vertLeq(b,a.event)&&(b.s=a.event.s,b.t=a.event.t);var c=m.geom.vertLeq(k,e)?k:e;m.geom.vertLeq(c,b)&&(b.s=c.s,b.t=c.t);if(m.geom.vertEq(b,k)||m.geom.vertEq(b,e))return m.sweep.checkForRightSplice_(a,
l),!1;if(!m.geom.vertEq(n,a.event)&&0<=m.geom.edgeSign(n,a.event,b)||!m.geom.vertEq(d,a.event)&&0>=m.geom.edgeSign(d,a.event,b)){if(d===a.event)return m.mesh.splitEdge(h.sym),m.mesh.meshSplice(g.sym,h),l=m.sweep.topLeftRegion_(l),h=l.regionBelow().eUp,m.sweep.finishLeftRegions_(a,l.regionBelow(),f),m.sweep.addRightEdges_(a,l,h.oPrev(),h,h,!0),!0;if(n===a.event)return m.mesh.splitEdge(g.sym),m.mesh.meshSplice(h.lNext,g.oPrev()),f=l,l=m.sweep.topRightRegion_(l),k=l.regionBelow().eUp.rPrev(),f.eUp=g.oPrev(),
g=m.sweep.finishLeftRegions_(a,f,null),m.sweep.addRightEdges_(a,l,g.oNext,h.rPrev(),k,!0),!0;0<=m.geom.edgeSign(n,a.event,b)&&(l.regionAbove().dirty=l.dirty=!0,m.mesh.splitEdge(h.sym),h.org.s=a.event.s,h.org.t=a.event.t);0>=m.geom.edgeSign(d,a.event,b)&&(l.dirty=f.dirty=!0,m.mesh.splitEdge(g.sym),g.org.s=a.event.s,g.org.t=a.event.t);return!1}m.mesh.splitEdge(h.sym);m.mesh.splitEdge(g.sym);m.mesh.meshSplice(g.oPrev(),h);h.org.s=b.s;h.org.t=b.t;h.org.pqHandle=a.pq.insert(h.org);m.sweep.getIntersectData_(a,
h.org,k,n,e,d);l.regionAbove().dirty=l.dirty=f.dirty=!0;return!1};m.sweep.walkDirtyRegions_=function(a,l){for(var f=l.regionBelow();;){for(;f.dirty;)l=f,f=f.regionBelow();if(!l.dirty&&(f=l,l=l.regionAbove(),null===l||!l.dirty))break;l.dirty=!1;var h=l.eUp,g=f.eUp;h.dst()!==g.dst()&&m.sweep.checkForLeftSplice_(a,l)&&(f.fixUpperEdge?(m.sweep.deleteRegion_(a,f),m.mesh.deleteEdge(g),f=l.regionBelow(),g=f.eUp):l.fixUpperEdge&&(m.sweep.deleteRegion_(a,l),m.mesh.deleteEdge(h),l=f.regionAbove(),h=l.eUp));
if(h.org!==g.org)if(h.dst()===g.dst()||l.fixUpperEdge||f.fixUpperEdge||h.dst()!==a.event&&g.dst()!==a.event)m.sweep.checkForRightSplice_(a,l);else if(m.sweep.checkForIntersect_(a,l))break;h.org===g.org&&h.dst()===g.dst()&&(m.sweep.addWinding_(g,h),m.sweep.deleteRegion_(a,l),m.mesh.deleteEdge(h),l=f.regionAbove())}};m.sweep.connectRightVertex_=function(a,l,f){var h=f.oNext,g=l.regionBelow(),k=l.eUp,e=g.eUp,n=!1;k.dst()!==e.dst()&&m.sweep.checkForIntersect_(a,l);m.geom.vertEq(k.org,a.event)&&(m.mesh.meshSplice(h.oPrev(),
k),l=m.sweep.topLeftRegion_(l),h=l.regionBelow().eUp,m.sweep.finishLeftRegions_(a,l.regionBelow(),g),n=!0);m.geom.vertEq(e.org,a.event)&&(m.mesh.meshSplice(f,e.oPrev()),f=m.sweep.finishLeftRegions_(a,g,null),n=!0);n?m.sweep.addRightEdges_(a,l,f.oNext,h,h,!0):(h=m.geom.vertLeq(e.org,k.org)?e.oPrev():k,h=m.mesh.connect(f.lPrev(),h),m.sweep.addRightEdges_(a,l,h,h.oNext,h.oNext,!1),h.sym.activeRegion.fixUpperEdge=!0,m.sweep.walkDirtyRegions_(a,l))};m.sweep.connectLeftDegenerate_=function(a,l,f){var h=
l.eUp;if(m.geom.vertEq(h.org,f))m.assert(m.sweep.TOLERANCE_NONZERO_),m.sweep.TOLERANCE_NONZERO_&&m.sweep.spliceMergeVertices_(a,h,f.anEdge);else if(m.geom.vertEq(h.dst(),f)){if(m.assert(m.sweep.TOLERANCE_NONZERO_),m.sweep.TOLERANCE_NONZERO_){l=m.sweep.topRightRegion_(l);var h=l.regionBelow(),g=h.eUp.sym,k=g.oNext,e=k;h.fixUpperEdge&&(m.assert(k!==g),m.sweep.deleteRegion_(a,h),m.mesh.deleteEdge(g),g=k.oPrev());m.mesh.meshSplice(f.anEdge,g);m.geom.edgeGoesLeft(k)||(k=null);m.sweep.addRightEdges_(a,
l,g.oNext,e,k,!0)}}else m.mesh.splitEdge(h.sym),l.fixUpperEdge&&(m.mesh.deleteEdge(h.oNext),l.fixUpperEdge=!1),m.mesh.meshSplice(f.anEdge,h),m.sweep.sweepEvent_(a,f)};m.sweep.connectLeftVertex_=function(a,l){var f=new m.ActiveRegion;f.eUp=l.anEdge.sym;var f=a.dict.search(f).getKey(),h=f.regionBelow(),g=f.eUp,k=h.eUp;0===m.geom.edgeSign(g.dst(),l,g.org)?m.sweep.connectLeftDegenerate_(a,f,l):(h=m.geom.vertLeq(k.dst(),g.dst())?f:h,f.inside||h.fixUpperEdge?(g=h===f?m.mesh.connect(l.anEdge.sym,g.lNext):
m.mesh.connect(k.dNext(),l.anEdge).sym,h.fixUpperEdge?m.sweep.fixUpperEdge_(h,g):m.sweep.computeWinding_(a,m.sweep.addRegionBelow_(a,f,g)),m.sweep.sweepEvent_(a,l)):m.sweep.addRightEdges_(a,f,l.anEdge,l.anEdge,null,!0))};m.sweep.sweepEvent_=function(a,l){a.event=l;for(var f=l.anEdge;null===f.activeRegion;)if(f=f.oNext,f===l.anEdge){m.sweep.connectLeftVertex_(a,l);return}l=m.sweep.topLeftRegion_(f.activeRegion);var h=l.regionBelow(),f=h.eUp,h=m.sweep.finishLeftRegions_(a,h,null);h.oNext===f?m.sweep.connectRightVertex_(a,
l,h):m.sweep.addRightEdges_(a,l,h.oNext,f,f,!0)};m.sweep.addSentinel_=function(a,l){var f=new m.ActiveRegion,h=m.mesh.makeEdge(a.mesh);h.org.s=m.sweep.SENTINEL_COORD_;h.org.t=l;h.dst().s=-m.sweep.SENTINEL_COORD_;h.dst().t=l;a.event=h.dst();f.eUp=h;f.windingNumber=0;f.inside=!1;f.fixUpperEdge=!1;f.sentinel=!0;f.dirty=!1;f.nodeUp=a.dict.insert(f)};m.sweep.initEdgeDict_=function(a){a.dict=new m.Dict(a,m.sweep.edgeLeq_);m.sweep.addSentinel_(a,-m.sweep.SENTINEL_COORD_);m.sweep.addSentinel_(a,m.sweep.SENTINEL_COORD_)};
m.sweep.doneEdgeDict_=function(a){for(var l=0,f;null!==(f=a.dict.getMin().getKey());)f.sentinel||(m.assert(f.fixUpperEdge),m.assert(1===++l)),m.assert(0===f.windingNumber),m.sweep.deleteRegion_(a,f);a.dict=null};m.sweep.removeDegenerateEdges_=function(a){for(var l=a.mesh.eHead,f,h=l.next;h!==l;h=f){f=h.next;var g=h.lNext;m.geom.vertEq(h.org,h.dst())&&h.lNext.lNext!==h&&(m.sweep.spliceMergeVertices_(a,g,h),m.mesh.deleteEdge(h),h=g,g=h.lNext);if(g.lNext===h){if(g!==h){if(g===f||g===f.sym)f=f.next;m.mesh.deleteEdge(g)}if(h===
f||h===f.sym)f=f.next;m.mesh.deleteEdge(h)}}};m.sweep.initPriorityQ_=function(a){var l=new m.PriorityQ;a.pq=l;a=a.mesh.vHead;var f;for(f=a.next;f!==a;f=f.next)f.pqHandle=l.insert(f);l.init()};m.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};m.sweep.removeDegenerateFaces_=function(a){for(var l,f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f=f.anEdge,m.assert(f.lNext!==f),f.lNext.lNext===f&&(m.sweep.addWinding_(f.oNext,f),m.mesh.deleteEdge(f))};m.tessmono={};m.tessmono.tessellateMonoRegion_=function(a){a=
a.anEdge;for(m.assert(a.lNext!==a&&a.lNext.lNext!==a);m.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;m.geom.vertLeq(a.org,a.dst());a=a.lNext);for(var l=a.lPrev(),f;a.lNext!==l;)if(m.geom.vertLeq(a.dst(),l.org)){for(;l.lNext!==a&&(m.geom.edgeGoesLeft(l.lNext)||0>=m.geom.edgeSign(l.org,l.dst(),l.lNext.dst()));)f=m.mesh.connect(l.lNext,l),l=f.sym;l=l.lPrev()}else{for(;l.lNext!==a&&(m.geom.edgeGoesRight(a.lPrev())||0<=m.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)f=m.mesh.connect(a,a.lPrev()),a=f.sym;
a=a.lNext}for(m.assert(l.lNext!==a);l.lNext.lNext!==a;)f=m.mesh.connect(l.lNext,l),l=f.sym};m.tessmono.tessellateInterior=function(a){for(var l,f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f.inside&&m.tessmono.tessellateMonoRegion_(f)};m.tessmono.discardExterior=function(a){for(var l,f=a.fHead.next;f!==a.fHead;f=l)l=f.next,f.inside||m.mesh.zapFace(f)};m.tessmono.setWindingNumber=function(a,l,f){for(var h,g=a.eHead.next;g!==a.eHead;g=h)h=g.next,g.rFace().inside!==g.lFace.inside?g.winding=g.lFace.inside?
l:-l:f?m.mesh.deleteEdge(g):g.winding=0};m.Dict=function(a,l){this.head_=new m.DictNode;this.frame_=a;this.leq_=l};m.Dict.prototype.deleteDict_=function(){};m.Dict.prototype.insertBefore=function(a,l){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,l));l=new m.DictNode(l,a.next,a);a.next.prev=l;return a.next=l};m.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};m.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};m.Dict.prototype.search=
function(a){var l=this.head_;do l=l.next;while(null!==l.key&&!this.leq_(this.frame_,a,l.key));return l};m.Dict.prototype.getMin=function(){return this.head_.next};m.Dict.prototype.getMax=function(){return this.head_.prev};m.DictNode=function(a,l,f){this.key=a||null;this.next=l||this;this.prev=f||this};m.DictNode.prototype.getKey=function(){return this.key};m.DictNode.prototype.getSuccessor=function(){return this.next};m.DictNode.prototype.getPredecessor=function(){return this.prev};m.GluTesselator=
function(){this.state_=m.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=m.windingRule.GLU_TESS_WINDING_ODD;this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};m.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};m.GluTesselator.prototype.gluDeleteTess=
function(){this.requireState_(m.GluTesselator.tessState_.T_DORMANT)};m.GluTesselator.prototype.gluTessProperty=function(a,l){switch(a){case m.gluEnum.GLU_TESS_TOLERANCE:return;case m.gluEnum.GLU_TESS_WINDING_RULE:switch(l){case m.windingRule.GLU_TESS_WINDING_ODD:case m.windingRule.GLU_TESS_WINDING_NONZERO:case m.windingRule.GLU_TESS_WINDING_POSITIVE:case m.windingRule.GLU_TESS_WINDING_NEGATIVE:case m.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=l;return}break;case m.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=
!!l;return;default:this.callErrorCallback(m.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(m.gluEnum.GLU_INVALID_VALUE)};m.GluTesselator.prototype.gluGetTessProperty=function(a){switch(a){case m.gluEnum.GLU_TESS_TOLERANCE:return 0;case m.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,m.assert(a===m.windingRule.GLU_TESS_WINDING_ODD||a===m.windingRule.GLU_TESS_WINDING_NONZERO||a===m.windingRule.GLU_TESS_WINDING_POSITIVE||a===m.windingRule.GLU_TESS_WINDING_NEGATIVE||a===m.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),
a;case m.gluEnum.GLU_TESS_BOUNDARY_ONLY:return m.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(m.gluEnum.GLU_INVALID_ENUM)}return!1};m.GluTesselator.prototype.gluTessNormal=function(a,l,f){this.normal_[0]=a;this.normal_[1]=l;this.normal_[2]=f};m.GluTesselator.prototype.gluTessCallback=function(a,l){l=l?l:null;switch(a){case m.gluEnum.GLU_TESS_BEGIN:case m.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=l;break;case m.gluEnum.GLU_TESS_EDGE_FLAG:case m.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=
l;break;case m.gluEnum.GLU_TESS_VERTEX:case m.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=l;break;case m.gluEnum.GLU_TESS_END:case m.gluEnum.GLU_TESS_END_DATA:this.endCallback_=l;break;case m.gluEnum.GLU_TESS_ERROR:case m.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=l;break;case m.gluEnum.GLU_TESS_COMBINE:case m.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=l;break;case m.gluEnum.GLU_TESS_MESH:this.meshCallback_=l;break;default:this.callErrorCallback(m.gluEnum.GLU_INVALID_ENUM)}};m.GluTesselator.prototype.gluTessVertex=
function(a,l){var f=!1,h=[0,0,0];this.requireState_(m.GluTesselator.tessState_.T_IN_CONTOUR);for(var g=0;3>g;++g){var k=a[g];k<-m.GLU_TESS_MAX_COORD&&(k=-m.GLU_TESS_MAX_COORD,f=!0);k>m.GLU_TESS_MAX_COORD&&(k=m.GLU_TESS_MAX_COORD,f=!0);h[g]=k}f&&this.callErrorCallback(m.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(h,l)};m.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(m.GluTesselator.tessState_.T_DORMANT);this.state_=m.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=
new m.GluMesh;this.polygonData_=a};m.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(m.GluTesselator.tessState_.T_IN_POLYGON);this.state_=m.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};m.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(m.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=m.GluTesselator.tessState_.T_IN_POLYGON};m.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(m.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=m.GluTesselator.tessState_.T_DORMANT;m.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);m.sweep.computeInterior(this);if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?m.tessmono.setWindingNumber(a,1,!0):m.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?m.render.renderBoundary(this,this.mesh):m.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);
if(this.meshCallback_){m.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}m.mesh.deleteMesh(this.mesh);this.mesh=this.polygonData_=null};m.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};m.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case m.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(m.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);
this.gluTessBeginPolygon(null);break;case m.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(m.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case m.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(m.errorType.GLU_TESS_MISSING_END_CONTOUR);this.gluTessEndContour();break;case m.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(m.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};m.GluTesselator.prototype.addVertex_=
function(a,l){var f=this.lastEdge_;null===f?(f=m.mesh.makeEdge(this.mesh),m.mesh.meshSplice(f,f.sym)):(m.mesh.splitEdge(f),f=f.lNext);f.org.data=l;f.org.coords[0]=a[0];f.org.coords[1]=a[1];f.org.coords[2]=a[2];f.winding=1;f.sym.winding=-1;this.lastEdge_=f};m.GluTesselator.prototype.callBeginCallback=function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};m.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};m.GluTesselator.prototype.callEdgeFlagCallback=
function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};m.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};m.GluTesselator.prototype.callCombineCallback=function(a,l,f){return this.combineCallback_?this.combineCallback_(a,l,f,this.polygonData_)||null:null};m.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};m.GluFace=function(a,l){this.next=a||this;
this.prev=l||this;this.anEdge=null;this.inside=!1};m.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};m.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};m.GluHalfEdge.prototype.dst=function(){return this.sym.org};m.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};m.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};m.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};
m.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};m.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};m.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};m.GluMesh=function(){this.vHead=new m.GluVertex;this.fHead=new m.GluFace;this.eHead=new m.GluHalfEdge;this.eHeadSym=new m.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};m.GluMesh.prototype.checkMesh=function(){if(m.DEBUG){var a=this.fHead,l=this.vHead,f=this.eHead,h,g;for(h=h=a;(g=
h.next)!==a;h=g){m.assert(g.prev===h);h=g.anEdge;do m.assert(h.sym!==h),m.assert(h.sym.sym===h),m.assert(h.lNext.oNext.sym===h),m.assert(h.oNext.sym.lNext===h),m.assert(h.lFace===g),h=h.lNext;while(h!==g.anEdge)}m.assert(g.prev===h&&null===g.anEdge);for(h=h=l;(a=h.next)!==l;h=a){m.assert(a.prev===h);h=a.anEdge;do m.assert(h.sym!==h),m.assert(h.sym.sym===h),m.assert(h.lNext.oNext.sym===h),m.assert(h.oNext.sym.lNext===h),m.assert(h.org===a),h=h.oNext;while(h!==a.anEdge)}m.assert(a.prev===h&&null===
a.anEdge&&null===a.data);for(l=l=f;(h=l.next)!==f;l=h)m.assert(h.sym.next===l.sym),m.assert(h.sym!==h),m.assert(h.sym.sym===h),m.assert(null!==h.org),m.assert(null!==h.dst()),m.assert(h.lNext.oNext.sym===h),m.assert(h.oNext.sym.lNext===h);m.assert(h.sym.next===l.sym&&h.sym===this.eHeadSym&&h.sym.sym===h&&null===h.org&&null===h.dst()&&null===h.lFace&&null===h.rFace())}};m.GluVertex=function(a,l){this.next=a||this;this.prev=l||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=
this.s=0};m.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new m.PriorityQHeap};m.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};m.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;a=function(a){return function(f,g){return m.geom.vertLeq(a[f],a[g])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(m.DEBUG)for(var l=0+this.size_-1,a=0;a<
l;++a)m.assert(m.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};m.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var l=this.size_++;this.verts_[l]=a;return-(l+1)};m.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(m.geom.vertLeq(l,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&
null===this.verts_[this.order_[this.size_-1]]);return a};m.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var l=this.heap_.minimum();if(m.geom.vertLeq(l,a))return l}return a};m.PriorityQ.prototype.remove=function(a){if(0<=a)this.heap_.remove(a);else for(a=-(a+1),m.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-
1]];)--this.size_};m.PriorityQHeap=function(){this.heap_=m.PriorityQHeap.reallocNumeric_([0],m.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=m.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};m.PriorityQHeap.INIT_SIZE_=32;m.PriorityQHeap.reallocNumeric_=function(a,l){for(var f=Array(l),h=0;h<a.length;h++)f[h]=a[h];for(;h<l;h++)f[h]=0;return f};m.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);
this.initialized_=!0};m.PriorityQHeap.prototype.insert=function(a){var l=++this.size_;2*l>this.max_&&(this.max_*=2,this.handles_=m.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var f;0===this.freeList_?f=l:(f=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[f]=a;this.handles_[f]=l;this.heap_[l]=f;this.initialized_&&this.floatUp_(l);return f};m.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};m.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};
m.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,l=this.verts_,f=this.handles_,h=a[1],g=l[h];0<this.size_&&(a[1]=a[this.size_],f[a[1]]=1,l[h]=null,f[h]=this.freeList_,this.freeList_=h,0<--this.size_&&this.floatDown_(1));return g};m.PriorityQHeap.prototype.remove=function(a){var l=this.heap_,f=this.verts_,h=this.handles_;m.assert(1<=a&&a<=this.max_&&null!==f[a]);var g=h[a];l[g]=l[this.size_];h[l[g]]=g;g<=--this.size_&&(1>=g?this.floatDown_(g):m.geom.vertLeq(f[l[g>>1]],f[l[g]])?this.floatDown_(g):
this.floatUp_(g));f[a]=null;h[a]=this.freeList_;this.freeList_=a};m.PriorityQHeap.prototype.floatDown_=function(a){for(var l=this.heap_,f=this.verts_,h=this.handles_,g=l[a];;){var k=a<<1;k<this.size_&&m.geom.vertLeq(f[l[k+1]],f[l[k]])&&(k+=1);m.assert(k<=this.max_);var e=l[k];if(k>this.size_||m.geom.vertLeq(f[g],f[e])){l[a]=g;h[g]=a;break}l[a]=e;h[e]=a;a=k}};m.PriorityQHeap.prototype.floatUp_=function(a){for(var l=this.heap_,f=this.verts_,h=this.handles_,g=l[a];;){var k=a>>1,e=l[k];if(0===k||m.geom.vertLeq(f[e],
f[g])){l[a]=g;h[g]=a;break}l[a]=e;h[e]=a;a=k}};m.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};m.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};m.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return m})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["require","exports","../../../../../core/promiseUtils"],function(m,
a,l){Object.defineProperty(a,"__esModule",{value:!0});m=function(){function a(){this._resolver=null}a.prototype.isHeld=function(){return!!this._resolver};a.prototype.acquire=function(){var a=this;return this._resolver?this._resolver.promise.then(function(){return a.acquire()}):(this._resolver=l.createResolver(),l.resolve())};a.prototype.release=function(){var a=this._resolver;this._resolver=null;a.resolve()};return a}();a.default=m;a.withLock=function(a,h){return a.acquire().then(function(){return h()}).then(function(){return a.release()}).catch(function(f){a.release();
throw f;})}})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators".split(" "),function(m,a,l,f,h,g,k,e){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}l(d,
a);d.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};d.prototype.destroy=function(){};Object.defineProperty(d.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.tileScheme.spatialReference");return a&&a.toJSON()||null},enumerable:!0,configurable:!0});f([e.property({readOnly:!0})],d.prototype,"supportsTileUpdates",
null);f([e.property({constructOnly:!0})],d.prototype,"remoteClient",void 0);f([e.property({constructOnly:!0})],d.prototype,"service",void 0);f([e.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],d.prototype,"spatialReference",null);f([e.property({constructOnly:!0})],d.prototype,"tileInfo",void 0);f([e.property({constructOnly:!0})],d.prototype,"tileStore",void 0);return d=f([e.subclass()],d)}(e.declared(h,k,g));a.default=m})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("require exports ../../../../../core/screenUtils ../../../engine/webgl/CIMSymbolHelper ../../../engine/webgl/definitions ../../graphics/graphicsUtils".split(" "),
function(m,a,l,f,h,g){function k(a){if(!("visualVariables"in a&&a.hasVisualVariables("size")))return 0;a=a.getVisualVariablesForType("size");if(!a[0])return 0;a=a[0];if("stops"===a.transformationType)return a.stops.map(function(a){return a.size}).reduce(b,0);if("clamped-linear"===a.transformationType)return"number"===typeof a.maxSize?a.maxSize:a.maxSize.stops.map(function(a){return a.size}).reduce(b,0);if("real-world-size"===a.transformationType)return 30}function e(a,b){return null==a?b:a}function n(a,
b){if("simple-marker"===a.type){var c=Math.max(e(a.size,12),b);return d(a)+.707*c}if("picture-marker"===a.type){var k=Math.max(e(a.height,12),b),c=e(a.width,12)*(k/e(a.height,12))/2,k=k/2;return d(a)+Math.sqrt(c*c+k*k)}if("text"===a.type){g.getTextSymbolEstimatedSize(q,a,h.AVERAGE_GLYPH_MOSAIC_ITEM);var c=q[2]*(e(a.horizontalAlignment,"top")in p?1:.5),k=q[3]*(e(a.horizontalAlignment,"center")in t?1:.5),l;l=null==a.font?9:e(a.font.size,9);b=Math.max(l,b)/l;return d(a)+Math.sqrt(c*c+k*k)*b}if("simple-line"===
a.type)return Math.max(e(a.width,.75),b)/2;if("simple-fill"===a.type||"picture-fill"===a.type)return Math.max(null==a.outline?.75:e(a.outline.width,.75),b)/2;if("cim"===a.type)return a=f.CIMSymbolHelper.getEnvelope(a),Math.sqrt(a.width*a.width+a.height*a.height)}function d(a){var b=e(a.xoffset,0);a=e(a.yoffset,0);return Math.sqrt(b*b+a*a)}function b(a,b){return Math.max(a,b)}Object.defineProperty(a,"__esModule",{value:!0});var c={"simple-marker":1,"picture-marker":1,text:1,"simple-line":1,"simple-fill":1,
"picture-fill":1,cim:1};a.computePxBuffer=function(a){if("simple"!==a.type&&"class-breaks"!==a.type&&"unique-value"!==a.type)return 0;var d=a.getSymbols();return l.pt2px(d.map(function(b){var d=k(a);b=b.type in c?Math.min(Math.max(5,n(b,d)),75):0;return b}).reduce(b,0))};var q=[0,0,0,0],p={left:1,right:1},t={top:1,bottom:1,baseline:1}})},"*noref":1}});
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/generatorHelper ../../../../core/Accessor ../../../../core/asyncUtils ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/TileInfo ../../../../support/arcadeUtils ../../ViewState ./controllers ./processors ./support/TileStore ../../tiling/TileInfoView".split(" "),function(m,
a,l,f,h,g,k,e,n,d,b,c,q,p,t,u,w){Object.defineProperty(a,"__esModule",{value:!0});m=function(a){function k(){var b=null!==a&&a.apply(this,arguments)||this;b.controller=null;b.processor=null;b.remoteClient=null;b.serviceAndViewInfo=null;b.tileStore=null;b.viewState=null;return b}l(k,a);k.prototype.initialize=function(){var a=this;this.watch("updating",function(b){a.remoteClient.invoke("setUpdating",b)})};k.prototype.destroy=function(){this.controller&&this.controller.destroy();this.processor&&this.processor.destroy()};
Object.defineProperty(k.prototype,"updating",{get:function(){var a=this.controller,b=this.processor;return!a||!b||a.updating||b.updating||!1},enumerable:!0,configurable:!0});k.prototype.startup=function(a){var c=new w(b.fromJSON(a.tileInfo));this.serviceAndViewInfo=a;this.tileStore=new u.default(c)};k.prototype.configure=function(a){return e.safeCast(this._configure(a))};k.prototype.setViewState=function(a){a=q.fromJSON(a);this._set("viewState",a);this.tileStore.setViewState(a);this.controller&&this.controller.setViewState(a)};
k.prototype._configure=function(a){return h(this,void 0,void 0,function(){var b,c,d;return g(this,function(f){switch(f.label){case 0:return[4,n.all([e.safeCast(this._handleControllerConfig(a.controller)),e.safeCast(this._handleProcessorConfig(a.processor))])];case 1:b=f.sent();c=b[0];d=b[1];if(c||d)this.controller.processor=this.processor;return[2]}})})};k.prototype._handleControllerConfig=function(a){return h(this,void 0,void 0,function(){return g(this,function(b){return a?[2,this._createController(a)]:
[2,null]})})};k.prototype._handleProcessorConfig=function(a){return h(this,void 0,void 0,function(){var b,d;return g(this,function(e){if(!a)return[2,null];b=this._createProcessor(a);d="symbol"===a.type&&a.hasGeometryExpr;return[2,d?c.enableGeometryOperations().then(function(){return b}):b]})})};k.prototype._createController=function(a){return h(this,void 0,void 0,function(){var b,c,d,e,f,h;return g(this,function(g){switch(g.label){case 0:return b=this,c=b.remoteClient,d=b.tileStore,e=b.serviceAndViewInfo,
f={remoteClient:c,tileStore:d,serviceAndViewInfo:e},[4,p.createController(a,f)];case 1:return h=g.sent(),this.controller&&this.controller.destroy(),h.setViewState(this.viewState),this.controller=h,[2,h]}})})};k.prototype._createProcessor=function(a){return h(this,void 0,void 0,function(){var b,c,d,e,f,h;return g(this,function(g){switch(g.label){case 0:return b=this,c=b.remoteClient,d=b.tileStore,e=b.serviceAndViewInfo,f={remoteClient:c,tileStore:d,serviceAndViewInfo:e},[4,t.createProcessor(a.type,
f)];case 1:return h=g.sent(),this.processor&&this.processor.destroy(),h.configuration=a,this.processor=h,[2,h]}})})};f([d.property()],k.prototype,"controller",void 0);f([d.property()],k.prototype,"processor",void 0);f([d.property({dependsOn:["controller.updating","processor.updating"]})],k.prototype,"updating",null);f([d.property()],k.prototype,"viewState",void 0);return k=f([d.subclass()],k)}(d.declared(k));a.default=m});