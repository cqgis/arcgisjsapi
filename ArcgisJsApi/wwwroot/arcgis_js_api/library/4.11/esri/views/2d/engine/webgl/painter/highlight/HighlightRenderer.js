// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../definitions ./parameters ../../shaders/HighlightPrograms ../../../../../webgl/BufferObject ../../../../../webgl/programUtils ../../../../../webgl/VertexArrayObject".split(" "),function(g,h,d,f,k,m,l,n){Object.defineProperty(h,"__esModule",{value:!0});g=function(){function b(){this._height=this._width=void 0;this._resources=null}b.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources=null)};b.prototype.preBlur=function(a,c){a.bindTexture(c,d.TEXTURE_BINDING_HIGHLIGHT_0);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f.ALPHA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};b.prototype.finalBlur=function(a,c){a.bindTexture(c,d.TEXTURE_BINDING_HIGHLIGHT_0);
a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f.RGBA_TO_RGBA_CHANNEL_SELECTOR_MATRIX);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};b.prototype.renderHighlight=function(a,c,e){a.bindTexture(c,d.TEXTURE_BINDING_HIGHLIGHT_0);a.bindProgram(this._resources.highlightProgram);e.applyHighlightOptions(a,this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);
a.setBlendingEnabled(!0);a.setBlendFunction(1,771);a.drawArrays(5,0,4);a.bindVAO()};b.prototype._initialize=function(a,c,e){this._width=c;this._height=e;c=new m(a,34962,35044,(new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1])).buffer);e=new n(a,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!1},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!1}]},{geometry:c});var b=l.createProgram(a,k.highlight);a=l.createProgram(a,k.blur);
b.setUniform1i("u_texture",d.TEXTURE_BINDING_HIGHLIGHT_0);b.setUniform1i("u_shade",d.TEXTURE_BINDING_HIGHLIGHT_1);b.setUniform4fv("u_sigmas",f.SIGMAS);a.setUniform1i("u_texture",d.TEXTURE_BINDING_HIGHLIGHT_0);a.setUniform4fv("u_sigmas",f.SIGMAS);this._resources={quadGeometry:c,quadVAO:e,highlightProgram:b,blurProgram:a}};b.prototype.setup=function(a,c,b){this._resources?(this._width=c,this._height=b):this._initialize(a,c,b)};return b}();h.default=g});