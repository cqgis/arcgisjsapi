// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define(["require","exports","../../geometry/Point"],function(u,l,m){function q(b,a,c){var d={x:0,y:0};a&&(d.z=0);c&&(d.m=0);for(var f=0,e=b[0],g=0;g<b.length;g++){var h=b[g],k;a:if(h.length!==e.length)k=!1;else{for(k=0;k<h.length;k++)if(h[k]!==e[k]){k=!1;break a}k=!0}if(!1===k){k=r(e,h,a);var n=h,l=a,m=c,p={x:(e[0]+n[0])/2,y:(e[1]+n[1])/2};l&&(p.z=(e[2]+n[2])/2);l&&m?p.m=(e[3]+n[3])/2:m&&(p.m=(e[2]+n[2])/2);e=p;e.x*=k;e.y*=k;d.x+=e.x;d.y+=e.y;a&&(e.z*=k,d.z+=e.z);c&&(e.m*=k,d.m+=e.m);f+=k;e=h}}0<
f?(d.x/=f,d.y/=f,a&&(d.z/=f),c&&(d.m/=f)):(d.x=b[0][0],d.y=b[0][1],a&&(d.z=b[0][2]),c&&a?d.m=b[0][3]:c&&(d.m=b[0][2]));return d}function r(b,a,c){var d=a[0]-b[0];b=a[1]-b[1];return c?(a=a[2]-a[2],Math.sqrt(d*d+b*b+a*a)):Math.sqrt(d*d+b*b)}function t(b,a){var c=a[0],d=a[1],f=a[2],c=c*c+d*d+f*f;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b}Object.defineProperty(l,"__esModule",{value:!0});l.centroidPolyline=function(b){for(var a={x:0,y:0,spatialReference:b.spatialReference.toJSON()},
c={x:0,y:0,spatialReference:b.spatialReference.toJSON()},d=0,f=0,e=0;e<b.paths.length;e++)if(0!==b.paths[e].length){var g;g=b.paths[e];var h=!0===b.hasZ;if(1>=g.length)g=0;else{for(var k=0,l=1;l<g.length;l++)k+=r(g[l-1],g[l],h);g=k}0===g?(h=q(b.paths[e],!0===b.hasZ,!0===b.hasM),a.x+=h.x,a.y+=h.y,!0===b.hasZ&&(a.z+=h.z),!0===b.hasM&&(a.m+=h.m),++d):(h=q(b.paths[e],!0===b.hasZ,!0===b.hasM),c.x+=h.x*g,c.y+=h.y*g,!0===b.hasZ&&(c.z+=h.z*g),!0===b.hasM&&(c.m+=h.m*g),f+=g)}return 0<f?(c.x/=f,c.y/=f,!0===
b.hasZ&&(c.z/=f),!0===b.hasM&&(c.m/=f),new m(c)):0<d?(a.x/=d,a.y/=d,!0===b.hasZ&&(c.z/=d),!0===b.hasM&&(a.m/=d),new m(a)):null};l.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var a=0,c=0,d=0,f=0,e=0;e<b.points.length;e++){var g=b.getPoint(e);!0===g.hasZ&&(d+=g.z);!0===g.hasM&&(f+=g.m);a+=g.x;c+=g.y;f+=g.m}a={x:a/b.points.length,y:c/b.points.length,spatialReference:null};a.spatialReference=b.spatialReference.toJSON();!0===b.hasZ&&(a.z=d/b.points.length);!0===b.hasM&&(a.m=f/
b.points.length);return new m(a)};l.angle2D=function(b,a){var c=b.x;b=b.y;var d=a.x;a=a.y;var f=c*c+b*b;0<f&&(f=1/Math.sqrt(f));var e=d*d+a*a;0<e&&(e=1/Math.sqrt(e));c=(c*d+b*a)*f*e;return 1<c?0:-1>c?Math.PI:180*Math.acos(c)/Math.PI};l.angleBetween2D=function(b,a,c){var d=b.x-a.x;b=b.y-a.y;var f=c.x-a.x;a=c.y-a.y;c=Math.sqrt(d*d+b*b);var e=Math.sqrt(f*f+a*a);return 180*Math.acos(d/c*(f/e)+b/c*(a/e))/Math.PI};l.angleBetween3D=function(b,a,c){var d=b.x-a.x,f=b.y-a.y;b=b.z-a.z;var e=c.x-a.x,g=c.y-a.y;
a=c.z-a.z;c=Math.sqrt(d*d+f*f+b*b);var h=Math.sqrt(e*e+g*g+a*a);return 180*Math.acos(d/c*(e/h)+f/c*(g/h)+b/c*(a/h))/Math.PI};l.angle3D=function(b,a){b=t([b.x,b.y,b.z],[b.x,b.y,b.z]);a=t([a.x,a.y,a.z],[a.x,a.y,a.z]);a=b[0]*a[0]+b[1]*a[1]+b[2]*a[2];return 1<a?0:-1>a?Math.PI:180*Math.acos(a)/Math.PI}});