// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/promise/all dojo/Deferred dojo/_base/kernel ../ItemCards/SubResourceCard/index ../Management/Capsid".split(" "),function(A,B,C,D,I,J,K){return function(f){function b(e){if(a[e])return a[e].exports;var d=a[e]={i:e,l:!1,exports:{}};return f[e].call(d.exports,d,d.exports,b),d.l=!0,d.exports}var a={};return b.m=f,b.c=a,b.d=function(a,d,h){b.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},b.r=function(a){"undefined"!=typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,d){if((1&d&&(a=b(a)),8&d)||4&d&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(b.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var g in a)b.d(e,g,function(b){return a[b]}.bind(null,g));return e},b.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};
return b.d(d,"a",d),d},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=389)}({0:function(f,b,a){function e(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}a.d(b,"b",function(){return e});a.d(b,"a",function(){return h});var d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},
h=function(){return(h=Object.assign||function(a){for(var b,c=1,g=arguments.length;c<g;c++)for(var d in b=arguments[c])Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a}).apply(this,arguments)}},1:function(f,b){f.exports=A},10:function(f,b){f.exports=C},11:function(f,b,a){function e(a){return a.reduce(function(a,c){return c&&c.relatedItems?a.concat(c.relatedItems.map(function(a){return a})):a},[])}function d(a,c,b){return a(c,{query:h.a({f:"json"},b)}).then(function(a){return a.data})}
a.d(b,"i",function(){return l});a.d(b,"f",function(){return c});a.d(b,"c",function(){return n});a.d(b,"d",function(){return m});a.d(b,"g",function(){return p});a.d(b,"h",function(){return u});a.d(b,"a",function(){return q});a.d(b,"b",function(){return y});a.d(b,"j",function(){return t});a.d(b,"k",function(){return k});a.d(b,"l",function(){return r});a.d(b,"e",function(){return v});a.d(b,"m",function(){return d});var h=a(0),g=a(10),l=function(a,c,b){return d(a,c.restUrl+"/portals/self",{culture:b,
default:!0})},c=function(a,c,b){return d(a,c.restUrl+"/content/items/"+b+"/data")},n=function(a,c,b){return d(a,c.restUrl+"/community/groups",{q:b})},m=function(a,c,b){return d(a,c.restUrl+"/community/groups/"+b+"/categorySchema")},p=function(a,c,b){return d(a,c.restUrl+"/portals/"+(b||c.id)+"/categorySchema")},u=function(a,c,b){return d(a,location.protocol+"//"+c.portalHostname+"/sharing/rest/portals/"+(b||c.id))},q=function(a,c,b){return a(c.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+
c.id+" AND access:public",num:100,start:b||1,sortField:"title",sortOrder:"asc"}}).then(function(b){return b.data.total>b.data.start+b.data.num?q(a,c,b.data.start+b.data.num).then(function(a){return h.a({},a,{data:h.a({},a.data,{results:b.data.results.concat(a.data.results)})})}):b})},y=function(a,c,b,k){return a(c.restUrl+"/community/users/"+b+"/provisionedListings",{query:{f:"json",num:100,start:k||1}}).then(function(k){var l=g(k.data.provisionedListings.filter(function(a){return!!a.itemId}).map(function(b){return d(a,
c.restUrl+"/content/items/"+b.itemId)})),r=k.data.provisionedListings.map(function(b){return d(a,c.restUrl+"/content/items/"+(b.id||b.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(a){return a},function(a){})});return k.data.total>k.data.start+k.data.num?y(a,c,b,k.data.start+k.data.num).then(function(a){return g([l].concat(r)).then(function(c){return c[0].results.concat(e(c.slice(1))).concat(a)})}):g([l].concat(r)).then(function(a){return a[0].concat(e(a.slice(1)))})})},
t=function(a,c,b){return d(a,c.restUrl+"/community/users/"+(b||c.user.username))},k=function(a,c,b){return d(a,c.restUrl+"/content/users/"+(b||c.user.username),{num:1})},r=function(a,c,b){return d(a,c.restUrl+"/content/groups/"+b)},v=function(a,c,b){return d(a,c.restUrl+"/community/groups",b)}},116:function(f,b,a){a.d(b,"a",function(){return d});f=a(15);b=a(27);var e=a(69);a=a(70);var d=Object(f.a)(e.a,a.a,b.b)},117:function(f,b,a){a.d(b,"b",function(){return e});a.d(b,"a",function(){return d});f=
a(5);f=Object(f.a)(function(a,b,d){return b?d.concat(["("+a+":"+("[000000"+b.start+" TO 000000"+b.end+"]")+")"]):d});var e=f("modified"),d=f("uploaded")},118:function(f,b,a){a.d(b,"b",function(){return e});a.d(b,"a",function(){return d});f=a(5);var e=Object(f.a)(function(a,b){return a&&(a=Object.keys(a),0<a.length)?b.concat(["tags:("+a.join(" AND ")+")"]):b}),d=Object(f.a)(function(a,b){return 2<a.length?b.concat(["tags:("+a+"* OR "+a+")"]):b})},119:function(f,b,a){function e(a){return"string"==typeof a?
-1<["myContent","myFavorites","myGroups","myOrganization","livingAtlas"].indexOf(a):!!a.filters&&-1<a.filters.indexOf("tags")}a.d(b,"a",function(){return e})},12:function(f,b){f.exports=D},15:function(f,b,a){function e(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(b){return a.reduceRight(function(a,b){return b(a)},b)}}a.d(b,"a",function(){return e})},159:function(f,b,a){a.d(b,"a",function(){return e});f=a(5);var e=Object(f.a)(function(a,b){return a?b.concat(["(group:"+
a.id+")"]):b})},160:function(f,b,a){a.d(b,"a",function(){return e});f=a(5);var e=Object(f.a)(function(a,b,g){if(a)switch(a.value){case "authoritative":return b&&b.orgId&&!b.portal.isPortal?g.concat(["((contentstatus:org_authoritative orgid:"+b.orgId+") OR contentstatus:public_authoritative)"]):b&&b.orgId&&b.portal.isPortal?g.concat(["((contentstatus:org_authoritative) OR contentstatus:public_authoritative)"]):g.concat(["(contentstatus:public_authoritative)"]);case "deprecated":return g.concat(["(contentstatus:deprecated)"])}return g})},
161:function(f,b,a){a.d(b,"a",function(){return e});f=a(5);var e=Object(f.a)(function(a,b){return a?b.concat(["(access:"+a.value+")"]):b})},162:function(f,b,a){a.d(b,"a",function(){return h});var e=a(12),d=a(11),h=function(a,b,c,f){function g(g){v=g.categorySchema[0].source.split(".")[1];Object(d.c)(a,b,c.contentCategorySetsGroupQuery).then(l,k);Object(d.m)(a,b.restUrl+"/portals/regions",{culture:f}).then(y,k)}function l(c){c.results[0]?Object(d.m)(a,b.restUrl+"/content/groups/"+c.results[0].id+"/search",
{q:"typekeywords: "+v}).then(n,k):k("The content category sets group could not be found.")}function n(c){1===c.results.length&&c.results[0]?Object(d.f)(a,b,c.results[0].id).then(h,k):k("The item containing the living atlas categories could not be determined.")}function h(a){x=a.categorySchema[0];c.isPortal&&w?t([x]):w&&t([x,w])}function y(a){w={categories:a.map(function(a){return{displayName:a.localizedName,title:a.region}}).sort(function(a,b){return"wo"===a.title.toLowerCase()?-1:a.displayName.localeCompare(b.displayName)}),
description:"2.0",displayName:"Regions",title:"region"};c.isPortal&&x?t([x]):x&&t([x,w])}function t(a){z.resolve({schema:a,id:r})}function k(a){z.reject(a)}void 0===f&&(f="en");var r,v,x,w,z=new e;return Object(d.c)(a,b,c.livingAtlasGroupQuery).then(function(c){c.results[0]&&c.results[0].id?(r=c.results[0].id,Object(d.d)(a,b,r).then(g,k)):k("The living atlas group could not be found.")},k),z}},18:function(f,b,a){function e(a){return!!l(a)||!!c(a)}function d(a,b){return a.filter(function(a){return a.name===
b})[0]}function h(a,b){return!!d(a,b)}a.d(b,"a",function(){return g});a.d(b,"c",function(){return l});a.d(b,"d",function(){return c});a.d(b,"f",function(){return e});a.d(b,"b",function(){return d});a.d(b,"e",function(){return h});f=a(5);var g=function(a){return a.filters?a.filters.filter(function(a){return"object"==typeof a&&("group"===a.type||"org"===a.type)}):[]};f=Object(f.a)(function(a,b){if(b.filters)return b.filters.reduce(function(b,c){return"object"==typeof c&&c.type===a?c:b},void 0)});var l=
f("group"),c=f("org")},21:function(f,b,a){function e(a){return 0===Object.keys(a).length&&a.constructor===Object}function d(a,b){return c.apply(null,arguments)}function h(a,b){return n.apply(null,arguments)}a.d(b,"a",function(){return e});a.d(b,"d",function(){return l});a.d(b,"b",function(){return d});a.d(b,"c",function(){return h});var g=a(0);f=a(5);var l=Object(f.a)(function(a,b){b=g.a({},b);return delete b[a],b}),c=Object(f.a)(function(a,b){return Object.keys(b).reduce(function(c,g){return c[g]=
a(b[g],g,b),c},{})}),n=Object(f.a)(function(a,b){return Object.keys(b).reduce(function(c,g){return a(b[g],g,b)&&(c[g]=b[g]),c},{})})},23:function(f,b,a){a.d(b,"a",function(){return n});a.d(b,"b",function(){return m});var e=a(15);f=a(21);var d=a(34),h=a(33),g=a(32),l=a(31),c=a(30),n=function(a,b,f){return Object(e.a)(Object(c.a)(a),Object(l.a)(a),Object(g.a)(b),h.a,d.a)(f)},m=Object(e.a)(Object(f.d)("patchedDescription"),Object(f.d)("thumbURI"),Object(f.d)("iconURI"),Object(f.d)("displayName"),Object(f.d)("badges"))},
27:function(f,b,a){a.d(b,"a",function(){return d});a.d(b,"b",function(){return h});var e=a(0),d=function(a){return a.urlKey?location.protocol+"//"+a.urlKey+"."+a.customBaseUrl:location.protocol+"//"+a.portalHostname},h=function(a){return e.a({},a,{baseUrl:d(a)})}},270:function(f,b){f.exports=K},28:function(f,b,a){function e(a){var b=Object(d.b)(a.settings.config.customSections,a.parameters.section);return b&&b.portal?Object(h.b)(b.portal):a.settings.utils.portal}a.d(b,"a",function(){return e});var d=
a(18),h=a(27)},29:function(f,b,a){a.d(b,"a",function(){return l});a.d(b,"c",function(){return c});a.d(b,"b",function(){return n});a.d(b,"d",function(){return m});a.d(b,"h",function(){return p});a.d(b,"i",function(){return u});a.d(b,"j",function(){return q});a.d(b,"e",function(){return y});a.d(b,"g",function(){return t});a.d(b,"f",function(){return k});a.d(b,"l",function(){return r});a.d(b,"k",function(){return x});a.d(b,"m",function(){return w});var e=a(10),d=a(12),h=a(11),g=a(6),l="ADD_TO_FAVORITES",
c="ADD_TO_FAVORITES_SUCCESS",n="ADD_TO_FAVORITES_FAIL",m="LOADING_USER_INFO",p="UPDATE_GROUP_CATEGORIES",u="UPDATE_USER_INFO",q="UPDATE_USER_INFO_FAILED",y="REMOVE_FROM_FAVORITES",t="REMOVE_FROM_FAVORITES_SUCCESS",k="REMOVE_FROM_FAVORITES_FAIL",r=function(){return function(a,b){var c=b();b=c.parameters.filter.group;var k=c.results.user.groupCategories;if("loaded"===c.results.user.status)return b&&!k[b.id]?a(v(b.id)):(new d).resolve();if("failed"===c.results.user.status)return(new d).reject();a({type:m});
k=c.settings.utils;c=k.request;k=k.portal;return e([Object(h.j)(c,k).then(function(a){return a.groups.map(function(a){return{id:a.id,title:a.title}})}),Object(h.k)(c,k).then(function(a){return a.folders.map(function(a){return{id:a.id,title:a.title}})}),Object(h.l)(c,k,k.user.favGroupId).then(function(a){return a.items.reduce(function(a,b){return a[b.id]=!0,a},{})})].concat(b?[a(v(b.id))]:[])).then(function(b){a({type:u,payload:{groups:b[0],folders:b[1],favorites:b[2]}})},function(b){console.error(b);
a({type:q})})}},v=function(a){return function(b,c){c=c().settings.utils;return Object(h.d)(c.request,c.portal,a).then(function(c){b({type:p,payload:{id:a,categorySchema:c.categorySchema}})})}},x=function(a){return function(b,k){k=k();var g=k.settings.utils.portal,r=g.restUrl+"/content/items/"+a.id+"/share",g={f:"json",everyone:a.access&&"public"===a.access||a.sharing&&a.sharing.access&&"public"===a.sharing.access,org:a.access&&"org"===a.access||a.sharing&&a.sharing.access&&"org"===a.sharing.access||
!1,groups:[g.user.favGroupId],items:[a.id]};b({type:l,payload:a});k.settings.utils.request(r,{method:"post",query:g}).then(function(k){b({type:c,payload:a})},function(c){console.error(c);b({type:n,payload:a})})}},w=function(a){return function(b,c){var r=c(),d=r.settings.utils.portal,f=d.user.favGroupId,e=d.restUrl+"/content/items/"+a.id+"/unshare",l={f:"json",everyone:!1,org:!1,groups:[f],items:[a.id]};b({type:y,payload:a});r.settings.utils.request(e,{method:"post",query:l}).then(function(k){function e(){b({type:t,
payload:a})}"myFavorites"===(r=c()).parameters.section?function L(){r.settings.utils.request(d.restUrl+"/search",{query:{f:"json",q:"(id:"+a.id+") (group:"+f+")"},method:"get"}).then(function(a){0<a.data.total?setTimeout(function(){L()},250):(e(),b(Object(g.i)()))},function(a){console.error(a);e()})}():e()},function(c){b({type:k,payload:a})})}}},3:function(f,b){f.exports=B},30:function(f,b,a){a.d(b,"a",function(){return d});var e=a(0);f=a(5);var d=Object(f.a)(function(a,b){return e.a({},b,{thumbURI:function(a,
b){var c=a.baseUrl+"/home/js/arcgisonline/css/images/default_thumb.png";return b.thumbnail&&(c=a.restUrl+"/content/items/"+b.id+"/info/"+b.thumbnail+(a.credential?"?token\x3d"+a.credential.token:"")),c}(a,b)})})},31:function(f,b,a){a.d(b,"a",function(){return d});var e=a(0);f=a(5);var d=Object(f.a)(function(a,b){return e.a({},b,{patchedDescription:function(a,b){return b.description?b.description.replace(/src=('|")js\/jsapi\/esri\//g,function(b){return"src\x3d"+('"'===b[4]?'"':"'")+a.baseUrl+"/home/js/jsapi/esri/"}):
void 0}(a,b)})})},32:function(f,b,a){a.d(b,"a",function(){return d});var e=a(0);f=a(5);var d=Object(f.a)(function(a,b){return e.a({},b,{iconURI:function(a,b,d){var c;b=b&&b.toLowerCase();var g=!1,f=!1,e=!1,l=!1;if(0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b){var t=-1<d.indexOf("Hosted Service");"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(l=-1<d.indexOf("Table"),g=-1<d.indexOf("Route Layer"),f=-1<d.indexOf("Markup"),c=(e=
-1!==d.indexOf("Spatiotemporal"))&&l?"spatiotemporaltable":l?"table":g?"routelayer":f?"markup":e?"spatiotemporal":t?"featureshosted":"features"):c="map service"===b||"wms"===b||"wmts"===b?t||-1<d.indexOf("Tiled")||"wmts"===b?"maptiles":"mapimages":"scene service"===b?-1<d.indexOf("Line")?"sceneweblayerline":-1<d.indexOf("3DObject")?"sceneweblayermultipatch":-1<d.indexOf("Point")?"sceneweblayerpoint":-1<d.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<d.indexOf("PointCloud")?"sceneweblayerpointcloud":
-1<d.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===b?-1<d.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"geoprocessing service"===b&&-1<d.indexOf("Web Tool")?"tool":"layers"}else c="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<d.indexOf("ViewingMode-Local")?"webscenelocal":
"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<d.indexOf("ArcGIS Pro")||"explorer map"===b&&-1<d.indexOf("Explorer Document")?
"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b||"netcdf"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===
b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"vector tile package"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&-1<d.indexOf("Explorer Mapping Application")||-1<d.indexOf("Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===
b||"raster function template"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"hub initiative"===b?"hubinitiative":"hub page"===b?"hubpage":"hub site application"===
b?"hubsite":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"maps";return a+"/"+c+"16.png"}(a,b.type,b.typeKeywords?b.typeKeywords:[])})})},33:function(f,b,a){a.d(b,"a",function(){return d});var e=a(0),d=function(a){return e.a({},a,{displayName:function(a){var b=a.type;a=a.typeKeywords||[];var c=b;return"Feature Service"===
b||"Feature Collection"===b?c=-1<a.indexOf("Table")?"Table":-1<a.indexOf("Route Layer")?"Route Layer":-1<a.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===b?c=-1<a.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===b?c="Scene Layer":"Scene Package"===b?c="Scene Layer Package":"Stream Service"===b?c="Feature Layer":"Geocoding Service"===b?c="Locator":"Microsoft Powerpoint"===b?c="Microsoft PowerPoint":"GeoJson"===b?c="GeoJSON":"Globe Service"===b?c="Globe Layer":
"Vector Tile Service"===b?c="Tile Layer":"netCDF"===b?c="NetCDF":"Map Service"===b?c=-1===a.indexOf("Spatiotemporal")&&(-1<a.indexOf("Hosted Service")||-1<a.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":b&&-1<b.toLowerCase().indexOf("add in")?c=b.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===b&&(c="Big Data File Share"),c}(a)})}},34:function(f,b,a){a.d(b,"a",function(){return d});var e=a(0),d=function(a){return e.a({},a,{badges:function(a){var b=[],c=a.typeKeywords?a.typeKeywords:
[];return a.contentStatus&&("org_authoritative"===a.contentStatus||"public_authoritative"===a.contentStatus?b.push("authoritative"):"deprecated"===a.contentStatus&&b.push("deprecated")),a.origin&&b.push("collaboration"),a.groupDesignations&&-1<a.groupDesignations.indexOf("livingatlas")&&b.push("livingAtlas"),-1<c.indexOf("Requires Credits")?b.push("premium"):-1<c.indexOf("Requires Subscription")&&b.push("subscriber"),b}(a)})}},35:function(f,b,a){a.d(b,"e",function(){return d});a.d(b,"h",function(){return h});
a.d(b,"f",function(){return g});a.d(b,"g",function(){return l});a.d(b,"b",function(){return c});a.d(b,"c",function(){return n});a.d(b,"a",function(){return m});a.d(b,"d",function(){return p});a.d(b,"j",function(){return u});a.d(b,"i",function(){return q});var e=a(23),d="SELECT_ITEM",h="SELECT_ITEM_SINGLE",g="SELECT_ITEM_ASYNC",l="SELECT_ITEM_ASYNC_FAILED",c="DESELECT_ITEM",n="SELECT_ALL",m="DESELECT_ALL",p="SELECT_ALL_FROM_QUERY_SUCCESS",u=function(a){return function(b,c){var k=c();k.settings.config.asynchronousItemSelect?
(b({type:g,payload:a}),(c=k.settings.config.onSelect([Object(e.b)(a)]))&&c.then?c.then(function(){k.settings.config.singleItemSelect?b({type:h,payload:a}):b({type:d,payload:a})},function(){b({type:l,payload:a})}):console.error("If asynchronous item selection is enabled, the onSelect function in the item browser config must return a dojo deferred.")):k.settings.config.singleItemSelect?(b({type:h,payload:a}),k.settings.config.onSelect([Object(e.b)(a)])):(b({type:d,payload:a}),k.settings.config.onSelect([Object(e.b)(a)]))}},
q=function(a){return function(b,k){k=k();b({type:c,payload:a});k.settings.config.onDeselect([Object(e.b)(a)])}}},36:function(f,b,a){a.d(b,"b",function(){return e});a.d(b,"a",function(){return d});var e={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',
webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',
featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',
scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application"))',webApps:'(type:("Web Mapping Application" OR "Dashboard"))',mobileApps:'(type:"Mobile Application")',
desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration") -type:"KML")',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',
geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',
documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook")',bigDataFileShares:'type:("Big Data File Share")',rasterFunctionTemplates:'type:("Raster function template")'},d="Web Map;CityEngine Web Scene;Web Scene;360 VR Experience;Pro Map;Feature Service;Map Service;Image Service;KML;KML Collection;WFS;WMTS;Feature Collection;Feature Collection Template;Vector Tile Service;Scene Service;Relational Database Connection;Web Mapping Application;Mobile Application;Code Attachment;Operations Dashboard Add In;Native Application;Native Application Template;Native Application Installer;Workforce Project;Form;Insights Workbook;Insights Model;Insights Page;Dashboard;Hub Initiative;Hub Site Application;Hub Page;AppBuilder Widget Package;Symbol Set;Color Set;Shapefile;File Geodatabase;CSV;CAD Drawing;Service Definition;Microsoft Word;Microsoft Powerpoint;Microsoft Excel;PDF;Image;Visio Document;iWork Keynote;iWork Pages;iWork Numbers;Report Template;Statistical Data Collection;Map Document;Map Package;Mobile Basemap Package;Mobile Map Package;Tile Package;Vector Tile Package;Project Package;Task File;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package;Pro Map;Layout;Project Template;Layer;Layer Package;Explorer Layer;Scene Package;Image Collection;Desktop Style;Geoprocessing Package;Geoprocessing Package (Pro version);Geoprocessing Sample;Locator Package;Rule Package;Raster function template;ArcGIS Pro Configuration;Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In;ArcGIS Pro Add In;Geometry Service;Geocoding Service;Network Analysis Service;Geoprocessing Service;Workflow Manager Service;Big Data File Share".split(";")},
389:function(f,b,a){a.r(b);var e=a(0),d=a(3),h=a(1),g=a(28),l=a(18),c=a(68),n=a.n(c);f=a(270);f=a.n(f);var m=a(45),p=a(29),u=f.a;a=function(a){function b(b){b=a.call(this,b)||this;return b.state={lastOpenedId:""},b.handleSublayerCardChange=b.handleSublayerCardChange.bind(b),b}return e.b(b,a),b.prototype.render=function(a){var b=this,f=Object(g.a)(this.props.stateTree),v=Object(l.b)(this.props.stateTree.settings.config.customSections,this.props.stateTree.parameters.section),t=!v||!!v&&!v.disableSubResources,
v=this.props.stateTree.ui.pagination.displayItems.map(function(d){var k="public_authoritative"===d.contentStatus&&b.props.stateTree.results.allOrganizations[d.orgId]?b.props.stateTree.results.allOrganizations[d.orgId]:void 0;if(t&&b.props.stateTree.settings.config.showSubResources&&b.props.stateTree.settings.config.showSubResources[d.type]){var r=e.a({},b.props.stateTree.settings.config.showSubResources[d.type],{disabledSubResources:b.props.stateTree.settings.config.disabledSubResources}),l=!window.matchMedia("(max-width: 860px)").matches;
return a(u,{key:d.id+"-card",enhancer:Object(h.applyMiddleware)(h.thunk),onChange:b.handleSublayerCardChange,reducer:c.reducer,render:function(a){return a(n.a,{key:d.id,item:d,organization:k,portal:f,mainAction:b.props.stateTree.settings.config.onSelect,mainActionTitle:b.props.stateTree.settings.config.mainActionTitle,customActions:b.props.stateTree.settings.config.customActions,sortField:b.props.stateTree.parameters.sort.field})},state:b.props.cardStates[d.id]?e.a({},b.props.cardStates[d.id],{favorites:b.props.stateTree.results.user.favorites,
loadingItems:b.props.stateTree.results.loadingItems,ui:e.a({},b.props.cardStates[d.id].ui,{lastOpenedId:b.state.lastOpenedId})}):e.a({},c.initialState,{config:e.a({},c.initialState.config,r),ui:e.a({},c.initialState.ui,{filtersVisible:l}),item:d,organization:k,portal:Object(g.a)(b.props.stateTree),request:b.props.stateTree.settings.utils.request,addToFavorites:b.props.addToFavorites,removeFromFavorites:b.props.removeFromFavorites,favorites:b.props.stateTree.results.user.favorites})})}return a(u,{key:d.id+
"-card",enhancer:Object(h.applyMiddleware)(h.thunk),onChange:b.handleSublayerCardChange,reducer:c.reducer,render:function(a){return a(n.a,{key:d.id,item:d,organization:k,portal:f,mainAction:b.props.stateTree.settings.config.onSelect,mainActionTitle:b.props.stateTree.settings.config.mainActionTitle,customActions:b.props.stateTree.settings.config.customActions,sortField:b.props.stateTree.parameters.sort.field})},state:b.props.cardStates[d.id]?e.a({},b.props.cardStates[d.id],{favorites:b.props.stateTree.results.user.favorites,
loadingItems:b.props.stateTree.results.loadingItems,ui:e.a({},b.props.cardStates[d.id].ui,{lastOpenedId:b.state.lastOpenedId})}):e.a({},c.initialState,{item:d,organization:k,portal:Object(g.a)(b.props.stateTree),request:b.props.stateTree.settings.utils.request,addToFavorites:b.props.addToFavorites,removeFromFavorites:b.props.removeFromFavorites,favorites:b.props.stateTree.results.user.favorites,ui:e.a({},c.initialState.ui,{resourceSectionVisible:!1,itemSelectable:!0,activeTab:"details"})})})});return 0<
v.length?a("div",{key:this.props.key,class:"ib-ex-results__item-list"},v):a("div",{key:this.props.key,class:"ib-ex-results__item-list"},a("div",{class:"ib-ex-results__no-items-container"},a("div",{class:"ib-ex-results__no-items-centered"},a("svg",{viewBox:"0 0 256 256",width:"256"},a("path",{fill:"#ccc",d:"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"})),
a("p",{class:"ib-ex-results__no-items-text"},d.results.noItemsFound))))},b.prototype.handleSublayerCardChange=function(a,b){"CLOSE_OVERLAY"===a.type&&this.setState({lastOpenedId:b.item.id});this.props.updateSublayerCardState(b)},b}(h.Component);b.default=Object(h.connect)(function(a){return{stateTree:a,cardStates:a.ui.expanded.sublayerCards.cardStates}},function(a){return{updateSublayerCardState:function(b){return a({type:m.f,payload:b})},addToFavorites:function(b){a(Object(p.k)(b))},removeFromFavorites:function(b){a(Object(p.m)(b))}}})(a)},
41:function(f,b,a){function e(a,b){a=["",{method:"get",query:b.settings.config.addRequestParameters?g.a({f:"json",q:Object(c.b)(b),num:a.num?a.num:b.settings.config.resultsPerQuery,sortOrder:b.parameters.sort.order,start:a.start?a.start:1},b.settings.config.addRequestParameters()):{f:"json",q:Object(c.b)(b),num:a.num?a.num:b.settings.config.resultsPerQuery,sortOrder:b.parameters.sort.order,start:a.start?a.start:1}}];return Object(l.a)(u(b),q(b),y(b))(a)}function d(a,b){b=["",{method:"get",query:{f:"json",
q:Object(c.a)(a),num:0,countFields:b.join(", "),countSize:200}}];return p(a)(b)}function h(a,b){b=["",{method:"get",query:{f:"json",q:Object(c.c)(a,b),num:0,countFields:"tags",countSize:200}}];return p(a)(b)}a.d(b,"b",function(){return e});a.d(b,"a",function(){return d});a.d(b,"c",function(){return h});var g=a(0),l=a(15);f=a(5);var c=a(53),n=a(28),m=a(18),p=function(a){return Object(l.a)(y(a),t(a))},u=Object(f.a)(function(a,b){var c=b[0];b=b[1];a=a.parameters.sort.field;return"relevance"!==a?[c,g.a({},
b,{query:g.a({},b.query,{sortField:a})})]:[c,b]}),q=Object(f.a)(function(a,b){var c=b[0];b=b[1];return a.parameters.filter.searchMapArea?(a=a.parameters.extent.area,[c,g.a({},b,{query:g.a({},b.query,{bbox:a.minx+","+a.miny+","+a.maxx+","+a.maxy})})]):[c,b]}),y=Object(f.a)(function(a,b){b[0];b=b[1];var c=a.parameters,d=c.section,c=c.filter,f=Object(n.a)(a),e=f.restUrl+"/search";if("myGroups"===d&&c.group)e=f.restUrl+"/content/groups/"+c.group.id+"/search",c.groupCategories&&(e=e+"?categories\x3d"+
encodeURIComponent(JSON.stringify([c.groupCategories.value])));else if("livingAtlas"===d&&a.results.livingAtlas.groupId)e=f.restUrl+"/content/groups/"+a.results.livingAtlas.groupId+"/search",c.livingAtlasCategories?(e=e+"?categories\x3d"+encodeURIComponent(JSON.stringify([c.livingAtlasCategories.value])),c.livingAtlasRegion&&(e=e+"\x26categories\x3d"+encodeURIComponent(JSON.stringify([c.livingAtlasRegion.value])))):c.livingAtlasRegion&&(e=e+"?categories\x3d"+encodeURIComponent(JSON.stringify([c.livingAtlasRegion.value])));
else if(!c.orgCategories||"myOrganization"!==d&&"myContent"!==d){if(a=Object(m.b)(a.settings.config.customSections,d))Object(m.d)(a)&&c.orgCategories&&(e=e+"?categories\x3d"+encodeURIComponent(JSON.stringify([c.orgCategories.value]))),(a=Object(m.c)(a))&&(e=f.restUrl+"/content/groups/"+a.id+"/search",c.groupCategories&&(e=e+"?categories\x3d"+encodeURIComponent(JSON.stringify([c.groupCategories.value]))))}else e=e+"?categories\x3d"+encodeURIComponent(JSON.stringify([c.orgCategories.value]));return[e,
b]}),t=Object(f.a)(function(a,b){var c=b[0];b=b[1];var d=a.parameters.section,e=Object(m.b)(a.settings.config.customSections,d);return"myGroups"===d&&a.parameters.filter.group||"livingAtlas"===d&&a.results.livingAtlas.groupId||e&&Object(m.c)(e)?[c,g.a({},b,{query:g.a({},b.query,{countFields:b.query.countFields?b.query.countFields.replace("categories","groupcategories"):void 0})})]:[c,b]})},42:function(f,b,a){function e(a,b){return n("children","value",a,b)}function d(a,b){return m("children","value",
a,b)}function h(a,b){return function r(a,b,c,d){var e,f=c[a];return f&&0!==f.length?q.a({},c,(e={},e[a]=f.reduce(function(c,e){return-1!==d.indexOf(e[b])&&c.push(r(a,b,e,d)),c},[]),e)):q.a({},c)}("children","value",a,b)}function g(a){return function(a,b){var c,d=b[a];return d?q.a({},b,((c={})[a]=function w(b){return 0===b.length?[]:1!==b.length||b[0][a]?1<b.length?b.reduce(function(b,c){var d;return c[a]?(b.push(q.a({},c,((d={})[a]=w(c[a]),d))),b):(b.push(c),b)},[]):w(b[0][a]):b}(d),c)):b}("children",
a)}function l(a,b){return p("children",a,b)}function c(a,b){return function r(a,b,c){var d=b[a];d&&d.forEach(function(b){return r(a,b,c)});c(b)}("children",a,b)}function n(a,b,c,d){var e=c[a];return c[b]===d?c:e?e.reduce(function(c,e){return c||n(a,b,e,d)},void 0):void 0}function m(a,b,c,d){if(c=c[a])return c.reduce(function(c,e){return e[b]===d[0]?1===d.length?e:m(a,b,e,d.slice(1)):c},void 0)}function p(a,b,c){var d;return c(q.a({},b,((d={})[a]=b[a]?b[a].map(function(b){return p(a,b,c)}):void 0,
d)))}function u(a,b,c){return p(a,c,function(c){var d=c[b];if(delete c[b],c[a]){var e=c[a];return delete c[a],q.a({},c,{value:d,children:e})}return q.a({},c,{value:d})})}a.d(b,"f",function(){return e});a.d(b,"d",function(){return d});a.d(b,"i",function(){return h});a.d(b,"e",function(){return g});a.d(b,"h",function(){return l});a.d(b,"g",function(){return c});a.d(b,"a",function(){return n});a.d(b,"b",function(){return m});a.d(b,"c",function(){return u});var q=a(0)},43:function(f,b,a){function e(a){return a.filter(function(a){return 0<
a.length})}a.d(b,"b",function(){return d});a.d(b,"c",function(){return h});a.d(b,"a",function(){return e});f=a(5);var d=function(a,b,c){return c.indexOf(a)===b},h=Object(f.a)(function(a,b){var c={};return b.filter(function(b){return!c[b[a]]&&(c[b[a]]=!0,!0)})})},45:function(f,b,a){a.d(b,"b",function(){return e});a.d(b,"c",function(){return d});a.d(b,"d",function(){return h});a.d(b,"a",function(){return g});a.d(b,"e",function(){return l});a.d(b,"f",function(){return c});a.d(b,"g",function(){return n});
a.d(b,"h",function(){return m});var e="MAXIMIZE_DLG",d="MINIMIZE_DLG",h="TOGGLE_EXPANDED_FILTERS",g="CLOSE_FULLSCREEN_BROWSER",l="TOGGLE_EXPANDED_SORT",c="UPDATE_SUBLAYER_CARD_STATE",n=function(){return{type:h}},m=function(){return{type:l}}},47:function(f,b){f.exports=I},5:function(f,b,a){function e(a){return function g(){for(var b=this,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return c.length>=a.length?a.call.apply(a,[this].concat(c)):function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=
arguments[d];return g.call.apply(g,[b].concat(c,a))}}}a.d(b,"a",function(){return e})},52:function(f,b,a){a.d(b,"a",function(){return c});a.d(b,"c",function(){return n});a.d(b,"d",function(){return m});a.d(b,"b",function(){return p});a.d(b,"e",function(){return u});var e=a(10),d=a(12),h=a(43),g=a(11);f=a(5);var l=a(18),c="LOADING_CUSTOM_SECTION_INFO",n="UPDATE_CUSTOM_SECTION_SCHEMAS",m="UPDATE_CUSTOM_SECTION_INFO_FAILED",p="UPDATE_CUSTOM_SECTION_GROUPS",u=function(){return function(a,b){function f(b){console.error(b);
a({type:m})}var g=b();if("loaded"===g.results.customSections.status)return(new d).resolve();if("failed"===g.results.customSections.status)return(new d).reject();a({type:c});var k=Object(h.c)("id",g.settings.config.customSections.filter(l.f).map(l.a).reduce(function(a,b){return a.concat(b)},[]));return q(a,b,k).then(function(){return g=b(),e(k.map(function(a){return y(g,a).then(function(b){return{id:a.id,type:a.type,response:b}})}))},f).then(function(b){return a({type:n,payload:b})},f)}},q=function(a,
b,c){var f=b(),k=new d;if(0<c.length){var f=f.settings.utils,l=f.request,h=f.portal;c=c.filter(function(a){return"group"===a.type}).map(function(a){var b=a.id;return Object(g.c)(l,h,a.fetchGroupIdByQuery||"id:"+b).then(function(a){return a.results[0]})});e(c).then(function(c){var d=b();a({type:p,payload:{currentSection:d.parameters.section,customSections:d.settings.config.customSections,groups:c}});k.resolve()})}else k.resolve();return k},y=Object(f.a)(function(a,b){var c=a.settings.utils;a=c.request;
c=c.portal;return b.staticSchema?(a=new d,a.resolve({categorySchema:b.staticSchema}),a.then(function(a){return a})):"group"===b.type?Object(g.d)(a,c,b.id):Object(g.g)(a,c,b.id)})},53:function(f,b,a){function e(a){return Object(g.a)(Object(g.a)(l.a,w(a),z(a),Object(c.a)(a.parameters.filter.orgGroup),Object(n.a)(a.parameters.filter.status,a.settings.utils.portal.user),x(a)),Object(g.a)(Object(m.a)(a.parameters.filter.shared),Object(p.a)(a.parameters.filter.dateCreated),Object(p.b)(a.parameters.filter.dateModified),
Object(u.a)(k.b,{allowedItemTypes:a.settings.config.allowedItemTypes,itemTypeFilter:a.parameters.filter.itemType,specialItemQ:a.settings.config.specialItemQ}),Object(q.b)(a.parameters.filter.tags)))([a.parameters.searchString.current]).join(" ")}function d(a){return Object(g.a)(l.a,w(a),x(a),Object(u.a)(k.b,{allowedItemTypes:a.settings.config.allowedItemTypes,specialItemQ:a.settings.config.specialItemQ}))([a.parameters.searchString.current]).join(" ")}function h(a,b){return Object(g.a)(l.a,w(a),x(a),
Object(u.a)(k.b,{allowedItemTypes:a.settings.config.allowedItemTypes,specialItemQ:a.settings.config.specialItemQ}),Object(q.a)(b))([a.parameters.searchString.current]).join(" ")}a.d(b,"b",function(){return e});a.d(b,"a",function(){return d});a.d(b,"c",function(){return h});var g=a(15),l=a(43),c=a(159),n=a(160),m=a(161),p=a(117),u=a(89),q=a(118);f=a(5);var y=a(21),t=a(42),k=a(36),r=a(28),v=a(18),x=Object(f.a)(function(a,b){a.parameters.section;var c=a.parameters.filter,d=a.settings.config,e=Object(r.a)(a);
switch(a.parameters.section){case "myContent":return e.user?e.user&&c.folder?b.concat(["(owner:"+e.user.username+") (ownerfolder:"+c.folder.id+")"]):b.concat(["(owner:"+e.user.username+")"]):b;case "myFavorites":return e.user?b.concat(["(group:"+e.user.favGroupId+")"]):b;case "myGroups":if(a.results.user.groups){if(a.parameters.filter.group)return b.concat(["(group:"+a.parameters.filter.group.id+")"]);c=a.results.user.groups.map(function(a){return a.id});return b.concat(["(group:"+c.join(" OR group:")+
")"])}return b;case "myOrganization":return b.concat(["(orgid:"+e.id+")"]);case "subscription":return b.concat(["("+a.results.provisionedContent.content.map(function(a){return"id:"+a}).join(" OR ")+")"]);case "all":return b;default:return(c=d.customSections.filter(function(b){return a.parameters.section===b.name})[0])?b.concat([c.baseQuery]):b}}),w=Object(f.a)(function(a,b){var c=a.settings.config.addQueryParameters;return c&&"function"==typeof c?b.concat([c(a)]):b}),z=Object(f.a)(function(a,b){var c=
Object(v.b)(a.settings.config.customSections,a.parameters.section);if(c&&!Object(y.a)(a.parameters.filter.customFilter)){var d=Object.keys(a.parameters.filter.customFilter).filter(function(b){return!!a.parameters.filter.customFilter[b]}).reduce(function(b,d){d=parseInt(d,10);var e=a.parameters.filter.customFilter[d].value;return c.filters&&c.filters[d]&&(d=Object(t.a)("children","value",c.filters[d],e))?b.concat(["("+d.q+")"]):b},[]).join(" AND ");return b.concat([""+d])}return b})},6:function(f,
b,a){function e(a,b,e){var f,h,m=b.settings.utils.request,p=Object(g.b)({},b),p=m(p[0],p[1]).then(Object(l.a)(b),function(b){return a({type:z,payload:b})});if(e){f=Object(g.a)(b,["access","contentstatus","categories"]);f=m(f[0],f[1]);e=b.settings.config.customSections;var q=b.parameters.section;if(Object(k.a)(q)||Object(t.e)(e,q)&&Object(k.a)(Object(t.b)(e,q)))h=Object(g.c)(b,b.ui.tagsFilter.filterString),h=m(h[0],h[1])}m=[p,f,h].filter(function(a){return!!a});c(m).then(function(c){return a(function(a,
b){var c=a.settings.utils.iconDir,e=Object(r.a)(a);return{type:w,payload:{search:d.a({},b[0].data,{results:b[0].data.results.map(function(a){return Object(n.a)(e,c,a)})}),aggregations:b[1]&&b[1].data&&b[1].data.aggregations?{counts:b[1].data.aggregations.counts.slice().concat(b[2]&&b[2].data&&b[2].data.aggregations?b[2].data.aggregations.counts.slice():[]),countInfo:{section:a.parameters.section,group:a.parameters.filter.group,custom:a.settings.config.customSections.filter(function(b){return b.name===
a.parameters.section})[0]}}:void 0}}}(b,c))},function(b){return a({type:z,payload:b})})}a.d(b,"a",function(){return x});a.d(b,"c",function(){return w});a.d(b,"b",function(){return z});a.d(b,"d",function(){return F});a.d(b,"f",function(){return G});a.d(b,"e",function(){return E});a.d(b,"g",function(){return H});a.d(b,"h",function(){return A});a.d(b,"i",function(){return B});var d=a(0),h=a(35),g=a(41),l=a(72),c=a(10),n=a(23),m=a(83),p=a(79),u=a(29),q=a(64),y=a(52),t=a(18),k=a(119),r=a(28),v=a(63),x=
"LOADING_CONTENT",w="LOADING_CONTENT_SUCCESS",z="LOADING_CONTENT_FAILED",F="LOADING_NEXT",G="LOADING_NEXT_SUCCESS",E="LOADING_NEXT_FAILED",H="SUBSCRIPTION_CONTENT_SUCCESS",A=function(a){return function(b,c){var d=c();c=d.settings.utils.request;var e=d.parameters.nextQuery.nextStart;b({type:F});e=Object(g.b)({num:a,start:e},d);c(e[0],e[1]).then(Object(l.a)(d),function(a){return b({type:E,payload:a})}).then(function(a){return b(D(d,a))},function(a){return b({type:E,payload:a})})}},B=function(a){return function(b,
c){c=c();b({type:x});c.settings.config.clearSelectionBetweenSearches&&b({type:h.a});b(C(a))}},C=function(a){return function(b,d){var f=d(),g=f.parameters.section,h=f.settings.utils.portal.user,l=!!h;b(Object(m.b)()).then(function(k){"livingAtlas"===g?b(Object(p.d)(k)).then(function(){return e(b,d(),a)},function(){return b({type:z,payload:"Couldn't load the living atlas info."})}):"myContent"!==g&&"myGroups"!==g&&"myFavorites"!==g&&"subscription"!==g||!l?"myOrganization"===g&&l?b(Object(q.d)()).then(function(){return e(b,
d(),a)},function(){return b({type:z,payload:"Couldn't load the organization info."})}):Object(t.e)(f.settings.config.customSections,g)?b(Object(y.e)()).then(function(){return e(b,d(),a)},function(){return b({type:z,payload:"Couldn't load the custom section info."})}):e(b,f,a):c([b(Object(u.l)())].concat(l&&h.orgId?[b(Object(q.d)())]:[])).then(function(){return"subscription"===g?b(Object(v.d)()).then(function(){return b({type:H,payload:d().results.provisionedContent.content})},function(){return b({type:z,
payload:"Couldn't load provisioned content info."})}):e(b,d(),a)},function(){return b({type:z,payload:"Couldn't load the user info."})})})}},D=function(a,b){var c=a.settings.utils.iconDir,e=Object(r.a)(a);return{type:G,payload:d.a({},b.data,{results:b.data.results.map(function(a){return Object(n.a)(e,c,a)})})}}},63:function(f,b,a){a.d(b,"a",function(){return g});a.d(b,"b",function(){return l});a.d(b,"c",function(){return c});a.d(b,"d",function(){return n});var e=a(12),d=a(11),h=a(23),g="UPDATE_PROVISIONED_CONTENT",
l="UPDATE_PROVISIONED_CONTENT_FAILED",c="UPDATE_PROVISIONED_CONTENT_SUCCESS",n=function(){return function(a,b){var f=b();if("loaded"===f.results.provisionedContent.status)return(new e).resolve();if("failed"===f.results.provisionedContent.status)return(new e).reject();a({type:g});b=f.settings.utils;var m=b.portal;return Object(d.b)(b.request,m,m.user.username).then(function(b){a({type:c,payload:b.filter(function(a){return-1<f.settings.config.allowedItemTypes.indexOf(a.type)}).map(function(a){return Object(h.a)(m,
f.settings.utils.iconDir,a)})})},function(b){console.error(b);a({type:l})})}}},64:function(f,b,a){a.d(b,"a",function(){return g});a.d(b,"b",function(){return l});a.d(b,"c",function(){return c});a.d(b,"d",function(){return n});var e=a(10),d=a(12),h=a(11),g="LOADING_ORG_INFO",l="UPDATE_ORG_INFO",c="UPDATE_ORG_INFO_FAILED",n=function(){return function(a,b){b=b();if("loaded"===b.results.organization.status)return(new d).resolve();if("failed"===b.results.organization.status)return(new d).reject();a({type:g});
var f=b.settings.utils;b=f.request;f=f.portal;return e([Object(h.g)(b,f).then(function(a){return a.categorySchema}),Object(h.a)(b,f).then(function(a){return a.data.results})]).then(function(b){a({type:l,payload:{schema:b[0],groups:b[1]}})},function(b){console.error(b);a({type:c})})}}},68:function(f,b){f.exports=J},69:function(f,b,a){a.d(b,"a",function(){return h});var e=a(0),d=a(27),h=function(a){return e.a({},a,{thumbURI:function(a){var b=Object(d.a)(a);return a.thumbnail?b+"/sharing/rest/portals/"+
a.id+"/resources/"+a.thumbnail:b+"/home/images/group-no-image.png"}(a)})}},70:function(f,b,a){a.d(b,"a",function(){return h});var e=a(0),d=a(27),h=function(a){return e.a({},a,{orgUrl:Object(d.a)(a)+"/home/index.html"})}},72:function(f,b,a){a.d(b,"a",function(){return m});var e=a(0),d=a(12),h=a(10);f=a(5);var g=a(43),l=a(11),c=a(116),n=a(28),m=Object(f.a)(function(a,b){var f=a.settings.utils.request,m=Object(n.a)(a),p=new d,k=b.data.results.filter(function(b){return!!b.orgId&&!a.results.allOrganizations[b.orgId]}).map(function(a){return a.orgId}).filter(g.b).map(function(a){return Object(l.h)(f,
m,a)});return h(k).then(function(a){p.resolve(e.a({},b,{data:e.a({},b.data,{organizations:a.reduce(function(a,b){var d;return e.a({},a,((d={})[b.id]=Object(c.a)(b),d))},{})})}))},function(a){p.reject(a)}),p})},79:function(f,b,a){a.d(b,"a",function(){return c});a.d(b,"b",function(){return n});a.d(b,"c",function(){return m});a.d(b,"d",function(){return p});var e=a(0),d=a(3),h=a(12),g=a(47),l=a(162),c="LOADING_LIVING_ATLAS_INFO",n="UPDATE_LIVING_ATLAS_INFO",m="FETCH_LIVING_ATLAS_INFO_FAILED",p=function(a){return function(b,
f){f=f();if("loaded"===f.results.livingAtlas.status)return(new h).resolve();if("failed"===f.results.livingAtlas.status)return(new h).reject();b({type:c});f=f.settings.utils;var p=f.portal;return Object(l.a)(f.request,p,a,p.user&&p.user.culture?p.user.culture:g.locale).then(function(a){b({type:n,payload:e.a({},a,{schema:a.schema.map(function(a){return"region"===a.title?e.a({},a,{displayName:d.regions}):a})})})},function(a){console.error(a);b({type:m})})}}},83:function(f,b,a){a.d(b,"a",function(){return l});
a.d(b,"b",function(){return c});var e=a(12),d=a(11),h=a(116),g=a(47),l="UPDATE_PORTAL_SELF",c=function(){return function(a,b){var c=b(),f=c.settings.utils;b=f.portal;var f=f.request,m=b.user&&b.user.culture?b.user.culture:g.locale;return c.settings.utils.self?(new e).resolve(c.settings.utils.self):Object(d.i)(f,b,m).then(function(b){b=Object(h.a)(b);return a({type:l,payload:{self:b,config:c.settings.config}}),b})}}},89:function(f,b,a){function e(a){var b=d.a.filter(function(b){return-1===a.indexOf(b)}).filter(function(b){return a.reduce(function(a,
c){return-1<b.indexOf(c)||a},!1)});return'((type:"'+a.join('" OR type:"')+'")'+(0<b.length?' AND (-type:"'+b.join('" AND -type:"')+'")':"")+")"}a.d(b,"a",function(){return h});var d=a(36);f=a(5);var h=Object(f.a)(function(a,b,c){var d=b.itemTypeFilter,f=b.allowedItemTypes;b=b.specialItemQ;return d?c.concat([a[d.value]+" AND ("+e(f)+(b?" OR ("+b+")":"")+")"]):b?c.concat(["("+e(f)+" OR ("+b+"))"]):c.concat([e(f)])})}})});