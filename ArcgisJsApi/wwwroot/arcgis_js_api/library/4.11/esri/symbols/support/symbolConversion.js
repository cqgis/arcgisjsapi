// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../../core/Logger ../../core/mathUtils ../Font ./IconSymbol3DLayerResource".split(" "),function(x,h,l,c,p,q,r,t,u,m){function n(a){var g=a.color?a.color.clone():new l([255,255,255]),e,b,f,d;if(a instanceof c.PictureMarkerSymbol)a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(g=new l([255,255,255])),e=new m.default({href:a.url}),b=a.width<=a.height?a.height:a.width,(k(a.xoffset)||k(a.yoffset))&&0<a.width&&0<a.height&&
(d={x:-(a.xoffset||0)/a.width,y:(a.yoffset||0)/a.height});else{e=m.default;b=a.style;var h=v[b];h?b=h:(w.warn(b+' cannot be mapped to Icon symbol. Fallback to "circle"'),b="circle");e=new e({primitive:b});b=a.size;(k(a.xoffset)||k(a.yoffset))&&0<a.size&&(d={x:-(a.xoffset||0)/b,y:(a.yoffset||0)/b});a.outline&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color?a.outline.color.clone():[255,255,255]})}return new c.PointSymbol3D(new c.IconSymbol3DLayer({size:b,resource:e,material:{color:g},
outline:f,anchor:d?"relative":void 0,anchorPosition:d}))}function k(a){return t.isFinite(a)&&0!==a}Object.defineProperty(h,"__esModule",{value:!0});var v={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null},w=r.getLogger("esri.symbols.support.symbolConversion");h.to3D=function(a,g,e,b){void 0===g&&(g=!1);void 0===e&&(e=!1);void 0===b&&(b=!0);if(!a)return{symbol:null};if(c.isSymbol3D(a)||a instanceof c.WebStyleSymbol)b=a.clone();else if(a instanceof c.SimpleLineSymbol)b=
new c.LineSymbol3D(new c.LineSymbol3DLayer({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof c.SimpleMarkerSymbol)b=n(a);else if(a instanceof c.PictureMarkerSymbol)b=n(a);else if(a instanceof c.SimpleFillSymbol)b=new c.FillSymbol3DLayer({material:{color:a.color?a.color.clone():[255,255,255,0]}}),a.outline&&(b.outline={size:a.outline.width||0,color:a.outline.color?a.outline.color.clone():[255,255,255]}),b=new c.PolygonSymbol3D(b);else if(a instanceof c.TextSymbol){var f;
f=a.haloColor;var d=a.haloSize;f=f&&0<d?{color:q.clone(f),size:d}:null;d=a.font?a.font.clone():new u;b=new (b?c.LabelSymbol3D:c.PointSymbol3D)(new c.TextSymbol3DLayer({size:d.size,font:d,halo:f,material:{color:a.color.clone()},text:a.text}))}else return{error:new p("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};g&&(b.id=a.id);if(e&&c.isSymbol3D(b))for(a=0;a<b.symbolLayers.length;++a)b.symbolLayers.getItemAt(a)._ignoreDrivers=
!0;return{symbol:b}}});