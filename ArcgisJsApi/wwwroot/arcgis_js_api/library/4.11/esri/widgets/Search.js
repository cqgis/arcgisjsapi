// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(y,k,t,a,m,q,e,g,h){return function(e){function n(d){d=e.call(this)||this;d.showMoreResultsOpen=!1;d.viewModel=null;return d}t(n,e);n.prototype.render=function(){var d=this,c,a=this.get("viewModel.selectedResult"),
e=this.get("viewModel.results"),a=a&&a.name||"",g=1<this._countResults(e),l=g&&e.map(function(c){return d._moreResultsList(c)}),e=g?h.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},h.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,g=g?h.tsx("div",{key:"esri-search-renderer__more-results-container",
class:"esri-search-result-renderer__more-results-list"},l):null,l=(c={},c["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,c);return h.tsx("div",{class:"esri-search-result-renderer esri-widget"},h.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",l)},h.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},a),h.tsx("div",{key:"esri-search-renderer__more-results"},
e,g)))};n.prototype._showMoreResultsClick=function(d){d.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(d=this.get("viewModel.view.popup"))&&d.reposition()};n.prototype._selectResultClick=function(d){d.preventDefault();d=d.currentTarget["data-result"];this.viewModel&&this.viewModel.select(d)};n.prototype._moreResultsList=function(d){var c=this,a=d.results,e=a.length,g=!!e,l=this.get("viewModel.selectedResult"),e=1===e&&a[0]===l,l=this._getSourceName(d.source,d.sourceIndex),l=
1<this.get("viewModel.results").length&&!e?h.tsx("div",{key:"esri-search-result-renderer__header-"+d.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},l):null,a=g&&a.map(function(a,d){return c._moreResultsListItem(a,d)}),a=g&&!e?h.tsx("ul",{key:"esri-search-result-renderer__list-"+d.sourceIndex},a):null;return g?h.tsx("div",{key:"esri-search-result-renderer__results-"+d.sourceIndex},l,a):null};n.prototype._moreResultsListItem=function(a,c){var d=this.get("viewModel.selectedResult");
return a!==d?h.tsx("li",{key:"esri-search-result-renderer__list-item-"+c},h.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};n.prototype._getSourceName=function(a,c){return c===g.ALL_INDEX?m.all:a.name};n.prototype._countResults=function(a){return a?a.reduce(function(c,a){return c+a.results.length},0):0};a([h.renderable(),q.property()],n.prototype,"showMoreResultsOpen",void 0);a([q.property(),
h.renderable(["viewModel.results","viewModel.selectedResult"])],n.prototype,"viewModel",void 0);a([h.accessibleHandler()],n.prototype,"_showMoreResultsClick",null);a([h.accessibleHandler()],n.prototype,"_selectResultClick",null);return n=a([q.subclass("esri.widgets.Search.SearchResultRenderer")],n)}(q.declared(e))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(y,k,t,a,m,q,e,g,h,p,n,d,c,u,x,A,l,v,C,f,r,b,B,z,F,D,H,N,O,P,J,L,Q,M,R,S){function w(c,a){return c.hasOwnProperty(a)&&null!=c[a]&&""!==c[a]}var E=l.getLogger("esri.widgets.Search.SearchViewModel"),I=p.ofType({key:function(c){return c.layer?"layer":"locator"},base:Q,typeMap:{layer:J,locator:L}}),K=b.WGS84,T=/<(?:.|\s)*?>/g;return function(c){function b(b){b=c.call(this)||this;b._handles=new x;b._gotoPromise=null;b._searching=null;b._loadingDefaultSources=null;b.allPlaceholder=m.allPlaceholder;
b.autoNavigate=!0;b.autoSelect=!0;b.defaultSources=new I;b.defaultSymbol=new F({url:y.toUrl(A("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});b.includeDefaultSources=!0;b.locationToAddressDistance=1500;b.maxInputLength=128;b.maxResults=6;b.maxSuggestions=6;b.minSuggestCharacters=1;b.popupEnabled=!0;b.popupTemplate=new e({title:m.searchResult,content:"{Match_addr}"});b.portal=B.getDefault();b.resultGraphicEnabled=!0;b.resultGraphic=
null;b.results=null;b.selectedSuggestion=null;b.searchAllEnabled=!0;b.selectedResult=null;b.sources=new I;b.suggestionDelay=150;b.suggestions=null;b.suggestionsEnabled=!0;b.view=null;return b}t(b,c);b.prototype.initialize=function(){var b=this;this._handles.add([C.init(this,"portal",function(b){b&&!b.loaded&&b.load()}),C.init(this,["view","portal","includeDefaultSources"],function(){return b._loadDefaultSources()}),C.on(this,["defaultSources","sources"],"change",function(){return b.notifyChange("allSources")})])};
b.prototype.destroy=function(){this.clearGraphics();this._cancelLoadingDefaultSources();this._clearLoadingDefaultSources();this._handles.destroy();this._handles=null};Object.defineProperty(b.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(b){void 0===b?this._clearOverride("activeSourceIndex"):
this._override("activeSourceIndex",b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"allSources",{get:function(){var b=this.sources,c=this.defaultSources,a=this.includeDefaultSources,b="function"===typeof a?a.call(null,{sources:b,defaultSources:c}):a?c.concat(b):b,c=this._get("allSources")||new I;c.removeAll();c.addMany(b.filter(Boolean));return c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||
u.supported()},set:function(b){if(void 0===b)this._clearOverride("locationEnabled");else{var c=u.supported();if(b&&!c){var a=new d("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});E.error(a)}this._override("locationEnabled",b&&c)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"placeholder",{get:function(){var b=this.activeSourceIndex,c=this.allPlaceholder,c=void 0===c?m.allPlaceholder:c;return-1===b?c:(b=this.allSources.getItemAt(b))?
b.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(b){this._set("searchTerm",b||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==b&&this._set("selectedSuggestion",null);""===b&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===
this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});b.prototype.clear=function(){this.searchTerm=""};b.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};b.prototype.search=function(b){var c=this;this.emit("search-start");this.clearGraphics();var a=this._createSuggestionForSearch(b);this._searching=b=this._whenViewAndPortalLoaded().then(function(){return c._getResultsFromSources(a).then(function(b){var G=
{activeSourceIndex:c.activeSourceIndex,searchTerm:a.text,numResults:0,numErrors:0,errors:[],results:[]};c._formatResponse(G,b,a);b=c._getFirstResult(G.results);var d=(a.location&&b?b.name:a.text).replace(T,"");c._set("searchTerm",d);(a.key&&"number"===typeof a.sourceIndex||a.location)&&c._set("selectedSuggestion",a);c._set("results",G.results);c.emit("search-complete",G);return c._selectFirstResult(b).then(function(){return G})})});this.notifyChange("state");b.then(function(){return c._clearSearching()}).catch(function(){return c._clearSearching()});
return b};b.prototype.searchNearby=function(){var b=this;if(!this.locationEnabled){var c=new d("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});E.error(c);return v.reject(c)}this._searching=c=u.getCurrentPosition().then(function(c){return u.positionToPoint({position:c,view:b.view})}).then(function(c){return b.search(c)});this.notifyChange("state");c.then(function(){return b._clearSearching()}).catch(function(){return b._clearSearching()});
return c};b.prototype.select=function(b){var c=this;this.clearGraphics();if(!b){var a=new d("select:missing-parameter","Cannot select without a searchResult.",{searchResult:b});E.error(a);return v.reject(a)}var f=this.view,G=w(b,"sourceIndex")?b.sourceIndex:this._getSourceIndexOfResult(b),e=this.allSources.getItemAt(G);if(!e)return a=new d("select:missing-source","Cannot select without a source.",{source:e}),E.error(a),v.reject(a);var a=e instanceof J?this._getSourcePopupTemplate(e):null,r=e.resultSymbol||
this._getDefaultSymbol(b),l=w(e,"resultGraphicEnabled")?e.resultGraphicEnabled:this.resultGraphicEnabled,g=w(e,"autoNavigate")?e.autoNavigate:this.autoNavigate,u=w(e,"popupEnabled")?e.popupEnabled:this.popupEnabled,n=u?a||this.popupTemplate:null,D=b.feature;if(!D)return a=new d("select:missing-feature","Cannot select without a feature.",{feature:D}),E.error(a),v.reject(a);var h=D.attributes,x=D.geometry,B=D.layer,H=D.sourceLayer,p=M.getPointFromGeometry(x),a={layerViewQuery:this._getLayerView(D),
elevationQuery:f&&p?M.getPointWithElevation(p,f).catch(function(){return p}):v.resolve(p)};return v.eachAlways(a).then(function(a){var d=a.layerViewQuery.value,U=a.elevationQuery.value;r instanceof O&&(r.text=b.name);a=f&&g?c._getGoToTarget(b,e):null;return(a?c._goToSearchResult(a):v.resolve()).then(function(){c._gotoPromise=null;var a=d?D:new q({geometry:x,symbol:r,attributes:h,layer:B,sourceLayer:H,popupTemplate:n}),g=u&&c.get("view.popup");(g=g&&a.getEffectivePopupTemplate(g.defaultPopupTemplateEnabled))&&
f.popup.open({features:[a],location:U});d&&P.hasHighlight(d)&&!g&&c._highlightFeature({graphic:a,layerView:d});!d&&l&&f&&f.graphics.push(a);c._set("selectedResult",b);c._set("resultGraphic",a);c.emit("select-result",{result:b,source:e,sourceIndex:G});return b})})};b.prototype.suggest=function(b,c){var a=this,d=b||this.searchTerm;this.emit("suggest-start",{searchTerm:d});return this._suggestTimer(c).then(function(){return a._suggestImmediate(d).then(function(b){a._set("suggestions",b.results);a.emit("suggest-complete",
b);return b})})};b.prototype._cancelLoadingDefaultSources=function(){var b=this._loadingDefaultSources;b&&b.cancel()};b.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};b.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};b.prototype._convertHelperServices=function(){var b=this.get("portal.helperServices.geocode");return b?b.map(function(b){if(!1!==b.placefinding&&(b=L.fromJSON(b),R.isArcGISWorldGeocoder(b.get("locator.url"))&&
b.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],localSearchOptions:{minScale:3E5,distance:5E4},placeholder:m.placeholder}),b.singleLineFieldName))return b}).filter(Boolean):[]};b.prototype._convertApplicationProperties=function(){var b=this,c=this.get("view.map.applicationProperties.viewing.search"),a=this.get("view.map");if(!a||!c)return[];var d=c.hintText;return c.enabled?c.layers.map(function(c){var e=a.findLayerById(c.id);if(e){c=b._getLayerJSON(c);
var f=J.fromJSON(c);f.placeholder=d;b._getLayer(e,c).then(function(b){f.layer=b});return f}}).filter(Boolean):[]};b.prototype._getSubLayer=function(b,c){return b&&b.allSublayers?(b=b.allSublayers.find(function(b){return b.id===c.subLayer}))?h.safeCast(b.createFeatureLayer()):v.reject():v.reject()};b.prototype._getLayer=function(b,c){var a=this;if("feature"===b.type||"scene"===b.type)return v.resolve(b);if("map-image"===b.type)return b.load().then(function(){return a._getSubLayer(b,c).catch(function(){var c=
new d("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:b});E.error(c);return null})})};b.prototype._getLayerJSON=function(b){return"function"===typeof b.toJSON?b.toJSON():b};b.prototype._updateDefaultSources=function(){var b=this.defaultSources,c=this.includeDefaultSources;b.removeAll();c&&b.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));this.notifyChange("allSources")};b.prototype._clear=function(){this._gotoPromise&&
(this._gotoPromise.cancel(),this._gotoPromise=null);this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};b.prototype._closePopup=function(){var b=this.get("view.popup"),c=this.resultGraphic;if(b&&c){var a=b.selectedFeature;a&&a===c&&b.close()}};b.prototype._suggestTimer=function(b){return v.after(null!=b?b:this.suggestionDelay)};b.prototype._createLocationForSearch=function(b){if(b instanceof q)return M.getPointFromGeometry(b.geometry);
if(b instanceof r)return b;if(Array.isArray(b)&&2===b.length)return new r({longitude:b[0],latitude:b[1]})};b.prototype._createSuggestionForSearch=function(b){if(b&&w(b,"key")&&w(b,"text")&&w(b,"sourceIndex"))return b;var c=this._createLocationForSearch(b)||null,a="string"===typeof b?b:this.searchTerm,d=this.selectedSuggestion,e=this.selectedResult,f=(b=!b&&d&&e)&&d.location;return b&&d.key===e.key&&d.sourceIndex===e.sourceIndex||f?d:{location:c,text:c?"":a,sourceIndex:null,key:null}};b.prototype._getFirstResult=
function(b){var c=null;b&&b.some(function(b){b=b.results[0];var a=!!b;a&&(c=b);return a});return c};b.prototype._selectFirstResult=function(b){return this.autoSelect&&b?this.select(b):v.resolve()};b.prototype._suggestImmediate=function(b){var c=this;return this._whenViewAndPortalLoaded().then(function(){return c._getSuggestionsFromSources(b)}).then(function(a){var d={activeSourceIndex:c.activeSourceIndex,searchTerm:b,numResults:0,numErrors:0,errors:[],results:[]};c._formatResponse(d,a);return d})};
b.prototype._formatSourceResponse=function(b,c,a){var d=c&&c.value||[];c=c&&c.error;var e=this.allSources.getItemAt(a);c?(b.errors.push({sourceIndex:a,source:e,error:c}),b.numErrors++):(b.results.push({sourceIndex:a,source:e,results:d}),b.numResults+=d.length)};b.prototype._formatResponse=function(b,c,a){var d=this;if(c)if(-1===b.activeSourceIndex){var e=a&&w(a,"sourceIndex")&&-1!==a.sourceIndex?a.sourceIndex:void 0;c.forEach(function(c,a){d._formatSourceResponse(b,c,void 0!==e?e:a)})}else this._formatSourceResponse(b,
c[0],b.activeSourceIndex)};b.prototype._getResultsFromSources=function(b){var c=this,a=this.allSources,e=!b.location&&w(b,"sourceIndex")?b.sourceIndex:this.activeSourceIndex,f=[];if(!a.length)return a=new d("search:no-sources-defined","At least one source is required.",{allSources:a}),E.error(a),v.reject(a);-1===e?a.forEach(function(a,d){f.push(c._getResultsFromSource(b,d))}):f.push(this._getResultsFromSource(b,e));return v.eachAlways(f)};b.prototype._getSuggestionsFromSources=function(b){var c=this,
a=this.allSources,e=this.activeSourceIndex,f=[];if(!a.length)return a=new d("suggest:no-sources-defined","At least one source is required.",{allSources:a}),E.error(a),v.reject(a);-1===e?a.forEach(function(a,d){f.push(c._getSuggestionsFromSource(b,d))}):f.push(this._getSuggestionsFromSource(b,e));return v.eachAlways(f)};b.prototype._getResultsFromSource=function(b,c){var a=this.allSources.getItemAt(c),d=b.location,d=void 0===d?null:d,e=this.get("view.spatialReference")||K,f=w(a,"maxResults")?a.maxResults:
this.maxResults,r=a instanceof J&&w(a,"exactMatch")?a.exactMatch:!1,g=a instanceof L&&w(a,"locationToAddressDistance")?a.locationToAddressDistance:this.locationToAddressDistance;return a.getResults({view:this.view,sourceIndex:c,location:d,suggestResult:b,spatialReference:e,exactMatch:r,maxResults:f,distance:g})};b.prototype._getSuggestionsFromSource=function(b,c){var a=this.allSources.getItemAt(c),d=w(a,"suggestionsEnabled")?a.suggestionsEnabled:this.suggestionsEnabled,e=b.trim().length,f=w(a,"minSuggestCharacters")?
a.minSuggestCharacters:this.minSuggestCharacters;return d&&e>=f?(d=this.get("view.spatialReference")||K,e=w(a,"maxSuggestions")?a.maxSuggestions:this.maxSuggestions,a.getSuggestions({view:this.view,sourceIndex:c,suggestTerm:b,spatialReference:d,maxSuggestions:e})):v.resolve()};b.prototype.createDefaultSymbol=function(b,c){if("point"===c)return new N({color:b.color,size:b.size,outline:{color:b.outline.color,width:b.outline.width}});if("polyline"===c)return new H({color:b.color,width:b.width});if("polygon"===
c)return new D({color:b.color,outline:{color:b.outline.color,width:b.outline.width}})};b.prototype._getSourcePopupTemplate=function(b){var c=b.layer;if(c)return w(b,"popupTemplate")?b.popupTemplate:c.popupTemplate};b.prototype._getSourceIndexOfResult=function(b){var c=null;this.results.some(function(a){return a.results.some(function(d){if(d===b)return c=a.sourceIndex,!0})});return c};b.prototype._getGoToTarget=function(b,c){var a=b.extent;b=b.feature;return c instanceof J?b||a:a||b};b.prototype._goToSearchResult=
function(b){var c=!!b;b=this.callGoTo({target:{target:b},options:{animate:c}});c&&(this._gotoPromise=b);return b};b.prototype._whenViewAndPortalLoaded=function(){var b=this.portal,c=this.view,c=c?c.when():v.resolve(),b=b?b.when():v.resolve();return v.eachAlways([c,b]).then(function(){})};b.prototype._loadDefaultSources=function(){var b=this,c=this.includeDefaultSources;this._cancelLoadingDefaultSources();this._clearLoadingDefaultSources();var c=c?this._whenViewAndPortalLoaded():v.resolve(),a=!1;c.catch(function(){}).then(function(){a=
!0;b._clearLoadingDefaultSources();b._updateDefaultSources()});a||(this._loadingDefaultSources=c,this.notifyChange("state"));return c};b.prototype._getDefaultSymbol=function(b){var c=this.get("view.map.basemap.id");if(b=b&&b.feature&&b.feature.geometry&&b.feature.geometry.type)if(c=(c=z.getSchemes({theme:"default",basemap:c,geometryType:b})||z.getSchemes({theme:"default",basemap:"topo",geometryType:b}))&&c.primaryScheme)return c.color&&w(c,"opacity")&&(c.color.a=c.opacity),this.createDefaultSymbol(c,
b);return this.defaultSymbol};b.prototype._removeHighlight=function(){this._handles.remove("highlight")};b.prototype._getLayerView=function(b){var c=this.view;if(!b||!c)return v.resolve(null);var a=b.layer;return c.when().then(function(){return n.typeCast(c)().whenLayerView(a)})};b.prototype._highlightFeature=function(b){var c=b.graphic,a=c.attributes,d=c.layer.objectIdField;b=b.layerView.highlight(a&&a[d]||c);this._handles.add(b,"highlight")};b.ALL_INDEX=-1;a([f.property({readOnly:!0,dependsOn:["activeSourceIndex",
"allSources.length"],value:null})],b.prototype,"activeSource",null);a([f.property({dependsOn:["allSources.length","searchAllEnabled"]})],b.prototype,"activeSourceIndex",null);a([f.property()],b.prototype,"allPlaceholder",void 0);a([f.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],b.prototype,"allSources",null);a([f.property()],b.prototype,"autoNavigate",void 0);a([f.property()],b.prototype,"autoSelect",void 0);a([f.property({readOnly:!0})],b.prototype,
"defaultSources",void 0);a([f.property()],b.prototype,"defaultSymbol",void 0);a([f.property()],b.prototype,"includeDefaultSources",void 0);a([f.property()],b.prototype,"locationEnabled",null);a([f.property()],b.prototype,"locationToAddressDistance",void 0);a([f.property()],b.prototype,"maxInputLength",void 0);a([f.property()],b.prototype,"maxResults",void 0);a([f.property()],b.prototype,"maxSuggestions",void 0);a([f.property()],b.prototype,"minSuggestCharacters",void 0);a([f.property({readOnly:!0,
dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],b.prototype,"placeholder",null);a([f.property()],b.prototype,"popupEnabled",void 0);a([f.property({type:e})],b.prototype,"popupTemplate",void 0);a([f.property({type:B})],b.prototype,"portal",void 0);a([f.property()],b.prototype,"resultGraphicEnabled",void 0);a([f.property({readOnly:!0})],b.prototype,"resultGraphic",void 0);a([f.property({readOnly:!0})],b.prototype,"results",void 0);a([f.property({readOnly:!0})],
b.prototype,"selectedSuggestion",void 0);a([f.property()],b.prototype,"searchAllEnabled",void 0);a([f.property({readOnly:!0})],b.prototype,"selectedResult",void 0);a([f.property()],b.prototype,"searchTerm",null);a([f.property({type:I})],b.prototype,"sources",void 0);a([f.property({readOnly:!0,dependsOn:["allSources.length"]})],b.prototype,"state",null);a([f.property()],b.prototype,"suggestionDelay",void 0);a([f.property({readOnly:!0})],b.prototype,"suggestions",void 0);a([f.property()],b.prototype,
"suggestionsEnabled",void 0);a([f.property()],b.prototype,"view",void 0);a([f.property()],b.prototype,"clear",null);return b=a([f.subclass("esri.widgets.Search.SearchViewModel")],b)}(f.declared(g,c,S))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),function(y,k,t,
a,m,q,e,g,h,p,n,d,c){function u(a,e){if(!e)return g.resolve(a);var f=e.spatialReference;return f.isWGS84?g.resolve(a):f.isWebMercator?g.resolve(p.geographicToWebMercator(a)):x().then(function(e){if(!e)return g.reject(new m("geometry-service:missing-url","Geometry service URL is missing"));e=new d({url:e});var b=new c({geometries:[a],outSR:f});return e.project(b).then(function(b){return b[0]})})}function x(){if(a.geometryServiceUrl)return g.resolve(a.geometryServiceUrl);var c=n.getDefault();return c.load().catch(function(c){}).then(function(){return c.get("helperServices.geometry.url")})}
Object.defineProperty(k,"__esModule",{value:!0});var A=e.getLogger("esri.core.geolocationUtils"),l={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};k.supported=function(){var c=q("esri-geolocation");c||A.warn("geolocation-unsupported","Geolocation unsupported.");c&&((c=q("esri-secure-context"))||A.warn("insecure-context","Geolocation requires a secure origin."));return c};k.getCurrentPosition=function(c){c||(c=l);var a=g.create(function(a,d){navigator.geolocation.getCurrentPosition(a,d,c)});return g.timeout(a,
15E3,void 0)};k.positionToPoint=function(c){var a=c.position;c=c.view;var d=a&&a.coords||{},d={accuracy:d.accuracy,altitude:d.altitude,altitudeAccuracy:d.altitudeAccuracy,heading:d.heading,latitude:d.latitude,longitude:d.longitude,speed:d.speed},a=a?{coords:d,timestamp:a.timestamp}:a;a=(a=a&&a.coords)?new h({longitude:a.longitude,latitude:a.latitude,z:a.altitude||null,spatialReference:{wkid:4326}}):null;return u(a,c)}})},"esri/styles/basic":function(){define(["../core/lang","../Color"],function(y,
k){function t(a,e){var g;if(a)switch(g={},g.color=new k(a.color),e){case "point":g.outline={color:new k(a.outline.color),width:a.outline.width};g.size=a.size;break;case "polyline":g.width=a.width;break;case "polygon":g.outline={color:new k(a.outline.color),width:a.outline.width}}return g}var a={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},m={};(function(){var q,e,g,h,p,n,d,c;for(q in a)for(h in e=a[q],g=e.basemapGroups,p=m[q]={basemaps:[].concat(g.light).concat(g.dark),point:{},polyline:{},polygon:{}},g)for(n=g[h],d=0;d<n.length;d++)c=n[d],e.pointSchemes&&(p.point[c]=e.pointSchemes[h]),
e.lineSchemes&&(p.polyline[c]=e.lineSchemes[h]),e.polygonSchemes&&(p.polygon[c]=e.polygonSchemes[h])})();return{getAvailableThemes:function(q){var e=[],g,h,p;for(g in a)h=a[g],p=m[g],q&&p.basemaps&&-1===p.basemaps.indexOf(q)||e.push({name:h.name,label:h.label,description:h.description,basemaps:p.basemaps.slice(0)});return e},getSchemes:function(a){var e=a.basemap,g=a.geometryType;a=m[a.theme];var h;(a=(a=a&&a[g])&&a[e])&&(h={primaryScheme:t(a.primary,g),secondarySchemes:a.secondary.map(function(a){return t(a,
g)})});return h},cloneScheme:function(a){var e;a&&(e=y.mixin({},a),e.color&&(e.color=new k(e.color)),e.outline&&(e.outline={color:e.outline.color&&new k(e.outline.color),width:e.outline.width}));return e}}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),
function(y,k,t,a,m,q,e,g,h){return function(g){function n(){var c=null!==g&&g.apply(this,arguments)||this;c.displayField=null;c.exactMatch=null;c.searchFields=null;c.searchQueryParams=null;c.searchTemplate=null;c.suggestionTemplate=null;c.suggestQueryParams=null;c.getResults=function(a){return h.getResults(m({source:c},a))};c.getSuggestions=function(a){return h.getSuggestions(m({source:c},a))};return c}t(n,g);d=n;Object.defineProperty(n.prototype,"layer",{set:function(c){this._set("layer",c);c&&c.load()},
enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(c){void 0===c?this._clearOverride("name"):this._override("name",c)},enumerable:!0,configurable:!0});n.prototype.clone=function(){return new d({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?q.clone(this.outFields):null,placeholder:this.placeholder,
popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?q.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
q.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?q.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};n.prototype._getFirstStringField=function(){var c=this.layer,a="";c&&c.fields&&c.fields.some(function(c){if("string"===c.type)return a=c.name,!0});return a};n.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};n.prototype._getLayerTitle=function(){var c=
this.layer;if(c){var a=c.title;if(a){var d="";(this.searchFields||[this._getDisplayField()]).forEach(function(a,e){d+=0===e?": ":", ";e=c.getField(a);d+=e&&e.alias||a});return""+a+d}}};var d;a([e.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],n.prototype,"displayField",void 0);a([e.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],n.prototype,"exactMatch",void 0);a([e.property({value:null})],n.prototype,"layer",null);a([e.property({dependsOn:["layer.title"]})],
n.prototype,"name",null);a([e.property()],n.prototype,"searchFields",void 0);a([e.property()],n.prototype,"searchQueryParams",void 0);a([e.property()],n.prototype,"searchTemplate",void 0);a([e.property()],n.prototype,"suggestionTemplate",void 0);a([e.property()],n.prototype,"suggestQueryParams",void 0);return n=d=a([e.subclass("esri.widgets.Search.LayerSearchSource")],n)}(e.declared(g))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(y,k,t,a,m,q,e){return function(g){function h(a){a=g.call(this)||this;a.autoNavigate=null;a.filter=null;a.getResults=null;a.getSuggestions=null;a.maxResults=null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.searchExtent=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}t(h,g);a([e.property()],h.prototype,"autoNavigate",
void 0);a([e.property()],h.prototype,"filter",void 0);a([e.property()],h.prototype,"getResults",void 0);a([e.property()],h.prototype,"getSuggestions",void 0);a([e.property()],h.prototype,"maxResults",void 0);a([e.property()],h.prototype,"maxSuggestions",void 0);a([e.property()],h.prototype,"minSuggestCharacters",void 0);a([e.property()],h.prototype,"outFields",void 0);a([e.property()],h.prototype,"placeholder",void 0);a([e.property()],h.prototype,"popupEnabled",void 0);a([e.property()],h.prototype,
"popupTemplate",void 0);a([e.property()],h.prototype,"prefix",void 0);a([e.property()],h.prototype,"resultGraphicEnabled",void 0);a([e.property()],h.prototype,"resultSymbol",void 0);a([e.property()],h.prototype,"searchExtent",void 0);a([e.property()],h.prototype,"suggestionsEnabled",void 0);a([e.property()],h.prototype,"suffix",void 0);a([e.property()],h.prototype,"withinViewEnabled",void 0);a([e.property()],h.prototype,"zoomScale",void 0);return h=a([e.subclass("esri.widgets.Search.SearchSource")],
h)}(e.declared(q,m.Identifiable))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports dojo/date/locale ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),function(y,k,t,a,m,q,e,g,h){function p(b,c){var a=b.filter,d=b.searchExtent;c=c&&c.extent;b=b.withinViewEnabled&&c?c:void 0;return a&&a.geometry||d||b}function n(b){return b?b.load().then(e.resolve).catch(e.reject):e.resolve()}
function d(b){return b&&!!b.get("capabilities.query.supportsPagination")}function c(b){var c="";b&&(b=b.fields)&&b.some(function(b){if("string"===b.type)return c=b.name,!0});return c}function u(b,c){return b&&c?c.every(function(c){return!!b.getField(c)}):!1}function x(b){for(var c=0;c<b.length;c++)if(255<b.charCodeAt(c))return!0;return!1}function A(b,c,a){var d=null;(b=b.codedValues)&&b.some(function(b){var e=b.name,e=a?e:e.toLowerCase();if((a?c:c.toLowerCase())===e)return d=b.code.toString(),!0});
return d}function l(b,c){return(c=c&&c.where)?"("+b+") AND ("+c+")":b}function v(b,c,a,d,e){var f=c.definitionExpression,r="";if(b){var g=B.test(c.url)&&x(b)?"N":"";a&&a.forEach(function(a){var f=c.getField(a);a=((a="function"===typeof c.getFieldDomain&&c.getFieldDomain(a))&&"coded-value"===a.type?A(a,b,e):null)||b||null;if(null!==a){var u=f.type,f=f.name;"string"===u||"date"===u?e?f=l(f+" \x3d "+g+"'"+a+"'",d):(a=a.toUpperCase(),f=l("UPPER("+f+") LIKE "+g+"'%"+a+"%'",d)):"oid"===u||"small-integer"===
u||"integer"===u||"single"===u||"double"===u?(a=parseFloat(a),f=isNaN(a)?null:l(f+" \x3d "+a,d)):f=l(f+" \x3d "+a,d);f&&(r+=r?" OR ("+f+")":"("+f+")")}})}return f?"("+f+") AND ("+r+")":r}function C(b,c){var a=null;(b=b.codedValues)&&b.length&&b.some(function(b){if(b.code===c)return a=b.name,!0});return a}function f(b,c,a){var d=b.layer,e=b.attributes,f="function"===typeof d.getFieldDomain&&d.getFieldDomain(a);return c?m.substitute(e,c):a&&b.hasOwnProperty("attributes")&&e.hasOwnProperty(a)?(b=e[a],
a=d.getField(a),f&&"coded-value"===f.type?C(f,b):a&&"date"===a.type?t.format(new Date(b)):"number"===typeof b?b.toString():"string"!==typeof b?"":b.trim()):""}function r(b,c,a,d){return b.features.map(function(b){var e=b.attributes[b.layer.objectIdField];return{text:f(b,c.suggestionTemplate,d),key:e,sourceIndex:a}})}function b(b,c,a,d,e,r,g){return b.features.map(function(b){var u=b.clone(),l=b.layer,l=(l=l&&l.objectIdField)&&b.attributes[l];b=f(b,a.searchTemplate,e);var n=h.createExtentFromGeometry(u.geometry,
c,r);return{extent:g?h.scaleExtent(n.clone(),c,g):n,feature:u,key:l,name:b,sourceIndex:d}})}Object.defineProperty(k,"__esModule",{value:!0});var B=/https?:\/\/services.*\.arcgis\.com/i,z=/(?:\{([^}]+)\})/g,F=q.getLogger("esri.widgets.Search.support.layerSearchUtils");k.getResults=function(f){var r=f.exactMatch,l=void 0===r?!1:r,h=f.location,B=f.maxResults,x=f.spatialReference,z=f.source,q=f.sourceIndex,A=f.suggestResult,m=f.view,k=z.layer,t=z.filter,C=z.zoomScale,D=m&&m.scale,K=p(z,m);return n(k).then(function(){return e.create(function(b,
c){var a=k.popupTemplate;if(a)return a.getRequiredFields(k.fields).then(function(c){return b(c)},c);b(null)})}).then(function(f){var r=k.objectIdField,n=k.returnZ,p=z.displayField||z.layer.displayField||c(z.layer);if(!k.getField(p))return F.error("invalid-field: displayField is invalid."),e.reject(new a("getResults():invalid-field","displayField is invalid."));f=f&&f.length?f:[p];var w=(f=z.outFields||f)&&-1!==f.indexOf("*");-1!==f.indexOf(r)||w||f.push(r);if(!w&&!u(k,f))return F.error("invalid-field: outField is invalid."),
e.reject(new a("getResults():invalid-field","outField is invalid."));r=k.createQuery();(w=z.searchQueryParams)&&r.set(w);x&&(r.outSpatialReference=x,w=g.getMetersPerUnitForSR(x))&&(r.maxAllowableOffset=w);w=!!k.get("capabilities.data.supportsZ");r.returnZ=w&&!1!==n;r.returnGeometry=!0;f&&(r.outFields=f);if(h)r.geometry=h;else if(A.key)r.objectIds=[parseInt(A.key,10)];else{n=z.searchFields||[p];if(!u(k,n))return F.error("invalid-field: search field is invalid."),e.reject(new a("getResults():invalid-field",
"search field is invalid."));d(k)&&(r.num=B);K&&(r.geometry=K);f=A.text.trim();if(!f)return e.resolve();var w=z.prefix,H=z.suffix;f=(""+(void 0===w?"":w)+f+(void 0===H?"":H)).replace(/\'/g,"''");n=v(f,k,n,t,l);if(!n)return e.resolve();r.where=n}return k.queryFeatures(r).then(function(c){return b(c,m,z,q,p,D,C)})})};k.getSuggestions=function(b){var f=b.source,g=b.spatialReference,l=b.suggestTerm,h=b.maxSuggestions,B=b.sourceIndex,x=f.layer,q=f.filter,A=p(f,b.view);return n(x).then(function(){if(!d(x))return e.resolve();
var b=f.displayField||f.layer.displayField||c(f.layer),n=f.searchFields||[b],k=[];f.suggestionTemplate?f.suggestionTemplate.replace(z,function(b,c){k.push(c);return b}):k.push(b);var m=k&&-1!==k.indexOf("*");-1!==k.indexOf(x.objectIdField)||m||k.push(x.objectIdField);var p=!!x.getField(b),m=m||u(x,k),t=u(x,n);if(!p)return F.error("invalid-field: displayField is invalid."),e.reject(new a("getSuggestions():invalid-field","displayField is invalid."));if(!m)return F.error("invalid-field: outField is invalid."),
e.reject(new a("getSuggestions():invalid-field","outField is invalid."));if(!t)return F.error("invalid-field: search field is invalid."),e.reject(new a("getSuggestions():invalid-field","search field is invalid."));p=x.createQuery();(m=f.suggestQueryParams)&&p.set(m);p.outSpatialReference=g;p.returnGeometry=!1;p.num=h;p.outFields=k;A&&(p.geometry=A);m=l.trim();if(!m)return e.resolve();var t=f.prefix,C=f.suffix,m=(""+(void 0===t?"":t)+m+(void 0===C?"":C)).replace(/\'/g,"''"),n=v(m,x,n,q,!1);if(!n)return e.resolve();
p.where=n;return x.queryFeatures(p).then(function(c){return r(c,f,B,b)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),function(y,k,t,a,m,q,e,g){function h(a,d,c){var g=a.hasZ?a.z:void 0;return d&&d.map?(c?e.getExtentForScale(d,c):d.extent).clone().centerAt(a).set({zmax:g,zmin:g}):new t.Extent({xmin:a.x-
.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:g,zmax:g})}Object.defineProperty(k,"__esModule",{value:!0});var p=m.getLogger("esri.widgets.Search.support.geometryUtils");k.getPointWithElevation=function(e,d){return d?e?e.hasZ||d instanceof g?q.resolve(e):(d=d.get("map.ground"))&&d.layers.length?d.queryElevation(e).then(function(c){return c.geometry}):q.resolve(e):(p.error("missing-parameter: point is missing."),q.reject(new a("searchgeometryutils:missing-parameter",
"point is missing."))):(p.error("missing-parameter: view is missing."),q.reject(new a("searchgeometryutils:missing-parameter","view is missing.")))};k.getPointFromGeometry=function(a){if(a instanceof t.Point)return a;if(a instanceof t.Extent)return a.center;if(a instanceof t.Polygon)return a.centroid;if(a instanceof t.Multipoint)return a.getPoint(0);if(a instanceof t.Polyline)return a.getPoint(0,0)};k.createExtentFromGeometry=function(a,d,c){if(a){if(a instanceof t.Extent)return a;if(a instanceof
t.Multipoint||a instanceof t.Polygon||a instanceof t.Polyline)return a.extent;if(a instanceof t.Point)return h(a,d,c)}};k.scaleExtent=function(a,d,c){if(a&&d)return h(a.center,d,c)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/unitUtils"],function(y,k,t,a){function m(k,e){e=a.getMetersPerUnitForSR(e);return k/(e*a.inchesPerMeter*t.screenDPI)}Object.defineProperty(k,"__esModule",{value:!0});k.getScale=function(k,e){e=e||k.extent;k=k.width;
var g=a.getMetersPerUnit(e&&e.spatialReference);return e&&k?e.width/k*(g||a.decDegToMeters)*a.inchesPerMeter*t.screenDPI:0};k.getResolutionForScale=m;k.getExtentForScale=function(a,e){var g=a.extent;a=a.width;e=m(e,g.spatialReference);return g.clone().expand(e*a/g.width)}})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(y,k,t,a,m,q,e,g,h,p){return function(h){function d(){var a=null!==h&&h.apply(this,arguments)||this;a.categories=null;a.countryCode=null;a.localSearchOptions=null;a.locationToAddressDistance=1500;a.locator=null;a.name="";a.placeholder="";a.searchTemplate="";a.singleLineFieldName=null;a.suggestionsEnabled=null;a.zoomScale=null;a.getResults=function(c){return p.getResults(m({source:a},c))};a.getSuggestions=function(c){return p.getSuggestions(m({source:a},c))};return a}t(d,h);c=d;d.prototype.readLocator=
function(a,c){return(a=c.url)?new g({url:a}):null};d.prototype.writeLocator=function(a,c){c.url=a?a.url:null};d.prototype.clone=function(){return new c({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?q.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?
this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?q.clone(this.categories):null,countryCode:this.countryCode,localSearchOptions:this.localSearchOptions?q.clone(this.localSearchOptions):null,locationToAddressDistance:this.locationToAddressDistance,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,
zoomScale:this.zoomScale})};var c;a([e.property()],d.prototype,"categories",void 0);a([e.property()],d.prototype,"countryCode",void 0);a([e.property()],d.prototype,"localSearchOptions",void 0);a([e.property()],d.prototype,"locationToAddressDistance",void 0);a([e.property({type:g})],d.prototype,"locator",void 0);a([e.reader("locator",["url"])],d.prototype,"readLocator",null);a([e.writer("locator")],d.prototype,"writeLocator",null);a([e.property({json:{write:!0}})],d.prototype,"name",void 0);a([e.property({json:{write:!0}})],
d.prototype,"placeholder",void 0);a([e.property()],d.prototype,"searchTemplate",void 0);a([e.property({json:{write:!0}})],d.prototype,"singleLineFieldName",void 0);a([e.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",void 0);a([e.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=c=a([e.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(e.declared(h))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(y,k,t,a,m,q,e,g,h,p){return function(h){function d(a){a=h.call(this,a)||this;a.categories=null;a.countryCode=null;a.outSpatialReference=null;a.url=null;return a}t(d,h);d.prototype.addressToLocations=function(a,d){var c=a.address,e=a.categories,g=a.countryCode,h=a.distance,u=a.forStorage,f=a.location,r=a.magicKey,b=a.maxLocations,B=a.outFields;a=a.searchExtent;var z=f?f.clone().normalize():null,k=a?a.shiftCentralMeridian():null,n=this.outSpatialReference,f=this.parsedUrl;a=this.requestOptions;
e={f:"json",outSR:n?JSON.stringify(n.toJSON()):null,outFields:B?B.join(","):null,searchExtent:k?JSON.stringify(k.toJSON()):null,category:e?e.join(","):null,countryCode:g||null,magicKey:r||null,distance:h||null,location:z,maxLocations:b||null,forStorage:u||null};c={query:this._encode(m({},f.query,c,e))};d=m({},a,d,c);return q(f.path+"/findAddressCandidates",d).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(a,d){var c=this.parsedUrl,e=this.requestOptions,g=a.location,
h=a.searchExtent,g=g?g.clone().normalize():null,h=h?h.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:h?JSON.stringify(h.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:g,distance:a.distance||null};a={query:this._encode(m({},c.query,a))};d=m({},e,d,a);return q(c.path+"/suggest",d).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=function(a,d){var c=this.outSpatialReference,
e=this.parsedUrl,g=this.requestOptions,h=a.addresses,u=a.categories;a=a.countryCode;var f=[];Array.isArray(h)&&h.forEach(function(a){f.push({attributes:a})});c={category:u?u.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:f}),f:"json",outSR:c?JSON.stringify(c):null};c={query:this._encode(m({},e.query,c))};d=m({},g,d,c);return q(e.path+"/geocodeAddresses",d).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(a,d,e){var c=a?a.clone().normalize():
null,g="undefined"!==typeof c,h="undefined"!==typeof d&&g,u=this.outSpatialReference;a=this.parsedUrl;var f=this.requestOptions;d={outSR:u?JSON.stringify(u.toJSON()):null,location:g?JSON.stringify(c.toJSON()):null,distance:h?d:null,f:"json"};d={query:this._encode(m({},a.query,d))};e=m({},f,e,d);return q(a.path+"/reverseGeocode",e).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.candidates,d=a.spatialReference;return c?
c.map(function(a){if(a){var c=a.extent,e=a.location,g=c?c&&"number"===typeof c.xmin&&"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.x&&g)return c&&(c.spatialReference=d),e.spatialReference=d,p.fromJSON(a)}}):[]};d.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.locations,d=a.spatialReference;
return c?c.map(function(a){var c=a.location;c&&(c.spatialReference=d);return p.fromJSON(a)}):[]};d.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var c=a.address;return p.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:a.location,score:100})}};a([e.property()],d.prototype,"categories",void 0);a([e.property()],d.prototype,"countryCode",void 0);a([e.property({type:g})],d.prototype,"outSpatialReference",void 0);a([e.property()],d.prototype,"url",void 0);return d=
a([e.subclass("esri.tasks.Locator")],d)}(e.declared(h))})},"esri/tasks/support/AddressCandidate":function(){define(["../../core/JSONSupport","../../geometry/Extent","../../geometry/Point"],function(y,k,t){return y.createSubclass({declaredClass:"esri.tasks.support.AddressCandidate",properties:{address:{value:null,json:{write:!0}},attributes:{value:null,json:{write:!0}},extent:{value:null,type:k,json:{write:!0}},location:{value:null,type:t,json:{write:!0}},score:{value:null,json:{write:!0}}}})})},"esri/widgets/Search/support/locatorUtils":function(){define(["require",
"exports","../../../Graphic","../../../core/promiseUtils","./geometryUtils"],function(y,k,t,a,m){function q(a){var c=a.source,d=a.spatialReference,e=a.location,g=a.distance,h=a.sourceIndex,k=a.view;a=c.locator;var n=c.zoomScale,f=k&&k.scale;d&&(a.outSpatialReference=d);return a.locationToAddress(e,g).then(function(a){return p([a],{sourceIndex:h,scale:f,view:k,zoomScale:n})})}function e(a,c){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var g=c&&c.extent;return(c=m.createExtentFromGeometry(d&&
d.geometry,c,c&&c.scale))||e||(a&&g?g:void 0)}function g(d){var c=d.source,g=d.suggestResult,h=d.spatialReference,k=d.view,l=d.maxResults,m=d.sourceIndex,q=c&&c.zoomScale;d=g.text.trim();if(!d)return a.resolve();d=""+(!g.key&&c.prefix?c.prefix:"")+d+(!g.key&&c.suffix?c.suffix:"");var f={},r=c.locator,b=k&&k.scale,B=e(c,k);if(!r)return a.resolve();c.categories&&(f.categories=c.categories);h&&(r.outSpatialReference=h);if(h=n(k,c,b))f.location=h.location,f.distance=h.distance;f.maxLocations=l;B&&(f.searchExtent=
B);c.countryCode&&(f.countryCode=c.countryCode);var z=g.key;z&&(f.magicKey=z);f.address={};f.address[c.singleLineFieldName||"Single Line Input"]=d;c.outFields&&(f.outFields=c.outFields);return r.addressToLocations(f).then(function(a){return p(a,{key:z,scale:b,sourceIndex:m,view:k,zoomScale:q})})}function h(a,c){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:c}})}function p(a,c){return a.map(function(a){var d=c.key,e=c.scale,g=c.sourceIndex,h=c.view,k=c.zoomScale,f=a.extent,
r=a.location,b=a.address;a=new t({geometry:r,attributes:a.attributes});e=m.createExtentFromGeometry(f||r,h,e);h=k?m.scaleExtent(e,h,k):e;r=r?r.x+","+r.y:"";return{extent:h,feature:a,key:d,name:b||r,sourceIndex:g}})}function n(a,c,e){var d=c.localSearchOptions;if(a&&d&&d.hasOwnProperty("distance")&&d.hasOwnProperty("minScale")&&(c=d.minScale,d=d.distance,!c||e&&e<=c))return{location:a.get("extent.center"),distance:d}}Object.defineProperty(k,"__esModule",{value:!0});k.getResults=function(a){return a.location?
q(a):g(a)};k.getSuggestions=function(d){var c=d.source,g=d.spatialReference,k=d.view,m=d.suggestTerm,l=d.maxSuggestions,p=d.sourceIndex;d={};var q=c.locator,f=k&&k.scale,r=e(c,k);if(!q)return a.resolve();c.categories&&(d.categories=c.categories);q.outSpatialReference=g;if(g=n(k,c,f))d.location=g.location,d.distance=g.distance;m=m.trim();if(!m)return a.resolve();g=c.prefix;k=c.suffix;d.text=""+(void 0===g?"":g)+m+(void 0===k?"":k);r&&(d.searchExtent=r);d.maxSuggestions=l;c.countryCode&&(d.countryCode=
c.countryCode);return q.suggestLocations(d).then(function(a){return h(a,p)})};k.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):!1}})},"*now":function(y){y(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search dojo/keys dojo/regexp ../core/Handles ../core/lang ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(y,k,t,a,m,q,e,g,h,p,n,d,c,u,x,A,l){var v=/<[a-z/][\s\S]*>/i;return function(k){function f(a){var b=k.call(this)||this;
b._handles=new p;b._inputNode=null;b._sourceMenuButtonNode=null;b._sourceListNode=null;b._suggestionListNode=null;b._searchResultRenderer=new x({container:document.createElement("div")});b._suggestPromise=null;b._relatedTarget=null;b.activeMenu="none";b.activeSource=null;b.activeSourceIndex=null;b.allPlaceholder=null;b.allSources=null;b.autoNavigate=null;b.autoSelect=null;b.defaultSources=null;b.goToOverride=null;b.iconClass="esri-icon-search";b.includeDefaultSources=null;b.label=e.widgetLabel;b.locationEnabled=
null;b.locationToAddressDistance=null;b.maxResults=null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.popupEnabled=null;b.popupTemplate=null;b.portal=null;b.resultGraphic=null;b.resultGraphicEnabled=null;b.results=null;b.searchAllEnabled=null;b.searchTerm=null;b.selectedResult=null;b.sources=null;b.suggestions=null;b.suggestionsEnabled=null;b.view=null;b.viewModel=new A;b.own(d.watch(b,"searchTerm",function(a){if(a&&"warning"===b.activeMenu||!a&&!b.get("viewModel.selectedSuggestion.location"))b.activeMenu=
"none"}),d.on(b,"viewModel.allSources","change",function(){return b._watchSourceChanges()}),d.init(b,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===b.get("viewModel.popupTemplate.content")&&(b.viewModel.popupTemplate.content=b._renderSearchResultsContent.bind(b))}));return b}t(f,k);f.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),
this._searchResultRenderer=null)};f.prototype.clear=function(){};f.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};f.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};f.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();return this.viewModel.search(a).catch(function(a){b.activeMenu="none";return a}).then(function(a){b.activeMenu=
a.numResults?"none":"warning";return a})};f.prototype.suggest=function(a){var b=this;this._cancelSuggest();return this._suggestPromise=a=this.viewModel.suggest(a).then(function(a){a.numResults&&(b.activeMenu="suggestion");b._scrollToTopSuggestion();return a}).catch(function(){return null})};f.prototype.render=function(){var a=this,b,c,d=this.viewModel,f=d.activeSourceIndex,g=d.suggestions,h=d.maxInputLength,k=d.placeholder,m=d.searchTerm,p=d.searchAllEnabled,t=d.allSources,u=this._getSourceName(f),
v=(""+m).trim(),x=this.activeMenu,y=this.id,C=this.viewModel.state,w=this.id+"-suggest-menu",h=l.tsx("input",{bind:this,placeholder:k,"aria-label":e.searchButtonTitle,maxlength:h,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:m,"aria-haspopup":"true","aria-owns":w,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,
afterCreate:l.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:m?"":k}),h=l.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},h),k=m?l.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:e.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,
onkeydown:this._handleClearButtonClick},l.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,E=this.locationEnabled&&!v?l.tsx("ul",{key:"esri-search__suggestion-list-current-location",class:this.classes("esri-search__suggestions-list","esri-search__suggestions-list--current-location")},l.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",tabindex:"-1"},l.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-icon-locate-circled"})," ",e.useCurrentLocation)):null,I=1<t.length&&f===A.ALL_INDEX,f=g?g.map(function(b,c){var d=b.sourceIndex,e=b.results.length;c=e&&I?a._getSuggestionHeaderNode(d):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c,d)});b=e?l.tsx("ul",{key:"esri-search__suggestion-list-"+d,class:"esri-search__suggestions-list"},b):null;return[c,b]}):null,w=l.tsx("div",{id:w,"aria-expanded":"suggestion"===x,key:"esri-search__suggestions-menu",class:this.classes("esri-menu",
"esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:l.storeNode,"data-node-ref":"_suggestionListNode"},E,f),w=l.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},h,w,k),f=l.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:e.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},l.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-icon-search"}),l.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle)),m=v?n.substitute({value:'"'+m+'"'},e.noResultsFoundForValue):e.noResultsFound,m=d.get("selectedSuggestion.location")||v?l.tsx("div",{key:"esri-search__no_results"},l.tsx("div",{class:"esri-search__warning-header"},e.noResults),l.tsx("div",{class:"esri-search__warning-text"},m)):null,d=d.get("selectedSuggestion.location")||v?null:l.tsx("div",{key:"esri-search__empty-search"},l.tsx("span",
{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),l.tsx("span",{class:"esri-search__no-value-text"},e.emptyValue)),d=l.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},l.tsx("div",{class:"esri-search__warning-body"},m,d)),v=1<t.length,t=t&&t.toArray(),p=p?this._getSourceNode(A.ALL_INDEX):null,y=y+"-source-menu",u=v?l.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:e.searchIn,"aria-haspopup":"true","aria-expanded":"source"===
x,"aria-controls":y,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:l.storeNode,"data-node-ref":"_sourceMenuButtonNode"},l.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),l.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon-up-arrow esri-search__sources-button--up"}),l.tsx("span",{class:"esri-search__source-name"},u)):null,p=v?l.tsx("ul",{bind:this,afterCreate:l.storeNode,"data-node-ref":"_sourceListNode"},p,t.map(function(b,c){return a._getSourceNode(c)})):null,y=l.tsx("div",{id:y,key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},p),x=(b={},b["esri-search--multiple-sources"]=v,b["esri-search--loading"]="loading"===C,b["esri-search--searching"]="searching"===
C,b["esri-search--warning"]="warning"===x,b["esri-search--sources"]="source"===x,b["esri-search--show-suggestions"]="suggestion"===x,b);b=(c={},c["esri-disabled"]="disabled"===C,c);c="loading"===C?l.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},l.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-widget__loader-animation"}),l.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle),l.tsx("span",{class:"esri-widget__loader-text"},q.loading)):
l.tsx("div",{role:"presentation",class:this.classes(x,"esri-search__container"),key:"base-container"},u,y,w,f,d);return l.tsx("div",{class:this.classes("esri-search esri-widget",b)},c)};f.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(d.watch(c,"name",function(){return a.scheduleRender()}),"sources")})};f.prototype._handleSourceMenuButtonKeydown=function(a){var b=a.keyCode;b===g.UP_ARROW||b===g.DOWN_ARROW||
b===g.END||b===g.HOME?(a.preventDefault(),a.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(a)};f.prototype._handleSourcesMenuToggleClick=function(a){var b="source"===this.activeMenu;this.activeMenu=b?"none":"source";this.renderNow();b?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(b=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(a=a.keyCode===g.END?b[b.length-1]:b[0])&&a.focus()};f.prototype._handleClearButtonClick=function(){this.viewModel.clear();
this._focus()};f.prototype._handleSearchButtonClick=function(){this.search()};f.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};f.prototype._handleUseCurrentLocationClick=function(){this._focus("none");this.viewModel.searchNearby()};f.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};f.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&
a.relatedTarget,this._sourceListNode)};f.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};f.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};f.prototype._clearButtonFocus=function(){this.activeMenu="none"};f.prototype._removeActiveMenu=function(a,b){a&&b&&b.contains(a)||(this.activeMenu="none")};f.prototype._cancelSuggest=function(){var a=this._suggestPromise;a&&a.cancel();this._suggestPromise=
null};f.prototype._handleInputKeydown=function(a){var b=a.keyCode;(b===g.TAB||b===g.ESCAPE||a.shiftKey&&b===g.TAB)&&this._cancelSuggest()};f.prototype._handleInputKeyup=function(a){var b=a.keyCode,c=a.ctrlKey||a.metaKey||b===g.copyKey||b===g.LEFT_ARROW||b===g.RIGHT_ARROW||b===g.ENTER||b===g.SHIFT,d=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;c||(b===g.TAB||b===g.ESCAPE||a.shiftKey&&b===g.TAB?(this._cancelSuggest(),b===g.ESCAPE&&(this.activeMenu="none")):b!==g.UP_ARROW&&
b!==g.DOWN_ARROW||!d?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),(a=d[b===g.UP_ARROW?d.length-1:0])&&a.focus()))};f.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};f.prototype._handleInputClick=function(a){this.activeMenu="suggestion"};f.prototype._handleInputPaste=function(a){var b=this.get("viewModel.searchTerm");a=a.target;b!==a.value&&(this.viewModel.searchTerm=
a.value);b&&this.suggest()};f.prototype._handleSourceMenuButtonKeyup=function(a){var b=a.keyCode;if(b===g.UP_ARROW||b===g.DOWN_ARROW||b===g.HOME||b===g.END)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(b=a[b===g.UP_ARROW||b===g.END?a.length-1:0])&&b.focus()};f.prototype._handleSourceKeyup=function(a){var b=a.target,c=this._sourceListNode?m.from(this._sourceListNode.getElementsByTagName("li")):null,d=a.keyCode;if(d===g.ESCAPE)this._focus("none"),
this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(c){b=c.indexOf(b);if(d===g.HOME||d===g.END||d===g.UP_ARROW||d===g.DOWN_ARROW)a.stopPropagation(),a.preventDefault();d===g.HOME?(c=c[0])&&c.focus():d===g.END?(c=c[c.length-1])&&c.focus():d===g.UP_ARROW?(a=b-1,(c=0>a?this._sourceMenuButtonNode:c[a])&&c.focus()):d===g.DOWN_ARROW&&(a=b+1,(c=a>=c.length?this._sourceMenuButtonNode:c[a])&&c.focus())}};f.prototype._handleSuggestionKeyup=function(a){var b=a.target,c=this._suggestionListNode?
m.from(this._suggestionListNode.getElementsByTagName("li")):null,b=c.indexOf(b),d=a.keyCode;this._cancelSuggest();if(d===g.BACKSPACE||d===g.DELETE)this._focus();else if(d===g.ESCAPE)this._focus("none");else if(c){if(d===g.HOME||d===g.END||d===g.UP_ARROW||d===g.DOWN_ARROW)a.stopPropagation(),a.preventDefault();d===g.HOME&&(a=c[0])&&a.focus();d===g.END&&(a=c[c.length-1])&&a.focus();d===g.UP_ARROW?(--b,(c=0>b?c[c.length-1]:c[b])&&c.focus()):d===g.DOWN_ARROW&&(b+=1,(c=b>=c.length?c[0]:c[b])&&c.focus())}};
f.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};f.prototype._formSubmit=function(a){a.preventDefault();this.search()};f.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);return a===A.ALL_INDEX?e.all:b?b.name||e.untitledSource:e.untitledSource};f.prototype._getSuggestionHeaderNode=function(a){var b=this._getSourceName(a);return l.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},b)};f.prototype._splitResult=function(a,
b){b=h.escapeString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};f.prototype._getSuggestionNode=function(a,b,c){if(c=this.viewModel.searchTerm){var d=a.text||e.untitledResult,f=[];if(v.test(d))f.push(l.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&(a.toLowerCase()===g?f.push(l.tsx("strong",{key:b},a)):f.push(a))})}return l.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,
onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",tabindex:"-1"},f)}};f.prototype._getSourceNode=function(a){var b,c=(b={},b["esri-search__source--active"]=a===this.viewModel.activeSourceIndex,b);return l.tsx("li",{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source",
c),tabindex:"-1"},this._getSourceName(a))};f.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};a([c.property(),l.renderable()],f.prototype,"activeMenu",void 0);a([c.aliasOf("viewModel.activeSource"),l.renderable()],f.prototype,"activeSource",void 0);a([c.aliasOf("viewModel.activeSourceIndex"),l.renderable()],f.prototype,"activeSourceIndex",void 0);a([c.aliasOf("viewModel.allPlaceholder"),
l.renderable()],f.prototype,"allPlaceholder",void 0);a([c.aliasOf("viewModel.allSources")],f.prototype,"allSources",void 0);a([c.aliasOf("viewModel.autoNavigate")],f.prototype,"autoNavigate",void 0);a([c.aliasOf("viewModel.autoSelect")],f.prototype,"autoSelect",void 0);a([c.aliasOf("viewModel.defaultSources")],f.prototype,"defaultSources",void 0);a([c.aliasOf("viewModel.goToOverride")],f.prototype,"goToOverride",void 0);a([c.property()],f.prototype,"iconClass",void 0);a([c.aliasOf("viewModel.includeDefaultSources")],
f.prototype,"includeDefaultSources",void 0);a([c.property()],f.prototype,"label",void 0);a([l.renderable(),c.aliasOf("viewModel.locationEnabled")],f.prototype,"locationEnabled",void 0);a([c.aliasOf("viewModel.locationToAddressDistance")],f.prototype,"locationToAddressDistance",void 0);a([c.aliasOf("viewModel.maxResults")],f.prototype,"maxResults",void 0);a([c.aliasOf("viewModel.maxSuggestions")],f.prototype,"maxSuggestions",void 0);a([c.aliasOf("viewModel.minSuggestCharacters")],f.prototype,"minSuggestCharacters",
void 0);a([c.aliasOf("viewModel.popupEnabled")],f.prototype,"popupEnabled",void 0);a([c.aliasOf("viewModel.popupTemplate")],f.prototype,"popupTemplate",void 0);a([c.aliasOf("viewModel.portal")],f.prototype,"portal",void 0);a([c.aliasOf("viewModel.resultGraphic")],f.prototype,"resultGraphic",void 0);a([c.aliasOf("viewModel.resultGraphicEnabled")],f.prototype,"resultGraphicEnabled",void 0);a([c.aliasOf("viewModel.results"),l.renderable()],f.prototype,"results",void 0);a([c.aliasOf("viewModel.searchAllEnabled"),
l.renderable()],f.prototype,"searchAllEnabled",void 0);a([c.aliasOf("viewModel.searchTerm"),l.renderable()],f.prototype,"searchTerm",void 0);a([c.aliasOf("viewModel.selectedResult")],f.prototype,"selectedResult",void 0);a([c.aliasOf("viewModel.sources")],f.prototype,"sources",void 0);a([c.aliasOf("viewModel.suggestions"),l.renderable()],f.prototype,"suggestions",void 0);a([c.aliasOf("viewModel.suggestionsEnabled")],f.prototype,"suggestionsEnabled",void 0);a([c.aliasOf("viewModel.view"),l.renderable()],
f.prototype,"view",void 0);a([l.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),c.property({type:A}),l.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],f.prototype,"viewModel",void 0);a([c.aliasOf("viewModel.clear")],f.prototype,"clear",null);a([l.accessibleHandler()],f.prototype,"_handleSourcesMenuToggleClick",null);a([l.accessibleHandler()],f.prototype,"_handleClearButtonClick",
null);a([l.accessibleHandler()],f.prototype,"_handleSearchButtonClick",null);a([l.accessibleHandler()],f.prototype,"_handleSuggestionClick",null);a([l.accessibleHandler()],f.prototype,"_handleUseCurrentLocationClick",null);a([l.accessibleHandler()],f.prototype,"_handleSourceClick",null);return f=a([c.subclass("esri.widgets.Search")],f)}(c.declared(u))});