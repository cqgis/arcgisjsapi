// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("../core/lang ../core/Accessor ../renderers/support/colorRampUtils dojo/i18n!./ColorRampSelector/nls/ColorRampSelector dojo/store/Memory dijit/form/FilteringSelect dojo/dom-style dojo/on".split(" "),function(e,g,d,h,k,l,f,m){return g.createSubclass([l],{declaredClass:"esri.widget.ColorRampSelector",_colorRampNameMap:null,_colorRamps:null,_namesShown:!1,colorRamp:null,reverseRamp:!1,constructor:function(a){this._i18n=h;this._colorRamps=e.clone(d.PREDEFINED_JSON_COLOR_RAMPS);this._colorRampNameMap=
e.clone(d.PREDEFINED_COLOR_RAMP_NAME_MAP)},startup:function(){this.inherited(arguments);this._styleDijitInput();this._setupColorRampList();this._setupDropdownEvents();this._handleColorRampChange();this._setColorRamp()},_setupDropdownEvents:function(){m(this.inputContainer,"click",this.toggleDropDown.bind(this));this.dropDownEventsSetup=!0},_setColorRamp:function(){var a=this.colorRamp;a?this.setSelected(a)||(this.addColorRamp(a),this.setSelected(a)):this.reset()},_setupColorRampList:function(){this._generateColorRamps();
this._populateColorRampList()},_styleDijitInput:function(){var a=this.domNode.getElementsByClassName("dijitReset dijitInputInner")[0];this.inputContainer=this.domNode.getElementsByClassName("dijitReset dijitInputField dijitInputContainer")[0];f.set(this.inputContainer,"height","25px!important");f.set(a,"display","none")},_generateColorRamps:function(){var a=this._i18n.colorRamps,b;this._colorRamps.forEach(function(c){c.name=a[c.id]||c.name;b=this._generateColorRampDivs(c);c.labelGradient="\x3cdiv title\x3d'"+
c.name+"' style\x3d'height:20px; padding: 2px; direction: ltr!important;'\x3e"+b+"\x3c/div\x3e";c.label=this._namesShown?"\x3clabel style\x3d'display: block; padding-left: 2px;'\x3e"+c.name+"\x3c/label\x3e\x3cdiv style\x3d'height:20px; padding: 2px; direction: ltr!important;'\x3e"+b+"\x3c/div\x3e":c.labelGradient},this)},_populateColorRampList:function(){this.set("labelAttr","label");this.set("labelType","html");this.set("searchAttr","id");this.set("store",new k({data:this._colorRamps}));this._handleColorRampChange()},
_generateColorRampDivs:function(a){if(a){var b,c="";"multipart"===a.type?(b=100/a.colorRamps.length,a.colorRamps.forEach(function(a){c+=this._generateSingleGradientDiv(a.fromColor,a.toColor,b)},this)):c=this._generateSingleGradientDiv(a.fromColor,a.toColor,100);return c}},_generateSingleGradientDiv:function(a,b,c){if(a&&b){var d,e="";a=a.toRgb?a.toRgb():a;b=b.toRgb?b.toRgb():b;d="(90deg, rgb("+a.slice(0,3).join()+"), rgb("+b.slice(0,3).join()+"));";["-webkit-linear-gradient","-o-linear-gradient",
"-moz-linear-gradient","linear-gradient"].forEach(function(a){e+="background: "+a+d});return"\x3cdiv style\x3d' display: inline-block; width:"+c+"%; padding: 0; height: 100%;"+e+"'\x3e\x3c/div\x3e"}},onChange:function(){this.inherited(arguments);this._handleColorRampChange()},_handleColorRampChange:function(){if(this.inputContainer){var a={};this._colorRamps.some(function(b){if(b.id===this.value)return a=b,!0},this)&&(this.inputContainer.innerHTML=a.labelGradient,this.colorRampName=d.getColorRampName(a.id),
this.colorRamp=a)}},showNames:function(a){this._namesShown=a;this._setupColorRampList()},reset:function(){this.set("value","aspect_predefined",!1);this._handleColorRampChange()},removeColorRamp:function(a){a&&this.store&&this.store.data&&this.store.data.length&&this.store.remove(a.id)},addColorRamp:function(a){if(a){var b=this._generateColorRampDivs(a);a.labelGradient="\x3cdiv title\x3d'"+a.name+"' style\x3d'height:18px; padding: 1px; direction: "+(this.reverseRamp?"rtl":"ltr")+"!important;'\x3e"+
b+"\x3c/div\x3e";a.label=this._namesShown?"\x3clabel style\x3d'display: block; padding-left: 2px;'\x3e"+a.name+"\x3c/label\x3e\x3cdiv style\x3d'height:18px; padding: 1px; direction: ltr!important;'\x3e"+b+"\x3c/div\x3e":a.labelGradient;this.store&&this.store.data&&this.store.data.length?this.store.put(a,{overwrite:!0}):this._colorRamps.push(a);this._colorRampNameMap[a.id]=a.name}},setSelected:function(a){if(!a)return this.reset(),!1;if(a=d.getColorRampId(a,this._colorRamps,this._colorRampNameMap))return this.set("value",
a,!1),this._handleColorRampChange(a),!0;this.reset();return!1}})});