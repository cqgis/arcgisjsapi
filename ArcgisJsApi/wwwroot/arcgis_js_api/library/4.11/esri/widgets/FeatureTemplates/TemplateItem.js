// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.11/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../symbols/support/symbolUtils".split(" "),function(g,t,l,e,m,n,p,f,q,d,r){return function(k){function b(a){a=k.call(this)||this;a.description=null;a.label=null;a.layer=null;a.template=null;a.thumbnail=null;return a}l(b,k);h=b;b.prototype.initialize=function(){var a=
this;this.handles.add(q.init(this,["layer.renderer","template"],function(){return a._set("thumbnail",null)}))};b.prototype.clone=function(){var a=this.thumbnail?this.thumbnail.cloneNode(!0):null,c=new h({layer:this.layer,template:this.template});c._set("thumbnail",a);return c};b.prototype.fetchThumbnail=function(){var a=this;return this._get("thumbnail")?f.resolve():this._getPreviewSymbol().then(function(a){return r.renderPreviewHTML(a,{maxSize:36})}).then(function(c){a._set("thumbnail",c)})};b.prototype._getPreviewSymbol=
function(){var a=this.layer,c=this.template,b=this.layer.renderer;return b&&(c=new m({attributes:c.prototype.attributes}),b=b.getSymbol(c))?f.resolve(b):this._getFallbackSymbolFromGeometry(a)};b.prototype._getFallbackSymbolFromGeometry=function(a){a=a.geometryType;if("point"===a||"multipoint"===a)return f.create(function(a){return g(["../../symbols/SimpleMarkerSymbol"],a)}).then(function(a){return new a});if("polyline"===a)return f.create(function(a){return g(["../../symbols/SimpleLineSymbol"],a)}).then(function(a){return new a});
if("polygon"===a||"mesh"===a||"multipatch"===a)return f.create(function(a){return g(["../../symbols/SimpleFillSymbol"],a)}).then(function(a){return new a})};var h;e([d.property({aliasOf:"template.description"})],b.prototype,"description",void 0);e([d.property({aliasOf:"template.name"})],b.prototype,"label",void 0);e([d.property()],b.prototype,"layer",void 0);e([d.property()],b.prototype,"template",void 0);e([d.property({readOnly:!0})],b.prototype,"thumbnail",void 0);return b=h=e([d.subclass("esri.widgets.FeatureTemplates.TemplateItem")],
b)}(d.declared(n,p))});