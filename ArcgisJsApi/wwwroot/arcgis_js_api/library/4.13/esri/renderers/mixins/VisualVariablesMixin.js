// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),function(x,e,l,h,m,n,f,k,p,q,r,t,u,
v){Object.defineProperty(e,"__esModule",{value:!0});var w={base:u,key:"type",typeMap:{opacity:q,color:p,rotation:r,size:t}};e.VisualVariablesMixin=function(e){return function(e){function a(){var c=null!==e&&e.apply(this,arguments)||this;c._vvFactory=new v;return c}l(a,e);Object.defineProperty(a.prototype,"visualVariables",{set:function(c){this._vvFactory.visualVariables=c;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});a.prototype.readVisualVariables=
function(c,d,b){return this._vvFactory.readVariables(c,d,b)};a.prototype.writeVisualVariables=function(c,d,b,a){d[b]=this._vvFactory.writeVariables(c,a)};a.prototype.hasVisualVariables=function(c,d){return c?!!this.getVisualVariablesForType(c,d):!!(this.getVisualVariablesForType("size",d)||this.getVisualVariablesForType("color",d)||this.getVisualVariablesForType("opacity",d)||this.getVisualVariablesForType("rotation",d))};a.prototype.getVisualVariablesForType=function(c,d){var b=this.visualVariables;
if(b&&(b=b.filter(function(b){return b.type===c&&("string"===typeof d?b.target===d:!1===d?!b.target:!0)}),!b||0!==b.length))return b};a.prototype.collectVVRequiredFields=function(c,d){return n(this,void 0,void 0,function(){var b,a,e,g;return m(this,function(f){switch(f.label){case 0:b=[],this.visualVariables&&(b=b.concat(this.visualVariables)),a=0,e=b,f.label=1;case 1:if(!(a<e.length))return[3,4];g=e[a];if(!g)return[3,3];g.field&&k.collectField(c,d,g.field);g.normalizationField&&k.collectField(c,
d,g.normalizationField);return g.valueExpression?[4,k.collectArcadeFieldNames(c,d,g.valueExpression)]:[3,3];case 2:f.sent(),f.label=3;case 3:return a++,[3,1];case 4:return[2]}})})};h([f.property({types:[w],value:null,json:{write:!0}})],a.prototype,"visualVariables",null);h([f.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],a.prototype,"readVisualVariables",null);h([f.writer("visualVariables")],a.prototype,"writeVisualVariables",null);return a=h([f.subclass("esri.renderers.mixins.VisualVariablesMixin")],
a)}(f.declared(e))}});