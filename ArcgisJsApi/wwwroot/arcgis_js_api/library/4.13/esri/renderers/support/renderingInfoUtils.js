// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Color ../../core/maybe ../visualVariables/support/visualVariableUtils ../../support/arcadeUtils".split(" "),function(C,g,m,u,v,A,w,x,B){function n(b,a){if(!b||b.symbol)return null;a=a.renderer;return b&&a&&a.getObservationRenderer?a.getObservationRenderer(b):a}function y(b,a){if(w.isSome(b.symbol))return b.symbol;var c=n(b,a);return c&&c.getSymbol(b,m({},a,{arcadeUtils:B}))}
function z(b,a){return v(this,void 0,void 0,function(){var c;return u(this,function(f){if(w.isSome(b.symbol))return[2,b.symbol];c=n(b,a);return[2,c&&c.getSymbolAsync(b,m({},a,{abortOptions:{signal:a.signal}}))]})})}Object.defineProperty(g,"__esModule",{value:!0});g.getRenderer=n;g.getSymbol=y;g.getRenderingInfo=function(b,a){var c=n(b,a),f=y(b,a);if(!f)return null;f={renderer:c,symbol:f};if(!(c&&"visualVariables"in c&&c.visualVariables))return f;var d=["proportional","proportional","proportional"],
g=0;for(b=x.getVisualVariableValues(c,b,a);g<b.length;g++){c=b[g];a=c.variable;var e=c.value;"color"===a.type?f.color=e.toRgba():"size"===a.type?"outline"===a.target?f.outlineSize=e:(c=a.axis,a=a.useSymbolValue?"symbolValue":e,"width"===c?d[0]=a:"depth"===c?d[1]=a:"height"===c?d[2]=a:d[0]="width-and-depth"===c?d[1]=a:d[1]=d[2]=a):"opacity"===a.type?f.opacity=e:"rotation"===a.type&&"tilt"===a.axis?f.tilt=e:"rotation"===a.type&&"roll"===a.axis?f.roll=e:"rotation"===a.type&&(f.heading=e)}if(isFinite(d[0])||
isFinite(d[1])||isFinite(d[2]))f.size=d;return f};g.getSymbolAsync=z;g.getRenderingInfoAsync=function(b,a){return v(this,void 0,void 0,function(){var c,f,d,g,e,q,r,t,h,k,p,l;return u(this,function(m){switch(m.label){case 0:return c=n(b,a),[4,z(b,a)];case 1:f=m.sent();if(!f)return[2,null];d={renderer:c,symbol:f};if(!(c&&"visualVariables"in c&&c.visualVariables))return[2,d];g=x.getVisualVariableValues(c,b,a);e=["proportional","proportional","proportional"];q=0;for(r=g;q<r.length;q++)t=r[q],h=t.variable,
k=t.value,"color"===h.type?d.color=A.toUnitRGBA(k):"size"===h.type?"outline"===h.target?d.outlineSize=k:(p=h.axis,l=h.useSymbolValue?"symbolValue":k,"width"===p?e[0]=l:"depth"===p?e[1]=l:"height"===p?e[2]=l:e[0]="width-and-depth"===p?e[1]=l:e[1]=e[2]=l):"opacity"===h.type?d.opacity=k:"rotation"===h.type&&"tilt"===h.axis?d.tilt=k:"rotation"===h.type&&"roll"===h.axis?d.roll=k:"rotation"===h.type&&(d.heading=k);if(isFinite(e[0])||isFinite(e[1])||isFinite(e[2]))d.size=e;return[2,d]}})})};g.getDriverAxisSizeValue=
function(b,a){void 0===a&&(a=0);b=b[a];return"number"===typeof b&&isFinite(b)?b:null}});