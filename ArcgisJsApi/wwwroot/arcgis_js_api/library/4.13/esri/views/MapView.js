// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c,e,h,r){function b(b,f){return f?a[b].valueToClassName[f].split(" "):[]}Object.defineProperty(d,"__esModule",{value:!0});var a={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;
var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?f.small:b<=a.medium?f.medium:b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?f.small:b<=a.medium?f.medium:b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},f={xsmall:544,small:768,medium:992,large:1200};d.BreakpointsOwner=function(k){return function(k){function p(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=k.apply(this,a)||this;a._breakpointsHandles=new e;a.orientation=null;
a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=f;return a}m(p,k);p.prototype.initialize=function(){this._breakpointsHandles.add(h.init(this,["breakpoints","size"],this._updateClassNames))};p.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};Object.defineProperty(p.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<
b.large;if(!b){var k=JSON.stringify(f,null,2);console.warn("provided breakpoints are not valid, using defaults:"+k)}a=b?a:f;this._set("breakpoints",l({},a))}},enumerable:!0,configurable:!0});p.prototype._updateClassNames=function(){if(this.container){var f=c.acquire(),k=c.acquire(),e=!1,p;for(p in a){var q=this[p],h=a[p].getValue({viewSize:this.size,breakpoints:this.breakpoints});q!==h&&(e=!0,this[p]=h,b(p,q).forEach(function(a){return k.push(a)}),b(p,h).forEach(function(a){return f.push(a)}))}e&&
(this._applyClassNameChanges(f,k),c.release(f),c.release(k))}};p.prototype._applyClassNameChanges=function(a,b){var f=this.container;f&&(b.forEach(function(a){return f.classList.remove(a)}),a.forEach(function(a){return f.classList.add(a)}))};p.prototype._removeActiveClassNames=function(){var f=this.container;if(f)for(var k in a)b(k,this[k]).forEach(function(a){return f.classList.remove(a)})};g([r.property()],p.prototype,"breakpoints",null);g([r.property()],p.prototype,"orientation",void 0);g([r.property()],
p.prototype,"widthBreakpoint",void 0);g([r.property()],p.prototype,"heightBreakpoint",void 0);return p=g([r.subclass("esri.views.BreakpointsOwner")],p)}(r.declared(k))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c){return function(e){function h(c){c=e.call(this)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=
!1;return c}m(h,e);Object.defineProperty(h.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});g([c.property({type:Number})],h.prototype,"factor",void 0);g([c.property({type:Number})],h.prototype,"offsetX",void 0);g([c.property({type:Number})],h.prototype,"offsetY",void 0);g([c.property()],h.prototype,"position",void 0);g([c.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],h.prototype,"version",null);g([c.property({type:Boolean})],
h.prototype,"visible",void 0);return h=g([c.subclass("esri.views.Magnifier")],h)}(c.declared(l))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(n,d,m,g,l,c,e,h,r,b,a,f,k,q,p,t,u,z,w,D,x,A,v,B,C){var y=r.getLogger("esri.views.MapView");return function(u){function t(a){var b=u.call(this,a)||this;b._frameTask=new D.default(b);b.featuresTilingScheme=null;b.fullOpacity=1;b.interacting=!1;b.initialExtent=null;b.labelManager=null;b.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};b.resizeAlign="center";b.timeline=new C.Timeline;b.type="2d";b.constraints=new x;b.padding={top:0,
right:0,bottom:0,left:0};var f=b.handles,k=function(){return b.notifyChange("updating")};f.add([b.watch("viewpoint",function(a){return b._flipStationary()},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.allLayerViews.on("change",function(){k();f.remove("map-view-base-layerViewsUpdating");f.add(b.allLayerViews.map(function(a){return a.watch("updating",k)}),"map-view-base-layerViewsUpdating")})],"map-view-base");b.watch("ready",
function(a){a?(b._startup(),b._frameTask&&b._frameTask.start()):(b._frameTask&&b._frameTask.stop(),b._tearDown())},!0);return b}g(t,u);t.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._frameTask=null)};Object.defineProperty(t.prototype,"animation",{set:function(a){var b=this,f=this._get("animation");a!==f&&(f&&f.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),f=function(){a===b._get("animation")&&
(b._set("animation",null),b._frameTask.requestFrame())},a.when(f,f)))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"center",{get:function(){if(!this.internallyReady)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.internallyReady){var b=this.viewpoint;B.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");
else y.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this.handles.remove("map-view-base-constraints"),f.destroy());this._set("constraints",a);a&&(a.view=this,this.internallyReady&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",
function(){b.internallyReady&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"extent",{get:function(){return this.internallyReady?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.internallyReady?(a=this.viewpoint,B.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",
b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):y.error("#extent","invalid extent size"):y.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,f=this.scale,k=this.viewpoint,
c=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==f||-1!==c)||k?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"padding",{get:function(){return this.internallyReady?this.state.padding:this._get("padding")},set:function(a){this.internallyReady?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"resolution",{get:function(){return this.state?this.state.resolution:
0},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"rotation",{get:function(){return this.internallyReady?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.internallyReady){var b=this.viewpoint;B.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"scale",{get:function(){return this.internallyReady?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.internallyReady){var b=
this.viewpoint;B.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"updating",{get:function(){return!this.destroyed&&
(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"viewpoint",{get:function(){if(!this.internallyReady)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.internallyReady?(a=new e({targetGeometry:new c.Point,
scale:0,rotation:0}),B.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?y.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?y.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):y.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"zoom",{get:function(){return this.internallyReady?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.internallyReady){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",
b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,B.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});t.prototype.goTo=function(a,b){var k=this;if(a)return f.whenTrueOnce(this,"ready",b&&b.signal).then(function(){k.animation&&(k.animation=null);var f=m({animate:!0},b),c=B.createAsync(a,k);k._gotoTask={};return f.animate?k._gotoAnimated(c,f):k._gotoImmediate(c,f)});y.error("#goTo()",
"target cannot be null or undefined")};t.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};t.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(f){return m({},f,{mapPoint:b.toMap(a)})})};t.prototype.toMap=function(a){if(!this.internallyReady)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};t.prototype.isTileInfoRequired=function(){return!0};t.prototype.toScreen=
function(b){if(!this.internallyReady)return null;b=this._normalizeInput(b);b=[b.x,b.y];b=this.state.toScreen(b,b);return a.createScreenPoint(b[0],b[1])};t.prototype.pixelSizeAt=function(a,b){if(!this.internallyReady)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};t.prototype.requestLayerViewUpdate=function(a){this.internallyReady&&this._frameTask.requestLayerViewUpdate(a)};t.prototype.requestUpdate=function(a){this.internallyReady&&this._frameTask.requestUpdate(a)};
t.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};t.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};t.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new z;this.animation.update(a);return this.animation};t.prototype._cancellableGoTo=function(a,f,k,c){var e=this,
p=k.then(function(){a===e._gotoTask&&(e.animation=null)}).catch(function(b){a===e._gotoTask&&(e.animation=null,f.done||f.stop());throw b;}),q=b.create(function(a){return a(p)},function(){a!==e._gotoTask||f.done||f.stop()});f.when().catch(function(){a===e._gotoTask&&q.cancel&&q.cancel()});return q};t.prototype._gotoImmediate=function(a,f){var k=this,c=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(f);if(c!==k._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");
k.viewpoint=e.target=a;e.finish()});return this._cancellableGoTo(c,e,a,f)};t.prototype._gotoAnimated=function(a,b){var f=this,k=this._gotoTask,c=this._createOrReplaceAnimation(a);a=a.then(function(a){if(k!==f._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");c.update(a);f.animationManager.animate(c,f.viewpoint,b);return c.when().then(function(){},function(){})});return this._cancellableGoTo(k,c,a,b)};t.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.content.viewpoint,
k=this.content.size.concat();b.size=[a.width,a.height];B.resize(f,f,k,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};t.prototype._startup=function(){if(!this.internallyReady){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new w({view:this}));this._set("state",new A({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",
new v.TileInfoView(p.create({spatialReference:this.spatialReference,size:512})));this.internallyReady=!0}};t.prototype._tearDown=function(){if(this.internallyReady){this.internallyReady=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,f=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:f});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",
-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",f);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};t.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};
t.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var f=a&&a.targetGeometry||a;return b?f?b.equals(f.spatialReference)?a:q.canProject(f,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=q.project(f,b),a):q.project(f,b):null:null:a};t.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),f=this._get("scale"),k=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),p=this._get("rotation"),q=this._normalizeInput(this._get("viewpoint"));
a.effectiveLODs?-1!==b&&(f=a.zoomToScale(b)):b=-1;var h=null,t=null,b=0,a=q&&q.rotation,u=q&&q.targetGeometry;u&&("extent"===u.type?h=u:"point"===u.type&&(t=u,b=q.scale));q=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));u=this._normalizeInput(this.initialExtent);c=c||h||q||u;k=k||t||c&&c.center;f=f||b||c&&B.extentToScale(c,this.size);return k&&f?new e({targetGeometry:k,scale:f,rotation:p||a||0}):null};l([k.property()],t.prototype,"animation",null);l([k.property({readOnly:!0})],
t.prototype,"animationManager",void 0);l([k.property({value:null,type:c.Point,dependsOn:["content.viewpoint"]})],t.prototype,"center",null);l([k.property({type:x})],t.prototype,"constraints",null);l([k.property({readOnly:!0})],t.prototype,"content",void 0);l([k.property({value:null,type:c.Extent,dependsOn:["content.viewpoint"]})],t.prototype,"extent",null);l([k.property({readOnly:!0})],t.prototype,"featuresTilingScheme",void 0);l([k.property()],t.prototype,"fullOpacity",void 0);l([k.property({readOnly:!0})],
t.prototype,"interacting",void 0);l([k.property({type:c.Extent})],t.prototype,"initialExtent",void 0);l([k.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],t.prototype,"initialExtentRequired",null);l([k.property()],t.prototype,"labelManager",void 0);l([k.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return m({top:0,right:0,bottom:0,left:0},a)}})],t.prototype,"padding",null);l([k.property({type:Object})],t.prototype,"renderingOptions",void 0);l([k.property()],t.prototype,
"resizeAlign",void 0);l([k.property({readOnly:!0,dependsOn:["content.viewpoint"]})],t.prototype,"resolution",null);l([k.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],t.prototype,"rotation",null);l([k.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],t.prototype,"scale",null);l([k.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],t.prototype,"spatialReference",void 0);l([k.property({readOnly:!0})],
t.prototype,"state",void 0);l([k.property()],t.prototype,"stationary",null);l([k.property({type:C.Timeline,readOnly:!0})],t.prototype,"timeline",void 0);l([k.property({readOnly:!0})],t.prototype,"type",void 0);l([k.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],t.prototype,"updating",null);l([k.property({value:null,type:e,dependsOn:["content.viewpoint"]})],t.prototype,"viewpoint",null);l([k.property({value:-1,dependsOn:["scale"]})],
t.prototype,"zoom",null);return t=l([k.subclass("esri.views.MapViewBase")],t)}(k.declared(t.PopupView(u)))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c,e,h,r,b,a,f){Object.defineProperty(d,
"__esModule",{value:!0});d.PopupView=function(k){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}g(p,k);p.prototype.when=function(a,b){return this.inherited(arguments)};p.prototype.fetchPopupFeatures=function(a,b){return r.safeCast(this._fetchPopupFeaturesAsync(a,b))};p.prototype._fetchPopupFeaturesAsync=function(b,f){return c(this,void 0,void 0,function(){var k,c,p,q,t,u;return e(this,function(e){switch(e.label){case 0:return[4,this.when()];case 1:return e.sent(),[4,
this._prepareFetchPopupFeatures(b,f)];case 2:return k=e.sent(),c=k.location,p=this._queryLayerPopupFeatures(k,f),q=a.resolve(k.clientOnlyGraphics),t=[q].concat(p),u=a.eachAlwaysValues(t).then(h.flatten),[2,{promise:u,location:c,promises:t}]}})})};p.prototype._queryLayerPopupFeatures=function(a,f){var k=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,signal:b.isSome(f)?f.signal:null,defaultPopupTemplateEnabled:b.isSome(f)?!!f.defaultPopupTemplateEnabled:
!1};return c.fetchPopupFeatures(k,a)})};p.prototype._isValidPopupGraphic=function(a,f){return a&&!!a.getEffectivePopupTemplate(b.isSome(f)&&f.defaultPopupTemplateEnabled)};p.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var f,k,c,p,q,h,t,u;return e(this,function(e){switch(e.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return f=e.sent(),k=f.clientGraphics,c=f.queryArea,p=f.location,q=this._getFetchPopupLayerViews(),h=this._graphicsPerFetchPopupLayerView(k,
q),t=h.layerViewsAndGraphics,u=h.clientOnlyGraphics,[2,{clientOnlyGraphics:u,layerViewsAndGraphics:t,queryArea:c,location:p}]}})})};p.prototype._popupHitTestGraphics=function(a,b){return c(this,void 0,void 0,function(){var f,k,c,p,q,h,t=this;return e(this,function(e){switch(e.label){case 0:return[4,this.popupHitTest(a)];case 1:return f=e.sent(),k=f.results,c=f.mapPoint,p=k.filter(function(a){return t._isValidPopupGraphic(a.graphic,b)}),q=p.length?p[0].mapPoint:null,h=p.map(function(a){return a.graphic}),
[2,{clientGraphics:h,queryArea:c,location:c||q}]}})})};p.prototype._getFetchPopupLayerViews=function(){var a=this,f=[];this.allLayerViews.forEach(function(b){a._isValidPopupLayerView(b)&&f.push(b)});b.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&f.push(this.graphicsView);return f.reverse()};p.prototype._isValidPopupLayerView=function(a){return b.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};p.prototype._graphicsPerFetchPopupLayerView=function(a,
b){var f=[],k=new Map;b=b.map(function(a){var b=[];"layer"in a?k.set(a.layer,b):k.set(a.graphics,b);return{layerView:a,graphics:b}});for(var c=0;c<a.length;c++){var e=a[c],p=k.get(e.layer)||null;p?p.push(e):f.push(e)}return{layerViewsAndGraphics:b,clientOnlyGraphics:f}};return p=l([f.subclass("esri.views.PopupView")],p)}(f.declared(k))}})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(n,d,m,g,l,c,e,h){var r=function(b,a,f,k){var c=b.targetGeometry,p=a.targetGeometry;k?"string"===typeof k&&(k=e.parse(k)||e.ease):k=e.ease;this.easing=k;this.duration=f;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=p.x;this.tCenterY=p.y;this.tScale=a.scale;this.tRotation=a.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;
180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};r.prototype.applyRatio=function(b,a){var f=this.easing(a),k,c;1<=a?(a=this.tCenterX,k=this.tCenterY,c=this.tRotation,f=this.tScale):(a=this.sCenterX+f*this.dCenterX,k=this.sCenterY+f*this.dCenterY,c=this.sRotation+f*this.dRotation,f=this.sScale+f*this.dScale);b.targetGeometry.x=a;b.targetGeometry.y=k;b.scale=f;b.rotation=c};return d.createSubclass({constructor:function(){this.viewpoint=new n({targetGeometry:new l,scale:0,
rotation:0});this._updateTask=m.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:e.ease},view:null,viewpoint:null},animate:function(b,a,f){this.stop();h.copy(this.viewpoint,a);this.transition=new r(this.viewpoint,b.target,f&&f.duration||this.duration,f&&f.easing||this.easing);a=function(){this.animation===b&&this._updateTask&&("finished"===b.state&&(this.transition.applyRatio(this.viewpoint,
1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);b.when(a,a);this._startTime=g();this._updateTask.resume();return this.animation=b},animateContinous:function(b,a){this.stop();this.updateFunction=a;this.viewpoint=b;var f=new c({target:b.clone()});b=function(){this.animation===f&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);f.when(b,b);this._startTime=
g();this._updateTask.resume();return this.animation=f},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(b){var a=this.animation;a&&a.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(g()-this._startTime)/this.transition.duration,a=1<=b,this.transition.applyRatio(this.viewpoint,b),a&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var n=function(d,g,l,c){function e(a,f){var k,c,e,p;f=null==f?1E-6:f;e=a;for(c=0;8>c;c++){p=((b*e+r)*e+h)*e-a;if(Math.abs(p)<f)return e;k=(3*b*e+2*r)*e+h;if(1E-6>Math.abs(k))break;e-=p/k}k=0;c=1;e=a;if(e<k)return k;if(e>c)return c;for(;k<c;){p=((b*e+r)*e+h)*e;if(Math.abs(p-a)<f)break;a>p?k=e:c=e;e=.5*(c-k)+k}return e}var h=3*d,r=3*(l-d)-h,b=1-h-r,a=3*g,f=3*(c-g)-a,k=1-a-f;return function(b,c){b=e(b,c);return((k*b+f)*b+a)*b}},d=/^cubic-bezier\((.*)\)/;
n.parse=function(m){var g=n[m]||null;!g&&(m=d.exec(m))&&(m=m[1].split(",").map(function(d){return parseFloat(d.trim())}),4!==m.length||m.some(function(d){return isNaN(d)})||(g=n.apply(n,m)));return g};n.ease=n(.25,.1,.25,1);n.linear=n(0,0,1,1);n.easeIn=n["ease-in"]=n(.42,0,1,1);n.easeOut=n["ease-out"]=n(0,0,.58,1);n.easeInOut=n["ease-in-out"]=n(.42,0,.58,1);return n})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(n,d,m,g,l,c,e,h,r,b,a,f,k,q,p,t,u,z,w,D,x,A,v){function B(a,b,k,c){return c&&k&&!c.equals(k)&&A.canProject(c,k)&&c.isWebMercator?(c.isWebMercator?(k=b[1],89.99999<k?k=89.99999:-89.99999>k&&(k=-89.99999),k=Math.sin(f.common.toRadian(k)),a=p.vec2.set(a,f.common.toRadian(b[0])*K,.5*K*Math.log((1+k)/(1-k)))):(k=f.common.toDegree(b[0]/K),a=p.vec2.set(a,k-360*Math.floor((k+180)/360),f.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/K))))),a):p.vec2.copy(a,b)}function C(a){return a.wkid?
a:a.spatialReference||D.WGS84}function y(a,b){return b.type?p.vec2.set(a,b.x,b.y):p.vec2.copy(a,b)}function I(a,b){return Math.max(a.width/b[0],a.height/b[1])*S(a.spatialReference)}function E(a,b,f,k){return g(this,void 0,void 0,function(){var c,p,q,t,d,g,T,l,D,x,V,W,v,B,Q,n,C,y,I,F,H,G,O,L,P,K,J,N;return m(this,function(R){switch(R.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];e.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
p=a.every(function(a){return"attributes"in a});q=a.some(function(a){return!a.geometry});t=a;if(!(p&&q&&b&&b.allLayerViews))return[3,2];d=new Map;g=0;for(T=a;g<T.length;g++)l=T[g],D=l.layer,x=d.get(D)||[],V=l.attributes[D.objectIdField],null!=V&&x.push(V),d.set(D,x);W=[];d.forEach(function(a,f){var k=b.allLayerViews.find(function(a){return a.layer.id===f.id});if("queryFeatures"in k){var c=f.createQuery();c.objectIds=a;c.returnGeometry=!0;W.push(k.queryFeatures(c))}});return[4,r.all(W)];case 1:v=R.sent();
B=[];Q=0;for(n=v;Q<n.length;Q++)if((C=n[Q])&&C.features&&C.features.length)for(y=0,I=C.features;y<I.length;y++)l=I[y],h.isSome(l.geometry)&&B.push(l.geometry);t=B;R.label=2;case 2:F=0,H=t,R.label=3;case 3:if(!(F<H.length))return[3,6];G=H[F];return[4,E(G,b,f,k)];case 4:k=R.sent(),R.label=5;case 5:return F++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];c=new w(a);return[3,12];case 8:if(!(a instanceof z))return[3,9];c=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];c=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];O=a.layer;L=b.allLayerViews.find(function(a){return a.layer.id===O.id});if(!("queryFeatures"in L))return[3,12];P=O.createQuery();P.objectIds=[a.attributes[O.objectIdField]];P.returnGeometry=!0;return[4,L.queryFeatures(P)];case 11:K=R.sent(),c=h.get(K,"features",0,"geometry"),R.label=12;case 12:if(h.isNone(c))return[2,null];J="point"===c.type?new u({xmin:c.x,
ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent;if(!J)return[2,null];N=A.canProject(J,f);if(!J.spatialReference.equals(f)&&N)J=A.project(J,f);else if(!N)return[2,null];k=k?k.union(J):J.clone();return[2,k]}})})}function F(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var f=0,k=0,c=0;c<a.length;c++)(b=a[c].layer)&&b.minScale&&b.maxScale&&(f=b.minScale<f?b.minScale:f,k=b.maxScale>k?b.maxScale:k);return f&&k?{min:f,max:k}:null}}}function H(a,b){return g(this,void 0,void 0,function(){var f,k,c,e,p,q,h,d,g,r,z,T,D,x,n,Q;return m(this,function(R){switch(R.label){case 0:if(!a||!b)return[2,new l({targetGeometry:new w,scale:0,rotation:0})];f=b.spatialReference;k=b.size;c=b.viewpoint;e=b.constraints;p=null;"esri.Viewpoint"===
a.declaredClass?p=a:a.viewpoint?p=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(p=a.target);q=null;if(!p||!p.targetGeometry)return[3,1];q=p.targetGeometry;return[3,10];case 1:if(!(a instanceof u))return[3,2];q=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,E(a.center,b,f)]:[3,10];case 3:return(g=R.sent())?[3,5]:[4,E(a.extent,b,f)];case 4:g=R.sent(),R.label=5;case 5:return(d=g)?[3,7]:[4,E(a.target,b,f)];
case 6:d=R.sent(),R.label=7;case 7:return(h=d)?[3,9]:[4,E(a,b,f)];case 8:h=R.sent(),R.label=9;case 9:q=h,R.label=10;case 10:!q&&c&&c.targetGeometry?q=c.targetGeometry:!q&&b.extent&&(q=b.extent);r=C(q);f||(f=C(b.spatialReference||b.extent||q));if(!v.canProject(q,f)&&r&&!r.equals(f))return[2,null];z=y(t.vec2f64.create(),q.center?q.center:q);T=new w(B(z,z,r,f),f);D=null;D=p&&p.targetGeometry&&"point"===p.targetGeometry.type?p.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&
-1!==a.zoom&&e&&e.effectiveLODs?e.zoomToScale(a.zoom):Array.isArray(q)||"point"===q.type||"extent"===q.type&&0===q.width&&0===q.height?b.extent&&A.canProject(b.extent,f)?I(A.project(b.extent,f),k):b.extent?I(b.extent,k):c.scale:A.canProject(q.extent,f)?I(A.project(q.extent,f),k):I(q.extent,k);if(x=F(a))x.min&&x.min>D?D=x.min:x.max&&x.max<D&&(D=x.max);n=0;p?n=p.rotation:a.hasOwnProperty("rotation")?n=a.rotation:c&&(n=c.rotation);Q=new l({targetGeometry:T,scale:D,rotation:n});e&&(Q=e.fit(Q),e.rotationEnabled||
(Q.rotation=n));return[2,Q]}})})}function G(a,b){var f=a.targetGeometry,k=b.targetGeometry;f.x=k.x;f.y=k.y;f.spatialReference=k.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function N(a,b,f){return f?p.vec2.set(a,.5*(b[0]-f.right+f.left),.5*(b[1]-f.bottom+f.top)):p.vec2.scale(a,b,.5)}function P(a,b,f,c){d.getTransform(a,b,f,c);return k.mat2d.invert(a,a)}function O(a,b,f){var k=J(b);b=Math.abs(Math.cos(k));k=Math.abs(Math.sin(k));return p.vec2.set(a,Math.round(f[1]*k+f[0]*b),Math.round(f[1]*
b+f[0]*k))}function L(a){var f=a.scale;a=a.targetGeometry.spatialReference;a=x.isValid(a)?1/(39.37*b.getMetersPerUnitForSR(a)*96):1;return f*a}function J(a){return f.common.toRadian(a.rotation)||0}function S(a){return x.isValid(a)?39.37*b.getMetersPerUnitForSR(a)*96:1}function M(a){return a.isWrappable?(a=x.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var K=a.wgs84Radius,X=180/Math.PI;d.extentToScale=I;d.create=H;d.copy=G;d.getAnchor=N;d.getExtent=function(){var a=
t.vec2f64.create();return function(b,f,k){var c=f.targetGeometry;y(a,c);f=.5*L(f);b.xmin=a[0]-f*k[0];b.ymin=a[1]-f*k[1];b.xmax=a[0]+f*k[0];b.ymax=a[1]+f*k[1];b.spatialReference=c.spatialReference;return b}}();d.setExtent=function(a,b,f,k,c){d.centerAt(a,b,f.center);a.scale=I(f,k);c&&c.constraints&&c.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(f,k,c){y(a,k.targetGeometry);O(b,k,c);c=.5*L(k);f.set({xmin:a[0]-c*b[0],ymin:a[1]-
c*b[1],xmax:a[0]+c*b[0],ymax:a[1]+c*b[1],spatialReference:k.targetGeometry.spatialReference});return f}}();d.getOuterSize=O;d.getPaddingScreenTranslation=function(){var a=t.vec2f64.create();return function(b,f,k){return p.vec2.sub(b,p.vec2.scale(b,f,.5),N(a,f,k))}}();d.getPaddingMapTranslation=function(){var a=q.mat2df64.create(),b=t.vec2f64.create();return function(f,c,e,q){var h=L(c);c=J(c);p.vec2.set(b,h,h);k.mat2d.fromScaling(a,b);k.mat2d.rotate(a,a,c);k.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,
e,q));k.mat2d.translate(a,a,[0,q.top-q.bottom]);return p.vec2.set(f,a[4],a[5])}}();d.getResolution=L;d.getResolutionToScaleFactor=S;d.getMatrix=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),f=t.vec2f64.create();return function(c,e,q,h,t,u){p.vec2.negate(a,e);p.vec2.scale(b,q,.5*u);p.vec2.set(f,1/h*u,-1/h*u);k.mat2d.identity(c);k.mat2d.translate(c,c,b);t&&k.mat2d.rotate(c,c,t);k.mat2d.scale(c,c,f);k.mat2d.translate(c,c,a);return c}}();d.getTransform=function(){var a=t.vec2f64.create();return function(b,
f,k,c){var e=L(f),p=J(f);y(a,f.targetGeometry);return d.getMatrix(b,a,k,e,p,c)}}();d.getTransformNoRotation=function(){var a=t.vec2f64.create();return function(b,f,k,c){var e=L(f);y(a,f.targetGeometry);return d.getMatrix(b,a,k,e,0,c)}}();d.getWorldWidth=M;d.getWorldScreenWidth=function(a,b){return Math.round(M(a)/b)};d.createAsync=function(a,b){return c.safeCast(H(a,b))};d.angleBetween=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),f=[0,0,0];return function(k,c,e){p.vec2.subtract(a,k,c);
p.vec2.normalize(a,a);p.vec2.subtract(b,k,e);p.vec2.normalize(b,b);p.vec2.cross(f,a,b);k=Math.acos(p.vec2.dot(a,b)/(p.vec2.length(a)*p.vec2.length(b)))*X;0>f[2]&&(k=-k);isNaN(k)&&(k=0);return k}}();d.addPadding=function(){var a=t.vec2f64.create();return function(b,f,k,c){var e=b.targetGeometry;G(b,f);d.getPaddingMapTranslation(a,f,k,c);e.x+=a[0];e.y+=a[1];return b}}();d.removePadding=function(){var a=t.vec2f64.create();return function(b,f,k,c){var e=b.targetGeometry;G(b,f);d.getPaddingMapTranslation(a,
f,k,c);e.x-=a[0];e.y-=a[1];return b}}();d.centerAt=function(){var a=t.vec2f64.create();return function(b,f,k){G(b,f);f=b.targetGeometry;var c=C(k),e=C(f);y(a,k);B(a,a,c,e);f.x=a[0];f.y=a[1];return b}}();d.pixelSizeAt=function(a,b,f){return L(b)};d.resize=function(){var a=t.vec2f64.create();return function(b,f,k,c,e){e||(e="center");p.vec2.sub(a,k,c);p.vec2.scale(a,a,.5);k=a[0];c=a[1];switch(e){case "center":p.vec2.set(a,0,0);break;case "left":p.vec2.set(a,-k,0);break;case "top":p.vec2.set(a,0,c);
break;case "right":p.vec2.set(a,k,0);break;case "bottom":p.vec2.set(a,0,-c);break;case "top-left":p.vec2.set(a,-k,c);break;case "bottom-left":p.vec2.set(a,-k,-c);break;case "top-right":p.vec2.set(a,k,c);break;case "bottom-right":p.vec2.set(a,k,-c)}d.translateBy(b,f,a);return b}}();d.rotateBy=function(a,b,f){G(a,b);a.rotation+=f;return a};d.rotateTo=function(a,b,f){G(a,b);a.rotation=f;return a};d.scaleBy=function(){var a=t.vec2f64.create();return function(b,f,k,c,e){G(b,f);isNaN(k)||0===k||(d.toMap(a,
c,f,e),b.scale=f.scale*k,d.toScreen(a,a,b,e),d.translateBy(b,b,p.vec2.set(a,a[0]-c[0],c[1]-a[1])));return b}}();d.scaleTo=function(a,b,f){G(a,b);a.scale=f;return a};d.scaleAndRotateBy=function(){var a=t.vec2f64.create();return function(b,f,k,c,e,q){G(b,f);isNaN(k)||0===k||(d.toMap(a,e,f,q),b.scale=f.scale*k,b.rotation+=c,d.toScreen(a,a,b,q),d.translateBy(b,b,p.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();d.padAndScaleAndRotateBy=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(f,
k,c,e,q,h,t){d.getPaddingScreenTranslation(b,h,t);p.vec2.add(a,q,b);return e?d.scaleAndRotateBy(f,k,c,e,a,h):d.scaleBy(f,k,c,a,h)}}();d.toMap=function(){var a=q.mat2df64.create();return function(b,f,k,c){return p.vec2.transformMat2d(b,f,P(a,k,c,1))}}();d.toScreen=function(){var a=q.mat2df64.create();return function(b,f,k,c){return p.vec2.transformMat2d(b,f,d.getTransform(a,k,c,1))}}();d.translateBy=function(){var a=t.vec2f64.create(),b=q.mat2df64.create();return function(f,c,e){G(f,c);var q=L(c),
h=f.targetGeometry;k.mat2d.fromRotation(b,J(c));k.mat2d.scale(b,b,t.vec2f64.fromValues(q,q));p.vec2.transformMat2d(a,e,b);h.x+=a[0];h.y+=a[1];return f}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.common=m})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.mat2d=m})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require",
"exports","./common"],function(n,d,m){function g(c,e,h){var d=e[0],b=e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=h[0],p=h[1],t=h[2],u=h[3],g=h[4];h=h[5];c[0]=d*q+a*p;c[1]=b*q+f*p;c[2]=d*t+a*u;c[3]=b*t+f*u;c[4]=d*g+a*h+k;c[5]=b*g+f*h+e;return c}function l(c,e,h){c[0]=e[0]-h[0];c[1]=e[1]-h[1];c[2]=e[2]-h[2];c[3]=e[3]-h[3];c[4]=e[4]-h[4];c[5]=e[5]-h[5];return c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};d.identity=
function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};d.set=function(c,e,h,d,b,a,f){c[0]=e;c[1]=h;c[2]=d;c[3]=b;c[4]=a;c[5]=f;return c};d.invert=function(c,e){var h=e[0],d=e[1],b=e[2],a=e[3],f=e[4];e=e[5];var k=h*a-d*b;if(!k)return null;k=1/k;c[0]=a*k;c[1]=-d*k;c[2]=-b*k;c[3]=h*k;c[4]=(b*e-a*f)*k;c[5]=(d*f-h*e)*k;return c};d.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};d.multiply=g;d.rotate=function(c,e,h){var d=e[0],b=e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=Math.sin(h);h=Math.cos(h);
c[0]=d*h+a*q;c[1]=b*h+f*q;c[2]=d*-q+a*h;c[3]=b*-q+f*h;c[4]=k;c[5]=e;return c};d.scale=function(c,e,h){var d=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=h[0];h=h[1];c[0]=e[0]*q;c[1]=d*q;c[2]=b*h;c[3]=a*h;c[4]=f;c[5]=k;return c};d.translate=function(c,e,h){var d=e[0],b=e[1],a=e[2],f=e[3],k=e[4];e=e[5];var q=h[0];h=h[1];c[0]=d;c[1]=b;c[2]=a;c[3]=f;c[4]=d*q+a*h+k;c[5]=b*q+f*h+e;return c};d.fromRotation=function(c,e){var h=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=h;c[2]=-h;c[3]=e;c[4]=0;c[5]=0;return c};d.fromScaling=
function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=e[1];c[4]=0;c[5]=0;return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};d.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};d.add=function(c,e,h){c[0]=e[0]+h[0];c[1]=e[1]+h[1];c[2]=e[2]+h[2];c[3]=e[3]+h[3];c[4]=e[4]+h[4];c[5]=e[5]+
h[5];return c};d.subtract=l;d.multiplyScalar=function(c,e,h){c[0]=e[0]*h;c[1]=e[1]*h;c[2]=e[2]*h;c[3]=e[3]*h;c[4]=e[4]*h;c[5]=e[5]*h;return c};d.multiplyScalarAndAdd=function(c,e,h,d){c[0]=e[0]+h[0]*d;c[1]=e[1]+h[1]*d;c[2]=e[2]+h[2]*d;c[3]=e[3]+h[3]*d;c[4]=e[4]+h[4]*d;c[5]=e[5]+h[5]*d;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};d.equals=function(c,e){var h=c[0],d=c[1],b=c[2],a=c[3],f=c[4];c=c[5];var k=e[0],q=e[1],p=e[2],
t=e[3],u=e[4];e=e[5];return Math.abs(h-k)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-q)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(b-p)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))&&Math.abs(a-t)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(f-u)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(c-e)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=g;d.sub=l})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],
function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df64=m})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,g,l,c,e,h){return[d,g,l,c,e,h]};d.createView=function(d,g){return new Float64Array(d,g,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=m})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(n,d,m){function g(a,b,k){a[0]=b[0]-k[0];a[1]=b[1]-k[1];return a}function l(a,b,k){a[0]=b[0]*k[0];a[1]=b[1]*k[1];return a}function c(a,b,k){a[0]=b[0]/k[0];a[1]=b[1]/k[1];return a}function e(a,b){var f=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(f*f+a*a)}function h(a,b){var f=b[0]-a[0];a=b[1]-a[1];return f*
f+a*a}function r(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};d.set=function(a,b,k){a[0]=b;a[1]=k;return a};d.add=function(a,b,k){a[0]=b[0]+k[0];a[1]=b[1]+k[1];return a};d.subtract=g;d.multiply=l;d.divide=c;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};
d.min=function(a,b,k){a[0]=Math.min(b[0],k[0]);a[1]=Math.min(b[1],k[1]);return a};d.max=function(a,b,k){a[0]=Math.max(b[0],k[0]);a[1]=Math.max(b[1],k[1]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};d.scale=function(a,b,k){a[0]=b[0]*k;a[1]=b[1]*k;return a};d.scaleAndAdd=function(a,b,k,c){a[0]=b[0]+k[0]*c;a[1]=b[1]+k[1]*c;return a};d.distance=e;d.squaredDistance=h;d.length=r;d.squaredLength=b;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};d.inverse=
function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};d.normalize=function(a,b){var f=b[0],c=b[1],f=f*f+c*c;0<f&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,k){b=b[0]*k[1]-b[1]*k[0];a[0]=a[1]=0;a[2]=b;return a};d.lerp=function(a,b,k,c){var f=b[0];b=b[1];a[0]=f+c*(k[0]-f);a[1]=b+c*(k[1]-b);return a};d.random=function(a,b){b=b||1;var f=2*m.RANDOM()*Math.PI;a[0]=Math.cos(f)*b;a[1]=Math.sin(f)*b;return a};d.transformMat2=function(a,
b,k){var f=b[0];b=b[1];a[0]=k[0]*f+k[2]*b;a[1]=k[1]*f+k[3]*b;return a};d.transformMat2d=function(a,b,k){var f=b[0];b=b[1];a[0]=k[0]*f+k[2]*b+k[4];a[1]=k[1]*f+k[3]*b+k[5];return a};d.transformMat3=function(a,b,k){var f=b[0];b=b[1];a[0]=k[0]*f+k[3]*b+k[6];a[1]=k[1]*f+k[4]*b+k[7];return a};d.transformMat4=function(a,b,k){var f=b[0];b=b[1];a[0]=k[0]*f+k[4]*b+k[12];a[1]=k[1]*f+k[5]*b+k[13];return a};d.rotate=function(a,b,k,c){var f=b[0]-k[0];b=b[1]-k[1];var e=Math.sin(c);c=Math.cos(c);a[0]=f*c-b*e+k[0];
a[1]=f*e+b*c+k[1];return a};d.angle=function(a,b){var f=a[0];a=a[1];var c=b[0];b=b[1];var e=f*f+a*a;0<e&&(e=1/Math.sqrt(e));var h=c*c+b*b;0<h&&(h=1/Math.sqrt(h));f=(f*c+a*b)*e*h;return 1<f?0:-1>f?Math.PI:Math.acos(f)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,b){var f=a[0];a=a[1];var c=b[0];b=b[1];return Math.abs(f-c)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(c))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};d.len=r;d.sub=g;d.mul=l;d.div=c;d.dist=e;d.sqrDist=h;d.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=m})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,
g){return[d,g]};d.fromArray=function(d){for(var g=[0,0],l=Math.min(2,d.length),c=0;c<l;++c)g[c]=d[c];return g};d.createView=function(d,g){return new Float64Array(d,g,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=[1,0];d.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});
n=function(){function d(d){var c=this;this.view=d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){for(var e=c.view,h=e.labelManager,d=c.graphicsView,b=e.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&
null==a.layerViews}),a=b.length,f=e.state,k=0;k<b.length;k++)if(e=b[k],e.attached){var q=e.lastUpdateId;if(null==q||!c.stationary&&!e.moving)e.moving=!0,e.moveStart();q!==f.id&&e.viewChange();c.stationary&&e.moving&&(e.moving=!1,e.moveEnd());e.lastUpdateId=f.id}h&&h.lastUpdateId!==f.id&&(h.viewChange(),h.lastUpdateId=f.id);d&&d.lastUpdateId!==f.id&&(d.viewChange(),d.lastUpdateId=f.id);h=c._layerViewsTrash;for(d=0;d<h.length;d++)e=h[d],c._detachLayerView(e);for(d=h.length=0;d<a;d++)e=b[d],e.isFulfilled()&&
!e.attached&&c._attachLayerView(e);b=c._updateParameters;a=c._layerViewsToUpdate;e=a.slice();d=a.length=0;for(f=e;d<f.length;d++)e=f[d],!("attached"in e)||"attached"in e&&e.attached?e.processUpdate(b):a.push(e);a=c._updatablesToUpdate;e=a.slice();for(a=a.length=0;a<e.length;a++)e[a].processUpdate(b);0===c._layerViewsToUpdate.length&&0===c._updatablesToUpdate.length&&0===h.length&&c._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this.stationary=
this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(d._layerViewsTrash,c.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){d.stationary=c;d.requestFrame()});
this._frameTaskHandle=m.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){return d._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};d.prototype.requestLayerViewUpdate=function(d){this._layerViewsToUpdate.push(d);
this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();d.default=n})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(n,d,m,g,l,c,e,h,r){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}m(a,b);a.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};a.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(a.prototype,"_rotation",{get:function(){return new h({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_zoom",{get:function(){return new r({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});a.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};a.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};a.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};a.prototype.fit=function(a){return this._zoom.fit(a)};a.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};a.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};a.prototype.snapScale=
function(a){return this._zoom.snapToClosestScale(a)};a.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};a.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],a.prototype,"effectiveMaxScale",
void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],a.prototype,"effectiveMaxZoom",void 0);g([c.property({type:[e]})],a.prototype,"lods",void 0);g([c.property()],a.prototype,"minScale",void 0);g([c.property()],a.prototype,"maxScale",void 0);g([c.property()],a.prototype,"minZoom",void 0);g([c.property()],a.prototype,"maxZoom",void 0);g([c.property()],a.prototype,"rotationEnabled",
void 0);g([c.property()],a.prototype,"snapToZoom",void 0);g([c.property()],a.prototype,"view",void 0);g([c.property({type:h,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null);g([c.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null);g([c.property({readOnly:!0,type:r,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],a.prototype,"_zoom",null);return a=g([c.subclass("esri.views.2d.MapViewConstraints")],
a)}(c.declared(l.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c){return function(e){function h(){var b=null!==e&&e.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}m(h,e);d=h;h.prototype.constrain=function(b,a){if(!this.enabled||!a)return b;this.rotationEnabled||
(b.rotation=a.rotation);return b};h.prototype.clone=function(){return new d({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var d;g([c.property()],h.prototype,"enabled",void 0);g([c.property()],h.prototype,"rotationEnabled",void 0);return h=d=g([c.subclass("esri.views.2d.constraints.RotationConstraint")],h)}(c.declared(l))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(n,d,m,g,l,c,e){return function(h){function d(a){a=h.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}m(d,h);b=d;d.prototype.initialize=function(){var a=this,b,c,e=this.lods;c=this.minScale;b=this.maxScale;var p=this.minZoom,h=this.maxZoom,d=-1,g=-1,w=!1,r=!1;0!==c&&0!==b&&c<b&&(b=[b,c],c=b[0],
b=b[1]);if(e&&e.length){e=e.map(function(a){return a.clone()});e.sort(function(a,b){return b.scale-a.scale});e.forEach(function(a,b){return a.level=b});for(var l,m=0,v=e;m<v.length;m++){var B=v[m];!w&&0<c&&c>=B.scale&&(d=B.level,w=!0);!r&&0<b&&b>=B.scale&&(g=l?l.level:-1,r=!0);l=B}-1===p&&(p=0===c?0:d);-1===h&&(h=0===b?e.length-1:g);p=Math.max(p,0);p=Math.min(p,e.length-1);h=Math.max(h,0);h=Math.min(h,e.length-1);p>h&&(c=[h,p],p=c[0],h=c[1]);c=e[p].scale;b=e[h].scale;e.splice(0,p);e.splice(h-p+1,
e.length);e.forEach(function(b,f){a._lodByScale[b.scale]=b;a._scales[f]=b.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",p);this._set("effectiveMaxZoom",h)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",b)};d.prototype.constrain=function(a,b){if(b&&a.scale===b.scale)return a;var f=this.effectiveMinScale,c=this.effectiveMaxScale,e=a.targetGeometry,h=b&&b.targetGeometry,d=0!==f&&a.scale>f;if(0!==c&&a.scale<c||d)f=d?f:c,h&&(b=(f-b.scale)/(a.scale-b.scale),e.x=h.x+(e.x-
h.x)*b,e.y=h.y+(e.y-h.y)*b),a.scale=f;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};d.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};d.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=
b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,e;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var p=0;p<b.length-1;p++){c=b[p];e=b[p+1];if(e===a)return b=p+this.effectiveMinZoom,b+1;if(c>a&&e<a)return b=p+this.effectiveMinZoom,b+1-(a-e)/(c-e)}};d.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};d.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};d.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};d.prototype.clone=function(){return new b({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};d.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,e,p){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var b;g([c.property({readOnly:!0})],d.prototype,"effectiveLODs",void 0);g([c.property({readOnly:!0})],d.prototype,"effectiveMinZoom",void 0);g([c.property({readOnly:!0})],d.prototype,"effectiveMaxZoom",void 0);g([c.property({readOnly:!0})],d.prototype,
"effectiveMinScale",void 0);g([c.property({readOnly:!0})],d.prototype,"effectiveMaxScale",void 0);g([c.property({type:[e]})],d.prototype,"lods",void 0);g([c.property()],d.prototype,"minZoom",void 0);g([c.property()],d.prototype,"maxZoom",void 0);g([c.property()],d.prototype,"minScale",void 0);g([c.property()],d.prototype,"maxScale",void 0);g([c.property()],d.prototype,"snapToZoom",void 0);return d=b=g([c.subclass("esri.views.2d.constraints.ZoomConstraint")],d)}(c.declared(l))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(n,d,m,g,l,c,e,h,r,b){var a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}m(b,a);g([c.property()],b.prototype,"left",void 0);g([c.property()],b.prototype,"top",void 0);g([c.property()],b.prototype,"right",void 0);g([c.property()],b.prototype,"bottom",void 0);return b=g([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(l));return function(f){function k(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];
var d=f.apply(this,c)||this;d.content=new b;d._updateContent=function(){var a=h.vec2f64.create();return function(){var b=d._get("size"),f=d._get("padding");if(b&&f){var c=d.content;e.vec2.set(a,f.left+f.right,f.top+f.bottom);e.vec2.subtract(a,b,a);e.vec2.copy(c.size,a);if(b=c.viewpoint)d.viewpoint=b}}}();d.watch(["size","padding"],d._updateContent,!0);d.padding=new a;d.size=[0,0];return d}m(k,f);Object.defineProperty(k.prototype,"padding",{set:function(b){this._set("padding",b||new a)},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;r.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var f=b.targetGeometry;a.center[0]=f.x;a.center[1]=f.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=f.spatialReference;this._update()}},enumerable:!0,configurable:!0});g([c.property()],k.prototype,"content",void 0);g([c.property({type:a})],k.prototype,"padding",null);g([c.property()],
k.prototype,"viewpoint",null);return k=g([c.subclass("esri.views.2d.PaddedViewState")],k)}(c.declared(b))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(n,d,m,g,l,c,e,h,r,b,a,f,k,q,p,t,u,z,w){var D=[0,0];return function(e){function d(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=e.apply(this,b)||this;b._viewpoint2D={center:u.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new l.Extent;b.id=0;b.inverseTransform=f.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=f.mat2df64.create();b.transformNoRotation=f.mat2df64.create();b.displayMat3=q.mat3f32.create();b.displayViewMat3=
q.mat3f32.create();b.viewMat3=q.mat3f32.create();b.viewMat2d=a.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}m(d,e);x=d;Object.defineProperty(d.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,f=a.targetGeometry;
b.center[0]=f.x;b.center[1]=f.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=f.spatialReference}this._update()},enumerable:!0,configurable:!0});d.prototype.copy=function(a){var b=this.size,f=this.viewpoint;f&&b?(this.viewpoint=w.copy(f,a.viewpoint),this._set("size",p.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};d.prototype.clone=function(){return new x({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};d.prototype.toMap=function(a,b,f){if(z.isVec2(b))return p.vec2.transformMat2d(a,b,this.inverseTransform);D[0]=b;D[1]=f;return p.vec2.transformMat2d(a,D,this.inverseTransform)};d.prototype.toScreen=function(a,b,f){if(z.isVec2(b))return p.vec2.transformMat2d(a,b,this.transform);D[0]=b;D[1]=f;return p.vec2.transformMat2d(a,D,this.transform)};d.prototype.toScreenNoRotation=function(a,b,f){if(z.isVec2(b))return p.vec2.transformMat2d(a,b,this.transformNoRotation);D[0]=b;D[1]=
f;return p.vec2.transformMat2d(a,D,this.transformNoRotation)};d.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint,this.size)};d.prototype.getScreenTransform=function(a,b){var f=this._viewpoint2D.center,c=this._get("pixelRatio")||1,k=this._get("size");w.getMatrix(a,f,k,b,0,c);return a};d.prototype._update=function(){var a=this._viewpoint2D,f=a.center,e=a.spatialReference,h=a.scale,d=a.rotation,a=this._get("pixelRatio")||1,q=this._get("size");this._set("id",this.id+1);var u=new c({targetGeometry:new l.Point(f[0],
f[1],e),scale:h,rotation:d});this._set("viewpoint",u);if(q&&e&&h)return this.resolution=w.getResolution(u),this.rotation=d,this.scale=h,this.spatialReference=e,p.vec2.copy(this.center,f),k.mat3.set(this.displayMat3,0!==q[0]?2/q[0]:0,0,0,0,0!==q[1]?-2/q[1]:0,0,-1,1,1),h=k.mat3.identity(this.viewMat3),f=t.vec2f32.fromValues(q[0]/2,q[1]/2),e=t.vec2f32.fromValues(-q[0]/2,-q[1]/2),d=r.common.toRadian(d),k.mat3.translate(h,h,f),k.mat3.rotate(h,h,d),k.mat3.translate(h,h,e),k.mat3.multiply(this.displayViewMat3,
this.displayMat3,h),h=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(h,h,f),b.mat2d.rotate(h,h,d),b.mat2d.translate(h,h,e),w.getExtent(this.extent,u,q),w.getTransform(this.transform,u,q,a),b.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,u,q,a),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var x;g([h.property({readOnly:!0})],d.prototype,"id",void 0);g([h.property({value:1,json:{write:!0}})],d.prototype,
"pixelRatio",null);g([h.property({json:{write:!0}})],d.prototype,"size",null);g([h.property({type:c,json:{write:!0}})],d.prototype,"viewpoint",null);return d=x=g([h.subclass("esri.views.2d.ViewState")],d)}(h.declared(e.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=m})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var g=new Float32Array(6);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];return g};d.fromValues=function(d,g,l,c,e,h){var r=new Float32Array(6);r[0]=d;r[1]=g;r[2]=l;r[3]=c;r[4]=e;r[5]=h;return r};d.createView=function(d,g){return new Float32Array(d,g,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=m})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(n,d,m){function g(c,e,h){var d=e[0],b=e[1],a=e[2],f=e[3],k=e[4],q=e[5],p=e[6],t=e[7];e=e[8];var u=h[0],g=h[1],w=h[2],l=h[3],x=h[4],m=h[5],v=h[6],n=h[7];h=h[8];c[0]=u*d+g*f+w*p;c[1]=u*b+g*k+w*t;c[2]=u*a+g*q+w*e;c[3]=l*d+x*f+m*p;c[4]=l*b+x*k+m*t;c[5]=l*a+x*q+m*e;c[6]=v*d+n*f+h*p;c[7]=v*b+n*k+h*t;c[8]=v*a+n*q+h*e;return c}function l(c,
e,d){c[0]=e[0]-d[0];c[1]=e[1]-d[1];c[2]=e[2]-d[2];c[3]=e[3]-d[3];c[4]=e[4]-d[4];c[5]=e[5]-d[5];c[6]=e[6]-d[6];c[7]=e[7]-d[7];c[8]=e[8]-d[8];return c}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];return c};d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};d.set=function(c,e,d,g,b,a,f,k,q,p){c[0]=e;c[1]=d;c[2]=g;
c[3]=b;c[4]=a;c[5]=f;c[6]=k;c[7]=q;c[8]=p;return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.transpose=function(c,e){if(c===e){var d=e[1],g=e[2],b=e[5];c[1]=e[3];c[2]=e[6];c[3]=d;c[5]=e[7];c[6]=g;c[7]=b}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};d.invert=function(c,e){var d=e[0],g=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=e[6],p=e[7];e=e[8];var t=e*f-k*p,u=-e*a+k*q,z=p*a-f*q,w=d*t+g*u+b*
z;if(!w)return null;w=1/w;c[0]=t*w;c[1]=(-e*g+b*p)*w;c[2]=(k*g-b*f)*w;c[3]=u*w;c[4]=(e*d-b*q)*w;c[5]=(-k*d+b*a)*w;c[6]=z*w;c[7]=(-p*d+g*q)*w;c[8]=(f*d-g*a)*w;return c};d.adjoint=function(c,e){var d=e[0],g=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=e[6],p=e[7];e=e[8];c[0]=f*e-k*p;c[1]=b*p-g*e;c[2]=g*k-b*f;c[3]=k*q-a*e;c[4]=d*e-b*q;c[5]=b*a-d*k;c[6]=a*p-f*q;c[7]=g*q-d*p;c[8]=d*f-g*a;return c};d.determinant=function(c){var e=c[3],d=c[4],g=c[5],b=c[6],a=c[7],f=c[8];return c[0]*(f*d-g*a)+c[1]*(-f*e+g*b)+c[2]*
(a*e-d*b)};d.multiply=g;d.translate=function(c,e,d){var h=e[0],b=e[1],a=e[2],f=e[3],k=e[4],q=e[5],p=e[6],t=e[7];e=e[8];var u=d[0];d=d[1];c[0]=h;c[1]=b;c[2]=a;c[3]=f;c[4]=k;c[5]=q;c[6]=u*h+d*f+p;c[7]=u*b+d*k+t;c[8]=u*a+d*q+e;return c};d.rotate=function(c,e,d){var h=e[0],b=e[1],a=e[2],f=e[3],k=e[4],q=e[5],p=e[6],t=e[7];e=e[8];var u=Math.sin(d);d=Math.cos(d);c[0]=d*h+u*f;c[1]=d*b+u*k;c[2]=d*a+u*q;c[3]=d*f-u*h;c[4]=d*k-u*b;c[5]=d*q-u*a;c[6]=p;c[7]=t;c[8]=e;return c};d.scale=function(c,e,d){var h=d[0],
b=d[1];d=d[2];c[0]=h*e[0];c[1]=h*e[1];c[2]=h*e[2];c[3]=b*e[3];c[4]=b*e[4];c[5]=b*e[5];c[6]=d*e[6];c[7]=d*e[7];c[8]=d*e[8];return c};d.scaleByVec2=function(c,e,d){var h=d[0];d=d[1];c[0]=h*e[0];c[1]=h*e[1];c[2]=h*e[2];c[3]=d*e[3];c[4]=d*e[4];c[5]=d*e[5];return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};d.fromRotation=function(c,e){var d=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=d;c[2]=0;c[3]=-d;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
d.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};d.fromQuat=function(c,e){var d=e[0],g=e[1],b=e[2];e=e[3];var a=d+d,f=g+g,k=b+b,d=d*a,q=g*a,g=g*f,p=b*a,t=b*f,b=b*k,a=e*a,f=e*f;e*=k;c[0]=1-g-b;c[3]=q-e;c[6]=p+f;c[1]=q+e;c[4]=1-d-b;c[7]=t-a;c[2]=p-f;c[5]=t+a;c[8]=1-d-g;return c};d.normalFromMat4Legacy=function(c,e){var d=e[0],
g=e[1],b=e[2],a=e[4],f=e[5],k=e[6],q=e[8],p=e[9];e=e[10];var t=e*f-k*p,u=-e*a+k*q,z=p*a-f*q,w=d*t+g*u+b*z;if(!w)return null;w=1/w;c[0]=t*w;c[1]=(-e*g+b*p)*w;c[2]=(k*g-b*f)*w;c[3]=u*w;c[4]=(e*d-b*q)*w;c[5]=(-k*d+b*a)*w;c[6]=z*w;c[7]=(-p*d+g*q)*w;c[8]=(f*d-g*a)*w;return c};d.normalFromMat4=function(c,e){var d=e[0],g=e[1],b=e[2],a=e[3],f=e[4],k=e[5],q=e[6],p=e[7],t=e[8],u=e[9],z=e[10],w=e[11],l=e[12],x=e[13],m=e[14];e=e[15];var v=d*k-g*f,n=d*q-b*f,C=d*p-a*f,y=g*q-b*k,I=g*p-a*k,E=b*p-a*q,F=t*x-u*l,H=
t*m-z*l,t=t*e-w*l,G=u*m-z*x,u=u*e-w*x,z=z*e-w*m,w=v*z-n*u+C*G+y*t-I*H+E*F;if(!w)return null;w=1/w;c[0]=(k*z-q*u+p*G)*w;c[1]=(q*t-f*z-p*H)*w;c[2]=(f*u-k*t+p*F)*w;c[3]=(b*u-g*z-a*G)*w;c[4]=(d*z-b*t+a*H)*w;c[5]=(g*t-d*u-a*F)*w;c[6]=(x*E-m*I+e*y)*w;c[7]=(m*C-l*E-e*n)*w;c[8]=(l*I-x*C+e*v)*w;return c};d.projection=function(c,e,d){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/d;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};d.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};d.add=function(c,e,d){c[0]=e[0]+d[0];c[1]=e[1]+d[1];c[2]=e[2]+d[2];c[3]=e[3]+d[3];c[4]=e[4]+d[4];c[5]=e[5]+d[5];c[6]=e[6]+d[6];c[7]=e[7]+d[7];c[8]=e[8]+d[8];return c};d.subtract=l;d.multiplyScalar=function(c,e,d){c[0]=e[0]*d;c[1]=e[1]*d;c[2]=e[2]*d;c[3]=e[3]*d;c[4]=e[4]*d;c[5]=e[5]*d;
c[6]=e[6]*d;c[7]=e[7]*d;c[8]=e[8]*d;return c};d.multiplyScalarAndAdd=function(c,e,d,g){c[0]=e[0]+d[0]*g;c[1]=e[1]+d[1]*g;c[2]=e[2]+d[2]*g;c[3]=e[3]+d[3]*g;c[4]=e[4]+d[4]*g;c[5]=e[5]+d[5]*g;c[6]=e[6]+d[6]*g;c[7]=e[7]+d[7]*g;c[8]=e[8]+d[8]*g;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};d.equals=function(c,e){var d=c[0],g=c[1],b=c[2],a=c[3],f=c[4],k=c[5],q=c[6],p=c[7];c=c[8];var t=e[0],
u=e[1],z=e[2],w=e[3],l=e[4],x=e[5],A=e[6],v=e[7];e=e[8];return Math.abs(d-t)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(g-u)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(b-z)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(a-w)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(f-l)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(k-x)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(q-A)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(A))&&Math.abs(p-
v)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(c-e)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=g;d.sub=l})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f32=m})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);
d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var g=new Float32Array(9);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];g[6]=d[6];g[7]=d[7];g[8]=d[8];return g};d.fromValues=function(d,g,l,c,e,h,r,b,a){var f=new Float32Array(9);f[0]=d;f[1]=g;f[2]=l;f[3]=c;f[4]=e;f[5]=h;f[6]=r;f[7]=b;f[8]=a;return f};d.createView=function(d,g){return new Float32Array(d,g,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(n,d,m){Object.defineProperty(d,
"__esModule",{value:!0});d.vec2f32=m})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(n,d){function m(){return new Float32Array(2)}function g(c,e){var b=new Float32Array(2);b[0]=c;b[1]=e;return b}function l(){return g(1,1)}function c(){return g(1,0)}function e(){return g(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=m;d.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};d.fromValues=g;d.createView=function(c,
e){return new Float32Array(c,e,2)};d.zeros=function(){return m()};d.ones=l;d.unitX=c;d.unitY=e;d.ZEROS=m();d.ONES=l();d.UNIT_X=c();d.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(n,d){function m(d){return d instanceof Float32Array&&2<=d.length}function g(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=m;d.isVec2f64=g;d.isVec2=function(d){return m(d)||g(d)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(n,d,m,g,l,c){Object.defineProperty(d,"__esModule",{value:!0});d.TileInfoView=m;d.TileKey=g;d.TileQueue=l;d.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(n,d,m,g,l,c,e){var h=new c("0/0/0/0"),r=function(){function a(a,b,c,e,d,h,g,w){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=d;this.rightAdjust=h;this.leftBound=g;this.rightBound=
w}a.create=function(b,c){var f;b[1]>c[1]&&(f=[c,b],b=f[0],c=f[1]);f=b[0];b=b[1];var k=c[0];c=c[1];var e=k-f,d=c-b,d=0!==d?e/d:0,h=(Math.ceil(b)-b)*d,g=(Math.floor(b)-b)*d;return new a(f,Math.floor(b),Math.ceil(c),d,0>e?h:g,0>e?g:h,0>e?k:f,0>e?f:k)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],
[0,0],[0,0],[0,0]];return function(){function a(a,b){var f=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var k=this._lodInfos=c.map(function(f){return g.create(a,f,b)});c.forEach(function(a,b){f._infoByLevel[a.level]=k[b];f._infoByScale[a.scale]=k[b];f.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};a.prototype.getTileCoverage=function(a,c,d){void 0===c&&(c=192);void 0===d&&(d="closest");d="closest"===d?this.getClosestInfoForScale(a.scale):
this.getSmallestInfoForScale(a.scale);var f=l.pool.acquire(d),k=this._wrap,q;q=Infinity;var h=-Infinity,g,D,x=f.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<b.length;c++){var m=b[c];a.toMap(m,m);m[0]=d.getColumnForX(m[0]);m[1]=d.getRowForY(m[1])}a=[];m=3;for(c=0;4>c;c++){if(b[c][1]!==b[m][1]){var v=r.create(b[c],b[m]);q=Math.min(v.ymin,q);h=Math.max(v.ymax,h);void 0===a[v.ymin]&&(a[v.ymin]=[]);a[v.ymin].push(v)}m=c}if(null==q||null==h||
100<h-q)return null;for(m=[];q<h;){null!=a[q]&&(m=m.concat(a[q]));g=Infinity;D=-Infinity;for(c=m.length-1;0<=c;c--)v=m[c],g=Math.min(g,v.getLeftCol()),D=Math.max(D,v.getRightCol());g=Math.floor(g);D=Math.floor(D);if(q>=d.first[1]&&q<=d.last[1])if(k)if(d.size[0]<d.worldSize[0])for(v=Math.floor(D/d.worldSize[0]),c=Math.floor(g/d.worldSize[0]);c<=v;c++)x.push(new e(q,Math.max(d.getFirstColumnForWorld(c),g),Math.min(d.getLastColumnForWorld(c),D)));else x.push(new e(q,g,D));else g>d.last[0]||D<d.first[0]||
(g=Math.max(g,d.first[0]),D=Math.min(D,d.last[0]),x.push(new e(q,g,D)));q+=1;for(c=m.length-1;0<=c;c--)v=m[c],v.ymax>=q?v.incrRow():m.splice(c,1)}return f};a.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(h,c,h);for(var f=c.denormalizeCol(h.col,h.world),k=0,e=a.spans;k<e.length;k++){var d=e[k];if(d.row===h.row&&d.colFrom<=f&&d.colTo>=f)return!0}}if(c.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=e[0];var f=e[1],k=e[2],e=e[3],g=b.denormalizeCol(h.col,h.world),d=c.getColumnForX(b.getXForColumn(g)),l=c.getRowForY(b.getYForRow(h.row)),g=c.getColumnForX(b.getXForColumn(g+1))-1;b=c.getRowForY(b.getYForRow(h.row+1))-1;return!(d>e||g<k||l>f||b<a)}var r=c.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=r&&a.colTo>=r})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=m.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c,f,k){return Math.abs(c-a)<Math.abs(b-
a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var f=this._infoByLevel[c.level];a.set(c);
if(b.resolution<f.resolution)return null;if(b.resolution===f.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*f.resolution/b.resolution+.01);a.row=Math.floor(c.row*f.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(n,d,m,g){function l(c,d,g){c[0]=d;c[1]=g;return c}var c=new g("0/0/0/0");return function(){function e(c,e,b,a,f,k,d,p,g,u,z,w){this.level=
c;this.resolution=e;this.scale=b;this.origin=a;this.first=f;this.last=k;this.size=d;this.norm=p;this.worldStart=g;this.worldEnd=u;this.worldSize=z;this.wrap=w}e.create=function(c,d,b){var a=m.getInfo(c.spatialReference),f=[c.origin.x,c.origin.y],k=[c.size[0]*d.resolution,c.size[1]*d.resolution],q=[-Infinity,-Infinity],p=[Infinity,Infinity],h=[Infinity,Infinity];b&&(l(q,Math.max(0,Math.floor((b.xmin-f[0])/k[0])),Math.max(0,Math.floor((f[1]-b.ymax)/k[1]))),l(p,Math.max(0,Math.floor((b.xmax-f[0])/k[0])),
Math.max(0,Math.floor((f[1]-b.ymin)/k[1]))),l(h,p[0]-q[0]+1,p[1]-q[1]+1));var g;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/d.resolution)/c.size[0]),h[1]],a=[Math.floor((a.origin[0]-f[0])/k[0]),q[1]],b=[c[0]+a[0]-1,p[1]],g=!0):(a=q,b=p,c=h,g=!1);return new e(d.level,d.resolution,d.scale,f,q,p,h,k,a,b,c,g)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var d=this.worldSize[0];return 0>c?d-1-Math.abs((c+1)%d):c%d};e.prototype.denormalizeCol=function(c,d){return this.wrap?this.worldSize[0]*
d+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(d,e,b){void 0===b&&(b=!1);c.set(e);var a=b?c.col:this.denormalizeCol(c.col,c.world),f=c.row;e=this.getXForColumn(a);b=this.getYForRow(f+1);a=this.getXForColumn(a+1);f=this.getYForRow(f);d[0]=e;d[1]=b;d[2]=a;d[3]=f;return d};e.prototype.getTileCoords=function(d,e,b){void 0===b&&(b=!1);c.set(e);e=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(d)?l(d,this.getXForColumn(e),
this.getYForRow(c.row)):(d.x=this.getXForColumn(e),d.y=this.getYForRow(c.row));return d};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(n,d,m){return function(){function d(d,c,e,g){this.set(d,c,e,g)}d.getId=function(d,c,e,g){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+e+"/"+g};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,c,e,g){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],e=d[2],
g=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(g)):(this.level=+d,this.row=+c,this.col=+e,this.world=+g||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var g=this.level+1,c=this.row<<1,e=this.col<<1,h=this.world;return[new d(g,c,e,h),new d(g,c,e+1,h),new d(g,c+1,e,h),new d(g,c+1,e+1,h)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?
-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new m(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(n,d,m){return function(){function d(d){this.lodInfo=d;this.spans=[]}d.prototype.release=function(){};d.prototype.forEach=function(d,c){var e=this.spans,g=this.lodInfo,l=g.level;if(0!==e.length)for(var b=0;b<e.length;b++)for(var a=e[b],f=a.row,k=a.colTo,a=a.colFrom;a<=k;a++)d.call(c,l,f,
g.normalizeCol(a),g.getWorldForColumn(a))};d.pool=new m(d,!0);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(n,d,m){return function(){function d(d,c,e){this.row=d;this.colFrom=c;this.colTo=e}d.pool=new m(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(n,d,m,g,l,c,e,h,r,b){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var f=new Set,k=[],q=new Map,p=[0,0];return function(d){function e(a){a=d.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}m(e,d);e.prototype.initialize=function(){var a=this,c=this.concurrency,f=this.process,d="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new b.QueueProcessor({concurrency:c,
process:function(b,c){b=a._keyToItem.get(b);return f(b,{signal:c})},peeker:d})};e.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(e.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});e.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};e.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};e.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};e.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};e.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};e.prototype.pause=function(){this._queue.pause()};e.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,c,f,d=this;return l(this,function(e){b=a.key.id;if(this.has(b))return[2,this.get(b)];c=this._queue.push(b);f=function(){d._keyToItem.delete(b);d.notifyChange("updating")};this._keyToItem.set(b,a);c.then(f,f);this.notifyChange("updating");return[2,c]})})};e.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};e.prototype.resume=
function(){this._queue.resume()};e.prototype._peekByScaleFirst=function(b){if(!this.state)return b[0];for(var c=this.tileInfoView,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,p=0;p<b.length;p++){var g=this._keyToItem.get(b[p]),h=this.tileInfoView.getTileScale(g.key);q.has(h)||(q.set(h,[]),d=Math.max(h,d),e=Math.min(h,e));q.get(h).push(g.key);f.add(h)}var t=this.state.scale;q.has(t)||(a(k,f),k.sort(),t=k.reduce(function(a,b,c,f){return Math.abs(b-t)<Math.abs(a-t)?b:a},k[0]));t=Math.min(t,
d);t=Math.max(t,e);b=q.get(t);var u=c.getClosestInfoForScale(t),z=u.getColumnForX(this.state.center[0]),l=u.getRowForY(this.state.center[1]);b.sort(function(a,b){var c=u.denormalizeCol(a.col,a.world),f=u.denormalizeCol(b.col,b.world);return Math.sqrt((z-c)*(z-c)+(l-a.row)*(l-a.row))-Math.sqrt((z-f)*(z-f)+(l-b.row)*(l-b.row))});f.clear();q.clear();return b[0].id};e.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,f=Number.POSITIVE_INFINITY,
d=null,e=0;e<a.length;e++){var k=this._keyToItem.get(a[e]);b.getTileCoords(p,k.key);var q=r.vec2.distance(p,c);q<f&&(f=q,d=k.key)}return d.id};g([h.property({constructOnly:!0})],e.prototype,"concurrency",void 0);g([h.property({constructOnly:!0})],e.prototype,"process",void 0);g([h.property()],e.prototype,"state",void 0);g([h.property({constructOnly:!0})],e.prototype,"strategy",void 0);g([h.property({constructOnly:!0})],e.prototype,"tileInfoView",void 0);g([h.property({readOnly:!0})],e.prototype,"updating",
null);return e=g([h.subclass("esri.views.2d.tiling.TileQueue")],e)}(h.declared(e))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(n,d,m,g,l,c,e,h){Object.defineProperty(d,"__esModule",{value:!0});var r=function(){return function(b,a){this.item=b;this.controller=a;this.promise=null}}();n=function(){function b(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new e({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.task&&l.isSome(c)&&(this._task=c.registerTask(a.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}b.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};b.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
b.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};b.prototype.isOngoing=function(a){return this._processingItems.has(a)};b.prototype.has=function(a){return this._deferreds.has(a)};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(a){return g(this,void 0,void 0,function(){var b,d,e,p,g,h,z=this;return m(this,function(f){if(b=this.get(a))return[2,b];e=c.createAbortController();p=function(){var b=z._processingItems.get(a);
b&&b.controller.abort();g();d.reject(c.createAbortError())};g=function(){h.remove();z._deferreds.delete(a);z._controllers.delete(a);z._queue.remove(a);z._processingItems.delete(a);z._scheduleNext()};h=c.onAbortOrThrow(e.signal,p);d=c.createDeferred();this._deferreds.set(a,d);this._controllers.set(a,e);d.promise.then(g,g);this._queue.push(a);this._scheduleNext();return[2,d.promise]})})};b.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};b.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=h.schedule(function(){a._schedule=null;a._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};b.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};
b.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(b))};b.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};b.prototype._process=function(a){var b=this;if(!l.isNone(a)){var d,e=c.createAbortController(),p=new r(a,e);this._processingItems.set(a,p);try{d=this.process(a,e.signal)}catch(t){this._processError(p,t)}d&&"function"===typeof d.then?(p.promise=
d,d.then(function(a){return b._processResult(p,a)},function(a){return b._processError(p,a)})):this._processResult(p,d)}};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return b}();d.QueueProcessor=n})},"esri/core/Queue":function(){define(["require","exports"],function(n,d){return function(){function d(d){this._items=[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;d&&d.peeker&&
(this._peeker=d.peeker)}Object.defineProperty(d.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};d.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._add(d)};d.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};d.prototype.pop=function(){if(0!==this._length){var d=this.peek();
this._remove(d);return d}};d.prototype.remove=function(d){this.contains(d)&&this._remove(d)};d.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};d.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return d}()})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(n,d,m,g,l,c){var e=new c(0,
0,0,0),h=new Map,r=[],b=[];return function(){function a(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&
(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new g.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var c=this,d=this.resampling,f=this.tileIndex,g=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);b.length=0;r.length=0;h.clear();if(g){var u=this.tileInfoView.tileInfo,z=u.minScale,w=u.maxScale,D=g.spans,x=g.lodInfo,m=x.level,v=a.state,n=v.scale,u=v.center,v=v.resolution,
C=!a.stationary&&n>this._previousScale;this._previousScale=n;this.tiles.length=0;if(!d&&(n>z||n<w))return this.tiles.length=0,h.clear(),f.forEach(function(a){c.releaseTile(a)}),f.clear(),b.length=0,r.length=0,h.clear(),l.pool.release(g),!0;f.forEach(function(a){return a.visible=!0});w=z=0;if(0<D.length)for(n=0;n<D.length;n++){a=D[n];for(var y=a.row,I=a.colTo,E=a.colFrom;E<=I;E++)if(z++,a=e.set(m,y,x.normalizeCol(E),x.getWorldForColumn(E)).id,f.has(a))d=f.get(a),d.isReady?(h.set(a,d),w++):C||this._addParentTile(a,
h);else{d=void 0;if(this._tileCache&&this._tileCache.has(a)){if(d=this._tileCache.pop(a),this.tileIndex.set(a,d),d.isReady){h.set(a,d);w++;continue}}else d=this.acquireTile(e),this.tileIndex.set(a,d);C||this._addParentTile(a,h)}}var F=w===z;f.forEach(function(a,d){e.set(d);if(!h.has(d)){var f=c.tileInfoView.intersects(g,e);!f||!C&&F?"purge"===c.cachePolicy?e.level===m&&f||r.push(d):(e.level>m||!f)&&r.push(d):a.isReady?b.push(d):e.level>m&&r.push(d)}});for(D=0;D<b.length;D++)a=b[D],(d=f.get(a))&&d.isReady&&
h.set(a,d);for(D=0;D<r.length;D++)a=r[D],d=f.get(a),this._tileCache?this._tileCache.add(d):this.releaseTile(d),f["delete"](a);h.forEach(function(a){return c.tiles.push(a)});f.forEach(function(a){h.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(m,u,v);l.pool.release(g);return F}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);
if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});var g=[0,0],l=[0,0];n=function(){function c(c,
d,g){this.maxSize=c;this.tileInfoView=d;this.removedFunc=g;this._tilePerId=new Map;this._tileKeysPerLevel=[]}c.prototype.has=function(c){return this._tilePerId.has(c)};c.prototype.get=function(c){return this._tilePerId.get(c)};c.prototype.pop=function(c){var d=this._tilePerId.get(c);if(!d)return null;var e=this._tileKeysPerLevel[d.key.level];this._tilePerId["delete"](c);for(var b=0;b<e.length;b++)if(e[b].id===c){e.splice(b,1);break}d.visible=!0;return d};c.prototype.add=function(c){c.visible=!1;var d=
c.key,e=d.id;this._tilePerId.has(e)||(this._tilePerId.set(e,c),c=d.level,this._tileKeysPerLevel[c]||(this._tileKeysPerLevel[c]=[]),this._tileKeysPerLevel[c].push(d))};c.prototype.prune=function(c,d,g){var b=this._tilePerId.size;if(!(b<=this.maxSize)){for(var a=this._tileKeysPerLevel.length-1;b>this.maxSize&&0<=a;)a!==c&&(b=this._pruneAroundCenterTile(b,d,g,a)),a--;b>this.maxSize&&(b=this._pruneAroundCenterTile(b,d,g,c))}};c.prototype._pruneAroundCenterTile=function(c,d,r,b){b=this._tileKeysPerLevel[b];
if(!b||0===b.length)return c;var a=this.tileInfoView.tileInfo,f=a.size,e=a.origin,q=r*f[0],p=r*f[1];for(b.sort(function(a,b){g[0]=e.x+q*(a.col+.5);g[1]=e.y-p*(a.row+.5);l[0]=e.x+q*(b.col+.5);l[1]=e.y-p*(b.row+.5);return m.vec2.squaredDistance(g,d)-m.vec2.squaredDistance(l,d)});0<b.length&&(r=b.pop(),this._removeTile(r.id),c--,c!==this.maxSize););return c};c.prototype._removeTile=function(c){var d=this._tilePerId.get(c);this.removedFunc&&this.removedFunc(d);this._tilePerId["delete"](c)};return c}();
d.default=n})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper","../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(n,d,m,g,l){Object.defineProperty(d,"__esModule",{value:!0});n=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+c+".Start"))};
c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=m([l.subclass("esri.views.2d.support.Timeline")],c)}();d.Timeline=n})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../../input/recognizers/Drag ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(n,d,m,g,l,c,e,h,r,b,a,f,k,q,p,t,u,z,w,D,x,A,v,B){var C={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},y={zoomIn:["\x3d","+"],zoomOut:["-","_"]},I={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(d){function l(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new c;return a}m(l,d);l.prototype.initialize=function(){var a=this;this.viewEvents=new D.ViewEvents(this.view);
this._handles.add([e.whenNot(this.view,"ready",function(){return a._disconnect()}),e.when(this.view,"ready",function(){return a._connect()})])};l.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};l.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};l.prototype._connect=
function(){var c=new z.BrowserEventSource(this.view.surface,this.view.input),d=[new v.PointerClickHoldAndDrag,new B.SingleAndDoubleClick,new A.Drag],d=new w.InputManager(c,d);d.installHandlers("prevent-context-menu",[new x.PreventContextMenu]);d.installHandlers("navigation",[new u.PinchRotateAndZoom(this.view),new f.GamepadNavigation(this.view),new t.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new b.DragPan(this.view,"primary"),new k.KeyPan(this.view,C),new p.KeyZoom(this.view,y),new q.KeyRotate(this.view,
I),new a.DragRotate(this.view,"secondary"),new r.DoubleClickZoom(this.view,["Ctrl"])]);this.viewEvents.connect(d);this._source=c;this._inputManager=d};Object.defineProperty(l.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});g([h.property()],l.prototype,"view",void 0);return l=g([h.subclass("esri.views.2d.input.MapViewInputManager")],l)}(h.declared(l))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports",
"../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,d,m,g,l){Object.defineProperty(d,"__esModule",{value:!0});n=function(c){function d(d,e){var b=c.call(this,!0)||this;b.view=d;b.registerIncoming("double-click",e,function(a){return b._handleDoubleClick(a,e)});return b}m(d,c);d.prototype._handleDoubleClick=function(c,d){l.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),d?this.view.mapViewNavigation.zoomOut([c.data.x,
c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return d}(g.InputHandler);d.DoubleClickZoom=n})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=function(d,g){switch(g){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=
function(d,g){if("touch"===d.pointerType)return!1;switch(g){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,d,m,g,l,c){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function e(e,b,a){var f=
d.call(this,!0)||this;f.view=e;f.pointerAction=b;f.registerIncoming("drag",a,function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(a){return f.stopMomentumNavigation()});var k=f.view.mapViewNavigation;f.dragEventSeparator=new g.DragEventSeparator({start:function(a,b){k.pan.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(f.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(f.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===
a&&c.eventMatchesPointerAction(b.data,f.pointerAction)}});return f}m(e,d);e.prototype._handleDrag=function(c){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return e}(l.InputHandler);d.DragPan=n})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,
"__esModule",{value:!0});n=function(){function d(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var g=d.data,c=g.pointers.size;switch(g.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=
c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};d.prototype.emitStart=function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,
d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=n})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,d,m,g,l,c){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function e(e,b,a){var f=d.call(this,!0)||this;f.view=e;f.pointerAction=b;var k=f.view.mapViewNavigation;f.dragEventSeparator=
new g.DragEventSeparator({start:function(a,b){k.rotate.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(f.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end(f.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,f.pointerAction)}});f.registerIncoming("drag",a,function(a){return f.dragEventSeparator.handle(a)});return f}m(e,d);return e}(l.InputHandler);d.DragRotate=n})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(n,d,m,g,l,c,e,h,r){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function k(a){var b=d.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new g;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}m(k,d);k.prototype.onInstall=function(a){var b=this;d.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,
"enabled",function(a){a?(b.handle.resume(),b.frameTask||(b.frameTask=l.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};k.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);d.prototype.onUninstall.call(this)};k.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&
this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,r.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,r.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};k.prototype.frameUpdate=function(c){var d=this.transformation;if(!r.isZeroTransformation(d)){var k=this.view.viewpoint.clone(),p=a*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(k,k,[d.translation[0]*p,-d.translation[1]*p]);p=this.view.size;e.scaleAndRotateBy(k,
k,1+d.translation[2]*f*c,this.view.constraints.rotationEnabled?-d.heading*b*c:0,[p[0]/2,p[1]],p);c=this.view.constraints.constrain(k,this.view.viewpoint);this.view.viewpoint=c}};return k}(h.InputHandler);d.GamepadNavigation=n;var b=.06,a=.7,f=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(n,d,m){function g(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=
g;d.resetTransformation=function(d){d.translation[0]=0;d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,c,e){var h=d.state;d=d.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===d.deviceType?(e.translation[0]=g(h.axes[0]),e.translation[1]=g(h.axes[1]),e.translation[2]=g(h.buttons[7])-g(h.buttons[6]),e.heading=g(h.axes[2]),e.tilt=g(h.axes[3])):"spacemouse"===d.deviceType&&(e.translation[0]=1.2*g(h.axes[0]),e.translation[1]=1.2*g(h.axes[1]),
e.translation[2]=2*-g(h.axes[2]),e.heading=1.2*g(h.axes[5]),e.tilt=1.2*g(h.axes[3]));e.tilt*=c;m.vec3.scale(e.translation,e.translation,1);return e};d.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];return c};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(c,g,l){var b,a=d.call(this,!0)||this;a.view=c;a.keys=g;a._pressed=!1;a._keyMap=(b={},b[g.left]="left",b[g.right]="right",b[g.up]="up",b[g.down]="down",b);a.registerIncoming("key-down",l,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",l,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",l,function(){return a._handleBlur()});
return a}m(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(d)switch(e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(g.InputHandler);d.KeyPan=n})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(c,g,l){var b,a=d.call(this,!0)||this;a.view=c;a.keys=g;a._pressed=!1;a._keyToDirection=
(b={},b[g.clockwiseOption1]="clockwise",b[g.clockwiseOption2]="clockwise",b[g.counterClockwiseOption1]="counterClockwise",b[g.counterClockwiseOption2]="counterClockwise",b[g.resetOption1]="reset",b[g.resetOption2]="reset",b);a.registerIncoming("key-down",l,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",l,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",l,function(){return a._handleBlur()});return a}m(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(d)switch(e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();
break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(g.InputHandler);d.KeyRotate=n})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(c,g,l){var b=d.call(this,!0)||this;b.view=c;b.keys=g;b._keysToZoomAction=
{};b.registerIncoming("key-down",l,function(a){return b._handleKeyDown(a)});g.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});g.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}m(c,d);c.prototype._handleKeyDown=function(c){this._handleKey(c)};c.prototype._handleKey=function(c){var d=c.modifiers;0<d.size&&!d.has("Shift")||(d=this._keysToZoomAction[c.data.key],0===d?(this.view.mapViewNavigation.zoomIn(),c.stopPropagation()):1===d&&(this.view.mapViewNavigation.zoomOut(),
c.stopPropagation()))};return c}(g.InputHandler);d.KeyZoom=n})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(c,g){var e=d.call(this,!0)||this;e.view=c;e._canZoom=!0;e.registerIncoming("mouse-wheel",g,function(b){return e._handleMouseWheel(b)});return e}m(c,d);c.prototype._handleMouseWheel=function(c){var d=
this;if(this._canZoom){var e=this.view.mapViewNavigation,b=c.data;if(b=e.zoom(1/Math.pow(.6,1/60*b.deltaY),[b.x,b.y]))this._canZoom=!1,b.catch(function(a){}).then(function(){d._canZoom=!0;e.end()});c.stopPropagation()}};return c}(g.InputHandler);d.MouseWheelZoom=n})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(n,d,m,g,l){Object.defineProperty(d,
"__esModule",{value:!0});n=function(c){function d(d){var e=c.call(this,!0)||this;e.view=d;e.registerIncoming("drag",function(a){return e._handleDrag(a)});e.registerIncoming("pointer-down",function(a){return e.stopMomentumNavigation()});var b=e.view.mapViewNavigation;e.dragEventSeparator=new g.DragEventSeparator({start:function(a,c){b.pinch.begin(e.view,c.data);c.stopPropagation()},update:function(a,c){b.pinch.update(e.view,c.data);c.stopPropagation()},end:function(a,c){b.pinch.end(e.view,c.data);
c.stopPropagation()},condition:function(a){return 2<=a}});return e}m(d,c);d.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};d.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return d}(l.InputHandler);d.PinchRotateAndZoom=n})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(n,d,m,g,l,c,
e){Object.defineProperty(d,"__esModule",{value:!0});var h=m("trident"),r=m("edge"),b=m("chrome"),a=m("ff"),f=m("safari");n=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;l.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",
a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(k[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(k[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(t){}};d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=g.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(c,d){d.preventDefault();var e=d.deltaY;switch(d.deltaMode){case 0:if(h||r)e=e/document.documentElement.clientHeight*600;break;case 1:e*=30;break;case 2:e*=900}h||r?e*=.7:b||f?e*=.6:a&&(e*=1.375);var k=Math.abs(e);
100<k&&(e=e/k*200/(1+Math.exp(-.02*(k-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:e});this._callback(c,d)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=
n;var k={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function n(c,d){d=d||Object.create(null);var f=document.createEvent("Event");
f.initEvent(c,d.bubbles||!1,d.cancelable||!1);c=2;for(var e;c<b.length;c++)e=b[c],f[e]=d[e]||a[c];f.buttons=d.buttons||0;c=0;c=d.pressure&&f.buttons?d.pressure:f.buttons?.5:0;f.x=f.clientX;f.y=f.clientY;f.pointerId=d.pointerId||0;f.width=d.width||0;f.height=d.height||0;f.pressure=c;f.tiltX=d.tiltX||0;f.tiltY=d.tiltY||0;f.twist=d.twist||0;f.tangentialPressure=d.tangentialPressure||0;f.pointerType=d.pointerType||"";f.hwTimestamp=d.hwTimestamp||0;f.isPrimary=d.isPrimary||!1;return f}function d(){this.array=
[];this.size=0}function m(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);v&&(this.observer=new v(this.mutationWatcher.bind(this)))}function g(a){return"body /shadow-deep/ "+l(a)}function l(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function e(){if(I){C.forEach(function(a){String(a)===a?(y+=l(a)+c(a)+"\n",E&&(y+=g(a)+c(a)+"\n")):(y+=a.selectors.map(l)+c(a.rule)+"\n",E&&(y+=a.selectors.map(g)+
c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=y;document.head.appendChild(a)}}function h(a){if(!u.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function r(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
q=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],p={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!==typeof SVGElementInstance,u={pointermap:new f,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Y){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new n(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<k.length;d++)c=k[d],b[c]=a[c]||q[d],t&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in p))return b},propagate:function(a,
b,c){for(var d=a.target,f=[];null!=d&&d!==document&&!d.contains(a.relatedTarget);)if(f.push(d),d=d.parentNode,!d)return;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new n("gotpointercapture");d.pointerId=
a;d._target=b;c||this.asyncDispatchEvent(d)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new n("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};u.boundHandler=u.eventHandler.bind(u);var z={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,
c),f;for(f=this.targetingShadow(d);f;){if(a=f.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;f=this.olderShadow(f)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),
D=Array.prototype.map.call.bind(Array.prototype.map),x=Array.prototype.slice.call.bind(Array.prototype.slice),A=Array.prototype.filter.call.bind(Array.prototype.filter),v=window.MutationObserver||window.WebKitMutationObserver,B={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};m.prototype={watchSubtree:function(a){this.observer&&z.canTarget(a)&&this.observer.observe(a,B)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(x(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=D(a,this.findElements,this);b.push(A(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],y="",I=window.PointerEvent||window.MSPointerEvent,E=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,F=u.pointermap,H=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(R){}var N={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,
this.events)},unregister:function(a){u.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,f=b.length,e;d<f&&(e=b[d]);d++){var k=Math.abs(a-e.y);if(25>=Math.abs(c-e.x)&&25>=k)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=F.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);G||(c.buttons=H[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);F.set(this.POINTER_ID,a);b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);if(!G){var d=H[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}F.set(this.POINTER_ID,a);c.buttons&=~H[c.button];0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;u.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);u.cancel(a);this.deactivateMouse()},deactivateMouse:function(){F.delete(this.POINTER_ID)}},P=u.captureInfo,O=z.findTarget.bind(z),L=z.allShadows.bind(z),J=u.pointermap,S,M={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){S.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,u.listen(a,this.events),L(a).forEach(function(a){a._scrollType=c;u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;u.unlisten(a,this.events);L(a).forEach(function(a){a._scrollType=void 0;u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,L(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):
d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===J.size||1===J.size&&J.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=P[d]||O(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,f;c<d&&(f=a[c]);c++)if(f.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(J.size>=b.length){var c=[];J.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){J.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});u.enterOver(a);u.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=J.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;u.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(u.leaveOut(c),u.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(u.up(a),u.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a);u.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){J.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=N.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};S=new m(M.elementAdded,M.elementRemoved,M.elementChanged,M);var K=u.pointermap,X=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,Q={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;X&&(b=u.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);u.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);u.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);u.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);u.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=u.makeEvent("lostpointercapture",a);u.dispatchEvent(a)},MSGotPointerCapture:function(a){a=u.makeEvent("gotpointercapture",a);u.dispatchEvent(a)}},T,V,W;window.navigator.msPointerEnabled?(T=function(a){h(a);r(this);0!==u.pointermap.get(a).buttons&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},V=function(a){h(a);u.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(T=function(a){h(a);r(this);0!==u.pointermap.get(a).buttons&&u.setCapture(a,this)},V=function(a){h(a);u.releaseCapture(a)});W=function(a){return!!u.captureInfo[a]};var U=window.PointerEvent||window.MSPointerEvent;return{dispatcher:u,Installer:m,PointerEvent:n,PointerMap:f,targetFinding:z,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=n,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),u.registerSource("ms",Q)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",M)),u.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:T},releasePointerCapture:{value:V},hasPointerCapture:{value:W}})},applyLocal:function(a){U||(window.PointerEvent||(window.navigator.msPointerEnabled?
u.registerSource("ms",Q):(u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",M)),u.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=T.bind(a),a.releasePointerCapture=V.bind(a),a.hasPointerCapture=W.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(n,d,m,g){Object.defineProperty(d,
"__esModule",{value:!0});d.primaryKey=g("mac")?"Meta":"Ctrl";var l={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(n=48;58>n;n++)l[n]=String.fromCharCode(n);for(n=1;25>n;n++)l[111+n]="F"+n;for(n=65;91>n;n++)l[n]=[String.fromCharCode(n+32),String.fromCharCode(n)];d.eventKey=function(c){if(void 0!==c.key)return m.eventKey(c);var d=l[c.keyCode];return Array.isArray(d)?c.shiftKey?
d[1]:d[0]:d};d.isSystemModifier=function(c){switch(c){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}return!1}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(n,d,m,g,l,c){Object.defineProperty(d,"__esModule",{value:!0});n=function(){function d(d,e){var b=this;this.element=d;this.input=e;this.handleGamepadConnectedEvent=function(a){b.handleGamepadConnected(a.gamepad)};
this.handleGamepadDisconnectedEvent=function(a){a=a.gamepad;var d=b.inputDevices[a.index];d&&(b.emitGamepadEvent(a,c.extractState(d),!1),b.inputDevices[a.index]=void 0,b.latestUpdate[a.index]=void 0,b.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return b.handleGamepadConnected(a)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}d.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(d.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"pollingEnabled",{set:function(c){this.supported&&
(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});d.prototype.handleGamepadConnected=function(c){var d=new l(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d))};d.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=g.addFrameTask({update:function(){return c.readGamepadState()}}))};d.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};d.prototype.readGamepadState=function(){var d=this,e=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!b;this.forEachGamepad(function(b){var f=d.inputDevices[b.index];if(f){var e=d.latestUpdate[b.index],f=c.extractState(f),p=a||c.stateIdle(f);e&&(e.timestamp===b.timestamp||!e.active&&p||c.stateEqual(e.state,f))||d.emitGamepadEvent(b,f,!p)}})};d.prototype.forEachGamepad=function(c){for(var d=
window.navigator.getGamepads(),b=0;b<d.length;b++){var a=d[b];this.validate(a)&&c(a)}};d.prototype.emitGamepadEvent=function(c,d,b){var a=this.latestUpdate[c.index];if((a=a&&a.active)||b)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:b},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!a&&b?"start":a&&b?"update":"end"})};d.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var d=0;d<c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};
return d}();d.GamepadSource=n})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var g=d.native;return{buttons:g.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:g.axes.map(function(c){var e=d.axisThreshold,g=Math.abs(c);c=g<e?0:m.sign(c)*(g-e)/(1-e);return c})}};d.stateEqual=function(d,l){if(d.axes.length!==l.axes.length||d.buttons.length!==
l.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==l.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==l.buttons[c])return!1;return!0};d.stateIdle=function(d){for(var g=0;g<d.axes.length;g++)if(0!==d.axes[g])return!1;for(g=0;g<d.buttons.length;g++)if(0!==d.buttons[g])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./handlers/LatestPointerType".split(" "),
function(n,d,m,g,l,c,e,h,r,b){Object.defineProperty(d,"__esModule",{value:!0});var a=c.getLogger("esri.views.input.InputManager");n=function(c){function d(a,b){a=c.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=r.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}m(d,c);d.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=b;return{}};d.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});d.prototype.installHandlers=function(b,c){var d=this;if(this._nameToGroup[b])a.error("There is already an InputHandler group registered under the name `"+
b+"`");else if(0===c.length)a.error("Can't register a group of zero handlers");else{var f={name:b,handlers:c.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[b]=f;b=function(a){var b=f.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){d.updateDependencies()},emit:function(a,c,f,e){d._emitInputEvent(b.priorityIndex,a,c,f,e)},setPointerCapture:function(a,c){d._setPointerCapture(f,
b,a,c)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){d.notifyChange("hasPendingInputs")}})};var e=this;for(c=f.handlers.length-1;0<=c;c--)b(c);this.updateDependencies()}};d.prototype.uninstallHandlers=function(b){var c=this._nameToGroup[b];c?(c.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[b],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=
!0:this._garbageCollectRemovedHandlers()):a.error("There is no InputHandler group registered under the name `"+b+"`")};d.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};d.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-
1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var f=d.handler.hasSideEffects;if(!f)for(var e=0,k=d.handler.outgoingEventTypes;e<k.length;e++)if(a.has(k[e])){f=!0;break}if(f)for(e=0,k=d.handler.incomingEventMatches;e<k.length;e++){var g=k[e];a.add(g.eventType);for(var q=0,g=g.keyModifiers;q<g.length;q++){var h=g[q];r.isSystemModifier(h)||b.add(h)}}d.active=f}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&
(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};d.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};d.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b.native?b.native.timestamp:void 0)};d.prototype._updateKeyModifiers=function(a,b){var c=this;
if(b){var d=!1,f=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},e=function(a,b){b&&!c._activeKeyModifiers.has(a)?(f(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(f(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var k=b.key;this._keyModifiers.has(k)&&e(k,"key-down"===a)}a=b.native;e("Alt",!(!a||!a.altKey));e("Ctrl",!(!a||!a.ctrlKey));e("Shift",!(!a||!a.shiftKey));e("Meta",!(!a||!a.metaKey));
e("Primary",this._activeKeyModifiers.has(this.primaryKey))}};d.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new b.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};d.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;
this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};d.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};d.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,
a,b,c)};d.prototype._emitInputEvent=function(a,b,c,d,k){d=void 0!==d?d:this._currentPropagation?this._currentPropagation.timestamp:e();b=new f(b,c,d,k||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};d.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=
!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var f=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(f);f.shouldStopPropagation()||c.push(f)}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};d.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?
1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var f=d[c],e=function(a){if(f.eventType!==a.eventType)return"continue";var b=f.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===f.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:f.keyModifiers.length>a.keyModifiers.length?-1:1}},k=0,g=b.handler.incomingEventMatches;k<g.length;k++){var p=e(g[k]);if("object"===typeof p)return p.value}return a.priorityIndex>b.priorityIndex?-1:
1};d.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],f=0;f<b.length&&0<=this._compareHandlerPriority(d,b[f]);)f++;b.splice(f,0,d)}return b};Object.defineProperty(d.prototype,"debug",{get:function(){var a=this,b=function(b){var c=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=c};return{injectEvent:function(c,d){b(function(){a._onEventReceived(c,d)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});g([h.property({readOnly:!0})],
d.prototype,"hasPendingInputs",null);g([h.property({readOnly:!0})],d.prototype,"latestPointerType",void 0);return d=g([h.subclass("esri.views.input.InputManager")],d)}(h.declared(l));d.InputManager=n;var f=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/handlers/LatestPointerType":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(c){var e=d.call(this,!0)||this;e._onChange=c;e._value="mouse";e.registerIncoming("pointer-down",function(c){e._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});e._moveHandler=e.registerIncoming("pointer-move",function(c){e._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});e._moveHandler.pause();return e}m(c,d);
c.prototype._setValue=function(c){c!==this._value&&("touch"===c?this._moveHandler.resume():this._moveHandler.pause(),this._value=c,this._onChange(c))};return c}(g.InputHandler);d.LatestPointerType=n})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,d,m,g){Object.defineProperty(d,"__esModule",{value:!0});n=function(d){function c(){var c=d.call(this,!0)||this;c.registerIncoming("context-menu",
function(c){c.data.native.preventDefault()});return c}m(c,d);return c}(g.InputHandler);d.PreventContextMenu=n;d.default=n})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),function(n,d,m,g,l,c){function e(a){var b=[];a.forEach(function(a){b.push(g.createScreenPoint(a.event.x,a.event.y))});return c.fitCircleLSQ(b)}function h(a){var c=e(a),d=0;a.forEach(function(a){for(var f=
b(a,c),f=f-a.lastAngle;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=a.lastAngle+f;a.lastAngle=f;d+=f-a.initialAngle});d/=a.size||1;return{angle:d,radius:c.radius,center:c.center}}function r(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(d,"__esModule",{value:!0});n=function(a){function c(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=
new Map;b.isDragging=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}m(c,a);c.prototype.createPayload=function(a,b,c,d){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,
timestamp:d,pointers:r(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};c.prototype.addPointer=function(a){var c=a.native.pointerId,d=h(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,e(this.activePointerMap));a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(d)};c.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};
c.prototype.removePointer=function(a){var b=h(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};c.prototype.updatePointerAngles=function(a){var c=h(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=b(d,c)-a;d.lastAngle=b(d,c)-a})};c.prototype.emitEvent=function(a,b,c){var d=h(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};c.prototype.handlePointerUpAndPointerLost=function(a){var b=
a.data.native.pointerId,c=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,c),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};c.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),this.emitEvent("update",
c,d)):(this.addPointer(c),this.emitEvent("added",c,d)):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",c,d))}};return c}(l.InputHandler);d.Drag=n;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require",
"exports","../../../core/screenUtils"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,l){return Math.abs(l.x-d.x)+Math.abs(l.y-d.y)};d.euclideanDistance=function(d,l){var c=l.x-d.x;d=l.y-d.y;return Math.sqrt(c*c+d*d)};d.fitCircleLSQ=function(d,l){l?(l.radius=0,l.center.x=0,l.center.y=0):l={radius:0,center:m.createScreenPoint()};if(0===d.length)return l;if(1===d.length)return l.center.x=d[0].x,l.center.y=d[0].y,l;if(2===d.length){var c=d[0];d=d[1];var e=
[d.x-c.x,d.y-c.y],g=e[0],e=e[1];l.radius=Math.sqrt(g*g+e*e)/2;l.center.x=(c.x+d.x)/2;l.center.y=(c.y+d.y)/2;return l}for(var r=0,b=0,a=0;a<d.length;a++)r+=d[a].x,b+=d[a].y;for(var r=r/d.length,b=b/d.length,f=d.map(function(a){return a.x-r}),k=d.map(function(a){return a.y-b}),q=c=l=0,p=0,t=g=0,a=e=0;a<f.length;a++){var u=f[a],z=k[a],w=u*u,D=z*z;l+=w;c+=D;q+=u*z;p+=w*u;g+=D*z;t+=u*D;e+=z*w}a=l;f=q;k=c;p=.5*(p+t);g=.5*(g+e);e=a*k-q*f;t=(p*k-g*f)/e;g=(a*g-q*p)/e;e=m.createScreenPoint(t+r,g+b);return{radius:Math.sqrt(t*
t+g*g+(l+c)/d.length),center:e}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(n,d,m,g,l,c){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};n=function(e){function h(c,b,a,f,k){void 0===c&&(c=d.DefaultParameters.maximumClickDelay);void 0===
b&&(b=d.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=d.DefaultParameters.movementUntilTouchDrag);void 0===f&&(f=d.DefaultParameters.holdDelay);void 0===k&&(k=g.default);var q=e.call(this,!1)||this;q.maximumClickDelay=c;q.movementUntilMouseDrag=b;q.movementUntilTouchDrag=a;q.holdDelay=f;q._clock=k;q._pointerState=new Map;q._pointerDrag=q.registerOutgoing("pointer-drag");q._immediateClick=q.registerOutgoing("immediate-click");q._pointerHold=q.registerOutgoing("hold");q.registerIncoming("pointer-down",
q._handlePointerDown.bind(q));q.registerIncoming("pointer-up",function(a){q._handlePointerLoss(a,"pointer-up")});q.registerIncoming("pointer-capture-lost",function(a){q._handlePointerLoss(a,"pointer-capture-lost")});q.registerIncoming("pointer-cancel",function(a){q._handlePointerLoss(a,"pointer-cancel")});q._moveHandle=q.registerIncoming("pointer-move",q._handlePointerMove.bind(q));q._moveHandle.pause();return q}m(h,e);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=
c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var b=this,a=c.data,d=a.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));e={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,
holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};h.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};h.prototype._handlePointerMove=function(d){var b=d.data,a=this._pointerState.get(b.native.pointerId);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,
a.modifiers):c.euclideanDistance(b,a.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(d),a.previousEvent=b)};h.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(f){null!=f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null);f.isDragging||(f.modifiers=c.modifiers,f.isDragging=!0,d===f.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",
f,a)):b._pointerDrag.emit(b._createPointerDragData("start",f,f.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===b?a:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===a.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&
!e.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(l.InputHandler);d.PointerClickHoldAndDrag=n})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(n,d,m,g,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});
d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};n=function(c){function h(b,a,f,e,q){void 0===b&&(b=d.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=d.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=d.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=d.DefaultParameters.maximumDoubleTouchDistance);void 0===q&&(q=g.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=b;
k.maximumDoubleClickDistance=a;k.maximumDoubleTouchDelay=f;k.maximumDoubleTouchDistance=e;k._clock=q;k._pointerState=new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}m(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&
(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,"hasPendingInputs",{get:function(){return!l.everyMap(this._pointerState,function(b){return null==b.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};h.prototype._handleImmediateClick=function(b){var a=b.data,c=this._pointerId(a),d=this._pointerState.get(c);if(d){var g="touch"===a.native.pointerType?
this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(d.event.data,a)>g?(this._clearDoubleClickTimeout(c,!0),this._startClick(b)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(a,void 0,d.event.modifiers))}else this._startClick(b)};h.prototype._startClick=function(b){var a=this,c=this._pointerId(b.data);this._pointerState.set(c,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(c)},"touch"===b.data.native.pointerType?
this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};h.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};h.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};h.prototype._clearDoubleClickTimeout=function(b,a){var c=this._pointerState.get(b);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),
this._pointerState.delete(b),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=function(b){var a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return h}(c.InputHandler);d.SingleAndDoubleClick=n})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(n,d,m,g,l,c,e){var h=0;return function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new l([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}m(b,c);Object.defineProperty(b.prototype,"version",{get:function(){return h++},enumerable:!0,configurable:!0});g([e.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],b.prototype,"version",null);g([e.property({type:l})],b.prototype,"color",void 0);g([e.property({type:l})],b.prototype,"haloColor",
void 0);g([e.property()],b.prototype,"haloOpacity",void 0);g([e.property()],b.prototype,"fillOpacity",void 0);return b=g([e.subclass("esri.views.2d.support.HighlightOptions")],b)}(e.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(n,d,m,g,l){function c(a,c){var d=a||{},f=d.format,e=d.quality,k=d.rotation,d=d.disableSlice,h=a&&!a.ignorePadding&&c.padding||t,u;u=
c.width-h.left-h.right;c=c.height-h.top-h.bottom;var z=h=0,m=u,n=c;if(a&&a.area){var h=Math.floor(a.area.x)||0,z=Math.floor(a.area.y)||0,E=null!=a.area.width?Math.floor(a.area.width):null,F=null!=a.area.height?Math.floor(a.area.height):null,m=m-h,n=n-z;null!=E&&null!=F?(m=Math.min(m,E),n=Math.min(n,F)):null==E&&null!=F?(E=Math.min(m,E),n*=E/m,m=E):null!=E&&null==F&&(E=Math.min(n,F),m*=E/n,n=E)}h=b({x:h,y:z,width:m,height:n},a);z=Math.floor(Math.max(h.x,0));m=Math.floor(Math.max(h.y,0));u={x:z,y:m,
width:Math.floor(Math.min(h.width,u-z)),height:Math.floor(Math.min(h.height,c-m))};c=u.width/u.height;h=h.width/h.height;h!==c&&(h>c?(c=Math.floor(u.width/h),u={x:u.x,y:Math.floor(u.y+(u.height-c)/2),width:u.width,height:c}):(c=Math.floor(u.height*h),u={x:Math.floor(u.x+(u.width-c)/2),y:u.y,width:c,height:u.height}));h=r(a,u);c=h.width;h=h.height;a:switch(f){case "png":case "jpg":case "jpeg":break a;case null:case void 0:f=q;break a;default:g.neverReached(f),f=q}z=p[f];e=l.clamp(null!=e?e:z,0,100);
return{format:f,quality:e,area:u,width:c,height:h,rotation:k,disableSlice:d||!1,ignoreBackground:a&&a.ignoreBackground}}function e(a,b){return a.toDataURL(k[b.format],b.quality/100)}function h(b,c,d){d||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),d=a);return d.getContext("2d").createImageData(b,c)}function r(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==
a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=c;d.toRenderSettings=function(a,b){var d=c(a,b),f=d.area,e=d.width/f.width,k=a&&!a.ignorePadding&&
b.padding||t,g=k.left+k.right,h=k.top+k.bottom;return{framebufferWidth:Math.floor((b.width-g)*e+g),framebufferHeight:Math.floor((b.height-h)*e+h),region:{x:Math.floor(f.x*e)+k.left,y:Math.floor(f.y*e)+k.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:e,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice,ignoreBackground:d.ignoreBackground}};d.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var f=a.data,k=f.length,g=0;g<k;g+=4){var h=
f[g+3];0<h&&(h/=255,f[g+0]/=h,f[g+1]/=h,f[g+2]/=h)}c.width=a.width;c.height=a.height;f=c.getContext("2d");f.putImageData(a,0,0);d.flipY&&(f.save(),f.globalCompositeOperation="copy",f.scale(1,-1),f.translate(0,-f.canvas.height),f.drawImage(f.canvas,0,0),f.restore());a=f.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};d.toDataUrl=e;d.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(a,
b)}catch(D){f=!1}return h(a,b,c)};d.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(a,b,c)}catch(x){f=!1}b=h(b,c,d);b.data.set(a,0);return b};d.resampleHermite=function(a,b,c,d,f,e,k,g){void 0===d&&(d=0);void 0===f&&(f=0);void 0===e&&(e=a.width-d);void 0===k&&(k=a.height-f);void 0===g&&(g=!1);var h=a.data,q=b.width,p=b.height,w=b.data;e/=q;k/=p;var u=Math.ceil(e/2),t=Math.ceil(k/2);a=a.width;for(var m=0;m<p;m++)for(var l=
0;l<q;l++){for(var z=4*(l+(g?p-m-1:m)*q),D=0,x=0,n=0,r=0,v=0,A=0,B=(m+.5)*k,Q=Math.floor(m*k);Q<(m+1)*k;Q++)for(var T=Math.abs(B-(Q+.5))/t,V=(l+.5)*e,T=T*T,W=Math.floor(l*e);W<(l+1)*e;W++){var U=Math.abs(V-(W+.5))/u,U=Math.sqrt(T+U*U);if(!(1<=U)){var U=2*U*U*U-3*U*U+1,R=4*(d+W+(f+Q)*a),A=A+U*h[R+3],x=x+U;!c&&255>h[R+3]&&(U=U*h[R+3]/255);n+=U*h[R];r+=U*h[R+1];v+=U*h[R+2];D+=U}}w[z]=n/D;w[z+1]=r/D;w[z+2]=v/D;w[z+3]=A/x}return b};d.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;
var c=a.framebufferHeight,d=a.region,f=Math.min(8,2048/Math.max(b,c));return 1.5>f?a:m({},a,{framebufferWidth:Math.round(b*f),framebufferHeight:Math.round(c*f),pixelRatio:a.pixelRatio*f,resample:{region:{x:Math.round(d.x*f),y:Math.round(d.y*f),width:Math.round(d.width*f),height:Math.round(d.height*f)},width:b,height:c}})};var a=null,f=!0,k={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q="jpg",p={png:100,jpg:98,jpeg:98},t={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require",
"exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(n,d,m,g,l){Object.defineProperty(d,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};d.check=function(d){d=m({},c,d);return l("esri-webgl")?!d.supportsMajorWebPerformanceCaveat&&l("esri-webgl-major-performance-caveat")?new g("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):
l("esri-webgl-high-precision-fragment")?l("esri-webgl-vertex-shader-samplers")?l("esri-webgl-element-index-uint")?l("esri-webgl-standard-derivatives")?l("esri-webgl-instanced-arrays")?null:new g("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new g("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new g("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):
new g("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new g("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new g("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(n,d,m,g,l,c){return function(c){function d(d){d=c.call(this)||this;d.components=["attribution","zoom"];return d}m(d,c);g([l.property()],d.prototype,"components",void 0);return d=g([l.subclass("esri.views.ui.2d.DefaultUI2D")],d)}(l.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(n,d,m,g,l,c,e,h,r,b,a,f){return function(d){function k(a){a=d.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}m(k,d);k.prototype.initialize=function(){this._handles.add([l.init(this,"components",this._componentsWatcher.bind(this)),l.init(this,"view",this._updateViewAwareWidgets.bind(this))])};k.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};k.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};k.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};k.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};k.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};k.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};k.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};k.prototype._createAttribution=function(){return new r({view:this.view})};k.prototype._createCompass=function(){return new b({view:this.view})};
k.prototype._createNavigationToggle=function(){return new a({view:this.view})};k.prototype._createZoom=function(){return new f({view:this.view})};g([c.property()],k.prototype,"components",void 0);return k=g([c.subclass("esri.views.ui.DefaultUI")],k)}(c.declared(h))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(n,
d,m,g,l,c,e){return function(d){function h(){var b=null!==d&&d.apply(this,arguments)||this;b.widget=null;return b}m(h,d);h.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(h.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(b){this._set("id",b)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});h.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),c.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};g([e.property()],h.prototype,"id",null);g([e.property()],h.prototype,"node",null);g([e.cast("node")],h.prototype,"castNode",null);g([e.property({readOnly:!0})],
h.prototype,"widget",void 0);return h=g([e.subclass("esri.views.ui.Component")],h)}(e.declared(l))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(n,d,m,g,l,c,e,h,r,b,a,f){function k(b){return"object"!==
typeof b||b&&b.isInstanceOf&&b.isInstanceOf(a)||"declaredClass"in b||!("component"in b||"index"in b||"position"in b)?null:b}function q(a,b){var c=b.bottom,d=b.left,f=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=f}var p={left:0,top:0,bottom:0,right:0},t={bottom:30,top:15,right:15,left:15};return function(d){function e(a){a=d.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new h;a._componentToKey=new Map;a.view=
null;a._initContainers();return a}g(e,d);e.prototype.initialize=function(){this._handles.add([r.init(this,"view.padding, container",this._applyViewPadding.bind(this)),r.init(this,"padding",this._applyUIPadding.bind(this))])};e.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(e.prototype,"container",{set:function(a){var b=
this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),q(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});e.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:m({},t,a)};Object.defineProperty(e.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});e.prototype.add=function(b,c){var d=this,f,e;if(Array.isArray(b))b.forEach(function(a){return d.add(a,
c)});else{var g=k(b);g&&(f=g.index,c=g.position,b=g.component,e=g.key);c&&"object"===typeof c&&(f=c.index,e=c.key,c=c.position);!b||c&&!this._isValidPosition(c)||(b&&b.isInstanceOf&&b.isInstanceOf(a)||(b=new a({node:b})),this._place({component:b,position:c,index:f}),this._components.push(b),e&&this._componentToKey.set(b,e))}};e.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var f=this._componentToKey;if(!f.has(a)||
f.get(a)===b)return f=this._components.indexOf(d),d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(f,1)[0]}}};e.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};e.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,f=k(a)||k(b);f&&(d=f.index,b=f.position,a=f.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};e.prototype.find=function(b){return b?b&&b.isInstanceOf&&b.isInstanceOf(a)?this._findByComponent(b):"string"===
typeof b?this._findById(b):this._findByNode(b.domNode||b):null};e.prototype._getViewPadding=function(){return this.get("view.padding")||p};e.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};e.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var c=document.createElement("div");c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var k=document.createElement("div");k.classList.add("esri-ui-bottom-right");k.classList.add("esri-ui-corner");a.appendChild(k);this._innerContainer=
a;this._manualContainer=b;a=f.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":k,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?k:e,"bottom-trailing":a?e:k};this._positionNameToContainerLookup=m({manual:b},this._cornerNameToContainerLookup)};e.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};e.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var f=-1<d,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();f?(f=Array.prototype.slice.call(a.children),0===d?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=f.length?a.appendChild(b.node):c.insertBefore(b.node,f[d])):a.appendChild(b.node)};e.prototype._applyViewPadding=function(){var a=this.container;a&&q(a,this._toPxPosition(this._getViewPadding()))};
e.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&q(a,this._toPxPosition(this.padding))};e.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};e.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};e.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};e.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};e.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};l([b.property()],e.prototype,"container",null);l([b.property({dependsOn:["view.height"]})],e.prototype,"height",null);l([b.property({value:t})],e.prototype,"padding",null);l([b.cast("padding")],e.prototype,"castPadding",null);l([b.property()],e.prototype,"view",void 0);l([b.property({dependsOn:["view.width"]})],
e.prototype,"width",null);return e=l([b.subclass("esri.views.ui.UI")],e)}(b.declared(e.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(n,d,m,g,l,c,e,h,r,b){return function(a){function d(b){b=a.call(this)||this;b._isOpen=
!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=l.widgetLabel;b.view=null;b.viewModel=new r;return b}m(d,a);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=(a={},a["esri-attribution--open"]=this._isOpen,a);return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
d.prototype._renderSourcesNode=function(){var a,c=this._isOpen,d=this._isInteractive(),f=d?0:-1,e=this.attributionText,g=d?"button":void 0,c=(a={},a["esri-attribution__sources--open"]=c,a["esri-interactive"]=d,a);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:e,role:g,tabIndex:f})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};g([e.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),b.renderable()],d.prototype,"attributionText",null);g([e.property()],d.prototype,"iconClass",void 0);g([e.property(),b.renderable()],d.prototype,"itemDelimiter",void 0);g([e.property()],d.prototype,"label",void 0);g([e.aliasOf("viewModel.view")],d.prototype,"view",void 0);g([e.property({type:r}),b.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);g([b.accessibleHandler()],d.prototype,"_toggleState",null);return d=g([e.subclass("esri.widgets.Attribution")],
d)}(e.declared(h))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(n,d,m,g,l,c,
e,h,r,b,a,f,k,q){function p(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function t(a,b,c){c&&b&&(h.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var u=[];return function(b){function d(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=new Map;d.items=
new r;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");u.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))t(u,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&t(u,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?t(u,a,c):t(u,a,b.copyright)}}),p(d.items,u)&&(d.items.removeAll(),d.items.addMany(u)),d.notifyChange("state")):d.clear()};d.handles.add([a.on(d,
"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),a.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}m(d,b);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});d.prototype._fetchAttributionData=
function(a){return l(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);b=null;c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return d=c.sent(),b=this._createContributionIndex(d,"bing-maps"===a.layer.type),[3,4];case 3:return c.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,
b)),this._updateAttributionItems(),[2]}})})};d.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var f=a[d],k=f.coverageAreas;if(!k)return;for(var g=0;g<k.length;g++)for(var h=k[g],p=h.bbox,t=h.zoomMin-(b&&h.zoomMin?1:0),u=h.zoomMax-(b&&h.zoomMax?1:0),h={extent:q.geographicToWebMercator({xmin:p[1],ymin:p[0],xmax:p[3],ymax:p[2],spatialReference:e.SpatialReference.WGS84}),attribution:f.attribution||"",score:null!=h.score?h.score:100,
id:d};t<=u;t++)c[t]=c[t]||[],c[t].push(h)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};d.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var f=q.project(d.center.clone().normalize(),b.spatialReference),e={};return a?a.filter(function(a){var b=!e[a.id]&&f&&k.extentContainsPoint(a.extent,f);b&&(e[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-
b.objectId}).map(function(a){return a.attribution}).join(", "):""};g([f.property({readOnly:!0,type:r})],d.prototype,"items",void 0);g([f.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);g([f.property()],d.prototype,"view",void 0);return d=g([f.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(f.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(n,d,m,g,l,c,e,h,r){return function(b){function a(a){a=b.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=l.widgetLabel;a.view=null;a.viewModel=new h;return a}m(a,b);a.prototype.reset=function(){};a.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,e="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=e?-1:0,e=(a={},a["esri-disabled"]=e,a["esri-interactive"]=!e,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=
!g,b);return r.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",e),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":l.reset,title:l.reset},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),r.tsx("span",{class:"esri-icon-font-fallback-text"},l.reset))};a.prototype._reset=function(){this.viewModel.reset()};a.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};g([c.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);g([c.property()],a.prototype,"iconClass",void 0);g([c.property()],a.prototype,"label",void 0);g([c.aliasOf("viewModel.view")],a.prototype,"view",void 0);g([c.property({type:h}),r.renderable(["viewModel.orientation","viewModel.state"])],a.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.reset")],a.prototype,"reset",null);g([r.accessibleHandler()],a.prototype,"_reset",null);return a=g([c.subclass("esri.widgets.Compass")],
a)}(c.declared(e))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(n,d,m,g,l,c,e,h,r){return function(b){function a(a){a=b.call(this,a)||this;a._handles=new c;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=
a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}m(a,b);a.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};a.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};g([h.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,"canShowNorth",null);g([h.property()],a.prototype,"orientation",void 0);g([h.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);g([h.property()],a.prototype,"view",void 0);g([h.property()],
a.prototype,"reset",null);return a=g([h.subclass("esri.widgets.CompassViewModel")],a)}(h.declared(r.GoToMixin(l)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(n,d,m,g,l,c,e,h,r){return function(b){function a(a){a=b.call(this)||
this;a.iconClass="esri-icon-pan2";a.label=l.widgetLabel;a.view=null;a.viewModel=new h;return a}m(a,b);Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.toggle=function(){};a.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=e,b);b=(c={},c["esri-navigation-toggle__button--active"]=!e,c);c=d?-1:0;return r.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":l.toggle,title:l.toggle},r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},r.tsx("span",{class:"esri-icon-pan"})),r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},r.tsx("span",{class:"esri-icon-rotate"})))};a.prototype._toggle=function(){this.toggle()};g([c.property()],a.prototype,"iconClass",void 0);g([c.property()],a.prototype,"label",void 0);g([c.property({value:"vertical"}),r.renderable()],a.prototype,"layout",null);g([c.aliasOf("viewModel.view"),r.renderable()],a.prototype,"view",void 0);g([c.property({type:h}),r.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.toggle")],
a.prototype,"toggle",null);g([r.accessibleHandler()],a.prototype,"_toggle",null);return a=g([c.subclass("esri.widgets.NavigationToggle")],a)}(c.declared(e))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c,e,h){return function(d){function b(a){a=
d.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}m(b,d);b.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});b.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};g([h.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);g([h.property()],b.prototype,"navigationMode",void 0);g([h.property()],b.prototype,"view",void 0);g([h.property()],b.prototype,"toggle",null);return b=g([h.subclass("esri.widgets.NavigationToggleViewModel")],
b)}(h.declared(l))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(n,d,m,g,l,c,e,h,r,b){return function(a){function d(b){b=a.call(this)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";b.label=l.widgetLabel;b.view=null;b.viewModel=new r;return b}m(d,a);d.prototype.postInitialize=
function(){this._zoomInButton=new h({action:this.zoomIn,iconClass:"esri-icon-plus",title:l.zoomIn});this._zoomOutButton=new h({action:this.zoomOut,iconClass:"esri-icon-minus",title:l.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=this.viewModel,d=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};g([c.property()],d.prototype,"iconClass",void 0);g([c.property()],d.prototype,"label",void 0);g([c.property({value:"vertical"}),b.renderable()],d.prototype,"layout",null);g([c.aliasOf("viewModel.view"),b.renderable()],d.prototype,"view",void 0);
g([c.property({type:r}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);g([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=g([c.subclass("esri.widgets.Zoom")],d)}(c.declared(e))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(n,d,m,g,l,c,e){return function(c){function d(){var b=null!==c&&c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}m(d,c);d.prototype.render=function(){var b,a,c=this.enabled?0:-1,d=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(a={},a[this.iconClass]=!!this.iconClass,a);return e.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},e.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};g([l.property()],d.prototype,"action",void 0);g([l.property(),e.renderable()],d.prototype,"enabled",void 0);g([l.property(),e.renderable()],d.prototype,"iconClass",void 0);g([l.property(),e.renderable()],d.prototype,"title",void 0);g([e.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=g([l.subclass("esri.widgets.IconButton")],d)}(l.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(n,d,m,g,l,c,e,h){return function(d){function b(a){a=d.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}m(b,d);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new h({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};g([c.property()],b.prototype,"_zoomConditions",void 0);g([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);g([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",void 0);g([c.property({dependsOn:["view.ready"],
readOnly:!0})],b.prototype,"state",null);g([c.property()],b.prototype,"view",null);g([c.property()],b.prototype,"zoomIn",null);g([c.property()],b.prototype,"zoomOut",null);return b=g([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(c.declared(l))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c){return function(d){function e(){return null!==
d&&d.apply(this,arguments)||this}m(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||c>b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||c<b},enumerable:!0,configurable:!0});g([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],e.prototype,"canZoomIn",null);g([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],e.prototype,"canZoomOut",null);g([c.property()],e.prototype,"view",void 0);return e=g([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(c.declared(l))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,d,m,g,l,c){return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}m(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});g([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomIn",null);g([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomOut",null);g([c.property()],e.prototype,"view",void 0);return e=g([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(c.declared(l))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(n,d,m){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4=m})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(n,d,m,g){function l(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],m=a[5],l=a[6],n=a[7],r=a[8],A=a[9],v=a[10],B=a[11],C=a[12],y=a[13],I=a[14];a=a[15];var E=c[0],F=c[1],H=c[2],G=c[3];b[0]=E*d+F*h+H*r+G*C;
b[1]=E*e+F*m+H*A+G*y;b[2]=E*f+F*l+H*v+G*I;b[3]=E*g+F*n+H*B+G*a;E=c[4];F=c[5];H=c[6];G=c[7];b[4]=E*d+F*h+H*r+G*C;b[5]=E*e+F*m+H*A+G*y;b[6]=E*f+F*l+H*v+G*I;b[7]=E*g+F*n+H*B+G*a;E=c[8];F=c[9];H=c[10];G=c[11];b[8]=E*d+F*h+H*r+G*C;b[9]=E*e+F*m+H*A+G*y;b[10]=E*f+F*l+H*v+G*I;b[11]=E*g+F*n+H*B+G*a;E=c[12];F=c[13];H=c[14];G=c[15];b[12]=E*d+F*h+H*r+G*C;b[13]=E*e+F*m+H*A+G*y;b[14]=E*f+F*l+H*v+G*I;b[15]=E*g+F*n+H*B+G*a;return b}function e(b,a,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,m=e+e,l=f+f;a=d*h;var n=d*
m,d=d*l,r=e*m,e=e*l,f=f*l,h=g*h,m=g*m,g=g*l;b[0]=1-(r+f);b[1]=n+g;b[2]=d-m;b[3]=0;b[4]=n-g;b[5]=1-(a+f);b[6]=e+h;b[7]=0;b[8]=d+m;b[9]=e-h;b[10]=1-(a+r);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b}function h(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b}Object.defineProperty(d,
"__esModule",{value:!0});d.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.set=function(b,a,c,d,e,g,h,u,m,l,n,r,A,v,B,C,y){b[0]=a;b[1]=c;b[2]=d;b[3]=e;b[4]=g;b[5]=h;b[6]=u;b[7]=m;b[8]=l;b[9]=n;b[10]=r;b[11]=A;b[12]=v;b[13]=B;b[14]=C;b[15]=y;return b};d.identity=l;d.transpose=function(b,a){if(b===a){var c=a[1],d=a[2],e=a[3],g=a[6],h=a[7],u=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=g;b[11]=a[14];b[12]=e;b[13]=h;b[14]=u}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};d.invert=function(b,a){var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],u=a[5],m=a[6],l=a[7],n=a[8],r=a[9],A=a[10],v=a[11],B=a[12],C=a[13],y=a[14];a=a[15];var I=c*u-d*h,E=c*m-e*h,F=c*l-g*h,H=d*m-e*u,G=d*l-g*u,N=e*l-
g*m,P=n*C-r*B,O=n*y-A*B,L=n*a-v*B,J=r*y-A*C,S=r*a-v*C,M=A*a-v*y,K=I*M-E*S+F*J+H*L-G*O+N*P;if(!K)return null;K=1/K;b[0]=(u*M-m*S+l*J)*K;b[1]=(e*S-d*M-g*J)*K;b[2]=(C*N-y*G+a*H)*K;b[3]=(A*G-r*N-v*H)*K;b[4]=(m*L-h*M-l*O)*K;b[5]=(c*M-e*L+g*O)*K;b[6]=(y*F-B*N-a*E)*K;b[7]=(n*N-A*F+v*E)*K;b[8]=(h*S-u*L+l*P)*K;b[9]=(d*L-c*S-g*P)*K;b[10]=(B*G-C*F+a*I)*K;b[11]=(r*F-n*G-v*I)*K;b[12]=(u*O-h*J-m*P)*K;b[13]=(c*J-d*O+e*P)*K;b[14]=(C*E-B*H-y*I)*K;b[15]=(n*H-r*E+A*I)*K;return b};d.adjoint=function(b,a){var c=a[0],
d=a[1],e=a[2],g=a[3],h=a[4],m=a[5],l=a[6],n=a[7],r=a[8],x=a[9],A=a[10],v=a[11],B=a[12],C=a[13],y=a[14];a=a[15];b[0]=m*(A*a-v*y)-x*(l*a-n*y)+C*(l*v-n*A);b[1]=-(d*(A*a-v*y)-x*(e*a-g*y)+C*(e*v-g*A));b[2]=d*(l*a-n*y)-m*(e*a-g*y)+C*(e*n-g*l);b[3]=-(d*(l*v-n*A)-m*(e*v-g*A)+x*(e*n-g*l));b[4]=-(h*(A*a-v*y)-r*(l*a-n*y)+B*(l*v-n*A));b[5]=c*(A*a-v*y)-r*(e*a-g*y)+B*(e*v-g*A);b[6]=-(c*(l*a-n*y)-h*(e*a-g*y)+B*(e*n-g*l));b[7]=c*(l*v-n*A)-h*(e*v-g*A)+r*(e*n-g*l);b[8]=h*(x*a-v*C)-r*(m*a-n*C)+B*(m*v-n*x);b[9]=-(c*
(x*a-v*C)-r*(d*a-g*C)+B*(d*v-g*x));b[10]=c*(m*a-n*C)-h*(d*a-g*C)+B*(d*n-g*m);b[11]=-(c*(m*v-n*x)-h*(d*v-g*x)+r*(d*n-g*m));b[12]=-(h*(x*y-A*C)-r*(m*y-l*C)+B*(m*A-l*x));b[13]=c*(x*y-A*C)-r*(d*y-e*C)+B*(d*A-e*x);b[14]=-(c*(m*y-l*C)-h*(d*y-e*C)+B*(d*l-e*m));b[15]=c*(m*A-l*x)-h*(d*A-e*x)+r*(d*l-e*m);return b};d.determinant=function(b){var a=b[0],c=b[1],d=b[2],e=b[3],g=b[4],h=b[5],m=b[6],l=b[7],n=b[8],r=b[9],x=b[10],A=b[11],v=b[12],B=b[13],C=b[14];b=b[15];return(a*h-c*g)*(x*b-A*C)-(a*m-d*g)*(r*b-A*B)+(a*
l-e*g)*(r*C-x*B)+(c*m-d*h)*(n*b-A*v)-(c*l-e*h)*(n*C-x*v)+(d*l-e*m)*(n*B-r*v)};d.multiply=c;d.translate=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,m=void 0,l=void 0,n=void 0,r=void 0,A=void 0,v=void 0,B=void 0,C=void 0,y=void 0;a===b?(b[12]=a[0]*d+a[4]*e+a[8]*c+a[12],b[13]=a[1]*d+a[5]*e+a[9]*c+a[13],b[14]=a[2]*d+a[6]*e+a[10]*c+a[14],b[15]=a[3]*d+a[7]*e+a[11]*c+a[15]):(f=a[0],g=a[1],h=a[2],m=a[3],l=a[4],n=a[5],r=a[6],A=a[7],v=a[8],B=a[9],C=a[10],y=a[11],b[0]=f,b[1]=g,b[2]=
h,b[3]=m,b[4]=l,b[5]=n,b[6]=r,b[7]=A,b[8]=v,b[9]=B,b[10]=C,b[11]=y,b[12]=f*d+l*e+v*c+a[12],b[13]=g*d+n*e+B*c+a[13],b[14]=h*d+r*e+C*c+a[14],b[15]=m*d+A*e+y*c+a[15]);return b};d.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.rotate=function(b,a,c,d){var e=d[0],f=d[1];d=d[2];var k=Math.sqrt(e*e+
f*f+d*d),h=void 0,m=void 0,l=void 0,n=void 0,r=void 0,A=void 0,v=void 0,B=void 0,C=void 0,y=void 0,I=void 0,E=void 0,F=void 0,H=void 0,G=void 0,N=void 0,P=void 0,O=void 0,L=void 0,J=void 0,S=void 0,M=void 0,m=h=void 0;if(k<g.EPSILON)return null;k=1/k;e*=k;f*=k;d*=k;h=Math.sin(c);m=Math.cos(c);l=1-m;n=a[0];r=a[1];A=a[2];v=a[3];B=a[4];C=a[5];y=a[6];I=a[7];E=a[8];F=a[9];H=a[10];G=a[11];N=e*e*l+m;P=f*e*l+d*h;O=d*e*l-f*h;L=e*f*l-d*h;J=f*f*l+m;S=d*f*l+e*h;M=e*d*l+f*h;h=f*d*l-e*h;m=d*d*l+m;b[0]=n*N+B*P+
E*O;b[1]=r*N+C*P+F*O;b[2]=A*N+y*P+H*O;b[3]=v*N+I*P+G*O;b[4]=n*L+B*J+E*S;b[5]=r*L+C*J+F*S;b[6]=A*L+y*J+H*S;b[7]=v*L+I*J+G*S;b[8]=n*M+B*h+E*m;b[9]=r*M+C*h+F*m;b[10]=A*M+y*h+H*m;b[11]=v*M+I*h+G*m;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};d.rotateX=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],f=a[5],g=a[6],h=a[7],m=a[8],l=a[9],n=a[10],r=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*c+m*d;b[5]=f*c+l*
d;b[6]=g*c+n*d;b[7]=h*c+r*d;b[8]=m*c-e*d;b[9]=l*c-f*d;b[10]=n*c-g*d;b[11]=r*c-h*d;return b};d.rotateY=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],g=a[2],h=a[3],m=a[8],l=a[9],n=a[10],r=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c-m*d;b[1]=f*c-l*d;b[2]=g*c-n*d;b[3]=h*c-r*d;b[8]=e*d+m*c;b[9]=f*d+l*c;b[10]=g*d+n*c;b[11]=h*d+r*c;return b};d.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],
g=a[2],h=a[3],m=a[4],l=a[5],n=a[6],r=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c+m*d;b[1]=f*c+l*d;b[2]=g*c+n*d;b[3]=h*c+r*d;b[4]=m*c-e*d;b[5]=l*c-f*d;b[6]=n*c-g*d;b[7]=r*c-h*d;return b};d.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=Math.sqrt(d*d+e*e+c*c),h=void 0,m=void 0,l=void 0;if(f<g.EPSILON)return null;f=1/f;d*=f;e*=f;c*=f;h=Math.sin(a);m=Math.cos(a);l=1-m;b[0]=d*d*l+m;b[1]=e*d*l+c*h;b[2]=c*d*l-e*h;b[3]=0;b[4]=d*e*l-c*h;b[5]=e*e*l+m;b[6]=c*e*l+d*h;b[7]=0;b[8]=d*c*l+e*h;b[9]=e*c*l-d*h;b[10]=c*c*l+m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationTranslation=e;d.fromQuat2=function(b,a){var c=r,d=-a[0],g=-a[1],h=-a[2],m=a[3],l=a[4],n=a[5],w=a[6],D=a[7],x=d*d+g*g+h*h+m*m;0<x?(c[0]=2*(l*m+D*d+n*h-w*g)/x,c[1]=2*(n*m+D*g+w*d-l*h)/x,c[2]=2*(w*m+D*h+l*g-n*d)/x):(c[0]=2*(l*m+D*d+n*h-w*g),c[1]=2*(n*m+D*g+w*d-l*h),c[2]=2*(w*m+D*h+l*g-n*d));e(b,a,c);return b};var r=m.create();d.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};d.getScaling=function(b,a){var c=a[0],d=a[1],
e=a[2],g=a[4],h=a[5],m=a[6],l=a[8],n=a[9];a=a[10];b[0]=Math.sqrt(c*c+d*d+e*e);b[1]=Math.sqrt(g*g+h*h+m*m);b[2]=Math.sqrt(l*l+n*n+a*a);return b};d.getRotation=function(b,a){var c=a[0]+a[5]+a[10],d=0;0<c?(d=2*Math.sqrt(c+1),b[3]=.25*d,b[0]=(a[6]-a[9])/d,b[1]=(a[8]-a[2])/d,b[2]=(a[1]-a[4])/d):a[0]>a[5]&&a[0]>a[10]?(d=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/d,b[0]=.25*d,b[1]=(a[1]+a[4])/d,b[2]=(a[8]+a[2])/d):a[5]>a[10]?(d=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/d,b[0]=(a[1]+a[4])/d,b[1]=
.25*d,b[2]=(a[6]+a[9])/d):(d=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/d,b[0]=(a[8]+a[2])/d,b[1]=(a[6]+a[9])/d,b[2]=.25*d);return b};d.fromRotationTranslationScale=function(b,a,c,d){var e=a[0],f=a[1],g=a[2],k=a[3],h=e+e,m=f+f,l=g+g;a=e*h;var n=e*m,e=e*l,r=f*m,f=f*l,g=g*l,h=k*h,m=k*m,k=k*l,l=d[0],v=d[1];d=d[2];b[0]=(1-(r+g))*l;b[1]=(n+k)*l;b[2]=(e-m)*l;b[3]=0;b[4]=(n-k)*v;b[5]=(1-(a+g))*v;b[6]=(f+h)*v;b[7]=0;b[8]=(e+m)*d;b[9]=(f-h)*d;b[10]=(1-(a+r))*d;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};d.fromRotationTranslationScaleOrigin=function(b,a,c,d,e){var f=a[0],g=a[1],k=a[2],h=a[3],m=f+f,l=g+g,q=k+k;a=f*m;var n=f*l,r=f*q,f=g*l,g=g*q,B=k*q,k=h*m,l=h*l,C=h*q,y=d[0],I=d[1],q=d[2];d=e[0];h=e[1];e=e[2];var m=(1-(f+B))*y,E=(n+C)*y,y=(r-l)*y,n=(n-C)*I,B=(1-(a+B))*I,I=(g+k)*I,r=(r+l)*q,g=(g-k)*q;a=(1-(a+f))*q;b[0]=m;b[1]=E;b[2]=y;b[3]=0;b[4]=n;b[5]=B;b[6]=I;b[7]=0;b[8]=r;b[9]=g;b[10]=a;b[11]=0;b[12]=c[0]+d-(m*d+n*h+r*e);b[13]=c[1]+h-(E*d+B*h+g*e);b[14]=c[2]+e-(y*d+I*h+a*e);b[15]=
1;return b};d.fromQuat=function(b,a){var c=a[0],d=a[1],e=a[2];a=a[3];var g=c+c,h=d+d,m=e+e,c=c*g,l=d*g,d=d*h,n=e*g,r=e*h,e=e*m,g=a*g,h=a*h;a*=m;b[0]=1-d-e;b[1]=l+a;b[2]=n-h;b[3]=0;b[4]=l-a;b[5]=1-c-e;b[6]=r+g;b[7]=0;b[8]=n+h;b[9]=r-g;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.frustum=function(b,a,c,d,e,g,h){var f=1/(c-a),k=1/(e-d),m=1/(g-h);b[0]=2*g*f;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*k;b[6]=0;b[7]=0;b[8]=(c+a)*f;b[9]=(e+d)*k;b[10]=(h+g)*m;b[11]=-1;b[12]=0;b[13]=0;b[14]=h*
g*2*m;b[15]=0;return b};d.perspective=function(b,a,c,d,e){a=1/Math.tan(a/2);var f=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&Infinity!==e?(f=1/(d-e),b[10]=(e+d)*f,b[14]=2*e*d*f):(b[10]=-1,b[14]=-2*d);return b};d.perspectiveFromFieldOfView=function(b,a,c,d){var e=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),g=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var k=2/(g+
a),h=2/(e+f);b[0]=k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=0;b[7]=0;b[8]=-((g-a)*k*.5);b[9]=(e-f)*h*.5;b[10]=d/(c-d);b[11]=-1;b[12]=0;b[13]=0;b[14]=d*c/(c-d);b[15]=0;return b};d.ortho=function(b,a,c,d,e,g,h){var f=1/(a-c),k=1/(d-e),m=1/(g-h);b[0]=-2*f;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*m;b[11]=0;b[12]=(a+c)*f;b[13]=(e+d)*k;b[14]=(h+g)*m;b[15]=1;return b};d.lookAt=function(b,a,c,d){var e=void 0,f=void 0,k=void 0,h=void 0,m=void 0,n=void 0,r=void 0,x=void 0,A=
void 0,v=void 0,B=a[0],C=a[1];a=a[2];k=d[0];h=d[1];d=d[2];r=c[0];x=c[1];c=c[2];if(Math.abs(B-r)<g.EPSILON&&Math.abs(C-x)<g.EPSILON&&Math.abs(a-c)<g.EPSILON)return l(b);r=B-r;x=C-x;A=a-c;v=1/Math.sqrt(r*r+x*x+A*A);r*=v;x*=v;A*=v;e=h*A-d*x;f=d*r-k*A;k=k*x-h*r;(v=Math.sqrt(e*e+f*f+k*k))?(v=1/v,e*=v,f*=v,k*=v):k=f=e=0;h=x*k-A*f;m=A*e-r*k;n=r*f-x*e;(v=Math.sqrt(h*h+m*m+n*n))?(v=1/v,h*=v,m*=v,n*=v):n=m=h=0;b[0]=e;b[1]=h;b[2]=r;b[3]=0;b[4]=f;b[5]=m;b[6]=x;b[7]=0;b[8]=k;b[9]=n;b[10]=A;b[11]=0;b[12]=-(e*B+
f*C+k*a);b[13]=-(h*B+m*C+n*a);b[14]=-(r*B+x*C+A*a);b[15]=1;return b};d.targetTo=function(b,a,c,d){var e=a[0],f=a[1];a=a[2];var g=d[0],k=d[1],h=d[2];d=e-c[0];var m=f-c[1];c=a-c[2];var l=d*d+m*m+c*c;0<l&&(l=1/Math.sqrt(l),d*=l,m*=l,c*=l);var n=k*c-h*m,h=h*d-g*c,g=g*m-k*d,l=n*n+h*h+g*g;0<l&&(l=1/Math.sqrt(l),n*=l,h*=l,g*=l);b[0]=n;b[1]=h;b[2]=g;b[3]=0;b[4]=m*g-c*h;b[5]=c*n-d*g;b[6]=d*h-m*n;b[7]=0;b[8]=d;b[9]=m;b[10]=c;b[11]=0;b[12]=e;b[13]=f;b[14]=a;b[15]=1;return b};d.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};d.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};d.subtract=h;d.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};d.multiplyScalarAndAdd=function(b,a,c,d){b[0]=a[0]+c[0]*d;b[1]=a[1]+c[1]*d;b[2]=a[2]+c[2]*d;b[3]=a[3]+c[3]*d;b[4]=a[4]+c[4]*d;b[5]=a[5]+c[5]*d;b[6]=a[6]+c[6]*d;b[7]=a[7]+c[7]*d;b[8]=a[8]+c[8]*d;b[9]=a[9]+c[9]*d;b[10]=a[10]+c[10]*d;b[11]=a[11]+c[11]*d;b[12]=a[12]+c[12]*d;b[13]=a[13]+c[13]*d;b[14]=a[14]+c[14]*d;b[15]=a[15]+c[15]*d;return b};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};d.equals=function(b,a){var c=b[0],d=b[1],e=b[2],h=b[3],m=b[4],l=b[5],n=b[6],r=b[7],D=b[8],x=b[9],A=b[10],v=b[11],B=b[12],C=b[13],y=b[14];b=b[15];var I=a[0],E=a[1],F=a[2],H=a[3],G=a[4],N=a[5],P=a[6],O=a[7],L=a[8],J=a[9],S=a[10],M=a[11],K=a[12],X=a[13],Q=a[14];a=a[15];return Math.abs(c-I)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(d-E)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&
Math.abs(e-F)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(F))&&Math.abs(h-H)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(m-G)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(l-N)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(n-P)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(r-O)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(D-L)<=g.EPSILON*Math.max(1,Math.abs(D),Math.abs(L))&&Math.abs(x-J)<=g.EPSILON*Math.max(1,Math.abs(x),Math.abs(J))&&Math.abs(A-
S)<=g.EPSILON*Math.max(1,Math.abs(A),Math.abs(S))&&Math.abs(v-M)<=g.EPSILON*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(B-K)<=g.EPSILON*Math.max(1,Math.abs(B),Math.abs(K))&&Math.abs(C-X)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(X))&&Math.abs(y-Q)<=g.EPSILON*Math.max(1,Math.abs(y),Math.abs(Q))&&Math.abs(b-a)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};d.mul=c;d.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(n,d,m){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4f32=m})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(n,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d};d.clone=function(d){var g=new Float32Array(16);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];g[6]=d[6];g[7]=d[7];g[8]=d[8];g[9]=d[9];g[10]=d[10];g[11]=d[11];g[12]=d[12];g[13]=d[13];g[14]=d[14];g[15]=d[15];return g};
d.fromValues=function(d,g,l,c,e,h,n,b,a,f,k,q,p,t,u,z){var m=new Float32Array(16);m[0]=d;m[1]=g;m[2]=l;m[3]=c;m[4]=e;m[5]=h;m[6]=n;m[7]=b;m[8]=a;m[9]=f;m[10]=k;m[11]=q;m[12]=p;m[13]=t;m[14]=u;m[15]=z;return m};d.createView=function(d,g){return new Float32Array(d,g,16)}})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=m})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(n,d){function m(){return new Float32Array(3)}function g(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function l(){return g(1,1,1)}function c(){return g(1,0,0)}function e(){return g(0,1,0)}function h(){return g(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=m;d.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};d.fromValues=g;d.createView=function(c,b){return new Float32Array(c,b,3)};d.zeros=function(){return m()};
d.ones=l;d.unitX=c;d.unitY=e;d.unitZ=h;d.ZEROS=m();d.ONES=l();d.UNIT_X=c();d.UNIT_Y=e();d.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(n,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=m})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(n,d){function m(){return new Float32Array(4)}function g(b,a,c,d){var e=new Float32Array(4);e[0]=b;e[1]=a;e[2]=c;e[3]=d;return e}
function l(){return g(1,1,1,1)}function c(){return g(1,0,0,0)}function e(){return g(0,1,0,0)}function h(){return g(0,0,1,0)}function r(){return g(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=m;d.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};d.fromValues=g;d.createView=function(b,a){return new Float32Array(b,a,4)};d.zeros=function(){return m()};d.ones=l;d.unitX=c;d.unitY=e;d.unitZ=h;d.unitW=r;d.ZEROS=m();d.ONES=l();d.UNIT_X=c();
d.UNIT_Y=e();d.UNIT_Z=h();d.UNIT_W=r()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(n,d,m,g,l,c,e,h){function r(a,b){return a?b?4:3:b?3:2}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function a(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function f(a,b){return b*a.scale[0]+a.translate[0]}
function k(a,b){return a.translate[1]-b*a.scale[1]}function q(a){a=a.coords;return{x:a[0],y:a[1]}}function p(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function t(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function u(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function z(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function w(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function D(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function x(a,b){a.coords[0]=b.x;
a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function A(a,b){return a&&b?x:a?u:b?w:p}function v(a,b,c){if(!a)return null;for(var d=r(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=b[f],h=0;h<c;h++)d[e++]=g[h];return a}
function C(a,b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],m=[],l=0;l<k;l++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);m.push(n)}f.push(m)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function y(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,m=h;k<m.length;k++)for(var l=m[k],n=0;n<c;n++)e[f++]=l[n];d.push(h.length)}return a}function I(a,
b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],m=[],l=0;l<k;l++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);m.push(n)}f.push(m)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function E(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);F(a,b.rings,c,d);return a}function F(a,b,c,d){c=r(c,d);d=a.lengths;for(var e=a.coords,f=0,g=d.length=e.length=0;g<b.length;g++){for(var h=b[g],k=0,m=h;k<m.length;k++)for(var l=
m[k],n=0;n<c;n++)e[f++]=l[n];d.push(h.length)}return a}function H(a,b,d,e,f,g){a.length=0;if(!d){for(e=0;e<b.length;e++)f=b[e],a.push(new c.default(null,f.attributes,null,f.attributes[g]));return a}switch(d){case "esriGeometryPoint":e=A(e,f);for(f=0;f<b.length;f++){var k=b[f];d=k.geometry;var k=k.attributes,l=void 0;d&&(l=e(new h.default,d));a.push(new c.default(l,k,null,k[g]))}break;case "esriGeometryMultipoint":e=r(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,k=k.attributes,l=void 0,d&&(l=B(new h.default,
d,e)),a.push(new c.default(l,k,null,k[g]));break;case "esriGeometryPolyline":e=r(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,k=k.attributes,l=void 0,d&&(l=y(new h.default,d,e)),a.push(new c.default(l,k,null,k[g]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var n=b[d],k=n.geometry,l=n.centroid,n=n.attributes,q=void 0;k&&(q=E(new h.default,k,e,f));l?a.push(new c.default(q,n,p(new h.default,l),n[g])):a.push(new c.default(q,n,null,n[g]))}break;default:L.error("convertToFeatureSet:unknown-geometry",
new m("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function G(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=q;d&&e?c=D:d?c=t:e&&(c=z);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=v(f,d,e));a.push({attributes:g,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],
f=g.geometry,g=g.attributes,h=void 0,f&&(h=C(f,d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=I(g,d,e));k?(g=q(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:L.error("convertToFeatureSet:unknown-geometry",new m("Unable to parse unknown geometry type '"+c+"'"))}return a}function N(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&
(c.coords.length=0);if(!d||!d.coords.length)return null;g=J[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?K:M:f?M:S;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=l,c;for(var m,n,p,q=0,t,u=0,T=0;T<d.length;T++){var v=d[T];if(!(v<g)){var V=0;t=u;n=f=b(h,k[q]);p=m=a(h,k[q+1]);e(c.coords,k,t,q,n,p);V++;q+=l;t+=l;for(var W=1;W<v;W++,q+=l)if(n=b(h,k[q]),p=a(h,k[q+1]),n!==f||p!==m)e(c.coords,k,t,q,n-f,p-m),t+=l,V++,f=n,m=p;V>=g&&(c.lengths.push(V),
u=t)}}c.coords.length=u;return c.coords.length?c:null}function P(a,b,c,d,e,f,g){for(var h=g-c,k=0,l=0,m,n=f+c;n<g-c;n+=c){m=b[n];var p=b[n+1],q=b[f],r=b[f+1],t=b[h],u=b[h+1];q===t?m=Math.abs(m-q):(t=(u-r)/(t-q),m=Math.abs(t*m-p+(r-t*q))/Math.sqrt(t*t+1));m>k&&(l=n,k=m)}k>d?(P(a,b,c,d,e,f,l+c),P(a,b,c,d,e,l,g)):(e(a,b,a.length,f,b[f],b[f+1]),e(a,b,a.length,h,b[h],b[h+1]))}function O(a,b,c,d,e){var g=b.coords,h=b.lengths,l=c?d?K:M:d?M:S;c=r(c,d);if(!g.length)return a!==b&&(a.lengths.length=0,a.coords.length=
0),a;if(!h.length)return l(a.coords,g,0,0,f(e,g[0]),k(e,g[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var m=e.scale;d=m[0];for(var m=m[1],n=0,p=0;p<h.length;p++){var q=h[p];a.lengths[p]=q;var t=f(e,g[n]),u=k(e,g[n+1]);l(a.coords,g,n,n,t,u);for(var n=n+c,T=1;T<q;T++,n+=c)t+=g[n]*d,u-=g[n+1]*m,l(a.coords,g,n,n,t,u)}a!==b&&(a.lengths.length=h.length,a.coords.length=g.length);return a}Object.defineProperty(d,"__esModule",{value:!0});var L=g.getLogger("esri.tasks.support.optimizedFeatureSet"),
J={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},S=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},M=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},K=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};d.quantizeX=b;d.quantizeY=a;d.hydrateX=f;d.hydrateY=k;d.convertToPoint=function(a,b,c){return a?b?c?D(a):t(a):c?z(a):q(a):null};d.convertFromPoint=function(a,b,c){void 0===c&&(c=A(null!=b.z,null!=b.m));return c(a,b)};d.convertToMultipoint=v;d.convertFromMultipoint=
B;d.convertToPolyline=C;d.convertFromPolyline=y;d.convertToPolygon=I;d.convertFromPolygon=E;d.convertFromNestedArray=F;var X=[],Q=[];d.convertFromFeature=function(a,b,c,d,e){X[0]=a;a=H(Q,X,b,c,d,e)[0];X.length=Q.length=0;return a};d.convertFromFeatures=H;d.convertToFeature=function(a,b,c,d){Q[0]=a;G(X,Q,b,c,d);a=X[0];X.length=Q.length=0;return a};d.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new h.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(l.isPoint(a))return A(null!=
b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(l.isPolygon(a))return E(d,a,b,c);if(l.isPolyline(a))return y(d,a,r(b,c));if(l.isMultipoint(a))return B(d,a,r(b,c));L.error("convertFromGeometry:unknown-geometry",new m("Unable to parse unknown geometry type '"+a+"'"))};d.convertToGeometry=function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=q,c&&d?b=D:c?b=t:d&&(b=z),b(a);case "esriGeometryMultipoint":return v(a,c,d);case "esriGeometryPolyline":return C(a,
c,d);case "esriGeometryPolygon":return I(a,c,d);default:L.error("convertToGeometry:unknown-geometry",new m("Unable to parse unknown geometry type '"+b+"'"))}};d.convertToFeatures=G;d.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:G([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=
f);g&&(a.hasZ=g);return a};d.convertFromFeatureSet=function(a,b){var c=new e.default,d=a.hasM,f=a.hasZ,g=a.features,h=a.objectIdFieldName,k=a.spatialReference,l=a.geometryType,n=a.exceededTransferLimit,p=a.transform;c.fields=a.fields;c.geometryType=l;c.objectIdFieldName=h||b;c.spatialReference=k;if(!c.objectIdFieldName)return L.error(new m("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&H(c.features,g,l,f,d,c.objectIdFieldName);n&&(c.exceededTransferLimit=n);d&&
(c.hasM=d);f&&(c.hasZ=f);p&&(c.transform=p);return c};d.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&O(g.geometry,g.geometry,c,d,b);g.centroid&&O(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};d.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,f=b.hasM,g=b.hasZ;if(!a)return b;for(var k=0;k<e.length;k++){var l=e[k],m=new c.default(new h.default,l.attributes);
N(m.geometry,l.geometry,f,g,d,a);l.centroid&&(m.centroid=new h.default,N(m.centroid,l.centroid,f,g,"esriGeometryPoint",a));e[k]=m}b.transform=a;return b};d.quantizeOptimizedGeometry=N;d.quantizeOptimizedGeometryRemoveCollinear=function(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;g=J[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?K:M:f?M:S;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=
0),c.coords.length=l,c;for(var m,n,p,q=0,t,u=0,v=0;v<d.length;v++){var z=d[v];if(!(z<g)){var w=0;t=u;f=m=b(h,k[q]);p=n=a(h,k[q+1]);e(c.coords,k,t,q,f,p);w++;for(var q=q+l,x=!1,y=0,A=0,B=1;B<z;B++,q+=l)if(f=b(h,k[q]),p=a(h,k[q+1]),f!==m||p!==n)m=f-m,n=p-n,x&&(0===y&&0===m||0===A&&0===n)?(y+=m,A+=n):(x=!0,y=m,A=n,t+=l,w++),e(c.coords,k,t,q,y,A),m=f,n=p;x&&(t+=l,e(c.coords,k,t,q,y,A));w>=g&&(c.lengths.push(w),u=t)}}c.coords.length!==u&&(c.coords.length=u);return c.coords.length?c:null};d.generalizeOptimizedGeometry=
function(a,b,c,d,e,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=J[e];var g=b.coords;b=b.lengths;var h=r(c,d);c=c?d?K:M:d?M:S;if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=d=0;k<b.length;k++){var l=b[k];if(!(l<e)){var m=a.coords.length/h;P(a.coords,g,h,f,c,d,d+l*h);var n=a.coords.length/h-m;n>=e?a.lengths.push(n):a.coords.length=m*h}d+=l*h}return a.coords.length?
a:null};d.getBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};d.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,
k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],n=d[k],p=d[k+1],e=Math.min(n,e),f=Math.min(p,f),g=Math.max(n,g),h=Math.max(p,h),k=k+c,q=1;q<m;q++,k+=c){var t=d[k],u=d[k+1],n=n+t,p=p+u;0>t&&(e=Math.min(e,n));0<t&&(g=Math.max(g,n));0>u?f=Math.min(f,p):0<u&&(h=Math.max(h,p))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};d.hydrateOptimizedGeometry=O})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(n,d,m,g,l,c,e,h){function r(a,c,d,e){var g=e.transform,h=e.hasZ;e=e.hasM;f.has(a)||f.set(a,b(d));a=f.get(a)(c.geometry,g,h,e);return m({},c,{geometry:a})}function b(b){var c={};switch(b){case "esriGeometryPoint":return function(a,b,d,f){return e.hydratePoint(b,c,a,d,f)};case "esriGeometryPolygon":return function(a,b,d,f){return e.hydratePolygon(b,c,a,d,f)};case "esriGeometryPolyline":return function(a,b,d,f){return e.hydratePolyline(b,c,a,d,f)};case "esriGeometryMultipoint":return function(a,
b,d,f){return e.hydrateMultipoint(b,c,a,d,f)};default:return a.error(new l("mapview-arcade","Unable to handle geometryType: "+b)),function(a,b,c,d){return a}}}Object.defineProperty(d,"__esModule",{value:!0});var a=c.getLogger("esri.views.2d.support.arcadeOnDemand");d.callWithOptimizedFeature=function(b,c,d,e,f){var g=e.geometryType,k=e.hasZ;e=e.hasM;c=b.referencesGeometry()?f?r(b,h.convertToFeature(c,g,k,e),g,f):h.convertToFeature(c,g,k,e):c;c=b.repurposeFeature(c);try{return b.evaluate(m({},d,{$feature:c}))}catch(D){return a.warn("Feature arcade evaluation failed:",
D),null}};d.callWithFeature=function(b,c,d,e,f){c=b.referencesGeometry()&&f?r(b,c,e,f):c;c=b.repurposeFeature(c);try{return b.evaluate(m({},d,{$feature:c}))}catch(z){return a.warn("Feature arcade evaluation failed:",z),null}};var f=new g.default;d.createHydrateFactory=b})},"*now":function(n){n(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),function(n,
d,m,g,l,c,e,h,r,b,a,f,k,q,p,t,u,z,w,D,x,A,v,B){function C(){return c(this,void 0,void 0,function(){var a,b,c,d,e,f,g;return l(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){n(["./webgl"],a,b)}),new Promise(function(a,b){n(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){n(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,e=b.MapViewNavigation,f=b.MagnifierView2D,g=a[2].Stage,E=c,F=d,H=e,G=f,I=g,[2]}})})}var y=
b.getLogger("esri.views.MapView"),I,E,F,H,G;return function(b){function c(a){a=b.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new x;a.magnifier=new z;a.inputManager=new D({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new B;a.rendering=!1;q.initialize();return a}m(c,b);Object.defineProperty(c.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});c.prototype.toMap=function(a){if(f.isSupportedScreenPointEvent(a)){var b=f.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[b])}return this.inherited(arguments)};c.prototype.hitTest=function(b){var c=f.isSupportedScreenPointEvent(b)?f.createScreenPointFromSupportedEvent(this,b):b;if(!this.internallyReady||
isNaN(c.x)||isNaN(c.y))return a.resolve({screenPoint:c,results:[]});var d=this.toMap(c);b=[this.graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());return a.all(b.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:d,graphic:a}})}})};c.prototype.takeScreenshot=function(b){return this.internallyReady?this._stage.takeScreenshot(A.toRenderSettings(b,this),this.allLayerViews):
a.reject("Map view cannot be used before it is ready")};c.prototype.on=function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};c.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};c.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};c.prototype.whenReady=function(){var b=this;return a.create(function(a){b.internallyReady?
a(b):b._resolveWhenReady.push(a)})};c.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};c.prototype.validate=function(){var b=v.check({supportsMajorWebPerformanceCaveat:!0});r("safari")&&9>r("safari")&&(b=new h("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:r("safari")}));return b?(y.warn("#validate()",b.message),a.reject(b)):e.safeCast(C())};c.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");
if(!this.internallyReady){this.inherited(arguments);this.graphics.owner=this;var b=new I(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),c=new E({view:this,graphics:this.graphics}),d=new H({view:this,animationManager:this.animationManager}),e=new F({view:this});this._magnifierView=
new G;this._magnifierView.magnifier=this.magnifier;this._stage=b;this._frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",d);this._set("labelManager",e);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),k.init(this,"stationary",function(a){return b.stationary=
a},!0),k.init(this,"state.viewpoint",function(c){return b.state=a.state},!0),k.init(this,"background",function(a){return b.background=a},!0),k.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),k.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),k.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=
[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")}};c.prototype._tearDown=function(){this.internallyReady&&(this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,
this.inherited(arguments))};c.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};g([p.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],c.prototype,"background",null);g([p.property()],c.prototype,"graphicsView",void 0);g([p.property({type:x})],
c.prototype,"highlightOptions",void 0);g([p.property({type:z})],c.prototype,"magnifier",void 0);g([p.property({readOnly:!0})],c.prototype,"inputManager",void 0);g([p.property({readOnly:!0})],c.prototype,"mapViewNavigation",void 0);g([p.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],c.prototype,"interacting",null);g([p.property({type:Boolean,constructOnly:!0})],c.prototype,"supersampleScreenhotsEnabled",void 0);g([p.property({type:B})],c.prototype,"ui",void 0);g([p.property({readOnly:!0})],
c.prototype,"rendering",void 0);g([p.property({constructOnly:!0})],c.prototype,"renderCanvas",void 0);g([p.property({constructOnly:!0})],c.prototype,"deactivatedWebGLExtensions",void 0);g([p.property({constructOnly:!0})],c.prototype,"debugWebGLExtensions",void 0);return c=g([p.subclass("esri.views.MapView")],c)}(p.declared(t.BreakpointsOwner(u.DOMContainer(w))))});