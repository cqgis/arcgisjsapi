// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(v,m,t,u,r){function p(a,e,k){if("point"===a.type)return a.x+=e,a.y+=k,a;if("multipoint"===a.type){for(var c=a.points,b=0;b<c.length;b++){var d=c[b],f=d[0],d=d[1];c[b]=[f+e,d+k]}return a}if("extent"===a.type)return a.xmin+=e,a.xmax+=e,a.ymin+=k,a.ymax+=k,a;for(var c=r.geometryToCoordinates(a),h="polyline"===a.type?a.paths:a.rings,g=0;g<c.length;g++)for(var l=
c[g],b=0;b<l.length;b++)d=l[b],f=d[0],d=d[1],h[g][b]=[f+e,d+k];"paths"in a?a.paths=h:a.rings=h;return a}Object.defineProperty(m,"__esModule",{value:!0});m.move=p;m.cloneMove=function(a,e,k,c,b){a=a.clone();var d=c.resolution;if("point"===a.type){if(b)p(a,e*d,-k*d);else{b=c.state.transform;c=c.state.inverseTransform;var f=b[0]*a.x+b[2]*a.y+b[4],h=b[1]*a.x+b[3]*a.y+b[5];a.x=c[0]*(f+e)+c[2]*(h+k)+c[4];a.y=c[1]*(f+e)+c[3]*(h+k)+c[5]}return a}if("multipoint"===a.type){if(b)p(a,e*d,-k*d);else{d=a.points;
b=c.state.transform;c=c.state.inverseTransform;for(var g=0;g<d.length;g++){var f=d[g],h=b[0]*f[0]+b[2]*f[1]+b[4],l=b[1]*f[0]+b[3]*f[1]+b[5],f=c[0]*(h+e)+c[2]*(l+k)+c[4],h=c[1]*(h+e)+c[3]*(l+k)+c[5];d[g]=[f,h]}}return a}if("extent"===a.type){if(b)p(a,e*d,-k*d);else{b=c.state.transform;c=c.state.inverseTransform;var d=b[0]*a.xmin+b[2]*a.ymin+b[4],q=b[1]*a.xmin+b[3]*a.ymin+b[5],g=b[0]*a.xmax+b[2]*a.ymax+b[4];b=b[1]*a.xmax+b[3]*a.ymax+b[5];a.xmin=c[0]*(d+e)+c[2]*(q+k)+c[4];a.ymin=c[1]*(d+e)+c[3]*(q+k)+
c[5];a.xmax=c[0]*(g+e)+c[2]*(b+k)+c[4];a.ymax=c[1]*(g+e)+c[3]*(b+k)+c[5]}return a}if(b)p(a,e*d,-k*d);else{q=r.geometryToCoordinates(a);d="polyline"===a.type?a.paths:a.rings;b=c.state.transform;c=c.state.inverseTransform;for(var n=0;n<q.length;n++)for(var m=q[n],g=0;g<m.length;g++)f=m[g],h=b[0]*f[0]+b[2]*f[1]+b[4],l=b[1]*f[0]+b[3]*f[1]+b[5],f=c[0]*(h+e)+c[2]*(l+k)+c[4],h=c[1]*(h+e)+c[3]*(l+k)+c[5],d[n][g]=[f,h];"paths"in a?a.paths=d:a.rings=d}return a};m.scale=function(a,e,k,c,b){if("point"===a.type){c=
a.x;var d=a.y,f=b?b[0]:c;b=b?b[1]:d;a=a.clone();a.x=(c-f)*e+f;a.y=(d-b)*k+b;return a}if("multipoint"===a.type){c=r.geometryToCoordinates(a);var f=t.create(),h=u.getRingsOrPathsBounds(f,[c]),f=h[0];c=h[1];var d=h[2],h=h[3],f=b?b[0]:(f+d)/2,h=b?b[1]:(h+c)/2,g=a.clone(),l=g.points;for(a=0;a<l.length;a++)b=l[a],c=b[0],d=b[1],b=(c-f)*e+f,c=(d-h)*k+h,l[a]=[b,c];return g}if("extent"===a.type)return c=a.xmin,f=a.xmax,d=a.ymin,h=a.ymax,g=b?b[0]:(c+f)/2,b=b?b[1]:(h+d)/2,a=a.clone(),a.xmin=(c-g)*e+g,a.ymax=
(h-b)*k+b,a.xmax=(f-g)*e+g,a.ymin=(d-b)*k+b,a.xmin>a.xmax&&(e=a.xmin,a.xmin=a.xmax,a.xmax=e),a.ymin>a.ymax&&(e=a.ymin,a.ymin=a.ymax,a.ymax=e),a;f=r.geometryToCoordinates(a);c=t.create();g=u.getRingsOrPathsBounds(c,f);d=g[0];c=g[1];for(var h=g[2],g=g[3],h=b?b[0]:(d+h)/2,g=b?b[1]:(g+c)/2,l=a.clone(),m="polyline"===l.type?l.paths:l.rings,n=0;n<f.length;n++){var p=f[n];for(a=0;a<p.length;a++)b=p[a],c=b[0],d=b[1],b=(c-h)*e+h,c=(d-g)*k+g,m[n][a]=[b,c]}"paths"in l?l.paths=m:l.rings=m;return l};m.getScaleRatio=
function(a,e,k,c,b,d){return Math.sqrt((b-a)*(b-a)+(d-e)*(d-e))/Math.sqrt((k-a)*(k-a)+(c-e)*(c-e))};m.getRotationAngle=function(a,e,k,c,b,d){return 180*Math.atan2(e-d,a-b)/Math.PI-180*Math.atan2(e-c,a-k)/Math.PI}});