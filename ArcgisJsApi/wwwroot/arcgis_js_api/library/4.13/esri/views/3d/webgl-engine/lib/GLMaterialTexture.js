// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ./DefaultTextureUnits ./GLMaterial ../materials/internal/MaterialUtil".split(" "),function(f,l,g,h,b,k,e){f=function(f){function d(a){var c=f.call(this,a)||this,b=a.textureRep;c.textureRep=b;c.textureId=a.textureId;var d=!!a.initTransparent;c.initTransparent=d;c.glTextureRef=e.acquireIfNotUndefined(c.textureId,b,c.initTransparent);a.normalTextureId&&(c.glTextureRefNormal=e.acquireIfNotUndefined(a.normalTextureId,
b,d));a.emissiveTextureId&&(c.glTextureRefEmission=e.acquireIfNotUndefined(a.emissiveTextureId,b,d));a.occlusionTextureId&&(c.glTextureRefOcclusion=e.acquireIfNotUndefined(a.occlusionTextureId,b,d));a.metallicRoughnessTextureId&&(c.glTextureRefRoughnessMetallness=e.acquireIfNotUndefined(a.metallicRoughnessTextureId,b,d));return c}h(d,f);d.prototype.dispose=function(){e.releaseIfNotUndefined(this.textureId,this.textureRep)};d.prototype.updateTexture=function(a){a!==this.textureId&&(e.releaseIfNotUndefined(this.textureId,
this.textureRep),this.textureId=a,this.glTextureRef=e.acquireIfNotUndefined(this.textureId,this.textureRep,this.initTransparent))};d.prototype.bindTexture=function(a,c){null!=this.glTextureRef&&(c.setUniform1i("tex",b.DefaultTextureUnits.DIFFUSE),a.bindTexture(this.glTextureRef.getGLTexture(),b.DefaultTextureUnits.DIFFUSE));this.glTextureRefNormal&&(c.setUniform1i("texNormal",b.DefaultTextureUnits.NORMAL),a.bindTexture(this.glTextureRefNormal.getGLTexture(),b.DefaultTextureUnits.NORMAL));this.glTextureRefEmission&&
(c.setUniform1i("texEmission",b.DefaultTextureUnits.EMISSION),a.bindTexture(this.glTextureRefEmission.getGLTexture(),b.DefaultTextureUnits.EMISSION));this.glTextureRefOcclusion&&(c.setUniform1i("texOcclusion",b.DefaultTextureUnits.OCCLUSION),a.bindTexture(this.glTextureRefOcclusion.getGLTexture(),b.DefaultTextureUnits.OCCLUSION));this.glTextureRefRoughnessMetallness&&(c.setUniform1i("texMetallicRoughness",b.DefaultTextureUnits.METALLIC_ROUGHNESS),a.bindTexture(this.glTextureRefRoughnessMetallness.getGLTexture(),
b.DefaultTextureUnits.METALLIC_ROUGHNESS))};d.prototype.bindTextureScale=function(a,c){(a=this.glTextureRef&&this.glTextureRef.getGLTexture())&&a.descriptor.textureCoordinateScaleFactor?c.setUniform2fv("textureCoordinateScaleFactor",a.descriptor.textureCoordinateScaleFactor):c.setUniform2f("textureCoordinateScaleFactor",1,1)};return d}(k);(function(b){b.makeCtorParameters=function(b,a){return g({},b,a)}})(f||(f={}));return f});