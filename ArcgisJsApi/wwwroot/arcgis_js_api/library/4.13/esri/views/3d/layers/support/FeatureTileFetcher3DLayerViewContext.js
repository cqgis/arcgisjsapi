// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/maybe ../graphics/Graphics3DVerticalScale ./FeatureTileFetcher3D ./featureTileQuery3D".split(" "),function(c,d,e,f,g,h){Object.defineProperty(d,"__esModule",{value:!0});c=function(){function b(a){this._capabilities=this.memoryCache=null;var b=a.layerView.layer;this.layerView=a.layerView;this.objectIdField=b.objectIdField;this.returnZ=a.returnZ;this.returnM=a.returnM;this.verticalScale=new f({sourceSpatialReference:b.spatialReference,destSpatialReference:this.layerView.view.spatialReference});
this.query=h.createFeatureTileQuery3D(b);a=this.layerView.view.resourceController;"hasService"in b&&b.hasService&&a&&(this.memoryCache=a.memoryController.getMemCache(b.uid))}b.prototype.destroy=function(){e.isSome(this.memoryCache)&&this.memoryCache.destroy()};b.prototype.createQuery=function(){var a=this.layerView.layer.createQuery();a.outFields=this.layerView.availableFields;a.returnZ=this.returnZ;a.returnM=this.returnM;a.outSpatialReference=this.tilingScheme.spatialReference;return a};Object.defineProperty(b.prototype,
"viewingMode",{get:function(){return this.layerView.view.viewingMode},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tilingScheme",{get:function(){return this.layerView.view.featureTiles.tilingScheme},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scheduler",{get:function(){var a=this.layerView.view.resourceController;return a?a.scheduler:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometryType",{get:function(){return this.layerView.layer.geometryType},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fullExtent",{get:function(){return this.layerView.layer.fullExtent},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"tileMaxRecordCount",{get:function(){var a=this.layerView.layer;return"tileMaxRecordCount"in a?a.tileMaxRecordCount:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"maxRecordCount",{get:function(){var a=this.layerView.layer;return"maxRecordCount"in a?a.maxRecordCount:null},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"capabilities",{get:function(){return e.isSome(this._capabilities)?this._capabilities:this._capabilities=g.contextCapabilitiesFromLayer(this.layerView.layer)},enumerable:!0,configurable:!0});b.prototype.logFetchError=function(a,b){a.error("#fetchTile()",this.layerView.layer,b&&b.message?b.message:b)};b.prototype.adjustVerticalScale=function(a){return this.verticalScale.adjust(a)};return b}();d.FeatureTileFetcher3DLayerViewContext=c});