// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../lib/GLMaterial ../lib/Material ./internal/DefaultBufferWriter ./internal/MaterialUtil ./renderers/MergedRenderer ../shaders/ColorPrograms ../../../webgl/renderState".split(" "),function(h,w,g,k,q,l,e,r,m,f){h=function(d){function a(b,c){c=d.call(this,c)||this;c.supportsEdges=!0;c.params=e.copyParameters(b,t);return c}g(a,d);a.prototype.setParameterValues=function(b){var c=this.params,a;for(a in b)c[a]=b[a];this.notifyDirty("matChanged")};
a.prototype.getParameters=function(){return this.params};a.prototype.intersect=function(b,a,d,f,g,h,k,l,m){e.intersectTriangleGeometry(b,a,f,g,h,k)};a.prototype.getGLMaterials=function(){return{color:u,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:v}};a.prototype.createBufferWriter=function(){return new l.DefaultBufferWriter(l.PositionColorLayout)};a.prototype.createRenderer=function(b,a){return new r(b,a,this)};return a}(q.Material);var u=function(d){function a(b){b=d.call(this,b)||
this;b.updateParameters();return b}g(a,d);a.prototype.updateParameters=function(){this.params=e.copyParameters(this.material.getParameters());this.selectProgram()};a.prototype.selectProgram=function(){var b=this.params;this.program=this.programRep.getProgram(m.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});this.pipelineState=f.makePipelineState({blending:b.transparent&&f.separateBlendingParams(770,1,771,771),polygonOffset:b.polygonOffset&&n,culling:p(b.cullFace),depthTest:b.testDepth&&
{func:513},depthWrite:b.writeDepth&&f.defaultDepthWriteParams,colorWrite:f.defaultColorWriteParams})};a.prototype.beginSlot=function(b){var a=5;this.params.transparent&&(a=this.params.writeDepth?7:10);return b===a};a.prototype.getProgram=function(){return this.program};a.prototype.bind=function(b,a){a=this.program;var c=this.params;b.bindProgram(a);b.setPipelineState(this.pipelineState);a.setUniform4fv("eColor",c.color)};a.prototype.release=function(b){};a.prototype.bindView=function(b,a){b=this.program;
var c=this.params;e.bindView(a.origin,a.view,b);c.slicePlaneEnabled&&e.bindSlicePlane(a.origin,a.slicePlane,b)};a.prototype.bindInstance=function(b,a){this.program.setUniformMatrix4fv("model",a.transformation)};a.prototype.getDrawMode=function(){return 4};return a}(k),v=function(d){function a(b){b=d.call(this,b)||this;b.updateParameters();return b}g(a,d);a.prototype.updateParameters=function(){this.params=e.copyParameters(this.material.getParameters());this.selectProgram()};a.prototype.selectProgram=
function(){var b=this.params;this.program=this.programRep.getProgram(m.colorPass,{vertexColors:b.vertexColors,slice:b.slicePlaneEnabled});this.pipelineState=f.makePipelineState({polygonOffset:b.polygonOffset&&n,culling:p(b.cullFace),depthTest:b.testDepth&&{func:513},depthWrite:b.writeDepth&&f.defaultDepthWriteParams,colorWrite:f.defaultColorWriteParams})};a.prototype.beginSlot=function(b){return 5===b};a.prototype.getProgram=function(){return this.program};a.prototype.bind=function(b,a){var c=this.program,
d=this.params;b.bindProgram(c);b.setPipelineState(this.pipelineState);e.bindHighlightRendering(b,a,c);c.setUniform4fv("eColor",d.color)};a.prototype.release=function(a){};a.prototype.bindView=function(a,c){a=this.program;var b=this.params;e.bindView(c.origin,c.view,a);b.slicePlaneEnabled&&e.bindSlicePlane(c.origin,c.slicePlane,a)};a.prototype.bindInstance=function(a,c){this.program.setUniformMatrix4fv("model",c.transformation)};a.prototype.getDrawMode=function(){return 4};return a}(k),t={color:[1,
1,1,1],transparent:!1,writeDepth:!0,testDepth:!0,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:"none"},n={factor:1,units:1},p=function(d){return"none"!==d&&{face:"front"===d?1028:1029,mode:2305}};return h});