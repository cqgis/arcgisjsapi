// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../geometry ../../../../Viewpoint ../../../../core/has ../../../../core/libs/gl-matrix-2/mat4 ../../ViewState ../../../webgl/renderState".split(" "),function(A,k,m,r,t,u,v,a){Object.defineProperty(k,"__esModule",{value:!0});k.renderVectorTile=function(a,e,c,l,k,g,d,h,f,b,p){var n=g.adjustLevel(e[0]);b={context:a,drawPhase:0,state:w,stationary:!0,pixelRatio:b,displayLevel:n,requiredLevel:n,drawphase:1,renderer:l,layerOpacity:p,globalOpacity:1};l.initializeProgramCache(a);
var q=g.getScale(e[0]);g=g.getShift(e,d*q);var m=g[1];c.tileTransform.displayCoord[0]=-1-g[0]-h[0]*d*2;c.tileTransform.displayCoord[1]=1+m+(1-h[1])*d*2-2;h=c.tileTransform.transform;u.mat4.identity(h);d=.125*d*q/f;h[0]=d;h[5]=-d;b.state.size[0]=f;b.state.size[1]=f;l.setStateParams(b.state,b.pixelRatio,e[0]);c.attached||c.attachWithContext(a);c.triangleCount=0;if((e=k.backgroundBucketIds)&&0<e.length)for(a.setPipelineState(x),f=0;f<e.length;f++)d=e[f],l.renderBackGroundLayer(a,k.layers[d],d,c,n,0,
p);a.setPipelineState(y);b.drawphase=1;c.processRender(b);a.setPipelineState(z);b.drawphase=2;c.processRender(b);b.drawphase=3;c.processRender(b);t("esri-vector-tiles-debug")&&l.renderTileInfo(a,c)};var w=new v({viewpoint:new r({targetGeometry:new m.Point(0,0),scale:1,rotation:0}),size:[256,256]}),x=a.makePipelineState({blending:a.simpleBlendingParams(1,771),depthTest:{func:515},colorWrite:a.defaultColorWriteParams}),y=a.makePipelineState({depthTest:{func:515},depthWrite:a.defaultDepthWriteParams,
colorWrite:a.defaultColorWriteParams}),z=a.makePipelineState({blending:a.simpleBlendingParams(1,771),depthTest:{func:515},colorWrite:a.defaultColorWriteParams})});