// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(e,f,g,h,k,l,m){Object.defineProperty(f,"__esModule",{value:!0});var n=function(c,a){return 0!==c.key.level-a.key.level?c.key.level-a.key.level:0!==c.key.row-a.key.row?c.key.row-a.key.row:c.key.col-a.key.col};e=function(c){function a(d,b){b=c.call(this,b)||this;b._tileInfoView=d;return b}g(a,c);a.prototype.renderChildren=
function(d){this.sortChildren(n);this._setStencilReference(this.children);c.prototype.renderChildren.call(this,d)};a.prototype.createRenderParams=function(d){var b=d.state;return h({},c.prototype.createRenderParams.call(this,d),{requiredLevel:this._tileInfoView.getClosestInfoForScale(b.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(b.scale)})};a.prototype.prepareRenderPasses=function(d){var b=this,a=d.registerRenderPass({name:"stencil",brushes:[m.default],target:function(){return b.children}}),
p=d.registerRenderPass({name:"tileInfo",brushes:[l.default],target:function(){return b.children},has:"esri-feature-tiles-debug"});return c.prototype.prepareRenderPasses.call(this,d).concat([a,p])};a.prototype.updateTransforms=function(a){for(var b=0,d=this.children;b<d.length;b++){var c=d[b],e=this._tileInfoView.getTileResolution(c.key);c.setTransform(a,e)}};a.prototype._setStencilReference=function(a){a=1;for(var b=0,c=this.children;b<c.length;b++)c[b].stencilRef=a++};return a}(k.default);f.default=
e});