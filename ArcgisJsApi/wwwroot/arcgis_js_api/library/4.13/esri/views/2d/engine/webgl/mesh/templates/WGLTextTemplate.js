// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../fontUtils ../../materialKey/MaterialKey ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(g,k,l,d,m,f,t,q,n,p,h){Object.defineProperty(k,"__esModule",{value:!0});g=function(g){function e(c,a,e,b,f,k,h,r,l,n,p,u,v,w){b=g.call(this)||this;b._xOffset=d.pt2px(u);b._yOffset=d.pt2px(v);b._decorationTop=t.getFontDecorationTop(l);b._color=
f;b._haloColor=k;b._haloSize=Math.min(Math.floor(5*d.pt2px(d.toPt(e))),127);b._size=Math.min(Math.round(d.pt2px(a)),127);a=Math.min(Math.round(d.pt2px(a)),127);b._referenceSize=Math.round(Math.sqrt(256*a));b._scale=b._size/24;b._angle=p;b._justify=m.getJustification(h||"center");b._xAlignD=m.getXAnchorDirection(h||"center");b._yAlignD=-m.getYAnchorDirection(r||"baseline");b._baseline="baseline"===(r||"baseline");b._bitset=n?1:0;c=q.MaterialKeyBase.load(q.createMaterialKey(b.geometryType,c,!1));c.sdf=
!0;b._materialKey=c.data;b.symbolId=w;return b}l(e,g);e.fromText=function(c,a,d){c=new e(c,a.font.size,a.haloSize||0,a.font.size,a.color&&f.premultiplyAlphaRGBA(a.color)||0,a.haloColor&&f.premultiplyAlphaRGBA(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,a.font.decoration,!1,a.angle||0,a.xoffset,a.yoffset,a.id);a=h.bidiText(a.text);c.bindTextInfo(d,a[0],a[1]);c._computeGlyphs(c._shapedGlyphs,c._shapedBox);return c};e.fromCIMText=function(c,a,d){c=new e(c,a.size*a.sizeRatio,a.outlineSize*
a.sizeRatio,a.referenceSize*a.sizeRatio,f.premultiplyAlphaRGBA(a.color),f.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,a.decoration,a.colorLocked,a.angle,a.offsetX*a.sizeRatio,a.offsetY*a.sizeRatio,a.materialHash);a=h.bidiText(a.text);c.bindTextInfo(d,a[0],a[1]);c._computeGlyphs(c._shapedGlyphs,c._shapedBox);return c};return e}(n.default(p.default));k.default=g});