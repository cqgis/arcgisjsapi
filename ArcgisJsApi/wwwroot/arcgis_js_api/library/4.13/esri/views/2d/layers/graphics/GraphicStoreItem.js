// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./graphicsUtils".split(" "),function(p,q,t,u,v,k,l,d,r,m){Object.defineProperty(q,"__esModule",{value:!0});var c=new r.default,h=new r.default;p=function(){function a(){this.bounds=u.create();
this.graphic=null;this.size=[0,0,0,0]}a.acquire=function(b,n,w,e,c,f){void 0===b&&(b=null);var g;0===a._pool.length?g=new a:(g=a._pool.pop(),this._set.delete(g));g.acquire(b,n,w,e,c,f);return g};a.release=function(b){b&&!this._set.has(b)&&(b.release(),this._pool.push(b),this._set.add(b))};a.getCentroidQuantized=function(b,n,a){if(k.isPolygon(b.geometry)){a=b.symbol;if(t.isNone(a))return null;if(m.isMarkerSymbol(a.type))return b=v.polygonCentroid(b.geometry),l.quantizePoint(n,{},{x:b[0],y:b[1]},!1,
!1)}return null};a.prototype.acquire=function(b,a,c,e,d,f){void 0===b&&(b=null);b&&this.set(b,a,c,e,d,f)};a.prototype.release=function(){this.geometry=this.symbol=this.graphic=null};a.prototype.set=function(b,a,c,e,d,f){this.graphic=b;this.geometry=c;this.symbol=a.symbol;m.getBounds(this.bounds,this.size,a.symbol,c,a.mosaicItem,e,d,f)};a.prototype.updateBounds=function(b,a,c,d){m.getBounds(this.bounds,this.size,b,this.geometry,null,a,c,d)};a.prototype.getGeometryQuantized=function(b){if(k.isPolygon(this.geometry)){var a=
this.geometry.rings;if(1===a.length&&2===a[0].length)return l.quantizeGeometry(b,{paths:[[a[0][0],a[0][1]]]})}else if(k.isPolyline(this.geometry))return c.coords.length=0,c.lengths.length=0,h.coords.length=0,h.lengths.length=0,d.convertFromPolyline(c,this.geometry),d.generalizeOptimizedGeometry(h,c,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",b.scale[0]),d.quantizeOptimizedGeometry(c,h,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",b),d.convertToPolyline(c,this.geometry.hasZ,
this.geometry.hasM);return l.quantizeGeometry(b,this.geometry)};a._pool=[];a._set=new Set;return a}();q.default=p});