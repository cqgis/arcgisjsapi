// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/accessorSupport/decorators ../support/serviceTileInfoProperty ../support/TilemapCache".split(" "),function(k,d,m,c,b,a,f,q,l){Object.defineProperty(d,"__esModule",{value:!0});d.ArcGISCachedService=function(h){return function(e){function g(){var a=null!==e&&e.apply(this,arguments)||
this;a.copyright=null;a.minScale=0;a.maxScale=0;a.spatialReference=null;a.tileInfo=null;a.tilemapCache=null;return a}c(g,e);g.prototype.readMinScale=function(a,e){return null!=e.minLOD&&null!=e.maxLOD?a:0};g.prototype.readMaxScale=function(a,e){return null!=e.minLOD&&null!=e.maxLOD?a:0};Object.defineProperty(g.prototype,"supportsBlankTile",{get:function(){return 10.2<=this.version},enumerable:!0,configurable:!0});g.prototype.readTilemapCache=function(a,e){return e.capabilities&&-1<e.capabilities.indexOf("Tilemap")?
new l.TilemapCache({layer:this}):null};b([f.property({json:{read:{source:"copyrightText"}}})],g.prototype,"copyright",void 0);b([f.property()],g.prototype,"minScale",void 0);b([f.reader("service","minScale")],g.prototype,"readMinScale",null);b([f.property()],g.prototype,"maxScale",void 0);b([f.reader("service","maxScale")],g.prototype,"readMaxScale",null);b([f.property({type:a.SpatialReference})],g.prototype,"spatialReference",void 0);b([f.property({readOnly:!0,dependsOn:["version"]})],g.prototype,
"supportsBlankTile",null);b([f.property(q.serviceTileInfoProperty)],g.prototype,"tileInfo",void 0);b([f.property()],g.prototype,"tilemapCache",void 0);b([f.reader("service","tilemapCache",["capabilities"])],g.prototype,"readTilemapCache",null);b([f.property()],g.prototype,"version",void 0);return g=b([f.subclass("esri.layers.mixins.ArcGISCachedService")],g)}(f.declared(h))}})},"esri/layers/support/serviceTileInfoProperty":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"./TileInfo"],function(k,d,m,c){function b(a,b,q,l){if(!a)return null;q=b.minScale;var f=b.maxScale,e=b.minLOD,g=b.maxLOD;if(null!=e&&null!=g)return l&&l.ignoreMinMaxLOD?c.fromJSON(a):c.fromJSON(m({},a,{lods:a.lods.filter(function(a){a=a.level;return null!=a&&a>=e&&a<=g})}));if(0!==q&&0!==f){var d=q?Math.round(1E4*q)/1E4:Infinity,u=f?Math.round(1E4*f)/1E4:-Infinity;return c.fromJSON(m({},a,{lods:a.lods.filter(function(a){a=Math.round(1E4*a.scale)/1E4;return a<=d&&a>=u})}))}return c.fromJSON(a)}Object.defineProperty(d,
"__esModule",{value:!0});d.serviceTileInfoProperty={type:c,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:b}}}}};d.readServiceTileInfo=b})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(k,d,m,c,b,a,f,q,l,h,e,g,p,u,n,x,t,v,r,y){Object.defineProperty(d,"__esModule",{value:!0});d.TILEMAP_SIZE_EXP=5;var w=g.getLogger("esri.layers.support.TilemapCache");k=function(g){function l(a){a=g.call(this)||this;a._handles=new e;a._pendingTilemapRequests={};a._availableLevels={};a.levels=5;a.cacheByteSize=2097152;a.request=q;a._prefetchingEnabled=!0;return a}c(l,g);k=l;l.prototype.initialize=function(){var a=this;this._tilemapCache=new p(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl",
"layer.tileServers?"],function(){return a._initializeTilemapDefinition()}),v.init(this,"layer.tileInfo.lods",function(e){return a._initializeAvailableLevels(e)},!0)]);this._initializeTilemapDefinition()};l.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};l.prototype.castLevels=function(a){return 2>=a?(w.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(l.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});
l.prototype.fetchTilemap=function(a,e,g,b){var f=this;if(!this._availableLevels[a])return n.reject(new h("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var l=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,e,g,l))return n.resolve(a);var c=b&&b.signal;b=m({},b,{signal:null});return n.create(function(a,e){n.onAbort(c,function(){return e(n.createAbortError())});var g=y.tilemapDefinitionId(l),h=f._pendingTilemapRequests[g];if(!h){var h=y.Tilemap.fromDefinition(l,
b).then(function(a){f._tilemapCache.put(g,a,a.byteSize);return a}),q=function(){return delete f._pendingTilemapRequests[g]};f._pendingTilemapRequests[g]=h;h.then(q,q)}h.then(a,e)})};l.prototype.getAvailability=function(a,e,g){return this._availableLevels[a]?(a=this._tilemapFromCache(a,e,g,this._tmpTilemapDefinition))?a.getAvailability(e,g):"unknown":"unavailable"};l.prototype.getAvailabilityUpsample=function(a,e,g,b){b.level=a;b.row=e;b.col=g;a=this.layer.tileInfo;for(a.updateTileInfo(b);;)if(e=this.getAvailability(b.level,
b.row,b.col),"unavailable"===e){if(!a.upsampleTile(b))return"unavailable"}else return e};l.prototype.fetchAvailability=function(a,e,b,g){return this._availableLevels[a]?this.fetchTilemap(a,e,b,g).catch(function(a){return a}).then(function(g){return g instanceof y.Tilemap?(g=g.getAvailability(e,b),"unavailable"===g?n.reject(new h("tile-map:tile-unavailable","Tile is not available",{level:a,row:e,col:b})):g):n.isAbortError(g)?n.reject(g):"unknown"}):n.reject(new h("tilemap-cache:level-unavailable",
"Level "+a+" is unavailable in the service"))};l.prototype.fetchAvailabilityUpsample=function(a,e,g,b,f){var h=this;b.level=a;b.row=e;b.col=g;var l=this.layer.tileInfo;l.updateTileInfo(b);var c=this.fetchAvailability(a,e,g,f).catch(function(a){if(n.isAbortError(a))throw a;if(l.upsampleTile(b))return h.fetchAvailabilityUpsample(b.level,b.row,b.col,b);throw a;});this._fetchAvailabilityUpsamplePrefetch(b.id,a,e,g,f,c);return c};l.prototype._fetchAvailabilityUpsamplePrefetch=function(e,b,g,h,l,c){return f(this,
void 0,void 0,function(){var f,q,d,p,t,r,w,u,v,z;return a(this,function(a){switch(a.label){case 0:if(!this._prefetchingEnabled)return[2];f="prefetch-"+e;if(this._handles.has(f))return[2];q=n.createAbortController();c.then(function(){return q.abort()},function(){return q.abort()});d=!1;p={remove:function(){d||(d=!0,q.abort())}};this._handles.add(p,f);a.label=1;case 1:return a.trys.push([1,3,,4]),[4,x.waitTicks(10,q.signal)];case 2:return a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:d||(d=!0,
this._handles.remove(f));if(n.isAborted(q))return[2];t={id:e,level:b,row:g,col:h};r=m({},l,{signal:q.signal});w=this.layer.tileInfo;u=function(a){var e=v.fetchAvailability(t.level,t.row,t.col,r);k._prefetches.push(e);a=function(){k._prefetches.removeUnordered(e)};e.then(a,a)};v=this;for(z=0;k._prefetches.length<k._maxPrefetch&&w.upsampleTile(t);++z)u(z);return[2]}})})};l.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,e=a.query;this._tilemapCache.clear();
this._tmpTilemapDefinition={service:{url:a.path,query:e?t.objectToQuery(e):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};l.prototype._tilemapFromCache=function(a,e,b,g){a=this._getTilemapDefinition(a,e,b,g);a=y.tilemapDefinitionId(a);return this._tilemapCache.get(a)};l.prototype._getTilemapDefinition=function(a,e,b,g){g.level=a;a=a>d.TILEMAP_SIZE_EXP;g.row=a?e-e%this.size:e;g.col=a?b-b%this.size:b;return g};
l.prototype._initializeAvailableLevels=function(a){var e=this;this._availableLevels={};a&&a.forEach(function(a){return e._availableLevels[a.level]=!0})};Object.defineProperty(l.prototype,"test",{get:function(){var a=this;return{get prefetchingEnabled(){return a._prefetchingEnabled},set prefetchingEnabled(e){a._prefetchingEnabled=this.prefetchingEnabled},hasTilemap:function(e,b,g){return!!a._tilemapFromCache(e,b,g,a._tmpTilemapDefinition)}}},enumerable:!0,configurable:!0});var k;l._maxPrefetch=4;l._prefetches=
new u({initialSize:k._maxPrefetch});b([r.property({constructOnly:!0,type:Number})],l.prototype,"levels",void 0);b([r.cast("levels")],l.prototype,"castLevels",null);b([r.property({readOnly:!0,dependsOn:["levels"],type:Number})],l.prototype,"size",null);b([r.property({constructOnly:!0,type:Number})],l.prototype,"cacheByteSize",void 0);b([r.property({constructOnly:!0})],l.prototype,"layer",void 0);b([r.property({constructOnly:!0})],l.prototype,"request",void 0);return l=k=b([r.subclass("esri.layers.support.TilemapCache")],
l)}(r.declared(l));d.TilemapCache=k})},"esri/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/arrayUtils ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(k,d,m,c,b,a,f,q){function l(a){var e;"vector-tile"===a.service.type?e=a.service.url+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height:(e=a.service.tileServers,e=(e&&e.length?e[a.row%e.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+
"/"+a.col+"/"+a.width+"/"+a.height);(a=a.service.query)&&(e=e+"?"+a);return e}Object.defineProperty(d,"__esModule",{value:!0});k=function(){function h(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}h.prototype.getAvailability=function(a,b){if("unknown"!==this._allAvailability)return this._allAvailability;a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var e=this._tileAvailabilityBitSet;return 0>b||b>e.length?"unknown":e[b]&
1<<a%8?"available":"unavailable"};h.prototype._updateFromData=function(a){for(var e=!0,b=!0,f=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),l=0,h=0;h<a.length;h++){var c=h%8;a[h]?(b=!1,f[l]|=1<<c):e=!1;7===c&&++l}b?this._allAvailability="unavailable":e?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=f,this.byteSize+=f.length)};h.fromDefinition=function(e,g){var f=e.service.request||c,d=e.row,n=e.col,k=e.width,t=e.height,v={query:{f:"json"}};
g=g?m({},v,g):v;return f(l(e),g).then(function(a){return a.data}).catch(function(a){return a&&a.details&&422===a.details.httpStatus?{location:{top:d,left:n,width:k,height:t},valid:!0,data:b.constant(k*t,0)}:q.reject(a)}).then(function(e){if(e.location&&(e.location.top!==d||e.location.left!==n||e.location.width!==k||e.location.height!==t))throw new a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:d,left:n,width:k,height:t}});return h.fromJSON(e)})};
h.fromJSON=function(a){h.validateJSON(a);var e=new h;e.location=Object.freeze(f.clone(a.location));e._updateFromData(a.data);return Object.freeze(e)};h.validateJSON=function(e){if(!e||!e.location)throw new a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new a("tilemap:data-mismatch",
"Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return h}();d.Tilemap=k;d.tilemapDefinitionId=function(a){return a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height};d.tilemapDefinitionUrl=l;d.default=k})},"esri/layers/support/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../request ../../core/Error ../../core/has ../../core/Logger ../../core/promiseUtils".split(" "),
function(k,d,m,c,b,a,f,q,l,h,e,g){Object.defineProperty(d,"__esModule",{value:!0});var p=e.getLogger("esri.layers.support.SpriteSource");k=function(){function e(a,e){this.baseURL=a;this.devicePixelRatio=e;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(e.prototype,"spriteNames",{get:function(){var a=[],e;for(e in this._spritesData)a.push(e);a.sort();return a},enumerable:!0,configurable:!0});e.prototype.getSpriteInfo=
function(a){return this._spritesData[a]};e.prototype.load=function(e){return f(this,void 0,void 0,function(){return a(this,function(a){switch(a.label){case 0:g.throwIfAborted(e);this.loadStatus="loading";if(!this.baseURL)return[2,g.resolve(this)];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._loadSprites(e)];case 2:return a.sent(),this.loadStatus="loaded",[3,4];case 3:return a.sent(),this.loadStatus="failed",[3,4];case 4:return[2,this]}})})};e.prototype._loadSprites=function(a){var e=this;
this._isRetina=1.15<this.devicePixelRatio?!0:!1;var f=this.baseURL,c=this._isRetina?"@2x":"",d=""+f+c+".png";return g.all([q(f+c+".json",a),q(d,b({responseType:"image"},a))]).then(function(a){var b=a[0];a=a[1];var c=Object.keys(b.data);if(!c||0===c.length||1===c.length&&"_ssl"===c[0]||!a||!a.data)return e._spritesData=e.image=null,e.width=e.height=0,g.resolve(null);e._spritesData=b.data;b=a.data;a=Math.max(h("esri-webgl-max-texture-size"),4096);if(b.width>a||b.height>a)throw b="Sprite resource for style "+
f+" is bigger than the maximum allowed of "+a+" pixels}",p.error(b),new l("SpriteSource",b);e.width=b.width;e.height=b.height;a=document.createElement("canvas");c=a.getContext("2d");a.width=b.width;a.height=b.height;c.drawImage(b,0,0,b.width,b.height);b=c.getImageData(0,0,b.width,b.height);b=new Uint8Array(b.data);for(c=0;c<b.length;c+=4)a=b[c+3]/255,b[c]*=a,b[c+1]*=a,b[c+2]*=a;e.image=b})};return e}();d.default=k})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(k,d,m,c,b,a,f,q,l,h){function e(a){a&&(a=l.getOrigin(a),x&&-1===x.indexOf(a)&&x.push(a))}function g(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];for(var e=void 0,b=0;b<a.length;++b)l.isProtocolRelative(a[b])?e&&(e=e.split("://")[0]+":"+a[b].trim()):e=l.isAbsolute(a[b])?a[b]:l.join(e,a[b]);return e}function p(a,g,h,d,p){return b(this,void 0,void 0,function(){var b,k,t,r,v,w;return c(this,function(c){switch(c.label){case 0:q.throwIfAborted(p);if("string"!==typeof h)return[3,
2];r=l.normalize(h);e(r);v=l.urlToObject(r);return[4,f(v.path,m({query:{f:"json"},responseType:"json"},p))];case 1:return t=c.sent(),k=b=r,[3,3];case 2:t={data:h},b=h.jsonUrl||null,k=d,c.label=3;case 3:return w=t.data,t.ssl&&(b&&(b=b.replace(/^http:/i,"https:")),k&&(k=k.replace(/^http:/i,"https:"))),w.sources?(a.styleUrl=b||null,[2,u(a,w,k,p)]):w.sources?[2,q.reject("You must specify the URL or the JSON for a service or for a style.")]:a.sourceUrl?[2,n(a,w,k,!1,g,p)]:(a.sourceUrl=b||null,[2,n(a,w,
k,!0,g,p)])}})})}function u(a,f,h,d){return b(this,void 0,void 0,function(){var b,m,k,n,t,r;return c(this,function(c){switch(c.label){case 0:b=h?l.removeFile(h):l.appBaseUrl;a.styleBase=b;a.style=f;a.styleUrl&&e(a.styleUrl);m=[];if(!f.sources||!f.sources.esri)return[3,3];k=f.sources.esri;return k.url?[4,p(a,"esri",g(b,k.url),void 0,d)]:[3,2];case 1:return c.sent(),[3,3];case 2:m.push(p(a,"esri",k,b,d)),c.label=3;case 3:n=0;for(t=Object.keys(f.sources);n<t.length;n++)r=t[n],"esri"!==r&&"vector"===
f.sources[r].type&&(f.sources[r].url?m.push(p(a,r,g(b,f.sources[r].url),void 0,d)):m.push(p(a,r,f.sources[r],b,d)));return[4,q.all(m)];case 4:return c.sent(),[2]}})})}function n(a,f,d,m,k,n){return b(this,void 0,void 0,function(){var b,r,u,t;return c(this,function(c){b=d?l.removeTrailingSlash(d)+"/":l.appBaseUrl;c=b;if(f.hasOwnProperty("tileInfo"))r=f;else{for(var w={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
x=78271.51696400007,v=2.958287637957775E8,y=[],z=f.hasOwnProperty("minzoom")?parseFloat(f.minzoom):0,K=f.hasOwnProperty("maxzoom")?parseFloat(f.maxzoom):16,A=0;A<=K;A++)A>=z&&y.push({level:A,scale:v,resolution:x}),x/=2,v/=2;x=0;for(v=f.tiles;x<v.length;x++)e(g(c,v[x]));r={capabilities:"TilesOnly",initialExtent:w,fullExtent:w,minScale:y[0].scale,maxScale:y[y.length-1].scale,tiles:f.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:y,spatialReference:{wkid:102100}}}}u=
new h(k,b,r);if(!m&&a.primarySourceName in a.sourceNameToSource){t=a.sourceNameToSource[a.primarySourceName];if(!t.isCompatibleWith(u))return[2,q.resolve()];null!=u.fullExtent&&(null!=t.fullExtent?t.fullExtent.union(u.fullExtent):t.fullExtent=u.fullExtent.clone());t.tileInfo.lods.length<u.tileInfo.lods.length&&(t.tileInfo=u.tileInfo)}m?(a.sourceBase=b,a.source=f,a.validatedSource=r,a.primarySourceName=k,a.sourceUrl&&e(a.sourceUrl)):e(b);a.sourceNameToSource[k]=u;return a.style?[2]:null==f.defaultStyles?
[2,q.reject()]:"string"===typeof f.defaultStyles?[2,p(a,"",g(b,f.defaultStyles,"root.json"),void 0,n)]:[2,p(a,"",f.defaultStyles,g(b,"root.json"),n)]})})}Object.defineProperty(d,"__esModule",{value:!0});var x=a.defaults&&a.defaults.io.corsEnabledServers;d.loadMetadata=function(a,f){return b(this,void 0,void 0,function(){var b,h,d,q,m,k;return c(this,function(c){switch(c.label){case 0:return b={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,
sourceNameToSource:{},primarySourceName:""},h="string"===typeof a?[a,null]:[null,a.jsonUrl],d=h[0],q=h[1],m=d?l.urlToObject(d):null,[4,p(b,"esri",a,q,f)];case 1:return c.sent(),k={layerDefinition:b.validatedSource,url:d,parsedUrl:m,serviceUrl:b.sourceUrl,style:b.style,styleUrl:b.styleUrl,spriteUrl:b.style.sprite&&g(b.styleBase,b.style.sprite),glyphsUrl:b.style.glyphs&&g(b.styleBase,b.style.glyphs),sourceNameToSource:b.sourceNameToSource,primarySourceName:b.primarySourceName},e(k.spriteUrl),e(k.glyphsUrl),
[2,k]}})})}})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TileIndex".split(" "),function(k,d,m,c,b,a,f,q,l,h){return function(){function e(e,c,d){this.tileMapURL="";this.fullExtent=
this.tileIndex=this.capabilities=this.tileInfo=this.parsedUrl=this.tilemapCache=null;this.name=e;if(this.sourceUrl=c)this.parsedUrl=a.urlToObject(this.sourceUrl);e=b.clone(d);var g=e.tiles;c&&g.forEach(function(b,e){a.isAbsolute(b)||(g[e]=a.join(c,b))});this.tileServers=g;d.tileMap&&(this.tileMapURL=a.join(c,d.tileMap));var p=d.capabilities&&d.capabilities.split(",").map(function(a){return a.toLowerCase().trim()}),m=!!d.exportTilesAllowed,p=!!p&&-1!==p.indexOf("tilemap"),k=m&&d.hasOwnProperty("maxExportTilesCount")?
d.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:m,supportsTileMap:p},exportTiles:m?{maxExportTilesCount:+k}:null};this.tileInfo=q.readServiceTileInfo(e.tileInfo,e,null,{ignoreMinMaxLOD:!0});p&&(this.type="vector-tile",this.tilemapCache=new l.TilemapCache({layer:this}),this.tileIndex=new h(this.tilemapCache));this.fullExtent=f.fromJSON(d.fullExtent)}e.prototype.getRefKey=function(a,b){return c(this,void 0,void 0,function(){return m(this,function(e){return this.tileIndex?
[2,this.tileIndex.dataKey(a,b)]:[2,a]})})};e.prototype.getSourceTileUrl=function(a,b,e){var f=this.tileServers[b%this.tileServers.length];return f=f.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,e.toString())};e.prototype.isCompatibleWith=function(a){var b=this.tileInfo;a=a.tileInfo;if(!b.spatialReference.equals(a.spatialReference)||!b.origin.equals(a.origin)||Math.round(b.dpi)!==Math.round(a.dpi))return!1;b=b.lods;a=a.lods;for(var e=Math.min(b.length,a.length),
f=0;f<e;f++){var g=b[f],c=a[f];if(g.level!==c.level||Math.round(g.scale)!==Math.round(c.scale))return!1}return!0};return e}()})},"esri/views/2d/engine/vectorTiles/TileIndex":function(){define(["require","exports","../../../../core/promiseUtils","../../../../layers/support/TilemapCache","../../tiling/TileKey"],function(k,d,m,c,b){return function(){function a(a){if(a instanceof c.TilemapCache)this._tilemapCache=a;else if(a&&"index"in a)this._tilemap=a.index;else throw Error("Invalid tilemap!");}a.prototype.dataKey=
function(a,c){if(this._tilemapCache){var f=a.level,h=a.row,e=a.col,g=new b(a);return this._tilemapCache.fetchAvailabilityUpsample(f,h,e,g,c).then(function(){return g}).catch(function(a){if(m.isAbortError(a))throw a;g.level=f;g.row=h;g.col=e;return g})}return this._getIndexedDataKey(a)};a.prototype.forEach=function(a,b,c,h,e){this._callback=e;this._maxLevel=b+a;this._forEach(this._tilemap,b,c,h)};a.prototype._forEach=function(a,b,c,h){0!==a&&(this._callback(b,c,h),b!==this._maxLevel&&"object"===typeof a&&
(this._forEach(a[0],b+1,2*c,2*h),this._forEach(a[1],b+1,2*c,2*h+1),this._forEach(a[2],b+1,2*c+1,2*h),this._forEach(a[3],b+1,2*c+1,2*h+1)))};a.prototype._getIndexedDataKey=function(a){var f=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return m.resolve(null);for(;0!==a.level;)a=new b(a.level-1,a.row>>1,a.col>>1,a.world),f.push(a);a=this._tilemap;var c=f.pop(),h,e;if(1===a)return m.resolve(c);for(;f.length;)if(h=f.pop(),e=(h.col&1)+((h.row&1)<<1),a){if(0===a[e]){c=null;break}if(1===
a[e]){c=h;break}c=h;a=a[e]}return m.resolve(c)};return a}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(k,d,m){return function(){function c(b,a,f,c){this.set(b,a,f,c)}c.getId=function(b,a,f,c){return"object"===typeof b?b.level+"/"+b.row+"/"+b.col+"/"+b.world:b+"/"+a+"/"+f+"/"+c};Object.defineProperty(c.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"id",{get:function(){return this.toString()},
enumerable:!0,configurable:!0});c.prototype.equals=function(b){return this.level===b.level&&this.row===b.row&&this.col===b.col&&this.world===b.world};c.prototype.release=function(){this.world=this.col=this.row=this.level=0};c.prototype.set=function(b,a,f,c){null==b?this.world=this.col=this.row=this.level=0:"object"===typeof b?(this.level=b.level||0,this.row=b.row||0,this.col=b.col||0,this.world=b.world||0):"string"===typeof b?(b=b.split("/"),a=b[1],f=b[2],c=b[3],this.level=parseFloat(b[0]),this.row=
parseFloat(a),this.col=parseFloat(f),this.world=parseFloat(c)):(this.level=+b,this.row=+a,this.col=+f,this.world=+c||0);return this};c.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};c.prototype.getChildKeys=function(){var b=this.level+1,a=this.row<<1,f=this.col<<1,d=this.world;return[new c(b,a,f,d),new c(b,a,f+1,d),new c(b,a+1,f,d),new c(b,a+1,f+1,d)]};c.prototype.compareRowMajor=function(b){return this.row<b.row?-1:this.row>b.row?1:this.col<b.col?-1:this.col>
b.col?1:0};c.pool=new m(c,!0,null,25,50);return c}()})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(k,d,m,c){Object.defineProperty(d,"__esModule",{value:!0});d.createForItem=function(b){return{origin:"portal-item",url:m.urlToObject(b.itemUrl),portal:b.portal||c.getDefault()}}})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["require","exports","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],
function(k,d,m,c){return function(){function b(a,b){this.lockedSchemaPixelSize=a;this.isGCS=b}b.prototype.getLevelRowColumn=function(a){return this.isGCS?[a[0],a[1]>>1,a[2]>>1]:256===this.lockedSchemaPixelSize&&0<a[0]?[a[0]-1,a[1]>>1,a[2]>>1]:a};b.prototype.adjustLevel=function(a){return this.isGCS?a:256===this.lockedSchemaPixelSize?0<a?a-1:0:a};b.prototype.getShift=function(a,b){var f=0,c=0;if(256===this.lockedSchemaPixelSize||this.isGCS)a[2]%2&&(f=b),a[1]%2&&(c=b);return[f,c]};b.prototype.getScale=
function(a){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===a)return 1;return 2};b.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===a.size[0]&&256===a.size[1])return a;for(var b=a.spatialReference.isGeographic,d=[],l=a.lods.length,h=0;h<l;h++){var e=a.lods[h];d.push(new m({level:e.level,scale:e.scale,resolution:b?e.resolution:2*e.resolution}))}return new c({size:[256,256],dpi:a.dpi,format:a.format,compressionQuality:a.compressionQuality,
origin:a.origin,spatialReference:a.spatialReference,lods:d})};b.create512x512CompatibleTileInfo=function(a){if(!a||256===a.size[0]||256===a.size[1])return null;for(var b=[],d=a.lods.length,l=0;l<d;l++){var h=a.lods[l];b.push(new m({level:h.level,scale:h.scale,resolution:.5*h.resolution}))}return new c({size:[512,512],dpi:a.dpi,format:a.format,compressionQuality:a.compressionQuality,origin:a.origin,spatialReference:a.spatialReference,lods:b})};return b}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["require",
"exports","../../../../layers/support/TileInfo"],function(k,d,m){Object.defineProperty(d,"__esModule",{value:!0});d.areSchemasOverlapping=function(c,b){if(c===b)return!0;if(!c&&null!=b||null!=c&&!b||!c.spatialReference.equals(b.spatialReference)||c.dpi!==b.dpi)return!1;var a=c.origin,f=b.origin;if(1E-6<=Math.abs(a.x-f.x)||1E-6<=Math.abs(a.y-f.y))return!1;c.lods[0].scale>b.lods[0].scale?(a=c,c=b):a=b;for(b=a.lods[0].scale;b>=c.lods[c.lods.length-1].scale-1E-6;b/=2)if(1E-6>Math.abs(b-c.lods[0].scale))return!0;
return!1};d.unionTileInfos=function(c,b){if(c===b)return c;if(!c&&null!=b)return b;if(null!=c&&!b)return c;var a=c.size[0],f=c.format,d=c.dpi,l={x:c.origin.x,y:c.origin.y},h=c.spatialReference.toJSON(),e=c.lods[0].scale>b.lods[0].scale?c.lods[0]:b.lods[0];c=(c.lods[c.lods.length-1].scale<=b.lods[b.lods.length-1].scale?c.lods[c.lods.length-1]:b.lods[b.lods.length-1]).scale;b=[];for(var g=e.scale,e=e.resolution,p=0;g>c;)b.push({level:p,resolution:e,scale:g}),p++,g/=2,e/=2;return new m({size:[a,a],dpi:d,
format:f||"pbf",origin:l,lods:b,spatialReference:h})}})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["require","exports","../../../../../core/has","./StyleLayer"],function(k,d,m,c){return function(){function b(a,f){this.backgroundBucketIds=[];this._layerByName={};this.styleJSON=a;this.version=parseFloat(a.version);this.sprite=f?f.spriteUrl:a.sprite;this.glyphs=f?f.glyphsUrl:a.glyphs;if(this.layers=(a.layers||[]).map(b._create))for(a=void 0,f=0;f<this.layers.length;f++)a=
this.layers[f],this._layerByName[a.id.toLowerCase()]=a,0===a.type&&this.backgroundBucketIds.push(f);this._identifyRefLayers()}b.prototype.isPainterDataDriven=function(a){return(a=this._layerByName[a.toLowerCase()])?a.isPainterDataDriven():!1};b.prototype.getStyleLayerId=function(a){return a>=this.layers.length?null:this.layers[a].id};b.prototype.getLayoutProperties=function(a){return(a=this._layerByName[a.toLowerCase()])?a.layout:null};b.prototype.getPaintProperties=function(a){return(a=this._layerByName[a.toLowerCase()])?
a.paint:null};b.prototype.setPaintProperties=function(a,f){a=this._layerByName[a.toLowerCase()];if(!a)return"";var c=this.layers.indexOf(a);this.styleJSON.layers[c].paint=f;f=b._recreateLayer({id:a.id,type:a.typeName,source:a.source,sourceLayer:a["source-layer"],minzoom:a.minzoom,maxzoom:a.maxzoom,filter:a.filter,layout:a.layout,paint:f},a);this.layers[c]=f;this._layerByName[a.id.toLowerCase()]=f;return a.id};b.prototype.setLayoutProperties=function(a,c){a=this._layerByName[a.toLowerCase()];if(!a)return"";
var f=this.layers.indexOf(a);this.styleJSON.layers[f].layout=c;c=b._recreateLayer({id:a.id,type:a.typeName,source:a.source,sourceLayer:a["source-layer"],minzoom:a.minzoom,maxzoom:a.maxzoom,filter:a.filter,layout:c,paint:a.paint},a);this.layers[f]=c;this._layerByName[a.id.toLowerCase()]=c;return a.id};b.prototype._identifyRefLayers=function(){for(var a=[],b=[],c=0,d=0,h=this.layers;d<h.length;d++){var e=h[d];if(1===e.type){var g=e,p=e.source+"|"+e.sourceLayer,p=p+("|"+JSON.stringify(e.layout&&e.layout.visibility)),
p=p+("|"+JSON.stringify(e.minzoom)),p=p+("|"+JSON.stringify(e.maxzoom)),p=p+("|"+JSON.stringify(e.filter));if(g.hasDataDrivenFill||g.hasDataDrivenOutline)p+="|"+JSON.stringify(c);a.push({key:p,layer:e})}2===e.type&&(g=e,p=e.source+"|"+e.sourceLayer,p+="|"+JSON.stringify(e.layout&&e.layout.visibility),p+="|"+JSON.stringify(e.minzoom),p+="|"+JSON.stringify(e.maxzoom),p+="|"+JSON.stringify(e.filter),p+="|"+JSON.stringify(e.layout&&e.layout["line-cap"]),p+="|"+JSON.stringify(e.layout&&e.layout["line-join"]),
g.hasDataDrivenLine&&(p+="|"+JSON.stringify(c)),b.push({key:p,layer:e}));++c}this._assignRefLayers(a);this._assignRefLayers(b)};b.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,c,d=a.length,h=0;h<d;h++){var e=a[h];if(e.key===b)e.layer.refLayerId=c;else if(b=e.key,c=e.layer.id,1===e.layer.type&&!e.layer.getPaintProperty("fill-outline-color"))for(var g=h+1;g<d;g++){var p=a[g];if(p.key===b){if(p.layer.getPaintProperty("fill-outline-color")){a[h]=
p;a[g]=e;c=p.layer.id;break}}else break}}};b._create=function(a,b,d){b=1-1/(d.length+1)*(1+b);switch(a.type){case "background":return new c.BackgroundStyleLayer(0,a,b);case "fill":return new c.FillStyleLayer(1,a,b);case "line":return new c.LineStyleLayer(2,a,b);case "symbol":return new c.SymbolStyleLayer(3,a,b);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,a,b)}throw Error("Unknown vector tile layer");};b._recreateLayer=function(a,
b){switch(a.type){case "background":return new c.BackgroundStyleLayer(0,a,b.z);case "fill":return new c.FillStyleLayer(1,a,b.z);case "line":return new c.LineStyleLayer(2,a,b.z);case "symbol":return new c.SymbolStyleLayer(3,a,b.z);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,a,b.z)}};return b}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(k,d,m,c,b,a,f){Object.defineProperty(d,"__esModule",{value:!0});k=function(){function f(a,e,g){this.type=a;this.typeName=e.type;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=g;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=
b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=
this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}f.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=c.createFilter(this.filter)};f.prototype.getLayoutProperty=function(a){var b=this._layoutProperties;if(b)return b[a]};f.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};f.prototype.getLayoutValue=function(a,b,g){var e,c=this._layoutProperties;c&&(c=c[a])&&(e=c.getValue(b,
g));a=this._layoutDefinition[a];void 0===e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};f.prototype.getPaintValue=function(a,b,g){var e,c=this._paintProperties;c&&(c=c[a])&&(e=c.getValue(b,g));a=this._paintDefinition[a];void 0===e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};f.prototype.isPainterDataDriven=function(){var a=this._paintProperties;if(a)for(var b in a)if(a[b].isDataDriven)return!0;return!1};f.prototype._parseLayout=function(b){var e={},
c;for(c in b){var f=this._layoutDefinition[c];f&&(e[c]=new a(c,f,b[c]))}return e};f.prototype._parsePaint=function(b){var e={},c;for(c in b){var f=this._paintDefinition[c];f&&(e[c]=new a(c,f,b[c]))}return e};return f}();d.StyleLayer=k;var q=function(a){function b(b,c,f){return a.call(this,b,c,f)||this}m(b,a);return b}(k);d.BackgroundStyleLayer=q;q=function(a){function b(b,c,f){b=a.call(this,b,c,f)||this;c=b.getPaintProperty("fill-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("fill-opacity");
b.hasDataDrivenOpacity=c?c.isDataDriven:!1;b.hasDataDrivenFill=b.hasDataDrivenColor||b.hasDataDrivenOpacity;c=b.getPaintProperty("fill-outline-color");b.outlineUsesFillColor=!c;b.hasDataDrivenOutlineColor=c?c.isDataDriven:!1;b.hasDataDrivenOutline=(c?b.hasDataDrivenOutlineColor:b.hasDataDrivenColor)||b.hasDataDrivenOpacity;return b}m(b,a);return b}(k);d.FillStyleLayer=q;q=function(a){function c(e,c,d){e=a.call(this,e,c,d)||this;d=e.getPaintProperty("line-color");e.hasDataDrivenColor=d?d.isDataDriven:
!1;d=e.getPaintProperty("line-opacity");e.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=e.getPaintProperty("line-width");e.hasDataDrivenWidth=d?d.isDataDriven:!1;e.hasDataDrivenLine=e.hasDataDrivenColor||e.hasDataDrivenOpacity||e.hasDataDrivenWidth;c=c.paint["line-width"];c||(c=b.StyleDefinition.linePaintDefinition["line-width"].default);e.isThinLine=!e.hasDataDrivenWidth&&"number"===typeof c&&c<f.THIN_LINE_THRESHOLD;return e}m(c,a);return c}(k);d.LineStyleLayer=q;q=function(a){function b(b,c,f){b=a.call(this,
b,c,f)||this;c=b.getPaintProperty("icon-color");b.hasDataDrivenIconColor=c?c.isDataDriven:!1;c=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=c?c.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;c=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=c?c.isDataDriven:!1;c=b.getPaintProperty("text-opacity");b.hasDataDrivenTextOpacity=c?c.isDataDriven:
!1;c=b.getLayoutProperty("text-size");b.hasDataDrivenTextSize=c?c.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}m(b,a);return b}(k);d.SymbolStyleLayer=q;k=function(a){function b(b,c,f){b=a.call(this,b,c,f)||this;c=b.getPaintProperty("circle-radius");b.hasDataDrivenRadius=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-opacity");b.hasDataDrivenOpacity=
c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-width");b.hasDataDrivenStrokeWidth=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-color");b.hasDataDrivenStrokeColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-opacity");b.hasDataDrivenStrokeOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-blur");b.hasDataDrivenBlur=c?c.isDataDriven:!1;return b}m(b,a);return b}(k);d.CircleStyleLayer=k;k=function(){return function(a,b,c){this.cap=a.getLayoutValue("line-cap",b,c);
this.join=a.getLayoutValue("line-join",b,c);this.miterLimit=a.getLayoutValue("line-miter-limit",b,c);this.roundLimit=a.getLayoutValue("line-round-limit",b,c)}}();d.LineLayout=k;k=function(){return function(a,b,c,f){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,f);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,f);this.optional=a.getLayoutValue("icon-optional",b,f);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,f);this.size=a.getLayoutValue("icon-size",
b,f);this.rotate=a.getLayoutValue("icon-rotate",b,f);this.padding=a.getLayoutValue("icon-padding",b,f);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,f);this.offset=a.getLayoutValue("icon-offset",b,f);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();d.IconLayout=k;k=function(){return function(a,b,c,f){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,f);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,f);this.optional=a.getLayoutValue("text-optional",
b,f);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,f);this.fontArray=a.getLayoutValue("text-font",b,f);this.maxWidth=a.getLayoutValue("text-max-width",b,f);this.lineHeight=a.getLayoutValue("text-line-height",b,f);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,f);this.justify=a.getLayoutValue("text-justify",b,f);this.anchor=a.getLayoutValue("text-anchor",b,f);this.maxAngle=a.getLayoutValue("text-max-angle",b,f);this.size=a.getLayoutValue("text-size",b,f);this.rotate=
a.getLayoutValue("text-rotate",b,f);this.padding=a.getLayoutValue("text-padding",b,f);this.keepUpright=a.getLayoutValue("text-keep-upright",b,f);this.transform=a.getLayoutValue("text-transform",b,f);this.offset=a.getLayoutValue("text-offset",b,f);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();d.TextLayout=k})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["require","exports"],function(k,d){return function(){function d(c,b,a){this._op=c;"$type"===b?(this._val=a instanceof
Array?a.map(function(a){return d._types.indexOf(a)}):d._types.indexOf(a),this._op+=11):(this._key=b,this._val=a)}d.prototype.filter=function(c){switch(this._op){case 0:return this._val;case 1:return c.values[this._key]===this._val;case 2:return c.values[this._key]!==this._val;case 3:return c.values[this._key]<this._val;case 4:return c.values[this._key]>this._val;case 5:return c.values[this._key]<=this._val;case 6:return c.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(c.values[this._key]);
case 8:return-1===this._val.indexOf(c.values[this._key]);case 9:for(var b=0,a=this._val;b<a.length;b++){var f=a[b];if(f.filter(c))return!0}return!1;case 10:b=0;for(a=this._val;b<a.length;b++)if(f=a[b],!f.filter(c))return!1;return!0;case 11:b=0;for(a=this._val;b<a.length;b++)if(f=a[b],f.filter(c))return!1;return!0;case 12:return c.type===this._val;case 13:return c.type!==this._val;case 14:return c.type<this._val;case 15:return c.type>this._val;case 16:return c.type>=this._val;case 17:return c.type<=
this._val;case 18:return-1!==this._val.indexOf(c.type);case 19:return-1===this._val.indexOf(c.type);case 20:return void 0!==c.values[this._key];case 21:return void 0===c.values[this._key]}};d.createFilter=function(c){if(!c)return new d(0,void 0,!0);var b=c[0];if(1>=c.length)return new d(0,void 0,"any"!==b);switch(b){case "\x3d\x3d":return new d(1,c[1],c[2]);case "!\x3d":return new d(2,c[1],c[2]);case "\x3e":return new d(4,c[1],c[2]);case "\x3c":return new d(3,c[1],c[2]);case "\x3e\x3d":return new d(6,
c[1],c[2]);case "\x3c\x3d":return new d(5,c[1],c[2]);case "in":return new d(7,c[1],c.slice(2));case "!in":return new d(8,c[1],c.slice(2));case "any":return new d(9,void 0,c.slice(1).map(d.createFilter.bind(this)));case "all":return new d(10,void 0,c.slice(1).map(d.createFilter.bind(this)));case "none":return new d(11,void 0,c.slice(1).map(d.createFilter.bind(this)));case "has":return new d(20,c[1],void 0);case "!has":return new d(21,c[1],void 0);default:throw Error("invalid operator: "+b);}};d._types=
["Unknown","Point","LineString","Polygon"];return d}()})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(k,d){Object.defineProperty(d,"__esModule",{value:!0});k=function(){function d(){}d.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.lineLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};d.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",
default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},
"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",
default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};d.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};d.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};d.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",
default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};d.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};d.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},
"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,
default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};d.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},
"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};d.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],
default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return d}();d.StyleDefinition=k})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../../../Color","../GeometryUtils"],function(k,d,m,c){return function(){function b(a,c,d){this.isDataDriven=!1;switch(c.type){case "number":a=!0;break;case "color":a=
!0;d=b._parseColor(d);break;case "array":a="number"===c.value;break;default:a=!1}null==d&&(d=c.default);a&&"interval"===d.type&&(a=!1);var f=d&&d.stops&&0<d.stops.length;if(f)for(var h=0,e=d.stops;h<e.length;h++){var g=e[h];g[1]=this._validate(g[1],c)}if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,c)),f)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,c);break;case "categorical":this.getValue=this._buildCategorical(d,c);break;default:this.getValue=
a?this._buildInterpolate(d,c):this._buildInterval(d,c)}else this.getValue=this._buildIdentity(d,c);else f?this.getValue=a?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,c),this.getValue=this._buildSimple(d))}b.prototype._validate=function(a,b){if("number"===b.type){if(a<b.minimum)return b.minimum;if(a>b.maximum)return b.maximum}return a};b.prototype._buildSimple=function(a){return function(){return a}};b.prototype._buildIdentity=function(a,c){var d=this;return function(f,
h){var e;h&&(e=h.values[a.property],"color"===c.type&&(e=b._parseColor(e)));void 0===e&&(e=a.default);return void 0!==e?d._validate(e,c):c.default}};b.prototype._buildCategorical=function(a,b){var c=this;return function(d,f){var e;f&&(e=f.values[a.property]);e=c._categorical(e,a.stops);return void 0!==e?e:void 0!==a.default?a.default:b.default}};b.prototype._buildInterval=function(a,b){var c=this;return function(d,f){var e;f&&(e=f.values[a.property]);return"number"===typeof e?c._interval(e,a.stops):
void 0!==a.default?a.default:b.default}};b.prototype._buildInterpolate=function(a,b){var c=this;return function(d,f){var e;f&&(e=f.values[a.property]);return"number"===typeof e?c._interpolate(e,a.stops,a.base||1):void 0!==a.default?a.default:b.default}};b.prototype._buildZoomInterpolate=function(a){var b=this;return function(c){return b._interpolate(c,a.stops,a.base||1)}};b.prototype._buildZoomInterval=function(a){var b=this;return function(c){return b._interval(c,a.stops)}};b.prototype._categorical=
function(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d][0]===a)return b[d][1]};b.prototype._interval=function(a,b){for(var c=b.length,d=0,f=0;f<c;f++)if(b[f][0]<=a)d=f;else break;return b[d][1]};b.prototype._interpolate=function(a,b,d){for(var f,h,e=b.length,g=0;g<e;g++){var k=b[g];if(k[0]<=a)f=k;else{h=k;break}}if(f&&h){g=h[0]-f[0];a-=f[0];d=1===d?a/g:(Math.pow(d,a)-1)/(Math.pow(d,g)-1);if(Array.isArray(f[1])){f=f[1];h=h[1];a=[];for(g=0;g<f.length;g++)a.push(c.interpolate(f[g],h[g],d));return a}return c.interpolate(f[1],
h[1],d)}if(f)return f[1];if(h)return h[1]};b._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};b._parseColor=function(a){if(Array.isArray(a))return a;if("string"===typeof a){if(a=new m(a),!this._isEmpty(a))return m.toUnitRGBA(a)}else return a&&a.default&&(a.default=b._parseColor(a.default)),a&&a.stops&&(a.stops=a.stops.map(function(a){return[a[0],b._parseColor(a[1])]})),a};return b}()})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["require","exports"],
function(k,d){function m(b,a){b%=a;return 0<=b?b:b+a}Object.defineProperty(d,"__esModule",{value:!0});d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var c=1/Math.LN2;d.positiveMod=m;d.radToByte=function(b){return m(b*d.C_RAD_TO_256,256)};d.degToByte=function(b){return m(b*d.C_DEG_TO_256,256)};d.log2=function(b){return Math.log(b)*
c};d.sqr=function(b){return b*b};d.interpolate=function(b,a,c){return b*(1-c)+a*c};d.between=function(b,a,c){return b>=a&&b<=c||b>=c&&b<=a}})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(k,d){Object.defineProperty(d,"__esModule",{value:!0});d.WEBGL_MAX_STOPS=8;d.WEBGL_MAX_INNER_STOPS=d.WEBGL_MAX_STOPS-2;d.NAN_MAGIC_NUMBER=1E-30;d.EXTRUDE_SCALE=64;d.PICTURE_FILL_COLOR=4294967295;d.TILE_SIZE=512;d.RASTER_TILE_SIZE=256;d.ANGLE_FACTOR_256=256/360;d.DEBUG_LABELS=
!1;d.COLLISION_BUCKET_SIZE=128;d.DOT_DENSITY_MAX_FIELDS=8;d.COLLISION_MAX_ZOOM_DELTA=3;d.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;d.COLLISION_BOX_PADDING=16;d.COLLISION_TILE_BOX_SIZE=d.TILE_SIZE/d.COLLISION_BUCKET_SIZE;d.COLLISION_PLACEMENT_PADDING=8;d.HEURISTIC_GLYPHS_PER_LINE=50;d.HEURISTIC_GLYPHS_PER_FEATURE=10;d.GLYPH_SIZE=24;d.TEXT_LINE_HEIGHT=1.2*d.GLYPH_SIZE;d.TEXT_MAX_WIDTH=10*d.GLYPH_SIZE;d.TEXT_SPACING=0;d.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};d.ATTRIBUTE_STORE_TEXTURE_SIZE=
1024;d.TEXTURE_BINDING_SPRITE_ATLAS=0;d.TEXTURE_BINDING_GLYPH_ATLAS=0;d.TEXTURE_BINDING_BITMAP=0;d.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;d.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;d.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;d.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;d.TEXTURE_BINDING_HIGHLIGHT_0=5;d.TEXTURE_BINDING_HIGHLIGHT_1=6;d.TEXTURE_BINDING_RENDERER_0=5;d.TEXTURE_BINDING_RENDERER_1=6;d.ATTRIBUTE_DATA_FILTER_FLAGS=0;d.ATTRIBUTE_DATA_ANIMATION=1;d.ATTRIBUTE_DATA_VV=2;d.ATTRIBUTE_DATA_DD0=3;d.ATTRIBUTE_DATA_DD1=3;d.MAX_FILTERS=
2;d.HIGHLIGHT_FLAG=1;d.FILTER_FLAG_0=2;d.EFFECT_FLAG_0=4;d.THIN_LINE_THRESHOLD=2.5;d.HITTEST_SEARCH_SIZE=24;d.MAX_ANIMATION_TIME_MS=2E3})},"*noref":1}});
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../request ../core/Error ../core/global ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository".split(" "),function(k,
d,m,c,b,a,f,q,l,h,e,g,p,u,n,x,t,v,r,y,w,D,E,F,z,G,H,I,B,C,J){return function(e){function d(a,b){a=e.call(this)||this;a._spriteSourceMap=new Map;a.currentStyleInfo=null;a.style=null;a.isReference=null;a.operationalLayerType="VectorTileLayer";a.type="vector-tile";a.url=null;return a}c(d,e);d.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?m({url:a},b):a};d.prototype.load=function(b){var c=this,d=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},b).then(function(){return f(c,
void 0,void 0,function(){var c,d;return a(this,function(a){switch(a.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];c=this.portalItem.itemUrl+"/resources/styles/root.json";return[4,q(c,m({},b,{query:{f:"json"}}))];case 1:return d=a.sent(),d.data&&this.read({url:c},I.createForItem(this.portalItem)),[2]}})})}).then(function(){return c._loadStyle(b)},function(){return c._loadStyle(b)});this.addResolvingPromise(d);return this.when()};Object.defineProperty(d.prototype,"attributionDataUrl",
{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&u.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"capabilities",{get:function(){var a=this._getPrimarySource();return a?a.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullExtent",{get:function(){var a=this._getPrimarySource();return a?
a.fullExtent:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parsedUrl",{get:function(){return this.serviceUrl?p.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});d.prototype.writeStyleUrl=function(a,b){a&&u.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};Object.defineProperty(d.prototype,"tileIndexType",{get:function(){var a=this._getPrimarySource();return a?a.type:""},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tileIndexUrl",{get:function(){var a=this._getPrimarySource();
return a?a.tileMapURL:""},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tileInfo",{get:function(){var a=[],b;for(b in this.sourceNameToSource)a.push(this.sourceNameToSource[b]);b=this._getPrimarySource().tileInfo;if(1<a.length)for(var c=0;c<a.length;c++)C.areSchemasOverlapping(b,a[c].tileInfo)&&(b=C.unionTileInfos(b,a[c].tileInfo));return b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tilemapCache",{get:function(){var a=this._getPrimarySource();return a?
a.capabilities.operations.supportsTileMap?a.tilemapCache:null:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"tileServers",{get:function(){var a=this._getPrimarySource();return a?a.tileServers:[]},enumerable:!0,configurable:!0});d.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};Object.defineProperty(d.prototype,"compatibleTileInfo256",{get:function(){return B.create256x256CompatibleTileInfo(this.tileInfo)},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"compatibleTileInfo512",{get:function(){return B.create512x512CompatibleTileInfo(this.tileInfo)},enumerable:!0,configurable:!0});d.prototype.loadSpriteSource=function(b,c){void 0===b&&(b=1);return f(this,void 0,void 0,function(){var d,e;return a(this,function(a){this._spriteSourceMap.has(b)||(d=new F.default(this.styleRepository.sprite,b),this._spriteSourceMap.set(b,d.load()));e=this._spriteSourceMap.get(b);return[2,g.create(function(a,b){e.then(a,
b);g.onAbortOrThrow(c,b)})]})})};d.prototype.loadStyle=function(b,c){return f(this,void 0,void 0,function(){var d,e,f,k=this;return a(this,function(a){d=b||this.style||this.url;if(this._loadingPromise&&"string"===typeof d&&this.url===d&&!g.isAborted(this._abortController))return[2,this._loadingPromise];(e=this._abortController)&&e.abort();f=g.createAbortController();this._loadingPromise=g.create(function(a,b){var e={signal:f.signal};k._spriteSourceMap.clear();k._getSourceAndStyle(d,e).then(function(){return k.loadSpriteSource(h.devicePixelRatio||
1,e).then(function(){return a()})}).catch(b);g.onAbort(c,function(){f.abort()})});this._abortController=f;return[2,this._loadingPromise]})})};d.prototype.getStyleLayerId=function(a){return this.styleRepository.getStyleLayerId(a)};d.prototype.getPaintProperties=function(a){return this.styleRepository.getPaintProperties(a)};d.prototype.setPaintProperties=function(a,b){var c=this.styleRepository.isPainterDataDriven(a),d=this.styleRepository.setPaintProperties(a,b),e=this.styleRepository.isPainterDataDriven(a);
this.emit("paint-change",{layer:d,paint:b});(c||e)&&this.emit("layout-change",{layer:d,layout:this.styleRepository.getLayoutProperties(a)})};d.prototype.getLayoutProperties=function(a){return this.styleRepository.getLayoutProperties(a)};d.prototype.setLayoutProperties=function(a,b){a=this.styleRepository.setLayoutProperties(a,b);this.emit("layout-change",{layer:a,layout:b})};d.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,
b.toString()).replace(/\{x\}/gi,c.toString())};d.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new l("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};d.prototype.importLayerViewModule=function(b){return f(this,void 0,void 0,function(){return a(this,function(a){switch(b.type){case "2d":return[2,g.create(function(a){return k(["../views/2d/layers/VectorTileLayerView2D"],
a)})];case "3d":return[2,g.create(function(a){return k(["../views/3d/layers/VectorTileLayerView3D"],a)})]}return[2,null]})})};d.prototype._getSourceAndStyle=function(b,c){return f(this,void 0,void 0,function(){var d;return a(this,function(a){switch(a.label){case 0:return b?[4,H.loadMetadata(b,c)]:[2,g.reject(Error("invalid style!"))];case 1:return d=a.sent(),this._set("currentStyleInfo",{serviceUrl:d.serviceUrl,styleUrl:d.styleUrl,spriteUrl:d.spriteUrl,glyphsUrl:d.glyphsUrl,style:d.style,layerDefinition:d.layerDefinition}),
"string"===typeof b?(this.url=b,this.style=null):(this.url=null,this.style=b),this._set("sourceNameToSource",d.sourceNameToSource),this._set("primarySourceName",d.primarySourceName),this._set("styleRepository",new J(d.style,d)),this.read(d.layerDefinition,{origin:"service"}),[2]}})})};d.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&
b[3].toLowerCase()))for(var b=b[2]||"",c=0,d="OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" ");c<d.length;c++){var e=d[c];if(-1<e.toLowerCase().indexOf(a))return u.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}};d.prototype._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:
null};d.prototype._loadStyle=function(b){return f(this,void 0,void 0,function(){return a(this,function(a){return this._loadingPromise?[2,this._loadingPromise]:[2,this.loadStyle(null,b)]})})};b([n.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],d.prototype,"attributionDataUrl",null);b([n.property({type:["show","hide"]})],d.prototype,"listMode",void 0);b([n.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"capabilities",null);b([n.property({readOnly:!0})],
d.prototype,"currentStyleInfo",void 0);b([n.property({json:{read:!1},readOnly:!0,type:x,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"fullExtent",null);b([n.property()],d.prototype,"style",void 0);b([n.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],d.prototype,"isReference",void 0);b([n.property({type:["VectorTileLayer"]})],d.prototype,"operationalLayerType",void 0);b([n.property({readOnly:!0,dependsOn:["serviceUrl"]})],
d.prototype,"parsedUrl",null);b([n.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],d.prototype,"serviceUrl",null);b([n.property({type:t,dependsOn:["tileInfo"],readOnly:!0})],d.prototype,"spatialReference",null);b([n.property({readOnly:!0})],d.prototype,"styleRepository",void 0);b([n.property({readOnly:!0})],d.prototype,"sourceNameToSource",void 0);b([n.property({readOnly:!0})],d.prototype,"primarySourceName",void 0);b([n.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},
origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],d.prototype,"styleUrl",null);b([n.writer(["portal-item","web-document"],"styleUrl")],d.prototype,"writeStyleUrl",null);b([n.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"tileIndexType",null);b([n.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"tileIndexUrl",null);b([n.property({json:{read:!1,origins:{service:{read:!1}}},
readOnly:!0,type:z,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"tileInfo",null);b([n.property({json:{read:!1},readOnly:!0,type:G.TilemapCache,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"tilemapCache",null);b([n.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],d.prototype,"tileServers",null);b([n.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],d.prototype,"type",void 0);b([n.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},
"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],d.prototype,"url",void 0);b([n.property({readOnly:!0})],d.prototype,"version",void 0);b([n.reader("version",["version","currentVersion"])],d.prototype,"readVersion",null);b([n.property({readOnly:!0,dependsOn:["tileInfo"]})],d.prototype,"compatibleTileInfo256",null);b([n.property({readOnly:!0,dependsOn:["tileInfo"]})],d.prototype,"compatibleTileInfo512",null);return d=b([n.subclass("esri.layers.VectorTileLayer")],d)}(n.declared(E.ScaleRangeLayer(r.ArcGISCachedService(y.ArcGISService(w.OperationalLayer(D.PortalLayer(e.MultiOriginJSONMixin(v))))))))});