// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../request ../../core/asyncUtils ../../core/Error ../../core/ItemCache ../../core/promiseUtils ../../geometry/support/aaBoundingBox ../../views/3d/layers/graphics/Graphics3DIconSymbolLayer ../../views/3d/layers/graphics/graphicUtils ../../views/3d/layers/graphics/objectResourceUtils ../../views/3d/layers/graphics/primitiveObjectSymbolUtils".split(" "),function(y,c,l,m,d,g,e,n,p,q,r,t){function h(a){if(a.resource.href)return u(a.resource.href).then(function(a){return[a.width,
a.height]});if(a.resource.primitive)return e.resolve(p.default.PRIMITIVE_SIZE);throw new d("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource");}function v(a){return h(a).then(function(b){if(null==a.size)return b;b=b[0]/b[1];return 1<b?[a.size,a.size/b]:[a.size*b,a.size]})}function u(a){return l(a,{responseType:"image"}).then(function(a){return a.data})}function k(a){return w(a).then(function(a){return n.size(a)})}function x(a){return k(a).then(function(b){return q.computeSizeWithResourceSize(b,
a)})}function w(a){if(!a.isPrimitive){var b=a.resource.href;a=f.get(b);return void 0!==a?e.resolve(a):m.safeCast(r.fetch(b,{disableTextures:!0}).then(function(a){f.put(b,a.referenceBoundingBox);return a.referenceBoundingBox}))}var c=null;a.resource&&a.resource.primitive&&(c=t.primitiveBoundingBox(a.resource.primitive));return c?e.resolve(c):e.reject(new d("symbol:invalid-resource","The symbol does not have a valid resource"))}Object.defineProperty(c,"__esModule",{value:!0});var f=new g(50);c.clearBoundingBoxCache=
function(){f=new g(50)};c.computeLayerResourceSize=function(a){if("icon"===a.type)return h(a);if("object"===a.type)return k(a);throw new d("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object");};c.computeLayerSize=function(a){if("icon"===a.type)return v(a);if("object"===a.type)return x(a);throw new d("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object");}});