// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
require({cache:{"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis ../core/has ../core/promiseUtils ../intl/moment".split(" "),function(I,e,p,q,m,k,r,l,b,g){function f(a,d){if(null===R)throw Error("Async Arcade must be enabled for this script");return l("csp-restrictions")||!1===c?function(c){return R.executeScript(a,c)}:p.compileScript(a,d,!0)}function w(a,c){void 0===c&&(c=[]);return k.parseScript(a,c)}function d(a,c){if(!0===
c.useAsync||!0===a.isAsync){if(null===R)throw Error("Async Arcade must be enabled for this script");return R.executeScript(a,c)}return q.executeScript(a,c)}function y(a,c){return q.referencesMember(a,c)}function x(a,c){void 0===c&&(c=[]);void 0===a.usesGeometry&&r.findScriptDependencies(a,c);return!0===a.usesGeometry}function B(){return X?X:X=b.create(function(a,c){I(["../geometry/geometryEngine","./functions/geomsync"],function(c,d){H=!0;d.setGeometryEngine(c);a(!0)},function(a){c(a)})})}function L(){return null!==
K?K:K=p.enableAsyncSupport().then(function(){return b.create(function(a,c){I(["./arcadeAsyncRuntime"],function(d){try{R=d;d=0;for(var n=u;d<n.length;d++){var b=n[d];R.extend(b);p.extend(b,"async")}u=null;a(!0)}catch(S){c(S)}},c)})})}function aa(){return R?!0:!1}function ba(){return ia?ia:ia=L().then(function(){return b.create(function(a,c){I(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(d,n,b,g,
f){try{W=d,R.extend([n,b,g,f]),p.extend([n,b,g,f],"async"),v=!0,a(!0)}catch(Q){c(Q)}},c)})})}function C(a,c){void 0===c&&(c=[]);void 0===a.usesFeatureSet&&r.findScriptDependencies(a,c);return!0===a.usesFeatureSet}function a(a,c){if(c)for(var d=0;d<c.length;d++)if(y(a,c[d]))return!0;return!1}function n(){return null!==fa?fa:fa=g.loadMoment().then(function(a){m.MomentLibrary.Moment=a;return!0})}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){if(l("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(na){return!1}}(),
v=!1,H=!1,R=null,u=[];e.compileScript=function(a,c){return!0===c.useAsync||!0===a.isAsync?f(a,c):l("csp-restrictions")?function(c){return q.executeScript(a,c)}:p.compileScript(a,c)};e.extend=function(a){q.extend(a);p.extend(a,"sync");null===R?u.push(a):(p.extend(a,"async"),R.extend(a))};e.parseScript=w;e.validateScript=function(a,c,d){void 0===d&&(d="");return k.validateScript(a,c,d)};e.scriptCheck=function(a,c,d,n){void 0===n&&(n="");return k.scriptCheck(a,c,d,n)};e.parseAndExecuteScript=function(a,
c,n){void 0===n&&(n=[]);a=k.parseScript(a,n);return d(a,c)};e.executeScript=d;e.referencesMember=y;e.referencesFunction=function(a,c){return q.referencesFunction(a,c)};e.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return k.extractFieldLiterals(a,c)};e.scriptUsesGeometryEngine=x;var X=null;e.enableGeometrySupport=B;var K=null;e.enableAsyncSupport=L;e.isFeatureSetSupportEnabled=function(){return v};e.isAsyncEnabled=aa;e.isGeometryEnabled=function(){return H};var ia=null;e.enableFeatureSetSupport=
ba;e.scriptUsesFeatureSet=C;e.scriptIsAsync=function(a,c){void 0===c&&(c=[]);void 0===a.isAsync&&r.findScriptDependencies(a,c);return!0===a.isAsync};e.loadScriptDependencies=function(c,d,g,f){void 0===g&&(g=[]);void 0===f&&(f=!1);return b.create(function(l,k){var y="string"===typeof c?w(c):c,m=[];m.push(n());y&&(!1===H&&(x(y)||f)&&m.push(B()),!1===aa()&&(!0===y.isAsync||d)&&m.push(L()),!1===v&&(C(y)||a(y,g))&&m.push(ba()));m?b.all(m).then(function(){l(!0)},k):l(!0)})};e.scriptTouchesGeometry=function(a){if(x(a))return!0;
a=r.findFunctionCalls(a,!0);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var W=null;e.featureSetUtils=function(){return W};e.load=n;var fa=null})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(I,e,p,q,m,k,r,l,b,g,f,w,d,y,x,B,L,aa,ba,C,a,n,c,v){function H(a,c,h){try{return h(a,null,c)}catch(la){throw la;}}function R(a){return a instanceof Error?L.reject(a):L.reject(Error(a))}function u(a,c){try{switch(c.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return fa(a,c);case "VariableDeclaration":for(var d=[],n=0;n<c.declarations.length;n++)d.push(u(a,c.declarations[n]));return d.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return W(a,
c);case "FunctionDeclaration":var b=c.id.name.toLowerCase(),f={isAsync:a.isAsync,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<f.depthCounter)throw Error("Exceeded maximum function depth");for(var d="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
ha=0;ha<c.params.length;ha++){var l=c.params[ha].name.toLowerCase(),V=ga(l,a);f.localScope._SymbolsMap[l]=V;f.mangleMap[l]=V;d+="lscope['"+V+"']\x3darguments["+ha.toString()+"];\n"}!0===a.isAsync?(d=d+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(W(f,c.body)+"\n return lastStatement; "),d+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(d+=W(f,c.body)+"\n return lastStatement; }, runtimeCtx))",d+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[b]?
n="gscope['"+b+"']\x3d"+d:void 0!==a.globalScope._SymbolsMap[b]?n="gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+d:(V=ga(b,a),a.globalScope._SymbolsMap[b]=V,a.mangleMap[b]=V,n="gscope['"+V+"']\x3d"+d);return n;case "ReturnStatement":var k;k=null===c.argument?"return lc.voidOperation":"return "+u(a,c.argument)+"";return k;case "IfStatement":if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(g.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var xa=u(a,c.test),Y=h(a),Aa="var "+Y+" \x3d "+xa+";\n if ("+Y+" \x3d\x3d\x3d true) {\n"+ia(a,c.consequent)+"\n }\n",Aa=null!==c.alternate?Aa+("else if ("+Y+"\x3d\x3d\x3dfalse)   { \n"+ia(a,c.alternate)+"}\n"):Aa+("else if ("+Y+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Aa+="else { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var w;w="AssignmentExpression"===c.expression.type?"lastStatement \x3d lc.voidOperation; "+
u(a,c.expression)+"; \n ":"lastStatement \x3d "+u(a,c.expression)+"; ";return w;case "AssignmentExpression":return K(a,c);case "UpdateExpression":return X(a,c);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":d="lastStatement \x3d lc.voidOperation; \n";null!==c.init&&(d+=u(a,c.init)+"; ");var y=h(a),m=h(a),d=d+("var "+y+" \x3d true; ")+"\n do { ";null!==c.update&&(d+=" if ("+y+"\x3d\x3d\x3dfalse) {\n "+u(a,c.update)+"  \n}\n "+y+"\x3dfalse; \n");null!==
c.test&&(d+="var "+m+" \x3d "+u(a,c.test)+"; ",d+="if ("+m+"\x3d\x3d\x3dfalse) { break; } else if ("+m+"!\x3d\x3dtrue) { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");d+=u(a,c.body);null!==c.update&&(d+="\n "+u(a,c.update));return d+("\n"+y+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var ja=h(a),e=h(a),v=h(a),x="var "+ja+" \x3d "+u(a,c.right)+";\n";"VariableDeclaration"===c.left.type&&(x+=u(a,c.left));var r=
"VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name,r=r.toLowerCase(),d="";null!==a.localScope&&(void 0!==a.localScope[r]?d="lscope['"+r+"']":void 0!==a.localScope._SymbolsMap[r]&&(d="lscope['"+a.localScope._SymbolsMap[r]+"']"));""===d&&(void 0!==a.globalScope[r]?d="gscope['"+r+"']":void 0!==a.globalScope._SymbolsMap[r]&&(d="gscope['"+a.globalScope._SymbolsMap[r]+"']"));x=x+("if ("+ja+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
ja+") || lc.isString("+ja+")) {")+("var "+e+"\x3d"+ja+".length; \n")+("for(var "+v+"\x3d0; "+v+"\x3c"+e+"; "+v+"++) {\n");x+=d+"\x3d"+v+";\n";x+=u(a,c.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (lc.isImmutableArray("+ja+")) {";x=x+("var "+e+"\x3d"+ja+".length(); \n")+("for(var "+v+"\x3d0; "+v+"\x3c"+e+"; "+v+"++) {\n");x+=d+"\x3d"+v+";\n";x+=u(a,c.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (( "+ja+" instanceof lang.Dictionary) || ( "+
ja+" instanceof lang.Feature)) {";x=x+("var "+e+"\x3d"+ja+".keys(); \n")+("for(var "+v+"\x3d0; "+v+"\x3c"+e+".length; "+v+"++) {\n");x+=d+"\x3d"+e+"["+v+"];\n";x+=u(a,c.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";a.isAsync&&(x+="else if (lc.isFeatureSet("+ja+")) {",x=x+("var "+e+"\x3d"+ja+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+v+"\x3dlang. graphicToFeature( yield "+e+".next(),"+ja+"); "+v+"!\x3dnull; "+v+"\x3dlang. graphicToFeature( yield "+e+".next(),"+
ja+")) {\n")+(d+"\x3d"+v+";\n"),x+=u(a,c.body),x+="\n}\n",x+=" lastStatement \x3d lc.voidOperation; \n",x+=" \n}\n");return x+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return G(a,c);case "MemberExpression":var wa;try{d=void 0,d=!0===c.computed?u(a,c.property):"'"+c.property.name+"'",wa="lang.member("+u(a,c.object)+","+d+")"}catch(F){throw F;}return wa;case "Literal":return null===c.value||void 0===c.value?"null":JSON.stringify(c.value);case "ThisExpression":throw Error(g.nodeErrorMessage(c,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==c.callee.type)throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));var B=c.callee.name.toLowerCase(),n="";null!==a.localScope&&(void 0!==a.localScope[B]?n="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(n="lscope['"+a.localScope._SymbolsMap[B]+"']"));""===n&&(void 0!==a.globalScope[B]?n="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(n="gscope['"+a.globalScope._SymbolsMap[B]+"']"));if(""!==n){b=
"[";for(f=0;f<c.arguments.length;f++)0<f&&(b+=", "),b+=u(a,c.arguments[f]);b+="]";d=a.isAsync?"(yield lang.callfunc("+n+","+b+",runtimeCtx) )":"lang.callfunc("+n+","+b+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(F){throw F;}return d;case "UnaryExpression":var q;try{q="lang.unary("+u(a,c.argument)+",'"+c.operator+"')"}catch(F){throw F;}return q;case "BinaryExpression":var sa;try{sa="lang.binary("+u(a,c.left)+","+u(a,c.right)+",'"+c.operator+"')"}catch(F){throw F;
}return sa;case "LogicalExpression":var C;try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(g.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(g.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===c.operator||"||"===c.operator)C="(lang.logicalCheck("+u(a,c.left)+") "+c.operator+" lang.logicalCheck("+u(a,c.right)+
"))";else throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}catch(F){throw F;}return C;case "ConditionalExpression":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{d=[];for(n=0;n<c.elements.length;n++)"Literal"===c.elements[n].type?d.push(u(a,c.elements[n])):d.push("lang.aCheck("+u(a,c.elements[n])+",'ArrayExpression')");ha="["+d.join(",")+"]"}catch(F){throw F;}return ha;case "ObjectExpression":d="lang.dictionary([";for(n=0;n<c.properties.length;n++){var p=
c.properties[n],ma="Identifier"===p.key.type?"'"+p.key.name+"'":u(a,p.key),da=u(a,p.value);0<n&&(d+=",");d+="lang.strCheck("+ma+",'ObjectExpression'),lang.aCheck("+da+", 'ObjectExpression')"}return d+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(F){throw F;}}function X(a,c){var d=null,h="";if("MemberExpression"===c.argument.type)return d=u(a,
c.argument.object),h=!0===c.argument.computed?u(a,c.argument.property):"'"+c.argument.property.name+"'","lang.memberupdate("+d+","+h+",'"+c.operator+"',"+c.prefix+")";d=c.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lang.update(lscope, '"+d+"','"+c.operator+"',"+c.prefix+")";if(void 0!==a.localScope._SymbolsMap[d])return"lang.update(lscope, '"+a.localScope._SymbolsMap[d]+"','"+c.operator+"',"+c.prefix+")"}if(void 0!==a.globalScope[d])return"lang.update(gscope, '"+
d+"','"+c.operator+"',"+c.prefix+")";if(void 0!==a.globalScope._SymbolsMap[d])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[d]+"','"+c.operator+"',"+c.prefix+")";throw Error("Variable not recognised");}function K(a,c){var d=u(a,c.right),h=null,n="";if("MemberExpression"===c.left.type)return h=u(a,c.left.object),n=!0===c.left.computed?u(a,c.left.property):"'"+c.left.property.name+"'","lang.assignmember("+h+","+n+",'"+c.operator+"',"+d+")";h=c.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==
a.localScope[h])return"lscope['"+h+"']\x3dlang.assign("+d+",'"+c.operator+"', lscope['"+h+"'])";if(void 0!==a.localScope._SymbolsMap[h])return"lscope['"+a.localScope._SymbolsMap[h]+"']\x3dlang.assign("+d+",'"+c.operator+"', lscope['"+a.localScope._SymbolsMap[h]+"'])"}if(void 0!==a.globalScope[h])return"gscope['"+h+"']\x3dlang.assign("+d+",'"+c.operator+"', gscope['"+h+"'])";if(void 0!==a.globalScope._SymbolsMap[h])return"gscope['"+a.globalScope._SymbolsMap[h]+"']\x3dlang.assign("+d+",'"+c.operator+
"', gscope['"+a.globalScope._SymbolsMap[h]+"'])";throw Error("Variable not recognised");}function ia(a,c){return"BlockStatement"===c.type?u(a,c):"ReturnStatement"===c.type||"BreakStatement"===c.type||"ContinueStatement"===c.type?u(a,c)+"; ":"UpdateExpression"===c.type?"lastStatement \x3d "+u(a,c)+"; ":"ExpressionStatement"===c.type?u(a,c):"ObjectExpression"===c.type?"lastStatement \x3d "+u(a,c)+"; ":u(a,c)+"; "}function W(a,c){for(var d="",h=0;h<c.body.length;h++)d="ReturnStatement"===c.body[h].type?
d+(u(a,c.body[h])+"; \n"):"BreakStatement"===c.body[h].type?d+(u(a,c.body[h])+"; \n"):"ContinueStatement"===c.body[h].type?d+(u(a,c.body[h])+"; \n"):"UpdateExpression"===c.body[h].type?d+("lastStatement \x3d "+u(a,c.body[h])+"; \n"):"ObjectExpression"===c.body[h].type?d+("lastStatement \x3d "+u(a,c.body[h])+"; \n"):d+(u(a,c.body[h])+" \n");return d}function fa(a,c){var h=null===c.init?null:u(a,c.init);h===b.voidOperation&&(h=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+
c+"']\x3d"+h+"; ";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+h+"; ";var d=ga(c,a);a.localScope._SymbolsMap[c]=d;a.mangleMap[c]=d;return"lscope['"+d+"']\x3d"+h+"; "}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+h+"; ";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']\x3d"+h+"; ";d=ga(c,a);a.globalScope._SymbolsMap[c]=d;a.mangleMap[c]=d;return"gscope['"+d+"']\x3d"+h+"; "}function na(a,c,h){c=c.toLowerCase();
switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(h=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(h=!1),h&&(qa++,c=a.spatialReference._arcadeCacheId=qa)),a=new m({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(qa++,c=qa,a.cache._arcadeCacheId=c),a=new r(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(qa++,c=qa,a.cache._arcadeCacheId=
c),a=new r(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===c&&(qa++,c=qa,a.cache._arcadeCacheId=c),a=new l(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(h,"RUNTIME","PROPERTYNOTFOUND"));}function G(a,c){try{var h=c.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[h])return"lscope['"+
h+"']";if(void 0!==a.localScope._SymbolsMap[h])return"lscope['"+a.localScope._SymbolsMap[h]+"']"}if(void 0!==a.globalScope[h])return"gscope['"+h+"']";if(void 0!==a.globalScope._SymbolsMap[h])return"gscope['"+a.globalScope._SymbolsMap[h]+"']";throw Error(g.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(la){throw la;}}function ea(h){return null===h?"":b.isArray(h)||b.isImmutableArray(h)?"Array":b.isDate(h)?"Date":b.isString(h)?"String":b.isBoolean(h)?"Boolean":b.isNumber(h)?"Number":h instanceof
q?"Attachment":h instanceof p?"Portal":h instanceof m?"Dictionary":h instanceof k?"Feature":h instanceof a?"Point":h instanceof n?"Polygon":h instanceof c?"Polyline":h instanceof C?"Multipoint":h instanceof aa?"Extent":b.isFunctionParameter(h)?"Function":b.isFeatureSet(h)?"FeatureSet":b.isFeatureSetCollection(h)?"FeatureSetCollection":h===b.voidOperation?"":"number"===typeof h&&isNaN(h)?"Number":"Unrecognised Type"}function M(a,c,h,d){try{if(b.equalityTest(c[h],d))return c[h+1];var n=c.length-h;return 1===
n?c[h]:2===n?null:3===n?c[h+2]:M(a,c,h+2,d)}catch(ta){throw ta;}}function ka(a,c,h,d){try{if(!0===d)return c[h+1];if(3===c.length-h)return c[h+2];var n=c[h+2];if(!1===b.isBoolean(n))throw Error("WHEN needs boolean test conditions");return ka(a,c,h+2,n)}catch(ta){throw ta;}}function S(a,c){var h=a.length,d=Math.floor(h/2);if(0===h)return[];if(1===h)return[a[0]];var n=S(a.slice(0,d),c);a=S(a.slice(d,h),c);for(h=[];0<n.length||0<a.length;)0<n.length&&0<a.length?(d=c(n[0],a[0]),isNaN(d)&&(d=0),0>=d?(h.push(n[0]),
n=n.slice(1)):(h.push(a[0]),a=a.slice(1))):0<n.length?(h.push(n[0]),n=n.slice(1)):0<a.length&&(h.push(a[0]),a=a.slice(1));return h}function A(a,c){try{var h=a.length,d=Math.floor(h/2);if(0===h)return L.resolve([]);if(1===h)return L.resolve([a[0]]);var n=[A(a.slice(0,d),c),A(a.slice(d,h),c)];return L.all(n).then(function(a){return Q(a[0],a[1],c,[])})}catch(ta){return L.reject(ta)}}function Q(a,c,h,d){return L.create(function(n,b){0<a.length||0<c.length?0<a.length&&0<c.length?h(a[0],c[0]).then(function(f){try{isNaN(f)&&
(f=1),0>=f?(d.push(a[0]),a=a.slice(1)):(d.push(c[0]),c=c.slice(1)),Q(a,c,h,d).then(function(a){n(a)},b)}catch(Ea){b(Ea)}},b):0<a.length?(d.push(a[0]),a=a.slice(1),Q(a,c,h,d).then(function(a){n(a)},b)):0<c.length&&(d.push(c[0]),c=c.slice(1),Q(a,c,h,d).then(function(a){n(a)},b)):n(d)})}function ga(a,c){c.symbols.symbolCounter++;return"_T"+c.symbols.symbolCounter.toString()}function h(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function ha(a,c,h){var d={};a||(a={});
h||(h={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var n in c)d[n]=1;for(n in h)d[n]=1;for(n in a)d[n]=1;return d}function ja(a,c){for(var h={mode:c,compiled:!0,functions:{},signatures:[],failDefferred:R,standardFunction:H,standardFunctionAsync:H,evaluateIdentifier:ma},d=0;d<a.length;d++)a[d].registerFunctions(h);if("sync"===c){for(var n in h.functions)U[n]=new b.NativeFunction(h.functions[n]),wa.prototype[n]=U[n];for(d=0;d<h.signatures.length;d++)g.addFunctionDeclaration(h.signatures[d],
"sync")}else{for(n in h.functions)V[n]=new b.NativeFunction(h.functions[n]),oa.prototype[n]=V[n];for(d=0;d<h.signatures.length;d++)g.addFunctionDeclaration(h.signatures[d],"async")}}function ma(a,c){c=c.name;if("_SymbolsMap"===c)throw"Illegal";if(0<a.localStack.length){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c];var h=a.mangleMap[c];if(void 0!==h&&void 0!==a.localStack[a.localStack.length-1][h])return a.localStack[a.localStack.length-
1][h]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.globalScope[c]||1===a.globalScope._SymbolsMap[c])return a.globalScope[c];c=a.mangleMap[c];if(void 0!==c)return a.globalScope[c]}function da(a){console.log(a)}Object.defineProperty(e,"__esModule",{value:!0});var qa=0,U={};f.registerFunctions(U,H);B.registerFunctions(U,H);y.registerFunctions(U,H);w.registerFunctions(U,H);x.registerFunctions(U,H);U["typeof"]=function(a,c){return H(a,c,function(a,c,h){b.pcCheck(h,1,1);a=ea(h[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};U.iif=function(a,c){try{return H(a,c,function(a,c,h){b.pcCheck(h,3,3);if(!1===b.isBoolean(h[0]))throw Error("IF Function must have a boolean test condition");return h[0]?h[1]:h[2]})}catch(va){throw va;}};U.decode=function(a,c){try{return H(a,c,function(c,h,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");return M(a,d,1,d[0])})}catch(va){throw va;}};U.when=
function(a,c){try{return H(a,c,function(c,h,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");c=d[0];if(!1===b.isBoolean(c))throw Error("WHEN needs boolean test conditions");return ka(a,d,0,c)})}catch(va){throw va;}};U.top=function(a,c){return H(a,c,function(a,c,h){b.pcCheck(h,2,2);if(b.isArray(h[0]))return b.toNumber(h[1])>=h[0].length?h[0].slice(0):h[0].slice(0,b.toNumber(h[1]));if(b.isImmutableArray(h[0]))return b.toNumber(h[1])>=
h[0].length()?h[0].slice(0):h[0].slice(0,b.toNumber(h[1]));throw Error("Top cannot accept this parameter type");})};U.first=function(a,c){return H(a,c,function(a,c,h){b.pcCheck(h,1,1);return b.isArray(h[0])?0===h[0].length?null:h[0][0]:b.isImmutableArray(h[0])?0===h[0].length()?null:h[0].get(0):null})};U.sort=function(a,c){return H(a,c,function(c,h,d){b.pcCheck(d,1,2);h=d[0];b.isImmutableArray(h)&&(h=h.toArray());if(!1===b.isArray(h))throw Error("Illegal Argument");if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");
var n=function(a,h){return ra.callfunc(d[1],[a,h],c)};return a.isAsync?A(h,n):h=S(h,function(a,c){return n(a,c)})}if(0===h.length)return[];for(var f={},g=0;g<h.length;g++){var ha=ea(h[g]);""!==ha&&(f[ha]=!0)}if(!0===f.Array||!0===f.Dictionary||!0===f.Feature||!0===f.Point||!0===f.Polygon||!0===f.Polyline||!0===f.Multipoint||!0===f.Extent||!0===f.Function)return h.slice(0);var g=0,ha="",V;for(V in f)g++,ha=V;return h=1<g||"String"===ha?S(h,function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===
c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return a<c?-1:a===c?0:1}):"Number"===ha?S(h,function(a,c){return a-c}):"Boolean"===ha?S(h,function(a,c){return a===c?0:c?-1:1}):"Date"===ha?S(h,function(a,c){return c-a}):h.slice(0)})};var V={},Y;for(Y in U)V[Y]=new b.NativeFunction(U[Y]);d.registerFunctions(U,H);for(Y in U)U[Y]=new b.NativeFunction(U[Y]);var wa=function(){};wa.prototype=U;var oa=function(){};oa.prototype=V;
e.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:function(a,c){for(var h=[],d=0;d<c.arguments.length;d++)h.push(u(a,c.arguments[d]));return h},standardFunction:H};e.extend=ja;e.executeScript=function(a,c){return a(c)};e.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return g.findFieldLiterals(a,c)};e.validateScript=function(a,c){return g.validateScript(a,c,"sync")};e.referencesMember=function(a,c){return g.referencesMember(a,c)};e.referencesFunction=function(a,c){return g.referencesFunction(a,
c)};var sa=0,ra={error:function(a,c,h){throw Error(g.nodeErrorMessage(a,c,h));},__awaiter:function(a,c,h,d){return L.create(function(h,n){function b(a){try{g(d.next(a))}catch(za){n(za)}}function f(a){try{g(d["throw"](a))}catch(za){n(za)}}function g(a){a.done?h(a.value):a.value&&a.value.then?a.value.then(b,f):(sa++,0===sa%100?setTimeout(function(){sa=0;b(a.value)},0):b(a.value))}g((d=d.apply(a,c||[])).next())})},functionDepthchecker:function(a,c){return function(){c.depthCounter++;c.localStack.push([]);
if(64<c.depthCounter)throw Error("Exceeded maximum function depth");var h=a.apply(this,arguments);if(L.isThenable(h))return h.then(function(a){c.depthCounter--;--c.localStack.length;return a});c.depthCounter--;--c.localStack.length;return h}},aCheck:function(a,c){if(b.isFunctionParameter(a))throw Error(g.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===b.voidOperation?null:a},Dictionary:m,Feature:k,dictionary:function(a){for(var c={},h=0;h<a.length;h+=2){if(b.isFunctionParameter(a[h+
1]))throw Error("Illegal Argument");if(!1===b.isString(a[h]))throw Error("Illegal Argument");c[a[h].toString()]=a[h+1]===b.voidOperation?null:a[h+1]}a=new m(c);a.immutable=!1;return a},strCheck:function(a,c){if(!1===b.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(b.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,argument:null},"RUNTIME",
"NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===b.isBoolean(a))throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,c,h){if(b.isBoolean(a)&&b.isBoolean(c))switch(h){case "||":return a||c;
case "\x26\x26":return a&&c}throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,c,h){switch(h){case "\x3d\x3d":return b.equalityTest(a,c);case "\x3d":return b.equalityTest(a,c);case "!\x3d":return!b.equalityTest(a,c);case "\x3c":return b.greaterThanLessThan(a,c,h);case "\x3e":return b.greaterThanLessThan(a,c,h);case "\x3c\x3d":return b.greaterThanLessThan(a,c,h);case "\x3e\x3d":return b.greaterThanLessThan(a,c,
h);case "+":return b.isString(a)||b.isString(c)?b.toString(a)+b.toString(c):b.toNumber(a)+b.toNumber(c);case "-":return b.toNumber(a)-b.toNumber(c);case "*":return b.toNumber(a)*b.toNumber(c);case "/":return b.toNumber(a)/b.toNumber(c);case "%":return b.toNumber(a)%b.toNumber(c);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression",operator:h,left:a,right:c},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,h){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(h)/
b.toNumber(a);case "*\x3d":return b.toNumber(h)*b.toNumber(a);case "-\x3d":return b.toNumber(h)-b.toNumber(a);case "+\x3d":return b.isString(h)||b.isString(a)?b.toString(h)+b.toString(a):b.toNumber(h)+b.toNumber(a);case "%\x3d":return b.toNumber(h)%b.toNumber(a);default:throw Error(g.nodeErrorMessage({type:"AssignmentExpression",operator:c,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,h,d){var n=b.toNumber(a[c]);a[c]="++"===h?n+1:n-1;return!1===d?n:"++"===h?n+1:
n-1},graphicToFeature:function(a,c){return null===a?null:k.createFromGraphicLikeObject(a.geometry,a.attributes,c)},memberupdate:function(a,c,h,d){var n;if(b.isArray(a))if(b.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");n=b.toNumber(a[c]);a[c]="++"===h?n+1:n-1}else throw Error("Invalid Parameter");else if(a instanceof m){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))n=b.toNumber(a.field(c)),a.setField(c,
"++"===h?n+1:n-1);else throw Error("Invalid Parameter");}else if(a instanceof k){if(!1===b.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))n=b.toNumber(a.field(c)),a.setField(c,"++"===h?n+1:n-1);else throw Error("Invalid Parameter");}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===d?n:"++"===h?n+1:n-1},assignmember:function(a,c,h,d){if(b.isArray(a))if(b.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");
if(c===a.length&&"\x3d"!==h)throw Error("Invalid Parameter");a[c]=this.assign(d,h,a[c])}else throw Error("Invalid Parameter");else if(a instanceof m){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(d,h,a.field(c)));else{if("\x3d"!==h)throw Error("Invalid Parameter");a.setField(c,this.assign(d,h,null))}}else if(a instanceof k){if(!1===b.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))a.setField(c,
this.assign(d,h,a.field(c)));else{if("\x3d"!==h)throw Error("Invalid Parameter");a.setField(c,this.assign(d,h,null))}}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof m||a instanceof k){if(b.isString(c))return a.field(c);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof ba){if(b.isString(c))return na(a,c,"MemberExpression");throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b.isArray(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b.isString(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b.isImmutableArray(a)&&b.isNumber(c)&&isFinite(c)&&Math.floor(c)===
c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,h){return a instanceof b.NativeFunction?a.fn(h,c):a instanceof b.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};e.compileScript=function(a,c,h){void 0===c&&(c=null);
void 0===h&&(h=!1);null===c&&(c={vars:{},customfunctions:{}});c={isAsync:h,globalScope:ha(c.vars,h?V:U,c.customfunctions),localScope:null,mangleMap:{},console:da,lrucache:c.lrucache,services:c.services,symbols:{symbolCounter:0}};a=u(c,a.body[0].body);""===a&&(a="lc.voidOperation; ");c={lc:b,lang:ra,mangles:c.mangleMap,postProcess:function(a){a instanceof b.ReturnResult&&(a=a.value);a instanceof b.ImplicitResult&&(a=a.value);a===b.voidOperation&&(a=null);if(a===b.breakResult)throw Error("Cannot return BREAK");
if(a===b.continueResult)throw Error("Cannot return CONTINUE");if(b.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,c){var h=a.spatialReference;if(null===h||void 0===h)h=new v({wkid:102100});var d=a.vars,n=a.customfunctions,b=c?new oa:new wa;d||(d={});n||(n={});var f=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});f.immutable=!1;b._SymbolsMap={textformatting:1,infinity:1,pi:1};b.textformatting=f;b.infinity=
Number.POSITIVE_INFINITY;b.pi=Math.PI;for(var g in n)b[g]=n[g],b._SymbolsMap[g]=1;for(g in d)b._SymbolsMap[g]=1,b[g]=d[g]&&"esri.Graphic"===d[g].declaredClass?k.createFromGraphic(d[g]):d[g];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:h,globalScope:b,abortSignal:void 0===a.abortSignal||null===a.abortSignal?{aborted:!1}:a.abortSignal,localScope:null,services:a.services,console:a.console?a.console:da,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context",
"spatialReference",h?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(c)};e.enableAsyncSupport=function(){return L.create(function(a,c){I(["./functions/geomasync"],function(c){ja([c],"async");a(!0)},function(a){c(a)})})}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(I,e,p,q){return function(m){function k(k){var l=m.call(this)||this;l.immutable=!1;l.setField("url",k);l.immutable=!0;return l}p(k,m);return k}(q)})},
"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(I,e,p,q,m){function k(l){var b=null;if(null!==l)if(q.isNumber(l))b=q.toNumber(l);else if(q.isBoolean(l))b=q.toBoolean(l);else if(q.isString(l))b=q.toString(l);else if(q.isDate(l))b=q.toDate(l);else if(q.isArray(l))for(var b=[],g=0;g<l.length;g++)b.push(k(l[g]));else{if(0===Object.keys(l).length)return null;b=new r;b.immutable=!1;for(var g=0,f=Object.keys(l);g<f.length;g++){var w=
f[g];b.setField(w,k(l[w]))}b.immutable=!0}return b}var r=function(){function l(b){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof l?b.attributes:void 0===b?{}:null===b?{}:b}l.prototype.field=function(b){var g=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var f in this.attributes)if(f.toLowerCase()===g)return this.attributes[f];throw Error("Field not Found");};l.prototype.setField=function(b,g){if(this.immutable)throw Error("Dictionary is Immutable");
var f=b.toLowerCase();if(void 0===this.attributes[b])for(var l in this.attributes)if(l.toLowerCase()===f){this.attributes[l]=g;return}this.attributes[b]=g};l.prototype.hasField=function(b){var g=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var f in this.attributes)if(f.toLowerCase()===g)return!0;return!1};l.prototype.keys=function(){var b=[],g;for(g in this.attributes)b.push(g);return b=b.sort()};l.prototype.castToText=function(){var b="",g;for(g in this.attributes){""!==b&&(b+=",");
var f=this.attributes[g];null==f?b+=JSON.stringify(g)+":null":q.isBoolean(f)||q.isNumber(f)||q.isString(f)?b+=JSON.stringify(g)+":"+JSON.stringify(f):f instanceof m?b+=JSON.stringify(g)+":"+q.toStringExplicit(f):f instanceof p?b+=JSON.stringify(g)+":"+q.toStringExplicit(f):f instanceof Array?b+=JSON.stringify(g)+":"+q.toStringExplicit(f):f instanceof Date?b+=JSON.stringify(g)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(b+=JSON.stringify(g)+":"+f.castToText())}return"{"+
b+"}"};l.convertObjectToArcadeDictionary=function(b){var g=new l;g.immutable=!1;for(var f in b)g.setField(f.toString(),k(b[f]));g.immutable=!0;return g};return l}();return r})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(I,e){return function(){function e(e){void 0===e&&(e=[]);this._elements=e}e.prototype.length=function(){return this._elements.length};e.prototype.get=function(e){return this._elements[e]};e.prototype.toArray=function(){for(var e=[],m=0;m<this.length();m++)e.push(this.get(m));
return e};return e}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../core/promiseUtils ../geometry/support/coordsUtils ../core/maybe".split(" "),function(I,e,p,q,m,k,r,l,b,g,f,w,d,y,x,B){function L(a,c,d){return""===c||null===c||void 0===c||c===d||c===d?a:a=a.split(c).join(d)}
function aa(a){return a instanceof A||a instanceof q||a instanceof Q}function ba(c){return C(c)||n(c)||H(c)||a(c)||null===c||c===e.voidOperation||"number"===typeof c?!0:!1}function C(a){return"string"===typeof a||a instanceof String}function a(a){return"boolean"===typeof a}function n(a){return"number"===typeof a}function c(a){return a instanceof Array}function v(a){return a instanceof m}function H(a){return a instanceof Date}function R(a,c){if(!1===isNaN(a)){if(void 0===c||null===c||""===c)return a.toString();
c=L(c,"\u2030","");c=L(c,"\u00a4","");return p.format(a,{pattern:c})}return a.toString()}function u(a,c){a=e.MomentLibrary.Moment(a);return void 0===c||null===c||""===c?a.format():a.format(X(c))}function X(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function K(a,c,d){switch(d){case "\x3e":return a>c;case "\x3c":return a<c;case "\x3e\x3d":return a>=c;case "\x3c\x3d":return a<=c}return!1}function ia(a,c){if(a===c||null===a&&c===e.voidOperation||null===c&&a===e.voidOperation)return!0;
if(H(a)&&H(c))return a.getTime()===c.getTime();if(a instanceof k||a instanceof r)return a.equalityTest(c);if(a instanceof f&&c instanceof f){var h=void 0,d=void 0,h=a.cache._arcadeCacheId,d=c.cache._arcadeCacheId;if(void 0!==h&&null!==h)return h===d}return void 0!==a&&void 0!==c&&null!==a&&null!==c&&"object"===typeof a&&"object"===typeof c&&(a._arcadeCacheId===c._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===c._underlyingGraphic&&void 0!==a._underlyingGraphic&&
null!==a._underlyingGraphic)?!0:!1}function W(h,d){if(C(h))return h;if(null===h)return"";if(n(h))return R(h,d);if(a(h))return h.toString();if(H(h))return u(h,d);if(h instanceof b)return JSON.stringify(h.toJSON());if(c(h)){d=[];for(var f=0;f<h.length;f++)d[f]=na(h[f]);return"["+d.join(",")+"]"}if(h instanceof m){d=[];for(f=0;f<h.length();f++)d[f]=na(h.get(f));return"["+d.join(",")+"]"}return null!==h&&"object"===typeof h&&void 0!==h.castToText?h.castToText():aa(h)?"object, Function":""}function fa(h,
d){if(C(h))return h;if(null===h)return"";if(n(h))return R(h,d);if(a(h))return h.toString();if(H(h))return u(h,d);if(h instanceof b)return h instanceof l?'{"xmin":'+h.xmin.toString()+',"ymin":'+h.ymin.toString()+","+(h.hasZ?'"zmin":'+h.zmin.toString()+",":"")+(h.hasM?'"mmin":'+h.mmin.toString()+",":"")+'"xmax":'+h.xmax.toString()+',"ymax":'+h.ymax.toString()+","+(h.hasZ?'"zmax":'+h.zmax.toString()+",":"")+(h.hasM?'"mmax":'+h.mmax.toString()+",":"")+'"spatialReference":'+M(h.spatialReference)+"}":M(h.toJSON(),
function(a,c){return a.key===c.key?0:"spatialReference"===a.key?1:"spatialReference"===c.key||a.key<c.key?-1:a.key>c.key?1:0});if(c(h)){d=[];for(var f=0;f<h.length;f++)d[f]=na(h[f]);return"["+d.join(",")+"]"}if(h instanceof m){d=[];for(f=0;f<h.length();f++)d[f]=na(h.get(f));return"["+d.join(",")+"]"}return null!==h&&"object"===typeof h&&void 0!==h.castToText?h.castToText():aa(h)?"object, Function":""}function na(c){return null===c?"null":a(c)||n(c)||C(c)?JSON.stringify(c):c instanceof b||c instanceof
m||c instanceof Array?fa(c):c instanceof Date?JSON.stringify(u(c,"")):null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():"null"}function G(h,d){return n(h)?h:null===h||""===h?0:H(h)?NaN:a(h)?h?1:0:c(h)||""===h||void 0===h?NaN:void 0!==d&&C(h)?(d=L(d,"\u2030",""),d=L(d,"\u00a4",""),p.parse(h,{pattern:d})):h===e.voidOperation?0:Number(h)}function ea(a,c){var h;c.fields.some(function(c){c.name===a&&(h=c.domain);return!!h});return h}function M(a,c){c||(c={});"function"===typeof c&&(c=
{cmp:c});var h="boolean"===typeof c.cycles?c.cycles:!1,d=c.cmp&&function(a){return function(c){return function(h,d){return a({key:h,value:c[h]},{key:d,value:c[d]})}}}(c.cmp),n=[];return function U(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var c,b;if(Array.isArray(a)){b="[";for(c=0;c<a.length;c++)c&&(b+=","),b+=U(a[c])||"null";return b+"]"}if(null===a)return"null";
if(-1!==n.indexOf(a)){if(h)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=n.push(a)-1,g=Object.keys(a).sort(d&&d(a));b="";for(c=0;c<g.length;c++){var l=g[c],k=U(a[l]);k&&(b&&(b+=","),b+=JSON.stringify(l)+":"+k)}n.splice(f,1);return"{"+b+"}"}}(a)}function ka(a,c){if(c instanceof f)a.push(c.hasZ?c.hasM?[c.x,c.y,c.z,c.m]:[c.x,c.y,c.z]:[c.x,c.y]);else throw Error("Invalid Argument");}Object.defineProperty(e,"__esModule",{value:!0});I=function(){return function(a){this.value=
a}}();e.ReturnResultE=I;var S=function(){return function(a){this.value=a}}();e.ImplicitResultE=S;var A=function(){return function(a){this.fn=a}}();e.NativeFunctionE=A;var Q=function(){return function(a){this.fn=a}}();e.SizzleFunctionE=Q;e.NativeFunction=A;e.ImplicitResult=S;e.ReturnResult=I;e.SizzleFunction=Q;e.voidOperation={type:"VOID"};e.breakResult={type:"BREAK"};e.continueResult={type:"CONTINUE"};e.multiReplace=L;e.isFunctionParameter=aa;e.isSimpleType=ba;e.defaultUndefined=function(a,c){return void 0===
a?c:a};e.isString=C;e.isBoolean=a;e.isNumber=n;e.isArray=c;e.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};e.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};e.isImmutableArray=v;e.isDate=H;e.pcCheck=function(a,c,d){if(a.length<c||a.length>d)throw Error("Function called with wrong number of Parameters");};e.generateUUID=function(){var a=
(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===c?d:d&3|8).toString(16)})};e.formatNumber=R;e.formatDate=u;e.standardiseDateFormat=X;e.greaterThanLessThan=function(c,d,b){if(null===c){if(null===d||d===e.voidOperation)return K(null,null,b);if(n(d))return K(0,d,b);if(C(d)||a(d))return K(0,G(d),b);if(H(d))return K(0,d.getTime(),b)}if(c===e.voidOperation){if(null===d||d===e.voidOperation)return K(null,
null,b);if(n(d))return K(0,d,b);if(C(d)||a(d))return K(0,G(d),b);if(H(d))return K(0,d.getTime(),b)}else if(n(c)){if(n(d))return K(c,d,b);if(a(d))return K(c,G(d),b);if(null===d||d===e.voidOperation)return K(c,0,b);if(C(d))return K(c,G(d),b);if(H(d))return K(c,d.getTime(),b)}else if(C(c)){if(C(d))return K(W(c),W(d),b);if(H(d))return K(G(c),d.getTime(),b);if(n(d))return K(G(c),d,b);if(null===d||d===e.voidOperation)return K(G(c),0,b);if(a(d))return K(G(c),G(d),b)}else if(H(c)){if(H(d))return K(c,d,b);
if(null===d||d===e.voidOperation)return K(c.getTime(),0,b);if(n(d))return K(c.getTime(),d,b);if(a(d)||C(d))return K(c.getTime(),G(d),b)}else if(a(c)){if(a(d))return K(c,d,b);if(n(d))return K(G(c),G(d),b);if(H(d))return K(G(c),d.getTime(),b);if(null===d||d===e.voidOperation)return K(G(c),0,b);if(C(d))return K(G(c),G(d),b)}return!ia(c,d)||"\x3c\x3d"!==b&&"\x3e\x3d"!==b?!1:!0};e.equalityTest=ia;e.toString=W;e.toNumberArray=function(a){var d=[];if(!1===c(a))return null;if(a instanceof m){for(var h=0;h<
a.length();h++)d[h]=G(a.get(h));return d}for(h=0;h<a.length;h++)d[h]=G(a[h]);return d};e.toStringExplicit=fa;e.toNumber=G;e.toDate=function(a,c){return H(a)?a:C(a)&&(a=e.MomentLibrary.Moment(a,[void 0===c||null===c||""===c?e.MomentLibrary.Moment.ISO_8601:c]),a.isValid())?a.toDate():null};e.toDateM=function(a,c){return H(a)?e.MomentLibrary.Moment(a):C(a)&&(a=e.MomentLibrary.Moment(a,[void 0===c||null===c||""===c?e.MomentLibrary.Moment.ISO_8601:c]),a.isValid())?a:null};e.toBoolean=function(c){return a(c)?
c:C(c)?(c=c.toLowerCase(),"true"===c?!0:!1):n(c)?0===c||isNaN(c)?!1:!0:!1};e.fixSpatialReference=function(a,c){if(B.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=c;return a};e.fixNullGeometry=function(a){return null===a?null:a instanceof f?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof w?0===a.rings.length?null:a:a instanceof d?0===a.paths.length?null:a:a instanceof g?0===a.points.length?null:a:a instanceof l?"NaN"===a.xmin||null===a.xmin||
isNaN(a.xmin)?null:a:null};e.getDomainValue=function(a,c){if(!a||!a.domain)return c;var d=null;c="string"===a.field.type||"esriFieldTypeString"===a.field.type?W(c):G(c);for(var h=0;h<a.domain.codedValues.length;h++){var n=a.domain.codedValues[h];n.code===c&&(d=n)}return null===d?c:d.name};e.getDomainCode=function(a,c){if(!a||!a.domain)return c;var d=null;c=W(c);for(var h=0;h<a.domain.codedValues.length;h++){var n=a.domain.codedValues[h];n.name===c&&(d=n)}return null===d?c:d.code};e.getDomain=function(a,
c,d,n){void 0===d&&(d=null);if(!c||!c.fields)return null;for(var h=null,b=0;b<c.fields.length;b++){var f=c.fields[b];f.name.toLowerCase()===a.toString().toLowerCase()&&(h=f)}if(null===h)throw Error("Field not found");var g,l;n||(n=d&&c.typeIdField&&d._field(c.typeIdField));null!=n&&c.types.some(function(a){return a.id===n?((g=a.domains&&a.domains[h.name])&&"inherited"===g.type&&(g=ea(h.name,c),l=!0),!0):!1});l||g||(g=ea(a,c));return{field:h,domain:g}};e.stableStringify=M;e.autoCastFeatureToGeometry=
function(a){if(null===a)return null;for(var c=[],d=0;d<a.length;d++){var h=a[d];h&&h.declaredClass&&"esri.arcade.Feature"===h.declaredClass?c.push(h.geometry()):c.push(h)}return c};e.autoCastArrayOfPointsToPolygon=function(a,d){if(c(a)||v(a)){var h=!1,n=!1,b=[];if(c(a)){for(var f=0;f<a.length;f++){var g=a[f];ka(b,g)}0<b.length&&(d=a[0].spatialReference,h=a[0].hasZ,n=a[0].hasM)}else if(a instanceof r)b=a._elements,0<b.length&&(h=a._hasZ,n=a._hasM,d=a.get(0).spatialReference);else if(v(a)){for(var f=
0,l=a.toArray();f<l.length;f++)g=l[f],ka(b,g);0<b.length&&(d=a.get(0).spatialReference,h=!0===a.get(0).hasZ,n=!0===a.get(0).hasM)}else throw Error("Invalid Argument");if(0===b.length)return null;!1===x.isClockwise(b,n,h)&&(b=b.slice(0).reverse());return new w({rings:[b],spatialReference:d,hasZ:h,hasM:n})}return a};e.autoCastArrayOfPointsToPolyline=function(a,n){if(c(a)||v(a)){var h=!1,b=!1,f=[];if(c(a)){for(var g=0;g<a.length;g++){var l=a[g];ka(f,l)}0<f.length&&(n=a[0].spatialReference,h=!0===a[0].hasZ,
b=!0===a[0].hasM)}else if(a instanceof r)f=a._elements,0<f.length&&(h=a._hasZ,b=a._hasM,n=a.get(0).spatialReference);else if(v(a)){for(var g=0,k=a.toArray();g<k.length;g++)l=k[g],ka(f,l);0<f.length&&(n=a.get(0).spatialReference,h=!0===a.get(0).hasZ,b=!0===a.get(0).hasM)}return 0===f.length?null:new d({paths:[f],spatialReference:n,hasZ:h,hasM:b})}return a};e.autoCastArrayOfPointsToMultiPoint=function(a,d){if(c(a)||v(a)){var n=!1,h=!1,b=[];if(c(a)){for(var f=0;f<a.length;f++){var l=a[f];ka(b,l)}0<b.length&&
(d=a[0].spatialReference,n=!0===a[0].hasZ,h=!0===a[0].hasM)}else if(a instanceof r)b=a._elements,0<b.length&&(n=a._hasZ,h=a._hasM,d=a.get(0).spatialReference);else if(v(a)){for(var f=0,k=a.toArray();f<k.length;f++)l=k[f],ka(b,l);0<b.length&&(d=a.get(0).spatialReference,n=!0===a.get(0).hasZ,h=!0===a.get(0).hasM)}return 0===b.length?null:new g({points:b,spatialReference:d,hasZ:n,hasM:h})}return a};e.toStringArray=function(a,d){void 0===d&&(d=!1);var n=[];if(null===a)return n;if(!0===c(a)){for(var h=
0;h<a.length;h++){var b=W(a[h]);""===b&&!0!==d||n.push(b)}return n}if(a instanceof m){for(h=0;h<a.length();h++)b=W(a.get(h)),""===b&&!0!==d||n.push(b);return n}return ba(a)?(b=W(a),""===b&&!0!==d||n.push(b),n):[]};var ga=0;e.tick=function(a){ga++;return 0===ga%100?(ga=0,y.create(function(c,d){setTimeout(function(){c(a)},0)})):a};e.MomentLibrary={Moment:null}})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(I,e,p,q,m){var k={};I.setObject("dojo.number",
k);k.format=function(l,b){b=I.mixin({},b||{});var g=e.normalizeLocale(b.locale),g=e.getLocalization("dojo.cldr","number",g);b.customs=g;g=b.pattern||g[(b.type||"decimal")+"Format"];return isNaN(l)||Infinity==Math.abs(l)?null:k._applyPattern(l,g,b)};k._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;k._applyPattern=function(l,b,g){g=g||{};var f=g.customs.group,w=g.customs.decimal;b=b.split(";");var d=b[0];b=b[0>l?1:0]||"-"+d;if(-1!=b.indexOf("%"))l*=100;else if(-1!=b.indexOf("\u2030"))l*=1E3;else if(-1!=b.indexOf("\u00a4"))f=
g.customs.currencyGroup||f,w=g.customs.currencyDecimal||w,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(d,b,f,l){return(d=g[["symbol","currency","displayName"][f.length-1]]||g.currency||"")?b+d+l:""});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");var y=k._numberPatternRE,d=d.match(y);if(!d)throw Error("unable to find a number expression in pattern: "+b);!1===g.fractional&&(g.places=0);return b.replace(y,k._formatAbsolute(l,d[0],{decimal:w,group:f,places:g.places,
round:g.round}))};k.round=function(l,b,g){g=10/(g||10);return(g*+l).toFixed(b)/g};if(0==(.9).toFixed()){var r=k.round;k.round=function(l,b,g){var f=Math.pow(10,-b||0),k=Math.abs(l);if(!l||k>=f)f=0;else if(k/=f,.5>k||.95<=k)f=0;return r(l,b,g)+(0<l?f:-f)}}k._formatAbsolute=function(l,b,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);b=b.split(".");var f="string"==typeof g.places&&g.places.indexOf(","),w=g.places;f?w=g.places.substring(f+1):0<=w||(w=(b[1]||[]).length);0>g.round||
(l=k.round(l,w,g.round));l=String(Math.abs(l)).split(".");var d=l[1]||"";b[1]||g.places?(f&&(g.places=g.places.substring(0,f)),f=void 0!==g.places?g.places:b[1]&&b[1].lastIndexOf("0")+1,f>d.length&&(l[1]=q.pad(d,f,"0",!0)),w<d.length&&(l[1]=d.substr(0,w))):l[1]&&l.pop();w=b[0].replace(",","");f=w.indexOf("0");-1!=f&&(f=w.length-f,f>l[0].length&&(l[0]=q.pad(l[0],f)),-1==w.indexOf("#")&&(l[0]=l[0].substr(l[0].length-f)));var w=b[0].lastIndexOf(","),y,m;-1!=w&&(y=b[0].length-w-1,b=b[0].substr(0,w),w=
b.lastIndexOf(","),-1!=w&&(m=b.length-w-1));b=[];for(w=l[0];w;)f=w.length-y,b.push(0<f?w.substr(f):w),w=0<f?w.slice(0,f):"",m&&(y=m,m=void 0);l[0]=b.reverse().join(g.group||",");return l.join(g.decimal||".")};k.regexp=function(l){return k._parseInfo(l).regexp};k._parseInfo=function(l){l=l||{};var b=e.normalizeLocale(l.locale),b=e.getLocalization("dojo.cldr","number",b),g=l.pattern||b[(l.type||"decimal")+"Format"],f=b.group,w=b.decimal,d=1;if(-1!=g.indexOf("%"))d/=100;else if(-1!=g.indexOf("\u2030"))d/=
1E3;else{var y=-1!=g.indexOf("\u00a4");y&&(f=b.currencyGroup||f,w=b.currencyDecimal||w)}b=g.split(";");1==b.length&&b.push("-"+b[0]);b=m.buildGroupRE(b,function(b){b="(?:"+m.escapeString(b,".")+")";return b.replace(k._numberPatternRE,function(b){var g={signed:!1,separator:l.strict?f:[f,""],fractional:l.fractional,decimal:w,exponent:!1};b=b.split(".");var y=l.places;1==b.length&&1!=d&&(b[1]="###");1==b.length||0===y?g.fractional=!1:(void 0===y&&(y=l.pattern?b[1].lastIndexOf("0")+1:Infinity),y&&void 0==
l.fractional&&(g.fractional=!0),!l.places&&y<b[1].length&&(y+=","+b[1].length),g.places=y);b=b[0].split(",");1<b.length&&(g.groupSize=b.pop().length,1<b.length&&(g.groupSize2=b.pop().length));return"("+k._realNumberRegexp(g)+")"})},!0);y&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(d,b,f,g){d=m.escapeString(l[["symbol","currency","displayName"][f.length-1]]||l.currency||"");if(!d)return"";b=b?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return l.strict?b+d+g:(b&&(b+="*"),g&&(g+="*"),"(?:"+
b+d+g+")?")}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:f,decimal:w,factor:d}};k.parse=function(l,b){b=k._parseInfo(b);l=(new RegExp("^"+b.regexp+"$")).exec(l);if(!l)return NaN;var g=l[1];if(!l[1]){if(!l[2])return NaN;g=l[2];b.factor*=-1}g=g.replace(new RegExp("["+b.group+"\\s\\xa0]","g"),"").replace(b.decimal,".");return g*b.factor};k._realNumberRegexp=function(l){l=l||{};"places"in l||(l.places=Infinity);"string"!=typeof l.decimal&&(l.decimal=".");"fractional"in l&&!/^0/.test(l.places)||
(l.fractional=[!0,!1]);"exponent"in l||(l.exponent=[!0,!1]);"eSigned"in l||(l.eSigned=[!0,!1]);var b=k._integerRegexp(l),g=m.buildGroupRE(l.fractional,function(b){var d="";b&&0!==l.places&&(d="\\"+l.decimal,d=Infinity==l.places?"(?:"+d+"\\d+)?":d+("\\d{"+l.places+"}"));return d},!0),f=m.buildGroupRE(l.exponent,function(b){return b?"([eE]"+k._integerRegexp({signed:l.eSigned})+")":""}),b=b+g;g&&(b="(?:(?:"+b+")|(?:"+g+"))");return b+f};k._integerRegexp=function(l){l=l||{};"signed"in l||(l.signed=[!0,
!1]);"separator"in l?"groupSize"in l||(l.groupSize=3):l.separator="";var b=m.buildGroupRE(l.signed,function(b){return b?"[-+]":""},!0),g=m.buildGroupRE(l.separator,function(b){if(!b)return"(?:\\d+)";b=m.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var f=l.groupSize,d=l.groupSize2;return d?(b="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+b+"]\\d{"+d+"})*["+b+"]\\d{"+f+"})",0<f-d?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(f-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+b+"]\\d{"+f+"})*)"},!0);return b+g};return k})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(I,e){var p=/[&<>'"\/]/g,q={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},m={};e.setObject("dojo.string",m);m.escape=function(k){return k?k.replace(p,function(k){return q[k]}):""};m.rep=function(k,m){if(0>=m||!k)return"";for(var l=[];;){m&1&&l.push(k);if(!(m>>=1))break;k+=k}return l.join("")};m.pad=function(k,e,l,b){l||(l="0");k=String(k);e=m.rep(l,Math.ceil((e-k.length)/
l.length));return b?k+e:e+k};m.substitute=function(k,m,l,b){b=b||I.global;l=l?e.hitch(b,l):function(b){return b};return k.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(g,f,k){if(""==f)return"$";g=e.getObject(f,!1,m);k&&(g=e.getObject(k,!1,b).call(b,g,f));k=l(g,f);if("undefined"===typeof k)throw Error('string.substitute could not find key "'+f+'" in template');return k.toString()})};m.trim=String.prototype.trim?e.trim:function(k){k=k.replace(/^\s+/,"");for(var m=k.length-1;0<=m;m--)if(/\S/.test(k.charAt(m))){k=
k.substring(0,m+1);break}return k};return m})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(I,e){var p={};e.setObject("dojo.regexp",p);p.escapeString=function(e,m){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(k){return m&&-1!=m.indexOf(k)?k:"\\"+k})};p.buildGroupRE=function(e,m,k){if(!(e instanceof Array))return m(e);for(var r=[],l=0;l<e.length;l++)r.push(m(e[l]));return p.group(r.join("|"),k)};p.group=function(e,m){return"("+(m?"?:":"")+e+")"};return p})},
"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(I,e){return function(){return function(e,q){this.context=this.definition=null;this.definition=e;this.context=q}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(I,e,p,q,m){return function(k){function e(l,b,g,f,e){l=k.call(this,l)||this;l._lazyPath=[];l._hasZ=!1;l._hasM=!1;l._hasZ=g;l._hasM=f;l._spRef=b;l._cacheId=
e;return l}p(e,k);e.prototype.get=function(l){if(void 0===this._lazyPath[l]){var b=this._elements[l];if(void 0===b)return;this._lazyPath[l]=new m(b,this._spRef,this._hasZ,this._hasM,this._cacheId,l)}return this._lazyPath[l]};e.prototype.equalityTest=function(l){return l===this?!0:null===l||!1===l instanceof e?!1:l.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()};return e}(q)})},"esri/arcade/ImmutablePointArray":function(){define(["require",
"exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(I,e,p,q,m){return function(k){function e(l,b,g,f,e,d){l=k.call(this,l)||this;l._lazyPt=[];l._hasZ=!1;l._hasM=!1;l._spRef=b;l._hasZ=g;l._hasM=f;l._cacheId=e;l._partId=d;return l}p(e,k);e.prototype.get=function(l){if(void 0===this._lazyPt[l]){var b=this._elements[l];if(void 0===b)return;var g=this._hasZ,f=this._hasM,k=null,k=g&&!f?new m(b[0],b[1],b[2],void 0,this._spRef):f&&g?new m(b[0],b[1],void 0,b[2],this._spRef):
g&&f?new m(b[0],b[1],b[2],b[3],this._spRef):new m(b[0],b[1],this._spRef);k.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+l.toString();this._lazyPt[l]=k}return this._lazyPt[l]};e.prototype.equalityTest=function(k){return k===this?!0:null===k||!1===k instanceof e?!1:k.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return e}(q)})},"esri/arcade/Attachment":function(){define(["require",
"exports","../core/tsSupport/extendsHelper","./Dictionary"],function(I,e,p,q){return function(e){function k(k,l,b,g,f){var m=e.call(this)||this;m.attachmentUrl=f;m.immutable=!1;m.setField("id",k);m.setField("name",l);m.setField("contenttype",b);m.setField("size",g);m.immutable=!0;return m}p(k,e);return k}(q)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),
function(I,e,p,q,m,k,r,l,b,g,f){return function(){function e(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}e.createFromGraphic=function(d){var b=new e;b._geometry=f.isSome(d.geometry)?d.geometry:null;b.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;d._sourceLayer?(b._layer=d._sourceLayer,b._datesfixed=!1):d._layer?(b._layer=
d._layer,b._datesfixed=!1):d.layer&&(b._layer=d.layer,b._datesfixed=!1);return b};e.createFromArcadeFeature=function(d){var b=new e;b._datesfixed=d._datesfixed;b.attributes=d.attributes;b._geometry=d._geometry;b._optimizedGeomDefinition=d._optimizedGeomDefinition;d._layer&&(b._layer=d._layer);return b};e.createFromOptimisedFeature=function(d,b,f){var g=new e;g._geometry=d.geometry?{geometry:d.geometry}:null;g._optimizedGeomDefinition=f;g.attributes=d.attributes||{};g._layer=b;g._datesfixed=!1;return g};
e.createFromArcadeDictionary=function(d){var b=new e;b.attributes=d.field("attributes");null!==b.attributes?b.attributes instanceof q?(b.attributes=b.attributes.attributes,null===b.attributes&&(b.attributes={})):b.attributes={}:b.attributes={};b._geometry=d.field("geometry");null!==b._geometry&&(b._geometry instanceof q?b._geometry=e.parseGeometryFromDictionary(b._geometry):b._geometry instanceof r||(b._geometry=null));return b};e.createFromGraphicLikeObject=function(d,b,g){void 0===g&&(g=null);var k=
new e;null===b&&(b={});k.attributes=b;k._geometry=f.isSome(d)?d:null;k._layer=g;k._layer&&(k._datesfixed=!1);return k};e.prototype.repurposeFromGraphicLikeObject=function(d,b,f){void 0===f&&(f=null);null===b&&(b={});this.attributes=b;this._geometry=d?d:null;this._datesfixed=(this._layer=f)?!1:!0};e.prototype.castToText=function(){var d="",b;for(b in this.attributes){""!==d&&(d+=",");var f=this.attributes[b];null==f?d+=JSON.stringify(b)+":null":k.isBoolean(f)||k.isNumber(f)||k.isString(f)?d+=JSON.stringify(b)+
":"+JSON.stringify(f):f instanceof r?d+=JSON.stringify(b)+":"+k.toStringExplicit(f):f instanceof m?d+=JSON.stringify(b)+":"+k.toStringExplicit(f):f instanceof Array?d+=JSON.stringify(b)+":"+k.toStringExplicit(f):f instanceof Date?d+=JSON.stringify(b)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(d+=JSON.stringify(b)+":"+f.castToText())}return'{"geometry":'+(null===this.geometry()?"null":k.toStringExplicit(this.geometry()))+',"attributes":{'+d+"}}"};e.prototype._fixDates=
function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var d=[],b=0;b<this._layer.fields.length;b++){var f=this._layer.fields[b];"date"!==f.type&&"esriFieldTypeDate"!==f.type||d.push(f.name)}this._datefields=d;0<d.length&&this._fixDateFields(d)}this._datesfixed=!0};e.prototype._fixDateFields=function(d){this.attributes=p({},this.attributes);for(var b=0;b<d.length;b++){var f=this.attributes[d[b]];if(null!==f)if(void 0===f)for(var g in this.attributes){if(g.toLowerCase()===
d[b].toLowerCase()){f=this.attributes[g];null===f||f instanceof Date||(this.attributes[g]=new Date(f));break}}else f instanceof Date||(this.attributes[d[b]]=new Date(f))}};e.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof r)return this._geometry;this._optimizedGeomDefinition?(this._geometry=f.unwrap(b.fromJSON(g.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=
this._optimizedGeomDefinition.spatialReference):this._geometry=f.unwrap(b.fromJSON(this._geometry));return this._geometry};e.prototype.field=function(d){!1===this._datesfixed&&this._fixDates();var b=this.attributes[d];if(void 0!==b)return b;d=d.toLowerCase();for(var f in this.attributes)if(f.toLowerCase()===d)return this.attributes[f];if(this._hasFieldDefinition(d))return null;throw Error("Field not Found");};e.prototype._hasFieldDefinition=function(d){if(null===this._layer)return!1;for(var b=0;b<
this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===d)return!0;return!1};e.prototype._field=function(d){!1===this._datesfixed&&this._fixDates();var b=d.toLowerCase();d=this.attributes[d];if(void 0!==d)return d;for(var f in this.attributes)if(f.toLowerCase()===b)return this.attributes[f];return null};e.prototype.setField=function(d,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var f=d.toLowerCase();
if(void 0===this.attributes[d])for(var g in this.attributes)if(g.toLowerCase()===f){this.attributes[g]=b;return}this.attributes[d]=b};e.prototype.hasField=function(d){var b=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var f in this.attributes)if(f.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};e.prototype.keys=function(){var d=[],b={},f;for(f in this.attributes)d.push(f),b[f.toLowerCase()]=1;if(null!==this._layer)for(f=0;f<this._layer.fields.length;f++){var g=
this._layer.fields[f];1!==b[g.name.toLowerCase()]&&d.push(g.name)}return d=d.sort()};e.parseGeometryFromDictionary=function(d){d=e.convertDictionaryToJson(d,!0);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);void 0!==d.rings&&(d.rings=this.fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasM));void 0!==d.paths&&(d.paths=this.fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));void 0!==d.points&&(d.points=this.fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return b.fromJSON(d)};
e.fixPathArrays=function(d,b,f){var g=[];if(d instanceof Array)for(var k=0;k<d.length;k++)g.push(this.fixPointArrays(d[k],b,f));else if(d instanceof m)for(k=0;k<d.length();k++)g.push(this.fixPointArrays(d.get(k),b,f));return g};e.fixPointArrays=function(d,b,f){var g=[];if(d instanceof Array)for(var k=0;k<d.length;k++){var e=d[k];e instanceof l?b&&f?g.push([e.x,e.y,e.z,e.m]):b?g.push([e.x,e.y,e.z]):f?g.push([e.x,e.y,e.m]):g.push([e.x,e.y]):e instanceof m?g.push(e.toArray()):g.push(e)}else if(d instanceof
m)for(k=0;k<d.length();k++)e=d.get(k),e instanceof l?b&&f?g.push([e.x,e.y,e.z,e.m]):b?g.push([e.x,e.y,e.z]):f?g.push([e.x,e.y,e.m]):g.push([e.x,e.y]):e instanceof m?g.push(e.toArray()):g.push(e);return g};e.convertDictionaryToJson=function(d,b){void 0===b&&(b=!1);var f={},g;for(g in d.attributes){var k=d.attributes[g];k instanceof q&&(k=e.convertDictionaryToJson(k));b?f[g.toLowerCase()]=k:f[g]=k}return f};e.parseAttributesFromDictionary=function(d){var b={},f;for(f in d.attributes){var g=d.attributes[f];
if(k.isSimpleType(g))b[f]=g;else throw Error("Illegal Argument");}return b};e.fromJson=function(d){var f=null;null!==d.geometry&&void 0!==d.geometry&&(f=b.fromJSON(d.geometry));var g={};if(null!==d.attributes&&void 0!==d.attributes)for(var l in d.attributes){var m=d.attributes[l];if(null===m)g[l]=m;else if(k.isString(m)||k.isNumber(m)||k.isBoolean(m)||k.isDate(m))g[l]=m;else throw Error("Illegal Argument");}return e.createFromGraphicLikeObject(f,g,null)};e.prototype.domainValueLookup=function(d,b,
f){if(null===this._layer||!this._layer.fields)return null;f=k.getDomain(d,this._layer,this,f);if(void 0===b)try{b=this.field(d)}catch(B){return null}return k.getDomainValue(f,b)};e.prototype.domainCodeLookup=function(d,b,f){if(null===this._layer||!this._layer.fields)return null;if(void 0===b){try{b=this.field(d)}catch(B){return null}return b}d=k.getDomain(d,this._layer,this,f);return k.getDomainCode(d,b)};return e}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(I,e,p,q,m,k,r,l){function b(a,c){return a?c?4:3:c?3:2}function g(a,c){return Math.round((c-a.translate[0])/a.scale[0])}function f(a,c){return Math.round((a.translate[1]-c)/a.scale[1])}function w(a,c){return c*a.scale[0]+a.translate[0]}function d(a,c){return a.translate[1]-c*a.scale[1]}function y(a){a=a.coords;return{x:a[0],y:a[1]}}function x(a,c){a.coords[0]=c.x;a.coords[1]=c.y;return a}function B(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function L(a,c){a.coords[0]=c.x;a.coords[1]=c.y;
a.coords[2]=c.z;return a}function aa(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function ba(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.m;return a}function C(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function a(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.z;a.coords[3]=c.m;return a}function n(c,d){return c&&d?a:c?L:d?ba:x}function c(a,c,d){if(!a)return null;for(var n=b(c,d),f=[],g=0;g<a.coords.length;g+=n){for(var h=[],k=0;k<n;k++)h.push(a.coords[g+k]);f.push(h)}return c?d?{points:f,
hasZ:c,hasM:d}:{points:f,hasZ:c}:d?{points:f,hasM:d}:{points:f}}function v(a,c,d){void 0===d&&(d=b(c.hasZ,c.hasM));a.lengths[0]=c.points.length;var n=a.coords,f=0,g=0;for(c=c.points;g<c.length;g++)for(var h=c[g],k=0;k<d;k++)n[f++]=h[k];return a}function H(a,c,d){if(!a)return null;var n=b(c,d),f=a.coords,g=[],h=0,k=0;for(a=a.lengths;k<a.length;k++){for(var l=a[k],e=[],m=0;m<l;m++){for(var v=[],w=0;w<n;w++)v.push(f[h++]);e.push(v)}g.push(e)}return c?d?{paths:g,hasZ:c,hasM:d}:{paths:g,hasZ:c}:d?{paths:g,
hasM:d}:{paths:g}}function R(a,c,d){void 0===d&&(d=b(c.hasZ,c.hasM));var n=a.lengths,f=a.coords,g=0,h=0;for(c=c.paths;h<c.length;h++){for(var k=c[h],l=0,e=k;l<e.length;l++)for(var m=e[l],v=0;v<d;v++)f[g++]=m[v];n.push(k.length)}return a}function u(a,c,d){if(!a)return null;var n=b(c,d),f=a.coords,g=[],h=0,k=0;for(a=a.lengths;k<a.length;k++){for(var l=a[k],e=[],m=0;m<l;m++){for(var v=[],w=0;w<n;w++)v.push(f[h++]);e.push(v)}g.push(e)}return c?d?{rings:g,hasZ:c,hasM:d}:{rings:g,hasZ:c}:d?{rings:g,hasM:d}:
{rings:g}}function X(a,c,d,b){void 0===d&&(d=c.hasZ);void 0===b&&(b=c.hasM);K(a,c.rings,d,b);return a}function K(a,c,d,n){d=b(d,n);n=a.lengths;for(var f=a.coords,g=0,h=n.length=f.length=0;h<c.length;h++){for(var k=c[h],l=0,e=k;l<e.length;l++)for(var m=e[l],v=0;v<d;v++)f[g++]=m[v];n.push(k.length)}return a}function ia(a,c,d,f,g,e){a.length=0;if(!d){for(f=0;f<c.length;f++)g=c[f],a.push(new k.default(null,g.attributes,null,g.attributes[e]));return a}switch(d){case "esriGeometryPoint":f=n(f,g);for(g=
0;g<c.length;g++){var h=c[g];d=h.geometry;var h=h.attributes,V=void 0;d&&(V=f(new l.default,d));a.push(new k.default(V,h,null,h[e]))}break;case "esriGeometryMultipoint":f=b(f,g);for(g=0;g<c.length;g++)h=c[g],d=h.geometry,h=h.attributes,V=void 0,d&&(V=v(new l.default,d,f)),a.push(new k.default(V,h,null,h[e]));break;case "esriGeometryPolyline":f=b(f,g);for(g=0;g<c.length;g++)h=c[g],d=h.geometry,h=h.attributes,V=void 0,d&&(V=R(new l.default,d,f)),a.push(new k.default(V,h,null,h[e]));break;case "esriGeometryPolygon":for(d=
0;d<c.length;d++){var Y=c[d],h=Y.geometry,V=Y.centroid,Y=Y.attributes,m=void 0;h&&(m=X(new l.default,h,f,g));V?a.push(new k.default(m,Y,x(new l.default,V),Y[e])):a.push(new k.default(m,Y,null,Y[e]))}break;default:ea.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function W(a,d,b,n,f){a.length=0;switch(b){case "esriGeometryPoint":b=y;n&&f?b=C:n?b=B:f&&(b=aa);for(n=0;n<d.length;n++){var g=d[n];f=g.geometry;g=g.attributes;f=f?
b(f):null;a.push({attributes:g,geometry:f})}break;case "esriGeometryMultipoint":for(b=0;b<d.length;b++){var h=d[b],g=h.geometry,h=h.attributes,k=void 0;g&&(k=c(g,n,f));a.push({attributes:h,geometry:k})}break;case "esriGeometryPolyline":for(b=0;b<d.length;b++)h=d[b],g=h.geometry,h=h.attributes,k=void 0,g&&(k=H(g,n,f)),a.push({attributes:h,geometry:k});break;case "esriGeometryPolygon":for(b=0;b<d.length;b++){var k=d[b],h=k.geometry,g=k.attributes,l=k.centroid,k=void 0;h&&(k=u(h,n,f));l?(h=y(l),a.push({attributes:g,
centroid:h,geometry:k})):a.push({attributes:g,geometry:k})}break;default:ea.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+b+"'"))}return a}function fa(a,c,d,n,k,l){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;k=M[k];var h=c.coords;c=c.lengths;var e=b(d,n);d=d?n?A:S:n?S:ka;if(!c.length)return d(a.coords,h,0,0,g(l,h[0]),f(l,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=e,
a;for(var Y,m,v,w=0,C,r=0,y=0;y<c.length;y++){var q=c[y];if(!(q<k)){var p=0;C=r;m=n=g(l,h[w]);v=Y=f(l,h[w+1]);d(a.coords,h,C,w,m,v);p++;w+=e;C+=e;for(var x=1;x<q;x++,w+=e)if(m=g(l,h[w]),v=f(l,h[w+1]),m!==n||v!==Y)d(a.coords,h,C,w,m-n,v-Y),C+=e,p++,n=m,Y=v;p>=k&&(a.lengths.push(p),r=C)}}a.coords.length=r;return a.coords.length?a:null}function na(a,c,d,b,n,f,g){for(var h=g-d,k=0,l=0,e,m=f+d;m<g-d;m+=d){e=c[m];var v=c[m+1],w=c[f],C=c[f+1],r=c[h],y=c[h+1];w===r?e=Math.abs(e-w):(r=(y-C)/(r-w),e=Math.abs(r*
e-v+(C-r*w))/Math.sqrt(r*r+1));e>k&&(l=m,k=e)}k>b?(na(a,c,d,b,n,f,l+d),na(a,c,d,b,n,l,g)):(n(a,c,a.length,f,c[f],c[f+1]),n(a,c,a.length,h,c[h],c[h+1]))}function G(a,c,n,f,g){var h=c.coords,k=c.lengths,l=n?f?A:S:f?S:ka;n=b(n,f);if(!h.length)return a!==c&&(a.lengths.length=0,a.coords.length=0),a;if(!k.length)return l(a.coords,h,0,0,w(g,h[0]),d(g,h[1])),a!==c&&(a.lengths.length=0,a.coords.length=n),a;var e=g.scale;f=e[0];for(var e=e[1],m=0,v=0;v<k.length;v++){var r=k[v];a.lengths[v]=r;var C=w(g,h[m]),
y=d(g,h[m+1]);l(a.coords,h,m,m,C,y);for(var m=m+n,q=1;q<r;q++,m+=n)C+=h[m]*f,y-=h[m+1]*e,l(a.coords,h,m,m,C,y)}a!==c&&(a.lengths.length=k.length,a.coords.length=h.length);return a}Object.defineProperty(e,"__esModule",{value:!0});var ea=q.getLogger("esri.tasks.support.optimizedFeatureSet"),M={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ka=function(a,c,d,b,n,f){a[d]=n;a[d+1]=f},S=function(a,c,d,b,n,f){a[d]=n;a[d+1]=f;a[d+2]=c[b+2]},A=function(a,c,d,b,n,
f){a[d]=n;a[d+1]=f;a[d+2]=c[b+2];a[d+3]=c[b+3]};e.quantizeX=g;e.quantizeY=f;e.hydrateX=w;e.hydrateY=d;e.convertToPoint=function(a,c,d){return a?c?d?C(a):B(a):d?aa(a):y(a):null};e.convertFromPoint=function(a,c,d){void 0===d&&(d=n(null!=c.z,null!=c.m));return d(a,c)};e.convertToMultipoint=c;e.convertFromMultipoint=v;e.convertToPolyline=H;e.convertFromPolyline=R;e.convertToPolygon=u;e.convertFromPolygon=X;e.convertFromNestedArray=K;var Q=[],ga=[];e.convertFromFeature=function(a,c,d,b,n){Q[0]=a;a=ia(ga,
Q,c,d,b,n)[0];Q.length=ga.length=0;return a};e.convertFromFeatures=ia;e.convertToFeature=function(a,c,d,b){ga[0]=a;W(Q,ga,c,d,b);a=Q[0];Q.length=ga.length=0;return a};e.convertFromGeometry=function(a,c,d){if(!a)return null;var f=new l.default;"hasZ"in a&&null==c&&(c=a.hasZ);"hasM"in a&&null==d&&(d=a.hasM);if(m.isPoint(a))return n(null!=c?c:null!=a.z,null!=d?d:null!=a.m)(f,a);if(m.isPolygon(a))return X(f,a,c,d);if(m.isPolyline(a))return R(f,a,b(c,d));if(m.isMultipoint(a))return v(f,a,b(c,d));ea.error("convertFromGeometry:unknown-geometry",
new p("Unable to parse unknown geometry type '"+a+"'"))};e.convertToGeometry=function(a,d,b,n){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(d){case "esriGeometryPoint":return d=y,b&&n?d=C:b?d=B:n&&(d=aa),d(a);case "esriGeometryMultipoint":return c(a,b,n);case "esriGeometryPolyline":return H(a,b,n);case "esriGeometryPolygon":return u(a,b,n);default:ea.error("convertToGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+d+"'"))}};e.convertToFeatures=W;e.convertToFeatureSet=
function(a){var c=a.objectIdFieldName,d=a.spatialReference,b=a.transform,n=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:W([],a.features,h,g,f),fields:n,geometryType:h,objectIdFieldName:c,spatialReference:d};b&&(a.transform=b);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};e.convertFromFeatureSet=function(a,c){var d=new r.default,b=a.hasM,n=a.hasZ,f=a.features,g=a.objectIdFieldName,h=a.spatialReference,k=a.geometryType,l=a.exceededTransferLimit,
e=a.transform;d.fields=a.fields;d.geometryType=k;d.objectIdFieldName=g||c;d.spatialReference=h;if(!d.objectIdFieldName)return ea.error(new p("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),d;f&&ia(d.features,f,k,n,b,d.objectIdFieldName);l&&(d.exceededTransferLimit=l);b&&(d.hasM=b);n&&(d.hasZ=n);e&&(d.transform=e);return d};e.hydrateOptimizedFeatureSet=function(a){var c=a.transform,d=a.hasM,b=a.hasZ;if(!c)return a;for(var n=0,f=a.features;n<f.length;n++){var g=f[n];
g.geometry&&G(g.geometry,g.geometry,d,b,c);g.centroid&&G(g.centroid,g.centroid,d,b,c)}a.transform=null;return a};e.quantizeOptimizedFeatureSet=function(a,c){var d=c.geometryType,b=c.features,n=c.hasM,f=c.hasZ;if(!a)return c;for(var g=0;g<b.length;g++){var h=b[g],e=new k.default(new l.default,h.attributes);fa(e.geometry,h.geometry,n,f,d,a);h.centroid&&(e.centroid=new l.default,fa(e.centroid,h.centroid,n,f,"esriGeometryPoint",a));b[g]=e}c.transform=a;return c};e.quantizeOptimizedGeometry=fa;e.quantizeOptimizedGeometryRemoveCollinear=
function(a,c,d,n,k,l){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;k=M[k];var h=c.coords;c=c.lengths;var e=b(d,n);d=d?n?A:S:n?S:ka;if(!c.length)return d(a.coords,h,0,0,g(l,h[0]),f(l,h[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=e,a;for(var m,v,w,r=0,C,y=0,q=0;q<c.length;q++){var p=c[q];if(!(p<k)){var x=0;C=y;n=m=g(l,h[r]);w=v=f(l,h[r+1]);d(a.coords,h,C,r,n,w);x++;for(var r=r+e,B=!1,u=0,ba=0,H=1;H<p;H++,r+=e)if(n=g(l,
h[r]),w=f(l,h[r+1]),n!==m||w!==v)m=n-m,v=w-v,B&&(0===u&&0===m||0===ba&&0===v)?(u+=m,ba+=v):(B=!0,u=m,ba=v,C+=e,x++),d(a.coords,h,C,r,u,ba),m=n,v=w;B&&(C+=e,d(a.coords,h,C,r,u,ba));x>=k&&(a.lengths.push(x),y=C)}}a.coords.length!==y&&(a.coords.length=y);return a.coords.length?a:null};e.generalizeOptimizedGeometry=function(a,c,d,n,f,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;f=M[f];var k=c.coords;c=c.lengths;var h=b(d,n);d=d?n?A:
S:n?S:ka;if(!c.length)return d(a.coords,k,0,0,k[0],k[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var l=n=0;l<c.length;l++){var e=c[l];if(!(e<f)){var m=a.coords.length/h;na(a.coords,k,h,g,d,n,n+e*h);var v=a.coords.length/h-m;v>=f?a.lengths.push(v):a.coords.length=m*h}n+=e*h}return a.coords.length?a:null};e.getBoundsOptimizedGeometry=function(a,c,d,n){d=b(d,n);var f=n=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;if(c&&c.coords){c=c.coords;for(var h=
0;h<c.length;h+=d){var l=c[h],e=c[h+1];n=Math.min(n,l);g=Math.max(g,l);f=Math.min(f,e);k=Math.max(k,e)}}a[0]=n;a[1]=f;a[2]=g;a[3]=k;return a};e.getQuantizedBoundsOptimizedGeometry=function(a,c,d,n){d=b(d,n);n=c.coords;var f=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=0,e=0;for(c=c.lengths;e<c.length;e++)for(var m=c[e],v=n[l],w=n[l+1],f=Math.min(v,f),g=Math.min(w,g),k=Math.max(v,k),h=Math.max(w,h),l=l+d,r=1;r<m;r++,l+=d){var C=n[l],y=
n[l+1],v=v+C,w=w+y;0>C&&(f=Math.min(f,v));0<C&&(k=Math.max(k,v));0>y?g=Math.min(g,w):0<y&&(h=Math.max(h,w))}a[0]=f;a[1]=g;a[2]=k;a[3]=h;return a};e.hydrateOptimizedGeometry=G})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(I,e){function p(a,d,c,b){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function q(a,d,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var b=c.localScope[a.toLowerCase()];if("FormulaFunction"===
b.type||"any"===b.type)return void 0===b.signature&&(b.signature={min:"0",max:"*"}),p(b.signature,a,d,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(b=c.globalScope[a.toLowerCase()],"FormulaFunction"===b.type||"any"===b.type)?(void 0===b.signature&&(b.signature={min:"0",max:"*"}),p(b.signature,a,d,c)):-1}function m(a,d){if(a)for(var c=0;c<a.length;c++)k(a[c],d)}function k(a,d){if(a&&!1!==d(a))switch(a.type){case "ArrayExpression":m(a.elements,d);break;case "AssignmentExpression":case "BinaryExpression":k(a.left,
d);k(a.right,d);break;case "BlockStatement":m(a.body,d);break;case "CallExpression":k(a.callee,d);m(a.arguments,d);break;case "ConditionalExpression":k(a.test,d);k(a.alternate,d);k(a.consequent,d);break;case "DoWhileStatement":k(a.test,d);k(a.body,d);break;case "ExpressionStatement":k(a.expression,d);break;case "ForInStatement":k(a.left,d);k(a.right,d);k(a.body,d);break;case "ForStatement":k(a.init,d);k(a.test,d);k(a.update,d);k(a.body,d);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":k(a.id,
d);m(a.params,d);k(a.body,d);break;case "IfStatement":k(a.test,d);k(a.consequent,d);k(a.alternate,d);break;case "LogicalExpression":k(a.left,d);k(a.right,d);break;case "MemberExpression":k(a.object,d);k(a.property,d);break;case "NewExpression":k(a.callee,d);m(a.arguments,d);break;case "ObjectExpression":m(a.properties,d);break;case "Program":m(a.body,d);break;case "Property":k(a.key,d);k(a.value,d);break;case "ReturnStatement":k(a.argument,d);break;case "UnaryExpression":k(a.argument,d);break;case "UpdateExpression":k(a.argument,
d);break;case "VariableDeclaration":m(a.declarations,d);break;case "VariableDeclarator":k(a.id,d),k(a.init,d)}}function r(a,b){void 0===b&&(b=!0);var c=d(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?d(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?d(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?r(a.init,!1):"";case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)if(c=r(a.declarations[f],
b),""!==c)return c;return"";case "ForInStatement":c=r(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return d(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return d(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return d(a,"SYNTAX","LEFTNOTVAR");c=r(a.right,b);if(""!==c)break;c=r(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=r(a.test,b),""!==c))break;if(null!==a.init&&(c=r(a.init,b),
""!==c))break;if(null!==a.update&&(c=r(a.update,b),""!==c))break;if(null!==a.body&&(c=r(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=r(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=r(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=r(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var n=[],f=0;f<a.body.length;f++)"EmptyStatement"!==a.body[f].type&&n.push(a.body[f]);
a.body=n;for(f=0;f<a.body.length;f++)if(c=r(a.body[f],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?d(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?d(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):r(a.body,!1);case "ReturnStatement":return null!==a.argument?r(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?d(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):r(a.argument,b);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return d(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=r(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return d(a,"SYNTAX","OPERATORNOTRECOGNISED")}return r(a.right,!1);case "ExpressionStatement":return r(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=r(a.object,b);if(""!==c)break;return!0===a.computed?r(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==
a.callee.type)return d(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(f=0;f<a.arguments.length;f++)if(c=r(a.arguments[f],b),""!==c)return c;return"";case "UnaryExpression":c=r(a.argument,b);break;case "BinaryExpression":c=r(a.left,b);if(""!==c)break;c=r(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return d(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
r(a.left,b);if(""!==c)break;c=r(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return d(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return d(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(f=0;f<a.elements.length&&(c=r(a.elements[f],b),""===c);f++);break;case "ObjectExpression":c="";for(f=0;f<a.properties.length;f++){c="";if(null!==a.properties[f].key&&("Literal"!==a.properties[f].key.type&&"Identifier"!==a.properties[f].key.type&&
(c=d(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[f].key.type)){var n=a.properties[f].key,g="value"in n?n.value:null;"string"===typeof g||g instanceof String||(c=d(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=r(a.properties[f],b));if(""!==c)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return d(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=r(a.key,b),""!==c))break;c=r(a.value,b)}return c}catch(u){throw u;}}function l(a,
b){var c=d(a,"SYNTAX","UNREOGNISED"),n=null,k="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return d(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var e=null===a.init?"":l(a.init,b);if(""!==e)return e;"Identifier"===a.id.type&&(null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":n=g(a.id.name.toLowerCase(),a,b);k=f(a,b);if(""!==k)return k;if(null!==
b.localScope)return d(a,"SYNTAX","GLOBALFUNCTIONSONLY");n.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[n]};return"";case "VariableDeclaration":for(var c="",m=0;m<a.declarations.length&&(c=l(a.declarations[m],b),""===c);m++);break;case "IfStatement":c=l(a.test,b);if(""!==c)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return d(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(c=l(a.consequent,b),
""!==c))break;if(null!==a.alternate&&(c=l(a.alternate,b),""!==c))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(c=l(a.body[m],b),""!==c)return c;return"";case "ReturnStatement":return null!==a.argument?l(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return d(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return d(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return d(a,
"SYNTAX","LEFTNOTVAR");c=l(a.left,b);if(""!==c)break;c=l(a.right,b);if(""!==c)break;c=l(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.init&&(c=l(a.init,b),""!==c))break;if(null!==a.test&&(c=l(a.test,b),""!==c))break;if(null!==a.body&&(c=l(a.body,b),""!==c))break;if(null!==a.update&&(c=l(a.update,b),""!==c))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return d(a,
"SYNTAX","ASSIGNMENTTOVARSONLY");var w=!1;if("MemberExpression"===a.argument.type)return l(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(w=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(w=!0);return!1===w?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return d(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var r=l(a.right,b);if(""!==r)return r;w=!1;if("MemberExpression"===
a.left.type)return r=l(a.left,b),""!==r?r:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(w=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(w=!0);return!1===w?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return l(a.expression,b);case "Identifier":var C=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[C])return"";c=void 0!==b.globalScope[C]?"":d(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":c=l(a.object,
b);if(""!==c)break;return!0===a.computed?l(a.property,b):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return d(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(m=0;m<a.arguments.length;m++)if(c=l(a.arguments[m],b),""!==c)return c;var y=q(a.callee.name,a.arguments,b);-1===y&&(c=d(a,"SYNTAX","NOTFOUND"));-2===y&&(c=d(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":c=l(a.argument,b);break;case "BinaryExpression":c=l(a.left,b);if(""!==c)break;c=l(a.right,b);if(""!==
c)break;return"";case "LogicalExpression":c=l(a.left,b);if(""!==c)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return d(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");c=l(a.right,b);if(""!==c)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?d(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return d(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(m=0;m<a.elements.length&&
(c=l(a.elements[m],b),""===c);m++);break;case "ObjectExpression":c="";for(m=0;m<a.properties.length;m++){c="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(c=d(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[m].key.type)){var p=a.properties[m].key,x="value"in p?p.value:null;"string"===typeof x||x instanceof String||(c=d(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=l(a.properties[m],b));if(""!==c)break}break;
case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return d(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=l(a.key,b),""!==c))break;c=l(a.value,b)}return c}catch(G){throw G;}}function b(a,d){var c=!1,b=d.toLowerCase();k(a,function(a){if(c)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===b&&(c=!0);return!0});return c}function g(a,d,c){c=[];if(void 0!==d.params&&null!==d.params)for(var b=0;b<d.params.length;b++)c.push("any");return{name:a,return:"any",params:c}}
function f(a,d){d={globalScope:d.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)d.localScope[a.params[c].name.toLowerCase()]={type:"any"};return l(a.body,d)}function w(a,d,c,b){var f={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var g in d)"sync"===b&&void 0!==d[g].min?f[g]={type:"FormulaFunction",signature:{min:d[g].min,max:d[g].max}}:"sync"!==b&&void 0!==d[g].fmin&&(f[g]={type:"FormulaFunction",
signature:{min:d[g].fmin,max:d[g].fmax}});for(d=0;d<c.length;d++)g=c[d],f[g.name]={type:"FormulaFunction",signature:g};for(g in a)f[g]=a[g],f[g].type="any";return f}function d(a,d,c){var b="";switch(d){case "SYNTAX":b="Syntax Error: ";break;case "RUNTIME":b="Runtime Error: ";break;default:b="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":b+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":b+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":b+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":b+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":b+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":b+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":b+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":b+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":b+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":b+=" Variable Definition must have an identifier"}break;case "Identifier":b+=" Identifier Not Found. ";b+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":b+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":b+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":b+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":b+=" Can only declare value for use with IN";break;case "LEFTNOVAR":b+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":b+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":b+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":b+=
"Cannot find member property. ";b+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":b+="Out of Bounds. ";b+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":b+="Cannot call member method on null. ";b+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":b+="Cannot call member property on object of this type. ",b+=!1===a.computed?"Identifier"===a.property.type?a.property.name:
"":""}break;case "Property":switch(c){case "ONLYLITERAL":b+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(c){case "WRONGSIGNATURE":b+="Function signature does not match: ";b+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":b+="Functions must be declared.";b+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":b+="Not a Function: ";b+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":b+=
"Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":b+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":b+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":b+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":b+=
"Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":b+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":b+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":b+=" Cannot Put Function inside Array."}break;default:b+="Expression contains unrecognised code structures."}}catch(H){throw H;}return b}function y(a,b,c){return{line:a.loc.start.line,
character:a.loc.start.column,reason:d(a,b,c)}}function x(a,d,c,b,f){void 0===f&&(f=!0);d={globalScope:d.globalScope,localScope:{}};for(f=0;f<a.params.length;f++)d.localScope[a.params[f].name.toLowerCase()]={type:"any"};B(a.body,d,c,b,!1)}function B(a,d,c,b,f){void 0===f&&(f=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var n=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){b.push(y(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==
a.id.type?b.push(y(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"});null!==a.init&&B(a.init,d,c,b,f);break;case "FunctionDeclaration":!1===f&&b.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&b.push(y(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));n=g("",a,d);x(a,d,c,b,f);null!==d.localScope&&b.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));n.isnative=
!1;"Identifier"===a.id.type&&(d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[n]});break;case "VariableDeclaration":for(var k=0;k<a.declarations.length;k++)B(a.declarations[k],d,c,b,f);break;case "IfStatement":null!==a.test&&(B(a.test,d,c,b,f),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||b.push(y(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&B(a.consequent,d,c,b,f);null!==a.alternate&&B(a.alternate,d,c,b,f);break;
case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)B(a.body[k],d,c,b,f);break;case "ReturnStatement":null!==a.argument&&B(a.argument,d,c,b,f);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&b.push(y(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&b.push(y(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&b.push(y(a,"SYNTAX","LEFTNOTVAR"));B(a.left,d,c,b,f);B(a.right,d,c,b,f);B(a.body,
d,c,b,f);break;case "ForStatement":null!==a.init&&B(a.init,d,c,b,f);null!==a.test&&B(a.test,d,c,b,f);null!==a.body&&B(a.body,d,c,b,f);null!==a.update&&B(a.update,d,c,b,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?b.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(n=!1,!1===c&&(null!==d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(n=!0),
void 0!==d.globalScope[a.argument.name.toLowerCase()]&&(n=!0),!1===n&&b.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&B(a.argument,d,c,b,f));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&b.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:b.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}B(a.right,d,c,b,f);n=!1;"Identifier"===a.left.type&&(null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&(n=!0),void 0!==d.globalScope[a.left.name.toLowerCase()]&&(n=!0),!1===c&&!1===n&&b.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&B(a.left,d,c,b,f);break;case "ExpressionStatement":B(a.expression,
d,c,b,f);break;case "Identifier":var l=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[l]||void 0!==d.globalScope[l])break;!1===c&&b.push(y(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":B(a.object,d,c,b,f);!0===a.computed&&B(a.property,d,c,b,f);break;case "Literal":break;case "CallExpression":"Identifier"!==a.callee.type&&b.push(y(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)B(a.arguments[k],d,c,b,f);if("Identifier"===a.callee.type){var e=q(a.callee.name,
a.arguments,d);!1===c&&-1===e&&b.push(y(a,"SYNTAX","NOTFOUND"));-2===e&&b.push(y(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":B(a.argument,d,c,b,f);break;case "BinaryExpression":B(a.left,d,c,b,f);B(a.right,d,c,b,f);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:b.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:b.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}B(a.left,d,c,b,f);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||b.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));B(a.right,d,c,b,f);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||b.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":b.push(y(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)B(a.elements[k],
d,c,b,f);break;case "ObjectExpression":for(k=0;k<a.properties.length;k++)B(a.properties[k],d,c,b,f);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&b.push(y(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&B(a.key,d,c,b,f);B(a.value,d,c,b,f);break;default:b.push(y(a,"SYNTAX","UNRECOGNISED"))}}catch(ia){b.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function L(a,d){var c=[];k(a,function(a){"CallExpression"===
a.type&&"Identifier"===a.callee.type&&c.push(a.callee.name.toLowerCase());return!0});return c}Object.defineProperty(e,"__esModule",{value:!0});e.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},
millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"}};for(var aa in e.functionDecls)e.functionDecls[aa].fmin=e.functionDecls[aa].min,e.functionDecls[aa].fmax=e.functionDecls[aa].max;var ba="featureset featuresetbyid featuresetbyname featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),C="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
e.addFunctionDeclaration=function(a,d){var c=e.functionDecls[a.name.toLowerCase()];void 0===c?"sync"===d?e.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:e.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===d?(c.min=a.min,c.max=a.max):(c.fmin=a.min,c.fmax=a.max)};e.checkFunctionSignature=p;e.findFunction=q;e.walk=k;e.validateLanguageNode=r;e.testValidityOfExpression=l;e.referencesMember=b;e.referencesFunction=function(a,d){var c=!1,b=d.toLowerCase();k(a,function(a){return c?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===b?(c=!0,!1):!0});return c};e.findFieldLiterals=function(a,d){var c=[];k(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return c};e.extractFunctionDeclaration=g;e.validateFunction=f;e.constructGlobalScope=w;e.validateScript=function(a,d,c,b){void 0===c&&(c="async");void 0===b&&(b=e.functionDecls);d={globalScope:w(d.vars,b,d.customFunctions,c),localScope:null};return l(a.body[0].body,d)};e.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":r(a.body[0].body)};
e.nodeErrorMessage=d;e.makeError=y;e.extractAllIssuesInFunction=x;e.extractAllIssues=B;e.checkScript=function(a,d,c,b,f){void 0===b&&(b="async");void 0===f&&(f=e.functionDecls);var g=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===d||void 0===d)d={vars:{},customFunctions:[]};d={globalScope:w(d.vars,f,d.customFunctions,b),localScope:null};try{B(a.body[0].body,d,c,g)}catch(u){}return g};e.findFunctionCalls=L;e.findScriptDependencies=function(a,
d){void 0===d&&(d=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=L(a,!1));a.usesFeatureSet=!1;for(var f=0;f<c.length;f++)-1<ba.indexOf(c[f])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&d&&0<d.length)for(f=0;f<d.length;f++)if(b(a,d[f])){a.usesFeatureSet=!0;a.isAsync=!0;break}}if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=L(a,!1)),f=0;f<c.length;f++)-1<C.indexOf(c[f])&&(a.usesGeometry=!0)};e.scriptUsesFeatureSet=function(a){a=L(a,!1);for(var d=0;d<a.length;d++)if(-1<
ba.indexOf(a[d]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(I,e,p){function q(e){return null===e?e:isNaN(e.getTime())?null:e}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(e,k){e.today=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,0,0);b=new Date;b.setHours(0,0,0,0);return b})};e.now=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,0,0);return new Date})};e.timestamp=function(e,
l){return k(e,l,function(b,g,f){p.pcCheck(f,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};e.toutc=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};e.tolocal=function(e,l){return k(e,l,function(b,g,
f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?null:p.MomentLibrary.Moment.utc([b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};e.day=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getDate()})};e.month=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getMonth()})};e.year=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,
1,1);b=p.toDate(f[0]);return null===b?NaN:b.getFullYear()})};e.hour=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getHours()})};e.second=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getSeconds()})};e.millisecond=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getMilliseconds()})};e.minute=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,
1,1);b=p.toDate(f[0]);return null===b?NaN:b.getMinutes()})};e.weekday=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,1,1);b=p.toDate(f[0]);return null===b?NaN:b.getDay()})};e.date=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,0,7);if(3===f.length)return q(new Date(p.toNumber(f[0]),p.toNumber(f[1]),p.toNumber(f[2]),0,0,0,0));if(4===f.length)return q(new Date(p.toNumber(f[0]),p.toNumber(f[1]),p.toNumber(f[2]),p.toNumber(f[3]),0,0,0));if(5===f.length)return q(new Date(p.toNumber(f[0]),
p.toNumber(f[1]),p.toNumber(f[2]),p.toNumber(f[3]),p.toNumber(f[4]),0,0));if(6===f.length)return q(new Date(p.toNumber(f[0]),p.toNumber(f[1]),p.toNumber(f[2]),p.toNumber(f[3]),p.toNumber(f[4]),p.toNumber(f[5]),0));if(7===f.length)return q(new Date(p.toNumber(f[0]),p.toNumber(f[1]),p.toNumber(f[2]),p.toNumber(f[3]),p.toNumber(f[4]),p.toNumber(f[5]),p.toNumber(f[6])));if(2===f.length){b=p.toString(f[1]);if(""===b)return null;b=p.standardiseDateFormat(b);f=p.MomentLibrary.Moment(p.toString(f[0]),b,!0);
return!0===f.isValid()?f.toDate():null}if(1===f.length){if(p.isString(f[0])&&""===f[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;b=p.toNumber(f[0]);return!1===isNaN(b)?q(new Date(b)):p.toDate(f[0])}if(0===f.length)return new Date})};e.datediff=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,2,3);b=p.toDateM(f[0]);g=p.toDateM(f[1]);if(null===b||null===g)return NaN;switch(p.toString(f[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(g,"days",!0);case "months":case "month":return b.diff(g,
"months",!0);case "minutes":case "minute":case "m":return"M"===f[2]?b.diff(g,"months",!0):b.diff(g,"minutes",!0);case "seconds":case "second":case "s":return b.diff(g,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(g);case "hours":case "hour":case "h":return b.diff(g,"hours",!0);case "years":case "year":case "y":return b.diff(g,"years",!0);default:return b.diff(g)}})};e.dateadd=function(e,l){return k(e,l,function(b,g,f){p.pcCheck(f,2,3);b=p.toDateM(f[0]);if(null===b)return null;
g="milliseconds";switch(p.toString(f[2]).toLowerCase()){case "days":case "day":case "d":g="days";break;case "months":case "month":g="months";break;case "minutes":case "minute":case "m":g="M"===f[2]?"months":"minutes";break;case "seconds":case "second":case "s":g="seconds";break;case "milliseconds":case "millisecond":case "ms":g="milliseconds";break;case "hours":case "hour":case "h":g="hours";break;case "years":case "year":case "y":g="years"}b.add(p.toNumber(f[1]),g);return b.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(I,e,p,q,m,k,r,l,b,g,f,w,d,y,x){Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(e,L){e.ringisclockwise=function(d,b){return L(d,b,function(d,a,b){k.pcCheck(b,1,1);d=[];var c=a=!1;if(null===b[0])return!1;if(k.isArray(b[0])){for(var f=0,n=b[0];f<n.length;f++){var e=n[f];if(e instanceof g)d.push(e.hasZ?e.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]);else throw Error("Invalid Argument");}0<d.length&&(a=b[0][0].hasZ,c=b[0][0].hasM)}else if(b[0]instanceof m)d=b[0]._elements,
0<d.length&&(a=b[0]._hasZ,c=b[0]._hasM);else if(k.isImmutableArray(b[0])){f=0;for(n=b[0].toArray();f<n.length;f++)if(e=n[f],e instanceof g)d.push(e.hasZ?e.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]);else throw Error("Invalid Argument");0<d.length&&(a=b[0].get(0).hasZ,c=b[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>d.length?!1:x.isClockwise(d,c,a)})};e.polygon=function(d,b){return L(d,b,function(b,a,g){k.pcCheck(g,1,1);b=null;if(g[0]instanceof p){if(b=k.fixSpatialReference(q.parseGeometryFromDictionary(g[0]),
d.spatialReference),!1===b instanceof f)throw Error("Illegal Parameter");}else b=g[0]instanceof f?y.fromJSON(g[0].toJSON()):k.fixSpatialReference(new f(JSON.parse(g[0])),d.spatialReference);if(null!==b&&!1===b.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(b)})};e.polyline=function(d,b){return L(d,b,function(b,a,f){k.pcCheck(f,1,1);b=null;if(f[0]instanceof p){if(b=k.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),
d.spatialReference),!1===b instanceof w)throw Error("Illegal Parameter");}else b=f[0]instanceof w?y.fromJSON(f[0].toJSON()):k.fixSpatialReference(new w(JSON.parse(f[0])),d.spatialReference);if(null!==b&&!1===b.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(b)})};e.point=function(d,b){return L(d,b,function(b,a,f){k.pcCheck(f,1,1);b=null;if(f[0]instanceof p){if(b=k.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),
d.spatialReference),!1===b instanceof g)throw Error("Illegal Parameter");}else b=f[0]instanceof g?y.fromJSON(f[0].toJSON()):k.fixSpatialReference(new g(JSON.parse(f[0])),d.spatialReference);if(null!==b&&!1===b.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(b)})};e.multipoint=function(d,f){return L(d,f,function(f,a,g){k.pcCheck(g,1,1);f=null;if(g[0]instanceof p){if(f=
k.fixSpatialReference(q.parseGeometryFromDictionary(g[0]),d.spatialReference),!1===f instanceof b)throw Error("Illegal Parameter");}else f=g[0]instanceof b?y.fromJSON(g[0].toJSON()):k.fixSpatialReference(new b(JSON.parse(g[0])),d.spatialReference);if(null!==f&&!1===f.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};e.extent=function(d,e){return L(d,e,function(e,
a,n){n=k.autoCastFeatureToGeometry(n);k.pcCheck(n,1,1);e=null;n[0]instanceof p?e=k.fixSpatialReference(q.parseGeometryFromDictionary(n[0]),d.spatialReference):n[0]instanceof g?(e={xmin:n[0].x,ymin:n[0].y,xmax:n[0].x,ymax:n[0].y,spatialReference:n[0].spatialReference.toJSON()},n[0].hasZ?(e.zmin=n[0].z,e.zmax=n[0].z):n[0].hasM&&(e.mmin=n[0].m,e.mmax=n[0].m),e=y.fromJSON(e)):e=n[0]instanceof f?y.fromJSON(n[0].extent.toJSON()):n[0]instanceof w?y.fromJSON(n[0].extent.toJSON()):n[0]instanceof b?y.fromJSON(n[0].extent.toJSON()):
n[0]instanceof r?y.fromJSON(n[0].toJSON()):k.fixSpatialReference(new r(JSON.parse(n[0])),d.spatialReference);if(null!==e&&!1===e.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(e)})};e.geometry=function(d,b){return L(d,b,function(b,a,f){k.pcCheck(f,1,1);b=null;b=f[0]instanceof q?k.fixSpatialReference(f[0].geometry(),d.spatialReference):f[0]instanceof p?k.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),
d.spatialReference):k.fixSpatialReference(y.fromJSON(JSON.parse(f[0])),d.spatialReference);if(null!==b&&!1===b.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(b)})};e.setgeometry=function(d,b){return L(d,b,function(d,a,b){k.pcCheck(b,2,2);if(b[0]instanceof q){if(!0===b[0].immutable)throw Error("Feature is Immutable");if(b[1]instanceof l||null===b[1])b[0]._geometry=b[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return k.voidOperation})};e.feature=function(d,b){return L(d,b,function(b,a,f){if(0===f.length)throw Error("Missing Parameters");b=null;if(1===f.length)if(k.isString(f[0]))b=q.fromJson(JSON.parse(f[0]));else if(f[0]instanceof q)b=q.createFromArcadeFeature(f[0]);else if(f[0]instanceof l)b=q.createFromGraphicLikeObject(f[0],null,null);else if(f[0]instanceof p)b=f[0].hasField("geometry")?f[0].field("geometry"):null,a=f[0].hasField("attributes")?
f[0].field("attributes"):null,null!==b&&b instanceof p&&(b=q.parseGeometryFromDictionary(b)),null!==a&&(a=q.parseAttributesFromDictionary(a)),b=q.createFromGraphicLikeObject(b,a,null);else throw Error("Illegal Argument");else{if(2===f.length){a=b=null;if(null!==f[0])if(f[0]instanceof l)b=f[0];else if(b instanceof p)b=q.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");if(null!==f[1])if(f[1]instanceof p)a=q.parseAttributesFromDictionary(f[1]);else throw Error("Illegal Argument");
}else{b=null;a={};if(null!==f[0])if(f[0]instanceof l)b=f[0];else if(b instanceof p)b=q.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");for(var c=1;c<f.length;c+=2){var g=k.toString(f[c]),e=f[c+1];if(null===e||void 0===e||k.isString(e)||isNaN(e)||k.isDate(e)||k.isNumber(e)||k.isBoolean(e)){if(k.isFunctionParameter(e)||!1===k.isSimpleType(e))throw Error("Illegal Argument");a[g]=e===k.voidOperation?null:e}else throw Error("Illegal Argument");}}b=q.createFromGraphicLikeObject(b,
a,null)}b._geometry=k.fixSpatialReference(b.geometry(),d.spatialReference);b.immutable=!1;return b})};e.dictionary=function(d,b){return L(d,b,function(d,a,b){if(0===b.length)return b=new p,b.immutable=!1,b;if(1===b.length&&k.isString(b[0]))try{var c=JSON.parse(b[0]),f=p.convertObjectToArcadeDictionary(c);f.immutable=!1;return f}catch(H){throw Error("Missing Parameters or Illegal Json");}if(0!==b.length%2)throw Error("Missing Parameters");d={};for(a=0;a<b.length;a+=2)if(c=k.toString(b[a]),f=b[a+1],
null===f||void 0===f||k.isString(f)||isNaN(f)||k.isDate(f)||k.isNumber(f)||k.isBoolean(f)||k.isArray(f)||k.isImmutableArray(f)){if(k.isFunctionParameter(f))throw Error("Illegal Argument");d[c]=f===k.voidOperation?null:f}else throw Error("Illegal Argument");b=new p(d);b.immutable=!1;return b})};e.haskey=function(d,b){return L(d,b,function(d,a,b){k.pcCheck(b,2,2);d=k.toString(b[1]);if(b[0]instanceof q||b[0]instanceof p)return b[0].hasField(d);throw Error("Illegal Argument");})};e.indexof=function(d,
b){return L(d,b,function(d,a,b){k.pcCheck(b,2,2);d=b[1];if(k.isArray(b[0])){for(a=0;a<b[0].length;a++)if(k.equalityTest(d,b[0][a]))return a;return-1}if(k.isImmutableArray(b[0])){var c=b[0].length();for(a=0;a<c;a++)if(k.equalityTest(d,b[0].get(a)))return a;return-1}throw Error("Illegal Argument");})};e.angle=function(b,f){return L(b,f,function(b,a,f){f=k.autoCastFeatureToGeometry(f);k.pcCheck(f,2,3);if(!(f[0]instanceof g))throw Error("Illegal Argument");if(!(f[1]instanceof g))throw Error("Illegal Argument");
if(2<f.length&&!(f[2]instanceof g))throw Error("Illegal Argument");return 2===f.length?d.angle2D(f[0],f[1]):d.angleBetween2D(f[0],f[1],f[2])})};e.bearing=function(b,f){return L(b,f,function(b,a,f){f=k.autoCastFeatureToGeometry(f);k.pcCheck(f,2,3);if(!(f[0]instanceof g))throw Error("Illegal Argument");if(!(f[1]instanceof g))throw Error("Illegal Argument");if(2<f.length&&!(f[2]instanceof g))throw Error("Illegal Argument");return 2===f.length?d.bearing2D(f[0],f[1]):d.bearingBetween2D(f[0],f[1],f[2])})};
e.isselfintersecting=function(g,e){return L(g,e,function(e,a,l){l=k.autoCastFeatureToGeometry(l);k.pcCheck(l,1,1);e=l[0];if(e instanceof f)return e.isSelfIntersecting;if(e instanceof w)return e=e.paths,d.pathsSelfIntersecting(e);if(e instanceof b)for(a=e.points,l=0;l<a.length;l++)for(var c=0;c<a.length;c++)if(c!==l){for(var n=!0,m=0;m<a[l].length;m++)if(a[l][m]!==a[c][m]){n=!1;break}if(!0===n)return!0}return k.isArray(e)||k.isImmutableArray(e)?(e=k.autoCastArrayOfPointsToPolyline(e,g.spatialReference),
null!==e&&(e=e.paths),d.pathsSelfIntersecting(e)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point","../../geometry/support/intersects"],function(I,e,p,q){function m(b,g,d){var f={x:0,y:0};g&&(f.z=0);d&&(f.m=0);for(var e=0,l=b[0],m=0;m<b.length;m++){var w=b[m],q;a:if(w.length!==l.length)q=!1;else{for(q=0;q<w.length;q++)if(w[q]!==l[q]){q=!1;break a}q=!0}if(!1===q){q=k(l,w,g);var r=w,a=g,n=d,c={x:(l[0]+r[0])/2,y:(l[1]+r[1])/2};a&&(c.z=(l[2]+r[2])/
2);a&&n?c.m=(l[3]+r[3])/2:n&&(c.m=(l[2]+r[2])/2);l=c;l.x*=q;l.y*=q;f.x+=l.x;f.y+=l.y;g&&(l.z*=q,f.z+=l.z);d&&(l.m*=q,f.m+=l.m);e+=q;l=w}}0<e?(f.x/=e,f.y/=e,g&&(f.z/=e),d&&(f.m/=e)):(f.x=b[0][0],f.y=b[0][1],g&&(f.z=b[0][2]),d&&g?f.m=b[0][3]:d&&(f.m=b[0][2]));return f}function k(b,g,d){var f=g[0]-b[0];b=g[1]-b[1];return d?(g=g[2]-g[2],Math.sqrt(f*f+b*b+g*g)):Math.sqrt(f*f+b*b)}function r(b,g,d){for(void 0===d&&(d=0);b<d;)b+=g;for(d+=g;b>=d;)b-=g;return b}function l(b,g){return Math.atan2(g.y-b.y,g.x-
b.x)}function b(b,g,d){var f=b.x-g.x;b=b.y-g.y;var e=d.x-g.x;g=d.y-g.y;return Math.atan2(e*b-f*g,e*f+g*b)}Object.defineProperty(e,"__esModule",{value:!0});e.centroidPolyline=function(b){for(var f={x:0,y:0,spatialReference:b.spatialReference.toJSON()},d={x:0,y:0,spatialReference:b.spatialReference.toJSON()},g=0,e=0,l=0;l<b.paths.length;l++)if(0!==b.paths[l].length){var q;q=b.paths[l];var r=!0===b.hasZ;if(1>=q.length)q=0;else{for(var ba=0,C=1;C<q.length;C++)ba+=k(q[C-1],q[C],r);q=ba}0===q?(r=m(b.paths[l],
!0===b.hasZ,!0===b.hasM),f.x+=r.x,f.y+=r.y,!0===b.hasZ&&(f.z+=r.z),!0===b.hasM&&(f.m+=r.m),++g):(r=m(b.paths[l],!0===b.hasZ,!0===b.hasM),d.x+=r.x*q,d.y+=r.y*q,!0===b.hasZ&&(d.z+=r.z*q),!0===b.hasM&&(d.m+=r.m*q),e+=q)}return 0<e?(d.x/=e,d.y/=e,!0===b.hasZ&&(d.z/=e),!0===b.hasM&&(d.m/=e),new p(d)):0<g?(f.x/=g,f.y/=g,!0===b.hasZ&&(d.z/=g),!0===b.hasM&&(f.m/=g),new p(f)):null};e.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var f=0,d=0,g=0,e=0,k=0;k<b.points.length;k++){var l=
b.getPoint(k);!0===l.hasZ&&(g+=l.z);!0===l.hasM&&(e+=l.m);f+=l.x;d+=l.y;e+=l.m}f={x:f/b.points.length,y:d/b.points.length,spatialReference:null};f.spatialReference=b.spatialReference.toJSON();!0===b.hasZ&&(f.z=g/b.points.length);!0===b.hasM&&(f.m=e/b.points.length);return new p(f)};e.angleRad=l;e.angle2D=function(b,g){return r(l(b,g),2*Math.PI)*(180/Math.PI)};e.bearing2D=function(b,g){return r(Math.PI/2-l(b,g),2*Math.PI)*(180/Math.PI)};e.angleBetweenRad=b;e.angleBetween2D=function(f,g,d){return r(b(f,
g,d),2*Math.PI)*(180/Math.PI)};e.bearingBetween2D=function(f,g,d){return r(-1*b(f,g,d),2*Math.PI)*(180/Math.PI)};var g=[0,0];e.pathsSelfIntersecting=function(b){for(var f=0;f<b.length;f++){for(var d=b[f],e=0;e<d.length-1;e++)for(var k=d[e],l=d[e+1],m=f+1;m<b.length;m++)for(var r=0;r<b[m].length-1;r++){var p=b[m][r],C=b[m][r+1],a=q.segmentIntersects(k,l,p,C,g);if(a&&!(g[0]===k[0]&&g[1]===k[1]||g[0]===p[0]&&g[1]===p[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===C[0]&&g[1]===C[1]))return!0}r=d.length;if(!(3>
r))for(e=0;e<=r-2;e++)for(k=d[e],l=d[e+1],m=e+2;m<=r-2;m++)if(p=d[m],C=d[m+1],(a=q.segmentIntersects(k,l,p,C,g))&&!(g[0]===k[0]&&g[1]===k[1]||g[0]===p[0]&&g[1]===p[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===C[0]&&g[1]===C[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(I,e,p,q,m,k,r,l,b,g,f,w,d){function y(d){return 0===p.version.indexOf("4.")?f.fromExtent(d):new f({spatialReference:d.spatialReference,rings:[[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]]]})}Object.defineProperty(e,"__esModule",{value:!0});var x=null;e.setGeometryEngine=function(d){x=d};e.registerFunctions=function(e,p){function B(d){m.pcCheck(d,2,2);if(!(d[0]instanceof l&&d[1]instanceof l||d[0]instanceof l&&null===d[1]||d[1]instanceof l&&null===d[0]||
null===d[0]&&null===d[1]))throw Error("Illegal Argument");}e.disjoint=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!0:x.disjoint(c[0],c[1])})};e.intersects=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.intersects(c[0],c[1])})};e.touches=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.touches(c[0],
c[1])})};e.crosses=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.crosses(c[0],c[1])})};e.within=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.within(c[0],c[1])})};e.contains=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.contains(c[0],c[1])})};e.overlaps=function(d,b){return p(d,b,function(a,
d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?!1:x.overlaps(c[0],c[1])})};e.equals=function(d,b){return p(d,b,function(a,d,c){m.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof l&&c[1]instanceof l?x.equals(c[0],c[1]):m.isDate(c[0])&&m.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};e.relate=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,3,3);if(c[0]instanceof l&&c[1]instanceof l)return x.relate(c[0],c[1],m.toString(c[2]));
if(c[0]instanceof l&&null===c[1]||c[1]instanceof l&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};e.intersection=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]||null===c[1]?null:x.intersect(c[0],c[1])})};e.union=function(d,b){return p(d,b,function(a,b,c){c=m.autoCastFeatureToGeometry(c);a=[];if(0===c.length)throw Error("Function called with wrong number of Parameters");if(1===c.length)if(m.isArray(c[0]))for(c=
m.autoCastFeatureToGeometry(c[0]),b=0;b<c.length;b++){if(null!==c[b]){if(!(c[b]instanceof l))throw Error("Illegal Argument");a.push(c[b])}}else if(m.isImmutableArray(c[0]))for(c=m.autoCastFeatureToGeometry(c[0].toArray()),b=0;b<c.length;b++){if(null!==c[b]){if(!(c[b]instanceof l))throw Error("Illegal Argument");a.push(c[b])}}else{if(c[0]instanceof l)return m.fixSpatialReference(q.cloneGeometry(c[0]),d.spatialReference);if(null===c[0])return null;throw Error("Illegal Argument");}else for(b=0;b<c.length;b++)if(null!==
c[b]){if(!(c[b]instanceof l))throw Error("Illegal Argument");a.push(c[b])}return 0===a.length?null:x.union(a)})};e.difference=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null!==c[0]&&null===c[1]?q.cloneGeometry(c[0]):null===c[0]?null:x.difference(c[0],c[1])})};e.symmetricdifference=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);B(c);return null===c[0]&&null===c[1]?null:null===c[0]?q.cloneGeometry(c[1]):null===c[1]?q.cloneGeometry(c[0]):
x.symmetricDifference(c[0],c[1])})};e.clip=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,2);if(!(c[1]instanceof r)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");return null===c[1]?null:x.clip(c[0],c[1])})};e.cut=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,2);if(!(c[1]instanceof w)&&null!==c[1])throw Error("Illegal Argument");if(null===
c[0])return[];if(!(c[0]instanceof l))throw Error("Illegal Argument");return null===c[1]?[q.cloneGeometry(c[0])]:x.cut(c[0],c[1])})};e.area=function(d,b){return p(d,b,function(a,b,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolygon(c[0],d.spatialReference),null===a?0:x.planarArea(a,q.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");
return x.planarArea(c[0],q.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)))})};e.areageodetic=function(d,b){return p(d,b,function(a,b,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolygon(c[0],d.spatialReference),null===a?0:x.geodesicArea(a,q.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return x.geodesicArea(c[0],q.convertSquareUnitsToCode(m.defaultUndefined(c[1],
-1)))})};e.length=function(d,b){return p(d,b,function(a,b,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolyline(c[0],d.spatialReference),null===a?0:x.planarLength(a,q.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return x.planarLength(c[0],q.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)))})};e.lengthgeodetic=function(d,
b){return p(d,b,function(a,b,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolyline(c[0],d.spatialReference),null===a?0:x.geodesicLength(a,q.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return x.geodesicLength(c[0],q.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)))})};e.distance=function(d,b){return p(d,b,function(a,b,
c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];if(m.isArray(c[0])||m.isImmutableArray(c[0]))a=m.autoCastArrayOfPointsToMultiPoint(c[0],d.spatialReference);b=c[1];if(m.isArray(c[1])||m.isImmutableArray(c[1]))b=m.autoCastArrayOfPointsToMultiPoint(c[1],d.spatialReference);if(!(a instanceof l))throw Error("Illegal Argument");if(!(b instanceof l))throw Error("Illegal Argument");return x.distance(a,b,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};e.distancegeodetic=function(d,
b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];d=c[1];if(!(a instanceof g))throw Error("Illegal Argument");if(!(d instanceof g))throw Error("Illegal Argument");var b=new w({paths:[],spatialReference:a.spatialReference});b.addPath([a,d]);return x.geodesicLength(b,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};e.densify=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof f||c[0]instanceof w?x.densify(c[0],a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]instanceof r?x.densify(y(c[0]),a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]})};e.densifygeodetic=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof f||c[0]instanceof w?x.geodesicDensify(c[0],a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]instanceof r?x.geodesicDensify(y(c[0]),a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]})};e.generalize=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,4);if(null===c[0])return null;
if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return x.generalize(c[0],a,m.toBoolean(m.defaultUndefined(c[2],!0)),q.convertLinearUnitsToCode(m.defaultUndefined(c[3],-1)))})};e.buffer=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===
a?q.cloneGeometry(c[0]):x.buffer(c[0],a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};e.buffergeodetic=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?q.cloneGeometry(c[0]):x.geodesicBuffer(c[0],a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};e.offset=function(d,b){return p(d,
b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof f||c[0]instanceof w))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");d=m.toNumber(m.defaultUndefined(c[4],10));if(isNaN(d))throw Error("Illegal Argument");var b=m.toNumber(m.defaultUndefined(c[5],0));if(isNaN(b))throw Error("Illegal Argument");return x.offset(c[0],a,q.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)),m.toString(m.defaultUndefined(c[3],
"round")).toLowerCase(),d,b)})};e.rotate=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof l))throw Error("Illegal Argument");a instanceof r&&(a=f.fromExtent(a));d=m.toNumber(c[1]);if(isNaN(d))throw Error("Illegal Argument");c=m.defaultUndefined(c[2],null);if(null===c)return x.rotate(a,d);if(c instanceof g)return x.rotate(a,d,c);throw Error("Illegal Argument");})};e.centroid=function(d,e){return p(d,e,function(a,
e,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return null;a=c[0];if(m.isArray(c[0])||m.isImmutableArray(c[0]))a=m.autoCastArrayOfPointsToMultiPoint(c[0],d.spatialReference);if(null===a)return null;if(!(a instanceof l))throw Error("Illegal Argument");return a instanceof g?m.fixSpatialReference(q.cloneGeometry(c[0]),d.spatialReference):a instanceof f?a.centroid:a instanceof w?k.centroidPolyline(a):a instanceof b?k.centroidMultiPoint(a):a instanceof r?a.center:null})};e.multiparttosinglepart=
function(e,k){return p(e,k,function(a,k,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);k=[];if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");if(c[0]instanceof g||c[0]instanceof r)return[m.fixSpatialReference(q.cloneGeometry(c[0]),e.spatialReference)];a=x.simplify(c[0]);if(a instanceof f){k=[];var n=[];for(c=0;c<a.rings.length;c++)if(a.isClockwise(a.rings[c])){var p=d.fromJSON({rings:[a.rings[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});
k.push(p)}else n.push({ring:a.rings[c],pt:a.getPoint(c,0)});for(a=0;a<n.length;a++)for(c=0;c<k.length;c++)if(k[c].contains(n[a].pt)){k[c].addRing(n[a].ring);break}return k}if(a instanceof w){k=[];for(c=0;c<a.paths.length;c++)n=d.fromJSON({paths:[a.paths[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()}),k.push(n);return k}if(c[0]instanceof b){a=m.fixSpatialReference(q.cloneGeometry(c[0]),e.spatialReference);for(c=0;c<a.points.length;c++)k.push(a.getPoint(c));return k}return null})};
e.issimple=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return!0;if(!(c[0]instanceof l))throw Error("Illegal Argument");return x.isSimple(c[0])})};e.simplify=function(d,b){return p(d,b,function(a,d,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");return x.simplify(c[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(I,e,p){Object.defineProperty(e,"__esModule",{value:!0});e.convertSquareUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};e.shapeExtent=function(e){if(null===e)return null;switch(e.type){case "polygon":case "multipoint":case "polyline":return e.extent;case "point":return new p({xmin:e.x,
ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case "extent":return e}return null};e.convertLinearUnitsToCode=function(e){if(void 0===e)return null;if("number"===typeof e||"number"===typeof e)return e;switch(e.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};e.sameGeomType=function(e,m){return e===m||"point"===e&&"esriGeometryPoint"===m||"polyline"===e&&"esriGeometryPolyline"===m||"polygon"===e&&"esriGeometryPolygon"===m||"extent"===e&&"esriGeometryEnvelope"===m||"multipoint"===e&&"esriGeometryMultipoint"===
m||"point"===m&&"esriGeometryPoint"===e||"polyline"===m&&"esriGeometryPolyline"===e||"polygon"===m&&"esriGeometryPolygon"===e||"extent"===m&&"esriGeometryEnvelope"===e||"multipoint"===m&&"esriGeometryMultipoint"===e?!0:!1};e.cloneGeometry=function(e){if(null===e)return null;var m=e.clone();void 0!==e.cache._geVersion&&(m.cache._geVersion=e.cache._geVersion);return m}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(I,e,p,q){function m(e,
m,l){if("undefined"===typeof l||0===+l)return Math[e](m);m=+m;l=+l;if(isNaN(m)||"number"!==typeof l||0!==l%1)return NaN;m=m.toString().split("e");m=Math[e](+(m[0]+"e"+(m[1]?+m[1]-l:-l)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+l:l))}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(e,r){function k(b,g,f){b=q.toNumber(b);return isNaN(b)?b:isNaN(g)||isNaN(f)||g>f?NaN:b<g?g:b>f?f:b}e.number=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,2);b=d[0];
return q.isNumber(b)?b:null===b?0:q.isDate(b)||q.isBoolean(b)?Number(b):q.isArray(b)?NaN:""===b||void 0===b?Number(b):q.isString(b)?void 0!==d[1]?(d=q.multiReplace(d[1],"\u2030",""),d=q.multiReplace(d,"\u00a4",""),p.parse(b,{pattern:d})):Number(b.trim()):Number(b)})};e.abs=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.abs(q.toNumber(d[0]))})};e.acos=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.acos(q.toNumber(d[0]))})};e.asin=function(b,g){return r(b,
g,function(b,g,d){q.pcCheck(d,1,1);return Math.asin(q.toNumber(d[0]))})};e.atan=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.atan(q.toNumber(d[0]))})};e.atan2=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,2,2);return Math.atan2(q.toNumber(d[0]),q.toNumber(d[1]))})};e.ceil=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,2);return 2===d.length?(b=q.toNumber(d[1]),isNaN(b)&&(b=0),m("ceil",q.toNumber(d[0]),-1*b)):Math.ceil(q.toNumber(d[0]))})};e.round=function(b,
g){return r(b,g,function(b,g,d){q.pcCheck(d,1,2);return 2===d.length?(b=q.toNumber(d[1]),isNaN(b)&&(b=0),m("round",q.toNumber(d[0]),-1*b)):Math.round(q.toNumber(d[0]))})};e.floor=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,2);return 2===d.length?(b=q.toNumber(d[1]),isNaN(b)&&(b=0),m("floor",q.toNumber(d[0]),-1*b)):Math.floor(q.toNumber(d[0]))})};e.cos=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.cos(q.toNumber(d[0]))})};e.isnan=function(b,g){return r(b,g,function(b,
g,d){q.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};e.exp=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.exp(q.toNumber(d[0]))})};e.log=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.log(q.toNumber(d[0]))})};e.pow=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,2,2);return Math.pow(q.toNumber(d[0]),q.toNumber(d[1]))})};e.random=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,0,0);return Math.random()})};e.sin=function(b,
g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.sin(q.toNumber(d[0]))})};e.sqrt=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.sqrt(q.toNumber(d[0]))})};e.tan=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return Math.tan(q.toNumber(d[0]))})};e.defaultvalue=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};e.isempty=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return null===
d[0]||""===d[0]||void 0===d[0]?!0:!1})};e["boolean"]=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,1,1);return q.toBoolean(d[0])})};e.constrain=function(b,g){return r(b,g,function(b,g,d){q.pcCheck(d,3,3);b=q.toNumber(d[1]);g=q.toNumber(d[2]);if(q.isArray(d[0])){var f=[],e=0;for(d=d[0];e<d.length;e++)f.push(k(d[e],b,g));return f}if(q.isImmutableArray(d[0])){f=[];for(e=0;e<d[0].length();e++)f.push(k(d[0].get(e),b,g));return f}return k(d[0],b,g)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(I,e,p,q){function m(e,m,l,b){if(1===b.length){if(p.isArray(b[0]))return q.calculateStat(e,b[0],-1);if(p.isImmutableArray(b[0]))return q.calculateStat(e,b[0].toArray(),-1)}return q.calculateStat(e,b,-1)}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(e,r){e.stdev=function(e,b){return r(e,b,function(b,f,e){return m("stdev",b,f,e)})};e.variance=function(e,b){return r(e,b,function(b,f,e){return m("variance",b,f,e)})};
e.average=function(e,b){return r(e,b,function(b,f,e){return m("mean",b,f,e)})};e.mean=function(e,b){return r(e,b,function(b,f,e){return m("mean",b,f,e)})};e.sum=function(e,b){return r(e,b,function(b,f,e){return m("sum",b,f,e)})};e.min=function(e,b){return r(e,b,function(b,f,e){return m("min",b,f,e)})};e.max=function(e,b){return r(e,b,function(b,f,e){return m("max",b,f,e)})};e.distinct=function(e,b){return r(e,b,function(b,f,e){return m("distinct",b,f,e)})};e.count=function(e,b){return r(e,b,function(b,
f,e){p.pcCheck(e,1,1);if(p.isArray(e[0])||p.isString(e[0]))return e[0].length;if(p.isImmutableArray(e[0]))return e[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(I,e,p){function q(e){for(var k=0,l=0;l<e.length;l++)k+=e[l];return k/e.length}function m(e){for(var k=q(e),l=0,b=0;b<e.length;b++)l+=Math.pow(k-e[b],2);return l/e.length}Object.defineProperty(e,"__esModule",{value:!0});
e.decodeStatType=function(e){switch(e.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};e.calculateStat=function(e,r,l){void 0===l&&(l=1E3);switch(e.toLowerCase()){case "distinct":a:{e=l;l=[];for(var b={},g=[],f=0;f<r.length;f++){if(void 0!==r[f]&&null!==r[f]&&r[f]!==p.voidOperation){var k=
r[f];if(p.isNumber(k)||p.isString(k))void 0===b[k]&&(l.push(k),b[k]=1);else{for(var d=!1,y=0;y<g.length;y++)!0===p.equalityTest(g[y],k)&&(d=!0);!1===d&&(g.push(k),l.push(k))}}if(l.length>=e&&-1!==e){r=l;break a}}r=l}return r;case "avg":case "mean":return q(p.toNumberArray(r));case "min":return Math.min.apply(Math,p.toNumberArray(r));case "sum":r=p.toNumberArray(r);for(l=e=0;l<r.length;l++)e+=r[l];return e;case "max":return Math.max.apply(Math,p.toNumberArray(r));case "stdev":case "stddev":return Math.sqrt(m(p.toNumberArray(r)));
case "var":case "variance":return m(p.toNumberArray(r));case "count":return r.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils".split(" "),function(I,e,p,q,m,k){Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(e,l){e.portal=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,1);return new p(k.toString(d[0]))})};e.trim=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,
1,1);return k.toString(d[0]).trim()})};e.upper=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,1);return k.toString(d[0]).toUpperCase()})};e.proper=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,2);b=1;2===d.length&&"firstword"===k.toString(d[1]).toLowerCase()&&(b=2);e=/\s/;d=k.toString(d[0]);for(var f="",g=!0,l=0;l<d.length;l++){var m=d[l];e.test(m)?1===b&&(g=!0):m.toUpperCase()!==m.toLowerCase()&&(g?(m=m.toUpperCase(),g=!1):m=m.toLowerCase());f+=m}return f})};e.lower=function(b,
e){return l(b,e,function(b,e,d){k.pcCheck(d,1,1);return k.toString(d[0]).toLowerCase()})};e.guid=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,0,1);if(0<d.length)switch(k.toString(d[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+k.generateUUID()+"}"})};e.console=function(b,e){return l(b,e,function(f,
e,d){0!==d.length&&(1===d.length?b.console(k.toString(d[0])):b.console(k.toString(d)));return k.voidOperation})};e.mid=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,3);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===d.length)return k.toString(d[0]).substr(b);e=k.toNumber(d[2]);if(isNaN(e))return"";0>e&&(e=0);return k.toString(d[0]).substr(b,e)})};e.find=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,3);b=0;if(2<d.length){b=k.toNumber(k.defaultUndefined(d[2],0));if(isNaN(b))return-1;
0>b&&(b=0)}return k.toString(d[1]).indexOf(k.toString(d[0]),b)})};e.left=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,2);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(d[0]).substr(0,b)})};e.right=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,2);b=k.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return k.toString(d[0]).substr(-1*b,b)})};e.split=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,4);b=k.toNumber(k.defaultUndefined(d[2],-1));e=k.toBoolean(k.defaultUndefined(d[3],
!1));-1===b||null===b||!0===e?d=k.toString(d[0]).split(k.toString(d[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),d=k.toString(d[0]).split(k.toString(d[1]),b));if(!1===e)return d;e=[];for(var f=0;f<d.length&&!(-1!==b&&e.length>=b);f++)""!==d[f]&&void 0!==d[f]&&e.push(d[f]);return e})};e.text=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,2);return k.toStringExplicit(d[0],d[1])})};e.concatenate=function(b,e){return l(b,e,function(b,e,d){b=[];if(1>d.length)return"";if(k.isArray(d[0])){e=k.defaultUndefined(d[2],
"");for(var f=0;f<d[0].length;f++)b[f]=k.toStringExplicit(d[0][f],e);return 1<d.length?b.join(d[1]):b.join("")}if(k.isImmutableArray(d[0])){e=k.defaultUndefined(d[2],"");for(f=0;f<d[0].length();f++)b[f]=k.toStringExplicit(d[0].get(f),e);return 1<d.length?b.join(d[1]):b.join("")}for(f=0;f<d.length;f++)b[f]=k.toStringExplicit(d[f]);return b.join("")})};e.reverse=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,1);if(k.isArray(d[0]))return b=d[0].slice(0),b.reverse(),b;if(k.isImmutableArray(d[0]))return b=
d[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};e.replace=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,3,4);b=k.toString(d[0]);e=k.toString(d[1]);var f=k.toString(d[2]);return(4===d.length?k.toBoolean(d[3]):1)?k.multiReplace(b,e,f):b.replace(e,f)})};e.domainname=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,4);if(d[0]instanceof m)return d[0].domainValueLookup(k.toString(d[1]),d[2],void 0===d[3]?void 0:k.toNumber(d[3]));throw Error("Invalid Parameter");
})};e.domaincode=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,2,4);if(d[0]instanceof m)return d[0].domainCodeLookup(k.toString(d[1]),d[2],void 0===d[3]?void 0:k.toNumber(d[3]));throw Error("Invalid Parameter");})};e.urlencode=function(b,e){return l(b,e,function(b,e,d){k.pcCheck(d,1,1);if(null===d[0])return"";if(d[0]instanceof q){b="";e=0;for(var f=d[0].keys();e<f.length;e++){var g=f[e],l=d[0].field(g);""!==b&&(b+="\x26");b=null===l?b+(encodeURIComponent(g)+"\x3d"):b+(encodeURIComponent(g)+
"\x3d"+encodeURIComponent(l))}return b}return encodeURIComponent(k.toString(d[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(I,e,p,q,m,k,r,l,b,g,f,w,d,y,x,B,L,aa,ba,C,a,n,c,v){function H(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(u(a,b.arguments[d]));return c}function R(a,b,c){try{return c(a,b,H(a,b))}catch(oa){throw oa;}}function u(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:u(a,b.init);c===g.voidOperation&&(c=null);if("Identifier"!==b.id.type)throw Error("Can only assign a regular variable");var d=b.id.name.toLowerCase();null!==
a.localScope?a.localScope[d]={value:c,valueset:!0,node:b.init}:a.globalScope[d]={value:c,valueset:!0,node:b.init};return g.voidOperation;case "VariableDeclaration":for(var e=0;e<b.declarations.length;e++)u(a,b.declarations[e]);return g.voidOperation;case "BlockStatement":var l;a:{for(var h=g.voidOperation,e=0;e<b.body.length;e++)if(h=u(a,b.body[e]),h instanceof g.ReturnResult||h===g.breakResult||h===g.continueResult){l=h;break a}l=h}return l;case "FunctionDeclaration":var n=b.id.name.toLowerCase();
a.globalScope[n]={valueset:!0,node:null,value:new r(b,a)};return g.voidOperation;case "ReturnStatement":var p;if(null===b.argument)p=new g.ReturnResult(g.voidOperation);else{var V=u(a,b.argument);p=new g.ReturnResult(V)}return p;case "IfStatement":var q;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(f.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Y=u(a,b.test);if(!0===Y)q=u(a,b.consequent);else if(!1===Y)q=null!==b.alternate?u(a,
b.alternate):g.voidOperation;else throw Error(f.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return q;case "ExpressionStatement":var y;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)y=u(a,b.expression);else{var x=u(a,b.expression);y=x===g.voidOperation?g.voidOperation:new g.ImplicitResult(x)}return y;case "AssignmentExpression":var w;var B=u(a,b.right),e=null,v="";if("MemberExpression"===b.left.type){e=u(a,b.left.object);!0===b.left.computed?
v=u(a,b.left.property):"Identifier"===b.left.property.type&&(v=b.left.property.name);if(g.isArray(e))if(g.isNumber(v)){0>v&&(v=e.length+v);if(0>v||v>e.length)throw Error("Assignment outside of array bounds");if(v===e.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");e[v]=K(B,b.operator,e[v],b)}else throw Error("Invalid Parameter");else if(e instanceof m){if(!1===g.isString(v))throw Error("Dictionary accessor must be a string");if(!0===e.hasField(v))e.setField(v,K(B,b.operator,e.field(v),
b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");e.setField(v,K(B,b.operator,null,b))}}else if(e instanceof k){if(!1===g.isString(v))throw Error("Feature accessor must be a string");if(!0===e.hasField(v))e.setField(v,K(B,b.operator,e.field(v),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");e.setField(v,K(B,b.operator,null,b))}}else{if(g.isImmutableArray(e))throw Error("Array is Immutable");throw Error("Invalid Parameter");}w=g.voidOperation}else if(e=b.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[e])a.localScope[e]={value:K(B,b.operator,a.localScope[e].value,b),valueset:!0,node:b.right},w=g.voidOperation;else if(void 0!==a.globalScope[e])a.globalScope[e]={value:K(B,b.operator,a.globalScope[e].value,b),valueset:!0,node:b.right},w=g.voidOperation;else throw Error("Variable not recognised");return w;case "UpdateExpression":var C;var A,e=null,v="";if("MemberExpression"===b.argument.type){e=u(a,b.argument.object);!0===b.argument.computed?v=u(a,b.argument.property):
"Identifier"===b.argument.property.type&&(v=b.argument.property.name);if(g.isArray(e))if(g.isNumber(v)){0>v&&(v=e.length+v);if(0>v||v>=e.length)throw Error("Assignment outside of array bounds");A=g.toNumber(e[v]);e[v]="++"===b.operator?A+1:A-1}else throw Error("Invalid Parameter");else if(e instanceof m){if(!1===g.isString(v))throw Error("Dictionary accessor must be a string");if(!0===e.hasField(v))A=g.toNumber(e.field(v)),e.setField(v,"++"===b.operator?A+1:A-1);else throw Error("Invalid Parameter");
}else if(e instanceof k){if(!1===g.isString(v))throw Error("Feature accessor must be a string");if(!0===e.hasField(v))A=g.toNumber(e.field(v)),e.setField(v,"++"===b.operator?A+1:A-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(e))throw Error("Array is Immutable");throw Error("Invalid Parameter");}C=!1===b.prefix?A:"++"===b.operator?A+1:A-1}else{e="Identifier"===b.argument.type?b.argument.name.toLowerCase():"";if(!e)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[e])A=g.toNumber(a.localScope[e].value),a.localScope[e]={value:"++"===b.operator?A+1:A-1,valueset:!0,node:b},C=!1===b.prefix?A:"++"===b.operator?A+1:A-1;else if(void 0!==a.globalScope[e])A=g.toNumber(a.globalScope[e].value),a.globalScope[e]={value:"++"===b.operator?A+1:A-1,valueset:!0,node:b},C=!1===b.prefix?A:"++"===b.operator?A+1:A-1;else throw Error("Variable not recognised");}return C;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "ForStatement":null!==
b.init&&u(a,b.init);v={testResult:!0,lastAction:g.voidOperation};do b:{w=a;B=b;C=v;if(null!==B.test){C.testResult=u(w,B.test);if(!1===C.testResult)break b;if(!0!==C.testResult)throw Error(f.nodeErrorMessage(B,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}C.lastAction=u(w,B.body);C.lastAction===g.breakResult?C.testResult=!1:C.lastAction instanceof g.ReturnResult?C.testResult=!1:null!==B.update&&u(w,B.update)}while(!0===v.testResult);e=v.lastAction instanceof g.ReturnResult?v.lastAction:g.voidOperation;
return e;case "ForInStatement":return X(a,b);case "Identifier":return ea(a,b);case "MemberExpression":return W(a,b);case "Literal":return b.value;case "CallExpression":return M(a,b);case "UnaryExpression":return fa(a,b);case "BinaryExpression":return na(a,b);case "LogicalExpression":return G(a,b);case "ConditionalExpression":throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(e=[],v=0;v<b.elements.length;v++){var H=u(a,b.elements[v]);if(g.isFunctionParameter(H))throw Error(f.nodeErrorMessage(b,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));H===g.voidOperation?e.push(null):e.push(H)}}catch(pa){throw pa;}return e;case "ObjectExpression":e={};for(v=0;v<b.properties.length;v++){var I=u(a,b.properties[v]);if(g.isFunctionParameter(I.value))throw Error("Illegal Argument");if(!1===g.isString(I.key))throw Error("Illegal Argument");e[I.key.toString()]=I.value===g.voidOperation?null:I.value}var E=new m(e);E.immutable=!1;return E;case "Property":return{key:"Identifier"===b.key.type?b.key.name:u(a,b.key),value:u(a,
b.value)};default:throw Error(f.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(pa){throw pa;}}function X(a,b){var c=u(a,b.right);"VariableDeclaration"===b.left.type&&u(a,b.left);var d=null,e="";if("VariableDeclaration"===b.left.type){var l=b.left.declarations[0].id;"Identifier"===l.type&&(e=l.name)}else"Identifier"===b.left.type&&(e=b.left.name);if(!e)throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));e=e.toLowerCase();null!==a.localScope&&void 0!==a.localScope[e]&&(d=a.localScope[e]);
null===d&&void 0!==a.globalScope[e]&&(d=a.globalScope[e]);if(null===d)throw Error(f.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){c=c.length;for(l=0;l<c;l++){d.value=l;e=u(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}return g.voidOperation}if(g.isImmutableArray(c)){for(l=0;l<c.length();l++){d.value=l;e=u(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}return g.voidOperation}if(c instanceof m||c instanceof
k)for(c=c.keys(),l=0;l<c.length;l++){d.value=c[l];e=u(a,b.body);if(e===g.breakResult)break;if(e instanceof g.ReturnResult)return e}else return g.voidOperation}function K(a,b,c,d){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%
g.toNumber(a);default:throw Error(f.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function ia(a,c,d,e){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(ma++,c=a.spatialReference._arcadeCacheId=ma)),a=new m({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&
(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(ma++,c=ma,a.cache._arcadeCacheId=c),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==
a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(ma++,c=ma,a.cache._arcadeCacheId=c),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===c&&(ma++,c=ma,a.cache._arcadeCacheId=c),a=new b(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(e,
"RUNTIME","PROPERTYNOTFOUND"));}function W(a,b){try{var c=u(a,b.object);if(null===c)throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(c instanceof m||c instanceof k)return c.field(b.property.name);if(c instanceof ba)return ia(c,b.property.name,a,b)}throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var d=u(a,b.property);if(c instanceof m||c instanceof k){if(g.isString(d))return c.field(d);throw Error(f.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}if(c instanceof ba){if(g.isString(d))return ia(c,d,a,b);throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isArray(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(f.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isString(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(f.nodeErrorMessage(b,
"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(c)&&g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length()+d);if(d>=c.length()||0>d)throw Error(f.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(d)}throw Error(f.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(sa){throw sa;}}function fa(a,b){try{var c=u(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*g.toNumber(c);
if("+"===b.operator)return 1*g.toNumber(c);throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(oa){throw oa;}}function na(a,b){try{var c=[u(a,b.left),u(a,b.right)],d=c[0],e=c[1];switch(b.operator){case "\x3d\x3d":return g.equalityTest(d,e);case "!\x3d":return!g.equalityTest(d,e);case "\x3c":return g.greaterThanLessThan(d,
e,b.operator);case "\x3e":return g.greaterThanLessThan(d,e,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(d,e,b.operator);case "\x3e\x3d":return g.greaterThanLessThan(d,e,b.operator);case "+":return g.isString(d)||g.isString(e)?g.toString(d)+g.toString(e):g.toNumber(d)+g.toNumber(e);case "-":return g.toNumber(d)-g.toNumber(e);case "*":return g.toNumber(d)*g.toNumber(e);case "/":return g.toNumber(d)/g.toNumber(e);case "%":return g.toNumber(d)%g.toNumber(e);default:throw Error(f.nodeErrorMessage(b,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ra){throw ra;}}function G(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(f.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(f.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=u(a,b.left);if(g.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var d=u(a,b.right);
if(g.isBoolean(d))return d;throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;d=u(a,b.right);if(g.isBoolean(d))return d;throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(sa){throw sa;}}function ea(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d]){c=a.localScope[d];if(!0===
c.valueset)return c.value;c.value=u(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[d]){c=a.globalScope[d];if(!0===c.valueset)return c.value;c.value=u(a,c.node);c.valueset=!0;return c.value}throw Error(f.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(sa){throw sa;}}function M(a,b){try{if("Identifier"!==b.callee.type)throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];
if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof r)return h(a,b,c.value.definition);throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof r)return h(a,b,c.value.definition);throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(f.nodeErrorMessage(b,"RUNTIME",
"NOTFOUND"));}catch(oa){throw oa;}}function ka(b){return null==b?"":g.isArray(b)||g.isImmutableArray(b)?"Array":g.isDate(b)?"Date":g.isString(b)?"String":g.isBoolean(b)?"Boolean":g.isNumber(b)?"Number":b instanceof q?"Attachment":b instanceof p?"Portal":b instanceof m?"Dictionary":b instanceof k?"Feature":b instanceof a?"Point":b instanceof n?"Polygon":b instanceof c?"Polyline":b instanceof C?"Multipoint":b instanceof aa?"Extent":g.isFunctionParameter(b)?"Function":g.isFeatureSet(b)?"FeatureSet":
g.isFeatureSetCollection(b)?"FeatureSetCollection":b===g.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function S(a,b,c,d){try{var e=u(a,b.arguments[c]);if(g.equalityTest(e,d))return u(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?u(a,b.arguments[c]):2===f?null:3===f?u(a,b.arguments[c+2]):S(a,b,c+2,d)}catch(xa){throw xa;}}function A(a,b,c,d){try{if(!0===d)return u(a,b.arguments[c+1]);if(3===b.arguments.length-c)return u(a,b.arguments[c+2]);var e=u(a,b.arguments[c+
2]);if(!1===g.isBoolean(e))throw Error("WHEN needs boolean test conditions");return A(a,b,c+2,e)}catch(ra){throw ra;}}function Q(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=Q(a.slice(0,d),b);a=Q(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function ga(a,
b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:c[e],valueset:!0,node:null};var f=u(b,d);if(f instanceof g.ReturnResult)return f.value;if(f===g.breakResult)throw Error("Cannot Break from a Function");if(f===g.continueResult)throw Error("Cannot Continue from a Function");return f instanceof g.ImplicitResult?f.value:f}catch(xa){throw xa;}}function h(a,b,c){return R(a,
b,function(b,d,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ga(c,b,e)})}function ha(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");
return ga(a.definition,b,arguments)}}function ja(a){console.log(a)}Object.defineProperty(e,"__esModule",{value:!0});var ma=0,da={};w.registerFunctions(da,R);L.registerFunctions(da,R);x.registerFunctions(da,R);d.registerFunctions(da,R);B.registerFunctions(da,R);y.registerFunctions(da,R);da["typeof"]=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,1,1);a=ka(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};da.iif=function(a,b){try{g.pcCheck(null===b.arguments?[]:b.arguments,
3,3);var c=u(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");var d=u(a,b.arguments[1]),e=u(a,b.arguments[2]);return!0===c?d:e}catch(ra){throw ra;}};da.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return u(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=u(a,b.arguments[0]);return S(a,b,1,c)}catch(oa){throw oa;}};da.when=function(a,
b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=u(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return A(a,b,0,c)}catch(oa){throw oa;}};da.top=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};da.first=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};da.sort=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];g.isImmutableArray(a)&&(a=a.toArray());if(!1===g.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
var d=ha(c[1]);return a=Q(a,function(a,b){return d(a,b)})}if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var e=ka(a[b]);""!==e&&(c[e]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var e="",f;for(f in c)b++,e=f;return a=1<b||"String"===e?Q(a,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||
void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===e?Q(a,function(a,b){return a-b}):"Boolean"===e?Q(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?Q(a,function(a,b){return b-a}):a.slice(0)})};for(var qa in da)da[qa]={value:new g.NativeFunction(da[qa]),valueset:!0,node:null};var U=function(){};U.prototype=da;U.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};U.prototype.pi={value:Math.PI,valueset:!0,node:null};
e.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:H,standardFunction:R};e.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:R,evaluateIdentifier:ea,arcadeCustomFunctionHandler:ha},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)da[d]={value:new g.NativeFunction(b.functions[d]),valueset:!0,node:null},U.prototype[d]=da[d];for(c=0;c<b.signatures.length;c++)f.addFunctionDeclaration(b.signatures[c],"async")};
e.executeScript=function(a,b){var c=b.spatialReference;if(null===c||void 0===c)c=new v({wkid:102100});var d=b.vars,e=b.customfunctions,f=new U;d||(d={});e||(e={});var l=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});l.immutable=!1;f.textformatting={value:l,valueset:!0,node:null};for(var h in e)f[h]={value:new g.NativeFunction(e[h]),native:!0,valueset:!0,node:null};for(h in d)f[h]=d[h]&&"esri.Graphic"===d[h].declaredClass?{value:k.createFromGraphic(d[h]),
valueset:!0,node:null}:{value:d[h],valueset:!0,node:null};a=u({spatialReference:c,globalScope:f,localScope:null,console:b.console?b.console:ja,lrucache:b.lrucache,depthCounter:1},a.body[0].body);a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof r)throw Error("Cannot return FUNCTION");if(a instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");
return a};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};e.validateScript=function(a,b){return f.validateScript(a,b,"simple")};e.referencesMember=function(a,b){return f.referencesMember(a,b)};e.referencesFunction=function(a,b){return f.referencesFunction(a,b)};e.findFunctionCalls=function(a){return f.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(I,e,p,q){Object.defineProperty(e,
"__esModule",{value:!0});e.parseScript=function(e,k){void 0===k&&(k=[]);e=q.parse("function _() { "+e+"\n}");if(null===e.body||void 0===e.body)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");if("BlockStatement"!==e.body[0].body.type)throw Error("Invalid formula content.");var m=p.validateLanguage(e);if(""!==m)throw Error(m);p.findScriptDependencies(e,k);return e};e.scriptCheck=function(e,k,r,l,b){var g=
[];try{var f=q.parse("function _() { "+e+"\n}",{tolerant:!0,loc:!0}),m=f.errors;if(0<m.length)for(var d=0;d<m.length;d++)g.push({line:m[d].lineNumber,character:m[d].column,reason:m[d].description});var y=p.checkScript(f,k,r,l,b);for(k=0;k<y.length;k++)g.push(y[k])}catch(x){try{"Unexpected token }"===x.description?(x.index=("function _() { "+e+"\n}").length-1,g.push({line:x.lineNumber,character:x.column,reason:"Unexpected end of script"})):g.push({line:x.lineNumber,character:x.column,reason:x.description})}catch(B){}}return g};
e.extractFieldLiterals=function(e,k){void 0===k&&(k=!1);return p.findFieldLiterals(e,k)};e.validateScript=function(e,k,q){return p.validateScript(e,k,q)};e.referencesMember=function(e,k){return p.referencesMember(e,k)};e.referencesFunction=function(e,k){return p.referencesFunction(e,k)}})},"esri/arcade/lib/esprima":function(){(function(I,e){"function"===typeof define&&define.amd?define(["exports"],e):"undefined"!==typeof exports?e(exports):e(I.esprima={})})(this,function(I){function e(a,b){if(!a)throw Error("ASSERT: "+
b);}function p(a){return 48<=a&&57>=a}function q(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function m(a){return 0<="01234567".indexOf(a)}function k(a){return 10===a||13===a||8232===a||8233===a}function r(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ia.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function l(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ia.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function b(a){a=
a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function g(a,b,c,d,f){e("number"===typeof c,"Comment must have valid position");J.lastCommentStart>=c||(J.lastCommentStart=c,a={type:a,value:b},z.range&&(a.range=[c,d]),z.loc&&(a.loc=f),z.comments.push(a),z.attachComment&&(z.leadingComments.push(a),z.trailingComments.push(a)))}
function f(a){var b,c,d;b=t-a;for(c={start:{line:O,column:t-P-a}};t<Z;)if(d=D.charCodeAt(t),++t,k(d)){z.comments&&(a=D.slice(b+a,t-1),c.end={line:O,column:t-P-1},g("Line",a,b,t-1,c));13===d&&10===D.charCodeAt(t)&&++t;++O;P=t;return}z.comments&&(a=D.slice(b+a,t),c.end={line:O,column:t-P},g("Line",a,b,t,c))}function w(){var a,b;for(b=0===t;t<Z;)if(a=D.charCodeAt(t),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++t;
else if(k(a))++t,13===a&&10===D.charCodeAt(t)&&++t,++O,P=t,b=!0;else if(47===a)if(a=D.charCodeAt(t+1),47===a)++t,++t,f(2),b=!0;else if(42===a){++t;++t;a:{var c=a=void 0,d=void 0,d=void 0;z.comments&&(a=t-2,c={start:{line:O,column:t-P-2}});for(;t<Z;)if(d=D.charCodeAt(t),k(d))13===d&&10===D.charCodeAt(t+1)&&++t,++O,++t,P=t,t>=Z&&G();else{if(42===d&&47===D.charCodeAt(t+1)){++t;++t;z.comments&&(d=D.slice(a+2,t-2),c.end={line:O,column:t-P},g("Block",d,a,t,c));break a}++t}G()}}else break;else if(b&&45===
a)if(45===D.charCodeAt(t+1)&&62===D.charCodeAt(t+2))t+=3,f(3);else break;else if(60===a)if("!--"===D.slice(t+1,t+4))++t,++t,++t,++t,f(4);else break;else break}function d(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(t<Z&&q(D[t]))c=D[t++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function y(){var a,b;a=D.charCodeAt(t++);b=String.fromCharCode(a);92===a&&(117!==D.charCodeAt(t)&&G(),++t,(a=d("u"))&&"\\"!==a&&r(a.charCodeAt(0))||G(),b=a);for(;t<Z;){a=
D.charCodeAt(t);if(!l(a))break;++t;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==D.charCodeAt(t)&&G(),++t,(a=d("u"))&&"\\"!==a&&l(a.charCodeAt(0))||G(),b+=a)}return b}function x(){var a=t,b=D.charCodeAt(t),c,d=D[t];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++t,z.tokenize&&(40===b?z.openParenToken=z.tokens.length:123===b&&(z.openCurlyToken=z.tokens.length)),{type:E.Punctuator,value:String.fromCharCode(b),lineNumber:O,
lineStart:P,start:a,end:t};default:if(c=D.charCodeAt(t+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return t+=2,{type:E.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:O,lineStart:P,start:a,end:t};case 33:case 61:return t+=2,61===D.charCodeAt(t)&&++t,{type:E.Punctuator,value:D.slice(a,t),lineNumber:O,lineStart:P,start:a,end:t}}}b=D.substr(t,4);if("\x3e\x3e\x3e\x3d"===b)return t+=4,{type:E.Punctuator,value:b,lineNumber:O,
lineStart:P,start:a,end:t};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return t+=3,{type:E.Punctuator,value:b,lineNumber:O,lineStart:P,start:a,end:t};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return t+=2,{type:E.Punctuator,value:b,lineNumber:O,lineStart:P,start:a,end:t};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++t,{type:E.Punctuator,value:d,lineNumber:O,lineStart:P,start:a,end:t};G()}function B(){var a,b,c;c=D[t];e(p(c.charCodeAt(0))||
"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=t;a="";if("."!==c){a=D[t++];c=D[t];if("0"===a){if("x"===c||"X"===c){++t;for(a="";t<Z&&q(D[t]);)a+=D[t++];0===a.length&&G();r(D.charCodeAt(t))&&G();return{type:E.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:O,lineStart:P,start:b,end:t}}if("b"===c||"B"===c){++t;for(c="";t<Z;){a=D[t];if("0"!==a&&"1"!==a)break;c+=D[t++]}0===c.length&&G();t<Z&&(a=D.charCodeAt(t),(r(a)||p(a))&&G());return{type:E.NumericLiteral,value:parseInt(c,
2),lineNumber:O,lineStart:P,start:b,end:t}}if("o"===c||"O"===c){m(c)?(c=!0,a="0"+D[t++]):(c=!1,++t,a="");for(;t<Z&&m(D[t]);)a+=D[t++];c||0!==a.length||G();(r(D.charCodeAt(t))||p(D.charCodeAt(t)))&&G();return{type:E.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:O,lineStart:P,start:b,end:t}}}for(;p(D.charCodeAt(t));)a+=D[t++];c=D[t]}if("."===c){for(a+=D[t++];p(D.charCodeAt(t));)a+=D[t++];c=D[t]}if("e"===c||"E"===c){a+=D[t++];c=D[t];if("+"===c||"-"===c)a+=D[t++];if(p(D.charCodeAt(t)))for(;p(D.charCodeAt(t));)a+=
D[t++];else G()}r(D.charCodeAt(t))&&G();return{type:E.NumericLiteral,value:parseFloat(a),lineNumber:O,lineStart:P,start:b,end:t}}function L(){F=null;w();W("Regular Expression language structures not supported")}function aa(){w();L()}function ba(){var a;a=z.tokens[z.tokens.length-1];if(!a)return aa();if("Punctuator"===a.type){if("]"===a.value)return x();if(")"===a.value)return a=z.tokens[z.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==
a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?x():aa();if("}"===a.value){if(z.tokens[z.openCurlyToken-3]&&"Keyword"===z.tokens[z.openCurlyToken-3].type){if(a=z.tokens[z.openCurlyToken-4],!a)return x()}else if(z.tokens[z.openCurlyToken-4]&&"Keyword"===z.tokens[z.openCurlyToken-4].type){if(a=z.tokens[z.openCurlyToken-5],!a)return aa()}else return x();if(0<=La.indexOf(a.value))return x()}return aa()}return"Keyword"===a.type&&"this"!==a.value?aa():x()}function C(){var a;w();if(t>=Z)return{type:E.EOF,
lineNumber:O,lineStart:P,start:t,end:t};a=D.charCodeAt(t);if(r(a)){var c;a=t;if(92===D.charCodeAt(t))c=y();else a:{var f;for(c=t++;t<Z;){f=D.charCodeAt(t);if(92===f){t=c;c=y();break a}if(l(f))++t;else break}c=D.slice(c,t)}return{type:1===c.length?E.Identifier:b(c)?E.Keyword:"null"===c.toLowerCase()?E.NullLiteral:"true"===c.toLowerCase()||"false"===c.toLowerCase()?E.BooleanLiteral:E.Identifier,value:c,lineNumber:O,lineStart:P,start:a,end:t}}if(40===a||41===a||59===a)return x();if(39===a||34===a){var g=
"",h,n,u;f=!1;var v,A;v=O;A=P;a=D[t];e("'"===a||'"'===a,"String literal must starts with a quote");c=t;for(++t;t<Z;)if(h=D[t++],h===a){a="";break}else if("\\"===h)if((h=D[t++])&&k(h.charCodeAt(0)))++O,"\r"===h&&"\n"===D[t]&&++t,P=t;else switch(h){case "u":case "x":if("{"===D[t]){++t;n=h=void 0;h=D[t];n=0;for("}"===h&&G();t<Z;){h=D[t++];if(!q(h))break;n=16*n+"0123456789abcdef".indexOf(h.toLowerCase())}(1114111<n||"}"!==h)&&G();h=65535>=n?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,
(n-65536&1023)+56320);g+=h}else u=t,(n=d(h))?g+=n:(t=u,g+=h);break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;default:m(h)?(n="01234567".indexOf(h),0!==n&&(f=!0),t<Z&&m(D[t])&&(f=!0,n=8*n+"01234567".indexOf(D[t++]),0<="0123".indexOf(h)&&t<Z&&m(D[t])&&(n=8*n+"01234567".indexOf(D[t++]))),g+=String.fromCharCode(n)):g+=h}else if(k(h.charCodeAt(0)))break;else g+=h;""!==a&&G();return{type:E.StringLiteral,value:g,
octal:f,startLineNumber:v,startLineStart:A,lineNumber:O,lineStart:P,start:c,end:t}}return 46===a?p(D.charCodeAt(t+1))?B():x():p(a)?B():z.tokenize&&47===a?ba():x()}function a(){var a,b,c;w();a={start:{line:O,column:t-P}};b=C();a.end={line:O,column:t-P};b.type!==E.EOF&&(c=D.slice(b.start,b.end),a={type:pa[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),z.tokens.push(a));return b}function n(){var b;b=F;t=b.end;O=b.lineNumber;P=b.lineStart;
F="undefined"!==typeof z.tokens?a():C();t=b.end;O=b.lineNumber;P=b.lineStart;return b}function c(){var b,c,d;b=t;c=O;d=P;F="undefined"!==typeof z.tokens?a():C();t=b;O=c;P=d}function v(){this.line=O;this.column=t-P}function H(){this.start=new v;this.end=null}function R(a){this.start=a.type===E.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function u(){t=F.start;F.type===E.StringLiteral?(O=F.startLineNumber,P=F.startLineStart):
(O=F.lineNumber,P=F.lineStart);z.range&&(this.range=[t,0]);z.loc&&(this.loc=new H)}function X(a){z.range&&(this.range=[a.start,0]);z.loc&&(this.loc=new R(a))}function K(){var a,b,c,d;a=t;b=O;c=P;w();d=O!==b;t=a;O=b;P=c;return d}function ia(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=a;d.column=b-P+1;d.description=c;return d}function W(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});
throw ia(O,t,c);}function fa(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});c=ia(O,t,c);if(z.errors)z.errors.push(c);else throw c;}function na(a,b){var c=T.UnexpectedToken;a&&(c=b?b:a.type===E.EOF?T.UnexpectedEOS:a.type===E.Identifier?T.UnexpectedIdentifier:a.type===E.NumericLiteral?T.UnexpectedNumber:a.type===E.StringLiteral?T.UnexpectedString:T.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");
return a&&"number"===typeof a.lineNumber?ia(a.lineNumber,a.start,c):ia(O,t,c)}function G(a,b){throw na(a,b);}function ea(a,b){a=na(a,b);if(z.errors)z.errors.push(a);else throw a;}function M(a){var b=n();b.type===E.Punctuator&&b.value===a||G(b)}function ka(){var a;z.errors?(a=F,a.type===E.Punctuator&&","===a.value?n():a.type===E.Punctuator&&";"===a.value?(n(),ea(a)):ea(a,T.UnexpectedToken)):M(",")}function S(a){var b=n();b.type===E.Keyword&&b.value.toLowerCase()===a.toLowerCase()||G(b)}function A(a){return F.type===
E.Punctuator&&F.value===a}function Q(a){return F.type===E.Keyword&&F.value.toLowerCase()===a.toLowerCase()}function ga(){var a;59===D.charCodeAt(t)||A(";")?n():(a=O,w(),O===a&&(F.type===E.EOF||A("}")||G(F)))}function h(a){return a.type===N.Identifier||a.type===N.MemberExpression}function ha(a,b){var c,d=new u;b=ca;c=Fa();ca=b;return d.finishFunctionExpression(null,a,[],c)}function ja(){var a,b;a=ca;ca=!0;b=Ha();b=ha(b.params);ca=a;return b}function ma(){var a,b=new u;a=n();return a.type===E.StringLiteral||
a.type===E.NumericLiteral?(ca&&a.octal&&ea(a,T.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function da(){var a,b,c,d=new u;a=F;if(a.type===E.Identifier)return b=ma(),"get"!==a.value||A(":")||A("(")?"set"!==a.value||A(":")||A("(")?A(":")?(n(),a=la(),d.finishProperty("init",b,a,!1,!1)):A("(")?(a=ja(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=ma(),M("("),a=F,a.type!==E.Identifier?(M(")"),ea(a),a=ha([])):(c=[ta()],M(")"),a=ha(c,a)),d.finishProperty("set",
b,a,!1,!1)):(b=ma(),M("("),M(")"),a=ha([]),d.finishProperty("get",b,a,!1,!1));if(a.type===E.EOF||a.type===E.Punctuator)G(a);else{b=ma();if(A(":"))return n(),a=la(),d.finishProperty("init",b,a,!1,!1);if(A("("))return a=ja(),d.finishProperty("init",b,a,!0,!1);G(n())}}function qa(a){var b=[],c,d,e={},f=String,g=new u;for(!0!==a&&M("{");!A("}");)a=da(),c=a.key.type===N.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?ya.Data:"get"===a.kind?ya.Get:ya.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,
c)?(e[c]===ya.Data?ca&&d===ya.Data?fa(T.StrictDuplicateProperty):d!==ya.Data&&fa(T.AccessorDataProperty):d===ya.Data?fa(T.AccessorDataProperty):e[c]&d&&fa(T.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),A("}")||ka();M("}");return g.finishObjectExpression(b)}function U(){var a,b,d,e;if(A("("))return M("("),A(")")?(n(),b=Ca.ArrowParameterPlaceHolder):(++J.parenthesisCount,b=ua(),M(")")),b;if(A("[")){b=[];var f=new u;for(M("[");!A("]");)A(",")?(n(),b.push(null)):(b.push(la()),A("]")||M(","));n();return f.finishArrayExpression(b)}if(A("{"))return qa();
a=F.type;e=new u;if(a===E.Identifier)d=e.finishIdentifier(n().value);else if(a===E.StringLiteral||a===E.NumericLiteral)ca&&F.octal&&ea(F,T.StrictOctalLiteral),d=e.finishLiteral(n());else if(a===E.Keyword){if(Q("function")){e=null;var g;d=[];var h=[],k,l=new u;S("function");A("(")||(e=ta());g=Ha(b);d=g.params;h=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(f=g.message);k=ca;g=Fa();ca&&b&&G(b,f);ca&&a&&ea(a,f);ca=k;return l.finishFunctionExpression(e,d,h,g)}Q("this")?(n(),d=e.finishThisExpression()):
G(n())}else a===E.BooleanLiteral?(b=n(),b.value="true"===b.value.toLowerCase(),d=e.finishLiteral(b)):a===E.NullLiteral?(b=n(),b.value=null,d=e.finishLiteral(b)):A("/")||A("/\x3d")?(d="undefined"!==typeof z.tokens?e.finishLiteral(aa()):e.finishLiteral(L()),c()):G(n());return d}function V(){var a=[];M("(");if(!A(")"))for(;t<Z;){a.push(la());if(A(")"))break;ka()}M(")");return a}function Y(){M(".");var a,b=new u;a=n();a.type===E.Identifier||a.type===E.Keyword||a.type===E.BooleanLiteral||a.type===E.NullLiteral||
G(a);return b.finishIdentifier(a.value)}function wa(){var a;M("[");a=ua();M("]");return a}function oa(){var a,b,c=new u;S("new");var d;e(J.allowIn,"callee of new expression always allow in keyword.");d=F;for(a=Q("new")?oa():U();;)if(A("["))b=wa(),a=(new X(d)).finishMemberExpression("[",a,b);else if(A("."))b=Y(),a=(new X(d)).finishMemberExpression(".",a,b);else break;b=A("(")?V():[];return c.finishNewExpression(a,b)}function sa(){var a,b,c=F,d,e=J.allowIn;b=F;J.allowIn=!0;for(a=Q("new")?oa():U();;)if(A("."))d=
Y(),a=(new X(b)).finishMemberExpression(".",a,d);else if(A("("))d=V(),a=(new X(b)).finishCallExpression(a,d);else if(A("["))d=wa(),a=(new X(b)).finishMemberExpression("[",a,d);else break;J.allowIn=e;F.type!==E.Punctuator||!A("++")&&!A("--")||K()||(h(a)||fa(T.InvalidLHSInAssignment),b=n(),a=(new X(c)).finishPostfixExpression(b.value,a));return a}function ra(){var a,b,c;F.type!==E.Punctuator&&F.type!==E.Keyword?b=sa():A("++")||A("--")?(c=F,a=n(),b=ra(),h(b)||fa(T.InvalidLHSInAssignment),b=(new X(c)).finishUnaryExpression(a.value,
b)):A("+")||A("-")||A("~")||A("!")?(c=F,a=n(),b=ra(),b=(new X(c)).finishUnaryExpression(a.value,b)):Q("delete")||Q("void")||Q("typeof")?(c=F,a=n(),b=ra(),b=(new X(c)).finishUnaryExpression(a.value,b),ca&&"delete"===b.operator&&b.argument.type===N.Identifier&&fa(T.StrictDelete)):b=sa();return b}function xa(a,b){var c=0;if(a.type!==E.Punctuator&&a.type!==E.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Aa(){var a,b,c,d,e,f;a=F;b=ra();if(b===Ca.ArrowParameterPlaceHolder)return b;c=F;d=xa(c,J.allowIn);if(0===d)return b;c.prec=d;n();a=[a,F];f=ra();for(e=[b,c,f];0<(d=xa(F,J.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,
b=e.pop(),a.pop(),b=(new X(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=n();c.prec=d;e.push(c);a.push(F);b=ra();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new X(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function va(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===N.Identifier)e.push(d),f.push(null),za(h,d,d.name);else if(d.type===N.AssignmentExpression)e.push(d.left),f.push(d.right),++g,za(h,d.left,d.left.name);
else return null;h.message===T.StrictParamDupe&&(a=ca?h.stricted:h.firstRestricted,G(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function la(){var a,b,c,d,e;a=J.parenthesisCount;b=e=F;var f,g;g=F;c=Aa();c!==Ca.ArrowParameterPlaceHolder&&A("?")&&(n(),f=J.allowIn,J.allowIn=!0,b=la(),J.allowIn=f,M(":"),f=la(),c=(new X(g)).finishConditionalExpression(c,b,f));if(c===Ca.ArrowParameterPlaceHolder||A("\x3d\x3e"))if(J.parenthesisCount===
a||J.parenthesisCount===a+1)if(c.type===N.Identifier?d=va([c]):c.type===N.AssignmentExpression?d=va([c]):c.type===N.SequenceExpression?d=va(c.expressions):c===Ca.ArrowParameterPlaceHolder&&(d=va([])),d)return a=d,e=new X(e),M("\x3d\x3e"),d=ca,c=A("{")?Fa():la(),ca&&a.firstRestricted&&G(a.firstRestricted,a.message),ca&&a.stricted&&ea(a.stricted,a.message),ca=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==N.BlockStatement);F.type!==E.Punctuator?a=!1:(a=F.value,a="\x3d"===a||"*\x3d"===
a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(h(c)||fa(T.InvalidLHSInAssignment),b=n(),a=la(),c=(new X(e)).finishAssignmentExpression(b.value,c,a));return c}function ua(){var a,b=F;a=la();if(A(",")){for(a=[a];t<Z&&A(",");)n(),a.push(la());a=(new X(b)).finishSequenceExpression(a)}return a}function ta(){var a,b=new u;a=n();a.type!==E.Identifier&&G(a);return b.finishIdentifier(a.value)}
function Ma(a){var b=null,c,d=new u;c=ta();"const"===a?(M("\x3d"),b=la()):A("\x3d")&&(n(),b=la());return d.finishVariableDeclarator(c,b)}function Ea(a){var b=[];do{b.push(Ma(a));if(!A(","))break;n()}while(t<Z);return b}function Ba(a){var b=F.type,c,d;b===E.EOF&&G(F);if(b===E.Punctuator&&"{"===F.value){if(a){M("{");var e=F;a=t;c=O;d=P;n();b=A(":");F=e;t=a;O=c;P=d;if((F.type===E.Identifier||F.type===E.StringLiteral)&&b)return qa(!0);a=new u;for(c=[];t<Z&&!A("}");){d=Da();if("undefined"===typeof d)break;
c.push(d)}M("}");return a.finishBlockStatement(c)}return qa()}a=new u;if(b===E.Punctuator)switch(F.value){case ";":return a=new u,M(";"),a.finishEmptyStatement();case "(":return c=ua(),ga(),a.finishExpressionStatement(c)}else if(b===E.Keyword)switch(F.value.toLowerCase()){case "break":return c=null,S("break"),59===D.charCodeAt(t)?(n(),J.inIteration||J.inSwitch||W(T.IllegalBreak),a=a.finishBreakStatement(null)):K()?(J.inIteration||J.inSwitch||W(T.IllegalBreak),a=a.finishBreakStatement(null)):(F.type===
E.Identifier&&(c=ta(),d="$"+c.name,Object.prototype.hasOwnProperty.call(J.labelSet,d)||W(T.UnknownLabel,c.name)),ga(),null!==c||J.inIteration||J.inSwitch||W(T.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,S("continue"),59===D.charCodeAt(t)?(n(),J.inIteration||W(T.IllegalContinue),a=a.finishContinueStatement(null)):K()?(J.inIteration||W(T.IllegalContinue),a=a.finishContinueStatement(null)):(F.type===E.Identifier&&(c=ta(),d="$"+c.name,Object.prototype.hasOwnProperty.call(J.labelSet,
d)||W(T.UnknownLabel,c.name)),ga(),null!==c||J.inIteration||W(T.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,k;g=J.allowIn;f=b=e=null;S("for");M("(");if(A(";"))n();else{if(Q("var")){J.allowIn=!1;var l=new u;f=n();k=Ea();f=l.finishVariableDeclaration(k,f.value);J.allowIn=g;1===f.declarations.length&&Q("in")&&(n(),c=f,d=ua(),f=null)}else J.allowIn=!1,f=ua(),J.allowIn=g,Q("in")&&(h(f)||fa(T.InvalidLHSInForIn),n(),c=f,d=ua(),f=null);"undefined"===typeof c&&M(";")}"undefined"===
typeof c&&(A(";")||(b=ua()),M(";"),A(")")||(e=ua()));M(")");k=J.inIteration;J.inIteration=!0;g=Ba(!0);J.inIteration=k;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return Ja(a);case "if":return S("if"),M("("),c=ua(),M(")"),d=Ba(!0),Q("else")?(n(),b=Ba(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,S("return"),J.inFunctionBody||fa(T.IllegalReturn),32===D.charCodeAt(t)&&r(D.charCodeAt(t+1))?(c=ua(),ga(),a=a.finishReturnStatement(c)):
K()?a=a.finishReturnStatement(null):(A(";")||A("}")||F.type===E.EOF||(c=ua()),ga(),a=a.finishReturnStatement(c)),a;case "var":return S("var"),c=Ea(),ga(),a.finishVariableDeclaration(c,"var")}c=ua();if(c.type===N.Identifier&&A(":"))return n(),b="$"+c.name,Object.prototype.hasOwnProperty.call(J.labelSet,b)&&W(T.Redeclaration,"Label",c.name),J.labelSet[b]=!0,d=Ba(!1),delete J.labelSet[b],a.finishLabeledStatement(c,d);ga();return a.finishExpressionStatement(c)}function Fa(){var a,b=[],c,d,e,f,g,h=new u;
for(M("{");t<Z&&F.type===E.StringLiteral;){c=F;a=Da();b.push(a);if(a.expression.type!==N.Literal)break;a=D.slice(c.start+1,c.end-1);"use strict"===a?(ca=!0,d&&ea(d,T.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=J.labelSet;d=J.inIteration;e=J.inSwitch;f=J.inFunctionBody;g=J.parenthesizedCount;J.labelSet={};J.inIteration=!1;J.inSwitch=!1;J.inFunctionBody=!0;for(J.parenthesizedCount=0;t<Z&&!A("}");){a=Da();if("undefined"===typeof a)break;b.push(a)}M("}");J.labelSet=c;J.inIteration=d;J.inSwitch=e;J.inFunctionBody=
f;J.parenthesizedCount=g;return h.finishBlockStatement(b)}function za(a,b,c){c="$"+c;ca?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=T.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=T.StrictParamDupe);a.paramSet[c]=!0}function Ha(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};M("(");if(!A(")"))for(a.paramSet={};t<Z;){var b=a,c=void 0,d=void 0,e=void 0,c=F,d=ta();za(b,c,c.value);A("\x3d")&&
(n(),e=la(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(A(")"))break;M(",")}M(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ja(){var a,b=[],c=[],d,e,f,g,h,k=new u;S("function");a=ta();d=Ha(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=ca;d=Fa();ca&&f&&G(f,g);ca&&e&&ea(e,g);ca=h;return k.finishFunctionDeclaration(a,b,c,d)}function Da(){if(F.type===
E.Keyword)return"function"===F.value.toLowerCase()?Ja():Ba(!1);if(F.type!==E.EOF)return Ba(!1)}function Ka(){var a,b,c,d=[];for(a=0;a<z.tokens.length;++a)b=z.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),z.range&&(c.range=b.range),z.loc&&(c.loc=b.loc),d.push(c);z.tokens=d}var E,pa,La,N,Ca,ya,T,Ia,D,ca,t,O,P,Z,F,J,z;E={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};
pa={};pa[E.BooleanLiteral]="Boolean";pa[E.EOF]="\x3cend\x3e";pa[E.Identifier]="Identifier";pa[E.Keyword]="Keyword";pa[E.NullLiteral]="Null";pa[E.NumericLiteral]="Numeric";pa[E.Punctuator]="Punctuator";pa[E.StringLiteral]="String";pa[E.RegularExpression]="RegularExpression";La="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
N={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ca={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
ya={Data:1,Get:2,Set:4};T={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ia={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
X.prototype=u.prototype={processComment:function(){var a,b,c,d=z.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===N.Program&&0<this.body.length)){if(0<z.trailingComments.length){c=[];for(e=z.trailingComments.length-1;0<=e;--e)f=z.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),z.trailingComments.splice(e,1));z.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<z.leadingComments.length)for(b=[],e=z.leadingComments.length-1;0<=e;--e)f=z.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),z.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){z.range&&(this.range[1]=t);z.loc&&(this.loc.end=
new v,z.source&&(this.loc.source=z.source));z.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=N.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=N.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?N.LogicalExpression:N.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=N.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=N.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=N.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=N.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
N.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=N.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=N.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=N.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=N.ForInStatement;this.left=a;this.right=b;this.body=c;
this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=N.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=N.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=N.Identifier;this.name=
a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=N.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=N.Literal;this.value=a.value;this.raw=D.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=N.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
N.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=N.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=N.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=N.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=N.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?N.UpdateExpression:N.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=N.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=N.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};I.version="2.0.0-dev";I.tokenize=
function(a,b){var d,e;d=String;"string"===typeof a||a instanceof String||(a=d(a));D=a;t=0;O=0<D.length?1:0;P=0;Z=D.length;F=null;J={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};z={};b=b||{};b.tokens=!0;z.tokens=[];z.tokenize=!0;z.openParenToken=-1;z.openCurlyToken=-1;z.range="boolean"===typeof b.range&&b.range;z.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(z.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(z.errors=
[]);try{c();if(F.type===E.EOF)return z.tokens;for(n();F.type!==E.EOF;)try{n()}catch(Ga){if(z.errors){z.errors.push(Ga);break}else throw Ga;}Ka();e=z.tokens;"undefined"!==typeof z.comments&&(e.comments=z.comments);"undefined"!==typeof z.errors&&(e.errors=z.errors)}catch(Ga){throw Ga;}finally{z={}}return e};I.parse=function(a,b){var d,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));D=a;t=0;O=0<D.length?1:0;P=0;Z=D.length;F=null;J={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};z={};"undefined"!==typeof b&&(z.range="boolean"===typeof b.range&&b.range,z.loc="boolean"===typeof b.loc&&b.loc,z.attachComment="boolean"===typeof b.attachComment&&b.attachComment,z.loc&&null!==b.source&&void 0!==b.source&&(z.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(z.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(z.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(z.errors=[]),z.attachComment&&(z.range=!0,z.comments=
[],z.bottomRightStack=[],z.trailingComments=[],z.leadingComments=[]));try{var f;w();c();f=new u;ca=!1;var g;a=[];for(var h,k,l;t<Z;){h=F;if(h.type!==E.StringLiteral)break;g=Da();a.push(g);if(g.expression.type!==N.Literal)break;k=D.slice(h.start+1,h.end-1);"use strict"===k?(ca=!0,l&&ea(l,T.StrictOctalLiteral)):!l&&h.octal&&(l=h)}for(;t<Z;){g=Da();if("undefined"===typeof g)break;a.push(g)}d=f.finishProgram(a);"undefined"!==typeof z.comments&&(d.comments=z.comments);"undefined"!==typeof z.tokens&&(Ka(),
d.tokens=z.tokens);"undefined"!==typeof z.errors&&(d.errors=z.errors)}catch(Na){throw Na;}finally{z={}}return d};I.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in N)N.hasOwnProperty(a)&&(b[a]=N[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/iteratorUtils ./locale @dojo/framework/shim/Promise".split(" "),
function(I,e,p,q,m,k){Object.defineProperty(e,"__esModule",{value:!0});var r=m.SetFromValues("ar ar-dz ar-kw ar-ly ar-ma ar-sa ar-tn bs ca cs da de de-at de-ch el en-au en-ca en-gb en-ie en-il en-nz es es-do es-us et fi fr fr-ca fr-ch he hi hr hu id it it-ch ja ko lt lv nb nl nl-be pl pt pt-br ro ru sl sr sr-cyrl sv th tr uk vi zh-cn zh-hk zh-tw".split(" "));e.loadMoment=function(e){void 0===e&&(e=k.getLocale());return p(this,void 0,void 0,function(){var b,g,f;return q(this,function(k){switch(k.label){case 0:return[4,
new Promise(function(b,e){I(["moment/moment"],b,e)})];case 1:return b=k.sent(),g=r.has(e),g||(f=e.split("-"),1<f.length&&r.has(f[0])&&(e=f[0],g=!0)),g?[4,new Promise(function(b,f){I(["moment/locale/"+e],b,f)})]:[3,3];case 2:return k.sent(),[3,4];case 3:e="en",k.label=4;case 4:return e!==b.locale()&&b.locale(e),[2,b]}})})}})},"*now":function(I){I(['dojo/i18n!*preload*esri/support/nls/arcadeUtils*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(I,e,p,q,m,k,r,l){function b(b){var d;try{d=b?p.parseScript(b):null}catch(x){d=null}return d}function g(d){d=b(d);return!!d&&p.scriptUsesGeometryEngine(d)}Object.defineProperty(e,"__esModule",{value:!0});e.arcade=p;e.Dictionary=q;e.arcadeFeature=m;var f=/^\$feature\./i,w={vars:{$feature:"any",$view:"any"},spatialReference:null};
e.createSyntaxTree=b;e.createFunction=function(d,e){e=e||k.clone(w);d="string"===typeof d?b(d):d;if(!d)return null;var f;try{f=d?p.compileScript(d,e):null}catch(B){f=null}return f};e.createExecContext=function(b,e){return{vars:{$feature:null==b?new m:m.createFromGraphic(b),$view:e&&e.view},spatialReference:e&&e.sr}};e.createFeature=function(b,e,f){return m.createFromGraphicLikeObject(e,b,f)};e.updateExecContext=function(b,e){b.vars.$feature=e};e.evalSyntaxTree=function(b,e){var d;try{d=p.executeScript(b,
e)}catch(B){d=null}return d};e.executeFunction=function(b,e){var d;try{d=b?b(e):null}catch(B){d=null}return d};e.executeAsyncFunction=function(b,e){try{return b?b(e):r.resolve(null)}catch(x){return r.resolve(null)}};e.extractFieldNames=function(d){if(!d)return[];d="string"===typeof d?b(d):d;if(!d)return[];var e=[];p.extractFieldLiterals(d).forEach(function(b){f.test(b)&&(b=b.replace(f,""),e.push(b))});e.sort();return e.filter(function(b,d){return 0===d||e[d-1]!==b})};e.dependsOnView=function(b){return p.referencesMember(b,
"$view")};e.hasVariable=function(b,e){return b?p.referencesMember(b,e):!1};e.getViewInfo=function(b){if(b&&(null!=b.spatialReference||null!=b.scale&&null!=b.viewingMode))return{view:b.viewingMode&&null!=b.scale?new q({viewingMode:b.viewingMode,scale:b.scale}):null,sr:b.spatialReference}};e.convertServiceUrlToWorkspace=function(b,e){var d=p.featureSetUtils();return d?d.createFeatureSetCollectionFromService(b,e):null};e.convertFeatureLayerToFeatureSet=function(b,e){if(null===b)return null;var d=p.featureSetUtils();
return d?d.constructFeatureSet(b,e):null};e.convertMapToFeatureSetCollection=function(b){if(null===b||null===b.map)return null;var d=p.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(b.map,b.spatialReference):null};e.loadScriptDependencies=function(b,e,f){void 0===f&&(f=[]);return p.loadScriptDependencies(b,e,f)};e.enableGeometryOperations=function(){return p.enableGeometrySupport()};e.enableFeatureSetOperations=function(){return p.enableFeatureSetSupport()};e.applyTextFormattingHTML=
function(b){var d=/(\n)/gi;return"string"===typeof b?b.replace(d,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):b};e.hasGeometryOperations=function(b){if(!b)return!1;if("string"===typeof b)return g(b);if("simple"===b.type||"class-breaks"===b.type||"unique-value"===b.type||"dot-density"===b.type||"dictionary"===b.type){if("dot-density"===b.type){var d=b.attributes.some(function(b){return g(b.valueExpression)});if(d)return d}d=b.visualVariables;d=!!d&&d.some(function(b){var d=g(b.valueExpression);"size"===
b.type&&(l.isSizeVariable(b.minSize)&&(d=d||g(b.minSize.valueExpression)),l.isSizeVariable(b.maxSize)&&(d=d||g(b.maxSize.valueExpression)));return d});return"valueExpression"in b&&g(b.valueExpression)?!0:d}return"esri.layers.support.LabelClass"===b.declaredClass?(b=b.labelExpressionInfo&&b.labelExpressionInfo.expression,!(!b||!g(b))||!1):"esri.PopupTemplate"===b.declaredClass?!!b.expressionInfos&&b.expressionInfos.some(function(b){return g(b.expression)}):!1}});