// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer ../layers/support/LayerCollection".split(" "),function(v,k,p,l,m,q,r,f,t,g){function h(e,d,b){for(var a,c=0,u=e.length;c<u;c++)if(a=e.getItemAt(c),a[d]===b||a&&"group"===a.type&&(a=h(a.layers,d,b)))return a}Object.defineProperty(k,"__esModule",{value:!0});var n=q.getLogger("esri.support.LayersMixin");
k.LayersMixin=function(e){return function(d){function b(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=d.call(this,a)||this;b.layers=new g.default;b.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==b&&"remove"in a.parent&&a.parent.remove(a);a.parent=b;b.layerAdded(a);"elevation"===a.type&&n.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")});b.layers.on("after-remove",function(a){a=
a.item;a.parent=null;b.layerRemoved(a)});return b}p(b,d);b.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(b.prototype,"layers",{set:function(a){this._set("layers",m.referenceSetter(a,this._get("layers"),g.default))},enumerable:!0,configurable:!0});b.prototype.findLayerById=function(a){return h(this.layers,"id",a)};b.prototype.add=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a instanceof t?(a.parent===this&&this.reorder(a,b),d.add(a,b)):
r.isThenable(a)?a.then(function(a){c.destroyed||c.add(a,b)}):n.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};b.prototype.addMany=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a.slice().forEach(function(a){a.parent===c?c.reorder(a,b):(d.add(a,b),b+=1)})};b.prototype.findLayerByUid=function(a){return h(this.layers,"uid",a)};b.prototype.remove=function(a){return this.layers.remove(a)};b.prototype.removeMany=function(a){return this.layers.removeMany(a)};
b.prototype.removeAll=function(){return this.layers.removeAll()};b.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};b.prototype.layerAdded=function(a){};b.prototype.layerRemoved=function(a){};l([f.property({type:g.default,cast:m.castForReferenceSetter})],b.prototype,"layers",null);return b=l([f.subclass("esri.support.LayersMixin")],b)}(f.declared(e))}});