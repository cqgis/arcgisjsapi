// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/assignHelper dojo/i18n!../widgets/Popup/nls/Popup ../PopupTemplate ../popup/content ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),function(w,k,l,m,n,g,p,d){function q(a,b){var c=a;b.ignoreFieldTypes&&(a=a.filter(function(a){return-1===b.ignoreFieldTypes.indexOf(a.type)}));if(0===a.length)return null;var e=b.maximumFields&&a.length>b.maximumFields;e&&(a=a.slice(0,b.maximumFields));a===c&&(a=a.slice());a.sort(r);return{fields:a,limitExceeded:e}}
function r(a,b){return"oid"===a.type?-1:"oid"===b.type?1:h(a)?-1:h(b)?1:(a.alias||a.name).toLocaleLowerCase().localeCompare((b.alias||b.name).toLocaleLowerCase())}function t(a,b){return a.map(function(a){return new p({fieldName:a.name,label:a.alias,format:u(a),visible:b?b.has(a.name):!0})})}function u(a){switch(a.type){case "small-integer":case "integer":case "single":return new d({digitSeparator:!0,places:0});case "double":return new d({digitSeparator:!0,places:2});case "date":return new d({dateFormat:"long-month-day-year"});
default:return null}}function h(a){if("name"===(a.name&&a.name.toLowerCase())||"name"===(a.alias&&a.alias.toLowerCase()))return!0}Object.defineProperty(k,"__esModule",{value:!0});k.createPopupTemplate=function(a,b){var c=a.fields,e=a.title;a=a.visibleFieldNames;if(!c)return null;b=l({},v,b);c=q(c,b);if(!c)return null;a:{b=0;for(var f=c.fields;b<f.length;b++){var d=f[b];if(h(d)){e=e+": {"+d.name+"}";break a}}}f=c.limitExceeded;b=[new g.FieldsContent,new g.AttachmentsContent];f&&b.push(new g.TextContent({text:"\x3csmall\x3e"+
m.tooManyFields+"\x3c/small\x3e"}));a=t(c.fields,a);return new n({title:e,content:b,fieldInfos:a})};var v={ignoreFieldTypes:["geometry","blob","raster","guid","xml"],maximumFields:75}});