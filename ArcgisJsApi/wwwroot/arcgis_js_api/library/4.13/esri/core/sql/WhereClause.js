// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(C,d){function u(k){for(var d=0,q=0;q<k.length;q++)d+=k[q];return d/k.length}function g(k){for(var d=u(k),q=k.length,g=0,z=0;z<k.length;z++)g+=Math.pow(k[z]-d,2);return 1<q?g/(q-1):0}Object.defineProperty(d,"__esModule",{value:!0});d.aggregateFunction=function(d,g){var q=k[d.toLowerCase()];if(null==q)throw Error("Function Not Recognised");if(g.length<q.minParams||g.length>q.maxParams)throw Error("Invalid Parameter count for call to "+
d.toUpperCase());return q.evaluate(g)};d.isAggregate=function(d,g){d=k[d.toLowerCase()];return null!=d&&g>=d.minParams&&g<=d.maxParams};var k={min:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.min.apply(Math,d[0])}},max:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.max.apply(Math,d[0])}},avg:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:u(d[0])}},sum:{minParams:1,maxParams:1,evaluate:function(d){if(null==d[0])d=null;else{d=
d[0];for(var k=0,m=0;m<d.length;m++)k+=d[m];d=k}return d}},stddev:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sqrt(g(d[0]))}},count:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].length}},var:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:g(d[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(C,d,u){Object.defineProperty(d,"__esModule",{value:!0});C=function(){function d(){this.op=
"+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}d.fixDefaults=function(d){if(null!==d.precision||null!==d.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};d.createFromMilliseconds=function(k){var q=new d;q.second=k/1E3;return q};d.createFromValueAndQualifer=function(k,g,m){var q=null,z=new d;z.op="-"===m?"-":"+";if("interval-period"===g.type){d.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");
if(/^[0-9]{1,}$/.test(k))z[g.period]=parseFloat(k);else throw Error("Illegal Interval");}else{d.fixDefaults(g.start);d.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(k))z[g.start.period]=parseFloat(k.split(" ")[0]),z[g.end.period]=
parseFloat(k.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(k))z[g.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),z.hour=parseFloat(k[0]),z.minute=parseFloat(k[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(k))z[g.start.period]=parseFloat(k.split(" ")[0]),k=k.split(" ")[1].split(":"),z.hour=parseFloat(k[0]),z.minute=
parseFloat(k[1]),z.second=parseFloat(k[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(k))z.hour=parseFloat(k.split(":")[0]),z.minute=parseFloat(k.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(k))k=k.split(":"),z.hour=parseFloat(k[0]),z.minute=parseFloat(k[1]),z.second=parseFloat(k[2]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(g.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(k))k=k.split(":"),z.minute=parseFloat(k[0]),z.second=parseFloat(k[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return z};d.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+
864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return d}();d.SqlInterval=C;d.evaluateFunction=function(d,q){var k=g[d.toLowerCase()];if(null==k)throw Error("Function Not Recognised");if(q.length<k.minParams||q.length>k.maxParams)throw Error("Invalid Parameter count for call to "+d.toUpperCase());return k.evaluate(q)};d.isStandardized=function(d,q){d=g[d.toLowerCase()];return null!=d&&q>=d.minParams&&q<=d.maxParams};var g={extract:{minParams:2,maxParams:2,evaluate:function(d){var k=d[0];
d=d[1];if(null==d)return null;if(d instanceof Date)switch(k.toUpperCase()){case "SECOND":return d.getSeconds();case "MINUTE":return d.getMinutes();case "HOUR":return d.getHours();case "DAY":return d.getDate();case "MONTH":return d.getMonth()+1;case "YEAR":return d.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(d){if(2===d.length){var k=d[0],g=d[1];return null==k||null==g?null:k.toString().substring(g-1)}if(3===d.length)return k=
d[0],g=d[1],d=d[2],null==k||null==g||null==d?null:0>=d?"":k.toString().substring(g-1,g+d-1)}},position:{minParams:2,maxParams:2,evaluate:function(d){var k=d[0];d=d[1];return null==k||null==d?null:d.indexOf(k)+1}},trim:{minParams:2,maxParams:3,evaluate:function(d){var k=3===d.length,g=k?d[1]:" ",k=k?d[2]:d[1];if(null==g||null==k)return null;g="("+u.escapeString(g)+")";switch(d[0]){case "BOTH":return k.replace(new RegExp("^"+g+"*|"+g+"*$","g"),"");case "LEADING":return k.replace(new RegExp("^"+g+"*",
"g"),"");case "TRAILING":return k.replace(new RegExp(g+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.abs(d[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.ceil(d[0])}},floor:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.floor(d[0])}},log:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])}},log10:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sin(d[0])}},cos:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.cos(d[0])}},tan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.tan(d[0])}},asin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.asin(d[0])}},acos:{minParams:1,maxParams:1,evaluate:function(d){return null==
d[0]?null:Math.acos(d[0])}},atan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.atan(d[0])}},sign:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:0<d[0]?1:0>d[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:Math.pow(d[0],d[1])}},mod:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:d[0]%d[1]}},round:{minParams:1,maxParams:2,evaluate:function(d){var g=d[0];d=2===d.length?
Math.pow(10,d[1]):1;return null==g?null:Math.round(g*d)/d}},truncate:{minParams:1,maxParams:2,evaluate:function(d){return null==d[0]?null:1===d.length?parseInt(d[0].toFixed(0),10):parseFloat(d[0].toFixed(d[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(d){return"string"===typeof d[0]||d[0]instanceof String?d[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(d){for(var g="",k=0;k<d.length;k++){if(null==d[k])return null;g+=d[k].toString()}return g}},lower:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toUpperCase()}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(C,d){var u={};d.setObject("dojo.regexp",u);u.escapeString=function(d,k){return d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(d){return k&&-1!=k.indexOf(d)?d:"\\"+d})};u.buildGroupRE=function(d,k,q){if(!(d instanceof Array))return k(d);
for(var g=[],m=0;m<d.length;m++)g.push(k(d[m]));return u.group(g.join("|"),q)};u.group=function(d,k){return"("+(k?"?:":"")+d+")"};return u})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(C,d,u){Object.defineProperty(d,"__esModule",{value:!0});C=function(){function d(){}d.parse=function(d){return u.parse(d)};return d}();d.WhereGrammar=C})},"esri/core/sql/sql92grammar":function(){define([],function(){function C(d,u,g,k){this.message=d;this.expected=
u;this.found=g;this.location=k;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,C)}(function(d,u){function g(){this.constructor=d}g.prototype=u.prototype;d.prototype=new g})(C,Error);C.buildMessage=function(d,u){function g(d){return d.charCodeAt(0).toString(16).toUpperCase()}function k(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}function q(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}var C={literal:function(d){return'"'+k(d.text)+'"'},"class":function(d){var g="",m;for(m=0;m<d.parts.length;m++)g+=d.parts[m]instanceof
Array?q(d.parts[m][0])+"-"+q(d.parts[m][1]):q(d.parts[m]);return"["+(d.inverted?"^":"")+g+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};return"Expected "+function(d){var g=Array(d.length),k;for(k=0;k<d.length;k++){var m=k,q;q=d[k];q=C[q.type](q);g[m]=q}g.sort();if(0<g.length){for(d=k=1;k<g.length;k++)g[k-1]!==g[k]&&(g[d]=g[k],d++);g.length=d}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,
-1).join(", ")+", or "+g[g.length-1]}}(d)+" but "+(u?'"'+k(u)+'"':"end of input")+" found."};return{SyntaxError:C,parse:function(d,u){function g(a,b){return{type:"literal",text:a,ignoreCase:b}}function k(a,b,h){return{type:"class",parts:a,inverted:b,ignoreCase:h}}function q(a){var b=ra[a],f;if(!b){for(f=a-1;!ra[f];)f--;b=ra[f];for(b={line:b.line,column:b.column};f<a;)10===d.charCodeAt(f)?(b.line++,b.column=1):b.column++,f++;ra[a]=b}return b}function ka(a,b){var f=q(a),p=q(b);return{start:{offset:a,
line:f.line,column:f.column},end:{offset:b,line:p.line,column:p.column}}}function m(a){b<R||(b>R&&(R=b,Da=[]),Da.push(a))}function I(){var f,p,h;f=b;p=n();p!==a?(p=F(),p!==a?(h=n(),h!==a?f=p:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function z(){var f,p,h,d,c,e,l,g;f=b;p=F();if(p!==a){h=[];d=b;c=n();c!==a?(e=la(),e!==a?(l=n(),l!==a?(g=F(),g!==a?d=c=[c,e,l,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(e=la(),e!==a?(l=n(),l!==a?(g=F(),g!==a?d=c=[c,e,l,g]:(b=d,d=
a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);if(h!==a){f={type:"expr_list"};p=[p];for(d=0;d<h.length;d++)p.push(h[d][3]);f.value=p}else b=f,f=a}else b=f,f=a;return f}function F(){var f,p,h,d,c,e,l,g;f=b;p=N();if(p!==a){h=[];d=b;c=n();c!==a?(e=Pa(),e!==a?(l=n(),l!==a?(g=N(),g!==a?d=c=[c,e,l,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(e=Pa(),e!==a?(l=n(),l!==a?(g=N(),g!==a?d=c=[c,e,l,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);h!==a?f=p=ma(p,h):(b=f,f=a)}else b=f,f=
a;return f}function N(){var f,d,h,c,e,l,g,r;f=b;d=L();if(d!==a){h=[];c=b;e=n();e!==a?(l=ga(),l!==a?(g=n(),g!==a?(r=L(),r!==a?c=e=[e,l,g,r]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);for(;c!==a;)h.push(c),c=b,e=n(),e!==a?(l=ga(),l!==a?(g=n(),g!==a?(r=L(),r!==a?c=e=[e,l,g,r]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);h!==a?f=d=ma(d,h):(b=f,f=a)}else b=f,f=a;return f}function L(){var f,p,h,c,e;f=b;p=da();p===a&&(p=b,33===d.charCodeAt(b)?(h=ad,b++):(h=a,0===l&&m(bd)),h!==a?(c=b,l++,61===d.charCodeAt(b)?
(e=Qa,b++):(e=a,0===l&&m(Ra)),l--,e===a?c=void 0:(b=c,c=a),c!==a?p=h=[h,c]:(b=p,p=a)):(b=p,p=a));p!==a?(h=n(),h!==a?(c=L(),c!==a?f=p={type:"unary_expr",operator:"NOT",expr:c}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);if(f===a)if(f=b,p=M(),p!==a)if(h=n(),h!==a){var g,r,k;h=[];c=b;e=n();e!==a?(g=ca(),g!==a?(r=n(),r!==a?(k=M(),k!==a?c=e=[e,g,r,k]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);if(c!==a)for(;c!==a;)h.push(c),c=b,e=n(),e!==a?(g=ca(),g!==a?(r=n(),r!==a?(k=M(),k!==a?c=e=[e,g,r,k]:(b=c,c=a)):(b=c,c=a)):
(b=c,c=a)):(b=c,c=a);else h=a;h!==a&&(h={type:"arithmetic",tail:h});h===a&&(h=b,c=S(),c!==a?(e=n(),e!==a?(e=O(),e!==a?(e=n(),e!==a?(e=z(),e!==a?(g=n(),g!==a?(g=P(),g!==a?h=c={op:c,right:e}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=S(),c!==a?(e=n(),e!==a?(e=O(),e!==a?(e=n(),e!==a?(e=P(),e!==a?h=c={op:c,right:{type:"expr_list",value:[]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=S(),c!==a?(e=n(),e!==a?(e=Sa(),e!==a?h=c={op:c,
right:e}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a))),h===a&&(h=b,e=da(),e!==a?(c=n(),c!==a?(c=Ta(),c!==a?(g=n(),g!==a?(g=M(),g!==a?(r=n(),r!==a?(r=ga(),r!==a?(e=n(),e!==a?(e=M(),e!==a?h=e={op:"NOT"+c,right:{type:"expr_list",value:[g,e]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,e=Ta(),e!==a?(c=n(),c!==a?(c=M(),c!==a?(g=n(),g!==a?(g=ga(),g!==a?(r=n(),r!==a?(r=M(),r!==a?h=e={op:e,right:{type:"expr_list",value:[c,r]}}:(b=h,h=a)):(b=h,h=a)):(b=
h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=Ua(),c!==a?(e=n(),e!==a?(e=da(),e!==a?(e=n(),e!==a?(e=M(),e!==a?h=c={op:c+"NOT",right:e}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=Ua(),c!==a?(e=n(),e!==a?(e=M(),e!==a?h=c={op:c,right:e}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=na(),c!==a?(e=n(),e!==a?(e=G(),e!==a?(g=n(),g!==a?(g=b,d.substr(b,6).toLowerCase()===cd?(r=d.substr(b,6),b+=6):(r=a,0===l&&m(dd)),r!==a?(r=b,l++,k=v(),l--,k===a?r=void 0:(b=r,
r=a),r!==a?g="ESCAPE":(b=g,g=a)):(b=g,g=a),g!==a?(g=n(),g!==a?(g=cc(),g!==a?h=c={op:c,right:e,escape:g.value}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=na(),c!==a?(e=n(),e!==a?(e=G(),e!==a?h=c={op:c,right:e,escape:""}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a))))));h===a&&(h=null);h!==a?(f=p,p=h,""==p||void 0==p||null==p?p=f:(h=null,p=h="arithmetic"==p.type?ma(f,p.tail):Va(p.op,f,p.right,p.escape)),f=p):(b=f,f=a)}else b=f,f=a;else b=f,f=a;return f}function ca(){var f;
d.substr(b,2)===Wa?(f=Wa,b+=2):(f=a,0===l&&m(ed));f===a&&(62===d.charCodeAt(b)?(f=fd,b++):(f=a,0===l&&m(gd)),f===a&&(d.substr(b,2)===Xa?(f=Xa,b+=2):(f=a,0===l&&m(hd)),f===a&&(d.substr(b,2)===Ya?(f=Ya,b+=2):(f=a,0===l&&m(id)),f===a&&(60===d.charCodeAt(b)?(f=jd,b++):(f=a,0===l&&m(kd)),f===a&&(61===d.charCodeAt(b)?(f=Qa,b++):(f=a,0===l&&m(Ra)),f===a&&(d.substr(b,2)===Za?(f=Za,b+=2):(f=a,0===l&&m(ld))))))));return f}function na(){var f,c,d,e;f=f=b;c=da();c!==a?(d=n(),d!==a?(e=$a(),e!==a?f=c=[c,d,e]:(b=
f,f=a)):(b=f,f=a)):(b=f,f=a);f!==a&&(f=f[0]+" "+f[2]);f===a&&(f=$a());return f}function S(){var f,c,d,e;f=f=b;c=da();c!==a?(d=n(),d!==a?(e=dc(),e!==a?f=c=[c,d,e]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);f!==a&&(f=f[0]+" "+f[2]);f===a&&(f=dc());return f}function M(){var f,c,d,e,g,l,r,k;f=b;c=T();if(c!==a){d=[];e=b;g=n();g!==a?(l=H(),l!==a?(r=n(),r!==a?(k=T(),k!==a?e=g=[g,l,r,k]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);for(;e!==a;)d.push(e),e=b,g=n(),g!==a?(l=H(),l!==a?(r=n(),r!==a?(k=T(),k!==a?e=g=[g,l,r,
k]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);d!==a?f=c=ma(c,d):(b=f,f=a)}else b=f,f=a;return f}function H(){var f;43===d.charCodeAt(b)?(f=ec,b++):(f=a,0===l&&m(fc));f===a&&(45===d.charCodeAt(b)?(f=gc,b++):(f=a,0===l&&m(hc)));return f}function T(){var f,c,d,e,g,l,r,k;f=b;c=ha();if(c!==a){d=[];e=b;g=n();g!==a?(l=V(),l!==a?(r=n(),r!==a?(k=ha(),k!==a?e=g=[g,l,r,k]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);for(;e!==a;)d.push(e),e=b,g=n(),g!==a?(l=V(),l!==a?(r=n(),r!==a?(k=ha(),k!==a?e=g=[g,l,r,k]:(b=
e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);d!==a?f=c=ma(c,d):(b=f,f=a)}else b=f,f=a;return f}function V(){var f;42===d.charCodeAt(b)?(f=md,b++):(f=a,0===l&&m(nd));f===a&&(47===d.charCodeAt(b)?(f=od,b++):(f=a,0===l&&m(pd)));return f}function ha(){var f,c,h,e,g,r,k;k=cc();if(k===a){var q,u,C,M;q=b;var B,J,H,R;B=b;J=Ab();J!==a?(H=xc(),H!==a?(R=yc(),R!==a?B=J=parseFloat(J+H+R):(b=B,B=a)):(b=B,B=a)):(b=B,B=a);B===a&&(B=b,J=Ab(),J!==a?(H=xc(),H!==a?B=J=parseFloat(J+H):(b=B,B=a)):(b=B,B=a),B===a&&(B=b,J=Ab(),
J!==a?(H=yc(),H!==a?B=J=parseFloat(J+H):(b=B,B=a)):(b=B,B=a),B===a&&(B=b,J=Ab(),J!==a&&(J=parseFloat(J)),B=J)));u=B;u!==a?(C=b,l++,M=Ea(),l--,M===a?C=void 0:(b=C,C=a),C!==a?q=u={type:"number",value:u}:(b=q,q=a)):(b=q,q=a);k=q;if(k===a){var L,I;L=b;var N,S,T,ha;N=b;d.substr(b,4).toLowerCase()===qd?(S=d.substr(b,4),b+=4):(S=a,0===l&&m(rd));S!==a?(T=b,l++,ha=v(),l--,ha===a?T=void 0:(b=T,T=a),T!==a?N=S=[S,T]:(b=N,N=a)):(b=N,N=a);I=N;I!==a&&(I={type:"bool",value:!0});L=I;if(L===a){L=b;var sa,V,U,ma;sa=
b;d.substr(b,5).toLowerCase()===sd?(V=d.substr(b,5),b+=5):(V=a,0===l&&m(td));V!==a?(U=b,l++,ma=v(),l--,ma===a?U=void 0:(b=U,U=a),U!==a?sa=V=[V,U]:(b=sa,sa=a)):(b=sa,sa=a);I=sa;I!==a&&(I={type:"bool",value:!1});L=I}k=L;if(k===a){var da,ta,ca,Fa,na;ta=b;d.substr(b,4).toLowerCase()===ud?(ca=d.substr(b,4),b+=4):(ca=a,0===l&&m(vd));ca!==a?(Fa=b,l++,na=v(),l--,na===a?Fa=void 0:(b=Fa,Fa=a),Fa!==a?ta=ca=[ca,Fa]:(b=ta,ta=a)):(b=ta,ta=a);da=ta;da!==a&&(da={type:"null",value:null});k=da;if(k===a){var ia,ka,
ra,la;ia=b;var ua,ga,ab,Ca;ua=b;d.substr(b,4).toLowerCase()===wd?(ga=d.substr(b,4),b+=4):(ga=a,0===l&&m(xd));ga!==a?(ab=b,l++,Ca=v(),l--,Ca===a?ab=void 0:(b=ab,ab=a),ab!==a?ua=ga="DATE":(b=ua,ua=a)):(b=ua,ua=a);ka=ua;ka!==a?(ra=n(),ra!==a?(la=G(),la!==a?ia=ka={type:"date",value:la.value}:(b=ia,ia=a)):(b=ia,ia=a)):(b=ia,ia=a);k=ia;if(k===a){var ja,qa,Da,ic;ja=b;var va,Bb,bb,Pa;va=b;d.substr(b,9).toLowerCase()===yd?(Bb=d.substr(b,9),b+=9):(Bb=a,0===l&&m(zd));Bb!==a?(bb=b,l++,Pa=v(),l--,Pa===a?bb=void 0:
(b=bb,bb=a),bb!==a?va=Bb="TIMESTAMP":(b=va,va=a)):(b=va,va=a);qa=va;qa!==a?(Da=n(),Da!==a?(ic=G(),ic!==a?ja=qa={type:"timestamp",value:ic.value}:(b=ja,ja=a)):(b=ja,ja=a)):(b=ja,ja=a);k=ja;if(k===a){var x,Ga,Cb,ea,Db,Ha,Qa,jc;x=b;Ga=zc();Ga!==a?(Cb=n(),Cb!==a?(45===d.charCodeAt(b)?(ea=gc,b++):(ea=a,0===l&&m(hc)),ea===a&&(43===d.charCodeAt(b)?(ea=ec,b++):(ea=a,0===l&&m(fc))),ea!==a?(Db=n(),Db!==a?(Ha=G(),Ha!==a?(Qa=n(),Qa!==a?(jc=Eb(),jc!==a?x=Ga={type:"interval",value:Ha,qualifier:jc,op:ea}:(b=x,x=
a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a);x===a&&(x=b,Ga=zc(),Ga!==a?(Cb=n(),Cb!==a?(ea=G(),ea!==a?(Db=n(),Db!==a?(Ha=Eb(),Ha!==a?x=Ga={type:"interval",value:ea,qualifier:Ha,op:""}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a));k=x}}}}}}f=k;if(f===a){var D,kc,Ra,Ta,Ua,lc,Va,Wa,Xa,mc,Ya,Za;D=b;var wa,Fb,cb,$a;wa=b;d.substr(b,7).toLowerCase()===Ad?(Fb=d.substr(b,7),b+=7):(Fb=a,0===l&&m(Bd));Fb!==a?(cb=b,l++,$a=v(),l--,$a===a?cb=void 0:(b=cb,cb=a),cb!==a?wa=Fb="EXTRACT":
(b=wa,wa=a)):(b=wa,wa=a);kc=wa;if(kc!==a)if(Ra=n(),Ra!==a)if(Ta=O(),Ta!==a)if(Ua=n(),Ua!==a){var W;W=Ac();W===a&&(W=Bc(),W===a&&(W=Cc(),W===a&&(W=Dc(),W===a&&(W=Ec(),W===a&&(W=xa())))));lc=W;lc!==a?(Va=n(),Va!==a?(Wa=nc(),Wa!==a?(Xa=n(),Xa!==a?(mc=F(),mc!==a?(Ya=n(),Ya!==a?(Za=P(),Za!==a?D=kc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:lc},mc]}}:(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)}else b=D,D=a;else b=D,D=a;else b=D,D=a;
else b=D,D=a;f=D;if(f===a){var A,oc,mb,nb,ob,Gb,pb,qb,rb,Hb,sb,Q,Ia,pc,qc,rc;A=b;var ya,Ib,db,tb;ya=b;d.substr(b,9).toLowerCase()===Cd?(Ib=d.substr(b,9),b+=9):(Ib=a,0===l&&m(Dd));Ib!==a?(db=b,l++,tb=v(),l--,tb===a?db=void 0:(b=db,db=a),db!==a?ya=Ib="SUBSTRING":(b=ya,ya=a)):(b=ya,ya=a);oc=ya;if(oc!==a)if(mb=n(),mb!==a)if(nb=O(),nb!==a)if(ob=n(),ob!==a)if(Gb=F(),Gb!==a)if(pb=n(),pb!==a)if(qb=nc(),qb!==a)if(rb=n(),rb!==a)if(Hb=F(),Hb!==a)if(sb=n(),sb!==a){Q=b;var za,Jb,eb,ub;za=b;d.substr(b,3).toLowerCase()===
Ed?(Jb=d.substr(b,3),b+=3):(Jb=a,0===l&&m(Fd));Jb!==a?(eb=b,l++,ub=v(),l--,ub===a?eb=void 0:(b=eb,eb=a),eb!==a?za=Jb="FOR":(b=za,za=a)):(b=za,za=a);Ia=za;Ia!==a?(pc=n(),pc!==a?(qc=F(),qc!==a?(rc=n(),rc!==a?Q=Ia=[Ia,pc,qc,rc]:(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a);Q===a&&(Q=null);Q!==a?(Ia=P(),Ia!==a?A=oc={type:"function",name:"substring",args:{type:"expr_list",value:Q?[Gb,Hb,Q[2]]:[Gb,Hb]}}:(b=A,A=a)):(b=A,A=a)}else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=
A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;f=A;if(f===a){var t,Ja,Kb,Lb,Mb,X,Nb,Ka,Ob,Pb,vb,sc,wb,xb;t=b;Ja=Fc();Ja!==a?(Kb=n(),Kb!==a?(Lb=O(),Lb!==a?(Mb=n(),Mb!==a?(X=Qb(),X===a&&(X=null),X!==a?(Nb=n(),Nb!==a?(Ka=F(),Ka!==a?(Ob=n(),Ob!==a?(Pb=nc(),Pb!==a?(vb=n(),vb!==a?(sc=F(),sc!==a?(wb=n(),wb!==a?(xb=P(),xb!==a?t=Ja={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},Ka,sc]}}:(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,
t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a);t===a&&(t=b,Ja=Fc(),Ja!==a?(Kb=n(),Kb!==a?(Lb=O(),Lb!==a?(Mb=n(),Mb!==a?(X=Qb(),X===a&&(X=null),X!==a?(Nb=n(),Nb!==a?(Ka=F(),Ka!==a?(Ob=n(),Ob!==a?(Pb=P(),Pb!==a?t=Ja={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},Ka]}}:(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a)):(b=t,t=a));f=t;if(f===a){var E,tc,yb,zb,Gc,uc,Hc,Ic,Jc,vc,Kc,Lc;E=b;var Aa,
Rb,fb,Mc;Aa=b;d.substr(b,8).toLowerCase()===Gd?(Rb=d.substr(b,8),b+=8):(Rb=a,0===l&&m(Hd));Rb!==a?(fb=b,l++,Mc=v(),l--,Mc===a?fb=void 0:(b=fb,fb=a),fb!==a?Aa=Rb="POSITION":(b=Aa,Aa=a)):(b=Aa,Aa=a);tc=Aa;tc!==a?(yb=n(),yb!==a?(zb=O(),zb!==a?(Gc=n(),Gc!==a?(uc=F(),uc!==a?(Hc=n(),Hc!==a?(Ic=dc(),Ic!==a?(Jc=n(),Jc!==a?(vc=F(),vc!==a?(Kc=n(),Kc!==a?(Lc=P(),Lc!==a?E=tc={type:"function",name:"position",args:{type:"expr_list",value:[uc,vc]}}:(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):
(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a);f=E;if(f===a){var K,Sb,Nc,Oc,Pc,La,Qc,Rc;K=b;var Y,gb,hb,fa;Y=b;Y=gb=ib();if(Y===a)if(Y=b,96===d.charCodeAt(b)?(gb=Sc,b++):(gb=a,0===l&&m(Tc)),gb!==a){hb=[];Uc.test(d.charAt(b))?(fa=d.charAt(b),b++):(fa=a,0===l&&m(Vc));if(fa!==a)for(;fa!==a;)hb.push(fa),Uc.test(d.charAt(b))?(fa=d.charAt(b),b++):(fa=a,0===l&&m(Vc));else hb=a;hb!==a?(96===d.charCodeAt(b)?(fa=Sc,b++):(fa=a,0===l&&m(Tc)),fa!==a?Y=gb=hb.join(""):(b=Y,Y=a)):(b=Y,Y=a)}else b=Y,Y=a;Sb=
Y;Sb!==a?(Nc=n(),Nc!==a?(Oc=O(),Oc!==a?(Pc=n(),Pc!==a?(La=z(),La===a&&(La=null),La!==a?(Qc=n(),Qc!==a?(Rc=P(),Rc!==a?K=Sb={type:"function",name:Sb,args:La?La:{type:"expr_list",value:[]}}:(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a);f=K;if(f===a){var Tb,w,Ma,Ub,Na,Vb,oa,Z,jb,Wc,Xc;w=b;Ma=Wb();if(Ma!==a)if(Ub=n(),Ub!==a)if(Na=F(),Na!==a)if(Vb=n(),Vb!==a){oa=[];for(Z=aa();Z!==a;)oa.push(Z),Z=aa();oa!==a?(Z=n(),Z!==a?(jb=Xb(),jb!==a?w=Ma={type:"case_expression",format:"simple",
operand:Na,clauses:oa,else:null}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=a;else b=w,w=a;else b=w,w=a;else b=w,w=a;if(w===a)if(w=b,Ma=Wb(),Ma!==a)if(Ub=n(),Ub!==a)if(Na=F(),Na!==a)if(Vb=n(),Vb!==a){oa=[];for(Z=aa();Z!==a;)oa.push(Z),Z=aa();oa!==a?(Z=n(),Z!==a?(jb=Yc(),jb!==a?(Wc=n(),Wc!==a?(Xc=Xb(),Xc!==a?w=Ma={type:"case_expression",format:"simple",operand:Na,clauses:oa,else:jb.value}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=a;else b=w,w=a;else b=w,w=a;else b=w,w=a;Tb=w;
if(Tb===a){var y,Oa,Yb,pa,ba,kb,Zc,$c;y=b;Oa=Wb();if(Oa!==a)if(Yb=n(),Yb!==a){pa=[];for(ba=Zb();ba!==a;)pa.push(ba),ba=Zb();pa!==a?(ba=n(),ba!==a?(kb=Xb(),kb!==a?y=Oa={type:"case_expression",format:"searched",clauses:pa,else:null}:(b=y,y=a)):(b=y,y=a)):(b=y,y=a)}else b=y,y=a;else b=y,y=a;if(y===a)if(y=b,Oa=Wb(),Oa!==a)if(Yb=n(),Yb!==a){pa=[];for(ba=Zb();ba!==a;)pa.push(ba),ba=Zb();pa!==a?(ba=n(),ba!==a?(kb=Yc(),kb!==a?(Zc=n(),Zc!==a?($c=Xb(),$c!==a?y=Oa={type:"case_expression",format:"searched",clauses:pa,
else:kb.value}:(b=y,y=a)):(b=y,y=a)):(b=y,y=a)):(b=y,y=a)):(b=y,y=a)}else b=y,y=a;else b=y,y=a;Tb=y}f=Tb;if(f===a){var lb,Ba,wc,$b,ac;Ba=b;wc=Ea();if(wc!==a){$b=[];for(ac=bc();ac!==a;)$b.push(ac),ac=bc();$b!==a?Ba=wc+=$b.join(""):(b=Ba,Ba=a)}else b=Ba,Ba=a;lb=Ba;lb!==a&&(lb={type:"column_ref",table:"",column:lb});f=lb;f===a&&(f=Sa(),f===a&&(f=b,c=O(),c!==a?(h=n(),h!==a?(e=F(),e!==a?(g=n(),g!==a?(r=P(),r!==a?(e.paren=!0,f=c=e):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)))}}}}}}}return f}
function ib(){var f,c,d,e;f=b;c=Ea();if(c!==a){d=[];for(e=v();e!==a;)d.push(e),e=v();d!==a?f=c+=d.join(""):(b=f,f=a)}else b=f,f=a;return f}function Ea(){var f;Id.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Jd));return f}function v(){var f;Kd.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Ld));return f}function bc(){var f;Md.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(Nd));return f}function Sa(){var f,c,h;f=b;64===d.charCodeAt(b)?(c=Od,b++):(c=a,0===l&&m(Pd));c!==a?(h=ib(),h!==
a?f=c=[c,h]:(b=f,f=a)):(b=f,f=a);f!==a&&(f={type:"param",value:f[1]});return f}function Qb(){var f,c,h;f=b;d.substr(b,7).toLowerCase()===Qd?(c=d.substr(b,7),b+=7):(c=a,0===l&&m(Rd));c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="LEADING":(b=f,f=a)):(b=f,f=a);f===a&&(f=b,d.substr(b,8).toLowerCase()===Sd?(c=d.substr(b,8),b+=8):(c=a,0===l&&m(Td)),c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="TRAILING":(b=f,f=a)):(b=f,f=a),f===a&&(f=b,d.substr(b,4).toLowerCase()===Ud?(c=d.substr(b,
4),b+=4):(c=a,0===l&&m(Vd)),c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="BOTH":(b=f,f=a)):(b=f,f=a)));return f}function Eb(){var f,p,h;f=b;var g,k;p=b;h=r();h!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=e(),g!==a?(k=n(),k!==a?(k=P(),k!==a?p=h={type:"interval-period",period:h.value,precision:g,secondary:null}:(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a);p===a&&(p=b,h=r(),h!==a&&(h=mb(h)),p=h);if(p!==a)if(h=n(),h!==a)if(h=b,d.substr(b,2).toLowerCase()===
Wd?(g=d.substr(b,2),b+=2):(g=a,0===l&&m(Xd)),g!==a?(g=b,l++,k=v(),l--,k===a?g=void 0:(b=g,g=a),g!==a?h="TO":(b=h,h=a)):(b=h,h=a),h!==a)if(h=n(),h!==a){var G;h=b;g=r();g!==a&&(g={type:"interval-period",period:g.value,precision:null,secondary:null});h=g;h===a&&(h=b,g=xa(),g!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=e(),g!==a?(k=n(),k!==a?(k=la(),k!==a?(k=n(),k!==a?(k=c(),k!==a?(G=n(),G!==a?(G=P(),G!==a?h=g=nb(g,k):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,
h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g=xa(),g!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=e(),g!==a?(k=n(),k!==a?(k=P(),k!==a?h=g={type:"interval-period",period:"second",precision:g,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g=xa(),g!==a&&(g={type:"interval-period",period:"second",precision:null,secondary:null}),h=g)));h!==a?f=p={type:"interval-qualifier",start:p,end:h}:(b=f,f=a)}else b=f,f=a;else b=f,f=a;else b=f,f=a;else b=
f,f=a;f===a&&(f=b,h=r(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=c(),p!==a?(g=n(),g!==a?(g=P(),g!==a?f=h={type:"interval-period",period:h.value,precision:p,secondary:null}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=r(),h!==a&&(h=mb(h)),f=h,f===a&&(f=b,h=xa(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=e(),p!==a?(g=n(),g!==a?(g=la(),g!==a?(h=n(),h!==a?(h=c(),h!==a?(g=n(),g!==a?(g=P(),g!==a?f=h=nb(p,h):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=
a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=xa(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=c(),p!==a?(g=n(),g!==a?(g=P(),g!==a?f=h={type:"interval-period",period:"second",precision:p,secondary:null}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a),f===a&&(f=b,h=xa(),h!==a&&(h={type:"interval-period",period:"second",precision:null,secondary:null}),f=h)))));return f}function r(){var f;f=b;f=Cc();f!==a&&(f={type:"string",
value:"day"});f===a&&(f=b,f=Dc(),f!==a&&(f={type:"string",value:"hour"}),f===a&&(f=b,f=Ec(),f!==a&&(f={type:"string",value:"minute"}),f===a&&(f=b,f=Bc(),f!==a&&(f={type:"string",value:"month"}),f===a&&(f=b,f=Ac(),f!==a&&(f={type:"string",value:"year"})))));return f}function c(){var b;b=U();b!==a&&(b=parseFloat(b));return b}function e(){var b;b=U();b!==a&&(b=parseFloat(b));return b}function G(){var b;b=cc();b===a&&(b=Sa());return b}function cc(){var f,c,h;f=b;39===d.charCodeAt(b)?(c=ob,b++):(c=a,0===
l&&m(pb));c===a&&(d.substr(b,2)===qb?(c=qb,b+=2):(c=a,0===l&&m(Yd)));if(c!==a){c=[];h=b;d.substr(b,2)===Ca?(h=Ca,b+=2):(h=a,0===l&&m(rb));h!==a&&(h="'");h===a&&(sb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(tb)));for(;h!==a;)c.push(h),h=b,d.substr(b,2)===Ca?(h=Ca,b+=2):(h=a,0===l&&m(rb)),h!==a&&(h="'"),h===a&&(sb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(tb)));c!==a?(39===d.charCodeAt(b)?(h=ob,b++):(h=a,0===l&&m(pb)),h!==a?f=c={type:"string",value:c.join("")}:(b=f,f=a)):(b=f,f=
a)}else b=f,f=a;return f}function Zb(){var f,c,d;f=b;c=ub();c!==a?(c=n(),c!==a?(c=F(),c!==a?(d=n(),d!==a?(d=vb(),d!==a?(d=n(),d!==a?(d=F(),d!==a?f=c={type:"when_clause",operand:c,value:d}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function aa(){var f,c,d;f=b;c=ub();c!==a?(c=n(),c!==a?(c=F(),c!==a?(d=n(),d!==a?(d=vb(),d!==a?(d=n(),d!==a?(d=F(),d!==a?f=c={type:"when_clause",operand:c,value:d}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):
(b=f,f=a);return f}function Yc(){var f,c;f=b;var h,e;c=b;d.substr(b,4).toLowerCase()===Zd?(h=d.substr(b,4),b+=4):(h=a,0===l&&m($d));h!==a?(h=b,l++,e=v(),l--,e===a?h=void 0:(b=h,h=a),h!==a?c="ELSE":(b=c,c=a)):(b=c,c=a);c!==a?(c=n(),c!==a?(c=F(),c!==a?f={type:"else_clause",value:c}:(b=f,f=a)):(b=f,f=a)):(b=f,f=a);return f}function Ab(){var f,c,h;f=U();f===a&&(f=b,45===d.charCodeAt(b)?(c=gc,b++):(c=a,0===l&&m(hc)),c===a&&(43===d.charCodeAt(b)?(c=ec,b++):(c=a,0===l&&m(fc))),c!==a?(h=U(),h!==a?f=c=c[0]+
h:(b=f,f=a)):(b=f,f=a));return f}function xc(){var f,c;f=b;46===d.charCodeAt(b)?(c=ae,b++):(c=a,0===l&&m(be));c!==a?(c=U(),c===a&&(c=null),c!==a?f="."+(null!=c?c:""):(b=f,f=a)):(b=f,f=a);return f}function yc(){var f,c,h;c=f=b;ce.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(de));h!==a?(ee.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===l&&m(fe)),h===a&&(h=null),h!==a?c="e"+(null===h?"":h):(b=c,c=a)):(b=c,c=a);c!==a?(h=U(),h!==a?f=c+h:(b=f,f=a)):(b=f,f=a);return f}function U(){var b,c;b=[];c=
wb();if(c!==a)for(;c!==a;)b.push(c),c=wb();else b=a;b!==a&&(b=b.join(""));return b}function wb(){var f;ge.test(d.charAt(b))?(f=d.charAt(b),b++):(f=a,0===l&&m(he));return f}function dc(){var f,c,h;f=b;d.substr(b,2).toLowerCase()===ie?(c=d.substr(b,2),b+=2):(c=a,0===l&&m(je));c!==a?(c=b,l++,h=v(),l--,h===a?c=void 0:(b=c,c=a),c!==a?f="IN":(b=f,f=a)):(b=f,f=a);return f}function Ua(){var f,c,h;f=b;d.substr(b,2).toLowerCase()===ke?(c=d.substr(b,2),b+=2):(c=a,0===l&&m(le));c!==a?(c=b,l++,h=v(),l--,h===a?
c=void 0:(b=c,c=a),c!==a?f="IS":(b=f,f=a)):(b=f,f=a);return f}function $a(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===me?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(ne));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="LIKE":(b=c,c=a)):(b=c,c=a);return c}function da(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===oe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(pe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="NOT":(b=c,c=a)):(b=c,c=a);return c}function ga(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===
qe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(re));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="AND":(b=c,c=a)):(b=c,c=a);return c}function Pa(){var c,e,h;c=b;d.substr(b,2).toLowerCase()===se?(e=d.substr(b,2),b+=2):(e=a,0===l&&m(te));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="OR":(b=c,c=a)):(b=c,c=a);return c}function Ta(){var c,e,h;c=b;d.substr(b,7).toLowerCase()===ue?(e=d.substr(b,7),b+=7):(e=a,0===l&&m(ve));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="BETWEEN":
(b=c,c=a)):(b=c,c=a);return c}function nc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===we?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(xe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="FROM":(b=c,c=a)):(b=c,c=a);return c}function Fc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===ye?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(ze));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="TRIM":(b=c,c=a)):(b=c,c=a);return c}function zc(){var c,e,h;c=b;d.substr(b,8).toLowerCase()===Ae?(e=d.substr(b,
8),b+=8):(e=a,0===l&&m(Be));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="INTERVAL":(b=c,c=a)):(b=c,c=a);return c}function Ac(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ce?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(De));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="YEAR":(b=c,c=a)):(b=c,c=a);return c}function Bc(){var c,e,h;c=b;d.substr(b,5).toLowerCase()===Ee?(e=d.substr(b,5),b+=5):(e=a,0===l&&m(Fe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="MONTH":(b=c,c=
a)):(b=c,c=a);return c}function Cc(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===Ge?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(He));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="DAY":(b=c,c=a)):(b=c,c=a);return c}function Dc(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ie?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Je));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="HOUR":(b=c,c=a)):(b=c,c=a);return c}function Ec(){var c,e,h;c=b;d.substr(b,6).toLowerCase()===Ke?(e=d.substr(b,6),b+=6):
(e=a,0===l&&m(Le));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="MINUTE":(b=c,c=a)):(b=c,c=a);return c}function xa(){var c,e,h;c=b;d.substr(b,6).toLowerCase()===Me?(e=d.substr(b,6),b+=6):(e=a,0===l&&m(Ne));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="SECOND":(b=c,c=a)):(b=c,c=a);return c}function Wb(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Oe?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Pe));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="CASE":(b=c,c=a)):(b=c,c=
a);return c}function Xb(){var c,e,h;c=b;d.substr(b,3).toLowerCase()===Qe?(e=d.substr(b,3),b+=3):(e=a,0===l&&m(Re));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="END":(b=c,c=a)):(b=c,c=a);return c}function ub(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Se?(e=d.substr(b,4),b+=4):(e=a,0===l&&m(Te));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="WHEN":(b=c,c=a)):(b=c,c=a);return c}function vb(){var c,e,h;c=b;d.substr(b,4).toLowerCase()===Ue?(e=d.substr(b,4),b+=4):(e=a,0===l&&
m(Ve));e!==a?(e=b,l++,h=v(),l--,h===a?e=void 0:(b=e,e=a),e!==a?c="THEN":(b=c,c=a)):(b=c,c=a);return c}function la(){var c;44===d.charCodeAt(b)?(c=We,b++):(c=a,0===l&&m(Xe));return c}function O(){var c;40===d.charCodeAt(b)?(c=Ye,b++):(c=a,0===l&&m(Ze));return c}function P(){var c;41===d.charCodeAt(b)?(c=$e,b++):(c=a,0===l&&m(af));return c}function n(){var b,c;b=[];for(c=xb();c!==a;)b.push(c),c=xb();return b}function xb(){var c;bf.test(d.charAt(b))?(c=d.charAt(b),b++):(c=a,0===l&&m(cf));return c}function Va(a,
b,c,e){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==e&&(a.escape=e);return a}function ma(a,b){for(var c=0;c<b.length;c++)a=Va(b[c][1],a,b[c][3]);return a}u=void 0!==u?u:{};var a={},yb={start:I},zb=I,ad="!",bd=g("!",!1),Qa="\x3d",Ra=g("\x3d",!1),Wa="\x3e\x3d",ed=g("\x3e\x3d",!1),fd="\x3e",gd=g("\x3e",!1),Xa="\x3c\x3d",hd=g("\x3c\x3d",!1),Ya="\x3c\x3e",id=g("\x3c\x3e",!1),jd="\x3c",kd=g("\x3c",!1),Za="!\x3d",ld=g("!\x3d",!1),ec="+",fc=g("+",!1),gc="-",hc=g("-",!1),md="*",nd=g("*",!1),od=
"/",pd=g("/",!1),Id=/^[A-Za-z_\x80-\uFFFF]/,Jd=k([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Kd=/^[A-Za-z0-9_]/,Ld=k([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Md=/^[A-Za-z0-9_.\x80-\uFFFF]/,Nd=k([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Od="@",Pd=g("@",!1),mb=function(a){return{type:"interval-period",period:a.value,precision:null,secondary:null}},nb=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},ob="'",pb=g("'",!1),qb="N'",
Yd=g("N'",!1),Ca="''",rb=g("''",!1),sb=/^[^']/,tb=k(["'"],!0,!1),ae=".",be=g(".",!1),ge=/^[0-9]/,he=k([["0","9"]],!1,!1),ce=/^[eE]/,de=k(["e","E"],!1,!1),ee=/^[+\-]/,fe=k(["+","-"],!1,!1),ud="null",vd=g("NULL",!0),qd="true",rd=g("TRUE",!0),sd="false",td=g("FALSE",!0),ie="in",je=g("IN",!0),ke="is",le=g("IS",!0),me="like",ne=g("LIKE",!0),cd="escape",dd=g("ESCAPE",!0),oe="not",pe=g("NOT",!0),qe="and",re=g("AND",!0),se="or",te=g("OR",!0),ue="between",ve=g("BETWEEN",!0),we="from",xe=g("FROM",!0),Ed="for",
Fd=g("FOR",!0),Cd="substring",Dd=g("SUBSTRING",!0),Ad="extract",Bd=g("EXTRACT",!0),ye="trim",ze=g("TRIM",!0),Gd="position",Hd=g("POSITION",!0),yd="timestamp",zd=g("TIMESTAMP",!0),wd="date",xd=g("DATE",!0),Qd="leading",Rd=g("LEADING",!0),Sd="trailing",Td=g("TRAILING",!0),Ud="both",Vd=g("BOTH",!0),Wd="to",Xd=g("TO",!0),Ae="interval",Be=g("INTERVAL",!0),Ce="year",De=g("YEAR",!0),Ee="month",Fe=g("MONTH",!0),Ge="day",He=g("DAY",!0),Ie="hour",Je=g("HOUR",!0),Ke="minute",Le=g("MINUTE",!0),Me="second",Ne=
g("SECOND",!0),Oe="case",Pe=g("CASE",!0),Qe="end",Re=g("END",!0),Se="when",Te=g("WHEN",!0),Ue="then",Ve=g("THEN",!0),Zd="else",$d=g("ELSE",!0),We=",",Xe=g(",",!1),Ye="(",Ze=g("(",!1),$e=")",af=g(")",!1),bf=/^[ \t\n\r]/,cf=k([" ","\t","\n","\r"],!1,!1),Sc="`",Tc=g("`",!1),Uc=/^[^`]/,Vc=k(["`"],!0,!1),b=0,ra=[{line:1,column:1}],R=0,Da=[],l=0,qa;if("startRule"in u){if(!(u.startRule in yb))throw Error("Can't start parsing from rule \""+u.startRule+'".');zb=yb[u.startRule]}qa=zb();if(qa!==a&&b===d.length)return qa;
qa!==a&&b<d.length&&m({type:"end"});throw function(a,b,c){return new C(C.buildMessage(a,b),a,b,c)}(Da,R<d.length?d.charAt(R):null,R<d.length?ka(R,R+1):ka(R,R));}}})},"*noref":1}});
define("require exports ../has ../iteratorUtils ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(C,d,u,g,k,q,ka){function m(d,c){d+="";return d.length>=c?d:Array(c-d.length+1).join("0")+d}function I(d,c,e,g,k,q,aa,v,u){void 0===e&&(e="0");void 0===g&&(g="0");void 0===k&&(k="0");void 0===q&&(q="0");void 0===aa&&(aa="");void 0===v&&(v="0");void 0===u&&(u="0");return"+"===aa||"-"===aa?(d=m(parseInt(d,10),4)+"-"+m(parseInt(c,10),2)+"-"+m(parseInt(e,10),2),c="",10>parseFloat(q)&&
(c="0"),g=m(parseInt(g,10),2)+":"+m(parseInt(k,10),2)+":"+(c+parseFloat(q).toString()),aa=""+aa+m(parseInt(v,10),2)+":"+m(parseInt(u,10),2),new Date(d+"T"+g+aa)):new Date(parseInt(d,10),parseInt(c,10),parseInt(e,10),parseInt(g,10),parseInt(k,10),parseFloat(q))}function z(d){var c=v.exec(d);if(null!==c){d=c[1];var e=c[2],g=c[3],k=c[4],r=c[5],m=c[6];return I(d,e,g,k,r,m)}c=bc.exec(d);if(null!==c){d=c[1];var e=c[2],g=c[3],k=c[4],r=c[5],m=c[6],q=c[7],u=c[8],c=c[9];return I(d,e,g,k,r,m,q,u,c)}c=Sa.exec(d);
if(null!==c)return d=c[1],e=c[2],g=c[3],k=c[4],r=c[5],q=c[6],u=c[7],c=c[8],I(d,e,g,k,r,"0",q,u,c);c=Qb.exec(d);if(null!==c)return d=c[1],e=c[2],g=c[3],k=c[4],r=c[5],I(d,e,g,k,r);c=Ea.exec(d);if(null!==c)return d=c[1],e=c[2],g=c[3],I(d,e,g);throw Error("SQL Invalid Timestamp");}function F(d){d=Ea.exec(d);if(null===d)throw Error("SQL Invalid Date");var c=d[2],e=d[3];return new Date(parseInt(d[1],10),parseInt(c,10)-1,parseInt(e,10))}function N(d){return Array.isArray(d)?d:[d]}function L(d){return null!==
d?!0!==d:null}function ca(d,c){return null!=d&&null!=c?!0===d&&!0===c:!1===d||!1===c?!1:null}function na(d,c){return null!=d&&null!=c?!0===d||!0===c:!0===d||!0===c?!0:null}function S(d,c){if(null==d)return null;for(var e=!1,g=0;g<c.length;g++){var k=c[g];if(null==k)e=null;else if(d===k){e=!0;break}}return e}function M(d,c,e){if(null==d)return null;for(var g="",k=0,r=0;r<c.length;r++){var m=c.charAt(r);switch(k){case 0:m===e?k=1:g=0<="-[]/{}()*+?.\\^$|".indexOf(m)?g+("\\"+m):"%"===m?g+".*":"_"===m?
g+".":g+m;break;case 1:g=0<="-[]/{}()*+?.\\^$|".indexOf(m)?g+("\\"+m):g+m,k=0}}return(new RegExp("^"+g+"$")).test(d)}function H(d){return d instanceof Date?d.valueOf():d}function T(d,c,e){if(null==c||null==e)return null;c=H(c);e=H(e);switch(d){case "\x3c\x3e":return c!==e;case "\x3d":return c===e;case "\x3e":return c>e;case "\x3c":return c<e;case "\x3e\x3d":return c>=e;case "\x3c\x3d":return c<=e}}function V(d){for(var c=[],e={},g=0;g<d.length;g++){var k=d[g],r=k.toLowerCase();void 0===e[r]&&(c.push(k),
e[r]=1)}return c}function ha(d,c,e){if(c instanceof q.SqlInterval)if(e instanceof Date)switch(d){case "+":return new Date(c.valueInMilliseconds()+e.getTime());case "-":return c.valueInMilliseconds()-e.getTime();case "*":return c.valueInMilliseconds()*e.getTime();case "/":return c.valueInMilliseconds()/e.getTime()}else if(e instanceof q.SqlInterval)switch(d){case "+":return q.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()+e.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()-
e.valueInMilliseconds());case "*":return c.valueInMilliseconds()*e.valueInMilliseconds();case "/":return c.valueInMilliseconds()/e.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(e instanceof q.SqlInterval)if(c instanceof Date)switch(d){case "+":return new Date(e.valueInMilliseconds()+c.getTime());case "-":return new Date(c.getTime()-e.valueInMilliseconds());case "*":return c.getTime()*e.valueInMilliseconds();case "/":return c.getTime()/e.valueInMilliseconds()}else e=e.valueInMilliseconds();
else if(c instanceof Date&&"number"===typeof e)switch(e*=864E5,c=c.getTime(),d){case "+":return new Date(c+e);case "-":return new Date(c-e);case "*":return new Date(c*e);case "/":return new Date(c/e)}else if(e instanceof Date&&"number"===typeof c)switch(c*=864E5,e=e.getTime(),d){case "+":return new Date(c+e);case "-":return new Date(c-e);case "*":return new Date(c*e);case "/":return new Date(c/e)}switch(d){case "+":return c+e;case "-":return c-e;case "*":return c*e;case "/":return c/e}}function ib(d,
c,e,g){d=g.getAttribute(d,c);return null!=d&&1===e[c]?new Date(d):d}Object.defineProperty(d,"__esModule",{value:!0});var Ea=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,bc=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Sa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,Qb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Eb=function(){function d(){}d.makeBool=
function(c){return!0===c};d.featureValue=function(c,d,g,k){return ib(c,d,g,k)};d.equalsNull=function(c){return null===c};d.applyLike=function(c,d,g){return M(c,d,g)};d.ensureArray=function(c){return N(c)};d.applyIn=function(c,d){return S(c,d)};d.currentDate=function(){var c=new Date;c.setHours(0,0,0,0);return c};d.makeSqlInterval=function(c,d,g){return q.SqlInterval.createFromValueAndQualifer(c,d,g)};d.convertInterval=function(c){return c instanceof q.SqlInterval?c.valueInMilliseconds():c};d.currentTimestamp=
function(){return new Date};d.compare=function(c,d,g){return T(c,d,g)};d.calculate=function(c,d,g){return ha(c,d,g)};d.makeComparable=function(c){return H(c)};d.evaluateFunction=function(c,d){return q.evaluateFunction(c,d)};d.lookup=function(c,d){c=d[c];return void 0===c?null:c};d.between=function(c,d){return null==c||null==d[0]||null==d[1]?null:c>=d[0]&&c<=d[1]};d.notbetween=function(c,d){return null==c||null==d[0]||null==d[1]?null:c<d[0]||c>d[1]};d.ternaryNot=function(c){return L(c)};d.ternaryAnd=
function(c,d){return ca(c,d)};d.ternaryOr=function(c,d){return na(c,d)};return d}();C=function(){function m(c,d){this.fieldsIndex=d;this.datefields={};this.parameters={};this.parseTree=ka.WhereGrammar.parse(c);c=this.extractExpressionInfo(d);d=c.isStandardized;var e=c.isAggregate;this.referencedFieldNames=c.referencedFieldNames;this.isStandardized=d;this.isAggregate=e}m.create=function(c,d){return new m(c,d)};Object.defineProperty(m.prototype,"fieldNames",{get:function(){return this.referencedFieldNames},
enumerable:!0,configurable:!0});m.prototype.testSet=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);for(var g={},k=function(d){g[d]=c.map(function(c){return e.getAttribute(c,d)})},m=0,q=this.fieldNames;m<q.length;m++)k(q[m]);return!!this.evaluateNode(this.parseTree,{attributes:g},d.defaultAttributeAdapter)};m.prototype.calculateValue=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);c=this.evaluateNode(this.parseTree,c,e);return c instanceof q.SqlInterval?c.valueInMilliseconds()/864E5:
c};m.prototype.calculateValueCompiled=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(c,this.parameters,e,this.datefields);if(u("csp-restrictions"))return this.calculateValue(c,e);this.compileMe();return this.parseTree._compiledVersion(c,this.parameters,e,this.datefields)};m.prototype.testFeature=function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);return!!this.evaluateNode(this.parseTree,c,e)};m.prototype.testFeatureCompiled=
function(c,e){void 0===e&&(e=d.defaultAttributeAdapter);if(void 0===this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(c,this.parameters,e,this.datefields);if(u("csp-restrictions"))return this.testFeature(c,e);this.compileMe();return!!this.parseTree._compiledVersion(c,this.parameters,e,this.datefields)};m.prototype.getFunctions=function(){var c=[];this.visitAll(this.parseTree,function(d){"function"===d.type&&c.push(d.name.toLowerCase())});return V(c)};m.prototype.getExpressions=
function(){var c=new Map;this.visitAll(this.parseTree,function(d){if("function"===d.type){var e=d.name.toLowerCase();d=d.args.value[0];if("column_ref"===d.type){d=d.column;var g=e+"-"+d;c.has(g)||c.set(g,{aggregateType:e,field:d})}}});return g.valuesOfMap(c)};m.prototype.getVariables=function(){var c=[];this.visitAll(this.parseTree,function(d){"param"===d.type&&c.push(d.value.toLowerCase())});return V(c)};m.prototype.compileMe=function(){var c="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",c)).bind(Eb)};m.prototype.extractExpressionInfo=function(c){var d=this,g=[],m=!0,r=!0;this.visitAll(this.parseTree,function(e){switch(e.type){case "column_ref":var G=e.column.toUpperCase();if("CURRENT_DATE"!==G&&"CURRENT_TIMESTAMP"!==G){var u=(G=c.get(e.column))&&G.name;!G||"date"!==G.type&&"esriFieldTypeDate"!==G.type||(d.datefields[G.name]=1);void 0!==u?(g.push(u),e.column=u):g.push(e.column)}break;
case "function":G=e.name,e=e.args.value.length,m&&(m=q.isStandardized(G,e)),r&&(r=k.isAggregate(G,e))}});return{referencedFieldNames:V(g),isStandardized:m,isAggregate:r}};m.prototype.visitAll=function(c,d){if(null!=c)switch(d(c),c.type){case "when_clause":this.visitAll(c.operand,d);this.visitAll(c.value,d);break;case "case_expression":for(var e=0,g=c.clauses;e<g.length;e++){var k=g[e];this.visitAll(k,d)}"simple"===c.format&&this.visitAll(c.operand,d);null!==c.else&&this.visitAll(c.else,d);break;case "expr_list":e=
0;for(c=c.value;e<c.length;e++)k=c[e],this.visitAll(k,d);break;case "unary_expr":this.visitAll(c.expr,d);break;case "binary_expr":this.visitAll(c.left,d);this.visitAll(c.right,d);break;case "function":this.visitAll(c.args,d)}};m.prototype.evaluateNodeToJavaScript=function(c){switch(c.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(c.value)+", "+JSON.stringify(c.qualifier)+","+JSON.stringify(c.op)+")";case "case_expression":var d="";if("simple"===c.format)for(var g=
"this.makeComparable("+this.evaluateNodeToJavaScript(c.operand)+")",d="( ",k=0;k<c.clauses.length;k++)d+=" ("+g+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(c.clauses[k].operand)+")) ? ("+this.evaluateNodeToJavaScript(c.clauses[k].value)+") : ";else for(d="( ",k=0;k<c.clauses.length;k++)d+=" this.makeBool("+this.evaluateNodeToJavaScript(c.clauses[k].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(c.clauses[k].value)+") : ";d=null!==c.else?d+this.evaluateNodeToJavaScript(c.else):
d+"null";return d+" )";case "param":return"this.lookup("+JSON.stringify(c.value.toLowerCase())+",lookups)";case "expr_list":d="[";g=0;for(c=c.value;g<c.length;g++)k=c[g],"["!==d&&(d+=","),d+=this.evaluateNodeToJavaScript(k);return d+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(c.expr)+")";case "binary_expr":switch(c.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")";case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+
","+JSON.stringify(c.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(c.operator)+
","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")"}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(c.value);case "date":return"(new Date("+F(c.value).getTime().toString()+"))";case "timestamp":return"(new Date("+z(c.value).getTime().toString()+"))";case "column_ref":return"CURRENT_DATE"===c.column.toUpperCase()?"this.currentDate()":"CURRENT_TIMESTAMP"===c.column.toUpperCase()?"this.currentTimestamp()":
"this.featureValue(feature,"+JSON.stringify(c.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(c.name)+","+this.evaluateNodeToJavaScript(c.args)+")"}throw Error("Unsupported sql syntax "+c.type);};m.prototype.evaluateNode=function(c,d,g){switch(c.type){case "interval":return d=this.evaluateNode(c.value,d,g),q.SqlInterval.createFromValueAndQualifer(d,c.qualifier,c.op);case "case_expression":if("simple"===c.format)for(var e=H(this.evaluateNode(c.operand,
d,g)),m=0;m<c.clauses.length;m++){if(e===H(this.evaluateNode(c.clauses[m].operand,d,g)))return this.evaluateNode(c.clauses[m].value,d,g)}else for(m=0;m<c.clauses.length;m++)if(!0===this.evaluateNode(c.clauses[m].operand,d,g))return this.evaluateNode(c.clauses[m].value,d,g);return null!==c.else?this.evaluateNode(c.else,d,g):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":e=[];m=0;for(c=c.value;m<c.length;m++){var r=c[m];e.push(this.evaluateNode(r,d,g))}return e;case "unary_expr":return L(this.evaluateNode(c.expr,
d,g));case "binary_expr":switch(c.operator){case "AND":return ca(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "OR":return na(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(c.left,d,g);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(c.left,d,g);case "IN":return e=N(this.evaluateNode(c.right,d,g)),S(this.evaluateNode(c.left,
d,g),e);case "NOT IN":return e=N(this.evaluateNode(c.right,d,g)),L(S(this.evaluateNode(c.left,d,g),e));case "BETWEEN":return e=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==e||null==c[0]||null==c[1]?null:e>=H(c[0])&&e<=H(c[1]);case "NOTBETWEEN":return e=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==e||null==c[0]||null==c[1]?null:e<H(c[0])||e>H(c[1]);case "LIKE":return M(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g),c.escape);case "NOT LIKE":return L(M(this.evaluateNode(c.left,
d,g),this.evaluateNode(c.right,d,g),c.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return T(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "-":case "+":case "*":case "/":return ha(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g))}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return c.value;case "date":return F(c.value);case "timestamp":return z(c.value);
case "column_ref":return"CURRENT_DATE"===c.column.toUpperCase()?(r=new Date,r.setHours(0,0,0,0),r):"CURRENT_TIMESTAMP"===c.column.toUpperCase()?new Date:ib(d,c.column,this.datefields,g);case "function":return d=this.evaluateNode(c.args,d,g),this.isAggregate?k.aggregateFunction(c.name,d):q.evaluateFunction(c.name,d)}throw Error("Unsupported sql syntax "+c.type);};return m}();d.WhereClause=C;d.defaultAttributeAdapter={getAttribute:function(d,c){return(d&&"object"===typeof d.attributes?d.attributes:
d)[c]}}});