// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators ../Histogram ../Slider ../Widget ./support/utils ../support/widget".split(" "),function(h,m,p,f,n,l,g,k,e,q,r,t,u,d){Object.defineProperty(m,"__esModule",{value:!0});h=function(h){function c(a){var b=h.call(this)||this;b.hasTimeData=null;b.histogram=new q({layout:"vertical"});
b.histogramConfig=null;b.labelFormatFunction=null;b.slider=new r({layout:"vertical",labelsVisible:!0,labelInputsEnabled:!0,rangeLabelsVisible:!0,rangeLabelInputsEnabled:!0});b.state=null;b.viewModel=null;b.zoomOptions=null;a=b.slider;b.own(a.on("max-change",function(a){return b.emit("max-change",a)}),a.on("min-change",function(a){return b.emit("min-change",a)}),a.on("thumb-change",function(a){return b.emit("thumb-change",a)}),a.on("thumb-drag",function(a){return b.emit("thumb-drag",a)}),k.watch(b,
["histogramConfig","max","min","zoomOptions"],function(){var a=b.histogram,c=b.viewModel,d=c.max,c=c.min,e=b.getParamsFromHistogramConfig(b.histogramConfig);a.set(n({},e,{max:d,min:c}))}),k.watch(b,"labelFormatFunction",function(){b.histogram.set({labelFormatFunction:b.labelFormatFunction})}));b._onMaxZoomCapPointerDown=b._onMaxZoomCapPointerDown.bind(b);b._onMinZoomCapPointerDown=b._onMinZoomCapPointerDown.bind(b);return b}p(c,h);c.prototype.postInitialize=function(){var a=this,b=this.histogramConfig,
c=this.labelFormatFunction,d=this.viewModel,e=d.max,f=d.min,b=this.getParamsFromHistogramConfig(void 0===b?{}:b);this.own(k.watch(d,"max",function(){return a.notifyChange("max")}),k.watch(d,"min",function(){return a.notifyChange("min")}));this.histogram.set(n({},b,{labelFormatFunction:c,max:e,min:f}));this.slider.set({viewModel:d})};Object.defineProperty(c.prototype,"max",{get:function(){return this.viewModel?this.viewModel.getUnzoomedMax():null},set:function(a){this.viewModel.max=a;this._set("max",
a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"min",{get:function(){return this.viewModel?this.viewModel.getUnzoomedMin():null},set:function(a){this.viewModel.min=a;this._set("min",a)},enumerable:!0,configurable:!0});c.prototype.renderContent=function(a,b,c){this.slider.extraNodes=[a,this.renderHistogram(c)];return d.tsx("div",{class:b},this.slider.render())};c.prototype.renderHistogram=function(a){return this.histogramConfig?d.tsx("div",{class:a?a:null},this.histogram.render()):
null};c.prototype.renderBackgroundFillDefinition=function(a){return d.tsx("pattern",{id:a,patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},d.tsx("image",{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))};
c.prototype.renderRampFillDefinition=function(a,b){return d.tsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"1"},this.renderRampFillStops(b))};c.prototype.renderRampFillStops=function(a){var b=this;return a.reverse().map(function(a,c){return b.renderStop(a,c)})};c.prototype.renderStop=function(a,b){a=this.getPropsForStop(a);return d.tsx("stop",{key:b+"-stop",offset:a.offset,"stop-color":a.color,"stop-opacity":a.opacity})};c.prototype.renderZoomCaps=function(){return[this.renderMaxZoomCap(),this.renderMinZoomCap()]};
c.prototype.renderMinZoomCap=function(){if(this.zoomOptions&&g.isSome(this.zoomOptions.min))return d.tsx("svg",{key:"bottom",class:this.classes("zoom-cap","zoom-cap--min"),viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg",onpointerdown:this._onMinZoomCapPointerDown},d.tsx("polygon",{class:"zoom-cap--mask",key:"mask",fill:"#1B8617",points:"0 11.3846154 30 11.3846154 30 1 25 5.38461538 20 1 15 5.38461538 10 1 5 5.38461538 0 1"}),d.tsx("polygon",{class:"zoom-cap--underline",key:"underline",fill:"#69DCFF",
points:"0 0 5 4.38461538 10 0 15 4.38461538 20 0 25 4.38461538 30 0 30 4.61538462 25 9 20 4.61538462 15 9 10 4.61538462 5 9 0 4.61538462"}),d.tsx("polygon",{class:"zoom-cap--line",key:"line",fill:"#DA5656",points:"0 1 5 5.38461538 10 1 15 5.38461538 20 1 25 5.38461538 30 1 30 5.61538462 25 10 20 5.61538462 15 10 10 5.61538462 5 10 0 5.61538462"}))};c.prototype.renderMaxZoomCap=function(){if(this.zoomOptions&&g.isSome(this.zoomOptions.max))return d.tsx("svg",{key:"top",class:this.classes("zoom-cap",
"zoom-cap--max"),viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg",onpointerdown:this._onMaxZoomCapPointerDown},d.tsx("polygon",{class:"zoom-cap--mask",key:"mask",points:"0 -1.81994377e-12 30 -1.81994377e-12 30 8.23076923 25 3.61538462 20 8.23076923 15 3.61538462 10 8.23076923 5 3.61538462 0 8.23076923"}),d.tsx("polygon",{class:"zoom-cap--underline",key:"underline",points:"0 5.61538462 5 1 10 5.61538462 15 1 20 5.61538462 25 1 30 5.61538462 30 10.2307692 25 5.61538462 20 10.2307692 15 5.61538462 10 10.2307692 5 5.61538462 0 10.2307692"}),
d.tsx("polygon",{class:"zoom-cap--line",key:"line",points:"0 4.61538462 5 -1.87329639e-12 10 4.61538462 15 -1.87329639e-12 20 4.61538462 25 -1.87329639e-12 30 4.61538462 30 9.23076923 25 4.61538462 20 9.23076923 15 4.61538462 10 9.23076923 5 4.61538462 0 9.23076923"}))};c.prototype.getPropsForStop=function(a){var b=a.color;a=a.offset;return{color:b instanceof l?b.toCss(!0):l.fromString(b).toCss(!0),offset:(100*a).toFixed(2)+"%",opacity:b instanceof l?b.toRgba()[3]:null}};c.prototype.getParamsFromHistogramConfig=
function(a){return a?{average:a.average,barCreatedFunction:a.barCreatedFunction,bins:a.bins,dataLineCreatedFunction:a.dataLineCreatedFunction,dataLines:this._getDataLines(a)}:null};c.prototype._onMaxZoomCapPointerDown=function(a){(a=this.zoomOptions)&&g.isSome(a.max)&&(a=a.min,this.zoomOptions=g.isSome(a)?{min:a}:null)};c.prototype._onMinZoomCapPointerDown=function(a){(a=this.zoomOptions)&&g.isSome(a.min)&&(a=a.max,this.zoomOptions=g.isSome(a)?{max:a}:null)};c.prototype._getDataLines=function(a){return this._getStandardDeviationDataLines(a.standardDeviation,
a.average,a.standardDeviationCount||1).concat(a.dataLines||[])};c.prototype._getStandardDeviationDataLines=function(a,b,c){return u.getDeviationValues(a,b,c).map(function(a){return{value:a}})};f([e.aliasOf("viewModel.hasTimeData")],c.prototype,"hasTimeData",void 0);f([e.property()],c.prototype,"histogram",void 0);f([e.property()],c.prototype,"histogramConfig",void 0);f([e.aliasOf("viewModel.labelFormatFunction")],c.prototype,"labelFormatFunction",void 0);f([e.property({dependsOn:["viewModel.max",
"viewModel.zoomOptions"]})],c.prototype,"max",null);f([e.property({dependsOn:["viewModel.min","viewModel.zoomOptions"]})],c.prototype,"min",null);f([e.property()],c.prototype,"slider",void 0);f([e.aliasOf("viewModel.state")],c.prototype,"state",void 0);f([e.aliasOf("viewModel.values")],c.prototype,"values",void 0);f([e.property()],c.prototype,"viewModel",void 0);f([e.aliasOf("viewModel.zoomOptions")],c.prototype,"zoomOptions",void 0);return c=f([e.subclass("esri.widgets.smartMapping.SmartMappingSliderBase")],
c)}(e.declared(t));m.SmartMappingSliderBase=h});