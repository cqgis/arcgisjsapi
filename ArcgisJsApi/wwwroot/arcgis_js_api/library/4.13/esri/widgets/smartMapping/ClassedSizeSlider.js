// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./ClassedSizeSlider/nls/ClassedSizeSlider ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/support/ClassBreakInfo ./SmartMappingSliderBase ./ClassedSizeSlider/ClassedSizeSliderViewModel ./../support/widget".split(" "),function(w,x,y,q,e,r,p,f,t,u,v,g){return function(l){function c(a){a=l.call(this)||this;a._backgroundFillColor="#e0e0e0";
a._fillColor="#959595";a._rampNode=null;a.breaks=null;a.label=r.widgetLabel;a.viewModel=new v;return a}q(c,l);h=c;c.fromRendererResult=function(a,b){a=a.renderer.classBreakInfos.map(function(a){var b=a.symbol,d;switch(b.type){case "simple-line":d=b.width;break;case "simple-marker":d=b.size;break;case "picture-marker":d=b.size}return{min:a.minValue,max:a.maxValue,size:d}});return new h({breaks:a,histogramConfig:{bins:b?b.bins:[]}})};c.prototype.updateClassBreakInfos=function(a){var b=this.breaks;if(b.length!==
a.length)console.error("Number of input breakInfos must match number of slider breaks: "+b.length);else return a.map(function(a,k){a=a.symbol;switch(a.type){case "simple-line":a.width=b[k].size;break;case "simple-marker":a.size=b[k].size;break;case "picture-marker":a.size=b[k].size}return new t.default({minValue:b[k].min,maxValue:b[k].max,symbol:a})})};c.prototype.updateFromRendererResult=function(a,b){a=a.renderer.classBreakInfos.map(function(a){var b=a.symbol,d;switch(b.type){case "simple-line":d=
b.width;break;case "simple-marker":d=b.size;break;case "picture-marker":d=b.size}return{min:a.minValue,max:a.maxValue,size:d}});this.set({breaks:a,histogramConfig:{bins:b?b.bins:[]}})};c.prototype.render=function(){var a,b=this.label,d="disabled"===this.state,c=this.classes("esri-classed-size-slider","esri-widget","esri-widget--panel",(a={},a["esri-disabled"]=d,a));return g.tsx("div",{"aria-label":b,class:c},d?null:this.renderContent(this.renderRamp(),"esri-classed-size-slider__slider-container",
"esri-classed-size-slider__histogram-container"))};c.prototype.renderRamp=function(){return g.tsx("div",{afterCreate:g.storeNode,bind:this,class:"esri-classed-size-slider__ramp","data-node-ref":"_rampNode"},g.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},g.tsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,height:"100%",width:"100%"}),this.renderPath()))};c.prototype.renderPath=function(){if(this._rampNode){var a=this._rampNode,b=a.offsetHeight,d=void 0===b?0:b,a=a.offsetWidth,c=void 0===a?0:
a;if(p.isSome(d)&&p.isSome(c)){var b=this.breaks,f=this.viewModel,e=f.min,a=this._fillColor,h=f.max-e,l=c/b.length,b=b.map(function(a){return[d-Math.round((a.min-e)/h*d),d-Math.round((a.max-e)/h*d)]});b.reverse();var m=c,n="M"+m+" 0";b.forEach(function(a,b){n+="L"+m+" "+a[0];m=c-l*(b+1);n+="L"+m+" "+a[0]});n+="L1 "+d+" L0 "+d+" L0 0 Z";return g.tsx("path",{d:n,fill:a})}}};var h;e([f.aliasOf("viewModel.breaks")],c.prototype,"breaks",void 0);e([f.property()],c.prototype,"label",void 0);e([f.property(),
g.renderable(["viewModel.hasTimeData","viewModel.labelFormatFunction","viewModel.max","viewModel.min","viewModel.values"])],c.prototype,"viewModel",void 0);return c=h=e([f.subclass("esri.widgets.smartMapping.ClassedSizeSlider")],c)}(f.declared(u.SmartMappingSliderBase))});