// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/Logger ../../core/unitFormatUtils ../../core/unitUtils ../../core/unitUtils ../../core/accessorSupport/decorators ./AreaMeasurement2DTool ../support/commonProperties ../support/InteractiveToolViewModel".split(" "),function(u,v,l,d,m,n,e,h,f,c,p,q,r){var t={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]},g=n.getLogger("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel");
return function(k){function a(b){b=k.call(this,b)||this;b.supportedViewType="2d";b.geodesicDistanceThreshold=1E5;b.measurement=null;b.palette=t;b.tool=null;return b}l(a,k);Object.defineProperty(a.prototype,"measurementLabel",{get:function(){if(!this.measurement)return null;var b={area:null,perimeter:null},a=this.measurement,c=a.area,a=a.perimeter;switch(this.unit){case "metric":b.area=e.formatMetricArea(c,"square-meters");break;case "imperial":b.area=e.formatImperialArea(c,"square-meters");break;
default:c=h.convertUnit(c,"square-meters",this.unit),b.area=e.formatDecimal(c,this.unit)}c=this._deriveLengthUnitFromAreaUnit(this.unit);switch(c){case "metric":b.perimeter=e.formatMetricLength(a,"meters");break;case "imperial":b.perimeter=e.formatImperialLength(a,"meters");break;default:a=h.convertUnit(a,"meters",c),b.perimeter=e.formatDecimal(a,c)}return b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this.isDisabled||this.tool.projectionEngineRequired&&
!this.tool.projectionEngineSupported?"disabled":this.measurement?this.tool.active?"measuring":"measured":"ready"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"unit",{get:function(){return this._validateUnit(this.defaultUnit)},set:function(b){void 0===b?this._clearOverride("unit"):this._override("unit",this._validateUnit(b))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"unitOptions",{get:function(){return f.measurementAreaUnits},set:function(b){void 0===
b?this._clearOverride("unitOptions"):this._override("unitOptions",this._validateUnits(b))},enumerable:!0,configurable:!0});a.prototype.newMeasurement=function(){this.tool&&this.tool.newMeasurement()};a.prototype.clearMeasurement=function(){this.tool&&this.tool.clearMeasurement()};a.prototype.createToolParams=function(){return{toolConstructor:p,constructorArguments:{viewModel:this}}};a.prototype.logUnsupportedError=function(){g.error("AreaMeasurement2D widget is not implemented for SceneView")};a.prototype.logError=
function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];g.error.apply(g,b)};a.prototype._deriveLengthUnitFromAreaUnit=function(a){switch(a){case "metric":return"metric";case "imperial":return"imperial";case "square-inches":return"inches";case "square-feet":return"feet";case "square-yards":return"yards";case "square-miles":return"miles";case "square-us-feet":return"us-feet";case "square-meters":return"meters";case "square-kilometers":return"kilometers";case "acres":return"imperial";case "ares":case "hectares":return"metric";
case "square-millimeters":return"millimeters";case "square-centimeters":return"centimeters";case "square-decimeters":return"decimeters"}throw new m("area-measurement-2d-viewmodel:unhandled-area-unit","Unexpected area unit encountered.");};a.prototype._validateUnit=function(a){return-1!==this.unitOptions.indexOf(a)?a:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]};a.prototype._validateUnits=function(a){void 0===a&&(a=[]);a=a.filter(function(a){return-1!==f.measurementAreaUnits.indexOf(a)});
return 0===a.length?f.measurementAreaUnits.slice():a};d([c.property(q.defaultUnitPropertyMetadata)],a.prototype,"defaultUnit",void 0);d([c.property({type:Number})],a.prototype,"geodesicDistanceThreshold",void 0);d([c.property()],a.prototype,"measurement",void 0);d([c.property({dependsOn:["measurement","unit","geodesicDistanceThreshold"],readOnly:!0})],a.prototype,"measurementLabel",null);d([c.property()],a.prototype,"palette",void 0);d([c.property({dependsOn:["isDisabled","measurement","tool.projectionEngineRequired",
"tool.active"],readOnly:!0})],a.prototype,"state",null);d([c.property({constructOnly:!0,readOnly:!0})],a.prototype,"tool",void 0);d([c.property({type:String,dependsOn:["unitOptions","defaultUnit"]})],a.prototype,"unit",null);d([c.property({type:[String]})],a.prototype,"unitOptions",null);return a=d([c.subclass("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],a)}(c.declared(r))});