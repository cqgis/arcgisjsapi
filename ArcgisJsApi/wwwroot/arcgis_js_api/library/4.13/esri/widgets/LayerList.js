// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/libs/sortablejs/Sortable":function(){(function(L,E){"object"===typeof exports&&"undefined"!==typeof module?module.exports=E():"function"===typeof define&&define.amd?define(E):(L=L||self,L.Sortable=E())})(this,function(){function L(a){L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return L(a)}function E(){E=Object.assign||
function(a){for(var c=1;c<arguments.length;c++){var f=arguments[c],q;for(q in f)Object.prototype.hasOwnProperty.call(f,q)&&(a[q]=f[q])}return a};return E.apply(this,arguments)}function N(a){for(var c=1;c<arguments.length;c++){var f=null!=arguments[c]?arguments[c]:{},q=Object.keys(f);"function"===typeof Object.getOwnPropertySymbols&&(q=q.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable})));q.forEach(function(c){var q=f[c];c in a?Object.defineProperty(a,
c,{value:q,enumerable:!0,configurable:!0,writable:!0}):a[c]=q})}return a}function d(a,c){if(null==a)return{};var f;if(null==a)f={};else{f={};var q=Object.keys(a),b,m;for(m=0;m<q.length;m++)b=q[m],0<=c.indexOf(b)||(f[b]=a[b])}if(Object.getOwnPropertySymbols)for(m=Object.getOwnPropertySymbols(a),b=0;b<m.length;b++)q=m[b],0<=c.indexOf(q)||Object.prototype.propertyIsEnumerable.call(a,q)&&(f[q]=a[q]);return f}function O(a){var c;if(Array.isArray(a)){c=0;for(var f=Array(a.length);c<a.length;c++)f[c]=a[c];
c=f}else c=void 0;c||(c=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=c))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function r(a){return!!navigator.userAgent.match(a)}function v(a,c,f){a.addEventListener(c,f,!ha&&gb)}function p(a,c,f){a.removeEventListener(c,f,!ha&&gb)}function z(a,c){if(c){"\x3e"===c[0]&&(c=c.substring(1));if(a)try{if(a.matches)return a.matches(c);if(a.msMatchesSelector)return a.msMatchesSelector(c);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(c)}catch(f){}return!1}}function I(a,c,f,q){if(a){f=f||document;do{if(null!=c&&("\x3e"===c[0]?a.parentNode===f&&z(a,c):z(a,c))||q&&a===f)return a;if(a===f)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function x(a,c,f){if(a&&c)if(a.classList)a.classList[f?"add":"remove"](c);else{var q=(" "+a.className+" ").replace(hb," ").replace(" "+c+" "," ");a.className=(q+(f?" "+c:"")).replace(hb," ")}}function l(a,
c,f){var q=a&&a.style;if(q){if(void 0===f)return document.defaultView&&document.defaultView.getComputedStyle?f=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(f=a.currentStyle),void 0===c?f:f[c];c in q||-1!==c.indexOf("webkit")||(c="-webkit-"+c);q[c]=f+("string"===typeof f?"":"px")}}function C(a,c){var f="";if("string"===typeof a)f=a;else{do{var q=l(a,"transform");q&&"none"!==q&&(f=q+" "+f)}while(!c&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix)&&
new a(f)}function k(a,c,f){if(a){a=a.getElementsByTagName(c);c=0;var q=a.length;if(f)for(;c<q;c++)f(a[c],c);return a}return[]}function e(){return ha?document.documentElement:document.scrollingElement}function D(a,c,f,q,b){if(a.getBoundingClientRect||a===window){var G,m,h,g,u,d,k;a!==window&&a!==e()?(G=a.getBoundingClientRect(),m=G.top,h=G.left,g=G.bottom,u=G.right,d=G.height,k=G.width):(h=m=0,g=window.innerHeight,u=window.innerWidth,d=window.innerHeight,k=window.innerWidth);if((c||f)&&a!==window&&
(b=b||a.parentNode,!ha)){do if(b&&b.getBoundingClientRect&&("none"!==l(b,"transform")||f&&"static"!==l(b,"position"))){g=b.getBoundingClientRect();m-=g.top+parseInt(l(b,"border-top-width"));h-=g.left+parseInt(l(b,"border-left-width"));g=m+G.height;u=h+G.width;break}while(b=b.parentNode)}q&&a!==window&&(q=(a=C(b||a))&&a.a,b=a&&a.d,a&&(m/=b,h/=q,k/=q,d/=b,g=m+d,u=h+k));return{top:m,left:h,bottom:g,right:u,width:k,height:d}}}function w(a,c,f){var q=g(a,!0);for(a=D(a)[c];q;){c=D(q)[f];var b=void 0,b=
"top"===f||"left"===f?a>=c:a<=c;if(!b)return q;if(q===e())break;q=g(q,!1)}return!1}function y(a,c,f){for(var q=0,b=0,m=a.children;b<m.length;){if("none"!==m[b].style.display&&m[b]!==u.ghost&&m[b]!==u.dragged&&I(m[b],f.draggable,a,!1)){if(q===c)return m[b];q++}b++}return null}function U(a,c){for(a=a.lastElementChild;a&&(a===u.ghost||"none"===l(a,"display")||c&&!z(a,c));)a=a.previousElementSibling;return a||null}function J(a,c){var f=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===
a.nodeName.toUpperCase()||a===u.clone||c&&!z(a,c)||f++;return f}function R(a){var c=0,f=0,q=e();if(a){do var b=C(a),m=b.d,c=c+a.scrollLeft*b.a,f=f+a.scrollTop*m;while(a!==q&&(a=a.parentNode))}return[c,f]}function b(a,c){for(var f in a)if(a.hasOwnProperty(f))for(var q in c)if(c.hasOwnProperty(q)&&c[q]===a[f][q])return Number(f);return-1}function g(a,c){if(!a||!a.getBoundingClientRect)return e();var f=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var q=l(a);if(a.clientWidth<a.scrollWidth&&
("auto"==q.overflowX||"scroll"==q.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==q.overflowY||"scroll"==q.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(f||c)return a;f=!0}}while(a=a.parentNode);return e()}function h(a,c){return Math.round(a.top)===Math.round(c.top)&&Math.round(a.left)===Math.round(c.left)&&Math.round(a.height)===Math.round(c.height)&&Math.round(a.width)===Math.round(c.width)}function K(a,c){return function(){if(!wa){var f=arguments;1===f.length?a.call(this,
f[0]):a.apply(this,f);wa=setTimeout(function(){wa=void 0},c)}}}function Z(a,c,f){a.scrollLeft+=c;a.scrollTop+=f}function M(a){var c=window.Polymer,f=window.jQuery||window.Zepto;return c&&c.dom?c.dom(a).cloneNode(!0):f?f(a).clone(!0)[0]:a.cloneNode(!0)}function ja(a,c){l(a,"position","absolute");l(a,"top",c.top);l(a,"left",c.left);l(a,"width",c.width);l(a,"height",c.height)}function n(a){l(a,"position","");l(a,"top","");l(a,"left","");l(a,"width","");l(a,"height","")}function ub(){var a=[],c;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==l(c,"display")&&c!==u.ghost){a.push({target:c,rect:D(c)});var f=N({},a[a.length-1].rect);if(c.thisAnimationDuration){var b=C(c,!0);b&&(f.top-=b.f,f.left-=b.e)}c.fromRect=f}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(b(a,{target:c}),1)},animateAll:function(f){var q=this;if(this.options.animation){var b=!1,m=0;a.forEach(function(a){var c=0,f=a.target,G=f.fromRect,g=D(f),
ia=f.prevFromRect,ib=f.prevToRect;a=a.rect;var e=C(f,!0);e&&(g.top-=e.f,g.left-=e.e);f.toRect=g;f.thisAnimationDuration&&h(ia,g)&&!h(G,g)&&(a.top-g.top)/(a.left-g.left)===(G.top-g.top)/(G.left-g.left)&&(c=Math.sqrt(Math.pow(ia.top-a.top,2)+Math.pow(ia.left-a.left,2))/Math.sqrt(Math.pow(ia.top-ib.top,2)+Math.pow(ia.left-ib.left,2))*q.options.animation);h(g,G)||(f.prevFromRect=G,f.prevToRect=g,c||(c=q.options.animation),q.animate(f,a,g,c));c&&(b=!0,m=Math.max(m,c),clearTimeout(f.animationResetTimer),
f.animationResetTimer=setTimeout(function(){f.animationTime=0;f.prevFromRect=null;f.fromRect=null;f.prevToRect=null;f.thisAnimationDuration=null},c),f.thisAnimationDuration=c)});clearTimeout(c);b?c=setTimeout(function(){"function"===typeof f&&f()},m):"function"===typeof f&&f();a=[]}else clearTimeout(c),"function"===typeof f&&f()},animate:function(a,c,b,m){if(m){l(a,"transition","");l(a,"transform","");var f=C(this.el),q=(c.left-b.left)/(f&&f.a||1);c=(c.top-b.top)/(f&&f.d||1);a.animatingX=!!q;a.animatingY=
!!c;l(a,"transform","translate3d("+q+"px,"+c+"px,0)");l(a,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:""));l(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){l(a,"transition","");l(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},m)}}}}function m(a){var c=a.sortable,f=a.rootEl,q=a.name,b=a.targetEl,m=a.cloneEl,g=a.toEl,h=a.fromEl,e=a.oldIndex,u=a.newIndex,d=a.oldDraggableIndex,
k=a.newDraggableIndex,l=a.originalEvent,n=a.putSortable,X=a.extraEventProperties;if(c=c||f&&f[W]){var K=c.options,F="on"+q.charAt(0).toUpperCase()+q.substr(1);!window.CustomEvent||ha||xa?(a=document.createEvent("Event"),a.initEvent(q,!0,!0)):a=new CustomEvent(q,{bubbles:!0,cancelable:!0});a.to=g||f;a.from=h||f;a.item=b||f;a.clone=m;a.oldIndex=e;a.newIndex=u;a.oldDraggableIndex=d;a.newDraggableIndex=k;a.originalEvent=l;a.pullMode=n?n.lastPutMode:void 0;var q=N({},X,ya.getEventProperties(q,c)),Z;for(Z in q)a[Z]=
q[Z];f&&f.dispatchEvent(a);K[F]&&K[F].call(c,a)}}function F(a){m(N({putSortable:V,cloneEl:Q,targetEl:t,rootEl:P,oldIndex:sa,oldDraggableIndex:za,newIndex:ba,newDraggableIndex:ka},a))}function u(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=c=E({},c);a[W]=this;var f={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,
invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return jb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,c){a.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==u.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};ya.initializePlugins(this,a,f);for(var q in f)q in c||(c[q]=f[q]);kb(c);for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this));if(this.nativeDraggable=c.forceFallback?!1:vb)this.options.touchStartThreshold=1;c.supportPointer?v(a,"pointerdown",this._onTapStart):(v(a,"mousedown",this._onTapStart),v(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(v(a,"dragover",this),v(a,"dragenter",this));Ja.push(this.el);c.store&&c.store.get&&this.sort(c.store.get(this)||[]);E(this,ub())}function X(a,c,f,q,b,m,g,h){var G,ia=a[W],e=ia.options.onMove,u;!window.CustomEvent||ha||xa?(G=document.createEvent("Event"),G.initEvent("move",!0,!0)):G=new CustomEvent("move",{bubbles:!0,cancelable:!0});G.to=c;G.from=a;G.dragged=f;G.draggedRect=q;G.related=b||c;G.relatedRect=m||D(c);G.willInsertAfter=h;G.originalEvent=g;a.dispatchEvent(G);
e&&(u=e.call(ia,G,g));return u}function ma(a){a.draggable=!1}function wb(){Va=!1}function xb(a,c,f){f=D(U(f.el,f.options.draggable));return c?a.clientX>f.right+10||a.clientX<=f.right&&a.clientY>f.bottom&&a.clientX>=f.left:a.clientX>f.right&&a.clientY>f.top||a.clientX<=f.right&&a.clientY>f.bottom+10}function yb(a,c,f,b,m,g,h,e){a=b?a.clientY:a.clientX;var q=b?f.height:f.width,G=b?f.top:f.left;f=b?f.bottom:f.right;b=!1;if(!h)if(e&&Ka<q*m)if(!Aa&&(1===Ba?a>G+q*g/2:a<f-q*g/2)&&(Aa=!0),Aa)b=!0;else{if(1===
Ba?a<G+Ka:a>f-Ka)return-Ba}else if(a>G+q*(1-m)/2&&a<f-q*(1-m)/2)return c=J(t)<J(c)?1:-1,c;if(b||h)if(a<G+q*g/2||a>f-q*g/2)return a>G+q/2?1:-1;return 0}function zb(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var c=a.length,f=0;c--;)f+=a.charCodeAt(c);return f.toString(36)}function Ab(a){La.length=0;a=a.getElementsByTagName("input");for(var c=a.length;c--;){var f=a[c];f.checked&&La.push(f)}}function Ma(a){return setTimeout(a,0)}function Na(){S.forEach(function(a){clearInterval(a.pid)});
S=[]}function Wa(){}function na(){}function Bb(a,c){A.forEach(function(f,b){(b=c.children[f.sortableIndex+(a?Number(b):0)])?c.insertBefore(f,b):c.appendChild(f)})}function lb(a,c){ca.forEach(function(f,b){(b=c.children[f.sortableIndex+(a?Number(b):0)])?c.insertBefore(f,b):c.appendChild(f)})}function Oa(){A.forEach(function(a){a!==H&&a.parentNode&&a.parentNode.removeChild(a)})}var ha=r(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xa=r(/Edge/i),mb=r(/firefox/i),Xa=r(/safari/i)&&!r(/chrome/i)&&
!r(/android/i),Ca=r(/iP(ad|od|hone)/i),Cb=r(/chrome/i)&&r(/android/i),gb={capture:!1,passive:!1},hb=/\s+/g,wa,W="Sortable"+(new Date).getTime(),Da=[],Ya={initializeByDefault:!0},ya={mount:function(a){for(var c in Ya)!Ya.hasOwnProperty(c)||c in a||(a[c]=Ya[c]);Da.push(a)},pluginEvent:function(a,c,f){var b=this;this.eventCanceled=!1;f.cancel=function(){b.eventCanceled=!0};var m=a+"Global";Da.forEach(function(b){if(c[b.pluginName]){if(c[b.pluginName][m])c[b.pluginName][m](N({sortable:c},f));if(c.options[b.pluginName]&&
c[b.pluginName][a])c[b.pluginName][a](N({sortable:c},f))}})},initializePlugins:function(a,c,f,b){Da.forEach(function(b){var q=b.pluginName;if(a.options[q]||b.initializeByDefault)b=new b(a,c,a.options),b.sortable=a,b.options=a.options,a[q]=b,E(f,b.defaults)});for(var q in a.options)a.options.hasOwnProperty(q)&&(b=this.modifyOption(a,q,a.options[q]),"undefined"!==typeof b&&(a.options[q]=b))},getEventProperties:function(a,c){var f={};Da.forEach(function(b){"function"===typeof b.eventProperties&&E(f,
b.eventProperties.call(c[b.pluginName],a))});return f},modifyOption:function(a,c,f){var b;Da.forEach(function(q){a[q.pluginName]&&q.optionListeners&&"function"===typeof q.optionListeners[c]&&(b=q.optionListeners[c].call(a[q.pluginName],f))});return b}},aa=function(a,c){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=f.evt,f=d(f,["evt"]);ya.pluginEvent.bind(u)(a,c,N({dragEl:t,parentEl:T,ghostEl:B,rootEl:P,nextEl:oa,lastDownEl:Pa,cloneEl:Q,cloneHidden:la,dragStarted:Ea,putSortable:V,
activeSortable:u.active,originalEvent:b,oldIndex:sa,oldDraggableIndex:za,newIndex:ba,newDraggableIndex:ka,hideGhostForTarget:nb,unhideGhostForTarget:ob,cloneNowHidden:function(){la=!0},cloneNowShown:function(){la=!1},dispatchSortableEvent:function(a){F({sortable:c,name:a,originalEvent:b})}},f))};if("undefined"===typeof window||!window.document)throw Error("Sortable.js requires a window with a document");var t,T,B,P,oa,Pa,Q,la,sa,ba,za,ka,Qa,V,ta=!1,Ra=!1,Ja=[],pa,fa,Za,$a,pb,qb,Ea,ua,Ba,Aa=!1,Sa=
!1,Ka,Y,ab=[],Va=!1,La=[],rb=xa||ha?"cssFloat":"float",vb=!Cb&&!Ca&&"draggable"in document.createElement("div"),sb=function(){if(ha)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),jb=function(a,c){var f=l(a),b=parseInt(f.width)-parseInt(f.paddingLeft)-parseInt(f.paddingRight)-parseInt(f.borderLeftWidth)-parseInt(f.borderRightWidth),m=y(a,0,c);a=y(a,1,c);var g=m&&l(m);c=a&&l(a);var h=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+
D(m).width,e=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+D(a).width;return"flex"===f.display?"column"===f.flexDirection||"column-reverse"===f.flexDirection?"vertical":"horizontal":"grid"===f.display?1>=f.gridTemplateColumns.split(" ").length?"vertical":"horizontal":m&&g["float"]&&"none"!==g["float"]?(f="left"===g["float"]?"left":"right",!a||"both"!==c.clear&&c.clear!==f?"horizontal":"vertical"):m&&("block"===g.display||"flex"===g.display||"table"===g.display||"grid"===g.display||h>=b&&"none"===
f[rb]||a&&"none"===f[rb]&&h+e>b)?"vertical":"horizontal"},Db=function(a,c,f){var b=f?a.left:a.top,m=f?a.right:a.bottom;a=f?a.width:a.height;var g=f?c.left:c.top,h=f?c.right:c.bottom;c=f?c.width:c.height;return b===g||m===h||b+a/2===g+c/2},Eb=function(a,c){var f;Ja.some(function(b){if(!U(b)){var q=D(b),m=b[W].options.emptyInsertThreshold,g=a>=q.left-m&&a<=q.right+m,q=c>=q.top-m&&c<=q.bottom+m;if(m&&g&&q)return f=b}});return f},kb=function(a){function c(a,f){return function(b,q,m,g){var h=b.options.group.name&&
q.options.group.name&&b.options.group.name===q.options.group.name;if(null==a&&(f||h))return!0;if(null==a||!1===a)return!1;if(f&&"clone"===a)return a;if("function"===typeof a)return c(a(b,q,m,g),f)(b,q,m,g);b=(f?b:q).options.group.name;return!0===a||"string"===typeof a&&a===b||a.join&&-1<a.indexOf(b)}}var f={},b=a.group;b&&"object"==L(b)||(b={name:b});f.name=b.name;f.checkPull=c(b.pull,!0);f.checkPut=c(b.put);f.revertClone=b.revertClone;a.group=f},nb=function(){!sb&&B&&l(B,"display","none")},ob=function(){!sb&&
B&&l(B,"display","")};document.addEventListener("click",function(a){if(Ra)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ra=!1},!0);var qa=function(a){if(t){a=a.touches?a.touches[0]:a;var c=Eb(a.clientX,a.clientY);if(c){var f={},b;for(b in a)a.hasOwnProperty(b)&&(f[b]=a[b]);f.target=f.rootEl=c;f.preventDefault=void 0;f.stopPropagation=void 0;c[W]._onDragOver(f)}}},Fb=function(a){t&&t.parentNode[W]._isOutsideThisEl(a.target)};
u.prototype={constructor:u,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(ua=null)},_getDirection:function(a,c){return"function"===typeof this.options.direction?this.options.direction.call(this,a,c,t):this.options.direction},_onTapStart:function(a){if(a.cancelable){var c=this,f=this.el,b=this.options,m=b.preventOnFilter,g=a.type,h=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,e=(h||a).target,u=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||
e,d=b.filter;Ab(f);if(!(t||/mousedown|pointerdown/.test(g)&&0!==a.button||b.disabled||u.isContentEditable||(e=I(e,b.draggable,f,!1),e&&e.animated||Pa===e))){sa=J(e);za=J(e,b.draggable);if("function"===typeof d){if(d.call(this,a,e,this)){F({sortable:c,rootEl:u,name:"filter",targetEl:e,toEl:f,fromEl:f});aa("filter",c,{evt:a});m&&a.cancelable&&a.preventDefault();return}}else if(d&&(d=d.split(",").some(function(b){if(b=I(u,b.trim(),f,!1))return F({sortable:c,rootEl:b,name:"filter",targetEl:e,fromEl:f,
toEl:f}),aa("filter",c,{evt:a}),!0}))){m&&a.cancelable&&a.preventDefault();return}b.handle&&!I(u,b.handle,f,!1)||this._prepareDragStart(a,h,e)}}},_prepareDragStart:function(a,c,f){var b=this,m=b.el,g=b.options,h=m.ownerDocument;if(f&&!t&&f.parentNode===m){var e=D(f);P=m;t=f;T=t.parentNode;oa=t.nextSibling;Pa=f;Qa=g.group;u.dragged=t;pa={target:t,clientX:(c||a).clientX,clientY:(c||a).clientY};pb=pa.clientX-e.left;qb=pa.clientY-e.top;this._lastX=(c||a).clientX;this._lastY=(c||a).clientY;t.style["will-change"]=
"all";f=function(){aa("delayEnded",b,{evt:a});u.eventCanceled?b._onDrop():(b._disableDelayedDragEvents(),!mb&&b.nativeDraggable&&(t.draggable=!0),b._triggerDragStart(a,c),F({sortable:b,name:"choose",originalEvent:a}),x(t,g.chosenClass,!0))};g.ignore.split(",").forEach(function(a){k(t,a.trim(),ma)});v(h,"dragover",qa);v(h,"mousemove",qa);v(h,"touchmove",qa);v(h,"mouseup",b._onDrop);v(h,"touchend",b._onDrop);v(h,"touchcancel",b._onDrop);mb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,
t.draggable=!0);aa("delayStart",this,{evt:a});!g.delay||g.delayOnTouchOnly&&!c||this.nativeDraggable&&(xa||ha)?f():u.eventCanceled?this._onDrop():(v(h,"mouseup",b._disableDelayedDrag),v(h,"touchend",b._disableDelayedDrag),v(h,"touchcancel",b._disableDelayedDrag),v(h,"mousemove",b._delayedDragTouchMoveHandler),v(h,"touchmove",b._delayedDragTouchMoveHandler),g.supportPointer&&v(h,"pointermove",b._delayedDragTouchMoveHandler),b._dragStartTimer=setTimeout(f,g.delay))}},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){t&&ma(t);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;p(a,"mouseup",this._disableDelayedDrag);p(a,"touchend",this._disableDelayedDrag);p(a,"touchcancel",this._disableDelayedDrag);
p(a,"mousemove",this._delayedDragTouchMoveHandler);p(a,"touchmove",this._delayedDragTouchMoveHandler);p(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,c){c=c||"touch"==a.pointerType&&a;!this.nativeDraggable||c?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):c?v(document,"touchmove",this._onTouchMove):v(document,"mousemove",this._onTouchMove):(v(t,"dragend",this),v(P,"dragstart",this._onDragStart));try{document.selection?Ma(function(){document.selection.empty()}):
window.getSelection().removeAllRanges()}catch(f){}},_dragStarted:function(a,c){ta=!1;if(P&&t){aa("dragStarted",this,{evt:c});this.nativeDraggable&&v(document,"dragover",Fb);var f=this.options;!a&&x(t,f.dragClass,!1);x(t,f.ghostClass,!0);u.active=this;a&&this._appendGhost();F({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(fa){this._lastX=fa.clientX;this._lastY=fa.clientY;nb();for(var a=document.elementFromPoint(fa.clientX,fa.clientY),c=a;a&&a.shadowRoot;){a=
a.shadowRoot.elementFromPoint(fa.clientX,fa.clientY);if(a===c)break;c=a}t.parentNode[W]._isOutsideThisEl(a);if(c){do{if(c[W]){var f=void 0;if((f=c[W]._onDragOver({clientX:fa.clientX,clientY:fa.clientY,target:a,rootEl:c}))&&!this.options.dragoverBubble)break}a=c}while(c=c.parentNode)}ob()}},_onTouchMove:function(a){if(pa){var c=this.options,f=c.fallbackTolerance,b=c.fallbackOffset,c=a.touches?a.touches[0]:a,m=B&&C(B),g=B&&m&&m.a,h=B&&m&&m.d,e=Ca&&Y&&R(Y),g=(c.clientX-pa.clientX+b.x)/(g||1)+(e?e[0]-
ab[0]:0)/(g||1),b=(c.clientY-pa.clientY+b.y)/(h||1)+(e?e[1]-ab[1]:0)/(h||1);if(!u.active&&!ta){if(f&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<f)return;this._onDragStart(a,!0)}B&&(m?(m.e+=g-(Za||0),m.f+=b-($a||0)):m={a:1,b:0,c:0,d:1,e:g,f:b},f="matrix(".concat(m.a,",").concat(m.b,",").concat(m.c,",").concat(m.d,",").concat(m.e,",").concat(m.f,")"),l(B,"webkitTransform",f),l(B,"mozTransform",f),l(B,"msTransform",f),l(B,"transform",f),Za=g,$a=b,fa=c);a.cancelable&&a.preventDefault()}},
_appendGhost:function(){if(!B){var a=this.options.fallbackOnBody?document.body:P,c=D(t,!0,Ca,!0,a),f=this.options;if(Ca){for(Y=a;"static"===l(Y,"position")&&"none"===l(Y,"transform")&&Y!==document;)Y=Y.parentNode;Y!==document.body&&Y!==document.documentElement?(Y===document&&(Y=e()),c.top+=Y.scrollTop,c.left+=Y.scrollLeft):Y=e();ab=R(Y)}B=t.cloneNode(!0);x(B,f.ghostClass,!1);x(B,f.fallbackClass,!0);x(B,f.dragClass,!0);l(B,"transition","");l(B,"transform","");l(B,"box-sizing","border-box");l(B,"margin",
0);l(B,"top",c.top);l(B,"left",c.left);l(B,"width",c.width);l(B,"height",c.height);l(B,"opacity","0.8");l(B,"position",Ca?"absolute":"fixed");l(B,"zIndex","100000");l(B,"pointerEvents","none");u.ghost=B;a.appendChild(B);l(B,"transform-origin",pb/parseInt(B.style.width)*100+"% "+qb/parseInt(B.style.height)*100+"%")}},_onDragStart:function(a,c){var f=this,b=a.dataTransfer,m=f.options;aa("dragStart",this,{evt:a});u.eventCanceled?this._onDrop():(aa("setupClone",this),u.eventCanceled||(Q=M(t),Q.draggable=
!1,Q.style["will-change"]="",this._hideClone(),x(Q,this.options.chosenClass,!1),u.clone=Q),f.cloneId=Ma(function(){aa("clone",f);u.eventCanceled||(f.options.removeCloneOnHide||P.insertBefore(Q,t),f._hideClone(),F({sortable:f,name:"clone"}))}),!c&&x(t,m.dragClass,!0),c?(Ra=!0,f._loopId=setInterval(f._emulateDragOver,50)):(p(document,"mouseup",f._onDrop),p(document,"touchend",f._onDrop),p(document,"touchcancel",f._onDrop),b&&(b.effectAllowed="move",m.setData&&m.setData.call(f,b,t)),v(document,"drop",
f),l(t,"transform","translateZ(0)")),ta=!0,f._dragStartId=Ma(f._dragStarted.bind(f,c,a)),v(document,"selectstart",f),Ea=!0,Xa&&l(document.body,"user-select","none"))},_onDragOver:function(a){function c(c,f){aa(c,M,N({evt:a,isOwner:v,axis:r?"vertical":"horizontal",revert:k,dragRect:e,targetRect:d,canSort:y,fromSortable:R,target:h,completed:b,onMove:function(c,b){return X(P,g,t,e,c,D(c),a,b)},changed:m},f))}function f(){c("dragOverAnimationCapture");M.captureAnimationState();M!==R&&R.captureAnimationState()}
function b(b){c("dragOverCompleted",{insertion:b});b&&(v?p._hideClone():p._showClone(M),M!==R&&(x(t,V?V.options.ghostClass:p.options.ghostClass,!1),x(t,n.ghostClass,!0)),V!==M&&M!==u.active?V=M:M===u.active&&V&&(V=null),R===M&&(M._ignoreWhileAnimating=h),M.animateAll(function(){c("dragOverAnimationComplete");M._ignoreWhileAnimating=null}),M!==R&&(R.animateAll(),R._ignoreWhileAnimating=null));if(h===t&&!t.animated||h===g&&!h.animated)ua=null;n.dragoverBubble||a.rootEl||h===document||(t.parentNode[W]._isOutsideThisEl(a.target),
!b&&qa(a));!n.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return A=!0}function m(){ba=J(t);ka=J(t,n.draggable);F({sortable:M,name:"change",toEl:g,newIndex:ba,newDraggableIndex:ka,originalEvent:a})}var g=this.el,h=a.target,e,d,k,n=this.options,K=n.group,p=u.active,v=Qa===K,y=n.sort,R=V||p,r,M=this,A=!1;if(!Va){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();h=I(h,n.draggable,g,!0);c("dragOver");if(u.eventCanceled)return A;if(t.contains(a.target)||h.animated&&h.animatingX&&h.animatingY||
M._ignoreWhileAnimating===h)return b(!1);Ra=!1;if(p&&!n.disabled&&(v?y||(k=!P.contains(t)):V===this||(this.lastPutMode=Qa.checkPull(this,p,t,a))&&K.checkPut(this,p,t,a))){r="vertical"===this._getDirection(a,h);e=D(t);c("dragOverValid");if(u.eventCanceled)return A;if(k)return T=P,f(),this._hideClone(),c("revert"),u.eventCanceled||(oa?P.insertBefore(t,oa):P.appendChild(t)),b(!0);K=U(g,n.draggable);if(!K||xb(a,r,this)&&!K.animated){if(K===t)return b(!1);K&&g===a.target&&(h=K);h&&(d=D(h));if(!1!==X(P,
g,t,e,h,d,a,!!h))return f(),g.appendChild(t),T=g,m(),b(!0)}else if(h.parentNode===g){d=D(h);var C=0,ma,C=t.parentNode!==g,z=!Db(t.animated&&t.toRect||e,h.animated&&h.toRect||d,r),K=r?"top":"left",ja=w(h,"top","top")||w(t,"top","top"),E=ja?ja.scrollTop:void 0;ua!==h&&(ma=d[K],Aa=!1,Sa=!z&&n.invertSwap||C);var C=yb(a,h,d,r,z?1:n.swapThreshold,null==n.invertedSwapThreshold?n.swapThreshold:n.invertedSwapThreshold,Sa,ua===h),H;if(0!==C){z=J(t);do z-=C,H=T.children[z];while(H&&("none"===l(H,"display")||
H===B))}if(0===C||H===h)return b(!1);ua=h;Ba=C;H=h.nextElementSibling;z=!1;z=1===C;C=X(P,g,t,e,h,d,a,z);if(!1!==C){if(1===C||-1===C)z=1===C;Va=!0;setTimeout(wb,30);f();z&&!H?g.appendChild(t):h.parentNode.insertBefore(t,z?H:h);ja&&Z(ja,0,E-ja.scrollTop);T=t.parentNode;void 0===ma||Sa||(Ka=Math.abs(ma-D(h)[K]));m();return b(!0)}}if(g.contains(t))return b(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){p(document,"mousemove",this._onTouchMove);p(document,"touchmove",this._onTouchMove);
p(document,"pointermove",this._onTouchMove);p(document,"dragover",qa);p(document,"mousemove",qa);p(document,"touchmove",qa)},_offUpEvents:function(){var a=this.el.ownerDocument;p(a,"mouseup",this._onDrop);p(a,"touchend",this._onDrop);p(a,"pointerup",this._onDrop);p(a,"touchcancel",this._onDrop);p(document,"selectstart",this)},_onDrop:function(a){var c=this.el,b=this.options;ba=J(t);ka=J(t,b.draggable);aa("drop",this,{evt:a});T=t&&t.parentNode;ba=J(t);ka=J(t,b.draggable);if(!u.eventCanceled&&(Aa=Sa=
ta=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(p(document,"drop",this),p(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xa&&l(document.body,"user-select",""),a&&(Ea&&(a.cancelable&&a.preventDefault(),!b.dropBubble&&a.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(P===T||V&&"clone"!==V.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),t&&(this.nativeDraggable&&
p(t,"dragend",this),ma(t),t.style["will-change"]="",Ea&&!ta&&x(t,V?V.options.ghostClass:this.options.ghostClass,!1),x(t,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:T,newIndex:null,newDraggableIndex:null,originalEvent:a}),P!==T?(0<=ba&&(F({rootEl:T,name:"add",toEl:T,fromEl:P,originalEvent:a}),F({sortable:this,name:"remove",toEl:T,originalEvent:a}),F({rootEl:T,name:"sort",toEl:T,fromEl:P,originalEvent:a}),F({sortable:this,name:"sort",toEl:T,originalEvent:a})),V&&V.save()):ba!==
sa&&0<=ba&&(F({sortable:this,name:"update",toEl:T,originalEvent:a}),F({sortable:this,name:"sort",toEl:T,originalEvent:a})),u.active)))){if(null==ba||-1===ba)ba=sa,ka=za;F({sortable:this,name:"end",toEl:T,originalEvent:a});this.save()}this._nulling()},_nulling:function(){aa("nulling",this);P=t=T=B=oa=Q=Pa=la=pa=fa=Ea=ba=ka=sa=za=ua=Ba=V=Qa=u.dragged=u.ghost=u.clone=u.active=null;La.forEach(function(a){a.checked=!0});La.length=Za=$a=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":t&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],c,b=this.el.children,m=0,g=b.length,h=this.options;m<g;m++)c=b[m],I(c,h.draggable,this.el,!1)&&a.push(c.getAttribute(h.dataIdAttr)||zb(c));return a},sort:function(a){var c={},b=this.el;this.toArray().forEach(function(a,f){f=b.children[f];I(f,this.options.draggable,b,!1)&&(c[a]=
f)},this);a.forEach(function(a){c[a]&&(b.removeChild(c[a]),b.appendChild(c[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,c){return I(a,c||this.options.draggable,this.el,!1)},option:function(a,c){var b=this.options;if(void 0===c)return b[a];var m=ya.modifyOption(this,a,c);b[a]="undefined"!==typeof m?m:c;"group"===a&&kb(b)},destroy:function(){aa("destroy",this);var a=this.el;a[W]=null;p(a,"mousedown",this._onTapStart);p(a,"touchstart",this._onTapStart);p(a,
"pointerdown",this._onTapStart);this.nativeDraggable&&(p(a,"dragover",this),p(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();Ja.splice(Ja.indexOf(this.el),1);this.el=a=null},_hideClone:function(){la||(aa("hideClone",this),u.eventCanceled||(l(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),la=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():
la&&(aa("showClone",this),u.eventCanceled||(P.contains(t)&&!this.options.group.revertClone?P.insertBefore(Q,t):oa?P.insertBefore(Q,oa):P.appendChild(Q),this.options.group.revertClone&&this.animate(t,Q),l(Q,"display",""),la=!1))}};v(document,"touchmove",function(a){(u.active||ta)&&a.cancelable&&a.preventDefault()});u.utils={on:v,off:p,css:l,find:k,is:function(a,c){return!!I(a,c,a,!1)},extend:function(a,c){if(a&&c)for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},throttle:K,closest:I,toggleClass:x,
clone:M,index:J,nextTick:Ma,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:jb,getChild:y};u.get=function(a){return a[W]};u.mount=function(){for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];c[0].constructor===Array&&(c=c[0]);c.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(u.utils=N({},u.utils,a.utils));ya.mount(a)})};u.create=function(a,c){return new u(a,
c)};u.version="1.10.0";var S=[],Fa,bb,cb=!1,db,eb,Ta,va,fb=K(function(a,c,b,m){if(c.scroll){var f=(a.touches?a.touches[0]:a).clientX,h=(a.touches?a.touches[0]:a).clientY,q=c.scrollSensitivity,d=c.scrollSpeed,n=e(),k=!1,K;bb!==b&&(bb=b,Na(),Fa=c.scroll,K=c.scrollFn,!0===Fa&&(Fa=g(b,!0)));b=0;var X=Fa;do{var F=X,w=D(F),p=w.top,t=w.bottom,v=w.left,R=w.right,M=w.width,w=w.height,y=void 0,r=void 0,C=F.scrollWidth,x=F.scrollHeight,r=l(F),A=F.scrollLeft,z=F.scrollTop;F===n?(y=M<C&&("auto"===r.overflowX||
"scroll"===r.overflowX||"visible"===r.overflowX),r=w<x&&("auto"===r.overflowY||"scroll"===r.overflowY||"visible"===r.overflowY)):(y=M<C&&("auto"===r.overflowX||"scroll"===r.overflowX),r=w<x&&("auto"===r.overflowY||"scroll"===r.overflowY));v=y&&(Math.abs(R-f)<=q&&A+M<C)-(Math.abs(v-f)<=q&&!!A);p=r&&(Math.abs(t-h)<=q&&z+w<x)-(Math.abs(p-h)<=q&&!!z);if(!S[b])for(t=0;t<=b;t++)S[t]||(S[t]={});if(S[b].vx!=v||S[b].vy!=p||S[b].el!==F)if(S[b].el=F,S[b].vx=v,S[b].vy=p,clearInterval(S[b].pid),0!=v||0!=p)k=!0,
S[b].pid=setInterval(function(){m&&0===this.layer&&u.active._onTouchMove(Ta);var c=S[this.layer].vy?S[this.layer].vy*d:0,b=S[this.layer].vx?S[this.layer].vx*d:0;"function"===typeof K&&"continue"!==K.call(u.dragged.parentNode[W],b,c,a,Ta,S[this.layer].el)||Z(S[this.layer].el,b,c)}.bind({layer:b}),24);b++}while(c.bubbleScroll&&X!==n&&(X=g(X,!1)));cb=k}},30),tb=function(a){var c=a.originalEvent,b=a.putSortable,m=a.dragEl,h=a.activeSortable,g=a.dispatchSortableEvent,e=a.hideGhostForTarget;a=a.unhideGhostForTarget;
h=b||h;e();c=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c;c=document.elementFromPoint(c.clientX,c.clientY);a();h&&!h.el.contains(c)&&(g("spill"),this.onSpill({dragEl:m,putSortable:b}))};Wa.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var c=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var b=y(this.sortable.el,this.startIndex,this.options);b?this.sortable.el.insertBefore(c,
b):this.sortable.el.appendChild(c);this.sortable.animateAll();a&&a.animateAll()},drop:tb};E(Wa,{pluginName:"revertOnSpill"});na.prototype={onSpill:function(a){var c=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();c.parentNode&&c.parentNode.removeChild(c);a.animateAll()},drop:tb};E(na,{pluginName:"removeOnSpill"});var ea,A=[],ca=[],Ga,ga,Ha=!1,da=!1,Ia=!1,H,ra,Ua;u.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===
a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):a.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},
drop:function(){this.sortable.nativeDraggable?p(document,"dragover",this._handleAutoScroll):(p(document,"pointermove",this._handleFallbackAutoScroll),p(document,"touchmove",this._handleFallbackAutoScroll),p(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(va);Na();clearTimeout(wa);wa=void 0},nulling:function(){Ta=bb=Fa=cb=va=db=eb=null;S.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,b){var c=this,f=(a.touches?a.touches[0]:
a).clientX,m=(a.touches?a.touches[0]:a).clientY,h=document.elementFromPoint(f,m);Ta=a;if(b||xa||ha||Xa){fb(a,this.options,h,b);var d=g(h,!0);!cb||va&&f===db&&m===eb||(va&&clearInterval(va),va=setInterval(function(){var h=g(document.elementFromPoint(f,m),!0);h!==d&&(d=h,Na());fb(a,c.options,h,b)},10),db=f,eb=m)}else this.options.bubbleScroll&&g(h,!0)!==e()?fb(a,this.options,g(h,!1),!1):Na()}};return E(a,{pluginName:"scroll",initializeByDefault:!0})});u.mount(na,Wa);u.mount(new function(){function a(){this.defaults=
{swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(a){ea=a.dragEl},dragOverValid:function(a){var c=a.completed,b=a.target,m=a.onMove,h=a.changed,g=a.cancel;if(a.activeSortable.options.swap){var e=this.sortable.el;a=this.options;b&&b!==e&&(e=ea,!1!==m(b)?(x(b,a.swapClass,!0),ea=b):ea=null,e&&e!==ea&&x(e,a.swapClass,!1));h();c(!0);g()}},drop:function(a){var b=a.activeSortable,c=a.putSortable;a=a.dragEl;var m=c||this.sortable,h=this.options;ea&&x(ea,h.swapClass,!1);if(ea&&(h.swap||
c&&c.options.swap)&&a!==ea){m.captureAnimationState();m!==b&&b.captureAnimationState();var c=ea,h=a.parentNode,g=c.parentNode,e,d;h&&g&&!h.isEqualNode(c)&&!g.isEqualNode(a)&&(e=J(a),d=J(c),h.isEqualNode(g)&&e<d&&d++,h.insertBefore(c,h.children[e]),g.insertBefore(a,g.children[d]));m.animateAll();m!==b&&b.animateAll()}},nulling:function(){ea=null}};return E(a,{pluginName:"swap",eventProperties:function(){return{swapItem:ea}}})});u.mount(new function(){function a(a){for(var b in this)"_"===b.charAt(0)&&
"function"===typeof this[b]&&(this[b]=this[b].bind(this));a.options.supportPointer?v(document,"pointerup",this._deselectMultiDrag):(v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag));v(document,"keydown",this._checkKeyDown);v(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(b,c){var f="";A.length&&ga===a?A.forEach(function(a,b){f+=(b?", ":"")+a.textContent}):f=c.textContent;b.setData("Text",
f)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){H=a.dragEl},delayEnded:function(){this.isMultiDrag=~A.indexOf(H)},setupClone:function(a){var b=a.sortable;a=a.cancel;if(this.isMultiDrag){for(var c=0;c<A.length;c++)ca.push(M(A[c])),ca[c].sortableIndex=A[c].sortableIndex,ca[c].draggable=!1,ca[c].style["will-change"]="",x(ca[c],this.options.selectedClass,!1),A[c]===H&&x(ca[c],this.options.chosenClass,!1);b._hideClone();a()}},clone:function(a){var b=a.sortable,c=a.rootEl,
m=a.dispatchSortableEvent;a=a.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&A.length&&ga===b&&(lb(!0,c),m("clone"),a())},showClone:function(a){var b=a.cloneNowShown,c=a.cancel;this.isMultiDrag&&(lb(!1,a.rootEl),ca.forEach(function(a){l(a,"display","")}),b(),Ua=!1,c())},hideClone:function(a){var b=this,c=a.cloneNowHidden;a=a.cancel;this.isMultiDrag&&(ca.forEach(function(a){l(a,"display","none");b.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),c(),Ua=!0,a())},dragStartGlobal:function(a){!this.isMultiDrag&&
ga&&ga.multiDrag._deselectMultiDrag();A.forEach(function(a){a.sortableIndex=J(a)});A=A.sort(function(a,b){return a.sortableIndex-b.sortableIndex});Ia=!0},dragStarted:function(a){var b=this;a=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){A.forEach(function(a){a!==H&&l(a,"position","absolute")});var c=D(H,!1,!0,!0);A.forEach(function(a){a!==H&&ja(a,c)});Ha=da=!0}a.animateAll(function(){Ha=da=!1;b.options.animation&&A.forEach(function(a){n(a)});
b.options.sort&&Oa()})}},dragOver:function(a){var b=a.target,c=a.completed;a=a.cancel;da&&~A.indexOf(b)&&(c(!1),a())},revert:function(a){var b=a.fromSortable,c=a.rootEl,m=a.sortable,h=a.dragRect;1<A.length&&(A.forEach(function(a){m.addAnimationState({target:a,rect:da?D(a):h});n(a);a.fromRect=h;b.removeAnimationState(a)}),da=!1,Bb(!this.options.removeCloneOnHide,c))},dragOverCompleted:function(a){var b=a.sortable,c=a.isOwner,m=a.activeSortable,h=a.parentEl,g=a.putSortable,e=this.options;if(a.insertion){c&&
m._hideClone();Ha=!1;if(e.animation&&1<A.length&&(da||!c&&!m.options.sort&&!g)){var d=D(H,!1,!0,!0);A.forEach(function(a){a!==H&&(ja(a,d),h.appendChild(a))});da=!0}c||(da||Oa(),1<A.length?(a=Ua,m._showClone(b),m.options.animation&&!Ua&&a&&ca.forEach(function(a){m.addAnimationState({target:a,rect:ra});a.fromRect=ra;a.thisAnimationDuration=null})):m._showClone(b))}},dragOverAnimationCapture:function(a){var b=a.dragRect,c=a.isOwner;a=a.activeSortable;A.forEach(function(a){a.thisAnimationDuration=null});
a.options.animation&&!c&&a.multiDrag.isMultiDrag&&(ra=E({},b),b=C(H,!0),ra.top-=b.f,ra.left-=b.e)},dragOverAnimationComplete:function(){da&&(da=!1,Oa())},drop:function(a){var b=a.originalEvent,c=a.rootEl,h=a.parentEl,g=a.sortable,e=a.dispatchSortableEvent,d=a.oldIndex,u=(a=a.putSortable)||this.sortable;if(b){var k=this.options,K=h.children;if(!Ia)if(k.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),x(H,k.selectedClass,!~A.indexOf(H)),~A.indexOf(H))A.splice(A.indexOf(H),1),Ga=null,
m({sortable:g,rootEl:c,name:"deselect",targetEl:H,originalEvt:b});else{A.push(H);m({sortable:g,rootEl:c,name:"select",targetEl:H,originalEvt:b});if(b.shiftKey&&Ga&&g.el.contains(Ga)){var l=J(Ga),X=J(H);if(~l&&~X&&l!==X){var F;X>l?(F=l,l=X):(F=X,l+=1);for(;F<l;F++)~A.indexOf(K[F])||(x(K[F],k.selectedClass,!0),A.push(K[F]),m({sortable:g,rootEl:c,name:"select",targetEl:K[F],originalEvt:b}))}}else Ga=H;ga=u}if(Ia&&this.isMultiDrag){if((h[W].options.sort||h!==c)&&1<A.length){var w=D(H),Z=J(H,":not(."+
this.options.selectedClass+")");!Ha&&k.animation&&(H.thisAnimationDuration=null);u.captureAnimationState();if(!Ha&&(k.animation&&(H.fromRect=w,A.forEach(function(a){a.thisAnimationDuration=null;if(a!==H){var b=da?D(a):w;a.fromRect=b;u.addAnimationState({target:a,rect:b})}})),Oa(),A.forEach(function(a){K[Z]?h.insertBefore(a,K[Z]):h.appendChild(a);Z++}),d===J(H))){var p=!1;A.forEach(function(a){a.sortableIndex!==J(a)&&(p=!0)});p&&e("update")}A.forEach(function(a){n(a)});u.animateAll()}ga=u}(c===h||
a&&"clone"!==a.lastPutMode)&&ca.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})}},nullingGlobal:function(){this.isMultiDrag=Ia=!1;ca.length=0},destroyGlobal:function(){this._deselectMultiDrag();p(document,"pointerup",this._deselectMultiDrag);p(document,"mouseup",this._deselectMultiDrag);p(document,"touchend",this._deselectMultiDrag);p(document,"keydown",this._checkKeyDown);p(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(Ia||ga!==this.sortable||a&&I(a.target,
this.options.draggable,this.sortable.el,!1)||a&&0!==a.button))for(;A.length;){var b=A[0];x(b,this.options.selectedClass,!1);A.shift();m({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:b,originalEvt:a})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return E(a,{pluginName:"multiDrag",utils:{select:function(a){var b=a.parentNode[W];b&&b.options.multiDrag&&
!~A.indexOf(a)&&(ga&&ga!==b&&(ga.multiDrag._deselectMultiDrag(),ga=b),x(a,b.options.selectedClass,!0),A.push(a))},deselect:function(a){var b=a.parentNode[W],c=A.indexOf(a);b&&b.options.multiDrag&&~c&&(x(a,b.options.selectedClass,!1),A.splice(c,1))}},eventProperties:function(){var a=this,b=[],m=[];A.forEach(function(c){b.push({multiDragElement:c,index:c.sortableIndex});var f;f=da&&c!==H?-1:da?J(c,":not(."+a.options.selectedClass+")"):J(c);m.push({multiDragElement:c,index:f})});return{items:O(A),clones:[].concat(ca),
oldIndicies:b,newIndicies:m}},optionListeners:{multiDragKey:function(a){a=a.toLowerCase();"ctrl"===a?a="Control":1<a.length&&(a=a.charAt(0).toUpperCase()+a.substr(1));return a}}})});return u})},"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./ListItem ./support/layerListUtils".split(" "),
function(L,E,N,d,O,r,v,p,z,I,x){var l=O.ofType(I);return function(r){function k(e){e=r.call(this)||this;e._handles=new v;e.listItemCreatedFunction=null;e.operationalItems=new l;e.view=null;return e}N(k,r);k.prototype.initialize=function(){var e=this;this._handles.add(p.init(this,["view","view.ready"],function(){return e._viewHandles()}),"view")};k.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};Object.defineProperty(k.prototype,
"state",{get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"},enumerable:!0,configurable:!0});k.prototype.triggerAction=function(e,d){e&&this.emit("trigger-action",{action:e,item:d})};k.prototype._createLayerViewHandles=function(e){var d=this,k=this._handles;k.remove("layer-views");this._compileList();e&&k.add(e.on("change",function(){return d._compileList()}),"layer-views")};k.prototype._createMapLayerHandles=function(e){var d=this,k=this._handles;k.remove("map-layers");
this._compileList();e&&k.add(e.on("change",function(){return d._compileList()}),"map-layers")};k.prototype._watchItemProperties=function(e){var d=this;this._handles.add([e.children.on("change",function(){d._modifyListItemChildren(e.children)})],"children-change-"+e.uid)};k.prototype._modifyListItemChildren=function(e){var d=this;e.forEach(function(e){return d._modifyListItem(e)})};k.prototype._modifyListItem=function(e){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:e});this._modifyListItemChildren(e.children)};k.prototype._createListItem=function(e){e=new I({layer:e,view:this.view});this._watchItemProperties(e);return e};k.prototype._removeAllItems=function(){var e=this._handles,d=this.operationalItems;d.forEach(function(d){e.remove("children-change-"+d.uid)});d.removeAll()};k.prototype._getViewableLayers=function(e){if(e)return e.filter(function(e){return"hide"!==x.findLayerListMode(e)})};k.prototype._watchLayersListMode=function(e){var d=this,k=this._handles;
k.remove("layer-list-mode");e&&e.forEach(function(e){k.add(p.watch(e,"listMode",function(){return d._compileList()}),"layer-list-mode")})};k.prototype._compileList=function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);(e=this._getViewableLayers(e))&&e.length?(this._createNewItems(e),this._modifyOrRemoveItems(e),this._sortItems(e)):this._removeAllItems()};k.prototype._createNewItems=function(e){var d=this,k=this.operationalItems;e.forEach(function(e){k.find(function(d){return d.layer===
e})||k.add(d._createListItem(e))})};k.prototype._modifyOrRemoveItems=function(e){var d=this,k=this._handles,l=this.operationalItems;l.forEach(function(p){p&&(e.find(function(e){return p.layer===e})?d._modifyListItem(p):(k.remove("children-change-"+p.uid),l.remove(p)))})};k.prototype._sortItems=function(e){this.operationalItems.sort(function(d,k){d=e.indexOf(d.layer);k=e.indexOf(k.layer);return d>k?-1:d<k?1:0})};k.prototype._viewHandles=function(){var e=this,d=this._handles,k=this.view;d.remove(["map-layers",
"layer-views","view-layers"]);this._compileList();k&&k.ready&&d.add([p.init(this,"view.map.layers",function(d){return e._createMapLayerHandles(d)}),p.init(this,"view.layerViews",function(d){return e._createLayerViewHandles(d)}),p.init(this,"listItemCreatedFunction",function(){return e._compileList()})],"view-layers")};d([z.property()],k.prototype,"listItemCreatedFunction",void 0);d([z.property({type:l})],k.prototype,"operationalItems",void 0);d([z.property({dependsOn:["view.ready"],readOnly:!0})],
k.prototype,"state",null);d([z.property()],k.prototype,"view",void 0);d([z.property()],k.prototype,"triggerAction",null);return k=d([z.subclass("esri.widgets.LayerList.LayerListViewModel")],k)}(z.declared(r.EventedAccessor))})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/Sublayer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(L,E,N,d,O,r,v,p,z,I,x,l,C,k,e,D,w,y,U){L=p.ofType({key:"type",defaultKeyValue:"button",base:k,typeMap:{button:e,toggle:w,slider:D}});var J=p.ofType(L);return function(e){function b(b){b=e.call(this)||this;b._handles=new z;b.actionsSections=new J;b.actionsOpen=!1;b.children=new (p.ofType(g));b.error=null;b.layer=null;b.layerView=null;b.open=!1;b.panel=null;b.parent=null;b.view=null;b.visible=null;return b}N(b,e);g=b;b.prototype.initialize=function(){var b=this;this._handles.add([x.init(this,
"layer",function(h){return b._watchLayerProperties(h)}),x.init(this,"view",function(h){return b._updateChildren(h)}),x.init(this,"panel",function(h){return b._setListItemOnPanel(h)}),x.init(this,["layer","view"],function(){return b._getLayerView()})])};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};b.prototype.castPanel=function(b){this.get("panel.open")&&!b.hasOwnProperty("open")&&(b.open=!0);return b?new y(b):null};Object.defineProperty(b.prototype,"title",
{get:function(){var b=this.get("layer.layer");return(!b||b&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(b){void 0===b?this._clearOverride("title"):this._override("title",b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){var b=this.layerView;return b?b.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visibleAtCurrentScale",{get:function(){return!U.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visibilityMode",{get:function(){return U.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new g({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};b.prototype._setListItemOnPanel=function(b){b&&
(b.listItem=this)};b.prototype._updateChildren=function(b){var g=this.children;g&&g.forEach(function(g){return g.view=b})};b.prototype._addChildren=function(b){var h=this;this.children.removeAll();if(b){this._handles.remove("child-list-mode");b.forEach(function(g){h._handles.add(x.watch(g,"listMode",function(){return h._addChildren(b)}),"child-list-mode")});var e=[];b.filter(function(b){return"hide"!==U.findLayerListMode(b)}).forEach(function(b){U.canDisplayLayer(b)&&(b=new g({layer:b,parent:h,view:h.view}),
e.unshift(b))});this.children.addMany(e)}};b.prototype._watchSublayerChanges=function(b){var g=this;b&&this._handles.add(b.on("change",function(){g._addChildren(b)}),"layer")};b.prototype._initializeChildLayers=function(b){this._addChildren(b);this._watchSublayerChanges(b)};b.prototype._watchLayerProperties=function(b){var g=this;if(this._handles&&(this._handles.remove("layer"),b)){var h=U.getNormalizedChildLayerProperty(b);h&&this._handles.add(x.init(b,h,function(){b.hasOwnProperty(h)&&g._initializeChildLayers(b[h])}),
"layer")}};b.prototype._getLayerView=function(){return r(this,void 0,void 0,function(){var b,g,e,d;return O(this,function(h){switch(h.label){case 0:b=this;g=b.layer;e=b.view;if(!g||!e)return[2];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.whenLayerView(g)];case 2:d=h.sent();if(d.layer!==this.layer)return[2];this._set("layerView",d);return[3,4];case 3:return h.sent(),[3,4];case 4:return[2]}})})};b.prototype._isLayerUpdating=function(b){return b instanceof C?!1:b&&"loading"===b.loadStatus};var g;
d([l.property({type:J})],b.prototype,"actionsSections",void 0);d([l.property()],b.prototype,"actionsOpen",void 0);d([l.property({type:p})],b.prototype,"children",void 0);d([l.aliasOf("layer.loadError?")],b.prototype,"error",void 0);d([l.property()],b.prototype,"layer",void 0);d([l.property({readOnly:!0})],b.prototype,"layerView",void 0);d([l.property()],b.prototype,"open",void 0);d([l.property({type:y})],b.prototype,"panel",void 0);d([l.cast("panel")],b.prototype,"castPanel",null);d([l.property()],
b.prototype,"parent",void 0);d([l.property({dependsOn:["layer.layer?.loaded","layer.title"]})],b.prototype,"title",null);d([l.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],b.prototype,"updating",null);d([l.property({value:null})],b.prototype,"view",void 0);d([l.aliasOf("layer.visible")],b.prototype,"visible",void 0);d([l.property({dependsOn:["layer.minScale?","layer.maxScale?","view.scale"],readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);d([l.property({dependsOn:["layer.visibilityMode?",
"layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],b.prototype,"visibilityMode",null);return b=g=d([l.subclass("esri.widgets.LayerList.ListItem")],b)}(l.declared(I.IdentifiableMixin(v)))})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../PopupTemplate ../../renderers ../../symbols ../../core/Collection ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ./commonProperties ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../tasks/support/Query".split(" "),
function(L,E,N,d,O,r,v,p,z,I,x,l,C,k,e,D,w,y,U,J,R,b,g,h,K){var Z=e.getLogger("esri.layers.support.Sublayer"),M=0;return function(e){function n(b){b=e.call(this,b)||this;b._sublayersHandles=null;return b}N(n,e);C=n;Object.defineProperty(n.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(b){this._setAndNotifyLayer("definitionExpression",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"id",{get:function(){var b=this._get("id");
return null==b?M++:b},set:function(b){this._get("id")!==b&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id"):this._set("id",b))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(b){this._setAndNotifyLayer("labelingInfo",b)},enumerable:!0,configurable:!0});n.prototype.writeLabelingInfo=function(b,g,h,e){(!e||e.writeAsDynamic)&&b&&b.length&&(g.layerDefinition=
{drawingInfo:{labelingInfo:b.map(function(b){return b.write({},e)})}})};Object.defineProperty(n.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(b){this._setAndNotifyLayer("labelsVisible",b)},enumerable:!0,configurable:!0});n.prototype.writeLabelsVisible=function(b,g,h,e){if(!e||e.writeAsDynamic)g.showLabels=b};Object.defineProperty(n.prototype,"layer",{set:function(b){this._set("layer",b);this.sublayers&&this.sublayers.forEach(function(m){return m.layer=b})},
enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(b){this._set("legendEnabled",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"listMode",{get:function(){return this._get("listMode")},set:function(b){this._set("listMode",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(b){this._setAndNotifyLayer("minScale",
b)},enumerable:!0,configurable:!0});n.prototype.readMinScale=function(b,g){return g.minScale||g.layerDefinition&&g.layerDefinition.minScale||0};n.prototype.writeMinScale=function(b,g,h,e){if(e&&e.writeOverridesOnly&&(h=e&&e.serviceSublayer)&&h.minScale===b&&h.maxScale===this.maxScale)return;g.minScale=b};Object.defineProperty(n.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(b){this._setAndNotifyLayer("maxScale",b)},enumerable:!0,configurable:!0});n.prototype.readMaxScale=
function(b,g){return g.maxScale||g.layerDefinition&&g.layerDefinition.maxScale||0};n.prototype.writeMaxScale=function(b,g,h,e){if(e&&e.writeOverridesOnly&&(h=e&&e.serviceSublayer)&&h.maxScale===b&&h.minScale===this.minScale)return;g.maxScale=b};Object.defineProperty(n.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(b){this._setAndNotifyLayer("opacity",b)},enumerable:!0,configurable:!0});n.prototype.readOpacity=function(b,g){b=g.layerDefinition;return 1-.01*(null!=b.transparency?
b.transparency:b.drawingInfo.transparency)};n.prototype.writeOpacity=function(b,g,h,e){if(!e||e.writeAsDynamic)g.layerDefinition={drawingInfo:{transparency:100-100*b}}};n.prototype.writeParent=function(b,g,h,e){e&&e.writeOverridesOnly||(g.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1)};Object.defineProperty(n.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(b){this._set("popupEnabled",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,
"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(b){this._set("popupTemplate",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(b){if(b)for(var g=0,h=b.getSymbols();g<h.length;g++)if(I.isSymbol3D(h[g])){Z.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",b)},enumerable:!0,configurable:!0});n.prototype.readRenderer=function(b,g,e){if(b=g.layerDefinition.drawingInfo.renderer||
void 0)(b=h.read(b,g,e)||void 0)||Z.error("Failed to create renderer",{rendererDefinition:g.drawingInfo.renderer,layer:this,context:e});return b};n.prototype.writeRenderer=function(b,g,h,e){if(!e||e.writeAsDynamic)g.layerDefinition={drawingInfo:{renderer:b.toJSON()}}};n.prototype.writeWebSceneRenderer=function(b,g,h,e){if(!e||e.writeAsDynamic)g.layerDefinition={drawingInfo:{renderer:b.toJSON()}}};Object.defineProperty(n.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,
type:g.MAPLAYER}},set:function(b){this._setAndNotifyLayer("source",b)},enumerable:!0,configurable:!0});n.prototype.writeSource=function(b,h,e,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(h.layerDefinition={source:g.sourceToJSON(b)})};Object.defineProperty(n.prototype,"sublayers",{set:function(b){this._handleSublayersChange(b,this._get("sublayers"));this._set("sublayers",b)},enumerable:!0,configurable:!0});n.prototype.castSublayers=function(b){return U.default(x.ofType(C),b)};n.prototype.writeSublayers=
function(b,g,h,e){e&&e.writeOverridesOnly||this.get("sublayers.length")&&(g[h]=this.sublayers.map(function(b){return b.id}).toArray().reverse())};Object.defineProperty(n.prototype,"title",{get:function(){return this._get("title")},set:function(b){this._set("title",b)},enumerable:!0,configurable:!0});n.prototype.writeTitle=function(b,g,h,e){if(e&&e.writeOverridesOnly&&(e=e&&e.serviceSublayer)&&e.title===b)return;g[h]=b};Object.defineProperty(n.prototype,"url",{get:function(){var b=this.layer,h=this.source;
if(!b)return null;if(g.isMapLayerSource(h))return b.parsedUrl.path+"/"+h.mapLayerId;h={layer:JSON.stringify({source:g.sourceToJSON(this.source)})};return b.parsedUrl.path+"/dynamicLayer?"+w.objectToQuery(h)},set:function(b){b?this._override("url",b):this._clearOverride("url")},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"visible",{get:function(){return this._get("visible")},set:function(b){this._setAndNotifyLayer("visible",b)},enumerable:!0,configurable:!0});n.prototype.writeVisible=
function(b,g,h,e){if(e&&e.writeOverridesOnly&&(e=e&&e.serviceSublayer)&&e.visible===b)return;g[h]=b};n.prototype.clone=function(){var b=new C;this.hasOwnProperty("definitionExpression")&&(b.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(b.id=this.id);this.hasOwnProperty("labelingInfo")&&(b.labelingInfo=k.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(b.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(b.legendEnabled=this.legendEnabled);
this.hasOwnProperty("visible")&&(b.visible=this.visible);this.hasOwnProperty("layer")&&(b.layer=this.layer);this.hasOwnProperty("minScale")&&(b.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(b.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(b.opacity=this.opacity);this.hasOwnProperty("parent")&&(b.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(b.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(b.popupTemplate=this.popupTemplate?this.popupTemplate.clone():
this.popupTemplate);this.hasOwnProperty("renderer")&&(b.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&(b.source=k.clone(this.source));this.hasOwnProperty("sublayers")&&(b.sublayers=this.sublayers?this.sublayers.clone():this.sublayers);this.hasOwnProperty("title")&&(b.title=this.title);return b};n.prototype.createQuery=function(){return new K({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};n.prototype.createFeatureLayer=function(){return v(this,
void 0,void 0,function(){var b,h,e,d,n;return r(this,function(m){switch(m.label){case 0:if(this.hasOwnProperty("sublayers"))return[2,null];b=this.layer&&this.layer.parsedUrl;h=this.source;e=null;b&&(e=g.isMapLayerSource(h)?b.path+"/"+h.mapLayerId:b.path+"/dynamicLayer");return[4,D.create(function(b){return L(["../FeatureLayer"],b)})];case 1:return d=m.sent(),n=new d({url:e}),this.hasOwnProperty("definitionExpression")&&(n.definitionExpression=this.definitionExpression),this.hasOwnProperty("labelingInfo")&&
(n.labelingInfo=k.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(n.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(n.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(n.visible=this.visible),this.hasOwnProperty("minScale")&&(n.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(n.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(n.opacity=this.opacity),this.hasOwnProperty("popupTemplate")&&(n.popupTemplate=this.popupTemplate?
this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(n.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&g.isDataLayerSource(this.source)&&(n.dynamicDataSource=k.clone(this.source)),this.hasOwnProperty("title")&&(n.title=this.title),[2,n]}})})};n.prototype.queryFeatures=function(b,g){var h=this;void 0===b&&(b=this.createQuery());return D.all([D.create(function(b){return L(["../../tasks/operations/query"],b)}),D.create(function(b){return L(["../../tasks/support/FeatureSet"],
b)})]).then(function(e){var d=e[0].executeQuery,m=e[1];return d(h.url,K.from(b),g).then(function(b){return m.fromJSON(b.data)})}).then(function(b){b&&b.features&&b.features.forEach(function(b){b.sourceLayer=h});return b})};n.prototype.toExportImageJSON=function(){var b={id:this.id,source:g.sourceToJSON(this.source)};this.definitionExpression&&(b.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var h=b.drawingInfo={};
this.renderer&&(h.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(h.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(h.labelingInfo=this.labelingInfo.map(function(b){return b.write({},{origin:"service"})}),h.showLabels=!0);null!=this.opacity&&(h.transparency=100-100*this.opacity)}return b};n.prototype._setAndNotifyLayer=function(b,g){var h=this.layer,e=this._get(b),d;switch(b){case "definitionExpression":d="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":d=
"supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":d="supportsDynamicLayers"}d&&!1===this.get("layer.capabilities.exportMap."+d)?this._logLockedError(b):(this._set(b,g),e!==g&&h&&h.emit&&h.emit("sublayer-update",{propertyName:b}))};n.prototype._handleSublayersChange=function(b,g){var h=this;g&&(g.forEach(function(b){b.parent=null;b.layer=null}),this._sublayersHandles.forEach(function(b){return b.remove()}),this._sublayersHandles=
null);b&&(b.forEach(function(b){b.parent=h;b.layer=h.layer}),this._sublayersHandles=[b.on("after-add",function(b){b=b.item;b.parent=h;b.layer=h.layer}),b.on("after-remove",function(b){b=b.item;b.parent=null;b.layer=null}),b.on("before-changes",function(b){var g=h.get("layer.capabilities.exportMap.supportsSublayersChanges");null==g||g||(Z.error(new l("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:h})),b.preventDefault())})])};n.prototype._logLockedError=
function(b){Z.error(new l("sublayer:locked","Property '"+b+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,layer:this.layer}))};var C;d([y.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],n.prototype,"definitionExpression",null);d([y.property({type:Number,json:{write:{ignoreOrigin:!0}}})],n.prototype,"id",null);d([y.property({value:null,type:[b],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},
write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],n.prototype,"labelingInfo",null);d([y.writer("labelingInfo")],n.prototype,"writeLabelingInfo",null);d([y.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],n.prototype,"labelsVisible",null);d([y.writer("labelsVisible")],n.prototype,"writeLabelsVisible",null);d([y.property({value:null})],n.prototype,"layer",null);d([y.property(R.legendEnabled)],n.prototype,"legendEnabled",null);d([y.property({type:["show",
"hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],n.prototype,"listMode",null);d([y.property({type:Number,value:0,json:{write:{overridePolicy:function(b,g,h){if(J.willPropertyWrite(this,"maxScale",{},h))return{ignoreOrigin:!0}}}}})],n.prototype,"minScale",null);d([y.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],n.prototype,"readMinScale",null);d([y.writer("minScale")],n.prototype,"writeMinScale",null);d([y.property({type:Number,
value:0,json:{write:{overridePolicy:function(b,g,h){if(J.willPropertyWrite(this,"minScale",{},h))return{ignoreOrigin:!0}}}}})],n.prototype,"maxScale",null);d([y.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],n.prototype,"readMaxScale",null);d([y.writer("maxScale")],n.prototype,"writeMaxScale",null);d([y.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],n.prototype,"opacity",null);d([y.reader("opacity",["layerDefinition.drawingInfo.transparency",
"layerDefinition.transparency"])],n.prototype,"readOpacity",null);d([y.writer("opacity")],n.prototype,"writeOpacity",null);d([y.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],n.prototype,"parent",void 0);d([y.writer("parent")],n.prototype,"writeParent",null);d([y.property(R.popupEnabled)],n.prototype,"popupEnabled",null);d([y.property({value:null,type:p,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],n.prototype,"popupTemplate",null);d([y.property({types:z.rendererTypes,
value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],n.prototype,"renderer",null);d([y.reader("renderer",["layerDefinition.drawingInfo.renderer"])],n.prototype,"readRenderer",null);d([y.writer("renderer")],n.prototype,"writeRenderer",null);d([y.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:z.webSceneRendererTypes}})],n.prototype,"writeWebSceneRenderer",null);d([y.property({cast:g.castSource,json:{read:{source:"layerDefinition.source",reader:g.sourceFromJSON},
write:{target:"layerDefinition.source"}}})],n.prototype,"source",null);d([y.writer("source")],n.prototype,"writeSource",null);d([y.property({value:null,json:{type:[U.Integer],write:{target:"subLayerIds",allowNull:!0}}})],n.prototype,"sublayers",null);d([y.cast("sublayers")],n.prototype,"castSublayers",null);d([y.writer("sublayers")],n.prototype,"writeSublayers",null);d([y.property({type:String,value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],n.prototype,
"title",null);d([y.writer("title")],n.prototype,"writeTitle",null);d([y.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],n.prototype,"url",null);d([y.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],n.prototype,"visible",null);d([y.writer("visible")],n.prototype,"writeVisible",null);return n=C=d([y.subclass("esri.layers.support.Sublayer")],
n)}(y.declared(C.JSONSupport))})},"esri/support/actions/ActionSlider":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(L,E,N,d,O,r){return function(r){function p(d){d=r.call(this)||this;d.displayValueEnabled=!1;d.max=1;d.min=0;d.step=.1;d.type="slider";d.value=null;return d}N(p,r);v=p;p.prototype.clone=function(){return new v({active:this.active,className:this.className,
disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};var v;d([O.property()],p.prototype,"displayValueEnabled",void 0);d([O.property()],p.prototype,"max",void 0);d([O.property()],p.prototype,"min",void 0);d([O.property()],p.prototype,"step",void 0);d([O.property()],p.prototype,"value",void 0);return p=v=d([O.subclass("esri.support.Action.ActionSlider")],
p)}(O.declared(r))})},"esri/widgets/LayerList/ListItemPanel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Handles ../../core/Identifiable ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),function(L,E,N,d,O,r,v,p,z,I,x){return function(l){function r(d){d=l.call(this)||this;d._legend=null;d._handles=new O;d.content=null;d.image=null;d.listItem=null;
d.open=!1;d.visible=!0;return d}N(r,l);r.prototype.postInitialize=function(){var d=this;this.own([p.init(this,"content",function(e){return d._createLegend(e)})])};r.prototype.destroy=function(){var d=this._legend;d&&d.destroy();this._legend=null};Object.defineProperty(r.prototype,"className",{get:function(){var d=this.image,e=this._getFirstWidget();return this._get("className")||!d&&e?e.iconClass:""},set:function(d){void 0===d?this._clearOverride("className"):this._override("className",d)},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"title",{get:function(){var d=this._getFirstWidget();return this._get("title")||d?d.label:""},set:function(d){void 0===d?this._clearOverride("title"):this._override("title",d)},enumerable:!0,configurable:!0});r.prototype.render=function(){return x.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};r.prototype._renderContent=function(d,e){e=this._legend;var l=this.listItem;return d?"legend"===d?l&&l.view&&l.layer&&e?x.tsx("div",{class:this.classes("esri-layer-list-panel__content",
"esri-layer-list-panel__content--legend"),key:e},e.render()):null:"string"===typeof d?x.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:d,innerHTML:d}):x.isWidget(d)?x.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:d},d.render()):d instanceof HTMLElement?x.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:d,bind:d,
afterCreate:this._attachToNode}):null:null};r.prototype._renderContents=function(){var d=this,e=this.content;return Array.isArray(e)?e.map(function(e,l){return d._renderContent(e,l)}):this._renderContent(e,0)};r.prototype._getLegendOptions=function(d){if(d){var e=d.layer;d=d.view;if(e&&d)return{view:d,layerInfos:[{layer:e,title:""}]}}};r.prototype._createLegend=function(d){var e=this;this._hasLegend(d)&&!this._legend&&v.create(function(e){L(["../Legend"],e)}).then(function(d){var l=e._handles,r=new d(e._getLegendOptions(e.listItem));
e._legend=r;e.notifyChange("className");e.notifyChange("title");d=p.init(e,["listItem.view","listItem.layer"],function(){return e._updateLegend(r)});l.add(d,"legends");e.scheduleRender()})};r.prototype._hasLegend=function(d){return"legend"===d?!0:Array.isArray(d)?d.some(function(d){return"legend"===d}):!1};r.prototype._attachToNode=function(d){d.appendChild(this)};r.prototype._updateLegend=function(d){var e=this.listItem;if(e){var l=e.layer;d.view=e.view;d.layerInfos=[{layer:l,title:null}];this.scheduleRender()}};
r.prototype._getWidget=function(d){return"legend"===d?this._legend:x.isWidget(d)?d:null};r.prototype._getFirstWidget=function(){var d=this,e=this.content;if(Array.isArray(e)){var l=null;e.some(function(e){(e=d._getWidget(e))&&(l=e);return!!e});return l}return this._getWidget(e)};d([z.property({dependsOn:["content","image"]})],r.prototype,"className",null);d([z.property(),x.renderable()],r.prototype,"content",void 0);d([z.property()],r.prototype,"image",void 0);d([z.property()],r.prototype,"listItem",
void 0);d([z.property({dependsOn:["content"]})],r.prototype,"title",null);d([z.property(),x.renderable()],r.prototype,"open",void 0);d([z.property()],r.prototype,"visible",void 0);return r=d([z.subclass("esri.widgets.LayerList.ListItemPanel")],r)}(z.declared(r.IdentifiableMixin(I)))})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require","exports"],function(L,E){function N(d){if(d)return null!=d.listMode?d.listMode:void 0}function d(d){if(d)return null!=d.minScale?d.minScale:
void 0}function O(d){if(d)return null!=d.maxScale?d.maxScale:void 0}Object.defineProperty(E,"__esModule",{value:!0});E.findLayerListMode=N;E.findLayerMinScale=d;E.findLayerMaxScale=O;E.findLayerVisibilityMode=function(d){if(!d)return"inherited";var r=d.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof r)return r?"independent":"inherited";r=d.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof r?r?"independent":"inherited":null!=d.visibilityMode?
d.visibilityMode:"independent"};E.getNormalizedChildLayerProperty=function(d){if(d&&"hide-children"!==d.listMode&&"wmts"!==d.type)return"group"===d.type?"layers":"sublayers"};E.canDisplayLayer=function(d){return"hide"!==N(d)};E.isLayerOutsideScaleRange=function(r,v){if(!r||isNaN(v))return!1;var p=d(r);r=O(r);p=!isNaN(p)&&0<p&&v>=p;v=!isNaN(r)&&0<r&&v<=r;return p||v}})},"*now":function(L){L(['dojo/i18n!*preload*esri/widgets/nls/LayerList*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/Collection ../core/events ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ../libs/sortablejs/Sortable ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./support/widget".split(" "),function(L,E,N,d,O,r,v,p,z,I,x,l,C,k,e,D,w){function y(d){var e=d.children;d.actionsOpen&&(d.actionsOpen=
!1);e.forEach(function(b){return y(b)})}var U=p.ofType(D);return function(p){function k(b){b=p.call(this)||this;b._handles=new I;b._sortable=null;b._sortableNode=null;b._focusSortUid=null;b.iconClass="esri-icon-layers";b.label=v.widgetLabel;b.listItemCreatedFunction=null;b.operationalItems=null;b.selectionEnabled=!1;b.selectedItems=new U;b.statusIndicatorsVisible=!0;b.view=null;b.viewModel=new e;return b}N(k,p);k.prototype.postInitialize=function(){var b=this,g=this.operationalItems;this.own(x.on(this,
"operationalItems","change",function(){return b._itemsChanged(g)}),x.init(this,"selectionEnabled",function(){return b._toggleSorting()}))};k.prototype.destroy=function(){var b=this._sortable;b&&b.destroy();this._handles.destroy();this._handles=null};k.prototype.triggerAction=function(b,g){};k.prototype.render=function(){var b=this,g,d=this._getItems(),e=this.get("viewModel.state"),d=0===d.length?w.tsx("div",{class:"esri-layer-list__no-items"},v.noItemsToDisplay):w.tsx("ul",{"aria-label":v.widgetLabel,
role:this.selectionEnabled?"listbox":void 0,afterCreate:this._sortNodeCreated,"data-node-ref":"_sortableNode",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d.map(function(g,d){return b._renderItem(g,null)})),e=(g={},g["esri-hidden"]="loading"===e,g["esri-disabled"]="disabled"===e,g);return w.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",e)},d)};k.prototype._toggleSorting=function(){var b=this,
g=this._sortable,d=this._sortableNode,e=this.selectionEnabled;if(d)if(g)g.option("disabled",!e);else{var k=C.create(d,{dataIdAttr:"data-layer-uid",group:"root-layers",disabled:!e,onSort:function(){return b._sortLayersToItems(k.toArray())}});this._sortable=k}};k.prototype._sortNodeCreated=function(b){this._sortableNode=b;this._toggleSorting()};k.prototype._sortLayersToItems=function(b){var g=this.get("view.map.layers");g&&g.sort(function(g,d){g=b.indexOf(g.uid);d=b.indexOf(d.uid);return g>d?-1:g<d?
1:0})};k.prototype._getItems=function(){var b=this;return this.operationalItems.toArray().filter(function(g){return b.errorsVisible||!g.error})};k.prototype._getSingleActionButton=function(b){return b.actionsSections.reduce(function(b){return b}).filter(function(b){return b&&"button"===b.type}).getItemAt(0)};k.prototype._renderItem=function(b,d){var g=this,e,k,l,p,n,y,m=this.id+"_"+b.uid,x=m+"_actions",u=m+"__list",m=m+"__title",z=!!b.error,C=!!b.children.length&&!z,E=z?v.layerError:"",D=b.visibilityMode,
J=b.children&&b.children.toArray(),N=(e={},e["esri-layer-list__list--exclusive"]="exclusive"===D,e["esri-layer-list__list--inherited"]="inherited"===D,e["esri-layer-list__list--independent"]="inherited"!==D&&"exclusive"!==D,e);e=(k={},k["esri-layer-list__item--has-children"]=C,k["esri-layer-list__item--error"]=!!z,k["esri-layer-list__item--updating"]=b.updating&&!d&&this.statusIndicatorsVisible,k["esri-layer-list__item--invisible-at-scale"]=!b.visibleAtCurrentScale,k["esri-layer-list__item--selectable"]=
this.selectionEnabled,k);var L=this._countActions(b.actionsSections),I=b.panel;k=I&&I.open?I.render():null;var I=I&&I.visible?this._renderPanelButton(I):null,R=(l={},l["esri-layer-list__item-actions-menu-item--active"]=b.actionsOpen,l),U=b.actionsOpen?r.close:r.open,na=1===L&&this._getSingleActionButton(b);l=na?this._renderAction({item:b,action:na,singleAction:!0}):null;l=(R=!na&&L?w.tsx("div",{key:"actions-menu-toggle","data-item":b,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,
class:this.classes("esri-layer-list__item-actions-menu-item",R),tabindex:"0",role:"button","aria-controls":x,"aria-label":U,title:U},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null)||I||l?w.tsx("div",{key:"esri-layer-list__actions-menu",class:"esri-layer-list__item-actions-menu"},I,l,R):null;x=L?this._renderActionsSections(b,b.actionsSections,x):null;D=C?w.tsx("ul",{key:"esri-layer-list__list-items",id:u,class:this.classes("esri-layer-list__list",N),"aria-expanded":b.open?
"true":"false",role:"exclusive"===D?"radiogroup":"group",hidden:b.open?null:!0},J.map(function(d){return g._renderItem(d,b)})):null;J=(p={},p["esri-layer-list__child-toggle--open"]=b.open,p);p=b.open?r.collapse:r.expand;u=C?w.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":b,key:"esri-layer-list__toggle-children",class:this.classes("esri-layer-list__child-toggle",J),tabindex:"0",role:"button","aria-controls":u,"aria-label":p,title:p},w.tsx("span",{"aria-hidden":"true",
class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null;p=this._createLabelNode(b,d,m);z=z?w.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},
w.tsx("span",null,E)):null;E=-1<this.selectedItems.indexOf(b);d=d?null:b.get("layer.uid");d=this.selectionEnabled?(n={bind:this,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":b,tabIndex:0,"aria-selected":E?"true":"false",role:"option","aria-labelledby":m},n["data-layer-uid"]=d,n):(y={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,tabIndex:void 0,"aria-selected":void 0,role:void 0,"aria-labelledby":void 0},y["data-layer-uid"]=void 0,y);return w.tsx("li",
O({key:b,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",e),"aria-labelledby":m},d),w.tsx("div",{key:"esri-layer-list__list-item-container",class:"esri-layer-list__item-container"},u,p,l),z,x,k,D)};k.prototype._focusListItem=function(b){var d=this._focusSortUid;b&&d&&b.dataset.layerUid===d&&(b.focus(),this._focusSortUid=null)};k.prototype._createLabelNode=function(b,d,e){var g,h=this.selectionEnabled;d=d&&d.visibilityMode;var k=
(g={},g["esri-icon-radio-checked"]="exclusive"===d&&b.visible,g["esri-icon-radio-unchecked"]="exclusive"===d&&!b.visible,g["esri-icon-visible"]="exclusive"!==d&&b.visible,g["esri-icon-non-visible"]="exclusive"!==d&&!b.visible,g),l="exclusive"===d?"radio":"switch";g=b.title||v.untitledLayer;var n=b.visibleAtCurrentScale?g:g+" ("+v.layerInvisibleAtScale+")";g=w.tsx("span",{id:e,title:n,"aria-label":n,class:"esri-layer-list__item-title"},g);k=w.tsx("span",{class:this.classes("esri-layer-list__item-toggle-icon",
k),"aria-hidden":"true"});e={bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":b,"data-parent-visibility":d,tabIndex:0,"aria-checked":b.visible?"true":"false",role:l,"aria-labelledby":e};l={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,"data-parent-visibility":void 0,tabIndex:void 0,"aria-checked":void 0,role:void 0,"aria-labelledby":void 0};n=h?e:l;h=w.tsx("div",O({key:b,class:"esri-layer-list__item-label"},h?l:e),w.tsx("span",O({class:"esri-layer-list__item-toggle"},
n),k),g);k=(e=!!b.error)?w.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}):null;return"inherited"===d||e?w.tsx("div",{key:b,class:"esri-layer-list__item-label"},k,g):h};k.prototype._renderPanelButton=function(b){var d,e,k=b.className,l=b.open,p=b.title,k=b.image||k?k:"esri-icon-default-action",r=this._getIconImageStyles(b),l=(d={},d["esri-layer-list__item-actions-menu-item--active"]=l,d);d=(e={},e["esri-layer-list__item-action-image"]=!!r["background-image"],e);k&&(d[k]=!!k);
return w.tsx("div",{key:b,bind:this,"data-panel":b,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",l),role:"button",tabindex:"0",title:p,"aria-label":p},w.tsx("span",{class:this.classes(d),styles:r}))};k.prototype._watchActionSectionChanges=function(b,d){var g=this,e="action-section"+d;this._handles.add(b.on("change",this.scheduleRender.bind(this)),e);b.forEach(function(b){return g._renderOnActionChanges(b,d)})};k.prototype._renderOnActionChanges=
function(b,d){var g=this;d="actions"+d;"toggle"===b.type?this._handles.add([x.init(b,"className image id title visible value".split(" "),function(){return g.scheduleRender()})],d):"slider"===b.type?this._handles.add([x.init(b,"className id title visible value displayValueEnabled max min step".split(" "),function(){return g.scheduleRender()})],d):this._handles.add([x.init(b,["className","image","id","title","visible"],function(){return g.scheduleRender()})],d)};k.prototype._renderOnItemChanges=function(b){var d=
this,e=b.uid,k="items"+e;this._handles.add([x.init(b,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className".split(" "),function(){return d.scheduleRender()}),b.actionsSections.on("change",function(){return d.scheduleRender()}),b.children.on("change",function(){return d.scheduleRender()})],k);b.children.forEach(function(b){return d._renderOnItemChanges(b)});b.actionsSections.forEach(function(b){return d._watchActionSectionChanges(b,
e)})};k.prototype._itemsChanged=function(b){var d=this;this._handles.removeAll();b.forEach(function(b){return d._renderOnItemChanges(b)});this.scheduleRender()};k.prototype._renderActionsSections=function(b,d,e){var g=this;d=d.toArray().map(function(d){return w.tsx("ul",{key:d,class:"esri-layer-list__item-actions-list"},g._renderActionSection(b,d))});return w.tsx("div",{role:"group","aria-expanded":b.actionsOpen?"true":"false",key:"esri-layer-list__actions-section",id:e,class:"esri-layer-list__item-actions",
hidden:b.actionsOpen?null:!0},d)};k.prototype._renderActionSection=function(b,d){var e=this;return(d&&d.toArray()).map(function(d){return e._renderAction({item:b,action:d})})};k.prototype._renderAction=function(b){var d,e,k=b.item,l=b.action;b=b.singleAction;var p=this._getIconImageStyles(l),r=l.active,n=l.className,v=l.disabled,m=l.title,n="button"!==l.type||l.image||n?n:"esri-icon-default-action",v=(d={},d["esri-layer-list__item-actions-menu-item"]=b&&"button"===l.type,d["esri-layer-list__item-action"]=
!b&&"toggle"!==l.type,d["esri-layer-list__action-toggle"]="toggle"===l.type,d["esri-layer-list__action-toggle--on"]="toggle"===l.type&&l.value,d["esri-disabled-element"]=v,d);d=(e={},e["esri-layer-list__item-action-image"]=!r&&!!p["background-image"],e["esri-icon-loading-indicator"]=r,e["esri-rotating"]=r,e);n&&(d[n]=!0);e=w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",d),styles:p});d=b?null:w.tsx("span",{class:"esri-layer-list__item-action-title"},m);e=
[e,d];return b?w.tsx("div",{bind:this,"data-item":k,"data-action":l,role:"button",key:l,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:v,tabindex:"0",title:m,"aria-label":m},e):w.tsx("li",{bind:this,"data-item":k,"data-action":l,key:l,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:v,tabindex:"0",role:"button",title:m,"aria-label":m},e)};k.prototype._countActions=function(b){return b.reduce(function(b,d){return b+d.length},0)};k.prototype._getIconImageStyles=function(b){b=
"esri.widgets.LayerList.ListItemPanel"===b.declaredClass||"esri.support.Action.ActionButton"===b.declaredClass||"esri.support.Action.ActionToggle"===b.declaredClass?b.image:null;return{"background-image":b?'url("'+b+'")':null}};k.prototype._selectionKeydown=function(b){var d=z.eventKey(b);if(-1===["ArrowDown","ArrowUp"].indexOf(d))this._toggleSelection(b);else{b.stopPropagation();var e=this._sortable,l=-1<this.selectedItems.indexOf(b.currentTarget["data-item"]),k=e.toArray();b=k.indexOf(b.target.dataset.layerUid);
if(-1!==b){if("ArrowDown"===d){var p=b+1;if(p>=k.length)return;l?(k.splice(p,0,k.splice(b,1)[0]),e.sort(k),this._sortLayersToItems(e.toArray()),this._focusSortUid=k[p]):(this._focusSortUid=k[p],this.scheduleRender())}"ArrowUp"===d&&(p=b-1,-1>=p||(l?(k.splice(p,0,k.splice(b,1)[0]),e.sort(k),this._sortLayersToItems(e.toArray()),this._focusSortUid=k[p]):(this._focusSortUid=k[p],this.scheduleRender())))}}};k.prototype._toggleActionsOpen=function(b){var d=b.currentTarget["data-item"],e=!d.actionsOpen;
e&&this.operationalItems.forEach(function(b){return y(b)});d.actionsOpen=e;b.stopPropagation()};k.prototype._triggerPanel=function(b){var d=b.currentTarget["data-panel"];d&&(d.open=!d.open);b.stopPropagation()};k.prototype._triggerAction=function(b){var d=b.currentTarget,e=d["data-action"],d=d["data-item"];"toggle"===e.type&&(e.value=!e.value);this.triggerAction(e,d);b.stopPropagation()};k.prototype._toggleVisibility=function(b){var d=b.currentTarget,e=d.getAttribute("data-parent-visibility"),d=d["data-item"];
"exclusive"===e&&d.visible||(d.visible=!d.visible);b.stopPropagation()};k.prototype._toggleChildrenClick=function(b){var d=b.currentTarget["data-item"];d.open=!d.open;b.stopPropagation()};k.prototype._toggleSelection=function(b){b.stopPropagation();var d=b.metaKey||b.ctrlKey;b=b.currentTarget["data-item"];var e=this.selectedItems,k=-1<e.indexOf(b),l=e.length,p=k&&1===l;d?k?e.remove(b):e.add(b):l&&!p?(e.removeAll(),e.add(b)):k?e.remove(b):e.add(b)};d([l.property()],k.prototype,"iconClass",void 0);
d([l.property(),w.renderable()],k.prototype,"errorsVisible",void 0);d([l.property()],k.prototype,"label",void 0);d([l.aliasOf("viewModel.listItemCreatedFunction"),w.renderable()],k.prototype,"listItemCreatedFunction",void 0);d([l.aliasOf("viewModel.operationalItems"),w.renderable()],k.prototype,"operationalItems",void 0);d([l.property(),w.renderable()],k.prototype,"selectionEnabled",void 0);d([l.property(),w.renderable()],k.prototype,"selectedItems",void 0);d([l.property(),w.renderable()],k.prototype,
"statusIndicatorsVisible",void 0);d([l.aliasOf("viewModel.view"),w.renderable()],k.prototype,"view",void 0);d([w.vmEvent("trigger-action"),l.property({type:e}),w.renderable("viewModel.state")],k.prototype,"viewModel",void 0);d([l.aliasOf("viewModel.triggerAction")],k.prototype,"triggerAction",null);d([w.accessibleHandler()],k.prototype,"_toggleActionsOpen",null);d([w.accessibleHandler()],k.prototype,"_triggerPanel",null);d([w.accessibleHandler()],k.prototype,"_triggerAction",null);d([w.accessibleHandler()],
k.prototype,"_toggleVisibility",null);d([w.accessibleHandler()],k.prototype,"_toggleChildrenClick",null);d([w.accessibleHandler()],k.prototype,"_toggleSelection",null);return k=d([l.subclass("esri.widgets.LayerList")],k)}(l.declared(k))});