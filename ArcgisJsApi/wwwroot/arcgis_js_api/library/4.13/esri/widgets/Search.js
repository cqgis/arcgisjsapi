// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(n,f){var l={};f.setObject("dojo.regexp",l);l.escapeString=function(g,f){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(c){return f&&-1!=f.indexOf(c)?c:"\\"+c})};l.buildGroupRE=function(g,f,c){if(!(g instanceof Array))return f(g);for(var e=[],k=0;k<g.length;k++)e.push(f(g[k]));return l.group(e.join("|"),c)};l.group=function(g,f){return"("+(f?"?:":"")+g+")"};return l})},"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),
function(n,f,l,g,m,c,e,k,r){return function(b){function a(a){a=b.call(this)||this;a.showMoreResultsOpen=!1;a.viewModel=null;return a}l(a,b);a.prototype.render=function(){var a=this,b,p=this.get("viewModel.selectedResult"),c=this.get("viewModel.results"),p=p&&p.name||"",e=1<this._countResults(c),q=e&&c.map(function(b){return a._moreResultsList(b)}),c=e?r.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},r.tsx("a",{class:"esri-widget__anchor",
href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,e=e?r.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},q):null,q=(b={},b["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,b);return r.tsx("div",{class:"esri-search-result-renderer esri-widget"},r.tsx("div",{key:"esri-search-renderer__container",
class:this.classes("esri-search-result-renderer__more-results",q)},r.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},p),r.tsx("div",{key:"esri-search-renderer__more-results"},c,e)))};a.prototype._showMoreResultsClick=function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};a.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];
this.viewModel&&this.viewModel.select(a)};a.prototype._moreResultsList=function(a){var b=this,d=a.results,c=d.length,e=!!c,q=this.get("viewModel.selectedResult"),c=1===c&&d[0]===q,q=this._getSourceName(a.source,a.sourceIndex),q=1<this.get("viewModel.results").length&&!c?r.tsx("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},q):null,d=e&&d.map(function(a,d){return b._moreResultsListItem(a,d)}),d=e&&!c?r.tsx("ul",{key:"esri-search-result-renderer__list-"+
a.sourceIndex},d):null;return e?r.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},q,d):null};a.prototype._moreResultsListItem=function(a,b){var d=this.get("viewModel.selectedResult");return a!==d?r.tsx("li",{key:"esri-search-result-renderer__list-item-"+b},r.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};a.prototype._getSourceName=function(a,b){return b===k.ALL_INDEX?
m.all:a.name};a.prototype._countResults=function(a){return a?a.reduce(function(a,b){return a+b.results.length},0):0};g([r.renderable(),c.property()],a.prototype,"showMoreResultsOpen",void 0);g([c.property(),r.renderable(["viewModel.results","viewModel.selectedResult"])],a.prototype,"viewModel",void 0);g([r.accessibleHandler()],a.prototype,"_showMoreResultsClick",null);g([r.accessibleHandler()],a.prototype,"_selectResultClick",null);return a=g([c.subclass("esri.widgets.Search.SearchResultRenderer")],
a)}(c.declared(e))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z,w,v,u,J,D,B,A,I,C,E,H,F,S,P,T,M,K,Q,L){function G(a,b){return a.hasOwnProperty(b)&&null!=a[b]&&""!==a[b]}var U=y.getLogger("esri.widgets.Search.SearchViewModel"),R=d.ofType({key:function(a){return a.layer?"layer":"locator"},base:M,typeMap:{layer:P,locator:T}}),N=D.WGS84,X=/<(?:.|\s)*?>/g;return function(b){function d(a){a=b.call(this)||this;a._handles=new x;a._gotoController=null;a._searching=null;a._loadingDefaultSources=null;a.allPlaceholder=e.allPlaceholder;
a.autoNavigate=!0;a.autoSelect=!0;a.defaultSources=new R;a.defaultSymbol=new I({url:n.toUrl(q("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=new r({title:e.searchResult,content:"{Match_addr}"});a.portal=B.getDefault();a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;
a.selectedSuggestion=null;a.searchAllEnabled=!0;a.selectedResult=null;a.sources=new R;a.suggestionDelay=150;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}l(d,b);d.prototype.initialize=function(){var a=this;this._handles.add(v.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")}))};d.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();
this._handles=null};Object.defineProperty(d.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"allSources",{get:function(){var a=
this.sources,b=this.defaultSources,d=this.includeDefaultSources,a="function"===typeof d?d.call(null,{sources:a,defaultSources:b}):d?b.concat(a):a,b=this._get("allSources")||new R;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||t.supported()},set:function(a){if(void 0===a)this._clearOverride("locationEnabled");else{var b=t.supported();if(a&&!b){var d=new h("locationEnabled:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});U.error(d)}this._override("locationEnabled",a&&b)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder,b=void 0===b?e.allPlaceholder:b;return-1===a?b:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",
a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});d.prototype.load=function(){return c(this,void 0,void 0,function(){var a=this;return m(this,function(b){this._handles.add([v.init(this,
["portal","includeDefaultSources"],function(){return a._loadPortal()}),v.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()})]);return[2]})})};d.prototype.clear=function(){this.searchTerm=""};d.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};d.prototype.search=function(a){var b=this;this.emit("search-start");this.clearGraphics();var d=this._createSuggestionForSearch(a);
this._searching=a=this._whenViewAndPortalLoaded().then(function(){return b._getResultsFromSources(d).then(function(a){var h={activeSourceIndex:b.activeSourceIndex,searchTerm:d.text,numResults:0,numErrors:0,errors:[],results:[]};b._formatResponse(h,a,d);a=b._getFirstResult(h.results);var p=(d.location&&a?a.name:d.text).replace(X,"");b._set("searchTerm",p);(d.key&&"number"===typeof d.sourceIndex||d.location)&&b._set("selectedSuggestion",d);b._set("results",h.results);b.emit("search-complete",h);return b._selectFirstResult(a).then(function(){return h})})}).then(function(a){b._clearSearching();
return a},function(a){b._clearSearching();throw a;});this.notifyChange("state");return a};d.prototype.searchNearby=function(){var a=this;if(!this.locationEnabled){var b=new h("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});U.error(b);return w.reject(b)}this._searching=b=t.getCurrentPosition().then(function(b){return t.positionToPoint({position:b,view:a.view})}).then(function(b){return a.search(b)});this.notifyChange("state");b.catch(function(){}).then(function(){return a._clearSearching()});
return b};d.prototype.select=function(b){var d=this;this.clearGraphics();if(!b){var p=new h("select:missing-parameter","Cannot select without a searchResult.",{searchResult:b});U.error(p);return w.reject(p)}var c=this.view,e=G(b,"sourceIndex")?b.sourceIndex:this._getSourceIndexOfResult(b),t=this.allSources.getItemAt(e);if(!t)return p=new h("select:missing-source","Cannot select without a source.",{source:t}),U.error(p),w.reject(p);var p=t instanceof P?this._getLayerSourcePopupTemplate(t):t.popupTemplate,
q=t.resultSymbol||this._getDefaultSymbol(b),g=G(t,"resultGraphicEnabled")?t.resultGraphicEnabled:this.resultGraphicEnabled,O=G(t,"autoNavigate")?t.autoNavigate:this.autoNavigate,x=G(t,"popupEnabled")?t.popupEnabled:this.popupEnabled,y=x?p||this.popupTemplate:null,r=b.feature;if(!r)return p=new h("select:missing-feature","Cannot select without a feature.",{feature:r}),U.error(p),w.reject(p);var f=r.attributes,u=r.geometry,v=r.layer,m=r.sourceLayer,N=K.getPointFromGeometry(u),p={layerViewQuery:this._getLayerView(r),
elevationQuery:c&&z.isSome(N)?K.getPointWithElevation(N,c).catch(function(){return N}):w.resolve(N)};return w.eachAlways(p).then(function(h){var p=h.layerViewQuery.value,N=h.elevationQuery.value;q instanceof F&&(q.text=b.name);h=c&&O?d._getGoToTarget(b,t):null;return(z.isSome(h)?a.safeCast(d._goToSearchResult(h)):w.resolve()).then(function(){var a=p?r:new k({geometry:u,symbol:q,attributes:f,layer:v,sourceLayer:m,popupTemplate:y}),h=x&&d.get("view.popup");(h=h&&a.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled))&&
c.popup.open({features:[a],location:N});p&&S.hasHighlight(p)&&!h&&d._highlightFeature({graphic:a,layerView:p});!p&&g&&c&&c.graphics.push(a);d._set("selectedResult",b);d._set("resultGraphic",a);d.emit("select-result",{result:b,source:t,sourceIndex:e});return b})})};d.prototype.suggest=function(a,b){var d=this,h=a||this.searchTerm;this.emit("suggest-start",{searchTerm:h});return this._suggestTimer(b).then(function(){return d._suggestImmediate(h).then(function(a){d._set("suggestions",a.results);d.emit("suggest-complete",
a);return a})})};d.prototype._loadPortal=function(){var a=this.portal;this.includeDefaultSources&&a&&!a.loaded&&a.load()};d.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};d.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};d.prototype._convertHelperServices=function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=T.fromJSON(a),Q.isArcGISWorldGeocoder(a.get("locator.url"))&&
a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],placeholder:e.placeholder,defaultZoomScale:2500}),a.singleLineFieldName))return a}).filter(Boolean):[]};d.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),d=this.get("view.map");if(!d||!b)return[];var h=b.hintText;return b.enabled?b.layers.map(function(b){var p=d.findLayerById(b.id);if(p){b=a._getLayerJSON(b);var c=P.fromJSON(b);c.placeholder=
h;a._getLayer(p,b).then(function(a){c.layer=a});return c}}).filter(Boolean):[]};d.prototype._getSubLayer=function(b,d){return b&&b.allSublayers?(b=b.allSublayers.find(function(a){return a.id===d.subLayer}))?a.safeCast(b.createFeatureLayer()):w.reject():w.reject()};d.prototype._getLayer=function(a,b){var d=this;if("feature"===a.type||"scene"===a.type)return w.resolve(a);if("map-image"===a.type)return a.load().then(function(){return d._getSubLayer(a,b).catch(function(){var b=new h("search:create-featurelayer",
"Could not create a FeatureLayer from the MapImageLayer",{layer:a});U.error(b);return null})})};d.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};d.prototype._updateDefaultSources=function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));this.notifyChange("allSources")};d.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();
this._gotoController=null};d.prototype._clear=function(){this._abortGoTo();this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};d.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var d=a.selectedFeature;d&&d===b&&a.close()}};d.prototype._suggestTimer=function(a){return w.after(null!=a?a:this.suggestionDelay)};d.prototype._createLocationForSearch=function(a){return a instanceof
k?K.getPointFromGeometry(a.geometry):a instanceof J?a:Array.isArray(a)&&2===a.length?new J({longitude:a[0],latitude:a[1]}):null};d.prototype._createSuggestionForSearch=function(a){if(a&&G(a,"key")&&G(a,"text")&&G(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),d="string"===typeof a?a:this.searchTerm,h=this.selectedSuggestion,p=this.selectedResult,c=(a=!a&&h&&p)&&h.location;return a&&h.key===p.key&&h.sourceIndex===p.sourceIndex||c?h:{location:z.unwrap(b),text:b?"":d,sourceIndex:null,
key:null}};d.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=a.results[0];var d=!!a;d&&(b=a);return d});return b};d.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):w.resolve()};d.prototype._suggestImmediate=function(a){var b=this;return this._whenViewAndPortalLoaded().then(function(){return b._getSuggestionsFromSources(a)}).then(function(d){var h={activeSourceIndex:b.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};
b._formatResponse(h,d);return h})};d.prototype._formatSourceResponse=function(a,b,d){var h=b&&b.value||[];b=b&&b.error;var p=this.allSources.getItemAt(d);b?(a.errors.push({sourceIndex:d,source:p,error:b}),a.numErrors++):(a.results.push({sourceIndex:d,source:p,results:h}),a.numResults+=h.length)};d.prototype._formatResponse=function(a,b,d){var h=this;if(b)if(-1===a.activeSourceIndex){var p=d&&G(d,"sourceIndex")&&-1!==d.sourceIndex?d.sourceIndex:void 0;b.forEach(function(b,d){h._formatSourceResponse(a,
b,void 0!==p?p:d)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};d.prototype._getResultsFromSources=function(a){var b=this,d=this.allSources,p=!a.location&&G(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,c=[];if(!d.length)return d=new h("search:no-sources-defined","At least one source is required.",{allSources:d}),U.error(d),w.reject(d);-1===p?d.forEach(function(d,h){c.push(b._getResultsFromSource(a,h))}):c.push(this._getResultsFromSource(a,p));return w.eachAlways(c)};d.prototype._getSuggestionsFromSources=
function(a){var b=this,d=this.allSources,p=this.activeSourceIndex,c=[];if(!d.length)return d=new h("suggest:no-sources-defined","At least one source is required.",{allSources:d}),U.error(d),w.reject(d);-1===p?d.forEach(function(d,h){c.push(b._getSuggestionsFromSource(a,h))}):c.push(this._getSuggestionsFromSource(a,p));return w.eachAlways(c)};d.prototype._getResultsFromSource=function(a,b){var d=this.allSources.getItemAt(b),h=a.location,h=void 0===h?null:h,p=this.get("view.spatialReference")||N,c=
G(d,"maxResults")?d.maxResults:this.maxResults,e=d instanceof P&&G(d,"exactMatch")?d.exactMatch:!1;return d.getResults({view:this.view,sourceIndex:b,location:h,suggestResult:a,spatialReference:p,exactMatch:e,maxResults:c})};d.prototype._getSuggestionsFromSource=function(a,b){var d=this.allSources.getItemAt(b),h=G(d,"suggestionsEnabled")?d.suggestionsEnabled:this.suggestionsEnabled,p=a.trim().length,c=G(d,"minSuggestCharacters")?d.minSuggestCharacters:this.minSuggestCharacters;return h&&p>=c?(h=this.get("view.spatialReference")||
N,p=G(d,"maxSuggestions")?d.maxSuggestions:this.maxSuggestions,d.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:h,maxSuggestions:p})):w.resolve()};d.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new H({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===b)return new E({color:a.color,width:a.width});if("polygon"===b)return new C({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};d.prototype._getLayerSourcePopupTemplate=
function(a){var b=a.layer;if(b)return G(a,"popupTemplate")?a.popupTemplate:b.popupTemplate};d.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(d){return d.results.some(function(h){return h===a?(b=d.sourceIndex,!0):!1})});return b};d.prototype._getGoToTarget=function(a,b){var d=a.extent;a=a.feature;return b instanceof P?a||d:d||a};d.prototype._goToSearchResult=function(a){return c(this,void 0,void 0,function(){var b,d,h;return m(this,function(p){switch(p.label){case 0:b=
!!a,this._abortGoTo(),this._gotoController=d=w.createAbortController(),h={target:{target:a},options:{animate:b,signal:d.signal}},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.callGoTo(h)];case 2:return p.sent(),[3,4];case 3:return p.sent(),[3,4];case 4:return this._gotoController=null,[2]}})})};d.prototype._whenViewAndPortalLoaded=function(){var a=this.includeDefaultSources,b=this.portal,d=this.view,d=d?d.when():w.resolve(),a=b&&a?b.when():w.resolve();return w.eachAlways([d,a]).then(function(){})};
d.prototype._loadDefaultSources=function(){return c(this,void 0,void 0,function(){var a,b,d=this;return m(this,function(h){switch(h.label){case 0:return this._loadingDefaultSources=b=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():w.resolve(),this.notifyChange("state"),[4,b.catch(function(){}).then(function(){d._loadingDefaultSources===b&&(d._clearLoadingDefaultSources(),d._updateDefaultSources())})];case 1:return h.sent(),[2]}})})};d.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");
a=z.get(a,"feature","geometry","type");return z.isSome(a)&&(b=(b=A.getSchemes({theme:"default",basemap:b,geometryType:a})||A.getSchemes({theme:"default",basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&G(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};d.prototype._removeHighlight=function(){this._handles.remove("highlight")};d.prototype._getLayerView=function(a){var b=this.view;if(!a||!b)return w.resolve(null);var d=a.layer;return b.when(function(a){return a.whenLayerView(d)})};
d.prototype._highlightFeature=function(a){var b=a.graphic,d=b.attributes,h=b.layer.objectIdField;a=a.layerView.highlight(d&&d[h]||b);this._handles.add(a,"highlight")};d.ALL_INDEX=-1;g([u.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],d.prototype,"activeSource",null);g([u.property({dependsOn:["allSources.length","searchAllEnabled"]})],d.prototype,"activeSourceIndex",null);g([u.property()],d.prototype,"allPlaceholder",void 0);g([u.property({dependsOn:["defaultSources.length",
"sources.length","includeDefaultSources"],readOnly:!0})],d.prototype,"allSources",null);g([u.property()],d.prototype,"autoNavigate",void 0);g([u.property()],d.prototype,"autoSelect",void 0);g([u.property({readOnly:!0})],d.prototype,"defaultSources",void 0);g([u.property()],d.prototype,"defaultSymbol",void 0);g([u.property()],d.prototype,"includeDefaultSources",void 0);g([u.property()],d.prototype,"locationEnabled",null);g([u.property()],d.prototype,"maxInputLength",void 0);g([u.property()],d.prototype,
"maxResults",void 0);g([u.property()],d.prototype,"maxSuggestions",void 0);g([u.property()],d.prototype,"minSuggestCharacters",void 0);g([u.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],d.prototype,"placeholder",null);g([u.property()],d.prototype,"popupEnabled",void 0);g([u.property({type:r})],d.prototype,"popupTemplate",void 0);g([u.property({type:B})],d.prototype,"portal",void 0);g([u.property()],d.prototype,"resultGraphicEnabled",
void 0);g([u.property({readOnly:!0})],d.prototype,"resultGraphic",void 0);g([u.property({readOnly:!0})],d.prototype,"results",void 0);g([u.property({readOnly:!0})],d.prototype,"selectedSuggestion",void 0);g([u.property()],d.prototype,"searchAllEnabled",void 0);g([u.property({readOnly:!0})],d.prototype,"selectedResult",void 0);g([u.property()],d.prototype,"searchTerm",null);g([u.property({type:R})],d.prototype,"sources",void 0);g([u.property({readOnly:!0,dependsOn:["allSources.length"]})],d.prototype,
"state",null);g([u.property()],d.prototype,"suggestionDelay",void 0);g([u.property({readOnly:!0})],d.prototype,"suggestions",void 0);g([u.property()],d.prototype,"suggestionsEnabled",void 0);g([u.property()],d.prototype,"view",void 0);g([u.property()],d.prototype,"clear",null);return d=g([u.subclass("esri.widgets.Search.SearchViewModel")],d)}(u.declared(L.GoToMixin(p.EventedMixin(b))))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h){function p(a,p,c){if(!p)return k.resolve(a);var e=p.spatialReference;return e.isWGS84?k.resolve(a):e.isWebMercator?k.resolve(b.geographicToWebMercator(a)):t(c).then(function(b){if(!b)return k.reject(new m("geometry-service:missing-url","Geometry service URL is missing"));b=new d({url:b});var p=new h({geometries:[a],outSR:e});return b.project(p,c).then(function(a){return a[0]})})}function t(b){if(g.geometryServiceUrl)return k.resolve(g.geometryServiceUrl);var d=
a.getDefault();return d.load(b).catch(function(){}).then(function(){return d.get("helperServices.geometry.url")})}Object.defineProperty(f,"__esModule",{value:!0});var x=e.getLogger("esri.core.geolocationUtils"),q={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};f.supported=function(){var a=c("esri-geolocation");a||x.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=c("esri-secure-context"))||x.warn("insecure-context","Geolocation requires a secure origin."));return a};f.getCurrentPosition=
function(a){a||(a=q);return k.create(function(b,d){setTimeout(function(){return d(new m("geolocation:timeout","getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,d,a)})};f.positionToPoint=function(a,b){var d=a.position;a=a.view;var h=d&&d.coords||{},h={accuracy:h.accuracy,altitude:h.altitude,altitudeAccuracy:h.altitudeAccuracy,heading:h.heading,latitude:h.latitude,longitude:h.longitude,speed:h.speed},d=d?{coords:h,timestamp:d.timestamp}:d;d=(d=
d&&d.coords)?new r({longitude:d.longitude,latitude:d.latitude,z:d.altitude||null,spatialReference:{wkid:4326}}):null;return p(d,a,b)}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/jsonMap ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(n,f,l,g,m,c,e,k,r,b,a){var d=new f.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",
GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),h=l.ensureType(a);f=b.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,d){var h=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),
polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};if(this.requestOptions||d)a=n.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:h,rings:a.rings})})})},buffer:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d};
if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:h,rings:a.rings})})})},cut:function(a,b,d){var h=a[0].spatialReference,p=a.map(function(a){return a.toJSON()});a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(a[0]),geometries:p}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||
d)a=n.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})}})},convexHull:function(a,b){var d=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+
"/convexHull",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",d)})},densify:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},difference:function(a,b,d){var h=a[0].spatialReference;
a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:k.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=n.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},distance:function(a,b){a={query:n.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON())};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var h={};h.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;h.strings=JSON.stringify(a.strings);h.conversionType=d.toJSON(a.conversionType||"mgrs");h.conversionMode=a.conversionMode;a={query:n.mixin({},this.parsedUrl.query,{f:"json"},h)};if(this.requestOptions||b)a=n.mixin({},
this.requestOptions,b,a);return r(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},intersect:function(a,
b,d){var h=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:k.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=n.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},lengths:function(a,b){a={query:n.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var d=a.map(function(a){return a.toJSON()}),h=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h.toJSON()),polygons:JSON.stringify(d)})};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/labelPoints",
a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},offset:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return k.fromJSON(a).set("spatialReference",h)})})},project:function(a,b){a=h(a);var d=
n.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),c=a.outSpatialReference,p=k.getJsonType(a.geometries[0]),e=this._decodeGeometries;a={query:d};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/project",a).then(function(a){return e(a.data,p,c)})},relation:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,d){var h=a.spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:k.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=n.mixin({},this.requestOptions,d,a);return r(this.parsedUrl.path+"/reshape",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",h)})},simplify:function(a,b){var d=a[0].spatialReference,h=n.mixin({},this.parsedUrl.query,
{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),c=k.getJsonType(a[0]),p=this._decodeGeometries;a={query:h};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/simplify",a).then(function(a){return p(a.data,c,d)})},toGeoCoordinateString:function(a,b){var h={};h.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;h.coordinates=JSON.stringify(a.coordinates);h.conversionType=d.toJSON(a.conversionType||
"mgrs");h.conversionMode=a.conversionMode;h.numOfDigits=a.numOfDigits;h.rounding=a.rounding;h.addSpaces=a.addSpaces;a={query:n.mixin({},this.parsedUrl.query,{f:"json"},h)};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),h=a.sr;a={query:d};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,
a);return r(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:h,paths:a.paths})})})},union:function(a,b){var d=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return r(this.parsedUrl.path+"/union",a).then(function(a){return k.fromJSON(a.data.geometry).set("spatialReference",
d)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],d,h=a.length;for(d=0;d<h;d++)b.push(a[d].toJSON());return{geometryType:k.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,d){var h=k.getGeometryType(b);a=a.geometries;var c=[],
e={spatialReference:d.toJSON()},p=n.mixin;a.forEach(function(a,b){c[b]=new h(p(a,e))});return c},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof g?new e({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new c({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,d){return"extent"===b?(a=a.rings[0],new g(a[0][0],a[0][1],a[2][0],a[2][1],d)):new m({points:a.paths[0],spatialReference:d.toJSON()})}});
n.mixin(f,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,
UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,
UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,
UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return f})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(n,f,l,g,m,c,e,k){var r=c.getLogger("esri.tasks.support.ProjectParameters");return function(b){function a(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}l(a,b);Object.defineProperty(a.prototype,"outSR",{get:function(){r.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){r.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});a.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:k.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};g([e.property()],a.prototype,"geometries",void 0);g([e.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);g([e.property({json:{read:!1}})],a.prototype,"outSR",null);g([e.property()],a.prototype,"transformation",void 0);g([e.property()],a.prototype,"transformForward",void 0);return a=g([e.subclass("esri.tasks.support.ProjectParameters")],a)}(e.declared(m.JSONSupport))})},"esri/styles/basic":function(){define(["../core/lang",
"../Color"],function(n,f){function l(c,e){var k;if(c)switch(k={},k.color=new f(c.color),e){case "point":k.outline={color:new f(c.outline.color),width:c.outline.width};k.size=c.size;break;case "polyline":k.width=c.width;break;case "polygon":k.outline={color:new f(c.outline.color),width:c.outline.width}}return k}var g={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},m={};(function(){var c,e,k,r,b,a,d,h;for(c in g)for(r in e=g[c],k=e.basemapGroups,b=m[c]={basemaps:[].concat(k.light).concat(k.dark),point:{},polyline:{},polygon:{}},k)for(a=k[r],d=0;d<a.length;d++)h=a[d],e.pointSchemes&&(b.point[h]=e.pointSchemes[r]),
e.lineSchemes&&(b.polyline[h]=e.lineSchemes[r]),e.polygonSchemes&&(b.polygon[h]=e.polygonSchemes[r])})();return{getAvailableThemes:function(c){var e=[],k,r,b;for(k in g)r=g[k],b=m[k],c&&b.basemaps&&-1===b.basemaps.indexOf(c)||e.push({name:r.name,label:r.label,description:r.description,basemaps:b.basemaps.slice(0)});return e},getSchemes:function(c){var e=c.basemap,k=c.geometryType;c=m[c.theme];var g;(c=(c=c&&c[k])&&c[e])&&(g={primaryScheme:l(c.primary,k),secondarySchemes:c.secondary.map(function(b){return l(b,
k)})});return g},cloneScheme:function(c){var e;c&&(e=n.mixin({},c),e.color&&(e.color=new f(e.color)),e.outline&&(e.outline={color:e.outline.color&&new f(e.outline.color),width:e.outline.width}));return e}}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),
function(n,f,l,g,m,c,e,k,r){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.displayField=null;a.exactMatch=null;a.searchFields=null;a.searchQueryParams=null;a.searchTemplate=null;a.suggestionTemplate=null;a.suggestQueryParams=null;a.getResults=function(b){return r.getResults(m({source:a},b))};a.getSuggestions=function(b){return r.getSuggestions(m({source:a},b))};return a}l(a,b);d=a;Object.defineProperty(a.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load()},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new d({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,
popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};a.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};a.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};a.prototype._getSearchFieldsString=
function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var d=a.getField(b);return d&&d.alias||b}).join(", "):""};a.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var d;g([e.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],a.prototype,"displayField",void 0);g([e.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],a.prototype,
"exactMatch",void 0);g([e.property({value:null})],a.prototype,"layer",null);g([e.property({dependsOn:["layer.title","layer.loaded"]})],a.prototype,"name",null);g([e.property()],a.prototype,"searchFields",void 0);g([e.property()],a.prototype,"searchQueryParams",void 0);g([e.property()],a.prototype,"searchTemplate",void 0);g([e.property()],a.prototype,"suggestionTemplate",void 0);g([e.property()],a.prototype,"suggestQueryParams",void 0);return a=d=g([e.subclass("esri.widgets.Search.LayerSearchSource")],
a)}(e.declared(k))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c,e){return function(c){function k(b){b=c.call(this)||this;b.autoNavigate=null;b.filter=null;b.getResults=null;b.getSuggestions=null;b.maxResults=null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.outFields=null;
b.placeholder="";b.popupEnabled=null;b.popupTemplate=null;b.prefix="";b.resultGraphicEnabled=null;b.resultSymbol=null;b.searchExtent=null;b.suggestionsEnabled=null;b.suffix="";b.withinViewEnabled=!1;b.zoomScale=null;return b}l(k,c);g([e.property()],k.prototype,"autoNavigate",void 0);g([e.property()],k.prototype,"filter",void 0);g([e.property()],k.prototype,"getResults",void 0);g([e.property()],k.prototype,"getSuggestions",void 0);g([e.property()],k.prototype,"maxResults",void 0);g([e.property()],
k.prototype,"maxSuggestions",void 0);g([e.property()],k.prototype,"minSuggestCharacters",void 0);g([e.property()],k.prototype,"outFields",void 0);g([e.property()],k.prototype,"placeholder",void 0);g([e.property()],k.prototype,"popupEnabled",void 0);g([e.property()],k.prototype,"popupTemplate",void 0);g([e.property()],k.prototype,"prefix",void 0);g([e.property()],k.prototype,"resultGraphicEnabled",void 0);g([e.property()],k.prototype,"resultSymbol",void 0);g([e.property()],k.prototype,"searchExtent",
void 0);g([e.property()],k.prototype,"suggestionsEnabled",void 0);g([e.property()],k.prototype,"suffix",void 0);g([e.property()],k.prototype,"withinViewEnabled",void 0);g([e.property()],k.prototype,"zoomScale",void 0);return k=g([e.subclass("esri.widgets.Search.SearchSource")],k)}(e.declared(m.IdentifiableMixin(c.JSONSupport)))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports dojo/date/locale ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),
function(n,f,l,g,m,c,e,k,r,b){function a(a,b){var d=a.filter,h=a.searchExtent;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return d&&d.geometry||h||a}function d(a){return a?a.load().then(k.resolve).catch(k.reject):k.resolve()}function h(a){return a&&!!a.get("capabilities.query.supportsPagination")}function p(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function t(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function x(a){for(var b=
0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function q(a,b,d){var h=null;(a=a.codedValues)&&a.some(function(a){var c=a.name,c=d?c:c.toLowerCase();return(d?b:b.toLowerCase())===c?(h=a.code.toString(),!0):!1});return h}function y(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function z(a,b,d,h,c){var e=b.definitionExpression,p="";if(a){var t=D.test(b.url)&&x(a)?"N":"";d&&d.forEach(function(d){var e=b.getField(d);d=((d="function"===typeof b.getFieldDomain&&b.getFieldDomain(d))&&"coded-value"===
d.type?q(d,a,c):null)||a||null;if(null!==d){var k=e.type,e=e.name;"string"===k||"date"===k||"global-id"===k?c?e=y(e+" \x3d "+t+"'"+d+"'",h):(d=d.toUpperCase(),e=y("UPPER("+e+") LIKE "+t+"'%"+d+"%'",h)):"oid"===k||"small-integer"===k||"integer"===k||"single"===k||"double"===k?(d=Number(d),e=isNaN(d)?null:y(e+" \x3d "+d,h)):e=y(e+" \x3d "+d,h);e&&(p+=p?" OR ("+e+")":"("+e+")")}})}return e?"("+e+") AND ("+p+")":p}function w(a,b){var d=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===
b?(d=a.name,!0):!1});return d}function v(a,b,d){var h=a.layer,c=a.attributes,e="function"===typeof h.getFieldDomain&&h.getFieldDomain(d);return b?g.substitute(b,c):d&&a.hasOwnProperty("attributes")&&c.hasOwnProperty(d)?(a=c[d],d=h.getField(d),e&&"coded-value"===e.type?w(e,a):d&&"date"===d.type?l.format(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function u(a,b,d,h){return a.features.map(function(a){var c=a.attributes[a.layer.objectIdField];return{text:v(a,b.suggestionTemplate,
h),key:c,sourceIndex:d}})}function J(a,d,h,e,p,q,t){return a.features.map(function(a){var k=a.clone(),g=a.layer,g=(g=g&&g.objectIdField)&&a.attributes[g];a=v(a,h.searchTemplate,p);var x=b.createExtentFromGeometry(k.geometry,d,q);return{extent:t?b.scaleExtent(c.clone(x),d,t):x,feature:k,key:g,name:a,sourceIndex:e}})}Object.defineProperty(f,"__esModule",{value:!0});var D=/https?:\/\/services.*\.arcgis\.com/i,B=/(?:\{([^}]+)\})/g,A=e.getLogger("esri.widgets.Search.support.layerSearchUtils");f.getResults=
function(b){var c=b.exactMatch,e=void 0===c?!1:c,q=b.location,g=b.maxResults,x=b.spatialReference,y=b.source,f=b.sourceIndex,u=b.suggestResult,v=b.view,w=y.layer,l=y.filter,D=y.zoomScale,n=v&&v.scale,R=a(y,v);return d(w).then(function(){return k.create(function(a,b){var d=w.popupTemplate;if(d)return d.getRequiredFields(w.fields).then(function(b){return a(b)},b);a(null)})}).then(function(a){var b=w.objectIdField,d=w.returnZ,c=y.displayField||y.layer.displayField||p(y.layer);if(!w.getField(c))return A.error("invalid-field: displayField is invalid."),
k.reject(new m("getResults():invalid-field","displayField is invalid."));a=a&&a.length?a:[c];var O=(a=y.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||O||a.push(b);if(!O&&!t(w,a))return A.error("invalid-field: outField is invalid."),k.reject(new m("getResults():invalid-field","outField is invalid."));b=w.createQuery();(O=y.searchQueryParams)&&b.set(O);x&&(b.outSpatialReference=x,O=1/r.getMetersPerUnitForSR(x))&&(b.maxAllowableOffset=O);O=!!w.get("capabilities.data.supportsZ");b.returnZ=O&&
!1!==d;b.returnGeometry=!0;a&&(b.outFields=a);if(q)b.geometry=q;else if(u.key)b.objectIds=[parseInt(u.key,10)];else{d=y.searchFields||[c];if(!t(w,d))return A.error("invalid-field: search field is invalid."),k.reject(new m("getResults():invalid-field","search field is invalid."));h(w)&&(b.num=g);R&&(b.geometry=R);a=u.text.trim();if(!a)return k.resolve();var O=y.prefix,N=y.suffix;a=(""+(void 0===O?"":O)+a+(void 0===N?"":N)).replace(/\'/g,"''");d=z(a,w,d,l,e);if(!d)return k.resolve();b.where=d}return w.queryFeatures(b).then(function(a){return J(a,
v,y,f,c,n,D)})})};f.getSuggestions=function(b){var c=b.source,e=b.spatialReference,q=b.suggestTerm,g=b.maxSuggestions,x=b.sourceIndex,y=c.layer,r=c.filter,f=a(c,b.view);return d(y).then(function(){if(!h(y))return k.resolve();var a=c.displayField||c.layer.displayField||p(c.layer),b=c.searchFields||[a],d=[];c.suggestionTemplate?c.suggestionTemplate.replace(B,function(a,b){d.push(b);return a}):d.push(a);var v=d&&-1!==d.indexOf("*");-1!==d.indexOf(y.objectIdField)||v||d.push(y.objectIdField);var w=!!y.getField(a),
v=v||t(y,d),l=t(y,b);if(!w)return A.error("invalid-field: displayField is invalid."),k.reject(new m("getSuggestions():invalid-field","displayField is invalid."));if(!v)return A.error("invalid-field: outField is invalid."),k.reject(new m("getSuggestions():invalid-field","outField is invalid."));if(!l)return A.error("invalid-field: search field is invalid."),k.reject(new m("getSuggestions():invalid-field","search field is invalid."));w=y.createQuery();(v=c.suggestQueryParams)&&w.set(v);w.outSpatialReference=
e;w.returnGeometry=!1;w.num=g;w.outFields=d;f&&(w.geometry=f);v=q.trim();if(!v)return k.resolve();var l=c.prefix,N=c.suffix,v=(""+(void 0===l?"":l)+v+(void 0===N?"":N)).replace(/\'/g,"''"),b=z(v,y,b,r,!1);if(!b)return k.resolve();w.where=b;return y.queryFeatures(w).then(function(b){return u(b,c,x,a)})})}})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(n,f,l,g,m,
c,e,k,r){function b(a,b,d,c){return c.replace(/([a-z])\1*/ig,function(p){var t,k,q=p.charAt(0);p=p.length;var x=["abbr","wide","narrow"];switch(q){case "G":t=b[4>p?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":t=a.getFullYear();switch(p){case 1:break;case 2:if(!d.fullYear){t=String(t);t=t.substr(t.length-2);break}default:k=!0}break;case "Q":case "q":t=Math.ceil((a.getMonth()+1)/3);k=!0;break;case "M":case "L":t=a.getMonth();3>p?(t+=1,k=!0):(q=["months","L"==q?"standAlone":"format",x[p-
3]].join("-"),t=b[q][t]);break;case "w":t=h._getWeekOfYear(a,0);k=!0;break;case "d":t=a.getDate();k=!0;break;case "D":t=h._getDayOfYear(a);k=!0;break;case "e":case "c":if(t=a.getDay(),2>p){t=(t-g.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":t=a.getDay();3>p?(t+=1,k=!0):(q=["days","c"==q?"standAlone":"format",x[p-3]].join("-"),t=b[q][t]);break;case "a":q=12>a.getHours()?"am":"pm";t=d[q]||b["dayPeriods-format-wide-"+q];break;case "h":case "H":case "K":case "k":k=a.getHours();switch(q){case "h":t=
k%12||12;break;case "H":t=k;break;case "K":t=k%12;break;case "k":t=k||24}k=!0;break;case "m":t=a.getMinutes();k=!0;break;case "s":t=a.getSeconds();k=!0;break;case "S":t=Math.round(a.getMilliseconds()*Math.pow(10,p-3));k=!0;break;case "v":case "z":if(t=h._getZone(a,!0,d))break;p=4;case "Z":q=h._getZone(a,!1,d);q=[0>=q?"+":"-",e.pad(Math.floor(Math.abs(q)/60),2),e.pad(Math.abs(q)%60,2)];4==p&&(q.splice(0,0,"GMT"),q.splice(3,0,":"));t=q.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
c);}k&&(t=e.pad(t,p));return t})}function a(a,b,d,h){var c=function(a){return a};b=b||c;d=d||c;h=h||c;var e=a.match(/(''|[^'])+/g),p="'"==a.charAt(0);f.forEach(e,function(a,h){a?(e[h]=(p?d:b)(a.replace(/''/g,"'")),p=!p):e[h]=""});return h(e.join(""))}function d(a,b,d,h){h=c.escapeString(h);d.strict||(h=h.replace(" a"," ?a"));return h.replace(/([a-z])\1*/ig,function(h){var c;c=h.charAt(0);var e=h.length,t="",k="";d.strict?(1<e&&(t="0{"+(e-1)+"}"),2<e&&(k="0{"+(e-2)+"}")):(t="0?",k="0{0,2}");switch(c){case "y":c=
"\\d{2,4}";break;case "M":case "L":2<e?(c=b["months-"+("L"==c?"standAlone":"format")+"-"+p[e-3]].slice(0).join("|"),d.strict||(c=c.replace(/\./g,""),c="(?:"+c+")\\.?")):c="1[0-2]|"+t+"[1-9]";break;case "D":c="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+t+"[1-9][0-9]|"+k+"[1-9]";break;case "d":c="3[01]|[12]\\d|"+t+"[1-9]";break;case "w":c="[1-4][0-9]|5[0-3]|"+t+"[1-9]";break;case "E":case "e":case "c":c=".+?";break;case "h":c="1[0-2]|"+t+"[1-9]";break;case "k":c="1[01]|"+t+"\\d";break;case "H":c="1\\d|2[0-3]|"+
t+"\\d";break;case "K":c="1\\d|2[0-4]|"+t+"[1-9]";break;case "m":case "s":c="[0-5]\\d";break;case "S":c="\\d{"+e+"}";break;case "a":e=d.am||b["dayPeriods-format-wide-am"];t=d.pm||b["dayPeriods-format-wide-pm"];c=e+"|"+t;d.strict||(e!=e.toLowerCase()&&(c+="|"+e.toLowerCase()),t!=t.toLowerCase()&&(c+="|"+t.toLowerCase()),-1!=c.indexOf(".")&&(c+="|"+c.replace(/\./g,"")));c=c.replace(/\./g,"\\.");break;default:c=".*"}a&&a.push(h);return"("+c+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var h={};n.setObject(r.id.replace(/\//g,
"."),h);h._getZone=function(a,b,d){return b?l.getTimezoneName(a):a.getTimezoneOffset()};h.format=function(d,c){c=c||{};var e=m.normalizeLocale(c.locale),p=c.formatLength||"short",e=h._getGregorianBundle(e),t=[];d=n.hitch(this,b,d,e,c);if("year"==c.selector)return a(e["dateFormatItem-yyyy"]||"yyyy",d);var k;"date"!=c.selector&&(k=c.timePattern||e["timeFormat-"+p])&&t.push(a(k,d));"time"!=c.selector&&(k=c.datePattern||e["dateFormat-"+p])&&t.push(a(k,d));return 1==t.length?t[0]:e["dateTimeFormat-"+p].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(a,b){return t[b]})};h.regexp=function(a){return h._parseInfo(a).regexp};h._parseInfo=function(b){b=b||{};var c=m.normalizeLocale(b.locale),c=h._getGregorianBundle(c),e=b.formatLength||"short",p=b.datePattern||c["dateFormat-"+e],t=b.timePattern||c["timeFormat-"+e],e="date"==b.selector?p:"time"==b.selector?t:c["dateTimeFormat-"+e].replace(/\{(\d+)\}/g,function(a,b){return[t,p][b]}),k=[];return{regexp:a(e,n.hitch(this,d,k,c,b)),tokens:k,bundle:c}};h.parse=function(a,
b){var d=/[\u200E\u200F\u202A\u202E]/g,c=h._parseInfo(b),e=c.tokens,p=c.bundle;a=(new RegExp("^"+c.regexp.replace(d,"")+"$",c.strict?"":"i")).exec(a&&a.replace(d,""));if(!a)return null;var t=["abbr","wide","narrow"],k=[1970,0,1,0,0,0,0],q="";a=f.every(a,function(a,d){if(!d)return!0;var h=e[d-1];d=h.length;h=h.charAt(0);switch(h){case "y":if(2!=d&&b.strict)k[0]=a;else if(100>a)a=Number(a),h=""+(new Date).getFullYear(),d=100*h.substring(0,2),h=Math.min(Number(h.substring(2,4))+20,99),k[0]=a<h?d+a:d-
100+a;else{if(b.strict)return!1;k[0]=a}break;case "M":case "L":if(2<d){if(d=p["months-"+("L"==h?"standAlone":"format")+"-"+t[d-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),d=f.map(d,function(a){return a.replace(".","").toLowerCase()})),a=f.indexOf(d,a),-1==a)return!1}else a--;k[1]=a;break;case "E":case "e":case "c":d=p["days-"+("c"==h?"standAlone":"format")+"-"+t[d-3]].concat();b.strict||(a=a.toLowerCase(),d=f.map(d,function(a){return a.toLowerCase()}));a=f.indexOf(d,a);if(-1==a)return!1;
break;case "D":k[1]=0;case "d":k[2]=a;break;case "a":d=b.am||p["dayPeriods-format-wide-am"];h=b.pm||p["dayPeriods-format-wide-pm"];if(!b.strict){var c=/\./g;a=a.replace(c,"").toLowerCase();d=d.replace(c,"").toLowerCase();h=h.replace(c,"").toLowerCase()}if(b.strict&&a!=d&&a!=h)return!1;q=a==h?"p":a==d?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;k[3]=a;break;case "m":k[4]=a;break;case "s":k[5]=a;break;case "S":k[6]=a}return!0});d=+k[3];"p"===q&&12>d?k[3]=d+12:"a"===
q&&12==d&&(k[3]=0);d=new Date(k[0],k[1],k[2],k[3],k[4],k[5],k[6]);b.strict&&d.setFullYear(k[0]);var g=e.join(""),c=-1!=g.indexOf("d"),g=-1!=g.indexOf("M");if(!a||g&&d.getMonth()>k[1]||c&&d.getDate()>k[2])return null;if(g&&d.getMonth()<k[1]||c&&d.getDate()<k[2])d=l.add(d,"hour",1);return d};var p=["abbr","wide","narrow"],t=[],x={};h.addCustomFormats=function(a,b){t.push({pkg:a,name:b});x={}};h._getGregorianBundle=function(a){if(x[a])return x[a];var b={};f.forEach(t,function(d){d=m.getLocalization(d.pkg,
d.name,a);b=n.mixin(b,d)},this);return x[a]=b};h.addCustomFormats(r.id.replace(/\/date\/locale$/,".cldr"),"gregorian");h.getNames=function(a,b,d,c){var e;c=h._getGregorianBundle(c);a=[a,d,b];"standAlone"==d&&(d=a.join("-"),e=c[d],1==e[0]&&(e=void 0));a[1]="format";return(e||c[a.join("-")]).concat()};h.isWeekend=function(a,b){b=g.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};h._getDayOfYear=function(a){return l.difference(new Date(a.getFullYear(),
0,1,a.getHours()),a)+1};h._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var d=(new Date(a.getFullYear(),0,1)).getDay(),c=(d-b+7)%7,c=Math.floor((h._getDayOfYear(a)+c-1)/7);d==b&&c++;return c};return h})},"dojo/date":function(){define(["./has","./_base/lang"],function(n,f){var l={getDaysInMonth:function(g){var f=g.getMonth();return 1==f&&l.isLeapYear(g)?29:[31,28,31,30,31,30,31,31,30,31,30,31][f]},isLeapYear:function(g){g=g.getFullYear();return!(g%400)||!(g%4)&&!!(g%100)},getTimezoneName:function(g){var f=
g.toString(),c="",e=f.indexOf("(");if(-1<e)c=f.substring(++e,f.indexOf(")"));else if(e=/([A-Z\/]+) \d{4}$/,f=f.match(e))c=f[1];else if(f=g.toLocaleString(),e=/ ([A-Z\/]+)$/,f=f.match(e))c=f[1];return"AM"==c||"PM"==c?"":c},compare:function(g,f,c){g=new Date(+g);f=new Date(+(f||new Date));"date"==c?(g.setHours(0,0,0,0),f.setHours(0,0,0,0)):"time"==c&&(g.setFullYear(0,0,0),f.setFullYear(0,0,0));return g>f?1:g<f?-1:0},add:function(g,f,c){var e=new Date(+g),k=!1,r="Date";switch(f){case "day":break;case "weekday":var b;
(f=c%5)?b=parseInt(c/5):(f=0<c?5:-5,b=0<c?(c-5)/5:(c+5)/5);var a=g.getDay(),d=0;6==a&&0<c?d=1:0==a&&0>c&&(d=-1);a+=f;if(0==a||6==a)d=0<c?2:-2;c=7*b+f+d;break;case "year":r="FullYear";k=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":k=!0;r="Month";break;default:r="UTC"+f.charAt(0).toUpperCase()+f.substring(1)+"s"}if(r)e["set"+r](e["get"+r]()+c);k&&e.getDate()<g.getDate()&&e.setDate(0);return e},difference:function(g,f,c){f=f||new Date;c=c||"day";var e=f.getFullYear()-g.getFullYear(),
k=1;switch(c){case "quarter":g=g.getMonth();f=f.getMonth();k=Math.floor(f/3)+1+4*e-(Math.floor(g/3)+1);break;case "weekday":e=Math.round(l.difference(g,f,"day"));c=parseInt(l.difference(g,f,"week"));if(0==e%7)e=5*c;else{var k=0,r=g.getDay(),b=f.getDay();c=parseInt(e/7);f=e%7;g=new Date(g);g.setDate(g.getDate()+7*c);g=g.getDay();if(0<e)switch(!0){case 6==r:k=-1;break;case 0==r:k=0;break;case 6==b:k=-1;break;case 0==b:k=-2;break;case 5<g+f:k=-2}else if(0>e)switch(!0){case 6==r:k=0;break;case 0==r:k=
1;break;case 6==b:k=2;break;case 0==b:k=1;break;case 0>g+f:k=2}e=e+k-2*c}k=e;break;case "year":k=e;break;case "month":k=f.getMonth()-g.getMonth()+12*e;break;case "week":k=parseInt(l.difference(g,f,"day")/7);break;case "day":k/=24;case "hour":k/=60;case "minute":k/=60;case "second":k/=1E3;case "millisecond":k*=f.getTime()-g.getTime()}return Math.round(k)}};f.mixin(f.getObject("dojo.date",!0),l);return l})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(n,f){var l={};
n.setObject("dojo.cldr.supplemental",l);l.getFirstDayOfWeek=function(g){g={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[l._region(g)];return void 0===g?
1:g};l._region=function(g){g=f.normalizeLocale(g);g=g.split("-");var m=g[1];m?4==m.length&&(m=g[2]):m={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",
ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",
no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",
ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",
ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",
kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",
pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",
twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[g[0]];return m};l.getWeekend=function(g){var f=l._region(g);g={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[f];f={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[f];void 0===g&&(g=6);void 0===f&&(f=0);return{start:g,end:f}};
return l})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(n,f){var l=/[&<>'"\/]/g,g={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},m={};f.setObject("dojo.string",m);m.escape=function(c){return c?c.replace(l,function(c){return g[c]}):""};m.rep=function(c,e){if(0>=e||!c)return"";for(var k=[];;){e&1&&k.push(c);if(!(e>>=1))break;c+=c}return k.join("")};m.pad=function(c,e,k,g){k||(k="0");c=String(c);e=m.rep(k,Math.ceil((e-
c.length)/k.length));return g?c+e:e+c};m.substitute=function(c,e,k,g){g=g||n.global;k=k?f.hitch(g,k):function(b){return b};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,a,d){if(""==a)return"$";b=f.getObject(a,!1,e);d&&(b=f.getObject(d,!1,g).call(g,b,a));d=k(b,a);if("undefined"===typeof d)throw Error('string.substitute could not find key "'+a+'" in template');return d.toString()})};m.trim=String.prototype.trim?f.trim:function(c){c=c.replace(/^\s+/,"");for(var e=c.length-1;0<=
e;e--)if(/\S/.test(c.charAt(e))){c=c.substring(0,e+1);break}return c};return m})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),function(n,f,l,g,m,c,e,k,r){function b(a,b,c){var d=a.hasZ?a.z:void 0;return b&&b.map?(c?k.getExtentForScale(b,c):b.extent).clone().centerAt(a).set({zmax:d,zmin:d}):
new l.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:d,zmax:d})}Object.defineProperty(f,"__esModule",{value:!0});var a=m.getLogger("esri.widgets.Search.support.geometryUtils");f.getPointWithElevation=function(b,h){return h?b?b.hasZ||h instanceof r?e.resolve(b):(h=h.get("map.ground"))&&h.layers.length?h.queryElevation(b).then(function(a){return a.geometry}):e.resolve(b):(a.error("missing-parameter: point is missing."),e.reject(new g("searchgeometryutils:missing-parameter",
"point is missing."))):(a.error("missing-parameter: view is missing."),e.reject(new g("searchgeometryutils:missing-parameter","view is missing.")))};f.getPointFromGeometry=function(a){return a instanceof l.Point?a:a instanceof l.Extent?a.center:a instanceof l.Polygon?a.centroid:a instanceof l.Multipoint?a.getPoint(0):a instanceof l.Polyline?a.getPoint(0,0):null};f.createExtentFromGeometry=function(a,h,e){if(c.isNone(a))return null;if(a instanceof l.Extent)return a;if(a instanceof l.Multipoint||a instanceof
l.Polygon||a instanceof l.Polyline)return a.extent;if(a instanceof l.Point)return b(a,h,e)};f.scaleExtent=function(a,h,e){return c.isNone(a)||c.isNone(h)?null:b(a.center,h,e)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/unitUtils"],function(n,f,l,g){function m(c,e){e=g.getMetersPerUnitForSR(e);return c/(e*g.inchesPerMeter*l.screenDPI)}Object.defineProperty(f,"__esModule",{value:!0});f.getScale=function(c,e){e=e||c.extent;c=c.width;var k=
g.getMetersPerUnitForSR(e&&e.spatialReference);return e&&c?e.width/c*k*g.inchesPerMeter*l.screenDPI:0};f.getResolutionForScale=m;f.getScaleForResolution=function(c,e){e=g.getMetersPerUnitForSR(e);return c*e*g.inchesPerMeter*l.screenDPI};f.getExtentForScale=function(c,e){var k=c.extent;c=c.width;e=m(e,k.spatialReference);return k.clone().expand(e*c/k.width)}})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z,w,v,u,J,D){function B(){return c(this,void 0,void 0,function(){var a,b,d,h,c,e,p;return m(this,function(t){switch(t.label){case 0:return[4,Promise.all([new Promise(function(a,b){n(["./webgl"],a,b)}),new Promise(function(a,b){n(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){n(["./2d/engine"],a,b)})])];case 1:return a=t.sent(),b=a[1],d=b.GraphicsView2D,h=b.LabelManager,c=b.MapViewNavigation,e=b.MagnifierView2D,p=a[2].Stage,C=d,E=h,H=c,F=e,I=p,[2]}})})}
var A=b.getLogger("esri.views.MapView"),I,C,E,H,F;return function(b){function c(a){a=b.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new v;a.magnifier=new y;a.inputManager=new w({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new D;a.rendering=!1;p.initialize();return a}l(c,b);Object.defineProperty(c.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});c.prototype.toMap=function(a){if(d.isSupportedScreenPointEvent(a)){var b=d.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[b])}return this.inherited(arguments)};c.prototype.hitTest=function(b){var h=d.isSupportedScreenPointEvent(b)?d.createScreenPointFromSupportedEvent(this,
b):b;if(!this.internallyReady||isNaN(h.x)||isNaN(h.y))return a.resolve({screenPoint:h,results:[]});var c=this.toMap(h);b=[this.graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());return a.all(b.map(function(a){return a&&a.hitTest?a.hitTest(h.x,h.y):null})).then(function(a){return{screenPoint:h,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:c,graphic:a}})}})};c.prototype.takeScreenshot=function(b){return this.internallyReady?this._stage.takeScreenshot(u.toRenderSettings(b,
this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};c.prototype.on=function(a,b,d){var h=this.inputManager&&this.inputManager.viewEvents.register(a,b,d);return h?h:this.inherited(arguments)};c.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};c.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};c.prototype.whenReady=function(){var b=this;
return a.create(function(a){b.internallyReady?a(b):b._resolveWhenReady.push(a)})};c.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};c.prototype.validate=function(){var b=J.check({supportsMajorWebPerformanceCaveat:!0});r("safari")&&9>r("safari")&&(b=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:r("safari")}));return b?(A.warn("#validate()",b.message),a.reject(b)):e.safeCast(B())};c.prototype._startup=
function(){var a=this;this.timeline.begin("MapView Startup");if(!this.internallyReady){this.inherited(arguments);this.graphics.owner=this;var b=new I(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),d=new C({view:this,graphics:this.graphics}),c=new H({view:this,animationManager:this.animationManager}),
e=new E({view:this});this._magnifierView=new F;this._magnifierView.magnifier=this.magnifier;this._stage=b;this._frameTask.graphicsView=d;this._set("graphicsView",d);this._set("mapViewNavigation",c);this._set("labelManager",e);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),h.init(this,
"stationary",function(a){return b.stationary=a},!0),h.init(this,"state.viewpoint",function(d){return b.state=a.state},!0),h.init(this,"background",function(a){return b.background=a},!0),h.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),h.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),h.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();
d=this._resolveWhenReady;this._resolveWhenReady=[];d.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")}};c.prototype._tearDown=function(){this.internallyReady&&(this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",
null),this.graphics.owner=null,this.inherited(arguments))};c.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,d){a._stage.addChildAt(b.container,d)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};g([t.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],c.prototype,"background",null);g([t.property()],c.prototype,
"graphicsView",void 0);g([t.property({type:v})],c.prototype,"highlightOptions",void 0);g([t.property({type:y})],c.prototype,"magnifier",void 0);g([t.property({readOnly:!0})],c.prototype,"inputManager",void 0);g([t.property({readOnly:!0})],c.prototype,"mapViewNavigation",void 0);g([t.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],c.prototype,"interacting",null);g([t.property({type:Boolean,constructOnly:!0})],c.prototype,"supersampleScreenhotsEnabled",void 0);g([t.property({type:D})],
c.prototype,"ui",void 0);g([t.property({readOnly:!0})],c.prototype,"rendering",void 0);g([t.property({constructOnly:!0})],c.prototype,"renderCanvas",void 0);g([t.property({constructOnly:!0})],c.prototype,"deactivatedWebGLExtensions",void 0);g([t.property({constructOnly:!0})],c.prototype,"debugWebGLExtensions",void 0);return c=g([t.subclass("esri.views.MapView")],c)}(t.declared(x.BreakpointsOwner(q.DOMContainer(z))))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(n,f,l,g,m,c,e,k,r){function b(b,d){return d?a[b].valueToClassName[d].split(" "):[]}Object.defineProperty(f,"__esModule",{value:!0});var a={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var d=this.values;return b<=a.xsmall?d.xsmall:b<=a.small?d.small:b<=a.medium?d.medium:b<=a.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};f.BreakpointsOwner=
function(h){return function(h){function p(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=h.apply(this,a)||this;a._breakpointsHandles=new e;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=d;return a}l(p,h);p.prototype.initialize=function(){this._breakpointsHandles.add(k.init(this,["breakpoints","size"],this._updateClassNames))};p.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(p.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var h=JSON.stringify(d,null,2);console.warn("provided breakpoints are not valid, using defaults:"+h)}a=b?a:d;this._set("breakpoints",m({},a))}},enumerable:!0,configurable:!0});p.prototype._updateClassNames=function(){if(this.container){var d=c.acquire(),h=c.acquire(),e=!1,p;for(p in a){var k=this[p],t=a[p].getValue({viewSize:this.size,
breakpoints:this.breakpoints});k!==t&&(e=!0,this[p]=t,b(p,k).forEach(function(a){return h.push(a)}),b(p,t).forEach(function(a){return d.push(a)}))}e&&(this._applyClassNameChanges(d,h),c.release(d),c.release(h))}};p.prototype._applyClassNameChanges=function(a,b){var d=this.container;d&&(b.forEach(function(a){return d.classList.remove(a)}),a.forEach(function(a){return d.classList.add(a)}))};p.prototype._removeActiveClassNames=function(){var d=this.container;if(d)for(var h in a)b(h,this[h]).forEach(function(a){return d.classList.remove(a)})};
g([r.property()],p.prototype,"breakpoints",null);g([r.property()],p.prototype,"orientation",void 0);g([r.property()],p.prototype,"widthBreakpoint",void 0);g([r.property()],p.prototype,"heightBreakpoint",void 0);return p=g([r.subclass("esri.views.BreakpointsOwner")],p)}(r.declared(h))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,
c){return function(e){function k(c){c=e.call(this)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=!1;return c}l(k,e);Object.defineProperty(k.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});g([c.property({type:Number})],k.prototype,"factor",void 0);g([c.property({type:Number})],k.prototype,"offsetX",void 0);g([c.property({type:Number})],k.prototype,"offsetY",void 0);g([c.property()],k.prototype,"position",void 0);g([c.property({readOnly:!0,
dependsOn:["factor","offsetX","offsetY","position","visible"]})],k.prototype,"version",null);g([c.property({type:Boolean})],k.prototype,"visible",void 0);return k=g([c.subclass("esri.views.Magnifier")],k)}(c.declared(m))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z,w,v,u,J,D,B){var A=r.getLogger("esri.views.MapView");return function(q){function f(a){var b=q.call(this,a)||this;b._frameTask=new w.default(b);b.featuresTilingScheme=null;b.fullOpacity=1;b.interacting=!1;b.initialExtent=null;b.labelManager=null;b.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};b.resizeAlign="center";b.timeline=new B.Timeline;b.type="2d";b.constraints=new v;b.padding={top:0,
right:0,bottom:0,left:0};var d=b.handles,h=function(){return b.notifyChange("updating")};d.add([b.watch("viewpoint",function(a){return b._flipStationary()},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.allLayerViews.on("change",function(){h();d.remove("map-view-base-layerViewsUpdating");d.add(b.allLayerViews.map(function(a){return a.watch("updating",h)}),"map-view-base-layerViewsUpdating")})],"map-view-base");b.watch("ready",
function(a){a?(b._startup(),b._frameTask&&b._frameTask.start()):(b._frameTask&&b._frameTask.stop(),b._tearDown())},!0);return b}g(f,q);f.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._frameTask=null)};Object.defineProperty(f.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),d=function(){a===b._get("animation")&&
(b._set("animation",null),b._frameTask.requestFrame())},a.when(d,d)))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"center",{get:function(){if(!this.internallyReady)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.internallyReady){var b=this.viewpoint;D.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");
else A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this.handles.remove("map-view-base-constraints"),d.destroy());this._set("constraints",a);a&&(a.view=this,this.internallyReady&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",
function(){b.internallyReady&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extent",{get:function(){return this.internallyReady?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.internallyReady?(a=this.viewpoint,D.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",
b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):A.error("#extent","invalid extent size"):A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,h=this.viewpoint,
c=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==d||-1!==c)||h?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"padding",{get:function(){return this.internallyReady?this.state.padding:this._get("padding")},set:function(a){this.internallyReady?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"resolution",{get:function(){return this.state?this.state.resolution:
0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"rotation",{get:function(){return this.internallyReady?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.internallyReady){var b=this.viewpoint;D.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"scale",{get:function(){return this.internallyReady?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.internallyReady){var b=
this.viewpoint;D.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"updating",{get:function(){return!this.destroyed&&
(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"viewpoint",{get:function(){if(!this.internallyReady)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.internallyReady?(a=new e({targetGeometry:new c.Point,
scale:0,rotation:0}),D.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?A.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?A.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):A.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"zoom",{get:function(){return this.internallyReady?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.internallyReady){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",
b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,D.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});f.prototype.goTo=function(a,b){var h=this;if(a)return d.whenTrueOnce(this,"ready",b&&b.signal).then(function(){h.animation&&(h.animation=null);var d=l({animate:!0},b),c=D.createAsync(a,h);h._gotoTask={};return d.animate?h._gotoAnimated(c,d):h._gotoImmediate(c,d)});A.error("#goTo()",
"target cannot be null or undefined")};f.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};f.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(d){return l({},d,{mapPoint:b.toMap(a)})})};f.prototype.toMap=function(a){if(!this.internallyReady)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};f.prototype.isTileInfoRequired=function(){return!0};f.prototype.toScreen=
function(b){if(!this.internallyReady)return null;b=this._normalizeInput(b);b=[b.x,b.y];b=this.state.toScreen(b,b);return a.createScreenPoint(b[0],b[1])};f.prototype.pixelSizeAt=function(a,b){if(!this.internallyReady)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};f.prototype.requestLayerViewUpdate=function(a){this.internallyReady&&this._frameTask.requestLayerViewUpdate(a)};f.prototype.requestUpdate=function(a){this.internallyReady&&this._frameTask.requestUpdate(a)};
f.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};f.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};f.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new y;this.animation.update(a);return this.animation};f.prototype._cancellableGoTo=function(a,d,h,c){var e=this,
p=h.then(function(){a===e._gotoTask&&(e.animation=null)}).catch(function(b){a===e._gotoTask&&(e.animation=null,d.done||d.stop());throw b;}),k=b.create(function(a){return a(p)},function(){a!==e._gotoTask||d.done||d.stop()});d.when().catch(function(){a===e._gotoTask&&k.cancel&&k.cancel()});return k};f.prototype._gotoImmediate=function(a,d){var h=this,c=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(d);if(c!==h._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");
h.viewpoint=e.target=a;e.finish()});return this._cancellableGoTo(c,e,a,d)};f.prototype._gotoAnimated=function(a,b){var d=this,h=this._gotoTask,c=this._createOrReplaceAnimation(a);a=a.then(function(a){if(h!==d._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");c.update(a);d.animationManager.animate(c,d.viewpoint,b);return c.when().then(function(){},function(){})});return this._cancellableGoTo(h,c,a,b)};f.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=this.content.viewpoint,
h=this.content.size.concat();b.size=[a.width,a.height];D.resize(d,d,h,this.content.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};f.prototype._startup=function(){if(!this.internallyReady){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new z({view:this}));this._set("state",new u({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",
new J.TileInfoView(t.create({spatialReference:this.spatialReference,size:512})));this.internallyReady=!0}};f.prototype._tearDown=function(){if(this.internallyReady){this.internallyReady=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,d=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:d});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",
-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",d);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};f.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};
f.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var d=a&&a.targetGeometry||a;return b?d?b.equals(d.spatialReference)?a:p.canProject(d,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=p.project(d,b),a):p.project(d,b):null:null:a};f.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),d=this._get("scale"),h=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),p=this._get("rotation"),k=this._normalizeInput(this._get("viewpoint"));
a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var t=null,g=null,b=0,a=k&&k.rotation,q=k&&k.targetGeometry;q&&("extent"===q.type?t=q:"point"===q.type&&(g=q,b=k.scale));k=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));q=this._normalizeInput(this.initialExtent);c=c||t||k||q;h=h||g||c&&c.center;d=d||b||c&&D.extentToScale(c,this.size);return h&&d?new e({targetGeometry:h,scale:d,rotation:p||a||0}):null};m([h.property()],f.prototype,"animation",null);m([h.property({readOnly:!0})],
f.prototype,"animationManager",void 0);m([h.property({value:null,type:c.Point,dependsOn:["content.viewpoint"]})],f.prototype,"center",null);m([h.property({type:v})],f.prototype,"constraints",null);m([h.property({readOnly:!0})],f.prototype,"content",void 0);m([h.property({value:null,type:c.Extent,dependsOn:["content.viewpoint"]})],f.prototype,"extent",null);m([h.property({readOnly:!0})],f.prototype,"featuresTilingScheme",void 0);m([h.property()],f.prototype,"fullOpacity",void 0);m([h.property({readOnly:!0})],
f.prototype,"interacting",void 0);m([h.property({type:c.Extent})],f.prototype,"initialExtent",void 0);m([h.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],f.prototype,"initialExtentRequired",null);m([h.property()],f.prototype,"labelManager",void 0);m([h.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return l({top:0,right:0,bottom:0,left:0},a)}})],f.prototype,"padding",null);m([h.property({type:Object})],f.prototype,"renderingOptions",void 0);m([h.property()],f.prototype,
"resizeAlign",void 0);m([h.property({readOnly:!0,dependsOn:["content.viewpoint"]})],f.prototype,"resolution",null);m([h.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],f.prototype,"rotation",null);m([h.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],f.prototype,"scale",null);m([h.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],f.prototype,"spatialReference",void 0);m([h.property({readOnly:!0})],
f.prototype,"state",void 0);m([h.property()],f.prototype,"stationary",null);m([h.property({type:B.Timeline,readOnly:!0})],f.prototype,"timeline",void 0);m([h.property({readOnly:!0})],f.prototype,"type",void 0);m([h.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],f.prototype,"updating",null);m([h.property({value:null,type:e,dependsOn:["content.viewpoint"]})],f.prototype,"viewpoint",null);m([h.property({value:-1,dependsOn:["scale"]})],
f.prototype,"zoom",null);return f=m([h.subclass("esri.views.MapViewBase")],f)}(h.declared(x.PopupView(q)))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c,e,k,r,b,a,d){Object.defineProperty(f,
"__esModule",{value:!0});f.PopupView=function(h){return function(h){function p(){return null!==h&&h.apply(this,arguments)||this}g(p,h);p.prototype.when=function(a,b){return this.inherited(arguments)};p.prototype.fetchPopupFeatures=function(a,b){return r.safeCast(this._fetchPopupFeaturesAsync(a,b))};p.prototype._fetchPopupFeaturesAsync=function(b,d){return c(this,void 0,void 0,function(){var h,c,p,t,g,q;return e(this,function(e){switch(e.label){case 0:return[4,this.when()];case 1:return e.sent(),[4,
this._prepareFetchPopupFeatures(b,d)];case 2:return h=e.sent(),c=h.location,p=this._queryLayerPopupFeatures(h,d),t=a.resolve(h.clientOnlyGraphics),g=[t].concat(p),q=a.eachAlwaysValues(g).then(k.flatten),[2,{promise:q,location:c,promises:g}]}})})};p.prototype._queryLayerPopupFeatures=function(a,d){var h=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,signal:b.isSome(d)?d.signal:null,defaultPopupTemplateEnabled:b.isSome(d)?!!d.defaultPopupTemplateEnabled:
!1};return c.fetchPopupFeatures(h,a)})};p.prototype._isValidPopupGraphic=function(a,d){return a&&!!a.getEffectivePopupTemplate(b.isSome(d)&&d.defaultPopupTemplateEnabled)};p.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var d,h,c,p,k,t,g,q;return e(this,function(e){switch(e.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return d=e.sent(),h=d.clientGraphics,c=d.queryArea,p=d.location,k=this._getFetchPopupLayerViews(),t=this._graphicsPerFetchPopupLayerView(h,
k),g=t.layerViewsAndGraphics,q=t.clientOnlyGraphics,[2,{clientOnlyGraphics:q,layerViewsAndGraphics:g,queryArea:c,location:p}]}})})};p.prototype._popupHitTestGraphics=function(a,b){return c(this,void 0,void 0,function(){var d,h,c,p,k,t,g=this;return e(this,function(e){switch(e.label){case 0:return[4,this.popupHitTest(a)];case 1:return d=e.sent(),h=d.results,c=d.mapPoint,p=h.filter(function(a){return g._isValidPopupGraphic(a.graphic,b)}),k=p.length?p[0].mapPoint:null,t=p.map(function(a){return a.graphic}),
[2,{clientGraphics:t,queryArea:c,location:c||k}]}})})};p.prototype._getFetchPopupLayerViews=function(){var a=this,d=[];this.allLayerViews.forEach(function(b){a._isValidPopupLayerView(b)&&d.push(b)});b.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&d.push(this.graphicsView);return d.reverse()};p.prototype._isValidPopupLayerView=function(a){return b.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};p.prototype._graphicsPerFetchPopupLayerView=function(a,
b){var d=[],h=new Map;b=b.map(function(a){var b=[];"layer"in a?h.set(a.layer,b):h.set(a.graphics,b);return{layerView:a,graphics:b}});for(var c=0;c<a.length;c++){var e=a[c],p=h.get(e.layer)||null;p?p.push(e):d.push(e)}return{layerViewsAndGraphics:b,clientOnlyGraphics:d}};return p=m([d.subclass("esri.views.PopupView")],p)}(d.declared(h))}})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(n,f,l,g,m,c,e,k){var r=function(b,a,d,h){var c=b.targetGeometry,k=a.targetGeometry;h?"string"===typeof h&&(h=e.parse(h)||e.ease):h=e.ease;this.easing=h;this.duration=d;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=k.x;this.tCenterY=k.y;this.tScale=a.scale;this.tRotation=a.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;
180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};r.prototype.applyRatio=function(b,a){var d=this.easing(a),h,c;1<=a?(a=this.tCenterX,h=this.tCenterY,c=this.tRotation,d=this.tScale):(a=this.sCenterX+d*this.dCenterX,h=this.sCenterY+d*this.dCenterY,c=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);b.targetGeometry.x=a;b.targetGeometry.y=h;b.scale=d;b.rotation=c};return f.createSubclass({constructor:function(){this.viewpoint=new n({targetGeometry:new m,scale:0,
rotation:0});this._updateTask=l.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:e.ease},view:null,viewpoint:null},animate:function(b,a,d){this.stop();k.copy(this.viewpoint,a);this.transition=new r(this.viewpoint,b.target,d&&d.duration||this.duration,d&&d.easing||this.easing);a=function(){this.animation===b&&this._updateTask&&("finished"===b.state&&(this.transition.applyRatio(this.viewpoint,
1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);b.when(a,a);this._startTime=g();this._updateTask.resume();return this.animation=b},animateContinous:function(b,a){this.stop();this.updateFunction=a;this.viewpoint=b;var d=new c({target:b.clone()});b=function(){this.animation===d&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);d.when(b,b);this._startTime=
g();this._updateTask.resume();return this.animation=d},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(b){var a=this.animation;a&&a.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(g()-this._startTime)/this.transition.duration,a=1<=b,this.transition.applyRatio(this.viewpoint,b),a&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var n=function(f,g,m,c){function e(a,d){var h,c,e,p;d=null==d?1E-6:d;e=a;for(c=0;8>c;c++){p=((b*e+r)*e+k)*e-a;if(Math.abs(p)<d)return e;h=(3*b*e+2*r)*e+k;if(1E-6>Math.abs(h))break;e-=p/h}h=0;c=1;e=a;if(e<h)return h;if(e>c)return c;for(;h<c;){p=((b*e+r)*e+k)*e;if(Math.abs(p-a)<d)break;a>p?h=e:c=e;e=.5*(c-h)+h}return e}var k=3*f,r=3*(m-f)-k,b=1-k-r,a=3*g,d=3*(c-g)-a,h=1-a-d;return function(b,c){b=e(b,c);return((h*b+d)*b+a)*b}},f=/^cubic-bezier\((.*)\)/;
n.parse=function(l){var g=n[l]||null;!g&&(l=f.exec(l))&&(l=l[1].split(",").map(function(g){return parseFloat(g.trim())}),4!==l.length||l.some(function(g){return isNaN(g)})||(g=n.apply(n,l)));return g};n.ease=n(.25,.1,.25,1);n.linear=n(0,0,1,1);n.easeIn=n["ease-in"]=n(.42,0,1,1);n.easeOut=n["ease-out"]=n(0,0,.58,1);n.easeInOut=n["ease-in-out"]=n(.42,0,.58,1);return n})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z,w,v,u,J){function D(a,b,h,c){return c&&h&&!c.equals(h)&&u.canProject(c,h)&&c.isWebMercator?(c.isWebMercator?(h=b[1],89.99999<h?h=89.99999:-89.99999>h&&(h=-89.99999),h=Math.sin(d.common.toRadian(h)),a=t.vec2.set(a,d.common.toRadian(b[0])*G,.5*G*Math.log((1+h)/(1-h)))):(h=d.common.toDegree(b[0]/G),a=t.vec2.set(a,h-360*Math.floor((h+180)/360),d.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/G))))),a):t.vec2.copy(a,b)}function B(a){return a.wkid?
a:a.spatialReference||w.WGS84}function A(a,b){return b.type?t.vec2.set(a,b.x,b.y):t.vec2.copy(a,b)}function I(a,b){return Math.max(a.width/b[0],a.height/b[1])*Q(a.spatialReference)}function C(a,b,d,h){return g(this,void 0,void 0,function(){var c,p,t,g,f,x,v,w,m,N,J,X,D,W,n,R,B,A,I,E,H,F,G,S,M,K,P,L;return l(this,function(O){switch(O.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];e.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
p=a.every(function(a){return"attributes"in a});t=a.some(function(a){return!a.geometry});g=a;if(!(p&&t&&b&&b.allLayerViews))return[3,2];f=new Map;x=0;for(v=a;x<v.length;x++)w=v[x],m=w.layer,N=f.get(m)||[],J=w.attributes[m.objectIdField],null!=J&&N.push(J),f.set(m,N);X=[];f.forEach(function(a,d){var h=b.allLayerViews.find(function(a){return a.layer.id===d.id});if("queryFeatures"in h){var c=d.createQuery();c.objectIds=a;c.returnGeometry=!0;X.push(h.queryFeatures(c))}});return[4,r.all(X)];case 1:D=O.sent();
W=[];n=0;for(R=D;n<R.length;n++)if((B=R[n])&&B.features&&B.features.length)for(A=0,I=B.features;A<I.length;A++)w=I[A],k.isSome(w.geometry)&&W.push(w.geometry);g=W;O.label=2;case 2:E=0,H=g,O.label=3;case 3:if(!(E<H.length))return[3,6];F=H[E];return[4,C(F,b,d,h)];case 4:h=O.sent(),O.label=5;case 5:return E++,[3,3];case 6:return[2,h];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];c=new z(a);return[3,12];case 8:if(!(a instanceof y))return[3,9];c=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];c=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];G=a.layer;S=b.allLayerViews.find(function(a){return a.layer.id===G.id});if(!("queryFeatures"in S))return[3,12];M=G.createQuery();M.objectIds=[a.attributes[G.objectIdField]];M.returnGeometry=!0;return[4,S.queryFeatures(M)];case 11:K=O.sent(),c=k.get(K,"features",0,"geometry"),O.label=12;case 12:if(k.isNone(c))return[2,null];P="point"===c.type?new q({xmin:c.x,
ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent;if(!P)return[2,null];L=u.canProject(P,d);if(!P.spatialReference.equals(d)&&L)P=u.project(P,d);else if(!L)return[2,null];h=h?h.union(P):P.clone();return[2,h]}})})}function E(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var d=0,h=0,c=0;c<a.length;c++)(b=a[c].layer)&&b.minScale&&b.maxScale&&(d=b.minScale<d?b.minScale:d,h=b.maxScale>h?b.maxScale:h);return d&&h?{min:d,max:h}:null}}}function H(a,b){return g(this,void 0,void 0,function(){var d,h,c,e,p,k,t,g,f,r,y,w,v,N,n,R;return l(this,function(O){switch(O.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new z,scale:0,rotation:0})];d=b.spatialReference;h=b.size;c=b.viewpoint;e=b.constraints;p=null;"esri.Viewpoint"===
a.declaredClass?p=a:a.viewpoint?p=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(p=a.target);k=null;if(!p||!p.targetGeometry)return[3,1];k=p.targetGeometry;return[3,10];case 1:if(!(a instanceof q))return[3,2];k=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,C(a.center,b,d)]:[3,10];case 3:return(f=O.sent())?[3,5]:[4,C(a.extent,b,d)];case 4:f=O.sent(),O.label=5;case 5:return(g=f)?[3,7]:[4,C(a.target,b,d)];
case 6:g=O.sent(),O.label=7;case 7:return(t=g)?[3,9]:[4,C(a,b,d)];case 8:t=O.sent(),O.label=9;case 9:k=t,O.label=10;case 10:!k&&c&&c.targetGeometry?k=c.targetGeometry:!k&&b.extent&&(k=b.extent);r=B(k);d||(d=B(b.spatialReference||b.extent||k));if(!J.canProject(k,d)&&r&&!r.equals(d))return[2,null];y=A(x.vec2f64.create(),k.center?k.center:k);w=new z(D(y,y,r,d),d);v=null;v=p&&p.targetGeometry&&"point"===p.targetGeometry.type?p.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&
-1!==a.zoom&&e&&e.effectiveLODs?e.zoomToScale(a.zoom):Array.isArray(k)||"point"===k.type||"extent"===k.type&&0===k.width&&0===k.height?b.extent&&u.canProject(b.extent,d)?I(u.project(b.extent,d),h):b.extent?I(b.extent,h):c.scale:u.canProject(k.extent,d)?I(u.project(k.extent,d),h):I(k.extent,h);if(N=E(a))N.min&&N.min>v?v=N.min:N.max&&N.max<v&&(v=N.max);n=0;p?n=p.rotation:a.hasOwnProperty("rotation")?n=a.rotation:c&&(n=c.rotation);R=new m({targetGeometry:w,scale:v,rotation:n});e&&(R=e.fit(R),e.rotationEnabled||
(R.rotation=n));return[2,R]}})})}function F(a,b){var d=a.targetGeometry,h=b.targetGeometry;d.x=h.x;d.y=h.y;d.spatialReference=h.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function S(a,b,d){return d?t.vec2.set(a,.5*(b[0]-d.right+d.left),.5*(b[1]-d.bottom+d.top)):t.vec2.scale(a,b,.5)}function P(a,b,d,c){f.getTransform(a,b,d,c);return h.mat2d.invert(a,a)}function T(a,b,d){var h=K(b);b=Math.abs(Math.cos(h));h=Math.abs(Math.sin(h));return t.vec2.set(a,Math.round(d[1]*h+d[0]*b),Math.round(d[1]*
b+d[0]*h))}function M(a){var d=a.scale;a=a.targetGeometry.spatialReference;a=v.isValid(a)?1/(39.37*b.getMetersPerUnitForSR(a)*96):1;return d*a}function K(a){return d.common.toRadian(a.rotation)||0}function Q(a){return v.isValid(a)?39.37*b.getMetersPerUnitForSR(a)*96:1}function L(a){return a.isWrappable?(a=v.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(f,"__esModule",{value:!0});var G=a.wgs84Radius,U=180/Math.PI;f.extentToScale=I;f.create=H;f.copy=F;f.getAnchor=S;f.getExtent=function(){var a=
x.vec2f64.create();return function(b,d,h){var c=d.targetGeometry;A(a,c);d=.5*M(d);b.xmin=a[0]-d*h[0];b.ymin=a[1]-d*h[1];b.xmax=a[0]+d*h[0];b.ymax=a[1]+d*h[1];b.spatialReference=c.spatialReference;return b}}();f.setExtent=function(a,b,d,h,c){f.centerAt(a,b,d.center);a.scale=I(d,h);c&&c.constraints&&c.constraints.constrain(a);return a};f.getOuterExtent=function(){var a=x.vec2f64.create(),b=x.vec2f64.create();return function(d,h,c){A(a,h.targetGeometry);T(b,h,c);c=.5*M(h);d.set({xmin:a[0]-c*b[0],ymin:a[1]-
c*b[1],xmax:a[0]+c*b[0],ymax:a[1]+c*b[1],spatialReference:h.targetGeometry.spatialReference});return d}}();f.getOuterSize=T;f.getPaddingScreenTranslation=function(){var a=x.vec2f64.create();return function(b,d,h){return t.vec2.sub(b,t.vec2.scale(b,d,.5),S(a,d,h))}}();f.getPaddingMapTranslation=function(){var a=p.mat2df64.create(),b=x.vec2f64.create();return function(d,c,e,p){var k=M(c);c=K(c);t.vec2.set(b,k,k);h.mat2d.fromScaling(a,b);h.mat2d.rotate(a,a,c);h.mat2d.translate(a,a,f.getPaddingScreenTranslation(b,
e,p));h.mat2d.translate(a,a,[0,p.top-p.bottom]);return t.vec2.set(d,a[4],a[5])}}();f.getResolution=M;f.getResolutionToScaleFactor=Q;f.getMatrix=function(){var a=x.vec2f64.create(),b=x.vec2f64.create(),d=x.vec2f64.create();return function(c,e,p,k,g,q){t.vec2.negate(a,e);t.vec2.scale(b,p,.5*q);t.vec2.set(d,1/k*q,-1/k*q);h.mat2d.identity(c);h.mat2d.translate(c,c,b);g&&h.mat2d.rotate(c,c,g);h.mat2d.scale(c,c,d);h.mat2d.translate(c,c,a);return c}}();f.getTransform=function(){var a=x.vec2f64.create();return function(b,
d,h,c){var e=M(d),p=K(d);A(a,d.targetGeometry);return f.getMatrix(b,a,h,e,p,c)}}();f.getTransformNoRotation=function(){var a=x.vec2f64.create();return function(b,d,h,c){var e=M(d);A(a,d.targetGeometry);return f.getMatrix(b,a,h,e,0,c)}}();f.getWorldWidth=L;f.getWorldScreenWidth=function(a,b){return Math.round(L(a)/b)};f.createAsync=function(a,b){return c.safeCast(H(a,b))};f.angleBetween=function(){var a=x.vec2f64.create(),b=x.vec2f64.create(),d=[0,0,0];return function(h,c,e){t.vec2.subtract(a,h,c);
t.vec2.normalize(a,a);t.vec2.subtract(b,h,e);t.vec2.normalize(b,b);t.vec2.cross(d,a,b);h=Math.acos(t.vec2.dot(a,b)/(t.vec2.length(a)*t.vec2.length(b)))*U;0>d[2]&&(h=-h);isNaN(h)&&(h=0);return h}}();f.addPadding=function(){var a=x.vec2f64.create();return function(b,d,h,c){var e=b.targetGeometry;F(b,d);f.getPaddingMapTranslation(a,d,h,c);e.x+=a[0];e.y+=a[1];return b}}();f.removePadding=function(){var a=x.vec2f64.create();return function(b,d,h,c){var e=b.targetGeometry;F(b,d);f.getPaddingMapTranslation(a,
d,h,c);e.x-=a[0];e.y-=a[1];return b}}();f.centerAt=function(){var a=x.vec2f64.create();return function(b,d,h){F(b,d);d=b.targetGeometry;var c=B(h),e=B(d);A(a,h);D(a,a,c,e);d.x=a[0];d.y=a[1];return b}}();f.pixelSizeAt=function(a,b,d){return M(b)};f.resize=function(){var a=x.vec2f64.create();return function(b,d,h,c,e){e||(e="center");t.vec2.sub(a,h,c);t.vec2.scale(a,a,.5);h=a[0];c=a[1];switch(e){case "center":t.vec2.set(a,0,0);break;case "left":t.vec2.set(a,-h,0);break;case "top":t.vec2.set(a,0,c);
break;case "right":t.vec2.set(a,h,0);break;case "bottom":t.vec2.set(a,0,-c);break;case "top-left":t.vec2.set(a,-h,c);break;case "bottom-left":t.vec2.set(a,-h,-c);break;case "top-right":t.vec2.set(a,h,c);break;case "bottom-right":t.vec2.set(a,h,-c)}f.translateBy(b,d,a);return b}}();f.rotateBy=function(a,b,d){F(a,b);a.rotation+=d;return a};f.rotateTo=function(a,b,d){F(a,b);a.rotation=d;return a};f.scaleBy=function(){var a=x.vec2f64.create();return function(b,d,h,c,e){F(b,d);isNaN(h)||0===h||(f.toMap(a,
c,d,e),b.scale=d.scale*h,f.toScreen(a,a,b,e),f.translateBy(b,b,t.vec2.set(a,a[0]-c[0],c[1]-a[1])));return b}}();f.scaleTo=function(a,b,d){F(a,b);a.scale=d;return a};f.scaleAndRotateBy=function(){var a=x.vec2f64.create();return function(b,d,h,c,e,p){F(b,d);isNaN(h)||0===h||(f.toMap(a,e,d,p),b.scale=d.scale*h,b.rotation+=c,f.toScreen(a,a,b,p),f.translateBy(b,b,t.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();f.padAndScaleAndRotateBy=function(){var a=x.vec2f64.create(),b=x.vec2f64.create();return function(d,
h,c,e,p,k,g){f.getPaddingScreenTranslation(b,k,g);t.vec2.add(a,p,b);return e?f.scaleAndRotateBy(d,h,c,e,a,k):f.scaleBy(d,h,c,a,k)}}();f.toMap=function(){var a=p.mat2df64.create();return function(b,d,h,c){return t.vec2.transformMat2d(b,d,P(a,h,c,1))}}();f.toScreen=function(){var a=p.mat2df64.create();return function(b,d,h,c){return t.vec2.transformMat2d(b,d,f.getTransform(a,h,c,1))}}();f.translateBy=function(){var a=x.vec2f64.create(),b=p.mat2df64.create();return function(d,c,e){F(d,c);var p=M(c),
k=d.targetGeometry;h.mat2d.fromRotation(b,K(c));h.mat2d.scale(b,b,x.vec2f64.fromValues(p,p));t.vec2.transformMat2d(a,e,b);k.x+=a[0];k.y+=a[1];return d}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.common=l})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.mat2d=l})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require",
"exports","./common"],function(n,f,l){function g(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4];e=e[5];var p=k[0],t=k[1],f=k[2],q=k[3],y=k[4];k=k[5];c[0]=g*p+a*t;c[1]=b*p+d*t;c[2]=g*f+a*q;c[3]=b*f+d*q;c[4]=g*y+a*k+h;c[5]=b*y+d*k+e;return c}function m(c,e,k){c[0]=e[0]-k[0];c[1]=e[1]-k[1];c[2]=e[2]-k[2];c[3]=e[3]-k[3];c[4]=e[4]-k[4];c[5]=e[5]-k[5];return c}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};f.identity=
function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};f.set=function(c,e,k,g,b,a,d){c[0]=e;c[1]=k;c[2]=g;c[3]=b;c[4]=a;c[5]=d;return c};f.invert=function(c,e){var k=e[0],g=e[1],b=e[2],a=e[3],d=e[4];e=e[5];var h=k*a-g*b;if(!h)return null;h=1/h;c[0]=a*h;c[1]=-g*h;c[2]=-b*h;c[3]=k*h;c[4]=(b*e-a*d)*h;c[5]=(g*d-k*e)*h;return c};f.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};f.multiply=g;f.rotate=function(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4];e=e[5];var p=Math.sin(k);k=Math.cos(k);
c[0]=g*k+a*p;c[1]=b*k+d*p;c[2]=g*-p+a*k;c[3]=b*-p+d*k;c[4]=h;c[5]=e;return c};f.scale=function(c,e,k){var g=e[1],b=e[2],a=e[3],d=e[4],h=e[5],p=k[0];k=k[1];c[0]=e[0]*p;c[1]=g*p;c[2]=b*k;c[3]=a*k;c[4]=d;c[5]=h;return c};f.translate=function(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4];e=e[5];var p=k[0];k=k[1];c[0]=g;c[1]=b;c[2]=a;c[3]=d;c[4]=g*p+a*k+h;c[5]=b*p+d*k+e;return c};f.fromRotation=function(c,e){var k=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=k;c[2]=-k;c[3]=e;c[4]=0;c[5]=0;return c};f.fromScaling=
function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=e[1];c[4]=0;c[5]=0;return c};f.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};f.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};f.add=function(c,e,k){c[0]=e[0]+k[0];c[1]=e[1]+k[1];c[2]=e[2]+k[2];c[3]=e[3]+k[3];c[4]=e[4]+k[4];c[5]=e[5]+
k[5];return c};f.subtract=m;f.multiplyScalar=function(c,e,k){c[0]=e[0]*k;c[1]=e[1]*k;c[2]=e[2]*k;c[3]=e[3]*k;c[4]=e[4]*k;c[5]=e[5]*k;return c};f.multiplyScalarAndAdd=function(c,e,k,g){c[0]=e[0]+k[0]*g;c[1]=e[1]+k[1]*g;c[2]=e[2]+k[2]*g;c[3]=e[3]+k[3]*g;c[4]=e[4]+k[4]*g;c[5]=e[5]+k[5]*g;return c};f.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};f.equals=function(c,e){var k=c[0],g=c[1],b=c[2],a=c[3],d=c[4];c=c[5];var h=e[0],p=e[1],t=e[2],
f=e[3],q=e[4];e=e[5];return Math.abs(k-h)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(h))&&Math.abs(g-p)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(b-t)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(d-q)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(c-e)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};f.mul=g;f.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],
function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df64=l})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[1,0,0,1,0,0]};f.clone=function(f){return[f[0],f[1],f[2],f[3],f[4],f[5]]};f.fromValues=function(f,g,m,c,e,k){return[f,g,m,c,e,k]};f.createView=function(f,g){return new Float64Array(f,g,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.vec2=l})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(n,f,l){function g(a,b,h){a[0]=b[0]-h[0];a[1]=b[1]-h[1];return a}function m(a,b,h){a[0]=b[0]*h[0];a[1]=b[1]*h[1];return a}function c(a,b,h){a[0]=b[0]/h[0];a[1]=b[1]/h[1];return a}function e(a,b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*d+a*a)}function k(a,b){var d=b[0]-a[0];a=b[1]-a[1];return d*
d+a*a}function r(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};f.set=function(a,b,h){a[0]=b;a[1]=h;return a};f.add=function(a,b,h){a[0]=b[0]+h[0];a[1]=b[1]+h[1];return a};f.subtract=g;f.multiply=m;f.divide=c;f.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};f.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};
f.min=function(a,b,h){a[0]=Math.min(b[0],h[0]);a[1]=Math.min(b[1],h[1]);return a};f.max=function(a,b,h){a[0]=Math.max(b[0],h[0]);a[1]=Math.max(b[1],h[1]);return a};f.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};f.scale=function(a,b,h){a[0]=b[0]*h;a[1]=b[1]*h;return a};f.scaleAndAdd=function(a,b,h,c){a[0]=b[0]+h[0]*c;a[1]=b[1]+h[1]*c;return a};f.distance=e;f.squaredDistance=k;f.length=r;f.squaredLength=b;f.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};f.inverse=
function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};f.normalize=function(a,b){var d=b[0],c=b[1],d=d*d+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};f.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};f.cross=function(a,b,h){b=b[0]*h[1]-b[1]*h[0];a[0]=a[1]=0;a[2]=b;return a};f.lerp=function(a,b,h,c){var d=b[0];b=b[1];a[0]=d+c*(h[0]-d);a[1]=b+c*(h[1]-b);return a};f.random=function(a,b){b=b||1;var d=2*l.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};f.transformMat2=function(a,
b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[2]*b;a[1]=h[1]*d+h[3]*b;return a};f.transformMat2d=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[2]*b+h[4];a[1]=h[1]*d+h[3]*b+h[5];return a};f.transformMat3=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[3]*b+h[6];a[1]=h[1]*d+h[4]*b+h[7];return a};f.transformMat4=function(a,b,h){var d=b[0];b=b[1];a[0]=h[0]*d+h[4]*b+h[12];a[1]=h[1]*d+h[5]*b+h[13];return a};f.rotate=function(a,b,h,c){var d=b[0]-h[0];b=b[1]-h[1];var e=Math.sin(c);c=Math.cos(c);a[0]=d*c-b*e+h[0];
a[1]=d*e+b*c+h[1];return a};f.angle=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];var e=d*d+a*a;0<e&&(e=1/Math.sqrt(e));var k=c*c+b*b;0<k&&(k=1/Math.sqrt(k));d=(d*c+a*b)*e*k;return 1<d?0:-1>d?Math.PI:Math.acos(d)};f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};f.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};f.equals=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];return Math.abs(d-c)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))&&Math.abs(a-b)<=l.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};f.len=r;f.sub=g;f.mul=m;f.div=c;f.dist=e;f.sqrDist=k;f.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.vec2f64=l})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[0,0]};f.clone=function(f){return[f[0],f[1]]};f.fromValues=function(f,
g){return[f,g]};f.fromArray=function(f){for(var g=[0,0],m=Math.min(2,f.length),c=0;c<m;++c)g[c]=f[c];return g};f.createView=function(f,g){return new Float64Array(f,g,2)};f.zeros=function(){return[0,0]};f.ones=function(){return[1,1]};f.unitX=function(){return[1,0]};f.unitY=function(){return[0,1]};f.ZEROS=[0,0];f.ONES=[1,1];f.UNIT_X=[1,0];f.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});
n=function(){function g(g){var c=this;this.view=g;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){for(var e=c.view,k=e.labelManager,g=c.graphicsView,b=e.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&
null==a.layerViews}),a=b.length,d=e.state,h=0;h<b.length;h++)if(e=b[h],e.attached){var p=e.lastUpdateId;if(null==p||!c.stationary&&!e.moving)e.moving=!0,e.moveStart();p!==d.id&&e.viewChange();c.stationary&&e.moving&&(e.moving=!1,e.moveEnd());e.lastUpdateId=d.id}k&&k.lastUpdateId!==d.id&&(k.viewChange(),k.lastUpdateId=d.id);g&&g.lastUpdateId!==d.id&&(g.viewChange(),g.lastUpdateId=d.id);k=c._layerViewsTrash;for(g=0;g<k.length;g++)e=k[g],c._detachLayerView(e);for(g=k.length=0;g<a;g++)e=b[g],e.isFulfilled()&&
!e.attached&&c._attachLayerView(e);b=c._updateParameters;a=c._layerViewsToUpdate;e=a.slice();g=a.length=0;for(d=e;g<d.length;g++)e=d[g],!("attached"in e)||"attached"in e&&e.attached?e.processUpdate(b):a.push(e);a=c._updatablesToUpdate;e=a.slice();for(a=a.length=0;a<e.length;a++)e[a].processUpdate(b);0===c._layerViewsToUpdate.length&&0===c._updatablesToUpdate.length&&0===k.length&&c._frameTaskHandle.pause()}}}g.prototype.destroy=function(){this.stop()};g.prototype.start=function(){var g=this;this.stationary=
this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(g._layerViewsTrash,c.removed);g.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){g.stationary=c;g.requestFrame()});
this._frameTaskHandle=l.addFrameTask(this)};g.prototype.stop=function(){var g=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){return g._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};g.prototype.requestLayerViewUpdate=function(g){this._layerViewsToUpdate.push(g);
this.requestFrame()};g.prototype.requestUpdate=function(g){this._updatablesToUpdate.push(g);this.requestFrame()};g.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};g.prototype._attachLayerView=function(g){g.attached||(g.attached=!0,g.attach(),this._updateParameters.stationary?g.moving=!1:(g.moving=!0,g.moveStart()))};g.prototype._detachLayerView=function(g){g.attached&&(g.detach(),g.attached=!1,g.moving=!1)};return g}();f.default=n})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(n,f,l,g,m,c,e,k,r){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}l(a,b);a.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};a.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(a.prototype,"_rotation",{get:function(){return new k({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_zoom",{get:function(){return new r({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});a.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};a.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};a.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};a.prototype.fit=function(a){return this._zoom.fit(a)};a.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};a.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};a.prototype.snapScale=
function(a){return this._zoom.snapToClosestScale(a)};a.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};a.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],a.prototype,"effectiveMaxScale",
void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0);g([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],a.prototype,"effectiveMaxZoom",void 0);g([c.property({type:[e]})],a.prototype,"lods",void 0);g([c.property()],a.prototype,"minScale",void 0);g([c.property()],a.prototype,"maxScale",void 0);g([c.property()],a.prototype,"minZoom",void 0);g([c.property()],a.prototype,"maxZoom",void 0);g([c.property()],a.prototype,"rotationEnabled",
void 0);g([c.property()],a.prototype,"snapToZoom",void 0);g([c.property()],a.prototype,"view",void 0);g([c.property({type:k,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null);g([c.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null);g([c.property({readOnly:!0,type:r,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],a.prototype,"_zoom",null);return a=g([c.subclass("esri.views.2d.MapViewConstraints")],
a)}(c.declared(m.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c){return function(e){function k(){var b=null!==e&&e.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}l(k,e);f=k;k.prototype.constrain=function(b,a){if(!this.enabled||!a)return b;this.rotationEnabled||
(b.rotation=a.rotation);return b};k.prototype.clone=function(){return new f({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var f;g([c.property()],k.prototype,"enabled",void 0);g([c.property()],k.prototype,"rotationEnabled",void 0);return k=f=g([c.subclass("esri.views.2d.constraints.RotationConstraint")],k)}(c.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(n,f,l,g,m,c,e){return function(k){function f(a){a=k.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}l(f,k);b=f;f.prototype.initialize=function(){var a=this,b,h,c=this.lods;h=this.minScale;b=this.maxScale;var e=this.minZoom,k=this.maxZoom,g=-1,f=-1,z=!1,r=!1;0!==h&&0!==b&&h<b&&(b=[b,h],h=b[0],
b=b[1]);if(c&&c.length){c=c.map(function(a){return a.clone()});c.sort(function(a,b){return b.scale-a.scale});c.forEach(function(a,b){return a.level=b});for(var v,u=0,m=c;u<m.length;u++){var l=m[u];!z&&0<h&&h>=l.scale&&(g=l.level,z=!0);!r&&0<b&&b>=l.scale&&(f=v?v.level:-1,r=!0);v=l}-1===e&&(e=0===h?0:g);-1===k&&(k=0===b?c.length-1:f);e=Math.max(e,0);e=Math.min(e,c.length-1);k=Math.max(k,0);k=Math.min(k,c.length-1);e>k&&(h=[k,e],e=h[0],k=h[1]);h=c[e].scale;b=c[k].scale;c.splice(0,e);c.splice(k-e+1,
c.length);c.forEach(function(b,d){a._lodByScale[b.scale]=b;a._scales[d]=b.scale});this._set("effectiveLODs",c);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",k)}this._set("effectiveMinScale",h);this._set("effectiveMaxScale",b)};f.prototype.constrain=function(a,b){if(b&&a.scale===b.scale)return a;var d=this.effectiveMinScale,c=this.effectiveMaxScale,e=a.targetGeometry,k=b&&b.targetGeometry,g=0!==d&&a.scale>d;if(0!==c&&a.scale<c||g)d=g?d:c,k&&(b=(d-b.scale)/(a.scale-b.scale),e.x=k.x+(e.x-
k.x)*b,e.y=k.y+(e.y-k.y)*b),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};f.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};f.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=
b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};f.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,e;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var k=0;k<b.length-1;k++){c=b[k];e=b[k+1];if(e===a)return b=k+this.effectiveMinZoom,b+1;if(c>a&&e<a)return b=k+this.effectiveMinZoom,b+1-(a-e)/(c-e)}};f.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};f.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};f.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};f.prototype.clone=function(){return new b({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};f.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,e,k){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var b;g([c.property({readOnly:!0})],f.prototype,"effectiveLODs",void 0);g([c.property({readOnly:!0})],f.prototype,"effectiveMinZoom",void 0);g([c.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);g([c.property({readOnly:!0})],f.prototype,
"effectiveMinScale",void 0);g([c.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);g([c.property({type:[e]})],f.prototype,"lods",void 0);g([c.property()],f.prototype,"minZoom",void 0);g([c.property()],f.prototype,"maxZoom",void 0);g([c.property()],f.prototype,"minScale",void 0);g([c.property()],f.prototype,"maxScale",void 0);g([c.property()],f.prototype,"snapToZoom",void 0);return f=b=g([c.subclass("esri.views.2d.constraints.ZoomConstraint")],f)}(c.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(n,f,l,g,m,c,e,k,r,b){var a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}l(b,a);g([c.property()],b.prototype,"left",void 0);g([c.property()],b.prototype,"top",void 0);g([c.property()],b.prototype,"right",void 0);g([c.property()],b.prototype,"bottom",void 0);return b=g([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(m));return function(d){function h(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];
var g=d.apply(this,c)||this;g.content=new b;g._updateContent=function(){var a=k.vec2f64.create();return function(){var b=g._get("size"),d=g._get("padding");if(b&&d){var c=g.content;e.vec2.set(a,d.left+d.right,d.top+d.bottom);e.vec2.subtract(a,b,a);e.vec2.copy(c.size,a);if(b=c.viewpoint)g.viewpoint=b}}}();g.watch(["size","padding"],g._updateContent,!0);g.padding=new a;g.size=[0,0];return g}l(h,d);Object.defineProperty(h.prototype,"padding",{set:function(b){this._set("padding",b||new a)},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;r.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var d=b.targetGeometry;a.center[0]=d.x;a.center[1]=d.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=d.spatialReference;this._update()}},enumerable:!0,configurable:!0});g([c.property()],h.prototype,"content",void 0);g([c.property({type:a})],h.prototype,"padding",null);g([c.property()],
h.prototype,"viewpoint",null);return h=g([c.subclass("esri.views.2d.PaddedViewState")],h)}(c.declared(b))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z){var w=[0,0];return function(e){function f(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=e.apply(this,b)||this;b._viewpoint2D={center:q.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new m.Extent;b.id=0;b.inverseTransform=d.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=d.mat2df64.create();b.transformNoRotation=d.mat2df64.create();b.displayMat3=p.mat3f32.create();b.displayViewMat3=
p.mat3f32.create();b.viewMat3=p.mat3f32.create();b.viewMat2d=a.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}l(f,e);v=f;Object.defineProperty(f.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,d=a.targetGeometry;
b.center[0]=d.x;b.center[1]=d.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=d.spatialReference}this._update()},enumerable:!0,configurable:!0});f.prototype.copy=function(a){var b=this.size,d=this.viewpoint;d&&b?(this.viewpoint=z.copy(d,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};f.prototype.clone=function(){return new v({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};f.prototype.toMap=function(a,b,d){if(y.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);w[0]=b;w[1]=d;return t.vec2.transformMat2d(a,w,this.inverseTransform)};f.prototype.toScreen=function(a,b,d){if(y.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);w[0]=b;w[1]=d;return t.vec2.transformMat2d(a,w,this.transform)};f.prototype.toScreenNoRotation=function(a,b,d){if(y.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);w[0]=b;w[1]=
d;return t.vec2.transformMat2d(a,w,this.transformNoRotation)};f.prototype.pixelSizeAt=function(a){return z.pixelSizeAt(a,this.viewpoint,this.size)};f.prototype.getScreenTransform=function(a,b){var d=this._viewpoint2D.center,c=this._get("pixelRatio")||1,h=this._get("size");z.getMatrix(a,d,h,b,0,c);return a};f.prototype._update=function(){var a=this._viewpoint2D,d=a.center,e=a.spatialReference,k=a.scale,p=a.rotation,a=this._get("pixelRatio")||1,g=this._get("size");this._set("id",this.id+1);var f=new c({targetGeometry:new m.Point(d[0],
d[1],e),scale:k,rotation:p});this._set("viewpoint",f);if(g&&e&&k)return this.resolution=z.getResolution(f),this.rotation=p,this.scale=k,this.spatialReference=e,t.vec2.copy(this.center,d),h.mat3.set(this.displayMat3,0!==g[0]?2/g[0]:0,0,0,0,0!==g[1]?-2/g[1]:0,0,-1,1,1),k=h.mat3.identity(this.viewMat3),d=x.vec2f32.fromValues(g[0]/2,g[1]/2),e=x.vec2f32.fromValues(-g[0]/2,-g[1]/2),p=r.common.toRadian(p),h.mat3.translate(k,k,d),h.mat3.rotate(k,k,p),h.mat3.translate(k,k,e),h.mat3.multiply(this.displayViewMat3,
this.displayMat3,k),k=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(k,k,d),b.mat2d.rotate(k,k,p),b.mat2d.translate(k,k,e),z.getExtent(this.extent,f,g),z.getTransform(this.transform,f,g,a),b.mat2d.invert(this.inverseTransform,this.transform),z.getTransformNoRotation(this.transformNoRotation,f,g,a),this.worldScreenWidth=z.getWorldScreenWidth(this.spatialReference,this.resolution),this};var v;g([k.property({readOnly:!0})],f.prototype,"id",void 0);g([k.property({value:1,json:{write:!0}})],f.prototype,
"pixelRatio",null);g([k.property({json:{write:!0}})],f.prototype,"size",null);g([k.property({type:c,json:{write:!0}})],f.prototype,"viewpoint",null);return f=v=g([k.subclass("esri.views.2d.ViewState")],f)}(k.declared(e.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df32=l})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(6);f[0]=1;f[3]=1;return f};f.clone=function(f){var g=new Float32Array(6);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];return g};f.fromValues=function(f,g,m,c,e,k){var r=new Float32Array(6);r[0]=f;r[1]=g;r[2]=m;r[3]=c;r[4]=e;r[5]=k;return r};f.createView=function(f,g){return new Float32Array(f,g,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.mat3=l})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(n,f,l){function g(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4],p=e[5],f=e[6],x=e[7];e=e[8];var q=k[0],y=k[1],z=k[2],w=k[3],v=k[4],u=k[5],m=k[6],l=k[7];k=k[8];c[0]=q*g+y*d+z*f;c[1]=q*b+y*h+z*x;c[2]=q*a+y*p+z*e;c[3]=w*g+v*d+u*f;c[4]=w*b+v*h+u*x;c[5]=w*a+v*p+u*e;c[6]=m*g+l*d+k*f;c[7]=m*b+l*h+k*x;c[8]=m*a+l*p+k*e;return c}function m(c,
e,k){c[0]=e[0]-k[0];c[1]=e[1]-k[1];c[2]=e[2]-k[2];c[3]=e[3]-k[3];c[4]=e[4]-k[4];c[5]=e[5]-k[5];c[6]=e[6]-k[6];c[7]=e[7]-k[7];c[8]=e[8]-k[8];return c}Object.defineProperty(f,"__esModule",{value:!0});f.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];return c};f.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};f.set=function(c,e,k,g,b,a,d,h,p,f){c[0]=e;c[1]=k;c[2]=g;
c[3]=b;c[4]=a;c[5]=d;c[6]=h;c[7]=p;c[8]=f;return c};f.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.transpose=function(c,e){if(c===e){var k=e[1],g=e[2],b=e[5];c[1]=e[3];c[2]=e[6];c[3]=k;c[5]=e[7];c[6]=g;c[7]=b}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};f.invert=function(c,e){var k=e[0],g=e[1],b=e[2],a=e[3],d=e[4],h=e[5],p=e[6],f=e[7];e=e[8];var x=e*d-h*f,q=-e*a+h*p,y=f*a-d*p,z=k*x+g*q+b*
y;if(!z)return null;z=1/z;c[0]=x*z;c[1]=(-e*g+b*f)*z;c[2]=(h*g-b*d)*z;c[3]=q*z;c[4]=(e*k-b*p)*z;c[5]=(-h*k+b*a)*z;c[6]=y*z;c[7]=(-f*k+g*p)*z;c[8]=(d*k-g*a)*z;return c};f.adjoint=function(c,e){var k=e[0],g=e[1],b=e[2],a=e[3],d=e[4],h=e[5],p=e[6],f=e[7];e=e[8];c[0]=d*e-h*f;c[1]=b*f-g*e;c[2]=g*h-b*d;c[3]=h*p-a*e;c[4]=k*e-b*p;c[5]=b*a-k*h;c[6]=a*f-d*p;c[7]=g*p-k*f;c[8]=k*d-g*a;return c};f.determinant=function(c){var e=c[3],k=c[4],g=c[5],b=c[6],a=c[7],d=c[8];return c[0]*(d*k-g*a)+c[1]*(-d*e+g*b)+c[2]*
(a*e-k*b)};f.multiply=g;f.translate=function(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4],p=e[5],f=e[6],x=e[7];e=e[8];var q=k[0];k=k[1];c[0]=g;c[1]=b;c[2]=a;c[3]=d;c[4]=h;c[5]=p;c[6]=q*g+k*d+f;c[7]=q*b+k*h+x;c[8]=q*a+k*p+e;return c};f.rotate=function(c,e,k){var g=e[0],b=e[1],a=e[2],d=e[3],h=e[4],p=e[5],f=e[6],x=e[7];e=e[8];var q=Math.sin(k);k=Math.cos(k);c[0]=k*g+q*d;c[1]=k*b+q*h;c[2]=k*a+q*p;c[3]=k*d-q*g;c[4]=k*h-q*b;c[5]=k*p-q*a;c[6]=f;c[7]=x;c[8]=e;return c};f.scale=function(c,e,k){var g=k[0],
b=k[1];k=k[2];c[0]=g*e[0];c[1]=g*e[1];c[2]=g*e[2];c[3]=b*e[3];c[4]=b*e[4];c[5]=b*e[5];c[6]=k*e[6];c[7]=k*e[7];c[8]=k*e[8];return c};f.scaleByVec2=function(c,e,k){var g=k[0];k=k[1];c[0]=g*e[0];c[1]=g*e[1];c[2]=g*e[2];c[3]=k*e[3];c[4]=k*e[4];c[5]=k*e[5];return c};f.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};f.fromRotation=function(c,e){var k=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=k;c[2]=0;c[3]=-k;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
f.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};f.fromQuat=function(c,e){var k=e[0],g=e[1],b=e[2];e=e[3];var a=k+k,d=g+g,h=b+b,k=k*a,p=g*a,g=g*d,f=b*a,x=b*d,b=b*h,a=e*a,d=e*d;e*=h;c[0]=1-g-b;c[3]=p-e;c[6]=f+d;c[1]=p+e;c[4]=1-k-b;c[7]=x-a;c[2]=f-d;c[5]=x+a;c[8]=1-k-g;return c};f.normalFromMat4Legacy=function(c,e){var k=e[0],
g=e[1],b=e[2],a=e[4],d=e[5],h=e[6],p=e[8],f=e[9];e=e[10];var x=e*d-h*f,q=-e*a+h*p,y=f*a-d*p,z=k*x+g*q+b*y;if(!z)return null;z=1/z;c[0]=x*z;c[1]=(-e*g+b*f)*z;c[2]=(h*g-b*d)*z;c[3]=q*z;c[4]=(e*k-b*p)*z;c[5]=(-h*k+b*a)*z;c[6]=y*z;c[7]=(-f*k+g*p)*z;c[8]=(d*k-g*a)*z;return c};f.normalFromMat4=function(c,e){var k=e[0],g=e[1],b=e[2],a=e[3],d=e[4],h=e[5],p=e[6],f=e[7],x=e[8],q=e[9],y=e[10],z=e[11],w=e[12],v=e[13],u=e[14];e=e[15];var m=k*h-g*d,l=k*p-b*d,n=k*f-a*d,A=g*p-b*h,I=g*f-a*h,C=b*f-a*p,E=x*v-q*w,H=
x*u-y*w,x=x*e-z*w,F=q*u-y*v,q=q*e-z*v,y=y*e-z*u,z=m*y-l*q+n*F+A*x-I*H+C*E;if(!z)return null;z=1/z;c[0]=(h*y-p*q+f*F)*z;c[1]=(p*x-d*y-f*H)*z;c[2]=(d*q-h*x+f*E)*z;c[3]=(b*q-g*y-a*F)*z;c[4]=(k*y-b*x+a*H)*z;c[5]=(g*x-k*q-a*E)*z;c[6]=(v*C-u*I+e*A)*z;c[7]=(u*n-w*C-e*l)*z;c[8]=(w*I-v*n+e*m)*z;return c};f.projection=function(c,e,k){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/k;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};f.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};f.add=function(c,e,k){c[0]=e[0]+k[0];c[1]=e[1]+k[1];c[2]=e[2]+k[2];c[3]=e[3]+k[3];c[4]=e[4]+k[4];c[5]=e[5]+k[5];c[6]=e[6]+k[6];c[7]=e[7]+k[7];c[8]=e[8]+k[8];return c};f.subtract=m;f.multiplyScalar=function(c,e,k){c[0]=e[0]*k;c[1]=e[1]*k;c[2]=e[2]*k;c[3]=e[3]*k;c[4]=e[4]*k;c[5]=e[5]*k;
c[6]=e[6]*k;c[7]=e[7]*k;c[8]=e[8]*k;return c};f.multiplyScalarAndAdd=function(c,e,k,g){c[0]=e[0]+k[0]*g;c[1]=e[1]+k[1]*g;c[2]=e[2]+k[2]*g;c[3]=e[3]+k[3]*g;c[4]=e[4]+k[4]*g;c[5]=e[5]+k[5]*g;c[6]=e[6]+k[6]*g;c[7]=e[7]+k[7]*g;c[8]=e[8]+k[8]*g;return c};f.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};f.equals=function(c,e){var k=c[0],g=c[1],b=c[2],a=c[3],d=c[4],h=c[5],p=c[6],f=c[7];c=c[8];var x=e[0],
q=e[1],y=e[2],z=e[3],w=e[4],v=e[5],u=e[6],m=e[7];e=e[8];return Math.abs(k-x)<=l.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(g-q)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(b-y)<=l.EPSILON*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(a-z)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(z))&&Math.abs(d-w)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(h-v)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(p-u)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(u))&&Math.abs(f-
m)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(c-e)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};f.mul=g;f.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.mat3f32=l})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(9);
f[0]=1;f[4]=1;f[8]=1;return f};f.clone=function(f){var g=new Float32Array(9);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];return g};f.fromValues=function(f,g,m,c,e,k,r,b,a){var d=new Float32Array(9);d[0]=f;d[1]=g;d[2]=m;d[3]=c;d[4]=e;d[5]=k;d[6]=r;d[7]=b;d[8]=a;return d};f.createView=function(f,g){return new Float32Array(f,g,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(n,f,l){Object.defineProperty(f,
"__esModule",{value:!0});f.vec2f32=l})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(n,f){function l(){return new Float32Array(2)}function g(c,e){var b=new Float32Array(2);b[0]=c;b[1]=e;return b}function m(){return g(1,1)}function c(){return g(1,0)}function e(){return g(0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=l;f.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};f.fromValues=g;f.createView=function(c,
e){return new Float32Array(c,e,2)};f.zeros=function(){return l()};f.ones=m;f.unitX=c;f.unitY=e;f.ZEROS=l();f.ONES=m();f.UNIT_X=c();f.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(n,f){function l(g){return g instanceof Float32Array&&2<=g.length}function g(g){return Array.isArray(g)&&2<=g.length}Object.defineProperty(f,"__esModule",{value:!0});f.isVec2f32=l;f.isVec2f64=g;f.isVec2=function(f){return l(f)||g(f)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(n,f,l,g,m,c){Object.defineProperty(f,"__esModule",{value:!0});f.TileInfoView=l;f.TileKey=g;f.TileQueue=m;f.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(n,f,l,g,m,c,e){var k=new c("0/0/0/0"),r=function(){function a(a,b,c,e,g,k,f,z){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=g;this.rightAdjust=k;this.leftBound=f;this.rightBound=
z}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var h=c[0];c=c[1];var e=h-d,g=c-b,g=0!==g?e/g:0,k=(Math.ceil(b)-b)*g,f=(Math.floor(b)-b)*g;return new a(d,Math.floor(b),Math.ceil(c),g,0>e?k:f,0>e?f:k,0>e?h:d,0>e?d:h)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],
[0,0],[0,0],[0,0]];return function(){function a(a,b){var d=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var h=this._lodInfos=c.map(function(d){return g.create(a,d,b)});c.forEach(function(a,b){d._infoByLevel[a.level]=h[b];d._infoByScale[a.scale]=h[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);k.set(b);return(b=this._infoByLevel[k.level])?b.getTileBounds(a,k,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);k.set(b);return(b=this._infoByLevel[k.level])?b.getTileCoords(a,k,c):a};a.prototype.getTileCoverage=function(a,c,g){void 0===c&&(c=192);void 0===g&&(g="closest");g="closest"===g?this.getClosestInfoForScale(a.scale):
this.getSmallestInfoForScale(a.scale);var d=m.pool.acquire(g),h=this._wrap,k;k=Infinity;var f=-Infinity,p,w,v=d.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<b.length;c++){var u=b[c];a.toMap(u,u);u[0]=g.getColumnForX(u[0]);u[1]=g.getRowForY(u[1])}a=[];u=3;for(c=0;4>c;c++){if(b[c][1]!==b[u][1]){var l=r.create(b[c],b[u]);k=Math.min(l.ymin,k);f=Math.max(l.ymax,f);void 0===a[l.ymin]&&(a[l.ymin]=[]);a[l.ymin].push(l)}u=c}if(null==k||null==f||
100<f-k)return null;for(u=[];k<f;){null!=a[k]&&(u=u.concat(a[k]));p=Infinity;w=-Infinity;for(c=u.length-1;0<=c;c--)l=u[c],p=Math.min(p,l.getLeftCol()),w=Math.max(w,l.getRightCol());p=Math.floor(p);w=Math.floor(w);if(k>=g.first[1]&&k<=g.last[1])if(h)if(g.size[0]<g.worldSize[0])for(l=Math.floor(w/g.worldSize[0]),c=Math.floor(p/g.worldSize[0]);c<=l;c++)v.push(new e(k,Math.max(g.getFirstColumnForWorld(c),p),Math.min(g.getLastColumnForWorld(c),w)));else v.push(new e(k,p,w));else p>g.last[0]||w<g.first[0]||
(p=Math.max(p,g.first[0]),w=Math.min(w,g.last[0]),v.push(new e(k,p,w)));k+=1;for(c=u.length-1;0<=c;c--)l=u[c],l.ymax>=k?l.incrRow():u.splice(c,1)}return d};a.prototype.getTileParentId=function(a){k.set(a);a=this._lodInfos.indexOf(this._infoByLevel[k.level])-1;if(0>a)return null;this._getTileIdAtLOD(k,this._lodInfos[a],k);return k.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,b){k.set(b);b=this._infoByLevel[k.level];var d=a.lodInfo;if(d.resolution>b.resolution){this._getTileIdAtLOD(k,d,k);for(var c=d.denormalizeCol(k.col,k.world),h=0,e=a.spans;h<e.length;h++){var g=e[h];if(g.row===k.row&&g.colFrom<=c&&g.colTo>=c)return!0}}if(d.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=e[0];var c=e[1],h=e[2],e=e[3],f=b.denormalizeCol(k.col,k.world),g=d.getColumnForX(b.getXForColumn(f)),w=d.getRowForY(b.getYForRow(k.row)),f=d.getColumnForX(b.getXForColumn(f+1))-1;b=d.getRowForY(b.getYForRow(k.row+1))-1;return!(g>e||f<h||w>c||b<a)}var v=d.denormalizeCol(k.col,k.world);return a.spans.some(function(a){return a.row===k.row&&a.colFrom<=v&&a.colTo>=v})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=l.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,d,c,h){return Math.abs(d-a)<Math.abs(b-
a)?d:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);
if(b.resolution<d.resolution)return null;if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(n,f,l,g){function m(c,g,f){c[0]=g;c[1]=f;return c}var c=new g("0/0/0/0");return function(){function e(c,e,b,a,d,h,g,f,x,q,y,z){this.level=
c;this.resolution=e;this.scale=b;this.origin=a;this.first=d;this.last=h;this.size=g;this.norm=f;this.worldStart=x;this.worldEnd=q;this.worldSize=y;this.wrap=z}e.create=function(c,g,b){var a=l.getInfo(c.spatialReference),d=[c.origin.x,c.origin.y],h=[c.size[0]*g.resolution,c.size[1]*g.resolution],k=[-Infinity,-Infinity],f=[Infinity,Infinity],x=[Infinity,Infinity];b&&(m(k,Math.max(0,Math.floor((b.xmin-d[0])/h[0])),Math.max(0,Math.floor((d[1]-b.ymax)/h[1]))),m(f,Math.max(0,Math.floor((b.xmax-d[0])/h[0])),
Math.max(0,Math.floor((d[1]-b.ymin)/h[1]))),m(x,f[0]-k[0]+1,f[1]-k[1]+1));var q;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/g.resolution)/c.size[0]),x[1]],a=[Math.floor((a.origin[0]-d[0])/h[0]),k[1]],b=[c[0]+a[0]-1,f[1]],q=!0):(a=k,b=f,c=x,q=!1);return new e(g.level,g.resolution,g.scale,d,k,f,x,h,a,b,c,q)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*
e+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,g,b){void 0===b&&(b=!1);c.set(g);var a=b?c.col:this.denormalizeCol(c.col,c.world),d=c.row;g=this.getXForColumn(a);b=this.getYForRow(d+1);a=this.getXForColumn(a+1);d=this.getYForRow(d);e[0]=g;e[1]=b;e[2]=a;e[3]=d;return e};e.prototype.getTileCoords=function(e,g,b){void 0===b&&(b=!1);c.set(g);g=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?m(e,this.getXForColumn(g),
this.getYForRow(c.row)):(e.x=this.getXForColumn(g),e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(n,f,l){return function(){function g(g,c,e,k){this.set(g,c,e,k)}g.getId=function(g,c,e,k){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+c+"/"+e+"/"+k};Object.defineProperty(g.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});g.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};g.prototype.release=function(){this.world=this.col=this.row=this.level=0};g.prototype.set=function(g,c,e,k){null==g?this.world=this.col=this.row=this.level=0:"object"===typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),c=g[1],e=g[2],
k=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(k)):(this.level=+g,this.row=+c,this.col=+e,this.world=+k||0);return this};g.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};g.prototype.getChildKeys=function(){var f=this.level+1,c=this.row<<1,e=this.col<<1,k=this.world;return[new g(f,c,e,k),new g(f,c,e+1,k),new g(f,c+1,e,k),new g(f,c+1,e+1,k)]};g.prototype.compareRowMajor=function(g){return this.row<g.row?
-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};g.pool=new l(g,!0,null,25,50);return g}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(n,f,l){return function(){function g(g){this.lodInfo=g;this.spans=[]}g.prototype.release=function(){};g.prototype.forEach=function(g,c){var e=this.spans,k=this.lodInfo,f=k.level;if(0!==e.length)for(var b=0;b<e.length;b++)for(var a=e[b],d=a.row,h=a.colTo,a=a.colFrom;a<=h;a++)g.call(c,f,d,
k.normalizeCol(a),k.getWorldForColumn(a))};g.pool=new l(g,!0);return g}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(n,f,l){return function(){function g(g,c,e){this.row=g;this.colFrom=c;this.colTo=e}g.pool=new l(g,!0);return g}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(n,f,l,g,m,c,e,k,r,b){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var d=new Set,h=[],p=new Map,t=[0,0];return function(e){function f(a){a=e.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}l(f,e);f.prototype.initialize=function(){var a=this,d=this.concurrency,c=this.process,h="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new b.QueueProcessor({concurrency:d,
process:function(b,d){b=a._keyToItem.get(b);return c(b,{signal:d})},peeker:h})};f.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(f.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});f.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};f.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};f.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};f.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};f.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};f.prototype.pause=function(){this._queue.pause()};f.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,d,c,h=this;return m(this,function(e){b=a.key.id;if(this.has(b))return[2,this.get(b)];d=this._queue.push(b);c=function(){h._keyToItem.delete(b);h.notifyChange("updating")};this._keyToItem.set(b,a);d.then(c,c);this.notifyChange("updating");return[2,d]})})};f.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};f.prototype.resume=
function(){this._queue.resume()};f.prototype._peekByScaleFirst=function(b){if(!this.state)return b[0];for(var c=this.tileInfoView,e=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,k=0;k<b.length;k++){var f=this._keyToItem.get(b[k]),t=this.tileInfoView.getTileScale(f.key);p.has(t)||(p.set(t,[]),e=Math.max(t,e),g=Math.min(t,g));p.get(t).push(f.key);d.add(t)}var q=this.state.scale;p.has(q)||(a(h,d),h.sort(),q=h.reduce(function(a,b,d,c){return Math.abs(b-q)<Math.abs(a-q)?b:a},h[0]));q=Math.min(q,
e);q=Math.max(q,g);b=p.get(q);var x=c.getClosestInfoForScale(q),y=x.getColumnForX(this.state.center[0]),r=x.getRowForY(this.state.center[1]);b.sort(function(a,b){var d=x.denormalizeCol(a.col,a.world),c=x.denormalizeCol(b.col,b.world);return Math.sqrt((y-d)*(y-d)+(r-a.row)*(r-a.row))-Math.sqrt((y-c)*(y-c)+(r-b.row)*(r-b.row))});d.clear();p.clear();return b[0].id};f.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,d=this.state.center,c=Number.POSITIVE_INFINITY,
h=null,e=0;e<a.length;e++){var g=this._keyToItem.get(a[e]);b.getTileCoords(t,g.key);var k=r.vec2.distance(t,d);k<c&&(c=k,h=g.key)}return h.id};g([k.property({constructOnly:!0})],f.prototype,"concurrency",void 0);g([k.property({constructOnly:!0})],f.prototype,"process",void 0);g([k.property()],f.prototype,"state",void 0);g([k.property({constructOnly:!0})],f.prototype,"strategy",void 0);g([k.property({constructOnly:!0})],f.prototype,"tileInfoView",void 0);g([k.property({readOnly:!0})],f.prototype,"updating",
null);return f=g([k.subclass("esri.views.2d.tiling.TileQueue")],f)}(k.declared(e))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(n,f,l,g,m,c,e,k){Object.defineProperty(f,"__esModule",{value:!0});var r=function(){return function(b,a){this.item=b;this.controller=a;this.promise=null}}();n=function(){function b(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new e({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.task&&m.isSome(c)&&(this._task=c.registerTask(a.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}b.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};b.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
b.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};b.prototype.isOngoing=function(a){return this._processingItems.has(a)};b.prototype.has=function(a){return this._deferreds.has(a)};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(a){return g(this,void 0,void 0,function(){var b,h,e,g,k,f,y=this;return l(this,function(d){if(b=this.get(a))return[2,b];e=c.createAbortController();g=function(){var b=y._processingItems.get(a);
b&&b.controller.abort();k();h.reject(c.createAbortError())};k=function(){f.remove();y._deferreds.delete(a);y._controllers.delete(a);y._queue.remove(a);y._processingItems.delete(a);y._scheduleNext()};f=c.onAbortOrThrow(e.signal,g);h=c.createDeferred();this._deferreds.set(a,h);this._controllers.set(a,e);h.promise.then(k,k);this._queue.push(a);this._scheduleNext();return[2,h.promise]})})};b.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};b.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=k.schedule(function(){a._schedule=null;a._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};b.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};
b.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(b))};b.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};b.prototype._process=function(a){var b=this;if(!m.isNone(a)){var h,e=c.createAbortController(),g=new r(a,e);this._processingItems.set(a,g);try{h=this.process(a,e.signal)}catch(x){this._processError(g,x)}h&&"function"===typeof h.then?(g.promise=
h,h.then(function(a){return b._processResult(g,a)},function(a){return b._processError(g,a)})):this._processResult(g,h)}};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return b}();f.QueueProcessor=n})},"esri/core/Queue":function(){define(["require","exports"],function(n,f){return function(){function f(g){this._items=[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;g&&g.peeker&&
(this._peeker=g.peeker)}Object.defineProperty(f.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});f.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};f.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};f.prototype.push=function(g){this.contains(g)||this._add(g)};f.prototype.contains=function(g){return 0<this._length&&this._itemSet.has(g)};f.prototype.pop=function(){if(0!==this._length){var g=this.peek();
this._remove(g);return g}};f.prototype.remove=function(g){this.contains(g)&&this._remove(g)};f.prototype._add=function(g){this._items.push(g);this._itemSet.add(g);this._length++};f.prototype._remove=function(g){this._itemSet.delete(g);this._items.splice(this._items.indexOf(g),1);this._length--};return f}()})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(n,f,l,g,m,c){var e=new c(0,
0,0,0),k=new Map,r=[],b=[];return function(){function a(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&
(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new g.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var d=this,c=this.resampling,g=this.tileIndex,f=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);b.length=0;r.length=0;k.clear();if(f){var q=this.tileInfoView.tileInfo,y=q.minScale,z=q.maxScale,w=f.spans,v=f.lodInfo,u=v.level,l=a.state,n=l.scale,q=l.center,l=l.resolution,
B=!a.stationary&&n>this._previousScale;this._previousScale=n;this.tiles.length=0;if(!c&&(n>y||n<z))return this.tiles.length=0,k.clear(),g.forEach(function(a){d.releaseTile(a)}),g.clear(),b.length=0,r.length=0,k.clear(),m.pool.release(f),!0;g.forEach(function(a){return a.visible=!0});z=y=0;if(0<w.length)for(n=0;n<w.length;n++){a=w[n];for(var A=a.row,I=a.colTo,C=a.colFrom;C<=I;C++)if(y++,a=e.set(u,A,v.normalizeCol(C),v.getWorldForColumn(C)).id,g.has(a))c=g.get(a),c.isReady?(k.set(a,c),z++):B||this._addParentTile(a,
k);else{c=void 0;if(this._tileCache&&this._tileCache.has(a)){if(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c.isReady){k.set(a,c);z++;continue}}else c=this.acquireTile(e),this.tileIndex.set(a,c);B||this._addParentTile(a,k)}}var E=z===y;g.forEach(function(a,c){e.set(c);if(!k.has(c)){var h=d.tileInfoView.intersects(f,e);!h||!B&&E?"purge"===d.cachePolicy?e.level===u&&h||r.push(c):(e.level>u||!h)&&r.push(c):a.isReady?b.push(c):e.level>u&&r.push(c)}});for(w=0;w<b.length;w++)a=b[w],(c=g.get(a))&&c.isReady&&
k.set(a,c);for(w=0;w<r.length;w++)a=r[w],c=g.get(a),this._tileCache?this._tileCache.add(c):this.releaseTile(c),g["delete"](a);k.forEach(function(a){return d.tiles.push(a)});g.forEach(function(a){k.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(u,q,l);m.pool.release(f);return E}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);
if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});var g=[0,0],m=[0,0];n=function(){function c(c,
g,f){this.maxSize=c;this.tileInfoView=g;this.removedFunc=f;this._tilePerId=new Map;this._tileKeysPerLevel=[]}c.prototype.has=function(c){return this._tilePerId.has(c)};c.prototype.get=function(c){return this._tilePerId.get(c)};c.prototype.pop=function(c){var e=this._tilePerId.get(c);if(!e)return null;var g=this._tileKeysPerLevel[e.key.level];this._tilePerId["delete"](c);for(var b=0;b<g.length;b++)if(g[b].id===c){g.splice(b,1);break}e.visible=!0;return e};c.prototype.add=function(c){c.visible=!1;var e=
c.key,g=e.id;this._tilePerId.has(g)||(this._tilePerId.set(g,c),c=e.level,this._tileKeysPerLevel[c]||(this._tileKeysPerLevel[c]=[]),this._tileKeysPerLevel[c].push(e))};c.prototype.prune=function(c,g,f){var b=this._tilePerId.size;if(!(b<=this.maxSize)){for(var a=this._tileKeysPerLevel.length-1;b>this.maxSize&&0<=a;)a!==c&&(b=this._pruneAroundCenterTile(b,g,f,a)),a--;b>this.maxSize&&(b=this._pruneAroundCenterTile(b,g,f,c))}};c.prototype._pruneAroundCenterTile=function(c,f,r,b){b=this._tileKeysPerLevel[b];
if(!b||0===b.length)return c;var a=this.tileInfoView.tileInfo,d=a.size,h=a.origin,e=r*d[0],k=r*d[1];for(b.sort(function(a,b){g[0]=h.x+e*(a.col+.5);g[1]=h.y-k*(a.row+.5);m[0]=h.x+e*(b.col+.5);m[1]=h.y-k*(b.row+.5);return l.vec2.squaredDistance(g,f)-l.vec2.squaredDistance(m,f)});0<b.length&&(r=b.pop(),this._removeTile(r.id),c--,c!==this.maxSize););return c};c.prototype._removeTile=function(c){var e=this._tilePerId.get(c);this.removedFunc&&this.removedFunc(e);this._tilePerId["delete"](c)};return c}();
f.default=n})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper","../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(n,f,l,g,m){Object.defineProperty(f,"__esModule",{value:!0});n=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+c+".Start"))};
c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=l([m.subclass("esri.views.2d.support.Timeline")],c)}();f.Timeline=n})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../../input/recognizers/Drag ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q,y,z,w,v,u,J,D){var B={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},A={zoomIn:["\x3d","+"],zoomOut:["-","_"]},I={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(f){function m(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new c;return a}l(m,f);m.prototype.initialize=function(){var a=this;this.viewEvents=new w.ViewEvents(this.view);
this._handles.add([e.whenNot(this.view,"ready",function(){return a._disconnect()}),e.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};m.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=
function(){var c=new y.BrowserEventSource(this.view.surface,this.view.input),e=[new J.PointerClickHoldAndDrag,new D.SingleAndDoubleClick,new u.Drag],e=new z.InputManager(c,e);e.installHandlers("prevent-context-menu",[new v.PreventContextMenu]);e.installHandlers("navigation",[new q.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new x.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new b.DragPan(this.view,"primary"),new h.KeyPan(this.view,B),new t.KeyZoom(this.view,A),new p.KeyRotate(this.view,
I),new a.DragRotate(this.view,"secondary"),new r.DoubleClickZoom(this.view,["Ctrl"])]);this.viewEvents.connect(e);this._source=c;this._inputManager=e};Object.defineProperty(m.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});g([k.property()],m.prototype,"view",void 0);return m=g([k.subclass("esri.views.2d.input.MapViewInputManager")],m)}(k.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports",
"../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(n,f,l,g,m){Object.defineProperty(f,"__esModule",{value:!0});n=function(c){function e(e,g){var b=c.call(this,!0)||this;b.view=e;b.registerIncoming("double-click",g,function(a){return b._handleDoubleClick(a,g)});return b}l(e,c);e.prototype._handleDoubleClick=function(c,e){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([c.data.x,
c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return e}(g.InputHandler);f.DoubleClickZoom=n})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.eventMatchesPointerAction=function(f,g){switch(g){case "primary":return"touch"===f.pointerType||0===f.button;case "secondary":return"touch"!==f.pointerType&&2===f.button;case "tertiary":return"touch"!==f.pointerType&&1===f.button}};f.eventMatchesMousePointerAction=
function(f,g){if("touch"===f.pointerType)return!1;switch(g){case "primary":return 0===f.button;case "secondary":return 2===f.button;case "tertiary":return 1===f.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,f,l,g,m,c){Object.defineProperty(f,"__esModule",{value:!0});n=function(e){function f(f,b,a){var d=
e.call(this,!0)||this;d.view=f;d.pointerAction=b;d.registerIncoming("drag",a,function(a){return d._handleDrag(a)});d.registerIncoming("pointer-down",function(a){return d.stopMomentumNavigation()});var h=d.view.mapViewNavigation;d.dragEventSeparator=new g.DragEventSeparator({start:function(a,b){h.pan.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){h.pan.update(d.view,b.data);b.stopPropagation()},end:function(a,b){h.pan.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===
a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});return d}l(f,e);f.prototype._handleDrag=function(c){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return f}(m.InputHandler);f.DragPan=n})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,
"__esModule",{value:!0});n=function(){function f(g){this.callbacks=g;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}f.prototype.handle=function(g){var f=g.data,c=f.pointers.size;switch(f.action){case "start":this.currentCount=c;this.emitStart(g);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(g);break;case "update":this.emitUpdate(g);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=
c;this.emitStart(g);break;case "end":this.emitEnd(g),this.currentCount=0}this.previousEvent=g};f.prototype.emitStart=function(g){this.startEvent=g;this.callbacks.condition(this.currentCount,g)&&this.callbacks.start(this.currentCount,g,this.startEvent)};f.prototype.emitUpdate=function(g){this.callbacks.condition(this.currentCount,g)&&this.callbacks.update(this.currentCount,g,this.startEvent)};f.prototype.emitEnd=function(g){this.callbacks.condition(this.currentCount,g)&&this.callbacks.end(this.currentCount,
g,this.startEvent);this.startEvent=null};return f}();f.DragEventSeparator=n})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(n,f,l,g,m,c){Object.defineProperty(f,"__esModule",{value:!0});n=function(e){function f(f,b,a){var d=e.call(this,!0)||this;d.view=f;d.pointerAction=b;var h=d.view.mapViewNavigation;d.dragEventSeparator=
new g.DragEventSeparator({start:function(a,b){h.rotate.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){h.rotate.update(d.view,b.data);b.stopPropagation()},end:function(a,b){h.rotate.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});d.registerIncoming("drag",a,function(a){return d.dragEventSeparator.handle(a)});return d}l(f,e);return f}(m.InputHandler);f.DragRotate=n})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(n,f,l,g,m,c,e,k,r){Object.defineProperty(f,"__esModule",{value:!0});n=function(h){function f(a){var b=h.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new g;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}l(f,h);f.prototype.onInstall=function(a){var b=this;h.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,
"enabled",function(a){a?(b.handle.resume(),b.frameTask||(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};f.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);h.prototype.onUninstall.call(this)};f.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&
this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,r.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,r.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};f.prototype.frameUpdate=function(c){var h=this.transformation;if(!r.isZeroTransformation(h)){var g=this.view.viewpoint.clone(),f=a*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(g,g,[h.translation[0]*f,-h.translation[1]*f]);f=this.view.size;e.scaleAndRotateBy(g,
g,1+h.translation[2]*d*c,this.view.constraints.rotationEnabled?-h.heading*b*c:0,[f[0]/2,f[1]],f);c=this.view.constraints.constrain(g,this.view.viewpoint);this.view.viewpoint=c}};return f}(k.InputHandler);f.GamepadNavigation=n;var b=.06,a=.7,d=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(n,f,l){function g(g){var c=g*g;0>g&&(c*=-1);return c}Object.defineProperty(f,"__esModule",{value:!0});f.quadraticAccentuation=
g;f.resetTransformation=function(g){g.translation[0]=0;g.translation[1]=0;g.translation[2]=0;g.heading=0;g.tilt=0;return g};f.extractTransformation=function(f,c,e){var k=f.state;f=f.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===f.deviceType?(e.translation[0]=g(k.axes[0]),e.translation[1]=g(k.axes[1]),e.translation[2]=g(k.buttons[7])-g(k.buttons[6]),e.heading=g(k.axes[2]),e.tilt=g(k.axes[3])):"spacemouse"===f.deviceType&&(e.translation[0]=1.2*g(k.axes[0]),e.translation[1]=1.2*g(k.axes[1]),
e.translation[2]=2*-g(k.axes[2]),e.heading=1.2*g(k.axes[5]),e.tilt=1.2*g(k.axes[3]));e.tilt*=c;l.vec3.scale(e.translation,e.translation,1);return e};f.extractTransformationKeyboard=function(g,c){c.translation[0]=g[1]-g[0];c.translation[1]=g[3]-g[2];c.translation[2]=g[4]-g[5];c.heading=g[7]-g[6];c.tilt=g[8]-g[9];return c};f.isZeroTransformation=function(g){return 0===g.translation[0]&&0===g.translation[1]&&0===g.translation[2]&&0===g.heading&&0===g.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(c,f,r){var b,a=g.call(this,!0)||this;a.view=c;a.keys=f;a._pressed=!1;a._keyMap=(b={},b[f.left]="left",b[f.right]="right",b[f.up]="up",b[f.down]="down",b);a.registerIncoming("key-down",r,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",r,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",r,function(){return a._handleBlur()});
return a}l(c,g);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,g){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(g)switch(e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(g.InputHandler);f.KeyPan=n})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(c,f,r){var b,a=g.call(this,!0)||this;a.view=c;a.keys=f;a._pressed=!1;a._keyToDirection=
(b={},b[f.clockwiseOption1]="clockwise",b[f.clockwiseOption2]="clockwise",b[f.counterClockwiseOption1]="counterClockwise",b[f.counterClockwiseOption2]="counterClockwise",b[f.resetOption1]="reset",b[f.resetOption2]="reset",b);a.registerIncoming("key-down",r,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",r,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",r,function(){return a._handleBlur()});return a}l(c,g);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,g){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(g)switch(e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();
break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(g.InputHandler);f.KeyRotate=n})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(c,f,r){var b=g.call(this,!0)||this;b.view=c;b.keys=f;b._keysToZoomAction=
{};b.registerIncoming("key-down",r,function(a){return b._handleKeyDown(a)});f.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});f.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}l(c,g);c.prototype._handleKeyDown=function(c){this._handleKey(c)};c.prototype._handleKey=function(c){var e=c.modifiers;0<e.size&&!e.has("Shift")||(e=this._keysToZoomAction[c.data.key],0===e?(this.view.mapViewNavigation.zoomIn(),c.stopPropagation()):1===e&&(this.view.mapViewNavigation.zoomOut(),
c.stopPropagation()))};return c}(g.InputHandler);f.KeyZoom=n})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(c,f){var e=g.call(this,!0)||this;e.view=c;e._canZoom=!0;e.registerIncoming("mouse-wheel",f,function(b){return e._handleMouseWheel(b)});return e}l(c,g);c.prototype._handleMouseWheel=function(c){var e=
this;if(this._canZoom){var g=this.view.mapViewNavigation,b=c.data;if(b=g.zoom(1/Math.pow(.6,1/60*b.deltaY),[b.x,b.y]))this._canZoom=!1,b.catch(function(a){}).then(function(){e._canZoom=!0;g.end()});c.stopPropagation()}};return c}(g.InputHandler);f.MouseWheelZoom=n})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(n,f,l,g,m){Object.defineProperty(f,
"__esModule",{value:!0});n=function(c){function e(e){var f=c.call(this,!0)||this;f.view=e;f.registerIncoming("drag",function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(a){return f.stopMomentumNavigation()});var b=f.view.mapViewNavigation;f.dragEventSeparator=new g.DragEventSeparator({start:function(a,c){b.pinch.begin(f.view,c.data);c.stopPropagation()},update:function(a,c){b.pinch.update(f.view,c.data);c.stopPropagation()},end:function(a,c){b.pinch.end(f.view,c.data);
c.stopPropagation()},condition:function(a){return 2<=a}});return f}l(e,c);e.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return e}(m.InputHandler);f.PinchRotateAndZoom=n})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(n,f,l,g,m,c,
e){Object.defineProperty(f,"__esModule",{value:!0});var k=l("trident"),r=l("edge"),b=l("chrome"),a=l("ff"),d=l("safari");n=function(){function f(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",
a)}}f.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(f.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(h[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});f.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};f.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(x){}};f.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=g.createScreenPointFromNativeEvent(this._element,a);f.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};f.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};f.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};f.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};f.prototype._handleMouseWheel=function(c,h){h.preventDefault();var e=h.deltaY;switch(h.deltaMode){case 0:if(k||r)e=e/document.documentElement.clientHeight*600;break;case 1:e*=30;break;case 2:e*=900}k||r?e*=.7:b||d?e*=.6:a&&(e*=1.375);var g=Math.abs(e);
100<g&&(e=e/g*200/(1+Math.exp(-.02*(g-100))));h=this._updateNormalizedPointerLikeEvent(h,{native:h,x:0,y:0,deltaY:e});this._callback(c,h)};f.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};f.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};f.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};f.test={disableSubpixelCoordinates:!1};return f}();f.BrowserEventSource=
n;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function n(c,d){d=d||Object.create(null);var h=document.createEvent("Event");
h.initEvent(c,d.bubbles||!1,d.cancelable||!1);c=2;for(var e;c<b.length;c++)e=b[c],h[e]=d[e]||a[c];h.buttons=d.buttons||0;c=0;c=d.pressure&&h.buttons?d.pressure:h.buttons?.5:0;h.x=h.clientX;h.y=h.clientY;h.pointerId=d.pointerId||0;h.width=d.width||0;h.height=d.height||0;h.pressure=c;h.tiltX=d.tiltX||0;h.tiltY=d.tiltY||0;h.twist=d.twist||0;h.tangentialPressure=d.tangentialPressure||0;h.pointerType=d.pointerType||"";h.hwTimestamp=d.hwTimestamp||0;h.isPrimary=d.isPrimary||!1;return h}function f(){this.array=
[];this.size=0}function l(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);J&&(this.observer=new J(this.mutationWatcher.bind(this)))}function g(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function e(){if(I){B.forEach(function(a){String(a)===a?(A+=m(a)+c(a)+"\n",C&&(A+=g(a)+c(a)+"\n")):(A+=a.selectors.map(m)+c(a.rule)+"\n",C&&(A+=a.selectors.map(g)+
c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=A;document.head.appendChild(a)}}function k(a){if(!q.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function r(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:f;f.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
p=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],t={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},x="undefined"!==typeof SVGElementInstance,q={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Y){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new n(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<h.length;d++)c=h[d],b[c]=a[c]||p[d],x&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in t))return b},propagate:function(a,
b,c){for(var d=a.target,h=[];null!=d&&d!==document&&!d.contains(a.relatedTarget);)if(h.push(d),d=d.parentNode,!d)return;c&&h.reverse();h.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new n("gotpointercapture");d.pointerId=
a;d._target=b;c||this.asyncDispatchEvent(d)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new n("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};q.boundHandler=q.eventHandler.bind(q);var y={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,
c),h;for(h=this.targetingShadow(d);h;){if(a=h.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;h=this.olderShadow(h)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},z=Array.prototype.forEach.call.bind(Array.prototype.forEach),
w=Array.prototype.map.call.bind(Array.prototype.map),v=Array.prototype.slice.call.bind(Array.prototype.slice),u=Array.prototype.filter.call.bind(Array.prototype.filter),J=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};l.prototype={watchSubtree:function(a){this.observer&&y.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){z(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(v(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=w(a,this.findElements,this);b.push(u(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var B=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],A="",I=window.PointerEvent||window.MSPointerEvent,C=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,E=q.pointermap,H=[1,4,2,8,16],F=!1;try{F=1===(new MouseEvent("test",{buttons:1})).buttons}catch(O){}var S={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){q.listen(a,
this.events)},unregister:function(a){q.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,h=b.length,e;d<h&&(e=b[d]);d++){var g=Math.abs(a-e.y);if(25>=Math.abs(c-e.x)&&25>=g)return!0}},prepareEvent:function(a){var b=q.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=E.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);F||(c.buttons=H[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);E.set(this.POINTER_ID,a);b&&0!==b.buttons?q.move(c):q.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);q.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);if(!F){var d=H[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}E.set(this.POINTER_ID,a);c.buttons&=~H[c.button];0===c.buttons?q.up(c):q.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);q.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;q.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);q.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},P=q.captureInfo,T=y.findTarget.bind(y),M=y.allShadows.bind(y),K=q.pointermap,Q,L={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){Q.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,q.listen(a,this.events),M(a).forEach(function(a){a._scrollType=c;q.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;q.unlisten(a,this.events);M(a).forEach(function(a){a._scrollType=void 0;q.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,M(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):
d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===K.size||1===K.size&&K.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=q.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=P[d]||T(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var h=this;c.preventDefault=function(){h.scrolling=!1;h.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,h;c<d&&(h=a[c]);c++)if(h.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(K.size>=b.length){var c=[];K.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){K.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});q.enterOver(a);q.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=K.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;q.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(q.leaveOut(c),q.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(q.up(a),q.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){q.cancel(a);q.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){K.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=S.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};Q=new l(L.elementAdded,L.elementRemoved,L.elementChanged,L);var G=q.pointermap,U=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,R={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){q.listen(a,this.events)},unregister:function(a){q.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;U&&(b=q.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){G.delete(a)},MSPointerDown:function(a){G.set(a.pointerId,a);a=this.prepareEvent(a);q.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);q.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);q.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);q.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);q.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);q.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=q.makeEvent("lostpointercapture",a);q.dispatchEvent(a)},MSGotPointerCapture:function(a){a=q.makeEvent("gotpointercapture",a);q.dispatchEvent(a)}},N,X,W;window.navigator.msPointerEnabled?(N=function(a){k(a);r(this);0!==q.pointermap.get(a).buttons&&(q.setCapture(a,this,!0),this.msSetPointerCapture(a))},X=function(a){k(a);q.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(N=function(a){k(a);r(this);0!==q.pointermap.get(a).buttons&&q.setCapture(a,this)},X=function(a){k(a);q.releaseCapture(a)});W=function(a){return!!q.captureInfo[a]};var V=window.PointerEvent||window.MSPointerEvent;return{dispatcher:q,Installer:l,PointerEvent:n,PointerMap:d,targetFinding:y,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=n,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),q.registerSource("ms",R)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),q.registerSource("mouse",S),void 0!==window.ontouchstart&&q.registerSource("touch",L)),q.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:N},releasePointerCapture:{value:X},hasPointerCapture:{value:W}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?
q.registerSource("ms",R):(q.registerSource("mouse",S),void 0!==window.ontouchstart&&q.registerSource("touch",L)),q.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=N.bind(a),a.releasePointerCapture=X.bind(a),a.hasPointerCapture=W.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(n,f,l,g){Object.defineProperty(f,
"__esModule",{value:!0});f.primaryKey=g("mac")?"Meta":"Ctrl";var m={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(n=48;58>n;n++)m[n]=String.fromCharCode(n);for(n=1;25>n;n++)m[111+n]="F"+n;for(n=65;91>n;n++)m[n]=[String.fromCharCode(n+32),String.fromCharCode(n)];f.eventKey=function(c){if(void 0!==c.key)return l.eventKey(c);var e=m[c.keyCode];return Array.isArray(e)?c.shiftKey?
e[1]:e[0]:e};f.isSystemModifier=function(c){switch(c){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}return!1}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(n,f,l,g,m,c){Object.defineProperty(f,"__esModule",{value:!0});n=function(){function e(e,g){var b=this;this.element=e;this.input=g;this.handleGamepadConnectedEvent=function(a){b.handleGamepadConnected(a.gamepad)};
this.handleGamepadDisconnectedEvent=function(a){a=a.gamepad;var d=b.inputDevices[a.index];d&&(b.emitGamepadEvent(a,c.extractState(d),!1),b.inputDevices[a.index]=void 0,b.latestUpdate[a.index]=void 0,b.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return b.handleGamepadConnected(a)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}e.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(e.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"pollingEnabled",{set:function(c){this.supported&&
(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});e.prototype.handleGamepadConnected=function(c){var e=new m(c);"unknown"!==e.deviceType&&(this.inputDevices[c.index]=e,this.input.gamepad.devices.add(e))};e.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=g.addFrameTask({update:function(){return c.readGamepadState()}}))};e.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};e.prototype.readGamepadState=function(){var e=this,g=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!g||"view"===this.input.gamepad.enabledFocusMode&&!b;this.forEachGamepad(function(b){var d=e.inputDevices[b.index];if(d){var g=e.latestUpdate[b.index],d=c.extractState(d),f=a||c.stateIdle(d);g&&(g.timestamp===b.timestamp||!g.active&&f||c.stateEqual(g.state,d))||e.emitGamepadEvent(b,d,!f)}})};e.prototype.forEachGamepad=function(c){for(var e=
window.navigator.getGamepads(),b=0;b<e.length;b++){var a=e[b];this.validate(a)&&c(a)}};e.prototype.emitGamepadEvent=function(c,e,b){var a=this.latestUpdate[c.index];if((a=a&&a.active)||b)this.latestUpdate[c.index]={timestamp:c.timestamp,state:e,active:b},this.callback&&this.callback({device:this.inputDevices[c.index],state:e,action:!a&&b?"start":a&&b?"update":"end"})};e.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var e=0;e<c.axes.length;e++)if(isNaN(c.axes[e]))return!1;return!0};
return e}();f.GamepadSource=n})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.extractState=function(g){var f=g.native;return{buttons:f.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:f.axes.map(function(c){var e=g.axisThreshold,f=Math.abs(c);c=f<e?0:l.sign(c)*(f-e)/(1-e);return c})}};f.stateEqual=function(g,f){if(g.axes.length!==f.axes.length||g.buttons.length!==
f.buttons.length)return!1;for(var c=0;c<g.axes.length;c++)if(g.axes[c]!==f.axes[c])return!1;for(c=0;c<g.buttons.length;c++)if(g.buttons[c]!==f.buttons[c])return!1;return!0};f.stateIdle=function(g){for(var f=0;f<g.axes.length;f++)if(0!==g.axes[f])return!1;for(f=0;f<g.buttons.length;f++)if(0!==g.buttons[f])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./handlers/LatestPointerType".split(" "),
function(n,f,l,g,m,c,e,k,r,b){Object.defineProperty(f,"__esModule",{value:!0});var a=c.getLogger("esri.views.input.InputManager");n=function(c){function h(a,b){a=c.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=r.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}l(h,c);h.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=
a;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=b;return{}};h.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(h.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});h.prototype.installHandlers=function(b,c){var d=this;if(this._nameToGroup[b])a.error("There is already an InputHandler group registered under the name `"+
b+"`");else if(0===c.length)a.error("Can't register a group of zero handlers");else{var h={name:b,handlers:c.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[b]=h;b=function(a){var b=h.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){d.updateDependencies()},emit:function(a,c,h,e){d._emitInputEvent(b.priorityIndex,a,c,h,e)},setPointerCapture:function(a,c){d._setPointerCapture(h,
b,a,c)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){d.notifyChange("hasPendingInputs")}})};var e=this;for(c=h.handlers.length-1;0<=c;c--)b(c);this.updateDependencies()}};h.prototype.uninstallHandlers=function(b){var c=this._nameToGroup[b];c?(c.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[b],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=
!0:this._garbageCollectRemovedHandlers()):a.error("There is no InputHandler group registered under the name `"+b+"`")};h.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};h.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-
1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var h=d.handler.hasSideEffects;if(!h)for(var e=0,g=d.handler.outgoingEventTypes;e<g.length;e++)if(a.has(g[e])){h=!0;break}if(h)for(e=0,g=d.handler.incomingEventMatches;e<g.length;e++){var f=g[e];a.add(f.eventType);for(var k=0,f=f.keyModifiers;k<f.length;k++){var p=f[k];r.isSystemModifier(p)||b.add(p)}}d.active=h}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&
(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};h.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};h.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b.native?b.native.timestamp:void 0)};h.prototype._updateKeyModifiers=function(a,b){var c=this;
if(b){var d=!1,h=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},e=function(a,b){b&&!c._activeKeyModifiers.has(a)?(h(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(h(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var g=b.key;this._keyModifiers.has(g)&&e(g,"key-down"===a)}a=b.native;e("Alt",!(!a||!a.altKey));e("Ctrl",!(!a||!a.ctrlKey));e("Shift",!(!a||!a.shiftKey));e("Meta",!(!a||!a.metaKey));
e("Primary",this._activeKeyModifiers.has(this.primaryKey))}};h.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new b.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};h.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;
this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(c,!1)))};h.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};h.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,
a,b,c)};h.prototype._emitInputEvent=function(a,b,c,h,g){h=void 0!==h?h:this._currentPropagation?this._currentPropagation.timestamp:e();b=new d(b,c,h,g||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};h.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=
!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var h=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(h);h.shouldStopPropagation()||c.push(h)}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};h.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?
1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var h=d[c],e=function(a){if(h.eventType!==a.eventType)return"continue";var b=h.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===h.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:h.keyModifiers.length>a.keyModifiers.length?-1:1}},g=0,f=b.handler.incomingEventMatches;g<f.length;g++){var k=e(f[g]);if("object"===typeof k)return k.value}return a.priorityIndex>b.priorityIndex?-1:
1};h.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],h=0;h<b.length&&0<=this._compareHandlerPriority(d,b[h]);)h++;b.splice(h,0,d)}return b};Object.defineProperty(h.prototype,"debug",{get:function(){var a=this,b=function(b){var c=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=c};return{injectEvent:function(c,d){b(function(){a._onEventReceived(c,d)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});g([k.property({readOnly:!0})],
h.prototype,"hasPendingInputs",null);g([k.property({readOnly:!0})],h.prototype,"latestPointerType",void 0);return h=g([k.subclass("esri.views.input.InputManager")],h)}(k.declared(m));f.InputManager=n;var d=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/handlers/LatestPointerType":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(c){var e=g.call(this,!0)||this;e._onChange=c;e._value="mouse";e.registerIncoming("pointer-down",function(c){e._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});e._moveHandler=e.registerIncoming("pointer-move",function(c){e._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});e._moveHandler.pause();return e}l(c,g);
c.prototype._setValue=function(c){c!==this._value&&("touch"===c?this._moveHandler.resume():this._moveHandler.pause(),this._value=c,this._onChange(c))};return c}(g.InputHandler);f.LatestPointerType=n})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(n,f,l,g){Object.defineProperty(f,"__esModule",{value:!0});n=function(g){function c(){var c=g.call(this,!0)||this;c.registerIncoming("context-menu",
function(c){c.data.native.preventDefault()});return c}l(c,g);return c}(g.InputHandler);f.PreventContextMenu=n;f.default=n})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),function(n,f,l,g,m,c){function e(a){var b=[];a.forEach(function(a){b.push(g.createScreenPoint(a.event.x,a.event.y))});return c.fitCircleLSQ(b)}function k(a){var c=e(a),h=0;a.forEach(function(a){for(var d=
b(a,c),d=d-a.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=a.lastAngle+d;a.lastAngle=d;h+=d-a.initialAngle});h/=a.size||1;return{angle:h,radius:c.radius,center:c.center}}function r(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(f,"__esModule",{value:!0});n=function(a){function c(){var b=a.call(this,!1)||this;b.startStateModifiers=new Set;b.activePointerMap=
new Map;b.isDragging=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}l(c,a);c.prototype.createPayload=function(a,b,c,d){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,
timestamp:d,pointers:r(this.activePointerMap),pointer:b,angle:c.angle,radius:c.radius,center:c.center}};c.prototype.addPointer=function(a){var c=a.native.pointerId,d=k(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,e(this.activePointerMap));a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(d)};c.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};
c.prototype.removePointer=function(a){var b=k(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};c.prototype.updatePointerAngles=function(a){var c=k(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=b(d,c)-a;d.lastAngle=b(d,c)-a})};c.prototype.emitEvent=function(a,b,c){var d=k(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};c.prototype.handlePointerUpAndPointerLost=function(a){var b=
a.data.native.pointerId,c=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,c),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};c.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),this.emitEvent("update",
c,d)):(this.addPointer(c),this.emitEvent("added",c,d)):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",c,d))}};return c}(m.InputHandler);f.Drag=n;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(f.Button||(f.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require",
"exports","../../../core/screenUtils"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.manhattanDistance=function(g,f){return Math.abs(f.x-g.x)+Math.abs(f.y-g.y)};f.euclideanDistance=function(g,f){var c=f.x-g.x;g=f.y-g.y;return Math.sqrt(c*c+g*g)};f.fitCircleLSQ=function(g,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:l.createScreenPoint()};if(0===g.length)return f;if(1===g.length)return f.center.x=g[0].x,f.center.y=g[0].y,f;if(2===g.length){var c=g[0];g=g[1];var e=
[g.x-c.x,g.y-c.y],k=e[0],e=e[1];f.radius=Math.sqrt(k*k+e*e)/2;f.center.x=(c.x+g.x)/2;f.center.y=(c.y+g.y)/2;return f}for(var r=0,b=0,a=0;a<g.length;a++)r+=g[a].x,b+=g[a].y;for(var r=r/g.length,b=b/g.length,d=g.map(function(a){return a.x-r}),h=g.map(function(a){return a.y-b}),p=c=f=0,t=0,x=k=0,a=e=0;a<d.length;a++){var q=d[a],y=h[a],z=q*q,w=y*y;f+=z;c+=w;p+=q*y;t+=z*q;k+=w*y;x+=q*w;e+=y*z}a=f;d=p;h=c;t=.5*(t+x);k=.5*(k+e);e=a*h-p*d;x=(t*h-k*d)/e;k=(a*k-p*t)/e;e=l.createScreenPoint(x+r,k+b);return{radius:Math.sqrt(x*
x+k*k+(f+c)/g.length),center:e}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(n,f,l,g,m,c){Object.defineProperty(f,"__esModule",{value:!0});f.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};n=function(e){function k(c,b,a,d,h){void 0===c&&(c=f.DefaultParameters.maximumClickDelay);void 0===
b&&(b=f.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=f.DefaultParameters.movementUntilTouchDrag);void 0===d&&(d=f.DefaultParameters.holdDelay);void 0===h&&(h=g.default);var k=e.call(this,!1)||this;k.maximumClickDelay=c;k.movementUntilMouseDrag=b;k.movementUntilTouchDrag=a;k.holdDelay=d;k._clock=h;k._pointerState=new Map;k._pointerDrag=k.registerOutgoing("pointer-drag");k._immediateClick=k.registerOutgoing("immediate-click");k._pointerHold=k.registerOutgoing("hold");k.registerIncoming("pointer-down",
k._handlePointerDown.bind(k));k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});k._moveHandle=k.registerIncoming("pointer-move",k._handlePointerMove.bind(k));k._moveHandle.pause();return k}l(k,e);k.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=
c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};k.prototype._handlePointerDown=function(c){var b=this,a=c.data,d=a.native.pointerId,h=null;0===this._pointerState.size&&(h=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));h={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,
holdTimeout:h,modifiers:new Set};this._pointerState.set(d,h);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};k.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};k.prototype._handlePointerMove=function(e){var b=e.data,a=this._pointerState.get(b.native.pointerId);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,
a.modifiers):c.euclideanDistance(b,a.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(e),a.previousEvent=b)};k.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(h){null!=h.holdTimeout&&(h.holdTimeout.remove(),h.holdTimeout=null);h.isDragging||(h.modifiers=c.modifiers,h.isDragging=!0,d===h.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",
h,a)):b._pointerDrag.emit(b._createPointerDragData("start",h,h.previousEvent),c.timestamp))})};k.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,h=this._pointerState.get(d);h&&(null!=h.holdTimeout&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",h,"pointer-up"===b?a:h.previousEvent),void 0,h.modifiers):"pointer-up"===b&&h.downButton===a.native.button&&c.timestamp-h.startTimestamp<=this.maximumClickDelay&&
!h.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return k}(m.InputHandler);f.PointerClickHoldAndDrag=n})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(n,f,l,g,m,c,e){Object.defineProperty(f,"__esModule",{value:!0});
f.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};n=function(c){function k(b,a,d,h,e){void 0===b&&(b=f.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=f.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=f.DefaultParameters.maximumDoubleTouchDelay);void 0===h&&(h=f.DefaultParameters.maximumDoubleTouchDistance);void 0===e&&(e=g.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=b;
k.maximumDoubleClickDistance=a;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=h;k._clock=e;k._pointerState=new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}l(k,c);k.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&
(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(k.prototype,"hasPendingInputs",{get:function(){return!m.everyMap(this._pointerState,function(b){return null==b.doubleClickTimeout})},enumerable:!0,configurable:!0});k.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};k.prototype._handleImmediateClick=function(b){var a=b.data,c=this._pointerId(a),h=this._pointerState.get(c);if(h){var g="touch"===a.native.pointerType?
this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(h.event.data,a)>g?(this._clearDoubleClickTimeout(c,!0),this._startClick(b)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(a,void 0,h.event.modifiers))}else this._startClick(b)};k.prototype._startClick=function(b){var a=this,c=this._pointerId(b.data);this._pointerState.set(c,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(c)},"touch"===b.data.native.pointerType?
this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};k.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};k.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};k.prototype._clearDoubleClickTimeout=function(b,a){var c=this._pointerState.get(b);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),
this._pointerState.delete(b),this.refreshHasPendingInputs())};k.prototype._doubleClickTimeoutExceeded=function(b){var a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return k}(c.InputHandler);f.SingleAndDoubleClick=n})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(n,f,l,g,m,c,e){var k=0;return function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}l(b,c);Object.defineProperty(b.prototype,"version",{get:function(){return k++},enumerable:!0,configurable:!0});g([e.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],b.prototype,"version",null);g([e.property({type:m})],b.prototype,"color",void 0);g([e.property({type:m})],b.prototype,"haloColor",
void 0);g([e.property()],b.prototype,"haloOpacity",void 0);g([e.property()],b.prototype,"fillOpacity",void 0);return b=g([e.subclass("esri.views.2d.support.HighlightOptions")],b)}(e.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(n,f,l,g,m){function c(a,c){var d=a||{},h=d.format,e=d.quality,f=d.rotation,d=d.disableSlice,k=a&&!a.ignorePadding&&c.padding||x,q;q=
c.width-k.left-k.right;c=c.height-k.top-k.bottom;var y=k=0,l=q,n=c;if(a&&a.area){var k=Math.floor(a.area.x)||0,y=Math.floor(a.area.y)||0,C=null!=a.area.width?Math.floor(a.area.width):null,E=null!=a.area.height?Math.floor(a.area.height):null,l=l-k,n=n-y;null!=C&&null!=E?(l=Math.min(l,C),n=Math.min(n,E)):null==C&&null!=E?(C=Math.min(l,C),n*=C/l,l=C):null!=C&&null==E&&(C=Math.min(n,E),l*=C/n,n=C)}k=b({x:k,y:y,width:l,height:n},a);y=Math.floor(Math.max(k.x,0));l=Math.floor(Math.max(k.y,0));q={x:y,y:l,
width:Math.floor(Math.min(k.width,q-y)),height:Math.floor(Math.min(k.height,c-l))};c=q.width/q.height;k=k.width/k.height;k!==c&&(k>c?(c=Math.floor(q.width/k),q={x:q.x,y:Math.floor(q.y+(q.height-c)/2),width:q.width,height:c}):(c=Math.floor(q.height*k),q={x:Math.floor(q.x+(q.width-c)/2),y:q.y,width:c,height:q.height}));k=r(a,q);c=k.width;k=k.height;a:switch(h){case "png":case "jpg":case "jpeg":break a;case null:case void 0:h=p;break a;default:g.neverReached(h),h=p}y=t[h];e=m.clamp(null!=e?e:y,0,100);
return{format:h,quality:e,area:q,width:c,height:k,rotation:f,disableSlice:d||!1,ignoreBackground:a&&a.ignoreBackground}}function e(a,b){return a.toDataURL(h[b.format],b.quality/100)}function k(b,c,d){d||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),d=a);return d.getContext("2d").createImageData(b,c)}function r(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==
a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(f,"__esModule",{value:!0});f.completeUserSettings=c;f.toRenderSettings=function(a,b){var d=c(a,b),h=d.area,e=d.width/h.width,g=a&&!a.ignorePadding&&
b.padding||x,f=g.left+g.right,k=g.top+g.bottom;return{framebufferWidth:Math.floor((b.width-f)*e+f),framebufferHeight:Math.floor((b.height-k)*e+k),region:{x:Math.floor(h.x*e)+g.left,y:Math.floor(h.y*e)+g.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:e,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice,ignoreBackground:d.ignoreBackground}};f.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var h=a.data,g=h.length,f=0;f<g;f+=4){var k=
h[f+3];0<k&&(k/=255,h[f+0]/=k,h[f+1]/=k,h[f+2]/=k)}c.width=a.width;c.height=a.height;h=c.getContext("2d");h.putImageData(a,0,0);d.flipY&&(h.save(),h.globalCompositeOperation="copy",h.scale(1,-1),h.translate(0,-h.canvas.height),h.drawImage(h.canvas,0,0),h.restore());a=h.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};f.toDataUrl=e;f.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,
b)}catch(w){d=!1}return k(a,b,c)};f.wrapImageData=function(a,b,c,h){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,b,c)}catch(v){d=!1}b=k(b,c,h);b.data.set(a,0);return b};f.resampleHermite=function(a,b,c,d,h,e,g,f){void 0===d&&(d=0);void 0===h&&(h=0);void 0===e&&(e=a.width-d);void 0===g&&(g=a.height-h);void 0===f&&(f=!1);var k=a.data,p=b.width,q=b.height,t=b.data;e/=p;g/=q;var z=Math.ceil(e/2),w=Math.ceil(g/2);a=a.width;for(var v=0;v<q;v++)for(var u=
0;u<p;u++){for(var l=4*(u+(f?q-v-1:v)*p),x=0,y=0,m=0,r=0,n=0,J=0,D=(v+.5)*g,R=Math.floor(v*g);R<(v+1)*g;R++)for(var N=Math.abs(D-(R+.5))/w,X=(u+.5)*e,N=N*N,W=Math.floor(u*e);W<(u+1)*e;W++){var V=Math.abs(X-(W+.5))/z,V=Math.sqrt(N+V*V);if(!(1<=V)){var V=2*V*V*V-3*V*V+1,O=4*(d+W+(h+R)*a),J=J+V*k[O+3],y=y+V;!c&&255>k[O+3]&&(V=V*k[O+3]/255);m+=V*k[O];r+=V*k[O+1];n+=V*k[O+2];x+=V}}t[l]=m/x;t[l+1]=r/x;t[l+2]=n/x;t[l+3]=J/y}return b};f.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;
var c=a.framebufferHeight,d=a.region,h=Math.min(8,2048/Math.max(b,c));return 1.5>h?a:l({},a,{framebufferWidth:Math.round(b*h),framebufferHeight:Math.round(c*h),pixelRatio:a.pixelRatio*h,resample:{region:{x:Math.round(d.x*h),y:Math.round(d.y*h),width:Math.round(d.width*h),height:Math.round(d.height*h)},width:b,height:c}})};var a=null,d=!0,h={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},p="jpg",t={png:100,jpg:98,jpeg:98},x={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require",
"exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(n,f,l,g,m){Object.defineProperty(f,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};f.check=function(e){e=l({},c,e);return m("esri-webgl")?!e.supportsMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new g("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):
m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?m("esri-webgl-instanced-arrays")?null:new g("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new g("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new g("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):
new g("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new g("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new g("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(n,f,l,g,m,c){return function(c){function e(e){e=c.call(this)||this;e.components=["attribution","zoom"];return e}l(e,c);g([m.property()],e.prototype,"components",void 0);return e=g([m.subclass("esri.views.ui.2d.DefaultUI2D")],e)}(m.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(n,f,l,g,m,c,e,k,r,b,a,d){return function(h){function f(a){a=h.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}l(f,h);f.prototype.initialize=function(){this._handles.add([m.init(this,"components",this._componentsWatcher.bind(this)),m.init(this,"view",this._updateViewAwareWidgets.bind(this))])};f.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};f.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})};f.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};f.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};f.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};f.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};f.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};f.prototype._createAttribution=function(){return new r({view:this.view})};f.prototype._createCompass=function(){return new b({view:this.view})};
f.prototype._createNavigationToggle=function(){return new a({view:this.view})};f.prototype._createZoom=function(){return new d({view:this.view})};g([c.property()],f.prototype,"components",void 0);return f=g([c.subclass("esri.views.ui.DefaultUI")],f)}(c.declared(k))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(n,
f,l,g,m,c,e){return function(f){function k(){var b=null!==f&&f.apply(this,arguments)||this;b.widget=null;return b}l(k,f);k.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(k.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(b){this._set("id",b)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});k.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),c.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};g([e.property()],k.prototype,"id",null);g([e.property()],k.prototype,"node",null);g([e.cast("node")],k.prototype,"castNode",null);g([e.property({readOnly:!0})],
k.prototype,"widget",void 0);return k=g([e.subclass("esri.views.ui.Component")],k)}(e.declared(m))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(n,f,l,g,m,c,e,k,r,b,a,d){function h(b){return"object"!==
typeof b||b&&b.isInstanceOf&&b.isInstanceOf(a)||"declaredClass"in b||!("component"in b||"index"in b||"position"in b)?null:b}function p(a,b){var c=b.bottom,d=b.left,h=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=h}var t={left:0,top:0,bottom:0,right:0},x={bottom:30,top:15,right:15,left:15};return function(e){function f(a){a=e.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new k;a._componentToKey=new Map;a.view=
null;a._initContainers();return a}g(f,e);f.prototype.initialize=function(){this._handles.add([r.init(this,"view.padding, container",this._applyViewPadding.bind(this)),r.init(this,"padding",this._applyUIPadding.bind(this))])};f.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(f.prototype,"container",{set:function(a){var b=
this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),p(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});f.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:l({},x,a)};Object.defineProperty(f.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});f.prototype.add=function(b,c){var d=this,e,g;if(Array.isArray(b))b.forEach(function(a){return d.add(a,
c)});else{var f=h(b);f&&(e=f.index,c=f.position,b=f.component,g=f.key);c&&"object"===typeof c&&(e=c.index,g=c.key,c=c.position);!b||c&&!this._isValidPosition(c)||(b&&b.isInstanceOf&&b.isInstanceOf(a)||(b=new a({node:b})),this._place({component:b,position:c,index:e}),this._components.push(b),g&&this._componentToKey.set(b,g))}};f.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this.find(a);if(d){var h=this._componentToKey;if(!h.has(a)||
h.get(a)===b)return h=this._components.indexOf(d),d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(h,1)[0]}}};f.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};f.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,e=h(a)||h(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};f.prototype.find=function(b){return b?b&&b.isInstanceOf&&b.isInstanceOf(a)?this._findByComponent(b):"string"===
typeof b?this._findById(b):this._findByNode(b.domNode||b):null};f.prototype._getViewPadding=function(){return this.get("view.padding")||t};f.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};f.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var c=document.createElement("div");c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var h=document.createElement("div");h.classList.add("esri-ui-top-right");h.classList.add("esri-ui-corner");a.appendChild(h);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var g=document.createElement("div");g.classList.add("esri-ui-bottom-right");g.classList.add("esri-ui-corner");a.appendChild(g);this._innerContainer=
a;this._manualContainer=b;a=d.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":h,"bottom-left":e,"bottom-right":g,"top-leading":a?h:c,"top-trailing":a?c:h,"bottom-leading":a?g:e,"bottom-trailing":a?e:g};this._positionNameToContainerLookup=l({manual:b},this._cornerNameToContainerLookup)};f.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};f.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var h=-1<d,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();h?(h=Array.prototype.slice.call(a.children),0===d?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=h.length?a.appendChild(b.node):c.insertBefore(b.node,h[d])):a.appendChild(b.node)};f.prototype._applyViewPadding=function(){var a=this.container;a&&p(a,this._toPxPosition(this._getViewPadding()))};
f.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&p(a,this._toPxPosition(this.padding))};f.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};f.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};f.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};f.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};f.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};m([b.property()],f.prototype,"container",null);m([b.property({dependsOn:["view.height"]})],f.prototype,"height",null);m([b.property({value:x})],f.prototype,"padding",null);m([b.cast("padding")],f.prototype,"castPadding",null);m([b.property()],f.prototype,"view",void 0);m([b.property({dependsOn:["view.width"]})],
f.prototype,"width",null);return f=m([b.subclass("esri.views.ui.UI")],f)}(b.declared(e.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(n,f,l,g,m,c,e,k,r,b){return function(a){function d(b){b=a.call(this)||this;b._isOpen=
!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=m.widgetLabel;b.view=null;b.viewModel=new r;return b}l(d,a);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=(a={},a["esri-attribution--open"]=this._isOpen,a);return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
d.prototype._renderSourcesNode=function(){var a,c=this._isOpen,d=this._isInteractive(),e=d?0:-1,g=this.attributionText,f=d?"button":void 0,c=(a={},a["esri-attribution__sources--open"]=c,a["esri-interactive"]=d,a);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:g,role:f,tabIndex:e})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};g([e.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),b.renderable()],d.prototype,"attributionText",null);g([e.property()],d.prototype,"iconClass",void 0);g([e.property(),b.renderable()],d.prototype,"itemDelimiter",void 0);g([e.property()],d.prototype,"label",void 0);g([e.aliasOf("viewModel.view")],d.prototype,"view",void 0);g([e.property({type:r}),b.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);g([b.accessibleHandler()],d.prototype,"_toggleState",null);return d=g([e.subclass("esri.widgets.Attribution")],
d)}(e.declared(k))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(n,f,l,g,m,c,
e,k,r,b,a,d,h,p){function t(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function x(a,b,c){c&&b&&(k.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var q=[];return function(b){function f(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=new Map;d.items=
new r;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");q.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))x(q,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&x(q,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?x(q,a,c):x(q,a,b.copyright)}}),t(d.items,q)&&(d.items.removeAll(),d.items.addMany(q)),d.notifyChange("state")):d.clear()};d.handles.add([a.on(d,
"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),a.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}l(f,b);f.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});f.prototype._fetchAttributionData=
function(a){return m(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);b=null;c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return d=c.sent(),b=this._createContributionIndex(d,"bing-maps"===a.layer.type),[3,4];case 3:return c.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,
b)),this._updateAttributionItems(),[2]}})})};f.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var h=a[d],g=h.coverageAreas;if(!g)return;for(var f=0;f<g.length;f++)for(var k=g[f],q=k.bbox,t=k.zoomMin-(b&&k.zoomMin?1:0),l=k.zoomMax-(b&&k.zoomMax?1:0),k={extent:p.geographicToWebMercator({xmin:q[1],ymin:q[0],xmax:q[3],ymax:q[2],spatialReference:e.SpatialReference.WGS84}),attribution:h.attribution||"",score:null!=k.score?k.score:100,
id:d};t<=l;t++)c[t]=c[t]||[],c[t].push(k)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};f.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var e=p.project(d.center.clone().normalize(),b.spatialReference),g={};return a?a.filter(function(a){var b=!g[a.id]&&e&&h.extentContainsPoint(a.extent,e);b&&(g[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-
b.objectId}).map(function(a){return a.attribution}).join(", "):""};g([d.property({readOnly:!0,type:r})],f.prototype,"items",void 0);g([d.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"state",null);g([d.property()],f.prototype,"view",void 0);return f=g([d.subclass("esri.widgets.Attribution.AttributionViewModel")],f)}(d.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(n,f,l,g,m,c,e,k,r){return function(b){function a(a){a=b.call(this)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=m.widgetLabel;a.view=null;a.viewModel=new k;return a}l(a,b);a.prototype.reset=function(){};a.prototype.render=function(){var a,b,c=this.viewModel,e=c.orientation,c=c.state,g="disabled"===c,f="compass"===("rotation"===c?"rotation":"compass"),c=g?-1:0,g=(a={},a["esri-disabled"]=g,a["esri-interactive"]=!g,a);a=(b={},b["esri-icon-compass"]=f,b["esri-icon-dial"]=
!f,b);return r.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",g),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":m.reset,title:m.reset},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(e)}),r.tsx("span",{class:"esri-icon-font-fallback-text"},m.reset))};a.prototype._reset=function(){this.viewModel.reset()};a.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};g([c.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);g([c.property()],a.prototype,"iconClass",void 0);g([c.property()],a.prototype,"label",void 0);g([c.aliasOf("viewModel.view")],a.prototype,"view",void 0);g([c.property({type:k}),r.renderable(["viewModel.orientation","viewModel.state"])],a.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.reset")],a.prototype,"reset",null);g([r.accessibleHandler()],a.prototype,"_reset",null);return a=g([c.subclass("esri.widgets.Compass")],
a)}(c.declared(e))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(n,f,l,g,m,c,e,k,r){return function(b){function a(a){a=b.call(this,a)||this;a._handles=new c;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=
a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}l(a,b);a.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};a.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};g([k.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,"canShowNorth",null);g([k.property()],a.prototype,"orientation",void 0);g([k.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);g([k.property()],a.prototype,"view",void 0);g([k.property()],
a.prototype,"reset",null);return a=g([k.subclass("esri.widgets.CompassViewModel")],a)}(k.declared(r.GoToMixin(m)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(n,f,l,g,m,c,e,k,r){return function(b){function a(a){a=b.call(this)||
this;a.iconClass="esri-icon-pan2";a.label=m.widgetLabel;a.view=null;a.viewModel=new k;return a}l(a,b);Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.toggle=function(){};a.prototype.render=function(){var a,b,c,e="disabled"===this.get("viewModel.state"),g="pan"===this.get("viewModel.navigationMode"),f=(a={},a["esri-disabled"]=e,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=g,b);b=(c={},c["esri-navigation-toggle__button--active"]=!g,c);c=e?-1:0;return r.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",f),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":m.toggle,title:m.toggle},r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},r.tsx("span",{class:"esri-icon-pan"})),r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},r.tsx("span",{class:"esri-icon-rotate"})))};a.prototype._toggle=function(){this.toggle()};g([c.property()],a.prototype,"iconClass",void 0);g([c.property()],a.prototype,"label",void 0);g([c.property({value:"vertical"}),r.renderable()],a.prototype,"layout",null);g([c.aliasOf("viewModel.view"),r.renderable()],a.prototype,"view",void 0);g([c.property({type:k}),r.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.toggle")],
a.prototype,"toggle",null);g([r.accessibleHandler()],a.prototype,"_toggle",null);return a=g([c.subclass("esri.widgets.NavigationToggle")],a)}(c.declared(e))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c,e,k){return function(f){function b(a){a=
f.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}l(b,f);b.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});b.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};g([k.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);g([k.property()],b.prototype,"navigationMode",void 0);g([k.property()],b.prototype,"view",void 0);g([k.property()],b.prototype,"toggle",null);return b=g([k.subclass("esri.widgets.NavigationToggleViewModel")],
b)}(k.declared(m))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(n,f,l,g,m,c,e,k,r,b){return function(a){function d(b){b=a.call(this)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";b.label=m.widgetLabel;b.view=null;b.viewModel=new r;return b}l(d,a);d.prototype.postInitialize=
function(){this._zoomInButton=new k({action:this.zoomIn,iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new k({action:this.zoomOut,iconClass:"esri-icon-minus",title:m.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=this.viewModel,d=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};g([c.property()],d.prototype,"iconClass",void 0);g([c.property()],d.prototype,"label",void 0);g([c.property({value:"vertical"}),b.renderable()],d.prototype,"layout",null);g([c.aliasOf("viewModel.view"),b.renderable()],d.prototype,"view",void 0);
g([c.property({type:r}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);g([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);g([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=g([c.subclass("esri.widgets.Zoom")],d)}(c.declared(e))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(n,f,l,g,m,c,e){return function(c){function f(){var b=null!==c&&c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}l(f,c);f.prototype.render=function(){var b,a,c=this.enabled?0:-1,h=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(a={},a[this.iconClass]=!!this.iconClass,a);return e.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",h),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},e.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};f.prototype._triggerAction=function(){this.action.call(this)};g([m.property()],f.prototype,"action",void 0);g([m.property(),e.renderable()],f.prototype,"enabled",void 0);g([m.property(),e.renderable()],f.prototype,"iconClass",void 0);g([m.property(),e.renderable()],f.prototype,"title",void 0);g([e.accessibleHandler()],f.prototype,
"_triggerAction",null);return f=g([m.subclass("esri.widgets.IconButton")],f)}(m.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(n,f,l,g,m,c,e,k){return function(f){function b(a){a=f.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}l(b,f);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new k({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};g([c.property()],b.prototype,"_zoomConditions",void 0);g([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);g([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",void 0);g([c.property({dependsOn:["view.ready"],
readOnly:!0})],b.prototype,"state",null);g([c.property()],b.prototype,"view",null);g([c.property()],b.prototype,"zoomIn",null);g([c.property()],b.prototype,"zoomOut",null);return b=g([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(c.declared(m))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c){return function(e){function f(){return null!==
e&&e.apply(this,arguments)||this}l(f,e);Object.defineProperty(f.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||c>b},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||c<b},enumerable:!0,configurable:!0});g([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],f.prototype,"canZoomIn",null);g([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],f.prototype,"canZoomOut",null);g([c.property()],f.prototype,"view",void 0);return f=g([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)}(c.declared(m))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(n,f,l,g,m,c){return function(e){function f(){return null!==e&&e.apply(this,arguments)||this}l(f,e);Object.defineProperty(f.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});g([c.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"canZoomIn",null);g([c.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"canZoomOut",null);g([c.property()],f.prototype,"view",void 0);return f=g([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],f)}(c.declared(m))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(n,f,l){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4=l})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(n,f,l,g){function m(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,c){var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],l=a[5],m=a[6],w=a[7],v=a[8],u=a[9],n=a[10],r=a[11],B=a[12],A=a[13],I=a[14];a=a[15];var C=c[0],E=c[1],H=c[2],F=c[3];b[0]=C*d+E*k+H*v+F*B;
b[1]=C*e+E*l+H*u+F*A;b[2]=C*f+E*m+H*n+F*I;b[3]=C*g+E*w+H*r+F*a;C=c[4];E=c[5];H=c[6];F=c[7];b[4]=C*d+E*k+H*v+F*B;b[5]=C*e+E*l+H*u+F*A;b[6]=C*f+E*m+H*n+F*I;b[7]=C*g+E*w+H*r+F*a;C=c[8];E=c[9];H=c[10];F=c[11];b[8]=C*d+E*k+H*v+F*B;b[9]=C*e+E*l+H*u+F*A;b[10]=C*f+E*m+H*n+F*I;b[11]=C*g+E*w+H*r+F*a;C=c[12];E=c[13];H=c[14];F=c[15];b[12]=C*d+E*k+H*v+F*B;b[13]=C*e+E*l+H*u+F*A;b[14]=C*f+E*m+H*n+F*I;b[15]=C*g+E*w+H*r+F*a;return b}function e(b,a,c){var d=a[0],e=a[1],f=a[2],g=a[3],k=d+d,l=e+e,m=f+f;a=d*k;var w=d*
l,d=d*m,v=e*l,e=e*m,f=f*m,k=g*k,l=g*l,g=g*m;b[0]=1-(v+f);b[1]=w+g;b[2]=d-l;b[3]=0;b[4]=w-g;b[5]=1-(a+f);b[6]=e+k;b[7]=0;b[8]=d+l;b[9]=e-k;b[10]=1-(a+v);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b}function k(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b}Object.defineProperty(f,
"__esModule",{value:!0});f.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.set=function(b,a,c,e,f,g,k,q,l,m,w,v,u,n,r,B,A){b[0]=a;b[1]=c;b[2]=e;b[3]=f;b[4]=g;b[5]=k;b[6]=q;b[7]=l;b[8]=m;b[9]=w;b[10]=v;b[11]=u;b[12]=n;b[13]=r;b[14]=B;b[15]=A;return b};f.identity=m;f.transpose=function(b,a){if(b===a){var c=a[1],e=a[2],f=a[3],g=a[6],k=a[7],q=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=e;b[9]=g;b[11]=a[14];b[12]=f;b[13]=k;b[14]=q}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};f.invert=function(b,a){var c=a[0],e=a[1],f=a[2],g=a[3],k=a[4],q=a[5],l=a[6],m=a[7],w=a[8],v=a[9],u=a[10],n=a[11],r=a[12],B=a[13],A=a[14];a=a[15];var I=c*q-e*k,C=c*l-f*k,E=c*m-g*k,H=e*l-f*q,F=e*m-g*q,S=f*m-
g*l,P=w*B-v*r,T=w*A-u*r,M=w*a-n*r,K=v*A-u*B,Q=v*a-n*B,L=u*a-n*A,G=I*L-C*Q+E*K+H*M-F*T+S*P;if(!G)return null;G=1/G;b[0]=(q*L-l*Q+m*K)*G;b[1]=(f*Q-e*L-g*K)*G;b[2]=(B*S-A*F+a*H)*G;b[3]=(u*F-v*S-n*H)*G;b[4]=(l*M-k*L-m*T)*G;b[5]=(c*L-f*M+g*T)*G;b[6]=(A*E-r*S-a*C)*G;b[7]=(w*S-u*E+n*C)*G;b[8]=(k*Q-q*M+m*P)*G;b[9]=(e*M-c*Q-g*P)*G;b[10]=(r*F-B*E+a*I)*G;b[11]=(v*E-w*F-n*I)*G;b[12]=(q*T-k*K-l*P)*G;b[13]=(c*K-e*T+f*P)*G;b[14]=(B*C-r*H-A*I)*G;b[15]=(w*H-v*C+u*I)*G;return b};f.adjoint=function(b,a){var c=a[0],
e=a[1],f=a[2],g=a[3],k=a[4],q=a[5],l=a[6],m=a[7],w=a[8],v=a[9],u=a[10],n=a[11],r=a[12],B=a[13],A=a[14];a=a[15];b[0]=q*(u*a-n*A)-v*(l*a-m*A)+B*(l*n-m*u);b[1]=-(e*(u*a-n*A)-v*(f*a-g*A)+B*(f*n-g*u));b[2]=e*(l*a-m*A)-q*(f*a-g*A)+B*(f*m-g*l);b[3]=-(e*(l*n-m*u)-q*(f*n-g*u)+v*(f*m-g*l));b[4]=-(k*(u*a-n*A)-w*(l*a-m*A)+r*(l*n-m*u));b[5]=c*(u*a-n*A)-w*(f*a-g*A)+r*(f*n-g*u);b[6]=-(c*(l*a-m*A)-k*(f*a-g*A)+r*(f*m-g*l));b[7]=c*(l*n-m*u)-k*(f*n-g*u)+w*(f*m-g*l);b[8]=k*(v*a-n*B)-w*(q*a-m*B)+r*(q*n-m*v);b[9]=-(c*
(v*a-n*B)-w*(e*a-g*B)+r*(e*n-g*v));b[10]=c*(q*a-m*B)-k*(e*a-g*B)+r*(e*m-g*q);b[11]=-(c*(q*n-m*v)-k*(e*n-g*v)+w*(e*m-g*q));b[12]=-(k*(v*A-u*B)-w*(q*A-l*B)+r*(q*u-l*v));b[13]=c*(v*A-u*B)-w*(e*A-f*B)+r*(e*u-f*v);b[14]=-(c*(q*A-l*B)-k*(e*A-f*B)+r*(e*l-f*q));b[15]=c*(q*u-l*v)-k*(e*u-f*v)+w*(e*l-f*q);return b};f.determinant=function(b){var a=b[0],c=b[1],e=b[2],f=b[3],g=b[4],k=b[5],q=b[6],l=b[7],m=b[8],n=b[9],v=b[10],u=b[11],r=b[12],D=b[13],B=b[14];b=b[15];return(a*k-c*g)*(v*b-u*B)-(a*q-e*g)*(n*b-u*D)+(a*
l-f*g)*(n*B-v*D)+(c*q-e*k)*(m*b-u*r)-(c*l-f*k)*(m*B-v*r)+(e*l-f*q)*(m*D-n*r)};f.multiply=c;f.translate=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,k=void 0,l=void 0,m=void 0,n=void 0,v=void 0,u=void 0,r=void 0,D=void 0,B=void 0,A=void 0;a===b?(b[12]=a[0]*d+a[4]*e+a[8]*c+a[12],b[13]=a[1]*d+a[5]*e+a[9]*c+a[13],b[14]=a[2]*d+a[6]*e+a[10]*c+a[14],b[15]=a[3]*d+a[7]*e+a[11]*c+a[15]):(f=a[0],g=a[1],k=a[2],l=a[3],m=a[4],n=a[5],v=a[6],u=a[7],r=a[8],D=a[9],B=a[10],A=a[11],b[0]=f,b[1]=g,b[2]=
k,b[3]=l,b[4]=m,b[5]=n,b[6]=v,b[7]=u,b[8]=r,b[9]=D,b[10]=B,b[11]=A,b[12]=f*d+m*e+r*c+a[12],b[13]=g*d+n*e+D*c+a[13],b[14]=k*d+v*e+B*c+a[14],b[15]=l*d+u*e+A*c+a[15]);return b};f.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.rotate=function(b,a,c,e){var d=e[0],f=e[1];e=e[2];var h=Math.sqrt(d*d+
f*f+e*e),k=void 0,l=void 0,m=void 0,n=void 0,v=void 0,u=void 0,r=void 0,D=void 0,B=void 0,A=void 0,I=void 0,C=void 0,E=void 0,H=void 0,F=void 0,S=void 0,P=void 0,T=void 0,M=void 0,K=void 0,Q=void 0,L=void 0,l=k=void 0;if(h<g.EPSILON)return null;h=1/h;d*=h;f*=h;e*=h;k=Math.sin(c);l=Math.cos(c);m=1-l;n=a[0];v=a[1];u=a[2];r=a[3];D=a[4];B=a[5];A=a[6];I=a[7];C=a[8];E=a[9];H=a[10];F=a[11];S=d*d*m+l;P=f*d*m+e*k;T=e*d*m-f*k;M=d*f*m-e*k;K=f*f*m+l;Q=e*f*m+d*k;L=d*e*m+f*k;k=f*e*m-d*k;l=e*e*m+l;b[0]=n*S+D*P+
C*T;b[1]=v*S+B*P+E*T;b[2]=u*S+A*P+H*T;b[3]=r*S+I*P+F*T;b[4]=n*M+D*K+C*Q;b[5]=v*M+B*K+E*Q;b[6]=u*M+A*K+H*Q;b[7]=r*M+I*K+F*Q;b[8]=n*L+D*k+C*l;b[9]=v*L+B*k+E*l;b[10]=u*L+A*k+H*l;b[11]=r*L+I*k+F*l;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};f.rotateX=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],f=a[5],g=a[6],k=a[7],l=a[8],m=a[9],n=a[10],v=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*c+l*d;b[5]=f*c+m*
d;b[6]=g*c+n*d;b[7]=k*c+v*d;b[8]=l*c-e*d;b[9]=m*c-f*d;b[10]=n*c-g*d;b[11]=v*c-k*d;return b};f.rotateY=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],g=a[2],k=a[3],l=a[8],m=a[9],n=a[10],v=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c-l*d;b[1]=f*c-m*d;b[2]=g*c-n*d;b[3]=k*c-v*d;b[8]=e*d+l*c;b[9]=f*d+m*c;b[10]=g*d+n*c;b[11]=k*d+v*c;return b};f.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],
g=a[2],k=a[3],l=a[4],m=a[5],n=a[6],v=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c+l*d;b[1]=f*c+m*d;b[2]=g*c+n*d;b[3]=k*c+v*d;b[4]=l*c-e*d;b[5]=m*c-f*d;b[6]=n*c-g*d;b[7]=v*c-k*d;return b};f.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};f.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromRotation=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=Math.sqrt(d*d+e*e+c*c),k=void 0,l=void 0,m=void 0;if(f<g.EPSILON)return null;f=1/f;d*=f;e*=f;c*=f;k=Math.sin(a);l=Math.cos(a);m=1-l;b[0]=d*d*m+l;b[1]=e*d*m+c*k;b[2]=c*d*m-e*k;b[3]=0;b[4]=d*e*m-c*k;b[5]=e*e*m+l;b[6]=c*e*m+d*k;b[7]=0;b[8]=d*c*m+e*k;b[9]=e*c*m-d*k;b[10]=c*c*m+l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromRotationTranslation=e;f.fromQuat2=function(b,a){var c=r,f=-a[0],g=-a[1],k=-a[2],l=a[3],q=a[4],m=a[5],n=a[6],w=a[7],v=f*f+g*g+k*k+l*l;0<v?(c[0]=2*(q*l+w*f+m*k-n*g)/v,c[1]=2*(m*l+w*g+n*f-q*k)/v,c[2]=2*(n*l+w*k+q*g-m*f)/v):(c[0]=2*(q*l+w*f+m*k-n*g),c[1]=2*(m*l+w*g+n*f-q*k),c[2]=2*(n*l+w*k+q*g-m*f));e(b,a,c);return b};var r=l.create();f.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};f.getScaling=function(b,a){var c=a[0],e=a[1],
f=a[2],g=a[4],k=a[5],l=a[6],m=a[8],n=a[9];a=a[10];b[0]=Math.sqrt(c*c+e*e+f*f);b[1]=Math.sqrt(g*g+k*k+l*l);b[2]=Math.sqrt(m*m+n*n+a*a);return b};f.getRotation=function(b,a){var c=a[0]+a[5]+a[10],e=0;0<c?(e=2*Math.sqrt(c+1),b[3]=.25*e,b[0]=(a[6]-a[9])/e,b[1]=(a[8]-a[2])/e,b[2]=(a[1]-a[4])/e):a[0]>a[5]&&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/e,b[0]=.25*e,b[1]=(a[1]+a[4])/e,b[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/e,b[0]=(a[1]+a[4])/e,b[1]=
.25*e,b[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/e,b[0]=(a[8]+a[2])/e,b[1]=(a[6]+a[9])/e,b[2]=.25*e);return b};f.fromRotationTranslationScale=function(b,a,c,e){var d=a[0],f=a[1],g=a[2],h=a[3],k=d+d,l=f+f,m=g+g;a=d*k;var n=d*l,d=d*m,u=f*l,f=f*m,g=g*m,k=h*k,l=h*l,h=h*m,m=e[0],r=e[1];e=e[2];b[0]=(1-(u+g))*m;b[1]=(n+h)*m;b[2]=(d-l)*m;b[3]=0;b[4]=(n-h)*r;b[5]=(1-(a+g))*r;b[6]=(f+k)*r;b[7]=0;b[8]=(d+l)*e;b[9]=(f-k)*e;b[10]=(1-(a+u))*e;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};f.fromRotationTranslationScaleOrigin=function(b,a,c,e,f){var d=a[0],g=a[1],h=a[2],k=a[3],p=d+d,l=g+g,m=h+h;a=d*p;var n=d*l,r=d*m,d=g*l,g=g*m,D=h*m,h=k*p,l=k*l,B=k*m,A=e[0],I=e[1],m=e[2];e=f[0];k=f[1];f=f[2];var p=(1-(d+D))*A,C=(n+B)*A,A=(r-l)*A,n=(n-B)*I,D=(1-(a+D))*I,I=(g+h)*I,r=(r+l)*m,g=(g-h)*m;a=(1-(a+d))*m;b[0]=p;b[1]=C;b[2]=A;b[3]=0;b[4]=n;b[5]=D;b[6]=I;b[7]=0;b[8]=r;b[9]=g;b[10]=a;b[11]=0;b[12]=c[0]+e-(p*e+n*k+r*f);b[13]=c[1]+k-(C*e+D*k+g*f);b[14]=c[2]+f-(A*e+I*k+a*f);b[15]=
1;return b};f.fromQuat=function(b,a){var c=a[0],e=a[1],f=a[2];a=a[3];var g=c+c,k=e+e,l=f+f,c=c*g,m=e*g,e=e*k,n=f*g,r=f*k,f=f*l,g=a*g,k=a*k;a*=l;b[0]=1-e-f;b[1]=m+a;b[2]=n-k;b[3]=0;b[4]=m-a;b[5]=1-c-f;b[6]=r+g;b[7]=0;b[8]=n+k;b[9]=r-g;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.frustum=function(b,a,c,e,f,g,k){var d=1/(c-a),h=1/(f-e),l=1/(g-k);b[0]=2*g*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*h;b[6]=0;b[7]=0;b[8]=(c+a)*d;b[9]=(f+e)*h;b[10]=(k+g)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=k*
g*2*l;b[15]=0;return b};f.perspective=function(b,a,c,e,f){a=1/Math.tan(a/2);var d=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),b[10]=(f+e)*d,b[14]=2*f*e*d):(b[10]=-1,b[14]=-2*e);return b};f.perspectiveFromFieldOfView=function(b,a,c,e){var d=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),g=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var h=2/(g+
a),k=2/(d+f);b[0]=h;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=-((g-a)*h*.5);b[9]=(d-f)*k*.5;b[10]=e/(c-e);b[11]=-1;b[12]=0;b[13]=0;b[14]=e*c/(c-e);b[15]=0;return b};f.ortho=function(b,a,c,e,f,g,k){var d=1/(a-c),h=1/(e-f),l=1/(g-k);b[0]=-2*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*h;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+c)*d;b[13]=(f+e)*h;b[14]=(k+g)*l;b[15]=1;return b};f.lookAt=function(b,a,c,e){var d=void 0,f=void 0,h=void 0,k=void 0,l=void 0,n=void 0,r=void 0,v=void 0,u=
void 0,J=void 0,D=a[0],B=a[1];a=a[2];h=e[0];k=e[1];e=e[2];r=c[0];v=c[1];c=c[2];if(Math.abs(D-r)<g.EPSILON&&Math.abs(B-v)<g.EPSILON&&Math.abs(a-c)<g.EPSILON)return m(b);r=D-r;v=B-v;u=a-c;J=1/Math.sqrt(r*r+v*v+u*u);r*=J;v*=J;u*=J;d=k*u-e*v;f=e*r-h*u;h=h*v-k*r;(J=Math.sqrt(d*d+f*f+h*h))?(J=1/J,d*=J,f*=J,h*=J):h=f=d=0;k=v*h-u*f;l=u*d-r*h;n=r*f-v*d;(J=Math.sqrt(k*k+l*l+n*n))?(J=1/J,k*=J,l*=J,n*=J):n=l=k=0;b[0]=d;b[1]=k;b[2]=r;b[3]=0;b[4]=f;b[5]=l;b[6]=v;b[7]=0;b[8]=h;b[9]=n;b[10]=u;b[11]=0;b[12]=-(d*D+
f*B+h*a);b[13]=-(k*D+l*B+n*a);b[14]=-(r*D+v*B+u*a);b[15]=1;return b};f.targetTo=function(b,a,c,e){var d=a[0],f=a[1];a=a[2];var g=e[0],h=e[1],k=e[2];e=d-c[0];var l=f-c[1];c=a-c[2];var m=e*e+l*l+c*c;0<m&&(m=1/Math.sqrt(m),e*=m,l*=m,c*=m);var n=h*c-k*l,k=k*e-g*c,g=g*l-h*e,m=n*n+k*k+g*g;0<m&&(m=1/Math.sqrt(m),n*=m,k*=m,g*=m);b[0]=n;b[1]=k;b[2]=g;b[3]=0;b[4]=l*g-c*k;b[5]=c*n-e*g;b[6]=e*k-l*n;b[7]=0;b[8]=e;b[9]=l;b[10]=c;b[11]=0;b[12]=d;b[13]=f;b[14]=a;b[15]=1;return b};f.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};f.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};f.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};f.subtract=k;f.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};f.multiplyScalarAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;b[3]=a[3]+c[3]*e;b[4]=a[4]+c[4]*e;b[5]=a[5]+c[5]*e;b[6]=a[6]+c[6]*e;b[7]=a[7]+c[7]*e;b[8]=a[8]+c[8]*e;b[9]=a[9]+c[9]*e;b[10]=a[10]+c[10]*e;b[11]=a[11]+c[11]*e;b[12]=a[12]+c[12]*e;b[13]=a[13]+c[13]*e;b[14]=a[14]+c[14]*e;b[15]=a[15]+c[15]*e;return b};f.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};f.equals=function(b,a){var c=b[0],e=b[1],f=b[2],k=b[3],l=b[4],m=b[5],n=b[6],r=b[7],w=b[8],v=b[9],u=b[10],J=b[11],D=b[12],B=b[13],A=b[14];b=b[15];var I=a[0],C=a[1],E=a[2],H=a[3],F=a[4],S=a[5],P=a[6],T=a[7],M=a[8],K=a[9],Q=a[10],L=a[11],G=a[12],U=a[13],R=a[14];a=a[15];return Math.abs(c-I)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(e-C)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(C))&&
Math.abs(f-E)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(k-H)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(H))&&Math.abs(l-F)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(m-S)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(n-P)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(r-T)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(w-M)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(M))&&Math.abs(v-K)<=g.EPSILON*Math.max(1,Math.abs(v),Math.abs(K))&&Math.abs(u-
Q)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(J-L)<=g.EPSILON*Math.max(1,Math.abs(J),Math.abs(L))&&Math.abs(D-G)<=g.EPSILON*Math.max(1,Math.abs(D),Math.abs(G))&&Math.abs(B-U)<=g.EPSILON*Math.max(1,Math.abs(B),Math.abs(U))&&Math.abs(A-R)<=g.EPSILON*Math.max(1,Math.abs(A),Math.abs(R))&&Math.abs(b-a)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};f.mul=c;f.sub=k})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(n,f,l){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4f32=l})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(n,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(16);f[0]=1;f[5]=1;f[10]=1;f[15]=1;return f};f.clone=function(f){var g=new Float32Array(16);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];g[9]=f[9];g[10]=f[10];g[11]=f[11];g[12]=f[12];g[13]=f[13];g[14]=f[14];g[15]=f[15];return g};
f.fromValues=function(f,g,m,c,e,k,n,b,a,d,h,p,t,x,q,y){var l=new Float32Array(16);l[0]=f;l[1]=g;l[2]=m;l[3]=c;l[4]=e;l[5]=k;l[6]=n;l[7]=b;l[8]=a;l[9]=d;l[10]=h;l[11]=p;l[12]=t;l[13]=x;l[14]=q;l[15]=y;return l};f.createView=function(f,g){return new Float32Array(f,g,16)}})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.vec3f32=l})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(n,f){function l(){return new Float32Array(3)}function g(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function m(){return g(1,1,1)}function c(){return g(1,0,0)}function e(){return g(0,1,0)}function k(){return g(0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=l;f.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};f.fromValues=g;f.createView=function(c,b){return new Float32Array(c,b,3)};f.zeros=function(){return l()};
f.ones=m;f.unitX=c;f.unitY=e;f.unitZ=k;f.ZEROS=l();f.ONES=m();f.UNIT_X=c();f.UNIT_Y=e();f.UNIT_Z=k()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(n,f,l){Object.defineProperty(f,"__esModule",{value:!0});f.vec4f32=l})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(n,f){function l(){return new Float32Array(4)}function g(b,a,c,e){var d=new Float32Array(4);d[0]=b;d[1]=a;d[2]=c;d[3]=e;return d}
function m(){return g(1,1,1,1)}function c(){return g(1,0,0,0)}function e(){return g(0,1,0,0)}function k(){return g(0,0,1,0)}function r(){return g(0,0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=l;f.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};f.fromValues=g;f.createView=function(b,a){return new Float32Array(b,a,4)};f.zeros=function(){return l()};f.ones=m;f.unitX=c;f.unitY=e;f.unitZ=k;f.unitW=r;f.ZEROS=l();f.ONES=m();f.UNIT_X=c();
f.UNIT_Y=e();f.UNIT_Z=k();f.UNIT_W=r()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(n,f,l,g,m,c,e,k){function r(a,b){return a?b?4:3:b?3:2}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function a(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function d(a,b){return b*a.scale[0]+a.translate[0]}
function h(a,b){return a.translate[1]-b*a.scale[1]}function p(a){a=a.coords;return{x:a[0],y:a[1]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function q(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function y(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function z(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function w(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function v(a,b){a.coords[0]=b.x;
a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function u(a,b){return a&&b?v:a?q:b?z:t}function J(a,b,c){if(!a)return null;for(var d=r(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function D(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=b[f],h=0;h<c;h++)d[e++]=g[h];return a}
function B(a,b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],p=0;p<k;p++){for(var m=[],q=0;q<d;q++)m.push(e[g++]);l.push(m)}f.push(l)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function A(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var p=l[k],m=0;m<c;m++)e[f++]=p[m];d.push(h.length)}return a}function I(a,
b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],p=0;p<k;p++){for(var m=[],q=0;q<d;q++)m.push(e[g++]);l.push(m)}f.push(l)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function C(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);E(a,b.rings,c,d);return a}function E(a,b,c,d){c=r(c,d);d=a.lengths;for(var e=a.coords,f=0,g=d.length=e.length=0;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var p=
l[k],m=0;m<c;m++)e[f++]=p[m];d.push(h.length)}return a}function H(a,b,d,e,f,g){a.length=0;if(!d){for(e=0;e<b.length;e++)f=b[e],a.push(new c.default(null,f.attributes,null,f.attributes[g]));return a}switch(d){case "esriGeometryPoint":e=u(e,f);for(f=0;f<b.length;f++){var h=b[f];d=h.geometry;var h=h.attributes,p=void 0;d&&(p=e(new k.default,d));a.push(new c.default(p,h,null,h[g]))}break;case "esriGeometryMultipoint":e=r(e,f);for(f=0;f<b.length;f++)h=b[f],d=h.geometry,h=h.attributes,p=void 0,d&&(p=D(new k.default,
d,e)),a.push(new c.default(p,h,null,h[g]));break;case "esriGeometryPolyline":e=r(e,f);for(f=0;f<b.length;f++)h=b[f],d=h.geometry,h=h.attributes,p=void 0,d&&(p=A(new k.default,d,e)),a.push(new c.default(p,h,null,h[g]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var m=b[d],h=m.geometry,p=m.centroid,m=m.attributes,q=void 0;h&&(q=C(new k.default,h,e,f));p?a.push(new c.default(q,m,t(new k.default,p),m[g])):a.push(new c.default(q,m,null,m[g]))}break;default:M.error("convertToFeatureSet:unknown-geometry",
new l("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function F(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=p;d&&e?c=w:d?c=x:e&&(c=y);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=J(f,d,e));a.push({attributes:g,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],
f=g.geometry,g=g.attributes,h=void 0,f&&(h=B(f,d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=I(g,d,e));k?(g=p(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:M.error("convertToFeatureSet:unknown-geometry",new l("Unable to parse unknown geometry type '"+c+"'"))}return a}function S(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&
(c.coords.length=0);if(!d||!d.coords.length)return null;g=K[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?G:L:f?L:Q;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=l,c;for(var p,m,q,n=0,u,t=0,v=0;v<d.length;v++){var w=d[v];if(!(w<g)){var x=0;u=t;m=f=b(h,k[n]);q=p=a(h,k[n+1]);e(c.coords,k,u,n,m,q);x++;n+=l;u+=l;for(var N=1;N<w;N++,n+=l)if(m=b(h,k[n]),q=a(h,k[n+1]),m!==f||q!==p)e(c.coords,k,u,n,m-f,q-p),u+=l,x++,f=m,p=q;x>=g&&(c.lengths.push(x),
t=u)}}c.coords.length=t;return c.coords.length?c:null}function P(a,b,c,d,e,f,g){for(var h=g-c,k=0,l=0,p,m=f+c;m<g-c;m+=c){p=b[m];var q=b[m+1],n=b[f],u=b[f+1],r=b[h],t=b[h+1];n===r?p=Math.abs(p-n):(r=(t-u)/(r-n),p=Math.abs(r*p-q+(u-r*n))/Math.sqrt(r*r+1));p>k&&(l=m,k=p)}k>d?(P(a,b,c,d,e,f,l+c),P(a,b,c,d,e,l,g)):(e(a,b,a.length,f,b[f],b[f+1]),e(a,b,a.length,h,b[h],b[h+1]))}function T(a,b,c,e,f){var g=b.coords,k=b.lengths,l=c?e?G:L:e?L:Q;c=r(c,e);if(!g.length)return a!==b&&(a.lengths.length=0,a.coords.length=
0),a;if(!k.length)return l(a.coords,g,0,0,d(f,g[0]),h(f,g[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var p=f.scale;e=p[0];for(var p=p[1],m=0,q=0;q<k.length;q++){var n=k[q];a.lengths[q]=n;var u=d(f,g[m]),t=h(f,g[m+1]);l(a.coords,g,m,m,u,t);for(var m=m+c,v=1;v<n;v++,m+=c)u+=g[m]*e,t-=g[m+1]*p,l(a.coords,g,m,m,u,t)}a!==b&&(a.lengths.length=k.length,a.coords.length=g.length);return a}Object.defineProperty(f,"__esModule",{value:!0});var M=g.getLogger("esri.tasks.support.optimizedFeatureSet"),
K={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Q=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},L=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},G=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};f.quantizeX=b;f.quantizeY=a;f.hydrateX=d;f.hydrateY=h;f.convertToPoint=function(a,b,c){return a?b?c?w(a):x(a):c?y(a):p(a):null};f.convertFromPoint=function(a,b,c){void 0===c&&(c=u(null!=b.z,null!=b.m));return c(a,b)};f.convertToMultipoint=J;f.convertFromMultipoint=
D;f.convertToPolyline=B;f.convertFromPolyline=A;f.convertToPolygon=I;f.convertFromPolygon=C;f.convertFromNestedArray=E;var U=[],R=[];f.convertFromFeature=function(a,b,c,d,e){U[0]=a;a=H(R,U,b,c,d,e)[0];U.length=R.length=0;return a};f.convertFromFeatures=H;f.convertToFeature=function(a,b,c,d){R[0]=a;F(U,R,b,c,d);a=U[0];U.length=R.length=0;return a};f.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new k.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(m.isPoint(a))return u(null!=
b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(m.isPolygon(a))return C(d,a,b,c);if(m.isPolyline(a))return A(d,a,r(b,c));if(m.isMultipoint(a))return D(d,a,r(b,c));M.error("convertFromGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+a+"'"))};f.convertToGeometry=function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=p,c&&d?b=w:c?b=x:d&&(b=y),b(a);case "esriGeometryMultipoint":return J(a,c,d);case "esriGeometryPolyline":return B(a,
c,d);case "esriGeometryPolygon":return I(a,c,d);default:M.error("convertToGeometry:unknown-geometry",new l("Unable to parse unknown geometry type '"+b+"'"))}};f.convertToFeatures=F;f.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:F([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=
f);g&&(a.hasZ=g);return a};f.convertFromFeatureSet=function(a,b){var c=new e.default,d=a.hasM,f=a.hasZ,g=a.features,h=a.objectIdFieldName,k=a.spatialReference,m=a.geometryType,p=a.exceededTransferLimit,q=a.transform;c.fields=a.fields;c.geometryType=m;c.objectIdFieldName=h||b;c.spatialReference=k;if(!c.objectIdFieldName)return M.error(new l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&H(c.features,g,m,f,d,c.objectIdFieldName);p&&(c.exceededTransferLimit=p);d&&
(c.hasM=d);f&&(c.hasZ=f);q&&(c.transform=q);return c};f.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&T(g.geometry,g.geometry,c,d,b);g.centroid&&T(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};f.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,f=b.hasM,g=b.hasZ;if(!a)return b;for(var h=0;h<e.length;h++){var l=e[h],m=new c.default(new k.default,l.attributes);
S(m.geometry,l.geometry,f,g,d,a);l.centroid&&(m.centroid=new k.default,S(m.centroid,l.centroid,f,g,"esriGeometryPoint",a));e[h]=m}b.transform=a;return b};f.quantizeOptimizedGeometry=S;f.quantizeOptimizedGeometryRemoveCollinear=function(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;g=K[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?G:L:f?L:Q;if(!d.length)return e(c.coords,k,0,0,b(h,k[0]),a(h,k[1])),c.lengths.length&&(c.lengths.length=
0),c.coords.length=l,c;for(var m,p,q,n=0,u,t=0,v=0;v<d.length;v++){var w=d[v];if(!(w<g)){var x=0;u=t;f=m=b(h,k[n]);q=p=a(h,k[n+1]);e(c.coords,k,u,n,f,q);x++;for(var n=n+l,y=!1,z=0,D=0,J=1;J<w;J++,n+=l)if(f=b(h,k[n]),q=a(h,k[n+1]),f!==m||q!==p)m=f-m,p=q-p,y&&(0===z&&0===m||0===D&&0===p)?(z+=m,D+=p):(y=!0,z=m,D=p,u+=l,x++),e(c.coords,k,u,n,z,D),m=f,p=q;y&&(u+=l,e(c.coords,k,u,n,z,D));x>=g&&(c.lengths.push(x),t=u)}}c.coords.length!==t&&(c.coords.length=t);return c.coords.length?c:null};f.generalizeOptimizedGeometry=
function(a,b,c,d,e,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;e=K[e];var g=b.coords;b=b.lengths;var h=r(c,d);c=c?d?G:L:d?L:Q;if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=d=0;k<b.length;k++){var l=b[k];if(!(l<e)){var m=a.coords.length/h;P(a.coords,g,h,f,c,d,d+l*h);var p=a.coords.length/h-m;p>=e?a.lengths.push(p):a.coords.length=m*h}d+=l*h}return a.coords.length?
a:null};f.getBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};f.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,
k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],p=d[k],q=d[k+1],e=Math.min(p,e),f=Math.min(q,f),g=Math.max(p,g),h=Math.max(q,h),k=k+c,n=1;n<m;n++,k+=c){var u=d[k],t=d[k+1],p=p+u,q=q+t;0>u&&(e=Math.min(e,p));0<u&&(g=Math.max(g,p));0>t?f=Math.min(f,q):0<t&&(h=Math.max(h,q))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};f.hydrateOptimizedGeometry=T})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(n,f,l,g,m,c,e,k){function r(a,c,e,f){var g=f.transform,h=f.hasZ;f=f.hasM;d.has(a)||d.set(a,b(e));a=d.get(a)(c.geometry,g,h,f);return l({},c,{geometry:a})}function b(b){var c={};switch(b){case "esriGeometryPoint":return function(a,b,d,f){return e.hydratePoint(b,c,a,d,f)};case "esriGeometryPolygon":return function(a,b,d,f){return e.hydratePolygon(b,c,a,d,f)};case "esriGeometryPolyline":return function(a,b,d,f){return e.hydratePolyline(b,c,a,d,f)};case "esriGeometryMultipoint":return function(a,
b,d,f){return e.hydrateMultipoint(b,c,a,d,f)};default:return a.error(new m("mapview-arcade","Unable to handle geometryType: "+b)),function(a,b,c,d){return a}}}Object.defineProperty(f,"__esModule",{value:!0});var a=c.getLogger("esri.views.2d.support.arcadeOnDemand");f.callWithOptimizedFeature=function(b,c,d,e,f){var g=e.geometryType,h=e.hasZ;e=e.hasM;c=b.referencesGeometry()?f?r(b,k.convertToFeature(c,g,h,e),g,f):k.convertToFeature(c,g,h,e):c;c=b.repurposeFeature(c);try{return b.evaluate(l({},d,{$feature:c}))}catch(w){return a.warn("Feature arcade evaluation failed:",
w),null}};f.callWithFeature=function(b,c,d,e,f){c=b.referencesGeometry()&&f?r(b,c,e,f):c;c=b.repurposeFeature(c);try{return b.evaluate(l({},d,{$feature:c}))}catch(y){return a.warn("Feature arcade evaluation failed:",y),null}};var d=new g.default;f.createHydrateFactory=b})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(n,f,l,g,m,c,e,k,r,b){return function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;c.categories=null;c.countryCode=null;c.defaultZoomScale=null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(a){return b.getResults(m({source:c},a))};c.getSuggestions=function(a){return b.getSuggestions(m({source:c},a))};return c}l(d,a);f=d;d.prototype.readLocator=function(a,
b){return(a=b.url)?new k({url:a}):null};d.prototype.writeLocator=function(a,b){b.url=a?a.url:null};d.prototype.clone=function(){return new f({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?
this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var f;g([e.property()],d.prototype,"categories",void 0);g([e.property()],
d.prototype,"countryCode",void 0);g([e.property({json:{write:!0}})],d.prototype,"defaultZoomScale",void 0);g([e.property({type:k})],d.prototype,"locator",void 0);g([e.reader("locator",["url"])],d.prototype,"readLocator",null);g([e.writer("locator")],d.prototype,"writeLocator",null);g([e.property()],d.prototype,"locationType",void 0);g([e.property({json:{write:!0}})],d.prototype,"name",void 0);g([e.property({json:{write:!0}})],d.prototype,"placeholder",void 0);g([e.property()],d.prototype,"searchTemplate",
void 0);g([e.property({json:{write:!0}})],d.prototype,"singleLineFieldName",void 0);g([e.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",void 0);g([e.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=f=g([e.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(e.declared(r))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(n,f,l,g,m,c,e,k,r,b){return function(a){function d(b){b=a.call(this,b)||this;b.outSpatialReference=null;b.url=null;return b}l(d,a);d.prototype.addressToLocations=function(a,b){var d=a.address,e=a.categories,f=a.countryCode,g=a.forStorage,h=a.location,k=a.locationType,l=a.magicKey,p=a.maxLocations,n=a.outFields;a=a.searchExtent;var r=h?h.clone().normalize():null,B=a?a.shiftCentralMeridian():null,A=this.outSpatialReference,h=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:A?JSON.stringify(A.toJSON()):
null,outFields:n?n.join(","):null,searchExtent:B?JSON.stringify(B.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:l||null,location:r,locationType:k||null,maxLocations:p||null,forStorage:g||null};d={query:this._encode(m({},h.query,d,e))};b=m({},a,b,d);return c(h.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(a,b){var d=this.parsedUrl,e=this.requestOptions,f=a.location,g=a.searchExtent,f=f?f.clone().normalize():
null,g=g?g.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:g?JSON.stringify(g.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:f};a={query:this._encode(m({},d.query,a))};b=m({},e,b,a);return c(d.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=function(a,b){var d=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,g=a.addresses,h=a.categories,
k=a.locationType;a=a.countryCode;var l=[];Array.isArray(g)&&g.forEach(function(a){l.push({attributes:a})});d={category:h?h.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:l}),locationType:k||null,f:"json",outSR:d?JSON.stringify(d):null};d={query:this._encode(m({},e.query,d))};b=m({},f,b,d);return c(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(a,b){var d=a.locationType,e=(a=a.location)?a.clone().normalize():
null,f="undefined"!==typeof e,g=this.outSpatialReference;a=this.parsedUrl;var h=this.requestOptions,d={outSR:g?JSON.stringify(g.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:d||null,f:"json"},d={query:this._encode(m({},a.query,d))};b=m({},h,b,d);return c(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.candidates,d=a.spatialReference;return c?c.map(function(a){if(a){var c=
a.extent,e=a.location,f=c?c&&"number"===typeof c.xmin&&"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&f)return c&&(c.spatialReference=d),e.spatialReference=d,b.fromJSON(a)}}):[]};d.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var c=a.locations,d=a.spatialReference;return c?c.map(function(a){var c=
a.location;c&&(c.spatialReference=d);return b.fromJSON(a)}):[]};d.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var c=a.address;return b.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:a.location,score:100})}};g([e.property({type:k})],d.prototype,"outSpatialReference",void 0);g([e.property()],d.prototype,"url",void 0);return d=g([e.subclass("esri.tasks.Locator")],d)}(e.declared(r))})},"esri/tasks/support/AddressCandidate":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),
function(n,f,l,g,m,c,e,k){return function(f){function b(a){a=f.call(this,a)||this;a.address=null;a.attributes=null;a.extent=null;a.location=null;a.score=null;return a}g(b,f);l([c.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);l([c.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);l([c.property({type:e,json:{write:!0}})],b.prototype,"extent",void 0);l([c.property({type:k,json:{write:!0}})],b.prototype,"location",void 0);l([c.property({type:Number,json:{write:!0}})],
b.prototype,"score",void 0);return b=l([c.subclass("esri.tasks.support.AddressCandidate")],b)}(c.declared(m.JSONSupport))})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),function(n,f,l,g,m,c){function e(b){var c=b.source,d=b.spatialReference,e=b.location,f=b.sourceIndex,g=b.view;b=c.locator;var k=c.zoomScale,l=c.defaultZoomScale,m=g&&g.scale;d&&(b.outSpatialReference=d);return b.locationToAddress({location:e}).then(function(b){return a([b],
{sourceIndex:f,scale:m,view:g,zoomScale:k,defaultZoomScale:l})})}function k(a,b){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=c.createExtentFromGeometry(d&&d.geometry,b,b&&b.scale))||e||(a&&f?f:void 0)}function r(b){var c=b.source,d=b.suggestResult,e=b.spatialReference,f=b.view,l=b.maxResults,n=b.sourceIndex,r=c&&c.zoomScale,w=c&&c.defaultZoomScale;b=d.text.trim();if(!b)return m.resolve();b=""+(!d.key&&c.prefix?c.prefix:"")+b+(!d.key&&c.suffix?c.suffix:"");var v=
{},u=c.locator,J=f&&f.scale,D=k(c,f);if(!u)return m.resolve();c.categories&&(v.categories=c.categories);c.locationType&&(v.locationType=c.locationType);e&&(u.outSpatialReference=e);if(e=f&&f.get("extent.center"))v.location=e;v.maxLocations=l;D&&(v.searchExtent=g.unwrap(D));c.countryCode&&(v.countryCode=c.countryCode);var B=d.key;B&&(v.magicKey=B);v.address={};v.address[c.singleLineFieldName||"Single Line Input"]=b;c.outFields&&(v.outFields=c.outFields);return u.addressToLocations(v).then(function(b){return a(b,
{key:B,scale:J,sourceIndex:n,view:f,zoomScale:r,defaultZoomScale:w})})}function b(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function a(a,b){return a.map(function(a){var d=b.key,e=b.scale,f=b.sourceIndex,g=b.view,h=b.zoomScale,k=b.defaultZoomScale,m=a.extent,n=a.location,p=a.address;a=new l({geometry:n,attributes:a.attributes});m=m||n;e=c.createExtentFromGeometry(m,g,e);g=h?c.scaleExtent(e,g,h):k&&"point"===m.type?c.scaleExtent(e,g,k):e;n=n?n.x+","+n.y:"";return{extent:g,
feature:a,key:d,name:p||n,sourceIndex:f}})}Object.defineProperty(f,"__esModule",{value:!0});f.getResults=function(a){return a.location?e(a):r(a)};f.getSuggestions=function(a){var c=a.source,d=a.spatialReference,e=a.view,f=a.suggestTerm,l=a.maxSuggestions,n=a.sourceIndex;a={};var r=c.locator,w=k(c,e);if(!r)return m.resolve();c.categories&&(a.categories=c.categories);r.outSpatialReference=d;if(d=e&&e.get("extent.center"))a.location=d;f=f.trim();if(!f)return m.resolve();d=c.prefix;e=c.suffix;a.text=
""+(void 0===d?"":d)+f+(void 0===e?"":e);w&&(a.searchExtent=g.unwrap(w));a.maxSuggestions=l;c.countryCode&&(a.countryCode=c.countryCode);return r.suggestLocations(a).then(function(a){return b(a,n)})};f.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):!1}})},"*now":function(n){n(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search dojo/regexp ../intl ../core/events ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(n,f,l,g,m,c,e,k,r,b,a,d,h,p,t,x,q){var y=/<[a-z/][\s\S]*>/i;return function(f){function n(b){var c=f.call(this)||this;
c._handles=new a;c._inputNode=null;c._sourceMenuButtonNode=null;c._sourceListNode=null;c._suggestionListNode=null;c._searchResultRenderer=new t;c._suggestPromise=null;c._relatedTarget=null;c.activeMenu="none";c.activeSource=null;c.activeSourceIndex=null;c.allPlaceholder=null;c.allSources=null;c.autoNavigate=null;c.autoSelect=null;c.defaultSources=null;c.goToOverride=null;c.iconClass="esri-icon-search";c.includeDefaultSources=null;c.label=e.widgetLabel;c.locationEnabled=null;c.maxResults=null;c.maxSuggestions=
null;c.minSuggestCharacters=null;c.popupEnabled=null;c.popupTemplate=null;c.portal=null;c.resultGraphic=null;c.resultGraphicEnabled=null;c.results=null;c.searchAllEnabled=null;c.searchTerm=null;c.selectedResult=null;c.sources=null;c.suggestions=null;c.suggestionsEnabled=null;c.view=null;c.viewModel=new x;c.own(d.watch(c,"searchTerm",function(a){if(a&&"warning"===c.activeMenu||!a&&!c.get("viewModel.selectedSuggestion.location"))c.activeMenu="none"}),d.on(c,"viewModel.allSources","change",function(){return c._watchSourceChanges()}),
d.init(c,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===c.get("viewModel.popupTemplate.content")&&(c.viewModel.popupTemplate.content=c._renderSearchResultsContent.bind(c))}));return c}l(n,f);n.prototype.postInitialize=function(){this.viewModel.load()};n.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=
null)};n.prototype.clear=function(){};n.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};n.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};n.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();return this.viewModel.search(a).catch(function(a){b.activeMenu="none";return a}).then(function(a){b.activeMenu=a.numResults?"none":"warning";
return a})};n.prototype.suggest=function(a){var b=this;this._cancelSuggest();var c=this.viewModel.suggest(a).then(function(a){if(b._suggestPromise===c)return b._suggestPromise=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestPromise===c)return b._suggestPromise=null});return this._suggestPromise=c};n.prototype.render=function(){var a=this,b,d,f=this.viewModel,g=f.activeSourceIndex,k=f.suggestions,h=f.maxInputLength,l=f.placeholder,m=f.searchTerm,
n=f.searchAllEnabled,p=f.allSources,t=this._getSourceName(g),w=(""+m).trim(),y=this.activeMenu,z=this.id,K=this.viewModel.state,Q=this.id+"-suggest-menu",h=q.tsx("input",{bind:this,placeholder:l,"aria-label":e.searchButtonTitle,maxlength:h,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:m,"aria-haspopup":"true","aria-owns":Q,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,
oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:q.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:m?"":l}),h=q.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},h),l=m?q.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:e.clearButtonTitle,
onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},q.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,L=this.locationEnabled&&!w?q.tsx("ul",{key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},q.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,
role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},q.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",e.useCurrentLocation)):null,G=1<p.length&&g===x.ALL_INDEX,g=k?k.map(function(b,c){var d=b.sourceIndex,e=b.results.length;c=e&&G?a._getSuggestionHeaderNode(d):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c,d)});b=e?q.tsx("ul",{key:"esri-search__suggestion-list-"+d,class:a.classes("esri-menu__list","esri-search__suggestions-list")},
b):null;return[c,b]}):null,Q=q.tsx("div",{id:Q,"aria-expanded":"suggestion"===y,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:q.storeNode,"data-node-ref":"_suggestionListNode"},L,g),Q=q.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},h,Q,l),g=q.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:e.searchButtonTitle,class:this.classes("esri-search__submit-button",
"esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},q.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),q.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle)),m=w?r.substitute(e.noResultsFoundForValue,{value:'"'+m+'"'}):e.noResultsFound,m=f.get("selectedSuggestion.location")||w?q.tsx("div",{key:"esri-search__no_results"},q.tsx("div",{class:"esri-search__warning-header"},e.noResults),q.tsx("div",
{class:"esri-search__warning-text"},m)):null,f=f.get("selectedSuggestion.location")||w?null:q.tsx("div",{key:"esri-search__empty-search"},q.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),q.tsx("span",{class:"esri-search__no-value-text"},e.emptyValue)),f=q.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},q.tsx("div",{class:"esri-search__warning-body"},m,f)),w=1<p.length,p=p&&p.toArray(),n=n?this._getSourceNode(x.ALL_INDEX):
null,z=z+"-source-menu",t=w?q.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:e.searchIn,"aria-haspopup":"true","aria-expanded":"source"===y,"aria-controls":z,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:q.storeNode,"data-node-ref":"_sourceMenuButtonNode"},
q.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),q.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),q.tsx("span",{class:"esri-search__source-name"},t)):null,n=w?q.tsx("ul",{bind:this,afterCreate:q.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},n,p.map(function(b,c){return a._getSourceNode(c)})):null,z=q.tsx("div",{id:z,key:"esri-search__source-menu",
class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},n),y=(b={},b["esri-search--multiple-sources"]=w,b["esri-search--loading"]="loading"===K,b["esri-search--searching"]="searching"===K,b["esri-search--warning"]="warning"===y,b["esri-search--sources"]="source"===y,b["esri-search--show-suggestions"]="suggestion"===y,b);b=(d={},d["esri-disabled"]="disabled"===K,d);d="loading"===K?q.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},q.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),q.tsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle),q.tsx("span",{class:"esri-widget__loader-text"},c.loading)):q.tsx("div",{role:"presentation",class:this.classes(y,"esri-search__container"),key:"base-container"},t,z,Q,g,f);return q.tsx("div",{class:this.classes("esri-search esri-widget",b)},d)};n.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(d.watch(c,
"name",function(){return a.scheduleRender()}),"sources")})};n.prototype._handleSourceMenuButtonKeydown=function(a){var c=b.eventKey(a);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(a.preventDefault(),a.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(a)};n.prototype._handleSourcesMenuToggleClick=function(a){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(a="End"===b.eventKey(a)?c[c.length-1]:c[0])&&a.focus()};n.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};n.prototype._handleSearchButtonClick=function(){this.search()};n.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};n.prototype._handleUseCurrentLocationClick=function(){this._focus("none");this.viewModel.searchNearby()};n.prototype._handleSourceClick=
function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};n.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};n.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};n.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};n.prototype._clearButtonFocus=function(){this.activeMenu="none"};n.prototype._removeActiveMenu=
function(a,b){!a||a&&b&&b.contains(a)||(this.activeMenu="none")};n.prototype._cancelSuggest=function(){this._suggestPromise=null};n.prototype._handleInputKeydown=function(a){var c=b.eventKey(a);("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c)&&this._cancelSuggest()};n.prototype._handleInputKeyup=function(a){var c=b.eventKey(a),d=a.ctrlKey||a.metaKey||"Copy"===c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,e=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):
null;d||("Tab"===c||"Escape"===c||a.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==c&&"ArrowDown"!==c||!e?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),(a=e["ArrowUp"===c?e.length-1:0])&&a.focus()))};n.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};n.prototype._handleInputClick=function(a){this.activeMenu=
"suggestion"};n.prototype._handleInputPaste=function(a){var b=this.get("viewModel.searchTerm");a=a.target;b!==a.value&&(this.viewModel.searchTerm=a.value);b&&this.suggest()};n.prototype._handleSourceMenuButtonKeyup=function(a){var c=b.eventKey(a);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(c=a["ArrowUp"===c||"End"===c?a.length-1:0])&&c.focus()};n.prototype._handleSourceKeyup=
function(a){var c=a.target,d=this._sourceListNode?m.from(this._sourceListNode.getElementsByTagName("li")):null,e=b.eventKey(a);if("Escape"===e)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(d){c=d.indexOf(c);if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)a.stopPropagation(),a.preventDefault();"Home"===e?(d=d[0])&&d.focus():"End"===e?(d=d[d.length-1])&&d.focus():"ArrowUp"===e?(a=c-1,(d=0>a?this._sourceMenuButtonNode:d[a])&&d.focus()):"ArrowDown"===
e&&(a=c+1,(d=a>=d.length?this._sourceMenuButtonNode:d[a])&&d.focus())}};n.prototype._handleSuggestionKeyup=function(a){var c=a.target,d=this._suggestionListNode?m.from(this._suggestionListNode.getElementsByTagName("li")):null,c=d.indexOf(c),e=b.eventKey(a);this._cancelSuggest();if("Backspace"===e||"Delete"===e)this._focus();else if("Escape"===e)this._focus("none");else if(d){if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)a.stopPropagation(),a.preventDefault();"Home"===e&&(a=d[0])&&a.focus();
"End"===e&&(a=d[d.length-1])&&a.focus();"ArrowUp"===e?(--c,(d=0>c?d[d.length-1]:d[c])&&d.focus()):"ArrowDown"===e&&(c+=1,(d=c>=d.length?d[0]:d[c])&&d.focus())}};n.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};n.prototype._formSubmit=function(a){a.preventDefault();this.search()};n.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);return a===x.ALL_INDEX?e.all:b?b.name||e.untitledSource:e.untitledSource};n.prototype._getSuggestionHeaderNode=function(a){var b=
this._getSourceName(a);return q.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},b)};n.prototype._splitResult=function(a,b){b=k.escapeString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};n.prototype._getSuggestionNode=function(a,b,c){if(c=this.viewModel.searchTerm){var d=a.text||e.untitledResult,f=[];if(y.test(d))f.push(q.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&
(a.toLowerCase()===g?f.push(q.tsx("strong",{key:b},a)):f.push(a))})}return q.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},f)}};n.prototype._getSourceNode=function(a){var b,c=(b={},b["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,b);return q.tsx("li",{bind:this,key:"esri-search__source-"+
a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};n.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};g([h.property(),q.renderable()],n.prototype,"activeMenu",void 0);g([h.aliasOf("viewModel.activeSource"),
q.renderable()],n.prototype,"activeSource",void 0);g([h.aliasOf("viewModel.activeSourceIndex"),q.renderable()],n.prototype,"activeSourceIndex",void 0);g([h.aliasOf("viewModel.allPlaceholder"),q.renderable()],n.prototype,"allPlaceholder",void 0);g([h.aliasOf("viewModel.allSources")],n.prototype,"allSources",void 0);g([h.aliasOf("viewModel.autoNavigate")],n.prototype,"autoNavigate",void 0);g([h.aliasOf("viewModel.autoSelect")],n.prototype,"autoSelect",void 0);g([h.aliasOf("viewModel.defaultSources")],
n.prototype,"defaultSources",void 0);g([h.aliasOf("viewModel.goToOverride")],n.prototype,"goToOverride",void 0);g([h.property()],n.prototype,"iconClass",void 0);g([h.aliasOf("viewModel.includeDefaultSources")],n.prototype,"includeDefaultSources",void 0);g([h.property()],n.prototype,"label",void 0);g([q.renderable(),h.aliasOf("viewModel.locationEnabled")],n.prototype,"locationEnabled",void 0);g([h.aliasOf("viewModel.maxResults")],n.prototype,"maxResults",void 0);g([h.aliasOf("viewModel.maxSuggestions")],
n.prototype,"maxSuggestions",void 0);g([h.aliasOf("viewModel.minSuggestCharacters")],n.prototype,"minSuggestCharacters",void 0);g([h.aliasOf("viewModel.popupEnabled")],n.prototype,"popupEnabled",void 0);g([h.aliasOf("viewModel.popupTemplate")],n.prototype,"popupTemplate",void 0);g([h.aliasOf("viewModel.portal")],n.prototype,"portal",void 0);g([h.aliasOf("viewModel.resultGraphic")],n.prototype,"resultGraphic",void 0);g([h.aliasOf("viewModel.resultGraphicEnabled")],n.prototype,"resultGraphicEnabled",
void 0);g([h.aliasOf("viewModel.results"),q.renderable()],n.prototype,"results",void 0);g([h.aliasOf("viewModel.searchAllEnabled"),q.renderable()],n.prototype,"searchAllEnabled",void 0);g([h.aliasOf("viewModel.searchTerm"),q.renderable()],n.prototype,"searchTerm",void 0);g([h.aliasOf("viewModel.selectedResult")],n.prototype,"selectedResult",void 0);g([h.aliasOf("viewModel.sources")],n.prototype,"sources",void 0);g([h.aliasOf("viewModel.suggestions"),q.renderable()],n.prototype,"suggestions",void 0);
g([h.aliasOf("viewModel.suggestionsEnabled")],n.prototype,"suggestionsEnabled",void 0);g([h.aliasOf("viewModel.view"),q.renderable()],n.prototype,"view",void 0);g([q.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),h.property({type:x}),q.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],n.prototype,"viewModel",void 0);g([h.aliasOf("viewModel.clear")],n.prototype,"clear",
null);g([q.accessibleHandler()],n.prototype,"_handleSourcesMenuToggleClick",null);g([q.accessibleHandler()],n.prototype,"_handleClearButtonClick",null);g([q.accessibleHandler()],n.prototype,"_handleSearchButtonClick",null);g([q.accessibleHandler()],n.prototype,"_handleSuggestionClick",null);g([q.accessibleHandler()],n.prototype,"_handleUseCurrentLocationClick",null);g([q.accessibleHandler()],n.prototype,"_handleSourceClick",null);return n=g([h.subclass("esri.widgets.Search")],n)}(h.declared(p))});