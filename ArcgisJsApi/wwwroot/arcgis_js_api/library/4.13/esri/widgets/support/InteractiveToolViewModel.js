// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.13/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/assignHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../../views/interactive/interactiveToolUtils".split(" "),function(r,t,g,c,h,k,l,m,n,p,b,q){return function(e){function a(d){var a=e.call(this)||this;a.tool=null;a._baseHandles=new n;a._loggedUnsupportedErrorOnce=
!1;a._createPromise=null;d&&null!=d.visible&&(a.visible=d.visible);return a}g(a,e);a.prototype.initialize=function(){var a=this;this._baseHandles.add(p.init(this,["view.ready","isSupported"],function(){a.view&&a.view.ready&&!a.isSupported?a._loggedUnsupportedErrorOnce||(a.logUnsupportedError(),a._loggedUnsupportedErrorOnce=!0):a._loggedUnsupportedErrorOnce=!1}))};a.prototype.destroy=function(){this.tool&&(q.setActive(this.tool,!1),this.view&&this.view.tools.remove(this.tool),this.tool.destroy(),this._set("tool",
null));this.view=null;this._baseHandles.destroy();this._createPromise=this._baseHandles=null};Object.defineProperty(a.prototype,"isSupported",{get:function(){return!this.view||this.view.type===this.supportedViewType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"view",{get:function(){return this._get("view")},set:function(a){this._createToolOnView(a);this._set("view",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{set:function(a){this._set("visible",
a);this.tool&&(this.tool.visible=a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"active",{get:function(){return null!=this.tool&&this.tool.active},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isDisabled",{get:function(){return!this.tool||!this.view||!this.view.ready||!this.isSupported},enumerable:!0,configurable:!0});a.prototype._createToolOnView=function(a){return k(this,void 0,void 0,function(){var b,c,d,e=this;return h(this,function(f){switch(f.label){case 0:return a!==
this.view&&this.view&&(this.tool&&(this.view.removeTool(this.tool),this.tool.destroyed||this.tool.destroy(),this._set("tool",null)),this._createPromise&&(this._createPromise=null)),this._createPromise?[4,this._createPromise]:[3,2];case 1:f.sent(),f.label=2;case 2:return a&&(b=this.createToolParams(),c=l({visible:this.visible},b.constructorArguments),d=this._createPromise=a.createTool(b.toolConstructor,c,this.tool),d.then(function(a){e._createPromise===d&&e._set("tool",a)})),[2]}})})};c([b.property({constructOnly:!0})],
a.prototype,"tool",void 0);c([b.property({dependsOn:["view.type"]})],a.prototype,"isSupported",null);c([b.property({value:null})],a.prototype,"view",null);c([b.property({type:Boolean,value:!0})],a.prototype,"visible",null);c([b.property({dependsOn:["tool.active"]})],a.prototype,"active",null);c([b.property({dependsOn:["tool","view","view.ready","isSupported"]})],a.prototype,"isDisabled",null);return a=c([b.subclass("esri.widgets.support.InteractiveToolViewModel")],a)}(b.declared(m))});